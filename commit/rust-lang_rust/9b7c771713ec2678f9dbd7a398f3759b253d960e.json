{"sha": "9b7c771713ec2678f9dbd7a398f3759b253d960e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjliN2M3NzE3MTNlYzI2NzhmOWRiZDdhMzk4ZjM3NTliMjUzZDk2MGU=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2021-08-18T17:54:57Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-08-18T17:54:57Z"}, "message": "Rollup merge of #88031 - ibraheemdev:build-hasher-object-safe, r=m-ou-se\n\nMake `BuildHasher` object safe\n\nResolves #87991", "tree": {"sha": "17be286d6e1ec98ae3758fae14dd4bcecd1c5ee9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/17be286d6e1ec98ae3758fae14dd4bcecd1c5ee9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9b7c771713ec2678f9dbd7a398f3759b253d960e", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJhHUlyCRBK7hj4Ov3rIwAAyqsIAA2xbajGiqUvJr6WItROshdW\nlPxgmFt0x8joWvvHX5zdXi1l5AiyE2X4fL4ggaY/1OARUfc7bqzWM47R1p0CB8m4\nA1zbi4wjsEnln1MIkvj6tUMgJAyL30plPdMgrsalq145iu3MRSmmeb6Ux+Ivlfk5\n9LT9jbhoRq3Ack99oJxU5pOBn9mnputnPOGcuXfKZpibA4/IhcHHKyfzouFcwIVL\n7Kbr3Oh3xYguVp0Bhzff/IB4LgRo/4lJVrvdN/5XJk0F76GWEphL4FA8DTTt1uip\nPrEgPYA1L3p+/oT402KLoikk8C53BT2V92nXf9vubqLdctJxdHyTgqa6i43YYVk=\n=shCa\n-----END PGP SIGNATURE-----\n", "payload": "tree 17be286d6e1ec98ae3758fae14dd4bcecd1c5ee9\nparent 627bc60702395b0527c4c89888ad2eabfa3e3fd4\nparent 58f988fa408fb58266c1fbbc62fa29c4473d5e10\nauthor Guillaume Gomez <guillaume1.gomez@gmail.com> 1629309297 +0200\ncommitter GitHub <noreply@github.com> 1629309297 +0200\n\nRollup merge of #88031 - ibraheemdev:build-hasher-object-safe, r=m-ou-se\n\nMake `BuildHasher` object safe\n\nResolves #87991\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9b7c771713ec2678f9dbd7a398f3759b253d960e", "html_url": "https://github.com/rust-lang/rust/commit/9b7c771713ec2678f9dbd7a398f3759b253d960e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9b7c771713ec2678f9dbd7a398f3759b253d960e/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "627bc60702395b0527c4c89888ad2eabfa3e3fd4", "url": "https://api.github.com/repos/rust-lang/rust/commits/627bc60702395b0527c4c89888ad2eabfa3e3fd4", "html_url": "https://github.com/rust-lang/rust/commit/627bc60702395b0527c4c89888ad2eabfa3e3fd4"}, {"sha": "58f988fa408fb58266c1fbbc62fa29c4473d5e10", "url": "https://api.github.com/repos/rust-lang/rust/commits/58f988fa408fb58266c1fbbc62fa29c4473d5e10", "html_url": "https://github.com/rust-lang/rust/commit/58f988fa408fb58266c1fbbc62fa29c4473d5e10"}], "stats": {"total": 14, "additions": 12, "deletions": 2}, "files": [{"sha": "77161e961e79812b2b931c457b9efb1546d23f3f", "filename": "library/core/src/hash/mod.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/9b7c771713ec2678f9dbd7a398f3759b253d960e/library%2Fcore%2Fsrc%2Fhash%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9b7c771713ec2678f9dbd7a398f3759b253d960e/library%2Fcore%2Fsrc%2Fhash%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fhash%2Fmod.rs?ref=9b7c771713ec2678f9dbd7a398f3759b253d960e", "patch": "@@ -520,7 +520,10 @@ pub trait BuildHasher {\n     /// );\n     /// ```\n     #[unstable(feature = \"build_hasher_simple_hash_one\", issue = \"86161\")]\n-    fn hash_one<T: Hash>(&self, x: T) -> u64 {\n+    fn hash_one<T: Hash>(&self, x: T) -> u64\n+    where\n+        Self: Sized,\n+    {\n         let mut hasher = self.build_hasher();\n         x.hash(&mut hasher);\n         hasher.finish()"}, {"sha": "72ccdd4848a47ec4979c12744f3173b3ca286b84", "filename": "library/core/tests/hash/mod.rs", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/9b7c771713ec2678f9dbd7a398f3759b253d960e/library%2Fcore%2Ftests%2Fhash%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9b7c771713ec2678f9dbd7a398f3759b253d960e/library%2Fcore%2Ftests%2Fhash%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Ftests%2Fhash%2Fmod.rs?ref=9b7c771713ec2678f9dbd7a398f3759b253d960e", "patch": "@@ -1,7 +1,7 @@\n mod sip;\n \n use std::default::Default;\n-use std::hash::{Hash, Hasher};\n+use std::hash::{BuildHasher, Hash, Hasher};\n use std::rc::Rc;\n \n struct MyHasher {\n@@ -139,3 +139,10 @@ fn test_indirect_hasher() {\n     }\n     assert_eq!(hasher.hash, 5);\n }\n+\n+#[test]\n+fn test_build_hasher_object_safe() {\n+    use std::collections::hash_map::{DefaultHasher, RandomState};\n+\n+    let _: &dyn BuildHasher<Hasher = DefaultHasher> = &RandomState::new();\n+}"}]}