{"sha": "3a98b5a5bee9234cb22e964864b11288a12bd67c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNhOThiNWE1YmVlOTIzNGNiMjJlOTY0ODY0YjExMjg4YTEyYmQ2N2M=", "commit": {"author": {"name": "topecongiro", "email": "seuchida@gmail.com", "date": "2017-12-15T04:47:52Z"}, "committer": {"name": "topecongiro", "email": "seuchida@gmail.com", "date": "2017-12-15T04:47:52Z"}, "message": "Format trait aliases", "tree": {"sha": "c8cb6a6455c0ece56f61762ff10643268beba747", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c8cb6a6455c0ece56f61762ff10643268beba747"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3a98b5a5bee9234cb22e964864b11288a12bd67c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3a98b5a5bee9234cb22e964864b11288a12bd67c", "html_url": "https://github.com/rust-lang/rust/commit/3a98b5a5bee9234cb22e964864b11288a12bd67c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3a98b5a5bee9234cb22e964864b11288a12bd67c/comments", "author": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "committer": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4f7cbc3aad572b308884321b01c5208b3ca65638", "url": "https://api.github.com/repos/rust-lang/rust/commits/4f7cbc3aad572b308884321b01c5208b3ca65638", "html_url": "https://github.com/rust-lang/rust/commit/4f7cbc3aad572b308884321b01c5208b3ca65638"}], "stats": {"total": 33, "additions": 28, "deletions": 5}, "files": [{"sha": "0c152d98767c05b9ded337312d64804e667d0e75", "filename": "src/items.rs", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/3a98b5a5bee9234cb22e964864b11288a12bd67c/src%2Fitems.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3a98b5a5bee9234cb22e964864b11288a12bd67c/src%2Fitems.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fitems.rs?ref=3a98b5a5bee9234cb22e964864b11288a12bd67c", "patch": "@@ -1087,6 +1087,22 @@ pub fn format_trait(context: &RewriteContext, item: &ast::Item, offset: Indent)\n     }\n }\n \n+pub fn format_trait_alias(\n+    context: &RewriteContext,\n+    ident: ast::Ident,\n+    generics: &ast::Generics,\n+    ty_param_bounds: &ast::TyParamBounds,\n+    shape: Shape,\n+) -> Option<String> {\n+    let alias = ident.name.as_str();\n+    // 6 = \"trait \", 2 = \" =\"\n+    let g_shape = shape.offset_left(6 + alias.len())?.sub_width(2)?;\n+    let generics_str = rewrite_generics(context, generics, g_shape, generics.span)?;\n+    let lhs = format!(\"trait {}{} =\", alias, generics_str);\n+    // 1 = \";\"\n+    rewrite_assign_rhs(context, lhs, ty_param_bounds, shape.sub_width(1)?).map(|s| s + \";\")\n+}\n+\n fn format_unit_struct(context: &RewriteContext, p: &StructParts, offset: Indent) -> Option<String> {\n     let header_str = format_header(p.prefix, p.ident, p.vis);\n     let generics_str = if let Some(generics) = p.generics {"}, {"sha": "ae9f7a091f926deb094c15294b19b5542bae58c5", "filename": "src/visitor.rs", "status": "modified", "additions": 12, "deletions": 5, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/3a98b5a5bee9234cb22e964864b11288a12bd67c/src%2Fvisitor.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3a98b5a5bee9234cb22e964864b11288a12bd67c/src%2Fvisitor.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fvisitor.rs?ref=3a98b5a5bee9234cb22e964864b11288a12bd67c", "patch": "@@ -22,8 +22,8 @@ use comment::{combine_strs_with_missing_comments, contains_comment, remove_trail\n               CodeCharKind, CommentCodeSlices, FindUncommented};\n use comment::rewrite_comment;\n use config::{BraceStyle, Config};\n-use items::{format_impl, format_trait, rewrite_associated_impl_type, rewrite_associated_type,\n-            rewrite_type_alias, FnSig, StaticParts, StructParts};\n+use items::{format_impl, format_trait, format_trait_alias, rewrite_associated_impl_type,\n+            rewrite_associated_type, rewrite_type_alias, FnSig, StaticParts, StructParts};\n use lists::{itemize_list, write_list, DefinitiveListTactic, ListFormatting, SeparatorPlace,\n             SeparatorTactic};\n use macros::{rewrite_macro, MacroPosition};\n@@ -373,9 +373,16 @@ impl<'b, 'a: 'b> FmtVisitor<'a> {\n                 let rw = format_trait(&self.get_context(), item, self.block_indent);\n                 self.push_rewrite(item.span, rw);\n             }\n-            ast::ItemKind::TraitAlias(..) => {\n-                // FIXME: #2283.\n-                self.push_rewrite(item.span, None);\n+            ast::ItemKind::TraitAlias(ref generics, ref ty_param_bounds) => {\n+                let shape = Shape::indented(self.block_indent, self.config);\n+                let rw = format_trait_alias(\n+                    &self.get_context(),\n+                    item.ident,\n+                    generics,\n+                    ty_param_bounds,\n+                    shape,\n+                );\n+                self.push_rewrite(item.span, rw);\n             }\n             ast::ItemKind::ExternCrate(_) => {\n                 let rw = rewrite_extern_crate(&self.get_context(), item);"}]}