{"sha": "8e001618192bbcbe34b8f539ab7d8fa87090700b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhlMDAxNjE4MTkyYmJjYmUzNGI4ZjUzOWFiN2Q4ZmE4NzA5MDcwMGI=", "commit": {"author": {"name": "Jesse Ruderman", "email": "jruderman@gmail.com", "date": "2011-09-10T02:47:40Z"}, "committer": {"name": "Jesse Ruderman", "email": "jruderman@gmail.com", "date": "2011-09-10T02:47:40Z"}, "message": "Make the pretty printer disambiguatae blocks followed by vec expressions.\n\nSemicolons are needed here now that postfix [] is used for vec indexing (the syntax change made in rev 518dc52f85c2efb67aaa1208c02e9a7e0bdaca49).", "tree": {"sha": "ad71a41fa4417ad24e647a95310007cb9b3867f9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ad71a41fa4417ad24e647a95310007cb9b3867f9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8e001618192bbcbe34b8f539ab7d8fa87090700b", "comment_count": 1, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8e001618192bbcbe34b8f539ab7d8fa87090700b", "html_url": "https://github.com/rust-lang/rust/commit/8e001618192bbcbe34b8f539ab7d8fa87090700b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8e001618192bbcbe34b8f539ab7d8fa87090700b/comments", "author": {"login": "jruderman", "id": 692547, "node_id": "MDQ6VXNlcjY5MjU0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/692547?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jruderman", "html_url": "https://github.com/jruderman", "followers_url": "https://api.github.com/users/jruderman/followers", "following_url": "https://api.github.com/users/jruderman/following{/other_user}", "gists_url": "https://api.github.com/users/jruderman/gists{/gist_id}", "starred_url": "https://api.github.com/users/jruderman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jruderman/subscriptions", "organizations_url": "https://api.github.com/users/jruderman/orgs", "repos_url": "https://api.github.com/users/jruderman/repos", "events_url": "https://api.github.com/users/jruderman/events{/privacy}", "received_events_url": "https://api.github.com/users/jruderman/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jruderman", "id": 692547, "node_id": "MDQ6VXNlcjY5MjU0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/692547?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jruderman", "html_url": "https://github.com/jruderman", "followers_url": "https://api.github.com/users/jruderman/followers", "following_url": "https://api.github.com/users/jruderman/following{/other_user}", "gists_url": "https://api.github.com/users/jruderman/gists{/gist_id}", "starred_url": "https://api.github.com/users/jruderman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jruderman/subscriptions", "organizations_url": "https://api.github.com/users/jruderman/orgs", "repos_url": "https://api.github.com/users/jruderman/repos", "events_url": "https://api.github.com/users/jruderman/events{/privacy}", "received_events_url": "https://api.github.com/users/jruderman/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ce432d4cf913fcfc522c2a9233f8855b1cf77545", "url": "https://api.github.com/repos/rust-lang/rust/commits/ce432d4cf913fcfc522c2a9233f8855b1cf77545", "html_url": "https://github.com/rust-lang/rust/commit/ce432d4cf913fcfc522c2a9233f8855b1cf77545"}], "stats": {"total": 8, "additions": 6, "deletions": 2}, "files": [{"sha": "b1b2d8d9129219d6f4941b57deac07886bc93bef", "filename": "src/comp/syntax/print/pprust.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/8e001618192bbcbe34b8f539ab7d8fa87090700b/src%2Fcomp%2Fsyntax%2Fprint%2Fpprust.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8e001618192bbcbe34b8f539ab7d8fa87090700b/src%2Fcomp%2Fsyntax%2Fprint%2Fpprust.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fsyntax%2Fprint%2Fpprust.rs?ref=8e001618192bbcbe34b8f539ab7d8fa87090700b", "patch": "@@ -612,8 +612,9 @@ fn print_possibly_embedded_block(s: &ps, blk: &ast::blk, embedded: embed_type,\n     tag expr_or_stmt { stmt_(@ast::stmt); expr_(@ast::expr); }\n \n     // The Rust syntax has an ambiguity when an if, alt, or block statement is\n-    // followed by a unary op or paren. In those cases we have to add an\n-    // extra semi to make sure the output retains the same meaning.\n+    // followed by a unary op, square bracket, or paren. In those cases we\n+    // have to add an extra semi to make sure the output retains the same\n+    // meaning.\n     fn maybe_protect_block(s: &ps, last: &option::t<@ast::stmt>,\n                            next: &expr_or_stmt) {\n         let last_expr_is_block =\n@@ -684,6 +685,7 @@ fn print_possibly_embedded_block(s: &ps, blk: &ast::blk, embedded: embed_type,\n                 alt ex.node {\n                   ast::expr_unary(_, _) { true }\n                   ast::expr_tup(_) { true }\n+                  ast::expr_vec(_, _) { true }\n                   _ { false }\n                 }\n             }"}, {"sha": "f5af4b5df57198c65067dccc8530d54bf1d19351", "filename": "src/test/pretty/block-disambig.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8e001618192bbcbe34b8f539ab7d8fa87090700b/src%2Ftest%2Fpretty%2Fblock-disambig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8e001618192bbcbe34b8f539ab7d8fa87090700b/src%2Ftest%2Fpretty%2Fblock-disambig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fpretty%2Fblock-disambig.rs?ref=8e001618192bbcbe34b8f539ab7d8fa87090700b", "patch": "@@ -31,3 +31,5 @@ fn test10() -> int {\n     alt true { true { } };\n     (*regs)[0]\n }\n+\n+fn test11() -> [int] { if true { }; [1, 2] }"}]}