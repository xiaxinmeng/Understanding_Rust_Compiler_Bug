{"sha": "25460ebef6ae94494fc89a736a2f51bef2ea55c3", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI1NDYwZWJlZjZhZTk0NDk0ZmM4OWE3MzZhMmY1MWJlZjJlYTU1YzM=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2020-01-12T15:05:18Z"}, "committer": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2020-01-20T10:18:05Z"}, "message": "transparent_enums: test alignment", "tree": {"sha": "7677f29a90f8372c2a0125e4fb3a3cb9f8bf3fce", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7677f29a90f8372c2a0125e4fb3a3cb9f8bf3fce"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/25460ebef6ae94494fc89a736a2f51bef2ea55c3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/25460ebef6ae94494fc89a736a2f51bef2ea55c3", "html_url": "https://github.com/rust-lang/rust/commit/25460ebef6ae94494fc89a736a2f51bef2ea55c3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/25460ebef6ae94494fc89a736a2f51bef2ea55c3/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "93efe41b4ef9e0cccedbf962381002d48b3f780c", "url": "https://api.github.com/repos/rust-lang/rust/commits/93efe41b4ef9e0cccedbf962381002d48b3f780c", "html_url": "https://github.com/rust-lang/rust/commit/93efe41b4ef9e0cccedbf962381002d48b3f780c"}], "stats": {"total": 28, "additions": 25, "deletions": 3}, "files": [{"sha": "8fbdb4cc80b5e14bebc5fb9ac61b1841ddb11689", "filename": "src/test/ui/repr/repr-transparent.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/25460ebef6ae94494fc89a736a2f51bef2ea55c3/src%2Ftest%2Fui%2Frepr%2Frepr-transparent.rs", "raw_url": "https://github.com/rust-lang/rust/raw/25460ebef6ae94494fc89a736a2f51bef2ea55c3/src%2Ftest%2Fui%2Frepr%2Frepr-transparent.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frepr%2Frepr-transparent.rs?ref=25460ebef6ae94494fc89a736a2f51bef2ea55c3", "patch": "@@ -60,6 +60,16 @@ enum TooManyVariants { //~ ERROR transparent enum needs exactly one variant, but\n     Bar,\n }\n \n+#[repr(transparent)]\n+enum NontrivialAlignZstEnum {\n+    Foo(u32, [u16; 0]), //~ ERROR alignment larger than 1\n+}\n+\n+#[repr(transparent)]\n+enum GenericAlignEnum<T> {\n+    Foo { bar: ZstAlign32<T>, baz: u32 } //~ ERROR alignment larger than 1\n+}\n+\n #[repr(transparent)]\n union UnitUnion { //~ ERROR transparent union needs exactly one non-zero-sized field, but has 0\n     u: (),"}, {"sha": "cbc74fbb6a2cf48b638f60fe14afbcdd8ddfceeb", "filename": "src/test/ui/repr/repr-transparent.stderr", "status": "modified", "additions": 15, "deletions": 3, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/25460ebef6ae94494fc89a736a2f51bef2ea55c3/src%2Ftest%2Fui%2Frepr%2Frepr-transparent.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/25460ebef6ae94494fc89a736a2f51bef2ea55c3/src%2Ftest%2Fui%2Frepr%2Frepr-transparent.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frepr%2Frepr-transparent.stderr?ref=25460ebef6ae94494fc89a736a2f51bef2ea55c3", "patch": "@@ -94,14 +94,26 @@ LL |     Foo(String),\n LL |     Bar,\n    |     --- too many variants in `TooManyVariants`\n \n+error[E0691]: zero-sized field in transparent enum has alignment larger than 1\n+  --> $DIR/repr-transparent.rs:65:14\n+   |\n+LL |     Foo(u32, [u16; 0]),\n+   |              ^^^^^^^^ has alignment larger than 1\n+\n+error[E0691]: zero-sized field in transparent enum has alignment larger than 1\n+  --> $DIR/repr-transparent.rs:70:11\n+   |\n+LL |     Foo { bar: ZstAlign32<T>, baz: u32 }\n+   |           ^^^^^^^^^^^^^^^^^^ has alignment larger than 1\n+\n error[E0690]: transparent union needs exactly one non-zero-sized field, but has 0\n-  --> $DIR/repr-transparent.rs:64:1\n+  --> $DIR/repr-transparent.rs:74:1\n    |\n LL | union UnitUnion {\n    | ^^^^^^^^^^^^^^^ needs exactly one non-zero-sized field, but has 0\n \n error[E0690]: transparent union needs exactly one non-zero-sized field, but has 2\n-  --> $DIR/repr-transparent.rs:69:1\n+  --> $DIR/repr-transparent.rs:79:1\n    |\n LL | union TooManyFields {\n    | ^^^^^^^^^^^^^^^^^^^ needs exactly one non-zero-sized field, but has 2\n@@ -110,7 +122,7 @@ LL |     u: u32,\n LL |     s: i32\n    |     ------ this field is non-zero-sized\n \n-error: aborting due to 15 previous errors\n+error: aborting due to 17 previous errors\n \n Some errors have detailed explanations: E0084, E0690, E0691, E0731.\n For more information about an error, try `rustc --explain E0084`."}]}