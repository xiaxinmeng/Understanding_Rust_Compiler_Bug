{"sha": "b8c829b64f6b95f89bff9b953c4eeb2bf8e8695b", "node_id": "C_kwDOAAsO6NoAKGI4YzgyOWI2NGY2Yjk1Zjg5YmZmOWI5NTNjNGVlYjJiZjhlODY5NWI", "commit": {"author": {"name": "Michael Goulet", "email": "michael@errs.io", "date": "2022-05-06T02:34:27Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-05-06T02:34:27Z"}, "message": "Rollup merge of #96747 - JohnTitor:expect-local-track-caller, r=compiler-errors\n\nAdd `track_caller` to `DefId::expect_local()`\n\nSuggested in https://github.com/rust-lang/rust/issues/96738#issuecomment-1118961888.\n`DefId::expect_local()` often causes ICEs (panics) and should be a good candidate to add `track_caller`.", "tree": {"sha": "5fd47fc0450fa4c56ecc7e0c7c3ef43dcac3cce0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5fd47fc0450fa4c56ecc7e0c7c3ef43dcac3cce0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b8c829b64f6b95f89bff9b953c4eeb2bf8e8695b", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJidIk0CRBK7hj4Ov3rIwAAq04IAE0HQSKXz8N6vKXtUyXuVZPc\nx4466xifxtQ9JrSxS8cHaRtBlQAJL5UMJN0aXF7KhrqFMNF7bNKUynWq6KK84gGD\ney9UUBNv0vy3WLWdoYm2cPAS4bCt/1dxHuCiQhAE7lVdlpsOZ7/E0naEFx2F9KMX\nSpoWktUmhx05PE087URXkw+zd2qmYzIi99I4hNiaC4E70hmaKXyEiofaD3xLNcdX\nCE4CFo5IkOxlBXE24SljlPURPEiIIQ4S6EjO/TOZoPFDhoIjxRSowU1jvsJrcYbC\nsSTJINmmHjYCaz+jUHkugWKO0iq4M35WK1oIy3G59v/A8MVnbx7fRtRPRYTmQyw=\n=HLiU\n-----END PGP SIGNATURE-----\n", "payload": "tree 5fd47fc0450fa4c56ecc7e0c7c3ef43dcac3cce0\nparent 8bcf4b0efc3a11cc4745e128f237392387300e93\nparent 2ed38cdbdd3670790aaf3d48ab2bbdf10dad290b\nauthor Michael Goulet <michael@errs.io> 1651804467 -0700\ncommitter GitHub <noreply@github.com> 1651804467 -0700\n\nRollup merge of #96747 - JohnTitor:expect-local-track-caller, r=compiler-errors\n\nAdd `track_caller` to `DefId::expect_local()`\n\nSuggested in https://github.com/rust-lang/rust/issues/96738#issuecomment-1118961888.\n`DefId::expect_local()` often causes ICEs (panics) and should be a good candidate to add `track_caller`.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b8c829b64f6b95f89bff9b953c4eeb2bf8e8695b", "html_url": "https://github.com/rust-lang/rust/commit/b8c829b64f6b95f89bff9b953c4eeb2bf8e8695b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b8c829b64f6b95f89bff9b953c4eeb2bf8e8695b/comments", "author": {"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8bcf4b0efc3a11cc4745e128f237392387300e93", "url": "https://api.github.com/repos/rust-lang/rust/commits/8bcf4b0efc3a11cc4745e128f237392387300e93", "html_url": "https://github.com/rust-lang/rust/commit/8bcf4b0efc3a11cc4745e128f237392387300e93"}, {"sha": "2ed38cdbdd3670790aaf3d48ab2bbdf10dad290b", "url": "https://api.github.com/repos/rust-lang/rust/commits/2ed38cdbdd3670790aaf3d48ab2bbdf10dad290b", "html_url": "https://github.com/rust-lang/rust/commit/2ed38cdbdd3670790aaf3d48ab2bbdf10dad290b"}], "stats": {"total": 1, "additions": 1, "deletions": 0}, "files": [{"sha": "6b529d5e0837b03d686fd70b8795ad93c641bc75", "filename": "compiler/rustc_span/src/def_id.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/b8c829b64f6b95f89bff9b953c4eeb2bf8e8695b/compiler%2Frustc_span%2Fsrc%2Fdef_id.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b8c829b64f6b95f89bff9b953c4eeb2bf8e8695b/compiler%2Frustc_span%2Fsrc%2Fdef_id.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_span%2Fsrc%2Fdef_id.rs?ref=b8c829b64f6b95f89bff9b953c4eeb2bf8e8695b", "patch": "@@ -279,6 +279,7 @@ impl DefId {\n     }\n \n     #[inline]\n+    #[track_caller]\n     pub fn expect_local(self) -> LocalDefId {\n         self.as_local().unwrap_or_else(|| panic!(\"DefId::expect_local: `{:?}` isn't local\", self))\n     }"}]}