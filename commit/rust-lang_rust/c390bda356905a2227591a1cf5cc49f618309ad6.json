{"sha": "c390bda356905a2227591a1cf5cc49f618309ad6", "node_id": "C_kwDOAAsO6NoAKGMzOTBiZGEzNTY5MDVhMjIyNzU5MWExY2Y1Y2M0OWY2MTgzMDlhZDY", "commit": {"author": {"name": "Santiago Pastorino", "email": "spastorino@gmail.com", "date": "2022-08-02T18:06:12Z"}, "committer": {"name": "Santiago Pastorino", "email": "spastorino@gmail.com", "date": "2022-08-04T14:26:55Z"}, "message": "Record RPITs elided lifetimes in Rptr Tys", "tree": {"sha": "a06606d9049e97894cbd7c4216d98ee52cfbffc9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a06606d9049e97894cbd7c4216d98ee52cfbffc9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c390bda356905a2227591a1cf5cc49f618309ad6", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEF0ntrgrd9qf9uuThgTGiTgx5768FAmLr1y8ACgkQgTGiTgx5\n769/fBAAnDzy2fPx6fFS3oAEEcOFMOZhuecy0dO1B9gt6OViyOIsDj2LbohHxz3r\n/hevkvFDNJSdO2Lha5vsSDu38ZHswh2aoRpjydGYbNIL2usQq4sn6skEDSk07Vw7\nxPkgxYJXNFqOHo/lXkJP1YfP1AHpx6tiCLNWIDJ+Pj4ZugWF1veMvH+gMbkcmfyb\nZRShu4mpXQvdr7knP0oOdO/R6CJbjHW6f5KsscLi3Riif8ExYH7qEQRbht7pNE8O\ngEKq9OV8enwHVOMkD2y864fINWcng2DmZhcsC02zdHvB12u4H8PqQ0sApKijk/pV\nKcopFMqEzZvwEU95GEm9P5PlLSYiCB9se7/4OpyJFg92nZhYrNm3xGrg6zymLP1G\nq5/Y0cy85/gcK/RSsHbC5c7uAXhgbTszNtUgiimP/DkHT8VxIwD07HaVCNI8ppI/\nhhHDBeGd4a+7BcBEpDhAXqm2R3/ldS32AjWUyDxIY9a5vnIEYLGcud3ceYASDAUk\nv9tvHKyU3I27ooW7H0a0dwVq1Upm5IEuVC6dRWU2+t2icFgxoeKMDYDSKfdakqrN\nfiEceIkaj0xL5LdCoM70B+ZNxYvn6cTsSzeCnlvZY6GSayTJeca0YcXFGJ24Opfw\nmJucPSSn7hLv6QRKmpo9/+gSeVFRYCaX2PKHiNFWLqgs9UPA90E=\n=hxsu\n-----END PGP SIGNATURE-----", "payload": "tree a06606d9049e97894cbd7c4216d98ee52cfbffc9\nparent 1802d45b1238409d2c29cf7e8f25a96b94874fe2\nauthor Santiago Pastorino <spastorino@gmail.com> 1659463572 -0300\ncommitter Santiago Pastorino <spastorino@gmail.com> 1659623215 -0300\n\nRecord RPITs elided lifetimes in Rptr Tys\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c390bda356905a2227591a1cf5cc49f618309ad6", "html_url": "https://github.com/rust-lang/rust/commit/c390bda356905a2227591a1cf5cc49f618309ad6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c390bda356905a2227591a1cf5cc49f618309ad6/comments", "author": {"login": "spastorino", "id": 52642, "node_id": "MDQ6VXNlcjUyNjQy", "avatar_url": "https://avatars.githubusercontent.com/u/52642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spastorino", "html_url": "https://github.com/spastorino", "followers_url": "https://api.github.com/users/spastorino/followers", "following_url": "https://api.github.com/users/spastorino/following{/other_user}", "gists_url": "https://api.github.com/users/spastorino/gists{/gist_id}", "starred_url": "https://api.github.com/users/spastorino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spastorino/subscriptions", "organizations_url": "https://api.github.com/users/spastorino/orgs", "repos_url": "https://api.github.com/users/spastorino/repos", "events_url": "https://api.github.com/users/spastorino/events{/privacy}", "received_events_url": "https://api.github.com/users/spastorino/received_events", "type": "User", "site_admin": false}, "committer": {"login": "spastorino", "id": 52642, "node_id": "MDQ6VXNlcjUyNjQy", "avatar_url": "https://avatars.githubusercontent.com/u/52642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spastorino", "html_url": "https://github.com/spastorino", "followers_url": "https://api.github.com/users/spastorino/followers", "following_url": "https://api.github.com/users/spastorino/following{/other_user}", "gists_url": "https://api.github.com/users/spastorino/gists{/gist_id}", "starred_url": "https://api.github.com/users/spastorino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spastorino/subscriptions", "organizations_url": "https://api.github.com/users/spastorino/orgs", "repos_url": "https://api.github.com/users/spastorino/repos", "events_url": "https://api.github.com/users/spastorino/events{/privacy}", "received_events_url": "https://api.github.com/users/spastorino/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1802d45b1238409d2c29cf7e8f25a96b94874fe2", "url": "https://api.github.com/repos/rust-lang/rust/commits/1802d45b1238409d2c29cf7e8f25a96b94874fe2", "html_url": "https://github.com/rust-lang/rust/commit/1802d45b1238409d2c29cf7e8f25a96b94874fe2"}], "stats": {"total": 12, "additions": 12, "deletions": 0}, "files": [{"sha": "4a7106f8da0ade4d8bb55efc625dadeb3d790e1c", "filename": "compiler/rustc_ast_lowering/src/lifetime_collector.rs", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/c390bda356905a2227591a1cf5cc49f618309ad6/compiler%2Frustc_ast_lowering%2Fsrc%2Flifetime_collector.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c390bda356905a2227591a1cf5cc49f618309ad6/compiler%2Frustc_ast_lowering%2Fsrc%2Flifetime_collector.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast_lowering%2Fsrc%2Flifetime_collector.rs?ref=c390bda356905a2227591a1cf5cc49f618309ad6", "patch": "@@ -64,6 +64,18 @@ impl<'ast> Visitor<'ast> for LifetimeCollectVisitor<'ast> {\n                 visit::walk_ty(self, t);\n                 self.current_binders.pop();\n             }\n+            TyKind::Rptr(None, _) => {\n+                if let Some(LifetimeRes::ElidedAnchor { start, end }) =\n+                    self.resolver.get_lifetime_res(t.id)\n+                {\n+                    for i in start..end {\n+                        let lifetime =\n+                            Lifetime { id: i, ident: Ident::new(kw::UnderscoreLifetime, t.span) };\n+                        self.record_lifetime_use(lifetime);\n+                    }\n+                }\n+                visit::walk_ty(self, t);\n+            }\n             _ => {\n                 visit::walk_ty(self, t);\n             }"}]}