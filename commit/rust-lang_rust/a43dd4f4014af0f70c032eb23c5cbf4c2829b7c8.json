{"sha": "a43dd4f4014af0f70c032eb23c5cbf4c2829b7c8", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE0M2RkNGY0MDE0YWYwZjcwYzAzMmViMjNjNWNiZjRjMjgyOWI3Yzg=", "commit": {"author": {"name": "CDirkx", "email": "christiaan@dirkx.com", "date": "2020-09-01T19:05:26Z"}, "committer": {"name": "CDirkx", "email": "christiaan@dirkx.com", "date": "2020-09-01T19:05:26Z"}, "message": "Change implementation of `Ipv6Addr::is_unspecified` and `is_loopback` from `matches!` to `u128` comparison\n\nDone because `matches!` doesn't optimize well with array comparisons", "tree": {"sha": "1e20718b3926d9984d59be98a1aeb22fc3334037", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1e20718b3926d9984d59be98a1aeb22fc3334037"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a43dd4f4014af0f70c032eb23c5cbf4c2829b7c8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a43dd4f4014af0f70c032eb23c5cbf4c2829b7c8", "html_url": "https://github.com/rust-lang/rust/commit/a43dd4f4014af0f70c032eb23c5cbf4c2829b7c8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a43dd4f4014af0f70c032eb23c5cbf4c2829b7c8/comments", "author": null, "committer": null, "parents": [{"sha": "cd08deff3c9c0de3ecd78883a3df4c9089b715d1", "url": "https://api.github.com/repos/rust-lang/rust/commits/cd08deff3c9c0de3ecd78883a3df4c9089b715d1", "html_url": "https://github.com/rust-lang/rust/commit/cd08deff3c9c0de3ecd78883a3df4c9089b715d1"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "341a112df71b3c51775af40a39e8620b73e10f1a", "filename": "library/std/src/net/ip.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a43dd4f4014af0f70c032eb23c5cbf4c2829b7c8/library%2Fstd%2Fsrc%2Fnet%2Fip.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a43dd4f4014af0f70c032eb23c5cbf4c2829b7c8/library%2Fstd%2Fsrc%2Fnet%2Fip.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fnet%2Fip.rs?ref=a43dd4f4014af0f70c032eb23c5cbf4c2829b7c8", "patch": "@@ -1139,7 +1139,7 @@ impl Ipv6Addr {\n     #[rustc_const_unstable(feature = \"const_ipv6\", issue = \"76205\")]\n     #[stable(since = \"1.7.0\", feature = \"ip_17\")]\n     pub const fn is_unspecified(&self) -> bool {\n-        matches!(self.segments(), [0, 0, 0, 0, 0, 0, 0, 0])\n+        u128::from_be_bytes(self.octets()) == u128::from_be_bytes(Ipv6Addr::UNSPECIFIED.octets())\n     }\n \n     /// Returns [`true`] if this is a loopback address (::1).\n@@ -1160,7 +1160,7 @@ impl Ipv6Addr {\n     #[rustc_const_unstable(feature = \"const_ipv6\", issue = \"76205\")]\n     #[stable(since = \"1.7.0\", feature = \"ip_17\")]\n     pub const fn is_loopback(&self) -> bool {\n-        matches!(self.segments(), [0, 0, 0, 0, 0, 0, 0, 1])\n+        u128::from_be_bytes(self.octets()) == u128::from_be_bytes(Ipv6Addr::LOCALHOST.octets())\n     }\n \n     /// Returns [`true`] if the address appears to be globally routable."}]}