{"sha": "d88f979437299dfda0f5214ec14e809a10e10ff0", "node_id": "C_kwDOAAsO6NoAKGQ4OGY5Nzk0MzcyOTlkZmRhMGY1MjE0ZWMxNGU4MDlhMTBlMTBmZjA", "commit": {"author": {"name": "Deadbeef", "email": "ent3rm4n@gmail.com", "date": "2023-04-16T07:04:17Z"}, "committer": {"name": "Deadbeef", "email": "ent3rm4n@gmail.com", "date": "2023-04-16T07:04:17Z"}, "message": "hack signum as well", "tree": {"sha": "689c08282a8528dcbe4767be74a72e6fd7420e24", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/689c08282a8528dcbe4767be74a72e6fd7420e24"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d88f979437299dfda0f5214ec14e809a10e10ff0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d88f979437299dfda0f5214ec14e809a10e10ff0", "html_url": "https://github.com/rust-lang/rust/commit/d88f979437299dfda0f5214ec14e809a10e10ff0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d88f979437299dfda0f5214ec14e809a10e10ff0/comments", "author": {"login": "fee1-dead", "id": 43851243, "node_id": "MDQ6VXNlcjQzODUxMjQz", "avatar_url": "https://avatars.githubusercontent.com/u/43851243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fee1-dead", "html_url": "https://github.com/fee1-dead", "followers_url": "https://api.github.com/users/fee1-dead/followers", "following_url": "https://api.github.com/users/fee1-dead/following{/other_user}", "gists_url": "https://api.github.com/users/fee1-dead/gists{/gist_id}", "starred_url": "https://api.github.com/users/fee1-dead/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fee1-dead/subscriptions", "organizations_url": "https://api.github.com/users/fee1-dead/orgs", "repos_url": "https://api.github.com/users/fee1-dead/repos", "events_url": "https://api.github.com/users/fee1-dead/events{/privacy}", "received_events_url": "https://api.github.com/users/fee1-dead/received_events", "type": "User", "site_admin": false}, "committer": {"login": "fee1-dead", "id": 43851243, "node_id": "MDQ6VXNlcjQzODUxMjQz", "avatar_url": "https://avatars.githubusercontent.com/u/43851243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fee1-dead", "html_url": "https://github.com/fee1-dead", "followers_url": "https://api.github.com/users/fee1-dead/followers", "following_url": "https://api.github.com/users/fee1-dead/following{/other_user}", "gists_url": "https://api.github.com/users/fee1-dead/gists{/gist_id}", "starred_url": "https://api.github.com/users/fee1-dead/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fee1-dead/subscriptions", "organizations_url": "https://api.github.com/users/fee1-dead/orgs", "repos_url": "https://api.github.com/users/fee1-dead/repos", "events_url": "https://api.github.com/users/fee1-dead/events{/privacy}", "received_events_url": "https://api.github.com/users/fee1-dead/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8cda8df578d77ee989de9d4a44db6991d0b06cfd", "url": "https://api.github.com/repos/rust-lang/rust/commits/8cda8df578d77ee989de9d4a44db6991d0b06cfd", "html_url": "https://github.com/rust-lang/rust/commit/8cda8df578d77ee989de9d4a44db6991d0b06cfd"}], "stats": {"total": 7, "additions": 5, "deletions": 2}, "files": [{"sha": "d645e8dcbfd22966f7630da4bb00fdebf7ba86e5", "filename": "library/core/src/num/int_macros.rs", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/d88f979437299dfda0f5214ec14e809a10e10ff0/library%2Fcore%2Fsrc%2Fnum%2Fint_macros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d88f979437299dfda0f5214ec14e809a10e10ff0/library%2Fcore%2Fsrc%2Fnum%2Fint_macros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fnum%2Fint_macros.rs?ref=d88f979437299dfda0f5214ec14e809a10e10ff0", "patch": "@@ -2603,13 +2603,16 @@ macro_rules! int_impl {\n         #[must_use = \"this returns the result of the operation, \\\n                       without modifying the original\"]\n         #[inline(always)]\n-        #[rustc_allow_const_fn_unstable(const_cmp)]\n         pub const fn signum(self) -> Self {\n             // Picking the right way to phrase this is complicated\n             // (<https://graphics.stanford.edu/~seander/bithacks.html#CopyIntegerSign>)\n             // so delegate it to `Ord` which is already producing -1/0/+1\n             // exactly like we need and can be the place to deal with the complexity.\n-            self.cmp(&0) as _\n+\n+            // FIXME(const-hack): replace with cmp\n+            if self < 0 { -1 }\n+            else if self == 0 { 0 }\n+            else { 1 }\n         }\n \n         /// Returns `true` if `self` is positive and `false` if the number is zero or"}]}