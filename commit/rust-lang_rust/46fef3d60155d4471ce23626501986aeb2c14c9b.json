{"sha": "46fef3d60155d4471ce23626501986aeb2c14c9b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ2ZmVmM2Q2MDE1NWQ0NDcxY2UyMzYyNjUwMTk4NmFlYjJjMTRjOWI=", "commit": {"author": {"name": "Tim Chevalier", "email": "chevalier@alum.wellesley.edu", "date": "2012-10-23T18:16:31Z"}, "committer": {"name": "Tim Chevalier", "email": "chevalier@alum.wellesley.edu", "date": "2012-10-23T19:10:04Z"}, "message": "Don't generate move-by-init in AST builder", "tree": {"sha": "02a00c12ae5e721de5e0933513da9c72941d95d7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/02a00c12ae5e721de5e0933513da9c72941d95d7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/46fef3d60155d4471ce23626501986aeb2c14c9b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/46fef3d60155d4471ce23626501986aeb2c14c9b", "html_url": "https://github.com/rust-lang/rust/commit/46fef3d60155d4471ce23626501986aeb2c14c9b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/46fef3d60155d4471ce23626501986aeb2c14c9b/comments", "author": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "committer": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "11e92f37c13194ad5c1f82a980e7f7ee02345801", "url": "https://api.github.com/repos/rust-lang/rust/commits/11e92f37c13194ad5c1f82a980e7f7ee02345801", "html_url": "https://github.com/rust-lang/rust/commit/11e92f37c13194ad5c1f82a980e7f7ee02345801"}], "stats": {"total": 10, "additions": 8, "deletions": 2}, "files": [{"sha": "632b3b93af99a65cd11aa50fb37958a3bd4a4ba7", "filename": "src/libsyntax/ext/pipes/ast_builder.rs", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/46fef3d60155d4471ce23626501986aeb2c14c9b/src%2Flibsyntax%2Fext%2Fpipes%2Fast_builder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/46fef3d60155d4471ce23626501986aeb2c14c9b/src%2Flibsyntax%2Fext%2Fpipes%2Fast_builder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fpipes%2Fast_builder.rs?ref=46fef3d60155d4471ce23626501986aeb2c14c9b", "patch": "@@ -105,6 +105,13 @@ impl ext_ctxt: ext_ctxt_ast_builder {\n           span: self.empty_span()}\n     }\n \n+    fn move_expr(e: @ast::expr) -> @ast::expr {\n+        @{id: self.next_id(),\n+          callee_id: self.next_id(),\n+          node: ast::expr_unary_move(e),\n+          span: e.span}\n+    }\n+\n     fn stmt_expr(e: @ast::expr) -> @ast::stmt {\n         @{node: ast::stmt_expr(e, self.next_id()),\n           span: self.empty_span()}\n@@ -126,8 +133,7 @@ impl ext_ctxt: ext_ctxt_ast_builder {\n                                                       self.empty_span()),\n                                                  None),\n                             span: self.empty_span()},\n-                     init: Some({op: ast::init_move,\n-                                 expr: e}),\n+                     init: Some(self.move_expr(e)),\n                      id: self.next_id()},\n               span: self.empty_span()}]),\n                                span: self.empty_span()}, self.next_id()),"}]}