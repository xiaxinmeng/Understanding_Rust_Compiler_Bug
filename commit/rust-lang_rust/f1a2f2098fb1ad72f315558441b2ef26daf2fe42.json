{"sha": "f1a2f2098fb1ad72f315558441b2ef26daf2fe42", "node_id": "C_kwDOAAsO6NoAKGYxYTJmMjA5OGZiMWFkNzJmMzE1NTU4NDQxYjJlZjI2ZGFmMmZlNDI", "commit": {"author": {"name": "Oli Scherer", "email": "git-spam-no-reply9815368754983@oli-obk.de", "date": "2021-10-28T13:38:41Z"}, "committer": {"name": "Oli Scherer", "email": "git-spam-no-reply9815368754983@oli-obk.de", "date": "2021-10-28T13:38:41Z"}, "message": "Remove dead code.\n\nWe don't do member constraint checks in regionck anymore.\nAll member constraint checks are done in mir borrowck.", "tree": {"sha": "7c60b96cc6291003d492c8cca68b19a4b770acaf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7c60b96cc6291003d492c8cca68b19a4b770acaf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f1a2f2098fb1ad72f315558441b2ef26daf2fe42", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f1a2f2098fb1ad72f315558441b2ef26daf2fe42", "html_url": "https://github.com/rust-lang/rust/commit/f1a2f2098fb1ad72f315558441b2ef26daf2fe42", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f1a2f2098fb1ad72f315558441b2ef26daf2fe42/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f2707fec04f655cdf18388618881748ebbd683e9", "url": "https://api.github.com/repos/rust-lang/rust/commits/f2707fec04f655cdf18388618881748ebbd683e9", "html_url": "https://github.com/rust-lang/rust/commit/f2707fec04f655cdf18388618881748ebbd683e9"}], "stats": {"total": 15, "additions": 1, "deletions": 14}, "files": [{"sha": "197226197d3ab00ffc228628d9fa54e62fef7480", "filename": "compiler/rustc_trait_selection/src/opaque_types.rs", "status": "modified", "additions": 1, "deletions": 11, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/f1a2f2098fb1ad72f315558441b2ef26daf2fe42/compiler%2Frustc_trait_selection%2Fsrc%2Fopaque_types.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f1a2f2098fb1ad72f315558441b2ef26daf2fe42/compiler%2Frustc_trait_selection%2Fsrc%2Fopaque_types.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Fopaque_types.rs?ref=f1a2f2098fb1ad72f315558441b2ef26daf2fe42", "patch": "@@ -23,8 +23,6 @@ pub trait InferCtxtExt<'tcx> {\n         value_span: Span,\n     ) -> InferOk<'tcx, T>;\n \n-    fn constrain_opaque_types(&self);\n-\n     fn constrain_opaque_type(\n         &self,\n         opaque_type_key: OpaqueTypeKey<'tcx>,\n@@ -254,14 +252,6 @@ impl<'a, 'tcx> InferCtxtExt<'tcx> for InferCtxt<'a, 'tcx> {\n     /// - `opaque_types` -- the map produced by `instantiate_opaque_types`\n     /// - `free_region_relations` -- something that can be used to relate\n     ///   the free regions (`'a`) that appear in the impl trait.\n-    fn constrain_opaque_types(&self) {\n-        let opaque_types = self.inner.borrow().opaque_types.clone();\n-        for (opaque_type_key, opaque_defn) in opaque_types {\n-            self.constrain_opaque_type(opaque_type_key, &opaque_defn);\n-        }\n-    }\n-\n-    /// See `constrain_opaque_types` for documentation.\n     #[instrument(level = \"debug\", skip(self))]\n     fn constrain_opaque_type(\n         &self,\n@@ -363,7 +353,7 @@ impl<'a, 'tcx> InferCtxtExt<'tcx> for InferCtxt<'a, 'tcx> {\n     /// purpose of this function is to do that translation.\n     ///\n     /// (*) C1 and C2 were introduced in the comments on\n-    /// `constrain_opaque_types`. Read that comment for more context.\n+    /// `constrain_opaque_type`. Read that comment for more context.\n     ///\n     /// # Parameters\n     ///"}, {"sha": "230a576046a479c9dcf5d296bd7209789bd6d753", "filename": "compiler/rustc_typeck/src/check/regionck.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/f1a2f2098fb1ad72f315558441b2ef26daf2fe42/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fregionck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f1a2f2098fb1ad72f315558441b2ef26daf2fe42/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fregionck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fregionck.rs?ref=f1a2f2098fb1ad72f315558441b2ef26daf2fe42", "patch": "@@ -88,7 +88,6 @@ use rustc_middle::hir::place::{PlaceBase, PlaceWithHirId};\n use rustc_middle::ty::adjustment;\n use rustc_middle::ty::{self, Ty};\n use rustc_span::Span;\n-use rustc_trait_selection::opaque_types::InferCtxtExt as _;\n use std::ops::Deref;\n \n // a variation on try that just returns unit\n@@ -340,8 +339,6 @@ impl<'a, 'tcx> RegionCtxt<'a, 'tcx> {\n         self.link_fn_params(body.params);\n         self.visit_body(body);\n         self.visit_region_obligations(body_id.hir_id);\n-\n-        self.constrain_opaque_types();\n     }\n \n     fn visit_region_obligations(&mut self, hir_id: hir::HirId) {"}]}