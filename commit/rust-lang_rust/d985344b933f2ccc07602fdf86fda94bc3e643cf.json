{"sha": "d985344b933f2ccc07602fdf86fda94bc3e643cf", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ5ODUzNDRiOTMzZjJjY2MwNzYwMmZkZjg2ZmRhOTRiYzNlNjQzY2Y=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2018-04-06T14:44:21Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2018-04-06T20:01:14Z"}, "message": "proc_macro: Generalize `FromIterator` impl\n\nWhile never intended to be stable we forgot that trait impls are insta-stable!\nThis construction of `FromIterator` wasn't our first choice of how to stabilize\nthe impl but our hands are tied at this point, so revert back to the original\ndefinition of `FromIterator` before #49597\n\nCloses #49725", "tree": {"sha": "f98a1ec949da99e5497ea48a77733baf087583f9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f98a1ec949da99e5497ea48a77733baf087583f9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d985344b933f2ccc07602fdf86fda94bc3e643cf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d985344b933f2ccc07602fdf86fda94bc3e643cf", "html_url": "https://github.com/rust-lang/rust/commit/d985344b933f2ccc07602fdf86fda94bc3e643cf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d985344b933f2ccc07602fdf86fda94bc3e643cf/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a143462783cec88b7b733e8aa09990bfeb59f754", "url": "https://api.github.com/repos/rust-lang/rust/commits/a143462783cec88b7b733e8aa09990bfeb59f754", "html_url": "https://github.com/rust-lang/rust/commit/a143462783cec88b7b733e8aa09990bfeb59f754"}], "stats": {"total": 11, "additions": 9, "deletions": 2}, "files": [{"sha": "836dc772f0fea801b0665bbfafa00b14575bfe9d", "filename": "src/libproc_macro/lib.rs", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/d985344b933f2ccc07602fdf86fda94bc3e643cf/src%2Flibproc_macro%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d985344b933f2ccc07602fdf86fda94bc3e643cf/src%2Flibproc_macro%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibproc_macro%2Flib.rs?ref=d985344b933f2ccc07602fdf86fda94bc3e643cf", "patch": "@@ -141,9 +141,16 @@ impl From<TokenTree> for TokenStream {\n #[unstable(feature = \"proc_macro\", issue = \"38356\")]\n impl iter::FromIterator<TokenTree> for TokenStream {\n     fn from_iter<I: IntoIterator<Item = TokenTree>>(trees: I) -> Self {\n+        trees.into_iter().map(TokenStream::from).collect()\n+    }\n+}\n+\n+#[unstable(feature = \"proc_macro\", issue = \"38356\")]\n+impl iter::FromIterator<TokenStream> for TokenStream {\n+    fn from_iter<I: IntoIterator<Item = TokenStream>>(streams: I) -> Self {\n         let mut builder = tokenstream::TokenStreamBuilder::new();\n-        for tree in trees {\n-            builder.push(tree.to_internal());\n+        for stream in streams {\n+            builder.push(stream.0);\n         }\n         TokenStream(builder.build())\n     }"}]}