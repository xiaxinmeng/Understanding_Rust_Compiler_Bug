{"sha": "1f59c7ebb170b1ca98bc1d620afb02f7b3ae3fa7", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFmNTljN2ViYjE3MGIxY2E5OGJjMWQ2MjBhZmIwMmY3YjNhZTNmYTc=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2017-04-13T09:16:11Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2017-04-13T09:16:11Z"}, "message": "Auto merge of #41267 - alexcrichton:fix-analysis-dist, r=alexcrichton\n\ntravis: Enable rust-analysis package for more targets\n\nThis commit enables the `rust-analysis` package to be produced for all targets\nthat are part of the `dist-*` suite of docker images on Travis. Currently\nthese packages are showing up with `available = false` in the\n`channel-rust-nightly.toml` manifest where we'd prefer to have them show up for\nall targets.\n\nUnfortunately rustup isn't handling the `available = false` section well right\nnow, so this should also inadvertently fix the nightly regression.", "tree": {"sha": "802b97117eaf870b369db5d7de5256293b33ee34", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/802b97117eaf870b369db5d7de5256293b33ee34"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1f59c7ebb170b1ca98bc1d620afb02f7b3ae3fa7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1f59c7ebb170b1ca98bc1d620afb02f7b3ae3fa7", "html_url": "https://github.com/rust-lang/rust/commit/1f59c7ebb170b1ca98bc1d620afb02f7b3ae3fa7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1f59c7ebb170b1ca98bc1d620afb02f7b3ae3fa7/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6c03efd8f3a031c286a4afe936de10a31f6a1204", "url": "https://api.github.com/repos/rust-lang/rust/commits/6c03efd8f3a031c286a4afe936de10a31f6a1204", "html_url": "https://github.com/rust-lang/rust/commit/6c03efd8f3a031c286a4afe936de10a31f6a1204"}, {"sha": "cdedecb7baa55a7e9c1aa78d5d7313b94e3e84b1", "url": "https://api.github.com/repos/rust-lang/rust/commits/cdedecb7baa55a7e9c1aa78d5d7313b94e3e84b1", "html_url": "https://github.com/rust-lang/rust/commit/cdedecb7baa55a7e9c1aa78d5d7313b94e3e84b1"}], "stats": {"total": 11, "additions": 8, "deletions": 3}, "files": [{"sha": "bdc2a30663cbbfef55c13b892e9eb23fc56174e5", "filename": "src/bootstrap/step.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/1f59c7ebb170b1ca98bc1d620afb02f7b3ae3fa7/src%2Fbootstrap%2Fstep.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f59c7ebb170b1ca98bc1d620afb02f7b3ae3fa7/src%2Fbootstrap%2Fstep.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fstep.rs?ref=1f59c7ebb170b1ca98bc1d620afb02f7b3ae3fa7", "patch": "@@ -700,6 +700,7 @@ pub fn build_rules<'a>(build: &'a Build) -> Rules {\n          .dep(|s| s.name(\"default:doc\"))\n          .run(move |s| dist::docs(build, s.stage, s.target));\n     rules.dist(\"dist-analysis\", \"analysis\")\n+         .default(build.config.extended)\n          .dep(|s| s.name(\"dist-std\"))\n          .only_host_build(true)\n          .run(move |s| dist::analysis(build, &s.compiler(), s.target));"}, {"sha": "02d4eaf534acdd4d152bd963cef2655e91aaee65", "filename": "src/ci/docker/cross/Dockerfile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/1f59c7ebb170b1ca98bc1d620afb02f7b3ae3fa7/src%2Fci%2Fdocker%2Fcross%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/1f59c7ebb170b1ca98bc1d620afb02f7b3ae3fa7/src%2Fci%2Fdocker%2Fcross%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fcross%2FDockerfile?ref=1f59c7ebb170b1ca98bc1d620afb02f7b3ae3fa7", "patch": "@@ -74,6 +74,7 @@ ENV CC_mipsel_unknown_linux_musl=mipsel-openwrt-linux-gcc \\\n ENV STAGING_DIR=/tmp\n \n ENV RUST_CONFIGURE_ARGS \\\n+      --enable-extended \\\n       --target=$TARGETS \\\n       --musl-root-arm=/usr/local/arm-linux-musleabi \\\n       --musl-root-armhf=/usr/local/arm-linux-musleabihf \\"}, {"sha": "99c176aa820c733473a592781a91f0728dc5443d", "filename": "src/ci/docker/dist-android/Dockerfile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/1f59c7ebb170b1ca98bc1d620afb02f7b3ae3fa7/src%2Fci%2Fdocker%2Fdist-android%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/1f59c7ebb170b1ca98bc1d620afb02f7b3ae3fa7/src%2Fci%2Fdocker%2Fdist-android%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-android%2FDockerfile?ref=1f59c7ebb170b1ca98bc1d620afb02f7b3ae3fa7", "patch": "@@ -42,6 +42,7 @@ ENV TARGETS=$TARGETS,armv7-linux-androideabi\n \n ENV RUST_CONFIGURE_ARGS \\\n       --target=$TARGETS \\\n+      --enable-extended \\\n       --arm-linux-androideabi-ndk=/android/ndk-arm-9 \\\n       --armv7-linux-androideabi-ndk=/android/ndk-arm-9 \\\n       --i686-linux-android-ndk=/android/ndk-x86-9 \\"}, {"sha": "294460ed7604e93b1db7ca4afe365296c3e8278c", "filename": "src/ci/docker/dist-fuchsia/Dockerfile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1f59c7ebb170b1ca98bc1d620afb02f7b3ae3fa7/src%2Fci%2Fdocker%2Fdist-fuchsia%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/1f59c7ebb170b1ca98bc1d620afb02f7b3ae3fa7/src%2Fci%2Fdocker%2Fdist-fuchsia%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-fuchsia%2FDockerfile?ref=1f59c7ebb170b1ca98bc1d620afb02f7b3ae3fa7", "patch": "@@ -44,5 +44,5 @@ ENV \\\n ENV TARGETS=x86_64-unknown-fuchsia\n ENV TARGETS=$TARGETS,aarch64-unknown-fuchsia\n \n-ENV RUST_CONFIGURE_ARGS --target=$TARGETS\n+ENV RUST_CONFIGURE_ARGS --target=$TARGETS --enable-extended\n ENV SCRIPT python2.7 ../x.py dist --target $TARGETS"}, {"sha": "1ef3e569cb4bf15c85305e90adeb7b6bd74d9a13", "filename": "src/ci/docker/dist-i586-gnu-i686-musl/Dockerfile", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/1f59c7ebb170b1ca98bc1d620afb02f7b3ae3fa7/src%2Fci%2Fdocker%2Fdist-i586-gnu-i686-musl%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/1f59c7ebb170b1ca98bc1d620afb02f7b3ae3fa7/src%2Fci%2Fdocker%2Fdist-i586-gnu-i686-musl%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-i586-gnu-i686-musl%2FDockerfile?ref=1f59c7ebb170b1ca98bc1d620afb02f7b3ae3fa7", "patch": "@@ -31,7 +31,8 @@ RUN curl -o /usr/local/bin/sccache \\\n \n ENV RUST_CONFIGURE_ARGS \\\n       --target=i686-unknown-linux-musl,i586-unknown-linux-gnu \\\n-      --musl-root-i686=/musl-i686\n+      --musl-root-i686=/musl-i686 \\\n+      --enable-extended\n \n # Newer binutils broke things on some vms/distros (i.e., linking against\n # unknown relocs disabled by the following flag), so we need to go out of our"}, {"sha": "f462ccbb9119afcd1887e606a013dd9a014d11fd", "filename": "src/ci/docker/dist-x86_64-musl/Dockerfile", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/1f59c7ebb170b1ca98bc1d620afb02f7b3ae3fa7/src%2Fci%2Fdocker%2Fdist-x86_64-musl%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/1f59c7ebb170b1ca98bc1d620afb02f7b3ae3fa7/src%2Fci%2Fdocker%2Fdist-x86_64-musl%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-x86_64-musl%2FDockerfile?ref=1f59c7ebb170b1ca98bc1d620afb02f7b3ae3fa7", "patch": "@@ -31,7 +31,8 @@ RUN curl -o /usr/local/bin/sccache \\\n \n ENV RUST_CONFIGURE_ARGS \\\n       --target=x86_64-unknown-linux-musl \\\n-      --musl-root-x86_64=/musl-x86_64\n+      --musl-root-x86_64=/musl-x86_64 \\\n+      --enable-extended\n \n # Newer binutils broke things on some vms/distros (i.e., linking against\n # unknown relocs disabled by the following flag), so we need to go out of our"}]}