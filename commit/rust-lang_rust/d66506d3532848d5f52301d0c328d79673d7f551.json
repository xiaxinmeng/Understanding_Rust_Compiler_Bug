{"sha": "d66506d3532848d5f52301d0c328d79673d7f551", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ2NjUwNmQzNTMyODQ4ZDVmNTIzMDFkMGMzMjhkNzk2NzNkN2Y1NTE=", "commit": {"author": {"name": "Andy Wang", "email": "cbeuw.andy@gmail.com", "date": "2021-05-03T16:12:10Z"}, "committer": {"name": "Andy Wang", "email": "cbeuw.andy@gmail.com", "date": "2021-05-04T16:35:42Z"}, "message": "Normalise remapped sysroot path as $SRC_DIR", "tree": {"sha": "72d3f07096b3bb9777ca3eeaee05915cded62b29", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/72d3f07096b3bb9777ca3eeaee05915cded62b29"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d66506d3532848d5f52301d0c328d79673d7f551", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCAAdFiEE7dcbcBMl24/h63ldGBtJ+fOPM3QFAmCRd94ACgkQGBtJ+fOP\nM3QdMgv8Cy30DJTpmjsyu5flc+hgnhD1x12za+dW2zbiga3O9Grg2JAcNB5T47vK\nPTTBX1N/wTS2m8dpp9sNSOQlCUR/UxsdHubfze6FGUoalZ5ZsxkdcB2yrOTbJpfU\n2tX6Hni4W2hk8DpHQ3Xzwt70QY67qyc0P9liMgpyciwBjenREfdGgoVEt2mk7arl\nYIEWyhuz4lF1Kp9p0KrI4wxk4fIXAeGUxOsqVLE/u+JLRoZgitC+dHF0isnrqAGk\nres53SU1hteO+snmRIGRc5vznVMNBY5I8G2JgwEg8SSkoGAogPtL0OGehF9TfaCW\nsdouTbiniwTOvYoEBfEqopKmT/Wqtwf5GzD4fS/W/fb83fcLuBM0ooQQu+zC9OwY\nOjJXyohM6A7BwfcPqZjpXbokfgSE3zOgnfAido+Na6D2c4CKHjd1CzQRP0Sk4bWq\n20zjNMt2uu+yuW2ww3pFOU7dUaZHgH9DuaOlM99RfdCPxGMmmvlTqbeye8oWk1MP\nPfcj2TQR\n=e2RZ\n-----END PGP SIGNATURE-----", "payload": "tree 72d3f07096b3bb9777ca3eeaee05915cded62b29\nparent 65520ec802f77ab191423f3a1507d6c0be7cfb9c\nauthor Andy Wang <cbeuw.andy@gmail.com> 1620058330 +0100\ncommitter Andy Wang <cbeuw.andy@gmail.com> 1620146142 +0100\n\nNormalise remapped sysroot path as $SRC_DIR\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d66506d3532848d5f52301d0c328d79673d7f551", "html_url": "https://github.com/rust-lang/rust/commit/d66506d3532848d5f52301d0c328d79673d7f551", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d66506d3532848d5f52301d0c328d79673d7f551/comments", "author": {"login": "cbeuw", "id": 7034308, "node_id": "MDQ6VXNlcjcwMzQzMDg=", "avatar_url": "https://avatars.githubusercontent.com/u/7034308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbeuw", "html_url": "https://github.com/cbeuw", "followers_url": "https://api.github.com/users/cbeuw/followers", "following_url": "https://api.github.com/users/cbeuw/following{/other_user}", "gists_url": "https://api.github.com/users/cbeuw/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbeuw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbeuw/subscriptions", "organizations_url": "https://api.github.com/users/cbeuw/orgs", "repos_url": "https://api.github.com/users/cbeuw/repos", "events_url": "https://api.github.com/users/cbeuw/events{/privacy}", "received_events_url": "https://api.github.com/users/cbeuw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cbeuw", "id": 7034308, "node_id": "MDQ6VXNlcjcwMzQzMDg=", "avatar_url": "https://avatars.githubusercontent.com/u/7034308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbeuw", "html_url": "https://github.com/cbeuw", "followers_url": "https://api.github.com/users/cbeuw/followers", "following_url": "https://api.github.com/users/cbeuw/following{/other_user}", "gists_url": "https://api.github.com/users/cbeuw/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbeuw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbeuw/subscriptions", "organizations_url": "https://api.github.com/users/cbeuw/orgs", "repos_url": "https://api.github.com/users/cbeuw/repos", "events_url": "https://api.github.com/users/cbeuw/events{/privacy}", "received_events_url": "https://api.github.com/users/cbeuw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "65520ec802f77ab191423f3a1507d6c0be7cfb9c", "url": "https://api.github.com/repos/rust-lang/rust/commits/65520ec802f77ab191423f3a1507d6c0be7cfb9c", "html_url": "https://github.com/rust-lang/rust/commit/65520ec802f77ab191423f3a1507d6c0be7cfb9c"}], "stats": {"total": 6, "additions": 6, "deletions": 0}, "files": [{"sha": "675d43de8395ef48791db564635fd67ed4195671", "filename": "src/tools/compiletest/src/runtest.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/d66506d3532848d5f52301d0c328d79673d7f551/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d66506d3532848d5f52301d0c328d79673d7f551/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs?ref=d66506d3532848d5f52301d0c328d79673d7f551", "patch": "@@ -3616,6 +3616,12 @@ impl<'test> TestCx<'test> {\n             .join(\"library\");\n         normalize_path(&src_dir, \"$SRC_DIR\");\n \n+        if let Some(virtual_rust_source_base_dir) =\n+            option_env!(\"CFG_VIRTUAL_RUST_SOURCE_BASE_DIR\").map(PathBuf::from)\n+        {\n+            normalize_path(&virtual_rust_source_base_dir.join(\"library\"), \"$SRC_DIR\");\n+        }\n+\n         // Paths into the build directory\n         let test_build_dir = &self.config.build_base;\n         let parent_build_dir = test_build_dir.parent().unwrap().parent().unwrap().parent().unwrap();"}]}