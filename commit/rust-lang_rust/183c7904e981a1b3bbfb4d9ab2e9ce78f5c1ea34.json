{"sha": "183c7904e981a1b3bbfb4d9ab2e9ce78f5c1ea34", "node_id": "C_kwDOAAsO6NoAKDE4M2M3OTA0ZTk4MWExYjNiYmZiNGQ5YWIyZTljZTc4ZjVjMWVhMzQ", "commit": {"author": {"name": "Michael Goulet", "email": "michael@errs.io", "date": "2023-04-27T18:33:39Z"}, "committer": {"name": "Michael Goulet", "email": "michael@errs.io", "date": "2023-04-27T18:33:39Z"}, "message": "Add invalid_macro_export_arguments to built-in macro list", "tree": {"sha": "a805306a2f3f98452df7bbd41822d7a5ff08b753", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a805306a2f3f98452df7bbd41822d7a5ff08b753"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/183c7904e981a1b3bbfb4d9ab2e9ce78f5c1ea34", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/183c7904e981a1b3bbfb4d9ab2e9ce78f5c1ea34", "html_url": "https://github.com/rust-lang/rust/commit/183c7904e981a1b3bbfb4d9ab2e9ce78f5c1ea34", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/183c7904e981a1b3bbfb4d9ab2e9ce78f5c1ea34/comments", "author": {"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "901fdb3b04375e3456b5cf771f86ecca8d6c1917", "url": "https://api.github.com/repos/rust-lang/rust/commits/901fdb3b04375e3456b5cf771f86ecca8d6c1917", "html_url": "https://github.com/rust-lang/rust/commit/901fdb3b04375e3456b5cf771f86ecca8d6c1917"}], "stats": {"total": 50, "additions": 31, "deletions": 19}, "files": [{"sha": "90604f650d311c56cdff400d27d88b71c52bec35", "filename": "compiler/rustc_lint_defs/src/builtin.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/183c7904e981a1b3bbfb4d9ab2e9ce78f5c1ea34/compiler%2Frustc_lint_defs%2Fsrc%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/183c7904e981a1b3bbfb4d9ab2e9ce78f5c1ea34/compiler%2Frustc_lint_defs%2Fsrc%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_lint_defs%2Fsrc%2Fbuiltin.rs?ref=183c7904e981a1b3bbfb4d9ab2e9ce78f5c1ea34", "patch": "@@ -3377,6 +3377,7 @@ declare_lint_pass! {\n         IMPLIED_BOUNDS_ENTAILMENT,\n         BYTE_SLICE_IN_PACKED_STRUCT_WITH_DERIVE,\n         AMBIGUOUS_GLOB_REEXPORTS,\n+        INVALID_MACRO_EXPORT_ARGUMENTS,\n     ]\n }\n "}, {"sha": "644acc27b58e2185f6da7a3479ebf0ea402c82b7", "filename": "tests/ui/attributes/invalid_macro_export_argument.deny.stderr", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/183c7904e981a1b3bbfb4d9ab2e9ce78f5c1ea34/tests%2Fui%2Fattributes%2Finvalid_macro_export_argument.deny.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/183c7904e981a1b3bbfb4d9ab2e9ce78f5c1ea34/tests%2Fui%2Fattributes%2Finvalid_macro_export_argument.deny.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fattributes%2Finvalid_macro_export_argument.deny.stderr?ref=183c7904e981a1b3bbfb4d9ab2e9ce78f5c1ea34", "patch": "@@ -0,0 +1,20 @@\n+error: `#[macro_export]` can only take 1 or 0 arguments\n+  --> $DIR/invalid_macro_export_argument.rs:7:1\n+   |\n+LL | #[macro_export(hello, world)]\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   |\n+note: the lint level is defined here\n+  --> $DIR/invalid_macro_export_argument.rs:4:24\n+   |\n+LL | #![cfg_attr(deny, deny(invalid_macro_export_arguments))]\n+   |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+error: `not_local_inner_macros` isn't a valid `#[macro_export]` argument\n+  --> $DIR/invalid_macro_export_argument.rs:13:16\n+   |\n+LL | #[macro_export(not_local_inner_macros)]\n+   |                ^^^^^^^^^^^^^^^^^^^^^^\n+\n+error: aborting due to 2 previous errors\n+"}, {"sha": "a0ed5fd1c8fa213eda08e751276c2d3dd318ae58", "filename": "tests/ui/attributes/invalid_macro_export_argument.rs", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/183c7904e981a1b3bbfb4d9ab2e9ce78f5c1ea34/tests%2Fui%2Fattributes%2Finvalid_macro_export_argument.rs", "raw_url": "https://github.com/rust-lang/rust/raw/183c7904e981a1b3bbfb4d9ab2e9ce78f5c1ea34/tests%2Fui%2Fattributes%2Finvalid_macro_export_argument.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fattributes%2Finvalid_macro_export_argument.rs?ref=183c7904e981a1b3bbfb4d9ab2e9ce78f5c1ea34", "patch": "@@ -1,10 +1,17 @@\n-// check-pass\n-#[macro_export(hello, world)] //~ WARN `#[macro_export]` can only take 1 or 0 arguments\n+// revisions: deny allow\n+//[allow] check-pass\n+\n+#![cfg_attr(deny, deny(invalid_macro_export_arguments))]\n+#![cfg_attr(allow, allow(invalid_macro_export_arguments))]\n+\n+#[macro_export(hello, world)]\n+//[deny]~^ ERROR `#[macro_export]` can only take 1 or 0 arguments\n macro_rules! a {\n     () => ()\n }\n \n-#[macro_export(not_local_inner_macros)] //~ WARN `not_local_inner_macros` isn't a valid `#[macro_export]` argument\n+#[macro_export(not_local_inner_macros)]\n+//[deny]~^ ERROR `not_local_inner_macros` isn't a valid `#[macro_export]` argument\n macro_rules! b {\n     () => ()\n }"}, {"sha": "a4e17642c2aac289523128602b3f209935585a81", "filename": "tests/ui/attributes/invalid_macro_export_argument.stderr", "status": "removed", "additions": 0, "deletions": 16, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/901fdb3b04375e3456b5cf771f86ecca8d6c1917/tests%2Fui%2Fattributes%2Finvalid_macro_export_argument.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/901fdb3b04375e3456b5cf771f86ecca8d6c1917/tests%2Fui%2Fattributes%2Finvalid_macro_export_argument.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fattributes%2Finvalid_macro_export_argument.stderr?ref=901fdb3b04375e3456b5cf771f86ecca8d6c1917", "patch": "@@ -1,16 +0,0 @@\n-warning: `#[macro_export]` can only take 1 or 0 arguments\n-  --> $DIR/invalid_macro_export_argument.rs:2:1\n-   |\n-LL | #[macro_export(hello, world)]\n-   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: `#[warn(invalid_macro_export_arguments)]` on by default\n-\n-warning: `not_local_inner_macros` isn't a valid `#[macro_export]` argument\n-  --> $DIR/invalid_macro_export_argument.rs:7:16\n-   |\n-LL | #[macro_export(not_local_inner_macros)]\n-   |                ^^^^^^^^^^^^^^^^^^^^^^\n-\n-warning: 2 warnings emitted\n-"}]}