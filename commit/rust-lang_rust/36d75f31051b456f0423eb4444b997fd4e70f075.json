{"sha": "36d75f31051b456f0423eb4444b997fd4e70f075", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM2ZDc1ZjMxMDUxYjQ1NmYwNDIzZWI0NDQ0Yjk5N2ZkNGU3MGYwNzU=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-08-05T11:50:09Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-08-05T11:50:47Z"}, "message": "Document release process", "tree": {"sha": "2f56bdab407a34f1d38006e4d05e32ca55acbbcc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2f56bdab407a34f1d38006e4d05e32ca55acbbcc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/36d75f31051b456f0423eb4444b997fd4e70f075", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/36d75f31051b456f0423eb4444b997fd4e70f075", "html_url": "https://github.com/rust-lang/rust/commit/36d75f31051b456f0423eb4444b997fd4e70f075", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/36d75f31051b456f0423eb4444b997fd4e70f075/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2ad29eb23167273f2e101b44c1f21b4ec2821bc2", "url": "https://api.github.com/repos/rust-lang/rust/commits/2ad29eb23167273f2e101b44c1f21b4ec2821bc2", "html_url": "https://github.com/rust-lang/rust/commit/2ad29eb23167273f2e101b44c1f21b4ec2821bc2"}], "stats": {"total": 31, "additions": 31, "deletions": 0}, "files": [{"sha": "ffbbdadc50266009e7d190371b94887adac63d24", "filename": "docs/dev/README.md", "status": "modified", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/rust-lang/rust/blob/36d75f31051b456f0423eb4444b997fd4e70f075/docs%2Fdev%2FREADME.md", "raw_url": "https://github.com/rust-lang/rust/raw/36d75f31051b456f0423eb4444b997fd4e70f075/docs%2Fdev%2FREADME.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/docs%2Fdev%2FREADME.md?ref=36d75f31051b456f0423eb4444b997fd4e70f075", "patch": "@@ -235,3 +235,34 @@ For measuring time of incremental analysis, use either of these:\n $ cargo run --release -p rust-analyzer -- analysis-bench ../chalk/ --highlight ../chalk/chalk-engine/src/logic.rs\n $ cargo run --release -p rust-analyzer -- analysis-bench ../chalk/ --complete ../chalk/chalk-engine/src/logic.rs:94:0\n ```\n+\n+# Release Process\n+\n+Release process is handled by `release`, `dist` and `promote` xtasks, `release` being the main one.\n+\n+`release` assumes that you have checkouts of `rust-analyzer`, `rust-ananalyzer.github.io`, and `rust-lang/rust` in the same directory:\n+\n+```\n+./rust-analyzer\n+./rust-analyzer.github.io\n+./rust-rust-analyzer  # Note the name!\n+```\n+\n+Additionally, it assumes that remote for `rust-analyzer` is called `upstream` (I use `origin` to point to my fork).\n+\n+Release steps:\n+\n+1. Inside rust-analyzer, run `cargo xtask release`. This will:\n+   * checkout the `release` branch\n+   * reset it to `upstream/nightly`\n+   * push it to `upstream`. This triggers GitHub Actions which:\n+    ** runs `cargo xtask dist` to package binaries and VS Code extension\n+    ** makes a GitHub release\n+    ** pushes VS Code extension to the marketplace\n+   * create new changelog in `rust-analyzer.github.io`\n+   * create `rust-analyzer.github.io/git.log` file with the log of merge commits since last release\n+2. While the release is in progress, fill-in the changelog using `git.log`\n+3. Commit & push the changelog\n+4. Tweet\n+5. Inside `rust-analyzer`, run `cargo xtask promote` -- this will create a PR to rust-lang/rust updating rust-analyzer's submodule.\n+   Self-approve the PR."}]}