{"sha": "7842b80478ae92e2b7956f61bb14b76d17f57140", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc4NDJiODA0NzhhZTkyZTJiNzk1NmY2MWJiMTRiNzZkMTdmNTcxNDA=", "commit": {"author": {"name": "Camille GILLOT", "email": "gillot.camille@gmail.com", "date": "2021-09-10T17:57:06Z"}, "committer": {"name": "Camille GILLOT", "email": "gillot.camille@gmail.com", "date": "2021-09-11T15:52:39Z"}, "message": "Rebase fallout.", "tree": {"sha": "15e7feaa878e0e277c3af8ad008fc81f6dc34dc0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/15e7feaa878e0e277c3af8ad008fc81f6dc34dc0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7842b80478ae92e2b7956f61bb14b76d17f57140", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7842b80478ae92e2b7956f61bb14b76d17f57140", "html_url": "https://github.com/rust-lang/rust/commit/7842b80478ae92e2b7956f61bb14b76d17f57140", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7842b80478ae92e2b7956f61bb14b76d17f57140/comments", "author": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "11a999e63493c179bbefb3ce8dde4c698a4b690c", "url": "https://api.github.com/repos/rust-lang/rust/commits/11a999e63493c179bbefb3ce8dde4c698a4b690c", "html_url": "https://github.com/rust-lang/rust/commit/11a999e63493c179bbefb3ce8dde4c698a4b690c"}], "stats": {"total": 11, "additions": 6, "deletions": 5}, "files": [{"sha": "f5053a68ef59a125b06bde228b09c2803872f118", "filename": "compiler/rustc_ast_lowering/src/expr.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7842b80478ae92e2b7956f61bb14b76d17f57140/compiler%2Frustc_ast_lowering%2Fsrc%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7842b80478ae92e2b7956f61bb14b76d17f57140/compiler%2Frustc_ast_lowering%2Fsrc%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast_lowering%2Fsrc%2Fexpr.rs?ref=7842b80478ae92e2b7956f61bb14b76d17f57140", "patch": "@@ -423,6 +423,7 @@ impl<'hir> LoweringContext<'_, 'hir> {\n         let if_expr = self.expr(span, if_kind, ThinVec::new());\n         let block = self.block_expr(self.arena.alloc(if_expr));\n         let span = self.lower_span(span.with_hi(cond.span.hi()));\n+        let opt_label = self.lower_label(opt_label);\n         hir::ExprKind::Loop(block, opt_label, hir::LoopSource::While, span)\n     }\n "}, {"sha": "0c5e73b01077ab593e99d1f1040247691477c936", "filename": "src/test/incremental/hashes/if_expressions.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7842b80478ae92e2b7956f61bb14b76d17f57140/src%2Ftest%2Fincremental%2Fhashes%2Fif_expressions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7842b80478ae92e2b7956f61bb14b76d17f57140/src%2Ftest%2Fincremental%2Fhashes%2Fif_expressions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fincremental%2Fhashes%2Fif_expressions.rs?ref=7842b80478ae92e2b7956f61bb14b76d17f57140", "patch": "@@ -214,7 +214,7 @@ pub fn add_else_branch_if_let(x: Option<u32>) -> u32 {\n #[cfg(not(any(cfail1,cfail4)))]\n #[rustc_clean(cfg=\"cfail2\", except=\"hir_owner_nodes,typeck\")]\n #[rustc_clean(cfg=\"cfail3\")]\n-#[rustc_clean(cfg=\"cfail5\", except=\"hir_owner_nodes,typeck\")]\n+#[rustc_clean(cfg=\"cfail5\", except=\"hir_owner_nodes,typeck,optimized_mir\")]\n #[rustc_clean(cfg=\"cfail6\")]\n pub fn add_else_branch_if_let(x: Option<u32>) -> u32 {\n     let mut ret = 1;"}, {"sha": "b8796d3446be72826328aff7ee9a64c8e3ca87ed", "filename": "src/test/incremental/hashes/while_loops.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7842b80478ae92e2b7956f61bb14b76d17f57140/src%2Ftest%2Fincremental%2Fhashes%2Fwhile_loops.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7842b80478ae92e2b7956f61bb14b76d17f57140/src%2Ftest%2Fincremental%2Fhashes%2Fwhile_loops.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fincremental%2Fhashes%2Fwhile_loops.rs?ref=7842b80478ae92e2b7956f61bb14b76d17f57140", "patch": "@@ -214,7 +214,7 @@ pub fn change_continue_label() {\n #[cfg(not(any(cfail1,cfail4)))]\n #[rustc_clean(cfg=\"cfail2\", except=\"hir_owner_nodes,typeck\")]\n #[rustc_clean(cfg=\"cfail3\")]\n-#[rustc_clean(cfg=\"cfail5\", except=\"hir_owner_nodes,typeck\")]\n+#[rustc_clean(cfg=\"cfail5\", except=\"hir_owner_nodes,typeck,optimized_mir\")]\n #[rustc_clean(cfg=\"cfail6\")]\n pub fn change_continue_label() {\n     let mut _x = 0;"}, {"sha": "001676503242b50b3b7e01b69ebb75896646afac", "filename": "src/tools/clippy/clippy_lints/src/methods/manual_split_once.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7842b80478ae92e2b7956f61bb14b76d17f57140/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fmethods%2Fmanual_split_once.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7842b80478ae92e2b7956f61bb14b76d17f57140/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fmethods%2Fmanual_split_once.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fmethods%2Fmanual_split_once.rs?ref=7842b80478ae92e2b7956f61bb14b76d17f57140", "patch": "@@ -182,7 +182,7 @@ fn parse_iter_usage(\n                 },\n                 _,\n             ) => {\n-                let parent_span = e.span.parent().unwrap();\n+                let parent_span = e.span.parent_callsite().unwrap();\n                 if parent_span.ctxt() == ctxt {\n                     (Some(UnwrapKind::QuestionMark), parent_span)\n                 } else {"}, {"sha": "f351d0098b7509cf6abdddfef53c21a29cc7a663", "filename": "src/tools/clippy/clippy_lints/src/module_style.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7842b80478ae92e2b7956f61bb14b76d17f57140/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fmodule_style.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7842b80478ae92e2b7956f61bb14b76d17f57140/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fmodule_style.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fmodule_style.rs?ref=7842b80478ae92e2b7956f61bb14b76d17f57140", "patch": "@@ -120,7 +120,7 @@ impl EarlyLintPass for ModStyle {\n                     correct.push(\"mod.rs\");\n                     cx.struct_span_lint(\n                         SELF_NAMED_MODULE_FILES,\n-                        Span::new(file.start_pos, file.start_pos, SyntaxContext::root()),\n+                        Span::new(file.start_pos, file.start_pos, SyntaxContext::root(), None),\n                         |build| {\n                             let mut lint =\n                                 build.build(&format!(\"`mod.rs` files are required, found `{}`\", path.display()));\n@@ -167,7 +167,7 @@ fn check_self_named_mod_exists(cx: &EarlyContext<'_>, path: &Path, file: &Source\n \n         cx.struct_span_lint(\n             MOD_MODULE_FILES,\n-            Span::new(file.start_pos, file.start_pos, SyntaxContext::root()),\n+            Span::new(file.start_pos, file.start_pos, SyntaxContext::root(), None),\n             |build| {\n                 let mut lint = build.build(&format!(\"`mod.rs` files are not allowed, found `{}`\", path.display()));\n                 lint.help(&format!(\"move `{}` to `{}`\", path.display(), mod_file.display(),));"}]}