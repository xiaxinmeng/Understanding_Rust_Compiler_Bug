{"sha": "ab207743aff648455687708a4cd66cf4c7132983", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFiMjA3NzQzYWZmNjQ4NDU1Njg3NzA4YTRjZDY2Y2Y0YzcxMzI5ODM=", "commit": {"author": {"name": "Tyler Mandry", "email": "tmandry@gmail.com", "date": "2020-09-16T19:24:19Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-09-16T19:24:19Z"}, "message": "Rollup merge of #76758 - adamlesinski:clone_clock, r=tmandry\n\n[fuchsia] Propagate the userspace UTC clock\n\nOn Fuchsia, spawning a subprocess does not automatically\nclone all of the parent process' capabilities. UTC time on\nFuchsia is managed by a top-level userspace clock capability\nthat is cloned and passed to subprocesses.\n\nThis change ensures that any Rust subprocess gets access to the\nUTC clock, if the parent had access to it. This is critical for\ntests, which on Fuchsia, use panic=abort and spawn subprocesses\nper test.", "tree": {"sha": "fcf2682f5578e847b90d583686ef64107b93fe64", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fcf2682f5578e847b90d583686ef64107b93fe64"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ab207743aff648455687708a4cd66cf4c7132983", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfYmZjCRBK7hj4Ov3rIwAAdHIIABeC8xvOekibKOJcKhLGk4EE\n+S5QKQeZB9Y7Zce8EOYqOJ09G/wMytttaa9KagvkyNODINjEgkvWTPqnV1tAE5G+\nTg5b3US/dLWpRue+9U/Q0ql3Rk89sI6OipgvnmlIRovbC2TS+yyocTZesUknpRFN\nvE0hNjn8zZ5Dn0TkCmn7+IwRClNVM99MKRqM6+i79DsgPaQpSmq8co9V2zWDhwYg\nDk5ZlBwqZj95GNieS7ts5nI+UfZYjwzLGe04GYlRs9euBfCWVUt8VGk8DSC7kXAB\nB6DhYSJuc6Tt4RBokdHRlAlTgyoHdLe03YwlHs1W/mHX5NMWaU1N4vIQ/O0x/6k=\n=AlOc\n-----END PGP SIGNATURE-----\n", "payload": "tree fcf2682f5578e847b90d583686ef64107b93fe64\nparent a6c4d30c7b42957873d2ff19b5405edc071e8bb5\nparent fafb2e9de717c40b95e52889bb641b32c1dc6a1e\nauthor Tyler Mandry <tmandry@gmail.com> 1600284259 -0700\ncommitter GitHub <noreply@github.com> 1600284259 -0700\n\nRollup merge of #76758 - adamlesinski:clone_clock, r=tmandry\n\n[fuchsia] Propagate the userspace UTC clock\n\nOn Fuchsia, spawning a subprocess does not automatically\nclone all of the parent process' capabilities. UTC time on\nFuchsia is managed by a top-level userspace clock capability\nthat is cloned and passed to subprocesses.\n\nThis change ensures that any Rust subprocess gets access to the\nUTC clock, if the parent had access to it. This is critical for\ntests, which on Fuchsia, use panic=abort and spawn subprocesses\nper test.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ab207743aff648455687708a4cd66cf4c7132983", "html_url": "https://github.com/rust-lang/rust/commit/ab207743aff648455687708a4cd66cf4c7132983", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ab207743aff648455687708a4cd66cf4c7132983/comments", "author": {"login": "tmandry", "id": 2280544, "node_id": "MDQ6VXNlcjIyODA1NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2280544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmandry", "html_url": "https://github.com/tmandry", "followers_url": "https://api.github.com/users/tmandry/followers", "following_url": "https://api.github.com/users/tmandry/following{/other_user}", "gists_url": "https://api.github.com/users/tmandry/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmandry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmandry/subscriptions", "organizations_url": "https://api.github.com/users/tmandry/orgs", "repos_url": "https://api.github.com/users/tmandry/repos", "events_url": "https://api.github.com/users/tmandry/events{/privacy}", "received_events_url": "https://api.github.com/users/tmandry/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a6c4d30c7b42957873d2ff19b5405edc071e8bb5", "url": "https://api.github.com/repos/rust-lang/rust/commits/a6c4d30c7b42957873d2ff19b5405edc071e8bb5", "html_url": "https://github.com/rust-lang/rust/commit/a6c4d30c7b42957873d2ff19b5405edc071e8bb5"}, {"sha": "fafb2e9de717c40b95e52889bb641b32c1dc6a1e", "url": "https://api.github.com/repos/rust-lang/rust/commits/fafb2e9de717c40b95e52889bb641b32c1dc6a1e", "html_url": "https://github.com/rust-lang/rust/commit/fafb2e9de717c40b95e52889bb641b32c1dc6a1e"}], "stats": {"total": 4, "additions": 3, "deletions": 1}, "files": [{"sha": "fab27cd9f70855f04904cf16f463c3681bce14b5", "filename": "library/std/src/sys/unix/process/process_fuchsia.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/ab207743aff648455687708a4cd66cf4c7132983/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fprocess%2Fprocess_fuchsia.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab207743aff648455687708a4cd66cf4c7132983/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fprocess%2Fprocess_fuchsia.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fprocess%2Fprocess_fuchsia.rs?ref=ab207743aff648455687708a4cd66cf4c7132983", "patch": "@@ -118,7 +118,8 @@ impl Command {\n             FDIO_SPAWN_CLONE_JOB\n                 | FDIO_SPAWN_CLONE_LDSVC\n                 | FDIO_SPAWN_CLONE_NAMESPACE\n-                | FDIO_SPAWN_CLONE_ENVIRON, // this is ignored when envp is non-null\n+                | FDIO_SPAWN_CLONE_ENVIRON // this is ignored when envp is non-null\n+                | FDIO_SPAWN_CLONE_UTC_CLOCK,\n             self.get_program().as_ptr(),\n             self.get_argv().as_ptr(),\n             envp,"}, {"sha": "69ec275c2b318372151200ba05590f4e4c8aabcb", "filename": "library/std/src/sys/unix/process/zircon.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ab207743aff648455687708a4cd66cf4c7132983/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fprocess%2Fzircon.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab207743aff648455687708a4cd66cf4c7132983/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fprocess%2Fzircon.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fprocess%2Fzircon.rs?ref=ab207743aff648455687708a4cd66cf4c7132983", "patch": "@@ -138,6 +138,7 @@ pub const FDIO_SPAWN_CLONE_LDSVC: u32 = 0x0002;\n pub const FDIO_SPAWN_CLONE_NAMESPACE: u32 = 0x0004;\n pub const FDIO_SPAWN_CLONE_STDIO: u32 = 0x0008;\n pub const FDIO_SPAWN_CLONE_ENVIRON: u32 = 0x0010;\n+pub const FDIO_SPAWN_CLONE_UTC_CLOCK: u32 = 0x0020;\n pub const FDIO_SPAWN_CLONE_ALL: u32 = 0xFFFF;\n \n // fdio_spawn_etc actions"}]}