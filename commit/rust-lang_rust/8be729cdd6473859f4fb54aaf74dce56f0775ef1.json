{"sha": "8be729cdd6473859f4fb54aaf74dce56f0775ef1", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhiZTcyOWNkZDY0NzM4NTlmNGZiNTRhYWY3NGRjZTU2ZjA3NzVlZjE=", "commit": {"author": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2021-09-13T02:51:09Z"}, "committer": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2021-09-13T02:51:09Z"}, "message": "chore: convert to a multi-part suggestion", "tree": {"sha": "5c185dbad105647b7ab5fa6540af343b597747bc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5c185dbad105647b7ab5fa6540af343b597747bc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8be729cdd6473859f4fb54aaf74dce56f0775ef1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8be729cdd6473859f4fb54aaf74dce56f0775ef1", "html_url": "https://github.com/rust-lang/rust/commit/8be729cdd6473859f4fb54aaf74dce56f0775ef1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8be729cdd6473859f4fb54aaf74dce56f0775ef1/comments", "author": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "committer": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d98892b67f9b1f04c8c3c90cd99cd24738fd30ba", "url": "https://api.github.com/repos/rust-lang/rust/commits/d98892b67f9b1f04c8c3c90cd99cd24738fd30ba", "html_url": "https://github.com/rust-lang/rust/commit/d98892b67f9b1f04c8c3c90cd99cd24738fd30ba"}], "stats": {"total": 21, "additions": 14, "deletions": 7}, "files": [{"sha": "f4e3c8e0d9f7fca10ed0f3706ec031f34b98fff5", "filename": "compiler/rustc_typeck/src/check/expr.rs", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/8be729cdd6473859f4fb54aaf74dce56f0775ef1/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8be729cdd6473859f4fb54aaf74dce56f0775ef1/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fexpr.rs?ref=8be729cdd6473859f4fb54aaf74dce56f0775ef1", "patch": "@@ -1853,10 +1853,14 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n         let expr_snippet =\n             self.tcx.sess.source_map().span_to_snippet(expr.span).unwrap_or(String::new());\n         if expr_is_call && expr_snippet.starts_with(\"(\") && expr_snippet.ends_with(\")\") {\n-            err.span_suggestion_short(\n-                expr.span,\n+            let after_open = expr.span.lo() + rustc_span::BytePos(1);\n+            let before_close = expr.span.hi() - rustc_span::BytePos(1);\n+            err.multipart_suggestion(\n                 \"remove wrapping parentheses to call the method\",\n-                expr_snippet[1..expr_snippet.len() - 1].to_owned(),\n+                vec![\n+                    (expr.span.with_hi(after_open), String::new()),\n+                    (expr.span.with_lo(before_close), String::new()),\n+                ],\n                 Applicability::MachineApplicable,\n             );\n         } else if !self.expr_in_place(expr.hir_id) {"}, {"sha": "dd717ed9416d3bf78f10b312ac47452c57f2a006", "filename": "src/test/ui/typeck/issue-88803-call-expr-method.stderr", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/8be729cdd6473859f4fb54aaf74dce56f0775ef1/src%2Ftest%2Fui%2Ftypeck%2Fissue-88803-call-expr-method.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8be729cdd6473859f4fb54aaf74dce56f0775ef1/src%2Ftest%2Fui%2Ftypeck%2Fissue-88803-call-expr-method.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftypeck%2Fissue-88803-call-expr-method.stderr?ref=8be729cdd6473859f4fb54aaf74dce56f0775ef1", "patch": "@@ -2,10 +2,13 @@ error[E0615]: attempted to take value of method `unwrap` on type `Option<{intege\n   --> $DIR/issue-88803-call-expr-method.rs:7:12\n    |\n LL |         (a.unwrap)()\n-   |         ---^^^^^^-\n-   |         |  |\n-   |         |  method, not a field\n-   |         help: remove wrapping parentheses to call the method\n+   |            ^^^^^^ method, not a field\n+   |\n+help: remove wrapping parentheses to call the method\n+   |\n+LL -         (a.unwrap)()\n+LL +         a.unwrap()\n+   | \n \n error: aborting due to previous error\n "}]}