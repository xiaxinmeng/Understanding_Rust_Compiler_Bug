{"sha": "0abf236445325d5aafe655067252235846bd1c3c", "node_id": "C_kwDOAAsO6NoAKDBhYmYyMzY0NDUzMjVkNWFhZmU2NTUwNjcyNTIyMzU4NDZiZDFjM2M", "commit": {"author": {"name": "Jake Heinz", "email": "jh@discordapp.com", "date": "2021-11-29T10:43:51Z"}, "committer": {"name": "Jake Heinz", "email": "jh@discordapp.com", "date": "2021-11-29T10:43:51Z"}, "message": "test the one thing this pr was trying to accomplish lol...", "tree": {"sha": "3e84be836be9dabb2b9ff2306f4ba31805ad91f9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3e84be836be9dabb2b9ff2306f4ba31805ad91f9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0abf236445325d5aafe655067252235846bd1c3c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0abf236445325d5aafe655067252235846bd1c3c", "html_url": "https://github.com/rust-lang/rust/commit/0abf236445325d5aafe655067252235846bd1c3c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0abf236445325d5aafe655067252235846bd1c3c/comments", "author": {"login": "jhgg", "id": 5489149, "node_id": "MDQ6VXNlcjU0ODkxNDk=", "avatar_url": "https://avatars.githubusercontent.com/u/5489149?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhgg", "html_url": "https://github.com/jhgg", "followers_url": "https://api.github.com/users/jhgg/followers", "following_url": "https://api.github.com/users/jhgg/following{/other_user}", "gists_url": "https://api.github.com/users/jhgg/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhgg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhgg/subscriptions", "organizations_url": "https://api.github.com/users/jhgg/orgs", "repos_url": "https://api.github.com/users/jhgg/repos", "events_url": "https://api.github.com/users/jhgg/events{/privacy}", "received_events_url": "https://api.github.com/users/jhgg/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jhgg", "id": 5489149, "node_id": "MDQ6VXNlcjU0ODkxNDk=", "avatar_url": "https://avatars.githubusercontent.com/u/5489149?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhgg", "html_url": "https://github.com/jhgg", "followers_url": "https://api.github.com/users/jhgg/followers", "following_url": "https://api.github.com/users/jhgg/following{/other_user}", "gists_url": "https://api.github.com/users/jhgg/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhgg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhgg/subscriptions", "organizations_url": "https://api.github.com/users/jhgg/orgs", "repos_url": "https://api.github.com/users/jhgg/repos", "events_url": "https://api.github.com/users/jhgg/events{/privacy}", "received_events_url": "https://api.github.com/users/jhgg/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f0bfe310a224447fdd143ef3844a3ba1408c7620", "url": "https://api.github.com/repos/rust-lang/rust/commits/f0bfe310a224447fdd143ef3844a3ba1408c7620", "html_url": "https://github.com/rust-lang/rust/commit/f0bfe310a224447fdd143ef3844a3ba1408c7620"}], "stats": {"total": 126, "additions": 68, "deletions": 58}, "files": [{"sha": "7744e1ef45fd83e2a395a26acac112458e5b46c9", "filename": "crates/ide_db/src/symbol_index.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/0abf236445325d5aafe655067252235846bd1c3c/crates%2Fide_db%2Fsrc%2Fsymbol_index.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0abf236445325d5aafe655067252235846bd1c3c/crates%2Fide_db%2Fsrc%2Fsymbol_index.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide_db%2Fsrc%2Fsymbol_index.rs?ref=0abf236445325d5aafe655067252235846bd1c3c", "patch": "@@ -729,6 +729,14 @@ macro_rules! macro_rules_macro {\n     () => {}\n };\n \n+macro_rules! define_struct {\n+    () => {\n+        struct StructFromMacro;\n+    }\n+};\n+\n+define_struct!();\n+\n macro Macro { }\n \n struct Struct;"}, {"sha": "4ec4f142dac8232a0a2b61a9297eb68a7387e9aa", "filename": "crates/ide_db/src/test_data/test_symbol_index_collection.txt", "status": "modified", "additions": 60, "deletions": 58, "changes": 118, "blob_url": "https://github.com/rust-lang/rust/blob/0abf236445325d5aafe655067252235846bd1c3c/crates%2Fide_db%2Fsrc%2Ftest_data%2Ftest_symbol_index_collection.txt", "raw_url": "https://github.com/rust-lang/rust/raw/0abf236445325d5aafe655067252235846bd1c3c/crates%2Fide_db%2Fsrc%2Ftest_data%2Ftest_symbol_index_collection.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide_db%2Fsrc%2Ftest_data%2Ftest_symbol_index_collection.txt?ref=0abf236445325d5aafe655067252235846bd1c3c", "patch": "@@ -8,6 +8,30 @@\n             local_id: Idx::<ModuleData>(0),\n         },\n         [\n+            FileSymbol {\n+                name: \"StructFromMacro\",\n+                loc: DeclarationLocation {\n+                    hir_file_id: HirFileId(\n+                        MacroFile(\n+                            MacroFile {\n+                                macro_call_id: MacroCallId(\n+                                    0,\n+                                ),\n+                            },\n+                        ),\n+                    ),\n+                    ptr: SyntaxNodePtr {\n+                        range: 0..22,\n+                        kind: STRUCT,\n+                    },\n+                    name_ptr: SyntaxNodePtr {\n+                        range: 6..21,\n+                        kind: NAME,\n+                    },\n+                },\n+                kind: Struct,\n+                container_name: None,\n+            },\n             FileSymbol {\n                 name: \"Struct\",\n                 loc: DeclarationLocation {\n@@ -19,11 +43,11 @@\n                         ),\n                     ),\n                     ptr: SyntaxNodePtr {\n-                        range: 68..82,\n+                        range: 170..184,\n                         kind: STRUCT,\n                     },\n                     name_ptr: SyntaxNodePtr {\n-                        range: 75..81,\n+                        range: 177..183,\n                         kind: NAME,\n                     },\n                 },\n@@ -41,11 +65,11 @@\n                         ),\n                     ),\n                     ptr: SyntaxNodePtr {\n-                        range: 83..105,\n+                        range: 185..207,\n                         kind: ENUM,\n                     },\n                     name_ptr: SyntaxNodePtr {\n-                        range: 88..92,\n+                        range: 190..194,\n                         kind: NAME,\n                     },\n                 },\n@@ -63,11 +87,11 @@\n                         ),\n                     ),\n                     ptr: SyntaxNodePtr {\n-                        range: 106..120,\n+                        range: 208..222,\n                         kind: UNION,\n                     },\n                     name_ptr: SyntaxNodePtr {\n-                        range: 112..117,\n+                        range: 214..219,\n                         kind: NAME,\n                     },\n                 },\n@@ -85,11 +109,11 @@\n                         ),\n                     ),\n                     ptr: SyntaxNodePtr {\n-                        range: 159..198,\n+                        range: 261..300,\n                         kind: TRAIT,\n                     },\n                     name_ptr: SyntaxNodePtr {\n-                        range: 165..170,\n+                        range: 267..272,\n                         kind: NAME,\n                     },\n                 },\n@@ -107,11 +131,11 @@\n                         ),\n                     ),\n                     ptr: SyntaxNodePtr {\n-                        range: 177..196,\n+                        range: 279..298,\n                         kind: FN,\n                     },\n                     name_ptr: SyntaxNodePtr {\n-                        range: 180..188,\n+                        range: 282..290,\n                         kind: NAME,\n                     },\n                 },\n@@ -131,33 +155,11 @@\n                         ),\n                     ),\n                     ptr: SyntaxNodePtr {\n-                        range: 200..236,\n-                        kind: FN,\n-                    },\n-                    name_ptr: SyntaxNodePtr {\n-                        range: 203..207,\n-                        kind: NAME,\n-                    },\n-                },\n-                kind: Function,\n-                container_name: None,\n-            },\n-            FileSymbol {\n-                name: \"proc_macro\",\n-                loc: DeclarationLocation {\n-                    hir_file_id: HirFileId(\n-                        FileId(\n-                            FileId(\n-                                0,\n-                            ),\n-                        ),\n-                    ),\n-                    ptr: SyntaxNodePtr {\n-                        range: 238..270,\n+                        range: 302..338,\n                         kind: FN,\n                     },\n                     name_ptr: SyntaxNodePtr {\n-                        range: 255..265,\n+                        range: 305..309,\n                         kind: NAME,\n                     },\n                 },\n@@ -175,11 +177,11 @@\n                         ),\n                     ),\n                     ptr: SyntaxNodePtr {\n-                        range: 272..293,\n+                        range: 340..361,\n                         kind: CONST,\n                     },\n                     name_ptr: SyntaxNodePtr {\n-                        range: 278..283,\n+                        range: 346..351,\n                         kind: NAME,\n                     },\n                 },\n@@ -197,11 +199,11 @@\n                         ),\n                     ),\n                     ptr: SyntaxNodePtr {\n-                        range: 294..328,\n+                        range: 362..396,\n                         kind: STATIC,\n                     },\n                     name_ptr: SyntaxNodePtr {\n-                        range: 301..307,\n+                        range: 369..375,\n                         kind: NAME,\n                     },\n                 },\n@@ -219,11 +221,11 @@\n                         ),\n                     ),\n                     ptr: SyntaxNodePtr {\n-                        range: 329..349,\n+                        range: 397..417,\n                         kind: TYPE_ALIAS,\n                     },\n                     name_ptr: SyntaxNodePtr {\n-                        range: 334..339,\n+                        range: 402..407,\n                         kind: NAME,\n                     },\n                 },\n@@ -241,11 +243,11 @@\n                         ),\n                     ),\n                     ptr: SyntaxNodePtr {\n-                        range: 351..389,\n+                        range: 419..457,\n                         kind: MODULE,\n                     },\n                     name_ptr: SyntaxNodePtr {\n-                        range: 355..360,\n+                        range: 423..428,\n                         kind: NAME,\n                     },\n                 },\n@@ -263,11 +265,11 @@\n                         ),\n                     ),\n                     ptr: SyntaxNodePtr {\n-                        range: 391..401,\n+                        range: 459..469,\n                         kind: MODULE,\n                     },\n                     name_ptr: SyntaxNodePtr {\n-                        range: 395..400,\n+                        range: 463..468,\n                         kind: NAME,\n                     },\n                 },\n@@ -285,11 +287,11 @@\n                         ),\n                     ),\n                     ptr: SyntaxNodePtr {\n-                        range: 140..155,\n+                        range: 242..257,\n                         kind: FN,\n                     },\n                     name_ptr: SyntaxNodePtr {\n-                        range: 143..150,\n+                        range: 245..252,\n                         kind: NAME,\n                     },\n                 },\n@@ -319,7 +321,7 @@\n                 container_name: None,\n             },\n             FileSymbol {\n-                name: \"Macro\",\n+                name: \"define_struct\",\n                 loc: DeclarationLocation {\n                     hir_file_id: HirFileId(\n                         FileId(\n@@ -329,19 +331,19 @@\n                         ),\n                     ),\n                     ptr: SyntaxNodePtr {\n-                        range: 51..66,\n-                        kind: MACRO_DEF,\n+                        range: 51..131,\n+                        kind: MACRO_RULES,\n                     },\n                     name_ptr: SyntaxNodePtr {\n-                        range: 57..62,\n+                        range: 64..77,\n                         kind: NAME,\n                     },\n                 },\n                 kind: Macro,\n                 container_name: None,\n             },\n             FileSymbol {\n-                name: \"proc_macro\",\n+                name: \"Macro\",\n                 loc: DeclarationLocation {\n                     hir_file_id: HirFileId(\n                         FileId(\n@@ -351,11 +353,11 @@\n                         ),\n                     ),\n                     ptr: SyntaxNodePtr {\n-                        range: 238..270,\n-                        kind: FN,\n+                        range: 153..168,\n+                        kind: MACRO_DEF,\n                     },\n                     name_ptr: SyntaxNodePtr {\n-                        range: 255..265,\n+                        range: 159..164,\n                         kind: NAME,\n                     },\n                 },\n@@ -373,11 +375,11 @@\n                         ),\n                     ),\n                     ptr: SyntaxNodePtr {\n-                        range: 216..234,\n+                        range: 318..336,\n                         kind: STRUCT,\n                     },\n                     name_ptr: SyntaxNodePtr {\n-                        range: 223..233,\n+                        range: 325..335,\n                         kind: NAME,\n                     },\n                 },\n@@ -408,11 +410,11 @@\n                         ),\n                     ),\n                     ptr: SyntaxNodePtr {\n-                        range: 367..387,\n+                        range: 435..455,\n                         kind: STRUCT,\n                     },\n                     name_ptr: SyntaxNodePtr {\n-                        range: 374..386,\n+                        range: 442..454,\n                         kind: NAME,\n                     },\n                 },"}]}