{"sha": "9c4995f694ef38283d631fd4c242417360fc78ee", "node_id": "MDY6Q29tbWl0NzI0NzEyOjljNDk5NWY2OTRlZjM4MjgzZDYzMWZkNGMyNDI0MTczNjBmYzc4ZWU=", "commit": {"author": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2015-04-17T12:44:22Z"}, "committer": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2015-04-17T13:02:26Z"}, "message": "Rollup merge of #24454 - aochagavia:debug, r=alexcrichton\n\n Implement `Debug`, `Display` and `Error` for `FatalError` and `ExplicitBug`", "tree": {"sha": "11a9a4945617f8025cbcad3c2532aa8bdedcac4c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/11a9a4945617f8025cbcad3c2532aa8bdedcac4c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9c4995f694ef38283d631fd4c242417360fc78ee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9c4995f694ef38283d631fd4c242417360fc78ee", "html_url": "https://github.com/rust-lang/rust/commit/9c4995f694ef38283d631fd4c242417360fc78ee", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9c4995f694ef38283d631fd4c242417360fc78ee/comments", "author": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3118cd7dad4736385fbefa4b07b1d339590fce6d", "url": "https://api.github.com/repos/rust-lang/rust/commits/3118cd7dad4736385fbefa4b07b1d339590fce6d", "html_url": "https://github.com/rust-lang/rust/commit/3118cd7dad4736385fbefa4b07b1d339590fce6d"}, {"sha": "9891ea74d6f706cf38e91599f1e65816977cefdc", "url": "https://api.github.com/repos/rust-lang/rust/commits/9891ea74d6f706cf38e91599f1e65816977cefdc", "html_url": "https://github.com/rust-lang/rust/commit/9891ea74d6f706cf38e91599f1e65816977cefdc"}], "stats": {"total": 37, "additions": 29, "deletions": 8}, "files": [{"sha": "e9af6c00995a65b2095b1548c5ddba0f1583a864", "filename": "src/libsyntax/diagnostic.rs", "status": "modified", "additions": 29, "deletions": 8, "changes": 37, "blob_url": "https://github.com/rust-lang/rust/blob/9c4995f694ef38283d631fd4c242417360fc78ee/src%2Flibsyntax%2Fdiagnostic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9c4995f694ef38283d631fd4c242417360fc78ee/src%2Flibsyntax%2Fdiagnostic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fdiagnostic.rs?ref=9c4995f694ef38283d631fd4c242417360fc78ee", "patch": "@@ -13,17 +13,14 @@ pub use self::RenderSpan::*;\n pub use self::ColorConfig::*;\n use self::Destination::*;\n \n-use codemap::{COMMAND_LINE_SP, COMMAND_LINE_EXPN, Pos, Span};\n-use codemap;\n+use codemap::{self, COMMAND_LINE_SP, COMMAND_LINE_EXPN, Pos, Span};\n use diagnostics;\n \n use std::cell::{RefCell, Cell};\n-use std::cmp;\n-use std::fmt;\n+use std::{cmp, error, fmt};\n use std::io::prelude::*;\n use std::io;\n-use term::WriterWrapper;\n-use term;\n+use term::{self, WriterWrapper};\n use libc;\n \n /// maximum number of lines we will print for each error; arbitrary.\n@@ -83,15 +80,39 @@ pub trait Emitter {\n /// Used as a return value to signify a fatal error occurred. (It is also\n /// used as the argument to panic at the moment, but that will eventually\n /// not be true.)\n-#[derive(Copy, Clone)]\n+#[derive(Copy, Clone, Debug)]\n #[must_use]\n pub struct FatalError;\n \n+impl fmt::Display for FatalError {\n+    fn fmt(&self, f: &mut fmt::Formatter) -> Result<(), fmt::Error> {\n+        write!(f, \"parser fatal error\")\n+    }\n+}\n+\n+impl error::Error for FatalError {\n+    fn description(&self) -> &str {\n+        \"The parser has encountered a fatal error\"\n+    }\n+}\n+\n /// Signifies that the compiler died with an explicit call to `.bug`\n /// or `.span_bug` rather than a failed assertion, etc.\n-#[derive(Copy, Clone)]\n+#[derive(Copy, Clone, Debug)]\n pub struct ExplicitBug;\n \n+impl fmt::Display for ExplicitBug {\n+    fn fmt(&self, f: &mut fmt::Formatter) -> Result<(), fmt::Error> {\n+        write!(f, \"parser internal bug\")\n+    }\n+}\n+\n+impl error::Error for ExplicitBug {\n+    fn description(&self) -> &str {\n+        \"The parser has encountered an internal bug\"\n+    }\n+}\n+\n /// A span-handler is like a handler but also\n /// accepts span information for source-location\n /// reporting."}]}