{"sha": "eac75b76486ec54f677b2460f09635380437b125", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVhYzc1Yjc2NDg2ZWM1NGY2NzdiMjQ2MGYwOTYzNTM4MDQzN2IxMjU=", "commit": {"author": {"name": "Brian Anderson", "email": "andersrb@gmail.com", "date": "2011-02-23T01:23:38Z"}, "committer": {"name": "Brian Anderson", "email": "andersrb@gmail.com", "date": "2011-02-23T02:52:23Z"}, "message": "Teach rustc about reserved keywords", "tree": {"sha": "cfe16a9e9a4401cd40c8603c479f12e531261eba", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cfe16a9e9a4401cd40c8603c479f12e531261eba"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/eac75b76486ec54f677b2460f09635380437b125", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/eac75b76486ec54f677b2460f09635380437b125", "html_url": "https://github.com/rust-lang/rust/commit/eac75b76486ec54f677b2460f09635380437b125", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/eac75b76486ec54f677b2460f09635380437b125/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c4df39609c9c09c450dd8fe5905a8e6fbeb5f181", "url": "https://api.github.com/repos/rust-lang/rust/commits/c4df39609c9c09c450dd8fe5905a8e6fbeb5f181", "html_url": "https://github.com/rust-lang/rust/commit/c4df39609c9c09c450dd8fe5905a8e6fbeb5f181"}], "stats": {"total": 59, "additions": 58, "deletions": 1}, "files": [{"sha": "551a70010b4c2c1208aa71e2ec6ca0174c06ee2c", "filename": "src/Makefile", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/eac75b76486ec54f677b2460f09635380437b125/src%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/eac75b76486ec54f677b2460f09635380437b125/src%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2FMakefile?ref=eac75b76486ec54f677b2460f09635380437b125", "patch": "@@ -569,6 +569,13 @@ TEST_XFAILS_RUSTC := $(filter-out \\\n                         multiline-comment-line-tracking.rs \\\n                         output-type-mismatch.rs \\\n                         rec-missing-fields.rs \\\n+                        reserved-dec.rs \\\n+                        reserved-f128.rs \\\n+                        reserved-f16.rs \\\n+                        reserved-f80.rs \\\n+                        reserved-m128.rs \\\n+                        reserved-m32.rs \\\n+                        reserved-m64.rs \\\n                         tail-non-call.rs \\\n                         tail-typeck.rs \\\n                         type-shadow.rs \\"}, {"sha": "99e9217f5074c5191d13c7270912b0d0ff6abb95", "filename": "src/comp/front/lexer.rs", "status": "modified", "additions": 16, "deletions": 1, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/eac75b76486ec54f677b2460f09635380437b125/src%2Fcomp%2Ffront%2Flexer.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eac75b76486ec54f677b2460f09635380437b125/src%2Fcomp%2Ffront%2Flexer.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Ffront%2Flexer.rs?ref=eac75b76486ec54f677b2460f09635380437b125", "patch": "@@ -90,7 +90,6 @@ fn new_reader(stdio_reader rdr, str filename) -> reader\n         }\n \n     auto keywords = new_str_hash[token.token]();\n-    auto reserved = new_str_hash[()]();\n \n     keywords.insert(\"mod\", token.MOD);\n     keywords.insert(\"use\", token.USE);\n@@ -191,6 +190,16 @@ fn new_reader(stdio_reader rdr, str filename) -> reader\n     keywords.insert(\"f32\", token.MACH(common.ty_f32));\n     keywords.insert(\"f64\", token.MACH(common.ty_f64));\n \n+    auto reserved = new_str_hash[()]();\n+\n+    reserved.insert(\"f16\", ());  // IEEE 754-2008 'binary16' interchange fmt\n+    reserved.insert(\"f80\", ());  // IEEE 754-1985 'extended'\n+    reserved.insert(\"f128\", ()); // IEEE 754-2008 'binary128'\n+    reserved.insert(\"m32\", ());  // IEEE 754-2008 'decimal32'\n+    reserved.insert(\"m64\", ());  // IEEE 754-2008 'decimal64'\n+    reserved.insert(\"m128\", ()); // IEEE 754-2008 'decimal128'\n+    reserved.insert(\"dec\", ());  // One of m32, m64, m128\n+\n     ret reader(rdr, filename, rdr.getc() as char, rdr.getc() as char,\n                1u, 0u, 1u, 0u, keywords, reserved);\n }\n@@ -425,6 +434,12 @@ impure fn next_token(reader rdr) -> token.token {\n             ret kwds.get(accum_str);\n         }\n \n+        auto rsvd = rdr.get_reserved();\n+        if (rsvd.contains_key(accum_str)) {\n+            log \"reserved keyword\";\n+            fail;\n+        }\n+\n         ret token.IDENT(accum_str);\n     }\n "}, {"sha": "d8c204d9fb32b24c7a50918f571f2b17e5b01f54", "filename": "src/test/compile-fail/reserved-dec.rs", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/eac75b76486ec54f677b2460f09635380437b125/src%2Ftest%2Fcompile-fail%2Freserved-dec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eac75b76486ec54f677b2460f09635380437b125/src%2Ftest%2Fcompile-fail%2Freserved-dec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Freserved-dec.rs?ref=eac75b76486ec54f677b2460f09635380437b125", "patch": "@@ -0,0 +1,5 @@\n+// error-pattern:reserved keyword\n+\n+fn main() {\n+  let int dec = 0;\n+}"}, {"sha": "63d00f705bf93c3729dbf62641bb0881474bd70b", "filename": "src/test/compile-fail/reserved-f128.rs", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/eac75b76486ec54f677b2460f09635380437b125/src%2Ftest%2Fcompile-fail%2Freserved-f128.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eac75b76486ec54f677b2460f09635380437b125/src%2Ftest%2Fcompile-fail%2Freserved-f128.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Freserved-f128.rs?ref=eac75b76486ec54f677b2460f09635380437b125", "patch": "@@ -0,0 +1,5 @@\n+// error-pattern:reserved keyword\n+\n+fn main() {\n+  let int f128 = 0;\n+}"}, {"sha": "bfb14cd8fee38ff83f2378400806674a42eba666", "filename": "src/test/compile-fail/reserved-f16.rs", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/eac75b76486ec54f677b2460f09635380437b125/src%2Ftest%2Fcompile-fail%2Freserved-f16.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eac75b76486ec54f677b2460f09635380437b125/src%2Ftest%2Fcompile-fail%2Freserved-f16.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Freserved-f16.rs?ref=eac75b76486ec54f677b2460f09635380437b125", "patch": "@@ -0,0 +1,5 @@\n+// error-pattern:reserved keyword\n+\n+fn main() {\n+  let int f16 = 0;\n+}"}, {"sha": "33e8bd5e5b3626970c0481b9ebe4b635ead378e6", "filename": "src/test/compile-fail/reserved-f80.rs", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/eac75b76486ec54f677b2460f09635380437b125/src%2Ftest%2Fcompile-fail%2Freserved-f80.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eac75b76486ec54f677b2460f09635380437b125/src%2Ftest%2Fcompile-fail%2Freserved-f80.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Freserved-f80.rs?ref=eac75b76486ec54f677b2460f09635380437b125", "patch": "@@ -0,0 +1,5 @@\n+// error-pattern:reserved keyword\n+\n+fn main() {\n+  let int f80 = 0;\n+}"}, {"sha": "c4d36bf76e013f4c723febfeaf24b346c6b79d1d", "filename": "src/test/compile-fail/reserved-m128.rs", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/eac75b76486ec54f677b2460f09635380437b125/src%2Ftest%2Fcompile-fail%2Freserved-m128.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eac75b76486ec54f677b2460f09635380437b125/src%2Ftest%2Fcompile-fail%2Freserved-m128.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Freserved-m128.rs?ref=eac75b76486ec54f677b2460f09635380437b125", "patch": "@@ -0,0 +1,5 @@\n+// error-pattern:reserved keyword\n+\n+fn main() {\n+  let int m128 = 0;\n+}"}, {"sha": "bdb3a427c7e3d32d453fb1f084a79be48b9799db", "filename": "src/test/compile-fail/reserved-m32.rs", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/eac75b76486ec54f677b2460f09635380437b125/src%2Ftest%2Fcompile-fail%2Freserved-m32.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eac75b76486ec54f677b2460f09635380437b125/src%2Ftest%2Fcompile-fail%2Freserved-m32.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Freserved-m32.rs?ref=eac75b76486ec54f677b2460f09635380437b125", "patch": "@@ -0,0 +1,5 @@\n+// error-pattern:reserved keyword\n+\n+fn main() {\n+  let int m32 = 0;\n+}"}, {"sha": "034884a6fddd306744ae696a3339c16886a00e7b", "filename": "src/test/compile-fail/reserved-m64.rs", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/eac75b76486ec54f677b2460f09635380437b125/src%2Ftest%2Fcompile-fail%2Freserved-m64.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eac75b76486ec54f677b2460f09635380437b125/src%2Ftest%2Fcompile-fail%2Freserved-m64.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Freserved-m64.rs?ref=eac75b76486ec54f677b2460f09635380437b125", "patch": "@@ -0,0 +1,5 @@\n+// error-pattern:reserved keyword\n+\n+fn main() {\n+  let int m64 = 0;\n+}"}]}