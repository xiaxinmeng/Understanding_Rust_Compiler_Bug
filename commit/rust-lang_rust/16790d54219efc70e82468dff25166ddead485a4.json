{"sha": "16790d54219efc70e82468dff25166ddead485a4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE2NzkwZDU0MjE5ZWZjNzBlODI0NjhkZmYyNTE2NmRkZWFkNDg1YTQ=", "commit": {"author": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2018-08-30T18:48:42Z"}, "committer": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2018-08-30T18:48:42Z"}, "message": "Update patch 0004 to latest libcore", "tree": {"sha": "234eff4d962c11750f1e8a57570777440a431568", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/234eff4d962c11750f1e8a57570777440a431568"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/16790d54219efc70e82468dff25166ddead485a4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/16790d54219efc70e82468dff25166ddead485a4", "html_url": "https://github.com/rust-lang/rust/commit/16790d54219efc70e82468dff25166ddead485a4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/16790d54219efc70e82468dff25166ddead485a4/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "42eeb75a1f8143e9fa4e4d1043ddfba0d2e31cd1", "url": "https://api.github.com/repos/rust-lang/rust/commits/42eeb75a1f8143e9fa4e4d1043ddfba0d2e31cd1", "html_url": "https://github.com/rust-lang/rust/commit/42eeb75a1f8143e9fa4e4d1043ddfba0d2e31cd1"}], "stats": {"total": 76, "additions": 41, "deletions": 35}, "files": [{"sha": "422cacade9b718c97814ee5b93f2d291a9ccc2d4", "filename": "0004-Disable-future-and-task-modules-because-they-contain.patch", "status": "modified", "additions": 41, "deletions": 35, "changes": 76, "blob_url": "https://github.com/rust-lang/rust/blob/16790d54219efc70e82468dff25166ddead485a4/0004-Disable-future-and-task-modules-because-they-contain.patch", "raw_url": "https://github.com/rust-lang/rust/raw/16790d54219efc70e82468dff25166ddead485a4/0004-Disable-future-and-task-modules-because-they-contain.patch", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/0004-Disable-future-and-task-modules-because-they-contain.patch?ref=16790d54219efc70e82468dff25166ddead485a4", "patch": "@@ -1,18 +1,27 @@\n-From 439444eb7d5557daa5e8cfafd1317816fefdad70 Mon Sep 17 00:00:00 2001\n+From 9db209102bf5f7850ccd456be0d5af09405ee950 Mon Sep 17 00:00:00 2001\n From: bjorn3 <bjorn3@users.noreply.github.com>\n-Date: Wed, 8 Aug 2018 15:51:42 +0200\n+Date: Thu, 30 Aug 2018 20:47:12 +0200\n Subject: [PATCH] Disable future and task modules, because they contain unsized\n  types\n \n ---\n- src/libcore/lib.rs | 2 ++\n- src/libcore/mem.rs | 6 ++++--\n+ src/libcore/lib.rs    | 4 +++-\n+ src/libcore/option.rs | 4 +++-\n  2 files changed, 6 insertions(+), 2 deletions(-)\n \n diff --git a/src/libcore/lib.rs b/src/libcore/lib.rs\n-index 71fcff2..7dcbb4b 100644\n+index 9b64b7d..9d2e230 100644\n --- a/src/libcore/lib.rs\n +++ b/src/libcore/lib.rs\n+@@ -188,7 +188,7 @@ pub mod cell;\n+ pub mod char;\n+ pub mod panic;\n+ pub mod panicking;\n+-pub mod pin;\n++//pub mod pin;\n+ pub mod iter;\n+ pub mod option;\n+ pub mod raw;\n @@ -202,9 +202,11 @@ pub mod time;\n  \n  pub mod unicode;\n@@ -25,38 +34,35 @@ index 71fcff2..7dcbb4b 100644\n  \n  /* Heap memory allocator trait */\n  #[allow(missing_docs)]\n-diff --git a/src/libcore/mem.rs b/src/libcore/mem.rs\n-index 642fffa..f5a22ab 100644\n---- a/src/libcore/mem.rs\n-+++ b/src/libcore/mem.rs\n-@@ -18,12 +18,12 @@\n- use clone;\n- use cmp;\n- use fmt;\n--use future::{Future, UnsafeFutureObj};\n-+//use future::{Future, UnsafeFutureObj};\n- use hash;\n- use intrinsics;\n- use marker::{Copy, PhantomData, Sized, Unpin, Unsize};\n- use ptr;\n--use task::{Context, Poll};\n-+//use task::{Context, Poll};\n- use ops::{Deref, DerefMut, CoerceUnsized};\n+diff --git a/src/libcore/option.rs b/src/libcore/option.rs\n+index 3879abb..16204a8 100644\n+--- a/src/libcore/option.rs\n++++ b/src/libcore/option.rs\n+@@ -147,7 +147,7 @@\n  \n- #[stable(feature = \"rust1\", since = \"1.0.0\")]\n-@@ -1148,6 +1148,7 @@ impl<'a, T: ?Sized + Unsize<U>, U: ?Sized> CoerceUnsized<PinMut<'a, U>> for PinM\n- #[unstable(feature = \"pin\", issue = \"49150\")]\n- impl<'a, T: ?Sized> Unpin for PinMut<'a, T> {}\n+ use iter::{FromIterator, FusedIterator, TrustedLen};\n+ use {hint, mem, ops::{self, Deref}};\n+-use pin::PinMut;\n++//use pin::PinMut;\n  \n-+/*\n- #[unstable(feature = \"futures_api\", issue = \"50547\")]\n- unsafe impl<'a, T, F> UnsafeFutureObj<'a, T> for PinMut<'a, F>\n-     where F: Future<Output = T> + 'a\n-@@ -1162,3 +1163,4 @@ unsafe impl<'a, T, F> UnsafeFutureObj<'a, T> for PinMut<'a, F>\n+ // Note that this is not a lang item per se, but it has a hidden dependency on\n+ // `Iterator`, which is one. The compiler assumes that the `next` method of\n+@@ -270,6 +270,7 @@ impl<T> Option<T> {\n+         }\n+     }\n  \n-     unsafe fn drop(_ptr: *mut ()) {}\n- }\n-+*/\n++    /*\n+     /// Converts from `Option<T>` to `Option<PinMut<'_, T>>`\n+     #[inline]\n+     #[unstable(feature = \"pin\", issue = \"49150\")]\n+@@ -278,6 +279,7 @@ impl<T> Option<T> {\n+             PinMut::get_mut_unchecked(self).as_mut().map(|x| PinMut::new_unchecked(x))\n+         }\n+     }\n++    */\n+ \n+     /////////////////////////////////////////////////////////////////////////\n+     // Getting to contained values\n -- \n-2.15.2 (Apple Git-101.1)\n+2.11.0\n "}]}