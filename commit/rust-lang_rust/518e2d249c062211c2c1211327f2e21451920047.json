{"sha": "518e2d249c062211c2c1211327f2e21451920047", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUxOGUyZDI0OWMwNjIyMTFjMmMxMjExMzI3ZjJlMjE0NTE5MjAwNDc=", "commit": {"author": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2011-05-06T01:11:40Z"}, "committer": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2011-05-06T01:11:40Z"}, "message": "build: Disable valgrind by default on the Mac. Our suppressions file doesn't even begin to cover the huge stream of errors that dyld generates.", "tree": {"sha": "d837d0473ebd7a19144cf64fb13634f060bd5d3a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d837d0473ebd7a19144cf64fb13634f060bd5d3a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/518e2d249c062211c2c1211327f2e21451920047", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/518e2d249c062211c2c1211327f2e21451920047", "html_url": "https://github.com/rust-lang/rust/commit/518e2d249c062211c2c1211327f2e21451920047", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/518e2d249c062211c2c1211327f2e21451920047/comments", "author": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "883eb38b283d9f2486529ec1bf1e7f695396d96f", "url": "https://api.github.com/repos/rust-lang/rust/commits/883eb38b283d9f2486529ec1bf1e7f695396d96f", "html_url": "https://github.com/rust-lang/rust/commit/883eb38b283d9f2486529ec1bf1e7f695396d96f"}], "stats": {"total": 13, "additions": 13, "deletions": 0}, "files": [{"sha": "3daf9e8dbe1504a2178d40596d330f47f0bff20e", "filename": "Makefile.in", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/518e2d249c062211c2c1211327f2e21451920047/Makefile.in", "raw_url": "https://github.com/rust-lang/rust/raw/518e2d249c062211c2c1211327f2e21451920047/Makefile.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Makefile.in?ref=518e2d249c062211c2c1211327f2e21451920047", "patch": "@@ -46,6 +46,10 @@ ifdef CFG_DISABLE_VALGRIND\n   $(info cfg: disabling valgrind (CFG_DISABLE_VALGRIND))\n   CFG_VALGRIND :=\n endif\n+ifdef CFG_BAD_VALGRIND\n+  $(info cfg: disabling valgrind due to its unreliability on this platform)\n+  CFG_VALGRIND :=\n+endif\n \n DOCS :=\n ifeq ($(CFG_MAKEINFO),)"}, {"sha": "79175dd78cbc30512f799c882d4ea8629ecf980d", "filename": "configure", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/518e2d249c062211c2c1211327f2e21451920047/configure", "raw_url": "https://github.com/rust-lang/rust/raw/518e2d249c062211c2c1211327f2e21451920047/configure", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/configure?ref=518e2d249c062211c2c1211327f2e21451920047", "patch": "@@ -201,6 +201,15 @@ probe CFG_MAKEINFO         makeinfo\n probe CFG_TEXI2PDF         texi2pdf\n probe CFG_TEX              tex\n \n+# Valgrind is only reliable on Linux. On Windows it doesn't work at all, and\n+# on the Mac the dynamic linker causes Valgrind to emit a huge stream of\n+# errors.\n+if [ $CFG_OSTYPE != Linux ]\n+then\n+    CFG_BAD_VALGRIND=1\n+    putvar CFG_BAD_VALGRIND\n+fi\n+\n if [ ! -z \"$CFG_LLVM_ROOT\" ]\n then\n     CFG_LLVM_INCDIR=\"$CFG_LLVM_ROOT/include\""}]}