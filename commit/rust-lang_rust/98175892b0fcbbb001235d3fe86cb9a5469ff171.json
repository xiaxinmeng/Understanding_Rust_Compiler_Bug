{"sha": "98175892b0fcbbb001235d3fe86cb9a5469ff171", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk4MTc1ODkyYjBmY2JiYjAwMTIzNWQzZmU4NmNiOWE1NDY5ZmYxNzE=", "commit": {"author": {"name": "Marc-Antoine Perennou", "email": "Marc-Antoine@Perennou.com", "date": "2017-11-16T10:26:45Z"}, "committer": {"name": "Marc-Antoine Perennou", "email": "Marc-Antoine@Perennou.com", "date": "2017-11-16T10:26:45Z"}, "message": "rustbuild: make tidy happy\n\nSigned-off-by: Marc-Antoine Perennou <Marc-Antoine@Perennou.com>", "tree": {"sha": "17a9a7284738eeae513ccd5780c85193aed8869e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/17a9a7284738eeae513ccd5780c85193aed8869e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/98175892b0fcbbb001235d3fe86cb9a5469ff171", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/98175892b0fcbbb001235d3fe86cb9a5469ff171", "html_url": "https://github.com/rust-lang/rust/commit/98175892b0fcbbb001235d3fe86cb9a5469ff171", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/98175892b0fcbbb001235d3fe86cb9a5469ff171/comments", "author": {"login": "Keruspe", "id": 222942, "node_id": "MDQ6VXNlcjIyMjk0Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/222942?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Keruspe", "html_url": "https://github.com/Keruspe", "followers_url": "https://api.github.com/users/Keruspe/followers", "following_url": "https://api.github.com/users/Keruspe/following{/other_user}", "gists_url": "https://api.github.com/users/Keruspe/gists{/gist_id}", "starred_url": "https://api.github.com/users/Keruspe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Keruspe/subscriptions", "organizations_url": "https://api.github.com/users/Keruspe/orgs", "repos_url": "https://api.github.com/users/Keruspe/repos", "events_url": "https://api.github.com/users/Keruspe/events{/privacy}", "received_events_url": "https://api.github.com/users/Keruspe/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Keruspe", "id": 222942, "node_id": "MDQ6VXNlcjIyMjk0Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/222942?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Keruspe", "html_url": "https://github.com/Keruspe", "followers_url": "https://api.github.com/users/Keruspe/followers", "following_url": "https://api.github.com/users/Keruspe/following{/other_user}", "gists_url": "https://api.github.com/users/Keruspe/gists{/gist_id}", "starred_url": "https://api.github.com/users/Keruspe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Keruspe/subscriptions", "organizations_url": "https://api.github.com/users/Keruspe/orgs", "repos_url": "https://api.github.com/users/Keruspe/repos", "events_url": "https://api.github.com/users/Keruspe/events{/privacy}", "received_events_url": "https://api.github.com/users/Keruspe/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8f91a45e484796998942cfe2d7ae1c9aa24ccee2", "url": "https://api.github.com/repos/rust-lang/rust/commits/8f91a45e484796998942cfe2d7ae1c9aa24ccee2", "html_url": "https://github.com/rust-lang/rust/commit/8f91a45e484796998942cfe2d7ae1c9aa24ccee2"}], "stats": {"total": 3, "additions": 2, "deletions": 1}, "files": [{"sha": "9b16ca0980acb22612b0fa480e12ff2cd44cdcf8", "filename": "src/bootstrap/tool.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/98175892b0fcbbb001235d3fe86cb9a5469ff171/src%2Fbootstrap%2Ftool.rs", "raw_url": "https://github.com/rust-lang/rust/raw/98175892b0fcbbb001235d3fe86cb9a5469ff171/src%2Fbootstrap%2Ftool.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Ftool.rs?ref=98175892b0fcbbb001235d3fe86cb9a5469ff171", "patch": "@@ -436,13 +436,14 @@ macro_rules! tool_extended {\n \n             fn run($sel, $builder: &Builder) -> Option<PathBuf> {\n                 $extra_deps\n+                let toolstate = $builder.build.config.toolstate.$toolstate;\n                 $builder.ensure(ToolBuild {\n                     compiler: $sel.compiler,\n                     target: $sel.target,\n                     tool: $tool_name,\n                     mode: Mode::Librustc,\n                     path: $path,\n-                    expectation: $builder.build.config.toolstate.$toolstate.passes(ToolState::Compiling),\n+                    expectation: toolstate.passes(ToolState::Compiling),\n                 })\n             }\n         }"}]}