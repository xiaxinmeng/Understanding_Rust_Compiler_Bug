{"sha": "c6817ffb2cadae7f80414e13d99e89ec83db9a77", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM2ODE3ZmZiMmNhZGFlN2Y4MDQxNGUxM2Q5OWU4OWVjODNkYjlhNzc=", "commit": {"author": {"name": "Amanieu d'Antras", "email": "amanieu@gmail.com", "date": "2020-03-31T22:41:45Z"}, "committer": {"name": "Amanieu d'Antras", "email": "amanieu@gmail.com", "date": "2020-04-29T00:21:24Z"}, "message": "Fix test", "tree": {"sha": "9a0c0dd6216e58f72b1064077be9daf92e9760ec", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9a0c0dd6216e58f72b1064077be9daf92e9760ec"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c6817ffb2cadae7f80414e13d99e89ec83db9a77", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c6817ffb2cadae7f80414e13d99e89ec83db9a77", "html_url": "https://github.com/rust-lang/rust/commit/c6817ffb2cadae7f80414e13d99e89ec83db9a77", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c6817ffb2cadae7f80414e13d99e89ec83db9a77/comments", "author": {"login": "Amanieu", "id": 278509, "node_id": "MDQ6VXNlcjI3ODUwOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/278509?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Amanieu", "html_url": "https://github.com/Amanieu", "followers_url": "https://api.github.com/users/Amanieu/followers", "following_url": "https://api.github.com/users/Amanieu/following{/other_user}", "gists_url": "https://api.github.com/users/Amanieu/gists{/gist_id}", "starred_url": "https://api.github.com/users/Amanieu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Amanieu/subscriptions", "organizations_url": "https://api.github.com/users/Amanieu/orgs", "repos_url": "https://api.github.com/users/Amanieu/repos", "events_url": "https://api.github.com/users/Amanieu/events{/privacy}", "received_events_url": "https://api.github.com/users/Amanieu/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Amanieu", "id": 278509, "node_id": "MDQ6VXNlcjI3ODUwOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/278509?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Amanieu", "html_url": "https://github.com/Amanieu", "followers_url": "https://api.github.com/users/Amanieu/followers", "following_url": "https://api.github.com/users/Amanieu/following{/other_user}", "gists_url": "https://api.github.com/users/Amanieu/gists{/gist_id}", "starred_url": "https://api.github.com/users/Amanieu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Amanieu/subscriptions", "organizations_url": "https://api.github.com/users/Amanieu/orgs", "repos_url": "https://api.github.com/users/Amanieu/repos", "events_url": "https://api.github.com/users/Amanieu/events{/privacy}", "received_events_url": "https://api.github.com/users/Amanieu/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "eb4725fc5405605c4bd17800ccf8c583bfe79be5", "url": "https://api.github.com/repos/rust-lang/rust/commits/eb4725fc5405605c4bd17800ccf8c583bfe79be5", "html_url": "https://github.com/rust-lang/rust/commit/eb4725fc5405605c4bd17800ccf8c583bfe79be5"}], "stats": {"total": 83, "additions": 42, "deletions": 41}, "files": [{"sha": "c86e2865ca8a48970baf96c344a049503f35bde5", "filename": "src/test/mir-opt/generator-tiny.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c6817ffb2cadae7f80414e13d99e89ec83db9a77/src%2Ftest%2Fmir-opt%2Fgenerator-tiny.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c6817ffb2cadae7f80414e13d99e89ec83db9a77/src%2Ftest%2Fmir-opt%2Fgenerator-tiny.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fgenerator-tiny.rs?ref=c6817ffb2cadae7f80414e13d99e89ec83db9a77", "patch": "@@ -2,6 +2,7 @@\n //! panic branches.\n \n // compile-flags: -C panic=abort\n+// no-prefer-dynamic\n \n #![feature(generators, generator_trait)]\n "}, {"sha": "75c2fb3d1307dbae31f6f7ef496987b8dde0c8b0", "filename": "src/test/mir-opt/generator-tiny/rustc.main-{{closure}}.generator_resume.0.mir", "status": "modified", "additions": 41, "deletions": 41, "changes": 82, "blob_url": "https://github.com/rust-lang/rust/blob/c6817ffb2cadae7f80414e13d99e89ec83db9a77/src%2Ftest%2Fmir-opt%2Fgenerator-tiny%2Frustc.main-%7B%7Bclosure%7D%7D.generator_resume.0.mir", "raw_url": "https://github.com/rust-lang/rust/raw/c6817ffb2cadae7f80414e13d99e89ec83db9a77/src%2Ftest%2Fmir-opt%2Fgenerator-tiny%2Frustc.main-%7B%7Bclosure%7D%7D.generator_resume.0.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fgenerator-tiny%2Frustc.main-%7B%7Bclosure%7D%7D.generator_resume.0.mir?ref=c6817ffb2cadae7f80414e13d99e89ec83db9a77", "patch": "@@ -1,78 +1,78 @@\n // MIR for `main::{{closure}}#0` 0 generator_resume\n // generator_layout = GeneratorLayout { field_tys: [HasDrop], variant_fields: [[], [], [], [_0]], storage_conflicts: BitMatrix { num_rows: 1, num_columns: 1, words: [1], marker: PhantomData } }\n \n-fn main::{{closure}}#0(_1: std::pin::Pin<&mut [generator@$DIR/generator-tiny.rs:18:16: 24:6 {u8, HasDrop, ()}]>, _2: u8) -> std::ops::GeneratorState<(), ()> {\n-    debug _x => _10;                     // in scope 0 at $DIR/generator-tiny.rs:18:17: 18:19\n-    let mut _0: std::ops::GeneratorState<(), ()>; // return place in scope 0 at $DIR/generator-tiny.rs:18:16: 24:6\n-    let _3: HasDrop;                     // in scope 0 at $DIR/generator-tiny.rs:19:13: 19:15\n-    let mut _4: !;                       // in scope 0 at $DIR/generator-tiny.rs:20:9: 23:10\n-    let mut _5: ();                      // in scope 0 at $DIR/generator-tiny.rs:18:16: 24:6\n-    let _6: u8;                          // in scope 0 at $DIR/generator-tiny.rs:21:13: 21:18\n-    let mut _7: ();                      // in scope 0 at $DIR/generator-tiny.rs:21:13: 21:18\n-    let _8: ();                          // in scope 0 at $DIR/generator-tiny.rs:22:13: 22:21\n-    let mut _9: ();                      // in scope 0 at $DIR/generator-tiny.rs:18:25: 18:25\n-    let _10: u8;                         // in scope 0 at $DIR/generator-tiny.rs:18:17: 18:19\n-    let mut _11: isize;                  // in scope 0 at $DIR/generator-tiny.rs:18:16: 24:6\n+fn main::{{closure}}#0(_1: std::pin::Pin<&mut [generator@$DIR/generator-tiny.rs:19:16: 25:6 {u8, HasDrop, ()}]>, _2: u8) -> std::ops::GeneratorState<(), ()> {\n+    debug _x => _10;                     // in scope 0 at $DIR/generator-tiny.rs:19:17: 19:19\n+    let mut _0: std::ops::GeneratorState<(), ()>; // return place in scope 0 at $DIR/generator-tiny.rs:19:16: 25:6\n+    let _3: HasDrop;                     // in scope 0 at $DIR/generator-tiny.rs:20:13: 20:15\n+    let mut _4: !;                       // in scope 0 at $DIR/generator-tiny.rs:21:9: 24:10\n+    let mut _5: ();                      // in scope 0 at $DIR/generator-tiny.rs:19:16: 25:6\n+    let _6: u8;                          // in scope 0 at $DIR/generator-tiny.rs:22:13: 22:18\n+    let mut _7: ();                      // in scope 0 at $DIR/generator-tiny.rs:22:13: 22:18\n+    let _8: ();                          // in scope 0 at $DIR/generator-tiny.rs:23:13: 23:21\n+    let mut _9: ();                      // in scope 0 at $DIR/generator-tiny.rs:19:25: 19:25\n+    let _10: u8;                         // in scope 0 at $DIR/generator-tiny.rs:19:17: 19:19\n+    let mut _11: isize;                  // in scope 0 at $DIR/generator-tiny.rs:19:16: 25:6\n     scope 1 {\n-        debug _d => (((*(_1.0: &mut [generator@$DIR/generator-tiny.rs:18:16: 24:6 {u8, HasDrop, ()}])) as variant#3).0: HasDrop); // in scope 1 at $DIR/generator-tiny.rs:19:13: 19:15\n+        debug _d => (((*(_1.0: &mut [generator@$DIR/generator-tiny.rs:19:16: 25:6 {u8, HasDrop, ()}])) as variant#3).0: HasDrop); // in scope 1 at $DIR/generator-tiny.rs:20:13: 20:15\n     }\n \n     bb0: {\n-        _11 = discriminant((*(_1.0: &mut [generator@$DIR/generator-tiny.rs:18:16: 24:6 {u8, HasDrop, ()}]))); // scope 0 at $DIR/generator-tiny.rs:18:16: 24:6\n-        switchInt(move _11) -> [0u32: bb1, 3u32: bb5, otherwise: bb6]; // scope 0 at $DIR/generator-tiny.rs:18:16: 24:6\n+        _11 = discriminant((*(_1.0: &mut [generator@$DIR/generator-tiny.rs:19:16: 25:6 {u8, HasDrop, ()}]))); // scope 0 at $DIR/generator-tiny.rs:19:16: 25:6\n+        switchInt(move _11) -> [0u32: bb1, 3u32: bb5, otherwise: bb6]; // scope 0 at $DIR/generator-tiny.rs:19:16: 25:6\n     }\n \n     bb1: {\n-        _10 = move _2;                   // scope 0 at $DIR/generator-tiny.rs:18:16: 24:6\n-        nop;                             // scope 0 at $DIR/generator-tiny.rs:19:13: 19:15\n-        (((*(_1.0: &mut [generator@$DIR/generator-tiny.rs:18:16: 24:6 {u8, HasDrop, ()}])) as variant#3).0: HasDrop) = HasDrop; // scope 0 at $DIR/generator-tiny.rs:19:18: 19:25\n-        StorageLive(_4);                 // scope 1 at $DIR/generator-tiny.rs:20:9: 23:10\n-        goto -> bb2;                     // scope 1 at $DIR/generator-tiny.rs:20:9: 23:10\n+        _10 = move _2;                   // scope 0 at $DIR/generator-tiny.rs:19:16: 25:6\n+        nop;                             // scope 0 at $DIR/generator-tiny.rs:20:13: 20:15\n+        (((*(_1.0: &mut [generator@$DIR/generator-tiny.rs:19:16: 25:6 {u8, HasDrop, ()}])) as variant#3).0: HasDrop) = HasDrop; // scope 0 at $DIR/generator-tiny.rs:20:18: 20:25\n+        StorageLive(_4);                 // scope 1 at $DIR/generator-tiny.rs:21:9: 24:10\n+        goto -> bb2;                     // scope 1 at $DIR/generator-tiny.rs:21:9: 24:10\n     }\n \n     bb2: {\n-        StorageLive(_6);                 // scope 1 at $DIR/generator-tiny.rs:21:13: 21:18\n-        StorageLive(_7);                 // scope 1 at $DIR/generator-tiny.rs:21:13: 21:18\n-        _7 = ();                         // scope 1 at $DIR/generator-tiny.rs:21:13: 21:18\n-        _0 = std::ops::GeneratorState::<(), ()>::Yielded(move _7); // scope 1 at $DIR/generator-tiny.rs:21:13: 21:18\n-        discriminant((*(_1.0: &mut [generator@$DIR/generator-tiny.rs:18:16: 24:6 {u8, HasDrop, ()}]))) = 3; // scope 1 at $DIR/generator-tiny.rs:21:13: 21:18\n-        return;                          // scope 1 at $DIR/generator-tiny.rs:21:13: 21:18\n+        StorageLive(_6);                 // scope 1 at $DIR/generator-tiny.rs:22:13: 22:18\n+        StorageLive(_7);                 // scope 1 at $DIR/generator-tiny.rs:22:13: 22:18\n+        _7 = ();                         // scope 1 at $DIR/generator-tiny.rs:22:13: 22:18\n+        _0 = std::ops::GeneratorState::<(), ()>::Yielded(move _7); // scope 1 at $DIR/generator-tiny.rs:22:13: 22:18\n+        discriminant((*(_1.0: &mut [generator@$DIR/generator-tiny.rs:19:16: 25:6 {u8, HasDrop, ()}]))) = 3; // scope 1 at $DIR/generator-tiny.rs:22:13: 22:18\n+        return;                          // scope 1 at $DIR/generator-tiny.rs:22:13: 22:18\n     }\n \n     bb3: {\n-        StorageDead(_7);                 // scope 1 at $DIR/generator-tiny.rs:21:17: 21:18\n-        StorageDead(_6);                 // scope 1 at $DIR/generator-tiny.rs:21:18: 21:19\n-        StorageLive(_8);                 // scope 1 at $DIR/generator-tiny.rs:22:13: 22:21\n-        _8 = const callee() -> bb4;      // scope 1 at $DIR/generator-tiny.rs:22:13: 22:21\n+        StorageDead(_7);                 // scope 1 at $DIR/generator-tiny.rs:22:17: 22:18\n+        StorageDead(_6);                 // scope 1 at $DIR/generator-tiny.rs:22:18: 22:19\n+        StorageLive(_8);                 // scope 1 at $DIR/generator-tiny.rs:23:13: 23:21\n+        _8 = const callee() -> bb4;      // scope 1 at $DIR/generator-tiny.rs:23:13: 23:21\n                                          // ty::Const\n                                          // + ty: fn() {callee}\n                                          // + val: Value(Scalar(<ZST>))\n                                          // mir::Constant\n-                                         // + span: $DIR/generator-tiny.rs:22:13: 22:19\n+                                         // + span: $DIR/generator-tiny.rs:23:13: 23:19\n                                          // + literal: Const { ty: fn() {callee}, val: Value(Scalar(<ZST>)) }\n     }\n \n     bb4: {\n-        StorageDead(_8);                 // scope 1 at $DIR/generator-tiny.rs:22:21: 22:22\n-        _5 = const ();                   // scope 1 at $DIR/generator-tiny.rs:20:14: 23:10\n+        StorageDead(_8);                 // scope 1 at $DIR/generator-tiny.rs:23:21: 23:22\n+        _5 = const ();                   // scope 1 at $DIR/generator-tiny.rs:21:14: 24:10\n                                          // ty::Const\n                                          // + ty: ()\n                                          // + val: Value(Scalar(<ZST>))\n                                          // mir::Constant\n-                                         // + span: $DIR/generator-tiny.rs:20:14: 23:10\n+                                         // + span: $DIR/generator-tiny.rs:21:14: 24:10\n                                          // + literal: Const { ty: (), val: Value(Scalar(<ZST>)) }\n-        goto -> bb2;                     // scope 1 at $DIR/generator-tiny.rs:20:9: 23:10\n+        goto -> bb2;                     // scope 1 at $DIR/generator-tiny.rs:21:9: 24:10\n     }\n \n     bb5: {\n-        StorageLive(_4);                 // scope 0 at $DIR/generator-tiny.rs:18:16: 24:6\n-        StorageLive(_6);                 // scope 0 at $DIR/generator-tiny.rs:18:16: 24:6\n-        StorageLive(_7);                 // scope 0 at $DIR/generator-tiny.rs:18:16: 24:6\n-        _6 = move _2;                    // scope 0 at $DIR/generator-tiny.rs:18:16: 24:6\n-        goto -> bb3;                     // scope 0 at $DIR/generator-tiny.rs:18:16: 24:6\n+        StorageLive(_4);                 // scope 0 at $DIR/generator-tiny.rs:19:16: 25:6\n+        StorageLive(_6);                 // scope 0 at $DIR/generator-tiny.rs:19:16: 25:6\n+        StorageLive(_7);                 // scope 0 at $DIR/generator-tiny.rs:19:16: 25:6\n+        _6 = move _2;                    // scope 0 at $DIR/generator-tiny.rs:19:16: 25:6\n+        goto -> bb3;                     // scope 0 at $DIR/generator-tiny.rs:19:16: 25:6\n     }\n \n     bb6: {\n-        unreachable;                     // scope 0 at $DIR/generator-tiny.rs:18:16: 24:6\n+        unreachable;                     // scope 0 at $DIR/generator-tiny.rs:19:16: 25:6\n     }\n }"}]}