{"sha": "ad28c28f469750c062ebf9907f8416f4ccb1ddda", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFkMjhjMjhmNDY5NzUwYzA2MmViZjk5MDdmODQxNmY0Y2NiMWRkZGE=", "commit": {"author": {"name": "Jeffrey Seyfried", "email": "jeffrey.seyfried@gmail.com", "date": "2016-03-08T21:50:01Z"}, "committer": {"name": "Jeffrey Seyfried", "email": "jeffrey.seyfried@gmail.com", "date": "2016-03-08T21:50:20Z"}, "message": "Stop treating a type alias like a module or enum (preventing `use TypeAlias::*`)", "tree": {"sha": "314170bcadb6671a3569d82ececdcc328358664b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/314170bcadb6671a3569d82ececdcc328358664b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ad28c28f469750c062ebf9907f8416f4ccb1ddda", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ad28c28f469750c062ebf9907f8416f4ccb1ddda", "html_url": "https://github.com/rust-lang/rust/commit/ad28c28f469750c062ebf9907f8416f4ccb1ddda", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ad28c28f469750c062ebf9907f8416f4ccb1ddda/comments", "author": {"login": "jseyfried", "id": 8652869, "node_id": "MDQ6VXNlcjg2NTI4Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/8652869?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jseyfried", "html_url": "https://github.com/jseyfried", "followers_url": "https://api.github.com/users/jseyfried/followers", "following_url": "https://api.github.com/users/jseyfried/following{/other_user}", "gists_url": "https://api.github.com/users/jseyfried/gists{/gist_id}", "starred_url": "https://api.github.com/users/jseyfried/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jseyfried/subscriptions", "organizations_url": "https://api.github.com/users/jseyfried/orgs", "repos_url": "https://api.github.com/users/jseyfried/repos", "events_url": "https://api.github.com/users/jseyfried/events{/privacy}", "received_events_url": "https://api.github.com/users/jseyfried/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jseyfried", "id": 8652869, "node_id": "MDQ6VXNlcjg2NTI4Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/8652869?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jseyfried", "html_url": "https://github.com/jseyfried", "followers_url": "https://api.github.com/users/jseyfried/followers", "following_url": "https://api.github.com/users/jseyfried/following{/other_user}", "gists_url": "https://api.github.com/users/jseyfried/gists{/gist_id}", "starred_url": "https://api.github.com/users/jseyfried/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jseyfried/subscriptions", "organizations_url": "https://api.github.com/users/jseyfried/orgs", "repos_url": "https://api.github.com/users/jseyfried/repos", "events_url": "https://api.github.com/users/jseyfried/events{/privacy}", "received_events_url": "https://api.github.com/users/jseyfried/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8b7c3f20e83de20518abb879f7a0e41b6e93414f", "url": "https://api.github.com/repos/rust-lang/rust/commits/8b7c3f20e83de20518abb879f7a0e41b6e93414f", "html_url": "https://github.com/rust-lang/rust/commit/8b7c3f20e83de20518abb879f7a0e41b6e93414f"}], "stats": {"total": 8, "additions": 3, "deletions": 5}, "files": [{"sha": "e1eead8547e82cef8d372f2a64584f80d7437b1f", "filename": "src/librustc_resolve/build_reduced_graph.rs", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/ad28c28f469750c062ebf9907f8416f4ccb1ddda/src%2Flibrustc_resolve%2Fbuild_reduced_graph.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ad28c28f469750c062ebf9907f8416f4ccb1ddda/src%2Flibrustc_resolve%2Fbuild_reduced_graph.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Fbuild_reduced_graph.rs?ref=ad28c28f469750c062ebf9907f8416f4ccb1ddda", "patch": "@@ -331,10 +331,8 @@ impl<'a, 'b:'a, 'tcx:'b> GraphBuilder<'a, 'b, 'tcx> {\n \n             // These items live in the type namespace.\n             ItemTy(..) => {\n-                let parent_link = ModuleParentLink(parent, name);\n                 let def = Def::TyAlias(self.ast_map.local_def_id(item.id));\n-                let module = self.new_module(parent_link, Some(def), false, is_public);\n-                self.define(parent, name, TypeNS, (module, sp));\n+                self.define(parent, name, TypeNS, (def, sp, modifiers));\n                 parent\n             }\n \n@@ -505,7 +503,7 @@ impl<'a, 'b:'a, 'tcx:'b> GraphBuilder<'a, 'b, 'tcx> {\n         }\n \n         match def {\n-            Def::Mod(_) | Def::ForeignMod(_) | Def::Enum(..) | Def::TyAlias(..) => {\n+            Def::Mod(_) | Def::ForeignMod(_) | Def::Enum(..) => {\n                 debug!(\"(building reduced graph for external crate) building module {} {}\",\n                        final_ident,\n                        is_public);\n@@ -562,7 +560,7 @@ impl<'a, 'b:'a, 'tcx:'b> GraphBuilder<'a, 'b, 'tcx> {\n                 let module = self.new_module(parent_link, Some(def), true, is_public);\n                 self.try_define(new_parent, name, TypeNS, (module, DUMMY_SP));\n             }\n-            Def::AssociatedTy(..) => {\n+            Def::TyAlias(..) | Def::AssociatedTy(..) => {\n                 debug!(\"(building reduced graph for external crate) building type {}\",\n                        final_ident);\n                 self.try_define(new_parent, name, TypeNS, (def, DUMMY_SP, modifiers));"}]}