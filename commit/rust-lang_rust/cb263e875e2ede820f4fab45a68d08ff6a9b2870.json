{"sha": "cb263e875e2ede820f4fab45a68d08ff6a9b2870", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNiMjYzZTg3NWUyZWRlODIwZjRmYWI0NWE2OGQwOGZmNmE5YjI4NzA=", "commit": {"author": {"name": "Daniel Micay", "email": "danielmicay@gmail.com", "date": "2014-01-28T19:59:28Z"}, "committer": {"name": "Daniel Micay", "email": "danielmicay@gmail.com", "date": "2014-01-29T21:35:05Z"}, "message": "enable fp-elim when debug info is disabled\n\nThis can almost be fully disabled, as it no longer breaks retrieving a\nbacktrace on OS X as verified by @alexcrichton. However, it still\nbreaks retrieving the values of parameters. This should be fixable in\nthe future via a proper location list...\n\nCloses #7477", "tree": {"sha": "f0381ddc6044537da9461d400bd502efa73a1203", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f0381ddc6044537da9461d400bd502efa73a1203"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/cb263e875e2ede820f4fab45a68d08ff6a9b2870", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/cb263e875e2ede820f4fab45a68d08ff6a9b2870", "html_url": "https://github.com/rust-lang/rust/commit/cb263e875e2ede820f4fab45a68d08ff6a9b2870", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/cb263e875e2ede820f4fab45a68d08ff6a9b2870/comments", "author": {"login": "thestinger", "id": 1505226, "node_id": "MDQ6VXNlcjE1MDUyMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thestinger", "html_url": "https://github.com/thestinger", "followers_url": "https://api.github.com/users/thestinger/followers", "following_url": "https://api.github.com/users/thestinger/following{/other_user}", "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions", "organizations_url": "https://api.github.com/users/thestinger/orgs", "repos_url": "https://api.github.com/users/thestinger/repos", "events_url": "https://api.github.com/users/thestinger/events{/privacy}", "received_events_url": "https://api.github.com/users/thestinger/received_events", "type": "User", "site_admin": false}, "committer": {"login": "thestinger", "id": 1505226, "node_id": "MDQ6VXNlcjE1MDUyMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thestinger", "html_url": "https://github.com/thestinger", "followers_url": "https://api.github.com/users/thestinger/followers", "following_url": "https://api.github.com/users/thestinger/following{/other_user}", "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions", "organizations_url": "https://api.github.com/users/thestinger/orgs", "repos_url": "https://api.github.com/users/thestinger/repos", "events_url": "https://api.github.com/users/thestinger/events{/privacy}", "received_events_url": "https://api.github.com/users/thestinger/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "17c42db6d18dc52335d734cdea01af5c0ff0a8ce", "url": "https://api.github.com/repos/rust-lang/rust/commits/17c42db6d18dc52335d734cdea01af5c0ff0a8ce", "html_url": "https://github.com/rust-lang/rust/commit/17c42db6d18dc52335d734cdea01af5c0ff0a8ce"}], "stats": {"total": 17, "additions": 10, "deletions": 7}, "files": [{"sha": "bd5494ba4cd77521046f7d23b76584dadc6032e1", "filename": "src/librustc/back/link.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/cb263e875e2ede820f4fab45a68d08ff6a9b2870/src%2Flibrustc%2Fback%2Flink.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cb263e875e2ede820f4fab45a68d08ff6a9b2870/src%2Flibrustc%2Fback%2Flink.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fback%2Flink.rs?ref=cb263e875e2ede820f4fab45a68d08ff6a9b2870", "patch": "@@ -128,6 +128,9 @@ pub mod write {\n             };\n             let use_softfp = sess.opts.debugging_opts & session::USE_SOFTFP != 0;\n \n+            // FIXME: #11906: Omitting frame pointers breaks retrieving the value of a parameter.\n+            let no_fp_elim = sess.opts.debuginfo;\n+\n             let tm = sess.targ_cfg.target_strs.target_triple.with_c_str(|T| {\n                 sess.opts.target_cpu.with_c_str(|CPU| {\n                     sess.opts.target_feature.with_c_str(|Features| {\n@@ -137,7 +140,8 @@ pub mod write {\n                             lib::llvm::RelocPIC,\n                             OptLevel,\n                             true,\n-                            use_softfp\n+                            use_softfp,\n+                            no_fp_elim\n                         )\n                     })\n                 })"}, {"sha": "3ed59c0195eaca9b551a298c3954582e689b0042", "filename": "src/librustc/lib/llvm.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/cb263e875e2ede820f4fab45a68d08ff6a9b2870/src%2Flibrustc%2Flib%2Fllvm.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cb263e875e2ede820f4fab45a68d08ff6a9b2870/src%2Flibrustc%2Flib%2Fllvm.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Flib%2Fllvm.rs?ref=cb263e875e2ede820f4fab45a68d08ff6a9b2870", "patch": "@@ -1728,7 +1728,8 @@ pub mod llvm {\n                                            Reloc: RelocMode,\n                                            Level: CodeGenOptLevel,\n                                            EnableSegstk: bool,\n-                                           UseSoftFP: bool) -> TargetMachineRef;\n+                                           UseSoftFP: bool,\n+                                           NoFramePointerElim: bool) -> TargetMachineRef;\n         pub fn LLVMRustDisposeTargetMachine(T: TargetMachineRef);\n         pub fn LLVMRustAddAnalysisPasses(T: TargetMachineRef,\n                                          PM: PassManagerRef,"}, {"sha": "2bc96d9f0bf718bad2b8670a2802b7dbb29643da", "filename": "src/rustllvm/PassWrapper.cpp", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/cb263e875e2ede820f4fab45a68d08ff6a9b2870/src%2Frustllvm%2FPassWrapper.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/cb263e875e2ede820f4fab45a68d08ff6a9b2870/src%2Frustllvm%2FPassWrapper.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustllvm%2FPassWrapper.cpp?ref=cb263e875e2ede820f4fab45a68d08ff6a9b2870", "patch": "@@ -68,7 +68,8 @@ LLVMRustCreateTargetMachine(const char *triple,\n                             Reloc::Model RM,\n                             CodeGenOpt::Level OptLevel,\n                             bool EnableSegmentedStacks,\n-                            bool UseSoftFloat) {\n+                            bool UseSoftFloat,\n+                            bool NoFramePointerElim) {\n     std::string Error;\n     Triple Trip(Triple::normalize(triple));\n     const llvm::Target *TheTarget = TargetRegistry::lookupTarget(Trip.getTriple(),\n@@ -79,7 +80,7 @@ LLVMRustCreateTargetMachine(const char *triple,\n     }\n \n     TargetOptions Options;\n-    Options.NoFramePointerElim = true;\n+    Options.NoFramePointerElim = NoFramePointerElim;\n     Options.EnableSegmentedStacks = EnableSegmentedStacks;\n     Options.FloatABIType = FloatABI::Default;\n     Options.UseSoftFloat = UseSoftFloat;"}, {"sha": "da2d4e09fc67f1521cc64ebcc221afa058ff7470", "filename": "src/test/debug-info/function-prologue-stepping-no-split-stack.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/cb263e875e2ede820f4fab45a68d08ff6a9b2870/src%2Ftest%2Fdebug-info%2Ffunction-prologue-stepping-no-split-stack.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cb263e875e2ede820f4fab45a68d08ff6a9b2870/src%2Ftest%2Fdebug-info%2Ffunction-prologue-stepping-no-split-stack.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fdebug-info%2Ffunction-prologue-stepping-no-split-stack.rs?ref=cb263e875e2ede820f4fab45a68d08ff6a9b2870", "patch": "@@ -244,6 +244,3 @@ fn main() {\n     while_expr(40, 41, 42);\n     loop_expr(43, 44, 45);\n }\n-\n-\n-"}]}