{"sha": "782b9f5c0ab27c3b4dd2689b0cb1f534b6a1498d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc4MmI5ZjVjMGFiMjdjM2I0ZGQyNjg5YjBjYjFmNTM0YjZhMTQ5OGQ=", "commit": {"author": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2017-12-06T21:18:43Z"}, "committer": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2017-12-07T10:28:02Z"}, "message": "escape-argument: improve comment per arielb1's suggestion", "tree": {"sha": "8bba9054d45f37987ed4ee439857087385ce7388", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8bba9054d45f37987ed4ee439857087385ce7388"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/782b9f5c0ab27c3b4dd2689b0cb1f534b6a1498d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/782b9f5c0ab27c3b4dd2689b0cb1f534b6a1498d", "html_url": "https://github.com/rust-lang/rust/commit/782b9f5c0ab27c3b4dd2689b0cb1f534b6a1498d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/782b9f5c0ab27c3b4dd2689b0cb1f534b6a1498d/comments", "author": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dac59ac93afa3ca13adc1bab5eaa9bd2445ee868", "url": "https://api.github.com/repos/rust-lang/rust/commits/dac59ac93afa3ca13adc1bab5eaa9bd2445ee868", "html_url": "https://github.com/rust-lang/rust/commit/dac59ac93afa3ca13adc1bab5eaa9bd2445ee868"}], "stats": {"total": 30, "additions": 16, "deletions": 14}, "files": [{"sha": "1d8a916345e2227a7599d007443943c2727b7ab6", "filename": "src/test/ui/nll/closure-requirements/escape-argument.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/782b9f5c0ab27c3b4dd2689b0cb1f534b6a1498d/src%2Ftest%2Fui%2Fnll%2Fclosure-requirements%2Fescape-argument.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b9f5c0ab27c3b4dd2689b0cb1f534b6a1498d/src%2Ftest%2Fui%2Fnll%2Fclosure-requirements%2Fescape-argument.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fnll%2Fclosure-requirements%2Fescape-argument.rs?ref=782b9f5c0ab27c3b4dd2689b0cb1f534b6a1498d", "patch": "@@ -17,8 +17,10 @@\n // enough to store `y`.\n //\n // The error is reported in the caller: invoking the closure links the\n-// lifetime of the borrow that is given as `y` and forces it to live\n-// too long.\n+// lifetime of the variable that is given as `y` (via subtyping) and\n+// thus forces the corresponding borrow to live too long. This is\n+// basically checking that the MIR type checker correctly enforces the\n+// closure signature.\n \n // compile-flags:-Znll -Zborrowck=mir -Zverbose\n "}, {"sha": "e5c7139573eb958af42422cbf4db1d187bf88c7d", "filename": "src/test/ui/nll/closure-requirements/escape-argument.stderr", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/782b9f5c0ab27c3b4dd2689b0cb1f534b6a1498d/src%2Ftest%2Fui%2Fnll%2Fclosure-requirements%2Fescape-argument.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/782b9f5c0ab27c3b4dd2689b0cb1f534b6a1498d/src%2Ftest%2Fui%2Fnll%2Fclosure-requirements%2Fescape-argument.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fnll%2Fclosure-requirements%2Fescape-argument.stderr?ref=782b9f5c0ab27c3b4dd2689b0cb1f534b6a1498d", "patch": "@@ -1,7 +1,7 @@\n note: External requirements\n-  --> $DIR/escape-argument.rs:34:38\n+  --> $DIR/escape-argument.rs:36:38\n    |\n-34 |         let mut closure = expect_sig(|p, y| *p = y);\n+36 |         let mut closure = expect_sig(|p, y| *p = y);\n    |                                      ^^^^^^^^^^^^^\n    |\n    = note: defining type: DefId(0/1:9 ~ escape_argument[317d]::test[0]::{{closure}}[0]) with closure substs [\n@@ -11,26 +11,26 @@ note: External requirements\n    = note: number of external vids: 1\n \n note: No external requirements\n-  --> $DIR/escape-argument.rs:28:1\n+  --> $DIR/escape-argument.rs:30:1\n    |\n-28 | / fn test() {\n-29 | |     let x = 44;\n-30 | |     let mut p = &x;\n-31 | |\n+30 | / fn test() {\n+31 | |     let x = 44;\n+32 | |     let mut p = &x;\n+33 | |\n ...  |\n-39 | |     deref(p);\n-40 | | }\n+41 | |     deref(p);\n+42 | | }\n    | |_^\n    |\n    = note: defining type: DefId(0/0:3 ~ escape_argument[317d]::test[0]) with substs []\n \n error[E0597]: borrowed value does not live long enough\n-  --> $DIR/escape-argument.rs:36:6\n+  --> $DIR/escape-argument.rs:38:6\n    |\n-33 |         let y = 22;\n+35 |         let y = 22;\n    |             - temporary value created here\n ...\n-36 |     }\n+38 |     }\n    |      ^ temporary value dropped here while still borrowed\n    |\n    = note: consider using a `let` binding to increase its lifetime"}]}