{"sha": "f7cf3b5503b556f20859da6fe39a4d29dc3af095", "node_id": "C_kwDOAAsO6NoAKGY3Y2YzYjU1MDNiNTU2ZjIwODU5ZGE2ZmUzOWE0ZDI5ZGMzYWYwOTU", "commit": {"author": {"name": "Vladimir Serov", "email": "me@cab404.ru", "date": "2022-03-15T03:52:03Z"}, "committer": {"name": "Vladimir Serov", "email": "me@cab404.ru", "date": "2022-03-15T04:11:24Z"}, "message": "editors/code: fix crash due to missing ID= field\n\nAssuming ID=linux in isNixOs by default. You can get away with\ndefault \"\", but why do that if there's a default value in spec?)\n\nAlso removed toLowerCase \u2014 it really shouldn't be needed.\nFixes #11709", "tree": {"sha": "75d97ed05835c9710ea1177497b928419e77653b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/75d97ed05835c9710ea1177497b928419e77653b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f7cf3b5503b556f20859da6fe39a4d29dc3af095", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTV9cwcBrkXFFEK+wYIqpcR+M1AzwUCYjASigAKCRAIqpcR+M1A\nzyBEAQDUfzUHHADtGz+Yk6OmVNZq8xyZckbjZGtkeAo39E73/wEAlTW8duVJ0rNl\nTfKvM7o8hY3cA3o17mBt0i9SjncBSgU=\n=2Cjf\n-----END PGP SIGNATURE-----", "payload": "tree 75d97ed05835c9710ea1177497b928419e77653b\nparent 683fea4de4f0e994b585823f99d42ad469749ea5\nauthor Vladimir Serov <me@cab404.ru> 1647316323 +0300\ncommitter Vladimir Serov <me@cab404.ru> 1647317484 +0300\n\neditors/code: fix crash due to missing ID= field\n\nAssuming ID=linux in isNixOs by default. You can get away with\ndefault \"\", but why do that if there's a default value in spec?)\n\nAlso removed toLowerCase \u2014 it really shouldn't be needed.\nFixes #11709\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f7cf3b5503b556f20859da6fe39a4d29dc3af095", "html_url": "https://github.com/rust-lang/rust/commit/f7cf3b5503b556f20859da6fe39a4d29dc3af095", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f7cf3b5503b556f20859da6fe39a4d29dc3af095/comments", "author": {"login": "cab404", "id": 6453661, "node_id": "MDQ6VXNlcjY0NTM2NjE=", "avatar_url": "https://avatars.githubusercontent.com/u/6453661?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cab404", "html_url": "https://github.com/cab404", "followers_url": "https://api.github.com/users/cab404/followers", "following_url": "https://api.github.com/users/cab404/following{/other_user}", "gists_url": "https://api.github.com/users/cab404/gists{/gist_id}", "starred_url": "https://api.github.com/users/cab404/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cab404/subscriptions", "organizations_url": "https://api.github.com/users/cab404/orgs", "repos_url": "https://api.github.com/users/cab404/repos", "events_url": "https://api.github.com/users/cab404/events{/privacy}", "received_events_url": "https://api.github.com/users/cab404/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cab404", "id": 6453661, "node_id": "MDQ6VXNlcjY0NTM2NjE=", "avatar_url": "https://avatars.githubusercontent.com/u/6453661?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cab404", "html_url": "https://github.com/cab404", "followers_url": "https://api.github.com/users/cab404/followers", "following_url": "https://api.github.com/users/cab404/following{/other_user}", "gists_url": "https://api.github.com/users/cab404/gists{/gist_id}", "starred_url": "https://api.github.com/users/cab404/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cab404/subscriptions", "organizations_url": "https://api.github.com/users/cab404/orgs", "repos_url": "https://api.github.com/users/cab404/repos", "events_url": "https://api.github.com/users/cab404/events{/privacy}", "received_events_url": "https://api.github.com/users/cab404/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "683fea4de4f0e994b585823f99d42ad469749ea5", "url": "https://api.github.com/repos/rust-lang/rust/commits/683fea4de4f0e994b585823f99d42ad469749ea5", "html_url": "https://github.com/rust-lang/rust/commit/683fea4de4f0e994b585823f99d42ad469749ea5"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "06e5c1185d1de012ff785a3f88712cc223620cf4", "filename": "editors/code/src/main.ts", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f7cf3b5503b556f20859da6fe39a4d29dc3af095/editors%2Fcode%2Fsrc%2Fmain.ts", "raw_url": "https://github.com/rust-lang/rust/raw/f7cf3b5503b556f20859da6fe39a4d29dc3af095/editors%2Fcode%2Fsrc%2Fmain.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Fmain.ts?ref=f7cf3b5503b556f20859da6fe39a4d29dc3af095", "patch": "@@ -269,8 +269,8 @@ function serverPath(config: Config): string | null {\n async function isNixOs(): Promise<boolean> {\n     try {\n         const contents = (await vscode.workspace.fs.readFile(vscode.Uri.file(\"/etc/os-release\"))).toString();\n-        const idString = contents.split('\\n').find((a) => a.startsWith(\"ID=\"));\n-        return idString?.toLowerCase()?.indexOf(\"nixos\") !== -1;\n+        const idString = contents.split('\\n').find((a) => a.startsWith(\"ID=\")) || \"ID=linux\";\n+        return idString.indexOf(\"nixos\") !== -1;\n     } catch {\n         return false;\n     }"}]}