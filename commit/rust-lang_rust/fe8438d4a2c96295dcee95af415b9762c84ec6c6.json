{"sha": "fe8438d4a2c96295dcee95af415b9762c84ec6c6", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZlODQzOGQ0YTJjOTYyOTVkY2VlOTVhZjQxNWI5NzYyYzg0ZWM2YzY=", "commit": {"author": {"name": "Josh Triplett", "email": "josh@joshtriplett.org", "date": "2016-09-03T22:29:16Z"}, "committer": {"name": "Josh Triplett", "email": "josh@joshtriplett.org", "date": "2016-09-03T22:29:16Z"}, "message": "Fix \"field is never used\" warning to take unions into account\n\nRather than saying \"struct or union\" or adding logic to determine the\ntype of the item, just change the message to \"field is never used\",\ndropping the \"struct\".\n\nUpdate tests accordingly.", "tree": {"sha": "7dab201a420a3b8ebc7407e048426dc13274d3a2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7dab201a420a3b8ebc7407e048426dc13274d3a2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fe8438d4a2c96295dcee95af415b9762c84ec6c6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fe8438d4a2c96295dcee95af415b9762c84ec6c6", "html_url": "https://github.com/rust-lang/rust/commit/fe8438d4a2c96295dcee95af415b9762c84ec6c6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fe8438d4a2c96295dcee95af415b9762c84ec6c6/comments", "author": {"login": "joshtriplett", "id": 162737, "node_id": "MDQ6VXNlcjE2MjczNw==", "avatar_url": "https://avatars.githubusercontent.com/u/162737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joshtriplett", "html_url": "https://github.com/joshtriplett", "followers_url": "https://api.github.com/users/joshtriplett/followers", "following_url": "https://api.github.com/users/joshtriplett/following{/other_user}", "gists_url": "https://api.github.com/users/joshtriplett/gists{/gist_id}", "starred_url": "https://api.github.com/users/joshtriplett/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joshtriplett/subscriptions", "organizations_url": "https://api.github.com/users/joshtriplett/orgs", "repos_url": "https://api.github.com/users/joshtriplett/repos", "events_url": "https://api.github.com/users/joshtriplett/events{/privacy}", "received_events_url": "https://api.github.com/users/joshtriplett/received_events", "type": "User", "site_admin": false}, "committer": {"login": "joshtriplett", "id": 162737, "node_id": "MDQ6VXNlcjE2MjczNw==", "avatar_url": "https://avatars.githubusercontent.com/u/162737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joshtriplett", "html_url": "https://github.com/joshtriplett", "followers_url": "https://api.github.com/users/joshtriplett/followers", "following_url": "https://api.github.com/users/joshtriplett/following{/other_user}", "gists_url": "https://api.github.com/users/joshtriplett/gists{/gist_id}", "starred_url": "https://api.github.com/users/joshtriplett/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joshtriplett/subscriptions", "organizations_url": "https://api.github.com/users/joshtriplett/orgs", "repos_url": "https://api.github.com/users/joshtriplett/repos", "events_url": "https://api.github.com/users/joshtriplett/events{/privacy}", "received_events_url": "https://api.github.com/users/joshtriplett/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d748fa6ecccf6f5b4c7ae4abee0a2d206b165de2", "url": "https://api.github.com/repos/rust-lang/rust/commits/d748fa6ecccf6f5b4c7ae4abee0a2d206b165de2", "html_url": "https://github.com/rust-lang/rust/commit/d748fa6ecccf6f5b4c7ae4abee0a2d206b165de2"}], "stats": {"total": 12, "additions": 6, "deletions": 6}, "files": [{"sha": "80d45def960d4ab331f6aa41264ab5aa1060dde9", "filename": "src/librustc/middle/dead.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/fe8438d4a2c96295dcee95af415b9762c84ec6c6/src%2Flibrustc%2Fmiddle%2Fdead.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fe8438d4a2c96295dcee95af415b9762c84ec6c6/src%2Flibrustc%2Fmiddle%2Fdead.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fdead.rs?ref=fe8438d4a2c96295dcee95af415b9762c84ec6c6", "patch": "@@ -548,7 +548,7 @@ impl<'a, 'tcx, 'v> Visitor<'v> for DeadVisitor<'a, 'tcx> {\n     fn visit_struct_field(&mut self, field: &hir::StructField) {\n         if self.should_warn_about_field(&field) {\n             self.warn_dead_code(field.id, field.span,\n-                                field.name, \"struct field\");\n+                                field.name, \"field\");\n         }\n \n         intravisit::walk_struct_field(self, field);"}, {"sha": "3df089fc2004864a0d3cd88ce8c6dfb97174447f", "filename": "src/test/compile-fail/lint-dead-code-4.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/fe8438d4a2c96295dcee95af415b9762c84ec6c6/src%2Ftest%2Fcompile-fail%2Flint-dead-code-4.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fe8438d4a2c96295dcee95af415b9762c84ec6c6/src%2Ftest%2Fcompile-fail%2Flint-dead-code-4.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Flint-dead-code-4.rs?ref=fe8438d4a2c96295dcee95af415b9762c84ec6c6", "patch": "@@ -14,7 +14,7 @@\n \n struct Foo {\n     x: usize,\n-    b: bool, //~ ERROR: struct field is never used\n+    b: bool, //~ ERROR: field is never used\n }\n \n fn field_read(f: Foo) -> usize {\n@@ -46,8 +46,8 @@ enum IJK {\n     I, //~ ERROR variant is never used\n     J {\n         a: String,\n-        b: i32, //~ ERROR struct field is never used\n-        c: i32, //~ ERROR struct field is never used\n+        b: i32, //~ ERROR field is never used\n+        c: i32, //~ ERROR field is never used\n     },\n     K //~ ERROR variant is never used\n \n@@ -68,9 +68,9 @@ fn field_match_in_patterns(b: XYZ) -> String {\n }\n \n struct Bar {\n-    x: usize, //~ ERROR: struct field is never used\n+    x: usize, //~ ERROR: field is never used\n     b: bool,\n-    c: bool, //~ ERROR: struct field is never used\n+    c: bool, //~ ERROR: field is never used\n     _guard: ()\n }\n "}]}