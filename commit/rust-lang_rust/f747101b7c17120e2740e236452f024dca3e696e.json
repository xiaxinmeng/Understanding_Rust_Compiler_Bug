{"sha": "f747101b7c17120e2740e236452f024dca3e696e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY3NDcxMDFiN2MxNzEyMGUyNzQwZTIzNjQ1MmYwMjRkY2EzZTY5NmU=", "commit": {"author": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2010-10-18T23:03:22Z"}, "committer": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2010-10-18T23:03:22Z"}, "message": "Rewrite session formatting to use #fmt extension.", "tree": {"sha": "67e0d4025e7bc73d9f3d6e923a1469865846771d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/67e0d4025e7bc73d9f3d6e923a1469865846771d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f747101b7c17120e2740e236452f024dca3e696e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f747101b7c17120e2740e236452f024dca3e696e", "html_url": "https://github.com/rust-lang/rust/commit/f747101b7c17120e2740e236452f024dca3e696e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f747101b7c17120e2740e236452f024dca3e696e/comments", "author": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "committer": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "68321b0de87cd40664f490a53a225e4058dd1739", "url": "https://api.github.com/repos/rust-lang/rust/commits/68321b0de87cd40664f490a53a225e4058dd1739", "html_url": "https://github.com/rust-lang/rust/commit/68321b0de87cd40664f490a53a225e4058dd1739"}], "stats": {"total": 26, "additions": 7, "deletions": 19}, "files": [{"sha": "831c643929f39c4151010296dbe787e4efb2cf4e", "filename": "src/comp/driver/session.rs", "status": "modified", "additions": 7, "deletions": 19, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/f747101b7c17120e2740e236452f024dca3e696e/src%2Fcomp%2Fdriver%2Fsession.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f747101b7c17120e2740e236452f024dca3e696e/src%2Fcomp%2Fdriver%2Fsession.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fdriver%2Fsession.rs?ref=f747101b7c17120e2740e236452f024dca3e696e", "patch": "@@ -3,33 +3,21 @@ import std._uint;\n \n obj session() {\n     fn span_err(span sp, str msg) {\n-        let str s =  sp.filename;\n-        s += ':' as u8;\n-        // We really need #fmt soon!\n-        s += _uint.to_str(sp.lo.line, 10u);\n-        s += ':' as u8;\n-        s += _uint.to_str(sp.lo.col, 10u);\n-        s += ':' as u8;\n-        s += _uint.to_str(sp.hi.line, 10u);\n-        s += ':' as u8;\n-        s += _uint.to_str(sp.hi.col, 10u);\n-        s += \": error: \";\n-        s += msg;\n-        log s;\n+        log #fmt(\"%s:%u:%u:%u:%u: error: %s\",\n+                 sp.filename,\n+                 sp.lo.line, sp.lo.col,\n+                 sp.hi.line, sp.hi.col,\n+                 msg);\n         fail;\n     }\n \n     fn err(str msg) {\n-        let str s = \"error: \";\n-        s += msg;\n-        log s;\n+        log #fmt(\"error: %s\", msg);\n         fail;\n     }\n \n     fn unimpl(str msg) {\n-        let str s = \"error: unimplemented \";\n-        s += msg;\n-        log s;\n+        log #fmt(\"error: unimplemented %s\", msg);\n         fail;\n     }\n }"}]}