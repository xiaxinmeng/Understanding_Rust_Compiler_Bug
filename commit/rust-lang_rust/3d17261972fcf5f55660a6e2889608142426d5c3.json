{"sha": "3d17261972fcf5f55660a6e2889608142426d5c3", "node_id": "C_kwDOAAsO6NoAKDNkMTcyNjE5NzJmY2Y1ZjU1NjYwYTZlMjg4OTYwODE0MjQyNmQ1YzM", "commit": {"author": {"name": "Lukas Wirth", "email": "lukastw97@gmail.com", "date": "2022-04-27T15:51:44Z"}, "committer": {"name": "Lukas Wirth", "email": "lukastw97@gmail.com", "date": "2022-05-01T17:57:08Z"}, "message": "Adjust signature info and enum variant lenses", "tree": {"sha": "d62ab92a3ad5f909c86a03703309904b94cbb0e4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d62ab92a3ad5f909c86a03703309904b94cbb0e4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3d17261972fcf5f55660a6e2889608142426d5c3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3d17261972fcf5f55660a6e2889608142426d5c3", "html_url": "https://github.com/rust-lang/rust/commit/3d17261972fcf5f55660a6e2889608142426d5c3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3d17261972fcf5f55660a6e2889608142426d5c3/comments", "author": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b84f3cc98f391167e91d9ed4cebd61ea34edcede", "url": "https://api.github.com/repos/rust-lang/rust/commits/b84f3cc98f391167e91d9ed4cebd61ea34edcede", "html_url": "https://github.com/rust-lang/rust/commit/b84f3cc98f391167e91d9ed4cebd61ea34edcede"}], "stats": {"total": 55, "additions": 39, "deletions": 16}, "files": [{"sha": "7dc25c1e6d720dba536edb481c4bbe8727ff9bc5", "filename": "crates/rust-analyzer/src/config.rs", "status": "modified", "additions": 20, "deletions": 5, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/3d17261972fcf5f55660a6e2889608142426d5c3/crates%2Frust-analyzer%2Fsrc%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3d17261972fcf5f55660a6e2889608142426d5c3/crates%2Frust-analyzer%2Fsrc%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fconfig.rs?ref=3d17261972fcf5f55660a6e2889608142426d5c3", "patch": "@@ -272,7 +272,7 @@ config_data! {\n         lens_references_adt_enable: bool = \"false\",\n         /// Whether to show `References` lens for Enum Variants.\n         /// Only applies when `#rust-analyzer.lens.enable#` is set.\n-        lens_references_adt_variant_enable: bool = \"false\",\n+        lens_references_enumVariant_enable: bool = \"false\",\n         /// Whether to show `Method References` lens. Only applies when\n         /// `#rust-analyzer.lens.enable#` is set.\n         lens_references_method_enable: bool = \"false\",\n@@ -346,10 +346,10 @@ config_data! {\n         /// their contents.\n         semanticHighlighting_strings_enable: bool = \"true\",\n \n+        /// Show full signature of the callable. Only shows parameters if disabled.\n+        signatureInfo_detail: SignatureDetail                           = \"\\\"full\\\"\",\n         /// Show documentation.\n         signatureInfo_documentation_enable: bool                       = \"true\",\n-        /// Show full signature of the callable. Only shows parameters if disabled.\n-        signatureInfo_signature_enable: bool                           = \"true\",\n \n         /// Workspace symbol search kind.\n         workspace_symbol_search_kind: WorkspaceSymbolSearchKindDef = \"\\\"only_types\\\"\",\n@@ -1041,7 +1041,7 @@ impl Config {\n \n     pub fn call_info(&self) -> CallInfoConfig {\n         CallInfoConfig {\n-            params_only: self.data.signatureInfo_signature_enable,\n+            params_only: matches!(self.data.signatureInfo_detail, SignatureDetail::Parameters),\n             docs: self.data.signatureInfo_documentation_enable,\n         }\n     }\n@@ -1055,7 +1055,7 @@ impl Config {\n             refs_adt: self.data.lens_enable && self.data.lens_references_adt_enable,\n             refs_trait: self.data.lens_enable && self.data.lens_references_trait_enable,\n             enum_variant_refs: self.data.lens_enable\n-                && self.data.lens_references_adt_variant_enable,\n+                && self.data.lens_references_enumVariant_enable,\n         }\n     }\n \n@@ -1365,6 +1365,13 @@ enum WorkspaceSymbolSearchScopeDef {\n     WorkspaceAndDependencies,\n }\n \n+#[derive(Deserialize, Debug, Clone)]\n+#[serde(rename_all = \"snake_case\")]\n+enum SignatureDetail {\n+    Full,\n+    Parameters,\n+}\n+\n #[derive(Deserialize, Debug, Clone)]\n #[serde(rename_all = \"snake_case\")]\n enum WorkspaceSymbolSearchKindDef {\n@@ -1637,6 +1644,14 @@ fn field_props(field: &str, ty: &str, doc: &[&str], default: &str) -> serde_json\n                 \"Add call parentheses\",\n             ],\n         },\n+        \"SignatureDetail\" => set! {\n+            \"type\": \"string\",\n+            \"enum\": [\"full\", \"parameters\"],\n+            \"enumDescriptions\": [\n+                \"Show the entire signature.\",\n+                \"Show only the parameters.\"\n+            ],\n+        },\n         _ => panic!(\"missing entry for {}: {}\", ty, default),\n     }\n "}, {"sha": "ab9f7db884764240366f1ecf293a697843bb3abc", "filename": "docs/user/generated_config.adoc", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/3d17261972fcf5f55660a6e2889608142426d5c3/docs%2Fuser%2Fgenerated_config.adoc", "raw_url": "https://github.com/rust-lang/rust/raw/3d17261972fcf5f55660a6e2889608142426d5c3/docs%2Fuser%2Fgenerated_config.adoc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/docs%2Fuser%2Fgenerated_config.adoc?ref=3d17261972fcf5f55660a6e2889608142426d5c3", "patch": "@@ -413,7 +413,7 @@ Whether to show `Implementations` lens. Only applies when\n Whether to show `References` lens for Struct, Enum, and Union.\n Only applies when `#rust-analyzer.lens.enable#` is set.\n --\n-[[rust-analyzer.lens.references.adt.variant.enable]]rust-analyzer.lens.references.adt.variant.enable (default: `false`)::\n+[[rust-analyzer.lens.references.enumVariant.enable]]rust-analyzer.lens.references.enumVariant.enable (default: `false`)::\n +\n --\n Whether to show `References` lens for Enum Variants.\n@@ -539,15 +539,15 @@ In some editors (e.g. vscode) semantic tokens override other highlighting gramma\n By disabling semantic tokens for strings, other grammars can be used to highlight\n their contents.\n --\n-[[rust-analyzer.signatureInfo.documentation.enable]]rust-analyzer.signatureInfo.documentation.enable (default: `true`)::\n+[[rust-analyzer.signatureInfo.detail]]rust-analyzer.signatureInfo.detail (default: `\"full\"`)::\n +\n --\n-Show documentation.\n+Show full signature of the callable. Only shows parameters if disabled.\n --\n-[[rust-analyzer.signatureInfo.signature.enable]]rust-analyzer.signatureInfo.signature.enable (default: `true`)::\n+[[rust-analyzer.signatureInfo.documentation.enable]]rust-analyzer.signatureInfo.documentation.enable (default: `true`)::\n +\n --\n-Show full signature of the callable. Only shows parameters if disabled.\n+Show documentation.\n --\n [[rust-analyzer.workspace.symbol.search.kind]]rust-analyzer.workspace.symbol.search.kind (default: `\"only_types\"`)::\n +"}, {"sha": "df5d9b360906879e6ed1e9f2ecb1ccd02634ca0c", "filename": "editors/code/package.json", "status": "modified", "additions": 14, "deletions": 6, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/3d17261972fcf5f55660a6e2889608142426d5c3/editors%2Fcode%2Fpackage.json", "raw_url": "https://github.com/rust-lang/rust/raw/3d17261972fcf5f55660a6e2889608142426d5c3/editors%2Fcode%2Fpackage.json", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fpackage.json?ref=3d17261972fcf5f55660a6e2889608142426d5c3", "patch": "@@ -873,7 +873,7 @@\n                     \"default\": false,\n                     \"type\": \"boolean\"\n                 },\n-                \"rust-analyzer.lens.references.adt.variant.enable\": {\n+                \"rust-analyzer.lens.references.enumVariant.enable\": {\n                     \"markdownDescription\": \"Whether to show `References` lens for Enum Variants.\\nOnly applies when `#rust-analyzer.lens.enable#` is set.\",\n                     \"default\": false,\n                     \"type\": \"boolean\"\n@@ -1006,16 +1006,24 @@\n                     \"default\": true,\n                     \"type\": \"boolean\"\n                 },\n+                \"rust-analyzer.signatureInfo.detail\": {\n+                    \"markdownDescription\": \"Show full signature of the callable. Only shows parameters if disabled.\",\n+                    \"default\": \"full\",\n+                    \"type\": \"string\",\n+                    \"enum\": [\n+                        \"full\",\n+                        \"parameters\"\n+                    ],\n+                    \"enumDescriptions\": [\n+                        \"Show the entire signature.\",\n+                        \"Show only the parameters.\"\n+                    ]\n+                },\n                 \"rust-analyzer.signatureInfo.documentation.enable\": {\n                     \"markdownDescription\": \"Show documentation.\",\n                     \"default\": true,\n                     \"type\": \"boolean\"\n                 },\n-                \"rust-analyzer.signatureInfo.signature.enable\": {\n-                    \"markdownDescription\": \"Show full signature of the callable. Only shows parameters if disabled.\",\n-                    \"default\": true,\n-                    \"type\": \"boolean\"\n-                },\n                 \"rust-analyzer.workspace.symbol.search.kind\": {\n                     \"markdownDescription\": \"Workspace symbol search kind.\",\n                     \"default\": \"only_types\","}]}