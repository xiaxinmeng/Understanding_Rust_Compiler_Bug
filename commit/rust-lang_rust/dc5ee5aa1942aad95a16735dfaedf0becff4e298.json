{"sha": "dc5ee5aa1942aad95a16735dfaedf0becff4e298", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRjNWVlNWFhMTk0MmFhZDk1YTE2NzM1ZGZhZWRmMGJlY2ZmNGUyOTg=", "commit": {"author": {"name": "Oliver Schneider", "email": "github35764891676564198441@oli-obk.de", "date": "2018-08-07T11:10:26Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2018-08-07T11:10:26Z"}, "message": "Merge pull request #3010 from mikerite/issue2971\n\nFix #2971", "tree": {"sha": "8e8d96988a518badb4b34b0997bc82801173298d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8e8d96988a518badb4b34b0997bc82801173298d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/dc5ee5aa1942aad95a16735dfaedf0becff4e298", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJbaX4iCRBK7hj4Ov3rIwAAdHIIAF7JrI3CJZcl4I1KGEamfNAH\naGXKWCN1kcT+aj1/BOolmngJ/m6WPfMWMhqJ/7B1cYhl24mztEjAxSOo8p0csXyq\nmkFQGczUDXf18wbFUni5SkALwZoMfdUsFh7ALFnxkX9kzQlV1RPe+FhkxbDxTLtR\nxUndyvhdVJqg5MMd260ARZogutXXDJ7nsz06dL4fpTywU9fTUMy/g2RQ4uhI30Ta\nnRpi9bu03Pjoz53l5/sceZ6ooQRVaMZwMwJLf6+QpsqbwueZo4gIQevn6u8GcKhx\nDLNR61azgBLvUKcjmjMZnpIkFSp2KHKnb6TfWwF2gE1n4dp9iVFI2xknMkN+nRE=\n=FGFt\n-----END PGP SIGNATURE-----\n", "payload": "tree 8e8d96988a518badb4b34b0997bc82801173298d\nparent a4b08fcda024d5a248622864d597f2f4a1b0af4f\nparent a3d7698fd95977df3cdd551bc0f078aabcae20f9\nauthor Oliver Schneider <github35764891676564198441@oli-obk.de> 1533640226 +0200\ncommitter GitHub <noreply@github.com> 1533640226 +0200\n\nMerge pull request #3010 from mikerite/issue2971\n\nFix #2971"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/dc5ee5aa1942aad95a16735dfaedf0becff4e298", "html_url": "https://github.com/rust-lang/rust/commit/dc5ee5aa1942aad95a16735dfaedf0becff4e298", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/dc5ee5aa1942aad95a16735dfaedf0becff4e298/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a4b08fcda024d5a248622864d597f2f4a1b0af4f", "url": "https://api.github.com/repos/rust-lang/rust/commits/a4b08fcda024d5a248622864d597f2f4a1b0af4f", "html_url": "https://github.com/rust-lang/rust/commit/a4b08fcda024d5a248622864d597f2f4a1b0af4f"}, {"sha": "a3d7698fd95977df3cdd551bc0f078aabcae20f9", "url": "https://api.github.com/repos/rust-lang/rust/commits/a3d7698fd95977df3cdd551bc0f078aabcae20f9", "html_url": "https://github.com/rust-lang/rust/commit/a3d7698fd95977df3cdd551bc0f078aabcae20f9"}], "stats": {"total": 17, "additions": 12, "deletions": 5}, "files": [{"sha": "1909f2f8ff4626d78abae16655ccddd7bd2b4230", "filename": "clippy_lints/src/identity_conversion.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dc5ee5aa1942aad95a16735dfaedf0becff4e298/clippy_lints%2Fsrc%2Fidentity_conversion.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc5ee5aa1942aad95a16735dfaedf0becff4e298/clippy_lints%2Fsrc%2Fidentity_conversion.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fidentity_conversion.rs?ref=dc5ee5aa1942aad95a16735dfaedf0becff4e298", "patch": "@@ -85,7 +85,7 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for IdentityConversion {\n                         let a = cx.tables.expr_ty(e);\n                         let b = cx.tables.expr_ty(&args[0]);\n                         if same_tys(cx, a, b) {\n-                            let sugg = snippet(cx, args[0].span, \"<expr>\").into_owned();\n+                            let sugg = snippet(cx, args[0].span.source_callsite(), \"<expr>\").into_owned();\n                             let sugg_msg = format!(\"consider removing `{}()`\", snippet(cx, path.span, \"From::from\"));\n                             span_lint_and_then(cx, IDENTITY_CONVERSION, e.span, \"identical conversion\", |db| {\n                                 db.span_suggestion(e.span, &sugg_msg, sugg);"}, {"sha": "8f5bd12bc9f08c23452f3105f0f81c280e0386c4", "filename": "tests/ui/identity_conversion.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dc5ee5aa1942aad95a16735dfaedf0becff4e298/tests%2Fui%2Fidentity_conversion.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc5ee5aa1942aad95a16735dfaedf0becff4e298/tests%2Fui%2Fidentity_conversion.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fidentity_conversion.rs?ref=dc5ee5aa1942aad95a16735dfaedf0becff4e298", "patch": "@@ -38,6 +38,7 @@ fn main() {\n     let _: String = \"foo\".to_string().into();\n     let _: String = From::from(\"foo\".to_string());\n     let _ = String::from(\"foo\".to_string());\n+    let _ = String::from(format!(\"A: {:04}\", 123));\n     let _ = \"\".lines().into_iter();\n     let _ = vec![1, 2, 3].into_iter().into_iter();\n }"}, {"sha": "7083b96e16f74239700d810caf1d4fb399f608e7", "filename": "tests/ui/identity_conversion.stderr", "status": "modified", "additions": 10, "deletions": 4, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/dc5ee5aa1942aad95a16735dfaedf0becff4e298/tests%2Fui%2Fidentity_conversion.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/dc5ee5aa1942aad95a16735dfaedf0becff4e298/tests%2Fui%2Fidentity_conversion.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fidentity_conversion.stderr?ref=dc5ee5aa1942aad95a16735dfaedf0becff4e298", "patch": "@@ -43,14 +43,20 @@ error: identical conversion\n error: identical conversion\n   --> $DIR/identity_conversion.rs:41:13\n    |\n-41 |     let _ = \"\".lines().into_iter();\n-   |             ^^^^^^^^^^^^^^^^^^^^^^ help: consider removing `.into_iter()`: `\"\".lines()`\n+41 |     let _ = String::from(format!(\"A: {:04}\", 123));\n+   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: consider removing `String::from()`: `format!(\"A: {:04}\", 123)`\n \n error: identical conversion\n   --> $DIR/identity_conversion.rs:42:13\n    |\n-42 |     let _ = vec![1, 2, 3].into_iter().into_iter();\n+42 |     let _ = \"\".lines().into_iter();\n+   |             ^^^^^^^^^^^^^^^^^^^^^^ help: consider removing `.into_iter()`: `\"\".lines()`\n+\n+error: identical conversion\n+  --> $DIR/identity_conversion.rs:43:13\n+   |\n+43 |     let _ = vec![1, 2, 3].into_iter().into_iter();\n    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: consider removing `.into_iter()`: `vec![1, 2, 3].into_iter()`\n \n-error: aborting due to 8 previous errors\n+error: aborting due to 9 previous errors\n "}]}