{"sha": "5407b42cd87c3f42e46e9ed9cfeb5a8a390d2bc0", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU0MDdiNDJjZDg3YzNmNDJlNDZlOWVkOWNmZWI1YThhMzkwZDJiYzA=", "commit": {"author": {"name": "David CARLIER", "email": "devnexen@gmail.com", "date": "2021-07-25T05:02:07Z"}, "committer": {"name": "David CARLIER", "email": "devnexen@gmail.com", "date": "2021-07-25T05:02:07Z"}, "message": "macos current_exe using directly libc instead.", "tree": {"sha": "752666df80aad219323dc1976453a17c3ee4ffdf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/752666df80aad219323dc1976453a17c3ee4ffdf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5407b42cd87c3f42e46e9ed9cfeb5a8a390d2bc0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5407b42cd87c3f42e46e9ed9cfeb5a8a390d2bc0", "html_url": "https://github.com/rust-lang/rust/commit/5407b42cd87c3f42e46e9ed9cfeb5a8a390d2bc0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5407b42cd87c3f42e46e9ed9cfeb5a8a390d2bc0/comments", "author": {"login": "devnexen", "id": 4922778, "node_id": "MDQ6VXNlcjQ5MjI3Nzg=", "avatar_url": "https://avatars.githubusercontent.com/u/4922778?v=4", "gravatar_id": "", "url": "https://api.github.com/users/devnexen", "html_url": "https://github.com/devnexen", "followers_url": "https://api.github.com/users/devnexen/followers", "following_url": "https://api.github.com/users/devnexen/following{/other_user}", "gists_url": "https://api.github.com/users/devnexen/gists{/gist_id}", "starred_url": "https://api.github.com/users/devnexen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/devnexen/subscriptions", "organizations_url": "https://api.github.com/users/devnexen/orgs", "repos_url": "https://api.github.com/users/devnexen/repos", "events_url": "https://api.github.com/users/devnexen/events{/privacy}", "received_events_url": "https://api.github.com/users/devnexen/received_events", "type": "User", "site_admin": false}, "committer": {"login": "devnexen", "id": 4922778, "node_id": "MDQ6VXNlcjQ5MjI3Nzg=", "avatar_url": "https://avatars.githubusercontent.com/u/4922778?v=4", "gravatar_id": "", "url": "https://api.github.com/users/devnexen", "html_url": "https://github.com/devnexen", "followers_url": "https://api.github.com/users/devnexen/followers", "following_url": "https://api.github.com/users/devnexen/following{/other_user}", "gists_url": "https://api.github.com/users/devnexen/gists{/gist_id}", "starred_url": "https://api.github.com/users/devnexen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/devnexen/subscriptions", "organizations_url": "https://api.github.com/users/devnexen/orgs", "repos_url": "https://api.github.com/users/devnexen/repos", "events_url": "https://api.github.com/users/devnexen/events{/privacy}", "received_events_url": "https://api.github.com/users/devnexen/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2b4196e97736ffe75433235bf586989cdb4221c4", "url": "https://api.github.com/repos/rust-lang/rust/commits/2b4196e97736ffe75433235bf586989cdb4221c4", "html_url": "https://github.com/rust-lang/rust/commit/2b4196e97736ffe75433235bf586989cdb4221c4"}], "stats": {"total": 13, "additions": 5, "deletions": 8}, "files": [{"sha": "673e609fa6f4802bbcc5ef5f8df559de8a21d534", "filename": "Cargo.lock", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/5407b42cd87c3f42e46e9ed9cfeb5a8a390d2bc0/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/5407b42cd87c3f42e46e9ed9cfeb5a8a390d2bc0/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=5407b42cd87c3f42e46e9ed9cfeb5a8a390d2bc0", "patch": "@@ -1880,9 +1880,9 @@ checksum = \"830d08ce1d1d941e6b30645f1a0eb5643013d835ce3779a5fc208261dbe10f55\"\n \n [[package]]\n name = \"libc\"\n-version = \"0.2.93\"\n+version = \"0.2.98\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"9385f66bf6105b241aa65a61cb923ef20efc665cb9f9bb50ac2f0c4b7f378d41\"\n+checksum = \"320cfe77175da3a483efed4bc0adc1968ca050b098ce4f2f1c13a56626128790\"\n dependencies = [\n  \"rustc-std-workspace-core\",\n ]"}, {"sha": "8494563bcd977b902b93d03b011a64c68de2dd79", "filename": "library/std/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5407b42cd87c3f42e46e9ed9cfeb5a8a390d2bc0/library%2Fstd%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/5407b42cd87c3f42e46e9ed9cfeb5a8a390d2bc0/library%2Fstd%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2FCargo.toml?ref=5407b42cd87c3f42e46e9ed9cfeb5a8a390d2bc0", "patch": "@@ -16,7 +16,7 @@ cfg-if = { version = \"0.1.8\", features = ['rustc-dep-of-std'] }\n panic_unwind = { path = \"../panic_unwind\", optional = true }\n panic_abort = { path = \"../panic_abort\" }\n core = { path = \"../core\" }\n-libc = { version = \"0.2.93\", default-features = false, features = ['rustc-dep-of-std'] }\n+libc = { version = \"0.2.98\", default-features = false, features = ['rustc-dep-of-std'] }\n compiler_builtins = { version = \"0.1.44\" }\n profiler_builtins = { path = \"../profiler_builtins\", optional = true }\n unwind = { path = \"../unwind\" }"}, {"sha": "cc0802ed709cb6c87ef8edd8380f2f29cc029946", "filename": "library/std/src/sys/unix/os.rs", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/5407b42cd87c3f42e46e9ed9cfeb5a8a390d2bc0/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fos.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5407b42cd87c3f42e46e9ed9cfeb5a8a390d2bc0/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fos.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fos.rs?ref=5407b42cd87c3f42e46e9ed9cfeb5a8a390d2bc0", "patch": "@@ -350,17 +350,14 @@ pub fn current_exe() -> io::Result<PathBuf> {\n \n #[cfg(any(target_os = \"macos\", target_os = \"ios\"))]\n pub fn current_exe() -> io::Result<PathBuf> {\n-    extern \"C\" {\n-        fn _NSGetExecutablePath(buf: *mut libc::c_char, bufsize: *mut u32) -> libc::c_int;\n-    }\n     unsafe {\n         let mut sz: u32 = 0;\n-        _NSGetExecutablePath(ptr::null_mut(), &mut sz);\n+        libc::_NSGetExecutablePath(ptr::null_mut(), &mut sz);\n         if sz == 0 {\n             return Err(io::Error::last_os_error());\n         }\n         let mut v: Vec<u8> = Vec::with_capacity(sz as usize);\n-        let err = _NSGetExecutablePath(v.as_mut_ptr() as *mut i8, &mut sz);\n+        let err = libc::_NSGetExecutablePath(v.as_mut_ptr() as *mut i8, &mut sz);\n         if err != 0 {\n             return Err(io::Error::last_os_error());\n         }"}]}