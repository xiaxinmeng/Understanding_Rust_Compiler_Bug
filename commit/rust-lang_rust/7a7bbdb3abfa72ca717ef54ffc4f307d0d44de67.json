{"sha": "7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdhN2JiZGIzYWJmYTcyY2E3MTdlZjU0ZmZjNGYzMDdkMGQ0NGRlNjc=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-03-15T11:30:33Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-03-15T11:30:33Z"}, "message": "Auto merge of #83118 - erikdesjardins:removezst, r=oli-obk\n\nRebase and fixup #80493: Remove MIR assignments to ZST types\n\ncloses #80493\n\ncc `@simonvandel`\n\nr? `@oli-obk`", "tree": {"sha": "e85839c159556d7628b8d842bb06a3bee5de01e8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e85839c159556d7628b8d842bb06a3bee5de01e8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "html_url": "https://github.com/rust-lang/rust/commit/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2a55274e0ca9bf0b60cf72744b91237de625863e", "url": "https://api.github.com/repos/rust-lang/rust/commits/2a55274e0ca9bf0b60cf72744b91237de625863e", "html_url": "https://github.com/rust-lang/rust/commit/2a55274e0ca9bf0b60cf72744b91237de625863e"}, {"sha": "47f8bacc469a6d90ace323eb482f273988674dd1", "url": "https://api.github.com/repos/rust-lang/rust/commits/47f8bacc469a6d90ace323eb482f273988674dd1", "html_url": "https://github.com/rust-lang/rust/commit/47f8bacc469a6d90ace323eb482f273988674dd1"}], "stats": {"total": 226, "additions": 109, "deletions": 117}, "files": [{"sha": "31d5c87182d3da0746d47f4d02e8b2409482aac9", "filename": "compiler/rustc_codegen_ssa/src/mir/analyze.rs", "status": "modified", "additions": 12, "deletions": 1, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/compiler%2Frustc_codegen_ssa%2Fsrc%2Fmir%2Fanalyze.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/compiler%2Frustc_codegen_ssa%2Fsrc%2Fmir%2Fanalyze.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_ssa%2Fsrc%2Fmir%2Fanalyze.rs?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -281,7 +281,18 @@ impl<'mir, 'a, 'tcx, Bx: BuilderMethods<'a, 'tcx>> Visitor<'tcx>\n                     Some(assignment_location) => {\n                         assignment_location.dominates(location, &self.dominators)\n                     }\n-                    None => false,\n+                    None => {\n+                        debug!(\"No first assignment found for {:?}\", local);\n+                        // We have not seen any assignment to the local yet,\n+                        // but before marking not_ssa, check if it is a ZST,\n+                        // in which case we don't need to initialize the local.\n+                        let ty = self.fx.mir.local_decls[local].ty;\n+                        let ty = self.fx.monomorphize(ty);\n+\n+                        let is_zst = self.fx.cx.layout_of(ty).is_zst();\n+                        debug!(\"is_zst: {}\", is_zst);\n+                        is_zst\n+                    }\n                 };\n                 if !ssa_read {\n                     self.not_ssa(local);"}, {"sha": "d2314a9ba158a18f9a503321b494e86c63c3112a", "filename": "compiler/rustc_mir/src/transform/simplify.rs", "status": "modified", "additions": 52, "deletions": 27, "changes": 79, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/compiler%2Frustc_mir%2Fsrc%2Ftransform%2Fsimplify.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/compiler%2Frustc_mir%2Fsrc%2Ftransform%2Fsimplify.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir%2Fsrc%2Ftransform%2Fsimplify.rs?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -31,10 +31,10 @@ use crate::transform::MirPass;\n use rustc_index::vec::{Idx, IndexVec};\n use rustc_middle::mir::visit::{MutVisitor, MutatingUseContext, PlaceContext, Visitor};\n use rustc_middle::mir::*;\n+use rustc_middle::ty::ParamEnv;\n use rustc_middle::ty::TyCtxt;\n use smallvec::SmallVec;\n-use std::borrow::Cow;\n-use std::convert::TryInto;\n+use std::{borrow::Cow, convert::TryInto};\n \n pub struct SimplifyCfg {\n     label: String,\n@@ -326,7 +326,7 @@ impl<'tcx> MirPass<'tcx> for SimplifyLocals {\n \n pub fn simplify_locals<'tcx>(body: &mut Body<'tcx>, tcx: TyCtxt<'tcx>) {\n     // First, we're going to get a count of *actual* uses for every `Local`.\n-    let mut used_locals = UsedLocals::new(body);\n+    let mut used_locals = UsedLocals::new(body, tcx);\n \n     // Next, we're going to remove any `Local` with zero actual uses. When we remove those\n     // `Locals`, we're also going to subtract any uses of other `Locals` from the `used_locals`\n@@ -336,7 +336,8 @@ pub fn simplify_locals<'tcx>(body: &mut Body<'tcx>, tcx: TyCtxt<'tcx>) {\n     remove_unused_definitions(&mut used_locals, body);\n \n     // Finally, we'll actually do the work of shrinking `body.local_decls` and remapping the `Local`s.\n-    let map = make_local_map(&mut body.local_decls, &used_locals);\n+    let arg_count = body.arg_count.try_into().unwrap();\n+    let map = make_local_map(&mut body.local_decls, &used_locals, arg_count);\n \n     // Only bother running the `LocalUpdater` if we actually found locals to remove.\n     if map.iter().any(Option::is_none) {\n@@ -349,54 +350,61 @@ pub fn simplify_locals<'tcx>(body: &mut Body<'tcx>, tcx: TyCtxt<'tcx>) {\n }\n \n /// Construct the mapping while swapping out unused stuff out from the `vec`.\n-fn make_local_map<V>(\n+fn make_local_map<'tcx, V>(\n     local_decls: &mut IndexVec<Local, V>,\n-    used_locals: &UsedLocals,\n+    used_locals: &UsedLocals<'tcx>,\n+    arg_count: u32,\n ) -> IndexVec<Local, Option<Local>> {\n-    let mut map: IndexVec<Local, Option<Local>> = IndexVec::from_elem(None, &*local_decls);\n+    let mut map: IndexVec<Local, Option<Local>> = IndexVec::from_elem(None, local_decls);\n     let mut used = Local::new(0);\n \n     for alive_index in local_decls.indices() {\n-        // `is_used` treats the `RETURN_PLACE` and arguments as used.\n-        if !used_locals.is_used(alive_index) {\n-            continue;\n-        }\n-\n-        map[alive_index] = Some(used);\n-        if alive_index != used {\n-            local_decls.swap(alive_index, used);\n+        // When creating the local map treat the `RETURN_PLACE` and arguments as used.\n+        if alive_index.as_u32() <= arg_count || used_locals.is_used(alive_index) {\n+            map[alive_index] = Some(used);\n+            if alive_index != used {\n+                local_decls.swap(alive_index, used);\n+            }\n+            used.increment_by(1);\n         }\n-        used.increment_by(1);\n     }\n     local_decls.truncate(used.index());\n     map\n }\n \n /// Keeps track of used & unused locals.\n-struct UsedLocals {\n+struct UsedLocals<'tcx> {\n     increment: bool,\n-    arg_count: u32,\n     use_count: IndexVec<Local, u32>,\n+    is_static: bool,\n+    local_decls: IndexVec<Local, LocalDecl<'tcx>>,\n+    param_env: ParamEnv<'tcx>,\n+    tcx: TyCtxt<'tcx>,\n }\n \n-impl UsedLocals {\n+impl UsedLocals<'tcx> {\n     /// Determines which locals are used & unused in the given body.\n-    fn new(body: &Body<'_>) -> Self {\n+    fn new(body: &Body<'tcx>, tcx: TyCtxt<'tcx>) -> Self {\n+        let def_id = body.source.def_id();\n+        let is_static = tcx.is_static(def_id);\n+        let param_env = tcx.param_env(def_id);\n+        let local_decls = body.local_decls.clone();\n         let mut this = Self {\n             increment: true,\n-            arg_count: body.arg_count.try_into().unwrap(),\n             use_count: IndexVec::from_elem(0, &body.local_decls),\n+            is_static,\n+            local_decls,\n+            param_env,\n+            tcx,\n         };\n         this.visit_body(body);\n         this\n     }\n \n     /// Checks if local is used.\n-    ///\n-    /// Return place and arguments are always considered used.\n     fn is_used(&self, local: Local) -> bool {\n         trace!(\"is_used({:?}): use_count: {:?}\", local, self.use_count[local]);\n-        local.as_u32() <= self.arg_count || self.use_count[local] != 0\n+        self.use_count[local] != 0\n     }\n \n     /// Updates the use counts to reflect the removal of given statement.\n@@ -424,7 +432,7 @@ impl UsedLocals {\n     }\n }\n \n-impl Visitor<'_> for UsedLocals {\n+impl Visitor<'tcx> for UsedLocals<'tcx> {\n     fn visit_statement(&mut self, statement: &Statement<'tcx>, location: Location) {\n         match statement.kind {\n             StatementKind::LlvmInlineAsm(..)\n@@ -451,7 +459,21 @@ impl Visitor<'_> for UsedLocals {\n         }\n     }\n \n-    fn visit_local(&mut self, local: &Local, _ctx: PlaceContext, _location: Location) {\n+    fn visit_local(&mut self, local: &Local, ctx: PlaceContext, _location: Location) {\n+        debug!(\"local: {:?} is_static: {:?}, ctx: {:?}\", local, self.is_static, ctx);\n+        // Do not count _0 as a used in `return;` if it is a ZST.\n+        let return_place = *local == RETURN_PLACE\n+            && matches!(ctx, PlaceContext::NonMutatingUse(visit::NonMutatingUseContext::Move));\n+        if !self.is_static && return_place {\n+            let ty = self.local_decls[*local].ty;\n+            let param_env_and = self.param_env.and(ty);\n+            if let Ok(layout) = self.tcx.layout_of(param_env_and) {\n+                debug!(\"layout.is_zst: {:?}\", layout.is_zst());\n+                if layout.is_zst() {\n+                    return;\n+                }\n+            }\n+        }\n         if self.increment {\n             self.use_count[*local] += 1;\n         } else {\n@@ -462,7 +484,10 @@ impl Visitor<'_> for UsedLocals {\n }\n \n /// Removes unused definitions. Updates the used locals to reflect the changes made.\n-fn remove_unused_definitions<'a, 'tcx>(used_locals: &'a mut UsedLocals, body: &mut Body<'tcx>) {\n+fn remove_unused_definitions<'a, 'tcx>(\n+    used_locals: &'a mut UsedLocals<'tcx>,\n+    body: &mut Body<'tcx>,\n+) {\n     // The use counts are updated as we remove the statements. A local might become unused\n     // during the retain operation, leading to a temporary inconsistency (storage statements or\n     // definitions referencing the local might remain). For correctness it is crucial that this"}, {"sha": "30512d0bbe8747db0e327e055e8179044d7d571c", "filename": "src/test/mir-opt/const_prop/control_flow_simplification.hello.PreCodegen.before.mir", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fconst_prop%2Fcontrol_flow_simplification.hello.PreCodegen.before.mir", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fconst_prop%2Fcontrol_flow_simplification.hello.PreCodegen.before.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fconst_prop%2Fcontrol_flow_simplification.hello.PreCodegen.before.mir?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -4,7 +4,6 @@ fn hello() -> () {\n     let mut _0: ();                      // return place in scope 0 at $DIR/control-flow-simplification.rs:11:14: 11:14\n \n     bb0: {\n-        _0 = const ();                   // scope 0 at $DIR/control-flow-simplification.rs:14:6: 14:6\n         return;                          // scope 0 at $DIR/control-flow-simplification.rs:15:2: 15:2\n     }\n }"}, {"sha": "c6f1d86ae3a0743f43a68963f72d064e97736363", "filename": "src/test/mir-opt/const_prop/optimizes_into_variable.main.SimplifyLocals.after.32bit.mir", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fconst_prop%2Foptimizes_into_variable.main.SimplifyLocals.after.32bit.mir", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fconst_prop%2Foptimizes_into_variable.main.SimplifyLocals.after.32bit.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fconst_prop%2Foptimizes_into_variable.main.SimplifyLocals.after.32bit.mir?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -22,7 +22,6 @@ fn main() -> () {\n         _2 = const 3_i32;                // scope 1 at $DIR/optimizes_into_variable.rs:13:13: 13:34\n         StorageLive(_3);                 // scope 2 at $DIR/optimizes_into_variable.rs:14:9: 14:10\n         _3 = const 42_u32;               // scope 2 at $DIR/optimizes_into_variable.rs:14:13: 14:38\n-        _0 = const ();                   // scope 0 at $DIR/optimizes_into_variable.rs:11:11: 15:2\n         StorageDead(_3);                 // scope 2 at $DIR/optimizes_into_variable.rs:15:1: 15:2\n         StorageDead(_2);                 // scope 1 at $DIR/optimizes_into_variable.rs:15:1: 15:2\n         StorageDead(_1);                 // scope 0 at $DIR/optimizes_into_variable.rs:15:1: 15:2"}, {"sha": "c6f1d86ae3a0743f43a68963f72d064e97736363", "filename": "src/test/mir-opt/const_prop/optimizes_into_variable.main.SimplifyLocals.after.64bit.mir", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fconst_prop%2Foptimizes_into_variable.main.SimplifyLocals.after.64bit.mir", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fconst_prop%2Foptimizes_into_variable.main.SimplifyLocals.after.64bit.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fconst_prop%2Foptimizes_into_variable.main.SimplifyLocals.after.64bit.mir?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -22,7 +22,6 @@ fn main() -> () {\n         _2 = const 3_i32;                // scope 1 at $DIR/optimizes_into_variable.rs:13:13: 13:34\n         StorageLive(_3);                 // scope 2 at $DIR/optimizes_into_variable.rs:14:9: 14:10\n         _3 = const 42_u32;               // scope 2 at $DIR/optimizes_into_variable.rs:14:13: 14:38\n-        _0 = const ();                   // scope 0 at $DIR/optimizes_into_variable.rs:11:11: 15:2\n         StorageDead(_3);                 // scope 2 at $DIR/optimizes_into_variable.rs:15:1: 15:2\n         StorageDead(_2);                 // scope 1 at $DIR/optimizes_into_variable.rs:15:1: 15:2\n         StorageDead(_1);                 // scope 0 at $DIR/optimizes_into_variable.rs:15:1: 15:2"}, {"sha": "621a747e131ddb9d7f58d24ed78b7e73b29a1fc9", "filename": "src/test/mir-opt/dest-prop/cycle.main.DestinationPropagation.diff", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fdest-prop%2Fcycle.main.DestinationPropagation.diff", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fdest-prop%2Fcycle.main.DestinationPropagation.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fdest-prop%2Fcycle.main.DestinationPropagation.diff?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -56,7 +56,6 @@\n           StorageLive(_6);                 // scope 3 at $DIR/cycle.rs:14:10: 14:11\n -         _6 = _1;                         // scope 3 at $DIR/cycle.rs:14:10: 14:11\n +         _6 = _4;                         // scope 3 at $DIR/cycle.rs:14:10: 14:11\n-          _5 = const ();                   // scope 4 at $DIR/cycle.rs:14:5: 14:12\n           StorageDead(_6);                 // scope 3 at $DIR/cycle.rs:14:11: 14:12\n           StorageDead(_5);                 // scope 3 at $DIR/cycle.rs:14:12: 14:13\n           _0 = const ();                   // scope 0 at $DIR/cycle.rs:8:11: 15:2"}, {"sha": "a3368dcfcc6c77aba6f993cf6151fb6c1162491c", "filename": "src/test/mir-opt/dest-prop/union.main.DestinationPropagation.diff", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fdest-prop%2Funion.main.DestinationPropagation.diff", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fdest-prop%2Funion.main.DestinationPropagation.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fdest-prop%2Funion.main.DestinationPropagation.diff?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -31,7 +31,6 @@\n           StorageLive(_3);                 // scope 1 at $DIR/union.rs:15:5: 15:27\n           StorageLive(_4);                 // scope 1 at $DIR/union.rs:15:10: 15:26\n           _4 = (_1.0: u32);                // scope 2 at $DIR/union.rs:15:19: 15:24\n-          _3 = const ();                   // scope 3 at $DIR/union.rs:15:5: 15:27\n           StorageDead(_4);                 // scope 1 at $DIR/union.rs:15:26: 15:27\n           StorageDead(_3);                 // scope 1 at $DIR/union.rs:15:27: 15:28\n           _0 = const ();                   // scope 0 at $DIR/union.rs:8:11: 16:2"}, {"sha": "77eb326cd82637ed6bd8308d4385da1db692129b", "filename": "src/test/mir-opt/inline/inline_compatibility.inlined_no_sanitize.Inline.diff", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Finline%2Finline_compatibility.inlined_no_sanitize.Inline.diff", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Finline%2Finline_compatibility.inlined_no_sanitize.Inline.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Finline_compatibility.inlined_no_sanitize.Inline.diff?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -16,7 +16,6 @@\n -     }\n - \n -     bb1: {\n-+         _1 = const ();                   // scope 1 at $DIR/inline-compatibility.rs:24:5: 24:18\n           StorageDead(_1);                 // scope 0 at $DIR/inline-compatibility.rs:24:18: 24:19\n           _0 = const ();                   // scope 0 at $DIR/inline-compatibility.rs:23:37: 25:2\n           return;                          // scope 0 at $DIR/inline-compatibility.rs:25:2: 25:2"}, {"sha": "a32db48715c230c41005e66b8000c6d807a2db5e", "filename": "src/test/mir-opt/inline/inline_compatibility.inlined_target_feature.Inline.diff", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Finline%2Finline_compatibility.inlined_target_feature.Inline.diff", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Finline%2Finline_compatibility.inlined_target_feature.Inline.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Finline_compatibility.inlined_target_feature.Inline.diff?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -16,7 +16,6 @@\n -     }\n - \n -     bb1: {\n-+         _1 = const ();                   // scope 1 at $DIR/inline-compatibility.rs:13:5: 13:21\n           StorageDead(_1);                 // scope 0 at $DIR/inline-compatibility.rs:13:21: 13:22\n           _0 = const ();                   // scope 0 at $DIR/inline-compatibility.rs:12:40: 14:2\n           return;                          // scope 0 at $DIR/inline-compatibility.rs:14:2: 14:2"}, {"sha": "aaf65c5d0a5f330eecd2e342247a3cd287fd7555", "filename": "src/test/mir-opt/inline/inline_cycle.two.Inline.diff", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Finline%2Finline_cycle.two.Inline.diff", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Finline%2Finline_cycle.two.Inline.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Finline_cycle.two.Inline.diff?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -37,7 +37,6 @@\n +         StorageDead(_5);                 // scope 1 at $DIR/inline-cycle.rs:49:5: 49:12\n +         StorageDead(_4);                 // scope 1 at $DIR/inline-cycle.rs:49:5: 49:12\n +         StorageDead(_3);                 // scope 1 at $DIR/inline-cycle.rs:49:5: 49:12\n-+         _1 = const ();                   // scope 1 at $DIR/inline-cycle.rs:49:5: 49:12\n +         StorageDead(_2);                 // scope 0 at $DIR/inline-cycle.rs:49:5: 49:12\n           StorageDead(_1);                 // scope 0 at $DIR/inline-cycle.rs:49:12: 49:13\n           _0 = const ();                   // scope 0 at $DIR/inline-cycle.rs:48:10: 50:2"}, {"sha": "916244f1f6afb12b99195f4671157c48a832df4b", "filename": "src/test/mir-opt/inline/inline_instruction_set.default.Inline.diff", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Finline%2Finline_instruction_set.default.Inline.diff", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Finline%2Finline_instruction_set.default.Inline.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Finline_instruction_set.default.Inline.diff?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -36,7 +36,6 @@\n -     }\n - \n -     bb3: {\n-+         _3 = const ();                   // scope 1 at $DIR/inline-instruction-set.rs:53:5: 53:30\n           StorageDead(_3);                 // scope 0 at $DIR/inline-instruction-set.rs:53:30: 53:31\n           _0 = const ();                   // scope 0 at $DIR/inline-instruction-set.rs:50:18: 54:2\n           return;                          // scope 0 at $DIR/inline-instruction-set.rs:54:2: 54:2"}, {"sha": "8907bae9177aa877d5608d3c78cc32efd46238c3", "filename": "src/test/mir-opt/inline/inline_instruction_set.t32.Inline.diff", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Finline%2Finline_instruction_set.t32.Inline.diff", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Finline%2Finline_instruction_set.t32.Inline.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Finline_instruction_set.t32.Inline.diff?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -27,7 +27,6 @@\n -     }\n - \n -     bb2: {\n-+         _2 = const ();                   // scope 1 at $DIR/inline-instruction-set.rs:43:5: 43:26\n           StorageDead(_2);                 // scope 0 at $DIR/inline-instruction-set.rs:43:26: 43:27\n           StorageLive(_3);                 // scope 0 at $DIR/inline-instruction-set.rs:46:5: 46:30\n -         _3 = instruction_set_default() -> bb3; // scope 0 at $DIR/inline-instruction-set.rs:46:5: 46:30"}, {"sha": "865cf25863fdc33afa9cfc21902cc2c54ff4f56a", "filename": "src/test/mir-opt/inline/inline_options.main.Inline.after.mir", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Finline%2Finline_options.main.Inline.after.mir", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Finline%2Finline_options.main.Inline.after.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Finline_options.main.Inline.after.mir?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -48,7 +48,6 @@ fn main() -> () {\n \n     bb4: {\n         StorageDead(_5);                 // scope 1 at $DIR/inline-options.rs:10:5: 10:21\n-        _2 = const ();                   // scope 1 at $DIR/inline-options.rs:10:5: 10:21\n         StorageDead(_2);                 // scope 0 at $DIR/inline-options.rs:10:21: 10:22\n         _0 = const ();                   // scope 0 at $DIR/inline-options.rs:8:11: 11:2\n         return;                          // scope 0 at $DIR/inline-options.rs:11:2: 11:2"}, {"sha": "e5ce03a453ba12addc3da64e14ec82c7420fb539", "filename": "src/test/mir-opt/inline/issue_76997_inline_scopes_parenting.main.Inline.after.mir", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Finline%2Fissue_76997_inline_scopes_parenting.main.Inline.after.mir", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Finline%2Fissue_76997_inline_scopes_parenting.main.Inline.after.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Fissue_76997_inline_scopes_parenting.main.Inline.after.mir?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -29,7 +29,6 @@ fn main() -> () {\n         _5 = move (_3.0: ());            // scope 1 at $DIR/issue-76997-inline-scopes-parenting.rs:6:5: 6:10\n         StorageLive(_6);                 // scope 2 at $DIR/issue-76997-inline-scopes-parenting.rs:6:5: 6:10\n         _6 = const ();                   // scope 2 at $DIR/issue-76997-inline-scopes-parenting.rs:6:5: 6:10\n-        _0 = const ();                   // scope 3 at $DIR/issue-76997-inline-scopes-parenting.rs:6:5: 6:10\n         StorageDead(_6);                 // scope 2 at $DIR/issue-76997-inline-scopes-parenting.rs:6:5: 6:10\n         StorageDead(_5);                 // scope 1 at $DIR/issue-76997-inline-scopes-parenting.rs:6:5: 6:10\n         StorageDead(_4);                 // scope 1 at $DIR/issue-76997-inline-scopes-parenting.rs:6:9: 6:10"}, {"sha": "f6e6614bb6eceea25cbeda7585439102d9d1bf92", "filename": "src/test/mir-opt/issue_73223.main.PreCodegen.32bit.diff", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fissue_73223.main.PreCodegen.32bit.diff", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fissue_73223.main.PreCodegen.32bit.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fissue_73223.main.PreCodegen.32bit.diff?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -117,7 +117,6 @@\n           StorageDead(_10);                // scope 3 at $SRC_DIR/core/src/macros/mod.rs:LL:COL\n           StorageDead(_9);                 // scope 3 at $SRC_DIR/core/src/macros/mod.rs:LL:COL\n           StorageDead(_6);                 // scope 3 at $SRC_DIR/core/src/macros/mod.rs:LL:COL\n-          _0 = const ();                   // scope 0 at $DIR/issue-73223.rs:1:11: 9:2\n           StorageDead(_4);                 // scope 1 at $DIR/issue-73223.rs:9:1: 9:2\n           StorageDead(_1);                 // scope 0 at $DIR/issue-73223.rs:9:1: 9:2\n           return;                          // scope 0 at $DIR/issue-73223.rs:9:2: 9:2"}, {"sha": "f6e6614bb6eceea25cbeda7585439102d9d1bf92", "filename": "src/test/mir-opt/issue_73223.main.PreCodegen.64bit.diff", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fissue_73223.main.PreCodegen.64bit.diff", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fissue_73223.main.PreCodegen.64bit.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fissue_73223.main.PreCodegen.64bit.diff?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -117,7 +117,6 @@\n           StorageDead(_10);                // scope 3 at $SRC_DIR/core/src/macros/mod.rs:LL:COL\n           StorageDead(_9);                 // scope 3 at $SRC_DIR/core/src/macros/mod.rs:LL:COL\n           StorageDead(_6);                 // scope 3 at $SRC_DIR/core/src/macros/mod.rs:LL:COL\n-          _0 = const ();                   // scope 0 at $DIR/issue-73223.rs:1:11: 9:2\n           StorageDead(_4);                 // scope 1 at $DIR/issue-73223.rs:9:1: 9:2\n           StorageDead(_1);                 // scope 0 at $DIR/issue-73223.rs:9:1: 9:2\n           return;                          // scope 0 at $DIR/issue-73223.rs:9:2: 9:2"}, {"sha": "380f6ce9ba73ed6ddbf25e400260200ae489e441", "filename": "src/test/mir-opt/lower_intrinsics.f_u64.PreCodegen.before.mir", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Flower_intrinsics.f_u64.PreCodegen.before.mir", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Flower_intrinsics.f_u64.PreCodegen.before.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Flower_intrinsics.f_u64.PreCodegen.before.mir?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -27,7 +27,6 @@ fn f_u64() -> () {\n         StorageDead(_3);                 // scope 1 at $DIR/lower_intrinsics.rs:35:5: 35:21\n         StorageDead(_2);                 // scope 1 at $DIR/lower_intrinsics.rs:35:5: 35:21\n         StorageDead(_1);                 // scope 0 at $DIR/lower_intrinsics.rs:35:5: 35:21\n-        _0 = const ();                   // scope 0 at $DIR/lower_intrinsics.rs:34:16: 36:2\n         return;                          // scope 0 at $DIR/lower_intrinsics.rs:36:2: 36:2\n     }\n }"}, {"sha": "2b9ffaaf971087b52fdb34606170765885862268", "filename": "src/test/mir-opt/lower_intrinsics.f_unit.PreCodegen.before.mir", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Flower_intrinsics.f_unit.PreCodegen.before.mir", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Flower_intrinsics.f_unit.PreCodegen.before.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Flower_intrinsics.f_unit.PreCodegen.before.mir?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -22,7 +22,6 @@ fn f_unit() -> () {\n     bb1: {\n         StorageDead(_2);                 // scope 1 at $DIR/lower_intrinsics.rs:29:5: 29:19\n         StorageDead(_1);                 // scope 0 at $DIR/lower_intrinsics.rs:29:18: 29:19\n-        _0 = const ();                   // scope 0 at $DIR/lower_intrinsics.rs:28:17: 30:2\n         return;                          // scope 0 at $DIR/lower_intrinsics.rs:30:2: 30:2\n     }\n }"}, {"sha": "9f0db1db1b28ebc3f06d591a1d35be4597a29cde", "filename": "src/test/mir-opt/matches_reduce_branches.foo.MatchBranchSimplification.32bit.diff", "status": "modified", "additions": 16, "deletions": 13, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fmatches_reduce_branches.foo.MatchBranchSimplification.32bit.diff", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fmatches_reduce_branches.foo.MatchBranchSimplification.32bit.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fmatches_reduce_branches.foo.MatchBranchSimplification.32bit.diff?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -5,22 +5,25 @@\n       debug bar => _1;                     // in scope 0 at $DIR/matches_reduce_branches.rs:7:8: 7:11\n       let mut _0: ();                      // return place in scope 0 at $DIR/matches_reduce_branches.rs:7:25: 7:25\n       let mut _2: isize;                   // in scope 0 at $DIR/matches_reduce_branches.rs:8:22: 8:26\n++     let mut _3: isize;                   // in scope 0 at $DIR/matches_reduce_branches.rs:8:22: 8:26\n   \n       bb0: {\n           _2 = discriminant(_1);           // scope 0 at $DIR/matches_reduce_branches.rs:8:22: 8:26\n-          switchInt(move _2) -> [0_isize: bb2, otherwise: bb1]; // scope 0 at $DIR/matches_reduce_branches.rs:8:22: 8:26\n-      }\n-  \n-      bb1: {\n-          _0 = const ();                   // scope 0 at $DIR/matches_reduce_branches.rs:10:6: 10:6\n-          goto -> bb3;                     // scope 0 at $DIR/matches_reduce_branches.rs:8:5: 10:6\n-      }\n-  \n-      bb2: {\n-          goto -> bb3;                     // scope 0 at $SRC_DIR/core/src/macros/mod.rs:LL:COL\n-      }\n-  \n-      bb3: {\n+-         switchInt(move _2) -> [0_isize: bb2, otherwise: bb1]; // scope 0 at $DIR/matches_reduce_branches.rs:8:22: 8:26\n+-     }\n+- \n+-     bb1: {\n+-         goto -> bb3;                     // scope 0 at $DIR/matches_reduce_branches.rs:8:5: 10:6\n+-     }\n+- \n+-     bb2: {\n+-         goto -> bb3;                     // scope 0 at $SRC_DIR/core/src/macros/mod.rs:LL:COL\n+-     }\n+- \n+-     bb3: {\n++         StorageLive(_3);                 // scope 0 at $DIR/matches_reduce_branches.rs:8:22: 8:26\n++         _3 = move _2;                    // scope 0 at $DIR/matches_reduce_branches.rs:8:22: 8:26\n++         StorageDead(_3);                 // scope 0 at $DIR/matches_reduce_branches.rs:8:22: 8:26\n           return;                          // scope 0 at $DIR/matches_reduce_branches.rs:11:2: 11:2\n       }\n   }"}, {"sha": "9f0db1db1b28ebc3f06d591a1d35be4597a29cde", "filename": "src/test/mir-opt/matches_reduce_branches.foo.MatchBranchSimplification.64bit.diff", "status": "modified", "additions": 16, "deletions": 13, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fmatches_reduce_branches.foo.MatchBranchSimplification.64bit.diff", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fmatches_reduce_branches.foo.MatchBranchSimplification.64bit.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fmatches_reduce_branches.foo.MatchBranchSimplification.64bit.diff?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -5,22 +5,25 @@\n       debug bar => _1;                     // in scope 0 at $DIR/matches_reduce_branches.rs:7:8: 7:11\n       let mut _0: ();                      // return place in scope 0 at $DIR/matches_reduce_branches.rs:7:25: 7:25\n       let mut _2: isize;                   // in scope 0 at $DIR/matches_reduce_branches.rs:8:22: 8:26\n++     let mut _3: isize;                   // in scope 0 at $DIR/matches_reduce_branches.rs:8:22: 8:26\n   \n       bb0: {\n           _2 = discriminant(_1);           // scope 0 at $DIR/matches_reduce_branches.rs:8:22: 8:26\n-          switchInt(move _2) -> [0_isize: bb2, otherwise: bb1]; // scope 0 at $DIR/matches_reduce_branches.rs:8:22: 8:26\n-      }\n-  \n-      bb1: {\n-          _0 = const ();                   // scope 0 at $DIR/matches_reduce_branches.rs:10:6: 10:6\n-          goto -> bb3;                     // scope 0 at $DIR/matches_reduce_branches.rs:8:5: 10:6\n-      }\n-  \n-      bb2: {\n-          goto -> bb3;                     // scope 0 at $SRC_DIR/core/src/macros/mod.rs:LL:COL\n-      }\n-  \n-      bb3: {\n+-         switchInt(move _2) -> [0_isize: bb2, otherwise: bb1]; // scope 0 at $DIR/matches_reduce_branches.rs:8:22: 8:26\n+-     }\n+- \n+-     bb1: {\n+-         goto -> bb3;                     // scope 0 at $DIR/matches_reduce_branches.rs:8:5: 10:6\n+-     }\n+- \n+-     bb2: {\n+-         goto -> bb3;                     // scope 0 at $SRC_DIR/core/src/macros/mod.rs:LL:COL\n+-     }\n+- \n+-     bb3: {\n++         StorageLive(_3);                 // scope 0 at $DIR/matches_reduce_branches.rs:8:22: 8:26\n++         _3 = move _2;                    // scope 0 at $DIR/matches_reduce_branches.rs:8:22: 8:26\n++         StorageDead(_3);                 // scope 0 at $DIR/matches_reduce_branches.rs:8:22: 8:26\n           return;                          // scope 0 at $DIR/matches_reduce_branches.rs:11:2: 11:2\n       }\n   }"}, {"sha": "e3b318c949fc60594c76875f753fbae4d7123eb7", "filename": "src/test/mir-opt/matches_reduce_branches.foo.PreCodegen.before.32bit.mir", "status": "modified", "additions": 1, "deletions": 12, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fmatches_reduce_branches.foo.PreCodegen.before.32bit.mir", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fmatches_reduce_branches.foo.PreCodegen.before.32bit.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fmatches_reduce_branches.foo.PreCodegen.before.32bit.mir?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -3,19 +3,8 @@\n fn foo(_1: Option<()>) -> () {\n     debug bar => _1;                     // in scope 0 at $DIR/matches_reduce_branches.rs:7:8: 7:11\n     let mut _0: ();                      // return place in scope 0 at $DIR/matches_reduce_branches.rs:7:25: 7:25\n-    let mut _2: isize;                   // in scope 0 at $DIR/matches_reduce_branches.rs:8:22: 8:26\n \n     bb0: {\n-        _2 = discriminant(_1);           // scope 0 at $DIR/matches_reduce_branches.rs:8:22: 8:26\n-        switchInt(move _2) -> [0_isize: bb2, otherwise: bb1]; // scope 0 at $DIR/matches_reduce_branches.rs:8:22: 8:26\n-    }\n-\n-    bb1: {\n-        _0 = const ();                   // scope 0 at $DIR/matches_reduce_branches.rs:10:6: 10:6\n-        return;                          // scope 0 at $DIR/matches_reduce_branches.rs:8:5: 10:6\n-    }\n-\n-    bb2: {\n-        return;                          // scope 0 at $SRC_DIR/core/src/macros/mod.rs:LL:COL\n+        return;                          // scope 0 at $DIR/matches_reduce_branches.rs:11:2: 11:2\n     }\n }"}, {"sha": "e3b318c949fc60594c76875f753fbae4d7123eb7", "filename": "src/test/mir-opt/matches_reduce_branches.foo.PreCodegen.before.64bit.mir", "status": "modified", "additions": 1, "deletions": 12, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fmatches_reduce_branches.foo.PreCodegen.before.64bit.mir", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fmatches_reduce_branches.foo.PreCodegen.before.64bit.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fmatches_reduce_branches.foo.PreCodegen.before.64bit.mir?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -3,19 +3,8 @@\n fn foo(_1: Option<()>) -> () {\n     debug bar => _1;                     // in scope 0 at $DIR/matches_reduce_branches.rs:7:8: 7:11\n     let mut _0: ();                      // return place in scope 0 at $DIR/matches_reduce_branches.rs:7:25: 7:25\n-    let mut _2: isize;                   // in scope 0 at $DIR/matches_reduce_branches.rs:8:22: 8:26\n \n     bb0: {\n-        _2 = discriminant(_1);           // scope 0 at $DIR/matches_reduce_branches.rs:8:22: 8:26\n-        switchInt(move _2) -> [0_isize: bb2, otherwise: bb1]; // scope 0 at $DIR/matches_reduce_branches.rs:8:22: 8:26\n-    }\n-\n-    bb1: {\n-        _0 = const ();                   // scope 0 at $DIR/matches_reduce_branches.rs:10:6: 10:6\n-        return;                          // scope 0 at $DIR/matches_reduce_branches.rs:8:5: 10:6\n-    }\n-\n-    bb2: {\n-        return;                          // scope 0 at $SRC_DIR/core/src/macros/mod.rs:LL:COL\n+        return;                          // scope 0 at $DIR/matches_reduce_branches.rs:11:2: 11:2\n     }\n }"}, {"sha": "3dd526cfbc5e29b6d374ef14ebba4ea3c17a076e", "filename": "src/test/mir-opt/multiple_return_terminators.test.MultipleReturnTerminators.diff", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fmultiple_return_terminators.test.MultipleReturnTerminators.diff", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fmultiple_return_terminators.test.MultipleReturnTerminators.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fmultiple_return_terminators.test.MultipleReturnTerminators.diff?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -13,12 +13,10 @@\n       }\n   \n       bb1: {\n-          _0 = const ();                   // scope 0 at $DIR/multiple_return_terminators.rs:5:10: 7:6\n           goto -> bb3;                     // scope 0 at $DIR/multiple_return_terminators.rs:5:5: 9:6\n       }\n   \n       bb2: {\n-          _0 = const ();                   // scope 0 at $DIR/multiple_return_terminators.rs:7:12: 9:6\n           goto -> bb3;                     // scope 0 at $DIR/multiple_return_terminators.rs:5:5: 9:6\n       }\n   "}, {"sha": "2fc64fa8f524dda55c48f2341772a10099a46ac0", "filename": "src/test/mir-opt/remove_unneeded_drops.cannot_opt_generic.RemoveUnneededDrops.diff", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.cannot_opt_generic.RemoveUnneededDrops.diff", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.cannot_opt_generic.RemoveUnneededDrops.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.cannot_opt_generic.RemoveUnneededDrops.diff?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -14,7 +14,6 @@\n           StorageLive(_2);                 // scope 0 at $DIR/remove_unneeded_drops.rs:21:5: 21:12\n           StorageLive(_3);                 // scope 0 at $DIR/remove_unneeded_drops.rs:21:10: 21:11\n           _3 = move _1;                    // scope 0 at $DIR/remove_unneeded_drops.rs:21:10: 21:11\n-          _2 = const ();                   // scope 1 at $DIR/remove_unneeded_drops.rs:21:5: 21:12\n           drop(_3) -> [return: bb2, unwind: bb1]; // scope 1 at $DIR/remove_unneeded_drops.rs:21:5: 21:12\n       }\n   "}, {"sha": "18fdac1bc00442f4362e5dd5d53ebae48aa3fd9b", "filename": "src/test/mir-opt/remove_unneeded_drops.dont_opt.RemoveUnneededDrops.diff", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.dont_opt.RemoveUnneededDrops.diff", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.dont_opt.RemoveUnneededDrops.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.dont_opt.RemoveUnneededDrops.diff?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -14,7 +14,6 @@\n           StorageLive(_2);                 // scope 0 at $DIR/remove_unneeded_drops.rs:9:5: 9:12\n           StorageLive(_3);                 // scope 0 at $DIR/remove_unneeded_drops.rs:9:10: 9:11\n           _3 = move _1;                    // scope 0 at $DIR/remove_unneeded_drops.rs:9:10: 9:11\n-          _2 = const ();                   // scope 1 at $DIR/remove_unneeded_drops.rs:9:5: 9:12\n           drop(_3) -> [return: bb2, unwind: bb1]; // scope 1 at $DIR/remove_unneeded_drops.rs:9:5: 9:12\n       }\n   "}, {"sha": "1eb3d736765ede4814c4c240977eabeb020ee91a", "filename": "src/test/mir-opt/remove_unneeded_drops.opt.RemoveUnneededDrops.diff", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.opt.RemoveUnneededDrops.diff", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.opt.RemoveUnneededDrops.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.opt.RemoveUnneededDrops.diff?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -14,7 +14,6 @@\n           StorageLive(_2);                 // scope 0 at $DIR/remove_unneeded_drops.rs:4:5: 4:12\n           StorageLive(_3);                 // scope 0 at $DIR/remove_unneeded_drops.rs:4:10: 4:11\n           _3 = _1;                         // scope 0 at $DIR/remove_unneeded_drops.rs:4:10: 4:11\n-          _2 = const ();                   // scope 1 at $DIR/remove_unneeded_drops.rs:4:5: 4:12\n -         drop(_3) -> bb1;                 // scope 1 at $DIR/remove_unneeded_drops.rs:4:5: 4:12\n -     }\n - "}, {"sha": "9b8a50e85416b5047cadc25459ef6cee8a73ec74", "filename": "src/test/mir-opt/remove_unneeded_drops.opt_generic_copy.RemoveUnneededDrops.diff", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.opt_generic_copy.RemoveUnneededDrops.diff", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.opt_generic_copy.RemoveUnneededDrops.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.opt_generic_copy.RemoveUnneededDrops.diff?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -14,7 +14,6 @@\n           StorageLive(_2);                 // scope 0 at $DIR/remove_unneeded_drops.rs:14:5: 14:12\n           StorageLive(_3);                 // scope 0 at $DIR/remove_unneeded_drops.rs:14:10: 14:11\n           _3 = _1;                         // scope 0 at $DIR/remove_unneeded_drops.rs:14:10: 14:11\n-          _2 = const ();                   // scope 1 at $DIR/remove_unneeded_drops.rs:14:5: 14:12\n -         drop(_3) -> bb1;                 // scope 1 at $DIR/remove_unneeded_drops.rs:14:5: 14:12\n -     }\n - "}, {"sha": "ff9e2671adc7b2cae87546c2117a992016bd5454", "filename": "src/test/mir-opt/simplify_locals.c.SimplifyLocals.diff", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fsimplify_locals.c.SimplifyLocals.diff", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fsimplify_locals.c.SimplifyLocals.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fsimplify_locals.c.SimplifyLocals.diff?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -25,7 +25,7 @@\n -         StorageDead(_3);                 // scope 1 at $DIR/simplify-locals.rs:16:25: 16:26\n -         StorageDead(_4);                 // scope 1 at $DIR/simplify-locals.rs:16:26: 16:27\n -         StorageDead(_2);                 // scope 1 at $DIR/simplify-locals.rs:16:26: 16:27\n-          _0 = const ();                   // scope 0 at $DIR/simplify-locals.rs:13:8: 17:2\n+-         _0 = const ();                   // scope 0 at $DIR/simplify-locals.rs:13:8: 17:2\n           StorageDead(_1);                 // scope 0 at $DIR/simplify-locals.rs:17:1: 17:2\n           return;                          // scope 0 at $DIR/simplify-locals.rs:17:2: 17:2\n       }"}, {"sha": "caa2a17700bcc6130b84f7705432dbd44a1d68be", "filename": "src/test/mir-opt/simplify_locals.d1.SimplifyLocals.diff", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fsimplify_locals.d1.SimplifyLocals.diff", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fsimplify_locals.d1.SimplifyLocals.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fsimplify_locals.d1.SimplifyLocals.diff?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -11,7 +11,7 @@\n -         StorageLive(_1);                 // scope 0 at $DIR/simplify-locals.rs:22:13: 22:17\n -         discriminant(_1) = 0;            // scope 0 at $DIR/simplify-locals.rs:22:13: 22:17\n -         StorageDead(_1);                 // scope 0 at $DIR/simplify-locals.rs:22:17: 22:18\n-          _0 = const ();                   // scope 0 at $DIR/simplify-locals.rs:20:9: 23:2\n+-         _0 = const ();                   // scope 0 at $DIR/simplify-locals.rs:20:9: 23:2\n           return;                          // scope 0 at $DIR/simplify-locals.rs:23:2: 23:2\n       }\n   }"}, {"sha": "80496d9a42ab35622454c7ed51ac49e96fe3d6c0", "filename": "src/test/mir-opt/simplify_locals.d2.SimplifyLocals.diff", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fsimplify_locals.d2.SimplifyLocals.diff", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fsimplify_locals.d2.SimplifyLocals.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fsimplify_locals.d2.SimplifyLocals.diff?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -31,7 +31,7 @@\n -                                          // + literal: Const { ty: E, val: Value(Scalar(0x01)) }\n -         StorageDead(_1);                 // scope 0 at $DIR/simplify-locals.rs:28:25: 28:26\n -         StorageDead(_2);                 // scope 0 at $DIR/simplify-locals.rs:28:26: 28:27\n-          _0 = const ();                   // scope 0 at $DIR/simplify-locals.rs:26:9: 29:2\n+-         _0 = const ();                   // scope 0 at $DIR/simplify-locals.rs:26:9: 29:2\n           return;                          // scope 0 at $DIR/simplify-locals.rs:29:2: 29:2\n       }\n   }"}, {"sha": "7d36e1a992855db853a9889c482372a50769f2ea", "filename": "src/test/mir-opt/simplify_locals.r.SimplifyLocals.diff", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fsimplify_locals.r.SimplifyLocals.diff", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fsimplify_locals.r.SimplifyLocals.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fsimplify_locals.r.SimplifyLocals.diff?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -23,7 +23,7 @@\n -         StorageLive(_3);                 // scope 2 at $DIR/simplify-locals.rs:36:13: 36:19\n -         _3 = &mut _1;                    // scope 2 at $DIR/simplify-locals.rs:36:13: 36:19\n -         StorageDead(_3);                 // scope 2 at $DIR/simplify-locals.rs:36:19: 36:20\n-          _0 = const ();                   // scope 0 at $DIR/simplify-locals.rs:32:8: 37:2\n+-         _0 = const ();                   // scope 0 at $DIR/simplify-locals.rs:32:8: 37:2\n           StorageDead(_1);                 // scope 0 at $DIR/simplify-locals.rs:37:1: 37:2\n           return;                          // scope 0 at $DIR/simplify-locals.rs:37:2: 37:2\n       }"}, {"sha": "89275418d68f066488ffa88cc6eb4de64ff11d60", "filename": "src/test/mir-opt/simplify_locals.t1.SimplifyLocals.diff", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fsimplify_locals.t1.SimplifyLocals.diff", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fsimplify_locals.t1.SimplifyLocals.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fsimplify_locals.t1.SimplifyLocals.diff?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -15,7 +15,7 @@\n -         _1 = (*_2);                      // scope 1 at $DIR/simplify-locals.rs:44:14: 44:15\n -         StorageDead(_2);                 // scope 0 at $DIR/simplify-locals.rs:44:17: 44:18\n -         StorageDead(_1);                 // scope 0 at $DIR/simplify-locals.rs:44:17: 44:18\n-          _0 = const ();                   // scope 0 at $DIR/simplify-locals.rs:42:9: 45:2\n+-         _0 = const ();                   // scope 0 at $DIR/simplify-locals.rs:42:9: 45:2\n           return;                          // scope 0 at $DIR/simplify-locals.rs:45:2: 45:2\n       }\n   }"}, {"sha": "b2344c871e423953f73db254f639e0d37271908b", "filename": "src/test/mir-opt/simplify_locals.t2.SimplifyLocals.diff", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fsimplify_locals.t2.SimplifyLocals.diff", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fsimplify_locals.t2.SimplifyLocals.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fsimplify_locals.t2.SimplifyLocals.diff?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -15,7 +15,7 @@\n -         _1 = &mut (*_2);                 // scope 1 at $DIR/simplify-locals.rs:50:14: 50:20\n -         StorageDead(_2);                 // scope 0 at $DIR/simplify-locals.rs:50:22: 50:23\n -         StorageDead(_1);                 // scope 0 at $DIR/simplify-locals.rs:50:22: 50:23\n-          _0 = const ();                   // scope 0 at $DIR/simplify-locals.rs:48:9: 51:2\n+-         _0 = const ();                   // scope 0 at $DIR/simplify-locals.rs:48:9: 51:2\n           return;                          // scope 0 at $DIR/simplify-locals.rs:51:2: 51:2\n       }\n   }"}, {"sha": "95982f0a9cffe08406d56caab35cee3b4506d206", "filename": "src/test/mir-opt/simplify_locals.t3.SimplifyLocals.diff", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fsimplify_locals.t3.SimplifyLocals.diff", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fsimplify_locals.t3.SimplifyLocals.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fsimplify_locals.t3.SimplifyLocals.diff?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -19,7 +19,7 @@\n -         StorageDead(_3);                 // scope 0 at $DIR/simplify-locals.rs:56:23: 56:24\n -         StorageDead(_2);                 // scope 0 at $DIR/simplify-locals.rs:56:23: 56:24\n -         StorageDead(_1);                 // scope 0 at $DIR/simplify-locals.rs:56:23: 56:24\n-          _0 = const ();                   // scope 0 at $DIR/simplify-locals.rs:54:9: 57:2\n+-         _0 = const ();                   // scope 0 at $DIR/simplify-locals.rs:54:9: 57:2\n           return;                          // scope 0 at $DIR/simplify-locals.rs:57:2: 57:2\n       }\n   }"}, {"sha": "69da1c7be88425974e61e6f9735a919571fd3fdb", "filename": "src/test/mir-opt/simplify_locals_fixedpoint.foo.SimplifyLocals.diff", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fsimplify_locals_fixedpoint.foo.SimplifyLocals.diff", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fsimplify_locals_fixedpoint.foo.SimplifyLocals.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fsimplify_locals_fixedpoint.foo.SimplifyLocals.diff?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -30,7 +30,7 @@\n       }\n   \n       bb1: {\n-          _0 = const ();                   // scope 0 at $DIR/simplify-locals-fixedpoint.rs:8:6: 8:6\n+-         _0 = const ();                   // scope 0 at $DIR/simplify-locals-fixedpoint.rs:8:6: 8:6\n           goto -> bb7;                     // scope 0 at $DIR/simplify-locals-fixedpoint.rs:4:5: 8:6\n       }\n   \n@@ -51,12 +51,12 @@\n       }\n   \n       bb4: {\n-          _0 = const ();                   // scope 1 at $DIR/simplify-locals-fixedpoint.rs:5:21: 7:10\n+-         _0 = const ();                   // scope 1 at $DIR/simplify-locals-fixedpoint.rs:5:21: 7:10\n           goto -> bb6;                     // scope 1 at $DIR/simplify-locals-fixedpoint.rs:5:9: 7:10\n       }\n   \n       bb5: {\n-          _0 = const ();                   // scope 1 at $DIR/simplify-locals-fixedpoint.rs:7:10: 7:10\n+-         _0 = const ();                   // scope 1 at $DIR/simplify-locals-fixedpoint.rs:7:10: 7:10\n           goto -> bb6;                     // scope 1 at $DIR/simplify-locals-fixedpoint.rs:5:9: 7:10\n       }\n   "}, {"sha": "8d6d531bd34e0f58ca018020d940dca93dc5910d", "filename": "src/test/mir-opt/simplify_locals_removes_unused_consts.main.SimplifyLocals.diff", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fsimplify_locals_removes_unused_consts.main.SimplifyLocals.diff", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fsimplify_locals_removes_unused_consts.main.SimplifyLocals.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fsimplify_locals_removes_unused_consts.main.SimplifyLocals.diff?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -71,8 +71,8 @@\n -         StorageDead(_9);                 // scope 1 at $DIR/simplify-locals-removes-unused-consts.rs:16:34: 16:35\n -         StorageDead(_11);                // scope 1 at $DIR/simplify-locals-removes-unused-consts.rs:16:35: 16:36\n -         StorageDead(_8);                 // scope 1 at $DIR/simplify-locals-removes-unused-consts.rs:16:35: 16:36\n+-         _0 = const ();                   // scope 0 at $DIR/simplify-locals-removes-unused-consts.rs:12:11: 17:2\n +         StorageDead(_2);                 // scope 1 at $DIR/simplify-locals-removes-unused-consts.rs:16:35: 16:36\n-          _0 = const ();                   // scope 0 at $DIR/simplify-locals-removes-unused-consts.rs:12:11: 17:2\n           return;                          // scope 0 at $DIR/simplify-locals-removes-unused-consts.rs:17:2: 17:2\n       }\n   }"}, {"sha": "eeaabb7b9884eb16812f8f5a1cb174051e21e510", "filename": "src/test/mir-opt/uninhabited_enum.process_void.SimplifyLocals.after.mir", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Funinhabited_enum.process_void.SimplifyLocals.after.mir", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Funinhabited_enum.process_void.SimplifyLocals.after.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Funinhabited_enum.process_void.SimplifyLocals.after.mir?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -13,7 +13,6 @@ fn process_void(_1: *const Void) -> () {\n     bb0: {\n         StorageLive(_2);                 // scope 0 at $DIR/uninhabited-enum.rs:14:8: 14:14\n         _2 = &(*_1);                     // scope 2 at $DIR/uninhabited-enum.rs:14:26: 14:33\n-        _0 = const ();                   // scope 0 at $DIR/uninhabited-enum.rs:13:41: 17:2\n         StorageDead(_2);                 // scope 0 at $DIR/uninhabited-enum.rs:17:1: 17:2\n         return;                          // scope 0 at $DIR/uninhabited-enum.rs:17:2: 17:2\n     }"}, {"sha": "b6767077d429a1a1940cfd6e7205798638e3dbb0", "filename": "src/test/mir-opt/while_let_loops.change_loop_body.PreCodegen.after.32bit.mir", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fwhile_let_loops.change_loop_body.PreCodegen.after.32bit.mir", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fwhile_let_loops.change_loop_body.PreCodegen.after.32bit.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fwhile_let_loops.change_loop_body.PreCodegen.after.32bit.mir?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -10,7 +10,6 @@ fn change_loop_body() -> () {\n     bb0: {\n         StorageLive(_1);                 // scope 0 at $DIR/while_let_loops.rs:6:9: 6:15\n         _1 = const 0_i32;                // scope 0 at $DIR/while_let_loops.rs:6:18: 6:19\n-        _0 = const ();                   // scope 1 at $DIR/while_let_loops.rs:7:5: 10:6\n         StorageDead(_1);                 // scope 0 at $DIR/while_let_loops.rs:11:1: 11:2\n         return;                          // scope 0 at $DIR/while_let_loops.rs:11:2: 11:2\n     }"}, {"sha": "b6767077d429a1a1940cfd6e7205798638e3dbb0", "filename": "src/test/mir-opt/while_let_loops.change_loop_body.PreCodegen.after.64bit.mir", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fwhile_let_loops.change_loop_body.PreCodegen.after.64bit.mir", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fwhile_let_loops.change_loop_body.PreCodegen.after.64bit.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fwhile_let_loops.change_loop_body.PreCodegen.after.64bit.mir?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -10,7 +10,6 @@ fn change_loop_body() -> () {\n     bb0: {\n         StorageLive(_1);                 // scope 0 at $DIR/while_let_loops.rs:6:9: 6:15\n         _1 = const 0_i32;                // scope 0 at $DIR/while_let_loops.rs:6:18: 6:19\n-        _0 = const ();                   // scope 1 at $DIR/while_let_loops.rs:7:5: 10:6\n         StorageDead(_1);                 // scope 0 at $DIR/while_let_loops.rs:11:1: 11:2\n         return;                          // scope 0 at $DIR/while_let_loops.rs:11:2: 11:2\n     }"}, {"sha": "eb3ab1c31e36c8e138a2f23e1343cc580a59e0af", "filename": "src/test/mir-opt/while_storage.while_loop.PreCodegen.after.mir", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fwhile_storage.while_loop.PreCodegen.after.mir", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Fmir-opt%2Fwhile_storage.while_loop.PreCodegen.after.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fwhile_storage.while_loop.PreCodegen.after.mir?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -24,7 +24,6 @@ fn while_loop(_1: bool) -> () {\n     }\n \n     bb2: {\n-        _0 = const ();                   // scope 0 at $DIR/while-storage.rs:10:5: 14:6\n         goto -> bb7;                     // scope 0 at $DIR/while-storage.rs:10:5: 14:6\n     }\n \n@@ -44,7 +43,6 @@ fn while_loop(_1: bool) -> () {\n     }\n \n     bb5: {\n-        _0 = const ();                   // scope 0 at $DIR/while-storage.rs:12:13: 12:18\n         StorageDead(_4);                 // scope 0 at $DIR/while-storage.rs:13:9: 13:10\n         goto -> bb7;                     // scope 0 at $DIR/while-storage.rs:1:1: 1:1\n     }"}, {"sha": "724b26300839ee6a67b11fc4d9ac3c2433ad044b", "filename": "src/test/run-make/const_fn_mir/dump.mir", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Frun-make%2Fconst_fn_mir%2Fdump.mir", "raw_url": "https://github.com/rust-lang/rust/raw/7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67/src%2Ftest%2Frun-make%2Fconst_fn_mir%2Fdump.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fconst_fn_mir%2Fdump.mir?ref=7a7bbdb3abfa72ca717ef54ffc4f307d0d44de67", "patch": "@@ -12,7 +12,6 @@ fn main() -> () {\n     }\n \n     bb1: {\n-        _0 = const ();                   // scope 0 at main.rs:8:11: 10:2\n         return;                          // scope 0 at main.rs:10:2: 10:2\n     }\n }"}]}