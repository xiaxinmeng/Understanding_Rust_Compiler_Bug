{"sha": "5d79d3c4bb8768b4e8ee2b243a625bbfd740a696", "node_id": "C_kwDOAAsO6NoAKDVkNzlkM2M0YmI4NzY4YjRlOGVlMmIyNDNhNjI1YmJmZDc0MGE2OTY", "commit": {"author": {"name": "SLASHLogin", "email": "loginmlgxd@gmail.com", "date": "2022-08-26T08:30:43Z"}, "committer": {"name": "SLASHLogin", "email": "loginmlgxd@gmail.com", "date": "2022-11-09T13:56:20Z"}, "message": "Port InvalidMinimumAlignment", "tree": {"sha": "4c6c4ee568062b15c7b7d8763c7d47651b5a630d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4c6c4ee568062b15c7b7d8763c7d47651b5a630d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5d79d3c4bb8768b4e8ee2b243a625bbfd740a696", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5d79d3c4bb8768b4e8ee2b243a625bbfd740a696", "html_url": "https://github.com/rust-lang/rust/commit/5d79d3c4bb8768b4e8ee2b243a625bbfd740a696", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5d79d3c4bb8768b4e8ee2b243a625bbfd740a696/comments", "author": {"login": "SLASHLogin", "id": 24846525, "node_id": "MDQ6VXNlcjI0ODQ2NTI1", "avatar_url": "https://avatars.githubusercontent.com/u/24846525?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SLASHLogin", "html_url": "https://github.com/SLASHLogin", "followers_url": "https://api.github.com/users/SLASHLogin/followers", "following_url": "https://api.github.com/users/SLASHLogin/following{/other_user}", "gists_url": "https://api.github.com/users/SLASHLogin/gists{/gist_id}", "starred_url": "https://api.github.com/users/SLASHLogin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SLASHLogin/subscriptions", "organizations_url": "https://api.github.com/users/SLASHLogin/orgs", "repos_url": "https://api.github.com/users/SLASHLogin/repos", "events_url": "https://api.github.com/users/SLASHLogin/events{/privacy}", "received_events_url": "https://api.github.com/users/SLASHLogin/received_events", "type": "User", "site_admin": false}, "committer": {"login": "SLASHLogin", "id": 24846525, "node_id": "MDQ6VXNlcjI0ODQ2NTI1", "avatar_url": "https://avatars.githubusercontent.com/u/24846525?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SLASHLogin", "html_url": "https://github.com/SLASHLogin", "followers_url": "https://api.github.com/users/SLASHLogin/followers", "following_url": "https://api.github.com/users/SLASHLogin/following{/other_user}", "gists_url": "https://api.github.com/users/SLASHLogin/gists{/gist_id}", "starred_url": "https://api.github.com/users/SLASHLogin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SLASHLogin/subscriptions", "organizations_url": "https://api.github.com/users/SLASHLogin/orgs", "repos_url": "https://api.github.com/users/SLASHLogin/repos", "events_url": "https://api.github.com/users/SLASHLogin/events{/privacy}", "received_events_url": "https://api.github.com/users/SLASHLogin/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "39d363fd58d7686265b14af41dc3029a30737282", "url": "https://api.github.com/repos/rust-lang/rust/commits/39d363fd58d7686265b14af41dc3029a30737282", "html_url": "https://github.com/rust-lang/rust/commit/39d363fd58d7686265b14af41dc3029a30737282"}], "stats": {"total": 14, "additions": 13, "deletions": 1}, "files": [{"sha": "05fa87c80946f50ebabc4ae0be2d4e7619edcfe7", "filename": "compiler/rustc_codegen_llvm/src/consts.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5d79d3c4bb8768b4e8ee2b243a625bbfd740a696/compiler%2Frustc_codegen_llvm%2Fsrc%2Fconsts.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5d79d3c4bb8768b4e8ee2b243a625bbfd740a696/compiler%2Frustc_codegen_llvm%2Fsrc%2Fconsts.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_llvm%2Fsrc%2Fconsts.rs?ref=5d79d3c4bb8768b4e8ee2b243a625bbfd740a696", "patch": "@@ -1,6 +1,7 @@\n use crate::base;\n use crate::common::{self, CodegenCx};\n use crate::debuginfo;\n+use crate::errors::InvalidMinimumAlignment;\n use crate::llvm::{self, True};\n use crate::llvm_util;\n use crate::type_::Type;\n@@ -146,7 +147,9 @@ fn set_global_alignment<'ll>(cx: &CodegenCx<'ll, '_>, gv: &'ll Value, mut align:\n         match Align::from_bits(min) {\n             Ok(min) => align = align.max(min),\n             Err(err) => {\n-                cx.sess().err(&format!(\"invalid minimum global alignment: {}\", err));\n+                cx.sess().emit_err(InvalidMinimumAlignment {\n+                    err,\n+                });\n             }\n         }\n     }"}, {"sha": "8c87d9eb1fbca080dd597f2d3381833c51a23a32", "filename": "compiler/rustc_codegen_llvm/src/errors.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/5d79d3c4bb8768b4e8ee2b243a625bbfd740a696/compiler%2Frustc_codegen_llvm%2Fsrc%2Ferrors.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5d79d3c4bb8768b4e8ee2b243a625bbfd740a696/compiler%2Frustc_codegen_llvm%2Fsrc%2Ferrors.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_llvm%2Fsrc%2Ferrors.rs?ref=5d79d3c4bb8768b4e8ee2b243a625bbfd740a696", "patch": "@@ -67,3 +67,9 @@ pub(crate) struct LayoutSizeOverflow {\n     pub span: Span,\n     pub error: String,\n }\n+\n+#[derive(SessionDiagnostic)]\n+#[diag(codegen_llvm::invalid_minimum_alignment)]\n+pub(crate) struct InvalidMinimumAlignment {\n+    pub err: String\n+}"}, {"sha": "1c38bbdce16ca493a7a02a9cffdd2f24cdded6ae", "filename": "compiler/rustc_error_messages/locales/en-US/codegen_llvm.ftl", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/5d79d3c4bb8768b4e8ee2b243a625bbfd740a696/compiler%2Frustc_error_messages%2Flocales%2Fen-US%2Fcodegen_llvm.ftl", "raw_url": "https://github.com/rust-lang/rust/raw/5d79d3c4bb8768b4e8ee2b243a625bbfd740a696/compiler%2Frustc_error_messages%2Flocales%2Fen-US%2Fcodegen_llvm.ftl", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_error_messages%2Flocales%2Fen-US%2Fcodegen_llvm.ftl?ref=5d79d3c4bb8768b4e8ee2b243a625bbfd740a696", "patch": "@@ -27,3 +27,6 @@ codegen_llvm_branch_protection_requires_aarch64 =\n \n codegen_llvm_layout_size_overflow =\n     {$error}\n+\n+codegen_llvm_invalid_minimum_alignment =\n+    invalid minimum global alignment: {$err}"}]}