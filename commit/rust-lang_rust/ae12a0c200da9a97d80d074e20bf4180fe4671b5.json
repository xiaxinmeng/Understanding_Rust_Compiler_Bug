{"sha": "ae12a0c200da9a97d80d074e20bf4180fe4671b5", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFlMTJhMGMyMDBkYTlhOTdkODBkMDc0ZTIwYmY0MTgwZmU0NjcxYjU=", "commit": {"author": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2020-12-07T16:23:26Z"}, "committer": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2020-12-23T18:35:22Z"}, "message": "bootstrap: avoid producing the rust tarball during dry runs", "tree": {"sha": "8e2de49efc8d8aa19d4010e10b017934010ba888", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8e2de49efc8d8aa19d4010e10b017934010ba888"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ae12a0c200da9a97d80d074e20bf4180fe4671b5", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE1JbYPtLJAsc22U9xPgar6Auq8ZwFAl/jjgMACgkQPgar6Auq\n8Zy/xQ//dA3ILglZKZ/GS+CurcuUMB5MRpDs4NVRioGzcUnTo43klWwjG/PUkg+q\neOh7xFszP94HgmKR6mmPT0n0E+piy/zjNBW2dH3NniGRlUdL8GrBrwugzqgy6WTc\nFzQrPlQkw8VLYVMG936Mg6LHZW+Ahmo1qh4k2KKafQZDuPKgb7XG+2FEmd3duf8u\n+b0NCiXhJ8asdDWSEbIotZrjL4/OYefElh1/Pgkn9pXpuhuc4H7rGr9yL4+vl/vT\n4/+lIJTZlJBLYEX9CZbJ1raM9kdmsQoKk2RhM1PLD7x+7xx51DqzAIfbiS55ZEn/\nKGHLH/NXTIX+qJJST9BmMY8UxliZ8+wTjkmW8owRqn7lLkmJ3F85FUdtZqmowZdv\ne1bZj9ZRwIRhnUhNpzqR9UsK2zIIxGPlsC30KBS55IYDjtBH6pq/dUcyB9tg2ELJ\nT0s53KhiWAjO8d8R8xc9tv74Qsyxxw5lvsNk9ETRudaAvsU/5g5CrN891XkG2f5z\niHnp1gfRFDE+60E74EC6htkLnJyPLBjX1xftksQyeMv1EYLDFVmbSGVhG9w9czUU\npsIH9NqU11goAzQnLzhx/jb0udzuTuKJPUHEQL1MGy4cUNXj2acr/ft6MGDC5HI6\n/zGIVHWnx7DjVVgmg+uIOKw80bgSlk2sYlAeNIqh+GlrowRHfjE=\n=TqKi\n-----END PGP SIGNATURE-----", "payload": "tree 8e2de49efc8d8aa19d4010e10b017934010ba888\nparent f18335edb2917a310b69a522e6f3fde30af3d419\nauthor Pietro Albini <pietro@pietroalbini.org> 1607358206 +0100\ncommitter Pietro Albini <pietro@pietroalbini.org> 1608748522 +0100\n\nbootstrap: avoid producing the rust tarball during dry runs\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ae12a0c200da9a97d80d074e20bf4180fe4671b5", "html_url": "https://github.com/rust-lang/rust/commit/ae12a0c200da9a97d80d074e20bf4180fe4671b5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ae12a0c200da9a97d80d074e20bf4180fe4671b5/comments", "author": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f18335edb2917a310b69a522e6f3fde30af3d419", "url": "https://api.github.com/repos/rust-lang/rust/commits/f18335edb2917a310b69a522e6f3fde30af3d419", "html_url": "https://github.com/rust-lang/rust/commit/f18335edb2917a310b69a522e6f3fde30af3d419"}], "stats": {"total": 5, "additions": 5, "deletions": 0}, "files": [{"sha": "dddb9527ea1dca86251103e5eed666af56f40f1d", "filename": "src/bootstrap/dist.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/ae12a0c200da9a97d80d074e20bf4180fe4671b5/src%2Fbootstrap%2Fdist.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ae12a0c200da9a97d80d074e20bf4180fe4671b5/src%2Fbootstrap%2Fdist.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fdist.rs?ref=ae12a0c200da9a97d80d074e20bf4180fe4671b5", "patch": "@@ -1288,6 +1288,11 @@ impl Step for Extended {\n \n         let etc = builder.src.join(\"src/etc/installer\");\n \n+        // Avoid producing tarballs during a dry run.\n+        if builder.config.dry_run {\n+            return;\n+        }\n+\n         // When rust-std package split from rustc, we needed to ensure that during\n         // upgrades rustc was upgraded before rust-std. To avoid rustc clobbering\n         // the std files during uninstall. To do this ensure that rustc comes"}]}