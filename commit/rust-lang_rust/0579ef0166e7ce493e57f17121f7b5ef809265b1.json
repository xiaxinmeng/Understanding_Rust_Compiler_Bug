{"sha": "0579ef0166e7ce493e57f17121f7b5ef809265b1", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA1NzllZjAxNjZlN2NlNDkzZTU3ZjE3MTIxZjdiNWVmODA5MjY1YjE=", "commit": {"author": {"name": "Steve Klabnik", "email": "steve@steveklabnik.com", "date": "2018-11-20T19:57:56Z"}, "committer": {"name": "Steve Klabnik", "email": "steve@steveklabnik.com", "date": "2018-11-21T02:25:48Z"}, "message": "fix rustbuild to build all the books", "tree": {"sha": "a0b7549741faebf613b3e2568582484ec09c58bd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a0b7549741faebf613b3e2568582484ec09c58bd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0579ef0166e7ce493e57f17121f7b5ef809265b1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0579ef0166e7ce493e57f17121f7b5ef809265b1", "html_url": "https://github.com/rust-lang/rust/commit/0579ef0166e7ce493e57f17121f7b5ef809265b1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0579ef0166e7ce493e57f17121f7b5ef809265b1/comments", "author": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "committer": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "240a55ce50531f3bc237027593205d3b857eba33", "url": "https://api.github.com/repos/rust-lang/rust/commits/240a55ce50531f3bc237027593205d3b857eba33", "html_url": "https://github.com/rust-lang/rust/commit/240a55ce50531f3bc237027593205d3b857eba33"}], "stats": {"total": 26, "additions": 15, "deletions": 11}, "files": [{"sha": "f9b19ffb10d69bfe2454e7184fddb5588bf68b8b", "filename": "src/bootstrap/doc.rs", "status": "modified", "additions": 15, "deletions": 11, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/0579ef0166e7ce493e57f17121f7b5ef809265b1/src%2Fbootstrap%2Fdoc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0579ef0166e7ce493e57f17121f7b5ef809265b1/src%2Fbootstrap%2Fdoc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fdoc.rs?ref=0579ef0166e7ce493e57f17121f7b5ef809265b1", "patch": "@@ -260,22 +260,31 @@ impl Step for TheBook {\n         let compiler = self.compiler;\n         let target = self.target;\n         let name = self.name;\n-        // build book first edition\n+\n+        // build book\n         builder.ensure(Rustbook {\n             target,\n-            name: INTERNER.intern_string(format!(\"{}/first-edition\", name)),\n+            name: INTERNER.intern_string(name.to_string()),\n         });\n \n-        // build book second edition\n+        // building older edition redirects\n+\n+        let source_name = format!(\"{}/first-edition\", name);\n         builder.ensure(Rustbook {\n             target,\n-            name: INTERNER.intern_string(format!(\"{}/second-edition\", name)),\n+            name: INTERNER.intern_string(source_name),\n         });\n \n-        // build book 2018 edition\n+        let source_name = format!(\"{}/second-edition\", name);\n         builder.ensure(Rustbook {\n             target,\n-            name: INTERNER.intern_string(format!(\"{}/2018-edition\", name)),\n+            name: INTERNER.intern_string(source_name),\n+        });\n+\n+        let source_name = format!(\"{}/2018-edition\", name);\n+        builder.ensure(Rustbook {\n+            target,\n+            name: INTERNER.intern_string(source_name),\n         });\n \n         // build the version info page and CSS\n@@ -284,11 +293,6 @@ impl Step for TheBook {\n             target,\n         });\n \n-        // build the index page\n-        let index = format!(\"{}/index.md\", name);\n-        builder.info(&format!(\"Documenting book index ({})\", target));\n-        invoke_rustdoc(builder, compiler, target, &index);\n-\n         // build the redirect pages\n         builder.info(&format!(\"Documenting book redirect pages ({})\", target));\n         for file in t!(fs::read_dir(builder.src.join(\"src/doc/book/redirects\"))) {"}]}