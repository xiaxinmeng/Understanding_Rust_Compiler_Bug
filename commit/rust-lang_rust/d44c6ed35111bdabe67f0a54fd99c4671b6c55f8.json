{"sha": "d44c6ed35111bdabe67f0a54fd99c4671b6c55f8", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ0NGM2ZWQzNTExMWJkYWJlNjdmMGE1NGZkOTljNDY3MWI2YzU1Zjg=", "commit": {"author": {"name": "Jacob Hoffman-Andrews", "email": "github@hoffman-andrews.com", "date": "2021-04-13T23:43:14Z"}, "committer": {"name": "Jacob Hoffman-Andrews", "email": "github@hoffman-andrews.com", "date": "2021-04-13T23:43:14Z"}, "message": "Updated tester.js for separate search.js", "tree": {"sha": "7abdfe3cbf1a37274d8b7ad10204fb2eb6ecf738", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7abdfe3cbf1a37274d8b7ad10204fb2eb6ecf738"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d44c6ed35111bdabe67f0a54fd99c4671b6c55f8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d44c6ed35111bdabe67f0a54fd99c4671b6c55f8", "html_url": "https://github.com/rust-lang/rust/commit/d44c6ed35111bdabe67f0a54fd99c4671b6c55f8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d44c6ed35111bdabe67f0a54fd99c4671b6c55f8/comments", "author": {"login": "jsha", "id": 220205, "node_id": "MDQ6VXNlcjIyMDIwNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/220205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsha", "html_url": "https://github.com/jsha", "followers_url": "https://api.github.com/users/jsha/followers", "following_url": "https://api.github.com/users/jsha/following{/other_user}", "gists_url": "https://api.github.com/users/jsha/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsha/subscriptions", "organizations_url": "https://api.github.com/users/jsha/orgs", "repos_url": "https://api.github.com/users/jsha/repos", "events_url": "https://api.github.com/users/jsha/events{/privacy}", "received_events_url": "https://api.github.com/users/jsha/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jsha", "id": 220205, "node_id": "MDQ6VXNlcjIyMDIwNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/220205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsha", "html_url": "https://github.com/jsha", "followers_url": "https://api.github.com/users/jsha/followers", "following_url": "https://api.github.com/users/jsha/following{/other_user}", "gists_url": "https://api.github.com/users/jsha/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsha/subscriptions", "organizations_url": "https://api.github.com/users/jsha/orgs", "repos_url": "https://api.github.com/users/jsha/repos", "events_url": "https://api.github.com/users/jsha/events{/privacy}", "received_events_url": "https://api.github.com/users/jsha/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "52789498e93693594b387e1bc457dec5bb5097d2", "url": "https://api.github.com/repos/rust-lang/rust/commits/52789498e93693594b387e1bc457dec5bb5097d2", "html_url": "https://github.com/rust-lang/rust/commit/52789498e93693594b387e1bc457dec5bb5097d2"}], "stats": {"total": 12, "additions": 6, "deletions": 6}, "files": [{"sha": "e583bd225a9eb164fe9901e3353712faeda67d9b", "filename": "src/tools/rustdoc-js/tester.js", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/d44c6ed35111bdabe67f0a54fd99c4671b6c55f8/src%2Ftools%2Frustdoc-js%2Ftester.js", "raw_url": "https://github.com/rust-lang/rust/raw/d44c6ed35111bdabe67f0a54fd99c4671b6c55f8/src%2Ftools%2Frustdoc-js%2Ftester.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Frustdoc-js%2Ftester.js?ref=d44c6ed35111bdabe67f0a54fd99c4671b6c55f8", "patch": "@@ -246,7 +246,7 @@ function lookForEntry(entry, data) {\n     return null;\n }\n \n-function loadMainJsAndIndex(mainJs, searchIndex, storageJs, crate) {\n+function loadSearchJsAndIndex(searchJs, searchIndex, storageJs, crate) {\n     if (searchIndex[searchIndex.length - 1].length === 0) {\n         searchIndex.pop();\n     }\n@@ -270,9 +270,9 @@ function loadMainJsAndIndex(mainJs, searchIndex, storageJs, crate) {\n     ALIASES = {};\n     finalJS += 'window = { \"currentCrate\": \"' + crate + '\", rootPath: \"../\" };\\n';\n     finalJS += loadThings([\"hasOwnProperty\", \"onEach\"], 'function', extractFunction, storageJs);\n-    finalJS += loadThings(arraysToLoad, 'array', extractArrayVariable, mainJs);\n-    finalJS += loadThings(variablesToLoad, 'variable', extractVariable, mainJs);\n-    finalJS += loadThings(functionsToLoad, 'function', extractFunction, mainJs);\n+    finalJS += loadThings(arraysToLoad, 'array', extractArrayVariable, searchJs);\n+    finalJS += loadThings(variablesToLoad, 'variable', extractVariable, searchJs);\n+    finalJS += loadThings(functionsToLoad, 'function', extractFunction, searchJs);\n \n     var loaded = loadContent(finalJS);\n     var index = loaded.buildIndex(searchIndex.rawSearchIndex);\n@@ -382,12 +382,12 @@ function runChecks(testFile, loaded, index) {\n }\n \n function load_files(doc_folder, resource_suffix, crate) {\n-    var mainJs = readFile(path.join(doc_folder, \"main\" + resource_suffix + \".js\"));\n+    var searchJs = readFile(path.join(doc_folder, \"search\" + resource_suffix + \".js\"));\n     var storageJs = readFile(path.join(doc_folder, \"storage\" + resource_suffix + \".js\"));\n     var searchIndex = readFile(\n         path.join(doc_folder, \"search-index\" + resource_suffix + \".js\")).split(\"\\n\");\n \n-    return loadMainJsAndIndex(mainJs, searchIndex, storageJs, crate);\n+    return loadSearchJsAndIndex(searchJs, searchIndex, storageJs, crate);\n }\n \n function showHelp() {"}]}