{"sha": "25e4366b4cea8ef52f3d1f1ff4f26df3587ae9f6", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI1ZTQzNjZiNGNlYThlZjUyZjNkMWYxZmY0ZjI2ZGYzNTg3YWU5ZjY=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2019-03-16T06:56:53Z"}, "committer": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2019-03-16T14:40:30Z"}, "message": "Rollup merge of #59158 - Manishearth:fix-minification, r=GuillaumeGomez\n\nRevert \"Don't generate minification variable if minification disabled\"\n\nReverts #58643\n\nFixes #59157\n\nhttps://github.com/rust-lang/rust/pull/58643 made us stop generating minification variables when minification is disabled, however they may still be needed for parent crates that were generated with minification (this will always be the case for libstd and libcore)\n\nr? @QuietMisdreavus @GuillaumeGomez", "tree": {"sha": "e98f730548bfadb0a9f86b5d146ec7e62f5ee0f3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e98f730548bfadb0a9f86b5d146ec7e62f5ee0f3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/25e4366b4cea8ef52f3d1f1ff4f26df3587ae9f6", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZ1R8CLMp8f2GxWoQ/vbIBR0OATwFAlyNCt4ACgkQ/vbIBR0O\nATyRdQ/8DZZr4Bi4b2WQh411Vrhz3t9PhZDNT9aKxvLFkTSim3hyjKesZce0QjFA\ng8/jAM/LvlyDKsp9D3lNMnOL1mkORKeixh/DfW7frpoqmdHGjDsW60VE5+fR2yt4\npBjhs6aFh9domiBI3gkBxs/+Hefy7DsaziQh1JofNzmqeYY7Q8qrJrqhK89eWwqd\nHFz//Wl8q5eIfWWZAncTk3JENL/KyxtynXwAPA85+5HFKscJwT66G2nXMpPeOLz4\nEJ48bUMZQdTZEAufFjP0mO3WX/SllJJwjaQOse7mhTlztjSjdoUhJtptg0ZDx90j\n1WCLP3H5MuwB6XNWj20xLnPyhIxBAzMOLqgIeOhuVeqY7z+FJUiOlh0zYJDS9gtI\nBQI8oOrTCUEjFn9GO6w0+dNC+SjcZqNAY+ja+W36eL1mHq+Rjg+dz9FxhMBochtN\nSTekaIPxEmAVQ5pemjhel2900voa3u8/374m2yMN1lGj7KzjAc7I6TYs/x/DxE5w\naMH6yDP+cBA61oz6r1dVfHu7t3mQCMSqjoKouK59uPkOtvgs1UzmO5OaMxIIwLfS\n5pHSyKWj1V9w8si7jMGpNIr+Ar07vJaGPieQwTABdQNut1sFXQUOBhsSGwYtwA2O\nsJRoKR39m8Y4WPF0xWnYHi4sIbOXescShjOHHWCNM3gbqD9YPi8=\n=8ifW\n-----END PGP SIGNATURE-----", "payload": "tree e98f730548bfadb0a9f86b5d146ec7e62f5ee0f3\nparent ce9efb18226568878821b7198cf229966157d4c2\nparent c37dab7df82e38788648044017ba6dc48c240776\nauthor kennytm <kennytm@gmail.com> 1552719413 +0800\ncommitter kennytm <kennytm@gmail.com> 1552747230 +0800\n\nRollup merge of #59158 - Manishearth:fix-minification, r=GuillaumeGomez\n\nRevert \"Don't generate minification variable if minification disabled\"\n\nReverts #58643\n\nFixes #59157\n\nhttps://github.com/rust-lang/rust/pull/58643 made us stop generating minification variables when minification is disabled, however they may still be needed for parent crates that were generated with minification (this will always be the case for libstd and libcore)\n\nr? @QuietMisdreavus @GuillaumeGomez\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/25e4366b4cea8ef52f3d1f1ff4f26df3587ae9f6", "html_url": "https://github.com/rust-lang/rust/commit/25e4366b4cea8ef52f3d1f1ff4f26df3587ae9f6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/25e4366b4cea8ef52f3d1f1ff4f26df3587ae9f6/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ce9efb18226568878821b7198cf229966157d4c2", "url": "https://api.github.com/repos/rust-lang/rust/commits/ce9efb18226568878821b7198cf229966157d4c2", "html_url": "https://github.com/rust-lang/rust/commit/ce9efb18226568878821b7198cf229966157d4c2"}, {"sha": "c37dab7df82e38788648044017ba6dc48c240776", "url": "https://api.github.com/repos/rust-lang/rust/commits/c37dab7df82e38788648044017ba6dc48c240776", "html_url": "https://github.com/rust-lang/rust/commit/c37dab7df82e38788648044017ba6dc48c240776"}], "stats": {"total": 6, "additions": 1, "deletions": 5}, "files": [{"sha": "5109e775ebf8113b742187e9c40fba27fbf96ee6", "filename": "src/librustdoc/html/render.rs", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/25e4366b4cea8ef52f3d1f1ff4f26df3587ae9f6/src%2Flibrustdoc%2Fhtml%2Frender.rs", "raw_url": "https://github.com/rust-lang/rust/raw/25e4366b4cea8ef52f3d1f1ff4f26df3587ae9f6/src%2Flibrustdoc%2Fhtml%2Frender.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender.rs?ref=25e4366b4cea8ef52f3d1f1ff4f26df3587ae9f6", "patch": "@@ -1117,11 +1117,7 @@ themePicker.onblur = handleThemeButtonsBlur;\n     // with rustdoc running in parallel.\n     all_indexes.sort();\n     let mut w = try_err!(File::create(&dst), &dst);\n-    if options.enable_minification {\n-        try_err!(writeln!(&mut w, \"var N=null,E=\\\"\\\",T=\\\"t\\\",U=\\\"u\\\",searchIndex={{}};\"), &dst);\n-    } else {\n-        try_err!(writeln!(&mut w, \"var searchIndex={{}};\"), &dst);\n-    }\n+    try_err!(writeln!(&mut w, \"var N=null,E=\\\"\\\",T=\\\"t\\\",U=\\\"u\\\",searchIndex={{}};\"), &dst);\n     try_err!(write_minify_replacer(&mut w,\n                                    &format!(\"{}\\n{}\", variables.join(\"\"), all_indexes.join(\"\\n\")),\n                                    options.enable_minification),"}]}