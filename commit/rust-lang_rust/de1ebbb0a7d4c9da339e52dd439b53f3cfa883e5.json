{"sha": "de1ebbb0a7d4c9da339e52dd439b53f3cfa883e5", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRlMWViYmIwYTdkNGM5ZGEzMzllNTJkZDQzOWI1M2YzY2ZhODgzZTU=", "commit": {"author": {"name": "Bastian Kauschke", "email": "bastian_kauschke@hotmail.de", "date": "2020-11-10T09:31:33Z"}, "committer": {"name": "Bastian Kauschke", "email": "bastian_kauschke@hotmail.de", "date": "2020-11-10T11:31:57Z"}, "message": "const param in async", "tree": {"sha": "4a0b320c74f10029a36576595772e9098ccf8481", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4a0b320c74f10029a36576595772e9098ccf8481"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/de1ebbb0a7d4c9da339e52dd439b53f3cfa883e5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/de1ebbb0a7d4c9da339e52dd439b53f3cfa883e5", "html_url": "https://github.com/rust-lang/rust/commit/de1ebbb0a7d4c9da339e52dd439b53f3cfa883e5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/de1ebbb0a7d4c9da339e52dd439b53f3cfa883e5/comments", "author": {"login": "lcnr", "id": 29864074, "node_id": "MDQ6VXNlcjI5ODY0MDc0", "avatar_url": "https://avatars.githubusercontent.com/u/29864074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lcnr", "html_url": "https://github.com/lcnr", "followers_url": "https://api.github.com/users/lcnr/followers", "following_url": "https://api.github.com/users/lcnr/following{/other_user}", "gists_url": "https://api.github.com/users/lcnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/lcnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lcnr/subscriptions", "organizations_url": "https://api.github.com/users/lcnr/orgs", "repos_url": "https://api.github.com/users/lcnr/repos", "events_url": "https://api.github.com/users/lcnr/events{/privacy}", "received_events_url": "https://api.github.com/users/lcnr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lcnr", "id": 29864074, "node_id": "MDQ6VXNlcjI5ODY0MDc0", "avatar_url": "https://avatars.githubusercontent.com/u/29864074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lcnr", "html_url": "https://github.com/lcnr", "followers_url": "https://api.github.com/users/lcnr/followers", "following_url": "https://api.github.com/users/lcnr/following{/other_user}", "gists_url": "https://api.github.com/users/lcnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/lcnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lcnr/subscriptions", "organizations_url": "https://api.github.com/users/lcnr/orgs", "repos_url": "https://api.github.com/users/lcnr/repos", "events_url": "https://api.github.com/users/lcnr/events{/privacy}", "received_events_url": "https://api.github.com/users/lcnr/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a30b28e8932f8eb2931d1a41bc9271961e90f1cb", "url": "https://api.github.com/repos/rust-lang/rust/commits/a30b28e8932f8eb2931d1a41bc9271961e90f1cb", "html_url": "https://github.com/rust-lang/rust/commit/a30b28e8932f8eb2931d1a41bc9271961e90f1cb"}], "stats": {"total": 35, "additions": 35, "deletions": 0}, "files": [{"sha": "e8601985287bd9c2e2105d3b0634272b395348dd", "filename": "src/test/ui/const-generics/const-param-in-async.rs", "status": "added", "additions": 35, "deletions": 0, "changes": 35, "blob_url": "https://github.com/rust-lang/rust/blob/de1ebbb0a7d4c9da339e52dd439b53f3cfa883e5/src%2Ftest%2Fui%2Fconst-generics%2Fconst-param-in-async.rs", "raw_url": "https://github.com/rust-lang/rust/raw/de1ebbb0a7d4c9da339e52dd439b53f3cfa883e5/src%2Ftest%2Fui%2Fconst-generics%2Fconst-param-in-async.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fconst-param-in-async.rs?ref=de1ebbb0a7d4c9da339e52dd439b53f3cfa883e5", "patch": "@@ -0,0 +1,35 @@\n+// edition:2018\n+// check-pass\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n+\n+async fn foo<const N: usize>(arg: [u8; N]) -> usize { arg.len() }\n+\n+async fn bar<const N: usize>() -> [u8; N] {\n+    [0; N]\n+}\n+\n+trait Trait<const N: usize> {\n+    fn fynn(&self) -> usize;\n+}\n+impl<const N: usize> Trait<N> for [u8; N] {\n+    fn fynn(&self) -> usize {\n+        N\n+    }\n+}\n+async fn baz<const N: usize>() -> impl Trait<N> {\n+    [0; N]\n+}\n+\n+async fn biz<const N: usize>(v: impl Trait<N>) -> usize {\n+    v.fynn()\n+}\n+\n+async fn user<const N: usize>() {\n+    let _ = foo::<N>(bar().await).await;\n+    let _ = biz(baz::<N>().await).await;\n+}\n+\n+fn main() { }"}]}