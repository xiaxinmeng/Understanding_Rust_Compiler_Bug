{"sha": "78817a319476d8af40c4f78e8c47dc958781f88f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc4ODE3YTMxOTQ3NmQ4YWY0MGM0Zjc4ZThjNDdkYzk1ODc4MWY4OGY=", "commit": {"author": {"name": "vsrs", "email": "vit@conrlab.com", "date": "2020-05-18T07:27:00Z"}, "committer": {"name": "vsrs", "email": "vit@conrlab.com", "date": "2020-05-18T07:27:00Z"}, "message": "Add \"rust-analyzer.lens.enable\"", "tree": {"sha": "e15efb6555e667cea876cc9479278cb812b792e4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e15efb6555e667cea876cc9479278cb812b792e4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/78817a319476d8af40c4f78e8c47dc958781f88f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/78817a319476d8af40c4f78e8c47dc958781f88f", "html_url": "https://github.com/rust-lang/rust/commit/78817a319476d8af40c4f78e8c47dc958781f88f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/78817a319476d8af40c4f78e8c47dc958781f88f/comments", "author": {"login": "vsrs", "id": 62505555, "node_id": "MDQ6VXNlcjYyNTA1NTU1", "avatar_url": "https://avatars.githubusercontent.com/u/62505555?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vsrs", "html_url": "https://github.com/vsrs", "followers_url": "https://api.github.com/users/vsrs/followers", "following_url": "https://api.github.com/users/vsrs/following{/other_user}", "gists_url": "https://api.github.com/users/vsrs/gists{/gist_id}", "starred_url": "https://api.github.com/users/vsrs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vsrs/subscriptions", "organizations_url": "https://api.github.com/users/vsrs/orgs", "repos_url": "https://api.github.com/users/vsrs/repos", "events_url": "https://api.github.com/users/vsrs/events{/privacy}", "received_events_url": "https://api.github.com/users/vsrs/received_events", "type": "User", "site_admin": false}, "committer": {"login": "vsrs", "id": 62505555, "node_id": "MDQ6VXNlcjYyNTA1NTU1", "avatar_url": "https://avatars.githubusercontent.com/u/62505555?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vsrs", "html_url": "https://github.com/vsrs", "followers_url": "https://api.github.com/users/vsrs/followers", "following_url": "https://api.github.com/users/vsrs/following{/other_user}", "gists_url": "https://api.github.com/users/vsrs/gists{/gist_id}", "starred_url": "https://api.github.com/users/vsrs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vsrs/subscriptions", "organizations_url": "https://api.github.com/users/vsrs/orgs", "repos_url": "https://api.github.com/users/vsrs/repos", "events_url": "https://api.github.com/users/vsrs/events{/privacy}", "received_events_url": "https://api.github.com/users/vsrs/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3d445256fe56f4a7ead64514fb57b79079973d84", "url": "https://api.github.com/repos/rust-lang/rust/commits/3d445256fe56f4a7ead64514fb57b79079973d84", "html_url": "https://github.com/rust-lang/rust/commit/3d445256fe56f4a7ead64514fb57b79079973d84"}], "stats": {"total": 28, "additions": 22, "deletions": 6}, "files": [{"sha": "b5dc6f0fa98507e0196c263e31916f056d090815", "filename": "crates/rust-analyzer/src/config.rs", "status": "modified", "additions": 12, "deletions": 3, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/78817a319476d8af40c4f78e8c47dc958781f88f/crates%2Frust-analyzer%2Fsrc%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/78817a319476d8af40c4f78e8c47dc958781f88f/crates%2Frust-analyzer%2Fsrc%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fconfig.rs?ref=78817a319476d8af40c4f78e8c47dc958781f88f", "patch": "@@ -50,6 +50,8 @@ impl Default for LensConfig {\n }\n \n impl LensConfig {\n+    pub const NO_LENS: LensConfig = Self { run: false, debug: false, impementations: false };\n+\n     pub fn any(&self) -> bool {\n         self.impementations || self.runnable()\n     }\n@@ -224,9 +226,16 @@ impl Config {\n         set(value, \"/completion/addCallParenthesis\", &mut self.completion.add_call_parenthesis);\n         set(value, \"/completion/addCallArgumentSnippets\", &mut self.completion.add_call_argument_snippets);\n         set(value, \"/callInfo/full\", &mut self.call_info_full);\n-        set(value, \"/lens/run\", &mut self.lens.run);\n-        set(value, \"/lens/debug\", &mut self.lens.debug);\n-        set(value, \"/lens/implementations\", &mut self.lens.impementations);\n+\n+        let mut lens_enabled = true;\n+        set(value, \"/lens/enable\", &mut lens_enabled);\n+        if lens_enabled {\n+            set(value, \"/lens/run\", &mut self.lens.run);\n+            set(value, \"/lens/debug\", &mut self.lens.debug);\n+            set(value, \"/lens/implementations\", &mut self.lens.impementations);\n+        } else {\n+            self.lens = LensConfig::NO_LENS;\n+        }\n \n         log::info!(\"Config::update() = {:#?}\", self);\n "}, {"sha": "38c77533cdfa924f8c910a5201ad54f92d7bbb1e", "filename": "editors/code/package.json", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/78817a319476d8af40c4f78e8c47dc958781f88f/editors%2Fcode%2Fpackage.json", "raw_url": "https://github.com/rust-lang/rust/raw/78817a319476d8af40c4f78e8c47dc958781f88f/editors%2Fcode%2Fpackage.json", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fpackage.json?ref=78817a319476d8af40c4f78e8c47dc958781f88f", "patch": "@@ -444,18 +444,23 @@\n                     \"default\": {},\n                     \"description\": \"Optional settings passed to the debug engine. Example:\\n{ \\\"lldb\\\": { \\\"terminal\\\":\\\"external\\\"} }\"\n                 },\n+                \"rust-analyzer.lens.enable\": {\n+                    \"description\": \"Whether to show CodeLens in Rust files.\",\n+                    \"type\": \"boolean\",\n+                    \"default\": true\n+                },\n                 \"rust-analyzer.lens.run\": {\n-                    \"description\": \"Whether to show Run lens.\",\n+                    \"markdownDescription\": \"Whether to show Run lens. Only applies when `#rust-analyzer.lens.enable#` is set.\",\n                     \"type\": \"boolean\",\n                     \"default\": true\n                 },\n                 \"rust-analyzer.lens.debug\": {\n-                    \"description\": \"Whether to show Debug lens.\",\n+                    \"markdownDescription\": \"Whether to show Debug lens. Only applies when `#rust-analyzer.lens.enable#` is set.\",\n                     \"type\": \"boolean\",\n                     \"default\": true\n                 },\n                 \"rust-analyzer.lens.implementations\": {\n-                    \"description\": \"Whether to show Implementations lens.\",\n+                    \"markdownDescription\": \"Whether to show Implementations lens. Only applies when `#rust-analyzer.lens.enable#` is set.\",\n                     \"type\": \"boolean\",\n                     \"default\": true\n                 }"}, {"sha": "ee294fbe312c4c9b5e121cbb769fd5f97b42dccb", "filename": "editors/code/src/config.ts", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/78817a319476d8af40c4f78e8c47dc958781f88f/editors%2Fcode%2Fsrc%2Fconfig.ts", "raw_url": "https://github.com/rust-lang/rust/raw/78817a319476d8af40c4f78e8c47dc958781f88f/editors%2Fcode%2Fsrc%2Fconfig.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Fconfig.ts?ref=78817a319476d8af40c4f78e8c47dc958781f88f", "patch": "@@ -16,6 +16,7 @@ export class Config {\n         \"files\",\n         \"highlighting\",\n         \"updates.channel\",\n+        \"lens.enable\",\n         \"lens.run\",\n         \"lens.debug\",\n         \"lens.implementations\",\n@@ -125,6 +126,7 @@ export class Config {\n \n     get lens() {\n         return {\n+            enable: this.get<boolean>(\"lens.enable\"),\n             run: this.get<boolean>(\"lens.run\"),\n             debug: this.get<boolean>(\"lens.debug\"),\n             implementations: this.get<boolean>(\"lens.implementations\"),"}]}