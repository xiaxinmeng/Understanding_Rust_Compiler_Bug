{"sha": "dc8fec28cc46fc0a999fa3069ccdb4595cea9df3", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRjOGZlYzI4Y2M0NmZjMGE5OTlmYTMwNjljY2RiNDU5NWNlYTlkZjM=", "commit": {"author": {"name": "Oliver Scherer", "email": "github35764891676564198441@oli-obk.de", "date": "2019-03-12T13:47:45Z"}, "committer": {"name": "Oliver Scherer", "email": "github35764891676564198441@oli-obk.de", "date": "2019-04-02T14:14:58Z"}, "message": "Update rustdoc", "tree": {"sha": "4ddcd61b3459a93e1cb49e861fb2b0b0bbe6c720", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4ddcd61b3459a93e1cb49e861fb2b0b0bbe6c720"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/dc8fec28cc46fc0a999fa3069ccdb4595cea9df3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/dc8fec28cc46fc0a999fa3069ccdb4595cea9df3", "html_url": "https://github.com/rust-lang/rust/commit/dc8fec28cc46fc0a999fa3069ccdb4595cea9df3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/dc8fec28cc46fc0a999fa3069ccdb4595cea9df3/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "96404ee8443c7475b3b6a7b9beb142e7e9354673", "url": "https://api.github.com/repos/rust-lang/rust/commits/96404ee8443c7475b3b6a7b9beb142e7e9354673", "html_url": "https://github.com/rust-lang/rust/commit/96404ee8443c7475b3b6a7b9beb142e7e9354673"}], "stats": {"total": 10, "additions": 6, "deletions": 4}, "files": [{"sha": "af5c95ea589966cb1389219d9d6f7d90a66fa5c9", "filename": "src/librustdoc/config.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/dc8fec28cc46fc0a999fa3069ccdb4595cea9df3/src%2Flibrustdoc%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc8fec28cc46fc0a999fa3069ccdb4595cea9df3/src%2Flibrustdoc%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fconfig.rs?ref=dc8fec28cc46fc0a999fa3069ccdb4595cea9df3", "patch": "@@ -254,10 +254,11 @@ impl Options {\n                                       (instead was `{}`)\", arg));\n             }\n         };\n+        // FIXME: deduplicate this code from the identical code in librustc/session/config.rs\n         let error_format = match matches.opt_str(\"error-format\").as_ref().map(|s| &s[..]) {\n             Some(\"human\") => ErrorOutputType::HumanReadable(color),\n-            Some(\"json\") => ErrorOutputType::Json(false),\n-            Some(\"pretty-json\") => ErrorOutputType::Json(true),\n+            Some(\"json\") => ErrorOutputType::Json { pretty: false, colorful_rendered: false },\n+            Some(\"pretty-json\") => ErrorOutputType::Json { pretty: true, colorful_rendered: false },\n             Some(\"short\") => ErrorOutputType::Short(color),\n             None => ErrorOutputType::HumanReadable(color),\n             Some(arg) => {"}, {"sha": "18bb5eef538badc620c8753ec0ec9ad6aedfc397", "filename": "src/librustdoc/core.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/dc8fec28cc46fc0a999fa3069ccdb4595cea9df3/src%2Flibrustdoc%2Fcore.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc8fec28cc46fc0a999fa3069ccdb4595cea9df3/src%2Flibrustdoc%2Fcore.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fcore.rs?ref=dc8fec28cc46fc0a999fa3069ccdb4595cea9df3", "patch": "@@ -307,14 +307,15 @@ pub fn new_handler(error_format: ErrorOutputType,\n                 sessopts.debugging_opts.teach,\n             ).ui_testing(ui_testing)\n         ),\n-        ErrorOutputType::Json(pretty) => {\n+        ErrorOutputType::Json { pretty, colorful_rendered } => {\n             let source_map = source_map.unwrap_or_else(\n                 || Lrc::new(source_map::SourceMap::new(sessopts.file_path_mapping())));\n             Box::new(\n                 JsonEmitter::stderr(\n                     None,\n                     source_map,\n                     pretty,\n+                    colorful_rendered,\n                 ).ui_testing(ui_testing)\n             )\n         },"}, {"sha": "abf74158c938e4b0b8f65f6dd9646ece7e517510", "filename": "src/librustdoc/test.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dc8fec28cc46fc0a999fa3069ccdb4595cea9df3/src%2Flibrustdoc%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc8fec28cc46fc0a999fa3069ccdb4595cea9df3/src%2Flibrustdoc%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Ftest.rs?ref=dc8fec28cc46fc0a999fa3069ccdb4595cea9df3", "patch": "@@ -381,7 +381,7 @@ pub fn make_test(s: &str,\n         // Any errors in parsing should also appear when the doctest is compiled for real, so just\n         // send all the errors that libsyntax emits directly into a `Sink` instead of stderr.\n         let cm = Lrc::new(SourceMap::new(FilePathMapping::empty()));\n-        let emitter = EmitterWriter::new(box io::sink(), None, false, false);\n+        let emitter = EmitterWriter::new(box io::sink(), None, false, false, false);\n         let handler = Handler::with_emitter(false, None, box emitter);\n         let sess = ParseSess::with_span_handler(handler, cm);\n "}]}