{"sha": "be3d390cf51545b880c5cd78585fa408c087f786", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJlM2QzOTBjZjUxNTQ1Yjg4MGM1Y2Q3ODU4NWZhNDA4YzA4N2Y3ODY=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-10-15T14:43:47Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-10-15T14:43:47Z"}, "message": "Auto merge of #29050 - rkruppe:dec2flt-lonely-sign, r=alexcrichton\n\nFixes #29042", "tree": {"sha": "9075384c73eff1774dfc50fb829613a0c0d71ee5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9075384c73eff1774dfc50fb829613a0c0d71ee5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/be3d390cf51545b880c5cd78585fa408c087f786", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/be3d390cf51545b880c5cd78585fa408c087f786", "html_url": "https://github.com/rust-lang/rust/commit/be3d390cf51545b880c5cd78585fa408c087f786", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/be3d390cf51545b880c5cd78585fa408c087f786/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7ac89d27ad728d39cbc3ef99ccecdb24de45c0c3", "url": "https://api.github.com/repos/rust-lang/rust/commits/7ac89d27ad728d39cbc3ef99ccecdb24de45c0c3", "html_url": "https://github.com/rust-lang/rust/commit/7ac89d27ad728d39cbc3ef99ccecdb24de45c0c3"}, {"sha": "71dcd7f70c084ea4f8e7788b617c9c2ea786e6b7", "url": "https://api.github.com/repos/rust-lang/rust/commits/71dcd7f70c084ea4f8e7788b617c9c2ea786e6b7", "html_url": "https://github.com/rust-lang/rust/commit/71dcd7f70c084ea4f8e7788b617c9c2ea786e6b7"}], "stats": {"total": 19, "additions": 18, "deletions": 1}, "files": [{"sha": "414bcc874eac1ca320e7dac04aedc9a03516ce43", "filename": "src/libcore/num/dec2flt/parse.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/be3d390cf51545b880c5cd78585fa408c087f786/src%2Flibcore%2Fnum%2Fdec2flt%2Fparse.rs", "raw_url": "https://github.com/rust-lang/rust/raw/be3d390cf51545b880c5cd78585fa408c087f786/src%2Flibcore%2Fnum%2Fdec2flt%2Fparse.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fnum%2Fdec2flt%2Fparse.rs?ref=be3d390cf51545b880c5cd78585fa408c087f786", "patch": "@@ -59,7 +59,12 @@ pub fn parse_decimal(s: &str) -> ParseResult {\n     let s = s.as_bytes();\n     let (integral, s) = eat_digits(s);\n     match s.first() {\n-        None => Valid(Decimal::new(integral, b\"\", 0)),\n+        None => {\n+            if integral.is_empty() {\n+                return Invalid; // No digits at all\n+            }\n+            Valid(Decimal::new(integral, b\"\", 0))\n+        }\n         Some(&b'e') | Some(&b'E') => {\n             if integral.is_empty() {\n                 return Invalid; // No digits before 'e'"}, {"sha": "0c92b2fe2a7dc425de69110c586b98daf62c14d3", "filename": "src/libcoretest/num/dec2flt/mod.rs", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/be3d390cf51545b880c5cd78585fa408c087f786/src%2Flibcoretest%2Fnum%2Fdec2flt%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/be3d390cf51545b880c5cd78585fa408c087f786/src%2Flibcoretest%2Fnum%2Fdec2flt%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcoretest%2Fnum%2Fdec2flt%2Fmod.rs?ref=be3d390cf51545b880c5cd78585fa408c087f786", "patch": "@@ -101,6 +101,18 @@ fn lonely_dot() {\n     assert_eq!(\".\".parse(), Ok(0.0));\n }\n \n+#[test]\n+fn lonely_sign() {\n+    assert!(\"+\".parse::<f32>().is_err());\n+    assert!(\"-\".parse::<f64>().is_err());\n+}\n+\n+#[test]\n+fn whitespace() {\n+    assert!(\" 1.0\".parse::<f32>().is_err());\n+    assert!(\"1.0 \".parse::<f64>().is_err());\n+}\n+\n #[test]\n fn nan() {\n     assert!(\"NaN\".parse::<f32>().unwrap().is_nan());"}]}