{"sha": "59947717c5644a110caea924114b8f64fcb8234c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU5OTQ3NzE3YzU2NDRhMTEwY2FlYTkyNDExNGI4ZjY0ZmNiODIzNGM=", "commit": {"author": {"name": "Caleb Zulawski", "email": "caleb.zulawski@gmail.com", "date": "2020-12-17T06:19:39Z"}, "committer": {"name": "Caleb Zulawski", "email": "caleb.zulawski@gmail.com", "date": "2020-12-17T06:19:39Z"}, "message": "Add workaround for rust-lang/rust#80108", "tree": {"sha": "3143b9586b0c644bf4d89f8f92f221c74319f71e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3143b9586b0c644bf4d89f8f92f221c74319f71e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/59947717c5644a110caea924114b8f64fcb8234c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/59947717c5644a110caea924114b8f64fcb8234c", "html_url": "https://github.com/rust-lang/rust/commit/59947717c5644a110caea924114b8f64fcb8234c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/59947717c5644a110caea924114b8f64fcb8234c/comments", "author": {"login": "calebzulawski", "id": 563826, "node_id": "MDQ6VXNlcjU2MzgyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/563826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/calebzulawski", "html_url": "https://github.com/calebzulawski", "followers_url": "https://api.github.com/users/calebzulawski/followers", "following_url": "https://api.github.com/users/calebzulawski/following{/other_user}", "gists_url": "https://api.github.com/users/calebzulawski/gists{/gist_id}", "starred_url": "https://api.github.com/users/calebzulawski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/calebzulawski/subscriptions", "organizations_url": "https://api.github.com/users/calebzulawski/orgs", "repos_url": "https://api.github.com/users/calebzulawski/repos", "events_url": "https://api.github.com/users/calebzulawski/events{/privacy}", "received_events_url": "https://api.github.com/users/calebzulawski/received_events", "type": "User", "site_admin": false}, "committer": {"login": "calebzulawski", "id": 563826, "node_id": "MDQ6VXNlcjU2MzgyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/563826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/calebzulawski", "html_url": "https://github.com/calebzulawski", "followers_url": "https://api.github.com/users/calebzulawski/followers", "following_url": "https://api.github.com/users/calebzulawski/following{/other_user}", "gists_url": "https://api.github.com/users/calebzulawski/gists{/gist_id}", "starred_url": "https://api.github.com/users/calebzulawski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/calebzulawski/subscriptions", "organizations_url": "https://api.github.com/users/calebzulawski/orgs", "repos_url": "https://api.github.com/users/calebzulawski/repos", "events_url": "https://api.github.com/users/calebzulawski/events{/privacy}", "received_events_url": "https://api.github.com/users/calebzulawski/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9b8cb18c9f9efe95460a1d748894bc9b6a46a0f3", "url": "https://api.github.com/repos/rust-lang/rust/commits/9b8cb18c9f9efe95460a1d748894bc9b6a46a0f3", "html_url": "https://github.com/rust-lang/rust/commit/9b8cb18c9f9efe95460a1d748894bc9b6a46a0f3"}], "stats": {"total": 18, "additions": 17, "deletions": 1}, "files": [{"sha": "7e4d851424908c1b0a3583aa913ee6270fb98e90", "filename": "crates/core_simd/src/macros.rs", "status": "modified", "additions": 17, "deletions": 1, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/59947717c5644a110caea924114b8f64fcb8234c/crates%2Fcore_simd%2Fsrc%2Fmacros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/59947717c5644a110caea924114b8f64fcb8234c/crates%2Fcore_simd%2Fsrc%2Fmacros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fcore_simd%2Fsrc%2Fmacros.rs?ref=59947717c5644a110caea924114b8f64fcb8234c", "patch": "@@ -52,7 +52,23 @@ macro_rules! impl_vector {\n \n             /// Converts a SIMD vector to an array.\n             pub const fn to_array(self) -> [$type; LANES] {\n-                self.0\n+                // workaround for rust-lang/rust#80108\n+                // TODO fix this\n+                #[cfg(target_arch = \"wasm32\")]\n+                {\n+                    let mut arr = [self.0[0]; LANES];\n+                    let mut i = 0;\n+                    while i < LANES {\n+                        arr[i] = self.0[i];\n+                        i += 1;\n+                    }\n+                    arr\n+                }\n+\n+                #[cfg(not(target_arch = \"wasm32\"))]\n+                {\n+                    self.0\n+                }\n             }\n         }\n "}]}