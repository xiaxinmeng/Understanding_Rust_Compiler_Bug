{"sha": "9b3f8bf2a9a78ab41f6dc112162a64287ce56d89", "node_id": "MDY6Q29tbWl0NzI0NzEyOjliM2Y4YmYyYTlhNzhhYjQxZjZkYzExMjE2MmE2NDI4N2NlNTZkODk=", "commit": {"author": {"name": "Elly Jones", "email": "elly@leptoquark.net", "date": "2011-12-02T03:19:10Z"}, "committer": {"name": "Elly Jones", "email": "elly@leptoquark.net", "date": "2011-12-02T03:19:53Z"}, "message": "libstd: add fs::change_dir()", "tree": {"sha": "f63d0a5cb181b779083f2f6a0d5d308cb11bc647", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f63d0a5cb181b779083f2f6a0d5d308cb11bc647"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9b3f8bf2a9a78ab41f6dc112162a64287ce56d89", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9b3f8bf2a9a78ab41f6dc112162a64287ce56d89", "html_url": "https://github.com/rust-lang/rust/commit/9b3f8bf2a9a78ab41f6dc112162a64287ce56d89", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9b3f8bf2a9a78ab41f6dc112162a64287ce56d89/comments", "author": null, "committer": null, "parents": [{"sha": "1974cf9a817455fb3dda94f6bb6ad7c85647260c", "url": "https://api.github.com/repos/rust-lang/rust/commits/1974cf9a817455fb3dda94f6bb6ad7c85647260c", "html_url": "https://github.com/rust-lang/rust/commit/1974cf9a817455fb3dda94f6bb6ad7c85647260c"}], "stats": {"total": 18, "additions": 18, "deletions": 0}, "files": [{"sha": "945a0a32c7bfa7a9a7f8ac29e08b22327d6d08c0", "filename": "src/lib/fs.rs", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/9b3f8bf2a9a78ab41f6dc112162a64287ce56d89/src%2Flib%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9b3f8bf2a9a78ab41f6dc112162a64287ce56d89/src%2Flib%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib%2Ffs.rs?ref=9b3f8bf2a9a78ab41f6dc112162a64287ce56d89", "patch": "@@ -178,6 +178,21 @@ fn remove_dir(p: path) -> bool {\n     }\n }\n \n+fn change_dir(p: path) -> bool {\n+    ret chdir(p);\n+\n+    #[cfg(target_os = \"win32\")]\n+    fn chdir(_p: path) -> bool {\n+        ret str::as_buf(_p, {|buf| os::kernel32::SetCurrentDirectory(buf)});\n+    }\n+\n+    #[cfg(target_os = \"linux\")]\n+    #[cfg(target_os = \"macos\")]\n+    fn chdir(_p: path) -> bool {\n+        ret str::as_buf(_p, {|buf| os::libc::chdir(buf) == 0i32 });\n+    }\n+}\n+\n /*\n Function: path_is_absolute\n "}, {"sha": "a2dc0e8632a387eb44afe53a9ab0cfde5a35f659", "filename": "src/lib/linux_os.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/9b3f8bf2a9a78ab41f6dc112162a64287ce56d89/src%2Flib%2Flinux_os.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9b3f8bf2a9a78ab41f6dc112162a64287ce56d89/src%2Flib%2Flinux_os.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib%2Flinux_os.rs?ref=9b3f8bf2a9a78ab41f6dc112162a64287ce56d89", "patch": "@@ -53,6 +53,7 @@ native mod libc {\n     fn readlink(path: str::sbuf, buf: str::sbuf, bufsize: size_t) -> ssize_t;\n     fn mkdir(path: str::sbuf, mode: c_int) -> c_int;\n     fn rmdir(path: str::sbuf) -> c_int;\n+    fn chdir(path: str::sbuf) -> c_int;\n }\n \n mod libc_constants {"}, {"sha": "ad90fef489eb74cda645c8320da49eb28e0ea448", "filename": "src/lib/macos_os.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/9b3f8bf2a9a78ab41f6dc112162a64287ce56d89/src%2Flib%2Fmacos_os.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9b3f8bf2a9a78ab41f6dc112162a64287ce56d89/src%2Flib%2Fmacos_os.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib%2Fmacos_os.rs?ref=9b3f8bf2a9a78ab41f6dc112162a64287ce56d89", "patch": "@@ -46,6 +46,7 @@ native mod libc {\n     fn waitpid(pid: pid_t, &status: c_int, options: c_int) -> c_int;\n     fn mkdir(s: str::sbuf, mode: c_int) -> c_int;\n     fn rmdir(s: str::sbuf) -> c_int;\n+    fn chdir(s: str::sbuf) -> c_int;\n }\n \n mod libc_constants {"}, {"sha": "5099b7716d67ae89513c07edf434f641eda56951", "filename": "src/lib/win32_os.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/9b3f8bf2a9a78ab41f6dc112162a64287ce56d89/src%2Flib%2Fwin32_os.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9b3f8bf2a9a78ab41f6dc112162a64287ce56d89/src%2Flib%2Fwin32_os.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib%2Fwin32_os.rs?ref=9b3f8bf2a9a78ab41f6dc112162a64287ce56d89", "patch": "@@ -55,6 +55,7 @@ native mod kernel32 {\n     fn CreateDirectoryA(lpPathName: LPCTSTR,\n                         lpSecurityAttributes: LPSECURITY_ATTRIBUTES) -> bool;\n     fn RemoveDirectoryA(lpPathName: LPCTSTR) -> bool;\n+    fn SetCurrentDirectory(lpPathName: LPCTSTR) -> bool;\n }\n \n // FIXME turn into constants"}]}