{"sha": "f2ebd0a11fd7ed131d669fcac20fa3b8df642f39", "node_id": "C_kwDOAAsO6NoAKGYyZWJkMGExMWZkN2VkMTMxZDY2OWZjYWMyMGZhM2I4ZGY2NDJmMzk", "commit": {"author": {"name": "Chris Copeland", "email": "chris@chrisnc.net", "date": "2022-02-19T20:08:06Z"}, "committer": {"name": "Chris Copeland", "email": "chris@chrisnc.net", "date": "2022-02-21T05:27:36Z"}, "message": "Remove assertion on output length for `getsockopt`.\n\nPOSIX allows `getsockopt` to set `*option_len` to a smaller value if\nnecessary. Windows will set `*option_len` to 1 for boolean options even\nwhen the caller passes a `BOOL` (`int`) with `*option_len` as 4.", "tree": {"sha": "ebae699d6a95c18f45dd8e0cb2f8e22bb736390e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ebae699d6a95c18f45dd8e0cb2f8e22bb736390e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f2ebd0a11fd7ed131d669fcac20fa3b8df642f39", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niIgEABYKADAWIQRUFr6XZXwtz1k0J+QUVQ2nJIXfMAUCYhMiyBIcY2hyaXNAY2hy\naXNuYy5uZXQACgkQFFUNpySF3zCHKgD/f1YsspSpCRrHzSNc07h5alI4SxuCGKx3\nbFA1AXcRiIEA/iWt0tu7Jn07XEQl3QVmCHcnj3FWD0GknQX6fKW7sqcH\n=4gbb\n-----END PGP SIGNATURE-----", "payload": "tree ebae699d6a95c18f45dd8e0cb2f8e22bb736390e\nparent 3eb983ed9916147ad4f2d93679cbff5276ca87ca\nauthor Chris Copeland <chris@chrisnc.net> 1645301286 -0800\ncommitter Chris Copeland <chris@chrisnc.net> 1645421256 -0800\n\nRemove assertion on output length for `getsockopt`.\n\nPOSIX allows `getsockopt` to set `*option_len` to a smaller value if\nnecessary. Windows will set `*option_len` to 1 for boolean options even\nwhen the caller passes a `BOOL` (`int`) with `*option_len` as 4.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f2ebd0a11fd7ed131d669fcac20fa3b8df642f39", "html_url": "https://github.com/rust-lang/rust/commit/f2ebd0a11fd7ed131d669fcac20fa3b8df642f39", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f2ebd0a11fd7ed131d669fcac20fa3b8df642f39/comments", "author": {"login": "chrisnc", "id": 2592855, "node_id": "MDQ6VXNlcjI1OTI4NTU=", "avatar_url": "https://avatars.githubusercontent.com/u/2592855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chrisnc", "html_url": "https://github.com/chrisnc", "followers_url": "https://api.github.com/users/chrisnc/followers", "following_url": "https://api.github.com/users/chrisnc/following{/other_user}", "gists_url": "https://api.github.com/users/chrisnc/gists{/gist_id}", "starred_url": "https://api.github.com/users/chrisnc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chrisnc/subscriptions", "organizations_url": "https://api.github.com/users/chrisnc/orgs", "repos_url": "https://api.github.com/users/chrisnc/repos", "events_url": "https://api.github.com/users/chrisnc/events{/privacy}", "received_events_url": "https://api.github.com/users/chrisnc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "chrisnc", "id": 2592855, "node_id": "MDQ6VXNlcjI1OTI4NTU=", "avatar_url": "https://avatars.githubusercontent.com/u/2592855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chrisnc", "html_url": "https://github.com/chrisnc", "followers_url": "https://api.github.com/users/chrisnc/followers", "following_url": "https://api.github.com/users/chrisnc/following{/other_user}", "gists_url": "https://api.github.com/users/chrisnc/gists{/gist_id}", "starred_url": "https://api.github.com/users/chrisnc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chrisnc/subscriptions", "organizations_url": "https://api.github.com/users/chrisnc/orgs", "repos_url": "https://api.github.com/users/chrisnc/repos", "events_url": "https://api.github.com/users/chrisnc/events{/privacy}", "received_events_url": "https://api.github.com/users/chrisnc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3eb983ed9916147ad4f2d93679cbff5276ca87ca", "url": "https://api.github.com/repos/rust-lang/rust/commits/3eb983ed9916147ad4f2d93679cbff5276ca87ca", "html_url": "https://github.com/rust-lang/rust/commit/3eb983ed9916147ad4f2d93679cbff5276ca87ca"}], "stats": {"total": 1, "additions": 0, "deletions": 1}, "files": [{"sha": "3b7cdd55a081c3149114346fe835416b832ed5e6", "filename": "library/std/src/sys_common/net.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/f2ebd0a11fd7ed131d669fcac20fa3b8df642f39/library%2Fstd%2Fsrc%2Fsys_common%2Fnet.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f2ebd0a11fd7ed131d669fcac20fa3b8df642f39/library%2Fstd%2Fsrc%2Fsys_common%2Fnet.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys_common%2Fnet.rs?ref=f2ebd0a11fd7ed131d669fcac20fa3b8df642f39", "patch": "@@ -87,7 +87,6 @@ pub fn getsockopt<T: Copy>(sock: &Socket, level: c_int, option_name: c_int) -> i\n             &mut option_value as *mut T as *mut _,\n             &mut option_len,\n         ))?;\n-        assert_eq!(option_len as usize, mem::size_of::<T>());\n         Ok(option_value)\n     }\n }"}]}