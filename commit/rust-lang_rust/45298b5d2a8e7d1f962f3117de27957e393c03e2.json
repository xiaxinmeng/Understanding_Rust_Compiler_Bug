{"sha": "45298b5d2a8e7d1f962f3117de27957e393c03e2", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ1Mjk4YjVkMmE4ZTdkMWY5NjJmMzExN2RlMjc5NTdlMzkzYzAzZTI=", "commit": {"author": {"name": "Lukas Wirth", "email": "lukastw97@gmail.com", "date": "2020-09-16T18:33:08Z"}, "committer": {"name": "Lukas Wirth", "email": "lukastw97@gmail.com", "date": "2020-09-16T18:33:08Z"}, "message": "Add make::glob_use_tree function to create star-only UseTree", "tree": {"sha": "a084e63fd71cf28ea69a8ceb374f19aa9e111a4e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a084e63fd71cf28ea69a8ceb374f19aa9e111a4e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/45298b5d2a8e7d1f962f3117de27957e393c03e2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/45298b5d2a8e7d1f962f3117de27957e393c03e2", "html_url": "https://github.com/rust-lang/rust/commit/45298b5d2a8e7d1f962f3117de27957e393c03e2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/45298b5d2a8e7d1f962f3117de27957e393c03e2/comments", "author": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b874721752e07673f28ef07a003fe8582d4f1645", "url": "https://api.github.com/repos/rust-lang/rust/commits/b874721752e07673f28ef07a003fe8582d4f1645", "html_url": "https://github.com/rust-lang/rust/commit/b874721752e07673f28ef07a003fe8582d4f1645"}], "stats": {"total": 18, "additions": 7, "deletions": 11}, "files": [{"sha": "97ac6b8322bc2c1513533748e5fbf19bb7db7541", "filename": "crates/assists/src/utils/insert_use.rs", "status": "modified", "additions": 3, "deletions": 11, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/45298b5d2a8e7d1f962f3117de27957e393c03e2/crates%2Fassists%2Fsrc%2Futils%2Finsert_use.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45298b5d2a8e7d1f962f3117de27957e393c03e2/crates%2Fassists%2Fsrc%2Futils%2Finsert_use.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fassists%2Fsrc%2Futils%2Finsert_use.rs?ref=45298b5d2a8e7d1f962f3117de27957e393c03e2", "patch": "@@ -233,15 +233,7 @@ fn recursive_merge(\n                             None,\n                             false,\n                         );\n-                        use_trees.insert(\n-                            idx,\n-                            make::use_tree(\n-                                make::path_unqualified(make::path_segment_self()),\n-                                None,\n-                                None,\n-                                true,\n-                            ),\n-                        );\n+                        use_trees.insert(idx, make::glob_use_tree());\n                         continue;\n                     }\n                 }\n@@ -806,14 +798,14 @@ use std::io;\",\n         check_full(\n             \"token::TokenKind\",\n             r\"use token::TokenKind::*;\",\n-            r\"use token::TokenKind::{self::*, self};\",\n+            r\"use token::TokenKind::{*, self};\",\n         )\n         // FIXME: have it emit `use token::TokenKind::{self, *}`?\n     }\n \n     #[test]\n     fn merge_self_glob() {\n-        check_full(\"self\", r\"use self::*;\", r\"use self::{self::*, self};\")\n+        check_full(\"self\", r\"use self::*;\", r\"use self::{*, self};\")\n         // FIXME: have it emit `use {self, *}`?\n     }\n "}, {"sha": "6868feed9976ad6e66bbe3435599fff5baa183c6", "filename": "crates/syntax/src/ast/make.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/45298b5d2a8e7d1f962f3117de27957e393c03e2/crates%2Fsyntax%2Fsrc%2Fast%2Fmake.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45298b5d2a8e7d1f962f3117de27957e393c03e2/crates%2Fsyntax%2Fsrc%2Fast%2Fmake.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Fsrc%2Fast%2Fmake.rs?ref=45298b5d2a8e7d1f962f3117de27957e393c03e2", "patch": "@@ -38,6 +38,10 @@ pub fn path_from_text(text: &str) -> ast::Path {\n     ast_from_text(text)\n }\n \n+pub fn glob_use_tree() -> ast::UseTree {\n+    ast_from_text(\"use *;\")\n+}\n+\n pub fn use_tree(\n     path: ast::Path,\n     use_tree_list: Option<ast::UseTreeList>,"}]}