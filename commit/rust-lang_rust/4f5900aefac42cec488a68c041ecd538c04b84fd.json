{"sha": "4f5900aefac42cec488a68c041ecd538c04b84fd", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRmNTkwMGFlZmFjNDJjZWM0ODhhNjhjMDQxZWNkNTM4YzA0Yjg0ZmQ=", "commit": {"author": {"name": "Eduard Burtescu", "email": "edy.burt@gmail.com", "date": "2016-05-02T22:57:35Z"}, "committer": {"name": "Eduard Burtescu", "email": "edy.burt@gmail.com", "date": "2016-05-07T16:14:32Z"}, "message": "test: adjust for the move to MIR-based const checking.", "tree": {"sha": "a27eb77ecb3c2e47bcb8924c18329c2e0cb66901", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a27eb77ecb3c2e47bcb8924c18329c2e0cb66901"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4f5900aefac42cec488a68c041ecd538c04b84fd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4f5900aefac42cec488a68c041ecd538c04b84fd", "html_url": "https://github.com/rust-lang/rust/commit/4f5900aefac42cec488a68c041ecd538c04b84fd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4f5900aefac42cec488a68c041ecd538c04b84fd/comments", "author": {"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}, "committer": {"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "78884b765915c551e5f3fe71b185d91ec4c186de", "url": "https://api.github.com/repos/rust-lang/rust/commits/78884b765915c551e5f3fe71b185d91ec4c186de", "html_url": "https://github.com/rust-lang/rust/commit/78884b765915c551e5f3fe71b185d91ec4c186de"}], "stats": {"total": 122, "additions": 47, "deletions": 75}, "files": [{"sha": "7248d0e543bdba2d138ebf308f15da3ef9c15c4e", "filename": "src/test/compile-fail/auxiliary/pub_static_array.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Fcompile-fail%2Fauxiliary%2Fpub_static_array.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Fcompile-fail%2Fauxiliary%2Fpub_static_array.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fauxiliary%2Fpub_static_array.rs?ref=4f5900aefac42cec488a68c041ecd538c04b84fd", "patch": "@@ -8,4 +8,4 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-pub static ARRAY: &'static [u8] = &[1];\n+pub static ARRAY: [u8; 1] = [1];"}, {"sha": "370cfe9d5501258044fcecb026b631670ad87d7e", "filename": "src/test/compile-fail/check-static-immutable-mut-slices.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Fcompile-fail%2Fcheck-static-immutable-mut-slices.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Fcompile-fail%2Fcheck-static-immutable-mut-slices.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fcheck-static-immutable-mut-slices.rs?ref=4f5900aefac42cec488a68c041ecd538c04b84fd", "patch": "@@ -12,5 +12,6 @@\n \n static TEST: &'static mut [isize] = &mut [];\n //~^ ERROR references in statics may only refer to immutable values\n+//~^^ ERROR references in statics may only refer to immutable values\n \n pub fn main() { }"}, {"sha": "ded0d07d7373b42786e17a21e03a4b9314a598dc", "filename": "src/test/compile-fail/check-static-values-constraints.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Fcompile-fail%2Fcheck-static-values-constraints.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Fcompile-fail%2Fcheck-static-values-constraints.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fcheck-static-values-constraints.rs?ref=4f5900aefac42cec488a68c041ecd538c04b84fd", "patch": "@@ -140,4 +140,5 @@ static STATIC19: Box<isize> =\n pub fn main() {\n     let y = { static x: Box<isize> = box 3; x };\n     //~^ ERROR allocations are not allowed in statics\n+    //~^^ ERROR cannot move out of static item\n }"}, {"sha": "c3d5975fe01f679682452f19b8026faad87cff1a", "filename": "src/test/compile-fail/const-fn-destructuring-arg.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Fcompile-fail%2Fconst-fn-destructuring-arg.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Fcompile-fail%2Fconst-fn-destructuring-arg.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fconst-fn-destructuring-arg.rs?ref=4f5900aefac42cec488a68c041ecd538c04b84fd", "patch": "@@ -13,6 +13,11 @@\n #![feature(const_fn)]\n \n // no destructuring\n-const fn i((a, b): (u32, u32)) -> u32 { a + b } //~ ERROR: E0022\n+const fn i((\n+            a, //~ ERROR: E0022\n+            b  //~ ERROR: E0022\n+           ): (u32, u32)) -> u32 {\n+    a + b\n+}\n \n fn main() {}"}, {"sha": "45a00de48e71210b697b9b820c00af3a973e8dc9", "filename": "src/test/compile-fail/const-fn-error.rs", "status": "modified", "additions": 3, "deletions": 6, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Fcompile-fail%2Fconst-fn-error.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Fcompile-fail%2Fconst-fn-error.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fconst-fn-error.rs?ref=4f5900aefac42cec488a68c041ecd538c04b84fd", "patch": "@@ -8,19 +8,16 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// test that const fn signature and body errors are checked\n-// even in array lengths, which are evaluated before check_const\n-\n #![feature(const_fn)]\n \n const X : usize = 2;\n \n const fn f(x: usize) -> usize {\n-    let mut sum = 0; //~ ERROR: E0016\n-    for i in 0..x { //~ ERROR: E0016\n+    let mut sum = 0;\n+    for i in 0..x {\n         sum += i;\n     }\n-    sum\n+    sum //~ ERROR: E0250\n }\n \n #[allow(unused_variables)]"}, {"sha": "48877a60d25042843486b6ea7214510a19612c41", "filename": "src/test/compile-fail/const-fn-not-safe-for-const.rs", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Fcompile-fail%2Fconst-fn-not-safe-for-const.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Fcompile-fail%2Fconst-fn-not-safe-for-const.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fconst-fn-not-safe-for-const.rs?ref=4f5900aefac42cec488a68c041ecd538c04b84fd", "patch": "@@ -29,13 +29,19 @@ static Y: u32 = 0;\n const fn get_Y() -> u32 {\n     Y\n         //~^ ERROR E0013\n-        //~| ERROR cannot refer to other statics by value\n+        //~| ERROR cannot refer to statics by value\n }\n \n const fn get_Y_addr() -> &'static u32 {\n     &Y\n         //~^ ERROR E0013\n }\n \n+const fn get() -> u32 {\n+    let x = 22; //~ ERROR E0016\n+    let y = 44; //~ ERROR E0016\n+    x + y\n+}\n+\n fn main() {\n }"}, {"sha": "a053847e88294cb812cf68d2c65ea04e77d33ec9", "filename": "src/test/compile-fail/const-fn-not-safe-for-const2.rs", "status": "removed", "additions": 0, "deletions": 44, "changes": 44, "blob_url": "https://github.com/rust-lang/rust/blob/78884b765915c551e5f3fe71b185d91ec4c186de/src%2Ftest%2Fcompile-fail%2Fconst-fn-not-safe-for-const2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/78884b765915c551e5f3fe71b185d91ec4c186de/src%2Ftest%2Fcompile-fail%2Fconst-fn-not-safe-for-const2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fconst-fn-not-safe-for-const2.rs?ref=78884b765915c551e5f3fe71b185d91ec4c186de", "patch": "@@ -1,44 +0,0 @@\n-// Copyright 2015 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n-// Test that we can't call random fns in a const fn or do other bad things.\n-\n-#![feature(const_fn)]\n-\n-use std::mem::transmute;\n-\n-fn random() -> u32 { 0 }\n-\n-const fn sub(x: &u32) -> usize {\n-    unsafe { transmute(x) }\n-}\n-\n-const fn sub1() -> u32 {\n-    random()\n-}\n-\n-static Y: u32 = 0;\n-\n-const fn get_Y() -> u32 {\n-    Y\n-}\n-\n-const fn get_Y_addr() -> &'static u32 {\n-    &Y\n-}\n-\n-const fn get() -> u32 {\n-    let x = 22; //~ ERROR E0016\n-    let y = 44; //~ ERROR E0016\n-    x + y\n-}\n-\n-fn main() {\n-}"}, {"sha": "31352c57f1bc3bf566121e1f3be6df87da2c1328", "filename": "src/test/compile-fail/issue-17718-borrow-interior.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Fcompile-fail%2Fissue-17718-borrow-interior.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Fcompile-fail%2Fissue-17718-borrow-interior.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-17718-borrow-interior.rs?ref=4f5900aefac42cec488a68c041ecd538c04b84fd", "patch": "@@ -17,7 +17,8 @@ static C: &'static usize = &(A.a);\n \n static D: [usize; 1] = [1];\n static E: usize = D[0];\n-//~^ ERROR: cannot refer to other statics by value\n+//~^ ERROR: cannot refer to the interior of another static\n+//~^^ ERROR: cannot refer to other statics by value\n static F: &'static usize = &D[0];\n //~^ ERROR: cannot refer to the interior of another static\n "}, {"sha": "af356588ed9e7b72f51afe010c6590fad005645f", "filename": "src/test/compile-fail/issue-17718-const-bad-values.rs", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Fcompile-fail%2Fissue-17718-const-bad-values.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Fcompile-fail%2Fissue-17718-const-bad-values.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-17718-const-bad-values.rs?ref=4f5900aefac42cec488a68c041ecd538c04b84fd", "patch": "@@ -10,10 +10,13 @@\n \n const C1: &'static mut [usize] = &mut [];\n //~^ ERROR: references in constants may only refer to immutable values\n+//~| ERROR: references in constants may only refer to immutable values\n \n static mut S: usize = 3;\n-const C2: &'static mut usize = &mut S;\n-//~^ ERROR: constants cannot refer to other statics\n-//~^^ ERROR: references in constants may only refer to immutable values\n+const C2: &'static mut usize = unsafe { &mut S };\n+//~^ ERROR: constants cannot refer to statics\n+//~| ERROR: references in constants may only refer to immutable values\n+//~| ERROR: references in constants may only refer to immutable values\n+//~| ERROR: references in constants may only refer to immutable values\n \n fn main() {}"}, {"sha": "c159168030b8c7b1e50d4aa61406d312bdb708a5", "filename": "src/test/compile-fail/issue-17718-references.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Fcompile-fail%2Fissue-17718-references.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Fcompile-fail%2Fissue-17718-references.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-17718-references.rs?ref=4f5900aefac42cec488a68c041ecd538c04b84fd", "patch": "@@ -14,19 +14,19 @@ const C: usize = 1;\n static S: usize = 1;\n \n const T1: &'static usize = &C;\n-const T2: &'static usize = &S; //~ ERROR: constants cannot refer to other statics\n+const T2: &'static usize = &S; //~ ERROR: constants cannot refer to statics\n static T3: &'static usize = &C;\n static T4: &'static usize = &S;\n \n const T5: usize = C;\n-const T6: usize = S; //~ ERROR: constants cannot refer to other statics\n-//~^ cannot refer to other statics\n+const T6: usize = S; //~ ERROR: constants cannot refer to statics\n+//~^ cannot refer to statics\n static T7: usize = C;\n static T8: usize = S; //~ ERROR: cannot refer to other statics by value\n \n const T9: Struct = Struct { a: C };\n-const T10: Struct = Struct { a: S }; //~ ERROR: cannot refer to other statics by value\n-//~^ ERROR: constants cannot refer to other statics\n+const T10: Struct = Struct { a: S }; //~ ERROR: cannot refer to statics by value\n+//~^ ERROR: constants cannot refer to statics\n static T11: Struct = Struct { a: C };\n static T12: Struct = Struct { a: S }; //~ ERROR: cannot refer to other statics by value\n "}, {"sha": "6efe532b5fdf6b45f3b9b16cecb54a766eb08174", "filename": "src/test/compile-fail/issue-18118-2.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Fcompile-fail%2Fissue-18118-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Fcompile-fail%2Fissue-18118-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-18118-2.rs?ref=4f5900aefac42cec488a68c041ecd538c04b84fd", "patch": "@@ -12,6 +12,6 @@ pub fn main() {\n     const z: &'static isize = {\n         static p: isize = 3;\n         &p\n-        //~^ ERROR constants cannot refer to other statics, insert an intermediate constant instead\n+        //~^ ERROR constants cannot refer to statics, use a constant instead\n     };\n }"}, {"sha": "3afb34f037bcc6301642652eff6605a97cb047e7", "filename": "src/test/compile-fail/issue-18118.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Fcompile-fail%2Fissue-18118.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Fcompile-fail%2Fissue-18118.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-18118.rs?ref=4f5900aefac42cec488a68c041ecd538c04b84fd", "patch": "@@ -10,6 +10,7 @@\n \n pub fn main() {\n     const z: &'static isize = {\n+        //~^ ERROR blocks in constants are limited to items and tail expressions\n         let p = 3;\n         //~^ ERROR blocks in constants are limited to items and tail expressions\n         &p"}, {"sha": "72fb2a682ebe26c7f8900b49b27c18d1676e5fe1", "filename": "src/test/compile-fail/issue-25901.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Fcompile-fail%2Fissue-25901.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Fcompile-fail%2Fissue-25901.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-25901.rs?ref=4f5900aefac42cec488a68c041ecd538c04b84fd", "patch": "@@ -11,7 +11,8 @@\n struct A;\n struct B;\n \n-static S: &'static B = &A; //~ ERROR user-defined dereference operators\n+static S: &'static B = &A;\n+//~^ ERROR calls in statics are limited to constant functions\n \n use std::ops::Deref;\n "}, {"sha": "3b3abc94a4900f391d2746a17dab1e1d74398bac", "filename": "src/test/compile-fail/issue-27895.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Fcompile-fail%2Fissue-27895.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Fcompile-fail%2Fissue-27895.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-27895.rs?ref=4f5900aefac42cec488a68c041ecd538c04b84fd", "patch": "@@ -14,8 +14,7 @@ fn main() {\n \n     match i {\n         0...index => println!(\"winner\"),\n-        //~^ ERROR paths in constants may only refer to constants or functions\n-        //~| ERROR non-constant path in constant expression\n+        //~^ ERROR non-constant path in constant expression\n         _ => println!(\"hello\"),\n     }\n }"}, {"sha": "5c697b69c80b1e3cc049291fea55262d39e34127", "filename": "src/test/compile-fail/issue-28113.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Fcompile-fail%2Fissue-28113.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Fcompile-fail%2Fissue-28113.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-28113.rs?ref=4f5900aefac42cec488a68c041ecd538c04b84fd", "patch": "@@ -9,7 +9,8 @@\n // except according to those terms.\n \n const X: u8 =\n-    || -> u8 { 5 }() //~ ERROR function calls in constants are limited\n+    || -> u8 { 5 }()\n+    //~^ ERROR calls in constants are limited to constant functions\n ;\n \n fn main() {}"}, {"sha": "ee88168515d39f5a7319f21a7527177c3584e985", "filename": "src/test/compile-fail/non-constant-in-const-path.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Fcompile-fail%2Fnon-constant-in-const-path.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Fcompile-fail%2Fnon-constant-in-const-path.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fnon-constant-in-const-path.rs?ref=4f5900aefac42cec488a68c041ecd538c04b84fd", "patch": "@@ -12,7 +12,6 @@ fn main() {\n     let x = 0;\n     match 1 {\n         0 ... x => {}\n-        //~^ ERROR non-constant path in constant expr\n-        //~| ERROR paths in constants may only refer to constants or functions\n+        //~^ ERROR non-constant path in constant expression\n     };\n }"}, {"sha": "d101432f6d124f141400be02e66028da7ce22b4e", "filename": "src/test/compile-fail/static-array-across-crate.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Fcompile-fail%2Fstatic-array-across-crate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Fcompile-fail%2Fstatic-array-across-crate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fstatic-array-across-crate.rs?ref=4f5900aefac42cec488a68c041ecd538c04b84fd", "patch": "@@ -17,4 +17,11 @@ use array::ARRAY;\n static X: &'static u8 = &ARRAY[0];\n //~^ ERROR: cannot refer to the interior of another static, use a constant\n \n+static Y: &'static u8 = &(&ARRAY)[0];\n+//~^ ERROR: cannot refer to the interior of another static, use a constant\n+\n+static Z: u8 = (&ARRAY)[0];\n+//~^ ERROR: cannot refer to the interior of another static, use a constant\n+//~^^ ERROR: cannot refer to other statics by value\n+\n pub fn main() {}"}, {"sha": "f58bf4fc39fecc618de72166d0b9d1f788e268a3", "filename": "src/test/run-pass/const-str-ptr.rs", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Frun-pass%2Fconst-str-ptr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Frun-pass%2Fconst-str-ptr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fconst-str-ptr.rs?ref=4f5900aefac42cec488a68c041ecd538c04b84fd", "patch": "@@ -8,17 +8,12 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-#![feature(rustc_attrs)]\n-\n-// ignore-pretty : (#23623) problems when  ending with // comments\n-\n use std::{str, string};\n \n const A: [u8; 2] = ['h' as u8, 'i' as u8];\n const B: &'static [u8; 2] = &A;\n const C: *const u8 = B as *const u8;\n \n-#[rustc_no_mir] // FIXME #27840 MIR can't do rvalue promotion yet.\n pub fn main() {\n     unsafe {\n         let foo = &A as *const u8;"}, {"sha": "a632f00d9ee5f5d1cbca7ccd5626fac7e99bde80", "filename": "src/test/run-pass/mir_raw_fat_ptr.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Frun-pass%2Fmir_raw_fat_ptr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f5900aefac42cec488a68c041ecd538c04b84fd/src%2Ftest%2Frun-pass%2Fmir_raw_fat_ptr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fmir_raw_fat_ptr.rs?ref=4f5900aefac42cec488a68c041ecd538c04b84fd", "patch": "@@ -121,7 +121,6 @@ impl<T> Foo for T {\n \n struct S<T:?Sized>(u32, T);\n \n-#[rustc_no_mir] // FIXME #27840 MIR can't do rvalue promotion yet.\n fn main() {\n     let array = [0,1,2,3,4];\n     let array2 = [5,6,7,8,9];"}]}