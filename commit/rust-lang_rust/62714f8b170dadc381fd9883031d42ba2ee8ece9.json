{"sha": "62714f8b170dadc381fd9883031d42ba2ee8ece9", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYyNzE0ZjhiMTcwZGFkYzM4MWZkOTg4MzAzMWQ0MmJhMmVlOGVjZTk=", "commit": {"author": {"name": "LeSeulArtichaut", "email": "leseulartichaut@gmail.com", "date": "2019-12-21T13:50:56Z"}, "committer": {"name": "Ross MacArthur", "email": "ross@macarthur.io", "date": "2019-12-21T18:45:36Z"}, "message": "Update unstable book build to use NonZeroU32", "tree": {"sha": "566780548a464fd52388cb42430655b228360a8b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/566780548a464fd52388cb42430655b228360a8b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/62714f8b170dadc381fd9883031d42ba2ee8ece9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/62714f8b170dadc381fd9883031d42ba2ee8ece9", "html_url": "https://github.com/rust-lang/rust/commit/62714f8b170dadc381fd9883031d42ba2ee8ece9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/62714f8b170dadc381fd9883031d42ba2ee8ece9/comments", "author": {"login": "LeSeulArtichaut", "id": 38361244, "node_id": "MDQ6VXNlcjM4MzYxMjQ0", "avatar_url": "https://avatars.githubusercontent.com/u/38361244?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LeSeulArtichaut", "html_url": "https://github.com/LeSeulArtichaut", "followers_url": "https://api.github.com/users/LeSeulArtichaut/followers", "following_url": "https://api.github.com/users/LeSeulArtichaut/following{/other_user}", "gists_url": "https://api.github.com/users/LeSeulArtichaut/gists{/gist_id}", "starred_url": "https://api.github.com/users/LeSeulArtichaut/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LeSeulArtichaut/subscriptions", "organizations_url": "https://api.github.com/users/LeSeulArtichaut/orgs", "repos_url": "https://api.github.com/users/LeSeulArtichaut/repos", "events_url": "https://api.github.com/users/LeSeulArtichaut/events{/privacy}", "received_events_url": "https://api.github.com/users/LeSeulArtichaut/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rossmacarthur", "id": 17109887, "node_id": "MDQ6VXNlcjE3MTA5ODg3", "avatar_url": "https://avatars.githubusercontent.com/u/17109887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rossmacarthur", "html_url": "https://github.com/rossmacarthur", "followers_url": "https://api.github.com/users/rossmacarthur/followers", "following_url": "https://api.github.com/users/rossmacarthur/following{/other_user}", "gists_url": "https://api.github.com/users/rossmacarthur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rossmacarthur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rossmacarthur/subscriptions", "organizations_url": "https://api.github.com/users/rossmacarthur/orgs", "repos_url": "https://api.github.com/users/rossmacarthur/repos", "events_url": "https://api.github.com/users/rossmacarthur/events{/privacy}", "received_events_url": "https://api.github.com/users/rossmacarthur/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f7256d28d1c2f8340ab5b99df4bdb15aa232f3f3", "url": "https://api.github.com/repos/rust-lang/rust/commits/f7256d28d1c2f8340ab5b99df4bdb15aa232f3f3", "html_url": "https://github.com/rust-lang/rust/commit/f7256d28d1c2f8340ab5b99df4bdb15aa232f3f3"}], "stats": {"total": 15, "additions": 3, "deletions": 12}, "files": [{"sha": "39e8d61edeb09e54deb72202945a0ec7c120d365", "filename": "src/tools/unstable-book-gen/src/main.rs", "status": "modified", "additions": 3, "deletions": 12, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/62714f8b170dadc381fd9883031d42ba2ee8ece9/src%2Ftools%2Funstable-book-gen%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/62714f8b170dadc381fd9883031d42ba2ee8ece9/src%2Ftools%2Funstable-book-gen%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Funstable-book-gen%2Fsrc%2Fmain.rs?ref=62714f8b170dadc381fd9883031d42ba2ee8ece9", "patch": "@@ -2,7 +2,7 @@\n \n #![deny(warnings)]\n \n-use tidy::features::{Feature, Features, collect_lib_features, collect_lang_features};\n+use tidy::features::{Features, collect_lib_features, collect_lang_features};\n use tidy::unstable_book::{collect_unstable_feature_names, collect_unstable_book_section_file_names,\n                           PATH_STR, LANG_FEATURES_DIR, LIB_FEATURES_DIR};\n use std::collections::BTreeSet;\n@@ -70,15 +70,6 @@ fn generate_summary(path: &Path, lang_features: &Features, lib_features: &Featur\n \n }\n \n-fn has_valid_tracking_issue(f: &Feature) -> bool {\n-    if let Some(n) = f.tracking_issue {\n-        if n > 0 {\n-            return true;\n-        }\n-    }\n-    false\n-}\n-\n fn generate_unstable_book_files(src :&Path, out: &Path, features :&Features) {\n     let unstable_features = collect_unstable_feature_names(features);\n     let unstable_section_file_names = collect_unstable_book_section_file_names(src);\n@@ -89,10 +80,10 @@ fn generate_unstable_book_files(src :&Path, out: &Path, features :&Features) {\n         let out_file_path = out.join(&file_name);\n         let feature = &features[&feature_name_underscore];\n \n-        if has_valid_tracking_issue(&feature) {\n+        if let Some(issue) = feature.tracking_issue {\n             generate_stub_issue(&out_file_path,\n                                 &feature_name_underscore,\n-                                feature.tracking_issue.unwrap());\n+                                issue.get());\n         } else {\n             generate_stub_no_issue(&out_file_path, &feature_name_underscore);\n         }"}]}