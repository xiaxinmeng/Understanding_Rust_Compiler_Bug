{"sha": "581cc4abf5dd2802914cf4fee832cda2ae7a89a0", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU4MWNjNGFiZjVkZDI4MDI5MTRjZjRmZWU4MzJjZGEyYWU3YTg5YTA=", "commit": {"author": {"name": "Tyson Nottingham", "email": "tgnottingham@gmail.com", "date": "2020-10-05T07:47:44Z"}, "committer": {"name": "Tyson Nottingham", "email": "tgnottingham@gmail.com", "date": "2020-10-05T07:47:44Z"}, "message": "SipHasher128: use specific struct layout", "tree": {"sha": "4c6152140d87c108a5ce0c58f88c682e8e88e396", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4c6152140d87c108a5ce0c58f88c682e8e88e396"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/581cc4abf5dd2802914cf4fee832cda2ae7a89a0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/581cc4abf5dd2802914cf4fee832cda2ae7a89a0", "html_url": "https://github.com/rust-lang/rust/commit/581cc4abf5dd2802914cf4fee832cda2ae7a89a0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/581cc4abf5dd2802914cf4fee832cda2ae7a89a0/comments", "author": {"login": "tgnottingham", "id": 3668166, "node_id": "MDQ6VXNlcjM2NjgxNjY=", "avatar_url": "https://avatars.githubusercontent.com/u/3668166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tgnottingham", "html_url": "https://github.com/tgnottingham", "followers_url": "https://api.github.com/users/tgnottingham/followers", "following_url": "https://api.github.com/users/tgnottingham/following{/other_user}", "gists_url": "https://api.github.com/users/tgnottingham/gists{/gist_id}", "starred_url": "https://api.github.com/users/tgnottingham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tgnottingham/subscriptions", "organizations_url": "https://api.github.com/users/tgnottingham/orgs", "repos_url": "https://api.github.com/users/tgnottingham/repos", "events_url": "https://api.github.com/users/tgnottingham/events{/privacy}", "received_events_url": "https://api.github.com/users/tgnottingham/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tgnottingham", "id": 3668166, "node_id": "MDQ6VXNlcjM2NjgxNjY=", "avatar_url": "https://avatars.githubusercontent.com/u/3668166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tgnottingham", "html_url": "https://github.com/tgnottingham", "followers_url": "https://api.github.com/users/tgnottingham/followers", "following_url": "https://api.github.com/users/tgnottingham/following{/other_user}", "gists_url": "https://api.github.com/users/tgnottingham/gists{/gist_id}", "starred_url": "https://api.github.com/users/tgnottingham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tgnottingham/subscriptions", "organizations_url": "https://api.github.com/users/tgnottingham/orgs", "repos_url": "https://api.github.com/users/tgnottingham/repos", "events_url": "https://api.github.com/users/tgnottingham/events{/privacy}", "received_events_url": "https://api.github.com/users/tgnottingham/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b86161ad9c2ba27d8b2c899a7adead7d4ebd54bd", "url": "https://api.github.com/repos/rust-lang/rust/commits/b86161ad9c2ba27d8b2c899a7adead7d4ebd54bd", "html_url": "https://github.com/rust-lang/rust/commit/b86161ad9c2ba27d8b2c899a7adead7d4ebd54bd"}], "stats": {"total": 6, "additions": 6, "deletions": 0}, "files": [{"sha": "5bbc53945edc69ec60cc7ce9cbd296be528bc3e1", "filename": "compiler/rustc_data_structures/src/sip128.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/581cc4abf5dd2802914cf4fee832cda2ae7a89a0/compiler%2Frustc_data_structures%2Fsrc%2Fsip128.rs", "raw_url": "https://github.com/rust-lang/rust/raw/581cc4abf5dd2802914cf4fee832cda2ae7a89a0/compiler%2Frustc_data_structures%2Fsrc%2Fsip128.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_data_structures%2Fsrc%2Fsip128.rs?ref=581cc4abf5dd2802914cf4fee832cda2ae7a89a0", "patch": "@@ -15,7 +15,13 @@ const BUFFER_SIZE_BYTES_SPILL: usize = BUFFER_SIZE_ELEMS_SPILL * ELEM_SIZE;\n const BUFFER_SPILL_INDEX: usize = BUFFER_SIZE_ELEMS_SPILL - 1;\n \n #[derive(Debug, Clone)]\n+#[repr(C)]\n pub struct SipHasher128 {\n+    // The access pattern during hashing consists of accesses to `nbuf` and\n+    // `buf` until the buffer is full, followed by accesses to `state` and\n+    // `processed`, and then repetition of that pattern until hashing is done.\n+    // This is the basis for the ordering of fields below. However, in practice\n+    // the cache miss-rate for data access is extremely low regardless of order.\n     nbuf: usize,                                      // how many bytes in buf are valid\n     buf: [MaybeUninit<u64>; BUFFER_SIZE_ELEMS_SPILL], // unprocessed bytes le\n     state: State,                                     // hash State"}]}