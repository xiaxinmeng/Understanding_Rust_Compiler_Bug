{"sha": "5f344a28832101e9913e134cc8cf34ddaae9e894", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVmMzQ0YTI4ODMyMTAxZTk5MTNlMTM0Y2M4Y2YzNGRkYWFlOWU4OTQ=", "commit": {"author": {"name": "Erin Power", "email": "erin.power@embark-studios.com", "date": "2021-03-02T11:18:46Z"}, "committer": {"name": "Erin Power", "email": "erin.power@embark-studios.com", "date": "2021-03-02T11:18:46Z"}, "message": "Fix UI errors", "tree": {"sha": "49cb57e1f654289a205ccd57976f4f53a6c07457", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/49cb57e1f654289a205ccd57976f4f53a6c07457"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5f344a28832101e9913e134cc8cf34ddaae9e894", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5f344a28832101e9913e134cc8cf34ddaae9e894", "html_url": "https://github.com/rust-lang/rust/commit/5f344a28832101e9913e134cc8cf34ddaae9e894", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5f344a28832101e9913e134cc8cf34ddaae9e894/comments", "author": {"login": "XAMPPRocky", "id": 4464295, "node_id": "MDQ6VXNlcjQ0NjQyOTU=", "avatar_url": "https://avatars.githubusercontent.com/u/4464295?v=4", "gravatar_id": "", "url": "https://api.github.com/users/XAMPPRocky", "html_url": "https://github.com/XAMPPRocky", "followers_url": "https://api.github.com/users/XAMPPRocky/followers", "following_url": "https://api.github.com/users/XAMPPRocky/following{/other_user}", "gists_url": "https://api.github.com/users/XAMPPRocky/gists{/gist_id}", "starred_url": "https://api.github.com/users/XAMPPRocky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/XAMPPRocky/subscriptions", "organizations_url": "https://api.github.com/users/XAMPPRocky/orgs", "repos_url": "https://api.github.com/users/XAMPPRocky/repos", "events_url": "https://api.github.com/users/XAMPPRocky/events{/privacy}", "received_events_url": "https://api.github.com/users/XAMPPRocky/received_events", "type": "User", "site_admin": false}, "committer": {"login": "XAMPPRocky", "id": 4464295, "node_id": "MDQ6VXNlcjQ0NjQyOTU=", "avatar_url": "https://avatars.githubusercontent.com/u/4464295?v=4", "gravatar_id": "", "url": "https://api.github.com/users/XAMPPRocky", "html_url": "https://github.com/XAMPPRocky", "followers_url": "https://api.github.com/users/XAMPPRocky/followers", "following_url": "https://api.github.com/users/XAMPPRocky/following{/other_user}", "gists_url": "https://api.github.com/users/XAMPPRocky/gists{/gist_id}", "starred_url": "https://api.github.com/users/XAMPPRocky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/XAMPPRocky/subscriptions", "organizations_url": "https://api.github.com/users/XAMPPRocky/orgs", "repos_url": "https://api.github.com/users/XAMPPRocky/repos", "events_url": "https://api.github.com/users/XAMPPRocky/events{/privacy}", "received_events_url": "https://api.github.com/users/XAMPPRocky/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "79c5fa1f0c713bf3214d2911c2e73bb38df3a0c5", "url": "https://api.github.com/repos/rust-lang/rust/commits/79c5fa1f0c713bf3214d2911c2e73bb38df3a0c5", "html_url": "https://github.com/rust-lang/rust/commit/79c5fa1f0c713bf3214d2911c2e73bb38df3a0c5"}], "stats": {"total": 21, "additions": 3, "deletions": 18}, "files": [{"sha": "0010d59f710cdc0ec0c361636352044a7d60224d", "filename": "compiler/rustc_typeck/src/check/check.rs", "status": "modified", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/5f344a28832101e9913e134cc8cf34ddaae9e894/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fcheck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5f344a28832101e9913e134cc8cf34ddaae9e894/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fcheck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fcheck.rs?ref=5f344a28832101e9913e134cc8cf34ddaae9e894", "patch": "@@ -1161,15 +1161,6 @@ pub fn check_simd(tcx: TyCtxt<'_>, sp: Span, def_id: LocalDefId) {\n                 if len == 0 {\n                     struct_span_err!(tcx.sess, sp, E0075, \"SIMD vector cannot be empty\").emit();\n                     return;\n-                } else if !len.is_power_of_two() {\n-                    struct_span_err!(\n-                        tcx.sess,\n-                        sp,\n-                        E0075,\n-                        \"SIMD vector length must be a power of two\"\n-                    )\n-                    .emit();\n-                    return;\n                 } else if len > MAX_SIMD_LANES {\n                     struct_span_err!(\n                         tcx.sess,"}, {"sha": "9b645d363e93250fc941eb8b446e312d99e6bde4", "filename": "src/test/ui/simd/simd-type-generic-monomorphisation-power-of-two.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/5f344a28832101e9913e134cc8cf34ddaae9e894/src%2Ftest%2Fui%2Fsimd%2Fsimd-type-generic-monomorphisation-power-of-two.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5f344a28832101e9913e134cc8cf34ddaae9e894/src%2Ftest%2Fui%2Fsimd%2Fsimd-type-generic-monomorphisation-power-of-two.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsimd%2Fsimd-type-generic-monomorphisation-power-of-two.rs?ref=5f344a28832101e9913e134cc8cf34ddaae9e894", "patch": "@@ -1,9 +1,7 @@\n-// build-fail\n+// run-pass\n \n #![feature(repr_simd, platform_intrinsics)]\n \n-// error-pattern:monomorphising SIMD type `Simd<3_usize>` of non-power-of-two length\n-\n #[repr(simd)]\n struct Simd<const N: usize>([f32; N]);\n "}, {"sha": "82cc0d8714aba77a2de487f1241506d6b62946b7", "filename": "src/test/ui/simd/simd-type-generic-monomorphisation-power-of-two.stderr", "status": "removed", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/79c5fa1f0c713bf3214d2911c2e73bb38df3a0c5/src%2Ftest%2Fui%2Fsimd%2Fsimd-type-generic-monomorphisation-power-of-two.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/79c5fa1f0c713bf3214d2911c2e73bb38df3a0c5/src%2Ftest%2Fui%2Fsimd%2Fsimd-type-generic-monomorphisation-power-of-two.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsimd%2Fsimd-type-generic-monomorphisation-power-of-two.stderr?ref=79c5fa1f0c713bf3214d2911c2e73bb38df3a0c5", "patch": "@@ -1,4 +0,0 @@\n-error: monomorphising SIMD type `Simd<3_usize>` of non-power-of-two length\n-\n-error: aborting due to previous error\n-"}, {"sha": "73d032a0c8e5542673fdaebc60627e4def4caf08", "filename": "src/test/ui/simd/simd-type.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5f344a28832101e9913e134cc8cf34ddaae9e894/src%2Ftest%2Fui%2Fsimd%2Fsimd-type.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5f344a28832101e9913e134cc8cf34ddaae9e894/src%2Ftest%2Fui%2Fsimd%2Fsimd-type.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsimd%2Fsimd-type.rs?ref=5f344a28832101e9913e134cc8cf34ddaae9e894", "patch": "@@ -10,7 +10,7 @@ struct empty; //~ ERROR SIMD vector cannot be empty\n struct empty2([f32; 0]); //~ ERROR SIMD vector cannot be empty\n \n #[repr(simd)]\n-struct pow2([f32; 7]); //~ ERROR SIMD vector length must be a power of two\n+struct pow2([f32; 7]);\n \n #[repr(simd)]\n struct i64f64(i64, f64); //~ ERROR SIMD vector should be homogeneous"}, {"sha": "823f10f5daf201af3e116facdefe6e4abcc18920", "filename": "src/test/ui/simd/simd-type.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5f344a28832101e9913e134cc8cf34ddaae9e894/src%2Ftest%2Fui%2Fsimd%2Fsimd-type.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/5f344a28832101e9913e134cc8cf34ddaae9e894/src%2Ftest%2Fui%2Fsimd%2Fsimd-type.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsimd%2Fsimd-type.stderr?ref=5f344a28832101e9913e134cc8cf34ddaae9e894", "patch": "@@ -34,7 +34,7 @@ error[E0075]: SIMD vector cannot have more than 32768 elements\n LL | struct TooBig([f32; 65536]);\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: aborting due to 7 previous errors\n+error: aborting due to 6 previous errors\n \n Some errors have detailed explanations: E0075, E0076, E0077.\n For more information about an error, try `rustc --explain E0075`."}]}