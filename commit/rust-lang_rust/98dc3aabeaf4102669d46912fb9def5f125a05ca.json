{"sha": "98dc3aabeaf4102669d46912fb9def5f125a05ca", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk4ZGMzYWFiZWFmNDEwMjY2OWQ0NjkxMmZiOWRlZjVmMTI1YTA1Y2E=", "commit": {"author": {"name": "Heinz N. Gies", "email": "heinz@licenser.net", "date": "2019-10-12T11:26:14Z"}, "committer": {"name": "Heinz N. Gies", "email": "heinz@licenser.net", "date": "2019-10-18T05:37:58Z"}, "message": "Add todo and tests", "tree": {"sha": "815b0b264e84b177cf47f72b5fcca5a748759151", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/815b0b264e84b177cf47f72b5fcca5a748759151"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/98dc3aabeaf4102669d46912fb9def5f125a05ca", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/98dc3aabeaf4102669d46912fb9def5f125a05ca", "html_url": "https://github.com/rust-lang/rust/commit/98dc3aabeaf4102669d46912fb9def5f125a05ca", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/98dc3aabeaf4102669d46912fb9def5f125a05ca/comments", "author": {"login": "Licenser", "id": 119093, "node_id": "MDQ6VXNlcjExOTA5Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/119093?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Licenser", "html_url": "https://github.com/Licenser", "followers_url": "https://api.github.com/users/Licenser/followers", "following_url": "https://api.github.com/users/Licenser/following{/other_user}", "gists_url": "https://api.github.com/users/Licenser/gists{/gist_id}", "starred_url": "https://api.github.com/users/Licenser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Licenser/subscriptions", "organizations_url": "https://api.github.com/users/Licenser/orgs", "repos_url": "https://api.github.com/users/Licenser/repos", "events_url": "https://api.github.com/users/Licenser/events{/privacy}", "received_events_url": "https://api.github.com/users/Licenser/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Licenser", "id": 119093, "node_id": "MDQ6VXNlcjExOTA5Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/119093?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Licenser", "html_url": "https://github.com/Licenser", "followers_url": "https://api.github.com/users/Licenser/followers", "following_url": "https://api.github.com/users/Licenser/following{/other_user}", "gists_url": "https://api.github.com/users/Licenser/gists{/gist_id}", "starred_url": "https://api.github.com/users/Licenser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Licenser/subscriptions", "organizations_url": "https://api.github.com/users/Licenser/orgs", "repos_url": "https://api.github.com/users/Licenser/repos", "events_url": "https://api.github.com/users/Licenser/events{/privacy}", "received_events_url": "https://api.github.com/users/Licenser/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8d911fe98839bab2b81291986624419c18ace64a", "url": "https://api.github.com/repos/rust-lang/rust/commits/8d911fe98839bab2b81291986624419c18ace64a", "html_url": "https://github.com/rust-lang/rust/commit/8d911fe98839bab2b81291986624419c18ace64a"}], "stats": {"total": 95, "additions": 89, "deletions": 6}, "files": [{"sha": "5ce2eb4d5de20513a39795e4f8f5841aed7ee052", "filename": "CHANGELOG.md", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/98dc3aabeaf4102669d46912fb9def5f125a05ca/CHANGELOG.md", "raw_url": "https://github.com/rust-lang/rust/raw/98dc3aabeaf4102669d46912fb9def5f125a05ca/CHANGELOG.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/CHANGELOG.md?ref=98dc3aabeaf4102669d46912fb9def5f125a05ca", "patch": "@@ -1138,6 +1138,7 @@ Released 2018-09-13\n [`or_fun_call`]: https://rust-lang.github.io/rust-clippy/master/index.html#or_fun_call\n [`out_of_bounds_indexing`]: https://rust-lang.github.io/rust-clippy/master/index.html#out_of_bounds_indexing\n [`overflow_check_conditional`]: https://rust-lang.github.io/rust-clippy/master/index.html#overflow_check_conditional\n+[`panic`]: https://rust-lang.github.io/rust-clippy/master/index.html#panic\n [`panic_params`]: https://rust-lang.github.io/rust-clippy/master/index.html#panic_params\n [`panicking_unwrap`]: https://rust-lang.github.io/rust-clippy/master/index.html#panicking_unwrap\n [`partialeq_ne_impl`]: https://rust-lang.github.io/rust-clippy/master/index.html#partialeq_ne_impl\n@@ -1198,6 +1199,7 @@ Released 2018-09-13\n [`suspicious_unary_op_formatting`]: https://rust-lang.github.io/rust-clippy/master/index.html#suspicious_unary_op_formatting\n [`temporary_assignment`]: https://rust-lang.github.io/rust-clippy/master/index.html#temporary_assignment\n [`temporary_cstring_as_ptr`]: https://rust-lang.github.io/rust-clippy/master/index.html#temporary_cstring_as_ptr\n+[`todo`]: https://rust-lang.github.io/rust-clippy/master/index.html#todo\n [`too_many_arguments`]: https://rust-lang.github.io/rust-clippy/master/index.html#too_many_arguments\n [`too_many_lines`]: https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines\n [`toplevel_ref_arg`]: https://rust-lang.github.io/rust-clippy/master/index.html#toplevel_ref_arg\n@@ -1227,6 +1229,7 @@ Released 2018-09-13\n [`unnecessary_unwrap`]: https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_unwrap\n [`unneeded_field_pattern`]: https://rust-lang.github.io/rust-clippy/master/index.html#unneeded_field_pattern\n [`unneeded_wildcard_pattern`]: https://rust-lang.github.io/rust-clippy/master/index.html#unneeded_wildcard_pattern\n+[`unreachable`]: https://rust-lang.github.io/rust-clippy/master/index.html#unreachable\n [`unreadable_literal`]: https://rust-lang.github.io/rust-clippy/master/index.html#unreadable_literal\n [`unsafe_removed_from_name`]: https://rust-lang.github.io/rust-clippy/master/index.html#unsafe_removed_from_name\n [`unsafe_vector_initialization`]: https://rust-lang.github.io/rust-clippy/master/index.html#unsafe_vector_initialization"}, {"sha": "7913a3eefdabbe83a1e37acba1c5afbb52ed6282", "filename": "README.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/98dc3aabeaf4102669d46912fb9def5f125a05ca/README.md", "raw_url": "https://github.com/rust-lang/rust/raw/98dc3aabeaf4102669d46912fb9def5f125a05ca/README.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/README.md?ref=98dc3aabeaf4102669d46912fb9def5f125a05ca", "patch": "@@ -6,7 +6,7 @@\n \n A collection of lints to catch common mistakes and improve your [Rust](https://github.com/rust-lang/rust) code.\n \n-[There are 326 lints included in this crate!](https://rust-lang.github.io/rust-clippy/master/index.html)\n+[There are 329 lints included in this crate!](https://rust-lang.github.io/rust-clippy/master/index.html)\n \n We have a bunch of lint categories to allow you to choose how much Clippy is supposed to ~~annoy~~ help you:\n "}, {"sha": "9fca5a4b97a488023e7704de9bc76b36d42f8e19", "filename": "clippy_lints/src/lib.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/98dc3aabeaf4102669d46912fb9def5f125a05ca/clippy_lints%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/98dc3aabeaf4102669d46912fb9def5f125a05ca/clippy_lints%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.rs?ref=98dc3aabeaf4102669d46912fb9def5f125a05ca", "patch": "@@ -631,7 +631,10 @@ pub fn register_plugins(reg: &mut rustc_driver::plugin::Registry<'_>, conf: &Con\n         misc::FLOAT_CMP_CONST,\n         missing_doc::MISSING_DOCS_IN_PRIVATE_ITEMS,\n         missing_inline::MISSING_INLINE_IN_PUBLIC_ITEMS,\n+        panic_unimplemented::PANIC,\n+        panic_unimplemented::TODO,\n         panic_unimplemented::UNIMPLEMENTED,\n+        panic_unimplemented::UNREACHABLE,\n         shadow::SHADOW_REUSE,\n         shadow::SHADOW_SAME,\n         strings::STRING_ADD,"}, {"sha": "6981ecff0d012822d4a6d66081e5c70495c0b618", "filename": "clippy_lints/src/panic_unimplemented.rs", "status": "modified", "additions": 21, "deletions": 2, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/98dc3aabeaf4102669d46912fb9def5f125a05ca/clippy_lints%2Fsrc%2Fpanic_unimplemented.rs", "raw_url": "https://github.com/rust-lang/rust/raw/98dc3aabeaf4102669d46912fb9def5f125a05ca/clippy_lints%2Fsrc%2Fpanic_unimplemented.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fpanic_unimplemented.rs?ref=98dc3aabeaf4102669d46912fb9def5f125a05ca", "patch": "@@ -57,6 +57,22 @@ declare_clippy_lint! {\n     \"`unimplemented!` should not be present in production code\"\n }\n \n+declare_clippy_lint! {\n+    /// **What it does:** Checks for usage of `todo!`.\n+    ///\n+    /// **Why is this bad?** This macro should not be present in production code\n+    ///\n+    /// **Known problems:** None.\n+    ///\n+    /// **Example:**\n+    /// ```no_run\n+    /// todo!();\n+    /// ```\n+    pub TODO,\n+    restriction,\n+    \"`todo!` should not be present in production code\"\n+}\n+\n declare_clippy_lint! {\n     /// **What it does:** Checks for usage of `unreachable!`.\n     ///\n@@ -73,7 +89,7 @@ declare_clippy_lint! {\n     \"`unreachable!` should not be present in production code\"\n }\n \n-declare_lint_pass!(PanicUnimplemented => [PANIC_PARAMS, UNIMPLEMENTED, UNREACHABLE]);\n+declare_lint_pass!(PanicUnimplemented => [PANIC_PARAMS, UNIMPLEMENTED, UNREACHABLE, TODO, PANIC]);\n \n impl<'a, 'tcx> LateLintPass<'a, 'tcx> for PanicUnimplemented {\n     fn check_expr(&mut self, cx: &LateContext<'a, 'tcx>, expr: &'tcx Expr) {\n@@ -87,6 +103,10 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for PanicUnimplemented {\n                     let span = get_outer_span(expr);\n                     span_lint(cx, UNIMPLEMENTED, span,\n                               \"`unimplemented` should not be present in production code\");\n+                } else if is_expn_of(expr.span, \"todo\").is_some() {\n+                    let span = get_outer_span(expr);\n+                    span_lint(cx, TODO, span,\n+                              \"`todo` should not be present in production code\");\n                 } else if is_expn_of(expr.span, \"unreachable\").is_some() {\n                     let span = get_outer_span(expr);\n                     span_lint(cx, UNREACHABLE, span,\n@@ -95,7 +115,6 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for PanicUnimplemented {\n                     let span = get_outer_span(expr);\n                     span_lint(cx, PANIC, span,\n                               \"`panic` should not be present in production code\");\n-                //} else {\n                     match_panic(params, expr, cx);\n                 }\n             }"}, {"sha": "24e01f327802d93dd6b059975a97826bb50e21ec", "filename": "src/lintlist/mod.rs", "status": "modified", "additions": 22, "deletions": 1, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/98dc3aabeaf4102669d46912fb9def5f125a05ca/src%2Flintlist%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/98dc3aabeaf4102669d46912fb9def5f125a05ca/src%2Flintlist%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flintlist%2Fmod.rs?ref=98dc3aabeaf4102669d46912fb9def5f125a05ca", "patch": "@@ -6,7 +6,7 @@ pub use lint::Lint;\n pub use lint::LINT_LEVELS;\n \n // begin lint list, do not remove this comment, it\u2019s used in `update_lints`\n-pub const ALL_LINTS: [Lint; 326] = [\n+pub const ALL_LINTS: [Lint; 329] = [\n     Lint {\n         name: \"absurd_extreme_comparisons\",\n         group: \"correctness\",\n@@ -1456,6 +1456,13 @@ pub const ALL_LINTS: [Lint; 326] = [\n         deprecation: None,\n         module: \"overflow_check_conditional\",\n     },\n+    Lint {\n+        name: \"panic\",\n+        group: \"restriction\",\n+        desc: \"missing parameters in `panic!` calls\",\n+        deprecation: None,\n+        module: \"panic_unimplemented\",\n+    },\n     Lint {\n         name: \"panic_params\",\n         group: \"style\",\n@@ -1848,6 +1855,13 @@ pub const ALL_LINTS: [Lint; 326] = [\n         deprecation: None,\n         module: \"methods\",\n     },\n+    Lint {\n+        name: \"todo\",\n+        group: \"restriction\",\n+        desc: \"`todo!` should not be present in production code\",\n+        deprecation: None,\n+        module: \"panic_unimplemented\",\n+    },\n     Lint {\n         name: \"too_many_arguments\",\n         group: \"complexity\",\n@@ -2051,6 +2065,13 @@ pub const ALL_LINTS: [Lint; 326] = [\n         deprecation: None,\n         module: \"misc_early\",\n     },\n+    Lint {\n+        name: \"unreachable\",\n+        group: \"restriction\",\n+        desc: \"`unreachable!` should not be present in production code\",\n+        deprecation: None,\n+        module: \"panic_unimplemented\",\n+    },\n     Lint {\n         name: \"unreadable_literal\",\n         group: \"style\","}, {"sha": "dee3104774cb9765297b9fbba6608354a589170c", "filename": "tests/ui/panic.rs", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/98dc3aabeaf4102669d46912fb9def5f125a05ca/tests%2Fui%2Fpanic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/98dc3aabeaf4102669d46912fb9def5f125a05ca/tests%2Fui%2Fpanic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fpanic.rs?ref=98dc3aabeaf4102669d46912fb9def5f125a05ca", "patch": "@@ -0,0 +1,12 @@\n+#![warn(clippy::panic)]\n+#![allow(clippy::assertions_on_constants)]\n+\n+fn panic() {\n+    let a = 2;\n+    panic!();\n+    let b = a + 2;\n+}\n+\n+fn main() {\n+    panic();\n+}"}, {"sha": "cfef1a16e49ebc4928a5ad118ca0044c358f089a", "filename": "tests/ui/panic.stderr", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/98dc3aabeaf4102669d46912fb9def5f125a05ca/tests%2Fui%2Fpanic.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/98dc3aabeaf4102669d46912fb9def5f125a05ca/tests%2Fui%2Fpanic.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fpanic.stderr?ref=98dc3aabeaf4102669d46912fb9def5f125a05ca", "patch": "@@ -0,0 +1,10 @@\n+error: `panic` should not be present in production code\n+  --> $DIR/panic.rs:6:5\n+   |\n+LL |     panic!();\n+   |     ^^^^^^^^^\n+   |\n+   = note: `-D clippy::panic` implied by `-D warnings`\n+\n+error: aborting due to previous error\n+"}, {"sha": "f3dae3bbde651aa367ce528080f734badee932f4", "filename": "tests/ui/panic_unimplemented.rs", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/98dc3aabeaf4102669d46912fb9def5f125a05ca/tests%2Fui%2Fpanic_unimplemented.rs", "raw_url": "https://github.com/rust-lang/rust/raw/98dc3aabeaf4102669d46912fb9def5f125a05ca/tests%2Fui%2Fpanic_unimplemented.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fpanic_unimplemented.rs?ref=98dc3aabeaf4102669d46912fb9def5f125a05ca", "patch": "@@ -1,4 +1,4 @@\n-#![warn(clippy::panic_params, clippy::unimplemented, clippy::unreachable)]\n+#![warn(clippy::panic_params, clippy::unimplemented, clippy::unreachable, clippy::todo)]\n #![allow(clippy::assertions_on_constants)]\n fn missing() {\n     if true {\n@@ -62,6 +62,12 @@ fn unreachable() {\n     let b = a + 2;\n }\n \n+fn todo() {\n+    let a = 2;\n+    todo!();\n+    let b = a + 2;\n+}\n+\n fn main() {\n     missing();\n     ok_single();\n@@ -72,4 +78,5 @@ fn main() {\n     ok_escaped();\n     unimplemented();\n     unreachable();\n+    todo();\n }"}, {"sha": "6d847e8df3eb1226e025c893bd5be0bdc7d83aeb", "filename": "tests/ui/panic_unimplemented.stderr", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/98dc3aabeaf4102669d46912fb9def5f125a05ca/tests%2Fui%2Fpanic_unimplemented.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/98dc3aabeaf4102669d46912fb9def5f125a05ca/tests%2Fui%2Fpanic_unimplemented.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fpanic_unimplemented.stderr?ref=98dc3aabeaf4102669d46912fb9def5f125a05ca", "patch": "@@ -40,5 +40,13 @@ LL |     unreachable!();\n    |\n    = note: `-D clippy::unreachable` implied by `-D warnings`\n \n-error: aborting due to 6 previous errors\n+error: `todo` should not be present in production code\n+  --> $DIR/panic_unimplemented.rs:67:5\n+   |\n+LL |     todo!();\n+   |     ^^^^^^^^\n+   |\n+   = note: `-D clippy::todo` implied by `-D warnings`\n+\n+error: aborting due to 7 previous errors\n "}]}