{"sha": "d9a2e3b1ccf16c6d43f56f503bd80c1ad137d523", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ5YTJlM2IxY2NmMTZjNmQ0M2Y1NmY1MDNiZDgwYzFhZDEzN2Q1MjM=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-01-30T16:20:15Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-01-30T16:20:15Z"}, "message": "Auto merge of #57495 - jamesmunns:mdbook-compat, r=steveklabnik\n\nSupport multiple versions of MdBook for docs\n\nOnly the compatibility items from the embedded book PR. PR with embedded book components: https://github.com/rust-lang/rust/pull/56291\n\nCC @steveklabnik, @ehuss, and https://github.com/rust-lang-nursery/edition-guide/pull/134", "tree": {"sha": "45ca2d0279bbebe5ccb9246781806e6e7bc4ab80", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/45ca2d0279bbebe5ccb9246781806e6e7bc4ab80"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d9a2e3b1ccf16c6d43f56f503bd80c1ad137d523", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d9a2e3b1ccf16c6d43f56f503bd80c1ad137d523", "html_url": "https://github.com/rust-lang/rust/commit/d9a2e3b1ccf16c6d43f56f503bd80c1ad137d523", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d9a2e3b1ccf16c6d43f56f503bd80c1ad137d523/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e4a9b5c623309dd707ee8188b09e55996c6beb9b", "url": "https://api.github.com/repos/rust-lang/rust/commits/e4a9b5c623309dd707ee8188b09e55996c6beb9b", "html_url": "https://github.com/rust-lang/rust/commit/e4a9b5c623309dd707ee8188b09e55996c6beb9b"}, {"sha": "f8a9a28421f76b84f45694cf668cfd4c0c3aa40b", "url": "https://api.github.com/repos/rust-lang/rust/commits/f8a9a28421f76b84f45694cf668cfd4c0c3aa40b", "html_url": "https://github.com/rust-lang/rust/commit/f8a9a28421f76b84f45694cf668cfd4c0c3aa40b"}], "stats": {"total": 295, "additions": 270, "deletions": 25}, "files": [{"sha": "058f1b1e716a919d981d7a4274cc1ce56a220ac9", "filename": "Cargo.lock", "status": "modified", "additions": 167, "deletions": 0, "changes": 167, "blob_url": "https://github.com/rust-lang/rust/blob/d9a2e3b1ccf16c6d43f56f503bd80c1ad137d523/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/d9a2e3b1ccf16c6d43f56f503bd80c1ad137d523/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=d9a2e3b1ccf16c6d43f56f503bd80c1ad137d523", "patch": "@@ -54,6 +54,11 @@ dependencies = [\n  \"rustc_data_structures 0.0.0\",\n ]\n \n+[[package]]\n+name = \"arrayref\"\n+version = \"0.3.5\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+\n [[package]]\n name = \"arrayvec\"\n version = \"0.4.7\"\n@@ -131,6 +136,15 @@ name = \"bitflags\"\n version = \"1.0.4\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n+[[package]]\n+name = \"block-buffer\"\n+version = \"0.3.3\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+dependencies = [\n+ \"arrayref 0.3.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"byte-tools 0.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+]\n+\n [[package]]\n name = \"bootstrap\"\n version = \"0.0.0\"\n@@ -175,6 +189,11 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n name = \"build_helper\"\n version = \"0.1.0\"\n \n+[[package]]\n+name = \"byte-tools\"\n+version = \"0.2.0\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+\n [[package]]\n name = \"bytecount\"\n version = \"0.4.0\"\n@@ -714,6 +733,14 @@ name = \"difference\"\n version = \"2.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n+[[package]]\n+name = \"digest\"\n+version = \"0.7.6\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+dependencies = [\n+ \"generic-array 0.9.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+]\n+\n [[package]]\n name = \"directories\"\n version = \"1.0.2\"\n@@ -832,6 +859,11 @@ dependencies = [\n  \"synstructure 0.10.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n+[[package]]\n+name = \"fake-simd\"\n+version = \"0.1.2\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+\n [[package]]\n name = \"filetime\"\n version = \"0.2.4\"\n@@ -949,6 +981,14 @@ dependencies = [\n  \"termcolor 1.0.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n+[[package]]\n+name = \"generic-array\"\n+version = \"0.9.0\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+dependencies = [\n+ \"typenum 1.10.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+]\n+\n [[package]]\n name = \"getopts\"\n version = \"0.2.17\"\n@@ -1015,6 +1055,22 @@ dependencies = [\n  \"serde_json 1.0.33 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n+[[package]]\n+name = \"handlebars\"\n+version = \"1.1.0\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+dependencies = [\n+ \"lazy_static 1.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"log 0.4.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"pest 2.1.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"pest_derive 2.1.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"quick-error 1.2.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"regex 1.1.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"serde 1.0.82 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"serde_json 1.0.33 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"walkdir 2.2.7 (registry+https://github.com/rust-lang/crates.io-index)\",\n+]\n+\n [[package]]\n name = \"heck\"\n version = \"0.3.0\"\n@@ -1393,6 +1449,34 @@ dependencies = [\n  \"toml-query 0.6.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n+[[package]]\n+name = \"mdbook\"\n+version = \"0.2.3\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+dependencies = [\n+ \"ammonia 1.1.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"chrono 0.4.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"clap 2.32.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"elasticlunr-rs 2.3.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"env_logger 0.5.13 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"error-chain 0.12.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"handlebars 1.1.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"itertools 0.7.8 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"lazy_static 1.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"log 0.4.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"memchr 2.1.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"open 1.2.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"pulldown-cmark 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"regex 1.1.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"serde 1.0.82 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"serde_derive 1.0.81 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"serde_json 1.0.33 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"shlex 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"tempfile 3.0.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"toml 0.4.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"toml-query 0.7.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+]\n+\n [[package]]\n name = \"memchr\"\n version = \"2.1.1\"\n@@ -1733,6 +1817,14 @@ name = \"pest\"\n version = \"1.0.6\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n+[[package]]\n+name = \"pest\"\n+version = \"2.1.0\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+dependencies = [\n+ \"ucd-trie 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n+]\n+\n [[package]]\n name = \"pest_derive\"\n version = \"1.0.8\"\n@@ -1743,6 +1835,37 @@ dependencies = [\n  \"syn 0.11.11 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n+[[package]]\n+name = \"pest_derive\"\n+version = \"2.1.0\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+dependencies = [\n+ \"pest 2.1.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"pest_generator 2.1.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+]\n+\n+[[package]]\n+name = \"pest_generator\"\n+version = \"2.1.0\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+dependencies = [\n+ \"pest 2.1.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"pest_meta 2.1.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"proc-macro2 0.4.24 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"quote 0.6.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"syn 0.15.22 (registry+https://github.com/rust-lang/crates.io-index)\",\n+]\n+\n+[[package]]\n+name = \"pest_meta\"\n+version = \"2.1.0\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+dependencies = [\n+ \"maplit 1.0.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"pest 2.1.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"sha-1 0.7.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+]\n+\n [[package]]\n name = \"petgraph\"\n version = \"0.4.13\"\n@@ -2229,6 +2352,7 @@ version = \"0.1.0\"\n dependencies = [\n  \"clap 2.32.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"mdbook 0.1.7 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"mdbook 0.2.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -3025,6 +3149,17 @@ dependencies = [\n  \"smallvec 0.6.7 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n+[[package]]\n+name = \"sha-1\"\n+version = \"0.7.0\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+dependencies = [\n+ \"block-buffer 0.3.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"byte-tools 0.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"digest 0.7.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"fake-simd 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n+]\n+\n [[package]]\n name = \"shell-escape\"\n version = \"0.1.4\"\n@@ -3551,11 +3686,28 @@ dependencies = [\n  \"toml 0.4.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n+[[package]]\n+name = \"toml-query\"\n+version = \"0.7.0\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+dependencies = [\n+ \"error-chain 0.12.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"is-match 0.1.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"lazy_static 1.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"regex 1.1.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"toml 0.4.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n+]\n+\n [[package]]\n name = \"typenum\"\n version = \"1.10.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n+[[package]]\n+name = \"ucd-trie\"\n+version = \"0.1.1\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+\n [[package]]\n name = \"ucd-util\"\n version = \"0.1.3\"\n@@ -3778,6 +3930,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \"checksum ammonia 1.1.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"fd4c682378117e4186a492b2252b9537990e1617f44aed9788b9a1149de45477\"\n \"checksum ansi_term 0.11.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"ee49baf6cb617b853aa8d93bf420db2383fab46d314482ca2803b40d5fde979b\"\n \"checksum arc-swap 0.3.7 (registry+https://github.com/rust-lang/crates.io-index)\" = \"1025aeae2b664ca0ea726a89d574fe8f4e77dd712d443236ad1de00379450cf6\"\n+\"checksum arrayref 0.3.5 (registry+https://github.com/rust-lang/crates.io-index)\" = \"0d382e583f07208808f6b1249e60848879ba3543f57c32277bf52d69c2f0f0ee\"\n \"checksum arrayvec 0.4.7 (registry+https://github.com/rust-lang/crates.io-index)\" = \"a1e964f9e24d588183fcb43503abda40d288c8657dfc27311516ce2f05675aef\"\n \"checksum assert_cli 0.6.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"98589b0e465a6c510d95fceebd365bb79bedece7f6e18a480897f2015f85ec51\"\n \"checksum atty 0.2.11 (registry+https://github.com/rust-lang/crates.io-index)\" = \"9a7d5b8723950951411ee34d271d99dddcc2035a16ab25310ea2c8cfd4369652\"\n@@ -3787,8 +3940,10 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \"checksum bit-vec 0.5.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"4440d5cb623bb7390ae27fec0bb6c61111969860f8e3ae198bfa0663645e67cf\"\n \"checksum bitflags 0.9.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"4efd02e230a02e18f92fc2735f44597385ed02ad8f831e7c1c1156ee5e1ab3a5\"\n \"checksum bitflags 1.0.4 (registry+https://github.com/rust-lang/crates.io-index)\" = \"228047a76f468627ca71776ecdebd732a3423081fcf5125585bcd7c49886ce12\"\n+\"checksum block-buffer 0.3.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"a076c298b9ecdb530ed9d967e74a6027d6a7478924520acddcddc24c1c8ab3ab\"\n \"checksum bufstream 0.1.4 (registry+https://github.com/rust-lang/crates.io-index)\" = \"40e38929add23cdf8a366df9b0e088953150724bcbe5fc330b0d8eb3b328eec8\"\n \"checksum build_const 0.2.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"39092a32794787acd8525ee150305ff051b0aa6cc2abaf193924f5ab05425f39\"\n+\"checksum byte-tools 0.2.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"560c32574a12a89ecd91f5e742165893f86e3ab98d21f8ea548658eb9eef5f40\"\n \"checksum bytecount 0.4.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"b92204551573580e078dc80017f36a213eb77a0450e4ddd8cfa0f3f2d1f0178f\"\n \"checksum byteorder 1.2.7 (registry+https://github.com/rust-lang/crates.io-index)\" = \"94f88df23a25417badc922ab0f5716cc1330e87f71ddd9203b3a3ccd9cedf75d\"\n \"checksum bytes 0.4.11 (registry+https://github.com/rust-lang/crates.io-index)\" = \"40ade3d27603c2cb345eb0912aec461a6dec7e06a4ae48589904e808335c7afa\"\n@@ -3830,6 +3985,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \"checksum derive_more 0.13.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"3f57d78cf3bd45270dad4e70c21ec77a960b36c7a841ff9db76aaa775a8fb871\"\n \"checksum diff 0.1.11 (registry+https://github.com/rust-lang/crates.io-index)\" = \"3c2b69f912779fbb121ceb775d74d51e915af17aaebc38d28a592843a2dd0a3a\"\n \"checksum difference 2.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"524cbf6897b527295dff137cec09ecf3a05f4fddffd7dfcd1585403449e74198\"\n+\"checksum digest 0.7.6 (registry+https://github.com/rust-lang/crates.io-index)\" = \"03b072242a8cbaf9c145665af9d250c59af3b958f83ed6824e13533cf76d5b90\"\n \"checksum directories 1.0.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"72d337a64190607d4fcca2cb78982c5dd57f4916e19696b48a575fa746b6cb0f\"\n \"checksum dlmalloc 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"d56ad71b31043818d0ee10a7fb9664882f8e45849c81647585e6a3124f185517\"\n \"checksum either 1.5.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"3be565ca5c557d7f59e7cfcf1844f9e3033650c929c6566f511e8005f205c1d0\"\n@@ -3842,6 +3998,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \"checksum error-chain 0.12.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"07e791d3be96241c77c43846b665ef1384606da2cd2a48730abe606a12906e02\"\n \"checksum failure 0.1.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"6dd377bcc1b1b7ce911967e3ec24fa19c3224394ec05b54aa7b083d498341ac7\"\n \"checksum failure_derive 0.1.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"64c2d913fe8ed3b6c6518eedf4538255b989945c14c2a7d5cbff62a5e2120596\"\n+\"checksum fake-simd 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"e88a8acf291dafb59c2d96e8f59828f3838bb1a70398823ade51a84de6a6deed\"\n \"checksum filetime 0.2.4 (registry+https://github.com/rust-lang/crates.io-index)\" = \"a2df5c1a8c4be27e7707789dc42ae65976e60b394afd293d1419ab915833e646\"\n \"checksum fixedbitset 0.1.9 (registry+https://github.com/rust-lang/crates.io-index)\" = \"86d4de0081402f5e88cdac65c8dcdcc73118c1a7a465e2a05f0da05843a8ea33\"\n \"checksum flate2 1.0.6 (registry+https://github.com/rust-lang/crates.io-index)\" = \"2291c165c8e703ee54ef3055ad6188e3d51108e2ded18e9f2476e774fc5ad3d4\"\n@@ -3857,12 +4014,14 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \"checksum futf 0.1.4 (registry+https://github.com/rust-lang/crates.io-index)\" = \"7c9c1ce3fa9336301af935ab852c437817d14cd33690446569392e65170aac3b\"\n \"checksum futures 0.1.21 (registry+https://github.com/rust-lang/crates.io-index)\" = \"1a70b146671de62ec8c8ed572219ca5d594d9b06c0b364d5e67b722fc559b48c\"\n \"checksum fwdansi 1.0.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"34dd4c507af68d37ffef962063dfa1944ce0dd4d5b82043dbab1dabe088610c3\"\n+\"checksum generic-array 0.9.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"ef25c5683767570c2bbd7deba372926a55eaae9982d7726ee2a1050239d45b9d\"\n \"checksum getopts 0.2.17 (registry+https://github.com/rust-lang/crates.io-index)\" = \"b900c08c1939860ce8b54dc6a89e26e00c04c380fd0e09796799bd7f12861e05\"\n \"checksum git2 0.8.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"c7339329bfa14a00223244311560d11f8f489b453fb90092af97f267a6090ab0\"\n \"checksum git2-curl 0.9.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"d58551e903ed7e2d6fe3a2f3c7efa3a784ec29b19d0fbb035aaf0497c183fbdd\"\n \"checksum glob 0.2.11 (registry+https://github.com/rust-lang/crates.io-index)\" = \"8be18de09a56b60ed0edf84bc9df007e30040691af7acd1c41874faac5895bfb\"\n \"checksum globset 0.4.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"4743617a7464bbda3c8aec8558ff2f9429047e025771037df561d383337ff865\"\n \"checksum handlebars 0.32.4 (registry+https://github.com/rust-lang/crates.io-index)\" = \"d89ec99d1594f285d4590fc32bac5f75cdab383f1123d504d27862c644a807dd\"\n+\"checksum handlebars 1.1.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"d82e5750d8027a97b9640e3fefa66bbaf852a35228e1c90790efd13c4b09c166\"\n \"checksum heck 0.3.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"ea04fa3ead4e05e51a7c806fc07271fdbde4e246a6c6d1efd52e72230b771b82\"\n \"checksum hex 0.3.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"805026a5d0141ffc30abb3be3173848ad46a1b1664fe632428479619a3644d77\"\n \"checksum home 0.3.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"80dff82fb58cfbbc617fb9a9184b010be0529201553cda50ad04372bc2333aff\"\n@@ -3902,6 +4061,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \"checksum markup5ever 0.7.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"bfedc97d5a503e96816d10fedcd5b42f760b2e525ce2f7ec71f6a41780548475\"\n \"checksum matches 0.1.8 (registry+https://github.com/rust-lang/crates.io-index)\" = \"7ffc5c5338469d4d3ea17d269fa8ea3512ad247247c30bd2df69e68309ed0a08\"\n \"checksum mdbook 0.1.7 (registry+https://github.com/rust-lang/crates.io-index)\" = \"90b5a8d7e341ceee5db3882a06078d42661ddcfa2b3687319cc5da76ec4e782f\"\n+\"checksum mdbook 0.2.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"0ba0d44cb4089c741b9a91f3e5218298a40699c2f3a070a85014eed290c60819\"\n \"checksum memchr 2.1.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"0a3eb002f0535929f1199681417029ebea04aadc0c7a4224b46be99c7f5d6a16\"\n \"checksum memmap 0.6.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"e2ffa2c986de11a9df78620c01eeaaf27d94d3ff02bf81bfcca953102dd0c6ff\"\n \"checksum memoffset 0.2.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"0f9dc261e2b62d7a622bf416ea3c5245cdd5d9a7fcc428c0d06804dfce1775b3\"\n@@ -3937,7 +4097,11 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \"checksum parking_lot_core 0.4.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"94c8c7923936b28d546dfd14d4472eaf34c99b14e1c973a32b3e6d4eb04298c9\"\n \"checksum percent-encoding 1.0.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"31010dd2e1ac33d5b46a5b413495239882813e0369f8ed8a5e266f173602f831\"\n \"checksum pest 1.0.6 (registry+https://github.com/rust-lang/crates.io-index)\" = \"0fce5d8b5cc33983fc74f78ad552b5522ab41442c4ca91606e4236eb4b5ceefc\"\n+\"checksum pest 2.1.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"54f0c72a98d8ab3c99560bfd16df8059cc10e1f9a8e83e6e3b97718dd766e9c3\"\n \"checksum pest_derive 1.0.8 (registry+https://github.com/rust-lang/crates.io-index)\" = \"ca3294f437119209b084c797604295f40227cffa35c57220b1e99a6ff3bf8ee4\"\n+\"checksum pest_derive 2.1.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"833d1ae558dc601e9a60366421196a8d94bc0ac980476d0b67e1d0988d72b2d0\"\n+\"checksum pest_generator 2.1.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"63120576c4efd69615b5537d3d052257328a4ca82876771d6944424ccfd9f646\"\n+\"checksum pest_meta 2.1.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"f5a3492a4ed208ffc247adcdcc7ba2a95be3104f58877d0d02f0df39bf3efb5e\"\n \"checksum petgraph 0.4.13 (registry+https://github.com/rust-lang/crates.io-index)\" = \"9c3659d1ee90221741f65dd128d9998311b0e40c5d3c23a62445938214abce4f\"\n \"checksum phf 0.7.22 (registry+https://github.com/rust-lang/crates.io-index)\" = \"7d37a244c75a9748e049225155f56dbcb98fe71b192fd25fd23cb914b5ad62f2\"\n \"checksum phf_codegen 0.7.22 (registry+https://github.com/rust-lang/crates.io-index)\" = \"4e4048fe7dd7a06b8127ecd6d3803149126e9b33c7558879846da3a63f734f2b\"\n@@ -4013,6 +4177,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \"checksum serde_derive 1.0.81 (registry+https://github.com/rust-lang/crates.io-index)\" = \"477b13b646f5b5b56fc95bedfc3b550d12141ce84f466f6c44b9a17589923885\"\n \"checksum serde_ignored 0.0.4 (registry+https://github.com/rust-lang/crates.io-index)\" = \"190e9765dcedb56be63b6e0993a006c7e3b071a016a304736e4a315dc01fb142\"\n \"checksum serde_json 1.0.33 (registry+https://github.com/rust-lang/crates.io-index)\" = \"c37ccd6be3ed1fdf419ee848f7c758eb31b054d7cd3ae3600e3bae0adf569811\"\n+\"checksum sha-1 0.7.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"51b9d1f3b5de8a167ab06834a7c883bd197f2191e1dda1a22d9ccfeedbf9aded\"\n \"checksum shell-escape 0.1.4 (registry+https://github.com/rust-lang/crates.io-index)\" = \"170a13e64f2a51b77a45702ba77287f5c6829375b04a69cf2222acd17d0cfab9\"\n \"checksum shlex 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"7fdf1b9db47230893d76faad238fd6097fd6d6a9245cd7a4d90dbd639536bbd2\"\n \"checksum signal-hook 0.1.7 (registry+https://github.com/rust-lang/crates.io-index)\" = \"1f272d1b7586bec132ed427f532dd418d8beca1ca7f2caf7df35569b1415a4b4\"\n@@ -4056,7 +4221,9 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \"checksum tokio-uds 0.2.5 (registry+https://github.com/rust-lang/crates.io-index)\" = \"037ffc3ba0e12a0ab4aca92e5234e0dedeb48fddf6ccd260f1f150a36a9f2445\"\n \"checksum toml 0.4.10 (registry+https://github.com/rust-lang/crates.io-index)\" = \"758664fc71a3a69038656bee8b6be6477d2a6c315a6b81f7081f591bffa4111f\"\n \"checksum toml-query 0.6.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"6854664bfc6df0360c695480836ee90e2d0c965f06db291d10be9344792d43e8\"\n+\"checksum toml-query 0.7.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"ab234a943a2363ad774020e2f9474a38a85bc4396bace01a96380144aef17db3\"\n \"checksum typenum 1.10.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"612d636f949607bdf9b123b4a6f6d966dedf3ff669f7f045890d3a4a73948169\"\n+\"checksum ucd-trie 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"71a9c5b1fe77426cf144cc30e49e955270f5086e31a6441dfa8b32efc09b9d77\"\n \"checksum ucd-util 0.1.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"535c204ee4d8434478593480b8f86ab45ec9aae0e83c568ca81abf0fd0e88f86\"\n \"checksum unicode-bidi 0.3.4 (registry+https://github.com/rust-lang/crates.io-index)\" = \"49f2bd0c6468a8230e1db229cff8029217cf623c767ea5d60bfbd42729ea54d5\"\n \"checksum unicode-normalization 0.1.7 (registry+https://github.com/rust-lang/crates.io-index)\" = \"6a0180bc61fc5a987082bfa111f4cc95c4caff7f9799f3e46df09163a937aa25\""}, {"sha": "08e97396fd68b3044c9851459e5abda21ea02ea8", "filename": "src/bootstrap/doc.rs", "status": "modified", "additions": 37, "deletions": 8, "changes": 45, "blob_url": "https://github.com/rust-lang/rust/blob/d9a2e3b1ccf16c6d43f56f503bd80c1ad137d523/src%2Fbootstrap%2Fdoc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d9a2e3b1ccf16c6d43f56f503bd80c1ad137d523/src%2Fbootstrap%2Fdoc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fdoc.rs?ref=d9a2e3b1ccf16c6d43f56f503bd80c1ad137d523", "patch": "@@ -23,7 +23,7 @@ use crate::cache::{INTERNER, Interned};\n use crate::config::Config;\n \n macro_rules! book {\n-    ($($name:ident, $path:expr, $book_name:expr;)+) => {\n+    ($($name:ident, $path:expr, $book_name:expr, $book_ver:expr;)+) => {\n         $(\n             #[derive(Debug, Copy, Clone, Hash, PartialEq, Eq)]\n         pub struct $name {\n@@ -49,26 +49,40 @@ macro_rules! book {\n                 builder.ensure(Rustbook {\n                     target: self.target,\n                     name: INTERNER.intern_str($book_name),\n+                    version: $book_ver,\n                 })\n             }\n         }\n         )+\n     }\n }\n \n+// NOTE: When adding a book here, make sure to ALSO build the book by\n+// adding a build step in `src/bootstrap/builder.rs`!\n book!(\n-    Nomicon, \"src/doc/nomicon\", \"nomicon\";\n-    Reference, \"src/doc/reference\", \"reference\";\n-    EditionGuide, \"src/doc/edition-guide\", \"edition-guide\";\n-    RustdocBook, \"src/doc/rustdoc\", \"rustdoc\";\n-    RustcBook, \"src/doc/rustc\", \"rustc\";\n-    RustByExample, \"src/doc/rust-by-example\", \"rust-by-example\";\n+    EditionGuide, \"src/doc/edition-guide\", \"edition-guide\", RustbookVersion::MdBook1;\n+    Nomicon, \"src/doc/nomicon\", \"nomicon\", RustbookVersion::MdBook1;\n+    Reference, \"src/doc/reference\", \"reference\", RustbookVersion::MdBook1;\n+    RustByExample, \"src/doc/rust-by-example\", \"rust-by-example\", RustbookVersion::MdBook1;\n+    RustcBook, \"src/doc/rustc\", \"rustc\", RustbookVersion::MdBook1;\n+    RustdocBook, \"src/doc/rustdoc\", \"rustdoc\", RustbookVersion::MdBook1;\n );\n \n+#[derive(Debug, Copy, Clone, Hash, PartialEq, Eq)]\n+enum RustbookVersion {\n+    MdBook1,\n+\n+    /// Note: Currently no books use mdBook v2, but we want the option\n+    /// to be available\n+    #[allow(dead_code)]\n+    MdBook2,\n+}\n+\n #[derive(Debug, Copy, Clone, Hash, PartialEq, Eq)]\n struct Rustbook {\n     target: Interned<String>,\n     name: Interned<String>,\n+    version: RustbookVersion,\n }\n \n impl Step for Rustbook {\n@@ -90,6 +104,7 @@ impl Step for Rustbook {\n             target: self.target,\n             name: self.name,\n             src: INTERNER.intern_path(src),\n+            version: self.version,\n         });\n     }\n }\n@@ -122,6 +137,7 @@ impl Step for UnstableBook {\n             target: self.target,\n             name: INTERNER.intern_str(\"unstable-book\"),\n             src: builder.md_doc_out(self.target),\n+            version: RustbookVersion::MdBook1,\n         })\n     }\n }\n@@ -175,6 +191,7 @@ struct RustbookSrc {\n     target: Interned<String>,\n     name: Interned<String>,\n     src: Interned<PathBuf>,\n+    version: RustbookVersion,\n }\n \n impl Step for RustbookSrc {\n@@ -205,11 +222,19 @@ impl Step for RustbookSrc {\n         }\n         builder.info(&format!(\"Rustbook ({}) - {}\", target, name));\n         let _ = fs::remove_dir_all(&out);\n+\n+        let vers = match self.version {\n+            RustbookVersion::MdBook1 => \"1\",\n+            RustbookVersion::MdBook2 => \"2\",\n+        };\n+\n         builder.run(rustbook_cmd\n                        .arg(\"build\")\n                        .arg(&src)\n                        .arg(\"-d\")\n-                       .arg(out));\n+                       .arg(out)\n+                       .arg(\"-m\")\n+                       .arg(vers));\n     }\n }\n \n@@ -255,6 +280,7 @@ impl Step for TheBook {\n         builder.ensure(Rustbook {\n             target,\n             name: INTERNER.intern_string(name.to_string()),\n+            version: RustbookVersion::MdBook1,\n         });\n \n         // building older edition redirects\n@@ -263,18 +289,21 @@ impl Step for TheBook {\n         builder.ensure(Rustbook {\n             target,\n             name: INTERNER.intern_string(source_name),\n+            version: RustbookVersion::MdBook1,\n         });\n \n         let source_name = format!(\"{}/second-edition\", name);\n         builder.ensure(Rustbook {\n             target,\n             name: INTERNER.intern_string(source_name),\n+            version: RustbookVersion::MdBook1,\n         });\n \n         let source_name = format!(\"{}/2018-edition\", name);\n         builder.ensure(Rustbook {\n             target,\n             name: INTERNER.intern_string(source_name),\n+            version: RustbookVersion::MdBook1,\n         });\n \n         // build the version info page and CSS"}, {"sha": "5bf1553b22711914fbf67ec5968b6140ffb5aa81", "filename": "src/tools/rustbook/Cargo.toml", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/d9a2e3b1ccf16c6d43f56f503bd80c1ad137d523/src%2Ftools%2Frustbook%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/d9a2e3b1ccf16c6d43f56f503bd80c1ad137d523/src%2Ftools%2Frustbook%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Frustbook%2FCargo.toml?ref=d9a2e3b1ccf16c6d43f56f503bd80c1ad137d523", "patch": "@@ -3,11 +3,19 @@ authors = [\"The Rust Project Developers\"]\n name = \"rustbook\"\n version = \"0.1.0\"\n license = \"MIT/Apache-2.0\"\n+edition = \"2018\"\n \n [dependencies]\n clap = \"2.25.0\"\n \n-[dependencies.mdbook]\n+[dependencies.mdbook_2]\n+package = \"mdbook\"\n+version = \"0.2.3\"\n+default-features = false\n+features = [\"search\"]\n+\n+[dependencies.mdbook_1]\n+package = \"mdbook\"\n version = \"0.1.7\"\n default-features = false\n features = [\"search\"]"}, {"sha": "5a6246347cc030d6d28ff047b3596dcdb5ce8f82", "filename": "src/tools/rustbook/src/main.rs", "status": "modified", "additions": 56, "deletions": 16, "changes": 72, "blob_url": "https://github.com/rust-lang/rust/blob/d9a2e3b1ccf16c6d43f56f503bd80c1ad137d523/src%2Ftools%2Frustbook%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d9a2e3b1ccf16c6d43f56f503bd80c1ad137d523/src%2Ftools%2Frustbook%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Frustbook%2Fsrc%2Fmain.rs?ref=d9a2e3b1ccf16c6d43f56f503bd80c1ad137d523", "patch": "@@ -1,21 +1,24 @@\n //\n-extern crate mdbook;\n-#[macro_use]\n-extern crate clap;\n+use clap::{crate_version};\n \n use std::env;\n use std::path::{Path, PathBuf};\n \n use clap::{App, ArgMatches, SubCommand, AppSettings};\n \n-use mdbook::MDBook;\n-use mdbook::errors::Result;\n+use mdbook_1::{MDBook as MDBook1};\n+use mdbook_1::errors::{Result as Result1};\n+\n+use mdbook_2::{MDBook as MDBook2};\n+use mdbook_2::errors::{Result as Result2};\n \n fn main() {\n     let d_message = \"-d, --dest-dir=[dest-dir]\n 'The output directory for your book{n}(Defaults to ./book when omitted)'\";\n     let dir_message = \"[dir]\n 'A directory for your book{n}(Defaults to Current Directory when omitted)'\";\n+    let vers_message = \"-m, --mdbook-vers=[md-version]\n+'The version of mdbook to use for your book{n}(Defaults to 1 when omitted)'\";\n \n     let matches = App::new(\"rustbook\")\n                     .about(\"Build a book with mdBook\")\n@@ -25,29 +28,66 @@ fn main() {\n                     .subcommand(SubCommand::with_name(\"build\")\n                         .about(\"Build the book from the markdown files\")\n                         .arg_from_usage(d_message)\n-                        .arg_from_usage(dir_message))\n+                        .arg_from_usage(dir_message)\n+                        .arg_from_usage(vers_message))\n                     .get_matches();\n \n     // Check which subcomamnd the user ran...\n-    let res = match matches.subcommand() {\n-        (\"build\", Some(sub_matches)) => build(sub_matches),\n+    match matches.subcommand() {\n+        (\"build\", Some(sub_matches)) => {\n+            match sub_matches.value_of(\"mdbook-vers\") {\n+                None | Some(\"1\") => {\n+                    if let Err(e) = build_1(sub_matches) {\n+                        eprintln!(\"Error: {}\", e);\n+\n+                        for cause in e.iter().skip(1) {\n+                            eprintln!(\"\\tCaused By: {}\", cause);\n+                        }\n+\n+                        ::std::process::exit(101);\n+                    }\n+                }\n+                Some(\"2\") => {\n+                    if let Err(e) = build_2(sub_matches) {\n+                        eprintln!(\"Error: {}\", e);\n+\n+                        for cause in e.iter().skip(1) {\n+                            eprintln!(\"\\tCaused By: {}\", cause);\n+                        }\n+\n+                        ::std::process::exit(101);\n+                    }\n+                }\n+                _ => {\n+                    panic!(\"Invalid mdBook version! Select '1' or '2'\");\n+                }\n+            };\n+        },\n         (_, _) => unreachable!(),\n     };\n+}\n \n-    if let Err(e) = res {\n-        eprintln!(\"Error: {}\", e);\n+// Build command implementation\n+pub fn build_1(args: &ArgMatches) -> Result1<()> {\n+    let book_dir = get_book_dir(args);\n+    let mut book = MDBook1::load(&book_dir)?;\n \n-        for cause in e.iter().skip(1) {\n-            eprintln!(\"\\tCaused By: {}\", cause);\n-        }\n+    // Set this to allow us to catch bugs in advance.\n+    book.config.build.create_missing = false;\n \n-        ::std::process::exit(101);\n+    if let Some(dest_dir) = args.value_of(\"dest-dir\") {\n+        book.config.build.build_dir = PathBuf::from(dest_dir);\n     }\n+\n+    book.build()?;\n+\n+    Ok(())\n }\n+\n // Build command implementation\n-pub fn build(args: &ArgMatches) -> Result<()> {\n+pub fn build_2(args: &ArgMatches) -> Result2<()> {\n     let book_dir = get_book_dir(args);\n-    let mut book = MDBook::load(&book_dir)?;\n+    let mut book = MDBook2::load(&book_dir)?;\n \n     // Set this to allow us to catch bugs in advance.\n     book.config.build.create_missing = false;"}, {"sha": "17c36b80f3a7c6fa492a26e3460827db4f8fbb9a", "filename": "src/tools/tidy/src/deps.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d9a2e3b1ccf16c6d43f56f503bd80c1ad137d523/src%2Ftools%2Ftidy%2Fsrc%2Fdeps.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d9a2e3b1ccf16c6d43f56f503bd80c1ad137d523/src%2Ftools%2Ftidy%2Fsrc%2Fdeps.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Ftidy%2Fsrc%2Fdeps.rs?ref=d9a2e3b1ccf16c6d43f56f503bd80c1ad137d523", "patch": "@@ -26,6 +26,7 @@ const EXCEPTIONS: &[&str] = &[\n     \"mdbook\",             // MPL2, mdbook\n     \"openssl\",            // BSD+advertising clause, cargo, mdbook\n     \"pest\",               // MPL2, mdbook via handlebars\n+    \"arrayref\",           // BSD-2-Clause, mdbook via handlebars via pest\n     \"thread-id\",          // Apache-2.0, mdbook\n     \"toml-query\",         // MPL-2.0, mdbook\n     \"is-match\",           // MPL-2.0, mdbook"}]}