{"sha": "b776fb82941cadfc752368901f210831d5184d95", "node_id": "C_kwDOAAsO6NoAKGI3NzZmYjgyOTQxY2FkZmM3NTIzNjg5MDFmMjEwODMxZDUxODRkOTU", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-06-28T07:27:08Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-06-28T07:27:08Z"}, "message": "Auto merge of #8774 - hellow554:cargo-rust-version, r=flip1995\n\ntry reading rust-version from Cargo.toml\n\nCargo.toml can contain a field `rust-version`, that acts like a MSRV of\nclippy.toml file: https://doc.rust-lang.org/cargo/reference/manifest.html#the-rust-version-field\nThis will try to read that field and use it, if the clippy.toml config\nhas no `msrv` entry\n\nchangelog: respect `rust-version` from `Cargo.toml`\n\ncloses #8746\ncloses #7765", "tree": {"sha": "a99fff000a30b0c1e6788039c099c13a37a8c590", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a99fff000a30b0c1e6788039c099c13a37a8c590"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b776fb82941cadfc752368901f210831d5184d95", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b776fb82941cadfc752368901f210831d5184d95", "html_url": "https://github.com/rust-lang/rust/commit/b776fb82941cadfc752368901f210831d5184d95", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b776fb82941cadfc752368901f210831d5184d95/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "373bb573af57a65a233fa30bb1623512b5c831c3", "url": "https://api.github.com/repos/rust-lang/rust/commits/373bb573af57a65a233fa30bb1623512b5c831c3", "html_url": "https://github.com/rust-lang/rust/commit/373bb573af57a65a233fa30bb1623512b5c831c3"}, {"sha": "f0a1cd5645d6b72a621c8a80eebe72d363c00a4e", "url": "https://api.github.com/repos/rust-lang/rust/commits/f0a1cd5645d6b72a621c8a80eebe72d363c00a4e", "html_url": "https://github.com/rust-lang/rust/commit/f0a1cd5645d6b72a621c8a80eebe72d363c00a4e"}], "stats": {"total": 361, "additions": 345, "deletions": 16}, "files": [{"sha": "fa4dd123ee9a51478e1ec80cdfb19f2c1aba7d1a", "filename": "Cargo.toml", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/Cargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/Cargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.toml?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -31,6 +31,7 @@ termize = \"0.1\"\n compiletest_rs = { version = \"0.8\", features = [\"tmp\"] }\n tester = \"0.9\"\n regex = \"1.5\"\n+toml = \"0.5\"\n # This is used by the `collect-metadata` alias.\n filetime = \"0.2\"\n "}, {"sha": "2c3defeaa83078d2d124d62fbc1bb3cb6458d600", "filename": "README.md", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/README.md", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/README.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/README.md?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -214,6 +214,14 @@ specifying the minimum supported Rust version (MSRV) in the clippy configuration\n msrv = \"1.30.0\"\n ```\n \n+Alternatively, the [`rust-version` field](https://doc.rust-lang.org/cargo/reference/manifest.html#the-rust-version-field)\n+in the `Cargo.toml` can be used.\n+\n+```toml\n+# Cargo.toml\n+rust-version = \"1.30\"\n+```\n+\n The MSRV can also be specified as an inner attribute, like below.\n \n ```rust"}, {"sha": "6c5b5ed98bc42335298c66577a5863b2d8cd3613", "filename": "clippy_lints/src/lib.rs", "status": "modified", "additions": 37, "deletions": 13, "changes": 50, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/clippy_lints%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/clippy_lints%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.rs?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -53,6 +53,7 @@ extern crate clippy_utils;\n use clippy_utils::parse_msrv;\n use rustc_data_structures::fx::FxHashSet;\n use rustc_lint::LintId;\n+use rustc_semver::RustcVersion;\n use rustc_session::Session;\n \n /// Macro used to declare a Clippy lint.\n@@ -452,6 +453,39 @@ pub fn register_pre_expansion_lints(store: &mut rustc_lint::LintStore, sess: &Se\n     store.register_pre_expansion_pass(move || Box::new(attrs::EarlyAttributes { msrv }));\n }\n \n+fn read_msrv(conf: &Conf, sess: &Session) -> Option<RustcVersion> {\n+    let cargo_msrv = std::env::var(\"CARGO_PKG_RUST_VERSION\")\n+        .ok()\n+        .and_then(|v| parse_msrv(&v, None, None));\n+    let clippy_msrv = conf.msrv.as_ref().and_then(|s| {\n+        parse_msrv(s, None, None).or_else(|| {\n+            sess.err(&format!(\n+                \"error reading Clippy's configuration file. `{}` is not a valid Rust version\",\n+                s\n+            ));\n+            None\n+        })\n+    });\n+\n+    if let Some(cargo_msrv) = cargo_msrv {\n+        if let Some(clippy_msrv) = clippy_msrv {\n+            // if both files have an msrv, let's compare them and emit a warning if they differ\n+            if clippy_msrv != cargo_msrv {\n+                sess.warn(&format!(\n+                    \"the MSRV in `clippy.toml` and `Cargo.toml` differ; using `{}` from `clippy.toml`\",\n+                    clippy_msrv\n+                ));\n+            }\n+\n+            Some(clippy_msrv)\n+        } else {\n+            Some(cargo_msrv)\n+        }\n+    } else {\n+        clippy_msrv\n+    }\n+}\n+\n #[doc(hidden)]\n pub fn read_conf(sess: &Session) -> Conf {\n     let file_name = match utils::conf::lookup_conf_file() {\n@@ -467,12 +501,11 @@ pub fn read_conf(sess: &Session) -> Conf {\n     let TryConf { conf, errors } = utils::conf::read(&file_name);\n     // all conf errors are non-fatal, we just use the default conf in case of error\n     for error in errors {\n-        sess.struct_err(&format!(\n+        sess.err(&format!(\n             \"error reading Clippy's configuration file `{}`: {}\",\n             file_name.display(),\n             format_error(error)\n-        ))\n-        .emit();\n+        ));\n     }\n \n     conf\n@@ -579,16 +612,7 @@ pub fn register_plugins(store: &mut rustc_lint::LintStore, sess: &Session, conf:\n     store.register_late_pass(|| Box::new(non_octal_unix_permissions::NonOctalUnixPermissions));\n     store.register_early_pass(|| Box::new(unnecessary_self_imports::UnnecessarySelfImports));\n \n-    let msrv = conf.msrv.as_ref().and_then(|s| {\n-        parse_msrv(s, None, None).or_else(|| {\n-            sess.err(&format!(\n-                \"error reading Clippy's configuration file. `{}` is not a valid Rust version\",\n-                s\n-            ));\n-            None\n-        })\n-    });\n-\n+    let msrv = read_msrv(conf, sess);\n     let avoid_breaking_exported_api = conf.avoid_breaking_exported_api;\n     let allow_expect_in_tests = conf.allow_expect_in_tests;\n     let allow_unwrap_in_tests = conf.allow_unwrap_in_tests;"}, {"sha": "319256814c3a6c2560d63e83d88e39222823b816", "filename": "tests/compile-test.rs", "status": "modified", "additions": 19, "deletions": 1, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fcompile-test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fcompile-test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-test.rs?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -130,7 +130,7 @@ fn base_config(test_dir: &str) -> compiletest::Config {\n     let mut config = compiletest::Config {\n         edition: Some(\"2021\".into()),\n         mode: TestMode::Ui,\n-        ..compiletest::Config::default()\n+        ..Default::default()\n     };\n \n     if let Ok(filters) = env::var(\"TESTNAME\") {\n@@ -286,6 +286,24 @@ fn run_ui_cargo() {\n                 }\n \n                 env::set_current_dir(&src_path)?;\n+\n+                let cargo_toml_path = case.path().join(\"Cargo.toml\");\n+                let cargo_content = fs::read(&cargo_toml_path)?;\n+                let cargo_parsed: toml::Value = toml::from_str(\n+                    std::str::from_utf8(&cargo_content).expect(\"`Cargo.toml` is not a valid utf-8 file!\"),\n+                )\n+                .expect(\"Can't parse `Cargo.toml`\");\n+\n+                let _g = VarGuard::set(\"CARGO_MANIFEST_DIR\", case.path());\n+                let _h = VarGuard::set(\n+                    \"CARGO_PKG_RUST_VERSION\",\n+                    cargo_parsed\n+                        .get(\"package\")\n+                        .and_then(|p| p.get(\"rust-version\"))\n+                        .and_then(toml::Value::as_str)\n+                        .unwrap_or(\"\"),\n+                );\n+\n                 for file in fs::read_dir(&src_path)? {\n                     let file = file?;\n                     if file.file_type()?.is_dir() {"}, {"sha": "73ec29c5803bda497ef4fbaf710da076f04affd3", "filename": "tests/ui-cargo/cargo_rust_version/fail_both_diff/Cargo.toml", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_both_diff%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_both_diff%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_both_diff%2FCargo.toml?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -0,0 +1,8 @@\n+[package]\n+name = \"fail-both-diff\"\n+version = \"0.1.0\"\n+rust-version = \"1.56\"\n+\n+# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html\n+\n+[dependencies]"}, {"sha": "abe19b3a00710b0df233e46ec068878c779c28ab", "filename": "tests/ui-cargo/cargo_rust_version/fail_both_diff/clippy.toml", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_both_diff%2Fclippy.toml", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_both_diff%2Fclippy.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_both_diff%2Fclippy.toml?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -0,0 +1 @@\n+msrv = \"1.59\""}, {"sha": "5b91d5508678f7c724c2e389ee7142d366fdfecf", "filename": "tests/ui-cargo/cargo_rust_version/fail_both_diff/src/main.rs", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_both_diff%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_both_diff%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_both_diff%2Fsrc%2Fmain.rs?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -0,0 +1,11 @@\n+#![deny(clippy::use_self)]\n+\n+pub struct Foo;\n+\n+impl Foo {\n+    pub fn bar() -> Foo {\n+        Foo\n+    }\n+}\n+\n+fn main() {}"}, {"sha": "9a7d802dc6d3a64ae041532679d4d6b0f1c7f520", "filename": "tests/ui-cargo/cargo_rust_version/fail_both_diff/src/main.stderr", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_both_diff%2Fsrc%2Fmain.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_both_diff%2Fsrc%2Fmain.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_both_diff%2Fsrc%2Fmain.stderr?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -0,0 +1,16 @@\n+warning: the MSRV in `clippy.toml` and `Cargo.toml` differ; using `1.59.0` from `clippy.toml`\n+\n+error: unnecessary structure name repetition\n+  --> $DIR/main.rs:6:21\n+   |\n+LL |     pub fn bar() -> Foo {\n+   |                     ^^^ help: use the applicable keyword: `Self`\n+   |\n+note: the lint level is defined here\n+  --> $DIR/main.rs:1:9\n+   |\n+LL | #![deny(clippy::use_self)]\n+   |         ^^^^^^^^^^^^^^^^\n+\n+error: aborting due to previous error; 1 warning emitted\n+"}, {"sha": "2d6d547e4fe3af7e69903ec0626659b2aba6b5b8", "filename": "tests/ui-cargo/cargo_rust_version/fail_both_same/Cargo.toml", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_both_same%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_both_same%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_both_same%2FCargo.toml?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -0,0 +1,8 @@\n+[package]\n+name = \"fail-both-same\"\n+version = \"0.1.0\"\n+rust-version = \"1.57.0\"\n+\n+# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html\n+\n+[dependencies]"}, {"sha": "5cccb362c14214d49481646949047565c12a3208", "filename": "tests/ui-cargo/cargo_rust_version/fail_both_same/clippy.toml", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_both_same%2Fclippy.toml", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_both_same%2Fclippy.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_both_same%2Fclippy.toml?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -0,0 +1 @@\n+msrv = \"1.57\""}, {"sha": "5b91d5508678f7c724c2e389ee7142d366fdfecf", "filename": "tests/ui-cargo/cargo_rust_version/fail_both_same/src/main.rs", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_both_same%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_both_same%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_both_same%2Fsrc%2Fmain.rs?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -0,0 +1,11 @@\n+#![deny(clippy::use_self)]\n+\n+pub struct Foo;\n+\n+impl Foo {\n+    pub fn bar() -> Foo {\n+        Foo\n+    }\n+}\n+\n+fn main() {}"}, {"sha": "a280e1bacdfdca063dae06c0edd6cf8a2f0ea52b", "filename": "tests/ui-cargo/cargo_rust_version/fail_both_same/src/main.stderr", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_both_same%2Fsrc%2Fmain.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_both_same%2Fsrc%2Fmain.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_both_same%2Fsrc%2Fmain.stderr?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -0,0 +1,14 @@\n+error: unnecessary structure name repetition\n+  --> $DIR/main.rs:6:21\n+   |\n+LL |     pub fn bar() -> Foo {\n+   |                     ^^^ help: use the applicable keyword: `Self`\n+   |\n+note: the lint level is defined here\n+  --> $DIR/main.rs:1:9\n+   |\n+LL | #![deny(clippy::use_self)]\n+   |         ^^^^^^^^^^^^^^^^\n+\n+error: aborting due to previous error\n+"}, {"sha": "36a53bd829d9eb0b8bc2c7137485df9508c6a389", "filename": "tests/ui-cargo/cargo_rust_version/fail_cargo/Cargo.toml", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_cargo%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_cargo%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_cargo%2FCargo.toml?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -0,0 +1,8 @@\n+[package]\n+name = \"fail-cargo\"\n+version = \"0.1.0\"\n+rust-version = \"1.56.1\"\n+\n+# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html\n+\n+[dependencies]"}, {"sha": "5b91d5508678f7c724c2e389ee7142d366fdfecf", "filename": "tests/ui-cargo/cargo_rust_version/fail_cargo/src/main.rs", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_cargo%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_cargo%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_cargo%2Fsrc%2Fmain.rs?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -0,0 +1,11 @@\n+#![deny(clippy::use_self)]\n+\n+pub struct Foo;\n+\n+impl Foo {\n+    pub fn bar() -> Foo {\n+        Foo\n+    }\n+}\n+\n+fn main() {}"}, {"sha": "a280e1bacdfdca063dae06c0edd6cf8a2f0ea52b", "filename": "tests/ui-cargo/cargo_rust_version/fail_cargo/src/main.stderr", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_cargo%2Fsrc%2Fmain.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_cargo%2Fsrc%2Fmain.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_cargo%2Fsrc%2Fmain.stderr?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -0,0 +1,14 @@\n+error: unnecessary structure name repetition\n+  --> $DIR/main.rs:6:21\n+   |\n+LL |     pub fn bar() -> Foo {\n+   |                     ^^^ help: use the applicable keyword: `Self`\n+   |\n+note: the lint level is defined here\n+  --> $DIR/main.rs:1:9\n+   |\n+LL | #![deny(clippy::use_self)]\n+   |         ^^^^^^^^^^^^^^^^\n+\n+error: aborting due to previous error\n+"}, {"sha": "9f644a1a39a50b0f428ea6eed535602fb2ff940a", "filename": "tests/ui-cargo/cargo_rust_version/fail_clippy/Cargo.toml", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_clippy%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_clippy%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_clippy%2FCargo.toml?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -0,0 +1,7 @@\n+[package]\n+name = \"fail-clippy\"\n+version = \"0.1.0\"\n+\n+# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html\n+\n+[dependencies]"}, {"sha": "ddbdbc1fa25907fec3d4a0ce50e64cb3e56b3d4a", "filename": "tests/ui-cargo/cargo_rust_version/fail_clippy/clippy.toml", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_clippy%2Fclippy.toml", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_clippy%2Fclippy.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_clippy%2Fclippy.toml?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -0,0 +1 @@\n+msrv = \"1.58\""}, {"sha": "5b91d5508678f7c724c2e389ee7142d366fdfecf", "filename": "tests/ui-cargo/cargo_rust_version/fail_clippy/src/main.rs", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_clippy%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_clippy%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_clippy%2Fsrc%2Fmain.rs?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -0,0 +1,11 @@\n+#![deny(clippy::use_self)]\n+\n+pub struct Foo;\n+\n+impl Foo {\n+    pub fn bar() -> Foo {\n+        Foo\n+    }\n+}\n+\n+fn main() {}"}, {"sha": "a280e1bacdfdca063dae06c0edd6cf8a2f0ea52b", "filename": "tests/ui-cargo/cargo_rust_version/fail_clippy/src/main.stderr", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_clippy%2Fsrc%2Fmain.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_clippy%2Fsrc%2Fmain.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_clippy%2Fsrc%2Fmain.stderr?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -0,0 +1,14 @@\n+error: unnecessary structure name repetition\n+  --> $DIR/main.rs:6:21\n+   |\n+LL |     pub fn bar() -> Foo {\n+   |                     ^^^ help: use the applicable keyword: `Self`\n+   |\n+note: the lint level is defined here\n+  --> $DIR/main.rs:1:9\n+   |\n+LL | #![deny(clippy::use_self)]\n+   |         ^^^^^^^^^^^^^^^^\n+\n+error: aborting due to previous error\n+"}, {"sha": "5380e993b29362c5c45aa0c73e26aef0fbb39cee", "filename": "tests/ui-cargo/cargo_rust_version/fail_file_attr/Cargo.toml", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_file_attr%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_file_attr%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_file_attr%2FCargo.toml?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -0,0 +1,8 @@\n+[package]\n+name = \"fail-file-attr\"\n+version = \"0.1.0\"\n+rust-version = \"1.13\"\n+\n+# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html\n+\n+[dependencies]"}, {"sha": "ea5d806594b5e05072fa400a7998879f078aad5b", "filename": "tests/ui-cargo/cargo_rust_version/fail_file_attr/clippy.toml", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_file_attr%2Fclippy.toml", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_file_attr%2Fclippy.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_file_attr%2Fclippy.toml?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -0,0 +1 @@\n+msrv = \"1.13.0\""}, {"sha": "bcbffa82a5417239aac706cbfa0dfe265d05165c", "filename": "tests/ui-cargo/cargo_rust_version/fail_file_attr/src/main.rs", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_file_attr%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_file_attr%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_file_attr%2Fsrc%2Fmain.rs?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -0,0 +1,16 @@\n+// FIXME: this should produce a warning, because the attribute says 1.58 and the cargo.toml file\n+// says 1.13\n+\n+#![feature(custom_inner_attributes)]\n+#![clippy::msrv = \"1.58.0\"]\n+#![deny(clippy::use_self)]\n+\n+pub struct Foo;\n+\n+impl Foo {\n+    pub fn bar() -> Foo {\n+        Foo\n+    }\n+}\n+\n+fn main() {}"}, {"sha": "88f6e00922bc4875acfdb9f199daa4951d9a5ffc", "filename": "tests/ui-cargo/cargo_rust_version/fail_file_attr/src/main.stderr", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_file_attr%2Fsrc%2Fmain.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_file_attr%2Fsrc%2Fmain.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fcargo_rust_version%2Ffail_file_attr%2Fsrc%2Fmain.stderr?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -0,0 +1,14 @@\n+error: unnecessary structure name repetition\n+  --> $DIR/main.rs:11:21\n+   |\n+LL |     pub fn bar() -> Foo {\n+   |                     ^^^ help: use the applicable keyword: `Self`\n+   |\n+note: the lint level is defined here\n+  --> $DIR/main.rs:6:9\n+   |\n+LL | #![deny(clippy::use_self)]\n+   |         ^^^^^^^^^^^^^^^^\n+\n+error: aborting due to previous error\n+"}, {"sha": "1f9bd8f9a84e30595924aa2d996f71e9a561e5a8", "filename": "tests/ui-cargo/cargo_rust_version/pass_both_same/Cargo.toml", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Fpass_both_same%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Fpass_both_same%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fcargo_rust_version%2Fpass_both_same%2FCargo.toml?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -0,0 +1,8 @@\n+[package]\n+name = \"fail-both-same\"\n+version = \"0.1.0\"\n+rust-version = \"1.13.0\"\n+\n+# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html\n+\n+[dependencies]"}, {"sha": "5e8e48b636b635f726f724af06a3067cfa646f88", "filename": "tests/ui-cargo/cargo_rust_version/pass_both_same/clippy.toml", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Fpass_both_same%2Fclippy.toml", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Fpass_both_same%2Fclippy.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fcargo_rust_version%2Fpass_both_same%2Fclippy.toml?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -0,0 +1 @@\n+msrv = \"1.13\""}, {"sha": "5b91d5508678f7c724c2e389ee7142d366fdfecf", "filename": "tests/ui-cargo/cargo_rust_version/pass_both_same/src/main.rs", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Fpass_both_same%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Fpass_both_same%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fcargo_rust_version%2Fpass_both_same%2Fsrc%2Fmain.rs?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -0,0 +1,11 @@\n+#![deny(clippy::use_self)]\n+\n+pub struct Foo;\n+\n+impl Foo {\n+    pub fn bar() -> Foo {\n+        Foo\n+    }\n+}\n+\n+fn main() {}"}, {"sha": "77538027c0f878ded2bf400f2b4213528a27aa87", "filename": "tests/ui-cargo/cargo_rust_version/pass_cargo/Cargo.toml", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Fpass_cargo%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Fpass_cargo%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fcargo_rust_version%2Fpass_cargo%2FCargo.toml?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -0,0 +1,8 @@\n+[package]\n+name = \"fail-cargo\"\n+version = \"0.1.0\"\n+rust-version = \"1.13.0\"\n+\n+# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html\n+\n+[dependencies]"}, {"sha": "5b91d5508678f7c724c2e389ee7142d366fdfecf", "filename": "tests/ui-cargo/cargo_rust_version/pass_cargo/src/main.rs", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Fpass_cargo%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Fpass_cargo%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fcargo_rust_version%2Fpass_cargo%2Fsrc%2Fmain.rs?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -0,0 +1,11 @@\n+#![deny(clippy::use_self)]\n+\n+pub struct Foo;\n+\n+impl Foo {\n+    pub fn bar() -> Foo {\n+        Foo\n+    }\n+}\n+\n+fn main() {}"}, {"sha": "9f644a1a39a50b0f428ea6eed535602fb2ff940a", "filename": "tests/ui-cargo/cargo_rust_version/pass_clippy/Cargo.toml", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Fpass_clippy%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Fpass_clippy%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fcargo_rust_version%2Fpass_clippy%2FCargo.toml?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -0,0 +1,7 @@\n+[package]\n+name = \"fail-clippy\"\n+version = \"0.1.0\"\n+\n+# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html\n+\n+[dependencies]"}, {"sha": "5e8e48b636b635f726f724af06a3067cfa646f88", "filename": "tests/ui-cargo/cargo_rust_version/pass_clippy/clippy.toml", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Fpass_clippy%2Fclippy.toml", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Fpass_clippy%2Fclippy.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fcargo_rust_version%2Fpass_clippy%2Fclippy.toml?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -0,0 +1 @@\n+msrv = \"1.13\""}, {"sha": "5b91d5508678f7c724c2e389ee7142d366fdfecf", "filename": "tests/ui-cargo/cargo_rust_version/pass_clippy/src/main.rs", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Fpass_clippy%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Fpass_clippy%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fcargo_rust_version%2Fpass_clippy%2Fsrc%2Fmain.rs?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -0,0 +1,11 @@\n+#![deny(clippy::use_self)]\n+\n+pub struct Foo;\n+\n+impl Foo {\n+    pub fn bar() -> Foo {\n+        Foo\n+    }\n+}\n+\n+fn main() {}"}, {"sha": "f0387cd90b80f9e63ffa400b74a82fc145c13883", "filename": "tests/ui-cargo/cargo_rust_version/pass_file_attr/Cargo.toml", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Fpass_file_attr%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Fpass_file_attr%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fcargo_rust_version%2Fpass_file_attr%2FCargo.toml?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -0,0 +1,8 @@\n+[package]\n+name = \"fail-file-attr\"\n+version = \"0.1.0\"\n+rust-version = \"1.59\"\n+\n+# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html\n+\n+[dependencies]"}, {"sha": "27fe4771d2d6b9a3f651f359fe9effafd0b25f5b", "filename": "tests/ui-cargo/cargo_rust_version/pass_file_attr/src/main.rs", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Fpass_file_attr%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Fpass_file_attr%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fcargo_rust_version%2Fpass_file_attr%2Fsrc%2Fmain.rs?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -0,0 +1,13 @@\n+#![feature(custom_inner_attributes)]\n+#![clippy::msrv = \"1.13.0\"]\n+#![deny(clippy::use_self)]\n+\n+pub struct Foo;\n+\n+impl Foo {\n+    pub fn bar() -> Foo {\n+        Foo\n+    }\n+}\n+\n+fn main() {}"}, {"sha": "a19d5b33fe563e22e864f7c5f49efa019b33755f", "filename": "tests/ui-cargo/cargo_rust_version/warn_both_diff/Cargo.toml", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Fwarn_both_diff%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Fwarn_both_diff%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fcargo_rust_version%2Fwarn_both_diff%2FCargo.toml?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -0,0 +1,8 @@\n+[package]\n+name = \"warn-both-diff\"\n+version = \"0.1.0\"\n+rust-version = \"1.56.0\"\n+\n+# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html\n+\n+[dependencies]"}, {"sha": "5e8e48b636b635f726f724af06a3067cfa646f88", "filename": "tests/ui-cargo/cargo_rust_version/warn_both_diff/clippy.toml", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Fwarn_both_diff%2Fclippy.toml", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Fwarn_both_diff%2Fclippy.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fcargo_rust_version%2Fwarn_both_diff%2Fclippy.toml?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -0,0 +1 @@\n+msrv = \"1.13\""}, {"sha": "5b91d5508678f7c724c2e389ee7142d366fdfecf", "filename": "tests/ui-cargo/cargo_rust_version/warn_both_diff/src/main.rs", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Fwarn_both_diff%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Fwarn_both_diff%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fcargo_rust_version%2Fwarn_both_diff%2Fsrc%2Fmain.rs?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -0,0 +1,11 @@\n+#![deny(clippy::use_self)]\n+\n+pub struct Foo;\n+\n+impl Foo {\n+    pub fn bar() -> Foo {\n+        Foo\n+    }\n+}\n+\n+fn main() {}"}, {"sha": "eeae5b7b275e9678c503b3cce83015a4a8718ed0", "filename": "tests/ui-cargo/cargo_rust_version/warn_both_diff/src/main.stderr", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Fwarn_both_diff%2Fsrc%2Fmain.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fcargo_rust_version%2Fwarn_both_diff%2Fsrc%2Fmain.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fcargo_rust_version%2Fwarn_both_diff%2Fsrc%2Fmain.stderr?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -0,0 +1,4 @@\n+warning: the MSRV in `clippy.toml` and `Cargo.toml` differ; using `1.13.0` from `clippy.toml`\n+\n+warning: 1 warning emitted\n+"}, {"sha": "98697e001f99a69a0dd5ab6e467793127e8fc7ab", "filename": "tests/ui-cargo/multiple_config_files/warn/src/main.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fmultiple_config_files%2Fwarn%2Fsrc%2Fmain.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b776fb82941cadfc752368901f210831d5184d95/tests%2Fui-cargo%2Fmultiple_config_files%2Fwarn%2Fsrc%2Fmain.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fmultiple_config_files%2Fwarn%2Fsrc%2Fmain.stderr?ref=b776fb82941cadfc752368901f210831d5184d95", "patch": "@@ -1,2 +1,2 @@\n-Using config file `$SRC_DIR/tests/ui-cargo/multiple_config_files/warn/.clippy.toml`\n-Warning: `$SRC_DIR/tests/ui-cargo/multiple_config_files/warn/clippy.toml` will be ignored.\n+Using config file `$SRC_DIR/.clippy.toml`\n+Warning: `$SRC_DIR/clippy.toml` will be ignored."}]}