{"sha": "63af27f9ea81a71eb4ea9fb076228993f923cebb", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYzYWYyN2Y5ZWE4MWE3MWViNGVhOWZiMDc2MjI4OTkzZjkyM2NlYmI=", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2019-10-12T18:40:03Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2019-10-12T18:40:03Z"}, "message": "also (properly) test nounwind on function definitions", "tree": {"sha": "17066b105cf2b3b0d24da365178c143c514dab6c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/17066b105cf2b3b0d24da365178c143c514dab6c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/63af27f9ea81a71eb4ea9fb076228993f923cebb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/63af27f9ea81a71eb4ea9fb076228993f923cebb", "html_url": "https://github.com/rust-lang/rust/commit/63af27f9ea81a71eb4ea9fb076228993f923cebb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/63af27f9ea81a71eb4ea9fb076228993f923cebb/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a1a8f33abbf5ee00e6918246f4525c6e4458225f", "url": "https://api.github.com/repos/rust-lang/rust/commits/a1a8f33abbf5ee00e6918246f4525c6e4458225f", "html_url": "https://github.com/rust-lang/rust/commit/a1a8f33abbf5ee00e6918246f4525c6e4458225f"}], "stats": {"total": 25, "additions": 19, "deletions": 6}, "files": [{"sha": "54d6a8d2794ba368b4ecfb27595c12a515a57a15", "filename": "src/test/codegen/nounwind-extern.rs", "status": "removed", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/a1a8f33abbf5ee00e6918246f4525c6e4458225f/src%2Ftest%2Fcodegen%2Fnounwind-extern.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a1a8f33abbf5ee00e6918246f4525c6e4458225f/src%2Ftest%2Fcodegen%2Fnounwind-extern.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fnounwind-extern.rs?ref=a1a8f33abbf5ee00e6918246f4525c6e4458225f", "patch": "@@ -1,6 +0,0 @@\n-// compile-flags: -O\n-\n-#![crate_type = \"lib\"]\n-\n-// CHECK: Function Attrs: norecurse nounwind\n-pub extern fn foo() {}"}, {"sha": "e7aad9ac72333d7842d116c79d96c33ddf59a0db", "filename": "src/test/codegen/unwind-extern-exports.rs", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/63af27f9ea81a71eb4ea9fb076228993f923cebb/src%2Ftest%2Fcodegen%2Funwind-extern-exports.rs", "raw_url": "https://github.com/rust-lang/rust/raw/63af27f9ea81a71eb4ea9fb076228993f923cebb/src%2Ftest%2Fcodegen%2Funwind-extern-exports.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Funwind-extern-exports.rs?ref=63af27f9ea81a71eb4ea9fb076228993f923cebb", "patch": "@@ -0,0 +1,19 @@\n+// compile-flags: -C opt-level=0\n+\n+#![crate_type = \"lib\"]\n+#![feature(unwind_attributes)]\n+\n+// Make sure these all do *not* get the attribute.\n+// We disable optimizations to prevent LLVM from infering the attribute.\n+// CHECK-NOT: nounwind\n+\n+// \"C\" ABI\n+// pub extern fn foo() {} // FIXME right now we don't abort-on-panic but add `nounwind` nevertheless\n+#[unwind(allowed)]\n+pub extern fn foo_allowed() {}\n+\n+// \"Rust\" ABI (`extrn \"Rust\"` could be removed as all `fn` get it implicitly; we leave it\n+// in for clarity.)\n+pub extern \"Rust\" fn bar() {}\n+#[unwind(allowed)]\n+pub extern \"Rust\" fn bar_allowed() {}"}]}