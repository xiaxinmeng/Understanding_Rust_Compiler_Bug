{"sha": "5e2f9e322fbb886c51b0baf8c0653acd56329d48", "node_id": "C_kwDOAAsO6NoAKDVlMmY5ZTMyMmZiYjg4NmM1MWIwYmFmOGMwNjUzYWNkNTYzMjlkNDg", "commit": {"author": {"name": "Jonas Platte", "email": "jplatte+git@posteo.de", "date": "2022-09-14T21:22:38Z"}, "committer": {"name": "Jonas Platte", "email": "jplatte+git@posteo.de", "date": "2022-09-14T21:22:38Z"}, "message": "mbe: Return Bindings from build_inner", "tree": {"sha": "6df5d8a4755a933c4dd18e83996de406a63dd2f1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6df5d8a4755a933c4dd18e83996de406a63dd2f1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5e2f9e322fbb886c51b0baf8c0653acd56329d48", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niIwEABYIADQWIQSDGkJBzFPeoiYaT9p9Jh13HZFTeAUCYyJGHhYcanBsYXR0ZStn\naXRAcG9zdGVvLmRlAAoJEH0mHXcdkVN4D0oA/2T0xUghmJs4ur7zlalpG/ez8nvQ\n0MMwgzsugk4ohbxlAQC2xMEyrQ78gPInbfgdvGY4XEy+pA7d3LGj9RD9E8OeCw==\n=V82Q\n-----END PGP SIGNATURE-----", "payload": "tree 6df5d8a4755a933c4dd18e83996de406a63dd2f1\nparent dbb8fedf8b887adfde3b445f9ec4bdf11da9ae9f\nauthor Jonas Platte <jplatte+git@posteo.de> 1663190558 +0200\ncommitter Jonas Platte <jplatte+git@posteo.de> 1663190558 +0200\n\nmbe: Return Bindings from build_inner\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5e2f9e322fbb886c51b0baf8c0653acd56329d48", "html_url": "https://github.com/rust-lang/rust/commit/5e2f9e322fbb886c51b0baf8c0653acd56329d48", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5e2f9e322fbb886c51b0baf8c0653acd56329d48/comments", "author": {"login": "jplatte", "id": 951129, "node_id": "MDQ6VXNlcjk1MTEyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/951129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jplatte", "html_url": "https://github.com/jplatte", "followers_url": "https://api.github.com/users/jplatte/followers", "following_url": "https://api.github.com/users/jplatte/following{/other_user}", "gists_url": "https://api.github.com/users/jplatte/gists{/gist_id}", "starred_url": "https://api.github.com/users/jplatte/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jplatte/subscriptions", "organizations_url": "https://api.github.com/users/jplatte/orgs", "repos_url": "https://api.github.com/users/jplatte/repos", "events_url": "https://api.github.com/users/jplatte/events{/privacy}", "received_events_url": "https://api.github.com/users/jplatte/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jplatte", "id": 951129, "node_id": "MDQ6VXNlcjk1MTEyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/951129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jplatte", "html_url": "https://github.com/jplatte", "followers_url": "https://api.github.com/users/jplatte/followers", "following_url": "https://api.github.com/users/jplatte/following{/other_user}", "gists_url": "https://api.github.com/users/jplatte/gists{/gist_id}", "starred_url": "https://api.github.com/users/jplatte/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jplatte/subscriptions", "organizations_url": "https://api.github.com/users/jplatte/orgs", "repos_url": "https://api.github.com/users/jplatte/repos", "events_url": "https://api.github.com/users/jplatte/events{/privacy}", "received_events_url": "https://api.github.com/users/jplatte/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dbb8fedf8b887adfde3b445f9ec4bdf11da9ae9f", "url": "https://api.github.com/repos/rust-lang/rust/commits/dbb8fedf8b887adfde3b445f9ec4bdf11da9ae9f", "html_url": "https://github.com/rust-lang/rust/commit/dbb8fedf8b887adfde3b445f9ec4bdf11da9ae9f"}], "stats": {"total": 12, "additions": 6, "deletions": 6}, "files": [{"sha": "0d970504da4790129bc41ea5e2c54d9cfd916a02", "filename": "crates/mbe/src/expander/matcher.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/5e2f9e322fbb886c51b0baf8c0653acd56329d48/crates%2Fmbe%2Fsrc%2Fexpander%2Fmatcher.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5e2f9e322fbb886c51b0baf8c0653acd56329d48/crates%2Fmbe%2Fsrc%2Fexpander%2Fmatcher.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fmbe%2Fsrc%2Fexpander%2Fmatcher.rs?ref=5e2f9e322fbb886c51b0baf8c0653acd56329d48", "patch": "@@ -203,12 +203,11 @@ impl BindingsBuilder {\n     }\n \n     fn build(self, idx: &BindingsIdx) -> Bindings {\n-        let mut bindings = Bindings::default();\n-        self.build_inner(&mut bindings, &self.nodes[idx.0]);\n-        bindings\n+        self.build_inner(&self.nodes[idx.0])\n     }\n \n-    fn build_inner(&self, bindings: &mut Bindings, link_nodes: &[LinkNode<Rc<BindingKind>>]) {\n+    fn build_inner(&self, link_nodes: &[LinkNode<Rc<BindingKind>>]) -> Bindings {\n+        let mut bindings = Bindings::default();\n         let mut nodes = Vec::new();\n         self.collect_nodes(link_nodes, &mut nodes);\n \n@@ -246,6 +245,8 @@ impl BindingsBuilder {\n                 }\n             }\n         }\n+\n+        bindings\n     }\n \n     fn collect_nested_ref<'a>(\n@@ -270,8 +271,7 @@ impl BindingsBuilder {\n         nested_refs.push(last);\n \n         nested_refs.into_iter().for_each(|iter| {\n-            let mut child_bindings = Bindings::default();\n-            self.build_inner(&mut child_bindings, iter);\n+            let child_bindings = self.build_inner(iter);\n             nested.push(child_bindings)\n         })\n     }"}]}