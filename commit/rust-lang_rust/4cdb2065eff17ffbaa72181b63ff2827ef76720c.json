{"sha": "4cdb2065eff17ffbaa72181b63ff2827ef76720c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRjZGIyMDY1ZWZmMTdmZmJhYTcyMTgxYjYzZmYyODI3ZWY3NjcyMGM=", "commit": {"author": {"name": "Theo Sandstrom", "email": "theo.j.sandstrom@gmail.com", "date": "2020-04-08T01:57:31Z"}, "committer": {"name": "Theo Sandstrom", "email": "theo.j.sandstrom@gmail.com", "date": "2020-04-08T01:57:31Z"}, "message": "Remove unnecessary TypeFlags::NOMINAL_FLAGS\n\nThis was a relic from when we had \"nominal flags\" and \"cached\nproperties.\" The latter no longer exists, so nominal flags are no\nlonger necessary. In fact, every flag is considered a nominal flag. I\nwent ahead and removed all references to NOMINAL_FLAGS.\n\nFixes rust-lang#70836", "tree": {"sha": "3c07f5bb5e843f0916398e279709b17568a15018", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3c07f5bb5e843f0916398e279709b17568a15018"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4cdb2065eff17ffbaa72181b63ff2827ef76720c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4cdb2065eff17ffbaa72181b63ff2827ef76720c", "html_url": "https://github.com/rust-lang/rust/commit/4cdb2065eff17ffbaa72181b63ff2827ef76720c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4cdb2065eff17ffbaa72181b63ff2827ef76720c/comments", "author": {"login": "tsandstr", "id": 5913458, "node_id": "MDQ6VXNlcjU5MTM0NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/5913458?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tsandstr", "html_url": "https://github.com/tsandstr", "followers_url": "https://api.github.com/users/tsandstr/followers", "following_url": "https://api.github.com/users/tsandstr/following{/other_user}", "gists_url": "https://api.github.com/users/tsandstr/gists{/gist_id}", "starred_url": "https://api.github.com/users/tsandstr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tsandstr/subscriptions", "organizations_url": "https://api.github.com/users/tsandstr/orgs", "repos_url": "https://api.github.com/users/tsandstr/repos", "events_url": "https://api.github.com/users/tsandstr/events{/privacy}", "received_events_url": "https://api.github.com/users/tsandstr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tsandstr", "id": 5913458, "node_id": "MDQ6VXNlcjU5MTM0NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/5913458?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tsandstr", "html_url": "https://github.com/tsandstr", "followers_url": "https://api.github.com/users/tsandstr/followers", "following_url": "https://api.github.com/users/tsandstr/following{/other_user}", "gists_url": "https://api.github.com/users/tsandstr/gists{/gist_id}", "starred_url": "https://api.github.com/users/tsandstr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tsandstr/subscriptions", "organizations_url": "https://api.github.com/users/tsandstr/orgs", "repos_url": "https://api.github.com/users/tsandstr/repos", "events_url": "https://api.github.com/users/tsandstr/events{/privacy}", "received_events_url": "https://api.github.com/users/tsandstr/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "42abbd8878d3b67238f3611b0587c704ba94f39c", "url": "https://api.github.com/repos/rust-lang/rust/commits/42abbd8878d3b67238f3611b0587c704ba94f39c", "html_url": "https://github.com/rust-lang/rust/commit/42abbd8878d3b67238f3611b0587c704ba94f39c"}], "stats": {"total": 25, "additions": 1, "deletions": 24}, "files": [{"sha": "7c3c96348b558433e15b2f3c18d43ff5105ae469", "filename": "src/librustc_middle/ty/flags.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4cdb2065eff17ffbaa72181b63ff2827ef76720c/src%2Flibrustc_middle%2Fty%2Fflags.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4cdb2065eff17ffbaa72181b63ff2827ef76720c/src%2Flibrustc_middle%2Fty%2Fflags.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_middle%2Fty%2Fflags.rs?ref=4cdb2065eff17ffbaa72181b63ff2827ef76720c", "patch": "@@ -28,7 +28,7 @@ impl FlagComputation {\n     }\n \n     fn add_flags(&mut self, flags: TypeFlags) {\n-        self.flags = self.flags | (flags & TypeFlags::NOMINAL_FLAGS);\n+        self.flags = self.flags | flags;\n     }\n \n     /// indicates that `self` refers to something at binding level `binder`"}, {"sha": "57ac18185d0537f1668bbe3b629318df123d8d52", "filename": "src/librustc_middle/ty/mod.rs", "status": "modified", "additions": 0, "deletions": 23, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/4cdb2065eff17ffbaa72181b63ff2827ef76720c/src%2Flibrustc_middle%2Fty%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4cdb2065eff17ffbaa72181b63ff2827ef76720c/src%2Flibrustc_middle%2Fty%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_middle%2Fty%2Fmod.rs?ref=4cdb2065eff17ffbaa72181b63ff2827ef76720c", "patch": "@@ -598,29 +598,6 @@ bitflags! {\n         /// Does this value have parameters/placeholders/inference variables which could be\n         /// replaced later, in a way that would change the results of `impl` specialization?\n         const STILL_FURTHER_SPECIALIZABLE = 1 << 18;\n-\n-        /// Flags representing the nominal content of a type,\n-        /// computed by FlagsComputation. If you add a new nominal\n-        /// flag, it should be added here too.\n-        const NOMINAL_FLAGS               = TypeFlags::HAS_TY_PARAM.bits\n-                                          | TypeFlags::HAS_RE_PARAM.bits\n-                                          | TypeFlags::HAS_CT_PARAM.bits\n-                                          | TypeFlags::HAS_TY_INFER.bits\n-                                          | TypeFlags::HAS_RE_INFER.bits\n-                                          | TypeFlags::HAS_CT_INFER.bits\n-                                          | TypeFlags::HAS_TY_PLACEHOLDER.bits\n-                                          | TypeFlags::HAS_RE_PLACEHOLDER.bits\n-                                          | TypeFlags::HAS_CT_PLACEHOLDER.bits\n-                                          | TypeFlags::HAS_FREE_LOCAL_REGIONS.bits\n-                                          | TypeFlags::HAS_TY_PROJECTION.bits\n-                                          | TypeFlags::HAS_TY_OPAQUE.bits\n-                                          | TypeFlags::HAS_CT_PROJECTION.bits\n-                                          | TypeFlags::KEEP_IN_LOCAL_TCX.bits\n-                                          | TypeFlags::HAS_TY_ERR.bits\n-                                          | TypeFlags::HAS_FREE_REGIONS.bits\n-                                          | TypeFlags::HAS_RE_LATE_BOUND.bits\n-                                          | TypeFlags::HAS_RE_ERASED.bits\n-                                          | TypeFlags::STILL_FURTHER_SPECIALIZABLE.bits;\n     }\n }\n "}]}