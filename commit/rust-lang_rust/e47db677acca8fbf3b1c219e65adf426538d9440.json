{"sha": "e47db677acca8fbf3b1c219e65adf426538d9440", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU0N2RiNjc3YWNjYThmYmYzYjFjMjE5ZTY1YWRmNDI2NTM4ZDk0NDA=", "commit": {"author": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2020-04-13T07:33:00Z"}, "committer": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2020-04-13T07:33:00Z"}, "message": "Cleanup: Use rustc's is_proc_macro_attr\n\nIt's doing exactly the same: https://doc.rust-lang.org/nightly/nightly-rustc/src/rustc_ast/expand/mod.rs.html#8-12", "tree": {"sha": "d9967004cd74d790587a1815ceebee7efb548822", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d9967004cd74d790587a1815ceebee7efb548822"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e47db677acca8fbf3b1c219e65adf426538d9440", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE6VFioMHrom999LRAK0OZxL9Ny94FAl6UFgAACgkQK0OZxL9N\ny95a1hAAxPUH0eCCXC6eyOBh8X+YQmNRF+RYeRMmxeACwnaIaWnlmeAwcc+9exiA\nuD5TeL9gOK1Mz89eZG/NshWZMhSCqUF+54eMDoK14yPPPPlfaXzr8Vze6BwMlJ1j\nBCfrtpTV27jdDqD6uVGFpafFhI69jfhP/3mbQ2qAzJkpoQh52OeDoq1ibagm/+HG\nglp+v3lsVDePLxW66qssq/eSpC32sBX66Tqde9ei4gJ2bQls1Wd1fyh5dl1wORoP\nKMJ2D5haR0HB7CloE1ndidxQNuERto18Z6QYObdvEj+D2qdpymI7W+Fgjp6Dce91\nF3Wlrt93H/bI9fDwtHMYuHU8lD2b+8QTR/tXiQCqncITgFaBIOIK+MxHBKfPPYD0\nquDkKRIIQLN/oGpjUx4lF+yPvVe+FBnXZLFzOE4HVppJWUaZhVg0Wyqly+zErj7q\n/h2MN6f7k0GZGeQ+WgKHcqfBXG+r02ihkOFfLPpBT4QzzdJ9ddCXKwgVu+xLAdEF\noDRfeHrMGB2gMeefpoXkEh65lhrdpmZ1oQsMnf08UYWtpyEANqlTPl4DGKBjNl/6\nFNkxv+KWgs4VKptqCkmM8Q65DO4xyyr7Bxm8dUC44yMPA8/MzW3qMMHgciNc1Rs6\nIsZv9DHwWxwPX+wKqxsQFemXdAl95En2k991Ox+AGhXeiNjDJ8E=\n=iUFI\n-----END PGP SIGNATURE-----", "payload": "tree d9967004cd74d790587a1815ceebee7efb548822\nparent e29d55056585062a387074dd77cf935aa8352bbc\nauthor Philipp Hansch <dev@phansch.net> 1586763180 +0200\ncommitter Philipp Hansch <dev@phansch.net> 1586763180 +0200\n\nCleanup: Use rustc's is_proc_macro_attr\n\nIt's doing exactly the same: https://doc.rust-lang.org/nightly/nightly-rustc/src/rustc_ast/expand/mod.rs.html#8-12\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e47db677acca8fbf3b1c219e65adf426538d9440", "html_url": "https://github.com/rust-lang/rust/commit/e47db677acca8fbf3b1c219e65adf426538d9440", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e47db677acca8fbf3b1c219e65adf426538d9440/comments", "author": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e29d55056585062a387074dd77cf935aa8352bbc", "url": "https://api.github.com/repos/rust-lang/rust/commits/e29d55056585062a387074dd77cf935aa8352bbc", "html_url": "https://github.com/rust-lang/rust/commit/e29d55056585062a387074dd77cf935aa8352bbc"}], "stats": {"total": 10, "additions": 2, "deletions": 8}, "files": [{"sha": "104ea7de5c204ffcd590ce36e6c9037337bc7b07", "filename": "clippy_lints/src/utils/attrs.rs", "status": "modified", "additions": 2, "deletions": 8, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/e47db677acca8fbf3b1c219e65adf426538d9440/clippy_lints%2Fsrc%2Futils%2Fattrs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e47db677acca8fbf3b1c219e65adf426538d9440/clippy_lints%2Fsrc%2Futils%2Fattrs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fattrs.rs?ref=e47db677acca8fbf3b1c219e65adf426538d9440", "patch": "@@ -1,4 +1,5 @@\n use rustc_ast::ast;\n+use rustc_ast::expand::is_proc_macro_attr;\n use rustc_errors::Applicability;\n use rustc_session::Session;\n use std::str::FromStr;\n@@ -123,12 +124,5 @@ fn parse_attrs<F: FnMut(u64)>(sess: &Session, attrs: &[ast::Attribute], name: &'\n /// Return true if the attributes contain any of `proc_macro`,\n /// `proc_macro_derive` or `proc_macro_attribute`, false otherwise\n pub fn is_proc_macro(attrs: &[ast::Attribute]) -> bool {\n-    use rustc_span::Symbol;\n-\n-    let syms = [\n-        Symbol::intern(\"proc_macro\"),\n-        Symbol::intern(\"proc_macro_derive\"),\n-        Symbol::intern(\"proc_macro_attribute\"),\n-    ];\n-    attrs.iter().any(|attr| syms.iter().any(move |&s| attr.check_name(s)))\n+    attrs.iter().any(is_proc_macro_attr)\n }"}]}