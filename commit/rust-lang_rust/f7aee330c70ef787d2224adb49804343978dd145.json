{"sha": "f7aee330c70ef787d2224adb49804343978dd145", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY3YWVlMzMwYzcwZWY3ODdkMjIyNGFkYjQ5ODA0MzQzOTc4ZGQxNDU=", "commit": {"author": {"name": "Rich Kadel", "email": "richkadel@google.com", "date": "2020-09-09T21:49:32Z"}, "committer": {"name": "Rich Kadel", "email": "richkadel@google.com", "date": "2020-09-09T21:49:32Z"}, "message": "Also fixed monospace font for d3-graphviz engine\n\nVS code graphviz extensions use d3-graphviz, which supports `Courier`\nfontname but does not support `monospace`. This caused graphs to render\npoorly because the text sizes were wrong.", "tree": {"sha": "f5c6d68e079b78d5c155a68a5f27b2718289ab9f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f5c6d68e079b78d5c155a68a5f27b2718289ab9f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f7aee330c70ef787d2224adb49804343978dd145", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f7aee330c70ef787d2224adb49804343978dd145", "html_url": "https://github.com/rust-lang/rust/commit/f7aee330c70ef787d2224adb49804343978dd145", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f7aee330c70ef787d2224adb49804343978dd145/comments", "author": {"login": "richkadel", "id": 3827298, "node_id": "MDQ6VXNlcjM4MjcyOTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3827298?v=4", "gravatar_id": "", "url": "https://api.github.com/users/richkadel", "html_url": "https://github.com/richkadel", "followers_url": "https://api.github.com/users/richkadel/followers", "following_url": "https://api.github.com/users/richkadel/following{/other_user}", "gists_url": "https://api.github.com/users/richkadel/gists{/gist_id}", "starred_url": "https://api.github.com/users/richkadel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/richkadel/subscriptions", "organizations_url": "https://api.github.com/users/richkadel/orgs", "repos_url": "https://api.github.com/users/richkadel/repos", "events_url": "https://api.github.com/users/richkadel/events{/privacy}", "received_events_url": "https://api.github.com/users/richkadel/received_events", "type": "User", "site_admin": false}, "committer": {"login": "richkadel", "id": 3827298, "node_id": "MDQ6VXNlcjM4MjcyOTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3827298?v=4", "gravatar_id": "", "url": "https://api.github.com/users/richkadel", "html_url": "https://github.com/richkadel", "followers_url": "https://api.github.com/users/richkadel/followers", "following_url": "https://api.github.com/users/richkadel/following{/other_user}", "gists_url": "https://api.github.com/users/richkadel/gists{/gist_id}", "starred_url": "https://api.github.com/users/richkadel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/richkadel/subscriptions", "organizations_url": "https://api.github.com/users/richkadel/orgs", "repos_url": "https://api.github.com/users/richkadel/repos", "events_url": "https://api.github.com/users/richkadel/events{/privacy}", "received_events_url": "https://api.github.com/users/richkadel/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c19b2370e419c0be7b46cc9ae7767773560a072c", "url": "https://api.github.com/repos/rust-lang/rust/commits/c19b2370e419c0be7b46cc9ae7767773560a072c", "html_url": "https://github.com/rust-lang/rust/commit/c19b2370e419c0be7b46cc9ae7767773560a072c"}], "stats": {"total": 10, "additions": 5, "deletions": 5}, "files": [{"sha": "29ec3572016d759185989c8c6efb1e9f7d941eb0", "filename": "compiler/rustc_graphviz/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f7aee330c70ef787d2224adb49804343978dd145/compiler%2Frustc_graphviz%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f7aee330c70ef787d2224adb49804343978dd145/compiler%2Frustc_graphviz%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_graphviz%2Fsrc%2Flib.rs?ref=f7aee330c70ef787d2224adb49804343978dd145", "patch": "@@ -634,7 +634,7 @@ where\n     let mut graph_attrs = Vec::new();\n     let mut content_attrs = Vec::new();\n     if options.contains(&RenderOption::Monospace) {\n-        let font = r#\"fontname=\"monospace\"\"#;\n+        let font = r#\"fontname=\"Courier, monospace\"\"#;\n         graph_attrs.push(font);\n         content_attrs.push(font);\n     };"}, {"sha": "e89c9437706384e3a8ff65ca067135485f72a9dc", "filename": "compiler/rustc_mir/src/util/graphviz.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f7aee330c70ef787d2224adb49804343978dd145/compiler%2Frustc_mir%2Fsrc%2Futil%2Fgraphviz.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f7aee330c70ef787d2224adb49804343978dd145/compiler%2Frustc_mir%2Fsrc%2Futil%2Fgraphviz.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir%2Fsrc%2Futil%2Fgraphviz.rs?ref=f7aee330c70ef787d2224adb49804343978dd145", "patch": "@@ -55,7 +55,7 @@ where\n     writeln!(w, \"{} {}Mir_{} {{\", kind, cluster, def_name)?;\n \n     // Global graph properties\n-    let font = r#\"fontname=\"monospace\"\"#;\n+    let font = r#\"fontname=\"Courier, monospace\"\"#;\n     let mut graph_attrs = vec![font];\n     let mut content_attrs = vec![font];\n "}, {"sha": "df4f11f0f21693ba41f3eea94f223781aa62d80d", "filename": "src/test/mir-opt/graphviz.main.mir_map.0.dot", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/f7aee330c70ef787d2224adb49804343978dd145/src%2Ftest%2Fmir-opt%2Fgraphviz.main.mir_map.0.dot", "raw_url": "https://github.com/rust-lang/rust/raw/f7aee330c70ef787d2224adb49804343978dd145/src%2Ftest%2Fmir-opt%2Fgraphviz.main.mir_map.0.dot", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fgraphviz.main.mir_map.0.dot?ref=f7aee330c70ef787d2224adb49804343978dd145", "patch": "@@ -1,7 +1,7 @@\n digraph Mir_0_3 {\n-    graph [fontname=\"monospace\"];\n-    node [fontname=\"monospace\"];\n-    edge [fontname=\"monospace\"];\n+    graph [fontname=\"Courier, monospace\"];\n+    node [fontname=\"Courier, monospace\"];\n+    edge [fontname=\"Courier, monospace\"];\n     label=<fn main() -&gt; ()<br align=\"left\"/>>;\n     bb0__0_3 [shape=\"none\", label=<<table border=\"0\" cellborder=\"1\" cellspacing=\"0\"><tr><td bgcolor=\"gray\" align=\"center\" colspan=\"1\">0</td></tr><tr><td align=\"left\" balign=\"left\">_0 = const ()<br/></td></tr><tr><td align=\"left\">goto</td></tr></table>>];\n     bb1__0_3 [shape=\"none\", label=<<table border=\"0\" cellborder=\"1\" cellspacing=\"0\"><tr><td bgcolor=\"gray\" align=\"center\" colspan=\"1\">1</td></tr><tr><td align=\"left\">resume</td></tr></table>>];"}]}