{"sha": "6b33b90091b0cecd4c092d34451aba9f2492063c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZiMzNiOTAwOTFiMGNlY2Q0YzA5MmQzNDQ1MWFiYTlmMjQ5MjA2M2M=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2019-09-16T06:09:30Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-09-16T06:09:30Z"}, "message": "Merge #1852\n\n1852: Gracefully handle `const _` items in `ConstData` r=ecstatic-morse a=ecstatic-morse\n\nA follow-up to #1847.\r\n\r\nThis makes the `name` field of `ConstData` optional.\n\nCo-authored-by: Dylan MacKenzie <ecstaticmorse@gmail.com>", "tree": {"sha": "dd87d2b240d84fe76fe585442fea1812d0d148dd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/dd87d2b240d84fe76fe585442fea1812d0d148dd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6b33b90091b0cecd4c092d34451aba9f2492063c", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdfycaCRBK7hj4Ov3rIwAAdHIIAHl+jm7lHJObfkEUkjTZ3Mw7\n7AlUc7hjAm2ETBeCfoL2i9LbN54Z5QY8Bq1Gfy93eNZE2d2YlBW/Zzd173Kw8rbq\ns54Mtu77lykCp4SoU/jLZ9DS/WModhNrB6hsFltmi3jxdvHXxHydw/4oQkdi7u03\nF8kjsDPp7LHiB7U4KA12LzhD3hQIV14APlGXQUjBQsnBevLAcs4MZCyzvBcaNEhc\nfocRzKLt1Z8NDmE4D03QU/yNS/aL/i5SnyEtzoKwmHgRcVMjYRJH+P/0+MQwJQqu\ncGNWhVmK6CLUbHQJ74JcAuz7T0LOnpu+Moh8femkuPfPjEstpcZ1EBXAk+VDuPQ=\n=GSh4\n-----END PGP SIGNATURE-----\n", "payload": "tree dd87d2b240d84fe76fe585442fea1812d0d148dd\nparent 2d79a1ad83cc39075c7c9e3230973013c8c58b17\nparent cd8155b7f73006ee7dae8b423557f25fd92912df\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1568614170 +0000\ncommitter GitHub <noreply@github.com> 1568614170 +0000\n\nMerge #1852\n\n1852: Gracefully handle `const _` items in `ConstData` r=ecstatic-morse a=ecstatic-morse\n\nA follow-up to #1847.\r\n\r\nThis makes the `name` field of `ConstData` optional.\n\nCo-authored-by: Dylan MacKenzie <ecstaticmorse@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6b33b90091b0cecd4c092d34451aba9f2492063c", "html_url": "https://github.com/rust-lang/rust/commit/6b33b90091b0cecd4c092d34451aba9f2492063c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6b33b90091b0cecd4c092d34451aba9f2492063c/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2d79a1ad83cc39075c7c9e3230973013c8c58b17", "url": "https://api.github.com/repos/rust-lang/rust/commits/2d79a1ad83cc39075c7c9e3230973013c8c58b17", "html_url": "https://github.com/rust-lang/rust/commit/2d79a1ad83cc39075c7c9e3230973013c8c58b17"}, {"sha": "cd8155b7f73006ee7dae8b423557f25fd92912df", "url": "https://api.github.com/repos/rust-lang/rust/commits/cd8155b7f73006ee7dae8b423557f25fd92912df", "html_url": "https://github.com/rust-lang/rust/commit/cd8155b7f73006ee7dae8b423557f25fd92912df"}], "stats": {"total": 10, "additions": 5, "deletions": 5}, "files": [{"sha": "84e15385c5ef9abe10eda112d21f0fc581838e45", "filename": "crates/ra_hir/src/code_model.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/6b33b90091b0cecd4c092d34451aba9f2492063c/crates%2Fra_hir%2Fsrc%2Fcode_model.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6b33b90091b0cecd4c092d34451aba9f2492063c/crates%2Fra_hir%2Fsrc%2Fcode_model.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fcode_model.rs?ref=6b33b90091b0cecd4c092d34451aba9f2492063c", "patch": "@@ -773,13 +773,13 @@ impl Const {\n \n #[derive(Debug, Clone, PartialEq, Eq)]\n pub struct ConstData {\n-    pub(crate) name: Name,\n+    pub(crate) name: Option<Name>,\n     pub(crate) type_ref: TypeRef,\n }\n \n impl ConstData {\n-    pub fn name(&self) -> &Name {\n-        &self.name\n+    pub fn name(&self) -> Option<&Name> {\n+        self.name.as_ref()\n     }\n \n     pub fn type_ref(&self) -> &TypeRef {\n@@ -804,7 +804,7 @@ impl ConstData {\n }\n \n fn const_data_for<N: NameOwner + TypeAscriptionOwner>(node: &N) -> Arc<ConstData> {\n-    let name = node.name().map(|n| n.as_name()).unwrap_or_else(Name::missing);\n+    let name = node.name().map(|n| n.as_name());\n     let type_ref = TypeRef::from_ast_opt(node.ascribed_type());\n     let sig = ConstData { name, type_ref };\n     Arc::new(sig)"}, {"sha": "7d9b86752ee72a2eace762b7d3e3ece80c62bd9f", "filename": "crates/ra_hir/src/ty/infer.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6b33b90091b0cecd4c092d34451aba9f2492063c/crates%2Fra_hir%2Fsrc%2Fty%2Finfer.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6b33b90091b0cecd4c092d34451aba9f2492063c/crates%2Fra_hir%2Fsrc%2Fty%2Finfer.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Finfer.rs?ref=6b33b90091b0cecd4c092d34451aba9f2492063c", "patch": "@@ -577,7 +577,7 @@ impl<'a, D: HirDatabase> InferenceContext<'a, D> {\n \n                 crate::ImplItem::Const(konst) => {\n                     let data = konst.data(self.db);\n-                    if segment.name == *data.name() {\n+                    if Some(&segment.name) == data.name() {\n                         Some(ValueNs::Const(konst))\n                     } else {\n                         None"}]}