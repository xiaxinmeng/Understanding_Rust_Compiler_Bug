{"sha": "cfeedec823b75a244e2c815d56b073fdd619fff6", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNmZWVkZWM4MjNiNzVhMjQ0ZTJjODE1ZDU2YjA3M2ZkZDYxOWZmZjY=", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2020-03-24T01:46:09Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2020-03-24T18:36:08Z"}, "message": "Fix placement of suggested generic param when bounds are present", "tree": {"sha": "a834f34b4bd9a607459bde9e271fb4a840baff9f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a834f34b4bd9a607459bde9e271fb4a840baff9f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/cfeedec823b75a244e2c815d56b073fdd619fff6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/cfeedec823b75a244e2c815d56b073fdd619fff6", "html_url": "https://github.com/rust-lang/rust/commit/cfeedec823b75a244e2c815d56b073fdd619fff6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/cfeedec823b75a244e2c815d56b073fdd619fff6/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "374ab25585f0a817fe7bd6986737f12347b12d0b", "url": "https://api.github.com/repos/rust-lang/rust/commits/374ab25585f0a817fe7bd6986737f12347b12d0b", "html_url": "https://github.com/rust-lang/rust/commit/374ab25585f0a817fe7bd6986737f12347b12d0b"}], "stats": {"total": 12, "additions": 7, "deletions": 5}, "files": [{"sha": "7806f7832c1144b3b3265334f3678aa74e759045", "filename": "src/librustc_typeck/collect.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/cfeedec823b75a244e2c815d56b073fdd619fff6/src%2Flibrustc_typeck%2Fcollect.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cfeedec823b75a244e2c815d56b073fdd619fff6/src%2Flibrustc_typeck%2Fcollect.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcollect.rs?ref=cfeedec823b75a244e2c815d56b073fdd619fff6", "patch": "@@ -162,8 +162,10 @@ crate fn placeholder_type_error(\n         // `struct S<T>(T);` instead of `struct S<_, T>(T);`.\n         sugg.push((arg.span, (*type_name).to_string()));\n     } else {\n+        let last = generics.iter().last().unwrap();\n         sugg.push((\n-            generics.iter().last().unwrap().span.shrink_to_hi(),\n+            // Account for bounds, we want `fn foo<T: E, K>(_: K)` not `fn foo<T, K: E>(_: K)`.\n+            last.bounds_span().unwrap_or(last.span).shrink_to_hi(),\n             format!(\", {}\", type_name),\n         ));\n     }"}, {"sha": "c409ea9c6576d78a32c3601ec81a451ad9241148", "filename": "src/test/ui/did_you_mean/bad-assoc-ty.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/cfeedec823b75a244e2c815d56b073fdd619fff6/src%2Ftest%2Fui%2Fdid_you_mean%2Fbad-assoc-ty.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/cfeedec823b75a244e2c815d56b073fdd619fff6/src%2Ftest%2Fui%2Fdid_you_mean%2Fbad-assoc-ty.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdid_you_mean%2Fbad-assoc-ty.stderr?ref=cfeedec823b75a244e2c815d56b073fdd619fff6", "patch": "@@ -145,8 +145,8 @@ LL | fn foo<X: K<_, _>>(x: X) {}\n    |\n help: use type parameters instead\n    |\n-LL | fn foo<X, T: K<T, T>>(x: X) {}\n-   |         ^^^    ^  ^\n+LL | fn foo<X: K<T, T>, T>(x: X) {}\n+   |             ^  ^ ^^^\n \n error[E0121]: the type placeholder `_` is not allowed within types on item signatures\n   --> $DIR/bad-assoc-ty.rs:52:34\n@@ -167,8 +167,8 @@ LL | fn baz<F: Fn() -> _>(_: F) {}\n    |\n help: use type parameters instead\n    |\n-LL | fn baz<F, T: Fn() -> T>(_: F) {}\n-   |         ^^^          ^\n+LL | fn baz<F: Fn() -> T, T>(_: F) {}\n+   |                   ^^^^\n \n error[E0121]: the type placeholder `_` is not allowed within types on item signatures\n   --> $DIR/bad-assoc-ty.rs:58:33"}]}