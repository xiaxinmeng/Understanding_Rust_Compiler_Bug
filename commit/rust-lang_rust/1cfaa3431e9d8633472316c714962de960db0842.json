{"sha": "1cfaa3431e9d8633472316c714962de960db0842", "node_id": "C_kwDOAAsO6NoAKDFjZmFhMzQzMWU5ZDg2MzM0NzIzMTZjNzE0OTYyZGU5NjBkYjA4NDI", "commit": {"author": {"name": "Weihang Lo", "email": "me@weihanglo.tw", "date": "2023-03-23T15:54:10Z"}, "committer": {"name": "Weihang Lo", "email": "me@weihanglo.tw", "date": "2023-04-16T18:32:20Z"}, "message": "chore: remove Cargo features in rustc-workspace-hack", "tree": {"sha": "1ca886824ff74fd15cdc0133d050d6cdc06a012d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1ca886824ff74fd15cdc0133d050d6cdc06a012d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1cfaa3431e9d8633472316c714962de960db0842", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEfYTqB0fBJAwqFtKm19vxiYJegucFAmQ8PzQACgkQ19vxiYJe\ngud6FA//VU0VEQ0010Bj2d16as14dfxMf7+jamtOGfc4Lur6Pa362ma3/skY01YL\nfatN3BiKSMbgmwHhs2e6TBR/Uow8RngRx+pRVPNtImjL/B96IT9NvtV6AsBhDfmy\n4otgg2FuNbt7vo2dAjni4+txMVe3leQiaxfuDhGa8SkE3jzwnQvk3KP3pQTSNeR1\nHuHIPUDGxfvpjbQwBbGU2e7wFx130LVONLgjHrsylxv0r+BDUrL35dYU3OoMtNcO\nxclVnBEDk0Doo/TKfCTMWpDPakxk/TjcaT69BVoiWKMAAaht/gMDydBd4RoPMkQX\nb/m7O7f4ZBivGl2QUVGwQDitU84tm7xM2NYSgdYx/2dgfA1EKWTOylPhGFmLkkJx\navtzSIa+b/JGrytPhaVMyGxbp8kXqERi3tCTTXeSz+VIu0hDAVFNnHHTuzzP6+ED\nCWBRPZbnyZM288KTW0EW5KqxItmFmxcN8QL3dMUVRF62MkfbQMETtTXYtTGUtmZF\n+OmRMezGvkx2j2VwCJTSQBP7M6xyujIKYatL7jvhT2mhJAyH4fvFQgQBoBLicdEW\nwndSJKxSuotOyfTaMTG6eCZogPaQlzSLC1/oCeVS64LAv66gYCmeHZWNTsdtBiq4\nx/jyMGN04W9qClj6AA2ZX0++A4eUSzNsKGGG6PWhv3mM7NfWV7Q=\n=Ewb4\n-----END PGP SIGNATURE-----", "payload": "tree 1ca886824ff74fd15cdc0133d050d6cdc06a012d\nparent 82950f6895638b7fe5e80a961cb03fca27436629\nauthor Weihang Lo <me@weihanglo.tw> 1679586850 +0800\ncommitter Weihang Lo <me@weihanglo.tw> 1681669940 +0100\n\nchore: remove Cargo features in rustc-workspace-hack\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1cfaa3431e9d8633472316c714962de960db0842", "html_url": "https://github.com/rust-lang/rust/commit/1cfaa3431e9d8633472316c714962de960db0842", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1cfaa3431e9d8633472316c714962de960db0842/comments", "author": {"login": "weihanglo", "id": 14314532, "node_id": "MDQ6VXNlcjE0MzE0NTMy", "avatar_url": "https://avatars.githubusercontent.com/u/14314532?v=4", "gravatar_id": "", "url": "https://api.github.com/users/weihanglo", "html_url": "https://github.com/weihanglo", "followers_url": "https://api.github.com/users/weihanglo/followers", "following_url": "https://api.github.com/users/weihanglo/following{/other_user}", "gists_url": "https://api.github.com/users/weihanglo/gists{/gist_id}", "starred_url": "https://api.github.com/users/weihanglo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/weihanglo/subscriptions", "organizations_url": "https://api.github.com/users/weihanglo/orgs", "repos_url": "https://api.github.com/users/weihanglo/repos", "events_url": "https://api.github.com/users/weihanglo/events{/privacy}", "received_events_url": "https://api.github.com/users/weihanglo/received_events", "type": "User", "site_admin": false}, "committer": {"login": "weihanglo", "id": 14314532, "node_id": "MDQ6VXNlcjE0MzE0NTMy", "avatar_url": "https://avatars.githubusercontent.com/u/14314532?v=4", "gravatar_id": "", "url": "https://api.github.com/users/weihanglo", "html_url": "https://github.com/weihanglo", "followers_url": "https://api.github.com/users/weihanglo/followers", "following_url": "https://api.github.com/users/weihanglo/following{/other_user}", "gists_url": "https://api.github.com/users/weihanglo/gists{/gist_id}", "starred_url": "https://api.github.com/users/weihanglo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/weihanglo/subscriptions", "organizations_url": "https://api.github.com/users/weihanglo/orgs", "repos_url": "https://api.github.com/users/weihanglo/repos", "events_url": "https://api.github.com/users/weihanglo/events{/privacy}", "received_events_url": "https://api.github.com/users/weihanglo/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "82950f6895638b7fe5e80a961cb03fca27436629", "url": "https://api.github.com/repos/rust-lang/rust/commits/82950f6895638b7fe5e80a961cb03fca27436629", "html_url": "https://github.com/rust-lang/rust/commit/82950f6895638b7fe5e80a961cb03fca27436629"}], "stats": {"total": 168, "additions": 1, "deletions": 167}, "files": [{"sha": "94de4403c63a47154334396a1f33e24b80d63130", "filename": "Cargo.lock", "status": "modified", "additions": 0, "deletions": 82, "changes": 82, "blob_url": "https://github.com/rust-lang/rust/blob/1cfaa3431e9d8633472316c714962de960db0842/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/1cfaa3431e9d8633472316c714962de960db0842/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=1cfaa3431e9d8633472316c714962de960db0842", "patch": "@@ -306,12 +306,6 @@ dependencies = [\n  \"toml\",\n ]\n \n-[[package]]\n-name = \"bumpalo\"\n-version = \"3.11.1\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"572f695136211188308f16ad2ca5c851a712c464060ae6974944458eb83880ba\"\n-\n [[package]]\n name = \"bytecount\"\n version = \"0.6.2\"\n@@ -1405,10 +1399,8 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"c05aeb6a22b8f62540c194aac980f2115af067bfe15a0734d7277a768d396b31\"\n dependencies = [\n  \"cfg-if\",\n- \"js-sys\",\n  \"libc\",\n  \"wasi\",\n- \"wasm-bindgen\",\n ]\n \n [[package]]\n@@ -1780,15 +1772,6 @@ dependencies = [\n  \"libc\",\n ]\n \n-[[package]]\n-name = \"js-sys\"\n-version = \"0.3.60\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"49409df3e3bf0856b916e2ceaca09ee28e6871cf7d9ce97a692cacfdb2a25a47\"\n-dependencies = [\n- \"wasm-bindgen\",\n-]\n-\n [[package]]\n name = \"jsondocck\"\n version = \"0.1.0\"\n@@ -2903,20 +2886,9 @@ dependencies = [\n name = \"rustc-workspace-hack\"\n version = \"1.0.0\"\n dependencies = [\n- \"bstr 0.2.17\",\n- \"clap 3.2.20\",\n- \"getrandom\",\n- \"hashbrown 0.12.3\",\n  \"libc\",\n- \"libz-sys\",\n- \"once_cell\",\n- \"rand\",\n  \"regex\",\n  \"serde_json\",\n- \"smallvec\",\n- \"syn 1.0.102\",\n- \"url\",\n- \"winapi\",\n ]\n \n [[package]]\n@@ -5280,60 +5252,6 @@ dependencies = [\n  \"rustc-std-workspace-core\",\n ]\n \n-[[package]]\n-name = \"wasm-bindgen\"\n-version = \"0.2.83\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"eaf9f5aceeec8be17c128b2e93e031fb8a4d469bb9c4ae2d7dc1888b26887268\"\n-dependencies = [\n- \"cfg-if\",\n- \"wasm-bindgen-macro\",\n-]\n-\n-[[package]]\n-name = \"wasm-bindgen-backend\"\n-version = \"0.2.83\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"4c8ffb332579b0557b52d268b91feab8df3615f265d5270fec2a8c95b17c1142\"\n-dependencies = [\n- \"bumpalo\",\n- \"log\",\n- \"once_cell\",\n- \"proc-macro2\",\n- \"quote\",\n- \"syn 1.0.102\",\n- \"wasm-bindgen-shared\",\n-]\n-\n-[[package]]\n-name = \"wasm-bindgen-macro\"\n-version = \"0.2.83\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"052be0f94026e6cbc75cdefc9bae13fd6052cdcaf532fa6c45e7ae33a1e6c810\"\n-dependencies = [\n- \"quote\",\n- \"wasm-bindgen-macro-support\",\n-]\n-\n-[[package]]\n-name = \"wasm-bindgen-macro-support\"\n-version = \"0.2.83\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"07bc0c051dc5f23e307b13285f9d75df86bfdf816c5721e573dec1f9b8aa193c\"\n-dependencies = [\n- \"proc-macro2\",\n- \"quote\",\n- \"syn 1.0.102\",\n- \"wasm-bindgen-backend\",\n- \"wasm-bindgen-shared\",\n-]\n-\n-[[package]]\n-name = \"wasm-bindgen-shared\"\n-version = \"0.2.83\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"1c38c045535d93ec4f0b4defec448e4291638ee608530863b1e2ba115d4fff7f\"\n-\n [[package]]\n name = \"winapi\"\n version = \"0.3.9\""}, {"sha": "0d6f16955187a17ff294d479e389e696406c5350", "filename": "src/bootstrap/tool.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/1cfaa3431e9d8633472316c714962de960db0842/src%2Fbootstrap%2Ftool.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1cfaa3431e9d8633472316c714962de960db0842/src%2Fbootstrap%2Ftool.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Ftool.rs?ref=1cfaa3431e9d8633472316c714962de960db0842", "patch": "@@ -299,7 +299,6 @@ pub fn prepare_tool_cargo(\n             || path.ends_with(\"rustfmt\")\n         {\n             cargo.env(\"LIBZ_SYS_STATIC\", \"1\");\n-            features.push(\"rustc-workspace-hack/all-static\".to_string());\n         }\n         if path.ends_with(\"cargo\") {\n             features.push(\"all-static\".to_string());"}, {"sha": "5d5d57fc9ef165ffeb292c2502b0a41f95160e55", "filename": "src/tools/rustc-workspace-hack/Cargo.toml", "status": "modified", "additions": 1, "deletions": 84, "changes": 85, "blob_url": "https://github.com/rust-lang/rust/blob/1cfaa3431e9d8633472316c714962de960db0842/src%2Ftools%2Frustc-workspace-hack%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/1cfaa3431e9d8633472316c714962de960db0842/src%2Ftools%2Frustc-workspace-hack%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Frustc-workspace-hack%2FCargo.toml?ref=1cfaa3431e9d8633472316c714962de960db0842", "patch": "@@ -12,91 +12,8 @@ path = \"lib.rs\"\n \n # For documentation about what this is and why in the world these dependencies\n # are appearing, see `README.md`.\n-\n-[target.'cfg(windows)'.dependencies.winapi]\n-version = \"0.3\"\n-features = [\n-  \"accctrl\",\n-  \"aclapi\",\n-  \"basetsd\",\n-  \"cfg\",\n-  \"consoleapi\",\n-  \"errhandlingapi\",\n-  \"evntrace\",\n-  \"fibersapi\",\n-  \"handleapi\",\n-  \"in6addr\",\n-  \"inaddr\",\n-  \"ioapiset\",\n-  \"jobapi\",\n-  \"jobapi2\",\n-  \"knownfolders\",\n-  \"libloaderapi\",\n-  \"lmcons\",\n-  \"memoryapi\",\n-  \"minschannel\",\n-  \"minwinbase\",\n-  \"mstcpip\",\n-  \"mswsock\",\n-  \"namedpipeapi\",\n-  \"ntdef\",\n-  \"ntsecapi\",\n-  \"ntstatus\",\n-  \"objbase\",\n-  \"processenv\",\n-  \"processthreadsapi\",\n-  \"profileapi\",\n-  \"psapi\",\n-  \"schannel\",\n-  \"securitybaseapi\",\n-  \"shellapi\",\n-  \"shlobj\",\n-  \"sspi\",\n-  \"synchapi\",\n-  \"sysinfoapi\",\n-  \"threadpoollegacyapiset\",\n-  \"timezoneapi\",\n-  \"userenv\",\n-  \"winbase\",\n-  \"wincon\",\n-  \"wincrypt\",\n-  \"windef\",\n-  \"winioctl\",\n-  \"winnt\",\n-  \"winreg\",\n-  \"winsock2\",\n-  \"winuser\",\n-  \"ws2def\",\n-  \"ws2ipdef\",\n-  \"ws2tcpip\",\n-]\n-\n [dependencies]\n-bstr = { version = \"0.2.17\", features = [\"default\"] }\n-clap = { version = \"3.1.1\", features = [\"derive\", \"clap_derive\"]}\n-curl-sys = { version = \"0.4.13\", features = [\"http2\", \"libnghttp2-sys\"], optional = true }\n-# Ensure `extra_traits` of libc, which is used transitively by Cargo.\n libc = { version = \"0.2\", features = [\"extra_traits\"] }\n-# Ensure `js` of getrandom, which is (unfortunately) used transitively by Cargo.\n-getrandom = { version = \"0.2\", features = [\"js\"] }\n-# Ensure default features of libz-sys, which are disabled in some scenarios.\n-libz-sys = { version = \"1.1.2\" }\n+serde_json = { version = \"1.0.31\", features = [\"unbounded_depth\"] }\n # Ensure default features of regex, which are disabled in some scenarios.\n regex = { version = \"1.5.6\" }\n-serde_json = { version = \"1.0.31\", features = [\"raw_value\", \"unbounded_depth\"] }\n-syn = { version = \"1\", features = ['full', 'visit', 'visit-mut'] } # `visit-mut` required by Cargo via `gix`\n-url = { version = \"2.0\", features = ['serde'] }\n-# Ensure default features of rand, which are disabled in some scenarios.\n-rand = { version = \"0.8.5\" }\n-\n-# Ensure features of `hashbrown`, `smallvec`, and `once_cell`,\n-# which are used transitively by Cargo (via `gix`).\n-hashbrown = { version = \"0.12.3\", default-features = false, features = [\"inline-more\"] }\n-once_cell = { version = \"1.16.0\", default-features = false, features = [\"unstable\"] }\n-smallvec = { version = \"1.10.0\", features = [\"write\"] }\n-\n-[target.'cfg(not(windows))'.dependencies]\n-openssl = { version = \"0.10.35\", optional = true }\n-\n-[features]\n-all-static = ['openssl/vendored', 'curl-sys/static-curl', 'curl-sys/force-system-lib-on-osx']"}]}