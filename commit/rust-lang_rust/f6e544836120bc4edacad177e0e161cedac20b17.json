{"sha": "f6e544836120bc4edacad177e0e161cedac20b17", "node_id": "C_kwDOAAsO6NoAKGY2ZTU0NDgzNjEyMGJjNGVkYWNhZDE3N2UwZTE2MWNlZGFjMjBiMTc", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-11-29T04:24:25Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-11-29T04:24:25Z"}, "message": "Rollup merge of #105027 - aDotInTheVoid:rdj-foreign-variant-test, r=GuillaumeGomez\n\nRustdoc-Json: Add tests for linking to foreign variants.\n\nI initially taught these would be bugs, but it turn out they work perfectly, and the variant is added to paths.\n\nMost of the work is done by jsondoclint checking all the ID's resolve (although this wont happen for links until #105015, which in turn is blocked on removing foreign traits), but we do check that neither the enum nor the variant is inlined, so it must be resolved correctly through paths.\n\nr? ``@GuillaumeGomez``", "tree": {"sha": "a258f96cef4f06de1af2fc50b790e320c202b6f4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a258f96cef4f06de1af2fc50b790e320c202b6f4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f6e544836120bc4edacad177e0e161cedac20b17", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjhYl5CRBK7hj4Ov3rIwAADtsIAHeoSyWrkvbsjXoRcM0FD1+Z\no59MOGOsN1N9S6BngPx74kQBc0tlmS1/qZ+zz3ysaJLTiP5IgNjBDfcQJUuUMYUk\ntRgURAZCO9fd6yR1Hi3hC1sSi8CSyXdFCDrhifmQW9X3fBzzNtpyu78I1YkfudtS\n2sBky2Lm0AS2tItCanXDqGHzvAbTXI166EVdNt7eOIJVlfef+T4yEQAN4jpOz0Np\nudzVKheuLgiVshtyBY9T9KAS+F9BKsh65mI73BlC6J6iwgknaIyn0dcMZsBf2fPZ\n8CvEp9/9N4DLIujlN+BwKL/JOkOW6JGWjzRIf1wk0fbu8hUI9WZ/U4Hy9sJbCGU=\n=qDay\n-----END PGP SIGNATURE-----\n", "payload": "tree a258f96cef4f06de1af2fc50b790e320c202b6f4\nparent 0e7f15947e8427ff75edd8658d74ceeb1cd7d6d6\nparent d958f3773ad04410b9fa316c2c7e242963e51ac5\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1669695865 +0100\ncommitter GitHub <noreply@github.com> 1669695865 +0100\n\nRollup merge of #105027 - aDotInTheVoid:rdj-foreign-variant-test, r=GuillaumeGomez\n\nRustdoc-Json: Add tests for linking to foreign variants.\n\nI initially taught these would be bugs, but it turn out they work perfectly, and the variant is added to paths.\n\nMost of the work is done by jsondoclint checking all the ID's resolve (although this wont happen for links until #105015, which in turn is blocked on removing foreign traits), but we do check that neither the enum nor the variant is inlined, so it must be resolved correctly through paths.\n\nr? ``@GuillaumeGomez``\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f6e544836120bc4edacad177e0e161cedac20b17", "html_url": "https://github.com/rust-lang/rust/commit/f6e544836120bc4edacad177e0e161cedac20b17", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f6e544836120bc4edacad177e0e161cedac20b17/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0e7f15947e8427ff75edd8658d74ceeb1cd7d6d6", "url": "https://api.github.com/repos/rust-lang/rust/commits/0e7f15947e8427ff75edd8658d74ceeb1cd7d6d6", "html_url": "https://github.com/rust-lang/rust/commit/0e7f15947e8427ff75edd8658d74ceeb1cd7d6d6"}, {"sha": "d958f3773ad04410b9fa316c2c7e242963e51ac5", "url": "https://api.github.com/repos/rust-lang/rust/commits/d958f3773ad04410b9fa316c2c7e242963e51ac5", "html_url": "https://github.com/rust-lang/rust/commit/d958f3773ad04410b9fa316c2c7e242963e51ac5"}], "stats": {"total": 25, "additions": 25, "deletions": 0}, "files": [{"sha": "7188f79383259a992e673fd76f8cb2efbbb8e6b5", "filename": "src/test/rustdoc-json/enums/auxiliary/color.rs", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/f6e544836120bc4edacad177e0e161cedac20b17/src%2Ftest%2Frustdoc-json%2Fenums%2Fauxiliary%2Fcolor.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f6e544836120bc4edacad177e0e161cedac20b17/src%2Ftest%2Frustdoc-json%2Fenums%2Fauxiliary%2Fcolor.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-json%2Fenums%2Fauxiliary%2Fcolor.rs?ref=f6e544836120bc4edacad177e0e161cedac20b17", "patch": "@@ -0,0 +1,5 @@\n+pub enum Color {\n+    Red,\n+    Green,\n+    Blue,\n+}"}, {"sha": "470b195a2924782f56db1cd6bc2772fed8acba20", "filename": "src/test/rustdoc-json/enums/doc_link_to_foreign_variant.rs", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/f6e544836120bc4edacad177e0e161cedac20b17/src%2Ftest%2Frustdoc-json%2Fenums%2Fdoc_link_to_foreign_variant.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f6e544836120bc4edacad177e0e161cedac20b17/src%2Ftest%2Frustdoc-json%2Fenums%2Fdoc_link_to_foreign_variant.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-json%2Fenums%2Fdoc_link_to_foreign_variant.rs?ref=f6e544836120bc4edacad177e0e161cedac20b17", "patch": "@@ -0,0 +1,11 @@\n+// aux-build: color.rs\n+\n+//! The purpose of this test it to have a link to [a foreign variant](Red).\n+\n+extern crate color;\n+use color::Color::Red;\n+\n+// @set red = \"$.index[*][?(@.inner.is_crate == true)].links.Red\"\n+\n+// @!has \"$.index[*][?(@.name == 'Red')]\"\n+// @!has \"$.index[*][?(@.name == 'Color')]\""}, {"sha": "11bb6ce1f3a0c7073b385b35e7ea3cc3352b7f28", "filename": "src/test/rustdoc-json/enums/use_variant_foreign.rs", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/f6e544836120bc4edacad177e0e161cedac20b17/src%2Ftest%2Frustdoc-json%2Fenums%2Fuse_variant_foreign.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f6e544836120bc4edacad177e0e161cedac20b17/src%2Ftest%2Frustdoc-json%2Fenums%2Fuse_variant_foreign.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-json%2Fenums%2Fuse_variant_foreign.rs?ref=f6e544836120bc4edacad177e0e161cedac20b17", "patch": "@@ -0,0 +1,9 @@\n+// aux-build: color.rs\n+\n+extern crate color;\n+\n+// @is \"$.index[*][?(@.inner.name == 'Red')].kind\" '\"import\"'\n+pub use color::Color::Red;\n+\n+// @!has \"$.index[*][?(@.name == 'Red')]\"\n+// @!has \"$.index[*][?(@.name == 'Color')]\""}]}