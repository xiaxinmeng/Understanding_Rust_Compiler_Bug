{"sha": "13bfcb738396028ee0f24261f47d5ffbe79a4075", "node_id": "C_kwDOAAsO6NoAKDEzYmZjYjczODM5NjAyOGVlMGYyNDI2MWY0N2Q1ZmZiZTc5YTQwNzU", "commit": {"author": {"name": "Caio", "email": "c410.f3r@gmail.com", "date": "2021-09-30T12:00:17Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-09-30T12:00:17Z"}, "message": "Merge pull request #2 from steffahn/collect_into_array_fix_ub\n\nImprove last commit of rust_lang#75644", "tree": {"sha": "a315e8812db9868b58b9b6d214e6ce30e73a0df0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a315e8812db9868b58b9b6d214e6ce30e73a0df0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/13bfcb738396028ee0f24261f47d5ffbe79a4075", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJhVabRCRBK7hj4Ov3rIwAAk/sIAFiHf3fXLPtzIW4afaJvr1QW\nfd81iCG0Flq1yRkekyT+UUdS39QMmon3V0gToJAwv9BB1/lv2qLPCYU9ETrQ/JsJ\n2lvrgPek/Xpc94olBa5ccf0ApK+kuvWvusESS/NUPY2QIGe6E08ymUfKlvKEMbcX\na+9PyInFSfgItCZ7RjrleT6FWAW6rev7k6oyQvOZ4KgWwjf82VZSpq5LbY0YJhsN\nJXPPnWMtAqrNOt7sb49ZRQjd9cdbufYuG1tzme5B0vkxibs3UMHIE32KgGoBdvyn\nVo23auHH6ZB38eKObkTCNdDmt+Q2TJcSwuhfXvXxJtxfV2eBavNhwUdawDkkHug=\n=gKBo\n-----END PGP SIGNATURE-----\n", "payload": "tree a315e8812db9868b58b9b6d214e6ce30e73a0df0\nparent fdccc7dad9f9d4227ce07189585cc5214868bc28\nparent 325025e74b98ee3bab229ed416fa9669b9eeca71\nauthor Caio <c410.f3r@gmail.com> 1633003217 -0300\ncommitter GitHub <noreply@github.com> 1633003217 -0300\n\nMerge pull request #2 from steffahn/collect_into_array_fix_ub\n\nImprove last commit of rust_lang#75644"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/13bfcb738396028ee0f24261f47d5ffbe79a4075", "html_url": "https://github.com/rust-lang/rust/commit/13bfcb738396028ee0f24261f47d5ffbe79a4075", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/13bfcb738396028ee0f24261f47d5ffbe79a4075/comments", "author": {"login": "c410-f3r", "id": 17877264, "node_id": "MDQ6VXNlcjE3ODc3MjY0", "avatar_url": "https://avatars.githubusercontent.com/u/17877264?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c410-f3r", "html_url": "https://github.com/c410-f3r", "followers_url": "https://api.github.com/users/c410-f3r/followers", "following_url": "https://api.github.com/users/c410-f3r/following{/other_user}", "gists_url": "https://api.github.com/users/c410-f3r/gists{/gist_id}", "starred_url": "https://api.github.com/users/c410-f3r/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c410-f3r/subscriptions", "organizations_url": "https://api.github.com/users/c410-f3r/orgs", "repos_url": "https://api.github.com/users/c410-f3r/repos", "events_url": "https://api.github.com/users/c410-f3r/events{/privacy}", "received_events_url": "https://api.github.com/users/c410-f3r/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fdccc7dad9f9d4227ce07189585cc5214868bc28", "url": "https://api.github.com/repos/rust-lang/rust/commits/fdccc7dad9f9d4227ce07189585cc5214868bc28", "html_url": "https://github.com/rust-lang/rust/commit/fdccc7dad9f9d4227ce07189585cc5214868bc28"}, {"sha": "325025e74b98ee3bab229ed416fa9669b9eeca71", "url": "https://api.github.com/repos/rust-lang/rust/commits/325025e74b98ee3bab229ed416fa9669b9eeca71", "html_url": "https://github.com/rust-lang/rust/commit/325025e74b98ee3bab229ed416fa9669b9eeca71"}], "stats": {"total": 11, "additions": 5, "deletions": 6}, "files": [{"sha": "6825e663fc61dfa2d581f93c80ef4df46e59c81d", "filename": "library/core/src/array/mod.rs", "status": "modified", "additions": 5, "deletions": 6, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/13bfcb738396028ee0f24261f47d5ffbe79a4075/library%2Fcore%2Fsrc%2Farray%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/13bfcb738396028ee0f24261f47d5ffbe79a4075/library%2Fcore%2Fsrc%2Farray%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Farray%2Fmod.rs?ref=13bfcb738396028ee0f24261f47d5ffbe79a4075", "patch": "@@ -568,18 +568,17 @@ where\n         fn drop(&mut self) {\n             debug_assert!(self.initialized <= N);\n \n-            let ptr = MaybeUninit::slice_as_mut_ptr(self.array_mut);\n-            let initialized_part = crate::ptr::slice_from_raw_parts_mut(ptr, self.initialized);\n-\n-            // SAFETY: this raw slice will contain only initialized objects.\n+            // SAFETY: this slice will contain only initialized objects.\n             unsafe {\n-                crate::ptr::drop_in_place(initialized_part);\n+                crate::ptr::drop_in_place(MaybeUninit::slice_assume_init_mut(\n+                    &mut self.array_mut.get_unchecked_mut(..self.initialized),\n+                ));\n             }\n         }\n     }\n \n     let mut array = MaybeUninit::uninit_array::<N>();\n-    let mut guard: Guard<'_, _, N> = Guard { array_mut: &mut array, initialized: 0 };\n+    let mut guard = Guard { array_mut: &mut array, initialized: 0 };\n \n     while let Some(item_rslt) = iter.next() {\n         let item = match item_rslt {"}]}