{"sha": "f34805a8934eff05ed6b8080964bdbf3d379782b", "node_id": "MDY6Q29tbWl0NzI0NzEyOmYzNDgwNWE4OTM0ZWZmMDVlZDZiODA4MDk2NGJkYmYzZDM3OTc4MmI=", "commit": {"author": {"name": "Kazuyoshi Kato", "email": "kato.kazuyoshi@gmail.com", "date": "2018-09-27T05:19:00Z"}, "committer": {"name": "Kazuyoshi Kato", "email": "kato.kazuyoshi@gmail.com", "date": "2018-09-27T05:21:09Z"}, "message": "Add the library search box on the 404 page\n\nIt actually has a link to search already, but it would be better to\nhave the search \"box\" as like index.md to be consistent.\n\n<style> can be shared with index.md, but these pages currently\nuse https://doc.rust-lang.org/rust.css directly.\n\nFixes #14572.", "tree": {"sha": "84b83ad06ca9ee51e55bf8e6f2a70031919fa766", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/84b83ad06ca9ee51e55bf8e6f2a70031919fa766"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f34805a8934eff05ed6b8080964bdbf3d379782b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f34805a8934eff05ed6b8080964bdbf3d379782b", "html_url": "https://github.com/rust-lang/rust/commit/f34805a8934eff05ed6b8080964bdbf3d379782b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f34805a8934eff05ed6b8080964bdbf3d379782b/comments", "author": {"login": "kzys", "id": 19111, "node_id": "MDQ6VXNlcjE5MTEx", "avatar_url": "https://avatars.githubusercontent.com/u/19111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kzys", "html_url": "https://github.com/kzys", "followers_url": "https://api.github.com/users/kzys/followers", "following_url": "https://api.github.com/users/kzys/following{/other_user}", "gists_url": "https://api.github.com/users/kzys/gists{/gist_id}", "starred_url": "https://api.github.com/users/kzys/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kzys/subscriptions", "organizations_url": "https://api.github.com/users/kzys/orgs", "repos_url": "https://api.github.com/users/kzys/repos", "events_url": "https://api.github.com/users/kzys/events{/privacy}", "received_events_url": "https://api.github.com/users/kzys/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kzys", "id": 19111, "node_id": "MDQ6VXNlcjE5MTEx", "avatar_url": "https://avatars.githubusercontent.com/u/19111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kzys", "html_url": "https://github.com/kzys", "followers_url": "https://api.github.com/users/kzys/followers", "following_url": "https://api.github.com/users/kzys/following{/other_user}", "gists_url": "https://api.github.com/users/kzys/gists{/gist_id}", "starred_url": "https://api.github.com/users/kzys/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kzys/subscriptions", "organizations_url": "https://api.github.com/users/kzys/orgs", "repos_url": "https://api.github.com/users/kzys/repos", "events_url": "https://api.github.com/users/kzys/events{/privacy}", "received_events_url": "https://api.github.com/users/kzys/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c3a1a0d3400bbbcac194efb6ef2b14eef9be5149", "url": "https://api.github.com/repos/rust-lang/rust/commits/c3a1a0d3400bbbcac194efb6ef2b14eef9be5149", "html_url": "https://github.com/rust-lang/rust/commit/c3a1a0d3400bbbcac194efb6ef2b14eef9be5149"}], "stats": {"total": 47, "additions": 32, "deletions": 15}, "files": [{"sha": "4abfee9d46f0064ac50a62bd49a663be6d5b887b", "filename": "src/doc/not_found.md", "status": "modified", "additions": 32, "deletions": 15, "changes": 47, "blob_url": "https://github.com/rust-lang/rust/blob/f34805a8934eff05ed6b8080964bdbf3d379782b/src%2Fdoc%2Fnot_found.md", "raw_url": "https://github.com/rust-lang/rust/raw/f34805a8934eff05ed6b8080964bdbf3d379782b/src%2Fdoc%2Fnot_found.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Fnot_found.md?ref=f34805a8934eff05ed6b8080964bdbf3d379782b", "patch": "@@ -5,6 +5,23 @@\n #TOC { display: none; }\n .header-section-number { display: none; }\n li {list-style-type: none; }\n+.search-input {\n+    width: calc(100% - 200px);\n+}\n+.search-but {\n+    cursor: pointer;\n+}\n+.search-but, .search-input {\n+    padding: 4px;\n+    border: 1px solid #ccc;\n+    border-radius: 3px;\n+    outline: none;\n+    font-size: 0.7em;\n+    background-color: #fff;\n+}\n+.search-but:hover, .search-input:focus {\n+    border-color: #55a9ff;\n+}\n </style>\n \n Looks like you've taken a wrong turn.\n@@ -13,11 +30,20 @@ Some things that might be helpful to you though:\n \n # Search\n \n-<form action=\"https://duckduckgo.com/\">\n-    <input type=\"text\" id=\"site-search\" name=\"q\" size=\"80\"></input>\n-    <input type=\"submit\" value=\"Search DuckDuckGo\"></form>\n-\n-Rust doc search: <span id=\"core-search\"></span>\n+<div>\n+  <form action=\"std/index.html\" method=\"get\">\n+    <input id=\"std-search\" class=\"search-input\" type=\"search\" name=\"search\"\n+           placeholder=\"Search through the standard library\"/>\n+    <button class=\"search-but\">Search Standard Library</button>\n+  </form>\n+</div>\n+\n+<div>\n+  <form action=\"https://duckduckgo.com/\">\n+    <input id=\"site-search\" class=\"search-input\" type=\"search\" name=\"q\"></input>\n+    <input type=\"submit\" value=\"Search DuckDuckGo\" class=\"search-but\">\n+  </form>\n+</div>\n \n # Reference\n \n@@ -53,16 +79,7 @@ function populate_site_search() {\n \n function populate_rust_search() {\n     var op = get_url_fragments();\n-    var lt = op.pop();\n-\n-    // #18540, use a single token\n-\n-    var a = document.createElement(\"a\");\n-    a.href = \"https://doc.rust-lang.org/core/?search=\" + encodeURIComponent(lt);\n-    a.textContent = lt;\n-    var search = document.getElementById('core-search');\n-    search.innerHTML = \"\";\n-    search.appendChild(a);\n+    document.getElementById('std-search').value = op.join(' ');\n }\n populate_site_search();\n populate_rust_search();"}]}