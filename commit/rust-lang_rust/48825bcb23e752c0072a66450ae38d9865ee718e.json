{"sha": "48825bcb23e752c0072a66450ae38d9865ee718e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ4ODI1YmNiMjNlNzUyYzAwNzJhNjY0NTBhZTM4ZDk4NjVlZTcxOGU=", "commit": {"author": {"name": "matthew", "email": "matthew.tejo@gmail.com", "date": "2018-03-27T02:41:19Z"}, "committer": {"name": "matthew", "email": "matthew.tejo@gmail.com", "date": "2018-03-27T02:41:19Z"}, "message": "Remove an unnecessary/incorrect match in the expression check function", "tree": {"sha": "55e3d74530ac8b485d21a53fdfec13001e230a26", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/55e3d74530ac8b485d21a53fdfec13001e230a26"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/48825bcb23e752c0072a66450ae38d9865ee718e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/48825bcb23e752c0072a66450ae38d9865ee718e", "html_url": "https://github.com/rust-lang/rust/commit/48825bcb23e752c0072a66450ae38d9865ee718e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/48825bcb23e752c0072a66450ae38d9865ee718e/comments", "author": {"login": "tejom", "id": 7831521, "node_id": "MDQ6VXNlcjc4MzE1MjE=", "avatar_url": "https://avatars.githubusercontent.com/u/7831521?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tejom", "html_url": "https://github.com/tejom", "followers_url": "https://api.github.com/users/tejom/followers", "following_url": "https://api.github.com/users/tejom/following{/other_user}", "gists_url": "https://api.github.com/users/tejom/gists{/gist_id}", "starred_url": "https://api.github.com/users/tejom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tejom/subscriptions", "organizations_url": "https://api.github.com/users/tejom/orgs", "repos_url": "https://api.github.com/users/tejom/repos", "events_url": "https://api.github.com/users/tejom/events{/privacy}", "received_events_url": "https://api.github.com/users/tejom/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tejom", "id": 7831521, "node_id": "MDQ6VXNlcjc4MzE1MjE=", "avatar_url": "https://avatars.githubusercontent.com/u/7831521?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tejom", "html_url": "https://github.com/tejom", "followers_url": "https://api.github.com/users/tejom/followers", "following_url": "https://api.github.com/users/tejom/following{/other_user}", "gists_url": "https://api.github.com/users/tejom/gists{/gist_id}", "starred_url": "https://api.github.com/users/tejom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tejom/subscriptions", "organizations_url": "https://api.github.com/users/tejom/orgs", "repos_url": "https://api.github.com/users/tejom/repos", "events_url": "https://api.github.com/users/tejom/events{/privacy}", "received_events_url": "https://api.github.com/users/tejom/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "816c1b191cbea4f4949bc584c2324e81caa6e34b", "url": "https://api.github.com/repos/rust-lang/rust/commits/816c1b191cbea4f4949bc584c2324e81caa6e34b", "html_url": "https://github.com/rust-lang/rust/commit/816c1b191cbea4f4949bc584c2324e81caa6e34b"}], "stats": {"total": 26, "additions": 11, "deletions": 15}, "files": [{"sha": "ecf8960c237d303c7843604bac3bc283f7e20899", "filename": "src/librustc/hir/check_attr.rs", "status": "modified", "additions": 2, "deletions": 12, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/48825bcb23e752c0072a66450ae38d9865ee718e/src%2Flibrustc%2Fhir%2Fcheck_attr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/48825bcb23e752c0072a66450ae38d9865ee718e/src%2Flibrustc%2Fhir%2Fcheck_attr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fhir%2Fcheck_attr.rs?ref=48825bcb23e752c0072a66450ae38d9865ee718e", "patch": "@@ -250,7 +250,7 @@ impl<'a, 'tcx> CheckAttrVisitor<'a, 'tcx> {\n                     self.emit_repr_error(\n                         attr.span,\n                         stmt.span,\n-                        &format!(\"attribute should not be applied to statements\"),\n+                        &format!(\"attribute should not be applied a statement\"),\n                         &format!(\"not a struct, enum or union\"),\n                     );\n                 }\n@@ -259,16 +259,6 @@ impl<'a, 'tcx> CheckAttrVisitor<'a, 'tcx> {\n     }\n \n     fn check_expr_attributes(&self, expr: &hir::Expr) {\n-        use hir::Expr_::*;\n-        match expr.node {\n-            // Assignments, Calls and Structs were handled by Items and Statements\n-            ExprCall(..) |\n-            ExprAssign(..) |\n-            ExprMethodCall(..) |\n-            ExprStruct(..) => return,\n-            _ => (),\n-        }\n-\n         for attr in expr.attrs.iter() {\n             if attr.check_name(\"inline\") {\n                 self.check_inline(attr, &expr.span, Target::Expression);\n@@ -278,7 +268,7 @@ impl<'a, 'tcx> CheckAttrVisitor<'a, 'tcx> {\n                     attr.span,\n                     expr.span,\n                     &format!(\"attribute should not be applied to an expression\"),\n-                    &format!(\"not a struct, enum or union\"),\n+                    &format!(\"not defining a struct, enum or union\"),\n                 );\n             }\n         }"}, {"sha": "c03cd67fef990080216fd50022363c50b3dfdb7b", "filename": "src/test/compile-fail/issue-43988.rs", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/48825bcb23e752c0072a66450ae38d9865ee718e/src%2Ftest%2Fcompile-fail%2Fissue-43988.rs", "raw_url": "https://github.com/rust-lang/rust/raw/48825bcb23e752c0072a66450ae38d9865ee718e/src%2Ftest%2Fcompile-fail%2Fissue-43988.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-43988.rs?ref=48825bcb23e752c0072a66450ae38d9865ee718e", "patch": "@@ -21,8 +21,7 @@ fn main() {\n \n     #[repr(nothing)]\n     let _x = 0;\n-    //~^^ ERROR attribute should not be applied to statements\n-\n+    //~^^ ERROR attribute should not be applied a statement\n \n     #[repr(something_not_real)]\n     loop {\n@@ -32,5 +31,12 @@ fn main() {\n \n     #[repr]\n     let _y = \"123\";\n-    //~^^ ERROR attribute should not be applied to statements\n+    //~^^ ERROR attribute should not be applied a statement\n+\n+\n+    fn foo() {}\n+\n+    #[inline(ABC)]\n+    foo();\n+    //~^^ ERROR attribute should be applied to function\n }"}]}