{"sha": "7e46f2ceaa84ae7ba7143fcbe8bb3d0da2449fb4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdlNDZmMmNlYWE4NGFlN2JhNzE0M2ZjYmU4YmIzZDBkYTI0NDlmYjQ=", "commit": {"author": {"name": "Jake Goldsborough", "email": "rjgoldsborough@gmail.com", "date": "2016-09-07T20:13:37Z"}, "committer": {"name": "Jake Goldsborough", "email": "rjgoldsborough@gmail.com", "date": "2016-09-07T20:13:37Z"}, "message": "moving nodejs detection logic to configure and adding\na nodejs cmd sanity check", "tree": {"sha": "01d08254b5de64fdee4a905d39e5489a09c479ef", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/01d08254b5de64fdee4a905d39e5489a09c479ef"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7e46f2ceaa84ae7ba7143fcbe8bb3d0da2449fb4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7e46f2ceaa84ae7ba7143fcbe8bb3d0da2449fb4", "html_url": "https://github.com/rust-lang/rust/commit/7e46f2ceaa84ae7ba7143fcbe8bb3d0da2449fb4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7e46f2ceaa84ae7ba7143fcbe8bb3d0da2449fb4/comments", "author": null, "committer": null, "parents": [{"sha": "0adcf46cdf3d85e78e761fdaaa9c3fa8a69df927", "url": "https://api.github.com/repos/rust-lang/rust/commits/0adcf46cdf3d85e78e761fdaaa9c3fa8a69df927", "html_url": "https://github.com/rust-lang/rust/commit/0adcf46cdf3d85e78e761fdaaa9c3fa8a69df927"}], "stats": {"total": 6, "additions": 5, "deletions": 1}, "files": [{"sha": "b1701202511958581092242a2cee387d6a77c677", "filename": "src/bootstrap/config.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7e46f2ceaa84ae7ba7143fcbe8bb3d0da2449fb4/src%2Fbootstrap%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7e46f2ceaa84ae7ba7143fcbe8bb3d0da2449fb4/src%2Fbootstrap%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fconfig.rs?ref=7e46f2ceaa84ae7ba7143fcbe8bb3d0da2449fb4", "patch": "@@ -79,6 +79,7 @@ pub struct Config {\n     pub musl_root: Option<PathBuf>,\n     pub prefix: Option<String>,\n     pub codegen_tests: bool,\n+    pub nodejs: Option<PathBuf>,\n }\n \n /// Per-target configuration stored in the global configuration structure.\n@@ -391,6 +392,9 @@ impl Config {\n                     self.rustc = Some(PathBuf::from(value).join(\"bin/rustc\"));\n                     self.cargo = Some(PathBuf::from(value).join(\"bin/cargo\"));\n                 }\n+                \"CFG_NODEJS\" if value.len() > 0 => {\n+                    self.nodejs = Some(PathBuf::from(value));\n+                }\n                 _ => {}\n             }\n         }"}, {"sha": "c345893954f46ec61dbed5a7bcc6fd4b17d02c53", "filename": "src/bootstrap/sanity.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7e46f2ceaa84ae7ba7143fcbe8bb3d0da2449fb4/src%2Fbootstrap%2Fsanity.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7e46f2ceaa84ae7ba7143fcbe8bb3d0da2449fb4/src%2Fbootstrap%2Fsanity.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fsanity.rs?ref=7e46f2ceaa84ae7ba7143fcbe8bb3d0da2449fb4", "patch": "@@ -76,7 +76,7 @@ pub fn check(build: &mut Build) {\n     need_cmd(\"python\".as_ref());\n \n     // If a manual nodejs was added to the config,\n-    // of if a nodejs install is detected through bootstrap.py, use it.\n+    // of if a nodejs install is detected through config, use it.\n     if build.config.nodejs.is_some() {\n         need_cmd(\"nodejs\".as_ref())\n     }"}]}