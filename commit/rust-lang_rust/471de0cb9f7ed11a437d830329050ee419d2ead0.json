{"sha": "471de0cb9f7ed11a437d830329050ee419d2ead0", "node_id": "C_kwDOAAsO6NoAKDQ3MWRlMGNiOWY3ZWQxMWE0MzdkODMwMzI5MDUwZWU0MTlkMmVhZDA", "commit": {"author": {"name": "Daniel Parks", "email": "dp+git@oxidized.org", "date": "2023-01-26T05:22:25Z"}, "committer": {"name": "Daniel Parks", "email": "dp+git@oxidized.org", "date": "2023-02-11T15:50:10Z"}, "message": "Document `cargo-clippy` feature\n\nIt is possible to use conditional compilation to prevent Clippy from\nevaluating certain code. This adds a brief explanation of how to use the\nfeature with conditional compilation, and mentions that generally it\u2019s\npreferable to use something like `#[allow(clippy::all)]`.\n\nFixes #10220 \u2014 Ability to skip files or blocks entirely", "tree": {"sha": "d814d1510f4e2f10d242ba79c8392edeef9a871d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d814d1510f4e2f10d242ba79c8392edeef9a871d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/471de0cb9f7ed11a437d830329050ee419d2ead0", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEQJbOWF3YrBywnESOPIXrsCNN6GQFAmPnuTQACgkQPIXrsCNN\n6GSZ4xAAyARYMVNz0Btfq0+sYDjQ/5XLYDvhDgeiW1+Ndj+RGYCCZxlahdKBVQeA\nh9VUP21odIEGrdoxAoOXDaOmMisQEj47PIJhn71Jwcc7DPqnzKAKM3my9U1kewHq\nugXaeDu6mKEFSr4EFOBLRd7wLA5BC8nvVeKrY2IVKQVnmfwfXaaiQusXb9pK4RO6\nT2+WLqcyr5VNpCpgqgJGMYdO+tKtu6QqrUhMwwRLeL96RQ4rla57t3iKwGO+Gmv3\nva+Q/5sAfukttzIdt2ctuOuAaGLvVkBdCXtUhbb0POmiBd7379FVhswPSZsgvFCR\nFvFb3qQD6qF1djmzUTssbB3QRRsTUBSt+XJlC7WgXzdl03Vpk9bG1WR3ZoihXzWQ\nbIrDa7A4U8VsMqY+49O2c23vdv9wzkYMlmic3Dvi0xzvRAEgr+1hPw0soUJZcgno\nCCNWehSS9FLV1Gp7nuvbNmEE7PduYtLziYiDO/86KFO5++foDPJfVFq/E0ljw/N9\nWZa49soePWHxd61u505Wnq7xrWB3C13fy6F7TeGZ391DJzSSttYkznI+2J71Jt3/\nlRV9qX40uEpHgf3S206MZwVqzTyF/1cVWsJ02/RsMREtDID5BwSL9gDzxU+TJTZm\n4+Lr5My+AZG/N3B0K56Sb9c7RrC1NvLflCrE+233+Y2SKxex/0w=\n=7cHQ\n-----END PGP SIGNATURE-----", "payload": "tree d814d1510f4e2f10d242ba79c8392edeef9a871d\nparent 0f7558148c22e53cd4608773b56cdfa50dcdeac3\nauthor Daniel Parks <dp+git@oxidized.org> 1674710545 -0800\ncommitter Daniel Parks <dp+git@oxidized.org> 1676130610 -0800\n\nDocument `cargo-clippy` feature\n\nIt is possible to use conditional compilation to prevent Clippy from\nevaluating certain code. This adds a brief explanation of how to use the\nfeature with conditional compilation, and mentions that generally it\u2019s\npreferable to use something like `#[allow(clippy::all)]`.\n\nFixes #10220 \u2014 Ability to skip files or blocks entirely\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/471de0cb9f7ed11a437d830329050ee419d2ead0", "html_url": "https://github.com/rust-lang/rust/commit/471de0cb9f7ed11a437d830329050ee419d2ead0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/471de0cb9f7ed11a437d830329050ee419d2ead0/comments", "author": {"login": "danielparks", "id": 154427, "node_id": "MDQ6VXNlcjE1NDQyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/154427?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danielparks", "html_url": "https://github.com/danielparks", "followers_url": "https://api.github.com/users/danielparks/followers", "following_url": "https://api.github.com/users/danielparks/following{/other_user}", "gists_url": "https://api.github.com/users/danielparks/gists{/gist_id}", "starred_url": "https://api.github.com/users/danielparks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danielparks/subscriptions", "organizations_url": "https://api.github.com/users/danielparks/orgs", "repos_url": "https://api.github.com/users/danielparks/repos", "events_url": "https://api.github.com/users/danielparks/events{/privacy}", "received_events_url": "https://api.github.com/users/danielparks/received_events", "type": "User", "site_admin": false}, "committer": {"login": "danielparks", "id": 154427, "node_id": "MDQ6VXNlcjE1NDQyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/154427?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danielparks", "html_url": "https://github.com/danielparks", "followers_url": "https://api.github.com/users/danielparks/followers", "following_url": "https://api.github.com/users/danielparks/following{/other_user}", "gists_url": "https://api.github.com/users/danielparks/gists{/gist_id}", "starred_url": "https://api.github.com/users/danielparks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danielparks/subscriptions", "organizations_url": "https://api.github.com/users/danielparks/orgs", "repos_url": "https://api.github.com/users/danielparks/repos", "events_url": "https://api.github.com/users/danielparks/events{/privacy}", "received_events_url": "https://api.github.com/users/danielparks/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0f7558148c22e53cd4608773b56cdfa50dcdeac3", "url": "https://api.github.com/repos/rust-lang/rust/commits/0f7558148c22e53cd4608773b56cdfa50dcdeac3", "html_url": "https://github.com/rust-lang/rust/commit/0f7558148c22e53cd4608773b56cdfa50dcdeac3"}], "stats": {"total": 21, "additions": 21, "deletions": 0}, "files": [{"sha": "b044507dfdb168c97e1ace670b3a8a4f829cd2a3", "filename": "book/src/configuration.md", "status": "modified", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/471de0cb9f7ed11a437d830329050ee419d2ead0/book%2Fsrc%2Fconfiguration.md", "raw_url": "https://github.com/rust-lang/rust/raw/471de0cb9f7ed11a437d830329050ee419d2ead0/book%2Fsrc%2Fconfiguration.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/book%2Fsrc%2Fconfiguration.md?ref=471de0cb9f7ed11a437d830329050ee419d2ead0", "patch": "@@ -100,3 +100,24 @@ Note: `custom_inner_attributes` is an unstable feature so it has to be enabled e\n \n Lints that recognize this configuration option can be\n found [here](https://rust-lang.github.io/rust-clippy/master/index.html#msrv)\n+\n+### Disabling evaluation of certain code\n+\n+> **Note:** This should only be used in cases where other solutions, like `#[allow(clippy::all)]`, are not sufficient.\n+\n+Very rarely, you may wish to prevent Clippy from evaluating certain sections of code entirely. You can do this with\n+[conditional compilation](https://doc.rust-lang.org/reference/conditional-compilation.html) by checking that the\n+`cargo-clippy` feature is not set. You may need to provide a stub so that the code compiles:\n+\n+```rust\n+#[cfg(not(feature = \"cargo-clippy\"))]\n+include!(concat!(env!(\"OUT_DIR\"), \"/my_big_function-generated.rs\"));\n+\n+#[cfg(feature = \"cargo-clippy\")]\n+fn my_big_function(_input: &str) -> Option<MyStruct> {\n+    None\n+}\n+```\n+\n+This feature is not actually part of your crate, so specifying `--all-features` to other tools, e.g. `cargo test\n+--all-features`, will not disable it."}]}