{"sha": "6432599c5d7f2646c0f91c6badef5496f2fbc119", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY0MzI1OTljNWQ3ZjI2NDZjMGY5MWM2YmFkZWY1NDk2ZjJmYmMxMTk=", "commit": {"author": {"name": "Brian Anderson", "email": "andersrb@gmail.com", "date": "2011-05-21T00:18:47Z"}, "committer": {"name": "Brian Anderson", "email": "andersrb@gmail.com", "date": "2011-05-22T06:10:08Z"}, "message": "stdlib: Use if/alt expressions in std::bitv", "tree": {"sha": "b6b2fba379a5942e179b4118f867b7d4c0c0303a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b6b2fba379a5942e179b4118f867b7d4c0c0303a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6432599c5d7f2646c0f91c6badef5496f2fbc119", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6432599c5d7f2646c0f91c6badef5496f2fbc119", "html_url": "https://github.com/rust-lang/rust/commit/6432599c5d7f2646c0f91c6badef5496f2fbc119", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6432599c5d7f2646c0f91c6badef5496f2fbc119/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "90e6453f46892f20235750dcc0bb95bbb1792380", "url": "https://api.github.com/repos/rust-lang/rust/commits/90e6453f46892f20235750dcc0bb95bbb1792380", "html_url": "https://github.com/rust-lang/rust/commit/90e6453f46892f20235750dcc0bb95bbb1792380"}], "stats": {"total": 25, "additions": 12, "deletions": 13}, "files": [{"sha": "7e8323f9ef50870bc9ed4be4f39d9f89cf817d97", "filename": "src/lib/bitv.rs", "status": "modified", "additions": 12, "deletions": 13, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/6432599c5d7f2646c0f91c6badef5496f2fbc119/src%2Flib%2Fbitv.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6432599c5d7f2646c0f91c6badef5496f2fbc119/src%2Flib%2Fbitv.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib%2Fbitv.rs?ref=6432599c5d7f2646c0f91c6badef5496f2fbc119", "patch": "@@ -32,12 +32,11 @@ fn uint_bits() -> uint {\n }\n \n fn create(uint nbits, bool init) -> t {\n-    auto elt;\n-    if (init) {\n-        elt = ~0u;\n+    auto elt = if (init) {\n+        ~0u\n     } else {\n-        elt = 0u;\n-    }\n+        0u\n+    };\n \n     auto storage = vec::init_elt_mut[uint](elt, nbits / uint_bits() + 1u);\n     ret rec(storage = storage, nbits = nbits);\n@@ -161,11 +160,11 @@ fn set(&t v, uint i, bool x) {\n     auto b = i % bits;\n     auto w0 = v.storage.(w);\n     auto flag = 1u << b;\n-    if (x) {\n-        v.storage.(w) = v.storage.(w) | flag;\n+    v.storage.(w) = if (x) {\n+        v.storage.(w) | flag\n     } else {\n-        v.storage.(w) = v.storage.(w) & ~flag;\n-    }\n+        v.storage.(w) & ~flag\n+    };\n }\n \n /* true if all bits are 1 */\n@@ -191,11 +190,11 @@ fn is_false(&t v) -> bool {\n }\n \n fn init_to_vec(t v, uint i) -> uint {\n-    if (get(v, i)) {\n-        ret 1u;\n+    ret if (get(v, i)) {\n+        1u\n     } else {\n-        ret 0u;\n-    }\n+        0u\n+    };\n }\n \n fn to_vec(&t v) -> vec[uint] {"}]}