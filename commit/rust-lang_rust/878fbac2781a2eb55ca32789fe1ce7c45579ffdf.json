{"sha": "878fbac2781a2eb55ca32789fe1ce7c45579ffdf", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg3OGZiYWMyNzgxYTJlYjU1Y2EzMjc4OWZlMWNlN2M0NTU3OWZmZGY=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-08-12T00:15:34Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-08-12T19:08:27Z"}, "message": "Remove str_from_vec runtime function", "tree": {"sha": "4be811d673676715c2c60cb1c6a2513573369c67", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4be811d673676715c2c60cb1c6a2513573369c67"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/878fbac2781a2eb55ca32789fe1ce7c45579ffdf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/878fbac2781a2eb55ca32789fe1ce7c45579ffdf", "html_url": "https://github.com/rust-lang/rust/commit/878fbac2781a2eb55ca32789fe1ce7c45579ffdf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/878fbac2781a2eb55ca32789fe1ce7c45579ffdf/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "740196987edf720ee03b7db367106a74fa446356", "url": "https://api.github.com/repos/rust-lang/rust/commits/740196987edf720ee03b7db367106a74fa446356", "html_url": "https://github.com/rust-lang/rust/commit/740196987edf720ee03b7db367106a74fa446356"}], "stats": {"total": 21, "additions": 1, "deletions": 20}, "files": [{"sha": "a3e34a8ae4529be5508416ea9e18152ec068306e", "filename": "src/lib/str.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/878fbac2781a2eb55ca32789fe1ce7c45579ffdf/src%2Flib%2Fstr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/878fbac2781a2eb55ca32789fe1ce7c45579ffdf/src%2Flib%2Fstr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib%2Fstr.rs?ref=878fbac2781a2eb55ca32789fe1ce7c45579ffdf", "patch": "@@ -64,7 +64,6 @@ native \"rust\" mod rustrt {\n     fn str_byte_len(s: str) -> uint;\n     fn str_alloc(n_bytes: uint) -> str;\n     fn str_from_ivec(b: &[mutable? u8]) -> str;\n-    fn str_from_vec(b: vec[mutable? u8]) -> str;\n     fn str_from_cstr(cstr: sbuf) -> str;\n     fn str_from_buf(buf: sbuf, len: uint) -> str;\n     fn str_push_byte(s: str, byte: uint) -> str;\n@@ -196,7 +195,7 @@ fn unsafe_from_bytes(v: &[mutable? u8]) -> str {\n     ret rustrt::str_from_ivec(v);\n }\n \n-fn unsafe_from_byte(u: u8) -> str { ret rustrt::str_from_vec([u]); }\n+fn unsafe_from_byte(u: u8) -> str { ret rustrt::str_from_ivec(~[u]); }\n \n fn str_from_cstr(cstr: sbuf) -> str { ret rustrt::str_from_cstr(cstr); }\n "}, {"sha": "c6a3c8c01d6f8238913b7291acb3221b18b64d44", "filename": "src/rt/rust_builtin.cpp", "status": "modified", "additions": 0, "deletions": 17, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/878fbac2781a2eb55ca32789fe1ce7c45579ffdf/src%2Frt%2Frust_builtin.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/878fbac2781a2eb55ca32789fe1ce7c45579ffdf/src%2Frt%2Frust_builtin.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust_builtin.cpp?ref=878fbac2781a2eb55ca32789fe1ce7c45579ffdf", "patch": "@@ -304,23 +304,6 @@ str_from_ivec(rust_task *task, rust_ivec *v)\n     return st;\n }\n \n-extern \"C\" CDECL rust_str *\n-str_from_vec(rust_task *task, rust_vec *v)\n-{\n-    rust_str *st =\n-        vec_alloc_with_data(task,\n-                            v->fill + 1,  // +1 to fit at least '\\0'\n-                            v->fill,\n-                            1,\n-                            v->fill ? (void*)v->data : NULL);\n-    if (!st) {\n-        task->fail();\n-        return NULL;\n-    }\n-    st->data[st->fill++] = '\\0';\n-    return st;\n-}\n-\n extern \"C\" CDECL rust_str *\n str_from_cstr(rust_task *task, char *sbuf)\n {"}, {"sha": "5e208ca80c9d3e5b2f118ba438ed46bc460fbc2b", "filename": "src/rt/rustrt.def.in", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/878fbac2781a2eb55ca32789fe1ce7c45579ffdf/src%2Frt%2Frustrt.def.in", "raw_url": "https://github.com/rust-lang/rust/raw/878fbac2781a2eb55ca32789fe1ce7c45579ffdf/src%2Frt%2Frustrt.def.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frustrt.def.in?ref=878fbac2781a2eb55ca32789fe1ce7c45579ffdf", "patch": "@@ -65,7 +65,6 @@ str_byte_len\n str_from_buf\n str_from_cstr\n str_from_ivec\n-str_from_vec\n str_push_byte\n str_slice\n take_chan"}]}