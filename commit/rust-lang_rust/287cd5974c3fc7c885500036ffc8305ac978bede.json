{"sha": "287cd5974c3fc7c885500036ffc8305ac978bede", "node_id": "C_kwDOAAsO6NoAKDI4N2NkNTk3NGMzZmM3Yzg4NTUwMDAzNmZmYzgzMDVhYzk3OGJlZGU", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2023-01-01T08:37:24Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2023-02-14T20:22:10Z"}, "message": "Avoid trailing commas", "tree": {"sha": "485df082cde607c4b1430043474221850b411832", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/485df082cde607c4b1430043474221850b411832"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/287cd5974c3fc7c885500036ffc8305ac978bede", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/287cd5974c3fc7c885500036ffc8305ac978bede", "html_url": "https://github.com/rust-lang/rust/commit/287cd5974c3fc7c885500036ffc8305ac978bede", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/287cd5974c3fc7c885500036ffc8305ac978bede/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fb61f5d781334280ecb1d54aaad04584afac21ec", "url": "https://api.github.com/repos/rust-lang/rust/commits/fb61f5d781334280ecb1d54aaad04584afac21ec", "html_url": "https://github.com/rust-lang/rust/commit/fb61f5d781334280ecb1d54aaad04584afac21ec"}], "stats": {"total": 24, "additions": 12, "deletions": 12}, "files": [{"sha": "af57d1e51206e942409faca36d9f76efccaaac34", "filename": "compiler/rustc_hir_typeck/src/fn_ctxt/checks.rs", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/287cd5974c3fc7c885500036ffc8305ac978bede/compiler%2Frustc_hir_typeck%2Fsrc%2Ffn_ctxt%2Fchecks.rs", "raw_url": "https://github.com/rust-lang/rust/raw/287cd5974c3fc7c885500036ffc8305ac978bede/compiler%2Frustc_hir_typeck%2Fsrc%2Ffn_ctxt%2Fchecks.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_typeck%2Fsrc%2Ffn_ctxt%2Fchecks.rs?ref=287cd5974c3fc7c885500036ffc8305ac978bede", "patch": "@@ -932,17 +932,17 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n                     labels\n                         .push((provided_span, format!(\"argument{} unexpected\", provided_ty_name)));\n                     let mut span = provided_span;\n-                    if let Some((_, next)) = provided_arg_tys.get(\n-                        ProvidedIdx::from_usize(arg_idx.index() + 1),\n-                    ) {\n-                        // Include next comma\n-                        span = span.until(*next);\n-                    } else if arg_idx.index() > 0\n+                    if arg_idx.index() > 0\n                         && let Some((_, prev)) = provided_arg_tys\n                             .get(ProvidedIdx::from_usize(arg_idx.index() - 1)\n                     ) {\n-                        // Last argument, include previous comma\n+                        // Include previous comma\n                         span = span.with_lo(prev.hi());\n+                    } else if let Some((_, next)) = provided_arg_tys.get(\n+                        ProvidedIdx::from_usize(arg_idx.index() + 1),\n+                    ) {\n+                        // Include next comma\n+                        span = span.until(*next);\n                     }\n                     suggestions.push((span, String::new()));\n "}, {"sha": "2818dbe9341a1c05f9a6001c5ecf34a0326c0e97", "filename": "tests/ui/argument-suggestions/extra_arguments.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/287cd5974c3fc7c885500036ffc8305ac978bede/tests%2Fui%2Fargument-suggestions%2Fextra_arguments.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/287cd5974c3fc7c885500036ffc8305ac978bede/tests%2Fui%2Fargument-suggestions%2Fextra_arguments.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fargument-suggestions%2Fextra_arguments.stderr?ref=287cd5974c3fc7c885500036ffc8305ac978bede", "patch": "@@ -65,7 +65,7 @@ LL | fn one_arg(_a: i32) {}\n help: remove the extra arguments\n    |\n LL -   one_arg(1, \"\", 1.0);\n-LL +   one_arg(1, );\n+LL +   one_arg(1);\n    |\n \n error[E0061]: this function takes 2 arguments but 3 arguments were supplied\n@@ -171,7 +171,7 @@ LL | fn two_arg_diff(_a: i32, _b: &str) {}\n help: remove the extra arguments\n    |\n LL -   two_arg_diff(1, \"\", 1, \"\");\n-LL +   two_arg_diff(1, \"\", );\n+LL +   two_arg_diff(1, \"\");\n    |\n \n error[E0061]: this function takes 2 arguments but 3 arguments were supplied\n@@ -205,7 +205,7 @@ LL | fn two_arg_diff(_a: i32, _b: &str) {}\n help: remove the extra argument\n    |\n LL -   two_arg_diff(1, 1,     \"\");\n-LL +   two_arg_diff(1, \"\");\n+LL +   two_arg_diff(1,     \"\");\n    |\n \n error[E0061]: this function takes 2 arguments but 3 arguments were supplied\n@@ -245,7 +245,7 @@ LL | fn two_arg_diff(_a: i32, _b: &str) {}\n help: remove the extra argument\n    |\n LL -     1,\n-LL +     \"\"\n+LL +     1,\n    |\n \n error: aborting due to 14 previous errors"}, {"sha": "49ff3540027e37a0ac64c1d4c46e86cad48b24e6", "filename": "tests/ui/typeck/struct-enum-wrong-args.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/287cd5974c3fc7c885500036ffc8305ac978bede/tests%2Fui%2Ftypeck%2Fstruct-enum-wrong-args.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/287cd5974c3fc7c885500036ffc8305ac978bede/tests%2Fui%2Ftypeck%2Fstruct-enum-wrong-args.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ftypeck%2Fstruct-enum-wrong-args.stderr?ref=287cd5974c3fc7c885500036ffc8305ac978bede", "patch": "@@ -25,7 +25,7 @@ note: tuple variant defined here\n help: remove the extra arguments\n    |\n LL -     let _ = Ok(3, 6, 2);\n-LL +     let _ = Ok(3, );\n+LL +     let _ = Ok(3);\n    |\n \n error[E0061]: this enum variant takes 1 argument but 0 arguments were supplied"}]}