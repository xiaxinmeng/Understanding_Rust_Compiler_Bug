{"sha": "3f4dbd390c9d8f56bcf9a37f94985ef10471b994", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNmNGRiZDM5MGM5ZDhmNTZiY2Y5YTM3Zjk0OTg1ZWYxMDQ3MWI5OTQ=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2019-07-28T18:24:52Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2019-07-28T18:26:07Z"}, "message": "Update minifier-rs version", "tree": {"sha": "067d74565cfd309c0d9251a33d889afa556cb393", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/067d74565cfd309c0d9251a33d889afa556cb393"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3f4dbd390c9d8f56bcf9a37f94985ef10471b994", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3f4dbd390c9d8f56bcf9a37f94985ef10471b994", "html_url": "https://github.com/rust-lang/rust/commit/3f4dbd390c9d8f56bcf9a37f94985ef10471b994", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3f4dbd390c9d8f56bcf9a37f94985ef10471b994/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "023525dbda35748a10713471b948974b68a1c2cc", "url": "https://api.github.com/repos/rust-lang/rust/commits/023525dbda35748a10713471b948974b68a1c2cc", "html_url": "https://github.com/rust-lang/rust/commit/023525dbda35748a10713471b948974b68a1c2cc"}], "stats": {"total": 16, "additions": 8, "deletions": 8}, "files": [{"sha": "c08d7444d14eae91f12218f5930c78d51828baef", "filename": "Cargo.lock", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/3f4dbd390c9d8f56bcf9a37f94985ef10471b994/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/3f4dbd390c9d8f56bcf9a37f94985ef10471b994/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=3f4dbd390c9d8f56bcf9a37f94985ef10471b994", "patch": "@@ -1700,7 +1700,7 @@ dependencies = [\n \n [[package]]\n name = \"minifier\"\n-version = \"0.0.30\"\n+version = \"0.0.33\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"macro-utils 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -3195,7 +3195,7 @@ dependencies = [\n name = \"rustdoc\"\n version = \"0.0.0\"\n dependencies = [\n- \"minifier 0.0.30 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"minifier 0.0.33 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"parking_lot 0.7.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"pulldown-cmark 0.5.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rustc-rayon 0.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -4442,7 +4442,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \"checksum memoffset 0.5.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"ce6075db033bbbb7ee5a0bbd3a3186bbae616f57fb001c485c7ff77955f8177f\"\n \"checksum mime 0.3.13 (registry+https://github.com/rust-lang/crates.io-index)\" = \"3e27ca21f40a310bd06d9031785f4801710d566c184a6e15bad4f1d9b65f9425\"\n \"checksum mime_guess 2.0.0-alpha.6 (registry+https://github.com/rust-lang/crates.io-index)\" = \"30de2e4613efcba1ec63d8133f344076952090c122992a903359be5a4f99c3ed\"\n-\"checksum minifier 0.0.30 (registry+https://github.com/rust-lang/crates.io-index)\" = \"4c909e78edf61f3aa0dd2086da168cdf304329044bbf248768ca3d20253ec8c0\"\n+\"checksum minifier 0.0.33 (registry+https://github.com/rust-lang/crates.io-index)\" = \"70bf0db2475f5e627787da77ca52fe33c294063f49f4134b8bc662eedb5e7332\"\n \"checksum miniz-sys 0.1.11 (registry+https://github.com/rust-lang/crates.io-index)\" = \"0300eafb20369952951699b68243ab4334f4b10a88f411c221d444b36c40e649\"\n \"checksum miniz_oxide 0.2.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"5ad30a47319c16cde58d0314f5d98202a80c9083b5f61178457403dfb14e509c\"\n \"checksum miniz_oxide_c_api 0.2.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"28edaef377517fd9fe3e085c37d892ce7acd1fbeab9239c5a36eec352d8a8b7e\""}, {"sha": "334dc74c6c8f74a63ef34623dcb335bf5faed09e", "filename": "src/librustdoc/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3f4dbd390c9d8f56bcf9a37f94985ef10471b994/src%2Flibrustdoc%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/3f4dbd390c9d8f56bcf9a37f94985ef10471b994/src%2Flibrustdoc%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2FCargo.toml?ref=3f4dbd390c9d8f56bcf9a37f94985ef10471b994", "patch": "@@ -10,7 +10,7 @@ path = \"lib.rs\"\n \n [dependencies]\n pulldown-cmark = { version = \"0.5.3\", default-features = false }\n-minifier = \"0.0.30\"\n+minifier = \"0.0.33\"\n rayon = { version = \"0.2.0\", package = \"rustc-rayon\" }\n tempfile = \"3\"\n parking_lot = \"0.7\""}, {"sha": "87c6a0b4235787db414670e6d984b3c6e3d000c3", "filename": "src/librustdoc/html/render.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/3f4dbd390c9d8f56bcf9a37f94985ef10471b994/src%2Flibrustdoc%2Fhtml%2Frender.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3f4dbd390c9d8f56bcf9a37f94985ef10471b994/src%2Flibrustdoc%2Fhtml%2Frender.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender.rs?ref=3f4dbd390c9d8f56bcf9a37f94985ef10471b994", "patch": "@@ -1322,13 +1322,13 @@ fn write_minify_replacer<W: Write>(\n                  {\n                     let tokens: Tokens<'_> = simple_minify(contents)\n                         .into_iter()\n-                        .filter(|f| {\n+                        .filter(|(f, next)| {\n                             // We keep backlines.\n-                            minifier::js::clean_token_except(f, &|c: &Token<'_>| {\n+                            minifier::js::clean_token_except(f, next, &|c: &Token<'_>| {\n                                 c.get_char() != Some(ReservedChar::Backline)\n                             })\n                         })\n-                        .map(|f| {\n+                        .map(|(f, _)| {\n                             minifier::js::replace_token_with(f, &|t: &Token<'_>| {\n                                 match *t {\n                                     Token::Keyword(Keyword::Null) => Some(Token::Other(\"N\")),\n@@ -1363,7 +1363,7 @@ fn write_minify_replacer<W: Write>(\n                             // shouldn't be aggregated.\n                             |tokens, pos| {\n                                 pos < 2 ||\n-                                !tokens[pos - 1].is_char(ReservedChar::OpenBracket) ||\n+                                !tokens[pos - 1].eq_char(ReservedChar::OpenBracket) ||\n                                 tokens[pos - 2].get_other() != Some(\"searchIndex\")\n                             }\n                         )"}]}