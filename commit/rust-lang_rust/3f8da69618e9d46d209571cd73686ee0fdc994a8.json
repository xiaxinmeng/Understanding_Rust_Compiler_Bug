{"sha": "3f8da69618e9d46d209571cd73686ee0fdc994a8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNmOGRhNjk2MThlOWQ0NmQyMDk1NzFjZDczNjg2ZWUwZmRjOTk0YTg=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-09-25T15:32:49Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-09-25T15:32:49Z"}, "message": "auto merge of #17455 : steveklabnik/rust/document_default, r=alexcrichton\n\nGiven that the `Default` module is now stable, it might as well get good docs.", "tree": {"sha": "e73c1e993f7942c53e7ad87acfac6f60b9e0e53b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e73c1e993f7942c53e7ad87acfac6f60b9e0e53b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3f8da69618e9d46d209571cd73686ee0fdc994a8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3f8da69618e9d46d209571cd73686ee0fdc994a8", "html_url": "https://github.com/rust-lang/rust/commit/3f8da69618e9d46d209571cd73686ee0fdc994a8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3f8da69618e9d46d209571cd73686ee0fdc994a8/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "58413c09cd52ea4005d6ea7733ba1fb3a8f36589", "url": "https://api.github.com/repos/rust-lang/rust/commits/58413c09cd52ea4005d6ea7733ba1fb3a8f36589", "html_url": "https://github.com/rust-lang/rust/commit/58413c09cd52ea4005d6ea7733ba1fb3a8f36589"}, {"sha": "03b96d1ab6d9e35e35b876428f4069bee2c19648", "url": "https://api.github.com/repos/rust-lang/rust/commits/03b96d1ab6d9e35e35b876428f4069bee2c19648", "html_url": "https://github.com/rust-lang/rust/commit/03b96d1ab6d9e35e35b876428f4069bee2c19648"}], "stats": {"total": 111, "additions": 108, "deletions": 3}, "files": [{"sha": "44a39aa265b99c658cc2ec62a035424e7abc45a6", "filename": "src/libcore/default.rs", "status": "modified", "additions": 108, "deletions": 3, "changes": 111, "blob_url": "https://github.com/rust-lang/rust/blob/3f8da69618e9d46d209571cd73686ee0fdc994a8/src%2Flibcore%2Fdefault.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3f8da69618e9d46d209571cd73686ee0fdc994a8/src%2Flibcore%2Fdefault.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fdefault.rs?ref=3f8da69618e9d46d209571cd73686ee0fdc994a8", "patch": "@@ -8,15 +8,104 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-//! The `Default` trait for types which may have meaningful default values\n+//! The `Default` trait for types which may have meaningful default values.\n+//!\n+//! Sometimes, you want to fall back to some kind of default value, and\n+//! don't particularly care what it is. This comes up often with `struct`s\n+//! that define a set of options:\n+//!\n+//! ```\n+//! struct SomeOptions {\n+//!     foo: int,\n+//!     bar: f32,\n+//! }\n+//! ```\n+//!\n+//! How can we define some default values? You can use `Default`:\n+//!\n+//! ```\n+//! use std::default::Default;\n+//!\n+//! #[deriving(Default)]\n+//! struct SomeOptions {\n+//!     foo: int,\n+//!     bar: f32,\n+//! }\n+//!\n+//!\n+//! fn main() {\n+//!     let options: SomeOptions = Default::default();\n+//! }\n+//! ```\n+//!\n+//! Now, you get all of the default values. Rust implements `Default` for various primitives types.\n+//! If you have your own type, you need to implement `Default` yourself:\n+//!\n+//! ```\n+//! use std::default::Default;\n+//!\n+//! enum Kind {\n+//!     A,\n+//!     B,\n+//!     C,\n+//! }\n+//!\n+//! impl Default for Kind {\n+//!     fn default() -> Kind { A }\n+//! }\n+//!\n+//! #[deriving(Default)]\n+//! struct SomeOptions {\n+//!     foo: int,\n+//!     bar: f32,\n+//!     baz: Kind,\n+//! }\n+//!\n+//!\n+//! fn main() {\n+//!     let options: SomeOptions = Default::default();\n+//! }\n+//! ```\n+//!\n+//! If you want to override a particular option, but still retain the other defaults:\n+//!\n+//! ```\n+//! # use std::default::Default;\n+//! # #[deriving(Default)]\n+//! # struct SomeOptions {\n+//! #     foo: int,\n+//! #     bar: f32,\n+//! # }\n+//! fn main() {\n+//!     let options = SomeOptions { foo: 42, ..Default::default() };\n+//! }\n+//! ```\n \n #![stable]\n \n /// A trait that types which have a useful default value should implement.\n+///\n+/// A struct can derive default implementations of `Default` for basic types using\n+/// `#[deriving(Default)]`.\n+///\n+/// # Examples\n+///\n+/// ```\n+/// #[deriving(Default)]\n+/// struct SomeOptions {\n+///     foo: int,\n+///     bar: f32,\n+/// }\n+/// ```\n pub trait Default {\n-    /// Return the \"default value\" for a type.\n+    /// Returns the \"default value\" for a type.\n     ///\n-    /// # Example\n+    /// Default values are often some kind of initial value, identity value, or anything else that\n+    /// may make sense as a default.\n+    ///\n+    /// # Examples\n+    ///\n+    /// Using built-in default values:\n     ///\n     /// ```\n     /// use std::default::Default;\n@@ -25,6 +114,22 @@ pub trait Default {\n     /// let (x, y): (Option<String>, f64) = Default::default();\n     /// let (a, b, (c, d)): (int, uint, (bool, bool)) = Default::default();\n     /// ```\n+    ///\n+    /// Making your own:\n+    ///\n+    /// ```\n+    /// use std::default::Default;\n+    ///\n+    /// enum Kind {\n+    ///     A,\n+    ///     B,\n+    ///     C,\n+    /// }\n+    ///\n+    /// impl Default for Kind {\n+    ///     fn default() -> Kind { A }\n+    /// }\n+    /// ```\n     fn default() -> Self;\n }\n "}]}