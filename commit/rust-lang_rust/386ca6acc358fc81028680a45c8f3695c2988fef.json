{"sha": "386ca6acc358fc81028680a45c8f3695c2988fef", "node_id": "C_kwDOAAsO6NoAKDM4NmNhNmFjYzM1OGZjODEwMjg2ODBhNDVjOGYzNjk1YzI5ODhmZWY", "commit": {"author": {"name": "gimbles", "email": "yusharora@protonmail.com", "date": "2022-04-10T15:21:11Z"}, "committer": {"name": "gimbles", "email": "yusharora@protonmail.com", "date": "2022-04-10T15:21:11Z"}, "message": "Allow usage of sudo while not accessing root", "tree": {"sha": "a967523a285fea656761636475d74daf44de7c21", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a967523a285fea656761636475d74daf44de7c21"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/386ca6acc358fc81028680a45c8f3695c2988fef", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/386ca6acc358fc81028680a45c8f3695c2988fef", "html_url": "https://github.com/rust-lang/rust/commit/386ca6acc358fc81028680a45c8f3695c2988fef", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/386ca6acc358fc81028680a45c8f3695c2988fef/comments", "author": null, "committer": null, "parents": [{"sha": "949b98cab8a186b98bf87e64374b8d0848c55271", "url": "https://api.github.com/repos/rust-lang/rust/commits/949b98cab8a186b98bf87e64374b8d0848c55271", "html_url": "https://github.com/rust-lang/rust/commit/949b98cab8a186b98bf87e64374b8d0848c55271"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "927e686070f2942c3dcaa1fa6b64f72116b8eec4", "filename": "src/bootstrap/bootstrap.py", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/386ca6acc358fc81028680a45c8f3695c2988fef/src%2Fbootstrap%2Fbootstrap.py", "raw_url": "https://github.com/rust-lang/rust/raw/386ca6acc358fc81028680a45c8f3695c2988fef/src%2Fbootstrap%2Fbootstrap.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbootstrap.py?ref=386ca6acc358fc81028680a45c8f3695c2988fef", "patch": "@@ -1161,9 +1161,9 @@ def check_vendored_status(self):\n         \"\"\"Check that vendoring is configured properly\"\"\"\n         vendor_dir = os.path.join(self.rust_root, 'vendor')\n         if 'SUDO_USER' in os.environ and not self.use_vendored_sources:\n-            if os.environ.get('USER') != os.environ['SUDO_USER']:\n+            if os.getuid() == 0:\n                 self.use_vendored_sources = True\n-                print('info: looks like you are running this command under `sudo`')\n+                print('info: looks like you\\'re trying to run this command as root')\n                 print('      and so in order to preserve your $HOME this will now')\n                 print('      use vendored sources by default.')\n                 if not os.path.exists(vendor_dir):"}]}