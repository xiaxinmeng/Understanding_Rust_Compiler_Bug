{"sha": "9faaf9eaf499d6184df18e9fb09235de46b659b5", "node_id": "MDY6Q29tbWl0NzI0NzEyOjlmYWFmOWVhZjQ5OWQ2MTg0ZGYxOGU5ZmIwOTIzNWRlNDZiNjU5YjU=", "commit": {"author": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2010-08-11T21:28:01Z"}, "committer": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2010-08-11T21:28:01Z"}, "message": "Tidy up run script.", "tree": {"sha": "b9994bf15d55226ec8de541a643a7c84227e2830", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b9994bf15d55226ec8de541a643a7c84227e2830"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9faaf9eaf499d6184df18e9fb09235de46b659b5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9faaf9eaf499d6184df18e9fb09235de46b659b5", "html_url": "https://github.com/rust-lang/rust/commit/9faaf9eaf499d6184df18e9fb09235de46b659b5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9faaf9eaf499d6184df18e9fb09235de46b659b5/comments", "author": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "committer": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bf341f829bd71aeb5e0a9ee2b7b32c7d42e08564", "url": "https://api.github.com/repos/rust-lang/rust/commits/bf341f829bd71aeb5e0a9ee2b7b32c7d42e08564", "html_url": "https://github.com/rust-lang/rust/commit/bf341f829bd71aeb5e0a9ee2b7b32c7d42e08564"}], "stats": {"total": 15, "additions": 9, "deletions": 6}, "files": [{"sha": "247a90bcef731fd5547a57fa8cf3ed3f6694a1ca", "filename": "src/run.py", "status": "modified", "additions": 9, "deletions": 6, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/9faaf9eaf499d6184df18e9fb09235de46b659b5/src%2Frun.py", "raw_url": "https://github.com/rust-lang/rust/raw/9faaf9eaf499d6184df18e9fb09235de46b659b5/src%2Frun.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frun.py?ref=9faaf9eaf499d6184df18e9fb09235de46b659b5", "patch": "@@ -1,3 +1,5 @@\n+#!/usr/bin/python\n+\n import os\n import sys\n import time\n@@ -14,16 +16,16 @@\n \n parser = OptionParser()\n parser.set_usage(\"run.py [options] pattern : run.py -n 100 \\\"bas*\\\" -q\");\n-parser.add_option(\"-n\", dest=\"repetitions\", \n+parser.add_option(\"-n\", dest=\"repetitions\",\n                   help=\"number of repetitions\", metavar=\"NUMBER\")\n-parser.add_option(\"-q\", action=\"store_true\", dest=\"quiet\", default=False, \n+parser.add_option(\"-q\", action=\"store_true\", dest=\"quiet\", default=False,\n                   help=\"suppresses rust log output\")\n-parser.add_option(\"-p\", action=\"store_true\", dest=\"printSource\", \n+parser.add_option(\"-p\", action=\"store_true\", dest=\"printSource\",\n                   default=False, help=\"prints the test case's source\")\n parser.add_option(\"-s\", dest=\"seed\", metavar=\"NUMBER\", default=-1,\n                   help=\"seeds the rust scheduler, use -1 to generate seeds, \"\n                   + \" or >= 0 to specify a seed\")\n-                  \n+\n (options, args) = parser.parse_args()\n \n def getRustTests(filter):\n@@ -41,7 +43,7 @@ def getRustTests(filter):\n \n tests = getRustTests(args[0]);\n \n-# Make \n+# Make\n for rustProgram in tests:\n     print \"Making: \" + rustProgram;\n     result = os.system(\"make \" + rustProgram.replace(\".rs\", \".x86\")) >> 8;\n@@ -54,6 +56,7 @@ def getRustTests(filter):\n \n # Rut\n totalPassed = 0;\n+repetitions = 1;\n for rustProgram in tests:\n     repetitions = 1;\n     if (options.repetitions):\n@@ -78,4 +81,4 @@ def getRustTests(filter):\n           \" of \" + str(repetitions) + \" passed.\";\n     totalPassed += passed;\n print \"Total: \" + str(totalPassed) + \" of \" + \\\n-      str(len(tests) * repetitions) + \" passed.\"\n\\ No newline at end of file\n+      str(len(tests) * repetitions) + \" passed.\""}]}