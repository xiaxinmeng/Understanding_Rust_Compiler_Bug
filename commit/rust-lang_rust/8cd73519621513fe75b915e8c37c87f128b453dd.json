{"sha": "8cd73519621513fe75b915e8c37c87f128b453dd", "node_id": "C_kwDOAAsO6NoAKDhjZDczNTE5NjIxNTEzZmU3NWI5MTVlOGMzN2M4N2YxMjhiNDUzZGQ", "commit": {"author": {"name": "Linus F\u00e4rnstrand", "email": "faern@faern.net", "date": "2020-11-03T00:08:31Z"}, "committer": {"name": "Linus F\u00e4rnstrand", "email": "faern@faern.net", "date": "2022-06-23T19:01:58Z"}, "message": "Remove ntohs/htons in favor of to_be/from_be", "tree": {"sha": "611e71e316a5a897d63821b65f1764a454154130", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/611e71e316a5a897d63821b65f1764a454154130"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8cd73519621513fe75b915e8c37c87f128b453dd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8cd73519621513fe75b915e8c37c87f128b453dd", "html_url": "https://github.com/rust-lang/rust/commit/8cd73519621513fe75b915e8c37c87f128b453dd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8cd73519621513fe75b915e8c37c87f128b453dd/comments", "author": {"login": "faern", "id": 332294, "node_id": "MDQ6VXNlcjMzMjI5NA==", "avatar_url": "https://avatars.githubusercontent.com/u/332294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/faern", "html_url": "https://github.com/faern", "followers_url": "https://api.github.com/users/faern/followers", "following_url": "https://api.github.com/users/faern/following{/other_user}", "gists_url": "https://api.github.com/users/faern/gists{/gist_id}", "starred_url": "https://api.github.com/users/faern/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/faern/subscriptions", "organizations_url": "https://api.github.com/users/faern/orgs", "repos_url": "https://api.github.com/users/faern/repos", "events_url": "https://api.github.com/users/faern/events{/privacy}", "received_events_url": "https://api.github.com/users/faern/received_events", "type": "User", "site_admin": false}, "committer": {"login": "faern", "id": 332294, "node_id": "MDQ6VXNlcjMzMjI5NA==", "avatar_url": "https://avatars.githubusercontent.com/u/332294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/faern", "html_url": "https://github.com/faern", "followers_url": "https://api.github.com/users/faern/followers", "following_url": "https://api.github.com/users/faern/following{/other_user}", "gists_url": "https://api.github.com/users/faern/gists{/gist_id}", "starred_url": "https://api.github.com/users/faern/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/faern/subscriptions", "organizations_url": "https://api.github.com/users/faern/orgs", "repos_url": "https://api.github.com/users/faern/repos", "events_url": "https://api.github.com/users/faern/events{/privacy}", "received_events_url": "https://api.github.com/users/faern/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2e6256b2431c3b3713fa33ab46f293dbd07dec93", "url": "https://api.github.com/repos/rust-lang/rust/commits/2e6256b2431c3b3713fa33ab46f293dbd07dec93", "html_url": "https://github.com/rust-lang/rust/commit/2e6256b2431c3b3713fa33ab46f293dbd07dec93"}], "stats": {"total": 19, "additions": 5, "deletions": 14}, "files": [{"sha": "4b5c5d03465be5f2b940c0c72201e8e4d1436a28", "filename": "library/std/src/net/addr.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/8cd73519621513fe75b915e8c37c87f128b453dd/library%2Fstd%2Fsrc%2Fnet%2Faddr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8cd73519621513fe75b915e8c37c87f128b453dd/library%2Fstd%2Fsrc%2Fnet%2Faddr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fnet%2Faddr.rs?ref=8cd73519621513fe75b915e8c37c87f128b453dd", "patch": "@@ -7,7 +7,7 @@ use crate::hash;\n use crate::io::{self, Write};\n use crate::iter;\n use crate::mem;\n-use crate::net::{htons, ntohs, IpAddr, Ipv4Addr, Ipv6Addr};\n+use crate::net::{IpAddr, Ipv4Addr, Ipv6Addr};\n use crate::option;\n use crate::slice;\n use crate::sys::net::netc as c;\n@@ -528,15 +528,15 @@ impl SocketAddrV6 {\n \n impl FromInner<c::sockaddr_in> for SocketAddrV4 {\n     fn from_inner(addr: c::sockaddr_in) -> SocketAddrV4 {\n-        SocketAddrV4 { ip: Ipv4Addr::from_inner(addr.sin_addr), port: ntohs(addr.sin_port) }\n+        SocketAddrV4 { ip: Ipv4Addr::from_inner(addr.sin_addr), port: u16::from_be(addr.sin_port) }\n     }\n }\n \n impl FromInner<c::sockaddr_in6> for SocketAddrV6 {\n     fn from_inner(addr: c::sockaddr_in6) -> SocketAddrV6 {\n         SocketAddrV6 {\n             ip: Ipv6Addr::from_inner(addr.sin6_addr),\n-            port: ntohs(addr.sin6_port),\n+            port: u16::from_be(addr.sin6_port),\n             flowinfo: addr.sin6_flowinfo,\n             scope_id: addr.sin6_scope_id,\n         }\n@@ -547,7 +547,7 @@ impl IntoInner<c::sockaddr_in> for SocketAddrV4 {\n     fn into_inner(self) -> c::sockaddr_in {\n         c::sockaddr_in {\n             sin_family: c::AF_INET as c::sa_family_t,\n-            sin_port: htons(self.port),\n+            sin_port: self.port.to_be(),\n             sin_addr: self.ip.into_inner(),\n             ..unsafe { mem::zeroed() }\n         }\n@@ -558,7 +558,7 @@ impl IntoInner<c::sockaddr_in6> for SocketAddrV6 {\n     fn into_inner(self) -> c::sockaddr_in6 {\n         c::sockaddr_in6 {\n             sin6_family: c::AF_INET6 as c::sa_family_t,\n-            sin6_port: htons(self.port),\n+            sin6_port: self.port.to_be(),\n             sin6_addr: self.ip.into_inner(),\n             sin6_flowinfo: self.flowinfo,\n             sin6_scope_id: self.scope_id,"}, {"sha": "e7a40bdaf8e9989e66f225cc94fb4aaedda403f8", "filename": "library/std/src/net/mod.rs", "status": "modified", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/8cd73519621513fe75b915e8c37c87f128b453dd/library%2Fstd%2Fsrc%2Fnet%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8cd73519621513fe75b915e8c37c87f128b453dd/library%2Fstd%2Fsrc%2Fnet%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fnet%2Fmod.rs?ref=8cd73519621513fe75b915e8c37c87f128b453dd", "patch": "@@ -69,15 +69,6 @@ pub enum Shutdown {\n     Both,\n }\n \n-#[inline]\n-const fn htons(i: u16) -> u16 {\n-    i.to_be()\n-}\n-#[inline]\n-const fn ntohs(i: u16) -> u16 {\n-    u16::from_be(i)\n-}\n-\n fn each_addr<A: ToSocketAddrs, F, T>(addr: A, mut f: F) -> io::Result<T>\n where\n     F: FnMut(io::Result<&SocketAddr>) -> io::Result<T>,"}]}