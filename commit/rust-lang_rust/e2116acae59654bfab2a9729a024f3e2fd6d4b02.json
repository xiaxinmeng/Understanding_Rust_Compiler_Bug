{"sha": "e2116acae59654bfab2a9729a024f3e2fd6d4b02", "node_id": "C_kwDOAAsO6NoAKGUyMTE2YWNhZTU5NjU0YmZhYjJhOTcyOWEwMjRmM2UyZmQ2ZDRiMDI", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-12-05T18:35:43Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-12-05T18:35:43Z"}, "message": "Auto merge of #91356 - GuillaumeGomez:improve-rustdoc-layout, r=jsha\n\nImprove rustdoc layout\n\nThis is an overtake of https://github.com/rust-lang/rust/pull/89385 originally written by `@cynecx.`\n\nI kept the original commit and simply added the missing fixes into a new one. You can test it online [here](https://rustdoc.crud.net/imperio/improve-rustdoc-layout/std/index.html).\n\nr? `@jsha`", "tree": {"sha": "acf2e464a8cda6c81c8bee7b12489ac8991210ba", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/acf2e464a8cda6c81c8bee7b12489ac8991210ba"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e2116acae59654bfab2a9729a024f3e2fd6d4b02", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e2116acae59654bfab2a9729a024f3e2fd6d4b02", "html_url": "https://github.com/rust-lang/rust/commit/e2116acae59654bfab2a9729a024f3e2fd6d4b02", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e2116acae59654bfab2a9729a024f3e2fd6d4b02/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "772d51f887fa407216860bf8ecf3f1a32fb795b4", "url": "https://api.github.com/repos/rust-lang/rust/commits/772d51f887fa407216860bf8ecf3f1a32fb795b4", "html_url": "https://github.com/rust-lang/rust/commit/772d51f887fa407216860bf8ecf3f1a32fb795b4"}, {"sha": "d7528e2157762fadb9665518fd1e4dee6d6a2809", "url": "https://api.github.com/repos/rust-lang/rust/commits/d7528e2157762fadb9665518fd1e4dee6d6a2809", "html_url": "https://github.com/rust-lang/rust/commit/d7528e2157762fadb9665518fd1e4dee6d6a2809"}], "stats": {"total": 580, "additions": 343, "deletions": 237}, "files": [{"sha": "545b409175ee6e03d7397be71cd80b0d28fb2ff0", "filename": "src/librustdoc/html/markdown.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs?ref=e2116acae59654bfab2a9729a024f3e2fd6d4b02", "patch": "@@ -1447,7 +1447,7 @@ fn init_id_map() -> FxHashMap<String, usize> {\n     map.insert(\"theme-choices\".to_owned(), 1);\n     map.insert(\"settings-menu\".to_owned(), 1);\n     map.insert(\"help-button\".to_owned(), 1);\n-    map.insert(\"main\".to_owned(), 1);\n+    map.insert(\"main-content\".to_owned(), 1);\n     map.insert(\"search\".to_owned(), 1);\n     map.insert(\"crate-search\".to_owned(), 1);\n     map.insert(\"render-detail\".to_owned(), 1);"}, {"sha": "d4af3663b624af5b7cded2b37ffe2ab5242914ac", "filename": "src/librustdoc/html/markdown/tests.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Flibrustdoc%2Fhtml%2Fmarkdown%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Flibrustdoc%2Fhtml%2Fmarkdown%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fmarkdown%2Ftests.rs?ref=e2116acae59654bfab2a9729a024f3e2fd6d4b02", "patch": "@@ -12,7 +12,7 @@ fn test_unique_id() {\n         \"examples\",\n         \"method.into_iter\",\n         \"foo\",\n-        \"main\",\n+        \"main-content\",\n         \"search\",\n         \"methods\",\n         \"examples\",\n@@ -28,7 +28,7 @@ fn test_unique_id() {\n         \"examples-2\",\n         \"method.into_iter-1\",\n         \"foo-1\",\n-        \"main-1\",\n+        \"main-content-1\",\n         \"search-1\",\n         \"methods\",\n         \"examples-3\",\n@@ -219,8 +219,8 @@ fn test_header_ids_multiple_blocks() {\n     );\n     t(\n         &mut map,\n-        \"# Main\",\n-        \"<h2 id=\\\"main-1\\\" class=\\\"section-header\\\"><a href=\\\"#main-1\\\">Main</a></h2>\",\n+        \"# Search\",\n+        \"<h2 id=\\\"search-1\\\" class=\\\"section-header\\\"><a href=\\\"#search-1\\\">Search</a></h2>\",\n     );\n     t(\n         &mut map,"}, {"sha": "e35358c56499398581bb215cb3542f0244f7a033", "filename": "src/librustdoc/html/static/css/noscript.css", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fnoscript.css", "raw_url": "https://github.com/rust-lang/rust/raw/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fnoscript.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fnoscript.css?ref=e2116acae59654bfab2a9729a024f3e2fd6d4b02", "patch": "@@ -4,7 +4,7 @@ of content is hidden by default (depending on the settings too), we have to over\n rules.\n */\n \n-#main .attributes {\n+#main-content .attributes {\n \t/* Since there is no toggle (the \"[-]\") when JS is disabled, no need for this margin either. */\n \tmargin-left: 0 !important;\n }"}, {"sha": "79c7626ffc4bd38319a9c45c68cd6ee91fe1c909", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 195, "deletions": 97, "changes": 292, "blob_url": "https://github.com/rust-lang/rust/blob/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=e2116acae59654bfab2a9729a024f3e2fd6d4b02", "patch": "@@ -111,7 +111,6 @@ body {\n \tfont: 16px/1.4 \"Source Serif 4\", NanumBarunGothic, serif;\n \tmargin: 0;\n \tposition: relative;\n-\tpadding: 10px 15px 20px 15px;\n \n \t-webkit-font-feature-settings: \"kern\", \"liga\";\n \t-moz-font-feature-settings: \"kern\", \"liga\";\n@@ -202,7 +201,7 @@ details.rustdoc-toggle > summary::before,\n div.impl-items > div:not(.docblock):not(.item-info),\n .content ul.crate a.crate, a.srclink,\n /* This selector is for the items listed in the \"all items\" page. */\n-#main > ul.docblock > li > a {\n+#main-content > ul.docblock > li > a {\n \tfont-family: \"Fira Sans\", Arial, NanumBarunGothic, sans-serif;\n }\n \n@@ -248,6 +247,32 @@ textarea {\n \n /* end tweaks for normalize.css 8 */\n \n+.rustdoc {\n+\tdisplay: flex;\n+\tflex-direction: row;\n+\tflex-wrap: nowrap;\n+}\n+\n+main {\n+\tposition: relative;\n+\tflex-grow: 1;\n+\tpadding: 10px 15px 40px 45px;\n+\tmin-width: 0;\n+}\n+\n+.source main {\n+\tpadding: 15px;\n+}\n+\n+.width-limiter {\n+\tmax-width: 960px;\n+\tmargin-right: auto;\n+}\n+\n+.source .width-limiter {\n+\tmax-width: unset;\n+}\n+\n details:not(.rustdoc-toggle) summary {\n \tmargin-bottom: .6em;\n }\n@@ -285,28 +310,75 @@ li {\n }\n \n .source .content {\n-\tmargin-top: 50px;\n \tmax-width: none;\n \toverflow: visible;\n \tmargin-left: 0px;\n }\n \n nav.sub {\n+\tposition: relative;\n \tfont-size: 16px;\n \ttext-transform: uppercase;\n }\n \n+.sub-container {\n+\tdisplay: flex;\n+\tflex-direction: row;\n+\tflex-wrap: nowrap;\n+}\n+\n+.sub-logo-container {\n+\tdisplay: none;\n+\tmargin-right: 20px;\n+}\n+\n+.source .sub-logo-container {\n+\tdisplay: block;\n+}\n+\n+.source .sub-logo-container > img {\n+\theight: 60px;\n+\twidth: 60px;\n+\tobject-fit: contain;\n+}\n+\n .sidebar {\n \twidth: 200px;\n-\tposition: fixed;\n-\tleft: 0;\n-\ttop: 0;\n-\tbottom: 0;\n \toverflow-y: scroll;\n+\tposition: sticky;\n+\tmin-width: 200px;\n+\theight: 100vh;\n+\ttop: 0;\n+\tleft: 0;\n }\n \n .rustdoc.source .sidebar {\n+\twidth: 50px;\n+\tmin-width: 0px;\n+\tmax-width: 300px;\n+\tflex-grow: 0;\n+\tflex-shrink: 0;\n+\tflex-basis: auto;\n+\tborder-right: 1px solid;\n+\toverflow-x: hidden;\n+\t/* The sidebar is by default hidden  */\n+\toverflow-y: hidden;\n+}\n+\n+.source .sidebar > *:not(:first-child) {\n+\ttransition: opacity 0.5s, visibility 0.2s;\n+\topacity: 0;\n+\tvisibility: hidden;\n+}\n+\n+.source .sidebar.expanded {\n \toverflow-y: auto;\n+\twidth: 300px;\n+}\n+\n+.source .sidebar.expanded > * {\n+\topacity: 1;\n+\tvisibility: visible;\n }\n \n /* Improve the scrollbar display on firefox */\n@@ -332,34 +404,22 @@ nav.sub {\n \tmargin-right: -10px;\n }\n \n-.content, nav {\n-\tmax-width: 960px;\n-}\n-\n /* Everything else */\n \n .hidden {\n \tdisplay: none !important;\n }\n \n .logo-container {\n-\theight: 100px;\n-\twidth: 100px;\n-\tposition: relative;\n-\tmargin: 20px auto;\n-\tdisplay: block;\n+\tdisplay: flex;\n \tmargin-top: 10px;\n+\tmargin-bottom: 10px;\n+\tjustify-content: center;\n }\n \n .logo-container > img {\n-\tmax-width: 100px;\n-\tmax-height: 100px;\n-\theight: 100%;\n-\tposition: absolute;\n-\tleft: 50%;\n-\ttop: 50%;\n-\ttransform: translate(-50%, -50%);\n-\tdisplay: block;\n+\theight: 100px;\n+\twidth: 100px;\n }\n \n .sidebar .location {\n@@ -439,10 +499,6 @@ nav.sub {\n \tdisplay: none;\n }\n \n-.content {\n-\tpadding: 15px 0;\n-}\n-\n .source .content pre.rust {\n \twhite-space: pre;\n \toverflow: auto;\n@@ -487,7 +543,6 @@ nav.sub {\n }\n \n #search {\n-\tmargin-left: 230px;\n \tposition: relative;\n }\n \n@@ -578,10 +633,10 @@ nav.sub {\n \tdisplay: inline-block;\n }\n \n-#main {\n+#main-content {\n \tposition: relative;\n }\n-#main > .since {\n+#main-content > .since {\n \ttop: inherit;\n \tfont-family: \"Fira Sans\", Arial, sans-serif;\n }\n@@ -700,14 +755,18 @@ nav.sub {\n \tflex-basis: 100%;\n }\n \n-#main > .item-info {\n+#main-content > .item-info {\n \tmargin-top: 0;\n }\n \n nav:not(.sidebar) {\n+\tflex-grow: 1;\n \tborder-bottom: 1px solid;\n \tpadding-bottom: 10px;\n-\tmargin-bottom: 10px;\n+\tmargin-bottom: 25px;\n+}\n+.source nav:not(.sidebar).sub {\n+\tmargin-left: 32px;\n }\n nav.main {\n \tpadding: 20px 0;\n@@ -726,10 +785,6 @@ nav.main .separator {\n nav.sum { text-align: right; }\n nav.sub form { display: inline; }\n \n-nav.sub, .content {\n-\tmargin-left: 230px;\n-}\n-\n a {\n \ttext-decoration: none;\n \tbackground: transparent;\n@@ -802,6 +857,7 @@ h2.small-section-header > .anchor {\n \n .search-container {\n \tposition: relative;\n+\tmax-width: 960px;\n }\n .search-container > div {\n \tdisplay: inline-flex;\n@@ -1320,30 +1376,23 @@ pre.rust {\n }\n \n #sidebar-toggle {\n-\tposition: fixed;\n-\ttop: 30px;\n-\tleft: 300px;\n-\tz-index: 10;\n-\tpadding: 3px;\n-\tborder-top-right-radius: 3px;\n-\tborder-bottom-right-radius: 3px;\n+\tposition: sticky;\n+\ttop: 0;\n+\tleft: 0;\n \tcursor: pointer;\n \tfont-weight: bold;\n-\ttransition: left .5s;\n \tfont-size: 1.2em;\n-\tborder: 1px solid;\n-\tborder-left: 0;\n+\tborder-bottom: 1px solid;\n+\tdisplay: flex;\n+\theight: 40px;\n+\tjustify-content: center;\n+\talign-items: center;\n+\tz-index: 10;\n }\n #source-sidebar {\n-\tposition: fixed;\n-\ttop: 0;\n-\tbottom: 0;\n-\tleft: 0;\n \twidth: 300px;\n \tz-index: 1;\n \toverflow: auto;\n-\ttransition: left .5s;\n-\tborder-right: 1px solid;\n }\n #source-sidebar > .title {\n \tfont-size: 1.5em;\n@@ -1354,8 +1403,8 @@ pre.rust {\n \n .theme-picker {\n \tposition: absolute;\n-\tleft: 211px;\n-\ttop: 19px;\n+\tleft: -34px;\n+\ttop: 9px;\n }\n \n .theme-picker button {\n@@ -1472,10 +1521,10 @@ kbd {\n \tleft: -5px;\n }\n \n-#main > ul {\n+#main-content > ul {\n \tpadding-left: 10px;\n }\n-#main > ul > li {\n+#main-content > ul > li {\n \tlist-style: none;\n }\n \n@@ -1646,21 +1695,62 @@ details.rustdoc-toggle[open] > summary.hideme::after {\n \t.docblock > .information:first-child > .tooltip {\n \t\tmargin-top: 16px;\n \t}\n+\n+\t/* When we expand the sidebar on the source code page, we hide the logo on the left of the\n+\tsearch bar to have more space. */\n+\t.sidebar.expanded + main .width-limiter .sub-logo-container.rust-logo {\n+\t\tdisplay: none;\n+\t}\n+\n+\t/* It doesn't render well on mobile because of the layout, so better only have the transition\n+\ton desktop. */\n+\t.rustdoc.source .sidebar {\n+\t\ttransition: width .5s;\n+\t}\n }\n \n @media (max-width: 700px) {\n \tbody {\n \t\tpadding-top: 0px;\n \t}\n \n-\t.rustdoc > .sidebar {\n+\tmain {\n+\t\tpadding-left: 15px;\n+\t\tpadding-top: 0px;\n+\t}\n+\n+\t.rustdoc {\n+\t\tflex-direction: column;\n+\t}\n+\n+\t.rustdoc:not(.source) > .sidebar {\n+\t\twidth: 100%;\n \t\theight: 45px;\n \t\tmin-height: 40px;\n+\t\tmax-height: 45px;\n \t\tmargin: 0;\n-\t\tmargin-left: -15px;\n \t\tpadding: 0 15px;\n \t\tposition: static;\n \t\tz-index: 11;\n+\t\toverflow-y: hidden;\n+\t}\n+\n+\t.rustdoc.source > .sidebar {\n+\t\tposition: fixed;\n+\t\ttop: 0;\n+\t\tleft: 0;\n+\t\tmargin: 0;\n+\t\tz-index: 11;\n+\t\twidth: 0;\n+\t}\n+\n+\t.sidebar.mobile {\n+\t\tposition: sticky !important;\n+\t\ttop: 0;\n+\t\tleft: 0;\n+\t\twidth: 100%;\n+\t\tmargin-left: 0;\n+\t\tbackground-color: rgba(0,0,0,0);\n \t}\n \n \t.sidebar > .location {\n@@ -1678,7 +1768,7 @@ details.rustdoc-toggle[open] > summary.hideme::after {\n \t\tpadding: 0;\n \t}\n \n-\t.sidebar .logo-container {\n+\t.rustdoc:not(.source) .sidebar .logo-container {\n \t\twidth: 35px;\n \t\theight: 35px;\n \t\tmargin-top: 5px;\n@@ -1699,6 +1789,7 @@ details.rustdoc-toggle[open] > summary.hideme::after {\n \t\tcursor: pointer;\n \t\twidth: 45px;\n \t\tleft: 0;\n+\t\ttop: 0;\n \t\ttext-align: center;\n \t\tdisplay: block;\n \t\tborder-bottom: 1px solid;\n@@ -1748,29 +1839,32 @@ details.rustdoc-toggle[open] > summary.hideme::after {\n \n \tnav.sub {\n \t\twidth: calc(100% - 32px);\n-\t\tfloat: right;\n+\t\tmargin-left: 32px;\n+\t\tmargin-bottom: 10px;\n+\t}\n+\n+\t.source nav:not(.sidebar).sub {\n+\t\tmargin-left: 32px;\n \t}\n \n \t.content {\n \t\tmargin-left: 0px;\n \t}\n \n-\t#main, #search {\n-\t\tmargin-top: 45px;\n-\t\tpadding: 0;\n+\t.source .content {\n+\t\tmargin-top: 10px;\n \t}\n \n \t#search {\n \t\tmargin-left: 0;\n+\t\tpadding: 0;\n \t}\n \n \t.anchor {\n \t\tdisplay: none !important;\n \t}\n \n \t.theme-picker {\n-\t\tleft: 10px;\n-\t\ttop: 54px;\n \t\tz-index: 1;\n \t}\n \n@@ -1789,25 +1883,6 @@ details.rustdoc-toggle[open] > summary.hideme::after {\n \t\theight: 50px;\n \t}\n \n-\t.sidebar.mobile {\n-\t\tposition: fixed;\n-\t\twidth: 100%;\n-\t\tmargin-left: 0;\n-\t\tbackground-color: rgba(0,0,0,0);\n-\t\theight: 100%;\n-\t}\n-\t/*\n-\tThis allows to prevent the version text to overflow the sidebar title on mobile mode when the\n-\tsidebar is displayed (after clicking on the \"hamburger\" button).\n-\t*/\n-\t.sidebar.mobile > div.version {\n-\t\toverflow: hidden;\n-\t\tmax-height: 33px;\n-\t}\n-\t.sidebar {\n-\t\twidth: calc(100% + 30px);\n-\t}\n-\n \t.show-it, .sidebar-elems:focus-within {\n \t\tz-index:  2;\n \t\tleft: 0;\n@@ -1845,28 +1920,41 @@ details.rustdoc-toggle[open] > summary.hideme::after {\n \t\tborder-bottom: 1px solid;\n \t}\n \n-\t#main > details.rustdoc-toggle > summary::before,\n-\t#main > div > details.rustdoc-toggle > summary::before {\n+\t#main-content > details.rustdoc-toggle > summary::before,\n+\t#main-content > div > details.rustdoc-toggle > summary::before {\n \t\tleft: -11px;\n \t}\n \n \t#all-types {\n \t\tmargin: 10px;\n \t}\n \n-\t#sidebar-toggle {\n+\t.sidebar.expanded #sidebar-toggle {\n+\t\tfont-size: 1.5rem;\n+\t}\n+\n+\t.sidebar:not(.expanded) #sidebar-toggle {\n+\t\tposition: fixed;\n+\t\tleft: 1px;\n \t\ttop: 100px;\n \t\twidth: 30px;\n \t\tfont-size: 1.5rem;\n \t\ttext-align: center;\n \t\tpadding: 0;\n+\t\tz-index: 10;\n+\t\tborder-top-right-radius: 3px;\n+\t\tborder-bottom-right-radius: 3px;\n+\t\tcursor: pointer;\n+\t\tfont-weight: bold;\n+\t\tborder: 1px solid;\n+\t\tborder-left: 0;\n \t}\n \n \t#source-sidebar {\n \t\tz-index: 11;\n \t}\n \n-\t#main > .line-numbers {\n+\t#main-content > .line-numbers {\n \t\tmargin-top: 0;\n \t}\n \n@@ -1920,14 +2008,7 @@ details.rustdoc-toggle[open] > summary.hideme::after {\n \t\theight: 73px;\n \t}\n \n-\t/* This is to prevent the search bar from being underneath the <section>\n-\t * element following it.\n-\t */\n-\t#main, #search {\n-\t\tmargin-top: 100px;\n-\t}\n-\n-\t#main > table:not(.table-display) td {\n+\t#main-content > table:not(.table-display) td {\n \t\tword-break: break-word;\n \t\twidth: 50%;\n \t}\n@@ -1969,6 +2050,23 @@ details.rustdoc-toggle[open] > summary.hideme::after {\n \t.docblock code {\n \t\toverflow-wrap: anywhere;\n \t}\n+\n+\t.sub-container {\n+\t\tflex-direction: column;\n+\t}\n+\n+\t.sub-logo-container {\n+\t\talign-self: center;\n+\t}\n+\n+\t.source .sub-logo-container > img {\n+\t\theight: 35px;\n+\t\twidth: 35px;\n+\t}\n+\n+\t.sidebar:not(.expanded) #sidebar-toggle {\n+\t\ttop: 10px;\n+\t}\n }\n \n "}, {"sha": "f4f654f4745268ddb78dc9a270e359898e7846b0", "filename": "src/librustdoc/html/static/css/themes/ayu.css", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "raw_url": "https://github.com/rust-lang/rust/raw/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css?ref=e2116acae59654bfab2a9729a024f3e2fd6d4b02", "patch": "@@ -61,7 +61,7 @@ pre, .rustdoc.source .example-wrap {\n \tbackground-color: #14191f;\n }\n \n-.logo-container.rust-logo > img {\n+.rust-logo > img {\n \tfilter: drop-shadow(1px 0 0px #fff)\n \t\tdrop-shadow(0 1px 0 #fff)\n \t\tdrop-shadow(-1px 0 0 #fff)\n@@ -97,7 +97,7 @@ pre, .rustdoc.source .example-wrap {\n }\n \n .source .sidebar {\n-\tbackground-color: #0f1419;\n+\tbackground-color: #14191f;\n }\n \n .sidebar .location {"}, {"sha": "b10b80203802938682ff7fe8c56c698b3a86b200", "filename": "src/librustdoc/html/static/css/themes/dark.css", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "raw_url": "https://github.com/rust-lang/rust/raw/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css?ref=e2116acae59654bfab2a9729a024f3e2fd6d4b02", "patch": "@@ -32,7 +32,7 @@ pre, .rustdoc.source .example-wrap {\n \tbackground-color: #505050;\n }\n \n-.logo-container.rust-logo > img {\n+.rust-logo > img {\n \tfilter: drop-shadow(1px 0 0px #fff)\n \t\tdrop-shadow(0 1px 0 #fff)\n \t\tdrop-shadow(-1px 0 0 #fff)\n@@ -66,7 +66,7 @@ pre, .rustdoc.source .example-wrap {\n }\n \n .source .sidebar {\n-\tbackground-color: #353535;\n+\tbackground-color: #565656;\n }\n \n .sidebar .location {"}, {"sha": "97f32ac1f7de37b47368fc65c091b7d5a0e8437b", "filename": "src/librustdoc/html/static/css/themes/light.css", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "raw_url": "https://github.com/rust-lang/rust/raw/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css?ref=e2116acae59654bfab2a9729a024f3e2fd6d4b02", "patch": "@@ -43,7 +43,7 @@ pre, .rustdoc.source .example-wrap {\n \tscrollbar-color: rgba(36, 37, 39, 0.6) #d9d9d9;\n }\n \n-.logo-container.rust-logo > img {\n+.rust-logo > img {\n \t/* No need for a border in here! */\n }\n \n@@ -66,7 +66,7 @@ pre, .rustdoc.source .example-wrap {\n }\n \n .source .sidebar {\n-\tbackground-color: #fff;\n+\tbackground-color: #f1f1f1;\n }\n \n .sidebar .location {"}, {"sha": "411a94ef2d1c18ecac3e86d60b143ef4517915e1", "filename": "src/librustdoc/html/static/js/main.js", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fmain.js?ref=e2116acae59654bfab2a9729a024f3e2fd6d4b02", "patch": "@@ -94,6 +94,7 @@ function getVirtualKey(ev) {\n \n var THEME_PICKER_ELEMENT_ID = \"theme-picker\";\n var THEMES_ELEMENT_ID = \"theme-choices\";\n+var MAIN_ID = \"main-content\";\n \n function getThemesElement() {\n     return document.getElementById(THEMES_ELEMENT_ID);\n@@ -362,7 +363,7 @@ function hideThemeButtonState() {\n     }\n \n     var toggleAllDocsId = \"toggle-all-docs\";\n-    var main = document.getElementById(\"main\");\n+    var main = document.getElementById(MAIN_ID);\n     var savedHash = \"\";\n \n     function handleHashes(ev) {\n@@ -787,7 +788,7 @@ function hideThemeButtonState() {\n         } else {\n             addClass(innerToggle, \"will-expand\");\n             onEachLazy(document.getElementsByClassName(\"rustdoc-toggle\"), function(e) {\n-                if (e.parentNode.id !== \"main\" ||\n+                if (e.parentNode.id !== MAIN_ID ||\n                     (!hasClass(e, \"implementors-toggle\") &&\n                      !hasClass(e, \"type-contents-toggle\")))\n                 {\n@@ -1001,7 +1002,7 @@ function hideThemeButtonState() {\n         container.appendChild(rustdoc_version);\n \n         popup.appendChild(container);\n-        insertAfter(popup, searchState.outputElement());\n+        insertAfter(popup, document.querySelector(\"main\"));\n         // So that it's only built once and then it'll do nothing when called!\n         buildHelperPopup = function() {};\n     };"}, {"sha": "81dc0b2fb1eb9d1044c9e32f1af2c1d52845eff1", "filename": "src/librustdoc/html/static/js/source-script.js", "status": "modified", "additions": 14, "deletions": 19, "changes": 33, "blob_url": "https://github.com/rust-lang/rust/blob/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsource-script.js", "raw_url": "https://github.com/rust-lang/rust/raw/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsource-script.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsource-script.js?ref=e2116acae59654bfab2a9729a024f3e2fd6d4b02", "patch": "@@ -77,16 +77,14 @@ function createDirEntry(elem, parent, fullPath, currentFile, hasFoundFile) {\n }\n \n function toggleSidebar() {\n-    var sidebar = document.getElementById(\"source-sidebar\");\n-    var child = this.children[0].children[0];\n+    var sidebar = document.querySelector(\"nav.sidebar\");\n+    var child = this.children[0];\n     if (child.innerText === \">\") {\n-        sidebar.style.left = \"\";\n-        this.style.left = \"\";\n+        sidebar.classList.add(\"expanded\");\n         child.innerText = \"<\";\n         updateLocalStorage(\"rustdoc-source-sidebar-show\", \"true\");\n     } else {\n-        sidebar.style.left = \"-300px\";\n-        this.style.left = \"0\";\n+        sidebar.classList.remove(\"expanded\");\n         child.innerText = \">\";\n         updateLocalStorage(\"rustdoc-source-sidebar-show\", \"false\");\n     }\n@@ -97,20 +95,15 @@ function createSidebarToggle() {\n     sidebarToggle.id = \"sidebar-toggle\";\n     sidebarToggle.onclick = toggleSidebar;\n \n-    var inner1 = document.createElement(\"div\");\n-    inner1.style.position = \"relative\";\n+    var inner = document.createElement(\"div\");\n \n-    var inner2 = document.createElement(\"div\");\n-    inner2.style.paddingTop = \"3px\";\n     if (getCurrentValue(\"rustdoc-source-sidebar-show\") === \"true\") {\n-        inner2.innerText = \"<\";\n+        inner.innerText = \"<\";\n     } else {\n-        inner2.innerText = \">\";\n-        sidebarToggle.style.left = \"0\";\n+        inner.innerText = \">\";\n     }\n \n-    inner1.appendChild(inner2);\n-    sidebarToggle.appendChild(inner1);\n+    sidebarToggle.appendChild(inner);\n     return sidebarToggle;\n }\n \n@@ -120,15 +113,17 @@ function createSourceSidebar() {\n     if (!window.rootPath.endsWith(\"/\")) {\n         window.rootPath += \"/\";\n     }\n-    var main = document.getElementById(\"main\");\n+    var container = document.querySelector(\"nav.sidebar\");\n \n     var sidebarToggle = createSidebarToggle();\n-    main.insertBefore(sidebarToggle, main.firstChild);\n+    container.insertBefore(sidebarToggle, container.firstChild);\n \n     var sidebar = document.createElement(\"div\");\n     sidebar.id = \"source-sidebar\";\n     if (getCurrentValue(\"rustdoc-source-sidebar-show\") !== \"true\") {\n-        sidebar.style.left = \"-300px\";\n+        container.classList.remove(\"expanded\");\n+    } else {\n+        container.classList.add(\"expanded\");\n     }\n \n     var currentFile = getCurrentFilePath();\n@@ -144,7 +139,7 @@ function createSourceSidebar() {\n                                       currentFile, hasFoundFile);\n     });\n \n-    main.insertBefore(sidebar, main.firstChild);\n+    container.insertBefore(sidebar, document.querySelector(\".sidebar-logo\").nextSibling);\n     // Focus on the current file in the source files sidebar.\n     var selected_elem = sidebar.getElementsByClassName(\"selected\")[0];\n     if (typeof selected_elem !== \"undefined\") {"}, {"sha": "3c6f083419aefbf038ffd52e86c843b964c0fb4e", "filename": "src/librustdoc/html/templates/page.html", "status": "modified", "additions": 54, "deletions": 39, "changes": 93, "blob_url": "https://github.com/rust-lang/rust/blob/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fpage.html", "raw_url": "https://github.com/rust-lang/rust/raw/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fpage.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fpage.html?ref=e2116acae59654bfab2a9729a024f3e2fd6d4b02", "patch": "@@ -74,52 +74,67 @@\n     {{- layout.external_html.before_content | safe -}}\n     <nav class=\"sidebar\"> {#- -#}\n         <div class=\"sidebar-menu\" role=\"button\">&#9776;</div> {#- -#}\n-        <a href='{{page.root_path | safe}}{{krate_with_trailing_slash | safe}}index.html'> {#- -#}\n+        <a class=\"sidebar-logo\" href='{{page.root_path | safe}}{{krate_with_trailing_slash | safe}}index.html'> {#- -#}\n             <div class='logo-container rust-logo'> {#- -#}\n-            <img src='\n-                {%- if layout.logo -%}\n-                {{layout.logo}}\n-                {%- else -%}\n-                {{static_root_path | safe}}rust-logo{{page.resource_suffix}}.png\n-                {%- endif -%}\n-                ' alt='logo'> {#- -#}\n+                <img src='\n+                    {%- if layout.logo -%}\n+                    {{layout.logo}}\n+                    {%- else -%}\n+                    {{static_root_path | safe}}rust-logo{{page.resource_suffix}}.png\n+                    {%- endif -%}\n+                    ' alt='logo'> {#- -#}\n             </div> {#- -#}\n         </a> {#- -#}\n         {{- sidebar | safe -}}\n     </nav> {#- -#}\n-    <div class=\"theme-picker\"> {#- -#}\n-        <button id=\"theme-picker\" aria-label=\"Pick another theme!\" aria-haspopup=\"menu\" title=\"themes\"> {#- -#}\n-            <img width=\"18\" height=\"18\" alt=\"Pick another theme!\" {# -#}\n-             src=\"{{static_root_path | safe}}brush{{page.resource_suffix}}.svg\"> {#- -#}\n-        </button> {#- -#}\n-        <div id=\"theme-choices\" role=\"menu\"></div> {#- -#}\n-    </div> {#- -#}\n-    <nav class=\"sub\"> {#- -#}\n-        <form class=\"search-form\"> {#- -#}\n-            <div class=\"search-container\"> {#- -#}\n-                <div>{%- if layout.generate_search_filter -%}\n-                    <select id=\"crate-search\"> {#- -#}\n-                        <option value=\"All crates\">All crates</option> {#- -#}\n-                    </select> {#- -#}\n-                    {%- endif -%}\n-                    <input {# -#}\n-                        class=\"search-input\" {# -#}\n-                        name=\"search\" {# -#}\n-                        autocomplete=\"off\" {# -#}\n-                        spellcheck=\"false\" {# -#}\n-                        placeholder=\"Click or press \u2018S\u2019 to search, \u2018?\u2019 for more options\u2026\" {# -#}\n-                        type=\"search\"> {#- -#}\n-                </div> {#- -#}\n-                <button type=\"button\" id=\"help-button\" title=\"help\">?</button> {#- -#}\n-                <a id=\"settings-menu\" href=\"{{page.root_path | safe}}settings.html\" title=\"settings\"> {#- -#}\n-                    <img width=\"18\" height=\"18\" alt=\"Change settings\" {# -#}\n-                         src=\"{{static_root_path | safe}}wheel{{page.resource_suffix}}.svg\"> {#- -#}\n+    <main> {#- -#}\n+        <div class=\"width-limiter\"> {#- -#}\n+            <div class=\"sub-container\"> {#- -#}\n+                <a class=\"sub-logo-container rust-logo\" href='{{page.root_path | safe}}{{krate_with_trailing_slash | safe}}index.html'> {#- -#}\n+                    <img src='\n+                        {%- if layout.logo -%}\n+                        {{layout.logo}}\n+                        {%- else -%}\n+                        {{static_root_path | safe}}rust-logo{{page.resource_suffix}}.png\n+                        {%- endif -%}\n+                        ' alt='logo'> {#- -#}\n                 </a> {#- -#}\n+                <nav class=\"sub\"> {#- -#}\n+                    <div class=\"theme-picker\"> {#- -#}\n+                        <button id=\"theme-picker\" aria-label=\"Pick another theme!\" aria-haspopup=\"menu\" title=\"themes\"> {#- -#}\n+                            <img width=\"18\" height=\"18\" alt=\"Pick another theme!\" {# -#}\n+                             src=\"{{static_root_path | safe}}brush{{page.resource_suffix}}.svg\"> {#- -#}\n+                        </button> {#- -#}\n+                        <div id=\"theme-choices\" role=\"menu\"></div> {#- -#}\n+                    </div> {#- -#}\n+                    <form class=\"search-form\"> {#- -#}\n+                        <div class=\"search-container\"> {#- -#}\n+                            <div>{%- if layout.generate_search_filter -%}\n+                                <select id=\"crate-search\"> {#- -#}\n+                                    <option value=\"All crates\">All crates</option> {#- -#}\n+                                </select> {#- -#}\n+                                {%- endif -%}\n+                                <input {# -#}\n+                                    class=\"search-input\" {# -#}\n+                                    name=\"search\" {# -#}\n+                                    autocomplete=\"off\" {# -#}\n+                                    spellcheck=\"false\" {# -#}\n+                                    placeholder=\"Click or press \u2018S\u2019 to search, \u2018?\u2019 for more options\u2026\" {# -#}\n+                                    type=\"search\"> {#- -#}\n+                            </div> {#- -#}\n+                            <button type=\"button\" id=\"help-button\" title=\"help\">?</button> {#- -#}\n+                            <a id=\"settings-menu\" href=\"{{page.root_path | safe}}settings.html\" title=\"settings\"> {#- -#}\n+                                <img width=\"18\" height=\"18\" alt=\"Change settings\" {# -#}\n+                                     src=\"{{static_root_path | safe}}wheel{{page.resource_suffix}}.svg\"> {#- -#}\n+                            </a> {#- -#}\n+                        </div> {#- -#}\n+                    </form> {#- -#}\n+                </nav> {#- -#}\n             </div> {#- -#}\n-        </form> {#- -#}\n-    </nav> {#- -#}\n-    <section id=\"main\" class=\"content\">{{- content | safe -}}</section> {#- -#}\n-    <section id=\"search\" class=\"content hidden\"></section> {#- -#}\n+            <section id=\"main-content\" class=\"content\">{{- content | safe -}}</section> {#- -#}\n+            <section id=\"search\" class=\"content hidden\"></section> {#- -#}\n+        </div> {#- -#}\n+    </main> {#- -#}\n     {{- layout.external_html.after_content | safe -}}\n     <div id=\"rustdoc-vars\" {# -#}\n          data-root-path=\"{{page.root_path | safe}}\" {# -#}"}, {"sha": "f6266eba75de7703932366e0e27d0f64b6bb623d", "filename": "src/test/rustdoc-gui/check-code-blocks-margin.goml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc-gui%2Fcheck-code-blocks-margin.goml", "raw_url": "https://github.com/rust-lang/rust/raw/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc-gui%2Fcheck-code-blocks-margin.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fcheck-code-blocks-margin.goml?ref=e2116acae59654bfab2a9729a024f3e2fd6d4b02", "patch": "@@ -1,6 +1,6 @@\n // This test ensures that the docblock elements have the appropriate left margin.\n goto: file://|DOC_PATH|/test_docs/fn.foo.html\n // The top docblock elements shouldn't have left margin...\n-assert-css: (\"#main .docblock.item-decl\", {\"margin-left\": \"0px\"})\n+assert-css: (\"#main-content .docblock.item-decl\", {\"margin-left\": \"0px\"})\n // ... but all the others should!\n-assert-css: (\"#main .docblock:not(.item-decl)\", {\"margin-left\": \"24px\"})\n+assert-css: (\"#main-content .docblock:not(.item-decl)\", {\"margin-left\": \"24px\"})"}, {"sha": "b65c398405cf5e36c12c59047e09715b9f2a9dcb", "filename": "src/test/rustdoc-gui/escape-key.goml", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc-gui%2Fescape-key.goml", "raw_url": "https://github.com/rust-lang/rust/raw/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc-gui%2Fescape-key.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fescape-key.goml?ref=e2116acae59654bfab2a9729a024f3e2fd6d4b02", "patch": "@@ -3,15 +3,15 @@ goto: file://|DOC_PATH|/test_docs/index.html\n write: (\".search-input\", \"test\")\n wait-for: \"#search > h1\" // The search element is empty before the first search \n assert-attribute: (\"#search\", {\"class\": \"content\"})\n-assert-attribute: (\"#main\", {\"class\": \"content hidden\"})\n+assert-attribute: (\"#main-content\", {\"class\": \"content hidden\"})\n press-key: \"Escape\"\n assert-attribute: (\"#search\", {\"class\": \"content hidden\"})\n-assert-attribute: (\"#main\", {\"class\": \"content\"})\n+assert-attribute: (\"#main-content\", {\"class\": \"content\"})\n \n // Check that focusing the search input brings back the search results\n focus: \".search-input\"\n assert-attribute: (\"#search\", {\"class\": \"content\"})\n-assert-attribute: (\"#main\", {\"class\": \"content hidden\"})\n+assert-attribute: (\"#main-content\", {\"class\": \"content hidden\"})\n \n // Now let's check that when the help popup is displayed and we press Escape, it doesn't\n // hide the search results too.\n@@ -20,7 +20,7 @@ assert-attribute: (\"#help\", {\"class\": \"\"})\n press-key: \"Escape\"\n assert-attribute: (\"#help\", {\"class\": \"hidden\"})\n assert-attribute: (\"#search\", {\"class\": \"content\"})\n-assert-attribute: (\"#main\", {\"class\": \"content hidden\"})\n+assert-attribute: (\"#main-content\", {\"class\": \"content hidden\"})\n \n // Check that Escape hides the search results when a search result is focused.\n focus: \".search-input\"\n@@ -31,4 +31,4 @@ assert: \"#results a:focus\"\n press-key: \"Escape\"\n assert-attribute: (\"#help\", {\"class\": \"hidden\"})\n assert-attribute: (\"#search\", {\"class\": \"content hidden\"})\n-assert-attribute: (\"#main\", {\"class\": \"content\"})\n+assert-attribute: (\"#main-content\", {\"class\": \"content\"})"}, {"sha": "7c4496dc0cabc71e12f424e1e48101baa9907dac", "filename": "src/test/rustdoc-gui/impl-default-expansion.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc-gui%2Fimpl-default-expansion.goml", "raw_url": "https://github.com/rust-lang/rust/raw/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc-gui%2Fimpl-default-expansion.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fimpl-default-expansion.goml?ref=e2116acae59654bfab2a9729a024f3e2fd6d4b02", "patch": "@@ -1,3 +1,3 @@\n // This test ensures that the impl blocks are open by default.\n goto: file://|DOC_PATH|/test_docs/struct.Foo.html\n-assert-attribute: (\"#main > details.implementors-toggle\", {\"open\": \"\"})\n+assert-attribute: (\"#main-content > details.implementors-toggle\", {\"open\": \"\"})"}, {"sha": "cadd7f6a3f3b54849c63eeea138a73d917c60aa9", "filename": "src/test/rustdoc-gui/search-result-go-to-first.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc-gui%2Fsearch-result-go-to-first.goml", "raw_url": "https://github.com/rust-lang/rust/raw/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc-gui%2Fsearch-result-go-to-first.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsearch-result-go-to-first.goml?ref=e2116acae59654bfab2a9729a024f3e2fd6d4b02", "patch": "@@ -11,7 +11,7 @@ goto: file://|DOC_PATH|/test_docs/index.html?search=struct%3AFoo\n wait-for: \"#titles\"\n assert-text-false: (\".fqn .in-band\", \"Struct test_docs::Foo\")\n // Ensure that the search results are displayed, not the \"normal\" content.\n-assert-css: (\"#main\", {\"display\": \"none\"})\n+assert-css: (\"#main-content\", {\"display\": \"none\"})\n \n // Now we can check that the feature is working as expected!\n goto: file://|DOC_PATH|/test_docs/index.html?search=struct%3AFoo&go_to_first=true"}, {"sha": "f3682f59d2141c758d720f2d9f0e667d5e74bd25", "filename": "src/test/rustdoc-gui/source-code-page.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc-gui%2Fsource-code-page.goml", "raw_url": "https://github.com/rust-lang/rust/raw/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc-gui%2Fsource-code-page.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsource-code-page.goml?ref=e2116acae59654bfab2a9729a024f3e2fd6d4b02", "patch": "@@ -1,6 +1,6 @@\n goto: file://|DOC_PATH|/src/test_docs/lib.rs.html\n // Check that we can click on the line number.\n-click: (40, 224) // This is the position of the span for line 4.\n+click: \".line-numbers > span:nth-child(4)\" // This is the span for line 4.\n // Unfortunately, \"#4\" isn't a valid query selector, so we have to go around that limitation\n // by instead getting the nth span.\n assert-attribute: (\".line-numbers > span:nth-child(4)\", {\"class\": \"line-highlighted\"})"}, {"sha": "eaa4c554d5a0fa9b2d9d9b4572faa9a7014ff9ed", "filename": "src/test/rustdoc-gui/toggle-docs.goml", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc-gui%2Ftoggle-docs.goml", "raw_url": "https://github.com/rust-lang/rust/raw/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc-gui%2Ftoggle-docs.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Ftoggle-docs.goml?ref=e2116acae59654bfab2a9729a024f3e2fd6d4b02", "patch": "@@ -1,10 +1,10 @@\n goto: file://|DOC_PATH|/test_docs/index.html\n-assert-attribute: (\"#main > details.top-doc\", {\"open\": \"\"})\n+assert-attribute: (\"#main-content > details.top-doc\", {\"open\": \"\"})\n click: \"#toggle-all-docs\"\n wait-for: 1000\n // This is now collapsed so there shouldn't be the \"open\" attribute on details.\n-assert-attribute-false: (\"#main > details.top-doc\", {\"open\": \"\"})\n+assert-attribute-false: (\"#main-content > details.top-doc\", {\"open\": \"\"})\n click: \"#toggle-all-docs\"\n wait-for: 1000\n // Not collapsed anymore so the \"open\" attribute should be back.\n-assert-attribute: (\"#main > details.top-doc\", {\"open\": \"\"})\n+assert-attribute: (\"#main-content > details.top-doc\", {\"open\": \"\"})"}, {"sha": "bb24d0ce792545ad8d1a9ffd3d01286782e958f2", "filename": "src/test/rustdoc-gui/type-declation-overflow.goml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc-gui%2Ftype-declation-overflow.goml", "raw_url": "https://github.com/rust-lang/rust/raw/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc-gui%2Ftype-declation-overflow.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Ftype-declation-overflow.goml?ref=e2116acae59654bfab2a9729a024f3e2fd6d4b02", "patch": "@@ -11,7 +11,7 @@ assert-property: (\".item-decl pre\", {\"scrollWidth\": \"1324\"})\n goto: file://|DOC_PATH|/lib2/too_long/type.ReallyLongTypeNameLongLongLong.html\n assert-property: (\"body\", {\"scrollWidth\": \"1100\"})\n // We now check that the section width hasn't grown because of it.\n-assert-property: (\"#main\", {\"scrollWidth\": \"840\"})\n+assert-property: (\"#main-content\", {\"scrollWidth\": \"840\"})\n // And now checking that it has scrollable content.\n assert-property: (\".item-decl pre\", {\"scrollWidth\": \"1103\"})\n \n@@ -20,6 +20,6 @@ assert-property: (\".item-decl pre\", {\"scrollWidth\": \"1103\"})\n goto: file://|DOC_PATH|/lib2/too_long/constant.ReallyLongTypeNameLongLongLongConstBecauseWhyNotAConstRightGigaGigaSupraLong.html\n assert-property: (\"body\", {\"scrollWidth\": \"1100\"})\n // We now check that the section width hasn't grown because of it.\n-assert-property: (\"#main\", {\"scrollWidth\": \"840\"})\n+assert-property: (\"#main-content\", {\"scrollWidth\": \"840\"})\n // And now checking that it has scrollable content.\n assert-property: (\".item-decl pre\", {\"scrollWidth\": \"950\"})"}, {"sha": "9465c8a35c886f83e6681b4eb70c963b68ee47f3", "filename": "src/test/rustdoc/doc-cfg.rs", "status": "modified", "additions": 10, "deletions": 10, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc%2Fdoc-cfg.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc%2Fdoc-cfg.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fdoc-cfg.rs?ref=e2116acae59654bfab2a9729a024f3e2fd6d4b02", "patch": "@@ -2,30 +2,30 @@\n #![feature(target_feature, cfg_target_feature)]\n \n // @has doc_cfg/struct.Portable.html\n-// @!has - '//*[@id=\"main\"]/*[@class=\"item-info\"]/*[@class=\"stab portability\"]' ''\n+// @!has - '//*[@id=\"main-content\"]/*[@class=\"item-info\"]/*[@class=\"stab portability\"]' ''\n // @has - '//*[@id=\"method.unix_and_arm_only_function\"]' 'fn unix_and_arm_only_function()'\n // @has - '//*[@class=\"stab portability\"]' 'This is supported on Unix and ARM only.'\n // @has - '//*[@id=\"method.wasi_and_wasm32_only_function\"]' 'fn wasi_and_wasm32_only_function()'\n // @has - '//*[@class=\"stab portability\"]' 'This is supported on WASI and WebAssembly only.'\n pub struct Portable;\n \n // @has doc_cfg/unix_only/index.html \\\n-//  '//*[@id=\"main\"]/*[@class=\"item-info\"]/*[@class=\"stab portability\"]' \\\n+//  '//*[@id=\"main-content\"]/*[@class=\"item-info\"]/*[@class=\"stab portability\"]' \\\n //  'This is supported on Unix only.'\n // @matches - '//*[@class=\"item-left module-item\"]//*[@class=\"stab portability\"]' '\\AARM\\Z'\n // @count - '//*[@class=\"stab portability\"]' 2\n #[doc(cfg(unix))]\n pub mod unix_only {\n     // @has doc_cfg/unix_only/fn.unix_only_function.html \\\n-    //  '//*[@id=\"main\"]/*[@class=\"item-info\"]/*[@class=\"stab portability\"]' \\\n+    //  '//*[@id=\"main-content\"]/*[@class=\"item-info\"]/*[@class=\"stab portability\"]' \\\n     //  'This is supported on Unix only.'\n     // @count - '//*[@class=\"stab portability\"]' 1\n     pub fn unix_only_function() {\n         content::should::be::irrelevant();\n     }\n \n     // @has doc_cfg/unix_only/trait.ArmOnly.html \\\n-    //  '//*[@id=\"main\"]/*[@class=\"item-info\"]/*[@class=\"stab portability\"]' \\\n+    //  '//*[@id=\"main-content\"]/*[@class=\"item-info\"]/*[@class=\"stab portability\"]' \\\n     //  'This is supported on Unix and ARM only.'\n     // @count - '//*[@class=\"stab portability\"]' 1\n     #[doc(cfg(target_arch = \"arm\"))]\n@@ -40,22 +40,22 @@ pub mod unix_only {\n }\n \n // @has doc_cfg/wasi_only/index.html \\\n-//  '//*[@id=\"main\"]/*[@class=\"item-info\"]/*[@class=\"stab portability\"]' \\\n+//  '//*[@id=\"main-content\"]/*[@class=\"item-info\"]/*[@class=\"stab portability\"]' \\\n //  'This is supported on WASI only.'\n // @matches - '//*[@class=\"item-left module-item\"]//*[@class=\"stab portability\"]' '\\AWebAssembly\\Z'\n // @count - '//*[@class=\"stab portability\"]' 2\n #[doc(cfg(target_os = \"wasi\"))]\n pub mod wasi_only {\n     // @has doc_cfg/wasi_only/fn.wasi_only_function.html \\\n-    //  '//*[@id=\"main\"]/*[@class=\"item-info\"]/*[@class=\"stab portability\"]' \\\n+    //  '//*[@id=\"main-content\"]/*[@class=\"item-info\"]/*[@class=\"stab portability\"]' \\\n     //  'This is supported on WASI only.'\n     // @count - '//*[@class=\"stab portability\"]' 1\n     pub fn wasi_only_function() {\n         content::should::be::irrelevant();\n     }\n \n     // @has doc_cfg/wasi_only/trait.Wasm32Only.html \\\n-    //  '//*[@id=\"main\"]/*[@class=\"item-info\"]/*[@class=\"stab portability\"]' \\\n+    //  '//*[@id=\"main-content\"]/*[@class=\"item-info\"]/*[@class=\"stab portability\"]' \\\n     //  'This is supported on WASI and WebAssembly only.'\n     // @count - '//*[@class=\"stab portability\"]' 1\n     #[doc(cfg(target_arch = \"wasm32\"))]\n@@ -77,15 +77,15 @@ pub mod wasi_only {\n // @matches - '//*[@class=\"item-left module-item\"]//*[@class=\"stab portability\"]' '\\Aavx\\Z'\n \n // @has doc_cfg/fn.uses_target_feature.html\n-// @has - '//*[@id=\"main\"]/*[@class=\"item-info\"]/*[@class=\"stab portability\"]' \\\n+// @has - '//*[@id=\"main-content\"]/*[@class=\"item-info\"]/*[@class=\"stab portability\"]' \\\n //        'This is supported with target feature avx only.'\n #[target_feature(enable = \"avx\")]\n pub unsafe fn uses_target_feature() {\n     content::should::be::irrelevant();\n }\n \n // @has doc_cfg/fn.uses_cfg_target_feature.html\n-// @has - '//*[@id=\"main\"]/*[@class=\"item-info\"]/*[@class=\"stab portability\"]' \\\n+// @has - '//*[@id=\"main-content\"]/*[@class=\"item-info\"]/*[@class=\"stab portability\"]' \\\n //        'This is supported with target feature avx only.'\n #[doc(cfg(target_feature = \"avx\"))]\n pub fn uses_cfg_target_feature() {\n@@ -94,7 +94,7 @@ pub fn uses_cfg_target_feature() {\n \n // multiple attributes should be allowed\n // @has doc_cfg/fn.multiple_attrs.html \\\n-//  '//*[@id=\"main\"]/*[@class=\"item-info\"]/*[@class=\"stab portability\"]' \\\n+//  '//*[@id=\"main-content\"]/*[@class=\"item-info\"]/*[@class=\"stab portability\"]' \\\n //  'This is supported on x and y and z only.'\n #[doc(cfg(x))]\n #[doc(cfg(y), cfg(z))]"}, {"sha": "b018dd6cda58ac8f34819b988e4f5933fbfc3f39", "filename": "src/test/rustdoc/duplicate_impls/issue-33054.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc%2Fduplicate_impls%2Fissue-33054.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc%2Fduplicate_impls%2Fissue-33054.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fduplicate_impls%2Fissue-33054.rs?ref=e2116acae59654bfab2a9729a024f3e2fd6d4b02", "patch": "@@ -2,7 +2,7 @@\n // @has - '//h3[@class=\"code-header in-band\"]' 'impl Foo'\n // @has - '//h3[@class=\"code-header in-band\"]' 'impl Bar for Foo'\n // @count - '//*[@id=\"trait-implementations-list\"]//*[@class=\"impl has-srclink\"]' 1\n-// @count - '//*[@id=\"main\"]/details/summary/*[@class=\"impl has-srclink\"]' 1\n+// @count - '//*[@id=\"main-content\"]/details/summary/*[@class=\"impl has-srclink\"]' 1\n // @has issue_33054/impls/bar/trait.Bar.html\n // @has - '//h3[@class=\"code-header in-band\"]' 'impl Bar for Foo'\n // @count - '//*[@class=\"struct\"]' 1"}, {"sha": "44885d4301ff8d79a7ce9ba21cd50cf6639237e5", "filename": "src/test/rustdoc/impl-everywhere.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc%2Fimpl-everywhere.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc%2Fimpl-everywhere.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fimpl-everywhere.rs?ref=e2116acae59654bfab2a9729a024f3e2fd6d4b02", "patch": "@@ -8,23 +8,23 @@ pub struct Bar;\n impl Foo for Bar {}\n impl Foo2 for Bar {}\n \n-// @has foo/fn.foo.html '//section[@id=\"main\"]//pre' \"x: &'x impl Foo\"\n-// @has foo/fn.foo.html '//section[@id=\"main\"]//pre' \"-> &'x impl Foo\"\n+// @has foo/fn.foo.html '//section[@id=\"main-content\"]//pre' \"x: &'x impl Foo\"\n+// @has foo/fn.foo.html '//section[@id=\"main-content\"]//pre' \"-> &'x impl Foo\"\n pub fn foo<'x>(x: &'x impl Foo) -> &'x impl Foo {\n     x\n }\n \n-// @has foo/fn.foo2.html '//section[@id=\"main\"]//pre' \"x: &'x impl Foo\"\n-// @has foo/fn.foo2.html '//section[@id=\"main\"]//pre' '-> impl Foo2'\n+// @has foo/fn.foo2.html '//section[@id=\"main-content\"]//pre' \"x: &'x impl Foo\"\n+// @has foo/fn.foo2.html '//section[@id=\"main-content\"]//pre' '-> impl Foo2'\n pub fn foo2<'x>(_x: &'x impl Foo) -> impl Foo2 {\n     Bar\n }\n \n-// @has foo/fn.foo_foo.html '//section[@id=\"main\"]//pre' '-> impl Foo + Foo2'\n+// @has foo/fn.foo_foo.html '//section[@id=\"main-content\"]//pre' '-> impl Foo + Foo2'\n pub fn foo_foo() -> impl Foo + Foo2 {\n     Bar\n }\n \n-// @has foo/fn.foo_foo_foo.html '//section[@id=\"main\"]//pre' \"x: &'x impl Foo + Foo2\"\n+// @has foo/fn.foo_foo_foo.html '//section[@id=\"main-content\"]//pre' \"x: &'x impl Foo + Foo2\"\n pub fn foo_foo_foo<'x>(_x: &'x (impl Foo + Foo2)) {\n }"}, {"sha": "c3340af33d5a72c11506bfbe9ffb822e747d7675", "filename": "src/test/rustdoc/intra-doc/prim-methods-external-core.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc%2Fintra-doc%2Fprim-methods-external-core.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc%2Fintra-doc%2Fprim-methods-external-core.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fintra-doc%2Fprim-methods-external-core.rs?ref=e2116acae59654bfab2a9729a024f3e2fd6d4b02", "patch": "@@ -9,8 +9,8 @@\n #![crate_type = \"rlib\"]\n \n // @has prim_methods_external_core/index.html\n-// @has - '//*[@id=\"main\"]//a[@href=\"../my_core/primitive.char.html\"]' 'char'\n-// @has - '//*[@id=\"main\"]//a[@href=\"../my_core/primitive.char.html#method.len_utf8\"]' 'char::len_utf8'\n+// @has - '//*[@id=\"main-content\"]//a[@href=\"../my_core/primitive.char.html\"]' 'char'\n+// @has - '//*[@id=\"main-content\"]//a[@href=\"../my_core/primitive.char.html#method.len_utf8\"]' 'char::len_utf8'\n \n //! A [`char`] and its [`char::len_utf8`].\n "}, {"sha": "fd0b1b97c6ef2653db8e707bf4e67dab2ff0b0a5", "filename": "src/test/rustdoc/intra-doc/prim-methods-local.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc%2Fintra-doc%2Fprim-methods-local.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc%2Fintra-doc%2Fprim-methods-local.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fintra-doc%2Fprim-methods-local.rs?ref=e2116acae59654bfab2a9729a024f3e2fd6d4b02", "patch": "@@ -3,10 +3,9 @@\n #![no_core]\n #![crate_type = \"rlib\"]\n \n-\n // @has prim_methods_local/index.html\n-// @has - '//*[@id=\"main\"]//a[@href=\"primitive.char.html\"]' 'char'\n-// @has - '//*[@id=\"main\"]//a[@href=\"primitive.char.html#method.len_utf8\"]' 'char::len_utf8'\n+// @has - '//*[@id=\"main-content\"]//a[@href=\"primitive.char.html\"]' 'char'\n+// @has - '//*[@id=\"main-content\"]//a[@href=\"primitive.char.html#method.len_utf8\"]' 'char::len_utf8'\n \n //! A [prim@`char`] and its [`char::len_utf8`].\n "}, {"sha": "a412a23fda835e65f3296a9938485f7935a92d23", "filename": "src/test/rustdoc/intra-doc/prim-methods.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc%2Fintra-doc%2Fprim-methods.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc%2Fintra-doc%2Fprim-methods.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fintra-doc%2Fprim-methods.rs?ref=e2116acae59654bfab2a9729a024f3e2fd6d4b02", "patch": "@@ -1,8 +1,7 @@\n #![deny(rustdoc::broken_intra_doc_links)]\n \n-\n // @has prim_methods/index.html\n-// @has - '//*[@id=\"main\"]//a[@href=\"{{channel}}/std/primitive.char.html\"]' 'char'\n-// @has - '//*[@id=\"main\"]//a[@href=\"{{channel}}/std/primitive.char.html#method.len_utf8\"]' 'char::len_utf8'\n+// @has - '//*[@id=\"main-content\"]//a[@href=\"{{channel}}/std/primitive.char.html\"]' 'char'\n+// @has - '//*[@id=\"main-content\"]//a[@href=\"{{channel}}/std/primitive.char.html#method.len_utf8\"]' 'char::len_utf8'\n \n //! A [`char`] and its [`char::len_utf8`]."}, {"sha": "e02be9cabd26842386307979b1d6c140f3aff4b7", "filename": "src/test/rustdoc/intra-doc/true-false.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc%2Fintra-doc%2Ftrue-false.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc%2Fintra-doc%2Ftrue-false.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fintra-doc%2Ftrue-false.rs?ref=e2116acae59654bfab2a9729a024f3e2fd6d4b02", "patch": "@@ -1,9 +1,8 @@\n #![deny(rustdoc::broken_intra_doc_links)]\n #![crate_name = \"foo\"]\n \n-\n // @has foo/index.html\n-// @has - '//*[@id=\"main\"]//a[@href=\"{{channel}}/std/primitive.bool.html\"]' 'true'\n-// @has - '//*[@id=\"main\"]//a[@href=\"{{channel}}/std/primitive.bool.html\"]' 'false'\n+// @has - '//*[@id=\"main-content\"]//a[@href=\"{{channel}}/std/primitive.bool.html\"]' 'true'\n+// @has - '//*[@id=\"main-content\"]//a[@href=\"{{channel}}/std/primitive.bool.html\"]' 'false'\n \n //! A `bool` is either [`true`] or [`false`]."}, {"sha": "14a6f5041f2085a6d5ba9f3c8025626d87627d39", "filename": "src/test/rustdoc/issue-55364.rs", "status": "modified", "additions": 16, "deletions": 16, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc%2Fissue-55364.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc%2Fissue-55364.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fissue-55364.rs?ref=e2116acae59654bfab2a9729a024f3e2fd6d4b02", "patch": "@@ -2,19 +2,19 @@\n \n // @has issue_55364/subone/index.html\n // These foo/bar links in the module's documentation should refer inside `subone`\n-// @has - '//section[@id=\"main\"]/details[@open=\"\"]/div[@class=\"docblock\"]//a[@href=\"fn.foo.html\"]' 'foo'\n-// @has - '//section[@id=\"main\"]/details[@open=\"\"]/div[@class=\"docblock\"]//a[@href=\"fn.bar.html\"]' 'bar'\n+// @has - '//section[@id=\"main-content\"]/details[@open=\"\"]/div[@class=\"docblock\"]//a[@href=\"fn.foo.html\"]' 'foo'\n+// @has - '//section[@id=\"main-content\"]/details[@open=\"\"]/div[@class=\"docblock\"]//a[@href=\"fn.bar.html\"]' 'bar'\n pub mod subone {\n     //! See either [foo] or [bar].\n \n     // This should refer to subone's `bar`\n     // @has issue_55364/subone/fn.foo.html\n-    // @has - '//section[@id=\"main\"]/details/div[@class=\"docblock\"]//a[@href=\"fn.bar.html\"]' 'bar'\n+    // @has - '//section[@id=\"main-content\"]/details/div[@class=\"docblock\"]//a[@href=\"fn.bar.html\"]' 'bar'\n     /// See [bar]\n     pub fn foo() {}\n     // This should refer to subone's `foo`\n     // @has issue_55364/subone/fn.bar.html\n-    // @has - '//section[@id=\"main\"]/details/div[@class=\"docblock\"]//a[@href=\"fn.foo.html\"]' 'foo'\n+    // @has - '//section[@id=\"main-content\"]/details/div[@class=\"docblock\"]//a[@href=\"fn.foo.html\"]' 'foo'\n     /// See [foo]\n     pub fn bar() {}\n }\n@@ -23,27 +23,27 @@ pub mod subone {\n \n // @has issue_55364/subtwo/index.html\n // These foo/bar links in the module's documentation should not reference inside `subtwo`\n-// @!has - '//section[@id=\"main\"]/div[@class=\"docblock\"]//a[@href=\"fn.foo.html\"]' 'foo'\n-// @!has - '//section[@id=\"main\"]/div[@class=\"docblock\"]//a[@href=\"fn.bar.html\"]' 'bar'\n+// @!has - '//section[@id=\"main-content\"]/div[@class=\"docblock\"]//a[@href=\"fn.foo.html\"]' 'foo'\n+// @!has - '//section[@id=\"main-content\"]/div[@class=\"docblock\"]//a[@href=\"fn.bar.html\"]' 'bar'\n // Instead it should be referencing the top level functions\n-// @has - '//section[@id=\"main\"]/details/div[@class=\"docblock\"]//a[@href=\"../fn.foo.html\"]' 'foo'\n-// @has - '//section[@id=\"main\"]/details/div[@class=\"docblock\"]//a[@href=\"../fn.bar.html\"]' 'bar'\n+// @has - '//section[@id=\"main-content\"]/details/div[@class=\"docblock\"]//a[@href=\"../fn.foo.html\"]' 'foo'\n+// @has - '//section[@id=\"main-content\"]/details/div[@class=\"docblock\"]//a[@href=\"../fn.bar.html\"]' 'bar'\n // Though there should be such links later\n-// @has - '//section[@id=\"main\"]/div[@class=\"item-table\"]//div[@class=\"item-left module-item\"]/a[@class=\"fn\"][@href=\"fn.foo.html\"]' 'foo'\n-// @has - '//section[@id=\"main\"]/div[@class=\"item-table\"]//div[@class=\"item-left module-item\"]/a[@class=\"fn\"][@href=\"fn.bar.html\"]' 'bar'\n+// @has - '//section[@id=\"main-content\"]/div[@class=\"item-table\"]//div[@class=\"item-left module-item\"]/a[@class=\"fn\"][@href=\"fn.foo.html\"]' 'foo'\n+// @has - '//section[@id=\"main-content\"]/div[@class=\"item-table\"]//div[@class=\"item-left module-item\"]/a[@class=\"fn\"][@href=\"fn.bar.html\"]' 'bar'\n /// See either [foo] or [bar].\n pub mod subtwo {\n \n     // Despite the module's docs referring to the top level foo/bar,\n     // this should refer to subtwo's `bar`\n     // @has issue_55364/subtwo/fn.foo.html\n-    // @has - '//section[@id=\"main\"]/details/div[@class=\"docblock\"]//a[@href=\"fn.bar.html\"]' 'bar'\n+    // @has - '//section[@id=\"main-content\"]/details/div[@class=\"docblock\"]//a[@href=\"fn.bar.html\"]' 'bar'\n     /// See [bar]\n     pub fn foo() {}\n     // Despite the module's docs referring to the top level foo/bar,\n     // this should refer to subtwo's `foo`\n     // @has issue_55364/subtwo/fn.bar.html\n-    // @has - '//section[@id=\"main\"]/details/div[@class=\"docblock\"]//a[@href=\"fn.foo.html\"]' 'foo'\n+    // @has - '//section[@id=\"main-content\"]/details/div[@class=\"docblock\"]//a[@href=\"fn.foo.html\"]' 'foo'\n     /// See [foo]\n     pub fn bar() {}\n }\n@@ -59,17 +59,17 @@ pub fn bar() {}\n \n // @has issue_55364/subthree/index.html\n // This module should also refer to the top level foo/bar\n-// @has - '//section[@id=\"main\"]/details/div[@class=\"docblock\"]//a[@href=\"../fn.foo.html\"]' 'foo'\n-// @has - '//section[@id=\"main\"]/details/div[@class=\"docblock\"]//a[@href=\"../fn.bar.html\"]' 'bar'\n+// @has - '//section[@id=\"main-content\"]/details/div[@class=\"docblock\"]//a[@href=\"../fn.foo.html\"]' 'foo'\n+// @has - '//section[@id=\"main-content\"]/details/div[@class=\"docblock\"]//a[@href=\"../fn.bar.html\"]' 'bar'\n pub mod subthree {\n     //! See either [foo][super::foo] or [bar][super::bar]\n }\n \n // Next we go *deeper* - In order to ensure it's not just \"this or parent\"\n // we test `crate::` and a `super::super::...` chain\n // @has issue_55364/subfour/subfive/subsix/subseven/subeight/index.html\n-// @has - '//section[@id=\"main\"]/div[@class=\"item-table\"]//div[@class=\"item-right docblock-short\"]//a[@href=\"../../../../../subone/fn.foo.html\"]' 'other foo'\n-// @has - '//section[@id=\"main\"]/div[@class=\"item-table\"]//div[@class=\"item-right docblock-short\"]//a[@href=\"../../../../../subtwo/fn.bar.html\"]' 'other bar'\n+// @has - '//section[@id=\"main-content\"]/div[@class=\"item-table\"]//div[@class=\"item-right docblock-short\"]//a[@href=\"../../../../../subone/fn.foo.html\"]' 'other foo'\n+// @has - '//section[@id=\"main-content\"]/div[@class=\"item-table\"]//div[@class=\"item-right docblock-short\"]//a[@href=\"../../../../../subtwo/fn.bar.html\"]' 'other bar'\n pub mod subfour {\n     pub mod subfive {\n         pub mod subsix {"}, {"sha": "29ceda4f7c1d3886d2ecf8ddcf9f6c9d6f0f4449", "filename": "src/test/rustdoc/keyword.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc%2Fkeyword.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc%2Fkeyword.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fkeyword.rs?ref=e2116acae59654bfab2a9729a024f3e2fd6d4b02", "patch": "@@ -8,15 +8,15 @@\n // @has foo/index.html '//div[@class=\"sidebar-elems\"]//li/a/@href' '#keywords'\n // @has foo/keyword.match.html '//a[@class=\"keyword\"]' 'match'\n // @has foo/keyword.match.html '//span[@class=\"in-band\"]' 'Keyword match'\n-// @has foo/keyword.match.html '//section[@id=\"main\"]//div[@class=\"docblock\"]//p' 'this is a test!'\n+// @has foo/keyword.match.html '//section[@id=\"main-content\"]//div[@class=\"docblock\"]//p' 'this is a test!'\n // @has foo/index.html '//a/@href' '../foo/index.html'\n // @!has foo/foo/index.html\n // @!has-dir foo/foo\n #[doc(keyword = \"match\")]\n /// this is a test!\n mod foo{}\n \n-// @has foo/keyword.foo.html '//section[@id=\"main\"]//div[@class=\"docblock\"]//p' 'hello'\n+// @has foo/keyword.foo.html '//section[@id=\"main-content\"]//div[@class=\"docblock\"]//p' 'hello'\n #[doc(keyword = \"foo\")]\n /// hello\n mod bar {}"}, {"sha": "5468796f669eb2d2eac37a4557bb2dfd31d4da12", "filename": "src/test/rustdoc/struct-implementations-title.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc%2Fstruct-implementations-title.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc%2Fstruct-implementations-title.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fstruct-implementations-title.rs?ref=e2116acae59654bfab2a9729a024f3e2fd6d4b02", "patch": "@@ -3,7 +3,7 @@\n pub struct Struc;\n \n // @has foo/struct.Struc.html\n-// @has - '//*[@id=\"main\"]/h2[@id=\"implementations\"]' \"Implementations\"\n+// @has - '//*[@id=\"main-content\"]/h2[@id=\"implementations\"]' \"Implementations\"\n impl Struc {\n     pub const S: u64 = 0;\n }"}, {"sha": "dec7fe3f6a5d9620cbb0da78e845cc3d974c7bba", "filename": "src/test/rustdoc/trait_alias.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc%2Ftrait_alias.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc%2Ftrait_alias.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Ftrait_alias.rs?ref=e2116acae59654bfab2a9729a024f3e2fd6d4b02", "patch": "@@ -14,13 +14,13 @@ use std::fmt::Debug;\n // @has foo/index.html '//a[@class=\"traitalias\"]' 'Foo'\n \n // @has foo/traitalias.CopyAlias.html\n-// @has - '//section[@id=\"main\"]/div[@class=\"docblock item-decl\"]/pre' 'trait CopyAlias = Copy;'\n+// @has - '//section[@id=\"main-content\"]/div[@class=\"docblock item-decl\"]/pre' 'trait CopyAlias = Copy;'\n pub trait CopyAlias = Copy;\n // @has foo/traitalias.Alias2.html\n-// @has - '//section[@id=\"main\"]/div[@class=\"docblock item-decl\"]/pre' 'trait Alias2 = Copy + Debug;'\n+// @has - '//section[@id=\"main-content\"]/div[@class=\"docblock item-decl\"]/pre' 'trait Alias2 = Copy + Debug;'\n pub trait Alias2 = Copy + Debug;\n // @has foo/traitalias.Foo.html\n-// @has - '//section[@id=\"main\"]/div[@class=\"docblock item-decl\"]/pre' 'trait Foo<T> = Into<T> + Debug;'\n+// @has - '//section[@id=\"main-content\"]/div[@class=\"docblock item-decl\"]/pre' 'trait Foo<T> = Into<T> + Debug;'\n pub trait Foo<T> = Into<T> + Debug;\n // @has foo/fn.bar.html '//a[@href=\"traitalias.Alias2.html\"]' 'Alias2'\n pub fn bar<T>() where T: Alias2 {}"}, {"sha": "2e339fe82649d6ca67a422bf58cdb495bc959b0c", "filename": "src/test/rustdoc/tuple-struct-fields-doc.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc%2Ftuple-struct-fields-doc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e2116acae59654bfab2a9729a024f3e2fd6d4b02/src%2Ftest%2Frustdoc%2Ftuple-struct-fields-doc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Ftuple-struct-fields-doc.rs?ref=e2116acae59654bfab2a9729a024f3e2fd6d4b02", "patch": "@@ -4,11 +4,11 @@\n // @has - '//h2[@id=\"fields\"]' 'Tuple Fields'\n // @has - '//h3[@class=\"sidebar-title\"]/a[@href=\"#fields\"]' 'Tuple Fields'\n // @has - '//*[@id=\"structfield.0\"]' '0: u32'\n-// @has - '//*[@id=\"main\"]/div[@class=\"docblock\"]' 'hello'\n+// @has - '//*[@id=\"main-content\"]/div[@class=\"docblock\"]' 'hello'\n // @!has - '//*[@id=\"structfield.1\"]'\n // @has - '//*[@id=\"structfield.2\"]' '2: char'\n // @has - '//*[@id=\"structfield.3\"]' '3: i8'\n-// @has - '//*[@id=\"main\"]/div[@class=\"docblock\"]' 'not hello'\n+// @has - '//*[@id=\"main-content\"]/div[@class=\"docblock\"]' 'not hello'\n pub struct Foo(\n     /// hello\n     pub u32,"}]}