{"sha": "e9c309c0e58808cb38a24de5647880f8659c4041", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU5YzMwOWMwZTU4ODA4Y2IzOGEyNGRlNTY0Nzg4MGY4NjU5YzQwNDE=", "commit": {"author": {"name": "James Miller", "email": "james@aatch.net", "date": "2013-06-10T04:13:40Z"}, "committer": {"name": "James Miller", "email": "james@aatch.net", "date": "2013-06-10T06:26:24Z"}, "message": "STATIC_PAGE_SHIFT for cross-compiling jemalloc\n\nSets `STATIC_PAGE_SHIFT` for cross-compiling jemalloc to 12. A\nshift of 12 represents a page size of 4k for practically all\nplatforms.", "tree": {"sha": "a626320b2fc5ae8891c8c2eeb5e3c6cbaf8c7943", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a626320b2fc5ae8891c8c2eeb5e3c6cbaf8c7943"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e9c309c0e58808cb38a24de5647880f8659c4041", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e9c309c0e58808cb38a24de5647880f8659c4041", "html_url": "https://github.com/rust-lang/rust/commit/e9c309c0e58808cb38a24de5647880f8659c4041", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e9c309c0e58808cb38a24de5647880f8659c4041/comments", "author": {"login": "Aatch", "id": 342416, "node_id": "MDQ6VXNlcjM0MjQxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/342416?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aatch", "html_url": "https://github.com/Aatch", "followers_url": "https://api.github.com/users/Aatch/followers", "following_url": "https://api.github.com/users/Aatch/following{/other_user}", "gists_url": "https://api.github.com/users/Aatch/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aatch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aatch/subscriptions", "organizations_url": "https://api.github.com/users/Aatch/orgs", "repos_url": "https://api.github.com/users/Aatch/repos", "events_url": "https://api.github.com/users/Aatch/events{/privacy}", "received_events_url": "https://api.github.com/users/Aatch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Aatch", "id": 342416, "node_id": "MDQ6VXNlcjM0MjQxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/342416?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aatch", "html_url": "https://github.com/Aatch", "followers_url": "https://api.github.com/users/Aatch/followers", "following_url": "https://api.github.com/users/Aatch/following{/other_user}", "gists_url": "https://api.github.com/users/Aatch/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aatch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aatch/subscriptions", "organizations_url": "https://api.github.com/users/Aatch/orgs", "repos_url": "https://api.github.com/users/Aatch/repos", "events_url": "https://api.github.com/users/Aatch/events{/privacy}", "received_events_url": "https://api.github.com/users/Aatch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8f4f0bebe706e926ed5c7a2b9f48650730b7633d", "url": "https://api.github.com/repos/rust-lang/rust/commits/8f4f0bebe706e926ed5c7a2b9f48650730b7633d", "html_url": "https://github.com/rust-lang/rust/commit/8f4f0bebe706e926ed5c7a2b9f48650730b7633d"}], "stats": {"total": 331, "additions": 170, "deletions": 161}, "files": [{"sha": "67f3dc309027710a0b81e61907dea45ec620b384", "filename": "src/rt/jemalloc/configure", "status": "modified", "additions": 168, "deletions": 160, "changes": 328, "blob_url": "https://github.com/rust-lang/rust/blob/e9c309c0e58808cb38a24de5647880f8659c4041/src%2Frt%2Fjemalloc%2Fconfigure", "raw_url": "https://github.com/rust-lang/rust/raw/e9c309c0e58808cb38a24de5647880f8659c4041/src%2Frt%2Fjemalloc%2Fconfigure", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Fjemalloc%2Fconfigure?ref=e9c309c0e58808cb38a24de5647880f8659c4041", "patch": "@@ -1,11 +1,9 @@\n #! /bin/sh\n # Guess values for system-dependent variables and create Makefiles.\n-# Generated by GNU Autoconf 2.68.\n+# Generated by GNU Autoconf 2.69.\n #\n #\n-# Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,\n-# 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010 Free Software\n-# Foundation, Inc.\n+# Copyright (C) 1992-1996, 1998-2012 Free Software Foundation, Inc.\n #\n #\n # This configure script is free software; the Free Software Foundation\n@@ -134,6 +132,31 @@ export LANGUAGE\n # CDPATH.\n (unset CDPATH) >/dev/null 2>&1 && unset CDPATH\n \n+# Use a proper internal environment variable to ensure we don't fall\n+  # into an infinite loop, continuously re-executing ourselves.\n+  if test x\"${_as_can_reexec}\" != xno && test \"x$CONFIG_SHELL\" != x; then\n+    _as_can_reexec=no; export _as_can_reexec;\n+    # We cannot yet assume a decent shell, so we have to provide a\n+# neutralization value for shells without unset; and this also\n+# works around shells that cannot unset nonexistent variables.\n+# Preserve -v and -x to the replacement shell.\n+BASH_ENV=/dev/null\n+ENV=/dev/null\n+(unset BASH_ENV) >/dev/null 2>&1 && unset BASH_ENV ENV\n+case $- in # ((((\n+  *v*x* | *x*v* ) as_opts=-vx ;;\n+  *v* ) as_opts=-v ;;\n+  *x* ) as_opts=-x ;;\n+  * ) as_opts= ;;\n+esac\n+exec $CONFIG_SHELL $as_opts \"$as_myself\" ${1+\"$@\"}\n+# Admittedly, this is quite paranoid, since all the known shells bail\n+# out after a failed `exec'.\n+$as_echo \"$0: could not re-execute with $CONFIG_SHELL\" >&2\n+as_fn_exit 255\n+  fi\n+  # We don't want this to propagate to other subprocesses.\n+          { _as_can_reexec=; unset _as_can_reexec;}\n if test \"x$CONFIG_SHELL\" = x; then\n   as_bourne_compatible=\"if test -n \\\"\\${ZSH_VERSION+set}\\\" && (emulate sh) >/dev/null 2>&1; then :\n   emulate sh\n@@ -167,7 +190,8 @@ if ( set x; as_fn_ret_success y && test x = \\\"\\$1\\\" ); then :\n else\n   exitcode=1; echo positional parameters were not saved.\n fi\n-test x\\$exitcode = x0 || exit 1\"\n+test x\\$exitcode = x0 || exit 1\n+test -x / || exit 1\"\n   as_suggested=\"  as_lineno_1=\";as_suggested=$as_suggested$LINENO;as_suggested=$as_suggested\" as_lineno_1a=\\$LINENO\n   as_lineno_2=\";as_suggested=$as_suggested$LINENO;as_suggested=$as_suggested\" as_lineno_2a=\\$LINENO\n   eval 'test \\\"x\\$as_lineno_1'\\$as_run'\\\" != \\\"x\\$as_lineno_2'\\$as_run'\\\" &&\n@@ -212,21 +236,25 @@ IFS=$as_save_IFS\n \n \n       if test \"x$CONFIG_SHELL\" != x; then :\n-  # We cannot yet assume a decent shell, so we have to provide a\n-\t# neutralization value for shells without unset; and this also\n-\t# works around shells that cannot unset nonexistent variables.\n-\t# Preserve -v and -x to the replacement shell.\n-\tBASH_ENV=/dev/null\n-\tENV=/dev/null\n-\t(unset BASH_ENV) >/dev/null 2>&1 && unset BASH_ENV ENV\n-\texport CONFIG_SHELL\n-\tcase $- in # ((((\n-\t  *v*x* | *x*v* ) as_opts=-vx ;;\n-\t  *v* ) as_opts=-v ;;\n-\t  *x* ) as_opts=-x ;;\n-\t  * ) as_opts= ;;\n-\tesac\n-\texec \"$CONFIG_SHELL\" $as_opts \"$as_myself\" ${1+\"$@\"}\n+  export CONFIG_SHELL\n+             # We cannot yet assume a decent shell, so we have to provide a\n+# neutralization value for shells without unset; and this also\n+# works around shells that cannot unset nonexistent variables.\n+# Preserve -v and -x to the replacement shell.\n+BASH_ENV=/dev/null\n+ENV=/dev/null\n+(unset BASH_ENV) >/dev/null 2>&1 && unset BASH_ENV ENV\n+case $- in # ((((\n+  *v*x* | *x*v* ) as_opts=-vx ;;\n+  *v* ) as_opts=-v ;;\n+  *x* ) as_opts=-x ;;\n+  * ) as_opts= ;;\n+esac\n+exec $CONFIG_SHELL $as_opts \"$as_myself\" ${1+\"$@\"}\n+# Admittedly, this is quite paranoid, since all the known shells bail\n+# out after a failed `exec'.\n+$as_echo \"$0: could not re-execute with $CONFIG_SHELL\" >&2\n+exit 255\n fi\n \n     if test x$as_have_required = xno; then :\n@@ -328,6 +356,14 @@ $as_echo X\"$as_dir\" |\n \n \n } # as_fn_mkdir_p\n+\n+# as_fn_executable_p FILE\n+# -----------------------\n+# Test if FILE is an executable regular file.\n+as_fn_executable_p ()\n+{\n+  test -f \"$1\" && test -x \"$1\"\n+} # as_fn_executable_p\n # as_fn_append VAR VALUE\n # ----------------------\n # Append the text in VALUE to the end of the definition contained in VAR. Take\n@@ -449,6 +485,10 @@ as_cr_alnum=$as_cr_Letters$as_cr_digits\n   chmod +x \"$as_me.lineno\" ||\n     { $as_echo \"$as_me: error: cannot create $as_me.lineno; rerun with a POSIX shell\" >&2; as_fn_exit 1; }\n \n+  # If we had to re-execute with $CONFIG_SHELL, we're ensured to have\n+  # already done that, so ensure we don't try to do so again and fall\n+  # in an infinite loop.  This has already happened in practice.\n+  _as_can_reexec=no; export _as_can_reexec\n   # Don't try to exec as it changes $[0], causing all sort of problems\n   # (the dirname of $[0] is not the place where we might find the\n   # original and so on.  Autoconf is especially sensitive to this).\n@@ -483,16 +523,16 @@ if (echo >conf$$.file) 2>/dev/null; then\n     # ... but there are two gotchas:\n     # 1) On MSYS, both `ln -s file dir' and `ln file dir' fail.\n     # 2) DJGPP < 2.04 has no symlinks; `ln -s' creates a wrapper executable.\n-    # In both cases, we have to default to `cp -p'.\n+    # In both cases, we have to default to `cp -pR'.\n     ln -s conf$$.file conf$$.dir 2>/dev/null && test ! -f conf$$.exe ||\n-      as_ln_s='cp -p'\n+      as_ln_s='cp -pR'\n   elif ln conf$$.file conf$$ 2>/dev/null; then\n     as_ln_s=ln\n   else\n-    as_ln_s='cp -p'\n+    as_ln_s='cp -pR'\n   fi\n else\n-  as_ln_s='cp -p'\n+  as_ln_s='cp -pR'\n fi\n rm -f conf$$ conf$$.exe conf$$.dir/conf$$.file conf$$.file\n rmdir conf$$.dir 2>/dev/null\n@@ -504,28 +544,8 @@ else\n   as_mkdir_p=false\n fi\n \n-if test -x / >/dev/null 2>&1; then\n-  as_test_x='test -x'\n-else\n-  if ls -dL / >/dev/null 2>&1; then\n-    as_ls_L_option=L\n-  else\n-    as_ls_L_option=\n-  fi\n-  as_test_x='\n-    eval sh -c '\\''\n-      if test -d \"$1\"; then\n-\ttest -d \"$1/.\";\n-      else\n-\tcase $1 in #(\n-\t-*)set \"./$1\";;\n-\tesac;\n-\tcase `ls -ld'$as_ls_L_option' \"$1\" 2>/dev/null` in #((\n-\t???[sx]*):;;*)false;;esac;fi\n-    '\\'' sh\n-  '\n-fi\n-as_executable_p=$as_test_x\n+as_test_x='test -x'\n+as_executable_p=as_fn_executable_p\n \n # Sed expression to map a string onto a valid CPP name.\n as_tr_cpp=\"eval sed 'y%*$as_cr_letters%P$as_cr_LETTERS%;s%[^_$as_cr_alnum]%_%g'\"\n@@ -1219,8 +1239,6 @@ target=$target_alias\n if test \"x$host_alias\" != x; then\n   if test \"x$build_alias\" = x; then\n     cross_compiling=maybe\n-    $as_echo \"$as_me: WARNING: if you wanted to set the --build type, don't use --host.\n-    If a cross compiler is detected then cross compile mode will be used\" >&2\n   elif test \"x$build_alias\" != \"x$host_alias\"; then\n     cross_compiling=yes\n   fi\n@@ -1495,9 +1513,9 @@ test -n \"$ac_init_help\" && exit $ac_status\n if $ac_init_version; then\n   cat <<\\_ACEOF\n configure\n-generated by GNU Autoconf 2.68\n+generated by GNU Autoconf 2.69\n \n-Copyright (C) 2010 Free Software Foundation, Inc.\n+Copyright (C) 2012 Free Software Foundation, Inc.\n This configure script is free software; the Free Software Foundation\n gives unlimited permission to copy, distribute and modify it.\n _ACEOF\n@@ -1642,7 +1660,8 @@ int\n main ()\n {\n static int test_array [1 - 2 * !(($2) >= 0)];\n-test_array [0] = 0\n+test_array [0] = 0;\n+return test_array [0];\n \n   ;\n   return 0;\n@@ -1658,7 +1677,8 @@ int\n main ()\n {\n static int test_array [1 - 2 * !(($2) <= $ac_mid)];\n-test_array [0] = 0\n+test_array [0] = 0;\n+return test_array [0];\n \n   ;\n   return 0;\n@@ -1684,7 +1704,8 @@ int\n main ()\n {\n static int test_array [1 - 2 * !(($2) < 0)];\n-test_array [0] = 0\n+test_array [0] = 0;\n+return test_array [0];\n \n   ;\n   return 0;\n@@ -1700,7 +1721,8 @@ int\n main ()\n {\n static int test_array [1 - 2 * !(($2) >= $ac_mid)];\n-test_array [0] = 0\n+test_array [0] = 0;\n+return test_array [0];\n \n   ;\n   return 0;\n@@ -1734,7 +1756,8 @@ int\n main ()\n {\n static int test_array [1 - 2 * !(($2) <= $ac_mid)];\n-test_array [0] = 0\n+test_array [0] = 0;\n+return test_array [0];\n \n   ;\n   return 0;\n@@ -1861,7 +1884,7 @@ $as_echo \"$ac_try_echo\"; } >&5\n \t test ! -s conftest.err\n        } && test -s conftest$ac_exeext && {\n \t test \"$cross_compiling\" = yes ||\n-\t $as_test_x conftest$ac_exeext\n+\t test -x conftest$ac_exeext\n        }; then :\n   ac_retval=0\n else\n@@ -2092,7 +2115,7 @@ This file contains any messages produced by compilers while\n running configure, to aid debugging if configure makes a mistake.\n \n It was created by $as_me, which was\n-generated by GNU Autoconf 2.68.  Invocation command line was\n+generated by GNU Autoconf 2.69.  Invocation command line was\n \n   $ $0 $@\n \n@@ -2506,7 +2529,7 @@ do\n   IFS=$as_save_IFS\n   test -z \"$as_dir\" && as_dir=.\n     for ac_exec_ext in '' $ac_executable_extensions; do\n-  if { test -f \"$as_dir/$ac_word$ac_exec_ext\" && $as_test_x \"$as_dir/$ac_word$ac_exec_ext\"; }; then\n+  if as_fn_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n     ac_cv_path_XSLTPROC=\"$as_dir/$ac_word$ac_exec_ext\"\n     $as_echo \"$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext\" >&5\n     break 2\n@@ -2576,7 +2599,7 @@ do\n   IFS=$as_save_IFS\n   test -z \"$as_dir\" && as_dir=.\n     for ac_exec_ext in '' $ac_executable_extensions; do\n-  if { test -f \"$as_dir/$ac_word$ac_exec_ext\" && $as_test_x \"$as_dir/$ac_word$ac_exec_ext\"; }; then\n+  if as_fn_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n     ac_cv_prog_CC=\"${ac_tool_prefix}gcc\"\n     $as_echo \"$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext\" >&5\n     break 2\n@@ -2616,7 +2639,7 @@ do\n   IFS=$as_save_IFS\n   test -z \"$as_dir\" && as_dir=.\n     for ac_exec_ext in '' $ac_executable_extensions; do\n-  if { test -f \"$as_dir/$ac_word$ac_exec_ext\" && $as_test_x \"$as_dir/$ac_word$ac_exec_ext\"; }; then\n+  if as_fn_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n     ac_cv_prog_ac_ct_CC=\"gcc\"\n     $as_echo \"$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext\" >&5\n     break 2\n@@ -2669,7 +2692,7 @@ do\n   IFS=$as_save_IFS\n   test -z \"$as_dir\" && as_dir=.\n     for ac_exec_ext in '' $ac_executable_extensions; do\n-  if { test -f \"$as_dir/$ac_word$ac_exec_ext\" && $as_test_x \"$as_dir/$ac_word$ac_exec_ext\"; }; then\n+  if as_fn_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n     ac_cv_prog_CC=\"${ac_tool_prefix}cc\"\n     $as_echo \"$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext\" >&5\n     break 2\n@@ -2710,7 +2733,7 @@ do\n   IFS=$as_save_IFS\n   test -z \"$as_dir\" && as_dir=.\n     for ac_exec_ext in '' $ac_executable_extensions; do\n-  if { test -f \"$as_dir/$ac_word$ac_exec_ext\" && $as_test_x \"$as_dir/$ac_word$ac_exec_ext\"; }; then\n+  if as_fn_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n     if test \"$as_dir/$ac_word$ac_exec_ext\" = \"/usr/ucb/cc\"; then\n        ac_prog_rejected=yes\n        continue\n@@ -2768,7 +2791,7 @@ do\n   IFS=$as_save_IFS\n   test -z \"$as_dir\" && as_dir=.\n     for ac_exec_ext in '' $ac_executable_extensions; do\n-  if { test -f \"$as_dir/$ac_word$ac_exec_ext\" && $as_test_x \"$as_dir/$ac_word$ac_exec_ext\"; }; then\n+  if as_fn_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n     ac_cv_prog_CC=\"$ac_tool_prefix$ac_prog\"\n     $as_echo \"$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext\" >&5\n     break 2\n@@ -2812,7 +2835,7 @@ do\n   IFS=$as_save_IFS\n   test -z \"$as_dir\" && as_dir=.\n     for ac_exec_ext in '' $ac_executable_extensions; do\n-  if { test -f \"$as_dir/$ac_word$ac_exec_ext\" && $as_test_x \"$as_dir/$ac_word$ac_exec_ext\"; }; then\n+  if as_fn_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n     ac_cv_prog_ac_ct_CC=\"$ac_prog\"\n     $as_echo \"$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext\" >&5\n     break 2\n@@ -3258,8 +3281,7 @@ cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n #include <stdarg.h>\n #include <stdio.h>\n-#include <sys/types.h>\n-#include <sys/stat.h>\n+struct stat;\n /* Most of the following tests are stolen from RCS 5.7's src/conf.sh.  */\n struct buf { int x; };\n FILE * (*rcsopen) (struct buf *, struct stat *, int);\n@@ -3814,7 +3836,7 @@ do\n     for ac_prog in grep ggrep; do\n     for ac_exec_ext in '' $ac_executable_extensions; do\n       ac_path_GREP=\"$as_dir/$ac_prog$ac_exec_ext\"\n-      { test -f \"$ac_path_GREP\" && $as_test_x \"$ac_path_GREP\"; } || continue\n+      as_fn_executable_p \"$ac_path_GREP\" || continue\n # Check for GNU ac_path_GREP and select it if it is found.\n   # Check for GNU $ac_path_GREP\n case `\"$ac_path_GREP\" --version 2>&1` in\n@@ -3880,7 +3902,7 @@ do\n     for ac_prog in egrep; do\n     for ac_exec_ext in '' $ac_executable_extensions; do\n       ac_path_EGREP=\"$as_dir/$ac_prog$ac_exec_ext\"\n-      { test -f \"$ac_path_EGREP\" && $as_test_x \"$ac_path_EGREP\"; } || continue\n+      as_fn_executable_p \"$ac_path_EGREP\" || continue\n # Check for GNU ac_path_EGREP and select it if it is found.\n   # Check for GNU $ac_path_EGREP\n case `\"$ac_path_EGREP\" --version 2>&1` in\n@@ -4509,9 +4531,9 @@ $as_echo \"$abi\" >&6; }\n \t;;\n   *-ibm-aix*)\n \tif \"$LG_SIZEOF_PTR\" = \"8\"; then\n-\t\t  LD_PRELOAD_VAR=\"LDR_PRELOAD64\"\n+\t  \t  LD_PRELOAD_VAR=\"LDR_PRELOAD64\"\n \telse\n-\t\t  LD_PRELOAD_VAR=\"LDR_PRELOAD\"\n+\t  \t  LD_PRELOAD_VAR=\"LDR_PRELOAD\"\n \tfi\n \tabi=\"xcoff\"\n \t;;\n@@ -4778,7 +4800,7 @@ case $as_dir/ in #((\n     # by default.\n     for ac_prog in ginstall scoinst install; do\n       for ac_exec_ext in '' $ac_executable_extensions; do\n-\tif { test -f \"$as_dir/$ac_prog$ac_exec_ext\" && $as_test_x \"$as_dir/$ac_prog$ac_exec_ext\"; }; then\n+\tif as_fn_executable_p \"$as_dir/$ac_prog$ac_exec_ext\"; then\n \t  if test $ac_prog = install &&\n \t    grep dspmsg \"$as_dir/$ac_prog$ac_exec_ext\" >/dev/null 2>&1; then\n \t    # AIX install.  It has an incompatible calling convention.\n@@ -4851,7 +4873,7 @@ do\n   IFS=$as_save_IFS\n   test -z \"$as_dir\" && as_dir=.\n     for ac_exec_ext in '' $ac_executable_extensions; do\n-  if { test -f \"$as_dir/$ac_word$ac_exec_ext\" && $as_test_x \"$as_dir/$ac_word$ac_exec_ext\"; }; then\n+  if as_fn_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n     ac_cv_prog_RANLIB=\"${ac_tool_prefix}ranlib\"\n     $as_echo \"$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext\" >&5\n     break 2\n@@ -4891,7 +4913,7 @@ do\n   IFS=$as_save_IFS\n   test -z \"$as_dir\" && as_dir=.\n     for ac_exec_ext in '' $ac_executable_extensions; do\n-  if { test -f \"$as_dir/$ac_word$ac_exec_ext\" && $as_test_x \"$as_dir/$ac_word$ac_exec_ext\"; }; then\n+  if as_fn_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n     ac_cv_prog_ac_ct_RANLIB=\"ranlib\"\n     $as_echo \"$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext\" >&5\n     break 2\n@@ -4944,7 +4966,7 @@ do\n   IFS=$as_save_IFS\n   test -z \"$as_dir\" && as_dir=.\n     for ac_exec_ext in '' $ac_executable_extensions; do\n-  if { test -f \"$as_dir/$ac_word$ac_exec_ext\" && $as_test_x \"$as_dir/$ac_word$ac_exec_ext\"; }; then\n+  if as_fn_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n     ac_cv_path_AR=\"$as_dir/$ac_word$ac_exec_ext\"\n     $as_echo \"$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext\" >&5\n     break 2\n@@ -4985,7 +5007,7 @@ do\n   IFS=$as_save_IFS\n   test -z \"$as_dir\" && as_dir=.\n     for ac_exec_ext in '' $ac_executable_extensions; do\n-  if { test -f \"$as_dir/$ac_word$ac_exec_ext\" && $as_test_x \"$as_dir/$ac_word$ac_exec_ext\"; }; then\n+  if as_fn_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n     ac_cv_path_LD=\"$as_dir/$ac_word$ac_exec_ext\"\n     $as_echo \"$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext\" >&5\n     break 2\n@@ -5026,7 +5048,7 @@ do\n   IFS=$as_save_IFS\n   test -z \"$as_dir\" && as_dir=.\n     for ac_exec_ext in '' $ac_executable_extensions; do\n-  if { test -f \"$as_dir/$ac_word$ac_exec_ext\" && $as_test_x \"$as_dir/$ac_word$ac_exec_ext\"; }; then\n+  if as_fn_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n     ac_cv_path_AUTOCONF=\"$as_dir/$ac_word$ac_exec_ext\"\n     $as_echo \"$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext\" >&5\n     break 2\n@@ -5984,10 +6006,7 @@ if ${je_cv_static_page_shift+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   if test \"$cross_compiling\" = yes; then :\n-  { { $as_echo \"$as_me:${as_lineno-$LINENO}: error: in \\`$ac_pwd':\" >&5\n-$as_echo \"$as_me: error: in \\`$ac_pwd':\" >&2;}\n-as_fn_error $? \"cannot run test program while cross compiling\n-See \\`config.log' for more details\" \"$LINENO\" 5; }\n+  je_cv_static_page_shift=12\n else\n   cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n@@ -6831,60 +6850,60 @@ else\n   cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n \n-#include <stdbool.h>\n-#ifndef bool\n- \"error: bool is not defined\"\n-#endif\n-#ifndef false\n- \"error: false is not defined\"\n-#endif\n-#if false\n- \"error: false is not 0\"\n-#endif\n-#ifndef true\n- \"error: true is not defined\"\n-#endif\n-#if true != 1\n- \"error: true is not 1\"\n-#endif\n-#ifndef __bool_true_false_are_defined\n- \"error: __bool_true_false_are_defined is not defined\"\n-#endif\n-\n-\tstruct s { _Bool s: 1; _Bool t; } s;\n-\n-\tchar a[true == 1 ? 1 : -1];\n-\tchar b[false == 0 ? 1 : -1];\n-\tchar c[__bool_true_false_are_defined == 1 ? 1 : -1];\n-\tchar d[(bool) 0.5 == true ? 1 : -1];\n-\t/* See body of main program for 'e'.  */\n-\tchar f[(_Bool) 0.0 == false ? 1 : -1];\n-\tchar g[true];\n-\tchar h[sizeof (_Bool)];\n-\tchar i[sizeof s.t];\n-\tenum { j = false, k = true, l = false * true, m = true * 256 };\n-\t/* The following fails for\n-\t   HP aC++/ANSI C B3910B A.05.55 [Dec 04 2003]. */\n-\t_Bool n[m];\n-\tchar o[sizeof n == m * sizeof n[0] ? 1 : -1];\n-\tchar p[-1 - (_Bool) 0 < 0 && -1 - (bool) 0 < 0 ? 1 : -1];\n-\t/* Catch a bug in an HP-UX C compiler.  See\n-\t   http://gcc.gnu.org/ml/gcc-patches/2003-12/msg02303.html\n-\t   http://lists.gnu.org/archive/html/bug-coreutils/2005-11/msg00161.html\n-\t */\n-\t_Bool q = true;\n-\t_Bool *pq = &q;\n+             #include <stdbool.h>\n+             #ifndef bool\n+              \"error: bool is not defined\"\n+             #endif\n+             #ifndef false\n+              \"error: false is not defined\"\n+             #endif\n+             #if false\n+              \"error: false is not 0\"\n+             #endif\n+             #ifndef true\n+              \"error: true is not defined\"\n+             #endif\n+             #if true != 1\n+              \"error: true is not 1\"\n+             #endif\n+             #ifndef __bool_true_false_are_defined\n+              \"error: __bool_true_false_are_defined is not defined\"\n+             #endif\n+\n+             struct s { _Bool s: 1; _Bool t; } s;\n+\n+             char a[true == 1 ? 1 : -1];\n+             char b[false == 0 ? 1 : -1];\n+             char c[__bool_true_false_are_defined == 1 ? 1 : -1];\n+             char d[(bool) 0.5 == true ? 1 : -1];\n+             /* See body of main program for 'e'.  */\n+             char f[(_Bool) 0.0 == false ? 1 : -1];\n+             char g[true];\n+             char h[sizeof (_Bool)];\n+             char i[sizeof s.t];\n+             enum { j = false, k = true, l = false * true, m = true * 256 };\n+             /* The following fails for\n+                HP aC++/ANSI C B3910B A.05.55 [Dec 04 2003]. */\n+             _Bool n[m];\n+             char o[sizeof n == m * sizeof n[0] ? 1 : -1];\n+             char p[-1 - (_Bool) 0 < 0 && -1 - (bool) 0 < 0 ? 1 : -1];\n+             /* Catch a bug in an HP-UX C compiler.  See\n+                http://gcc.gnu.org/ml/gcc-patches/2003-12/msg02303.html\n+                http://lists.gnu.org/archive/html/bug-coreutils/2005-11/msg00161.html\n+              */\n+             _Bool q = true;\n+             _Bool *pq = &q;\n \n int\n main ()\n {\n \n-\tbool e = &s;\n-\t*pq |= q;\n-\t*pq |= ! q;\n-\t/* Refer to every declared value, to avoid compiler optimizations.  */\n-\treturn (!a + !b + !c + !d + !e + !f + !g + !h + !i + !!j + !k + !!l\n-\t\t+ !m + !n + !o + !p + !q + !pq);\n+             bool e = &s;\n+             *pq |= q;\n+             *pq |= ! q;\n+             /* Refer to every declared value, to avoid compiler optimizations.  */\n+             return (!a + !b + !c + !d + !e + !f + !g + !h + !i + !!j + !k + !!l\n+                     + !m + !n + !o + !p + !q + !pq);\n \n   ;\n   return 0;\n@@ -6899,7 +6918,7 @@ rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n fi\n { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_cv_header_stdbool_h\" >&5\n $as_echo \"$ac_cv_header_stdbool_h\" >&6; }\n-ac_fn_c_check_type \"$LINENO\" \"_Bool\" \"ac_cv_type__Bool\" \"$ac_includes_default\"\n+   ac_fn_c_check_type \"$LINENO\" \"_Bool\" \"ac_cv_type__Bool\" \"$ac_includes_default\"\n if test \"x$ac_cv_type__Bool\" = xyes; then :\n \n cat >>confdefs.h <<_ACEOF\n@@ -6909,6 +6928,7 @@ _ACEOF\n \n fi\n \n+\n if test $ac_cv_header_stdbool_h = yes; then\n \n $as_echo \"#define HAVE_STDBOOL_H 1\" >>confdefs.h\n@@ -7335,16 +7355,16 @@ if (echo >conf$$.file) 2>/dev/null; then\n     # ... but there are two gotchas:\n     # 1) On MSYS, both `ln -s file dir' and `ln file dir' fail.\n     # 2) DJGPP < 2.04 has no symlinks; `ln -s' creates a wrapper executable.\n-    # In both cases, we have to default to `cp -p'.\n+    # In both cases, we have to default to `cp -pR'.\n     ln -s conf$$.file conf$$.dir 2>/dev/null && test ! -f conf$$.exe ||\n-      as_ln_s='cp -p'\n+      as_ln_s='cp -pR'\n   elif ln conf$$.file conf$$ 2>/dev/null; then\n     as_ln_s=ln\n   else\n-    as_ln_s='cp -p'\n+    as_ln_s='cp -pR'\n   fi\n else\n-  as_ln_s='cp -p'\n+  as_ln_s='cp -pR'\n fi\n rm -f conf$$ conf$$.exe conf$$.dir/conf$$.file conf$$.file\n rmdir conf$$.dir 2>/dev/null\n@@ -7404,28 +7424,16 @@ else\n   as_mkdir_p=false\n fi\n \n-if test -x / >/dev/null 2>&1; then\n-  as_test_x='test -x'\n-else\n-  if ls -dL / >/dev/null 2>&1; then\n-    as_ls_L_option=L\n-  else\n-    as_ls_L_option=\n-  fi\n-  as_test_x='\n-    eval sh -c '\\''\n-      if test -d \"$1\"; then\n-\ttest -d \"$1/.\";\n-      else\n-\tcase $1 in #(\n-\t-*)set \"./$1\";;\n-\tesac;\n-\tcase `ls -ld'$as_ls_L_option' \"$1\" 2>/dev/null` in #((\n-\t???[sx]*):;;*)false;;esac;fi\n-    '\\'' sh\n-  '\n-fi\n-as_executable_p=$as_test_x\n+\n+# as_fn_executable_p FILE\n+# -----------------------\n+# Test if FILE is an executable regular file.\n+as_fn_executable_p ()\n+{\n+  test -f \"$1\" && test -x \"$1\"\n+} # as_fn_executable_p\n+as_test_x='test -x'\n+as_executable_p=as_fn_executable_p\n \n # Sed expression to map a string onto a valid CPP name.\n as_tr_cpp=\"eval sed 'y%*$as_cr_letters%P$as_cr_LETTERS%;s%[^_$as_cr_alnum]%_%g'\"\n@@ -7447,7 +7455,7 @@ cat >>$CONFIG_STATUS <<\\_ACEOF || ac_write_fail=1\n # values after options handling.\n ac_log=\"\n This file was extended by $as_me, which was\n-generated by GNU Autoconf 2.68.  Invocation command line was\n+generated by GNU Autoconf 2.69.  Invocation command line was\n \n   CONFIG_FILES    = $CONFIG_FILES\n   CONFIG_HEADERS  = $CONFIG_HEADERS\n@@ -7513,10 +7521,10 @@ cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1\n ac_cs_config=\"`$as_echo \"$ac_configure_args\" | sed 's/^ //; s/[\\\\\"\"\\`\\$]/\\\\\\\\&/g'`\"\n ac_cs_version=\"\\\\\n config.status\n-configured by $0, generated by GNU Autoconf 2.68,\n+configured by $0, generated by GNU Autoconf 2.69,\n   with options \\\\\"\\$ac_cs_config\\\\\"\n \n-Copyright (C) 2010 Free Software Foundation, Inc.\n+Copyright (C) 2012 Free Software Foundation, Inc.\n This config.status script is free software; the Free Software Foundation\n gives unlimited permission to copy, distribute and modify it.\"\n \n@@ -7605,7 +7613,7 @@ fi\n _ACEOF\n cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1\n if \\$ac_cs_recheck; then\n-  set X '$SHELL' '$0' $ac_configure_args \\$ac_configure_extra_args --no-create --no-recursion\n+  set X $SHELL '$0' $ac_configure_args \\$ac_configure_extra_args --no-create --no-recursion\n   shift\n   \\$as_echo \"running CONFIG_SHELL=$SHELL \\$*\" >&6\n   CONFIG_SHELL='$SHELL'"}, {"sha": "1189942c90fdf0ea35bb960289a9b95c292e652e", "filename": "src/rt/jemalloc/configure.ac", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/e9c309c0e58808cb38a24de5647880f8659c4041/src%2Frt%2Fjemalloc%2Fconfigure.ac", "raw_url": "https://github.com/rust-lang/rust/raw/e9c309c0e58808cb38a24de5647880f8659c4041/src%2Frt%2Fjemalloc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Fjemalloc%2Fconfigure.ac?ref=e9c309c0e58808cb38a24de5647880f8659c4041", "patch": "@@ -954,7 +954,8 @@ AC_CACHE_CHECK([STATIC_PAGE_SHIFT],\n     return 0;\n ]])],\n                              [je_cv_static_page_shift=`cat conftest.out`],\n-                             [je_cv_static_page_shift=undefined]))\n+                             [je_cv_static_page_shift=undefined],\n+                             [je_cv_static_page_shift=12]))\n \n if test \"x$je_cv_static_page_shift\" != \"xundefined\"; then\n    AC_DEFINE_UNQUOTED([STATIC_PAGE_SHIFT], [$je_cv_static_page_shift])"}]}