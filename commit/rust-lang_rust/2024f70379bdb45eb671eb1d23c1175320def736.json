{"sha": "2024f70379bdb45eb671eb1d23c1175320def736", "node_id": "C_kwDOAAsO6NoAKDIwMjRmNzAzNzliZGI0NWViNjcxZWIxZDIzYzExNzUzMjBkZWY3MzY", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-11-01T14:48:13Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-11-01T18:46:42Z"}, "message": "Migrate sidebar-links-color GUI test to functions", "tree": {"sha": "a6ef9c270caf6ca85ce1f6b832575c7c561f38f3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a6ef9c270caf6ca85ce1f6b832575c7c561f38f3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2024f70379bdb45eb671eb1d23c1175320def736", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2024f70379bdb45eb671eb1d23c1175320def736", "html_url": "https://github.com/rust-lang/rust/commit/2024f70379bdb45eb671eb1d23c1175320def736", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2024f70379bdb45eb671eb1d23c1175320def736/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fab0432952b24df769459d4c973dbb8d08561a83", "url": "https://api.github.com/repos/rust-lang/rust/commits/fab0432952b24df769459d4c973dbb8d08561a83", "html_url": "https://github.com/rust-lang/rust/commit/fab0432952b24df769459d4c973dbb8d08561a83"}], "stats": {"total": 386, "additions": 162, "deletions": 224}, "files": [{"sha": "7ef7ec90cd26910fb3a591bb7708f311c01c31a4", "filename": "src/test/rustdoc-gui/sidebar-links-color.goml", "status": "modified", "additions": 162, "deletions": 224, "changes": 386, "blob_url": "https://github.com/rust-lang/rust/blob/2024f70379bdb45eb671eb1d23c1175320def736/src%2Ftest%2Frustdoc-gui%2Fsidebar-links-color.goml", "raw_url": "https://github.com/rust-lang/rust/raw/2024f70379bdb45eb671eb1d23c1175320def736/src%2Ftest%2Frustdoc-gui%2Fsidebar-links-color.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsidebar-links-color.goml?ref=2024f70379bdb45eb671eb1d23c1175320def736", "patch": "@@ -4,230 +4,168 @@ goto: \"file://\" + |DOC_PATH| + \"/test_docs/struct.Foo.html\"\n // This is needed so that the text color is computed.\n show-text: true\n \n-// Ayu theme\n-local-storage: {\n-    \"rustdoc-theme\": \"ayu\",\n-    \"rustdoc-use-system-theme\": \"false\",\n-}\n-reload:\n-\n-// Struct\n-assert-css: (\n-    \".sidebar .block.struct a:not(.current)\",\n-    {\"color\": \"rgb(83, 177, 219)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".sidebar .block.struct a:not(.current)\"\n-assert-css: (\n-    \".sidebar .block.struct a:hover\",\n-    {\"color\": \"rgb(255, 180, 76)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-// Enum\n-assert-css: (\n-    \".sidebar .block.enum a\",\n-    {\"color\": \"rgb(83, 177, 219)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".sidebar .block.enum a\"\n-assert-css: (\n-    \".sidebar .block.enum a:hover\",\n-    {\"color\": \"rgb(255, 180, 76)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-// Union\n-assert-css: (\n-    \".sidebar .block.union a\",\n-    {\"color\": \"rgb(83, 177, 219)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".sidebar .block.union a\"\n-assert-css: (\n-    \".sidebar .block.union a:hover\",\n-    {\"color\": \"rgb(255, 180, 76)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-// Trait\n-assert-css: (\n-    \".sidebar .block.trait a\",\n-    {\"color\": \"rgb(83, 177, 219)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".sidebar .block.trait a\"\n-assert-css: (\n-    \".sidebar .block.trait a:hover\",\n-    {\"color\": \"rgb(255, 180, 76)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-// Function\n-assert-css: (\n-    \".sidebar .block.fn a\",\n-    {\"color\": \"rgb(83, 177, 219)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".sidebar .block.fn a\"\n-assert-css: (\n-    \".sidebar .block.fn a:hover\",\n-    {\"color\": \"rgb(255, 180, 76)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-// Type definition\n-assert-css: (\n-    \".sidebar .block.type a\",\n-    {\"color\": \"rgb(83, 177, 219)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".sidebar .block.type a\"\n-assert-css: (\n-    \".sidebar .block.type a:hover\",\n-    {\"color\": \"rgb(255, 180, 76)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-// Keyword\n-assert-css: (\n-    \".sidebar .block.keyword a\",\n-    {\"color\": \"rgb(83, 177, 219)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".sidebar .block.keyword a\"\n-assert-css: (\n-    \".sidebar .block.keyword a:hover\",\n-    {\"color\": \"rgb(255, 180, 76)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-\n-// Dark theme\n-local-storage: {\"rustdoc-theme\": \"dark\"}\n-reload:\n-\n-// Struct\n-assert-css: (\n-    \".sidebar .block.struct a:not(.current)\",\n-    {\"color\": \"rgb(253, 191, 53)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".sidebar .block.struct a:not(.current)\"\n-assert-css: (\n-    \".sidebar .block.struct a:hover\",\n-    {\"color\": \"rgb(253, 191, 53)\", \"background-color\": \"rgb(68, 68, 68)\"},\n-)\n-// Enum\n-assert-css: (\n-    \".sidebar .block.enum a\",\n-    {\"color\": \"rgb(253, 191, 53)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".sidebar .block.enum a\"\n-assert-css: (\n-    \".sidebar .block.enum a:hover\",\n-    {\"color\": \"rgb(253, 191, 53)\", \"background-color\": \"rgb(68, 68, 68)\"},\n-)\n-// Union\n-assert-css: (\n-    \".sidebar .block.union a\",\n-    {\"color\": \"rgb(253, 191, 53)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".sidebar .block.union a\"\n-assert-css: (\n-    \".sidebar .block.union a:hover\",\n-    {\"color\": \"rgb(253, 191, 53)\", \"background-color\": \"rgb(68, 68, 68)\"},\n+define-function: (\n+    \"check-colors\",\n+    (\n+        theme, struct, struct_hover, struct_hover_background, enum, enum_hover,\n+        enum_hover_background, union, union_hover, union_hover_background, trait, trait_hover,\n+        trait_hover_background, fn, fn_hover, fn_hover_background, type, type_hover,\n+        type_hover_background, keyword, keyword_hover, keyword_hover_background,\n+    ),\n+    [\n+        (\"local-storage\", { \"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\" }),\n+        (\"reload\"),\n+        // Struct\n+        (\"assert-css\", (\n+            \".sidebar .block.struct a:not(.current)\",\n+            {\"color\": |struct|, \"background-color\": \"rgba(0, 0, 0, 0)\"},\n+        )),\n+        (\"move-cursor-to\", \".sidebar .block.struct a:not(.current)\"),\n+        (\"assert-css\", (\n+            \".sidebar .block.struct a:hover\",\n+            {\"color\": |struct_hover|, \"background-color\": |struct_hover_background|},\n+        )),\n+        // Enum\n+        (\"assert-css\", (\n+            \".sidebar .block.enum a\",\n+            {\"color\": |enum|, \"background-color\": \"rgba(0, 0, 0, 0)\"},\n+        )),\n+        (\"move-cursor-to\", \".sidebar .block.enum a\"),\n+        (\"assert-css\", (\n+            \".sidebar .block.enum a:hover\",\n+            {\"color\": |enum_hover|, \"background-color\": |enum_hover_background|},\n+        )),\n+        // Union\n+        (\"assert-css\", (\n+            \".sidebar .block.union a\",\n+            {\"color\": |union|, \"background-color\": \"rgba(0, 0, 0, 0)\"},\n+        )),\n+        (\"move-cursor-to\", \".sidebar .block.union a\"),\n+        (\"assert-css\", (\n+            \".sidebar .block.union a:hover\",\n+            {\"color\": |union_hover|, \"background-color\": |union_hover_background|},\n+        )),\n+        // Trait\n+        (\"assert-css\", (\n+            \".sidebar .block.trait a\",\n+            {\"color\": |trait|, \"background-color\": \"rgba(0, 0, 0, 0)\"},\n+        )),\n+        (\"move-cursor-to\", \".sidebar .block.trait a\"),\n+        (\"assert-css\", (\n+            \".sidebar .block.trait a:hover\",\n+            {\"color\": |trait_hover|, \"background-color\": |trait_hover_background|},\n+        )),\n+        // Function\n+        (\"assert-css\", (\n+            \".sidebar .block.fn a\",\n+            {\"color\": |fn|, \"background-color\": \"rgba(0, 0, 0, 0)\"},\n+        )),\n+        (\"move-cursor-to\", \".sidebar .block.fn a\"),\n+        (\"assert-css\", (\n+            \".sidebar .block.fn a:hover\",\n+            {\"color\": |fn_hover|, \"background-color\": |fn_hover_background|},\n+        )),\n+        // Type definition\n+        (\"assert-css\", (\n+            \".sidebar .block.type a\",\n+            {\"color\": |type|, \"background-color\": \"rgba(0, 0, 0, 0)\"},\n+        )),\n+        (\"move-cursor-to\", \".sidebar .block.type a\"),\n+        (\"assert-css\", (\n+            \".sidebar .block.type a:hover\",\n+            {\"color\": |type_hover|, \"background-color\": |type_hover_background|},\n+        )),\n+        // Keyword\n+        (\"assert-css\", (\n+            \".sidebar .block.keyword a\",\n+            {\"color\": |keyword|, \"background-color\": \"rgba(0, 0, 0, 0)\"},\n+        )),\n+        (\"move-cursor-to\", \".sidebar .block.keyword a\"),\n+        (\"assert-css\", (\n+            \".sidebar .block.keyword a:hover\",\n+            {\"color\": |keyword_hover|, \"background-color\": |keyword_hover_background|},\n+        )),\n+    ]\n )\n-// Trait\n-assert-css: (\n-    \".sidebar .block.trait a\",\n-    {\"color\": \"rgb(253, 191, 53)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".sidebar .block.trait a\"\n-assert-css: (\n-    \".sidebar .block.trait a:hover\",\n-    {\"color\": \"rgb(253, 191, 53)\", \"background-color\": \"rgb(68, 68, 68)\"},\n-)\n-// Function\n-assert-css: (\n-    \".sidebar .block.fn a\",\n-    {\"color\": \"rgb(253, 191, 53)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".sidebar .block.fn a\"\n-assert-css: (\n-    \".sidebar .block.fn a:hover\",\n-    {\"color\": \"rgb(253, 191, 53)\", \"background-color\": \"rgb(68, 68, 68)\"},\n-)\n-// Type definition\n-assert-css: (\n-    \".sidebar .block.type a\",\n-    {\"color\": \"rgb(253, 191, 53)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".sidebar .block.type a\"\n-assert-css: (\n-    \".sidebar .block.type a:hover\",\n-    {\"color\": \"rgb(253, 191, 53)\", \"background-color\": \"rgb(68, 68, 68)\"},\n-)\n-// Keyword\n-assert-css: (\n-    \".sidebar .block.keyword a\",\n-    {\"color\": \"rgb(253, 191, 53)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".sidebar .block.keyword a\"\n-assert-css: (\n-    \".sidebar .block.keyword a:hover\",\n-    {\"color\": \"rgb(253, 191, 53)\", \"background-color\": \"rgb(68, 68, 68)\"},\n-)\n-\n-// Light theme\n-local-storage: {\"rustdoc-theme\": \"light\"}\n-reload:\n \n-// Struct\n-assert-css: (\n-    \".sidebar .block.struct a:not(.current)\",\n-    {\"color\": \"rgb(53, 109, 164)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".sidebar .block.struct a:not(.current)\"\n-assert-css: (\n-    \".sidebar .block.struct a:hover\",\n-    {\"color\": \"rgb(53, 109, 164)\", \"background-color\": \"rgb(255, 255, 255)\"},\n-)\n-// Enum\n-assert-css: (\n-    \".sidebar .block.enum a\",\n-    {\"color\": \"rgb(53, 109, 164)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".sidebar .block.enum a\"\n-assert-css: (\n-    \".sidebar .block.enum a:hover\",\n-    {\"color\": \"rgb(53, 109, 164)\", \"background-color\": \"rgb(255, 255, 255)\"},\n-)\n-// Union\n-assert-css: (\n-    \".sidebar .block.union a\",\n-    {\"color\": \"rgb(53, 109, 164)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".sidebar .block.union a\"\n-assert-css: (\n-    \".sidebar .block.union a:hover\",\n-    {\"color\": \"rgb(53, 109, 164)\", \"background-color\": \"rgb(255, 255, 255)\"},\n-)\n-// Trait\n-assert-css: (\n-    \".sidebar .block.trait a\",\n-    {\"color\": \"rgb(53, 109, 164)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".sidebar .block.trait a\"\n-assert-css: (\n-    \".sidebar .block.trait a:hover\",\n-    {\"color\": \"rgb(53, 109, 164)\", \"background-color\": \"rgb(255, 255, 255)\"},\n-)\n-// Function\n-assert-css: (\n-    \".sidebar .block.fn a\",\n-    {\"color\": \"rgb(53, 109, 164)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".sidebar .block.fn a\"\n-assert-css: (\n-    \".sidebar .block.fn a:hover\",\n-    {\"color\": \"rgb(53, 109, 164)\", \"background-color\": \"rgb(255, 255, 255)\"},\n-)\n-// Type definition\n-assert-css: (\n-    \".sidebar .block.type a\",\n-    {\"color\": \"rgb(53, 109, 164)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".sidebar .block.type a\"\n-assert-css: (\n-    \".sidebar .block.type a:hover\",\n-    {\"color\": \"rgb(53, 109, 164)\", \"background-color\": \"rgb(255, 255, 255)\"},\n-)\n-// Keyword\n-assert-css: (\n-    \".sidebar .block.keyword a\",\n-    {\"color\": \"rgb(53, 109, 164)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".sidebar .block.keyword a\"\n-assert-css: (\n-    \".sidebar .block.keyword a:hover\",\n-    {\"color\": \"rgb(53, 109, 164)\", \"background-color\": \"rgb(255, 255, 255)\"},\n+call-function: (\n+    \"check-colors\",\n+    {\n+        \"theme\": \"ayu\",\n+        \"struct\": \"rgb(83, 177, 219)\",\n+        \"struct_hover\": \"rgb(255, 180, 76)\",\n+        \"struct_hover_background\": \"rgba(0, 0, 0, 0)\",\n+        \"enum\": \"rgb(83, 177, 219)\",\n+        \"enum_hover\": \"rgb(255, 180, 76)\",\n+        \"enum_hover_background\": \"rgba(0, 0, 0, 0)\",\n+        \"union\": \"rgb(83, 177, 219)\",\n+        \"union_hover\": \"rgb(255, 180, 76)\",\n+        \"union_hover_background\": \"rgba(0, 0, 0, 0)\",\n+        \"trait\": \"rgb(83, 177, 219)\",\n+        \"trait_hover\": \"rgb(255, 180, 76)\",\n+        \"trait_hover_background\": \"rgba(0, 0, 0, 0)\",\n+        \"fn\": \"rgb(83, 177, 219)\",\n+        \"fn_hover\": \"rgb(255, 180, 76)\",\n+        \"fn_hover_background\": \"rgba(0, 0, 0, 0)\",\n+        \"type\": \"rgb(83, 177, 219)\",\n+        \"type_hover\": \"rgb(255, 180, 76)\",\n+        \"type_hover_background\": \"rgba(0, 0, 0, 0)\",\n+        \"keyword\": \"rgb(83, 177, 219)\",\n+        \"keyword_hover\": \"rgb(255, 180, 76)\",\n+        \"keyword_hover_background\": \"rgba(0, 0, 0, 0)\",\n+    }\n+)\n+call-function: (\n+    \"check-colors\",\n+    {\n+        \"theme\": \"dark\",\n+        \"struct\": \"rgb(253, 191, 53)\",\n+        \"struct_hover\": \"rgb(253, 191, 53)\",\n+        \"struct_hover_background\": \"rgb(68, 68, 68)\",\n+        \"enum\": \"rgb(253, 191, 53)\",\n+        \"enum_hover\": \"rgb(253, 191, 53)\",\n+        \"enum_hover_background\": \"rgb(68, 68, 68)\",\n+        \"union\": \"rgb(253, 191, 53)\",\n+        \"union_hover\": \"rgb(253, 191, 53)\",\n+        \"union_hover_background\": \"rgb(68, 68, 68)\",\n+        \"trait\": \"rgb(253, 191, 53)\",\n+        \"trait_hover\": \"rgb(253, 191, 53)\",\n+        \"trait_hover_background\": \"rgb(68, 68, 68)\",\n+        \"fn\": \"rgb(253, 191, 53)\",\n+        \"fn_hover\": \"rgb(253, 191, 53)\",\n+        \"fn_hover_background\": \"rgb(68, 68, 68)\",\n+        \"type\": \"rgb(253, 191, 53)\",\n+        \"type_hover\": \"rgb(253, 191, 53)\",\n+        \"type_hover_background\": \"rgb(68, 68, 68)\",\n+        \"keyword\": \"rgb(253, 191, 53)\",\n+        \"keyword_hover\": \"rgb(253, 191, 53)\",\n+        \"keyword_hover_background\": \"rgb(68, 68, 68)\",\n+    }\n+)\n+call-function: (\n+    \"check-colors\",\n+    {\n+        \"theme\": \"light\",\n+        \"struct\": \"rgb(53, 109, 164)\",\n+        \"struct_hover\": \"rgb(53, 109, 164)\",\n+        \"struct_hover_background\": \"rgb(255, 255, 255)\",\n+        \"enum\": \"rgb(53, 109, 164)\",\n+        \"enum_hover\": \"rgb(53, 109, 164)\",\n+        \"enum_hover_background\": \"rgb(255, 255, 255)\",\n+        \"union\": \"rgb(53, 109, 164)\",\n+        \"union_hover\": \"rgb(53, 109, 164)\",\n+        \"union_hover_background\": \"rgb(255, 255, 255)\",\n+        \"trait\": \"rgb(53, 109, 164)\",\n+        \"trait_hover\": \"rgb(53, 109, 164)\",\n+        \"trait_hover_background\": \"rgb(255, 255, 255)\",\n+        \"fn\": \"rgb(53, 109, 164)\",\n+        \"fn_hover\": \"rgb(53, 109, 164)\",\n+        \"fn_hover_background\": \"rgb(255, 255, 255)\",\n+        \"type\": \"rgb(53, 109, 164)\",\n+        \"type_hover\": \"rgb(53, 109, 164)\",\n+        \"type_hover_background\": \"rgb(255, 255, 255)\",\n+        \"keyword\": \"rgb(53, 109, 164)\",\n+        \"keyword_hover\": \"rgb(53, 109, 164)\",\n+        \"keyword_hover_background\": \"rgb(255, 255, 255)\",\n+    }\n )"}]}