{"sha": "709efd9df6e21ca07c7c0cceea468663f8a52c23", "node_id": "MDY6Q29tbWl0NzI0NzEyOjcwOWVmZDlkZjZlMjFjYTA3YzdjMGNjZWVhNDY4NjYzZjhhNTJjMjM=", "commit": {"author": {"name": "Ian Jackson", "email": "ijackson@chiark.greenend.org.uk", "date": "2020-10-28T17:53:12Z"}, "committer": {"name": "Ian Jackson", "email": "ijackson@chiark.greenend.org.uk", "date": "2020-10-28T18:01:06Z"}, "message": "rustdoc: Provide a --default-theme THEME option\n\nThis is a fairly simple special case of --default-eetting.  We must\nset both \"theme\" and \"use-system-theme\".\n\nProviding it separately enables us to document a way to set the theme\nwithout expoosing the individual settings keywords, which are quite\ncomplex.\n\nSigned-off-by: Ian Jackson <ijackson@chiark.greenend.org.uk>", "tree": {"sha": "409a68e00a606e7ee78cb099402749ae0d6305ef", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/409a68e00a606e7ee78cb099402749ae0d6305ef"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/709efd9df6e21ca07c7c0cceea468663f8a52c23", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/709efd9df6e21ca07c7c0cceea468663f8a52c23", "html_url": "https://github.com/rust-lang/rust/commit/709efd9df6e21ca07c7c0cceea468663f8a52c23", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/709efd9df6e21ca07c7c0cceea468663f8a52c23/comments", "author": {"login": "ijackson", "id": 2090772, "node_id": "MDQ6VXNlcjIwOTA3NzI=", "avatar_url": "https://avatars.githubusercontent.com/u/2090772?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ijackson", "html_url": "https://github.com/ijackson", "followers_url": "https://api.github.com/users/ijackson/followers", "following_url": "https://api.github.com/users/ijackson/following{/other_user}", "gists_url": "https://api.github.com/users/ijackson/gists{/gist_id}", "starred_url": "https://api.github.com/users/ijackson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ijackson/subscriptions", "organizations_url": "https://api.github.com/users/ijackson/orgs", "repos_url": "https://api.github.com/users/ijackson/repos", "events_url": "https://api.github.com/users/ijackson/events{/privacy}", "received_events_url": "https://api.github.com/users/ijackson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ijackson", "id": 2090772, "node_id": "MDQ6VXNlcjIwOTA3NzI=", "avatar_url": "https://avatars.githubusercontent.com/u/2090772?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ijackson", "html_url": "https://github.com/ijackson", "followers_url": "https://api.github.com/users/ijackson/followers", "following_url": "https://api.github.com/users/ijackson/following{/other_user}", "gists_url": "https://api.github.com/users/ijackson/gists{/gist_id}", "starred_url": "https://api.github.com/users/ijackson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ijackson/subscriptions", "organizations_url": "https://api.github.com/users/ijackson/orgs", "repos_url": "https://api.github.com/users/ijackson/repos", "events_url": "https://api.github.com/users/ijackson/events{/privacy}", "received_events_url": "https://api.github.com/users/ijackson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d8a449756172f7be072b87a545bacf91e10d1bb9", "url": "https://api.github.com/repos/rust-lang/rust/commits/d8a449756172f7be072b87a545bacf91e10d1bb9", "html_url": "https://github.com/rust-lang/rust/commit/d8a449756172f7be072b87a545bacf91e10d1bb9"}], "stats": {"total": 21, "additions": 21, "deletions": 0}, "files": [{"sha": "2558f9e0d789714ceee62717846e6ca2ab11915c", "filename": "src/librustdoc/config.rs", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/709efd9df6e21ca07c7c0cceea468663f8a52c23/src%2Flibrustdoc%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/709efd9df6e21ca07c7c0cceea468663f8a52c23/src%2Flibrustdoc%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fconfig.rs?ref=709efd9df6e21ca07c7c0cceea468663f8a52c23", "patch": "@@ -378,6 +378,17 @@ impl Options {\n         };\n \n         let mut default_settings: Vec<Vec<(String, String)>> = vec![\n+            matches\n+                .opt_str(\"default-theme\")\n+                .iter()\n+                .map(|theme| {\n+                    vec![\n+                        (\"use-system-theme\".to_string(), \"false\".to_string()),\n+                        (\"theme\".to_string(), theme.to_string()),\n+                    ]\n+                })\n+                .flatten()\n+                .collect(),\n             matches\n                 .opt_strs(\"default-setting\")\n                 .iter()"}, {"sha": "54463d5c3758e37465257fa78bec90061b8980b1", "filename": "src/librustdoc/lib.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/709efd9df6e21ca07c7c0cceea468663f8a52c23/src%2Flibrustdoc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/709efd9df6e21ca07c7c0cceea468663f8a52c23/src%2Flibrustdoc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Flib.rs?ref=709efd9df6e21ca07c7c0cceea468663f8a52c23", "patch": "@@ -269,6 +269,16 @@ fn opts() -> Vec<RustcOptGroup> {\n                 \"sort modules by where they appear in the program, rather than alphabetically\",\n             )\n         }),\n+        unstable(\"default-theme\", |o| {\n+            o.optopt(\n+                \"\",\n+                \"default-theme\",\n+                \"Set the default theme.  THEME should be the theme name, generally lowercase. \\\n+                 If an unknown default theme is specified, the builtin default is used. \\\n+                 The set of themes, and the rustdoc built-in default is not stable.\",\n+                \"THEME\",\n+            )\n+        }),\n         unstable(\"default-setting\", |o| {\n             o.optmulti(\n                 \"\","}]}