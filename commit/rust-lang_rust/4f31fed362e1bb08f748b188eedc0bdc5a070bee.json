{"sha": "4f31fed362e1bb08f748b188eedc0bdc5a070bee", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRmMzFmZWQzNjJlMWJiMDhmNzQ4YjE4OGVlZGMwYmRjNWEwNzBiZWU=", "commit": {"author": {"name": "bravomikekilo", "email": "bmk1221@126.com", "date": "2019-08-14T13:20:04Z"}, "committer": {"name": "bravomikekilo", "email": "bmk1221@126.com", "date": "2019-08-14T13:20:04Z"}, "message": "fix test position", "tree": {"sha": "104dad5eb640cb992b984191ea70b3259d8535fb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/104dad5eb640cb992b984191ea70b3259d8535fb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4f31fed362e1bb08f748b188eedc0bdc5a070bee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4f31fed362e1bb08f748b188eedc0bdc5a070bee", "html_url": "https://github.com/rust-lang/rust/commit/4f31fed362e1bb08f748b188eedc0bdc5a070bee", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4f31fed362e1bb08f748b188eedc0bdc5a070bee/comments", "author": {"login": "bravomikekilo", "id": 17548436, "node_id": "MDQ6VXNlcjE3NTQ4NDM2", "avatar_url": "https://avatars.githubusercontent.com/u/17548436?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bravomikekilo", "html_url": "https://github.com/bravomikekilo", "followers_url": "https://api.github.com/users/bravomikekilo/followers", "following_url": "https://api.github.com/users/bravomikekilo/following{/other_user}", "gists_url": "https://api.github.com/users/bravomikekilo/gists{/gist_id}", "starred_url": "https://api.github.com/users/bravomikekilo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bravomikekilo/subscriptions", "organizations_url": "https://api.github.com/users/bravomikekilo/orgs", "repos_url": "https://api.github.com/users/bravomikekilo/repos", "events_url": "https://api.github.com/users/bravomikekilo/events{/privacy}", "received_events_url": "https://api.github.com/users/bravomikekilo/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bravomikekilo", "id": 17548436, "node_id": "MDQ6VXNlcjE3NTQ4NDM2", "avatar_url": "https://avatars.githubusercontent.com/u/17548436?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bravomikekilo", "html_url": "https://github.com/bravomikekilo", "followers_url": "https://api.github.com/users/bravomikekilo/followers", "following_url": "https://api.github.com/users/bravomikekilo/following{/other_user}", "gists_url": "https://api.github.com/users/bravomikekilo/gists{/gist_id}", "starred_url": "https://api.github.com/users/bravomikekilo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bravomikekilo/subscriptions", "organizations_url": "https://api.github.com/users/bravomikekilo/orgs", "repos_url": "https://api.github.com/users/bravomikekilo/repos", "events_url": "https://api.github.com/users/bravomikekilo/events{/privacy}", "received_events_url": "https://api.github.com/users/bravomikekilo/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3fce56280feeb7d621cd98a61c6157393be72c00", "url": "https://api.github.com/repos/rust-lang/rust/commits/3fce56280feeb7d621cd98a61c6157393be72c00", "html_url": "https://github.com/rust-lang/rust/commit/3fce56280feeb7d621cd98a61c6157393be72c00"}], "stats": {"total": 248, "additions": 130, "deletions": 118}, "files": [{"sha": "50c70b3b3a33ffcdc1619ac4a47c27cfab34769c", "filename": "crates/ra_parser/src/grammar/expressions/atom.rs", "status": "modified", "additions": 6, "deletions": 10, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/4f31fed362e1bb08f748b188eedc0bdc5a070bee/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fexpressions%2Fatom.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f31fed362e1bb08f748b188eedc0bdc5a070bee/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fexpressions%2Fatom.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fexpressions%2Fatom.rs?ref=4f31fed362e1bb08f748b188eedc0bdc5a070bee", "patch": "@@ -111,6 +111,12 @@ pub(super) fn atom_expr(p: &mut Parser, r: Restrictions) -> Option<(CompletedMar\n             block_expr(p, Some(m))\n         }\n         T!['{'] => {\n+            // test for_range_from\n+            // fn foo() {\n+            //    for x in 0 .. {\n+            //        break;\n+            //    }\n+            // }\n             if r.forbid_structs {\n                 return None;\n             } else {\n@@ -313,16 +319,6 @@ fn while_expr(p: &mut Parser, m: Option<Marker>) -> CompletedMarker {\n // fn foo() {\n //     for x in [] {};\n // }\n-\n-// test for_range_block\n-// fn foo() {\n-//    for x in 0 .. {\n-//        break;\n-//    }\n-//    for _x in 0 .. (0 .. {1 + 2}).sum::<u32>() {\n-//        break;\n-//    }\n-// }\n fn for_expr(p: &mut Parser, m: Option<Marker>) -> CompletedMarker {\n     assert!(p.at(T![for]));\n     let m = m.unwrap_or_else(|| p.start());"}, {"sha": "7da4dbb8b38638291827840fe90f444d12c7c104", "filename": "crates/ra_syntax/test_data/parser/inline/ok/0142_for_range_block.txt", "status": "removed", "additions": 0, "deletions": 105, "changes": 105, "blob_url": "https://github.com/rust-lang/rust/blob/3fce56280feeb7d621cd98a61c6157393be72c00/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0142_for_range_block.txt", "raw_url": "https://github.com/rust-lang/rust/raw/3fce56280feeb7d621cd98a61c6157393be72c00/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0142_for_range_block.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0142_for_range_block.txt?ref=3fce56280feeb7d621cd98a61c6157393be72c00", "patch": "@@ -1,105 +0,0 @@\n-SOURCE_FILE@[0; 118)\n-  FN_DEF@[0; 117)\n-    FN_KW@[0; 2) \"fn\"\n-    WHITESPACE@[2; 3) \" \"\n-    NAME@[3; 6)\n-      IDENT@[3; 6) \"foo\"\n-    PARAM_LIST@[6; 8)\n-      L_PAREN@[6; 7) \"(\"\n-      R_PAREN@[7; 8) \")\"\n-    WHITESPACE@[8; 9) \" \"\n-    BLOCK@[9; 117)\n-      L_CURLY@[9; 10) \"{\"\n-      WHITESPACE@[10; 14) \"\\n   \"\n-      EXPR_STMT@[14; 48)\n-        FOR_EXPR@[14; 48)\n-          FOR_KW@[14; 17) \"for\"\n-          WHITESPACE@[17; 18) \" \"\n-          BIND_PAT@[18; 19)\n-            NAME@[18; 19)\n-              IDENT@[18; 19) \"x\"\n-          WHITESPACE@[19; 20) \" \"\n-          IN_KW@[20; 22) \"in\"\n-          WHITESPACE@[22; 23) \" \"\n-          RANGE_EXPR@[23; 27)\n-            LITERAL@[23; 24)\n-              INT_NUMBER@[23; 24) \"0\"\n-            WHITESPACE@[24; 25) \" \"\n-            DOTDOT@[25; 27) \"..\"\n-          WHITESPACE@[27; 28) \" \"\n-          BLOCK@[28; 48)\n-            L_CURLY@[28; 29) \"{\"\n-            WHITESPACE@[29; 37) \"\\n       \"\n-            EXPR_STMT@[37; 43)\n-              BREAK_EXPR@[37; 42)\n-                BREAK_KW@[37; 42) \"break\"\n-              SEMI@[42; 43) \";\"\n-            WHITESPACE@[43; 47) \"\\n   \"\n-            R_CURLY@[47; 48) \"}\"\n-      WHITESPACE@[48; 52) \"\\n   \"\n-      FOR_EXPR@[52; 115)\n-        FOR_KW@[52; 55) \"for\"\n-        WHITESPACE@[55; 56) \" \"\n-        BIND_PAT@[56; 58)\n-          NAME@[56; 58)\n-            IDENT@[56; 58) \"_x\"\n-        WHITESPACE@[58; 59) \" \"\n-        IN_KW@[59; 61) \"in\"\n-        WHITESPACE@[61; 62) \" \"\n-        RANGE_EXPR@[62; 94)\n-          LITERAL@[62; 63)\n-            INT_NUMBER@[62; 63) \"0\"\n-          WHITESPACE@[63; 64) \" \"\n-          DOTDOT@[64; 66) \"..\"\n-          WHITESPACE@[66; 67) \" \"\n-          METHOD_CALL_EXPR@[67; 94)\n-            PAREN_EXPR@[67; 81)\n-              L_PAREN@[67; 68) \"(\"\n-              RANGE_EXPR@[68; 80)\n-                LITERAL@[68; 69)\n-                  INT_NUMBER@[68; 69) \"0\"\n-                WHITESPACE@[69; 70) \" \"\n-                DOTDOT@[70; 72) \"..\"\n-                WHITESPACE@[72; 73) \" \"\n-                BLOCK_EXPR@[73; 80)\n-                  BLOCK@[73; 80)\n-                    L_CURLY@[73; 74) \"{\"\n-                    BIN_EXPR@[74; 79)\n-                      LITERAL@[74; 75)\n-                        INT_NUMBER@[74; 75) \"1\"\n-                      WHITESPACE@[75; 76) \" \"\n-                      PLUS@[76; 77) \"+\"\n-                      WHITESPACE@[77; 78) \" \"\n-                      LITERAL@[78; 79)\n-                        INT_NUMBER@[78; 79) \"2\"\n-                    R_CURLY@[79; 80) \"}\"\n-              R_PAREN@[80; 81) \")\"\n-            DOT@[81; 82) \".\"\n-            NAME_REF@[82; 85)\n-              IDENT@[82; 85) \"sum\"\n-            TYPE_ARG_LIST@[85; 92)\n-              COLONCOLON@[85; 87) \"::\"\n-              L_ANGLE@[87; 88) \"<\"\n-              TYPE_ARG@[88; 91)\n-                PATH_TYPE@[88; 91)\n-                  PATH@[88; 91)\n-                    PATH_SEGMENT@[88; 91)\n-                      NAME_REF@[88; 91)\n-                        IDENT@[88; 91) \"u32\"\n-              R_ANGLE@[91; 92) \">\"\n-            ARG_LIST@[92; 94)\n-              L_PAREN@[92; 93) \"(\"\n-              R_PAREN@[93; 94) \")\"\n-        WHITESPACE@[94; 95) \" \"\n-        BLOCK@[95; 115)\n-          L_CURLY@[95; 96) \"{\"\n-          WHITESPACE@[96; 104) \"\\n       \"\n-          EXPR_STMT@[104; 110)\n-            BREAK_EXPR@[104; 109)\n-              BREAK_KW@[104; 109) \"break\"\n-            SEMI@[109; 110) \";\"\n-          WHITESPACE@[110; 114) \"\\n   \"\n-          R_CURLY@[114; 115) \"}\"\n-      WHITESPACE@[115; 116) \"\\n\"\n-      R_CURLY@[116; 117) \"}\"\n-  WHITESPACE@[117; 118) \"\\n\""}, {"sha": "af0d40a7aa20c14c7bbea59b86512cb5b4a61ff2", "filename": "crates/ra_syntax/test_data/parser/inline/ok/0142_for_range_from.rs", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/4f31fed362e1bb08f748b188eedc0bdc5a070bee/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0142_for_range_from.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f31fed362e1bb08f748b188eedc0bdc5a070bee/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0142_for_range_from.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0142_for_range_from.rs?ref=4f31fed362e1bb08f748b188eedc0bdc5a070bee", "patch": "@@ -0,0 +1,5 @@\n+fn foo() {\n+   for x in 0 .. {\n+       break;\n+   }\n+}"}, {"sha": "9e5836233ae333ec09224221f548fab873ce78ab", "filename": "crates/ra_syntax/test_data/parser/inline/ok/0142_for_range_from.txt", "status": "added", "additions": 40, "deletions": 0, "changes": 40, "blob_url": "https://github.com/rust-lang/rust/blob/4f31fed362e1bb08f748b188eedc0bdc5a070bee/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0142_for_range_from.txt", "raw_url": "https://github.com/rust-lang/rust/raw/4f31fed362e1bb08f748b188eedc0bdc5a070bee/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0142_for_range_from.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0142_for_range_from.txt?ref=4f31fed362e1bb08f748b188eedc0bdc5a070bee", "patch": "@@ -0,0 +1,40 @@\n+SOURCE_FILE@[0; 51)\n+  FN_DEF@[0; 50)\n+    FN_KW@[0; 2) \"fn\"\n+    WHITESPACE@[2; 3) \" \"\n+    NAME@[3; 6)\n+      IDENT@[3; 6) \"foo\"\n+    PARAM_LIST@[6; 8)\n+      L_PAREN@[6; 7) \"(\"\n+      R_PAREN@[7; 8) \")\"\n+    WHITESPACE@[8; 9) \" \"\n+    BLOCK@[9; 50)\n+      L_CURLY@[9; 10) \"{\"\n+      WHITESPACE@[10; 14) \"\\n   \"\n+      FOR_EXPR@[14; 48)\n+        FOR_KW@[14; 17) \"for\"\n+        WHITESPACE@[17; 18) \" \"\n+        BIND_PAT@[18; 19)\n+          NAME@[18; 19)\n+            IDENT@[18; 19) \"x\"\n+        WHITESPACE@[19; 20) \" \"\n+        IN_KW@[20; 22) \"in\"\n+        WHITESPACE@[22; 23) \" \"\n+        RANGE_EXPR@[23; 27)\n+          LITERAL@[23; 24)\n+            INT_NUMBER@[23; 24) \"0\"\n+          WHITESPACE@[24; 25) \" \"\n+          DOTDOT@[25; 27) \"..\"\n+        WHITESPACE@[27; 28) \" \"\n+        BLOCK@[28; 48)\n+          L_CURLY@[28; 29) \"{\"\n+          WHITESPACE@[29; 37) \"\\n       \"\n+          EXPR_STMT@[37; 43)\n+            BREAK_EXPR@[37; 42)\n+              BREAK_KW@[37; 42) \"break\"\n+            SEMI@[42; 43) \";\"\n+          WHITESPACE@[43; 47) \"\\n   \"\n+          R_CURLY@[47; 48) \"}\"\n+      WHITESPACE@[48; 49) \"\\n\"\n+      R_CURLY@[49; 50) \"}\"\n+  WHITESPACE@[50; 51) \"\\n\""}, {"sha": "b51b1963008ce390ae9da2e985bb02b5194307ad", "filename": "crates/ra_syntax/test_data/parser/ok/0052_for_range_block.rs", "status": "renamed", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/4f31fed362e1bb08f748b188eedc0bdc5a070bee/crates%2Fra_syntax%2Ftest_data%2Fparser%2Fok%2F0052_for_range_block.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f31fed362e1bb08f748b188eedc0bdc5a070bee/crates%2Fra_syntax%2Ftest_data%2Fparser%2Fok%2F0052_for_range_block.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Fok%2F0052_for_range_block.rs?ref=4f31fed362e1bb08f748b188eedc0bdc5a070bee", "patch": "@@ -1,7 +1,4 @@\n fn foo() {\n-   for x in 0 .. {\n-       break;\n-   }\n    for _x in 0 .. (0 .. {1 + 2}).sum::<u32>() {\n        break;\n    }", "previous_filename": "crates/ra_syntax/test_data/parser/inline/ok/0142_for_range_block.rs"}, {"sha": "858f042c612187b022863bfd7e7c491f31c99f44", "filename": "crates/ra_syntax/test_data/parser/ok/0052_for_range_block.txt", "status": "added", "additions": 79, "deletions": 0, "changes": 79, "blob_url": "https://github.com/rust-lang/rust/blob/4f31fed362e1bb08f748b188eedc0bdc5a070bee/crates%2Fra_syntax%2Ftest_data%2Fparser%2Fok%2F0052_for_range_block.txt", "raw_url": "https://github.com/rust-lang/rust/raw/4f31fed362e1bb08f748b188eedc0bdc5a070bee/crates%2Fra_syntax%2Ftest_data%2Fparser%2Fok%2F0052_for_range_block.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Fok%2F0052_for_range_block.txt?ref=4f31fed362e1bb08f748b188eedc0bdc5a070bee", "patch": "@@ -0,0 +1,79 @@\n+SOURCE_FILE@[0; 80)\n+  FN_DEF@[0; 79)\n+    FN_KW@[0; 2) \"fn\"\n+    WHITESPACE@[2; 3) \" \"\n+    NAME@[3; 6)\n+      IDENT@[3; 6) \"foo\"\n+    PARAM_LIST@[6; 8)\n+      L_PAREN@[6; 7) \"(\"\n+      R_PAREN@[7; 8) \")\"\n+    WHITESPACE@[8; 9) \" \"\n+    BLOCK@[9; 79)\n+      L_CURLY@[9; 10) \"{\"\n+      WHITESPACE@[10; 14) \"\\n   \"\n+      FOR_EXPR@[14; 77)\n+        FOR_KW@[14; 17) \"for\"\n+        WHITESPACE@[17; 18) \" \"\n+        BIND_PAT@[18; 20)\n+          NAME@[18; 20)\n+            IDENT@[18; 20) \"_x\"\n+        WHITESPACE@[20; 21) \" \"\n+        IN_KW@[21; 23) \"in\"\n+        WHITESPACE@[23; 24) \" \"\n+        RANGE_EXPR@[24; 56)\n+          LITERAL@[24; 25)\n+            INT_NUMBER@[24; 25) \"0\"\n+          WHITESPACE@[25; 26) \" \"\n+          DOTDOT@[26; 28) \"..\"\n+          WHITESPACE@[28; 29) \" \"\n+          METHOD_CALL_EXPR@[29; 56)\n+            PAREN_EXPR@[29; 43)\n+              L_PAREN@[29; 30) \"(\"\n+              RANGE_EXPR@[30; 42)\n+                LITERAL@[30; 31)\n+                  INT_NUMBER@[30; 31) \"0\"\n+                WHITESPACE@[31; 32) \" \"\n+                DOTDOT@[32; 34) \"..\"\n+                WHITESPACE@[34; 35) \" \"\n+                BLOCK_EXPR@[35; 42)\n+                  BLOCK@[35; 42)\n+                    L_CURLY@[35; 36) \"{\"\n+                    BIN_EXPR@[36; 41)\n+                      LITERAL@[36; 37)\n+                        INT_NUMBER@[36; 37) \"1\"\n+                      WHITESPACE@[37; 38) \" \"\n+                      PLUS@[38; 39) \"+\"\n+                      WHITESPACE@[39; 40) \" \"\n+                      LITERAL@[40; 41)\n+                        INT_NUMBER@[40; 41) \"2\"\n+                    R_CURLY@[41; 42) \"}\"\n+              R_PAREN@[42; 43) \")\"\n+            DOT@[43; 44) \".\"\n+            NAME_REF@[44; 47)\n+              IDENT@[44; 47) \"sum\"\n+            TYPE_ARG_LIST@[47; 54)\n+              COLONCOLON@[47; 49) \"::\"\n+              L_ANGLE@[49; 50) \"<\"\n+              TYPE_ARG@[50; 53)\n+                PATH_TYPE@[50; 53)\n+                  PATH@[50; 53)\n+                    PATH_SEGMENT@[50; 53)\n+                      NAME_REF@[50; 53)\n+                        IDENT@[50; 53) \"u32\"\n+              R_ANGLE@[53; 54) \">\"\n+            ARG_LIST@[54; 56)\n+              L_PAREN@[54; 55) \"(\"\n+              R_PAREN@[55; 56) \")\"\n+        WHITESPACE@[56; 57) \" \"\n+        BLOCK@[57; 77)\n+          L_CURLY@[57; 58) \"{\"\n+          WHITESPACE@[58; 66) \"\\n       \"\n+          EXPR_STMT@[66; 72)\n+            BREAK_EXPR@[66; 71)\n+              BREAK_KW@[66; 71) \"break\"\n+            SEMI@[71; 72) \";\"\n+          WHITESPACE@[72; 76) \"\\n   \"\n+          R_CURLY@[76; 77) \"}\"\n+      WHITESPACE@[77; 78) \"\\n\"\n+      R_CURLY@[78; 79) \"}\"\n+  WHITESPACE@[79; 80) \"\\n\""}]}