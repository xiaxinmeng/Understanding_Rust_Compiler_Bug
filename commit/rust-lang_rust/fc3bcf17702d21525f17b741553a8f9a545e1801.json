{"sha": "fc3bcf17702d21525f17b741553a8f9a545e1801", "node_id": "C_kwDOAAsO6NoAKGZjM2JjZjE3NzAyZDIxNTI1ZjE3Yjc0MTU1M2E4ZjlhNTQ1ZTE4MDE", "commit": {"author": {"name": "inquisitivecrystal", "email": "22333129+inquisitivecrystal@users.noreply.github.com", "date": "2022-12-12T12:08:59Z"}, "committer": {"name": "inquisitivecrystal", "email": "22333129+inquisitivecrystal@users.noreply.github.com", "date": "2022-12-14T06:52:43Z"}, "message": "Add regression test", "tree": {"sha": "42a2ce00b96d912fda9a626963985128d5ab41f3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/42a2ce00b96d912fda9a626963985128d5ab41f3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fc3bcf17702d21525f17b741553a8f9a545e1801", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fc3bcf17702d21525f17b741553a8f9a545e1801", "html_url": "https://github.com/rust-lang/rust/commit/fc3bcf17702d21525f17b741553a8f9a545e1801", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fc3bcf17702d21525f17b741553a8f9a545e1801/comments", "author": {"login": "inquisitivecrystal", "id": 22333129, "node_id": "MDQ6VXNlcjIyMzMzMTI5", "avatar_url": "https://avatars.githubusercontent.com/u/22333129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/inquisitivecrystal", "html_url": "https://github.com/inquisitivecrystal", "followers_url": "https://api.github.com/users/inquisitivecrystal/followers", "following_url": "https://api.github.com/users/inquisitivecrystal/following{/other_user}", "gists_url": "https://api.github.com/users/inquisitivecrystal/gists{/gist_id}", "starred_url": "https://api.github.com/users/inquisitivecrystal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/inquisitivecrystal/subscriptions", "organizations_url": "https://api.github.com/users/inquisitivecrystal/orgs", "repos_url": "https://api.github.com/users/inquisitivecrystal/repos", "events_url": "https://api.github.com/users/inquisitivecrystal/events{/privacy}", "received_events_url": "https://api.github.com/users/inquisitivecrystal/received_events", "type": "User", "site_admin": false}, "committer": {"login": "inquisitivecrystal", "id": 22333129, "node_id": "MDQ6VXNlcjIyMzMzMTI5", "avatar_url": "https://avatars.githubusercontent.com/u/22333129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/inquisitivecrystal", "html_url": "https://github.com/inquisitivecrystal", "followers_url": "https://api.github.com/users/inquisitivecrystal/followers", "following_url": "https://api.github.com/users/inquisitivecrystal/following{/other_user}", "gists_url": "https://api.github.com/users/inquisitivecrystal/gists{/gist_id}", "starred_url": "https://api.github.com/users/inquisitivecrystal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/inquisitivecrystal/subscriptions", "organizations_url": "https://api.github.com/users/inquisitivecrystal/orgs", "repos_url": "https://api.github.com/users/inquisitivecrystal/repos", "events_url": "https://api.github.com/users/inquisitivecrystal/events{/privacy}", "received_events_url": "https://api.github.com/users/inquisitivecrystal/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9b312737c063a679c38c97ceb484a3a13a96ee75", "url": "https://api.github.com/repos/rust-lang/rust/commits/9b312737c063a679c38c97ceb484a3a13a96ee75", "html_url": "https://github.com/rust-lang/rust/commit/9b312737c063a679c38c97ceb484a3a13a96ee75"}], "stats": {"total": 39, "additions": 39, "deletions": 0}, "files": [{"sha": "6c68e6b046f03f394a4ace39a4aefd876a7fece5", "filename": "src/test/ui/attributes/issue-105594-invalid-attr-validation.rs", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/fc3bcf17702d21525f17b741553a8f9a545e1801/src%2Ftest%2Fui%2Fattributes%2Fissue-105594-invalid-attr-validation.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fc3bcf17702d21525f17b741553a8f9a545e1801/src%2Ftest%2Fui%2Fattributes%2Fissue-105594-invalid-attr-validation.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fattributes%2Fissue-105594-invalid-attr-validation.rs?ref=fc3bcf17702d21525f17b741553a8f9a545e1801", "patch": "@@ -0,0 +1,13 @@\n+// This checks that the attribute validation ICE in issue #105594 doesn't\n+// recur.\n+//\n+// ignore-thumbv8m.base\n+#![feature(cmse_nonsecure_entry)]\n+\n+fn main() {}\n+\n+#[track_caller] //~ ERROR attribute should be applied to a function\n+static _A: () = ();\n+\n+#[cmse_nonsecure_entry] //~ ERROR attribute should be applied to a function\n+static _B: () = (); //~| ERROR #[cmse_nonsecure_entry]` is only valid for targets"}, {"sha": "c6b2d6e78138e39899abd923fc37cbaeaf639ff4", "filename": "src/test/ui/attributes/issue-105594-invalid-attr-validation.stderr", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/fc3bcf17702d21525f17b741553a8f9a545e1801/src%2Ftest%2Fui%2Fattributes%2Fissue-105594-invalid-attr-validation.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/fc3bcf17702d21525f17b741553a8f9a545e1801/src%2Ftest%2Fui%2Fattributes%2Fissue-105594-invalid-attr-validation.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fattributes%2Fissue-105594-invalid-attr-validation.stderr?ref=fc3bcf17702d21525f17b741553a8f9a545e1801", "patch": "@@ -0,0 +1,26 @@\n+error[E0739]: attribute should be applied to a function definition\n+  --> $DIR/issue-105594-invalid-attr-validation.rs:9:1\n+   |\n+LL | #[track_caller]\n+   | ^^^^^^^^^^^^^^^\n+LL | static _A: () = ();\n+   | ------------------- not a function definition\n+\n+error: attribute should be applied to a function definition\n+  --> $DIR/issue-105594-invalid-attr-validation.rs:12:1\n+   |\n+LL | #[cmse_nonsecure_entry]\n+   | ^^^^^^^^^^^^^^^^^^^^^^^\n+LL | static _B: () = ();\n+   | ------------------- not a function definition\n+\n+error[E0775]: `#[cmse_nonsecure_entry]` is only valid for targets with the TrustZone-M extension\n+  --> $DIR/issue-105594-invalid-attr-validation.rs:12:1\n+   |\n+LL | #[cmse_nonsecure_entry]\n+   | ^^^^^^^^^^^^^^^^^^^^^^^\n+\n+error: aborting due to 3 previous errors\n+\n+Some errors have detailed explanations: E0739, E0775.\n+For more information about an error, try `rustc --explain E0739`."}]}