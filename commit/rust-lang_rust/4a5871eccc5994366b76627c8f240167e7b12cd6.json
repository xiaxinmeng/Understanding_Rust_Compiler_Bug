{"sha": "4a5871eccc5994366b76627c8f240167e7b12cd6", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRhNTg3MWVjY2M1OTk0MzY2Yjc2NjI3YzhmMjQwMTY3ZTdiMTJjZDY=", "commit": {"author": {"name": "topecongiro", "email": "seuchida@gmail.com", "date": "2017-06-16T04:57:37Z"}, "committer": {"name": "topecongiro", "email": "seuchida@gmail.com", "date": "2017-06-16T04:57:37Z"}, "message": "Use correct indentaion for vec! with semicolon", "tree": {"sha": "a1426c460d7a1fd20656efb04e16e6f3904782e3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a1426c460d7a1fd20656efb04e16e6f3904782e3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4a5871eccc5994366b76627c8f240167e7b12cd6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4a5871eccc5994366b76627c8f240167e7b12cd6", "html_url": "https://github.com/rust-lang/rust/commit/4a5871eccc5994366b76627c8f240167e7b12cd6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4a5871eccc5994366b76627c8f240167e7b12cd6/comments", "author": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "committer": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c5538d2a5864e0fe69eee02c3137e0a1f571bbb5", "url": "https://api.github.com/repos/rust-lang/rust/commits/c5538d2a5864e0fe69eee02c3137e0a1f571bbb5", "html_url": "https://github.com/rust-lang/rust/commit/c5538d2a5864e0fe69eee02c3137e0a1f571bbb5"}], "stats": {"total": 30, "additions": 21, "deletions": 9}, "files": [{"sha": "1b17ced8a42e195a3a6f6da5aa6b7a282f7395e4", "filename": "src/expr.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/4a5871eccc5994366b76627c8f240167e7b12cd6/src%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a5871eccc5994366b76627c8f240167e7b12cd6/src%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fexpr.rs?ref=4a5871eccc5994366b76627c8f240167e7b12cd6", "patch": "@@ -157,9 +157,8 @@ fn format_expr(\n         ast::ExprKind::Loop(..) |\n         ast::ExprKind::While(..) |\n         ast::ExprKind::WhileLet(..) => {\n-            to_control_flow(expr, expr_type).and_then(|control_flow| {\n-                control_flow.rewrite(context, shape)\n-            })\n+            to_control_flow(expr, expr_type)\n+                .and_then(|control_flow| control_flow.rewrite(context, shape))\n         }\n         ast::ExprKind::Block(ref block) => block.rewrite(context, shape),\n         ast::ExprKind::Match(ref cond, ref arms) => {"}, {"sha": "88bfb96c5d6a806d9b816bcf5ac72e15e689774b", "filename": "src/macros.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/4a5871eccc5994366b76627c8f240167e7b12cd6/src%2Fmacros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a5871eccc5994366b76627c8f240167e7b12cd6/src%2Fmacros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fmacros.rs?ref=4a5871eccc5994366b76627c8f240167e7b12cd6", "patch": "@@ -184,7 +184,7 @@ pub fn rewrite_macro(\n             )\n         }\n         MacroStyle::Brackets => {\n-            let mac_shape = try_opt!(shape.shrink_left(macro_name.len()));\n+            let mac_shape = try_opt!(shape.offset_left(macro_name.len()));\n             // Handle special case: `vec![expr; expr]`\n             if vec_with_semi {\n                 let (lbr, rbr) = if context.config.spaces_within_square_brackets() {\n@@ -194,21 +194,21 @@ pub fn rewrite_macro(\n                 };\n                 // 6 = `vec!` + `; `\n                 let total_overhead = lbr.len() + rbr.len() + 6;\n-                let lhs = try_opt!(expr_vec[0].rewrite(context, mac_shape));\n-                let rhs = try_opt!(expr_vec[1].rewrite(context, mac_shape));\n+                let nested_shape = mac_shape.block_indent(context.config.tab_spaces());\n+                let lhs = try_opt!(expr_vec[0].rewrite(context, nested_shape));\n+                let rhs = try_opt!(expr_vec[1].rewrite(context, nested_shape));\n                 if !lhs.contains('\\n') && !rhs.contains('\\n') &&\n                     lhs.len() + rhs.len() + total_overhead <= shape.width\n                 {\n                     Some(format!(\"{}{}{}; {}{}\", macro_name, lbr, lhs, rhs, rbr))\n                 } else {\n-                    let nested_indent = shape.indent.block_indent(context.config);\n                     Some(format!(\n                         \"{}{}\\n{}{};\\n{}{}\\n{}{}\",\n                         macro_name,\n                         lbr,\n-                        nested_indent.to_string(context.config),\n+                        nested_shape.indent.to_string(context.config),\n                         lhs,\n-                        nested_indent.to_string(context.config),\n+                        nested_shape.indent.to_string(context.config),\n                         rhs,\n                         shape.indent.to_string(context.config),\n                         rbr"}, {"sha": "0622ce5023510e084370ef03f3d934e9246230c3", "filename": "tests/source/issue-1693.rs", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/4a5871eccc5994366b76627c8f240167e7b12cd6/tests%2Fsource%2Fissue-1693.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a5871eccc5994366b76627c8f240167e7b12cd6/tests%2Fsource%2Fissue-1693.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fissue-1693.rs?ref=4a5871eccc5994366b76627c8f240167e7b12cd6", "patch": "@@ -0,0 +1,3 @@\n+fn issue1693() {\n+    let pixel_data = vec![(f16::from_f32(0.82), f16::from_f32(1.78), f16::from_f32(0.21)); 256 * 256];\n+}"}, {"sha": "85421a123bb5c65aca4fe3b07c54a3d965779f5e", "filename": "tests/target/issue-1693.rs", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/4a5871eccc5994366b76627c8f240167e7b12cd6/tests%2Ftarget%2Fissue-1693.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a5871eccc5994366b76627c8f240167e7b12cd6/tests%2Ftarget%2Fissue-1693.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fissue-1693.rs?ref=4a5871eccc5994366b76627c8f240167e7b12cd6", "patch": "@@ -0,0 +1,10 @@\n+fn issue1693() {\n+    let pixel_data = vec![\n+        (\n+            f16::from_f32(0.82),\n+            f16::from_f32(1.78),\n+            f16::from_f32(0.21)\n+        );\n+        256 * 256\n+    ];\n+}"}]}