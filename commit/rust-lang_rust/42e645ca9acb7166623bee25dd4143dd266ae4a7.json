{"sha": "42e645ca9acb7166623bee25dd4143dd266ae4a7", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQyZTY0NWNhOWFjYjcxNjY2MjNiZWUyNWRkNDE0M2RkMjY2YWU0YTc=", "commit": {"author": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2014-12-04T15:29:41Z"}, "committer": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2014-12-30T14:36:23Z"}, "message": "Patch more metadata decoding problems.", "tree": {"sha": "934769b52e5760d1a436dcb6d9e5f29ff486c980", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/934769b52e5760d1a436dcb6d9e5f29ff486c980"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/42e645ca9acb7166623bee25dd4143dd266ae4a7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/42e645ca9acb7166623bee25dd4143dd266ae4a7", "html_url": "https://github.com/rust-lang/rust/commit/42e645ca9acb7166623bee25dd4143dd266ae4a7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/42e645ca9acb7166623bee25dd4143dd266ae4a7/comments", "author": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "30e8ab01822632acd08f6c4fb5ce6b2afe82af52", "url": "https://api.github.com/repos/rust-lang/rust/commits/30e8ab01822632acd08f6c4fb5ce6b2afe82af52", "html_url": "https://github.com/rust-lang/rust/commit/30e8ab01822632acd08f6c4fb5ce6b2afe82af52"}], "stats": {"total": 14, "additions": 8, "deletions": 6}, "files": [{"sha": "a168ac7fa9a78b4395ad8effabbe42fe23386256", "filename": "src/librustc/metadata/decoder.rs", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/42e645ca9acb7166623bee25dd4143dd266ae4a7/src%2Flibrustc%2Fmetadata%2Fdecoder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/42e645ca9acb7166623bee25dd4143dd266ae4a7/src%2Flibrustc%2Fmetadata%2Fdecoder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmetadata%2Fdecoder.rs?ref=42e645ca9acb7166623bee25dd4143dd266ae4a7", "patch": "@@ -172,14 +172,15 @@ fn item_visibility(item: rbml::Doc) -> ast::Visibility {\n }\n \n fn item_sort(item: rbml::Doc) -> char {\n-    // NB(pcwalton): The default of 'r' here is relied upon in\n-    // `is_associated_type` below.\n-    let mut ret = 'r';\n+    let mut ret = None;\n     reader::tagged_docs(item, tag_item_trait_item_sort, |doc| {\n-        ret = doc.as_str_slice().as_bytes()[0] as char;\n+        ret = Some(doc.as_str_slice().as_bytes()[0] as char);\n         false\n     });\n-    ret\n+    match ret {\n+        Some(r) => r,\n+        None => panic!(\"No item_sort found\")\n+    }\n }\n \n fn item_symbol(item: rbml::Doc) -> String {"}, {"sha": "20e7cb63133df46564974ddcc08f5d20d8eec48c", "filename": "src/librustc/metadata/encoder.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/42e645ca9acb7166623bee25dd4143dd266ae4a7/src%2Flibrustc%2Fmetadata%2Fencoder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/42e645ca9acb7166623bee25dd4143dd266ae4a7/src%2Flibrustc%2Fmetadata%2Fencoder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmetadata%2Fencoder.rs?ref=42e645ca9acb7166623bee25dd4143dd266ae4a7", "patch": "@@ -898,7 +898,7 @@ fn encode_info_for_associated_type(ecx: &EncodeContext,\n     encode_visibility(rbml_w, associated_type.vis);\n     encode_family(rbml_w, 'y');\n     encode_parent_item(rbml_w, local_def(parent_id));\n-    encode_item_sort(rbml_w, 'r');\n+    encode_item_sort(rbml_w, 't');\n \n     let stab = stability::lookup(ecx.tcx, associated_type.def_id);\n     encode_stability(rbml_w, stab);\n@@ -1404,6 +1404,7 @@ fn encode_info_for_item(ecx: &EncodeContext,\n                     encode_path(rbml_w,\n                                 path.clone().chain(Some(elem).into_iter()));\n \n+                    encode_item_sort(rbml_w, 't');\n                     encode_family(rbml_w, 'y');\n \n                     is_nonstatic_method = false;"}]}