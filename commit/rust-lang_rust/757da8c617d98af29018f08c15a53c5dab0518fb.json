{"sha": "757da8c617d98af29018f08c15a53c5dab0518fb", "node_id": "C_kwDOAAsO6NoAKDc1N2RhOGM2MTdkOThhZjI5MDE4ZjA4YzE1YTUzYzVkYWIwNTE4ZmI", "commit": {"author": {"name": "Caleb Cartwright", "email": "caleb.cartwright@outlook.com", "date": "2021-10-24T18:45:19Z"}, "committer": {"name": "Caleb Cartwright", "email": "caleb.cartwright@outlook.com", "date": "2021-10-24T18:45:19Z"}, "message": "Merge remote-tracking branch 'upstream/master' into another-subtree-sync", "tree": {"sha": "420e7b7c3a4cac951d06bf2a48e0bd3bc4f1fe5c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/420e7b7c3a4cac951d06bf2a48e0bd3bc4f1fe5c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/757da8c617d98af29018f08c15a53c5dab0518fb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/757da8c617d98af29018f08c15a53c5dab0518fb", "html_url": "https://github.com/rust-lang/rust/commit/757da8c617d98af29018f08c15a53c5dab0518fb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/757da8c617d98af29018f08c15a53c5dab0518fb/comments", "author": {"login": "calebcartwright", "id": 13042488, "node_id": "MDQ6VXNlcjEzMDQyNDg4", "avatar_url": "https://avatars.githubusercontent.com/u/13042488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/calebcartwright", "html_url": "https://github.com/calebcartwright", "followers_url": "https://api.github.com/users/calebcartwright/followers", "following_url": "https://api.github.com/users/calebcartwright/following{/other_user}", "gists_url": "https://api.github.com/users/calebcartwright/gists{/gist_id}", "starred_url": "https://api.github.com/users/calebcartwright/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/calebcartwright/subscriptions", "organizations_url": "https://api.github.com/users/calebcartwright/orgs", "repos_url": "https://api.github.com/users/calebcartwright/repos", "events_url": "https://api.github.com/users/calebcartwright/events{/privacy}", "received_events_url": "https://api.github.com/users/calebcartwright/received_events", "type": "User", "site_admin": false}, "committer": {"login": "calebcartwright", "id": 13042488, "node_id": "MDQ6VXNlcjEzMDQyNDg4", "avatar_url": "https://avatars.githubusercontent.com/u/13042488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/calebcartwright", "html_url": "https://github.com/calebcartwright", "followers_url": "https://api.github.com/users/calebcartwright/followers", "following_url": "https://api.github.com/users/calebcartwright/following{/other_user}", "gists_url": "https://api.github.com/users/calebcartwright/gists{/gist_id}", "starred_url": "https://api.github.com/users/calebcartwright/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/calebcartwright/subscriptions", "organizations_url": "https://api.github.com/users/calebcartwright/orgs", "repos_url": "https://api.github.com/users/calebcartwright/repos", "events_url": "https://api.github.com/users/calebcartwright/events{/privacy}", "received_events_url": "https://api.github.com/users/calebcartwright/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "051e2b40c9417a761ca3f35b07a709580178ec61", "url": "https://api.github.com/repos/rust-lang/rust/commits/051e2b40c9417a761ca3f35b07a709580178ec61", "html_url": "https://github.com/rust-lang/rust/commit/051e2b40c9417a761ca3f35b07a709580178ec61"}, {"sha": "599b2fd9c47f913c6c3540b4805528d8bacd3d7e", "url": "https://api.github.com/repos/rust-lang/rust/commits/599b2fd9c47f913c6c3540b4805528d8bacd3d7e", "html_url": "https://github.com/rust-lang/rust/commit/599b2fd9c47f913c6c3540b4805528d8bacd3d7e"}], "stats": {"total": 123, "additions": 121, "deletions": 2}, "files": [{"sha": "13826883d2f4bdf537df1df2a687be215adbaf97", "filename": "Configurations.md", "status": "modified", "additions": 18, "deletions": 1, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/757da8c617d98af29018f08c15a53c5dab0518fb/Configurations.md", "raw_url": "https://github.com/rust-lang/rust/raw/757da8c617d98af29018f08c15a53c5dab0518fb/Configurations.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Configurations.md?ref=757da8c617d98af29018f08c15a53c5dab0518fb", "patch": "@@ -2062,7 +2062,7 @@ use sit;\n Controls the strategy for how imports are grouped together.\n \n - **Default value**: `Preserve`\n-- **Possible values**: `Preserve`, `StdExternalCrate`\n+- **Possible values**: `Preserve`, `StdExternalCrate`, `One`\n - **Stable**: No\n \n #### `Preserve` (default):\n@@ -2108,6 +2108,23 @@ use super::update::convert_publish_payload;\n use crate::models::Event;\n ```\n \n+#### `One`:\n+\n+Discard existing import groups, and create a single group for everything\n+\n+```rust\n+use super::schema::{Context, Payload};\n+use super::update::convert_publish_payload;\n+use crate::models::Event;\n+use alloc::alloc::Layout;\n+use broker::database::PooledConnection;\n+use chrono::Utc;\n+use core::f32;\n+use juniper::{FieldError, FieldResult};\n+use std::sync::Arc;\n+use uuid::Uuid;\n+```\n+\n ## `reorder_modules`\n \n Reorder `mod` declarations alphabetically in group."}, {"sha": "a17d48349c05f8a4fae87e00aee001877cfff901", "filename": "src/config/options.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/757da8c617d98af29018f08c15a53c5dab0518fb/src%2Fconfig%2Foptions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/757da8c617d98af29018f08c15a53c5dab0518fb/src%2Fconfig%2Foptions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fconfig%2Foptions.rs?ref=757da8c617d98af29018f08c15a53c5dab0518fb", "patch": "@@ -112,6 +112,8 @@ pub enum GroupImportsTactic {\n     ///  2. other imports\n     ///  3. `self` / `crate` / `super` imports\n     StdExternalCrate,\n+    /// Discard existing groups, and create a single group for everything\n+    One,\n }\n \n #[config_type]"}, {"sha": "0732c8ee70059ca372ff28c0d2445a2394c586e8", "filename": "src/reorder.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/757da8c617d98af29018f08c15a53c5dab0518fb/src%2Freorder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/757da8c617d98af29018f08c15a53c5dab0518fb/src%2Freorder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Freorder.rs?ref=757da8c617d98af29018f08c15a53c5dab0518fb", "patch": "@@ -118,7 +118,9 @@ fn rewrite_reorderable_or_regroupable_items(\n             };\n \n             let mut regrouped_items = match context.config.group_imports() {\n-                GroupImportsTactic::Preserve => vec![normalized_items],\n+                GroupImportsTactic::Preserve | GroupImportsTactic::One => {\n+                    vec![normalized_items]\n+                }\n                 GroupImportsTactic::StdExternalCrate => group_imports(normalized_items),\n             };\n "}, {"sha": "157d3857908a481154260a675327fcb4d0bf2c80", "filename": "tests/source/configs/group_imports/One-merge_imports.rs", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/757da8c617d98af29018f08c15a53c5dab0518fb/tests%2Fsource%2Fconfigs%2Fgroup_imports%2FOne-merge_imports.rs", "raw_url": "https://github.com/rust-lang/rust/raw/757da8c617d98af29018f08c15a53c5dab0518fb/tests%2Fsource%2Fconfigs%2Fgroup_imports%2FOne-merge_imports.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fconfigs%2Fgroup_imports%2FOne-merge_imports.rs?ref=757da8c617d98af29018f08c15a53c5dab0518fb", "patch": "@@ -0,0 +1,17 @@\n+// rustfmt-group_imports: One\n+// rustfmt-imports_granularity: Crate\n+use chrono::Utc;\n+use super::update::convert_publish_payload;\n+\n+use juniper::{FieldError, FieldResult};\n+use uuid::Uuid;\n+use alloc::alloc::Layout;\n+\n+use std::sync::Arc;\n+use alloc::vec::Vec;\n+\n+use broker::database::PooledConnection;\n+\n+use super::schema::{Context, Payload};\n+use core::f32;\n+use crate::models::Event;"}, {"sha": "109bd07e1ee29278e5cec6ba66a6bc0d7198e670", "filename": "tests/source/configs/group_imports/One-nested.rs", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/757da8c617d98af29018f08c15a53c5dab0518fb/tests%2Fsource%2Fconfigs%2Fgroup_imports%2FOne-nested.rs", "raw_url": "https://github.com/rust-lang/rust/raw/757da8c617d98af29018f08c15a53c5dab0518fb/tests%2Fsource%2Fconfigs%2Fgroup_imports%2FOne-nested.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fconfigs%2Fgroup_imports%2FOne-nested.rs?ref=757da8c617d98af29018f08c15a53c5dab0518fb", "patch": "@@ -0,0 +1,7 @@\n+// rustfmt-group_imports: One\n+mod test {\n+    use crate::foo::bar;\n+\n+    use std::path;\n+    use crate::foo::bar2;\n+}"}, {"sha": "f82f62c7f5b2cd0f5f4a0e287643ee6a2e37474e", "filename": "tests/source/configs/group_imports/One-no_reorder.rs", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/757da8c617d98af29018f08c15a53c5dab0518fb/tests%2Fsource%2Fconfigs%2Fgroup_imports%2FOne-no_reorder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/757da8c617d98af29018f08c15a53c5dab0518fb/tests%2Fsource%2Fconfigs%2Fgroup_imports%2FOne-no_reorder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fconfigs%2Fgroup_imports%2FOne-no_reorder.rs?ref=757da8c617d98af29018f08c15a53c5dab0518fb", "patch": "@@ -0,0 +1,16 @@\n+// rustfmt-group_imports: One\n+// rustfmt-reorder_imports: false\n+use chrono::Utc;\n+use super::update::convert_publish_payload;\n+\n+use juniper::{FieldError, FieldResult};\n+use uuid::Uuid;\n+use alloc::alloc::Layout;\n+\n+use std::sync::Arc;\n+\n+use broker::database::PooledConnection;\n+\n+use super::schema::{Context, Payload};\n+use core::f32;\n+use crate::models::Event;"}, {"sha": "5ab7a950805b18791e227ef07b8cf499aace9f47", "filename": "tests/source/configs/group_imports/One.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/757da8c617d98af29018f08c15a53c5dab0518fb/tests%2Fsource%2Fconfigs%2Fgroup_imports%2FOne.rs", "raw_url": "https://github.com/rust-lang/rust/raw/757da8c617d98af29018f08c15a53c5dab0518fb/tests%2Fsource%2Fconfigs%2Fgroup_imports%2FOne.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fconfigs%2Fgroup_imports%2FOne.rs?ref=757da8c617d98af29018f08c15a53c5dab0518fb", "patch": "@@ -0,0 +1,15 @@\n+// rustfmt-group_imports: One\n+use chrono::Utc;\n+use super::update::convert_publish_payload;\n+\n+use juniper::{FieldError, FieldResult};\n+use uuid::Uuid;\n+use alloc::alloc::Layout;\n+\n+use std::sync::Arc;\n+\n+use broker::database::PooledConnection;\n+\n+use super::schema::{Context, Payload};\n+use core::f32;\n+use crate::models::Event;"}, {"sha": "52e0e1c5ac215a9346ec9bed29c5be36db82da33", "filename": "tests/target/configs/group_imports/One-merge_imports.rs", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/757da8c617d98af29018f08c15a53c5dab0518fb/tests%2Ftarget%2Fconfigs%2Fgroup_imports%2FOne-merge_imports.rs", "raw_url": "https://github.com/rust-lang/rust/raw/757da8c617d98af29018f08c15a53c5dab0518fb/tests%2Ftarget%2Fconfigs%2Fgroup_imports%2FOne-merge_imports.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fconfigs%2Fgroup_imports%2FOne-merge_imports.rs?ref=757da8c617d98af29018f08c15a53c5dab0518fb", "patch": "@@ -0,0 +1,14 @@\n+// rustfmt-group_imports: One\n+// rustfmt-imports_granularity: Crate\n+use super::{\n+    schema::{Context, Payload},\n+    update::convert_publish_payload,\n+};\n+use crate::models::Event;\n+use alloc::{alloc::Layout, vec::Vec};\n+use broker::database::PooledConnection;\n+use chrono::Utc;\n+use core::f32;\n+use juniper::{FieldError, FieldResult};\n+use std::sync::Arc;\n+use uuid::Uuid;"}, {"sha": "5b648548260f8b758781c3a89f1a76901b1c78c1", "filename": "tests/target/configs/group_imports/One-nested.rs", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/757da8c617d98af29018f08c15a53c5dab0518fb/tests%2Ftarget%2Fconfigs%2Fgroup_imports%2FOne-nested.rs", "raw_url": "https://github.com/rust-lang/rust/raw/757da8c617d98af29018f08c15a53c5dab0518fb/tests%2Ftarget%2Fconfigs%2Fgroup_imports%2FOne-nested.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fconfigs%2Fgroup_imports%2FOne-nested.rs?ref=757da8c617d98af29018f08c15a53c5dab0518fb", "patch": "@@ -0,0 +1,6 @@\n+// rustfmt-group_imports: One\n+mod test {\n+    use crate::foo::bar;\n+    use crate::foo::bar2;\n+    use std::path;\n+}"}, {"sha": "015e841d01486e46ee6a5868a713e1229f7b03e3", "filename": "tests/target/configs/group_imports/One-no_reorder.rs", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/757da8c617d98af29018f08c15a53c5dab0518fb/tests%2Ftarget%2Fconfigs%2Fgroup_imports%2FOne-no_reorder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/757da8c617d98af29018f08c15a53c5dab0518fb/tests%2Ftarget%2Fconfigs%2Fgroup_imports%2FOne-no_reorder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fconfigs%2Fgroup_imports%2FOne-no_reorder.rs?ref=757da8c617d98af29018f08c15a53c5dab0518fb", "patch": "@@ -0,0 +1,12 @@\n+// rustfmt-group_imports: One\n+// rustfmt-reorder_imports: false\n+use chrono::Utc;\n+use super::update::convert_publish_payload;\n+use juniper::{FieldError, FieldResult};\n+use uuid::Uuid;\n+use alloc::alloc::Layout;\n+use std::sync::Arc;\n+use broker::database::PooledConnection;\n+use super::schema::{Context, Payload};\n+use core::f32;\n+use crate::models::Event;"}, {"sha": "3094c7ae11572e2d4df0a5a3004496d79bfb8093", "filename": "tests/target/configs/group_imports/One.rs", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/757da8c617d98af29018f08c15a53c5dab0518fb/tests%2Ftarget%2Fconfigs%2Fgroup_imports%2FOne.rs", "raw_url": "https://github.com/rust-lang/rust/raw/757da8c617d98af29018f08c15a53c5dab0518fb/tests%2Ftarget%2Fconfigs%2Fgroup_imports%2FOne.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fconfigs%2Fgroup_imports%2FOne.rs?ref=757da8c617d98af29018f08c15a53c5dab0518fb", "patch": "@@ -0,0 +1,11 @@\n+// rustfmt-group_imports: One\n+use super::schema::{Context, Payload};\n+use super::update::convert_publish_payload;\n+use crate::models::Event;\n+use alloc::alloc::Layout;\n+use broker::database::PooledConnection;\n+use chrono::Utc;\n+use core::f32;\n+use juniper::{FieldError, FieldResult};\n+use std::sync::Arc;\n+use uuid::Uuid;"}]}