{"sha": "78d1442808fa318c782e7f8249dab27126254930", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc4ZDE0NDI4MDhmYTMxOGM3ODJlN2Y4MjQ5ZGFiMjcxMjYyNTQ5MzA=", "commit": {"author": {"name": "Zack M. Davis", "email": "code@zackmdavis.net", "date": "2017-08-07T17:38:16Z"}, "committer": {"name": "Zack M. Davis", "email": "code@zackmdavis.net", "date": "2017-08-09T08:33:49Z"}, "message": "extended information for E0571 break with value in non-`loop` loop", "tree": {"sha": "0b875cd93583d6ee4b6b7a3fbed3984075ff4764", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0b875cd93583d6ee4b6b7a3fbed3984075ff4764"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/78d1442808fa318c782e7f8249dab27126254930", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/78d1442808fa318c782e7f8249dab27126254930", "html_url": "https://github.com/rust-lang/rust/commit/78d1442808fa318c782e7f8249dab27126254930", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/78d1442808fa318c782e7f8249dab27126254930/comments", "author": {"login": "zackmdavis", "id": 1076988, "node_id": "MDQ6VXNlcjEwNzY5ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1076988?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zackmdavis", "html_url": "https://github.com/zackmdavis", "followers_url": "https://api.github.com/users/zackmdavis/followers", "following_url": "https://api.github.com/users/zackmdavis/following{/other_user}", "gists_url": "https://api.github.com/users/zackmdavis/gists{/gist_id}", "starred_url": "https://api.github.com/users/zackmdavis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zackmdavis/subscriptions", "organizations_url": "https://api.github.com/users/zackmdavis/orgs", "repos_url": "https://api.github.com/users/zackmdavis/repos", "events_url": "https://api.github.com/users/zackmdavis/events{/privacy}", "received_events_url": "https://api.github.com/users/zackmdavis/received_events", "type": "User", "site_admin": false}, "committer": {"login": "zackmdavis", "id": 1076988, "node_id": "MDQ6VXNlcjEwNzY5ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1076988?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zackmdavis", "html_url": "https://github.com/zackmdavis", "followers_url": "https://api.github.com/users/zackmdavis/followers", "following_url": "https://api.github.com/users/zackmdavis/following{/other_user}", "gists_url": "https://api.github.com/users/zackmdavis/gists{/gist_id}", "starred_url": "https://api.github.com/users/zackmdavis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zackmdavis/subscriptions", "organizations_url": "https://api.github.com/users/zackmdavis/orgs", "repos_url": "https://api.github.com/users/zackmdavis/repos", "events_url": "https://api.github.com/users/zackmdavis/events{/privacy}", "received_events_url": "https://api.github.com/users/zackmdavis/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3f977baf34ed32c64c4ff185b4ef6ae2c2948afc", "url": "https://api.github.com/repos/rust-lang/rust/commits/3f977baf34ed32c64c4ff185b4ef6ae2c2948afc", "html_url": "https://github.com/rust-lang/rust/commit/3f977baf34ed32c64c4ff185b4ef6ae2c2948afc"}], "stats": {"total": 35, "additions": 34, "deletions": 1}, "files": [{"sha": "1bfa5943ee90a1849851be8459648cfa34b6018e", "filename": "src/librustc_passes/diagnostics.rs", "status": "modified", "additions": 34, "deletions": 1, "changes": 35, "blob_url": "https://github.com/rust-lang/rust/blob/78d1442808fa318c782e7f8249dab27126254930/src%2Flibrustc_passes%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/78d1442808fa318c782e7f8249dab27126254930/src%2Flibrustc_passes%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_passes%2Fdiagnostics.rs?ref=78d1442808fa318c782e7f8249dab27126254930", "patch": "@@ -223,12 +223,45 @@ To fix this, add a label specifying which loop is being broken out of:\n ```\n 'foo: while break 'foo {}\n ```\n+\"##,\n+\n+E0571: r##\"\n+A `break` statement with an argument appeared in a non-`loop` loop.\n+\n+Example of erroneous code:\n+\n+```compile_fail,E0571\n+# let mut i = 1;\n+# fn satisfied(n: usize) -> bool { n % 23 == 0 }\n+let result = while true {\n+    if satisfied(i) {\n+        break 2*i; // error: `break` with value from a `while` loop\n+    }\n+    i += 1;\n+};\n+```\n+\n+The `break` statement can take an argument (which will be the value of the loop\n+expression if the `break` statement is executed) in `loop` loops, but not\n+`for`, `while`, or `while let` loops.\n+\n+Make sure `break value;` statements only occur in `loop` loops:\n+\n+```\n+# let mut i = 1;\n+# fn satisfied(n: usize) -> bool { n % 23 == 0 }\n+let result = loop { // ok!\n+    if satisfied(i) {\n+        break 2*i;\n+    }\n+    i += 1;\n+};\n+```\n \"##\n }\n \n register_diagnostics! {\n     E0226, // only a single explicit lifetime bound is permitted\n     E0472, // asm! is unsupported on this target\n     E0561, // patterns aren't allowed in function pointer types\n-    E0571, // `break` with a value in a non-`loop`-loop\n }"}]}