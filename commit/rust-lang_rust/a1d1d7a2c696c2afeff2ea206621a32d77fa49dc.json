{"sha": "a1d1d7a2c696c2afeff2ea206621a32d77fa49dc", "node_id": "MDY6Q29tbWl0NzI0NzEyOmExZDFkN2EyYzY5NmMyYWZlZmYyZWEyMDY2MjFhMzJkNzdmYTQ5ZGM=", "commit": {"author": {"name": "memoryruins", "email": "memoryruinsmusic@gmail.com", "date": "2019-05-28T18:45:27Z"}, "committer": {"name": "memoryruins", "email": "memoryruinsmusic@gmail.com", "date": "2019-05-28T18:45:27Z"}, "message": "Update test/ui/parser for bare_trait_object warnings", "tree": {"sha": "ec4822f1d2378fa32bb5cf711cd09c8ef0dfd8d2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ec4822f1d2378fa32bb5cf711cd09c8ef0dfd8d2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a1d1d7a2c696c2afeff2ea206621a32d77fa49dc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a1d1d7a2c696c2afeff2ea206621a32d77fa49dc", "html_url": "https://github.com/rust-lang/rust/commit/a1d1d7a2c696c2afeff2ea206621a32d77fa49dc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a1d1d7a2c696c2afeff2ea206621a32d77fa49dc/comments", "author": {"login": "memoryruins", "id": 6868531, "node_id": "MDQ6VXNlcjY4Njg1MzE=", "avatar_url": "https://avatars.githubusercontent.com/u/6868531?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memoryruins", "html_url": "https://github.com/memoryruins", "followers_url": "https://api.github.com/users/memoryruins/followers", "following_url": "https://api.github.com/users/memoryruins/following{/other_user}", "gists_url": "https://api.github.com/users/memoryruins/gists{/gist_id}", "starred_url": "https://api.github.com/users/memoryruins/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memoryruins/subscriptions", "organizations_url": "https://api.github.com/users/memoryruins/orgs", "repos_url": "https://api.github.com/users/memoryruins/repos", "events_url": "https://api.github.com/users/memoryruins/events{/privacy}", "received_events_url": "https://api.github.com/users/memoryruins/received_events", "type": "User", "site_admin": false}, "committer": {"login": "memoryruins", "id": 6868531, "node_id": "MDQ6VXNlcjY4Njg1MzE=", "avatar_url": "https://avatars.githubusercontent.com/u/6868531?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memoryruins", "html_url": "https://github.com/memoryruins", "followers_url": "https://api.github.com/users/memoryruins/followers", "following_url": "https://api.github.com/users/memoryruins/following{/other_user}", "gists_url": "https://api.github.com/users/memoryruins/gists{/gist_id}", "starred_url": "https://api.github.com/users/memoryruins/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memoryruins/subscriptions", "organizations_url": "https://api.github.com/users/memoryruins/orgs", "repos_url": "https://api.github.com/users/memoryruins/repos", "events_url": "https://api.github.com/users/memoryruins/events{/privacy}", "received_events_url": "https://api.github.com/users/memoryruins/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "54e10558b4c28fd2a861e34ec5daf53b287a4198", "url": "https://api.github.com/repos/rust-lang/rust/commits/54e10558b4c28fd2a861e34ec5daf53b287a4198", "html_url": "https://github.com/rust-lang/rust/commit/54e10558b4c28fd2a861e34ec5daf53b287a4198"}], "stats": {"total": 55, "additions": 43, "deletions": 12}, "files": [{"sha": "1e0f9e40cdca67b6654079a59d4dad6b077e03a5", "filename": "src/test/ui/parser/bounds-obj-parens.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a1d1d7a2c696c2afeff2ea206621a32d77fa49dc/src%2Ftest%2Fui%2Fparser%2Fbounds-obj-parens.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a1d1d7a2c696c2afeff2ea206621a32d77fa49dc/src%2Ftest%2Fui%2Fparser%2Fbounds-obj-parens.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fbounds-obj-parens.rs?ref=a1d1d7a2c696c2afeff2ea206621a32d77fa49dc", "patch": "@@ -1,5 +1,7 @@\n // compile-pass\n \n+#![allow(bare_trait_objects)]\n+\n type A = Box<(Fn(u8) -> u8) + 'static + Send + Sync>; // OK (but see #39318)\n \n fn main() {}"}, {"sha": "89a2953ad0fd4a1721655a7e27f76f2812dbe924", "filename": "src/test/ui/parser/trailing-plus-in-bounds.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a1d1d7a2c696c2afeff2ea206621a32d77fa49dc/src%2Ftest%2Fui%2Fparser%2Ftrailing-plus-in-bounds.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a1d1d7a2c696c2afeff2ea206621a32d77fa49dc/src%2Ftest%2Fui%2Fparser%2Ftrailing-plus-in-bounds.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Ftrailing-plus-in-bounds.rs?ref=a1d1d7a2c696c2afeff2ea206621a32d77fa49dc", "patch": "@@ -2,6 +2,7 @@\n // compile-flags: -Z continue-parse-after-error\n \n #![feature(box_syntax)]\n+#![allow(bare_trait_objects)]\n \n use std::fmt::Debug;\n "}, {"sha": "e81b019b6468fa955758877e4db374129d288797", "filename": "src/test/ui/parser/trait-object-bad-parens.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a1d1d7a2c696c2afeff2ea206621a32d77fa49dc/src%2Ftest%2Fui%2Fparser%2Ftrait-object-bad-parens.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a1d1d7a2c696c2afeff2ea206621a32d77fa49dc/src%2Ftest%2Fui%2Fparser%2Ftrait-object-bad-parens.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Ftrait-object-bad-parens.rs?ref=a1d1d7a2c696c2afeff2ea206621a32d77fa49dc", "patch": "@@ -1,6 +1,7 @@\n // compile-flags: -Z continue-parse-after-error\n \n #![feature(optin_builtin_traits)]\n+#![allow(bare_trait_objects)]\n \n auto trait Auto {}\n "}, {"sha": "a36727ffeaf103158e827766035c5730e3d4394a", "filename": "src/test/ui/parser/trait-object-bad-parens.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a1d1d7a2c696c2afeff2ea206621a32d77fa49dc/src%2Ftest%2Fui%2Fparser%2Ftrait-object-bad-parens.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a1d1d7a2c696c2afeff2ea206621a32d77fa49dc/src%2Ftest%2Fui%2Fparser%2Ftrait-object-bad-parens.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Ftrait-object-bad-parens.stderr?ref=a1d1d7a2c696c2afeff2ea206621a32d77fa49dc", "patch": "@@ -1,23 +1,23 @@\n error[E0178]: expected a path on the left-hand side of `+`, not `((Auto))`\n-  --> $DIR/trait-object-bad-parens.rs:8:16\n+  --> $DIR/trait-object-bad-parens.rs:9:16\n    |\n LL |     let _: Box<((Auto)) + Auto>;\n    |                ^^^^^^^^^^^^^^^ expected a path\n \n error[E0178]: expected a path on the left-hand side of `+`, not `(Auto + Auto)`\n-  --> $DIR/trait-object-bad-parens.rs:10:16\n+  --> $DIR/trait-object-bad-parens.rs:11:16\n    |\n LL |     let _: Box<(Auto + Auto) + Auto>;\n    |                ^^^^^^^^^^^^^^^^^^^^ expected a path\n \n error[E0178]: expected a path on the left-hand side of `+`, not `(Auto)`\n-  --> $DIR/trait-object-bad-parens.rs:12:16\n+  --> $DIR/trait-object-bad-parens.rs:13:16\n    |\n LL |     let _: Box<(Auto +) + Auto>;\n    |                ^^^^^^^^^^^^^^^ expected a path\n \n error[E0178]: expected a path on the left-hand side of `+`, not `(dyn Auto)`\n-  --> $DIR/trait-object-bad-parens.rs:14:16\n+  --> $DIR/trait-object-bad-parens.rs:15:16\n    |\n LL |     let _: Box<(dyn Auto) + Auto>;\n    |                ^^^^^^^^^^^^^^^^^ expected a path"}, {"sha": "d5598afd6f4fdffcfd2e757f7ea61ed0d8ffaf51", "filename": "src/test/ui/parser/trait-object-lifetime-parens.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a1d1d7a2c696c2afeff2ea206621a32d77fa49dc/src%2Ftest%2Fui%2Fparser%2Ftrait-object-lifetime-parens.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a1d1d7a2c696c2afeff2ea206621a32d77fa49dc/src%2Ftest%2Fui%2Fparser%2Ftrait-object-lifetime-parens.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Ftrait-object-lifetime-parens.rs?ref=a1d1d7a2c696c2afeff2ea206621a32d77fa49dc", "patch": "@@ -1,5 +1,7 @@\n // compile-flags: -Z continue-parse-after-error\n \n+#![allow(bare_trait_objects)]\n+\n trait Trait {}\n \n fn f<'a, T: Trait + ('a)>() {} //~ ERROR parenthesized lifetime bounds are not supported"}, {"sha": "55f14c978760f7e790cdf69df1ac463e10f01911", "filename": "src/test/ui/parser/trait-object-lifetime-parens.stderr", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/a1d1d7a2c696c2afeff2ea206621a32d77fa49dc/src%2Ftest%2Fui%2Fparser%2Ftrait-object-lifetime-parens.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a1d1d7a2c696c2afeff2ea206621a32d77fa49dc/src%2Ftest%2Fui%2Fparser%2Ftrait-object-lifetime-parens.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Ftrait-object-lifetime-parens.stderr?ref=a1d1d7a2c696c2afeff2ea206621a32d77fa49dc", "patch": "@@ -1,23 +1,23 @@\n error: parenthesized lifetime bounds are not supported\n-  --> $DIR/trait-object-lifetime-parens.rs:5:21\n+  --> $DIR/trait-object-lifetime-parens.rs:7:21\n    |\n LL | fn f<'a, T: Trait + ('a)>() {}\n    |                     ^^^^ help: remove the parentheses\n \n error: parenthesized lifetime bounds are not supported\n-  --> $DIR/trait-object-lifetime-parens.rs:8:24\n+  --> $DIR/trait-object-lifetime-parens.rs:10:24\n    |\n LL |     let _: Box<Trait + ('a)>;\n    |                        ^^^^ help: remove the parentheses\n \n error: expected `:`, found `)`\n-  --> $DIR/trait-object-lifetime-parens.rs:9:19\n+  --> $DIR/trait-object-lifetime-parens.rs:11:19\n    |\n LL |     let _: Box<('a) + Trait>;\n    |                   ^ expected `:`\n \n error: chained comparison operators require parentheses\n-  --> $DIR/trait-object-lifetime-parens.rs:9:15\n+  --> $DIR/trait-object-lifetime-parens.rs:11:15\n    |\n LL |     let _: Box<('a) + Trait>;\n    |               ^^^^^^^^^^^^^^^\n@@ -26,7 +26,7 @@ LL |     let _: Box<('a) + Trait>;\n    = help: or use `(...)` if you meant to specify fn arguments\n \n error: expected type, found `'a`\n-  --> $DIR/trait-object-lifetime-parens.rs:9:17\n+  --> $DIR/trait-object-lifetime-parens.rs:11:17\n    |\n LL |     let _: Box<('a) + Trait>;\n    |         -       ^^"}, {"sha": "63425f3e2018679091e4740dbf143e3b564f266a", "filename": "src/test/ui/parser/trait-object-polytrait-priority.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a1d1d7a2c696c2afeff2ea206621a32d77fa49dc/src%2Ftest%2Fui%2Fparser%2Ftrait-object-polytrait-priority.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a1d1d7a2c696c2afeff2ea206621a32d77fa49dc/src%2Ftest%2Fui%2Fparser%2Ftrait-object-polytrait-priority.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Ftrait-object-polytrait-priority.rs?ref=a1d1d7a2c696c2afeff2ea206621a32d77fa49dc", "patch": "@@ -1,3 +1,5 @@\n+#![allow(bare_trait_objects)]\n+\n trait Trait<'a> {}\n \n fn main() {"}, {"sha": "a6add6079cecef3e9c71b86f49cbfd8133bacca1", "filename": "src/test/ui/parser/trait-object-polytrait-priority.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a1d1d7a2c696c2afeff2ea206621a32d77fa49dc/src%2Ftest%2Fui%2Fparser%2Ftrait-object-polytrait-priority.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a1d1d7a2c696c2afeff2ea206621a32d77fa49dc/src%2Ftest%2Fui%2Fparser%2Ftrait-object-polytrait-priority.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Ftrait-object-polytrait-priority.stderr?ref=a1d1d7a2c696c2afeff2ea206621a32d77fa49dc", "patch": "@@ -1,5 +1,5 @@\n error[E0178]: expected a path on the left-hand side of `+`, not `&for<'a> Trait<'a>`\n-  --> $DIR/trait-object-polytrait-priority.rs:4:12\n+  --> $DIR/trait-object-polytrait-priority.rs:6:12\n    |\n LL |     let _: &for<'a> Trait<'a> + 'static;\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try adding parentheses: `&(for<'a> Trait<'a> + 'static)`"}, {"sha": "a113de14b6fbc5db9a01e8c6c2c61a8ca67de123", "filename": "src/test/ui/parser/trait-object-trait-parens.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a1d1d7a2c696c2afeff2ea206621a32d77fa49dc/src%2Ftest%2Fui%2Fparser%2Ftrait-object-trait-parens.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a1d1d7a2c696c2afeff2ea206621a32d77fa49dc/src%2Ftest%2Fui%2Fparser%2Ftrait-object-trait-parens.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Ftrait-object-trait-parens.rs?ref=a1d1d7a2c696c2afeff2ea206621a32d77fa49dc", "patch": "@@ -5,8 +5,11 @@ fn f<T: (Copy) + (?Sized) + (for<'a> Trait<'a>)>() {}\n fn main() {\n     let _: Box<(Copy) + (?Sized) + (for<'a> Trait<'a>)>;\n     //~^ ERROR `?Trait` is not permitted in trait object types\n+    //~| WARN trait objects without an explicit `dyn` are deprecated\n     let _: Box<(?Sized) + (for<'a> Trait<'a>) + (Copy)>;\n+    //~^ WARN trait objects without an explicit `dyn` are deprecated\n     let _: Box<(for<'a> Trait<'a>) + (Copy) + (?Sized)>;\n     //~^ ERROR use of undeclared lifetime name `'a`\n     //~| ERROR `?Trait` is not permitted in trait object types\n+    //~| WARN trait objects without an explicit `dyn` are deprecated\n }"}, {"sha": "e3fb8a0113a66dadea9dd203bbdad33ee52ca86b", "filename": "src/test/ui/parser/trait-object-trait-parens.stderr", "status": "modified", "additions": 22, "deletions": 2, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/a1d1d7a2c696c2afeff2ea206621a32d77fa49dc/src%2Ftest%2Fui%2Fparser%2Ftrait-object-trait-parens.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a1d1d7a2c696c2afeff2ea206621a32d77fa49dc/src%2Ftest%2Fui%2Fparser%2Ftrait-object-trait-parens.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Ftrait-object-trait-parens.stderr?ref=a1d1d7a2c696c2afeff2ea206621a32d77fa49dc", "patch": "@@ -5,13 +5,33 @@ LL |     let _: Box<(Copy) + (?Sized) + (for<'a> Trait<'a>)>;\n    |                         ^^^^^^^^\n \n error: `?Trait` is not permitted in trait object types\n-  --> $DIR/trait-object-trait-parens.rs:9:47\n+  --> $DIR/trait-object-trait-parens.rs:11:47\n    |\n LL |     let _: Box<(for<'a> Trait<'a>) + (Copy) + (?Sized)>;\n    |                                               ^^^^^^^^\n \n+warning: trait objects without an explicit `dyn` are deprecated\n+  --> $DIR/trait-object-trait-parens.rs:6:16\n+   |\n+LL |     let _: Box<(Copy) + (?Sized) + (for<'a> Trait<'a>)>;\n+   |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use `dyn`: `dyn (Copy) + (?Sized) + (for<'a> Trait<'a>)`\n+   |\n+   = note: #[warn(bare_trait_objects)] on by default\n+\n+warning: trait objects without an explicit `dyn` are deprecated\n+  --> $DIR/trait-object-trait-parens.rs:9:16\n+   |\n+LL |     let _: Box<(?Sized) + (for<'a> Trait<'a>) + (Copy)>;\n+   |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use `dyn`: `dyn (?Sized) + (for<'a> Trait<'a>) + (Copy)`\n+\n+warning: trait objects without an explicit `dyn` are deprecated\n+  --> $DIR/trait-object-trait-parens.rs:11:16\n+   |\n+LL |     let _: Box<(for<'a> Trait<'a>) + (Copy) + (?Sized)>;\n+   |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use `dyn`: `dyn (for<'a> Trait<'a>) + (Copy) + (?Sized)`\n+\n error[E0261]: use of undeclared lifetime name `'a`\n-  --> $DIR/trait-object-trait-parens.rs:9:31\n+  --> $DIR/trait-object-trait-parens.rs:11:31\n    |\n LL |     let _: Box<(for<'a> Trait<'a>) + (Copy) + (?Sized)>;\n    |                               ^^ undeclared lifetime"}]}