{"sha": "2b4feba18f390501b97d6fc36dc34d6f9ca8cb04", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJiNGZlYmExOGYzOTA1MDFiOTdkNmZjMzZkYzM0ZDZmOWNhOGNiMDQ=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2020-03-21T12:48:10Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2020-03-21T12:48:10Z"}, "message": "Pick the last version of the different files if there is more than one", "tree": {"sha": "a9ad302918cbd6e65fd08d85e190ededab585237", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a9ad302918cbd6e65fd08d85e190ededab585237"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2b4feba18f390501b97d6fc36dc34d6f9ca8cb04", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2b4feba18f390501b97d6fc36dc34d6f9ca8cb04", "html_url": "https://github.com/rust-lang/rust/commit/2b4feba18f390501b97d6fc36dc34d6f9ca8cb04", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2b4feba18f390501b97d6fc36dc34d6f9ca8cb04/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "feb6635fe66acefb8dbde13a47a7e8d88bbd0d42", "url": "https://api.github.com/repos/rust-lang/rust/commits/feb6635fe66acefb8dbde13a47a7e8d88bbd0d42", "html_url": "https://github.com/rust-lang/rust/commit/feb6635fe66acefb8dbde13a47a7e8d88bbd0d42"}], "stats": {"total": 24, "additions": 22, "deletions": 2}, "files": [{"sha": "affdcc7f4b759c1445b8a212715426b22fc6de6a", "filename": "src/tools/rustdoc-js-std/tester.js", "status": "modified", "additions": 22, "deletions": 2, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/2b4feba18f390501b97d6fc36dc34d6f9ca8cb04/src%2Ftools%2Frustdoc-js-std%2Ftester.js", "raw_url": "https://github.com/rust-lang/rust/raw/2b4feba18f390501b97d6fc36dc34d6f9ca8cb04/src%2Ftools%2Frustdoc-js-std%2Ftester.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Frustdoc-js-std%2Ftester.js?ref=2b4feba18f390501b97d6fc36dc34d6f9ca8cb04", "patch": "@@ -2,19 +2,39 @@ const fs = require('fs');\n const path = require('path');\n const tools = require('../rustdoc-js-common/lib.js');\n \n+\n function findFile(dir, name, extension) {\n     var entries = fs.readdirSync(dir);\n+    var matches = [];\n     for (var i = 0; i < entries.length; ++i) {\n         var entry = entries[i];\n         var file_type = fs.statSync(dir + entry);\n         if (file_type.isDirectory()) {\n             continue;\n         }\n         if (entry.startsWith(name) && entry.endsWith(extension)) {\n-            return entry;\n+            var version = entry.slice(name.length, entry.length - extension.length);\n+            version = version.split(\".\").map(function(x) {\n+                return parseInt(x);\n+            });\n+            var total = 0;\n+            var mult = 1;\n+            for (var j = version.length - 1; j >= 0; --j) {\n+                total += version[j] * mult;\n+                mult *= 1000;\n+            }\n+            matches.push([entry, total]);\n         }\n     }\n-    return null;\n+    if (matches.length === 0) {\n+        return null;\n+    }\n+    // We make a reverse sort to have the \"highest\" file. Very useful in case you didn't clean up\n+    // you std doc folder...\n+    matches.sort(function(a, b) {\n+        return b[1] - a[1];\n+    });\n+    return matches[0][0];\n }\n \n function readFileMatching(dir, name, extension) {"}]}