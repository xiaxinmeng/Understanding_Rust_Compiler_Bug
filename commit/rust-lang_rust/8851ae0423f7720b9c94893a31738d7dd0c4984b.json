{"sha": "8851ae0423f7720b9c94893a31738d7dd0c4984b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg4NTFhZTA0MjNmNzcyMGI5Yzk0ODkzYTMxNzM4ZDdkZDBjNDk4NGI=", "commit": {"author": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2011-06-01T23:46:55Z"}, "committer": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2011-06-01T23:47:24Z"}, "message": "rustc: Allow walking over patterns", "tree": {"sha": "9c0b0382d6c8fe66544812154a15bfcb10b6505b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9c0b0382d6c8fe66544812154a15bfcb10b6505b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8851ae0423f7720b9c94893a31738d7dd0c4984b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8851ae0423f7720b9c94893a31738d7dd0c4984b", "html_url": "https://github.com/rust-lang/rust/commit/8851ae0423f7720b9c94893a31738d7dd0c4984b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8851ae0423f7720b9c94893a31738d7dd0c4984b/comments", "author": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6e058ff54ef7d5c51acdc8c3ba212fd58470b77c", "url": "https://api.github.com/repos/rust-lang/rust/commits/6e058ff54ef7d5c51acdc8c3ba212fd58470b77c", "html_url": "https://github.com/rust-lang/rust/commit/6e058ff54ef7d5c51acdc8c3ba212fd58470b77c"}], "stats": {"total": 8, "additions": 8, "deletions": 0}, "files": [{"sha": "243c078f93e652d4123adfc5cd99e3ee98b7b9dc", "filename": "src/comp/middle/walk.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/8851ae0423f7720b9c94893a31738d7dd0c4984b/src%2Fcomp%2Fmiddle%2Fwalk.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8851ae0423f7720b9c94893a31738d7dd0c4984b/src%2Fcomp%2Fmiddle%2Fwalk.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Fwalk.rs?ref=8851ae0423f7720b9c94893a31738d7dd0c4984b", "patch": "@@ -28,6 +28,8 @@ type ast_visitor =\n         fn (&@ast::stmt s)              visit_stmt_post,\n         fn (&ast::arm a)                visit_arm_pre,\n         fn (&ast::arm a)                visit_arm_post,\n+        fn (&@ast::pat p)               visit_pat_pre,\n+        fn (&@ast::pat p)               visit_pat_post,\n         fn (&@ast::decl d)              visit_decl_pre,\n         fn (&@ast::decl d)              visit_decl_post,\n         fn (&@ast::expr e)              visit_expr_pre,\n@@ -193,6 +195,7 @@ fn walk_ty(&ast_visitor v, @ast::ty t) {\n }\n \n fn walk_pat(&ast_visitor v, &@ast::pat p) {\n+    v.visit_pat_pre(p);\n     alt (p.node) {\n         case (ast::pat_tag(?path, ?children, _)) {\n             for (@ast::ty tp in path.node.types) {\n@@ -204,6 +207,7 @@ fn walk_pat(&ast_visitor v, &@ast::pat p) {\n         }\n         case (_) {}\n     }\n+    v.visit_pat_post(p);\n }\n \n fn walk_native_mod(&ast_visitor v, &ast::native_mod nm) {\n@@ -500,6 +504,7 @@ fn def_visit_method(&@ast::method m) { }\n fn def_visit_block(&ast::block b) { }\n fn def_visit_stmt(&@ast::stmt s) { }\n fn def_visit_arm(&ast::arm a) { }\n+fn def_visit_pat(&@ast::pat p) { }\n fn def_visit_decl(&@ast::decl d) { }\n fn def_visit_expr(&@ast::expr e) { }\n fn def_visit_ty(&@ast::ty t) { }\n@@ -519,6 +524,7 @@ fn default_visitor() -> ast_visitor {\n     auto d_visit_block = def_visit_block;\n     auto d_visit_stmt = def_visit_stmt;\n     auto d_visit_arm = def_visit_arm;\n+    auto d_visit_pat = def_visit_pat;\n     auto d_visit_decl = def_visit_decl;\n     auto d_visit_expr = def_visit_expr;\n     auto d_visit_ty = def_visit_ty;\n@@ -544,6 +550,8 @@ fn default_visitor() -> ast_visitor {\n             visit_stmt_post = d_visit_stmt,\n             visit_arm_pre = d_visit_arm,\n             visit_arm_post = d_visit_arm,\n+            visit_pat_pre = d_visit_pat,\n+            visit_pat_post = d_visit_pat,\n             visit_decl_pre = d_visit_decl,\n             visit_decl_post = d_visit_decl,\n             visit_expr_pre = d_visit_expr,"}]}