{"sha": "aec5330082a0c4664abf0f6604c1b05768a90234", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFlYzUzMzAwODJhMGM0NjY0YWJmMGY2NjA0YzFiMDU3NjhhOTAyMzQ=", "commit": {"author": {"name": "Michael Bradshaw", "email": "mjbshaw@google.com", "date": "2018-09-30T02:49:17Z"}, "committer": {"name": "Michael Bradshaw", "email": "mjbshaw@google.com", "date": "2018-09-30T02:49:17Z"}, "message": "Fix ui/run-pass/union/union-nodrop.rs test", "tree": {"sha": "c485f1fd468b5fab288328892525d5061db71a8e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c485f1fd468b5fab288328892525d5061db71a8e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/aec5330082a0c4664abf0f6604c1b05768a90234", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/aec5330082a0c4664abf0f6604c1b05768a90234", "html_url": "https://github.com/rust-lang/rust/commit/aec5330082a0c4664abf0f6604c1b05768a90234", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/aec5330082a0c4664abf0f6604c1b05768a90234/comments", "author": {"login": "mjbshaw", "id": 1204698, "node_id": "MDQ6VXNlcjEyMDQ2OTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1204698?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mjbshaw", "html_url": "https://github.com/mjbshaw", "followers_url": "https://api.github.com/users/mjbshaw/followers", "following_url": "https://api.github.com/users/mjbshaw/following{/other_user}", "gists_url": "https://api.github.com/users/mjbshaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/mjbshaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mjbshaw/subscriptions", "organizations_url": "https://api.github.com/users/mjbshaw/orgs", "repos_url": "https://api.github.com/users/mjbshaw/repos", "events_url": "https://api.github.com/users/mjbshaw/events{/privacy}", "received_events_url": "https://api.github.com/users/mjbshaw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mjbshaw", "id": 1204698, "node_id": "MDQ6VXNlcjEyMDQ2OTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1204698?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mjbshaw", "html_url": "https://github.com/mjbshaw", "followers_url": "https://api.github.com/users/mjbshaw/followers", "following_url": "https://api.github.com/users/mjbshaw/following{/other_user}", "gists_url": "https://api.github.com/users/mjbshaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/mjbshaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mjbshaw/subscriptions", "organizations_url": "https://api.github.com/users/mjbshaw/orgs", "repos_url": "https://api.github.com/users/mjbshaw/repos", "events_url": "https://api.github.com/users/mjbshaw/events{/privacy}", "received_events_url": "https://api.github.com/users/mjbshaw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2c3c8822e057c4ed972d0ce736b089c11afeaac3", "url": "https://api.github.com/repos/rust-lang/rust/commits/2c3c8822e057c4ed972d0ce736b089c11afeaac3", "html_url": "https://github.com/rust-lang/rust/commit/2c3c8822e057c4ed972d0ce736b089c11afeaac3"}], "stats": {"total": 20, "additions": 9, "deletions": 11}, "files": [{"sha": "d024aca0cd701436308bf7ca7de009dfdd5e2076", "filename": "src/test/ui/run-pass/union/union-nodrop.rs", "status": "modified", "additions": 9, "deletions": 11, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/aec5330082a0c4664abf0f6604c1b05768a90234/src%2Ftest%2Fui%2Frun-pass%2Funion%2Funion-nodrop.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aec5330082a0c4664abf0f6604c1b05768a90234/src%2Ftest%2Fui%2Frun-pass%2Funion%2Funion-nodrop.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frun-pass%2Funion%2Funion-nodrop.rs?ref=aec5330082a0c4664abf0f6604c1b05768a90234", "patch": "@@ -57,15 +57,13 @@ impl<T> Drop for ActuallyDrop<T> {\n }\n \n fn main() {\n-    unsafe {\n-        // NoDrop should not make needs_drop true\n-        assert!(!needs_drop::<Foo>());\n-        assert!(!needs_drop::<NoDrop<u8>>());\n-        assert!(!needs_drop::<NoDrop<Box<u8>>>());\n-        // presence of other drop types should still work\n-        assert!(needs_drop::<Baz>());\n-        // drop impl on union itself should work\n-        assert!(needs_drop::<ActuallyDrop<u8>>());\n-        assert!(needs_drop::<ActuallyDrop<Box<u8>>>());\n-    }\n+    // NoDrop should not make needs_drop true\n+    assert!(!needs_drop::<Foo>());\n+    assert!(!needs_drop::<NoDrop<u8>>());\n+    assert!(!needs_drop::<NoDrop<Box<u8>>>());\n+    // presence of other drop types should still work\n+    assert!(needs_drop::<Baz>());\n+    // drop impl on union itself should work\n+    assert!(needs_drop::<ActuallyDrop<u8>>());\n+    assert!(needs_drop::<ActuallyDrop<Box<u8>>>());\n }"}]}