{"sha": "c8c039151963e29b92978444f2dc6590dd173ece", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM4YzAzOTE1MTk2M2UyOWI5Mjk3ODQ0NGYyZGM2NTkwZGQxNzNlY2U=", "commit": {"author": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2014-11-28T02:41:16Z"}, "committer": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2015-01-01T04:54:15Z"}, "message": "Add some impls of Show (RefCell, Weak, some resolve types)", "tree": {"sha": "acc1a9d55c82e4a5061cc697117fd7626601dc84", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/acc1a9d55c82e4a5061cc697117fd7626601dc84"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c8c039151963e29b92978444f2dc6590dd173ece", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c8c039151963e29b92978444f2dc6590dd173ece", "html_url": "https://github.com/rust-lang/rust/commit/c8c039151963e29b92978444f2dc6590dd173ece", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c8c039151963e29b92978444f2dc6590dd173ece/comments", "author": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "10d99a973498c5a1be6ba318210751efc1c2cf61", "url": "https://api.github.com/repos/rust-lang/rust/commits/10d99a973498c5a1be6ba318210751efc1c2cf61", "html_url": "https://github.com/rust-lang/rust/commit/10d99a973498c5a1be6ba318210751efc1c2cf61"}], "stats": {"total": 45, "additions": 40, "deletions": 5}, "files": [{"sha": "436b134ad25aa7f5f68e231085e890d21ce1f16a", "filename": "src/liballoc/rc.rs", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/c8c039151963e29b92978444f2dc6590dd173ece/src%2Fliballoc%2Frc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c8c039151963e29b92978444f2dc6590dd173ece/src%2Fliballoc%2Frc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliballoc%2Frc.rs?ref=c8c039151963e29b92978444f2dc6590dd173ece", "patch": "@@ -719,6 +719,17 @@ impl<T> Clone for Weak<T> {\n     }\n }\n \n+#[experimental = \"Show is experimental.\"]\n+impl<T: fmt::Show> fmt::Show for Weak<T> {\n+    fn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result {\n+        if self.strong() == 0 {\n+            write!(f, \"NULL\")\n+        } else {\n+            (*self._ptr).fmt(f)\n+        }\n+    }\n+}\n+\n #[doc(hidden)]\n trait RcBoxPtr<T> {\n     fn inner(&self) -> &RcBox<T>;"}, {"sha": "4b246860006abc5fc5819de36126b9ed69e57cbb", "filename": "src/libcore/cell.rs", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/c8c039151963e29b92978444f2dc6590dd173ece/src%2Flibcore%2Fcell.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c8c039151963e29b92978444f2dc6590dd173ece/src%2Flibcore%2Fcell.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fcell.rs?ref=c8c039151963e29b92978444f2dc6590dd173ece", "patch": "@@ -158,6 +158,7 @@\n use clone::Clone;\n use cmp::PartialEq;\n use default::Default;\n+use fmt;\n use kinds::{Copy, Send};\n use ops::{Deref, DerefMut, Drop};\n use option::Option;\n@@ -365,6 +366,16 @@ impl<T: PartialEq> PartialEq for RefCell<T> {\n     }\n }\n \n+#[unstable]\n+impl<T:fmt::Show> fmt::Show for RefCell<T> {\n+    fn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result {\n+        match self.try_borrow() {\n+            Some(val) => write!(f, \"{}\", val),\n+            None => write!(f, \"<borrowed RefCell>\")\n+        }\n+    }\n+}\n+\n struct BorrowRef<'b> {\n     _borrow: &'b Cell<BorrowFlag>,\n }"}, {"sha": "b9e14e64b237b72b3fd6ea34a13de0489f705370", "filename": "src/librustc_resolve/lib.rs", "status": "modified", "additions": 18, "deletions": 5, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/c8c039151963e29b92978444f2dc6590dd173ece/src%2Flibrustc_resolve%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c8c039151963e29b92978444f2dc6590dd173ece/src%2Flibrustc_resolve%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Flib.rs?ref=c8c039151963e29b92978444f2dc6590dd173ece", "patch": "@@ -88,6 +88,7 @@ use syntax::visit::{mod, Visitor};\n use std::collections::{HashMap, HashSet};\n use std::collections::hash_map::Entry::{Occupied, Vacant};\n use std::cell::{Cell, RefCell};\n+use std::fmt;\n use std::mem::replace;\n use std::rc::{Rc, Weak};\n use std::uint;\n@@ -178,7 +179,7 @@ impl<'a, 'v, 'tcx> Visitor<'v> for Resolver<'a, 'tcx> {\n }\n \n /// Contains data for specific types of import directives.\n-#[deriving(Copy)]\n+#[deriving(Copy,Show)]\n enum ImportDirectiveSubclass {\n     SingleImport(Name /* target */, Name /* source */),\n     GlobImport\n@@ -309,6 +310,7 @@ enum Shadowable {\n }\n \n /// One import directive.\n+#[deriving(Show)]\n struct ImportDirective {\n     module_path: Vec<Name>,\n     subclass: ImportDirectiveSubclass,\n@@ -338,7 +340,7 @@ impl ImportDirective {\n }\n \n /// The item that an import resolves to.\n-#[deriving(Clone)]\n+#[deriving(Clone,Show)]\n struct Target {\n     target_module: Rc<Module>,\n     bindings: Rc<NameBindings>,\n@@ -359,6 +361,7 @@ impl Target {\n }\n \n /// An ImportResolution represents a particular `use` directive.\n+#[deriving(Show)]\n struct ImportResolution {\n     /// Whether this resolution came from a `use` or a `pub use`. Note that this\n     /// should *not* be used whenever resolution is being performed, this is\n@@ -438,15 +441,15 @@ impl ImportResolution {\n }\n \n /// The link from a module up to its nearest parent node.\n-#[deriving(Clone)]\n+#[deriving(Clone,Show)]\n enum ParentLink {\n     NoParentLink,\n     ModuleParentLink(Weak<Module>, Name),\n     BlockParentLink(Weak<Module>, NodeId)\n }\n \n /// The type of module this is.\n-#[deriving(Copy, PartialEq)]\n+#[deriving(Copy, PartialEq, Show)]\n enum ModuleKind {\n     NormalModuleKind,\n     TraitModuleKind,\n@@ -528,6 +531,15 @@ impl Module {\n     }\n }\n \n+impl fmt::Show for Module {\n+    fn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result {\n+        write!(f, \"{}, kind: {}, {}\",\n+               self.def_id,\n+               self.kind,\n+               if self.is_public { \"public\" } else { \"private\" } )\n+    }\n+}\n+\n bitflags! {\n     #[deriving(Show)]\n     flags DefModifiers: u8 {\n@@ -537,7 +549,7 @@ bitflags! {\n }\n \n // Records a possibly-private type definition.\n-#[deriving(Clone)]\n+#[deriving(Clone,Show)]\n struct TypeNsDef {\n     modifiers: DefModifiers, // see note in ImportResolution about how to use this\n     module_def: Option<Rc<Module>>,\n@@ -555,6 +567,7 @@ struct ValueNsDef {\n \n // Records the definitions (at most one for each namespace) that a name is\n // bound to.\n+#[deriving(Show)]\n struct NameBindings {\n     type_def: RefCell<Option<TypeNsDef>>,   //< Meaning in type namespace.\n     value_def: RefCell<Option<ValueNsDef>>, //< Meaning in value namespace."}]}