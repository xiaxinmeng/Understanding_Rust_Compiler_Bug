{"sha": "b598ab8be46b50d5f407c3858c7b2c788328edc7", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI1OThhYjhiZTQ2YjUwZDVmNDA3YzM4NThjN2IyYzc4ODMyOGVkYzc=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-07-16T11:13:17Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-07-16T11:13:17Z"}, "message": "Rename CallableDefId -> InternedCallabelDefid", "tree": {"sha": "1d34f9eedb36a20a4309e57b822d375f37537b1b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1d34f9eedb36a20a4309e57b822d375f37537b1b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b598ab8be46b50d5f407c3858c7b2c788328edc7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b598ab8be46b50d5f407c3858c7b2c788328edc7", "html_url": "https://github.com/rust-lang/rust/commit/b598ab8be46b50d5f407c3858c7b2c788328edc7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b598ab8be46b50d5f407c3858c7b2c788328edc7/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8a880230a522b34a0ba7f434f4ad3acdfd3448b1", "url": "https://api.github.com/repos/rust-lang/rust/commits/8a880230a522b34a0ba7f434f4ad3acdfd3448b1", "html_url": "https://github.com/rust-lang/rust/commit/8a880230a522b34a0ba7f434f4ad3acdfd3448b1"}], "stats": {"total": 22, "additions": 11, "deletions": 11}, "files": [{"sha": "cad3856c992026338687910df6c3f427af30cb8f", "filename": "crates/ra_hir_ty/src/db.rs", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/b598ab8be46b50d5f407c3858c7b2c788328edc7/crates%2Fra_hir_ty%2Fsrc%2Fdb.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b598ab8be46b50d5f407c3858c7b2c788328edc7/crates%2Fra_hir_ty%2Fsrc%2Fdb.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir_ty%2Fsrc%2Fdb.rs?ref=b598ab8be46b50d5f407c3858c7b2c788328edc7", "patch": "@@ -77,7 +77,7 @@ pub trait HirDatabase: DefDatabase + Upcast<dyn DefDatabase> {\n \n     // Interned IDs for Chalk integration\n     #[salsa::interned]\n-    fn intern_callable_def(&self, callable_def: CallableDef) -> crate::CallableDefId;\n+    fn intern_callable_def(&self, callable_def: CallableDef) -> InternedCallableDefId;\n     #[salsa::interned]\n     fn intern_type_param_id(&self, param_id: TypeParamId) -> GlobalTypeParamId;\n     #[salsa::interned]\n@@ -151,3 +151,9 @@ impl_intern_key!(InternedOpaqueTyId);\n #[derive(Debug, Clone, Copy, PartialEq, Eq, Hash)]\n pub struct ClosureId(salsa::InternId);\n impl_intern_key!(ClosureId);\n+\n+/// This exists just for Chalk, because Chalk just has a single `FnDefId` where\n+/// we have different IDs for struct and enum variant constructors.\n+#[derive(Debug, Clone, Copy, PartialEq, Eq, Hash, Ord, PartialOrd)]\n+pub struct InternedCallableDefId(salsa::InternId);\n+impl_intern_key!(InternedCallableDefId);"}, {"sha": "72b0896049d4113644b7c3acc6ca259631797aa1", "filename": "crates/ra_hir_ty/src/lib.rs", "status": "modified", "additions": 1, "deletions": 7, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/b598ab8be46b50d5f407c3858c7b2c788328edc7/crates%2Fra_hir_ty%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b598ab8be46b50d5f407c3858c7b2c788328edc7/crates%2Fra_hir_ty%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir_ty%2Fsrc%2Flib.rs?ref=b598ab8be46b50d5f407c3858c7b2c788328edc7", "patch": "@@ -33,7 +33,7 @@ use hir_def::{\n     TypeParamId,\n };\n use itertools::Itertools;\n-use ra_db::{impl_intern_key, salsa, CrateId};\n+use ra_db::{salsa, CrateId};\n \n use crate::{\n     db::HirDatabase,\n@@ -140,12 +140,6 @@ pub enum TypeCtor {\n     Closure { def: DefWithBodyId, expr: ExprId },\n }\n \n-/// This exists just for Chalk, because Chalk just has a single `FnDefId` where\n-/// we have different IDs for struct and enum variant constructors.\n-#[derive(Debug, Clone, Copy, PartialEq, Eq, Hash, Ord, PartialOrd)]\n-pub struct CallableDefId(salsa::InternId);\n-impl_intern_key!(CallableDefId);\n-\n impl TypeCtor {\n     pub fn num_ty_params(self, db: &dyn HirDatabase) -> usize {\n         match self {"}, {"sha": "e0a6cfe88f94512e97aa9a6e0068b4ab1a53dabf", "filename": "crates/ra_hir_ty/src/traits/chalk.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/b598ab8be46b50d5f407c3858c7b2c788328edc7/crates%2Fra_hir_ty%2Fsrc%2Ftraits%2Fchalk.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b598ab8be46b50d5f407c3858c7b2c788328edc7/crates%2Fra_hir_ty%2Fsrc%2Ftraits%2Fchalk.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir_ty%2Fsrc%2Ftraits%2Fchalk.rs?ref=b598ab8be46b50d5f407c3858c7b2c788328edc7", "patch": "@@ -552,14 +552,14 @@ pub(crate) fn fn_def_datum_query(\n     Arc::new(datum)\n }\n \n-impl From<FnDefId> for crate::CallableDefId {\n+impl From<FnDefId> for crate::db::InternedCallableDefId {\n     fn from(fn_def_id: FnDefId) -> Self {\n         InternKey::from_intern_id(fn_def_id.0)\n     }\n }\n \n-impl From<crate::CallableDefId> for FnDefId {\n-    fn from(callable_def_id: crate::CallableDefId) -> Self {\n+impl From<crate::db::InternedCallableDefId> for FnDefId {\n+    fn from(callable_def_id: crate::db::InternedCallableDefId) -> Self {\n         chalk_ir::FnDefId(callable_def_id.as_intern_id())\n     }\n }"}]}