{"sha": "b97a33b1cb90326ccfa1c8a9882e50cd9e6de80f", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI5N2EzM2IxY2I5MDMyNmNjZmExYzhhOTg4MmU1MGNkOWU2ZGU4MGY=", "commit": {"author": {"name": "Josh Stone", "email": "jistone@redhat.com", "date": "2021-03-22T19:44:48Z"}, "committer": {"name": "Josh Stone", "email": "jistone@redhat.com", "date": "2021-03-22T19:44:48Z"}, "message": "All supported LLVM versions have MSP430AsmPrinter", "tree": {"sha": "b4d425d65cffda19f6f71ad269d00b6fed816666", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b4d425d65cffda19f6f71ad269d00b6fed816666"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b97a33b1cb90326ccfa1c8a9882e50cd9e6de80f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b97a33b1cb90326ccfa1c8a9882e50cd9e6de80f", "html_url": "https://github.com/rust-lang/rust/commit/b97a33b1cb90326ccfa1c8a9882e50cd9e6de80f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b97a33b1cb90326ccfa1c8a9882e50cd9e6de80f/comments", "author": {"login": "cuviper", "id": 36186, "node_id": "MDQ6VXNlcjM2MTg2", "avatar_url": "https://avatars.githubusercontent.com/u/36186?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cuviper", "html_url": "https://github.com/cuviper", "followers_url": "https://api.github.com/users/cuviper/followers", "following_url": "https://api.github.com/users/cuviper/following{/other_user}", "gists_url": "https://api.github.com/users/cuviper/gists{/gist_id}", "starred_url": "https://api.github.com/users/cuviper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cuviper/subscriptions", "organizations_url": "https://api.github.com/users/cuviper/orgs", "repos_url": "https://api.github.com/users/cuviper/repos", "events_url": "https://api.github.com/users/cuviper/events{/privacy}", "received_events_url": "https://api.github.com/users/cuviper/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cuviper", "id": 36186, "node_id": "MDQ6VXNlcjM2MTg2", "avatar_url": "https://avatars.githubusercontent.com/u/36186?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cuviper", "html_url": "https://github.com/cuviper", "followers_url": "https://api.github.com/users/cuviper/followers", "following_url": "https://api.github.com/users/cuviper/following{/other_user}", "gists_url": "https://api.github.com/users/cuviper/gists{/gist_id}", "starred_url": "https://api.github.com/users/cuviper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cuviper/subscriptions", "organizations_url": "https://api.github.com/users/cuviper/orgs", "repos_url": "https://api.github.com/users/cuviper/repos", "events_url": "https://api.github.com/users/cuviper/events{/privacy}", "received_events_url": "https://api.github.com/users/cuviper/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7d872f538efc5cb3786c3aa0a6654bae7a67ec63", "url": "https://api.github.com/repos/rust-lang/rust/commits/7d872f538efc5cb3786c3aa0a6654bae7a67ec63", "html_url": "https://github.com/rust-lang/rust/commit/7d872f538efc5cb3786c3aa0a6654bae7a67ec63"}], "stats": {"total": 19, "additions": 1, "deletions": 18}, "files": [{"sha": "301ed639f3b511b578848a9dcf6de27de345d909", "filename": "compiler/rustc_llvm/build.rs", "status": "modified", "additions": 0, "deletions": 14, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/b97a33b1cb90326ccfa1c8a9882e50cd9e6de80f/compiler%2Frustc_llvm%2Fbuild.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b97a33b1cb90326ccfa1c8a9882e50cd9e6de80f/compiler%2Frustc_llvm%2Fbuild.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_llvm%2Fbuild.rs?ref=b97a33b1cb90326ccfa1c8a9882e50cd9e6de80f", "patch": "@@ -88,16 +88,6 @@ fn main() {\n         \"riscv\",\n     ];\n \n-    let mut version_cmd = Command::new(&llvm_config);\n-    version_cmd.arg(\"--version\");\n-    let version_output = output(&mut version_cmd);\n-    let mut parts = version_output.split('.').take(2).filter_map(|s| s.parse::<u32>().ok());\n-    let (major, _minor) = if let (Some(major), Some(minor)) = (parts.next(), parts.next()) {\n-        (major, minor)\n-    } else {\n-        (8, 0)\n-    };\n-\n     let required_components = &[\n         \"ipo\",\n         \"bitreader\",\n@@ -123,10 +113,6 @@ fn main() {\n         println!(\"cargo:rustc-cfg=llvm_component=\\\"{}\\\"\", component);\n     }\n \n-    if major >= 9 {\n-        println!(\"cargo:rustc-cfg=llvm_has_msp430_asm_parser\");\n-    }\n-\n     // Link in our own LLVM shims, compiled with the same flags as LLVM\n     let mut cmd = Command::new(&llvm_config);\n     cmd.arg(\"--cxxflags\");"}, {"sha": "555aefb192948303a13864b55a7f167453c3e252", "filename": "compiler/rustc_llvm/src/lib.rs", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/b97a33b1cb90326ccfa1c8a9882e50cd9e6de80f/compiler%2Frustc_llvm%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b97a33b1cb90326ccfa1c8a9882e50cd9e6de80f/compiler%2Frustc_llvm%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_llvm%2Fsrc%2Flib.rs?ref=b97a33b1cb90326ccfa1c8a9882e50cd9e6de80f", "patch": "@@ -125,10 +125,7 @@ pub fn initialize_available_targets() {\n         LLVMInitializeMSP430TargetInfo,\n         LLVMInitializeMSP430Target,\n         LLVMInitializeMSP430TargetMC,\n-        LLVMInitializeMSP430AsmPrinter\n-    );\n-    init_target!(\n-        all(llvm_component = \"msp430\", llvm_has_msp430_asm_parser),\n+        LLVMInitializeMSP430AsmPrinter,\n         LLVMInitializeMSP430AsmParser\n     );\n     init_target!("}]}