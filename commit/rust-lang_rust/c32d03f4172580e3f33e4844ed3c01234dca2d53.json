{"sha": "c32d03f4172580e3f33e4844ed3c01234dca2d53", "node_id": "MDY6Q29tbWl0NzI0NzEyOmMzMmQwM2Y0MTcyNTgwZTNmMzNlNDg0NGVkM2MwMTIzNGRjYTJkNTM=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2014-12-22T17:04:23Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2014-12-29T16:58:21Z"}, "message": "std: Stabilize the prelude module\n\nThis commit is an implementation of [RFC 503][rfc] which is a stabilization\nstory for the prelude. Most of the RFC was directly applied, removing reexports.\nSome reexports are kept around, however:\n\n* `range` remains until range syntax has landed to reduce churn.\n* `Path` and `GenericPath` remain until path reform lands. This is done to\n  prevent many imports of `GenericPath` which will soon be removed.\n* All `io` traits remain until I/O reform lands so imports can be rewritten all\n  at once to `std::io::prelude::*`.\n\nThis is a breaking change because many prelude reexports have been removed, and\nthe RFC can be consulted for the exact list of removed reexports, as well as to\nfind the locations of where to import them.\n\n[rfc]: https://github.com/rust-lang/rfcs/blob/master/text/0503-prelude-stabilization.md\n[breaking-change]\n\nCloses #20068", "tree": {"sha": "70c57ebe6a3b5f6e8cb4609c918f9455671926be", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/70c57ebe6a3b5f6e8cb4609c918f9455671926be"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c32d03f4172580e3f33e4844ed3c01234dca2d53", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c32d03f4172580e3f33e4844ed3c01234dca2d53", "html_url": "https://github.com/rust-lang/rust/commit/c32d03f4172580e3f33e4844ed3c01234dca2d53", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c32d03f4172580e3f33e4844ed3c01234dca2d53/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3dcc409fac18a258ba2a8af4345d9566ec8eebad", "url": "https://api.github.com/repos/rust-lang/rust/commits/3dcc409fac18a258ba2a8af4345d9566ec8eebad", "html_url": "https://github.com/rust-lang/rust/commit/3dcc409fac18a258ba2a8af4345d9566ec8eebad"}], "stats": {"total": 2769, "additions": 1615, "deletions": 1154}, "files": [{"sha": "ad1264828cb9679506e13084c82d97633b93009e", "filename": "src/compiletest/compiletest.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Fcompiletest%2Fcompiletest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Fcompiletest%2Fcompiletest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcompiletest%2Fcompiletest.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -22,8 +22,8 @@ extern crate regex;\n use std::os;\n use std::io;\n use std::io::fs;\n-use std::str::FromStr;\n-use std::thunk::{Thunk};\n+use std::str::{FromStr, from_str};\n+use std::thunk::Thunk;\n use getopts::{optopt, optflag, reqopt};\n use common::Config;\n use common::{Pretty, DebugInfoGdb, DebugInfoLldb, Codegen};"}, {"sha": "b8808eaf57d93e076b5b90829ecd0d45b5317202", "filename": "src/doc/guide-ffi.md", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Fdoc%2Fguide-ffi.md", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Fdoc%2Fguide-ffi.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Fguide-ffi.md?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -450,6 +450,8 @@ them.\n \n ~~~no_run\n extern crate libc;\n+\n+use std::c_str::ToCStr;\n use std::ptr;\n \n #[link(name = \"readline\")]"}, {"sha": "8b8f23a065566a6bec57ea1158bfe6f6d017f2d1", "filename": "src/doc/guide.md", "status": "modified", "additions": 98, "deletions": 78, "changes": 176, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Fdoc%2Fguide.md", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Fdoc%2Fguide.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Fguide.md?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -1103,10 +1103,11 @@ An `Ordering` can only be _one_ of `Less`, `Equal`, or `Greater` at any given\n time. Here's an example:\n \n ```{rust}\n+# use std::cmp::Ordering;\n fn cmp(a: int, b: int) -> Ordering {\n-    if a < b { Less }\n-    else if a > b { Greater }\n-    else { Equal }\n+    if a < b { Ordering::Less }\n+    else if a > b { Ordering::Greater }\n+    else { Ordering::Equal }\n }\n \n fn main() {\n@@ -1115,11 +1116,11 @@ fn main() {\n \n     let ordering = cmp(x, y); // ordering: Ordering\n \n-    if ordering == Less {\n+    if ordering == Ordering::Less {\n         println!(\"less\");\n-    } else if ordering == Greater {\n+    } else if ordering == Ordering::Greater {\n         println!(\"greater\");\n-    } else if ordering == Equal {\n+    } else if ordering == Ordering::Equal {\n         println!(\"equal\");\n     }\n }\n@@ -1274,10 +1275,11 @@ for every possible value of `x`, and so our program will compile successfully.\n section on enums?\n \n ```{rust}\n+# use std::cmp::Ordering;\n fn cmp(a: int, b: int) -> Ordering {\n-    if a < b { Less }\n-    else if a > b { Greater }\n-    else { Equal }\n+    if a < b { Ordering::Less }\n+    else if a > b { Ordering::Greater }\n+    else { Ordering::Equal }\n }\n \n fn main() {\n@@ -1286,11 +1288,11 @@ fn main() {\n \n     let ordering = cmp(x, y);\n \n-    if ordering == Less {\n+    if ordering == Ordering::Less {\n         println!(\"less\");\n-    } else if ordering == Greater {\n+    } else if ordering == Ordering::Greater {\n         println!(\"greater\");\n-    } else if ordering == Equal {\n+    } else if ordering == Ordering::Equal {\n         println!(\"equal\");\n     }\n }\n@@ -1299,20 +1301,21 @@ fn main() {\n We can re-write this as a `match`:\n \n ```{rust}\n+# use std::cmp::Ordering;\n fn cmp(a: int, b: int) -> Ordering {\n-    if a < b { Less }\n-    else if a > b { Greater }\n-    else { Equal }\n+    if a < b { Ordering::Less }\n+    else if a > b { Ordering::Greater }\n+    else { Ordering::Equal }\n }\n \n fn main() {\n     let x = 5i;\n     let y = 10i;\n \n     match cmp(x, y) {\n-        Less    => println!(\"less\"),\n-        Greater => println!(\"greater\"),\n-        Equal   => println!(\"equal\"),\n+        Ordering::Less    => println!(\"less\"),\n+        Ordering::Greater => println!(\"greater\"),\n+        Ordering::Equal   => println!(\"equal\"),\n     }\n }\n ```\n@@ -1359,20 +1362,21 @@ side of a `let` binding or directly where an expression is used. We could\n also implement the previous line like this:\n \n ```{rust}\n+# use std::cmp::Ordering;\n fn cmp(a: int, b: int) -> Ordering {\n-    if a < b { Less }\n-    else if a > b { Greater }\n-    else { Equal }\n+    if a < b { Ordering::Less }\n+    else if a > b { Ordering::Greater }\n+    else { Ordering::Equal }\n }\n \n fn main() {\n     let x = 5i;\n     let y = 10i;\n \n     println!(\"{}\", match cmp(x, y) {\n-        Less    => \"less\",\n-        Greater => \"greater\",\n-        Equal   => \"equal\",\n+        Ordering::Less    => \"less\",\n+        Ordering::Greater => \"greater\",\n+        Ordering::Equal   => \"equal\",\n     });\n }\n ```\n@@ -2137,6 +2141,7 @@ guess to the secret number:\n ```{rust,ignore}\n use std::io;\n use std::rand;\n+use std::cmp::Ordering;\n \n fn main() {\n     println!(\"Guess the number!\");\n@@ -2155,16 +2160,16 @@ fn main() {\n     println!(\"You guessed: {}\", input);\n \n     match cmp(input, secret_number) {\n-        Less    => println!(\"Too small!\"),\n-        Greater => println!(\"Too big!\"),\n-        Equal   => println!(\"You win!\"),\n+        Ordering::Less    => println!(\"Too small!\"),\n+        Ordering::Greater => println!(\"Too big!\"),\n+        Ordering::Equal   => println!(\"You win!\"),\n     }\n }\n \n fn cmp(a: int, b: int) -> Ordering {\n-    if a < b { Less }\n-    else if a > b { Greater }\n-    else { Equal }\n+    if a < b { Ordering::Less }\n+    else if a > b { Ordering::Greater }\n+    else { Ordering::Equal }\n }\n ```\n \n@@ -2191,6 +2196,7 @@ we wrote the `cmp` function! Let's change it to take `uint`s:\n ```{rust,ignore}\n use std::io;\n use std::rand;\n+use std::cmp::Ordering;\n \n fn main() {\n     println!(\"Guess the number!\");\n@@ -2209,16 +2215,16 @@ fn main() {\n     println!(\"You guessed: {}\", input);\n \n     match cmp(input, secret_number) {\n-        Less    => println!(\"Too small!\"),\n-        Greater => println!(\"Too big!\"),\n-        Equal   => println!(\"You win!\"),\n+        Ordering::Less    => println!(\"Too small!\"),\n+        Ordering::Greater => println!(\"Too big!\"),\n+        Ordering::Equal   => println!(\"You win!\"),\n     }\n }\n \n fn cmp(a: uint, b: uint) -> Ordering {\n-    if a < b { Less }\n-    else if a > b { Greater }\n-    else { Equal }\n+    if a < b { Ordering::Less }\n+    else if a > b { Ordering::Greater }\n+    else { Ordering::Equal }\n }\n ```\n \n@@ -2288,6 +2294,8 @@ Anyway, with us now converting our input to a number, our code looks like this:\n ```{rust,ignore}\n use std::io;\n use std::rand;\n+use std::str::from_str;\n+use std::cmp::Ordering;\n \n fn main() {\n     println!(\"Guess the number!\");\n@@ -2306,16 +2314,16 @@ fn main() {\n     println!(\"You guessed: {}\", input_num);\n \n     match cmp(input_num, secret_number) {\n-        Less    => println!(\"Too small!\"),\n-        Greater => println!(\"Too big!\"),\n-        Equal   => println!(\"You win!\"),\n+        Ordering::Less    => println!(\"Too small!\"),\n+        Ordering::Greater => println!(\"Too big!\"),\n+        Ordering::Equal   => println!(\"You win!\"),\n     }\n }\n \n fn cmp(a: uint, b: uint) -> Ordering {\n-    if a < b { Less }\n-    else if a > b { Greater }\n-    else { Equal }\n+    if a < b { Ordering::Less }\n+    else if a > b { Ordering::Greater }\n+    else { Ordering::Equal }\n }\n ```\n \n@@ -2337,6 +2345,8 @@ to do that. Try this code:\n ```{rust,no_run}\n use std::io;\n use std::rand;\n+use std::str::from_str;\n+use std::cmp::Ordering;\n \n fn main() {\n     println!(\"Guess the number!\");\n@@ -2364,16 +2374,16 @@ fn main() {\n     println!(\"You guessed: {}\", num);\n \n     match cmp(num, secret_number) {\n-        Less    => println!(\"Too small!\"),\n-        Greater => println!(\"Too big!\"),\n-        Equal   => println!(\"You win!\"),\n+        Ordering::Less    => println!(\"Too small!\"),\n+        Ordering::Greater => println!(\"Too big!\"),\n+        Ordering::Equal   => println!(\"You win!\"),\n     }\n }\n \n fn cmp(a: uint, b: uint) -> Ordering {\n-    if a < b { Less }\n-    else if a > b { Greater }\n-    else { Equal }\n+    if a < b { Ordering::Less }\n+    else if a > b { Ordering::Greater }\n+    else { Ordering::Equal }\n }\n ```\n \n@@ -2403,6 +2413,8 @@ code looks like this:\n ```{rust,no_run}\n use std::io;\n use std::rand;\n+use std::str::from_str;\n+use std::cmp::Ordering;\n \n fn main() {\n     println!(\"Guess the number!\");\n@@ -2430,16 +2442,16 @@ fn main() {\n     println!(\"You guessed: {}\", num);\n \n     match cmp(num, secret_number) {\n-        Less    => println!(\"Too small!\"),\n-        Greater => println!(\"Too big!\"),\n-        Equal   => println!(\"You win!\"),\n+        Ordering::Less    => println!(\"Too small!\"),\n+        Ordering::Greater => println!(\"Too big!\"),\n+        Ordering::Equal   => println!(\"You win!\"),\n     }\n }\n \n fn cmp(a: uint, b: uint) -> Ordering {\n-    if a < b { Less }\n-    else if a > b { Greater }\n-    else { Equal }\n+    if a < b { Ordering::Less }\n+    else if a > b { Ordering::Greater }\n+    else { Ordering::Equal }\n }\n ```\n \n@@ -2476,6 +2488,8 @@ Let's add that in:\n ```{rust,no_run}\n use std::io;\n use std::rand;\n+use std::str::from_str;\n+use std::cmp::Ordering;\n \n fn main() {\n     println!(\"Guess the number!\");\n@@ -2505,17 +2519,17 @@ fn main() {\n         println!(\"You guessed: {}\", num);\n \n         match cmp(num, secret_number) {\n-            Less    => println!(\"Too small!\"),\n-            Greater => println!(\"Too big!\"),\n-            Equal   => println!(\"You win!\"),\n+            Ordering::Less    => println!(\"Too small!\"),\n+            Ordering::Greater => println!(\"Too big!\"),\n+            Ordering::Equal   => println!(\"You win!\"),\n         }\n     }\n }\n \n fn cmp(a: uint, b: uint) -> Ordering {\n-    if a < b { Less }\n-    else if a > b { Greater }\n-    else { Equal }\n+    if a < b { Ordering::Less }\n+    else if a > b { Ordering::Greater }\n+    else { Ordering::Equal }\n }\n ```\n \n@@ -2551,6 +2565,8 @@ suboptimal to say the least. First, let's actually quit when you win the game:\n ```{rust,no_run}\n use std::io;\n use std::rand;\n+use std::str::from_str;\n+use std::cmp::Ordering;\n \n fn main() {\n     println!(\"Guess the number!\");\n@@ -2580,9 +2596,9 @@ fn main() {\n         println!(\"You guessed: {}\", num);\n \n         match cmp(num, secret_number) {\n-            Less    => println!(\"Too small!\"),\n-            Greater => println!(\"Too big!\"),\n-            Equal   => {\n+            Ordering::Less    => println!(\"Too small!\"),\n+            Ordering::Greater => println!(\"Too big!\"),\n+            Ordering::Equal   => {\n                 println!(\"You win!\");\n                 return;\n             },\n@@ -2591,9 +2607,9 @@ fn main() {\n }\n \n fn cmp(a: uint, b: uint) -> Ordering {\n-    if a < b { Less }\n-    else if a > b { Greater }\n-    else { Equal }\n+    if a < b { Ordering::Less }\n+    else if a > b { Ordering::Greater }\n+    else { Ordering::Equal }\n }\n ```\n \n@@ -2606,6 +2622,8 @@ we don't want to quit, we just want to ignore it. Change that `return` to\n ```{rust,no_run}\n use std::io;\n use std::rand;\n+use std::str::from_str;\n+use std::cmp::Ordering;\n \n fn main() {\n     println!(\"Guess the number!\");\n@@ -2635,9 +2653,9 @@ fn main() {\n         println!(\"You guessed: {}\", num);\n \n         match cmp(num, secret_number) {\n-            Less    => println!(\"Too small!\"),\n-            Greater => println!(\"Too big!\"),\n-            Equal   => {\n+            Ordering::Less    => println!(\"Too small!\"),\n+            Ordering::Greater => println!(\"Too big!\"),\n+            Ordering::Equal   => {\n                 println!(\"You win!\");\n                 return;\n             },\n@@ -2646,9 +2664,9 @@ fn main() {\n }\n \n fn cmp(a: uint, b: uint) -> Ordering {\n-    if a < b { Less }\n-    else if a > b { Greater }\n-    else { Equal }\n+    if a < b { Ordering::Less }\n+    else if a > b { Ordering::Greater }\n+    else { Ordering::Equal }\n }\n ```\n \n@@ -2684,6 +2702,8 @@ It was good for testing, but it kind of ruins the game. Here's our final source:\n ```{rust,no_run}\n use std::io;\n use std::rand;\n+use std::str::from_str;\n+use std::cmp::Ordering;\n \n fn main() {\n     println!(\"Guess the number!\");\n@@ -2711,9 +2731,9 @@ fn main() {\n         println!(\"You guessed: {}\", num);\n \n         match cmp(num, secret_number) {\n-            Less    => println!(\"Too small!\"),\n-            Greater => println!(\"Too big!\"),\n-            Equal   => {\n+            Ordering::Less    => println!(\"Too small!\"),\n+            Ordering::Greater => println!(\"Too big!\"),\n+            Ordering::Equal   => {\n                 println!(\"You win!\");\n                 return;\n             },\n@@ -2722,9 +2742,9 @@ fn main() {\n }\n \n fn cmp(a: uint, b: uint) -> Ordering {\n-    if a < b { Less }\n-    else if a > b { Greater }\n-    else { Equal }\n+    if a < b { Ordering::Less }\n+    else if a > b { Ordering::Greater }\n+    else { Ordering::Equal }\n }\n ```\n "}, {"sha": "e510685bb1869310a2192cb0053723c80a433e2f", "filename": "src/doc/reference.md", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Fdoc%2Freference.md", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Fdoc%2Freference.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Freference.md?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -3174,6 +3174,7 @@ then the expression completes.\n Some examples of call expressions:\n \n ```\n+# use std::str::from_str;\n # fn add(x: int, y: int) -> int { 0 }\n \n let x: int = add(1, 2);"}, {"sha": "dfddf045fc8e49b3e3c6a0439563a907fa52a3e8", "filename": "src/libcollections/binary_heap.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcollections%2Fbinary_heap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcollections%2Fbinary_heap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fbinary_heap.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -26,6 +26,7 @@\n //! [dir_graph]: http://en.wikipedia.org/wiki/Directed_graph\n //!\n //! ```\n+//! use std::cmp::Ordering;\n //! use std::collections::BinaryHeap;\n //! use std::uint;\n //!\n@@ -151,6 +152,7 @@\n use core::prelude::*;\n \n use core::default::Default;\n+use core::iter::FromIterator;\n use core::mem::{zeroed, replace, swap};\n use core::ptr;\n "}, {"sha": "e8bd5e76eb7f01c0f5c3b415fe75a1977c81902e", "filename": "src/libcollections/bit.rs", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcollections%2Fbit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcollections%2Fbit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fbit.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -82,16 +82,19 @@\n \n use core::prelude::*;\n \n+use core::cmp::Ordering;\n use core::cmp;\n use core::default::Default;\n use core::fmt;\n-use core::iter::{Cloned, Chain, Enumerate, Repeat, Skip, Take};\n-use core::iter;\n+use core::hash;\n+use core::iter::RandomAccessIterator;\n+use core::iter::{Chain, Enumerate, Repeat, Skip, Take, repeat, Cloned};\n+use core::iter::{mod, FromIterator};\n use core::num::Int;\n+use core::ops::Index;\n use core::slice::{Iter, IterMut};\n use core::{u8, u32, uint};\n \n-use core::hash;\n use Vec;\n \n type Blocks<'a> = Cloned<Iter<'a, u32>>;"}, {"sha": "0030e612f6eb73af0dead027da4003507196186b", "filename": "src/libcollections/btree/map.rs", "status": "modified", "additions": 11, "deletions": 8, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcollections%2Fbtree%2Fmap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcollections%2Fbtree%2Fmap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fbtree%2Fmap.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -19,21 +19,23 @@ pub use self::Entry::*;\n \n use core::prelude::*;\n \n-use self::StackOp::*;\n-use super::node::{mod, Node, Found, GoDown};\n-use super::node::{Traversal, MutTraversal, MoveTraversal};\n-use super::node::TraversalItem::{mod, Elem, Edge};\n-use super::node::ForceResult::{Leaf, Internal};\n use core::borrow::BorrowFrom;\n-use std::hash::{Writer, Hash};\n+use core::cmp::Ordering;\n use core::default::Default;\n-use core::{iter, fmt, mem};\n use core::fmt::Show;\n-use core::iter::Map;\n+use core::hash::{Writer, Hash};\n+use core::iter::{Map, FromIterator};\n+use core::ops::{Index, IndexMut};\n+use core::{iter, fmt, mem};\n \n use ring_buf::RingBuf;\n \n use self::Continuation::{Continue, Finished};\n+use self::StackOp::*;\n+use super::node::ForceResult::{Leaf, Internal};\n+use super::node::TraversalItem::{mod, Elem, Edge};\n+use super::node::{Traversal, MutTraversal, MoveTraversal};\n+use super::node::{mod, Node, Found, GoDown};\n \n // FIXME(conventions): implement bounded iterators\n \n@@ -495,6 +497,7 @@ mod stack {\n     use core::prelude::*;\n     use core::kinds::marker;\n     use core::mem;\n+    use core::ops::{Deref, DerefMut};\n     use super::BTreeMap;\n     use super::super::node::{mod, Node, Fit, Split, Internal, Leaf};\n     use super::super::node::handle;"}, {"sha": "828c1ae89b44eac0af040d05c1a28dfbdcc89b88", "filename": "src/libcollections/btree/node.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcollections%2Fbtree%2Fnode.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcollections%2Fbtree%2Fnode.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fbtree%2Fnode.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -18,9 +18,11 @@ pub use self::TraversalItem::*;\n \n use core::prelude::*;\n \n-use core::{slice, mem, ptr, cmp, num, raw};\n-use core::iter::Zip;\n use core::borrow::BorrowFrom;\n+use core::cmp::Ordering::{Greater, Less, Equal};\n+use core::iter::Zip;\n+use core::ops::{Deref, DerefMut};\n+use core::{slice, mem, ptr, cmp, num, raw};\n use alloc::heap;\n \n /// Represents the result of an Insertion: either the item fit, or the node had to split"}, {"sha": "e24b203efed6d42ecda780a2c534794595b1fec0", "filename": "src/libcollections/btree/set.rs", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcollections%2Fbtree%2Fset.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcollections%2Fbtree%2Fset.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fbtree%2Fset.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -13,13 +13,16 @@\n \n use core::prelude::*;\n \n-use btree_map::{BTreeMap, Keys};\n-use std::hash::Hash;\n use core::borrow::BorrowFrom;\n+use core::cmp::Ordering::{mod, Less, Greater, Equal};\n use core::default::Default;\n-use core::fmt;\n-use core::iter::{Peekable, Map};\n use core::fmt::Show;\n+use core::fmt;\n+use core::hash::Hash;\n+use core::iter::{Peekable, Map, FromIterator};\n+use core::ops::{BitOr, BitAnd, BitXor, Sub};\n+\n+use btree_map::{BTreeMap, Keys};\n \n // FIXME(conventions): implement bounded iterators\n "}, {"sha": "53fefcc830542410bdc4719e716a8f7532856eca", "filename": "src/libcollections/dlist.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcollections%2Fdlist.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcollections%2Fdlist.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fdlist.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -22,12 +22,13 @@\n use core::prelude::*;\n \n use alloc::boxed::Box;\n+use core::cmp::Ordering;\n use core::default::Default;\n use core::fmt;\n-use core::iter;\n+use core::hash::{Writer, Hash};\n+use core::iter::{mod, FromIterator};\n use core::mem;\n use core::ptr;\n-use std::hash::{Writer, Hash};\n \n /// A doubly-linked list.\n pub struct DList<T> {"}, {"sha": "fae3228b064da5efab42dfee4c4e467fbcc6e5ae", "filename": "src/libcollections/enum_set.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcollections%2Fenum_set.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcollections%2Fenum_set.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fenum_set.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -16,6 +16,8 @@\n use core::prelude::*;\n use core::fmt;\n use core::num::Int;\n+use core::iter::FromIterator;\n+use core::ops::{Sub, BitOr, BitAnd, BitXor};\n \n // FIXME(contentions): implement union family of methods? (general design may be wrong here)\n "}, {"sha": "66f7b9e9c4ccd8486a20fc1cab79bb7ec9a53a9c", "filename": "src/libcollections/ring_buf.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcollections%2Fring_buf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcollections%2Fring_buf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fring_buf.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -14,14 +14,16 @@\n \n use core::prelude::*;\n \n+use core::cmp::Ordering;\n use core::default::Default;\n use core::fmt;\n-use core::iter;\n-use core::raw::Slice as RawSlice;\n-use core::ptr;\n+use core::iter::{mod, FromIterator, RandomAccessIterator};\n use core::kinds::marker;\n use core::mem;\n use core::num::{Int, UnsignedInt};\n+use core::ops::{Index, IndexMut};\n+use core::ptr;\n+use core::raw::Slice as RawSlice;\n \n use std::hash::{Writer, Hash};\n use std::cmp;"}, {"sha": "a183250fed075b4d3ad0960a0827a60cef99416a", "filename": "src/libcollections/slice.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcollections%2Fslice.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcollections%2Fslice.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fslice.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -89,14 +89,15 @@\n \n use alloc::boxed::Box;\n use core::borrow::{BorrowFrom, BorrowFromMut, ToOwned};\n+use core::cmp::Ordering::{mod, Greater, Less};\n use core::cmp;\n use core::iter::{range_step, MultiplicativeIterator};\n use core::kinds::Sized;\n use core::mem::size_of;\n use core::mem;\n use core::ops::FnMut;\n-use core::prelude::{Clone, Greater, Iterator, IteratorExt, Less, None, Option};\n-use core::prelude::{Ord, Ordering, RawPtr, Some, range};\n+use core::prelude::{Clone, Iterator, IteratorExt, None, Option};\n+use core::prelude::{Ord, RawPtr, Some, range};\n use core::ptr;\n use core::slice as core_slice;\n use self::Direction::*;"}, {"sha": "26ff3e8679446639283c629ae1d96c07e1c76428", "filename": "src/libcollections/string.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcollections%2Fstring.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcollections%2Fstring.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fstring.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -15,12 +15,14 @@\n use core::prelude::*;\n \n use core::borrow::{Cow, IntoCow};\n+use core::cmp::Equiv;\n use core::default::Default;\n use core::fmt;\n use core::hash;\n+use core::iter::FromIterator;\n use core::mem;\n+use core::ops::{mod, Deref, Add};\n use core::ptr;\n-use core::ops;\n use core::raw::Slice as RawSlice;\n use unicode::str as unicode_str;\n use unicode::str::Utf16Item;"}, {"sha": "e5c2ef9300eadef7914efb8f74785a923f4680d9", "filename": "src/libcollections/vec.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcollections%2Fvec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcollections%2Fvec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fvec.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -50,14 +50,16 @@ use alloc::boxed::Box;\n use alloc::heap::{EMPTY, allocate, reallocate, deallocate};\n use core::borrow::{Cow, IntoCow};\n use core::cmp::max;\n+use core::cmp::{Equiv, Ordering};\n use core::default::Default;\n use core::fmt;\n use core::hash::{mod, Hash};\n-use core::iter::repeat;\n+use core::iter::{repeat, FromIterator};\n use core::kinds::marker::{ContravariantLifetime, InvariantType};\n use core::mem;\n use core::nonzero::NonZero;\n use core::num::{Int, UnsignedInt};\n+use core::ops::{Index, IndexMut, Deref, Add};\n use core::ops;\n use core::ptr;\n use core::raw::Slice as RawSlice;"}, {"sha": "063366c8d9c491301b55dc6dc0224f786ec3ba82", "filename": "src/libcollections/vec_map.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcollections%2Fvec_map.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcollections%2Fvec_map.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fvec_map.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -15,12 +15,14 @@\n \n use core::prelude::*;\n \n+use core::cmp::Ordering;\n use core::default::Default;\n use core::fmt;\n use core::hash::{Hash, Writer};\n+use core::iter::{Enumerate, FilterMap, Map, FromIterator};\n use core::iter;\n-use core::iter::{Enumerate, FilterMap, Map};\n use core::mem::replace;\n+use core::ops::{Index, IndexMut};\n \n use {vec, slice};\n use vec::Vec;"}, {"sha": "4d72fb8ac9209d3cf7d8b9521b7426c2789e351e", "filename": "src/libcore/cmp.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcore%2Fcmp.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcore%2Fcmp.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fcmp.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -112,11 +112,12 @@ impl Ordering {\n     /// # Example\n     ///\n     /// ```rust\n+    /// use std::cmp::Ordering::{Less, Equal, Greater};\n+    ///\n     /// assert_eq!(Less.reverse(), Greater);\n     /// assert_eq!(Equal.reverse(), Equal);\n     /// assert_eq!(Greater.reverse(), Less);\n     ///\n-    ///\n     /// let mut data: &mut [_] = &mut [2u, 10, 5, 8];\n     ///\n     /// // sort the array from largest to smallest.\n@@ -157,6 +158,8 @@ pub trait Ord<Sized? Rhs = Self> for Sized?: Eq<Rhs> + PartialOrd<Rhs> {\n     /// the expression `self <operator> other` if true.  For example:\n     ///\n     /// ```\n+    /// use std::cmp::Ordering::{Less, Equal, Greater};\n+    ///\n     /// assert_eq!( 5u.cmp(&10), Less);     // because 5 < 10\n     /// assert_eq!(10u.cmp(&5),  Greater);  // because 10 > 5\n     /// assert_eq!( 5u.cmp(&5),  Equal);    // because 5 == 5"}, {"sha": "a2ef8d484a75ae192f83138b22d6d0d3fbe6d4e2", "filename": "src/libcore/ops.rs", "status": "modified", "additions": 46, "deletions": 4, "changes": 50, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcore%2Fops.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcore%2Fops.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fops.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -25,6 +25,8 @@\n //! demonstrates adding and subtracting two `Point`s.\n //!\n //! ```rust\n+//! use std::ops::{Add, Sub};\n+//!\n //! #[deriving(Show)]\n //! struct Point {\n //!     x: int,\n@@ -68,13 +70,13 @@ use option::Option::{mod, Some, None};\n /// struct HasDrop;\n ///\n /// impl Drop for HasDrop {\n-///   fn drop(&mut self) {\n-///       println!(\"Dropping!\");\n-///   }\n+///     fn drop(&mut self) {\n+///         println!(\"Dropping!\");\n+///     }\n /// }\n ///\n /// fn main() {\n-///   let _x = HasDrop;\n+///     let _x = HasDrop;\n /// }\n /// ```\n #[lang=\"drop\"]\n@@ -91,6 +93,8 @@ pub trait Drop {\n /// calling `add`, and therefore, `main` prints `Adding!`.\n ///\n /// ```rust\n+/// use std::ops::Add;\n+///\n /// #[deriving(Copy)]\n /// struct Foo;\n ///\n@@ -130,6 +134,8 @@ add_impl! { uint u8 u16 u32 u64 int i8 i16 i32 i64 f32 f64 }\n /// calling `sub`, and therefore, `main` prints `Subtracting!`.\n ///\n /// ```rust\n+/// use std::ops::Sub;\n+///\n /// #[deriving(Copy)]\n /// struct Foo;\n ///\n@@ -169,6 +175,8 @@ sub_impl! { uint u8 u16 u32 u64 int i8 i16 i32 i64 f32 f64 }\n /// calling `mul`, and therefore, `main` prints `Multiplying!`.\n ///\n /// ```rust\n+/// use std::ops::Mul;\n+///\n /// #[deriving(Copy)]\n /// struct Foo;\n ///\n@@ -208,6 +216,8 @@ mul_impl! { uint u8 u16 u32 u64 int i8 i16 i32 i64 f32 f64 }\n /// calling `div`, and therefore, `main` prints `Dividing!`.\n ///\n /// ```\n+/// use std::ops::Div;\n+///\n /// #[deriving(Copy)]\n /// struct Foo;\n ///\n@@ -247,6 +257,8 @@ div_impl! { uint u8 u16 u32 u64 int i8 i16 i32 i64 f32 f64 }\n /// calling `rem`, and therefore, `main` prints `Remainder-ing!`.\n ///\n /// ```\n+/// use std::ops::Rem;\n+///\n /// #[deriving(Copy)]\n /// struct Foo;\n ///\n@@ -300,6 +312,8 @@ rem_float_impl! { f64, fmod }\n /// `neg`, and therefore, `main` prints `Negating!`.\n ///\n /// ```\n+/// use std::ops::Neg;\n+///\n /// #[deriving(Copy)]\n /// struct Foo;\n ///\n@@ -352,6 +366,8 @@ macro_rules! neg_uint_impl {\n /// `neg`, and therefore, `main` prints `Negating!`.\n ///\n /// ```\n+/// use std::ops::Neg;\n+///\n /// struct Foo;\n ///\n /// impl Copy for Foo {}\n@@ -411,6 +427,8 @@ neg_uint_impl! { u64, i64 }\n /// `not`, and therefore, `main` prints `Not-ing!`.\n ///\n /// ```\n+/// use std::ops::Not;\n+///\n /// #[deriving(Copy)]\n /// struct Foo;\n ///\n@@ -453,6 +471,8 @@ macro_rules! not_impl {\n /// `not`, and therefore, `main` prints `Not-ing!`.\n ///\n /// ```\n+/// use std::ops::Not;\n+///\n /// struct Foo;\n ///\n /// impl Copy for Foo {}\n@@ -495,6 +515,8 @@ not_impl! { bool uint u8 u16 u32 u64 int i8 i16 i32 i64 }\n /// calling `bitand`, and therefore, `main` prints `Bitwise And-ing!`.\n ///\n /// ```\n+/// use std::ops::BitAnd;\n+///\n /// #[deriving(Copy)]\n /// struct Foo;\n ///\n@@ -534,6 +556,8 @@ bitand_impl! { bool uint u8 u16 u32 u64 int i8 i16 i32 i64 }\n /// calling `bitor`, and therefore, `main` prints `Bitwise Or-ing!`.\n ///\n /// ```\n+/// use std::ops::BitOr;\n+///\n /// #[deriving(Copy)]\n /// struct Foo;\n ///\n@@ -573,6 +597,8 @@ bitor_impl! { bool uint u8 u16 u32 u64 int i8 i16 i32 i64 }\n /// calling `bitxor`, and therefore, `main` prints `Bitwise Xor-ing!`.\n ///\n /// ```\n+/// use std::ops::BitXor;\n+///\n /// #[deriving(Copy)]\n /// struct Foo;\n ///\n@@ -612,6 +638,8 @@ bitxor_impl! { bool uint u8 u16 u32 u64 int i8 i16 i32 i64 }\n /// calling `shl`, and therefore, `main` prints `Shifting left!`.\n ///\n /// ```\n+/// use std::ops::Shl;\n+///\n /// #[deriving(Copy)]\n /// struct Foo;\n ///\n@@ -653,6 +681,8 @@ shl_impl! { uint u8 u16 u32 u64 int i8 i16 i32 i64 }\n /// calling `shr`, and therefore, `main` prints `Shifting right!`.\n ///\n /// ```\n+/// use std::ops::Shr;\n+///\n /// #[deriving(Copy)]\n /// struct Foo;\n ///\n@@ -693,6 +723,8 @@ shr_impl! { uint u8 u16 u32 u64 int i8 i16 i32 i64 }\n /// calling `index`, and therefore, `main` prints `Indexing!`.\n ///\n /// ```\n+/// use std::ops::Index;\n+///\n /// #[deriving(Copy)]\n /// struct Foo;\n ///\n@@ -722,6 +754,8 @@ pub trait Index<Sized? Index, Sized? Result> for Sized? {\n /// calling `index_mut`, and therefore, `main` prints `Indexing!`.\n ///\n /// ```\n+/// use std::ops::IndexMut;\n+///\n /// #[deriving(Copy)]\n /// struct Foo;\n ///\n@@ -751,6 +785,8 @@ pub trait IndexMut<Sized? Index, Sized? Result> for Sized? {\n /// calling `slice_to`, and therefore, `main` prints `Slicing!`.\n ///\n /// ```ignore\n+/// use std::ops::Slice;\n+///\n /// #[deriving(Copy)]\n /// struct Foo;\n ///\n@@ -798,6 +834,8 @@ pub trait Slice<Sized? Idx, Sized? Result> for Sized? {\n /// calling `slice_from_mut`, and therefore, `main` prints `Slicing!`.\n ///\n /// ```ignore\n+/// use std::ops::SliceMut;\n+///\n /// #[deriving(Copy)]\n /// struct Foo;\n ///\n@@ -918,6 +956,8 @@ impl<Idx: Clone + Step> Iterator<Idx> for RangeFrom<Idx> {\n /// struct.\n ///\n /// ```\n+/// use std::ops::Deref;\n+///\n /// struct DerefExample<T> {\n ///     value: T\n /// }\n@@ -956,6 +996,8 @@ impl<'a, Sized? T> Deref<T> for &'a mut T {\n /// struct.\n ///\n /// ```\n+/// use std::ops::{Deref, DerefMut};\n+///\n /// struct DerefMutExample<T> {\n ///     value: T\n /// }"}, {"sha": "ac0a6a78baed2caf31557c30b79adb245bf03497", "filename": "src/libcore/option.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcore%2Foption.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcore%2Foption.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Foption.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -723,6 +723,8 @@ impl<T: Default> Option<T> {\n     /// `None` on error.\n     ///\n     /// ```\n+    /// use std::str::from_str;\n+    ///\n     /// let good_year_from_input = \"1909\";\n     /// let bad_year_from_input = \"190blarg\";\n     /// let good_year = good_year_from_input.parse().unwrap_or_default();"}, {"sha": "1fc377cda0a0fc644f43c829872d87a98f6199f6", "filename": "src/libcore/prelude.rs", "status": "modified", "additions": 6, "deletions": 21, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcore%2Fprelude.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcore%2Fprelude.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fprelude.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -30,39 +30,24 @@\n \n // Reexported core operators\n pub use kinds::{Copy, Send, Sized, Sync};\n-pub use ops::{Add, Sub, Mul, Div, Rem, Neg, Not};\n-pub use ops::{BitAnd, BitOr, BitXor};\n-pub use ops::{Drop, Deref, DerefMut};\n-pub use ops::{Shl, Shr};\n-pub use ops::{Index, IndexMut};\n-pub use ops::{Slice, SliceMut};\n-pub use ops::{Fn, FnMut, FnOnce};\n+pub use ops::{Drop, Fn, FnMut, FnOnce};\n \n // Reexported functions\n pub use iter::range;\n pub use mem::drop;\n-pub use str::from_str;\n \n // Reexported types and traits\n \n pub use char::Char;\n pub use clone::Clone;\n pub use cmp::{PartialEq, PartialOrd, Eq, Ord};\n-pub use cmp::{Ordering, Equiv};\n-pub use cmp::Ordering::{Less, Equal, Greater};\n-pub use iter::{FromIterator, Extend, IteratorExt};\n-pub use iter::{Iterator, DoubleEndedIterator, DoubleEndedIteratorExt, RandomAccessIterator};\n+pub use iter::{Extend, IteratorExt};\n+pub use iter::{Iterator, DoubleEndedIterator, DoubleEndedIteratorExt};\n pub use iter::{IteratorCloneExt, CloneIteratorExt};\n-pub use iter::{IteratorOrdExt, MutableDoubleEndedIterator, ExactSizeIterator};\n-pub use num::{ToPrimitive, FromPrimitive};\n-pub use option::Option;\n-pub use option::Option::{Some, None};\n+pub use iter::{IteratorOrdExt, ExactSizeIterator};\n+pub use option::Option::{mod, Some, None};\n pub use ptr::RawPtr;\n-pub use result::Result;\n-pub use result::Result::{Ok, Err};\n+pub use result::Result::{mod, Ok, Err};\n pub use str::{Str, StrExt};\n-pub use tuple::{Tuple1, Tuple2, Tuple3, Tuple4};\n-pub use tuple::{Tuple5, Tuple6, Tuple7, Tuple8};\n-pub use tuple::{Tuple9, Tuple10, Tuple11, Tuple12};\n pub use slice::{PartialEqSliceExt, OrdSliceExt};\n pub use slice::{AsSlice, SliceExt};"}, {"sha": "c738f61e20a25de25f1732ffe2a3a193910f8936", "filename": "src/libcore/result.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcore%2Fresult.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcore%2Fresult.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fresult.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -449,6 +449,7 @@ impl<T, E> Result<T, E> {\n     ///\n     /// ```\n     /// use std::io::IoResult;\n+    /// use std::str::from_str;\n     ///\n     /// let mut buffer = &mut b\"1\\n2\\n3\\n4\\n\";\n     ///"}, {"sha": "270c5c59058b603b592128bfa3be0e8a70e9336d", "filename": "src/libcore/tuple.rs", "status": "modified", "additions": 0, "deletions": 29, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcore%2Ftuple.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcore%2Ftuple.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Ftuple.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -32,35 +32,6 @@\n //! * `PartialOrd`\n //! * `Ord`\n //! * `Default`\n-//!\n-//! # Examples\n-//!\n-//! Using methods:\n-//!\n-//! ```\n-//! #[allow(deprecated)]\n-//! # fn main() {\n-//! let pair = (\"pi\", 3.14f64);\n-//! assert_eq!(pair.val0(), \"pi\");\n-//! assert_eq!(pair.val1(), 3.14f64);\n-//! # }\n-//! ```\n-//!\n-//! Using traits implemented for tuples:\n-//!\n-//! ```\n-//! use std::default::Default;\n-//!\n-//! let a = (1i, 2i);\n-//! let b = (3i, 4i);\n-//! assert!(a != b);\n-//!\n-//! let c = b.clone();\n-//! assert!(b == c);\n-//!\n-//! let d : (u32, f32) = Default::default();\n-//! assert_eq!(d, (0u32, 0.0f32));\n-//! ```\n \n #![stable]\n "}, {"sha": "992c99f1f9fe0a609ee8e12a542ff96f0a062a92", "filename": "src/libcoretest/cmp.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcoretest%2Fcmp.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcoretest%2Fcmp.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcoretest%2Fcmp.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,7 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-use core::cmp::{ partial_min, partial_max };\n+use core::cmp::{partial_min, partial_max};\n+use core::cmp::Ordering::{Less, Greater, Equal};\n \n #[test]\n fn test_int_totalord() {"}, {"sha": "e409dc61510f6e3ecc5a0a9f37271eaa62bd80ab", "filename": "src/libcoretest/num/int_macros.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcoretest%2Fnum%2Fint_macros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcoretest%2Fnum%2Fint_macros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcoretest%2Fnum%2Fint_macros.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -17,6 +17,7 @@ mod tests {\n     use core::int;\n     use core::num::{FromStrRadix, Int, SignedInt};\n     use core::str::from_str;\n+    use core::ops::{Shl, Shr, Not, BitXor, BitAnd, BitOr};\n     use num;\n \n     #[test]"}, {"sha": "82e91c5b7120a6af93dc5812ba68e01e8f2357cb", "filename": "src/libcoretest/num/mod.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcoretest%2Fnum%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcoretest%2Fnum%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcoretest%2Fnum%2Fmod.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -13,6 +13,7 @@ use core::fmt::Show;\n use core::num::{NumCast, cast};\n use core::ops::{Add, Sub, Mul, Div, Rem};\n use core::kinds::Copy;\n+use std::str::from_str;\n \n mod int_macros;\n mod i8;\n@@ -54,6 +55,7 @@ mod test {\n     use core::option::Option::{Some, None};\n     use core::num::Float;\n     use core::num::from_str_radix;\n+    use core::str::from_str;\n \n     #[test]\n     fn from_str_issue7588() {"}, {"sha": "2311c19d5573ae0200d571f7c922ff15a237f2a8", "filename": "src/libcoretest/num/uint_macros.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcoretest%2Fnum%2Fuint_macros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcoretest%2Fnum%2Fuint_macros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcoretest%2Fnum%2Fuint_macros.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -16,6 +16,7 @@ mod tests {\n     use core::$T_i::*;\n     use core::num::Int;\n     use num;\n+    use core::ops::{BitOr, BitAnd, BitXor, Shl, Shr, Not};\n \n     #[test]\n     fn test_overflows() {"}, {"sha": "fc02f46724fb8a5c466a968b89af00434da7ac1a", "filename": "src/libcoretest/str.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcoretest%2Fstr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcoretest%2Fstr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcoretest%2Fstr.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use std::str::from_str;\n+\n #[test]\n fn test_bool_from_str() {\n     assert_eq!(from_str::<bool>(\"true\"), Some(true));"}, {"sha": "c3bc38a6614b8ce270ccd214cfddb212d0581151", "filename": "src/libcoretest/tuple.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcoretest%2Ftuple.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibcoretest%2Ftuple.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcoretest%2Ftuple.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use std::cmp::Ordering::{Equal, Less, Greater};\n+\n #[test]\n fn test_clone() {\n     let a = (1i, \"2\");"}, {"sha": "9574549a260941790e78764cd2d1edd7f7ad0271", "filename": "src/libgraphviz/lib.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibgraphviz%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibgraphviz%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibgraphviz%2Flib.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -47,6 +47,7 @@\n //! which is cyclic.\n //!\n //! ```rust\n+//! use std::borrow::IntoCow;\n //! use graphviz as dot;\n //!\n //! type Nd = int;\n@@ -146,6 +147,7 @@\n //! entity `&sube`).\n //!\n //! ```rust\n+//! use std::borrow::IntoCow;\n //! use graphviz as dot;\n //!\n //! type Nd = uint;\n@@ -201,6 +203,7 @@\n //! Hasse-diagram for the subsets of the set `{x, y}`.\n //!\n //! ```rust\n+//! use std::borrow::IntoCow;\n //! use graphviz as dot;\n //!\n //! type Nd<'a> = (uint, &'a str);\n@@ -273,6 +276,7 @@\n \n pub use self::LabelText::*;\n \n+use std::borrow::IntoCow;\n use std::io;\n use std::str::CowString;\n use std::vec::CowVec;\n@@ -586,6 +590,7 @@ mod tests {\n     use super::{Nodes, Edges, GraphWalk, render};\n     use std::io::IoResult;\n     use std::str;\n+    use std::borrow::IntoCow;\n \n     /// each node is an index in a vector in the graph.\n     type Node = uint;"}, {"sha": "573f0926e29150035e684539f5b3bb2d995faa02", "filename": "src/libgraphviz/maybe_owned_vec.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibgraphviz%2Fmaybe_owned_vec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibgraphviz%2Fmaybe_owned_vec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibgraphviz%2Fmaybe_owned_vec.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -12,8 +12,10 @@\n \n pub use self::MaybeOwnedVector::*;\n \n+use std::cmp::{Equiv, Ordering};\n use std::default::Default;\n use std::fmt;\n+use std::iter::FromIterator;\n use std::path::BytesContainer;\n use std::slice;\n \n@@ -125,7 +127,7 @@ impl<'a,T> FromIterator<T> for MaybeOwnedVector<'a,T> {\n     fn from_iter<I:Iterator<T>>(iterator: I) -> MaybeOwnedVector<'a,T> {\n         // If we are building from scratch, might as well build the\n         // most flexible variant.\n-        Growable(FromIterator::from_iter(iterator))\n+        Growable(iterator.collect())\n     }\n }\n "}, {"sha": "c8d7b91042442884396fbb719f6bd79ddcb4084c", "filename": "src/librand/chacha.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrand%2Fchacha.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrand%2Fchacha.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrand%2Fchacha.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -206,7 +206,7 @@ impl Rand for ChaChaRng {\n \n #[cfg(test)]\n mod test {\n-    use std::prelude::*;\n+    use std::prelude::v1::*;\n \n     use core::iter::order;\n     use {Rng, SeedableRng};"}, {"sha": "da34b96505d68c4253bd7906b521cad378819567", "filename": "src/librand/distributions/exponential.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrand%2Fdistributions%2Fexponential.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrand%2Fdistributions%2Fexponential.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrand%2Fdistributions%2Fexponential.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -94,7 +94,7 @@ impl IndependentSample<f64> for Exp {\n \n #[cfg(test)]\n mod test {\n-    use std::prelude::*;\n+    use std::prelude::v1::*;\n \n     use distributions::{Sample, IndependentSample};\n     use super::Exp;\n@@ -124,7 +124,7 @@ mod test {\n mod bench {\n     extern crate test;\n \n-    use std::prelude::*;\n+    use std::prelude::v1::*;\n \n     use self::test::Bencher;\n     use std::mem::size_of;"}, {"sha": "21565224e5723603beacd4109293ddb1290b4ab5", "filename": "src/librand/distributions/gamma.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrand%2Fdistributions%2Fgamma.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrand%2Fdistributions%2Fgamma.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrand%2Fdistributions%2Fgamma.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -323,7 +323,7 @@ impl IndependentSample<f64> for StudentT {\n \n #[cfg(test)]\n mod test {\n-    use std::prelude::*;\n+    use std::prelude::v1::*;\n \n     use distributions::{Sample, IndependentSample};\n     use super::{ChiSquared, StudentT, FisherF};\n@@ -385,7 +385,7 @@ mod test {\n #[cfg(test)]\n mod bench {\n     extern crate test;\n-    use std::prelude::*;\n+    use std::prelude::v1::*;\n     use self::test::Bencher;\n     use std::mem::size_of;\n     use distributions::IndependentSample;"}, {"sha": "d48c7b9aaa4d5cf1bfc8bd1707a4ba874ba104db", "filename": "src/librand/distributions/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrand%2Fdistributions%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrand%2Fdistributions%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrand%2Fdistributions%2Fmod.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -258,7 +258,7 @@ fn ziggurat<R: Rng, P, Z>(\n \n #[cfg(test)]\n mod tests {\n-    use std::prelude::*;\n+    use std::prelude::v1::*;\n \n     use {Rng, Rand};\n     use super::{RandSample, WeightedChoice, Weighted, Sample, IndependentSample};"}, {"sha": "140f34f67f5bc87ce7d36dea2d1802912049d09a", "filename": "src/librand/distributions/normal.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrand%2Fdistributions%2Fnormal.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrand%2Fdistributions%2Fnormal.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrand%2Fdistributions%2Fnormal.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -160,7 +160,7 @@ impl IndependentSample<f64> for LogNormal {\n \n #[cfg(test)]\n mod tests {\n-    use std::prelude::*;\n+    use std::prelude::v1::*;\n \n     use distributions::{Sample, IndependentSample};\n     use super::{Normal, LogNormal};\n@@ -200,7 +200,7 @@ mod tests {\n #[cfg(test)]\n mod bench {\n     extern crate test;\n-    use std::prelude::*;\n+    use std::prelude::v1::*;\n     use self::test::Bencher;\n     use std::mem::size_of;\n     use distributions::{Sample};"}, {"sha": "f23ad6a753b6abaf86c55a10452fa7d73ab3e8d5", "filename": "src/librand/distributions/range.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrand%2Fdistributions%2Frange.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrand%2Fdistributions%2Frange.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrand%2Fdistributions%2Frange.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -164,7 +164,7 @@ float_impl! { f64 }\n #[cfg(test)]\n mod tests {\n     use std::num::Int;\n-    use std::prelude::*;\n+    use std::prelude::v1::*;\n     use distributions::{Sample, IndependentSample};\n     use super::Range;\n "}, {"sha": "d7ae91593a13606f312a221ca0a64f7c16ed0490", "filename": "src/librand/isaac.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrand%2Fisaac.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrand%2Fisaac.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrand%2Fisaac.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -487,7 +487,7 @@ impl Rand for Isaac64Rng {\n \n #[cfg(test)]\n mod test {\n-    use std::prelude::*;\n+    use std::prelude::v1::*;\n \n     use core::iter::order;\n     use {Rng, SeedableRng};"}, {"sha": "937723aa5f59134bc23315e5c96eafaa7e2e5af1", "filename": "src/librand/rand_impls.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrand%2Frand_impls.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrand%2Frand_impls.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrand%2Frand_impls.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -214,7 +214,7 @@ impl<T:Rand> Rand for Option<T> {\n \n #[cfg(test)]\n mod tests {\n-    use std::prelude::*;\n+    use std::prelude::v1::*;\n     use std::rand::{Rng, task_rng, Open01, Closed01};\n \n     struct ConstantRng(u64);"}, {"sha": "46371d427e63fba95ad0cd60f01f00d9d5102fee", "filename": "src/librand/reseeding.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrand%2Freseeding.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrand%2Freseeding.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrand%2Freseeding.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -149,7 +149,7 @@ impl Default for ReseedWithDefault {\n \n #[cfg(test)]\n mod test {\n-    use std::prelude::*;\n+    use std::prelude::v1::*;\n \n     use core::iter::order;\n     use super::{ReseedingRng, ReseedWithDefault};"}, {"sha": "1b6dcb3a8e22623df3f7b570aa41f2614b17f2ea", "filename": "src/libregex/re.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibregex%2Fre.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibregex%2Fre.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibregex%2Fre.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -11,6 +11,7 @@\n pub use self::NamesIter::*;\n pub use self::Regex::*;\n \n+use std::borrow::IntoCow;\n use std::collections::HashMap;\n use std::fmt;\n use std::str::CowString;"}, {"sha": "0cdafb73b6ef7ea0abe544a30c1ea1f2d517f416", "filename": "src/libregex/vm.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibregex%2Fvm.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibregex%2Fvm.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibregex%2Fvm.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -37,6 +37,7 @@ pub use self::MatchKind::*;\n pub use self::StepState::*;\n \n use std::cmp;\n+use std::cmp::Ordering::{mod, Less, Equal, Greater};\n use std::mem;\n use std::slice::SliceExt;\n use compile::{"}, {"sha": "602de8cd90df56894f5521e5292911465032b4e3", "filename": "src/librustc/lint/builtin.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc%2Flint%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc%2Flint%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Flint%2Fbuiltin.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -36,10 +36,11 @@ use util::ppaux::{ty_to_string};\n use util::nodemap::{FnvHashMap, NodeSet};\n use lint::{Context, LintPass, LintArray};\n \n-use std::{cmp, slice};\n use std::collections::hash_map::Entry::{Occupied, Vacant};\n use std::num::SignedInt;\n+use std::{cmp, slice};\n use std::{i8, i16, i32, i64, u8, u16, u32, u64, f32, f64};\n+\n use syntax::{abi, ast, ast_map};\n use syntax::ast_util::is_shift_binop;\n use syntax::attr::{mod, AttrMetaMethods};"}, {"sha": "567c3f5e752b1378377c303d9ef076d077de86c5", "filename": "src/librustc/metadata/decoder.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc%2Fmetadata%2Fdecoder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc%2Fmetadata%2Fdecoder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmetadata%2Fdecoder.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -32,13 +32,15 @@ use middle::ty::{ImplContainer, TraitContainer};\n use middle::ty::{mod, Ty};\n use middle::astencode::vtable_decoder_helpers;\n \n+use std::collections::HashMap;\n use std::hash::Hash;\n use std::hash;\n use std::io::extensions::u64_from_be_bytes;\n use std::io;\n-use std::collections::hash_map::HashMap;\n+use std::num::FromPrimitive;\n use std::rc::Rc;\n use std::str;\n+\n use rbml::reader;\n use rbml;\n use serialize::Decodable;"}, {"sha": "e0a69f58d379e53e129a8dc920fe441954b0fcf7", "filename": "src/librustc/metadata/tydecode.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc%2Fmetadata%2Ftydecode.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc%2Fmetadata%2Ftydecode.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmetadata%2Ftydecode.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -25,7 +25,6 @@ use middle::ty::{mod, AsPredicate, Ty};\n \n use std::rc::Rc;\n use std::str;\n-use std::string::String;\n use syntax::abi;\n use syntax::ast;\n use syntax::parse::token;"}, {"sha": "06fef66c1e0033609f053b0e8ca3b6190f3c2c9f", "filename": "src/librustc/middle/cfg/graphviz.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc%2Fmiddle%2Fcfg%2Fgraphviz.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc%2Fmiddle%2Fcfg%2Fgraphviz.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fcfg%2Fgraphviz.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -11,7 +11,9 @@\n /// This module provides linkage between rustc::middle::graph and\n /// libgraphviz traits.\n \n-/// For clarity, rename the graphviz crate locally to dot.\n+use std::borrow::IntoCow;\n+\n+// For clarity, rename the graphviz crate locally to dot.\n use graphviz as dot;\n \n use syntax::ast;"}, {"sha": "234f830bc662145033f9623ebc49ff9e1ce91c8f", "filename": "src/librustc/middle/check_match.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc%2Fmiddle%2Fcheck_match.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc%2Fmiddle%2Fcheck_match.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fcheck_match.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -24,8 +24,7 @@ use middle::pat_util::*;\n use middle::ty::*;\n use middle::ty;\n use std::fmt;\n-use std::iter::AdditiveIterator;\n-use std::iter::range_inclusive;\n+use std::iter::{range_inclusive, AdditiveIterator, FromIterator};\n use std::num::Float;\n use std::slice;\n use syntax::ast::{mod, DUMMY_NODE_ID, NodeId, Pat};"}, {"sha": "9fc5cb03353138b46ef8dba1d5717fd4b6532da5", "filename": "src/librustc/middle/const_eval.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc%2Fmiddle%2Fconst_eval.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc%2Fmiddle%2Fconst_eval.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fconst_eval.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -27,8 +27,8 @@ use syntax::ptr::P;\n use syntax::visit::{mod, Visitor};\n use syntax::{ast_map, ast_util, codemap};\n \n-use std::rc::Rc;\n use std::collections::hash_map::Entry::Vacant;\n+use std::rc::Rc;\n \n //\n // This pass classifies expressions by their constant-ness."}, {"sha": "99c6f732c36456d86d35c011f425f81c2f4f171b", "filename": "src/librustc/middle/infer/region_inference/mod.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc%2Fmiddle%2Finfer%2Fregion_inference%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc%2Fmiddle%2Finfer%2Fregion_inference%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Finfer%2Fregion_inference%2Fmod.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -33,6 +33,7 @@ use util::nodemap::{FnvHashMap, FnvHashSet};\n use util::ppaux::Repr;\n \n use std::cell::{Cell, RefCell};\n+use std::cmp::Ordering::{mod, Less, Greater, Equal};\n use std::u32;\n use syntax::ast;\n "}, {"sha": "6d2db056894315c1392ff6b7ad05c09aef4b0bf8", "filename": "src/librustc/middle/lang_items.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc%2Fmiddle%2Flang_items.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc%2Fmiddle%2Flang_items.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Flang_items.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -36,6 +36,7 @@ use syntax::visit::Visitor;\n use syntax::visit;\n \n use std::iter::Enumerate;\n+use std::num::FromPrimitive;\n use std::slice;\n \n // The actual lang items defined come at the end of this file in one handy table."}, {"sha": "02ca72fffa12212f304d79e24202a90ead30418b", "filename": "src/librustc/middle/ty.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc%2Fmiddle%2Fty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc%2Fmiddle%2Fty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fty.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -70,7 +70,7 @@ use util::nodemap::{FnvHashMap, FnvHashSet};\n use arena::TypedArena;\n use std::borrow::BorrowFrom;\n use std::cell::{Cell, RefCell};\n-use std::cmp;\n+use std::cmp::{mod, Ordering};\n use std::fmt::{mod, Show};\n use std::hash::{Hash, sip, Writer};\n use std::mem;"}, {"sha": "7ccb68f2a75f69e1f1ae838f45cb73b4e271b1c7", "filename": "src/librustc/session/config.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc%2Fsession%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc%2Fsession%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fsession%2Fconfig.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -394,6 +394,7 @@ macro_rules! cgoptions {\n \n     mod cgsetters {\n         use super::{CodegenOptions, Passes, SomePasses, AllPasses};\n+        use std::str::from_str;\n \n         $(\n             pub fn $opt(cg: &mut CodegenOptions, v: Option<&str>) -> bool {"}, {"sha": "8d3aa397f306163063c5aeee492f0f05b2297eba", "filename": "src/librustc_borrowck/borrowck/gather_loans/move_error.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc_borrowck%2Fborrowck%2Fgather_loans%2Fmove_error.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc_borrowck%2Fborrowck%2Fgather_loans%2Fmove_error.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_borrowck%2Fborrowck%2Fgather_loans%2Fmove_error.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -33,7 +33,7 @@ impl<'tcx> MoveErrorCollector<'tcx> {\n     }\n \n     pub fn report_potential_errors<'a>(&self, bccx: &BorrowckCtxt<'a, 'tcx>) {\n-        report_move_errors(bccx, self.errors.borrow().deref())\n+        report_move_errors(bccx, &*self.errors.borrow())\n     }\n }\n "}, {"sha": "ac6b962d6470448e43958c0eb41109df4d5732c3", "filename": "src/librustc_borrowck/graphviz.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc_borrowck%2Fgraphviz.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc_borrowck%2Fgraphviz.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_borrowck%2Fgraphviz.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -24,6 +24,7 @@ use rustc::middle::cfg::{CFGIndex};\n use rustc::middle::dataflow::{DataFlowOperator, DataFlowContext, EntryOrExit};\n use rustc::middle::dataflow;\n use std::rc::Rc;\n+use std::borrow::IntoCow;\n \n #[deriving(Show, Copy)]\n pub enum Variant {"}, {"sha": "07a4bec4bf89808ee7662b26595082c615f6ecb8", "filename": "src/librustc_driver/lib.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc_driver%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc_driver%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_driver%2Flib.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -54,6 +54,8 @@ use rustc::metadata;\n use rustc::DIAGNOSTICS;\n \n use std::any::AnyRefExt;\n+use std::cmp::Ordering::Equal;\n+use std::comm::channel;\n use std::io;\n use std::iter::repeat;\n use std::os;"}, {"sha": "53992d4567a34915148e2c9e87957e05cbc81517", "filename": "src/librustc_llvm/archive_ro.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc_llvm%2Farchive_ro.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc_llvm%2Farchive_ro.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_llvm%2Farchive_ro.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -13,8 +13,9 @@\n use libc;\n use ArchiveRef;\n \n-use std::raw;\n+use std::c_str::ToCStr;\n use std::mem;\n+use std::raw;\n \n pub struct ArchiveRO {\n     ptr: ArchiveRef,"}, {"sha": "b3d0d30726c5df9c09d9554406cf8c31ba5dcebb", "filename": "src/librustc_resolve/check_unused.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc_resolve%2Fcheck_unused.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc_resolve%2Fcheck_unused.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Fcheck_unused.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -17,6 +17,8 @@\n // `use` directives.\n //\n \n+use std::ops::{Deref, DerefMut};\n+\n use Resolver;\n use Namespace::{TypeNS, ValueNS};\n "}, {"sha": "c6618f10e0e792d389d13542d6a47cb1be2341c6", "filename": "src/librustc_resolve/record_exports.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc_resolve%2Frecord_exports.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc_resolve%2Frecord_exports.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Frecord_exports.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -25,6 +25,7 @@ use rustc::middle::def::Export;\n use syntax::ast;\n use syntax::parse::token;\n \n+use std::ops::{Deref, DerefMut};\n use std::rc::Rc;\n \n struct ExportRecorder<'a, 'b:'a, 'tcx:'b> {"}, {"sha": "7cf4bafe032e0728d0cde8ba8ebe8415e49faa29", "filename": "src/librustc_trans/back/lto.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc_trans%2Fback%2Flto.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc_trans%2Fback%2Flto.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Fback%2Flto.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -20,6 +20,7 @@ use rustc::util::common::time;\n use libc;\n use flate;\n \n+use std::c_str::ToCStr;\n use std::iter;\n use std::mem;\n use std::num::Int;"}, {"sha": "3a40430beae65fe866d1e9d2ed47e53d4518223c", "filename": "src/librustc_trans/back/write.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc_trans%2Fback%2Fwrite.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc_trans%2Fback%2Fwrite.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Fback%2Fwrite.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -23,6 +23,7 @@ use syntax::diagnostic;\n use syntax::diagnostic::{Emitter, Handler, Level, mk_handler};\n \n use std::c_str::{ToCStr, CString};\n+use std::comm::channel;\n use std::io::Command;\n use std::io::fs;\n use std::iter::Unfold;"}, {"sha": "e7d4128eb4e489253f3ad234cd8f66e47203e188", "filename": "src/librustc_trans/trans/builder.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc_trans%2Ftrans%2Fbuilder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc_trans%2Ftrans%2Fbuilder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Ftrans%2Fbuilder.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -20,7 +20,7 @@ use trans::machine::llalign_of_pref;\n use trans::type_::Type;\n use util::nodemap::FnvHashMap;\n use libc::{c_uint, c_char};\n-use std::string::String;\n+use std::c_str::ToCStr;\n use syntax::codemap::Span;\n \n pub struct Builder<'a, 'tcx: 'a> {"}, {"sha": "f94e1af314968075bdb2b85d4f062be6d48f6728", "filename": "src/librustc_trans/trans/foreign.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc_trans%2Ftrans%2Fforeign.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustc_trans%2Ftrans%2Fforeign.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Ftrans%2Fforeign.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -25,6 +25,7 @@ use trans::type_of;\n use middle::ty::{mod, Ty};\n use middle::subst::{Subst, Substs};\n use std::cmp;\n+use std::c_str::ToCStr;\n use libc::c_uint;\n use syntax::abi::{Cdecl, Aapcs, C, Win64, Abi};\n use syntax::abi::{RustIntrinsic, Rust, RustCall, Stdcall, Fastcall, System};"}, {"sha": "0f0dbf6a24dffc7de58cbf2bdeb6a4fc18a8870c", "filename": "src/librustdoc/flock.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustdoc%2Fflock.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustdoc%2Fflock.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fflock.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -18,10 +18,10 @@\n \n pub use self::imp::Lock;\n \n-\n #[cfg(unix)]\n mod imp {\n     use libc;\n+    use std::c_str::ToCStr;\n \n     #[cfg(target_os = \"linux\")]\n     mod os {"}, {"sha": "aed8cdfb8b2c5dd33213773be4eb9b17f1baac0e", "filename": "src/librustdoc/html/markdown.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -29,11 +29,12 @@\n \n use libc;\n use std::ascii::AsciiExt;\n+use std::c_str::ToCStr;\n use std::cell::{RefCell, Cell};\n+use std::collections::HashMap;\n use std::fmt;\n use std::slice;\n use std::str;\n-use std::collections::HashMap;\n \n use html::toc::TocBuilder;\n use html::highlight;"}, {"sha": "ebdd43b1775bdcd46e4a802d3380aca42d11bb03", "filename": "src/librustdoc/html/render.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustdoc%2Fhtml%2Frender.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustdoc%2Fhtml%2Frender.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -35,6 +35,7 @@\n pub use self::ExternalLocation::*;\n \n use std::cell::RefCell;\n+use std::cmp::Ordering::{mod, Less, Greater, Equal};\n use std::collections::hash_map::Entry::{Occupied, Vacant};\n use std::collections::{HashMap, HashSet};\n use std::default::Default;"}, {"sha": "058a7acd4550b7874be6c7090df920d72d1ac12c", "filename": "src/librustdoc/stability_summary.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustdoc%2Fstability_summary.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustdoc%2Fstability_summary.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fstability_summary.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -13,8 +13,9 @@\n //! hierarchy, with item counts for every stability level per module. A parent\n //! module's count includes its children's.\n \n-use std::ops::Add;\n+use std::cmp::Ordering;\n use std::num::Zero;\n+use std::ops::Add;\n \n use syntax::attr::{Deprecated, Experimental, Unstable, Stable, Frozen, Locked};\n use syntax::ast::Public;"}, {"sha": "a9f30ee5ef9ed0d2336a97d2cb1f772f3d7f1776", "filename": "src/librustdoc/test.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustdoc%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibrustdoc%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Ftest.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -9,14 +9,14 @@\n // except according to those terms.\n \n use std::cell::RefCell;\n+use std::comm::channel;\n use std::dynamic_lib::DynamicLibrary;\n use std::io::{Command, TempDir};\n use std::io;\n use std::os;\n use std::str;\n-use std::string::String;\n-use std::thunk::Thunk;\n use std::thread::Thread;\n+use std::thunk::Thunk;\n \n use std::collections::{HashSet, HashMap};\n use testing;"}, {"sha": "db01c091dc01856fe3957a2901d8f9e02e07881c", "filename": "src/libstd/ascii.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fascii.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fascii.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fascii.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -315,8 +315,8 @@ static ASCII_UPPERCASE_MAP: [u8, ..256] = [\n \n #[cfg(test)]\n mod tests {\n+    use prelude::v1::*;\n     use super::*;\n-    use prelude::*;\n     use char::from_u32;\n \n     #[test]"}, {"sha": "1826ad3dc31548c328ff93aac45141c4b09030f8", "filename": "src/libstd/bitflags.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fbitflags.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fbitflags.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fbitflags.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -205,31 +205,31 @@ macro_rules! bitflags {\n             }\n         }\n \n-        impl BitOr<$BitFlags, $BitFlags> for $BitFlags {\n+        impl ::std::ops::BitOr<$BitFlags, $BitFlags> for $BitFlags {\n             /// Returns the union of the two sets of flags.\n             #[inline]\n             fn bitor(self, other: $BitFlags) -> $BitFlags {\n                 $BitFlags { bits: self.bits | other.bits }\n             }\n         }\n \n-        impl BitXor<$BitFlags, $BitFlags> for $BitFlags {\n+        impl ::std::ops::BitXor<$BitFlags, $BitFlags> for $BitFlags {\n             /// Returns the left flags, but with all the right flags toggled.\n             #[inline]\n             fn bitxor(self, other: $BitFlags) -> $BitFlags {\n                 $BitFlags { bits: self.bits ^ other.bits }\n             }\n         }\n \n-        impl BitAnd<$BitFlags, $BitFlags> for $BitFlags {\n+        impl ::std::ops::BitAnd<$BitFlags, $BitFlags> for $BitFlags {\n             /// Returns the intersection between the two sets of flags.\n             #[inline]\n             fn bitand(self, other: $BitFlags) -> $BitFlags {\n                 $BitFlags { bits: self.bits & other.bits }\n             }\n         }\n \n-        impl Sub<$BitFlags, $BitFlags> for $BitFlags {\n+        impl ::std::ops::Sub<$BitFlags, $BitFlags> for $BitFlags {\n             /// Returns the set difference of the two sets of flags.\n             #[inline]\n             fn sub(self, other: $BitFlags) -> $BitFlags {\n@@ -239,7 +239,7 @@ macro_rules! bitflags {\n \n         // NOTE(stage0): Remove impl after a snapshot\n         #[cfg(stage0)]\n-        impl Not<$BitFlags> for $BitFlags {\n+        impl ::std::ops::Not<$BitFlags> for $BitFlags {\n             /// Returns the complement of this set of flags.\n             #[inline]\n             fn not(&self) -> $BitFlags {\n@@ -248,7 +248,7 @@ macro_rules! bitflags {\n         }\n \n         #[cfg(not(stage0))]  // NOTE(stage0): Remove cfg after a snapshot\n-        impl Not<$BitFlags> for $BitFlags {\n+        impl ::std::ops::Not<$BitFlags> for $BitFlags {\n             /// Returns the complement of this set of flags.\n             #[inline]\n             fn not(self) -> $BitFlags {"}, {"sha": "fa0d8fa9bd5a1e5aa299cc5821fa8b32bb062b8f", "filename": "src/libstd/c_str.rs", "status": "modified", "additions": 14, "deletions": 2, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fc_str.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fc_str.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fc_str.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -45,6 +45,8 @@\n //! ```rust\n //! extern crate libc;\n //!\n+//! use std::c_str::ToCStr;\n+//!\n //! extern {\n //!     fn puts(s: *const libc::c_char);\n //! }\n@@ -70,6 +72,7 @@\n use core::prelude::*;\n use libc;\n \n+use cmp::Ordering;\n use fmt;\n use hash;\n use mem;\n@@ -155,6 +158,8 @@ impl CString {\n     /// one).\n     ///\n     /// ```rust\n+    /// use std::c_str::ToCStr;\n+    ///\n     /// let foo = \"some string\";\n     ///\n     /// // right\n@@ -170,6 +175,8 @@ impl CString {\n     /// ```rust\n     /// extern crate libc;\n     ///\n+    /// use std::c_str::ToCStr;\n+    ///\n     /// fn main() {\n     ///     let c_str = \"foo bar\".to_c_str();\n     ///     unsafe {\n@@ -189,6 +196,8 @@ impl CString {\n     /// one).\n     ///\n     /// ```rust\n+    /// use std::c_str::ToCStr;\n+    ///\n     /// let foo = \"some string\";\n     ///\n     /// // right\n@@ -309,6 +318,8 @@ pub trait ToCStr for Sized? {\n     /// ```rust\n     /// extern crate libc;\n     ///\n+    /// use std::c_str::ToCStr;\n+    ///\n     /// fn main() {\n     ///     let s = \"PATH\".with_c_str(|path| unsafe {\n     ///         libc::getenv(path)\n@@ -537,7 +548,7 @@ pub unsafe fn from_c_multistring<F>(buf: *const libc::c_char,\n #[cfg(test)]\n mod tests {\n     use super::*;\n-    use prelude::*;\n+    use prelude::v1::*;\n     use ptr;\n     use thread::Thread;\n     use libc;\n@@ -729,9 +740,10 @@ mod tests {\n mod bench {\n     extern crate test;\n \n+    use prelude::v1::*;\n     use self::test::Bencher;\n     use libc;\n-    use prelude::*;\n+    use c_str::ToCStr;\n \n     #[inline]\n     fn check(s: &str, c_str: *const libc::c_char) {"}, {"sha": "d0293aa4a1c979023eb417db73fcb07e9cc6fc18", "filename": "src/libstd/c_vec.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fc_vec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fc_vec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fc_vec.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -172,7 +172,7 @@ impl<T> AsSlice<T> for CVec<T> {\n \n #[cfg(test)]\n mod tests {\n-    use prelude::*;\n+    use prelude::v1::*;\n \n     use super::CVec;\n     use libc;"}, {"sha": "28689767cb0e3524323238c3f7fdc10893b769ab", "filename": "src/libstd/collections/hash/bench.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fcollections%2Fhash%2Fbench.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fcollections%2Fhash%2Fbench.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fcollections%2Fhash%2Fbench.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -11,7 +11,7 @@\n #![cfg(test)]\n \n extern crate test;\n-use prelude::*;\n+use prelude::v1::*;\n \n use self::test::Bencher;\n use iter::{range_inclusive};"}, {"sha": "e7918d605cbaef9d2cae581f0a1c036c5f64b683", "filename": "src/libstd/collections/hash/map.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fcollections%2Fhash%2Fmap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fcollections%2Fhash%2Fmap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fcollections%2Fhash%2Fmap.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -87,7 +87,7 @@ impl DefaultResizePolicy {\n \n #[test]\n fn test_resize_policy() {\n-    use prelude::*;\n+    use prelude::v1::*;\n     let rp = DefaultResizePolicy;\n     for n in range(0u, 1000) {\n         assert!(rp.min_capacity(rp.usable_capacity(n)) <= n);\n@@ -1473,8 +1473,9 @@ impl<K: Eq + Hash<S>, V, S, H: Hasher<S> + Default> Extend<(K, V)> for HashMap<K\n \n #[cfg(test)]\n mod test_map {\n-    use prelude::*;\n+    use prelude::v1::*;\n \n+    use cmp::Equiv;\n     use super::HashMap;\n     use super::Entry::{Occupied, Vacant};\n     use hash;"}, {"sha": "e00116344c84889dd8fedfffc59152bf5b4e50fc", "filename": "src/libstd/collections/hash/set.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fcollections%2Fhash%2Fset.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fcollections%2Fhash%2Fset.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fcollections%2Fhash%2Fset.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -844,7 +844,7 @@ impl<'a, T, S, H> Iterator<&'a T> for Union<'a, T, H>\n \n #[cfg(test)]\n mod test_set {\n-    use prelude::*;\n+    use prelude::v1::*;\n \n     use super::HashSet;\n "}, {"sha": "de7f3d00478bb46fbc614225ed60156c1a0320dc", "filename": "src/libstd/comm/mod.rs", "status": "modified", "additions": 381, "deletions": 299, "changes": 680, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fcomm%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fcomm%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fcomm%2Fmod.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -60,6 +60,7 @@\n //!\n //! ```\n //! use std::thread::Thread;\n+//! use std::comm::channel;\n //!\n //! // Create a simple streaming channel\n //! let (tx, rx) = channel();\n@@ -73,6 +74,7 @@\n //!\n //! ```\n //! use std::thread::Thread;\n+//! use std::comm::channel;\n //!\n //! // Create a shared channel that can be sent along from many threads\n //! // where tx is the sending half (tx for transmission), and rx is the receiving\n@@ -94,6 +96,8 @@\n //! Propagating panics:\n //!\n //! ```should_fail\n+//! use std::comm::channel;\n+//!\n //! // The call to recv() will panic!() because the channel has already hung\n //! // up (or been deallocated)\n //! let (tx, rx) = channel::<int>();\n@@ -105,6 +109,7 @@\n //!\n //! ```\n //! use std::thread::Thread;\n+//! use std::comm::sync_channel;\n //!\n //! let (tx, rx) = sync_channel::<int>(0);\n //! Thread::spawn(move|| {\n@@ -120,6 +125,7 @@\n //! after 10 seconds no matter what:\n //!\n //! ```no_run\n+//! use std::comm::channel;\n //! use std::io::timer::Timer;\n //! use std::time::Duration;\n //!\n@@ -143,6 +149,7 @@\n //! has been inactive for 5 seconds:\n //!\n //! ```no_run\n+//! use std::comm::channel;\n //! use std::io::timer::Timer;\n //! use std::time::Duration;\n //!\n@@ -329,21 +336,6 @@ use self::select::StartResult;\n use self::select::StartResult::*;\n use self::blocking::SignalToken;\n \n-macro_rules! test {\n-    { fn $name:ident() $b:block $(#[$a:meta])*} => (\n-        mod $name {\n-            #![allow(unused_imports)]\n-\n-            use super::*;\n-            use comm::*;\n-            use thread::Thread;\n-            use prelude::*;\n-\n-            $(#[$a])* #[test] fn f() { $b }\n-        }\n-    )\n-}\n-\n mod blocking;\n mod oneshot;\n mod select;\n@@ -458,6 +450,7 @@ impl<T> UnsafeFlavor<T> for Receiver<T> {\n /// # Example\n ///\n /// ```\n+/// use std::comm::channel;\n /// use std::thread::Thread;\n ///\n /// // tx is is the sending half (tx for transmission), and rx is the receiving\n@@ -499,6 +492,7 @@ pub fn channel<T: Send>() -> (Sender<T>, Receiver<T>) {\n /// # Example\n ///\n /// ```\n+/// use std::comm::sync_channel;\n /// use std::thread::Thread;\n ///\n /// let (tx, rx) = sync_channel(1);\n@@ -580,6 +574,8 @@ impl<T: Send> Sender<T> {\n     /// # Example\n     ///\n     /// ```\n+    /// use std::comm::channel;\n+    ///\n     /// let (tx, rx) = channel();\n     ///\n     /// // This send is always successful\n@@ -1046,9 +1042,12 @@ unsafe impl<T> kinds::Sync for RacyCell<T> { } // Oh dear\n \n #[cfg(test)]\n mod test {\n-    use super::*;\n-    use prelude::*;\n+    use prelude::v1::*;\n+\n     use os;\n+    use super::*;\n+    use thread::Thread;\n+    use str::from_str;\n \n     pub fn stress_factor() -> uint {\n         match os::getenv(\"RUST_TEST_STRESS\") {\n@@ -1057,221 +1056,238 @@ mod test {\n         }\n     }\n \n-    test! { fn smoke() {\n+    #[test]\n+    fn smoke() {\n         let (tx, rx) = channel::<int>();\n         tx.send(1);\n         assert_eq!(rx.recv(), 1);\n-    } }\n+    }\n \n-    test! { fn drop_full() {\n+    #[test]\n+    fn drop_full() {\n         let (tx, _rx) = channel();\n         tx.send(box 1i);\n-    } }\n+    }\n \n-    test! { fn drop_full_shared() {\n+    #[test]\n+    fn drop_full_shared() {\n         let (tx, _rx) = channel();\n         drop(tx.clone());\n         drop(tx.clone());\n         tx.send(box 1i);\n-    } }\n+    }\n \n-    test! { fn smoke_shared() {\n+    #[test]\n+    fn smoke_shared() {\n         let (tx, rx) = channel::<int>();\n         tx.send(1);\n         assert_eq!(rx.recv(), 1);\n         let tx = tx.clone();\n         tx.send(1);\n         assert_eq!(rx.recv(), 1);\n-    } }\n+    }\n \n-    test! { fn smoke_threads() {\n+    #[test]\n+    fn smoke_threads() {\n         let (tx, rx) = channel::<int>();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             tx.send(1);\n         });\n         assert_eq!(rx.recv(), 1);\n-    } }\n+    }\n \n-    test! { fn smoke_port_gone() {\n+    #[test]\n+    #[should_fail]\n+    fn smoke_port_gone() {\n         let (tx, rx) = channel::<int>();\n         drop(rx);\n         tx.send(1);\n-    } #[should_fail] }\n+    }\n \n-    test! { fn smoke_shared_port_gone() {\n+    #[test]\n+    #[should_fail]\n+    fn smoke_shared_port_gone() {\n         let (tx, rx) = channel::<int>();\n         drop(rx);\n         tx.send(1);\n-    } #[should_fail] }\n+    }\n \n-    test! { fn smoke_shared_port_gone2() {\n+    #[test]\n+    #[should_fail]\n+    fn smoke_shared_port_gone2() {\n         let (tx, rx) = channel::<int>();\n         drop(rx);\n         let tx2 = tx.clone();\n         drop(tx);\n         tx2.send(1);\n-    } #[should_fail] }\n+    }\n \n-    test! { fn port_gone_concurrent() {\n+    #[test]\n+    #[should_fail]\n+    fn port_gone_concurrent() {\n         let (tx, rx) = channel::<int>();\n-        spawn(move|| {\n+        Thread::spawn(move|| {\n             rx.recv();\n-        });\n+        }).detach();\n         loop { tx.send(1) }\n-    } #[should_fail] }\n+    }\n \n-    test! { fn port_gone_concurrent_shared() {\n+    #[test]\n+    #[should_fail]\n+    fn port_gone_concurrent_shared() {\n         let (tx, rx) = channel::<int>();\n         let tx2 = tx.clone();\n-        spawn(move|| {\n+        Thread::spawn(move|| {\n             rx.recv();\n-        });\n+        }).detach();\n         loop {\n             tx.send(1);\n             tx2.send(1);\n         }\n-    } #[should_fail] }\n+    }\n \n-    test! { fn smoke_chan_gone() {\n+    #[test]\n+    #[should_fail]\n+    fn smoke_chan_gone() {\n         let (tx, rx) = channel::<int>();\n         drop(tx);\n         rx.recv();\n-    } #[should_fail] }\n+    }\n \n-    test! { fn smoke_chan_gone_shared() {\n+    #[test]\n+    #[should_fail]\n+    fn smoke_chan_gone_shared() {\n         let (tx, rx) = channel::<()>();\n         let tx2 = tx.clone();\n         drop(tx);\n         drop(tx2);\n         rx.recv();\n-    } #[should_fail] }\n+    }\n \n-    test! { fn chan_gone_concurrent() {\n+    #[test]\n+    #[should_fail]\n+    fn chan_gone_concurrent() {\n         let (tx, rx) = channel::<int>();\n-        spawn(move|| {\n+        Thread::spawn(move|| {\n             tx.send(1);\n             tx.send(1);\n-        });\n+        }).detach();\n         loop { rx.recv(); }\n-    } #[should_fail] }\n+    }\n \n-    test! { fn stress() {\n+    #[test]\n+    fn stress() {\n         let (tx, rx) = channel::<int>();\n-        spawn(move|| {\n+        let t = Thread::spawn(move|| {\n             for _ in range(0u, 10000) { tx.send(1i); }\n         });\n         for _ in range(0u, 10000) {\n             assert_eq!(rx.recv(), 1);\n         }\n-    } }\n+        t.join().ok().unwrap();\n+    }\n \n-    test! { fn stress_shared() {\n+    #[test]\n+    fn stress_shared() {\n         static AMT: uint = 10000;\n         static NTHREADS: uint = 8;\n         let (tx, rx) = channel::<int>();\n-        let (dtx, drx) = channel::<()>();\n \n-        spawn(move|| {\n+        let t = Thread::spawn(move|| {\n             for _ in range(0, AMT * NTHREADS) {\n                 assert_eq!(rx.recv(), 1);\n             }\n             match rx.try_recv() {\n                 Ok(..) => panic!(),\n                 _ => {}\n             }\n-            dtx.send(());\n         });\n \n         for _ in range(0, NTHREADS) {\n             let tx = tx.clone();\n-            spawn(move|| {\n+            Thread::spawn(move|| {\n                 for _ in range(0, AMT) { tx.send(1); }\n-            });\n+            }).detach();\n         }\n         drop(tx);\n-        drx.recv();\n-    } }\n+        t.join().ok().unwrap();\n+    }\n \n     #[test]\n     fn send_from_outside_runtime() {\n         let (tx1, rx1) = channel::<()>();\n         let (tx2, rx2) = channel::<int>();\n-        let (tx3, rx3) = channel::<()>();\n-        let tx4 = tx3.clone();\n-        spawn(move|| {\n+        let t1 = Thread::spawn(move|| {\n             tx1.send(());\n             for _ in range(0i, 40) {\n                 assert_eq!(rx2.recv(), 1);\n             }\n-            tx3.send(());\n         });\n         rx1.recv();\n-        spawn(move|| {\n+        let t2 = Thread::spawn(move|| {\n             for _ in range(0i, 40) {\n                 tx2.send(1);\n             }\n-            tx4.send(());\n         });\n-        rx3.recv();\n-        rx3.recv();\n+        t1.join().ok().unwrap();\n+        t2.join().ok().unwrap();\n     }\n \n     #[test]\n     fn recv_from_outside_runtime() {\n         let (tx, rx) = channel::<int>();\n-        let (dtx, drx) = channel();\n-        spawn(move|| {\n+        let t = Thread::spawn(move|| {\n             for _ in range(0i, 40) {\n                 assert_eq!(rx.recv(), 1);\n             }\n-            dtx.send(());\n         });\n         for _ in range(0u, 40) {\n             tx.send(1);\n         }\n-        drx.recv();\n+        t.join().ok().unwrap();\n     }\n \n     #[test]\n     fn no_runtime() {\n         let (tx1, rx1) = channel::<int>();\n         let (tx2, rx2) = channel::<int>();\n-        let (tx3, rx3) = channel::<()>();\n-        let tx4 = tx3.clone();\n-        spawn(move|| {\n+        let t1 = Thread::spawn(move|| {\n             assert_eq!(rx1.recv(), 1);\n             tx2.send(2);\n-            tx4.send(());\n         });\n-        spawn(move|| {\n+        let t2 = Thread::spawn(move|| {\n             tx1.send(1);\n             assert_eq!(rx2.recv(), 2);\n-            tx3.send(());\n         });\n-        rx3.recv();\n-        rx3.recv();\n+        t1.join().ok().unwrap();\n+        t2.join().ok().unwrap();\n     }\n \n-    test! { fn oneshot_single_thread_close_port_first() {\n+    #[test]\n+    fn oneshot_single_thread_close_port_first() {\n         // Simple test of closing without sending\n         let (_tx, rx) = channel::<int>();\n         drop(rx);\n-    } }\n+    }\n \n-    test! { fn oneshot_single_thread_close_chan_first() {\n+    #[test]\n+    fn oneshot_single_thread_close_chan_first() {\n         // Simple test of closing without sending\n         let (tx, _rx) = channel::<int>();\n         drop(tx);\n-    } }\n+    }\n \n-    test! { fn oneshot_single_thread_send_port_close() {\n+    #[test]\n+    #[should_fail]\n+    fn oneshot_single_thread_send_port_close() {\n         // Testing that the sender cleans up the payload if receiver is closed\n         let (tx, rx) = channel::<Box<int>>();\n         drop(rx);\n         tx.send(box 0);\n-    } #[should_fail] }\n+    }\n \n-    test! { fn oneshot_single_thread_recv_chan_close() {\n+    #[test]\n+    fn oneshot_single_thread_recv_chan_close() {\n         // Receiving on a closed chan will panic\n         let res = Thread::spawn(move|| {\n             let (tx, rx) = channel::<int>();\n@@ -1280,129 +1296,142 @@ mod test {\n         }).join();\n         // What is our res?\n         assert!(res.is_err());\n-    } }\n+    }\n \n-    test! { fn oneshot_single_thread_send_then_recv() {\n+    #[test]\n+    fn oneshot_single_thread_send_then_recv() {\n         let (tx, rx) = channel::<Box<int>>();\n         tx.send(box 10);\n         assert!(rx.recv() == box 10);\n-    } }\n+    }\n \n-    test! { fn oneshot_single_thread_try_send_open() {\n+    #[test]\n+    fn oneshot_single_thread_try_send_open() {\n         let (tx, rx) = channel::<int>();\n         assert!(tx.send_opt(10).is_ok());\n         assert!(rx.recv() == 10);\n-    } }\n+    }\n \n-    test! { fn oneshot_single_thread_try_send_closed() {\n+    #[test]\n+    fn oneshot_single_thread_try_send_closed() {\n         let (tx, rx) = channel::<int>();\n         drop(rx);\n         assert!(tx.send_opt(10).is_err());\n-    } }\n+    }\n \n-    test! { fn oneshot_single_thread_try_recv_open() {\n+    #[test]\n+    fn oneshot_single_thread_try_recv_open() {\n         let (tx, rx) = channel::<int>();\n         tx.send(10);\n         assert!(rx.recv_opt() == Ok(10));\n-    } }\n+    }\n \n-    test! { fn oneshot_single_thread_try_recv_closed() {\n+    #[test]\n+    fn oneshot_single_thread_try_recv_closed() {\n         let (tx, rx) = channel::<int>();\n         drop(tx);\n         assert!(rx.recv_opt() == Err(()));\n-    } }\n+    }\n \n-    test! { fn oneshot_single_thread_peek_data() {\n+    #[test]\n+    fn oneshot_single_thread_peek_data() {\n         let (tx, rx) = channel::<int>();\n         assert_eq!(rx.try_recv(), Err(Empty));\n         tx.send(10);\n         assert_eq!(rx.try_recv(), Ok(10));\n-    } }\n+    }\n \n-    test! { fn oneshot_single_thread_peek_close() {\n+    #[test]\n+    fn oneshot_single_thread_peek_close() {\n         let (tx, rx) = channel::<int>();\n         drop(tx);\n         assert_eq!(rx.try_recv(), Err(Disconnected));\n         assert_eq!(rx.try_recv(), Err(Disconnected));\n-    } }\n+    }\n \n-    test! { fn oneshot_single_thread_peek_open() {\n+    #[test]\n+    fn oneshot_single_thread_peek_open() {\n         let (_tx, rx) = channel::<int>();\n         assert_eq!(rx.try_recv(), Err(Empty));\n-    } }\n+    }\n \n-    test! { fn oneshot_multi_task_recv_then_send() {\n+    #[test]\n+    fn oneshot_multi_task_recv_then_send() {\n         let (tx, rx) = channel::<Box<int>>();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             assert!(rx.recv() == box 10);\n         });\n \n         tx.send(box 10);\n-    } }\n+    }\n \n-    test! { fn oneshot_multi_task_recv_then_close() {\n+    #[test]\n+    fn oneshot_multi_task_recv_then_close() {\n         let (tx, rx) = channel::<Box<int>>();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             drop(tx);\n         });\n         let res = Thread::spawn(move|| {\n             assert!(rx.recv() == box 10);\n         }).join();\n         assert!(res.is_err());\n-    } }\n+    }\n \n-    test! { fn oneshot_multi_thread_close_stress() {\n+    #[test]\n+    fn oneshot_multi_thread_close_stress() {\n         for _ in range(0, stress_factor()) {\n             let (tx, rx) = channel::<int>();\n-            spawn(move|| {\n+            let _t = Thread::spawn(move|| {\n                 drop(rx);\n             });\n             drop(tx);\n         }\n-    } }\n+    }\n \n-    test! { fn oneshot_multi_thread_send_close_stress() {\n+    #[test]\n+    fn oneshot_multi_thread_send_close_stress() {\n         for _ in range(0, stress_factor()) {\n             let (tx, rx) = channel::<int>();\n-            spawn(move|| {\n+            let _t = Thread::spawn(move|| {\n                 drop(rx);\n             });\n             let _ = Thread::spawn(move|| {\n                 tx.send(1);\n             }).join();\n         }\n-    } }\n+    }\n \n-    test! { fn oneshot_multi_thread_recv_close_stress() {\n+    #[test]\n+    fn oneshot_multi_thread_recv_close_stress() {\n         for _ in range(0, stress_factor()) {\n             let (tx, rx) = channel::<int>();\n-            spawn(move|| {\n+            Thread::spawn(move|| {\n                 let res = Thread::spawn(move|| {\n                     rx.recv();\n                 }).join();\n                 assert!(res.is_err());\n-            });\n-            spawn(move|| {\n-                spawn(move|| {\n+            }).detach();\n+            let _t = Thread::spawn(move|| {\n+                Thread::spawn(move|| {\n                     drop(tx);\n-                });\n+                }).detach();\n             });\n         }\n-    } }\n+    }\n \n-    test! { fn oneshot_multi_thread_send_recv_stress() {\n+    #[test]\n+    fn oneshot_multi_thread_send_recv_stress() {\n         for _ in range(0, stress_factor()) {\n             let (tx, rx) = channel();\n-            spawn(move|| {\n+            let _t = Thread::spawn(move|| {\n                 tx.send(box 10i);\n             });\n-            spawn(move|| {\n-                assert!(rx.recv() == box 10i);\n-            });\n+            assert!(rx.recv() == box 10i);\n         }\n-    } }\n+    }\n \n-    test! { fn stream_send_recv_stress() {\n+    #[test]\n+    fn stream_send_recv_stress() {\n         for _ in range(0, stress_factor()) {\n             let (tx, rx) = channel();\n \n@@ -1412,50 +1441,53 @@ mod test {\n             fn send(tx: Sender<Box<int>>, i: int) {\n                 if i == 10 { return }\n \n-                spawn(move|| {\n+                Thread::spawn(move|| {\n                     tx.send(box i);\n                     send(tx, i + 1);\n-                });\n+                }).detach();\n             }\n \n             fn recv(rx: Receiver<Box<int>>, i: int) {\n                 if i == 10 { return }\n \n-                spawn(move|| {\n+                Thread::spawn(move|| {\n                     assert!(rx.recv() == box i);\n                     recv(rx, i + 1);\n-                });\n+                }).detach();\n             }\n         }\n-    } }\n+    }\n \n-    test! { fn recv_a_lot() {\n+    #[test]\n+    fn recv_a_lot() {\n         // Regression test that we don't run out of stack in scheduler context\n         let (tx, rx) = channel();\n         for _ in range(0i, 10000) { tx.send(()); }\n         for _ in range(0i, 10000) { rx.recv(); }\n-    } }\n+    }\n \n-    test! { fn shared_chan_stress() {\n+    #[test]\n+    fn shared_chan_stress() {\n         let (tx, rx) = channel();\n         let total = stress_factor() + 100;\n         for _ in range(0, total) {\n             let tx = tx.clone();\n-            spawn(move|| {\n+            Thread::spawn(move|| {\n                 tx.send(());\n-            });\n+            }).detach();\n         }\n \n         for _ in range(0, total) {\n             rx.recv();\n         }\n-    } }\n+    }\n \n-    test! { fn test_nested_recv_iter() {\n+    #[test]\n+    fn test_nested_recv_iter() {\n         let (tx, rx) = channel::<int>();\n         let (total_tx, total_rx) = channel::<int>();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut acc = 0;\n             for x in rx.iter() {\n                 acc += x;\n@@ -1468,13 +1500,14 @@ mod test {\n         tx.send(2);\n         drop(tx);\n         assert_eq!(total_rx.recv(), 6);\n-    } }\n+    }\n \n-    test! { fn test_recv_iter_break() {\n+    #[test]\n+    fn test_recv_iter_break() {\n         let (tx, rx) = channel::<int>();\n         let (count_tx, count_rx) = channel();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut count = 0;\n             for x in rx.iter() {\n                 if count >= 3 {\n@@ -1492,13 +1525,14 @@ mod test {\n         let _ = tx.send_opt(2);\n         drop(tx);\n         assert_eq!(count_rx.recv(), 4);\n-    } }\n+    }\n \n-    test! { fn try_recv_states() {\n+    #[test]\n+    fn try_recv_states() {\n         let (tx1, rx1) = channel::<int>();\n         let (tx2, rx2) = channel::<()>();\n         let (tx3, rx3) = channel::<()>();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             rx2.recv();\n             tx1.send(1);\n             tx3.send(());\n@@ -1515,14 +1549,15 @@ mod test {\n         tx2.send(());\n         rx3.recv();\n         assert_eq!(rx1.try_recv(), Err(Disconnected));\n-    } }\n+    }\n \n     // This bug used to end up in a livelock inside of the Receiver destructor\n     // because the internal state of the Shared packet was corrupted\n-    test! { fn destroy_upgraded_shared_port_when_sender_still_active() {\n+    #[test]\n+    fn destroy_upgraded_shared_port_when_sender_still_active() {\n         let (tx, rx) = channel();\n         let (tx2, rx2) = channel();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             rx.recv(); // wait on a oneshot\n             drop(rx);  // destroy a shared\n             tx2.send(());\n@@ -1537,13 +1572,16 @@ mod test {\n \n         // wait for the child task to exit before we exit\n         rx2.recv();\n-    }}\n+    }\n }\n \n #[cfg(test)]\n mod sync_tests {\n-    use prelude::*;\n+    use prelude::v1::*;\n     use os;\n+    use thread::Thread;\n+    use super::*;\n+    use str::from_str;\n \n     pub fn stress_factor() -> uint {\n         match os::getenv(\"RUST_TEST_STRESS\") {\n@@ -1552,108 +1590,128 @@ mod sync_tests {\n         }\n     }\n \n-    test! { fn smoke() {\n+    #[test]\n+    fn smoke() {\n         let (tx, rx) = sync_channel::<int>(1);\n         tx.send(1);\n         assert_eq!(rx.recv(), 1);\n-    } }\n+    }\n \n-    test! { fn drop_full() {\n+    #[test]\n+    fn drop_full() {\n         let (tx, _rx) = sync_channel(1);\n         tx.send(box 1i);\n-    } }\n+    }\n \n-    test! { fn smoke_shared() {\n+    #[test]\n+    fn smoke_shared() {\n         let (tx, rx) = sync_channel::<int>(1);\n         tx.send(1);\n         assert_eq!(rx.recv(), 1);\n         let tx = tx.clone();\n         tx.send(1);\n         assert_eq!(rx.recv(), 1);\n-    } }\n+    }\n \n-    test! { fn smoke_threads() {\n+    #[test]\n+    fn smoke_threads() {\n         let (tx, rx) = sync_channel::<int>(0);\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             tx.send(1);\n         });\n         assert_eq!(rx.recv(), 1);\n-    } }\n+    }\n \n-    test! { fn smoke_port_gone() {\n+    #[test]\n+    #[should_fail]\n+    fn smoke_port_gone() {\n         let (tx, rx) = sync_channel::<int>(0);\n         drop(rx);\n         tx.send(1);\n-    } #[should_fail] }\n+    }\n \n-    test! { fn smoke_shared_port_gone2() {\n+    #[test]\n+    #[should_fail]\n+    fn smoke_shared_port_gone2() {\n         let (tx, rx) = sync_channel::<int>(0);\n         drop(rx);\n         let tx2 = tx.clone();\n         drop(tx);\n         tx2.send(1);\n-    } #[should_fail] }\n+    }\n \n-    test! { fn port_gone_concurrent() {\n+    #[test]\n+    #[should_fail]\n+    fn port_gone_concurrent() {\n         let (tx, rx) = sync_channel::<int>(0);\n-        spawn(move|| {\n+        Thread::spawn(move|| {\n             rx.recv();\n-        });\n+        }).detach();\n         loop { tx.send(1) }\n-    } #[should_fail] }\n+    }\n \n-    test! { fn port_gone_concurrent_shared() {\n+    #[test]\n+    #[should_fail]\n+    fn port_gone_concurrent_shared() {\n         let (tx, rx) = sync_channel::<int>(0);\n         let tx2 = tx.clone();\n-        spawn(move|| {\n+        Thread::spawn(move|| {\n             rx.recv();\n-        });\n+        }).detach();\n         loop {\n             tx.send(1);\n             tx2.send(1);\n         }\n-    } #[should_fail] }\n+    }\n \n-    test! { fn smoke_chan_gone() {\n+    #[test]\n+    #[should_fail]\n+    fn smoke_chan_gone() {\n         let (tx, rx) = sync_channel::<int>(0);\n         drop(tx);\n         rx.recv();\n-    } #[should_fail] }\n+    }\n \n-    test! { fn smoke_chan_gone_shared() {\n+    #[test]\n+    #[should_fail]\n+    fn smoke_chan_gone_shared() {\n         let (tx, rx) = sync_channel::<()>(0);\n         let tx2 = tx.clone();\n         drop(tx);\n         drop(tx2);\n         rx.recv();\n-    } #[should_fail] }\n+    }\n \n-    test! { fn chan_gone_concurrent() {\n+    #[test]\n+    #[should_fail]\n+    fn chan_gone_concurrent() {\n         let (tx, rx) = sync_channel::<int>(0);\n-        spawn(move|| {\n+        Thread::spawn(move|| {\n             tx.send(1);\n             tx.send(1);\n-        });\n+        }).detach();\n         loop { rx.recv(); }\n-    } #[should_fail] }\n+    }\n \n-    test! { fn stress() {\n+    #[test]\n+    fn stress() {\n         let (tx, rx) = sync_channel::<int>(0);\n-        spawn(move|| {\n+        Thread::spawn(move|| {\n             for _ in range(0u, 10000) { tx.send(1); }\n-        });\n+        }).detach();\n         for _ in range(0u, 10000) {\n             assert_eq!(rx.recv(), 1);\n         }\n-    } }\n+    }\n \n-    test! { fn stress_shared() {\n+    #[test]\n+    fn stress_shared() {\n         static AMT: uint = 1000;\n         static NTHREADS: uint = 8;\n         let (tx, rx) = sync_channel::<int>(0);\n         let (dtx, drx) = sync_channel::<()>(0);\n \n-        spawn(move|| {\n+        Thread::spawn(move|| {\n             for _ in range(0, AMT * NTHREADS) {\n                 assert_eq!(rx.recv(), 1);\n             }\n@@ -1662,38 +1720,43 @@ mod sync_tests {\n                 _ => {}\n             }\n             dtx.send(());\n-        });\n+        }).detach();\n \n         for _ in range(0, NTHREADS) {\n             let tx = tx.clone();\n-            spawn(move|| {\n+            Thread::spawn(move|| {\n                 for _ in range(0, AMT) { tx.send(1); }\n-            });\n+            }).detach();\n         }\n         drop(tx);\n         drx.recv();\n-    } }\n+    }\n \n-    test! { fn oneshot_single_thread_close_port_first() {\n+    #[test]\n+    fn oneshot_single_thread_close_port_first() {\n         // Simple test of closing without sending\n         let (_tx, rx) = sync_channel::<int>(0);\n         drop(rx);\n-    } }\n+    }\n \n-    test! { fn oneshot_single_thread_close_chan_first() {\n+    #[test]\n+    fn oneshot_single_thread_close_chan_first() {\n         // Simple test of closing without sending\n         let (tx, _rx) = sync_channel::<int>(0);\n         drop(tx);\n-    } }\n+    }\n \n-    test! { fn oneshot_single_thread_send_port_close() {\n+    #[test]\n+    #[should_fail]\n+    fn oneshot_single_thread_send_port_close() {\n         // Testing that the sender cleans up the payload if receiver is closed\n         let (tx, rx) = sync_channel::<Box<int>>(0);\n         drop(rx);\n         tx.send(box 0);\n-    } #[should_fail] }\n+    }\n \n-    test! { fn oneshot_single_thread_recv_chan_close() {\n+    #[test]\n+    fn oneshot_single_thread_recv_chan_close() {\n         // Receiving on a closed chan will panic\n         let res = Thread::spawn(move|| {\n             let (tx, rx) = sync_channel::<int>(0);\n@@ -1702,134 +1765,148 @@ mod sync_tests {\n         }).join();\n         // What is our res?\n         assert!(res.is_err());\n-    } }\n+    }\n \n-    test! { fn oneshot_single_thread_send_then_recv() {\n+    #[test]\n+    fn oneshot_single_thread_send_then_recv() {\n         let (tx, rx) = sync_channel::<Box<int>>(1);\n         tx.send(box 10);\n         assert!(rx.recv() == box 10);\n-    } }\n+    }\n \n-    test! { fn oneshot_single_thread_try_send_open() {\n+    #[test]\n+    fn oneshot_single_thread_try_send_open() {\n         let (tx, rx) = sync_channel::<int>(1);\n         assert_eq!(tx.try_send(10), Ok(()));\n         assert!(rx.recv() == 10);\n-    } }\n+    }\n \n-    test! { fn oneshot_single_thread_try_send_closed() {\n+    #[test]\n+    fn oneshot_single_thread_try_send_closed() {\n         let (tx, rx) = sync_channel::<int>(0);\n         drop(rx);\n         assert_eq!(tx.try_send(10), Err(RecvDisconnected(10)));\n-    } }\n+    }\n \n-    test! { fn oneshot_single_thread_try_send_closed2() {\n+    #[test]\n+    fn oneshot_single_thread_try_send_closed2() {\n         let (tx, _rx) = sync_channel::<int>(0);\n         assert_eq!(tx.try_send(10), Err(Full(10)));\n-    } }\n+    }\n \n-    test! { fn oneshot_single_thread_try_recv_open() {\n+    #[test]\n+    fn oneshot_single_thread_try_recv_open() {\n         let (tx, rx) = sync_channel::<int>(1);\n         tx.send(10);\n         assert!(rx.recv_opt() == Ok(10));\n-    } }\n+    }\n \n-    test! { fn oneshot_single_thread_try_recv_closed() {\n+    #[test]\n+    fn oneshot_single_thread_try_recv_closed() {\n         let (tx, rx) = sync_channel::<int>(0);\n         drop(tx);\n         assert!(rx.recv_opt() == Err(()));\n-    } }\n+    }\n \n-    test! { fn oneshot_single_thread_peek_data() {\n+    #[test]\n+    fn oneshot_single_thread_peek_data() {\n         let (tx, rx) = sync_channel::<int>(1);\n         assert_eq!(rx.try_recv(), Err(Empty));\n         tx.send(10);\n         assert_eq!(rx.try_recv(), Ok(10));\n-    } }\n+    }\n \n-    test! { fn oneshot_single_thread_peek_close() {\n+    #[test]\n+    fn oneshot_single_thread_peek_close() {\n         let (tx, rx) = sync_channel::<int>(0);\n         drop(tx);\n         assert_eq!(rx.try_recv(), Err(Disconnected));\n         assert_eq!(rx.try_recv(), Err(Disconnected));\n-    } }\n+    }\n \n-    test! { fn oneshot_single_thread_peek_open() {\n+    #[test]\n+    fn oneshot_single_thread_peek_open() {\n         let (_tx, rx) = sync_channel::<int>(0);\n         assert_eq!(rx.try_recv(), Err(Empty));\n-    } }\n+    }\n \n-    test! { fn oneshot_multi_task_recv_then_send() {\n+    #[test]\n+    fn oneshot_multi_task_recv_then_send() {\n         let (tx, rx) = sync_channel::<Box<int>>(0);\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             assert!(rx.recv() == box 10);\n         });\n \n         tx.send(box 10);\n-    } }\n+    }\n \n-    test! { fn oneshot_multi_task_recv_then_close() {\n+    #[test]\n+    fn oneshot_multi_task_recv_then_close() {\n         let (tx, rx) = sync_channel::<Box<int>>(0);\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             drop(tx);\n         });\n         let res = Thread::spawn(move|| {\n             assert!(rx.recv() == box 10);\n         }).join();\n         assert!(res.is_err());\n-    } }\n+    }\n \n-    test! { fn oneshot_multi_thread_close_stress() {\n+    #[test]\n+    fn oneshot_multi_thread_close_stress() {\n         for _ in range(0, stress_factor()) {\n             let (tx, rx) = sync_channel::<int>(0);\n-            spawn(move|| {\n+            let _t = Thread::spawn(move|| {\n                 drop(rx);\n             });\n             drop(tx);\n         }\n-    } }\n+    }\n \n-    test! { fn oneshot_multi_thread_send_close_stress() {\n+    #[test]\n+    fn oneshot_multi_thread_send_close_stress() {\n         for _ in range(0, stress_factor()) {\n             let (tx, rx) = sync_channel::<int>(0);\n-            spawn(move|| {\n+            let _t = Thread::spawn(move|| {\n                 drop(rx);\n             });\n             let _ = Thread::spawn(move || {\n                 tx.send(1);\n             }).join();\n         }\n-    } }\n+    }\n \n-    test! { fn oneshot_multi_thread_recv_close_stress() {\n+    #[test]\n+    fn oneshot_multi_thread_recv_close_stress() {\n         for _ in range(0, stress_factor()) {\n             let (tx, rx) = sync_channel::<int>(0);\n-            spawn(move|| {\n+            let _t = Thread::spawn(move|| {\n                 let res = Thread::spawn(move|| {\n                     rx.recv();\n                 }).join();\n                 assert!(res.is_err());\n             });\n-            spawn(move|| {\n-                spawn(move|| {\n+            let _t = Thread::spawn(move|| {\n+                Thread::spawn(move|| {\n                     drop(tx);\n-                });\n+                }).detach();\n             });\n         }\n-    } }\n+    }\n \n-    test! { fn oneshot_multi_thread_send_recv_stress() {\n+    #[test]\n+    fn oneshot_multi_thread_send_recv_stress() {\n         for _ in range(0, stress_factor()) {\n             let (tx, rx) = sync_channel::<Box<int>>(0);\n-            spawn(move|| {\n+            let _t = Thread::spawn(move|| {\n                 tx.send(box 10i);\n             });\n-            spawn(move|| {\n-                assert!(rx.recv() == box 10i);\n-            });\n+            assert!(rx.recv() == box 10i);\n         }\n-    } }\n+    }\n \n-    test! { fn stream_send_recv_stress() {\n+    #[test]\n+    fn stream_send_recv_stress() {\n         for _ in range(0, stress_factor()) {\n             let (tx, rx) = sync_channel::<Box<int>>(0);\n \n@@ -1839,50 +1916,53 @@ mod sync_tests {\n             fn send(tx: SyncSender<Box<int>>, i: int) {\n                 if i == 10 { return }\n \n-                spawn(move|| {\n+                Thread::spawn(move|| {\n                     tx.send(box i);\n                     send(tx, i + 1);\n-                });\n+                }).detach();\n             }\n \n             fn recv(rx: Receiver<Box<int>>, i: int) {\n                 if i == 10 { return }\n \n-                spawn(move|| {\n+                Thread::spawn(move|| {\n                     assert!(rx.recv() == box i);\n                     recv(rx, i + 1);\n-                });\n+                }).detach();\n             }\n         }\n-    } }\n+    }\n \n-    test! { fn recv_a_lot() {\n+    #[test]\n+    fn recv_a_lot() {\n         // Regression test that we don't run out of stack in scheduler context\n         let (tx, rx) = sync_channel(10000);\n         for _ in range(0u, 10000) { tx.send(()); }\n         for _ in range(0u, 10000) { rx.recv(); }\n-    } }\n+    }\n \n-    test! { fn shared_chan_stress() {\n+    #[test]\n+    fn shared_chan_stress() {\n         let (tx, rx) = sync_channel(0);\n         let total = stress_factor() + 100;\n         for _ in range(0, total) {\n             let tx = tx.clone();\n-            spawn(move|| {\n+            Thread::spawn(move|| {\n                 tx.send(());\n-            });\n+            }).detach();\n         }\n \n         for _ in range(0, total) {\n             rx.recv();\n         }\n-    } }\n+    }\n \n-    test! { fn test_nested_recv_iter() {\n+    #[test]\n+    fn test_nested_recv_iter() {\n         let (tx, rx) = sync_channel::<int>(0);\n         let (total_tx, total_rx) = sync_channel::<int>(0);\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut acc = 0;\n             for x in rx.iter() {\n                 acc += x;\n@@ -1895,13 +1975,14 @@ mod sync_tests {\n         tx.send(2);\n         drop(tx);\n         assert_eq!(total_rx.recv(), 6);\n-    } }\n+    }\n \n-    test! { fn test_recv_iter_break() {\n+    #[test]\n+    fn test_recv_iter_break() {\n         let (tx, rx) = sync_channel::<int>(0);\n         let (count_tx, count_rx) = sync_channel(0);\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut count = 0;\n             for x in rx.iter() {\n                 if count >= 3 {\n@@ -1919,13 +2000,14 @@ mod sync_tests {\n         let _ = tx.try_send(2);\n         drop(tx);\n         assert_eq!(count_rx.recv(), 4);\n-    } }\n+    }\n \n-    test! { fn try_recv_states() {\n+    #[test]\n+    fn try_recv_states() {\n         let (tx1, rx1) = sync_channel::<int>(1);\n         let (tx2, rx2) = sync_channel::<()>(1);\n         let (tx3, rx3) = sync_channel::<()>(1);\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             rx2.recv();\n             tx1.send(1);\n             tx3.send(());\n@@ -1942,14 +2024,15 @@ mod sync_tests {\n         tx2.send(());\n         rx3.recv();\n         assert_eq!(rx1.try_recv(), Err(Disconnected));\n-    } }\n+    }\n \n     // This bug used to end up in a livelock inside of the Receiver destructor\n     // because the internal state of the Shared packet was corrupted\n-    test! { fn destroy_upgraded_shared_port_when_sender_still_active() {\n+    #[test]\n+    fn destroy_upgraded_shared_port_when_sender_still_active() {\n         let (tx, rx) = sync_channel::<()>(0);\n         let (tx2, rx2) = sync_channel::<()>(0);\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             rx.recv(); // wait on a oneshot\n             drop(rx);  // destroy a shared\n             tx2.send(());\n@@ -1964,78 +2047,77 @@ mod sync_tests {\n \n         // wait for the child task to exit before we exit\n         rx2.recv();\n-    } }\n+    }\n \n-    test! { fn send_opt1() {\n+    #[test]\n+    fn send_opt1() {\n         let (tx, rx) = sync_channel::<int>(0);\n-        spawn(move|| { rx.recv(); });\n+        let _t = Thread::spawn(move|| { rx.recv(); });\n         assert_eq!(tx.send_opt(1), Ok(()));\n-    } }\n+    }\n \n-    test! { fn send_opt2() {\n+    #[test]\n+    fn send_opt2() {\n         let (tx, rx) = sync_channel::<int>(0);\n-        spawn(move|| { drop(rx); });\n+        let _t = Thread::spawn(move|| { drop(rx); });\n         assert_eq!(tx.send_opt(1), Err(1));\n-    } }\n+    }\n \n-    test! { fn send_opt3() {\n+    #[test]\n+    fn send_opt3() {\n         let (tx, rx) = sync_channel::<int>(1);\n         assert_eq!(tx.send_opt(1), Ok(()));\n-        spawn(move|| { drop(rx); });\n+        let _t = Thread::spawn(move|| { drop(rx); });\n         assert_eq!(tx.send_opt(1), Err(1));\n-    } }\n+    }\n \n-    test! { fn send_opt4() {\n+    #[test]\n+    fn send_opt4() {\n         let (tx, rx) = sync_channel::<int>(0);\n         let tx2 = tx.clone();\n         let (done, donerx) = channel();\n         let done2 = done.clone();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             assert_eq!(tx.send_opt(1), Err(1));\n             done.send(());\n         });\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             assert_eq!(tx2.send_opt(2), Err(2));\n             done2.send(());\n         });\n         drop(rx);\n         donerx.recv();\n         donerx.recv();\n-    } }\n+    }\n \n-    test! { fn try_send1() {\n+    #[test]\n+    fn try_send1() {\n         let (tx, _rx) = sync_channel::<int>(0);\n         assert_eq!(tx.try_send(1), Err(Full(1)));\n-    } }\n+    }\n \n-    test! { fn try_send2() {\n+    #[test]\n+    fn try_send2() {\n         let (tx, _rx) = sync_channel::<int>(1);\n         assert_eq!(tx.try_send(1), Ok(()));\n         assert_eq!(tx.try_send(1), Err(Full(1)));\n-    } }\n+    }\n \n-    test! { fn try_send3() {\n+    #[test]\n+    fn try_send3() {\n         let (tx, rx) = sync_channel::<int>(1);\n         assert_eq!(tx.try_send(1), Ok(()));\n         drop(rx);\n         assert_eq!(tx.try_send(1), Err(RecvDisconnected(1)));\n-    } }\n-\n-    test! { fn try_send4() {\n-        let (tx, rx) = sync_channel::<int>(0);\n-        spawn(move|| {\n-            for _ in range(0u, 1000) { Thread::yield_now(); }\n-            assert_eq!(tx.try_send(1), Ok(()));\n-        });\n-        assert_eq!(rx.recv(), 1);\n-    } #[ignore(reason = \"flaky on libnative\")] }\n+    }\n \n-    test! { fn issue_15761() {\n+    #[test]\n+    fn issue_15761() {\n         fn repro() {\n             let (tx1, rx1) = sync_channel::<()>(3);\n             let (tx2, rx2) = sync_channel::<()>(3);\n \n-            spawn(move|| {\n+            let _t = Thread::spawn(move|| {\n                 rx1.recv();\n                 tx2.try_send(()).unwrap();\n             });\n@@ -2047,5 +2129,5 @@ mod sync_tests {\n         for _ in range(0u, 100) {\n             repro()\n         }\n-    } }\n+    }\n }"}, {"sha": "d1b6d0d697cf28e89318de5b71dbeea0aabd0901", "filename": "src/libstd/comm/mpsc_queue.rs", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fcomm%2Fmpsc_queue.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fcomm%2Fmpsc_queue.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fcomm%2Fmpsc_queue.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -153,11 +153,12 @@ impl<T: Send> Drop for Queue<T> {\n \n #[cfg(test)]\n mod tests {\n-    use prelude::*;\n-\n-    use alloc::arc::Arc;\n+    use prelude::v1::*;\n \n+    use comm::channel;\n     use super::{Queue, Data, Empty, Inconsistent};\n+    use sync::Arc;\n+    use thread::Thread;\n \n     #[test]\n     fn test_full() {\n@@ -181,12 +182,12 @@ mod tests {\n         for _ in range(0, nthreads) {\n             let tx = tx.clone();\n             let q = q.clone();\n-            spawn(move|| {\n+            Thread::spawn(move|| {\n                 for i in range(0, nmsgs) {\n                     q.push(i);\n                 }\n                 tx.send(());\n-            });\n+            }).detach();\n         }\n \n         let mut i = 0u;"}, {"sha": "5c476775bdbaa9f1c26e57ebe518e325d4c7bc0d", "filename": "src/libstd/comm/select.rs", "status": "modified", "additions": 89, "deletions": 61, "changes": 150, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fcomm%2Fselect.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fcomm%2Fselect.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fcomm%2Fselect.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -27,6 +27,8 @@\n //! # Example\n //!\n //! ```rust\n+//! use std::comm::channel;\n+//!\n //! let (tx1, rx1) = channel();\n //! let (tx2, rx2) = channel();\n //!\n@@ -335,9 +337,11 @@ impl Iterator<*mut Handle<'static, ()>> for Packets {\n #[cfg(test)]\n #[allow(unused_imports)]\n mod test {\n-    use prelude::*;\n+    use prelude::v1::*;\n \n     use super::*;\n+    use comm::*;\n+    use thread::Thread;\n \n     // Don't use the libstd version so we can pull in the right Select structure\n     // (std::comm points at the wrong one)\n@@ -357,7 +361,8 @@ mod test {\n         })\n     }\n \n-    test! { fn smoke() {\n+    #[test]\n+    fn smoke() {\n         let (tx1, rx1) = channel::<int>();\n         let (tx2, rx2) = channel::<int>();\n         tx1.send(1);\n@@ -379,9 +384,10 @@ mod test {\n         select! {\n             bar = rx2.recv_opt() => { assert_eq!(bar, Err(())); }\n         }\n-    } }\n+    }\n \n-    test! { fn smoke2() {\n+    #[test]\n+    fn smoke2() {\n         let (_tx1, rx1) = channel::<int>();\n         let (_tx2, rx2) = channel::<int>();\n         let (_tx3, rx3) = channel::<int>();\n@@ -395,9 +401,10 @@ mod test {\n             _foo = rx4.recv() => { panic!(\"4\") },\n             foo = rx5.recv() => { assert_eq!(foo, 4); }\n         }\n-    } }\n+    }\n \n-    test! { fn closed() {\n+    #[test]\n+    fn closed() {\n         let (_tx1, rx1) = channel::<int>();\n         let (tx2, rx2) = channel::<int>();\n         drop(tx2);\n@@ -406,14 +413,15 @@ mod test {\n             _a1 = rx1.recv_opt() => { panic!() },\n             a2 = rx2.recv_opt() => { assert_eq!(a2, Err(())); }\n         }\n-    } }\n+    }\n \n-    test! { fn unblocks() {\n+    #[test]\n+    fn unblocks() {\n         let (tx1, rx1) = channel::<int>();\n         let (_tx2, rx2) = channel::<int>();\n         let (tx3, rx3) = channel::<int>();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             for _ in range(0u, 20) { Thread::yield_now(); }\n             tx1.send(1);\n             rx3.recv();\n@@ -429,14 +437,15 @@ mod test {\n             a = rx1.recv_opt() => { assert_eq!(a, Err(())); },\n             _b = rx2.recv() => { panic!() }\n         }\n-    } }\n+    }\n \n-    test! { fn both_ready() {\n+    #[test]\n+    fn both_ready() {\n         let (tx1, rx1) = channel::<int>();\n         let (tx2, rx2) = channel::<int>();\n         let (tx3, rx3) = channel::<()>();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             for _ in range(0u, 20) { Thread::yield_now(); }\n             tx1.send(1);\n             tx2.send(2);\n@@ -454,15 +463,16 @@ mod test {\n         assert_eq!(rx1.try_recv(), Err(Empty));\n         assert_eq!(rx2.try_recv(), Err(Empty));\n         tx3.send(());\n-    } }\n+    }\n \n-    test! { fn stress() {\n+    #[test]\n+    fn stress() {\n         static AMT: int = 10000;\n         let (tx1, rx1) = channel::<int>();\n         let (tx2, rx2) = channel::<int>();\n         let (tx3, rx3) = channel::<()>();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             for i in range(0, AMT) {\n                 if i % 2 == 0 {\n                     tx1.send(i);\n@@ -480,14 +490,15 @@ mod test {\n             }\n             tx3.send(());\n         }\n-    } }\n+    }\n \n-    test! { fn cloning() {\n+    #[test]\n+    fn cloning() {\n         let (tx1, rx1) = channel::<int>();\n         let (_tx2, rx2) = channel::<int>();\n         let (tx3, rx3) = channel::<()>();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             rx3.recv();\n             tx1.clone();\n             assert_eq!(rx3.try_recv(), Err(Empty));\n@@ -501,14 +512,15 @@ mod test {\n             _i2 = rx2.recv() => panic!()\n         }\n         tx3.send(());\n-    } }\n+    }\n \n-    test! { fn cloning2() {\n+    #[test]\n+    fn cloning2() {\n         let (tx1, rx1) = channel::<int>();\n         let (_tx2, rx2) = channel::<int>();\n         let (tx3, rx3) = channel::<()>();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             rx3.recv();\n             tx1.clone();\n             assert_eq!(rx3.try_recv(), Err(Empty));\n@@ -522,13 +534,14 @@ mod test {\n             _i2 = rx2.recv() => panic!()\n         }\n         tx3.send(());\n-    } }\n+    }\n \n-    test! { fn cloning3() {\n+    #[test]\n+    fn cloning3() {\n         let (tx1, rx1) = channel::<()>();\n         let (tx2, rx2) = channel::<()>();\n         let (tx3, rx3) = channel::<()>();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let s = Select::new();\n             let mut h1 = s.handle(&rx1);\n             let mut h2 = s.handle(&rx2);\n@@ -542,73 +555,81 @@ mod test {\n         drop(tx1.clone());\n         tx2.send(());\n         rx3.recv();\n-    } }\n+    }\n \n-    test! { fn preflight1() {\n+    #[test]\n+    fn preflight1() {\n         let (tx, rx) = channel();\n         tx.send(());\n         select! {\n             () = rx.recv() => {}\n         }\n-    } }\n+    }\n \n-    test! { fn preflight2() {\n+    #[test]\n+    fn preflight2() {\n         let (tx, rx) = channel();\n         tx.send(());\n         tx.send(());\n         select! {\n             () = rx.recv() => {}\n         }\n-    } }\n+    }\n \n-    test! { fn preflight3() {\n+    #[test]\n+    fn preflight3() {\n         let (tx, rx) = channel();\n         drop(tx.clone());\n         tx.send(());\n         select! {\n             () = rx.recv() => {}\n         }\n-    } }\n+    }\n \n-    test! { fn preflight4() {\n+    #[test]\n+    fn preflight4() {\n         let (tx, rx) = channel();\n         tx.send(());\n         let s = Select::new();\n         let mut h = s.handle(&rx);\n         unsafe { h.add(); }\n         assert_eq!(s.wait2(false), h.id);\n-    } }\n+    }\n \n-    test! { fn preflight5() {\n+    #[test]\n+    fn preflight5() {\n         let (tx, rx) = channel();\n         tx.send(());\n         tx.send(());\n         let s = Select::new();\n         let mut h = s.handle(&rx);\n         unsafe { h.add(); }\n         assert_eq!(s.wait2(false), h.id);\n-    } }\n+    }\n \n-    test! { fn preflight6() {\n+    #[test]\n+    fn preflight6() {\n         let (tx, rx) = channel();\n         drop(tx.clone());\n         tx.send(());\n         let s = Select::new();\n         let mut h = s.handle(&rx);\n         unsafe { h.add(); }\n         assert_eq!(s.wait2(false), h.id);\n-    } }\n+    }\n \n-    test! { fn preflight7() {\n+    #[test]\n+    fn preflight7() {\n         let (tx, rx) = channel::<()>();\n         drop(tx);\n         let s = Select::new();\n         let mut h = s.handle(&rx);\n         unsafe { h.add(); }\n         assert_eq!(s.wait2(false), h.id);\n-    } }\n+    }\n \n-    test! { fn preflight8() {\n+    #[test]\n+    fn preflight8() {\n         let (tx, rx) = channel();\n         tx.send(());\n         drop(tx);\n@@ -617,9 +638,10 @@ mod test {\n         let mut h = s.handle(&rx);\n         unsafe { h.add(); }\n         assert_eq!(s.wait2(false), h.id);\n-    } }\n+    }\n \n-    test! { fn preflight9() {\n+    #[test]\n+    fn preflight9() {\n         let (tx, rx) = channel();\n         drop(tx.clone());\n         tx.send(());\n@@ -629,12 +651,13 @@ mod test {\n         let mut h = s.handle(&rx);\n         unsafe { h.add(); }\n         assert_eq!(s.wait2(false), h.id);\n-    } }\n+    }\n \n-    test! { fn oneshot_data_waiting() {\n+    #[test]\n+    fn oneshot_data_waiting() {\n         let (tx1, rx1) = channel();\n         let (tx2, rx2) = channel();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             select! {\n                 () = rx1.recv() => {}\n             }\n@@ -644,16 +667,17 @@ mod test {\n         for _ in range(0u, 100) { Thread::yield_now() }\n         tx1.send(());\n         rx2.recv();\n-    } }\n+    }\n \n-    test! { fn stream_data_waiting() {\n+    #[test]\n+    fn stream_data_waiting() {\n         let (tx1, rx1) = channel();\n         let (tx2, rx2) = channel();\n         tx1.send(());\n         tx1.send(());\n         rx1.recv();\n         rx1.recv();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             select! {\n                 () = rx1.recv() => {}\n             }\n@@ -663,15 +687,16 @@ mod test {\n         for _ in range(0u, 100) { Thread::yield_now() }\n         tx1.send(());\n         rx2.recv();\n-    } }\n+    }\n \n-    test! { fn shared_data_waiting() {\n+    #[test]\n+    fn shared_data_waiting() {\n         let (tx1, rx1) = channel();\n         let (tx2, rx2) = channel();\n         drop(tx1.clone());\n         tx1.send(());\n         rx1.recv();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             select! {\n                 () = rx1.recv() => {}\n             }\n@@ -681,32 +706,35 @@ mod test {\n         for _ in range(0u, 100) { Thread::yield_now() }\n         tx1.send(());\n         rx2.recv();\n-    } }\n+    }\n \n-    test! { fn sync1() {\n+    #[test]\n+    fn sync1() {\n         let (tx, rx) = sync_channel::<int>(1);\n         tx.send(1);\n         select! {\n             n = rx.recv() => { assert_eq!(n, 1); }\n         }\n-    } }\n+    }\n \n-    test! { fn sync2() {\n+    #[test]\n+    fn sync2() {\n         let (tx, rx) = sync_channel::<int>(0);\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             for _ in range(0u, 100) { Thread::yield_now() }\n             tx.send(1);\n         });\n         select! {\n             n = rx.recv() => { assert_eq!(n, 1); }\n         }\n-    } }\n+    }\n \n-    test! { fn sync3() {\n+    #[test]\n+    fn sync3() {\n         let (tx1, rx1) = sync_channel::<int>(0);\n         let (tx2, rx2): (Sender<int>, Receiver<int>) = channel();\n-        spawn(move|| { tx1.send(1); });\n-        spawn(move|| { tx2.send(2); });\n+        let _t = Thread::spawn(move|| { tx1.send(1); });\n+        let _t = Thread::spawn(move|| { tx2.send(2); });\n         select! {\n             n = rx1.recv() => {\n                 assert_eq!(n, 1);\n@@ -717,5 +745,5 @@ mod test {\n                 assert_eq!(rx1.recv(), 1);\n             }\n         }\n-    } }\n+    }\n }"}, {"sha": "1e2f5222d8b1a19f4cd88914d565303da9e7278c", "filename": "src/libstd/comm/spsc_queue.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fcomm%2Fspsc_queue.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fcomm%2Fspsc_queue.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fcomm%2Fspsc_queue.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -240,10 +240,12 @@ impl<T: Send> Drop for Queue<T> {\n \n #[cfg(test)]\n mod test {\n-    use prelude::*;\n+    use prelude::v1::*;\n \n     use sync::Arc;\n     use super::Queue;\n+    use thread::Thread;\n+    use comm::channel;\n \n     #[test]\n     fn smoke() {\n@@ -320,7 +322,7 @@ mod test {\n \n             let (tx, rx) = channel();\n             let q2 = q.clone();\n-            spawn(move|| {\n+            let _t = Thread::spawn(move|| {\n                 for _ in range(0u, 100000) {\n                     loop {\n                         match q2.pop() {"}, {"sha": "ecfe2d15ae1c26deb2ab5d5adb65fdf13323e27a", "filename": "src/libstd/dynamic_lib.rs", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fdynamic_lib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fdynamic_lib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fdynamic_lib.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -15,7 +15,9 @@\n #![experimental]\n #![allow(missing_docs)]\n \n-use prelude::*;\n+use prelude::v1::*;\n+\n+use c_str::ToCStr;\n use mem;\n use os;\n use str;\n@@ -146,7 +148,7 @@ impl DynamicLibrary {\n #[cfg(all(test, not(target_os = \"ios\")))]\n mod test {\n     use super::*;\n-    use prelude::*;\n+    use prelude::v1::*;\n     use libc;\n     use mem;\n \n@@ -202,8 +204,8 @@ mod test {\n pub mod dl {\n     use self::Rtld::*;\n \n-    use prelude::*;\n-    use c_str::CString;\n+    use prelude::v1::*;\n+    use c_str::{CString, ToCStr};\n     use libc;\n     use ptr;\n "}, {"sha": "956185c6443def4ee467b036a054080765926d53", "filename": "src/libstd/error.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Ferror.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Ferror.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Ferror.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -78,7 +78,7 @@\n //! }\n //! ```\n \n-use prelude::*;\n+use prelude::v1::*;\n \n use str::Utf8Error;\n "}, {"sha": "3d98b6ec40e493fd8777ab187b730643c4499da1", "filename": "src/libstd/failure.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Ffailure.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Ffailure.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Ffailure.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -10,7 +10,7 @@\n \n #![experimental]\n \n-use prelude::*;\n+use prelude::v1::*;\n \n use any::{Any, AnyRefExt};\n use cell::RefCell;"}, {"sha": "7bf459152737840eec767759ae67e880f9684008", "filename": "src/libstd/io/buffered.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Fbuffered.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Fbuffered.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Fbuffered.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -410,7 +410,7 @@ impl<S: Stream> Writer for BufferedStream<S> {\n mod test {\n     extern crate test;\n     use io;\n-    use prelude::*;\n+    use prelude::v1::*;\n     use super::*;\n     use super::super::{IoResult, EndOfFile};\n     use super::super::mem::MemReader;"}, {"sha": "be1dc0e9c34526f31339db87efb656ca77c699d2", "filename": "src/libstd/io/comm_adapters.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Fcomm_adapters.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Fcomm_adapters.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Fcomm_adapters.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -23,6 +23,7 @@ use vec::Vec;\n /// # Example\n ///\n /// ```\n+/// use std::comm::channel;\n /// use std::io::ChanReader;\n ///\n /// let (tx, rx) = channel();\n@@ -114,6 +115,7 @@ impl Reader for ChanReader {\n ///\n /// ```\n /// # #![allow(unused_must_use)]\n+/// use std::comm::channel;\n /// use std::io::ChanWriter;\n ///\n /// let (tx, rx) = channel();\n@@ -154,7 +156,9 @@ impl Writer for ChanWriter {\n \n #[cfg(test)]\n mod test {\n-    use prelude::*;\n+    use prelude::v1::*;\n+\n+    use comm::channel;\n     use super::*;\n     use io;\n     use thread::Thread;"}, {"sha": "dfea9678277e542e15e9a93d3cbeaa40741c21a2", "filename": "src/libstd/io/extensions.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Fextensions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Fextensions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Fextensions.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -175,7 +175,7 @@ pub fn u64_from_be_bytes(data: &[u8], start: uint, size: uint) -> u64 {\n \n #[cfg(test)]\n mod test {\n-    use prelude::*;\n+    use prelude::v1::*;\n     use io;\n     use io::{MemReader, BytesReader};\n \n@@ -507,7 +507,7 @@ mod test {\n mod bench {\n     extern crate test;\n \n-    use prelude::*;\n+    use prelude::v1::*;\n     use self::test::Bencher;\n \n     // why is this a macro? wouldn't an inlined function work just as well?"}, {"sha": "20920e60561717545c20b9180db92e058edae666", "filename": "src/libstd/io/fs.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Ffs.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -818,7 +818,7 @@ fn access_string(access: FileAccess) -> &'static str {\n #[allow(unused_variables)]\n #[allow(unused_mut)]\n mod test {\n-    use prelude::*;\n+    use prelude::v1::*;\n     use io::{SeekSet, SeekCur, SeekEnd, Read, Open, ReadWrite, FileType};\n     use io;\n     use str;"}, {"sha": "4341666a27e52c0ff8368767f23b37e1fce17637", "filename": "src/libstd/io/mem.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Fmem.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Fmem.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Fmem.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -399,9 +399,10 @@ impl<'a> Buffer for BufReader<'a> {\n #[cfg(test)]\n mod test {\n     extern crate \"test\" as test_crate;\n+    use prelude::v1::*;\n+\n     use super::*;\n     use io::*;\n-    use prelude::*;\n     use io;\n     use self::test_crate::Bencher;\n "}, {"sha": "0f8b3de48041ae2319f28d3061fc730b7cb6dcfe", "filename": "src/libstd/io/mod.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Fmod.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -233,7 +233,7 @@ use fmt;\n use int;\n use iter::{Iterator, IteratorExt};\n use mem::transmute;\n-use ops::{BitOr, BitXor, BitAnd, Sub, Not, FnOnce};\n+use ops::FnOnce;\n use option::Option;\n use option::Option::{Some, None};\n use os;\n@@ -1960,7 +1960,7 @@ impl fmt::Show for FilePermission {\n mod tests {\n     use self::BadReaderBehavior::*;\n     use super::{IoResult, Reader, MemReader, NoProgress, InvalidInput};\n-    use prelude::*;\n+    use prelude::v1::*;\n     use uint;\n \n     #[deriving(Clone, PartialEq, Show)]"}, {"sha": "18993aaa9d0f30e44d0cca8760ce50e7bc4abc46", "filename": "src/libstd/io/net/addrinfo.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Fnet%2Faddrinfo.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Fnet%2Faddrinfo.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Fnet%2Faddrinfo.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -105,7 +105,7 @@ fn lookup(hostname: Option<&str>, servname: Option<&str>, hint: Option<Hint>)\n // permission without help of apk\n #[cfg(all(test, not(target_os = \"android\")))]\n mod test {\n-    use prelude::*;\n+    use prelude::v1::*;\n     use super::*;\n     use io::net::ip::*;\n "}, {"sha": "ce6bac0f8c423b7976818e56146835b148e168f3", "filename": "src/libstd/io/net/ip.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Fnet%2Fip.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Fnet%2Fip.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Fnet%2Fip.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -544,7 +544,7 @@ impl<'a> ToSocketAddr for &'a str {\n \n #[cfg(test)]\n mod test {\n-    use prelude::*;\n+    use prelude::v1::*;\n     use super::*;\n     use str::FromStr;\n "}, {"sha": "f5edf8955d8b0d095e18a841c4c0b4037774638d", "filename": "src/libstd/io/net/pipe.rs", "status": "modified", "additions": 42, "deletions": 40, "changes": 82, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Fnet%2Fpipe.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Fnet%2Fpipe.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Fnet%2Fpipe.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -20,14 +20,14 @@\n \n #![allow(missing_docs)]\n \n-use prelude::*;\n+use prelude::v1::*;\n \n+use c_str::ToCStr;\n use io::{Listener, Acceptor, IoResult, TimedOut, standard_error};\n-use time::Duration;\n-\n-use sys::pipe::UnixStream as UnixStreamImp;\n-use sys::pipe::UnixListener as UnixListenerImp;\n use sys::pipe::UnixAcceptor as UnixAcceptorImp;\n+use sys::pipe::UnixListener as UnixListenerImp;\n+use sys::pipe::UnixStream as UnixStreamImp;\n+use time::Duration;\n \n use sys_common;\n \n@@ -264,13 +264,15 @@ impl sys_common::AsInner<UnixAcceptorImp> for UnixAcceptor {\n }\n \n #[cfg(test)]\n-#[allow(experimental)]\n mod tests {\n-    use super::*;\n+    use prelude::v1::*;\n+\n+    use comm::channel;\n     use io::*;\n-    use io::test::*;\n-    use prelude::*;\n     use io::fs::PathExtensions;\n+    use io::test::*;\n+    use super::*;\n+    use thread::Thread;\n     use time::Duration;\n \n     pub fn smalltest<F,G>(server: F, client: G)\n@@ -282,7 +284,7 @@ mod tests {\n \n         let mut acceptor = UnixListener::bind(&path1).listen();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             match UnixStream::connect(&path2) {\n                 Ok(c) => client(c),\n                 Err(e) => panic!(\"failed connect: {}\", e),\n@@ -377,7 +379,7 @@ mod tests {\n             Err(e) => panic!(\"failed listen: {}\", e),\n         };\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             for _ in range(0u, times) {\n                 let mut stream = UnixStream::connect(&path2);\n                 match stream.write(&[100]) {\n@@ -411,7 +413,7 @@ mod tests {\n         let addr = next_test_unix();\n         let mut acceptor = UnixListener::bind(&addr).listen();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut s = UnixStream::connect(&addr);\n             let mut buf = [0, 0];\n             debug!(\"client reading\");\n@@ -427,7 +429,7 @@ mod tests {\n \n         let (tx1, rx1) = channel();\n         let (tx2, rx2) = channel();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut s2 = s2;\n             rx1.recv();\n             debug!(\"writer writing\");\n@@ -450,7 +452,7 @@ mod tests {\n         let (tx1, rx) = channel();\n         let tx2 = tx1.clone();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut s = UnixStream::connect(&addr);\n             s.write(&[1]).unwrap();\n             rx.recv();\n@@ -462,7 +464,7 @@ mod tests {\n         let s2 = s1.clone();\n \n         let (done, rx) = channel();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut s2 = s2;\n             let mut buf = [0, 0];\n             s2.read(&mut buf).unwrap();\n@@ -481,7 +483,7 @@ mod tests {\n         let addr = next_test_unix();\n         let mut acceptor = UnixListener::bind(&addr).listen();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut s = UnixStream::connect(&addr);\n             let buf = &mut [0, 1];\n             s.read(buf).unwrap();\n@@ -492,7 +494,7 @@ mod tests {\n         let s2 = s1.clone();\n \n         let (tx, rx) = channel();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut s2 = s2;\n             s2.write(&[1]).unwrap();\n             tx.send(());\n@@ -539,7 +541,7 @@ mod tests {\n         // continue to receive any pending connections.\n         let (tx, rx) = channel();\n         let addr2 = addr.clone();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             tx.send(UnixStream::connect(&addr2).unwrap());\n         });\n         let l = rx.recv();\n@@ -557,7 +559,7 @@ mod tests {\n         // Unset the timeout and make sure that this always blocks.\n         a.set_timeout(None);\n         let addr2 = addr.clone();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             drop(UnixStream::connect(&addr2).unwrap());\n         });\n         a.accept().unwrap();\n@@ -595,11 +597,11 @@ mod tests {\n         let addr = next_test_unix();\n         let a = UnixListener::bind(&addr).listen().unwrap();\n         let (_tx, rx) = channel::<()>();\n-        spawn(move|| {\n+        Thread::spawn(move|| {\n             let mut a = a;\n             let _s = a.accept().unwrap();\n             let _ = rx.recv_opt();\n-        });\n+        }).detach();\n \n         let mut b = [0];\n         let mut s = UnixStream::connect(&addr).unwrap();\n@@ -632,16 +634,16 @@ mod tests {\n         let addr = next_test_unix();\n         let a = UnixListener::bind(&addr).listen().unwrap();\n         let (_tx, rx) = channel::<()>();\n-        spawn(move|| {\n+        Thread::spawn(move|| {\n             let mut a = a;\n             let _s = a.accept().unwrap();\n             let _ = rx.recv_opt();\n-        });\n+        }).detach();\n \n         let mut s = UnixStream::connect(&addr).unwrap();\n         let s2 = s.clone();\n         let (tx, rx) = channel();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut s2 = s2;\n             assert!(s2.read(&mut [0]).is_err());\n             tx.send(());\n@@ -658,12 +660,12 @@ mod tests {\n         let addr = next_test_unix();\n         let mut a = UnixListener::bind(&addr).listen().unwrap();\n         let (tx, rx) = channel::<()>();\n-        spawn(move|| {\n+        Thread::spawn(move|| {\n             let mut s = UnixStream::connect(&addr).unwrap();\n             rx.recv();\n             assert!(s.write(&[0]).is_ok());\n             let _ = rx.recv_opt();\n-        });\n+        }).detach();\n \n         let mut s = a.accept().unwrap();\n         s.set_timeout(Some(20));\n@@ -696,7 +698,7 @@ mod tests {\n         let addr = next_test_unix();\n         let mut a = UnixListener::bind(&addr).listen().unwrap();\n         let (tx, rx) = channel::<()>();\n-        spawn(move|| {\n+        Thread::spawn(move|| {\n             let mut s = UnixStream::connect(&addr).unwrap();\n             rx.recv();\n             let mut amt = 0;\n@@ -707,7 +709,7 @@ mod tests {\n                 }\n             }\n             let _ = rx.recv_opt();\n-        });\n+        }).detach();\n \n         let mut s = a.accept().unwrap();\n         s.set_read_timeout(Some(20));\n@@ -725,12 +727,12 @@ mod tests {\n         let addr = next_test_unix();\n         let mut a = UnixListener::bind(&addr).listen().unwrap();\n         let (tx, rx) = channel::<()>();\n-        spawn(move|| {\n+        Thread::spawn(move|| {\n             let mut s = UnixStream::connect(&addr).unwrap();\n             rx.recv();\n             assert!(s.write(&[0]).is_ok());\n             let _ = rx.recv_opt();\n-        });\n+        }).detach();\n \n         let mut s = a.accept().unwrap();\n         s.set_write_timeout(Some(20));\n@@ -752,17 +754,17 @@ mod tests {\n         let addr = next_test_unix();\n         let mut a = UnixListener::bind(&addr).listen().unwrap();\n         let (tx, rx) = channel::<()>();\n-        spawn(move|| {\n+        Thread::spawn(move|| {\n             let mut s = UnixStream::connect(&addr).unwrap();\n             rx.recv();\n             assert!(s.write(&[0]).is_ok());\n             let _ = rx.recv_opt();\n-        });\n+        }).detach();\n \n         let mut s = a.accept().unwrap();\n         let s2 = s.clone();\n         let (tx2, rx2) = channel();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut s2 = s2;\n             assert!(s2.read(&mut [0]).is_ok());\n             tx2.send(());\n@@ -784,10 +786,10 @@ mod tests {\n         let mut a2 = a.clone();\n \n         let addr2 = addr.clone();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let _ = UnixStream::connect(&addr2);\n         });\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let _ = UnixStream::connect(&addr);\n         });\n \n@@ -807,14 +809,14 @@ mod tests {\n         let (tx, rx) = channel();\n         let tx2 = tx.clone();\n \n-        spawn(move|| { let mut a = a; tx.send(a.accept()) });\n-        spawn(move|| { let mut a = a2; tx2.send(a.accept()) });\n+        let _t = Thread::spawn(move|| { let mut a = a; tx.send(a.accept()) });\n+        let _t = Thread::spawn(move|| { let mut a = a2; tx2.send(a.accept()) });\n \n         let addr2 = addr.clone();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let _ = UnixStream::connect(&addr2);\n         });\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let _ = UnixStream::connect(&addr);\n         });\n \n@@ -840,7 +842,7 @@ mod tests {\n         let mut a2 = a.clone();\n \n         let (tx, rx) = channel();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut a = a;\n             tx.send(a.accept());\n         });"}, {"sha": "67aaf7dda8ebf6b6333001ef814f2c1aab965ac2", "filename": "src/libstd/io/net/tcp.rs", "status": "modified", "additions": 69, "deletions": 66, "changes": 135, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Fnet%2Ftcp.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Fnet%2Ftcp.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Fnet%2Ftcp.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -141,7 +141,7 @@ impl TcpStream {\n     /// let mut stream = TcpStream::connect(\"127.0.0.1:34254\").unwrap();\n     /// let stream2 = stream.clone();\n     ///\n-    /// Thread::spawn(move|| {\n+    /// let _t = Thread::spawn(move|| {\n     ///     // close this stream after one second\n     ///     timer::sleep(Duration::seconds(1));\n     ///     let mut stream = stream2;\n@@ -282,10 +282,10 @@ impl sys_common::AsInner<TcpStreamImp> for TcpStream {\n /// use std::io::{Acceptor, Listener};\n /// use std::thread::Thread;\n ///\n-/// let listener = TcpListener::bind(\"127.0.0.1:80\");\n+/// let listener = TcpListener::bind(\"127.0.0.1:80\").unwrap();\n ///\n /// // bind the listener to the specified address\n-/// let mut acceptor = listener.listen();\n+/// let mut acceptor = listener.listen().unwrap();\n ///\n /// fn handle_client(mut stream: TcpStream) {\n ///     // ...\n@@ -423,7 +423,7 @@ impl TcpAcceptor {\n     /// let mut a = TcpListener::bind(\"127.0.0.1:8482\").listen().unwrap();\n     /// let a2 = a.clone();\n     ///\n-    /// Thread::spawn(move|| {\n+    /// let _t = Thread::spawn(move|| {\n     ///     let mut a2 = a2;\n     ///     for socket in a2.incoming() {\n     ///         match socket {\n@@ -482,11 +482,14 @@ impl sys_common::AsInner<TcpAcceptorImp> for TcpAcceptor {\n #[cfg(test)]\n #[allow(experimental)]\n mod test {\n+    use prelude::v1::*;\n+\n+    use comm::channel;\n+    use thread::Thread;\n     use io::net::tcp::*;\n     use io::net::ip::*;\n     use io::*;\n     use io::test::*;\n-    use prelude::*;\n \n     // FIXME #11530 this fails on android because tests are run as root\n     #[cfg_attr(any(windows, target_os = \"android\"), ignore)]\n@@ -512,7 +515,7 @@ mod test {\n         let listener = TcpListener::bind(socket_addr);\n         let mut acceptor = listener.listen();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut stream = TcpStream::connect((\"localhost\", socket_addr.port));\n             stream.write(&[144]).unwrap();\n         });\n@@ -528,7 +531,7 @@ mod test {\n         let addr = next_test_ip4();\n         let mut acceptor = TcpListener::bind(addr).listen();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut stream = TcpStream::connect((\"localhost\", addr.port));\n             stream.write(&[64]).unwrap();\n         });\n@@ -544,7 +547,7 @@ mod test {\n         let addr = next_test_ip4();\n         let mut acceptor = TcpListener::bind(addr).listen();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut stream = TcpStream::connect((\"127.0.0.1\", addr.port));\n             stream.write(&[44]).unwrap();\n         });\n@@ -560,7 +563,7 @@ mod test {\n         let addr = next_test_ip6();\n         let mut acceptor = TcpListener::bind(addr).listen();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut stream = TcpStream::connect((\"::1\", addr.port));\n             stream.write(&[66]).unwrap();\n         });\n@@ -576,7 +579,7 @@ mod test {\n         let addr = next_test_ip4();\n         let mut acceptor = TcpListener::bind(addr).listen();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut stream = TcpStream::connect(addr);\n             stream.write(&[99]).unwrap();\n         });\n@@ -592,7 +595,7 @@ mod test {\n         let addr = next_test_ip6();\n         let mut acceptor = TcpListener::bind(addr).listen();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut stream = TcpStream::connect(addr);\n             stream.write(&[99]).unwrap();\n         });\n@@ -608,7 +611,7 @@ mod test {\n         let addr = next_test_ip4();\n         let mut acceptor = TcpListener::bind(addr).listen();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let _stream = TcpStream::connect(addr);\n             // Close\n         });\n@@ -624,7 +627,7 @@ mod test {\n         let addr = next_test_ip6();\n         let mut acceptor = TcpListener::bind(addr).listen();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let _stream = TcpStream::connect(addr);\n             // Close\n         });\n@@ -640,7 +643,7 @@ mod test {\n         let addr = next_test_ip4();\n         let mut acceptor = TcpListener::bind(addr).listen();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let _stream = TcpStream::connect(addr);\n             // Close\n         });\n@@ -664,7 +667,7 @@ mod test {\n         let addr = next_test_ip6();\n         let mut acceptor = TcpListener::bind(addr).listen();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let _stream = TcpStream::connect(addr);\n             // Close\n         });\n@@ -689,7 +692,7 @@ mod test {\n         let mut acceptor = TcpListener::bind(addr).listen();\n \n         let (tx, rx) = channel();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             drop(TcpStream::connect(addr));\n             tx.send(());\n         });\n@@ -714,7 +717,7 @@ mod test {\n         let mut acceptor = TcpListener::bind(addr).listen();\n \n         let (tx, rx) = channel();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             drop(TcpStream::connect(addr));\n             tx.send(());\n         });\n@@ -739,7 +742,7 @@ mod test {\n         let max = 10u;\n         let mut acceptor = TcpListener::bind(addr).listen();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             for _ in range(0, max) {\n                 let mut stream = TcpStream::connect(addr);\n                 stream.write(&[99]).unwrap();\n@@ -759,7 +762,7 @@ mod test {\n         let max = 10u;\n         let mut acceptor = TcpListener::bind(addr).listen();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             for _ in range(0, max) {\n                 let mut stream = TcpStream::connect(addr);\n                 stream.write(&[99]).unwrap();\n@@ -779,11 +782,11 @@ mod test {\n         static MAX: int = 10;\n         let acceptor = TcpListener::bind(addr).listen();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut acceptor = acceptor;\n             for (i, stream) in acceptor.incoming().enumerate().take(MAX as uint) {\n                 // Start another task to handle the connection\n-                spawn(move|| {\n+                let _t = Thread::spawn(move|| {\n                     let mut stream = stream;\n                     let mut buf = [0];\n                     stream.read(&mut buf).unwrap();\n@@ -798,7 +801,7 @@ mod test {\n         fn connect(i: int, addr: SocketAddr) {\n             if i == MAX { return }\n \n-            spawn(move|| {\n+            let _t = Thread::spawn(move|| {\n                 debug!(\"connecting\");\n                 let mut stream = TcpStream::connect(addr);\n                 // Connect again before writing\n@@ -815,11 +818,11 @@ mod test {\n         static MAX: int = 10;\n         let acceptor = TcpListener::bind(addr).listen();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut acceptor = acceptor;\n             for (i, stream) in acceptor.incoming().enumerate().take(MAX as uint) {\n                 // Start another task to handle the connection\n-                spawn(move|| {\n+                let _t = Thread::spawn(move|| {\n                     let mut stream = stream;\n                     let mut buf = [0];\n                     stream.read(&mut buf).unwrap();\n@@ -834,7 +837,7 @@ mod test {\n         fn connect(i: int, addr: SocketAddr) {\n             if i == MAX { return }\n \n-            spawn(move|| {\n+            let _t = Thread::spawn(move|| {\n                 debug!(\"connecting\");\n                 let mut stream = TcpStream::connect(addr);\n                 // Connect again before writing\n@@ -851,11 +854,11 @@ mod test {\n         let addr = next_test_ip4();\n         let acceptor = TcpListener::bind(addr).listen();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut acceptor = acceptor;\n             for stream in acceptor.incoming().take(MAX as uint) {\n                 // Start another task to handle the connection\n-                spawn(move|| {\n+                let _t = Thread::spawn(move|| {\n                     let mut stream = stream;\n                     let mut buf = [0];\n                     stream.read(&mut buf).unwrap();\n@@ -870,7 +873,7 @@ mod test {\n         fn connect(i: int, addr: SocketAddr) {\n             if i == MAX { return }\n \n-            spawn(move|| {\n+            let _t = Thread::spawn(move|| {\n                 debug!(\"connecting\");\n                 let mut stream = TcpStream::connect(addr);\n                 // Connect again before writing\n@@ -887,11 +890,11 @@ mod test {\n         let addr = next_test_ip6();\n         let acceptor = TcpListener::bind(addr).listen();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut acceptor = acceptor;\n             for stream in acceptor.incoming().take(MAX as uint) {\n                 // Start another task to handle the connection\n-                spawn(move|| {\n+                let _t = Thread::spawn(move|| {\n                     let mut stream = stream;\n                     let mut buf = [0];\n                     stream.read(&mut buf).unwrap();\n@@ -906,7 +909,7 @@ mod test {\n         fn connect(i: int, addr: SocketAddr) {\n             if i == MAX { return }\n \n-            spawn(move|| {\n+            let _t = Thread::spawn(move|| {\n                 debug!(\"connecting\");\n                 let mut stream = TcpStream::connect(addr);\n                 // Connect again before writing\n@@ -929,7 +932,7 @@ mod test {\n \n     pub fn peer_name(addr: SocketAddr) {\n         let acceptor = TcpListener::bind(addr).listen();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut acceptor = acceptor;\n             acceptor.accept().unwrap();\n         });\n@@ -964,7 +967,7 @@ mod test {\n     fn partial_read() {\n         let addr = next_test_ip4();\n         let (tx, rx) = channel();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut srv = TcpListener::bind(addr).listen().unwrap();\n             tx.send(());\n             let mut cl = srv.accept().unwrap();\n@@ -1001,7 +1004,7 @@ mod test {\n         let addr = next_test_ip4();\n         let (tx, rx) = channel();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             rx.recv();\n             let _stream = TcpStream::connect(addr).unwrap();\n             // Close\n@@ -1026,7 +1029,7 @@ mod test {\n         let addr = next_test_ip4();\n         let mut acceptor = TcpListener::bind(addr).listen();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut s = TcpStream::connect(addr);\n             let mut buf = [0, 0];\n             assert_eq!(s.read(&mut buf), Ok(1));\n@@ -1039,7 +1042,7 @@ mod test {\n \n         let (tx1, rx1) = channel();\n         let (tx2, rx2) = channel();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut s2 = s2;\n             rx1.recv();\n             s2.write(&[1]).unwrap();\n@@ -1058,7 +1061,7 @@ mod test {\n         let (tx1, rx) = channel();\n         let tx2 = tx1.clone();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut s = TcpStream::connect(addr);\n             s.write(&[1]).unwrap();\n             rx.recv();\n@@ -1070,7 +1073,7 @@ mod test {\n         let s2 = s1.clone();\n \n         let (done, rx) = channel();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut s2 = s2;\n             let mut buf = [0, 0];\n             s2.read(&mut buf).unwrap();\n@@ -1089,7 +1092,7 @@ mod test {\n         let addr = next_test_ip4();\n         let mut acceptor = TcpListener::bind(addr).listen();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut s = TcpStream::connect(addr);\n             let mut buf = [0, 1];\n             s.read(&mut buf).unwrap();\n@@ -1100,7 +1103,7 @@ mod test {\n         let s2 = s1.clone();\n \n         let (done, rx) = channel();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut s2 = s2;\n             s2.write(&[1]).unwrap();\n             done.send(());\n@@ -1114,7 +1117,7 @@ mod test {\n     fn shutdown_smoke() {\n         let addr = next_test_ip4();\n         let a = TcpListener::bind(addr).unwrap().listen();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut a = a;\n             let mut c = a.accept().unwrap();\n             assert_eq!(c.read_to_end(), Ok(vec!()));\n@@ -1148,7 +1151,7 @@ mod test {\n         //        flakiness.\n         if !cfg!(target_os = \"freebsd\") {\n             let (tx, rx) = channel();\n-            spawn(move|| {\n+            let _t = Thread::spawn(move|| {\n                 tx.send(TcpStream::connect(addr).unwrap());\n             });\n             let _l = rx.recv();\n@@ -1165,7 +1168,7 @@ mod test {\n \n         // Unset the timeout and make sure that this always blocks.\n         a.set_timeout(None);\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             drop(TcpStream::connect(addr).unwrap());\n         });\n         a.accept().unwrap();\n@@ -1176,11 +1179,11 @@ mod test {\n         let addr = next_test_ip4();\n         let a = TcpListener::bind(addr).listen().unwrap();\n         let (_tx, rx) = channel::<()>();\n-        spawn(move|| {\n+        Thread::spawn(move|| {\n             let mut a = a;\n             let _s = a.accept().unwrap();\n             let _ = rx.recv_opt();\n-        });\n+        }).detach();\n \n         let mut b = [0];\n         let mut s = TcpStream::connect(addr).unwrap();\n@@ -1213,16 +1216,16 @@ mod test {\n         let addr = next_test_ip4();\n         let a = TcpListener::bind(addr).listen().unwrap();\n         let (_tx, rx) = channel::<()>();\n-        spawn(move|| {\n+        Thread::spawn(move|| {\n             let mut a = a;\n             let _s = a.accept().unwrap();\n             let _ = rx.recv_opt();\n-        });\n+        }).detach();\n \n         let mut s = TcpStream::connect(addr).unwrap();\n         let s2 = s.clone();\n         let (tx, rx) = channel();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut s2 = s2;\n             assert!(s2.read(&mut [0]).is_err());\n             tx.send(());\n@@ -1239,12 +1242,12 @@ mod test {\n         let addr = next_test_ip6();\n         let mut a = TcpListener::bind(addr).listen().unwrap();\n         let (tx, rx) = channel::<()>();\n-        spawn(move|| {\n+        Thread::spawn(move|| {\n             let mut s = TcpStream::connect(addr).unwrap();\n             rx.recv();\n             assert!(s.write(&[0]).is_ok());\n             let _ = rx.recv_opt();\n-        });\n+        }).detach();\n \n         let mut s = a.accept().unwrap();\n         s.set_timeout(Some(20));\n@@ -1272,7 +1275,7 @@ mod test {\n         let addr = next_test_ip6();\n         let mut a = TcpListener::bind(addr).listen().unwrap();\n         let (tx, rx) = channel::<()>();\n-        spawn(move|| {\n+        Thread::spawn(move|| {\n             let mut s = TcpStream::connect(addr).unwrap();\n             rx.recv();\n             let mut amt = 0;\n@@ -1283,7 +1286,7 @@ mod test {\n                 }\n             }\n             let _ = rx.recv_opt();\n-        });\n+        }).detach();\n \n         let mut s = a.accept().unwrap();\n         s.set_read_timeout(Some(20));\n@@ -1301,12 +1304,12 @@ mod test {\n         let addr = next_test_ip6();\n         let mut a = TcpListener::bind(addr).listen().unwrap();\n         let (tx, rx) = channel::<()>();\n-        spawn(move|| {\n+        Thread::spawn(move|| {\n             let mut s = TcpStream::connect(addr).unwrap();\n             rx.recv();\n             assert!(s.write(&[0]).is_ok());\n             let _ = rx.recv_opt();\n-        });\n+        }).detach();\n \n         let mut s = a.accept().unwrap();\n         s.set_write_timeout(Some(20));\n@@ -1329,17 +1332,17 @@ mod test {\n         let addr = next_test_ip6();\n         let mut a = TcpListener::bind(addr).listen().unwrap();\n         let (tx, rx) = channel::<()>();\n-        spawn(move|| {\n+        Thread::spawn(move|| {\n             let mut s = TcpStream::connect(addr).unwrap();\n             rx.recv();\n             assert_eq!(s.write(&[0]), Ok(()));\n             let _ = rx.recv_opt();\n-        });\n+        }).detach();\n \n         let mut s = a.accept().unwrap();\n         let s2 = s.clone();\n         let (tx2, rx2) = channel();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut s2 = s2;\n             assert_eq!(s2.read(&mut [0]), Ok(1));\n             tx2.send(());\n@@ -1362,7 +1365,7 @@ mod test {\n         let (tx, rx) = channel();\n         let (txdone, rxdone) = channel();\n         let txdone2 = txdone.clone();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut tcp = TcpStream::connect(addr).unwrap();\n             rx.recv();\n             tcp.write_u8(0).unwrap();\n@@ -1373,7 +1376,7 @@ mod test {\n         let tcp = accept.accept().unwrap();\n         let tcp2 = tcp.clone();\n         let txdone3 = txdone.clone();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut tcp2 = tcp2;\n             tcp2.read_u8().unwrap();\n             txdone3.send(());\n@@ -1399,10 +1402,10 @@ mod test {\n         let mut a = l.listen().unwrap();\n         let mut a2 = a.clone();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let _ = TcpStream::connect(addr);\n         });\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let _ = TcpStream::connect(addr);\n         });\n \n@@ -1420,13 +1423,13 @@ mod test {\n         let (tx, rx) = channel();\n         let tx2 = tx.clone();\n \n-        spawn(move|| { let mut a = a; tx.send(a.accept()) });\n-        spawn(move|| { let mut a = a2; tx2.send(a.accept()) });\n+        let _t = Thread::spawn(move|| { let mut a = a; tx.send(a.accept()) });\n+        let _t = Thread::spawn(move|| { let mut a = a2; tx2.send(a.accept()) });\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let _ = TcpStream::connect(addr);\n         });\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let _ = TcpStream::connect(addr);\n         });\n \n@@ -1452,7 +1455,7 @@ mod test {\n         let mut a2 = a.clone();\n \n         let (tx, rx) = channel();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut a = a;\n             tx.send(a.accept());\n         });"}, {"sha": "84269eb1ed9cdeb6d392445cdb3c33092bf03c89", "filename": "src/libstd/io/net/udp.rs", "status": "modified", "additions": 17, "deletions": 14, "changes": 31, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Fnet%2Fudp.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Fnet%2Fudp.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Fnet%2Fudp.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -248,11 +248,14 @@ impl Writer for UdpStream {\n #[cfg(test)]\n #[allow(experimental)]\n mod test {\n-    use super::*;\n-    use io::net::ip::*;\n+    use prelude::v1::*;\n+\n+    use comm::channel;\n     use io::*;\n+    use io::net::ip::*;\n     use io::test::*;\n-    use prelude::*;\n+    use super::*;\n+    use thread::Thread;\n \n     // FIXME #11530 this fails on android because tests are run as root\n     #[cfg_attr(any(windows, target_os = \"android\"), ignore)]\n@@ -272,7 +275,7 @@ mod test {\n         let (tx1, rx1) = channel();\n         let (tx2, rx2) = channel();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             match UdpSocket::bind(client_ip) {\n                 Ok(ref mut client) => {\n                     rx1.recv();\n@@ -307,7 +310,7 @@ mod test {\n         let client_ip = next_test_ip6();\n         let (tx, rx) = channel::<()>();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             match UdpSocket::bind(client_ip) {\n                 Ok(ref mut client) => {\n                     rx.recv();\n@@ -343,7 +346,7 @@ mod test {\n         let (tx1, rx1) = channel();\n         let (tx2, rx2) = channel();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let send_as = |ip, val: &[u8]| {\n                 match UdpSocket::bind(ip) {\n                     Ok(client) => {\n@@ -387,7 +390,7 @@ mod test {\n         let (tx1, rx1) = channel();\n         let (tx2, rx2) = channel();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             match UdpSocket::bind(client_ip) {\n                 Ok(client) => {\n                     let client = box client;\n@@ -449,7 +452,7 @@ mod test {\n         let mut sock1 = UdpSocket::bind(addr1).unwrap();\n         let sock2 = UdpSocket::bind(addr2).unwrap();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut sock2 = sock2;\n             let mut buf = [0, 0];\n             assert_eq!(sock2.recv_from(&mut buf), Ok((1, addr1)));\n@@ -461,7 +464,7 @@ mod test {\n \n         let (tx1, rx1) = channel();\n         let (tx2, rx2) = channel();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut sock3 = sock3;\n             rx1.recv();\n             sock3.send_to(&[1], addr2).unwrap();\n@@ -482,7 +485,7 @@ mod test {\n         let (tx1, rx) = channel();\n         let tx2 = tx1.clone();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut sock2 = sock2;\n             sock2.send_to(&[1], addr1).unwrap();\n             rx.recv();\n@@ -493,7 +496,7 @@ mod test {\n         let sock3 = sock1.clone();\n \n         let (done, rx) = channel();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut sock3 = sock3;\n             let mut buf = [0, 0];\n             sock3.recv_from(&mut buf).unwrap();\n@@ -517,7 +520,7 @@ mod test {\n         let (tx, rx) = channel();\n         let (serv_tx, serv_rx) = channel();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut sock2 = sock2;\n             let mut buf = [0, 1];\n \n@@ -533,7 +536,7 @@ mod test {\n \n         let (done, rx) = channel();\n         let tx2 = tx.clone();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut sock3 = sock3;\n             match sock3.send_to(&[1], addr2) {\n                 Ok(..) => { let _ = tx2.send_opt(()); }\n@@ -561,7 +564,7 @@ mod test {\n \n         let (tx, rx) = channel();\n         let (tx2, rx2) = channel();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut a = a2;\n             assert_eq!(a.recv_from(&mut [0]), Ok((1, addr1)));\n             assert_eq!(a.send_to(&[0], addr1), Ok(()));"}, {"sha": "40ae49228231579628aa7f90fb7a287986aa7e94", "filename": "src/libstd/io/pipe.rs", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Fpipe.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Fpipe.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Fpipe.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -15,7 +15,7 @@\n \n #![allow(missing_docs)]\n \n-use prelude::*;\n+use prelude::v1::*;\n \n use io::IoResult;\n use libc;\n@@ -112,7 +112,10 @@ impl Writer for PipeStream {\n \n #[cfg(test)]\n mod test {\n-    use prelude::*;\n+    use prelude::v1::*;\n+\n+    use comm::channel;\n+    use thread::Thread;\n \n     #[test]\n     fn partial_read() {\n@@ -123,7 +126,7 @@ mod test {\n         let out = PipeStream::open(writer);\n         let mut input = PipeStream::open(reader);\n         let (tx, rx) = channel();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut out = out;\n             out.write(&[10]).unwrap();\n             rx.recv(); // don't close the pipe until the other read has finished"}, {"sha": "d1e9e2c4ea1f81b72122a05bb17c251b8e90972d", "filename": "src/libstd/io/process.rs", "status": "modified", "additions": 20, "deletions": 19, "changes": 39, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Fprocess.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Fprocess.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Fprocess.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -16,25 +16,25 @@\n pub use self::StdioContainer::*;\n pub use self::ProcessExit::*;\n \n-use prelude::*;\n+use prelude::v1::*;\n \n+use c_str::{CString, ToCStr};\n+use collections::HashMap;\n+use comm::{channel, Receiver};\n use fmt;\n-use os;\n+use hash::Hash;\n+use io::pipe::{PipeStream, PipePair};\n use io::{IoResult, IoError};\n use io;\n use libc;\n-use c_str::CString;\n-use collections::HashMap;\n-use hash::Hash;\n-#[cfg(windows)]\n-use std::hash::sip::SipState;\n-use io::pipe::{PipeStream, PipePair};\n+use os;\n use path::BytesContainer;\n-use thread::Thread;\n-\n-use sys;\n use sys::fs::FileDesc;\n use sys::process::Process as ProcessImp;\n+use sys;\n+use thread::Thread;\n+\n+#[cfg(windows)] use std::hash::sip::SipState;\n \n /// Signal a process to exit, without forcibly killing it. Corresponds to\n /// SIGTERM on unix platforms.\n@@ -741,16 +741,17 @@ impl Drop for Process {\n \n #[cfg(test)]\n mod tests {\n-    #![allow(unused_imports)]\n+    use prelude::v1::*;\n \n-    use super::*;\n-    use io::timer::*;\n+    use comm::channel;\n     use io::*;\n-    use prelude::*;\n     use io::fs::PathExtensions;\n-    use time::Duration;\n-    use str;\n+    use io::timer::*;\n     use rt::running_on_valgrind;\n+    use str;\n+    use super::*;\n+    use thread::Thread;\n+    use time::Duration;\n \n     // FIXME(#10380) these tests should not all be ignored on android.\n \n@@ -1154,14 +1155,14 @@ mod tests {\n     fn wait_timeout2() {\n         let (tx, rx) = channel();\n         let tx2 = tx.clone();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut p = sleeper();\n             p.set_timeout(Some(10));\n             assert_eq!(p.wait().err().unwrap().kind, TimedOut);\n             p.signal_kill().unwrap();\n             tx.send(());\n         });\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut p = sleeper();\n             p.set_timeout(Some(10));\n             assert_eq!(p.wait().err().unwrap().kind, TimedOut);"}, {"sha": "c1474650f1eb479fa73245b253105b9b708302c3", "filename": "src/libstd/io/result.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Fresult.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Fresult.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Fresult.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -78,7 +78,7 @@ impl<T, A: Acceptor<T>> Acceptor<T> for IoResult<A> {\n \n #[cfg(test)]\n mod test {\n-    use prelude::*;\n+    use prelude::v1::*;\n     use super::super::mem::*;\n     use io;\n "}, {"sha": "c378b95ff33d2c588d1a428ccb0e11e8f45ec887", "filename": "src/libstd/io/stdio.rs", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Fstdio.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Fstdio.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Fstdio.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -540,8 +540,11 @@ impl Writer for StdWriter {\n \n #[cfg(test)]\n mod tests {\n+    use prelude::v1::*;\n+\n     use super::*;\n-    use prelude::*;\n+    use comm::channel;\n+    use thread::Thread;\n \n     #[test]\n     fn smoke() {\n@@ -557,7 +560,7 @@ mod tests {\n \n         let (tx, rx) = channel();\n         let (mut r, w) = (ChanReader::new(rx), ChanWriter::new(tx));\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             set_stdout(box w);\n             println!(\"hello!\");\n         });\n@@ -570,7 +573,7 @@ mod tests {\n \n         let (tx, rx) = channel();\n         let (mut r, w) = (ChanReader::new(rx), ChanWriter::new(tx));\n-        spawn(move|| {\n+        let _t = Thread::spawn(move || -> () {\n             set_stderr(box w);\n             panic!(\"my special message\");\n         });"}, {"sha": "9c6033f37c93ccc870edf7f02758163a6c4231ee", "filename": "src/libstd/io/test.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Ftest.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -12,9 +12,10 @@\n \n #![macro_escape]\n \n+use prelude::v1::*;\n+\n use libc;\n use os;\n-use prelude::*;\n use std::io::net::ip::*;\n use sync::atomic::{AtomicUint, INIT_ATOMIC_UINT, Relaxed};\n "}, {"sha": "2067a97fdacf906f35725ee5bad0256899ea7c16", "filename": "src/libstd/io/timer.rs", "status": "modified", "additions": 8, "deletions": 7, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Ftimer.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Ftimer.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Ftimer.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -225,9 +225,10 @@ fn in_ms_u64(d: Duration) -> u64 {\n \n #[cfg(test)]\n mod test {\n-    use prelude::*;\n+    use prelude::v1::*;\n \n     use super::Timer;\n+    use thread::Thread;\n     use time::Duration;\n \n     #[test]\n@@ -357,9 +358,9 @@ mod test {\n         let mut timer = Timer::new().unwrap();\n         let timer_rx = timer.periodic(Duration::milliseconds(1000));\n \n-        spawn(move|| {\n+        Thread::spawn(move|| {\n             let _ = timer_rx.recv_opt();\n-        });\n+        }).detach();\n \n         // when we drop the TimerWatcher we're going to destroy the channel,\n         // which must wake up the task on the other end\n@@ -371,9 +372,9 @@ mod test {\n         let mut timer = Timer::new().unwrap();\n         let timer_rx = timer.periodic(Duration::milliseconds(1000));\n \n-        spawn(move|| {\n+        Thread::spawn(move|| {\n             let _ = timer_rx.recv_opt();\n-        });\n+        }).detach();\n \n         timer.oneshot(Duration::milliseconds(1));\n     }\n@@ -384,9 +385,9 @@ mod test {\n         let mut timer = Timer::new().unwrap();\n         let timer_rx = timer.periodic(Duration::milliseconds(1000));\n \n-        spawn(move|| {\n+        Thread::spawn(move|| {\n             let _ = timer_rx.recv_opt();\n-        });\n+        }).detach();\n \n         timer.sleep(Duration::milliseconds(1));\n     }"}, {"sha": "e4888f3dd97d1c5ffe732c99f2da67ebcdbaecc4", "filename": "src/libstd/io/util.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Futil.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fio%2Futil.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Futil.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -10,7 +10,7 @@\n \n //! Utility implementations of Reader and Writer\n \n-use prelude::*;\n+use prelude::v1::*;\n use cmp;\n use io;\n use slice::bytes::MutableByteVector;\n@@ -280,7 +280,7 @@ mod test {\n     use io;\n     use boxed::Box;\n     use super::*;\n-    use prelude::*;\n+    use prelude::v1::*;\n \n     #[test]\n     fn test_limit_reader_unlimited() {"}, {"sha": "56d906c8b69e3ca19f2aa054c851f226b2585c29", "filename": "src/libstd/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Flib.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -264,6 +264,7 @@ mod std {\n     pub use cell; // used for tls!\n     pub use thread_local; // used for thread_local!\n     pub use kinds; // used for tls!\n+    pub use ops; // used for bitflags!\n \n     // The test runner calls ::std::os::args() but really wants realstd\n     #[cfg(test)] pub use realstd::os as os;"}, {"sha": "3606f5df5ca18cecd011218b36636a9b8c1323a1", "filename": "src/libstd/macros.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fmacros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fmacros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fmacros.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -474,6 +474,7 @@ macro_rules! vec {\n ///\n /// ```\n /// use std::thread::Thread;\n+/// use std::comm::channel;\n ///\n /// let (tx1, rx1) = channel();\n /// let (tx2, rx2) = channel();"}, {"sha": "6de49c38b732e98b6195de7e6d7d5210a802c7df", "filename": "src/libstd/num/f32.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fnum%2Ff32.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fnum%2Ff32.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fnum%2Ff32.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -15,7 +15,7 @@\n #![allow(unsigned_negation)]\n #![doc(primitive = \"f32\")]\n \n-use prelude::*;\n+use prelude::v1::*;\n \n use intrinsics;\n use libc::c_int;"}, {"sha": "50855d21b4ab89aac9a618ad40e99fa7dd912855", "filename": "src/libstd/num/f64.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fnum%2Ff64.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fnum%2Ff64.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fnum%2Ff64.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -14,7 +14,7 @@\n #![allow(missing_docs)]\n #![doc(primitive = \"f64\")]\n \n-use prelude::*;\n+use prelude::v1::*;\n \n use intrinsics;\n use libc::c_int;"}, {"sha": "01aa21c692bf54cce2047b2cfd694ee89262932f", "filename": "src/libstd/num/mod.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fnum%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fnum%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fnum%2Fmod.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -147,7 +147,7 @@ pub fn test_num<T>(ten: T, two: T) where\n \n #[cfg(test)]\n mod tests {\n-    use prelude::*;\n+    use prelude::v1::*;\n     use super::*;\n     use i8;\n     use i16;\n@@ -800,7 +800,7 @@ mod bench {\n     extern crate test;\n     use self::test::Bencher;\n     use num::Int;\n-    use prelude::*;\n+    use prelude::v1::*;\n \n     #[bench]\n     fn bench_pow_function(b: &mut Bencher) {"}, {"sha": "61fd754018ebab0112ac5f519d2c8cd538b3a597", "filename": "src/libstd/num/uint_macros.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fnum%2Fuint_macros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fnum%2Fuint_macros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fnum%2Fuint_macros.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -49,8 +49,9 @@ pub fn to_str_bytes<U, F>(n: $T, radix: uint, f: F) -> U where\n \n #[cfg(test)]\n mod tests {\n-    use prelude::*;\n+    use prelude::v1::*;\n     use num::FromStrRadix;\n+    use str::from_str;\n \n     #[test]\n     pub fn test_from_str() {"}, {"sha": "61ac89239f9fd5a657c82f36378e4cc5989f1997", "filename": "src/libstd/os.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fos.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fos.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fos.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -1424,7 +1424,7 @@ mod arch_consts {\n \n #[cfg(test)]\n mod tests {\n-    use prelude::*;\n+    use prelude::v1::*;\n     use option;\n     use os::{env, getcwd, getenv, make_absolute};\n     use os::{split_paths, join_paths, setenv, unsetenv};"}, {"sha": "024dc56073d04b4d189c5e6c7572287bf2d93cec", "filename": "src/libstd/path/mod.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fpath%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fpath%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fpath%2Fmod.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -931,7 +931,9 @@ fn contains_nul<T: BytesContainer>(v: &T) -> bool {\n \n #[cfg(test)]\n mod tests {\n-    use prelude::*;\n+    use prelude::v1::*;\n+    use c_str::ToCStr;\n+    use path::{WindowsPath, PosixPath};\n \n     #[test]\n     fn test_cstring() {"}, {"sha": "da4576ca36d80518802b8f389d91229f9566516b", "filename": "src/libstd/path/posix.rs", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fpath%2Fposix.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fpath%2Fposix.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fpath%2Fposix.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -447,11 +447,9 @@ static dot_dot_static: &'static [u8] = b\"..\";\n \n #[cfg(test)]\n mod tests {\n-    use super::*;\n-    use prelude::Option::{mod, Some, None};\n-    use prelude::{Vec, Clone, AsSlice, SliceExt, CloneSliceExt, IteratorExt};\n-    use prelude::{DoubleEndedIteratorExt, Str, StrExt, ToString, GenericPath};\n+    use prelude::v1::*;\n     use str;\n+    use super::*;\n \n     macro_rules! t {\n         (s: $path:expr, $exp:expr) => (\n@@ -1239,7 +1237,7 @@ mod bench {\n     extern crate test;\n     use self::test::Bencher;\n     use super::*;\n-    use prelude::*;\n+    use prelude::v1::*;\n \n     #[bench]\n     fn join_home_dir(b: &mut Bencher) {"}, {"sha": "e6fea07b3aa4362985d5cc2d495e1ba8783cda9c", "filename": "src/libstd/path/windows.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fpath%2Fwindows.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fpath%2Fwindows.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fpath%2Fwindows.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -1119,10 +1119,8 @@ fn prefix_len(p: Option<PathPrefix>) -> uint {\n \n #[cfg(test)]\n mod tests {\n+    use prelude::v1::*;\n     use super::*;\n-    use prelude::Option::{mod, Some, None};\n-    use prelude::{Vec, Clone, AsSlice, SliceExt, CloneSliceExt, IteratorExt};\n-    use prelude::{DoubleEndedIteratorExt, Str, ToString, GenericPath};\n     use super::PathPrefix::*;\n     use super::parse_prefix;\n "}, {"sha": "d1540f98a2355651f7a2bc2738d49f6120989aa2", "filename": "src/libstd/prelude.rs", "status": "removed", "additions": 0, "deletions": 95, "changes": 95, "blob_url": "https://github.com/rust-lang/rust/blob/3dcc409fac18a258ba2a8af4345d9566ec8eebad/src%2Flibstd%2Fprelude.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3dcc409fac18a258ba2a8af4345d9566ec8eebad/src%2Flibstd%2Fprelude.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fprelude.rs?ref=3dcc409fac18a258ba2a8af4345d9566ec8eebad", "patch": "@@ -1,95 +0,0 @@\n-// Copyright 2013 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n-//! The Rust prelude\n-//!\n-//! Because `std` is required by most serious Rust software, it is\n-//! imported at the topmost level of every crate by default, as if the\n-//! first line of each crate was\n-//!\n-//! ```ignore\n-//! extern crate std;\n-//! ```\n-//!\n-//! This means that the contents of std can be accessed from any context\n-//! with the `std::` path prefix, as in `use std::vec`, `use std::task::spawn`,\n-//! etc.\n-//!\n-//! Additionally, `std` contains a `prelude` module that reexports many of the\n-//! most common traits, types and functions. The contents of the prelude are\n-//! imported into every *module* by default.  Implicitly, all modules behave as if\n-//! they contained the following prologue:\n-//!\n-//! ```ignore\n-//! use std::prelude::*;\n-//! ```\n-//!\n-//! The prelude is primarily concerned with exporting *traits* that are so\n-//! pervasive that it would be obnoxious to import for every use, particularly\n-//! those that define methods on primitive types. It does include a few\n-//! particularly useful standalone functions, like `from_str`, `range`, and\n-//! `drop`, `spawn`, and `channel`.\n-\n-#![experimental]\n-\n-// Reexported core operators\n-#[doc(no_inline)] pub use kinds::{Copy, Send, Sized, Sync};\n-#[doc(no_inline)] pub use ops::{Add, Sub, Mul, Div, Rem, Neg, Not};\n-#[doc(no_inline)] pub use ops::{BitAnd, BitOr, BitXor};\n-#[doc(no_inline)] pub use ops::{Drop, Deref, DerefMut};\n-#[doc(no_inline)] pub use ops::{Shl, Shr};\n-#[doc(no_inline)] pub use ops::{Index, IndexMut};\n-#[doc(no_inline)] pub use ops::{Slice, SliceMut};\n-#[doc(no_inline)] pub use ops::{Fn, FnMut, FnOnce};\n-\n-// Reexported functions\n-#[doc(no_inline)] pub use iter::range;\n-#[doc(no_inline)] pub use mem::drop;\n-#[doc(no_inline)] pub use str::from_str;\n-\n-// Reexported types and traits\n-\n-#[doc(no_inline)] pub use borrow::IntoCow;\n-#[doc(no_inline)] pub use c_str::ToCStr;\n-#[doc(no_inline)] pub use char::{Char, UnicodeChar};\n-#[doc(no_inline)] pub use clone::Clone;\n-#[doc(no_inline)] pub use cmp::{PartialEq, PartialOrd, Eq, Ord};\n-#[doc(no_inline)] pub use cmp::{Ordering, Equiv};\n-#[doc(no_inline)] pub use cmp::Ordering::{Less, Equal, Greater};\n-#[doc(no_inline)] pub use iter::{FromIterator, Extend, ExactSizeIterator};\n-#[doc(no_inline)] pub use iter::{Iterator, IteratorExt, DoubleEndedIterator};\n-#[doc(no_inline)] pub use iter::{DoubleEndedIteratorExt, CloneIteratorExt};\n-#[doc(no_inline)] pub use iter::{RandomAccessIterator, IteratorCloneExt};\n-#[doc(no_inline)] pub use iter::{IteratorOrdExt, MutableDoubleEndedIterator};\n-#[doc(no_inline)] pub use num::{ToPrimitive, FromPrimitive};\n-#[doc(no_inline)] pub use boxed::Box;\n-#[doc(no_inline)] pub use option::Option;\n-#[doc(no_inline)] pub use option::Option::{Some, None};\n-#[doc(no_inline)] pub use path::{GenericPath, Path, PosixPath, WindowsPath};\n-#[doc(no_inline)] pub use ptr::{RawPtr, RawMutPtr};\n-#[doc(no_inline)] pub use result::Result;\n-#[doc(no_inline)] pub use result::Result::{Ok, Err};\n-#[doc(no_inline)] pub use io::{Buffer, Writer, Reader, Seek, BufferPrelude};\n-#[doc(no_inline)] pub use core::prelude::{Tuple1, Tuple2, Tuple3, Tuple4};\n-#[doc(no_inline)] pub use core::prelude::{Tuple5, Tuple6, Tuple7, Tuple8};\n-#[doc(no_inline)] pub use core::prelude::{Tuple9, Tuple10, Tuple11, Tuple12};\n-#[doc(no_inline)] pub use str::{Str, StrVector};\n-#[doc(no_inline)] pub use str::StrExt;\n-#[doc(no_inline)] pub use slice::AsSlice;\n-#[doc(no_inline)] pub use slice::{VectorVector, PartialEqSliceExt};\n-#[doc(no_inline)] pub use slice::{CloneSliceExt, OrdSliceExt, SliceExt};\n-#[doc(no_inline)] pub use slice::{BoxedSliceExt};\n-#[doc(no_inline)] pub use string::{IntoString, String, ToString};\n-#[doc(no_inline)] pub use vec::Vec;\n-\n-// Reexported runtime types\n-#[doc(no_inline)] pub use comm::{sync_channel, channel};\n-#[doc(no_inline)] pub use comm::{SyncSender, Sender, Receiver};\n-#[doc(no_inline)] pub use task::spawn;"}, {"sha": "da945b4c9fa084673605af4e30391c99d64cdd64", "filename": "src/libstd/prelude/mod.rs", "status": "added", "additions": 42, "deletions": 0, "changes": 42, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fprelude%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fprelude%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fprelude%2Fmod.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -0,0 +1,42 @@\n+// Copyright 2014 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+//! The Rust prelude\n+//!\n+//! Because `std` is required by most serious Rust software, it is\n+//! imported at the topmost level of every crate by default, as if the\n+//! first line of each crate was\n+//!\n+//! ```ignore\n+//! extern crate std;\n+//! ```\n+//!\n+//! This means that the contents of std can be accessed from any context\n+//! with the `std::` path prefix, as in `use std::vec`, `use std::task::spawn`,\n+//! etc.\n+//!\n+//! Additionally, `std` contains a `prelude` module that reexports many of the\n+//! most common traits, types and functions. The contents of the prelude are\n+//! imported into every *module* by default.  Implicitly, all modules behave as if\n+//! they contained the following prologue:\n+//!\n+//! ```ignore\n+//! use std::prelude::v1::*;\n+//! ```\n+//!\n+//! The prelude is primarily concerned with exporting *traits* that are so\n+//! pervasive that it would be obnoxious to import for every use, particularly\n+//! those that define methods on primitive types.\n+\n+#[cfg(stage0)]\n+pub use self::v1::*;\n+\n+#[stable]\n+pub mod v1;"}, {"sha": "8c4189c37e75c2153c3359bfae5940e0e572c3bd", "filename": "src/libstd/prelude/v1.rs", "status": "added", "additions": 50, "deletions": 0, "changes": 50, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fprelude%2Fv1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fprelude%2Fv1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fprelude%2Fv1.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -0,0 +1,50 @@\n+// Copyright 2013 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+//! The first version of the prelude of the standard library.\n+\n+#![stable]\n+\n+// Reexported core operators\n+#[stable] #[doc(no_inline)] pub use kinds::{Copy, Send, Sized, Sync};\n+#[stable] #[doc(no_inline)] pub use ops::{Drop, Fn, FnMut, FnOnce};\n+\n+// Reexported functions\n+#[stable] #[doc(no_inline)] pub use mem::drop;\n+\n+// Reexported types and traits\n+\n+#[stable] #[doc(no_inline)] pub use boxed::Box;\n+#[stable] #[doc(no_inline)] pub use char::{Char, UnicodeChar};\n+#[stable] #[doc(no_inline)] pub use clone::Clone;\n+#[stable] #[doc(no_inline)] pub use cmp::{PartialEq, PartialOrd, Eq, Ord};\n+#[stable] #[doc(no_inline)] pub use iter::CloneIteratorExt;\n+#[stable] #[doc(no_inline)] pub use iter::DoubleEndedIterator;\n+#[stable] #[doc(no_inline)] pub use iter::DoubleEndedIteratorExt;\n+#[stable] #[doc(no_inline)] pub use iter::ExactSizeIterator;\n+#[stable] #[doc(no_inline)] pub use iter::{Iterator, IteratorExt, Extend};\n+#[stable] #[doc(no_inline)] pub use iter::{IteratorCloneExt, IteratorOrdExt};\n+#[stable] #[doc(no_inline)] pub use option::Option::{mod, Some, None};\n+#[stable] #[doc(no_inline)] pub use ptr::{RawPtr, RawMutPtr};\n+#[stable] #[doc(no_inline)] pub use result::Result::{mod, Ok, Err};\n+#[stable] #[doc(no_inline)] pub use slice::AsSlice;\n+#[stable] #[doc(no_inline)] pub use slice::{BoxedSliceExt, SliceExt};\n+#[stable] #[doc(no_inline)] pub use slice::{CloneSliceExt, OrdSliceExt};\n+#[stable] #[doc(no_inline)] pub use slice::{VectorVector, PartialEqSliceExt};\n+#[stable] #[doc(no_inline)] pub use str::{Str, StrVector, StrExt};\n+#[stable] #[doc(no_inline)] pub use string::{String, ToString};\n+#[stable] #[doc(no_inline)] pub use vec::Vec;\n+\n+// NB: remove when path reform lands\n+#[doc(no_inline)] pub use path::{Path, GenericPath};\n+// NB: remove when I/O reform lands\n+#[doc(no_inline)] pub use io::{Buffer, Writer, Reader, Seek, BufferPrelude};\n+// NB: remove when range syntax lands\n+#[doc(no_inline)] pub use iter::range;"}, {"sha": "4371fe7e59a010c6cf98f2d8def97daa1c017466", "filename": "src/libstd/rand/mod.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Frand%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Frand%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Frand%2Fmod.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -419,7 +419,7 @@ pub fn sample<T, I: Iterator<T>, R: Rng>(rng: &mut R,\n \n #[cfg(test)]\n mod test {\n-    use prelude::*;\n+    use prelude::v1::*;\n     use super::{Rng, task_rng, random, SeedableRng, StdRng, sample};\n     use iter::order;\n \n@@ -615,7 +615,7 @@ static RAND_BENCH_N: u64 = 100;\n #[cfg(test)]\n mod bench {\n     extern crate test;\n-    use prelude::*;\n+    use prelude::v1::*;\n \n     use self::test::Bencher;\n     use super::{XorShiftRng, StdRng, IsaacRng, Isaac64Rng, Rng, RAND_BENCH_N};"}, {"sha": "95238c0dad9164f80fcf2502c353a2ae7d4b5984", "filename": "src/libstd/rand/os.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Frand%2Fos.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Frand%2Fos.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Frand%2Fos.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -335,10 +335,11 @@ mod imp {\n \n #[cfg(test)]\n mod test {\n-    use prelude::*;\n+    use prelude::v1::*;\n \n-    use super::OsRng;\n+    use comm::channel;\n     use rand::Rng;\n+    use super::OsRng;\n     use thread::Thread;\n \n     #[test]"}, {"sha": "642ab3d1e8674f97c49dd62ff921bc01b33fa15f", "filename": "src/libstd/rand/reader.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Frand%2Freader.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Frand%2Freader.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Frand%2Freader.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -74,7 +74,7 @@ impl<R: Reader> Rng for ReaderRng<R> {\n \n #[cfg(test)]\n mod test {\n-    use prelude::*;\n+    use prelude::v1::*;\n \n     use super::ReaderRng;\n     use io::MemReader;"}, {"sha": "1fedf9652a000c5f995243a9b323aaa49899c727", "filename": "src/libstd/rt/args.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Frt%2Fargs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Frt%2Fargs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Frt%2Fargs.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -44,7 +44,7 @@ pub fn clone() -> Option<Vec<Vec<u8>>> { imp::clone() }\n           target_os = \"freebsd\",\n           target_os = \"dragonfly\"))]\n mod imp {\n-    use prelude::*;\n+    use prelude::v1::*;\n \n     use mem;\n     use slice;\n@@ -107,7 +107,7 @@ mod imp {\n \n     #[cfg(test)]\n     mod tests {\n-        use prelude::*;\n+        use prelude::v1::*;\n         use finally::Finally;\n \n         use super::*;"}, {"sha": "d4101bb215219018f3837bf03a37b4caa90cc6e5", "filename": "src/libstd/rt/backtrace.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Frt%2Fbacktrace.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Frt%2Fbacktrace.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Frt%2Fbacktrace.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -12,7 +12,7 @@\n \n #![allow(non_camel_case_types)]\n \n-use prelude::*;\n+use prelude::v1::*;\n \n use os;\n use sync::atomic;\n@@ -39,7 +39,7 @@ pub fn log_enabled() -> bool {\n \n #[cfg(test)]\n mod test {\n-    use prelude::*;\n+    use prelude::v1::*;\n     use sys_common;\n     macro_rules! t { ($a:expr, $b:expr) => ({\n         let mut m = Vec::new();"}, {"sha": "eb6b36554445767def015a22d71dfaf61abdfece", "filename": "src/libstd/rt/exclusive.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Frt%2Fexclusive.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Frt%2Fexclusive.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Frt%2Fexclusive.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -83,7 +83,7 @@ impl<'a, T: Send> DerefMut<T> for ExclusiveGuard<'a, T> {\n \n #[cfg(test)]\n mod tests {\n-    use prelude::*;\n+    use prelude::v1::*;\n     use sync::Arc;\n     use super::Exclusive;\n     use task;"}, {"sha": "eb446edbbd8d8ec7b113f7fa38973b8bae903824", "filename": "src/libstd/rt/mod.rs", "status": "modified", "additions": 7, "deletions": 6, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Frt%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Frt%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Frt%2Fmod.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -23,14 +23,10 @@\n \n #![allow(dead_code)]\n \n-use os;\n-use thunk::Thunk;\n use kinds::Send;\n-use thread::Thread;\n use ops::FnOnce;\n use sys;\n-use sys_common;\n-use sys_common::thread_info::{mod, NewThread};\n+use thunk::Thunk;\n \n // Reexport some of our utilities which are expected by other crates.\n pub use self::util::{default_sched_threads, min_stack, running_on_valgrind};\n@@ -65,9 +61,14 @@ const OS_DEFAULT_STACK_ESTIMATE: uint = 2 * (1 << 20);\n #[cfg(not(test))]\n #[lang = \"start\"]\n fn lang_start(main: *const u8, argc: int, argv: *const *const u8) -> int {\n+    use prelude::v1::*;\n+\n     use mem;\n-    use prelude::*;\n+    use os;\n     use rt;\n+    use sys_common::thread_info::{mod, NewThread};\n+    use sys_common;\n+    use thread::Thread;\n \n     let something_around_the_top_of_the_stack = 1;\n     let addr = &something_around_the_top_of_the_stack as *const int;"}, {"sha": "a8d5216e2028157cbeaeb8ea12e94ae1e55da2db", "filename": "src/libstd/rt/task.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Frt%2Ftask.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Frt%2Ftask.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Frt%2Ftask.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -496,7 +496,7 @@ impl Death {\n #[cfg(test)]\n mod test {\n     use super::*;\n-    use prelude::*;\n+    use prelude::v1::*;\n     use task;\n     use rt::unwind;\n "}, {"sha": "8c35eb58284262b0f7df43e2fc93df4ac9d5f90f", "filename": "src/libstd/rt/unwind.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Frt%2Funwind.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Frt%2Funwind.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Frt%2Funwind.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -57,7 +57,7 @@\n //!\n //! Currently Rust uses unwind runtime provided by libgcc.\n \n-use prelude::*;\n+use prelude::v1::*;\n \n use any::Any;\n use cell::Cell;"}, {"sha": "d6c0e4a5aea555be6fd13827d45412240e8115fa", "filename": "src/libstd/rt/util.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Frt%2Futil.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Frt%2Futil.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Frt%2Futil.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -10,13 +10,12 @@\n //\n // ignore-lexer-test FIXME #15677\n \n-use prelude::*;\n+use prelude::v1::*;\n \n use cmp;\n use fmt;\n use intrinsics;\n-use libc::uintptr_t;\n-use libc;\n+use libc::{mod, uintptr_t};\n use os;\n use slice;\n use str;"}, {"sha": "5d45836af80ed2f2171e952e6bf01a11dc3c6899", "filename": "src/libstd/sync/atomic.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsync%2Fatomic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsync%2Fatomic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsync%2Fatomic.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -180,7 +180,7 @@ impl<T: Send> Drop for AtomicOption<T> {\n \n #[cfg(test)]\n mod test {\n-    use prelude::*;\n+    use prelude::v1::*;\n     use super::*;\n \n     #[test]"}, {"sha": "15a682ad3b8062bab267915eb445a1ac5fdc2284", "filename": "src/libstd/sync/barrier.rs", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsync%2Fbarrier.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsync%2Fbarrier.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsync%2Fbarrier.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -89,10 +89,11 @@ impl Barrier {\n \n #[cfg(test)]\n mod tests {\n-    use prelude::*;\n+    use prelude::v1::*;\n \n     use sync::{Arc, Barrier};\n-    use comm::Empty;\n+    use comm::{channel, Empty};\n+    use thread::Thread;\n \n     #[test]\n     fn test_barrier() {\n@@ -102,10 +103,10 @@ mod tests {\n         for _ in range(0u, 9) {\n             let c = barrier.clone();\n             let tx = tx.clone();\n-            spawn(move|| {\n+            Thread::spawn(move|| {\n                 c.wait();\n                 tx.send(true);\n-            });\n+            }).detach();\n         }\n \n         // At this point, all spawned tasks should be blocked,"}, {"sha": "984b895b31d1eda6e01196a5df094b007e2602b1", "filename": "src/libstd/sync/condvar.rs", "status": "modified", "additions": 10, "deletions": 8, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsync%2Fcondvar.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsync%2Fcondvar.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsync%2Fcondvar.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-use prelude::*;\n+use prelude::v1::*;\n \n use sync::atomic::{mod, AtomicUint};\n use sync::{mutex, StaticMutexGuard};\n@@ -262,11 +262,13 @@ impl StaticCondvar {\n \n #[cfg(test)]\n mod tests {\n-    use prelude::*;\n+    use prelude::v1::*;\n \n-    use time::Duration;\n+    use comm::channel;\n     use super::{StaticCondvar, CONDVAR_INIT};\n     use sync::{StaticMutex, MUTEX_INIT, Condvar, Mutex, Arc};\n+    use thread::Thread;\n+    use time::Duration;\n \n     #[test]\n     fn smoke() {\n@@ -289,7 +291,7 @@ mod tests {\n         static M: StaticMutex = MUTEX_INIT;\n \n         let g = M.lock();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let _g = M.lock();\n             C.notify_one();\n         });\n@@ -307,7 +309,7 @@ mod tests {\n         for _ in range(0, N) {\n             let data = data.clone();\n             let tx = tx.clone();\n-            spawn(move|| {\n+            Thread::spawn(move|| {\n                 let &(ref lock, ref cond) = &*data;\n                 let mut cnt = lock.lock();\n                 *cnt += 1;\n@@ -318,7 +320,7 @@ mod tests {\n                     cond.wait(&cnt);\n                 }\n                 tx.send(());\n-            });\n+            }).detach();\n         }\n         drop(tx);\n \n@@ -341,7 +343,7 @@ mod tests {\n \n         let g = M.lock();\n         assert!(!C.wait_timeout(&g, Duration::nanoseconds(1000)));\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let _g = M.lock();\n             C.notify_one();\n         });\n@@ -358,7 +360,7 @@ mod tests {\n         static C: StaticCondvar = CONDVAR_INIT;\n \n         let g = M1.lock();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let _g = M1.lock();\n             C.notify_one();\n         });"}, {"sha": "a0e7236b8d29a69ce3ec208c1b28d82f22f257a5", "filename": "src/libstd/sync/future.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsync%2Ffuture.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsync%2Ffuture.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsync%2Ffuture.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -150,9 +150,10 @@ impl<A:Send> Future<A> {\n \n #[cfg(test)]\n mod test {\n-    use prelude::*;\n+    use prelude::v1::*;\n+    use comm::channel;\n     use sync::Future;\n-    use task;\n+    use thread::Thread;\n \n     #[test]\n     fn test_from_value() {\n@@ -210,7 +211,7 @@ mod test {\n         let expected = \"schlorf\";\n         let (tx, rx) = channel();\n         let f = Future::spawn(move|| { expected });\n-        task::spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let mut f = f;\n             tx.send(f.get());\n         });"}, {"sha": "87a02bd4ef5f5b0106a5c545e39bd2fd46cab802", "filename": "src/libstd/sync/mutex.rs", "status": "modified", "additions": 13, "deletions": 9, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsync%2Fmutex.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsync%2Fmutex.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsync%2Fmutex.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,10 +8,11 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-use prelude::*;\n+use prelude::v1::*;\n \n use cell::UnsafeCell;\n use kinds::marker;\n+use ops::{Deref, DerefMut};\n use sync::{poison, AsMutexGuard};\n use sys_common::mutex as sys;\n \n@@ -36,6 +37,8 @@ use sys_common::mutex as sys;\n /// ```rust\n /// use std::sync::{Arc, Mutex};\n /// use std::thread::Thread;\n+/// use std::comm::channel;\n+///\n /// const N: uint = 10;\n ///\n /// // Spawn a few threads to increment a shared variable (non-atomically), and\n@@ -279,10 +282,11 @@ impl Drop for StaticMutexGuard {\n \n #[cfg(test)]\n mod test {\n-    use prelude::*;\n+    use prelude::v1::*;\n \n-    use thread::Thread;\n+    use comm::channel;\n     use sync::{Arc, Mutex, StaticMutex, MUTEX_INIT, Condvar};\n+    use thread::Thread;\n \n     struct Packet<T>(Arc<(Mutex<T>, Condvar)>);\n \n@@ -325,9 +329,9 @@ mod test {\n         let (tx, rx) = channel();\n         for _ in range(0, K) {\n             let tx2 = tx.clone();\n-            spawn(move|| { inc(); tx2.send(()); });\n+            Thread::spawn(move|| { inc(); tx2.send(()); }).detach();\n             let tx2 = tx.clone();\n-            spawn(move|| { inc(); tx2.send(()); });\n+            Thread::spawn(move|| { inc(); tx2.send(()); }).detach();\n         }\n \n         drop(tx);\n@@ -351,7 +355,7 @@ mod test {\n         let packet = Packet(Arc::new((Mutex::new(false), Condvar::new())));\n         let packet2 = Packet(packet.0.clone());\n         let (tx, rx) = channel();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             // wait until parent gets in\n             rx.recv();\n             let &(ref lock, ref cvar) = &*packet2.0;\n@@ -376,7 +380,7 @@ mod test {\n         let packet2 = Packet(packet.0.clone());\n         let (tx, rx) = channel();\n \n-        spawn(move|| {\n+        let _t = Thread::spawn(move || -> () {\n             rx.recv();\n             let &(ref lock, ref cvar) = &*packet2.0;\n             let _g = lock.lock();\n@@ -413,9 +417,9 @@ mod test {\n         let arc = Arc::new(Mutex::new(1i));\n         let arc2 = Arc::new(Mutex::new(arc));\n         let (tx, rx) = channel();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let lock = arc2.lock();\n-            let lock2 = lock.deref().lock();\n+            let lock2 = lock.lock();\n             assert_eq!(*lock2, 1);\n             tx.send(());\n         });"}, {"sha": "fe25eca03d7cf6cfa388eee60de31c5768f04363", "filename": "src/libstd/sync/once.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsync%2Fonce.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsync%2Fonce.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsync%2Fonce.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -122,10 +122,11 @@ impl Once {\n \n #[cfg(test)]\n mod test {\n-    use prelude::*;\n+    use prelude::v1::*;\n \n     use thread::Thread;\n     use super::{ONCE_INIT, Once};\n+    use comm::channel;\n \n     #[test]\n     fn smoke_once() {\n@@ -145,7 +146,7 @@ mod test {\n         let (tx, rx) = channel();\n         for _ in range(0u, 10) {\n             let tx = tx.clone();\n-            spawn(move|| {\n+            Thread::spawn(move|| {\n                 for _ in range(0u, 4) { Thread::yield_now() }\n                 unsafe {\n                     O.doit(|| {\n@@ -155,7 +156,7 @@ mod test {\n                     assert!(run);\n                 }\n                 tx.send(());\n-            });\n+            }).detach();\n         }\n \n         unsafe {"}, {"sha": "b316cd908b6c625966daacc515dd9b490340e677", "filename": "src/libstd/sync/rwlock.rs", "status": "modified", "additions": 8, "deletions": 6, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsync%2Frwlock.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsync%2Frwlock.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsync%2Frwlock.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,12 +8,13 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-use prelude::*;\n+use prelude::v1::*;\n \n-use kinds::marker;\n use cell::UnsafeCell;\n-use sys_common::rwlock as sys;\n+use kinds::marker;\n+use ops::{Deref, DerefMut};\n use sync::poison;\n+use sys_common::rwlock as sys;\n \n /// A reader-writer lock\n ///\n@@ -359,9 +360,10 @@ impl Drop for StaticRWLockWriteGuard {\n \n #[cfg(test)]\n mod tests {\n-    use prelude::*;\n+    use prelude::v1::*;\n \n     use rand::{mod, Rng};\n+    use comm::channel;\n     use thread::Thread;\n     use sync::{Arc, RWLock, StaticRWLock, RWLOCK_INIT};\n \n@@ -393,7 +395,7 @@ mod tests {\n         let (tx, rx) = channel::<()>();\n         for _ in range(0, N) {\n             let tx = tx.clone();\n-            spawn(move|| {\n+            Thread::spawn(move|| {\n                 let mut rng = rand::task_rng();\n                 for _ in range(0, M) {\n                     if rng.gen_weighted_bool(N) {\n@@ -403,7 +405,7 @@ mod tests {\n                     }\n                 }\n                 drop(tx);\n-            });\n+            }).detach();\n         }\n         drop(tx);\n         let _ = rx.recv_opt();"}, {"sha": "382caa2cf4a9d9516f71adefe63587b9d3c8c79e", "filename": "src/libstd/sync/semaphore.rs", "status": "modified", "additions": 9, "deletions": 7, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsync%2Fsemaphore.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsync%2Fsemaphore.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsync%2Fsemaphore.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -104,10 +104,12 @@ impl<'a> Drop for SemaphoreGuard<'a> {\n \n #[cfg(test)]\n mod tests {\n-    use prelude::*;\n+    use prelude::v1::*;\n \n     use sync::Arc;\n     use super::Semaphore;\n+    use comm::channel;\n+    use thread::Thread;\n \n     #[test]\n     fn test_sem_acquire_release() {\n@@ -127,7 +129,7 @@ mod tests {\n     fn test_sem_as_mutex() {\n         let s = Arc::new(Semaphore::new(1));\n         let s2 = s.clone();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let _g = s2.access();\n         });\n         let _g = s.access();\n@@ -139,7 +141,7 @@ mod tests {\n         let (tx, rx) = channel();\n         let s = Arc::new(Semaphore::new(0));\n         let s2 = s.clone();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             s2.acquire();\n             tx.send(());\n         });\n@@ -150,7 +152,7 @@ mod tests {\n         let (tx, rx) = channel();\n         let s = Arc::new(Semaphore::new(0));\n         let s2 = s.clone();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             s2.release();\n             let _ = rx.recv();\n         });\n@@ -166,7 +168,7 @@ mod tests {\n         let s2 = s.clone();\n         let (tx1, rx1) = channel();\n         let (tx2, rx2) = channel();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             let _g = s2.access();\n             let _ = rx2.recv();\n             tx1.send(());\n@@ -183,11 +185,11 @@ mod tests {\n         let (tx, rx) = channel();\n         {\n             let _g = s.access();\n-            spawn(move|| {\n+            Thread::spawn(move|| {\n                 tx.send(());\n                 drop(s2.access());\n                 tx.send(());\n-            });\n+            }).detach();\n             rx.recv(); // wait for child to come alive\n         }\n         rx.recv(); // wait for child to be done"}, {"sha": "ce7e883e80357ea6436cb06e59d435beed5861ba", "filename": "src/libstd/sync/task_pool.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsync%2Ftask_pool.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsync%2Ftask_pool.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsync%2Ftask_pool.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -53,8 +53,9 @@ impl<'a> Drop for Sentinel<'a> {\n /// # Example\n ///\n /// ```rust\n-/// # use std::sync::TaskPool;\n-/// # use std::iter::AdditiveIterator;\n+/// use std::sync::TaskPool;\n+/// use std::iter::AdditiveIterator;\n+/// use std::comm::channel;\n ///\n /// let pool = TaskPool::new(4u);\n ///\n@@ -131,8 +132,9 @@ fn spawn_in_pool(jobs: Arc<Mutex<Receiver<Thunk>>>) {\n \n #[cfg(test)]\n mod test {\n-    use prelude::*;\n+    use prelude::v1::*;\n     use super::*;\n+    use comm::channel;\n \n     const TEST_TASKS: uint = 4u;\n "}, {"sha": "c1aace764fc62fc7e76a1ffdcf5bda4bd1730ba7", "filename": "src/libstd/sys/common/backtrace.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Fcommon%2Fbacktrace.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Fcommon%2Fbacktrace.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fcommon%2Fbacktrace.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-use prelude::*;\n+use prelude::v1::*;\n \n use io::IoResult;\n "}, {"sha": "5d94e8efeb86c771c9b1c4fe037e5e71bbc92476", "filename": "src/libstd/sys/common/helper_thread.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Fcommon%2Fhelper_thread.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Fcommon%2Fhelper_thread.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fcommon%2Fhelper_thread.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -20,12 +20,13 @@\n //! can be created in the future and there must be no active timers at that\n //! time.\n \n-use prelude::*;\n+use prelude::v1::*;\n \n use cell::UnsafeCell;\n+use comm::{channel, Sender, Receiver};\n use mem;\n-use sync::{StaticMutex, StaticCondvar};\n use rt;\n+use sync::{StaticMutex, StaticCondvar};\n use sys::helper_signal;\n \n use thread::Thread;"}, {"sha": "97015f74a4a10bec8df2662fea0fbd77c0dc9b90", "filename": "src/libstd/sys/common/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Fcommon%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Fcommon%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fcommon%2Fmod.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -12,7 +12,7 @@\n #![allow(dead_code)]\n \n use io::{mod, IoError, IoResult};\n-use prelude::*;\n+use prelude::v1::*;\n use sys::{last_error, retry};\n use c_str::CString;\n use num::Int;"}, {"sha": "9ab5077ae79a89aa4f231845f875509b5fff5704", "filename": "src/libstd/sys/common/net.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Fcommon%2Fnet.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Fcommon%2Fnet.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fcommon%2Fnet.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,23 +8,23 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use prelude::v1::*;\n use self::SocketStatus::*;\n use self::InAddr::*;\n \n-use alloc::arc::Arc;\n+use c_str::ToCStr;\n+use io::net::addrinfo;\n+use io::net::ip::{SocketAddr, IpAddr, Ipv4Addr, Ipv6Addr};\n+use io::{IoResult, IoError};\n use libc::{mod, c_char, c_int};\n use mem;\n use num::Int;\n use ptr::{mod, null, null_mut};\n-use io::net::ip::{SocketAddr, IpAddr, Ipv4Addr, Ipv6Addr};\n-use io::net::addrinfo;\n-use io::{IoResult, IoError};\n use sys::{mod, retry, c, sock_t, last_error, last_net_error, last_gai_error, close_sock,\n           wrlen, msglen_t, os, wouldblock, set_nonblocking, timer, ms_to_timeval,\n           decode_error_detailed};\n-use sync::{Mutex, MutexGuard};\n+use sync::{Arc, Mutex, MutexGuard};\n use sys_common::{mod, keep_going, short_write, timeout};\n-use prelude::*;\n use cmp;\n use io;\n "}, {"sha": "405dd4eacf3993a7f74da26d9b0f0490542941ec", "filename": "src/libstd/sys/common/thread_local.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Fcommon%2Fthread_local.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Fcommon%2Fthread_local.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fcommon%2Fthread_local.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -56,7 +56,7 @@\n \n #![allow(non_camel_case_types)]\n \n-use prelude::*;\n+use prelude::v1::*;\n \n use sync::atomic::{mod, AtomicUint};\n use sync::{Mutex, Once, ONCE_INIT};\n@@ -246,7 +246,7 @@ impl Drop for Key {\n \n #[cfg(test)]\n mod tests {\n-    use prelude::*;\n+    use prelude::v1::*;\n     use super::{Key, StaticKey, INIT_INNER};\n \n     fn assert_sync<T: Sync>() {}"}, {"sha": "d537579d45386e54d67813ed1057e96405e84a77", "filename": "src/libstd/sys/unix/fs.rs", "status": "modified", "additions": 6, "deletions": 7, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Funix%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Funix%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Funix%2Ffs.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -10,16 +10,15 @@\n \n //! Blocking posix-based file I/O\n \n-use libc::{mod, c_int, c_void};\n-use c_str::CString;\n-use mem;\n-use io;\n-\n-use prelude::*;\n+use prelude::v1::*;\n \n+use c_str::{CString, ToCStr};\n use io::{FilePermission, Write, UnstableFileStat, Open, FileAccess, FileMode};\n use io::{IoResult, FileStat, SeekStyle};\n use io::{Read, Truncate, SeekCur, SeekSet, ReadWrite, SeekEnd, Append};\n+use io;\n+use libc::{mod, c_int, c_void};\n+use mem;\n use sys::retry;\n use sys_common::{keep_going, eof, mkerr_libc};\n \n@@ -360,7 +359,7 @@ mod tests {\n     use super::FileDesc;\n     use libc;\n     use os;\n-    use prelude::*;\n+    use prelude::v1::*;\n \n     #[cfg_attr(target_os = \"freebsd\", ignore)] // hmm, maybe pipes have a tiny buffer\n     #[test]"}, {"sha": "15dad8107561e755f17e5472f11fc5fc514bc0d3", "filename": "src/libstd/sys/unix/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Funix%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Funix%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Funix%2Fmod.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -19,7 +19,7 @@ extern crate libc;\n \n use num;\n use num::{Int, SignedInt};\n-use prelude::*;\n+use prelude::v1::*;\n use io::{mod, IoResult, IoError};\n use sys_common::mkerr_libc;\n "}, {"sha": "a221a6bc15bb68be96d72f8247f2fe369ea59965", "filename": "src/libstd/sys/unix/os.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Funix%2Fos.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Funix%2Fos.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Funix%2Fos.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -10,17 +10,18 @@\n \n //! Implementation of `std::os` functionality for unix systems\n \n-use prelude::*;\n+use prelude::v1::*;\n \n+use c_str::ToCStr;\n use error::{FromError, Error};\n use fmt;\n use io::{IoError, IoResult};\n use libc::{mod, c_int, c_char, c_void};\n-use path::BytesContainer;\n+use os;\n+use path::{BytesContainer};\n use ptr;\n use sync::atomic::{AtomicInt, INIT_ATOMIC_INT, SeqCst};\n use sys::fs::FileDesc;\n-use os;\n \n use os::TMPBUF_SZ;\n "}, {"sha": "6954866257ebf872ea6d57e04013d93949f7d9e3", "filename": "src/libstd/sys/unix/pipe.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Funix%2Fpipe.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Funix%2Fpipe.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Funix%2Fpipe.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,13 +8,13 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-use alloc::arc::Arc;\n+use prelude::v1::*;\n+\n use libc;\n use c_str::CString;\n use mem;\n-use sync::{atomic, Mutex};\n+use sync::{atomic, Arc, Mutex};\n use io::{mod, IoResult, IoError};\n-use prelude::*;\n \n use sys::{mod, timer, retry, c, set_nonblocking, wouldblock};\n use sys::fs::{fd_t, FileDesc};"}, {"sha": "9824c9c7364f10188d9e6df48b2dd0645977653d", "filename": "src/libstd/sys/unix/process.rs", "status": "modified", "additions": 10, "deletions": 9, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Funix%2Fprocess.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Funix%2Fprocess.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Funix%2Fprocess.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -7,22 +7,23 @@\n // <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n+\n+use prelude::v1::*;\n use self::Req::*;\n \n-use libc::{mod, pid_t, c_void, c_int};\n-use c_str::CString;\n+use c_str::{CString, ToCStr};\n+use collections;\n+use comm::{channel, Sender, Receiver};\n+use hash::Hash;\n+use io::process::{ProcessExit, ExitStatus, ExitSignal};\n use io::{mod, IoResult, IoError, EndOfFile};\n+use libc::{mod, pid_t, c_void, c_int};\n use mem;\n use os;\n-use ptr;\n-use prelude::*;\n-use io::process::{ProcessExit, ExitStatus, ExitSignal};\n-use collections;\n use path::BytesContainer;\n-use hash::Hash;\n-\n-use sys::{mod, retry, c, wouldblock, set_nonblocking, ms_to_timeval};\n+use ptr;\n use sys::fs::FileDesc;\n+use sys::{mod, retry, c, wouldblock, set_nonblocking, ms_to_timeval};\n use sys_common::helper_thread::Helper;\n use sys_common::{AsInner, mkerr_libc, timeout};\n "}, {"sha": "13ccf685fd7fc5b0a1e7c321406bce03ab539b10", "filename": "src/libstd/sys/unix/tcp.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Funix%2Ftcp.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Funix%2Ftcp.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Funix%2Ftcp.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,12 +8,13 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use prelude::v1::*;\n+\n use io::net::ip;\n use io::IoResult;\n use libc;\n use mem;\n use ptr;\n-use prelude::*;\n use super::{last_error, last_net_error, retry, sock_t};\n use sync::{Arc, atomic};\n use sys::fs::FileDesc;"}, {"sha": "e507377a8fcdd880a01c5b98ee53145a7463cfaa", "filename": "src/libstd/sys/unix/thread_local.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Funix%2Fthread_local.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Funix%2Fthread_local.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Funix%2Fthread_local.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-use prelude::*;\n+use prelude::v1::*;\n use libc::c_int;\n \n pub type Key = pthread_key_t;"}, {"sha": "903c4954f6fa71fc6f23a91bedfcf68f2cf2443b", "filename": "src/libstd/sys/unix/timer.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Funix%2Ftimer.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Funix%2Ftimer.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Funix%2Ftimer.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -46,19 +46,19 @@\n //!\n //! Note that all time units in this file are in *milliseconds*.\n \n+use prelude::v1::*;\n use self::Req::*;\n \n+use comm::{mod, channel, Sender, Receiver};\n+use io::IoResult;\n use libc;\n use mem;\n use os;\n use ptr;\n use sync::atomic;\n-use comm;\n use sys::c;\n use sys::fs::FileDesc;\n use sys_common::helper_thread::Helper;\n-use prelude::*;\n-use io::IoResult;\n \n helper_init! { static HELPER: Helper<Req> }\n "}, {"sha": "4ef687d41d8ee70a23c7fd51099885bcc7c58ffe", "filename": "src/libstd/sys/unix/tty.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Funix%2Ftty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Funix%2Ftty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Funix%2Ftty.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,8 +8,9 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use prelude::v1::*;\n+\n use sys::fs::FileDesc;\n-use prelude::*;\n use libc::{mod, c_int};\n use io::{mod, IoResult, IoError};\n use sys_common;"}, {"sha": "d1177776dd8b164ac32b2fbcc858fcf8488f0eb5", "filename": "src/libstd/sys/windows/c.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Fwindows%2Fc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Fwindows%2Fc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwindows%2Fc.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -15,7 +15,7 @@\n #![allow(non_camel_case_types)]\n \n use libc;\n-use prelude::*;\n+use prelude::v1::*;\n \n pub const WSADESCRIPTION_LEN: uint = 256;\n pub const WSASYS_STATUS_LEN: uint = 128;\n@@ -133,7 +133,7 @@ pub mod compat {\n     use intrinsics::{atomic_store_relaxed, transmute};\n     use iter::IteratorExt;\n     use libc::types::os::arch::extra::{LPCWSTR, HMODULE, LPCSTR, LPVOID};\n-    use prelude::*;\n+    use prelude::v1::*;\n \n     extern \"system\" {\n         fn GetModuleHandleW(lpModuleName: LPCWSTR) -> HMODULE;"}, {"sha": "632261f0ad92109d3d368ede9f19f136a18c62c5", "filename": "src/libstd/sys/windows/fs.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Fwindows%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Fwindows%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwindows%2Ffs.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -21,7 +21,7 @@ use ptr;\n use str;\n use io;\n \n-use prelude::*;\n+use prelude::v1::*;\n use sys;\n use sys::os;\n use sys_common::{keep_going, eof, mkerr_libc};"}, {"sha": "94f5822ccea32f047c90502efa4b323877b18cfd", "filename": "src/libstd/sys/windows/mod.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Fwindows%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Fwindows%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwindows%2Fmod.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -18,9 +18,10 @@\n \n extern crate libc;\n \n+use prelude::v1::*;\n+\n use num;\n use mem;\n-use prelude::*;\n use io::{mod, IoResult, IoError};\n use sync::{Once, ONCE_INIT};\n "}, {"sha": "c7b4a4cec09ecceafe8035b2d130cf1db2adb928", "filename": "src/libstd/sys/windows/mutex.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Fwindows%2Fmutex.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Fwindows%2Fmutex.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwindows%2Fmutex.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-use prelude::*;\n+use prelude::v1::*;\n \n use sync::atomic;\n use alloc::{mod, heap};"}, {"sha": "159512525d8b39af61f2958bbcdaa17ed29273fb", "filename": "src/libstd/sys/windows/os.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Fwindows%2Fos.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Fwindows%2Fos.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwindows%2Fos.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -13,7 +13,7 @@\n // FIXME: move various extern bindings from here into liblibc or\n // something similar\n \n-use prelude::*;\n+use prelude::v1::*;\n \n use fmt;\n use io::{IoResult, IoError};"}, {"sha": "f173d5fc6d4cb5843abce61eff584eba5c5df3b4", "filename": "src/libstd/sys/windows/pipe.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Fwindows%2Fpipe.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Fwindows%2Fpipe.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwindows%2Fpipe.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -84,14 +84,14 @@\n //! the test suite passing (the suite is in libstd), and that's good enough for\n //! me!\n \n-use alloc::arc::Arc;\n+use prelude::v1::*;\n+\n use libc;\n use c_str::CString;\n use mem;\n use ptr;\n-use sync::{atomic, Mutex};\n+use sync::{atomic, Arc, Mutex};\n use io::{mod, IoError, IoResult};\n-use prelude::*;\n \n use sys_common::{mod, eof};\n "}, {"sha": "f99995eb028a2cf4ea289ab2919ebc5aad7220d0", "filename": "src/libstd/sys/windows/process.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Fwindows%2Fprocess.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Fwindows%2Fprocess.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwindows%2Fprocess.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,14 +8,15 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use prelude::v1::*;\n+\n use libc::{pid_t, c_void, c_int};\n use libc;\n use c_str::CString;\n use io;\n use mem;\n use os;\n use ptr;\n-use prelude::*;\n use io::process::{ProcessExit, ExitStatus, ExitSignal};\n use collections;\n use path::BytesContainer;\n@@ -469,7 +470,7 @@ mod tests {\n \n     #[test]\n     fn test_make_command_line() {\n-        use prelude::*;\n+        use prelude::v1::*;\n         use str;\n         use c_str::CString;\n         use super::make_command_line;"}, {"sha": "5a929f6b2b5ff27aafed24204c774ad654d638c0", "filename": "src/libstd/sys/windows/tcp.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Fwindows%2Ftcp.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Fwindows%2Ftcp.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwindows%2Ftcp.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -13,7 +13,7 @@ use io::IoResult;\n use libc;\n use mem;\n use ptr;\n-use prelude::*;\n+use prelude::v1::*;\n use super::{last_error, last_net_error, retry, sock_t};\n use sync::{Arc, atomic};\n use sys::fs::FileDesc;"}, {"sha": "b96e26c7a86a6feef0d49e98297187d2beaa591d", "filename": "src/libstd/sys/windows/thread_local.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Fwindows%2Fthread_local.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Fwindows%2Fthread_local.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwindows%2Fthread_local.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-use prelude::*;\n+use prelude::v1::*;\n \n use libc::types::os::arch::extra::{DWORD, LPVOID, BOOL};\n "}, {"sha": "3df0debff51ba26eefd221a403542d3bccf47e9e", "filename": "src/libstd/sys/windows/timer.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Fwindows%2Ftimer.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Fwindows%2Ftimer.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwindows%2Ftimer.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -29,7 +29,7 @@ use comm;\n use sys::c;\n use sys::fs::FileDesc;\n use sys_common::helper_thread::Helper;\n-use prelude::*;\n+use prelude::v1::*;\n use io::IoResult;\n \n helper_init! { static HELPER: Helper<Req> }"}, {"sha": "dfa3440067a6927bfc8900a24c47c1192af2e2a8", "filename": "src/libstd/sys/windows/tty.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Fwindows%2Ftty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fsys%2Fwindows%2Ftty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwindows%2Ftty.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -25,6 +25,8 @@\n //! wrapper that performs encoding/decoding, this implementation should switch\n //! to working in raw UTF-16, with such a wrapper around it.\n \n+use prelude::v1::*;\n+\n use super::c::{ReadConsoleW, WriteConsoleW, GetConsoleMode, SetConsoleMode};\n use super::c::{ERROR_ILLEGAL_CHARACTER};\n use super::c::{ENABLE_ECHO_INPUT, ENABLE_EXTENDED_FLAGS};\n@@ -34,7 +36,6 @@ use libc::{c_int, HANDLE, LPDWORD, DWORD, LPVOID};\n use libc::{get_osfhandle, CloseHandle};\n use libc::types::os::arch::extra::LPCVOID;\n use io::{mod, IoError, IoResult, MemReader};\n-use prelude::*;\n use ptr;\n use str::from_utf8;\n "}, {"sha": "fdf2648faa1c8ae45bb915417eb73e0bafb24547", "filename": "src/libstd/thread.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fthread.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fthread.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fthread.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -439,13 +439,15 @@ impl<T: Send> Drop for JoinGuard<T> {\n \n #[cfg(test)]\n mod test {\n-    use prelude::*;\n+    use prelude::v1::*;\n+\n     use any::{Any, AnyRefExt};\n     use boxed::BoxAny;\n+    use comm::{channel, Sender};\n     use result;\n     use std::io::{ChanReader, ChanWriter};\n-    use thunk::Thunk;\n     use super::{Thread, Builder};\n+    use thunk::Thunk;\n \n     // !!! These tests are dangerous. If something is buggy, they will hang, !!!\n     // !!! instead of exiting cleanly. This might wedge the buildbots.       !!!"}, {"sha": "674cb5a98057caa1733b31bd3caaed8df2224e58", "filename": "src/libstd/thread_local/mod.rs", "status": "modified", "additions": 11, "deletions": 10, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fthread_local%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fthread_local%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fthread_local%2Fmod.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -37,7 +37,7 @@\n #![macro_escape]\n #![experimental]\n \n-use prelude::*;\n+use prelude::v1::*;\n \n use cell::UnsafeCell;\n \n@@ -258,7 +258,7 @@ impl<T: 'static> Key<T> {\n \n #[cfg(any(target_os = \"macos\", target_os = \"linux\"))]\n mod imp {\n-    use prelude::*;\n+    use prelude::v1::*;\n \n     use cell::UnsafeCell;\n     use intrinsics;\n@@ -396,7 +396,7 @@ mod imp {\n \n #[cfg(not(any(target_os = \"macos\", target_os = \"linux\")))]\n mod imp {\n-    use prelude::*;\n+    use prelude::v1::*;\n \n     use cell::UnsafeCell;\n     use mem;\n@@ -469,8 +469,9 @@ mod imp {\n \n #[cfg(test)]\n mod tests {\n-    use prelude::*;\n+    use prelude::v1::*;\n \n+    use comm::{channel, Sender};\n     use cell::UnsafeCell;\n     use thread::Thread;\n \n@@ -492,7 +493,7 @@ mod tests {\n             *f.get() = 2;\n         });\n         let (tx, rx) = channel();\n-        spawn(move|| {\n+        let _t = Thread::spawn(move|| {\n             FOO.with(|f| unsafe {\n                 assert_eq!(*f.get(), 1);\n             });\n@@ -512,7 +513,7 @@ mod tests {\n         });\n \n         let (tx, rx) = channel();\n-        spawn(move|| unsafe {\n+        let _t = Thread::spawn(move|| unsafe {\n             let mut tx = Some(tx);\n             FOO.with(|f| {\n                 *f.get() = Some(Foo(tx.take().unwrap()));\n@@ -562,7 +563,7 @@ mod tests {\n \n         Thread::spawn(move|| {\n             drop(S1);\n-        }).join();\n+        }).join().ok().unwrap();\n     }\n \n     #[test]\n@@ -580,7 +581,7 @@ mod tests {\n \n         Thread::spawn(move|| unsafe {\n             K1.with(|s| *s.get() = Some(S1));\n-        }).join();\n+        }).join().ok().unwrap();\n     }\n \n     #[test]\n@@ -605,7 +606,7 @@ mod tests {\n         }\n \n         let (tx, rx) = channel();\n-        spawn(move|| unsafe {\n+        let _t = Thread::spawn(move|| unsafe {\n             let mut tx = Some(tx);\n             K1.with(|s| *s.get() = Some(S1(tx.take().unwrap())));\n         });\n@@ -615,7 +616,7 @@ mod tests {\n \n #[cfg(test)]\n mod dynamic_tests {\n-    use prelude::*;\n+    use prelude::v1::*;\n \n     use cell::RefCell;\n     use collections::HashMap;"}, {"sha": "a06048aa706f18c449eb92a9303c771f23f78142", "filename": "src/libstd/thread_local/scoped.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fthread_local%2Fscoped.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Fthread_local%2Fscoped.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fthread_local%2Fscoped.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -40,7 +40,7 @@\n \n #![macro_escape]\n \n-use prelude::*;\n+use prelude::v1::*;\n \n // macro hygiene sure would be nice, wouldn't it?\n #[doc(hidden)] pub use self::imp::KeyInner;\n@@ -238,7 +238,7 @@ mod imp {\n #[cfg(test)]\n mod tests {\n     use cell::Cell;\n-    use prelude::*;\n+    use prelude::v1::*;\n \n     #[test]\n     fn smoke() {"}, {"sha": "fc90bffa03c2f77975535bfa3a656baa62d1b687", "filename": "src/libstd/tuple.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Ftuple.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibstd%2Ftuple.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Ftuple.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -35,14 +35,14 @@\n //!\n //! # Examples\n //!\n-//! Using methods:\n+//! Using fields:\n //!\n //! ```\n //! #[allow(deprecated)]\n //! # fn main() {\n //! let pair = (\"pi\", 3.14f64);\n-//! assert_eq!(pair.val0(), \"pi\");\n-//! assert_eq!(pair.val1(), 3.14f64);\n+//! assert_eq!(pair.0, \"pi\");\n+//! assert_eq!(pair.1, 3.14f64);\n //! # }\n //! ```\n //!"}, {"sha": "042a1bd0781cfd635e3cb7d4632f61470337884f", "filename": "src/libsyntax/codemap.rs", "status": "modified", "additions": 12, "deletions": 7, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibsyntax%2Fcodemap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibsyntax%2Fcodemap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fcodemap.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -10,19 +10,24 @@\n //\n // ignore-lexer-test FIXME #15679\n \n-//! The CodeMap tracks all the source code used within a single crate, mapping from integer byte\n-//! positions to the original source code location. Each bit of source parsed during crate parsing\n-//! (typically files, in-memory strings, or various bits of macro expansion) cover a continuous\n-//! range of bytes in the CodeMap and are represented by FileMaps. Byte positions are stored in\n-//! `spans` and used pervasively in the compiler. They are absolute positions within the CodeMap,\n-//! which upon request can be converted to line and column information, source code snippets, etc.\n+//! The CodeMap tracks all the source code used within a single crate, mapping\n+//! from integer byte positions to the original source code location. Each bit\n+//! of source parsed during crate parsing (typically files, in-memory strings,\n+//! or various bits of macro expansion) cover a continuous range of bytes in the\n+//! CodeMap and are represented by FileMaps. Byte positions are stored in\n+//! `spans` and used pervasively in the compiler. They are absolute positions\n+//! within the CodeMap, which upon request can be converted to line and column\n+//! information, source code snippets, etc.\n \n pub use self::MacroFormat::*;\n \n-use serialize::{Encodable, Decodable, Encoder, Decoder};\n use std::cell::RefCell;\n+use std::num::ToPrimitive;\n+use std::ops::{Add, Sub};\n use std::rc::Rc;\n+\n use libc::c_uint;\n+use serialize::{Encodable, Decodable, Encoder, Decoder};\n \n pub trait Pos {\n     fn from_uint(n: uint) -> Self;"}, {"sha": "cafd1d60700504fd04801a466f5d51a22f3b28f6", "filename": "src/libsyntax/ext/bytes.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibsyntax%2Fext%2Fbytes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibsyntax%2Fext%2Fbytes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fbytes.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -17,6 +17,7 @@ use ext::base;\n use ext::build::AstBuilder;\n use std::ascii::AsciiExt;\n \n+use std::ascii::AsciiCast;\n \n pub fn expand_syntax_ext<'cx>(cx: &'cx mut ExtCtxt,\n                               sp: Span,"}, {"sha": "4aadc78babd0902fcc1d2e548a57e9646eff8574", "filename": "src/libsyntax/ext/quote.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibsyntax%2Fext%2Fquote.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibsyntax%2Fext%2Fquote.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fquote.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -50,8 +50,7 @@ pub mod rt {\n \n     impl<T: ToTokens> ToTokens for Vec<T> {\n         fn to_tokens(&self, cx: &ExtCtxt) -> Vec<TokenTree> {\n-            let a = self.iter().flat_map(|t| t.to_tokens(cx).into_iter());\n-            FromIterator::from_iter(a)\n+            self.iter().flat_map(|t| t.to_tokens(cx).into_iter()).collect()\n         }\n     }\n "}, {"sha": "45bd28371b58bb0e56316926a84d72c164a489da", "filename": "src/libsyntax/feature_gate.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibsyntax%2Ffeature_gate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibsyntax%2Ffeature_gate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Ffeature_gate.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -30,6 +30,7 @@ use visit;\n use visit::Visitor;\n use parse::token;\n \n+use std::ascii::AsciiCast;\n use std::slice;\n use std::ascii::AsciiExt;\n "}, {"sha": "f7d2331c9ec5850f0cf5740bbf7d0615295f766e", "filename": "src/libsyntax/owned_slice.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibsyntax%2Fowned_slice.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibsyntax%2Fowned_slice.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fowned_slice.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,8 +8,10 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-use std::fmt;\n use std::default::Default;\n+use std::fmt;\n+use std::iter::FromIterator;\n+use std::ops::Deref;\n use std::vec;\n use serialize::{Encodable, Decodable, Encoder, Decoder};\n "}, {"sha": "0f5ff33021cc94867a0f014b177896859ffd7c17", "filename": "src/libsyntax/parse/lexer/mod.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibsyntax%2Fparse%2Flexer%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibsyntax%2Fparse%2Flexer%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Flexer%2Fmod.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -16,6 +16,7 @@ use ext::tt::transcribe::tt_next_token;\n use parse::token;\n use parse::token::{str_to_ident};\n \n+use std::borrow::IntoCow;\n use std::char;\n use std::fmt;\n use std::mem::replace;\n@@ -358,7 +359,7 @@ impl<'a> StringReader<'a> {\n \n     pub fn nextnextch(&self) -> Option<char> {\n         let offset = self.byte_offset(self.pos).to_uint();\n-        let s = self.filemap.deref().src[];\n+        let s = self.filemap.src.as_slice();\n         if offset >= s.len() { return None }\n         let str::CharRange { next, .. } = s.char_range_at(offset);\n         if next < s.len() {"}, {"sha": "7b40ae85c7d796748c44add90bf0be31f7f67fec", "filename": "src/libsyntax/parse/parser.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibsyntax%2Fparse%2Fparser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibsyntax%2Fparse%2Fparser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fparser.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -84,11 +84,12 @@ use owned_slice::OwnedSlice;\n \n use std::collections::HashSet;\n use std::io::fs::PathExtensions;\n+use std::iter;\n use std::mem;\n use std::num::Float;\n use std::rc::Rc;\n-use std::iter;\n use std::slice;\n+use std::str::from_str;\n \n bitflags! {\n     flags Restrictions: u8 {"}, {"sha": "dbc0cef8340a8b59cd808b42a7c2da5e777f3b1c", "filename": "src/libsyntax/parse/token.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibsyntax%2Fparse%2Ftoken.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibsyntax%2Fparse%2Ftoken.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Ftoken.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -22,8 +22,10 @@ use util::interner::{RcStr, StrInterner};\n use util::interner;\n \n use serialize::{Decodable, Decoder, Encodable, Encoder};\n+use std::cmp::Equiv;\n use std::fmt;\n use std::mem;\n+use std::ops::Deref;\n use std::path::BytesContainer;\n use std::rc::Rc;\n "}, {"sha": "8b1aed483c34f76bc94d7d3698a95a880a475660", "filename": "src/libsyntax/ptr.rs", "status": "modified", "additions": 11, "deletions": 9, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibsyntax%2Fptr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibsyntax%2Fptr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fptr.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -10,16 +10,18 @@\n \n //! The AST pointer\n //!\n-//! Provides `P<T>`, a frozen owned smart pointer, as a replacement for `@T` in the AST.\n+//! Provides `P<T>`, a frozen owned smart pointer, as a replacement for `@T` in\n+//! the AST.\n //!\n //! # Motivations and benefits\n //!\n-//! * **Identity**: sharing AST nodes is problematic for the various analysis passes\n-//!   (e.g. one may be able to bypass the borrow checker with a shared `ExprAddrOf`\n-//!   node taking a mutable borrow). The only reason `@T` in the AST hasn't caused\n-//!   issues is because of inefficient folding passes which would always deduplicate\n-//!   any such shared nodes. Even if the AST were to switch to an arena, this would\n-//!   still hold, i.e. it couldn't use `&'a T`, but rather a wrapper like `P<'a, T>`.\n+//! * **Identity**: sharing AST nodes is problematic for the various analysis\n+//!   passes (e.g. one may be able to bypass the borrow checker with a shared\n+//!   `ExprAddrOf` node taking a mutable borrow). The only reason `@T` in the\n+//!   AST hasn't caused issues is because of inefficient folding passes which\n+//!   would always deduplicate any such shared nodes. Even if the AST were to\n+//!   switch to an arena, this would still hold, i.e. it couldn't use `&'a T`,\n+//!   but rather a wrapper like `P<'a, T>`.\n //!\n //! * **Immutability**: `P<T>` disallows mutating its inner `T`, unlike `Box<T>`\n //!   (unless it contains an `Unsafe` interior, but that may be denied later).\n@@ -34,9 +36,9 @@\n //!   implementation changes (using a special thread-local heap, for example).\n //!   Moreover, a switch to, e.g. `P<'a, T>` would be easy and mostly automated.\n \n-use std::fmt;\n-use std::fmt::Show;\n+use std::fmt::{mod, Show};\n use std::hash::Hash;\n+use std::ops::Deref;\n use std::ptr;\n use serialize::{Encodable, Decodable, Encoder, Decoder};\n "}, {"sha": "0d89403ab6c718a2fedbd2980951c8b34437591a", "filename": "src/libsyntax/std_inject.rs", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibsyntax%2Fstd_inject.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibsyntax%2Fstd_inject.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fstd_inject.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -152,15 +152,20 @@ impl<'a> fold::Folder for PreludeInjector<'a> {\n         let prelude_path = ast::Path {\n             span: DUMMY_SP,\n             global: false,\n-            segments: vec!(\n+            segments: vec![\n                 ast::PathSegment {\n                     identifier: token::str_to_ident(\"std\"),\n                     parameters: ast::PathParameters::none(),\n                 },\n                 ast::PathSegment {\n                     identifier: token::str_to_ident(\"prelude\"),\n                     parameters: ast::PathParameters::none(),\n-                }),\n+                },\n+                ast::PathSegment {\n+                    identifier: token::str_to_ident(\"v1\"),\n+                    parameters: ast::PathParameters::none(),\n+                },\n+            ],\n         };\n \n         let (crates, uses) = view_items.partitioned(|x| {"}, {"sha": "d25161a12a7419b774992d31e609c932473d1ea7", "filename": "src/libsyntax/util/interner.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibsyntax%2Futil%2Finterner.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibsyntax%2Futil%2Finterner.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Futil%2Finterner.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -15,10 +15,12 @@\n use ast::Name;\n \n use std::borrow::BorrowFrom;\n-use std::collections::HashMap;\n use std::cell::RefCell;\n+use std::cmp::Ordering;\n+use std::collections::HashMap;\n use std::fmt;\n use std::hash::Hash;\n+use std::ops::Deref;\n use std::rc::Rc;\n \n pub struct Interner<T> {"}, {"sha": "953a7ae960e8c029d27721fbb9105ea7463bab8f", "filename": "src/libsyntax/util/small_vector.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibsyntax%2Futil%2Fsmall_vector.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibsyntax%2Futil%2Fsmall_vector.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Futil%2Fsmall_vector.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -7,9 +7,11 @@\n // <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n+\n use self::SmallVectorRepr::*;\n use self::IntoIterRepr::*;\n \n+use std::iter::FromIterator;\n use std::mem;\n use std::slice;\n use std::vec;"}, {"sha": "fc9826a913cd85f446c89fce0e5df351c73495a3", "filename": "src/libtest/lib.rs", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibtest%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibtest%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibtest%2Flib.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -49,16 +49,17 @@ use self::TestEvent::*;\n use self::NamePadding::*;\n use self::OutputLocation::*;\n \n-use std::any::{Any, AnyRefExt};\n-use std::collections::BTreeMap;\n use stats::Stats;\n use getopts::{OptGroup, optflag, optopt};\n use regex::Regex;\n use serialize::{json, Decodable, Encodable};\n use term::Terminal;\n use term::color::{Color, RED, YELLOW, GREEN, CYAN};\n \n+use std::any::{Any, AnyRefExt};\n use std::cmp;\n+use std::collections::BTreeMap;\n+use std::comm::{channel, Sender};\n use std::f64;\n use std::fmt::Show;\n use std::fmt;\n@@ -69,11 +70,10 @@ use std::io;\n use std::iter::repeat;\n use std::num::{Float, FloatMath, Int};\n use std::os;\n-use std::str::FromStr;\n-use std::string::String;\n+use std::str::{FromStr, from_str};\n use std::thread::{mod, Thread};\n-use std::time::Duration;\n use std::thunk::{Thunk, Invoke};\n+use std::time::Duration;\n \n // to be used by rustc to compile tests in libtest\n pub mod test {\n@@ -1466,6 +1466,7 @@ mod tests {\n                StaticTestName, DynTestName, DynTestFn, ShouldFail};\n     use std::io::TempDir;\n     use std::thunk::Thunk;\n+    use std::comm::channel;\n \n     #[test]\n     pub fn do_not_run_ignored_tests() {"}, {"sha": "ed6a00a8e9115b9f3832fecb5d448643d9c3179f", "filename": "src/libtest/stats.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibtest%2Fstats.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibtest%2Fstats.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibtest%2Fstats.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -10,13 +10,14 @@\n \n #![allow(missing_docs)]\n \n-use std::collections::hash_map;\n+use std::cmp::Ordering::{mod, Less, Greater, Equal};\n use std::collections::hash_map::Entry::{Occupied, Vacant};\n+use std::collections::hash_map;\n use std::fmt::Show;\n use std::hash::Hash;\n use std::io;\n use std::mem;\n-use std::num::{Float, FloatMath};\n+use std::num::{Float, FloatMath, FromPrimitive};\n \n fn local_cmp<T:Float>(x: T, y: T) -> Ordering {\n     // arbitrarily decide that NaNs are larger than everything."}, {"sha": "636e4ca83a8e63c3a3c5e2d724d9b7d376e8c293", "filename": "src/libtime/lib.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibtime%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Flibtime%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibtime%2Flib.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -32,10 +32,9 @@ extern crate libc;\n pub use self::ParseError::*;\n use self::Fmt::*;\n \n-use std::fmt::Show;\n-use std::fmt;\n+use std::fmt::{mod, Show};\n use std::num::SignedInt;\n-use std::string::String;\n+use std::ops::{Add, Sub};\n use std::time::Duration;\n \n static NSEC_PER_SEC: i32 = 1_000_000_000_i32;"}, {"sha": "e3dbe3c7e225abd829a7b6e8d3efa70d4f8e2892", "filename": "src/test/auxiliary/cci_capture_clause.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fauxiliary%2Fcci_capture_clause.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fauxiliary%2Fcci_capture_clause.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fauxiliary%2Fcci_capture_clause.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -9,6 +9,7 @@\n // except according to those terms.\n \n use std::task;\n+use std::comm::{Receiver, channel};\n \n pub fn foo<T:Send + Clone>(x: T) -> Receiver<T> {\n     let (tx, rx) = channel();"}, {"sha": "ea4751bf4ed20b07c6b4871b7cfa8aafcbc50c72", "filename": "src/test/auxiliary/static-methods-crate.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fauxiliary%2Fstatic-methods-crate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fauxiliary%2Fstatic-methods-crate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fauxiliary%2Fstatic-methods-crate.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -12,6 +12,7 @@\n #![crate_type = \"lib\"]\n \n use std::int;\n+use std::str::from_str;\n \n pub trait read {\n     fn readMaybe(s: String) -> Option<Self>;"}, {"sha": "7de34d52f513c235f426c0d53a46e4978f33d37b", "filename": "src/test/auxiliary/trait_inheritance_overloading_xc.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fauxiliary%2Ftrait_inheritance_overloading_xc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fauxiliary%2Ftrait_inheritance_overloading_xc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fauxiliary%2Ftrait_inheritance_overloading_xc.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -9,6 +9,7 @@\n // except according to those terms.\n \n use std::cmp::PartialEq;\n+use std::ops::{Add, Sub, Mul};\n \n pub trait MyNum : Add<Self,Self> + Sub<Self,Self> + Mul<Self,Self> + PartialEq + Clone {\n }"}, {"sha": "0b65fa913cb775a32ff44af546d08649f6c3b8ab", "filename": "src/test/auxiliary/unboxed-closures-cross-crate.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fauxiliary%2Funboxed-closures-cross-crate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fauxiliary%2Funboxed-closures-cross-crate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fauxiliary%2Funboxed-closures-cross-crate.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -10,6 +10,8 @@\n \n #![feature(unboxed_closures)]\n \n+use std::ops::Add;\n+\n #[inline]\n pub fn has_closures() -> uint {\n     let x = 1u;"}, {"sha": "0ada1cb991c6be80682edac8f8df45fb99825605", "filename": "src/test/bench/core-map.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fcore-map.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fcore-map.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Fcore-map.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -13,6 +13,7 @@\n use std::collections::{BTreeMap, HashMap, HashSet};\n use std::os;\n use std::rand::{Rng, IsaacRng, SeedableRng};\n+use std::str::from_str;\n use std::time::Duration;\n use std::uint;\n "}, {"sha": "52380001c6c0d4da69e9f38b729ac0ef376dfa09", "filename": "src/test/bench/core-set.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fcore-set.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fcore-set.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Fcore-set.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -15,11 +15,12 @@\n extern crate collections;\n extern crate rand;\n \n+use std::collections::BTreeSet;\n use std::collections::BitvSet;\n use std::collections::HashSet;\n-use std::collections::BTreeSet;\n use std::hash::Hash;\n use std::os;\n+use std::str::from_str;\n use std::time::Duration;\n use std::uint;\n "}, {"sha": "08637b4bf1c1c5777c291c2e45ed0e3ed64678e1", "filename": "src/test/bench/core-uint-to-str.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fcore-uint-to-str.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fcore-uint-to-str.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Fcore-uint-to-str.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -9,6 +9,7 @@\n // except according to those terms.\n \n use std::os;\n+use std::str::from_str;\n use std::uint;\n \n fn main() {"}, {"sha": "94b7e58a54c1c9d56736c975dff98932120302fd", "filename": "src/test/bench/msgsend-pipes-shared.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fmsgsend-pipes-shared.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fmsgsend-pipes-shared.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Fmsgsend-pipes-shared.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -18,8 +18,10 @@\n // different scalability characteristics compared to the select\n // version.\n \n+use std::comm::{channel, Sender, Receiver};\n use std::comm;\n use std::os;\n+use std::str::from_str;\n use std::thread::Thread;\n use std::time::Duration;\n use std::uint;"}, {"sha": "4fb84c8610695e85d2c55d6a91371e9a4310f1b9", "filename": "src/test/bench/msgsend-pipes.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fmsgsend-pipes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fmsgsend-pipes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Fmsgsend-pipes.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -14,7 +14,9 @@\n //\n // I *think* it's the same, more or less.\n \n+use std::comm::{channel, Sender, Receiver};\n use std::os;\n+use std::str::from_str;\n use std::thread::Thread;\n use std::time::Duration;\n use std::uint;"}, {"sha": "c0b2edd300146d86dd0f0dc2048cc7d7d923b00c", "filename": "src/test/bench/msgsend-ring-mutex-arcs.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fmsgsend-ring-mutex-arcs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fmsgsend-ring-mutex-arcs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Fmsgsend-ring-mutex-arcs.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -19,6 +19,7 @@\n // ignore-lexer-test FIXME #15679\n \n use std::os;\n+use std::str::from_str;\n use std::sync::{Arc, Future, Mutex, Condvar};\n use std::time::Duration;\n use std::uint;"}, {"sha": "d3a340d488b57e084aa6cb9a3e2845685653ac80", "filename": "src/test/bench/rt-messaging-ping-pong.rs", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Frt-messaging-ping-pong.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Frt-messaging-ping-pong.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Frt-messaging-ping-pong.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -17,7 +17,10 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use std::comm::channel;\n use std::os;\n+use std::str::from_str;\n+use std::thread::Thread;\n use std::uint;\n \n // This is a simple bench that creates M pairs of tasks. These\n@@ -34,21 +37,21 @@ fn ping_pong_bench(n: uint, m: uint) {\n         // Create a stream B->A\n         let (btx, brx) = channel::<()>();\n \n-        spawn(move|| {\n+        Thread::spawn(move|| {\n             let (tx, rx) = (atx, brx);\n             for _ in range(0, n) {\n                 tx.send(());\n                 rx.recv();\n             }\n-        });\n+        }).detach();\n \n-        spawn(move|| {\n+        Thread::spawn(move|| {\n             let (tx, rx) = (btx, arx);\n             for _ in range(0, n) {\n                 rx.recv();\n                 tx.send(());\n             }\n-        });\n+        }).detach();\n     }\n \n     for _ in range(0, m) {"}, {"sha": "0a513c32aafc827d9ad4ce1cb2733aebee20ef6c", "filename": "src/test/bench/rt-parfib.rs", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Frt-parfib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Frt-parfib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Frt-parfib.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,7 +8,10 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use std::comm::channel;\n use std::os;\n+use std::str::from_str;\n+use std::thread::Thread;\n use std::uint;\n \n // A simple implementation of parfib. One subtree is found in a new\n@@ -21,9 +24,9 @@ fn parfib(n: uint) -> uint {\n     }\n \n     let (tx, rx) = channel();\n-    spawn(move|| {\n+    Thread::spawn(move|| {\n         tx.send(parfib(n-1));\n-    });\n+    }).detach();\n     let m2 = parfib(n-2);\n     return (rx.recv() + m2);\n }"}, {"sha": "f7810d5d740c0cb4adec5a0e3777047c4063e75f", "filename": "src/test/bench/shootout-ackermann.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fshootout-ackermann.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fshootout-ackermann.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Fshootout-ackermann.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -9,6 +9,7 @@\n // except according to those terms.\n \n use std::os;\n+use std::str::from_str;\n \n fn ack(m: int, n: int) -> int {\n     if m == 0 {"}, {"sha": "2f25c37a911df3da6692bb1a76a074e26dd6fbb8", "filename": "src/test/bench/shootout-binarytrees.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fshootout-binarytrees.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fshootout-binarytrees.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Fshootout-binarytrees.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -41,7 +41,9 @@\n extern crate arena;\n \n use std::iter::range_step;\n+use std::str::from_str;\n use std::sync::Future;\n+\n use arena::TypedArena;\n \n enum Tree<'a> {"}, {"sha": "6bbf6cde4ea29f37b03bcc61a0a1357c9209c673", "filename": "src/test/bench/shootout-chameneos-redux.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fshootout-chameneos-redux.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fshootout-chameneos-redux.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Fshootout-chameneos-redux.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -41,8 +41,10 @@\n // no-pretty-expanded\n \n use self::Color::{Red, Yellow, Blue};\n-use std::string::String;\n+use std::comm::{channel, Sender, Receiver};\n use std::fmt;\n+use std::str::from_str;\n+use std::thread::Thread;\n \n fn print_complements() {\n     let all = [Blue, Red, Yellow];\n@@ -188,13 +190,13 @@ fn rendezvous(nn: uint, set: Vec<Color>) {\n             let to_rendezvous = to_rendezvous.clone();\n             let to_rendezvous_log = to_rendezvous_log.clone();\n             let (to_creature, from_rendezvous) = channel();\n-            spawn(move|| {\n+            Thread::spawn(move|| {\n                 creature(ii,\n                          col,\n                          from_rendezvous,\n                          to_rendezvous,\n                          to_rendezvous_log);\n-            });\n+            }).detach();\n             to_creature\n         }).collect();\n "}, {"sha": "73e0c9e0a1fd27eca40885e2e30e34425ec370ea", "filename": "src/test/bench/shootout-fannkuch-redux.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fshootout-fannkuch-redux.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fshootout-fannkuch-redux.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Fshootout-fannkuch-redux.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -40,8 +40,9 @@\n \n #![feature(slicing_syntax)]\n \n-use std::{cmp, iter, mem};\n+use std::str::from_str;\n use std::sync::Future;\n+use std::{cmp, iter, mem};\n \n fn rotate(x: &mut [i32]) {\n     let mut prev = x[0];"}, {"sha": "05524492c28ee773e40d17ec1cc5ae0f55ae32ea", "filename": "src/test/bench/shootout-fasta-redux.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fshootout-fasta-redux.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fshootout-fasta-redux.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Fshootout-fasta-redux.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -44,6 +44,7 @@ use std::cmp::min;\n use std::io::{stdout, IoResult};\n use std::os;\n use std::slice::bytes::copy_memory;\n+use std::str::from_str;\n \n const LINE_LEN: uint = 60;\n const LOOKUP_SIZE: uint = 4 * 1024;"}, {"sha": "7009dd4c1a76fa8fde1700721ade27606a10536f", "filename": "src/test/bench/shootout-fasta.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fshootout-fasta.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fshootout-fasta.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Fshootout-fasta.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -40,11 +40,12 @@\n \n #![feature(slicing_syntax)]\n \n-use std::io;\n-use std::io::{BufferedWriter, File};\n use std::cmp::min;\n+use std::io::{BufferedWriter, File};\n+use std::io;\n use std::num::Float;\n use std::os;\n+use std::str::from_str;\n \n const LINE_LENGTH: uint = 60;\n const IM: u32 = 139968;"}, {"sha": "cbacf415f6f7fcef98d597fca54627bca86e6701", "filename": "src/test/bench/shootout-fibo.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fshootout-fibo.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fshootout-fibo.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Fshootout-fibo.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -9,6 +9,7 @@\n // except according to those terms.\n \n use std::os;\n+use std::str::from_str;\n \n fn fib(n: int) -> int {\n     if n < 2 {"}, {"sha": "b59eef916dc095a93b800d8a7d9002f57d9a0225", "filename": "src/test/bench/shootout-k-nucleotide-pipes.rs", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fshootout-k-nucleotide-pipes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fshootout-k-nucleotide-pipes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Fshootout-k-nucleotide-pipes.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -18,12 +18,15 @@\n extern crate collections;\n \n use std::ascii::{AsciiExt, OwnedAsciiExt};\n+use std::cmp::Ordering::{mod, Less, Greater, Equal};\n use std::collections::HashMap;\n+use std::comm::{channel, Sender, Receiver};\n use std::mem::replace;\n use std::num::Float;\n use std::option;\n use std::os;\n-use std::string::String;\n+use std::string::IntoString;\n+use std::thread::Thread;\n \n fn f64_cmp(x: f64, y: f64) -> Ordering {\n     // arbitrarily decide that NaNs are larger than everything.\n@@ -167,9 +170,9 @@ fn main() {\n \n         let (to_child, from_parent) = channel();\n \n-        spawn(move|| {\n+        Thread::spawn(move|| {\n             make_sequence_processor(sz, &from_parent, &to_parent_);\n-        });\n+        }).detach();\n \n         to_child\n     }).collect::<Vec<Sender<Vec<u8> >> >();"}, {"sha": "3dc51805917127c9d0f75b8155c1d9a520f8718d", "filename": "src/test/bench/shootout-k-nucleotide.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fshootout-k-nucleotide.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fshootout-k-nucleotide.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Fshootout-k-nucleotide.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -43,7 +43,6 @@\n #![feature(slicing_syntax)]\n \n use std::ascii::OwnedAsciiExt;\n-use std::string::String;\n use std::slice;\n use std::sync::{Arc, Future};\n "}, {"sha": "51ce4cbaa841d022adbdf447009cffb9fa67cc9e", "filename": "src/test/bench/shootout-mandelbrot.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fshootout-mandelbrot.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fshootout-mandelbrot.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Fshootout-mandelbrot.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -47,6 +47,7 @@\n use std::io;\n use std::os;\n use std::simd::f64x2;\n+use std::str::from_str;\n use std::sync::{Arc, Future};\n \n const ITER: int = 50;"}, {"sha": "2e229a50d16ef60574e98cd372158c9c8b62a263", "filename": "src/test/bench/shootout-meteor.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fshootout-meteor.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fshootout-meteor.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Fshootout-meteor.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -40,7 +40,9 @@\n \n // no-pretty-expanded FIXME #15189\n \n+use std::comm::channel;\n use std::sync::Arc;\n+use std::thread::Thread;\n \n //\n // Utilities.\n@@ -310,11 +312,11 @@ fn par_search(masks: Vec<Vec<Vec<u64>>>) -> Data {\n         let masks = masks.clone();\n         let tx = tx.clone();\n         let m = *m;\n-        spawn(move|| {\n+        Thread::spawn(move|| {\n             let mut data = Data::new();\n             search(&*masks, m, 1, List::Cons(m, &List::Nil), &mut data);\n             tx.send(data);\n-        });\n+        }).detach();\n     }\n \n     // collecting the results"}, {"sha": "6a325798f5805a71a62953c7fe71d9e7f12b75d9", "filename": "src/test/bench/shootout-nbody.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fshootout-nbody.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fshootout-nbody.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Fshootout-nbody.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -39,6 +39,7 @@\n // OF THE POSSIBILITY OF SUCH DAMAGE.\n \n use std::num::Float;\n+use std::str::from_str;\n \n const PI: f64 = 3.141592653589793;\n const SOLAR_MASS: f64 = 4.0 * PI * PI;"}, {"sha": "e58303a724adbd178903fb5de49291f648a11264", "filename": "src/test/bench/shootout-pfib.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fshootout-pfib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fshootout-pfib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Fshootout-pfib.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -20,8 +20,10 @@\n \n extern crate getopts;\n \n+use std::comm::{channel, Sender};\n use std::os;\n use std::result::Result::{Ok, Err};\n+use std::str::from_str;\n use std::thread::Thread;\n use std::time::Duration;\n "}, {"sha": "e286efeb30450f192e41ad302af1b1ce6c2f4a44", "filename": "src/test/bench/shootout-reverse-complement.rs", "status": "modified", "additions": 13, "deletions": 9, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fshootout-reverse-complement.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fshootout-reverse-complement.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Fshootout-reverse-complement.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -45,9 +45,10 @@\n extern crate libc;\n \n use std::io::stdio::{stdin_raw, stdout_raw};\n+use std::io::{IoResult, EndOfFile};\n use std::num::{div_rem};\n use std::ptr::{copy_memory, Unique};\n-use std::io::{IoResult, EndOfFile};\n+use std::thread::Thread;\n \n struct Tables {\n     table8: [u8;1 << 8],\n@@ -229,26 +230,29 @@ unsafe impl<T: 'static> Send for Racy<T> {}\n fn parallel<'a, I, T, F>(mut iter: I, f: F)\n         where T: 'a+Send + Sync,\n               I: Iterator<&'a mut [T]>,\n-              F: Fn(&'a mut [T]) + Sync {\n+              F: Fn(&mut [T]) + Sync {\n     use std::mem;\n     use std::raw::Repr;\n \n-    let (tx, rx) = channel();\n-    for chunk in iter {\n-        let tx = tx.clone();\n-\n+    iter.map(|chunk| {\n         // Need to convert `f` and `chunk` to something that can cross the task\n         // boundary.\n+<<<<<<< HEAD\n         let f = Racy(&f as *const F as *const uint);\n         let raw = Racy(chunk.repr());\n         spawn(move|| {\n             let f = f.0 as *const F;\n             unsafe { (*f)(mem::transmute(raw.0)) }\n             drop(tx)\n+=======\n+        let f = &f as *const F as *const uint;\n+        let raw = chunk.repr();\n+        Thread::spawn(move|| {\n+            let f = f as *const F;\n+            unsafe { (*f)(mem::transmute(raw)) }\n+>>>>>>> std: Stabilize the prelude module\n         });\n-    }\n-    drop(tx);\n-    for () in rx.iter() {}\n+    }).collect::<Vec<_>>();\n }\n \n fn main() {"}, {"sha": "b8bb39d4b0527d9f334bf2a1c08ee8003bc37608", "filename": "src/test/bench/shootout-spectralnorm.rs", "status": "modified", "additions": 13, "deletions": 15, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fshootout-spectralnorm.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fshootout-spectralnorm.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Fshootout-spectralnorm.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -44,11 +44,13 @@\n #![feature(unboxed_closures)]\n \n use std::iter::AdditiveIterator;\n+use std::thread::Thread;\n use std::mem;\n use std::num::Float;\n use std::os;\n use std::raw::Repr;\n use std::simd::f64x2;\n+use std::str::from_str;\n \n fn main() {\n     let args = os::args();\n@@ -80,14 +82,15 @@ fn mult_AtAv(v: &[f64], out: &mut [f64], tmp: &mut [f64]) {\n }\n \n fn mult_Av(v: &[f64], out: &mut [f64]) {\n-    parallel(out, |&: start, out| mult(v, out, start, |i, j| A(i, j)));\n+    parallel(out, |start, out| mult(v, out, start, |i, j| A(i, j)));\n }\n \n fn mult_Atv(v: &[f64], out: &mut [f64]) {\n-    parallel(out, |&: start, out| mult(v, out, start, |i, j| A(j, i)));\n+    parallel(out, |start, out| mult(v, out, start, |i, j| A(j, i)));\n }\n \n-fn mult(v: &[f64], out: &mut [f64], start: uint, a: |uint, uint| -> f64) {\n+fn mult<F>(v: &[f64], out: &mut [f64], start: uint, a: F)\n+           where F: Fn(uint, uint) -> f64 {\n     for (i, slot) in out.iter_mut().enumerate().map(|(i, s)| (i + start, s)) {\n         let mut sum = f64x2(0.0, 0.0);\n         for (j, chunk) in v.chunks(2).enumerate().map(|(j, s)| (2 * j, s)) {\n@@ -116,25 +119,20 @@ unsafe impl<T: 'static> Send for Racy<T> {}\n // Executes a closure in parallel over the given mutable slice. The closure `f`\n // is run in parallel and yielded the starting index within `v` as well as a\n // sub-slice of `v`.\n-fn parallel<'a, T, F>(v: &'a mut [T], f: F)\n-                      where T: Send + Sync,\n-                            F: Fn(uint, &'a mut [T]) + Sync {\n-    let (tx, rx) = channel();\n+fn parallel<T, F>(v: &mut [T], f: F)\n+                  where T: Send + Sync,\n+                        F: Fn(uint, &mut [T]) + Sync {\n     let size = v.len() / os::num_cpus() + 1;\n \n-    for (i, chunk) in v.chunks_mut(size).enumerate() {\n-        let tx = tx.clone();\n-\n+    v.chunks_mut(size).enumerate().map(|(i, chunk)| {\n         // Need to convert `f` and `chunk` to something that can cross the task\n         // boundary.\n         let f = Racy(&f as *const _ as *const uint);\n         let raw = Racy(chunk.repr());\n-        spawn(move|| {\n+        Thread::spawn(move|| {\n             let f = f.0 as *const F;\n             unsafe { (*f)(i * size, mem::transmute(raw.0)) }\n             drop(tx)\n-        });\n-    }\n-    drop(tx);\n-    for () in rx.iter() {}\n+        })\n+    }).collect::<Vec<_>>();\n }"}, {"sha": "94d958ea8d5243f8e8f1086acb55c1ee339d4dac", "filename": "src/test/bench/shootout-threadring.rs", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fshootout-threadring.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fshootout-threadring.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Fshootout-threadring.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -38,15 +38,19 @@\n // ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED\n // OF THE POSSIBILITY OF SUCH DAMAGE.\n \n+use std::comm::{channel, Sender, Receiver};\n+use std::str::from_str;\n+use std::thread::Thread;\n+\n fn start(n_tasks: int, token: int) {\n     let (tx, mut rx) = channel();\n     tx.send(token);\n     for i in range(2, n_tasks + 1) {\n         let (tx, next_rx) = channel();\n-        spawn(move|| roundtrip(i, tx, rx));\n+        Thread::spawn(move|| roundtrip(i, tx, rx)).detach();\n         rx = next_rx;\n     }\n-    spawn(move|| roundtrip(1, tx, rx));\n+    Thread::spawn(move|| roundtrip(1, tx, rx)).detach();\n }\n \n fn roundtrip(id: int, tx: Sender<int>, rx: Receiver<int>) {"}, {"sha": "ca36d99014cf4b530b8a2805ed9c683da7df13ba", "filename": "src/test/bench/spawnone.rs", "status": "removed", "additions": 0, "deletions": 14, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/3dcc409fac18a258ba2a8af4345d9566ec8eebad/src%2Ftest%2Fbench%2Fspawnone.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3dcc409fac18a258ba2a8af4345d9566ec8eebad/src%2Ftest%2Fbench%2Fspawnone.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Fspawnone.rs?ref=3dcc409fac18a258ba2a8af4345d9566ec8eebad", "patch": "@@ -1,14 +0,0 @@\n-// Copyright 2012 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n-// Useful for checking syscall usage of baseline scheduler usage\n-fn main() {\n-    spawn(move|| {});\n-}"}, {"sha": "035b222e6ce62073fc38e1194584f029c4236a88", "filename": "src/test/bench/std-smallintmap.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fstd-smallintmap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fstd-smallintmap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Fstd-smallintmap.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -12,6 +12,7 @@\n \n use std::collections::VecMap;\n use std::os;\n+use std::str::from_str;\n use std::time::Duration;\n use std::uint;\n "}, {"sha": "cccc9362a729ba6133a5f0ba0924bb72592cf024", "filename": "src/test/bench/sudoku.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fsudoku.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Fsudoku.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Fsudoku.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -12,11 +12,12 @@\n \n #![allow(non_snake_case)]\n \n-use std::io;\n-use std::io::stdio::StdReader;\n use std::io::BufferedReader;\n+use std::io::stdio::StdReader;\n+use std::io;\n use std::num::Int;\n use std::os;\n+use std::str::from_str;\n \n // Computes a single solution to a given 9x9 sudoku\n //"}, {"sha": "287b3fc6c460d5cea72c9da6660d802b2d11e994", "filename": "src/test/bench/task-perf-jargon-metal-smoke.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Ftask-perf-jargon-metal-smoke.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Ftask-perf-jargon-metal-smoke.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Ftask-perf-jargon-metal-smoke.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -17,16 +17,18 @@\n \n // ignore-pretty very bad with line comments\n \n-use std::comm;\n+use std::comm::{mod, channel};\n use std::os;\n+use std::str::from_str;\n use std::task;\n+use std::thread::Thread;\n use std::uint;\n \n fn child_generation(gens_left: uint, tx: comm::Sender<()>) {\n     // This used to be O(n^2) in the number of generations that ever existed.\n     // With this code, only as many generations are alive at a time as tasks\n     // alive at a time,\n-    spawn(move|| {\n+    Thread::spawn(move|| {\n         if gens_left & 1 == 1 {\n             task::deschedule(); // shake things up a bit\n         }\n@@ -35,7 +37,7 @@ fn child_generation(gens_left: uint, tx: comm::Sender<()>) {\n         } else {\n             tx.send(())\n         }\n-    });\n+    }).detach();\n }\n \n fn main() {"}, {"sha": "7e2c6fcf0ecd461c7e960a7690cb8722453da989", "filename": "src/test/bench/task-perf-spawnalot.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Ftask-perf-spawnalot.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fbench%2Ftask-perf-spawnalot.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Ftask-perf-spawnalot.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -11,6 +11,7 @@\n use std::os;\n use std::task;\n use std::uint;\n+use std::str::from_str;\n \n fn f(n: uint) {\n     let mut i = 0u;"}, {"sha": "90d5072f412e7827fe6fa4c7cbbd03882f64b8df", "filename": "src/test/compile-fail/bind-by-move-no-guards.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Fbind-by-move-no-guards.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Fbind-by-move-no-guards.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fbind-by-move-no-guards.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use std::comm::channel;\n+\n fn main() {\n     let (tx, rx) = channel();\n     let x = Some(rx);"}, {"sha": "afa255be699e7bb701c07fdffda1e332964f0b09", "filename": "src/test/compile-fail/binop-consume-args.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Fbinop-consume-args.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Fbinop-consume-args.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fbinop-consume-args.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -10,6 +10,8 @@\n \n // Test that binary operators consume their arguments\n \n+use std::ops::{Add, Sub, Mul, Div, Rem, BitAnd, BitXor, BitOr, Shl, Shr};\n+\n fn add<A: Add<B, ()>, B>(lhs: A, rhs: B) {\n     lhs + rhs;\n     drop(lhs);  //~ ERROR use of moved value: `lhs`"}, {"sha": "e48c88a49f0bf25013f3eca312dfe7fb15ea9465", "filename": "src/test/compile-fail/binop-move-semantics.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Fbinop-move-semantics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Fbinop-move-semantics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fbinop-move-semantics.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -10,6 +10,8 @@\n \n // Test that move restrictions are enforced on overloaded binary operations\n \n+use std::ops::Add;\n+\n fn double_move<T: Add<T, ()>>(x: T) {\n     x\n     +"}, {"sha": "af9a18acbf2ad639d8ad7e9f0a858d5e74f453a4", "filename": "src/test/compile-fail/borrowck-loan-in-overloaded-op.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Fborrowck-loan-in-overloaded-op.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Fborrowck-loan-in-overloaded-op.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fborrowck-loan-in-overloaded-op.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,6 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use std::ops::Add;\n \n #[deriving(Clone)]\n struct foo(Box<uint>);"}, {"sha": "b571af2425a5c60a4799a665acc87f5e5fa172e0", "filename": "src/test/compile-fail/borrowck-loan-rcvr-overloaded-op.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Fborrowck-loan-rcvr-overloaded-op.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Fborrowck-loan-rcvr-overloaded-op.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fborrowck-loan-rcvr-overloaded-op.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use std::ops::Add;\n+\n #[deriving(Copy)]\n struct Point {\n     x: int,"}, {"sha": "01afe405d5e12828589d383b9bdc252ed173f7bb", "filename": "src/test/compile-fail/borrowck-overloaded-index-2.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Fborrowck-overloaded-index-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Fborrowck-overloaded-index-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fborrowck-overloaded-index-2.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use std::ops::Index;\n+\n struct MyVec<T> {\n     data: Vec<T>,\n }"}, {"sha": "e8949d4b30befd55320d2672a994b0d14d3343cc", "filename": "src/test/compile-fail/borrowck-overloaded-index-autoderef.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Fborrowck-overloaded-index-autoderef.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Fborrowck-overloaded-index-autoderef.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fborrowck-overloaded-index-autoderef.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -11,6 +11,8 @@\n // Test that we still see borrowck errors of various kinds when using\n // indexing and autoderef in combination.\n \n+use std::ops::{Index, IndexMut};\n+\n struct Foo {\n     x: int,\n     y: int,"}, {"sha": "933d0f15e4e7064219432bc368abcf2390750120", "filename": "src/test/compile-fail/borrowck-overloaded-index.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Fborrowck-overloaded-index.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Fborrowck-overloaded-index.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fborrowck-overloaded-index.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use std::ops::{Index, IndexMut};\n+\n struct Foo {\n     x: int,\n     y: int,"}, {"sha": "6228b92472924fa582c24d1983ee7a2151d146b3", "filename": "src/test/compile-fail/builtin-superkinds-self-type.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Fbuiltin-superkinds-self-type.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Fbuiltin-superkinds-self-type.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fbuiltin-superkinds-self-type.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -11,6 +11,8 @@\n // Tests (negatively) the ability for the Self type in default methods\n // to use capabilities granted by builtin kinds as supertraits.\n \n+use std::comm::{channel, Sender};\n+\n trait Foo : Sync+'static {\n     fn foo(self, mut chan: Sender<Self>) { }\n }"}, {"sha": "83e329db0da2e48d61a2764d8bca9befea167343", "filename": "src/test/compile-fail/comm-not-freeze-receiver.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Fcomm-not-freeze-receiver.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Fcomm-not-freeze-receiver.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fcomm-not-freeze-receiver.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use std::comm::Receiver;\n+\n fn test<T: Sync>() {}\n \n fn main() {"}, {"sha": "296b4187a1f532ed2ce989dc15196794bd16379a", "filename": "src/test/compile-fail/comm-not-freeze.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Fcomm-not-freeze.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Fcomm-not-freeze.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fcomm-not-freeze.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use std::comm::Sender;\n+\n fn test<T: Sync>() {}\n \n fn main() {"}, {"sha": "f42e1a1bc15edf22f5431c68dd704298453f20f4", "filename": "src/test/compile-fail/issue-12041.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Fissue-12041.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Fissue-12041.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-12041.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,9 +8,12 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use std::comm::channel;\n+use std::thread::Thread;\n+\n fn main() {\n     let (tx, rx) = channel();\n-    spawn(move|| {\n+    let _t = Thread::spawn(move|| -> () {\n         loop {\n             let tx = tx;\n             //~^ ERROR: use of moved value: `tx`"}, {"sha": "327f50ee059f961bdb917a0b2ecda6b8c259dccc", "filename": "src/test/compile-fail/issue-16709.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Fissue-16709.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Fissue-16709.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-16709.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -11,6 +11,8 @@\n use std::ptr;\n use std::raw;\n \n+trait Slice {}\n+\n fn main() {\n   unsafe {\n     let nil: *const u8 = ptr::null();"}, {"sha": "c2e4629e14de0abcff762f8d46f599d88b25d688", "filename": "src/test/compile-fail/issue-18566.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Fissue-18566.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Fissue-18566.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-18566.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use std::ops::Deref;\n+\n struct MyPtr<'a>(&'a mut uint);\n impl<'a> Deref<uint> for MyPtr<'a> {\n     fn deref<'b>(&'b self) -> &'b uint { self.0 }"}, {"sha": "1e80fd7a7e91043ef10fce7e68e7156ce59002e8", "filename": "src/test/compile-fail/issue-3702-2.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Fissue-3702-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Fissue-3702-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-3702-2.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use std::num::ToPrimitive;\n+\n trait Add {\n     fn to_int(&self) -> int;\n     fn add_dynamic(&self, other: &Add) -> int;"}, {"sha": "c458c539c0766f65875d26eefe748f33adf372a6", "filename": "src/test/compile-fail/unop-move-semantics.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Funop-move-semantics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Funop-move-semantics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Funop-move-semantics.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -10,6 +10,8 @@\n \n // Test that move restrictions are enforced on overloaded unary operations\n \n+use std::ops::Not;\n+\n fn move_then_borrow<T: Not<T> + Clone>(x: T) {\n     !x;\n "}, {"sha": "312f26394b24d341abca24d7aaa96af11882c34e", "filename": "src/test/compile-fail/unsendable-class.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Funsendable-class.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Funsendable-class.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Funsendable-class.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,6 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use std::comm::channel;\n \n // Test that a class with an unsendable field can't be\n // sent"}, {"sha": "bde5b853078f221d72224d8dcb9ae795a676aa26", "filename": "src/test/compile-fail/wrong-mul-method-signature.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Fwrong-mul-method-signature.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fcompile-fail%2Fwrong-mul-method-signature.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fwrong-mul-method-signature.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -13,6 +13,8 @@\n // (In this case the mul method should take &f64 and not f64)\n // See: #11450\n \n+use std::ops::Mul;\n+\n struct Vec1 {\n     x: f64\n }"}, {"sha": "35bd22880cef742dde2823838e252219c4497a6a", "filename": "src/test/pretty/issue-4264.pp", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fpretty%2Fissue-4264.pp", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Fpretty%2Fissue-4264.pp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fpretty%2Fissue-4264.pp?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -4,7 +4,7 @@\n #[phase(plugin, link)]\n extern crate \"std\" as std;\n #[prelude_import]\n-use std::prelude::*;\n+use std::prelude::v1::*;\n // Copyright 2014 The Rust Project Developers. See the COPYRIGHT\n // file at the top-level directory of this distribution and at\n // http://rust-lang.org/COPYRIGHT."}, {"sha": "45710408172d092a8a1c72e796de4500707f06ca", "filename": "src/test/run-pass/bool.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fbool.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fbool.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fbool.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -10,6 +10,9 @@\n \n // Basic boolean tests\n \n+use std::cmp::{Equal, Greater, Less};\n+use std::ops::{BitAnd, BitOr, BitXor};\n+\n fn main() {\n     assert_eq!(false.eq(&true), false);\n     assert_eq!(false == false, true);"}, {"sha": "83c1696f7b2ab3fb367dff531b30c3075ce17c15", "filename": "src/test/run-pass/builtin-superkinds-capabilities-transitive.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fbuiltin-superkinds-capabilities-transitive.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fbuiltin-superkinds-capabilities-transitive.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fbuiltin-superkinds-capabilities-transitive.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -14,6 +14,8 @@\n // a Send. Basically this just makes sure rustc is using\n // each_bound_trait_and_supertraits in type_contents correctly.\n \n+use std::comm::{channel, Sender};\n+\n trait Bar : Send { }\n trait Foo : Bar { }\n "}, {"sha": "1f002ec79c61eb975ad5f4934ed68dbf6048fcf2", "filename": "src/test/run-pass/builtin-superkinds-capabilities-xc.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fbuiltin-superkinds-capabilities-xc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fbuiltin-superkinds-capabilities-xc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fbuiltin-superkinds-capabilities-xc.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -15,6 +15,8 @@\n // even when using them cross-crate.\n \n extern crate trait_superkinds_in_metadata;\n+\n+use std::comm::{channel, Sender, Receiver};\n use trait_superkinds_in_metadata::{RequiresRequiresShareAndSend, RequiresShare};\n \n #[deriving(PartialEq)]"}, {"sha": "46ad3f93b0bb79413ce84fdf424b663d4cecd0a0", "filename": "src/test/run-pass/builtin-superkinds-capabilities.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fbuiltin-superkinds-capabilities.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fbuiltin-superkinds-capabilities.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fbuiltin-superkinds-capabilities.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -12,6 +12,8 @@\n // builtin-kinds, e.g., if a trait requires Send to implement, then\n // at usage site of that trait, we know we have the Send capability.\n \n+use std::comm::{channel, Sender, Receiver};\n+\n trait Foo : Send { }\n \n impl <T: Send> Foo for T { }"}, {"sha": "27a7cd909fefec1a7678878518317e339405b671", "filename": "src/test/run-pass/builtin-superkinds-self-type.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fbuiltin-superkinds-self-type.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fbuiltin-superkinds-self-type.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fbuiltin-superkinds-self-type.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -11,6 +11,8 @@\n // Tests the ability for the Self type in default methods to use\n // capabilities granted by builtin kinds as supertraits.\n \n+use std::comm::{Sender, channel};\n+\n trait Foo : Send {\n     fn foo(self, tx: Sender<Self>) {\n         tx.send(self);"}, {"sha": "c95cf0bfdee453d8c5a43bd9c20ecab323c39fb6", "filename": "src/test/run-pass/c-stack-returning-int64.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fc-stack-returning-int64.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fc-stack-returning-int64.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fc-stack-returning-int64.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -12,6 +12,8 @@\n \n extern crate libc;\n \n+use std::c_str::ToCStr;\n+\n mod mlibc {\n     use libc::{c_char, c_long, c_longlong};\n "}, {"sha": "4ed444f92ac92b34da999d80b34f29f91b1da658", "filename": "src/test/run-pass/capturing-logging.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fcapturing-logging.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fcapturing-logging.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fcapturing-logging.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -17,8 +17,10 @@\n extern crate log;\n \n use log::{set_logger, Logger, LogRecord};\n+use std::comm::channel;\n use std::fmt;\n use std::io::{ChanReader, ChanWriter};\n+use std::thread::Thread;\n \n struct MyWriter(ChanWriter);\n \n@@ -32,7 +34,7 @@ impl Logger for MyWriter {\n fn main() {\n     let (tx, rx) = channel();\n     let (mut r, w) = (ChanReader::new(rx), ChanWriter::new(tx));\n-    spawn(move|| {\n+    let _t = Thread::spawn(move|| {\n         set_logger(box MyWriter(w) as Box<Logger+Send>);\n         debug!(\"debug\");\n         info!(\"info\");"}, {"sha": "e1dc5802162eb8cd41d14f4bd3f08d20ee4978e0", "filename": "src/test/run-pass/closure-bounds-can-capture-chan.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fclosure-bounds-can-capture-chan.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fclosure-bounds-can-capture-chan.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fclosure-bounds-can-capture-chan.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -10,7 +10,7 @@\n \n #![feature(unboxed_closures)]\n \n-use std::comm;\n+use std::comm::channel;\n \n fn foo<F:FnOnce()+Send>(blk: F) {\n     blk();"}, {"sha": "fd040d109108fe173ceedc95a6bbe046babfe5b4", "filename": "src/test/run-pass/cmp-default.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fcmp-default.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fcmp-default.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fcmp-default.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use std::cmp::Ordering;\n+\n // Test default methods in PartialOrd and PartialEq\n //\n struct Fool(bool);"}, {"sha": "119bdaff98ee812f13ce0b6325d4630625470cba", "filename": "src/test/run-pass/comm.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fcomm.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fcomm.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fcomm.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -9,6 +9,7 @@\n // except according to those terms.\n \n use std::task;\n+use std::comm::{channel, Sender};\n \n pub fn main() {\n     let (tx, rx) = channel();"}, {"sha": "e0e8ca5618e50f0bdff3ed1143f395fb7d8333cf", "filename": "src/test/run-pass/const-str-ptr.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fconst-str-ptr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fconst-str-ptr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fconst-str-ptr.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -9,6 +9,7 @@\n // except according to those terms.\n \n use std::{str, string};\n+use std::c_str::ToCStr;\n \n const A: [u8; 2] = ['h' as u8, 'i' as u8];\n const B: &'static [u8; 2] = &A;"}, {"sha": "198915fe02ed89e6ebc09e0e9618e9e3b5cfab89", "filename": "src/test/run-pass/core-run-destroy.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fcore-run-destroy.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fcore-run-destroy.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fcore-run-destroy.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -23,6 +23,8 @@ extern crate libc;\n use std::io::{Process, Command, timer};\n use std::time::Duration;\n use std::str;\n+use std::comm::channel;\n+use std::thread::Thread;\n \n macro_rules! succeed( ($e:expr) => (\n     match $e { Ok(..) => {}, Err(e) => panic!(\"panic: {}\", e) }\n@@ -84,12 +86,12 @@ pub fn test_destroy_actually_kills(force: bool) {\n     let (tx, rx1) = channel();\n     let mut t = timer::Timer::new().unwrap();\n     let rx2 = t.oneshot(Duration::milliseconds(1000));\n-    spawn(move|| {\n+    Thread::spawn(move|| {\n         select! {\n             () = rx2.recv() => unsafe { libc::exit(1) },\n             () = rx1.recv() => {}\n         }\n-    });\n+    }).detach();\n     match p.wait().unwrap() {\n         ExitStatus(..) => panic!(\"expected a signal\"),\n         ExitSignal(..) => tx.send(()),"}, {"sha": "5a98952c127d826264b827b3cfeeadb88289491d", "filename": "src/test/run-pass/deref-mut-on-ref.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fderef-mut-on-ref.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fderef-mut-on-ref.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fderef-mut-on-ref.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -10,6 +10,8 @@\n \n // Test that `&mut T` implements `DerefMut<T>`\n \n+use std::ops::DerefMut;\n+\n fn inc<T:DerefMut<int>>(mut t: T) {\n     *t += 1;\n }"}, {"sha": "f245c11f0904b50156d0de983bd1ae8b4fe5bdfe", "filename": "src/test/run-pass/deref-on-ref.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fderef-on-ref.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fderef-on-ref.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fderef-on-ref.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -10,6 +10,8 @@\n \n // Test that `&T` and `&mut T` implement `Deref<T>`\n \n+use std::ops::Deref;\n+\n fn deref<U:Copy,T:Deref<U>>(t: T) -> U {\n     *t\n }"}, {"sha": "fb81dd558d2c4e2276fc52871a9b6d8c48ca7aac", "filename": "src/test/run-pass/deriving-cmp-shortcircuit.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fderiving-cmp-shortcircuit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fderiving-cmp-shortcircuit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fderiving-cmp-shortcircuit.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -12,6 +12,8 @@\n // where possible, by having a type that panics when compared as the\n // second element, so this passes iff the instances shortcircuit.\n \n+use std::cmp::Ordering;\n+\n pub struct FailCmp;\n impl PartialEq for FailCmp {\n     fn eq(&self, _: &FailCmp) -> bool { panic!(\"eq\") }"}, {"sha": "b8903d05cd89974681037a8ceb7794b38a7c4679", "filename": "src/test/run-pass/deriving-zero.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fderiving-zero.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fderiving-zero.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fderiving-zero.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-\n+use std::ops::Add;\n use std::num::Zero;\n \n #[deriving(Zero)]"}, {"sha": "bca61ab1bd38718e2e2a1016565cf4fae3efe74d", "filename": "src/test/run-pass/drop-trait-enum.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fdrop-trait-enum.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fdrop-trait-enum.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fdrop-trait-enum.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -9,6 +9,7 @@\n // except according to those terms.\n \n use std::task;\n+use std::comm::{channel, Sender};\n \n #[deriving(PartialEq, Show)]\n enum Message {"}, {"sha": "0cbcee3e253e1d54fa3f94517eda048cb315e790", "filename": "src/test/run-pass/dst-deref-mut.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fdst-deref-mut.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fdst-deref-mut.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fdst-deref-mut.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -10,6 +10,8 @@\n \n // Test that a custom deref with a fat pointer return type does not ICE\n \n+use std::ops::{Deref, DerefMut};\n+\n pub struct Arr {\n     ptr: Box<[uint]>\n }"}, {"sha": "96a9c117dea46ee2aa18cae3f2122ab72e41af60", "filename": "src/test/run-pass/dst-deref.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fdst-deref.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fdst-deref.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fdst-deref.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -10,6 +10,8 @@\n \n // Test that a custom deref with a fat pointer return type does not ICE\n \n+use std::ops::Deref;\n+\n pub struct Arr {\n     ptr: Box<[uint]>\n }"}, {"sha": "70d14ba3623237f967fb8e18d43c5957bdaedbe6", "filename": "src/test/run-pass/fixup-deref-mut.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Ffixup-deref-mut.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Ffixup-deref-mut.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Ffixup-deref-mut.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use std::ops::{Deref, DerefMut};\n+\n // Generic unique/owned smaht pointer.\n struct Own<T> {\n     value: *mut T"}, {"sha": "8a75fdd685dd1055fb2515d5372182a30cb50cee", "filename": "src/test/run-pass/foreign-fn-linkname.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fforeign-fn-linkname.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fforeign-fn-linkname.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fforeign-fn-linkname.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -11,10 +11,10 @@\n // ignore-fast doesn't like extern crate\n \n extern crate libc;\n+use std::c_str::ToCStr;\n \n mod mlibc {\n-    extern crate libc;\n-    use self::libc::{c_char, size_t};\n+    use libc::{c_char, size_t};\n \n     extern {\n         #[link_name = \"strlen\"]"}, {"sha": "6155ca6357237f00863164280d6fb25cfe073d94", "filename": "src/test/run-pass/hashmap-memory.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fhashmap-memory.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fhashmap-memory.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fhashmap-memory.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -9,9 +9,6 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-\n-extern crate collections;\n-\n /**\n    A somewhat reduced test case to expose some Valgrind issues.\n \n@@ -24,6 +21,7 @@ pub fn map(filename: String, emit: map_reduce::putter) {\n \n mod map_reduce {\n     use std::collections::HashMap;\n+    use std::comm::{channel, Sender};\n     use std::str;\n     use std::task;\n "}, {"sha": "33377d1f21726c92a3d1d95fbc733661d5cbea1e", "filename": "src/test/run-pass/issue-13264.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fissue-13264.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fissue-13264.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissue-13264.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use std::ops::Deref;\n+\n struct Root {\n     jsref: JSRef\n }"}, {"sha": "e6da859c110e734cbeedb53735eb775e933bfd4e", "filename": "src/test/run-pass/issue-13494.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fissue-13494.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fissue-13494.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissue-13494.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -11,6 +11,9 @@\n // This test may not always fail, but it can be flaky if the race it used to\n // expose is still present.\n \n+use std::comm::{channel, Sender, Receiver};\n+use std::thread::Thread;\n+\n fn helper(rx: Receiver<Sender<()>>) {\n     for tx in rx.iter() {\n         let _ = tx.send_opt(());\n@@ -19,7 +22,7 @@ fn helper(rx: Receiver<Sender<()>>) {\n \n fn main() {\n     let (tx, rx) = channel();\n-    spawn(move|| { helper(rx) });\n+    let _t = Thread::spawn(move|| { helper(rx) }).detach();\n     let (snd, rcv) = channel::<int>();\n     for _ in range(1i, 100000i) {\n         snd.send(1i);"}, {"sha": "8aa7447ccd2e90f787ee74f6b7cae63938f1df48", "filename": "src/test/run-pass/issue-15734.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fissue-15734.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fissue-15734.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissue-15734.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use std::ops::Index;\n+\n struct Mat<T> { data: Vec<T>, cols: uint, }\n \n impl<T> Mat<T> {"}, {"sha": "b2b819a110305ec5265ebd396afab5ee8014b5f2", "filename": "src/test/run-pass/issue-16560.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fissue-16560.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fissue-16560.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissue-16560.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -10,6 +10,7 @@\n \n #![feature(unboxed_closures)]\n \n+use std::thread::Thread;\n use std::mem;\n \n fn main() {\n@@ -19,7 +20,7 @@ fn main() {\n     // Check that both closures are capturing by value\n     assert_eq!(1, mem::size_of_val(&closure));\n \n-    spawn(move|| {\n+    Thread::spawn(move|| {\n         let ok = closure;\n-    })\n+    }).join().ok().unwrap();\n }"}, {"sha": "0b9a85851c591a4bc3b0d0bb33f9779e97a79108", "filename": "src/test/run-pass/issue-16774.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fissue-16774.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fissue-16774.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissue-16774.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -10,6 +10,8 @@\n \n #![feature(unboxed_closures)]\n \n+use std::ops::{Deref, DerefMut};\n+\n struct X(Box<int>);\n \n static mut DESTRUCTOR_RAN: bool = false;"}, {"sha": "df2a9e6bfa9094ab24da3f0cd54dcc8813329920", "filename": "src/test/run-pass/issue-3609.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fissue-3609.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fissue-3609.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissue-3609.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -11,6 +11,7 @@\n #![feature(default_type_params)]\n \n use std::task;\n+use std::comm::Sender;\n use std::thunk::Invoke;\n \n type RingBuffer = Vec<f64> ;"}, {"sha": "c88022f3eb706ce28541d2958bb0c0cac9393298", "filename": "src/test/run-pass/issue-3743.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fissue-3743.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fissue-3743.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissue-3743.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use std::ops::Mul;\n+\n struct Vec2 {\n     x: f64,\n     y: f64"}, {"sha": "93c72e2e35091d493046d17dc7c9e2e3b15405e5", "filename": "src/test/run-pass/issue-3979-generics.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fissue-3979-generics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fissue-3979-generics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissue-3979-generics.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use std::ops::Add;\n+\n trait Positioned<S> {\n   fn SetX(&mut self, S);\n   fn X(&self) -> S;"}, {"sha": "871e52e3639541e263973e54216fa427a886098a", "filename": "src/test/run-pass/issue-4446.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fissue-4446.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fissue-4446.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissue-4446.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -9,13 +9,15 @@\n // except according to those terms.\n \n use std::io::println;\n+use std::comm::channel;\n+use std::thread::Thread;\n \n pub fn main() {\n     let (tx, rx) = channel();\n \n     tx.send(\"hello, world\");\n \n-    spawn(move|| {\n+    Thread::spawn(move|| {\n         println(rx.recv());\n-    });\n+    }).join().ok().unwrap();\n }"}, {"sha": "6692988f6da29f5824f348dd58c7714845200f6b", "filename": "src/test/run-pass/issue-4448.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fissue-4448.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fissue-4448.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissue-4448.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -9,6 +9,7 @@\n // except according to those terms.\n \n use std::task;\n+use std::comm::channel;\n \n pub fn main() {\n     let (tx, rx) = channel::<&'static str>();"}, {"sha": "43785edc2eb03782097add8a8c1c1ed79f64aaa3", "filename": "src/test/run-pass/issue-7784.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fissue-7784.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fissue-7784.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissue-7784.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -10,6 +10,8 @@\n \n #![feature(advanced_slice_patterns)]\n \n+use std::ops::Add;\n+\n fn foo<T: Add<T, T> + Clone>([x, y, z]: [T; 3]) -> (T, T, T) {\n     (x.clone(), x.clone() + y.clone(), x + y + z)\n }"}, {"sha": "4163ebf4573fcdb79b27db98ba448e2b59e75488", "filename": "src/test/run-pass/issue-8827.rs", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fissue-8827.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fissue-8827.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissue-8827.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,9 +8,12 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use std::thread::Thread;\n+use std::comm::{channel, Receiver};\n+\n fn periodical(n: int) -> Receiver<bool> {\n     let (chan, port) = channel();\n-    spawn(move|| {\n+    Thread::spawn(move|| {\n         loop {\n             for _ in range(1, n) {\n                 match chan.send_opt(false) {\n@@ -23,13 +26,13 @@ fn periodical(n: int) -> Receiver<bool> {\n                 Err(..) => break\n             }\n         }\n-    });\n+    }).detach();\n     return port;\n }\n \n fn integers() -> Receiver<int> {\n     let (chan, port) = channel();\n-    spawn(move|| {\n+    Thread::spawn(move|| {\n         let mut i = 1;\n         loop {\n             match chan.send_opt(i) {\n@@ -38,7 +41,7 @@ fn integers() -> Receiver<int> {\n             }\n             i = i + 1;\n         }\n-    });\n+    }).detach();\n     return port;\n }\n "}, {"sha": "d3cbd556776401f93bef72cd1b7a155f6da7336a", "filename": "src/test/run-pass/issue-9396.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fissue-9396.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fissue-9396.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissue-9396.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,13 +8,14 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-use std::comm;\n+use std::comm::{mod, channel};\n use std::io::timer::Timer;\n+use std::thread::Thread;\n use std::time::Duration;\n \n pub fn main() {\n     let (tx, rx) = channel();\n-    spawn(move||{\n+    let _t = Thread::spawn(move||{\n         let mut timer = Timer::new().unwrap();\n         timer.sleep(Duration::milliseconds(10));\n         tx.send(());"}, {"sha": "2e6127541a1a1bf02aaa2096f2aa3157cbc7c982", "filename": "src/test/run-pass/ivec-tag.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fivec-tag.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fivec-tag.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fivec-tag.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -9,6 +9,7 @@\n // except according to those terms.\n \n use std::task;\n+use std::comm::{channel, Sender};\n \n fn producer(tx: &Sender<Vec<u8>>) {\n     tx.send("}, {"sha": "509afff3d133bb204744467e0c64cadcbbf08675", "filename": "src/test/run-pass/logging-only-prints-once.rs", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Flogging-only-prints-once.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Flogging-only-prints-once.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Flogging-only-prints-once.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -13,6 +13,7 @@\n \n use std::cell::Cell;\n use std::fmt;\n+use std::thread::Thread;\n \n struct Foo(Cell<int>);\n \n@@ -26,13 +27,10 @@ impl fmt::Show for Foo {\n }\n \n pub fn main() {\n-    let (tx, rx) = channel();\n-    spawn(move|| {\n+    Thread::spawn(move|| {\n         let mut f = Foo(Cell::new(0));\n         println!(\"{}\", f);\n         let Foo(ref mut f) = f;\n         assert!(f.get() == 1);\n-        tx.send(());\n-    });\n-    rx.recv();\n+    }).join().ok().unwrap();\n }"}, {"sha": "a6e579ddff3045091f33f64be39ef169ba2faa8a", "filename": "src/test/run-pass/macro-with-braces-in-expr-position.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fmacro-with-braces-in-expr-position.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fmacro-with-braces-in-expr-position.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fmacro-with-braces-in-expr-position.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -10,11 +10,13 @@\n \n #![feature(macro_rules)]\n \n+use std::thread::Thread;\n+\n macro_rules! expr (($e: expr) => { $e });\n \n macro_rules! spawn {\n     ($($code: tt)*) => {\n-        expr!(spawn(move|| {$($code)*}))\n+        expr!(Thread::spawn(move|| {$($code)*}).detach())\n     }\n }\n "}, {"sha": "2cba1dec2dc99f587afc3026989cd5b031a52561", "filename": "src/test/run-pass/match-with-ret-arm.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fmatch-with-ret-arm.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fmatch-with-ret-arm.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fmatch-with-ret-arm.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -9,6 +9,7 @@\n // except according to those terms.\n \n use std::uint;\n+use std::str::from_str;\n \n pub fn main() {\n     // sometimes we have had trouble finding"}, {"sha": "b4d079d79d650905b2cc8bd3e1c30f0de03cac4d", "filename": "src/test/run-pass/numeric-method-autoexport.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fnumeric-method-autoexport.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fnumeric-method-autoexport.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fnumeric-method-autoexport.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -15,6 +15,9 @@\n // necessary. Testing the methods of the impls is done within the source\n // file for each numeric type.\n \n+use std::ops::Add;\n+use std::num::ToPrimitive;\n+\n pub fn main() {\n // ints\n     // num"}, {"sha": "7aac2d705a854d293ec1ed4da203ea3df5bab79b", "filename": "src/test/run-pass/out-of-stack-new-thread-no-split.rs", "status": "modified", "additions": 2, "deletions": 6, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fout-of-stack-new-thread-no-split.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fout-of-stack-new-thread-no-split.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fout-of-stack-new-thread-no-split.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -17,6 +17,7 @@\n \n use std::io::process::Command;\n use std::os;\n+use std::thread::Thread;\n \n // lifted from the test module\n // Inlining to avoid llvm turning the recursive functions into tail calls,\n@@ -36,12 +37,7 @@ fn main() {\n     let args = os::args();\n     let args = args.as_slice();\n     if args.len() > 1 && args[1].as_slice() == \"recurse\" {\n-        let (tx, rx) = channel();\n-        spawn(move|| {\n-            recurse();\n-            tx.send(());\n-        });\n-        rx.recv();\n+        let _t = Thread::spawn(recurse);\n     } else {\n         let recurse = Command::new(args[0].as_slice()).arg(\"recurse\").output().unwrap();\n         assert!(!recurse.status.success());"}, {"sha": "d1fb69b87a30e5b2ad76e2b5cb13d76d1051961b", "filename": "src/test/run-pass/overloaded-autoderef-indexing.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Foverloaded-autoderef-indexing.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Foverloaded-autoderef-indexing.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Foverloaded-autoderef-indexing.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use std::ops::Deref;\n+\n struct DerefArray<'a, T:'a> {\n     inner: &'a [T]\n }"}, {"sha": "23a8285063ffb48a2c6c2888c27237e7eb051347", "filename": "src/test/run-pass/overloaded-autoderef-order.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Foverloaded-autoderef-order.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Foverloaded-autoderef-order.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Foverloaded-autoderef-order.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -9,6 +9,7 @@\n // except according to those terms.\n \n use std::rc::Rc;\n+use std::ops::Deref;\n \n struct DerefWrapper<X, Y> {\n     x: X,\n@@ -30,6 +31,8 @@ impl<X, Y> Deref<Y> for DerefWrapper<X, Y> {\n }\n \n mod priv_test {\n+    use std::ops::Deref;\n+\n     pub struct DerefWrapperHideX<X, Y> {\n         x: X,\n         pub y: Y"}, {"sha": "222e2825c0404e0b17ddf0f40b775f7f2df235bd", "filename": "src/test/run-pass/overloaded-autoderef.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Foverloaded-autoderef.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Foverloaded-autoderef.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Foverloaded-autoderef.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -10,7 +10,7 @@\n \n use std::cell::RefCell;\n use std::rc::Rc;\n-use std::string::String;\n+use std::num::ToPrimitive;\n \n #[deriving(PartialEq, Show)]\n struct Point {\n@@ -31,7 +31,6 @@ pub fn main() {\n     assert_eq!((i_value, *i.borrow()), (2, 5));\n \n     let s = Rc::new(\"foo\".to_string());\n-    assert!(s.equiv(&(\"foo\")));\n     assert_eq!(s.as_slice(), \"foo\");\n \n     let mut_s = Rc::new(RefCell::new(String::from_str(\"foo\")));"}, {"sha": "95df1ed0d837ed176e9536824f860a5a26eec7fe", "filename": "src/test/run-pass/overloaded-calls-param-vtables.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Foverloaded-calls-param-vtables.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Foverloaded-calls-param-vtables.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Foverloaded-calls-param-vtables.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -13,6 +13,7 @@\n #![feature(unboxed_closures)]\n \n use std::ops::Fn;\n+use std::ops::Add;\n \n struct G;\n "}, {"sha": "dcb0c40c6088a95eecc651f32359efe8839ada78", "filename": "src/test/run-pass/overloaded-index-autoderef.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Foverloaded-index-autoderef.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Foverloaded-index-autoderef.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Foverloaded-index-autoderef.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -10,6 +10,8 @@\n \n // Test overloaded indexing combined with autoderef.\n \n+use std::ops::{Index, IndexMut};\n+\n struct Foo {\n     x: int,\n     y: int,"}, {"sha": "1c06ed64fc7b8a6112ad6d8e778869b857403d85", "filename": "src/test/run-pass/overloaded-index-in-field.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Foverloaded-index-in-field.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Foverloaded-index-in-field.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Foverloaded-index-in-field.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -11,6 +11,8 @@\n // Test using overloaded indexing when the \"map\" is stored in a\n // field. This caused problems at some point.\n \n+use std::ops::Index;\n+\n struct Foo {\n     x: int,\n     y: int,"}, {"sha": "fdf7e7e2cbb13760197f4687aa5163aba340945a", "filename": "src/test/run-pass/overloaded-index.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Foverloaded-index.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Foverloaded-index.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Foverloaded-index.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use std::ops::{Index, IndexMut};\n+\n struct Foo {\n     x: int,\n     y: int,"}, {"sha": "c7aa405b513e465bb6404d80d57df928edb5e95b", "filename": "src/test/run-pass/rename-directory.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Frename-directory.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Frename-directory.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Frename-directory.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -14,6 +14,7 @@\n extern crate libc;\n \n use std::io::TempDir;\n+use std::c_str::ToCStr;\n use std::io::fs::PathExtensions;\n use std::io::fs;\n use std::io;"}, {"sha": "0aeade935dadba948ad8b765bc8879d291e50c9e", "filename": "src/test/run-pass/running-with-no-runtime.rs", "status": "modified", "additions": 4, "deletions": 7, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Frunning-with-no-runtime.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Frunning-with-no-runtime.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Frunning-with-no-runtime.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -10,12 +10,12 @@\n \n use std::io::process::{Command, ProcessOutput};\n use std::os;\n-use std::str;\n+use std::rt::unwind::try;\n use std::rt;\n+use std::str;\n+use std::thread::Thread;\n use std::thunk::Thunk;\n \n-use std::rt::unwind::try;\n-\n #[start]\n fn start(argc: int, argv: *const *const u8) -> int {\n     if argc > 1 {\n@@ -25,8 +25,7 @@ fn start(argc: int, argv: *const *const u8) -> int {\n                 2 => println!(\"foo\"),\n                 3 => assert!(try(|| {}).is_ok()),\n                 4 => assert!(try(|| panic!()).is_err()),\n-                5 => assert!(try(|| spawn(move|| {})).is_err()),\n-                6 => assert!(Command::new(\"test\").spawn().is_err()),\n+                5 => assert!(Command::new(\"test\").spawn().is_err()),\n                 _ => panic!()\n             }\n         }\n@@ -50,8 +49,6 @@ fn start(argc: int, argv: *const *const u8) -> int {\n     pass(Command::new(me).arg(x).output().unwrap());\n     let x: &[u8] = &[5u8];\n     pass(Command::new(me).arg(x).output().unwrap());\n-    let x: &[u8] = &[6u8];\n-    pass(Command::new(me).arg(x).output().unwrap());\n \n     0\n }"}, {"sha": "8e547527f7297700879b2fe4d58ca97fe1583ba6", "filename": "src/test/run-pass/rust-log-filter.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Frust-log-filter.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Frust-log-filter.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Frust-log-filter.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -14,6 +14,9 @@\n #[phase(plugin,link)]\n extern crate log;\n \n+use std::comm::{channel, Sender, Receiver};\n+use std::thread::Thread;\n+\n pub struct ChannelLogger {\n     tx: Sender<String>\n }\n@@ -34,7 +37,7 @@ impl log::Logger for ChannelLogger {\n pub fn main() {\n     let (logger, rx) = ChannelLogger::new();\n \n-    spawn(move|| {\n+    let _t = Thread::spawn(move|| {\n         log::set_logger(logger);\n \n         // our regex is \"f.o\""}, {"sha": "71620d05e014bb752e7c8b37731031b94eb99a14", "filename": "src/test/run-pass/send-resource.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fsend-resource.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fsend-resource.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fsend-resource.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -9,6 +9,7 @@\n // except according to those terms.\n \n use std::task;\n+use std::comm::channel;\n \n struct test {\n   f: int,"}, {"sha": "181874705da67770e867fc9d5a1bb03a732941d3", "filename": "src/test/run-pass/send-type-inference.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fsend-type-inference.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fsend-type-inference.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fsend-type-inference.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use std::comm::{channel, Sender};\n+\n // tests that ctrl's type gets inferred properly\n struct Command<K, V> {\n     key: K,"}, {"sha": "bfeff58b802df7150f2b5b4d37670a36bc2dfaed", "filename": "src/test/run-pass/send_str_hashmap.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fsend_str_hashmap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fsend_str_hashmap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fsend_str_hashmap.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -11,8 +11,8 @@\n extern crate collections;\n \n use std::collections::HashMap;\n-use std::option::Option::Some;\n use std::str::SendStr;\n+use std::borrow::IntoCow;\n \n pub fn main() {\n     let mut map: HashMap<SendStr, uint> = HashMap::new();"}, {"sha": "8c70738de48f19cc99a6a01469b5bd7d38172e91", "filename": "src/test/run-pass/send_str_treemap.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fsend_str_treemap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fsend_str_treemap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fsend_str_treemap.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -11,9 +11,8 @@\n extern crate collections;\n \n use self::collections::BTreeMap;\n-use std::option::Option::Some;\n use std::str::SendStr;\n-use std::string::ToString;\n+use std::borrow::IntoCow;\n \n pub fn main() {\n     let mut map: BTreeMap<SendStr, uint> = BTreeMap::new();"}, {"sha": "3d5f0af0e3f40001e82124d7f25f647660aba635", "filename": "src/test/run-pass/sendable-class.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fsendable-class.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fsendable-class.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fsendable-class.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -10,6 +10,8 @@\n \n // Test that a class with only sendable fields can be sent\n \n+use std::comm::channel;\n+\n struct foo {\n   i: int,\n   j: char,"}, {"sha": "e3b2a2903bcbafa81b1f9c93031cc120ecc26fc5", "filename": "src/test/run-pass/spawn-types.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fspawn-types.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fspawn-types.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fspawn-types.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -15,6 +15,7 @@\n  */\n \n use std::task;\n+use std::comm::{channel, Sender};\n \n type ctx = Sender<int>;\n "}, {"sha": "4465561f874eb737b64e1770d48cd6c04c54e083", "filename": "src/test/run-pass/supertrait-default-generics.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fsupertrait-default-generics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Fsupertrait-default-generics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fsupertrait-default-generics.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -10,6 +10,8 @@\n \n // There is some other borrowck bug, so we make the stuff not mut.\n \n+use std::ops::Add;\n+\n trait Positioned<S> {\n   fn SetX(&mut self, S);\n   fn X(&self) -> S;"}, {"sha": "7c664b21fade574a201b8050c9d72485aa2729af", "filename": "src/test/run-pass/task-comm-0.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Ftask-comm-0.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Ftask-comm-0.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Ftask-comm-0.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,8 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-\n use std::task;\n+use std::comm::{channel, Sender};\n \n pub fn main() { test05(); }\n "}, {"sha": "c35e2f2f37a40dd8739462f9897db9f5558a03a6", "filename": "src/test/run-pass/task-comm-10.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Ftask-comm-10.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Ftask-comm-10.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Ftask-comm-10.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,8 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-\n use std::task;\n+use std::comm::{channel, Sender};\n \n fn start(tx: &Sender<Sender<String>>) {\n     let (tx2, rx) = channel();"}, {"sha": "10b4e51631176d1fc2fdb4014c3fb81477793345", "filename": "src/test/run-pass/task-comm-11.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Ftask-comm-11.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Ftask-comm-11.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Ftask-comm-11.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-\n+use std::comm::{channel, Sender};\n use std::task;\n \n fn start(tx: &Sender<Sender<int>>) {"}, {"sha": "31da1168bf7eb75cb50081c23ef0caa468f58c7b", "filename": "src/test/run-pass/task-comm-13.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Ftask-comm-13.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Ftask-comm-13.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Ftask-comm-13.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-\n+use std::comm::{channel, Sender};\n use std::task;\n \n fn start(tx: &Sender<int>, start: int, number_of_messages: int) {"}, {"sha": "8ec589d5db5fce8780012fceae016d405c50a1a2", "filename": "src/test/run-pass/task-comm-14.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Ftask-comm-14.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Ftask-comm-14.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Ftask-comm-14.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-\n+use std::comm::{channel, Sender};\n use std::task;\n \n pub fn main() {"}, {"sha": "b69644244ab4c49708eae69947a62d70d0c5f68d", "filename": "src/test/run-pass/task-comm-15.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Ftask-comm-15.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Ftask-comm-15.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Ftask-comm-15.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-\n+use std::comm::{channel, Sender};\n use std::task;\n \n fn start(tx: &Sender<int>, i0: int) {"}, {"sha": "5e71ed3ba06eb58871a236fafabf3d8847f26fa0", "filename": "src/test/run-pass/task-comm-16.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Ftask-comm-16.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Ftask-comm-16.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Ftask-comm-16.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,6 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use std::comm::channel;\n use std::cmp;\n \n // Tests of ports and channels on various types"}, {"sha": "c7a6da6a79417354e0240bd0bc537f911cf12e50", "filename": "src/test/run-pass/task-comm-3.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Ftask-comm-3.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Ftask-comm-3.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Ftask-comm-3.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -11,6 +11,7 @@\n // no-pretty-expanded FIXME #15189\n \n use std::thread::Thread;\n+use std::comm::{channel, Sender};\n \n pub fn main() { println!(\"===== WITHOUT THREADS =====\"); test00(); }\n "}, {"sha": "0e75479046be665ba6650546574e46089d81f27b", "filename": "src/test/run-pass/task-comm-4.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Ftask-comm-4.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Ftask-comm-4.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Ftask-comm-4.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -10,6 +10,8 @@\n \n #![allow(dead_assignment)]\n \n+use std::comm::channel;\n+\n pub fn main() { test00(); }\n \n fn test00() {"}, {"sha": "d4edbf85cd833830a270a587cbf403ae2fb476ed", "filename": "src/test/run-pass/task-comm-5.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Ftask-comm-5.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Ftask-comm-5.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Ftask-comm-5.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use std::comm::channel;\n+\n pub fn main() { test00(); }\n \n fn test00() {"}, {"sha": "4c18e5dc31357c8f8e9d45a0cf5bec4235b0bf26", "filename": "src/test/run-pass/task-comm-6.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Ftask-comm-6.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Ftask-comm-6.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Ftask-comm-6.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -10,6 +10,8 @@\n \n #![allow(dead_assignment)]\n \n+use std::comm::channel;\n+\n pub fn main() { test00(); }\n \n fn test00() {"}, {"sha": "e7e5c04e1954e80058854699803362a71f9e043e", "filename": "src/test/run-pass/task-comm-7.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Ftask-comm-7.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Ftask-comm-7.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Ftask-comm-7.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,9 +8,9 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-\n #![allow(dead_assignment)]\n \n+use std::comm::{channel, Sender};\n use std::task;\n \n pub fn main() { test00(); }"}, {"sha": "5a271f9dc05fd70e4cf3942a8436f8b51f80c875", "filename": "src/test/run-pass/task-comm-9.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Ftask-comm-9.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Ftask-comm-9.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Ftask-comm-9.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -9,6 +9,7 @@\n // except according to those terms.\n \n use std::thread::Thread;\n+use std::comm::{channel, Sender};\n \n pub fn main() { test00(); }\n "}, {"sha": "368cac1d27dfa130da10a930796d9e4401923290", "filename": "src/test/run-pass/task-comm-chan-nil.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Ftask-comm-chan-nil.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Ftask-comm-chan-nil.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Ftask-comm-chan-nil.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use std::comm::channel;\n+\n // rustboot can't transmit nils across channels because they don't have\n // any size, but rustc currently can because they do have size. Whether\n // or not this is desirable I don't know, but here's a regression test."}, {"sha": "1e10a4186fba9940030a0b521b31e9f95c97af20", "filename": "src/test/run-pass/task-spawn-move-and-copy.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Ftask-spawn-move-and-copy.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Ftask-spawn-move-and-copy.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Ftask-spawn-move-and-copy.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -9,6 +9,7 @@\n // except according to those terms.\n \n use std::task;\n+use std::comm::channel;\n \n pub fn main() {\n     let (tx, rx) = channel::<uint>();"}, {"sha": "048d7b2be72253b7456730fecfc52bf2bca970fc", "filename": "src/test/run-pass/task-stderr.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Ftask-stderr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c32d03f4172580e3f33e4844ed3c01234dca2d53/src%2Ftest%2Frun-pass%2Ftask-stderr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Ftask-stderr.rs?ref=c32d03f4172580e3f33e4844ed3c01234dca2d53", "patch": "@@ -8,6 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use std::comm::channel;\n use std::io::{ChanReader, ChanWriter};\n use std::thread;\n "}]}