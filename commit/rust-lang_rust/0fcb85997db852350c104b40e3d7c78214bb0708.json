{"sha": "0fcb85997db852350c104b40e3d7c78214bb0708", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBmY2I4NTk5N2RiODUyMzUwYzEwNGI0MGUzZDdjNzgyMTRiYjA3MDg=", "commit": {"author": {"name": "Brendan Zabarauskas", "email": "bjzaba@yahoo.com.au", "date": "2013-09-07T07:15:35Z"}, "committer": {"name": "Brendan Zabarauskas", "email": "bjzaba@yahoo.com.au", "date": "2013-09-08T03:48:15Z"}, "message": "Moved checked trait impls out of std::num\n\nThis follows the same pattern as the other numeric trait impls, and reduces the clutter in std::num.", "tree": {"sha": "4f7b4e70847825e1b9790383cd18a224e99595e1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4f7b4e70847825e1b9790383cd18a224e99595e1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0fcb85997db852350c104b40e3d7c78214bb0708", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0fcb85997db852350c104b40e3d7c78214bb0708", "html_url": "https://github.com/rust-lang/rust/commit/0fcb85997db852350c104b40e3d7c78214bb0708", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0fcb85997db852350c104b40e3d7c78214bb0708/comments", "author": {"login": "brendanzab", "id": 695077, "node_id": "MDQ6VXNlcjY5NTA3Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/695077?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brendanzab", "html_url": "https://github.com/brendanzab", "followers_url": "https://api.github.com/users/brendanzab/followers", "following_url": "https://api.github.com/users/brendanzab/following{/other_user}", "gists_url": "https://api.github.com/users/brendanzab/gists{/gist_id}", "starred_url": "https://api.github.com/users/brendanzab/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brendanzab/subscriptions", "organizations_url": "https://api.github.com/users/brendanzab/orgs", "repos_url": "https://api.github.com/users/brendanzab/repos", "events_url": "https://api.github.com/users/brendanzab/events{/privacy}", "received_events_url": "https://api.github.com/users/brendanzab/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brendanzab", "id": 695077, "node_id": "MDQ6VXNlcjY5NTA3Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/695077?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brendanzab", "html_url": "https://github.com/brendanzab", "followers_url": "https://api.github.com/users/brendanzab/followers", "following_url": "https://api.github.com/users/brendanzab/following{/other_user}", "gists_url": "https://api.github.com/users/brendanzab/gists{/gist_id}", "starred_url": "https://api.github.com/users/brendanzab/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brendanzab/subscriptions", "organizations_url": "https://api.github.com/users/brendanzab/orgs", "repos_url": "https://api.github.com/users/brendanzab/repos", "events_url": "https://api.github.com/users/brendanzab/events{/privacy}", "received_events_url": "https://api.github.com/users/brendanzab/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5591dce52eb35730e89070c7e104e1f1bf0a8ab3", "url": "https://api.github.com/repos/rust-lang/rust/commits/5591dce52eb35730e89070c7e104e1f1bf0a8ab3", "html_url": "https://github.com/rust-lang/rust/commit/5591dce52eb35730e89070c7e104e1f1bf0a8ab3"}], "stats": {"total": 794, "additions": 411, "deletions": 383}, "files": [{"sha": "5c077c7e633d0cc16caa38fbc4ad810bb0a50a1f", "filename": "src/libstd/num/i16.rs", "status": "modified", "additions": 32, "deletions": 1, "changes": 33, "blob_url": "https://github.com/rust-lang/rust/blob/0fcb85997db852350c104b40e3d7c78214bb0708/src%2Flibstd%2Fnum%2Fi16.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0fcb85997db852350c104b40e3d7c78214bb0708/src%2Flibstd%2Fnum%2Fi16.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fnum%2Fi16.rs?ref=0fcb85997db852350c104b40e3d7c78214bb0708", "patch": "@@ -10,7 +10,8 @@\n \n //! Operations and constants for `i16`\n \n-use num::BitCount;\n+use num::{BitCount, CheckedAdd, CheckedSub, CheckedMul};\n+use option::{Option, Some, None};\n use unstable::intrinsics;\n \n pub use self::generated::*;\n@@ -30,3 +31,33 @@ impl BitCount for i16 {\n     #[inline]\n     fn trailing_zeros(&self) -> i16 { unsafe { intrinsics::cttz16(*self) } }\n }\n+\n+impl CheckedAdd for i16 {\n+    #[inline]\n+    fn checked_add(&self, v: &i16) -> Option<i16> {\n+        unsafe {\n+            let (x, y) = intrinsics::i16_add_with_overflow(*self, *v);\n+            if y { None } else { Some(x) }\n+        }\n+    }\n+}\n+\n+impl CheckedSub for i16 {\n+    #[inline]\n+    fn checked_sub(&self, v: &i16) -> Option<i16> {\n+        unsafe {\n+            let (x, y) = intrinsics::i16_sub_with_overflow(*self, *v);\n+            if y { None } else { Some(x) }\n+        }\n+    }\n+}\n+\n+impl CheckedMul for i16 {\n+    #[inline]\n+    fn checked_mul(&self, v: &i16) -> Option<i16> {\n+        unsafe {\n+            let (x, y) = intrinsics::i16_mul_with_overflow(*self, *v);\n+            if y { None } else { Some(x) }\n+        }\n+    }\n+}"}, {"sha": "f076e33b3a2183808cbe533378380d174cee4500", "filename": "src/libstd/num/i32.rs", "status": "modified", "additions": 32, "deletions": 1, "changes": 33, "blob_url": "https://github.com/rust-lang/rust/blob/0fcb85997db852350c104b40e3d7c78214bb0708/src%2Flibstd%2Fnum%2Fi32.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0fcb85997db852350c104b40e3d7c78214bb0708/src%2Flibstd%2Fnum%2Fi32.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fnum%2Fi32.rs?ref=0fcb85997db852350c104b40e3d7c78214bb0708", "patch": "@@ -10,7 +10,8 @@\n \n //! Operations and constants for `i32`\n \n-use num::BitCount;\n+use num::{BitCount, CheckedAdd, CheckedSub, CheckedMul};\n+use option::{Option, Some, None};\n use unstable::intrinsics;\n \n pub use self::generated::*;\n@@ -30,3 +31,33 @@ impl BitCount for i32 {\n     #[inline]\n     fn trailing_zeros(&self) -> i32 { unsafe { intrinsics::cttz32(*self) } }\n }\n+\n+impl CheckedAdd for i32 {\n+    #[inline]\n+    fn checked_add(&self, v: &i32) -> Option<i32> {\n+        unsafe {\n+            let (x, y) = intrinsics::i32_add_with_overflow(*self, *v);\n+            if y { None } else { Some(x) }\n+        }\n+    }\n+}\n+\n+impl CheckedSub for i32 {\n+    #[inline]\n+    fn checked_sub(&self, v: &i32) -> Option<i32> {\n+        unsafe {\n+            let (x, y) = intrinsics::i32_sub_with_overflow(*self, *v);\n+            if y { None } else { Some(x) }\n+        }\n+    }\n+}\n+\n+impl CheckedMul for i32 {\n+    #[inline]\n+    fn checked_mul(&self, v: &i32) -> Option<i32> {\n+        unsafe {\n+            let (x, y) = intrinsics::i32_mul_with_overflow(*self, *v);\n+            if y { None } else { Some(x) }\n+        }\n+    }\n+}"}, {"sha": "10df7e37b88c41fbb1e52255f937158e1ce80e41", "filename": "src/libstd/num/i64.rs", "status": "modified", "additions": 34, "deletions": 1, "changes": 35, "blob_url": "https://github.com/rust-lang/rust/blob/0fcb85997db852350c104b40e3d7c78214bb0708/src%2Flibstd%2Fnum%2Fi64.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0fcb85997db852350c104b40e3d7c78214bb0708/src%2Flibstd%2Fnum%2Fi64.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fnum%2Fi64.rs?ref=0fcb85997db852350c104b40e3d7c78214bb0708", "patch": "@@ -10,7 +10,8 @@\n \n //! Operations and constants for `i64`\n \n-use num::BitCount;\n+use num::{BitCount, CheckedAdd, CheckedSub, CheckedMul};\n+use option::{Option, Some, None};\n use unstable::intrinsics;\n \n pub use self::generated::*;\n@@ -30,3 +31,35 @@ impl BitCount for i64 {\n     #[inline]\n     fn trailing_zeros(&self) -> i64 { unsafe { intrinsics::cttz64(*self) } }\n }\n+\n+impl CheckedAdd for i64 {\n+    #[inline]\n+    fn checked_add(&self, v: &i64) -> Option<i64> {\n+        unsafe {\n+            let (x, y) = intrinsics::i64_add_with_overflow(*self, *v);\n+            if y { None } else { Some(x) }\n+        }\n+    }\n+}\n+\n+impl CheckedSub for i64 {\n+    #[inline]\n+    fn checked_sub(&self, v: &i64) -> Option<i64> {\n+        unsafe {\n+            let (x, y) = intrinsics::i64_sub_with_overflow(*self, *v);\n+            if y { None } else { Some(x) }\n+        }\n+    }\n+}\n+\n+// FIXME: #8449: should not be disabled on 32-bit\n+#[cfg(target_word_size = \"64\")]\n+impl CheckedMul for i64 {\n+    #[inline]\n+    fn checked_mul(&self, v: &i64) -> Option<i64> {\n+        unsafe {\n+            let (x, y) = intrinsics::i64_mul_with_overflow(*self, *v);\n+            if y { None } else { Some(x) }\n+        }\n+    }\n+}"}, {"sha": "a807f6b9e53f3dbd9d5cd9fcdf6f61fc07fc995b", "filename": "src/libstd/num/i8.rs", "status": "modified", "additions": 32, "deletions": 1, "changes": 33, "blob_url": "https://github.com/rust-lang/rust/blob/0fcb85997db852350c104b40e3d7c78214bb0708/src%2Flibstd%2Fnum%2Fi8.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0fcb85997db852350c104b40e3d7c78214bb0708/src%2Flibstd%2Fnum%2Fi8.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fnum%2Fi8.rs?ref=0fcb85997db852350c104b40e3d7c78214bb0708", "patch": "@@ -10,7 +10,8 @@\n \n //! Operations and constants for `i8`\n \n-use num::BitCount;\n+use num::{BitCount, CheckedAdd, CheckedSub, CheckedMul};\n+use option::{Option, Some, None};\n use unstable::intrinsics;\n \n pub use self::generated::*;\n@@ -30,3 +31,33 @@ impl BitCount for i8 {\n     #[inline]\n     fn trailing_zeros(&self) -> i8 { unsafe { intrinsics::cttz8(*self) } }\n }\n+\n+impl CheckedAdd for i8 {\n+    #[inline]\n+    fn checked_add(&self, v: &i8) -> Option<i8> {\n+        unsafe {\n+            let (x, y) = intrinsics::i8_add_with_overflow(*self, *v);\n+            if y { None } else { Some(x) }\n+        }\n+    }\n+}\n+\n+impl CheckedSub for i8 {\n+    #[inline]\n+    fn checked_sub(&self, v: &i8) -> Option<i8> {\n+        unsafe {\n+            let (x, y) = intrinsics::i8_sub_with_overflow(*self, *v);\n+            if y { None } else { Some(x) }\n+        }\n+    }\n+}\n+\n+impl CheckedMul for i8 {\n+    #[inline]\n+    fn checked_mul(&self, v: &i8) -> Option<i8> {\n+        unsafe {\n+            let (x, y) = intrinsics::i8_mul_with_overflow(*self, *v);\n+            if y { None } else { Some(x) }\n+        }\n+    }\n+}"}, {"sha": "c5364fa3dab963d652d80b5f477f4b1138dacb3f", "filename": "src/libstd/num/int.rs", "status": "modified", "additions": 69, "deletions": 1, "changes": 70, "blob_url": "https://github.com/rust-lang/rust/blob/0fcb85997db852350c104b40e3d7c78214bb0708/src%2Flibstd%2Fnum%2Fint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0fcb85997db852350c104b40e3d7c78214bb0708/src%2Flibstd%2Fnum%2Fint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fnum%2Fint.rs?ref=0fcb85997db852350c104b40e3d7c78214bb0708", "patch": "@@ -12,7 +12,9 @@\n \n #[allow(non_uppercase_statics)];\n \n-use num::BitCount;\n+use num::{BitCount, CheckedAdd, CheckedSub, CheckedMul};\n+use option::{Option, Some, None};\n+use unstable::intrinsics;\n \n pub use self::generated::*;\n \n@@ -51,6 +53,72 @@ impl BitCount for int {\n     fn trailing_zeros(&self) -> int { (*self as i64).trailing_zeros() as int }\n }\n \n+#[cfg(target_word_size = \"32\")]\n+impl CheckedAdd for int {\n+    #[inline]\n+    fn checked_add(&self, v: &int) -> Option<int> {\n+        unsafe {\n+            let (x, y) = intrinsics::i32_add_with_overflow(*self as i32, *v as i32);\n+            if y { None } else { Some(x as int) }\n+        }\n+    }\n+}\n+\n+#[cfg(target_word_size = \"64\")]\n+impl CheckedAdd for int {\n+    #[inline]\n+    fn checked_add(&self, v: &int) -> Option<int> {\n+        unsafe {\n+            let (x, y) = intrinsics::i64_add_with_overflow(*self as i64, *v as i64);\n+            if y { None } else { Some(x as int) }\n+        }\n+    }\n+}\n+\n+#[cfg(target_word_size = \"32\")]\n+impl CheckedSub for int {\n+    #[inline]\n+    fn checked_sub(&self, v: &int) -> Option<int> {\n+        unsafe {\n+            let (x, y) = intrinsics::i32_sub_with_overflow(*self as i32, *v as i32);\n+            if y { None } else { Some(x as int) }\n+        }\n+    }\n+}\n+\n+#[cfg(target_word_size = \"64\")]\n+impl CheckedSub for int {\n+    #[inline]\n+    fn checked_sub(&self, v: &int) -> Option<int> {\n+        unsafe {\n+            let (x, y) = intrinsics::i64_sub_with_overflow(*self as i64, *v as i64);\n+            if y { None } else { Some(x as int) }\n+        }\n+    }\n+}\n+\n+#[cfg(target_word_size = \"32\")]\n+impl CheckedMul for int {\n+    #[inline]\n+    fn checked_mul(&self, v: &int) -> Option<int> {\n+        unsafe {\n+            let (x, y) = intrinsics::i32_mul_with_overflow(*self as i32, *v as i32);\n+            if y { None } else { Some(x as int) }\n+        }\n+    }\n+}\n+\n+#[cfg(target_word_size = \"64\")]\n+impl CheckedMul for int {\n+    #[inline]\n+    fn checked_mul(&self, v: &int) -> Option<int> {\n+        unsafe {\n+            let (x, y) = intrinsics::i64_mul_with_overflow(*self as i64, *v as i64);\n+            if y { None } else { Some(x as int) }\n+        }\n+    }\n+}\n+\n /// Returns `base` raised to the power of `exponent`\n pub fn pow(base: int, exponent: uint) -> int {\n     if exponent == 0u {"}, {"sha": "724bc6dda015b15bb8cf8be2f7d119b92887c5d9", "filename": "src/libstd/num/num.rs", "status": "modified", "additions": 1, "deletions": 378, "changes": 379, "blob_url": "https://github.com/rust-lang/rust/blob/0fcb85997db852350c104b40e3d7c78214bb0708/src%2Flibstd%2Fnum%2Fnum.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0fcb85997db852350c104b40e3d7c78214bb0708/src%2Flibstd%2Fnum%2Fnum.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fnum%2Fnum.rs?ref=0fcb85997db852350c104b40e3d7c78214bb0708", "patch": "@@ -19,7 +19,6 @@ use cmp::{Eq, ApproxEq, Ord};\n use ops::{Add, Sub, Mul, Div, Rem, Neg};\n use ops::{Not, BitAnd, BitOr, BitXor, Shl, Shr};\n use option::{Option, Some, None};\n-use unstable::intrinsics;\n \n pub mod strconv;\n \n@@ -493,7 +492,7 @@ pub trait Saturating {\n     fn saturating_sub(self, v: Self) -> Self;\n }\n \n-impl<T: CheckedAdd+CheckedSub+Zero+Ord+Bounded> Saturating for T {\n+impl<T: CheckedAdd + CheckedSub + Zero + Ord + Bounded> Saturating for T {\n     #[inline]\n     fn saturating_add(self, v: T) -> T {\n         match self.checked_add(&v) {\n@@ -523,390 +522,14 @@ pub trait CheckedAdd: Add<Self, Self> {\n     fn checked_add(&self, v: &Self) -> Option<Self>;\n }\n \n-impl CheckedAdd for i8 {\n-    #[inline]\n-    fn checked_add(&self, v: &i8) -> Option<i8> {\n-        unsafe {\n-            let (x, y) = intrinsics::i8_add_with_overflow(*self, *v);\n-            if y { None } else { Some(x) }\n-        }\n-    }\n-}\n-\n-impl CheckedAdd for i16 {\n-    #[inline]\n-    fn checked_add(&self, v: &i16) -> Option<i16> {\n-        unsafe {\n-            let (x, y) = intrinsics::i16_add_with_overflow(*self, *v);\n-            if y { None } else { Some(x) }\n-        }\n-    }\n-}\n-\n-impl CheckedAdd for i32 {\n-    #[inline]\n-    fn checked_add(&self, v: &i32) -> Option<i32> {\n-        unsafe {\n-            let (x, y) = intrinsics::i32_add_with_overflow(*self, *v);\n-            if y { None } else { Some(x) }\n-        }\n-    }\n-}\n-\n-impl CheckedAdd for i64 {\n-    #[inline]\n-    fn checked_add(&self, v: &i64) -> Option<i64> {\n-        unsafe {\n-            let (x, y) = intrinsics::i64_add_with_overflow(*self, *v);\n-            if y { None } else { Some(x) }\n-        }\n-    }\n-}\n-\n-#[cfg(target_word_size = \"32\")]\n-impl CheckedAdd for int {\n-    #[inline]\n-    fn checked_add(&self, v: &int) -> Option<int> {\n-        unsafe {\n-            let (x, y) = intrinsics::i32_add_with_overflow(*self as i32, *v as i32);\n-            if y { None } else { Some(x as int) }\n-        }\n-    }\n-}\n-\n-#[cfg(target_word_size = \"64\")]\n-impl CheckedAdd for int {\n-    #[inline]\n-    fn checked_add(&self, v: &int) -> Option<int> {\n-        unsafe {\n-            let (x, y) = intrinsics::i64_add_with_overflow(*self as i64, *v as i64);\n-            if y { None } else { Some(x as int) }\n-        }\n-    }\n-}\n-\n-impl CheckedAdd for u8 {\n-    #[inline]\n-    fn checked_add(&self, v: &u8) -> Option<u8> {\n-        unsafe {\n-            let (x, y) = intrinsics::u8_add_with_overflow(*self, *v);\n-            if y { None } else { Some(x) }\n-        }\n-    }\n-}\n-\n-impl CheckedAdd for u16 {\n-    #[inline]\n-    fn checked_add(&self, v: &u16) -> Option<u16> {\n-        unsafe {\n-            let (x, y) = intrinsics::u16_add_with_overflow(*self, *v);\n-            if y { None } else { Some(x) }\n-        }\n-    }\n-}\n-\n-impl CheckedAdd for u32 {\n-    #[inline]\n-    fn checked_add(&self, v: &u32) -> Option<u32> {\n-        unsafe {\n-            let (x, y) = intrinsics::u32_add_with_overflow(*self, *v);\n-            if y { None } else { Some(x) }\n-        }\n-    }\n-}\n-\n-impl CheckedAdd for u64 {\n-    #[inline]\n-    fn checked_add(&self, v: &u64) -> Option<u64> {\n-        unsafe {\n-            let (x, y) = intrinsics::u64_add_with_overflow(*self, *v);\n-            if y { None } else { Some(x) }\n-        }\n-    }\n-}\n-\n-#[cfg(target_word_size = \"32\")]\n-impl CheckedAdd for uint {\n-    #[inline]\n-    fn checked_add(&self, v: &uint) -> Option<uint> {\n-        unsafe {\n-            let (x, y) = intrinsics::u32_add_with_overflow(*self as u32, *v as u32);\n-            if y { None } else { Some(x as uint) }\n-        }\n-    }\n-}\n-\n-#[cfg(target_word_size = \"64\")]\n-impl CheckedAdd for uint {\n-    #[inline]\n-    fn checked_add(&self, v: &uint) -> Option<uint> {\n-        unsafe {\n-            let (x, y) = intrinsics::u64_add_with_overflow(*self as u64, *v as u64);\n-            if y { None } else { Some(x as uint) }\n-        }\n-    }\n-}\n-\n pub trait CheckedSub: Sub<Self, Self> {\n     fn checked_sub(&self, v: &Self) -> Option<Self>;\n }\n \n-impl CheckedSub for i8 {\n-    #[inline]\n-    fn checked_sub(&self, v: &i8) -> Option<i8> {\n-        unsafe {\n-            let (x, y) = intrinsics::i8_sub_with_overflow(*self, *v);\n-            if y { None } else { Some(x) }\n-        }\n-    }\n-}\n-\n-impl CheckedSub for i16 {\n-    #[inline]\n-    fn checked_sub(&self, v: &i16) -> Option<i16> {\n-        unsafe {\n-            let (x, y) = intrinsics::i16_sub_with_overflow(*self, *v);\n-            if y { None } else { Some(x) }\n-        }\n-    }\n-}\n-\n-impl CheckedSub for i32 {\n-    #[inline]\n-    fn checked_sub(&self, v: &i32) -> Option<i32> {\n-        unsafe {\n-            let (x, y) = intrinsics::i32_sub_with_overflow(*self, *v);\n-            if y { None } else { Some(x) }\n-        }\n-    }\n-}\n-\n-impl CheckedSub for i64 {\n-    #[inline]\n-    fn checked_sub(&self, v: &i64) -> Option<i64> {\n-        unsafe {\n-            let (x, y) = intrinsics::i64_sub_with_overflow(*self, *v);\n-            if y { None } else { Some(x) }\n-        }\n-    }\n-}\n-\n-#[cfg(target_word_size = \"32\")]\n-impl CheckedSub for int {\n-    #[inline]\n-    fn checked_sub(&self, v: &int) -> Option<int> {\n-        unsafe {\n-            let (x, y) = intrinsics::i32_sub_with_overflow(*self as i32, *v as i32);\n-            if y { None } else { Some(x as int) }\n-        }\n-    }\n-}\n-\n-#[cfg(target_word_size = \"64\")]\n-impl CheckedSub for int {\n-    #[inline]\n-    fn checked_sub(&self, v: &int) -> Option<int> {\n-        unsafe {\n-            let (x, y) = intrinsics::i64_sub_with_overflow(*self as i64, *v as i64);\n-            if y { None } else { Some(x as int) }\n-        }\n-    }\n-}\n-\n-impl CheckedSub for u8 {\n-    #[inline]\n-    fn checked_sub(&self, v: &u8) -> Option<u8> {\n-        unsafe {\n-            let (x, y) = intrinsics::u8_sub_with_overflow(*self, *v);\n-            if y { None } else { Some(x) }\n-        }\n-    }\n-}\n-\n-impl CheckedSub for u16 {\n-    #[inline]\n-    fn checked_sub(&self, v: &u16) -> Option<u16> {\n-        unsafe {\n-            let (x, y) = intrinsics::u16_sub_with_overflow(*self, *v);\n-            if y { None } else { Some(x) }\n-        }\n-    }\n-}\n-\n-impl CheckedSub for u32 {\n-    #[inline]\n-    fn checked_sub(&self, v: &u32) -> Option<u32> {\n-        unsafe {\n-            let (x, y) = intrinsics::u32_sub_with_overflow(*self, *v);\n-            if y { None } else { Some(x) }\n-        }\n-    }\n-}\n-\n-impl CheckedSub for u64 {\n-    #[inline]\n-    fn checked_sub(&self, v: &u64) -> Option<u64> {\n-        unsafe {\n-            let (x, y) = intrinsics::u64_sub_with_overflow(*self, *v);\n-            if y { None } else { Some(x) }\n-        }\n-    }\n-}\n-\n-#[cfg(target_word_size = \"32\")]\n-impl CheckedSub for uint {\n-    #[inline]\n-    fn checked_sub(&self, v: &uint) -> Option<uint> {\n-        unsafe {\n-            let (x, y) = intrinsics::u32_sub_with_overflow(*self as u32, *v as u32);\n-            if y { None } else { Some(x as uint) }\n-        }\n-    }\n-}\n-\n-#[cfg(target_word_size = \"64\")]\n-impl CheckedSub for uint {\n-    #[inline]\n-    fn checked_sub(&self, v: &uint) -> Option<uint> {\n-        unsafe {\n-            let (x, y) = intrinsics::u64_sub_with_overflow(*self as u64, *v as u64);\n-            if y { None } else { Some(x as uint) }\n-        }\n-    }\n-}\n-\n pub trait CheckedMul: Mul<Self, Self> {\n     fn checked_mul(&self, v: &Self) -> Option<Self>;\n }\n \n-impl CheckedMul for i8 {\n-    #[inline]\n-    fn checked_mul(&self, v: &i8) -> Option<i8> {\n-        unsafe {\n-            let (x, y) = intrinsics::i8_mul_with_overflow(*self, *v);\n-            if y { None } else { Some(x) }\n-        }\n-    }\n-}\n-\n-impl CheckedMul for i16 {\n-    #[inline]\n-    fn checked_mul(&self, v: &i16) -> Option<i16> {\n-        unsafe {\n-            let (x, y) = intrinsics::i16_mul_with_overflow(*self, *v);\n-            if y { None } else { Some(x) }\n-        }\n-    }\n-}\n-\n-impl CheckedMul for i32 {\n-    #[inline]\n-    fn checked_mul(&self, v: &i32) -> Option<i32> {\n-        unsafe {\n-            let (x, y) = intrinsics::i32_mul_with_overflow(*self, *v);\n-            if y { None } else { Some(x) }\n-        }\n-    }\n-}\n-\n-// FIXME: #8449: should not be disabled on 32-bit\n-#[cfg(target_word_size = \"64\")]\n-impl CheckedMul for i64 {\n-    #[inline]\n-    fn checked_mul(&self, v: &i64) -> Option<i64> {\n-        unsafe {\n-            let (x, y) = intrinsics::i64_mul_with_overflow(*self, *v);\n-            if y { None } else { Some(x) }\n-        }\n-    }\n-}\n-\n-#[cfg(target_word_size = \"32\")]\n-impl CheckedMul for int {\n-    #[inline]\n-    fn checked_mul(&self, v: &int) -> Option<int> {\n-        unsafe {\n-            let (x, y) = intrinsics::i32_mul_with_overflow(*self as i32, *v as i32);\n-            if y { None } else { Some(x as int) }\n-        }\n-    }\n-}\n-\n-#[cfg(target_word_size = \"64\")]\n-impl CheckedMul for int {\n-    #[inline]\n-    fn checked_mul(&self, v: &int) -> Option<int> {\n-        unsafe {\n-            let (x, y) = intrinsics::i64_mul_with_overflow(*self as i64, *v as i64);\n-            if y { None } else { Some(x as int) }\n-        }\n-    }\n-}\n-\n-impl CheckedMul for u8 {\n-    #[inline]\n-    fn checked_mul(&self, v: &u8) -> Option<u8> {\n-        unsafe {\n-            let (x, y) = intrinsics::u8_mul_with_overflow(*self, *v);\n-            if y { None } else { Some(x) }\n-        }\n-    }\n-}\n-\n-impl CheckedMul for u16 {\n-    #[inline]\n-    fn checked_mul(&self, v: &u16) -> Option<u16> {\n-        unsafe {\n-            let (x, y) = intrinsics::u16_mul_with_overflow(*self, *v);\n-            if y { None } else { Some(x) }\n-        }\n-    }\n-}\n-\n-impl CheckedMul for u32 {\n-    #[inline]\n-    fn checked_mul(&self, v: &u32) -> Option<u32> {\n-        unsafe {\n-            let (x, y) = intrinsics::u32_mul_with_overflow(*self, *v);\n-            if y { None } else { Some(x) }\n-        }\n-    }\n-}\n-\n-// FIXME: #8449: should not be disabled on 32-bit\n-#[cfg(target_word_size = \"64\")]\n-impl CheckedMul for u64 {\n-    #[inline]\n-    fn checked_mul(&self, v: &u64) -> Option<u64> {\n-        unsafe {\n-            let (x, y) = intrinsics::u64_mul_with_overflow(*self, *v);\n-            if y { None } else { Some(x) }\n-        }\n-    }\n-}\n-\n-#[cfg(target_word_size = \"32\")]\n-impl CheckedMul for uint {\n-    #[inline]\n-    fn checked_mul(&self, v: &uint) -> Option<uint> {\n-        unsafe {\n-            let (x, y) = intrinsics::u32_mul_with_overflow(*self as u32, *v as u32);\n-            if y { None } else { Some(x as uint) }\n-        }\n-    }\n-}\n-\n-#[cfg(target_word_size = \"64\")]\n-impl CheckedMul for uint {\n-    #[inline]\n-    fn checked_mul(&self, v: &uint) -> Option<uint> {\n-        unsafe {\n-            let (x, y) = intrinsics::u64_mul_with_overflow(*self as u64, *v as u64);\n-            if y { None } else { Some(x as uint) }\n-        }\n-    }\n-}\n-\n pub trait CheckedDiv: Div<Self, Self> {\n     fn checked_div(&self, v: &Self) -> Option<Self>;\n }"}, {"sha": "e227947ca6e5f8d2f60ecf5a97459fc4f2c6e4c5", "filename": "src/libstd/num/u16.rs", "status": "modified", "additions": 35, "deletions": 0, "changes": 35, "blob_url": "https://github.com/rust-lang/rust/blob/0fcb85997db852350c104b40e3d7c78214bb0708/src%2Flibstd%2Fnum%2Fu16.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0fcb85997db852350c104b40e3d7c78214bb0708/src%2Flibstd%2Fnum%2Fu16.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fnum%2Fu16.rs?ref=0fcb85997db852350c104b40e3d7c78214bb0708", "patch": "@@ -10,5 +10,40 @@\n \n //! Operations and constants for `u16`\n \n+use num::{CheckedAdd, CheckedSub, CheckedMul};\n+use option::{Option, Some, None};\n+use unstable::intrinsics;\n+\n pub use self::generated::*;\n+\n uint_module!(u16, i16, 16)\n+\n+impl CheckedAdd for u16 {\n+    #[inline]\n+    fn checked_add(&self, v: &u16) -> Option<u16> {\n+        unsafe {\n+            let (x, y) = intrinsics::u16_add_with_overflow(*self, *v);\n+            if y { None } else { Some(x) }\n+        }\n+    }\n+}\n+\n+impl CheckedSub for u16 {\n+    #[inline]\n+    fn checked_sub(&self, v: &u16) -> Option<u16> {\n+        unsafe {\n+            let (x, y) = intrinsics::u16_sub_with_overflow(*self, *v);\n+            if y { None } else { Some(x) }\n+        }\n+    }\n+}\n+\n+impl CheckedMul for u16 {\n+    #[inline]\n+    fn checked_mul(&self, v: &u16) -> Option<u16> {\n+        unsafe {\n+            let (x, y) = intrinsics::u16_mul_with_overflow(*self, *v);\n+            if y { None } else { Some(x) }\n+        }\n+    }\n+}"}, {"sha": "4dbd543da7b0b252f71a881df0bc3a948ac33506", "filename": "src/libstd/num/u32.rs", "status": "modified", "additions": 35, "deletions": 0, "changes": 35, "blob_url": "https://github.com/rust-lang/rust/blob/0fcb85997db852350c104b40e3d7c78214bb0708/src%2Flibstd%2Fnum%2Fu32.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0fcb85997db852350c104b40e3d7c78214bb0708/src%2Flibstd%2Fnum%2Fu32.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fnum%2Fu32.rs?ref=0fcb85997db852350c104b40e3d7c78214bb0708", "patch": "@@ -10,5 +10,40 @@\n \n //! Operations and constants for `u32`\n \n+use num::{CheckedAdd, CheckedSub, CheckedMul};\n+use option::{Option, Some, None};\n+use unstable::intrinsics;\n+\n pub use self::generated::*;\n+\n uint_module!(u32, i32, 32)\n+\n+impl CheckedAdd for u32 {\n+    #[inline]\n+    fn checked_add(&self, v: &u32) -> Option<u32> {\n+        unsafe {\n+            let (x, y) = intrinsics::u32_add_with_overflow(*self, *v);\n+            if y { None } else { Some(x) }\n+        }\n+    }\n+}\n+\n+impl CheckedSub for u32 {\n+    #[inline]\n+    fn checked_sub(&self, v: &u32) -> Option<u32> {\n+        unsafe {\n+            let (x, y) = intrinsics::u32_sub_with_overflow(*self, *v);\n+            if y { None } else { Some(x) }\n+        }\n+    }\n+}\n+\n+impl CheckedMul for u32 {\n+    #[inline]\n+    fn checked_mul(&self, v: &u32) -> Option<u32> {\n+        unsafe {\n+            let (x, y) = intrinsics::u32_mul_with_overflow(*self, *v);\n+            if y { None } else { Some(x) }\n+        }\n+    }\n+}"}, {"sha": "b311183ba11416393a6e979b1b1c6a1831040ffd", "filename": "src/libstd/num/u64.rs", "status": "modified", "additions": 37, "deletions": 0, "changes": 37, "blob_url": "https://github.com/rust-lang/rust/blob/0fcb85997db852350c104b40e3d7c78214bb0708/src%2Flibstd%2Fnum%2Fu64.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0fcb85997db852350c104b40e3d7c78214bb0708/src%2Flibstd%2Fnum%2Fu64.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fnum%2Fu64.rs?ref=0fcb85997db852350c104b40e3d7c78214bb0708", "patch": "@@ -10,5 +10,42 @@\n \n //! Operations and constants for `u64`\n \n+use num::{CheckedAdd, CheckedSub, CheckedMul};\n+use option::{Option, Some, None};\n+use unstable::intrinsics;\n+\n pub use self::generated::*;\n+\n uint_module!(u64, i64, 64)\n+\n+impl CheckedAdd for u64 {\n+    #[inline]\n+    fn checked_add(&self, v: &u64) -> Option<u64> {\n+        unsafe {\n+            let (x, y) = intrinsics::u64_add_with_overflow(*self, *v);\n+            if y { None } else { Some(x) }\n+        }\n+    }\n+}\n+\n+impl CheckedSub for u64 {\n+    #[inline]\n+    fn checked_sub(&self, v: &u64) -> Option<u64> {\n+        unsafe {\n+            let (x, y) = intrinsics::u64_sub_with_overflow(*self, *v);\n+            if y { None } else { Some(x) }\n+        }\n+    }\n+}\n+\n+// FIXME: #8449: should not be disabled on 32-bit\n+#[cfg(target_word_size = \"64\")]\n+impl CheckedMul for u64 {\n+    #[inline]\n+    fn checked_mul(&self, v: &u64) -> Option<u64> {\n+        unsafe {\n+            let (x, y) = intrinsics::u64_mul_with_overflow(*self, *v);\n+            if y { None } else { Some(x) }\n+        }\n+    }\n+}"}, {"sha": "ca54af5cecc43808fc85a2131005a96bb962e9f8", "filename": "src/libstd/num/u8.rs", "status": "modified", "additions": 35, "deletions": 0, "changes": 35, "blob_url": "https://github.com/rust-lang/rust/blob/0fcb85997db852350c104b40e3d7c78214bb0708/src%2Flibstd%2Fnum%2Fu8.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0fcb85997db852350c104b40e3d7c78214bb0708/src%2Flibstd%2Fnum%2Fu8.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fnum%2Fu8.rs?ref=0fcb85997db852350c104b40e3d7c78214bb0708", "patch": "@@ -10,5 +10,40 @@\n \n //! Operations and constants for `u8`\n \n+use num::{CheckedAdd, CheckedSub, CheckedMul};\n+use option::{Option, Some, None};\n+use unstable::intrinsics;\n+\n pub use self::generated::*;\n+\n uint_module!(u8, i8, 8)\n+\n+impl CheckedAdd for u8 {\n+    #[inline]\n+    fn checked_add(&self, v: &u8) -> Option<u8> {\n+        unsafe {\n+            let (x, y) = intrinsics::u8_add_with_overflow(*self, *v);\n+            if y { None } else { Some(x) }\n+        }\n+    }\n+}\n+\n+impl CheckedSub for u8 {\n+    #[inline]\n+    fn checked_sub(&self, v: &u8) -> Option<u8> {\n+        unsafe {\n+            let (x, y) = intrinsics::u8_sub_with_overflow(*self, *v);\n+            if y { None } else { Some(x) }\n+        }\n+    }\n+}\n+\n+impl CheckedMul for u8 {\n+    #[inline]\n+    fn checked_mul(&self, v: &u8) -> Option<u8> {\n+        unsafe {\n+            let (x, y) = intrinsics::u8_mul_with_overflow(*self, *v);\n+            if y { None } else { Some(x) }\n+        }\n+    }\n+}"}, {"sha": "dfdd6cf72f742970d69e1c74607e8f123e89eebf", "filename": "src/libstd/num/uint.rs", "status": "modified", "additions": 69, "deletions": 0, "changes": 69, "blob_url": "https://github.com/rust-lang/rust/blob/0fcb85997db852350c104b40e3d7c78214bb0708/src%2Flibstd%2Fnum%2Fuint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0fcb85997db852350c104b40e3d7c78214bb0708/src%2Flibstd%2Fnum%2Fuint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fnum%2Fuint.rs?ref=0fcb85997db852350c104b40e3d7c78214bb0708", "patch": "@@ -11,6 +11,9 @@\n //! Operations and constants for `uint`\n \n use num;\n+use num::{CheckedAdd, CheckedSub, CheckedMul};\n+use option::{Option, Some, None};\n+use unstable::intrinsics;\n use sys;\n \n pub use self::generated::*;\n@@ -101,6 +104,72 @@ pub fn next_power_of_two(n: uint) -> uint {\n     return tmp + 1u;\n }\n \n+#[cfg(target_word_size = \"32\")]\n+impl CheckedAdd for uint {\n+    #[inline]\n+    fn checked_add(&self, v: &uint) -> Option<uint> {\n+        unsafe {\n+            let (x, y) = intrinsics::u32_add_with_overflow(*self as u32, *v as u32);\n+            if y { None } else { Some(x as uint) }\n+        }\n+    }\n+}\n+\n+#[cfg(target_word_size = \"64\")]\n+impl CheckedAdd for uint {\n+    #[inline]\n+    fn checked_add(&self, v: &uint) -> Option<uint> {\n+        unsafe {\n+            let (x, y) = intrinsics::u64_add_with_overflow(*self as u64, *v as u64);\n+            if y { None } else { Some(x as uint) }\n+        }\n+    }\n+}\n+\n+#[cfg(target_word_size = \"32\")]\n+impl CheckedSub for uint {\n+    #[inline]\n+    fn checked_sub(&self, v: &uint) -> Option<uint> {\n+        unsafe {\n+            let (x, y) = intrinsics::u32_sub_with_overflow(*self as u32, *v as u32);\n+            if y { None } else { Some(x as uint) }\n+        }\n+    }\n+}\n+\n+#[cfg(target_word_size = \"64\")]\n+impl CheckedSub for uint {\n+    #[inline]\n+    fn checked_sub(&self, v: &uint) -> Option<uint> {\n+        unsafe {\n+            let (x, y) = intrinsics::u64_sub_with_overflow(*self as u64, *v as u64);\n+            if y { None } else { Some(x as uint) }\n+        }\n+    }\n+}\n+\n+#[cfg(target_word_size = \"32\")]\n+impl CheckedMul for uint {\n+    #[inline]\n+    fn checked_mul(&self, v: &uint) -> Option<uint> {\n+        unsafe {\n+            let (x, y) = intrinsics::u32_mul_with_overflow(*self as u32, *v as u32);\n+            if y { None } else { Some(x as uint) }\n+        }\n+    }\n+}\n+\n+#[cfg(target_word_size = \"64\")]\n+impl CheckedMul for uint {\n+    #[inline]\n+    fn checked_mul(&self, v: &uint) -> Option<uint> {\n+        unsafe {\n+            let (x, y) = intrinsics::u64_mul_with_overflow(*self as u64, *v as u64);\n+            if y { None } else { Some(x as uint) }\n+        }\n+    }\n+}\n+\n #[test]\n fn test_next_power_of_two() {\n     assert!((next_power_of_two(0u) == 0u));"}]}