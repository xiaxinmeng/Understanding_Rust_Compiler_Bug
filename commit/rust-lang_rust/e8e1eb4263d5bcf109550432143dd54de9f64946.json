{"sha": "e8e1eb4263d5bcf109550432143dd54de9f64946", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU4ZTFlYjQyNjNkNWJjZjEwOTU1MDQzMjE0M2RkNTRkZTlmNjQ5NDY=", "commit": {"author": {"name": "Yusuke Tanaka", "email": "yusuktan@maguro.dev", "date": "2020-08-16T15:19:29Z"}, "committer": {"name": "Yusuke Tanaka", "email": "yusuktan@maguro.dev", "date": "2020-08-16T15:19:29Z"}, "message": "Remove test for `handle_document_symbol`", "tree": {"sha": "7a3cf3f8f9d0caa9f74db9d39ae33d076d6dc325", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7a3cf3f8f9d0caa9f74db9d39ae33d076d6dc325"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e8e1eb4263d5bcf109550432143dd54de9f64946", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQJIBAABCAAyFiEEgbkHgdnD1idvtMJ0QJ1+7h56cWoFAl85ToEUHHl1c3VrdGFu\nQG1hZ3Vyby5kZXYACgkQQJ1+7h56cWqXmA/9FUem88HUr0k9ChIGr1F9cUi/eYf2\nJSAwgkvskhl8rqv4v3bsnp9Y9Zi8dIYueyZMFwNAJr82J560GAy2qY7W+7J3WhFn\nIC2EBh6IwaDc8eY3rC+1osr3t5IkMKxQTV7WoqO25zu/x2NuEebPUyRVHx0y7b/3\ndfIVBQYZwoP3clzO9myLv/q11vlBH1rQXJF/AypzT34Qt7mPc+CQ+dfyh2L1rOlN\nxfjRj4xckJtI+NcronoIs1Ibt3c3hQtCzBaGHaUJIlS9qXZ7N1jWE/HMCJgsWF+v\nsbgBg8TBeSQNXR2txCbhMyhdj0PF8oMgg60PPS++oUumeHBH+r5ip0nA9HWaQjO2\nFcNTENAfEtxO7mbF3T7Ch1mpOsQRDb+PBiytnkdlvB1TB3RdeUMisZOzN4V72NfX\n3BCnMk2gWNzsjM4l4W7k8hrysmk502+aFa5QPUmQbj68dLS2DK0XoDXJZoOjhFqe\n9RN+MgTWNX+wEgSaWQb+rmbrpp+RbSIt1cCLphx3z/YKNNhqK7GB2XhAVnfXG+ER\nZjA+qbuWQihK7Jnu6mshbYqxxKq+g5KsB/stjco79rLQvyQZscH5xcx26iaOutLu\n5e8kbIl1azeFaklh/mujGoz5PGPUE7nPS5OT40EElrcltolj52E0pT6YOXNfEOXN\nFgZcutRVCHnyM2o=\n=uE3x\n-----END PGP SIGNATURE-----", "payload": "tree 7a3cf3f8f9d0caa9f74db9d39ae33d076d6dc325\nparent cd49e41642c1e0bf2d22157914246d181a608c86\nauthor Yusuke Tanaka <yusuktan@maguro.dev> 1597591169 +0900\ncommitter Yusuke Tanaka <yusuktan@maguro.dev> 1597591169 +0900\n\nRemove test for `handle_document_symbol`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e8e1eb4263d5bcf109550432143dd54de9f64946", "html_url": "https://github.com/rust-lang/rust/commit/e8e1eb4263d5bcf109550432143dd54de9f64946", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e8e1eb4263d5bcf109550432143dd54de9f64946/comments", "author": {"login": "magurotuna", "id": 23649474, "node_id": "MDQ6VXNlcjIzNjQ5NDc0", "avatar_url": "https://avatars.githubusercontent.com/u/23649474?v=4", "gravatar_id": "", "url": "https://api.github.com/users/magurotuna", "html_url": "https://github.com/magurotuna", "followers_url": "https://api.github.com/users/magurotuna/followers", "following_url": "https://api.github.com/users/magurotuna/following{/other_user}", "gists_url": "https://api.github.com/users/magurotuna/gists{/gist_id}", "starred_url": "https://api.github.com/users/magurotuna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/magurotuna/subscriptions", "organizations_url": "https://api.github.com/users/magurotuna/orgs", "repos_url": "https://api.github.com/users/magurotuna/repos", "events_url": "https://api.github.com/users/magurotuna/events{/privacy}", "received_events_url": "https://api.github.com/users/magurotuna/received_events", "type": "User", "site_admin": false}, "committer": {"login": "magurotuna", "id": 23649474, "node_id": "MDQ6VXNlcjIzNjQ5NDc0", "avatar_url": "https://avatars.githubusercontent.com/u/23649474?v=4", "gravatar_id": "", "url": "https://api.github.com/users/magurotuna", "html_url": "https://github.com/magurotuna", "followers_url": "https://api.github.com/users/magurotuna/followers", "following_url": "https://api.github.com/users/magurotuna/following{/other_user}", "gists_url": "https://api.github.com/users/magurotuna/gists{/gist_id}", "starred_url": "https://api.github.com/users/magurotuna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/magurotuna/subscriptions", "organizations_url": "https://api.github.com/users/magurotuna/orgs", "repos_url": "https://api.github.com/users/magurotuna/repos", "events_url": "https://api.github.com/users/magurotuna/events{/privacy}", "received_events_url": "https://api.github.com/users/magurotuna/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cd49e41642c1e0bf2d22157914246d181a608c86", "url": "https://api.github.com/repos/rust-lang/rust/commits/cd49e41642c1e0bf2d22157914246d181a608c86", "html_url": "https://github.com/rust-lang/rust/commit/cd49e41642c1e0bf2d22157914246d181a608c86"}], "stats": {"total": 321, "additions": 4, "deletions": 317}, "files": [{"sha": "7370505f8bfb2514aee27e5fe20029fbd8e6282b", "filename": "crates/rust-analyzer/tests/heavy_tests/main.rs", "status": "modified", "additions": 4, "deletions": 317, "changes": 321, "blob_url": "https://github.com/rust-lang/rust/blob/e8e1eb4263d5bcf109550432143dd54de9f64946/crates%2Frust-analyzer%2Ftests%2Fheavy_tests%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e8e1eb4263d5bcf109550432143dd54de9f64946/crates%2Frust-analyzer%2Ftests%2Fheavy_tests%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Ftests%2Fheavy_tests%2Fmain.rs?ref=e8e1eb4263d5bcf109550432143dd54de9f64946", "patch": "@@ -5,14 +5,11 @@ use std::{collections::HashMap, path::PathBuf, time::Instant};\n \n use lsp_types::{\n     notification::DidOpenTextDocument,\n-    request::{\n-        CodeActionRequest, Completion, DocumentSymbolRequest, Formatting, GotoTypeDefinition,\n-        HoverRequest,\n-    },\n+    request::{CodeActionRequest, Completion, Formatting, GotoTypeDefinition, HoverRequest},\n     CodeActionContext, CodeActionParams, CompletionParams, DidOpenTextDocumentParams,\n-    DocumentFormattingParams, DocumentSymbolParams, FormattingOptions, GotoDefinitionParams,\n-    HoverParams, PartialResultParams, Position, Range, TextDocumentItem,\n-    TextDocumentPositionParams, WorkDoneProgressParams,\n+    DocumentFormattingParams, FormattingOptions, GotoDefinitionParams, HoverParams,\n+    PartialResultParams, Position, Range, TextDocumentItem, TextDocumentPositionParams,\n+    WorkDoneProgressParams,\n };\n use rust_analyzer::lsp_ext::{OnEnter, Runnables, RunnablesParams};\n use serde_json::json;\n@@ -685,313 +682,3 @@ pub fn foo(_input: TokenStream) -> TokenStream {\n     let value = res.get(\"contents\").unwrap().get(\"value\").unwrap().to_string();\n     assert_eq!(value, r#\"\"```rust\\nfoo::Bar\\n```\\n\\n```rust\\nfn bar()\\n```\"\"#)\n }\n-\n-#[test]\n-fn test_document_symbol_with_hierarchy() {\n-    if skip_slow_tests() {\n-        return;\n-    }\n-\n-    let server = Project::with_fixture(\n-        r#\"\n-//- /Cargo.toml\n-[package]\n-name = \"foo\"\n-version = \"0.0.0\"\n-\n-//- /src/lib.rs\n-mod a {\n-    mod b {\n-        struct B1;\n-        fn b2() {}\n-    }\n-    struct A1;\n-}\n-\"#,\n-    )\n-    .with_config(|config| {\n-        config.client_caps.hierarchical_symbols = true;\n-    })\n-    .server();\n-    server.wait_until_workspace_is_loaded();\n-\n-    server.request::<DocumentSymbolRequest>(\n-        DocumentSymbolParams {\n-            text_document: server.doc_id(\"src/lib.rs\"),\n-            work_done_progress_params: WorkDoneProgressParams::default(),\n-            partial_result_params: PartialResultParams::default(),\n-        },\n-        json!([\n-            {\n-                \"children\": [\n-                    {\n-                        \"children\": [\n-                            {\n-                                \"deprecated\": false,\n-                                \"kind\": 23,\n-                                \"name\": \"B1\",\n-                                \"range\": {\n-                                    \"end\": {\n-                                        \"character\": 18,\n-                                        \"line\": 2\n-                                    },\n-                                    \"start\": {\n-                                        \"character\": 8,\n-                                        \"line\": 2\n-                                    }\n-                                },\n-                                \"selectionRange\": {\n-                                    \"end\": {\n-                                        \"character\": 17,\n-                                        \"line\": 2\n-                                    },\n-                                    \"start\": {\n-                                        \"character\": 15,\n-                                        \"line\": 2\n-                                    }\n-                                },\n-                                \"tags\": []\n-                            },\n-                            {\n-                                \"deprecated\": false,\n-                                \"detail\": \"fn()\",\n-                                \"kind\": 12,\n-                                \"name\": \"b2\",\n-                                \"range\": {\n-                                    \"end\": {\n-                                        \"character\": 18,\n-                                        \"line\": 3\n-                                    },\n-                                    \"start\": {\n-                                        \"character\": 8,\n-                                        \"line\": 3\n-                                    }\n-                                },\n-                                \"selectionRange\": {\n-                                    \"end\": {\n-                                        \"character\": 13,\n-                                        \"line\": 3\n-                                    },\n-                                    \"start\": {\n-                                        \"character\": 11,\n-                                        \"line\": 3\n-                                    }\n-                                },\n-                                \"tags\": []\n-                            }\n-                        ],\n-                        \"deprecated\": false,\n-                        \"kind\": 2,\n-                        \"name\": \"b\",\n-                        \"range\": {\n-                            \"end\": {\n-                                \"character\": 5,\n-                                \"line\": 4\n-                            },\n-                            \"start\": {\n-                                \"character\": 4,\n-                                \"line\": 1\n-                            }\n-                        },\n-                        \"selectionRange\": {\n-                            \"end\": {\n-                                \"character\": 9,\n-                                \"line\": 1\n-                            },\n-                            \"start\": {\n-                                \"character\": 8,\n-                                \"line\": 1\n-                            }\n-                        },\n-                        \"tags\": []\n-                    },\n-                    {\n-                        \"deprecated\": false,\n-                        \"kind\": 23,\n-                        \"name\": \"A1\",\n-                        \"range\": {\n-                            \"end\": {\n-                                \"character\": 14,\n-                                \"line\": 5\n-                            },\n-                            \"start\": {\n-                                \"character\": 4,\n-                                \"line\": 5\n-                            }\n-                        },\n-                        \"selectionRange\": {\n-                            \"end\": {\n-                                \"character\": 13,\n-                                \"line\": 5\n-                            },\n-                            \"start\": {\n-                                \"character\": 11,\n-                                \"line\": 5\n-                            }\n-                        },\n-                        \"tags\": []\n-                    }\n-                ],\n-                \"deprecated\": false,\n-                \"kind\": 2,\n-                \"name\": \"a\",\n-                \"range\": {\n-                    \"end\": {\n-                        \"character\": 1,\n-                        \"line\": 6\n-                    },\n-                    \"start\": {\n-                        \"character\": 0,\n-                        \"line\": 0\n-                    }\n-                },\n-                \"selectionRange\": {\n-                    \"end\": {\n-                        \"character\": 5,\n-                        \"line\": 0\n-                    },\n-                    \"start\": {\n-                        \"character\": 4,\n-                        \"line\": 0\n-                    }\n-                },\n-                \"tags\": []\n-            }\n-        ]),\n-    );\n-}\n-\n-#[test]\n-fn test_document_symbol_without_hierarchy() {\n-    if skip_slow_tests() {\n-        return;\n-    }\n-\n-    let server = project(\n-        r#\"\n-//- /Cargo.toml\n-[package]\n-name = \"foo\"\n-version = \"0.0.0\"\n-\n-//- /src/lib.rs\n-mod a {\n-    mod b {\n-        struct B1;\n-        fn b2() {}\n-    }\n-    struct A1;\n-}\n-\"#,\n-    );\n-    server.wait_until_workspace_is_loaded();\n-\n-    server.request::<DocumentSymbolRequest>(\n-        DocumentSymbolParams {\n-            text_document: server.doc_id(\"src/lib.rs\"),\n-            work_done_progress_params: WorkDoneProgressParams::default(),\n-            partial_result_params: PartialResultParams::default(),\n-        },\n-        json!([\n-            {\n-                \"deprecated\": false,\n-                \"kind\": 2,\n-                \"location\": {\n-                    \"range\": {\n-                        \"end\": {\n-                            \"character\": 1,\n-                            \"line\": 6\n-                        },\n-                        \"start\": {\n-                            \"character\": 0,\n-                            \"line\": 0\n-                        }\n-                    },\n-                    \"uri\": \"file:///[..]/src/lib.rs\"\n-                },\n-                \"name\": \"a\",\n-                \"tags\": []\n-            },\n-            {\n-                \"containerName\": \"a\",\n-                \"deprecated\": false,\n-                \"kind\": 2,\n-                \"location\": {\n-                    \"range\": {\n-                        \"end\": {\n-                            \"character\": 5,\n-                            \"line\": 4\n-                        },\n-                        \"start\": {\n-                            \"character\": 4,\n-                            \"line\": 1\n-                        }\n-                    },\n-                    \"uri\": \"file:///[..]/src/lib.rs\"\n-                },\n-                \"name\": \"b\",\n-                \"tags\": []\n-            },\n-            {\n-                \"containerName\": \"b\",\n-                \"deprecated\": false,\n-                \"kind\": 23,\n-                \"location\": {\n-                    \"range\": {\n-                        \"end\": {\n-                            \"character\": 18,\n-                            \"line\": 2\n-                        },\n-                        \"start\": {\n-                            \"character\": 8,\n-                            \"line\": 2\n-                        }\n-                    },\n-                    \"uri\": \"file:///[..]/src/lib.rs\"\n-                },\n-                \"name\": \"B1\",\n-                \"tags\": []\n-            },\n-            {\n-                \"containerName\": \"b\",\n-                \"deprecated\": false,\n-                \"kind\": 12,\n-                \"location\": {\n-                    \"range\": {\n-                        \"end\": {\n-                            \"character\": 18,\n-                            \"line\": 3\n-                        },\n-                        \"start\": {\n-                            \"character\": 8,\n-                            \"line\": 3\n-                        }\n-                    },\n-                    \"uri\": \"file:///[..]/src/lib.rs\"\n-                },\n-                \"name\": \"b2\",\n-                \"tags\": []\n-            },\n-            {\n-                \"containerName\": \"a\",\n-                \"deprecated\": false,\n-                \"kind\": 23,\n-                \"location\": {\n-                    \"range\": {\n-                        \"end\": {\n-                            \"character\": 14,\n-                            \"line\": 5\n-                        },\n-                        \"start\": {\n-                            \"character\": 4,\n-                            \"line\": 5\n-                        }\n-                    },\n-                    \"uri\": \"file:///[..]/src/lib.rs\"\n-                },\n-                \"name\": \"A1\",\n-                \"tags\": []\n-            }\n-        ]),\n-    );\n-}"}]}