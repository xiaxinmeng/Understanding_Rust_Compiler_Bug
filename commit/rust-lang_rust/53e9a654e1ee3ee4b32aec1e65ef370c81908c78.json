{"sha": "53e9a654e1ee3ee4b32aec1e65ef370c81908c78", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUzZTlhNjU0ZTFlZTNlZTRiMzJhZWMxZTY1ZWYzNzBjODE5MDhjNzg=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2019-02-10T20:45:22Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-02-10T20:45:22Z"}, "message": "Rollup merge of #58345 - RalfJung:2nd-filename, r=matthewjasper\n\nWhen there are multiple filenames, print what got interpreted as filenames\n\nI have written code that crafts command lines for rustc, and when I get \"multiple input filenames provided\" it can be quite hard to figure out where in this long list of arguments the mistake is hiding.  Probably I passed an argument to a flag that does not expect an argument, but which flag would that be?\n\nThis changes the error message to print the first two filenames, to make it easier to debug what is going on.", "tree": {"sha": "b233907d00c6fee0d4bec884bc710bf1ba4cda09", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b233907d00c6fee0d4bec884bc710bf1ba4cda09"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/53e9a654e1ee3ee4b32aec1e65ef370c81908c78", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJcYI1jCRBK7hj4Ov3rIwAAdHIIAIQiB1qZGUWXxzNlwc1W9MlV\nkj7coTUARKiAaU7YsqqVadijRQ3pI6l9ZKfvzxoI0NZi7A/kR1Dmee3dDSd3u6ZS\nZ61TpLP7AYLGSCB5Bxs/AvpY+zfeW1fpUDGATxrFOR2GHgB6MsE0iIpb2O4p3Qtj\n7IE8gQff1xBX+7aT/4149tKBJa2KrAaXlbxiW3dTTIATF5O6Uxsdb7cR5dlaNwfh\nKSpKRf4KyXHIZQvCiS8uEWqhNjbtcLfwzBhC0Hd/pYxk/yEOPslgPWMPB7hf769q\nWlGxiZdh9QzJJQBBaWiry5Dc2vb1qvIXZAmYJNCiT+ZoZzLXVng2gqBQBXoJSCU=\n=166+\n-----END PGP SIGNATURE-----\n", "payload": "tree b233907d00c6fee0d4bec884bc710bf1ba4cda09\nparent c3aa84700a2c35a4dc3d61d3b929dd7b3b011998\nparent 3a3691f1878bf3727585c982526c9db5a79c746c\nauthor Guillaume Gomez <guillaume1.gomez@gmail.com> 1549831522 +0100\ncommitter GitHub <noreply@github.com> 1549831522 +0100\n\nRollup merge of #58345 - RalfJung:2nd-filename, r=matthewjasper\n\nWhen there are multiple filenames, print what got interpreted as filenames\n\nI have written code that crafts command lines for rustc, and when I get \"multiple input filenames provided\" it can be quite hard to figure out where in this long list of arguments the mistake is hiding.  Probably I passed an argument to a flag that does not expect an argument, but which flag would that be?\n\nThis changes the error message to print the first two filenames, to make it easier to debug what is going on.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/53e9a654e1ee3ee4b32aec1e65ef370c81908c78", "html_url": "https://github.com/rust-lang/rust/commit/53e9a654e1ee3ee4b32aec1e65ef370c81908c78", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/53e9a654e1ee3ee4b32aec1e65ef370c81908c78/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c3aa84700a2c35a4dc3d61d3b929dd7b3b011998", "url": "https://api.github.com/repos/rust-lang/rust/commits/c3aa84700a2c35a4dc3d61d3b929dd7b3b011998", "html_url": "https://github.com/rust-lang/rust/commit/c3aa84700a2c35a4dc3d61d3b929dd7b3b011998"}, {"sha": "3a3691f1878bf3727585c982526c9db5a79c746c", "url": "https://api.github.com/repos/rust-lang/rust/commits/3a3691f1878bf3727585c982526c9db5a79c746c", "html_url": "https://github.com/rust-lang/rust/commit/3a3691f1878bf3727585c982526c9db5a79c746c"}], "stats": {"total": 10, "additions": 9, "deletions": 1}, "files": [{"sha": "f34a7e040b1c38b6eccf19b02784a774fe84ee6a", "filename": "src/librustc_driver/lib.rs", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/53e9a654e1ee3ee4b32aec1e65ef370c81908c78/src%2Flibrustc_driver%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/53e9a654e1ee3ee4b32aec1e65ef370c81908c78/src%2Flibrustc_driver%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_driver%2Flib.rs?ref=53e9a654e1ee3ee4b32aec1e65ef370c81908c78", "patch": "@@ -838,7 +838,15 @@ impl<'a> CompilerCalls<'a> for RustcDefaultCalls {\n                 early_error(sopts.error_format, \"no input filename given\");\n             }\n             1 => panic!(\"make_input should have provided valid inputs\"),\n-            _ => early_error(sopts.error_format, \"multiple input filenames provided\"),\n+            _ =>\n+                early_error(\n+                    sopts.error_format,\n+                    &format!(\n+                        \"multiple input filenames provided (first two filenames are `{}` and `{}`)\",\n+                        matches.free[0],\n+                        matches.free[1],\n+                    ),\n+                )\n         }\n     }\n "}]}