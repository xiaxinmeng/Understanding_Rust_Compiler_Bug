{"sha": "8ddf4ce87a1a0a50d015e40bf9cebede68f64d0a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhkZGY0Y2U4N2ExYTBhNTBkMDE1ZTQwYmY5Y2ViZWRlNjhmNjRkMGE=", "commit": {"author": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2020-12-19T12:54:38Z"}, "committer": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2020-12-19T12:54:38Z"}, "message": "UI Tests: Separate suspicious_else_formatting tests", "tree": {"sha": "1e838d7655a7eec3c0c2a873f41841bf66e6313f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1e838d7655a7eec3c0c2a873f41841bf66e6313f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8ddf4ce87a1a0a50d015e40bf9cebede68f64d0a", "comment_count": 0, "verification": {"verified": false, "reason": "unknown_key", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEb0jkZw3AJLMiOp9wGI/nM3KGUrEFAl/d+EUACgkQGI/nM3KG\nUrG/Vw/+O9XgCyK289EQ0wYFwCWW4rJ6naGnCwmck27i/GjtErYe4t1OsWGL7Mso\n4T98rMZdWw3OD2JMJKD1DY1pO84B+o41Ylrb4NWjpj90epUlUUtNfzzCoFAmdJe8\nCrojyq8tIO2Lx678/dKr8BldlIejvB/zJgH6JfPMxFexNbKWEnfyZNMqPX92+CYO\nn1Zv6t4N5gyUNayR2PPUlatgTlsSaAZgMUFWNGHSkl4U6EqEr+etzaR0c8gT2wu0\nqxs4GK+lT+6SEhWC55Dz6PDVUP/jLclowZFHxypYgm6zZe/6tSpCyKNPvZRnDJp9\nG1Hf9nce9qQfHprSASiT69/jUFxozvoATg0lBJXgbP0AgRq2yjjHMu+xuokcYzTr\nb/QDcRjeZZ6t2ch1Bk3jdbIspXq25jUdWeRW7ywMOXb6LoeteqWTA4V5WGHhmeWW\nrDTzpqDxV/yDSe6dMiVyp27LN4CFAlcs1/pnXlnTe7GQOhBpUtlAFICnPmjQxjB5\nB5uzr7HvFbZon7YboXUo93/IJfMqJ6UJQ7iId3O7AAVk8SD/bqxXRezmwzRTeaf4\nP15GcfzfHhKZ+fdCYDPcTmhCUibGMare9eqh20FZYLSSy5fkhY6e92CKGG9CCMtR\nR7YF1WEOn1TcaTWNVbYdkYnRM6cdM/jPqSS6lBk5eCF2sjBvxS0=\n=1NMu\n-----END PGP SIGNATURE-----", "payload": "tree 1e838d7655a7eec3c0c2a873f41841bf66e6313f\nparent 73feb31bc3d6b71e97d8ba63f3c52f975c2c93e8\nauthor Philipp Hansch <dev@phansch.net> 1608382478 +0100\ncommitter Philipp Hansch <dev@phansch.net> 1608382478 +0100\n\nUI Tests: Separate suspicious_else_formatting tests\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8ddf4ce87a1a0a50d015e40bf9cebede68f64d0a", "html_url": "https://github.com/rust-lang/rust/commit/8ddf4ce87a1a0a50d015e40bf9cebede68f64d0a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8ddf4ce87a1a0a50d015e40bf9cebede68f64d0a/comments", "author": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "73feb31bc3d6b71e97d8ba63f3c52f975c2c93e8", "url": "https://api.github.com/repos/rust-lang/rust/commits/73feb31bc3d6b71e97d8ba63f3c52f975c2c93e8", "html_url": "https://github.com/rust-lang/rust/commit/73feb31bc3d6b71e97d8ba63f3c52f975c2c93e8"}], "stats": {"total": 332, "additions": 164, "deletions": 168}, "files": [{"sha": "0d14807ff1cfcf1f2745b521f0c101c7ca85eddb", "filename": "tests/ui/formatting.rs", "status": "modified", "additions": 1, "deletions": 86, "changes": 87, "blob_url": "https://github.com/rust-lang/rust/blob/8ddf4ce87a1a0a50d015e40bf9cebede68f64d0a/tests%2Fui%2Fformatting.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8ddf4ce87a1a0a50d015e40bf9cebede68f64d0a/tests%2Fui%2Fformatting.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fformatting.rs?ref=8ddf4ce87a1a0a50d015e40bf9cebede68f64d0a", "patch": "@@ -10,91 +10,6 @@ fn foo() -> bool {\n \n #[rustfmt::skip]\n fn main() {\n-    // weird `else` formatting:\n-    if foo() {\n-    } {\n-    }\n-\n-    if foo() {\n-    } if foo() {\n-    }\n-\n-    let _ = { // if as the last expression\n-        let _ = 0;\n-\n-        if foo() {\n-        } if foo() {\n-        }\n-        else {\n-        }\n-    };\n-\n-    let _ = { // if in the middle of a block\n-        if foo() {\n-        } if foo() {\n-        }\n-        else {\n-        }\n-\n-        let _ = 0;\n-    };\n-\n-    if foo() {\n-    } else\n-    {\n-    }\n-\n-    if foo() {\n-    }\n-    else\n-    {\n-    }\n-\n-    if foo() {\n-    } else\n-    if foo() { // the span of the above error should continue here\n-    }\n-\n-    if foo() {\n-    }\n-    else\n-    if foo() { // the span of the above error should continue here\n-    }\n-\n-    // those are ok:\n-    if foo() {\n-    }\n-    {\n-    }\n-\n-    if foo() {\n-    } else {\n-    }\n-\n-    if foo() {\n-    }\n-    else {\n-    }\n-\n-    if foo() {\n-    }\n-    if foo() {\n-    }\n-\n-    if foo() {\n-    } else if foo() {\n-    }\n-\n-    if foo() {\n-    }\n-    else if foo() {\n-    }\n-\n-    if foo() {\n-    }\n-    else if\n-    foo() {}\n-\n     // weird op_eq formatting:\n     let mut a = 42;\n     a =- 35;\n@@ -146,7 +61,7 @@ fn main() {\n \n     // don't lint if the indentation suggests not to\n     let _ = &[\n-        1 + 2, 3 \n+        1 + 2, 3\n                 - 4, 5\n     ];\n     // lint if it doesn't"}, {"sha": "bde434c7e2e78737ae451a9c8dd776712aba5090", "filename": "tests/ui/formatting.stderr", "status": "modified", "additions": 7, "deletions": 82, "changes": 89, "blob_url": "https://github.com/rust-lang/rust/blob/8ddf4ce87a1a0a50d015e40bf9cebede68f64d0a/tests%2Fui%2Fformatting.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8ddf4ce87a1a0a50d015e40bf9cebede68f64d0a/tests%2Fui%2Fformatting.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fformatting.stderr?ref=8ddf4ce87a1a0a50d015e40bf9cebede68f64d0a", "patch": "@@ -1,80 +1,5 @@\n-error: this looks like an `else {..}` but the `else` is missing\n-  --> $DIR/formatting.rs:15:6\n-   |\n-LL |     } {\n-   |      ^\n-   |\n-   = note: `-D clippy::suspicious-else-formatting` implied by `-D warnings`\n-   = note: to remove this lint, add the missing `else` or add a new line before the next block\n-\n-error: this looks like an `else if` but the `else` is missing\n-  --> $DIR/formatting.rs:19:6\n-   |\n-LL |     } if foo() {\n-   |      ^\n-   |\n-   = note: to remove this lint, add the missing `else` or add a new line before the second `if`\n-\n-error: this looks like an `else if` but the `else` is missing\n-  --> $DIR/formatting.rs:26:10\n-   |\n-LL |         } if foo() {\n-   |          ^\n-   |\n-   = note: to remove this lint, add the missing `else` or add a new line before the second `if`\n-\n-error: this looks like an `else if` but the `else` is missing\n-  --> $DIR/formatting.rs:34:10\n-   |\n-LL |         } if foo() {\n-   |          ^\n-   |\n-   = note: to remove this lint, add the missing `else` or add a new line before the second `if`\n-\n-error: this is an `else {..}` but the formatting might hide it\n-  --> $DIR/formatting.rs:43:6\n-   |\n-LL |       } else\n-   |  ______^\n-LL | |     {\n-   | |____^\n-   |\n-   = note: to remove this lint, remove the `else` or remove the new line between `else` and `{..}`\n-\n-error: this is an `else {..}` but the formatting might hide it\n-  --> $DIR/formatting.rs:48:6\n-   |\n-LL |       }\n-   |  ______^\n-LL | |     else\n-LL | |     {\n-   | |____^\n-   |\n-   = note: to remove this lint, remove the `else` or remove the new line between `else` and `{..}`\n-\n-error: this is an `else if` but the formatting might hide it\n-  --> $DIR/formatting.rs:54:6\n-   |\n-LL |       } else\n-   |  ______^\n-LL | |     if foo() { // the span of the above error should continue here\n-   | |____^\n-   |\n-   = note: to remove this lint, remove the `else` or remove the new line between `else` and `if`\n-\n-error: this is an `else if` but the formatting might hide it\n-  --> $DIR/formatting.rs:59:6\n-   |\n-LL |       }\n-   |  ______^\n-LL | |     else\n-LL | |     if foo() { // the span of the above error should continue here\n-   | |____^\n-   |\n-   = note: to remove this lint, remove the `else` or remove the new line between `else` and `if`\n-\n error: this looks like you are trying to use `.. -= ..`, but you really are doing `.. = (- ..)`\n-  --> $DIR/formatting.rs:100:6\n+  --> $DIR/formatting.rs:15:6\n    |\n LL |     a =- 35;\n    |      ^^^^\n@@ -83,23 +8,23 @@ LL |     a =- 35;\n    = note: to remove this lint, use either `-=` or `= -`\n \n error: this looks like you are trying to use `.. *= ..`, but you really are doing `.. = (* ..)`\n-  --> $DIR/formatting.rs:101:6\n+  --> $DIR/formatting.rs:16:6\n    |\n LL |     a =* &191;\n    |      ^^^^\n    |\n    = note: to remove this lint, use either `*=` or `= *`\n \n error: this looks like you are trying to use `.. != ..`, but you really are doing `.. = (! ..)`\n-  --> $DIR/formatting.rs:104:6\n+  --> $DIR/formatting.rs:19:6\n    |\n LL |     b =! false;\n    |      ^^^^\n    |\n    = note: to remove this lint, use either `!=` or `= !`\n \n error: possibly missing a comma here\n-  --> $DIR/formatting.rs:113:19\n+  --> $DIR/formatting.rs:28:19\n    |\n LL |         -1, -2, -3 // <= no comma here\n    |                   ^\n@@ -108,20 +33,20 @@ LL |         -1, -2, -3 // <= no comma here\n    = note: to remove this lint, add a comma or write the expr in a single line\n \n error: possibly missing a comma here\n-  --> $DIR/formatting.rs:117:19\n+  --> $DIR/formatting.rs:32:19\n    |\n LL |         -1, -2, -3 // <= no comma here\n    |                   ^\n    |\n    = note: to remove this lint, add a comma or write the expr in a single line\n \n error: possibly missing a comma here\n-  --> $DIR/formatting.rs:154:11\n+  --> $DIR/formatting.rs:69:11\n    |\n LL |         -1\n    |           ^\n    |\n    = note: to remove this lint, add a comma or write the expr in a single line\n \n-error: aborting due to 14 previous errors\n+error: aborting due to 6 previous errors\n "}, {"sha": "226010ec6df3a24c63898f53a81c227b8a3781af", "filename": "tests/ui/suspicious_else_formatting.rs", "status": "added", "additions": 79, "deletions": 0, "changes": 79, "blob_url": "https://github.com/rust-lang/rust/blob/8ddf4ce87a1a0a50d015e40bf9cebede68f64d0a/tests%2Fui%2Fsuspicious_else_formatting.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8ddf4ce87a1a0a50d015e40bf9cebede68f64d0a/tests%2Fui%2Fsuspicious_else_formatting.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fsuspicious_else_formatting.rs?ref=8ddf4ce87a1a0a50d015e40bf9cebede68f64d0a", "patch": "@@ -0,0 +1,79 @@\n+#![warn(clippy::suspicious_else_formatting)]\n+\n+fn foo() -> bool {\n+    true\n+}\n+\n+#[rustfmt::skip]\n+fn main() {\n+    // weird `else` formatting:\n+    if foo() {\n+    } {\n+    }\n+\n+    if foo() {\n+    } if foo() {\n+    }\n+\n+    let _ = { // if as the last expression\n+        let _ = 0;\n+\n+        if foo() {\n+        } if foo() {\n+        }\n+        else {\n+        }\n+    };\n+\n+    let _ = { // if in the middle of a block\n+        if foo() {\n+        } if foo() {\n+        }\n+        else {\n+        }\n+\n+        let _ = 0;\n+    };\n+\n+    if foo() {\n+    } else\n+    {\n+    }\n+\n+    if foo() {\n+    }\n+    else\n+    {\n+    }\n+\n+    if foo() {\n+    } else\n+    if foo() { // the span of the above error should continue here\n+    }\n+\n+    if foo() {\n+    }\n+    else\n+    if foo() { // the span of the above error should continue here\n+    }\n+\n+    // those are ok:\n+    if foo() {\n+    }\n+    {\n+    }\n+\n+    if foo() {\n+    } else {\n+    }\n+\n+    if foo() {\n+    }\n+    else {\n+    }\n+\n+    if foo() {\n+    }\n+    if foo() {\n+    }\n+}"}, {"sha": "bbc036d376fefc9ead1a8cb034eceb23f3a728c5", "filename": "tests/ui/suspicious_else_formatting.stderr", "status": "added", "additions": 77, "deletions": 0, "changes": 77, "blob_url": "https://github.com/rust-lang/rust/blob/8ddf4ce87a1a0a50d015e40bf9cebede68f64d0a/tests%2Fui%2Fsuspicious_else_formatting.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8ddf4ce87a1a0a50d015e40bf9cebede68f64d0a/tests%2Fui%2Fsuspicious_else_formatting.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fsuspicious_else_formatting.stderr?ref=8ddf4ce87a1a0a50d015e40bf9cebede68f64d0a", "patch": "@@ -0,0 +1,77 @@\n+error: this looks like an `else {..}` but the `else` is missing\n+  --> $DIR/suspicious_else_formatting.rs:11:6\n+   |\n+LL |     } {\n+   |      ^\n+   |\n+   = note: `-D clippy::suspicious-else-formatting` implied by `-D warnings`\n+   = note: to remove this lint, add the missing `else` or add a new line before the next block\n+\n+error: this looks like an `else if` but the `else` is missing\n+  --> $DIR/suspicious_else_formatting.rs:15:6\n+   |\n+LL |     } if foo() {\n+   |      ^\n+   |\n+   = note: to remove this lint, add the missing `else` or add a new line before the second `if`\n+\n+error: this looks like an `else if` but the `else` is missing\n+  --> $DIR/suspicious_else_formatting.rs:22:10\n+   |\n+LL |         } if foo() {\n+   |          ^\n+   |\n+   = note: to remove this lint, add the missing `else` or add a new line before the second `if`\n+\n+error: this looks like an `else if` but the `else` is missing\n+  --> $DIR/suspicious_else_formatting.rs:30:10\n+   |\n+LL |         } if foo() {\n+   |          ^\n+   |\n+   = note: to remove this lint, add the missing `else` or add a new line before the second `if`\n+\n+error: this is an `else {..}` but the formatting might hide it\n+  --> $DIR/suspicious_else_formatting.rs:39:6\n+   |\n+LL |       } else\n+   |  ______^\n+LL | |     {\n+   | |____^\n+   |\n+   = note: to remove this lint, remove the `else` or remove the new line between `else` and `{..}`\n+\n+error: this is an `else {..}` but the formatting might hide it\n+  --> $DIR/suspicious_else_formatting.rs:44:6\n+   |\n+LL |       }\n+   |  ______^\n+LL | |     else\n+LL | |     {\n+   | |____^\n+   |\n+   = note: to remove this lint, remove the `else` or remove the new line between `else` and `{..}`\n+\n+error: this is an `else if` but the formatting might hide it\n+  --> $DIR/suspicious_else_formatting.rs:50:6\n+   |\n+LL |       } else\n+   |  ______^\n+LL | |     if foo() { // the span of the above error should continue here\n+   | |____^\n+   |\n+   = note: to remove this lint, remove the `else` or remove the new line between `else` and `if`\n+\n+error: this is an `else if` but the formatting might hide it\n+  --> $DIR/suspicious_else_formatting.rs:55:6\n+   |\n+LL |       }\n+   |  ______^\n+LL | |     else\n+LL | |     if foo() { // the span of the above error should continue here\n+   | |____^\n+   |\n+   = note: to remove this lint, remove the `else` or remove the new line between `else` and `if`\n+\n+error: aborting due to 8 previous errors\n+"}]}