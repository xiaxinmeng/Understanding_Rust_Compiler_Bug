{"sha": "82a1bb331438f0a1432f13a08cb431475dab9907", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgyYTFiYjMzMTQzOGYwYTE0MzJmMTNhMDhjYjQzMTQ3NWRhYjk5MDc=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2018-12-19T03:03:12Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2019-01-02T19:34:04Z"}, "message": "Remove no longer working test", "tree": {"sha": "798f3ca34ada02ab833e52aa9538b315f485356a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/798f3ca34ada02ab833e52aa9538b315f485356a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/82a1bb331438f0a1432f13a08cb431475dab9907", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/82a1bb331438f0a1432f13a08cb431475dab9907", "html_url": "https://github.com/rust-lang/rust/commit/82a1bb331438f0a1432f13a08cb431475dab9907", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/82a1bb331438f0a1432f13a08cb431475dab9907/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a175969b293ccb9db3aefbe2cc1656a816295025", "url": "https://api.github.com/repos/rust-lang/rust/commits/a175969b293ccb9db3aefbe2cc1656a816295025", "html_url": "https://github.com/rust-lang/rust/commit/a175969b293ccb9db3aefbe2cc1656a816295025"}], "stats": {"total": 141, "additions": 0, "deletions": 141}, "files": [{"sha": "8a18aadf36a8bb635684927b165c09f869f0c862", "filename": "src/test/run-make-fulldeps/llvm-pass/Makefile", "status": "removed", "additions": 0, "deletions": 28, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/a175969b293ccb9db3aefbe2cc1656a816295025/src%2Ftest%2Frun-make-fulldeps%2Fllvm-pass%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/a175969b293ccb9db3aefbe2cc1656a816295025/src%2Ftest%2Frun-make-fulldeps%2Fllvm-pass%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Fllvm-pass%2FMakefile?ref=a175969b293ccb9db3aefbe2cc1656a816295025", "patch": "@@ -1,28 +0,0 @@\n--include ../tools.mk\n-\n-ifeq ($(UNAME),Darwin)\n-PLUGIN_FLAGS := -C link-args=-Wl,-undefined,dynamic_lookup\n-endif\n-\n-ifeq ($(findstring stage1,$(RUST_BUILD_STAGE)),stage1)\n-# ignore stage1\n-all:\n-\n-else\n-# Windows doesn't correctly handle include statements with escaping paths,\n-# so this test will not get run on Windows.\n-ifdef IS_WINDOWS\n-all:\n-else\n-all: $(call NATIVE_STATICLIB,llvm-function-pass) $(call NATIVE_STATICLIB,llvm-module-pass)\n-\t$(RUSTC) plugin.rs -C prefer-dynamic $(PLUGIN_FLAGS)\n-\t$(RUSTC) main.rs\n-\n-$(TMPDIR)/libllvm-function-pass.o:\n-\t$(CXX) $(CFLAGS) $(LLVM_CXXFLAGS) -c llvm-function-pass.so.cc -o $(TMPDIR)/libllvm-function-pass.o\n-\n-$(TMPDIR)/libllvm-module-pass.o:\n-\t$(CXX) $(CFLAGS) $(LLVM_CXXFLAGS) -c llvm-module-pass.so.cc -o $(TMPDIR)/libllvm-module-pass.o\n-endif\n-\n-endif"}, {"sha": "267c68853ac4383d121301c7dcdb833e9b13e45a", "filename": "src/test/run-make-fulldeps/llvm-pass/llvm-function-pass.so.cc", "status": "removed", "additions": 0, "deletions": 46, "changes": 46, "blob_url": "https://github.com/rust-lang/rust/blob/a175969b293ccb9db3aefbe2cc1656a816295025/src%2Ftest%2Frun-make-fulldeps%2Fllvm-pass%2Fllvm-function-pass.so.cc", "raw_url": "https://github.com/rust-lang/rust/raw/a175969b293ccb9db3aefbe2cc1656a816295025/src%2Ftest%2Frun-make-fulldeps%2Fllvm-pass%2Fllvm-function-pass.so.cc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Fllvm-pass%2Fllvm-function-pass.so.cc?ref=a175969b293ccb9db3aefbe2cc1656a816295025", "patch": "@@ -1,46 +0,0 @@\n-#include <stdio.h>\n-#include <stdlib.h>\n-#include <unistd.h>\n-\n-#include \"llvm/Pass.h\"\n-#include \"llvm/IR/Function.h\"\n-\n-using namespace llvm;\n-\n-namespace {\n-\n-  class TestLLVMPass : public FunctionPass {\n-\n-  public:\n-\n-    static char ID;\n-    TestLLVMPass() : FunctionPass(ID) { }\n-\n-    bool runOnFunction(Function &F) override;\n-\n-    StringRef getPassName() const override {\n-      return \"Some LLVM pass\";\n-    }\n-\n-  };\n-\n-}\n-\n-bool TestLLVMPass::runOnFunction(Function &F) {\n-  // A couple examples of operations that previously caused segmentation faults\n-  // https://github.com/rust-lang/rust/issues/31067\n-\n-  for (auto N = F.begin(); N != F.end(); ++N) {\n-    /* code */\n-  }\n-\n-  LLVMContext &C = F.getContext();\n-  IntegerType *Int8Ty  = IntegerType::getInt8Ty(C);\n-  PointerType::get(Int8Ty, 0);\n-  return true;\n-}\n-\n-char TestLLVMPass::ID = 0;\n-\n-static RegisterPass<TestLLVMPass> RegisterAFLPass(\n-  \"some-llvm-function-pass\", \"Some LLVM pass\");"}, {"sha": "b3ee0c1a6c10bb2b909161c6e13d49171e287a6b", "filename": "src/test/run-make-fulldeps/llvm-pass/llvm-module-pass.so.cc", "status": "removed", "additions": 0, "deletions": 45, "changes": 45, "blob_url": "https://github.com/rust-lang/rust/blob/a175969b293ccb9db3aefbe2cc1656a816295025/src%2Ftest%2Frun-make-fulldeps%2Fllvm-pass%2Fllvm-module-pass.so.cc", "raw_url": "https://github.com/rust-lang/rust/raw/a175969b293ccb9db3aefbe2cc1656a816295025/src%2Ftest%2Frun-make-fulldeps%2Fllvm-pass%2Fllvm-module-pass.so.cc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Fllvm-pass%2Fllvm-module-pass.so.cc?ref=a175969b293ccb9db3aefbe2cc1656a816295025", "patch": "@@ -1,45 +0,0 @@\n-#include <stdio.h>\n-#include <stdlib.h>\n-#include <unistd.h>\n-\n-#include \"llvm/IR/Module.h\"\n-\n-using namespace llvm;\n-\n-namespace {\n-\n-  class TestLLVMPass : public ModulePass {\n-\n-  public:\n-\n-    static char ID;\n-    TestLLVMPass() : ModulePass(ID) { }\n-\n-    bool runOnModule(Module &M) override;\n-\n-    StringRef getPassName() const override {\n-      return \"Some LLVM pass\";\n-    }\n-\n-  };\n-\n-}\n-\n-bool TestLLVMPass::runOnModule(Module &M) {\n-  // A couple examples of operations that previously caused segmentation faults\n-  // https://github.com/rust-lang/rust/issues/31067\n-\n-  for (auto F = M.begin(); F != M.end(); ++F) {\n-    /* code */\n-  }\n-\n-  LLVMContext &C = M.getContext();\n-  IntegerType *Int8Ty  = IntegerType::getInt8Ty(C);\n-  PointerType::get(Int8Ty, 0);\n-  return true;\n-}\n-\n-char TestLLVMPass::ID = 0;\n-\n-static RegisterPass<TestLLVMPass> RegisterAFLPass(\n-  \"some-llvm-module-pass\", \"Some LLVM pass\");"}, {"sha": "0c13b890c6e3a4e096cd1525f5ba62fdf7586b2a", "filename": "src/test/run-make-fulldeps/llvm-pass/main.rs", "status": "removed", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a175969b293ccb9db3aefbe2cc1656a816295025/src%2Ftest%2Frun-make-fulldeps%2Fllvm-pass%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a175969b293ccb9db3aefbe2cc1656a816295025/src%2Ftest%2Frun-make-fulldeps%2Fllvm-pass%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Fllvm-pass%2Fmain.rs?ref=a175969b293ccb9db3aefbe2cc1656a816295025", "patch": "@@ -1,4 +0,0 @@\n-#![feature(plugin)]\n-#![plugin(some_plugin)]\n-\n-fn main() {}"}, {"sha": "f0e4800046cf4da37097252d569cce8851bf0d0c", "filename": "src/test/run-make-fulldeps/llvm-pass/plugin.rs", "status": "removed", "additions": 0, "deletions": 18, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/a175969b293ccb9db3aefbe2cc1656a816295025/src%2Ftest%2Frun-make-fulldeps%2Fllvm-pass%2Fplugin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a175969b293ccb9db3aefbe2cc1656a816295025/src%2Ftest%2Frun-make-fulldeps%2Fllvm-pass%2Fplugin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Fllvm-pass%2Fplugin.rs?ref=a175969b293ccb9db3aefbe2cc1656a816295025", "patch": "@@ -1,18 +0,0 @@\n-#![feature(plugin_registrar, rustc_private)]\n-#![crate_type = \"dylib\"]\n-#![crate_name = \"some_plugin\"]\n-\n-extern crate rustc;\n-extern crate rustc_plugin;\n-\n-#[link(name = \"llvm-function-pass\", kind = \"static\")]\n-#[link(name = \"llvm-module-pass\", kind = \"static\")]\n-extern {}\n-\n-use rustc_plugin::registry::Registry;\n-\n-#[plugin_registrar]\n-pub fn plugin_registrar(reg: &mut Registry) {\n-    reg.register_llvm_pass(\"some-llvm-function-pass\");\n-    reg.register_llvm_pass(\"some-llvm-module-pass\");\n-}"}]}