{"sha": "e538a4a7debaff6627c11f4a5d2cb29beea0b336", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU1MzhhNGE3ZGViYWZmNjYyN2MxMWY0YTVkMmNiMjliZWVhMGIzMzY=", "commit": {"author": {"name": "Tobias Bieniek", "email": "tobias.bieniek@gmail.com", "date": "2018-11-13T12:54:51Z"}, "committer": {"name": "Tobias Bieniek", "email": "tobias.bieniek@gmail.com", "date": "2018-11-21T10:48:15Z"}, "message": "core/benches/num: Add `from_str/from_str_radix()` benchmarks", "tree": {"sha": "f750e3bde95552b47f92ba42d01d247af04b4050", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f750e3bde95552b47f92ba42d01d247af04b4050"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e538a4a7debaff6627c11f4a5d2cb29beea0b336", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e538a4a7debaff6627c11f4a5d2cb29beea0b336", "html_url": "https://github.com/rust-lang/rust/commit/e538a4a7debaff6627c11f4a5d2cb29beea0b336", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e538a4a7debaff6627c11f4a5d2cb29beea0b336/comments", "author": {"login": "Turbo87", "id": 141300, "node_id": "MDQ6VXNlcjE0MTMwMA==", "avatar_url": "https://avatars.githubusercontent.com/u/141300?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Turbo87", "html_url": "https://github.com/Turbo87", "followers_url": "https://api.github.com/users/Turbo87/followers", "following_url": "https://api.github.com/users/Turbo87/following{/other_user}", "gists_url": "https://api.github.com/users/Turbo87/gists{/gist_id}", "starred_url": "https://api.github.com/users/Turbo87/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Turbo87/subscriptions", "organizations_url": "https://api.github.com/users/Turbo87/orgs", "repos_url": "https://api.github.com/users/Turbo87/repos", "events_url": "https://api.github.com/users/Turbo87/events{/privacy}", "received_events_url": "https://api.github.com/users/Turbo87/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Turbo87", "id": 141300, "node_id": "MDQ6VXNlcjE0MTMwMA==", "avatar_url": "https://avatars.githubusercontent.com/u/141300?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Turbo87", "html_url": "https://github.com/Turbo87", "followers_url": "https://api.github.com/users/Turbo87/followers", "following_url": "https://api.github.com/users/Turbo87/following{/other_user}", "gists_url": "https://api.github.com/users/Turbo87/gists{/gist_id}", "starred_url": "https://api.github.com/users/Turbo87/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Turbo87/subscriptions", "organizations_url": "https://api.github.com/users/Turbo87/orgs", "repos_url": "https://api.github.com/users/Turbo87/repos", "events_url": "https://api.github.com/users/Turbo87/events{/privacy}", "received_events_url": "https://api.github.com/users/Turbo87/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "780658a464603fa755d94b27f72a375bd81d07ea", "url": "https://api.github.com/repos/rust-lang/rust/commits/780658a464603fa755d94b27f72a375bd81d07ea", "html_url": "https://github.com/rust-lang/rust/commit/780658a464603fa755d94b27f72a375bd81d07ea"}], "stats": {"total": 105, "additions": 105, "deletions": 0}, "files": [{"sha": "b57e167b05d9eb1af9e2b58e516e23620ac738f3", "filename": "src/libcore/benches/num/mod.rs", "status": "modified", "additions": 105, "deletions": 0, "changes": 105, "blob_url": "https://github.com/rust-lang/rust/blob/e538a4a7debaff6627c11f4a5d2cb29beea0b336/src%2Flibcore%2Fbenches%2Fnum%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e538a4a7debaff6627c11f4a5d2cb29beea0b336/src%2Flibcore%2Fbenches%2Fnum%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fbenches%2Fnum%2Fmod.rs?ref=e538a4a7debaff6627c11f4a5d2cb29beea0b336", "patch": "@@ -10,3 +10,108 @@\n \n mod flt2dec;\n mod dec2flt;\n+\n+use test::Bencher;\n+use std::str::FromStr;\n+\n+const ASCII_NUMBERS: [&str; 19] = [\n+    \"0\",\n+    \"1\",\n+    \"2\",\n+    \"43\",\n+    \"765\",\n+    \"76567\",\n+    \"987245987\",\n+    \"-4aa32\",\n+    \"1786235\",\n+    \"8723095\",\n+    \"f##5s\",\n+    \"83638730\",\n+    \"-2345\",\n+    \"562aa43\",\n+    \"-1\",\n+    \"-0\",\n+    \"abc\",\n+    \"xyz\",\n+    \"c0ffee\",\n+];\n+\n+macro_rules! from_str_bench {\n+    ($mac:ident, $t:ty) => (\n+        #[bench]\n+        fn $mac(b: &mut Bencher) {\n+            b.iter(|| {\n+                ASCII_NUMBERS\n+                    .iter()\n+                    .cycle()\n+                    .take(5_000)\n+                    .filter_map(|s| <($t)>::from_str(s).ok())\n+                    .max()\n+            })\n+        }\n+    )\n+}\n+\n+macro_rules! from_str_radix_bench {\n+    ($mac:ident, $t:ty, $radix:expr) => (\n+        #[bench]\n+        fn $mac(b: &mut Bencher) {\n+            b.iter(|| {\n+                ASCII_NUMBERS\n+                    .iter()\n+                    .cycle()\n+                    .take(5_000)\n+                    .filter_map(|s| <($t)>::from_str_radix(s, $radix).ok())\n+                    .max()\n+            })\n+        }\n+    )\n+}\n+\n+from_str_bench!(bench_u8_from_str, u8);\n+from_str_radix_bench!(bench_u8_from_str_radix_2, u8, 2);\n+from_str_radix_bench!(bench_u8_from_str_radix_10, u8, 10);\n+from_str_radix_bench!(bench_u8_from_str_radix_16, u8, 16);\n+from_str_radix_bench!(bench_u8_from_str_radix_36, u8, 36);\n+\n+from_str_bench!(bench_u16_from_str, u16);\n+from_str_radix_bench!(bench_u16_from_str_radix_2, u16, 2);\n+from_str_radix_bench!(bench_u16_from_str_radix_10, u16, 10);\n+from_str_radix_bench!(bench_u16_from_str_radix_16, u16, 16);\n+from_str_radix_bench!(bench_u16_from_str_radix_36, u16, 36);\n+\n+from_str_bench!(bench_u32_from_str, u32);\n+from_str_radix_bench!(bench_u32_from_str_radix_2, u32, 2);\n+from_str_radix_bench!(bench_u32_from_str_radix_10, u32, 10);\n+from_str_radix_bench!(bench_u32_from_str_radix_16, u32, 16);\n+from_str_radix_bench!(bench_u32_from_str_radix_36, u32, 36);\n+\n+from_str_bench!(bench_u64_from_str, u64);\n+from_str_radix_bench!(bench_u64_from_str_radix_2, u64, 2);\n+from_str_radix_bench!(bench_u64_from_str_radix_10, u64, 10);\n+from_str_radix_bench!(bench_u64_from_str_radix_16, u64, 16);\n+from_str_radix_bench!(bench_u64_from_str_radix_36, u64, 36);\n+\n+from_str_bench!(bench_i8_from_str, i8);\n+from_str_radix_bench!(bench_i8_from_str_radix_2, i8, 2);\n+from_str_radix_bench!(bench_i8_from_str_radix_10, i8, 10);\n+from_str_radix_bench!(bench_i8_from_str_radix_16, i8, 16);\n+from_str_radix_bench!(bench_i8_from_str_radix_36, i8, 36);\n+\n+from_str_bench!(bench_i16_from_str, i16);\n+from_str_radix_bench!(bench_i16_from_str_radix_2, i16, 2);\n+from_str_radix_bench!(bench_i16_from_str_radix_10, i16, 10);\n+from_str_radix_bench!(bench_i16_from_str_radix_16, i16, 16);\n+from_str_radix_bench!(bench_i16_from_str_radix_36, i16, 36);\n+\n+from_str_bench!(bench_i32_from_str, i32);\n+from_str_radix_bench!(bench_i32_from_str_radix_2, i32, 2);\n+from_str_radix_bench!(bench_i32_from_str_radix_10, i32, 10);\n+from_str_radix_bench!(bench_i32_from_str_radix_16, i32, 16);\n+from_str_radix_bench!(bench_i32_from_str_radix_36, i32, 36);\n+\n+from_str_bench!(bench_i64_from_str, i64);\n+from_str_radix_bench!(bench_i64_from_str_radix_2, i64, 2);\n+from_str_radix_bench!(bench_i64_from_str_radix_10, i64, 10);\n+from_str_radix_bench!(bench_i64_from_str_radix_16, i64, 16);\n+from_str_radix_bench!(bench_i64_from_str_radix_36, i64, 36);"}]}