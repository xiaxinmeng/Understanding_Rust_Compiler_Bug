{"sha": "02782bba604e3edc5d356dd3e153667cf1474949", "node_id": "C_kwDOAAsO6NoAKDAyNzgyYmJhNjA0ZTNlZGM1ZDM1NmRkM2UxNTM2NjdjZjE0NzQ5NDk", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2021-11-29T09:24:51Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2021-11-30T21:53:20Z"}, "message": "Return ConstStability instead of &ConstStability in Item::const_stability", "tree": {"sha": "a76fe453fa2c8968857107494bda38f60c9d82c4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a76fe453fa2c8968857107494bda38f60c9d82c4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/02782bba604e3edc5d356dd3e153667cf1474949", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/02782bba604e3edc5d356dd3e153667cf1474949", "html_url": "https://github.com/rust-lang/rust/commit/02782bba604e3edc5d356dd3e153667cf1474949", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/02782bba604e3edc5d356dd3e153667cf1474949/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b647c902620f862106da2baf6eb5575289cb447f", "url": "https://api.github.com/repos/rust-lang/rust/commits/b647c902620f862106da2baf6eb5575289cb447f", "html_url": "https://github.com/rust-lang/rust/commit/b647c902620f862106da2baf6eb5575289cb447f"}], "stats": {"total": 13, "additions": 5, "deletions": 8}, "files": [{"sha": "5aaaa99dadb40a138f0fc39e8bbeca7f7aa8d544", "filename": "src/librustdoc/clean/types.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/02782bba604e3edc5d356dd3e153667cf1474949/src%2Flibrustdoc%2Fclean%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/02782bba604e3edc5d356dd3e153667cf1474949/src%2Flibrustdoc%2Fclean%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fclean%2Ftypes.rs?ref=02782bba604e3edc5d356dd3e153667cf1474949", "patch": "@@ -376,8 +376,8 @@ impl Item {\n         self.def_id.as_def_id().and_then(|did| tcx.lookup_stability(did))\n     }\n \n-    crate fn const_stability<'tcx>(&self, tcx: TyCtxt<'tcx>) -> Option<&'tcx ConstStability> {\n-        self.def_id.as_def_id().and_then(|did| tcx.lookup_const_stability(did))\n+    crate fn const_stability<'tcx>(&self, tcx: TyCtxt<'tcx>) -> Option<ConstStability> {\n+        self.def_id.as_def_id().and_then(|did| tcx.lookup_const_stability(did)).map(|cs| *cs)\n     }\n \n     crate fn deprecation(&self, tcx: TyCtxt<'_>) -> Option<Deprecation> {"}, {"sha": "fdb52703edf77a48ccc34e0e52f1df572380515a", "filename": "src/librustdoc/html/format.rs", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/02782bba604e3edc5d356dd3e153667cf1474949/src%2Flibrustdoc%2Fhtml%2Fformat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/02782bba604e3edc5d356dd3e153667cf1474949/src%2Flibrustdoc%2Fhtml%2Fformat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fformat.rs?ref=02782bba604e3edc5d356dd3e153667cf1474949", "patch": "@@ -1349,10 +1349,7 @@ impl PrintWithSpace for hir::Mutability {\n     }\n }\n \n-crate fn print_constness_with_space(\n-    c: &hir::Constness,\n-    s: Option<&ConstStability>,\n-) -> &'static str {\n+crate fn print_constness_with_space(c: &hir::Constness, s: Option<ConstStability>) -> &'static str {\n     match (c, s) {\n         // const stable or when feature(staged_api) is not set\n         ("}, {"sha": "a1db66a4d52dbc28bab67f4f7b57c093dd92feaf", "filename": "src/librustdoc/html/render/mod.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/02782bba604e3edc5d356dd3e153667cf1474949/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/02782bba604e3edc5d356dd3e153667cf1474949/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs?ref=02782bba604e3edc5d356dd3e153667cf1474949", "patch": "@@ -805,7 +805,7 @@ fn assoc_type(\n fn render_stability_since_raw(\n     w: &mut Buffer,\n     ver: Option<Symbol>,\n-    const_stability: Option<&ConstStability>,\n+    const_stability: Option<ConstStability>,\n     containing_ver: Option<Symbol>,\n     containing_const_ver: Option<Symbol>,\n ) {\n@@ -814,7 +814,7 @@ fn render_stability_since_raw(\n     match (ver, const_stability) {\n         // stable and const stable\n         (Some(v), Some(ConstStability { level: StabilityLevel::Stable { since }, .. }))\n-            if Some(*since) != containing_const_ver =>\n+            if Some(since) != containing_const_ver =>\n         {\n             write!(\n                 w,"}]}