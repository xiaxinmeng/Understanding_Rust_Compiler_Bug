{"sha": "676604bdd2788dab707ad795e8d76e46c5f7e00e", "node_id": "C_kwDOAAsO6NoAKDY3NjYwNGJkZDI3ODhkYWI3MDdhZDc5NWU4ZDc2ZTQ2YzVmN2UwMGU", "commit": {"author": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2022-05-19T11:51:32Z"}, "committer": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2022-05-19T11:51:32Z"}, "message": "Add regression test for #88119", "tree": {"sha": "ac5732fc675308aefc7fe4196631f8a25534c96e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ac5732fc675308aefc7fe4196631f8a25534c96e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/676604bdd2788dab707ad795e8d76e46c5f7e00e", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEClCZYSKPPkQPouAvN5zu/dY+XdcFAmKGL0QACgkQN5zu/dY+\nXddp1Q/+J0V0S7iRRWT+ueVJj7LTJQzMrAw5IXweve7VBtWIOACFxN8jkt4z85xr\nUwFqe2HhucMjYZ5qCLnxcU+EMDgp2GsndqzjZJChNDM3ECVYO/pvAZs7wDCAvjOT\n7TJfAiAeRHWf1AHsGEQitWBjT62M5+aR1JaUKU0Pjb64r7dICeI9pp7e3DHI7jtU\nlpI9hMmOVuO/RG8FAE1hNVWT1xGUi67rG5UmoSpr1a9eyQ0bQ0IO3Vo5NowinlFV\ndkNZXMeRHStzQpx/sYTX9ZDnIlzP2Gtf/VhjE4Lz813nZnkYyZCtxAC9x1CnoXz5\n/GgqtgGVzryQFNqdHEnrxwD3BG7lYcKDymUZEaq2lRSIBx7lRrlUJP3q5DaTewB3\n9mijggTiU/khLPBmPrgLy8/qxWL4goP7O+9Y02D42/KQFO6+zU9TEkd+UCKwZtJw\nM/lYwE1XyZMo+WIANJgkiZKRO03i4g84L/WGJdIO/dValQUrT4S/vuVPBBb7rvp6\nVdmhS77ByrBL88unqe0hqWOcG+kvNHEtnn1GYZo4EzYatmRSdbMe/OoXY1sIux5p\nqlECQ6Ln4qpHL8KXkRLbLfXJVAqsUi7sjwZ+QcJp+8UMfPnpQzfQFA3Kjgxau4vR\n3B7akbwAHU8BvnxVKe8GoPMeQmOrAAFw2f5KKvHokXyCQACOStM=\n=nJti\n-----END PGP SIGNATURE-----", "payload": "tree ac5732fc675308aefc7fe4196631f8a25534c96e\nparent 67a9bcb31b85e87cc8bb327022632e48a0ca64a8\nauthor Yuki Okushi <jtitor@2k36.org> 1652961092 +0900\ncommitter Yuki Okushi <jtitor@2k36.org> 1652961092 +0900\n\nAdd regression test for #88119\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/676604bdd2788dab707ad795e8d76e46c5f7e00e", "html_url": "https://github.com/rust-lang/rust/commit/676604bdd2788dab707ad795e8d76e46c5f7e00e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/676604bdd2788dab707ad795e8d76e46c5f7e00e/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "67a9bcb31b85e87cc8bb327022632e48a0ca64a8", "url": "https://api.github.com/repos/rust-lang/rust/commits/67a9bcb31b85e87cc8bb327022632e48a0ca64a8", "html_url": "https://github.com/rust-lang/rust/commit/67a9bcb31b85e87cc8bb327022632e48a0ca64a8"}], "stats": {"total": 35, "additions": 35, "deletions": 0}, "files": [{"sha": "70dfa7f708b4f6f0a46437998ea0e44d6b8c3946", "filename": "src/test/ui/const-generics/issues/issue-88119.rs", "status": "added", "additions": 35, "deletions": 0, "changes": 35, "blob_url": "https://github.com/rust-lang/rust/blob/676604bdd2788dab707ad795e8d76e46c5f7e00e/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-88119.rs", "raw_url": "https://github.com/rust-lang/rust/raw/676604bdd2788dab707ad795e8d76e46c5f7e00e/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-88119.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-88119.rs?ref=676604bdd2788dab707ad795e8d76e46c5f7e00e", "patch": "@@ -0,0 +1,35 @@\n+// check-pass\n+\n+#![allow(incomplete_features)]\n+#![feature(const_trait_impl, generic_const_exprs)]\n+\n+trait ConstName {\n+    const NAME_BYTES: &'static [u8];\n+}\n+\n+impl const ConstName for u8 {\n+    const NAME_BYTES: &'static [u8] = b\"u8\";\n+}\n+\n+const fn name_len<T: ?Sized + ConstName>() -> usize {\n+    T::NAME_BYTES.len()\n+}\n+\n+impl<T: ?Sized + ConstName> const ConstName for &T\n+where\n+    [(); name_len::<T>()]:,\n+{\n+    const NAME_BYTES: &'static [u8] = b\"&T\";\n+}\n+\n+impl<T: ?Sized + ConstName> const ConstName for &mut T\n+where\n+    [(); name_len::<T>()]:,\n+{\n+    const NAME_BYTES: &'static [u8] = b\"&mut T\";\n+}\n+\n+pub const ICE_1: &'static [u8] = <&&mut u8 as ConstName>::NAME_BYTES;\n+pub const ICE_2: &'static [u8] = <&mut &u8 as ConstName>::NAME_BYTES;\n+\n+fn main() {}"}]}