{"sha": "7f79ceb438321810a8199fb099067cd648c638da", "node_id": "C_kwDOAAsO6NoAKDdmNzljZWI0MzgzMjE4MTBhODE5OWZiMDk5MDY3Y2Q2NDhjNjM4ZGE", "commit": {"author": {"name": "Matthew Esposito", "email": "matt@matthew.science", "date": "2023-06-09T14:47:41Z"}, "committer": {"name": "Matthew Esposito", "email": "matt@matthew.science", "date": "2023-06-09T14:47:41Z"}, "message": "Compile rustc_driver by default", "tree": {"sha": "f8b2bae4029f3805d0768ada08b944e9d148fd50", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f8b2bae4029f3805d0768ada08b944e9d148fd50"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7f79ceb438321810a8199fb099067cd648c638da", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAgMf0yuypkx3X5+SoBCZZ1nWHvso\ng1EIVz8MLpfPIq8/kAAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQIaxZn3dsVN3tHkvFIeFmeiOgdZ6gdDGN/LKd2dGj8ASGzAra/kVJWawc1VQEFDHpc\ngf67bm31d7FhlA0i4uJAQ=\n-----END SSH SIGNATURE-----", "payload": "tree f8b2bae4029f3805d0768ada08b944e9d148fd50\nparent 343ad6f0596fa3222f3168b74b3e8571066e77bb\nauthor Matthew Esposito <matt@matthew.science> 1686322061 -0400\ncommitter Matthew Esposito <matt@matthew.science> 1686322061 -0400\n\nCompile rustc_driver by default\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7f79ceb438321810a8199fb099067cd648c638da", "html_url": "https://github.com/rust-lang/rust/commit/7f79ceb438321810a8199fb099067cd648c638da", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7f79ceb438321810a8199fb099067cd648c638da/comments", "author": {"login": "sigaloid", "id": 69441971, "node_id": "MDQ6VXNlcjY5NDQxOTcx", "avatar_url": "https://avatars.githubusercontent.com/u/69441971?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sigaloid", "html_url": "https://github.com/sigaloid", "followers_url": "https://api.github.com/users/sigaloid/followers", "following_url": "https://api.github.com/users/sigaloid/following{/other_user}", "gists_url": "https://api.github.com/users/sigaloid/gists{/gist_id}", "starred_url": "https://api.github.com/users/sigaloid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sigaloid/subscriptions", "organizations_url": "https://api.github.com/users/sigaloid/orgs", "repos_url": "https://api.github.com/users/sigaloid/repos", "events_url": "https://api.github.com/users/sigaloid/events{/privacy}", "received_events_url": "https://api.github.com/users/sigaloid/received_events", "type": "User", "site_admin": false}, "committer": {"login": "sigaloid", "id": 69441971, "node_id": "MDQ6VXNlcjY5NDQxOTcx", "avatar_url": "https://avatars.githubusercontent.com/u/69441971?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sigaloid", "html_url": "https://github.com/sigaloid", "followers_url": "https://api.github.com/users/sigaloid/followers", "following_url": "https://api.github.com/users/sigaloid/following{/other_user}", "gists_url": "https://api.github.com/users/sigaloid/gists{/gist_id}", "starred_url": "https://api.github.com/users/sigaloid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sigaloid/subscriptions", "organizations_url": "https://api.github.com/users/sigaloid/orgs", "repos_url": "https://api.github.com/users/sigaloid/repos", "events_url": "https://api.github.com/users/sigaloid/events{/privacy}", "received_events_url": "https://api.github.com/users/sigaloid/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "343ad6f0596fa3222f3168b74b3e8571066e77bb", "url": "https://api.github.com/repos/rust-lang/rust/commits/343ad6f0596fa3222f3168b74b3e8571066e77bb", "html_url": "https://github.com/rust-lang/rust/commit/343ad6f0596fa3222f3168b74b3e8571066e77bb"}], "stats": {"total": 7, "additions": 6, "deletions": 1}, "files": [{"sha": "fef7e4db9ab85f7820db6b42733d28a6fe01efeb", "filename": "src/bootstrap/doc.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/7f79ceb438321810a8199fb099067cd648c638da/src%2Fbootstrap%2Fdoc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7f79ceb438321810a8199fb099067cd648c638da/src%2Fbootstrap%2Fdoc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fdoc.rs?ref=7f79ceb438321810a8199fb099067cd648c638da", "patch": "@@ -667,7 +667,7 @@ impl Step for Rustc {\n     /// Compiler documentation is distributed separately, so we make sure\n     /// we do not merge it with the other documentation from std, test and\n     /// proc_macros. This is largely just a wrapper around `cargo doc`.\n-    fn run(self, builder: &Builder<'_>) {\n+    fn run(mut self, builder: &Builder<'_>) {\n         let stage = self.stage;\n         let target = self.target;\n \n@@ -725,6 +725,11 @@ impl Step for Rustc {\n         cargo.rustdocflag(\"ena=https://docs.rs/ena/latest/\");\n \n         let mut to_open = None;\n+\n+        if self.crates.is_empty() {\n+            self.crates = INTERNER.intern_list(vec![\"rustc_driver\".to_owned()]);\n+        };\n+\n         for krate in &*self.crates {\n             // Create all crate output directories first to make sure rustdoc uses\n             // relative links."}]}