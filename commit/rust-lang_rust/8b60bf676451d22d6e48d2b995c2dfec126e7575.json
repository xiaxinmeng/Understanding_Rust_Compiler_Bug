{"sha": "8b60bf676451d22d6e48d2b995c2dfec126e7575", "node_id": "C_kwDOAAsO6NoAKDhiNjBiZjY3NjQ1MWQyMmQ2ZTQ4ZDJiOTk1YzJkZmVjMTI2ZTc1NzU", "commit": {"author": {"name": "Deadbeef", "email": "ent3rm4n@gmail.com", "date": "2022-04-13T14:13:36Z"}, "committer": {"name": "Lukas Wirth", "email": "lukastw97@gmail.com", "date": "2022-04-13T14:55:10Z"}, "message": "Update CI for Rust bors", "tree": {"sha": "a1fb1ce1e237cd4dc714bf9639391edd7b01ba6f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a1fb1ce1e237cd4dc714bf9639391edd7b01ba6f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8b60bf676451d22d6e48d2b995c2dfec126e7575", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8b60bf676451d22d6e48d2b995c2dfec126e7575", "html_url": "https://github.com/rust-lang/rust/commit/8b60bf676451d22d6e48d2b995c2dfec126e7575", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8b60bf676451d22d6e48d2b995c2dfec126e7575/comments", "author": {"login": "fee1-dead", "id": 43851243, "node_id": "MDQ6VXNlcjQzODUxMjQz", "avatar_url": "https://avatars.githubusercontent.com/u/43851243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fee1-dead", "html_url": "https://github.com/fee1-dead", "followers_url": "https://api.github.com/users/fee1-dead/followers", "following_url": "https://api.github.com/users/fee1-dead/following{/other_user}", "gists_url": "https://api.github.com/users/fee1-dead/gists{/gist_id}", "starred_url": "https://api.github.com/users/fee1-dead/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fee1-dead/subscriptions", "organizations_url": "https://api.github.com/users/fee1-dead/orgs", "repos_url": "https://api.github.com/users/fee1-dead/repos", "events_url": "https://api.github.com/users/fee1-dead/events{/privacy}", "received_events_url": "https://api.github.com/users/fee1-dead/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ac736dc667b079e629ad629654956f87c2e08c9a", "url": "https://api.github.com/repos/rust-lang/rust/commits/ac736dc667b079e629ad629654956f87c2e08c9a", "html_url": "https://github.com/rust-lang/rust/commit/ac736dc667b079e629ad629654956f87c2e08c9a"}], "stats": {"total": 27, "additions": 25, "deletions": 2}, "files": [{"sha": "feb6cc95ac7e8dcae1059d4a777883bf85f809ee", "filename": ".github/workflows/ci.yaml", "status": "modified", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/8b60bf676451d22d6e48d2b995c2dfec126e7575/.github%2Fworkflows%2Fci.yaml", "raw_url": "https://github.com/rust-lang/rust/raw/8b60bf676451d22d6e48d2b995c2dfec126e7575/.github%2Fworkflows%2Fci.yaml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Fci.yaml?ref=8b60bf676451d22d6e48d2b995c2dfec126e7575", "patch": "@@ -1,3 +1,6 @@\n+# Please make sure that the `needs` fields for both `end-success` and `end-failure`\n+# are updated when adding new jobs!\n+\n name: CI\n on:\n   pull_request:\n@@ -6,6 +9,8 @@ on:\n     - master\n     - staging\n     - trying\n+    - auto\n+    - try\n \n env:\n   CARGO_INCREMENTAL: 0\n@@ -150,3 +155,21 @@ jobs:\n \n     - run: npm run package --scripts-prepend-node-path\n       working-directory: ./editors/code\n+\n+  end-success:\n+    name: bors build finished\n+    if: github.event.pusher.name == 'bors' && success()\n+    runs-on: ubuntu-latest\n+    needs: [rust, rust-cross, typescript]\n+    steps:\n+      - name: Mark the job as successful\n+        run: exit 0\n+\n+  end-failure:\n+    name: bors build finished\n+    if: github.event.pusher.name == 'bors' && (failure() || cancelled())\n+    runs-on: ubuntu-latest\n+    needs: [rust, rust-cross, typescript]\n+    steps:\n+      - name: Mark the job as a failure\n+        run: exit 1"}, {"sha": "4a2f45fd51f6d49da20d138762714dc0d20d1a70", "filename": "crates/rust-analyzer/tests/slow-tests/tidy.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8b60bf676451d22d6e48d2b995c2dfec126e7575/crates%2Frust-analyzer%2Ftests%2Fslow-tests%2Ftidy.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8b60bf676451d22d6e48d2b995c2dfec126e7575/crates%2Frust-analyzer%2Ftests%2Fslow-tests%2Ftidy.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Ftests%2Fslow-tests%2Ftidy.rs?ref=8b60bf676451d22d6e48d2b995c2dfec126e7575", "patch": "@@ -146,7 +146,7 @@ fn check_cargo_toml(path: &Path, text: String) {\n fn check_merge_commits() {\n     let sh = &Shell::new().unwrap();\n \n-    let bors = cmd!(sh, \"git rev-list --merges --author 'bors\\\\[bot\\\\]' HEAD~19..\").read().unwrap();\n+    let bors = cmd!(sh, \"git rev-list --merges --author 'bors' HEAD~19..\").read().unwrap();\n     let all = cmd!(sh, \"git rev-list --merges HEAD~19..\").read().unwrap();\n     if bors != all {\n         panic!("}, {"sha": "4a047e57a00186fde8eeb9e81391d01b96fb3635", "filename": "docs/dev/README.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8b60bf676451d22d6e48d2b995c2dfec126e7575/docs%2Fdev%2FREADME.md", "raw_url": "https://github.com/rust-lang/rust/raw/8b60bf676451d22d6e48d2b995c2dfec126e7575/docs%2Fdev%2FREADME.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/docs%2Fdev%2FREADME.md?ref=8b60bf676451d22d6e48d2b995c2dfec126e7575", "patch": "@@ -66,7 +66,7 @@ If `cargo test` passes locally, that's a good sign that CI will be green as well\n The only exception is that some long-running tests are skipped locally by default.\n Use `env RUN_SLOW_TESTS=1 cargo test` to run the full suite.\n \n-We use bors-ng to enforce the [not rocket science](https://graydon2.dreamwidth.org/1597.html) rule.\n+We use bors to enforce the [not rocket science](https://graydon2.dreamwidth.org/1597.html) rule.\n \n ## Launching rust-analyzer\n "}]}