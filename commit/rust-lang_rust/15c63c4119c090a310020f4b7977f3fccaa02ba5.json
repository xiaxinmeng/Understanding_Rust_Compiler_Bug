{"sha": "15c63c4119c090a310020f4b7977f3fccaa02ba5", "node_id": "C_kwDOAAsO6NoAKDE1YzYzYzQxMTljMDkwYTMxMDAyMGY0Yjc5NzdmM2ZjY2FhMDJiYTU", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-06-15T12:29:34Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-06-15T12:29:34Z"}, "message": "Auto merge of #12541 - Veykril:vs-reload, r=Veykril\n\nfix: Clear proc-macro changed flag when reloading workspace", "tree": {"sha": "f7a2a4b3d85a1839541f22a7ad411444f475686a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f7a2a4b3d85a1839541f22a7ad411444f475686a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/15c63c4119c090a310020f4b7977f3fccaa02ba5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/15c63c4119c090a310020f4b7977f3fccaa02ba5", "html_url": "https://github.com/rust-lang/rust/commit/15c63c4119c090a310020f4b7977f3fccaa02ba5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/15c63c4119c090a310020f4b7977f3fccaa02ba5/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7ca5d165f8862b6fd263c2beca74bb53bf8da37e", "url": "https://api.github.com/repos/rust-lang/rust/commits/7ca5d165f8862b6fd263c2beca74bb53bf8da37e", "html_url": "https://github.com/rust-lang/rust/commit/7ca5d165f8862b6fd263c2beca74bb53bf8da37e"}, {"sha": "664a751f2b5abc3cc0fed5bb21d243e7e5bc31b8", "url": "https://api.github.com/repos/rust-lang/rust/commits/664a751f2b5abc3cc0fed5bb21d243e7e5bc31b8", "html_url": "https://github.com/rust-lang/rust/commit/664a751f2b5abc3cc0fed5bb21d243e7e5bc31b8"}], "stats": {"total": 7, "additions": 4, "deletions": 3}, "files": [{"sha": "69a03850b5cefb1313ef613a5ad474516c91a295", "filename": "crates/rust-analyzer/src/handlers.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/15c63c4119c090a310020f4b7977f3fccaa02ba5/crates%2Frust-analyzer%2Fsrc%2Fhandlers.rs", "raw_url": "https://github.com/rust-lang/rust/raw/15c63c4119c090a310020f4b7977f3fccaa02ba5/crates%2Frust-analyzer%2Fsrc%2Fhandlers.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fhandlers.rs?ref=15c63c4119c090a310020f4b7977f3fccaa02ba5", "patch": "@@ -45,6 +45,7 @@ use crate::{\n \n pub(crate) fn handle_workspace_reload(state: &mut GlobalState, _: ()) -> Result<()> {\n     state.proc_macro_client = None;\n+    state.proc_macro_changed = false;\n     state.fetch_workspaces_queue.request_op(\"reload workspace request\".to_string());\n     state.fetch_build_data_queue.request_op(\"reload workspace request\".to_string());\n     Ok(())"}, {"sha": "62a446ce2a68ef124eba8736f0f77a338f772e7f", "filename": "crates/rust-analyzer/src/reload.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/15c63c4119c090a310020f4b7977f3fccaa02ba5/crates%2Frust-analyzer%2Fsrc%2Freload.rs", "raw_url": "https://github.com/rust-lang/rust/raw/15c63c4119c090a310020f4b7977f3fccaa02ba5/crates%2Frust-analyzer%2Fsrc%2Freload.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Freload.rs?ref=15c63c4119c090a310020f4b7977f3fccaa02ba5", "patch": "@@ -162,7 +162,7 @@ impl GlobalState {\n     }\n \n     pub(crate) fn fetch_build_data(&mut self, cause: Cause) {\n-        tracing::debug!(%cause, \"will fetch build data\");\n+        tracing::info!(%cause, \"will fetch build data\");\n         let workspaces = Arc::clone(&self.workspaces);\n         let config = self.config.cargo();\n         self.task_pool.handle.spawn_with_sender(move |sender| {"}, {"sha": "10063470f79f28adfcb65f01f4c245effb3fce25", "filename": "editors/code/src/ctx.ts", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/15c63c4119c090a310020f4b7977f3fccaa02ba5/editors%2Fcode%2Fsrc%2Fctx.ts", "raw_url": "https://github.com/rust-lang/rust/raw/15c63c4119c090a310020f4b7977f3fccaa02ba5/editors%2Fcode%2Fsrc%2Fctx.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Fctx.ts?ref=15c63c4119c090a310020f4b7977f3fccaa02ba5", "patch": "@@ -77,10 +77,10 @@ export class Ctx {\n     }\n \n     setServerStatus(status: ServerStatusParams) {\n-        this.statusBar.tooltip = status.message ?? \"Ready\";\n         let icon = \"\";\n         switch (status.health) {\n             case \"ok\":\n+                this.statusBar.tooltip = status.message ?? \"Ready\";\n                 this.statusBar.command = undefined;\n                 this.statusBar.color = undefined;\n                 this.statusBar.backgroundColor = undefined;\n@@ -105,7 +105,7 @@ export class Ctx {\n                 break;\n         }\n         if (!status.quiescent) icon = \"$(sync~spin) \";\n-        this.statusBar.text = `${icon} rust-analyzer`;\n+        this.statusBar.text = `${icon}rust-analyzer`;\n     }\n \n     pushCleanup(d: Disposable) {"}]}