{"sha": "1d4397ba70cccaf67911316549f4edb15b077cd1", "node_id": "C_kwDOAAsO6NoAKDFkNDM5N2JhNzBjY2NhZjY3OTExMzE2NTQ5ZjRlZGIxNWIwNzdjZDE", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2023-02-12T21:29:50Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-02-12T21:29:50Z"}, "message": "Rollup merge of #107964 - notriddle:notriddle/title-line-height, r=GuillaumeGomez\n\nrustdoc: use tighter line height in h1 and h2\n\nThis keeps the line height for body text the same, as required by WCAG, but for headers, it makes sense to have wrapped lines be a bit tighter packed.\n\n## Before\n\n![image](https://user-images.githubusercontent.com/1593513/218332683-88a02467-7811-4e6b-81f8-67dded691465.png)\n\n## After\n\n![image](https://user-images.githubusercontent.com/1593513/218332698-a1b2a265-0658-4306-8473-b835f663172d.png)", "tree": {"sha": "46d99084dafece236c36ba1d81a4b6d7a3b2489e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/46d99084dafece236c36ba1d81a4b6d7a3b2489e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1d4397ba70cccaf67911316549f4edb15b077cd1", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJj6VpOCRBK7hj4Ov3rIwAAKHQIABaFC7wx05G2cC+uv2mTBYHw\nXsfuIFswXgXde013/TKnZNlThLWYTuXGWUT7hhB5n5NE+m4UMDifIdh3GIQvbc52\n0gxfEgMpBOYnNWFIHaTdjVg/vXis1OhyIL9UaSI6S5ex9d3YtPHyJmLEjkm9c2zu\nKBnIqLC2nIfdZcxfVjuVVih0aZ0aB1GmdUWs4osNrHFQyIR6ERl5ugzgcFox6xkT\nlmEX1RzVnUY8HUHAxTRW1ZWIPyw1FmlH3GvSptSuhzSljapTldHxoBWfa1UDf3X0\nnbHL6waEdMTXzYjeyU6GxpaGjG3NsdSewB6I3uLYgpQnko4FPtKdx8yZije2Hl4=\n=OZfo\n-----END PGP SIGNATURE-----\n", "payload": "tree 46d99084dafece236c36ba1d81a4b6d7a3b2489e\nparent f81cb97cb20b7a3f625f8a73b343c27d938bb9b9\nparent b0df355f80647ca94e6676e1f5bd6990ae17086e\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1676237390 +0100\ncommitter GitHub <noreply@github.com> 1676237390 +0100\n\nRollup merge of #107964 - notriddle:notriddle/title-line-height, r=GuillaumeGomez\n\nrustdoc: use tighter line height in h1 and h2\n\nThis keeps the line height for body text the same, as required by WCAG, but for headers, it makes sense to have wrapped lines be a bit tighter packed.\n\n## Before\n\n![image](https://user-images.githubusercontent.com/1593513/218332683-88a02467-7811-4e6b-81f8-67dded691465.png)\n\n## After\n\n![image](https://user-images.githubusercontent.com/1593513/218332698-a1b2a265-0658-4306-8473-b835f663172d.png)\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1d4397ba70cccaf67911316549f4edb15b077cd1", "html_url": "https://github.com/rust-lang/rust/commit/1d4397ba70cccaf67911316549f4edb15b077cd1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1d4397ba70cccaf67911316549f4edb15b077cd1/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f81cb97cb20b7a3f625f8a73b343c27d938bb9b9", "url": "https://api.github.com/repos/rust-lang/rust/commits/f81cb97cb20b7a3f625f8a73b343c27d938bb9b9", "html_url": "https://github.com/rust-lang/rust/commit/f81cb97cb20b7a3f625f8a73b343c27d938bb9b9"}, {"sha": "b0df355f80647ca94e6676e1f5bd6990ae17086e", "url": "https://api.github.com/repos/rust-lang/rust/commits/b0df355f80647ca94e6676e1f5bd6990ae17086e", "html_url": "https://github.com/rust-lang/rust/commit/b0df355f80647ca94e6676e1f5bd6990ae17086e"}], "stats": {"total": 30, "additions": 19, "deletions": 11}, "files": [{"sha": "4f8f00f298a8fba992509e92b45d9a396ec22079", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/1d4397ba70cccaf67911316549f4edb15b077cd1/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/1d4397ba70cccaf67911316549f4edb15b077cd1/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=1d4397ba70cccaf67911316549f4edb15b077cd1", "patch": "@@ -174,6 +174,14 @@ h1, h2, h3, h4 {\n .top-doc .docblock > h4 {\n \tborder-bottom: 1px solid var(--headings-border-bottom-color);\n }\n+/* while line-height 1.5 is required for any \"block of text\",\n+\twhich WCAG defines as more than one sentence, it looks weird for\n+\tvery large main headers */\n+h1, h2 {\n+\tline-height: 1.25;\n+\tpadding-top: 3px;\n+\tpadding-bottom: 9px;\n+}\n h3.code-header {\n \tfont-size: 1.125rem; /* 18px */\n }"}, {"sha": "8c8516ebff8e49af69a93f51352699a10ab726c1", "filename": "tests/rustdoc-gui/mobile.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1d4397ba70cccaf67911316549f4edb15b077cd1/tests%2Frustdoc-gui%2Fmobile.goml", "raw_url": "https://github.com/rust-lang/rust/raw/1d4397ba70cccaf67911316549f4edb15b077cd1/tests%2Frustdoc-gui%2Fmobile.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fmobile.goml?ref=1d4397ba70cccaf67911316549f4edb15b077cd1", "patch": "@@ -12,7 +12,7 @@ assert-css: (\".main-heading\", {\n   \"flex-direction\": \"column\"\n })\n \n-assert-property: (\".mobile-topbar h2\", {\"offsetHeight\": 36})\n+assert-property: (\".mobile-topbar h2\", {\"offsetHeight\": 33})\n \n // Note: We can't use assert-text here because the 'Since' is set by CSS and\n // is therefore not part of the DOM."}, {"sha": "dad727c775775253d51ae02684dd1cfc17027927", "filename": "tests/rustdoc-gui/scrape-examples-layout.goml", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/1d4397ba70cccaf67911316549f4edb15b077cd1/tests%2Frustdoc-gui%2Fscrape-examples-layout.goml", "raw_url": "https://github.com/rust-lang/rust/raw/1d4397ba70cccaf67911316549f4edb15b077cd1/tests%2Frustdoc-gui%2Fscrape-examples-layout.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fscrape-examples-layout.goml?ref=1d4397ba70cccaf67911316549f4edb15b077cd1", "patch": "@@ -40,10 +40,10 @@ assert-property: (\n store-value: (offset_y, 4)\n \n // First with desktop\n-assert-position: (\".scraped-example .code-wrapper\", {\"y\": 255})\n-assert-position: (\".scraped-example .code-wrapper .prev\", {\"y\": 255 + |offset_y|})\n+assert-position: (\".scraped-example .code-wrapper\", {\"y\": 253})\n+assert-position: (\".scraped-example .code-wrapper .prev\", {\"y\": 253 + |offset_y|})\n \n // Then with mobile\n size: (600, 600)\n-assert-position: (\".scraped-example .code-wrapper\", {\"y\": 314})\n-assert-position: (\".scraped-example .code-wrapper .prev\", {\"y\": 314 + |offset_y|})\n+assert-position: (\".scraped-example .code-wrapper\", {\"y\": 308})\n+assert-position: (\".scraped-example .code-wrapper .prev\", {\"y\": 308 + |offset_y|})"}, {"sha": "20a88c36edb3e16adf8e0c047c5ba0e500a1b026", "filename": "tests/rustdoc-gui/search-result-display.goml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/1d4397ba70cccaf67911316549f4edb15b077cd1/tests%2Frustdoc-gui%2Fsearch-result-display.goml", "raw_url": "https://github.com/rust-lang/rust/raw/1d4397ba70cccaf67911316549f4edb15b077cd1/tests%2Frustdoc-gui%2Fsearch-result-display.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fsearch-result-display.goml?ref=1d4397ba70cccaf67911316549f4edb15b077cd1", "patch": "@@ -22,7 +22,7 @@ size: (900, 900)\n \n // First we check the current width, height and position.\n assert-css: (\"#crate-search\", {\"width\": \"223px\"})\n-assert-css: (\".search-results-title\", {\"height\": \"44px\", \"width\": \"640px\"})\n+assert-css: (\".search-results-title\", {\"height\": \"50px\", \"width\": \"640px\"})\n assert-css: (\"#search\", {\"width\": \"640px\"})\n \n // Then we update the text of one of the `<option>`.\n@@ -33,7 +33,7 @@ text: (\n \n // Then we compare again to confirm the height didn't change.\n assert-css: (\"#crate-search\", {\"width\": \"527px\"})\n-assert-css: (\".search-results-title\", {\"height\": \"44px\", \"width\": \"640px\"})\n+assert-css: (\".search-results-title\", {\"height\": \"50px\", \"width\": \"640px\"})\n // And we check that the `<select>` isn't bigger than its container (\".search-results-title\").\n assert-css: (\"#search\", {\"width\": \"640px\"})\n "}, {"sha": "4442b263e9a9890b028cf99d3bb7fbde9c2699d6", "filename": "tests/rustdoc-gui/sidebar-mobile-scroll.goml", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/1d4397ba70cccaf67911316549f4edb15b077cd1/tests%2Frustdoc-gui%2Fsidebar-mobile-scroll.goml", "raw_url": "https://github.com/rust-lang/rust/raw/1d4397ba70cccaf67911316549f4edb15b077cd1/tests%2Frustdoc-gui%2Fsidebar-mobile-scroll.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fsidebar-mobile-scroll.goml?ref=1d4397ba70cccaf67911316549f4edb15b077cd1", "patch": "@@ -6,7 +6,7 @@ assert-css: (\".sidebar\", {\"display\": \"block\", \"left\": \"-1000px\"})\n \n // Scroll down.\n scroll-to: \"//h2[@id='blanket-implementations']\"\n-assert-window-property: {\"pageYOffset\": \"627\"}\n+assert-window-property: {\"pageYOffset\": \"622\"}\n \n // Open the sidebar menu.\n click: \".sidebar-menu-toggle\"\n@@ -21,11 +21,11 @@ assert-window-property: {\"pageYOffset\": \"0\"}\n // Close the sidebar menu. Make sure the scroll position gets restored.\n click: \".sidebar-menu-toggle\"\n wait-for-css: (\".sidebar\", {\"left\": \"-1000px\"})\n-assert-window-property: {\"pageYOffset\": \"627\"}\n+assert-window-property: {\"pageYOffset\": \"622\"}\n \n // Now test that scrollability returns when the browser window is just resized.\n click: \".sidebar-menu-toggle\"\n wait-for-css: (\".sidebar\", {\"left\": \"0px\"})\n assert-window-property: {\"pageYOffset\": \"0\"}\n size: (900, 600)\n-assert-window-property: {\"pageYOffset\": \"627\"}\n+assert-window-property: {\"pageYOffset\": \"622\"}"}, {"sha": "cc6267c3dc9cbc19361f4089176e011401245131", "filename": "tests/rustdoc-gui/sidebar-mobile.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1d4397ba70cccaf67911316549f4edb15b077cd1/tests%2Frustdoc-gui%2Fsidebar-mobile.goml", "raw_url": "https://github.com/rust-lang/rust/raw/1d4397ba70cccaf67911316549f4edb15b077cd1/tests%2Frustdoc-gui%2Fsidebar-mobile.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fsidebar-mobile.goml?ref=1d4397ba70cccaf67911316549f4edb15b077cd1", "patch": "@@ -45,7 +45,7 @@ assert-property: (\".mobile-topbar\", {\"clientHeight\": \"45\"})\n // so the target is not obscured by the topbar.\n click: \".sidebar-menu-toggle\"\n click: \".sidebar-elems section .block li > a\"\n-assert-position: (\"#method\\.must_use\", {\"y\": 45})\n+assert-position: (\"#method\\.must_use\", {\"y\": 46})\n \n // Check that the bottom-most item on the sidebar menu can be scrolled fully into view.\n click: \".sidebar-menu-toggle\""}]}