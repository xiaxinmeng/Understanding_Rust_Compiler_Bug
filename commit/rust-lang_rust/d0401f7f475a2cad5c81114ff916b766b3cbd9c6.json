{"sha": "d0401f7f475a2cad5c81114ff916b766b3cbd9c6", "node_id": "C_kwDOAAsO6NoAKGQwNDAxZjdmNDc1YTJjYWQ1YzgxMTE0ZmY5MTZiNzY2YjNjYmQ5YzY", "commit": {"author": {"name": "Adrian Tombu", "email": "adrian@otso.fr", "date": "2022-08-25T17:04:00Z"}, "committer": {"name": "Adrian Tombu", "email": "adrian@otso.fr", "date": "2022-08-25T17:04:00Z"}, "message": "Code cleaning", "tree": {"sha": "c021e5e2a168103685181f4cdbb8acb3bee13b1f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c021e5e2a168103685181f4cdbb8acb3bee13b1f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d0401f7f475a2cad5c81114ff916b766b3cbd9c6", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQFDBAABCAAtFiEEPq029qEtTUDaayZUnNjpedOpQ/4FAmMHq4APHGFkcmlhbkBv\ndHNvLmZyAAoJEJzY6XnTqUP+DyoIAKAwWPDaTfvrt4BR638tqElQyJEsTTc6+1WI\nwEeTl3RJVQNofa+qyerOEStIGs6m/sYGmSiLCj1s5QcJkS8c2PU8H78Ui+kLrUdp\ne5Rqd+algI7xzvjUILLRssotHsLJ0PGHo27sznZmB09yEMMIaPZWa+EAvqXTFJFY\nF5XALqJQAcdxsVn9hHg0fcjcwNbJab5QQUzS8rtN9E1M6il6OSpZeQywaqW/zdVl\nsagf0aJyR9jo5jWefKQAXsMJeB8n8WXwg9+nvC9kmgxmooY38eIKTkTEw/M/Whfm\ndewyD2G7CfKY2ZahTiZ2JdGvxXuOZqi2Aqs5/oPJ6zF+unmIXno=\n=Y9Nn\n-----END PGP SIGNATURE-----", "payload": "tree c021e5e2a168103685181f4cdbb8acb3bee13b1f\nparent bf7ce6a1a605d897832783a3d0c830d2466d90be\nauthor Adrian Tombu <adrian@otso.fr> 1661447040 +0200\ncommitter Adrian Tombu <adrian@otso.fr> 1661447040 +0200\n\nCode cleaning\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d0401f7f475a2cad5c81114ff916b766b3cbd9c6", "html_url": "https://github.com/rust-lang/rust/commit/d0401f7f475a2cad5c81114ff916b766b3cbd9c6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d0401f7f475a2cad5c81114ff916b766b3cbd9c6/comments", "author": {"login": "adriantombu", "id": 383297, "node_id": "MDQ6VXNlcjM4MzI5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/383297?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adriantombu", "html_url": "https://github.com/adriantombu", "followers_url": "https://api.github.com/users/adriantombu/followers", "following_url": "https://api.github.com/users/adriantombu/following{/other_user}", "gists_url": "https://api.github.com/users/adriantombu/gists{/gist_id}", "starred_url": "https://api.github.com/users/adriantombu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adriantombu/subscriptions", "organizations_url": "https://api.github.com/users/adriantombu/orgs", "repos_url": "https://api.github.com/users/adriantombu/repos", "events_url": "https://api.github.com/users/adriantombu/events{/privacy}", "received_events_url": "https://api.github.com/users/adriantombu/received_events", "type": "User", "site_admin": false}, "committer": {"login": "adriantombu", "id": 383297, "node_id": "MDQ6VXNlcjM4MzI5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/383297?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adriantombu", "html_url": "https://github.com/adriantombu", "followers_url": "https://api.github.com/users/adriantombu/followers", "following_url": "https://api.github.com/users/adriantombu/following{/other_user}", "gists_url": "https://api.github.com/users/adriantombu/gists{/gist_id}", "starred_url": "https://api.github.com/users/adriantombu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adriantombu/subscriptions", "organizations_url": "https://api.github.com/users/adriantombu/orgs", "repos_url": "https://api.github.com/users/adriantombu/repos", "events_url": "https://api.github.com/users/adriantombu/events{/privacy}", "received_events_url": "https://api.github.com/users/adriantombu/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bf7ce6a1a605d897832783a3d0c830d2466d90be", "url": "https://api.github.com/repos/rust-lang/rust/commits/bf7ce6a1a605d897832783a3d0c830d2466d90be", "html_url": "https://github.com/rust-lang/rust/commit/bf7ce6a1a605d897832783a3d0c830d2466d90be"}], "stats": {"total": 19, "additions": 9, "deletions": 10}, "files": [{"sha": "0faf51b062b4ce81f684c936da6a9ab68d3a94ef", "filename": "compiler/rustc_codegen_ssa/src/lib.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/d0401f7f475a2cad5c81114ff916b766b3cbd9c6/compiler%2Frustc_codegen_ssa%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d0401f7f475a2cad5c81114ff916b766b3cbd9c6/compiler%2Frustc_codegen_ssa%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_ssa%2Fsrc%2Flib.rs?ref=d0401f7f475a2cad5c81114ff916b766b3cbd9c6", "patch": "@@ -168,11 +168,11 @@ pub struct CodegenResults {\n     pub crate_info: CrateInfo,\n }\n \n-pub enum CodegenErrors {\n+pub enum CodegenErrors<'a> {\n     WrongFileType,\n     EmptyVersionNumber,\n-    EncodingVersionMismatch { version_array: String, rlink_version: String },\n-    RustcVersionMismatch { rustc_version: String, current_version: String },\n+    EncodingVersionMismatch { version_array: String, rlink_version: u32 },\n+    RustcVersionMismatch { rustc_version: String, current_version: &'a str },\n }\n \n pub fn provide(providers: &mut Providers) {\n@@ -219,7 +219,7 @@ impl CodegenResults {\n         encoder.finish()\n     }\n \n-    pub fn deserialize_rlink(data: Vec<u8>) -> Result<Self, CodegenErrors> {\n+    pub fn deserialize_rlink<'a>(data: Vec<u8>) -> Result<Self, CodegenErrors<'a>> {\n         // The Decodable machinery is not used here because it panics if the input data is invalid\n         // and because its internal representation may change.\n         if !data.starts_with(RLINK_MAGIC) {\n@@ -235,7 +235,7 @@ impl CodegenResults {\n         if u32::from_be_bytes(version_array) != RLINK_VERSION {\n             return Err(CodegenErrors::EncodingVersionMismatch {\n                 version_array: String::from_utf8_lossy(&version_array).to_string(),\n-                rlink_version: RLINK_VERSION.to_string(),\n+                rlink_version: RLINK_VERSION,\n             });\n         }\n \n@@ -245,7 +245,7 @@ impl CodegenResults {\n         if rustc_version != current_version {\n             return Err(CodegenErrors::RustcVersionMismatch {\n                 rustc_version: rustc_version.to_string(),\n-                current_version: current_version.to_string(),\n+                current_version,\n             });\n         }\n "}, {"sha": "fe64d0fca9b20c58771ce834bdb5c28a594e3912", "filename": "compiler/rustc_driver/src/session_diagnostics.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/d0401f7f475a2cad5c81114ff916b766b3cbd9c6/compiler%2Frustc_driver%2Fsrc%2Fsession_diagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d0401f7f475a2cad5c81114ff916b766b3cbd9c6/compiler%2Frustc_driver%2Fsrc%2Fsession_diagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_driver%2Fsrc%2Fsession_diagnostics.rs?ref=d0401f7f475a2cad5c81114ff916b766b3cbd9c6", "patch": "@@ -18,14 +18,14 @@ pub(crate) struct RLinkEmptyVersionNumber;\n #[diag(driver::rlink_encoding_version_mismatch)]\n pub(crate) struct RLinkEncodingVersionMismatch {\n     pub version_array: String,\n-    pub rlink_version: String,\n+    pub rlink_version: u32,\n }\n \n #[derive(SessionDiagnostic)]\n #[diag(driver::rlink_rustc_version_mismatch)]\n-pub(crate) struct RLinkRustcVersionMismatch {\n+pub(crate) struct RLinkRustcVersionMismatch<'a> {\n     pub rustc_version: String,\n-    pub current_version: String,\n+    pub current_version: &'a str,\n }\n \n #[derive(SessionDiagnostic)]"}, {"sha": "87d7ab6ed517bba0ee3596abdf6c75ddb79dbb60", "filename": "compiler/rustc_macros/src/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d0401f7f475a2cad5c81114ff916b766b3cbd9c6/compiler%2Frustc_macros%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d0401f7f475a2cad5c81114ff916b766b3cbd9c6/compiler%2Frustc_macros%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_macros%2Fsrc%2Flib.rs?ref=d0401f7f475a2cad5c81114ff916b766b3cbd9c6", "patch": "@@ -163,7 +163,6 @@ decl_derive!(\n decl_derive!(\n     [SessionSubdiagnostic, attributes(\n         // struct/variant attributes\n-        diag,\n         label,\n         help,\n         note,"}]}