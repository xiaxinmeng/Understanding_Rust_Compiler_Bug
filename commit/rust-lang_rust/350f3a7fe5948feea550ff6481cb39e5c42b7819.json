{"sha": "350f3a7fe5948feea550ff6481cb39e5c42b7819", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM1MGYzYTdmZTU5NDhmZWVhNTUwZmY2NDgxY2IzOWU1YzQyYjc4MTk=", "commit": {"author": {"name": "mcarton", "email": "cartonmartin+git@gmail.com", "date": "2016-06-10T17:47:10Z"}, "committer": {"name": "mcarton", "email": "cartonmartin+git@gmail.com", "date": "2016-06-10T18:08:55Z"}, "message": "Rustup to *1.11.0-nightly (7d2f75a95 2016-06-09)*", "tree": {"sha": "51a8343f1c4aa1aa709e280db338b5f123163458", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/51a8343f1c4aa1aa709e280db338b5f123163458"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/350f3a7fe5948feea550ff6481cb39e5c42b7819", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v2\n\niQIcBAABCAAGBQJXWwI4AAoJEF5CfHlMukXoa9YP/jxoA/vv3RSjVkVU5IohaNvY\nvfXqxwd3tVfo0htNuc+BIApwDlJtTq+IAIhMeR11nxHnP+85HbMnr3MXODRtUu9t\nDK8VB6V/Mi2RnSNuhNtP1e581QTS2V2MkQuaDwKt3aUM8aUwN1RshmEXCidrGilh\nEYQqZYzkQGYoNeYD61RIZJvlQF7wHhsnjhiliyBpD9B+W3DmYyIPdijDoJpagGy9\n2d1YNKT2n8AHAWX/eat5zfrZSgKI7tZ/sqNcaSDDi6oTwTfEz85M1fIhhw+c4F00\nIHALNCpRnL5hbt6tcEcOvx0zNHr7lvp4Tax/La2kwQLQzAmAtNNzxolwWN7ws0tl\nMlnR74RAAPG5GGIqVmGk20xOK4T1uMohOEJY+bo2VC7ndexz9+x2zqXLdwjFHEWo\n99jhxiAzGnhBWIwUsOEkQ+KyuqkkEu4jhJw3IQ8dATBXxcAWpSL1Y9BeldRmUMoz\no1nMvgpZ+O3CB/xvT8Xn/bI1Tq9xUVIMQg3pVQZNMfiNKG7yvdwiMLR2s0FWJW3l\n0RJxlD8aNNm98cOFn/ZAUfl1VlDR+1Hh3Qk2kHdn4XOqv0eNo79CMtMmksHAS7Ca\nKIIs8/hhqOtF+JhqAYSWIDL1CvHy/Kh+FFIZSt48nYzz+jz/Cr1OfMBD/nqSPBYt\nW7osHe0YZWWJnxOQMfWo\n=xh4o\n-----END PGP SIGNATURE-----", "payload": "tree 51a8343f1c4aa1aa709e280db338b5f123163458\nparent 91d922aeb88767ac17ed8caf4a6e2b997da1a2fc\nauthor mcarton <cartonmartin+git@gmail.com> 1465580830 +0200\ncommitter mcarton <cartonmartin+git@gmail.com> 1465582135 +0200\n\nRustup to *1.11.0-nightly (7d2f75a95 2016-06-09)*\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/350f3a7fe5948feea550ff6481cb39e5c42b7819", "html_url": "https://github.com/rust-lang/rust/commit/350f3a7fe5948feea550ff6481cb39e5c42b7819", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/350f3a7fe5948feea550ff6481cb39e5c42b7819/comments", "author": {"login": "mcarton", "id": 3751788, "node_id": "MDQ6VXNlcjM3NTE3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/3751788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcarton", "html_url": "https://github.com/mcarton", "followers_url": "https://api.github.com/users/mcarton/followers", "following_url": "https://api.github.com/users/mcarton/following{/other_user}", "gists_url": "https://api.github.com/users/mcarton/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcarton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcarton/subscriptions", "organizations_url": "https://api.github.com/users/mcarton/orgs", "repos_url": "https://api.github.com/users/mcarton/repos", "events_url": "https://api.github.com/users/mcarton/events{/privacy}", "received_events_url": "https://api.github.com/users/mcarton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mcarton", "id": 3751788, "node_id": "MDQ6VXNlcjM3NTE3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/3751788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcarton", "html_url": "https://github.com/mcarton", "followers_url": "https://api.github.com/users/mcarton/followers", "following_url": "https://api.github.com/users/mcarton/following{/other_user}", "gists_url": "https://api.github.com/users/mcarton/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcarton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcarton/subscriptions", "organizations_url": "https://api.github.com/users/mcarton/orgs", "repos_url": "https://api.github.com/users/mcarton/repos", "events_url": "https://api.github.com/users/mcarton/events{/privacy}", "received_events_url": "https://api.github.com/users/mcarton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "91d922aeb88767ac17ed8caf4a6e2b997da1a2fc", "url": "https://api.github.com/repos/rust-lang/rust/commits/91d922aeb88767ac17ed8caf4a6e2b997da1a2fc", "html_url": "https://github.com/rust-lang/rust/commit/91d922aeb88767ac17ed8caf4a6e2b997da1a2fc"}], "stats": {"total": 36, "additions": 18, "deletions": 18}, "files": [{"sha": "268497f99d4483b37f7e7a8a04a03eee763ced88", "filename": "clippy_lints/src/drop_ref.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/350f3a7fe5948feea550ff6481cb39e5c42b7819/clippy_lints%2Fsrc%2Fdrop_ref.rs", "raw_url": "https://github.com/rust-lang/rust/raw/350f3a7fe5948feea550ff6481cb39e5c42b7819/clippy_lints%2Fsrc%2Fdrop_ref.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fdrop_ref.rs?ref=350f3a7fe5948feea550ff6481cb39e5c42b7819", "patch": "@@ -35,7 +35,7 @@ impl LateLintPass for DropRefPass {\n     fn check_expr(&mut self, cx: &LateContext, expr: &Expr) {\n         if let ExprCall(ref path, ref args) = expr.node {\n             if let ExprPath(None, _) = path.node {\n-                let def_id = cx.tcx.def_map.borrow()[&path.id].def_id();\n+                let def_id = cx.tcx.expect_def(path.id).def_id();\n                 if match_def_path(cx, def_id, &paths::DROP) {\n                     if args.len() != 1 {\n                         return;"}, {"sha": "5a4185ec63b9dd71c3dbcdc37381f37c184ef5eb", "filename": "clippy_lints/src/enum_glob_use.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/350f3a7fe5948feea550ff6481cb39e5c42b7819/clippy_lints%2Fsrc%2Fenum_glob_use.rs", "raw_url": "https://github.com/rust-lang/rust/raw/350f3a7fe5948feea550ff6481cb39e5c42b7819/clippy_lints%2Fsrc%2Fenum_glob_use.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fenum_glob_use.rs?ref=350f3a7fe5948feea550ff6481cb39e5c42b7819", "patch": "@@ -44,14 +44,14 @@ impl EnumGlobUse {\n         if let ItemUse(ref item_use) = item.node {\n             if let ViewPath_::ViewPathGlob(_) = item_use.node {\n                 if let Some(def) = cx.tcx.def_map.borrow().get(&item.id) {\n-                    if let Some(node_id) = cx.tcx.map.as_local_node_id(def.def_id()) {\n+                    if let Some(node_id) = cx.tcx.map.as_local_node_id(def.full_def().def_id()) {\n                         if let Some(NodeItem(it)) = cx.tcx.map.find(node_id) {\n                             if let ItemEnum(..) = it.node {\n                                 span_lint(cx, ENUM_GLOB_USE, item.span, \"don't use glob imports for enum variants\");\n                             }\n                         }\n                     } else {\n-                        let child = cx.sess().cstore.item_children(def.def_id());\n+                        let child = cx.sess().cstore.item_children(def.full_def().def_id());\n                         if let Some(child) = child.first() {\n                             if let DefLike::DlDef(Def::Variant(..)) = child.def {\n                                 span_lint(cx, ENUM_GLOB_USE, item.span, \"don't use glob imports for enum variants\");"}, {"sha": "0ed3248228fc1da0cfa7484f50906aa5eb0fcf59", "filename": "clippy_lints/src/let_if_seq.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/350f3a7fe5948feea550ff6481cb39e5c42b7819/clippy_lints%2Fsrc%2Flet_if_seq.rs", "raw_url": "https://github.com/rust-lang/rust/raw/350f3a7fe5948feea550ff6481cb39e5c42b7819/clippy_lints%2Fsrc%2Flet_if_seq.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flet_if_seq.rs?ref=350f3a7fe5948feea550ff6481cb39e5c42b7819", "patch": "@@ -69,15 +69,15 @@ impl LateLintPass for LetIfSeq {\n                 let Some(def) = cx.tcx.def_map.borrow().get(&decl.pat.id),\n                 let hir::StmtExpr(ref if_, _) = expr.node,\n                 let hir::ExprIf(ref cond, ref then, ref else_) = if_.node,\n-                !used_in_expr(cx, def.def_id(), cond),\n-                let Some(value) = check_assign(cx, def.def_id(), then),\n-                !used_in_expr(cx, def.def_id(), value),\n+                !used_in_expr(cx, def.full_def().def_id(), cond),\n+                let Some(value) = check_assign(cx, def.full_def().def_id(), then),\n+                !used_in_expr(cx, def.full_def().def_id(), value),\n             ], {\n                 let span = codemap::mk_sp(stmt.span.lo, if_.span.hi);\n \n                 let (default_multi_stmts, default) = if let Some(ref else_) = *else_ {\n                     if let hir::ExprBlock(ref else_) = else_.node {\n-                        if let Some(default) = check_assign(cx, def.def_id(), else_) {\n+                        if let Some(default) = check_assign(cx, def.full_def().def_id(), else_) {\n                             (else_.stmts.len() > 1, default)\n                         } else if let Some(ref default) = decl.init {\n                             (true, &**default)\n@@ -139,7 +139,7 @@ impl<'a, 'tcx, 'v> hir::intravisit::Visitor<'v> for UsedVisitor<'a, 'tcx> {\n         if_let_chain! {[\n             let hir::ExprPath(None, _) = expr.node,\n             let Some(def) = self.cx.tcx.def_map.borrow().get(&expr.id),\n-            self.id == def.def_id(),\n+            self.id == def.full_def().def_id(),\n         ], {\n             self.used = true;\n             return;\n@@ -156,7 +156,7 @@ fn check_assign<'e>(cx: &LateContext, decl: hir::def_id::DefId, block: &'e hir::\n         let hir::ExprAssign(ref var, ref value) = expr.node,\n         let hir::ExprPath(None, _) = var.node,\n         let Some(def) = cx.tcx.def_map.borrow().get(&var.id),\n-        decl == def.def_id(),\n+        decl == def.full_def().def_id(),\n     ], {\n         let mut v = UsedVisitor {\n             cx: cx,"}, {"sha": "79a7143636824a5aeefff20393632eeba0ad62a4", "filename": "clippy_lints/src/mem_forget.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/350f3a7fe5948feea550ff6481cb39e5c42b7819/clippy_lints%2Fsrc%2Fmem_forget.rs", "raw_url": "https://github.com/rust-lang/rust/raw/350f3a7fe5948feea550ff6481cb39e5c42b7819/clippy_lints%2Fsrc%2Fmem_forget.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmem_forget.rs?ref=350f3a7fe5948feea550ff6481cb39e5c42b7819", "patch": "@@ -27,7 +27,7 @@ impl LateLintPass for MemForget {\n     fn check_expr(&mut self, cx: &LateContext, e: &Expr) {\n         if let ExprCall(ref path_expr, ref args) = e.node {\n             if let ExprPath(None, _) = path_expr.node {\n-                let def_id = cx.tcx.def_map.borrow()[&path_expr.id].def_id();\n+                let def_id = cx.tcx.expect_def(path_expr.id).def_id();\n                 if match_def_path(cx, def_id, &paths::MEM_FORGET) {\n                     let forgot_ty = cx.tcx.expr_ty(&args[0]);\n "}, {"sha": "a88324aaf50ff6708d299db2817ce95d3be2b89a", "filename": "clippy_lints/src/minmax.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/350f3a7fe5948feea550ff6481cb39e5c42b7819/clippy_lints%2Fsrc%2Fminmax.rs", "raw_url": "https://github.com/rust-lang/rust/raw/350f3a7fe5948feea550ff6481cb39e5c42b7819/clippy_lints%2Fsrc%2Fminmax.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fminmax.rs?ref=350f3a7fe5948feea550ff6481cb39e5c42b7819", "patch": "@@ -55,7 +55,7 @@ enum MinMax {\n fn min_max<'a>(cx: &LateContext, expr: &'a Expr) -> Option<(MinMax, Constant, &'a Expr)> {\n     if let ExprCall(ref path, ref args) = expr.node {\n         if let ExprPath(None, _) = path.node {\n-            let def_id = cx.tcx.def_map.borrow()[&path.id].def_id();\n+            let def_id = cx.tcx.expect_def(path.id).def_id();\n \n             if match_def_path(cx, def_id, &paths::CMP_MIN) {\n                 fetch_const(args, MinMax::Min)"}, {"sha": "5f912366770c4b2a2d9b4d010bfa5e2b8058cf13", "filename": "clippy_lints/src/needless_bool.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/350f3a7fe5948feea550ff6481cb39e5c42b7819/clippy_lints%2Fsrc%2Fneedless_bool.rs", "raw_url": "https://github.com/rust-lang/rust/raw/350f3a7fe5948feea550ff6481cb39e5c42b7819/clippy_lints%2Fsrc%2Fneedless_bool.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fneedless_bool.rs?ref=350f3a7fe5948feea550ff6481cb39e5c42b7819", "patch": "@@ -155,8 +155,8 @@ enum Expression {\n \n fn fetch_bool_block(block: &Block) -> Expression {\n     match (&*block.stmts, block.expr.as_ref()) {\n-        ([], Some(e)) => fetch_bool_expr(&**e),\n-        ([ref e], None) => {\n+        (&[], Some(e)) => fetch_bool_expr(&**e),\n+        (&[ref e], None) => {\n             if let StmtSemi(ref e, _) = e.node {\n                 if let ExprRet(_) = e.node {\n                     fetch_bool_expr(&**e)"}, {"sha": "c2c37fcf68665378fafdc0b5a77db26831e378e5", "filename": "clippy_lints/src/regex.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/350f3a7fe5948feea550ff6481cb39e5c42b7819/clippy_lints%2Fsrc%2Fregex.rs", "raw_url": "https://github.com/rust-lang/rust/raw/350f3a7fe5948feea550ff6481cb39e5c42b7819/clippy_lints%2Fsrc%2Fregex.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fregex.rs?ref=350f3a7fe5948feea550ff6481cb39e5c42b7819", "patch": "@@ -103,7 +103,7 @@ impl LateLintPass for RegexPass {\n             args.len() == 1,\n             let Some(def) = cx.tcx.def_map.borrow().get(&fun.id),\n         ], {\n-            let def_id = def.def_id();\n+            let def_id = def.full_def().def_id();\n             if match_def_path(cx, def_id, &paths::REGEX_NEW) ||\n                match_def_path(cx, def_id, &paths::REGEX_BUILDER_NEW) {\n                 check_regex(cx, &args[0], true);"}, {"sha": "5d3f27b074b202dc25718e5e8117234fb92232af", "filename": "clippy_lints/src/transmute.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/350f3a7fe5948feea550ff6481cb39e5c42b7819/clippy_lints%2Fsrc%2Ftransmute.rs", "raw_url": "https://github.com/rust-lang/rust/raw/350f3a7fe5948feea550ff6481cb39e5c42b7819/clippy_lints%2Fsrc%2Ftransmute.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ftransmute.rs?ref=350f3a7fe5948feea550ff6481cb39e5c42b7819", "patch": "@@ -60,7 +60,7 @@ impl LateLintPass for Transmute {\n     fn check_expr(&mut self, cx: &LateContext, e: &Expr) {\n         if let ExprCall(ref path_expr, ref args) = e.node {\n             if let ExprPath(None, _) = path_expr.node {\n-                let def_id = cx.tcx.def_map.borrow()[&path_expr.id].def_id();\n+                let def_id = cx.tcx.expect_def(path_expr.id).def_id();\n \n                 if match_def_path(cx, def_id, &paths::TRANSMUTE) {\n                     let from_ty = cx.tcx.expr_ty(&args[0]);"}, {"sha": "83e2c1b549c145ecaa3c0ce1ff5307bf6cfe93b6", "filename": "clippy_lints/src/types.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/350f3a7fe5948feea550ff6481cb39e5c42b7819/clippy_lints%2Fsrc%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/350f3a7fe5948feea550ff6481cb39e5c42b7819/clippy_lints%2Fsrc%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ftypes.rs?ref=350f3a7fe5948feea550ff6481cb39e5c42b7819", "patch": "@@ -56,23 +56,23 @@ impl LateLintPass for TypePass {\n         }\n         if let Some(did) = cx.tcx.def_map.borrow().get(&ast_ty.id) {\n             if let def::Def::Struct(..) = did.full_def() {\n-                if Some(did.def_id()) == cx.tcx.lang_items.owned_box() {\n+                if Some(did.full_def().def_id()) == cx.tcx.lang_items.owned_box() {\n                     if_let_chain! {[\n                         let TyPath(_, ref path) = ast_ty.node,\n                         let Some(ref last) = path.segments.last(),\n                         let PathParameters::AngleBracketedParameters(ref ag) = last.parameters,\n                         let Some(ref vec) = ag.types.get(0),\n                         let Some(did) = cx.tcx.def_map.borrow().get(&vec.id),\n                         let def::Def::Struct(..) = did.full_def(),\n-                        match_def_path(cx, did.def_id(), &paths::VEC),\n+                        match_def_path(cx, did.full_def().def_id(), &paths::VEC),\n                     ], {\n                         span_help_and_lint(cx,\n                                            BOX_VEC,\n                                            ast_ty.span,\n                                            \"you seem to be trying to use `Box<Vec<T>>`. Consider using just `Vec<T>`\",\n                                            \"`Vec<T>` is already on the heap, `Box<Vec<T>>` makes an extra allocation.\");\n                     }}\n-                } else if match_def_path(cx, did.def_id(), &paths::LINKED_LIST) {\n+                } else if match_def_path(cx, did.full_def().def_id(), &paths::LINKED_LIST) {\n                     span_help_and_lint(cx,\n                                        LINKEDLIST,\n                                        ast_ty.span,"}]}