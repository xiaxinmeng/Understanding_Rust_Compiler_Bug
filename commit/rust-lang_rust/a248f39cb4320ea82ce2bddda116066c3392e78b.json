{"sha": "a248f39cb4320ea82ce2bddda116066c3392e78b", "node_id": "C_kwDOAAsO6NoAKGEyNDhmMzljYjQzMjBlYTgyY2UyYmRkZGExMTYwNjZjMzM5MmU3OGI", "commit": {"author": {"name": "zhoufan", "email": "1247714429@qq.com", "date": "2021-10-04T09:33:48Z"}, "committer": {"name": "zhoufan", "email": "1247714429@qq.com", "date": "2021-10-04T09:33:48Z"}, "message": "make Some(1..) parsed", "tree": {"sha": "3929e09732a66da10b6e821e5bebd4d7b650a2c0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3929e09732a66da10b6e821e5bebd4d7b650a2c0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a248f39cb4320ea82ce2bddda116066c3392e78b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a248f39cb4320ea82ce2bddda116066c3392e78b", "html_url": "https://github.com/rust-lang/rust/commit/a248f39cb4320ea82ce2bddda116066c3392e78b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a248f39cb4320ea82ce2bddda116066c3392e78b/comments", "author": {"login": "xffxff", "id": 30254428, "node_id": "MDQ6VXNlcjMwMjU0NDI4", "avatar_url": "https://avatars.githubusercontent.com/u/30254428?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xffxff", "html_url": "https://github.com/xffxff", "followers_url": "https://api.github.com/users/xffxff/followers", "following_url": "https://api.github.com/users/xffxff/following{/other_user}", "gists_url": "https://api.github.com/users/xffxff/gists{/gist_id}", "starred_url": "https://api.github.com/users/xffxff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xffxff/subscriptions", "organizations_url": "https://api.github.com/users/xffxff/orgs", "repos_url": "https://api.github.com/users/xffxff/repos", "events_url": "https://api.github.com/users/xffxff/events{/privacy}", "received_events_url": "https://api.github.com/users/xffxff/received_events", "type": "User", "site_admin": false}, "committer": {"login": "xffxff", "id": 30254428, "node_id": "MDQ6VXNlcjMwMjU0NDI4", "avatar_url": "https://avatars.githubusercontent.com/u/30254428?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xffxff", "html_url": "https://github.com/xffxff", "followers_url": "https://api.github.com/users/xffxff/followers", "following_url": "https://api.github.com/users/xffxff/following{/other_user}", "gists_url": "https://api.github.com/users/xffxff/gists{/gist_id}", "starred_url": "https://api.github.com/users/xffxff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xffxff/subscriptions", "organizations_url": "https://api.github.com/users/xffxff/orgs", "repos_url": "https://api.github.com/users/xffxff/repos", "events_url": "https://api.github.com/users/xffxff/events{/privacy}", "received_events_url": "https://api.github.com/users/xffxff/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4b7675fcc30d3e2c05eafc68a5724db66b58142c", "url": "https://api.github.com/repos/rust-lang/rust/commits/4b7675fcc30d3e2c05eafc68a5724db66b58142c", "html_url": "https://github.com/rust-lang/rust/commit/4b7675fcc30d3e2c05eafc68a5724db66b58142c"}], "stats": {"total": 270, "additions": 178, "deletions": 92}, "files": [{"sha": "60a7507c45a55504558264783ee216f3f4d55a9f", "filename": "crates/parser/src/grammar/patterns.rs", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/a248f39cb4320ea82ce2bddda116066c3392e78b/crates%2Fparser%2Fsrc%2Fgrammar%2Fpatterns.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a248f39cb4320ea82ce2bddda116066c3392e78b/crates%2Fparser%2Fsrc%2Fgrammar%2Fpatterns.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fparser%2Fsrc%2Fgrammar%2Fpatterns.rs?ref=a248f39cb4320ea82ce2bddda116066c3392e78b", "patch": "@@ -69,6 +69,11 @@ fn pattern_single_r(p: &mut Parser, recovery_set: TokenSet) {\n         //         200 .. 301 => (),\n         //         302 .. => (),\n         //     }\n+        //\n+        //     match Some(10 as u8) {\n+        //         Some(0) | None => (),\n+        //         Some(1..) => ()\n+        //     }\n         // }\n \n         // FIXME: support half_open_range_patterns (`..=2`),\n@@ -78,9 +83,9 @@ fn pattern_single_r(p: &mut Parser, recovery_set: TokenSet) {\n                 let m = lhs.precede(p);\n                 p.bump(range_op);\n \n-                // `0 .. =>` or `let 0 .. =`\n-                //       ^                ^\n-                if p.at(T![=]) {\n+                // `0 .. =>` or `let 0 .. =` or `Some(0 .. )`\n+                //       ^                ^                ^\n+                if p.at(T![=]) | p.at(T![')']) {\n                     // test half_open_range_pat\n                     // fn f() { let 0 .. = 1u32; }\n                 } else {"}, {"sha": "5d5803f75186b0a594a7854c63dc3b1d26cf6ac0", "filename": "crates/syntax/test_data/parser/inline/ok/0058_range_pat.rast", "status": "modified", "additions": 165, "deletions": 89, "changes": 254, "blob_url": "https://github.com/rust-lang/rust/blob/a248f39cb4320ea82ce2bddda116066c3392e78b/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0058_range_pat.rast", "raw_url": "https://github.com/rust-lang/rust/raw/a248f39cb4320ea82ce2bddda116066c3392e78b/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0058_range_pat.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0058_range_pat.rast?ref=a248f39cb4320ea82ce2bddda116066c3392e78b", "patch": "@@ -1,5 +1,5 @@\n-SOURCE_FILE@0..135\n-  FN@0..134\n+SOURCE_FILE@0..223\n+  FN@0..222\n     FN_KW@0..2 \"fn\"\n     WHITESPACE@2..3 \" \"\n     NAME@3..7\n@@ -8,92 +8,168 @@ SOURCE_FILE@0..135\n       L_PAREN@7..8 \"(\"\n       R_PAREN@8..9 \")\"\n     WHITESPACE@9..10 \" \"\n-    BLOCK_EXPR@10..134\n-      STMT_LIST@10..134\n+    BLOCK_EXPR@10..222\n+      STMT_LIST@10..222\n         L_CURLY@10..11 \"{\"\n         WHITESPACE@11..16 \"\\n    \"\n-        MATCH_EXPR@16..132\n-          MATCH_KW@16..21 \"match\"\n-          WHITESPACE@21..22 \" \"\n-          LITERAL@22..24\n-            INT_NUMBER@22..24 \"92\"\n-          WHITESPACE@24..25 \" \"\n-          MATCH_ARM_LIST@25..132\n-            L_CURLY@25..26 \"{\"\n-            WHITESPACE@26..35 \"\\n        \"\n-            MATCH_ARM@35..51\n-              RANGE_PAT@35..44\n-                LITERAL_PAT@35..36\n-                  LITERAL@35..36\n-                    INT_NUMBER@35..36 \"0\"\n-                WHITESPACE@36..37 \" \"\n-                DOT3@37..40 \"...\"\n-                WHITESPACE@40..41 \" \"\n-                LITERAL_PAT@41..44\n-                  LITERAL@41..44\n-                    INT_NUMBER@41..44 \"100\"\n-              WHITESPACE@44..45 \" \"\n-              FAT_ARROW@45..47 \"=>\"\n-              WHITESPACE@47..48 \" \"\n-              TUPLE_EXPR@48..50\n-                L_PAREN@48..49 \"(\"\n-                R_PAREN@49..50 \")\"\n-              COMMA@50..51 \",\"\n-            WHITESPACE@51..60 \"\\n        \"\n-            MATCH_ARM@60..78\n-              RANGE_PAT@60..71\n-                LITERAL_PAT@60..63\n-                  LITERAL@60..63\n-                    INT_NUMBER@60..63 \"101\"\n-                WHITESPACE@63..64 \" \"\n-                DOT2EQ@64..67 \"..=\"\n-                WHITESPACE@67..68 \" \"\n-                LITERAL_PAT@68..71\n-                  LITERAL@68..71\n-                    INT_NUMBER@68..71 \"200\"\n-              WHITESPACE@71..72 \" \"\n-              FAT_ARROW@72..74 \"=>\"\n-              WHITESPACE@74..75 \" \"\n-              TUPLE_EXPR@75..77\n-                L_PAREN@75..76 \"(\"\n-                R_PAREN@76..77 \")\"\n-              COMMA@77..78 \",\"\n-            WHITESPACE@78..87 \"\\n        \"\n-            MATCH_ARM@87..104\n-              RANGE_PAT@87..97\n-                LITERAL_PAT@87..90\n-                  LITERAL@87..90\n-                    INT_NUMBER@87..90 \"200\"\n-                WHITESPACE@90..91 \" \"\n-                DOT2@91..93 \"..\"\n-                WHITESPACE@93..94 \" \"\n-                LITERAL_PAT@94..97\n-                  LITERAL@94..97\n-                    INT_NUMBER@94..97 \"301\"\n-              WHITESPACE@97..98 \" \"\n-              FAT_ARROW@98..100 \"=>\"\n-              WHITESPACE@100..101 \" \"\n-              TUPLE_EXPR@101..103\n-                L_PAREN@101..102 \"(\"\n-                R_PAREN@102..103 \")\"\n-              COMMA@103..104 \",\"\n-            WHITESPACE@104..113 \"\\n        \"\n-            MATCH_ARM@113..126\n-              RANGE_PAT@113..119\n-                LITERAL_PAT@113..116\n-                  LITERAL@113..116\n-                    INT_NUMBER@113..116 \"302\"\n-                WHITESPACE@116..117 \" \"\n-                DOT2@117..119 \"..\"\n-              WHITESPACE@119..120 \" \"\n-              FAT_ARROW@120..122 \"=>\"\n-              WHITESPACE@122..123 \" \"\n-              TUPLE_EXPR@123..125\n-                L_PAREN@123..124 \"(\"\n-                R_PAREN@124..125 \")\"\n-              COMMA@125..126 \",\"\n-            WHITESPACE@126..131 \"\\n    \"\n-            R_CURLY@131..132 \"}\"\n-        WHITESPACE@132..133 \"\\n\"\n-        R_CURLY@133..134 \"}\"\n-  WHITESPACE@134..135 \"\\n\"\n+        EXPR_STMT@16..132\n+          MATCH_EXPR@16..132\n+            MATCH_KW@16..21 \"match\"\n+            WHITESPACE@21..22 \" \"\n+            LITERAL@22..24\n+              INT_NUMBER@22..24 \"92\"\n+            WHITESPACE@24..25 \" \"\n+            MATCH_ARM_LIST@25..132\n+              L_CURLY@25..26 \"{\"\n+              WHITESPACE@26..35 \"\\n        \"\n+              MATCH_ARM@35..51\n+                RANGE_PAT@35..44\n+                  LITERAL_PAT@35..36\n+                    LITERAL@35..36\n+                      INT_NUMBER@35..36 \"0\"\n+                  WHITESPACE@36..37 \" \"\n+                  DOT3@37..40 \"...\"\n+                  WHITESPACE@40..41 \" \"\n+                  LITERAL_PAT@41..44\n+                    LITERAL@41..44\n+                      INT_NUMBER@41..44 \"100\"\n+                WHITESPACE@44..45 \" \"\n+                FAT_ARROW@45..47 \"=>\"\n+                WHITESPACE@47..48 \" \"\n+                TUPLE_EXPR@48..50\n+                  L_PAREN@48..49 \"(\"\n+                  R_PAREN@49..50 \")\"\n+                COMMA@50..51 \",\"\n+              WHITESPACE@51..60 \"\\n        \"\n+              MATCH_ARM@60..78\n+                RANGE_PAT@60..71\n+                  LITERAL_PAT@60..63\n+                    LITERAL@60..63\n+                      INT_NUMBER@60..63 \"101\"\n+                  WHITESPACE@63..64 \" \"\n+                  DOT2EQ@64..67 \"..=\"\n+                  WHITESPACE@67..68 \" \"\n+                  LITERAL_PAT@68..71\n+                    LITERAL@68..71\n+                      INT_NUMBER@68..71 \"200\"\n+                WHITESPACE@71..72 \" \"\n+                FAT_ARROW@72..74 \"=>\"\n+                WHITESPACE@74..75 \" \"\n+                TUPLE_EXPR@75..77\n+                  L_PAREN@75..76 \"(\"\n+                  R_PAREN@76..77 \")\"\n+                COMMA@77..78 \",\"\n+              WHITESPACE@78..87 \"\\n        \"\n+              MATCH_ARM@87..104\n+                RANGE_PAT@87..97\n+                  LITERAL_PAT@87..90\n+                    LITERAL@87..90\n+                      INT_NUMBER@87..90 \"200\"\n+                  WHITESPACE@90..91 \" \"\n+                  DOT2@91..93 \"..\"\n+                  WHITESPACE@93..94 \" \"\n+                  LITERAL_PAT@94..97\n+                    LITERAL@94..97\n+                      INT_NUMBER@94..97 \"301\"\n+                WHITESPACE@97..98 \" \"\n+                FAT_ARROW@98..100 \"=>\"\n+                WHITESPACE@100..101 \" \"\n+                TUPLE_EXPR@101..103\n+                  L_PAREN@101..102 \"(\"\n+                  R_PAREN@102..103 \")\"\n+                COMMA@103..104 \",\"\n+              WHITESPACE@104..113 \"\\n        \"\n+              MATCH_ARM@113..126\n+                RANGE_PAT@113..119\n+                  LITERAL_PAT@113..116\n+                    LITERAL@113..116\n+                      INT_NUMBER@113..116 \"302\"\n+                  WHITESPACE@116..117 \" \"\n+                  DOT2@117..119 \"..\"\n+                WHITESPACE@119..120 \" \"\n+                FAT_ARROW@120..122 \"=>\"\n+                WHITESPACE@122..123 \" \"\n+                TUPLE_EXPR@123..125\n+                  L_PAREN@123..124 \"(\"\n+                  R_PAREN@124..125 \")\"\n+                COMMA@125..126 \",\"\n+              WHITESPACE@126..131 \"\\n    \"\n+              R_CURLY@131..132 \"}\"\n+        WHITESPACE@132..138 \"\\n\\n    \"\n+        MATCH_EXPR@138..220\n+          MATCH_KW@138..143 \"match\"\n+          WHITESPACE@143..144 \" \"\n+          CALL_EXPR@144..158\n+            PATH_EXPR@144..148\n+              PATH@144..148\n+                PATH_SEGMENT@144..148\n+                  NAME_REF@144..148\n+                    IDENT@144..148 \"Some\"\n+            ARG_LIST@148..158\n+              L_PAREN@148..149 \"(\"\n+              CAST_EXPR@149..157\n+                LITERAL@149..151\n+                  INT_NUMBER@149..151 \"10\"\n+                WHITESPACE@151..152 \" \"\n+                AS_KW@152..154 \"as\"\n+                WHITESPACE@154..155 \" \"\n+                PATH_TYPE@155..157\n+                  PATH@155..157\n+                    PATH_SEGMENT@155..157\n+                      NAME_REF@155..157\n+                        IDENT@155..157 \"u8\"\n+              R_PAREN@157..158 \")\"\n+          WHITESPACE@158..159 \" \"\n+          MATCH_ARM_LIST@159..220\n+            L_CURLY@159..160 \"{\"\n+            WHITESPACE@160..169 \"\\n        \"\n+            MATCH_ARM@169..190\n+              OR_PAT@169..183\n+                TUPLE_STRUCT_PAT@169..176\n+                  PATH@169..173\n+                    PATH_SEGMENT@169..173\n+                      NAME_REF@169..173\n+                        IDENT@169..173 \"Some\"\n+                  L_PAREN@173..174 \"(\"\n+                  LITERAL_PAT@174..175\n+                    LITERAL@174..175\n+                      INT_NUMBER@174..175 \"0\"\n+                  R_PAREN@175..176 \")\"\n+                WHITESPACE@176..177 \" \"\n+                PIPE@177..178 \"|\"\n+                WHITESPACE@178..179 \" \"\n+                IDENT_PAT@179..183\n+                  NAME@179..183\n+                    IDENT@179..183 \"None\"\n+              WHITESPACE@183..184 \" \"\n+              FAT_ARROW@184..186 \"=>\"\n+              WHITESPACE@186..187 \" \"\n+              TUPLE_EXPR@187..189\n+                L_PAREN@187..188 \"(\"\n+                R_PAREN@188..189 \")\"\n+              COMMA@189..190 \",\"\n+            WHITESPACE@190..199 \"\\n        \"\n+            MATCH_ARM@199..214\n+              TUPLE_STRUCT_PAT@199..208\n+                PATH@199..203\n+                  PATH_SEGMENT@199..203\n+                    NAME_REF@199..203\n+                      IDENT@199..203 \"Some\"\n+                L_PAREN@203..204 \"(\"\n+                RANGE_PAT@204..207\n+                  LITERAL_PAT@204..205\n+                    LITERAL@204..205\n+                      INT_NUMBER@204..205 \"1\"\n+                  DOT2@205..207 \"..\"\n+                R_PAREN@207..208 \")\"\n+              WHITESPACE@208..209 \" \"\n+              FAT_ARROW@209..211 \"=>\"\n+              WHITESPACE@211..212 \" \"\n+              TUPLE_EXPR@212..214\n+                L_PAREN@212..213 \"(\"\n+                R_PAREN@213..214 \")\"\n+            WHITESPACE@214..219 \"\\n    \"\n+            R_CURLY@219..220 \"}\"\n+        WHITESPACE@220..221 \"\\n\"\n+        R_CURLY@221..222 \"}\"\n+  WHITESPACE@222..223 \"\\n\""}, {"sha": "fa91efd212126f2bef14ef890f95e21f6b063225", "filename": "crates/syntax/test_data/parser/inline/ok/0058_range_pat.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/a248f39cb4320ea82ce2bddda116066c3392e78b/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0058_range_pat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a248f39cb4320ea82ce2bddda116066c3392e78b/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0058_range_pat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0058_range_pat.rs?ref=a248f39cb4320ea82ce2bddda116066c3392e78b", "patch": "@@ -5,4 +5,9 @@ fn main() {\n         200 .. 301 => (),\n         302 .. => (),\n     }\n+\n+    match Some(10 as u8) {\n+        Some(0) | None => (),\n+        Some(1..) => ()\n+    }\n }"}]}