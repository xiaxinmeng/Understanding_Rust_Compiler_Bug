{"sha": "b0059bd357404859aae3300e76ad3cc8a91b5364", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIwMDU5YmQzNTc0MDQ4NTlhYWUzMzAwZTc2YWQzY2M4YTkxYjUzNjQ=", "commit": {"author": {"name": "Marijn Haverbeke", "email": "marijnh@gmail.com", "date": "2011-07-27T09:34:39Z"}, "committer": {"name": "Marijn Haverbeke", "email": "marijnh@gmail.com", "date": "2011-07-27T13:19:31Z"}, "message": "Hack to make snap-stage1 actually build incompatible changes\n\nYou can't build libstd both with stage0 and stage1 if the two are incompatible\n\nThis is probably temporary", "tree": {"sha": "b4242d371f0ad0ddaea2554c32b08d3480f04c88", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b4242d371f0ad0ddaea2554c32b08d3480f04c88"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b0059bd357404859aae3300e76ad3cc8a91b5364", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b0059bd357404859aae3300e76ad3cc8a91b5364", "html_url": "https://github.com/rust-lang/rust/commit/b0059bd357404859aae3300e76ad3cc8a91b5364", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b0059bd357404859aae3300e76ad3cc8a91b5364/comments", "author": {"login": "marijnh", "id": 144427, "node_id": "MDQ6VXNlcjE0NDQyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/144427?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marijnh", "html_url": "https://github.com/marijnh", "followers_url": "https://api.github.com/users/marijnh/followers", "following_url": "https://api.github.com/users/marijnh/following{/other_user}", "gists_url": "https://api.github.com/users/marijnh/gists{/gist_id}", "starred_url": "https://api.github.com/users/marijnh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marijnh/subscriptions", "organizations_url": "https://api.github.com/users/marijnh/orgs", "repos_url": "https://api.github.com/users/marijnh/repos", "events_url": "https://api.github.com/users/marijnh/events{/privacy}", "received_events_url": "https://api.github.com/users/marijnh/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marijnh", "id": 144427, "node_id": "MDQ6VXNlcjE0NDQyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/144427?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marijnh", "html_url": "https://github.com/marijnh", "followers_url": "https://api.github.com/users/marijnh/followers", "following_url": "https://api.github.com/users/marijnh/following{/other_user}", "gists_url": "https://api.github.com/users/marijnh/gists{/gist_id}", "starred_url": "https://api.github.com/users/marijnh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marijnh/subscriptions", "organizations_url": "https://api.github.com/users/marijnh/orgs", "repos_url": "https://api.github.com/users/marijnh/repos", "events_url": "https://api.github.com/users/marijnh/events{/privacy}", "received_events_url": "https://api.github.com/users/marijnh/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8c821ff03868c08e0c1b4c7caa730f8b7c560bd5", "url": "https://api.github.com/repos/rust-lang/rust/commits/8c821ff03868c08e0c1b4c7caa730f8b7c560bd5", "html_url": "https://github.com/rust-lang/rust/commit/8c821ff03868c08e0c1b4c7caa730f8b7c560bd5"}], "stats": {"total": 8, "additions": 5, "deletions": 3}, "files": [{"sha": "dc9064417d4ec93def0cf8045f55dc5f6d0da579", "filename": "mk/snap.mk", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/b0059bd357404859aae3300e76ad3cc8a91b5364/mk%2Fsnap.mk", "raw_url": "https://github.com/rust-lang/rust/raw/b0059bd357404859aae3300e76ad3cc8a91b5364/mk%2Fsnap.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fsnap.mk?ref=b0059bd357404859aae3300e76ad3cc8a91b5364", "patch": "@@ -1,6 +1,5 @@\n \n-snap-stage1: stage1/rustc$(X) stage1/lib/glue.o stage1/lib/$(CFG_STDLIB) \\\n-\tstage1/lib/libstd.rlib stage1/lib/$(CFG_RUNTIME) \\\n+snap-stage1: stage1/rustc$(X) stage1/lib/glue.o stage1/lib/$(CFG_RUNTIME) \\\n \tstage1/$(CFG_RUSTLLVM)\n \t$(S)src/etc/make-snapshot.py stage1\n "}, {"sha": "45704e0256763fb42ff807c50e30312627566342", "filename": "src/etc/snapshot.py", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/b0059bd357404859aae3300e76ad3cc8a91b5364/src%2Fetc%2Fsnapshot.py", "raw_url": "https://github.com/rust-lang/rust/raw/b0059bd357404859aae3300e76ad3cc8a91b5364/src%2Fetc%2Fsnapshot.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fsnapshot.py?ref=b0059bd357404859aae3300e76ad3cc8a91b5364", "patch": "@@ -120,7 +120,10 @@ def make_snapshot(stage):\n \n     tar = tarfile.open(file0, \"w:bz2\")\n     for name in snapshot_files[kernel]:\n-      tar.add(os.path.join(stage, name),\n+      dir = stage\n+      if stage == \"stage1\" and re.match(r\"^lib/(lib)?std.*\", name):\n+        dir = \"stage0\"\n+      tar.add(os.path.join(dir, name),\n               \"rust-stage0/\" + name)\n     tar.close()\n "}]}