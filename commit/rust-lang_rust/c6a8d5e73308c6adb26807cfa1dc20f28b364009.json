{"sha": "c6a8d5e73308c6adb26807cfa1dc20f28b364009", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM2YThkNWU3MzMwOGM2YWRiMjY4MDdjZmExZGMyMGYyOGIzNjQwMDk=", "commit": {"author": {"name": "Simon Sapin", "email": "simon.sapin@exyr.org", "date": "2015-06-09T09:37:08Z"}, "committer": {"name": "Simon Sapin", "email": "simon.sapin@exyr.org", "date": "2015-06-09T11:08:22Z"}, "message": "Fix coretest::char::test_to_uppercase for complex mapping", "tree": {"sha": "91552c5be31747563735c9368c40f12e3db90435", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/91552c5be31747563735c9368c40f12e3db90435"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c6a8d5e73308c6adb26807cfa1dc20f28b364009", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c6a8d5e73308c6adb26807cfa1dc20f28b364009", "html_url": "https://github.com/rust-lang/rust/commit/c6a8d5e73308c6adb26807cfa1dc20f28b364009", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c6a8d5e73308c6adb26807cfa1dc20f28b364009/comments", "author": {"login": "SimonSapin", "id": 291359, "node_id": "MDQ6VXNlcjI5MTM1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SimonSapin", "html_url": "https://github.com/SimonSapin", "followers_url": "https://api.github.com/users/SimonSapin/followers", "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}", "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}", "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions", "organizations_url": "https://api.github.com/users/SimonSapin/orgs", "repos_url": "https://api.github.com/users/SimonSapin/repos", "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}", "received_events_url": "https://api.github.com/users/SimonSapin/received_events", "type": "User", "site_admin": false}, "committer": {"login": "SimonSapin", "id": 291359, "node_id": "MDQ6VXNlcjI5MTM1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SimonSapin", "html_url": "https://github.com/SimonSapin", "followers_url": "https://api.github.com/users/SimonSapin/followers", "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}", "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}", "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions", "organizations_url": "https://api.github.com/users/SimonSapin/orgs", "repos_url": "https://api.github.com/users/SimonSapin/repos", "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}", "received_events_url": "https://api.github.com/users/SimonSapin/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c57a4124ff6eeb848a537d0591235fa6e56f1cf7", "url": "https://api.github.com/repos/rust-lang/rust/commits/c57a4124ff6eeb848a537d0591235fa6e56f1cf7", "html_url": "https://github.com/rust-lang/rust/commit/c57a4124ff6eeb848a537d0591235fa6e56f1cf7"}], "stats": {"total": 35, "additions": 17, "deletions": 18}, "files": [{"sha": "e5f5919834b7c0146c0e7a6299dabc1cc31579db", "filename": "src/libcoretest/char.rs", "status": "modified", "additions": 17, "deletions": 18, "changes": 35, "blob_url": "https://github.com/rust-lang/rust/blob/c6a8d5e73308c6adb26807cfa1dc20f28b364009/src%2Flibcoretest%2Fchar.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c6a8d5e73308c6adb26807cfa1dc20f28b364009/src%2Flibcoretest%2Fchar.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcoretest%2Fchar.rs?ref=c6a8d5e73308c6adb26807cfa1dc20f28b364009", "patch": "@@ -58,6 +58,8 @@ fn test_to_lowercase() {\n     fn lower(c: char) -> char {\n         let mut it = c.to_lowercase();\n         let c = it.next().unwrap();\n+        // As of Unicode version 7.0.0, `SpecialCasing.txt` has no lower-case mapping\n+        // to multiple code points.\n         assert!(it.next().is_none());\n         c\n     }\n@@ -77,25 +79,22 @@ fn test_to_lowercase() {\n \n #[test]\n fn test_to_uppercase() {\n-    fn upper(c: char) -> char {\n-        let mut it = c.to_uppercase();\n-        let c = it.next().unwrap();\n-        assert!(it.next().is_none());\n-        c\n+    fn upper(c: char) -> Vec<char> {\n+        c.to_uppercase().collect()\n     }\n-    assert_eq!(upper('a'), 'A');\n-    assert_eq!(upper('\u00f6'), '\u00d6');\n-    assert_eq!(upper('\u00df'), '\u00df'); // not \u1e9e: Latin capital letter sharp s\n-    assert_eq!(upper('\u00fc'), '\u00dc');\n-    assert_eq!(upper('\ud83d\udca9'), '\ud83d\udca9');\n-\n-    assert_eq!(upper('\u03c3'), '\u03a3');\n-    assert_eq!(upper('\u03c4'), '\u03a4');\n-    assert_eq!(upper('\u03b9'), '\u0399');\n-    assert_eq!(upper('\u03b3'), '\u0393');\n-    assert_eq!(upper('\u03bc'), '\u039c');\n-    assert_eq!(upper('\u03b1'), '\u0391');\n-    assert_eq!(upper('\u03c2'), '\u03a3');\n+    assert_eq!(upper('a'), ['A']);\n+    assert_eq!(upper('\u00f6'), ['\u00d6']);\n+    assert_eq!(upper('\u00df'), ['S', 'S']); // not \u1e9e: Latin capital letter sharp s\n+    assert_eq!(upper('\u00fc'), ['\u00dc']);\n+    assert_eq!(upper('\ud83d\udca9'), ['\ud83d\udca9']);\n+\n+    assert_eq!(upper('\u03c3'), ['\u03a3']);\n+    assert_eq!(upper('\u03c4'), ['\u03a4']);\n+    assert_eq!(upper('\u03b9'), ['\u0399']);\n+    assert_eq!(upper('\u03b3'), ['\u0393']);\n+    assert_eq!(upper('\u03bc'), ['\u039c']);\n+    assert_eq!(upper('\u03b1'), ['\u0391']);\n+    assert_eq!(upper('\u03c2'), ['\u03a3']);\n }\n \n #[test]"}]}