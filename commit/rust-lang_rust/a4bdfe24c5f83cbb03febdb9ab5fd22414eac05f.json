{"sha": "a4bdfe24c5f83cbb03febdb9ab5fd22414eac05f", "node_id": "C_kwDOAAsO6NoAKGE0YmRmZTI0YzVmODNjYmIwM2ZlYmRiOWFiNWZkMjI0MTRlYWMwNWY", "commit": {"author": {"name": "The 8472", "email": "git@infinite-source.de", "date": "2022-10-25T20:55:04Z"}, "committer": {"name": "The 8472", "email": "git@infinite-source.de", "date": "2023-02-28T20:00:01Z"}, "message": "Support allocators in various Default for IntoIter impls\n\nGlobal implements Default so we can use that as bound for all allocators", "tree": {"sha": "7ee8d4a82b299eea7c480b7dbb58511ab6f2fc98", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7ee8d4a82b299eea7c480b7dbb58511ab6f2fc98"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a4bdfe24c5f83cbb03febdb9ab5fd22414eac05f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a4bdfe24c5f83cbb03febdb9ab5fd22414eac05f", "html_url": "https://github.com/rust-lang/rust/commit/a4bdfe24c5f83cbb03febdb9ab5fd22414eac05f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a4bdfe24c5f83cbb03febdb9ab5fd22414eac05f/comments", "author": {"login": "the8472", "id": 1065730, "node_id": "MDQ6VXNlcjEwNjU3MzA=", "avatar_url": "https://avatars.githubusercontent.com/u/1065730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/the8472", "html_url": "https://github.com/the8472", "followers_url": "https://api.github.com/users/the8472/followers", "following_url": "https://api.github.com/users/the8472/following{/other_user}", "gists_url": "https://api.github.com/users/the8472/gists{/gist_id}", "starred_url": "https://api.github.com/users/the8472/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/the8472/subscriptions", "organizations_url": "https://api.github.com/users/the8472/orgs", "repos_url": "https://api.github.com/users/the8472/repos", "events_url": "https://api.github.com/users/the8472/events{/privacy}", "received_events_url": "https://api.github.com/users/the8472/received_events", "type": "User", "site_admin": false}, "committer": {"login": "the8472", "id": 1065730, "node_id": "MDQ6VXNlcjEwNjU3MzA=", "avatar_url": "https://avatars.githubusercontent.com/u/1065730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/the8472", "html_url": "https://github.com/the8472", "followers_url": "https://api.github.com/users/the8472/followers", "following_url": "https://api.github.com/users/the8472/following{/other_user}", "gists_url": "https://api.github.com/users/the8472/gists{/gist_id}", "starred_url": "https://api.github.com/users/the8472/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/the8472/subscriptions", "organizations_url": "https://api.github.com/users/the8472/orgs", "repos_url": "https://api.github.com/users/the8472/repos", "events_url": "https://api.github.com/users/the8472/events{/privacy}", "received_events_url": "https://api.github.com/users/the8472/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2b32b315f91536b32ac60ea0d3a93a1feb1d9215", "url": "https://api.github.com/repos/rust-lang/rust/commits/2b32b315f91536b32ac60ea0d3a93a1feb1d9215", "html_url": "https://github.com/rust-lang/rust/commit/2b32b315f91536b32ac60ea0d3a93a1feb1d9215"}], "stats": {"total": 29, "additions": 22, "deletions": 7}, "files": [{"sha": "61db46314b780b50063625021d643e8f0b47c566", "filename": "library/alloc/src/collections/btree/map.rs", "status": "modified", "additions": 13, "deletions": 4, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/a4bdfe24c5f83cbb03febdb9ab5fd22414eac05f/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Fmap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a4bdfe24c5f83cbb03febdb9ab5fd22414eac05f/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Fmap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Fmap.rs?ref=a4bdfe24c5f83cbb03febdb9ab5fd22414eac05f", "patch": "@@ -450,7 +450,10 @@ impl<K: Debug, V: Debug, A: Allocator + Clone> Debug for IntoIter<K, V, A> {\n }\n \n #[stable(feature = \"default_iters\", since = \"CURRENT_RUSTC_VERSION\")]\n-impl<K, V> Default for IntoIter<K, V> {\n+impl<K, V, A> Default for IntoIter<K, V, A>\n+where\n+    A: Allocator + Default + Clone,\n+{\n     /// Creates an empty `btree_map::IntoIter`.\n     ///\n     /// ```\n@@ -459,7 +462,7 @@ impl<K, V> Default for IntoIter<K, V> {\n     /// assert_eq!(iter.len(), 0);\n     /// ```\n     fn default() -> Self {\n-        IntoIter { range: Default::default(), length: 0, alloc: Global }\n+        IntoIter { range: Default::default(), length: 0, alloc: Default::default() }\n     }\n }\n \n@@ -2106,7 +2109,10 @@ impl<K, V, A: Allocator + Clone> ExactSizeIterator for IntoKeys<K, V, A> {\n impl<K, V, A: Allocator + Clone> FusedIterator for IntoKeys<K, V, A> {}\n \n #[stable(feature = \"default_iters\", since = \"CURRENT_RUSTC_VERSION\")]\n-impl<K, V> Default for IntoKeys<K, V> {\n+impl<K, V, A> Default for IntoKeys<K, V, A>\n+where\n+    A: Allocator + Default + Clone,\n+{\n     /// Creates an empty `btree_map::IntoKeys`.\n     ///\n     /// ```\n@@ -2154,7 +2160,10 @@ impl<K, V, A: Allocator + Clone> ExactSizeIterator for IntoValues<K, V, A> {\n impl<K, V, A: Allocator + Clone> FusedIterator for IntoValues<K, V, A> {}\n \n #[stable(feature = \"default_iters\", since = \"CURRENT_RUSTC_VERSION\")]\n-impl<K, V> Default for IntoValues<K, V> {\n+impl<K, V, A> Default for IntoValues<K, V, A>\n+where\n+    A: Allocator + Default + Clone,\n+{\n     /// Creates an empty `btree_map::IntoValues`.\n     ///\n     /// ```"}, {"sha": "c2233f86667fb4ef4ce466a79497856c4939bea6", "filename": "library/alloc/src/collections/btree/set.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/a4bdfe24c5f83cbb03febdb9ab5fd22414eac05f/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Fset.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a4bdfe24c5f83cbb03febdb9ab5fd22414eac05f/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Fset.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Fset.rs?ref=a4bdfe24c5f83cbb03febdb9ab5fd22414eac05f", "patch": "@@ -1576,7 +1576,10 @@ impl<T, A: Allocator + Clone> ExactSizeIterator for IntoIter<T, A> {\n impl<T, A: Allocator + Clone> FusedIterator for IntoIter<T, A> {}\n \n #[stable(feature = \"default_iters\", since = \"CURRENT_RUSTC_VERSION\")]\n-impl<T> Default for IntoIter<T> {\n+impl<T, A> Default for IntoIter<T, A>\n+where\n+    A: Allocator + Default + Clone,\n+{\n     /// Creates an empty `btree_set::IntoIter`.\n     ///\n     /// ```"}, {"sha": "f6525eb90038641135dfab6520414afffd1e54b2", "filename": "library/alloc/src/vec/into_iter.rs", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/a4bdfe24c5f83cbb03febdb9ab5fd22414eac05f/library%2Falloc%2Fsrc%2Fvec%2Finto_iter.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a4bdfe24c5f83cbb03febdb9ab5fd22414eac05f/library%2Falloc%2Fsrc%2Fvec%2Finto_iter.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Falloc%2Fsrc%2Fvec%2Finto_iter.rs?ref=a4bdfe24c5f83cbb03febdb9ab5fd22414eac05f", "patch": "@@ -348,7 +348,10 @@ impl<T, A: Allocator> FusedIterator for IntoIter<T, A> {}\n unsafe impl<T, A: Allocator> TrustedLen for IntoIter<T, A> {}\n \n #[stable(feature = \"default_iters\", since = \"CURRENT_RUSTC_VERSION\")]\n-impl<T> Default for IntoIter<T> {\n+impl<T, A> Default for IntoIter<T, A>\n+where\n+    A: Allocator + Default,\n+{\n     /// Creates an empty `vec::IntoIter`.\n     ///\n     /// ```\n@@ -358,7 +361,7 @@ impl<T> Default for IntoIter<T> {\n     /// assert_eq!(iter.as_slice(), &[]);\n     /// ```\n     fn default() -> Self {\n-        super::Vec::new().into_iter()\n+        super::Vec::new_in(Default::default()).into_iter()\n     }\n }\n "}]}