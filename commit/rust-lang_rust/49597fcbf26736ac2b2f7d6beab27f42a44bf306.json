{"sha": "49597fcbf26736ac2b2f7d6beab27f42a44bf306", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ5NTk3ZmNiZjI2NzM2YWMyYjJmN2Q2YmVhYjI3ZjQyYTQ0YmYzMDY=", "commit": {"author": {"name": "Thomas Karpiniec", "email": "tk@1.21jiggawatts.net", "date": "2015-05-24T03:54:05Z"}, "committer": {"name": "Thomas Karpiniec", "email": "tk@1.21jiggawatts.net", "date": "2015-05-24T03:54:05Z"}, "message": "book: explanation that String -> &str coercion doesn't happen for &str traits", "tree": {"sha": "0e4ef41834e707b5d07cd94ab68bbda2543f94cb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0e4ef41834e707b5d07cd94ab68bbda2543f94cb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/49597fcbf26736ac2b2f7d6beab27f42a44bf306", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/49597fcbf26736ac2b2f7d6beab27f42a44bf306", "html_url": "https://github.com/rust-lang/rust/commit/49597fcbf26736ac2b2f7d6beab27f42a44bf306", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/49597fcbf26736ac2b2f7d6beab27f42a44bf306/comments", "author": {"login": "thombles", "id": 5511175, "node_id": "MDQ6VXNlcjU1MTExNzU=", "avatar_url": "https://avatars.githubusercontent.com/u/5511175?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thombles", "html_url": "https://github.com/thombles", "followers_url": "https://api.github.com/users/thombles/followers", "following_url": "https://api.github.com/users/thombles/following{/other_user}", "gists_url": "https://api.github.com/users/thombles/gists{/gist_id}", "starred_url": "https://api.github.com/users/thombles/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thombles/subscriptions", "organizations_url": "https://api.github.com/users/thombles/orgs", "repos_url": "https://api.github.com/users/thombles/repos", "events_url": "https://api.github.com/users/thombles/events{/privacy}", "received_events_url": "https://api.github.com/users/thombles/received_events", "type": "User", "site_admin": false}, "committer": {"login": "thombles", "id": 5511175, "node_id": "MDQ6VXNlcjU1MTExNzU=", "avatar_url": "https://avatars.githubusercontent.com/u/5511175?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thombles", "html_url": "https://github.com/thombles", "followers_url": "https://api.github.com/users/thombles/followers", "following_url": "https://api.github.com/users/thombles/following{/other_user}", "gists_url": "https://api.github.com/users/thombles/gists{/gist_id}", "starred_url": "https://api.github.com/users/thombles/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thombles/subscriptions", "organizations_url": "https://api.github.com/users/thombles/orgs", "repos_url": "https://api.github.com/users/thombles/repos", "events_url": "https://api.github.com/users/thombles/events{/privacy}", "received_events_url": "https://api.github.com/users/thombles/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "38a97becdf3e6a6157f6f7ec2d98ade8d8edc193", "url": "https://api.github.com/repos/rust-lang/rust/commits/38a97becdf3e6a6157f6f7ec2d98ade8d8edc193", "html_url": "https://github.com/rust-lang/rust/commit/38a97becdf3e6a6157f6f7ec2d98ade8d8edc193"}], "stats": {"total": 13, "additions": 13, "deletions": 0}, "files": [{"sha": "656b9d49126b9079fe0e8a77587116d48cd5ce4b", "filename": "src/doc/trpl/strings.md", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/49597fcbf26736ac2b2f7d6beab27f42a44bf306/src%2Fdoc%2Ftrpl%2Fstrings.md", "raw_url": "https://github.com/rust-lang/rust/raw/49597fcbf26736ac2b2f7d6beab27f42a44bf306/src%2Fdoc%2Ftrpl%2Fstrings.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Ftrpl%2Fstrings.md?ref=49597fcbf26736ac2b2f7d6beab27f42a44bf306", "patch": "@@ -49,6 +49,18 @@ fn main() {\n }\n ```\n \n+This coercion does not happen for functions that accept one of `&str`\u2019s traits\n+instead of `&str`. For example, [`TcpStream::connect`][connect] has a parameter\n+of type `ToSocketAddrs`. A `&str` is okay but a `String` must be explicitly\n+converted using `&*`.\n+\n+```rust\n+TcpStream::connect(\"192.168.0.1:3000\"); // &str parameter\n+\n+let addr_string = \"192.168.0.1:3000\".to_string();\n+TcpStream::connect(&*addr_string); // convert addr_string to &str\n+```\n+\n Viewing a `String` as a `&str` is cheap, but converting the `&str` to a\n `String` involves allocating memory. No reason to do that unless you have to!\n \n@@ -127,3 +139,4 @@ This is because `&String` can automatically coerce to a `&str`. This is a\n feature called \u2018[`Deref` coercions][dc]\u2019.\n \n [dc]: deref-coercions.html\n+[connect]: ../std/net/struct.TcpStream.html#method.connect"}]}