{"sha": "794b81ea5eb11db59e1337e3a09b2b2b2480c1bd", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc5NGI4MWVhNWViMTFkYjU5ZTEzMzdlM2EwOWIyYjJiMjQ4MGMxYmQ=", "commit": {"author": {"name": "Mika Lehtinen", "email": "smibu90@gmail.com", "date": "2018-12-31T10:16:45Z"}, "committer": {"name": "Mika Lehtinen", "email": "smibu90@gmail.com", "date": "2018-12-31T11:51:40Z"}, "message": "Rename and fix nolink-with-link-args test\n\nThere are three problems with the nolink-with-link-args test:\n\n* The test fails when using MSVC. It's caused by the `linker-flavor=ld` flag which was added in #46291.\n* In its comment, this test tests that \"link_args are indeed passed when nolink is specified\", but the `nolink` attribute has been removed [a long time ago](https://github.com/rust-lang/rust/pull/12826).\n* Pattern has a small typo.\n\nAt first I was going to completely remove this test, but there is [a closed pull request for that](https://github.com/rust-lang/rust/pull/21090).\n\nSo:\n\n* rename the file as suggested in the closed PR\n* adjust the comment\n* fix typo in the pattern\n* add `ignore-msvc`.", "tree": {"sha": "75a7accce86dbb5ccdfa9c2b0bddbd36ff98ca80", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/75a7accce86dbb5ccdfa9c2b0bddbd36ff98ca80"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/794b81ea5eb11db59e1337e3a09b2b2b2480c1bd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/794b81ea5eb11db59e1337e3a09b2b2b2480c1bd", "html_url": "https://github.com/rust-lang/rust/commit/794b81ea5eb11db59e1337e3a09b2b2b2480c1bd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/794b81ea5eb11db59e1337e3a09b2b2b2480c1bd/comments", "author": {"login": "Smibu", "id": 7945133, "node_id": "MDQ6VXNlcjc5NDUxMzM=", "avatar_url": "https://avatars.githubusercontent.com/u/7945133?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Smibu", "html_url": "https://github.com/Smibu", "followers_url": "https://api.github.com/users/Smibu/followers", "following_url": "https://api.github.com/users/Smibu/following{/other_user}", "gists_url": "https://api.github.com/users/Smibu/gists{/gist_id}", "starred_url": "https://api.github.com/users/Smibu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Smibu/subscriptions", "organizations_url": "https://api.github.com/users/Smibu/orgs", "repos_url": "https://api.github.com/users/Smibu/repos", "events_url": "https://api.github.com/users/Smibu/events{/privacy}", "received_events_url": "https://api.github.com/users/Smibu/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Smibu", "id": 7945133, "node_id": "MDQ6VXNlcjc5NDUxMzM=", "avatar_url": "https://avatars.githubusercontent.com/u/7945133?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Smibu", "html_url": "https://github.com/Smibu", "followers_url": "https://api.github.com/users/Smibu/followers", "following_url": "https://api.github.com/users/Smibu/following{/other_user}", "gists_url": "https://api.github.com/users/Smibu/gists{/gist_id}", "starred_url": "https://api.github.com/users/Smibu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Smibu/subscriptions", "organizations_url": "https://api.github.com/users/Smibu/orgs", "repos_url": "https://api.github.com/users/Smibu/repos", "events_url": "https://api.github.com/users/Smibu/events{/privacy}", "received_events_url": "https://api.github.com/users/Smibu/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "url": "https://api.github.com/repos/rust-lang/rust/commits/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "html_url": "https://github.com/rust-lang/rust/commit/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491"}], "stats": {"total": 25, "additions": 12, "deletions": 13}, "files": [{"sha": "1e68b4f8b7025e55d353ba2a1da05dcc38d6e413", "filename": "src/test/compile-fail/invalid-link-args.rs", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/794b81ea5eb11db59e1337e3a09b2b2b2480c1bd/src%2Ftest%2Fcompile-fail%2Finvalid-link-args.rs", "raw_url": "https://github.com/rust-lang/rust/raw/794b81ea5eb11db59e1337e3a09b2b2b2480c1bd/src%2Ftest%2Fcompile-fail%2Finvalid-link-args.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Finvalid-link-args.rs?ref=794b81ea5eb11db59e1337e3a09b2b2b2480c1bd", "patch": "@@ -0,0 +1,12 @@\n+// ignore-msvc due to linker-flavor=ld\n+// error-pattern:aFdEfSeVEEE\n+// compile-flags: -C linker-flavor=ld\n+\n+/* Make sure invalid link_args are printed to stderr. */\n+\n+#![feature(link_args)]\n+\n+#[link_args = \"aFdEfSeVEEE\"]\n+extern {}\n+\n+fn main() { }"}, {"sha": "c2ca2f807426f66593d0723ab61150fec03c7ac3", "filename": "src/test/compile-fail/nolink-with-link-args.rs", "status": "removed", "additions": 0, "deletions": 13, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fcompile-fail%2Fnolink-with-link-args.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fcompile-fail%2Fnolink-with-link-args.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fnolink-with-link-args.rs?ref=f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "patch": "@@ -1,13 +0,0 @@\n-// error-pattern:aFdEfSeVEE\n-// compile-flags: -C linker-flavor=ld\n-\n-/* We're testing that link_args are indeed passed when nolink is specified.\n-So we try to compile with junk link_args and make sure they are visible in\n-the compiler output. */\n-\n-#![feature(link_args)]\n-\n-#[link_args = \"aFdEfSeVEEE\"]\n-extern {}\n-\n-fn main() { }"}]}