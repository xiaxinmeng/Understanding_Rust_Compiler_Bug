{"sha": "3391f6ce8083ea860009caa99b415b402feeddd1", "node_id": "MDY6Q29tbWl0NzI0NzEyOjMzOTFmNmNlODA4M2VhODYwMDA5Y2FhOTliNDE1YjQwMmZlZWRkZDE=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-03-01T09:14:09Z"}, "committer": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-03-01T09:16:01Z"}, "message": "tidy: deny(rust_2018_idioms)", "tree": {"sha": "85e3cf5f84649700e1943d9680bb1657ea2bcbed", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/85e3cf5f84649700e1943d9680bb1657ea2bcbed"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3391f6ce8083ea860009caa99b415b402feeddd1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3391f6ce8083ea860009caa99b415b402feeddd1", "html_url": "https://github.com/rust-lang/rust/commit/3391f6ce8083ea860009caa99b415b402feeddd1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3391f6ce8083ea860009caa99b415b402feeddd1/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "20cfc9deb5a85c4daf235871e47c0a81daa9b700", "url": "https://api.github.com/repos/rust-lang/rust/commits/20cfc9deb5a85c4daf235871e47c0a81daa9b700", "html_url": "https://github.com/rust-lang/rust/commit/20cfc9deb5a85c4daf235871e47c0a81daa9b700"}], "stats": {"total": 17, "additions": 9, "deletions": 8}, "files": [{"sha": "0169725fa29686e918bbb95aea52079bf0d351c0", "filename": "src/tools/tidy/src/deps.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/3391f6ce8083ea860009caa99b415b402feeddd1/src%2Ftools%2Ftidy%2Fsrc%2Fdeps.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3391f6ce8083ea860009caa99b415b402feeddd1/src%2Ftools%2Ftidy%2Fsrc%2Fdeps.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Ftidy%2Fsrc%2Fdeps.rs?ref=3391f6ce8083ea860009caa99b415b402feeddd1", "patch": "@@ -49,13 +49,13 @@ const EXCEPTIONS: &[&str] = &[\n ];\n \n /// Which crates to check against the whitelist?\n-const WHITELIST_CRATES: &[CrateVersion] = &[\n+const WHITELIST_CRATES: &[CrateVersion<'_>] = &[\n     CrateVersion(\"rustc\", \"0.0.0\"),\n     CrateVersion(\"rustc_codegen_llvm\", \"0.0.0\"),\n ];\n \n /// Whitelist of crates rustc is allowed to depend on. Avoid adding to the list if possible.\n-const WHITELIST: &[Crate] = &[\n+const WHITELIST: &[Crate<'_>] = &[\n     Crate(\"adler32\"),\n     Crate(\"aho-corasick\"),\n     Crate(\"arrayvec\"),\n@@ -183,7 +183,7 @@ struct Crate<'a>(&'a str); // (name)\n #[derive(Copy, Clone, PartialOrd, Ord, PartialEq, Eq, Debug, Hash)]\n struct CrateVersion<'a>(&'a str, &'a str); // (name, version)\n \n-impl<'a> Crate<'a> {\n+impl Crate<'_> {\n     pub fn id_str(&self) -> String {\n         format!(\"{} \", self.0)\n     }\n@@ -330,10 +330,10 @@ fn get_deps(path: &Path, cargo: &Path) -> Resolve {\n \n /// Checks the dependencies of the given crate from the given cargo metadata to see if they are on\n /// the whitelist. Returns a list of illegal dependencies.\n-fn check_crate_whitelist<'a, 'b>(\n-    whitelist: &'a HashSet<Crate>,\n+fn check_crate_whitelist<'a>(\n+    whitelist: &'a HashSet<Crate<'_>>,\n     resolve: &'a Resolve,\n-    visited: &'b mut BTreeSet<CrateVersion<'a>>,\n+    visited: &mut BTreeSet<CrateVersion<'a>>,\n     krate: CrateVersion<'a>,\n     must_be_on_whitelist: bool,\n ) -> BTreeSet<Crate<'a>> {"}, {"sha": "1eab217027c8a7a99963d707dbcd365e8154b7f4", "filename": "src/tools/tidy/src/features.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3391f6ce8083ea860009caa99b415b402feeddd1/src%2Ftools%2Ftidy%2Fsrc%2Ffeatures.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3391f6ce8083ea860009caa99b415b402feeddd1/src%2Ftools%2Ftidy%2Fsrc%2Ffeatures.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Ftidy%2Fsrc%2Ffeatures.rs?ref=3391f6ce8083ea860009caa99b415b402feeddd1", "patch": "@@ -22,7 +22,7 @@ pub enum Status {\n }\n \n impl fmt::Display for Status {\n-    fn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result {\n+    fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {\n         let as_str = match *self {\n             Status::Stable => \"stable\",\n             Status::Unstable => \"unstable\","}, {"sha": "c4a1246ffdf555f6915db7668551a8659c5cffab", "filename": "src/tools/tidy/src/lib.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/3391f6ce8083ea860009caa99b415b402feeddd1/src%2Ftools%2Ftidy%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3391f6ce8083ea860009caa99b415b402feeddd1/src%2Ftools%2Ftidy%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Ftidy%2Fsrc%2Flib.rs?ref=3391f6ce8083ea860009caa99b415b402feeddd1", "patch": "@@ -3,7 +3,8 @@\n //! This library contains the tidy lints and exposes it\n //! to be used by tools.\n \n-extern crate serde;\n+#![deny(rust_2018_idioms)]\n+\n extern crate serde_json;\n #[macro_use]\n extern crate serde_derive;"}]}