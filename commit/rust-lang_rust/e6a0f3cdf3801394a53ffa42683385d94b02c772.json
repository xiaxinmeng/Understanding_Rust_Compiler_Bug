{"sha": "e6a0f3cdf3801394a53ffa42683385d94b02c772", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU2YTBmM2NkZjM4MDEzOTRhNTNmZmE0MjY4MzM4NWQ5NGIwMmM3NzI=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-02-03T03:03:08Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-02-03T03:03:08Z"}, "message": "Auto merge of #81535 - nikic:update-test-various, r=sanxiyn\n\nUpdate test-various to Ubuntu 20.04\n\nThe test command-setgroups.rs is adjusted to skip on musl, where `sysconf(_SC_NGROUPS_MAX)` always returns a dummy value of 32, even though the actual value is 65536. I'm not sure why this only became a problem now, as the information I found indicates that this value changed in kernel version 2.6.4, which is ages ago.\n\nI'm a bit unsure whether this one will go through, because I locally also saw a failure in std-backtrace.rs which went away on subsequent runs, and also had port assignment failures, but I think those might be on my side. I'm kind of curious how the code in https://github.com/rust-lang/rust/blob/b122908617436af187252572ed5db96850551380/library/std/src/net/test.rs#L43-L56 is supposed to work, as the directory names it checks don't seem to appear anywhere else.\n\nr? `@Mark-Simulacrum`", "tree": {"sha": "1d3693c2250cc20fc0e7d1b476d3b35c0dc00f36", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1d3693c2250cc20fc0e7d1b476d3b35c0dc00f36"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e6a0f3cdf3801394a53ffa42683385d94b02c772", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e6a0f3cdf3801394a53ffa42683385d94b02c772", "html_url": "https://github.com/rust-lang/rust/commit/e6a0f3cdf3801394a53ffa42683385d94b02c772", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e6a0f3cdf3801394a53ffa42683385d94b02c772/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d95d4f0189e02ac2cd9056a0b39b0d5ab94fe69e", "url": "https://api.github.com/repos/rust-lang/rust/commits/d95d4f0189e02ac2cd9056a0b39b0d5ab94fe69e", "html_url": "https://github.com/rust-lang/rust/commit/d95d4f0189e02ac2cd9056a0b39b0d5ab94fe69e"}, {"sha": "0363655e8b08b4cbc80178fe9cb01a2fb13c446f", "url": "https://api.github.com/repos/rust-lang/rust/commits/0363655e8b08b4cbc80178fe9cb01a2fb13c446f", "html_url": "https://github.com/rust-lang/rust/commit/0363655e8b08b4cbc80178fe9cb01a2fb13c446f"}], "stats": {"total": 5, "additions": 3, "deletions": 2}, "files": [{"sha": "f5fe546cdc6b5eda19a70102bd7175150b1244f4", "filename": "src/ci/docker/host-x86_64/test-various/Dockerfile", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/e6a0f3cdf3801394a53ffa42683385d94b02c772/src%2Fci%2Fdocker%2Fhost-x86_64%2Ftest-various%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/e6a0f3cdf3801394a53ffa42683385d94b02c772/src%2Fci%2Fdocker%2Fhost-x86_64%2Ftest-various%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Ftest-various%2FDockerfile?ref=e6a0f3cdf3801394a53ffa42683385d94b02c772", "patch": "@@ -1,6 +1,6 @@\n-FROM ubuntu:18.04\n+FROM ubuntu:20.04\n \n-RUN apt-get update && apt-get install -y --no-install-recommends \\\n+RUN apt-get update && DEBIAN_FRONTEND=noninteractive apt-get install -y --no-install-recommends \\\n   g++ \\\n   make \\\n   ninja-build \\"}, {"sha": "2067314f740d1dad2b4dd7a3e981fda00c9d845f", "filename": "src/test/ui/command/command-setgroups.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/e6a0f3cdf3801394a53ffa42683385d94b02c772/src%2Ftest%2Fui%2Fcommand%2Fcommand-setgroups.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e6a0f3cdf3801394a53ffa42683385d94b02c772/src%2Ftest%2Fui%2Fcommand%2Fcommand-setgroups.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcommand%2Fcommand-setgroups.rs?ref=e6a0f3cdf3801394a53ffa42683385d94b02c772", "patch": "@@ -3,6 +3,7 @@\n // ignore-cloudabi\n // ignore-emscripten\n // ignore-sgx\n+// ignore-musl - returns dummy result for _SC_NGROUPS_MAX\n \n #![feature(rustc_private)]\n #![feature(setgroups)]"}]}