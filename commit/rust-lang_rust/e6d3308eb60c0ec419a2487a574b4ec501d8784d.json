{"sha": "e6d3308eb60c0ec419a2487a574b4ec501d8784d", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU2ZDMzMDhlYjYwYzBlYzQxOWEyNDg3YTU3NGI0ZWM1MDFkODc4NGQ=", "commit": {"author": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2011-03-22T01:05:34Z"}, "committer": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2011-03-22T01:05:34Z"}, "message": "Add .def file support to the new build system (which does nothing at the moment since I don't know how to use .defs on MinGW)", "tree": {"sha": "a205e274f35fdade534bebe3db84a9679ae88220", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a205e274f35fdade534bebe3db84a9679ae88220"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e6d3308eb60c0ec419a2487a574b4ec501d8784d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e6d3308eb60c0ec419a2487a574b4ec501d8784d", "html_url": "https://github.com/rust-lang/rust/commit/e6d3308eb60c0ec419a2487a574b4ec501d8784d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e6d3308eb60c0ec419a2487a574b4ec501d8784d/comments", "author": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "700c9467395f1e1d7bbb8208da12d43ad40a1c69", "url": "https://api.github.com/repos/rust-lang/rust/commits/700c9467395f1e1d7bbb8208da12d43ad40a1c69", "html_url": "https://github.com/rust-lang/rust/commit/700c9467395f1e1d7bbb8208da12d43ad40a1c69"}], "stats": {"total": 13, "additions": 8, "deletions": 5}, "files": [{"sha": "c749a8b40b02465891c02c4447429de8b0693e20", "filename": "Makefile.in", "status": "modified", "additions": 8, "deletions": 5, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/e6d3308eb60c0ec419a2487a574b4ec501d8784d/Makefile.in", "raw_url": "https://github.com/rust-lang/rust/raw/e6d3308eb60c0ec419a2487a574b4ec501d8784d/Makefile.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Makefile.in?ref=e6d3308eb60c0ec419a2487a574b4ec501d8784d", "patch": "@@ -311,6 +311,7 @@ RUNTIME_HDR := rt/globals.h \\\n                rt/test/rust_test_runtime.h \\\n                rt/test/rust_test_util.h\n \n+RUNTIME_DEF := $(S)src/rt/rustrt.def\n RUNTIME_INCS := -I $(S)src/rt/isaac -I $(S)src/rt/uthash\n RUNTIME_OBJS := $(RUNTIME_CS:.cpp=.o)\n \n@@ -322,6 +323,7 @@ LLVMEXT_CS := $(addprefix llvmext/, \\\n                 MachOObjectFile.cpp Object.cpp RustWrapper.cpp)\n \n LLVMEXT_HDR := llvmext/include/llvm-c/Object.h\n+LLVMEXT_DEF := $(S)src/llvmext/rustllvm.def\n \n LLVMEXT_INCS := -iquote $(CFG_LLVM_INCDIR) \\\n                 -iquote $(S)src/llvmext/include\n@@ -365,14 +367,15 @@ all: boot/rustboot$(X)          \\\n      stage0/$(CFG_STDLIB)       \\\n      $(GENERATED)\n \n-rt/$(CFG_RUNTIME): $(RUNTIME_OBJS) $(MKFILES) $(RUNTIME_HDR)\n+rt/$(CFG_RUNTIME): $(RUNTIME_OBJS) $(MKFILES) $(RUNTIME_HDR) $(RUNTIME_DEF)\n \t@$(call E, link: $@)\n-\t$(Q)$(call CFG_LINK_C, $@) $(RUNTIME_OBJS)\n+\t$(Q)$(call CFG_LINK_C,$@,$(RUNTIME_OBJS),$(RUNTIME_DEF))\n \n-llvmext/$(CFG_LLVMEXT): $(LLVMEXT_OBJS) $(MKFILES) $(LLVMEXT_HDR)\n+llvmext/$(CFG_LLVMEXT): $(LLVMEXT_OBJS) $(MKFILES) $(LLVMEXT_HDR) \\\n+\t\t\t\t\t    $(LLVMEXT_DEF)\n \t@$(call E, link: $@)\n-\t$(Q)$(call CFG_LINK_C, $@ $(LLVMEXT_OBJS) \\\n-        $(CFG_LLVM_LIBS) $(CFG_LLVM_LDFLAGS))\n+\t$(Q)$(call CFG_LINK_C,$@,$(CFG_LLVM_LDFLAGS) $(LLVMEXT_OBJS) \\\n+        $(CFG_LLVM_LIBS),$(LLVMEXT_DEF))\n \n ifdef CFG_BOOT_NATIVE\n boot/rustboot$(X): $(BOOT_CMXS) $(MKFILES)"}]}