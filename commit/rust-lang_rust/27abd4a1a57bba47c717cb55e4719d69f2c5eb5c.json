{"sha": "27abd4a1a57bba47c717cb55e4719d69f2c5eb5c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI3YWJkNGExYTU3YmJhNDdjNzE3Y2I1NWU0NzE5ZDY5ZjJjNWViNWM=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2020-01-13T16:52:30Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-01-13T16:52:30Z"}, "message": "Merge #2824\n\n2824: Defer cargo check until after workspace load r=kiljacken a=kiljacken\n\nFixes #2822\n\nCo-authored-by: Emil Lauridsen <mine809@gmail.com>", "tree": {"sha": "4d8e74ed2a746eb675a02d7a69559e9bf8264197", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4d8e74ed2a746eb675a02d7a69559e9bf8264197"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/27abd4a1a57bba47c717cb55e4719d69f2c5eb5c", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJeHKBOCRBK7hj4Ov3rIwAAdHIIAG5x1oMbHmenRlpjPwCFCUoi\nm6wDfT+Sw+6h3g80NMaG9NSrKZEgabniotm2Zrc5JZqKYfLilm1X/GjbVW9SQXiy\n7y1TwUkOJ1Zcpv7N1qJC94k12pmHdfot0pe59TPo8405regAEPVPUOiwFHQDf1bw\nCCvppCeP//ZYBRvr2hyNI/V1/Yy4Hti2PLhVIvm+5r0IMkC/zb8N1+FbTNUXVCrC\nbe1JHFfhty0eZXP5dBPJ3t5QnA8LEJxxUmc43b2+Eb6ExBGdEvAk75S7JDyzT++8\nERfxZR2wG0Vc9DzDRFIsWpp2h2Dcev0/gEzQePHbBu/dCAgwsnMxwArSe/k4P30=\n=mx24\n-----END PGP SIGNATURE-----\n", "payload": "tree 4d8e74ed2a746eb675a02d7a69559e9bf8264197\nparent 5621f90071f576a8989cd09f98eb0fc6c9b7a612\nparent c774850fd8d983ad61d333441a5b872aba3884b4\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1578934350 +0000\ncommitter GitHub <noreply@github.com> 1578934350 +0000\n\nMerge #2824\n\n2824: Defer cargo check until after workspace load r=kiljacken a=kiljacken\n\nFixes #2822\n\nCo-authored-by: Emil Lauridsen <mine809@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/27abd4a1a57bba47c717cb55e4719d69f2c5eb5c", "html_url": "https://github.com/rust-lang/rust/commit/27abd4a1a57bba47c717cb55e4719d69f2c5eb5c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/27abd4a1a57bba47c717cb55e4719d69f2c5eb5c/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5621f90071f576a8989cd09f98eb0fc6c9b7a612", "url": "https://api.github.com/repos/rust-lang/rust/commits/5621f90071f576a8989cd09f98eb0fc6c9b7a612", "html_url": "https://github.com/rust-lang/rust/commit/5621f90071f576a8989cd09f98eb0fc6c9b7a612"}, {"sha": "c774850fd8d983ad61d333441a5b872aba3884b4", "url": "https://api.github.com/repos/rust-lang/rust/commits/c774850fd8d983ad61d333441a5b872aba3884b4", "html_url": "https://github.com/rust-lang/rust/commit/c774850fd8d983ad61d333441a5b872aba3884b4"}], "stats": {"total": 14, "additions": 12, "deletions": 2}, "files": [{"sha": "20fa5a924ec1152e6962efeca01612850f12547f", "filename": "crates/ra_cargo_watch/src/lib.rs", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/27abd4a1a57bba47c717cb55e4719d69f2c5eb5c/crates%2Fra_cargo_watch%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/27abd4a1a57bba47c717cb55e4719d69f2c5eb5c/crates%2Fra_cargo_watch%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_cargo_watch%2Fsrc%2Flib.rs?ref=27abd4a1a57bba47c717cb55e4719d69f2c5eb5c", "patch": "@@ -184,8 +184,13 @@ impl CheckWatcherState {\n         workspace_root: PathBuf,\n         shared: Arc<RwLock<CheckWatcherSharedState>>,\n     ) -> CheckWatcherState {\n-        let watcher = WatchThread::new(&options, &workspace_root);\n-        CheckWatcherState { options, workspace_root, watcher, last_update_req: None, shared }\n+        CheckWatcherState {\n+            options,\n+            workspace_root,\n+            watcher: WatchThread::dummy(),\n+            last_update_req: None,\n+            shared,\n+        }\n     }\n \n     fn run(&mut self, task_send: &Sender<CheckTask>, cmd_recv: &Receiver<CheckCommand>) {\n@@ -313,6 +318,10 @@ enum CheckEvent {\n }\n \n impl WatchThread {\n+    fn dummy() -> WatchThread {\n+        WatchThread { handle: None, message_recv: never() }\n+    }\n+\n     fn new(options: &CheckOptions, workspace_root: &PathBuf) -> WatchThread {\n         let mut args: Vec<String> = vec![\n             options.command.clone(),"}, {"sha": "84012b99da2a4042611d58c7a6f07fb877890ff9", "filename": "crates/ra_lsp_server/src/main_loop.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/27abd4a1a57bba47c717cb55e4719d69f2c5eb5c/crates%2Fra_lsp_server%2Fsrc%2Fmain_loop.rs", "raw_url": "https://github.com/rust-lang/rust/raw/27abd4a1a57bba47c717cb55e4719d69f2c5eb5c/crates%2Fra_lsp_server%2Fsrc%2Fmain_loop.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_lsp_server%2Fsrc%2Fmain_loop.rs?ref=27abd4a1a57bba47c717cb55e4719d69f2c5eb5c", "patch": "@@ -417,6 +417,7 @@ fn loop_turn(\n             let msg = format!(\"workspace loaded, {} rust packages\", n_packages);\n             show_message(req::MessageType::Info, msg, &connection.sender);\n         }\n+        world_state.check_watcher.update();\n     }\n \n     if state_changed {"}]}