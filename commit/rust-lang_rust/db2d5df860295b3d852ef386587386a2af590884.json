{"sha": "db2d5df860295b3d852ef386587386a2af590884", "node_id": "C_kwDOAAsO6NoAKGRiMmQ1ZGY4NjAyOTViM2Q4NTJlZjM4NjU4NzM4NmEyYWY1OTA4ODQ", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-09-19T10:32:30Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-09-19T10:38:14Z"}, "message": "Add GUI test for notable traits element position", "tree": {"sha": "d6a4e5d759215a935b21c95610c9652bb28447a1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d6a4e5d759215a935b21c95610c9652bb28447a1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/db2d5df860295b3d852ef386587386a2af590884", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/db2d5df860295b3d852ef386587386a2af590884", "html_url": "https://github.com/rust-lang/rust/commit/db2d5df860295b3d852ef386587386a2af590884", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/db2d5df860295b3d852ef386587386a2af590884/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "efa717bc2d82c19c6957f362a936a6f95169d138", "url": "https://api.github.com/repos/rust-lang/rust/commits/efa717bc2d82c19c6957f362a936a6f95169d138", "html_url": "https://github.com/rust-lang/rust/commit/efa717bc2d82c19c6957f362a936a6f95169d138"}], "stats": {"total": 103, "additions": 103, "deletions": 0}, "files": [{"sha": "69088a0774fc42e64b9f3df834b61f525081e92c", "filename": "src/test/rustdoc-gui/notable-trait.goml", "status": "added", "additions": 91, "deletions": 0, "changes": 91, "blob_url": "https://github.com/rust-lang/rust/blob/db2d5df860295b3d852ef386587386a2af590884/src%2Ftest%2Frustdoc-gui%2Fnotable-trait.goml", "raw_url": "https://github.com/rust-lang/rust/raw/db2d5df860295b3d852ef386587386a2af590884/src%2Ftest%2Frustdoc-gui%2Fnotable-trait.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fnotable-trait.goml?ref=db2d5df860295b3d852ef386587386a2af590884", "patch": "@@ -0,0 +1,91 @@\n+// This test checks the position of the `i` for the notable traits.\n+goto: file://|DOC_PATH|/test_docs/struct.NotableStructWithLongName.html\n+show-text: true\n+// We start with a wide screen.\n+size: (1100, 600)\n+// Checking they have the same y position.\n+compare-elements-position: (\n+    \"//*[@id='method.create_an_iterator_from_read']//a[text()='NotableStructWithLongName']\",\n+    \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n+    (\"y\"),\n+)\n+// Checking they don't have the same x position.\n+compare-elements-position-false: (\n+    \"//*[@id='method.create_an_iterator_from_read']//a[text()='NotableStructWithLongName']\",\n+    \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n+    (\"x\"),\n+)\n+// The `i` should be *after* the type.\n+assert-position: (\n+    \"//*[@id='method.create_an_iterator_from_read']//a[text()='NotableStructWithLongName']\",\n+    {\"x\": 692},\n+)\n+assert-position: (\n+    \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n+    {\"x\": 966},\n+)\n+\n+\n+// Now only the `i` should be on the next line.\n+size: (1055, 600)\n+compare-elements-position-false: (\n+    \"//*[@id='method.create_an_iterator_from_read']//a[text()='NotableStructWithLongName']\",\n+    \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n+    (\"y\", \"x\"),\n+)\n+\n+// Now both the `i` and the struct name should be on the next line.\n+size: (980, 600)\n+// Checking they have the same y position.\n+compare-elements-position: (\n+    \"//*[@id='method.create_an_iterator_from_read']//a[text()='NotableStructWithLongName']\",\n+    \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n+    (\"y\"),\n+)\n+// Checking they don't have the same x position.\n+compare-elements-position-false: (\n+    \"//*[@id='method.create_an_iterator_from_read']//a[text()='NotableStructWithLongName']\",\n+    \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n+    (\"x\"),\n+)\n+// The `i` should be *after* the type.\n+assert-position: (\n+    \"//*[@id='method.create_an_iterator_from_read']//a[text()='NotableStructWithLongName']\",\n+    {\"x\": 245},\n+)\n+assert-position: (\n+    \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n+    {\"x\": 519},\n+)\n+\n+// Checking on mobile now.\n+size: (650, 600)\n+// Checking they have the same y position.\n+compare-elements-position: (\n+    \"//*[@id='method.create_an_iterator_from_read']//a[text()='NotableStructWithLongName']\",\n+    \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n+    (\"y\"),\n+)\n+// Checking they don't have the same x position.\n+compare-elements-position-false: (\n+    \"//*[@id='method.create_an_iterator_from_read']//a[text()='NotableStructWithLongName']\",\n+    \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n+    (\"x\"),\n+)\n+// The `i` should be *after* the type.\n+assert-position: (\n+    \"//*[@id='method.create_an_iterator_from_read']//a[text()='NotableStructWithLongName']\",\n+    {\"x\": 15},\n+)\n+assert-position: (\n+    \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n+    {\"x\": 289},\n+)\n+\n+// Checking on very small mobile. The `i` should be on its own line.\n+size: (410, 600)\n+compare-elements-position-false: (\n+    \"//*[@id='method.create_an_iterator_from_read']//a[text()='NotableStructWithLongName']\",\n+    \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n+    (\"y\", \"x\"),\n+)"}, {"sha": "e6177ff84b42e86bb6b9f6f118bd1528302bb15a", "filename": "src/test/rustdoc-gui/src/test_docs/lib.rs", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/db2d5df860295b3d852ef386587386a2af590884/src%2Ftest%2Frustdoc-gui%2Fsrc%2Ftest_docs%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/db2d5df860295b3d852ef386587386a2af590884/src%2Ftest%2Frustdoc-gui%2Fsrc%2Ftest_docs%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsrc%2Ftest_docs%2Flib.rs?ref=db2d5df860295b3d852ef386587386a2af590884", "patch": "@@ -325,3 +325,15 @@ pub mod doc_block_table {\n     }\n \n }\n+\n+pub struct NotableStructWithLongName<R>(R);\n+\n+impl<R: std::io::Read> NotableStructWithLongName<R> {\n+    pub fn create_an_iterator_from_read(r: R) -> NotableStructWithLongName<R> { Self(r) }\n+}\n+\n+impl<R: std::io::Read> std::iter::Iterator for NotableStructWithLongName<R> {\n+    type Item = ();\n+\n+    fn next(&mut self) -> Option<Self::Item> { () }\n+}"}]}