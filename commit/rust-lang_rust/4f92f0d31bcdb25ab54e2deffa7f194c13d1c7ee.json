{"sha": "4f92f0d31bcdb25ab54e2deffa7f194c13d1c7ee", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRmOTJmMGQzMWJjZGIyNWFiNTRlMmRlZmZhN2YxOTRjMTNkMWM3ZWU=", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2020-07-11T12:19:07Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2020-08-22T13:07:32Z"}, "message": "remove feature gate from tests", "tree": {"sha": "fd3c9263caaa6e3ad743a72df00b543bfb9c7203", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fd3c9263caaa6e3ad743a72df00b543bfb9c7203"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4f92f0d31bcdb25ab54e2deffa7f194c13d1c7ee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4f92f0d31bcdb25ab54e2deffa7f194c13d1c7ee", "html_url": "https://github.com/rust-lang/rust/commit/4f92f0d31bcdb25ab54e2deffa7f194c13d1c7ee", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4f92f0d31bcdb25ab54e2deffa7f194c13d1c7ee/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0e4f335e634d16f399647353dd70666423e402b4", "url": "https://api.github.com/repos/rust-lang/rust/commits/0e4f335e634d16f399647353dd70666423e402b4", "html_url": "https://github.com/rust-lang/rust/commit/0e4f335e634d16f399647353dd70666423e402b4"}], "stats": {"total": 33, "additions": 10, "deletions": 23}, "files": [{"sha": "4b776e128eab0fd956e65152f4abc95b0295eb0b", "filename": "library/core/src/ptr/const_ptr.rs", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/4f92f0d31bcdb25ab54e2deffa7f194c13d1c7ee/library%2Fcore%2Fsrc%2Fptr%2Fconst_ptr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f92f0d31bcdb25ab54e2deffa7f194c13d1c7ee/library%2Fcore%2Fsrc%2Fptr%2Fconst_ptr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fptr%2Fconst_ptr.rs?ref=4f92f0d31bcdb25ab54e2deffa7f194c13d1c7ee", "patch": "@@ -339,8 +339,6 @@ impl<T: ?Sized> *const T {\n     /// Basic usage:\n     ///\n     /// ```\n-    /// #![feature(ptr_offset_from)]\n-    ///\n     /// let a = [0; 5];\n     /// let ptr1: *const i32 = &a[1];\n     /// let ptr2: *const i32 = &a[3];\n@@ -355,8 +353,6 @@ impl<T: ?Sized> *const T {\n     /// *Incorrect* usage:\n     ///\n     /// ```rust,no_run\n-    /// #![feature(ptr_offset_from)]\n-    ///\n     /// let ptr1 = Box::into_raw(Box::new(0u8)) as *const u8;\n     /// let ptr2 = Box::into_raw(Box::new(1u8)) as *const u8;\n     /// let diff = (ptr2 as isize).wrapping_sub(ptr1 as isize);"}, {"sha": "c3a818e4b3fed00e039ec2ced165700288153daf", "filename": "library/core/src/ptr/mut_ptr.rs", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/4f92f0d31bcdb25ab54e2deffa7f194c13d1c7ee/library%2Fcore%2Fsrc%2Fptr%2Fmut_ptr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f92f0d31bcdb25ab54e2deffa7f194c13d1c7ee/library%2Fcore%2Fsrc%2Fptr%2Fmut_ptr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fptr%2Fmut_ptr.rs?ref=4f92f0d31bcdb25ab54e2deffa7f194c13d1c7ee", "patch": "@@ -510,8 +510,6 @@ impl<T: ?Sized> *mut T {\n     /// Basic usage:\n     ///\n     /// ```\n-    /// #![feature(ptr_offset_from)]\n-    ///\n     /// let mut a = [0; 5];\n     /// let ptr1: *mut i32 = &mut a[1];\n     /// let ptr2: *mut i32 = &mut a[3];\n@@ -526,8 +524,6 @@ impl<T: ?Sized> *mut T {\n     /// *Incorrect* usage:\n     ///\n     /// ```rust,no_run\n-    /// #![feature(ptr_offset_from)]\n-    ///\n     /// let ptr1 = Box::into_raw(Box::new(0u8));\n     /// let ptr2 = Box::into_raw(Box::new(1u8));\n     /// let diff = (ptr2 as isize).wrapping_sub(ptr1 as isize);"}, {"sha": "a491f1c92d3e10b0cbd812bdd1c2e421cf152a90", "filename": "src/test/ui/consts/offset.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4f92f0d31bcdb25ab54e2deffa7f194c13d1c7ee/src%2Ftest%2Fui%2Fconsts%2Foffset.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f92f0d31bcdb25ab54e2deffa7f194c13d1c7ee/src%2Ftest%2Fui%2Fconsts%2Foffset.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Foffset.rs?ref=4f92f0d31bcdb25ab54e2deffa7f194c13d1c7ee", "patch": "@@ -1,7 +1,6 @@\n // run-pass\n #![feature(const_ptr_offset)]\n #![feature(const_ptr_offset_from)]\n-#![feature(ptr_offset_from)]\n use std::ptr;\n \n #[repr(C)]"}, {"sha": "8d501e0d9533783f0e83a46f637b794affbb6e71", "filename": "src/test/ui/consts/offset_from.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4f92f0d31bcdb25ab54e2deffa7f194c13d1c7ee/src%2Ftest%2Fui%2Fconsts%2Foffset_from.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f92f0d31bcdb25ab54e2deffa7f194c13d1c7ee/src%2Ftest%2Fui%2Fconsts%2Foffset_from.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Foffset_from.rs?ref=4f92f0d31bcdb25ab54e2deffa7f194c13d1c7ee", "patch": "@@ -2,7 +2,6 @@\n \n #![feature(const_raw_ptr_deref)]\n #![feature(const_ptr_offset_from)]\n-#![feature(ptr_offset_from)]\n \n struct Struct {\n     field: (),"}, {"sha": "b73191d56a6129d840d3ede8f745f4de6ceaea05", "filename": "src/test/ui/consts/offset_from_ub.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4f92f0d31bcdb25ab54e2deffa7f194c13d1c7ee/src%2Ftest%2Fui%2Fconsts%2Foffset_from_ub.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f92f0d31bcdb25ab54e2deffa7f194c13d1c7ee/src%2Ftest%2Fui%2Fconsts%2Foffset_from_ub.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Foffset_from_ub.rs?ref=4f92f0d31bcdb25ab54e2deffa7f194c13d1c7ee", "patch": "@@ -1,6 +1,5 @@\n #![feature(const_raw_ptr_deref)]\n #![feature(const_ptr_offset_from)]\n-#![feature(ptr_offset_from)]\n \n #[repr(C)]\n struct Struct {"}, {"sha": "a89dcefd839205542f1563f69bb3d4f168c0fccc", "filename": "src/test/ui/consts/offset_from_ub.stderr", "status": "modified", "additions": 10, "deletions": 10, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/4f92f0d31bcdb25ab54e2deffa7f194c13d1c7ee/src%2Ftest%2Fui%2Fconsts%2Foffset_from_ub.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4f92f0d31bcdb25ab54e2deffa7f194c13d1c7ee/src%2Ftest%2Fui%2Fconsts%2Foffset_from_ub.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Foffset_from_ub.stderr?ref=4f92f0d31bcdb25ab54e2deffa7f194c13d1c7ee", "patch": "@@ -6,9 +6,9 @@ LL |           unsafe { intrinsics::ptr_offset_from(self, origin) }\n    |                    |\n    |                    ptr_offset_from cannot compute offset of pointers into different allocations.\n    |                    inside `std::ptr::const_ptr::<impl *const Struct>::offset_from` at $SRC_DIR/core/src/ptr/const_ptr.rs:LL:COL\n-   |                    inside `DIFFERENT_ALLOC` at $DIR/offset_from_ub.rs:17:27\n+   |                    inside `DIFFERENT_ALLOC` at $DIR/offset_from_ub.rs:16:27\n    | \n-  ::: $DIR/offset_from_ub.rs:11:1\n+  ::: $DIR/offset_from_ub.rs:10:1\n    |\n LL | / pub const DIFFERENT_ALLOC: usize = {\n LL | |\n@@ -29,9 +29,9 @@ LL |           unsafe { intrinsics::ptr_offset_from(self, origin) }\n    |                    |\n    |                    unable to turn bytes into a pointer\n    |                    inside `std::ptr::const_ptr::<impl *const u8>::offset_from` at $SRC_DIR/core/src/ptr/const_ptr.rs:LL:COL\n-   |                    inside `NOT_PTR` at $DIR/offset_from_ub.rs:23:14\n+   |                    inside `NOT_PTR` at $DIR/offset_from_ub.rs:22:14\n    | \n-  ::: $DIR/offset_from_ub.rs:21:1\n+  ::: $DIR/offset_from_ub.rs:20:1\n    |\n LL | / pub const NOT_PTR: usize = {\n LL | |\n@@ -47,9 +47,9 @@ LL |           unsafe { intrinsics::ptr_offset_from(self, origin) }\n    |                    |\n    |                    exact_div: 1_isize cannot be divided by 2_isize without remainder\n    |                    inside `std::ptr::const_ptr::<impl *const u16>::offset_from` at $SRC_DIR/core/src/ptr/const_ptr.rs:LL:COL\n-   |                    inside `NOT_MULTIPLE_OF_SIZE` at $DIR/offset_from_ub.rs:31:14\n+   |                    inside `NOT_MULTIPLE_OF_SIZE` at $DIR/offset_from_ub.rs:30:14\n    | \n-  ::: $DIR/offset_from_ub.rs:26:1\n+  ::: $DIR/offset_from_ub.rs:25:1\n    |\n LL | / pub const NOT_MULTIPLE_OF_SIZE: isize = {\n LL | |\n@@ -68,9 +68,9 @@ LL |           unsafe { intrinsics::ptr_offset_from(self, origin) }\n    |                    |\n    |                    inbounds test failed: 0x0 is not a valid pointer\n    |                    inside `std::ptr::const_ptr::<impl *const u8>::offset_from` at $SRC_DIR/core/src/ptr/const_ptr.rs:LL:COL\n-   |                    inside `OFFSET_FROM_NULL` at $DIR/offset_from_ub.rs:37:14\n+   |                    inside `OFFSET_FROM_NULL` at $DIR/offset_from_ub.rs:36:14\n    | \n-  ::: $DIR/offset_from_ub.rs:34:1\n+  ::: $DIR/offset_from_ub.rs:33:1\n    |\n LL | / pub const OFFSET_FROM_NULL: isize = {\n LL | |\n@@ -87,9 +87,9 @@ LL |           unsafe { intrinsics::ptr_offset_from(self, origin) }\n    |                    |\n    |                    unable to turn bytes into a pointer\n    |                    inside `std::ptr::const_ptr::<impl *const u8>::offset_from` at $SRC_DIR/core/src/ptr/const_ptr.rs:LL:COL\n-   |                    inside `DIFFERENT_INT` at $DIR/offset_from_ub.rs:44:14\n+   |                    inside `DIFFERENT_INT` at $DIR/offset_from_ub.rs:43:14\n    | \n-  ::: $DIR/offset_from_ub.rs:40:1\n+  ::: $DIR/offset_from_ub.rs:39:1\n    |\n LL | / pub const DIFFERENT_INT: isize = { // offset_from with two different integers: like DIFFERENT_ALLOC\n LL | |"}, {"sha": "aa59c119706ea690ad56a1288b4fd0f4ea8ce259", "filename": "src/test/ui/offset_from.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4f92f0d31bcdb25ab54e2deffa7f194c13d1c7ee/src%2Ftest%2Fui%2Foffset_from.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f92f0d31bcdb25ab54e2deffa7f194c13d1c7ee/src%2Ftest%2Fui%2Foffset_from.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Foffset_from.rs?ref=4f92f0d31bcdb25ab54e2deffa7f194c13d1c7ee", "patch": "@@ -1,7 +1,5 @@\n // run-pass\n \n-#![feature(ptr_offset_from)]\n-\n fn main() {\n     let mut a = [0; 5];\n     let ptr1: *mut i32 = &mut a[1];"}]}