{"sha": "a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498", "node_id": "C_kwDOAAsO6NoAKGE2YTFkN2NhMjkzNmRkYjMzZGJhYWQ2OWFlM2E4YTQ3YjkyMDg0OTg", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2021-11-24T21:56:37Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-11-24T21:56:37Z"}, "message": "Rollup merge of #90420 - GuillaumeGomez:rustdoc-internals-feature, r=camelid\n\nCreate rustdoc_internals feature gate\n\nAs suggested by ``@camelid`` [here](https://github.com/rust-lang/rust/pull/90398#issuecomment-955093851), since `doc_keyword` and `doc_primitive` aren't meant to be stabilized, we could put them behind a same feature flag.\n\nThis is pretty much what it would look like (needs to update the tests too).\n\nThe tracking issue is https://github.com/rust-lang/rust/issues/90418.\n\nWhat do you think ``@rust-lang/rustdoc`` ?", "tree": {"sha": "5000d2963032cedb54c906861356172898efe916", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5000d2963032cedb54c906861356172898efe916"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJhnrUVCRBK7hj4Ov3rIwAAMXMIAC2d/Uj3daShugqi/tEoojOX\nAbTvT3ER7n3DXYddvwN7gBUFF2VDkYf29B00euMQN997daSNbtbqLbcfuAznPGSA\nrk38ehHH/0++FEcL265KUczaLnvUpkxdVfcXnegV5VF7LHpS4jzT53pJH4HEUAZj\nG2FbSLw81Poq/5Aakrwoxzrk6GnNuq2MENU7r6y8IR10WnaGlCYqCQPe4DlqoZ+d\nBGr/tmtoA58zxrUcN8qXS5rldVMZ5fjeVy8UQpNc8Kmuat2nqpI6rDYYmbrjERNg\n4wdExttNEhF9hmq36tWDtZQJJ5TlvLhvWHtnHmF8VHWzNbm7X1JYYRyuQgodEKQ=\n=dsR1\n-----END PGP SIGNATURE-----\n", "payload": "tree 5000d2963032cedb54c906861356172898efe916\nparent cbe563a4d575f888d3889a6d8f103ce1ebbe9ad3\nparent 9447d1f903742619b49f8ff5959b7553730c876a\nauthor Guillaume Gomez <guillaume1.gomez@gmail.com> 1637790997 +0100\ncommitter GitHub <noreply@github.com> 1637790997 +0100\n\nRollup merge of #90420 - GuillaumeGomez:rustdoc-internals-feature, r=camelid\n\nCreate rustdoc_internals feature gate\n\nAs suggested by ``@camelid`` [here](https://github.com/rust-lang/rust/pull/90398#issuecomment-955093851), since `doc_keyword` and `doc_primitive` aren't meant to be stabilized, we could put them behind a same feature flag.\n\nThis is pretty much what it would look like (needs to update the tests too).\n\nThe tracking issue is https://github.com/rust-lang/rust/issues/90418.\n\nWhat do you think ``@rust-lang/rustdoc`` ?\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498", "html_url": "https://github.com/rust-lang/rust/commit/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cbe563a4d575f888d3889a6d8f103ce1ebbe9ad3", "url": "https://api.github.com/repos/rust-lang/rust/commits/cbe563a4d575f888d3889a6d8f103ce1ebbe9ad3", "html_url": "https://github.com/rust-lang/rust/commit/cbe563a4d575f888d3889a6d8f103ce1ebbe9ad3"}, {"sha": "9447d1f903742619b49f8ff5959b7553730c876a", "url": "https://api.github.com/repos/rust-lang/rust/commits/9447d1f903742619b49f8ff5959b7553730c876a", "html_url": "https://github.com/rust-lang/rust/commit/9447d1f903742619b49f8ff5959b7553730c876a"}], "stats": {"total": 109, "additions": 72, "deletions": 37}, "files": [{"sha": "ad539f2564d4c01e2230e28b76073aacd87862d3", "filename": "compiler/rustc_ast_passes/src/feature_gate.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/compiler%2Frustc_ast_passes%2Fsrc%2Ffeature_gate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/compiler%2Frustc_ast_passes%2Fsrc%2Ffeature_gate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast_passes%2Fsrc%2Ffeature_gate.rs?ref=a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498", "patch": "@@ -325,8 +325,12 @@ impl<'a> Visitor<'a> for PostExpansionVisitor<'a> {\n                     cfg_hide => doc_cfg_hide\n                     masked => doc_masked\n                     notable_trait => doc_notable_trait\n-                    keyword => doc_keyword\n                 );\n+\n+                if nested_meta.has_name(sym::keyword) {\n+                    let msg = \"`#[doc(keyword)]` is meant for internal use only\";\n+                    gate_feature_post!(self, rustdoc_internals, attr.span, msg);\n+                }\n             }\n         }\n "}, {"sha": "7860f92f96f9647d2367a74bd16ca10f0cff5f1f", "filename": "compiler/rustc_feature/src/active.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/compiler%2Frustc_feature%2Fsrc%2Factive.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/compiler%2Frustc_feature%2Fsrc%2Factive.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_feature%2Fsrc%2Factive.rs?ref=a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498", "patch": "@@ -206,6 +206,8 @@ declare_features! (\n     (active, rustc_allow_const_fn_unstable, \"1.49.0\", Some(69399), None),\n     /// Allows using compiler's own crates.\n     (active, rustc_private, \"1.0.0\", Some(27812), None),\n+    /// Allows using internal rustdoc features like `doc(primitive)` or `doc(keyword)`.\n+    (active, rustdoc_internals, \"1.58.0\", Some(90418), None),\n     /// Allows using `#[start]` on a function indicating that it is the program entrypoint.\n     (active, start, \"1.0.0\", Some(29633), None),\n     /// Allows using `#[structural_match]` which indicates that a type is structurally matchable.\n@@ -366,12 +368,8 @@ declare_features! (\n     (active, doc_cfg, \"1.21.0\", Some(43781), None),\n     /// Allows `#[doc(cfg_hide(...))]`.\n     (active, doc_cfg_hide, \"1.57.0\", Some(43781), None),\n-    /// Allows using `#[doc(keyword = \"...\")]`.\n-    (active, doc_keyword, \"1.28.0\", Some(51315), None),\n     /// Allows `#[doc(masked)]`.\n     (active, doc_masked, \"1.21.0\", Some(44027), None),\n-    /// Allows using doc(primitive) without a future-incompat warning\n-    (active, doc_primitive, \"1.56.0\", Some(88070), None),\n     /// Allows `X..Y` patterns.\n     (active, exclusive_range_pattern, \"1.11.0\", Some(37854), None),\n     /// Allows exhaustive pattern matching on types that contain uninhabited types."}, {"sha": "b9f3b5ad1b1fce8b5c6aebbf821dbcaa0306b5af", "filename": "compiler/rustc_feature/src/removed.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/compiler%2Frustc_feature%2Fsrc%2Fremoved.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/compiler%2Frustc_feature%2Fsrc%2Fremoved.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_feature%2Fsrc%2Fremoved.rs?ref=a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498", "patch": "@@ -76,6 +76,12 @@ declare_features! (\n     /// Allows the use of `#[derive(Anything)]` as sugar for `#[derive_Anything]`.\n     (removed, custom_derive, \"1.32.0\", Some(29644), None,\n      Some(\"subsumed by `#[proc_macro_derive]`\")),\n+    /// Allows using `#[doc(keyword = \"...\")]`.\n+    (removed, doc_keyword, \"1.28.0\", Some(51315), None,\n+     Some(\"merged into `#![feature(rustdoc_internals)]`\")),\n+    /// Allows using `doc(primitive)` without a future-incompat warning.\n+    (removed, doc_primitive, \"1.56.0\", Some(88070), None,\n+     Some(\"merged into `#![feature(rustdoc_internals)]`\")),\n     /// Allows `#[doc(spotlight)]`.\n     /// The attribute was renamed to `#[doc(notable_trait)]`\n     /// and the feature to `doc_notable_trait`."}, {"sha": "f761eaae5ab73652822d584ac0c4b0fd0ef7f92b", "filename": "compiler/rustc_passes/src/check_attr.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/compiler%2Frustc_passes%2Fsrc%2Fcheck_attr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/compiler%2Frustc_passes%2Fsrc%2Fcheck_attr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_passes%2Fsrc%2Fcheck_attr.rs?ref=a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498", "patch": "@@ -982,7 +982,7 @@ impl CheckAttrVisitor<'tcx> {\n                         }\n \n                         sym::primitive => {\n-                            if !self.tcx.features().doc_primitive {\n+                            if !self.tcx.features().rustdoc_internals {\n                                 self.tcx.struct_span_lint_hir(\n                                     INVALID_DOC_ATTRIBUTES,\n                                     hir_id,"}, {"sha": "97b155d2377c789eb8ffa8d46f63d3559cf82b89", "filename": "compiler/rustc_span/src/symbol.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/compiler%2Frustc_span%2Fsrc%2Fsymbol.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/compiler%2Frustc_span%2Fsrc%2Fsymbol.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_span%2Fsrc%2Fsymbol.rs?ref=a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498", "patch": "@@ -1155,6 +1155,7 @@ symbols! {\n         rustc_unsafe_specialization_marker,\n         rustc_variance,\n         rustdoc,\n+        rustdoc_internals,\n         rustfmt,\n         rvalue_static_promotion,\n         s,"}, {"sha": "fdb23529599c890aa6a9aeed9bff1ca85dd4a15c", "filename": "library/core/src/lib.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/library%2Fcore%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/library%2Fcore%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Flib.rs?ref=a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498", "patch": "@@ -166,7 +166,8 @@\n #![feature(derive_default_enum)]\n #![feature(doc_cfg)]\n #![feature(doc_notable_trait)]\n-#![feature(doc_primitive)]\n+#![cfg_attr(bootstrap, feature(doc_primitive))]\n+#![cfg_attr(not(bootstrap), feature(rustdoc_internals))]\n #![feature(exhaustive_patterns)]\n #![feature(doc_cfg_hide)]\n #![feature(extern_types)]"}, {"sha": "504c3b7e9f99c575be33b94fffbfb405ede59e32", "filename": "library/std/src/lib.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/library%2Fstd%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/library%2Fstd%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Flib.rs?ref=a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498", "patch": "@@ -275,10 +275,11 @@\n #![feature(decl_macro)]\n #![feature(doc_cfg)]\n #![feature(doc_cfg_hide)]\n-#![feature(doc_keyword)]\n+#![cfg_attr(bootstrap, feature(doc_primitive))]\n+#![cfg_attr(bootstrap, feature(doc_keyword))]\n+#![cfg_attr(not(bootstrap), feature(rustdoc_internals))]\n #![feature(doc_masked)]\n #![feature(doc_notable_trait)]\n-#![feature(doc_primitive)]\n #![feature(dropck_eyepatch)]\n #![feature(duration_checked_float)]\n #![feature(duration_constants)]"}, {"sha": "6e52127591c76c66388d63a6abf817778ddae434", "filename": "src/doc/rustdoc/src/unstable-features.md", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/src%2Fdoc%2Frustdoc%2Fsrc%2Funstable-features.md", "raw_url": "https://github.com/rust-lang/rust/raw/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/src%2Fdoc%2Frustdoc%2Fsrc%2Funstable-features.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Frustdoc%2Fsrc%2Funstable-features.md?ref=a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498", "patch": "@@ -138,7 +138,8 @@ This is for Rust compiler internal use only.\n \n Since primitive types are defined in the compiler, there's no place to attach documentation\n attributes. The `#[doc(primitive)]` attribute is used by the standard library to provide a way\n-to generate documentation for primitive types, and requires `#![feature(doc_primitive)]` to enable.\n+to generate documentation for primitive types, and requires `#![feature(rustdoc_internals)]` to\n+enable.\n \n ## Document keywords\n \n@@ -149,7 +150,7 @@ Rust keywords are documented in the standard library (look for `match` for examp\n To do so, the `#[doc(keyword = \"...\")]` attribute is used. Example:\n \n ```rust\n-#![feature(doc_keyword)]\n+#![feature(rustdoc_internals)]\n \n /// Some documentation about the keyword.\n #[doc(keyword = \"keyword\")]"}, {"sha": "458bcc4780c6c5abfa909b611982fd7439e8b85b", "filename": "src/test/rustdoc-gui/src/test_docs/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/src%2Ftest%2Frustdoc-gui%2Fsrc%2Ftest_docs%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/src%2Ftest%2Frustdoc-gui%2Fsrc%2Ftest_docs%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsrc%2Ftest_docs%2Flib.rs?ref=a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498", "patch": "@@ -2,7 +2,7 @@\n //! documentation generated so we can test each different features.\n \n #![crate_name = \"test_docs\"]\n-#![feature(doc_keyword)]\n+#![feature(rustdoc_internals)]\n #![feature(doc_cfg)]\n \n use std::convert::AsRef;"}, {"sha": "b84c2f7c6ac39e440090cfb83ebbe7e2ed9c4147", "filename": "src/test/rustdoc-json/primitive.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/src%2Ftest%2Frustdoc-json%2Fprimitive.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/src%2Ftest%2Frustdoc-json%2Fprimitive.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-json%2Fprimitive.rs?ref=a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498", "patch": "@@ -1,6 +1,6 @@\n // edition:2018\n \n-#![feature(doc_primitive)]\n+#![feature(rustdoc_internals)]\n \n #[doc(primitive = \"usize\")]\n mod usize {}"}, {"sha": "72b70d6980bf3f9e54997334b35b60e4c470086a", "filename": "src/test/rustdoc-ui/coverage/exotic.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/src%2Ftest%2Frustdoc-ui%2Fcoverage%2Fexotic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/src%2Ftest%2Frustdoc-ui%2Fcoverage%2Fexotic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Fcoverage%2Fexotic.rs?ref=a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498", "patch": "@@ -1,8 +1,7 @@\n // compile-flags:-Z unstable-options --show-coverage\n // check-pass\n \n-#![feature(doc_keyword)]\n-#![feature(doc_primitive)]\n+#![feature(rustdoc_internals)]\n \n //! the features only used in std also have entries in the table, so make sure those get pulled out\n //! properly as well"}, {"sha": "2d70471c85e111f3f93672079d234c25ee81b20c", "filename": "src/test/rustdoc-ui/invalid-keyword.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/src%2Ftest%2Frustdoc-ui%2Finvalid-keyword.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/src%2Ftest%2Frustdoc-ui%2Finvalid-keyword.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Finvalid-keyword.rs?ref=a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498", "patch": "@@ -1,4 +1,4 @@\n-#![feature(doc_keyword)]\n+#![feature(rustdoc_internals)]\n \n #[doc(keyword = \"foo df\")] //~ ERROR\n mod foo {}"}, {"sha": "16f7cac5f51cc77774a6372c1e8ec22280bbbf0a", "filename": "src/test/rustdoc/keyword.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/src%2Ftest%2Frustdoc%2Fkeyword.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/src%2Ftest%2Frustdoc%2Fkeyword.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fkeyword.rs?ref=a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498", "patch": "@@ -1,6 +1,6 @@\n #![crate_name = \"foo\"]\n \n-#![feature(doc_keyword)]\n+#![feature(rustdoc_internals)]\n \n // @has foo/index.html '//h2[@id=\"keywords\"]' 'Keywords'\n // @has foo/index.html '//a[@href=\"keyword.match.html\"]' 'match'"}, {"sha": "0cc4f147e1c071fc4f5cd19986e10ba303957c92", "filename": "src/test/rustdoc/tab_title.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/src%2Ftest%2Frustdoc%2Ftab_title.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/src%2Ftest%2Frustdoc%2Ftab_title.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Ftab_title.rs?ref=a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498", "patch": "@@ -1,5 +1,5 @@\n #![crate_name = \"foo\"]\n-#![feature(doc_keyword)]\n+#![feature(rustdoc_internals)]\n \n // tests for the html <title> element\n "}, {"sha": "7783dc40fcf206ac6b64e0a4ce122534be01e110", "filename": "src/test/ui-fulldeps/internal-lints/existing_doc_keyword.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/src%2Ftest%2Fui-fulldeps%2Finternal-lints%2Fexisting_doc_keyword.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/src%2Ftest%2Fui-fulldeps%2Finternal-lints%2Fexisting_doc_keyword.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Finternal-lints%2Fexisting_doc_keyword.rs?ref=a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498", "patch": "@@ -1,7 +1,7 @@\n // compile-flags: -Z unstable-options\n \n #![feature(rustc_private)]\n-#![feature(doc_keyword)]\n+#![feature(rustdoc_internals)]\n \n #![crate_type = \"lib\"]\n "}, {"sha": "4bb9a40deb0dd844c71635354d13e4606abb3c46", "filename": "src/test/ui/feature-gates/feature-gate-doc_keyword.rs", "status": "removed", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/cbe563a4d575f888d3889a6d8f103ce1ebbe9ad3/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-doc_keyword.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cbe563a4d575f888d3889a6d8f103ce1ebbe9ad3/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-doc_keyword.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-doc_keyword.rs?ref=cbe563a4d575f888d3889a6d8f103ce1ebbe9ad3", "patch": "@@ -1,5 +0,0 @@\n-#[doc(keyword = \"match\")] //~ ERROR: `#[doc(keyword)]` is experimental\n-/// wonderful\n-mod foo{}\n-\n-fn main() {}"}, {"sha": "c5dc7d537fd887e0f87090ef165ab8b9a42a9242", "filename": "src/test/ui/feature-gates/feature-gate-doc_keyword.stderr", "status": "removed", "additions": 0, "deletions": 12, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/cbe563a4d575f888d3889a6d8f103ce1ebbe9ad3/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-doc_keyword.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/cbe563a4d575f888d3889a6d8f103ce1ebbe9ad3/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-doc_keyword.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-doc_keyword.stderr?ref=cbe563a4d575f888d3889a6d8f103ce1ebbe9ad3", "patch": "@@ -1,12 +0,0 @@\n-error[E0658]: `#[doc(keyword)]` is experimental\n-  --> $DIR/feature-gate-doc_keyword.rs:1:1\n-   |\n-LL | #[doc(keyword = \"match\")]\n-   | ^^^^^^^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: see issue #51315 <https://github.com/rust-lang/rust/issues/51315> for more information\n-   = help: add `#![feature(doc_keyword)]` to the crate attributes to enable\n-\n-error: aborting due to previous error\n-\n-For more information about this error, try `rustc --explain E0658`."}, {"sha": "d2ff4f620098661406760c8ba73a833814636a71", "filename": "src/test/ui/feature-gates/feature-gate-rustdoc_internals.rs", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-rustdoc_internals.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-rustdoc_internals.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-rustdoc_internals.rs?ref=a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498", "patch": "@@ -0,0 +1,5 @@\n+#[doc(keyword = \"match\")] //~ ERROR: `#[doc(keyword)]` is meant for internal use only\n+/// wonderful\n+mod foo {}\n+\n+fn main() {}"}, {"sha": "e96461ac38acbe555dcb6f3e8e1350e755f641ad", "filename": "src/test/ui/feature-gates/feature-gate-rustdoc_internals.stderr", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-rustdoc_internals.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-rustdoc_internals.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-rustdoc_internals.stderr?ref=a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498", "patch": "@@ -0,0 +1,12 @@\n+error[E0658]: `#[doc(keyword)]` is meant for internal use only\n+  --> $DIR/feature-gate-rustdoc_internals.rs:1:1\n+   |\n+LL | #[doc(keyword = \"match\")]\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: see issue #90418 <https://github.com/rust-lang/rust/issues/90418> for more information\n+   = help: add `#![feature(rustdoc_internals)]` to the crate attributes to enable\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0658`."}, {"sha": "43b84e5018cda2c17385b533d71b2ca795a38d35", "filename": "src/test/ui/rustdoc/doc_keyword.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/src%2Ftest%2Fui%2Frustdoc%2Fdoc_keyword.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/src%2Ftest%2Fui%2Frustdoc%2Fdoc_keyword.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frustdoc%2Fdoc_keyword.rs?ref=a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498", "patch": "@@ -1,5 +1,5 @@\n #![crate_type = \"lib\"]\n-#![feature(doc_keyword)]\n+#![feature(rustdoc_internals)]\n \n #![doc(keyword = \"hello\")] //~ ERROR\n "}, {"sha": "739c624d0c6f7dcaeb333dfa863f99368386b213", "filename": "src/test/ui/rustdoc/renamed-features-rustdoc_internals.rs", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/src%2Ftest%2Fui%2Frustdoc%2Frenamed-features-rustdoc_internals.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/src%2Ftest%2Fui%2Frustdoc%2Frenamed-features-rustdoc_internals.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frustdoc%2Frenamed-features-rustdoc_internals.rs?ref=a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498", "patch": "@@ -0,0 +1,5 @@\n+#![feature(doc_keyword)] //~ ERROR\n+#![feature(doc_primitive)] //~ ERROR\n+#![crate_type = \"lib\"]\n+\n+pub fn foo() {}"}, {"sha": "d0979ce97ac8701775295b17514c3f5e43085c21", "filename": "src/test/ui/rustdoc/renamed-features-rustdoc_internals.stderr", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/src%2Ftest%2Fui%2Frustdoc%2Frenamed-features-rustdoc_internals.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498/src%2Ftest%2Fui%2Frustdoc%2Frenamed-features-rustdoc_internals.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frustdoc%2Frenamed-features-rustdoc_internals.stderr?ref=a6a1d7ca2936ddb33dbaad69ae3a8a47b9208498", "patch": "@@ -0,0 +1,19 @@\n+error[E0557]: feature has been removed\n+  --> $DIR/renamed-features-rustdoc_internals.rs:1:12\n+   |\n+LL | #![feature(doc_keyword)]\n+   |            ^^^^^^^^^^^ feature has been removed\n+   |\n+   = note: merged into `#![feature(rustdoc_internals)]`\n+\n+error[E0557]: feature has been removed\n+  --> $DIR/renamed-features-rustdoc_internals.rs:2:12\n+   |\n+LL | #![feature(doc_primitive)]\n+   |            ^^^^^^^^^^^^^ feature has been removed\n+   |\n+   = note: merged into `#![feature(rustdoc_internals)]`\n+\n+error: aborting due to 2 previous errors\n+\n+For more information about this error, try `rustc --explain E0557`."}]}