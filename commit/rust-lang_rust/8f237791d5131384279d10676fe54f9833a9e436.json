{"sha": "8f237791d5131384279d10676fe54f9833a9e436", "node_id": "C_kwDOAAsO6NoAKDhmMjM3NzkxZDUxMzEzODQyNzlkMTA2NzZmZTU0Zjk4MzNhOWU0MzY", "commit": {"author": {"name": "Ellen", "email": "supbscripter@gmail.com", "date": "2021-10-20T22:36:50Z"}, "committer": {"name": "Ellen", "email": "supbscripter@gmail.com", "date": "2021-10-20T22:36:50Z"}, "message": "Inference", "tree": {"sha": "df118d3a1fe1b9ac65a7c19dad3d6c867a1eaad4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/df118d3a1fe1b9ac65a7c19dad3d6c867a1eaad4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8f237791d5131384279d10676fe54f9833a9e436", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8f237791d5131384279d10676fe54f9833a9e436", "html_url": "https://github.com/rust-lang/rust/commit/8f237791d5131384279d10676fe54f9833a9e436", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8f237791d5131384279d10676fe54f9833a9e436/comments", "author": {"login": "BoxyUwU", "id": 21149742, "node_id": "MDQ6VXNlcjIxMTQ5NzQy", "avatar_url": "https://avatars.githubusercontent.com/u/21149742?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BoxyUwU", "html_url": "https://github.com/BoxyUwU", "followers_url": "https://api.github.com/users/BoxyUwU/followers", "following_url": "https://api.github.com/users/BoxyUwU/following{/other_user}", "gists_url": "https://api.github.com/users/BoxyUwU/gists{/gist_id}", "starred_url": "https://api.github.com/users/BoxyUwU/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BoxyUwU/subscriptions", "organizations_url": "https://api.github.com/users/BoxyUwU/orgs", "repos_url": "https://api.github.com/users/BoxyUwU/repos", "events_url": "https://api.github.com/users/BoxyUwU/events{/privacy}", "received_events_url": "https://api.github.com/users/BoxyUwU/received_events", "type": "User", "site_admin": false}, "committer": {"login": "BoxyUwU", "id": 21149742, "node_id": "MDQ6VXNlcjIxMTQ5NzQy", "avatar_url": "https://avatars.githubusercontent.com/u/21149742?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BoxyUwU", "html_url": "https://github.com/BoxyUwU", "followers_url": "https://api.github.com/users/BoxyUwU/followers", "following_url": "https://api.github.com/users/BoxyUwU/following{/other_user}", "gists_url": "https://api.github.com/users/BoxyUwU/gists{/gist_id}", "starred_url": "https://api.github.com/users/BoxyUwU/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BoxyUwU/subscriptions", "organizations_url": "https://api.github.com/users/BoxyUwU/orgs", "repos_url": "https://api.github.com/users/BoxyUwU/repos", "events_url": "https://api.github.com/users/BoxyUwU/events{/privacy}", "received_events_url": "https://api.github.com/users/BoxyUwU/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "83a1834c14cbdd526f48f496d19a430b9f53ae38", "url": "https://api.github.com/repos/rust-lang/rust/commits/83a1834c14cbdd526f48f496d19a430b9f53ae38", "html_url": "https://github.com/rust-lang/rust/commit/83a1834c14cbdd526f48f496d19a430b9f53ae38"}], "stats": {"total": 26, "additions": 26, "deletions": 0}, "files": [{"sha": "c7f14e47a9d64980ef15cb85691919c84e3862fd", "filename": "src/test/ui/const-generics/defaults/doesnt_infer.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/8f237791d5131384279d10676fe54f9833a9e436/src%2Ftest%2Fui%2Fconst-generics%2Fdefaults%2Fdoesnt_infer.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8f237791d5131384279d10676fe54f9833a9e436/src%2Ftest%2Fui%2Fconst-generics%2Fdefaults%2Fdoesnt_infer.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fdefaults%2Fdoesnt_infer.rs?ref=8f237791d5131384279d10676fe54f9833a9e436", "patch": "@@ -0,0 +1,15 @@\n+#![feature(const_generics_defaults)]\n+\n+// test that defaulted const params are not used to help type inference\n+\n+struct Foo<const N: u32 = 2>;\n+\n+impl<const N: u32> Foo<N> {\n+    fn foo() -> Self { loop {} }\n+}\n+\n+fn main() {\n+    let foo = Foo::<1>::foo();\n+    let foo = Foo::foo();\n+    //~^ error: type annotations needed for `Foo<{_: u32}>`\n+}"}, {"sha": "b57975e26f290b3667b35a347ef9609dc4f48878", "filename": "src/test/ui/const-generics/defaults/doesnt_infer.stderr", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/8f237791d5131384279d10676fe54f9833a9e436/src%2Ftest%2Fui%2Fconst-generics%2Fdefaults%2Fdoesnt_infer.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8f237791d5131384279d10676fe54f9833a9e436/src%2Ftest%2Fui%2Fconst-generics%2Fdefaults%2Fdoesnt_infer.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fdefaults%2Fdoesnt_infer.stderr?ref=8f237791d5131384279d10676fe54f9833a9e436", "patch": "@@ -0,0 +1,11 @@\n+error[E0282]: type annotations needed for `Foo<{_: u32}>`\n+  --> $DIR/doesnt_infer.rs:13:15\n+   |\n+LL |     let foo = Foo::foo();\n+   |         ---   ^^^^^^^^ cannot infer the value of const parameter `N`\n+   |         |\n+   |         consider giving `foo` the explicit type `Foo<{_: u32}>`, where the type parameter `N` is specified\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0282`."}]}