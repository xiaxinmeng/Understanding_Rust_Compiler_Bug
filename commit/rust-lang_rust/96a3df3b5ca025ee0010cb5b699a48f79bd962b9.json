{"sha": "96a3df3b5ca025ee0010cb5b699a48f79bd962b9", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk2YTNkZjNiNWNhMDI1ZWUwMDEwY2I1YjY5OWE0OGY3OWJkOTYyYjk=", "commit": {"author": {"name": "topecongiro", "email": "seuchida@gmail.com", "date": "2019-02-12T01:16:12Z"}, "committer": {"name": "topecongiro", "email": "seuchida@gmail.com", "date": "2019-02-12T01:16:12Z"}, "message": "Format visibility on trait alias", "tree": {"sha": "76b70f6aaee2a09f62568555cd1faaea7b1aa737", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/76b70f6aaee2a09f62568555cd1faaea7b1aa737"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/96a3df3b5ca025ee0010cb5b699a48f79bd962b9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/96a3df3b5ca025ee0010cb5b699a48f79bd962b9", "html_url": "https://github.com/rust-lang/rust/commit/96a3df3b5ca025ee0010cb5b699a48f79bd962b9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/96a3df3b5ca025ee0010cb5b699a48f79bd962b9/comments", "author": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "committer": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ce682bdabc39a7261eb5c3d43b20bb84fae64fde", "url": "https://api.github.com/repos/rust-lang/rust/commits/ce682bdabc39a7261eb5c3d43b20bb84fae64fde", "html_url": "https://github.com/rust-lang/rust/commit/ce682bdabc39a7261eb5c3d43b20bb84fae64fde"}], "stats": {"total": 16, "additions": 15, "deletions": 1}, "files": [{"sha": "818cf5d6c911918ddf1f0ba11f219da8aefd883a", "filename": "src/items.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/96a3df3b5ca025ee0010cb5b699a48f79bd962b9/src%2Fitems.rs", "raw_url": "https://github.com/rust-lang/rust/raw/96a3df3b5ca025ee0010cb5b699a48f79bd962b9/src%2Fitems.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fitems.rs?ref=96a3df3b5ca025ee0010cb5b699a48f79bd962b9", "patch": "@@ -1163,6 +1163,7 @@ pub fn format_trait(\n pub fn format_trait_alias(\n     context: &RewriteContext<'_>,\n     ident: ast::Ident,\n+    vis: &ast::Visibility,\n     generics: &ast::Generics,\n     generic_bounds: &ast::GenericBounds,\n     shape: Shape,\n@@ -1171,7 +1172,8 @@ pub fn format_trait_alias(\n     // 6 = \"trait \", 2 = \" =\"\n     let g_shape = shape.offset_left(6)?.sub_width(2)?;\n     let generics_str = rewrite_generics(context, &alias, generics, g_shape)?;\n-    let lhs = format!(\"trait {} =\", generics_str);\n+    let vis_str = format_visibility(context, vis);\n+    let lhs = format!(\"{}trait {} =\", vis_str, generics_str);\n     // 1 = \";\"\n     rewrite_assign_rhs(context, lhs, generic_bounds, shape.sub_width(1)?).map(|s| s + \";\")\n }"}, {"sha": "8ca534011268b10b76ef8c461b76284b4e8a1893", "filename": "src/visitor.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/96a3df3b5ca025ee0010cb5b699a48f79bd962b9/src%2Fvisitor.rs", "raw_url": "https://github.com/rust-lang/rust/raw/96a3df3b5ca025ee0010cb5b699a48f79bd962b9/src%2Fvisitor.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fvisitor.rs?ref=96a3df3b5ca025ee0010cb5b699a48f79bd962b9", "patch": "@@ -363,6 +363,7 @@ impl<'b, 'a: 'b> FmtVisitor<'a> {\n                 let rw = format_trait_alias(\n                     &self.get_context(),\n                     item.ident,\n+                    &item.vis,\n                     generics,\n                     generic_bounds,\n                     shape,"}, {"sha": "1080211095181784ca6dc9aee8d17595246235b8", "filename": "tests/source/trait.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/96a3df3b5ca025ee0010cb5b699a48f79bd962b9/tests%2Fsource%2Ftrait.rs", "raw_url": "https://github.com/rust-lang/rust/raw/96a3df3b5ca025ee0010cb5b699a48f79bd962b9/tests%2Fsource%2Ftrait.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Ftrait.rs?ref=96a3df3b5ca025ee0010cb5b699a48f79bd962b9", "patch": "@@ -84,7 +84,14 @@ trait FooBar =\n trait FooBar <A, B, C>=\n     Foo \n     + Bar;\n+pub trait FooBar =\n+    Foo \n+    + Bar;\n+pub trait FooBar <A, B, C>=\n+    Foo \n+    + Bar;\n trait AAAAAAAAAAAAAAAAAA = BBBBBBBBBBBBBBBBBBB + CCCCCCCCCCCCCCCCCCCCCCCCCCCCC + DDDDDDDDDDDDDDDDDD;\n+pub trait AAAAAAAAAAAAAAAAAA = BBBBBBBBBBBBBBBBBBB + CCCCCCCCCCCCCCCCCCCCCCCCCCCCC + DDDDDDDDDDDDDDDDDD;\n trait AAAAAAAAAAAAAAAAAAA = BBBBBBBBBBBBBBBBBBB + CCCCCCCCCCCCCCCCCCCCCCCCCCCCC + DDDDDDDDDDDDDDDDDD;\n trait AAAAAAAAAAAAAAAAAA = BBBBBBBBBBBBBBBBBBB + CCCCCCCCCCCCCCCCCCCCCCCCCCCCC + DDDDDDDDDDDDDDDDDDD;\n trait AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA<A, B, C, D, E> = FooBar;"}, {"sha": "89a82847923f6a28ad00a7717c26b5c7f5f53177", "filename": "tests/target/trait.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/96a3df3b5ca025ee0010cb5b699a48f79bd962b9/tests%2Ftarget%2Ftrait.rs", "raw_url": "https://github.com/rust-lang/rust/raw/96a3df3b5ca025ee0010cb5b699a48f79bd962b9/tests%2Ftarget%2Ftrait.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Ftrait.rs?ref=96a3df3b5ca025ee0010cb5b699a48f79bd962b9", "patch": "@@ -113,7 +113,11 @@ trait MyTrait<\n // Trait aliases\n trait FooBar = Foo + Bar;\n trait FooBar<A, B, C> = Foo + Bar;\n+pub trait FooBar = Foo + Bar;\n+pub trait FooBar<A, B, C> = Foo + Bar;\n trait AAAAAAAAAAAAAAAAAA = BBBBBBBBBBBBBBBBBBB + CCCCCCCCCCCCCCCCCCCCCCCCCCCCC + DDDDDDDDDDDDDDDDDD;\n+pub trait AAAAAAAAAAAAAAAAAA =\n+    BBBBBBBBBBBBBBBBBBB + CCCCCCCCCCCCCCCCCCCCCCCCCCCCC + DDDDDDDDDDDDDDDDDD;\n trait AAAAAAAAAAAAAAAAAAA =\n     BBBBBBBBBBBBBBBBBBB + CCCCCCCCCCCCCCCCCCCCCCCCCCCCC + DDDDDDDDDDDDDDDDDD;\n trait AAAAAAAAAAAAAAAAAA ="}]}