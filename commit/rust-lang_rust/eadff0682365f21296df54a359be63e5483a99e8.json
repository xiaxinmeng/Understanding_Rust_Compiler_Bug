{"sha": "eadff0682365f21296df54a359be63e5483a99e8", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVhZGZmMDY4MjM2NWYyMTI5NmRmNTRhMzU5YmU2M2U1NDgzYTk5ZTg=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2020-01-18T17:57:06Z"}, "committer": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2020-02-01T17:59:49Z"}, "message": "syntax: reexport attr globals", "tree": {"sha": "8d28100163c84691dad2a7480916cfc46a36e249", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8d28100163c84691dad2a7480916cfc46a36e249"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/eadff0682365f21296df54a359be63e5483a99e8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/eadff0682365f21296df54a359be63e5483a99e8", "html_url": "https://github.com/rust-lang/rust/commit/eadff0682365f21296df54a359be63e5483a99e8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/eadff0682365f21296df54a359be63e5483a99e8/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f882b0797764fb22a445b22748f36f9f904166ae", "url": "https://api.github.com/repos/rust-lang/rust/commits/f882b0797764fb22a445b22748f36f9f904166ae", "html_url": "https://github.com/rust-lang/rust/commit/f882b0797764fb22a445b22748f36f9f904166ae"}], "stats": {"total": 15, "additions": 8, "deletions": 7}, "files": [{"sha": "279e6f518a71da1f2eeb74b24829507727894157", "filename": "src/librustc_ast_pretty/pprust/tests.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/eadff0682365f21296df54a359be63e5483a99e8/src%2Flibrustc_ast_pretty%2Fpprust%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eadff0682365f21296df54a359be63e5483a99e8/src%2Flibrustc_ast_pretty%2Fpprust%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_ast_pretty%2Fpprust%2Ftests.rs?ref=eadff0682365f21296df54a359be63e5483a99e8", "patch": "@@ -3,7 +3,7 @@ use super::*;\n use rustc_span;\n use rustc_span::source_map::{dummy_spanned, respan};\n use syntax::ast;\n-use syntax::attr::with_default_globals;\n+use syntax::with_default_globals;\n \n fn fun_to_string(\n     decl: &ast::FnDecl,"}, {"sha": "2a667541ad3e7f2cc1350b77e5a928e19aceae4b", "filename": "src/librustc_interface/interface.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/eadff0682365f21296df54a359be63e5483a99e8/src%2Flibrustc_interface%2Finterface.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eadff0682365f21296df54a359be63e5483a99e8/src%2Flibrustc_interface%2Finterface.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_interface%2Finterface.rs?ref=eadff0682365f21296df54a359be63e5483a99e8", "patch": "@@ -65,7 +65,7 @@ impl Compiler {\n \n /// Converts strings provided as `--cfg [cfgspec]` into a `crate_cfg`.\n pub fn parse_cfgspecs(cfgspecs: Vec<String>) -> FxHashSet<(String, Option<String>)> {\n-    syntax::attr::with_default_globals(move || {\n+    syntax::with_default_globals(move || {\n         let cfg = cfgspecs\n             .into_iter()\n             .map(|s| {"}, {"sha": "3052c9fc26f081a8e06f0fa5648cca46527eaa7f", "filename": "src/librustc_interface/util.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/eadff0682365f21296df54a359be63e5483a99e8/src%2Flibrustc_interface%2Futil.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eadff0682365f21296df54a359be63e5483a99e8/src%2Flibrustc_interface%2Futil.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_interface%2Futil.rs?ref=eadff0682365f21296df54a359be63e5483a99e8", "patch": "@@ -147,7 +147,7 @@ pub fn spawn_thread_pool<F: FnOnce() -> R + Send, R: Send>(\n     crate::callbacks::setup_callbacks();\n \n     scoped_thread(cfg, || {\n-        syntax::attr::with_globals(edition, || {\n+        syntax::with_globals(edition, || {\n             ty::tls::GCX_PTR.set(&Lock::new(0), || {\n                 if let Some(stderr) = stderr {\n                     io::set_panic(Some(box Sink(stderr.clone())));\n@@ -183,15 +183,15 @@ pub fn spawn_thread_pool<F: FnOnce() -> R + Send, R: Send>(\n \n     let with_pool = move |pool: &ThreadPool| pool.install(move || f());\n \n-    syntax::attr::with_globals(edition, || {\n-        syntax::attr::GLOBALS.with(|syntax_globals| {\n+    syntax::with_globals(edition, || {\n+        syntax::GLOBALS.with(|syntax_globals| {\n             rustc_span::GLOBALS.with(|rustc_span_globals| {\n                 // The main handler runs for each Rayon worker thread and sets up\n                 // the thread local rustc uses. syntax_globals and rustc_span_globals are\n                 // captured and set on the new threads. ty::tls::with_thread_locals sets up\n                 // thread local callbacks from libsyntax\n                 let main_handler = move |thread: ThreadBuilder| {\n-                    syntax::attr::GLOBALS.set(syntax_globals, || {\n+                    syntax::GLOBALS.set(syntax_globals, || {\n                         rustc_span::GLOBALS.set(rustc_span_globals, || {\n                             if let Some(stderr) = stderr {\n                                 io::set_panic(Some(box Sink(stderr.clone())));"}, {"sha": "936f63975a58e5307deb4ce9ff421a0cdad29065", "filename": "src/librustdoc/test.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/eadff0682365f21296df54a359be63e5483a99e8/src%2Flibrustdoc%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eadff0682365f21296df54a359be63e5483a99e8/src%2Flibrustdoc%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Ftest.rs?ref=eadff0682365f21296df54a359be63e5483a99e8", "patch": "@@ -18,7 +18,7 @@ use std::path::PathBuf;\n use std::process::{self, Command, Stdio};\n use std::str;\n use syntax::ast;\n-use syntax::attr::with_globals;\n+use syntax::with_globals;\n use tempfile::Builder as TempFileBuilder;\n use testing;\n "}, {"sha": "66c747f2c517a877ad3f20d5d5215f0695d8989e", "filename": "src/libsyntax/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/eadff0682365f21296df54a359be63e5483a99e8/src%2Flibsyntax%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eadff0682365f21296df54a359be63e5483a99e8/src%2Flibsyntax%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Flib.rs?ref=eadff0682365f21296df54a359be63e5483a99e8", "patch": "@@ -38,6 +38,7 @@ pub mod util {\n \n pub mod ast;\n pub mod attr;\n+pub use attr::{with_default_globals, with_globals, GLOBALS};\n pub mod entry;\n pub mod expand;\n pub mod mut_visit;"}]}