{"sha": "1a2b90bc9183fdebdb9e6588bced4fbdf1b5a85f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFhMmI5MGJjOTE4M2ZkZWJkYjllNjU4OGJjZWQ0ZmJkZjFiNWE4NWY=", "commit": {"author": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2021-07-23T19:31:07Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-07-23T19:31:07Z"}, "message": "Rollup merge of #87255 - RalfJung:miri-test-libcore, r=Mark-Simulacrum\n\nbetter support for running libcore tests with Miri\n\nSee https://github.com/rust-lang/miri-test-libstd/issues/4 for a description of the problem that this fixes.\nThanks to `@hyd-dev` for suggesting this patch!", "tree": {"sha": "7a6cd03bed42a3f87d552374acfb7f616579c176", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7a6cd03bed42a3f87d552374acfb7f616579c176"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1a2b90bc9183fdebdb9e6588bced4fbdf1b5a85f", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJg+xj8CRBK7hj4Ov3rIwAA8O4IACbleqDYchAukDbpDGB0M4Fh\nFWEzNpVvR9K2Y8DyN8q50tGC2J1BP9noQBV3fjRSHvMV1PyvOWzVtPffaGf6o99h\n1swvCyVh/RAxlSd1O4rPWomDCc84zWjrwdAl1WKxy6PwxMeQSw/Km4kk204Kv0hq\nuvbUy+BrtTSUWXvxUhmnErwY6MdJY0n6Zh9ufMbHJp6BpcWhT8YpDJ8nXH6rE9fq\nqDIrMa4Zjc0wZ09mPTU/Rmfp5rNReBHQ/z5FNrOO/0wCa1dgb9ZuUnEVjT8l5jUx\nmRCvWJTmHbwKAzXk0z5eM3KuQYQ3iwzPOtFTfO/KDK9sN3XZ2/9q42MeRi/BLVs=\n=ZwlE\n-----END PGP SIGNATURE-----\n", "payload": "tree 7a6cd03bed42a3f87d552374acfb7f616579c176\nparent aca83f1ab84f43bb3f7345baf84719eb2da4644b\nparent 6cba79851adbc88f75e50b0eed456f74967ff19c\nauthor Yuki Okushi <jtitor@2k36.org> 1627068667 +0900\ncommitter GitHub <noreply@github.com> 1627068667 +0900\n\nRollup merge of #87255 - RalfJung:miri-test-libcore, r=Mark-Simulacrum\n\nbetter support for running libcore tests with Miri\n\nSee https://github.com/rust-lang/miri-test-libstd/issues/4 for a description of the problem that this fixes.\nThanks to `@hyd-dev` for suggesting this patch!\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1a2b90bc9183fdebdb9e6588bced4fbdf1b5a85f", "html_url": "https://github.com/rust-lang/rust/commit/1a2b90bc9183fdebdb9e6588bced4fbdf1b5a85f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1a2b90bc9183fdebdb9e6588bced4fbdf1b5a85f/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "aca83f1ab84f43bb3f7345baf84719eb2da4644b", "url": "https://api.github.com/repos/rust-lang/rust/commits/aca83f1ab84f43bb3f7345baf84719eb2da4644b", "html_url": "https://github.com/rust-lang/rust/commit/aca83f1ab84f43bb3f7345baf84719eb2da4644b"}, {"sha": "6cba79851adbc88f75e50b0eed456f74967ff19c", "url": "https://api.github.com/repos/rust-lang/rust/commits/6cba79851adbc88f75e50b0eed456f74967ff19c", "html_url": "https://github.com/rust-lang/rust/commit/6cba79851adbc88f75e50b0eed456f74967ff19c"}], "stats": {"total": 8, "additions": 8, "deletions": 0}, "files": [{"sha": "fa1f361a5b6d1998e478024953a84e5803677dae", "filename": "library/alloc/src/lib.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/1a2b90bc9183fdebdb9e6588bced4fbdf1b5a85f/library%2Falloc%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1a2b90bc9183fdebdb9e6588bced4fbdf1b5a85f/library%2Falloc%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Falloc%2Fsrc%2Flib.rs?ref=1a2b90bc9183fdebdb9e6588bced4fbdf1b5a85f", "patch": "@@ -56,6 +56,10 @@\n //! [`Rc`]: rc\n //! [`RefCell`]: core::cell\n \n+// To run liballoc tests without x.py without ending up with two copies of liballoc, Miri needs to be\n+// able to \"empty\" this crate. See <https://github.com/rust-lang/miri-test-libstd/issues/4>.\n+// rustc itself never sets the feature, so this line has no affect there.\n+#![cfg(any(not(feature = \"miri-test-libstd\"), test, doctest))]\n #![allow(unused_attributes)]\n #![stable(feature = \"alloc\", since = \"1.36.0\")]\n #![doc("}, {"sha": "6d87a7ab055c2daafb22330291bd342053d776eb", "filename": "library/core/src/lib.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/1a2b90bc9183fdebdb9e6588bced4fbdf1b5a85f/library%2Fcore%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1a2b90bc9183fdebdb9e6588bced4fbdf1b5a85f/library%2Fcore%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Flib.rs?ref=1a2b90bc9183fdebdb9e6588bced4fbdf1b5a85f", "patch": "@@ -49,6 +49,10 @@\n //\n // This cfg won't affect doc tests.\n #![cfg(not(test))]\n+// To run libcore tests without x.py without ending up with two copies of libcore, Miri needs to be\n+// able to \"empty\" this crate. See <https://github.com/rust-lang/miri-test-libstd/issues/4>.\n+// rustc itself never sets the feature, so this line has no affect there.\n+#![cfg(any(not(feature = \"miri-test-libstd\"), test, doctest))]\n #![stable(feature = \"core\", since = \"1.6.0\")]\n #![doc(\n     html_playground_url = \"https://play.rust-lang.org/\","}]}