{"sha": "323880646d7595cf10f621163ae3f00a5861867f", "node_id": "C_kwDOAAsO6NoAKDMyMzg4MDY0NmQ3NTk1Y2YxMGY2MjExNjNhZTNmMDBhNTg2MTg2N2Y", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-02-09T22:29:59Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-02-09T22:29:59Z"}, "message": "Rollup merge of #93813 - xldenis:public-mir-passes, r=wesleywiser\n\nMake a few cleanup MIR passes public\n\nZulip Discussion: https://rust-lang.zulipchat.com/#narrow/stream/189540-t-compiler.2Fwg-mir-opt/topic/Making.20passes.20public.20again\n\nThis makes a few passes which used to be public, public again. I'd like to use these to clean up MIR code for my external rustc driver. The other option would be to make them all public, but I don't know if that's warranted / useful.\n\nr? `@wesleywiser`", "tree": {"sha": "f92e6e48436a2b3b0b6a9521b8dfe6515e3932f8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f92e6e48436a2b3b0b6a9521b8dfe6515e3932f8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/323880646d7595cf10f621163ae3f00a5861867f", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJiBEBnCRBK7hj4Ov3rIwAAcYoIAFvwLZeZ9+D+p1Uw5mOej6rs\n0xR9Vc8sfA61iWQhXwu31jsRQuCwx+yx3xcRTwBix8W5cUIpN+I+sKcaVvtyksdb\nLXl/pIenwM8Ro/4b4294pMfSnClmS43AE69Nw0n4cQBGbEEuclYBcH8sQ7UkZF3v\nmue7c9v6CCnXAn+CdpJvSkftf2l0xcp4dMhjIojmJlFQp7qyBn2ieJHsg2DzHQCi\nLJitP62dZCp6TBtOmX+56vVIxivnFgzqlh6vopbc837coXABmb+MlCYE0D9FQuJ0\n33i5BqoYt0nBS8KubKHq4fePJTDsDoWXYKmHfmw98HzKnc5hEBAelsLcZFAt2y4=\n=SHUv\n-----END PGP SIGNATURE-----\n", "payload": "tree f92e6e48436a2b3b0b6a9521b8dfe6515e3932f8\nparent 6db0f9ca0dcce3c781fe6f4e7fc5f3957b41dfef\nparent c97302efade33d55d4e1ead74947996fed3fa5da\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1644445799 +0100\ncommitter GitHub <noreply@github.com> 1644445799 +0100\n\nRollup merge of #93813 - xldenis:public-mir-passes, r=wesleywiser\n\nMake a few cleanup MIR passes public\n\nZulip Discussion: https://rust-lang.zulipchat.com/#narrow/stream/189540-t-compiler.2Fwg-mir-opt/topic/Making.20passes.20public.20again\n\nThis makes a few passes which used to be public, public again. I'd like to use these to clean up MIR code for my external rustc driver. The other option would be to make them all public, but I don't know if that's warranted / useful.\n\nr? `@wesleywiser`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/323880646d7595cf10f621163ae3f00a5861867f", "html_url": "https://github.com/rust-lang/rust/commit/323880646d7595cf10f621163ae3f00a5861867f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/323880646d7595cf10f621163ae3f00a5861867f/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6db0f9ca0dcce3c781fe6f4e7fc5f3957b41dfef", "url": "https://api.github.com/repos/rust-lang/rust/commits/6db0f9ca0dcce3c781fe6f4e7fc5f3957b41dfef", "html_url": "https://github.com/rust-lang/rust/commit/6db0f9ca0dcce3c781fe6f4e7fc5f3957b41dfef"}, {"sha": "c97302efade33d55d4e1ead74947996fed3fa5da", "url": "https://api.github.com/repos/rust-lang/rust/commits/c97302efade33d55d4e1ead74947996fed3fa5da", "html_url": "https://github.com/rust-lang/rust/commit/c97302efade33d55d4e1ead74947996fed3fa5da"}], "stats": {"total": 9, "additions": 6, "deletions": 3}, "files": [{"sha": "991d10a8547ff3d4eb87424322889666e33cfddd", "filename": "compiler/rustc_mir_transform/src/lib.rs", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/323880646d7595cf10f621163ae3f00a5861867f/compiler%2Frustc_mir_transform%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/323880646d7595cf10f621163ae3f00a5861867f/compiler%2Frustc_mir_transform%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir_transform%2Fsrc%2Flib.rs?ref=323880646d7595cf10f621163ae3f00a5861867f", "patch": "@@ -43,7 +43,8 @@ mod add_retag;\n mod check_const_item_mutation;\n mod check_packed_ref;\n pub mod check_unsafety;\n-mod cleanup_post_borrowck;\n+// This pass is public to allow external drivers to perform MIR cleanup\n+pub mod cleanup_post_borrowck;\n mod const_debuginfo;\n mod const_goto;\n mod const_prop;\n@@ -65,7 +66,8 @@ mod match_branches;\n mod multiple_return_terminators;\n mod normalize_array_len;\n mod nrvo;\n-mod remove_false_edges;\n+// This pass is public to allow external drivers to perform MIR cleanup\n+pub mod remove_false_edges;\n mod remove_noop_landing_pads;\n mod remove_storage_markers;\n mod remove_uninit_drops;\n@@ -75,7 +77,8 @@ mod required_consts;\n mod reveal_all;\n mod separate_const_switch;\n mod shim;\n-mod simplify;\n+// This pass is public to allow external drivers to perform MIR cleanup\n+pub mod simplify;\n mod simplify_branches;\n mod simplify_comparison_integral;\n mod simplify_try;"}]}