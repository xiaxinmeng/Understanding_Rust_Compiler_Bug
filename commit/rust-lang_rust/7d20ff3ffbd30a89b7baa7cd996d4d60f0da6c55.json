{"sha": "7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55", "node_id": "C_kwDOAAsO6NoAKDdkMjBmZjNmZmJkMzBhODliN2JhYTdjZDk5NmQ0ZDYwZjBkYTZjNTU", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-07-19T11:04:42Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-07-19T11:04:42Z"}, "message": "Auto merge of #12817 - fasterthanlime:expect-test-1-4-0, r=lnicola\n\nUpgrade to expect-test@1.4.0, add CARGO_WORKSPACE_DIR env var\n\nThis should make ra's test suite runnable from within `rust-analyzer/rust`.\n\n`@cuviper` ran into that when trying to run RA tests from rust CI: https://github.com/rust-lang/rust/pull/99444#issuecomment-1188844202", "tree": {"sha": "80ecd340b185f9612e03e93861439e7a25efedf3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/80ecd340b185f9612e03e93861439e7a25efedf3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55", "html_url": "https://github.com/rust-lang/rust/commit/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "88515b981db65aa994e23ed5a2a9160f0c10613b", "url": "https://api.github.com/repos/rust-lang/rust/commits/88515b981db65aa994e23ed5a2a9160f0c10613b", "html_url": "https://github.com/rust-lang/rust/commit/88515b981db65aa994e23ed5a2a9160f0c10613b"}, {"sha": "307be7cc7c8e0820a292124332fba7e0517d8ad2", "url": "https://api.github.com/repos/rust-lang/rust/commits/307be7cc7c8e0820a292124332fba7e0517d8ad2", "html_url": "https://github.com/rust-lang/rust/commit/307be7cc7c8e0820a292124332fba7e0517d8ad2"}], "stats": {"total": 37, "additions": 20, "deletions": 17}, "files": [{"sha": "24745d1c806febc2fbcc4fd04207d94d0b148782", "filename": ".cargo/config.toml", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/.cargo%2Fconfig.toml", "raw_url": "https://github.com/rust-lang/rust/raw/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/.cargo%2Fconfig.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.cargo%2Fconfig.toml?ref=7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55", "patch": "@@ -6,3 +6,6 @@ lint = \"clippy --all-targets -- -Aclippy::collapsible_if -Aclippy::needless_pass\n \n [target.x86_64-pc-windows-msvc]\n linker = \"rust-lld\"\n+\n+[env]\n+CARGO_WORKSPACE_DIR = { value = \"\", relative = true }\n\\ No newline at end of file"}, {"sha": "a960012c8cff8f055187c475c779da82e88800eb", "filename": "Cargo.lock", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55", "patch": "@@ -350,9 +350,9 @@ dependencies = [\n \n [[package]]\n name = \"expect-test\"\n-version = \"1.3.0\"\n+version = \"1.4.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"dced95c9dcd4e3241f95841aad395f9c8d7933a3b0b524bdeb2440885c72a271\"\n+checksum = \"1d4661aca38d826eb7c72fe128e4238220616de4c0cc00db7bfc38e2e1364dd3\"\n dependencies = [\n  \"dissimilar\",\n  \"once_cell\","}, {"sha": "c9664a83ab863094701421f1aef244d5f728d95e", "filename": "crates/cfg/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/crates%2Fcfg%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/crates%2Fcfg%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fcfg%2FCargo.toml?ref=7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55", "patch": "@@ -17,7 +17,7 @@ tt = { path = \"../tt\", version = \"0.0.0\" }\n [dev-dependencies]\n mbe = { path = \"../mbe\" }\n syntax = { path = \"../syntax\" }\n-expect-test = \"1.3.0\"\n+expect-test = \"1.4.0\"\n oorandom = \"11.1.3\"\n # We depend on both individually instead of using `features = [\"derive\"]` to microoptimize the\n # build graph: if the feature was enabled, syn would be built early on in the graph if `smolstr`"}, {"sha": "e8cff2f3e6cd7190bb63b188a5063fdd022e3ec6", "filename": "crates/hir-def/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/crates%2Fhir-def%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/crates%2Fhir-def%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir-def%2FCargo.toml?ref=7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55", "patch": "@@ -40,4 +40,4 @@ limit = { path = \"../limit\", version = \"0.0.0\" }\n \n [dev-dependencies]\n test-utils = { path = \"../test-utils\" }\n-expect-test = \"1.3.0\"\n+expect-test = \"1.4.0\""}, {"sha": "dfd470ffca6ac025e79ecb331727fd243b32769f", "filename": "crates/hir-expand/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/crates%2Fhir-expand%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/crates%2Fhir-expand%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir-expand%2FCargo.toml?ref=7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55", "patch": "@@ -31,4 +31,4 @@ mbe = { path = \"../mbe\", version = \"0.0.0\" }\n limit = { path = \"../limit\", version = \"0.0.0\" }\n \n [dev-dependencies]\n-expect-test = \"1.3.0\"\n+expect-test = \"1.4.0\""}, {"sha": "5cd444c1ad3bd6b58dca6fc5a001ce12e91b8ed3", "filename": "crates/hir-ty/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/crates%2Fhir-ty%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/crates%2Fhir-ty%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir-ty%2FCargo.toml?ref=7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55", "patch": "@@ -35,7 +35,7 @@ limit = { path = \"../limit\", version = \"0.0.0\" }\n \n [dev-dependencies]\n test-utils = { path = \"../test-utils\" }\n-expect-test = \"1.3.0\"\n+expect-test = \"1.4.0\"\n tracing = \"0.1.35\"\n tracing-subscriber = { version = \"0.3.14\", default-features = false, features = [\n     \"env-filter\","}, {"sha": "51e43d21cb03daa95b3885498d5c6cd96957790b", "filename": "crates/ide-assists/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/crates%2Fide-assists%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/crates%2Fide-assists%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide-assists%2FCargo.toml?ref=7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55", "patch": "@@ -25,4 +25,4 @@ hir = { path = \"../hir\", version = \"0.0.0\" }\n [dev-dependencies]\n test-utils = { path = \"../test-utils\" }\n sourcegen = { path = \"../sourcegen\" }\n-expect-test = \"1.3.0\"\n+expect-test = \"1.4.0\""}, {"sha": "8c9d6b228648e6bfec6e8c5414a269ebfce949e6", "filename": "crates/ide-completion/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/crates%2Fide-completion%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/crates%2Fide-completion%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide-completion%2FCargo.toml?ref=7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55", "patch": "@@ -28,6 +28,6 @@ profile = { path = \"../profile\", version = \"0.0.0\" }\n hir = { path = \"../hir\", version = \"0.0.0\" }\n \n [dev-dependencies]\n-expect-test = \"1.3.0\"\n+expect-test = \"1.4.0\"\n \n test-utils = { path = \"../test-utils\" }"}, {"sha": "a1b0bd6cb304422f6b3110686f2059cddafa2693", "filename": "crates/ide-db/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/crates%2Fide-db%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/crates%2Fide-db%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide-db%2FCargo.toml?ref=7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55", "patch": "@@ -36,4 +36,4 @@ limit = { path = \"../limit\", version = \"0.0.0\" }\n test-utils = { path = \"../test-utils\" }\n sourcegen = { path = \"../sourcegen\" }\n xshell = \"0.2.2\"\n-expect-test = \"1.3.0\"\n+expect-test = \"1.4.0\""}, {"sha": "a79adca4cdba75ad10d37cbc6c7b47f4086289e0", "filename": "crates/ide-diagnostics/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/crates%2Fide-diagnostics%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/crates%2Fide-diagnostics%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide-diagnostics%2FCargo.toml?ref=7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55", "patch": "@@ -25,7 +25,7 @@ hir = { path = \"../hir\", version = \"0.0.0\" }\n ide-db = { path = \"../ide-db\", version = \"0.0.0\" }\n \n [dev-dependencies]\n-expect-test = \"1.3.0\"\n+expect-test = \"1.4.0\"\n \n test-utils = { path = \"../test-utils\" }\n sourcegen = { path = \"../sourcegen\" }"}, {"sha": "d36dd02d45c5976a5f2576cbbbbe8ae1fe6f24e2", "filename": "crates/ide-ssr/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/crates%2Fide-ssr%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/crates%2Fide-ssr%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide-ssr%2FCargo.toml?ref=7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55", "patch": "@@ -23,4 +23,4 @@ hir = { path = \"../hir\", version = \"0.0.0\" }\n \n [dev-dependencies]\n test-utils = { path = \"../test-utils\" }\n-expect-test = \"1.3.0\"\n+expect-test = \"1.4.0\""}, {"sha": "95a54b75e2850aa2ba7cf49dc8164da9c4340bfd", "filename": "crates/ide/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/crates%2Fide%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/crates%2Fide%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2FCargo.toml?ref=7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55", "patch": "@@ -41,4 +41,4 @@ toolchain = { path = \"../toolchain\", version = \"0.0.0\" }\n \n [dev-dependencies]\n test-utils = { path = \"../test-utils\" }\n-expect-test = \"1.3.0\"\n+expect-test = \"1.4.0\""}, {"sha": "a286a6bcdddecf132146493a9b1b6b6d9d9134ff", "filename": "crates/parser/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/crates%2Fparser%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/crates%2Fparser%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fparser%2FCargo.toml?ref=7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55", "patch": "@@ -15,5 +15,5 @@ rustc_lexer = { version = \"725.0.0\", package = \"rustc-ap-rustc_lexer\" }\n limit = { path = \"../limit\", version = \"0.0.0\" }\n \n [dev-dependencies]\n-expect-test = \"1.3.0\"\n+expect-test = \"1.4.0\"\n sourcegen = { path = \"../sourcegen\" }"}, {"sha": "ce1fa0063f8eaf5fc5218a090bb6a1799b8d771b", "filename": "crates/proc-macro-srv/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/crates%2Fproc-macro-srv%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/crates%2Fproc-macro-srv%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fproc-macro-srv%2FCargo.toml?ref=7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55", "patch": "@@ -26,7 +26,7 @@ paths = { path = \"../paths\", version = \"0.0.0\" }\n proc-macro-api = { path = \"../proc-macro-api\", version = \"0.0.0\" }\n \n [dev-dependencies]\n-expect-test = \"1.3.0\"\n+expect-test = \"1.4.0\"\n \n # used as proc macro test targets\n proc-macro-test = { path = \"../proc-macro-test\" }"}, {"sha": "bc75d6faa383f5cf6e56d350539ac72913a90373", "filename": "crates/project-model/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/crates%2Fproject-model%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/crates%2Fproject-model%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fproject-model%2FCargo.toml?ref=7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55", "patch": "@@ -17,7 +17,7 @@ semver = \"1.0.10\"\n serde = { version = \"1.0.137\", features = [\"derive\"] }\n serde_json = \"1.0.81\"\n anyhow = \"1.0.57\"\n-expect-test = \"1.3.0\"\n+expect-test = \"1.4.0\"\n la-arena = { version = \"0.3.0\", path = \"../../lib/la-arena\" }\n \n cfg = { path = \"../cfg\", version = \"0.0.0\" }"}, {"sha": "c37a0d17491d2e12acb27bb8736a7ed326710393", "filename": "crates/rust-analyzer/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/crates%2Frust-analyzer%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/crates%2Frust-analyzer%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2FCargo.toml?ref=7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55", "patch": "@@ -73,7 +73,7 @@ winapi = \"0.3.9\"\n jemallocator = { version = \"0.5.0\", package = \"tikv-jemallocator\", optional = true }\n \n [dev-dependencies]\n-expect-test = \"1.3.0\"\n+expect-test = \"1.4.0\"\n jod-thread = \"0.1.2\"\n xshell = \"0.2.2\"\n "}, {"sha": "1ff3170a74f456d005647743b83ee0b9ca00d7f9", "filename": "crates/syntax/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/crates%2Fsyntax%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55/crates%2Fsyntax%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2FCargo.toml?ref=7d20ff3ffbd30a89b7baa7cd996d4d60f0da6c55", "patch": "@@ -27,7 +27,7 @@ profile = { path = \"../profile\", version = \"0.0.0\" }\n \n [dev-dependencies]\n rayon = \"1.5.3\"\n-expect-test = \"1.3.0\"\n+expect-test = \"1.4.0\"\n proc-macro2 = \"1.0.39\"\n quote = \"1.0.20\"\n ungrammar = \"1.16.1\""}]}