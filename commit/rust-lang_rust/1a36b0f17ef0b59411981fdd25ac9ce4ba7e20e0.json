{"sha": "1a36b0f17ef0b59411981fdd25ac9ce4ba7e20e0", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFhMzZiMGYxN2VmMGI1OTQxMTk4MWZkZDI1YWM5Y2U0YmE3ZTIwZTA=", "commit": {"author": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2013-03-29T01:39:09Z"}, "committer": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2013-04-19T18:53:31Z"}, "message": "librustc: Remove `fail_unless!`", "tree": {"sha": "0ee6ebc2c3767ab61dc00398e9bd1ffc6b62aedc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0ee6ebc2c3767ab61dc00398e9bd1ffc6b62aedc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1a36b0f17ef0b59411981fdd25ac9ce4ba7e20e0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1a36b0f17ef0b59411981fdd25ac9ce4ba7e20e0", "html_url": "https://github.com/rust-lang/rust/commit/1a36b0f17ef0b59411981fdd25ac9ce4ba7e20e0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1a36b0f17ef0b59411981fdd25ac9ce4ba7e20e0/comments", "author": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "10e6869a54b3d9e703ca6bc29f49f522ee25d865", "url": "https://api.github.com/repos/rust-lang/rust/commits/10e6869a54b3d9e703ca6bc29f49f522ee25d865", "html_url": "https://github.com/rust-lang/rust/commit/10e6869a54b3d9e703ca6bc29f49f522ee25d865"}], "stats": {"total": 26, "additions": 25, "deletions": 1}, "files": [{"sha": "f9a3c0fab724aa4b1f2808a7e511546563414fd5", "filename": "src/librustc/middle/astencode.rs", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/1a36b0f17ef0b59411981fdd25ac9ce4ba7e20e0/src%2Flibrustc%2Fmiddle%2Fastencode.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1a36b0f17ef0b59411981fdd25ac9ce4ba7e20e0/src%2Flibrustc%2Fmiddle%2Fastencode.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fastencode.rs?ref=1a36b0f17ef0b59411981fdd25ac9ce4ba7e20e0", "patch": "@@ -1336,7 +1336,17 @@ fn roundtrip(in_item: Option<@ast::item>) {\n     let ebml_doc = reader::Doc(@bytes);\n     let out_item = decode_item_ast(ebml_doc);\n \n-    assert_eq!(in_item, out_item);\n+    let exp_str = do io::with_str_writer |w| {\n+        in_item.encode(&prettyprint::Serializer(w))\n+    };\n+    let out_str = do io::with_str_writer |w| {\n+        out_item.encode(&prettyprint::Serializer(w))\n+    };\n+\n+    debug!(\"expected string: %s\", exp_str);\n+    debug!(\"actual string  : %s\", out_str);\n+\n+    assert!(exp_str == out_str);\n }\n \n #[test]"}, {"sha": "372f8ab4bc8f7f88893b4d361d37ff4c6f4426b7", "filename": "src/test/run-pass/auto-encode.rs", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/1a36b0f17ef0b59411981fdd25ac9ce4ba7e20e0/src%2Ftest%2Frun-pass%2Fauto-encode.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1a36b0f17ef0b59411981fdd25ac9ce4ba7e20e0/src%2Ftest%2Frun-pass%2Fauto-encode.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fauto-encode.rs?ref=1a36b0f17ef0b59411981fdd25ac9ce4ba7e20e0", "patch": "@@ -25,6 +25,20 @@ use std::ebml;\n use std::serialize::{Decodable, Encodable};\n use std::time;\n \n+<<<<<<< HEAD\n+=======\n+fn test_prettyprint<A:Encodable<prettyprint::Serializer>>(\n+    a: &A,\n+    expected: &~str\n+) {\n+    let s = do io::with_str_writer |w| {\n+        a.encode(&prettyprint::Serializer(w))\n+    };\n+    debug!(\"s == %?\", s);\n+    assert!(s == *expected);\n+}\n+\n+>>>>>>> librustc: Remove `fail_unless!`\n fn test_ebml<A:\n     Eq +\n     Encodable<EBWriter::Encoder> +"}]}