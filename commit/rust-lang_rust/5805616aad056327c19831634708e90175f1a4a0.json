{"sha": "5805616aad056327c19831634708e90175f1a4a0", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU4MDU2MTZhYWQwNTYzMjdjMTk4MzE2MzQ3MDhlOTAxNzVmMWE0YTA=", "commit": {"author": {"name": "Eric Holk", "email": "eric.holk@gmail.com", "date": "2012-07-26T02:13:58Z"}, "committer": {"name": "Paul Stansifer", "email": "paul.stansifer@gmail.com", "date": "2012-07-26T18:37:57Z"}, "message": "Make parsing about 0.3 seconds faster.", "tree": {"sha": "d791c24721acbd7c7c7c4c2f212c5afd143192fa", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d791c24721acbd7c7c7c4c2f212c5afd143192fa"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5805616aad056327c19831634708e90175f1a4a0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5805616aad056327c19831634708e90175f1a4a0", "html_url": "https://github.com/rust-lang/rust/commit/5805616aad056327c19831634708e90175f1a4a0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5805616aad056327c19831634708e90175f1a4a0/comments", "author": {"login": "eholk", "id": 105766, "node_id": "MDQ6VXNlcjEwNTc2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/105766?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eholk", "html_url": "https://github.com/eholk", "followers_url": "https://api.github.com/users/eholk/followers", "following_url": "https://api.github.com/users/eholk/following{/other_user}", "gists_url": "https://api.github.com/users/eholk/gists{/gist_id}", "starred_url": "https://api.github.com/users/eholk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eholk/subscriptions", "organizations_url": "https://api.github.com/users/eholk/orgs", "repos_url": "https://api.github.com/users/eholk/repos", "events_url": "https://api.github.com/users/eholk/events{/privacy}", "received_events_url": "https://api.github.com/users/eholk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "paulstansifer", "id": 1431, "node_id": "MDQ6VXNlcjE0MzE=", "avatar_url": "https://avatars.githubusercontent.com/u/1431?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paulstansifer", "html_url": "https://github.com/paulstansifer", "followers_url": "https://api.github.com/users/paulstansifer/followers", "following_url": "https://api.github.com/users/paulstansifer/following{/other_user}", "gists_url": "https://api.github.com/users/paulstansifer/gists{/gist_id}", "starred_url": "https://api.github.com/users/paulstansifer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paulstansifer/subscriptions", "organizations_url": "https://api.github.com/users/paulstansifer/orgs", "repos_url": "https://api.github.com/users/paulstansifer/repos", "events_url": "https://api.github.com/users/paulstansifer/events{/privacy}", "received_events_url": "https://api.github.com/users/paulstansifer/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "94f29e0c9485e2867c6e48cdf74ff7ca1b764e4b", "url": "https://api.github.com/repos/rust-lang/rust/commits/94f29e0c9485e2867c6e48cdf74ff7ca1b764e4b", "html_url": "https://github.com/rust-lang/rust/commit/94f29e0c9485e2867c6e48cdf74ff7ca1b764e4b"}], "stats": {"total": 27, "additions": 14, "deletions": 13}, "files": [{"sha": "e35b762f9720b2083f25671d69be1f00fd736844", "filename": "src/libsyntax/parse/common.rs", "status": "modified", "additions": 10, "deletions": 9, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/5805616aad056327c19831634708e90175f1a4a0/src%2Flibsyntax%2Fparse%2Fcommon.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5805616aad056327c19831634708e90175f1a4a0/src%2Flibsyntax%2Fparse%2Fcommon.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fcommon.rs?ref=5805616aad056327c19831634708e90175f1a4a0", "patch": "@@ -141,17 +141,18 @@ impl parser_common of parser_common for parser {\n     fn eat_keyword(word: ~str) -> bool {\n         self.require_keyword(word);\n \n-        // FIXME (#13042): this gratuitous use of @ is to\n-        // workaround LLVM bug.\n-        alt @self.token {\n-          @token::IDENT(sid, false) {\n+        let mut bump = false;\n+        let val = alt self.token {\n+          token::IDENT(sid, false) {\n             if str::eq(word, *self.get_str(sid)) {\n-                self.bump();\n-                ret true;\n-            } else { ret false; }\n+                bump = true;\n+                true\n+            } else { false }\n           }\n-          _ { ret false; }\n-        }\n+          _ { false }\n+        };\n+        if bump { self.bump() }\n+        val\n     }\n \n     fn expect_keyword(word: ~str) {"}, {"sha": "94e12e16185973da3d021a00f3201063998687e6", "filename": "src/libsyntax/parse/lexer.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/5805616aad056327c19831634708e90175f1a4a0/src%2Flibsyntax%2Fparse%2Flexer.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5805616aad056327c19831634708e90175f1a4a0/src%2Flibsyntax%2Fparse%2Flexer.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Flexer.rs?ref=5805616aad056327c19831634708e90175f1a4a0", "patch": "@@ -14,7 +14,7 @@ iface reader {\n     fn next_token() -> {tok: token::token, sp: span};\n     fn fatal(~str) -> !;\n     fn span_diag() -> span_handler;\n-    fn interner() -> @interner<@~str>;\n+    pure fn interner() -> @interner<@~str>;\n     fn peek() -> {tok: token::token, sp: span};\n     fn dup() -> reader;\n }\n@@ -79,7 +79,7 @@ impl string_reader_as_reader of reader for string_reader {\n         self.span_diagnostic.span_fatal(copy self.peek_span, m)\n     }\n     fn span_diag() -> span_handler { self.span_diagnostic }\n-    fn interner() -> @interner<@~str> { self.interner }\n+    pure fn interner() -> @interner<@~str> { self.interner }\n     fn peek() -> {tok: token::token, sp: span} {\n         {tok: self.peek_tok, sp: self.peek_span}\n     }\n@@ -101,7 +101,7 @@ impl tt_reader_as_reader of reader for tt_reader {\n         self.sp_diag.span_fatal(copy self.cur_span, m);\n     }\n     fn span_diag() -> span_handler { self.sp_diag }\n-    fn interner() -> @interner<@~str> { self.interner }\n+    pure fn interner() -> @interner<@~str> { self.interner }\n     fn peek() -> {tok: token::token, sp: span} {\n         { tok: self.cur_tok, sp: self.cur_span }\n     }"}, {"sha": "0723103877b20cf8f6d4974af64fedede699f3b0", "filename": "src/libsyntax/parse/parser.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5805616aad056327c19831634708e90175f1a4a0/src%2Flibsyntax%2Fparse%2Fparser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5805616aad056327c19831634708e90175f1a4a0/src%2Flibsyntax%2Fparse%2Fparser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fparser.rs?ref=5805616aad056327c19831634708e90175f1a4a0", "patch": "@@ -223,7 +223,7 @@ class parser {\n     fn warn(m: ~str) {\n         self.sess.span_diagnostic.span_warn(copy self.span, m)\n     }\n-    fn get_str(i: token::str_num) -> @~str {\n+    pure fn get_str(i: token::str_num) -> @~str {\n         interner::get(*self.reader.interner(), i)\n     }\n     fn get_id() -> node_id { next_node_id(self.sess) }"}]}