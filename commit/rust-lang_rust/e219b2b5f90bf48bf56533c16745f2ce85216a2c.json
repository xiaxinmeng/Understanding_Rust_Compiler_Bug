{"sha": "e219b2b5f90bf48bf56533c16745f2ce85216a2c", "node_id": "C_kwDOAAsO6NoAKGUyMTliMmI1ZjkwYmY0OGJmNTY1MzNjMTY3NDVmMmNlODUyMTZhMmM", "commit": {"author": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2022-01-19T03:04:12Z"}, "committer": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2022-01-19T03:04:12Z"}, "message": "Inline Printer's scan_push method", "tree": {"sha": "c866cf66adf8b6d3de1972b1bb38397e7a07140d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c866cf66adf8b6d3de1972b1bb38397e7a07140d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e219b2b5f90bf48bf56533c16745f2ce85216a2c", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEERijF2Cz/ZdaBZKeK+boUO5X/bYIFAmHnf6wACgkQ+boUO5X/\nbYJ0UA/+MDh4nUImuUadnVO19pOyc44oWKACkJ7c8oNS18qBMsmvjY5CmxmJt1zs\nTIxn/8mui2GHJKy/rH7lixKLQsiBzJsPWY0Lgf52IwMp1ZqtBtnjqdr99T/DGlsO\nNavxGSinx81zN9E9arrxsgSkkCN2jyktvnyJ9V2Hyoaf8CcrBrwV5JlJQbE4CWpP\n6q5pePbU6NjJekiWBv7U4zVmHNndLAiN9XwN/FDaacemc6D1evPQ6zEn7a1x2W9D\nppDws9Avc+AFgBTZLOXLEWgQHaem6Jj434Vebfxt0pspgbAJoiAXyYft+UAr6v22\ntcL/+fv43SGW6NiQ0ulLNM4vy1C8UIPMQ6aehpz4dE1WlBuZpe3sQi34s8LvDXo+\nYwxfB1rr2mlqeRkJ1uHdW3h3nywBp4FID3q/DzJkNXytNAdja/RcHXbnzrtyjyeX\nT7TsLTTe5kkiH/irL4ZGzbMQOXwZQUN/G1/KygioFcjj8XP1j28E47hRLOG6U+oQ\nKJn3llSHbzHxbo7Z0KVPZfcch3Nj4T9m/bvBhhQEkPMQ5HOlMmpOcpm8JWlZpTkm\ngdM5HDRQHHC0tDtAHa/DHpfh/1rxv83GM657Rg5OhqFc5lqlmN6PSGl4rV12NXc5\n5eg1hkhFe2hQ8aSFePii2HR9ohJYxmgT4EgML4yz0QgSTz4Hs24=\n=1YQ4\n-----END PGP SIGNATURE-----", "payload": "tree c866cf66adf8b6d3de1972b1bb38397e7a07140d\nparent fdb95f54e81532f5a620e79b8930f89e0e9aee80\nauthor David Tolnay <dtolnay@gmail.com> 1642561452 -0800\ncommitter David Tolnay <dtolnay@gmail.com> 1642561452 -0800\n\nInline Printer's scan_push method\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e219b2b5f90bf48bf56533c16745f2ce85216a2c", "html_url": "https://github.com/rust-lang/rust/commit/e219b2b5f90bf48bf56533c16745f2ce85216a2c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e219b2b5f90bf48bf56533c16745f2ce85216a2c/comments", "author": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fdb95f54e81532f5a620e79b8930f89e0e9aee80", "url": "https://api.github.com/repos/rust-lang/rust/commits/fdb95f54e81532f5a620e79b8930f89e0e9aee80", "html_url": "https://github.com/rust-lang/rust/commit/fdb95f54e81532f5a620e79b8930f89e0e9aee80"}], "stats": {"total": 14, "additions": 6, "deletions": 8}, "files": [{"sha": "4f5140349c97b55c4650fe60481ecc7cd1f49963", "filename": "compiler/rustc_ast_pretty/src/pp.rs", "status": "modified", "additions": 6, "deletions": 8, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/e219b2b5f90bf48bf56533c16745f2ce85216a2c/compiler%2Frustc_ast_pretty%2Fsrc%2Fpp.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e219b2b5f90bf48bf56533c16745f2ce85216a2c/compiler%2Frustc_ast_pretty%2Fsrc%2Fpp.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast_pretty%2Fsrc%2Fpp.rs?ref=e219b2b5f90bf48bf56533c16745f2ce85216a2c", "patch": "@@ -293,7 +293,8 @@ impl Printer {\n             self.right += 1;\n             self.buf.advance_right();\n         }\n-        self.scan_push(BufEntry { token: Token::Begin(b), size: -self.right_total });\n+        self.buf[self.right] = BufEntry { token: Token::Begin(b), size: -self.right_total };\n+        self.scan_stack.push_front(self.right);\n     }\n \n     fn scan_end(&mut self) {\n@@ -302,7 +303,8 @@ impl Printer {\n         } else {\n             self.right += 1;\n             self.buf.advance_right();\n-            self.scan_push(BufEntry { token: Token::End, size: -1 });\n+            self.buf[self.right] = BufEntry { token: Token::End, size: -1 };\n+            self.scan_stack.push_front(self.right);\n         }\n     }\n \n@@ -317,7 +319,8 @@ impl Printer {\n             self.buf.advance_right();\n         }\n         self.check_stack(0);\n-        self.scan_push(BufEntry { token: Token::Break(b), size: -self.right_total });\n+        self.buf[self.right] = BufEntry { token: Token::Break(b), size: -self.right_total };\n+        self.scan_stack.push_front(self.right);\n         self.right_total += b.blank_space;\n     }\n \n@@ -347,11 +350,6 @@ impl Printer {\n         }\n     }\n \n-    fn scan_push(&mut self, entry: BufEntry) {\n-        self.buf[self.right] = entry;\n-        self.scan_stack.push_front(self.right);\n-    }\n-\n     fn scan_pop(&mut self) -> usize {\n         self.scan_stack.pop_front().unwrap()\n     }"}]}