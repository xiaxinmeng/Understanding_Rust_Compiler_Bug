{"sha": "1be7f966e03f41eb299c184a3c0ad98018fb8fc4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFiZTdmOTY2ZTAzZjQxZWIyOTljMTg0YTNjMGFkOTgwMThmYjhmYzQ=", "commit": {"author": {"name": "Michael Woerister", "email": "michaelwoerister@posteo", "date": "2018-02-19T15:47:59Z"}, "committer": {"name": "Michael Woerister", "email": "michaelwoerister@posteo", "date": "2018-02-19T15:47:59Z"}, "message": "Rename is_translated_fn query to is_translated_item and make it support statics.", "tree": {"sha": "f11332510301e06290abe8c6ffff918363f78458", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f11332510301e06290abe8c6ffff918363f78458"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1be7f966e03f41eb299c184a3c0ad98018fb8fc4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1be7f966e03f41eb299c184a3c0ad98018fb8fc4", "html_url": "https://github.com/rust-lang/rust/commit/1be7f966e03f41eb299c184a3c0ad98018fb8fc4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1be7f966e03f41eb299c184a3c0ad98018fb8fc4/comments", "author": {"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}, "committer": {"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8ff633cc3b85933e76c84b43d2c19250c397e9cb", "url": "https://api.github.com/repos/rust-lang/rust/commits/8ff633cc3b85933e76c84b43d2c19250c397e9cb", "html_url": "https://github.com/rust-lang/rust/commit/8ff633cc3b85933e76c84b43d2c19250c397e9cb"}], "stats": {"total": 13, "additions": 7, "deletions": 6}, "files": [{"sha": "aa678ba788a5bb9e8d3220d13a4f039638c99beb", "filename": "src/librustc/dep_graph/dep_node.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1be7f966e03f41eb299c184a3c0ad98018fb8fc4/src%2Flibrustc%2Fdep_graph%2Fdep_node.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1be7f966e03f41eb299c184a3c0ad98018fb8fc4/src%2Flibrustc%2Fdep_graph%2Fdep_node.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fdep_graph%2Fdep_node.rs?ref=1be7f966e03f41eb299c184a3c0ad98018fb8fc4", "patch": "@@ -625,7 +625,7 @@ define_dep_nodes!( <'tcx>\n     [eval_always] CollectAndPartitionTranslationItems,\n     [] ExportName(DefId),\n     [] ContainsExternIndicator(DefId),\n-    [] IsTranslatedFunction(DefId),\n+    [] IsTranslatedItem(DefId),\n     [] CodegenUnit(InternedString),\n     [] CompileCodegenUnit(InternedString),\n     [input] OutputFilenames,"}, {"sha": "be1d255afa1913eb87513881e19a03422671b5f5", "filename": "src/librustc/ty/maps/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1be7f966e03f41eb299c184a3c0ad98018fb8fc4/src%2Flibrustc%2Fty%2Fmaps%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1be7f966e03f41eb299c184a3c0ad98018fb8fc4/src%2Flibrustc%2Fty%2Fmaps%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fty%2Fmaps%2Fmod.rs?ref=1be7f966e03f41eb299c184a3c0ad98018fb8fc4", "patch": "@@ -349,7 +349,7 @@ define_maps! { <'tcx>\n     [] fn export_name: ExportName(DefId) -> Option<Symbol>,\n     [] fn contains_extern_indicator: ContainsExternIndicator(DefId) -> bool,\n     [] fn symbol_export_level: GetSymbolExportLevel(DefId) -> SymbolExportLevel,\n-    [] fn is_translated_function: IsTranslatedFunction(DefId) -> bool,\n+    [] fn is_translated_item: IsTranslatedItem(DefId) -> bool,\n     [] fn codegen_unit: CodegenUnit(InternedString) -> Arc<CodegenUnit<'tcx>>,\n     [] fn compile_codegen_unit: CompileCodegenUnit(InternedString) -> Stats,\n     [] fn output_filenames: output_filenames_node(CrateNum)"}, {"sha": "146b3c859e933991aad2310afd5476e84abab70e", "filename": "src/librustc/ty/maps/plumbing.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1be7f966e03f41eb299c184a3c0ad98018fb8fc4/src%2Flibrustc%2Fty%2Fmaps%2Fplumbing.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1be7f966e03f41eb299c184a3c0ad98018fb8fc4/src%2Flibrustc%2Fty%2Fmaps%2Fplumbing.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fty%2Fmaps%2Fplumbing.rs?ref=1be7f966e03f41eb299c184a3c0ad98018fb8fc4", "patch": "@@ -929,7 +929,7 @@ pub fn force_from_dep_node<'a, 'gcx, 'lcx>(tcx: TyCtxt<'a, 'gcx, 'lcx>,\n         DepKind::ContainsExternIndicator => {\n             force!(contains_extern_indicator, def_id!());\n         }\n-        DepKind::IsTranslatedFunction => { force!(is_translated_function, def_id!()); }\n+        DepKind::IsTranslatedItem => { force!(is_translated_item, def_id!()); }\n         DepKind::OutputFilenames => { force!(output_filenames, LOCAL_CRATE); }\n \n         DepKind::TargetFeaturesWhitelist => { force!(target_features_whitelist, LOCAL_CRATE); }"}, {"sha": "c0785f5393716a7d7b9e90b70a3f4f506b80a017", "filename": "src/librustc_trans/base.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/1be7f966e03f41eb299c184a3c0ad98018fb8fc4/src%2Flibrustc_trans%2Fbase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1be7f966e03f41eb299c184a3c0ad98018fb8fc4/src%2Flibrustc_trans%2Fbase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Fbase.rs?ref=1be7f966e03f41eb299c184a3c0ad98018fb8fc4", "patch": "@@ -1004,6 +1004,7 @@ fn collect_and_partition_translation_items<'a, 'tcx>(\n     let translation_items: DefIdSet = items.iter().filter_map(|trans_item| {\n         match *trans_item {\n             MonoItem::Fn(ref instance) => Some(instance.def_id()),\n+            MonoItem::Static(def_id) => Some(def_id),\n             _ => None,\n         }\n     }).collect();\n@@ -1107,7 +1108,7 @@ impl CrateInfo {\n     }\n }\n \n-fn is_translated_function(tcx: TyCtxt, id: DefId) -> bool {\n+fn is_translated_item(tcx: TyCtxt, id: DefId) -> bool {\n     let (all_trans_items, _) =\n         tcx.collect_and_partition_translation_items(LOCAL_CRATE);\n     all_trans_items.contains(&id)\n@@ -1222,7 +1223,7 @@ pub fn provide(providers: &mut Providers) {\n     providers.collect_and_partition_translation_items =\n         collect_and_partition_translation_items;\n \n-    providers.is_translated_function = is_translated_function;\n+    providers.is_translated_item = is_translated_item;\n \n     providers.codegen_unit = |tcx, name| {\n         let (_, all) = tcx.collect_and_partition_translation_items(LOCAL_CRATE);"}, {"sha": "8c40aa6a2acba5d2e374ce86304ed7cac5b77930", "filename": "src/librustc_trans/callee.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1be7f966e03f41eb299c184a3c0ad98018fb8fc4/src%2Flibrustc_trans%2Fcallee.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1be7f966e03f41eb299c184a3c0ad98018fb8fc4/src%2Flibrustc_trans%2Fcallee.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Fcallee.rs?ref=1be7f966e03f41eb299c184a3c0ad98018fb8fc4", "patch": "@@ -149,7 +149,7 @@ pub fn get_fn<'a, 'tcx>(cx: &CodegenCx<'a, 'tcx>,\n         unsafe {\n             llvm::LLVMRustSetLinkage(llfn, llvm::Linkage::ExternalLinkage);\n \n-            if cx.tcx.is_translated_function(instance_def_id) {\n+            if cx.tcx.is_translated_item(instance_def_id) {\n                 if instance_def_id.is_local() {\n                     if !cx.tcx.is_exported_symbol(instance_def_id) {\n                         llvm::LLVMRustSetVisibility(llfn, llvm::Visibility::Hidden);"}]}