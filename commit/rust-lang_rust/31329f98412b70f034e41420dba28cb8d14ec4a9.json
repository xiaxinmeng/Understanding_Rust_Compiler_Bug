{"sha": "31329f98412b70f034e41420dba28cb8d14ec4a9", "node_id": "C_kwDOAAsO6NoAKDMxMzI5Zjk4NDEyYjcwZjAzNGU0MTQyMGRiYTI4Y2I4ZDE0ZWM0YTk", "commit": {"author": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2022-03-18T20:19:37Z"}, "committer": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2022-03-18T20:19:37Z"}, "message": "Enable rand based libcore tests\n\nPart of #806", "tree": {"sha": "712ebccc610e343c660088234b5acab49a21cb2b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/712ebccc610e343c660088234b5acab49a21cb2b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/31329f98412b70f034e41420dba28cb8d14ec4a9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/31329f98412b70f034e41420dba28cb8d14ec4a9", "html_url": "https://github.com/rust-lang/rust/commit/31329f98412b70f034e41420dba28cb8d14ec4a9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/31329f98412b70f034e41420dba28cb8d14ec4a9/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6b0c411fe737a87d10e9c6060328242fa15bfc06", "url": "https://api.github.com/repos/rust-lang/rust/commits/6b0c411fe737a87d10e9c6060328242fa15bfc06", "html_url": "https://github.com/rust-lang/rust/commit/6b0c411fe737a87d10e9c6060328242fa15bfc06"}], "stats": {"total": 53, "additions": 20, "deletions": 33}, "files": [{"sha": "108a97bd7c600da6ed09f1846a0c51affac145eb", "filename": "patches/0022-sysroot-Disable-not-compiling-tests.patch", "status": "modified", "additions": 4, "deletions": 33, "changes": 37, "blob_url": "https://github.com/rust-lang/rust/blob/31329f98412b70f034e41420dba28cb8d14ec4a9/patches%2F0022-sysroot-Disable-not-compiling-tests.patch", "raw_url": "https://github.com/rust-lang/rust/raw/31329f98412b70f034e41420dba28cb8d14ec4a9/patches%2F0022-sysroot-Disable-not-compiling-tests.patch", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/patches%2F0022-sysroot-Disable-not-compiling-tests.patch?ref=31329f98412b70f034e41420dba28cb8d14ec4a9", "patch": "@@ -18,7 +18,7 @@ new file mode 100644\n index 0000000..46fd999\n --- /dev/null\n +++ b/library/core/tests/Cargo.toml\n-@@ -0,0 +1,8 @@\n+@@ -0,0 +1,11 @@\n +[package]\n +name = \"core\"\n +version = \"0.0.0\"\n@@ -27,18 +27,9 @@ index 0000000..46fd999\n +[lib]\n +name = \"coretests\"\n +path = \"lib.rs\"\n-diff --git a/library/core/tests/num/flt2dec/mod.rs b/library/core/tests/num/flt2dec/mod.rs\n-index a35897e..f0bf645 100644\n---- a/library/core/tests/num/flt2dec/mod.rs\n-+++ b/library/core/tests/num/flt2dec/mod.rs\n-@@ -13,7 +13,6 @@ mod strategy {\n-     mod dragon;\n-     mod grisu;\n- }\n--mod random;\n- \n- pub fn decode_finite<T: DecodableFloat>(v: T) -> Decoded {\n-     match decode(v).1 {\n++\n++[dependencies]\n++rand = \"0.7\"\n diff --git a/library/core/tests/ptr.rs b/library/core/tests/ptr.rs\n index 1a6be3a..42dbd59 100644\n --- a/library/core/tests/ptr.rs\n@@ -59,25 +50,5 @@ index 1a6be3a..42dbd59 100644\n  \n  #[test]\n  fn write_unaligned_drop() {\n-diff --git a/library/core/tests/slice.rs b/library/core/tests/slice.rs\n-index 6609bc3..241b497 100644\n---- a/library/core/tests/slice.rs\n-+++ b/library/core/tests/slice.rs\n-@@ -1209,6 +1209,7 @@ fn brute_force_rotate_test_1() {\n-     }\n- }\n- \n-+/*\n- #[test]\n- #[cfg(not(target_arch = \"wasm32\"))]\n- fn sort_unstable() {\n-@@ -1394,6 +1395,7 @@ fn partition_at_index() {\n-     v.select_nth_unstable(0);\n-     assert!(v == [0xDEADBEEF]);\n- }\n-+*/\n- \n- #[test]\n- #[should_panic(expected = \"index 0 greater than length of slice\")]\n --\n 2.21.0 (Apple Git-122)"}, {"sha": "d804a78cc1061f3204d2e224ebf0212753eaf0e3", "filename": "patches/0028-sysroot-Disable-long-running-tests.patch", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/31329f98412b70f034e41420dba28cb8d14ec4a9/patches%2F0028-sysroot-Disable-long-running-tests.patch", "raw_url": "https://github.com/rust-lang/rust/raw/31329f98412b70f034e41420dba28cb8d14ec4a9/patches%2F0028-sysroot-Disable-long-running-tests.patch", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/patches%2F0028-sysroot-Disable-long-running-tests.patch?ref=31329f98412b70f034e41420dba28cb8d14ec4a9", "patch": "@@ -11,6 +11,22 @@ diff --git a/library/core/tests/slice.rs b/library/core/tests/slice.rs\n index 8402833..84592e0 100644\n --- a/library/core/tests/slice.rs\n +++ b/library/core/tests/slice.rs\n+@@ -1809,6 +1809,7 @@ fn sort_unstable() {\n+     assert!(v == [0xDEADBEEF]);\n+ }\n+ \n++/*\n+ #[test]\n+ #[cfg(not(target_arch = \"wasm32\"))]\n+ #[cfg_attr(miri, ignore)] // Miri is too slow\n+@@ -1914,6 +1915,7 @@ fn select_nth_unstable() {\n+     v.select_nth_unstable(0);\n+     assert!(v == [0xDEADBEEF]);\n+ }\n++*/\n+ \n+ #[test]\n+ #[should_panic(expected = \"index 0 greater than length of slice\")]\n @@ -2462,6 +2462,7 @@ take_tests! {\n  #[cfg(not(miri))] // unused in Miri\n  const EMPTY_MAX: &'static [()] = &[(); usize::MAX];"}]}