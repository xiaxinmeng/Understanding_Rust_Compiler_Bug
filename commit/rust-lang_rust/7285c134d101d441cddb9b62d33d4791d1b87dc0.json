{"sha": "7285c134d101d441cddb9b62d33d4791d1b87dc0", "node_id": "MDY6Q29tbWl0NzI0NzEyOjcyODVjMTM0ZDEwMWQ0NDFjZGRiOWI2MmQzM2Q0NzkxZDFiODdkYzA=", "commit": {"author": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2020-09-16T14:46:02Z"}, "committer": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2020-09-16T14:46:02Z"}, "message": "Reorganize scripts", "tree": {"sha": "fa19d9f0a0229fa833437ca13385d3dbdd86f458", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fa19d9f0a0229fa833437ca13385d3dbdd86f458"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7285c134d101d441cddb9b62d33d4791d1b87dc0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7285c134d101d441cddb9b62d33d4791d1b87dc0", "html_url": "https://github.com/rust-lang/rust/commit/7285c134d101d441cddb9b62d33d4791d1b87dc0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7285c134d101d441cddb9b62d33d4791d1b87dc0/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "044470a7262e0b890181ba73c3ccf5160d2bff70", "url": "https://api.github.com/repos/rust-lang/rust/commits/044470a7262e0b890181ba73c3ccf5160d2bff70", "html_url": "https://github.com/rust-lang/rust/commit/044470a7262e0b890181ba73c3ccf5160d2bff70"}], "stats": {"total": 16, "additions": 10, "deletions": 6}, "files": [{"sha": "4404fb49238e92ef9f3be0b9f20a997a969d6ee6", "filename": "build_sysroot/build_sysroot.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7285c134d101d441cddb9b62d33d4791d1b87dc0/build_sysroot%2Fbuild_sysroot.sh", "raw_url": "https://github.com/rust-lang/rust/raw/7285c134d101d441cddb9b62d33d4791d1b87dc0/build_sysroot%2Fbuild_sysroot.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/build_sysroot%2Fbuild_sysroot.sh?ref=7285c134d101d441cddb9b62d33d4791d1b87dc0", "patch": "@@ -6,7 +6,7 @@ set -e\n cd $(dirname \"$0\")\n \n pushd ../ >/dev/null\n-source ./config.sh\n+source ./scripts/config.sh\n popd >/dev/null\n \n # Cleanup for previous run"}, {"sha": "ba4b7d6c942bac73a42bbb9e8dc3fe2465abd435", "filename": "cargo.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7285c134d101d441cddb9b62d33d4791d1b87dc0/cargo.sh", "raw_url": "https://github.com/rust-lang/rust/raw/7285c134d101d441cddb9b62d33d4791d1b87dc0/cargo.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/cargo.sh?ref=7285c134d101d441cddb9b62d33d4791d1b87dc0", "patch": "@@ -5,7 +5,7 @@ export CHANNEL='release'\n fi\n \n pushd $(dirname \"$0\") >/dev/null\n-source config.sh\n+source scripts/config.sh\n \n # read nightly compiler from rust-toolchain file\n TOOLCHAIN=$(cat rust-toolchain)"}, {"sha": "83cec9c6f36966087559be9ea91788373c0b1a66", "filename": "scripts/Readme.md", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7285c134d101d441cddb9b62d33d4791d1b87dc0/scripts%2FReadme.md", "raw_url": "https://github.com/rust-lang/rust/raw/7285c134d101d441cddb9b62d33d4791d1b87dc0/scripts%2FReadme.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/scripts%2FReadme.md?ref=7285c134d101d441cddb9b62d33d4791d1b87dc0", "patch": "@@ -0,0 +1,2 @@\n+This directory is for scripts that are either never directly invoked or are not used very often.\n+Scripts that are frequently used should be kept at the project root."}, {"sha": "93db4a54a565a54ad1037fa1705e054e0905de53", "filename": "scripts/config.sh", "status": "renamed", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7285c134d101d441cddb9b62d33d4791d1b87dc0/scripts%2Fconfig.sh", "raw_url": "https://github.com/rust-lang/rust/raw/7285c134d101d441cddb9b62d33d4791d1b87dc0/scripts%2Fconfig.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/scripts%2Fconfig.sh?ref=7285c134d101d441cddb9b62d33d4791d1b87dc0", "patch": "@@ -38,7 +38,6 @@ if [[ `uname` == 'Darwin' ]]; then\n    export RUSTFLAGS=\"$RUSTFLAGS -Clink-arg=-undefined -Clink-arg=dynamic_lookup\"\n fi\n \n-RUSTC=\"rustc $RUSTFLAGS -L crate=target/out --out-dir target/out\"\n export RUSTC_LOG=warn # display metadata load errors\n \n export LD_LIBRARY_PATH=\"$(pwd)/target/out:$(pwd)/build_sysroot/sysroot/lib/rustlib/$TARGET_TRIPLE/lib\"", "previous_filename": "config.sh"}, {"sha": "75f2f61b21a5ad05f7c0544ca88c81f38c39e19d", "filename": "scripts/filter_profile.rs", "status": "renamed", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/7285c134d101d441cddb9b62d33d4791d1b87dc0/scripts%2Ffilter_profile.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7285c134d101d441cddb9b62d33d4791d1b87dc0/scripts%2Ffilter_profile.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/scripts%2Ffilter_profile.rs?ref=7285c134d101d441cddb9b62d33d4791d1b87dc0", "patch": "@@ -2,8 +2,10 @@\n #![forbid(unsafe_code)]/* This line is ignored by bash\n # This block is ignored by rustc\n CHANNEL=\"release\"\n-source ./config.sh\n-CG_CLIF_JIT=1 PROFILE=$1 OUTPUT=$2 exec $RUSTC $0 --crate-type bin -Cprefer-dynamic\n+pushd $(dirname \"$0\")/../\n+source scripts/config.sh\n+popd\n+CG_CLIF_JIT=1 PROFILE=$1 OUTPUT=$2 exec rustc $RUSTFLAGS $0 --crate-type bin -Cprefer-dynamic\n #*/\n \n //! This program filters away uninteresting samples and trims uninteresting frames for stackcollapse", "previous_filename": "filter_profile.rs"}, {"sha": "b911320f7a08daa626597dc62c92d670391d36ac", "filename": "scripts/rustup.sh", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/7285c134d101d441cddb9b62d33d4791d1b87dc0/scripts%2Frustup.sh", "raw_url": "https://github.com/rust-lang/rust/raw/7285c134d101d441cddb9b62d33d4791d1b87dc0/scripts%2Frustup.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/scripts%2Frustup.sh?ref=7285c134d101d441cddb9b62d33d4791d1b87dc0", "previous_filename": "rustup.sh"}, {"sha": "67dd4d3aa00113aa722b5af24b8b15a064488e3c", "filename": "test.sh", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/7285c134d101d441cddb9b62d33d4791d1b87dc0/test.sh", "raw_url": "https://github.com/rust-lang/rust/raw/7285c134d101d441cddb9b62d33d4791d1b87dc0/test.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/test.sh?ref=7285c134d101d441cddb9b62d33d4791d1b87dc0", "patch": "@@ -11,8 +11,9 @@ else\n fi\n \n # Config\n-source config.sh\n+source scripts/config.sh\n export CG_CLIF_INCR_CACHE_DISABLED=1\n+RUSTC=\"rustc $RUSTFLAGS -L crate=target/out --out-dir target/out\"\n \n # Cleanup\n rm -r target/out || true"}]}