{"sha": "9c73131fd04bf5a60c53c752293f136fdaa016af", "node_id": "MDY6Q29tbWl0NzI0NzEyOjljNzMxMzFmZDA0YmY1YTYwYzUzYzc1MjI5M2YxMzZmZGFhMDE2YWY=", "commit": {"author": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2019-09-30T19:55:46Z"}, "committer": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2019-09-30T19:55:46Z"}, "message": "Add test for #58344", "tree": {"sha": "c23cf6d473088266d205c7faf9b3e0c35d08e8f9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c23cf6d473088266d205c7faf9b3e0c35d08e8f9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9c73131fd04bf5a60c53c752293f136fdaa016af", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9c73131fd04bf5a60c53c752293f136fdaa016af", "html_url": "https://github.com/rust-lang/rust/commit/9c73131fd04bf5a60c53c752293f136fdaa016af", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9c73131fd04bf5a60c53c752293f136fdaa016af/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bc25746d488dd49ab2fd49b6b4b51f2fe464c56b", "url": "https://api.github.com/repos/rust-lang/rust/commits/bc25746d488dd49ab2fd49b6b4b51f2fe464c56b", "html_url": "https://github.com/rust-lang/rust/commit/bc25746d488dd49ab2fd49b6b4b51f2fe464c56b"}], "stats": {"total": 69, "additions": 69, "deletions": 0}, "files": [{"sha": "99b656d74f505cdbfc81401b053180571ece910f", "filename": "src/test/ui/issues/issue-58344.rs", "status": "added", "additions": 50, "deletions": 0, "changes": 50, "blob_url": "https://github.com/rust-lang/rust/blob/9c73131fd04bf5a60c53c752293f136fdaa016af/src%2Ftest%2Fui%2Fissues%2Fissue-58344.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9c73131fd04bf5a60c53c752293f136fdaa016af/src%2Ftest%2Fui%2Fissues%2Fissue-58344.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-58344.rs?ref=9c73131fd04bf5a60c53c752293f136fdaa016af", "patch": "@@ -0,0 +1,50 @@\n+use std::ops::Add;\n+\n+trait Trait<T> {\n+    fn get(self) -> T;\n+}\n+\n+struct Holder<T>(T);\n+\n+impl<T> Trait<T> for Holder<T> {\n+    fn get(self) -> T {\n+        self.0\n+    }\n+}\n+\n+enum Either<L, R> {\n+    Left(L),\n+    Right(R),\n+}\n+\n+impl<L, R> Either<L, R> {\n+    fn converge<T>(self) -> T where L: Trait<T>, R: Trait<T> {\n+        match self {\n+            Either::Left(val) => val.get(),\n+            Either::Right(val) => val.get(),\n+        }\n+    }\n+}\n+\n+fn add_generic<A: Add<B>, B>(lhs: A, rhs: B) -> Either<\n+    impl Trait<<A as Add<B>>::Output>,\n+    impl Trait<<A as Add<B>>::Output>\n+> {\n+    if true {\n+        Either::Left(Holder(lhs + rhs))\n+    } else {\n+        Either::Right(Holder(lhs + rhs))\n+    }\n+}\n+\n+fn add_one(\n+    value: u32,\n+) -> Either<impl Trait<<u32 as Add<u32>>::Output>, impl Trait<<u32 as Add<u32>>::Output>> {\n+    //~^ ERROR: the trait bound `impl Trait<<u32 as std::ops::Add>::Output>: Trait<u32>`\n+    //~| ERROR: the trait bound `impl Trait<<u32 as std::ops::Add>::Output>: Trait<u32>`\n+    add_generic(value, 1u32)\n+}\n+\n+pub fn main() {\n+    add_one(3).converge();\n+}"}, {"sha": "427d03b679d5f8daedcf05895e3c5b35408dd5c3", "filename": "src/test/ui/issues/issue-58344.stderr", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/9c73131fd04bf5a60c53c752293f136fdaa016af/src%2Ftest%2Fui%2Fissues%2Fissue-58344.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9c73131fd04bf5a60c53c752293f136fdaa016af/src%2Ftest%2Fui%2Fissues%2Fissue-58344.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-58344.stderr?ref=9c73131fd04bf5a60c53c752293f136fdaa016af", "patch": "@@ -0,0 +1,19 @@\n+error[E0277]: the trait bound `impl Trait<<u32 as std::ops::Add>::Output>: Trait<u32>` is not satisfied\n+  --> $DIR/issue-58344.rs:42:13\n+   |\n+LL | ) -> Either<impl Trait<<u32 as Add<u32>>::Output>, impl Trait<<u32 as Add<u32>>::Output>> {\n+   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ the trait `Trait<u32>` is not implemented for `impl Trait<<u32 as std::ops::Add>::Output>`\n+   |\n+   = note: the return type of a function must have a statically known size\n+\n+error[E0277]: the trait bound `impl Trait<<u32 as std::ops::Add>::Output>: Trait<u32>` is not satisfied\n+  --> $DIR/issue-58344.rs:42:52\n+   |\n+LL | ) -> Either<impl Trait<<u32 as Add<u32>>::Output>, impl Trait<<u32 as Add<u32>>::Output>> {\n+   |                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ the trait `Trait<u32>` is not implemented for `impl Trait<<u32 as std::ops::Add>::Output>`\n+   |\n+   = note: the return type of a function must have a statically known size\n+\n+error: aborting due to 2 previous errors\n+\n+For more information about this error, try `rustc --explain E0277`."}]}