{"sha": "9aef9a2324fc1a1951e470c645df6c1b11a5ffdc", "node_id": "C_kwDOAAsO6NoAKDlhZWY5YTIzMjRmYzFhMTk1MWU0NzBjNjQ1ZGY2YzFiMTFhNWZmZGM", "commit": {"author": {"name": "Jacob Hoffman-Andrews", "email": "github@hoffman-andrews.com", "date": "2021-11-21T08:24:38Z"}, "committer": {"name": "Jacob Hoffman-Andrews", "email": "github@hoffman-andrews.com", "date": "2021-11-21T08:53:29Z"}, "message": "Inhibit clicks on summary's children\n\nA byproduct of using `<details>` and `<summary>` to show/hide detailed\ndocumentation was that clicking any part of a method heading (or impl\nheading) would show or hide the documentation. This was not super\nnoticeable because clicking a link inside the method heading would\nnavigate to that link. But clicking any unlinked black text in a method\nheading would trigger the behavior.\n\nThat behavior was somewhat unexpected, and means that if you try to click\na type name in a method heading, but miss by a few pixels, you get a\nconfusing surprise.\n\nThis change inhibits that behavior by putting an event listener on most\nsummaries that cancels the event unless the event target was the summary\nitself. In practice, that means it cancels the event unless the target\nwas the \"[+]\" / \"[-]\", because the rest of the heading is wrapped inside\na `<div>`, which is the target for anything that doesn't have a more\nspecific target.", "tree": {"sha": "38f8a79385cf10320fbb6ad886e1525b2d1212d1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/38f8a79385cf10320fbb6ad886e1525b2d1212d1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9aef9a2324fc1a1951e470c645df6c1b11a5ffdc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9aef9a2324fc1a1951e470c645df6c1b11a5ffdc", "html_url": "https://github.com/rust-lang/rust/commit/9aef9a2324fc1a1951e470c645df6c1b11a5ffdc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9aef9a2324fc1a1951e470c645df6c1b11a5ffdc/comments", "author": {"login": "jsha", "id": 220205, "node_id": "MDQ6VXNlcjIyMDIwNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/220205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsha", "html_url": "https://github.com/jsha", "followers_url": "https://api.github.com/users/jsha/followers", "following_url": "https://api.github.com/users/jsha/following{/other_user}", "gists_url": "https://api.github.com/users/jsha/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsha/subscriptions", "organizations_url": "https://api.github.com/users/jsha/orgs", "repos_url": "https://api.github.com/users/jsha/repos", "events_url": "https://api.github.com/users/jsha/events{/privacy}", "received_events_url": "https://api.github.com/users/jsha/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jsha", "id": 220205, "node_id": "MDQ6VXNlcjIyMDIwNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/220205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsha", "html_url": "https://github.com/jsha", "followers_url": "https://api.github.com/users/jsha/followers", "following_url": "https://api.github.com/users/jsha/following{/other_user}", "gists_url": "https://api.github.com/users/jsha/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsha/subscriptions", "organizations_url": "https://api.github.com/users/jsha/orgs", "repos_url": "https://api.github.com/users/jsha/repos", "events_url": "https://api.github.com/users/jsha/events{/privacy}", "received_events_url": "https://api.github.com/users/jsha/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ce3f3a5ffa7452131cde06c003cc2eaa7c729bfb", "url": "https://api.github.com/repos/rust-lang/rust/commits/ce3f3a5ffa7452131cde06c003cc2eaa7c729bfb", "html_url": "https://github.com/rust-lang/rust/commit/ce3f3a5ffa7452131cde06c003cc2eaa7c729bfb"}], "stats": {"total": 8, "additions": 8, "deletions": 0}, "files": [{"sha": "908d3f65fd35b0f8663ea5ff970af39d3ca74bd2", "filename": "src/librustdoc/html/static/js/main.js", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/9aef9a2324fc1a1951e470c645df6c1b11a5ffdc/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/9aef9a2324fc1a1951e470c645df6c1b11a5ffdc/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fmain.js?ref=9aef9a2324fc1a1951e470c645df6c1b11a5ffdc", "patch": "@@ -886,6 +886,14 @@ function hideThemeButtonState() {\n         }\n     });\n \n+    onEachLazy(document.querySelectorAll(\".rustdoc-toggle > summary:not(.hideme)\"), function(el) {\n+        el.addEventListener(\"click\", function(e) {\n+            if (e.target.tagName != \"SUMMARY\") {\n+                e.preventDefault();\n+            }\n+        })\n+    });\n+\n     onEachLazy(document.getElementsByClassName(\"notable-traits\"), function(e) {\n         e.onclick = function() {\n             this.getElementsByClassName('notable-traits-tooltiptext')[0]"}]}