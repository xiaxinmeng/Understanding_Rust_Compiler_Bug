{"sha": "3170b62cca5693d355e702a26777679316647b20", "node_id": "MDY6Q29tbWl0NzI0NzEyOjMxNzBiNjJjY2E1NjkzZDM1NWU3MDJhMjY3Nzc2NzkzMTY2NDdiMjA=", "commit": {"author": {"name": "Nikita Popov", "email": "nikita.ppv@gmail.com", "date": "2019-07-07T16:10:12Z"}, "committer": {"name": "Nikita Popov", "email": "nikita.ppv@gmail.com", "date": "2019-07-09T19:55:29Z"}, "message": "Use new feature names in target feature lists", "tree": {"sha": "8bb52d18ee87fc1302b70a4889c5406f2a46635a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8bb52d18ee87fc1302b70a4889c5406f2a46635a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3170b62cca5693d355e702a26777679316647b20", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3170b62cca5693d355e702a26777679316647b20", "html_url": "https://github.com/rust-lang/rust/commit/3170b62cca5693d355e702a26777679316647b20", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3170b62cca5693d355e702a26777679316647b20/comments", "author": {"login": "nikic", "id": 216080, "node_id": "MDQ6VXNlcjIxNjA4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/216080?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikic", "html_url": "https://github.com/nikic", "followers_url": "https://api.github.com/users/nikic/followers", "following_url": "https://api.github.com/users/nikic/following{/other_user}", "gists_url": "https://api.github.com/users/nikic/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikic/subscriptions", "organizations_url": "https://api.github.com/users/nikic/orgs", "repos_url": "https://api.github.com/users/nikic/repos", "events_url": "https://api.github.com/users/nikic/events{/privacy}", "received_events_url": "https://api.github.com/users/nikic/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nikic", "id": 216080, "node_id": "MDQ6VXNlcjIxNjA4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/216080?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikic", "html_url": "https://github.com/nikic", "followers_url": "https://api.github.com/users/nikic/followers", "following_url": "https://api.github.com/users/nikic/following{/other_user}", "gists_url": "https://api.github.com/users/nikic/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikic/subscriptions", "organizations_url": "https://api.github.com/users/nikic/orgs", "repos_url": "https://api.github.com/users/nikic/repos", "events_url": "https://api.github.com/users/nikic/events{/privacy}", "received_events_url": "https://api.github.com/users/nikic/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b57c499ea227a973fc3eb319cbe6d5019948d86c", "url": "https://api.github.com/repos/rust-lang/rust/commits/b57c499ea227a973fc3eb319cbe6d5019948d86c", "html_url": "https://github.com/rust-lang/rust/commit/b57c499ea227a973fc3eb319cbe6d5019948d86c"}], "stats": {"total": 24, "additions": 12, "deletions": 12}, "files": [{"sha": "ff8e43100e2c1270ae1ef9bbf20f6e17f0c1d7d0", "filename": "src/librustc_target/spec/armebv7r_none_eabihf.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3170b62cca5693d355e702a26777679316647b20/src%2Flibrustc_target%2Fspec%2Farmebv7r_none_eabihf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3170b62cca5693d355e702a26777679316647b20/src%2Flibrustc_target%2Fspec%2Farmebv7r_none_eabihf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_target%2Fspec%2Farmebv7r_none_eabihf.rs?ref=3170b62cca5693d355e702a26777679316647b20", "patch": "@@ -21,7 +21,7 @@ pub fn target() -> TargetResult {\n             linker: Some(\"rust-lld\".to_owned()),\n             relocation_model: \"static\".to_string(),\n             panic_strategy: PanicStrategy::Abort,\n-            features: \"+vfp3,+d16,+fp-only-sp\".to_string(),\n+            features: \"+vfp3,-d32,-fp16\".to_string(),\n             max_atomic_width: Some(32),\n             abi_blacklist: super::arm_base::abi_blacklist(),\n             emit_debug_gdb_scripts: false,"}, {"sha": "4c13c6669c3f05d543d652623e0ee47401788c56", "filename": "src/librustc_target/spec/armv7_linux_androideabi.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3170b62cca5693d355e702a26777679316647b20/src%2Flibrustc_target%2Fspec%2Farmv7_linux_androideabi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3170b62cca5693d355e702a26777679316647b20/src%2Flibrustc_target%2Fspec%2Farmv7_linux_androideabi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_target%2Fspec%2Farmv7_linux_androideabi.rs?ref=3170b62cca5693d355e702a26777679316647b20", "patch": "@@ -10,7 +10,7 @@ use crate::spec::{LinkerFlavor, Target, TargetOptions, TargetResult};\n \n pub fn target() -> TargetResult {\n     let mut base = super::android_base::opts();\n-    base.features = \"+v7,+thumb-mode,+thumb2,+vfp3,+d16,-neon\".to_string();\n+    base.features = \"+v7,+thumb-mode,+thumb2,+vfp3,-d32,-neon\".to_string();\n     base.max_atomic_width = Some(64);\n     base.pre_link_args\n         .get_mut(&LinkerFlavor::Gcc).unwrap().push(\"-march=armv7-a\".to_string());"}, {"sha": "0509ddab048efa6b21a1af2b81edb7cd6be5efba", "filename": "src/librustc_target/spec/armv7_unknown_freebsd.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3170b62cca5693d355e702a26777679316647b20/src%2Flibrustc_target%2Fspec%2Farmv7_unknown_freebsd.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3170b62cca5693d355e702a26777679316647b20/src%2Flibrustc_target%2Fspec%2Farmv7_unknown_freebsd.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_target%2Fspec%2Farmv7_unknown_freebsd.rs?ref=3170b62cca5693d355e702a26777679316647b20", "patch": "@@ -15,7 +15,7 @@ pub fn target() -> TargetResult {\n         linker_flavor: LinkerFlavor::Gcc,\n \n         options: TargetOptions {\n-            features: \"+v7,+vfp3,+d16,+thumb2,-neon\".to_string(),\n+            features: \"+v7,+vfp3,-d32,+thumb2,-neon\".to_string(),\n             max_atomic_width: Some(64),\n             abi_blacklist: super::arm_base::abi_blacklist(),\n             target_mcount: \"\\u{1}__gnu_mcount_nc\".to_string(),"}, {"sha": "ff34fda75028ecd675c902d4667a06524e5bbd93", "filename": "src/librustc_target/spec/armv7_unknown_linux_gnueabihf.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3170b62cca5693d355e702a26777679316647b20/src%2Flibrustc_target%2Fspec%2Farmv7_unknown_linux_gnueabihf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3170b62cca5693d355e702a26777679316647b20/src%2Flibrustc_target%2Fspec%2Farmv7_unknown_linux_gnueabihf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_target%2Fspec%2Farmv7_unknown_linux_gnueabihf.rs?ref=3170b62cca5693d355e702a26777679316647b20", "patch": "@@ -19,7 +19,7 @@ pub fn target() -> TargetResult {\n \n         options: TargetOptions {\n             // Info about features at https://wiki.debian.org/ArmHardFloatPort\n-            features: \"+v7,+vfp3,+d16,+thumb2,-neon\".to_string(),\n+            features: \"+v7,+vfp3,-d32,+thumb2,-neon\".to_string(),\n             cpu: \"generic\".to_string(),\n             max_atomic_width: Some(64),\n             abi_blacklist: super::arm_base::abi_blacklist(),"}, {"sha": "de22fbbaa4c8ec7d77d4c44a6661fe8a6ffb2b82", "filename": "src/librustc_target/spec/armv7_unknown_linux_musleabihf.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3170b62cca5693d355e702a26777679316647b20/src%2Flibrustc_target%2Fspec%2Farmv7_unknown_linux_musleabihf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3170b62cca5693d355e702a26777679316647b20/src%2Flibrustc_target%2Fspec%2Farmv7_unknown_linux_musleabihf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_target%2Fspec%2Farmv7_unknown_linux_musleabihf.rs?ref=3170b62cca5693d355e702a26777679316647b20", "patch": "@@ -22,7 +22,7 @@ pub fn target() -> TargetResult {\n         // Most of these settings are copied from the armv7_unknown_linux_gnueabihf\n         // target.\n         options: TargetOptions {\n-            features: \"+v7,+vfp3,+d16,+thumb2,-neon\".to_string(),\n+            features: \"+v7,+vfp3,-d32,+thumb2,-neon\".to_string(),\n             cpu: \"generic\".to_string(),\n             max_atomic_width: Some(64),\n             abi_blacklist: super::arm_base::abi_blacklist(),"}, {"sha": "a654e40d0ae5bdae894ac181663ce756b1d39068", "filename": "src/librustc_target/spec/armv7_unknown_netbsd_eabihf.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3170b62cca5693d355e702a26777679316647b20/src%2Flibrustc_target%2Fspec%2Farmv7_unknown_netbsd_eabihf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3170b62cca5693d355e702a26777679316647b20/src%2Flibrustc_target%2Fspec%2Farmv7_unknown_netbsd_eabihf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_target%2Fspec%2Farmv7_unknown_netbsd_eabihf.rs?ref=3170b62cca5693d355e702a26777679316647b20", "patch": "@@ -15,7 +15,7 @@ pub fn target() -> TargetResult {\n         linker_flavor: LinkerFlavor::Gcc,\n \n         options: TargetOptions {\n-            features: \"+v7,+vfp3,+d16,+thumb2,-neon\".to_string(),\n+            features: \"+v7,+vfp3,-d32,+thumb2,-neon\".to_string(),\n             cpu: \"generic\".to_string(),\n             max_atomic_width: Some(64),\n             abi_blacklist: super::arm_base::abi_blacklist(),"}, {"sha": "24772475e047100b34db04517415ba4ddaa54c6e", "filename": "src/librustc_target/spec/armv7r_none_eabihf.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3170b62cca5693d355e702a26777679316647b20/src%2Flibrustc_target%2Fspec%2Farmv7r_none_eabihf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3170b62cca5693d355e702a26777679316647b20/src%2Flibrustc_target%2Fspec%2Farmv7r_none_eabihf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_target%2Fspec%2Farmv7r_none_eabihf.rs?ref=3170b62cca5693d355e702a26777679316647b20", "patch": "@@ -21,7 +21,7 @@ pub fn target() -> TargetResult {\n             linker: Some(\"rust-lld\".to_owned()),\n             relocation_model: \"static\".to_string(),\n             panic_strategy: PanicStrategy::Abort,\n-            features: \"+vfp3,+d16,+fp-only-sp\".to_string(),\n+            features: \"+vfp3,-d32,-fp16\".to_string(),\n             max_atomic_width: Some(32),\n             abi_blacklist: super::arm_base::abi_blacklist(),\n             emit_debug_gdb_scripts: false,"}, {"sha": "5c386a00ba4e9c8543432ec6bb8040051e8da275", "filename": "src/librustc_target/spec/thumbv7em_none_eabihf.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/3170b62cca5693d355e702a26777679316647b20/src%2Flibrustc_target%2Fspec%2Fthumbv7em_none_eabihf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3170b62cca5693d355e702a26777679316647b20/src%2Flibrustc_target%2Fspec%2Fthumbv7em_none_eabihf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_target%2Fspec%2Fthumbv7em_none_eabihf.rs?ref=3170b62cca5693d355e702a26777679316647b20", "patch": "@@ -6,7 +6,7 @@\n // Additionally, this target uses the \"hard\" floating convention (ABI) where floating point values\n // are passed to/from subroutines via FPU registers (S0, S1, D0, D1, etc.).\n //\n-// To opt into double precision hardware support, use the `-C target-feature=-fp-only-sp` flag.\n+// To opt into double precision hardware support, use the `-C target-feature=+fp64` flag.\n \n use crate::spec::{LinkerFlavor, LldFlavor, Target, TargetOptions, TargetResult};\n \n@@ -26,14 +26,14 @@ pub fn target() -> TargetResult {\n         options: TargetOptions {\n             // `+vfp4` is the lowest common denominator between the Cortex-M4 (vfp4-16) and the\n             // Cortex-M7 (vfp5)\n-            // `+d16` both the Cortex-M4 and the Cortex-M7 only have 16 double-precision registers\n+            // `-d32` both the Cortex-M4 and the Cortex-M7 only have 16 double-precision registers\n             // available\n-            // `+fp-only-sp` The Cortex-M4 only supports single precision floating point operations\n+            // `-fp64` The Cortex-M4 only supports single precision floating point operations\n             // whereas in the Cortex-M7 double precision is optional\n             //\n             // Reference:\n             // ARMv7-M Architecture Reference Manual - A2.5 The optional floating-point extension\n-            features: \"+vfp4,+d16,+fp-only-sp\".to_string(),\n+            features: \"+vfp4,-d32,-fp64\".to_string(),\n             max_atomic_width: Some(32),\n             .. super::thumb_base::opts()\n         }"}, {"sha": "7dc30e76dccdd1e1b2ebbc1bb18f84279791c362", "filename": "src/librustc_target/spec/thumbv8m_main_none_eabihf.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3170b62cca5693d355e702a26777679316647b20/src%2Flibrustc_target%2Fspec%2Fthumbv8m_main_none_eabihf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3170b62cca5693d355e702a26777679316647b20/src%2Flibrustc_target%2Fspec%2Fthumbv8m_main_none_eabihf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_target%2Fspec%2Fthumbv8m_main_none_eabihf.rs?ref=3170b62cca5693d355e702a26777679316647b20", "patch": "@@ -22,7 +22,7 @@ pub fn target() -> TargetResult {\n             // the FPU uses the FPv5 architecture, single-precision instructions\n             // and 16 D registers.\n             // These parameters map to the following LLVM features.\n-            features: \"+fp-armv8,+fp-only-sp,+d16\".to_string(),\n+            features: \"+fp-armv8,-fp64,-d32\".to_string(),\n             max_atomic_width: Some(32),\n             .. super::thumb_base::opts()\n         },"}]}