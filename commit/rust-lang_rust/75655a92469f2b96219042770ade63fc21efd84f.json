{"sha": "75655a92469f2b96219042770ade63fc21efd84f", "node_id": "C_kwDOAAsO6NoAKDc1NjU1YTkyNDY5ZjJiOTYyMTkwNDI3NzBhZGU2M2ZjMjFlZmQ4NGY", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2023-01-20T06:16:11Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-01-20T06:16:11Z"}, "message": "Rollup merge of #107076 - megakorre:106419_add_test_case, r=compiler-errors\n\nAdded const-generic ui test case for issue #106419\n\nThis PR adds a test case for #106419 which has been fixed in master by #105292\n\nI also ran the test on f769d34291e489db19d3c972348ddb24b6b32481 (the commit before #105292 was merged)\nand it did fail there with the following output.\n```\n--- stderr -------------------------------\nerror[E0308]: mismatched types\n  --> /home/patrikk/src/rust/src/test/ui/const-generics/issue-106419-struct-with-multiple-const-params.rs:5:10\n   |\nLL | #[derive(Clone)]\n   |          ^^^^^\n   |          |\n   |          expected `A`, found `B`\n   |          expected `Bar<A, B>` because of return type\n   |\n   = note: expected struct `Bar<A, _>`\n              found struct `Bar<B, _>`\n   = note: this error originates in the derive macro `Clone` (in Nightly builds, run with -Z macro-backtrace for more info)\n\nerror: aborting due to previous error\n\nFor more information about this error, try `rustc --explain E0308`.\n------------------------------------------\n```", "tree": {"sha": "9ba21918dbfc4dcdb6fa82bfdb4dc89ca4c4e2b8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9ba21918dbfc4dcdb6fa82bfdb4dc89ca4c4e2b8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/75655a92469f2b96219042770ade63fc21efd84f", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjyjGrCRBK7hj4Ov3rIwAAOtcIAF2oJlbYP9sMRSKUDQq5mrdu\nbdE2MgyfqFjILpQcyyT8Vi/TtwGk5TtlzNomxY4d30D1wN0LwYH7nzTx0RmHluSx\neGC4iZjb0QeVjh3DXymXr9I8D4b8kVskKDAYCHIYOQENcfo6DcIXhxTAAV0dAGO1\nhvprGhJ072v3G/jkl71+Y141pGHIkGnLLmgQcmnya2nyDUn9tTXufjfoen+wfL5s\nbIe5IaQogBFEN02vmdUCP8BSFoRNwj90oQVxks/URQah80nIQYjbbaT8SVR+JeVf\ngRj90B1Ryxv3nEzIsnchulOSMvD6JwZiVqiYvh+6UwNObSm+TFa44I4mQgTMiS4=\n=Z2tC\n-----END PGP SIGNATURE-----\n", "payload": "tree 9ba21918dbfc4dcdb6fa82bfdb4dc89ca4c4e2b8\nparent 66a9006759baa38acc17f5f028e9d13aa70338d5\nparent 8657cb8efe934501f4ac316bbde0ac4daa1f0d0c\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1674195371 +0100\ncommitter GitHub <noreply@github.com> 1674195371 +0100\n\nRollup merge of #107076 - megakorre:106419_add_test_case, r=compiler-errors\n\nAdded const-generic ui test case for issue #106419\n\nThis PR adds a test case for #106419 which has been fixed in master by #105292\n\nI also ran the test on f769d34291e489db19d3c972348ddb24b6b32481 (the commit before #105292 was merged)\nand it did fail there with the following output.\n```\n--- stderr -------------------------------\nerror[E0308]: mismatched types\n  --> /home/patrikk/src/rust/src/test/ui/const-generics/issue-106419-struct-with-multiple-const-params.rs:5:10\n   |\nLL | #[derive(Clone)]\n   |          ^^^^^\n   |          |\n   |          expected `A`, found `B`\n   |          expected `Bar<A, B>` because of return type\n   |\n   = note: expected struct `Bar<A, _>`\n              found struct `Bar<B, _>`\n   = note: this error originates in the derive macro `Clone` (in Nightly builds, run with -Z macro-backtrace for more info)\n\nerror: aborting due to previous error\n\nFor more information about this error, try `rustc --explain E0308`.\n------------------------------------------\n```\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/75655a92469f2b96219042770ade63fc21efd84f", "html_url": "https://github.com/rust-lang/rust/commit/75655a92469f2b96219042770ade63fc21efd84f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/75655a92469f2b96219042770ade63fc21efd84f/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "66a9006759baa38acc17f5f028e9d13aa70338d5", "url": "https://api.github.com/repos/rust-lang/rust/commits/66a9006759baa38acc17f5f028e9d13aa70338d5", "html_url": "https://github.com/rust-lang/rust/commit/66a9006759baa38acc17f5f028e9d13aa70338d5"}, {"sha": "8657cb8efe934501f4ac316bbde0ac4daa1f0d0c", "url": "https://api.github.com/repos/rust-lang/rust/commits/8657cb8efe934501f4ac316bbde0ac4daa1f0d0c", "html_url": "https://github.com/rust-lang/rust/commit/8657cb8efe934501f4ac316bbde0ac4daa1f0d0c"}], "stats": {"total": 12, "additions": 12, "deletions": 0}, "files": [{"sha": "8363e5af4b61c97ed19475bc950e6aece56dc0de", "filename": "tests/ui/const-generics/issue-106419-struct-with-multiple-const-params.rs", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/75655a92469f2b96219042770ade63fc21efd84f/tests%2Fui%2Fconst-generics%2Fissue-106419-struct-with-multiple-const-params.rs", "raw_url": "https://github.com/rust-lang/rust/raw/75655a92469f2b96219042770ade63fc21efd84f/tests%2Fui%2Fconst-generics%2Fissue-106419-struct-with-multiple-const-params.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fconst-generics%2Fissue-106419-struct-with-multiple-const-params.rs?ref=75655a92469f2b96219042770ade63fc21efd84f", "patch": "@@ -0,0 +1,12 @@\n+// check-pass\n+#![feature(generic_const_exprs)]\n+#![allow(incomplete_features)]\n+\n+#[derive(Clone)]\n+struct Bar<const A: usize, const B: usize>\n+where\n+    [(); A as usize]:,\n+    [(); B as usize]:,\n+{}\n+\n+fn main() {}"}]}