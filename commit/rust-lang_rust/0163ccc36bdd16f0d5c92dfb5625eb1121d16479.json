{"sha": "0163ccc36bdd16f0d5c92dfb5625eb1121d16479", "node_id": "MDY6Q29tbWl0NzI0NzEyOjAxNjNjY2MzNmJkZDE2ZjBkNWM5MmRmYjU2MjVlYjExMjFkMTY0Nzk=", "commit": {"author": {"name": "Jonas Schievink", "email": "jonas@schievink.net", "date": "2016-04-03T20:10:21Z"}, "committer": {"name": "Jonas Schievink", "email": "jonas@schievink.net", "date": "2016-04-03T20:12:48Z"}, "message": "Fix \"consider removing this semicolon\" help\n\nCheck last statement in a block, not the first", "tree": {"sha": "fc413202dcd4d33b4943ea62f7c184a23a446bab", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fc413202dcd4d33b4943ea62f7c184a23a446bab"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0163ccc36bdd16f0d5c92dfb5625eb1121d16479", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0163ccc36bdd16f0d5c92dfb5625eb1121d16479", "html_url": "https://github.com/rust-lang/rust/commit/0163ccc36bdd16f0d5c92dfb5625eb1121d16479", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0163ccc36bdd16f0d5c92dfb5625eb1121d16479/comments", "author": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c0b8c438203ada8768f2f8ea7c750131744f97ef", "url": "https://api.github.com/repos/rust-lang/rust/commits/c0b8c438203ada8768f2f8ea7c750131744f97ef", "html_url": "https://github.com/rust-lang/rust/commit/c0b8c438203ada8768f2f8ea7c750131744f97ef"}], "stats": {"total": 21, "additions": 19, "deletions": 2}, "files": [{"sha": "4451e7ac472e544c463c49c35c6c74359d4b41f1", "filename": "src/librustc/middle/liveness.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/0163ccc36bdd16f0d5c92dfb5625eb1121d16479/src%2Flibrustc%2Fmiddle%2Fliveness.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0163ccc36bdd16f0d5c92dfb5625eb1121d16479/src%2Flibrustc%2Fmiddle%2Fliveness.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fliveness.rs?ref=0163ccc36bdd16f0d5c92dfb5625eb1121d16479", "patch": "@@ -1502,7 +1502,7 @@ impl<'a, 'tcx> Liveness<'a, 'tcx> {\n                 } else {\n                     let ends_with_stmt = match body.expr {\n                         None if !body.stmts.is_empty() =>\n-                            match body.stmts.first().unwrap().node {\n+                            match body.stmts.last().unwrap().node {\n                                 hir::StmtSemi(ref e, _) => {\n                                     self.ir.tcx.expr_ty(&e) == t_ret\n                                 },\n@@ -1515,7 +1515,7 @@ impl<'a, 'tcx> Liveness<'a, 'tcx> {\n                                                    E0269,\n                                                    \"not all control paths return a value\");\n                     if ends_with_stmt {\n-                        let last_stmt = body.stmts.first().unwrap();\n+                        let last_stmt = body.stmts.last().unwrap();\n                         let original_span = original_sp(self.ir.tcx.sess.codemap(),\n                                                         last_stmt.span, sp);\n                         let span_semicolon = Span {"}, {"sha": "a25f0b17335eda917689d0de14c2fb35b1ed0489", "filename": "src/test/compile-fail/consider-removing-last-semi.rs", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/0163ccc36bdd16f0d5c92dfb5625eb1121d16479/src%2Ftest%2Fcompile-fail%2Fconsider-removing-last-semi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0163ccc36bdd16f0d5c92dfb5625eb1121d16479/src%2Ftest%2Fcompile-fail%2Fconsider-removing-last-semi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fconsider-removing-last-semi.rs?ref=0163ccc36bdd16f0d5c92dfb5625eb1121d16479", "patch": "@@ -0,0 +1,17 @@\n+// Copyright 2016 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+fn f() -> String {  //~ ERROR E0269\n+                    //~^ HELP detailed explanation\n+    0u8;\n+    \"bla\".to_string();  //~ HELP consider removing this semicolon\n+}\n+\n+fn main() {}"}]}