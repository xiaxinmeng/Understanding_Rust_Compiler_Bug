{"sha": "092f9a6b98a1b0b4724888f7b24bac6f6c5c1b79", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA5MmY5YTZiOThhMWIwYjQ3MjQ4ODhmN2IyNGJhYzZmNmM1YzFiNzk=", "commit": {"author": {"name": "bors[bot]", "email": "bors[bot]@users.noreply.github.com", "date": "2018-01-28T08:18:47Z"}, "committer": {"name": "bors[bot]", "email": "bors[bot]@users.noreply.github.com", "date": "2018-01-28T08:18:47Z"}, "message": "Merge #17\n\n17: Document the design of `FileBuilder` r=matklad a=matklad", "tree": {"sha": "9fe5ea35bcbda21c5fc1e059279ec885848634c0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9fe5ea35bcbda21c5fc1e059279ec885848634c0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/092f9a6b98a1b0b4724888f7b24bac6f6c5c1b79", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/092f9a6b98a1b0b4724888f7b24bac6f6c5c1b79", "html_url": "https://github.com/rust-lang/rust/commit/092f9a6b98a1b0b4724888f7b24bac6f6c5c1b79", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/092f9a6b98a1b0b4724888f7b24bac6f6c5c1b79/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "parents": [{"sha": "aff82e5ee1d587b858e7237511e611bb8cc61cf3", "url": "https://api.github.com/repos/rust-lang/rust/commits/aff82e5ee1d587b858e7237511e611bb8cc61cf3", "html_url": "https://github.com/rust-lang/rust/commit/aff82e5ee1d587b858e7237511e611bb8cc61cf3"}, {"sha": "1417f26f820bd6428b528c3dc6127fabb084115a", "url": "https://api.github.com/repos/rust-lang/rust/commits/1417f26f820bd6428b528c3dc6127fabb084115a", "html_url": "https://github.com/rust-lang/rust/commit/1417f26f820bd6428b528c3dc6127fabb084115a"}], "stats": {"total": 21, "additions": 14, "deletions": 7}, "files": [{"sha": "0ea8f6a63bd29cff9cbd84c75b72ae8fa7f1f115", "filename": "src/lib.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/092f9a6b98a1b0b4724888f7b24bac6f6c5c1b79/src%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/092f9a6b98a1b0b4724888f7b24bac6f6c5c1b79/src%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib.rs?ref=092f9a6b98a1b0b4724888f7b24bac6f6c5c1b79", "patch": "@@ -24,7 +24,8 @@ mod parser;\n \n pub mod syntax_kinds;\n pub use text::{TextRange, TextUnit};\n-pub use tree::{File, FileBuilder, Node, Sink, SyntaxKind, Token};\n+pub use tree::{File, Node, SyntaxKind, Token};\n+pub(crate) use tree::{FileBuilder, Sink};\n pub use lexer::{next_token, tokenize};\n pub use parser::parse;\n "}, {"sha": "47038496de93612555063381623fe58545209c03", "filename": "src/tree/file_builder.rs", "status": "modified", "additions": 11, "deletions": 5, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/092f9a6b98a1b0b4724888f7b24bac6f6c5c1b79/src%2Ftree%2Ffile_builder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/092f9a6b98a1b0b4724888f7b24bac6f6c5c1b79/src%2Ftree%2Ffile_builder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftree%2Ffile_builder.rs?ref=092f9a6b98a1b0b4724888f7b24bac6f6c5c1b79", "patch": "@@ -1,18 +1,24 @@\n-// FIXME(CAD97): I don't understand this mod well enough to stub out docs for the public symbols yet\n-#![allow(missing_docs)]\n-\n+//! This module provides a way to construct a `File`.\n+//! It is intended to be completely decoupled from the\n+//! parser, so as to allow to evolve the tree representation\n+//! and the parser algorithm independently.\n+//!\n+//! The `Sink` trait is the bridge between the parser and the\n+//! tree builder: the parser produces a stream of events like\n+//! `start node`, `finish node`, and `FileBuilder` converts\n+//! this stream to a real tree.\n use {SyntaxKind, TextRange, TextUnit};\n use super::{File, NodeData, NodeIdx, SyntaxErrorData};\n \n-pub trait Sink {\n+pub(crate) trait Sink {\n     fn leaf(&mut self, kind: SyntaxKind, len: TextUnit);\n     fn start_internal(&mut self, kind: SyntaxKind);\n     fn finish_internal(&mut self);\n     fn error(&mut self) -> ErrorBuilder;\n }\n \n #[derive(Debug)]\n-pub struct FileBuilder {\n+pub(crate) struct FileBuilder {\n     text: String,\n     nodes: Vec<NodeData>,\n     errors: Vec<SyntaxErrorData>,"}, {"sha": "795f23f4293ba0e3aed156bd1b99cd4633fbf48c", "filename": "src/tree/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/092f9a6b98a1b0b4724888f7b24bac6f6c5c1b79/src%2Ftree%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/092f9a6b98a1b0b4724888f7b24bac6f6c5c1b79/src%2Ftree%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftree%2Fmod.rs?ref=092f9a6b98a1b0b4724888f7b24bac6f6c5c1b79", "patch": "@@ -4,7 +4,7 @@ use std::fmt;\n use std::cmp;\n \n mod file_builder;\n-pub use self::file_builder::{FileBuilder, Sink};\n+pub(crate) use self::file_builder::{FileBuilder, Sink};\n \n pub use syntax_kinds::SyntaxKind;\n "}]}