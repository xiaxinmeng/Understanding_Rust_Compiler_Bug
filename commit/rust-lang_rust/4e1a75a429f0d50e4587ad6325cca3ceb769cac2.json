{"sha": "4e1a75a429f0d50e4587ad6325cca3ceb769cac2", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRlMWE3NWE0MjlmMGQ1MGU0NTg3YWQ2MzI1Y2NhM2NlYjc2OWNhYzI=", "commit": {"author": {"name": "topecongiro", "email": "seuchida@gmail.com", "date": "2017-11-05T05:03:30Z"}, "committer": {"name": "topecongiro", "email": "seuchida@gmail.com", "date": "2017-11-06T04:52:25Z"}, "message": "Collapse if-else", "tree": {"sha": "46ca770014ba03cdba2ea91c67c00098e01d2280", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/46ca770014ba03cdba2ea91c67c00098e01d2280"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4e1a75a429f0d50e4587ad6325cca3ceb769cac2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4e1a75a429f0d50e4587ad6325cca3ceb769cac2", "html_url": "https://github.com/rust-lang/rust/commit/4e1a75a429f0d50e4587ad6325cca3ceb769cac2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4e1a75a429f0d50e4587ad6325cca3ceb769cac2/comments", "author": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "committer": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b023cc831ce3f79efdda89a6b825967993b40069", "url": "https://api.github.com/repos/rust-lang/rust/commits/b023cc831ce3f79efdda89a6b825967993b40069", "html_url": "https://github.com/rust-lang/rust/commit/b023cc831ce3f79efdda89a6b825967993b40069"}], "stats": {"total": 16, "additions": 7, "deletions": 9}, "files": [{"sha": "6d5f48fbb2618973873ad463639e6db3e3e7ed9b", "filename": "src/comment.rs", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/4e1a75a429f0d50e4587ad6325cca3ceb769cac2/src%2Fcomment.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e1a75a429f0d50e4587ad6325cca3ceb769cac2/src%2Fcomment.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomment.rs?ref=4e1a75a429f0d50e4587ad6325cca3ceb769cac2", "patch": "@@ -327,12 +327,10 @@ fn rewrite_comment_inner(\n             if line.is_empty() {\n                 continue;\n             }\n+        } else if is_prev_line_multi_line && !line.is_empty() {\n+            result.push(' ')\n         } else {\n-            if is_prev_line_multi_line && !line.is_empty() {\n-                result.push(' ')\n-            } else {\n-                result.push_str(&comment_line_separator);\n-            }\n+            result.push_str(&comment_line_separator);\n         }\n \n         if config.wrap_comments() && line.len() > fmt.shape.width && !has_url(line) {"}, {"sha": "37a1b1ca40b7f64797699e81b89312fe6befae52", "filename": "src/items.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/4e1a75a429f0d50e4587ad6325cca3ceb769cac2/src%2Fitems.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e1a75a429f0d50e4587ad6325cca3ceb769cac2/src%2Fitems.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fitems.rs?ref=4e1a75a429f0d50e4587ad6325cca3ceb769cac2", "patch": "@@ -313,10 +313,10 @@ impl<'a> FmtVisitor<'a> {\n         let (mut result, force_newline_brace) =\n             rewrite_fn_base(&context, indent, ident, fn_sig, span, newline_brace, true)?;\n \n-        if self.config.fn_brace_style() == BraceStyle::AlwaysNextLine || force_newline_brace {\n-            newline_brace = true;\n-        } else if last_line_width(&result) + 2 > self.shape().width {\n-            // 2 = ` {`\n+        // 2 = ` {`\n+        if self.config.fn_brace_style() == BraceStyle::AlwaysNextLine || force_newline_brace\n+            || last_line_width(&result) + 2 > self.shape().width\n+        {\n             newline_brace = true;\n         } else if !result.contains('\\n') {\n             newline_brace = false;"}]}