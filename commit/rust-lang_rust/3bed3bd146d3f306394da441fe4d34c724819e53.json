{"sha": "3bed3bd146d3f306394da441fe4d34c724819e53", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNiZWQzYmQxNDZkM2YzMDYzOTRkYTQ0MWZlNGQzNGM3MjQ4MTllNTM=", "commit": {"author": {"name": "Mark Simulacrum", "email": "mark.simulacrum@gmail.com", "date": "2017-06-18T16:34:14Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-06-18T16:34:14Z"}, "message": "Rollup merge of #42734 - MaloJaffre:tests, r=Mark-Simulacrum\n\nAdd tests for various issues\n\nFixes #11740.\nFixes #19601.\nFixes #22603\nFixes #22789.\nFixes #26614.\n\nr? @Mark-Simulacrum.", "tree": {"sha": "793deb872cd80120061280724c4d168d3b71d052", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/793deb872cd80120061280724c4d168d3b71d052"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3bed3bd146d3f306394da441fe4d34c724819e53", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3bed3bd146d3f306394da441fe4d34c724819e53", "html_url": "https://github.com/rust-lang/rust/commit/3bed3bd146d3f306394da441fe4d34c724819e53", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3bed3bd146d3f306394da441fe4d34c724819e53/comments", "author": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "db9c12c2ef6798600846c0919cb3ae20caa317b3", "url": "https://api.github.com/repos/rust-lang/rust/commits/db9c12c2ef6798600846c0919cb3ae20caa317b3", "html_url": "https://github.com/rust-lang/rust/commit/db9c12c2ef6798600846c0919cb3ae20caa317b3"}, {"sha": "5fe89e8eb1f0d9c4fbd8995bfe4e9a4e7926d4bc", "url": "https://api.github.com/repos/rust-lang/rust/commits/5fe89e8eb1f0d9c4fbd8995bfe4e9a4e7926d4bc", "html_url": "https://github.com/rust-lang/rust/commit/5fe89e8eb1f0d9c4fbd8995bfe4e9a4e7926d4bc"}], "stats": {"total": 124, "additions": 124, "deletions": 0}, "files": [{"sha": "0bda06be9e8ca964575185441d3beff9f5d526f2", "filename": "src/test/compile-fail/issue-11740.rs", "status": "added", "additions": 38, "deletions": 0, "changes": 38, "blob_url": "https://github.com/rust-lang/rust/blob/3bed3bd146d3f306394da441fe4d34c724819e53/src%2Ftest%2Fcompile-fail%2Fissue-11740.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3bed3bd146d3f306394da441fe4d34c724819e53/src%2Ftest%2Fcompile-fail%2Fissue-11740.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-11740.rs?ref=3bed3bd146d3f306394da441fe4d34c724819e53", "patch": "@@ -0,0 +1,38 @@\n+// Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+#![feature(rustc_attrs)]\n+#![allow(warnings)]\n+\n+struct Attr {\n+    name: String,\n+    value: String,\n+}\n+\n+struct Element {\n+    attrs: Vec<Box<Attr>>,\n+}\n+\n+impl Element {\n+    pub unsafe fn get_attr<'a>(&'a self, name: &str) {\n+        self.attrs\n+            .iter()\n+            .find(|attr| {\n+                      let attr: &&Box<Attr> = std::mem::transmute(attr);\n+                      true\n+                  });\n+    }\n+}\n+\n+#[rustc_error]\n+fn main() { //~ ERROR compilation successful\n+    let element = Element { attrs: Vec::new() };\n+    let _ = unsafe { element.get_attr(\"foo\") };\n+}"}, {"sha": "02b4932cea8c9c12e0cdba0c28c7247976d2380b", "filename": "src/test/compile-fail/issue-19601.rs", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/3bed3bd146d3f306394da441fe4d34c724819e53/src%2Ftest%2Fcompile-fail%2Fissue-19601.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3bed3bd146d3f306394da441fe4d34c724819e53/src%2Ftest%2Fcompile-fail%2Fissue-19601.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-19601.rs?ref=3bed3bd146d3f306394da441fe4d34c724819e53", "patch": "@@ -0,0 +1,19 @@\n+// Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+#![feature(rustc_attrs)]\n+#![allow(warnings)]\n+\n+trait A<T> {}\n+struct B<T> where B<T>: A<B<T>> { t: T }\n+\n+#[rustc_error]\n+fn main() { //~ ERROR compilation successful\n+}"}, {"sha": "d08f916b870c1159bf0c79bb03011b0842131aff", "filename": "src/test/compile-fail/issue-22603.rs", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/3bed3bd146d3f306394da441fe4d34c724819e53/src%2Ftest%2Fcompile-fail%2Fissue-22603.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3bed3bd146d3f306394da441fe4d34c724819e53/src%2Ftest%2Fcompile-fail%2Fissue-22603.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-22603.rs?ref=3bed3bd146d3f306394da441fe4d34c724819e53", "patch": "@@ -0,0 +1,23 @@\n+// Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+#![feature(unboxed_closures, fn_traits, rustc_attrs)]\n+\n+struct Foo;\n+\n+impl<A> FnOnce<(A,)> for Foo {\n+    type Output = ();\n+    extern \"rust-call\" fn call_once(self, (_,): (A,)) {\n+    }\n+}\n+#[rustc_error]\n+fn main() { //~ ERROR compilation successful\n+    println!(\"{:?}\", Foo(\"bar\"));\n+}"}, {"sha": "cba1c367bb9b2792b7d382fe4619c90e7e9e9e46", "filename": "src/test/compile-fail/issue-22789.rs", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/3bed3bd146d3f306394da441fe4d34c724819e53/src%2Ftest%2Fcompile-fail%2Fissue-22789.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3bed3bd146d3f306394da441fe4d34c724819e53/src%2Ftest%2Fcompile-fail%2Fissue-22789.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-22789.rs?ref=3bed3bd146d3f306394da441fe4d34c724819e53", "patch": "@@ -0,0 +1,17 @@\n+// Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+#![feature(unboxed_closures, fn_traits, rustc_attrs)]\n+\n+#[rustc_error]\n+fn main() { //~ ERROR compilation successful\n+    let k = |x: i32| { x + 1 };\n+    Fn::call(&k, (0,));\n+}"}, {"sha": "c128fb3b47959bb04cb7c64144192045b91efe4d", "filename": "src/test/compile-fail/issue-26614.rs", "status": "added", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/3bed3bd146d3f306394da441fe4d34c724819e53/src%2Ftest%2Fcompile-fail%2Fissue-26614.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3bed3bd146d3f306394da441fe4d34c724819e53/src%2Ftest%2Fcompile-fail%2Fissue-26614.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-26614.rs?ref=3bed3bd146d3f306394da441fe4d34c724819e53", "patch": "@@ -0,0 +1,27 @@\n+// Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+#![feature(rustc_attrs)]\n+#![allow(warnings)]\n+\n+trait Mirror {\n+    type It;\n+}\n+\n+impl<T> Mirror for T {\n+    type It = Self;\n+}\n+\n+\n+#[rustc_error]\n+fn main() { //~ ERROR compilation successful\n+    let c: <u32 as Mirror>::It = 5;\n+    const CCCC: <u32 as Mirror>::It = 5;\n+}"}]}