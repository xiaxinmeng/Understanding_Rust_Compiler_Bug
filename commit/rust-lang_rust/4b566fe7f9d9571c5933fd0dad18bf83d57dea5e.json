{"sha": "4b566fe7f9d9571c5933fd0dad18bf83d57dea5e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRiNTY2ZmU3ZjlkOTU3MWM1OTMzZmQwZGFkMThiZjgzZDU3ZGVhNWU=", "commit": {"author": {"name": "Brian Anderson", "email": "andersrb@gmail.com", "date": "2011-06-04T21:47:36Z"}, "committer": {"name": "Brian Anderson", "email": "andersrb@gmail.com", "date": "2011-06-04T21:51:59Z"}, "message": "rustc: Hide the parser from syntax extensions\n\nEventually extensions will probably need access to the parser again, but it'll\nbe in a different form.", "tree": {"sha": "5e210bed9ec8c44baa73a62fd10a89e423dcf37a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5e210bed9ec8c44baa73a62fd10a89e423dcf37a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4b566fe7f9d9571c5933fd0dad18bf83d57dea5e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4b566fe7f9d9571c5933fd0dad18bf83d57dea5e", "html_url": "https://github.com/rust-lang/rust/commit/4b566fe7f9d9571c5933fd0dad18bf83d57dea5e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4b566fe7f9d9571c5933fd0dad18bf83d57dea5e/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c88fa92de46983e2af9be6bf89faa0ade7dc33cd", "url": "https://api.github.com/repos/rust-lang/rust/commits/c88fa92de46983e2af9be6bf89faa0ade7dc33cd", "html_url": "https://github.com/rust-lang/rust/commit/c88fa92de46983e2af9be6bf89faa0ade7dc33cd"}], "stats": {"total": 14, "additions": 5, "deletions": 9}, "files": [{"sha": "d08fc3ef7d5ec00bef76c4ac6039fe7403a88ba7", "filename": "src/comp/front/ext.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4b566fe7f9d9571c5933fd0dad18bf83d57dea5e/src%2Fcomp%2Ffront%2Fext.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4b566fe7f9d9571c5933fd0dad18bf83d57dea5e/src%2Fcomp%2Ffront%2Fext.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Ffront%2Fext.rs?ref=4b566fe7f9d9571c5933fd0dad18bf83d57dea5e", "patch": "@@ -6,7 +6,7 @@ import front::parser::parser;\n import util::common::span;\n import util::common::new_str_hash;\n \n-type syntax_expander = fn(&ext_ctxt, &parser::parser, span,\n+type syntax_expander = fn(&ext_ctxt, span,\n                           &vec[@ast::expr],\n                           option::t[str]) -> @ast::expr;\n "}, {"sha": "62e39c8488b40f34d8bc834013a165aa1b9fe5ee", "filename": "src/comp/front/extenv.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4b566fe7f9d9571c5933fd0dad18bf83d57dea5e/src%2Fcomp%2Ffront%2Fextenv.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4b566fe7f9d9571c5933fd0dad18bf83d57dea5e/src%2Fcomp%2Ffront%2Fextenv.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Ffront%2Fextenv.rs?ref=4b566fe7f9d9571c5933fd0dad18bf83d57dea5e", "patch": "@@ -15,9 +15,7 @@ import ext::*;\n \n export expand_syntax_ext;\n \n-\n fn expand_syntax_ext(&ext_ctxt cx,\n-                     &parser::parser p,\n                      common::span sp,\n                      &vec[@ast::expr] args,\n                      option::t[str] body) -> @ast::expr {"}, {"sha": "0b5e399f3323d92bc959bac8c6dd64b2a522bd20", "filename": "src/comp/front/extfmt.rs", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/4b566fe7f9d9571c5933fd0dad18bf83d57dea5e/src%2Fcomp%2Ffront%2Fextfmt.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4b566fe7f9d9571c5933fd0dad18bf83d57dea5e/src%2Fcomp%2Ffront%2Fextfmt.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Ffront%2Fextfmt.rs?ref=4b566fe7f9d9571c5933fd0dad18bf83d57dea5e", "patch": "@@ -4,7 +4,6 @@\n  * compiler syntax extension plugin interface.\n  */\n \n-import front::parser::parser;\n import util::common;\n \n import std::str;\n@@ -20,7 +19,7 @@ import ext::*;\n export expand_syntax_ext;\n \n fn expand_syntax_ext(&ext_ctxt cx,\n-                     &parser p, common::span sp, \n+                     common::span sp, \n                      &vec[@ast::expr] args,\n                      option::t[str] body) -> @ast::expr {\n \n@@ -36,7 +35,7 @@ fn expand_syntax_ext(&ext_ctxt cx,\n     auto pieces = parse_fmt_string(fmt);\n     auto args_len = vec::len[@ast::expr](args);\n     auto fmt_args = vec::slice[@ast::expr](args, 1u, args_len - 1u);\n-    ret pieces_to_expr(cx, p, sp, pieces, args);\n+    ret pieces_to_expr(cx, sp, pieces, args);\n }\n \n fn expr_to_str(&ext_ctxt cx, @ast::expr expr) -> str {\n@@ -60,9 +59,8 @@ fn expr_to_str(&ext_ctxt cx, @ast::expr expr) -> str {\n \n // FIXME: A lot of these functions for producing expressions can probably\n // be factored out in common with other code that builds expressions.\n-// FIXME: Probably should be using the parser's span functions\n // FIXME: Cleanup the naming of these functions\n-fn pieces_to_expr(&ext_ctxt cx, parser p, common::span sp,\n+fn pieces_to_expr(&ext_ctxt cx, common::span sp,\n                   vec[piece] pieces, vec[@ast::expr] args) -> @ast::expr {\n \n     fn make_new_lit(&ext_ctxt cx,"}, {"sha": "62ba7325f9999eeeef0b62d3fa480362a13d3d89", "filename": "src/comp/front/parser.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4b566fe7f9d9571c5933fd0dad18bf83d57dea5e/src%2Fcomp%2Ffront%2Fparser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4b566fe7f9d9571c5933fd0dad18bf83d57dea5e/src%2Fcomp%2Ffront%2Fparser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Ffront%2Fparser.rs?ref=4b566fe7f9d9571c5933fd0dad18bf83d57dea5e", "patch": "@@ -1050,7 +1050,7 @@ fn expand_syntax_ext(&parser p, common::span sp,\n         case (some(ext::x(?ext))) {\n             auto ext_cx = ext::mk_ctxt(p);\n             ret ast::expr_ext(path, args, body,\n-                              ext(ext_cx, p, sp, args, body), \n+                              ext(ext_cx, sp, args, body), \n                               p.get_ann());\n         }\n     }"}]}