{"sha": "6092519e44a09cbac73fb6aa263879f9890b7b8a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYwOTI1MTllNDRhMDljYmFjNzNmYjZhYTI2Mzg3OWY5ODkwYjdiOGE=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-08-14T02:18:43Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-08-14T02:18:43Z"}, "message": "Rollup merge of #63485 - pietroalbini:new-mirror-bucket, r=alexcrichton\n\nci: move mirrors to their standalone bucket\n\nCurrently mirrors are stored in the rust-lang-ci2 S3 bucket along with\nCI toolchains. This is problematic for multiple reasons:\n\n- CI IAM credentials are allowed to both edit and delete those files.\n  A malicious user gaining access to those credentials would be able to\n  change our mirrored dependencies, possibly compromising the compiler.\n\n- Contents of the rust-lang-ci2 bucket are disposable except for the\n  mirrors' content. When we implement backups for S3 buckets we'd have\n  to replicate just that part of the bucket, complicating the backup\n  logic and increasing the chance of mistakes. A standalone bucket will\n  be way easier to backup.\n\nThis commit switches our CI to use the new rust-lang-ci-mirrors bucket.\n\nr? @alexcrichton", "tree": {"sha": "7522389df30c0bb8250b9cd50d9be2dab7136167", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7522389df30c0bb8250b9cd50d9be2dab7136167"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6092519e44a09cbac73fb6aa263879f9890b7b8a", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdU2+DCRBK7hj4Ov3rIwAAdHIIADO+/mnUbbatpeP34mCwy6m3\nDrcrBObTbJgX+aWUb3OXAYrV3HvFc3zB4otO7Cf3juNVG54aq5LgZ35RGKGGv2Tr\nrgRvG4EfO3NbJU9pZ7mJDYL2kmvGsErdwFUnwpoJcjGj0Y/k7Qt/p6O1fS75KP56\nhHEfpSqRe3yVRMIp0jXtN2pfPu8+v+Wf8lHwhbb75/wd3cvnqVceHn3zuU4Ew1hG\ncbFHTZdI20VlFZsBfYHvf25iENGd1ncN5gPiR5/1vZ+Kwl4a0fdnPyY7J9U96IvI\nLU1F4dCzPu5CNr9sUoLNTyNgfmOOY9JY4D4DcoOjM9Y4oT2E112vA0Xw+jU3rIs=\n=sJsM\n-----END PGP SIGNATURE-----\n", "payload": "tree 7522389df30c0bb8250b9cd50d9be2dab7136167\nparent c8248394715ae4a6c88ee14b10ad526a54259520\nparent eb832b2a3244166c81d8e00d94805525f3bd7526\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1565749123 +0200\ncommitter GitHub <noreply@github.com> 1565749123 +0200\n\nRollup merge of #63485 - pietroalbini:new-mirror-bucket, r=alexcrichton\n\nci: move mirrors to their standalone bucket\n\nCurrently mirrors are stored in the rust-lang-ci2 S3 bucket along with\nCI toolchains. This is problematic for multiple reasons:\n\n- CI IAM credentials are allowed to both edit and delete those files.\n  A malicious user gaining access to those credentials would be able to\n  change our mirrored dependencies, possibly compromising the compiler.\n\n- Contents of the rust-lang-ci2 bucket are disposable except for the\n  mirrors' content. When we implement backups for S3 buckets we'd have\n  to replicate just that part of the bucket, complicating the backup\n  logic and increasing the chance of mistakes. A standalone bucket will\n  be way easier to backup.\n\nThis commit switches our CI to use the new rust-lang-ci-mirrors bucket.\n\nr? @alexcrichton\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6092519e44a09cbac73fb6aa263879f9890b7b8a", "html_url": "https://github.com/rust-lang/rust/commit/6092519e44a09cbac73fb6aa263879f9890b7b8a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6092519e44a09cbac73fb6aa263879f9890b7b8a/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c8248394715ae4a6c88ee14b10ad526a54259520", "url": "https://api.github.com/repos/rust-lang/rust/commits/c8248394715ae4a6c88ee14b10ad526a54259520", "html_url": "https://github.com/rust-lang/rust/commit/c8248394715ae4a6c88ee14b10ad526a54259520"}, {"sha": "eb832b2a3244166c81d8e00d94805525f3bd7526", "url": "https://api.github.com/repos/rust-lang/rust/commits/eb832b2a3244166c81d8e00d94805525f3bd7526", "html_url": "https://github.com/rust-lang/rust/commit/eb832b2a3244166c81d8e00d94805525f3bd7526"}], "stats": {"total": 48, "additions": 25, "deletions": 23}, "files": [{"sha": "06fa3bd9f434710290d0a75848d17060f8e7af6b", "filename": "src/ci/azure-pipelines/auto.yml", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/6092519e44a09cbac73fb6aa263879f9890b7b8a/src%2Fci%2Fazure-pipelines%2Fauto.yml", "raw_url": "https://github.com/rust-lang/rust/raw/6092519e44a09cbac73fb6aa263879f9890b7b8a/src%2Fci%2Fazure-pipelines%2Fauto.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fazure-pipelines%2Fauto.yml?ref=6092519e44a09cbac73fb6aa263879f9890b7b8a", "patch": "@@ -273,7 +273,7 @@ jobs:\n         MSYS_BITS: 32\n         RUST_CONFIGURE_ARGS: --build=i686-pc-windows-gnu\n         SCRIPT: make ci-subset-1\n-        MINGW_URL: https://rust-lang-ci2.s3.amazonaws.com/rust-ci-mirror\n+        MINGW_URL: https://rust-lang-ci-mirrors.s3-us-west-1.amazonaws.com/rustc\n         MINGW_ARCHIVE: i686-6.3.0-release-posix-dwarf-rt_v5-rev2.7z\n         MINGW_DIR: mingw32\n         # FIXME(#59637)\n@@ -283,14 +283,14 @@ jobs:\n         MSYS_BITS: 32\n         RUST_CONFIGURE_ARGS: --build=i686-pc-windows-gnu\n         SCRIPT: make ci-subset-2\n-        MINGW_URL: https://rust-lang-ci2.s3.amazonaws.com/rust-ci-mirror\n+        MINGW_URL: https://rust-lang-ci-mirrors.s3-us-west-1.amazonaws.com/rustc\n         MINGW_ARCHIVE: i686-6.3.0-release-posix-dwarf-rt_v5-rev2.7z\n         MINGW_DIR: mingw32\n       x86_64-mingw-1:\n         MSYS_BITS: 64\n         SCRIPT: make ci-subset-1\n         RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-gnu\n-        MINGW_URL: https://rust-lang-ci2.s3.amazonaws.com/rust-ci-mirror\n+        MINGW_URL: https://rust-lang-ci-mirrors.s3-us-west-1.amazonaws.com/rustc\n         MINGW_ARCHIVE: x86_64-6.3.0-release-posix-seh-rt_v5-rev2.7z\n         MINGW_DIR: mingw64\n         # FIXME(#59637)\n@@ -300,7 +300,7 @@ jobs:\n         MSYS_BITS: 64\n         SCRIPT: make ci-subset-2\n         RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-gnu\n-        MINGW_URL: https://rust-lang-ci2.s3.amazonaws.com/rust-ci-mirror\n+        MINGW_URL: https://rust-lang-ci-mirrors.s3-us-west-1.amazonaws.com/rustc\n         MINGW_ARCHIVE: x86_64-6.3.0-release-posix-seh-rt_v5-rev2.7z\n         MINGW_DIR: mingw64\n \n@@ -327,7 +327,7 @@ jobs:\n         MSYS_BITS: 32\n         RUST_CONFIGURE_ARGS: --build=i686-pc-windows-gnu --enable-full-tools --enable-profiler\n         SCRIPT: python x.py dist\n-        MINGW_URL: https://rust-lang-ci2.s3.amazonaws.com/rust-ci-mirror\n+        MINGW_URL: https://rust-lang-ci-mirrors.s3-us-west-1.amazonaws.com/rustc\n         MINGW_ARCHIVE: i686-6.3.0-release-posix-dwarf-rt_v5-rev2.7z\n         MINGW_DIR: mingw32\n         DIST_REQUIRE_ALL_TOOLS: 1\n@@ -336,7 +336,7 @@ jobs:\n         MSYS_BITS: 64\n         SCRIPT: python x.py dist\n         RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-gnu --enable-full-tools --enable-profiler\n-        MINGW_URL: https://rust-lang-ci2.s3.amazonaws.com/rust-ci-mirror\n+        MINGW_URL: https://rust-lang-ci-mirrors.s3-us-west-1.amazonaws.com/rustc\n         MINGW_ARCHIVE: x86_64-6.3.0-release-posix-seh-rt_v5-rev2.7z\n         MINGW_DIR: mingw64\n         DIST_REQUIRE_ALL_TOOLS: 1"}, {"sha": "14daf81b430755cda020c104ec9da8a8cc138f2c", "filename": "src/ci/azure-pipelines/steps/install-clang.yml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6092519e44a09cbac73fb6aa263879f9890b7b8a/src%2Fci%2Fazure-pipelines%2Fsteps%2Finstall-clang.yml", "raw_url": "https://github.com/rust-lang/rust/raw/6092519e44a09cbac73fb6aa263879f9890b7b8a/src%2Fci%2Fazure-pipelines%2Fsteps%2Finstall-clang.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fazure-pipelines%2Fsteps%2Finstall-clang.yml?ref=6092519e44a09cbac73fb6aa263879f9890b7b8a", "patch": "@@ -36,7 +36,7 @@ steps:\n     set -e\n     mkdir -p citools\n     cd citools\n-    curl -f https://rust-lang-ci2.s3.amazonaws.com/rust-ci-mirror/LLVM-7.0.0-win64.tar.gz | tar xzf -\n+    curl -f https://rust-lang-ci-mirrors.s3-us-west-1.amazonaws.com/rustc/LLVM-7.0.0-win64.tar.gz | tar xzf -\n     echo \"##vso[task.setvariable variable=RUST_CONFIGURE_ARGS]$RUST_CONFIGURE_ARGS --set llvm.clang-cl=`pwd`/clang-rust/bin/clang-cl.exe\"\n   condition: and(succeeded(), eq(variables['Agent.OS'], 'Windows_NT'), eq(variables['MINGW_URL'],''))\n   displayName: Install clang (Windows)"}, {"sha": "d4679c1c6733e50807df5f8c61dec675a15e031c", "filename": "src/ci/azure-pipelines/steps/install-sccache.yml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6092519e44a09cbac73fb6aa263879f9890b7b8a/src%2Fci%2Fazure-pipelines%2Fsteps%2Finstall-sccache.yml", "raw_url": "https://github.com/rust-lang/rust/raw/6092519e44a09cbac73fb6aa263879f9890b7b8a/src%2Fci%2Fazure-pipelines%2Fsteps%2Finstall-sccache.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fazure-pipelines%2Fsteps%2Finstall-sccache.yml?ref=6092519e44a09cbac73fb6aa263879f9890b7b8a", "patch": "@@ -2,14 +2,14 @@ steps:\n \n - bash: |\n     set -e\n-    curl -fo /usr/local/bin/sccache https://rust-lang-ci2.s3.amazonaws.com/rust-ci-mirror/2018-04-02-sccache-x86_64-apple-darwin\n+    curl -fo /usr/local/bin/sccache https://rust-lang-ci-mirrors.s3-us-west-1.amazonaws.com/rustc/2018-04-02-sccache-x86_64-apple-darwin\n     chmod +x /usr/local/bin/sccache\n   displayName: Install sccache (OSX)\n   condition: and(succeeded(), eq(variables['Agent.OS'], 'Darwin'))\n \n - script: |\n     md sccache\n-    powershell -Command \"$ProgressPreference = 'SilentlyContinue'; iwr -outf sccache\\sccache.exe https://rust-lang-ci2.s3.amazonaws.com/rust-ci-mirror/2018-04-26-sccache-x86_64-pc-windows-msvc\"\n+    powershell -Command \"$ProgressPreference = 'SilentlyContinue'; iwr -outf sccache\\sccache.exe https://rust-lang-ci-mirrors.s3-us-west-1.amazonaws.com/rustc/2018-04-26-sccache-x86_64-pc-windows-msvc\"\n     echo ##vso[task.prependpath]%CD%\\sccache\n   displayName: Install sccache (Windows)\n   condition: and(succeeded(), eq(variables['Agent.OS'], 'Windows_NT'))"}, {"sha": "9aaeb4b79d63410ff36f91d64185ca4f6c6e5c75", "filename": "src/ci/azure-pipelines/steps/install-windows-build-deps.yml", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/6092519e44a09cbac73fb6aa263879f9890b7b8a/src%2Fci%2Fazure-pipelines%2Fsteps%2Finstall-windows-build-deps.yml", "raw_url": "https://github.com/rust-lang/rust/raw/6092519e44a09cbac73fb6aa263879f9890b7b8a/src%2Fci%2Fazure-pipelines%2Fsteps%2Finstall-windows-build-deps.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fazure-pipelines%2Fsteps%2Finstall-windows-build-deps.yml?ref=6092519e44a09cbac73fb6aa263879f9890b7b8a", "patch": "@@ -4,7 +4,7 @@ steps:\n # https://github.com/wixtoolset/wix3 originally\n - bash: |\n     set -e\n-    curl -O https://rust-lang-ci2.s3-us-west-1.amazonaws.com/rust-ci-mirror/wix311-binaries.zip\n+    curl -O https://rust-lang-ci-mirrors.s3-us-west-1.amazonaws.com/rustc/wix311-binaries.zip\n     echo \"##vso[task.setvariable variable=WIX]`pwd`/wix\"\n     mkdir -p wix/bin\n     cd wix/bin\n@@ -18,7 +18,7 @@ steps:\n # one is MSI installers and one is EXE, but they're not used so frequently at\n # this point anyway so perhaps it's a wash!\n - script: |\n-    powershell -Command \"$ProgressPreference = 'SilentlyContinue'; iwr -outf is-install.exe https://rust-lang-ci2.s3.amazonaws.com/rust-ci-mirror/2017-08-22-is.exe\"\n+    powershell -Command \"$ProgressPreference = 'SilentlyContinue'; iwr -outf is-install.exe https://rust-lang-ci-mirrors.s3-us-west-1.amazonaws.com/rustc/2017-08-22-is.exe\"\n     is-install.exe /VERYSILENT /SUPPRESSMSGBOXES /NORESTART /SP-\n     echo ##vso[task.prependpath]C:\\Program Files (x86)\\Inno Setup 5\n   displayName: Install InnoSetup\n@@ -109,7 +109,7 @@ steps:\n # Note that this is originally from the github releases patch of Ninja\n - script: |\n     md ninja\n-    powershell -Command \"$ProgressPreference = 'SilentlyContinue'; iwr -outf 2017-03-15-ninja-win.zip https://rust-lang-ci2.s3.amazonaws.com/rust-ci-mirror/2017-03-15-ninja-win.zip\"\n+    powershell -Command \"$ProgressPreference = 'SilentlyContinue'; iwr -outf 2017-03-15-ninja-win.zip https://rust-lang-ci-mirrors.s3-us-west-1.amazonaws.com/rustc/2017-03-15-ninja-win.zip\"\n     7z x -oninja 2017-03-15-ninja-win.zip\n     del 2017-03-15-ninja-win.zip\n     set RUST_CONFIGURE_ARGS=%RUST_CONFIGURE_ARGS% --enable-ninja"}, {"sha": "9493b33698708b08449d55d4b30ee3b54151c355", "filename": "src/ci/docker/armhf-gnu/Dockerfile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6092519e44a09cbac73fb6aa263879f9890b7b8a/src%2Fci%2Fdocker%2Farmhf-gnu%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/6092519e44a09cbac73fb6aa263879f9890b7b8a/src%2Fci%2Fdocker%2Farmhf-gnu%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Farmhf-gnu%2FDockerfile?ref=6092519e44a09cbac73fb6aa263879f9890b7b8a", "patch": "@@ -72,7 +72,7 @@ RUN arm-linux-gnueabihf-gcc addentropy.c -o rootfs/addentropy -static\n \n # TODO: What is this?!\n # Source of the file: https://github.com/vfdev-5/qemu-rpi2-vexpress/raw/master/vexpress-v2p-ca15-tc1.dtb\n-RUN curl -O https://rust-lang-ci2.s3.amazonaws.com/rust-ci-mirror/vexpress-v2p-ca15-tc1.dtb\n+RUN curl -O https://rust-lang-ci-mirrors.s3-us-west-1.amazonaws.com/rustc/vexpress-v2p-ca15-tc1.dtb\n \n COPY scripts/sccache.sh /scripts/\n RUN sh /scripts/sccache.sh"}, {"sha": "29cfb5d96083ef6eabbe39e400d2a939bc60590c", "filename": "src/ci/docker/dist-various-1/install-mips-musl.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6092519e44a09cbac73fb6aa263879f9890b7b8a/src%2Fci%2Fdocker%2Fdist-various-1%2Finstall-mips-musl.sh", "raw_url": "https://github.com/rust-lang/rust/raw/6092519e44a09cbac73fb6aa263879f9890b7b8a/src%2Fci%2Fdocker%2Fdist-various-1%2Finstall-mips-musl.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-various-1%2Finstall-mips-musl.sh?ref=6092519e44a09cbac73fb6aa263879f9890b7b8a", "patch": "@@ -5,7 +5,7 @@ mkdir /usr/local/mips-linux-musl\n # originally from\n # https://downloads.openwrt.org/snapshots/trunk/ar71xx/generic/\n # OpenWrt-Toolchain-ar71xx-generic_gcc-5.3.0_musl-1.1.16.Linux-x86_64.tar.bz2\n-URL=\"https://rust-lang-ci2.s3.amazonaws.com/rust-ci-mirror\"\n+URL=\"https://rust-lang-ci-mirrors.s3-us-west-1.amazonaws.com/rustc\"\n FILE=\"OpenWrt-Toolchain-ar71xx-generic_gcc-5.3.0_musl-1.1.16.Linux-x86_64.tar.bz2\"\n curl -L \"$URL/$FILE\" | tar xjf - -C /usr/local/mips-linux-musl --strip-components=2\n "}, {"sha": "f04ee78157167104e53c37390677ae6dfa0af131", "filename": "src/ci/docker/dist-various-2/build-wasi-toolchain.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6092519e44a09cbac73fb6aa263879f9890b7b8a/src%2Fci%2Fdocker%2Fdist-various-2%2Fbuild-wasi-toolchain.sh", "raw_url": "https://github.com/rust-lang/rust/raw/6092519e44a09cbac73fb6aa263879f9890b7b8a/src%2Fci%2Fdocker%2Fdist-various-2%2Fbuild-wasi-toolchain.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-various-2%2Fbuild-wasi-toolchain.sh?ref=6092519e44a09cbac73fb6aa263879f9890b7b8a", "patch": "@@ -5,7 +5,7 @@\n set -ex\n \n # Originally from https://releases.llvm.org/8.0.0/clang+llvm-8.0.0-x86_64-linux-gnu-ubuntu-14.04.tar.xz\n-curl https://rust-lang-ci2.s3.amazonaws.com/rust-ci-mirror/clang%2Bllvm-8.0.0-x86_64-linux-gnu-ubuntu-14.04.tar.xz | \\\n+curl https://rust-lang-ci-mirrors.s3-us-west-1.amazonaws.com/rustc/clang%2Bllvm-8.0.0-x86_64-linux-gnu-ubuntu-14.04.tar.xz | \\\n   tar xJf -\n export PATH=`pwd`/clang+llvm-8.0.0-x86_64-linux-gnu-ubuntu-14.04/bin:$PATH\n "}, {"sha": "be8a6c93945e96f7d8c7323b4a917df15e3c8910", "filename": "src/ci/docker/dist-x86_64-linux/build-openssl.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6092519e44a09cbac73fb6aa263879f9890b7b8a/src%2Fci%2Fdocker%2Fdist-x86_64-linux%2Fbuild-openssl.sh", "raw_url": "https://github.com/rust-lang/rust/raw/6092519e44a09cbac73fb6aa263879f9890b7b8a/src%2Fci%2Fdocker%2Fdist-x86_64-linux%2Fbuild-openssl.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-x86_64-linux%2Fbuild-openssl.sh?ref=6092519e44a09cbac73fb6aa263879f9890b7b8a", "patch": "@@ -4,7 +4,7 @@ set -ex\n source shared.sh\n \n VERSION=1.0.2k\n-URL=https://rust-lang-ci2.s3.amazonaws.com/rust-ci-mirror/openssl-$VERSION.tar.gz\n+URL=https://rust-lang-ci-mirrors.s3-us-west-1.amazonaws.com/rustc/openssl-$VERSION.tar.gz\n \n curl $URL | tar xzf -\n "}, {"sha": "797f674b954f2e54c272cb6b4b2a9bb3f512cc25", "filename": "src/ci/docker/dist-x86_64-netbsd/build-netbsd-toolchain.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6092519e44a09cbac73fb6aa263879f9890b7b8a/src%2Fci%2Fdocker%2Fdist-x86_64-netbsd%2Fbuild-netbsd-toolchain.sh", "raw_url": "https://github.com/rust-lang/rust/raw/6092519e44a09cbac73fb6aa263879f9890b7b8a/src%2Fci%2Fdocker%2Fdist-x86_64-netbsd%2Fbuild-netbsd-toolchain.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-x86_64-netbsd%2Fbuild-netbsd-toolchain.sh?ref=6092519e44a09cbac73fb6aa263879f9890b7b8a", "patch": "@@ -25,7 +25,7 @@ cd netbsd\n \n mkdir -p /x-tools/x86_64-unknown-netbsd/sysroot\n \n-URL=https://rust-lang-ci2.s3.amazonaws.com/rust-ci-mirror\n+URL=https://rust-lang-ci-mirrors.s3-us-west-1.amazonaws.com/rustc\n \n # Originally from ftp://ftp.netbsd.org/pub/NetBSD/NetBSD-$BSD/source/sets/*.tgz\n curl $URL/2018-03-01-netbsd-src.tgz | tar xzf -"}, {"sha": "c9e2961f6eb156ca8de88dd6ee51aff71bc8ff8f", "filename": "src/ci/docker/scripts/android-sdk-manager.py", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/6092519e44a09cbac73fb6aa263879f9890b7b8a/src%2Fci%2Fdocker%2Fscripts%2Fandroid-sdk-manager.py", "raw_url": "https://github.com/rust-lang/rust/raw/6092519e44a09cbac73fb6aa263879f9890b7b8a/src%2Fci%2Fdocker%2Fscripts%2Fandroid-sdk-manager.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fscripts%2Fandroid-sdk-manager.py?ref=6092519e44a09cbac73fb6aa263879f9890b7b8a", "patch": "@@ -23,8 +23,9 @@\n HOST_OS = \"linux\"\n \n # Mirroring options\n-MIRROR_BUCKET = \"rust-lang-ci2\"\n-MIRROR_BASE_DIR = \"rust-ci-mirror/android/\"\n+MIRROR_BUCKET = \"rust-lang-ci-mirrors\"\n+MIRROR_BUCKET_REGION = \"us-west-1\"\n+MIRROR_BASE_DIR = \"rustc/android/\"\n \n import argparse\n import hashlib\n@@ -144,7 +145,8 @@ def cli_install(args):\n     lockfile = Lockfile(args.lockfile)\n     for package in lockfile.packages.values():\n         # Download the file from the mirror into a temp file\n-        url = \"https://\" + MIRROR_BUCKET + \".s3.amazonaws.com/\" + MIRROR_BASE_DIR\n+        url = \"https://\" + MIRROR_BUCKET + \".s3-\" + MIRROR_BUCKET_REGION + \\\n+              \".amazonaws.com/\" + MIRROR_BASE_DIR\n         downloaded = package.download(url)\n         # Extract the file in a temporary directory\n         extract_dir = tempfile.mkdtemp()"}, {"sha": "70155e770a960281eb90668a7485b8a249889938", "filename": "src/ci/docker/scripts/freebsd-toolchain.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6092519e44a09cbac73fb6aa263879f9890b7b8a/src%2Fci%2Fdocker%2Fscripts%2Ffreebsd-toolchain.sh", "raw_url": "https://github.com/rust-lang/rust/raw/6092519e44a09cbac73fb6aa263879f9890b7b8a/src%2Fci%2Fdocker%2Fscripts%2Ffreebsd-toolchain.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fscripts%2Ffreebsd-toolchain.sh?ref=6092519e44a09cbac73fb6aa263879f9890b7b8a", "patch": "@@ -59,7 +59,7 @@ done\n \n # Originally downloaded from:\n # https://download.freebsd.org/ftp/releases/${freebsd_arch}/${freebsd_version}-RELEASE/base.txz\n-URL=https://rust-lang-ci2.s3.amazonaws.com/rust-ci-mirror/2019-04-04-freebsd-${freebsd_arch}-${freebsd_version}-RELEASE-base.txz\n+URL=https://rust-lang-ci-mirrors.s3-us-west-1.amazonaws.com/rustc/2019-04-04-freebsd-${freebsd_arch}-${freebsd_version}-RELEASE-base.txz\n curl \"$URL\" | tar xJf - -C \"$sysroot\" --wildcards \"${files_to_extract[@]}\"\n \n # Fix up absolute symlinks from the system image.  This can be removed"}, {"sha": "efeb0ed0d72d0f9461f17a4f701039e2f4dee1d7", "filename": "src/ci/docker/scripts/sccache.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6092519e44a09cbac73fb6aa263879f9890b7b8a/src%2Fci%2Fdocker%2Fscripts%2Fsccache.sh", "raw_url": "https://github.com/rust-lang/rust/raw/6092519e44a09cbac73fb6aa263879f9890b7b8a/src%2Fci%2Fdocker%2Fscripts%2Fsccache.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fscripts%2Fsccache.sh?ref=6092519e44a09cbac73fb6aa263879f9890b7b8a", "patch": "@@ -1,6 +1,6 @@\n set -ex\n \n curl -fo /usr/local/bin/sccache \\\n-  https://rust-lang-ci2.s3.amazonaws.com/rust-ci-mirror/2018-04-02-sccache-x86_64-unknown-linux-musl\n+  https://rust-lang-ci-mirrors.s3-us-west-1.amazonaws.com/rustc/2018-04-02-sccache-x86_64-unknown-linux-musl\n \n chmod +x /usr/local/bin/sccache"}, {"sha": "69c8d2e3099ab9bdf70e8dc8894495fe011b6d68", "filename": "src/ci/install-awscli.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6092519e44a09cbac73fb6aa263879f9890b7b8a/src%2Fci%2Finstall-awscli.sh", "raw_url": "https://github.com/rust-lang/rust/raw/6092519e44a09cbac73fb6aa263879f9890b7b8a/src%2Fci%2Finstall-awscli.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Finstall-awscli.sh?ref=6092519e44a09cbac73fb6aa263879f9890b7b8a", "patch": "@@ -16,7 +16,7 @@\n set -euo pipefail\n IFS=$'\\n\\t'\n \n-MIRROR=\"https://rust-lang-ci2.s3.amazonaws.com/rust-ci-mirror/2019-07-27-awscli.tar\"\n+MIRROR=\"https://rust-lang-ci-mirrors.s3-us-west-1.amazonaws.com/rustc/2019-07-27-awscli.tar\"\n DEPS_DIR=\"/tmp/awscli-deps\"\n \n pip=\"pip\""}]}