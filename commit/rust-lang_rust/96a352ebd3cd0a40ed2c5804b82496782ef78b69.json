{"sha": "96a352ebd3cd0a40ed2c5804b82496782ef78b69", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk2YTM1MmViZDNjZDBhNDBlZDJjNTgwNGI4MjQ5Njc4MmVmNzhiNjk=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2020-04-21T22:58:52Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2020-04-23T14:18:50Z"}, "message": "Add UI tests for new rustdoc lint", "tree": {"sha": "eb82a45e16c48613b23a68f496e3be5fe624faef", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/eb82a45e16c48613b23a68f496e3be5fe624faef"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/96a352ebd3cd0a40ed2c5804b82496782ef78b69", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/96a352ebd3cd0a40ed2c5804b82496782ef78b69", "html_url": "https://github.com/rust-lang/rust/commit/96a352ebd3cd0a40ed2c5804b82496782ef78b69", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/96a352ebd3cd0a40ed2c5804b82496782ef78b69/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c687d0490e5648c107b8de5fefb96b521ae889d9", "url": "https://api.github.com/repos/rust-lang/rust/commits/c687d0490e5648c107b8de5fefb96b521ae889d9", "html_url": "https://github.com/rust-lang/rust/commit/c687d0490e5648c107b8de5fefb96b521ae889d9"}], "stats": {"total": 493, "additions": 493, "deletions": 0}, "files": [{"sha": "c4140bbb70a784f8290239b337f367fed4151279", "filename": "src/test/rustdoc-ui/check-attr-test.rs", "status": "added", "additions": 38, "deletions": 0, "changes": 38, "blob_url": "https://github.com/rust-lang/rust/blob/96a352ebd3cd0a40ed2c5804b82496782ef78b69/src%2Ftest%2Frustdoc-ui%2Fcheck-attr-test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/96a352ebd3cd0a40ed2c5804b82496782ef78b69/src%2Ftest%2Frustdoc-ui%2Fcheck-attr-test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Fcheck-attr-test.rs?ref=96a352ebd3cd0a40ed2c5804b82496782ef78b69", "patch": "@@ -0,0 +1,38 @@\n+// compile-flags:--test\n+\n+#![deny(invalid_codeblock_attribute)]\n+\n+/// foo\n+///\n+/// ```compile-fail,compilefail,comPile_fail\n+/// boo\n+/// ```\n+pub fn foo() {}\n+\n+/// bar\n+///\n+/// ```should-panic,shouldpanic,shOuld_panic\n+/// boo\n+/// ```\n+pub fn bar() {}\n+\n+/// foobar\n+///\n+/// ```no-run,norun,nO_run\n+/// boo\n+/// ```\n+pub fn foobar() {}\n+\n+/// barfoo\n+///\n+/// ```allow-fail,allowfail,allOw_fail\n+/// boo\n+/// ```\n+pub fn barfoo() {}\n+\n+/// b\n+///\n+/// ```test-harness,testharness,tesT_harness\n+/// boo\n+/// ```\n+pub fn b() {}"}, {"sha": "45a2d6ec15e7d5437fdb13cdbc206d8a0f6924e8", "filename": "src/test/rustdoc-ui/check-attr-test.stderr", "status": "added", "additions": 187, "deletions": 0, "changes": 187, "blob_url": "https://github.com/rust-lang/rust/blob/96a352ebd3cd0a40ed2c5804b82496782ef78b69/src%2Ftest%2Frustdoc-ui%2Fcheck-attr-test.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/96a352ebd3cd0a40ed2c5804b82496782ef78b69/src%2Ftest%2Frustdoc-ui%2Fcheck-attr-test.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Fcheck-attr-test.stderr?ref=96a352ebd3cd0a40ed2c5804b82496782ef78b69", "patch": "@@ -0,0 +1,187 @@\n+error: unknown attribute `compile-fail`. Did you mean `compile_fail`?\n+ --> $DIR/check-attr-test.rs:5:1\n+  |\n+5 | / /// foo\n+6 | | ///\n+7 | | /// ```compile-fail,compilefail,comPile_fail\n+8 | | /// boo\n+9 | | /// ```\n+  | |_______^\n+  |\n+note: the lint level is defined here\n+ --> $DIR/check-attr-test.rs:3:9\n+  |\n+3 | #![deny(invalid_codeblock_attribute)]\n+  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+  = help: the code block will either not be tested if not marked as a rust one or won't fail if it compiles successfully\n+\n+error: unknown attribute `compilefail`. Did you mean `compile_fail`?\n+ --> $DIR/check-attr-test.rs:5:1\n+  |\n+5 | / /// foo\n+6 | | ///\n+7 | | /// ```compile-fail,compilefail,comPile_fail\n+8 | | /// boo\n+9 | | /// ```\n+  | |_______^\n+  |\n+  = help: the code block will either not be tested if not marked as a rust one or won't fail if it compiles successfully\n+\n+error: unknown attribute `comPile_fail`. Did you mean `compile_fail`?\n+ --> $DIR/check-attr-test.rs:5:1\n+  |\n+5 | / /// foo\n+6 | | ///\n+7 | | /// ```compile-fail,compilefail,comPile_fail\n+8 | | /// boo\n+9 | | /// ```\n+  | |_______^\n+  |\n+  = help: the code block will either not be tested if not marked as a rust one or won't fail if it compiles successfully\n+\n+error: unknown attribute `should-panic`. Did you mean `should_panic`?\n+  --> $DIR/check-attr-test.rs:12:1\n+   |\n+12 | / /// bar\n+13 | | ///\n+14 | | /// ```should-panic,shouldpanic,shOuld_panic\n+15 | | /// boo\n+16 | | /// ```\n+   | |_______^\n+   |\n+   = help: the code block will either not be tested if not marked as a rust one or won't fail if it doesn't panic when running\n+\n+error: unknown attribute `shouldpanic`. Did you mean `should_panic`?\n+  --> $DIR/check-attr-test.rs:12:1\n+   |\n+12 | / /// bar\n+13 | | ///\n+14 | | /// ```should-panic,shouldpanic,shOuld_panic\n+15 | | /// boo\n+16 | | /// ```\n+   | |_______^\n+   |\n+   = help: the code block will either not be tested if not marked as a rust one or won't fail if it doesn't panic when running\n+\n+error: unknown attribute `shOuld_panic`. Did you mean `should_panic`?\n+  --> $DIR/check-attr-test.rs:12:1\n+   |\n+12 | / /// bar\n+13 | | ///\n+14 | | /// ```should-panic,shouldpanic,shOuld_panic\n+15 | | /// boo\n+16 | | /// ```\n+   | |_______^\n+   |\n+   = help: the code block will either not be tested if not marked as a rust one or won't fail if it doesn't panic when running\n+\n+error: unknown attribute `no-run`. Did you mean `no_run`?\n+  --> $DIR/check-attr-test.rs:19:1\n+   |\n+19 | / /// foobar\n+20 | | ///\n+21 | | /// ```no-run,norun,nO_run\n+22 | | /// boo\n+23 | | /// ```\n+   | |_______^\n+   |\n+   = help: the code block will either not be tested if not marked as a rust one or will be run (which you might not want)\n+\n+error: unknown attribute `norun`. Did you mean `no_run`?\n+  --> $DIR/check-attr-test.rs:19:1\n+   |\n+19 | / /// foobar\n+20 | | ///\n+21 | | /// ```no-run,norun,nO_run\n+22 | | /// boo\n+23 | | /// ```\n+   | |_______^\n+   |\n+   = help: the code block will either not be tested if not marked as a rust one or will be run (which you might not want)\n+\n+error: unknown attribute `nO_run`. Did you mean `no_run`?\n+  --> $DIR/check-attr-test.rs:19:1\n+   |\n+19 | / /// foobar\n+20 | | ///\n+21 | | /// ```no-run,norun,nO_run\n+22 | | /// boo\n+23 | | /// ```\n+   | |_______^\n+   |\n+   = help: the code block will either not be tested if not marked as a rust one or will be run (which you might not want)\n+\n+error: unknown attribute `allow-fail`. Did you mean `allow_fail`?\n+  --> $DIR/check-attr-test.rs:26:1\n+   |\n+26 | / /// barfoo\n+27 | | ///\n+28 | | /// ```allow-fail,allowfail,allOw_fail\n+29 | | /// boo\n+30 | | /// ```\n+   | |_______^\n+   |\n+   = help: the code block will either not be tested if not marked as a rust one or will be run (which you might not want)\n+\n+error: unknown attribute `allowfail`. Did you mean `allow_fail`?\n+  --> $DIR/check-attr-test.rs:26:1\n+   |\n+26 | / /// barfoo\n+27 | | ///\n+28 | | /// ```allow-fail,allowfail,allOw_fail\n+29 | | /// boo\n+30 | | /// ```\n+   | |_______^\n+   |\n+   = help: the code block will either not be tested if not marked as a rust one or will be run (which you might not want)\n+\n+error: unknown attribute `allOw_fail`. Did you mean `allow_fail`?\n+  --> $DIR/check-attr-test.rs:26:1\n+   |\n+26 | / /// barfoo\n+27 | | ///\n+28 | | /// ```allow-fail,allowfail,allOw_fail\n+29 | | /// boo\n+30 | | /// ```\n+   | |_______^\n+   |\n+   = help: the code block will either not be tested if not marked as a rust one or will be run (which you might not want)\n+\n+error: unknown attribute `test-harness`. Did you mean `test_harness`?\n+  --> $DIR/check-attr-test.rs:33:1\n+   |\n+33 | / /// b\n+34 | | ///\n+35 | | /// ```test-harness,testharness,tesT_harness\n+36 | | /// boo\n+37 | | /// ```\n+   | |_______^\n+   |\n+   = help: the code block will either not be tested if not marked as a rust one or the code will be wrapped inside a main function\n+\n+error: unknown attribute `testharness`. Did you mean `test_harness`?\n+  --> $DIR/check-attr-test.rs:33:1\n+   |\n+33 | / /// b\n+34 | | ///\n+35 | | /// ```test-harness,testharness,tesT_harness\n+36 | | /// boo\n+37 | | /// ```\n+   | |_______^\n+   |\n+   = help: the code block will either not be tested if not marked as a rust one or the code will be wrapped inside a main function\n+\n+error: unknown attribute `tesT_harness`. Did you mean `test_harness`?\n+  --> $DIR/check-attr-test.rs:33:1\n+   |\n+33 | / /// b\n+34 | | ///\n+35 | | /// ```test-harness,testharness,tesT_harness\n+36 | | /// boo\n+37 | | /// ```\n+   | |_______^\n+   |\n+   = help: the code block will either not be tested if not marked as a rust one or the code will be wrapped inside a main function\n+\n+error: aborting due to 15 previous errors\n+"}, {"sha": "a93ec291319071fa3f588579daadb096d2b39725", "filename": "src/test/rustdoc-ui/check-attr.rs", "status": "added", "additions": 51, "deletions": 0, "changes": 51, "blob_url": "https://github.com/rust-lang/rust/blob/96a352ebd3cd0a40ed2c5804b82496782ef78b69/src%2Ftest%2Frustdoc-ui%2Fcheck-attr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/96a352ebd3cd0a40ed2c5804b82496782ef78b69/src%2Ftest%2Frustdoc-ui%2Fcheck-attr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Fcheck-attr.rs?ref=96a352ebd3cd0a40ed2c5804b82496782ef78b69", "patch": "@@ -0,0 +1,51 @@\n+#![deny(invalid_codeblock_attribute)]\n+\n+/// foo\n+//~^ ERROR\n+//~^^ ERROR\n+//~^^^ ERROR\n+///\n+/// ```compile-fail,compilefail,comPile_fail\n+/// boo\n+/// ```\n+pub fn foo() {}\n+\n+/// bar\n+//~^ ERROR\n+//~^^ ERROR\n+//~^^^ ERROR\n+///\n+/// ```should-panic,shouldpanic,sHould_panic\n+/// boo\n+/// ```\n+pub fn bar() {}\n+\n+/// foobar\n+//~^ ERROR\n+//~^^ ERROR\n+//~^^^ ERROR\n+///\n+/// ```no-run,norun,no_Run\n+/// boo\n+/// ```\n+pub fn foobar() {}\n+\n+/// barfoo\n+//~^ ERROR\n+//~^^ ERROR\n+//~^^^ ERROR\n+///\n+/// ```allow-fail,allowfail,alLow_fail\n+/// boo\n+/// ```\n+pub fn barfoo() {}\n+\n+/// b\n+//~^ ERROR\n+//~^^ ERROR\n+//~^^^ ERROR\n+///\n+/// ```test-harness,testharness,teSt_harness\n+/// boo\n+/// ```\n+pub fn b() {}"}, {"sha": "5d6939bd09205982b29c837e09e276b0c9fb9226", "filename": "src/test/rustdoc-ui/check-attr.stderr", "status": "added", "additions": 217, "deletions": 0, "changes": 217, "blob_url": "https://github.com/rust-lang/rust/blob/96a352ebd3cd0a40ed2c5804b82496782ef78b69/src%2Ftest%2Frustdoc-ui%2Fcheck-attr.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/96a352ebd3cd0a40ed2c5804b82496782ef78b69/src%2Ftest%2Frustdoc-ui%2Fcheck-attr.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Fcheck-attr.stderr?ref=96a352ebd3cd0a40ed2c5804b82496782ef78b69", "patch": "@@ -0,0 +1,217 @@\n+error: unknown attribute `compile-fail`. Did you mean `compile_fail`?\n+  --> $DIR/check-attr.rs:3:1\n+   |\n+LL | / /// foo\n+LL | |\n+LL | |\n+LL | |\n+...  |\n+LL | | /// boo\n+LL | | /// ```\n+   | |_______^\n+   |\n+note: the lint level is defined here\n+  --> $DIR/check-attr.rs:1:9\n+   |\n+LL | #![deny(invalid_codeblock_attribute)]\n+   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   = help: the code block will either not be tested if not marked as a rust one or won't fail if it compiles successfully\n+\n+error: unknown attribute `compilefail`. Did you mean `compile_fail`?\n+  --> $DIR/check-attr.rs:3:1\n+   |\n+LL | / /// foo\n+LL | |\n+LL | |\n+LL | |\n+...  |\n+LL | | /// boo\n+LL | | /// ```\n+   | |_______^\n+   |\n+   = help: the code block will either not be tested if not marked as a rust one or won't fail if it compiles successfully\n+\n+error: unknown attribute `comPile_fail`. Did you mean `compile_fail`?\n+  --> $DIR/check-attr.rs:3:1\n+   |\n+LL | / /// foo\n+LL | |\n+LL | |\n+LL | |\n+...  |\n+LL | | /// boo\n+LL | | /// ```\n+   | |_______^\n+   |\n+   = help: the code block will either not be tested if not marked as a rust one or won't fail if it compiles successfully\n+\n+error: unknown attribute `should-panic`. Did you mean `should_panic`?\n+  --> $DIR/check-attr.rs:13:1\n+   |\n+LL | / /// bar\n+LL | |\n+LL | |\n+LL | |\n+...  |\n+LL | | /// boo\n+LL | | /// ```\n+   | |_______^\n+   |\n+   = help: the code block will either not be tested if not marked as a rust one or won't fail if it doesn't panic when running\n+\n+error: unknown attribute `shouldpanic`. Did you mean `should_panic`?\n+  --> $DIR/check-attr.rs:13:1\n+   |\n+LL | / /// bar\n+LL | |\n+LL | |\n+LL | |\n+...  |\n+LL | | /// boo\n+LL | | /// ```\n+   | |_______^\n+   |\n+   = help: the code block will either not be tested if not marked as a rust one or won't fail if it doesn't panic when running\n+\n+error: unknown attribute `sHould_panic`. Did you mean `should_panic`?\n+  --> $DIR/check-attr.rs:13:1\n+   |\n+LL | / /// bar\n+LL | |\n+LL | |\n+LL | |\n+...  |\n+LL | | /// boo\n+LL | | /// ```\n+   | |_______^\n+   |\n+   = help: the code block will either not be tested if not marked as a rust one or won't fail if it doesn't panic when running\n+\n+error: unknown attribute `no-run`. Did you mean `no_run`?\n+  --> $DIR/check-attr.rs:23:1\n+   |\n+LL | / /// foobar\n+LL | |\n+LL | |\n+LL | |\n+...  |\n+LL | | /// boo\n+LL | | /// ```\n+   | |_______^\n+   |\n+   = help: the code block will either not be tested if not marked as a rust one or will be run (which you might not want)\n+\n+error: unknown attribute `norun`. Did you mean `no_run`?\n+  --> $DIR/check-attr.rs:23:1\n+   |\n+LL | / /// foobar\n+LL | |\n+LL | |\n+LL | |\n+...  |\n+LL | | /// boo\n+LL | | /// ```\n+   | |_______^\n+   |\n+   = help: the code block will either not be tested if not marked as a rust one or will be run (which you might not want)\n+\n+error: unknown attribute `no_Run`. Did you mean `no_run`?\n+  --> $DIR/check-attr.rs:23:1\n+   |\n+LL | / /// foobar\n+LL | |\n+LL | |\n+LL | |\n+...  |\n+LL | | /// boo\n+LL | | /// ```\n+   | |_______^\n+   |\n+   = help: the code block will either not be tested if not marked as a rust one or will be run (which you might not want)\n+\n+error: unknown attribute `allow-fail`. Did you mean `allow_fail`?\n+  --> $DIR/check-attr.rs:33:1\n+   |\n+LL | / /// barfoo\n+LL | |\n+LL | |\n+LL | |\n+...  |\n+LL | | /// boo\n+LL | | /// ```\n+   | |_______^\n+   |\n+   = help: the code block will either not be tested if not marked as a rust one or will be run (which you might not want)\n+\n+error: unknown attribute `allowfail`. Did you mean `allow_fail`?\n+  --> $DIR/check-attr.rs:33:1\n+   |\n+LL | / /// barfoo\n+LL | |\n+LL | |\n+LL | |\n+...  |\n+LL | | /// boo\n+LL | | /// ```\n+   | |_______^\n+   |\n+   = help: the code block will either not be tested if not marked as a rust one or will be run (which you might not want)\n+\n+error: unknown attribute `alLow_fail`. Did you mean `allow_fail`?\n+  --> $DIR/check-attr.rs:33:1\n+   |\n+LL | / /// barfoo\n+LL | |\n+LL | |\n+LL | |\n+...  |\n+LL | | /// boo\n+LL | | /// ```\n+   | |_______^\n+   |\n+   = help: the code block will either not be tested if not marked as a rust one or will be run (which you might not want)\n+\n+error: unknown attribute `test-harness`. Did you mean `test_harness`?\n+  --> $DIR/check-attr.rs:43:1\n+   |\n+LL | / /// b\n+LL | |\n+LL | |\n+LL | |\n+...  |\n+LL | | /// boo\n+LL | | /// ```\n+   | |_______^\n+   |\n+   = help: the code block will either not be tested if not marked as a rust one or the code will be wrapped inside a main function\n+\n+error: unknown attribute `testharness`. Did you mean `test_harness`?\n+  --> $DIR/check-attr.rs:43:1\n+   |\n+LL | / /// b\n+LL | |\n+LL | |\n+LL | |\n+...  |\n+LL | | /// boo\n+LL | | /// ```\n+   | |_______^\n+   |\n+   = help: the code block will either not be tested if not marked as a rust one or the code will be wrapped inside a main function\n+\n+error: unknown attribute `teSt_harness`. Did you mean `test_harness`?\n+  --> $DIR/check-attr.rs:43:1\n+   |\n+LL | / /// b\n+LL | |\n+LL | |\n+LL | |\n+...  |\n+LL | | /// boo\n+LL | | /// ```\n+   | |_______^\n+   |\n+   = help: the code block will either not be tested if not marked as a rust one or the code will be wrapped inside a main function\n+\n+error: aborting due to 15 previous errors\n+"}]}