{"sha": "ce498e6b33168eabb4f4e1a343193b17d55c5257", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNlNDk4ZTZiMzMxNjhlYWJiNGY0ZTFhMzQzMTkzYjE3ZDU1YzUyNTc=", "commit": {"author": {"name": "Nick Cameron", "email": "nrc@ncameron.org", "date": "2015-11-16T18:53:09Z"}, "committer": {"name": "Nick Cameron", "email": "nrc@ncameron.org", "date": "2015-11-16T18:53:09Z"}, "message": "Merge pull request #589 from rust-lang-nursery/rustup\n\nSlightly awkward rustup", "tree": {"sha": "a1862ec52cc189c2f41f4fef132ec9056ddbb0c1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a1862ec52cc189c2f41f4fef132ec9056ddbb0c1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ce498e6b33168eabb4f4e1a343193b17d55c5257", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ce498e6b33168eabb4f4e1a343193b17d55c5257", "html_url": "https://github.com/rust-lang/rust/commit/ce498e6b33168eabb4f4e1a343193b17d55c5257", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ce498e6b33168eabb4f4e1a343193b17d55c5257/comments", "author": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f88345c431d7ace78a0b7db506a32b39ebc91d30", "url": "https://api.github.com/repos/rust-lang/rust/commits/f88345c431d7ace78a0b7db506a32b39ebc91d30", "html_url": "https://github.com/rust-lang/rust/commit/f88345c431d7ace78a0b7db506a32b39ebc91d30"}, {"sha": "56a765ef0547b9eec3e82f5ec15e4501854f1757", "url": "https://api.github.com/repos/rust-lang/rust/commits/56a765ef0547b9eec3e82f5ec15e4501854f1757", "html_url": "https://github.com/rust-lang/rust/commit/56a765ef0547b9eec3e82f5ec15e4501854f1757"}], "stats": {"total": 81, "additions": 41, "deletions": 40}, "files": [{"sha": "23a75bfb54732b6f2e1c560706d1835ab597dd14", "filename": "Cargo.lock", "status": "modified", "additions": 33, "deletions": 28, "changes": 61, "blob_url": "https://github.com/rust-lang/rust/blob/ce498e6b33168eabb4f4e1a343193b17d55c5257/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/ce498e6b33168eabb4f4e1a343193b17d55c5257/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=ce498e6b33168eabb4f4e1a343193b17d55c5257", "patch": "@@ -3,24 +3,24 @@ name = \"rustfmt\"\n version = \"0.0.1\"\n dependencies = [\n  \"diff 0.1.7 (git+https://github.com/utkarshkukreti/diff.rs.git)\",\n- \"env_logger 0.3.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"env_logger 0.3.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"getopts 0.2.14 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"log 0.3.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"log 0.3.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"regex 0.1.41 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rustc-serialize 0.3.16 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"strings 0.0.1 (git+https://github.com/nrc/strings.rs.git)\",\n- \"syntex_syntax 0.18.0 (git+https://github.com/serde-rs/syntex)\",\n- \"term 0.2.12 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"syntex_syntax 0.21.0 (git+https://github.com/serde-rs/syntex)\",\n+ \"term 0.2.13 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"toml 0.1.23 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"unicode-segmentation 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n name = \"aho-corasick\"\n-version = \"0.3.2\"\n+version = \"0.3.4\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"memchr 0.1.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"memchr 0.1.7 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -35,10 +35,10 @@ source = \"git+https://github.com/utkarshkukreti/diff.rs.git#6edb9454bf4127087ace\n \n [[package]]\n name = \"env_logger\"\n-version = \"0.3.1\"\n+version = \"0.3.2\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"log 0.3.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"log 0.3.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"regex 0.1.41 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n@@ -49,41 +49,46 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]\n name = \"kernel32-sys\"\n-version = \"0.1.4\"\n+version = \"0.2.1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"winapi 0.2.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"winapi 0.2.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"winapi-build 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n name = \"libc\"\n-version = \"0.1.10\"\n+version = \"0.1.12\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+\n+[[package]]\n+name = \"libc\"\n+version = \"0.2.2\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]\n name = \"log\"\n-version = \"0.3.2\"\n+version = \"0.3.3\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"libc 0.1.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.1.12 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n name = \"memchr\"\n-version = \"0.1.6\"\n+version = \"0.1.7\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"libc 0.1.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n name = \"regex\"\n version = \"0.1.41\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"aho-corasick 0.3.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"memchr 0.1.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"aho-corasick 0.3.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"memchr 0.1.7 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"regex-syntax 0.2.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n@@ -100,31 +105,31 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n [[package]]\n name = \"strings\"\n version = \"0.0.1\"\n-source = \"git+https://github.com/nrc/strings.rs.git#78ba5d802102e4f46f03c5eb835a53106a4d35f7\"\n+source = \"git+https://github.com/nrc/strings.rs.git#d33d75a7c22522c76f2306b16b238e363de45af4\"\n dependencies = [\n- \"log 0.3.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"log 0.3.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n name = \"syntex_syntax\"\n-version = \"0.18.0\"\n-source = \"git+https://github.com/serde-rs/syntex#176ca5d8add606fac8d503b10c89ddb82f02d92b\"\n+version = \"0.21.0\"\n+source = \"git+https://github.com/serde-rs/syntex#069fe5d5e8cc8132dc3cb97099511240b9d4facc\"\n dependencies = [\n  \"bitflags 0.3.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.1.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"log 0.3.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"log 0.3.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rustc-serialize 0.3.16 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"term 0.2.12 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"term 0.2.13 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"unicode-xid 0.0.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n name = \"term\"\n-version = \"0.2.12\"\n+version = \"0.2.13\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"kernel32-sys 0.1.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"winapi 0.2.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"kernel32-sys 0.2.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"winapi 0.2.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -147,7 +152,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]\n name = \"winapi\"\n-version = \"0.2.4\"\n+version = \"0.2.5\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]"}, {"sha": "cbe8af541f3add6d809123035e8ae7a658658d74", "filename": "src/items.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ce498e6b33168eabb4f4e1a343193b17d55c5257/src%2Fitems.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ce498e6b33168eabb4f4e1a343193b17d55c5257/src%2Fitems.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fitems.rs?ref=ce498e6b33168eabb4f4e1a343193b17d55c5257", "patch": "@@ -727,14 +727,14 @@ impl<'a> FmtVisitor<'a> {\n             result.push_str(&indent.to_string(self.config));\n         }\n \n-        let variant_body = match *field.node.data {\n+        let variant_body = match field.node.data {\n             ast::VariantData::Tuple(..) |\n             ast::VariantData::Struct(..) => {\n                 // FIXME: Should limit the width, as we have a trailing comma\n                 self.format_struct(\"\",\n                                    field.node.name,\n                                    ast::Visibility::Inherited,\n-                                   &*field.node.data,\n+                                   &field.node.data,\n                                    None,\n                                    field.span,\n                                    indent)"}, {"sha": "4e28fd393f42b73346cfbade27e1c650d76b5e61", "filename": "src/macros.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ce498e6b33168eabb4f4e1a343193b17d55c5257/src%2Fmacros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ce498e6b33168eabb4f4e1a343193b17d55c5257/src%2Fmacros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fmacros.rs?ref=ce498e6b33168eabb4f4e1a343193b17d55c5257", "patch": "@@ -77,7 +77,7 @@ pub fn rewrite_macro(mac: &ast::Mac,\n     let mut expr_vec = Vec::new();\n \n     loop {\n-        expr_vec.push(match parser.parse_expr_nopanic() {\n+        expr_vec.push(match parser.parse_expr() {\n             Ok(expr) => expr,\n             Err(..) => return None,\n         });"}, {"sha": "3e7a11bad410d2e83d79ea7244c74c760a995de4", "filename": "src/patterns.rs", "status": "modified", "additions": 4, "deletions": 8, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/ce498e6b33168eabb4f4e1a343193b17d55c5257/src%2Fpatterns.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ce498e6b33168eabb4f4e1a343193b17d55c5257/src%2Fpatterns.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fpatterns.rs?ref=ce498e6b33168eabb4f4e1a343193b17d55c5257", "patch": "@@ -15,7 +15,7 @@ use lists::{format_item_list, itemize_list};\n use expr::{rewrite_unary_prefix, rewrite_pair, rewrite_tuple};\n use types::rewrite_path;\n \n-use syntax::ast::{PatWildKind, BindingMode, Pat, Pat_};\n+use syntax::ast::{BindingMode, Pat, Pat_};\n \n // FIXME(#18): implement pattern formatting.\n impl Rewrite for Pat {\n@@ -33,13 +33,9 @@ impl Rewrite for Pat {\n                 let result = format!(\"{}{}{}\", prefix, mut_infix, ident.node);\n                 wrap_str(result, context.config.max_width, width, offset)\n             }\n-            Pat_::PatWild(kind) => {\n-                let result = match kind {\n-                    PatWildKind::PatWildSingle => \"_\",\n-                    PatWildKind::PatWildMulti => \"..\",\n-                };\n-                if result.len() <= width {\n-                    Some(result.to_owned())\n+            Pat_::PatWild => {\n+                if 1 <= width {\n+                    Some(\"_\".to_owned())\n                 } else {\n                     None\n                 }"}, {"sha": "f19ff1f7e8bd4c1037e95805f5429a736ee1b637", "filename": "src/visitor.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ce498e6b33168eabb4f4e1a343193b17d55c5257/src%2Fvisitor.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ce498e6b33168eabb4f4e1a343193b17d55c5257/src%2Fvisitor.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fvisitor.rs?ref=ce498e6b33168eabb4f4e1a343193b17d55c5257", "patch": "@@ -224,7 +224,7 @@ impl<'a> FmtVisitor<'a> {\n                                                  item.span,\n                                                  indent)\n                                   .map(|s| {\n-                                      match **def {\n+                                      match *def {\n                                           ast::VariantData::Tuple(..) => s + \";\",\n                                           _ => s,\n                                       }"}]}