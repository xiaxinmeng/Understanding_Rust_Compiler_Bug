{"sha": "d33cab1b1fa4943a4bf37baa8c7421e672df10c7", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQzM2NhYjFiMWZhNDk0M2E0YmYzN2JhYThjNzQyMWU2NzJkZjEwYzc=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-07-22T00:29:08Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-07-22T00:29:08Z"}, "message": "Auto merge of #27172 - alexcrichton:snapshots, r=brson\n\nEnables bootstrapping a 32-bit MSVC host compiler!\r\n\r\nCloses #26602", "tree": {"sha": "bd623d33a0795fcfeda8e8de7ea5135120714013", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bd623d33a0795fcfeda8e8de7ea5135120714013"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d33cab1b1fa4943a4bf37baa8c7421e672df10c7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d33cab1b1fa4943a4bf37baa8c7421e672df10c7", "html_url": "https://github.com/rust-lang/rust/commit/d33cab1b1fa4943a4bf37baa8c7421e672df10c7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d33cab1b1fa4943a4bf37baa8c7421e672df10c7/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "39a780dcbe5f64a1fa51a5a36e2acdf41b04671f", "url": "https://api.github.com/repos/rust-lang/rust/commits/39a780dcbe5f64a1fa51a5a36e2acdf41b04671f", "html_url": "https://github.com/rust-lang/rust/commit/39a780dcbe5f64a1fa51a5a36e2acdf41b04671f"}, {"sha": "24c5e492751489280f446f4efff1740a6c3e5aa1", "url": "https://api.github.com/repos/rust-lang/rust/commits/24c5e492751489280f446f4efff1740a6c3e5aa1", "html_url": "https://github.com/rust-lang/rust/commit/24c5e492751489280f446f4efff1740a6c3e5aa1"}], "stats": {"total": 44, "additions": 12, "deletions": 32}, "files": [{"sha": "ead0b4259a987cdf4f0357fca67e3305b1e499e7", "filename": "src/liballoc/lib.rs", "status": "modified", "additions": 0, "deletions": 17, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/d33cab1b1fa4943a4bf37baa8c7421e672df10c7/src%2Fliballoc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d33cab1b1fa4943a4bf37baa8c7421e672df10c7/src%2Fliballoc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliballoc%2Flib.rs?ref=d33cab1b1fa4943a4bf37baa8c7421e672df10c7", "patch": "@@ -135,20 +135,3 @@ pub fn oom() -> ! {\n     //                allocate.\n     unsafe { core::intrinsics::abort() }\n }\n-\n-// FIXME(#14344): When linking liballoc with libstd, this library will be linked\n-//                as an rlib (it only exists as an rlib). It turns out that an\n-//                optimized standard library doesn't actually use *any* symbols\n-//                from this library. Everything is inlined and optimized away.\n-//                This means that linkers will actually omit the object for this\n-//                file, even though it may be needed in the future.\n-//\n-//                To get around this for now, we define a dummy symbol which\n-//                will never get inlined so the stdlib can call it. The stdlib's\n-//                reference to this symbol will cause this library's object file\n-//                to get linked in to libstd successfully (the linker won't\n-//                optimize it out).\n-#[doc(hidden)]\n-#[unstable(feature = \"issue_14344_fixme\")]\n-#[cfg(stage0)]\n-pub fn fixme_14344_be_sure_to_link_to_collections() {}"}, {"sha": "1f94838499218ee1bc22168ed3f7024c5e816c4f", "filename": "src/libcollections/lib.rs", "status": "modified", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/d33cab1b1fa4943a4bf37baa8c7421e672df10c7/src%2Flibcollections%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d33cab1b1fa4943a4bf37baa8c7421e672df10c7/src%2Flibcollections%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Flib.rs?ref=d33cab1b1fa4943a4bf37baa8c7421e672df10c7", "patch": "@@ -133,13 +133,6 @@ pub mod btree_set {\n     pub use btree::set::*;\n }\n \n-\n-// FIXME(#14344) this shouldn't be necessary\n-#[doc(hidden)]\n-#[unstable(feature = \"issue_14344_fixme\")]\n-#[cfg(stage0)]\n-pub fn fixme_14344_be_sure_to_link_to_collections() {}\n-\n #[cfg(not(test))]\n mod std {\n     pub use core::ops;      // RangeFull"}, {"sha": "cc58952be600a341451a12c81af1b00b9f4379c3", "filename": "src/libcollections/string.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/d33cab1b1fa4943a4bf37baa8c7421e672df10c7/src%2Flibcollections%2Fstring.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d33cab1b1fa4943a4bf37baa8c7421e672df10c7/src%2Flibcollections%2Fstring.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fstring.rs?ref=d33cab1b1fa4943a4bf37baa8c7421e672df10c7", "patch": "@@ -979,23 +979,20 @@ impl ops::Index<ops::RangeFull> for String {\n     }\n }\n \n-#[cfg(not(stage0))]\n #[stable(feature = \"derefmut_for_string\", since = \"1.2.0\")]\n impl ops::IndexMut<ops::Range<usize>> for String {\n     #[inline]\n     fn index_mut(&mut self, index: ops::Range<usize>) -> &mut str {\n         &mut self[..][index]\n     }\n }\n-#[cfg(not(stage0))]\n #[stable(feature = \"derefmut_for_string\", since = \"1.2.0\")]\n impl ops::IndexMut<ops::RangeTo<usize>> for String {\n     #[inline]\n     fn index_mut(&mut self, index: ops::RangeTo<usize>) -> &mut str {\n         &mut self[..][index]\n     }\n }\n-#[cfg(not(stage0))]\n #[stable(feature = \"derefmut_for_string\", since = \"1.2.0\")]\n impl ops::IndexMut<ops::RangeFrom<usize>> for String {\n     #[inline]"}, {"sha": "c229df34ccf8918ab1f51c9c16ffd35d92e5df43", "filename": "src/liblibc/lib.rs", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/d33cab1b1fa4943a4bf37baa8c7421e672df10c7/src%2Fliblibc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d33cab1b1fa4943a4bf37baa8c7421e672df10c7/src%2Fliblibc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliblibc%2Flib.rs?ref=d33cab1b1fa4943a4bf37baa8c7421e672df10c7", "patch": "@@ -6535,8 +6535,4 @@ pub mod funcs {\n     }\n }\n \n-#[doc(hidden)]\n-#[cfg(stage0)]\n-pub fn issue_14344_workaround() {} // FIXME #14344 force linkage to happen correctly\n-\n #[test] fn work_on_windows() { } // FIXME #10872 needed for a happy windows"}, {"sha": "7550b7ce6c35259f434722d6e703ed631854a066", "filename": "src/libstd/sys/windows/thread_local.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/d33cab1b1fa4943a4bf37baa8c7421e672df10c7/src%2Flibstd%2Fsys%2Fwindows%2Fthread_local.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d33cab1b1fa4943a4bf37baa8c7421e672df10c7/src%2Flibstd%2Fsys%2Fwindows%2Fthread_local.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwindows%2Fthread_local.rs?ref=d33cab1b1fa4943a4bf37baa8c7421e672df10c7", "patch": "@@ -231,9 +231,12 @@ pub static p_thread_callback: unsafe extern \"system\" fn(LPVOID, DWORD,\n                                                         LPVOID) =\n         on_tls_callback;\n \n-#[cfg(target_env = \"msvc\")]\n+#[cfg(all(target_env = \"msvc\", target_pointer_width = \"64\"))]\n #[link_args = \"/INCLUDE:_tls_used\"]\n extern {}\n+#[cfg(all(target_env = \"msvc\", target_pointer_width = \"32\"))]\n+#[link_args = \"/INCLUDE:__tls_used\"]\n+extern {}\n \n #[allow(warnings)]\n unsafe extern \"system\" fn on_tls_callback(h: LPVOID,"}, {"sha": "cb5790b34f4d365f6ae6a4b51a4493d5ec544189", "filename": "src/snapshots.txt", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/d33cab1b1fa4943a4bf37baa8c7421e672df10c7/src%2Fsnapshots.txt", "raw_url": "https://github.com/rust-lang/rust/raw/d33cab1b1fa4943a4bf37baa8c7421e672df10c7/src%2Fsnapshots.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fsnapshots.txt?ref=d33cab1b1fa4943a4bf37baa8c7421e672df10c7", "patch": "@@ -1,3 +1,11 @@\n+S 2015-07-17 d4432b3\n+  linux-i386 93f6216a35d3bed3cedf244c9aff4cd716336bd9\n+  linux-x86_64 d8f4967fc71a153c925faecf95a7feadf7e463a4\n+  macos-i386 29852c4d4b5a851f16d627856a279cae5bf9bd01\n+  macos-x86_64 1a20259899321062a0325edb1d22990f05d18708\n+  winnt-i386 df50210f41db9a6f2968be5773b8e3bae32bb823\n+  winnt-x86_64 d7774b724988485652781a804bdf8e05d28ead48\n+\n S 2015-05-24 ba0e1cd\n   bitrig-x86_64 2a710e16e3e3ef3760df1f724d66b3af34c1ef3f\n   freebsd-x86_64 370db40613f5c08563ed7e38357826dd42d4e0f8"}]}