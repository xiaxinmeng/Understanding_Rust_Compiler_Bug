{"sha": "13e4f87c4dc9f9caa13141966fd79de560240be9", "node_id": "C_kwDOAAsO6NoAKDEzZTRmODdjNGRjOWY5Y2FhMTMxNDE5NjZmZDc5ZGU1NjAyNDBiZTk", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-06-27T06:06:47Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-06-27T06:06:47Z"}, "message": "Rollup merge of #98530 - davidkna:known-bug-ref, r=Mark-Simulacrum\n\ncompiletest: add issue number param to `known-bug`\n\nI was getting some errors while testing this, but I'm pretty sure that was unrelated to my changes.\n\nCloses #98436\n\n> Basically, instead of `// known-bug`, do `// known-bug #00000` or maybe `// known-bug chalk#00`?\n>\n> From: https://rust-lang.zulipchat.com/#narrow/stream/326866-t-types.2Fnominated/topic/.2398095.3A.20NLL.3A.20unsound.20verification.20of.20higher.20ranked.20outlives.E2.80.A6/near/287258738\n\nI also added an `unknown` escape-hatch because I didn't find corresponding issues for every `// known-bug`.\n\nThe syntax also ended up being `// known-bug: `, because of `set_name_value_directive`.", "tree": {"sha": "704a6a6e5d2d53a2c67fc475b852fd7c29b8b26d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/704a6a6e5d2d53a2c67fc475b852fd7c29b8b26d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/13e4f87c4dc9f9caa13141966fd79de560240be9", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJiuUj4CRBK7hj4Ov3rIwAAhsMIACsVVHB+0OBzvtiZV8HGWvWM\nHpAZt3lIfc1OVNAzbvTX2pWGbrW0gfG4UgA+4k9zVg/f6+hNGX3byXlzpmXPyoW0\nG8xVVRJYLIGmUEU7+XhiQsKyBWZNvTR0QRRi9Y7Ba1m1a4lmlPLVZbGEJ2BLjjD2\nakEf6lQFovyjhHNHPqN6Nu22T99TadGJ3jPB7C2kkfugfmkcDYDLdqgzIAob4OG/\nCZEMbeEAdvuaCLivo2UauUqzZfCzVqLd0OVyLQ3DVNqgEh58rpF2YqU10qIxvRmJ\np9xi9ua72MRBOKWhrz5CRW2MxI81fVqtPJQkYU5H4bEMsxA5NeIUe67aPijuyuI=\n=SNEE\n-----END PGP SIGNATURE-----\n", "payload": "tree 704a6a6e5d2d53a2c67fc475b852fd7c29b8b26d\nparent 43dd0e2424a1086e0d9d649f717b3646da6586b6\nparent 93d3359d37bd4f0c5e4a73617ee554f536582a50\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1656310007 +0200\ncommitter GitHub <noreply@github.com> 1656310007 +0200\n\nRollup merge of #98530 - davidkna:known-bug-ref, r=Mark-Simulacrum\n\ncompiletest: add issue number param to `known-bug`\n\nI was getting some errors while testing this, but I'm pretty sure that was unrelated to my changes.\n\nCloses #98436\n\n> Basically, instead of `// known-bug`, do `// known-bug #00000` or maybe `// known-bug chalk#00`?\n>\n> From: https://rust-lang.zulipchat.com/#narrow/stream/326866-t-types.2Fnominated/topic/.2398095.3A.20NLL.3A.20unsound.20verification.20of.20higher.20ranked.20outlives.E2.80.A6/near/287258738\n\nI also added an `unknown` escape-hatch because I didn't find corresponding issues for every `// known-bug`.\n\nThe syntax also ended up being `// known-bug: `, because of `set_name_value_directive`.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/13e4f87c4dc9f9caa13141966fd79de560240be9", "html_url": "https://github.com/rust-lang/rust/commit/13e4f87c4dc9f9caa13141966fd79de560240be9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/13e4f87c4dc9f9caa13141966fd79de560240be9/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "43dd0e2424a1086e0d9d649f717b3646da6586b6", "url": "https://api.github.com/repos/rust-lang/rust/commits/43dd0e2424a1086e0d9d649f717b3646da6586b6", "html_url": "https://github.com/rust-lang/rust/commit/43dd0e2424a1086e0d9d649f717b3646da6586b6"}, {"sha": "93d3359d37bd4f0c5e4a73617ee554f536582a50", "url": "https://api.github.com/repos/rust-lang/rust/commits/93d3359d37bd4f0c5e4a73617ee554f536582a50", "html_url": "https://github.com/rust-lang/rust/commit/93d3359d37bd4f0c5e4a73617ee554f536582a50"}], "stats": {"total": 56, "additions": 39, "deletions": 17}, "files": [{"sha": "ae5224dbd6fa86c96ab78097517a321dd3663714", "filename": "src/test/ui/chalkify/bugs/async.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/13e4f87c4dc9f9caa13141966fd79de560240be9/src%2Ftest%2Fui%2Fchalkify%2Fbugs%2Fasync.rs", "raw_url": "https://github.com/rust-lang/rust/raw/13e4f87c4dc9f9caa13141966fd79de560240be9/src%2Ftest%2Fui%2Fchalkify%2Fbugs%2Fasync.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fchalkify%2Fbugs%2Fasync.rs?ref=13e4f87c4dc9f9caa13141966fd79de560240be9", "patch": "@@ -1,5 +1,5 @@\n // check-fail\n-// known-bug\n+// known-bug: unknown\n // compile-flags: -Z chalk --edition=2021\n \n fn main() -> () {}"}, {"sha": "14f27aff1ccd85ed71056fff017a3d19813bcb45", "filename": "src/test/ui/generic-associated-types/bugs/issue-80626.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/13e4f87c4dc9f9caa13141966fd79de560240be9/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fbugs%2Fissue-80626.rs", "raw_url": "https://github.com/rust-lang/rust/raw/13e4f87c4dc9f9caa13141966fd79de560240be9/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fbugs%2Fissue-80626.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fbugs%2Fissue-80626.rs?ref=13e4f87c4dc9f9caa13141966fd79de560240be9", "patch": "@@ -1,5 +1,5 @@\n // check-fail\n-// known-bug\n+// known-bug: #80626\n \n // This should pass, but it requires `Sized` to be coinductive.\n "}, {"sha": "fb62c10a9e389acbacbf354dcf0538273c8796d5", "filename": "src/test/ui/generic-associated-types/bugs/issue-86218.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/13e4f87c4dc9f9caa13141966fd79de560240be9/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fbugs%2Fissue-86218.rs", "raw_url": "https://github.com/rust-lang/rust/raw/13e4f87c4dc9f9caa13141966fd79de560240be9/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fbugs%2Fissue-86218.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fbugs%2Fissue-86218.rs?ref=13e4f87c4dc9f9caa13141966fd79de560240be9", "patch": "@@ -1,5 +1,5 @@\n // check-fail\n-// known-bug\n+// known-bug: #86218\n \n // This should pass, but seems to run into a TAIT issue.\n "}, {"sha": "0844d84c34fd31971704b3888084cef8d1eabadc", "filename": "src/test/ui/generic-associated-types/bugs/issue-87735.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/13e4f87c4dc9f9caa13141966fd79de560240be9/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fbugs%2Fissue-87735.rs", "raw_url": "https://github.com/rust-lang/rust/raw/13e4f87c4dc9f9caa13141966fd79de560240be9/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fbugs%2Fissue-87735.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fbugs%2Fissue-87735.rs?ref=13e4f87c4dc9f9caa13141966fd79de560240be9", "patch": "@@ -1,5 +1,5 @@\n // check-fail\n-// known-bug\n+// known-bug: #87735, #88526\n \n // This should pass, but we need an extension of implied bounds (probably).\n "}, {"sha": "a3d00ee03b13e35de1d5bcea892655e3a7b7c578", "filename": "src/test/ui/generic-associated-types/bugs/issue-87748.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/13e4f87c4dc9f9caa13141966fd79de560240be9/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fbugs%2Fissue-87748.rs", "raw_url": "https://github.com/rust-lang/rust/raw/13e4f87c4dc9f9caa13141966fd79de560240be9/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fbugs%2Fissue-87748.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fbugs%2Fissue-87748.rs?ref=13e4f87c4dc9f9caa13141966fd79de560240be9", "patch": "@@ -1,5 +1,5 @@\n // check-fail\n-// known-bug\n+// known-bug: #87748\n \n // This should pass, but unnormalized input args aren't treated as implied.\n "}, {"sha": "efa487d624fd99b3d806bf12979167e65611ad46", "filename": "src/test/ui/generic-associated-types/bugs/issue-87755.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/13e4f87c4dc9f9caa13141966fd79de560240be9/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fbugs%2Fissue-87755.rs", "raw_url": "https://github.com/rust-lang/rust/raw/13e4f87c4dc9f9caa13141966fd79de560240be9/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fbugs%2Fissue-87755.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fbugs%2Fissue-87755.rs?ref=13e4f87c4dc9f9caa13141966fd79de560240be9", "patch": "@@ -1,5 +1,5 @@\n // check-fail\n-// known-bug\n+// known-bug: #87755\n \n // This should pass.\n "}, {"sha": "a8a111c99ef7f572305d31b14ece2af55260b2e5", "filename": "src/test/ui/generic-associated-types/bugs/issue-87803.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/13e4f87c4dc9f9caa13141966fd79de560240be9/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fbugs%2Fissue-87803.rs", "raw_url": "https://github.com/rust-lang/rust/raw/13e4f87c4dc9f9caa13141966fd79de560240be9/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fbugs%2Fissue-87803.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fbugs%2Fissue-87803.rs?ref=13e4f87c4dc9f9caa13141966fd79de560240be9", "patch": "@@ -1,5 +1,5 @@\n // check-fail\n-// known-bug\n+// known-bug: #87803\n \n // This should pass, but using a type alias vs a reference directly\n // changes late-bound -> early-bound."}, {"sha": "5493b9b9391359926e2525f432bccac390e6a0aa", "filename": "src/test/ui/generic-associated-types/bugs/issue-88382.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/13e4f87c4dc9f9caa13141966fd79de560240be9/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fbugs%2Fissue-88382.rs", "raw_url": "https://github.com/rust-lang/rust/raw/13e4f87c4dc9f9caa13141966fd79de560240be9/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fbugs%2Fissue-88382.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fbugs%2Fissue-88382.rs?ref=13e4f87c4dc9f9caa13141966fd79de560240be9", "patch": "@@ -1,5 +1,5 @@\n // check-fail\n-// known-bug\n+// known-bug: #88382\n \n // This should pass, but has a missed normalization due to HRTB.\n "}, {"sha": "f1c3b2269158a8ee7abc879ff4c3416642bbd315", "filename": "src/test/ui/generic-associated-types/bugs/issue-88460.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/13e4f87c4dc9f9caa13141966fd79de560240be9/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fbugs%2Fissue-88460.rs", "raw_url": "https://github.com/rust-lang/rust/raw/13e4f87c4dc9f9caa13141966fd79de560240be9/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fbugs%2Fissue-88460.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fbugs%2Fissue-88460.rs?ref=13e4f87c4dc9f9caa13141966fd79de560240be9", "patch": "@@ -1,5 +1,5 @@\n // check-fail\n-// known-bug\n+// known-bug: #88460\n \n // This should pass, but has a missed normalization due to HRTB.\n "}, {"sha": "15363ad04bfe7027e28b596fbf1568b5d90e267a", "filename": "src/test/ui/generic-associated-types/bugs/issue-88526.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/13e4f87c4dc9f9caa13141966fd79de560240be9/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fbugs%2Fissue-88526.rs", "raw_url": "https://github.com/rust-lang/rust/raw/13e4f87c4dc9f9caa13141966fd79de560240be9/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fbugs%2Fissue-88526.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fbugs%2Fissue-88526.rs?ref=13e4f87c4dc9f9caa13141966fd79de560240be9", "patch": "@@ -1,5 +1,5 @@\n // check-fail\n-// known-bug\n+// known-bug: #88526\n \n // This should pass, but requires more logic.\n "}, {"sha": "79c28b0d22172007dbc8ad81bdaceb70a46823c3", "filename": "src/test/ui/generic-associated-types/bugs/issue-89008.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/13e4f87c4dc9f9caa13141966fd79de560240be9/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fbugs%2Fissue-89008.rs", "raw_url": "https://github.com/rust-lang/rust/raw/13e4f87c4dc9f9caa13141966fd79de560240be9/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fbugs%2Fissue-89008.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fbugs%2Fissue-89008.rs?ref=13e4f87c4dc9f9caa13141966fd79de560240be9", "patch": "@@ -1,6 +1,6 @@\n // check-fail\n // edition:2021\n-// known-bug\n+// known-bug: #88908\n \n // This should pass, but seems to run into a TAIT bug.\n "}, {"sha": "d8edbe7e56b51b9804caa7cf82d03c4e9ab3f1e9", "filename": "src/test/ui/hrtb/issue-95034.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/13e4f87c4dc9f9caa13141966fd79de560240be9/src%2Ftest%2Fui%2Fhrtb%2Fissue-95034.rs", "raw_url": "https://github.com/rust-lang/rust/raw/13e4f87c4dc9f9caa13141966fd79de560240be9/src%2Ftest%2Fui%2Fhrtb%2Fissue-95034.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fhrtb%2Fissue-95034.rs?ref=13e4f87c4dc9f9caa13141966fd79de560240be9", "patch": "@@ -1,4 +1,4 @@\n-// known-bug\n+// known-bug: #95034\n // failure-status: 101\n // compile-flags: --edition=2021 --crate-type=lib\n // rustc-env:RUST_BACKTRACE=0"}, {"sha": "eb4860e75d758feeb266a657adb09c44ecaffa79", "filename": "src/test/ui/issues/issue-47511.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/13e4f87c4dc9f9caa13141966fd79de560240be9/src%2Ftest%2Fui%2Fissues%2Fissue-47511.rs", "raw_url": "https://github.com/rust-lang/rust/raw/13e4f87c4dc9f9caa13141966fd79de560240be9/src%2Ftest%2Fui%2Fissues%2Fissue-47511.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-47511.rs?ref=13e4f87c4dc9f9caa13141966fd79de560240be9", "patch": "@@ -1,5 +1,5 @@\n // check-fail\n-// known-bug\n+// known-bug: #47511\n \n // Regression test for #47511: anonymous lifetimes can appear\n // unconstrained in a return type, but only if they appear just once"}, {"sha": "fd975aaaee4a812adaf0e6c3dd545eeae8647434", "filename": "src/test/ui/trait-bounds/select-param-env-instead-of-blanket.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/13e4f87c4dc9f9caa13141966fd79de560240be9/src%2Ftest%2Fui%2Ftrait-bounds%2Fselect-param-env-instead-of-blanket.rs", "raw_url": "https://github.com/rust-lang/rust/raw/13e4f87c4dc9f9caa13141966fd79de560240be9/src%2Ftest%2Fui%2Ftrait-bounds%2Fselect-param-env-instead-of-blanket.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftrait-bounds%2Fselect-param-env-instead-of-blanket.rs?ref=13e4f87c4dc9f9caa13141966fd79de560240be9", "patch": "@@ -1,4 +1,4 @@\n-// known-bug\n+// known-bug: #93008\n // build-fail\n // failure-status: 101\n // compile-flags:--crate-type=lib -Zmir-opt-level=3"}, {"sha": "328096d44b4b506161d68defef2d878e87bfb0bc", "filename": "src/test/ui/type-alias-impl-trait/cross_inference_pattern_bug_no_type.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/13e4f87c4dc9f9caa13141966fd79de560240be9/src%2Ftest%2Fui%2Ftype-alias-impl-trait%2Fcross_inference_pattern_bug_no_type.rs", "raw_url": "https://github.com/rust-lang/rust/raw/13e4f87c4dc9f9caa13141966fd79de560240be9/src%2Ftest%2Fui%2Ftype-alias-impl-trait%2Fcross_inference_pattern_bug_no_type.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftype-alias-impl-trait%2Fcross_inference_pattern_bug_no_type.rs?ref=13e4f87c4dc9f9caa13141966fd79de560240be9", "patch": "@@ -1,4 +1,4 @@\n-// known-bug\n+// known-bug: #96572\n // compile-flags: --edition=2021 --crate-type=lib\n // rustc-env:RUST_BACKTRACE=0\n "}, {"sha": "067ed7ea1e585db50b68deeb3c67b68f867e8bc2", "filename": "src/test/ui/type-alias-impl-trait/issue-57611-trait-alias.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/13e4f87c4dc9f9caa13141966fd79de560240be9/src%2Ftest%2Fui%2Ftype-alias-impl-trait%2Fissue-57611-trait-alias.rs", "raw_url": "https://github.com/rust-lang/rust/raw/13e4f87c4dc9f9caa13141966fd79de560240be9/src%2Ftest%2Fui%2Ftype-alias-impl-trait%2Fissue-57611-trait-alias.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftype-alias-impl-trait%2Fissue-57611-trait-alias.rs?ref=13e4f87c4dc9f9caa13141966fd79de560240be9", "patch": "@@ -1,7 +1,7 @@\n // Regression test for issue #57611\n // Ensures that we don't ICE\n // FIXME: This should compile, but it currently doesn't\n-// known-bug\n+// known-bug: unknown\n \n #![feature(trait_alias)]\n #![feature(type_alias_impl_trait)]"}, {"sha": "31e979a574b6e65e6b5fae0c36f9386067892248", "filename": "src/tools/compiletest/src/header.rs", "status": "modified", "additions": 23, "deletions": 1, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/13e4f87c4dc9f9caa13141966fd79de560240be9/src%2Ftools%2Fcompiletest%2Fsrc%2Fheader.rs", "raw_url": "https://github.com/rust-lang/rust/raw/13e4f87c4dc9f9caa13141966fd79de560240be9/src%2Ftools%2Fcompiletest%2Fsrc%2Fheader.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fheader.rs?ref=13e4f87c4dc9f9caa13141966fd79de560240be9", "patch": "@@ -395,7 +395,29 @@ impl TestProps {\n                 );\n                 config.set_name_directive(ln, STDERR_PER_BITWIDTH, &mut self.stderr_per_bitwidth);\n                 config.set_name_directive(ln, INCREMENTAL, &mut self.incremental);\n-                config.set_name_directive(ln, KNOWN_BUG, &mut self.known_bug);\n+\n+                // Unlike the other `name_value_directive`s this needs to be handled manually,\n+                // because it sets a `bool` flag.\n+                if let Some(known_bug) = config.parse_name_value_directive(ln, KNOWN_BUG) {\n+                    let known_bug = known_bug.trim();\n+                    if known_bug == \"unknown\"\n+                        || known_bug.split(',').all(|issue_ref| {\n+                            issue_ref\n+                                .trim()\n+                                .split_once('#')\n+                                .filter(|(_, number)| {\n+                                    number.chars().all(|digit| digit.is_numeric())\n+                                })\n+                                .is_some()\n+                        })\n+                    {\n+                        self.known_bug = true;\n+                    } else {\n+                        panic!(\n+                            \"Invalid known-bug value: {known_bug}\\nIt requires comma-separated issue references (`#000` or `chalk#000`) or `unknown`.\"\n+                        );\n+                    }\n+                }\n                 config.set_name_value_directive(ln, MIR_UNIT_TEST, &mut self.mir_unit_test, |s| {\n                     s.trim().to_string()\n                 });"}]}