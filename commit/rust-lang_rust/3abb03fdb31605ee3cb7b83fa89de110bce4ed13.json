{"sha": "3abb03fdb31605ee3cb7b83fa89de110bce4ed13", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNhYmIwM2ZkYjMxNjA1ZWUzY2I3YjgzZmE4OWRlMTEwYmNlNGVkMTM=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2019-02-05T15:29:08Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-02-05T15:29:08Z"}, "message": "Rollup merge of #58138 - ishitatsuyuki:stability-delay, r=estebank\n\nFix #58101", "tree": {"sha": "7760709a2e842f71f38dad3d960750754f1d77a0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7760709a2e842f71f38dad3d960750754f1d77a0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3abb03fdb31605ee3cb7b83fa89de110bce4ed13", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJcWavECRBK7hj4Ov3rIwAAdHIIAD2GhiRVRy5O61XRgq6+ahW6\n55LZhWOhXPswYDNqfk9w+o2tCF92ESZsHRLjLNrQZGNm3zoh4LcUW8bnwp4CL18N\n4bQtQILXvG+XrodWB0BxPndcvfRVGY/Q0OQZIu+79VxqqRTwu3QwkhSj5otnUf5R\nLrmMOlYxq87s4fINn4A2WJy+TAUP9a5mK7W1hAGnLbkfV4RQ2Nd9TIfiKC9pEXSi\nx01XPGbIx8RYP35J6neK/3vuP00fw3KfSXxMLJArlrghPunlqMHeluwI3mk3lGEl\n0EKQd4b/0Eddn5esWbPoVpkoNRQzDWqA7AinLbQkapSs57OfHCOXqTW9bDs753A=\n=mqFF\n-----END PGP SIGNATURE-----\n", "payload": "tree 7760709a2e842f71f38dad3d960750754f1d77a0\nparent a35dac2c5c03bdcc1a7a6a6211976fdea1cd813f\nparent 652f2c753aed97261f5d988f0a2b50aa6508964c\nauthor kennytm <kennytm@gmail.com> 1549380548 +0900\ncommitter GitHub <noreply@github.com> 1549380548 +0900\n\nRollup merge of #58138 - ishitatsuyuki:stability-delay, r=estebank\n\nFix #58101\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3abb03fdb31605ee3cb7b83fa89de110bce4ed13", "html_url": "https://github.com/rust-lang/rust/commit/3abb03fdb31605ee3cb7b83fa89de110bce4ed13", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3abb03fdb31605ee3cb7b83fa89de110bce4ed13/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a35dac2c5c03bdcc1a7a6a6211976fdea1cd813f", "url": "https://api.github.com/repos/rust-lang/rust/commits/a35dac2c5c03bdcc1a7a6a6211976fdea1cd813f", "html_url": "https://github.com/rust-lang/rust/commit/a35dac2c5c03bdcc1a7a6a6211976fdea1cd813f"}, {"sha": "652f2c753aed97261f5d988f0a2b50aa6508964c", "url": "https://api.github.com/repos/rust-lang/rust/commits/652f2c753aed97261f5d988f0a2b50aa6508964c", "html_url": "https://github.com/rust-lang/rust/commit/652f2c753aed97261f5d988f0a2b50aa6508964c"}], "stats": {"total": 17, "additions": 16, "deletions": 1}, "files": [{"sha": "c726885337ea8834e943d863e1df1c6e95440fa8", "filename": "src/librustc/middle/stability.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3abb03fdb31605ee3cb7b83fa89de110bce4ed13/src%2Flibrustc%2Fmiddle%2Fstability.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3abb03fdb31605ee3cb7b83fa89de110bce4ed13/src%2Flibrustc%2Fmiddle%2Fstability.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fstability.rs?ref=3abb03fdb31605ee3cb7b83fa89de110bce4ed13", "patch": "@@ -765,7 +765,9 @@ impl<'a, 'gcx, 'tcx> TyCtxt<'a, 'gcx, 'tcx> {\n                 }\n             }\n             EvalResult::Unmarked => {\n-                span_bug!(span, \"encountered unmarked API: {:?}\", def_id);\n+                // The API could be uncallable for other reasons, for example when a private module\n+                // was referenced.\n+                self.sess.delay_span_bug(span, &format!(\"encountered unmarked API: {:?}\", def_id));\n             }\n         }\n     }"}, {"sha": "f12e9198b0d7c274f767b703d1892845e66e5019", "filename": "src/test/ui/stability-in-private-module.rs", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3abb03fdb31605ee3cb7b83fa89de110bce4ed13/src%2Ftest%2Fui%2Fstability-in-private-module.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3abb03fdb31605ee3cb7b83fa89de110bce4ed13/src%2Ftest%2Fui%2Fstability-in-private-module.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fstability-in-private-module.rs?ref=3abb03fdb31605ee3cb7b83fa89de110bce4ed13", "patch": "@@ -0,0 +1,4 @@\n+fn main() {\n+    let _ = std::thread::thread_info::current_thread();\n+    //~^ERROR module `thread_info` is private\n+}"}, {"sha": "c3edd62a15edac3ca5c418d07223a77b0727d11c", "filename": "src/test/ui/stability-in-private-module.stderr", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/3abb03fdb31605ee3cb7b83fa89de110bce4ed13/src%2Ftest%2Fui%2Fstability-in-private-module.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3abb03fdb31605ee3cb7b83fa89de110bce4ed13/src%2Ftest%2Fui%2Fstability-in-private-module.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fstability-in-private-module.stderr?ref=3abb03fdb31605ee3cb7b83fa89de110bce4ed13", "patch": "@@ -0,0 +1,9 @@\n+error[E0603]: module `thread_info` is private\n+  --> $DIR/stability-in-private-module.rs:2:26\n+   |\n+LL |     let _ = std::thread::thread_info::current_thread();\n+   |                          ^^^^^^^^^^^\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0603`."}]}