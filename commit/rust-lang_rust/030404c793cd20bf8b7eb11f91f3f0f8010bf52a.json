{"sha": "030404c793cd20bf8b7eb11f91f3f0f8010bf52a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjAzMDQwNGM3OTNjZDIwYmY4YjdlYjExZjkxZjNmMGY4MDEwYmY1MmE=", "commit": {"author": {"name": "Tim Chevalier", "email": "chevalier@alum.wellesley.edu", "date": "2012-04-19T21:26:45Z"}, "committer": {"name": "Tim Chevalier", "email": "chevalier@alum.wellesley.edu", "date": "2012-04-19T22:30:58Z"}, "message": "Cleanup FIXMEs in syntax::ext::qquote\n\nInline some one-off functions, add an error message, annotate a FIXME", "tree": {"sha": "37a8b0669b65d3a4dccd105d348abffeeeb50f58", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/37a8b0669b65d3a4dccd105d348abffeeeb50f58"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/030404c793cd20bf8b7eb11f91f3f0f8010bf52a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/030404c793cd20bf8b7eb11f91f3f0f8010bf52a", "html_url": "https://github.com/rust-lang/rust/commit/030404c793cd20bf8b7eb11f91f3f0f8010bf52a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/030404c793cd20bf8b7eb11f91f3f0f8010bf52a/comments", "author": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "committer": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e6b5b4827b6110f7cf72e57b9167ead2ee152ee3", "url": "https://api.github.com/repos/rust-lang/rust/commits/e6b5b4827b6110f7cf72e57b9167ead2ee152ee3", "html_url": "https://github.com/rust-lang/rust/commit/e6b5b4827b6110f7cf72e57b9167ead2ee152ee3"}], "stats": {"total": 20, "additions": 7, "deletions": 13}, "files": [{"sha": "e625ba55fed3900d949e994c7bc7fe6271ad3f1a", "filename": "src/librustsyntax/ext/qquote.rs", "status": "modified", "additions": 7, "deletions": 13, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/030404c793cd20bf8b7eb11f91f3f0f8010bf52a/src%2Flibrustsyntax%2Fext%2Fqquote.rs", "raw_url": "https://github.com/rust-lang/rust/raw/030404c793cd20bf8b7eb11f91f3f0f8010bf52a/src%2Flibrustsyntax%2Fext%2Fqquote.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustsyntax%2Fext%2Fqquote.rs?ref=030404c793cd20bf8b7eb11f91f3f0f8010bf52a", "patch": "@@ -96,13 +96,15 @@ impl of qq_helper for @ast::pat {\n \n fn gather_anti_quotes<N: qq_helper>(lo: uint, node: N) -> aq_ctxt\n {\n-    let v = @{visit_expr: visit_aq_expr,\n-              visit_ty: visit_aq_ty\n+    let v = @{visit_expr: {|node, &&cx, v|\n+                  visit_aq(node, \"from_expr\", cx, v)},\n+              visit_ty: {|node, &&cx, v|\n+                  visit_aq(node, \"from_ty\", cx, v)}\n               with *default_visitor()};\n     let cx = @{lo:lo, mut gather: []};\n     node.visit(cx, mk_vt(v));\n     // FIXME: Maybe this is an overkill (merge_sort), it might be better\n-    //   to just keep the gather array in sorted order ...\n+    //   to just keep the gather array in sorted order ... (Issue #2250)\n     cx.gather = std::sort::merge_sort({|a,b| a.lo < b.lo}, copy cx.gather);\n     ret cx;\n }\n@@ -117,14 +119,6 @@ fn visit_aq<T:qq_helper>(node: T, constr: str, &&cx: aq_ctxt, v: vt<aq_ctxt>)\n       _ {node.visit(cx, v);}\n     }\n }\n-// FIXME: these are only here because I (kevina) couldn't figure out how to\n-// get bind to work in gather_anti_quotes\n-fn visit_aq_expr(node: @ast::expr, &&cx: aq_ctxt, v: vt<aq_ctxt>) {\n-    visit_aq(node,\"from_expr\",cx,v);\n-}\n-fn visit_aq_ty(node: @ast::ty, &&cx: aq_ctxt, v: vt<aq_ctxt>) {\n-    visit_aq(node,\"from_ty\",cx,v);\n-}\n \n fn is_space(c: char) -> bool {\n     parse::lexer::is_whitespace(c)\n@@ -180,8 +174,8 @@ fn parse_stmt(p: parser) -> @ast::stmt {\n \n fn parse_item(p: parser) -> @ast::item {\n     alt (parser::parse_item(p, [])) {\n-      some(item) {item}\n-      none {fail; /* FIXME: Error message, somehow */}\n+      some(item) { item }\n+      none       { fail \"parse_item: parsing an item failed\"; }\n     }\n }\n "}]}