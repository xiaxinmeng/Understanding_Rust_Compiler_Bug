{"sha": "29798c763cc121f7d610544deb940d70e4e33649", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI5Nzk4Yzc2M2NjMTIxZjdkNjEwNTQ0ZGViOTQwZDcwZTRlMzM2NDk=", "commit": {"author": {"name": "gfreezy", "email": "gfreezy@gmail.com", "date": "2018-12-24T15:00:18Z"}, "committer": {"name": "gfreezy", "email": "gfreezy@gmail.com", "date": "2018-12-24T15:00:18Z"}, "message": "remove option from Diagnostic", "tree": {"sha": "4e492b0bf1c55acb0ca5079670a52739645674f8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4e492b0bf1c55acb0ca5079670a52739645674f8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/29798c763cc121f7d610544deb940d70e4e33649", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/29798c763cc121f7d610544deb940d70e4e33649", "html_url": "https://github.com/rust-lang/rust/commit/29798c763cc121f7d610544deb940d70e4e33649", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/29798c763cc121f7d610544deb940d70e4e33649/comments", "author": {"login": "gfreezy", "id": 510012, "node_id": "MDQ6VXNlcjUxMDAxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/510012?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gfreezy", "html_url": "https://github.com/gfreezy", "followers_url": "https://api.github.com/users/gfreezy/followers", "following_url": "https://api.github.com/users/gfreezy/following{/other_user}", "gists_url": "https://api.github.com/users/gfreezy/gists{/gist_id}", "starred_url": "https://api.github.com/users/gfreezy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gfreezy/subscriptions", "organizations_url": "https://api.github.com/users/gfreezy/orgs", "repos_url": "https://api.github.com/users/gfreezy/repos", "events_url": "https://api.github.com/users/gfreezy/events{/privacy}", "received_events_url": "https://api.github.com/users/gfreezy/received_events", "type": "User", "site_admin": false}, "committer": {"login": "gfreezy", "id": 510012, "node_id": "MDQ6VXNlcjUxMDAxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/510012?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gfreezy", "html_url": "https://github.com/gfreezy", "followers_url": "https://api.github.com/users/gfreezy/followers", "following_url": "https://api.github.com/users/gfreezy/following{/other_user}", "gists_url": "https://api.github.com/users/gfreezy/gists{/gist_id}", "starred_url": "https://api.github.com/users/gfreezy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gfreezy/subscriptions", "organizations_url": "https://api.github.com/users/gfreezy/orgs", "repos_url": "https://api.github.com/users/gfreezy/repos", "events_url": "https://api.github.com/users/gfreezy/events{/privacy}", "received_events_url": "https://api.github.com/users/gfreezy/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "70df097c89ee45e4e0709c21b8aeee2e84e09fc4", "url": "https://api.github.com/repos/rust-lang/rust/commits/70df097c89ee45e4e0709c21b8aeee2e84e09fc4", "html_url": "https://github.com/rust-lang/rust/commit/70df097c89ee45e4e0709c21b8aeee2e84e09fc4"}], "stats": {"total": 14, "additions": 7, "deletions": 7}, "files": [{"sha": "00cdf7effbccd241fa26ce510998a72ddf6fd9a2", "filename": "crates/ra_analysis/src/imp.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/29798c763cc121f7d610544deb940d70e4e33649/crates%2Fra_analysis%2Fsrc%2Fimp.rs", "raw_url": "https://github.com/rust-lang/rust/raw/29798c763cc121f7d610544deb940d70e4e33649/crates%2Fra_analysis%2Fsrc%2Fimp.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_analysis%2Fsrc%2Fimp.rs?ref=29798c763cc121f7d610544deb940d70e4e33649", "patch": "@@ -364,7 +364,7 @@ impl AnalysisImpl {\n             .map(|d| Diagnostic {\n                 range: d.range,\n                 message: d.msg,\n-                severity: Some(d.severity),\n+                severity: d.severity,\n                 fix: None,\n             })\n             .collect::<Vec<_>>();\n@@ -386,7 +386,7 @@ impl AnalysisImpl {\n                         Diagnostic {\n                             range: name_node.range(),\n                             message: \"unresolved module\".to_string(),\n-                            severity: Some(Severity::Error),\n+                            severity: Severity::Error,\n                             fix: Some(fix),\n                         }\n                     }\n@@ -409,7 +409,7 @@ impl AnalysisImpl {\n                         Diagnostic {\n                             range: name_node.range(),\n                             message: \"can't declare module at this location\".to_string(),\n-                            severity: Some(Severity::Error),\n+                            severity: Severity::Error,\n                             fix: Some(fix),\n                         }\n                     }"}, {"sha": "fbb19ed6b54c6bebdd65c386eae332f4c33ed126", "filename": "crates/ra_analysis/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/29798c763cc121f7d610544deb940d70e4e33649/crates%2Fra_analysis%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/29798c763cc121f7d610544deb940d70e4e33649/crates%2Fra_analysis%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_analysis%2Fsrc%2Flib.rs?ref=29798c763cc121f7d610544deb940d70e4e33649", "patch": "@@ -197,7 +197,7 @@ pub struct Diagnostic {\n     pub message: String,\n     pub range: TextRange,\n     pub fix: Option<SourceChange>,\n-    pub severity: Option<Severity>,\n+    pub severity: Severity,\n }\n \n #[derive(Debug)]"}, {"sha": "c0c414db07ed6258144c6c633025a762b0377d0a", "filename": "crates/ra_lsp_server/src/main_loop.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/29798c763cc121f7d610544deb940d70e4e33649/crates%2Fra_lsp_server%2Fsrc%2Fmain_loop.rs", "raw_url": "https://github.com/rust-lang/rust/raw/29798c763cc121f7d610544deb940d70e4e33649/crates%2Fra_lsp_server%2Fsrc%2Fmain_loop.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_lsp_server%2Fsrc%2Fmain_loop.rs?ref=29798c763cc121f7d610544deb940d70e4e33649", "patch": "@@ -13,7 +13,7 @@ use gen_lsp_server::{\n };\n use languageserver_types::NumberOrString;\n use ra_analysis::{Canceled, FileId, LibraryData};\n-use ra_vfs::{VfsTask};\n+use ra_vfs::VfsTask;\n use rayon;\n use threadpool::ThreadPool;\n use rustc_hash::FxHashSet;\n@@ -23,7 +23,7 @@ use failure_derive::Fail;\n \n use crate::{\n     main_loop::subscriptions::Subscriptions,\n-    project_model::{workspace_loader},\n+    project_model::workspace_loader,\n     req,\n     server_world::{ServerWorld, ServerWorldState},\n     Result,"}, {"sha": "658d169cdaf92195009821ace84e06edbcc5f505", "filename": "crates/ra_lsp_server/src/main_loop/handlers.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/29798c763cc121f7d610544deb940d70e4e33649/crates%2Fra_lsp_server%2Fsrc%2Fmain_loop%2Fhandlers.rs", "raw_url": "https://github.com/rust-lang/rust/raw/29798c763cc121f7d610544deb940d70e4e33649/crates%2Fra_lsp_server%2Fsrc%2Fmain_loop%2Fhandlers.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_lsp_server%2Fsrc%2Fmain_loop%2Fhandlers.rs?ref=29798c763cc121f7d610544deb940d70e4e33649", "patch": "@@ -650,7 +650,7 @@ pub fn publish_diagnostics(\n         .into_iter()\n         .map(|d| Diagnostic {\n             range: d.range.conv_with(&line_index),\n-            severity: d.severity.map(to_diagnostic_severity),\n+            severity: Some(to_diagnostic_severity(d.severity)),\n             code: None,\n             source: Some(\"rust-analyzer\".to_string()),\n             message: d.message,"}]}