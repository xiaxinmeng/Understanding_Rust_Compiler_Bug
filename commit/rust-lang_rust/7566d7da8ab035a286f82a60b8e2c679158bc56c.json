{"sha": "7566d7da8ab035a286f82a60b8e2c679158bc56c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc1NjZkN2RhOGFiMDM1YTI4NmY4MmE2MGI4ZTJjNjc5MTU4YmM1NmM=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2020-07-09T10:15:20Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-07-09T10:15:20Z"}, "message": "Merge #5280\n\n5280: Re-enable IDE features for incomplete impl blocs r=matklad a=matklad\n\n\n\nbors r+\n\ud83e\udd16\n\nCo-authored-by: Aleksey Kladov <aleksey.kladov@gmail.com>", "tree": {"sha": "d7330bf7d50a78f86339c91168ca53379e689dcf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d7330bf7d50a78f86339c91168ca53379e689dcf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7566d7da8ab035a286f82a60b8e2c679158bc56c", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfBu44CRBK7hj4Ov3rIwAAdHIIALNZlaCu3eHUwZZtsH2iRUTD\nrfY3fG2ZvkePjExOAjrLGhy9cTR7DjdZ+0vXaSTh92tfSBW+bglabc8RzCQIUL8y\n/kIYlgGMa7bRaYPYPYBxaCuR5/xSEjFbf0YLB4RSwwMD5Eol92s83sxF6I1l5iqi\nE/mTYKNkN8o5kp9w+Y/cs1dYc7tdhVWjUYjP3Q9PWTGvIIUR8MPMWxuUF1RxBBLt\nMH2sX9D9uBTzyoyznWgBCANh9fdeObXb/FVuX0N6RvBA4rVwKk0aUTx7uvtcOVdf\nu6N6uGb65QCcaC0pEZ1tzClKWjx6Sbo8LbV56tTVLYpDcRrqDhuY2nBdrVX/itk=\n=kvpL\n-----END PGP SIGNATURE-----\n", "payload": "tree d7330bf7d50a78f86339c91168ca53379e689dcf\nparent 91005ecc27427f46529b9372f91e5072dfe5e179\nparent 4399eff2d06f9134ff37a4dfd47204de6ebebd92\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1594289720 +0000\ncommitter GitHub <noreply@github.com> 1594289720 +0000\n\nMerge #5280\n\n5280: Re-enable IDE features for incomplete impl blocs r=matklad a=matklad\n\n\n\nbors r+\n\ud83e\udd16\n\nCo-authored-by: Aleksey Kladov <aleksey.kladov@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7566d7da8ab035a286f82a60b8e2c679158bc56c", "html_url": "https://github.com/rust-lang/rust/commit/7566d7da8ab035a286f82a60b8e2c679158bc56c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7566d7da8ab035a286f82a60b8e2c679158bc56c/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "91005ecc27427f46529b9372f91e5072dfe5e179", "url": "https://api.github.com/repos/rust-lang/rust/commits/91005ecc27427f46529b9372f91e5072dfe5e179", "html_url": "https://github.com/rust-lang/rust/commit/91005ecc27427f46529b9372f91e5072dfe5e179"}, {"sha": "4399eff2d06f9134ff37a4dfd47204de6ebebd92", "url": "https://api.github.com/repos/rust-lang/rust/commits/4399eff2d06f9134ff37a4dfd47204de6ebebd92", "html_url": "https://github.com/rust-lang/rust/commit/4399eff2d06f9134ff37a4dfd47204de6ebebd92"}], "stats": {"total": 24, "additions": 21, "deletions": 3}, "files": [{"sha": "eaa10d99952aab29a92654d6235aa0ab8643074e", "filename": "crates/ra_hir_def/src/item_tree/lower.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/7566d7da8ab035a286f82a60b8e2c679158bc56c/crates%2Fra_hir_def%2Fsrc%2Fitem_tree%2Flower.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7566d7da8ab035a286f82a60b8e2c679158bc56c/crates%2Fra_hir_def%2Fsrc%2Fitem_tree%2Flower.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir_def%2Fsrc%2Fitem_tree%2Flower.rs?ref=7566d7da8ab035a286f82a60b8e2c679158bc56c", "patch": "@@ -450,8 +450,9 @@ impl Ctx {\n \n         // We cannot use `assoc_items()` here as that does not include macro calls.\n         let items = impl_def\n-            .item_list()?\n-            .items()\n+            .item_list()\n+            .into_iter()\n+            .flat_map(|it| it.items())\n             .filter_map(|item| {\n                 self.collect_inner_items(item.syntax());\n                 let assoc = self.lower_assoc_item(&item)?;"}, {"sha": "18f4488b730e36c09afbac0ce6ed4c6856096d94", "filename": "crates/ra_ide/src/completion/complete_unqualified_path.rs", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/7566d7da8ab035a286f82a60b8e2c679158bc56c/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_unqualified_path.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7566d7da8ab035a286f82a60b8e2c679158bc56c/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_unqualified_path.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_unqualified_path.rs?ref=7566d7da8ab035a286f82a60b8e2c679158bc56c", "patch": "@@ -638,4 +638,21 @@ fn f() {}\n             expect![[\"\"]],\n         )\n     }\n+\n+    #[test]\n+    fn completes_type_or_trait_in_impl_block() {\n+        check(\n+            r#\"\n+trait MyTrait {}\n+struct MyStruct {}\n+\n+impl My<|>\n+\"#,\n+            expect![[r#\"\n+                st MyStruct\n+                tt MyTrait\n+                tp Self\n+            \"#]],\n+        )\n+    }\n }"}, {"sha": "7bdda316c458dbc76091fbeb144bc12d6a39709e", "filename": "crates/ra_ide/src/completion/completion_item.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7566d7da8ab035a286f82a60b8e2c679158bc56c/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcompletion_item.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7566d7da8ab035a286f82a60b8e2c679158bc56c/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcompletion_item.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcompletion_item.rs?ref=7566d7da8ab035a286f82a60b8e2c679158bc56c", "patch": "@@ -58,7 +58,7 @@ pub struct CompletionItem {\n     score: Option<CompletionScore>,\n }\n \n-// We use custom debug for CompletionItem to make `insta`'s diffs more readable.\n+// We use custom debug for CompletionItem to make snapshot tests more readable.\n impl fmt::Debug for CompletionItem {\n     fn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result {\n         let mut s = f.debug_struct(\"CompletionItem\");"}]}