{"sha": "3155d170ad782c505397f8b1da55b1d271db305f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjMxNTVkMTcwYWQ3ODJjNTA1Mzk3ZjhiMWRhNTViMWQyNzFkYjMwNWY=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-07-01T04:20:36Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-07-01T04:20:36Z"}, "message": "syntax: Fix lambda parsing following 'ret'", "tree": {"sha": "6930b11ae259ae7aefe61919d53a1692b241bf63", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6930b11ae259ae7aefe61919d53a1692b241bf63"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3155d170ad782c505397f8b1da55b1d271db305f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3155d170ad782c505397f8b1da55b1d271db305f", "html_url": "https://github.com/rust-lang/rust/commit/3155d170ad782c505397f8b1da55b1d271db305f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3155d170ad782c505397f8b1da55b1d271db305f/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "45ccaf04c40a360c9d4153ce7081bae46b1e93cb", "url": "https://api.github.com/repos/rust-lang/rust/commits/45ccaf04c40a360c9d4153ce7081bae46b1e93cb", "html_url": "https://github.com/rust-lang/rust/commit/45ccaf04c40a360c9d4153ce7081bae46b1e93cb"}], "stats": {"total": 7, "additions": 7, "deletions": 0}, "files": [{"sha": "9ab2fc5014c169408abf6bafac35e13e93fb58fd", "filename": "src/libsyntax/parse/token.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3155d170ad782c505397f8b1da55b1d271db305f/src%2Flibsyntax%2Fparse%2Ftoken.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3155d170ad782c505397f8b1da55b1d271db305f/src%2Flibsyntax%2Fparse%2Ftoken.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Ftoken.rs?ref=3155d170ad782c505397f8b1da55b1d271db305f", "patch": "@@ -198,6 +198,8 @@ pure fn can_begin_expr(t: token) -> bool {\n       BINOP(MINUS) { true }\n       BINOP(STAR) { true }\n       BINOP(AND) { true }\n+      BINOP(OR) { true } // in lambda syntax\n+      OROR { true } // in lambda syntax\n       MOD_SEP { true }\n       _ { false }\n     }"}, {"sha": "f6c7d3825859b5865c54f89bc12d389ac70c6815", "filename": "src/test/run-pass/newlambdas.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/3155d170ad782c505397f8b1da55b1d271db305f/src%2Ftest%2Frun-pass%2Fnewlambdas.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3155d170ad782c505397f8b1da55b1d271db305f/src%2Ftest%2Frun-pass%2Fnewlambdas.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fnewlambdas.rs?ref=3155d170ad782c505397f8b1da55b1d271db305f", "patch": "@@ -4,11 +4,16 @@ fn f(i: int, f: fn(int) -> int) -> int { f(i) }\n \n fn g(g: fn()) { }\n \n+fn ff() -> fn@(int) -> int {\n+    ret |x| x + 1;\n+}\n+\n fn main() {\n     assert f(10, |a| a) == 10;\n     g(||());\n     assert do f(10) |a| { a } == 10;\n     do g() || { }\n     let _x: fn@() -> int = || 10;\n     let _y: fn@(int) -> int = |a| a;\n+    assert ff()(10) == 11;\n }"}]}