{"sha": "69e1d22ddbc67b25141a735a22a8895a678b32ca", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY5ZTFkMjJkZGJjNjdiMjUxNDFhNzM1YTIyYTg4OTVhNjc4YjMyY2E=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-04-08T07:23:04Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-04-08T07:23:04Z"}, "message": "Auto merge of #83981 - nagisa:nagisa/revert-cfg-wasm, r=Mark-Simulacrum\n\nRemove the insta-stable `cfg(wasm)`\n\nThe addition of `cfg(wasm)` was an oversight on my end that turns out to have a number\nof downsides:\n\n* It was introduced as an insta-stable addition, forgoing the usual\n  staging mechanism we use for potentially far-reaching changes;\n* It is a breaking change for people who are using `--cfg wasm` either\n  directly or via cargo for other purposes;\n* It is not entirely clear if a bare `wasm` cfg is a right option or\n  whether `wasm` family of targets are special enough to warrant\n  special-casing these targets specifically.\n\nAs for the last point, there appears to be a fair amount of support for\nreducing the boilerplate in specifying architectures from the same\nfamily, while ignoring their pointer width. The suggested way forward\nwould be to propose such a change as a separate RFC as it is potentially\na quite contentious addition.\n\ncc #83879 `@devsnek`", "tree": {"sha": "778d8ab6318486d34ae952e0caafbe40ebc50319", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/778d8ab6318486d34ae952e0caafbe40ebc50319"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/69e1d22ddbc67b25141a735a22a8895a678b32ca", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/69e1d22ddbc67b25141a735a22a8895a678b32ca", "html_url": "https://github.com/rust-lang/rust/commit/69e1d22ddbc67b25141a735a22a8895a678b32ca", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/69e1d22ddbc67b25141a735a22a8895a678b32ca/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1408715ab88cc51ba58bd344209f33e91bdb50d3", "url": "https://api.github.com/repos/rust-lang/rust/commits/1408715ab88cc51ba58bd344209f33e91bdb50d3", "html_url": "https://github.com/rust-lang/rust/commit/1408715ab88cc51ba58bd344209f33e91bdb50d3"}, {"sha": "54dc7cebce9e983a72ee06657e931ba34b373ea8", "url": "https://api.github.com/repos/rust-lang/rust/commits/54dc7cebce9e983a72ee06657e931ba34b373ea8", "html_url": "https://github.com/rust-lang/rust/commit/54dc7cebce9e983a72ee06657e931ba34b373ea8"}], "stats": {"total": 5, "additions": 0, "deletions": 5}, "files": [{"sha": "75bd8880b3460e68525f1edd520ce76063409207", "filename": "compiler/rustc_session/src/config.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/69e1d22ddbc67b25141a735a22a8895a678b32ca/compiler%2Frustc_session%2Fsrc%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/69e1d22ddbc67b25141a735a22a8895a678b32ca/compiler%2Frustc_session%2Fsrc%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_session%2Fsrc%2Fconfig.rs?ref=69e1d22ddbc67b25141a735a22a8895a678b32ca", "patch": "@@ -822,9 +822,6 @@ pub fn default_configuration(sess: &Session) -> CrateConfig {\n         }\n     }\n     ret.insert((sym::target_arch, Some(Symbol::intern(arch))));\n-    if sess.target.is_like_wasm {\n-        ret.insert((sym::wasm, None));\n-    }\n     ret.insert((sym::target_endian, Some(Symbol::intern(end.as_str()))));\n     ret.insert((sym::target_pointer_width, Some(Symbol::intern(&wordsz))));\n     ret.insert((sym::target_env, Some(Symbol::intern(env))));"}, {"sha": "03fe5bcd2971b876407c95ff8853a1f0054b8a60", "filename": "compiler/rustc_span/src/symbol.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/69e1d22ddbc67b25141a735a22a8895a678b32ca/compiler%2Frustc_span%2Fsrc%2Fsymbol.rs", "raw_url": "https://github.com/rust-lang/rust/raw/69e1d22ddbc67b25141a735a22a8895a678b32ca/compiler%2Frustc_span%2Fsrc%2Fsymbol.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_span%2Fsrc%2Fsymbol.rs?ref=69e1d22ddbc67b25141a735a22a8895a678b32ca", "patch": "@@ -1295,7 +1295,6 @@ symbols! {\n         vreg,\n         vreg_low16,\n         warn,\n-        wasm,\n         wasm_import_module,\n         wasm_target_feature,\n         while_let,"}, {"sha": "592aefb6a4b015a044e7605e7f8b422c0116059d", "filename": "src/librustdoc/clean/cfg.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/69e1d22ddbc67b25141a735a22a8895a678b32ca/src%2Flibrustdoc%2Fclean%2Fcfg.rs", "raw_url": "https://github.com/rust-lang/rust/raw/69e1d22ddbc67b25141a735a22a8895a678b32ca/src%2Flibrustdoc%2Fclean%2Fcfg.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fclean%2Fcfg.rs?ref=69e1d22ddbc67b25141a735a22a8895a678b32ca", "patch": "@@ -487,7 +487,6 @@ impl<'a> fmt::Display for Display<'a> {\n                         \"windows\" => \"Windows\",\n                         _ => \"\",\n                     },\n-                    (sym::wasm, None) => \"WebAssembly\",\n                     (sym::target_arch, Some(arch)) => match &*arch.as_str() {\n                         \"aarch64\" => \"AArch64\",\n                         \"arm\" => \"ARM\","}]}