{"sha": "f50518e05ab1fd7632b83c0c6675ec072d1685ea", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY1MDUxOGUwNWFiMWZkNzYzMmI4M2MwYzY2NzVlYzA3MmQxNjg1ZWE=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-08-01T04:49:02Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-08-01T04:49:02Z"}, "message": "Auto merge of #27447 - eefriedman:parser-cleanup, r=alexcrichton", "tree": {"sha": "73736045dcf672a0082a1c9252c9da721c33ee17", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/73736045dcf672a0082a1c9252c9da721c33ee17"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f50518e05ab1fd7632b83c0c6675ec072d1685ea", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f50518e05ab1fd7632b83c0c6675ec072d1685ea", "html_url": "https://github.com/rust-lang/rust/commit/f50518e05ab1fd7632b83c0c6675ec072d1685ea", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f50518e05ab1fd7632b83c0c6675ec072d1685ea/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6beaedaa5f9e93e0f6a1eafb485db1fd26a0e210", "url": "https://api.github.com/repos/rust-lang/rust/commits/6beaedaa5f9e93e0f6a1eafb485db1fd26a0e210", "html_url": "https://github.com/rust-lang/rust/commit/6beaedaa5f9e93e0f6a1eafb485db1fd26a0e210"}, {"sha": "f9692d5d000bc0fc53b65663d5f10c8a187fafb2", "url": "https://api.github.com/repos/rust-lang/rust/commits/f9692d5d000bc0fc53b65663d5f10c8a187fafb2", "html_url": "https://github.com/rust-lang/rust/commit/f9692d5d000bc0fc53b65663d5f10c8a187fafb2"}], "stats": {"total": 31, "additions": 0, "deletions": 31}, "files": [{"sha": "bc355f70fb31e92637a3e3a712ecd4581570cde5", "filename": "src/libsyntax/parse/obsolete.rs", "status": "modified", "additions": 0, "deletions": 31, "changes": 31, "blob_url": "https://github.com/rust-lang/rust/blob/f50518e05ab1fd7632b83c0c6675ec072d1685ea/src%2Flibsyntax%2Fparse%2Fobsolete.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f50518e05ab1fd7632b83c0c6675ec072d1685ea/src%2Flibsyntax%2Fparse%2Fobsolete.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fobsolete.rs?ref=f50518e05ab1fd7632b83c0c6675ec072d1685ea", "patch": "@@ -13,11 +13,8 @@\n //!\n //! Obsolete syntax that becomes too hard to parse can be removed.\n \n-use ast::{Expr, ExprTup};\n use codemap::Span;\n use parse::parser;\n-use parse::token;\n-use ptr::P;\n \n /// The specific types of unsupported syntax\n #[derive(Copy, Clone, PartialEq, Eq, Hash)]\n@@ -29,17 +26,12 @@ pub enum ObsoleteSyntax {\n pub trait ParserObsoleteMethods {\n     /// Reports an obsolete syntax non-fatal error.\n     fn obsolete(&mut self, sp: Span, kind: ObsoleteSyntax);\n-    /// Reports an obsolete syntax non-fatal error, and returns\n-    /// a placeholder expression\n-    fn obsolete_expr(&mut self, sp: Span, kind: ObsoleteSyntax) -> P<Expr>;\n     fn report(&mut self,\n               sp: Span,\n               kind: ObsoleteSyntax,\n               kind_str: &str,\n               desc: &str,\n               error: bool);\n-    fn is_obsolete_ident(&mut self, ident: &str) -> bool;\n-    fn eat_obsolete_ident(&mut self, ident: &str) -> bool;\n }\n \n impl<'a> ParserObsoleteMethods for parser::Parser<'a> {\n@@ -61,13 +53,6 @@ impl<'a> ParserObsoleteMethods for parser::Parser<'a> {\n         self.report(sp, kind, kind_str, desc, error);\n     }\n \n-    /// Reports an obsolete syntax non-fatal error, and returns\n-    /// a placeholder expression\n-    fn obsolete_expr(&mut self, sp: Span, kind: ObsoleteSyntax) -> P<Expr> {\n-        self.obsolete(sp, kind);\n-        self.mk_expr(sp.lo, sp.hi, ExprTup(vec![]))\n-    }\n-\n     fn report(&mut self,\n               sp: Span,\n               kind: ObsoleteSyntax,\n@@ -89,20 +74,4 @@ impl<'a> ParserObsoleteMethods for parser::Parser<'a> {\n             self.obsolete_set.insert(kind);\n         }\n     }\n-\n-    fn is_obsolete_ident(&mut self, ident: &str) -> bool {\n-        match self.token {\n-            token::Ident(sid, _) => sid.name == ident,\n-            _ => false,\n-        }\n-    }\n-\n-    fn eat_obsolete_ident(&mut self, ident: &str) -> bool {\n-        if self.is_obsolete_ident(ident) {\n-            panictry!(self.bump());\n-            true\n-        } else {\n-            false\n-        }\n-    }\n }"}]}