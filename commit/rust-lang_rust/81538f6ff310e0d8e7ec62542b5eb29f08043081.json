{"sha": "81538f6ff310e0d8e7ec62542b5eb29f08043081", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgxNTM4ZjZmZjMxMGUwZDhlN2VjNjI1NDJiNWViMjlmMDgwNDMwODE=", "commit": {"author": {"name": "Stanislav Tkach", "email": "stanislav.tkach@xdev.re", "date": "2017-08-23T14:13:51Z"}, "committer": {"name": "Stanislav Tkach", "email": "stanislav.tkach@xdev.re", "date": "2017-08-23T14:13:51Z"}, "message": "Fix 'cyclomatic complexity' warning", "tree": {"sha": "21a945f78cdfd95f5f15b8a389063807d8c57712", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/21a945f78cdfd95f5f15b8a389063807d8c57712"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/81538f6ff310e0d8e7ec62542b5eb29f08043081", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/81538f6ff310e0d8e7ec62542b5eb29f08043081", "html_url": "https://github.com/rust-lang/rust/commit/81538f6ff310e0d8e7ec62542b5eb29f08043081", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/81538f6ff310e0d8e7ec62542b5eb29f08043081/comments", "author": {"login": "stanislav-tkach", "id": 2997902, "node_id": "MDQ6VXNlcjI5OTc5MDI=", "avatar_url": "https://avatars.githubusercontent.com/u/2997902?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stanislav-tkach", "html_url": "https://github.com/stanislav-tkach", "followers_url": "https://api.github.com/users/stanislav-tkach/followers", "following_url": "https://api.github.com/users/stanislav-tkach/following{/other_user}", "gists_url": "https://api.github.com/users/stanislav-tkach/gists{/gist_id}", "starred_url": "https://api.github.com/users/stanislav-tkach/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stanislav-tkach/subscriptions", "organizations_url": "https://api.github.com/users/stanislav-tkach/orgs", "repos_url": "https://api.github.com/users/stanislav-tkach/repos", "events_url": "https://api.github.com/users/stanislav-tkach/events{/privacy}", "received_events_url": "https://api.github.com/users/stanislav-tkach/received_events", "type": "User", "site_admin": false}, "committer": {"login": "stanislav-tkach", "id": 2997902, "node_id": "MDQ6VXNlcjI5OTc5MDI=", "avatar_url": "https://avatars.githubusercontent.com/u/2997902?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stanislav-tkach", "html_url": "https://github.com/stanislav-tkach", "followers_url": "https://api.github.com/users/stanislav-tkach/followers", "following_url": "https://api.github.com/users/stanislav-tkach/following{/other_user}", "gists_url": "https://api.github.com/users/stanislav-tkach/gists{/gist_id}", "starred_url": "https://api.github.com/users/stanislav-tkach/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stanislav-tkach/subscriptions", "organizations_url": "https://api.github.com/users/stanislav-tkach/orgs", "repos_url": "https://api.github.com/users/stanislav-tkach/repos", "events_url": "https://api.github.com/users/stanislav-tkach/events{/privacy}", "received_events_url": "https://api.github.com/users/stanislav-tkach/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "45ff467c31c2cae7d656ff4534c5ddfc614e10db", "url": "https://api.github.com/repos/rust-lang/rust/commits/45ff467c31c2cae7d656ff4534c5ddfc614e10db", "html_url": "https://github.com/rust-lang/rust/commit/45ff467c31c2cae7d656ff4534c5ddfc614e10db"}], "stats": {"total": 25, "additions": 17, "deletions": 8}, "files": [{"sha": "1c56be532962eec967a164ce993fb2ed3809f789", "filename": "clippy_lints/src/types.rs", "status": "modified", "additions": 17, "deletions": 8, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/81538f6ff310e0d8e7ec62542b5eb29f08043081/clippy_lints%2Fsrc%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/81538f6ff310e0d8e7ec62542b5eb29f08043081/clippy_lints%2Fsrc%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ftypes.rs?ref=81538f6ff310e0d8e7ec62542b5eb29f08043081", "patch": "@@ -212,16 +212,10 @@ fn check_ty(cx: &LateContext, ast_ty: &hir::Ty, is_local: bool) {\n                         let PathParameters::AngleBracketedParameters(ref ab_data) = bx.parameters,\n                         let [ref inner] = *ab_data.types\n                     ], {\n-                        if_let_chain! {[\n-                            let TyTraitObject(ref traits, _) = inner.node,\n-                            traits.len() >= 1,\n-                            // Only Send/Sync can be used as additional traits, so it is enough to\n-                            // check only the first trait.\n-                            match_path_old(&traits[0].trait_ref.path, &paths::ANY_TRAIT)\n-                        ], {\n+                        if is_any_trait(inner) {\n                             // Ignore `Box<Any>` types, see #1884 for details.\n                             return;\n-                        }}\n+                        }\n \n                         let ltopt = if lt.is_elided() {\n                             \"\".to_owned()\n@@ -260,6 +254,21 @@ fn check_ty(cx: &LateContext, ast_ty: &hir::Ty, is_local: bool) {\n     }\n }\n \n+// Returns true if given type is `Any` trait.\n+fn is_any_trait(t: &hir::Ty) -> bool {\n+    if_let_chain! {[\n+        let TyTraitObject(ref traits, _) = t.node,\n+        traits.len() >= 1,\n+        // Only Send/Sync can be used as additional traits, so it is enough to\n+        // check only the first trait.\n+        match_path_old(&traits[0].trait_ref.path, &paths::ANY_TRAIT)\n+    ], {\n+        return true;\n+    }}\n+\n+    false\n+}\n+\n #[allow(missing_copy_implementations)]\n pub struct LetPass;\n "}]}