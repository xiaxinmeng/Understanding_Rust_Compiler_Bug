{"sha": "72d49c5a107efdd6a2900183939935f0f6d13d5b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjcyZDQ5YzVhMTA3ZWZkZDZhMjkwMDE4MzkzOTkzNWYwZjZkMTNkNWI=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-07-30T19:17:33Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-07-30T19:17:33Z"}, "message": "cmd to install code extension", "tree": {"sha": "7d9a27b0e981d879e81faf4d042d2419625609dc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7d9a27b0e981d879e81faf4d042d2419625609dc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/72d49c5a107efdd6a2900183939935f0f6d13d5b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/72d49c5a107efdd6a2900183939935f0f6d13d5b", "html_url": "https://github.com/rust-lang/rust/commit/72d49c5a107efdd6a2900183939935f0f6d13d5b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/72d49c5a107efdd6a2900183939935f0f6d13d5b/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ac0d8c48f7a277d4a43448fe7dd4279383bc53f0", "url": "https://api.github.com/repos/rust-lang/rust/commits/ac0d8c48f7a277d4a43448fe7dd4279383bc53f0", "html_url": "https://github.com/rust-lang/rust/commit/ac0d8c48f7a277d4a43448fe7dd4279383bc53f0"}], "stats": {"total": 23, "additions": 23, "deletions": 0}, "files": [{"sha": "0e9e0f387797a59faa9ec7ef9f66604096f6104f", "filename": ".cargo/config", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/72d49c5a107efdd6a2900183939935f0f6d13d5b/.cargo%2Fconfig", "raw_url": "https://github.com/rust-lang/rust/raw/72d49c5a107efdd6a2900183939935f0f6d13d5b/.cargo%2Fconfig", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.cargo%2Fconfig?ref=72d49c5a107efdd6a2900183939935f0f6d13d5b", "patch": "@@ -1,5 +1,7 @@\n [alias]\n gen-kinds = \"run --package tools -- gen-kinds\"\n gen-tests = \"run --package tools -- gen-tests\"\n+install-code = \"run --package tools -- install-code\"\n+\n render-test = \"run --package cli -- render-test\"\n parse = \"run --package cli -- parse\""}, {"sha": "f9fee16f9af54322b43eaa09fbabafb319729dbc", "filename": "tools/Cargo.toml", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/72d49c5a107efdd6a2900183939935f0f6d13d5b/tools%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/72d49c5a107efdd6a2900183939935f0f6d13d5b/tools%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tools%2FCargo.toml?ref=72d49c5a107efdd6a2900183939935f0f6d13d5b", "patch": "@@ -11,3 +11,4 @@ itertools = \"0.7.8\"\n tera = \"0.11\"\n clap = \"2.32.0\"\n failure = \"0.1.1\"\n+commandspec = \"0.10\""}, {"sha": "84a0cf1b6e878699f36f19ecca1a87030a00a9a0", "filename": "tools/src/main.rs", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/72d49c5a107efdd6a2900183939935f0f6d13d5b/tools%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/72d49c5a107efdd6a2900183939935f0f6d13d5b/tools%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tools%2Fsrc%2Fmain.rs?ref=72d49c5a107efdd6a2900183939935f0f6d13d5b", "patch": "@@ -5,6 +5,8 @@ extern crate ron;\n extern crate tera;\n extern crate walkdir;\n extern crate tools;\n+#[macro_use]\n+extern crate commandspec;\n \n use std::{collections::{HashSet, HashMap}, fs, path::Path};\n use clap::{App, Arg, SubCommand};\n@@ -29,8 +31,10 @@ fn main() -> Result<()> {\n         )\n         .subcommand(SubCommand::with_name(\"gen-kinds\"))\n         .subcommand(SubCommand::with_name(\"gen-tests\"))\n+        .subcommand(SubCommand::with_name(\"install-code\"))\n         .get_matches();\n     match matches.subcommand() {\n+        (\"install-code\", _) => install_code_extension()?,\n         (name, Some(matches)) => run_gen_command(name, matches.is_present(\"verify\"))?,\n         _ => unreachable!(),\n     }\n@@ -149,3 +153,19 @@ fn existing_tests(dir: &Path) -> Result<HashSet<Test>> {\n     }\n     Ok(res)\n }\n+\n+fn install_code_extension() -> Result<()> {\n+    execute!(r\"\n+cd code\n+npm install\n+    \")?;\n+    execute!(r\"\n+cd code\n+./node_modules/vsce/out/vsce package\n+    \")?;\n+    execute!(r\"\n+cd code\n+code --install-extension ./libsyntax-rust-0.0.1.vsix\n+    \")?;\n+    Ok(())\n+}"}]}