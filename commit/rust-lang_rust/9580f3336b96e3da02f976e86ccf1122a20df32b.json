{"sha": "9580f3336b96e3da02f976e86ccf1122a20df32b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk1ODBmMzMzNmI5NmUzZGEwMmY5NzZlODZjY2YxMTIyYTIwZGYzMmI=", "commit": {"author": {"name": "Ian Jackson", "email": "ijackson@chiark.greenend.org.uk", "date": "2021-04-30T14:56:28Z"}, "committer": {"name": "Ian Jackson", "email": "ijackson@chiark.greenend.org.uk", "date": "2021-06-18T17:51:47Z"}, "message": "Windows error codes: Move to a separate module\n\nWe're going to add many more of these.\n\nThis commit is pure code motion, plus the necessary administrivia, as\nI have veried with the following runes:\n\n  $ git-diff HEAD~ | grep '^+' |sort >plus\n  $ git-diff HEAD~ | grep '^-' | perl -pe 's/^-/+/' |sort >min\n  $ diff -ub min plus |less\n\nThe output is precisely the expected `mod` and `use` directives.\n\nSigned-off-by: Ian Jackson <ijackson@chiark.greenend.org.uk>", "tree": {"sha": "c349cb14f8778ef2cd0fb897156089274c6d4baa", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c349cb14f8778ef2cd0fb897156089274c6d4baa"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9580f3336b96e3da02f976e86ccf1122a20df32b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9580f3336b96e3da02f976e86ccf1122a20df32b", "html_url": "https://github.com/rust-lang/rust/commit/9580f3336b96e3da02f976e86ccf1122a20df32b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9580f3336b96e3da02f976e86ccf1122a20df32b/comments", "author": {"login": "ijackson", "id": 2090772, "node_id": "MDQ6VXNlcjIwOTA3NzI=", "avatar_url": "https://avatars.githubusercontent.com/u/2090772?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ijackson", "html_url": "https://github.com/ijackson", "followers_url": "https://api.github.com/users/ijackson/followers", "following_url": "https://api.github.com/users/ijackson/following{/other_user}", "gists_url": "https://api.github.com/users/ijackson/gists{/gist_id}", "starred_url": "https://api.github.com/users/ijackson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ijackson/subscriptions", "organizations_url": "https://api.github.com/users/ijackson/orgs", "repos_url": "https://api.github.com/users/ijackson/repos", "events_url": "https://api.github.com/users/ijackson/events{/privacy}", "received_events_url": "https://api.github.com/users/ijackson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ijackson", "id": 2090772, "node_id": "MDQ6VXNlcjIwOTA3NzI=", "avatar_url": "https://avatars.githubusercontent.com/u/2090772?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ijackson", "html_url": "https://github.com/ijackson", "followers_url": "https://api.github.com/users/ijackson/followers", "following_url": "https://api.github.com/users/ijackson/following{/other_user}", "gists_url": "https://api.github.com/users/ijackson/gists{/gist_id}", "starred_url": "https://api.github.com/users/ijackson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ijackson/subscriptions", "organizations_url": "https://api.github.com/users/ijackson/orgs", "repos_url": "https://api.github.com/users/ijackson/repos", "events_url": "https://api.github.com/users/ijackson/events{/privacy}", "received_events_url": "https://api.github.com/users/ijackson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e7fb1a71cd71cb7a188807293f5325775f704bd5", "url": "https://api.github.com/repos/rust-lang/rust/commits/e7fb1a71cd71cb7a188807293f5325775f704bd5", "html_url": "https://github.com/rust-lang/rust/commit/e7fb1a71cd71cb7a188807293f5325775f704bd5"}], "stats": {"total": 105, "additions": 56, "deletions": 49}, "files": [{"sha": "d24dfb67f5848eab8afaa8627a8b308c67d8dec9", "filename": "library/std/src/sys/windows/c.rs", "status": "modified", "additions": 4, "deletions": 49, "changes": 53, "blob_url": "https://github.com/rust-lang/rust/blob/9580f3336b96e3da02f976e86ccf1122a20df32b/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Fc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9580f3336b96e3da02f976e86ccf1122a20df32b/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Fc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Fc.rs?ref=9580f3336b96e3da02f976e86ccf1122a20df32b", "patch": "@@ -10,6 +10,10 @@ use crate::ptr;\n \n use libc::{c_void, size_t, wchar_t};\n \n+#[path = \"c/errors.rs\"] // c.rs is included from two places so we need to specify this\n+mod errors;\n+pub use errors::*;\n+\n pub use self::EXCEPTION_DISPOSITION::*;\n pub use self::FILE_INFO_BY_HANDLE_CLASS::*;\n \n@@ -132,19 +136,6 @@ pub const WSASYS_STATUS_LEN: usize = 128;\n pub const WSAPROTOCOL_LEN: DWORD = 255;\n pub const INVALID_SOCKET: SOCKET = !0;\n \n-pub const WSAEACCES: c_int = 10013;\n-pub const WSAEINVAL: c_int = 10022;\n-pub const WSAEWOULDBLOCK: c_int = 10035;\n-pub const WSAEPROTOTYPE: c_int = 10041;\n-pub const WSAEADDRINUSE: c_int = 10048;\n-pub const WSAEADDRNOTAVAIL: c_int = 10049;\n-pub const WSAECONNABORTED: c_int = 10053;\n-pub const WSAECONNRESET: c_int = 10054;\n-pub const WSAENOTCONN: c_int = 10057;\n-pub const WSAESHUTDOWN: c_int = 10058;\n-pub const WSAETIMEDOUT: c_int = 10060;\n-pub const WSAECONNREFUSED: c_int = 10061;\n-\n pub const MAX_PROTOCOL_CHAIN: DWORD = 7;\n \n pub const MAXIMUM_REPARSE_DATA_BUFFER_SIZE: usize = 16 * 1024;\n@@ -164,42 +155,6 @@ pub const STD_ERROR_HANDLE: DWORD = -12i32 as DWORD;\n \n pub const PROGRESS_CONTINUE: DWORD = 0;\n \n-// List of Windows system error codes with descriptions:\n-// https://docs.microsoft.com/en-us/windows/win32/debug/system-error-codes#system-error-codes\n-pub const ERROR_FILE_NOT_FOUND: DWORD = 2;\n-pub const ERROR_PATH_NOT_FOUND: DWORD = 3;\n-pub const ERROR_ACCESS_DENIED: DWORD = 5;\n-pub const ERROR_INVALID_HANDLE: DWORD = 6;\n-pub const ERROR_NOT_ENOUGH_MEMORY: DWORD = 8;\n-pub const ERROR_OUTOFMEMORY: DWORD = 14;\n-pub const ERROR_NO_MORE_FILES: DWORD = 18;\n-pub const ERROR_SHARING_VIOLATION: DWORD = 32;\n-pub const ERROR_HANDLE_EOF: DWORD = 38;\n-pub const ERROR_FILE_EXISTS: DWORD = 80;\n-pub const ERROR_INVALID_PARAMETER: DWORD = 87;\n-pub const ERROR_BROKEN_PIPE: DWORD = 109;\n-pub const ERROR_CALL_NOT_IMPLEMENTED: DWORD = 120;\n-pub const ERROR_SEM_TIMEOUT: DWORD = 121;\n-pub const ERROR_INSUFFICIENT_BUFFER: DWORD = 122;\n-pub const ERROR_ALREADY_EXISTS: DWORD = 183;\n-pub const ERROR_ENVVAR_NOT_FOUND: DWORD = 203;\n-pub const ERROR_NO_DATA: DWORD = 232;\n-pub const ERROR_DRIVER_CANCEL_TIMEOUT: DWORD = 594;\n-pub const ERROR_OPERATION_ABORTED: DWORD = 995;\n-pub const ERROR_IO_PENDING: DWORD = 997;\n-pub const ERROR_SERVICE_REQUEST_TIMEOUT: DWORD = 1053;\n-pub const ERROR_COUNTER_TIMEOUT: DWORD = 1121;\n-pub const ERROR_TIMEOUT: DWORD = 1460;\n-pub const ERROR_RESOURCE_CALL_TIMED_OUT: DWORD = 5910;\n-pub const ERROR_CTX_MODEM_RESPONSE_TIMEOUT: DWORD = 7012;\n-pub const ERROR_CTX_CLIENT_QUERY_TIMEOUT: DWORD = 7040;\n-pub const FRS_ERR_SYSVOL_POPULATE_TIMEOUT: DWORD = 8014;\n-pub const ERROR_DS_TIMELIMIT_EXCEEDED: DWORD = 8226;\n-pub const DNS_ERROR_RECORD_TIMED_OUT: DWORD = 9705;\n-pub const ERROR_IPSEC_IKE_TIMED_OUT: DWORD = 13805;\n-pub const ERROR_RUNLEVEL_SWITCH_TIMEOUT: DWORD = 15402;\n-pub const ERROR_RUNLEVEL_SWITCH_AGENT_TIMEOUT: DWORD = 15403;\n-\n pub const E_NOTIMPL: HRESULT = 0x80004001u32 as HRESULT;\n \n pub const INVALID_HANDLE_VALUE: HANDLE = !0 as HANDLE;"}, {"sha": "2e264eea32d0b680271f0ee5ef7d3aa41e682cc6", "filename": "library/std/src/sys/windows/c/errors.rs", "status": "added", "additions": 52, "deletions": 0, "changes": 52, "blob_url": "https://github.com/rust-lang/rust/blob/9580f3336b96e3da02f976e86ccf1122a20df32b/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Fc%2Ferrors.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9580f3336b96e3da02f976e86ccf1122a20df32b/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Fc%2Ferrors.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Fc%2Ferrors.rs?ref=9580f3336b96e3da02f976e86ccf1122a20df32b", "patch": "@@ -0,0 +1,52 @@\n+// List of Windows system error codes with descriptions:\n+// https://docs.microsoft.com/en-us/windows/win32/debug/system-error-codes#system-error-codes\n+\n+use super::{c_int, DWORD};\n+\n+pub const ERROR_FILE_NOT_FOUND: DWORD = 2;\n+pub const ERROR_PATH_NOT_FOUND: DWORD = 3;\n+pub const ERROR_ACCESS_DENIED: DWORD = 5;\n+pub const ERROR_INVALID_HANDLE: DWORD = 6;\n+pub const ERROR_NOT_ENOUGH_MEMORY: DWORD = 8;\n+pub const ERROR_OUTOFMEMORY: DWORD = 14;\n+pub const ERROR_NO_MORE_FILES: DWORD = 18;\n+pub const ERROR_SHARING_VIOLATION: DWORD = 32;\n+pub const ERROR_HANDLE_EOF: DWORD = 38;\n+pub const ERROR_FILE_EXISTS: DWORD = 80;\n+pub const ERROR_INVALID_PARAMETER: DWORD = 87;\n+pub const ERROR_BROKEN_PIPE: DWORD = 109;\n+pub const ERROR_CALL_NOT_IMPLEMENTED: DWORD = 120;\n+pub const ERROR_SEM_TIMEOUT: DWORD = 121;\n+pub const ERROR_INSUFFICIENT_BUFFER: DWORD = 122;\n+pub const ERROR_ALREADY_EXISTS: DWORD = 183;\n+pub const ERROR_ENVVAR_NOT_FOUND: DWORD = 203;\n+pub const ERROR_NO_DATA: DWORD = 232;\n+pub const ERROR_DRIVER_CANCEL_TIMEOUT: DWORD = 594;\n+pub const ERROR_OPERATION_ABORTED: DWORD = 995;\n+pub const ERROR_IO_PENDING: DWORD = 997;\n+pub const ERROR_SERVICE_REQUEST_TIMEOUT: DWORD = 1053;\n+pub const ERROR_COUNTER_TIMEOUT: DWORD = 1121;\n+pub const ERROR_TIMEOUT: DWORD = 1460;\n+pub const ERROR_RESOURCE_CALL_TIMED_OUT: DWORD = 5910;\n+pub const ERROR_CTX_MODEM_RESPONSE_TIMEOUT: DWORD = 7012;\n+pub const ERROR_CTX_CLIENT_QUERY_TIMEOUT: DWORD = 7040;\n+pub const FRS_ERR_SYSVOL_POPULATE_TIMEOUT: DWORD = 8014;\n+pub const ERROR_DS_TIMELIMIT_EXCEEDED: DWORD = 8226;\n+pub const DNS_ERROR_RECORD_TIMED_OUT: DWORD = 9705;\n+pub const ERROR_IPSEC_IKE_TIMED_OUT: DWORD = 13805;\n+pub const ERROR_RUNLEVEL_SWITCH_TIMEOUT: DWORD = 15402;\n+pub const ERROR_RUNLEVEL_SWITCH_AGENT_TIMEOUT: DWORD = 15403;\n+\n+pub const WSAEACCES: c_int = 10013;\n+pub const WSAEINVAL: c_int = 10022;\n+pub const WSAEWOULDBLOCK: c_int = 10035;\n+pub const WSAEPROTOTYPE: c_int = 10041;\n+pub const WSAEADDRINUSE: c_int = 10048;\n+pub const WSAEADDRNOTAVAIL: c_int = 10049;\n+pub const WSAECONNABORTED: c_int = 10053;\n+pub const WSAECONNRESET: c_int = 10054;\n+pub const WSAENOTCONN: c_int = 10057;\n+pub const WSAESHUTDOWN: c_int = 10058;\n+pub const WSAETIMEDOUT: c_int = 10060;\n+pub const WSAECONNREFUSED: c_int = 10061;\n+"}]}