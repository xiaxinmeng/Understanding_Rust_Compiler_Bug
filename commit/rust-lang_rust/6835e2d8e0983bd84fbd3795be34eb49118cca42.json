{"sha": "6835e2d8e0983bd84fbd3795be34eb49118cca42", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY4MzVlMmQ4ZTA5ODNiZDg0ZmJkMzc5NWJlMzRlYjQ5MTE4Y2NhNDI=", "commit": {"author": {"name": "flip1995", "email": "hello@philkrones.com", "date": "2020-02-12T16:16:39Z"}, "committer": {"name": "flip1995", "email": "hello@philkrones.com", "date": "2020-02-18T09:08:58Z"}, "message": "Nuke Travis+AppVeyor CI", "tree": {"sha": "985bf950c53f1de2c1e8618b6171df2e41822b86", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/985bf950c53f1de2c1e8618b6171df2e41822b86"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6835e2d8e0983bd84fbd3795be34eb49118cca42", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZxoS6lESXlRGMHWcaTCGhp1QZjcFAl5LqaoACgkQaTCGhp1Q\nZjcgGQ//YXrCMoBOCkvXu6Wti9mX+Vzc8D3j/gtXwx2A/BDzyjaOVhocWMlH9ScW\nXmeCFDe72/cVNwTqQskCieBYB4KxtVYyrwxO1ijvTY8cvFlSH/cpP8yEieDdtk3s\niq2EThX0szkv8u+zJTRkuSzq+kafqnJCTXgJMlnENf8kSyeqYsGA/HcNDK4dE4XT\nOS1rbe4p1nLPeQ7XIkoUNBtj2Kr4iAodT68otOljRUfq0qzmJqQoZ/Z1Rlyhi5Gs\nmi5Vl5fUOYqE1qRQqAZGLRFrtPuk5deCQIeFUMvuptPmMRT0NfqhdxyWEz1vW7vE\nNlgACEDyVehK9XHsluGpaSZYKxjqcmwNi35FhGVso01NukV9ycwO8ms7jI+HUeU+\n2o39RojJp1W+Dr50+vNf3N2HrxCU4mzr4+jEpRfqJPMl0sbiZIQbor+0ZSI2gCxP\naUybX8AtaAuj1pd1Df5e+qagB8JdIlWw6usW6/LqZqtjw2rnvKMU358K3mxgOUBo\nP5ToPZ4GoEifwgCHk9nW+i2M77tQ1u9kFpeAXdA2ow6mCbxOeDLnSR6aLb9QBY/b\nCYWygd8Y7gqt+GqgYx2Ax4nYIjNF90hjMueL0j6bXqzcJ0TBlhWSeZyMltVDclxd\n0J7FPoET7u0LcV6k9++WEHAsw17YdTiBXja3+f6BM6enEBPixsQ=\n=Z0my\n-----END PGP SIGNATURE-----", "payload": "tree 985bf950c53f1de2c1e8618b6171df2e41822b86\nparent 0da4dd009ec28fb0e48bd10613dfb0ed5912d488\nauthor flip1995 <hello@philkrones.com> 1581524199 +0100\ncommitter flip1995 <hello@philkrones.com> 1582016938 +0100\n\nNuke Travis+AppVeyor CI\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6835e2d8e0983bd84fbd3795be34eb49118cca42", "html_url": "https://github.com/rust-lang/rust/commit/6835e2d8e0983bd84fbd3795be34eb49118cca42", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6835e2d8e0983bd84fbd3795be34eb49118cca42/comments", "author": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0da4dd009ec28fb0e48bd10613dfb0ed5912d488", "url": "https://api.github.com/repos/rust-lang/rust/commits/0da4dd009ec28fb0e48bd10613dfb0ed5912d488", "html_url": "https://github.com/rust-lang/rust/commit/0da4dd009ec28fb0e48bd10613dfb0ed5912d488"}], "stats": {"total": 262, "additions": 1, "deletions": 261}, "files": [{"sha": "48cb3f5a1276dfdacef1d54cecd1ded0911738a8", "filename": ".github/deploy_key.enc", "status": "removed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/0da4dd009ec28fb0e48bd10613dfb0ed5912d488/.github%2Fdeploy_key.enc", "raw_url": "https://github.com/rust-lang/rust/raw/0da4dd009ec28fb0e48bd10613dfb0ed5912d488/.github%2Fdeploy_key.enc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fdeploy_key.enc?ref=0da4dd009ec28fb0e48bd10613dfb0ed5912d488"}, {"sha": "fa02f53340174208e143b423603d27f90d7a916b", "filename": ".travis.yml", "status": "removed", "additions": 0, "deletions": 154, "changes": 154, "blob_url": "https://github.com/rust-lang/rust/blob/0da4dd009ec28fb0e48bd10613dfb0ed5912d488/.travis.yml", "raw_url": "https://github.com/rust-lang/rust/raw/0da4dd009ec28fb0e48bd10613dfb0ed5912d488/.travis.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.travis.yml?ref=0da4dd009ec28fb0e48bd10613dfb0ed5912d488", "patch": "@@ -1,154 +0,0 @@\n-dist: xenial\n-language: bash\n-git:\n-  depth: 1\n-  quiet: true\n-\n-branches:\n-  # Don't build these branches\n-  except:\n-    # Used by bors\n-    - trying.tmp\n-    - staging.tmp\n-\n-cache:\n-  directories:\n-    - $HOME/.cargo\n-before_cache:\n-  - cargo install cargo-cache --debug\n-  - find $HOME/.cargo/bin/ ! -type d -exec strip {} \\;\n-  - cargo cache --autoclean\n-\n-env:\n-  global:\n-    - RUST_BACKTRACE=1\n-    - secure: \"OKulfkA5OGd/d1IhvBKzRkHQwMcWjzrzbimo7+5NhkUkWxndAzl+719TB3wWvIh1i2wXXrEXsyZkXM5FtRrHm55v1VKQ5ibjEvFg1w3NIg81iDyoLq186fLqywvxGkOAFPrsePPsBj5USd5xvhwwbrjO6L7/RK6Z8shBwOSc41s=\"\n-\n-before_install:\n-  - export CARGO_TARGET_DIR=\"$TRAVIS_BUILD_DIR/target\"\n-  - |\n-    case \"$TRAVIS_OS_NAME\" in\n-      linux ) HOST=x86_64-unknown-linux-gnu;;\n-      osx ) HOST=x86_64-apple-darwin;;\n-      windows ) HOST=x86_64-pc-windows-msvc;;\n-    esac\n-  - curl -sSL https://sh.rustup.rs | sh -s -- -y --default-host=\"$HOST\" --default-toolchain=nightly --profile=minimal\n-  - export PATH=\"$HOME/.cargo/bin:$PATH\"\n-install:\n-  - |\n-    if [[ -z ${INTEGRATION} ]]; then\n-      if ! rustup component add rustfmt; then\n-        TARGET=$(rustc -Vv | awk '/host/{print $2}')\n-        NIGHTLY=$(curl -s \"https://rust-lang.github.io/rustup-components-history/${TARGET}/rustfmt\")\n-        curl -sSL \"https://static.rust-lang.org/dist/${NIGHTLY}/rustfmt-nightly-${TARGET}.tar.xz\" | \\\n-        tar -xJf - --strip-components=3 -C ~/.cargo/bin\n-        rm -rf ~/.cargo/bin/doc\n-      fi\n-      if [[ \"$TRAVIS_OS_NAME\" == \"linux\" ]]; then\n-        . $HOME/.nvm/nvm.sh\n-        nvm install stable\n-        nvm use stable\n-        npm install remark-cli remark-lint remark-lint-maximum-line-length remark-preset-lint-recommended\n-      elif [[ \"$TRAVIS_OS_NAME\" == \"windows\" ]]; then\n-        choco install windows-sdk-10.1\n-      fi\n-    fi\n-\n-# disabling the integration tests in forks should be done with\n-# if: fork = false\n-# but this is currently buggy travis-ci/travis-ci#9118\n-matrix:\n-  fast_finish: true\n-  include:\n-    # Builds that are executed for every PR\n-    - os: linux\n-    # i686 toolchain could run on x86_64 system.\n-    - os: linux\n-      env: HOST_TOOLCHAIN=i686-unknown-linux-gnu\n-      addons:\n-        apt:\n-          packages:\n-            - gcc-multilib\n-            - libssl-dev:i386     # openssl dev in Cargo.toml\n-      if: branch IN (auto, try)\n-    - os: windows\n-      env: CARGO_INCREMENTAL=0 OS_WINDOWS=true\n-\n-    # Builds that are only executed when a PR is r+ed or a try build is started\n-    # We don't want to run these always because they go towards\n-    # the build limit within the Travis rust-lang account.\n-    # The jobs are approximately sorted by execution time\n-    - os: osx\n-      if: branch IN (auto, try)\n-    - env: INTEGRATION=rust-lang/rls\n-      if: repo =~ /^rust-lang\\/rust-clippy$/ AND branch IN (auto, try)\n-    - env: INTEGRATION=rust-lang/cargo\n-      if: repo =~ /^rust-lang\\/rust-clippy$/ AND branch IN (auto, try)\n-    - env: INTEGRATION=rust-lang/chalk\n-      if: repo =~ /^rust-lang\\/rust-clippy$/ AND branch IN (auto, try)\n-    - env: INTEGRATION=Geal/nom\n-      if: repo =~ /^rust-lang\\/rust-clippy$/ AND branch IN (auto, try)\n-    - env: INTEGRATION=rust-lang/rustfmt\n-      if: repo =~ /^rust-lang\\/rust-clippy$/ AND branch IN (auto, try)\n-    - env: INTEGRATION=hyperium/hyper\n-      if: repo =~ /^rust-lang\\/rust-clippy$/ AND branch IN (auto, try)\n-    - env: INTEGRATION=rust-itertools/itertools\n-      if: repo =~ /^rust-lang\\/rust-clippy$/ AND branch IN (auto, try)\n-    # FIXME: rustc ICE on `serde_test_suite`\n-    # - env: INTEGRATION=serde-rs/serde\n-    #   if: repo =~ /^rust-lang\\/rust-clippy$/ AND branch IN (auto, try)\n-    - env: INTEGRATION=rust-lang/stdarch\n-      if: repo =~ /^rust-lang\\/rust-clippy$/ AND branch IN (auto, try)\n-    - env: INTEGRATION=rust-random/rand\n-      if: repo =~ /^rust-lang\\/rust-clippy$/ AND branch IN (auto, try)\n-    - env: INTEGRATION=rust-lang/futures-rs\n-      if: repo =~ /^rust-lang\\/rust-clippy$/ AND branch IN (auto, try)\n-    - env: INTEGRATION=Marwes/combine\n-      if: repo =~ /^rust-lang\\/rust-clippy$/ AND branch IN (auto, try)\n-    - env: INTEGRATION=rust-lang-nursery/failure\n-      if: repo =~ /^rust-lang\\/rust-clippy$/ AND branch IN (auto, try)\n-    - env: INTEGRATION=rust-lang/log\n-      if: repo =~ /^rust-lang\\/rust-clippy$/ AND branch IN (auto, try)\n-    - env: INTEGRATION=chronotope/chrono\n-      if: repo =~ /^rust-lang\\/rust-clippy$/ AND branch IN (auto, try)\n-  allow_failures:\n-    - os: windows\n-      env: CARGO_INCREMENTAL=0 OS_WINDOWS=true\n-\n-before_script:\n-  - |\n-    if [[ \"$TRAVIS_BRANCH\" == \"auto\" ]] || [[ \"$TRAVIS_BRANCH\" == \"try\" ]]; then\n-      PR=$(echo \"$TRAVIS_COMMIT_MESSAGE\" | grep -o \"#[0-9]*\" | head -1 | sed 's/^#//g')\n-      output=$(curl -H \"Authorization: token $GITHUB_API_TOKEN\" -s \"https://api.github.com/repos/rust-lang/rust-clippy/pulls/$PR\" | \\\n-        python -c \"import sys, json; print(json.load(sys.stdin)['body'])\" | \\\n-        grep \"^changelog: \" | \\\n-        sed \"s/changelog: //g\")\n-      if [[ -z \"$output\" ]]; then\n-        echo \"ERROR: PR body must contain 'changelog: ...'\"\n-        exit 1\n-      elif [[ \"$output\" = \"none\" ]]; then\n-        echo \"WARNING: changelog is 'none'\"\n-      fi\n-    fi\n-  - |\n-    rm rust-toolchain\n-    ./setup-toolchain.sh\n-  - |\n-    SYSROOT=$(rustc --print sysroot)\n-    case \"$TRAVIS_OS_NAME\" in\n-      windows ) export PATH=\"${SYSROOT}/bin:${PATH}\" ;;\n-      linux ) export LD_LIBRARY_PATH=\"${SYSROOT}/lib${LD_LIBRARY_PATH+:${LD_LIBRARY_PATH}}\" ;;\n-      osx )\n-        # See <https://github.com/nteract/nteract/issues/1523#issuecomment-301623519>\n-        sudo mkdir -p /usr/local/lib\n-        sudo find \"$SYSROOT/lib\" -maxdepth 1 -name '*.dylib' -exec ln -s {} /usr/local/lib \\;\n-        ;;\n-    esac\n-\n-script:\n-  - |\n-    if [[ -n ${INTEGRATION} ]]; then\n-      cargo test --test integration --features integration && sleep 5\n-    else\n-      ./ci/base-tests.sh && sleep 5\n-    fi"}, {"sha": "c1a410cf5c82deacf4b2affef8832cc630dbed7c", "filename": "Cargo.toml", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6835e2d8e0983bd84fbd3795be34eb49118cca42/Cargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/6835e2d8e0983bd84fbd3795be34eb49118cca42/Cargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.toml?ref=6835e2d8e0983bd84fbd3795be34eb49118cca42", "patch": "@@ -18,9 +18,7 @@ build = \"build.rs\"\n edition = \"2018\"\n publish = false\n \n-[badges]\n-travis-ci = { repository = \"rust-lang/rust-clippy\" }\n-appveyor = { repository = \"rust-lang/rust-clippy\" }\n+# [badges]\n # FIXME(flip1995): Add GHA badge once rust-lang/crates.io#1838 is merged\n \n [[bin]]"}, {"sha": "628133a8a6684bf295a6fbf957aeffb27d69ba7c", "filename": "README.md", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6835e2d8e0983bd84fbd3795be34eb49118cca42/README.md", "raw_url": "https://github.com/rust-lang/rust/raw/6835e2d8e0983bd84fbd3795be34eb49118cca42/README.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/README.md?ref=6835e2d8e0983bd84fbd3795be34eb49118cca42", "patch": "@@ -1,7 +1,5 @@\n # Clippy\n \n-[![Build Status](https://travis-ci.com/rust-lang/rust-clippy.svg?branch=master)](https://travis-ci.com/rust-lang/rust-clippy)\n-[![Windows Build status](https://ci.appveyor.com/api/projects/status/id677xpw1dguo7iw?svg=true)](https://ci.appveyor.com/project/rust-lang-libs/rust-clippy)\n [![Clippy Test](https://github.com/rust-lang/rust-clippy/workflows/Clippy%20Test/badge.svg?branch=auto&event=push)](https://github.com/rust-lang/rust-clippy/actions?query=workflow%3A%22Clippy+Test%22+event%3Apush+branch%3Aauto)\n [![License: MIT OR Apache-2.0](https://img.shields.io/crates/l/clippy.svg)](#license)\n "}, {"sha": "bf6133e98a0644b6b616408ce6d1e483d1df2154", "filename": "appveyor.yml", "status": "removed", "additions": 0, "deletions": 47, "changes": 47, "blob_url": "https://github.com/rust-lang/rust/blob/0da4dd009ec28fb0e48bd10613dfb0ed5912d488/appveyor.yml", "raw_url": "https://github.com/rust-lang/rust/raw/0da4dd009ec28fb0e48bd10613dfb0ed5912d488/appveyor.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/appveyor.yml?ref=0da4dd009ec28fb0e48bd10613dfb0ed5912d488", "patch": "@@ -1,47 +0,0 @@\n-environment:\n-  global:\n-    PROJECT_NAME: rust-clippy\n-    RUST_BACKTRACE: 1\n-  matrix:\n-    #- TARGET: i686-pc-windows-gnu\n-    #- TARGET: i686-pc-windows-msvc\n-    #- TARGET: x86_64-pc-windows-gnu\n-    - TARGET: x86_64-pc-windows-msvc\n-\n-branches:\n-  # Only build AppVeyor on r+ and try branch\n-  only:\n-    - auto\n-    - try\n-\n-cache:\n-  - '%USERPROFILE%\\.cargo'\n-# before cache\n-after_test:\n-  - cargo install cargo-cache --debug\n-  - cargo cache --autoclean\n-\n-install:\n-  - curl -sSf -o rustup-init.exe https://win.rustup.rs/\n-  - rustup-init.exe -y --default-host %TARGET% --default-toolchain nightly --profile=minimal\n-  - set PATH=%USERPROFILE%\\.cargo\\bin;%PATH%\n-  - rustup component add rustfmt --toolchain nightly & exit 0 # Format test handles missing rustfmt\n-  - del rust-toolchain\n-  - cargo install rustup-toolchain-install-master\n-  - rustup-toolchain-install-master -f -n master -c rustc-dev\n-  - rustup override set master\n-  - rustc -V\n-  - cargo -V\n-\n-# Build settings, not to be confused with \"before_build\" and \"after_build\".\n-build: false\n-\n-build_script:\n-  - cargo build --features deny-warnings\n-\n-test_script:\n-  - cargo test --features deny-warnings\n-\n-notifications:\n-  - provider: Email\n-    on_build_success: false"}, {"sha": "125a566271d0de686d6f1bda6c034c86cc3a7a05", "filename": "ci/base-tests.sh", "status": "removed", "additions": 0, "deletions": 55, "changes": 55, "blob_url": "https://github.com/rust-lang/rust/blob/0da4dd009ec28fb0e48bd10613dfb0ed5912d488/ci%2Fbase-tests.sh", "raw_url": "https://github.com/rust-lang/rust/raw/0da4dd009ec28fb0e48bd10613dfb0ed5912d488/ci%2Fbase-tests.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/ci%2Fbase-tests.sh?ref=0da4dd009ec28fb0e48bd10613dfb0ed5912d488", "patch": "@@ -1,55 +0,0 @@\n-#!/usr/bin/env bash\n-set -ex\n-\n-echo \"Running clippy base tests\"\n-\n-PATH=$PATH:./node_modules/.bin\n-if [[ \"$TRAVIS_OS_NAME\" == \"linux\" ]]; then\n-  remark -f ./*.md -f doc/*.md > /dev/null\n-fi\n-# build clippy in debug mode and run tests\n-cargo build --features deny-warnings\n-cargo test --features deny-warnings\n-\n-(cd clippy_lints && cargo test --features deny-warnings)\n-(cd rustc_tools_util && cargo test --features deny-warnings)\n-(cd clippy_dev && cargo test --features deny-warnings)\n-\n-# make sure clippy can be called via ./path/to/cargo-clippy\n-(\n-  cd clippy_workspace_tests\n-  ../target/debug/cargo-clippy\n-)\n-\n-# Perform various checks for lint registration\n-cargo dev update_lints --check\n-cargo dev --limit-stderr-length\n-\n-# Check running clippy-driver without cargo\n-(\n-  # Check sysroot handling\n-  sysroot=$(./target/debug/clippy-driver --print sysroot)\n-  test \"$sysroot\" = \"$(rustc --print sysroot)\"\n-\n-  if [[ -z \"$OS_WINDOWS\" ]]; then\n-    desired_sysroot=/tmp\n-  else\n-    desired_sysroot=C:/tmp\n-  fi\n-  sysroot=$(./target/debug/clippy-driver --sysroot $desired_sysroot --print sysroot)\n-  test \"$sysroot\" = $desired_sysroot\n-\n-  sysroot=$(SYSROOT=$desired_sysroot ./target/debug/clippy-driver --print sysroot)\n-  test \"$sysroot\" = $desired_sysroot\n-\n-  # Make sure this isn't set - clippy-driver should cope without it\n-  unset CARGO_MANIFEST_DIR\n-\n-  # Run a lint and make sure it produces the expected output. It's also expected to exit with code 1\n-  # FIXME: How to match the clippy invocation in compile-test.rs?\n-  ./target/debug/clippy-driver -Dwarnings -Aunused -Zui-testing --emit metadata --crate-type bin tests/ui/cstring.rs 2> cstring.stderr && exit 1\n-  sed -e 's,tests/ui,$DIR,' -e '/= help/d' cstring.stderr > normalized.stderr\n-  diff normalized.stderr tests/ui/cstring.stderr\n-\n-  # TODO: CLIPPY_CONF_DIR / CARGO_MANIFEST_DIR\n-)"}]}