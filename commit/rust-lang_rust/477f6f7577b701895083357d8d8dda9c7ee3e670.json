{"sha": "477f6f7577b701895083357d8d8dda9c7ee3e670", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ3N2Y2Zjc1NzdiNzAxODk1MDgzMzU3ZDhkOGRkYTljN2VlM2U2NzA=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-10-26T10:25:17Z"}, "committer": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-10-26T15:07:00Z"}, "message": "Rollup merge of #55378 - Keruspe:bootstrap-linker, r=petrochenkov\n\nrustbuild: use configured linker to build boostrap\n\nCurrently, bootstrap uses it to compile everything, but x.py wasn't using it yet to build bootstrap itself.\nThis fixes the build for systems where the linker isn't called `cc`.", "tree": {"sha": "ca81e585d9dba76aba88a0e1379d36124b85362a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ca81e585d9dba76aba88a0e1379d36124b85362a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/477f6f7577b701895083357d8d8dda9c7ee3e670", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZ1R8CLMp8f2GxWoQ/vbIBR0OATwFAlvTLZUACgkQ/vbIBR0O\nATxwqQ/8C22wvSiL74bgl++ZeFjCHaydZJ9Tm5ZJUv/TWiAgFUUPwGS+9s2yReiZ\nxoWuKK/GqQhJMbSudjzmWsugYTWoT8yGfHGe2vtFrIQBw/dQAQTnzcVOMeJwxYMl\nmBojhopkaXqFYSXk7xmCgMua2qriQr7lluKyLCxU6asqY5rjoO6Y7qxPdwQupNzg\nSYQQJkeBHCOQqqok/kURqzd0VYnD4tdJElswnb3AQHKPUnRCIC54kUrKGYUwzbo9\nWAc4FTdEgmop89ZxzjnJaP2epuKRY2zW4K1insMx1gFQx3AN1wvsaXOkcaSW/lni\nz33l+GN2C+eom3SRT0O/nNOcKblkjQMvXx17/Yb0rhfY6jg92AHewY/v/SiPRFvb\nl1gnmORYg8Nj5+BUhmZT6qaJm9E/vaXw3CdrPF8d5v/ivy8okvvYWnUJEixAOdk0\nZCBBx3fu7W1erYlGN5pWPh2IrbmdK3RFjLJG6ZcOMVDFnPlQTPIZ2u84GY/02doD\nJh5jkthgWo3xE8b/9EHzViU4LgqH8RxgBlMuhFf450bwJ77SJoUnxBYDtFKi9Te8\njtLoPvG3C9cwPd7Bqx4qgfgccHEN2CTq5OwRTVL6ktP3gRDxObyBOm1EXYjuHOXf\nbLVB2nVZLwOzerdzbUz1lzORnr/SXPloSs+/C3ViypxaWL6VBoM=\n=6w64\n-----END PGP SIGNATURE-----", "payload": "tree ca81e585d9dba76aba88a0e1379d36124b85362a\nparent c5e223852c392268b1a58f5dd56785b42e0af4ca\nparent bc87c71d860d2b667a0981c059032240fd998955\nauthor kennytm <kennytm@gmail.com> 1540549517 +0800\ncommitter kennytm <kennytm@gmail.com> 1540566420 +0800\n\nRollup merge of #55378 - Keruspe:bootstrap-linker, r=petrochenkov\n\nrustbuild: use configured linker to build boostrap\n\nCurrently, bootstrap uses it to compile everything, but x.py wasn't using it yet to build bootstrap itself.\nThis fixes the build for systems where the linker isn't called `cc`.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/477f6f7577b701895083357d8d8dda9c7ee3e670", "html_url": "https://github.com/rust-lang/rust/commit/477f6f7577b701895083357d8d8dda9c7ee3e670", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/477f6f7577b701895083357d8d8dda9c7ee3e670/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c5e223852c392268b1a58f5dd56785b42e0af4ca", "url": "https://api.github.com/repos/rust-lang/rust/commits/c5e223852c392268b1a58f5dd56785b42e0af4ca", "html_url": "https://github.com/rust-lang/rust/commit/c5e223852c392268b1a58f5dd56785b42e0af4ca"}, {"sha": "bc87c71d860d2b667a0981c059032240fd998955", "url": "https://api.github.com/repos/rust-lang/rust/commits/bc87c71d860d2b667a0981c059032240fd998955", "html_url": "https://github.com/rust-lang/rust/commit/bc87c71d860d2b667a0981c059032240fd998955"}], "stats": {"total": 3, "additions": 3, "deletions": 0}, "files": [{"sha": "b5dc0090c8b9ce2652fe5862ce2d2103b3b06cb4", "filename": "src/bootstrap/bootstrap.py", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/477f6f7577b701895083357d8d8dda9c7ee3e670/src%2Fbootstrap%2Fbootstrap.py", "raw_url": "https://github.com/rust-lang/rust/raw/477f6f7577b701895083357d8d8dda9c7ee3e670/src%2Fbootstrap%2Fbootstrap.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbootstrap.py?ref=477f6f7577b701895083357d8d8dda9c7ee3e670", "patch": "@@ -632,6 +632,9 @@ def build_bootstrap(self):\n             target_features += [\"-crt-static\"]\n         if target_features:\n             env[\"RUSTFLAGS\"] += \"-C target-feature=\" + (\",\".join(target_features)) + \" \"\n+        target_linker = self.get_toml(\"linker\", build_section)\n+        if target_linker is not None:\n+            env[\"RUSTFLAGS\"] += \"-C linker=\" + target_linker + \" \"\n \n         env[\"PATH\"] = os.path.join(self.bin_root(), \"bin\") + \\\n             os.pathsep + env[\"PATH\"]"}]}