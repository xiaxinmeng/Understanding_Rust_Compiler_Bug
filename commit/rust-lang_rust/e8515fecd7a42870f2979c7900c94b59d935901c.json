{"sha": "e8515fecd7a42870f2979c7900c94b59d935901c", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU4NTE1ZmVjZDdhNDI4NzBmMjk3OWM3OTAwYzk0YjU5ZDkzNTkwMWM=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-09-01T15:16:08Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-09-01T15:16:08Z"}, "message": "split lib", "tree": {"sha": "42ef7161eaa642f03e098cab29e7bf629686e07a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/42ef7161eaa642f03e098cab29e7bf629686e07a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e8515fecd7a42870f2979c7900c94b59d935901c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e8515fecd7a42870f2979c7900c94b59d935901c", "html_url": "https://github.com/rust-lang/rust/commit/e8515fecd7a42870f2979c7900c94b59d935901c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e8515fecd7a42870f2979c7900c94b59d935901c/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4268fbeaa1e9f98e033c72afce5dc8333da4b4b7", "url": "https://api.github.com/repos/rust-lang/rust/commits/4268fbeaa1e9f98e033c72afce5dc8333da4b4b7", "html_url": "https://github.com/rust-lang/rust/commit/4268fbeaa1e9f98e033c72afce5dc8333da4b4b7"}], "stats": {"total": 73, "additions": 42, "deletions": 31}, "files": [{"sha": "5bbd210447ff8e559b35e7064961ec6a936ee27e", "filename": "crates/server/src/lib.rs", "status": "added", "additions": 34, "deletions": 0, "changes": 34, "blob_url": "https://github.com/rust-lang/rust/blob/e8515fecd7a42870f2979c7900c94b59d935901c/crates%2Fserver%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e8515fecd7a42870f2979c7900c94b59d935901c/crates%2Fserver%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fserver%2Fsrc%2Flib.rs?ref=e8515fecd7a42870f2979c7900c94b59d935901c", "patch": "@@ -0,0 +1,34 @@\n+#[macro_use]\n+extern crate failure;\n+#[macro_use]\n+extern crate serde_derive;\n+extern crate serde;\n+extern crate serde_json;\n+extern crate languageserver_types;\n+#[macro_use]\n+extern crate crossbeam_channel;\n+extern crate threadpool;\n+#[macro_use]\n+extern crate log;\n+extern crate drop_bomb;\n+extern crate url_serde;\n+extern crate walkdir;\n+extern crate libeditor;\n+extern crate libanalysis;\n+extern crate libsyntax2;\n+extern crate gen_lsp_server;\n+extern crate im;\n+extern crate relative_path;\n+\n+mod caps;\n+mod req;\n+mod conv;\n+mod main_loop;\n+mod vfs;\n+mod path_map;\n+mod server_world;\n+\n+pub type Result<T> = ::std::result::Result<T, ::failure::Error>;\n+pub use caps::server_capabilities;\n+pub use main_loop::main_loop;\n+"}, {"sha": "119f020d3b798e5c11a9287f0103c761f18239d2", "filename": "crates/server/src/main.rs", "status": "modified", "additions": 7, "deletions": 30, "changes": 37, "blob_url": "https://github.com/rust-lang/rust/blob/e8515fecd7a42870f2979c7900c94b59d935901c/crates%2Fserver%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e8515fecd7a42870f2979c7900c94b59d935901c/crates%2Fserver%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fserver%2Fsrc%2Fmain.rs?ref=e8515fecd7a42870f2979c7900c94b59d935901c", "patch": "@@ -1,38 +1,14 @@\n #[macro_use]\n-extern crate failure;\n-#[macro_use]\n-extern crate serde_derive;\n-extern crate serde;\n-extern crate serde_json;\n-extern crate languageserver_types;\n-extern crate drop_bomb;\n-#[macro_use]\n-extern crate crossbeam_channel;\n-extern crate threadpool;\n-#[macro_use]\n extern crate log;\n-extern crate url_serde;\n+#[macro_use]\n+extern crate failure;\n extern crate flexi_logger;\n-extern crate walkdir;\n-extern crate libeditor;\n-extern crate libanalysis;\n-extern crate libsyntax2;\n extern crate gen_lsp_server;\n-extern crate im;\n-extern crate relative_path;\n-\n-mod caps;\n-mod req;\n-mod conv;\n-mod main_loop;\n-mod vfs;\n-mod path_map;\n-mod server_world;\n+extern crate m;\n \n use flexi_logger::{Logger, Duplicate};\n use gen_lsp_server::{run_server, stdio_transport};\n-\n-pub type Result<T> = ::std::result::Result<T, ::failure::Error>;\n+use m::Result;\n \n fn main() -> Result<()> {\n     Logger::with_env_or_str(\"m=error\")\n@@ -57,8 +33,8 @@ fn main_inner() -> Result<()> {\n     let (receiver, sender, threads) = stdio_transport();\n     let root = ::std::env::current_dir()?;\n     run_server(\n-        caps::server_capabilities(),\n-        |r, s| main_loop::main_loop(root, r, s),\n+        m::server_capabilities(),\n+        |r, s| m::main_loop(root, r, s),\n         receiver,\n         sender,\n     )?;\n@@ -67,3 +43,4 @@ fn main_inner() -> Result<()> {\n     info!(\"... IO is down\");\n     Ok(())\n }\n+"}, {"sha": "610aa42643edde5f8341e128056207ff9ae0bf70", "filename": "crates/server/src/main_loop/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e8515fecd7a42870f2979c7900c94b59d935901c/crates%2Fserver%2Fsrc%2Fmain_loop%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e8515fecd7a42870f2979c7900c94b59d935901c/crates%2Fserver%2Fsrc%2Fmain_loop%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fserver%2Fsrc%2Fmain_loop%2Fmod.rs?ref=e8515fecd7a42870f2979c7900c94b59d935901c", "patch": "@@ -26,7 +26,7 @@ enum Task {\n     Notify(RawNotification),\n }\n \n-pub(super) fn main_loop(\n+pub fn main_loop(\n     root: PathBuf,\n     msg_receriver: &mut Receiver<RawMessage>,\n     msg_sender: &mut Sender<RawMessage>,"}]}