{"sha": "8702591e741492b282aa3b007a70716480145d1b", "node_id": "C_kwDOAAsO6NoAKDg3MDI1OTFlNzQxNDkyYjI4MmFhM2IwMDdhNzA3MTY0ODAxNDVkMWI", "commit": {"author": {"name": "Nicholas Nethercote", "email": "n.nethercote@gmail.com", "date": "2023-05-01T08:05:05Z"}, "committer": {"name": "Nicholas Nethercote", "email": "n.nethercote@gmail.com", "date": "2023-05-04T21:04:06Z"}, "message": "Don't print backtrace on ICEs in `issue-86800.rs`.\n\nBecause it then just has to be filtered out.\n\nThis change makes this test more like these other tests:\n- tests/ui/treat-err-as-bug/err.rs\n- tests/ui/treat-err-as-bug/delay_span_bug.rs\n- tests/ui/mir/validate/storage-live.rs\n- tests/ui/associated-inherent-types/bugs/ice-substitution.rs\n- tests/ui/layout/valid_range_oob.rs", "tree": {"sha": "29cbe079ccef54e2b30774afde1a6460ae164c01", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/29cbe079ccef54e2b30774afde1a6460ae164c01"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8702591e741492b282aa3b007a70716480145d1b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8702591e741492b282aa3b007a70716480145d1b", "html_url": "https://github.com/rust-lang/rust/commit/8702591e741492b282aa3b007a70716480145d1b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8702591e741492b282aa3b007a70716480145d1b/comments", "author": {"login": "nnethercote", "id": 1940286, "node_id": "MDQ6VXNlcjE5NDAyODY=", "avatar_url": "https://avatars.githubusercontent.com/u/1940286?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nnethercote", "html_url": "https://github.com/nnethercote", "followers_url": "https://api.github.com/users/nnethercote/followers", "following_url": "https://api.github.com/users/nnethercote/following{/other_user}", "gists_url": "https://api.github.com/users/nnethercote/gists{/gist_id}", "starred_url": "https://api.github.com/users/nnethercote/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nnethercote/subscriptions", "organizations_url": "https://api.github.com/users/nnethercote/orgs", "repos_url": "https://api.github.com/users/nnethercote/repos", "events_url": "https://api.github.com/users/nnethercote/events{/privacy}", "received_events_url": "https://api.github.com/users/nnethercote/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nnethercote", "id": 1940286, "node_id": "MDQ6VXNlcjE5NDAyODY=", "avatar_url": "https://avatars.githubusercontent.com/u/1940286?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nnethercote", "html_url": "https://github.com/nnethercote", "followers_url": "https://api.github.com/users/nnethercote/followers", "following_url": "https://api.github.com/users/nnethercote/following{/other_user}", "gists_url": "https://api.github.com/users/nnethercote/gists{/gist_id}", "starred_url": "https://api.github.com/users/nnethercote/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nnethercote/subscriptions", "organizations_url": "https://api.github.com/users/nnethercote/orgs", "repos_url": "https://api.github.com/users/nnethercote/repos", "events_url": "https://api.github.com/users/nnethercote/events{/privacy}", "received_events_url": "https://api.github.com/users/nnethercote/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "473f916d836cc662c5bdbb0d40af9fb4678fab9e", "url": "https://api.github.com/repos/rust-lang/rust/commits/473f916d836cc662c5bdbb0d40af9fb4678fab9e", "html_url": "https://github.com/rust-lang/rust/commit/473f916d836cc662c5bdbb0d40af9fb4678fab9e"}], "stats": {"total": 24, "additions": 5, "deletions": 19}, "files": [{"sha": "ec4fda322d04f1bf3e4874be3f2944e2b827053f", "filename": "tests/ui/impl-trait/issues/issue-86800.rs", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/8702591e741492b282aa3b007a70716480145d1b/tests%2Fui%2Fimpl-trait%2Fissues%2Fissue-86800.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8702591e741492b282aa3b007a70716480145d1b/tests%2Fui%2Fimpl-trait%2Fissues%2Fissue-86800.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fimpl-trait%2Fissues%2Fissue-86800.rs?ref=8702591e741492b282aa3b007a70716480145d1b", "patch": "@@ -1,14 +1,12 @@\n #![feature(type_alias_impl_trait)]\n \n // edition:2021\n-// unset-rustc-env:RUST_BACKTRACE\n // compile-flags:-Z treat-err-as-bug=1\n-// error-pattern:stack backtrace:\n+// error-pattern: aborting due to `-Z treat-err-as-bug=1`\n // failure-status:101\n-// normalize-stderr-test \"note: .*\" -> \"\"\n-// normalize-stderr-test \"thread 'rustc' .*\" -> \"\"\n-// normalize-stderr-test \" +[0-9]+:.*\\n\" -> \"\"\n-// normalize-stderr-test \" +at .*\\n\" -> \"\"\n+// normalize-stderr-test \".*note: .*\\n\\n\" -> \"\"\n+// normalize-stderr-test \"thread 'rustc' panicked.*\\n\" -> \"\"\n+// rustc-env:RUST_BACKTRACE=0\n \n use std::future::Future;\n "}, {"sha": "facab390d1524915c666a1adca8b6f8c262dfdae", "filename": "tests/ui/impl-trait/issues/issue-86800.stderr", "status": "modified", "additions": 1, "deletions": 13, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/8702591e741492b282aa3b007a70716480145d1b/tests%2Fui%2Fimpl-trait%2Fissues%2Fissue-86800.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8702591e741492b282aa3b007a70716480145d1b/tests%2Fui%2Fimpl-trait%2Fissues%2Fissue-86800.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fimpl-trait%2Fissues%2Fissue-86800.stderr?ref=8702591e741492b282aa3b007a70716480145d1b", "patch": "@@ -1,24 +1,12 @@\n error: unconstrained opaque type\n-  --> $DIR/issue-86800.rs:33:34\n+  --> $DIR/issue-86800.rs:31:34\n    |\n LL | type TransactionFuture<'__, O> = impl '__ + Future<Output = TransactionResult<O>>;\n    |                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n-   = \n-\n-\n-stack backtrace:\n-\n error: the compiler unexpectedly panicked. this is a bug.\n \n-\n-\n-\n-\n-\n-\n query stack during panic:\n #0 [type_of] computing type of `TransactionFuture::{opaque#0}`\n #1 [check_mod_item_types] checking item types in top-level module\n-#2 [analysis] running analysis passes on this crate\n end of query stack"}]}