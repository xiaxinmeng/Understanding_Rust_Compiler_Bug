{"sha": "928d14bcd1976ffd33e743aa09c7c22a063bf87c", "node_id": "C_kwDOAAsO6NoAKDkyOGQxNGJjZDE5NzZmZmQzM2U3NDNhYTA5YzdjMjJhMDYzYmY4N2M", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-11-13T09:13:41Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-11-13T09:13:41Z"}, "message": "Auto merge of #104351 - JohnTitor:rollup-ikh2dzr, r=JohnTitor\n\nRollup of 5 pull requests\n\nSuccessful merges:\n\n - #103650 (rustdoc: change `.src-line-numbers > span` to `.src-line-numbers > a`)\n - #104177 (rustdoc: use consistent \"popover\" styling for notable traits)\n - #104318 (Move tests)\n - #104323 (rustdoc: remove no-op CSS `.scrape-help { background: transparent }`)\n - #104345 (Fix up a Fluent message)\n\nFailed merges:\n\nr? `@ghost`\n`@rustbot` modify labels: rollup", "tree": {"sha": "d72ace36b8b611dc7d99a23da139c7aab5991925", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d72ace36b8b611dc7d99a23da139c7aab5991925"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/928d14bcd1976ffd33e743aa09c7c22a063bf87c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/928d14bcd1976ffd33e743aa09c7c22a063bf87c", "html_url": "https://github.com/rust-lang/rust/commit/928d14bcd1976ffd33e743aa09c7c22a063bf87c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/928d14bcd1976ffd33e743aa09c7c22a063bf87c/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3be81dd0cedef3c83fba7047857418633708890f", "url": "https://api.github.com/repos/rust-lang/rust/commits/3be81dd0cedef3c83fba7047857418633708890f", "html_url": "https://github.com/rust-lang/rust/commit/3be81dd0cedef3c83fba7047857418633708890f"}, {"sha": "05cd26b22dc1981e89495bc5ad2282aaaec60c51", "url": "https://api.github.com/repos/rust-lang/rust/commits/05cd26b22dc1981e89495bc5ad2282aaaec60c51", "html_url": "https://github.com/rust-lang/rust/commit/05cd26b22dc1981e89495bc5ad2282aaaec60c51"}], "stats": {"total": 418, "additions": 239, "deletions": 179}, "files": [{"sha": "c9d83746d5454debb5f9e21fb847cc1a3cd863bb", "filename": "compiler/rustc_error_messages/locales/en-US/infer.ftl", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/compiler%2Frustc_error_messages%2Flocales%2Fen-US%2Finfer.ftl", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/compiler%2Frustc_error_messages%2Flocales%2Fen-US%2Finfer.ftl", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_error_messages%2Flocales%2Fen-US%2Finfer.ftl?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "patch": "@@ -126,10 +126,10 @@ infer_data_lifetime_flow = ...but data with one lifetime flows into the other he\n infer_declared_multiple = this type is declared with multiple lifetimes...\n infer_types_declared_different = these two types are declared with different lifetimes...\n infer_data_flows = ...but data{$label_var1_exists ->\n-    [true] -> {\" \"}from `{$label_var1}`\n+    [true] {\" \"}from `{$label_var1}`\n     *[false] -> {\"\"}\n } flows{$label_var2_exists ->\n-    [true] -> {\" \"}into `{$label_var2}`\n+    [true] {\" \"}into `{$label_var2}`\n     *[false] -> {\"\"}\n } here\n "}, {"sha": "8731efb5e87469df5771f938ef9dc1521d9d7902", "filename": "src/librustdoc/html/render/mod.rs", "status": "modified", "additions": 3, "deletions": 8, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "patch": "@@ -1312,9 +1312,7 @@ pub(crate) fn notable_traits_button(ty: &clean::Type, cx: &mut Context<'_>) -> O\n     if has_notable_trait {\n         cx.types_with_notable_traits.insert(ty.clone());\n         Some(format!(\n-            \"<span class=\\\"notable-traits\\\" data-ty=\\\"{ty}\\\">\\\n-                <span class=\\\"notable-traits-tooltip\\\">\u24d8</span>\\\n-            </span>\",\n+            \" <a href=\\\"#\\\" class=\\\"notable-traits\\\" data-ty=\\\"{ty}\\\">\u24d8</a>\",\n             ty = Escape(&format!(\"{:#}\", ty.print(cx))),\n         ))\n     } else {\n@@ -1343,7 +1341,7 @@ fn notable_traits_decl(ty: &clean::Type, cx: &Context<'_>) -> (String, String) {\n                 if out.is_empty() {\n                     write!(\n                         &mut out,\n-                        \"<h3 class=\\\"notable\\\">Notable traits for <code>{}</code></h3>\\\n+                        \"<h3>Notable traits for <code>{}</code></h3>\\\n                      <pre class=\\\"content\\\"><code>\",\n                         impl_.for_.print(cx)\n                     );\n@@ -2939,9 +2937,6 @@ fn render_call_locations(w: &mut Buffer, cx: &mut Context<'_>, item: &clean::Ite\n         })()\n         .unwrap_or(rustc_span::DUMMY_SP);\n \n-        // The root path is the inverse of Context::current\n-        let root_path = vec![\"../\"; cx.current.len() - 1].join(\"\");\n-\n         let mut decoration_info = FxHashMap::default();\n         decoration_info.insert(\"highlight focus\", vec![byte_ranges.remove(0)]);\n         decoration_info.insert(\"highlight\", byte_ranges);\n@@ -2951,7 +2946,7 @@ fn render_call_locations(w: &mut Buffer, cx: &mut Context<'_>, item: &clean::Ite\n             contents_subset,\n             file_span,\n             cx,\n-            &root_path,\n+            &cx.root_path(),\n             highlight::DecorationInfo(decoration_info),\n             sources::SourceContext::Embedded { offset: line_min, needs_expansion },\n         );"}, {"sha": "50135d6019006633eb804053085c1b8bf95a2b51", "filename": "src/librustdoc/html/sources.rs", "status": "modified", "additions": 7, "deletions": 6, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Flibrustdoc%2Fhtml%2Fsources.rs", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Flibrustdoc%2Fhtml%2Fsources.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fsources.rs?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "patch": "@@ -276,25 +276,26 @@ pub(crate) fn print_src(\n     let mut line_numbers = Buffer::empty_from(buf);\n     let extra;\n     line_numbers.write_str(\"<pre class=\\\"src-line-numbers\\\">\");\n+    let current_href = &context\n+        .href_from_span(clean::Span::new(file_span), false)\n+        .expect(\"only local crates should have sources emitted\");\n     match source_context {\n         SourceContext::Standalone => {\n             extra = None;\n             for line in 1..=lines {\n-                writeln!(line_numbers, \"<span id=\\\"{0}\\\">{0}</span>\", line)\n+                writeln!(line_numbers, \"<a href=\\\"#{line}\\\" id=\\\"{line}\\\">{line}</a>\")\n             }\n         }\n         SourceContext::Embedded { offset, needs_expansion } => {\n             extra =\n                 if needs_expansion { Some(r#\"<span class=\"expand\">&varr;</span>\"#) } else { None };\n-            for line in 1..=lines {\n-                writeln!(line_numbers, \"<span>{0}</span>\", line + offset)\n+            for line_number in 1..=lines {\n+                let line = line_number + offset;\n+                writeln!(line_numbers, \"<span>{line}</span>\")\n             }\n         }\n     }\n     line_numbers.write_str(\"</pre>\");\n-    let current_href = &context\n-        .href_from_span(clean::Span::new(file_span), false)\n-        .expect(\"only local crates should have sources emitted\");\n     highlight::render_source_with_highlighting(\n         s,\n         buf,"}, {"sha": "3f295b96dc56d20ba82d8dd8133c9881e04a292b", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 26, "deletions": 58, "changes": 84, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "patch": "@@ -579,15 +579,16 @@ ul.block, .block li {\n \tborder-color: var(--example-line-numbers-border-color);\n }\n \n-.src-line-numbers span {\n-\tcursor: pointer;\n+.src-line-numbers a, .src-line-numbers span {\n \tcolor: var(--src-line-numbers-span-color);\n }\n-.src-line-numbers .line-highlighted {\n-\tbackground-color: var(--src-line-number-highlighted-background-color);\n-}\n .src-line-numbers :target {\n \tbackground-color: transparent;\n+\tborder-right: none;\n+\tpadding-right: 0;\n+}\n+.src-line-numbers .line-highlighted {\n+\tbackground-color: var(--src-line-number-highlighted-background-color);\n }\n \n .search-loading {\n@@ -928,13 +929,14 @@ so that we can apply CSS-filters to change the arrow color in themes */\n \tborder-radius: 3px;\n \tborder: 1px solid var(--border-color);\n \tfont-size: 1rem;\n+\t--popover-arrow-offset: 11px;\n }\n \n /* This rule is to draw the little arrow connecting the settings menu to the gear icon. */\n .popover::before {\n \tcontent: '';\n \tposition: absolute;\n-\tright: 11px;\n+\tright: var(--popover-arrow-offset);\n \tborder: solid var(--border-color);\n \tborder-width: 1px 1px 0 0;\n \tdisplay: inline-block;\n@@ -951,10 +953,7 @@ so that we can apply CSS-filters to change the arrow color in themes */\n /* use larger max-width for help popover, but not for help.html */\n #help.popover {\n \tmax-width: 600px;\n-}\n-\n-#help.popover::before {\n-\tright: 48px;\n+\t--popover-arrow-offset: 48px;\n }\n \n #help dt {\n@@ -1273,54 +1272,34 @@ h3.variant {\n \tborder-right: 3px solid var(--target-border-color);\n }\n \n-.notable-traits-tooltip {\n-\tdisplay: inline-block;\n-\tcursor: pointer;\n-}\n-\n-.notable-traits .notable-traits-tooltiptext {\n-\tdisplay: inline-block;\n-\tvisibility: hidden;\n+.notable-traits {\n+\tcolor: inherit;\n+\tmargin-right: 15px;\n+\tposition: relative;\n }\n \n-.notable-traits-tooltiptext {\n-\tpadding: 5px 3px 3px 3px;\n-\tborder-radius: 6px;\n-\tmargin-left: 5px;\n-\tz-index: 10;\n-\tfont-size: 1rem;\n-\tcursor: default;\n+/* placeholder thunk so that the mouse can easily travel from \"(i)\" to popover\n+\tthe resulting \"hover tunnel\" is a stepped triangle, approximating\n+\thttps://bjk5.com/post/44698559168/breaking-down-amazons-mega-dropdown */\n+.notable-traits:hover::after {\n \tposition: absolute;\n-\tborder: 1px solid;\n-}\n-\n-.notable-traits-tooltip::after {\n-\t/* The margin on the tooltip does not capture hover events,\n-\t   this extends the area of hover enough so that mouse hover is not\n-\t   lost when moving the mouse to the tooltip */\n-\tcontent: \"\\00a0\\00a0\\00a0\";\n-}\n-\n-.notable-traits-tooltiptext .docblock {\n-\tmargin: 0;\n+\ttop: calc(100% - 10px);\n+\tleft: -15px;\n+\tright: -15px;\n+\theight: 20px;\n+\tcontent: \"\\00a0\";\n }\n \n-.notable-traits-tooltiptext .notable {\n-\tfont-size: 1.1875rem;\n-\tfont-weight: 600;\n-\tdisplay: block;\n+.notable .docblock {\n+\tmargin: 0.25em 0.5em;\n }\n \n-.notable-traits-tooltiptext pre, .notable-traits-tooltiptext code {\n+.notable .docblock pre, .notable .docblock code {\n \tbackground: transparent;\n-}\n-\n-.notable-traits-tooltiptext .docblock pre.content {\n \tmargin: 0;\n \tpadding: 0;\n \tfont-size: 1.25rem;\n \twhite-space: pre-wrap;\n-\toverflow: hidden;\n }\n \n .search-failed {\n@@ -1363,12 +1342,6 @@ h3.variant {\n \tfont-size: 1rem;\n }\n \n-.notable-traits {\n-\tcursor: pointer;\n-\tz-index: 2;\n-\tmargin-left: 5px;\n-}\n-\n #sidebar-toggle {\n \tposition: sticky;\n \ttop: 0;\n@@ -1853,11 +1826,6 @@ in storage.js\n \t\tborder-bottom: 1px solid;\n \t}\n \n-\t.notable-traits .notable-traits-tooltiptext {\n-\t\tleft: 0;\n-\t\ttop: 100%;\n-\t}\n-\n \t/* We don't display the help button on mobile devices. */\n \t#help-button {\n \t\tdisplay: none;\n@@ -1982,7 +1950,6 @@ in storage.js\n \tfont-size: 12px;\n \tposition: relative;\n \tbottom: 1px;\n-\tbackground: transparent;\n \tborder-width: 1px;\n \tborder-style: solid;\n \tborder-radius: 50px;\n@@ -2044,6 +2011,7 @@ in storage.js\n \tpadding: 14px 0;\n }\n \n+.scraped-example .code-wrapper .src-line-numbers a,\n .scraped-example .code-wrapper .src-line-numbers span {\n \tpadding: 0 14px;\n }"}, {"sha": "db311bccd6dc4a6997d9c40fe53c58392339af90", "filename": "src/librustdoc/html/static/css/themes/ayu.css", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "patch": "@@ -169,10 +169,6 @@ details.rustdoc-toggle > summary::before {\n \tborder-color: transparent #314559 transparent transparent;\n }\n \n-.notable-traits-tooltiptext {\n-\tbackground-color: #314559;\n-}\n-\n #titles > button.selected {\n \tbackground-color: #141920 !important;\n \tborder-bottom: 1px solid #ffb44c !important;"}, {"sha": "b2f2c77f5475ae66f74321bfbf0cd6803f6c6ba1", "filename": "src/librustdoc/html/static/css/themes/dark.css", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "patch": "@@ -92,10 +92,6 @@ details.rustdoc-toggle > summary::before {\n \tborder-color: transparent black transparent transparent;\n }\n \n-.notable-traits-tooltiptext {\n-\tbackground-color: #111;\n-}\n-\n #titles > button:not(.selected) {\n \tbackground-color: #252525;\n \tborder-top-color: #252525;"}, {"sha": "e81327956888b142befd662515dabab42c3c6ff0", "filename": "src/librustdoc/html/static/css/themes/light.css", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "patch": "@@ -84,10 +84,6 @@ body.source .example-wrap pre.rust a {\n \tborder-color: transparent black transparent transparent;\n }\n \n-.notable-traits-tooltiptext {\n-\tbackground-color: #eee;\n-}\n-\n #titles > button:not(.selected) {\n \tbackground-color: #e6e6e6;\n \tborder-top-color: #e6e6e6;"}, {"sha": "0538762e44d031368f822c72857baae46b1bf0ce", "filename": "src/librustdoc/html/static/js/main.js", "status": "modified", "additions": 51, "deletions": 9, "changes": 60, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fmain.js?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "patch": "@@ -850,18 +850,33 @@ function loadCss(cssUrl) {\n         }\n         hideNotable();\n         const ty = e.getAttribute(\"data-ty\");\n-        const tooltip = e.getElementsByClassName(\"notable-traits-tooltip\")[0];\n         const wrapper = document.createElement(\"div\");\n         wrapper.innerHTML = \"<div class=\\\"docblock\\\">\" + window.NOTABLE_TRAITS[ty] + \"</div>\";\n-        wrapper.className = \"notable-traits-tooltiptext\";\n-        tooltip.appendChild(wrapper);\n-        const pos = wrapper.getBoundingClientRect();\n-        tooltip.removeChild(wrapper);\n-        wrapper.style.top = (pos.top + window.scrollY) + \"px\";\n-        wrapper.style.left = (pos.left + window.scrollX) + \"px\";\n-        wrapper.style.width = pos.width + \"px\";\n+        wrapper.className = \"notable popover\";\n+        const focusCatcher = document.createElement(\"div\");\n+        focusCatcher.setAttribute(\"tabindex\", \"0\");\n+        focusCatcher.onfocus = hideNotable;\n+        wrapper.appendChild(focusCatcher);\n+        const pos = e.getBoundingClientRect();\n+        // 5px overlap so that the mouse can easily travel from place to place\n+        wrapper.style.top = (pos.top + window.scrollY + pos.height) + \"px\";\n+        wrapper.style.left = 0;\n+        wrapper.style.right = \"auto\";\n+        wrapper.style.visibility = \"hidden\";\n         const body = document.getElementsByTagName(\"body\")[0];\n         body.appendChild(wrapper);\n+        const wrapperPos = wrapper.getBoundingClientRect();\n+        // offset so that the arrow points at the center of the \"(i)\"\n+        const finalPos = pos.left + window.scrollX - wrapperPos.width + 24;\n+        if (finalPos > 0) {\n+            wrapper.style.left = finalPos + \"px\";\n+        } else {\n+            wrapper.style.setProperty(\n+                \"--popover-arrow-offset\",\n+                (wrapperPos.right - pos.right + 4) + \"px\"\n+            );\n+        }\n+        wrapper.style.visibility = \"\";\n         window.CURRENT_NOTABLE_ELEMENT = wrapper;\n         window.CURRENT_NOTABLE_ELEMENT.NOTABLE_BASE = e;\n         wrapper.onpointerleave = function(ev) {\n@@ -875,9 +890,31 @@ function loadCss(cssUrl) {\n         };\n     }\n \n+    function notableBlurHandler(event) {\n+        if (window.CURRENT_NOTABLE_ELEMENT &&\n+            !elemIsInParent(document.activeElement, window.CURRENT_NOTABLE_ELEMENT) &&\n+            !elemIsInParent(event.relatedTarget, window.CURRENT_NOTABLE_ELEMENT) &&\n+            !elemIsInParent(document.activeElement, window.CURRENT_NOTABLE_ELEMENT.NOTABLE_BASE) &&\n+            !elemIsInParent(event.relatedTarget, window.CURRENT_NOTABLE_ELEMENT.NOTABLE_BASE)\n+        ) {\n+            // Work around a difference in the focus behaviour between Firefox, Chrome, and Safari.\n+            // When I click the button on an already-opened notable trait popover, Safari\n+            // hides the popover and then immediately shows it again, while everyone else hides it\n+            // and it stays hidden.\n+            //\n+            // To work around this, make sure the click finishes being dispatched before\n+            // hiding the popover. Since `hideNotable()` is idempotent, this makes Safari behave\n+            // consistently with the other two.\n+            setTimeout(hideNotable, 0);\n+        }\n+    }\n+\n     function hideNotable() {\n         if (window.CURRENT_NOTABLE_ELEMENT) {\n-            window.CURRENT_NOTABLE_ELEMENT.NOTABLE_BASE.NOTABLE_FORCE_VISIBLE = false;\n+            if (window.CURRENT_NOTABLE_ELEMENT.NOTABLE_BASE.NOTABLE_FORCE_VISIBLE) {\n+                window.CURRENT_NOTABLE_ELEMENT.NOTABLE_BASE.focus();\n+                window.CURRENT_NOTABLE_ELEMENT.NOTABLE_BASE.NOTABLE_FORCE_VISIBLE = false;\n+            }\n             const body = document.getElementsByTagName(\"body\")[0];\n             body.removeChild(window.CURRENT_NOTABLE_ELEMENT);\n             window.CURRENT_NOTABLE_ELEMENT = null;\n@@ -891,7 +928,11 @@ function loadCss(cssUrl) {\n                 hideNotable();\n             } else {\n                 showNotable(this);\n+                window.CURRENT_NOTABLE_ELEMENT.setAttribute(\"tabindex\", \"0\");\n+                window.CURRENT_NOTABLE_ELEMENT.focus();\n+                window.CURRENT_NOTABLE_ELEMENT.onblur = notableBlurHandler;\n             }\n+            return false;\n         };\n         e.onpointerenter = function(ev) {\n             // If this is a synthetic touch event, ignore it. A click event will be along shortly.\n@@ -1018,6 +1059,7 @@ function loadCss(cssUrl) {\n         onEachLazy(document.querySelectorAll(\".search-form .popover\"), elem => {\n             elem.style.display = \"none\";\n         });\n+        hideNotable();\n     };\n \n     /**"}, {"sha": "5db768c1c5753aa063d1b9f828b67ef76f005660", "filename": "src/librustdoc/html/static/js/source-script.js", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsource-script.js", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsource-script.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsource-script.js?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "patch": "@@ -157,7 +157,7 @@ function highlightSourceLines(match) {\n         x.scrollIntoView();\n     }\n     onEachLazy(document.getElementsByClassName(\"src-line-numbers\"), e => {\n-        onEachLazy(e.getElementsByTagName(\"span\"), i_e => {\n+        onEachLazy(e.getElementsByTagName(\"a\"), i_e => {\n             removeClass(i_e, \"line-highlighted\");\n         });\n     });\n@@ -188,8 +188,13 @@ const handleSourceHighlight = (function() {\n \n     return ev => {\n         let cur_line_id = parseInt(ev.target.id, 10);\n-        // It can happen when clicking not on a line number span.\n-        if (isNaN(cur_line_id)) {\n+        // This event handler is attached to the entire line number column, but it should only\n+        // be run if one of the anchors is clicked. It also shouldn't do anything if the anchor\n+        // is clicked with a modifier key (to open a new browser tab).\n+        if (isNaN(cur_line_id) ||\n+            ev.ctrlKey ||\n+            ev.altKey ||\n+            ev.metaKey) {\n             return;\n         }\n         ev.preventDefault();"}, {"sha": "4c3943d8858307c729e5493042344d87c6be68f2", "filename": "src/test/rustdoc-gui/notable-trait.goml", "status": "modified", "additions": 53, "deletions": 44, "changes": 97, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Frustdoc-gui%2Fnotable-trait.goml", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Frustdoc-gui%2Fnotable-trait.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fnotable-trait.goml?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "patch": "@@ -22,31 +22,26 @@ assert-position: (\n )\n assert-position: (\n     \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n-    {\"x\": 951},\n+    {\"x\": 955},\n )\n-// The tooltip should be beside the `i`\n+// The tooltip should be below the `i`\n // Also, clicking the tooltip should bring its text into the DOM\n-assert-count: (\"//*[@class='notable-traits-tooltiptext']\", 0)\n+assert-count: (\"//*[@class='notable popover']\", 0)\n click: \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\"\n-assert-count: (\"//*[@class='notable-traits-tooltiptext']\", 1)\n+assert-count: (\"//*[@class='notable popover']\", 1)\n compare-elements-position-near: (\n     \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n-    \"//*[@class='notable-traits-tooltiptext']\",\n-    {\"y\": 2}\n+    \"//*[@class='notable popover']\",\n+    {\"y\": 30}\n )\n compare-elements-position-false: (\n     \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n-    \"//*[@class='notable-traits-tooltiptext']\",\n+    \"//*[@class='notable popover']\",\n     (\"x\")\n )\n-// The docblock should be flush with the border.\n-assert-css: (\n-    \"//*[@class='notable-traits-tooltiptext']/*[@class='docblock']\",\n-    {\"margin-left\": \"0px\"}\n-)\n click: \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\"\n move-cursor-to: \"//h1\"\n-assert-count: (\"//*[@class='notable-traits-tooltiptext']\", 0)\n+assert-count: (\"//*[@class='notable popover']\", 0)\n \n // Now only the `i` should be on the next line.\n size: (1055, 600)\n@@ -77,7 +72,7 @@ assert-position: (\n )\n assert-position: (\n     \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n-    {\"x\": 519},\n+    {\"x\": 523},\n )\n \n // Checking on mobile now.\n@@ -101,42 +96,28 @@ assert-position: (\n )\n assert-position: (\n     \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n-    {\"x\": 289},\n+    {\"x\": 293},\n )\n-// The tooltip should be below `i`\n+// The tooltip should STILL be below `i`\n click: \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\"\n-assert-count: (\"//*[@class='notable-traits-tooltiptext']\", 1)\n-compare-elements-position-near-false: (\n+assert-count: (\"//*[@class='notable popover']\", 1)\n+compare-elements-position-near: (\n     \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n-    \"//*[@class='notable-traits-tooltiptext']\",\n-    {\"y\": 2}\n+    \"//*[@class='notable popover']\",\n+    {\"y\": 30}\n )\n compare-elements-position-false: (\n     \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n-    \"//*[@class='notable-traits-tooltiptext']\",\n+    \"//*[@class='notable popover']\",\n     (\"x\")\n )\n-compare-elements-position-near: (\n-    \"//*[@id='method.create_an_iterator_from_read']\",\n-    \"//*[@class='notable-traits-tooltiptext']\",\n-    {\"x\": 10}\n-)\n-// The docblock should be flush with the border.\n-assert-css: (\n-    \"//*[@class='notable-traits-tooltiptext']/*[@class='docblock']\",\n-    {\"margin-left\": \"0px\"}\n+assert-position: (\n+    \"//*[@class='notable popover']\",\n+    {\"x\": 0}\n )\n click: \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\"\n move-cursor-to: \"//h1\"\n-assert-count: (\"//*[@class='notable-traits-tooltiptext']\", 0)\n-\n-// Checking on very small mobile. The `i` should be on its own line.\n-size: (365, 600)\n-compare-elements-position-false: (\n-    \"//*[@id='method.create_an_iterator_from_read']//a[text()='NotableStructWithLongName']\",\n-    \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n-    (\"y\", \"x\"),\n-)\n+assert-count: (\"//*[@class='notable popover']\", 0)\n \n // Now check the colors.\n define-function: (\n@@ -153,25 +134,25 @@ define-function: (\n         (\"reload\"),\n \n         (\"move-cursor-to\", \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\"),\n-        (\"assert-count\", (\".notable-traits-tooltiptext\", 1)),\n+        (\"assert-count\", (\".notable.popover\", 1)),\n \n         (\"assert-css\", (\n-             \".notable-traits-tooltiptext h3.notable\",\n+             \".notable.popover h3\",\n              {\"color\": |header_color|},\n              ALL,\n         )),\n         (\"assert-css\", (\n-             \".notable-traits-tooltiptext pre.content\",\n+             \".notable.popover pre\",\n              {\"color\": |content_color|},\n              ALL,\n         )),\n         (\"assert-css\", (\n-             \".notable-traits-tooltiptext pre.content a.struct\",\n+             \".notable.popover pre a.struct\",\n              {\"color\": |type_color|},\n              ALL,\n         )),\n         (\"assert-css\", (\n-             \".notable-traits-tooltiptext pre.content a.trait\",\n+             \".notable.popover pre a.trait\",\n              {\"color\": |trait_color|},\n              ALL,\n         )),\n@@ -210,3 +191,31 @@ call-function: (\n         \"trait_color\": \"rgb(110, 79, 201)\",\n     },\n )\n+\n+reload:\n+\n+// Check that pressing escape works\n+click: \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\"\n+move-cursor-to: \"//*[@class='notable popover']\"\n+assert-count: (\"//*[@class='notable popover']\", 1)\n+press-key: \"Escape\"\n+assert-count: (\"//*[@class='notable popover']\", 0)\n+\n+// Check that clicking outside works.\n+click: \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\"\n+assert-count: (\"//*[@class='notable popover']\", 1)\n+click: \".search-input\"\n+assert-count: (\"//*[@class='notable popover']\", 0)\n+\n+// Check that pressing tab over and over works.\n+click: \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\"\n+move-cursor-to: \"//*[@class='notable popover']\"\n+assert-count: (\"//*[@class='notable popover']\", 1)\n+press-key: \"Tab\"\n+press-key: \"Tab\"\n+press-key: \"Tab\"\n+press-key: \"Tab\"\n+press-key: \"Tab\"\n+press-key: \"Tab\"\n+press-key: \"Tab\"\n+assert-count: (\"//*[@class='notable popover']\", 0)"}, {"sha": "b3b837ad377c80bb74e8b2a7e81a181e8bb44fa0", "filename": "src/test/rustdoc-gui/source-code-page.goml", "status": "modified", "additions": 34, "deletions": 10, "changes": 44, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Frustdoc-gui%2Fsource-code-page.goml", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Frustdoc-gui%2Fsource-code-page.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsource-code-page.goml?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "patch": "@@ -2,17 +2,22 @@\n goto: \"file://\" + |DOC_PATH| + \"/src/test_docs/lib.rs.html\"\n show-text: true\n // Check that we can click on the line number.\n-click: \".src-line-numbers > span:nth-child(4)\" // This is the span for line 4.\n+click: \".src-line-numbers > a:nth-child(4)\" // This is the anchor for line 4.\n // Ensure that the page URL was updated.\n assert-document-property: ({\"URL\": \"lib.rs.html#4\"}, ENDS_WITH)\n assert-attribute: (\"//*[@id='4']\", {\"class\": \"line-highlighted\"})\n-// We now check that the good spans are highlighted\n+// Ensure that the default style, with the right border, isn't used.\n+assert-css: (\"//*[@id='4']\", {\"border-right-width\": \"0px\"})\n+reload:\n+assert-attribute: (\"//*[@id='4']\", {\"class\": \"line-highlighted\"})\n+assert-css: (\"//*[@id='4']\", {\"border-right-width\": \"0px\"})\n+// We now check that the good anchors are highlighted\n goto: \"file://\" + |DOC_PATH| + \"/src/test_docs/lib.rs.html#4-6\"\n-assert-attribute-false: (\".src-line-numbers > span:nth-child(3)\", {\"class\": \"line-highlighted\"})\n-assert-attribute: (\".src-line-numbers > span:nth-child(4)\", {\"class\": \"line-highlighted\"})\n-assert-attribute: (\".src-line-numbers > span:nth-child(5)\", {\"class\": \"line-highlighted\"})\n-assert-attribute: (\".src-line-numbers > span:nth-child(6)\", {\"class\": \"line-highlighted\"})\n-assert-attribute-false: (\".src-line-numbers > span:nth-child(7)\", {\"class\": \"line-highlighted\"})\n+assert-attribute-false: (\".src-line-numbers > a:nth-child(3)\", {\"class\": \"line-highlighted\"})\n+assert-attribute: (\".src-line-numbers > a:nth-child(4)\", {\"class\": \"line-highlighted\"})\n+assert-attribute: (\".src-line-numbers > a:nth-child(5)\", {\"class\": \"line-highlighted\"})\n+assert-attribute: (\".src-line-numbers > a:nth-child(6)\", {\"class\": \"line-highlighted\"})\n+assert-attribute-false: (\".src-line-numbers > a:nth-child(7)\", {\"class\": \"line-highlighted\"})\n \n define-function: (\n     \"check-colors\",\n@@ -21,12 +26,12 @@ define-function: (\n         (\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n         (\"reload\"),\n         (\"assert-css\", (\n-            \".src-line-numbers > span:not(.line-highlighted)\",\n+            \".src-line-numbers > a:not(.line-highlighted)\",\n             {\"color\": |color|, \"background-color\": |background_color|},\n             ALL,\n         )),\n         (\"assert-css\", (\n-            \".src-line-numbers > span.line-highlighted\",\n+            \".src-line-numbers > a.line-highlighted\",\n             {\"color\": |highlight_color|, \"background-color\": |highlight_background_color|},\n             ALL,\n         )),\n@@ -57,6 +62,25 @@ call-function: (\"check-colors\", {\n \n // This is to ensure that the content is correctly align with the line numbers.\n compare-elements-position: (\"//*[@id='1']\", \".rust > code > span\", (\"y\"))\n+// Check the `href` property so that users can treat anchors as links.\n+assert-property: (\".src-line-numbers > a:nth-child(1)\", {\n+    \"href\": \"file://\" + |DOC_PATH| + \"/src/test_docs/lib.rs.html#1\"\n+})\n+assert-property: (\".src-line-numbers > a:nth-child(2)\", {\n+    \"href\": \"file://\" + |DOC_PATH| + \"/src/test_docs/lib.rs.html#2\"\n+})\n+assert-property: (\".src-line-numbers > a:nth-child(3)\", {\n+    \"href\": \"file://\" + |DOC_PATH| + \"/src/test_docs/lib.rs.html#3\"\n+})\n+assert-property: (\".src-line-numbers > a:nth-child(4)\", {\n+    \"href\": \"file://\" + |DOC_PATH| + \"/src/test_docs/lib.rs.html#4\"\n+})\n+assert-property: (\".src-line-numbers > a:nth-child(5)\", {\n+    \"href\": \"file://\" + |DOC_PATH| + \"/src/test_docs/lib.rs.html#5\"\n+})\n+assert-property: (\".src-line-numbers > a:nth-child(6)\", {\n+    \"href\": \"file://\" + |DOC_PATH| + \"/src/test_docs/lib.rs.html#6\"\n+})\n \n // Assert that the line numbers text is aligned to the right.\n assert-css: (\".src-line-numbers\", {\"text-align\": \"right\"})\n@@ -66,7 +90,7 @@ assert-css: (\".src-line-numbers\", {\"text-align\": \"right\"})\n goto: \"file://\" + |DOC_PATH| + \"/src/test_docs/lib.rs.html\"\n // We use this assert-position to know where we will click.\n assert-position: (\"//*[@id='1']\", {\"x\": 104, \"y\": 112})\n-// We click on the left of the \"1\" span but still in the \"src-line-number\" `<pre>`.\n+// We click on the left of the \"1\" anchor but still in the \"src-line-number\" `<pre>`.\n click: (103, 103)\n assert-document-property: ({\"URL\": \"/lib.rs.html\"}, ENDS_WITH)\n "}, {"sha": "5959f9c7c5992338ce20676b568415b2ea1eb890", "filename": "src/test/rustdoc/check-source-code-urls-to-def.rs", "status": "modified", "additions": 16, "deletions": 16, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Frustdoc%2Fcheck-source-code-urls-to-def.rs", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Frustdoc%2Fcheck-source-code-urls-to-def.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fcheck-source-code-urls-to-def.rs?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "patch": "@@ -10,14 +10,14 @@ extern crate source_code;\n \n // @has 'src/foo/check-source-code-urls-to-def.rs.html'\n \n-// @has - '//a[@href=\"auxiliary/source-code-bar.rs.html#1-17\"]' 'bar'\n+// @has - '//pre[@class=\"rust\"]//a[@href=\"auxiliary/source-code-bar.rs.html#1-17\"]' 'bar'\n #[path = \"auxiliary/source-code-bar.rs\"]\n pub mod bar;\n \n-// @count - '//a[@href=\"auxiliary/source-code-bar.rs.html#5\"]' 4\n+// @count - '//pre[@class=\"rust\"]//a[@href=\"auxiliary/source-code-bar.rs.html#5\"]' 4\n use bar::Bar;\n-// @has - '//a[@href=\"auxiliary/source-code-bar.rs.html#13\"]' 'self'\n-// @has - '//a[@href=\"auxiliary/source-code-bar.rs.html#14\"]' 'Trait'\n+// @has - '//pre[@class=\"rust\"]//a[@href=\"auxiliary/source-code-bar.rs.html#13\"]' 'self'\n+// @has - '//pre[@class=\"rust\"]//a[@href=\"auxiliary/source-code-bar.rs.html#14\"]' 'Trait'\n use bar::sub::{self, Trait};\n \n pub struct Foo;\n@@ -28,29 +28,29 @@ impl Foo {\n \n fn babar() {}\n \n-// @has - '//a/@href' '/struct.String.html'\n-// @has - '//a/@href' '/primitive.u32.html'\n-// @has - '//a/@href' '/primitive.str.html'\n-// @count - '//a[@href=\"#23\"]' 5\n-// @has - '//a[@href=\"../../source_code/struct.SourceCode.html\"]' 'source_code::SourceCode'\n+// @has - '//pre[@class=\"rust\"]//a/@href' '/struct.String.html'\n+// @has - '//pre[@class=\"rust\"]//a/@href' '/primitive.u32.html'\n+// @has - '//pre[@class=\"rust\"]//a/@href' '/primitive.str.html'\n+// @count - '//pre[@class=\"rust\"]//a[@href=\"#23\"]' 5\n+// @has - '//pre[@class=\"rust\"]//a[@href=\"../../source_code/struct.SourceCode.html\"]' 'source_code::SourceCode'\n pub fn foo(a: u32, b: &str, c: String, d: Foo, e: bar::Bar, f: source_code::SourceCode) {\n     let x = 12;\n     let y: Foo = Foo;\n     let z: Bar = bar::Bar { field: Foo };\n     babar();\n-    // @has - '//a[@href=\"#26\"]' 'hello'\n+    // @has - '//pre[@class=\"rust\"]//a[@href=\"#26\"]' 'hello'\n     y.hello();\n }\n \n-// @has - '//a[@href=\"auxiliary/source-code-bar.rs.html#14\"]' 'bar::sub::Trait'\n-// @has - '//a[@href=\"auxiliary/source-code-bar.rs.html#14\"]' 'Trait'\n+// @has - '//pre[@class=\"rust\"]//a[@href=\"auxiliary/source-code-bar.rs.html#14\"]' 'bar::sub::Trait'\n+// @has - '//pre[@class=\"rust\"]//a[@href=\"auxiliary/source-code-bar.rs.html#14\"]' 'Trait'\n pub fn foo2<T: bar::sub::Trait, V: Trait>(t: &T, v: &V, b: bool) {}\n \n pub trait AnotherTrait {}\n pub trait WhyNot {}\n \n-// @has - '//a[@href=\"#49\"]' 'AnotherTrait'\n-// @has - '//a[@href=\"#50\"]' 'WhyNot'\n+// @has - '//pre[@class=\"rust\"]//a[@href=\"#49\"]' 'AnotherTrait'\n+// @has - '//pre[@class=\"rust\"]//a[@href=\"#50\"]' 'WhyNot'\n pub fn foo3<T, V>(t: &T, v: &V)\n where\n     T: AnotherTrait,\n@@ -59,11 +59,11 @@ where\n \n pub trait AnotherTrait2 {}\n \n-// @has - '//a[@href=\"#60\"]' 'AnotherTrait2'\n+// @has - '//pre[@class=\"rust\"]//a[@href=\"#60\"]' 'AnotherTrait2'\n pub fn foo4() {\n     let x: Vec<AnotherTrait2> = Vec::new();\n }\n \n-// @has - '//a[@href=\"../../foo/primitive.bool.html\"]' 'bool'\n+// @has - '//pre[@class=\"rust\"]//a[@href=\"../../foo/primitive.bool.html\"]' 'bool'\n #[doc(primitive = \"bool\")]\n mod whatever {}"}, {"sha": "f2ec8320a05259464874f15483906d95c7581435", "filename": "src/test/rustdoc/doc-notable_trait-slice.bare_fn_matches.html", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Frustdoc%2Fdoc-notable_trait-slice.bare_fn_matches.html", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Frustdoc%2Fdoc-notable_trait-slice.bare_fn_matches.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fdoc-notable_trait-slice.bare_fn_matches.html?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "patch": "@@ -1 +1 @@\n-<script type=\"text/json\" id=\"notable-traits-data\">{\"&amp;'static [SomeStruct]\":\"&lt;h3 class=\\\"notable\\\"&gt;Notable traits for &lt;code&gt;&amp;amp;[&lt;a class=\\\"struct\\\" href=\\\"struct.SomeStruct.html\\\" title=\\\"struct doc_notable_trait_slice::SomeStruct\\\"&gt;SomeStruct&lt;/a&gt;]&lt;/code&gt;&lt;/h3&gt;&lt;pre class=\\\"content\\\"&gt;&lt;code&gt;&lt;span class=\\\"where fmt-newline\\\"&gt;impl &lt;a class=\\\"trait\\\" href=\\\"trait.SomeTrait.html\\\" title=\\\"trait doc_notable_trait_slice::SomeTrait\\\"&gt;SomeTrait&lt;/a&gt; for &amp;amp;[&lt;a class=\\\"struct\\\" href=\\\"struct.SomeStruct.html\\\" title=\\\"struct doc_notable_trait_slice::SomeStruct\\\"&gt;SomeStruct&lt;/a&gt;]&lt;/span&gt;\"}</script>\n\\ No newline at end of file\n+<script type=\"text/json\" id=\"notable-traits-data\">{\"&amp;'static [SomeStruct]\":\"&lt;h3&gt;Notable traits for &lt;code&gt;&amp;amp;[&lt;a class=\\\"struct\\\" href=\\\"struct.SomeStruct.html\\\" title=\\\"struct doc_notable_trait_slice::SomeStruct\\\"&gt;SomeStruct&lt;/a&gt;]&lt;/code&gt;&lt;/h3&gt;&lt;pre class=\\\"content\\\"&gt;&lt;code&gt;&lt;span class=\\\"where fmt-newline\\\"&gt;impl &lt;a class=\\\"trait\\\" href=\\\"trait.SomeTrait.html\\\" title=\\\"trait doc_notable_trait_slice::SomeTrait\\\"&gt;SomeTrait&lt;/a&gt; for &amp;amp;[&lt;a class=\\\"struct\\\" href=\\\"struct.SomeStruct.html\\\" title=\\\"struct doc_notable_trait_slice::SomeStruct\\\"&gt;SomeStruct&lt;/a&gt;]&lt;/span&gt;\"}</script>\n\\ No newline at end of file"}, {"sha": "b426a4d7a8b7ba660183a36e66f09a120dd763f9", "filename": "src/test/rustdoc/doc-notable_trait.bare-fn.html", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Frustdoc%2Fdoc-notable_trait.bare-fn.html", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Frustdoc%2Fdoc-notable_trait.bare-fn.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fdoc-notable_trait.bare-fn.html?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "patch": "@@ -1 +1 @@\n-<script type=\"text/json\" id=\"notable-traits-data\">{\"SomeStruct\":\"&lt;h3 class=\\\"notable\\\"&gt;Notable traits for &lt;code&gt;&lt;a class=\\\"struct\\\" href=\\\"struct.SomeStruct.html\\\" title=\\\"struct doc_notable_trait::SomeStruct\\\"&gt;SomeStruct&lt;/a&gt;&lt;/code&gt;&lt;/h3&gt;&lt;pre class=\\\"content\\\"&gt;&lt;code&gt;&lt;span class=\\\"where fmt-newline\\\"&gt;impl &lt;a class=\\\"trait\\\" href=\\\"trait.SomeTrait.html\\\" title=\\\"trait doc_notable_trait::SomeTrait\\\"&gt;SomeTrait&lt;/a&gt; for &lt;a class=\\\"struct\\\" href=\\\"struct.SomeStruct.html\\\" title=\\\"struct doc_notable_trait::SomeStruct\\\"&gt;SomeStruct&lt;/a&gt;&lt;/span&gt;\"}</script>\n\\ No newline at end of file\n+<script type=\"text/json\" id=\"notable-traits-data\">{\"SomeStruct\":\"&lt;h3&gt;Notable traits for &lt;code&gt;&lt;a class=\\\"struct\\\" href=\\\"struct.SomeStruct.html\\\" title=\\\"struct doc_notable_trait::SomeStruct\\\"&gt;SomeStruct&lt;/a&gt;&lt;/code&gt;&lt;/h3&gt;&lt;pre class=\\\"content\\\"&gt;&lt;code&gt;&lt;span class=\\\"where fmt-newline\\\"&gt;impl &lt;a class=\\\"trait\\\" href=\\\"trait.SomeTrait.html\\\" title=\\\"trait doc_notable_trait::SomeTrait\\\"&gt;SomeTrait&lt;/a&gt; for &lt;a class=\\\"struct\\\" href=\\\"struct.SomeStruct.html\\\" title=\\\"struct doc_notable_trait::SomeStruct\\\"&gt;SomeStruct&lt;/a&gt;&lt;/span&gt;\"}</script>\n\\ No newline at end of file"}, {"sha": "279faf5540140ee760add8ca75f6c0a16b15ae21", "filename": "src/test/rustdoc/doc-notable_trait.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Frustdoc%2Fdoc-notable_trait.rs", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Frustdoc%2Fdoc-notable_trait.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fdoc-notable_trait.rs?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "patch": "@@ -9,7 +9,7 @@ impl<T: SomeTrait> SomeTrait for Wrapper<T> {}\n #[doc(notable_trait)]\n pub trait SomeTrait {\n     // @has doc_notable_trait/trait.SomeTrait.html\n-    // @has - '//span[@class=\"notable-traits\"]/@data-ty' 'Wrapper<Self>'\n+    // @has - '//a[@class=\"notable-traits\"]/@data-ty' 'Wrapper<Self>'\n     // @snapshot wrap-me - '//script[@id=\"notable-traits-data\"]'\n     fn wrap_me(self) -> Wrapper<Self> where Self: Sized {\n         Wrapper {\n@@ -23,15 +23,15 @@ impl SomeTrait for SomeStruct {}\n \n impl SomeStruct {\n     // @has doc_notable_trait/struct.SomeStruct.html\n-    // @has - '//span[@class=\"notable-traits\"]/@data-ty' 'SomeStruct'\n+    // @has - '//a[@class=\"notable-traits\"]/@data-ty' 'SomeStruct'\n     // @snapshot some-struct-new - '//script[@id=\"notable-traits-data\"]'\n     pub fn new() -> SomeStruct {\n         SomeStruct\n     }\n }\n \n // @has doc_notable_trait/fn.bare_fn.html\n-// @has - '//span[@class=\"notable-traits\"]/@data-ty' 'SomeStruct'\n+// @has - '//a[@class=\"notable-traits\"]/@data-ty' 'SomeStruct'\n // @snapshot bare-fn - '//script[@id=\"notable-traits-data\"]'\n pub fn bare_fn() -> SomeStruct {\n     SomeStruct"}, {"sha": "4f8063807e67dc590cbadd4babd5fb0c2b271c68", "filename": "src/test/rustdoc/doc-notable_trait.some-struct-new.html", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Frustdoc%2Fdoc-notable_trait.some-struct-new.html", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Frustdoc%2Fdoc-notable_trait.some-struct-new.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fdoc-notable_trait.some-struct-new.html?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "patch": "@@ -1 +1 @@\n-<script type=\"text/json\" id=\"notable-traits-data\">{\"SomeStruct\":\"&lt;h3 class=\\\"notable\\\"&gt;Notable traits for &lt;code&gt;&lt;a class=\\\"struct\\\" href=\\\"struct.SomeStruct.html\\\" title=\\\"struct doc_notable_trait::SomeStruct\\\"&gt;SomeStruct&lt;/a&gt;&lt;/code&gt;&lt;/h3&gt;&lt;pre class=\\\"content\\\"&gt;&lt;code&gt;&lt;span class=\\\"where fmt-newline\\\"&gt;impl &lt;a class=\\\"trait\\\" href=\\\"trait.SomeTrait.html\\\" title=\\\"trait doc_notable_trait::SomeTrait\\\"&gt;SomeTrait&lt;/a&gt; for &lt;a class=\\\"struct\\\" href=\\\"struct.SomeStruct.html\\\" title=\\\"struct doc_notable_trait::SomeStruct\\\"&gt;SomeStruct&lt;/a&gt;&lt;/span&gt;\",\"Wrapper&lt;Self&gt;\":\"&lt;h3 class=\\\"notable\\\"&gt;Notable traits for &lt;code&gt;&lt;a class=\\\"struct\\\" href=\\\"struct.Wrapper.html\\\" title=\\\"struct doc_notable_trait::Wrapper\\\"&gt;Wrapper&lt;/a&gt;&amp;lt;T&amp;gt;&lt;/code&gt;&lt;/h3&gt;&lt;pre class=\\\"content\\\"&gt;&lt;code&gt;&lt;span class=\\\"where fmt-newline\\\"&gt;impl&amp;lt;T:&amp;nbsp;&lt;a class=\\\"trait\\\" href=\\\"trait.SomeTrait.html\\\" title=\\\"trait doc_notable_trait::SomeTrait\\\"&gt;SomeTrait&lt;/a&gt;&amp;gt; &lt;a class=\\\"trait\\\" href=\\\"trait.SomeTrait.html\\\" title=\\\"trait doc_notable_trait::SomeTrait\\\"&gt;SomeTrait&lt;/a&gt; for &lt;a class=\\\"struct\\\" href=\\\"struct.Wrapper.html\\\" title=\\\"struct doc_notable_trait::Wrapper\\\"&gt;Wrapper&lt;/a&gt;&amp;lt;T&amp;gt;&lt;/span&gt;\"}</script>\n\\ No newline at end of file\n+<script type=\"text/json\" id=\"notable-traits-data\">{\"SomeStruct\":\"&lt;h3&gt;Notable traits for &lt;code&gt;&lt;a class=\\\"struct\\\" href=\\\"struct.SomeStruct.html\\\" title=\\\"struct doc_notable_trait::SomeStruct\\\"&gt;SomeStruct&lt;/a&gt;&lt;/code&gt;&lt;/h3&gt;&lt;pre class=\\\"content\\\"&gt;&lt;code&gt;&lt;span class=\\\"where fmt-newline\\\"&gt;impl &lt;a class=\\\"trait\\\" href=\\\"trait.SomeTrait.html\\\" title=\\\"trait doc_notable_trait::SomeTrait\\\"&gt;SomeTrait&lt;/a&gt; for &lt;a class=\\\"struct\\\" href=\\\"struct.SomeStruct.html\\\" title=\\\"struct doc_notable_trait::SomeStruct\\\"&gt;SomeStruct&lt;/a&gt;&lt;/span&gt;\",\"Wrapper&lt;Self&gt;\":\"&lt;h3&gt;Notable traits for &lt;code&gt;&lt;a class=\\\"struct\\\" href=\\\"struct.Wrapper.html\\\" title=\\\"struct doc_notable_trait::Wrapper\\\"&gt;Wrapper&lt;/a&gt;&amp;lt;T&amp;gt;&lt;/code&gt;&lt;/h3&gt;&lt;pre class=\\\"content\\\"&gt;&lt;code&gt;&lt;span class=\\\"where fmt-newline\\\"&gt;impl&amp;lt;T:&amp;nbsp;&lt;a class=\\\"trait\\\" href=\\\"trait.SomeTrait.html\\\" title=\\\"trait doc_notable_trait::SomeTrait\\\"&gt;SomeTrait&lt;/a&gt;&amp;gt; &lt;a class=\\\"trait\\\" href=\\\"trait.SomeTrait.html\\\" title=\\\"trait doc_notable_trait::SomeTrait\\\"&gt;SomeTrait&lt;/a&gt; for &lt;a class=\\\"struct\\\" href=\\\"struct.Wrapper.html\\\" title=\\\"struct doc_notable_trait::Wrapper\\\"&gt;Wrapper&lt;/a&gt;&amp;lt;T&amp;gt;&lt;/span&gt;\"}</script>\n\\ No newline at end of file"}, {"sha": "bed2a38b24a2bb1b3421c94d4abc3e05fa6a6a71", "filename": "src/test/rustdoc/doc-notable_trait.wrap-me.html", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Frustdoc%2Fdoc-notable_trait.wrap-me.html", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Frustdoc%2Fdoc-notable_trait.wrap-me.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fdoc-notable_trait.wrap-me.html?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "patch": "@@ -1 +1 @@\n-<script type=\"text/json\" id=\"notable-traits-data\">{\"Wrapper&lt;Self&gt;\":\"&lt;h3 class=\\\"notable\\\"&gt;Notable traits for &lt;code&gt;&lt;a class=\\\"struct\\\" href=\\\"struct.Wrapper.html\\\" title=\\\"struct doc_notable_trait::Wrapper\\\"&gt;Wrapper&lt;/a&gt;&amp;lt;T&amp;gt;&lt;/code&gt;&lt;/h3&gt;&lt;pre class=\\\"content\\\"&gt;&lt;code&gt;&lt;span class=\\\"where fmt-newline\\\"&gt;impl&amp;lt;T:&amp;nbsp;&lt;a class=\\\"trait\\\" href=\\\"trait.SomeTrait.html\\\" title=\\\"trait doc_notable_trait::SomeTrait\\\"&gt;SomeTrait&lt;/a&gt;&amp;gt; &lt;a class=\\\"trait\\\" href=\\\"trait.SomeTrait.html\\\" title=\\\"trait doc_notable_trait::SomeTrait\\\"&gt;SomeTrait&lt;/a&gt; for &lt;a class=\\\"struct\\\" href=\\\"struct.Wrapper.html\\\" title=\\\"struct doc_notable_trait::Wrapper\\\"&gt;Wrapper&lt;/a&gt;&amp;lt;T&amp;gt;&lt;/span&gt;\"}</script>\n\\ No newline at end of file\n+<script type=\"text/json\" id=\"notable-traits-data\">{\"Wrapper&lt;Self&gt;\":\"&lt;h3&gt;Notable traits for &lt;code&gt;&lt;a class=\\\"struct\\\" href=\\\"struct.Wrapper.html\\\" title=\\\"struct doc_notable_trait::Wrapper\\\"&gt;Wrapper&lt;/a&gt;&amp;lt;T&amp;gt;&lt;/code&gt;&lt;/h3&gt;&lt;pre class=\\\"content\\\"&gt;&lt;code&gt;&lt;span class=\\\"where fmt-newline\\\"&gt;impl&amp;lt;T:&amp;nbsp;&lt;a class=\\\"trait\\\" href=\\\"trait.SomeTrait.html\\\" title=\\\"trait doc_notable_trait::SomeTrait\\\"&gt;SomeTrait&lt;/a&gt;&amp;gt; &lt;a class=\\\"trait\\\" href=\\\"trait.SomeTrait.html\\\" title=\\\"trait doc_notable_trait::SomeTrait\\\"&gt;SomeTrait&lt;/a&gt; for &lt;a class=\\\"struct\\\" href=\\\"struct.Wrapper.html\\\" title=\\\"struct doc_notable_trait::Wrapper\\\"&gt;Wrapper&lt;/a&gt;&amp;lt;T&amp;gt;&lt;/span&gt;\"}</script>\n\\ No newline at end of file"}, {"sha": "1d02c13ebfb3c2b9b3ed8d1cf34d94fbb6a8f7eb", "filename": "src/test/rustdoc/spotlight-from-dependency.odd.html", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Frustdoc%2Fspotlight-from-dependency.odd.html", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Frustdoc%2Fspotlight-from-dependency.odd.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fspotlight-from-dependency.odd.html?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "patch": "@@ -1 +1 @@\n-<script type=\"text/json\" id=\"notable-traits-data\">{\"Odd\":\"&lt;h3 class=\\\"notable\\\"&gt;Notable traits for &lt;code&gt;&lt;a class=\\\"struct\\\" href=\\\"struct.Odd.html\\\" title=\\\"struct foo::Odd\\\"&gt;Odd&lt;/a&gt;&lt;/code&gt;&lt;/h3&gt;&lt;pre class=\\\"content\\\"&gt;&lt;code&gt;&lt;span class=\\\"where fmt-newline\\\"&gt;impl &lt;a class=\\\"trait\\\" href=\\\"{{channel}}/core/iter/traits/iterator/trait.Iterator.html\\\" title=\\\"trait core::iter::traits::iterator::Iterator\\\"&gt;Iterator&lt;/a&gt; for &lt;a class=\\\"struct\\\" href=\\\"struct.Odd.html\\\" title=\\\"struct foo::Odd\\\"&gt;Odd&lt;/a&gt;&lt;/span&gt;&lt;span class=\\\"where fmt-newline\\\"&gt;    type &lt;a href=\\\"{{channel}}/core/iter/traits/iterator/trait.Iterator.html#associatedtype.Item\\\" class=\\\"associatedtype\\\"&gt;Item&lt;/a&gt; = &lt;a class=\\\"primitive\\\" href=\\\"{{channel}}/std/primitive.usize.html\\\"&gt;usize&lt;/a&gt;;&lt;/span&gt;\"}</script>\n\\ No newline at end of file\n+<script type=\"text/json\" id=\"notable-traits-data\">{\"Odd\":\"&lt;h3&gt;Notable traits for &lt;code&gt;&lt;a class=\\\"struct\\\" href=\\\"struct.Odd.html\\\" title=\\\"struct foo::Odd\\\"&gt;Odd&lt;/a&gt;&lt;/code&gt;&lt;/h3&gt;&lt;pre class=\\\"content\\\"&gt;&lt;code&gt;&lt;span class=\\\"where fmt-newline\\\"&gt;impl &lt;a class=\\\"trait\\\" href=\\\"{{channel}}/core/iter/traits/iterator/trait.Iterator.html\\\" title=\\\"trait core::iter::traits::iterator::Iterator\\\"&gt;Iterator&lt;/a&gt; for &lt;a class=\\\"struct\\\" href=\\\"struct.Odd.html\\\" title=\\\"struct foo::Odd\\\"&gt;Odd&lt;/a&gt;&lt;/span&gt;&lt;span class=\\\"where fmt-newline\\\"&gt;    type &lt;a href=\\\"{{channel}}/core/iter/traits/iterator/trait.Iterator.html#associatedtype.Item\\\" class=\\\"associatedtype\\\"&gt;Item&lt;/a&gt; = &lt;a class=\\\"primitive\\\" href=\\\"{{channel}}/std/primitive.usize.html\\\"&gt;usize&lt;/a&gt;;&lt;/span&gt;\"}</script>\n\\ No newline at end of file"}, {"sha": "090ad187d9cc0a103fe7d0349b8d20dba7c8cd53", "filename": "src/test/rustdoc/spotlight-from-dependency.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Frustdoc%2Fspotlight-from-dependency.rs", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Frustdoc%2Fspotlight-from-dependency.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fspotlight-from-dependency.rs?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "patch": "@@ -3,7 +3,7 @@\n use std::iter::Iterator;\n \n // @has foo/struct.Odd.html\n-// @has - '//*[@id=\"method.new\"]//span[@class=\"notable-traits\"]/@data-ty' 'Odd'\n+// @has - '//*[@id=\"method.new\"]//a[@class=\"notable-traits\"]/@data-ty' 'Odd'\n // @snapshot odd - '//script[@id=\"notable-traits-data\"]'\n pub struct Odd {\n     current: usize,"}, {"sha": "0567923b7fc6985169fcd3afdd24454e7713b93e", "filename": "src/test/ui/enum-discriminant/issue-46519.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fenum-discriminant%2Fissue-46519.rs", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fenum-discriminant%2Fissue-46519.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fenum-discriminant%2Fissue-46519.rs?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "previous_filename": "src/test/ui/issues/issue-46519.rs"}, {"sha": "2d49151ffccc1d209f9746b25adc08b1a9f251f6", "filename": "src/test/ui/higher-rank-trait-bounds/issue-36139-normalize-closure-sig.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fhigher-rank-trait-bounds%2Fissue-36139-normalize-closure-sig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fhigher-rank-trait-bounds%2Fissue-36139-normalize-closure-sig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fhigher-rank-trait-bounds%2Fissue-36139-normalize-closure-sig.rs?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "previous_filename": "src/test/ui/issues/issue-36139-normalize-closure-sig.rs"}, {"sha": "cedcf7c361c3bbb6d32109c49be0aaa2c28adf72", "filename": "src/test/ui/higher-rank-trait-bounds/issue-43623.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fhigher-rank-trait-bounds%2Fissue-43623.rs", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fhigher-rank-trait-bounds%2Fissue-43623.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fhigher-rank-trait-bounds%2Fissue-43623.rs?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "previous_filename": "src/test/ui/issues/issue-43623.rs"}, {"sha": "79844dcbdacfd78aeca94de81b46ea5654dc58b6", "filename": "src/test/ui/implied-bounds/hrlt-implied-trait-bounds-guard.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fimplied-bounds%2Fhrlt-implied-trait-bounds-guard.rs", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fimplied-bounds%2Fhrlt-implied-trait-bounds-guard.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fimplied-bounds%2Fhrlt-implied-trait-bounds-guard.rs?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "patch": "@@ -31,6 +31,16 @@ fn badboi<'in_, 'out, T>(x: Foo<'in_, 'out, T>, sadness: &'in_ T) -> &'out T {\n     sadness.cast()\n }\n \n+fn badboi2<'in_, 'out, T>(x: Foo<'in_, 'out, T>, sadness: &'in_ T) {\n+    //~^ ERROR lifetime mismatch\n+    let _: &'out T = sadness.cast();\n+}\n+\n+fn badboi3<'in_, 'out, T>(a: Foo<'in_, 'out, (&'in_ T, &'out T)>, sadness: &'in_ T) {\n+    //~^ ERROR lifetime mismatch\n+    let _: &'out T = sadness.cast();\n+}\n+\n fn bad<'short, T>(value: &'short T) -> &'static T {\n     let x: for<'in_, 'out> fn(Foo<'in_, 'out, T>, &'in_ T) -> &'out T = badboi;\n     let x: for<'out> fn(Foo<'short, 'out, T>, &'short T) -> &'out T = x;"}, {"sha": "0c00bbc380e8a2fb8c6506391dc07b8400125f92", "filename": "src/test/ui/implied-bounds/hrlt-implied-trait-bounds-guard.stderr", "status": "modified", "additions": 19, "deletions": 1, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fimplied-bounds%2Fhrlt-implied-trait-bounds-guard.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fimplied-bounds%2Fhrlt-implied-trait-bounds-guard.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fimplied-bounds%2Fhrlt-implied-trait-bounds-guard.stderr?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "patch": "@@ -7,6 +7,24 @@ LL | fn badboi<'in_, 'out, T>(x: Foo<'in_, 'out, T>, sadness: &'in_ T) -> &'out\n    |                             this parameter and the return type are declared with different lifetimes...\n    |                             ...but data from `x` is returned here\n \n-error: aborting due to previous error\n+error[E0623]: lifetime mismatch\n+  --> $DIR/hrlt-implied-trait-bounds-guard.rs:34:30\n+   |\n+LL | fn badboi2<'in_, 'out, T>(x: Foo<'in_, 'out, T>, sadness: &'in_ T) {\n+   |                              ^^^^^^^^^^^^^^^^^^\n+   |                              |\n+   |                              this type is declared with multiple lifetimes...\n+   |                              ...but data with one lifetime flows into the other here\n+\n+error[E0623]: lifetime mismatch\n+  --> $DIR/hrlt-implied-trait-bounds-guard.rs:39:30\n+   |\n+LL | fn badboi3<'in_, 'out, T>(a: Foo<'in_, 'out, (&'in_ T, &'out T)>, sadness: &'in_ T) {\n+   |                              ^^^^^^^^^^^^^^^^^-------^^-------^^\n+   |                              |                |\n+   |                              |                these two types are declared with different lifetimes...\n+   |                              ...but data from `a` flows into `a` here\n+\n+error: aborting due to 3 previous errors\n \n For more information about this error, try `rustc --explain E0623`."}, {"sha": "5def557789f0fcd8babaec56ed95a92402f1be74", "filename": "src/test/ui/pattern/issue-52240.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fpattern%2Fissue-52240.rs", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fpattern%2Fissue-52240.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpattern%2Fissue-52240.rs?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "previous_filename": "src/test/ui/issues/issue-52240.rs"}, {"sha": "69b663b17d3407f30acd11011854ccbd044ce727", "filename": "src/test/ui/pattern/issue-52240.stderr", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fpattern%2Fissue-52240.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fpattern%2Fissue-52240.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpattern%2Fissue-52240.stderr?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "previous_filename": "src/test/ui/issues/issue-52240.stderr"}, {"sha": "389c9c35101ab4367eee05aeda41003eb3487b3d", "filename": "src/test/ui/privacy/auxiliary/issue-75907.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fprivacy%2Fauxiliary%2Fissue-75907.rs", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fprivacy%2Fauxiliary%2Fissue-75907.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fprivacy%2Fauxiliary%2Fissue-75907.rs?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "previous_filename": "src/test/ui/issues/auxiliary/issue-75907.rs"}, {"sha": "6da99cf6435cff9b9050d8788358eef382caced4", "filename": "src/test/ui/privacy/issue-75907.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fprivacy%2Fissue-75907.rs", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fprivacy%2Fissue-75907.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fprivacy%2Fissue-75907.rs?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "previous_filename": "src/test/ui/issues/issue-75907.rs"}, {"sha": "2f89e31a31a1ef3966db23914db5b389d1a004c0", "filename": "src/test/ui/privacy/issue-75907.stderr", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fprivacy%2Fissue-75907.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fprivacy%2Fissue-75907.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fprivacy%2Fissue-75907.stderr?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "previous_filename": "src/test/ui/issues/issue-75907.stderr"}, {"sha": "fdfc5907c167477108221f9729ff8d9f74ed92b5", "filename": "src/test/ui/privacy/issue-75907_b.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fprivacy%2Fissue-75907_b.rs", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fprivacy%2Fissue-75907_b.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fprivacy%2Fissue-75907_b.rs?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "previous_filename": "src/test/ui/issues/issue-75907_b.rs"}, {"sha": "b82d08473c8c9962a6298c577adf58a916286085", "filename": "src/test/ui/privacy/issue-75907_b.stderr", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fprivacy%2Fissue-75907_b.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fprivacy%2Fissue-75907_b.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fprivacy%2Fissue-75907_b.stderr?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "previous_filename": "src/test/ui/issues/issue-75907_b.stderr"}, {"sha": "9f7f1cc6fc7dbaf53160963a9976c8e947c52550", "filename": "src/test/ui/regions/issue-11612.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fregions%2Fissue-11612.rs", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fregions%2Fissue-11612.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fregions%2Fissue-11612.rs?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "previous_filename": "src/test/ui/issues/issue-11612.rs"}, {"sha": "683761667d40aee2077f5d6463b311fb9dab5065", "filename": "src/test/ui/resolve/issue-35675.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fresolve%2Fissue-35675.rs", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fresolve%2Fissue-35675.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fresolve%2Fissue-35675.rs?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "previous_filename": "src/test/ui/issues/issue-35675.rs"}, {"sha": "4a06196d548e3f9fd1ac7eccaaebc5cf4a337582", "filename": "src/test/ui/resolve/issue-35675.stderr", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fresolve%2Fissue-35675.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fresolve%2Fissue-35675.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fresolve%2Fissue-35675.stderr?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "previous_filename": "src/test/ui/issues/issue-35675.stderr"}, {"sha": "14f95827be8ea7b84df20c973147ab0e932956c3", "filename": "src/test/ui/resolve/issue-5927.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fresolve%2Fissue-5927.rs", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fresolve%2Fissue-5927.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fresolve%2Fissue-5927.rs?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "previous_filename": "src/test/ui/issues/issue-5927.rs"}, {"sha": "d6cd6853dbdb5d8a97dda8cf1b046afaea05dedf", "filename": "src/test/ui/resolve/issue-5927.stderr", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fresolve%2Fissue-5927.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fresolve%2Fissue-5927.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fresolve%2Fissue-5927.stderr?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "previous_filename": "src/test/ui/issues/issue-5927.stderr"}, {"sha": "4072a57cb10526aaccd0f12937c5328202db6608", "filename": "src/test/ui/static/issue-5216.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fstatic%2Fissue-5216.rs", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fstatic%2Fissue-5216.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fstatic%2Fissue-5216.rs?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "previous_filename": "src/test/ui/issues/issue-5216.rs"}, {"sha": "1afff28f0b4e1dc16349d3e2ac52347908024bcd", "filename": "src/test/ui/static/issue-5216.stderr", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fstatic%2Fissue-5216.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Fstatic%2Fissue-5216.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fstatic%2Fissue-5216.stderr?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "previous_filename": "src/test/ui/issues/issue-5216.stderr"}, {"sha": "1fb01303c78361d208b70c9d8579e76188c6562c", "filename": "src/test/ui/traits/issue-7013.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Ftraits%2Fissue-7013.rs", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Ftraits%2Fissue-7013.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftraits%2Fissue-7013.rs?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "previous_filename": "src/test/ui/issues/issue-7013.rs"}, {"sha": "4575f4dbae62d3cca76913ae3e73bcd4e0774fc8", "filename": "src/test/ui/traits/issue-7013.stderr", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Ftraits%2Fissue-7013.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftest%2Fui%2Ftraits%2Fissue-7013.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftraits%2Fissue-7013.stderr?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "previous_filename": "src/test/ui/issues/issue-7013.stderr"}, {"sha": "21c6a96747eefc1d25a793041cbf01e857364251", "filename": "src/tools/tidy/src/ui_tests.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftools%2Ftidy%2Fsrc%2Fui_tests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/928d14bcd1976ffd33e743aa09c7c22a063bf87c/src%2Ftools%2Ftidy%2Fsrc%2Fui_tests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Ftidy%2Fsrc%2Fui_tests.rs?ref=928d14bcd1976ffd33e743aa09c7c22a063bf87c", "patch": "@@ -10,7 +10,7 @@ use std::path::Path;\n const ENTRY_LIMIT: usize = 1000;\n // FIXME: The following limits should be reduced eventually.\n const ROOT_ENTRY_LIMIT: usize = 939;\n-const ISSUES_ENTRY_LIMIT: usize = 2105;\n+const ISSUES_ENTRY_LIMIT: usize = 2085;\n \n fn check_entries(path: &Path, bad: &mut bool) {\n     for dir in Walk::new(&path.join(\"test/ui\")) {"}]}