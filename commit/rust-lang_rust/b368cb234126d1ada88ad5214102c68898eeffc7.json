{"sha": "b368cb234126d1ada88ad5214102c68898eeffc7", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIzNjhjYjIzNDEyNmQxYWRhODhhZDUyMTQxMDJjNjg4OThlZWZmYzc=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2013-02-05T17:29:45Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2013-02-05T17:41:19Z"}, "message": "Don't warn when imported traits are indeed used", "tree": {"sha": "8d9f678bbfe0822d1e93848cfe1477421d27f5f1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8d9f678bbfe0822d1e93848cfe1477421d27f5f1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b368cb234126d1ada88ad5214102c68898eeffc7", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b368cb234126d1ada88ad5214102c68898eeffc7", "html_url": "https://github.com/rust-lang/rust/commit/b368cb234126d1ada88ad5214102c68898eeffc7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b368cb234126d1ada88ad5214102c68898eeffc7/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6a4483ec7a92bedab69b363aeeb6931b1bb5951f", "url": "https://api.github.com/repos/rust-lang/rust/commits/6a4483ec7a92bedab69b363aeeb6931b1bb5951f", "html_url": "https://github.com/rust-lang/rust/commit/6a4483ec7a92bedab69b363aeeb6931b1bb5951f"}], "stats": {"total": 17, "additions": 14, "deletions": 3}, "files": [{"sha": "e332a71b57c864859da65c1575df8ab5d61de7bf", "filename": "src/librustc/middle/resolve.rs", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/b368cb234126d1ada88ad5214102c68898eeffc7/src%2Flibrustc%2Fmiddle%2Fresolve.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b368cb234126d1ada88ad5214102c68898eeffc7/src%2Flibrustc%2Fmiddle%2Fresolve.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fresolve.rs?ref=b368cb234126d1ada88ad5214102c68898eeffc7", "patch": "@@ -5061,9 +5061,13 @@ pub impl Resolver {\n                             Some(def) => {\n                                 match def {\n                                     def_ty(trait_def_id) => {\n-                                        self.\n+                                        let added = self.\n                                         add_trait_info_if_containing_method(\n                                         found_traits, trait_def_id, name);\n+                                        if added {\n+                                            import_resolution.state.used =\n+                                                true;\n+                                        }\n                                     }\n                                     _ => {\n                                         // Continue.\n@@ -5096,7 +5100,7 @@ pub impl Resolver {\n \n     fn add_trait_info_if_containing_method(found_traits: @DVec<def_id>,\n                                            trait_def_id: def_id,\n-                                           name: ident) {\n+                                           name: ident) -> bool {\n \n         debug!(\"(adding trait info if containing method) trying trait %d:%d \\\n                 for method '%s'\",\n@@ -5112,9 +5116,10 @@ pub impl Resolver {\n                        trait_def_id.node,\n                        self.session.str_of(name));\n                 (*found_traits).push(trait_def_id);\n+                true\n             }\n             Some(_) | None => {\n-                // Continue.\n+                false\n             }\n         }\n     }"}, {"sha": "6dcdb413f88a2308846175560bcf07bfc64c9d82", "filename": "src/test/compile-fail/unused-imports-warn.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/b368cb234126d1ada88ad5214102c68898eeffc7/src%2Ftest%2Fcompile-fail%2Funused-imports-warn.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b368cb234126d1ada88ad5214102c68898eeffc7/src%2Ftest%2Fcompile-fail%2Funused-imports-warn.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Funused-imports-warn.rs?ref=b368cb234126d1ada88ad5214102c68898eeffc7", "patch": "@@ -20,6 +20,11 @@ use core::util::*;              // shouldn't get errors for not using\n // Should only get one error instead of two errors here\n use core::option::{Some, None}; //~ ERROR unused import\n \n+use core::io::ReaderUtil;       //~ ERROR unused import\n+// Be sure that if we just bring some methods into scope that they're also\n+// counted as being used.\n+use core::io::WriterUtil;\n+\n mod foo {\n     pub struct Point{x: int, y: int}\n     pub struct Square{p: Point, h: uint, w: uint}\n@@ -37,4 +42,5 @@ fn main() {\n     cal(foo::Point{x:3, y:9});\n     let a = 3;\n     ignore(a);\n+    io::stdout().write_str(~\"a\");\n }"}]}