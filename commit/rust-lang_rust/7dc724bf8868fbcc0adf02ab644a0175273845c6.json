{"sha": "7dc724bf8868fbcc0adf02ab644a0175273845c6", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdkYzcyNGJmODg2OGZiY2MwYWRmMDJhYjY0NGEwMTc1MjczODQ1YzY=", "commit": {"author": {"name": "Keegan McAllister", "email": "kmcallister@mozilla.com", "date": "2014-06-18T20:46:48Z"}, "committer": {"name": "Keegan McAllister", "email": "kmcallister@mozilla.com", "date": "2014-06-24T18:36:28Z"}, "message": "Test lint plugins", "tree": {"sha": "5c67aaacce31fbbfd1f2e41b43cc1bd42fd65aa6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5c67aaacce31fbbfd1f2e41b43cc1bd42fd65aa6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7dc724bf8868fbcc0adf02ab644a0175273845c6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7dc724bf8868fbcc0adf02ab644a0175273845c6", "html_url": "https://github.com/rust-lang/rust/commit/7dc724bf8868fbcc0adf02ab644a0175273845c6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7dc724bf8868fbcc0adf02ab644a0175273845c6/comments", "author": {"login": "kmcallister", "id": 444997, "node_id": "MDQ6VXNlcjQ0NDk5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/444997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kmcallister", "html_url": "https://github.com/kmcallister", "followers_url": "https://api.github.com/users/kmcallister/followers", "following_url": "https://api.github.com/users/kmcallister/following{/other_user}", "gists_url": "https://api.github.com/users/kmcallister/gists{/gist_id}", "starred_url": "https://api.github.com/users/kmcallister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kmcallister/subscriptions", "organizations_url": "https://api.github.com/users/kmcallister/orgs", "repos_url": "https://api.github.com/users/kmcallister/repos", "events_url": "https://api.github.com/users/kmcallister/events{/privacy}", "received_events_url": "https://api.github.com/users/kmcallister/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kmcallister", "id": 444997, "node_id": "MDQ6VXNlcjQ0NDk5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/444997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kmcallister", "html_url": "https://github.com/kmcallister", "followers_url": "https://api.github.com/users/kmcallister/followers", "following_url": "https://api.github.com/users/kmcallister/following{/other_user}", "gists_url": "https://api.github.com/users/kmcallister/gists{/gist_id}", "starred_url": "https://api.github.com/users/kmcallister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kmcallister/subscriptions", "organizations_url": "https://api.github.com/users/kmcallister/orgs", "repos_url": "https://api.github.com/users/kmcallister/repos", "events_url": "https://api.github.com/users/kmcallister/events{/privacy}", "received_events_url": "https://api.github.com/users/kmcallister/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2f274d11ba48f0da6158f1da732645dc32bfe1f4", "url": "https://api.github.com/repos/rust-lang/rust/commits/2f274d11ba48f0da6158f1da732645dc32bfe1f4", "html_url": "https://github.com/rust-lang/rust/commit/2f274d11ba48f0da6158f1da732645dc32bfe1f4"}], "stats": {"total": 223, "additions": 223, "deletions": 0}, "files": [{"sha": "e18cef6d1362452e9f51da1915a40b681d938bdd", "filename": "src/test/auxiliary/lint_plugin_test.rs", "status": "added", "additions": 47, "deletions": 0, "changes": 47, "blob_url": "https://github.com/rust-lang/rust/blob/7dc724bf8868fbcc0adf02ab644a0175273845c6/src%2Ftest%2Fauxiliary%2Flint_plugin_test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7dc724bf8868fbcc0adf02ab644a0175273845c6/src%2Ftest%2Fauxiliary%2Flint_plugin_test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fauxiliary%2Flint_plugin_test.rs?ref=7dc724bf8868fbcc0adf02ab644a0175273845c6", "patch": "@@ -0,0 +1,47 @@\n+// Copyright 2014 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// force-host\n+\n+#![feature(phase, plugin_registrar)]\n+\n+extern crate syntax;\n+\n+// Load rustc as a plugin to get macros\n+#[phase(plugin, link)]\n+extern crate rustc;\n+\n+use syntax::ast;\n+use syntax::parse::token;\n+use rustc::lint::{Context, LintPass, LintPassObject, LintArray};\n+use rustc::plugin::Registry;\n+\n+declare_lint!(TEST_LINT, Warn,\n+              \"Warn about items named 'lintme'\")\n+\n+struct Pass;\n+\n+impl LintPass for Pass {\n+    fn get_lints(&self) -> LintArray {\n+        lint_array!(TEST_LINT)\n+    }\n+\n+    fn check_item(&mut self, cx: &Context, it: &ast::Item) {\n+        let name = token::get_ident(it.ident);\n+        if name.get() == \"lintme\" {\n+            cx.span_lint(TEST_LINT, it.span, \"item is named 'lintme'\");\n+        }\n+    }\n+}\n+\n+#[plugin_registrar]\n+pub fn plugin_registrar(reg: &mut Registry) {\n+    reg.register_lint_pass(box Pass as LintPassObject);\n+}"}, {"sha": "9eb39a9178c027ffbaaf88499553ccd5e97a7b82", "filename": "src/test/compile-fail-fulldeps/lint-plugin-deny-attr.rs", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/7dc724bf8868fbcc0adf02ab644a0175273845c6/src%2Ftest%2Fcompile-fail-fulldeps%2Flint-plugin-deny-attr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7dc724bf8868fbcc0adf02ab644a0175273845c6/src%2Ftest%2Fcompile-fail-fulldeps%2Flint-plugin-deny-attr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail-fulldeps%2Flint-plugin-deny-attr.rs?ref=7dc724bf8868fbcc0adf02ab644a0175273845c6", "patch": "@@ -0,0 +1,24 @@\n+// Copyright 2014 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// aux-build:lint_plugin_test.rs\n+// ignore-stage1\n+\n+#![feature(phase)]\n+#![deny(test_lint)]\n+\n+#[phase(plugin)]\n+extern crate lint_plugin_test;\n+\n+fn lintme() { } //~ ERROR item is named 'lintme'\n+\n+pub fn main() {\n+    lintme();\n+}"}, {"sha": "46aa4b6b5b74154b6990eef8a9114be14d35dbfb", "filename": "src/test/compile-fail-fulldeps/lint-plugin-deny-cmdline.rs", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/7dc724bf8868fbcc0adf02ab644a0175273845c6/src%2Ftest%2Fcompile-fail-fulldeps%2Flint-plugin-deny-cmdline.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7dc724bf8868fbcc0adf02ab644a0175273845c6/src%2Ftest%2Fcompile-fail-fulldeps%2Flint-plugin-deny-cmdline.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail-fulldeps%2Flint-plugin-deny-cmdline.rs?ref=7dc724bf8868fbcc0adf02ab644a0175273845c6", "patch": "@@ -0,0 +1,24 @@\n+// Copyright 2014 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// aux-build:lint_plugin_test.rs\n+// ignore-stage1\n+// compile-flags: -D test-lint\n+\n+#![feature(phase)]\n+\n+#[phase(plugin)]\n+extern crate lint_plugin_test;\n+\n+fn lintme() { } //~ ERROR item is named 'lintme'\n+\n+pub fn main() {\n+    lintme();\n+}"}, {"sha": "329d3e86c052e0059ba28e07985c78012099e1ea", "filename": "src/test/compile-fail-fulldeps/lint-plugin-forbid-attrs.rs", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/7dc724bf8868fbcc0adf02ab644a0175273845c6/src%2Ftest%2Fcompile-fail-fulldeps%2Flint-plugin-forbid-attrs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7dc724bf8868fbcc0adf02ab644a0175273845c6/src%2Ftest%2Fcompile-fail-fulldeps%2Flint-plugin-forbid-attrs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail-fulldeps%2Flint-plugin-forbid-attrs.rs?ref=7dc724bf8868fbcc0adf02ab644a0175273845c6", "patch": "@@ -0,0 +1,25 @@\n+// Copyright 2014 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// aux-build:lint_plugin_test.rs\n+// ignore-stage1\n+\n+#![feature(phase)]\n+#![forbid(test_lint)]\n+\n+#[phase(plugin)]\n+extern crate lint_plugin_test;\n+\n+fn lintme() { } //~ ERROR item is named 'lintme'\n+\n+#[allow(test_lint)] //~ ERROR allow(test_lint) overruled by outer forbid(test_lint)\n+pub fn main() {\n+    lintme();\n+}"}, {"sha": "601faa22d77a0a51945f0979e76cea0eb4069615", "filename": "src/test/compile-fail-fulldeps/lint-plugin-forbid-cmdline.rs", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/7dc724bf8868fbcc0adf02ab644a0175273845c6/src%2Ftest%2Fcompile-fail-fulldeps%2Flint-plugin-forbid-cmdline.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7dc724bf8868fbcc0adf02ab644a0175273845c6/src%2Ftest%2Fcompile-fail-fulldeps%2Flint-plugin-forbid-cmdline.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail-fulldeps%2Flint-plugin-forbid-cmdline.rs?ref=7dc724bf8868fbcc0adf02ab644a0175273845c6", "patch": "@@ -0,0 +1,25 @@\n+// Copyright 2014 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// aux-build:lint_plugin_test.rs\n+// ignore-stage1\n+// compile-flags: -F test-lint\n+\n+#![feature(phase)]\n+\n+#[phase(plugin)]\n+extern crate lint_plugin_test;\n+\n+fn lintme() { } //~ ERROR item is named 'lintme'\n+\n+#[allow(test_lint)] //~ ERROR allow(test_lint) overruled by outer forbid(test_lint)\n+pub fn main() {\n+    lintme();\n+}"}, {"sha": "92fabd6050bc1ec95958c16c4fd98a614104cacb", "filename": "src/test/compile-fail/lint-forbid-attr.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/7dc724bf8868fbcc0adf02ab644a0175273845c6/src%2Ftest%2Fcompile-fail%2Flint-forbid-attr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7dc724bf8868fbcc0adf02ab644a0175273845c6/src%2Ftest%2Fcompile-fail%2Flint-forbid-attr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Flint-forbid-attr.rs?ref=7dc724bf8868fbcc0adf02ab644a0175273845c6", "patch": "@@ -0,0 +1,15 @@\n+// Copyright 2014 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+#![forbid(experimental)]\n+\n+#[allow(experimental)] //~ ERROR allow(experimental) overruled by outer forbid(experimental)\n+fn main() {\n+}"}, {"sha": "4de84825ada9e26f95803a8d344087b39b2d29d1", "filename": "src/test/compile-fail/lint-forbid-cmdline.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/7dc724bf8868fbcc0adf02ab644a0175273845c6/src%2Ftest%2Fcompile-fail%2Flint-forbid-cmdline.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7dc724bf8868fbcc0adf02ab644a0175273845c6/src%2Ftest%2Fcompile-fail%2Flint-forbid-cmdline.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Flint-forbid-cmdline.rs?ref=7dc724bf8868fbcc0adf02ab644a0175273845c6", "patch": "@@ -0,0 +1,15 @@\n+// Copyright 2014 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// compile-flags: -F experimental\n+\n+#[allow(experimental)] //~ ERROR allow(experimental) overruled by outer forbid(experimental)\n+fn main() {\n+}"}, {"sha": "d3d1f1ea565a38580a8f7cb8082050f7870d1d59", "filename": "src/test/run-pass-fulldeps/lint-plugin-cmdline.rs", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/7dc724bf8868fbcc0adf02ab644a0175273845c6/src%2Ftest%2Frun-pass-fulldeps%2Flint-plugin-cmdline.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7dc724bf8868fbcc0adf02ab644a0175273845c6/src%2Ftest%2Frun-pass-fulldeps%2Flint-plugin-cmdline.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass-fulldeps%2Flint-plugin-cmdline.rs?ref=7dc724bf8868fbcc0adf02ab644a0175273845c6", "patch": "@@ -0,0 +1,23 @@\n+// Copyright 2014 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// aux-build:lint_plugin_test.rs\n+// ignore-stage1\n+// compile-flags: -A test-lint\n+\n+#![feature(phase)]\n+\n+#[phase(plugin)]\n+extern crate lint_plugin_test;\n+\n+fn lintme() { }\n+\n+pub fn main() {\n+}"}, {"sha": "8c5269e2274108e66f6e39146858b152e2d10ea8", "filename": "src/test/run-pass-fulldeps/lint-plugin.rs", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/7dc724bf8868fbcc0adf02ab644a0175273845c6/src%2Ftest%2Frun-pass-fulldeps%2Flint-plugin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7dc724bf8868fbcc0adf02ab644a0175273845c6/src%2Ftest%2Frun-pass-fulldeps%2Flint-plugin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass-fulldeps%2Flint-plugin.rs?ref=7dc724bf8868fbcc0adf02ab644a0175273845c6", "patch": "@@ -0,0 +1,25 @@\n+// Copyright 2014 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// aux-build:lint_plugin_test.rs\n+// ignore-stage1\n+// ignore-pretty\n+\n+#![feature(phase)]\n+\n+#[phase(plugin)]\n+extern crate lint_plugin_test;\n+\n+fn lintme() { } //~ WARNING item is named 'lintme'\n+\n+#[allow(test_lint)]\n+pub fn main() {\n+    fn lintme() { }\n+}"}]}