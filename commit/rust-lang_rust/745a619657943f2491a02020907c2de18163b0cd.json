{"sha": "745a619657943f2491a02020907c2de18163b0cd", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc0NWE2MTk2NTc5NDNmMjQ5MWEwMjAyMDkwN2MyZGUxODE2M2IwY2Q=", "commit": {"author": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2018-11-05T06:11:25Z"}, "committer": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2018-11-05T06:18:47Z"}, "message": "Fix dogfood", "tree": {"sha": "34b8469202e6fd9e71aaf4b9df7d09758afdd6e5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/34b8469202e6fd9e71aaf4b9df7d09758afdd6e5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/745a619657943f2491a02020907c2de18163b0cd", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEvUKv4zqIn2RHUgCKtvoGpuDiZlsFAlvf4MgACgkQtvoGpuDi\nZlucNQ/+IN4UYL1FbesWiqtIu2NeJ55qWSxpLdsirSIGmVtU7gAYYk48IWNsfHAl\nB3sl0RpLvvCZixSiKjZhTubX+dOYnKc+/7KDC4U1KJ5wrnFj1o7U9y2fgGqR5Sjd\nUwXK88io6IpGDa9gKdxpUqgxR89sGRXnXcPrOrRLWHZrkxbQUDaa3ZRXmb9KOQZO\n6s/Zm12icxfdLodpnLu6fVKEJN+58c+1ZixhOZW95s/QCFEdaBf6diHb6G81qYdJ\neNYoOkmo/6LTo6O4bFm/CgEF5DdP2Apth6H/Et8giJxNkBhUj+1EjUHU0sxBQl1x\ncEdsxwsiNZ/CmsQ9tljsvP2D4m4dkgT9OTuE8JXDQMLwazOVncsu7YAjzuKgmVVZ\nxx3GLjyd4aOjSoVCZaTMDM+cSQGQbIWXxiGx3oQlJzIIYutXQ+iO+em+yvO6jwRK\n34O51W2RBDQ+6nGbqWGJMoTTnsAiMXsJWbx0jvpOiGl0poe6GGNKlPPewEu5/wLX\njU7buvApWohjKPce4JHLpEXDKXzA+w0ct4jbEB7B01+k/pfMtOTBmhwJu70nH0Ep\nX/UkJKvfWiLZmY05qgIywOctoHuWzxZ9WQRL5vJoLJ8YafmwhODVocNWPwfwZrCk\noftrVKQGfEteVI2/F7aXJ9CH8BdKSNgI53PXYkqOh+ayGSjl+L0=\n=T+Kn\n-----END PGP SIGNATURE-----", "payload": "tree 34b8469202e6fd9e71aaf4b9df7d09758afdd6e5\nparent 5b24f2302052e38c17827114c28a31205de17404\nauthor Philipp Hansch <dev@phansch.net> 1541398285 +0100\ncommitter Philipp Hansch <dev@phansch.net> 1541398727 +0100\n\nFix dogfood\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/745a619657943f2491a02020907c2de18163b0cd", "html_url": "https://github.com/rust-lang/rust/commit/745a619657943f2491a02020907c2de18163b0cd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/745a619657943f2491a02020907c2de18163b0cd/comments", "author": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5b24f2302052e38c17827114c28a31205de17404", "url": "https://api.github.com/repos/rust-lang/rust/commits/5b24f2302052e38c17827114c28a31205de17404", "html_url": "https://github.com/rust-lang/rust/commit/5b24f2302052e38c17827114c28a31205de17404"}], "stats": {"total": 20, "additions": 10, "deletions": 10}, "files": [{"sha": "bfd98968c422deaf9bb8b5019e08878abca377b0", "filename": "clippy_dev/src/main.rs", "status": "modified", "additions": 10, "deletions": 10, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/745a619657943f2491a02020907c2de18163b0cd/clippy_dev%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/745a619657943f2491a02020907c2de18163b0cd/clippy_dev%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_dev%2Fsrc%2Fmain.rs?ref=745a619657943f2491a02020907c2de18163b0cd", "patch": "@@ -48,9 +48,9 @@ fn main() {\n         if matches.is_present(\"print-only\") {\n             print_lints();\n         } else if matches.is_present(\"check\") {\n-            update_lints(UpdateMode::Check);\n+            update_lints(&UpdateMode::Check);\n         } else {\n-            update_lints(UpdateMode::Change);\n+            update_lints(&UpdateMode::Change);\n         }\n     }\n }\n@@ -75,7 +75,7 @@ fn print_lints() {\n     println!(\"there are {} lints\", lint_count);\n }\n \n-fn update_lints(update_mode: UpdateMode) {\n+fn update_lints(update_mode: &UpdateMode) {\n     let lint_list: Vec<Lint> = gather_all().collect();\n     let usable_lints: Vec<Lint> = Lint::usable_lints(lint_list.clone().into_iter()).collect();\n     let lint_count = usable_lints.len();\n@@ -85,7 +85,7 @@ fn update_lints(update_mode: UpdateMode) {\n         r#\"\\[There are \\d+ lints included in this crate!\\]\\(https://rust-lang-nursery.github.io/rust-clippy/master/index.html\\)\"#,\n         \"\",\n         true,\n-        update_mode == UpdateMode::Change,\n+        update_mode == &UpdateMode::Change,\n         || {\n             vec![\n                 format!(\"[There are {} lints included in this crate!](https://rust-lang-nursery.github.io/rust-clippy/master/index.html)\", lint_count)\n@@ -98,7 +98,7 @@ fn update_lints(update_mode: UpdateMode) {\n         \"<!-- begin autogenerated links to lint list -->\",\n         \"<!-- end autogenerated links to lint list -->\",\n         false,\n-        update_mode == UpdateMode::Change,\n+        update_mode == &UpdateMode::Change,\n         || { gen_changelog_lint_list(lint_list.clone()) }\n     ).changed;\n \n@@ -107,7 +107,7 @@ fn update_lints(update_mode: UpdateMode) {\n         \"begin deprecated lints\",\n         \"end deprecated lints\",\n         false,\n-        update_mode == UpdateMode::Change,\n+        update_mode == &UpdateMode::Change,\n         || { gen_deprecated(&lint_list) }\n     ).changed;\n \n@@ -116,7 +116,7 @@ fn update_lints(update_mode: UpdateMode) {\n         \"begin lints modules\",\n         \"end lints modules\",\n         false,\n-        update_mode == UpdateMode::Change,\n+        update_mode == &UpdateMode::Change,\n         || { gen_modules_list(lint_list.clone()) }\n     ).changed;\n \n@@ -126,7 +126,7 @@ fn update_lints(update_mode: UpdateMode) {\n         r#\"reg.register_lint_group\\(\"clippy::all\"\"#,\n         r#\"\\]\\);\"#,\n         false,\n-        update_mode == UpdateMode::Change,\n+        update_mode == &UpdateMode::Change,\n         || {\n             // clippy::all should only include the following lint groups:\n             let all_group_lints = usable_lints.clone().into_iter().filter(|l| {\n@@ -147,12 +147,12 @@ fn update_lints(update_mode: UpdateMode) {\n             &format!(\"reg.register_lint_group\\\\(\\\"clippy::{}\\\"\", lint_group),\n             r#\"\\]\\);\"#,\n             false,\n-            update_mode == UpdateMode::Change,\n+            update_mode == &UpdateMode::Change,\n             || { gen_lint_group_list(lints.clone()) }\n         ).changed;\n     }\n \n-    if update_mode == UpdateMode::Check && file_change {\n+    if update_mode == &UpdateMode::Check && file_change {\n       println!(\"Not all lints defined properly. Please run `util/dev update_lints` to make sure all lints are defined properly.\");\n       std::process::exit(1);\n     }"}]}