{"sha": "986aa36ed1987bf5c2f97dbdd8b5c6ce2720faa7", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk4NmFhMzZlZDE5ODdiZjVjMmY5N2RiZGQ4YjVjNmNlMjcyMGZhYTc=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-05-19T23:01:41Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-05-19T23:01:41Z"}, "message": "Rollup merge of #60908 - GuillaumeGomez:errors, r=oli-obk\n\nFix lints handling in rustdoc\n\nPart of #60664: now lints are handled just like any other lints you would setup in rustc. Still remains to handle `missing code examples` and `missing_docs` as part of the same group.\n\nr? @oli-obk", "tree": {"sha": "5f430f38c383a8964e4157e1248026d5c38a3c1a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5f430f38c383a8964e4157e1248026d5c38a3c1a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/986aa36ed1987bf5c2f97dbdd8b5c6ce2720faa7", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJc4eBVCRBK7hj4Ov3rIwAAdHIIABe8xxdz9JN2cttclq8gDGoW\nDSr7lw6Jw/toZ3lk8wNqrt+NIRlJdxyllHfLt1xTvYRkgjtEsRHijC/lxpd5AmCa\neNcK/xk+c4GCntEqPWlNZIJcRGRwdrFNdQENCiKKZQ7F+zxFjVEiaJkkFTH4mYy6\nIZmLQMflw1uTta4/jpxjMqD/fdOHD4j6T774YEPCVpzaX3iZdM+aiY25R49L4xVM\naDZgnyE8j5B7ymdMvrIsCQ6mMaTnwXHTUS1uyDBAWD5bIVvzkz3dLXAmS6gLQMOf\nBN33/DjvgBit+pb7KY69TI+Ylmbcb8BbffrZOnHqJTWIbJOjEAFj7jkEGoifQJM=\n=CmB7\n-----END PGP SIGNATURE-----\n", "payload": "tree 5f430f38c383a8964e4157e1248026d5c38a3c1a\nparent 815d3ba88307e4f8d1e4f1b2da09746877ff3ecf\nparent 606377740b6022664299b47c8dd8d3e65017021d\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1558306901 +0200\ncommitter GitHub <noreply@github.com> 1558306901 +0200\n\nRollup merge of #60908 - GuillaumeGomez:errors, r=oli-obk\n\nFix lints handling in rustdoc\n\nPart of #60664: now lints are handled just like any other lints you would setup in rustc. Still remains to handle `missing code examples` and `missing_docs` as part of the same group.\n\nr? @oli-obk\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/986aa36ed1987bf5c2f97dbdd8b5c6ce2720faa7", "html_url": "https://github.com/rust-lang/rust/commit/986aa36ed1987bf5c2f97dbdd8b5c6ce2720faa7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/986aa36ed1987bf5c2f97dbdd8b5c6ce2720faa7/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "815d3ba88307e4f8d1e4f1b2da09746877ff3ecf", "url": "https://api.github.com/repos/rust-lang/rust/commits/815d3ba88307e4f8d1e4f1b2da09746877ff3ecf", "html_url": "https://github.com/rust-lang/rust/commit/815d3ba88307e4f8d1e4f1b2da09746877ff3ecf"}, {"sha": "606377740b6022664299b47c8dd8d3e65017021d", "url": "https://api.github.com/repos/rust-lang/rust/commits/606377740b6022664299b47c8dd8d3e65017021d", "html_url": "https://github.com/rust-lang/rust/commit/606377740b6022664299b47c8dd8d3e65017021d"}], "stats": {"total": 148, "additions": 123, "deletions": 25}, "files": [{"sha": "be0af8be7b272bc615aab84985faa07db286c449", "filename": "src/bootstrap/test.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/986aa36ed1987bf5c2f97dbdd8b5c6ce2720faa7/src%2Fbootstrap%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/986aa36ed1987bf5c2f97dbdd8b5c6ce2720faa7/src%2Fbootstrap%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Ftest.rs?ref=986aa36ed1987bf5c2f97dbdd8b5c6ce2720faa7", "patch": "@@ -683,7 +683,7 @@ impl Step for RustdocUi {\n             target: self.target,\n             mode: \"ui\",\n             suite: \"rustdoc-ui\",\n-            path: None,\n+            path: Some(\"src/test/rustdoc-ui\"),\n             compare_mode: None,\n         })\n     }"}, {"sha": "9c4683e094634eea384d348ff8c2b9785a6c6dfe", "filename": "src/librustc/lint/mod.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/986aa36ed1987bf5c2f97dbdd8b5c6ce2720faa7/src%2Flibrustc%2Flint%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/986aa36ed1987bf5c2f97dbdd8b5c6ce2720faa7/src%2Flibrustc%2Flint%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Flint%2Fmod.rs?ref=986aa36ed1987bf5c2f97dbdd8b5c6ce2720faa7", "patch": "@@ -778,6 +778,9 @@ fn lint_levels<'a, 'tcx>(tcx: TyCtxt<'a, 'tcx, 'tcx>, cnum: CrateNum)\n \n     let push = builder.levels.push(&krate.attrs);\n     builder.levels.register_id(hir::CRATE_HIR_ID);\n+    for macro_def in &krate.exported_macros {\n+       builder.levels.register_id(macro_def.hir_id);\n+    }\n     intravisit::walk_crate(&mut builder, krate);\n     builder.levels.pop(push);\n "}, {"sha": "e434623d4a12759fe3f1bb82cef4fa0cd11fca18", "filename": "src/librustdoc/clean/mod.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/986aa36ed1987bf5c2f97dbdd8b5c6ce2720faa7/src%2Flibrustdoc%2Fclean%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/986aa36ed1987bf5c2f97dbdd8b5c6ce2720faa7/src%2Flibrustdoc%2Fclean%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fclean%2Fmod.rs?ref=986aa36ed1987bf5c2f97dbdd8b5c6ce2720faa7", "patch": "@@ -3408,6 +3408,7 @@ pub struct Span {\n     pub locol: usize,\n     pub hiline: usize,\n     pub hicol: usize,\n+    pub original: syntax_pos::Span,\n }\n \n impl Span {\n@@ -3416,8 +3417,13 @@ impl Span {\n             filename: FileName::Anon(0),\n             loline: 0, locol: 0,\n             hiline: 0, hicol: 0,\n+            original: syntax_pos::DUMMY_SP,\n         }\n     }\n+\n+    pub fn span(&self) -> syntax_pos::Span {\n+        self.original\n+    }\n }\n \n impl Clean<Span> for syntax_pos::Span {\n@@ -3436,6 +3442,7 @@ impl Clean<Span> for syntax_pos::Span {\n             locol: lo.col.to_usize(),\n             hiline: hi.line,\n             hicol: hi.col.to_usize(),\n+            original: *self,\n         }\n     }\n }"}, {"sha": "2c382a1c1759632806bb316f621aa582564b9fe0", "filename": "src/librustdoc/passes/collect_intra_doc_links.rs", "status": "modified", "additions": 25, "deletions": 9, "changes": 34, "blob_url": "https://github.com/rust-lang/rust/blob/986aa36ed1987bf5c2f97dbdd8b5c6ce2720faa7/src%2Flibrustdoc%2Fpasses%2Fcollect_intra_doc_links.rs", "raw_url": "https://github.com/rust-lang/rust/raw/986aa36ed1987bf5c2f97dbdd8b5c6ce2720faa7/src%2Flibrustdoc%2Fpasses%2Fcollect_intra_doc_links.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fpasses%2Fcollect_intra_doc_links.rs?ref=986aa36ed1987bf5c2f97dbdd8b5c6ce2720faa7", "patch": "@@ -321,7 +321,7 @@ impl<'a, 'tcx> DocFolder for LinkCollector<'a, 'tcx> {\n                         if let Ok(res) = self.resolve(path_str, ns, &current_item, parent_node) {\n                             res\n                         } else {\n-                            resolution_failure(cx, &item.attrs, path_str, &dox, link_range);\n+                            resolution_failure(cx, &item, path_str, &dox, link_range);\n                             // This could just be a normal link or a broken link\n                             // we could potentially check if something is\n                             // \"intra-doc-link-like\" and warn in that case.\n@@ -332,7 +332,7 @@ impl<'a, 'tcx> DocFolder for LinkCollector<'a, 'tcx> {\n                         if let Ok(res) = self.resolve(path_str, ns, &current_item, parent_node) {\n                             res\n                         } else {\n-                            resolution_failure(cx, &item.attrs, path_str, &dox, link_range);\n+                            resolution_failure(cx, &item, path_str, &dox, link_range);\n                             // This could just be a normal link.\n                             continue;\n                         }\n@@ -357,7 +357,7 @@ impl<'a, 'tcx> DocFolder for LinkCollector<'a, 'tcx> {\n                         };\n \n                         if candidates.is_empty() {\n-                            resolution_failure(cx, &item.attrs, path_str, &dox, link_range);\n+                            resolution_failure(cx, &item, path_str, &dox, link_range);\n                             // this could just be a normal link\n                             continue;\n                         }\n@@ -368,7 +368,7 @@ impl<'a, 'tcx> DocFolder for LinkCollector<'a, 'tcx> {\n                         } else {\n                             ambiguity_error(\n                                 cx,\n-                                &item.attrs,\n+                                &item,\n                                 path_str,\n                                 &dox,\n                                 link_range,\n@@ -381,7 +381,7 @@ impl<'a, 'tcx> DocFolder for LinkCollector<'a, 'tcx> {\n                         if let Some(res) = macro_resolve(cx, path_str) {\n                             (res, None)\n                         } else {\n-                            resolution_failure(cx, &item.attrs, path_str, &dox, link_range);\n+                            resolution_failure(cx, &item, path_str, &dox, link_range);\n                             continue\n                         }\n                     }\n@@ -452,16 +452,24 @@ fn macro_resolve(cx: &DocContext<'_>, path_str: &str) -> Option<Res> {\n /// line containing the failure as a note as well.\n fn resolution_failure(\n     cx: &DocContext<'_>,\n-    attrs: &Attributes,\n+    item: &Item,\n     path_str: &str,\n     dox: &str,\n     link_range: Option<Range<usize>>,\n ) {\n+    let hir_id = match cx.as_local_hir_id(item.def_id) {\n+        Some(hir_id) => hir_id,\n+        None => {\n+            // If non-local, no need to check anything.\n+            return;\n+        }\n+    };\n+    let attrs = &item.attrs;\n     let sp = span_of_attrs(attrs);\n \n     let mut diag = cx.tcx.struct_span_lint_hir(\n         lint::builtin::INTRA_DOC_LINK_RESOLUTION_FAILURE,\n-        hir::CRATE_HIR_ID,\n+        hir_id,\n         sp,\n         &format!(\"`[{}]` cannot be resolved, ignoring it...\", path_str),\n     );\n@@ -495,12 +503,20 @@ fn resolution_failure(\n \n fn ambiguity_error(\n     cx: &DocContext<'_>,\n-    attrs: &Attributes,\n+    item: &Item,\n     path_str: &str,\n     dox: &str,\n     link_range: Option<Range<usize>>,\n     candidates: PerNS<Option<Res>>,\n ) {\n+    let hir_id = match cx.as_local_hir_id(item.def_id) {\n+        Some(hir_id) => hir_id,\n+        None => {\n+            // If non-local, no need to check anything.\n+            return;\n+        }\n+    };\n+    let attrs = &item.attrs;\n     let sp = span_of_attrs(attrs);\n \n     let mut msg = format!(\"`{}` is \", path_str);\n@@ -532,7 +548,7 @@ fn ambiguity_error(\n \n     let mut diag = cx.tcx.struct_span_lint_hir(\n         lint::builtin::INTRA_DOC_LINK_RESOLUTION_FAILURE,\n-        hir::CRATE_HIR_ID,\n+        hir_id,\n         sp,\n         &msg,\n     );"}, {"sha": "d9af33ac5b622a39f288c14b3eca760c02900245", "filename": "src/librustdoc/passes/mod.rs", "status": "modified", "additions": 11, "deletions": 8, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/986aa36ed1987bf5c2f97dbdd8b5c6ce2720faa7/src%2Flibrustdoc%2Fpasses%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/986aa36ed1987bf5c2f97dbdd8b5c6ce2720faa7/src%2Flibrustdoc%2Fpasses%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fpasses%2Fmod.rs?ref=986aa36ed1987bf5c2f97dbdd8b5c6ce2720faa7", "patch": "@@ -1,7 +1,6 @@\n //! Contains information about \"passes\", used to modify crate information during the documentation\n //! process.\n \n-use rustc::hir;\n use rustc::hir::def_id::DefId;\n use rustc::lint as lint;\n use rustc::middle::privacy::AccessLevels;\n@@ -314,10 +313,13 @@ pub fn look_for_tests<'tcx>(\n     item: &Item,\n     check_missing_code: bool,\n ) {\n-    if cx.as_local_hir_id(item.def_id).is_none() {\n-        // If non-local, no need to check anything.\n-        return;\n-    }\n+    let hir_id = match cx.as_local_hir_id(item.def_id) {\n+        Some(hir_id) => hir_id,\n+        None => {\n+            // If non-local, no need to check anything.\n+            return;\n+        }\n+    };\n \n     struct Tests {\n         found_tests: usize,\n@@ -336,18 +338,19 @@ pub fn look_for_tests<'tcx>(\n     find_testable_code(&dox, &mut tests, ErrorCodes::No);\n \n     if check_missing_code == true && tests.found_tests == 0 {\n+        let sp = span_of_attrs(&item.attrs).substitute_dummy(item.source.span());\n         let mut diag = cx.tcx.struct_span_lint_hir(\n             lint::builtin::MISSING_DOC_CODE_EXAMPLES,\n-            hir::CRATE_HIR_ID,\n-            span_of_attrs(&item.attrs),\n+            hir_id,\n+            sp,\n             \"Missing code example in this documentation\");\n         diag.emit();\n     } else if check_missing_code == false &&\n               tests.found_tests > 0 &&\n               !cx.renderinfo.borrow().access_levels.is_doc_reachable(item.def_id) {\n         let mut diag = cx.tcx.struct_span_lint_hir(\n             lint::builtin::PRIVATE_DOC_TESTS,\n-            hir::CRATE_HIR_ID,\n+            hir_id,\n             span_of_attrs(&item.attrs),\n             \"Documentation test in private item\");\n         diag.emit();"}, {"sha": "4b2a91e9c812722f4a6f66beb1692e8ea56037a6", "filename": "src/test/rustdoc-ui/doc-without-codeblock.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/986aa36ed1987bf5c2f97dbdd8b5c6ce2720faa7/src%2Ftest%2Frustdoc-ui%2Fdoc-without-codeblock.rs", "raw_url": "https://github.com/rust-lang/rust/raw/986aa36ed1987bf5c2f97dbdd8b5c6ce2720faa7/src%2Ftest%2Frustdoc-ui%2Fdoc-without-codeblock.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Fdoc-without-codeblock.rs?ref=986aa36ed1987bf5c2f97dbdd8b5c6ce2720faa7", "patch": "@@ -1,6 +1,4 @@\n-//~ ERROR Missing code example in this documentation\n-\n-#![deny(missing_doc_code_examples)]\n+#![deny(missing_doc_code_examples)] //~ ERROR Missing code example in this documentation\n \n /// Some docs.\n //~^ ERROR Missing code example in this documentation"}, {"sha": "23c07c4d32d64359d43a4a4ead40dbac4ba40050", "filename": "src/test/rustdoc-ui/doc-without-codeblock.stderr", "status": "modified", "additions": 14, "deletions": 4, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/986aa36ed1987bf5c2f97dbdd8b5c6ce2720faa7/src%2Ftest%2Frustdoc-ui%2Fdoc-without-codeblock.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/986aa36ed1987bf5c2f97dbdd8b5c6ce2720faa7/src%2Ftest%2Frustdoc-ui%2Fdoc-without-codeblock.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Fdoc-without-codeblock.stderr?ref=986aa36ed1987bf5c2f97dbdd8b5c6ce2720faa7", "patch": "@@ -1,25 +1,35 @@\n error: Missing code example in this documentation\n+  --> $DIR/doc-without-codeblock.rs:1:1\n+   |\n+LL | / #![deny(missing_doc_code_examples)]\n+LL | |\n+LL | | /// Some docs.\n+LL | |\n+...  |\n+LL | |     pub fn bar() {}\n+LL | | }\n+   | |_^\n    |\n note: lint level defined here\n-  --> $DIR/doc-without-codeblock.rs:3:9\n+  --> $DIR/doc-without-codeblock.rs:1:9\n    |\n LL | #![deny(missing_doc_code_examples)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: Missing code example in this documentation\n-  --> $DIR/doc-without-codeblock.rs:5:1\n+  --> $DIR/doc-without-codeblock.rs:3:1\n    |\n LL | /// Some docs.\n    | ^^^^^^^^^^^^^^\n \n error: Missing code example in this documentation\n-  --> $DIR/doc-without-codeblock.rs:9:1\n+  --> $DIR/doc-without-codeblock.rs:7:1\n    |\n LL | /// And then, the princess died.\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: Missing code example in this documentation\n-  --> $DIR/doc-without-codeblock.rs:12:5\n+  --> $DIR/doc-without-codeblock.rs:10:5\n    |\n LL |     /// Or maybe not because she saved herself!\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^"}, {"sha": "ffe0ddcd8c9b2fc800d724db7a371c10a95f36fb", "filename": "src/test/rustdoc-ui/lint-missing-doc-code-example.rs", "status": "added", "additions": 40, "deletions": 0, "changes": 40, "blob_url": "https://github.com/rust-lang/rust/blob/986aa36ed1987bf5c2f97dbdd8b5c6ce2720faa7/src%2Ftest%2Frustdoc-ui%2Flint-missing-doc-code-example.rs", "raw_url": "https://github.com/rust-lang/rust/raw/986aa36ed1987bf5c2f97dbdd8b5c6ce2720faa7/src%2Ftest%2Frustdoc-ui%2Flint-missing-doc-code-example.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Flint-missing-doc-code-example.rs?ref=986aa36ed1987bf5c2f97dbdd8b5c6ce2720faa7", "patch": "@@ -0,0 +1,40 @@\n+#![deny(missing_docs)]\n+#![deny(missing_doc_code_examples)]\n+\n+//! crate level doc\n+//! ```\n+//! println!(\"hello\"):\n+//! ```\n+\n+\n+/// doc\n+///\n+/// ```\n+/// println!(\"hello\");\n+/// ```\n+fn test() {\n+}\n+\n+#[allow(missing_docs)]\n+mod module1 { //~ ERROR\n+}\n+\n+#[allow(missing_doc_code_examples)]\n+/// doc\n+mod module2 {\n+\n+  /// doc\n+  pub fn test() {}\n+}\n+\n+/// doc\n+///\n+/// ```\n+/// println!(\"hello\");\n+/// ```\n+pub mod module3 {\n+\n+  /// doc\n+  //~^ ERROR\n+  pub fn test() {}\n+}"}, {"sha": "97a52a13e3f652d5688bb7e58d66d9876b4ab265", "filename": "src/test/rustdoc-ui/lint-missing-doc-code-example.stderr", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/986aa36ed1987bf5c2f97dbdd8b5c6ce2720faa7/src%2Ftest%2Frustdoc-ui%2Flint-missing-doc-code-example.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/986aa36ed1987bf5c2f97dbdd8b5c6ce2720faa7/src%2Ftest%2Frustdoc-ui%2Flint-missing-doc-code-example.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Flint-missing-doc-code-example.stderr?ref=986aa36ed1987bf5c2f97dbdd8b5c6ce2720faa7", "patch": "@@ -0,0 +1,21 @@\n+error: Missing code example in this documentation\n+  --> $DIR/lint-missing-doc-code-example.rs:19:1\n+   |\n+LL | / mod module1 {\n+LL | | }\n+   | |_^\n+   |\n+note: lint level defined here\n+  --> $DIR/lint-missing-doc-code-example.rs:2:9\n+   |\n+LL | #![deny(missing_doc_code_examples)]\n+   |         ^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+error: Missing code example in this documentation\n+  --> $DIR/lint-missing-doc-code-example.rs:37:3\n+   |\n+LL |   /// doc\n+   |   ^^^^^^^\n+\n+error: aborting due to 2 previous errors\n+"}]}