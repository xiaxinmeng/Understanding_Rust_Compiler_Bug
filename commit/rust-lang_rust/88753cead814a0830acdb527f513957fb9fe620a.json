{"sha": "88753cead814a0830acdb527f513957fb9fe620a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg4NzUzY2VhZDgxNGEwODMwYWNkYjUyN2Y1MTM5NTdmYjlmZTYyMGE=", "commit": {"author": {"name": "Tomasz Mi\u0105sko", "email": "tomasz.miasko@gmail.com", "date": "2021-02-21T00:00:00Z"}, "committer": {"name": "Tomasz Mi\u0105sko", "email": "tomasz.miasko@gmail.com", "date": "2021-02-21T00:00:00Z"}, "message": "test: Print test name only once on timeout\n\nPretty formatter when using multiple test threads displays test name twice on\ntimeout event. This implicitly suggest that those are two different events,\nwhile in fact they are always printed together.\n\nPrint test name only once.\n\nBefore:\n\n```\nrunning 3 tests\ntest src/lib.rs - c (line 16) ... ok\ntest src/lib.rs - a (line 3) ... ok\ntest src/lib.rs - b (line 9) ... test src/lib.rs - b (line 9) has been running for over 60 seconds\ntest src/lib.rs - b (line 9) ... ok\n```\n\nAfter:\n\n```\nrunning 3 tests\ntest src/lib.rs - c (line 16) ... ok\ntest src/lib.rs - a (line 3) ... ok\ntest src/lib.rs - b (line 9) has been running for over 60 seconds\ntest src/lib.rs - b (line 9) ... ok\n```", "tree": {"sha": "9dd2b9d41fe8b025f76b780d7df71f12c931d3c2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9dd2b9d41fe8b025f76b780d7df71f12c931d3c2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/88753cead814a0830acdb527f513957fb9fe620a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/88753cead814a0830acdb527f513957fb9fe620a", "html_url": "https://github.com/rust-lang/rust/commit/88753cead814a0830acdb527f513957fb9fe620a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/88753cead814a0830acdb527f513957fb9fe620a/comments", "author": {"login": "tmiasko", "id": 51362316, "node_id": "MDQ6VXNlcjUxMzYyMzE2", "avatar_url": "https://avatars.githubusercontent.com/u/51362316?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmiasko", "html_url": "https://github.com/tmiasko", "followers_url": "https://api.github.com/users/tmiasko/followers", "following_url": "https://api.github.com/users/tmiasko/following{/other_user}", "gists_url": "https://api.github.com/users/tmiasko/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmiasko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmiasko/subscriptions", "organizations_url": "https://api.github.com/users/tmiasko/orgs", "repos_url": "https://api.github.com/users/tmiasko/repos", "events_url": "https://api.github.com/users/tmiasko/events{/privacy}", "received_events_url": "https://api.github.com/users/tmiasko/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tmiasko", "id": 51362316, "node_id": "MDQ6VXNlcjUxMzYyMzE2", "avatar_url": "https://avatars.githubusercontent.com/u/51362316?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmiasko", "html_url": "https://github.com/tmiasko", "followers_url": "https://api.github.com/users/tmiasko/followers", "following_url": "https://api.github.com/users/tmiasko/following{/other_user}", "gists_url": "https://api.github.com/users/tmiasko/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmiasko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmiasko/subscriptions", "organizations_url": "https://api.github.com/users/tmiasko/orgs", "repos_url": "https://api.github.com/users/tmiasko/repos", "events_url": "https://api.github.com/users/tmiasko/events{/privacy}", "received_events_url": "https://api.github.com/users/tmiasko/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "83b30a639d5abd1270ade35d9bd92271f5a5ba18", "url": "https://api.github.com/repos/rust-lang/rust/commits/83b30a639d5abd1270ade35d9bd92271f5a5ba18", "html_url": "https://github.com/rust-lang/rust/commit/83b30a639d5abd1270ade35d9bd92271f5a5ba18"}], "stats": {"total": 4, "additions": 0, "deletions": 4}, "files": [{"sha": "5e41d6d9692342067cf405fe971615f28b0bd734", "filename": "library/test/src/formatters/pretty.rs", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/88753cead814a0830acdb527f513957fb9fe620a/library%2Ftest%2Fsrc%2Fformatters%2Fpretty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/88753cead814a0830acdb527f513957fb9fe620a/library%2Ftest%2Fsrc%2Fformatters%2Fpretty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Ftest%2Fsrc%2Fformatters%2Fpretty.rs?ref=88753cead814a0830acdb527f513957fb9fe620a", "patch": "@@ -222,10 +222,6 @@ impl<T: Write> OutputFormatter for PrettyFormatter<T> {\n     }\n \n     fn write_timeout(&mut self, desc: &TestDesc) -> io::Result<()> {\n-        if self.is_multithreaded {\n-            self.write_test_name(desc)?;\n-        }\n-\n         self.write_plain(&format!(\n             \"test {} has been running for over {} seconds\\n\",\n             desc.name,"}]}