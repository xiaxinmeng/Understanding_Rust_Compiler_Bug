{"sha": "034c81b76145a0514916f34713671b16f26988df", "node_id": "MDY6Q29tbWl0NzI0NzEyOjAzNGM4MWI3NjE0NWEwNTE0OTE2ZjM0NzEzNjcxYjE2ZjI2OTg4ZGY=", "commit": {"author": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2018-03-26T19:57:42Z"}, "committer": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2018-03-26T19:57:42Z"}, "message": "Fix false positive in empty_line_after_outer_attribute\n\n`empty_line_after_outer_attribute` produced a false positive warning when\nderiving `Copy` and/or `Clone` for an item.\n\nIt looks like the second point in [this comment][that_comment] is related,\nas the attribute that causes the false positive has a path of\n`rustc_copy_clone_marker`.\n\nFixes #2475\n\n[that_comment]: https://github.com/rust-lang/rust/issues/35900#issuecomment-245978831", "tree": {"sha": "389f4125ccddb6c1beb008e61415f000d069b69c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/389f4125ccddb6c1beb008e61415f000d069b69c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/034c81b76145a0514916f34713671b16f26988df", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQItBAABCAAXBQJauVNvEBxkZXZAcGhhbnNjaC5uZXQACgkQk/szRZ0xHl7/Rw//\nWj8e24VMalRIHLpZiWqvTntlsJxpFNF4Cz2zawLXBU0LedRC46jr2pQ0WQzQVGS6\n61FG5wGz4zS02gsJzUcmpgXm1opQ/44NjrF6Mlm+Ceivtbct0RV6xUg8ERyO4z6v\n7Au8KjqIvAy024EvGf7pTkmZwc9EMd6DVL2I3Naub1VCq6vQ0s3/U65JSGWTg56B\nSuBfHnUpH6A2mb0eQVNT+jMXm19AvZXyzZvoN1xf++9f/9Ryzkn/7lwwcq7/rLNd\nDjLmA/iT9csSuJq4GjYFjzzOpkFt50GTRDToDIjBvasZwLb4/q69P8zYs3QcgSM/\nadZ/wLdr+U9CfnAnDEm9D18HPvJfs+hrbEd/1YLeI9n3vJ7ddTKAhp33a4yTxBLA\nXPFTFDq7aSM9v36xBlClyruYjWXrWsDywz0ObKYyBzy82kCfRXmei/efdQn5LWbk\nFa8rauS++OHX3goBSMex0Jhwz1URI5nCXp32URUs7oyT6bRxq4tTsqlaG+Xtz0Ht\n4+gjzsCJvtKFPF3S12Ko5XgjyDmLl66KqI79JIugSu5gYlcQsrNtPxDeMi8G4HEN\n5oShcdv8T3D9ttgFPi/hp713wi9dDmy0ktyXAlHYh0PQZsbYZvidlgUF6HwmyJ0H\nxaceT03/9J4AKu13GYiC5dZUya6SO9kpjT14j7aqYUY=\n=Ocr0\n-----END PGP SIGNATURE-----", "payload": "tree 389f4125ccddb6c1beb008e61415f000d069b69c\nparent eafd09010815da43302ac947afee45b0f5219e6b\nauthor Philipp Hansch <dev@phansch.net> 1522094262 +0200\ncommitter Philipp Hansch <dev@phansch.net> 1522094262 +0200\n\nFix false positive in empty_line_after_outer_attribute\n\n`empty_line_after_outer_attribute` produced a false positive warning when\nderiving `Copy` and/or `Clone` for an item.\n\nIt looks like the second point in [this comment][that_comment] is related,\nas the attribute that causes the false positive has a path of\n`rustc_copy_clone_marker`.\n\nFixes #2475\n\n[that_comment]: https://github.com/rust-lang/rust/issues/35900#issuecomment-245978831\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/034c81b76145a0514916f34713671b16f26988df", "html_url": "https://github.com/rust-lang/rust/commit/034c81b76145a0514916f34713671b16f26988df", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/034c81b76145a0514916f34713671b16f26988df/comments", "author": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "eafd09010815da43302ac947afee45b0f5219e6b", "url": "https://api.github.com/repos/rust-lang/rust/commits/eafd09010815da43302ac947afee45b0f5219e6b", "html_url": "https://github.com/rust-lang/rust/commit/eafd09010815da43302ac947afee45b0f5219e6b"}], "stats": {"total": 14, "additions": 13, "deletions": 1}, "files": [{"sha": "38cc40d2e16005fd65c98650ee618b18e1112324", "filename": "clippy_lints/src/attrs.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/034c81b76145a0514916f34713671b16f26988df/clippy_lints%2Fsrc%2Fattrs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/034c81b76145a0514916f34713671b16f26988df/clippy_lints%2Fsrc%2Fattrs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fattrs.rs?ref=034c81b76145a0514916f34713671b16f26988df", "patch": "@@ -267,7 +267,7 @@ fn check_attrs(cx: &LateContext, span: Span, name: &Name, attrs: &[Attribute]) {\n             return;\n         }\n         if attr.style == AttrStyle::Outer {\n-            if !is_present_in_source(cx, attr.span) {\n+            if attr.tokens.is_empty() || !is_present_in_source(cx, attr.span) {\n                 return;\n             }\n "}, {"sha": "16eb95abbcbf811a98d49f0b0c2027a77f795cd5", "filename": "tests/ui/empty_line_after_outer_attribute.rs", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/034c81b76145a0514916f34713671b16f26988df/tests%2Fui%2Fempty_line_after_outer_attribute.rs", "raw_url": "https://github.com/rust-lang/rust/raw/034c81b76145a0514916f34713671b16f26988df/tests%2Fui%2Fempty_line_after_outer_attribute.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fempty_line_after_outer_attribute.rs?ref=034c81b76145a0514916f34713671b16f26988df", "patch": "@@ -67,4 +67,16 @@ pub fn function() -> bool {\n     true\n }\n \n+// This should not produce a warning\n+#[derive(Clone, Copy)]\n+pub enum FooFighter {\n+    Bar1,\n+\n+    Bar2,\n+\n+    Bar3,\n+\n+    Bar4\n+}\n+\n fn main() { }"}]}