{"sha": "49b53cd7a0861cdba65643e3da441eefbe18d6e6", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ5YjUzY2Q3YTA4NjFjZGJhNjU2NDNlM2RhNDQxZWVmYmUxOGQ2ZTY=", "commit": {"author": {"name": "Matthew Jasper", "email": "mjjasper1@gmail.com", "date": "2020-02-10T20:11:44Z"}, "committer": {"name": "Matthew Jasper", "email": "mjjasper1@gmail.com", "date": "2020-02-10T20:11:44Z"}, "message": "Address review comments", "tree": {"sha": "67322ab09b687dab3801d9bec24ad9619fa8693b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/67322ab09b687dab3801d9bec24ad9619fa8693b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/49b53cd7a0861cdba65643e3da441eefbe18d6e6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/49b53cd7a0861cdba65643e3da441eefbe18d6e6", "html_url": "https://github.com/rust-lang/rust/commit/49b53cd7a0861cdba65643e3da441eefbe18d6e6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/49b53cd7a0861cdba65643e3da441eefbe18d6e6/comments", "author": {"login": "matthewjasper", "id": 20113453, "node_id": "MDQ6VXNlcjIwMTEzNDUz", "avatar_url": "https://avatars.githubusercontent.com/u/20113453?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthewjasper", "html_url": "https://github.com/matthewjasper", "followers_url": "https://api.github.com/users/matthewjasper/followers", "following_url": "https://api.github.com/users/matthewjasper/following{/other_user}", "gists_url": "https://api.github.com/users/matthewjasper/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthewjasper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthewjasper/subscriptions", "organizations_url": "https://api.github.com/users/matthewjasper/orgs", "repos_url": "https://api.github.com/users/matthewjasper/repos", "events_url": "https://api.github.com/users/matthewjasper/events{/privacy}", "received_events_url": "https://api.github.com/users/matthewjasper/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matthewjasper", "id": 20113453, "node_id": "MDQ6VXNlcjIwMTEzNDUz", "avatar_url": "https://avatars.githubusercontent.com/u/20113453?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthewjasper", "html_url": "https://github.com/matthewjasper", "followers_url": "https://api.github.com/users/matthewjasper/followers", "following_url": "https://api.github.com/users/matthewjasper/following{/other_user}", "gists_url": "https://api.github.com/users/matthewjasper/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthewjasper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthewjasper/subscriptions", "organizations_url": "https://api.github.com/users/matthewjasper/orgs", "repos_url": "https://api.github.com/users/matthewjasper/repos", "events_url": "https://api.github.com/users/matthewjasper/events{/privacy}", "received_events_url": "https://api.github.com/users/matthewjasper/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "504e2a46bd71cd0fcaf7eb774216f65951761e38", "url": "https://api.github.com/repos/rust-lang/rust/commits/504e2a46bd71cd0fcaf7eb774216f65951761e38", "html_url": "https://github.com/rust-lang/rust/commit/504e2a46bd71cd0fcaf7eb774216f65951761e38"}], "stats": {"total": 80, "additions": 66, "deletions": 14}, "files": [{"sha": "3afbaa82b84249c154cea96411b22b0a01043d3e", "filename": "crates/ra_parser/src/grammar/patterns.rs", "status": "modified", "additions": 8, "deletions": 7, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/49b53cd7a0861cdba65643e3da441eefbe18d6e6/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fpatterns.rs", "raw_url": "https://github.com/rust-lang/rust/raw/49b53cd7a0861cdba65643e3da441eefbe18d6e6/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fpatterns.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fpatterns.rs?ref=49b53cd7a0861cdba65643e3da441eefbe18d6e6", "patch": "@@ -41,16 +41,14 @@ fn pattern_r(p: &mut Parser, recovery_set: TokenSet) {\n     let m = p.start();\n     pattern_single_r(p, recovery_set);\n \n-    let mut is_or_pat = false;\n+    if !p.at(T![|]) {\n+        m.abandon(p);\n+        return;\n+    }\n     while p.eat(T![|]) {\n-        is_or_pat = true;\n         pattern_single_r(p, recovery_set);\n     }\n-    if is_or_pat {\n-        m.complete(p, OR_PAT);\n-    } else {\n-        m.abandon(p);\n-    }\n+    m.complete(p, OR_PAT);\n }\n \n fn pattern_single_r(p: &mut Parser, recovery_set: TokenSet) {\n@@ -292,6 +290,9 @@ fn ref_pat(p: &mut Parser) -> CompletedMarker {\n // test tuple_pat\n // fn main() {\n //     let (a, b, ..) = ();\n+//     let (a,) = ();\n+//     let (..) = ();\n+//     let () = ();\n // }\n fn tuple_pat(p: &mut Parser) -> CompletedMarker {\n     assert!(p.at(T!['(']));"}, {"sha": "ba719879d4c1acad2e13ddef6392072e1532e35a", "filename": "crates/ra_syntax/test_data/parser/inline/ok/0111_tuple_pat.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/49b53cd7a0861cdba65643e3da441eefbe18d6e6/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0111_tuple_pat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/49b53cd7a0861cdba65643e3da441eefbe18d6e6/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0111_tuple_pat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0111_tuple_pat.rs?ref=49b53cd7a0861cdba65643e3da441eefbe18d6e6", "patch": "@@ -1,3 +1,6 @@\n fn main() {\n     let (a, b, ..) = ();\n+    let (a,) = ();\n+    let (..) = ();\n+    let () = ();\n }"}, {"sha": "4680c267e7e3d71a085da71c909633d7a6b4fd53", "filename": "crates/ra_syntax/test_data/parser/inline/ok/0111_tuple_pat.txt", "status": "modified", "additions": 55, "deletions": 7, "changes": 62, "blob_url": "https://github.com/rust-lang/rust/blob/49b53cd7a0861cdba65643e3da441eefbe18d6e6/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0111_tuple_pat.txt", "raw_url": "https://github.com/rust-lang/rust/raw/49b53cd7a0861cdba65643e3da441eefbe18d6e6/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0111_tuple_pat.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0111_tuple_pat.txt?ref=49b53cd7a0861cdba65643e3da441eefbe18d6e6", "patch": "@@ -1,5 +1,5 @@\n-SOURCE_FILE@[0; 39)\n-  FN_DEF@[0; 38)\n+SOURCE_FILE@[0; 94)\n+  FN_DEF@[0; 93)\n     FN_KW@[0; 2) \"fn\"\n     WHITESPACE@[2; 3) \" \"\n     NAME@[3; 7)\n@@ -8,8 +8,8 @@ SOURCE_FILE@[0; 39)\n       L_PAREN@[7; 8) \"(\"\n       R_PAREN@[8; 9) \")\"\n     WHITESPACE@[9; 10) \" \"\n-    BLOCK_EXPR@[10; 38)\n-      BLOCK@[10; 38)\n+    BLOCK_EXPR@[10; 93)\n+      BLOCK@[10; 93)\n         L_CURLY@[10; 11) \"{\"\n         WHITESPACE@[11; 16) \"\\n    \"\n         LET_STMT@[16; 36)\n@@ -37,6 +37,54 @@ SOURCE_FILE@[0; 39)\n             L_PAREN@[33; 34) \"(\"\n             R_PAREN@[34; 35) \")\"\n           SEMI@[35; 36) \";\"\n-        WHITESPACE@[36; 37) \"\\n\"\n-        R_CURLY@[37; 38) \"}\"\n-  WHITESPACE@[38; 39) \"\\n\"\n+        WHITESPACE@[36; 41) \"\\n    \"\n+        LET_STMT@[41; 55)\n+          LET_KW@[41; 44) \"let\"\n+          WHITESPACE@[44; 45) \" \"\n+          TUPLE_PAT@[45; 49)\n+            L_PAREN@[45; 46) \"(\"\n+            BIND_PAT@[46; 47)\n+              NAME@[46; 47)\n+                IDENT@[46; 47) \"a\"\n+            COMMA@[47; 48) \",\"\n+            R_PAREN@[48; 49) \")\"\n+          WHITESPACE@[49; 50) \" \"\n+          EQ@[50; 51) \"=\"\n+          WHITESPACE@[51; 52) \" \"\n+          TUPLE_EXPR@[52; 54)\n+            L_PAREN@[52; 53) \"(\"\n+            R_PAREN@[53; 54) \")\"\n+          SEMI@[54; 55) \";\"\n+        WHITESPACE@[55; 60) \"\\n    \"\n+        LET_STMT@[60; 74)\n+          LET_KW@[60; 63) \"let\"\n+          WHITESPACE@[63; 64) \" \"\n+          TUPLE_PAT@[64; 68)\n+            L_PAREN@[64; 65) \"(\"\n+            DOT_DOT_PAT@[65; 67)\n+              DOTDOT@[65; 67) \"..\"\n+            R_PAREN@[67; 68) \")\"\n+          WHITESPACE@[68; 69) \" \"\n+          EQ@[69; 70) \"=\"\n+          WHITESPACE@[70; 71) \" \"\n+          TUPLE_EXPR@[71; 73)\n+            L_PAREN@[71; 72) \"(\"\n+            R_PAREN@[72; 73) \")\"\n+          SEMI@[73; 74) \";\"\n+        WHITESPACE@[74; 79) \"\\n    \"\n+        LET_STMT@[79; 91)\n+          LET_KW@[79; 82) \"let\"\n+          WHITESPACE@[82; 83) \" \"\n+          TUPLE_PAT@[83; 85)\n+            L_PAREN@[83; 84) \"(\"\n+            R_PAREN@[84; 85) \")\"\n+          WHITESPACE@[85; 86) \" \"\n+          EQ@[86; 87) \"=\"\n+          WHITESPACE@[87; 88) \" \"\n+          TUPLE_EXPR@[88; 90)\n+            L_PAREN@[88; 89) \"(\"\n+            R_PAREN@[89; 90) \")\"\n+          SEMI@[90; 91) \";\"\n+        WHITESPACE@[91; 92) \"\\n\"\n+        R_CURLY@[92; 93) \"}\"\n+  WHITESPACE@[93; 94) \"\\n\""}]}