{"sha": "788de4701ee8b7aec26f3b4f332fecc81c1d0c83", "node_id": "C_kwDOAAsO6NoAKDc4OGRlNDcwMWVlOGI3YWVjMjZmM2I0ZjMzMmZlY2M4MWMxZDBjODM", "commit": {"author": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2023-04-11T03:18:50Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-04-11T03:18:50Z"}, "message": "Rollup merge of #109923 - ElectrifyPro:visibility, r=wesleywiser\n\nUpdate `error [E0449]: unnecessary visibility qualifier` to be more clear\n\nThis updates the error message `error[E0449]: unnecessary visibility qualifier` by clearly indicating that visibility qualifiers already inherit their visibility from a parent item. The error message previously implied that the qualifiers were permitted, which is not the case anymore.\n\nResolves #109822.", "tree": {"sha": "93900259a780cebb931eee64343d4fbe296fe295", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/93900259a780cebb931eee64343d4fbe296fe295"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/788de4701ee8b7aec26f3b4f332fecc81c1d0c83", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJkNNGaCRBK7hj4Ov3rIwAA8HYIAH45VDevK71wK5Wrv1iDoi7W\nNzrfyk8yU2/odne05iRC2vjK4LLenZm4c6cyGI2j8s2y+N1/5hHTOAsTlIiIGO1V\nDbhvg/zcFcSIF182jMEGnNRzgD3FgCbiIIddY2dpcBVA2cETRFx/TyUF7Bmuiwco\n8jhG1oQ11dA6AIsC2vRMiKTpjqMyu1yagPmzsDk6yPeM1Df4fjoWfnkefndJALcv\neMgw2OunixCX1/S7IMwHtHpqohl1dLGLDgE9BRlWP/x2FrExdGCALY6zYs1Edqmx\nKkww5pQ7cjOsAwJCn7NU4f+tzDMy9jD02oPfJq38RbElMLvNWKSmi70tDqRvslQ=\n=3ex+\n-----END PGP SIGNATURE-----\n", "payload": "tree 93900259a780cebb931eee64343d4fbe296fe295\nparent 5af6385f9f0d33c4aa611db5efd80f9ab1b4ffde\nparent 4e5c120f33780c22923539f8a1e75b3959626cb3\nauthor Yuki Okushi <jtitor@2k36.org> 1681183130 +0900\ncommitter GitHub <noreply@github.com> 1681183130 +0900\n\nRollup merge of #109923 - ElectrifyPro:visibility, r=wesleywiser\n\nUpdate `error [E0449]: unnecessary visibility qualifier` to be more clear\n\nThis updates the error message `error[E0449]: unnecessary visibility qualifier` by clearly indicating that visibility qualifiers already inherit their visibility from a parent item. The error message previously implied that the qualifiers were permitted, which is not the case anymore.\n\nResolves #109822.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/788de4701ee8b7aec26f3b4f332fecc81c1d0c83", "html_url": "https://github.com/rust-lang/rust/commit/788de4701ee8b7aec26f3b4f332fecc81c1d0c83", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5af6385f9f0d33c4aa611db5efd80f9ab1b4ffde", "url": "https://api.github.com/repos/rust-lang/rust/commits/5af6385f9f0d33c4aa611db5efd80f9ab1b4ffde", "html_url": "https://github.com/rust-lang/rust/commit/5af6385f9f0d33c4aa611db5efd80f9ab1b4ffde"}, {"sha": "4e5c120f33780c22923539f8a1e75b3959626cb3", "url": "https://api.github.com/repos/rust-lang/rust/commits/4e5c120f33780c22923539f8a1e75b3959626cb3", "html_url": "https://github.com/rust-lang/rust/commit/4e5c120f33780c22923539f8a1e75b3959626cb3"}], "stats": {"total": 351, "additions": 213, "deletions": 138}, "files": [{"sha": "a349fe6a3c44b4586d428d2484a5d49e6364de8d", "filename": "compiler/rustc_ast_passes/messages.ftl", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/compiler%2Frustc_ast_passes%2Fmessages.ftl", "raw_url": "https://github.com/rust-lang/rust/raw/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/compiler%2Frustc_ast_passes%2Fmessages.ftl", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast_passes%2Fmessages.ftl?ref=788de4701ee8b7aec26f3b4f332fecc81c1d0c83", "patch": "@@ -17,9 +17,10 @@ ast_passes_keyword_lifetime =\n ast_passes_invalid_label =\n     invalid label name `{$name}`\n \n-ast_passes_invalid_visibility =\n-    unnecessary visibility qualifier\n-    .implied = `pub` not permitted here because it's implied\n+ast_passes_visibility_not_permitted =\n+    visibility qualifiers are not permitted here\n+    .enum_variant = enum variants and their fields always share the visibility of the enum they are in\n+    .trait_impl = trait items always share the visibility of their trait\n     .individual_impl_items = place qualifiers on individual impl items instead\n     .individual_foreign_items = place qualifiers on individual foreign items instead\n "}, {"sha": "e7cdfeca6f9b69142170451c7d7b71b44d7672f2", "filename": "compiler/rustc_ast_passes/src/ast_validation.rs", "status": "modified", "additions": 19, "deletions": 14, "changes": 33, "blob_url": "https://github.com/rust-lang/rust/blob/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/compiler%2Frustc_ast_passes%2Fsrc%2Fast_validation.rs", "raw_url": "https://github.com/rust-lang/rust/raw/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/compiler%2Frustc_ast_passes%2Fsrc%2Fast_validation.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast_passes%2Fsrc%2Fast_validation.rs?ref=788de4701ee8b7aec26f3b4f332fecc81c1d0c83", "patch": "@@ -240,16 +240,12 @@ impl<'a> AstValidator<'a> {\n         }\n     }\n \n-    fn invalid_visibility(&self, vis: &Visibility, note: Option<errors::InvalidVisibilityNote>) {\n+    fn visibility_not_permitted(&self, vis: &Visibility, note: errors::VisibilityNotPermittedNote) {\n         if let VisibilityKind::Inherited = vis.kind {\n             return;\n         }\n \n-        self.session.emit_err(errors::InvalidVisibility {\n-            span: vis.span,\n-            implied: vis.kind.is_pub().then_some(vis.span),\n-            note,\n-        });\n+        self.session.emit_err(errors::VisibilityNotPermitted { span: vis.span, note });\n     }\n \n     fn check_decl_no_pat(decl: &FnDecl, mut report_err: impl FnMut(Span, Option<Ident>, bool)) {\n@@ -819,7 +815,10 @@ impl<'a> Visitor<'a> for AstValidator<'a> {\n                 items,\n             }) => {\n                 self.with_in_trait_impl(true, Some(*constness), |this| {\n-                    this.invalid_visibility(&item.vis, None);\n+                    this.visibility_not_permitted(\n+                        &item.vis,\n+                        errors::VisibilityNotPermittedNote::TraitImpl,\n+                    );\n                     if let TyKind::Err = self_ty.kind {\n                         this.err_handler().emit_err(errors::ObsoleteAuto { span: item.span });\n                     }\n@@ -866,9 +865,9 @@ impl<'a> Visitor<'a> for AstValidator<'a> {\n                         only_trait: only_trait.then_some(()),\n                     };\n \n-                self.invalid_visibility(\n+                self.visibility_not_permitted(\n                     &item.vis,\n-                    Some(errors::InvalidVisibilityNote::IndividualImplItems),\n+                    errors::VisibilityNotPermittedNote::IndividualImplItems,\n                 );\n                 if let &Unsafe::Yes(span) = unsafety {\n                     self.err_handler().emit_err(errors::InherentImplCannotUnsafe {\n@@ -924,9 +923,9 @@ impl<'a> Visitor<'a> for AstValidator<'a> {\n             }\n             ItemKind::ForeignMod(ForeignMod { abi, unsafety, .. }) => {\n                 let old_item = mem::replace(&mut self.extern_mod, Some(item));\n-                self.invalid_visibility(\n+                self.visibility_not_permitted(\n                     &item.vis,\n-                    Some(errors::InvalidVisibilityNote::IndividualForeignItems),\n+                    errors::VisibilityNotPermittedNote::IndividualForeignItems,\n                 );\n                 if let &Unsafe::Yes(span) = unsafety {\n                     self.err_handler().emit_err(errors::UnsafeItem { span, kind: \"extern block\" });\n@@ -940,9 +939,15 @@ impl<'a> Visitor<'a> for AstValidator<'a> {\n             }\n             ItemKind::Enum(def, _) => {\n                 for variant in &def.variants {\n-                    self.invalid_visibility(&variant.vis, None);\n+                    self.visibility_not_permitted(\n+                        &variant.vis,\n+                        errors::VisibilityNotPermittedNote::EnumVariant,\n+                    );\n                     for field in variant.data.fields() {\n-                        self.invalid_visibility(&field.vis, None);\n+                        self.visibility_not_permitted(\n+                            &field.vis,\n+                            errors::VisibilityNotPermittedNote::EnumVariant,\n+                        );\n                     }\n                 }\n             }\n@@ -1301,7 +1306,7 @@ impl<'a> Visitor<'a> for AstValidator<'a> {\n         }\n \n         if ctxt == AssocCtxt::Trait || self.in_trait_impl {\n-            self.invalid_visibility(&item.vis, None);\n+            self.visibility_not_permitted(&item.vis, errors::VisibilityNotPermittedNote::TraitImpl);\n             if let AssocItemKind::Fn(box Fn { sig, .. }) = &item.kind {\n                 self.check_trait_fn_not_const(sig.header.constness);\n             }"}, {"sha": "27bbd237961a932db7b3b5e7a8493cd0e9d21e99", "filename": "compiler/rustc_ast_passes/src/errors.rs", "status": "modified", "additions": 8, "deletions": 6, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/compiler%2Frustc_ast_passes%2Fsrc%2Ferrors.rs", "raw_url": "https://github.com/rust-lang/rust/raw/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/compiler%2Frustc_ast_passes%2Fsrc%2Ferrors.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast_passes%2Fsrc%2Ferrors.rs?ref=788de4701ee8b7aec26f3b4f332fecc81c1d0c83", "patch": "@@ -42,18 +42,20 @@ pub struct InvalidLabel {\n }\n \n #[derive(Diagnostic)]\n-#[diag(ast_passes_invalid_visibility, code = \"E0449\")]\n-pub struct InvalidVisibility {\n+#[diag(ast_passes_visibility_not_permitted, code = \"E0449\")]\n+pub struct VisibilityNotPermitted {\n     #[primary_span]\n     pub span: Span,\n-    #[label(ast_passes_implied)]\n-    pub implied: Option<Span>,\n     #[subdiagnostic]\n-    pub note: Option<InvalidVisibilityNote>,\n+    pub note: VisibilityNotPermittedNote,\n }\n \n #[derive(Subdiagnostic)]\n-pub enum InvalidVisibilityNote {\n+pub enum VisibilityNotPermittedNote {\n+    #[note(ast_passes_enum_variant)]\n+    EnumVariant,\n+    #[note(ast_passes_trait_impl)]\n+    TraitImpl,\n     #[note(ast_passes_individual_impl_items)]\n     IndividualImplItems,\n     #[note(ast_passes_individual_foreign_items)]"}, {"sha": "a5876e0752842715e8f7dc36266cd5df7200dbb8", "filename": "compiler/rustc_error_codes/src/error_codes/E0449.md", "status": "modified", "additions": 20, "deletions": 9, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0449.md", "raw_url": "https://github.com/rust-lang/rust/raw/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0449.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0449.md?ref=788de4701ee8b7aec26f3b4f332fecc81c1d0c83", "patch": "@@ -1,4 +1,6 @@\n-A visibility qualifier was used when it was unnecessary.\n+A visibility qualifier was used where one is not permitted. Visibility\n+qualifiers are not permitted on enum variants, trait items, impl blocks, and\n+extern blocks, as they already share the visibility of the parent item.\n \n Erroneous code examples:\n \n@@ -9,15 +11,18 @@ trait Foo {\n     fn foo();\n }\n \n-pub impl Bar {} // error: unnecessary visibility qualifier\n+enum Baz {\n+    pub Qux, // error: visibility qualifiers are not permitted here\n+}\n+\n+pub impl Bar {} // error: visibility qualifiers are not permitted here\n \n-pub impl Foo for Bar { // error: unnecessary visibility qualifier\n-    pub fn foo() {} // error: unnecessary visibility qualifier\n+pub impl Foo for Bar { // error: visibility qualifiers are not permitted here\n+    pub fn foo() {} // error: visibility qualifiers are not permitted here\n }\n ```\n \n-To fix this error, please remove the visibility qualifier when it is not\n-required. Example:\n+To fix this error, simply remove the visibility qualifier. Example:\n \n ```\n struct Bar;\n@@ -26,12 +31,18 @@ trait Foo {\n     fn foo();\n }\n \n+enum Baz {\n+    // Enum variants share the visibility of the enum they are in, so\n+    // `pub` is not allowed here\n+    Qux,\n+}\n+\n // Directly implemented methods share the visibility of the type itself,\n-// so `pub` is unnecessary here\n+// so `pub` is not allowed here\n impl Bar {}\n \n-// Trait methods share the visibility of the trait, so `pub` is\n-// unnecessary in either case\n+// Trait methods share the visibility of the trait, so `pub` is not\n+// allowed in either case\n impl Foo for Bar {\n     fn foo() {}\n }"}, {"sha": "cf41bcce8c20231248c9facc2154b16fd4647235", "filename": "tests/ui/error-codes/E0449.stderr", "status": "modified", "additions": 10, "deletions": 6, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Ferror-codes%2FE0449.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Ferror-codes%2FE0449.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ferror-codes%2FE0449.stderr?ref=788de4701ee8b7aec26f3b4f332fecc81c1d0c83", "patch": "@@ -1,22 +1,26 @@\n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/E0449.rs:7:1\n    |\n LL | pub impl Bar {}\n-   | ^^^ `pub` not permitted here because it's implied\n+   | ^^^\n    |\n    = note: place qualifiers on individual impl items instead\n \n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/E0449.rs:9:1\n    |\n LL | pub impl Foo for Bar {\n-   | ^^^ `pub` not permitted here because it's implied\n+   | ^^^\n+   |\n+   = note: trait items always share the visibility of their trait\n \n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/E0449.rs:10:5\n    |\n LL |     pub fn foo() {}\n-   |     ^^^ `pub` not permitted here because it's implied\n+   |     ^^^\n+   |\n+   = note: trait items always share the visibility of their trait\n \n error: aborting due to 3 previous errors\n "}, {"sha": "2298ad240d5609d78ab131f44a9b34a39ccb335d", "filename": "tests/ui/issues/issue-28433.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fissues%2Fissue-28433.rs", "raw_url": "https://github.com/rust-lang/rust/raw/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fissues%2Fissue-28433.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fissues%2Fissue-28433.rs?ref=788de4701ee8b7aec26f3b4f332fecc81c1d0c83", "patch": "@@ -1,9 +1,9 @@\n enum Bird {\n     pub Duck,\n-    //~^ ERROR unnecessary visibility qualifier\n+    //~^ ERROR visibility qualifiers are not permitted here\n     Goose,\n     pub(crate) Dove\n-    //~^ ERROR unnecessary visibility qualifier\n+    //~^ ERROR visibility qualifiers are not permitted here\n }\n \n "}, {"sha": "5fb8a89621c2d530cae324389e074e280db0192c", "filename": "tests/ui/issues/issue-28433.stderr", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fissues%2Fissue-28433.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fissues%2Fissue-28433.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fissues%2Fissue-28433.stderr?ref=788de4701ee8b7aec26f3b4f332fecc81c1d0c83", "patch": "@@ -1,14 +1,18 @@\n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/issue-28433.rs:2:5\n    |\n LL |     pub Duck,\n-   |     ^^^ `pub` not permitted here because it's implied\n+   |     ^^^\n+   |\n+   = note: enum variants and their fields always share the visibility of the enum they are in\n \n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/issue-28433.rs:5:5\n    |\n LL |     pub(crate) Dove\n    |     ^^^^^^^^^^\n+   |\n+   = note: enum variants and their fields always share the visibility of the enum they are in\n \n error: aborting due to 2 previous errors\n "}, {"sha": "403160f1253a4f3ef947e1abdd0c4c9b9370a82b", "filename": "tests/ui/parser/assoc-static-semantic-fail.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fparser%2Fassoc-static-semantic-fail.rs", "raw_url": "https://github.com/rust-lang/rust/raw/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fparser%2Fassoc-static-semantic-fail.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fparser%2Fassoc-static-semantic-fail.rs?ref=788de4701ee8b7aec26f3b4f332fecc81c1d0c83", "patch": "@@ -31,7 +31,7 @@ trait T {\n     //~| ERROR a static item cannot be `default`\n     pub(crate) default static TD: u8;\n     //~^ ERROR associated `static` items are not allowed\n-    //~| ERROR unnecessary visibility qualifier\n+    //~| ERROR visibility qualifiers are not permitted here\n     //~| ERROR a static item cannot be `default`\n }\n \n@@ -47,6 +47,6 @@ impl T for S {\n     pub default static TD: u8;\n     //~^ ERROR associated `static` items are not allowed\n     //~| ERROR associated constant in `impl` without body\n-    //~| ERROR unnecessary visibility qualifier\n+    //~| ERROR visibility qualifiers are not permitted here\n     //~| ERROR a static item cannot be `default`\n }"}, {"sha": "8178bd223732669d6bd43c00a65487430a21afeb", "filename": "tests/ui/parser/assoc-static-semantic-fail.stderr", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fparser%2Fassoc-static-semantic-fail.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fparser%2Fassoc-static-semantic-fail.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fparser%2Fassoc-static-semantic-fail.stderr?ref=788de4701ee8b7aec26f3b4f332fecc81c1d0c83", "patch": "@@ -134,11 +134,13 @@ LL |     pub(crate) default static ID: u8;\n    |                                     |\n    |                                     help: provide a definition for the constant: `= <expr>;`\n \n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/assoc-static-semantic-fail.rs:32:5\n    |\n LL |     pub(crate) default static TD: u8;\n    |     ^^^^^^^^^^\n+   |\n+   = note: trait items always share the visibility of their trait\n \n error: associated constant in `impl` without body\n   --> $DIR/assoc-static-semantic-fail.rs:41:5\n@@ -156,11 +158,13 @@ LL |     pub default static TD: u8;\n    |                              |\n    |                              help: provide a definition for the constant: `= <expr>;`\n \n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/assoc-static-semantic-fail.rs:47:5\n    |\n LL |     pub default static TD: u8;\n-   |     ^^^ `pub` not permitted here because it's implied\n+   |     ^^^\n+   |\n+   = note: trait items always share the visibility of their trait\n \n warning: the feature `specialization` is incomplete and may not be safe to use and/or cause compiler crashes\n   --> $DIR/assoc-static-semantic-fail.rs:3:12"}, {"sha": "d1058ceb2a1c421cc79b9cbb96b466520b12ee2d", "filename": "tests/ui/parser/default.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fparser%2Fdefault.rs", "raw_url": "https://github.com/rust-lang/rust/raw/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fparser%2Fdefault.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fparser%2Fdefault.rs?ref=788de4701ee8b7aec26f3b4f332fecc81c1d0c83", "patch": "@@ -14,7 +14,7 @@ impl Foo for u8 {\n }\n \n impl Foo for u16 {\n-    pub default fn foo<T: Default>() -> T { //~ ERROR unnecessary visibility qualifier\n+    pub default fn foo<T: Default>() -> T { //~ ERROR visibility qualifiers are not permitted here\n         T::default()\n     }\n }"}, {"sha": "e6330f368d91707cd7af7d27e81bce0dac544b1e", "filename": "tests/ui/parser/default.stderr", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fparser%2Fdefault.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fparser%2Fdefault.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fparser%2Fdefault.stderr?ref=788de4701ee8b7aec26f3b4f332fecc81c1d0c83", "patch": "@@ -17,11 +17,13 @@ LL |     default pub fn foo<T: Default>() -> T { T::default() }\n LL | }\n    | - item list ends here\n \n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/default.rs:17:5\n    |\n LL |     pub default fn foo<T: Default>() -> T {\n-   |     ^^^ `pub` not permitted here because it's implied\n+   |     ^^^\n+   |\n+   = note: trait items always share the visibility of their trait\n \n warning: the feature `specialization` is incomplete and may not be safe to use and/or cause compiler crashes\n   --> $DIR/default.rs:3:12"}, {"sha": "7953e12ecdb8e4e55b525ecff204c1d51350e4d1", "filename": "tests/ui/parser/trait-pub-assoc-const.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fparser%2Ftrait-pub-assoc-const.rs", "raw_url": "https://github.com/rust-lang/rust/raw/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fparser%2Ftrait-pub-assoc-const.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fparser%2Ftrait-pub-assoc-const.rs?ref=788de4701ee8b7aec26f3b4f332fecc81c1d0c83", "patch": "@@ -1,6 +1,6 @@\n trait Foo {\n     pub const Foo: u32;\n-    //~^ ERROR unnecessary visibility qualifier\n+    //~^ ERROR visibility qualifiers are not permitted here\n }\n \n fn main() {}"}, {"sha": "c14a2f2eea527b4d862760eaf83f878abee9c43f", "filename": "tests/ui/parser/trait-pub-assoc-const.stderr", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fparser%2Ftrait-pub-assoc-const.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fparser%2Ftrait-pub-assoc-const.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fparser%2Ftrait-pub-assoc-const.stderr?ref=788de4701ee8b7aec26f3b4f332fecc81c1d0c83", "patch": "@@ -1,8 +1,10 @@\n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/trait-pub-assoc-const.rs:2:5\n    |\n LL |     pub const Foo: u32;\n-   |     ^^^ `pub` not permitted here because it's implied\n+   |     ^^^\n+   |\n+   = note: trait items always share the visibility of their trait\n \n error: aborting due to previous error\n "}, {"sha": "5d9434edc10558f13e6ad6a3208cee86ba8a1266", "filename": "tests/ui/parser/trait-pub-assoc-ty.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fparser%2Ftrait-pub-assoc-ty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fparser%2Ftrait-pub-assoc-ty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fparser%2Ftrait-pub-assoc-ty.rs?ref=788de4701ee8b7aec26f3b4f332fecc81c1d0c83", "patch": "@@ -1,6 +1,6 @@\n trait Foo {\n     pub type Foo;\n-    //~^ ERROR unnecessary visibility qualifier\n+    //~^ ERROR visibility qualifiers are not permitted here\n }\n \n fn main() {}"}, {"sha": "7f6e7350ca7a2df0ee6f1de86e0306c93eb96875", "filename": "tests/ui/parser/trait-pub-assoc-ty.stderr", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fparser%2Ftrait-pub-assoc-ty.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fparser%2Ftrait-pub-assoc-ty.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fparser%2Ftrait-pub-assoc-ty.stderr?ref=788de4701ee8b7aec26f3b4f332fecc81c1d0c83", "patch": "@@ -1,8 +1,10 @@\n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/trait-pub-assoc-ty.rs:2:5\n    |\n LL |     pub type Foo;\n-   |     ^^^ `pub` not permitted here because it's implied\n+   |     ^^^\n+   |\n+   = note: trait items always share the visibility of their trait\n \n error: aborting due to previous error\n "}, {"sha": "c8f33e782e2343d98c10902722c8731c63221639", "filename": "tests/ui/parser/trait-pub-method.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fparser%2Ftrait-pub-method.rs", "raw_url": "https://github.com/rust-lang/rust/raw/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fparser%2Ftrait-pub-method.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fparser%2Ftrait-pub-method.rs?ref=788de4701ee8b7aec26f3b4f332fecc81c1d0c83", "patch": "@@ -1,6 +1,6 @@\n trait Foo {\n     pub fn foo();\n-    //~^ ERROR unnecessary visibility qualifier\n+    //~^ ERROR visibility qualifiers are not permitted here\n }\n \n fn main() {}"}, {"sha": "2bf1d468a8535af19f65ead8f19a754f88d812d0", "filename": "tests/ui/parser/trait-pub-method.stderr", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fparser%2Ftrait-pub-method.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fparser%2Ftrait-pub-method.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fparser%2Ftrait-pub-method.stderr?ref=788de4701ee8b7aec26f3b4f332fecc81c1d0c83", "patch": "@@ -1,8 +1,10 @@\n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/trait-pub-method.rs:2:5\n    |\n LL |     pub fn foo();\n-   |     ^^^ `pub` not permitted here because it's implied\n+   |     ^^^\n+   |\n+   = note: trait items always share the visibility of their trait\n \n error: aborting due to previous error\n "}, {"sha": "5c926dee05b21392f387b2990ffab83985275b3b", "filename": "tests/ui/privacy/issue-29161.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fprivacy%2Fissue-29161.rs", "raw_url": "https://github.com/rust-lang/rust/raw/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fprivacy%2Fissue-29161.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fprivacy%2Fissue-29161.rs?ref=788de4701ee8b7aec26f3b4f332fecc81c1d0c83", "patch": "@@ -2,7 +2,7 @@ mod a {\n     struct A;\n \n     impl Default for A {\n-        pub fn default() -> A { //~ ERROR unnecessary visibility qualifier\n+        pub fn default() -> A { //~ ERROR visibility qualifiers are not permitted here\n             A\n         }\n     }"}, {"sha": "1a6c80499a1bf1f5d596c434f82cf1c403312f40", "filename": "tests/ui/privacy/issue-29161.stderr", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fprivacy%2Fissue-29161.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fprivacy%2Fissue-29161.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fprivacy%2Fissue-29161.stderr?ref=788de4701ee8b7aec26f3b4f332fecc81c1d0c83", "patch": "@@ -1,8 +1,10 @@\n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/issue-29161.rs:5:9\n    |\n LL |         pub fn default() -> A {\n-   |         ^^^ `pub` not permitted here because it's implied\n+   |         ^^^\n+   |\n+   = note: trait items always share the visibility of their trait\n \n error[E0603]: struct `A` is private\n   --> $DIR/issue-29161.rs:13:8"}, {"sha": "32c5b801fda83dcf38b9811ad6d19fcc09bfa85f", "filename": "tests/ui/privacy/priv-in-bad-locations.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fprivacy%2Fpriv-in-bad-locations.rs", "raw_url": "https://github.com/rust-lang/rust/raw/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fprivacy%2Fpriv-in-bad-locations.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fprivacy%2Fpriv-in-bad-locations.rs?ref=788de4701ee8b7aec26f3b4f332fecc81c1d0c83", "patch": "@@ -1,4 +1,4 @@\n-pub extern \"C\" { //~ ERROR unnecessary visibility qualifier\n+pub extern \"C\" { //~ ERROR visibility qualifiers are not permitted here\n     pub fn bar();\n }\n \n@@ -8,10 +8,10 @@ trait A {\n \n struct B;\n \n-pub impl B {} //~ ERROR unnecessary visibility qualifier\n+pub impl B {} //~ ERROR visibility qualifiers are not permitted here\n \n-pub impl A for B { //~ ERROR unnecessary visibility qualifier\n-    pub fn foo(&self) {} //~ ERROR unnecessary visibility qualifier\n+pub impl A for B { //~ ERROR visibility qualifiers are not permitted here\n+    pub fn foo(&self) {} //~ ERROR visibility qualifiers are not permitted here\n }\n \n pub fn main() {}"}, {"sha": "70dab5bfe13dff7728b0ef8f0204581b042f4b49", "filename": "tests/ui/privacy/priv-in-bad-locations.stderr", "status": "modified", "additions": 12, "deletions": 8, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fprivacy%2Fpriv-in-bad-locations.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fprivacy%2Fpriv-in-bad-locations.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fprivacy%2Fpriv-in-bad-locations.stderr?ref=788de4701ee8b7aec26f3b4f332fecc81c1d0c83", "patch": "@@ -1,30 +1,34 @@\n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/priv-in-bad-locations.rs:1:1\n    |\n LL | pub extern \"C\" {\n-   | ^^^ `pub` not permitted here because it's implied\n+   | ^^^\n    |\n    = note: place qualifiers on individual foreign items instead\n \n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/priv-in-bad-locations.rs:11:1\n    |\n LL | pub impl B {}\n-   | ^^^ `pub` not permitted here because it's implied\n+   | ^^^\n    |\n    = note: place qualifiers on individual impl items instead\n \n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/priv-in-bad-locations.rs:13:1\n    |\n LL | pub impl A for B {\n-   | ^^^ `pub` not permitted here because it's implied\n+   | ^^^\n+   |\n+   = note: trait items always share the visibility of their trait\n \n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/priv-in-bad-locations.rs:14:5\n    |\n LL |     pub fn foo(&self) {}\n-   |     ^^^ `pub` not permitted here because it's implied\n+   |     ^^^\n+   |\n+   = note: trait items always share the visibility of their trait\n \n error: aborting due to 4 previous errors\n "}, {"sha": "6622089dda6d7ef9b624755c3f42404ce86ace45", "filename": "tests/ui/privacy/privacy-sanity.rs", "status": "modified", "additions": 18, "deletions": 18, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fprivacy%2Fprivacy-sanity.rs", "raw_url": "https://github.com/rust-lang/rust/raw/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fprivacy%2Fprivacy-sanity.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fprivacy%2Fprivacy-sanity.rs?ref=788de4701ee8b7aec26f3b4f332fecc81c1d0c83", "patch": "@@ -10,17 +10,17 @@ pub struct S {\n }\n struct Ts(pub u8);\n \n-pub impl Tr for S {  //~ ERROR unnecessary visibility qualifier\n-    pub fn f() {} //~ ERROR unnecessary visibility qualifier\n-    pub const C: u8 = 0; //~ ERROR unnecessary visibility qualifier\n-    pub type T = u8; //~ ERROR unnecessary visibility qualifier\n+pub impl Tr for S {  //~ ERROR visibility qualifiers are not permitted here\n+    pub fn f() {} //~ ERROR visibility qualifiers are not permitted here\n+    pub const C: u8 = 0; //~ ERROR visibility qualifiers are not permitted here\n+    pub type T = u8; //~ ERROR visibility qualifiers are not permitted here\n }\n-pub impl S { //~ ERROR unnecessary visibility qualifier\n+pub impl S { //~ ERROR visibility qualifiers are not permitted here\n     pub fn f() {}\n     pub const C: u8 = 0;\n     // pub type T = u8;\n }\n-pub extern \"C\" { //~ ERROR unnecessary visibility qualifier\n+pub extern \"C\" { //~ ERROR visibility qualifiers are not permitted here\n     pub fn f();\n     pub static St: u8;\n }\n@@ -36,17 +36,17 @@ const MAIN: u8 = {\n     }\n     struct Ts(pub u8);\n \n-    pub impl Tr for S {  //~ ERROR unnecessary visibility qualifier\n-        pub fn f() {} //~ ERROR unnecessary visibility qualifier\n-        pub const C: u8 = 0; //~ ERROR unnecessary visibility qualifier\n-        pub type T = u8; //~ ERROR unnecessary visibility qualifier\n+    pub impl Tr for S {  //~ ERROR visibility qualifiers are not permitted here\n+        pub fn f() {} //~ ERROR visibility qualifiers are not permitted here\n+        pub const C: u8 = 0; //~ ERROR visibility qualifiers are not permitted here\n+        pub type T = u8; //~ ERROR visibility qualifiers are not permitted here\n     }\n-    pub impl S { //~ ERROR unnecessary visibility qualifier\n+    pub impl S { //~ ERROR visibility qualifiers are not permitted here\n         pub fn f() {}\n         pub const C: u8 = 0;\n         // pub type T = u8;\n     }\n-    pub extern \"C\" { //~ ERROR unnecessary visibility qualifier\n+    pub extern \"C\" { //~ ERROR visibility qualifiers are not permitted here\n         pub fn f();\n         pub static St: u8;\n     }\n@@ -65,17 +65,17 @@ fn main() {\n     }\n     struct Ts(pub u8);\n \n-    pub impl Tr for S {  //~ ERROR unnecessary visibility qualifier\n-        pub fn f() {} //~ ERROR unnecessary visibility qualifier\n-        pub const C: u8 = 0; //~ ERROR unnecessary visibility qualifier\n-        pub type T = u8; //~ ERROR unnecessary visibility qualifier\n+    pub impl Tr for S {  //~ ERROR visibility qualifiers are not permitted here\n+        pub fn f() {} //~ ERROR visibility qualifiers are not permitted here\n+        pub const C: u8 = 0; //~ ERROR visibility qualifiers are not permitted here\n+        pub type T = u8; //~ ERROR visibility qualifiers are not permitted here\n     }\n-    pub impl S { //~ ERROR unnecessary visibility qualifier\n+    pub impl S { //~ ERROR visibility qualifiers are not permitted here\n         pub fn f() {}\n         pub const C: u8 = 0;\n         // pub type T = u8;\n     }\n-    pub extern \"C\" { //~ ERROR unnecessary visibility qualifier\n+    pub extern \"C\" { //~ ERROR visibility qualifiers are not permitted here\n         pub fn f();\n         pub static St: u8;\n     }"}, {"sha": "a537f8c190103a77b61b3e74adef2a1fad988103", "filename": "tests/ui/privacy/privacy-sanity.stderr", "status": "modified", "additions": 60, "deletions": 36, "changes": 96, "blob_url": "https://github.com/rust-lang/rust/blob/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fprivacy%2Fprivacy-sanity.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fprivacy%2Fprivacy-sanity.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fprivacy%2Fprivacy-sanity.stderr?ref=788de4701ee8b7aec26f3b4f332fecc81c1d0c83", "patch": "@@ -1,120 +1,144 @@\n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/privacy-sanity.rs:13:1\n    |\n LL | pub impl Tr for S {\n-   | ^^^ `pub` not permitted here because it's implied\n+   | ^^^\n+   |\n+   = note: trait items always share the visibility of their trait\n \n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/privacy-sanity.rs:14:5\n    |\n LL |     pub fn f() {}\n-   |     ^^^ `pub` not permitted here because it's implied\n+   |     ^^^\n+   |\n+   = note: trait items always share the visibility of their trait\n \n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/privacy-sanity.rs:15:5\n    |\n LL |     pub const C: u8 = 0;\n-   |     ^^^ `pub` not permitted here because it's implied\n+   |     ^^^\n+   |\n+   = note: trait items always share the visibility of their trait\n \n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/privacy-sanity.rs:16:5\n    |\n LL |     pub type T = u8;\n-   |     ^^^ `pub` not permitted here because it's implied\n+   |     ^^^\n+   |\n+   = note: trait items always share the visibility of their trait\n \n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/privacy-sanity.rs:18:1\n    |\n LL | pub impl S {\n-   | ^^^ `pub` not permitted here because it's implied\n+   | ^^^\n    |\n    = note: place qualifiers on individual impl items instead\n \n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/privacy-sanity.rs:23:1\n    |\n LL | pub extern \"C\" {\n-   | ^^^ `pub` not permitted here because it's implied\n+   | ^^^\n    |\n    = note: place qualifiers on individual foreign items instead\n \n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/privacy-sanity.rs:39:5\n    |\n LL |     pub impl Tr for S {\n-   |     ^^^ `pub` not permitted here because it's implied\n+   |     ^^^\n+   |\n+   = note: trait items always share the visibility of their trait\n \n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/privacy-sanity.rs:40:9\n    |\n LL |         pub fn f() {}\n-   |         ^^^ `pub` not permitted here because it's implied\n+   |         ^^^\n+   |\n+   = note: trait items always share the visibility of their trait\n \n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/privacy-sanity.rs:41:9\n    |\n LL |         pub const C: u8 = 0;\n-   |         ^^^ `pub` not permitted here because it's implied\n+   |         ^^^\n+   |\n+   = note: trait items always share the visibility of their trait\n \n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/privacy-sanity.rs:42:9\n    |\n LL |         pub type T = u8;\n-   |         ^^^ `pub` not permitted here because it's implied\n+   |         ^^^\n+   |\n+   = note: trait items always share the visibility of their trait\n \n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/privacy-sanity.rs:44:5\n    |\n LL |     pub impl S {\n-   |     ^^^ `pub` not permitted here because it's implied\n+   |     ^^^\n    |\n    = note: place qualifiers on individual impl items instead\n \n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/privacy-sanity.rs:49:5\n    |\n LL |     pub extern \"C\" {\n-   |     ^^^ `pub` not permitted here because it's implied\n+   |     ^^^\n    |\n    = note: place qualifiers on individual foreign items instead\n \n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/privacy-sanity.rs:68:5\n    |\n LL |     pub impl Tr for S {\n-   |     ^^^ `pub` not permitted here because it's implied\n+   |     ^^^\n+   |\n+   = note: trait items always share the visibility of their trait\n \n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/privacy-sanity.rs:69:9\n    |\n LL |         pub fn f() {}\n-   |         ^^^ `pub` not permitted here because it's implied\n+   |         ^^^\n+   |\n+   = note: trait items always share the visibility of their trait\n \n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/privacy-sanity.rs:70:9\n    |\n LL |         pub const C: u8 = 0;\n-   |         ^^^ `pub` not permitted here because it's implied\n+   |         ^^^\n+   |\n+   = note: trait items always share the visibility of their trait\n \n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/privacy-sanity.rs:71:9\n    |\n LL |         pub type T = u8;\n-   |         ^^^ `pub` not permitted here because it's implied\n+   |         ^^^\n+   |\n+   = note: trait items always share the visibility of their trait\n \n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/privacy-sanity.rs:73:5\n    |\n LL |     pub impl S {\n-   |     ^^^ `pub` not permitted here because it's implied\n+   |     ^^^\n    |\n    = note: place qualifiers on individual impl items instead\n \n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/privacy-sanity.rs:78:5\n    |\n LL |     pub extern \"C\" {\n-   |     ^^^ `pub` not permitted here because it's implied\n+   |     ^^^\n    |\n    = note: place qualifiers on individual foreign items instead\n "}, {"sha": "e4b671142f9f0250355d484fcd6d085c0d612a9f", "filename": "tests/ui/privacy/useless-pub.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fprivacy%2Fuseless-pub.rs", "raw_url": "https://github.com/rust-lang/rust/raw/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fprivacy%2Fuseless-pub.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fprivacy%2Fuseless-pub.rs?ref=788de4701ee8b7aec26f3b4f332fecc81c1d0c83", "patch": "@@ -5,12 +5,12 @@ pub trait E {\n }\n \n impl E for A {\n-    pub fn foo(&self) {} //~ ERROR: unnecessary visibility qualifier\n+    pub fn foo(&self) {} //~ ERROR: visibility qualifiers are not permitted here\n }\n \n enum Foo {\n-    V1 { pub f: i32 }, //~ ERROR unnecessary visibility qualifier\n-    V2(pub i32), //~ ERROR unnecessary visibility qualifier\n+    V1 { pub f: i32 }, //~ ERROR visibility qualifiers are not permitted here\n+    V2(pub i32), //~ ERROR visibility qualifiers are not permitted here\n }\n \n fn main() {}"}, {"sha": "73497e3fed5bfb399fde8a3e7fce78bb3fe16709", "filename": "tests/ui/privacy/useless-pub.stderr", "status": "modified", "additions": 12, "deletions": 6, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fprivacy%2Fuseless-pub.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/788de4701ee8b7aec26f3b4f332fecc81c1d0c83/tests%2Fui%2Fprivacy%2Fuseless-pub.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fprivacy%2Fuseless-pub.stderr?ref=788de4701ee8b7aec26f3b4f332fecc81c1d0c83", "patch": "@@ -1,20 +1,26 @@\n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/useless-pub.rs:8:5\n    |\n LL |     pub fn foo(&self) {}\n-   |     ^^^ `pub` not permitted here because it's implied\n+   |     ^^^\n+   |\n+   = note: trait items always share the visibility of their trait\n \n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/useless-pub.rs:12:10\n    |\n LL |     V1 { pub f: i32 },\n-   |          ^^^ `pub` not permitted here because it's implied\n+   |          ^^^\n+   |\n+   = note: enum variants and their fields always share the visibility of the enum they are in\n \n-error[E0449]: unnecessary visibility qualifier\n+error[E0449]: visibility qualifiers are not permitted here\n   --> $DIR/useless-pub.rs:13:8\n    |\n LL |     V2(pub i32),\n-   |        ^^^ `pub` not permitted here because it's implied\n+   |        ^^^\n+   |\n+   = note: enum variants and their fields always share the visibility of the enum they are in\n \n error: aborting due to 3 previous errors\n "}]}