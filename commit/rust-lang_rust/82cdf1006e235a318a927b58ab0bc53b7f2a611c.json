{"sha": "82cdf1006e235a318a927b58ab0bc53b7f2a611c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgyY2RmMTAwNmUyMzVhMzE4YTkyN2I1OGFiMGJjNTNiN2YyYTYxMWM=", "commit": {"author": {"name": "Mark Simulacrum", "email": "mark.simulacrum@gmail.com", "date": "2017-08-13T00:07:01Z"}, "committer": {"name": "Mark Simulacrum", "email": "mark.simulacrum@gmail.com", "date": "2017-08-13T00:15:44Z"}, "message": "Cargotest needs only one rustdoc.exe to exist on Windows", "tree": {"sha": "045a9672840942f87edcac4f720d4e2ef6294dc1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/045a9672840942f87edcac4f720d4e2ef6294dc1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/82cdf1006e235a318a927b58ab0bc53b7f2a611c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/82cdf1006e235a318a927b58ab0bc53b7f2a611c", "html_url": "https://github.com/rust-lang/rust/commit/82cdf1006e235a318a927b58ab0bc53b7f2a611c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/82cdf1006e235a318a927b58ab0bc53b7f2a611c/comments", "author": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "657196830fd7fdc03eab87b8afa21601faf07975", "url": "https://api.github.com/repos/rust-lang/rust/commits/657196830fd7fdc03eab87b8afa21601faf07975", "html_url": "https://github.com/rust-lang/rust/commit/657196830fd7fdc03eab87b8afa21601faf07975"}], "stats": {"total": 10, "additions": 8, "deletions": 2}, "files": [{"sha": "255ded4c3f63fc340189532a5924a1e7c36d2b0a", "filename": "src/bootstrap/tool.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/82cdf1006e235a318a927b58ab0bc53b7f2a611c/src%2Fbootstrap%2Ftool.rs", "raw_url": "https://github.com/rust-lang/rust/raw/82cdf1006e235a318a927b58ab0bc53b7f2a611c/src%2Fbootstrap%2Ftool.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Ftool.rs?ref=82cdf1006e235a318a927b58ab0bc53b7f2a611c", "patch": "@@ -277,8 +277,11 @@ impl Step for Rustdoc {\n \n         let mut cargo = prepare_tool_cargo(builder, build_compiler, target, \"rustdoc\");\n         build.run(&mut cargo);\n+        // Cargo adds a number of paths to the dylib search path on windows, which results in\n+        // the wrong rustdoc being executed. To avoid the conflicting rustdocs, we name the \"tool\"\n+        // rustdoc a different name.\n         let tool_rustdoc = build.cargo_out(build_compiler, Mode::Tool, target)\n-            .join(exe(\"rustdoc\", &target_compiler.host));\n+            .join(exe(\"rustdoc-tool-binary\", &target_compiler.host));\n \n         // don't create a stage0-sysroot/bin directory.\n         if target_compiler.stage > 0 {"}, {"sha": "344f617ef95bc069da4e78c66caf95e98d14da91", "filename": "src/tools/rustdoc/Cargo.toml", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/82cdf1006e235a318a927b58ab0bc53b7f2a611c/src%2Ftools%2Frustdoc%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/82cdf1006e235a318a927b58ab0bc53b7f2a611c/src%2Ftools%2Frustdoc%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Frustdoc%2FCargo.toml?ref=82cdf1006e235a318a927b58ab0bc53b7f2a611c", "patch": "@@ -3,8 +3,11 @@ name = \"rustdoc-tool\"\n version = \"0.0.0\"\n authors = [\"The Rust Project Developers\"]\n \n+# Cargo adds a number of paths to the dylib search path on windows, which results in\n+# the wrong rustdoc being executed. To avoid the conflicting rustdocs, we name the \"tool\"\n+# rustdoc a different name.\n [[bin]]\n-name = \"rustdoc\"\n+name = \"rustdoc-tool-binary\"\n path = \"main.rs\"\n \n [dependencies]"}]}