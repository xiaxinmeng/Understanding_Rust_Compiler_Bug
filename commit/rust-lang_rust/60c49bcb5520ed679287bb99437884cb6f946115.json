{"sha": "60c49bcb5520ed679287bb99437884cb6f946115", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYwYzQ5YmNiNTUyMGVkNjc5Mjg3YmI5OTQzNzg4NGNiNmY5NDYxMTU=", "commit": {"author": {"name": "John K\u00e5re Alsaker", "email": "john.kare.alsaker@gmail.com", "date": "2019-04-09T08:03:02Z"}, "committer": {"name": "John K\u00e5re Alsaker", "email": "john.kare.alsaker@gmail.com", "date": "2019-07-07T01:23:00Z"}, "message": "Remove some dummy dependencies", "tree": {"sha": "2be4a8ace3c08c1351fe301534c2bc154f54557e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2be4a8ace3c08c1351fe301534c2bc154f54557e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/60c49bcb5520ed679287bb99437884cb6f946115", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/60c49bcb5520ed679287bb99437884cb6f946115", "html_url": "https://github.com/rust-lang/rust/commit/60c49bcb5520ed679287bb99437884cb6f946115", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/60c49bcb5520ed679287bb99437884cb6f946115/comments", "author": {"login": "Zoxc", "id": 25784, "node_id": "MDQ6VXNlcjI1Nzg0", "avatar_url": "https://avatars.githubusercontent.com/u/25784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zoxc", "html_url": "https://github.com/Zoxc", "followers_url": "https://api.github.com/users/Zoxc/followers", "following_url": "https://api.github.com/users/Zoxc/following{/other_user}", "gists_url": "https://api.github.com/users/Zoxc/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zoxc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zoxc/subscriptions", "organizations_url": "https://api.github.com/users/Zoxc/orgs", "repos_url": "https://api.github.com/users/Zoxc/repos", "events_url": "https://api.github.com/users/Zoxc/events{/privacy}", "received_events_url": "https://api.github.com/users/Zoxc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Zoxc", "id": 25784, "node_id": "MDQ6VXNlcjI1Nzg0", "avatar_url": "https://avatars.githubusercontent.com/u/25784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zoxc", "html_url": "https://github.com/Zoxc", "followers_url": "https://api.github.com/users/Zoxc/followers", "following_url": "https://api.github.com/users/Zoxc/following{/other_user}", "gists_url": "https://api.github.com/users/Zoxc/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zoxc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zoxc/subscriptions", "organizations_url": "https://api.github.com/users/Zoxc/orgs", "repos_url": "https://api.github.com/users/Zoxc/repos", "events_url": "https://api.github.com/users/Zoxc/events{/privacy}", "received_events_url": "https://api.github.com/users/Zoxc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "345ba505ece1d0b9f929d43bd7dc37036ae3c580", "url": "https://api.github.com/repos/rust-lang/rust/commits/345ba505ece1d0b9f929d43bd7dc37036ae3c580", "html_url": "https://github.com/rust-lang/rust/commit/345ba505ece1d0b9f929d43bd7dc37036ae3c580"}], "stats": {"total": 37, "additions": 3, "deletions": 34}, "files": [{"sha": "b6f3bc62dfd294aa859039dbb715efe01c793ad3", "filename": "src/librustc/Cargo.toml", "status": "modified", "additions": 0, "deletions": 30, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/60c49bcb5520ed679287bb99437884cb6f946115/src%2Flibrustc%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/60c49bcb5520ed679287bb99437884cb6f946115/src%2Flibrustc%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2FCargo.toml?ref=60c49bcb5520ed679287bb99437884cb6f946115", "patch": "@@ -37,33 +37,3 @@ chalk-engine = { version = \"0.9.0\", default-features=false }\n rustc_fs_util = { path = \"../librustc_fs_util\" }\n smallvec = { version = \"0.6.7\", features = [\"union\", \"may_dangle\"] }\n measureme = \"0.3\"\n-\n-# Note that these dependencies are a lie, they're just here to get linkage to\n-# work.\n-#\n-# We're creating a bunch of dylibs for the compiler but we're also compiling a\n-# bunch of crates.io crates. Everything in the compiler is compiled as an\n-# rlib/dylib pair but all crates.io crates tend to just be rlibs. This means\n-# we've got a problem for dependency graphs that look like:\n-#\n-#           foo - rustc_codegen_llvm\n-#         /                  \\\n-#   rustc                     ---- rustc_driver\n-#         \\                     /\n-#           foo - rustc_metadata\n-#\n-# Here the crate `foo` is linked into the `rustc_codegen_llvm` and the\n-# `rustc_metadata` dylibs, meaning we've got duplicate copies! When we then\n-# go to link `rustc_driver` the compiler notices this and gives us a compiler\n-# error.\n-#\n-# To work around this problem we just add these crates.io dependencies to the\n-# `rustc` crate which is a shared dependency above. That way the crate `foo`\n-# shows up in the dylib for the `rustc` crate, deduplicating it and allowing\n-# crates like `rustc_codegen_llvm` to use `foo` *through* the `rustc` crate.\n-#\n-# tl;dr; this is not needed to get `rustc` to compile, but if you remove it then\n-#        later crate stop compiling. If you can remove this and everything\n-#        compiles, then please feel free to do so!\n-flate2 = \"1.0\"\n-tempfile = \"3.0\""}, {"sha": "dc26140ace5a583e953b9450744a3ddfda552f71", "filename": "src/librustc/lib.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/60c49bcb5520ed679287bb99437884cb6f946115/src%2Flibrustc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/60c49bcb5520ed679287bb99437884cb6f946115/src%2Flibrustc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Flib.rs?ref=60c49bcb5520ed679287bb99437884cb6f946115", "patch": "@@ -89,10 +89,8 @@ extern crate serialize as rustc_serialize;\n \n #[macro_use] extern crate smallvec;\n \n-// Note that librustc doesn't actually depend on these crates, see the note in\n-// `Cargo.toml` for this crate about why these are here.\n-#[allow(unused_extern_crates)]\n-extern crate flate2;\n+// Use the test crate here so we depend on getopts through it. This allow tools to link to both\n+// librustc_driver and libtest.\n #[allow(unused_extern_crates)]\n extern crate test;\n "}, {"sha": "291d32a06814d2195ea1ef480c7d7dae9b10a656", "filename": "src/librustc_codegen_llvm/Cargo.toml", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/60c49bcb5520ed679287bb99437884cb6f946115/src%2Flibrustc_codegen_llvm%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/60c49bcb5520ed679287bb99437884cb6f946115/src%2Flibrustc_codegen_llvm%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_llvm%2FCargo.toml?ref=60c49bcb5520ed679287bb99437884cb6f946115", "patch": "@@ -13,6 +13,7 @@ test = false\n [dependencies]\n cc = \"1.0.1\" # Used to locate MSVC\n num_cpus = \"1.0\"\n+tempfile = \"3.0\"\n rustc-demangle = \"0.1.15\"\n rustc_llvm = { path = \"../librustc_llvm\" }\n memmap = \"0.6\""}]}