{"sha": "b69c81c9e0ad3ad1f38ba1874c3252d9c561b331", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI2OWM4MWM5ZTBhZDNhZDFmMzhiYTE4NzRjMzI1MmQ5YzU2MWIzMzE=", "commit": {"author": {"name": "joaoxsouls", "email": "joaoxsouls@gmail.com", "date": "2014-02-02T17:33:00Z"}, "committer": {"name": "joaoxsouls", "email": "joaoxsouls@gmail.com", "date": "2014-02-04T00:07:16Z"}, "message": "doc: update boxes section on Manual, remove managed pointers references", "tree": {"sha": "8c9643797c75ad22d66389510291539d17717ff8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8c9643797c75ad22d66389510291539d17717ff8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b69c81c9e0ad3ad1f38ba1874c3252d9c561b331", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b69c81c9e0ad3ad1f38ba1874c3252d9c561b331", "html_url": "https://github.com/rust-lang/rust/commit/b69c81c9e0ad3ad1f38ba1874c3252d9c561b331", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b69c81c9e0ad3ad1f38ba1874c3252d9c561b331/comments", "author": {"login": "jxs", "id": 1204690, "node_id": "MDQ6VXNlcjEyMDQ2OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1204690?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jxs", "html_url": "https://github.com/jxs", "followers_url": "https://api.github.com/users/jxs/followers", "following_url": "https://api.github.com/users/jxs/following{/other_user}", "gists_url": "https://api.github.com/users/jxs/gists{/gist_id}", "starred_url": "https://api.github.com/users/jxs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jxs/subscriptions", "organizations_url": "https://api.github.com/users/jxs/orgs", "repos_url": "https://api.github.com/users/jxs/repos", "events_url": "https://api.github.com/users/jxs/events{/privacy}", "received_events_url": "https://api.github.com/users/jxs/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jxs", "id": 1204690, "node_id": "MDQ6VXNlcjEyMDQ2OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1204690?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jxs", "html_url": "https://github.com/jxs", "followers_url": "https://api.github.com/users/jxs/followers", "following_url": "https://api.github.com/users/jxs/following{/other_user}", "gists_url": "https://api.github.com/users/jxs/gists{/gist_id}", "starred_url": "https://api.github.com/users/jxs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jxs/subscriptions", "organizations_url": "https://api.github.com/users/jxs/orgs", "repos_url": "https://api.github.com/users/jxs/repos", "events_url": "https://api.github.com/users/jxs/events{/privacy}", "received_events_url": "https://api.github.com/users/jxs/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d42521aa92006a3378c535adec80ae2257bff083", "url": "https://api.github.com/repos/rust-lang/rust/commits/d42521aa92006a3378c535adec80ae2257bff083", "html_url": "https://github.com/rust-lang/rust/commit/d42521aa92006a3378c535adec80ae2257bff083"}], "stats": {"total": 69, "additions": 12, "deletions": 57}, "files": [{"sha": "c95bfee4ace1f926036b750c50aa38c9e2b4b851", "filename": "src/doc/rust.md", "status": "modified", "additions": 12, "deletions": 57, "changes": 69, "blob_url": "https://github.com/rust-lang/rust/blob/b69c81c9e0ad3ad1f38ba1874c3252d9c561b331/src%2Fdoc%2Frust.md", "raw_url": "https://github.com/rust-lang/rust/raw/b69c81c9e0ad3ad1f38ba1874c3252d9c561b331/src%2Fdoc%2Frust.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Frust.md?ref=b69c81c9e0ad3ad1f38ba1874c3252d9c561b331", "patch": "@@ -2426,9 +2426,9 @@ before the expression they apply to.\n   : Logical negation. On the boolean type, this flips between `true` and\n     `false`. On integer types, this inverts the individual bits in the\n     two's complement representation of the value.\n-`@` and `~`\n+`~`\n   :  [Boxing](#pointer-types) operators. Allocate a box to hold the value they are applied to,\n-     and store the value in it. `@` creates a managed box, whereas `~` creates an owned box.\n+     and store the value in it. `~` creates an owned box.\n `&`\n   : Borrow operator. Returns a reference, pointing to its operand.\n     The operand of a borrow is statically proven to outlive the resulting pointer.\n@@ -3203,16 +3203,6 @@ All pointers in Rust are explicit first-class values.\n They can be copied, stored into data structures, and returned from functions.\n There are four varieties of pointer in Rust:\n \n-Managed pointers (`@`)\n-  : These point to managed heap allocations (or \"boxes\") in the task-local, managed heap.\n-    Managed pointers are written `@content`,\n-    for example `@int` means a managed pointer to a managed box containing an integer.\n-    Copying a managed pointer is a \"shallow\" operation:\n-    it involves only copying the pointer itself\n-    (as well as any reference-count or GC-barriers required by the managed heap).\n-    Dropping a managed pointer does not necessarily release the box it points to;\n-    the lifecycles of managed boxes are subject to an unspecified garbage collection algorithm.\n-\n Owning pointers (`~`)\n   : These point to owned heap allocations (or \"boxes\") in the shared, inter-task heap.\n     Each owned box has a single owning pointer; pointer and pointee retain a 1:1 relationship at all times.\n@@ -3521,63 +3511,28 @@ state. Subsequent statements within a function may or may not initialize the\n local variables. Local variables can be used only after they have been\n initialized; this is enforced by the compiler.\n \n-### Memory boxes\n-\n-A _box_ is a reference to a heap allocation holding another value. There\n-are two kinds of boxes: *managed boxes* and *owned boxes*.\n-\n-A _managed box_ type or value is constructed by the prefix *at* sigil `@`.\n-\n-An _owned box_ type or value is constructed by the prefix *tilde* sigil `~`.\n+### Owned boxes\n \n-Multiple managed box values can point to the same heap allocation; copying a\n-managed box value makes a shallow copy of the pointer (optionally incrementing\n-a reference count, if the managed box is implemented through\n-reference-counting).\n+An  _owned box_ is a reference to a heap allocation holding another value, which is constructed\n+by the prefix *tilde* sigil `~`\n \n-Owned box values exist in 1:1 correspondence with their heap allocation.\n-\n-An example of constructing one managed box type and value, and one owned box\n-type and value:\n+An example of an owned box type and value:\n \n ~~~~\n-let x: @int = @10;\n let x: ~int = ~10;\n ~~~~\n \n-Some operations (such as field selection) implicitly dereference boxes. An\n-example of an _implicit dereference_ operation performed on box values:\n+Owned box values exist in 1:1 correspondence with their heap allocation\n+copying an owned box value makes a shallow copy of the pointer\n+Rust will consider a shallow copy of an owned box to move ownership of the value. After a value has been moved, the source location cannot be used unless it is reinitialized.\n \n ~~~~\n-struct Foo { y: int }\n-let x = @Foo{y: 10};\n-assert!(x.y == 10);\n-~~~~\n-\n-Other operations act on box values as single-word-sized address values. For\n-these operations, to access the value held in the box requires an explicit\n-dereference of the box value. Explicitly dereferencing a box is indicated with\n-the unary *star* operator `*`. Examples of such _explicit dereference_\n-operations are:\n-\n-* copying box values (`x = y`)\n-* passing box values to functions (`f(x,y)`)\n-\n-An example of an explicit-dereference operation performed on box values:\n-\n+let x: ~int = ~10;\n+let y = x;\n+// attempting to use `x` will result in an error here\n ~~~~\n-fn takes_boxed(b: @int) {\n-}\n \n-fn takes_unboxed(b: int) {\n-}\n \n-fn main() {\n-    let x: @int = @10;\n-    takes_boxed(x);\n-    takes_unboxed(*x);\n-}\n-~~~~\n \n ## Tasks\n "}]}