{"sha": "5b429622befc7838c9ea7d52d1e447bc0af6d0c8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjViNDI5NjIyYmVmYzc4MzhjOWVhN2Q1MmQxZTQ0N2JjMGFmNmQwYzg=", "commit": {"author": {"name": "klutzy", "email": "klutzytheklutzy@gmail.com", "date": "2013-11-26T11:57:23Z"}, "committer": {"name": "klutzy", "email": "klutzytheklutzy@gmail.com", "date": "2013-11-26T11:57:26Z"}, "message": "Turn off attribute_usage warning on check-fast", "tree": {"sha": "ed79eae633960be17592e4b9366e38738ecc8fa6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ed79eae633960be17592e4b9366e38738ecc8fa6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5b429622befc7838c9ea7d52d1e447bc0af6d0c8", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5b429622befc7838c9ea7d52d1e447bc0af6d0c8", "html_url": "https://github.com/rust-lang/rust/commit/5b429622befc7838c9ea7d52d1e447bc0af6d0c8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5b429622befc7838c9ea7d52d1e447bc0af6d0c8/comments", "author": {"login": "klutzy", "id": 1589355, "node_id": "MDQ6VXNlcjE1ODkzNTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1589355?v=4", "gravatar_id": "", "url": "https://api.github.com/users/klutzy", "html_url": "https://github.com/klutzy", "followers_url": "https://api.github.com/users/klutzy/followers", "following_url": "https://api.github.com/users/klutzy/following{/other_user}", "gists_url": "https://api.github.com/users/klutzy/gists{/gist_id}", "starred_url": "https://api.github.com/users/klutzy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/klutzy/subscriptions", "organizations_url": "https://api.github.com/users/klutzy/orgs", "repos_url": "https://api.github.com/users/klutzy/repos", "events_url": "https://api.github.com/users/klutzy/events{/privacy}", "received_events_url": "https://api.github.com/users/klutzy/received_events", "type": "User", "site_admin": false}, "committer": {"login": "klutzy", "id": 1589355, "node_id": "MDQ6VXNlcjE1ODkzNTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1589355?v=4", "gravatar_id": "", "url": "https://api.github.com/users/klutzy", "html_url": "https://github.com/klutzy", "followers_url": "https://api.github.com/users/klutzy/followers", "following_url": "https://api.github.com/users/klutzy/following{/other_user}", "gists_url": "https://api.github.com/users/klutzy/gists{/gist_id}", "starred_url": "https://api.github.com/users/klutzy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/klutzy/subscriptions", "organizations_url": "https://api.github.com/users/klutzy/orgs", "repos_url": "https://api.github.com/users/klutzy/repos", "events_url": "https://api.github.com/users/klutzy/events{/privacy}", "received_events_url": "https://api.github.com/users/klutzy/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "21990cdda624f5eee340311b7f8e542ab8a218e1", "url": "https://api.github.com/repos/rust-lang/rust/commits/21990cdda624f5eee340311b7f8e542ab8a218e1", "html_url": "https://github.com/rust-lang/rust/commit/21990cdda624f5eee340311b7f8e542ab8a218e1"}], "stats": {"total": 28, "additions": 16, "deletions": 12}, "files": [{"sha": "5815e5448aee17dd7c433a2b1289cbcba0c778cc", "filename": "src/etc/combine-tests.py", "status": "modified", "additions": 16, "deletions": 12, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/5b429622befc7838c9ea7d52d1e447bc0af6d0c8/src%2Fetc%2Fcombine-tests.py", "raw_url": "https://github.com/rust-lang/rust/raw/5b429622befc7838c9ea7d52d1e447bc0af6d0c8/src%2Fetc%2Fcombine-tests.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fcombine-tests.py?ref=5b429622befc7838c9ea7d52d1e447bc0af6d0c8", "patch": "@@ -5,25 +5,28 @@\n # can run it \"fast\": spawning zillions of windows processes is our major build\n # bottleneck (and it doesn't hurt to run faster on other platforms as well).\n \n-import sys, os, re, codecs\n+import sys\n+import os\n+import codecs\n+\n \n def scrub(b):\n-  if sys.version_info >= (3,) and type(b) == bytes:\n-    return b.decode('ascii')\n-  else:\n-    return b\n+    if sys.version_info >= (3,) and type(b) == bytes:\n+        return b.decode('ascii')\n+    else:\n+        return b\n \n src_dir = scrub(os.getenv(\"CFG_SRC_DIR\"))\n if not src_dir:\n-  raise Exception(\"missing env var CFG_SRC_DIR\")\n+    raise Exception(\"missing env var CFG_SRC_DIR\")\n \n run_pass = os.path.join(src_dir, \"src\", \"test\", \"run-pass\")\n run_pass = os.path.abspath(run_pass)\n stage2_tests = []\n \n for t in os.listdir(run_pass):\n     if t.endswith(\".rs\") and not (\n-      t.startswith(\".\") or t.startswith(\"#\") or t.startswith(\"~\")):\n+            t.startswith(\".\") or t.startswith(\"#\") or t.startswith(\"~\")):\n         f = codecs.open(os.path.join(run_pass, t), \"r\", \"utf8\")\n         s = f.read()\n         if not (\"xfail-test\" in s or\n@@ -41,10 +44,11 @@ def scrub(b):\n c.write(\"// AUTO-GENERATED FILE: DO NOT EDIT\\n\")\n c.write(\"#[link(name=\\\"run_pass_stage2\\\", vers=\\\"0.1\\\")];\\n\")\n c.write(\"#[feature(globs, macro_rules, struct_variant, managed_boxes)];\\n\")\n+c.write(\"#[allow(attribute_usage)];\\n\")\n for t in stage2_tests:\n     p = os.path.join(run_pass, t)\n     p = p.replace(\"\\\\\", \"\\\\\\\\\")\n-    c.write(\"#[path = \\\"%s\\\"]\" % p);\n+    c.write(\"#[path = \\\"%s\\\"]\" % p)\n     c.write(\"pub mod t_%d;\\n\" % i)\n     i += 1\n c.close()\n@@ -56,10 +60,10 @@ def scrub(b):\n d.write(\"extern mod extra;\\n\")\n d.write(\"extern mod run_pass_stage2;\\n\")\n d.write(\"use run_pass_stage2::*;\\n\")\n-d.write(\"use std::io;\\n\");\n-d.write(\"use std::io::Writer;\\n\");\n-d.write(\"fn main() {\\n\");\n-d.write(\"    let mut out = io::stdout();\\n\");\n+d.write(\"use std::io;\\n\")\n+d.write(\"use std::io::Writer;\\n\")\n+d.write(\"fn main() {\\n\")\n+d.write(\"    let mut out = io::stdout();\\n\")\n i = 0\n for t in stage2_tests:\n     p = os.path.join(\"test\", \"run-pass\", t)"}]}