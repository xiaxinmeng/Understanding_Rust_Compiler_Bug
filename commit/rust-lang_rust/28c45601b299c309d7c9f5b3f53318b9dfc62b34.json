{"sha": "28c45601b299c309d7c9f5b3f53318b9dfc62b34", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI4YzQ1NjAxYjI5OWMzMDlkN2M5ZjViM2Y1MzMxOGI5ZGZjNjJiMzQ=", "commit": {"author": {"name": "Tim Chevalier", "email": "chevalier@alum.wellesley.edu", "date": "2012-10-06T02:23:44Z"}, "committer": {"name": "Tim Chevalier", "email": "chevalier@alum.wellesley.edu", "date": "2012-10-06T02:24:04Z"}, "message": "De-mode mysterious unused functions in middle::trans::shape (see comment)", "tree": {"sha": "594ad190f151960aa20c9538c074f611dace69fe", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/594ad190f151960aa20c9538c074f611dace69fe"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/28c45601b299c309d7c9f5b3f53318b9dfc62b34", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/28c45601b299c309d7c9f5b3f53318b9dfc62b34", "html_url": "https://github.com/rust-lang/rust/commit/28c45601b299c309d7c9f5b3f53318b9dfc62b34", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/28c45601b299c309d7c9f5b3f53318b9dfc62b34/comments", "author": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "committer": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0dd4b42a00e01189a28ec12d20a8b144b4e02a14", "url": "https://api.github.com/repos/rust-lang/rust/commits/0dd4b42a00e01189a28ec12d20a8b144b4e02a14", "html_url": "https://github.com/rust-lang/rust/commit/0dd4b42a00e01189a28ec12d20a8b144b4e02a14"}], "stats": {"total": 12, "additions": 8, "deletions": 4}, "files": [{"sha": "127af438807394f025005b27b3b1049ef6bf0568", "filename": "src/rustc/middle/trans/shape.rs", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/28c45601b299c309d7c9f5b3f53318b9dfc62b34/src%2Frustc%2Fmiddle%2Ftrans%2Fshape.rs", "raw_url": "https://github.com/rust-lang/rust/raw/28c45601b299c309d7c9f5b3f53318b9dfc62b34/src%2Frustc%2Fmiddle%2Ftrans%2Fshape.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fmiddle%2Ftrans%2Fshape.rs?ref=28c45601b299c309d7c9f5b3f53318b9dfc62b34", "patch": "@@ -49,12 +49,16 @@ fn mk_ctxt(llmod: ModuleRef) -> ctxt {\n     return {mut next_tag_id: 0u16, pad: 0u16, pad2: 0u32};\n }\n \n-fn add_u16(&dest: ~[u8], val: u16) {\n-    dest += ~[(val & 0xffu16) as u8, (val >> 8u16) as u8];\n+/*\n+Although these two functions are never called, they are here\n+for a VERY GOOD REASON. See #3670\n+*/\n+fn add_u16(dest: &mut ~[u8], val: u16) {\n+    *dest += ~[(val & 0xffu16) as u8, (val >> 8u16) as u8];\n }\n \n-fn add_substr(&dest: ~[u8], src: ~[u8]) {\n+fn add_substr(dest: &mut ~[u8], src: ~[u8]) {\n     add_u16(dest, vec::len(src) as u16);\n-    dest += src;\n+    *dest += src;\n }\n "}]}