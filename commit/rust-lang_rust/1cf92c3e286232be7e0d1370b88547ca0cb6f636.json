{"sha": "1cf92c3e286232be7e0d1370b88547ca0cb6f636", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFjZjkyYzNlMjg2MjMyYmU3ZTBkMTM3MGI4ODU0N2NhMGNiNmY2MzY=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-11-20T18:17:14Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-11-20T18:17:14Z"}, "message": "remember spans with paths", "tree": {"sha": "8400f21e8e1eb1ef58705e4fa342e56de58765fb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8400f21e8e1eb1ef58705e4fa342e56de58765fb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1cf92c3e286232be7e0d1370b88547ca0cb6f636", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1cf92c3e286232be7e0d1370b88547ca0cb6f636", "html_url": "https://github.com/rust-lang/rust/commit/1cf92c3e286232be7e0d1370b88547ca0cb6f636", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1cf92c3e286232be7e0d1370b88547ca0cb6f636/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c54b51fdedd21b0367af7cb3fac3bc16d21b8cc1", "url": "https://api.github.com/repos/rust-lang/rust/commits/c54b51fdedd21b0367af7cb3fac3bc16d21b8cc1", "html_url": "https://github.com/rust-lang/rust/commit/c54b51fdedd21b0367af7cb3fac3bc16d21b8cc1"}], "stats": {"total": 7, "additions": 4, "deletions": 3}, "files": [{"sha": "18e8342b349a425a7a0329becb2a2807f83c1086", "filename": "crates/ra_analysis/src/descriptors/module/nameres.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/1cf92c3e286232be7e0d1370b88547ca0cb6f636/crates%2Fra_analysis%2Fsrc%2Fdescriptors%2Fmodule%2Fnameres.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1cf92c3e286232be7e0d1370b88547ca0cb6f636/crates%2Fra_analysis%2Fsrc%2Fdescriptors%2Fmodule%2Fnameres.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_analysis%2Fsrc%2Fdescriptors%2Fmodule%2Fnameres.rs?ref=1cf92c3e286232be7e0d1370b88547ca0cb6f636", "patch": "@@ -3,7 +3,7 @@ use rustc_hash::FxHashMap;\n \n use ra_syntax::{\n     SmolStr, SyntaxKind,\n-    ast::{self, NameOwner}\n+    ast::{self, NameOwner, AstNode}\n };\n \n use crate::{\n@@ -28,7 +28,7 @@ struct InputModuleItems {\n #[derive(Debug, Clone)]\n struct Path {\n     kind: PathKind,\n-    segments: Vec<SmolStr>,\n+    segments: Vec<(LocalSyntaxPtr, SmolStr)>,\n }\n \n #[derive(Debug, Clone, Copy)]\n@@ -150,7 +150,8 @@ fn convert_path(prefix: Option<Path>, path: ast::Path) -> Option<Path> {\n                 kind: PathKind::Abs,\n                 segments: Vec::with_capacity(1),\n             });\n-            res.segments.push(name.text());\n+            let ptr = LocalSyntaxPtr::new(name.syntax());\n+            res.segments.push((ptr, name.text()));\n             res\n         }\n         ast::PathSegmentKind::CrateKw => {"}]}