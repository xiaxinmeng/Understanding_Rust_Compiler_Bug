{"sha": "8bc187d1047b3680efe2cda53dcc83f45012578b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhiYzE4N2QxMDQ3YjM2ODBlZmUyY2RhNTNkY2M4M2Y0NTAxMjU3OGI=", "commit": {"author": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2019-07-03T20:25:46Z"}, "committer": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2019-07-10T21:12:08Z"}, "message": "resolve: Include stdlib prelude into name lookup in macro namespace\n\nThis is going to be used when built-in macros are defined through libcore and made available to other crates through standard library prelude", "tree": {"sha": "ef88eb8c2435d3033fc8c6cb999e7984235677d4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ef88eb8c2435d3033fc8c6cb999e7984235677d4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8bc187d1047b3680efe2cda53dcc83f45012578b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8bc187d1047b3680efe2cda53dcc83f45012578b", "html_url": "https://github.com/rust-lang/rust/commit/8bc187d1047b3680efe2cda53dcc83f45012578b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8bc187d1047b3680efe2cda53dcc83f45012578b/comments", "author": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "committer": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3041ec61185d6f9795ff16cc345e8f11b06edbbf", "url": "https://api.github.com/repos/rust-lang/rust/commits/3041ec61185d6f9795ff16cc345e8f11b06edbbf", "html_url": "https://github.com/rust-lang/rust/commit/3041ec61185d6f9795ff16cc345e8f11b06edbbf"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "7cb33ca3ed4c0fc252a2ae00b2191627495b1060", "filename": "src/librustc_resolve/macros.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/8bc187d1047b3680efe2cda53dcc83f45012578b/src%2Flibrustc_resolve%2Fmacros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8bc187d1047b3680efe2cda53dcc83f45012578b/src%2Flibrustc_resolve%2Fmacros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Fmacros.rs?ref=8bc187d1047b3680efe2cda53dcc83f45012578b", "patch": "@@ -867,7 +867,7 @@ impl<'a> Resolver<'a> {\n                         }\n                     }\n                 }\n-                WhereToResolve::MacroUsePrelude => WhereToResolve::BuiltinMacros,\n+                WhereToResolve::MacroUsePrelude => WhereToResolve::StdLibPrelude,\n                 WhereToResolve::BuiltinMacros => WhereToResolve::BuiltinAttrs,\n                 WhereToResolve::BuiltinAttrs => WhereToResolve::LegacyPluginHelpers,\n                 WhereToResolve::LegacyPluginHelpers => break, // nowhere else to search\n@@ -877,7 +877,7 @@ impl<'a> Resolver<'a> {\n                 WhereToResolve::StdLibPrelude => match ns {\n                     TypeNS => WhereToResolve::BuiltinTypes,\n                     ValueNS => break, // nowhere else to search\n-                    MacroNS => unreachable!(),\n+                    MacroNS => WhereToResolve::BuiltinMacros,\n                 }\n                 WhereToResolve::BuiltinTypes => break, // nowhere else to search\n             };"}]}