{"sha": "6a55aa1246114dcfffc022fd5218336c25dab1a4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZhNTVhYTEyNDYxMTRkY2ZmZmMwMjJmZDUyMTgzMzZjMjVkYWIxYTQ=", "commit": {"author": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2021-03-08T19:09:02Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-03-08T19:09:02Z"}, "message": "Rollup merge of #82854 - estebank:issue-82827, r=oli-obk\n\nAccount for `if (let pat = expr) {}`\n\nFix #82827.", "tree": {"sha": "bb60b6711147a099360429c005cdff3e40184ee9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bb60b6711147a099360429c005cdff3e40184ee9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6a55aa1246114dcfffc022fd5218336c25dab1a4", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgRnZOCRBK7hj4Ov3rIwAAdHIIAGkZJWsUzqGWsgNRbUPj9+4D\n7Y8Gc9ZNW7ANqKw/qz0XNzi72Ji3Z5bQJhBEi3mY5AGH+bxcd72cdSAbbODAkDxu\nqw+wWfwFWFyrO3IgBbyp/6ssBeKLLPT0Uir2qHW3ja5C2IzV7dU9O42GgwIdwNc6\nsIXLuU82AmhJbQDj/KOhvPgN6bCc4siTda3Hzhtssry89+CVeXAn1Rb/8PEWe7dx\ny8cOzMhRpkhqPMQjXIhTfLsbKBBdgJqSh+cbhPyN/QSm0mCS2ARnzMQbs/De34nA\nFHAdtY/4rJ/YLOAq1x7IBgjWlEPkNyOafzbdw/AlLK0NG+M4HlUFVaJSj5F6k0s=\n=0MxB\n-----END PGP SIGNATURE-----\n", "payload": "tree bb60b6711147a099360429c005cdff3e40184ee9\nparent 0ee2f4c3e050234ac977fdc8e44a43eb8e3c95a2\nparent aa7ac6e957747c0fc2edae126162bdfd8faff69c\nauthor Mara Bos <m-ou.se@m-ou.se> 1615230542 +0100\ncommitter GitHub <noreply@github.com> 1615230542 +0100\n\nRollup merge of #82854 - estebank:issue-82827, r=oli-obk\n\nAccount for `if (let pat = expr) {}`\n\nFix #82827.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6a55aa1246114dcfffc022fd5218336c25dab1a4", "html_url": "https://github.com/rust-lang/rust/commit/6a55aa1246114dcfffc022fd5218336c25dab1a4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6a55aa1246114dcfffc022fd5218336c25dab1a4/comments", "author": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0ee2f4c3e050234ac977fdc8e44a43eb8e3c95a2", "url": "https://api.github.com/repos/rust-lang/rust/commits/0ee2f4c3e050234ac977fdc8e44a43eb8e3c95a2", "html_url": "https://github.com/rust-lang/rust/commit/0ee2f4c3e050234ac977fdc8e44a43eb8e3c95a2"}, {"sha": "aa7ac6e957747c0fc2edae126162bdfd8faff69c", "url": "https://api.github.com/repos/rust-lang/rust/commits/aa7ac6e957747c0fc2edae126162bdfd8faff69c", "html_url": "https://github.com/rust-lang/rust/commit/aa7ac6e957747c0fc2edae126162bdfd8faff69c"}], "stats": {"total": 491, "additions": 262, "deletions": 229}, "files": [{"sha": "77a98f4c45c5399a567ff37ad7d4d16bf524ac75", "filename": "compiler/rustc_ast/src/ast.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/6a55aa1246114dcfffc022fd5218336c25dab1a4/compiler%2Frustc_ast%2Fsrc%2Fast.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6a55aa1246114dcfffc022fd5218336c25dab1a4/compiler%2Frustc_ast%2Fsrc%2Fast.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast%2Fsrc%2Fast.rs?ref=6a55aa1246114dcfffc022fd5218336c25dab1a4", "patch": "@@ -1129,6 +1129,14 @@ impl Expr {\n         }\n     }\n \n+    pub fn peel_parens(&self) -> &Expr {\n+        let mut expr = self;\n+        while let ExprKind::Paren(inner) = &expr.kind {\n+            expr = &inner;\n+        }\n+        expr\n+    }\n+\n     /// Attempts to reparse as `Ty` (for diagnostic purposes).\n     pub fn to_ty(&self) -> Option<P<Ty>> {\n         let kind = match &self.kind {"}, {"sha": "c9a5541585fc73050d55d5f2d19b78dfd3fc1b47", "filename": "compiler/rustc_ast_lowering/src/expr.rs", "status": "modified", "additions": 40, "deletions": 2, "changes": 42, "blob_url": "https://github.com/rust-lang/rust/blob/6a55aa1246114dcfffc022fd5218336c25dab1a4/compiler%2Frustc_ast_lowering%2Fsrc%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6a55aa1246114dcfffc022fd5218336c25dab1a4/compiler%2Frustc_ast_lowering%2Fsrc%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast_lowering%2Fsrc%2Fexpr.rs?ref=6a55aa1246114dcfffc022fd5218336c25dab1a4", "patch": "@@ -97,6 +97,23 @@ impl<'hir> LoweringContext<'_, 'hir> {\n                     ExprKind::Let(ref pat, ref scrutinee) => {\n                         self.lower_expr_if_let(e.span, pat, scrutinee, then, else_opt.as_deref())\n                     }\n+                    ExprKind::Paren(ref paren) => match paren.peel_parens().kind {\n+                        ExprKind::Let(ref pat, ref scrutinee) => {\n+                            // A user has written `if (let Some(x) = foo) {`, we want to avoid\n+                            // confusing them with mentions of nightly features.\n+                            // If this logic is changed, you will also likely need to touch\n+                            // `unused::UnusedParens::check_expr`.\n+                            self.if_let_expr_with_parens(cond, &paren.peel_parens());\n+                            self.lower_expr_if_let(\n+                                e.span,\n+                                pat,\n+                                scrutinee,\n+                                then,\n+                                else_opt.as_deref(),\n+                            )\n+                        }\n+                        _ => self.lower_expr_if(cond, then, else_opt.as_deref()),\n+                    },\n                     _ => self.lower_expr_if(cond, then, else_opt.as_deref()),\n                 },\n                 ExprKind::While(ref cond, ref body, opt_label) => self\n@@ -346,6 +363,25 @@ impl<'hir> LoweringContext<'_, 'hir> {\n         hir::ExprKind::Call(f, self.lower_exprs(&real_args))\n     }\n \n+    fn if_let_expr_with_parens(&mut self, cond: &Expr, paren: &Expr) {\n+        let start = cond.span.until(paren.span);\n+        let end = paren.span.shrink_to_hi().until(cond.span.shrink_to_hi());\n+        self.sess\n+            .struct_span_err(\n+                vec![start, end],\n+                \"invalid parentheses around `let` expression in `if let`\",\n+            )\n+            .multipart_suggestion(\n+                \"`if let` needs to be written without parentheses\",\n+                vec![(start, String::new()), (end, String::new())],\n+                rustc_errors::Applicability::MachineApplicable,\n+            )\n+            .emit();\n+        // Ideally, we'd remove the feature gating of a `let` expression since we are already\n+        // complaining about it here, but `feature_gate::check_crate` has already run by now:\n+        // self.sess.parse_sess.gated_spans.ungate_last(sym::let_chains, paren.span);\n+    }\n+\n     /// Emit an error and lower `ast::ExprKind::Let(pat, scrutinee)` into:\n     /// ```rust\n     /// match scrutinee { pats => true, _ => false }\n@@ -356,8 +392,10 @@ impl<'hir> LoweringContext<'_, 'hir> {\n         if self.sess.opts.unstable_features.is_nightly_build() {\n             self.sess\n                 .struct_span_err(span, \"`let` expressions are not supported here\")\n-                .note(\"only supported directly in conditions of `if`- and `while`-expressions\")\n-                .note(\"as well as when nested within `&&` and parenthesis in those conditions\")\n+                .note(\n+                    \"only supported directly without parentheses in conditions of `if`- and \\\n+                     `while`-expressions, as well as in `let` chains within parentheses\",\n+                )\n                 .emit();\n         } else {\n             self.sess"}, {"sha": "053fa5b7897dcbc081c64269f15a7ad61cf59ae2", "filename": "compiler/rustc_ast_passes/src/feature_gate.rs", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/6a55aa1246114dcfffc022fd5218336c25dab1a4/compiler%2Frustc_ast_passes%2Fsrc%2Ffeature_gate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6a55aa1246114dcfffc022fd5218336c25dab1a4/compiler%2Frustc_ast_passes%2Fsrc%2Ffeature_gate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast_passes%2Fsrc%2Ffeature_gate.rs?ref=6a55aa1246114dcfffc022fd5218336c25dab1a4", "patch": "@@ -638,8 +638,16 @@ pub fn check_crate(krate: &ast::Crate, sess: &Session) {\n             }\n         };\n     }\n-    gate_all!(if_let_guard, \"`if let` guards are experimental\");\n-    gate_all!(let_chains, \"`let` expressions in this position are experimental\");\n+    gate_all!(\n+        if_let_guard,\n+        \"`if let` guards are experimental\",\n+        \"you can write `if matches!(<expr>, <pattern>)` instead of `if let <pattern> = <expr>`\"\n+    );\n+    gate_all!(\n+        let_chains,\n+        \"`let` expressions in this position are experimental\",\n+        \"you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\"\n+    );\n     gate_all!(\n         async_closure,\n         \"async closures are unstable\","}, {"sha": "e222f82f20a9196dc2f1a0273227e40fca2ede44", "filename": "compiler/rustc_lint/src/unused.rs", "status": "modified", "additions": 28, "deletions": 3, "changes": 31, "blob_url": "https://github.com/rust-lang/rust/blob/6a55aa1246114dcfffc022fd5218336c25dab1a4/compiler%2Frustc_lint%2Fsrc%2Funused.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6a55aa1246114dcfffc022fd5218336c25dab1a4/compiler%2Frustc_lint%2Fsrc%2Funused.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_lint%2Fsrc%2Funused.rs?ref=6a55aa1246114dcfffc022fd5218336c25dab1a4", "patch": "@@ -602,7 +602,7 @@ trait UnusedDelimLint {\n         use rustc_ast::ExprKind::*;\n         let (value, ctx, followed_by_block, left_pos, right_pos) = match e.kind {\n             // Do not lint `unused_braces` in `if let` expressions.\n-            If(ref cond, ref block, ..)\n+            If(ref cond, ref block, _)\n                 if !matches!(cond.kind, Let(_, _)) || Self::LINT_EXPR_IN_PATTERN_MATCHING_CTX =>\n             {\n                 let left = e.span.lo() + rustc_span::BytePos(2);\n@@ -816,8 +816,33 @@ impl UnusedParens {\n \n impl EarlyLintPass for UnusedParens {\n     fn check_expr(&mut self, cx: &EarlyContext<'_>, e: &ast::Expr) {\n-        if let ExprKind::Let(ref pat, ..) | ExprKind::ForLoop(ref pat, ..) = e.kind {\n-            self.check_unused_parens_pat(cx, pat, false, false);\n+        match e.kind {\n+            ExprKind::Let(ref pat, _) | ExprKind::ForLoop(ref pat, ..) => {\n+                self.check_unused_parens_pat(cx, pat, false, false);\n+            }\n+            // We ignore parens in cases like `if (((let Some(0) = Some(1))))` because we already\n+            // handle a hard error for them during AST lowering in `lower_expr_mut`, but we still\n+            // want to complain about things like `if let 42 = (42)`.\n+            ExprKind::If(ref cond, ref block, ref else_)\n+                if matches!(cond.peel_parens().kind, ExprKind::Let(..)) =>\n+            {\n+                self.check_unused_delims_expr(\n+                    cx,\n+                    cond.peel_parens(),\n+                    UnusedDelimsCtx::LetScrutineeExpr,\n+                    true,\n+                    None,\n+                    None,\n+                );\n+                for stmt in &block.stmts {\n+                    <Self as UnusedDelimLint>::check_stmt(self, cx, stmt);\n+                }\n+                if let Some(e) = else_ {\n+                    <Self as UnusedDelimLint>::check_expr(self, cx, e);\n+                }\n+                return;\n+            }\n+            _ => {}\n         }\n \n         <Self as UnusedDelimLint>::check_expr(self, cx, e)"}, {"sha": "666b1e785bf6b62103720e220519c99e7845d961", "filename": "src/test/ui/pattern/issue-82290.stderr", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/6a55aa1246114dcfffc022fd5218336c25dab1a4/src%2Ftest%2Fui%2Fpattern%2Fissue-82290.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6a55aa1246114dcfffc022fd5218336c25dab1a4/src%2Ftest%2Fui%2Fpattern%2Fissue-82290.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpattern%2Fissue-82290.stderr?ref=6a55aa1246114dcfffc022fd5218336c25dab1a4", "patch": "@@ -4,8 +4,7 @@ error: `let` expressions are not supported here\n LL |     if true && let x = 1 {\n    |                ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n warning: the feature `let_chains` is incomplete and may not be safe to use and/or cause compiler crashes\n   --> $DIR/issue-82290.rs:1:12"}, {"sha": "00811fe3044df31e08cf255ec7b70d5555aa2ffe", "filename": "src/test/ui/rfc-2294-if-let-guard/feature-gate.stderr", "status": "modified", "additions": 34, "deletions": 32, "changes": 66, "blob_url": "https://github.com/rust-lang/rust/blob/6a55aa1246114dcfffc022fd5218336c25dab1a4/src%2Ftest%2Fui%2Frfc-2294-if-let-guard%2Ffeature-gate.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6a55aa1246114dcfffc022fd5218336c25dab1a4/src%2Ftest%2Fui%2Frfc-2294-if-let-guard%2Ffeature-gate.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2294-if-let-guard%2Ffeature-gate.stderr?ref=6a55aa1246114dcfffc022fd5218336c25dab1a4", "patch": "@@ -15,6 +15,7 @@ LL |         () if let 0 = 1 => {}\n    |\n    = note: see issue #51114 <https://github.com/rust-lang/rust/issues/51114> for more information\n    = help: add `#![feature(if_let_guard)]` to the crate attributes to enable\n+   = help: you can write `if matches!(<expr>, <pattern>)` instead of `if let <pattern> = <expr>`\n \n error[E0658]: `if let` guards are experimental\n   --> $DIR/feature-gate.rs:76:12\n@@ -24,6 +25,7 @@ LL |         () if let 0 = 1 => {}\n    |\n    = note: see issue #51114 <https://github.com/rust-lang/rust/issues/51114> for more information\n    = help: add `#![feature(if_let_guard)]` to the crate attributes to enable\n+   = help: you can write `if matches!(<expr>, <pattern>)` instead of `if let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:10:16\n@@ -33,6 +35,7 @@ LL |         () if (let 0 = 1) => {}\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:14:18\n@@ -42,6 +45,7 @@ LL |         () if (((let 0 = 1))) => {}\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:18:23\n@@ -51,6 +55,7 @@ LL |         () if true && let 0 = 1 => {}\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:22:15\n@@ -60,6 +65,7 @@ LL |         () if let 0 = 1 && true => {}\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:26:16\n@@ -69,6 +75,7 @@ LL |         () if (let 0 = 1) && true => {}\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:30:24\n@@ -78,6 +85,7 @@ LL |         () if true && (let 0 = 1) => {}\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:34:16\n@@ -87,6 +95,7 @@ LL |         () if (let 0 = 1) && (let 0 = 1) => {}\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:34:31\n@@ -96,6 +105,7 @@ LL |         () if (let 0 = 1) && (let 0 = 1) => {}\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:40:15\n@@ -105,6 +115,7 @@ LL |         () if let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 =\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:40:28\n@@ -114,6 +125,7 @@ LL |         () if let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 =\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:40:42\n@@ -123,6 +135,7 @@ LL |         () if let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 =\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:40:55\n@@ -132,6 +145,7 @@ LL |         () if let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 =\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:40:68\n@@ -141,6 +155,7 @@ LL |         () if let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 =\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:52:15\n@@ -150,6 +165,7 @@ LL |         () if let Range { start: _, end: _ } = (true..true) && false => {}\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:68:16\n@@ -159,6 +175,7 @@ LL |     use_expr!((let 0 = 1 && 0 == 0));\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:71:16\n@@ -168,150 +185,135 @@ LL |     use_expr!((let 0 = 1));\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:10:16\n    |\n LL |         () if (let 0 = 1) => {}\n    |                ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:14:18\n    |\n LL |         () if (((let 0 = 1))) => {}\n    |                  ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:18:23\n    |\n LL |         () if true && let 0 = 1 => {}\n    |                       ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:22:15\n    |\n LL |         () if let 0 = 1 && true => {}\n    |               ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:26:16\n    |\n LL |         () if (let 0 = 1) && true => {}\n    |                ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:30:24\n    |\n LL |         () if true && (let 0 = 1) => {}\n    |                        ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:34:16\n    |\n LL |         () if (let 0 = 1) && (let 0 = 1) => {}\n    |                ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:34:31\n    |\n LL |         () if (let 0 = 1) && (let 0 = 1) => {}\n    |                               ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:40:15\n    |\n LL |         () if let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) => {}\n    |               ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:40:28\n    |\n LL |         () if let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) => {}\n    |                            ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:40:42\n    |\n LL |         () if let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) => {}\n    |                                          ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:40:55\n    |\n LL |         () if let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) => {}\n    |                                                       ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:40:68\n    |\n LL |         () if let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) => {}\n    |                                                                    ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:52:15\n    |\n LL |         () if let Range { start: _, end: _ } = (true..true) && false => {}\n    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:68:16\n    |\n LL |     use_expr!((let 0 = 1 && 0 == 0));\n    |                ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:71:16\n    |\n LL |     use_expr!((let 0 = 1));\n    |                ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: aborting due to 35 previous errors\n "}, {"sha": "1adce5e01506d315779168c5d9819cd6801bcfba", "filename": "src/test/ui/rfc-2497-if-let-chains/disallowed-positions.stderr", "status": "modified", "additions": 56, "deletions": 112, "changes": 168, "blob_url": "https://github.com/rust-lang/rust/blob/6a55aa1246114dcfffc022fd5218336c25dab1a4/src%2Ftest%2Fui%2Frfc-2497-if-let-chains%2Fdisallowed-positions.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6a55aa1246114dcfffc022fd5218336c25dab1a4/src%2Ftest%2Fui%2Frfc-2497-if-let-chains%2Fdisallowed-positions.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2497-if-let-chains%2Fdisallowed-positions.stderr?ref=6a55aa1246114dcfffc022fd5218336c25dab1a4", "patch": "@@ -15,503 +15,447 @@ error: `let` expressions are not supported here\n LL |     if &let 0 = 0 {}\n    |         ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:35:9\n    |\n LL |     if !let 0 = 0 {}\n    |         ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:36:9\n    |\n LL |     if *let 0 = 0 {}\n    |         ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:38:9\n    |\n LL |     if -let 0 = 0 {}\n    |         ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:46:9\n    |\n LL |     if (let 0 = 0)? {}\n    |         ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:50:16\n    |\n LL |     if true || let 0 = 0 {}\n    |                ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:51:17\n    |\n LL |     if (true || let 0 = 0) {}\n    |                 ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:52:25\n    |\n LL |     if true && (true || let 0 = 0) {}\n    |                         ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:53:25\n    |\n LL |     if true || (true && let 0 = 0) {}\n    |                         ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:56:12\n    |\n LL |     if x = let 0 = 0 {}\n    |            ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:59:15\n    |\n LL |     if true..(let 0 = 0) {}\n    |               ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:61:11\n    |\n LL |     if ..(let 0 = 0) {}\n    |           ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:63:9\n    |\n LL |     if (let 0 = 0).. {}\n    |         ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:67:8\n    |\n LL |     if let Range { start: _, end: _ } = true..true && false {}\n    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:71:8\n    |\n LL |     if let Range { start: _, end: _ } = true..true || false {}\n    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:78:8\n    |\n LL |     if let Range { start: F, end } = F..|| true {}\n    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:86:8\n    |\n LL |     if let Range { start: true, end } = t..&&false {}\n    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:92:19\n    |\n LL |     if let true = let true = true {}\n    |                   ^^^^^^^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:96:12\n    |\n LL |     while &let 0 = 0 {}\n    |            ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:99:12\n    |\n LL |     while !let 0 = 0 {}\n    |            ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:100:12\n    |\n LL |     while *let 0 = 0 {}\n    |            ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:102:12\n    |\n LL |     while -let 0 = 0 {}\n    |            ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:110:12\n    |\n LL |     while (let 0 = 0)? {}\n    |            ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:114:19\n    |\n LL |     while true || let 0 = 0 {}\n    |                   ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:115:20\n    |\n LL |     while (true || let 0 = 0) {}\n    |                    ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:116:28\n    |\n LL |     while true && (true || let 0 = 0) {}\n    |                            ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:117:28\n    |\n LL |     while true || (true && let 0 = 0) {}\n    |                            ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:120:15\n    |\n LL |     while x = let 0 = 0 {}\n    |               ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:123:18\n    |\n LL |     while true..(let 0 = 0) {}\n    |                  ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:125:14\n    |\n LL |     while ..(let 0 = 0) {}\n    |              ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:127:12\n    |\n LL |     while (let 0 = 0).. {}\n    |            ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:131:11\n    |\n LL |     while let Range { start: _, end: _ } = true..true && false {}\n    |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:135:11\n    |\n LL |     while let Range { start: _, end: _ } = true..true || false {}\n    |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:142:11\n    |\n LL |     while let Range { start: F, end } = F..|| true {}\n    |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:150:11\n    |\n LL |     while let Range { start: true, end } = t..&&false {}\n    |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:156:22\n    |\n LL |     while let true = let true = true {}\n    |                      ^^^^^^^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:170:6\n    |\n LL |     &let 0 = 0;\n    |      ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:172:6\n    |\n LL |     !let 0 = 0;\n    |      ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:173:6\n    |\n LL |     *let 0 = 0;\n    |      ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:175:6\n    |\n LL |     -let 0 = 0;\n    |      ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:183:6\n    |\n LL |     (let 0 = 0)?;\n    |      ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:187:13\n    |\n LL |     true || let 0 = 0;\n    |             ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:188:14\n    |\n LL |     (true || let 0 = 0);\n    |              ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:189:22\n    |\n LL |     true && (true || let 0 = 0);\n    |                      ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:192:9\n    |\n LL |     x = let 0 = 0;\n    |         ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:194:12\n    |\n LL |     true..(let 0 = 0);\n    |            ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:195:8\n    |\n LL |     ..(let 0 = 0);\n    |        ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:196:6\n    |\n LL |     (let 0 = 0)..;\n    |      ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:198:6\n    |\n LL |     (let Range { start: _, end: _ } = true..true || false);\n    |      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:202:6\n    |\n LL |     (let true = let true = true);\n    |      ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:202:17\n    |\n LL |     (let true = let true = true);\n    |                 ^^^^^^^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:207:6\n    |\n LL |     &let 0 = 0\n    |      ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:218:17\n    |\n LL |         true && let 1 = 1\n    |                 ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:222:17\n    |\n LL |         true && let 1 = 1\n    |                 ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:226:17\n    |\n LL |         true && let 1 = 1\n    |                 ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/disallowed-positions.rs:236:17\n    |\n LL |         true && let 1 = 1\n    |                 ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n warning: the feature `const_generics` is incomplete and may not be safe to use and/or cause compiler crashes\n   --> $DIR/disallowed-positions.rs:20:12"}, {"sha": "0b38b5f47efef8f519d91c8ffbee8c7134387266", "filename": "src/test/ui/rfc-2497-if-let-chains/feature-gate.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/6a55aa1246114dcfffc022fd5218336c25dab1a4/src%2Ftest%2Fui%2Frfc-2497-if-let-chains%2Ffeature-gate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6a55aa1246114dcfffc022fd5218336c25dab1a4/src%2Ftest%2Fui%2Frfc-2497-if-let-chains%2Ffeature-gate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2497-if-let-chains%2Ffeature-gate.rs?ref=6a55aa1246114dcfffc022fd5218336c25dab1a4", "patch": "@@ -13,11 +13,11 @@ fn _if() {\n \n     if (let 0 = 1) {}\n     //~^ ERROR `let` expressions in this position are experimental [E0658]\n-    //~| ERROR `let` expressions are not supported here\n+    //~| ERROR invalid parentheses around `let` expression in `if let`\n \n     if (((let 0 = 1))) {}\n     //~^ ERROR `let` expressions in this position are experimental [E0658]\n-    //~| ERROR `let` expressions are not supported here\n+    //~| ERROR invalid parentheses around `let` expression in `if let`\n \n     if true && let 0 = 1 {}\n     //~^ ERROR `let` expressions in this position are experimental [E0658]\n@@ -126,7 +126,7 @@ fn _macros() {\n     //~| ERROR `let` expressions are not supported here\n     use_expr!((let 0 = 1));\n     //~^ ERROR `let` expressions in this position are experimental [E0658]\n-    //~| ERROR `let` expressions are not supported here\n+    //~| ERROR invalid parentheses around `let` expression in `if let`\n     //~| ERROR `let` expressions are not supported here\n     #[cfg(FALSE)] (let 0 = 1);\n     //~^ ERROR `let` expressions in this position are experimental [E0658]"}, {"sha": "7364f62c922298b9dcb1863c827e88ba334bb97c", "filename": "src/test/ui/rfc-2497-if-let-chains/feature-gate.stderr", "status": "modified", "additions": 82, "deletions": 73, "changes": 155, "blob_url": "https://github.com/rust-lang/rust/blob/6a55aa1246114dcfffc022fd5218336c25dab1a4/src%2Ftest%2Fui%2Frfc-2497-if-let-chains%2Ffeature-gate.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6a55aa1246114dcfffc022fd5218336c25dab1a4/src%2Ftest%2Fui%2Frfc-2497-if-let-chains%2Ffeature-gate.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2497-if-let-chains%2Ffeature-gate.stderr?ref=6a55aa1246114dcfffc022fd5218336c25dab1a4", "patch": "@@ -15,6 +15,7 @@ LL |     if (let 0 = 1) {}\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:18:11\n@@ -24,6 +25,7 @@ LL |     if (((let 0 = 1))) {}\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:22:16\n@@ -33,6 +35,7 @@ LL |     if true && let 0 = 1 {}\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:26:8\n@@ -42,6 +45,7 @@ LL |     if let 0 = 1 && true {}\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:30:9\n@@ -51,6 +55,7 @@ LL |     if (let 0 = 1) && true {}\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:34:17\n@@ -60,6 +65,7 @@ LL |     if true && (let 0 = 1) {}\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:38:9\n@@ -69,6 +75,7 @@ LL |     if (let 0 = 1) && (let 0 = 1) {}\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:38:24\n@@ -78,6 +85,7 @@ LL |     if (let 0 = 1) && (let 0 = 1) {}\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:44:8\n@@ -87,6 +95,7 @@ LL |     if let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) {}\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:44:21\n@@ -96,6 +105,7 @@ LL |     if let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) {}\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:44:35\n@@ -105,6 +115,7 @@ LL |     if let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) {}\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:44:48\n@@ -114,6 +125,7 @@ LL |     if let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) {}\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:44:61\n@@ -123,6 +135,7 @@ LL |     if let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) {}\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:56:8\n@@ -132,6 +145,7 @@ LL |     if let Range { start: _, end: _ } = (true..true) && false {}\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:64:12\n@@ -141,6 +155,7 @@ LL |     while (let 0 = 1) {}\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:68:14\n@@ -150,6 +165,7 @@ LL |     while (((let 0 = 1))) {}\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:72:19\n@@ -159,6 +175,7 @@ LL |     while true && let 0 = 1 {}\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:76:11\n@@ -168,6 +185,7 @@ LL |     while let 0 = 1 && true {}\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:80:12\n@@ -177,6 +195,7 @@ LL |     while (let 0 = 1) && true {}\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:84:20\n@@ -186,6 +205,7 @@ LL |     while true && (let 0 = 1) {}\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:88:12\n@@ -195,6 +215,7 @@ LL |     while (let 0 = 1) && (let 0 = 1) {}\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:88:27\n@@ -204,6 +225,7 @@ LL |     while (let 0 = 1) && (let 0 = 1) {}\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:94:11\n@@ -213,6 +235,7 @@ LL |     while let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) {\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:94:24\n@@ -222,6 +245,7 @@ LL |     while let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) {\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:94:38\n@@ -231,6 +255,7 @@ LL |     while let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) {\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:94:51\n@@ -240,6 +265,7 @@ LL |     while let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) {\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:94:64\n@@ -249,6 +275,7 @@ LL |     while let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) {\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:106:11\n@@ -258,6 +285,7 @@ LL |     while let Range { start: _, end: _ } = (true..true) && false {}\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:131:20\n@@ -267,6 +295,7 @@ LL |     #[cfg(FALSE)] (let 0 = 1);\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:114:17\n@@ -276,6 +305,7 @@ LL |     noop_expr!((let 0 = 1));\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:123:16\n@@ -285,6 +315,7 @@ LL |     use_expr!((let 0 = 1 && 0 == 0));\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n error[E0658]: `let` expressions in this position are experimental\n   --> $DIR/feature-gate.rs:127:16\n@@ -294,294 +325,272 @@ LL |     use_expr!((let 0 = 1));\n    |\n    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n    = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+   = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`\n \n-error: `let` expressions are not supported here\n-  --> $DIR/feature-gate.rs:14:9\n+error: invalid parentheses around `let` expression in `if let`\n+  --> $DIR/feature-gate.rs:14:8\n    |\n LL |     if (let 0 = 1) {}\n-   |         ^^^^^^^^^\n+   |        ^         ^\n+   |\n+help: `if let` needs to be written without parentheses\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+LL |     if let 0 = 1 {}\n+   |       --       --\n \n-error: `let` expressions are not supported here\n-  --> $DIR/feature-gate.rs:18:11\n+error: invalid parentheses around `let` expression in `if let`\n+  --> $DIR/feature-gate.rs:18:8\n    |\n LL |     if (((let 0 = 1))) {}\n-   |           ^^^^^^^^^\n+   |        ^^^         ^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+help: `if let` needs to be written without parentheses\n+   |\n+LL |     if let 0 = 1 {}\n+   |       --       --\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:22:16\n    |\n LL |     if true && let 0 = 1 {}\n    |                ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:26:8\n    |\n LL |     if let 0 = 1 && true {}\n    |        ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:30:9\n    |\n LL |     if (let 0 = 1) && true {}\n    |         ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:34:17\n    |\n LL |     if true && (let 0 = 1) {}\n    |                 ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:38:9\n    |\n LL |     if (let 0 = 1) && (let 0 = 1) {}\n    |         ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:38:24\n    |\n LL |     if (let 0 = 1) && (let 0 = 1) {}\n    |                        ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:44:8\n    |\n LL |     if let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) {}\n    |        ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:44:21\n    |\n LL |     if let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) {}\n    |                     ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:44:35\n    |\n LL |     if let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) {}\n    |                                   ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:44:48\n    |\n LL |     if let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) {}\n    |                                                ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:44:61\n    |\n LL |     if let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) {}\n    |                                                             ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:56:8\n    |\n LL |     if let Range { start: _, end: _ } = (true..true) && false {}\n    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:64:12\n    |\n LL |     while (let 0 = 1) {}\n    |            ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:68:14\n    |\n LL |     while (((let 0 = 1))) {}\n    |              ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:72:19\n    |\n LL |     while true && let 0 = 1 {}\n    |                   ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:76:11\n    |\n LL |     while let 0 = 1 && true {}\n    |           ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:80:12\n    |\n LL |     while (let 0 = 1) && true {}\n    |            ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:84:20\n    |\n LL |     while true && (let 0 = 1) {}\n    |                    ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:88:12\n    |\n LL |     while (let 0 = 1) && (let 0 = 1) {}\n    |            ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:88:27\n    |\n LL |     while (let 0 = 1) && (let 0 = 1) {}\n    |                           ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:94:11\n    |\n LL |     while let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) {}\n    |           ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:94:24\n    |\n LL |     while let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) {}\n    |                        ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:94:38\n    |\n LL |     while let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) {}\n    |                                      ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:94:51\n    |\n LL |     while let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) {}\n    |                                                   ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:94:64\n    |\n LL |     while let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) {}\n    |                                                                ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:106:11\n    |\n LL |     while let Range { start: _, end: _ } = (true..true) && false {}\n    |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:123:16\n    |\n LL |     use_expr!((let 0 = 1 && 0 == 0));\n    |                ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:123:16\n    |\n LL |     use_expr!((let 0 = 1 && 0 == 0));\n    |                ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n-error: `let` expressions are not supported here\n-  --> $DIR/feature-gate.rs:127:16\n+error: invalid parentheses around `let` expression in `if let`\n+  --> $DIR/feature-gate.rs:127:15\n    |\n LL |     use_expr!((let 0 = 1));\n-   |                ^^^^^^^^^\n+   |               ^         ^\n+   |\n+help: `if let` needs to be written without parentheses\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+LL |     use_expr!(let 0 = 1);\n+   |              --       --\n \n error: `let` expressions are not supported here\n   --> $DIR/feature-gate.rs:127:16\n    |\n LL |     use_expr!((let 0 = 1));\n    |                ^^^^^^^^^\n    |\n-   = note: only supported directly in conditions of `if`- and `while`-expressions\n-   = note: as well as when nested within `&&` and parenthesis in those conditions\n+   = note: only supported directly without parentheses in conditions of `if`- and `while`-expressions, as well as in `let` chains within parentheses\n \n error: aborting due to 65 previous errors\n "}]}