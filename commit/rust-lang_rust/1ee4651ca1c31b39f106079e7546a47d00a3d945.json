{"sha": "1ee4651ca1c31b39f106079e7546a47d00a3d945", "node_id": "C_kwDOAAsO6NoAKDFlZTQ2NTFjYTFjMzFiMzlmMTA2MDc5ZTc1NDZhNDdkMDBhM2Q5NDU", "commit": {"author": {"name": "Michael Krasnitski", "email": "michael.krasnitski@gmail.com", "date": "2023-02-12T19:45:44Z"}, "committer": {"name": "Michael Krasnitski", "email": "michael.krasnitski@gmail.com", "date": "2023-02-15T15:01:33Z"}, "message": "Ignore synthetic type parameters for `extra_unused_type_parameters`", "tree": {"sha": "0583893b1a43381f82acfb6da442267075ff0e22", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0583893b1a43381f82acfb6da442267075ff0e22"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1ee4651ca1c31b39f106079e7546a47d00a3d945", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1ee4651ca1c31b39f106079e7546a47d00a3d945", "html_url": "https://github.com/rust-lang/rust/commit/1ee4651ca1c31b39f106079e7546a47d00a3d945", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1ee4651ca1c31b39f106079e7546a47d00a3d945/comments", "author": {"login": "mkrasnitski", "id": 42564254, "node_id": "MDQ6VXNlcjQyNTY0MjU0", "avatar_url": "https://avatars.githubusercontent.com/u/42564254?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mkrasnitski", "html_url": "https://github.com/mkrasnitski", "followers_url": "https://api.github.com/users/mkrasnitski/followers", "following_url": "https://api.github.com/users/mkrasnitski/following{/other_user}", "gists_url": "https://api.github.com/users/mkrasnitski/gists{/gist_id}", "starred_url": "https://api.github.com/users/mkrasnitski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mkrasnitski/subscriptions", "organizations_url": "https://api.github.com/users/mkrasnitski/orgs", "repos_url": "https://api.github.com/users/mkrasnitski/repos", "events_url": "https://api.github.com/users/mkrasnitski/events{/privacy}", "received_events_url": "https://api.github.com/users/mkrasnitski/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mkrasnitski", "id": 42564254, "node_id": "MDQ6VXNlcjQyNTY0MjU0", "avatar_url": "https://avatars.githubusercontent.com/u/42564254?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mkrasnitski", "html_url": "https://github.com/mkrasnitski", "followers_url": "https://api.github.com/users/mkrasnitski/followers", "following_url": "https://api.github.com/users/mkrasnitski/following{/other_user}", "gists_url": "https://api.github.com/users/mkrasnitski/gists{/gist_id}", "starred_url": "https://api.github.com/users/mkrasnitski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mkrasnitski/subscriptions", "organizations_url": "https://api.github.com/users/mkrasnitski/orgs", "repos_url": "https://api.github.com/users/mkrasnitski/repos", "events_url": "https://api.github.com/users/mkrasnitski/events{/privacy}", "received_events_url": "https://api.github.com/users/mkrasnitski/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "595f783f2212a551fe513c05922d4eda0b8bda7b", "url": "https://api.github.com/repos/rust-lang/rust/commits/595f783f2212a551fe513c05922d4eda0b8bda7b", "html_url": "https://github.com/rust-lang/rust/commit/595f783f2212a551fe513c05922d4eda0b8bda7b"}], "stats": {"total": 19, "additions": 14, "deletions": 5}, "files": [{"sha": "040473c9ffc6230f64c35de4c0e4880cec54a077", "filename": "clippy_lints/src/extra_unused_type_parameters.rs", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/1ee4651ca1c31b39f106079e7546a47d00a3d945/clippy_lints%2Fsrc%2Fextra_unused_type_parameters.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1ee4651ca1c31b39f106079e7546a47d00a3d945/clippy_lints%2Fsrc%2Fextra_unused_type_parameters.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fextra_unused_type_parameters.rs?ref=1ee4651ca1c31b39f106079e7546a47d00a3d945", "patch": "@@ -23,7 +23,6 @@ declare_clippy_lint! {\n     ///\n     /// ### Example\n     /// ```rust\n-    /// // unused type parameters\n     /// fn unused_ty<T>(x: u8) {\n     ///     // ..\n     /// }\n@@ -45,7 +44,7 @@ declare_lint_pass!(ExtraUnusedTypeParameters => [EXTRA_UNUSED_TYPE_PARAMETERS]);\n /// trait bounds those parameters have.\n struct TypeWalker<'cx, 'tcx> {\n     cx: &'cx LateContext<'tcx>,\n-    /// Collection of all the type parameters and their spans.\n+    /// Collection of all the function's type parameters.\n     ty_params: FxHashMap<DefId, Span>,\n     /// Collection of any (inline) trait bounds corresponding to each type parameter.\n     bounds: FxHashMap<DefId, Span>,\n@@ -69,8 +68,8 @@ impl<'cx, 'tcx> TypeWalker<'cx, 'tcx> {\n             .params\n             .iter()\n             .filter_map(|param| {\n-                if let GenericParamKind::Type { .. } = param.kind {\n-                    Some((param.def_id.into(), param.span))\n+                if let GenericParamKind::Type { synthetic, .. } = param.kind {\n+                    (!synthetic).then_some((param.def_id.into(), param.span))\n                 } else {\n                     if !param.is_elided_lifetime() {\n                         all_params_unused = false;"}, {"sha": "2894fda2f4717ae56389ddce713b5da525693abb", "filename": "tests/ui/extra_unused_type_parameters.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1ee4651ca1c31b39f106079e7546a47d00a3d945/tests%2Fui%2Fextra_unused_type_parameters.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1ee4651ca1c31b39f106079e7546a47d00a3d945/tests%2Fui%2Fextra_unused_type_parameters.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fextra_unused_type_parameters.rs?ref=1ee4651ca1c31b39f106079e7546a47d00a3d945", "patch": "@@ -71,6 +71,8 @@ where\n         .filter_map(move |(i, a)| if i == index { None } else { Some(a) })\n }\n \n+fn unused_opaque<A, B>(dummy: impl Default) {}\n+\n mod issue10319 {\n     fn assert_send<T: Send>() {}\n "}, {"sha": "aea3ee310f7dddcf1a8df5dd5a0a87fd3abeb50f", "filename": "tests/ui/extra_unused_type_parameters.stderr", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/1ee4651ca1c31b39f106079e7546a47d00a3d945/tests%2Fui%2Fextra_unused_type_parameters.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/1ee4651ca1c31b39f106079e7546a47d00a3d945/tests%2Fui%2Fextra_unused_type_parameters.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fextra_unused_type_parameters.stderr?ref=1ee4651ca1c31b39f106079e7546a47d00a3d945", "patch": "@@ -55,5 +55,13 @@ LL |     fn unused_ty_impl<T>(&self) {}\n    |\n    = help: consider removing the parameter\n \n-error: aborting due to 7 previous errors\n+error: type parameters go unused in function definition\n+  --> $DIR/extra_unused_type_parameters.rs:74:17\n+   |\n+LL | fn unused_opaque<A, B>(dummy: impl Default) {}\n+   |                 ^^^^^^\n+   |\n+   = help: consider removing the parameters\n+\n+error: aborting due to 8 previous errors\n "}]}