{"sha": "4bc8369a267912e0bf6684a46ceef51c6c373713", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRiYzgzNjlhMjY3OTEyZTBiZjY2ODRhNDZjZWVmNTFjNmMzNzM3MTM=", "commit": {"author": {"name": "Nick Hamann", "email": "nick@wabbo.org", "date": "2015-07-12T07:23:33Z"}, "committer": {"name": "Nick Hamann", "email": "nick@wabbo.org", "date": "2015-07-12T07:23:33Z"}, "message": "Skip diagnostic codes occurring inside a long diagnostic in errorck.", "tree": {"sha": "8ce2e2a7e40d9af2bfc6db8a552af13b07bfa455", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8ce2e2a7e40d9af2bfc6db8a552af13b07bfa455"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4bc8369a267912e0bf6684a46ceef51c6c373713", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4bc8369a267912e0bf6684a46ceef51c6c373713", "html_url": "https://github.com/rust-lang/rust/commit/4bc8369a267912e0bf6684a46ceef51c6c373713", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4bc8369a267912e0bf6684a46ceef51c6c373713/comments", "author": null, "committer": null, "parents": [{"sha": "da1b296e16b1c1c07afac10026bb77e96fa64a0d", "url": "https://api.github.com/repos/rust-lang/rust/commits/da1b296e16b1c1c07afac10026bb77e96fa64a0d", "html_url": "https://github.com/rust-lang/rust/commit/da1b296e16b1c1c07afac10026bb77e96fa64a0d"}], "stats": {"total": 12, "additions": 12, "deletions": 0}, "files": [{"sha": "4f529f5632c39e3197bc85b53b8d1bf876e5e23d", "filename": "src/etc/errorck.py", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/4bc8369a267912e0bf6684a46ceef51c6c373713/src%2Fetc%2Ferrorck.py", "raw_url": "https://github.com/rust-lang/rust/raw/4bc8369a267912e0bf6684a46ceef51c6c373713/src%2Fetc%2Ferrorck.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Ferrorck.py?ref=4bc8369a267912e0bf6684a46ceef51c6c373713", "patch": "@@ -23,6 +23,9 @@\n errcode_map = {}\n error_re = re.compile(\"(E\\d\\d\\d\\d)\")\n \n+long_diag_begin = \"r##\\\"\"\n+long_diag_end = \"\\\"##\"\n+\n for (dirpath, dirnames, filenames) in os.walk(src_dir):\n     if \"src/test\" in dirpath or \"src/llvm\" in dirpath:\n         # Short circuit for fast\n@@ -35,7 +38,13 @@\n         path = os.path.join(dirpath, filename)\n \n         with open(path, 'r') as f:\n+            inside_long_diag = False\n             for line_num, line in enumerate(f, start=1):\n+                if inside_long_diag:\n+                    if long_diag_end in line:\n+                        inside_long_diag = False\n+                    continue\n+\n                 match = error_re.search(line)\n                 if match:\n                     errcode = match.group(1)\n@@ -47,6 +56,9 @@\n                     else:\n                         errcode_map[errcode] = new_record\n \n+                if long_diag_begin in line:\n+                    inside_long_diag = True\n+\n errors = False\n all_errors = []\n "}]}