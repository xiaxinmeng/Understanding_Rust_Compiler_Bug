{"sha": "1f056eda8eb553d3c7d690017b3872db2cc8fdf1", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFmMDU2ZWRhOGViNTUzZDNjN2Q2OTAwMTdiMzg3MmRiMmNjOGZkZjE=", "commit": {"author": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2012-08-30T23:07:55Z"}, "committer": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2012-08-30T23:08:58Z"}, "message": "rustc: Make the compiler no longer ICE on unused foreign constants", "tree": {"sha": "64777f63eb15a0cac8f265dbed3ef58751ae1a55", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/64777f63eb15a0cac8f265dbed3ef58751ae1a55"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1f056eda8eb553d3c7d690017b3872db2cc8fdf1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1f056eda8eb553d3c7d690017b3872db2cc8fdf1", "html_url": "https://github.com/rust-lang/rust/commit/1f056eda8eb553d3c7d690017b3872db2cc8fdf1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1f056eda8eb553d3c7d690017b3872db2cc8fdf1/comments", "author": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "65b05a6ce8e486e085e6a58634f66a27cc631cfb", "url": "https://api.github.com/repos/rust-lang/rust/commits/65b05a6ce8e486e085e6a58634f66a27cc631cfb", "html_url": "https://github.com/rust-lang/rust/commit/65b05a6ce8e486e085e6a58634f66a27cc631cfb"}], "stats": {"total": 10, "additions": 8, "deletions": 2}, "files": [{"sha": "34ccdb3d6e5b3f67e42c80297a03576d4941171b", "filename": "src/rustc/middle/trans/foreign.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/1f056eda8eb553d3c7d690017b3872db2cc8fdf1/src%2Frustc%2Fmiddle%2Ftrans%2Fforeign.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f056eda8eb553d3c7d690017b3872db2cc8fdf1/src%2Frustc%2Fmiddle%2Ftrans%2Fforeign.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fmiddle%2Ftrans%2Fforeign.rs?ref=1f056eda8eb553d3c7d690017b3872db2cc8fdf1", "patch": "@@ -794,7 +794,10 @@ fn trans_foreign_mod(ccx: @crate_ctxt,\n               }\n           }\n         }\n-        ast::foreign_item_const(*) => {}\n+        ast::foreign_item_const(*) => {\n+            let ident = ccx.sess.parse_sess.interner.get(foreign_item.ident);\n+            ccx.item_symbols.insert(foreign_item.id, copy *ident);\n+        }\n       }\n     }\n }"}, {"sha": "93bab0f84e5d15528b87e8ed9fba78c8d6e76bac", "filename": "src/rustc/middle/typeck/check/method.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/1f056eda8eb553d3c7d690017b3872db2cc8fdf1/src%2Frustc%2Fmiddle%2Ftypeck%2Fcheck%2Fmethod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f056eda8eb553d3c7d690017b3872db2cc8fdf1/src%2Frustc%2Fmiddle%2Ftypeck%2Fcheck%2Fmethod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fmiddle%2Ftypeck%2Fcheck%2Fmethod.rs?ref=1f056eda8eb553d3c7d690017b3872db2cc8fdf1", "patch": "@@ -306,7 +306,10 @@ struct lookup {\n             };\n \n             let trt_methods = ty::trait_methods(tcx, trait_id);\n-            match vec::position(*trt_methods, |m| m.ident == self.m_name) {\n+            let match_fn: &fn(m: ty::method) -> bool = |m| {\n+                m.self_ty != ast::sty_static && m.ident == self.m_name\n+            };\n+            match vec::position(*trt_methods, match_fn) {\n               None => {\n                 /* check next bound */\n                 trait_bnd_idx += 1u;"}]}