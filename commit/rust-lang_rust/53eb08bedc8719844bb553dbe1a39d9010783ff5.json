{"sha": "53eb08bedc8719844bb553dbe1a39d9010783ff5", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUzZWIwOGJlZGM4NzE5ODQ0YmI1NTNkYmUxYTM5ZDkwMTA3ODNmZjU=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2017-03-21T14:35:18Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2017-03-21T14:35:18Z"}, "message": "Auto merge of #40686 - alexcrichton:less-logging, r=brson\n\ntravis: Don't set `RUST_LOG` globally\n\nI have a suspicion that this caused a large regression in cycle times by forcing\nthe compiler to perform more checks on every `debug!` statement, so let's test\nthis out by removing the `RUST_LOG` env var globally.\n\nThis regression in cycle time was witnessed between [two] [builds] where the\n[PR] in question didn't do much suspicious. Judging by how the stage0 times\n*also* regressed though then this is my best guess.\n\n[two]: https://travis-ci.org/rust-lang/rust/builds/210149932\n[builds]: https://travis-ci.org/rust-lang/rust/builds/210179995\n[PR]: https://github.com/rust-lang/rust/pull/40446", "tree": {"sha": "10b990e51487ca5d357fba8ccac8219f18fb89a1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/10b990e51487ca5d357fba8ccac8219f18fb89a1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/53eb08bedc8719844bb553dbe1a39d9010783ff5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/53eb08bedc8719844bb553dbe1a39d9010783ff5", "html_url": "https://github.com/rust-lang/rust/commit/53eb08bedc8719844bb553dbe1a39d9010783ff5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/53eb08bedc8719844bb553dbe1a39d9010783ff5/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "134c4a0f08a3d1f55ea8968fbe728fa935c71698", "url": "https://api.github.com/repos/rust-lang/rust/commits/134c4a0f08a3d1f55ea8968fbe728fa935c71698", "html_url": "https://github.com/rust-lang/rust/commit/134c4a0f08a3d1f55ea8968fbe728fa935c71698"}, {"sha": "7305ca38529d6cd9cb916f9303f85aa99c36b3c7", "url": "https://api.github.com/repos/rust-lang/rust/commits/7305ca38529d6cd9cb916f9303f85aa99c36b3c7", "html_url": "https://github.com/rust-lang/rust/commit/7305ca38529d6cd9cb916f9303f85aa99c36b3c7"}], "stats": {"total": 26, "additions": 12, "deletions": 14}, "files": [{"sha": "b4f558099da515fdfd7f69fb1d1e0b389b60f62c", "filename": ".travis.yml", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/53eb08bedc8719844bb553dbe1a39d9010783ff5/.travis.yml", "raw_url": "https://github.com/rust-lang/rust/raw/53eb08bedc8719844bb553dbe1a39d9010783ff5/.travis.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.travis.yml?ref=53eb08bedc8719844bb553dbe1a39d9010783ff5", "patch": "@@ -47,7 +47,6 @@ matrix:\n         SRC=.\n         RUSTC_RETRY_LINKER_ON_SEGFAULT=1\n         SCCACHE_ERROR_LOG=/tmp/sccache.log\n-        RUST_LOG=sccache=debug\n         MACOSX_DEPLOYMENT_TARGET=10.8\n         MACOSX_STD_DEPLOYMENT_TARGET=10.7\n       os: osx\n@@ -61,7 +60,6 @@ matrix:\n         SRC=.\n         RUSTC_RETRY_LINKER_ON_SEGFAULT=1\n         SCCACHE_ERROR_LOG=/tmp/sccache.log\n-        RUST_LOG=sccache=debug\n         MACOSX_DEPLOYMENT_TARGET=10.8\n         MACOSX_STD_DEPLOYMENT_TARGET=10.7\n       os: osx\n@@ -75,7 +73,6 @@ matrix:\n         DEPLOY=1\n         RUSTC_RETRY_LINKER_ON_SEGFAULT=1\n         SCCACHE_ERROR_LOG=/tmp/sccache.log\n-        RUST_LOG=sccache=debug\n         MACOSX_DEPLOYMENT_TARGET=10.8\n         MACOSX_STD_DEPLOYMENT_TARGET=10.7\n       os: osx\n@@ -90,7 +87,6 @@ matrix:\n         DEPLOY=1\n         RUSTC_RETRY_LINKER_ON_SEGFAULT=1\n         SCCACHE_ERROR_LOG=/tmp/sccache.log\n-        RUST_LOG=sccache=debug\n         MACOSX_DEPLOYMENT_TARGET=10.8\n         MACOSX_STD_DEPLOYMENT_TARGET=10.7\n       os: osx\n@@ -109,7 +105,6 @@ matrix:\n         DEPLOY_ALT=1\n         RUSTC_RETRY_LINKER_ON_SEGFAULT=1\n         SCCACHE_ERROR_LOG=/tmp/sccache.log\n-        RUST_LOG=sccache=debug\n         MACOSX_DEPLOYMENT_TARGET=10.8\n         MACOSX_STD_DEPLOYMENT_TARGET=10.7\n       os: osx"}, {"sha": "499f7d602e3684ec22c39d3afcacd773e067f64a", "filename": "appveyor.yml", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/53eb08bedc8719844bb553dbe1a39d9010783ff5/appveyor.yml", "raw_url": "https://github.com/rust-lang/rust/raw/53eb08bedc8719844bb553dbe1a39d9010783ff5/appveyor.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/appveyor.yml?ref=53eb08bedc8719844bb553dbe1a39d9010783ff5", "patch": "@@ -131,7 +131,6 @@ install:\n   - handle.exe -accepteula -help\n \n   # Attempt to debug sccache failures\n-  - set RUST_LOG=sccache=debug\n   - set SCCACHE_ERROR_LOG=%CD%/sccache.log\n \n test_script:"}, {"sha": "9ae894061a6762d0af21dde50427de153f6bfc6c", "filename": "src/Cargo.lock", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/53eb08bedc8719844bb553dbe1a39d9010783ff5/src%2FCargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/53eb08bedc8719844bb553dbe1a39d9010783ff5/src%2FCargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2FCargo.lock?ref=53eb08bedc8719844bb553dbe1a39d9010783ff5", "patch": "@@ -73,7 +73,7 @@ name = \"bootstrap\"\n version = \"0.0.0\"\n dependencies = [\n  \"build_helper 0.1.0\",\n- \"cmake 0.1.21 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cmake 0.1.22 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"filetime 0.1.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"gcc 0.3.44 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"getopts 0.2.14 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -119,7 +119,7 @@ dependencies = [\n \n [[package]]\n name = \"cmake\"\n-version = \"0.1.21\"\n+version = \"0.1.22\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"gcc 0.3.44 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -471,7 +471,7 @@ version = \"0.0.0\"\n dependencies = [\n  \"alloc_system 0.0.0\",\n  \"build_helper 0.1.0\",\n- \"cmake 0.1.21 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cmake 0.1.22 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"core 0.0.0\",\n ]\n \n@@ -614,7 +614,7 @@ version = \"0.0.0\"\n dependencies = [\n  \"alloc_system 0.0.0\",\n  \"build_helper 0.1.0\",\n- \"cmake 0.1.21 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cmake 0.1.22 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"core 0.0.0\",\n ]\n \n@@ -658,7 +658,7 @@ version = \"0.0.0\"\n dependencies = [\n  \"alloc_system 0.0.0\",\n  \"build_helper 0.1.0\",\n- \"cmake 0.1.21 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cmake 0.1.22 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"core 0.0.0\",\n ]\n \n@@ -752,7 +752,7 @@ version = \"0.0.0\"\n dependencies = [\n  \"alloc_system 0.0.0\",\n  \"build_helper 0.1.0\",\n- \"cmake 0.1.21 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cmake 0.1.22 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"core 0.0.0\",\n ]\n \n@@ -994,7 +994,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \"checksum bitflags 0.5.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"4f67931368edf3a9a51d29886d245f1c3db2f1ef0dcc9e35ff70341b78c10d23\"\n \"checksum bitflags 0.8.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"826e1ab483fc81a8143faa7203c4a3c02888ebd1a782e37e41fa34753ba9a162\"\n \"checksum clap 2.21.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"74a80f603221c9cd9aa27a28f52af452850051598537bb6b359c38a7d61e5cda\"\n-\"checksum cmake 0.1.21 (registry+https://github.com/rust-lang/crates.io-index)\" = \"e1acc68a3f714627af38f9f5d09706a28584ba60dfe2cca68f40bf779f941b25\"\n+\"checksum cmake 0.1.22 (registry+https://github.com/rust-lang/crates.io-index)\" = \"d18d68987ed4c516dcc3e7913659bfa4076f5182eea4a7e0038bb060953e76ac\"\n \"checksum dtoa 0.4.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"80c8b71fd71146990a9742fc06dcbbde19161a267e0ad4e572c35162f4578c90\"\n \"checksum env_logger 0.3.5 (registry+https://github.com/rust-lang/crates.io-index)\" = \"15abd780e45b3ea4f76b4e9a26ff4843258dd8a3eed2775a0e7368c2e7936c2f\"\n \"checksum env_logger 0.4.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"e3856f1697098606fc6cb97a93de88ca3f3bc35bb878c725920e6e82ecf05e83\""}, {"sha": "62eed8be3ccb70764c9dacc9be320ddf855e2e8c", "filename": "src/bootstrap/native.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/53eb08bedc8719844bb553dbe1a39d9010783ff5/src%2Fbootstrap%2Fnative.rs", "raw_url": "https://github.com/rust-lang/rust/raw/53eb08bedc8719844bb553dbe1a39d9010783ff5/src%2Fbootstrap%2Fnative.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fnative.rs?ref=53eb08bedc8719844bb553dbe1a39d9010783ff5", "patch": "@@ -18,6 +18,7 @@\n //! LLVM and compiler-rt are essentially just wired up to everything else to\n //! ensure that they're always in place if needed.\n \n+use std::env;\n use std::fs::{self, File};\n use std::io::{Read, Write};\n use std::path::Path;\n@@ -145,6 +146,10 @@ pub fn llvm(build: &Build, target: &str) {\n         cfg.define(\"CMAKE_CXX_FLAGS\", build.cflags(target).join(\" \"));\n     }\n \n+    if env::var_os(\"SCCACHE_ERROR_LOG\").is_some() {\n+        cfg.env(\"RUST_LOG\", \"sccache=debug\");\n+    }\n+\n     // FIXME: we don't actually need to build all LLVM tools and all LLVM\n     //        libraries here, e.g. we just want a few components and a few\n     //        tools. Figure out how to filter them down and only build the right"}, {"sha": "c418d427b15b3ae6a2c294caad4957b27dd2a779", "filename": "src/ci/docker/run.sh", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/53eb08bedc8719844bb553dbe1a39d9010783ff5/src%2Fci%2Fdocker%2Frun.sh", "raw_url": "https://github.com/rust-lang/rust/raw/53eb08bedc8719844bb553dbe1a39d9010783ff5/src%2Fci%2Fdocker%2Frun.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Frun.sh?ref=53eb08bedc8719844bb553dbe1a39d9010783ff5", "patch": "@@ -39,7 +39,6 @@ if [ \"$SCCACHE_BUCKET\" != \"\" ]; then\n     args=\"$args --env AWS_SECRET_ACCESS_KEY=$AWS_SECRET_ACCESS_KEY\"\n     args=\"$args --env SCCACHE_ERROR_LOG=/tmp/sccache/sccache.log\"\n     args=\"$args --env SCCACHE_LOG_LEVEL=debug\"\n-    args=\"$args --env RUST_LOG=sccache=debug\"\n     args=\"$args --volume $objdir/tmp:/tmp/sccache\"\n else\n     mkdir -p $HOME/.cache/sccache"}]}