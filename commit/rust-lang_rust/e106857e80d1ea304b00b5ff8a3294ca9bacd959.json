{"sha": "e106857e80d1ea304b00b5ff8a3294ca9bacd959", "node_id": "MDY6Q29tbWl0NzI0NzEyOmUxMDY4NTdlODBkMWVhMzA0YjAwYjVmZjhhMzI5NGNhOWJhY2Q5NTk=", "commit": {"author": {"name": "Lukas Wirth", "email": "lukastw97@gmail.com", "date": "2020-10-07T10:13:32Z"}, "committer": {"name": "Lukas Wirth", "email": "lukastw97@gmail.com", "date": "2020-10-07T10:14:08Z"}, "message": "Shorten iterator hints for std::iter iterators behind references", "tree": {"sha": "b8f78f6e5218568046f09ba9ecb2c7fee924eb53", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b8f78f6e5218568046f09ba9ecb2c7fee924eb53"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e106857e80d1ea304b00b5ff8a3294ca9bacd959", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e106857e80d1ea304b00b5ff8a3294ca9bacd959", "html_url": "https://github.com/rust-lang/rust/commit/e106857e80d1ea304b00b5ff8a3294ca9bacd959", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e106857e80d1ea304b00b5ff8a3294ca9bacd959/comments", "author": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "209e9b9926d27ac71bc054bfdd48888e5d7d6d1a", "url": "https://api.github.com/repos/rust-lang/rust/commits/209e9b9926d27ac71bc054bfdd48888e5d7d6d1a", "html_url": "https://github.com/rust-lang/rust/commit/209e9b9926d27ac71bc054bfdd48888e5d7d6d1a"}], "stats": {"total": 8, "additions": 5, "deletions": 3}, "files": [{"sha": "c074b8d02f9543bfb47bf6be976e72d1880ee04b", "filename": "crates/assists/src/utils.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e106857e80d1ea304b00b5ff8a3294ca9bacd959/crates%2Fassists%2Fsrc%2Futils.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e106857e80d1ea304b00b5ff8a3294ca9bacd959/crates%2Fassists%2Fsrc%2Futils.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fassists%2Fsrc%2Futils.rs?ref=e106857e80d1ea304b00b5ff8a3294ca9bacd959", "patch": "@@ -308,7 +308,7 @@ pub mod iter {\n                 }\n             }\n         }\n-        pub(crate) mod collect {            \n+        pub(crate) mod collect {\n             pub trait IntoIterator {\n                 type Item;\n             }"}, {"sha": "7540f56a4b15036f6284cdea2d7acb4c60634733", "filename": "crates/ide/src/inlay_hints.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/e106857e80d1ea304b00b5ff8a3294ca9bacd959/crates%2Fide%2Fsrc%2Finlay_hints.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e106857e80d1ea304b00b5ff8a3294ca9bacd959/crates%2Fide%2Fsrc%2Finlay_hints.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Finlay_hints.rs?ref=e106857e80d1ea304b00b5ff8a3294ca9bacd959", "patch": "@@ -211,7 +211,9 @@ fn hint_iterator(\n     ty: &Type,\n ) -> Option<SmolStr> {\n     let db = sema.db;\n-    let strukt = ty.as_adt()?;\n+    let strukt = std::iter::successors(Some(ty.clone()), |ty| ty.remove_ref())\n+        .last()\n+        .and_then(|strukt| strukt.as_adt())?;\n     let krate = strukt.krate(db)?;\n     if krate.declaration_name(db).as_deref() != Some(\"core\") {\n         return None;\n@@ -1169,7 +1171,7 @@ fn main() {\n                     InlayHint {\n                         range: 175..225,\n                         kind: ChainingHint,\n-                        label: \"&mut Take<&mut MyIter>\",\n+                        label: \"impl Iterator<Item = ()>\",\n                     },\n                     InlayHint {\n                         range: 175..207,"}]}