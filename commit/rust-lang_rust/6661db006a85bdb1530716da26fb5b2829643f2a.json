{"sha": "6661db006a85bdb1530716da26fb5b2829643f2a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY2NjFkYjAwNmE4NWJkYjE1MzA3MTZkYTI2ZmI1YjI4Mjk2NDNmMmE=", "commit": {"author": {"name": "varkor", "email": "github@varkor.com", "date": "2019-10-20T22:44:41Z"}, "committer": {"name": "varkor", "email": "github@varkor.com", "date": "2019-10-25T22:38:26Z"}, "message": "Correct handling of type flags with `ConstValue::Placeholder`", "tree": {"sha": "0a58dada4cab3a26f44401b2425bf77205768508", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0a58dada4cab3a26f44401b2425bf77205768508"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6661db006a85bdb1530716da26fb5b2829643f2a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6661db006a85bdb1530716da26fb5b2829643f2a", "html_url": "https://github.com/rust-lang/rust/commit/6661db006a85bdb1530716da26fb5b2829643f2a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6661db006a85bdb1530716da26fb5b2829643f2a/comments", "author": {"login": "varkor", "id": 3943692, "node_id": "MDQ6VXNlcjM5NDM2OTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3943692?v=4", "gravatar_id": "", "url": "https://api.github.com/users/varkor", "html_url": "https://github.com/varkor", "followers_url": "https://api.github.com/users/varkor/followers", "following_url": "https://api.github.com/users/varkor/following{/other_user}", "gists_url": "https://api.github.com/users/varkor/gists{/gist_id}", "starred_url": "https://api.github.com/users/varkor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/varkor/subscriptions", "organizations_url": "https://api.github.com/users/varkor/orgs", "repos_url": "https://api.github.com/users/varkor/repos", "events_url": "https://api.github.com/users/varkor/events{/privacy}", "received_events_url": "https://api.github.com/users/varkor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "varkor", "id": 3943692, "node_id": "MDQ6VXNlcjM5NDM2OTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3943692?v=4", "gravatar_id": "", "url": "https://api.github.com/users/varkor", "html_url": "https://github.com/varkor", "followers_url": "https://api.github.com/users/varkor/followers", "following_url": "https://api.github.com/users/varkor/following{/other_user}", "gists_url": "https://api.github.com/users/varkor/gists{/gist_id}", "starred_url": "https://api.github.com/users/varkor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/varkor/subscriptions", "organizations_url": "https://api.github.com/users/varkor/orgs", "repos_url": "https://api.github.com/users/varkor/repos", "events_url": "https://api.github.com/users/varkor/events{/privacy}", "received_events_url": "https://api.github.com/users/varkor/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e5b8c118a38e8f3319813de56386bf43751582d7", "url": "https://api.github.com/repos/rust-lang/rust/commits/e5b8c118a38e8f3319813de56386bf43751582d7", "html_url": "https://github.com/rust-lang/rust/commit/e5b8c118a38e8f3319813de56386bf43751582d7"}], "stats": {"total": 16, "additions": 9, "deletions": 7}, "files": [{"sha": "dad7144a6e96959eb597ed593dae11920c1b1bb6", "filename": "src/librustc/ty/flags.rs", "status": "modified", "additions": 9, "deletions": 7, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/6661db006a85bdb1530716da26fb5b2829643f2a/src%2Flibrustc%2Fty%2Fflags.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6661db006a85bdb1530716da26fb5b2829643f2a/src%2Flibrustc%2Fty%2Fflags.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fty%2Fflags.rs?ref=6661db006a85bdb1530716da26fb5b2829643f2a", "patch": "@@ -114,6 +114,7 @@ impl FlagComputation {\n             }\n \n             &ty::Placeholder(..) => {\n+                self.add_flags(TypeFlags::HAS_FREE_LOCAL_NAMES);\n                 self.add_flags(TypeFlags::HAS_TY_PLACEHOLDER);\n             }\n \n@@ -123,8 +124,7 @@ impl FlagComputation {\n                 match infer {\n                     ty::FreshTy(_) |\n                     ty::FreshIntTy(_) |\n-                    ty::FreshFloatTy(_) => {\n-                    }\n+                    ty::FreshFloatTy(_) => {}\n \n                     ty::TyVar(_) |\n                     ty::IntVar(_) |\n@@ -245,14 +245,16 @@ impl FlagComputation {\n                 }\n             }\n             ConstValue::Param(_) => {\n-                self.add_flags(TypeFlags::HAS_FREE_LOCAL_NAMES | TypeFlags::HAS_PARAMS);\n+                self.add_flags(TypeFlags::HAS_FREE_LOCAL_NAMES);\n+                self.add_flags(TypeFlags::HAS_PARAMS);\n             }\n             ConstValue::Placeholder(_) => {\n-                self.add_flags(TypeFlags::HAS_FREE_REGIONS | TypeFlags::HAS_CT_PLACEHOLDER);\n+                self.add_flags(TypeFlags::HAS_FREE_LOCAL_NAMES);\n+                self.add_flags(TypeFlags::HAS_CT_PLACEHOLDER);\n             }\n-            ConstValue::Scalar(_) => { }\n-            ConstValue::Slice { data: _, start: _, end: _ } => { }\n-            ConstValue::ByRef { alloc: _, offset: _ } => { }\n+            ConstValue::Scalar(_) => {}\n+            ConstValue::Slice { .. } => {}\n+            ConstValue::ByRef { .. } => {}\n         }\n     }\n "}]}