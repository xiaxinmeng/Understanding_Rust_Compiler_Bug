{"sha": "09a3f7265e453e2f0327e16ee997d92657b7291c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA5YTNmNzI2NWU0NTNlMmYwMzI3ZTE2ZWU5OTdkOTI2NTdiNzI5MWM=", "commit": {"author": {"name": "Oliver S\u0336c\u0336h\u0336n\u0336e\u0336i\u0336d\u0336e\u0336r Scherer", "email": "github35764891676564198441@oli-obk.de", "date": "2018-10-25T11:31:17Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2018-10-25T11:31:17Z"}, "message": "Merge pull request #495 from RalfJung/no-null\n\nAvoid using is_null", "tree": {"sha": "373896d8d876a97f232963f99f6d911b1b0129d9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/373896d8d876a97f232963f99f6d911b1b0129d9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/09a3f7265e453e2f0327e16ee997d92657b7291c", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJb0amFCRBK7hj4Ov3rIwAAdHIIAEX26JyyPA1t5xQxhvn/uK90\n9I396xdPjVOrc8aSIcJ964CQYkr2qPozI628acwBixky2IBWCTa3l8kSNXA63GT5\nY9RxOETdAFO1FnBZ70lyXXKEFGJQDBQ1A1Datw/oHGRWlnOeZSxD6ByQ22CC1cGr\nBfu+1fDfL3ttM4w8yxG5ucNXsWnIYVW9Qt4otFzpVf4DyPkWPhs2HrbUJUb3v34p\nno5MR2htUkUe5DyS4gf6W6gF5apQtO2Zk50H+PMGBZLaagxv9E+97D4e3+EgVUmE\nl3SuwZSHG7UHOiedrDToEToklyR1C7fPAD6B+GDQz67cMD03RWA12MpfixhChyM=\n=Q5hq\n-----END PGP SIGNATURE-----\n", "payload": "tree 373896d8d876a97f232963f99f6d911b1b0129d9\nparent c02988b1c395ea827fe050415e4847288d8e998e\nparent d890a70c39affeb9db3cfa9545905284a981114d\nauthor Oliver S\u0336c\u0336h\u0336n\u0336e\u0336i\u0336d\u0336e\u0336r Scherer <github35764891676564198441@oli-obk.de> 1540467077 +0100\ncommitter GitHub <noreply@github.com> 1540467077 +0100\n\nMerge pull request #495 from RalfJung/no-null\n\nAvoid using is_null"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/09a3f7265e453e2f0327e16ee997d92657b7291c", "html_url": "https://github.com/rust-lang/rust/commit/09a3f7265e453e2f0327e16ee997d92657b7291c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/09a3f7265e453e2f0327e16ee997d92657b7291c/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c02988b1c395ea827fe050415e4847288d8e998e", "url": "https://api.github.com/repos/rust-lang/rust/commits/c02988b1c395ea827fe050415e4847288d8e998e", "html_url": "https://github.com/rust-lang/rust/commit/c02988b1c395ea827fe050415e4847288d8e998e"}, {"sha": "d890a70c39affeb9db3cfa9545905284a981114d", "url": "https://api.github.com/repos/rust-lang/rust/commits/d890a70c39affeb9db3cfa9545905284a981114d", "html_url": "https://github.com/rust-lang/rust/commit/d890a70c39affeb9db3cfa9545905284a981114d"}], "stats": {"total": 10, "additions": 5, "deletions": 5}, "files": [{"sha": "2d142ab20dc6199709f0bbe00c4504e939c8559b", "filename": "src/fn_call.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/09a3f7265e453e2f0327e16ee997d92657b7291c/src%2Ffn_call.rs", "raw_url": "https://github.com/rust-lang/rust/raw/09a3f7265e453e2f0327e16ee997d92657b7291c/src%2Ffn_call.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ffn_call.rs?ref=09a3f7265e453e2f0327e16ee997d92657b7291c", "patch": "@@ -132,7 +132,7 @@ impl<'a, 'mir, 'tcx: 'mir + 'a> EvalContextExt<'tcx, 'mir> for super::MiriEvalCo\n \n             \"free\" => {\n                 let ptr = self.read_scalar(args[0])?.not_undef()?.erase_tag(); // raw ptr operation, no tag\n-                if !ptr.is_null() {\n+                if !ptr.is_null_ptr(&self) {\n                     self.memory.deallocate(\n                         ptr.to_ptr()?.with_default_tag(),\n                         None,\n@@ -353,7 +353,7 @@ impl<'a, 'mir, 'tcx: 'mir + 'a> EvalContextExt<'tcx, 'mir> for super::MiriEvalCo\n                 let mut success = None;\n                 {\n                     let name_ptr = self.read_scalar(args[0])?.not_undef()?.erase_tag(); // raw ptr operation\n-                    if !name_ptr.is_null() {\n+                    if !name_ptr.is_null_ptr(&self) {\n                         let name = self.memory.read_c_str(name_ptr.to_ptr()?.with_default_tag())?;\n                         if !name.is_empty() && !name.contains(&b'=') {\n                             success = Some(self.machine.env_vars.remove(name));\n@@ -376,7 +376,7 @@ impl<'a, 'mir, 'tcx: 'mir + 'a> EvalContextExt<'tcx, 'mir> for super::MiriEvalCo\n                     let name_ptr = self.read_scalar(args[0])?.not_undef()?.erase_tag(); // raw ptr operation\n                     let value_ptr = self.read_scalar(args[1])?.to_ptr()?.erase_tag(); // raw ptr operation\n                     let value = self.memory.read_c_str(value_ptr.with_default_tag())?;\n-                    if !name_ptr.is_null() {\n+                    if !name_ptr.is_null_ptr(&self) {\n                         let name = self.memory.read_c_str(name_ptr.to_ptr()?.with_default_tag())?;\n                         if !name.is_empty() && !name.contains(&b'=') {\n                             new = Some((name.to_owned(), value.to_owned()));"}, {"sha": "dceeaf89aa5d3c4bcbd3d8fe3b98c98adf93ea58", "filename": "src/intrinsic.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/09a3f7265e453e2f0327e16ee997d92657b7291c/src%2Fintrinsic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/09a3f7265e453e2f0327e16ee997d92657b7291c/src%2Fintrinsic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fintrinsic.rs?ref=09a3f7265e453e2f0327e16ee997d92657b7291c", "patch": "@@ -231,7 +231,7 @@ impl<'a, 'mir, 'tcx> EvalContextExt<'tcx> for super::MiriEvalContext<'a, 'mir, '\n                 let a = self.read_value(args[0])?;\n                 let b = self.read_value(args[1])?;\n                 // check x % y != 0\n-                if !self.binary_op_val(mir::BinOp::Rem, a, b)?.0.is_null() {\n+                if self.binary_op_val(mir::BinOp::Rem, a, b)?.0.to_bytes()? != 0 {\n                     return err!(ValidationFailure(format!(\"exact_div: {:?} cannot be divided by {:?}\", a, b)));\n                 }\n                 self.binop_ignore_overflow(mir::BinOp::Div, a, b, dest)?;"}, {"sha": "b315e27c45d0a11a40b36c4244237d819436d541", "filename": "src/tls.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/09a3f7265e453e2f0327e16ee997d92657b7291c/src%2Ftls.rs", "raw_url": "https://github.com/rust-lang/rust/raw/09a3f7265e453e2f0327e16ee997d92657b7291c/src%2Ftls.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftls.rs?ref=09a3f7265e453e2f0327e16ee997d92657b7291c", "patch": "@@ -121,7 +121,7 @@ impl<'tcx> TlsData<'tcx> {\n         for (&key, &mut TlsEntry { ref mut data, dtor }) in\n             thread_local.range_mut((start, Unbounded))\n         {\n-            if !data.is_null() {\n+            if !data.is_null_ptr(cx) {\n                 if let Some(dtor) = dtor {\n                     let ret = Some((dtor, *data, key));\n                     *data = Scalar::ptr_null(cx);"}]}