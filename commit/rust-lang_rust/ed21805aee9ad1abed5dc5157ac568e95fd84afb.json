{"sha": "ed21805aee9ad1abed5dc5157ac568e95fd84afb", "node_id": "C_kwDOAAsO6NoAKGVkMjE4MDVhZWU5YWQxYWJlZDVkYzUxNTdhYzU2OGU5NWZkODRhZmI", "commit": {"author": {"name": "Michael Woerister", "email": "michaelwoerister@posteo", "date": "2022-02-08T14:31:09Z"}, "committer": {"name": "Michael Woerister", "email": "michaelwoerister@posteo", "date": "2022-02-08T14:31:09Z"}, "message": "debuginfo: Bring back DW_AT_containing_type for vtables -- address review comments", "tree": {"sha": "9f6e9973e98e142c4ffb94cfe78a6122f49db55a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9f6e9973e98e142c4ffb94cfe78a6122f49db55a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ed21805aee9ad1abed5dc5157ac568e95fd84afb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ed21805aee9ad1abed5dc5157ac568e95fd84afb", "html_url": "https://github.com/rust-lang/rust/commit/ed21805aee9ad1abed5dc5157ac568e95fd84afb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ed21805aee9ad1abed5dc5157ac568e95fd84afb/comments", "author": {"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}, "committer": {"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fc7f419a63e4c98a928729d0ad59c426ccb84963", "url": "https://api.github.com/repos/rust-lang/rust/commits/fc7f419a63e4c98a928729d0ad59c426ccb84963", "html_url": "https://github.com/rust-lang/rust/commit/fc7f419a63e4c98a928729d0ad59c426ccb84963"}], "stats": {"total": 6, "additions": 4, "deletions": 2}, "files": [{"sha": "da997dd98792fea8451cc8549c860f1244b901ac", "filename": "compiler/rustc_codegen_llvm/src/debuginfo/metadata.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ed21805aee9ad1abed5dc5157ac568e95fd84afb/compiler%2Frustc_codegen_llvm%2Fsrc%2Fdebuginfo%2Fmetadata.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ed21805aee9ad1abed5dc5157ac568e95fd84afb/compiler%2Frustc_codegen_llvm%2Fsrc%2Fdebuginfo%2Fmetadata.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_llvm%2Fsrc%2Fdebuginfo%2Fmetadata.rs?ref=ed21805aee9ad1abed5dc5157ac568e95fd84afb", "patch": "@@ -2662,11 +2662,13 @@ fn vtable_type_metadata<'ll, 'tcx>(\n                 }\n                 ty::VtblEntry::Method(_) => {\n                     // Note: This code does not try to give a proper name to each method\n-                    //       because their might be multiple methods with the same name\n+                    //       because there might be multiple methods with the same name\n                     //       (coming from different traits).\n                     (format!(\"__method{}\", index), void_pointer_type_debuginfo)\n                 }\n                 ty::VtblEntry::TraitVPtr(_) => {\n+                    // Note: In the future we could try to set the type of this pointer\n+                    //       to the type that we generate for the corresponding vtable.\n                     (format!(\"__super_trait_ptr{}\", index), void_pointer_type_debuginfo)\n                 }\n                 ty::VtblEntry::MetadataAlign => (\"align\".to_string(), usize_debuginfo),"}, {"sha": "3cb19c0eec624b4e8460efff15d413e51fac6f18", "filename": "compiler/rustc_codegen_ssa/src/debuginfo/type_names.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ed21805aee9ad1abed5dc5157ac568e95fd84afb/compiler%2Frustc_codegen_ssa%2Fsrc%2Fdebuginfo%2Ftype_names.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ed21805aee9ad1abed5dc5157ac568e95fd84afb/compiler%2Frustc_codegen_ssa%2Fsrc%2Fdebuginfo%2Ftype_names.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_ssa%2Fsrc%2Fdebuginfo%2Ftype_names.rs?ref=ed21805aee9ad1abed5dc5157ac568e95fd84afb", "patch": "@@ -470,7 +470,7 @@ fn push_debuginfo_type_name<'tcx>(\n }\n \n pub enum VTableNameKind {\n-    // Is the name for const/static holding the vtable?\n+    // Is the name for the const/static holding the vtable?\n     GlobalVariable,\n     // Is the name for the type of the vtable?\n     Type,"}]}