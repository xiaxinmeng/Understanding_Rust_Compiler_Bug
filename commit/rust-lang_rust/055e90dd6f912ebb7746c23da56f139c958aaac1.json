{"sha": "055e90dd6f912ebb7746c23da56f139c958aaac1", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA1NWU5MGRkNmY5MTJlYmI3NzQ2YzIzZGE1NmYxMzljOTU4YWFhYzE=", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2020-09-18T10:12:02Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2020-09-18T10:12:02Z"}, "message": "'cargo update' test-cargo-miri", "tree": {"sha": "db6b243a749a68ea7e1d6d2901c56363bf81ffd8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/db6b243a749a68ea7e1d6d2901c56363bf81ffd8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/055e90dd6f912ebb7746c23da56f139c958aaac1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/055e90dd6f912ebb7746c23da56f139c958aaac1", "html_url": "https://github.com/rust-lang/rust/commit/055e90dd6f912ebb7746c23da56f139c958aaac1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/055e90dd6f912ebb7746c23da56f139c958aaac1/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e9e67c97cc7b8d242042051d81e97eea6482ce48", "url": "https://api.github.com/repos/rust-lang/rust/commits/e9e67c97cc7b8d242042051d81e97eea6482ce48", "html_url": "https://github.com/rust-lang/rust/commit/e9e67c97cc7b8d242042051d81e97eea6482ce48"}], "stats": {"total": 52, "additions": 27, "deletions": 25}, "files": [{"sha": "8ea88fbb828d83abce13b4466ab1e66a159a0426", "filename": "test-cargo-miri/Cargo.lock", "status": "modified", "additions": 13, "deletions": 11, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/055e90dd6f912ebb7746c23da56f139c958aaac1/test-cargo-miri%2FCargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/055e90dd6f912ebb7746c23da56f139c958aaac1/test-cargo-miri%2FCargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/test-cargo-miri%2FCargo.lock?ref=055e90dd6f912ebb7746c23da56f139c958aaac1", "patch": "@@ -11,7 +11,6 @@ name = \"cargo-miri-test\"\n version = \"0.1.0\"\n dependencies = [\n  \"byteorder\",\n- \"num_cpus\",\n  \"rand\",\n ]\n \n@@ -23,9 +22,9 @@ checksum = \"4785bdd1c96b2a846b2bd7cc02e86b6b3dbf14e7e53446c4f54c92a361040822\"\n \n [[package]]\n name = \"getrandom\"\n-version = \"0.1.14\"\n+version = \"0.1.15\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"7abc8dd8451921606d809ba32e95b6111925cd2906060d2dcc29c070220503eb\"\n+checksum = \"fc587bc0ec293155d5bfa6b9891ec18a1e330c234f896ea47fbada4cadbe47e6\"\n dependencies = [\n  \"cfg-if\",\n  \"libc\",\n@@ -34,34 +33,34 @@ dependencies = [\n \n [[package]]\n name = \"hermit-abi\"\n-version = \"0.1.10\"\n+version = \"0.1.15\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"725cf19794cf90aa94e65050cb4191ff5d8fa87a498383774c47b332e3af952e\"\n+checksum = \"3deed196b6e7f9e44a2ae8d94225d80302d81208b1bb673fd21fe634645c85a9\"\n dependencies = [\n  \"libc\",\n ]\n \n [[package]]\n name = \"libc\"\n-version = \"0.2.68\"\n+version = \"0.2.77\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"dea0c0405123bba743ee3f91f49b1c7cfb684eef0da0a50110f758ccf24cdff0\"\n+checksum = \"f2f96b10ec2560088a8e76961b00d47107b3a625fecb76dedb29ee7ccbf98235\"\n \n [[package]]\n name = \"num_cpus\"\n-version = \"1.12.0\"\n+version = \"1.13.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"46203554f085ff89c235cd12f7075f3233af9b11ed7c9e16dfe2560d03313ce6\"\n+checksum = \"05499f3756671c15885fee9034446956fff3f243d6077b91e5767df161f766b3\"\n dependencies = [\n  \"hermit-abi\",\n  \"libc\",\n ]\n \n [[package]]\n name = \"ppv-lite86\"\n-version = \"0.2.6\"\n+version = \"0.2.9\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"74490b50b9fbe561ac330df47c08f3f33073d2d00c150f719147d7c54522fa1b\"\n+checksum = \"c36fa947111f5c62a733b652544dd0016a43ce89619538a8ef92724a6f501a20\"\n \n [[package]]\n name = \"rand\"\n@@ -117,6 +116,9 @@ dependencies = [\n [[package]]\n name = \"subcrate\"\n version = \"0.1.0\"\n+dependencies = [\n+ \"num_cpus\",\n+]\n \n [[package]]\n name = \"wasi\""}, {"sha": "b2a1612ffadfe58809914a082cd14fca758c71e0", "filename": "test-cargo-miri/Cargo.toml", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/055e90dd6f912ebb7746c23da56f139c958aaac1/test-cargo-miri%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/055e90dd6f912ebb7746c23da56f139c958aaac1/test-cargo-miri%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/test-cargo-miri%2FCargo.toml?ref=055e90dd6f912ebb7746c23da56f139c958aaac1", "patch": "@@ -12,7 +12,6 @@ byteorder = \"1.0\"\n \n [dev-dependencies]\n rand = { version = \"0.7\", features = [\"small_rng\"] }\n-num_cpus = \"1.10.1\"\n \n [lib]\n test = false # test that this is respected (will show in the output)"}, {"sha": "16b173b287cae4c2a8e45c574f44b14e3d71d39e", "filename": "test-cargo-miri/src/main.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/055e90dd6f912ebb7746c23da56f139c958aaac1/test-cargo-miri%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/055e90dd6f912ebb7746c23da56f139c958aaac1/test-cargo-miri%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/test-cargo-miri%2Fsrc%2Fmain.rs?ref=055e90dd6f912ebb7746c23da56f139c958aaac1", "patch": "@@ -19,6 +19,7 @@ fn main() {\n     }\n \n     // If there were no arguments, access stdin and test working dir.\n+    // (We rely on the test runner to always disable isolation when passing no arguments.)\n     if std::env::args().len() <= 1 {\n         // CWD should be crate root.\n         // We have to normalize slashes, as the env var might be set for a different target's conventions.\n@@ -33,7 +34,7 @@ fn main() {\n             let num: i32 = line.unwrap().parse().unwrap();\n             println!(\"{}\", 2*num);\n         }\n-        // On non-Unix, reading from stdin is not support. So we hard-code the right answer.\n+        // On non-Unix, reading from stdin is not supported. So we hard-code the right answer.\n         #[cfg(not(unix))]\n         {\n             println!(\"24\");"}, {"sha": "be27f88ad9a1cfbd1a7bdd90b6a12a065e72f370", "filename": "test-cargo-miri/subcrate/Cargo.toml", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/055e90dd6f912ebb7746c23da56f139c958aaac1/test-cargo-miri%2Fsubcrate%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/055e90dd6f912ebb7746c23da56f139c958aaac1/test-cargo-miri%2Fsubcrate%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/test-cargo-miri%2Fsubcrate%2FCargo.toml?ref=055e90dd6f912ebb7746c23da56f139c958aaac1", "patch": "@@ -12,3 +12,6 @@ path = \"main.rs\"\n name = \"subtest\"\n path = \"test.rs\"\n harness = false\n+\n+[dev-dependencies]\n+num_cpus = \"1.10.1\""}, {"sha": "fdab9402813be0b7de215f4f2f332cce63d9ec15", "filename": "test-cargo-miri/subcrate/test.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/055e90dd6f912ebb7746c23da56f139c958aaac1/test-cargo-miri%2Fsubcrate%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/055e90dd6f912ebb7746c23da56f139c958aaac1/test-cargo-miri%2Fsubcrate%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/test-cargo-miri%2Fsubcrate%2Ftest.rs?ref=055e90dd6f912ebb7746c23da56f139c958aaac1", "patch": "@@ -10,4 +10,7 @@ fn main() {\n     let crate_dir = env::var_os(\"CARGO_MANIFEST_DIR\").unwrap();\n     let crate_dir = crate_dir.to_string_lossy().replace(\"\\\\\", \"/\");\n     assert_eq!(env_dir, crate_dir);\n+\n+    // Make sure we can call `num_cpus`.\n+    num_cpus::get();\n }"}, {"sha": "7079798e42febd9b127bf9261df839d4ac4e5219", "filename": "test-cargo-miri/test.stdout.ref1", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/055e90dd6f912ebb7746c23da56f139c958aaac1/test-cargo-miri%2Ftest.stdout.ref1", "raw_url": "https://github.com/rust-lang/rust/raw/055e90dd6f912ebb7746c23da56f139c958aaac1/test-cargo-miri%2Ftest.stdout.ref1", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/test-cargo-miri%2Ftest.stdout.ref1?ref=055e90dd6f912ebb7746c23da56f139c958aaac1", "patch": "@@ -4,7 +4,7 @@ running 1 test\n test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out\n \n \n-running 8 tests\n-..i.....\n-test result: ok. 7 passed; 0 failed; 1 ignored; 0 measured; 0 filtered out\n+running 7 tests\n+..i....\n+test result: ok. 6 passed; 0 failed; 1 ignored; 0 measured; 0 filtered out\n "}, {"sha": "37efb8c3ee896f6c871fb56bcf00227ac6782f93", "filename": "test-cargo-miri/test.stdout.ref2", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/055e90dd6f912ebb7746c23da56f139c958aaac1/test-cargo-miri%2Ftest.stdout.ref2", "raw_url": "https://github.com/rust-lang/rust/raw/055e90dd6f912ebb7746c23da56f139c958aaac1/test-cargo-miri%2Ftest.stdout.ref2", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/test-cargo-miri%2Ftest.stdout.ref2?ref=055e90dd6f912ebb7746c23da56f139c958aaac1", "patch": "@@ -7,5 +7,5 @@ test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 1 filtered out\n running 1 test\n test simple1 ... ok\n \n-test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 7 filtered out\n+test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 6 filtered out\n "}, {"sha": "893e52e87774d4fcd863970ecaa0ef109dbbed2d", "filename": "test-cargo-miri/test.stdout.ref3", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/055e90dd6f912ebb7746c23da56f139c958aaac1/test-cargo-miri%2Ftest.stdout.ref3", "raw_url": "https://github.com/rust-lang/rust/raw/055e90dd6f912ebb7746c23da56f139c958aaac1/test-cargo-miri%2Ftest.stdout.ref3", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/test-cargo-miri%2Ftest.stdout.ref3?ref=055e90dd6f912ebb7746c23da56f139c958aaac1", "patch": "@@ -1,13 +1,12 @@\n \n-running 8 tests\n+running 7 tests\n test cargo_env ... ok\n test do_panic ... ok\n test does_not_work_on_miri ... ignored\n test entropy_rng ... ok\n test fail_index_check ... ok\n-test num_cpus ... ok\n test simple1 ... ok\n test simple2 ... ok\n \n-test result: ok. 7 passed; 0 failed; 1 ignored; 0 measured; 0 filtered out\n+test result: ok. 6 passed; 0 failed; 1 ignored; 0 measured; 0 filtered out\n "}, {"sha": "436e919e050d9a27a518984d168b666f67634fb6", "filename": "test-cargo-miri/tests/test.rs", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/055e90dd6f912ebb7746c23da56f139c958aaac1/test-cargo-miri%2Ftests%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/055e90dd6f912ebb7746c23da56f139c958aaac1/test-cargo-miri%2Ftests%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/test-cargo-miri%2Ftests%2Ftest.rs?ref=055e90dd6f912ebb7746c23da56f139c958aaac1", "patch": "@@ -37,11 +37,6 @@ fn entropy_rng() {\n     let _val = rng.gen::<i128>();\n }\n \n-#[test]\n-fn num_cpus() {\n-    assert_eq!(num_cpus::get(), 1);\n-}\n-\n #[test]\n fn cargo_env() {\n     assert_eq!(env!(\"CARGO_PKG_NAME\"), \"cargo-miri-test\");"}]}