{"sha": "d499bbb99d72c991f1d1691f83ffe96bcfafc80a", "node_id": "C_kwDOAAsO6NoAKGQ0OTliYmI5OWQ3MmM5OTFmMWQxNjkxZjgzZmZlOTZiY2ZhZmM4MGE", "commit": {"author": {"name": "John K\u00e5re Alsaker", "email": "john.kare.alsaker@gmail.com", "date": "2023-03-29T12:50:10Z"}, "committer": {"name": "John K\u00e5re Alsaker", "email": "john.kare.alsaker@gmail.com", "date": "2023-03-29T12:50:10Z"}, "message": "Use #[cfg(target_thread_local)] on items", "tree": {"sha": "8bf1e8a572e34cc69d6b8f99640473e67f62d06f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8bf1e8a572e34cc69d6b8f99640473e67f62d06f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d499bbb99d72c991f1d1691f83ffe96bcfafc80a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d499bbb99d72c991f1d1691f83ffe96bcfafc80a", "html_url": "https://github.com/rust-lang/rust/commit/d499bbb99d72c991f1d1691f83ffe96bcfafc80a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d499bbb99d72c991f1d1691f83ffe96bcfafc80a/comments", "author": {"login": "Zoxc", "id": 25784, "node_id": "MDQ6VXNlcjI1Nzg0", "avatar_url": "https://avatars.githubusercontent.com/u/25784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zoxc", "html_url": "https://github.com/Zoxc", "followers_url": "https://api.github.com/users/Zoxc/followers", "following_url": "https://api.github.com/users/Zoxc/following{/other_user}", "gists_url": "https://api.github.com/users/Zoxc/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zoxc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zoxc/subscriptions", "organizations_url": "https://api.github.com/users/Zoxc/orgs", "repos_url": "https://api.github.com/users/Zoxc/repos", "events_url": "https://api.github.com/users/Zoxc/events{/privacy}", "received_events_url": "https://api.github.com/users/Zoxc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Zoxc", "id": 25784, "node_id": "MDQ6VXNlcjI1Nzg0", "avatar_url": "https://avatars.githubusercontent.com/u/25784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zoxc", "html_url": "https://github.com/Zoxc", "followers_url": "https://api.github.com/users/Zoxc/followers", "following_url": "https://api.github.com/users/Zoxc/following{/other_user}", "gists_url": "https://api.github.com/users/Zoxc/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zoxc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zoxc/subscriptions", "organizations_url": "https://api.github.com/users/Zoxc/orgs", "repos_url": "https://api.github.com/users/Zoxc/repos", "events_url": "https://api.github.com/users/Zoxc/events{/privacy}", "received_events_url": "https://api.github.com/users/Zoxc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3019a341f328f1c5e4a671df2b61171ae925b034", "url": "https://api.github.com/repos/rust-lang/rust/commits/3019a341f328f1c5e4a671df2b61171ae925b034", "html_url": "https://github.com/rust-lang/rust/commit/3019a341f328f1c5e4a671df2b61171ae925b034"}], "stats": {"total": 6, "additions": 4, "deletions": 2}, "files": [{"sha": "027213bc033499ace73632086765e4efbf22f597", "filename": "tests/ui/thread-local/auxiliary/tls-export.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/d499bbb99d72c991f1d1691f83ffe96bcfafc80a/tests%2Fui%2Fthread-local%2Fauxiliary%2Ftls-export.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d499bbb99d72c991f1d1691f83ffe96bcfafc80a/tests%2Fui%2Fthread-local%2Fauxiliary%2Ftls-export.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fthread-local%2Fauxiliary%2Ftls-export.rs?ref=d499bbb99d72c991f1d1691f83ffe96bcfafc80a", "patch": "@@ -1,15 +1,16 @@\n #![crate_type = \"dylib\"]\n #![feature(thread_local)]\n #![feature(cfg_target_thread_local)]\n-#![cfg(target_thread_local)]\n \n extern crate tls_rlib;\n \n pub use tls_rlib::*;\n \n+#[cfg(target_thread_local)]\n #[thread_local]\n pub static FOO: bool = true;\n \n+#[cfg(target_thread_local)]\n #[inline(never)]\n pub fn foo_addr() -> usize {\n     &FOO as *const bool as usize"}, {"sha": "20bc998ec11d89c81ae2d62ec29427a39bc6b920", "filename": "tests/ui/thread-local/auxiliary/tls-rlib.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/d499bbb99d72c991f1d1691f83ffe96bcfafc80a/tests%2Fui%2Fthread-local%2Fauxiliary%2Ftls-rlib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d499bbb99d72c991f1d1691f83ffe96bcfafc80a/tests%2Fui%2Fthread-local%2Fauxiliary%2Ftls-rlib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fthread-local%2Fauxiliary%2Ftls-rlib.rs?ref=d499bbb99d72c991f1d1691f83ffe96bcfafc80a", "patch": "@@ -3,11 +3,12 @@\n #![crate_type = \"rlib\"]\n #![feature(thread_local)]\n #![feature(cfg_target_thread_local)]\n-#![cfg(target_thread_local)]\n \n+#[cfg(target_thread_local)]\n #[thread_local]\n pub static BAR: bool = true;\n \n+#[cfg(target_thread_local)]\n #[inline(never)]\n pub fn bar_addr() -> usize {\n     &BAR as *const bool as usize"}]}