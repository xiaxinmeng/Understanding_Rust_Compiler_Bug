{"sha": "7581bb7c02f9960fba66add3e4c7c62874c60c7f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc1ODFiYjdjMDJmOTk2MGZiYTY2YWRkM2U0YzdjNjI4NzRjNjBjN2Y=", "commit": {"author": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2020-10-16T20:36:32Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-10-16T20:36:32Z"}, "message": "Rollup merge of #75209 - Hirrolot:suggest-macro-imports, r=estebank\n\nSuggest imports of unresolved macros\n\nCloses https://github.com/rust-lang/rust/issues/75191.", "tree": {"sha": "4e48ad8722a26a5bb1b249d5ec034a9126de1dbf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4e48ad8722a26a5bb1b249d5ec034a9126de1dbf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7581bb7c02f9960fba66add3e4c7c62874c60c7f", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfigRRCRBK7hj4Ov3rIwAAdHIIAJw9WgWY+fbim/8bZJF+6pEO\nx7PRhV+PZ4bjgI/rzEs/jABPqhimRv2VB3HWmx3pJrklo3h60yVOLONwkd5S48Yr\nRhlRBaFUzvozHiKxbyWBOH3CV2ouVp00TiU/+WY+dPTpXIfi5fF25JAIHWHIrsT3\nllbo5Kee5i2gBzNLXRzKPb+uCvsFT3YAMCg4He3Rj96evq3EGoe+9rpMj5CZWtXG\nLmlRSTrozU1OXECTafClpvnMrLT/Ht6h1d+tlIKEsZAl2KAcjKXlWRuEXn9EUXP7\n0QH2IldT19qLjWXvv82tZMoP+Pt7IgZDFPPchExUsyOM2nBR3k09B/iEdhppepE=\n=Rftq\n-----END PGP SIGNATURE-----\n", "payload": "tree 4e48ad8722a26a5bb1b249d5ec034a9126de1dbf\nparent 5a51185fd4600e96cc79a3db9da3c4bf927f2281\nparent ea7cf6106864ce7929eb9f3cfe580f05ee418ac8\nauthor Yuki Okushi <huyuumi.dev@gmail.com> 1602880592 +0900\ncommitter GitHub <noreply@github.com> 1602880592 +0900\n\nRollup merge of #75209 - Hirrolot:suggest-macro-imports, r=estebank\n\nSuggest imports of unresolved macros\n\nCloses https://github.com/rust-lang/rust/issues/75191.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7581bb7c02f9960fba66add3e4c7c62874c60c7f", "html_url": "https://github.com/rust-lang/rust/commit/7581bb7c02f9960fba66add3e4c7c62874c60c7f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7581bb7c02f9960fba66add3e4c7c62874c60c7f/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5a51185fd4600e96cc79a3db9da3c4bf927f2281", "url": "https://api.github.com/repos/rust-lang/rust/commits/5a51185fd4600e96cc79a3db9da3c4bf927f2281", "html_url": "https://github.com/rust-lang/rust/commit/5a51185fd4600e96cc79a3db9da3c4bf927f2281"}, {"sha": "ea7cf6106864ce7929eb9f3cfe580f05ee418ac8", "url": "https://api.github.com/repos/rust-lang/rust/commits/ea7cf6106864ce7929eb9f3cfe580f05ee418ac8", "html_url": "https://github.com/rust-lang/rust/commit/ea7cf6106864ce7929eb9f3cfe580f05ee418ac8"}], "stats": {"total": 26, "additions": 26, "deletions": 0}, "files": [{"sha": "33ab09a8f4280ddd5ada23d2b22d8a547275be00", "filename": "compiler/rustc_resolve/src/diagnostics.rs", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/7581bb7c02f9960fba66add3e4c7c62874c60c7f/compiler%2Frustc_resolve%2Fsrc%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7581bb7c02f9960fba66add3e4c7c62874c60c7f/compiler%2Frustc_resolve%2Fsrc%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_resolve%2Fsrc%2Fdiagnostics.rs?ref=7581bb7c02f9960fba66add3e4c7c62874c60c7f", "patch": "@@ -922,6 +922,17 @@ impl<'a> Resolver<'a> {\n         );\n         self.add_typo_suggestion(err, suggestion, ident.span);\n \n+        let import_suggestions = self.lookup_import_candidates(\n+            ident,\n+            Namespace::MacroNS,\n+            parent_scope,\n+            |res| match res {\n+                Res::Def(DefKind::Macro(MacroKind::Bang), _) => true,\n+                _ => false,\n+            },\n+        );\n+        show_candidates(err, None, &import_suggestions, false, true);\n+\n         if macro_kind == MacroKind::Derive && (ident.name == sym::Send || ident.name == sym::Sync) {\n             let msg = format!(\"unsafe traits like `{}` should be implemented explicitly\", ident);\n             err.span_note(ident.span, &msg);"}, {"sha": "700f6616af40ff02586e2c66752b0d326aa32ef1", "filename": "src/test/ui/empty/empty-macro-use.stderr", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/7581bb7c02f9960fba66add3e4c7c62874c60c7f/src%2Ftest%2Fui%2Fempty%2Fempty-macro-use.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7581bb7c02f9960fba66add3e4c7c62874c60c7f/src%2Ftest%2Fui%2Fempty%2Fempty-macro-use.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fempty%2Fempty-macro-use.stderr?ref=7581bb7c02f9960fba66add3e4c7c62874c60c7f", "patch": "@@ -3,6 +3,9 @@ error: cannot find macro `macro_two` in this scope\n    |\n LL |     macro_two!();\n    |     ^^^^^^^^^\n+   |\n+   = note: consider importing this macro:\n+           two_macros::macro_two\n \n error: aborting due to previous error\n "}, {"sha": "02ddc391f6e3c01f1e22a096ad47ae982771dc3d", "filename": "src/test/ui/hygiene/no_implicit_prelude-2018.stderr", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/7581bb7c02f9960fba66add3e4c7c62874c60c7f/src%2Ftest%2Fui%2Fhygiene%2Fno_implicit_prelude-2018.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7581bb7c02f9960fba66add3e4c7c62874c60c7f/src%2Ftest%2Fui%2Fhygiene%2Fno_implicit_prelude-2018.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fhygiene%2Fno_implicit_prelude-2018.stderr?ref=7581bb7c02f9960fba66add3e4c7c62874c60c7f", "patch": "@@ -3,6 +3,9 @@ error: cannot find macro `print` in this scope\n    |\n LL |         print!();\n    |         ^^^^^\n+   |\n+   = note: consider importing this macro:\n+           std::print\n \n error: aborting due to previous error\n "}, {"sha": "843dee2478b3ff8b983a17714dfb908aa53989a6", "filename": "src/test/ui/hygiene/no_implicit_prelude.stderr", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/7581bb7c02f9960fba66add3e4c7c62874c60c7f/src%2Ftest%2Fui%2Fhygiene%2Fno_implicit_prelude.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7581bb7c02f9960fba66add3e4c7c62874c60c7f/src%2Ftest%2Fui%2Fhygiene%2Fno_implicit_prelude.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fhygiene%2Fno_implicit_prelude.stderr?ref=7581bb7c02f9960fba66add3e4c7c62874c60c7f", "patch": "@@ -4,6 +4,9 @@ error: cannot find macro `panic` in this scope\n LL |         assert_eq!(0, 0);\n    |         ^^^^^^^^^^^^^^^^^\n    |\n+   = note: consider importing one of these items:\n+           core::panic\n+           std::panic\n    = note: this error originates in a macro (in Nightly builds, run with -Z macro-backtrace for more info)\n \n error[E0433]: failed to resolve: use of undeclared type `Vec`"}, {"sha": "888fb913fb71c5ede67e4b72638a17a6274d9269", "filename": "src/test/ui/macros/macro-use-wrong-name.stderr", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/7581bb7c02f9960fba66add3e4c7c62874c60c7f/src%2Ftest%2Fui%2Fmacros%2Fmacro-use-wrong-name.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7581bb7c02f9960fba66add3e4c7c62874c60c7f/src%2Ftest%2Fui%2Fmacros%2Fmacro-use-wrong-name.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Fmacro-use-wrong-name.stderr?ref=7581bb7c02f9960fba66add3e4c7c62874c60c7f", "patch": "@@ -8,6 +8,9 @@ LL |     macro_two!();\n    |\n LL | macro_rules! macro_one { () => (\"one\") }\n    | ---------------------- similarly named macro `macro_one` defined here\n+   |\n+   = note: consider importing this macro:\n+           two_macros::macro_two\n \n error: aborting due to previous error\n "}, {"sha": "ced062269df68569795cb6fde437c35749c9a5b7", "filename": "src/test/ui/missing/missing-macro-use.stderr", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/7581bb7c02f9960fba66add3e4c7c62874c60c7f/src%2Ftest%2Fui%2Fmissing%2Fmissing-macro-use.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7581bb7c02f9960fba66add3e4c7c62874c60c7f/src%2Ftest%2Fui%2Fmissing%2Fmissing-macro-use.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmissing%2Fmissing-macro-use.stderr?ref=7581bb7c02f9960fba66add3e4c7c62874c60c7f", "patch": "@@ -3,6 +3,9 @@ error: cannot find macro `macro_two` in this scope\n    |\n LL |     macro_two!();\n    |     ^^^^^^^^^\n+   |\n+   = note: consider importing this macro:\n+           two_macros::macro_two\n \n error: aborting due to previous error\n "}]}