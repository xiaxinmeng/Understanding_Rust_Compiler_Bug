{"sha": "2059391eb2cebb798e2d713ea60bd99a8c389432", "node_id": "C_kwDOAAsO6NoAKDIwNTkzOTFlYjJjZWJiNzk4ZTJkNzEzZWE2MGJkOTlhOGMzODk0MzI", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-08-09T22:00:27Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-08-09T22:00:27Z"}, "message": "Rollup merge of #100072 - oToToT:patch-1, r=michaelwoerister\n\nlinker-plugin-lto.md: Correct the name of example c file\n\nThe final output is linked with `cmain.o`, but we use `main.o` in the example.\nThis patch changes the name to `cmain.c` and `cmain.o` as the \"C/C++ code as a dependency in Rust\" section.", "tree": {"sha": "15f2514bf3ed6725e0affcbe2628aafa1b952057", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/15f2514bf3ed6725e0affcbe2628aafa1b952057"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2059391eb2cebb798e2d713ea60bd99a8c389432", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJi8tj7CRBK7hj4Ov3rIwAAsMYIAEEVQfuwdFkffM8kBepLTpXX\n3Nw8x8Ryb/75nuxD3Zpjw5p8WYJZHsl0ifDZCC/94NyY2AyOzETb9P9dtx38Y9yR\nlDqjESfVA057Hz2bBr3eDlz17MY4JWmQMrze8dImmoL8ghTkSBxD+JR3muBZ2MU4\nj3NAoYIld03xu/ahCuuB5B2F4yGu3j6L458GPzBFcL2bqLC1wu+BlUnzBtopj8PK\nru6Mer7n2xf6tHTg6geEOVn+Vm5y19wnK8nC8vvenEZ65NkILN0BcyHNQFLZWAbP\nCXXg6V8+5Jk3iSKWHqrMumEsgNvVQRMjS8q9NmfdouBYfjpZqs+o6H1Tvsy67T8=\n=5a0B\n-----END PGP SIGNATURE-----\n", "payload": "tree 15f2514bf3ed6725e0affcbe2628aafa1b952057\nparent cf7a9ae8699033c5d2dd860dc0b2360851c49356\nparent e1eab5379e8b0122e3426674a44813e5644a4ada\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1660082427 +0200\ncommitter GitHub <noreply@github.com> 1660082427 +0200\n\nRollup merge of #100072 - oToToT:patch-1, r=michaelwoerister\n\nlinker-plugin-lto.md: Correct the name of example c file\n\nThe final output is linked with `cmain.o`, but we use `main.o` in the example.\nThis patch changes the name to `cmain.c` and `cmain.o` as the \"C/C++ code as a dependency in Rust\" section.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2059391eb2cebb798e2d713ea60bd99a8c389432", "html_url": "https://github.com/rust-lang/rust/commit/2059391eb2cebb798e2d713ea60bd99a8c389432", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2059391eb2cebb798e2d713ea60bd99a8c389432/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cf7a9ae8699033c5d2dd860dc0b2360851c49356", "url": "https://api.github.com/repos/rust-lang/rust/commits/cf7a9ae8699033c5d2dd860dc0b2360851c49356", "html_url": "https://github.com/rust-lang/rust/commit/cf7a9ae8699033c5d2dd860dc0b2360851c49356"}, {"sha": "e1eab5379e8b0122e3426674a44813e5644a4ada", "url": "https://api.github.com/repos/rust-lang/rust/commits/e1eab5379e8b0122e3426674a44813e5644a4ada", "html_url": "https://github.com/rust-lang/rust/commit/e1eab5379e8b0122e3426674a44813e5644a4ada"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "b1854b22a7cd694b92476d87ff9854dd547d7b96", "filename": "src/doc/rustc/src/linker-plugin-lto.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2059391eb2cebb798e2d713ea60bd99a8c389432/src%2Fdoc%2Frustc%2Fsrc%2Flinker-plugin-lto.md", "raw_url": "https://github.com/rust-lang/rust/raw/2059391eb2cebb798e2d713ea60bd99a8c389432/src%2Fdoc%2Frustc%2Fsrc%2Flinker-plugin-lto.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Frustc%2Fsrc%2Flinker-plugin-lto.md?ref=2059391eb2cebb798e2d713ea60bd99a8c389432", "patch": "@@ -30,7 +30,7 @@ Using `rustc` directly:\n # Compile the Rust staticlib\n rustc --crate-type=staticlib -Clinker-plugin-lto -Copt-level=2 ./lib.rs\n # Compile the C code with `-flto=thin`\n-clang -c -O2 -flto=thin -o main.o ./main.c\n+clang -c -O2 -flto=thin -o cmain.o ./cmain.c\n # Link everything, making sure that we use an appropriate linker\n clang -flto=thin -fuse-ld=lld -L . -l\"name-of-your-rust-lib\" -o main -O2 ./cmain.o\n ```\n@@ -41,7 +41,7 @@ Using `cargo`:\n # Compile the Rust staticlib\n RUSTFLAGS=\"-Clinker-plugin-lto\" cargo build --release\n # Compile the C code with `-flto=thin`\n-clang -c -O2 -flto=thin -o main.o ./main.c\n+clang -c -O2 -flto=thin -o cmain.o ./cmain.c\n # Link everything, making sure that we use an appropriate linker\n clang -flto=thin -fuse-ld=lld -L . -l\"name-of-your-rust-lib\" -o main -O2 ./cmain.o\n ```"}]}