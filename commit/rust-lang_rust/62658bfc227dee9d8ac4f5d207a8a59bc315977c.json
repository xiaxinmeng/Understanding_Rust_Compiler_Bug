{"sha": "62658bfc227dee9d8ac4f5d207a8a59bc315977c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYyNjU4YmZjMjI3ZGVlOWQ4YWM0ZjVkMjA3YThhNTliYzMxNTk3N2M=", "commit": {"author": {"name": "Jacob Hoffman-Andrews", "email": "github@hoffman-andrews.com", "date": "2021-06-13T05:19:26Z"}, "committer": {"name": "Jacob Hoffman-Andrews", "email": "github@hoffman-andrews.com", "date": "2021-06-16T17:24:59Z"}, "message": "Open trait implementations' toggles by default.\n\nThis makes it possible to use Ctrl-F to find methods defined in traits.", "tree": {"sha": "ef5c30c29d77e95cc03bdeadd6a46197743c0121", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ef5c30c29d77e95cc03bdeadd6a46197743c0121"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/62658bfc227dee9d8ac4f5d207a8a59bc315977c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/62658bfc227dee9d8ac4f5d207a8a59bc315977c", "html_url": "https://github.com/rust-lang/rust/commit/62658bfc227dee9d8ac4f5d207a8a59bc315977c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/62658bfc227dee9d8ac4f5d207a8a59bc315977c/comments", "author": {"login": "jsha", "id": 220205, "node_id": "MDQ6VXNlcjIyMDIwNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/220205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsha", "html_url": "https://github.com/jsha", "followers_url": "https://api.github.com/users/jsha/followers", "following_url": "https://api.github.com/users/jsha/following{/other_user}", "gists_url": "https://api.github.com/users/jsha/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsha/subscriptions", "organizations_url": "https://api.github.com/users/jsha/orgs", "repos_url": "https://api.github.com/users/jsha/repos", "events_url": "https://api.github.com/users/jsha/events{/privacy}", "received_events_url": "https://api.github.com/users/jsha/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jsha", "id": 220205, "node_id": "MDQ6VXNlcjIyMDIwNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/220205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsha", "html_url": "https://github.com/jsha", "followers_url": "https://api.github.com/users/jsha/followers", "following_url": "https://api.github.com/users/jsha/following{/other_user}", "gists_url": "https://api.github.com/users/jsha/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsha/subscriptions", "organizations_url": "https://api.github.com/users/jsha/orgs", "repos_url": "https://api.github.com/users/jsha/repos", "events_url": "https://api.github.com/users/jsha/events{/privacy}", "received_events_url": "https://api.github.com/users/jsha/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8daad743c4bb941536860b4df20111cb71b8c777", "url": "https://api.github.com/repos/rust-lang/rust/commits/8daad743c4bb941536860b4df20111cb71b8c777", "html_url": "https://github.com/rust-lang/rust/commit/8daad743c4bb941536860b4df20111cb71b8c777"}], "stats": {"total": 28, "additions": 14, "deletions": 14}, "files": [{"sha": "0efa014b12748d473a084d58b55cee1a93c2a81c", "filename": "src/librustdoc/html/render/mod.rs", "status": "modified", "additions": 2, "deletions": 7, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/62658bfc227dee9d8ac4f5d207a8a59bc315977c/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/62658bfc227dee9d8ac4f5d207a8a59bc315977c/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs?ref=62658bfc227dee9d8ac4f5d207a8a59bc315977c", "patch": "@@ -488,7 +488,7 @@ fn settings(root_path: &str, suffix: &str, themes: &[StylePath]) -> Result<Strin\n             .into(),\n         (\"auto-hide-large-items\", \"Auto-hide item contents for large items.\", true).into(),\n         (\"auto-hide-method-docs\", \"Auto-hide item methods' documentation\", false).into(),\n-        (\"auto-hide-trait-implementations\", \"Auto-hide trait implementation documentation\", true)\n+        (\"auto-hide-trait-implementations\", \"Auto-hide trait implementation documentation\", false)\n             .into(),\n         (\"auto-collapse-implementors\", \"Auto-hide implementors of a trait\", true).into(),\n         (\"go-to-only-result\", \"Directly go to item in search if there is only one result\", false)\n@@ -1543,15 +1543,10 @@ fn render_impl(\n         }\n     }\n     if render_mode == RenderMode::Normal {\n-        let is_implementing_trait = i.inner_impl().trait_.is_some();\n         let toggled = !impl_items.is_empty() || !default_impl_items.is_empty();\n         if toggled {\n             close_tags.insert_str(0, \"</details>\");\n-            if is_implementing_trait {\n-                write!(w, \"<details class=\\\"rustdoc-toggle implementors-toggle\\\">\");\n-            } else {\n-                write!(w, \"<details class=\\\"rustdoc-toggle implementors-toggle\\\" open>\");\n-            }\n+            write!(w, \"<details class=\\\"rustdoc-toggle implementors-toggle\\\" open>\");\n         }\n         if toggled {\n             write!(w, \"<summary>\")"}, {"sha": "e43a231d7570ba9f3be40069ff00dfb763b7cd4b", "filename": "src/librustdoc/html/static/main.js", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/62658bfc227dee9d8ac4f5d207a8a59bc315977c/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/62658bfc227dee9d8ac4f5d207a8a59bc315977c/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js?ref=62658bfc227dee9d8ac4f5d207a8a59bc315977c", "patch": "@@ -779,25 +779,25 @@ function hideThemeButtonState() {\n \n         var hideMethodDocs = getSettingValue(\"auto-hide-method-docs\") === \"true\";\n         var hideImplementors = getSettingValue(\"auto-collapse-implementors\") !== \"false\";\n-        var hideImplementations = getSettingValue(\"auto-hide-trait-implementations\") !== \"false\";\n+        var hideImplementations = getSettingValue(\"auto-hide-trait-implementations\") === \"true\";\n         var hideLargeItemContents = getSettingValue(\"auto-hide-large-items\") !== \"false\";\n \n-        function openImplementors(id) {\n+        function setImplementorsTogglesOpen(id, open) {\n             var list = document.getElementById(id);\n             if (list !== null) {\n                 onEachLazy(list.getElementsByClassName(\"implementors-toggle\"), function(e) {\n-                    e.open = true;\n+                    e.open = open;\n                 });\n             }\n         }\n \n-        if (!hideImplementations) {\n-            openImplementors(\"trait-implementations-list\");\n-            openImplementors(\"blanket-implementations-list\");\n+        if (hideImplementations) {\n+            setImplementorsTogglesOpen(\"trait-implementations-list\", false);\n+            setImplementorsTogglesOpen(\"blanket-implementations-list\", false);\n         }\n \n         if (!hideImplementors) {\n-            openImplementors(\"implementors-list\");\n+            setImplementorsTogglesOpen(\"implementors-list\", true);\n         }\n \n         onEachLazy(document.getElementsByClassName(\"rustdoc-toggle\"), function (e) {"}, {"sha": "96a5492edefcbf745a4e44e8bdcd3763afaa52cf", "filename": "src/test/rustdoc-gui/toggled-open-implementations.goml", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/62658bfc227dee9d8ac4f5d207a8a59bc315977c/src%2Ftest%2Frustdoc-gui%2Ftoggled-open-implementations.goml", "raw_url": "https://github.com/rust-lang/rust/raw/62658bfc227dee9d8ac4f5d207a8a59bc315977c/src%2Ftest%2Frustdoc-gui%2Ftoggled-open-implementations.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Ftoggled-open-implementations.goml?ref=62658bfc227dee9d8ac4f5d207a8a59bc315977c", "patch": "@@ -0,0 +1,5 @@\n+// This tests that the \"implementations\" section on struct/enum pages\n+// has all the implementations toggled open by default, so users can\n+// find method names in those implementations with Ctrl-F.\n+goto: file://|DOC_PATH|/test_docs/struct.Foo.html\n+assert: (\".rustdoc-toggle.implementors-toggle\", \"open\", \"\")"}]}