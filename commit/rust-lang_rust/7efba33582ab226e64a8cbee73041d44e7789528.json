{"sha": "7efba33582ab226e64a8cbee73041d44e7789528", "node_id": "C_kwDOAAsO6NoAKDdlZmJhMzM1ODJhYjIyNmU2NGE4Y2JlZTczMDQxZDQ0ZTc3ODk1Mjg", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-01-10T13:50:16Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-02-02T20:34:44Z"}, "message": "Unify storage getter and setter functions", "tree": {"sha": "5d10a15411d1d7b9157ad7dca1aaa4c0a820f414", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5d10a15411d1d7b9157ad7dca1aaa4c0a820f414"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7efba33582ab226e64a8cbee73041d44e7789528", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7efba33582ab226e64a8cbee73041d44e7789528", "html_url": "https://github.com/rust-lang/rust/commit/7efba33582ab226e64a8cbee73041d44e7789528", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7efba33582ab226e64a8cbee73041d44e7789528/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a00e130dae74a213338e2b095ec855156d8f3d8a", "url": "https://api.github.com/repos/rust-lang/rust/commits/a00e130dae74a213338e2b095ec855156d8f3d8a", "html_url": "https://github.com/rust-lang/rust/commit/a00e130dae74a213338e2b095ec855156d8f3d8a"}], "stats": {"total": 24, "additions": 12, "deletions": 12}, "files": [{"sha": "7052d2138b648c0d2fe9244924af2629fb55a01f", "filename": "src/librustdoc/html/static/js/search.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7efba33582ab226e64a8cbee73041d44e7789528/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsearch.js", "raw_url": "https://github.com/rust-lang/rust/raw/7efba33582ab226e64a8cbee73041d44e7789528/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsearch.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsearch.js?ref=7efba33582ab226e64a8cbee73041d44e7789528", "patch": "@@ -1619,7 +1619,7 @@ window.initSearch = function(rawSearchIndex) {\n     }\n \n     function updateCrate(ev) {\n-        updateLocalStorage(\"rustdoc-saved-filter-crate\", ev.target.value);\n+        updateLocalStorage(\"saved-filter-crate\", ev.target.value);\n         // In case you \"cut\" the entry from the search input, then change the crate filter\n         // before paste back the previous search, you get the old search results without\n         // the filter. To prevent this, we need to remove the previous results."}, {"sha": "139fa5c9a11a62e4db3586a604a1dd849c7a729c", "filename": "src/librustdoc/html/static/js/settings.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7efba33582ab226e64a8cbee73041d44e7789528/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsettings.js", "raw_url": "https://github.com/rust-lang/rust/raw/7efba33582ab226e64a8cbee73041d44e7789528/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsettings.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsettings.js?ref=7efba33582ab226e64a8cbee73041d44e7789528", "patch": "@@ -4,7 +4,7 @@\n \n (function () {\n     function changeSetting(settingName, value) {\n-        updateLocalStorage(\"rustdoc-\" + settingName, value);\n+        updateLocalStorage(settingName, value);\n \n         switch (settingName) {\n             case \"theme\":"}, {"sha": "90490acccfdb5714a79994d19f8582e5febe2476", "filename": "src/librustdoc/html/static/js/source-script.js", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/7efba33582ab226e64a8cbee73041d44e7789528/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsource-script.js", "raw_url": "https://github.com/rust-lang/rust/raw/7efba33582ab226e64a8cbee73041d44e7789528/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsource-script.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsource-script.js?ref=7efba33582ab226e64a8cbee73041d44e7789528", "patch": "@@ -82,11 +82,11 @@ function toggleSidebar() {\n     if (child.innerText === \">\") {\n         sidebar.classList.add(\"expanded\");\n         child.innerText = \"<\";\n-        updateLocalStorage(\"rustdoc-source-sidebar-show\", \"true\");\n+        updateLocalStorage(\"source-sidebar-show\", \"true\");\n     } else {\n         sidebar.classList.remove(\"expanded\");\n         child.innerText = \">\";\n-        updateLocalStorage(\"rustdoc-source-sidebar-show\", \"false\");\n+        updateLocalStorage(\"source-sidebar-show\", \"false\");\n     }\n }\n \n@@ -97,7 +97,7 @@ function createSidebarToggle() {\n \n     var inner = document.createElement(\"div\");\n \n-    if (getCurrentValue(\"rustdoc-source-sidebar-show\") === \"true\") {\n+    if (getCurrentValue(\"source-sidebar-show\") === \"true\") {\n         inner.innerText = \"<\";\n     } else {\n         inner.innerText = \">\";\n@@ -120,7 +120,7 @@ function createSourceSidebar() {\n \n     var sidebar = document.createElement(\"div\");\n     sidebar.id = \"source-sidebar\";\n-    if (getCurrentValue(\"rustdoc-source-sidebar-show\") !== \"true\") {\n+    if (getCurrentValue(\"source-sidebar-show\") !== \"true\") {\n         container.classList.remove(\"expanded\");\n     } else {\n         container.classList.add(\"expanded\");"}, {"sha": "ccf3d0a581a171e3fd4dc5e59fd981db5e1a3b25", "filename": "src/librustdoc/html/static/js/storage.js", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/7efba33582ab226e64a8cbee73041d44e7789528/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fstorage.js", "raw_url": "https://github.com/rust-lang/rust/raw/7efba33582ab226e64a8cbee73041d44e7789528/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fstorage.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fstorage.js?ref=7efba33582ab226e64a8cbee73041d44e7789528", "patch": "@@ -15,7 +15,7 @@ var settingsDataset = (function () {\n })();\n \n function getSettingValue(settingName) {\n-    var current = getCurrentValue('rustdoc-' + settingName);\n+    var current = getCurrentValue(settingName);\n     if (current !== null) {\n         return current;\n     }\n@@ -106,15 +106,15 @@ function hasOwnPropertyRustdoc(obj, property) {\n \n function updateLocalStorage(name, value) {\n     try {\n-        window.localStorage.setItem(name, value);\n+        window.localStorage.setItem(\"rustdoc-\" + name, value);\n     } catch(e) {\n         // localStorage is not accessible, do nothing\n     }\n }\n \n function getCurrentValue(name) {\n     try {\n-        return window.localStorage.getItem(name);\n+        return window.localStorage.getItem(\"rustdoc-\" + name);\n     } catch(e) {\n         return null;\n     }\n@@ -127,7 +127,7 @@ function switchTheme(styleElem, mainStyleElem, newTheme, saveTheme) {\n     // If this new value comes from a system setting or from the previously\n     // saved theme, no need to save it.\n     if (saveTheme) {\n-        updateLocalStorage(\"rustdoc-theme\", newTheme);\n+        updateLocalStorage(\"theme\", newTheme);\n     }\n \n     if (styleElem.href === newHref) {\n@@ -158,7 +158,7 @@ function useSystemTheme(value) {\n         value = true;\n     }\n \n-    updateLocalStorage(\"rustdoc-use-system-theme\", value);\n+    updateLocalStorage(\"use-system-theme\", value);\n \n     // update the toggle if we're on the settings page\n     var toggle = document.getElementById(\"use-system-theme\");\n@@ -231,7 +231,7 @@ if (getSettingValue(\"use-system-theme\") !== \"false\" && window.matchMedia) {\n     if (getSettingValue(\"use-system-theme\") === null\n         && getSettingValue(\"preferred-dark-theme\") === null\n         && darkThemes.indexOf(localStoredTheme) >= 0) {\n-        updateLocalStorage(\"rustdoc-preferred-dark-theme\", localStoredTheme);\n+        updateLocalStorage(\"preferred-dark-theme\", localStoredTheme);\n     }\n \n     // call the function to initialize the theme at least once!"}]}