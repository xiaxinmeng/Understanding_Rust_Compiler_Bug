{"sha": "616395f40b54d4340348f6b811d5fe2497761f30", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYxNjM5NWY0MGI1NGQ0MzQwMzQ4ZjZiODExZDVmZTI0OTc3NjFmMzA=", "commit": {"author": {"name": "Kampfkarren", "email": "boynedmaster@gmail.com", "date": "2018-12-13T17:34:16Z"}, "committer": {"name": "Kampfkarren", "email": "boynedmaster@gmail.com", "date": "2018-12-13T17:34:16Z"}, "message": "Add suggestion for replacement", "tree": {"sha": "8ae184787a7df143b399ee7ca7d6b5638be4992d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8ae184787a7df143b399ee7ca7d6b5638be4992d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/616395f40b54d4340348f6b811d5fe2497761f30", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/616395f40b54d4340348f6b811d5fe2497761f30", "html_url": "https://github.com/rust-lang/rust/commit/616395f40b54d4340348f6b811d5fe2497761f30", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/616395f40b54d4340348f6b811d5fe2497761f30/comments", "author": {"login": "Kampfkarren", "id": 3190756, "node_id": "MDQ6VXNlcjMxOTA3NTY=", "avatar_url": "https://avatars.githubusercontent.com/u/3190756?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kampfkarren", "html_url": "https://github.com/Kampfkarren", "followers_url": "https://api.github.com/users/Kampfkarren/followers", "following_url": "https://api.github.com/users/Kampfkarren/following{/other_user}", "gists_url": "https://api.github.com/users/Kampfkarren/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kampfkarren/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kampfkarren/subscriptions", "organizations_url": "https://api.github.com/users/Kampfkarren/orgs", "repos_url": "https://api.github.com/users/Kampfkarren/repos", "events_url": "https://api.github.com/users/Kampfkarren/events{/privacy}", "received_events_url": "https://api.github.com/users/Kampfkarren/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Kampfkarren", "id": 3190756, "node_id": "MDQ6VXNlcjMxOTA3NTY=", "avatar_url": "https://avatars.githubusercontent.com/u/3190756?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kampfkarren", "html_url": "https://github.com/Kampfkarren", "followers_url": "https://api.github.com/users/Kampfkarren/followers", "following_url": "https://api.github.com/users/Kampfkarren/following{/other_user}", "gists_url": "https://api.github.com/users/Kampfkarren/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kampfkarren/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kampfkarren/subscriptions", "organizations_url": "https://api.github.com/users/Kampfkarren/orgs", "repos_url": "https://api.github.com/users/Kampfkarren/repos", "events_url": "https://api.github.com/users/Kampfkarren/events{/privacy}", "received_events_url": "https://api.github.com/users/Kampfkarren/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e5ea5395b971930d12e8be36ef124fa7f115f296", "url": "https://api.github.com/repos/rust-lang/rust/commits/e5ea5395b971930d12e8be36ef124fa7f115f296", "html_url": "https://github.com/rust-lang/rust/commit/e5ea5395b971930d12e8be36ef124fa7f115f296"}], "stats": {"total": 13, "additions": 7, "deletions": 6}, "files": [{"sha": "5b652985b3df3e72d659b5004bae43d26f61f49a", "filename": "clippy_lints/src/types.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/616395f40b54d4340348f6b811d5fe2497761f30/clippy_lints%2Fsrc%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/616395f40b54d4340348f6b811d5fe2497761f30/clippy_lints%2Fsrc%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ftypes.rs?ref=616395f40b54d4340348f6b811d5fe2497761f30", "patch": "@@ -290,12 +290,14 @@ fn check_ty(cx: &LateContext<'_, '_>, ast_ty: &hir::Ty, is_local: bool) {\n                         let boxed_type = cx.tcx.type_of(def_id);\n                         if boxed_type.is_sized(cx.tcx.at(DUMMY_SP), cx.param_env);\n                         then {\n-                            span_help_and_lint(\n+                            span_lint_and_sugg(\n                                 cx,\n                                 VEC_BOX_SIZED,\n                                 ast_ty.span,\n-                                \"you seem to be trying to use `Vec<Box<T>>`, but T is Sized. Consider using just `Vec<T>`\",\n-                                \"`Vec<T>` is already on the heap, `Vec<Box<T>>` makes an extra allocation.\",\n+                                \"you seem to be trying to use `Vec<Box<T>>`, but T is Sized. `Vec<T>` is already on the heap, `Vec<Box<T>>` makes an extra allocation.\",\n+                                \"try\",\n+                                format!(\"Vec<{}>\", boxed_type),\n+                                Applicability::MachineApplicable\n                             )\n                         }\n                     }"}, {"sha": "ae7171fdb310d9303f9c583399b58e06842d56ca", "filename": "tests/ui/vec_box_sized.stderr", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/616395f40b54d4340348f6b811d5fe2497761f30/tests%2Fui%2Fvec_box_sized.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/616395f40b54d4340348f6b811d5fe2497761f30/tests%2Fui%2Fvec_box_sized.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fvec_box_sized.stderr?ref=616395f40b54d4340348f6b811d5fe2497761f30", "patch": "@@ -1,11 +1,10 @@\n-error: you seem to be trying to use `Vec<Box<T>>`, but T is Sized. Consider using just `Vec<T>`\n+error: you seem to be trying to use `Vec<Box<T>>`, but T is Sized. `Vec<T>` is already on the heap, `Vec<Box<T>>` makes an extra allocation.\n   --> $DIR/vec_box_sized.rs:10:14\n    |\n 10 |     sized_type: Vec<Box<SizedStruct>>,\n-   |                 ^^^^^^^^^^^^^^^^^^^^^\n+   |                 ^^^^^^^^^^^^^^^^^^^^^ help: try: `Vec<SizedStruct>`\n    |\n    = note: `-D clippy::vec-box-sized` implied by `-D warnings`\n-   = help: `Vec<T>` is already on the heap, `Vec<Box<T>>` makes an extra allocation.\n \n error: aborting due to previous error\n "}]}