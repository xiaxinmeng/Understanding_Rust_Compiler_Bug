{"sha": "d1988a17f4ceb90bcdaed79072c4b7f647c86854", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQxOTg4YTE3ZjRjZWI5MGJjZGFlZDc5MDcyYzRiN2Y2NDdjODY4NTQ=", "commit": {"author": {"name": "arsdragonfly", "email": "arsdragonfly@gmail.com", "date": "2019-09-27T20:17:02Z"}, "committer": {"name": "arsdragonfly", "email": "arsdragonfly@gmail.com", "date": "2019-09-27T20:17:02Z"}, "message": "Support the new deprecated tag", "tree": {"sha": "a23272cc4a284ffe974af3f58ae274ac65e1805c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a23272cc4a284ffe974af3f58ae274ac65e1805c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d1988a17f4ceb90bcdaed79072c4b7f647c86854", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d1988a17f4ceb90bcdaed79072c4b7f647c86854", "html_url": "https://github.com/rust-lang/rust/commit/d1988a17f4ceb90bcdaed79072c4b7f647c86854", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d1988a17f4ceb90bcdaed79072c4b7f647c86854/comments", "author": {"login": "arsdragonfly", "id": 4067473, "node_id": "MDQ6VXNlcjQwNjc0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/4067473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arsdragonfly", "html_url": "https://github.com/arsdragonfly", "followers_url": "https://api.github.com/users/arsdragonfly/followers", "following_url": "https://api.github.com/users/arsdragonfly/following{/other_user}", "gists_url": "https://api.github.com/users/arsdragonfly/gists{/gist_id}", "starred_url": "https://api.github.com/users/arsdragonfly/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arsdragonfly/subscriptions", "organizations_url": "https://api.github.com/users/arsdragonfly/orgs", "repos_url": "https://api.github.com/users/arsdragonfly/repos", "events_url": "https://api.github.com/users/arsdragonfly/events{/privacy}", "received_events_url": "https://api.github.com/users/arsdragonfly/received_events", "type": "User", "site_admin": false}, "committer": {"login": "arsdragonfly", "id": 4067473, "node_id": "MDQ6VXNlcjQwNjc0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/4067473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arsdragonfly", "html_url": "https://github.com/arsdragonfly", "followers_url": "https://api.github.com/users/arsdragonfly/followers", "following_url": "https://api.github.com/users/arsdragonfly/following{/other_user}", "gists_url": "https://api.github.com/users/arsdragonfly/gists{/gist_id}", "starred_url": "https://api.github.com/users/arsdragonfly/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arsdragonfly/subscriptions", "organizations_url": "https://api.github.com/users/arsdragonfly/orgs", "repos_url": "https://api.github.com/users/arsdragonfly/repos", "events_url": "https://api.github.com/users/arsdragonfly/events{/privacy}", "received_events_url": "https://api.github.com/users/arsdragonfly/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fc218ec0d04577e33db509e956a044293c12ea67", "url": "https://api.github.com/repos/rust-lang/rust/commits/fc218ec0d04577e33db509e956a044293c12ea67", "html_url": "https://github.com/rust-lang/rust/commit/fc218ec0d04577e33db509e956a044293c12ea67"}], "stats": {"total": 21, "additions": 20, "deletions": 1}, "files": [{"sha": "a66b52313e9dca7f669489401b9c6f8011547e44", "filename": "editors/code/src/utils/diagnostics/rust.ts", "status": "modified", "additions": 20, "deletions": 1, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/d1988a17f4ceb90bcdaed79072c4b7f647c86854/editors%2Fcode%2Fsrc%2Futils%2Fdiagnostics%2Frust.ts", "raw_url": "https://github.com/rust-lang/rust/raw/d1988a17f4ceb90bcdaed79072c4b7f647c86854/editors%2Fcode%2Fsrc%2Futils%2Fdiagnostics%2Frust.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Futils%2Fdiagnostics%2Frust.ts?ref=d1988a17f4ceb90bcdaed79072c4b7f647c86854", "patch": "@@ -111,6 +111,19 @@ function isUnusedOrUnnecessary(rd: RustDiagnostic): boolean {\n     ].includes(rd.code.code);\n }\n \n+/**\n+ * Determines if diagnostic is related to deprecated code\n+ */\n+function isDeprecated(rd: RustDiagnostic): boolean {\n+    if (!rd.code) {\n+        return false;\n+    }\n+\n+    return [\n+        'deprecated',\n+    ].includes(rd.code.code);\n+}\n+\n /**\n  * Converts a Rust child diagnostic to a VsCode related information\n  *\n@@ -233,8 +246,14 @@ export function mapRustDiagnosticToVsCode(\n         vd.message += `\\n${primarySpanLabel}`;\n     }\n \n+    vd.tags = []\n+\n     if (isUnusedOrUnnecessary(rd)) {\n-        vd.tags = [vscode.DiagnosticTag.Unnecessary];\n+        vd.tags.push(vscode.DiagnosticTag.Unnecessary);\n+    }\n+\n+    if (isDeprecated(rd)) {\n+        vd.tags.push(vscode.DiagnosticTag.Deprecated);\n     }\n \n     return {"}]}