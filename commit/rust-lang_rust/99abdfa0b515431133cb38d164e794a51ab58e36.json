{"sha": "99abdfa0b515431133cb38d164e794a51ab58e36", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk5YWJkZmEwYjUxNTQzMTEzM2NiMzhkMTY0ZTc5NGE1MWFiNThlMzY=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-07-01T22:33:54Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-07-01T22:33:54Z"}, "message": "Auto merge of #62279 - pietroalbini:fix-azure-crlf, r=alexcrichton\n\nci: explicitly disable CRLF conversion on Windows\n\nThe Azure image enables CRLF conversion on Windows builders, but that caused regressions both in our test suite (the miri test suite broke) and in the ecosystem, since we started shipping install scripts with CRLF endings instead of the old LF. The [Godbolt Compiler Explorer](https://godbolt.org/) is one such case of breakage.\n\nThis adds a step to the build explicitly disabling the conversion before the repository is checked out.\n\nr? @alexcrichton\ncc @gnzlbg", "tree": {"sha": "860d2584a4f12cefc3eed32dbdca4004c39f15a4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/860d2584a4f12cefc3eed32dbdca4004c39f15a4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/99abdfa0b515431133cb38d164e794a51ab58e36", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/99abdfa0b515431133cb38d164e794a51ab58e36", "html_url": "https://github.com/rust-lang/rust/commit/99abdfa0b515431133cb38d164e794a51ab58e36", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/99abdfa0b515431133cb38d164e794a51ab58e36/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "17e62f77f954bed97aae839624bfd6dd68342daf", "url": "https://api.github.com/repos/rust-lang/rust/commits/17e62f77f954bed97aae839624bfd6dd68342daf", "html_url": "https://github.com/rust-lang/rust/commit/17e62f77f954bed97aae839624bfd6dd68342daf"}, {"sha": "239a404cae1bebbd0fe6e01688e8cf94be3a6c52", "url": "https://api.github.com/repos/rust-lang/rust/commits/239a404cae1bebbd0fe6e01688e8cf94be3a6c52", "html_url": "https://github.com/rust-lang/rust/commit/239a404cae1bebbd0fe6e01688e8cf94be3a6c52"}], "stats": {"total": 7, "additions": 7, "deletions": 0}, "files": [{"sha": "1ece3ceb088a0a544030d15af62aa483b2541172", "filename": ".azure-pipelines/steps/run.yml", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/99abdfa0b515431133cb38d164e794a51ab58e36/.azure-pipelines%2Fsteps%2Frun.yml", "raw_url": "https://github.com/rust-lang/rust/raw/99abdfa0b515431133cb38d164e794a51ab58e36/.azure-pipelines%2Fsteps%2Frun.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.azure-pipelines%2Fsteps%2Frun.yml?ref=99abdfa0b515431133cb38d164e794a51ab58e36", "patch": "@@ -8,6 +8,13 @@\n \n steps:\n \n+# Disable automatic line ending conversion, which is enabled by default on\n+# Azure's Windows image. Having the conversion enabled caused regressions both\n+# in our test suite (it broke miri tests) and in the ecosystem, since we\n+# started shipping install scripts with CRLF endings instead of the old LF.\n+- bash: git config --global core.autocrlf false\n+  displayName: \"Disable git automatic line ending conversion\"\n+\n - checkout: self\n   fetchDepth: 2\n "}]}