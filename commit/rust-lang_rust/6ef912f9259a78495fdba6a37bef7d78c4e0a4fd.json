{"sha": "6ef912f9259a78495fdba6a37bef7d78c4e0a4fd", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZlZjkxMmY5MjU5YTc4NDk1ZmRiYTZhMzdiZWY3ZDc4YzRlMGE0ZmQ=", "commit": {"author": {"name": "Veetaha", "email": "gerzoh1@gmail.com", "date": "2020-02-08T18:18:33Z"}, "committer": {"name": "Veetaha", "email": "gerzoh1@gmail.com", "date": "2020-02-08T18:18:33Z"}, "message": "vscode: converted fetchLatestArtifactMetadata params to positional, added docs", "tree": {"sha": "10a227d1ad6a69d1ed4ccb6bd5bd4cc5814857ed", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/10a227d1ad6a69d1ed4ccb6bd5bd4cc5814857ed"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6ef912f9259a78495fdba6a37bef7d78c4e0a4fd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6ef912f9259a78495fdba6a37bef7d78c4e0a4fd", "html_url": "https://github.com/rust-lang/rust/commit/6ef912f9259a78495fdba6a37bef7d78c4e0a4fd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6ef912f9259a78495fdba6a37bef7d78c4e0a4fd/comments", "author": null, "committer": null, "parents": [{"sha": "f7ef72db64e75dadf6f7cae9d739a0a6e8d8f4b4", "url": "https://api.github.com/repos/rust-lang/rust/commits/f7ef72db64e75dadf6f7cae9d739a0a6e8d8f4b4", "html_url": "https://github.com/rust-lang/rust/commit/f7ef72db64e75dadf6f7cae9d739a0a6e8d8f4b4"}], "stats": {"total": 20, "additions": 10, "deletions": 10}, "files": [{"sha": "cda955af2097326aa3f22cae89e61576faa93038", "filename": "editors/code/src/installation/fetch_latest_artifact_metadata.ts", "status": "modified", "additions": 10, "deletions": 10, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/6ef912f9259a78495fdba6a37bef7d78c4e0a4fd/editors%2Fcode%2Fsrc%2Finstallation%2Ffetch_latest_artifact_metadata.ts", "raw_url": "https://github.com/rust-lang/rust/raw/6ef912f9259a78495fdba6a37bef7d78c4e0a4fd/editors%2Fcode%2Fsrc%2Finstallation%2Ffetch_latest_artifact_metadata.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Finstallation%2Ffetch_latest_artifact_metadata.ts?ref=6ef912f9259a78495fdba6a37bef7d78c4e0a4fd", "patch": "@@ -3,29 +3,28 @@ import { GithubRepo, ArtifactMetadata } from \"./interfaces\";\n \n const GITHUB_API_ENDPOINT_URL = \"https://api.github.com\";\n \n-export interface FetchLatestArtifactMetadataOpts {\n-    repo: GithubRepo;\n-    artifactFileName: string;\n-}\n-\n+/**\n+ * Fetches the latest release from GitHub `repo` and returns metadata about\n+ * `artifactFileName` shipped with this release or `null` if no such artifact was published.\n+ */\n export async function fetchLatestArtifactMetadata(\n-    opts: FetchLatestArtifactMetadataOpts\n+    repo: GithubRepo, artifactFileName: string\n ): Promise<null | ArtifactMetadata> {\n \n-    const repoOwner = encodeURIComponent(opts.repo.owner);\n-    const repoName  = encodeURIComponent(opts.repo.name);\n+    const repoOwner = encodeURIComponent(repo.owner);\n+    const repoName  = encodeURIComponent(repo.name);\n \n     const apiEndpointPath = `/repos/${repoOwner}/${repoName}/releases/latest`;\n     const requestUrl = GITHUB_API_ENDPOINT_URL + apiEndpointPath;\n \n-    // We skip runtime type checks for simplicity (here we cast from `any` to `Release`)\n+    // We skip runtime type checks for simplicity (here we cast from `any` to `GithubRelease`)\n \n     const response: GithubRelease = await fetch(requestUrl, {\n             headers: { Accept: \"application/vnd.github.v3+json\" }\n         })\n         .then(res => res.json());\n \n-    const artifact = response.assets.find(artifact => artifact.name === opts.artifactFileName);\n+    const artifact = response.assets.find(artifact => artifact.name === artifactFileName);\n \n     return !artifact ? null : {\n         releaseName: response.name,\n@@ -36,6 +35,7 @@ export async function fetchLatestArtifactMetadata(\n     interface GithubRelease {\n         name: string;\n         assets: Array<{\n+            name: string;\n             browser_download_url: string;\n \n             [noise: string]: unknown;"}]}