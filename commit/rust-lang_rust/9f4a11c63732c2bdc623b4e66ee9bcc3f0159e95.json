{"sha": "9f4a11c63732c2bdc623b4e66ee9bcc3f0159e95", "node_id": "MDY6Q29tbWl0NzI0NzEyOjlmNGExMWM2MzczMmMyYmRjNjIzYjRlNjZlZTliY2MzZjAxNTllOTU=", "commit": {"author": {"name": "Taiki Endo", "email": "te316e89@gmail.com", "date": "2019-02-06T14:56:39Z"}, "committer": {"name": "Taiki Endo", "email": "te316e89@gmail.com", "date": "2019-02-06T14:56:39Z"}, "message": "librustc_plugin => 2018", "tree": {"sha": "fae795163e806994e4d089faf667ecf55835dbb6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fae795163e806994e4d089faf667ecf55835dbb6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9f4a11c63732c2bdc623b4e66ee9bcc3f0159e95", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9f4a11c63732c2bdc623b4e66ee9bcc3f0159e95", "html_url": "https://github.com/rust-lang/rust/commit/9f4a11c63732c2bdc623b4e66ee9bcc3f0159e95", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9f4a11c63732c2bdc623b4e66ee9bcc3f0159e95/comments", "author": {"login": "taiki-e", "id": 43724913, "node_id": "MDQ6VXNlcjQzNzI0OTEz", "avatar_url": "https://avatars.githubusercontent.com/u/43724913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/taiki-e", "html_url": "https://github.com/taiki-e", "followers_url": "https://api.github.com/users/taiki-e/followers", "following_url": "https://api.github.com/users/taiki-e/following{/other_user}", "gists_url": "https://api.github.com/users/taiki-e/gists{/gist_id}", "starred_url": "https://api.github.com/users/taiki-e/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/taiki-e/subscriptions", "organizations_url": "https://api.github.com/users/taiki-e/orgs", "repos_url": "https://api.github.com/users/taiki-e/repos", "events_url": "https://api.github.com/users/taiki-e/events{/privacy}", "received_events_url": "https://api.github.com/users/taiki-e/received_events", "type": "User", "site_admin": false}, "committer": {"login": "taiki-e", "id": 43724913, "node_id": "MDQ6VXNlcjQzNzI0OTEz", "avatar_url": "https://avatars.githubusercontent.com/u/43724913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/taiki-e", "html_url": "https://github.com/taiki-e", "followers_url": "https://api.github.com/users/taiki-e/followers", "following_url": "https://api.github.com/users/taiki-e/following{/other_user}", "gists_url": "https://api.github.com/users/taiki-e/gists{/gist_id}", "starred_url": "https://api.github.com/users/taiki-e/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/taiki-e/subscriptions", "organizations_url": "https://api.github.com/users/taiki-e/orgs", "repos_url": "https://api.github.com/users/taiki-e/repos", "events_url": "https://api.github.com/users/taiki-e/events{/privacy}", "received_events_url": "https://api.github.com/users/taiki-e/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b139669f374eb5024a50eb13f116ff763b1c5935", "url": "https://api.github.com/repos/rust-lang/rust/commits/b139669f374eb5024a50eb13f116ff763b1c5935", "html_url": "https://github.com/rust-lang/rust/commit/b139669f374eb5024a50eb13f116ff763b1c5935"}], "stats": {"total": 18, "additions": 8, "deletions": 10}, "files": [{"sha": "5e23aa0d7f74e5ad4e4585470c38728ad4583878", "filename": "src/librustc_plugin/Cargo.toml", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/9f4a11c63732c2bdc623b4e66ee9bcc3f0159e95/src%2Flibrustc_plugin%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/9f4a11c63732c2bdc623b4e66ee9bcc3f0159e95/src%2Flibrustc_plugin%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_plugin%2FCargo.toml?ref=9f4a11c63732c2bdc623b4e66ee9bcc3f0159e95", "patch": "@@ -3,6 +3,7 @@ authors = [\"The Rust Project Developers\"]\n name = \"rustc_plugin\"\n version = \"0.0.0\"\n build = false\n+edition = \"2018\"\n \n [lib]\n name = \"rustc_plugin\""}, {"sha": "68462bd83ef60dbd09f46cb338f677d73ed5f040", "filename": "src/librustc_plugin/diagnostics.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f4a11c63732c2bdc623b4e66ee9bcc3f0159e95/src%2Flibrustc_plugin%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f4a11c63732c2bdc623b4e66ee9bcc3f0159e95/src%2Flibrustc_plugin%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_plugin%2Fdiagnostics.rs?ref=9f4a11c63732c2bdc623b4e66ee9bcc3f0159e95", "patch": "@@ -1,5 +1,7 @@\n #![allow(non_snake_case)]\n \n+use syntax::{register_diagnostic, register_diagnostics, register_long_diagnostics};\n+\n register_long_diagnostics! {\n \n }"}, {"sha": "9a31bddc1ededfca1a31d33cd81a44b92c34e5f1", "filename": "src/librustc_plugin/lib.rs", "status": "modified", "additions": 2, "deletions": 8, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/9f4a11c63732c2bdc623b4e66ee9bcc3f0159e95/src%2Flibrustc_plugin%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f4a11c63732c2bdc623b4e66ee9bcc3f0159e95/src%2Flibrustc_plugin%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_plugin%2Flib.rs?ref=9f4a11c63732c2bdc623b4e66ee9bcc3f0159e95", "patch": "@@ -54,19 +54,13 @@\n        html_favicon_url = \"https://doc.rust-lang.org/favicon.ico\",\n        html_root_url = \"https://doc.rust-lang.org/nightly/\")]\n \n-#![feature(nll)]\n #![feature(rustc_diagnostic_macros)]\n \n #![recursion_limit=\"256\"]\n \n-#[macro_use] extern crate syntax;\n+#![deny(rust_2018_idioms)]\n \n-extern crate rustc;\n-extern crate rustc_metadata;\n-extern crate syntax_pos;\n-extern crate rustc_errors as errors;\n-\n-pub use self::registry::Registry;\n+pub use registry::Registry;\n \n mod diagnostics;\n pub mod registry;"}, {"sha": "1b88cf05f40d5c52f99e3c18fd5b5a2e48e22ea6", "filename": "src/librustc_plugin/load.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/9f4a11c63732c2bdc623b4e66ee9bcc3f0159e95/src%2Flibrustc_plugin%2Fload.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f4a11c63732c2bdc623b4e66ee9bcc3f0159e95/src%2Flibrustc_plugin%2Fload.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_plugin%2Fload.rs?ref=9f4a11c63732c2bdc623b4e66ee9bcc3f0159e95", "patch": "@@ -3,18 +3,19 @@\n use rustc::session::Session;\n use rustc_metadata::creader::CrateLoader;\n use rustc_metadata::cstore::CStore;\n-use registry::Registry;\n+use crate::registry::Registry;\n \n use std::borrow::ToOwned;\n use std::env;\n use std::mem;\n use std::path::PathBuf;\n use syntax::ast;\n+use syntax::span_err;\n use syntax_pos::{Span, DUMMY_SP};\n \n /// Pointer to a registrar function.\n pub type PluginRegistrarFun =\n-    fn(&mut Registry);\n+    fn(&mut Registry<'_>);\n \n pub struct PluginRegistrar {\n     pub fun: PluginRegistrarFun,"}]}