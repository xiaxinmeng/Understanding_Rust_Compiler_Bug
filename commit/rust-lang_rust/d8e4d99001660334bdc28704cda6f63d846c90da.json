{"sha": "d8e4d99001660334bdc28704cda6f63d846c90da", "node_id": "C_kwDOAAsO6NoAKGQ4ZTRkOTkwMDE2NjAzMzRiZGMyODcwNGNkYTZmNjNkODQ2YzkwZGE", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2023-02-10T14:28:48Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-02-10T14:28:48Z"}, "message": "Rollup merge of #107839 - RalfJung:rustc-log, r=oli-obk\n\navoid duplicating the RUSTC_LOG env var name\n\nWe also have the env var name here:\nhttps://github.com/rust-lang/rust/blob/c40919b7a75f93ed7ef040361e82c656d246d41e/compiler/rustc_driver_impl/src/lib.rs#L1247-L1251\nRedundantly having this name twice doesn't seem great. Looks like `rustc_log::init_rustc_env_logger` is dead code anyway.\n\nr? `@oli-obk`", "tree": {"sha": "0402d04d200b1870686c9e1067124ddab5133875", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0402d04d200b1870686c9e1067124ddab5133875"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d8e4d99001660334bdc28704cda6f63d846c90da", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJj5lSgCRBK7hj4Ov3rIwAAO1EIAHVg8RM3sph9qIysQf5koYIQ\njmV656w/y1ZifHcm8aEMzg4fo7iO+5LwbMHI7n5PNT5Rk5nigpsATfo5ihKO9Zr+\nTIQvSuyxpbreeDH5DEmvn6jPpiYQsg3uyVdvtuS8IpcKHD8zcZfVstyTS9bPajj2\nZTlw2FVUpfXttEg2tS00U1p4lzu/q6g7+zbgd0qa34BuFJRVToclKaOkYtnb1TRV\n/x3543MloEzz4Ra1tWVbq4DZ7DcDTY3Fnc50L83Q5jeQ97Gp2sL6JbjFwGAx3r3R\n+fziK4Ye7rpMp533cT6MnUZlv2t2J3VpCwXZqo5cnDGPkmC2HGFlKSUyItnYeDk=\n=HxCz\n-----END PGP SIGNATURE-----\n", "payload": "tree 0402d04d200b1870686c9e1067124ddab5133875\nparent d494cd3eab38c319985e38f5fd43465391fa2bbe\nparent 623ed8e481204b2ed3876084f765ac4fb59798b5\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1676039328 +0100\ncommitter GitHub <noreply@github.com> 1676039328 +0100\n\nRollup merge of #107839 - RalfJung:rustc-log, r=oli-obk\n\navoid duplicating the RUSTC_LOG env var name\n\nWe also have the env var name here:\nhttps://github.com/rust-lang/rust/blob/c40919b7a75f93ed7ef040361e82c656d246d41e/compiler/rustc_driver_impl/src/lib.rs#L1247-L1251\nRedundantly having this name twice doesn't seem great. Looks like `rustc_log::init_rustc_env_logger` is dead code anyway.\n\nr? `@oli-obk`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d8e4d99001660334bdc28704cda6f63d846c90da", "html_url": "https://github.com/rust-lang/rust/commit/d8e4d99001660334bdc28704cda6f63d846c90da", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d8e4d99001660334bdc28704cda6f63d846c90da/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d494cd3eab38c319985e38f5fd43465391fa2bbe", "url": "https://api.github.com/repos/rust-lang/rust/commits/d494cd3eab38c319985e38f5fd43465391fa2bbe", "html_url": "https://github.com/rust-lang/rust/commit/d494cd3eab38c319985e38f5fd43465391fa2bbe"}, {"sha": "623ed8e481204b2ed3876084f765ac4fb59798b5", "url": "https://api.github.com/repos/rust-lang/rust/commits/623ed8e481204b2ed3876084f765ac4fb59798b5", "html_url": "https://github.com/rust-lang/rust/commit/623ed8e481204b2ed3876084f765ac4fb59798b5"}], "stats": {"total": 12, "additions": 3, "deletions": 9}, "files": [{"sha": "de26fd61e4d60d3c36c674a89453e21c9f98671c", "filename": "compiler/rustc_log/src/lib.rs", "status": "modified", "additions": 3, "deletions": 9, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/d8e4d99001660334bdc28704cda6f63d846c90da/compiler%2Frustc_log%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d8e4d99001660334bdc28704cda6f63d846c90da/compiler%2Frustc_log%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_log%2Fsrc%2Flib.rs?ref=d8e4d99001660334bdc28704cda6f63d846c90da", "patch": "@@ -14,7 +14,7 @@\n //!\n //! ```\n //! fn main() {\n-//!     rustc_log::init_rustc_env_logger().unwrap();\n+//!     rustc_log::init_env_logger(\"LOG\").unwrap();\n //!\n //!     let edition = rustc_span::edition::Edition::Edition2021;\n //!     rustc_span::create_session_globals_then(edition, || {\n@@ -23,9 +23,9 @@\n //! }\n //! ```\n //!\n-//! Now `RUSTC_LOG=debug cargo run` will run your minimal main.rs and show\n+//! Now `LOG=debug cargo run` will run your minimal main.rs and show\n //! rustc's debug logging. In a workflow like this, one might also add\n-//! `std::env::set_var(\"RUSTC_LOG\", \"debug\")` to the top of main so that `cargo\n+//! `std::env::set_var(\"LOG\", \"debug\")` to the top of main so that `cargo\n //! run` by itself is sufficient to get logs.\n //!\n //! The reason rustc_log is a tiny separate crate, as opposed to exposing the\n@@ -53,12 +53,6 @@ use tracing_subscriber::fmt::{\n };\n use tracing_subscriber::layer::SubscriberExt;\n \n-pub fn init_rustc_env_logger() -> Result<(), Error> {\n-    init_env_logger(\"RUSTC_LOG\")\n-}\n-\n-/// In contrast to `init_rustc_env_logger` this allows you to choose an env var\n-/// other than `RUSTC_LOG`.\n pub fn init_env_logger(env: &str) -> Result<(), Error> {\n     let filter = match env::var(env) {\n         Ok(env) => EnvFilter::new(env),"}]}