{"sha": "032358bd30d2eaa31cdec4a40d8a4703fbec22cc", "node_id": "C_kwDOAAsO6NoAKDAzMjM1OGJkMzBkMmVhYTMxY2RlYzRhNDBkOGE0NzAzZmJlYzIyY2M", "commit": {"author": {"name": "Dylan DPC", "email": "99973273+Dylan-DPC@users.noreply.github.com", "date": "2022-04-13T15:35:33Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-04-13T15:35:33Z"}, "message": "Rollup merge of #95962 - sourcefrog:doc-direntry, r=Dylan-DPC\n\nDocument that DirEntry holds the directory open\n\nI had a bug where holding onto DirEntry structs caused file descriptor exhaustion, and thought it would be good to document this.", "tree": {"sha": "ac0bec5f827ae4b6d71528ca7d0585020e6d61ce", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ac0bec5f827ae4b6d71528ca7d0585020e6d61ce"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/032358bd30d2eaa31cdec4a40d8a4703fbec22cc", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJiVu3GCRBK7hj4Ov3rIwAAT+wIAD1hqB8CT7eMRI7EUIfjPilT\n06V6apSaxdwHzDR2tZQC1/ZsqvGlKOO5CKHOUFJXW0aHphhirh/reZTUtZzvZ5uR\nHML2pcNWzKW7yMGCVvNCbWr/46AhOOkv+aofpBhtK6susBkNGuVCOtYrsWz3G6B/\n3KLbYRAJ44qIKOV4UiLDFSanRpMuHqecKZtja7JDs8JGUdC2wdL+IvW+9yjSf/WL\n5JUAwBpDP4ZWzMxO8glBPQuYWHiuWaHBmyw3sDvhmVRHTeO3My8sSwfm6SlFYhK4\n96JaYf81ybbJ37hvUUYGgMaSsovR4sunS3xW0qNCJ6WlsRXR0r0VyjL54GTHDVM=\n=9Zmw\n-----END PGP SIGNATURE-----\n", "payload": "tree ac0bec5f827ae4b6d71528ca7d0585020e6d61ce\nparent d449a63e93c65ec5272e87e4532ec1992d4f2dab\nparent 7cdef0876deb12e3a5a69c9dec2b386fa61a4384\nauthor Dylan DPC <99973273+Dylan-DPC@users.noreply.github.com> 1649864133 +0200\ncommitter GitHub <noreply@github.com> 1649864133 +0200\n\nRollup merge of #95962 - sourcefrog:doc-direntry, r=Dylan-DPC\n\nDocument that DirEntry holds the directory open\n\nI had a bug where holding onto DirEntry structs caused file descriptor exhaustion, and thought it would be good to document this.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/032358bd30d2eaa31cdec4a40d8a4703fbec22cc", "html_url": "https://github.com/rust-lang/rust/commit/032358bd30d2eaa31cdec4a40d8a4703fbec22cc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/032358bd30d2eaa31cdec4a40d8a4703fbec22cc/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d449a63e93c65ec5272e87e4532ec1992d4f2dab", "url": "https://api.github.com/repos/rust-lang/rust/commits/d449a63e93c65ec5272e87e4532ec1992d4f2dab", "html_url": "https://github.com/rust-lang/rust/commit/d449a63e93c65ec5272e87e4532ec1992d4f2dab"}, {"sha": "7cdef0876deb12e3a5a69c9dec2b386fa61a4384", "url": "https://api.github.com/repos/rust-lang/rust/commits/7cdef0876deb12e3a5a69c9dec2b386fa61a4384", "html_url": "https://github.com/rust-lang/rust/commit/7cdef0876deb12e3a5a69c9dec2b386fa61a4384"}], "stats": {"total": 10, "additions": 10, "deletions": 0}, "files": [{"sha": "433b4d530136b282a9e84d870039c5b1b07eb3de", "filename": "library/std/src/fs.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/032358bd30d2eaa31cdec4a40d8a4703fbec22cc/library%2Fstd%2Fsrc%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/032358bd30d2eaa31cdec4a40d8a4703fbec22cc/library%2Fstd%2Fsrc%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Ffs.rs?ref=032358bd30d2eaa31cdec4a40d8a4703fbec22cc", "patch": "@@ -132,6 +132,16 @@ pub struct ReadDir(fs_imp::ReadDir);\n /// An instance of `DirEntry` represents an entry inside of a directory on the\n /// filesystem. Each entry can be inspected via methods to learn about the full\n /// path or possibly other metadata through per-platform extension traits.\n+///\n+/// # Platform-specific behavior\n+///\n+/// On Unix, the `DirEntry` struct contains an internal reference to the open\n+/// directory. Holding `DirEntry` objects will consume a file handle even\n+/// after the `ReadDir` iterator is dropped.\n+///\n+/// Note that this [may change in the future][changes].\n+///\n+/// [changes]: io#platform-specific-behavior\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n pub struct DirEntry(fs_imp::DirEntry);\n "}]}