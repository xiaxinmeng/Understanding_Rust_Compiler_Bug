{"sha": "c92f51974b3f2ef99d3388d7a4d44fbb81433626", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM5MmY1MTk3NGIzZjJlZjk5ZDMzODhkN2E0ZDQ0ZmJiODE0MzM2MjY=", "commit": {"author": {"name": "klutzy", "email": "klutzytheklutzy@gmail.com", "date": "2014-04-28T09:09:20Z"}, "committer": {"name": "klutzy", "email": "klutzytheklutzy@gmail.com", "date": "2014-05-10T14:37:55Z"}, "message": "librand: Revise crypto part of document\n\nThis patch adds document which explains when to use `OSRng` in\ncryptographic context, and explains why we use `/dev/urandom` instead\nof `/dev/random`.", "tree": {"sha": "bbbb7475bc0bf92da79fbefa764c7451df5df8f5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bbbb7475bc0bf92da79fbefa764c7451df5df8f5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c92f51974b3f2ef99d3388d7a4d44fbb81433626", "comment_count": 13, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c92f51974b3f2ef99d3388d7a4d44fbb81433626", "html_url": "https://github.com/rust-lang/rust/commit/c92f51974b3f2ef99d3388d7a4d44fbb81433626", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c92f51974b3f2ef99d3388d7a4d44fbb81433626/comments", "author": {"login": "klutzy", "id": 1589355, "node_id": "MDQ6VXNlcjE1ODkzNTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1589355?v=4", "gravatar_id": "", "url": "https://api.github.com/users/klutzy", "html_url": "https://github.com/klutzy", "followers_url": "https://api.github.com/users/klutzy/followers", "following_url": "https://api.github.com/users/klutzy/following{/other_user}", "gists_url": "https://api.github.com/users/klutzy/gists{/gist_id}", "starred_url": "https://api.github.com/users/klutzy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/klutzy/subscriptions", "organizations_url": "https://api.github.com/users/klutzy/orgs", "repos_url": "https://api.github.com/users/klutzy/repos", "events_url": "https://api.github.com/users/klutzy/events{/privacy}", "received_events_url": "https://api.github.com/users/klutzy/received_events", "type": "User", "site_admin": false}, "committer": {"login": "klutzy", "id": 1589355, "node_id": "MDQ6VXNlcjE1ODkzNTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1589355?v=4", "gravatar_id": "", "url": "https://api.github.com/users/klutzy", "html_url": "https://github.com/klutzy", "followers_url": "https://api.github.com/users/klutzy/followers", "following_url": "https://api.github.com/users/klutzy/following{/other_user}", "gists_url": "https://api.github.com/users/klutzy/gists{/gist_id}", "starred_url": "https://api.github.com/users/klutzy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/klutzy/subscriptions", "organizations_url": "https://api.github.com/users/klutzy/orgs", "repos_url": "https://api.github.com/users/klutzy/repos", "events_url": "https://api.github.com/users/klutzy/events{/privacy}", "received_events_url": "https://api.github.com/users/klutzy/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "061450dcf14ea88c77312764fd80d712ff47fdb8", "url": "https://api.github.com/repos/rust-lang/rust/commits/061450dcf14ea88c77312764fd80d712ff47fdb8", "html_url": "https://github.com/rust-lang/rust/commit/061450dcf14ea88c77312764fd80d712ff47fdb8"}], "stats": {"total": 36, "additions": 22, "deletions": 14}, "files": [{"sha": "b22cf6e0ab704175407b7db5935f9dc41be5b53d", "filename": "src/librand/lib.rs", "status": "modified", "additions": 21, "deletions": 14, "changes": 35, "blob_url": "https://github.com/rust-lang/rust/blob/c92f51974b3f2ef99d3388d7a4d44fbb81433626/src%2Flibrand%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c92f51974b3f2ef99d3388d7a4d44fbb81433626/src%2Flibrand%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrand%2Flib.rs?ref=c92f51974b3f2ef99d3388d7a4d44fbb81433626", "patch": "@@ -30,20 +30,27 @@ after generating 32 KiB of random data.\n \n # Cryptographic security\n \n-An application that requires random numbers for cryptographic purposes\n-should prefer `OSRng`, which reads randomness from one of the source\n-that the operating system provides (e.g. `/dev/urandom` on\n-Unixes). The other random number generators provided by this module\n-are either known to be insecure (`XorShiftRng`), or are not verified\n-to be secure (`IsaacRng`, `Isaac64Rng` and `StdRng`).\n-\n-*Note*: on Linux, `/dev/random` is more secure than `/dev/urandom`,\n-but it is a blocking RNG, and will wait until it has determined that\n-it has collected enough entropy to fulfill a request for random\n-data. It can be used with the `Rng` trait provided by this module by\n-opening the file and passing it to `reader::ReaderRng`. Since it\n-blocks, `/dev/random` should only be used to retrieve small amounts of\n-randomness.\n+An application that requires an entropy source for cryptographic purposes\n+must use `OSRng`, which reads randomness from the source that the operating\n+system provides (e.g. `/dev/urandom` on Unixes or `CryptGenRandom()` on Windows).\n+The other random number generators provided by this module are not suitable\n+for such purposes.\n+\n+*Note*: many Unix systems provide `/dev/random` as well as `/dev/urandom`.\n+This module uses `/dev/urandom` for the following reasons:\n+\n+-   On Linux, `/dev/random` may block if entropy pool is empty; `/dev/urandom` will not block.\n+    This does not mean that `/dev/random` provides better output than\n+    `/dev/urandom`; the kernel internally runs a cryptographically secure pseudorandom\n+    number generator (CSPRNG) based on entropy pool for random number generation,\n+    so the \"quality\" of `/dev/random` is not better than `/dev/urandom` in most cases.\n+    However, this means that `/dev/urandom` can yield somewhat predictable randomness\n+    if the entropy pool is very small, such as immediately after first booting.\n+    If an application likely to be run soon after first booting, or on a system with very\n+    few entropy sources, one should consider using `/dev/random` via `ReaderRng`.\n+-   On some systems (e.g. FreeBSD, OpenBSD and Mac OS X) there is no difference\n+    between the two sources. (Also note that, on some systems e.g. FreeBSD, both `/dev/random`\n+    and `/dev/urandom` may block once if the CSPRNG has not seeded yet.)\n \n # Examples\n "}, {"sha": "60a6f71b88700c641cd080d7c0b2ce2a15b47645", "filename": "src/librand/os.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c92f51974b3f2ef99d3388d7a4d44fbb81433626/src%2Flibrand%2Fos.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c92f51974b3f2ef99d3388d7a4d44fbb81433626/src%2Flibrand%2Fos.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrand%2Fos.rs?ref=c92f51974b3f2ef99d3388d7a4d44fbb81433626", "patch": "@@ -109,6 +109,7 @@ mod imp {\n                                      CRYPT_VERIFYCONTEXT | CRYPT_SILENT)\n             };\n \n+            // FIXME #13259:\n             // It turns out that if we can't acquire a context with the\n             // NTE_BAD_SIGNATURE error code, the documentation states:\n             //"}]}