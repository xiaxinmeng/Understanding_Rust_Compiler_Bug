{"sha": "d75bc868caee77f1b29763f8ba5a00494ed52f6b", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ3NWJjODY4Y2FlZTc3ZjFiMjk3NjNmOGJhNWEwMDQ5NGVkNTJmNmI=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2020-11-28T21:14:37Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2020-11-28T21:14:37Z"}, "message": "Auto merge of #6396 - flip1995:rustup, r=ebroto\n\nRustup?\n\nBasically a rustup from an unknown source. I added a regression test (and slightly changed the lint), so this'll need a review.\n\nchangelog: Fix bug in [`items_after_statements`] wher it triggered, if items were separated by trailing semicolons.", "tree": {"sha": "0b9bb415659b88a48f675a7139bcc5ff8b475620", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0b9bb415659b88a48f675a7139bcc5ff8b475620"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d75bc868caee77f1b29763f8ba5a00494ed52f6b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d75bc868caee77f1b29763f8ba5a00494ed52f6b", "html_url": "https://github.com/rust-lang/rust/commit/d75bc868caee77f1b29763f8ba5a00494ed52f6b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d75bc868caee77f1b29763f8ba5a00494ed52f6b/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7a73a256223600926f1053fa63762b7d6375c9bc", "url": "https://api.github.com/repos/rust-lang/rust/commits/7a73a256223600926f1053fa63762b7d6375c9bc", "html_url": "https://github.com/rust-lang/rust/commit/7a73a256223600926f1053fa63762b7d6375c9bc"}, {"sha": "0e5aee1fc1251493c35a4344700798e9a586ef16", "url": "https://api.github.com/repos/rust-lang/rust/commits/0e5aee1fc1251493c35a4344700798e9a586ef16", "html_url": "https://github.com/rust-lang/rust/commit/0e5aee1fc1251493c35a4344700798e9a586ef16"}], "stats": {"total": 21, "additions": 17, "deletions": 4}, "files": [{"sha": "0927d218446ddb71c506d9cc19558c4fc265059e", "filename": "clippy_lints/src/items_after_statements.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/d75bc868caee77f1b29763f8ba5a00494ed52f6b/clippy_lints%2Fsrc%2Fitems_after_statements.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d75bc868caee77f1b29763f8ba5a00494ed52f6b/clippy_lints%2Fsrc%2Fitems_after_statements.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fitems_after_statements.rs?ref=d75bc868caee77f1b29763f8ba5a00494ed52f6b", "patch": "@@ -58,12 +58,12 @@ impl EarlyLintPass for ItemsAfterStatements {\n             return;\n         }\n \n-        // skip initial items\n+        // skip initial items and trailing semicolons\n         let stmts = item\n             .stmts\n             .iter()\n             .map(|stmt| &stmt.kind)\n-            .skip_while(|s| matches!(**s, StmtKind::Item(..)));\n+            .skip_while(|s| matches!(**s, StmtKind::Item(..) | StmtKind::Empty));\n \n         // lint on all further items\n         for stmt in stmts {"}, {"sha": "f398b3fff25a328ec6b5d94c249a9e78de88fef5", "filename": "clippy_lints/src/redundant_closure_call.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/d75bc868caee77f1b29763f8ba5a00494ed52f6b/clippy_lints%2Fsrc%2Fredundant_closure_call.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d75bc868caee77f1b29763f8ba5a00494ed52f6b/clippy_lints%2Fsrc%2Fredundant_closure_call.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fredundant_closure_call.rs?ref=d75bc868caee77f1b29763f8ba5a00494ed52f6b", "patch": "@@ -104,7 +104,7 @@ impl<'tcx> LateLintPass<'tcx> for RedundantClosureCall {\n                 cx: &'a LateContext<'tcx>,\n                 path: &'tcx hir::Path<'tcx>,\n                 count: usize,\n-            };\n+            }\n             impl<'a, 'tcx> hir_visit::Visitor<'tcx> for ClosureUsageCount<'a, 'tcx> {\n                 type Map = Map<'tcx>;\n \n@@ -124,7 +124,7 @@ impl<'tcx> LateLintPass<'tcx> for RedundantClosureCall {\n                 fn nested_visit_map(&mut self) -> hir_visit::NestedVisitorMap<Self::Map> {\n                     hir_visit::NestedVisitorMap::OnlyBodies(self.cx.tcx.hir())\n                 }\n-            };\n+            }\n             let mut closure_usage_count = ClosureUsageCount { cx, path, count: 0 };\n             closure_usage_count.visit_block(block);\n             closure_usage_count.count"}, {"sha": "d439ca1e4e1a171ca3ef20dc99f2311b968b5573", "filename": "tests/ui/item_after_statement.rs", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/d75bc868caee77f1b29763f8ba5a00494ed52f6b/tests%2Fui%2Fitem_after_statement.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d75bc868caee77f1b29763f8ba5a00494ed52f6b/tests%2Fui%2Fitem_after_statement.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fitem_after_statement.rs?ref=d75bc868caee77f1b29763f8ba5a00494ed52f6b", "patch": "@@ -37,3 +37,16 @@ fn mac() {\n     b!();\n     println!(\"{}\", a);\n }\n+\n+fn semicolon() {\n+    struct S {\n+        a: u32,\n+    };\n+    impl S {\n+        fn new(a: u32) -> Self {\n+            Self { a }\n+        }\n+    }\n+\n+    let _ = S::new(3);\n+}"}]}