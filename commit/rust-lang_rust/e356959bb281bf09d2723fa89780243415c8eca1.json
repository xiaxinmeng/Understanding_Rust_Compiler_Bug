{"sha": "e356959bb281bf09d2723fa89780243415c8eca1", "node_id": "MDY6Q29tbWl0NzI0NzEyOmUzNTY5NTliYjI4MWJmMDlkMjcyM2ZhODk3ODAyNDM0MTVjOGVjYTE=", "commit": {"author": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2012-10-10T21:05:53Z"}, "committer": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2012-10-10T21:06:18Z"}, "message": "Attempt to fix the DSYM_GLOB issue again, differently.", "tree": {"sha": "8d42ade4e9009e5411f1a1c4c8eb025eae509da2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8d42ade4e9009e5411f1a1c4c8eb025eae509da2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e356959bb281bf09d2723fa89780243415c8eca1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e356959bb281bf09d2723fa89780243415c8eca1", "html_url": "https://github.com/rust-lang/rust/commit/e356959bb281bf09d2723fa89780243415c8eca1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e356959bb281bf09d2723fa89780243415c8eca1/comments", "author": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "committer": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f4a6b84a65bf9c3b548e4e5d3f2aa2d9a8495085", "url": "https://api.github.com/repos/rust-lang/rust/commits/f4a6b84a65bf9c3b548e4e5d3f2aa2d9a8495085", "html_url": "https://github.com/rust-lang/rust/commit/f4a6b84a65bf9c3b548e4e5d3f2aa2d9a8495085"}], "stats": {"total": 5, "additions": 4, "deletions": 1}, "files": [{"sha": "67eaa1b878b3346f2420a0a21e6d03a8c0cdfd7c", "filename": "mk/platform.mk", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/e356959bb281bf09d2723fa89780243415c8eca1/mk%2Fplatform.mk", "raw_url": "https://github.com/rust-lang/rust/raw/e356959bb281bf09d2723fa89780243415c8eca1/mk%2Fplatform.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fplatform.mk?ref=e356959bb281bf09d2723fa89780243415c8eca1", "patch": "@@ -19,6 +19,10 @@ CFG_GCCISH_CFLAGS += -fno-omit-frame-pointer\n # embedded into the executable, so use a no-op command.\n CFG_DSYMUTIL := true\n \n+# Add a dSYM glob for all platforms, even though it will do nothing on\n+# non-Darwin platforms; omitting it causes a full -R copy of lib/\n+CFG_LIB_DSYM_GLOB=lib$(1)-*.dylib.dSYM\n+\n ifneq ($(findstring freebsd,$(CFG_OSTYPE)),)\n   CFG_LIB_NAME=lib$(1).so\n   CFG_LIB_GLOB=lib$(1)-*.so\n@@ -77,7 +81,6 @@ endif\n ifneq ($(findstring darwin,$(CFG_OSTYPE)),)\n   CFG_LIB_NAME=lib$(1).dylib\n   CFG_LIB_GLOB=lib$(1)-*.dylib\n-  CFG_LIB_DSYM_GLOB=lib$(1)-*.dylib.dSYM\n   CFG_UNIXY := 1\n   CFG_LDENV := DYLD_LIBRARY_PATH\n   CFG_GCCISH_LINK_FLAGS += -dynamiclib -lpthread -framework CoreServices -Wl,-no_compact_unwind"}]}