{"sha": "f1b5e3856317a38db996fe3e01b119aa0f2c3144", "node_id": "C_kwDOAAsO6NoAKGYxYjVlMzg1NjMxN2EzOGRiOTk2ZmUzZTAxYjExOWFhMGYyYzMxNDQ", "commit": {"author": {"name": "Lukas Wirth", "email": "lukastw97@gmail.com", "date": "2022-07-22T22:14:34Z"}, "committer": {"name": "Lukas Wirth", "email": "lukastw97@gmail.com", "date": "2022-07-22T22:14:34Z"}, "message": "Revert 03a62c180e6a7300d0d7b8c4d680b749c101bcbb", "tree": {"sha": "5174cffa72e6e0b8439251834cd7d46cf2512302", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5174cffa72e6e0b8439251834cd7d46cf2512302"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f1b5e3856317a38db996fe3e01b119aa0f2c3144", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f1b5e3856317a38db996fe3e01b119aa0f2c3144", "html_url": "https://github.com/rust-lang/rust/commit/f1b5e3856317a38db996fe3e01b119aa0f2c3144", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f1b5e3856317a38db996fe3e01b119aa0f2c3144/comments", "author": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "84a6fac37ad61ff512993ee64b47deff9a52c560", "url": "https://api.github.com/repos/rust-lang/rust/commits/84a6fac37ad61ff512993ee64b47deff9a52c560", "html_url": "https://github.com/rust-lang/rust/commit/84a6fac37ad61ff512993ee64b47deff9a52c560"}], "stats": {"total": 4013, "additions": 30, "deletions": 3983}, "files": [{"sha": "0436681b1a0a90fb3416949e9be6904ad2feb09a", "filename": "editors/code/package-lock.json", "status": "modified", "additions": 27, "deletions": 3977, "changes": 4004, "blob_url": "https://github.com/rust-lang/rust/blob/f1b5e3856317a38db996fe3e01b119aa0f2c3144/editors%2Fcode%2Fpackage-lock.json", "raw_url": "https://github.com/rust-lang/rust/raw/f1b5e3856317a38db996fe3e01b119aa0f2c3144/editors%2Fcode%2Fpackage-lock.json", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fpackage-lock.json?ref=f1b5e3856317a38db996fe3e01b119aa0f2c3144"}, {"sha": "a13798d8b36c90e4afe7618c3b24e772263d9bc9", "filename": "editors/code/package.json", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f1b5e3856317a38db996fe3e01b119aa0f2c3144/editors%2Fcode%2Fpackage.json", "raw_url": "https://github.com/rust-lang/rust/raw/f1b5e3856317a38db996fe3e01b119aa0f2c3144/editors%2Fcode%2Fpackage.json", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fpackage.json?ref=f1b5e3856317a38db996fe3e01b119aa0f2c3144", "patch": "@@ -37,7 +37,7 @@\n     \"dependencies\": {\n         \"d3\": \"^7.6.1\",\n         \"d3-graphviz\": \"^4.1.1\",\n-        \"vscode-languageclient\": \"^8.0.1\"\n+        \"vscode-languageclient\": \"^8.0.0-next.14\"\n     },\n     \"devDependencies\": {\n         \"@types/node\": \"~16.11.7\","}, {"sha": "8a2dea6b35b76a5760508399b670630ed277958a", "filename": "editors/code/src/client.ts", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f1b5e3856317a38db996fe3e01b119aa0f2c3144/editors%2Fcode%2Fsrc%2Fclient.ts", "raw_url": "https://github.com/rust-lang/rust/raw/f1b5e3856317a38db996fe3e01b119aa0f2c3144/editors%2Fcode%2Fsrc%2Fclient.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Fclient.ts?ref=f1b5e3856317a38db996fe3e01b119aa0f2c3144", "patch": "@@ -261,10 +261,6 @@ export async function createClient(\n }\n \n class ExperimentalFeatures implements lc.StaticFeature {\n-    getState(): lc.FeatureState {\n-        return { kind: \"static\" };\n-    }\n-\n     fillClientCapabilities(capabilities: lc.ClientCapabilities): void {\n         const caps: any = capabilities.experimental ?? {};\n         caps.snippetTextEdit = true;"}, {"sha": "0dea1b87b2f7017ee94219ce0ff801ee0c0e03ca", "filename": "editors/code/src/ctx.ts", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/f1b5e3856317a38db996fe3e01b119aa0f2c3144/editors%2Fcode%2Fsrc%2Fctx.ts", "raw_url": "https://github.com/rust-lang/rust/raw/f1b5e3856317a38db996fe3e01b119aa0f2c3144/editors%2Fcode%2Fsrc%2Fctx.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Fctx.ts?ref=f1b5e3856317a38db996fe3e01b119aa0f2c3144", "patch": "@@ -42,7 +42,8 @@ export class Ctx {\n \n         const res = new Ctx(config, extCtx, client, serverPath, statusBar);\n \n-        await client.start();\n+        res.pushCleanup(client.start());\n+        await client.onReady();\n         client.onNotification(ra.serverStatus, (params) => res.setServerStatus(params));\n         return res;\n     }"}]}