{"sha": "83499d1a89ef4e38a0cd0fc02316539a836e24a2", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgzNDk5ZDFhODllZjRlMzhhMGNkMGZjMDIzMTY1MzlhODM2ZTI0YTI=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2013-09-23T03:09:42Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2013-09-23T03:09:42Z"}, "message": "Place *all* rustdoc output in doc/{crate}", "tree": {"sha": "8f33e31a98baa794478f4d327bee21ac0def858b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8f33e31a98baa794478f4d327bee21ac0def858b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/83499d1a89ef4e38a0cd0fc02316539a836e24a2", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/83499d1a89ef4e38a0cd0fc02316539a836e24a2", "html_url": "https://github.com/rust-lang/rust/commit/83499d1a89ef4e38a0cd0fc02316539a836e24a2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/83499d1a89ef4e38a0cd0fc02316539a836e24a2/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f6e28d1f450f3685b9d61a056387e8a213b36b7c", "url": "https://api.github.com/repos/rust-lang/rust/commits/f6e28d1f450f3685b9d61a056387e8a213b36b7c", "html_url": "https://github.com/rust-lang/rust/commit/f6e28d1f450f3685b9d61a056387e8a213b36b7c"}], "stats": {"total": 30, "additions": 13, "deletions": 17}, "files": [{"sha": "45ed936417899786772a237e50856cfa064cf455", "filename": "mk/tools.mk", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/83499d1a89ef4e38a0cd0fc02316539a836e24a2/mk%2Ftools.mk", "raw_url": "https://github.com/rust-lang/rust/raw/83499d1a89ef4e38a0cd0fc02316539a836e24a2/mk%2Ftools.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Ftools.mk?ref=83499d1a89ef4e38a0cd0fc02316539a836e24a2", "patch": "@@ -21,7 +21,8 @@ RUSTPKG_INPUTS := $(wildcard $(S)src/librustpkg/*.rs)\n \n # Rustdoc, the documentation tool\n RUSTDOC_LIB := $(S)src/librustdoc/rustdoc.rs\n-RUSTDOC_INPUTS := $(wildcard $(S)src/librustdoc/*.rs)\n+RUSTDOC_INPUTS := $(wildcard $(addprefix $(S)src/librustdoc/,        \\\n+                                           *.rs */*.rs */*/*.rs))\n \n # Rusti, the JIT REPL\n RUSTI_LIB := $(S)src/librusti/rusti.rs"}, {"sha": "718bacc24fd83942ec6532b9f09ccc69b227069e", "filename": "src/librustdoc/html/layout.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/83499d1a89ef4e38a0cd0fc02316539a836e24a2/src%2Flibrustdoc%2Fhtml%2Flayout.rs", "raw_url": "https://github.com/rust-lang/rust/raw/83499d1a89ef4e38a0cd0fc02316539a836e24a2/src%2Flibrustdoc%2Fhtml%2Flayout.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Flayout.rs?ref=83499d1a89ef4e38a0cd0fc02316539a836e24a2", "patch": "@@ -36,7 +36,7 @@ pub fn render<T: fmt::Default, S: fmt::Default>(\n \n     <link href='http://fonts.googleapis.com/css?family=Oswald:700|Inconsolata:400'\n           rel='stylesheet' type='text/css'>\n-    <link rel=\\\"stylesheet\\\" type=\\\"text/css\\\" href=\\\"{root_path}main.css\\\">\n+    <link rel=\\\"stylesheet\\\" type=\\\"text/css\\\" href=\\\"{root_path}{crate}/main.css\\\">\n \n     {favicon, select, none{} other{\n         <link rel=\\\"icon\\\" href=\\\"#\\\" sizes=\\\"16x16\\\"\n@@ -52,7 +52,7 @@ pub fn render<T: fmt::Default, S: fmt::Default>(\n \n     <section class=\\\"sidebar\\\">\n         {logo, select, none{} other{\n-            <a href='{root_path}index.html'><img src='#' alt=''/></a>\n+            <a href='{root_path}{crate}/index.html'><img src='#' alt=''/></a>\n         }}\n \n         {sidebar}\n@@ -73,9 +73,9 @@ pub fn render<T: fmt::Default, S: fmt::Default>(\n     <script>\n         var rootPath = \\\"{root_path}\\\";\n     </script>\n-    <script src=\\\"{root_path}jquery.js\\\"></script>\n+    <script src=\\\"{root_path}{crate}/jquery.js\\\"></script>\n     <script src=\\\"{root_path}{crate}/search-index.js\\\"></script>\n-    <script src=\\\"{root_path}main.js\\\"></script>\n+    <script src=\\\"{root_path}{crate}/main.js\\\"></script>\n \n     <div id=\\\"help\\\" class=\\\"hidden\\\">\n         <div class=\\\"shortcuts\\\">"}, {"sha": "464a4e4b736553c94f422368e084d7ca93849a93", "filename": "src/librustdoc/html/render.rs", "status": "modified", "additions": 7, "deletions": 12, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/83499d1a89ef4e38a0cd0fc02316539a836e24a2/src%2Flibrustdoc%2Fhtml%2Frender.rs", "raw_url": "https://github.com/rust-lang/rust/raw/83499d1a89ef4e38a0cd0fc02316539a836e24a2/src%2Flibrustdoc%2Fhtml%2Frender.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender.rs?ref=83499d1a89ef4e38a0cd0fc02316539a836e24a2", "patch": "@@ -128,20 +128,15 @@ pub fn run(mut crate: clean::Crate, dst: Path) {\n     crate = cache.fold_crate(crate);\n \n     // Add all the static files\n-    write(cx.dst.push(\"jquery.js\"), include_str!(\"static/jquery-2.0.3.min.js\"));\n-    write(cx.dst.push(\"main.js\"), include_str!(\"static/main.js\"));\n-    write(cx.dst.push(\"main.css\"), include_str!(\"static/main.css\"));\n-    write(cx.dst.push(\"normalize.css\"), include_str!(\"static/normalize.css\"));\n-    write(cx.dst.push(\"index.html\"), format!(\"\n-        <DOCTYPE html><html><head>\n-            <meta http-equiv='refresh'\n-                  content=\\\"0; url={}/index.html\\\">\n-        </head><body></body></html>\n-    \", crate.name));\n+    let dst = cx.dst.push(crate.name);\n+    mkdir(&dst);\n+    write(dst.push(\"jquery.js\"), include_str!(\"static/jquery-2.0.3.min.js\"));\n+    write(dst.push(\"main.js\"), include_str!(\"static/main.js\"));\n+    write(dst.push(\"main.css\"), include_str!(\"static/main.css\"));\n+    write(dst.push(\"normalize.css\"), include_str!(\"static/normalize.css\"));\n \n     {\n-        mkdir(&cx.dst.push(crate.name));\n-        let dst = cx.dst.push(crate.name).push(\"search-index.js\");\n+        let dst = dst.push(\"search-index.js\");\n         let mut w = BufferedWriter::new(dst.open_writer(io::CreateOrTruncate));\n         let w = &mut w as &mut io::Writer;\n         write!(w, \"var searchIndex = [\");"}]}