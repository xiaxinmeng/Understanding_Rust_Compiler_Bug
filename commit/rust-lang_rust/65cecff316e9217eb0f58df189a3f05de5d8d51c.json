{"sha": "65cecff316e9217eb0f58df189a3f05de5d8d51c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY1Y2VjZmYzMTZlOTIxN2ViMGY1OGRmMTg5YTNmMDVkZTVkOGQ1MWM=", "commit": {"author": {"name": "Veetaha", "email": "gerzoh1@gmail.com", "date": "2020-03-07T12:39:42Z"}, "committer": {"name": "Veetaha", "email": "gerzoh1@gmail.com", "date": "2020-03-07T12:39:42Z"}, "message": "vscode: post refactor HintsUpdater (simplify create() -> constructor call)", "tree": {"sha": "cd0c527ac79338d8719a6ce766bf3fd81aaa90f6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cd0c527ac79338d8719a6ce766bf3fd81aaa90f6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/65cecff316e9217eb0f58df189a3f05de5d8d51c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/65cecff316e9217eb0f58df189a3f05de5d8d51c", "html_url": "https://github.com/rust-lang/rust/commit/65cecff316e9217eb0f58df189a3f05de5d8d51c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/65cecff316e9217eb0f58df189a3f05de5d8d51c/comments", "author": null, "committer": null, "parents": [{"sha": "61a4ea25326b794fe64f37fda323fc704a5f96e9", "url": "https://api.github.com/repos/rust-lang/rust/commits/61a4ea25326b794fe64f37fda323fc704a5f96e9", "html_url": "https://github.com/rust-lang/rust/commit/61a4ea25326b794fe64f37fda323fc704a5f96e9"}], "stats": {"total": 26, "additions": 10, "deletions": 16}, "files": [{"sha": "e1a82e03e824164db441e67137f543d3c7c64549", "filename": "editors/code/src/inlay_hints.ts", "status": "modified", "additions": 10, "deletions": 16, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/65cecff316e9217eb0f58df189a3f05de5d8d51c/editors%2Fcode%2Fsrc%2Finlay_hints.ts", "raw_url": "https://github.com/rust-lang/rust/raw/65cecff316e9217eb0f58df189a3f05de5d8d51c/editors%2Fcode%2Fsrc%2Finlay_hints.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Finlay_hints.ts?ref=65cecff316e9217eb0f58df189a3f05de5d8d51c", "patch": "@@ -13,7 +13,7 @@ export function activateInlayHints(ctx: Ctx) {\n             if (!ctx.config.displayInlayHints) {\n                 return this.dispose();\n             }\n-            if (!this.updater) this.updater = HintsUpdater.create(ctx);\n+            if (!this.updater) this.updater = new HintsUpdater(ctx);\n         },\n         dispose() {\n             this.updater?.dispose();\n@@ -67,25 +67,21 @@ class HintsUpdater implements Disposable {\n     private sourceFiles = new Map<string, RustSourceFile>(); // map Uri -> RustSourceFile\n     private readonly disposables: Disposable[] = [];\n \n-    private constructor(private readonly ctx: Ctx) { }\n-\n-    static create(ctx: Ctx) {\n-        const self = new HintsUpdater(ctx);\n-\n+    constructor(private readonly ctx: Ctx) {\n         vscode.window.onDidChangeVisibleTextEditors(\n-            self.onDidChangeVisibleTextEditors,\n-            self,\n-            self.disposables\n+            this.onDidChangeVisibleTextEditors,\n+            this,\n+            this.disposables\n         );\n \n         vscode.workspace.onDidChangeTextDocument(\n-            self.onDidChangeTextDocument,\n-            self,\n-            self.disposables\n+            this.onDidChangeTextDocument,\n+            this,\n+            this.disposables\n         );\n \n         // Set up initial cache shape\n-        ctx.visibleRustEditors.forEach(editor => self.sourceFiles.set(\n+        ctx.visibleRustEditors.forEach(editor => this.sourceFiles.set(\n             editor.document.uri.toString(),\n             {\n                 document: editor.document,\n@@ -94,9 +90,7 @@ class HintsUpdater implements Disposable {\n             }\n         ));\n \n-        self.syncCacheAndRenderHints();\n-\n-        return self;\n+        this.syncCacheAndRenderHints();\n     }\n \n     dispose() {"}]}