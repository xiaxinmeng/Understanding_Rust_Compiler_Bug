{"sha": "8bda13367e4987937ddc2ba9bbe01b5f7a4cce3e", "node_id": "C_kwDOAAsO6NoAKDhiZGExMzM2N2U0OTg3OTM3ZGRjMmJhOWJiZTAxYjVmN2E0Y2NlM2U", "commit": {"author": {"name": "Gary Guo", "email": "gary@garyguo.net", "date": "2022-10-05T01:29:56Z"}, "committer": {"name": "Gary Guo", "email": "gary@garyguo.net", "date": "2022-10-05T02:09:43Z"}, "message": "Interpret EH actions properly\n\nThe EH actions stored in the LSDA follows the format of GCC except table\n(even for LLVM-generated code). An missing action in the table is the\nencoding for `Terminate`, see [1].\n\nThe currently code interprets it as `None`, as a workaround for #35011,\nan issue that seems to occur in LLVM 3.7 and not after 3.9. These are\nvery old versions of LLVM and we don't support them anymore, so remove\nthis workaround and interpret them properly.\n\nNote that LLVM currently does not emit any `Terminate` actions, but GCC\ndoes. Although GCC backend currently doesn't do unwinding, removing it\npreemptively would prevent future developers from wasting time to figure\nout what's wrong.\n\n[1]: https://github.com/gcc-mirror/gcc/blob/master/libstdc%2B%2B-v3/libsupc%2B%2B/eh_personality.cc#L522-L526", "tree": {"sha": "c0e4909ed738ca8257ae1c5cb1db8647ea14ff69", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c0e4909ed738ca8257ae1c5cb1db8647ea14ff69"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8bda13367e4987937ddc2ba9bbe01b5f7a4cce3e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8bda13367e4987937ddc2ba9bbe01b5f7a4cce3e", "html_url": "https://github.com/rust-lang/rust/commit/8bda13367e4987937ddc2ba9bbe01b5f7a4cce3e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8bda13367e4987937ddc2ba9bbe01b5f7a4cce3e/comments", "author": {"login": "nbdd0121", "id": 4065244, "node_id": "MDQ6VXNlcjQwNjUyNDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4065244?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nbdd0121", "html_url": "https://github.com/nbdd0121", "followers_url": "https://api.github.com/users/nbdd0121/followers", "following_url": "https://api.github.com/users/nbdd0121/following{/other_user}", "gists_url": "https://api.github.com/users/nbdd0121/gists{/gist_id}", "starred_url": "https://api.github.com/users/nbdd0121/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nbdd0121/subscriptions", "organizations_url": "https://api.github.com/users/nbdd0121/orgs", "repos_url": "https://api.github.com/users/nbdd0121/repos", "events_url": "https://api.github.com/users/nbdd0121/events{/privacy}", "received_events_url": "https://api.github.com/users/nbdd0121/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nbdd0121", "id": 4065244, "node_id": "MDQ6VXNlcjQwNjUyNDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4065244?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nbdd0121", "html_url": "https://github.com/nbdd0121", "followers_url": "https://api.github.com/users/nbdd0121/followers", "following_url": "https://api.github.com/users/nbdd0121/following{/other_user}", "gists_url": "https://api.github.com/users/nbdd0121/gists{/gist_id}", "starred_url": "https://api.github.com/users/nbdd0121/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nbdd0121/subscriptions", "organizations_url": "https://api.github.com/users/nbdd0121/orgs", "repos_url": "https://api.github.com/users/nbdd0121/repos", "events_url": "https://api.github.com/users/nbdd0121/events{/privacy}", "received_events_url": "https://api.github.com/users/nbdd0121/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "01af5040fdada6ef8f1b749cda798d80a8590b2c", "url": "https://api.github.com/repos/rust-lang/rust/commits/01af5040fdada6ef8f1b749cda798d80a8590b2c", "html_url": "https://github.com/rust-lang/rust/commit/01af5040fdada6ef8f1b749cda798d80a8590b2c"}], "stats": {"total": 5, "additions": 2, "deletions": 3}, "files": [{"sha": "27b50c13b77ca1235ef7ab81b47e9b10dc2db672", "filename": "library/std/src/personality/dwarf/eh.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/8bda13367e4987937ddc2ba9bbe01b5f7a4cce3e/library%2Fstd%2Fsrc%2Fpersonality%2Fdwarf%2Feh.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8bda13367e4987937ddc2ba9bbe01b5f7a4cce3e/library%2Fstd%2Fsrc%2Fpersonality%2Fdwarf%2Feh.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fpersonality%2Fdwarf%2Feh.rs?ref=8bda13367e4987937ddc2ba9bbe01b5f7a4cce3e", "patch": "@@ -98,9 +98,8 @@ pub unsafe fn find_eh_action(lsda: *const u8, context: &EHContext<'_>) -> Result\n                 }\n             }\n         }\n-        // Ip is not present in the table.  This should not happen... but it does: issue #35011.\n-        // So rather than returning EHAction::Terminate, we do this.\n-        Ok(EHAction::None)\n+        // Ip is not present in the table. This indicates a nounwind call.\n+        Ok(EHAction::Terminate)\n     } else {\n         // SjLj version:\n         // The \"IP\" is an index into the call-site table, with two exceptions:"}]}