{"sha": "25dcbca0ad6024671be33a23cc40701342095404", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI1ZGNiY2EwYWQ2MDI0NjcxYmUzM2EyM2NjNDA3MDEzNDIwOTU0MDQ=", "commit": {"author": {"name": "Ariel Ben-Yehuda", "email": "arielb1@mail.tau.ac.il", "date": "2017-03-11T19:57:47Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-03-11T19:57:47Z"}, "message": "Rollup merge of #40400 - TimNN:gdbr-updates, r=alexcrichton\n\nUpdate gdbr tests\n\ngdb will now reliably detect the lanugage as rust even before any code is run.", "tree": {"sha": "583499e1abcd51ab500a6f42f3dab13e240b914a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/583499e1abcd51ab500a6f42f3dab13e240b914a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/25dcbca0ad6024671be33a23cc40701342095404", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/25dcbca0ad6024671be33a23cc40701342095404", "html_url": "https://github.com/rust-lang/rust/commit/25dcbca0ad6024671be33a23cc40701342095404", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/25dcbca0ad6024671be33a23cc40701342095404/comments", "author": null, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d75b9ad5f4d0d51889efe0b70e4309d66e48c096", "url": "https://api.github.com/repos/rust-lang/rust/commits/d75b9ad5f4d0d51889efe0b70e4309d66e48c096", "html_url": "https://github.com/rust-lang/rust/commit/d75b9ad5f4d0d51889efe0b70e4309d66e48c096"}, {"sha": "b95b5db163adfe24117aa25e42a775c7b5b91dc5", "url": "https://api.github.com/repos/rust-lang/rust/commits/b95b5db163adfe24117aa25e42a775c7b5b91dc5", "html_url": "https://github.com/rust-lang/rust/commit/b95b5db163adfe24117aa25e42a775c7b5b91dc5"}], "stats": {"total": 39, "additions": 22, "deletions": 17}, "files": [{"sha": "900b0829530f3c41923cb30a1feecac01b1251d2", "filename": "src/test/debuginfo/c-style-enum.rs", "status": "modified", "additions": 14, "deletions": 7, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/25dcbca0ad6024671be33a23cc40701342095404/src%2Ftest%2Fdebuginfo%2Fc-style-enum.rs", "raw_url": "https://github.com/rust-lang/rust/raw/25dcbca0ad6024671be33a23cc40701342095404/src%2Ftest%2Fdebuginfo%2Fc-style-enum.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fdebuginfo%2Fc-style-enum.rs?ref=25dcbca0ad6024671be33a23cc40701342095404", "patch": "@@ -15,31 +15,38 @@\n \n // === GDB TESTS ===================================================================================\n \n-// gdb-command:print 'c_style_enum::SINGLE_VARIANT'\n+// gdbg-command:print 'c_style_enum::SINGLE_VARIANT'\n+// gdbr-command:print c_style_enum::SINGLE_VARIANT\n // gdbg-check:$1 = TheOnlyVariant\n // gdbr-check:$1 = c_style_enum::SingleVariant::TheOnlyVariant\n \n-// gdb-command:print 'c_style_enum::AUTO_ONE'\n+// gdbg-command:print 'c_style_enum::AUTO_ONE'\n+// gdbr-command:print c_style_enum::AUTO_ONE\n // gdbg-check:$2 = One\n // gdbr-check:$2 = c_style_enum::AutoDiscriminant::One\n \n-// gdb-command:print 'c_style_enum::AUTO_TWO'\n+// gdbg-command:print 'c_style_enum::AUTO_TWO'\n+// gdbr-command:print c_style_enum::AUTO_TWO\n // gdbg-check:$3 = One\n // gdbr-check:$3 = c_style_enum::AutoDiscriminant::One\n \n-// gdb-command:print 'c_style_enum::AUTO_THREE'\n+// gdbg-command:print 'c_style_enum::AUTO_THREE'\n+// gdbr-command:print c_style_enum::AUTO_THREE\n // gdbg-check:$4 = One\n // gdbr-check:$4 = c_style_enum::AutoDiscriminant::One\n \n-// gdb-command:print 'c_style_enum::MANUAL_ONE'\n+// gdbg-command:print 'c_style_enum::MANUAL_ONE'\n+// gdbr-command:print c_style_enum::MANUAL_ONE\n // gdbg-check:$5 = OneHundred\n // gdbr-check:$5 = c_style_enum::ManualDiscriminant::OneHundred\n \n-// gdb-command:print 'c_style_enum::MANUAL_TWO'\n+// gdbg-command:print 'c_style_enum::MANUAL_TWO'\n+// gdbr-command:print c_style_enum::MANUAL_TWO\n // gdbg-check:$6 = OneHundred\n // gdbr-check:$6 = c_style_enum::ManualDiscriminant::OneHundred\n \n-// gdb-command:print 'c_style_enum::MANUAL_THREE'\n+// gdbg-command:print 'c_style_enum::MANUAL_THREE'\n+// gdbr-command:print c_style_enum::MANUAL_THREE\n // gdbg-check:$7 = OneHundred\n // gdbr-check:$7 = c_style_enum::ManualDiscriminant::OneHundred\n "}, {"sha": "e8c3597b8c8dd68fdbd194f10c79831b82032f54", "filename": "src/test/debuginfo/limited-debuginfo.rs", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/25dcbca0ad6024671be33a23cc40701342095404/src%2Ftest%2Fdebuginfo%2Flimited-debuginfo.rs", "raw_url": "https://github.com/rust-lang/rust/raw/25dcbca0ad6024671be33a23cc40701342095404/src%2Ftest%2Fdebuginfo%2Flimited-debuginfo.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fdebuginfo%2Flimited-debuginfo.rs?ref=25dcbca0ad6024671be33a23cc40701342095404", "patch": "@@ -15,10 +15,14 @@\n \n // Make sure functions have proper names\n // gdb-command:info functions\n-// gdb-check:[...]void[...]main([...]);\n-// gdb-check:[...]void[...]some_function([...]);\n-// gdb-check:[...]void[...]some_other_function([...]);\n-// gdb-check:[...]void[...]zzz([...]);\n+// gdbg-check:[...]void[...]main([...]);\n+// gdbr-check:fn limited_debuginfo::main();\n+// gdbg-check:[...]void[...]some_function([...]);\n+// gdbr-check:fn limited_debuginfo::some_function();\n+// gdbg-check:[...]void[...]some_other_function([...]);\n+// gdbr-check:fn limited_debuginfo::some_other_function();\n+// gdbg-check:[...]void[...]zzz([...]);\n+// gdbr-check:fn limited_debuginfo::zzz();\n \n // gdb-command:run\n "}, {"sha": "ae05bafe5adaa70c07967a202d8f929bf1771f3e", "filename": "src/test/debuginfo/simple-struct.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/25dcbca0ad6024671be33a23cc40701342095404/src%2Ftest%2Fdebuginfo%2Fsimple-struct.rs", "raw_url": "https://github.com/rust-lang/rust/raw/25dcbca0ad6024671be33a23cc40701342095404/src%2Ftest%2Fdebuginfo%2Fsimple-struct.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fdebuginfo%2Fsimple-struct.rs?ref=25dcbca0ad6024671be33a23cc40701342095404", "patch": "@@ -14,9 +14,6 @@\n \n // === GDB TESTS ===================================================================================\n \n-// there's no frame yet for gdb to reliably detect the language, set it explicitly\n-// gdbr-command:set language rust\n-\n // gdbg-command:print 'simple_struct::NO_PADDING_16'\n // gdbr-command:print simple_struct::NO_PADDING_16\n // gdbg-check:$1 = {x = 1000, y = -1001}"}, {"sha": "b3c270411509592141fac499eb96864fb3d0c665", "filename": "src/test/debuginfo/simple-tuple.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/25dcbca0ad6024671be33a23cc40701342095404/src%2Ftest%2Fdebuginfo%2Fsimple-tuple.rs", "raw_url": "https://github.com/rust-lang/rust/raw/25dcbca0ad6024671be33a23cc40701342095404/src%2Ftest%2Fdebuginfo%2Fsimple-tuple.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fdebuginfo%2Fsimple-tuple.rs?ref=25dcbca0ad6024671be33a23cc40701342095404", "patch": "@@ -14,9 +14,6 @@\n \n // === GDB TESTS ===================================================================================\n \n-// there's no frame yet for gdb to reliably detect the language, set it explicitly\n-// gdbr-command:set language rust\n-\n // gdbg-command:print/d 'simple_tuple::NO_PADDING_8'\n // gdbr-command:print simple_tuple::NO_PADDING_8\n // gdbg-check:$1 = {__0 = -50, __1 = 50}"}]}