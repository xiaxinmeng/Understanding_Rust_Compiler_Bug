{"sha": "b802629311ee9873978e91f185657fd6ae3cba28", "node_id": "C_kwDOAAsO6NoAKGI4MDI2MjkzMTFlZTk4NzM5NzhlOTFmMTg1NjU3ZmQ2YWUzY2JhMjg", "commit": {"author": {"name": "Hudson Ayers", "email": "hayers@stanford.edu", "date": "2021-10-15T15:58:28Z"}, "committer": {"name": "Hudson Ayers", "email": "hayers@stanford.edu", "date": "2021-10-21T17:44:22Z"}, "message": "add tests for -Zlocation-detail", "tree": {"sha": "0025c675f3bb1e96d7a2d2fa3cc608d5e0cf2cad", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0025c675f3bb1e96d7a2d2fa3cc608d5e0cf2cad"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b802629311ee9873978e91f185657fd6ae3cba28", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b802629311ee9873978e91f185657fd6ae3cba28", "html_url": "https://github.com/rust-lang/rust/commit/b802629311ee9873978e91f185657fd6ae3cba28", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b802629311ee9873978e91f185657fd6ae3cba28/comments", "author": {"login": "hudson-ayers", "id": 32688905, "node_id": "MDQ6VXNlcjMyNjg4OTA1", "avatar_url": "https://avatars.githubusercontent.com/u/32688905?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hudson-ayers", "html_url": "https://github.com/hudson-ayers", "followers_url": "https://api.github.com/users/hudson-ayers/followers", "following_url": "https://api.github.com/users/hudson-ayers/following{/other_user}", "gists_url": "https://api.github.com/users/hudson-ayers/gists{/gist_id}", "starred_url": "https://api.github.com/users/hudson-ayers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hudson-ayers/subscriptions", "organizations_url": "https://api.github.com/users/hudson-ayers/orgs", "repos_url": "https://api.github.com/users/hudson-ayers/repos", "events_url": "https://api.github.com/users/hudson-ayers/events{/privacy}", "received_events_url": "https://api.github.com/users/hudson-ayers/received_events", "type": "User", "site_admin": false}, "committer": {"login": "hudson-ayers", "id": 32688905, "node_id": "MDQ6VXNlcjMyNjg4OTA1", "avatar_url": "https://avatars.githubusercontent.com/u/32688905?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hudson-ayers", "html_url": "https://github.com/hudson-ayers", "followers_url": "https://api.github.com/users/hudson-ayers/followers", "following_url": "https://api.github.com/users/hudson-ayers/following{/other_user}", "gists_url": "https://api.github.com/users/hudson-ayers/gists{/gist_id}", "starred_url": "https://api.github.com/users/hudson-ayers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hudson-ayers/subscriptions", "organizations_url": "https://api.github.com/users/hudson-ayers/orgs", "repos_url": "https://api.github.com/users/hudson-ayers/repos", "events_url": "https://api.github.com/users/hudson-ayers/events{/privacy}", "received_events_url": "https://api.github.com/users/hudson-ayers/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8090f67fb7abc459b24eaa87a5309ed49ed96866", "url": "https://api.github.com/repos/rust-lang/rust/commits/8090f67fb7abc459b24eaa87a5309ed49ed96866", "html_url": "https://github.com/rust-lang/rust/commit/8090f67fb7abc459b24eaa87a5309ed49ed96866"}], "stats": {"total": 42, "additions": 41, "deletions": 1}, "files": [{"sha": "dab4d485e2d0b22d2c20c8e1e31a1dfd35e7ce26", "filename": "compiler/rustc_interface/src/tests.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/b802629311ee9873978e91f185657fd6ae3cba28/compiler%2Frustc_interface%2Fsrc%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b802629311ee9873978e91f185657fd6ae3cba28/compiler%2Frustc_interface%2Fsrc%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_interface%2Fsrc%2Ftests.rs?ref=b802629311ee9873978e91f185657fd6ae3cba28", "patch": "@@ -5,7 +5,9 @@ use rustc_errors::{emitter::HumanReadableErrorType, registry, ColorConfig};\n use rustc_session::config::InstrumentCoverage;\n use rustc_session::config::Strip;\n use rustc_session::config::{build_configuration, build_session_options, to_crate_config};\n-use rustc_session::config::{rustc_optgroups, ErrorOutputType, ExternLocation, Options, Passes};\n+use rustc_session::config::{\n+    rustc_optgroups, ErrorOutputType, ExternLocation, LocationDetail, Options, Passes,\n+};\n use rustc_session::config::{CFGuard, ExternEntry, LinkerPluginLto, LtoCli, SwitchWithOptPath};\n use rustc_session::config::{\n     Externs, OutputType, OutputTypes, SymbolManglingVersion, WasiExecModel,\n@@ -733,6 +735,7 @@ fn test_debugging_options_tracking_hash() {\n     tracked!(instrument_mcount, true);\n     tracked!(link_only, true);\n     tracked!(llvm_plugins, vec![String::from(\"plugin_name\")]);\n+    tracked!(location_detail, LocationDetail { file: true, line: false, column: false });\n     tracked!(merge_functions, Some(MergeFunctions::Disabled));\n     tracked!(mir_emit_retag, true);\n     tracked!(mir_opt_level, Some(4));"}, {"sha": "673e638ca0d6beb2e750c9a256789388a6010b0b", "filename": "src/test/ui/panics/location-detail-panic-no-column.rs", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/b802629311ee9873978e91f185657fd6ae3cba28/src%2Ftest%2Fui%2Fpanics%2Flocation-detail-panic-no-column.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b802629311ee9873978e91f185657fd6ae3cba28/src%2Ftest%2Fui%2Fpanics%2Flocation-detail-panic-no-column.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpanics%2Flocation-detail-panic-no-column.rs?ref=b802629311ee9873978e91f185657fd6ae3cba28", "patch": "@@ -0,0 +1,7 @@\n+// run-fail\n+// check-run-results\n+// compile-flags: -Zlocation-detail=line,file\n+\n+fn main() {\n+    panic!(\"column-redacted\");\n+}"}, {"sha": "9f35623fba392b39e3d4abd1c11a507f5612529d", "filename": "src/test/ui/panics/location-detail-panic-no-column.run.stderr", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b802629311ee9873978e91f185657fd6ae3cba28/src%2Ftest%2Fui%2Fpanics%2Flocation-detail-panic-no-column.run.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b802629311ee9873978e91f185657fd6ae3cba28/src%2Ftest%2Fui%2Fpanics%2Flocation-detail-panic-no-column.run.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpanics%2Flocation-detail-panic-no-column.run.stderr?ref=b802629311ee9873978e91f185657fd6ae3cba28", "patch": "@@ -0,0 +1,2 @@\n+thread 'main' panicked at 'column-redacted', $DIR/location-detail-panic-no-column.rs:6:0\n+note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace"}, {"sha": "0e5d52cfd1534c356d8e8e69c994212d0b98b651", "filename": "src/test/ui/panics/location-detail-panic-no-file.rs", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/b802629311ee9873978e91f185657fd6ae3cba28/src%2Ftest%2Fui%2Fpanics%2Flocation-detail-panic-no-file.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b802629311ee9873978e91f185657fd6ae3cba28/src%2Ftest%2Fui%2Fpanics%2Flocation-detail-panic-no-file.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpanics%2Flocation-detail-panic-no-file.rs?ref=b802629311ee9873978e91f185657fd6ae3cba28", "patch": "@@ -0,0 +1,7 @@\n+// run-fail\n+// check-run-results\n+// compile-flags: -Zlocation-detail=line,column\n+\n+fn main() {\n+    panic!(\"file-redacted\");\n+}"}, {"sha": "1e07e3a07afd5ba8dbf403b5ba7f4170c2aadc63", "filename": "src/test/ui/panics/location-detail-panic-no-file.run.stderr", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b802629311ee9873978e91f185657fd6ae3cba28/src%2Ftest%2Fui%2Fpanics%2Flocation-detail-panic-no-file.run.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b802629311ee9873978e91f185657fd6ae3cba28/src%2Ftest%2Fui%2Fpanics%2Flocation-detail-panic-no-file.run.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpanics%2Flocation-detail-panic-no-file.run.stderr?ref=b802629311ee9873978e91f185657fd6ae3cba28", "patch": "@@ -0,0 +1,2 @@\n+thread 'main' panicked at 'file-redacted', <redacted>:6:5\n+note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace"}, {"sha": "57f6d0ebcb9fac09f38a18bdc855924a9393bf8c", "filename": "src/test/ui/panics/location-detail-panic-no-line.rs", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/b802629311ee9873978e91f185657fd6ae3cba28/src%2Ftest%2Fui%2Fpanics%2Flocation-detail-panic-no-line.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b802629311ee9873978e91f185657fd6ae3cba28/src%2Ftest%2Fui%2Fpanics%2Flocation-detail-panic-no-line.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpanics%2Flocation-detail-panic-no-line.rs?ref=b802629311ee9873978e91f185657fd6ae3cba28", "patch": "@@ -0,0 +1,7 @@\n+// run-fail\n+// check-run-results\n+// compile-flags: -Zlocation-detail=file,column\n+\n+fn main() {\n+    panic!(\"line-redacted\");\n+}"}, {"sha": "cc3f1624c49abdab8d5c0c5e5e954034099ce257", "filename": "src/test/ui/panics/location-detail-panic-no-line.run.stderr", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b802629311ee9873978e91f185657fd6ae3cba28/src%2Ftest%2Fui%2Fpanics%2Flocation-detail-panic-no-line.run.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b802629311ee9873978e91f185657fd6ae3cba28/src%2Ftest%2Fui%2Fpanics%2Flocation-detail-panic-no-line.run.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpanics%2Flocation-detail-panic-no-line.run.stderr?ref=b802629311ee9873978e91f185657fd6ae3cba28", "patch": "@@ -0,0 +1,2 @@\n+thread 'main' panicked at 'line-redacted', $DIR/location-detail-panic-no-line.rs:0:5\n+note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace"}, {"sha": "d7f96f058e082edd95b0cb5f78ce14fc2ef6ed7a", "filename": "src/test/ui/panics/location-detail-unwrap-no-file.rs", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/b802629311ee9873978e91f185657fd6ae3cba28/src%2Ftest%2Fui%2Fpanics%2Flocation-detail-unwrap-no-file.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b802629311ee9873978e91f185657fd6ae3cba28/src%2Ftest%2Fui%2Fpanics%2Flocation-detail-unwrap-no-file.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpanics%2Flocation-detail-unwrap-no-file.rs?ref=b802629311ee9873978e91f185657fd6ae3cba28", "patch": "@@ -0,0 +1,8 @@\n+// run-fail\n+// check-run-results\n+// compile-flags: -Zlocation-detail=line,column\n+\n+fn main() {\n+    let opt: Option<u32> = None;\n+    opt.unwrap();\n+}"}, {"sha": "f8f84b5c49a22a03b90bd1f53fc39918f90ec913", "filename": "src/test/ui/panics/location-detail-unwrap-no-file.run.stderr", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b802629311ee9873978e91f185657fd6ae3cba28/src%2Ftest%2Fui%2Fpanics%2Flocation-detail-unwrap-no-file.run.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b802629311ee9873978e91f185657fd6ae3cba28/src%2Ftest%2Fui%2Fpanics%2Flocation-detail-unwrap-no-file.run.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpanics%2Flocation-detail-unwrap-no-file.run.stderr?ref=b802629311ee9873978e91f185657fd6ae3cba28", "patch": "@@ -0,0 +1,2 @@\n+thread 'main' panicked at 'called `Option::unwrap()` on a `None` value', <redacted>:7:9\n+note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace"}]}