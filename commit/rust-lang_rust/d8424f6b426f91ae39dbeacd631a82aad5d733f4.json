{"sha": "d8424f6b426f91ae39dbeacd631a82aad5d733f4", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ4NDI0ZjZiNDI2ZjkxYWUzOWRiZWFjZDYzMWE4MmFhZDVkNzMzZjQ=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2020-08-29T06:08:37Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2020-08-29T06:08:37Z"}, "message": "Auto merge of #74922 - joshtriplett:ninja-by-default, r=Mark-Simulacrum\n\nSet ninja=true by default\n\nNinja substantially improves LLVM build time. On a 96-way system, using\nMake took 248s, and using Ninja took 161s, a 35% improvement.\n\nWe already require a variety of tools to build Rust. If someone wants to\nbuild without Ninja (for instance, to minimize the set of packages\nrequired to bootstrap a new target), they can easily set `ninja=false`\nin `config.toml`.  Our defaults should help people build Rust (and LLVM)\nfaster, to speed up development.", "tree": {"sha": "2cc658ad4c12c81cf1680608e01c5e5a3934048c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2cc658ad4c12c81cf1680608e01c5e5a3934048c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d8424f6b426f91ae39dbeacd631a82aad5d733f4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d8424f6b426f91ae39dbeacd631a82aad5d733f4", "html_url": "https://github.com/rust-lang/rust/commit/d8424f6b426f91ae39dbeacd631a82aad5d733f4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d8424f6b426f91ae39dbeacd631a82aad5d733f4/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "17fb1254b8f085c0787cc8f11ac466fcc2d8c488", "url": "https://api.github.com/repos/rust-lang/rust/commits/17fb1254b8f085c0787cc8f11ac466fcc2d8c488", "html_url": "https://github.com/rust-lang/rust/commit/17fb1254b8f085c0787cc8f11ac466fcc2d8c488"}, {"sha": "8b501e33e5b873b66bc421cc142d4c7430d8f005", "url": "https://api.github.com/repos/rust-lang/rust/commits/8b501e33e5b873b66bc421cc142d4c7430d8f005", "html_url": "https://github.com/rust-lang/rust/commit/8b501e33e5b873b66bc421cc142d4c7430d8f005"}], "stats": {"total": 73, "additions": 58, "deletions": 15}, "files": [{"sha": "6c6c816eec622e626458b7b3164d488670bacfe6", "filename": ".github/workflows/ci.yml", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/.github%2Fworkflows%2Fci.yml", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/.github%2Fworkflows%2Fci.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Fci.yml?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -583,7 +583,7 @@ jobs:\n           - name: dist-x86_64-apple\n             env:\n               SCRIPT: \"./x.py dist\"\n-              RUST_CONFIGURE_ARGS: \"--target=aarch64-apple-ios,x86_64-apple-ios --enable-full-tools --enable-sanitizers --enable-profiler --set rust.jemalloc\"\n+              RUST_CONFIGURE_ARGS: \"--target=aarch64-apple-ios,x86_64-apple-ios --enable-full-tools --enable-sanitizers --enable-profiler --set rust.jemalloc --set llvm.ninja=false\"\n               RUSTC_RETRY_LINKER_ON_SEGFAULT: 1\n               MACOSX_DEPLOYMENT_TARGET: 10.7\n               NO_LLVM_ASSERTIONS: 1\n@@ -594,7 +594,7 @@ jobs:\n           - name: dist-x86_64-apple-alt\n             env:\n               SCRIPT: \"./x.py dist\"\n-              RUST_CONFIGURE_ARGS: \"--enable-extended --enable-profiler --set rust.jemalloc\"\n+              RUST_CONFIGURE_ARGS: \"--enable-extended --enable-profiler --set rust.jemalloc --set llvm.ninja=false\"\n               RUSTC_RETRY_LINKER_ON_SEGFAULT: 1\n               MACOSX_DEPLOYMENT_TARGET: 10.7\n               NO_LLVM_ASSERTIONS: 1\n@@ -604,7 +604,7 @@ jobs:\n           - name: x86_64-apple\n             env:\n               SCRIPT: \"./x.py --stage 2 test\"\n-              RUST_CONFIGURE_ARGS: \"--build=x86_64-apple-darwin --enable-sanitizers --enable-profiler --set rust.jemalloc\"\n+              RUST_CONFIGURE_ARGS: \"--build=x86_64-apple-darwin --enable-sanitizers --enable-profiler --set rust.jemalloc --set llvm.ninja=false\"\n               RUSTC_RETRY_LINKER_ON_SEGFAULT: 1\n               MACOSX_DEPLOYMENT_TARGET: 10.8\n               MACOSX_STD_DEPLOYMENT_TARGET: 10.7"}, {"sha": "fe9776bc5f8fe28c83102f85efc51b32bd26d5f8", "filename": "README.md", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/README.md", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/README.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/README.md?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -36,6 +36,7 @@ by running `./x.py --help` or reading the [rustc dev guide][rustcguidebuild].\n    * `python` 3 or 2.7\n    * GNU `make` 3.81 or later\n    * `cmake` 3.4.3 or later\n+   * `ninja`\n    * `curl`\n    * `git`\n    * `ssl` which comes in `libssl-dev` or `openssl-devel`"}, {"sha": "9abb8add785a9352cb46bb4ef49009b3838c4724", "filename": "config.toml.example", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/config.toml.example", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/config.toml.example", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/config.toml.example?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -49,10 +49,8 @@\n # dynamic version to be available.\n #static-libstdcpp = false\n \n-# Tell the LLVM build system to use Ninja instead of the platform default for\n-# the generated build system. This can sometimes be faster than make, for\n-# example.\n-#ninja = false\n+# Whether to use Ninja to build LLVM. This runs much faster than make.\n+#ninja = true\n \n # LLVM targets to build support for.\n # Note: this is NOT related to Rust compilation targets. However, as Rust is"}, {"sha": "5b6c327896ba85e5c389fe8456425a1f31c328ad", "filename": "src/bootstrap/builder/tests.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fbootstrap%2Fbuilder%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fbootstrap%2Fbuilder%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbuilder%2Ftests.rs?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -8,6 +8,7 @@ fn configure(host: &[&str], target: &[&str]) -> Config {\n     config.save_toolstates = None;\n     config.skip_only_host_steps = false;\n     config.dry_run = true;\n+    config.ninja = false;\n     // try to avoid spurious failures in dist where we create/delete each others file\n     let dir = config\n         .out"}, {"sha": "f549de6570ffb9b0b01c6ae047af5025929f0ef9", "filename": "src/bootstrap/config.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fbootstrap%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fbootstrap%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fconfig.rs?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -450,6 +450,7 @@ impl Config {\n     pub fn default_opts() -> Config {\n         let mut config = Config::default();\n         config.llvm_optimize = true;\n+        config.ninja = true;\n         config.llvm_version_check = true;\n         config.backtrace = true;\n         config.rust_optimize = true;"}, {"sha": "533b5c79777fcce704e55657e652f61e82c994cc", "filename": "src/bootstrap/sanity.rs", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fbootstrap%2Fsanity.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fbootstrap%2Fsanity.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fsanity.rs?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -100,8 +100,16 @@ pub fn check(build: &mut Build) {\n         if build.config.ninja {\n             // Some Linux distros rename `ninja` to `ninja-build`.\n             // CMake can work with either binary name.\n-            if cmd_finder.maybe_have(\"ninja-build\").is_none() {\n-                cmd_finder.must_have(\"ninja\");\n+            if cmd_finder.maybe_have(\"ninja-build\").is_none()\n+                && cmd_finder.maybe_have(\"ninja\").is_none()\n+            {\n+                eprintln!(\n+                    \"\n+Couldn't find required command: ninja\n+You should install ninja, or set ninja=false in config.toml\n+\"\n+                );\n+                std::process::exit(1);\n             }\n         }\n "}, {"sha": "d19682c669157997fdc694f084f7021adfced43c", "filename": "src/ci/azure-pipelines/auto.yml", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fazure-pipelines%2Fauto.yml", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fazure-pipelines%2Fauto.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fazure-pipelines%2Fauto.yml?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -37,7 +37,7 @@ jobs:\n       # version that we're using, 8.2, cannot compile LLVM for OSX 10.7.\n       x86_64-apple:\n         SCRIPT: ./x.py --stage 2 test\n-        INITIAL_RUST_CONFIGURE_ARGS: --build=x86_64-apple-darwin --enable-sanitizers --enable-profiler --set rust.jemalloc\n+        INITIAL_RUST_CONFIGURE_ARGS: --build=x86_64-apple-darwin --enable-sanitizers --enable-profiler --set rust.jemalloc --set llvm.ninja=false\n         RUSTC_RETRY_LINKER_ON_SEGFAULT: 1\n         MACOSX_DEPLOYMENT_TARGET: 10.8\n         MACOSX_STD_DEPLOYMENT_TARGET: 10.7\n@@ -46,7 +46,7 @@ jobs:\n \n       dist-x86_64-apple:\n         SCRIPT: ./x.py dist\n-        INITIAL_RUST_CONFIGURE_ARGS: --target=aarch64-apple-ios,x86_64-apple-ios --enable-full-tools --enable-sanitizers --enable-profiler --set rust.jemalloc\n+        INITIAL_RUST_CONFIGURE_ARGS: --target=aarch64-apple-ios,x86_64-apple-ios --enable-full-tools --enable-sanitizers --enable-profiler --set rust.jemalloc --set llvm.ninja=false\n         RUSTC_RETRY_LINKER_ON_SEGFAULT: 1\n         MACOSX_DEPLOYMENT_TARGET: 10.7\n         NO_LLVM_ASSERTIONS: 1\n@@ -55,7 +55,7 @@ jobs:\n \n       dist-x86_64-apple-alt:\n         SCRIPT: ./x.py dist\n-        INITIAL_RUST_CONFIGURE_ARGS: --enable-extended --enable-profiler --set rust.jemalloc\n+        INITIAL_RUST_CONFIGURE_ARGS: --enable-extended --enable-profiler --set rust.jemalloc --set llvm.ninja=false\n         RUSTC_RETRY_LINKER_ON_SEGFAULT: 1\n         MACOSX_DEPLOYMENT_TARGET: 10.7\n         NO_LLVM_ASSERTIONS: 1"}, {"sha": "e54d0eafb4003abb4575ad858734cffa5540d2bd", "filename": "src/ci/docker/host-aarch64/aarch64-gnu/Dockerfile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-aarch64%2Faarch64-gnu%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-aarch64%2Faarch64-gnu%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-aarch64%2Faarch64-gnu%2FDockerfile?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -3,6 +3,7 @@ FROM ubuntu:20.04\n RUN apt-get update && DEBIAN_FRONTEND=noninteractive apt-get install -y --no-install-recommends \\\n   g++ \\\n   make \\\n+  ninja-build \\\n   file \\\n   curl \\\n   ca-certificates \\"}, {"sha": "f1ccbc928a71423148c6e169e0b729cb900150e5", "filename": "src/ci/docker/host-x86_64/armhf-gnu/Dockerfile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Farmhf-gnu%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Farmhf-gnu%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Farmhf-gnu%2FDockerfile?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -14,6 +14,7 @@ RUN apt-get update -y && apt-get install -y --no-install-recommends \\\n       libc6-dev \\\n       libc6-dev-armhf-cross \\\n       make \\\n+      ninja-build \\\n       python3 \\\n       qemu-system-arm \\\n       xz-utils"}, {"sha": "6335dc089b238ea30544f684b76301811dced9da", "filename": "src/ci/docker/host-x86_64/disabled/asmjs/Dockerfile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdisabled%2Fasmjs%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdisabled%2Fasmjs%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdisabled%2Fasmjs%2FDockerfile?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -3,6 +3,7 @@ FROM ubuntu:16.04\n RUN apt-get update && apt-get install -y --no-install-recommends \\\n   g++ \\\n   make \\\n+  ninja-build \\\n   file \\\n   curl \\\n   ca-certificates \\"}, {"sha": "34c487412145b16908969ae4361b2188c80ca966", "filename": "src/ci/docker/host-x86_64/disabled/dist-powerpcspe-linux/Dockerfile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdisabled%2Fdist-powerpcspe-linux%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdisabled%2Fdist-powerpcspe-linux%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdisabled%2Fdist-powerpcspe-linux%2FDockerfile?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -3,6 +3,7 @@ FROM ubuntu:16.04\n RUN apt-get update && apt-get install -y --no-install-recommends \\\n   g++ \\\n   make \\\n+  ninja-build \\\n   file \\\n   curl \\\n   ca-certificates \\"}, {"sha": "a8e7583ccb01720b26ee5b20df377d5c4239fd9a", "filename": "src/ci/docker/host-x86_64/disabled/dist-sparc64-linux/Dockerfile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdisabled%2Fdist-sparc64-linux%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdisabled%2Fdist-sparc64-linux%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdisabled%2Fdist-sparc64-linux%2FDockerfile?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -3,6 +3,7 @@ FROM ubuntu:16.04\n RUN apt-get update && apt-get install -y --no-install-recommends \\\n   g++ \\\n   make \\\n+  ninja-build \\\n   file \\\n   curl \\\n   ca-certificates \\"}, {"sha": "5d594a80581bb60cd64f757406e73d7c126c81b8", "filename": "src/ci/docker/host-x86_64/disabled/dist-x86_64-dragonfly/Dockerfile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdisabled%2Fdist-x86_64-dragonfly%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdisabled%2Fdist-x86_64-dragonfly%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdisabled%2Fdist-x86_64-dragonfly%2FDockerfile?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -3,6 +3,7 @@ FROM ubuntu:16.04\n RUN apt-get update && apt-get install -y --no-install-recommends \\\n   g++ \\\n   make \\\n+  ninja-build \\\n   file \\\n   curl \\\n   ca-certificates \\"}, {"sha": "5ddd3f180396466223ee2e6bf71c0947b3cbc126", "filename": "src/ci/docker/host-x86_64/disabled/dist-x86_64-haiku/Dockerfile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdisabled%2Fdist-x86_64-haiku%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdisabled%2Fdist-x86_64-haiku%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdisabled%2Fdist-x86_64-haiku%2FDockerfile?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -16,6 +16,7 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   libcurl4-openssl-dev \\\n   libssl-dev \\\n   make \\\n+  ninja-build \\\n   nasm \\\n   pkg-config \\\n   python3 \\"}, {"sha": "3c39a63849640a1e14f7a3231747c2ee2193b546", "filename": "src/ci/docker/host-x86_64/disabled/riscv64gc-linux/Dockerfile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdisabled%2Friscv64gc-linux%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdisabled%2Friscv64gc-linux%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdisabled%2Friscv64gc-linux%2FDockerfile?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -20,6 +20,7 @@ RUN apt-get update -y && apt-get install -y --no-install-recommends \\\n     libc6-dev \\\n     libc6-dev-riscv64-cross \\\n     make \\\n+    ninja-build \\\n     patch \\\n     python3 \\\n     qemu-system-misc \\"}, {"sha": "995f7c301f8cb4c3b7b3c36d47c86b753ce2b440", "filename": "src/ci/docker/host-x86_64/dist-i586-gnu-i586-i686-musl/Dockerfile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-i586-gnu-i586-i686-musl%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-i586-gnu-i586-i686-musl%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-i586-gnu-i586-i686-musl%2FDockerfile?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -3,6 +3,7 @@ FROM ubuntu:16.04\n RUN apt-get update && apt-get install -y --no-install-recommends \\\n   g++-multilib \\\n   make \\\n+  ninja-build \\\n   file \\\n   curl \\\n   ca-certificates \\"}, {"sha": "7db6e58c4d688a018b2fe9fa9a26c02ba7b53e7b", "filename": "src/ci/docker/host-x86_64/dist-i686-freebsd/Dockerfile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-i686-freebsd%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-i686-freebsd%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-i686-freebsd%2FDockerfile?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -3,6 +3,7 @@ FROM ubuntu:18.04\n RUN apt-get update && apt-get install -y --no-install-recommends \\\n   clang \\\n   make \\\n+  ninja-build \\\n   file \\\n   curl \\\n   ca-certificates \\"}, {"sha": "22d7cbb0d14d8eba7ed4d6ea398c63b601221d54", "filename": "src/ci/docker/host-x86_64/dist-i686-linux/Dockerfile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-i686-linux%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-i686-linux%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-i686-linux%2FDockerfile?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -93,6 +93,7 @@ ENV RUST_CONFIGURE_ARGS \\\n       --enable-profiler \\\n       --set target.i686-unknown-linux-gnu.linker=clang \\\n       --build=i686-unknown-linux-gnu \\\n+      --set llvm.ninja=false \\\n       --set rust.jemalloc\n ENV SCRIPT python2.7 ../x.py dist --build $HOSTS --host $HOSTS --target $HOSTS\n ENV CARGO_TARGET_I686_UNKNOWN_LINUX_GNU_LINKER=clang"}, {"sha": "cb5c17c25ab9f9f9e4c0a30f99392c98866d9b71", "filename": "src/ci/docker/host-x86_64/dist-mips-linux/Dockerfile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-mips-linux%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-mips-linux%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-mips-linux%2FDockerfile?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -3,6 +3,7 @@ FROM ubuntu:16.04\n RUN apt-get update && apt-get install -y --no-install-recommends \\\n   g++ \\\n   make \\\n+  ninja-build \\\n   file \\\n   curl \\\n   ca-certificates \\"}, {"sha": "31146e3ead43ee08bbdca35b13010866014618c8", "filename": "src/ci/docker/host-x86_64/dist-mips64-linux/Dockerfile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-mips64-linux%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-mips64-linux%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-mips64-linux%2FDockerfile?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -3,6 +3,7 @@ FROM ubuntu:16.04\n RUN apt-get update && apt-get install -y --no-install-recommends \\\n   g++ \\\n   make \\\n+  ninja-build \\\n   file \\\n   curl \\\n   ca-certificates \\"}, {"sha": "dadd50a7e66d9aad705ba0388318e899a749a9d9", "filename": "src/ci/docker/host-x86_64/dist-mips64el-linux/Dockerfile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-mips64el-linux%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-mips64el-linux%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-mips64el-linux%2FDockerfile?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -3,6 +3,7 @@ FROM ubuntu:16.04\n RUN apt-get update && apt-get install -y --no-install-recommends \\\n   g++ \\\n   make \\\n+  ninja-build \\\n   file \\\n   curl \\\n   ca-certificates \\"}, {"sha": "d2d65565b10f2213353fdb06ffff3f0eaeb9cf02", "filename": "src/ci/docker/host-x86_64/dist-mipsel-linux/Dockerfile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-mipsel-linux%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-mipsel-linux%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-mipsel-linux%2FDockerfile?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -3,6 +3,7 @@ FROM ubuntu:16.04\n RUN apt-get update && apt-get install -y --no-install-recommends \\\n   g++ \\\n   make \\\n+  ninja-build \\\n   file \\\n   curl \\\n   ca-certificates \\"}, {"sha": "4e48d9b543361bb31af6990c463890f81f4a6af0", "filename": "src/ci/docker/host-x86_64/dist-various-1/Dockerfile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-various-1%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-various-1%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-various-1%2FDockerfile?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -15,6 +15,7 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   libncurses-dev \\\n   gawk \\\n   make \\\n+  ninja-build \\\n   file \\\n   curl \\\n   ca-certificates \\"}, {"sha": "b7ff6cd4e4feb07eb476a7c07ca56e1746749064", "filename": "src/ci/docker/host-x86_64/dist-various-2/build-cloudabi-toolchain.sh", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-various-2%2Fbuild-cloudabi-toolchain.sh", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-various-2%2Fbuild-cloudabi-toolchain.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-various-2%2Fbuild-cloudabi-toolchain.sh?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -16,6 +16,7 @@ apt-get install -y --no-install-recommends \\\n   git \\\n   lld-5.0 \\\n   make \\\n+  ninja-build \\\n   python \\\n   sudo \\\n   xz-utils"}, {"sha": "1075947c9cfa7510bc4d9428868911e8f2b5f135", "filename": "src/ci/docker/host-x86_64/dist-x86_64-freebsd/Dockerfile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-freebsd%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-freebsd%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-freebsd%2FDockerfile?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -3,6 +3,7 @@ FROM ubuntu:18.04\n RUN apt-get update && apt-get install -y --no-install-recommends \\\n   clang \\\n   make \\\n+  ninja-build \\\n   file \\\n   curl \\\n   ca-certificates \\"}, {"sha": "58e2567a58f08955867869f922b4206d3f63d011", "filename": "src/ci/docker/host-x86_64/dist-x86_64-linux/Dockerfile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-linux%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-linux%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-linux%2FDockerfile?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -96,6 +96,7 @@ ENV RUST_CONFIGURE_ARGS \\\n       --set target.x86_64-unknown-linux-gnu.ar=/rustroot/bin/llvm-ar \\\n       --set target.x86_64-unknown-linux-gnu.ranlib=/rustroot/bin/llvm-ranlib \\\n       --set llvm.thin-lto=true \\\n+      --set llvm.ninja=false \\\n       --set rust.jemalloc\n ENV SCRIPT python2.7 ../x.py dist --host $HOSTS --target $HOSTS\n ENV CARGO_TARGET_X86_64_UNKNOWN_LINUX_GNU_LINKER=clang"}, {"sha": "904ee64db3b7e7b277952d1a3ec0c1841b9e3725", "filename": "src/ci/docker/host-x86_64/dist-x86_64-musl/Dockerfile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-musl%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-musl%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-musl%2FDockerfile?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -3,6 +3,7 @@ FROM ubuntu:16.04\n RUN apt-get update && apt-get install -y --no-install-recommends \\\n   g++ \\\n   make \\\n+  ninja-build \\\n   file \\\n   wget \\\n   curl \\"}, {"sha": "930061fca6f8fe4a492bca86b50dc8b0a9d2ad2b", "filename": "src/ci/docker/host-x86_64/i686-gnu-nopt/Dockerfile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fi686-gnu-nopt%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fi686-gnu-nopt%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fi686-gnu-nopt%2FDockerfile?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -3,6 +3,7 @@ FROM ubuntu:16.04\n RUN apt-get update && apt-get install -y --no-install-recommends \\\n   g++-multilib \\\n   make \\\n+  ninja-build \\\n   file \\\n   curl \\\n   ca-certificates \\"}, {"sha": "ea178bcf4f2704c4d411c8e5f056ee1aec258286", "filename": "src/ci/docker/host-x86_64/i686-gnu/Dockerfile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fi686-gnu%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fi686-gnu%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fi686-gnu%2FDockerfile?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -3,6 +3,7 @@ FROM ubuntu:16.04\n RUN apt-get update && apt-get install -y --no-install-recommends \\\n   g++-multilib \\\n   make \\\n+  ninja-build \\\n   file \\\n   curl \\\n   ca-certificates \\"}, {"sha": "8fc9a009dce011a4622f433387751c37f09294a4", "filename": "src/ci/docker/host-x86_64/mingw-check/Dockerfile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fmingw-check%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fmingw-check%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fmingw-check%2FDockerfile?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -3,6 +3,7 @@ FROM ubuntu:18.04\n RUN apt-get update && apt-get install -y --no-install-recommends \\\n   g++ \\\n   make \\\n+  ninja-build \\\n   file \\\n   curl \\\n   ca-certificates \\"}, {"sha": "8c606d88d68200ab1ad63ca733dad47b827971ca", "filename": "src/ci/docker/host-x86_64/test-various/Dockerfile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Ftest-various%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Ftest-various%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Ftest-various%2FDockerfile?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -3,6 +3,7 @@ FROM ubuntu:18.04\n RUN apt-get update && apt-get install -y --no-install-recommends \\\n   g++ \\\n   make \\\n+  ninja-build \\\n   file \\\n   curl \\\n   ca-certificates \\"}, {"sha": "b4c783c781bd402f55384844fef08188514235ab", "filename": "src/ci/docker/host-x86_64/wasm32/Dockerfile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fwasm32%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fwasm32%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fwasm32%2FDockerfile?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -3,6 +3,7 @@ FROM ubuntu:16.04\n RUN apt-get update && apt-get install -y --no-install-recommends \\\n   g++ \\\n   make \\\n+  ninja-build \\\n   file \\\n   curl \\\n   ca-certificates \\"}, {"sha": "a109b36066ee2bb9a14079b110975037a797b221", "filename": "src/ci/docker/host-x86_64/x86_64-gnu-aux/Dockerfile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-aux%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-aux%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-aux%2FDockerfile?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -3,6 +3,7 @@ FROM ubuntu:16.04\n RUN apt-get update && apt-get install -y --no-install-recommends \\\n   g++ \\\n   make \\\n+  ninja-build \\\n   file \\\n   curl \\\n   ca-certificates \\"}, {"sha": "fe956b9c7b23a1de25bfa3cef9a70972c2692d5b", "filename": "src/ci/docker/host-x86_64/x86_64-gnu-debug/Dockerfile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-debug%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-debug%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-debug%2FDockerfile?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -3,6 +3,7 @@ FROM ubuntu:19.10\n RUN apt-get update && apt-get install -y --no-install-recommends \\\n   g++ \\\n   make \\\n+  ninja-build \\\n   file \\\n   curl \\\n   ca-certificates \\"}, {"sha": "5f98edf617174071caefbca1cc2e3d8703df1041", "filename": "src/ci/docker/host-x86_64/x86_64-gnu-distcheck/Dockerfile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-distcheck%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-distcheck%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-distcheck%2FDockerfile?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -3,6 +3,7 @@ FROM ubuntu:16.04\n RUN apt-get update && apt-get install -y --no-install-recommends \\\n   g++ \\\n   make \\\n+  ninja-build \\\n   file \\\n   curl \\\n   ca-certificates \\"}, {"sha": "0c9d6ed442e9452380d7ed8bcd74564eb6c3cf8d", "filename": "src/ci/docker/host-x86_64/x86_64-gnu-llvm-8/Dockerfile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-llvm-8%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-llvm-8%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-llvm-8%2FDockerfile?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -4,6 +4,7 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   g++ \\\n   g++-arm-linux-gnueabi \\\n   make \\\n+  ninja-build \\\n   file \\\n   curl \\\n   ca-certificates \\"}, {"sha": "f4071961f8e18736d17d0f68fea51bb93f511677", "filename": "src/ci/docker/host-x86_64/x86_64-gnu-nopt/Dockerfile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-nopt%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-nopt%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-nopt%2FDockerfile?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -3,6 +3,7 @@ FROM ubuntu:16.04\n RUN apt-get update && apt-get install -y --no-install-recommends \\\n   g++ \\\n   make \\\n+  ninja-build \\\n   file \\\n   curl \\\n   ca-certificates \\"}, {"sha": "89171a6f2153b972d11347b6741ece5ef4cbaf0f", "filename": "src/ci/docker/host-x86_64/x86_64-gnu-tools/Dockerfile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2FDockerfile?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -3,6 +3,7 @@ FROM ubuntu:16.04\n RUN apt-get update && apt-get install -y --no-install-recommends \\\n   g++ \\\n   make \\\n+  ninja-build \\\n   file \\\n   curl \\\n   ca-certificates \\"}, {"sha": "527b539f682dbdfcca8b08faf9130f3ac4f2243c", "filename": "src/ci/docker/host-x86_64/x86_64-gnu/Dockerfile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu%2FDockerfile?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -3,6 +3,7 @@ FROM ubuntu:19.10\n RUN apt-get update && apt-get install -y --no-install-recommends \\\n   g++ \\\n   make \\\n+  ninja-build \\\n   file \\\n   curl \\\n   ca-certificates \\"}, {"sha": "1795b1696d323ef6e80d375bb591b62ac451135c", "filename": "src/ci/docker/scripts/android-base-apt-get.sh", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fscripts%2Fandroid-base-apt-get.sh", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fscripts%2Fandroid-base-apt-get.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fscripts%2Fandroid-base-apt-get.sh?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -10,6 +10,7 @@ apt-get install -y --no-install-recommends \\\n   git \\\n   libssl-dev \\\n   make \\\n+  ninja-build \\\n   pkg-config \\\n   python3 \\\n   sudo \\"}, {"sha": "2de376443ad567c8dbdd8f995e9dd60fb73e7109", "filename": "src/ci/docker/scripts/cross-apt-packages.sh", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fscripts%2Fcross-apt-packages.sh", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fdocker%2Fscripts%2Fcross-apt-packages.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fscripts%2Fcross-apt-packages.sh?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -17,6 +17,7 @@ apt-get update && apt-get install -y --no-install-recommends \\\n   libssl-dev \\\n   libtool-bin \\\n   make \\\n+  ninja-build \\\n   patch \\\n   pkg-config \\\n   python3 \\"}, {"sha": "522d5bd3d9c36c9edd448d81326c5ac64978a8eb", "filename": "src/ci/github-actions/ci.yml", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fgithub-actions%2Fci.yml", "raw_url": "https://github.com/rust-lang/rust/raw/d8424f6b426f91ae39dbeacd631a82aad5d733f4/src%2Fci%2Fgithub-actions%2Fci.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fgithub-actions%2Fci.yml?ref=d8424f6b426f91ae39dbeacd631a82aad5d733f4", "patch": "@@ -605,7 +605,7 @@ jobs:\n           - name: dist-x86_64-apple\n             env:\n               SCRIPT: ./x.py dist\n-              RUST_CONFIGURE_ARGS: --target=aarch64-apple-ios,x86_64-apple-ios --enable-full-tools --enable-sanitizers --enable-profiler --set rust.jemalloc\n+              RUST_CONFIGURE_ARGS: --target=aarch64-apple-ios,x86_64-apple-ios --enable-full-tools --enable-sanitizers --enable-profiler --set rust.jemalloc --set llvm.ninja=false\n               RUSTC_RETRY_LINKER_ON_SEGFAULT: 1\n               MACOSX_DEPLOYMENT_TARGET: 10.7\n               NO_LLVM_ASSERTIONS: 1\n@@ -620,7 +620,7 @@ jobs:\n           - name: dist-x86_64-apple-alt\n             env:\n               SCRIPT: ./x.py dist\n-              RUST_CONFIGURE_ARGS: --enable-extended --enable-profiler --set rust.jemalloc\n+              RUST_CONFIGURE_ARGS: --enable-extended --enable-profiler --set rust.jemalloc --set llvm.ninja=false\n               RUSTC_RETRY_LINKER_ON_SEGFAULT: 1\n               MACOSX_DEPLOYMENT_TARGET: 10.7\n               NO_LLVM_ASSERTIONS: 1\n@@ -634,7 +634,7 @@ jobs:\n           - name: x86_64-apple\n             env:\n               SCRIPT: ./x.py --stage 2 test\n-              RUST_CONFIGURE_ARGS: --build=x86_64-apple-darwin --enable-sanitizers --enable-profiler --set rust.jemalloc\n+              RUST_CONFIGURE_ARGS: --build=x86_64-apple-darwin --enable-sanitizers --enable-profiler --set rust.jemalloc --set llvm.ninja=false\n               RUSTC_RETRY_LINKER_ON_SEGFAULT: 1\n               MACOSX_DEPLOYMENT_TARGET: 10.8\n               MACOSX_STD_DEPLOYMENT_TARGET: 10.7"}]}