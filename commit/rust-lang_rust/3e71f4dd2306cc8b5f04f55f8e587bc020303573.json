{"sha": "3e71f4dd2306cc8b5f04f55f8e587bc020303573", "node_id": "C_kwDOAAsO6NoAKDNlNzFmNGRkMjMwNmNjOGI1ZjA0ZjU1ZjhlNTg3YmMwMjAzMDM1NzM", "commit": {"author": {"name": "Matt Palmer", "email": "mpalmer@hezmatt.org", "date": "2023-05-12T08:18:13Z"}, "committer": {"name": "Matt Palmer", "email": "mpalmer@hezmatt.org", "date": "2023-05-12T08:18:13Z"}, "message": "Extra context for unreachable_pub lint (fixes #110922)\n\nWhile experienced Rustaceans no doubt know this sort of thing already, as more of a newbie I had trouble understanding why I was triggering the lint.\nHopefully this expanded explanation saves someone else some head-scratching.", "tree": {"sha": "73f012d51b91ce4d33ee3f4138f3a846eb84d8e0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/73f012d51b91ce4d33ee3f4138f3a846eb84d8e0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3e71f4dd2306cc8b5f04f55f8e587bc020303573", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3e71f4dd2306cc8b5f04f55f8e587bc020303573", "html_url": "https://github.com/rust-lang/rust/commit/3e71f4dd2306cc8b5f04f55f8e587bc020303573", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3e71f4dd2306cc8b5f04f55f8e587bc020303573/comments", "author": {"login": "mpalmer", "id": 357, "node_id": "MDQ6VXNlcjM1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mpalmer", "html_url": "https://github.com/mpalmer", "followers_url": "https://api.github.com/users/mpalmer/followers", "following_url": "https://api.github.com/users/mpalmer/following{/other_user}", "gists_url": "https://api.github.com/users/mpalmer/gists{/gist_id}", "starred_url": "https://api.github.com/users/mpalmer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mpalmer/subscriptions", "organizations_url": "https://api.github.com/users/mpalmer/orgs", "repos_url": "https://api.github.com/users/mpalmer/repos", "events_url": "https://api.github.com/users/mpalmer/events{/privacy}", "received_events_url": "https://api.github.com/users/mpalmer/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mpalmer", "id": 357, "node_id": "MDQ6VXNlcjM1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mpalmer", "html_url": "https://github.com/mpalmer", "followers_url": "https://api.github.com/users/mpalmer/followers", "following_url": "https://api.github.com/users/mpalmer/following{/other_user}", "gists_url": "https://api.github.com/users/mpalmer/gists{/gist_id}", "starred_url": "https://api.github.com/users/mpalmer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mpalmer/subscriptions", "organizations_url": "https://api.github.com/users/mpalmer/orgs", "repos_url": "https://api.github.com/users/mpalmer/repos", "events_url": "https://api.github.com/users/mpalmer/events{/privacy}", "received_events_url": "https://api.github.com/users/mpalmer/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "26e0c57dde7ea664457e3bf1340f832c722bd349", "url": "https://api.github.com/repos/rust-lang/rust/commits/26e0c57dde7ea664457e3bf1340f832c722bd349", "html_url": "https://github.com/rust-lang/rust/commit/26e0c57dde7ea664457e3bf1340f832c722bd349"}], "stats": {"total": 12, "additions": 8, "deletions": 4}, "files": [{"sha": "0b21a6889f293675279785c3a4b9fb0fae4c5840", "filename": "compiler/rustc_lint/src/builtin.rs", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/3e71f4dd2306cc8b5f04f55f8e587bc020303573/compiler%2Frustc_lint%2Fsrc%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3e71f4dd2306cc8b5f04f55f8e587bc020303573/compiler%2Frustc_lint%2Fsrc%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_lint%2Fsrc%2Fbuiltin.rs?ref=3e71f4dd2306cc8b5f04f55f8e587bc020303573", "patch": "@@ -1313,10 +1313,14 @@ declare_lint! {\n     ///\n     /// ### Explanation\n     ///\n-    /// A bare `pub` visibility may be misleading if the item is not actually\n-    /// publicly exported from the crate. The `pub(crate)` visibility is\n-    /// recommended to be used instead, which more clearly expresses the intent\n-    /// that the item is only visible within its own crate.\n+    /// The `pub` keyword both expresses an intent for an item to be publicly available, and also\n+    /// signals to the compiler to make the item publicly accessible. The intent can only be\n+    /// satisfied, however, if all items which contain this item are *also* publicly accessible.\n+    /// Thus, this lint serves to identify situations where the intent does not match the reality.\n+    ///\n+    /// If you wish the item to be accessible elsewhere within the crate, but not outside it, the\n+    /// `pub(crate)` visibility is recommended to be used instead. This more clearly expresses the\n+    /// intent that the item is only visible within its own crate.\n     ///\n     /// This lint is \"allow\" by default because it will trigger for a large\n     /// amount existing Rust code, and has some false-positives. Eventually it"}]}