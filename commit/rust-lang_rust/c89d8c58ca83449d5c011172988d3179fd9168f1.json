{"sha": "c89d8c58ca83449d5c011172988d3179fd9168f1", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM4OWQ4YzU4Y2E4MzQ0OWQ1YzAxMTE3Mjk4OGQzMTc5ZmQ5MTY4ZjE=", "commit": {"author": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2016-05-08T05:08:13Z"}, "committer": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2016-05-08T14:00:04Z"}, "message": "Rollup merge of #33373 - birkenfeld:issue-32555, r=bluss\n\nrustdoc: use btree map for where clauses\n\nto get more reproducible output.\n\nFixes: #32555\n\nI've looked at the other uses of HashMap in rustdoc, and they seem ok to (i.e. they use `iter()` and related only for constructing a new map, or when the output goes into independent files).\n\nNot sure what the cause of #24473 is, it shouldn't be where clauses, but maybe it was also fixed inbetween since May 2015.", "tree": {"sha": "5485bb8db8ebf72f26fc665c82946bb8ead2d952", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5485bb8db8ebf72f26fc665c82946bb8ead2d952"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c89d8c58ca83449d5c011172988d3179fd9168f1", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQIcBAABAgAGBQJXL0ZkAAoJEDu/TT4u95+Yd+8QAI2Ix7+YFb8Xo/vE+aUKl7DH\nWwFTZD9jJsJRvoy/hVKiGH/lXUfFyUlG7m9N8kN6D5ZUWCJsNicpfgSrNrMI0xPW\nOruvibFcrVdK9KABIVPvbjNsnAmzLGXXU2xS3ZekKJ+asw2Aqov1jBO8waySXRi3\nddFwRio3ntQoYh0jEI14A9vqd7onM4PDIRNjQn1aZsjkR67qdBqbUmWfOit7nsH0\nXqvMSgisxndGSH/yh8mcqrgWKCQ2lU7rg3MTlfhuF+CftL0ZIEQOxzBc0t2qYeDa\nR7ASPsf4xIPyG3TBNc7/Fj/4Oy5hBvIbx1ncZKnw81VqSbdkGUqJD+iTTDjJh0MC\nYfvjIP3rieI5+xl9u4JQCCxtkRNVOtj2wzZcgSCWEm+3g1BUHY4gyi1MoW1OHXLD\nbZK5IEzSR35OU2c5W4dd4bi2efqmyeTfP97z61eCItpFVmPcVcin/R+62f29STQ0\nK8ILfoQdnkA4BhFlUmkssx9JAALUBoGh2ykJuSMX1v+jYHAT10A3eBiJrzV+Fbkh\nkGXiSCrBH1JO6aAjyj2kVARZJbnY38U4aPC3EsSuUtfSLlsVb1WD498Kx4FbdxQk\nkWfjBN0ASY/PFpgWRlEgCprMm1HzoiYYxQX/k1fbihRV71s4b/KlkwmY1YCSmjG9\nBN8QVsi4FQpzLHnXGBKM\n=1PmZ\n-----END PGP SIGNATURE-----", "payload": "tree 5485bb8db8ebf72f26fc665c82946bb8ead2d952\nparent dfa52457167d64449152ad51bfb640da2723199f\nparent 421e6fc24d2e5bfc59746d2662531fb22f7e0720\nauthor Manish Goregaokar <manishsmail@gmail.com> 1462684093 -0700\ncommitter Manish Goregaokar <manishsmail@gmail.com> 1462716004 -0700\n\nRollup merge of #33373 - birkenfeld:issue-32555, r=bluss\n\nrustdoc: use btree map for where clauses\n\nto get more reproducible output.\n\nFixes: #32555\n\nI've looked at the other uses of HashMap in rustdoc, and they seem ok to (i.e. they use `iter()` and related only for constructing a new map, or when the output goes into independent files).\n\nNot sure what the cause of #24473 is, it shouldn't be where clauses, but maybe it was also fixed inbetween since May 2015.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c89d8c58ca83449d5c011172988d3179fd9168f1", "html_url": "https://github.com/rust-lang/rust/commit/c89d8c58ca83449d5c011172988d3179fd9168f1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c89d8c58ca83449d5c011172988d3179fd9168f1/comments", "author": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dfa52457167d64449152ad51bfb640da2723199f", "url": "https://api.github.com/repos/rust-lang/rust/commits/dfa52457167d64449152ad51bfb640da2723199f", "html_url": "https://github.com/rust-lang/rust/commit/dfa52457167d64449152ad51bfb640da2723199f"}, {"sha": "421e6fc24d2e5bfc59746d2662531fb22f7e0720", "url": "https://api.github.com/repos/rust-lang/rust/commits/421e6fc24d2e5bfc59746d2662531fb22f7e0720", "html_url": "https://github.com/rust-lang/rust/commit/421e6fc24d2e5bfc59746d2662531fb22f7e0720"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "c0faa04323e47ddd2435a393f72166920a848757", "filename": "src/librustdoc/clean/simplify.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/c89d8c58ca83449d5c011172988d3179fd9168f1/src%2Flibrustdoc%2Fclean%2Fsimplify.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c89d8c58ca83449d5c011172988d3179fd9168f1/src%2Flibrustdoc%2Fclean%2Fsimplify.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fclean%2Fsimplify.rs?ref=c89d8c58ca83449d5c011172988d3179fd9168f1", "patch": "@@ -27,7 +27,7 @@\n //! bounds by special casing scenarios such as these. Fun!\n \n use std::mem;\n-use std::collections::HashMap;\n+use std::collections::BTreeMap;\n \n use rustc::hir::def_id::DefId;\n use rustc::ty::subst;\n@@ -39,7 +39,7 @@ use core::DocContext;\n \n pub fn where_clauses(cx: &DocContext, clauses: Vec<WP>) -> Vec<WP> {\n     // First, partition the where clause into its separate components\n-    let mut params = HashMap::new();\n+    let mut params = BTreeMap::new();\n     let mut lifetimes = Vec::new();\n     let mut equalities = Vec::new();\n     let mut tybounds = Vec::new();\n@@ -62,7 +62,7 @@ pub fn where_clauses(cx: &DocContext, clauses: Vec<WP>) -> Vec<WP> {\n     // Simplify the type parameter bounds on all the generics\n     let mut params = params.into_iter().map(|(k, v)| {\n         (k, ty_bounds(v))\n-    }).collect::<HashMap<_, _>>();\n+    }).collect::<BTreeMap<_, _>>();\n \n     // Look for equality predicates on associated types that can be merged into\n     // general bound predicates"}]}