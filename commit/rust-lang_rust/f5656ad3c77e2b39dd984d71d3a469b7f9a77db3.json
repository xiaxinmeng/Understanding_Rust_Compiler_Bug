{"sha": "f5656ad3c77e2b39dd984d71d3a469b7f9a77db3", "node_id": "C_kwDOAAsO6NoAKGY1NjU2YWQzYzc3ZTJiMzlkZDk4NGQ3MWQzYTQ2OWI3ZjlhNzdkYjM", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-12-18T22:03:05Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-12-18T22:03:05Z"}, "message": "Rollup merge of #105842 - compiler-errors:arg-name-sugg, r=petrochenkov\n\nprint argument name in arg mismatch if possible\n\nA bit more contextual than just `/* value */`, at least when the argument is named something related to its context.\n\nThe UI test cases are... not super convincing, but also they're minimized tests.", "tree": {"sha": "ab3ba8a48c20e94955bd105004f0352a747ca13f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ab3ba8a48c20e94955bd105004f0352a747ca13f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f5656ad3c77e2b39dd984d71d3a469b7f9a77db3", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjn44ZCRBK7hj4Ov3rIwAAxDMIAJ16IUJB3cVhYp+VTaBMFkVX\nqPEd3Wv7RXZ3NRcbhc3/8L0GzUl0kk3CYW1vRbrr1Vzt5QqX11d0pt8Lrxyf5ekG\nrLs1G9G19ND4B04+Lr9gBXDV2SXL75Yq4qA6WDIgkJLNnP4DTHusbvZptfAl7y2d\nGD2KRtDAQiPlHVNhTtojhCAEbwQbvHdgL8+rvCWyX0gvjfvMMOw3FUBX6LM25rg6\nXScHD3LDc1UT8QUCpS/gXkfVNg4zE6Tw3OgYCXN1Z03NUan/ULv1Is/9zktiRib8\nn8GUABw0g7KrBD8HHjwv5Hhc2odgIom0/EQ3Ys8p9I5gcFsRBkqA+USaxu8ZzGA=\n=VuYg\n-----END PGP SIGNATURE-----\n", "payload": "tree ab3ba8a48c20e94955bd105004f0352a747ca13f\nparent e8fdd6912fe3aea7495ee193c74b88e5a6223a11\nparent f034cb431d88a89984eb75bdea120e34fabfc798\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1671400985 +0100\ncommitter GitHub <noreply@github.com> 1671400985 +0100\n\nRollup merge of #105842 - compiler-errors:arg-name-sugg, r=petrochenkov\n\nprint argument name in arg mismatch if possible\n\nA bit more contextual than just `/* value */`, at least when the argument is named something related to its context.\n\nThe UI test cases are... not super convincing, but also they're minimized tests.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f5656ad3c77e2b39dd984d71d3a469b7f9a77db3", "html_url": "https://github.com/rust-lang/rust/commit/f5656ad3c77e2b39dd984d71d3a469b7f9a77db3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f5656ad3c77e2b39dd984d71d3a469b7f9a77db3/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e8fdd6912fe3aea7495ee193c74b88e5a6223a11", "url": "https://api.github.com/repos/rust-lang/rust/commits/e8fdd6912fe3aea7495ee193c74b88e5a6223a11", "html_url": "https://github.com/rust-lang/rust/commit/e8fdd6912fe3aea7495ee193c74b88e5a6223a11"}, {"sha": "f034cb431d88a89984eb75bdea120e34fabfc798", "url": "https://api.github.com/repos/rust-lang/rust/commits/f034cb431d88a89984eb75bdea120e34fabfc798", "html_url": "https://github.com/rust-lang/rust/commit/f034cb431d88a89984eb75bdea120e34fabfc798"}], "stats": {"total": 23, "additions": 15, "deletions": 8}, "files": [{"sha": "829697c4b9a6b6dca70f08c5fb92cf461e9f8395", "filename": "compiler/rustc_hir_typeck/src/fn_ctxt/checks.rs", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/f5656ad3c77e2b39dd984d71d3a469b7f9a77db3/compiler%2Frustc_hir_typeck%2Fsrc%2Ffn_ctxt%2Fchecks.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f5656ad3c77e2b39dd984d71d3a469b7f9a77db3/compiler%2Frustc_hir_typeck%2Fsrc%2Ffn_ctxt%2Fchecks.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_typeck%2Fsrc%2Ffn_ctxt%2Fchecks.rs?ref=f5656ad3c77e2b39dd984d71d3a469b7f9a77db3", "patch": "@@ -28,7 +28,7 @@ use rustc_middle::ty::adjustment::AllowTwoPhase;\n use rustc_middle::ty::visit::TypeVisitable;\n use rustc_middle::ty::{self, DefIdTree, IsSuggestable, Ty, TypeSuperVisitable, TypeVisitor};\n use rustc_session::Session;\n-use rustc_span::symbol::Ident;\n+use rustc_span::symbol::{kw, Ident};\n use rustc_span::{self, sym, Span};\n use rustc_trait_selection::traits::{self, ObligationCauseCode, SelectionContext};\n \n@@ -1141,6 +1141,13 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n                         \"()\".to_string()\n                     } else if expected_ty.is_suggestable(tcx, false) {\n                         format!(\"/* {} */\", expected_ty)\n+                    } else if let Some(fn_def_id) = fn_def_id\n+                        && self.tcx.def_kind(fn_def_id).is_fn_like()\n+                        && let self_implicit = matches!(call_expr.kind, hir::ExprKind::MethodCall(..)) as usize\n+                        && let Some(arg) = self.tcx.fn_arg_names(fn_def_id).get(expected_idx.as_usize() + self_implicit)\n+                        && arg.name != kw::SelfLower\n+                    {\n+                        format!(\"/* {} */\", arg.name)\n                     } else {\n                         \"/* value */\".to_string()\n                     }"}, {"sha": "062b3768858dda362aa894cc03428c42b283e495", "filename": "src/test/ui/argument-suggestions/basic.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f5656ad3c77e2b39dd984d71d3a469b7f9a77db3/src%2Ftest%2Fui%2Fargument-suggestions%2Fbasic.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f5656ad3c77e2b39dd984d71d3a469b7f9a77db3/src%2Ftest%2Fui%2Fargument-suggestions%2Fbasic.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fargument-suggestions%2Fbasic.stderr?ref=f5656ad3c77e2b39dd984d71d3a469b7f9a77db3", "patch": "@@ -94,8 +94,8 @@ LL |     let closure = |x| x;\n    |                   ^^^\n help: provide the argument\n    |\n-LL |     closure(/* value */);\n-   |            ~~~~~~~~~~~~~\n+LL |     closure(/* x */);\n+   |            ~~~~~~~~~\n \n error: aborting due to 6 previous errors\n "}, {"sha": "163737895fea2219c7cd6b70687f3bd7ecd78abc", "filename": "src/test/ui/error-codes/E0057.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f5656ad3c77e2b39dd984d71d3a469b7f9a77db3/src%2Ftest%2Fui%2Ferror-codes%2FE0057.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f5656ad3c77e2b39dd984d71d3a469b7f9a77db3/src%2Ftest%2Fui%2Ferror-codes%2FE0057.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferror-codes%2FE0057.stderr?ref=f5656ad3c77e2b39dd984d71d3a469b7f9a77db3", "patch": "@@ -11,8 +11,8 @@ LL |     let f = |x| x * 3;\n    |             ^^^\n help: provide the argument\n    |\n-LL |     let a = f(/* value */);\n-   |              ~~~~~~~~~~~~~\n+LL |     let a = f(/* x */);\n+   |              ~~~~~~~~~\n \n error[E0057]: this function takes 1 argument but 2 arguments were supplied\n   --> $DIR/E0057.rs:5:13"}, {"sha": "0f051be2128b0486cfcda81f474e94ac8f563db3", "filename": "src/test/ui/higher-rank-trait-bounds/issue-58451.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f5656ad3c77e2b39dd984d71d3a469b7f9a77db3/src%2Ftest%2Fui%2Fhigher-rank-trait-bounds%2Fissue-58451.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f5656ad3c77e2b39dd984d71d3a469b7f9a77db3/src%2Ftest%2Fui%2Fhigher-rank-trait-bounds%2Fissue-58451.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fhigher-rank-trait-bounds%2Fissue-58451.stderr?ref=f5656ad3c77e2b39dd984d71d3a469b7f9a77db3", "patch": "@@ -11,8 +11,8 @@ LL | fn f<I>(i: I)\n    |    ^    ----\n help: provide the argument\n    |\n-LL |     f(&[f(/* value */)]);\n-   |          ~~~~~~~~~~~~~\n+LL |     f(&[f(/* i */)]);\n+   |          ~~~~~~~~~\n \n error: aborting due to previous error\n "}, {"sha": "1232b83c39171af52a5702476cc7823ef1e50816", "filename": "src/test/ui/issues/issue-3044.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f5656ad3c77e2b39dd984d71d3a469b7f9a77db3/src%2Ftest%2Fui%2Fissues%2Fissue-3044.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f5656ad3c77e2b39dd984d71d3a469b7f9a77db3/src%2Ftest%2Fui%2Fissues%2Fissue-3044.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-3044.stderr?ref=f5656ad3c77e2b39dd984d71d3a469b7f9a77db3", "patch": "@@ -13,7 +13,7 @@ help: provide the argument\n    |\n LL ~     needlesArr.iter().fold(|x, y| {\n LL +\n-LL ~     }, /* value */);\n+LL ~     }, /* f */);\n    |\n \n error: aborting due to previous error"}]}