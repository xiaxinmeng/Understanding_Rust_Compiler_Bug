{"sha": "7f886cf12b39e4079a9db1f3c5075b40de574a67", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdmODg2Y2YxMmIzOWU0MDc5YTlkYjFmM2M1MDc1YjQwZGU1NzRhNjc=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-08-09T08:58:48Z"}, "committer": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-08-09T17:01:20Z"}, "message": "Rollup merge of #53179 - gnzlbg:patch-3, r=alexcrichton\n\nWhitelist wasm32 simd128 target feature\n\nr? @alexcrichton", "tree": {"sha": "4c459bf147b429448d508efc8abd5c5372e9bb25", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4c459bf147b429448d508efc8abd5c5372e9bb25"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7f886cf12b39e4079a9db1f3c5075b40de574a67", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZ1R8CLMp8f2GxWoQ/vbIBR0OATwFAltsc2AACgkQ/vbIBR0O\nATycnA//QYMn/V+gNeSrNYL7Q1ii+Ub4cdgYsqYdMbGWh7z66NBjGL5uxWUpcChN\nUg4vE9W13S4/vmUqRH9Yo4ylrjkP+FsRaCirJaM7z2yQV2Bj+wvwf1AIHbe9DoUT\noTcWwL0prChKlxWWHjVcQIhQtAC7dyLD6z2ECXc3enhsVxOmX3l160gkZRUGc0p5\nCr9jtm15iAmtM/qtE1vBxl4XW1VbYv2cL3i8wb0hGEffjgqXM4YpSEqCa5EiuzXd\nrdtA2J/aICMdq9O9xn3QbsQ1tVKArGajMNO/DY+ODBSMuvu5epmIVPkLvlHYNcsH\nvjRv1Ot2RH1NPGIrAnxpylYf1k5e+xo5d40oKhwczulLBN5pIbFSoBaoqJ4NqHA1\nyFHu7ySc/P9el0B4mYoSX9UBc+pnkajm+w8A9VjxfSpf3RDrtzMRNhhhSYRD8xxE\numrKgXvQnchVEHA+5y7ds7OuVCRM/M9qMD/vUyc/YKSwxtESEO/DZy+xjI6kopHb\nmhqoYojc564xxD8RUvc6ek5R86JKztC26vi0xFmkQGC2AnAuLq434zokFU1VY3xc\n5bNctHXG2SAaJxVY0dYMXgpIzFe/HpeNCxm6RtZX5yndOpr1qpjXxh6lqHu/6kqt\nN/KLjp/sJsZfWulf3fdLfij2EQNkiHS1/6PsZpIr9SR/8tTK8Dc=\n=WDtL\n-----END PGP SIGNATURE-----", "payload": "tree 4c459bf147b429448d508efc8abd5c5372e9bb25\nparent 23601d08e6e3f52fec722e42362f727971475ced\nparent c92db3665622f1775358efe7eeb57d0db31cf6db\nauthor kennytm <kennytm@gmail.com> 1533805128 +0800\ncommitter kennytm <kennytm@gmail.com> 1533834080 +0800\n\nRollup merge of #53179 - gnzlbg:patch-3, r=alexcrichton\n\nWhitelist wasm32 simd128 target feature\n\nr? @alexcrichton\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7f886cf12b39e4079a9db1f3c5075b40de574a67", "html_url": "https://github.com/rust-lang/rust/commit/7f886cf12b39e4079a9db1f3c5075b40de574a67", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7f886cf12b39e4079a9db1f3c5075b40de574a67/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "23601d08e6e3f52fec722e42362f727971475ced", "url": "https://api.github.com/repos/rust-lang/rust/commits/23601d08e6e3f52fec722e42362f727971475ced", "html_url": "https://github.com/rust-lang/rust/commit/23601d08e6e3f52fec722e42362f727971475ced"}, {"sha": "c92db3665622f1775358efe7eeb57d0db31cf6db", "url": "https://api.github.com/repos/rust-lang/rust/commits/c92db3665622f1775358efe7eeb57d0db31cf6db", "html_url": "https://github.com/rust-lang/rust/commit/c92db3665622f1775358efe7eeb57d0db31cf6db"}], "stats": {"total": 10, "additions": 9, "deletions": 1}, "files": [{"sha": "ff26e0f35f00f085bdc595522e3169fef4c55ff4", "filename": "src/librustc_codegen_llvm/llvm_util.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/7f886cf12b39e4079a9db1f3c5075b40de574a67/src%2Flibrustc_codegen_llvm%2Fllvm_util.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7f886cf12b39e4079a9db1f3c5075b40de574a67/src%2Flibrustc_codegen_llvm%2Fllvm_util.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_llvm%2Fllvm_util.rs?ref=7f886cf12b39e4079a9db1f3c5075b40de574a67", "patch": "@@ -169,6 +169,10 @@ const MIPS_WHITELIST: &[(&str, Option<&str>)] = &[\n     (\"msa\", Some(\"mips_target_feature\")),\n ];\n \n+const WASM_WHITELIST: &[(&str, Option<&str>)] = &[\n+    (\"simd128\", Some(\"wasm_target_feature\")),\n+];\n+\n /// When rustdoc is running, provide a list of all known features so that all their respective\n /// primtives may be documented.\n ///\n@@ -181,6 +185,7 @@ pub fn all_known_features() -> impl Iterator<Item=(&'static str, Option<&'static\n         .chain(HEXAGON_WHITELIST.iter().cloned())\n         .chain(POWERPC_WHITELIST.iter().cloned())\n         .chain(MIPS_WHITELIST.iter().cloned())\n+        .chain(WASM_WHITELIST.iter().cloned())\n }\n \n pub fn to_llvm_feature<'a>(sess: &Session, s: &'a str) -> &'a str {\n@@ -228,6 +233,7 @@ pub fn target_feature_whitelist(sess: &Session)\n         \"hexagon\" => HEXAGON_WHITELIST,\n         \"mips\" | \"mips64\" => MIPS_WHITELIST,\n         \"powerpc\" | \"powerpc64\" => POWERPC_WHITELIST,\n+        \"wasm32\" => WASM_WHITELIST,\n         _ => &[],\n     }\n }"}, {"sha": "976708ae788161e97b4de6e18f81d9596b2ffbbf", "filename": "src/libsyntax/feature_gate.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7f886cf12b39e4079a9db1f3c5075b40de574a67/src%2Flibsyntax%2Ffeature_gate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7f886cf12b39e4079a9db1f3c5075b40de574a67/src%2Flibsyntax%2Ffeature_gate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Ffeature_gate.rs?ref=7f886cf12b39e4079a9db1f3c5075b40de574a67", "patch": "@@ -452,6 +452,7 @@ declare_features! (\n     (active, mmx_target_feature, \"1.27.0\", Some(44839), None),\n     (active, sse4a_target_feature, \"1.27.0\", Some(44839), None),\n     (active, tbm_target_feature, \"1.27.0\", Some(44839), None),\n+    (active, wasm_target_feature, \"1.30.0\", Some(44839), None),\n \n     // Allows macro invocations of the form `#[foo::bar]`\n     (active, proc_macro_path_invoc, \"1.27.0\", Some(38356), None),"}, {"sha": "8a045884cae315b495c2494ef7cd1bab06051f0f", "filename": "src/test/ui/target-feature-gate.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7f886cf12b39e4079a9db1f3c5075b40de574a67/src%2Ftest%2Fui%2Ftarget-feature-gate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7f886cf12b39e4079a9db1f3c5075b40de574a67/src%2Ftest%2Fui%2Ftarget-feature-gate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftarget-feature-gate.rs?ref=7f886cf12b39e4079a9db1f3c5075b40de574a67", "patch": "@@ -23,6 +23,7 @@\n // gate-test-hexagon_target_feature\n // gate-test-mips_target_feature\n // gate-test-mmx_target_feature\n+// gate-test-wasm_target_feature\n // min-llvm-version 6.0\n \n #[target_feature(enable = \"avx512bw\")]"}, {"sha": "f18bebc0c290dada8e67fd4444c6c4690c92373f", "filename": "src/test/ui/target-feature-gate.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7f886cf12b39e4079a9db1f3c5075b40de574a67/src%2Ftest%2Fui%2Ftarget-feature-gate.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7f886cf12b39e4079a9db1f3c5075b40de574a67/src%2Ftest%2Fui%2Ftarget-feature-gate.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftarget-feature-gate.stderr?ref=7f886cf12b39e4079a9db1f3c5075b40de574a67", "patch": "@@ -1,5 +1,5 @@\n error[E0658]: the target feature `avx512bw` is currently unstable (see issue #44839)\n-  --> $DIR/target-feature-gate.rs:28:18\n+  --> $DIR/target-feature-gate.rs:29:18\n    |\n LL | #[target_feature(enable = \"avx512bw\")]\n    |                  ^^^^^^^^^^^^^^^^^^^"}]}