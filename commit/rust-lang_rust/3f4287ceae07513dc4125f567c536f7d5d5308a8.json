{"sha": "3f4287ceae07513dc4125f567c536f7d5d5308a8", "node_id": "C_kwDOAAsO6NoAKDNmNDI4N2NlYWUwNzUxM2RjNDEyNWY1NjdjNTM2ZjdkNWQ1MzA4YTg", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-10-23T14:11:38Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-10-23T14:11:38Z"}, "message": "Auto merge of #9697 - Alexendoo:let-underscore-uplift, r=flip1995\n\nMark `let_underscore_lock` and `let_underscore_drop` as uplifted\n\nHere I've renamed both the uplifted lints, however rustc's `let_underscore_lock` is slightly less capable than the clippy lint as it doesn't catch `parking_lot` types or `Result<Guard, ..>`, should we still remove it? The `Result` change looks like it was unintentional to me so that could probably be fixed upstream\n\nchangelog: Uplift [`let_underscore_drop`] to rustc https://github.com/rust-lang/rust/pull/97739\nchangelog: Remove overlap between rustc's `let_underscore_lock` and Clippy's [`let_underscore_lock`]\n\nr? `@flip1995`", "tree": {"sha": "6ce4304e7631ebc1ba0b2f7ecf0b307ffb69ebb0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6ce4304e7631ebc1ba0b2f7ecf0b307ffb69ebb0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3f4287ceae07513dc4125f567c536f7d5d5308a8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3f4287ceae07513dc4125f567c536f7d5d5308a8", "html_url": "https://github.com/rust-lang/rust/commit/3f4287ceae07513dc4125f567c536f7d5d5308a8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3f4287ceae07513dc4125f567c536f7d5d5308a8/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8e03f91036547dd9d93839c0ff7d635a3e4e2577", "url": "https://api.github.com/repos/rust-lang/rust/commits/8e03f91036547dd9d93839c0ff7d635a3e4e2577", "html_url": "https://github.com/rust-lang/rust/commit/8e03f91036547dd9d93839c0ff7d635a3e4e2577"}, {"sha": "9306540f611c322178695efa7b1be8d14e6372dd", "url": "https://api.github.com/repos/rust-lang/rust/commits/9306540f611c322178695efa7b1be8d14e6372dd", "html_url": "https://github.com/rust-lang/rust/commit/9306540f611c322178695efa7b1be8d14e6372dd"}], "stats": {"total": 474, "additions": 145, "deletions": 329}, "files": [{"sha": "cfc1a21ea87feaf20effb9ec1a52902ed3d0895b", "filename": "clippy_lints/src/let_underscore.rs", "status": "modified", "additions": 41, "deletions": 103, "changes": 144, "blob_url": "https://github.com/rust-lang/rust/blob/3f4287ceae07513dc4125f567c536f7d5d5308a8/clippy_lints%2Fsrc%2Flet_underscore.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3f4287ceae07513dc4125f567c536f7d5d5308a8/clippy_lints%2Fsrc%2Flet_underscore.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flet_underscore.rs?ref=3f4287ceae07513dc4125f567c536f7d5d5308a8", "patch": "@@ -1,13 +1,11 @@\n use clippy_utils::diagnostics::span_lint_and_help;\n-use clippy_utils::ty::{is_must_use_ty, is_type_diagnostic_item, match_type};\n+use clippy_utils::ty::{is_must_use_ty, match_type};\n use clippy_utils::{is_must_use_func_call, paths};\n-use if_chain::if_chain;\n use rustc_hir::{Local, PatKind};\n use rustc_lint::{LateContext, LateLintPass};\n use rustc_middle::lint::in_external_macro;\n use rustc_middle::ty::subst::GenericArgKind;\n use rustc_session::{declare_lint_pass, declare_tool_lint};\n-use rustc_span::{sym, Symbol};\n \n declare_clippy_lint! {\n     /// ### What it does\n@@ -35,8 +33,9 @@ declare_clippy_lint! {\n \n declare_clippy_lint! {\n     /// ### What it does\n-    /// Checks for `let _ = sync_lock`.\n-    /// This supports `mutex` and `rwlock` in `std::sync` and `parking_lot`.\n+    /// Checks for `let _ = sync_lock`. This supports `mutex` and `rwlock` in\n+    /// `parking_lot`. For `std` locks see the `rustc` lint\n+    /// [`let_underscore_lock`](https://doc.rust-lang.org/nightly/rustc/lints/listing/deny-by-default.html#let-underscore-lock)\n     ///\n     /// ### Why is this bad?\n     /// This statement immediately drops the lock instead of\n@@ -60,47 +59,7 @@ declare_clippy_lint! {\n     \"non-binding let on a synchronization lock\"\n }\n \n-declare_clippy_lint! {\n-    /// ### What it does\n-    /// Checks for `let _ = <expr>`\n-    /// where expr has a type that implements `Drop`\n-    ///\n-    /// ### Why is this bad?\n-    /// This statement immediately drops the initializer\n-    /// expression instead of extending its lifetime to the end of the scope, which\n-    /// is often not intended. To extend the expression's lifetime to the end of the\n-    /// scope, use an underscore-prefixed name instead (i.e. _var). If you want to\n-    /// explicitly drop the expression, `std::mem::drop` conveys your intention\n-    /// better and is less error-prone.\n-    ///\n-    /// ### Example\n-    /// ```rust\n-    /// # struct DroppableItem;\n-    /// {\n-    ///     let _ = DroppableItem;\n-    ///     //                   ^ dropped here\n-    ///     /* more code */\n-    /// }\n-    /// ```\n-    ///\n-    /// Use instead:\n-    /// ```rust\n-    /// # struct DroppableItem;\n-    /// {\n-    ///     let _droppable = DroppableItem;\n-    ///     /* more code */\n-    ///     // dropped at end of scope\n-    /// }\n-    /// ```\n-    #[clippy::version = \"1.50.0\"]\n-    pub LET_UNDERSCORE_DROP,\n-    pedantic,\n-    \"non-binding let on a type that implements `Drop`\"\n-}\n-\n-declare_lint_pass!(LetUnderscore => [LET_UNDERSCORE_MUST_USE, LET_UNDERSCORE_LOCK, LET_UNDERSCORE_DROP]);\n-\n-const SYNC_GUARD_SYMS: [Symbol; 3] = [sym::MutexGuard, sym::RwLockReadGuard, sym::RwLockWriteGuard];\n+declare_lint_pass!(LetUnderscore => [LET_UNDERSCORE_MUST_USE, LET_UNDERSCORE_LOCK]);\n \n const SYNC_GUARD_PATHS: [&[&str]; 3] = [\n     &paths::PARKING_LOT_MUTEX_GUARD,\n@@ -110,64 +69,43 @@ const SYNC_GUARD_PATHS: [&[&str]; 3] = [\n \n impl<'tcx> LateLintPass<'tcx> for LetUnderscore {\n     fn check_local(&mut self, cx: &LateContext<'_>, local: &Local<'_>) {\n-        if in_external_macro(cx.tcx.sess, local.span) {\n-            return;\n-        }\n-\n-        if_chain! {\n-            if let PatKind::Wild = local.pat.kind;\n-            if let Some(init) = local.init;\n-            then {\n-                let init_ty = cx.typeck_results().expr_ty(init);\n-                let contains_sync_guard = init_ty.walk().any(|inner| match inner.unpack() {\n-                    GenericArgKind::Type(inner_ty) => {\n-                        SYNC_GUARD_SYMS\n-                            .iter()\n-                            .any(|&sym| is_type_diagnostic_item(cx, inner_ty, sym))\n-                            || SYNC_GUARD_PATHS.iter().any(|path| match_type(cx, inner_ty, path))\n-                    },\n-\n-                    GenericArgKind::Lifetime(_) | GenericArgKind::Const(_) => false,\n-                });\n-                if contains_sync_guard {\n-                    span_lint_and_help(\n-                        cx,\n-                        LET_UNDERSCORE_LOCK,\n-                        local.span,\n-                        \"non-binding let on a synchronization lock\",\n-                        None,\n-                        \"consider using an underscore-prefixed named \\\n-                            binding or dropping explicitly with `std::mem::drop`\",\n-                    );\n-                } else if init_ty.needs_drop(cx.tcx, cx.param_env) {\n-                    span_lint_and_help(\n-                        cx,\n-                        LET_UNDERSCORE_DROP,\n-                        local.span,\n-                        \"non-binding `let` on a type that implements `Drop`\",\n-                        None,\n-                        \"consider using an underscore-prefixed named \\\n+        if !in_external_macro(cx.tcx.sess, local.span)\n+            && let PatKind::Wild = local.pat.kind\n+            && let Some(init) = local.init\n+        {\n+            let init_ty = cx.typeck_results().expr_ty(init);\n+            let contains_sync_guard = init_ty.walk().any(|inner| match inner.unpack() {\n+                GenericArgKind::Type(inner_ty) => SYNC_GUARD_PATHS.iter().any(|path| match_type(cx, inner_ty, path)),\n+                GenericArgKind::Lifetime(_) | GenericArgKind::Const(_) => false,\n+            });\n+            if contains_sync_guard {\n+                span_lint_and_help(\n+                    cx,\n+                    LET_UNDERSCORE_LOCK,\n+                    local.span,\n+                    \"non-binding let on a synchronization lock\",\n+                    None,\n+                    \"consider using an underscore-prefixed named \\\n                             binding or dropping explicitly with `std::mem::drop`\",\n-                    );\n-                } else if is_must_use_ty(cx, cx.typeck_results().expr_ty(init)) {\n-                    span_lint_and_help(\n-                        cx,\n-                        LET_UNDERSCORE_MUST_USE,\n-                        local.span,\n-                        \"non-binding let on an expression with `#[must_use]` type\",\n-                        None,\n-                        \"consider explicitly using expression value\",\n-                    );\n-                } else if is_must_use_func_call(cx, init) {\n-                    span_lint_and_help(\n-                        cx,\n-                        LET_UNDERSCORE_MUST_USE,\n-                        local.span,\n-                        \"non-binding let on a result of a `#[must_use]` function\",\n-                        None,\n-                        \"consider explicitly using function result\",\n-                    );\n-                }\n+                );\n+            } else if is_must_use_ty(cx, cx.typeck_results().expr_ty(init)) {\n+                span_lint_and_help(\n+                    cx,\n+                    LET_UNDERSCORE_MUST_USE,\n+                    local.span,\n+                    \"non-binding let on an expression with `#[must_use]` type\",\n+                    None,\n+                    \"consider explicitly using expression value\",\n+                );\n+            } else if is_must_use_func_call(cx, init) {\n+                span_lint_and_help(\n+                    cx,\n+                    LET_UNDERSCORE_MUST_USE,\n+                    local.span,\n+                    \"non-binding let on a result of a `#[must_use]` function\",\n+                    None,\n+                    \"consider explicitly using function result\",\n+                );\n             }\n         }\n     }"}, {"sha": "44d3fec8bd24ff6e7c3f8635a45f33fcd90e65f5", "filename": "clippy_lints/src/lib.register_lints.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/3f4287ceae07513dc4125f567c536f7d5d5308a8/clippy_lints%2Fsrc%2Flib.register_lints.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3f4287ceae07513dc4125f567c536f7d5d5308a8/clippy_lints%2Fsrc%2Flib.register_lints.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.register_lints.rs?ref=3f4287ceae07513dc4125f567c536f7d5d5308a8", "patch": "@@ -214,7 +214,6 @@ store.register_lints(&[\n     len_zero::LEN_WITHOUT_IS_EMPTY,\n     len_zero::LEN_ZERO,\n     let_if_seq::USELESS_LET_IF_SEQ,\n-    let_underscore::LET_UNDERSCORE_DROP,\n     let_underscore::LET_UNDERSCORE_LOCK,\n     let_underscore::LET_UNDERSCORE_MUST_USE,\n     lifetimes::EXTRA_UNUSED_LIFETIMES,"}, {"sha": "768b3347c2aa94b0bb0001feb66652e31c8430da", "filename": "clippy_lints/src/lib.register_pedantic.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/3f4287ceae07513dc4125f567c536f7d5d5308a8/clippy_lints%2Fsrc%2Flib.register_pedantic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3f4287ceae07513dc4125f567c536f7d5d5308a8/clippy_lints%2Fsrc%2Flib.register_pedantic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.register_pedantic.rs?ref=3f4287ceae07513dc4125f567c536f7d5d5308a8", "patch": "@@ -39,7 +39,6 @@ store.register_group(true, \"clippy::pedantic\", Some(\"clippy_pedantic\"), vec![\n     LintId::of(items_after_statements::ITEMS_AFTER_STATEMENTS),\n     LintId::of(iter_not_returning_iterator::ITER_NOT_RETURNING_ITERATOR),\n     LintId::of(large_stack_arrays::LARGE_STACK_ARRAYS),\n-    LintId::of(let_underscore::LET_UNDERSCORE_DROP),\n     LintId::of(literal_representation::LARGE_DIGIT_GROUPS),\n     LintId::of(literal_representation::UNREADABLE_LITERAL),\n     LintId::of(loops::EXPLICIT_INTO_ITER_LOOP),"}, {"sha": "8e214218f23ae1d5f617147d4e9ca2ff42cb37af", "filename": "clippy_lints/src/renamed_lints.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/3f4287ceae07513dc4125f567c536f7d5d5308a8/clippy_lints%2Fsrc%2Frenamed_lints.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3f4287ceae07513dc4125f567c536f7d5d5308a8/clippy_lints%2Fsrc%2Frenamed_lints.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Frenamed_lints.rs?ref=3f4287ceae07513dc4125f567c536f7d5d5308a8", "patch": "@@ -11,8 +11,6 @@ pub static RENAMED_LINTS: &[(&str, &str)] = &[\n     (\"clippy::disallowed_method\", \"clippy::disallowed_methods\"),\n     (\"clippy::disallowed_type\", \"clippy::disallowed_types\"),\n     (\"clippy::eval_order_dependence\", \"clippy::mixed_read_write_in_expression\"),\n-    (\"clippy::for_loop_over_option\", \"for_loops_over_fallibles\"),\n-    (\"clippy::for_loop_over_result\", \"for_loops_over_fallibles\"),\n     (\"clippy::identity_conversion\", \"clippy::useless_conversion\"),\n     (\"clippy::if_let_some_result\", \"clippy::match_result_ok\"),\n     (\"clippy::logic_bug\", \"clippy::overly_complex_bool_expr\"),\n@@ -31,10 +29,13 @@ pub static RENAMED_LINTS: &[(&str, &str)] = &[\n     (\"clippy::to_string_in_display\", \"clippy::recursive_format_impl\"),\n     (\"clippy::zero_width_space\", \"clippy::invisible_characters\"),\n     (\"clippy::drop_bounds\", \"drop_bounds\"),\n+    (\"clippy::for_loop_over_option\", \"for_loops_over_fallibles\"),\n+    (\"clippy::for_loop_over_result\", \"for_loops_over_fallibles\"),\n     (\"clippy::for_loops_over_fallibles\", \"for_loops_over_fallibles\"),\n     (\"clippy::into_iter_on_array\", \"array_into_iter\"),\n     (\"clippy::invalid_atomic_ordering\", \"invalid_atomic_ordering\"),\n     (\"clippy::invalid_ref\", \"invalid_value\"),\n+    (\"clippy::let_underscore_drop\", \"let_underscore_drop\"),\n     (\"clippy::mem_discriminant_non_enum\", \"enum_intrinsics_non_enums\"),\n     (\"clippy::panic_params\", \"non_fmt_panics\"),\n     (\"clippy::positional_named_format_parameters\", \"named_arguments_used_positionally\"),"}, {"sha": "8385a4744ca0a80bf8c5815f63f950a4130c9c3b", "filename": "lintcheck/src/main.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3f4287ceae07513dc4125f567c536f7d5d5308a8/lintcheck%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3f4287ceae07513dc4125f567c536f7d5d5308a8/lintcheck%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/lintcheck%2Fsrc%2Fmain.rs?ref=3f4287ceae07513dc4125f567c536f7d5d5308a8", "patch": "@@ -678,7 +678,7 @@ fn main() {\n         .unwrap();\n \n     let server = config.recursive.then(|| {\n-        fs::remove_dir_all(\"target/lintcheck/shared_target_dir/recursive\").unwrap_or_default();\n+        let _ = fs::remove_dir_all(\"target/lintcheck/shared_target_dir/recursive\");\n \n         LintcheckServer::spawn(recursive_options)\n     });"}, {"sha": "e9aa6e880970a6918c0541fbdac937a19a22c0af", "filename": "src/docs.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/3f4287ceae07513dc4125f567c536f7d5d5308a8/src%2Fdocs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3f4287ceae07513dc4125f567c536f7d5d5308a8/src%2Fdocs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdocs.rs?ref=3f4287ceae07513dc4125f567c536f7d5d5308a8", "patch": "@@ -247,7 +247,6 @@ docs! {\n     \"len_without_is_empty\",\n     \"len_zero\",\n     \"let_and_return\",\n-    \"let_underscore_drop\",\n     \"let_underscore_lock\",\n     \"let_underscore_must_use\",\n     \"let_unit_value\","}, {"sha": "29ce9bf50ce6a61254591e93ee7dadb8a0bfdd9d", "filename": "src/docs/let_underscore_drop.txt", "status": "removed", "additions": 0, "deletions": 29, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/8e03f91036547dd9d93839c0ff7d635a3e4e2577/src%2Fdocs%2Flet_underscore_drop.txt", "raw_url": "https://github.com/rust-lang/rust/raw/8e03f91036547dd9d93839c0ff7d635a3e4e2577/src%2Fdocs%2Flet_underscore_drop.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdocs%2Flet_underscore_drop.txt?ref=8e03f91036547dd9d93839c0ff7d635a3e4e2577", "patch": "@@ -1,29 +0,0 @@\n-### What it does\n-Checks for `let _ = <expr>`\n-where expr has a type that implements `Drop`\n-\n-### Why is this bad?\n-This statement immediately drops the initializer\n-expression instead of extending its lifetime to the end of the scope, which\n-is often not intended. To extend the expression's lifetime to the end of the\n-scope, use an underscore-prefixed name instead (i.e. _var). If you want to\n-explicitly drop the expression, `std::mem::drop` conveys your intention\n-better and is less error-prone.\n-\n-### Example\n-```\n-{\n-    let _ = DroppableItem;\n-    //                   ^ dropped here\n-    /* more code */\n-}\n-```\n-\n-Use instead:\n-```\n-{\n-    let _droppable = DroppableItem;\n-    /* more code */\n-    // dropped at end of scope\n-}\n-```\n\\ No newline at end of file"}, {"sha": "88394a0a267a1f36d8a524c7bb28510582df9f8b", "filename": "src/docs/let_underscore_lock.txt", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/3f4287ceae07513dc4125f567c536f7d5d5308a8/src%2Fdocs%2Flet_underscore_lock.txt", "raw_url": "https://github.com/rust-lang/rust/raw/3f4287ceae07513dc4125f567c536f7d5d5308a8/src%2Fdocs%2Flet_underscore_lock.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdocs%2Flet_underscore_lock.txt?ref=3f4287ceae07513dc4125f567c536f7d5d5308a8", "patch": "@@ -1,6 +1,7 @@\n ### What it does\n-Checks for `let _ = sync_lock`.\n-This supports `mutex` and `rwlock` in `std::sync` and `parking_lot`.\n+Checks for `let _ = sync_lock`. This supports `mutex` and `rwlock` in\n+`parking_lot`. For `std` locks see the `rustc` lint\n+[`let_underscore_lock`](https://doc.rust-lang.org/nightly/rustc/lints/listing/deny-by-default.html#let-underscore-lock)\n \n ### Why is this bad?\n This statement immediately drops the lock instead of"}, {"sha": "11b50492ab29055ec6223164a2a768a53b9083a8", "filename": "tests/ui/let_underscore_drop.rs", "status": "removed", "additions": 0, "deletions": 28, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/8e03f91036547dd9d93839c0ff7d635a3e4e2577/tests%2Fui%2Flet_underscore_drop.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8e03f91036547dd9d93839c0ff7d635a3e4e2577/tests%2Fui%2Flet_underscore_drop.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Flet_underscore_drop.rs?ref=8e03f91036547dd9d93839c0ff7d635a3e4e2577", "patch": "@@ -1,28 +0,0 @@\n-#![warn(clippy::let_underscore_drop)]\n-#![allow(clippy::let_unit_value)]\n-\n-struct Droppable;\n-\n-impl Drop for Droppable {\n-    fn drop(&mut self) {}\n-}\n-\n-fn main() {\n-    let unit = ();\n-    let boxed = Box::new(());\n-    let droppable = Droppable;\n-    let optional = Some(Droppable);\n-\n-    let _ = ();\n-    let _ = Box::new(());\n-    let _ = Droppable;\n-    let _ = Some(Droppable);\n-\n-    // no lint for reference\n-    let _ = droppable_ref();\n-}\n-\n-#[must_use]\n-fn droppable_ref() -> &'static mut Droppable {\n-    unimplemented!()\n-}"}, {"sha": "324b7cd431d4685da30289fea45c888dbedaa1b9", "filename": "tests/ui/let_underscore_drop.stderr", "status": "removed", "additions": 0, "deletions": 27, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/8e03f91036547dd9d93839c0ff7d635a3e4e2577/tests%2Fui%2Flet_underscore_drop.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8e03f91036547dd9d93839c0ff7d635a3e4e2577/tests%2Fui%2Flet_underscore_drop.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Flet_underscore_drop.stderr?ref=8e03f91036547dd9d93839c0ff7d635a3e4e2577", "patch": "@@ -1,27 +0,0 @@\n-error: non-binding `let` on a type that implements `Drop`\n-  --> $DIR/let_underscore_drop.rs:17:5\n-   |\n-LL |     let _ = Box::new(());\n-   |     ^^^^^^^^^^^^^^^^^^^^^\n-   |\n-   = help: consider using an underscore-prefixed named binding or dropping explicitly with `std::mem::drop`\n-   = note: `-D clippy::let-underscore-drop` implied by `-D warnings`\n-\n-error: non-binding `let` on a type that implements `Drop`\n-  --> $DIR/let_underscore_drop.rs:18:5\n-   |\n-LL |     let _ = Droppable;\n-   |     ^^^^^^^^^^^^^^^^^^\n-   |\n-   = help: consider using an underscore-prefixed named binding or dropping explicitly with `std::mem::drop`\n-\n-error: non-binding `let` on a type that implements `Drop`\n-  --> $DIR/let_underscore_drop.rs:19:5\n-   |\n-LL |     let _ = Some(Droppable);\n-   |     ^^^^^^^^^^^^^^^^^^^^^^^^\n-   |\n-   = help: consider using an underscore-prefixed named binding or dropping explicitly with `std::mem::drop`\n-\n-error: aborting due to 3 previous errors\n-"}, {"sha": "4dff4d766bcc382ada595d3b5ade11afc3d420dc", "filename": "tests/ui/let_underscore_lock.rs", "status": "modified", "additions": 17, "deletions": 14, "changes": 31, "blob_url": "https://github.com/rust-lang/rust/blob/3f4287ceae07513dc4125f567c536f7d5d5308a8/tests%2Fui%2Flet_underscore_lock.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3f4287ceae07513dc4125f567c536f7d5d5308a8/tests%2Fui%2Flet_underscore_lock.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Flet_underscore_lock.rs?ref=3f4287ceae07513dc4125f567c536f7d5d5308a8", "patch": "@@ -3,20 +3,6 @@\n extern crate parking_lot;\n \n fn main() {\n-    let m = std::sync::Mutex::new(());\n-    let rw = std::sync::RwLock::new(());\n-\n-    let _ = m.lock();\n-    let _ = rw.read();\n-    let _ = rw.write();\n-    let _ = m.try_lock();\n-    let _ = rw.try_read();\n-    let _ = rw.try_write();\n-\n-    // These shouldn't throw an error.\n-    let _ = m;\n-    let _ = rw;\n-\n     use parking_lot::{lock_api::RawMutex, Mutex, RwLock};\n \n     let p_m: Mutex<()> = Mutex::const_new(RawMutex::INIT, ());\n@@ -34,3 +20,20 @@ fn main() {\n     let _ = p_m1;\n     let _ = p_rw;\n }\n+\n+fn uplifted() {\n+    // shouldn't lint std locks as they were uplifted as rustc's `let_underscore_lock`\n+\n+    let m = std::sync::Mutex::new(());\n+    let rw = std::sync::RwLock::new(());\n+\n+    let _ = m.lock();\n+    let _ = rw.read();\n+    let _ = rw.write();\n+    let _ = m.try_lock();\n+    let _ = rw.try_read();\n+    let _ = rw.try_write();\n+\n+    let _ = m;\n+    let _ = rw;\n+}"}, {"sha": "89350b92e82980e7f86800401f8a778c570c9661", "filename": "tests/ui/let_underscore_lock.stderr", "status": "modified", "additions": 5, "deletions": 53, "changes": 58, "blob_url": "https://github.com/rust-lang/rust/blob/3f4287ceae07513dc4125f567c536f7d5d5308a8/tests%2Fui%2Flet_underscore_lock.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3f4287ceae07513dc4125f567c536f7d5d5308a8/tests%2Fui%2Flet_underscore_lock.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Flet_underscore_lock.stderr?ref=3f4287ceae07513dc4125f567c536f7d5d5308a8", "patch": "@@ -1,83 +1,35 @@\n error: non-binding let on a synchronization lock\n   --> $DIR/let_underscore_lock.rs:9:5\n    |\n-LL |     let _ = m.lock();\n-   |     ^^^^^^^^^^^^^^^^^\n-   |\n-   = help: consider using an underscore-prefixed named binding or dropping explicitly with `std::mem::drop`\n-   = note: `-D clippy::let-underscore-lock` implied by `-D warnings`\n-\n-error: non-binding let on a synchronization lock\n-  --> $DIR/let_underscore_lock.rs:10:5\n-   |\n-LL |     let _ = rw.read();\n-   |     ^^^^^^^^^^^^^^^^^^\n-   |\n-   = help: consider using an underscore-prefixed named binding or dropping explicitly with `std::mem::drop`\n-\n-error: non-binding let on a synchronization lock\n-  --> $DIR/let_underscore_lock.rs:11:5\n-   |\n-LL |     let _ = rw.write();\n-   |     ^^^^^^^^^^^^^^^^^^^\n-   |\n-   = help: consider using an underscore-prefixed named binding or dropping explicitly with `std::mem::drop`\n-\n-error: non-binding let on a synchronization lock\n-  --> $DIR/let_underscore_lock.rs:12:5\n-   |\n-LL |     let _ = m.try_lock();\n-   |     ^^^^^^^^^^^^^^^^^^^^^\n-   |\n-   = help: consider using an underscore-prefixed named binding or dropping explicitly with `std::mem::drop`\n-\n-error: non-binding let on a synchronization lock\n-  --> $DIR/let_underscore_lock.rs:13:5\n-   |\n-LL |     let _ = rw.try_read();\n-   |     ^^^^^^^^^^^^^^^^^^^^^^\n-   |\n-   = help: consider using an underscore-prefixed named binding or dropping explicitly with `std::mem::drop`\n-\n-error: non-binding let on a synchronization lock\n-  --> $DIR/let_underscore_lock.rs:14:5\n-   |\n-LL |     let _ = rw.try_write();\n-   |     ^^^^^^^^^^^^^^^^^^^^^^^\n-   |\n-   = help: consider using an underscore-prefixed named binding or dropping explicitly with `std::mem::drop`\n-\n-error: non-binding let on a synchronization lock\n-  --> $DIR/let_underscore_lock.rs:23:5\n-   |\n LL |     let _ = p_m.lock();\n    |     ^^^^^^^^^^^^^^^^^^^\n    |\n    = help: consider using an underscore-prefixed named binding or dropping explicitly with `std::mem::drop`\n+   = note: `-D clippy::let-underscore-lock` implied by `-D warnings`\n \n error: non-binding let on a synchronization lock\n-  --> $DIR/let_underscore_lock.rs:26:5\n+  --> $DIR/let_underscore_lock.rs:12:5\n    |\n LL |     let _ = p_m1.lock();\n    |     ^^^^^^^^^^^^^^^^^^^^\n    |\n    = help: consider using an underscore-prefixed named binding or dropping explicitly with `std::mem::drop`\n \n error: non-binding let on a synchronization lock\n-  --> $DIR/let_underscore_lock.rs:29:5\n+  --> $DIR/let_underscore_lock.rs:15:5\n    |\n LL |     let _ = p_rw.read();\n    |     ^^^^^^^^^^^^^^^^^^^^\n    |\n    = help: consider using an underscore-prefixed named binding or dropping explicitly with `std::mem::drop`\n \n error: non-binding let on a synchronization lock\n-  --> $DIR/let_underscore_lock.rs:30:5\n+  --> $DIR/let_underscore_lock.rs:16:5\n    |\n LL |     let _ = p_rw.write();\n    |     ^^^^^^^^^^^^^^^^^^^^^\n    |\n    = help: consider using an underscore-prefixed named binding or dropping explicitly with `std::mem::drop`\n \n-error: aborting due to 10 previous errors\n+error: aborting due to 4 previous errors\n "}, {"sha": "53628ef6531aaad6129b8d482ea48c96d7ecc884", "filename": "tests/ui/map_flatten_fixable.fixed", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/3f4287ceae07513dc4125f567c536f7d5d5308a8/tests%2Fui%2Fmap_flatten_fixable.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/3f4287ceae07513dc4125f567c536f7d5d5308a8/tests%2Fui%2Fmap_flatten_fixable.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmap_flatten_fixable.fixed?ref=3f4287ceae07513dc4125f567c536f7d5d5308a8", "patch": "@@ -1,7 +1,6 @@\n // run-rustfix\n \n #![warn(clippy::all, clippy::pedantic)]\n-#![allow(clippy::let_underscore_drop)]\n #![allow(clippy::missing_docs_in_private_items)]\n #![allow(clippy::map_identity)]\n #![allow(clippy::redundant_closure)]"}, {"sha": "76016c8ed3cd1826cc3c8eb5ae00dca1a597aa5b", "filename": "tests/ui/map_flatten_fixable.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/3f4287ceae07513dc4125f567c536f7d5d5308a8/tests%2Fui%2Fmap_flatten_fixable.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3f4287ceae07513dc4125f567c536f7d5d5308a8/tests%2Fui%2Fmap_flatten_fixable.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmap_flatten_fixable.rs?ref=3f4287ceae07513dc4125f567c536f7d5d5308a8", "patch": "@@ -1,7 +1,6 @@\n // run-rustfix\n \n #![warn(clippy::all, clippy::pedantic)]\n-#![allow(clippy::let_underscore_drop)]\n #![allow(clippy::missing_docs_in_private_items)]\n #![allow(clippy::map_identity)]\n #![allow(clippy::redundant_closure)]"}, {"sha": "b6b0c4d09c37b5eb65bcfeac5cb428b113e165c0", "filename": "tests/ui/map_flatten_fixable.stderr", "status": "modified", "additions": 9, "deletions": 9, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/3f4287ceae07513dc4125f567c536f7d5d5308a8/tests%2Fui%2Fmap_flatten_fixable.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3f4287ceae07513dc4125f567c536f7d5d5308a8/tests%2Fui%2Fmap_flatten_fixable.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmap_flatten_fixable.stderr?ref=3f4287ceae07513dc4125f567c536f7d5d5308a8", "patch": "@@ -1,49 +1,49 @@\n error: called `map(..).flatten()` on `Iterator`\n-  --> $DIR/map_flatten_fixable.rs:18:47\n+  --> $DIR/map_flatten_fixable.rs:17:47\n    |\n LL |     let _: Vec<_> = vec![5_i8; 6].into_iter().map(option_id).flatten().collect();\n    |                                               ^^^^^^^^^^^^^^^^^^^^^^^^ help: try replacing `map` with `filter_map` and remove the `.flatten()`: `filter_map(option_id)`\n    |\n    = note: `-D clippy::map-flatten` implied by `-D warnings`\n \n error: called `map(..).flatten()` on `Iterator`\n-  --> $DIR/map_flatten_fixable.rs:19:47\n+  --> $DIR/map_flatten_fixable.rs:18:47\n    |\n LL |     let _: Vec<_> = vec![5_i8; 6].into_iter().map(option_id_ref).flatten().collect();\n    |                                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try replacing `map` with `filter_map` and remove the `.flatten()`: `filter_map(option_id_ref)`\n \n error: called `map(..).flatten()` on `Iterator`\n-  --> $DIR/map_flatten_fixable.rs:20:47\n+  --> $DIR/map_flatten_fixable.rs:19:47\n    |\n LL |     let _: Vec<_> = vec![5_i8; 6].into_iter().map(option_id_closure).flatten().collect();\n    |                                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try replacing `map` with `filter_map` and remove the `.flatten()`: `filter_map(option_id_closure)`\n \n error: called `map(..).flatten()` on `Iterator`\n-  --> $DIR/map_flatten_fixable.rs:21:47\n+  --> $DIR/map_flatten_fixable.rs:20:47\n    |\n LL |     let _: Vec<_> = vec![5_i8; 6].into_iter().map(|x| x.checked_add(1)).flatten().collect();\n    |                                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try replacing `map` with `filter_map` and remove the `.flatten()`: `filter_map(|x| x.checked_add(1))`\n \n error: called `map(..).flatten()` on `Iterator`\n-  --> $DIR/map_flatten_fixable.rs:24:47\n+  --> $DIR/map_flatten_fixable.rs:23:47\n    |\n LL |     let _: Vec<_> = vec![5_i8; 6].into_iter().map(|x| 0..x).flatten().collect();\n    |                                               ^^^^^^^^^^^^^^^^^^^^^^^ help: try replacing `map` with `flat_map` and remove the `.flatten()`: `flat_map(|x| 0..x)`\n \n error: called `map(..).flatten()` on `Option`\n-  --> $DIR/map_flatten_fixable.rs:27:40\n+  --> $DIR/map_flatten_fixable.rs:26:40\n    |\n LL |     let _: Option<_> = (Some(Some(1))).map(|x| x).flatten();\n    |                                        ^^^^^^^^^^^^^^^^^^^^ help: try replacing `map` with `and_then` and remove the `.flatten()`: `and_then(|x| x)`\n \n error: called `map(..).flatten()` on `Result`\n-  --> $DIR/map_flatten_fixable.rs:30:42\n+  --> $DIR/map_flatten_fixable.rs:29:42\n    |\n LL |     let _: Result<_, &str> = (Ok(Ok(1))).map(|x| x).flatten();\n    |                                          ^^^^^^^^^^^^^^^^^^^^ help: try replacing `map` with `and_then` and remove the `.flatten()`: `and_then(|x| x)`\n \n error: called `map(..).flatten()` on `Iterator`\n-  --> $DIR/map_flatten_fixable.rs:39:10\n+  --> $DIR/map_flatten_fixable.rs:38:10\n    |\n LL |           .map(|n| match n {\n    |  __________^\n@@ -72,7 +72,7 @@ LL ~         });\n    |\n \n error: called `map(..).flatten()` on `Option`\n-  --> $DIR/map_flatten_fixable.rs:59:10\n+  --> $DIR/map_flatten_fixable.rs:58:10\n    |\n LL |           .map(|_| {\n    |  __________^"}, {"sha": "689928f0479468fb8c0305b11d1299e01fd4f4ca", "filename": "tests/ui/rename.fixed", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/3f4287ceae07513dc4125f567c536f7d5d5308a8/tests%2Fui%2Frename.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/3f4287ceae07513dc4125f567c536f7d5d5308a8/tests%2Fui%2Frename.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Frename.fixed?ref=3f4287ceae07513dc4125f567c536f7d5d5308a8", "patch": "@@ -12,7 +12,6 @@\n #![allow(clippy::disallowed_methods)]\n #![allow(clippy::disallowed_types)]\n #![allow(clippy::mixed_read_write_in_expression)]\n-#![allow(for_loops_over_fallibles)]\n #![allow(clippy::useless_conversion)]\n #![allow(clippy::match_result_ok)]\n #![allow(clippy::overly_complex_bool_expr)]\n@@ -27,9 +26,11 @@\n #![allow(clippy::recursive_format_impl)]\n #![allow(clippy::invisible_characters)]\n #![allow(drop_bounds)]\n+#![allow(for_loops_over_fallibles)]\n #![allow(array_into_iter)]\n #![allow(invalid_atomic_ordering)]\n #![allow(invalid_value)]\n+#![allow(let_underscore_drop)]\n #![allow(enum_intrinsics_non_enums)]\n #![allow(non_fmt_panics)]\n #![allow(named_arguments_used_positionally)]\n@@ -45,8 +46,6 @@\n #![warn(clippy::disallowed_methods)]\n #![warn(clippy::disallowed_types)]\n #![warn(clippy::mixed_read_write_in_expression)]\n-#![warn(for_loops_over_fallibles)]\n-#![warn(for_loops_over_fallibles)]\n #![warn(clippy::useless_conversion)]\n #![warn(clippy::match_result_ok)]\n #![warn(clippy::overly_complex_bool_expr)]\n@@ -66,9 +65,12 @@\n #![warn(clippy::invisible_characters)]\n #![warn(drop_bounds)]\n #![warn(for_loops_over_fallibles)]\n+#![warn(for_loops_over_fallibles)]\n+#![warn(for_loops_over_fallibles)]\n #![warn(array_into_iter)]\n #![warn(invalid_atomic_ordering)]\n #![warn(invalid_value)]\n+#![warn(let_underscore_drop)]\n #![warn(enum_intrinsics_non_enums)]\n #![warn(non_fmt_panics)]\n #![warn(named_arguments_used_positionally)]"}, {"sha": "b74aa650ffd475946adc1f595d0e2d21b4d0fa15", "filename": "tests/ui/rename.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/3f4287ceae07513dc4125f567c536f7d5d5308a8/tests%2Fui%2Frename.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3f4287ceae07513dc4125f567c536f7d5d5308a8/tests%2Fui%2Frename.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Frename.rs?ref=3f4287ceae07513dc4125f567c536f7d5d5308a8", "patch": "@@ -12,7 +12,6 @@\n #![allow(clippy::disallowed_methods)]\n #![allow(clippy::disallowed_types)]\n #![allow(clippy::mixed_read_write_in_expression)]\n-#![allow(for_loops_over_fallibles)]\n #![allow(clippy::useless_conversion)]\n #![allow(clippy::match_result_ok)]\n #![allow(clippy::overly_complex_bool_expr)]\n@@ -27,9 +26,11 @@\n #![allow(clippy::recursive_format_impl)]\n #![allow(clippy::invisible_characters)]\n #![allow(drop_bounds)]\n+#![allow(for_loops_over_fallibles)]\n #![allow(array_into_iter)]\n #![allow(invalid_atomic_ordering)]\n #![allow(invalid_value)]\n+#![allow(let_underscore_drop)]\n #![allow(enum_intrinsics_non_enums)]\n #![allow(non_fmt_panics)]\n #![allow(named_arguments_used_positionally)]\n@@ -45,8 +46,6 @@\n #![warn(clippy::disallowed_method)]\n #![warn(clippy::disallowed_type)]\n #![warn(clippy::eval_order_dependence)]\n-#![warn(clippy::for_loop_over_option)]\n-#![warn(clippy::for_loop_over_result)]\n #![warn(clippy::identity_conversion)]\n #![warn(clippy::if_let_some_result)]\n #![warn(clippy::logic_bug)]\n@@ -65,10 +64,13 @@\n #![warn(clippy::to_string_in_display)]\n #![warn(clippy::zero_width_space)]\n #![warn(clippy::drop_bounds)]\n+#![warn(clippy::for_loop_over_option)]\n+#![warn(clippy::for_loop_over_result)]\n #![warn(clippy::for_loops_over_fallibles)]\n #![warn(clippy::into_iter_on_array)]\n #![warn(clippy::invalid_atomic_ordering)]\n #![warn(clippy::invalid_ref)]\n+#![warn(clippy::let_underscore_drop)]\n #![warn(clippy::mem_discriminant_non_enum)]\n #![warn(clippy::panic_params)]\n #![warn(clippy::positional_named_format_parameters)]"}, {"sha": "622a32c5908aeaa3689041a42a6fa6e6f8920be7", "filename": "tests/ui/rename.stderr", "status": "modified", "additions": 56, "deletions": 50, "changes": 106, "blob_url": "https://github.com/rust-lang/rust/blob/3f4287ceae07513dc4125f567c536f7d5d5308a8/tests%2Fui%2Frename.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3f4287ceae07513dc4125f567c536f7d5d5308a8/tests%2Fui%2Frename.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Frename.stderr?ref=3f4287ceae07513dc4125f567c536f7d5d5308a8", "patch": "@@ -1,238 +1,244 @@\n error: lint `clippy::blacklisted_name` has been renamed to `clippy::disallowed_names`\n-  --> $DIR/rename.rs:39:9\n+  --> $DIR/rename.rs:40:9\n    |\n LL | #![warn(clippy::blacklisted_name)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `clippy::disallowed_names`\n    |\n    = note: `-D renamed-and-removed-lints` implied by `-D warnings`\n \n error: lint `clippy::block_in_if_condition_expr` has been renamed to `clippy::blocks_in_if_conditions`\n-  --> $DIR/rename.rs:40:9\n+  --> $DIR/rename.rs:41:9\n    |\n LL | #![warn(clippy::block_in_if_condition_expr)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `clippy::blocks_in_if_conditions`\n \n error: lint `clippy::block_in_if_condition_stmt` has been renamed to `clippy::blocks_in_if_conditions`\n-  --> $DIR/rename.rs:41:9\n+  --> $DIR/rename.rs:42:9\n    |\n LL | #![warn(clippy::block_in_if_condition_stmt)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `clippy::blocks_in_if_conditions`\n \n error: lint `clippy::box_vec` has been renamed to `clippy::box_collection`\n-  --> $DIR/rename.rs:42:9\n+  --> $DIR/rename.rs:43:9\n    |\n LL | #![warn(clippy::box_vec)]\n    |         ^^^^^^^^^^^^^^^ help: use the new name: `clippy::box_collection`\n \n error: lint `clippy::const_static_lifetime` has been renamed to `clippy::redundant_static_lifetimes`\n-  --> $DIR/rename.rs:43:9\n+  --> $DIR/rename.rs:44:9\n    |\n LL | #![warn(clippy::const_static_lifetime)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `clippy::redundant_static_lifetimes`\n \n error: lint `clippy::cyclomatic_complexity` has been renamed to `clippy::cognitive_complexity`\n-  --> $DIR/rename.rs:44:9\n+  --> $DIR/rename.rs:45:9\n    |\n LL | #![warn(clippy::cyclomatic_complexity)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `clippy::cognitive_complexity`\n \n error: lint `clippy::disallowed_method` has been renamed to `clippy::disallowed_methods`\n-  --> $DIR/rename.rs:45:9\n+  --> $DIR/rename.rs:46:9\n    |\n LL | #![warn(clippy::disallowed_method)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `clippy::disallowed_methods`\n \n error: lint `clippy::disallowed_type` has been renamed to `clippy::disallowed_types`\n-  --> $DIR/rename.rs:46:9\n+  --> $DIR/rename.rs:47:9\n    |\n LL | #![warn(clippy::disallowed_type)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `clippy::disallowed_types`\n \n error: lint `clippy::eval_order_dependence` has been renamed to `clippy::mixed_read_write_in_expression`\n-  --> $DIR/rename.rs:47:9\n+  --> $DIR/rename.rs:48:9\n    |\n LL | #![warn(clippy::eval_order_dependence)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `clippy::mixed_read_write_in_expression`\n \n-error: lint `clippy::for_loop_over_option` has been renamed to `for_loops_over_fallibles`\n-  --> $DIR/rename.rs:48:9\n-   |\n-LL | #![warn(clippy::for_loop_over_option)]\n-   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `for_loops_over_fallibles`\n-\n-error: lint `clippy::for_loop_over_result` has been renamed to `for_loops_over_fallibles`\n-  --> $DIR/rename.rs:49:9\n-   |\n-LL | #![warn(clippy::for_loop_over_result)]\n-   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `for_loops_over_fallibles`\n-\n error: lint `clippy::identity_conversion` has been renamed to `clippy::useless_conversion`\n-  --> $DIR/rename.rs:50:9\n+  --> $DIR/rename.rs:49:9\n    |\n LL | #![warn(clippy::identity_conversion)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `clippy::useless_conversion`\n \n error: lint `clippy::if_let_some_result` has been renamed to `clippy::match_result_ok`\n-  --> $DIR/rename.rs:51:9\n+  --> $DIR/rename.rs:50:9\n    |\n LL | #![warn(clippy::if_let_some_result)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `clippy::match_result_ok`\n \n error: lint `clippy::logic_bug` has been renamed to `clippy::overly_complex_bool_expr`\n-  --> $DIR/rename.rs:52:9\n+  --> $DIR/rename.rs:51:9\n    |\n LL | #![warn(clippy::logic_bug)]\n    |         ^^^^^^^^^^^^^^^^^ help: use the new name: `clippy::overly_complex_bool_expr`\n \n error: lint `clippy::new_without_default_derive` has been renamed to `clippy::new_without_default`\n-  --> $DIR/rename.rs:53:9\n+  --> $DIR/rename.rs:52:9\n    |\n LL | #![warn(clippy::new_without_default_derive)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `clippy::new_without_default`\n \n error: lint `clippy::option_and_then_some` has been renamed to `clippy::bind_instead_of_map`\n-  --> $DIR/rename.rs:54:9\n+  --> $DIR/rename.rs:53:9\n    |\n LL | #![warn(clippy::option_and_then_some)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `clippy::bind_instead_of_map`\n \n error: lint `clippy::option_expect_used` has been renamed to `clippy::expect_used`\n-  --> $DIR/rename.rs:55:9\n+  --> $DIR/rename.rs:54:9\n    |\n LL | #![warn(clippy::option_expect_used)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `clippy::expect_used`\n \n error: lint `clippy::option_map_unwrap_or` has been renamed to `clippy::map_unwrap_or`\n-  --> $DIR/rename.rs:56:9\n+  --> $DIR/rename.rs:55:9\n    |\n LL | #![warn(clippy::option_map_unwrap_or)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `clippy::map_unwrap_or`\n \n error: lint `clippy::option_map_unwrap_or_else` has been renamed to `clippy::map_unwrap_or`\n-  --> $DIR/rename.rs:57:9\n+  --> $DIR/rename.rs:56:9\n    |\n LL | #![warn(clippy::option_map_unwrap_or_else)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `clippy::map_unwrap_or`\n \n error: lint `clippy::option_unwrap_used` has been renamed to `clippy::unwrap_used`\n-  --> $DIR/rename.rs:58:9\n+  --> $DIR/rename.rs:57:9\n    |\n LL | #![warn(clippy::option_unwrap_used)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `clippy::unwrap_used`\n \n error: lint `clippy::ref_in_deref` has been renamed to `clippy::needless_borrow`\n-  --> $DIR/rename.rs:59:9\n+  --> $DIR/rename.rs:58:9\n    |\n LL | #![warn(clippy::ref_in_deref)]\n    |         ^^^^^^^^^^^^^^^^^^^^ help: use the new name: `clippy::needless_borrow`\n \n error: lint `clippy::result_expect_used` has been renamed to `clippy::expect_used`\n-  --> $DIR/rename.rs:60:9\n+  --> $DIR/rename.rs:59:9\n    |\n LL | #![warn(clippy::result_expect_used)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `clippy::expect_used`\n \n error: lint `clippy::result_map_unwrap_or_else` has been renamed to `clippy::map_unwrap_or`\n-  --> $DIR/rename.rs:61:9\n+  --> $DIR/rename.rs:60:9\n    |\n LL | #![warn(clippy::result_map_unwrap_or_else)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `clippy::map_unwrap_or`\n \n error: lint `clippy::result_unwrap_used` has been renamed to `clippy::unwrap_used`\n-  --> $DIR/rename.rs:62:9\n+  --> $DIR/rename.rs:61:9\n    |\n LL | #![warn(clippy::result_unwrap_used)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `clippy::unwrap_used`\n \n error: lint `clippy::single_char_push_str` has been renamed to `clippy::single_char_add_str`\n-  --> $DIR/rename.rs:63:9\n+  --> $DIR/rename.rs:62:9\n    |\n LL | #![warn(clippy::single_char_push_str)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `clippy::single_char_add_str`\n \n error: lint `clippy::stutter` has been renamed to `clippy::module_name_repetitions`\n-  --> $DIR/rename.rs:64:9\n+  --> $DIR/rename.rs:63:9\n    |\n LL | #![warn(clippy::stutter)]\n    |         ^^^^^^^^^^^^^^^ help: use the new name: `clippy::module_name_repetitions`\n \n error: lint `clippy::to_string_in_display` has been renamed to `clippy::recursive_format_impl`\n-  --> $DIR/rename.rs:65:9\n+  --> $DIR/rename.rs:64:9\n    |\n LL | #![warn(clippy::to_string_in_display)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `clippy::recursive_format_impl`\n \n error: lint `clippy::zero_width_space` has been renamed to `clippy::invisible_characters`\n-  --> $DIR/rename.rs:66:9\n+  --> $DIR/rename.rs:65:9\n    |\n LL | #![warn(clippy::zero_width_space)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `clippy::invisible_characters`\n \n error: lint `clippy::drop_bounds` has been renamed to `drop_bounds`\n-  --> $DIR/rename.rs:67:9\n+  --> $DIR/rename.rs:66:9\n    |\n LL | #![warn(clippy::drop_bounds)]\n    |         ^^^^^^^^^^^^^^^^^^^ help: use the new name: `drop_bounds`\n \n-error: lint `clippy::for_loops_over_fallibles` has been renamed to `for_loops_over_fallibles`\n+error: lint `clippy::for_loop_over_option` has been renamed to `for_loops_over_fallibles`\n+  --> $DIR/rename.rs:67:9\n+   |\n+LL | #![warn(clippy::for_loop_over_option)]\n+   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `for_loops_over_fallibles`\n+\n+error: lint `clippy::for_loop_over_result` has been renamed to `for_loops_over_fallibles`\n   --> $DIR/rename.rs:68:9\n    |\n+LL | #![warn(clippy::for_loop_over_result)]\n+   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `for_loops_over_fallibles`\n+\n+error: lint `clippy::for_loops_over_fallibles` has been renamed to `for_loops_over_fallibles`\n+  --> $DIR/rename.rs:69:9\n+   |\n LL | #![warn(clippy::for_loops_over_fallibles)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `for_loops_over_fallibles`\n \n error: lint `clippy::into_iter_on_array` has been renamed to `array_into_iter`\n-  --> $DIR/rename.rs:69:9\n+  --> $DIR/rename.rs:70:9\n    |\n LL | #![warn(clippy::into_iter_on_array)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `array_into_iter`\n \n error: lint `clippy::invalid_atomic_ordering` has been renamed to `invalid_atomic_ordering`\n-  --> $DIR/rename.rs:70:9\n+  --> $DIR/rename.rs:71:9\n    |\n LL | #![warn(clippy::invalid_atomic_ordering)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `invalid_atomic_ordering`\n \n error: lint `clippy::invalid_ref` has been renamed to `invalid_value`\n-  --> $DIR/rename.rs:71:9\n+  --> $DIR/rename.rs:72:9\n    |\n LL | #![warn(clippy::invalid_ref)]\n    |         ^^^^^^^^^^^^^^^^^^^ help: use the new name: `invalid_value`\n \n+error: lint `clippy::let_underscore_drop` has been renamed to `let_underscore_drop`\n+  --> $DIR/rename.rs:73:9\n+   |\n+LL | #![warn(clippy::let_underscore_drop)]\n+   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `let_underscore_drop`\n+\n error: lint `clippy::mem_discriminant_non_enum` has been renamed to `enum_intrinsics_non_enums`\n-  --> $DIR/rename.rs:72:9\n+  --> $DIR/rename.rs:74:9\n    |\n LL | #![warn(clippy::mem_discriminant_non_enum)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `enum_intrinsics_non_enums`\n \n error: lint `clippy::panic_params` has been renamed to `non_fmt_panics`\n-  --> $DIR/rename.rs:73:9\n+  --> $DIR/rename.rs:75:9\n    |\n LL | #![warn(clippy::panic_params)]\n    |         ^^^^^^^^^^^^^^^^^^^^ help: use the new name: `non_fmt_panics`\n \n error: lint `clippy::positional_named_format_parameters` has been renamed to `named_arguments_used_positionally`\n-  --> $DIR/rename.rs:74:9\n+  --> $DIR/rename.rs:76:9\n    |\n LL | #![warn(clippy::positional_named_format_parameters)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `named_arguments_used_positionally`\n \n error: lint `clippy::temporary_cstring_as_ptr` has been renamed to `temporary_cstring_as_ptr`\n-  --> $DIR/rename.rs:75:9\n+  --> $DIR/rename.rs:77:9\n    |\n LL | #![warn(clippy::temporary_cstring_as_ptr)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `temporary_cstring_as_ptr`\n \n error: lint `clippy::unknown_clippy_lints` has been renamed to `unknown_lints`\n-  --> $DIR/rename.rs:76:9\n+  --> $DIR/rename.rs:78:9\n    |\n LL | #![warn(clippy::unknown_clippy_lints)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `unknown_lints`\n \n error: lint `clippy::unused_label` has been renamed to `unused_labels`\n-  --> $DIR/rename.rs:77:9\n+  --> $DIR/rename.rs:79:9\n    |\n LL | #![warn(clippy::unused_label)]\n    |         ^^^^^^^^^^^^^^^^^^^^ help: use the new name: `unused_labels`\n \n-error: aborting due to 39 previous errors\n+error: aborting due to 40 previous errors\n "}]}