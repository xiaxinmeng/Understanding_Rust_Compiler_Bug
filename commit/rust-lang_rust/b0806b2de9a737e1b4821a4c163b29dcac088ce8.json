{"sha": "b0806b2de9a737e1b4821a4c163b29dcac088ce8", "node_id": "C_kwDOAAsO6NoAKGIwODA2YjJkZTlhNzM3ZTFiNDgyMWE0YzE2M2IyOWRjYWMwODhjZTg", "commit": {"author": {"name": "Alexis Bourget", "email": "alexis.bourget@gmail.com", "date": "2021-10-24T13:11:11Z"}, "committer": {"name": "Alexis Bourget", "email": "alexis.bourget@gmail.com", "date": "2021-12-13T20:36:35Z"}, "message": "Update test to new error message", "tree": {"sha": "630f452fa9ff0da137eaea75b12a2cf22e6eefde", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/630f452fa9ff0da137eaea75b12a2cf22e6eefde"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b0806b2de9a737e1b4821a4c163b29dcac088ce8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b0806b2de9a737e1b4821a4c163b29dcac088ce8", "html_url": "https://github.com/rust-lang/rust/commit/b0806b2de9a737e1b4821a4c163b29dcac088ce8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b0806b2de9a737e1b4821a4c163b29dcac088ce8/comments", "author": {"login": "poliorcetics", "id": 7951708, "node_id": "MDQ6VXNlcjc5NTE3MDg=", "avatar_url": "https://avatars.githubusercontent.com/u/7951708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/poliorcetics", "html_url": "https://github.com/poliorcetics", "followers_url": "https://api.github.com/users/poliorcetics/followers", "following_url": "https://api.github.com/users/poliorcetics/following{/other_user}", "gists_url": "https://api.github.com/users/poliorcetics/gists{/gist_id}", "starred_url": "https://api.github.com/users/poliorcetics/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/poliorcetics/subscriptions", "organizations_url": "https://api.github.com/users/poliorcetics/orgs", "repos_url": "https://api.github.com/users/poliorcetics/repos", "events_url": "https://api.github.com/users/poliorcetics/events{/privacy}", "received_events_url": "https://api.github.com/users/poliorcetics/received_events", "type": "User", "site_admin": false}, "committer": {"login": "poliorcetics", "id": 7951708, "node_id": "MDQ6VXNlcjc5NTE3MDg=", "avatar_url": "https://avatars.githubusercontent.com/u/7951708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/poliorcetics", "html_url": "https://github.com/poliorcetics", "followers_url": "https://api.github.com/users/poliorcetics/followers", "following_url": "https://api.github.com/users/poliorcetics/following{/other_user}", "gists_url": "https://api.github.com/users/poliorcetics/gists{/gist_id}", "starred_url": "https://api.github.com/users/poliorcetics/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/poliorcetics/subscriptions", "organizations_url": "https://api.github.com/users/poliorcetics/orgs", "repos_url": "https://api.github.com/users/poliorcetics/repos", "events_url": "https://api.github.com/users/poliorcetics/events{/privacy}", "received_events_url": "https://api.github.com/users/poliorcetics/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5c9950023bf6fbd2f55a4e9e5f1a54793bcfde54", "url": "https://api.github.com/repos/rust-lang/rust/commits/5c9950023bf6fbd2f55a4e9e5f1a54793bcfde54", "html_url": "https://github.com/rust-lang/rust/commit/5c9950023bf6fbd2f55a4e9e5f1a54793bcfde54"}], "stats": {"total": 34, "additions": 18, "deletions": 16}, "files": [{"sha": "f8b313cd0e9ec3f9bb0388ebc636daeb1f531248", "filename": "compiler/rustc_parse/src/parser/item.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b0806b2de9a737e1b4821a4c163b29dcac088ce8/compiler%2Frustc_parse%2Fsrc%2Fparser%2Fitem.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b0806b2de9a737e1b4821a4c163b29dcac088ce8/compiler%2Frustc_parse%2Fsrc%2Fparser%2Fitem.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_parse%2Fsrc%2Fparser%2Fitem.rs?ref=b0806b2de9a737e1b4821a4c163b29dcac088ce8", "patch": "@@ -2026,7 +2026,7 @@ impl<'a> Parser<'a> {\n                             else {\n                                 err.span_suggestion(\n                                     current_vis.span,\n-                                    \"there is already a visibility, remove this one\",\n+                                    \"there is already a visibility modifier, remove one\",\n                                     \"\".to_string(),\n                                     Applicability::MachineApplicable,\n                                 )"}, {"sha": "32aeee294728a74b59e55cc97688824f2933fa2d", "filename": "src/test/ui/parser/duplicate-visibility.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b0806b2de9a737e1b4821a4c163b29dcac088ce8/src%2Ftest%2Fui%2Fparser%2Fduplicate-visibility.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b0806b2de9a737e1b4821a4c163b29dcac088ce8/src%2Ftest%2Fui%2Fparser%2Fduplicate-visibility.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fduplicate-visibility.rs?ref=b0806b2de9a737e1b4821a4c163b29dcac088ce8", "patch": "@@ -4,6 +4,6 @@ extern \"C\" { //~ NOTE while parsing this item list starting here\n     pub pub fn foo();\n     //~^ ERROR expected one of `(`, `async`, `const`, `default`, `extern`, `fn`, `pub`, `unsafe`, or `use`, found keyword `pub`\n     //~| NOTE expected one of 9 possible tokens\n-    //~| HELP there is already a visibility, remove this one\n+    //~| HELP there is already a visibility modifier, remove one\n     //~| NOTE explicit visibility first seen here\n } //~ NOTE the item list ends here"}, {"sha": "97144ac2f642d3b7672f402a9ebda101d321a9c9", "filename": "src/test/ui/parser/duplicate-visibility.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b0806b2de9a737e1b4821a4c163b29dcac088ce8/src%2Ftest%2Fui%2Fparser%2Fduplicate-visibility.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b0806b2de9a737e1b4821a4c163b29dcac088ce8/src%2Ftest%2Fui%2Fparser%2Fduplicate-visibility.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fduplicate-visibility.stderr?ref=b0806b2de9a737e1b4821a4c163b29dcac088ce8", "patch": "@@ -7,7 +7,7 @@ LL |     pub pub fn foo();\n    |         ^^^\n    |         |\n    |         expected one of 9 possible tokens\n-   |         help: there is already a visibility, remove this one\n+   |         help: there is already a visibility modifier, remove one\n ...\n LL | }\n    | - the item list ends here"}, {"sha": "e3ea61dc4ada6c9d3253382e060e64bd8e43f916", "filename": "src/test/ui/parser/issue-87694-duplicated-pub.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b0806b2de9a737e1b4821a4c163b29dcac088ce8/src%2Ftest%2Fui%2Fparser%2Fissue-87694-duplicated-pub.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b0806b2de9a737e1b4821a4c163b29dcac088ce8/src%2Ftest%2Fui%2Fparser%2Fissue-87694-duplicated-pub.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fissue-87694-duplicated-pub.rs?ref=b0806b2de9a737e1b4821a4c163b29dcac088ce8", "patch": "@@ -1,5 +1,5 @@\n pub const pub fn test() {}\n //~^ ERROR expected one of `async`, `extern`, `fn`, or `unsafe`, found keyword `pub`\n //~| NOTE expected one of `async`, `extern`, `fn`, or `unsafe`\n-//~| HELP there is already a visibility, remove this one\n+//~| HELP there is already a visibility modifier, remove one\n //~| NOTE explicit visibility first seen here"}, {"sha": "8d242bc9de5850d74a7b53dddb8d0cf15af63444", "filename": "src/test/ui/parser/issue-87694-duplicated-pub.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b0806b2de9a737e1b4821a4c163b29dcac088ce8/src%2Ftest%2Fui%2Fparser%2Fissue-87694-duplicated-pub.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b0806b2de9a737e1b4821a4c163b29dcac088ce8/src%2Ftest%2Fui%2Fparser%2Fissue-87694-duplicated-pub.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fissue-87694-duplicated-pub.stderr?ref=b0806b2de9a737e1b4821a4c163b29dcac088ce8", "patch": "@@ -5,7 +5,7 @@ LL | pub const pub fn test() {}\n    |           ^^^\n    |           |\n    |           expected one of `async`, `extern`, `fn`, or `unsafe`\n-   |           help: there is already a visibility, remove this one\n+   |           help: there is already a visibility modifier, remove one\n    |\n note: explicit visibility first seen here\n   --> $DIR/issue-87694-duplicated-pub.rs:1:1"}, {"sha": "df0cd54399a538a4262487191e72699984db5df3", "filename": "src/test/ui/parser/issues/issue-87217-keyword-order/const-async-const.rs", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/b0806b2de9a737e1b4821a4c163b29dcac088ce8/src%2Ftest%2Fui%2Fparser%2Fissues%2Fissue-87217-keyword-order%2Fconst-async-const.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b0806b2de9a737e1b4821a4c163b29dcac088ce8/src%2Ftest%2Fui%2Fparser%2Fissues%2Fissue-87217-keyword-order%2Fconst-async-const.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fissues%2Fissue-87217-keyword-order%2Fconst-async-const.rs?ref=b0806b2de9a737e1b4821a4c163b29dcac088ce8", "patch": "@@ -1,11 +1,9 @@\n // edition:2018\n \n-// Test that even when `const` is already present, the proposed fix is `const const async`,\n-// like for `pub pub`.\n+// Test that even when `const` is already present, the proposed fix is to remove the second `const`\n \n const async const fn test() {}\n //~^ ERROR expected one of `extern`, `fn`, or `unsafe`, found keyword `const`\n //~| NOTE expected one of `extern`, `fn`, or `unsafe`\n-//~| HELP `const` must come before `async`\n-//~| SUGGESTION const async\n-//~| NOTE keyword order for functions declaration is `default`, `pub`, `const`, `async`, `unsafe`, `extern`\n+//~| HELP `const` already used earlier, remove this one\n+//~| NOTE `const` first seen here"}, {"sha": "977c6ebfef352bc6999849e679297a0c0ba89762", "filename": "src/test/ui/parser/issues/issue-87217-keyword-order/const-async-const.stderr", "status": "modified", "additions": 10, "deletions": 6, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/b0806b2de9a737e1b4821a4c163b29dcac088ce8/src%2Ftest%2Fui%2Fparser%2Fissues%2Fissue-87217-keyword-order%2Fconst-async-const.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b0806b2de9a737e1b4821a4c163b29dcac088ce8/src%2Ftest%2Fui%2Fparser%2Fissues%2Fissue-87217-keyword-order%2Fconst-async-const.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fissues%2Fissue-87217-keyword-order%2Fconst-async-const.stderr?ref=b0806b2de9a737e1b4821a4c163b29dcac088ce8", "patch": "@@ -1,13 +1,17 @@\n error: expected one of `extern`, `fn`, or `unsafe`, found keyword `const`\n-  --> $DIR/const-async-const.rs:6:13\n+  --> $DIR/const-async-const.rs:5:13\n    |\n LL | const async const fn test() {}\n-   |       ------^^^^^\n-   |       |     |\n-   |       |     expected one of `extern`, `fn`, or `unsafe`\n-   |       help: `const` must come before `async`: `const async`\n+   |             ^^^^^\n+   |             |\n+   |             expected one of `extern`, `fn`, or `unsafe`\n+   |             help: `const` already used earlier, remove this one\n    |\n-   = note: keyword order for functions declaration is `default`, `pub`, `const`, `async`, `unsafe`, `extern`\n+note: `const` first seen here\n+  --> $DIR/const-async-const.rs:5:1\n+   |\n+LL | const async const fn test() {}\n+   | ^^^^^\n \n error: aborting due to previous error\n "}]}