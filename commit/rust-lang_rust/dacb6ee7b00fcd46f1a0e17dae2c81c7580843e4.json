{"sha": "dacb6ee7b00fcd46f1a0e17dae2c81c7580843e4", "node_id": "C_kwDOAAsO6NoAKGRhY2I2ZWU3YjAwZmNkNDZmMWEwZTE3ZGFlMmM4MWM3NTgwODQzZTQ", "commit": {"author": {"name": "S\u00e9bastien Marie", "email": "semarie@online.fr", "date": "2022-08-28T05:16:02Z"}, "committer": {"name": "S\u00e9bastien Marie", "email": "semarie@online.fr", "date": "2022-08-28T05:16:02Z"}, "message": "add powerpc64-unknown-openbsd support", "tree": {"sha": "0e196557a8993829542d59bd5234421b45471b1a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0e196557a8993829542d59bd5234421b45471b1a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/dacb6ee7b00fcd46f1a0e17dae2c81c7580843e4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/dacb6ee7b00fcd46f1a0e17dae2c81c7580843e4", "html_url": "https://github.com/rust-lang/rust/commit/dacb6ee7b00fcd46f1a0e17dae2c81c7580843e4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/dacb6ee7b00fcd46f1a0e17dae2c81c7580843e4/comments", "author": {"login": "semarie", "id": 8948701, "node_id": "MDQ6VXNlcjg5NDg3MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/8948701?v=4", "gravatar_id": "", "url": "https://api.github.com/users/semarie", "html_url": "https://github.com/semarie", "followers_url": "https://api.github.com/users/semarie/followers", "following_url": "https://api.github.com/users/semarie/following{/other_user}", "gists_url": "https://api.github.com/users/semarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/semarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/semarie/subscriptions", "organizations_url": "https://api.github.com/users/semarie/orgs", "repos_url": "https://api.github.com/users/semarie/repos", "events_url": "https://api.github.com/users/semarie/events{/privacy}", "received_events_url": "https://api.github.com/users/semarie/received_events", "type": "User", "site_admin": false}, "committer": {"login": "semarie", "id": 8948701, "node_id": "MDQ6VXNlcjg5NDg3MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/8948701?v=4", "gravatar_id": "", "url": "https://api.github.com/users/semarie", "html_url": "https://github.com/semarie", "followers_url": "https://api.github.com/users/semarie/followers", "following_url": "https://api.github.com/users/semarie/following{/other_user}", "gists_url": "https://api.github.com/users/semarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/semarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/semarie/subscriptions", "organizations_url": "https://api.github.com/users/semarie/orgs", "repos_url": "https://api.github.com/users/semarie/repos", "events_url": "https://api.github.com/users/semarie/events{/privacy}", "received_events_url": "https://api.github.com/users/semarie/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "908ac84662fa0e9478f3e44892146c8d1ffafa50", "url": "https://api.github.com/repos/rust-lang/rust/commits/908ac84662fa0e9478f3e44892146c8d1ffafa50", "html_url": "https://github.com/rust-lang/rust/commit/908ac84662fa0e9478f3e44892146c8d1ffafa50"}], "stats": {"total": 20, "additions": 20, "deletions": 0}, "files": [{"sha": "d5795087683136cc049e32b8c7313e8446f439f7", "filename": "compiler/rustc_target/src/spec/mod.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dacb6ee7b00fcd46f1a0e17dae2c81c7580843e4/compiler%2Frustc_target%2Fsrc%2Fspec%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dacb6ee7b00fcd46f1a0e17dae2c81c7580843e4/compiler%2Frustc_target%2Fsrc%2Fspec%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fmod.rs?ref=dacb6ee7b00fcd46f1a0e17dae2c81c7580843e4", "patch": "@@ -894,6 +894,7 @@ supported_targets! {\n     (\"aarch64-unknown-openbsd\", aarch64_unknown_openbsd),\n     (\"i686-unknown-openbsd\", i686_unknown_openbsd),\n     (\"powerpc-unknown-openbsd\", powerpc_unknown_openbsd),\n+    (\"powerpc64-unknown-openbsd\", powerpc64_unknown_openbsd),\n     (\"sparc64-unknown-openbsd\", sparc64_unknown_openbsd),\n     (\"x86_64-unknown-openbsd\", x86_64_unknown_openbsd),\n "}, {"sha": "9cb3a67dc58b3d8b0ef3f1b1a04c4862d3c80cbe", "filename": "compiler/rustc_target/src/spec/powerpc64_unknown_openbsd.rs", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/dacb6ee7b00fcd46f1a0e17dae2c81c7580843e4/compiler%2Frustc_target%2Fsrc%2Fspec%2Fpowerpc64_unknown_openbsd.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dacb6ee7b00fcd46f1a0e17dae2c81c7580843e4/compiler%2Frustc_target%2Fsrc%2Fspec%2Fpowerpc64_unknown_openbsd.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fpowerpc64_unknown_openbsd.rs?ref=dacb6ee7b00fcd46f1a0e17dae2c81c7580843e4", "patch": "@@ -0,0 +1,17 @@\n+use crate::abi::Endian;\n+use crate::spec::{LinkerFlavor, Target, TargetOptions};\n+\n+pub fn target() -> Target {\n+    let mut base = super::openbsd_base::opts();\n+    base.cpu = \"ppc64\".into();\n+    base.add_pre_link_args(LinkerFlavor::Gcc, &[\"-m64\"]);\n+    base.max_atomic_width = Some(64);\n+\n+    Target {\n+        llvm_target: \"powerpc64-unknown-openbsd\".into(),\n+        pointer_width: 64,\n+        data_layout: \"E-m:e-i64:64-n32:64\".into(),\n+        arch: \"powerpc64\".into(),\n+        options: TargetOptions { endian: Endian::Big, mcount: \"_mcount\".into(), ..base },\n+    }\n+}"}, {"sha": "34bd201d1cd079f6b6dbf26bedcd3faf71f44ee3", "filename": "src/doc/rustc/src/platform-support.md", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dacb6ee7b00fcd46f1a0e17dae2c81c7580843e4/src%2Fdoc%2Frustc%2Fsrc%2Fplatform-support.md", "raw_url": "https://github.com/rust-lang/rust/raw/dacb6ee7b00fcd46f1a0e17dae2c81c7580843e4/src%2Fdoc%2Frustc%2Fsrc%2Fplatform-support.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Frustc%2Fsrc%2Fplatform-support.md?ref=dacb6ee7b00fcd46f1a0e17dae2c81c7580843e4", "patch": "@@ -277,6 +277,7 @@ target | std | host | notes\n `powerpc64-unknown-linux-musl` | ? |  |\n `powerpc64-wrs-vxworks` | ? |  |\n `powerpc64le-unknown-linux-musl` | ? |  |\n+[`powerpc64-unknown-openbsd`](platform-support/openbsd.md) | \u2713 | \u2713 | OpenBSD/powerpc64\n `riscv32gc-unknown-linux-gnu` |   |   | RISC-V Linux (kernel 5.4, glibc 2.33)\n `riscv32gc-unknown-linux-musl` |   |   | RISC-V Linux (kernel 5.4, musl + RISCV32 support patches)\n `riscv32im-unknown-none-elf` | * |  | Bare RISC-V (RV32IM ISA)"}, {"sha": "432d8a9999419387cab91b657aad9711aaf8f1c7", "filename": "src/doc/rustc/src/platform-support/openbsd.md", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dacb6ee7b00fcd46f1a0e17dae2c81c7580843e4/src%2Fdoc%2Frustc%2Fsrc%2Fplatform-support%2Fopenbsd.md", "raw_url": "https://github.com/rust-lang/rust/raw/dacb6ee7b00fcd46f1a0e17dae2c81c7580843e4/src%2Fdoc%2Frustc%2Fsrc%2Fplatform-support%2Fopenbsd.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Frustc%2Fsrc%2Fplatform-support%2Fopenbsd.md?ref=dacb6ee7b00fcd46f1a0e17dae2c81c7580843e4", "patch": "@@ -12,6 +12,7 @@ The target names follow this format: `$ARCH-unknown-openbsd`, where `$ARCH` spec\n |--------------------------------|-------------|------------------|\n | `aarch64-unknown-openbsd`      | libc++      | [64-bit ARM systems](https://www.openbsd.org/arm64.html)  |\n | `i686-unknown-openbsd`         | libc++      | [Standard PC and clones based on the Intel i386 architecture and compatible processors](https://www.openbsd.org/i386.html) |\n+| `powerpc64-unknown-openbsd`    | libc++      | [IBM POWER-based PowerNV systems](https://www.openbsd.org/powerpc64.html) |\n | `sparc64-unknown-openbsd`      | estdc++     | [Sun UltraSPARC and Fujitsu SPARC64 systems](https://www.openbsd.org/sparc64.html) |\n | `x86_64-unknown-openbsd`       | libc++      | [AMD64-based systems](https://www.openbsd.org/amd64.html) |\n "}]}