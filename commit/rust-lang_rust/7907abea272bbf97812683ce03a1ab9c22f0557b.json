{"sha": "7907abea272bbf97812683ce03a1ab9c22f0557b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc5MDdhYmVhMjcyYmJmOTc4MTI2ODNjZTAzYTFhYjljMjJmMDU1N2I=", "commit": {"author": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2020-04-03T17:47:20Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-04-03T17:47:20Z"}, "message": "Merge pull request #5407 from flip1995/rustup\n\nRustup to rust-lang/rust#70634", "tree": {"sha": "62f7dcd2cfc175cd4fb6b93aa08453daca4222db", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/62f7dcd2cfc175cd4fb6b93aa08453daca4222db"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7907abea272bbf97812683ce03a1ab9c22f0557b", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJeh3aoCRBK7hj4Ov3rIwAAdHIIAHtI7Ibiag9aWuGiMGuVBjpB\n4zYtZdwqrpLQxq/+Vv5XLeD8+JZatBd0etLZCBPSnBNfvU7w1bbzFxjp0nOm6Xup\nxd83h66IOG1GAkkTQ7gNwKvUKQ6EbRFCLmx/P/+LTouKJJMNETAhPk9k4/89l9K/\nmG/TrFOUgQi0Duc1XBJzkSVWOXpUD7ntrF0zpa0g/WykefU4b0/+w3JHusrJt7n4\nu/MN1kKunqbBhX7OqDSbz/wCbQHqXkVK1eRfOGxgrT417MkiIRGksUIJA4B/OlPe\nOtgTBqsGiV7vapFXsb3Rb8anZfXJ0Xl01H69/GT2lxwpC35N7Nf68og2LbfS4MQ=\n=TyGB\n-----END PGP SIGNATURE-----\n", "payload": "tree 62f7dcd2cfc175cd4fb6b93aa08453daca4222db\nparent 949a5bab3333adc5ffcbca618cc93718d0615281\nparent 98aa5938c434617109e2bf7bfeb21a2f44f61572\nauthor Manish Goregaokar <manishsmail@gmail.com> 1585936040 -0700\ncommitter GitHub <noreply@github.com> 1585936040 -0700\n\nMerge pull request #5407 from flip1995/rustup\n\nRustup to rust-lang/rust#70634"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7907abea272bbf97812683ce03a1ab9c22f0557b", "html_url": "https://github.com/rust-lang/rust/commit/7907abea272bbf97812683ce03a1ab9c22f0557b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7907abea272bbf97812683ce03a1ab9c22f0557b/comments", "author": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "949a5bab3333adc5ffcbca618cc93718d0615281", "url": "https://api.github.com/repos/rust-lang/rust/commits/949a5bab3333adc5ffcbca618cc93718d0615281", "html_url": "https://github.com/rust-lang/rust/commit/949a5bab3333adc5ffcbca618cc93718d0615281"}, {"sha": "98aa5938c434617109e2bf7bfeb21a2f44f61572", "url": "https://api.github.com/repos/rust-lang/rust/commits/98aa5938c434617109e2bf7bfeb21a2f44f61572", "html_url": "https://github.com/rust-lang/rust/commit/98aa5938c434617109e2bf7bfeb21a2f44f61572"}], "stats": {"total": 22, "additions": 7, "deletions": 15}, "files": [{"sha": "1ec60a0e6e67ac9e00c42e4920d438fafd25ad8c", "filename": "clippy_lints/src/escape.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7907abea272bbf97812683ce03a1ab9c22f0557b/clippy_lints%2Fsrc%2Fescape.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7907abea272bbf97812683ce03a1ab9c22f0557b/clippy_lints%2Fsrc%2Fescape.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fescape.rs?ref=7907abea272bbf97812683ce03a1ab9c22f0557b", "patch": "@@ -2,10 +2,10 @@ use rustc_hir::intravisit;\n use rustc_hir::{self, Body, FnDecl, HirId, HirIdSet, ItemKind, Node};\n use rustc_infer::infer::TyCtxtInferExt;\n use rustc_lint::{LateContext, LateLintPass};\n-use rustc_middle::ty::layout::LayoutOf;\n use rustc_middle::ty::{self, Ty};\n use rustc_session::{declare_tool_lint, impl_lint_pass};\n use rustc_span::source_map::Span;\n+use rustc_target::abi::LayoutOf;\n use rustc_typeck::expr_use_visitor::{ConsumeMode, Delegate, ExprUseVisitor, Place, PlaceBase};\n \n use crate::utils::span_lint;"}, {"sha": "961a645a62e97ebde1a3c8e03f9a916d5e0b3a8e", "filename": "clippy_lints/src/large_enum_variant.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7907abea272bbf97812683ce03a1ab9c22f0557b/clippy_lints%2Fsrc%2Flarge_enum_variant.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7907abea272bbf97812683ce03a1ab9c22f0557b/clippy_lints%2Fsrc%2Flarge_enum_variant.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flarge_enum_variant.rs?ref=7907abea272bbf97812683ce03a1ab9c22f0557b", "patch": "@@ -4,8 +4,8 @@ use crate::utils::{snippet_opt, span_lint_and_then};\n use rustc_errors::Applicability;\n use rustc_hir::{Item, ItemKind, VariantData};\n use rustc_lint::{LateContext, LateLintPass};\n-use rustc_middle::ty::layout::LayoutOf;\n use rustc_session::{declare_tool_lint, impl_lint_pass};\n+use rustc_target::abi::LayoutOf;\n \n declare_clippy_lint! {\n     /// **What it does:** Checks for large size differences between variants on"}, {"sha": "271459bd1e94de75496e17ed036d5d33f866f650", "filename": "clippy_lints/src/types.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7907abea272bbf97812683ce03a1ab9c22f0557b/clippy_lints%2Fsrc%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7907abea272bbf97812683ce03a1ab9c22f0557b/clippy_lints%2Fsrc%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ftypes.rs?ref=7907abea272bbf97812683ce03a1ab9c22f0557b", "patch": "@@ -17,12 +17,12 @@ use rustc_hir::{\n use rustc_lint::{LateContext, LateLintPass, LintContext};\n use rustc_middle::hir::map::Map;\n use rustc_middle::lint::in_external_macro;\n-use rustc_middle::ty::layout::LayoutOf;\n use rustc_middle::ty::{self, InferTy, Ty, TyCtxt, TypeckTables};\n use rustc_session::{declare_lint_pass, declare_tool_lint, impl_lint_pass};\n use rustc_span::hygiene::{ExpnKind, MacroKind};\n use rustc_span::source_map::Span;\n use rustc_span::symbol::{sym, Symbol};\n+use rustc_target::abi::LayoutOf;\n use rustc_target::spec::abi::Abi;\n use rustc_typeck::hir_ty_to_ty;\n "}, {"sha": "315869e2aea3d4f8e3620fce8cb3494c7cc08cd9", "filename": "clippy_lints/src/utils/mod.rs", "status": "modified", "additions": 4, "deletions": 12, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/7907abea272bbf97812683ce03a1ab9c22f0557b/clippy_lints%2Fsrc%2Futils%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7907abea272bbf97812683ce03a1ab9c22f0557b/clippy_lints%2Fsrc%2Futils%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fmod.rs?ref=7907abea272bbf97812683ce03a1ab9c22f0557b", "patch": "@@ -41,16 +41,12 @@ use rustc_infer::infer::TyCtxtInferExt;\n use rustc_lint::{LateContext, Level, Lint, LintContext};\n use rustc_middle::hir::map::Map;\n use rustc_middle::traits;\n-use rustc_middle::ty::{\n-    self,\n-    layout::{self, IntegerExt},\n-    subst::GenericArg,\n-    Binder, Ty, TyCtxt, TypeFoldable,\n-};\n+use rustc_middle::ty::{self, layout::IntegerExt, subst::GenericArg, Binder, Ty, TyCtxt, TypeFoldable};\n use rustc_span::hygiene::{ExpnKind, MacroKind};\n use rustc_span::source_map::original_sp;\n use rustc_span::symbol::{self, kw, Symbol};\n use rustc_span::{BytePos, Pos, Span, DUMMY_SP};\n+use rustc_target::abi::Integer;\n use rustc_trait_selection::traits::predicate_for_trait_def;\n use rustc_trait_selection::traits::query::evaluate_obligation::InferCtxtExt;\n use rustc_trait_selection::traits::query::normalize::AtExt;\n@@ -1080,9 +1076,7 @@ pub fn get_arg_name(pat: &Pat<'_>) -> Option<ast::Name> {\n }\n \n pub fn int_bits(tcx: TyCtxt<'_>, ity: ast::IntTy) -> u64 {\n-    layout::Integer::from_attr(&tcx, attr::IntType::SignedInt(ity))\n-        .size()\n-        .bits()\n+    Integer::from_attr(&tcx, attr::IntType::SignedInt(ity)).size().bits()\n }\n \n #[allow(clippy::cast_possible_wrap)]\n@@ -1101,9 +1095,7 @@ pub fn unsext(tcx: TyCtxt<'_>, u: i128, ity: ast::IntTy) -> u128 {\n \n /// clip unused bytes\n pub fn clip(tcx: TyCtxt<'_>, u: u128, ity: ast::UintTy) -> u128 {\n-    let bits = layout::Integer::from_attr(&tcx, attr::IntType::UnsignedInt(ity))\n-        .size()\n-        .bits();\n+    let bits = Integer::from_attr(&tcx, attr::IntType::UnsignedInt(ity)).size().bits();\n     let amt = 128 - bits;\n     (u << amt) >> amt\n }"}]}