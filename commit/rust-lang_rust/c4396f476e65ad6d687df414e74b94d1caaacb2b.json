{"sha": "c4396f476e65ad6d687df414e74b94d1caaacb2b", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM0Mzk2ZjQ3NmU2NWFkNmQ2ODdkZjQxNGU3NGI5NGQxY2FhYWNiMmI=", "commit": {"author": {"name": "Deadbeef", "email": "ent3rm4n@gmail.com", "date": "2021-06-21T11:17:07Z"}, "committer": {"name": "Deadbeef", "email": "ent3rm4n@gmail.com", "date": "2021-06-21T11:17:07Z"}, "message": "Added some tests for `unsafe` in const-dispay.rs", "tree": {"sha": "752dfb9f5536a7c90c54981989282de2fc9cb581", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/752dfb9f5536a7c90c54981989282de2fc9cb581"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c4396f476e65ad6d687df414e74b94d1caaacb2b", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEjbeLZzPb62/vY3smZSV3NIU3bZIFAmDQdTcACgkQZSV3NIU3\nbZI2TQ/+J//mCZ85kub66aj6SGidXnG7RII9fnFmfT6UNY6BSAE979GIABOsaANS\nbg1L3z2NSmDL0ySrVgm0wn1zWzHnqvMjACJPxKrfaj1JoBTBpBH3kUb020iaSR15\n+VhkNyGNAG61daJWIDNdMU1P4UWeXQSF+Ywmyn6FAvL1LwBspbvaIuXRJQ28nFt4\nofWozS1B5OuOutbfo9KViffd69MouGVmBNb2LdJYx2GnAClmzLB0aaAnZ7OVEg2U\nn+P/tzLL1KYUfjYbSMYXU+o2O+8n12InCbzyZpNmHEUGRZKQ6VcHNBv8l70ot/4v\niPrGi60mBfDE+rVamvOKGkvebs3dJEp4QaUoP0pIWapMsLgCvhONNOwARZKPvfrj\nzesnGFUYfFBvZjKKxVx+LUkjBUlv5j71NwlwbrdWL6eOkExkForKCGhszMJWBr10\nHUJGzgAzDSql9RqGuScKoBTT1lJgQfGt9lrRq2b0/MBHg0pYlfaVrNavsO+jKFEc\nTqARLF7mUsgokx/7XzjL0HGYkkHAbVNrkf6Pv9EDP22HUgURWNMcBbtR8zs74amI\n2bXh4x6W+f8BJh7PblLYyAqVbtzvRgr8qGIodoi8do8dFXHUrV8KP8OCFUAAPXVP\nEqHwhRYtwKkmBEb9Gal5qK050wkxnK5iBfllF9fuXhLnarejOaA=\n=5TeZ\n-----END PGP SIGNATURE-----", "payload": "tree 752dfb9f5536a7c90c54981989282de2fc9cb581\nparent 5fb27bca6cb88f1ad3cb7eac07c7e075b1a225f9\nauthor Deadbeef <ent3rm4n@gmail.com> 1624274227 +0800\ncommitter Deadbeef <ent3rm4n@gmail.com> 1624274227 +0800\n\nAdded some tests for `unsafe` in const-dispay.rs\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c4396f476e65ad6d687df414e74b94d1caaacb2b", "html_url": "https://github.com/rust-lang/rust/commit/c4396f476e65ad6d687df414e74b94d1caaacb2b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c4396f476e65ad6d687df414e74b94d1caaacb2b/comments", "author": {"login": "fee1-dead", "id": 43851243, "node_id": "MDQ6VXNlcjQzODUxMjQz", "avatar_url": "https://avatars.githubusercontent.com/u/43851243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fee1-dead", "html_url": "https://github.com/fee1-dead", "followers_url": "https://api.github.com/users/fee1-dead/followers", "following_url": "https://api.github.com/users/fee1-dead/following{/other_user}", "gists_url": "https://api.github.com/users/fee1-dead/gists{/gist_id}", "starred_url": "https://api.github.com/users/fee1-dead/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fee1-dead/subscriptions", "organizations_url": "https://api.github.com/users/fee1-dead/orgs", "repos_url": "https://api.github.com/users/fee1-dead/repos", "events_url": "https://api.github.com/users/fee1-dead/events{/privacy}", "received_events_url": "https://api.github.com/users/fee1-dead/received_events", "type": "User", "site_admin": false}, "committer": {"login": "fee1-dead", "id": 43851243, "node_id": "MDQ6VXNlcjQzODUxMjQz", "avatar_url": "https://avatars.githubusercontent.com/u/43851243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fee1-dead", "html_url": "https://github.com/fee1-dead", "followers_url": "https://api.github.com/users/fee1-dead/followers", "following_url": "https://api.github.com/users/fee1-dead/following{/other_user}", "gists_url": "https://api.github.com/users/fee1-dead/gists{/gist_id}", "starred_url": "https://api.github.com/users/fee1-dead/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fee1-dead/subscriptions", "organizations_url": "https://api.github.com/users/fee1-dead/orgs", "repos_url": "https://api.github.com/users/fee1-dead/repos", "events_url": "https://api.github.com/users/fee1-dead/events{/privacy}", "received_events_url": "https://api.github.com/users/fee1-dead/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5fb27bca6cb88f1ad3cb7eac07c7e075b1a225f9", "url": "https://api.github.com/repos/rust-lang/rust/commits/5fb27bca6cb88f1ad3cb7eac07c7e075b1a225f9", "html_url": "https://github.com/rust-lang/rust/commit/5fb27bca6cb88f1ad3cb7eac07c7e075b1a225f9"}], "stats": {"total": 53, "additions": 47, "deletions": 6}, "files": [{"sha": "e98d82b7bf430208f6631ed7b61ef4006e3a192e", "filename": "src/test/rustdoc/const-display.rs", "status": "modified", "additions": 47, "deletions": 6, "changes": 53, "blob_url": "https://github.com/rust-lang/rust/blob/c4396f476e65ad6d687df414e74b94d1caaacb2b/src%2Ftest%2Frustdoc%2Fconst-display.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4396f476e65ad6d687df414e74b94d1caaacb2b/src%2Ftest%2Frustdoc%2Fconst-display.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fconst-display.rs?ref=c4396f476e65ad6d687df414e74b94d1caaacb2b", "patch": "@@ -13,28 +13,57 @@\n #[rustc_const_unstable(feature=\"foo\", issue = \"none\")]\n pub const fn foo() -> u32 { 42 }\n \n+// @has 'foo/fn.foo_unsafe.html' '//pre' 'pub unsafe fn foo_unsafe() -> u32'\n+// @has - '//span[@class=\"since\"]' '1.0.0 (const: unstable)'\n+#[stable(feature = \"rust1\", since = \"1.0.0\")]\n+#[rustc_const_unstable(feature=\"foo\", issue = \"none\")]\n+pub const unsafe fn foo_unsafe() -> u32 { 42 }\n+\n // @has 'foo/fn.foo2.html' '//pre' 'pub const fn foo2() -> u32'\n #[unstable(feature = \"humans\", issue = \"none\")]\n pub const fn foo2() -> u32 { 42 }\n \n+// @has 'foo/fn.foo2_unsafe.html' '//pre' 'pub const unsafe fn foo2_unsafe() -> u32'\n+#[unstable(feature = \"humans\", issue = \"none\")]\n+pub const unsafe fn foo2_unsafe() -> u32 { 42 }\n+\n // @has 'foo/fn.bar2.html' '//pre' 'pub const fn bar2() -> u32'\n // @has - //span '1.0.0 (const: 1.0.0)'\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n #[rustc_const_stable(feature = \"rust1\", since = \"1.0.0\")]\n pub const fn bar2() -> u32 { 42 }\n \n-// @has 'foo/fn.foo2_gated.html' '//pre' 'pub const unsafe fn foo2_gated() -> u32'\n+// @has 'foo/fn.bar2_unsafe.html' '//pre' 'pub const unsafe fn bar2_unsafe() -> u32'\n+// @has - //span '1.0.0 (const: 1.0.0)'\n+#[stable(feature = \"rust1\", since = \"1.0.0\")]\n+#[rustc_const_stable(feature = \"rust1\", since = \"1.0.0\")]\n+pub const unsafe fn bar2_unsafe() -> u32 { 42 }\n+\n+// @has 'foo/fn.foo2_gated.html' '//pre' 'pub const fn foo2_gated() -> u32'\n #[unstable(feature = \"foo2\", issue = \"none\")]\n-pub const unsafe fn foo2_gated() -> u32 { 42 }\n+pub const fn foo2_gated() -> u32 { 42 }\n \n-// @has 'foo/fn.bar2_gated.html' '//pre' 'pub const unsafe fn bar2_gated() -> u32'\n+// @has 'foo/fn.foo2_gated_unsafe.html' '//pre' 'pub const unsafe fn foo2_gated_unsafe() -> u32'\n+#[unstable(feature = \"foo2\", issue = \"none\")]\n+pub const unsafe fn foo2_gated_unsafe() -> u32 { 42 }\n+\n+// @has 'foo/fn.bar2_gated.html' '//pre' 'pub const fn bar2_gated() -> u32'\n // @has - '//span[@class=\"since\"]' '1.0.0 (const: 1.0.0)'\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n #[rustc_const_stable(feature = \"rust1\", since = \"1.0.0\")]\n-pub const unsafe fn bar2_gated() -> u32 { 42 }\n+pub const fn bar2_gated() -> u32 { 42 }\n \n-// @has 'foo/fn.bar_not_gated.html' '//pre' 'pub const unsafe fn bar_not_gated() -> u32'\n-pub const unsafe fn bar_not_gated() -> u32 { 42 }\n+// @has 'foo/fn.bar2_gated_unsafe.html' '//pre' 'pub const unsafe fn bar2_gated_unsafe() -> u32'\n+// @has - '//span[@class=\"since\"]' '1.0.0 (const: 1.0.0)'\n+#[stable(feature = \"rust1\", since = \"1.0.0\")]\n+#[rustc_const_stable(feature = \"rust1\", since = \"1.0.0\")]\n+pub const unsafe fn bar2_gated_unsafe() -> u32 { 42 }\n+\n+// @has 'foo/fn.bar_not_gated.html' '//pre' 'pub const fn bar_not_gated() -> u32'\n+pub const fn bar_not_gated() -> u32 { 42 }\n+\n+// @has 'foo/fn.bar_not_gated_unsafe.html' '//pre' 'pub const unsafe fn bar_not_gated_unsafe() -> u32'\n+pub const unsafe fn bar_not_gated_unsafe() -> u32 { 42 }\n \n pub struct Foo;\n \n@@ -45,9 +74,21 @@ impl Foo {\n     #[rustc_const_unstable(feature=\"foo\", issue = \"none\")]\n     pub const fn gated() -> u32 { 42 }\n \n+    // @has 'foo/struct.Foo.html' '//div[@id=\"method.gated_unsafe\"]/code' 'pub unsafe fn gated_unsafe() -> u32'\n+    // @has - '//span[@class=\"since\"]' '1.0.0 (const: unstable)'\n+    #[stable(feature = \"rust1\", since = \"1.0.0\")]\n+    #[rustc_const_unstable(feature=\"foo\", issue = \"none\")]\n+    pub const unsafe fn gated_unsafe() -> u32 { 42 }\n+\n     // @has 'foo/struct.Foo.html' '//div[@id=\"method.stable_impl\"]/code' 'pub const fn stable_impl() -> u32'\n     // @has - '//span[@class=\"since\"]' '1.0.0 (const: 1.2.0)'\n     #[stable(feature = \"rust1\", since = \"1.0.0\")]\n     #[rustc_const_stable(feature = \"rust1\", since = \"1.2.0\")]\n     pub const fn stable_impl() -> u32 { 42 }\n+\n+    // @has 'foo/struct.Foo.html' '//div[@id=\"method.stable_impl_unsafe\"]/code' 'pub const unsafe fn stable_impl_unsafe() -> u32'\n+    // @has - '//span[@class=\"since\"]' '1.0.0 (const: 1.2.0)'\n+    #[stable(feature = \"rust1\", since = \"1.0.0\")]\n+    #[rustc_const_stable(feature = \"rust1\", since = \"1.2.0\")]\n+    pub const unsafe fn stable_impl_unsafe() -> u32 { 42 }\n }"}]}