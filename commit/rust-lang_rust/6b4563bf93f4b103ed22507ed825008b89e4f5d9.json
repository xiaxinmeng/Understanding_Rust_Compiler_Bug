{"sha": "6b4563bf93f4b103ed22507ed825008b89e4f5d9", "node_id": "C_kwDOAAsO6NoAKDZiNDU2M2JmOTNmNGIxMDNlZDIyNTA3ZWQ4MjUwMDhiODllNGY1ZDk", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-04-23T15:41:45Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-04-23T15:41:45Z"}, "message": "Auto merge of #90602 - mbartlett21:const-intoiterator, r=oli-obk\n\nUnstably constify `impl<I: Iterator> IntoIterator for I`\n\nThis constifies the default `IntoIterator` implementation under the `const_intoiterator_identity` feature.\n\nTracking Issue: #90603", "tree": {"sha": "559c8a679edfc2d118ef1e393c210336ae97be7c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/559c8a679edfc2d118ef1e393c210336ae97be7c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6b4563bf93f4b103ed22507ed825008b89e4f5d9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6b4563bf93f4b103ed22507ed825008b89e4f5d9", "html_url": "https://github.com/rust-lang/rust/commit/6b4563bf93f4b103ed22507ed825008b89e4f5d9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6b4563bf93f4b103ed22507ed825008b89e4f5d9/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1e9aa8a96b207668799365bf891a459b62410b60", "url": "https://api.github.com/repos/rust-lang/rust/commits/1e9aa8a96b207668799365bf891a459b62410b60", "html_url": "https://github.com/rust-lang/rust/commit/1e9aa8a96b207668799365bf891a459b62410b60"}, {"sha": "b8ef1db7a953c5ef65aa2b2440e9cf1fd56b0495", "url": "https://api.github.com/repos/rust-lang/rust/commits/b8ef1db7a953c5ef65aa2b2440e9cf1fd56b0495", "html_url": "https://github.com/rust-lang/rust/commit/b8ef1db7a953c5ef65aa2b2440e9cf1fd56b0495"}], "stats": {"total": 15, "additions": 8, "deletions": 7}, "files": [{"sha": "e6900742c31d235d7ce15e4f1f1c1b5e4f2341fc", "filename": "library/core/src/iter/traits/collect.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/6b4563bf93f4b103ed22507ed825008b89e4f5d9/library%2Fcore%2Fsrc%2Fiter%2Ftraits%2Fcollect.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6b4563bf93f4b103ed22507ed825008b89e4f5d9/library%2Fcore%2Fsrc%2Fiter%2Ftraits%2Fcollect.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fiter%2Ftraits%2Fcollect.rs?ref=6b4563bf93f4b103ed22507ed825008b89e4f5d9", "patch": "@@ -267,8 +267,9 @@ pub trait IntoIterator {\n     fn into_iter(self) -> Self::IntoIter;\n }\n \n+#[rustc_const_unstable(feature = \"const_intoiterator_identity\", issue = \"90603\")]\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n-impl<I: Iterator> IntoIterator for I {\n+impl<I: ~const Iterator> const IntoIterator for I {\n     type Item = I::Item;\n     type IntoIter = I;\n "}, {"sha": "e36324f0b3eea2680367b8780d7413fde536266e", "filename": "src/test/ui/consts/const-fn-error.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6b4563bf93f4b103ed22507ed825008b89e4f5d9/src%2Ftest%2Fui%2Fconsts%2Fconst-fn-error.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6b4563bf93f4b103ed22507ed825008b89e4f5d9/src%2Ftest%2Fui%2Fconsts%2Fconst-fn-error.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-fn-error.stderr?ref=6b4563bf93f4b103ed22507ed825008b89e4f5d9", "patch": "@@ -22,8 +22,8 @@ LL |     for i in 0..x {\n note: impl defined here, but it is not `const`\n   --> $SRC_DIR/core/src/iter/traits/collect.rs:LL:COL\n    |\n-LL | impl<I: Iterator> IntoIterator for I {\n-   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+LL | impl<I: ~const Iterator> const IntoIterator for I {\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    = note: calls in constant functions are limited to constant functions, tuple structs and tuple variants\n \n error[E0658]: mutable references are not allowed in constant functions"}, {"sha": "f2e1c8a4991a31c5f265db040cf518b6b0695c74", "filename": "src/test/ui/consts/const-for.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6b4563bf93f4b103ed22507ed825008b89e4f5d9/src%2Ftest%2Fui%2Fconsts%2Fconst-for.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6b4563bf93f4b103ed22507ed825008b89e4f5d9/src%2Ftest%2Fui%2Fconsts%2Fconst-for.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-for.stderr?ref=6b4563bf93f4b103ed22507ed825008b89e4f5d9", "patch": "@@ -7,8 +7,8 @@ LL |     for _ in 0..5 {}\n note: impl defined here, but it is not `const`\n   --> $SRC_DIR/core/src/iter/traits/collect.rs:LL:COL\n    |\n-LL | impl<I: Iterator> IntoIterator for I {\n-   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+LL | impl<I: ~const Iterator> const IntoIterator for I {\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    = note: calls in constants are limited to constant functions, tuple structs and tuple variants\n \n error[E0015]: cannot call non-const fn `<std::ops::Range<i32> as Iterator>::next` in constants"}, {"sha": "c2079a19d0a58059b03637f4d7009c7292d42808", "filename": "src/test/ui/never_type/issue-52443.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6b4563bf93f4b103ed22507ed825008b89e4f5d9/src%2Ftest%2Fui%2Fnever_type%2Fissue-52443.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6b4563bf93f4b103ed22507ed825008b89e4f5d9/src%2Ftest%2Fui%2Fnever_type%2Fissue-52443.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fnever_type%2Fissue-52443.stderr?ref=6b4563bf93f4b103ed22507ed825008b89e4f5d9", "patch": "@@ -47,8 +47,8 @@ LL |     [(); { for _ in 0usize.. {}; 0}];\n note: impl defined here, but it is not `const`\n   --> $SRC_DIR/core/src/iter/traits/collect.rs:LL:COL\n    |\n-LL | impl<I: Iterator> IntoIterator for I {\n-   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+LL | impl<I: ~const Iterator> const IntoIterator for I {\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    = note: calls in constants are limited to constant functions, tuple structs and tuple variants\n \n error[E0658]: mutable references are not allowed in constants"}]}