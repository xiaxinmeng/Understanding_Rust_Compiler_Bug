{"sha": "e0df0ae734ec97ad7cc67cf6bed0d142275571b9", "node_id": "MDY6Q29tbWl0NzI0NzEyOmUwZGYwYWU3MzRlYzk3YWQ3Y2M2N2NmNmJlZDBkMTQyMjc1NTcxYjk=", "commit": {"author": {"name": "Gabriel Majeri", "email": "gabriel.majeri6@gmail.com", "date": "2018-09-16T09:56:44Z"}, "committer": {"name": "Gabriel Majeri", "email": "gabriel.majeri6@gmail.com", "date": "2018-09-27T17:13:33Z"}, "message": "Make example code use global variables\n\nBecause `fn main()` was added automatically, the variables\nwere actually local statics.", "tree": {"sha": "6939a492fc56d86f40f295005e9d4fe77fb39a96", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6939a492fc56d86f40f295005e9d4fe77fb39a96"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e0df0ae734ec97ad7cc67cf6bed0d142275571b9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e0df0ae734ec97ad7cc67cf6bed0d142275571b9", "html_url": "https://github.com/rust-lang/rust/commit/e0df0ae734ec97ad7cc67cf6bed0d142275571b9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e0df0ae734ec97ad7cc67cf6bed0d142275571b9/comments", "author": {"login": "GabrielMajeri", "id": 3010346, "node_id": "MDQ6VXNlcjMwMTAzNDY=", "avatar_url": "https://avatars.githubusercontent.com/u/3010346?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielMajeri", "html_url": "https://github.com/GabrielMajeri", "followers_url": "https://api.github.com/users/GabrielMajeri/followers", "following_url": "https://api.github.com/users/GabrielMajeri/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielMajeri/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielMajeri/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielMajeri/subscriptions", "organizations_url": "https://api.github.com/users/GabrielMajeri/orgs", "repos_url": "https://api.github.com/users/GabrielMajeri/repos", "events_url": "https://api.github.com/users/GabrielMajeri/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielMajeri/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GabrielMajeri", "id": 3010346, "node_id": "MDQ6VXNlcjMwMTAzNDY=", "avatar_url": "https://avatars.githubusercontent.com/u/3010346?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielMajeri", "html_url": "https://github.com/GabrielMajeri", "followers_url": "https://api.github.com/users/GabrielMajeri/followers", "following_url": "https://api.github.com/users/GabrielMajeri/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielMajeri/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielMajeri/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielMajeri/subscriptions", "organizations_url": "https://api.github.com/users/GabrielMajeri/orgs", "repos_url": "https://api.github.com/users/GabrielMajeri/repos", "events_url": "https://api.github.com/users/GabrielMajeri/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielMajeri/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f5e991bee01104342ade57d8f2ea51527190c50d", "url": "https://api.github.com/repos/rust-lang/rust/commits/f5e991bee01104342ade57d8f2ea51527190c50d", "html_url": "https://github.com/rust-lang/rust/commit/f5e991bee01104342ade57d8f2ea51527190c50d"}], "stats": {"total": 27, "additions": 14, "deletions": 13}, "files": [{"sha": "df153561b4b162dab1aecc207b896acef5c2881f", "filename": "src/libstd/sync/mod.rs", "status": "modified", "additions": 14, "deletions": 13, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/e0df0ae734ec97ad7cc67cf6bed0d142275571b9/src%2Flibstd%2Fsync%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e0df0ae734ec97ad7cc67cf6bed0d142275571b9/src%2Flibstd%2Fsync%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsync%2Fmod.rs?ref=e0df0ae734ec97ad7cc67cf6bed0d142275571b9", "patch": "@@ -18,17 +18,20 @@\n //! Considering the following code, operating on some global static variables:\n //!\n //! ```rust\n-//! # static mut A: u32 = 0;\n-//! # static mut B: u32 = 0;\n-//! # static mut C: u32 = 0;\n-//! # unsafe {\n-//! A = 3;\n-//! B = 4;\n-//! A = A + B;\n-//! C = B;\n-//! println!(\"{} {} {}\", A, B, C);\n-//! C = A;\n-//! # }\n+//! static mut A: u32 = 0;\n+//! static mut B: u32 = 0;\n+//! static mut C: u32 = 0;\n+//!\n+//! fn main() {\n+//!     unsafe {\n+//!         A = 3;\n+//!         B = 4;\n+//!         A = A + B;\n+//!         C = B;\n+//!         println!(\"{} {} {}\", A, B, C);\n+//!         C = A;\n+//!     }\n+//! }\n //! ```\n //!\n //! It appears _as if_ some variables stored in memory are changed, an addition\n@@ -42,8 +45,6 @@\n //! - first store to `C` might be moved before the store to `A` or `B`,\n //!   _as if_ we had written `C = 4; A = 3; B = 4;`\n //!\n-//! - last store to `C` might be removed, since we never read from it again.\n-//!\n //! - assignment of `A + B` to `A` might be removed, the sum can be stored in a\n //!   in a register until it gets printed, and the global variable never gets\n //!   updated."}]}