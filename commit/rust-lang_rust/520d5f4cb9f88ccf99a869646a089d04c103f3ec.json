{"sha": "520d5f4cb9f88ccf99a869646a089d04c103f3ec", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUyMGQ1ZjRjYjlmODhjY2Y5OWE4Njk2NDZhMDg5ZDA0YzEwM2YzZWM=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2016-11-06T20:06:20Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2016-11-06T21:56:35Z"}, "message": "Set attributes hidden by default", "tree": {"sha": "b64e8e197a0eb8a3cc040cc60d029bbd5f364acf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b64e8e197a0eb8a3cc040cc60d029bbd5f364acf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/520d5f4cb9f88ccf99a869646a089d04c103f3ec", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/520d5f4cb9f88ccf99a869646a089d04c103f3ec", "html_url": "https://github.com/rust-lang/rust/commit/520d5f4cb9f88ccf99a869646a089d04c103f3ec", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/520d5f4cb9f88ccf99a869646a089d04c103f3ec/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "22dad4b0440b184568956c10f2cbedabf763065a", "url": "https://api.github.com/repos/rust-lang/rust/commits/22dad4b0440b184568956c10f2cbedabf763065a", "html_url": "https://github.com/rust-lang/rust/commit/22dad4b0440b184568956c10f2cbedabf763065a"}], "stats": {"total": 32, "additions": 24, "deletions": 8}, "files": [{"sha": "474d2bbe7fcb54c6d4880a3b792f91c05b5968da", "filename": "src/librustdoc/html/static/main.js", "status": "modified", "additions": 24, "deletions": 8, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/520d5f4cb9f88ccf99a869646a089d04c103f3ec/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/520d5f4cb9f88ccf99a869646a089d04c103f3ec/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js?ref=520d5f4cb9f88ccf99a869646a089d04c103f3ec", "patch": "@@ -963,27 +963,35 @@\n         }\n     }\n \n-    $(\"#toggle-all-docs\").on(\"click\", toggleAllDocs);\n-\n-    $(document).on(\"click\", \".collapse-toggle\", function() {\n-        var toggle = $(this);\n+    function collapseDocs(toggle, animate) {\n         var relatedDoc = toggle.parent().next();\n         if (relatedDoc.is(\".stability\")) {\n             relatedDoc = relatedDoc.next();\n         }\n         if (relatedDoc.is(\".docblock\")) {\n             if (relatedDoc.is(\":visible\")) {\n-                relatedDoc.slideUp({duration: 'fast', easing: 'linear'});\n+                if (animate === true) {\n+                    relatedDoc.slideUp({duration: 'fast', easing: 'linear'});\n+                    toggle.children(\".toggle-label\").fadeIn();\n+                } else {\n+                    relatedDoc.hide();\n+                    toggle.children(\".toggle-label\").show();\n+                }\n                 toggle.parent(\".toggle-wrapper\").addClass(\"collapsed\");\n                 toggle.children(\".inner\").text(labelForToggleButton(true));\n-                toggle.children(\".toggle-label\").fadeIn();\n             } else {\n                 relatedDoc.slideDown({duration: 'fast', easing: 'linear'});\n                 toggle.parent(\".toggle-wrapper\").removeClass(\"collapsed\");\n                 toggle.children(\".inner\").text(labelForToggleButton(false));\n                 toggle.children(\".toggle-label\").hide();\n             }\n         }\n+    }\n+\n+    $(\"#toggle-all-docs\").on(\"click\", toggleAllDocs);\n+\n+    $(document).on(\"click\", \".collapse-toggle\", function() {\n+        collapseDocs($(this), true)\n     });\n \n     $(function() {\n@@ -999,14 +1007,22 @@\n         });\n \n         var mainToggle =\n-            $(toggle).append(\n+            $(toggle.clone()).append(\n                 $('<span/>', {'class': 'toggle-label'})\n                     .css('display', 'none')\n                     .html('&nbsp;Expand&nbsp;description'));\n         var wrapper = $(\"<div class='toggle-wrapper'>\").append(mainToggle);\n         $(\"#main > .docblock\").before(wrapper);\n+        var mainToggle =\n+            $(toggle).append(\n+                $('<span/>', {'class': 'toggle-label'})\n+                    .css('display', 'none')\n+                    .html('&nbsp;Expand&nbsp;attributes'));\n         var wrapper = $(\"<div class='toggle-wrapper toggle-attributes'>\").append(mainToggle);\n-        $(\"#main > pre > .docblock\").before(wrapper);\n+        $(\"#main > pre > .attributes\").each(function() {\n+            $(this).before(wrapper);\n+            collapseDocs($($(this).prev().children()[0]), false);\n+        });\n     });\n \n     $('pre.line-numbers').on('click', 'span', function() {"}]}