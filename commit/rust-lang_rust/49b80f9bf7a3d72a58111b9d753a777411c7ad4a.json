{"sha": "49b80f9bf7a3d72a58111b9d753a777411c7ad4a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ5YjgwZjliZjdhM2Q3MmE1ODExMWI5ZDc1M2E3Nzc0MTFjN2FkNGE=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-08-11T23:50:45Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-08-12T19:08:26Z"}, "message": "Remove str::from_bytes\n\nThis is exactly the same as str::unsafe_from_bytes", "tree": {"sha": "34f8a047a558b60863c47f55a7e6c96aebb251be", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/34f8a047a558b60863c47f55a7e6c96aebb251be"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/49b80f9bf7a3d72a58111b9d753a777411c7ad4a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/49b80f9bf7a3d72a58111b9d753a777411c7ad4a", "html_url": "https://github.com/rust-lang/rust/commit/49b80f9bf7a3d72a58111b9d753a777411c7ad4a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/49b80f9bf7a3d72a58111b9d753a777411c7ad4a/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7e255335d2027f32d78748b0a557014b6e14866b", "url": "https://api.github.com/repos/rust-lang/rust/commits/7e255335d2027f32d78748b0a557014b6e14866b", "html_url": "https://github.com/rust-lang/rust/commit/7e255335d2027f32d78748b0a557014b6e14866b"}], "stats": {"total": 18, "additions": 8, "deletions": 10}, "files": [{"sha": "36d496111a81a1a355a6ae364e5c29025fb5ac06", "filename": "src/comp/middle/trans.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/49b80f9bf7a3d72a58111b9d753a777411c7ad4a/src%2Fcomp%2Fmiddle%2Ftrans.rs", "raw_url": "https://github.com/rust-lang/rust/raw/49b80f9bf7a3d72a58111b9d753a777411c7ad4a/src%2Fcomp%2Fmiddle%2Ftrans.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Ftrans.rs?ref=49b80f9bf7a3d72a58111b9d753a777411c7ad4a", "patch": "@@ -312,7 +312,7 @@ fn sanitize(s: &str) -> str {\n                            c != ' ' as u8 && c != '\\t' as u8 && c != ';' as u8\n                        {\n                         let v = [c];\n-                        result += str::from_bytes(v);\n+                        result += str::unsafe_from_bytes(v);\n                     }\n                 }\n             }"}, {"sha": "b101f274858dd93e034ae404bbad167beceb9b05", "filename": "src/comp/syntax/parse/lexer.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/49b80f9bf7a3d72a58111b9d753a777411c7ad4a/src%2Fcomp%2Fsyntax%2Fparse%2Flexer.rs", "raw_url": "https://github.com/rust-lang/rust/raw/49b80f9bf7a3d72a58111b9d753a777411c7ad4a/src%2Fcomp%2Fsyntax%2Fparse%2Flexer.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fsyntax%2Fparse%2Flexer.rs?ref=49b80f9bf7a3d72a58111b9d753a777411c7ad4a", "patch": "@@ -177,11 +177,11 @@ fn scan_exponent(rdr: &reader) -> option::t[str] {\n     let c = rdr.curr();\n     let rslt = \"\";\n     if c == 'e' || c == 'E' {\n-        rslt += str::from_bytes([c as u8]);\n+        rslt += str::unsafe_from_bytes([c as u8]);\n         rdr.bump();\n         c = rdr.curr();\n         if c == '-' || c == '+' {\n-            rslt += str::from_bytes([c as u8]);\n+            rslt += str::unsafe_from_bytes([c as u8]);\n             rdr.bump();\n         }\n         let exponent = scan_dec_digits(rdr);\n@@ -195,7 +195,7 @@ fn scan_dec_digits(rdr: &reader) -> str {\n     let c = rdr.curr();\n     let rslt: str = \"\";\n     while is_dec_digit(c) || c == '_' {\n-        if c != '_' { rslt += str::from_bytes([c as u8]); }\n+        if c != '_' { rslt += str::unsafe_from_bytes([c as u8]); }\n         rdr.bump();\n         c = rdr.curr();\n     }"}, {"sha": "0730c98d6c2642d20d16577ff68a26fcb7e3eeb1", "filename": "src/comp/syntax/print/pprust.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/49b80f9bf7a3d72a58111b9d753a777411c7ad4a/src%2Fcomp%2Fsyntax%2Fprint%2Fpprust.rs", "raw_url": "https://github.com/rust-lang/rust/raw/49b80f9bf7a3d72a58111b9d753a777411c7ad4a/src%2Fcomp%2Fsyntax%2Fprint%2Fpprust.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fsyntax%2Fprint%2Fpprust.rs?ref=49b80f9bf7a3d72a58111b9d753a777411c7ad4a", "patch": "@@ -1385,7 +1385,8 @@ fn print_literal(s: &ps, lit: &@ast::lit) {\n         print_string(s, st);\n       }\n       ast::lit_char(ch) {\n-        word(s.s, \"'\" + escape_str(str::from_bytes([ch as u8]), '\\'') + \"'\");\n+        word(s.s, \"'\" +\n+             escape_str(str::unsafe_from_bytes([ch as u8]), '\\'') + \"'\");\n       }\n       ast::lit_int(val) { word(s.s, int::str(val)); }\n       ast::lit_uint(val) { word(s.s, uint::str(val) + \"u\"); }"}, {"sha": "08e2f86a78990c2ad334981cbb4d88d8a6089290", "filename": "src/lib/extfmt.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/49b80f9bf7a3d72a58111b9d753a777411c7ad4a/src%2Flib%2Fextfmt.rs", "raw_url": "https://github.com/rust-lang/rust/raw/49b80f9bf7a3d72a58111b9d753a777411c7ad4a/src%2Flib%2Fextfmt.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib%2Fextfmt.rs?ref=49b80f9bf7a3d72a58111b9d753a777411c7ad4a", "patch": "@@ -358,7 +358,7 @@ mod rt {\n     fn str_init_elt(c: char, n_elts: uint) -> str {\n         let svec = vec::init_elt[u8](c as u8, n_elts);\n \n-        ret str::from_bytes(svec);\n+        ret str::unsafe_from_bytes(svec);\n     }\n     tag pad_mode { pad_signed; pad_unsigned; pad_nozero; }\n     fn pad(cv: &conv, s: str, mode: pad_mode) -> str {"}, {"sha": "40d49bc690e8a986eabf294bfb06f056168a813f", "filename": "src/lib/str.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/49b80f9bf7a3d72a58111b9d753a777411c7ad4a/src%2Flib%2Fstr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/49b80f9bf7a3d72a58111b9d753a777411c7ad4a/src%2Flib%2Fstr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib%2Fstr.rs?ref=49b80f9bf7a3d72a58111b9d753a777411c7ad4a", "patch": "@@ -193,9 +193,6 @@ fn bytes(s: str) -> [u8] {\n     ret ivec::unsafe::from_buf(ptr, byte_len(s));\n }\n \n-fn from_bytes(v: vec[u8]) -> str { ret rustrt::str_from_vec(v); }\n-\n-\n // FIXME temp thing\n fn unsafe_from_bytes(v: vec[mutable? u8]) -> str {\n     ret rustrt::str_from_vec(v);"}, {"sha": "62a0ce79d6de39f8cd0f757207860fbba9b8262c", "filename": "src/test/stdtest/vec_str_conversions.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/49b80f9bf7a3d72a58111b9d753a777411c7ad4a/src%2Ftest%2Fstdtest%2Fvec_str_conversions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/49b80f9bf7a3d72a58111b9d753a777411c7ad4a/src%2Ftest%2Fstdtest%2Fvec_str_conversions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fstdtest%2Fvec_str_conversions.rs?ref=49b80f9bf7a3d72a58111b9d753a777411c7ad4a", "patch": "@@ -17,7 +17,7 @@ fn test_simple() {\n      */\n \n     let v: vec[u8] = ivec::to_vec(str::bytes(s1));\n-    let s2: str = str::from_bytes(v);\n+    let s2: str = str::unsafe_from_bytes(v);\n     let i: uint = 0u;\n     let n1: uint = str::byte_len(s1);\n     let n2: uint = vec::len[u8](v);"}]}