{"sha": "12e609ba3cb7a395601c3b6762682248b0a325ad", "node_id": "C_kwDOAAsO6NoAKDEyZTYwOWJhM2NiN2EzOTU2MDFjM2I2NzYyNjgyMjQ4YjBhMzI1YWQ", "commit": {"author": {"name": "Takayuki Maeda", "email": "takoyaki0316@gmail.com", "date": "2022-08-15T18:42:58Z"}, "committer": {"name": "Takayuki Maeda", "email": "takoyaki0316@gmail.com", "date": "2022-08-15T18:42:58Z"}, "message": "use `span_suggestion` instead of `span_suggestion_verbose`", "tree": {"sha": "d0a2e109da0e0205c062b33b7c746d0c0b77ca43", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d0a2e109da0e0205c062b33b7c746d0c0b77ca43"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/12e609ba3cb7a395601c3b6762682248b0a325ad", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/12e609ba3cb7a395601c3b6762682248b0a325ad", "html_url": "https://github.com/rust-lang/rust/commit/12e609ba3cb7a395601c3b6762682248b0a325ad", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/12e609ba3cb7a395601c3b6762682248b0a325ad/comments", "author": {"login": "TaKO8Ki", "id": 41065217, "node_id": "MDQ6VXNlcjQxMDY1MjE3", "avatar_url": "https://avatars.githubusercontent.com/u/41065217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TaKO8Ki", "html_url": "https://github.com/TaKO8Ki", "followers_url": "https://api.github.com/users/TaKO8Ki/followers", "following_url": "https://api.github.com/users/TaKO8Ki/following{/other_user}", "gists_url": "https://api.github.com/users/TaKO8Ki/gists{/gist_id}", "starred_url": "https://api.github.com/users/TaKO8Ki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TaKO8Ki/subscriptions", "organizations_url": "https://api.github.com/users/TaKO8Ki/orgs", "repos_url": "https://api.github.com/users/TaKO8Ki/repos", "events_url": "https://api.github.com/users/TaKO8Ki/events{/privacy}", "received_events_url": "https://api.github.com/users/TaKO8Ki/received_events", "type": "User", "site_admin": false}, "committer": {"login": "TaKO8Ki", "id": 41065217, "node_id": "MDQ6VXNlcjQxMDY1MjE3", "avatar_url": "https://avatars.githubusercontent.com/u/41065217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TaKO8Ki", "html_url": "https://github.com/TaKO8Ki", "followers_url": "https://api.github.com/users/TaKO8Ki/followers", "following_url": "https://api.github.com/users/TaKO8Ki/following{/other_user}", "gists_url": "https://api.github.com/users/TaKO8Ki/gists{/gist_id}", "starred_url": "https://api.github.com/users/TaKO8Ki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TaKO8Ki/subscriptions", "organizations_url": "https://api.github.com/users/TaKO8Ki/orgs", "repos_url": "https://api.github.com/users/TaKO8Ki/repos", "events_url": "https://api.github.com/users/TaKO8Ki/events{/privacy}", "received_events_url": "https://api.github.com/users/TaKO8Ki/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4d1b5f0d997b567b558a3fb88bd4724ba6e32f32", "url": "https://api.github.com/repos/rust-lang/rust/commits/4d1b5f0d997b567b558a3fb88bd4724ba6e32f32", "html_url": "https://github.com/rust-lang/rust/commit/4d1b5f0d997b567b558a3fb88bd4724ba6e32f32"}], "stats": {"total": 28, "additions": 6, "deletions": 22}, "files": [{"sha": "9c2fdd875164f3822a3b6a6168c08e5b884383e9", "filename": "compiler/rustc_typeck/src/check/expr.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/12e609ba3cb7a395601c3b6762682248b0a325ad/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/12e609ba3cb7a395601c3b6762682248b0a325ad/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fexpr.rs?ref=12e609ba3cb7a395601c3b6762682248b0a325ad", "patch": "@@ -1328,9 +1328,9 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n             {\n                 match self.tcx.sess.diagnostic().steal_diagnostic(span, StashKey::UnderscoreForArrayLengths) {\n                     Some(mut err) => {\n-                        err.span_suggestion_verbose(\n+                        err.span_suggestion(\n                             span,\n-                            \"consider adding an array length\",\n+                            \"consider specifying the array length\",\n                             array_len,\n                             Applicability::MaybeIncorrect,\n                         );"}, {"sha": "9000f71602850453b4c8c2c50a0b019ac990092c", "filename": "src/test/ui/array-slice-vec/suggest-array-length.stderr", "status": "modified", "additions": 3, "deletions": 15, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/12e609ba3cb7a395601c3b6762682248b0a325ad/src%2Ftest%2Fui%2Farray-slice-vec%2Fsuggest-array-length.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/12e609ba3cb7a395601c3b6762682248b0a325ad/src%2Ftest%2Fui%2Farray-slice-vec%2Fsuggest-array-length.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Farray-slice-vec%2Fsuggest-array-length.stderr?ref=12e609ba3cb7a395601c3b6762682248b0a325ad", "patch": "@@ -20,40 +20,28 @@ error[E0658]: using `_` for array lengths is unstable\n   --> $DIR/suggest-array-length.rs:5:22\n    |\n LL |     const Foo: [i32; _] = [1, 2, 3];\n-   |                      ^\n+   |                      ^ help: consider specifying the array length: `3`\n    |\n    = note: see issue #85077 <https://github.com/rust-lang/rust/issues/85077> for more information\n    = help: add `#![feature(generic_arg_infer)]` to the crate attributes to enable\n-help: consider adding an array length\n-   |\n-LL |     const Foo: [i32; 3] = [1, 2, 3];\n-   |                      ~\n \n error[E0658]: using `_` for array lengths is unstable\n   --> $DIR/suggest-array-length.rs:8:20\n    |\n LL |     let foo: [i32; _] = [1, 2, 3];\n-   |                    ^\n+   |                    ^ help: consider specifying the array length: `3`\n    |\n    = note: see issue #85077 <https://github.com/rust-lang/rust/issues/85077> for more information\n    = help: add `#![feature(generic_arg_infer)]` to the crate attributes to enable\n-help: consider adding an array length\n-   |\n-LL |     let foo: [i32; 3] = [1, 2, 3];\n-   |                    ~\n \n error[E0658]: using `_` for array lengths is unstable\n   --> $DIR/suggest-array-length.rs:11:20\n    |\n LL |     let bar: [i32; _] = [0; 3];\n-   |                    ^\n+   |                    ^ help: consider specifying the array length: `3`\n    |\n    = note: see issue #85077 <https://github.com/rust-lang/rust/issues/85077> for more information\n    = help: add `#![feature(generic_arg_infer)]` to the crate attributes to enable\n-help: consider adding an array length\n-   |\n-LL |     let bar: [i32; 3] = [0; 3];\n-   |                    ~\n \n error: aborting due to 6 previous errors\n "}, {"sha": "56123a983b34f8c02f7432ff8e6579db60e4e75a", "filename": "src/test/ui/feature-gates/feature-gate-generic_arg_infer.normal.stderr", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/12e609ba3cb7a395601c3b6762682248b0a325ad/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-generic_arg_infer.normal.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/12e609ba3cb7a395601c3b6762682248b0a325ad/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-generic_arg_infer.normal.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-generic_arg_infer.normal.stderr?ref=12e609ba3cb7a395601c3b6762682248b0a325ad", "patch": "@@ -14,14 +14,10 @@ error[E0658]: using `_` for array lengths is unstable\n   --> $DIR/feature-gate-generic_arg_infer.rs:14:18\n    |\n LL |     let _y: [u8; _] = [0; 3];\n-   |                  ^\n+   |                  ^ help: consider specifying the array length: `3`\n    |\n    = note: see issue #85077 <https://github.com/rust-lang/rust/issues/85077> for more information\n    = help: add `#![feature(generic_arg_infer)]` to the crate attributes to enable\n-help: consider adding an array length\n-   |\n-LL |     let _y: [u8; 3] = [0; 3];\n-   |                  ~\n \n error[E0747]: type provided when a constant was expected\n   --> $DIR/feature-gate-generic_arg_infer.rs:20:20"}]}