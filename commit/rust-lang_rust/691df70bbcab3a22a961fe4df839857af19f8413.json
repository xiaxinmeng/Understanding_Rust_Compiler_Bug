{"sha": "691df70bbcab3a22a961fe4df839857af19f8413", "node_id": "C_kwDOAAsO6NoAKDY5MWRmNzBiYmNhYjNhMjJhOTYxZmU0ZGY4Mzk4NTdhZjE5Zjg0MTM", "commit": {"author": {"name": "Niki4tap", "email": "rombiklol2@gmail.com", "date": "2022-12-19T12:32:49Z"}, "committer": {"name": "Niki4tap", "email": "rombiklol2@gmail.com", "date": "2022-12-19T12:34:55Z"}, "message": "Inline some `const`s", "tree": {"sha": "1439b9135e2541e2ca3df04442c659f25c5691d1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1439b9135e2541e2ca3df04442c659f25c5691d1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/691df70bbcab3a22a961fe4df839857af19f8413", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/691df70bbcab3a22a961fe4df839857af19f8413", "html_url": "https://github.com/rust-lang/rust/commit/691df70bbcab3a22a961fe4df839857af19f8413", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/691df70bbcab3a22a961fe4df839857af19f8413/comments", "author": {"login": "Niki4tap", "id": 66798058, "node_id": "MDQ6VXNlcjY2Nzk4MDU4", "avatar_url": "https://avatars.githubusercontent.com/u/66798058?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Niki4tap", "html_url": "https://github.com/Niki4tap", "followers_url": "https://api.github.com/users/Niki4tap/followers", "following_url": "https://api.github.com/users/Niki4tap/following{/other_user}", "gists_url": "https://api.github.com/users/Niki4tap/gists{/gist_id}", "starred_url": "https://api.github.com/users/Niki4tap/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Niki4tap/subscriptions", "organizations_url": "https://api.github.com/users/Niki4tap/orgs", "repos_url": "https://api.github.com/users/Niki4tap/repos", "events_url": "https://api.github.com/users/Niki4tap/events{/privacy}", "received_events_url": "https://api.github.com/users/Niki4tap/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Niki4tap", "id": 66798058, "node_id": "MDQ6VXNlcjY2Nzk4MDU4", "avatar_url": "https://avatars.githubusercontent.com/u/66798058?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Niki4tap", "html_url": "https://github.com/Niki4tap", "followers_url": "https://api.github.com/users/Niki4tap/followers", "following_url": "https://api.github.com/users/Niki4tap/following{/other_user}", "gists_url": "https://api.github.com/users/Niki4tap/gists{/gist_id}", "starred_url": "https://api.github.com/users/Niki4tap/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Niki4tap/subscriptions", "organizations_url": "https://api.github.com/users/Niki4tap/orgs", "repos_url": "https://api.github.com/users/Niki4tap/repos", "events_url": "https://api.github.com/users/Niki4tap/events{/privacy}", "received_events_url": "https://api.github.com/users/Niki4tap/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cc985748838c64b7bf4a3be635026bfffb02088c", "url": "https://api.github.com/repos/rust-lang/rust/commits/cc985748838c64b7bf4a3be635026bfffb02088c", "html_url": "https://github.com/rust-lang/rust/commit/cc985748838c64b7bf4a3be635026bfffb02088c"}], "stats": {"total": 21, "additions": 12, "deletions": 9}, "files": [{"sha": "e75d7f6bf1d5295eb4134622bcc38b85a2de98ed", "filename": "clippy_lints/src/transmute/transmute_null_to_fn.rs", "status": "modified", "additions": 12, "deletions": 9, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/691df70bbcab3a22a961fe4df839857af19f8413/clippy_lints%2Fsrc%2Ftransmute%2Ftransmute_null_to_fn.rs", "raw_url": "https://github.com/rust-lang/rust/raw/691df70bbcab3a22a961fe4df839857af19f8413/clippy_lints%2Fsrc%2Ftransmute%2Ftransmute_null_to_fn.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ftransmute%2Ftransmute_null_to_fn.rs?ref=691df70bbcab3a22a961fe4df839857af19f8413", "patch": "@@ -8,16 +8,19 @@ use rustc_span::symbol::sym;\n \n use super::TRANSMUTE_NULL_TO_FN;\n \n-const LINT_MSG: &str = \"transmuting a known null pointer into a function pointer\";\n-const NOTE_MSG: &str = \"this transmute results in undefined behavior\";\n-const HELP_MSG: &str =\n-    \"try wrapping your function pointer type in `Option<T>` instead, and using `None` as a null pointer value\";\n-\n fn lint_expr(cx: &LateContext<'_>, expr: &Expr<'_>) {\n-    span_lint_and_then(cx, TRANSMUTE_NULL_TO_FN, expr.span, LINT_MSG, |diag| {\n-        diag.span_label(expr.span, NOTE_MSG);\n-        diag.help(HELP_MSG);\n-    });\n+    span_lint_and_then(\n+        cx,\n+        TRANSMUTE_NULL_TO_FN,\n+        expr.span,\n+        \"transmuting a known null pointer into a function pointer\",\n+        |diag| {\n+            diag.span_label(expr.span, \"this transmute results in undefined behavior\");\n+            diag.help(\n+               \"try wrapping your function pointer type in `Option<T>` instead, and using `None` as a null pointer value\"\n+            );\n+        },\n+    );\n }\n \n pub(super) fn check<'tcx>(cx: &LateContext<'tcx>, expr: &'tcx Expr<'_>, arg: &'tcx Expr<'_>, to_ty: Ty<'tcx>) -> bool {"}]}