{"sha": "2eccb1d0c241b2ad67d0cdadc66bbc45e9f6e290", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJlY2NiMWQwYzI0MWIyYWQ2N2QwY2RhZGM2NmJiYzQ1ZTlmNmUyOTA=", "commit": {"author": {"name": "Corey Richardson", "email": "corey@octayn.net", "date": "2014-03-30T12:30:25Z"}, "committer": {"name": "Corey Richardson", "email": "corey@octayn.net", "date": "2014-04-04T04:52:41Z"}, "message": "manual: many fixes\n\nMostly around attributes and language items.", "tree": {"sha": "3aaccd80b25b6ff30cb3fccb60987b8039edc186", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3aaccd80b25b6ff30cb3fccb60987b8039edc186"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2eccb1d0c241b2ad67d0cdadc66bbc45e9f6e290", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2eccb1d0c241b2ad67d0cdadc66bbc45e9f6e290", "html_url": "https://github.com/rust-lang/rust/commit/2eccb1d0c241b2ad67d0cdadc66bbc45e9f6e290", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2eccb1d0c241b2ad67d0cdadc66bbc45e9f6e290/comments", "author": {"login": "emberian", "id": 704250, "node_id": "MDQ6VXNlcjcwNDI1MA==", "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emberian", "html_url": "https://github.com/emberian", "followers_url": "https://api.github.com/users/emberian/followers", "following_url": "https://api.github.com/users/emberian/following{/other_user}", "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}", "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emberian/subscriptions", "organizations_url": "https://api.github.com/users/emberian/orgs", "repos_url": "https://api.github.com/users/emberian/repos", "events_url": "https://api.github.com/users/emberian/events{/privacy}", "received_events_url": "https://api.github.com/users/emberian/received_events", "type": "User", "site_admin": false}, "committer": {"login": "emberian", "id": 704250, "node_id": "MDQ6VXNlcjcwNDI1MA==", "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emberian", "html_url": "https://github.com/emberian", "followers_url": "https://api.github.com/users/emberian/followers", "following_url": "https://api.github.com/users/emberian/following{/other_user}", "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}", "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emberian/subscriptions", "organizations_url": "https://api.github.com/users/emberian/orgs", "repos_url": "https://api.github.com/users/emberian/repos", "events_url": "https://api.github.com/users/emberian/events{/privacy}", "received_events_url": "https://api.github.com/users/emberian/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a410833a7f86363a5929e46d1bc2087375d91f0c", "url": "https://api.github.com/repos/rust-lang/rust/commits/a410833a7f86363a5929e46d1bc2087375d91f0c", "html_url": "https://github.com/rust-lang/rust/commit/a410833a7f86363a5929e46d1bc2087375d91f0c"}], "stats": {"total": 254, "additions": 172, "deletions": 82}, "files": [{"sha": "f8ce61d28ad9b1a5c23c811507a3a70fc343e377", "filename": "src/doc/rust.md", "status": "modified", "additions": 172, "deletions": 82, "changes": 254, "blob_url": "https://github.com/rust-lang/rust/blob/2eccb1d0c241b2ad67d0cdadc66bbc45e9f6e290/src%2Fdoc%2Frust.md", "raw_url": "https://github.com/rust-lang/rust/raw/2eccb1d0c241b2ad67d0cdadc66bbc45e9f6e290/src%2Fdoc%2Frust.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Frust.md?ref=2eccb1d0c241b2ad67d0cdadc66bbc45e9f6e290", "patch": "@@ -611,7 +611,7 @@ Attributes on the anonymous crate module define important metadata that influenc\n the behavior of the compiler.\n \n ~~~~\n-// Package ID\n+// Crate ID\n #[ crate_id = \"projx#2.5\" ];\n \n // Additional metadata attributes\n@@ -792,7 +792,7 @@ extern crate std; // equivalent to: extern crate std = \"std\";\n \n extern crate ruststd = \"std\"; // linking to 'std' under another name\n \n-extern crate foo = \"some/where/rust-foo#foo:1.0\"; // a full package ID for external tools\n+extern crate foo = \"some/where/rust-foo#foo:1.0\"; // a full crate ID for external tools\n ~~~~\n \n ##### Use declarations\n@@ -1505,11 +1505,9 @@ specified name.\n extern { }\n ~~~~\n \n-The type of a function\n-declared in an extern block\n-is `extern \"abi\" fn(A1, ..., An) -> R`,\n-where `A1...An` are the declared types of its arguments\n-and `R` is the decalred return type.\n+The type of a function declared in an extern block is `extern \"abi\" fn(A1,\n+..., An) -> R`, where `A1...An` are the declared types of its arguments and\n+`R` is the declared return type.\n \n ## Visibility and Privacy\n \n@@ -1680,41 +1678,43 @@ import public items from their destination, not private items.\n ## Attributes\n \n ~~~~ {.notrust .ebnf .gram}\n-attribute : '#' '[' attr_list ']' ;\n-attr_list : attr [ ',' attr_list ]* ;\n+attribute : '#' '!' ? '[' attr_list ']'\n+attr_list : attr [ ',' attr_list ]*\n attr : ident [ '=' literal\n-             | '(' attr_list ')' ] ? ;\n+             | '(' attr_list ')' ] ?\n ~~~~\n \n Static entities in Rust -- crates, modules and items -- may have _attributes_\n-applied to them. ^[Attributes in Rust are modeled on Attributes in ECMA-335,\n-C#]\n-An attribute is a general, free-form metadatum that is interpreted according to name, convention, and language and compiler version.\n-Attributes may appear as any of\n+applied to them. Attributes in Rust are modeled on Attributes in ECMA-335, C#.\n+An attribute is a general, free-form metadatum that is interpreted according\n+to name, convention, and language and compiler version.  Attributes may appear\n+as any of:\n \n * A single identifier, the attribute name\n-* An identifier followed by the equals sign '=' and a literal, providing a key/value pair\n+* An identifier followed by the equals sign '=' and a literal, providing a\n+  key/value pair\n * An identifier followed by a parenthesized list of sub-attribute arguments\n \n-Attributes terminated by a semi-colon apply to the entity that the attribute is declared\n-within. Attributes that are not terminated by a semi-colon apply to the next entity.\n+Attributes with a bang (\"!\") after the hash (\"#\") apply to the item that the\n+attribute is declared within. Attributes that do not have a bang after the\n+hash by a semi-colon apply to the next item.\n \n An example of attributes:\n \n-~~~~ {.ignore}\n+~~~~\n // General metadata applied to the enclosing module or crate.\n-#[license = \"BSD\"];\n+#![license = \"BSD\"]\n \n // A function marked as a unit test\n #[test]\n fn test_foo() {\n-  ...\n+  /* ... */\n }\n \n // A conditionally-compiled module\n #[cfg(target_os=\"linux\")]\n mod bar {\n-  ...\n+  /* ... */\n }\n \n // A lint attribute used to suppress a warning/error\n@@ -1727,29 +1727,85 @@ pub type int8_t = i8;\n > effectively no difference between an attribute handled by a loadable syntax\n > extension and the compiler.\n \n-Some significant attributes include:\n-\n-* The `doc` attribute, for documenting code in-place.\n-* The `cfg` attribute, for conditional-compilation by build-configuration (see\n-  [Conditional compilation](#conditional-compilation)).\n-* The `crate_id` attribute, for describing the package ID of a crate.\n-* The `lang` attribute, for custom definitions of traits and functions that are\n-  known to the Rust compiler (see [Language items](#language-items)).\n-* The `link` attribute, for describing linkage metadata for a extern blocks.\n-* The `test` attribute, for marking functions as unit tests.\n-* The `allow`, `warn`, `forbid`, and `deny` attributes, for\n-  controlling lint checks (see [Lint check attributes](#lint-check-attributes)).\n-* The `deriving` attribute, for automatically generating implementations of\n-  certain traits.\n-* The `inline` attribute, for expanding functions at caller location (see\n-  [Inline attributes](#inline-attributes)).\n-* The `static_assert` attribute, for asserting that a static bool is true at\n-  compiletime.\n-* The `thread_local` attribute, for defining a `static mut` as a thread-local.\n-  Note that this is only a low-level building block, and is not local to a\n-  *task*, nor does it provide safety.\n-\n-Other attributes may be added or removed during development of the language.\n+### Crate-only attributes\n+\n+- `crate_type` - see [linkage](#linkage).\n+- `feature` - see [compiler features](#compiler-features).\n+- `no_start` - disable linking to the `native` crate, which specifies the\n+  \"start\" language item.\n+- `no_main` - disable emitting the `main` symbol. Useful when some\n+  other object being linked to defines `main`.\n+- `no_std` - disable linking to the `std` crate.\n+- `crate_id` - specify the this crate's crate ID.\n+\n+### Module-only attributes\n+\n+- `path` - specifies the file to load the module from. `#[path=\"foo.rs\"] mod\n+  bar;` is equivalent to `mod bar { /* contents of foo.rs */ }`\n+- `macro_escape` - macros defined in this module will be visible in the\n+  module's parent, after this module has been included.\n+- `no_implicit_prelude` - disable injecting `use std::prelude::*` in this\n+  module.\n+\n+### Function-only attributes\n+\n+- `start` - indicates that this function should be used as the entry point,\n+  overriding the \"start\" language item.  See the \"start\" [language\n+  item](#language-items) for more details.\n+- `main` - indicates that this function should be passed to the entry point,\n+  rather than the function in the crate root named `main`.\n+- `macro_registrar` - when using loadable syntax extensions, mark this\n+  function as the registration point for the current crate's syntax\n+  extensions.\n+\n+### Static-only attributes\n+\n+- `thread_local` - on a `static mut`, this signals that the value of this\n+  static may change depending on the current thread. The exact consequences of\n+  this are implementation-defined.\n+- `address_insignificant` - references to this static may alias with\n+  references to other statics, potentially of unrelated type.\n+\n+### FFI attributes\n+\n+On an `extern` block, the following attributes are interpreted:\n+\n+- `link` - indicate that a native library should be linked to for the\n+  declarations in this block to be linked correctly. See [external\n+  blocks](#external-blocks)\n+- `link_args` - specify arguments to the linker, rather than just the library\n+  name and type. This is feature gated and the exact behavior is\n+  implementation-defined (due to variety of linker invocation syntax).\n+\n+On declarations inside an `extern` block, the following attributes are\n+interpreted:\n+\n+- `link_name` - the name of the symbol that this function or static should be\n+  imported as.\n+- `linkage` - on a static, this specifies the [linkage\n+  type](http://llvm.org/docs/LangRef.html#linkage-types).\n+\n+### Miscellaneous attributes\n+\n+- `simd` - on certain tuple structs, derive the arithmetic operators, which\n+  lower to the target's SIMD instructions, if any.\n+- `link_section` - on statics and functions, this specifies the section of the\n+  object file that this item's contents will be placed into.\n+- `static_assert` - on statics whose type is `bool`, terminates compilation\n+  with an error if it is not initialized to `true`.\n+- `repr` - on C-like enums, this sets the underlying type used for\n+  representation. Useful for FFI.\n+- `no_mangle` - on any item, do not apply the standard name mangling. Set the\n+  symbol for this item to its identifier.\n+- `packed` - on structs or enums, eliminate any padding that would be used to\n+  align fields.\n+- `unsafe_destructor` - allow implementations of the \"drop\" language item\n+  where the type it is implemented for does not implement the \"send\" language\n+  item.\n+- `unsafe_no_drop_flag` - on structs, remove the flag that prevents\n+  destructors from being run twice. Destructors might be run multiple times on\n+  the same object with this attribute.\n+- `macro_export` - export a macro for cross-crate usage.\n \n ### Conditional compilation\n \n@@ -1791,9 +1847,7 @@ one of `foo` and `bar` to be defined (this resembles in the disjunctive normal\n form). Additionally, one can reverse a condition by enclosing it in a\n `not(...)`, like e. g. `#[cfg(not(target_os = \"win32\"))]`.\n \n-To pass a configuration option which triggers a `#[cfg(identifier)]` one can use\n-`rustc --cfg identifier`. In addition to that, the following configurations are\n-pre-defined by the compiler:\n+The following configurations must be defined by the implementation:\n \n  * `target_arch = \"...\"`. Target CPU architecture, such as `\"x86\"`, `\"x86_64\"`\n    `\"mips\"`, or `\"arm\"`.\n@@ -1805,8 +1859,8 @@ pre-defined by the compiler:\n  * `target_os = \"...\"`. Operating system of the target, examples include\n    `\"win32\"`, `\"macos\"`, `\"linux\"`, `\"android\"` or `\"freebsd\"`.\n  * `target_word_size = \"...\"`. Target word size in bits. This is set to `\"32\"`\n-   for 32-bit CPU targets, and likewise set to `\"64\"` for 64-bit CPU targets.\n- * `test`. Only set in test builds (`rustc --test`).\n+   for targets with 32-bit pointers, and likewise set to `\"64\"` for 64-bit\n+   pointers.\n  * `unix`. See `target_family`.\n  * `windows`. See `target_family`.\n \n@@ -1823,7 +1877,7 @@ For any lint check `C`:\n  * `allow(C)` overrides the check for `C` so that violations will go\n     unreported,\n  * `forbid(C)` is the same as `deny(C)`, but also forbids uses of\n-   `allow(C)` within the entity.\n+   `allow(C)` within the attribute.\n \n The lint checks supported by the compiler can be found via `rustc -W help`,\n along with their default settings.\n@@ -1881,11 +1935,11 @@ mod m3 {\n \n ### Language items\n \n-Some primitive Rust operations are defined in Rust code,\n-rather than being implemented directly in C or assembly language.\n-The definitions of these operations have to be easy for the compiler to find.\n-The `lang` attribute makes it possible to declare these operations.\n-For example, the `str` module in the Rust standard library defines the string equality function:\n+Some primitive Rust operations are defined in Rust code, rather than being\n+implemented directly in C or assembly language.  The definitions of these\n+operations have to be easy for the compiler to find.  The `lang` attribute\n+makes it possible to declare these operations.  For example, the `str` module\n+in the Rust standard library defines the string equality function:\n \n ~~~~ {.ignore}\n #[lang=\"str_eq\"]\n@@ -1900,16 +1954,23 @@ when generating calls to the string equality function.\n \n A complete list of the built-in language items follows:\n \n-#### Traits\n+#### Built-in Traits\n \n-`const`\n-  : Cannot be mutated.\n-`owned`\n-  : Are uniquely owned.\n-`durable`\n-  : Contain references.\n+`send`\n+  : Able to be sent across task boundaries.\n+`sized`\n+  : Has a size known at compile time.\n+`copy`\n+  : Types that do not move ownership when used by-value.\n+`share`\n+  : Able to be safely shared between tasks when aliased.\n `drop`\n-  : Have finalizers.\n+  : Have destructors.\n+\n+#### Operators\n+\n+These language items are traits:\n+\n `add`\n   : Elements can be added (for example, integers and floats).\n `sub`\n@@ -1940,17 +2001,54 @@ A complete list of the built-in language items follows:\n   : Elements can be compared for equality.\n `ord`\n   : Elements have a partial ordering.\n+`deref`\n+  : `*` can be applied, yielding a reference to another type\n+`deref_mut`\n+  : `*` can be applied, yielding a mutable reference to another type\n \n-#### Operations\n+\n+These are functions:\n \n `str_eq`\n-  : Compare two strings for equality.\n+  : Compare two strings (`&str`) for equality.\n `uniq_str_eq`\n-  : Compare two owned strings for equality.\n-`annihilate`\n-  : Destroy a box before freeing it.\n-`log_type`\n-  : Generically print a string representation of any type.\n+  : Compare two owned strings (`~str`) for equality.\n+`strdup_uniq`\n+  : Return a new unique string\n+    containing a copy of the contents of a unique string.\n+\n+#### Types\n+\n+`unsafe`\n+  : A type whose contents can be mutated through an immutable reference\n+`type_id`\n+  : The type returned by the `type_id` intrinsic.\n+\n+#### Marker types\n+\n+These types help drive the compiler's analysis\n+\n+`covariant_type`\n+  : The type parameter should be considered covariant\n+`contravariant_type`\n+  : The type parameter should be considered contravariant\n+`invariant_type`\n+  : The type parameter should be considered invariant\n+`covariant_lifetime`\n+  : The lifetime parameter should be considered covariant\n+`contravariant_lifetime`\n+  : The lifetime parameter should be considered contravariant\n+`invariant_lifetime`\n+  : The lifetime parameter should be considered invariant\n+`no_send_bound`\n+  : This type does not implement \"send\", even if eligible\n+`no_copy_bound`\n+  : This type does not implement \"copy\", even if eligible\n+`no_share_bound`\n+  : This type does not implement \"share\", even if eligible\n+`managed_bound`\n+  : This type implements \"managed\"\n+\n `fail_`\n   : Abort the program with an error.\n `fail_bounds_check`\n@@ -1963,15 +2061,6 @@ A complete list of the built-in language items follows:\n   : Allocate memory on the managed heap.\n `free`\n   : Free memory that was allocated on the managed heap.\n-`borrow_as_imm`\n-  : Create an immutable reference to a mutable value.\n-`return_to_mut`\n-  : Release a reference created with `return_to_mut`\n-`check_not_borrowed`\n-  : Fail if a value has existing references to it.\n-`strdup_uniq`\n-  : Return a new unique string\n-    containing a copy of the contents of a unique string.\n \n > **Note:** This list is likely to become out of date. We should auto-generate it\n > from `librustc/middle/lang_items.rs`.\n@@ -2039,6 +2128,7 @@ Supported traits for `deriving` are:\n * `Show`, to format a value using the `{}` formatter.\n \n ### Stability\n+\n One can indicate the stability of an API using the following attributes:\n \n * `deprecated`: This item should no longer be used, e.g. it has been\n@@ -2101,18 +2191,18 @@ necessarily ready for every-day use. These features are often of \"prototype\n quality\" or \"almost production ready\", but may not be stable enough to be\n considered a full-fleged language feature.\n \n-For this reason, rust recognizes a special crate-level attribute of the form:\n+For this reason, Rust recognizes a special crate-level attribute of the form:\n \n ~~~~ {.ignore}\n-#[feature(feature1, feature2, feature3)]\n+#![feature(feature1, feature2, feature3)]\n ~~~~\n \n This directive informs the compiler that the feature list: `feature1`,\n `feature2`, and `feature3` should all be enabled. This is only recognized at a\n crate-level, not at a module-level. Without this directive, all features are\n considered off, and using the features will result in a compiler error.\n \n-The currently implemented features of the compiler are:\n+The currently implemented features of the reference compiler are:\n \n * `macro_rules` - The definition of new macros. This does not encompass\n                   macro-invocation, that is always enabled by default, this only"}]}