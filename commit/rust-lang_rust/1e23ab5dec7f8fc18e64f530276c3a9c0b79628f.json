{"sha": "1e23ab5dec7f8fc18e64f530276c3a9c0b79628f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFlMjNhYjVkZWM3ZjhmYzE4ZTY0ZjUzMDI3NmMzYTljMGI3OTYyOGY=", "commit": {"author": {"name": "Dylan DPC", "email": "dylan.dpc@gmail.com", "date": "2021-03-17T23:28:11Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-03-17T23:28:11Z"}, "message": "Rollup merge of #83192 - kinnison:add-android-21, r=Mark-Simulacrum\n\nci/docker: Add SDK/NDK level 21 to android docker for 32bit platforms\n\nCertain features of Linux (getauxval() and epoll_create1()) are only\navailable in android SDK/NDK levels 18 and 21 respectively.  The 32bit\nplatform is currently on level 14 for compatibility with Android 4.0.\n\nThis patch adds SDK/NDK level 21 to the docker for 32 bit platforms,\nwhile leaving the default setup at level 14.\n\nWith this done, projects such as `rustup` which rely on these dockers\ncan build with modern ecosystem crates such as tokio 1.0, by using\nthe level 21 toolchain, but those which do not need to switch will\nbe unaffected, since the level 14 toolchain remains available.", "tree": {"sha": "106e9c659a37b6c60d9dce762e610821344d5880", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/106e9c659a37b6c60d9dce762e610821344d5880"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1e23ab5dec7f8fc18e64f530276c3a9c0b79628f", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgUpCMCRBK7hj4Ov3rIwAAdHIIAGBy+DUs6WBJn0y+w0iNgUsl\nATxJCLi3kBHi2mctfQWQAonPsXzu0ajURqR8IRDUHaeRxtdRiGM6/Wgl5gdRucmm\nmr7/nSYfunArylpkeRzpcC4nBjBChq2hekIUA9YD4hJaBOBhTFJ3Nf1IBnV1pmuq\nDSUrEpWgl6hOPoR8aozuPQbC5ar5XF+kWF3zD2JKljgGrhkd7gUrSUurduTcAKrK\nSLvS3AR129vOKHGnSZugWuC8KIzOc7BK9p1sMFaNWtanwIwgG/SBJYHX3L4O4a5y\nEETgZD5T4eEK6RvJaQvrQ9ZsFXaMQoAZ+B9gWxcbdcTyN9YdHJXof3uIeoxWWxk=\n=K2ql\n-----END PGP SIGNATURE-----\n", "payload": "tree 106e9c659a37b6c60d9dce762e610821344d5880\nparent 7cd7dee315f2c1a80e67c114812fa8a2e32c9040\nparent bd2737fc96b8a8a6ad7e1d4546de9c64108a0a0e\nauthor Dylan DPC <dylan.dpc@gmail.com> 1616023691 +0100\ncommitter GitHub <noreply@github.com> 1616023691 +0100\n\nRollup merge of #83192 - kinnison:add-android-21, r=Mark-Simulacrum\n\nci/docker: Add SDK/NDK level 21 to android docker for 32bit platforms\n\nCertain features of Linux (getauxval() and epoll_create1()) are only\navailable in android SDK/NDK levels 18 and 21 respectively.  The 32bit\nplatform is currently on level 14 for compatibility with Android 4.0.\n\nThis patch adds SDK/NDK level 21 to the docker for 32 bit platforms,\nwhile leaving the default setup at level 14.\n\nWith this done, projects such as `rustup` which rely on these dockers\ncan build with modern ecosystem crates such as tokio 1.0, by using\nthe level 21 toolchain, but those which do not need to switch will\nbe unaffected, since the level 14 toolchain remains available.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1e23ab5dec7f8fc18e64f530276c3a9c0b79628f", "html_url": "https://github.com/rust-lang/rust/commit/1e23ab5dec7f8fc18e64f530276c3a9c0b79628f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1e23ab5dec7f8fc18e64f530276c3a9c0b79628f/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7cd7dee315f2c1a80e67c114812fa8a2e32c9040", "url": "https://api.github.com/repos/rust-lang/rust/commits/7cd7dee315f2c1a80e67c114812fa8a2e32c9040", "html_url": "https://github.com/rust-lang/rust/commit/7cd7dee315f2c1a80e67c114812fa8a2e32c9040"}, {"sha": "bd2737fc96b8a8a6ad7e1d4546de9c64108a0a0e", "url": "https://api.github.com/repos/rust-lang/rust/commits/bd2737fc96b8a8a6ad7e1d4546de9c64108a0a0e", "html_url": "https://github.com/rust-lang/rust/commit/bd2737fc96b8a8a6ad7e1d4546de9c64108a0a0e"}], "stats": {"total": 2, "additions": 2, "deletions": 0}, "files": [{"sha": "2f0496d7dd4ba06ab3a7f8e79bb9a26950c829a0", "filename": "src/ci/docker/host-x86_64/dist-android/Dockerfile", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1e23ab5dec7f8fc18e64f530276c3a9c0b79628f/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-android%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/1e23ab5dec7f8fc18e64f530276c3a9c0b79628f/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-android%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-android%2FDockerfile?ref=1e23ab5dec7f8fc18e64f530276c3a9c0b79628f", "patch": "@@ -9,6 +9,8 @@ RUN . /scripts/android-ndk.sh && \\\n     download_ndk android-ndk-r15c-linux-x86_64.zip && \\\n     make_standalone_toolchain arm 14 && \\\n     make_standalone_toolchain x86 14 && \\\n+    make_standalone_toolchain arm 21 && \\\n+    make_standalone_toolchain x86 21 && \\\n     make_standalone_toolchain arm64 21 && \\\n     make_standalone_toolchain x86_64 21 && \\\n     remove_ndk"}]}