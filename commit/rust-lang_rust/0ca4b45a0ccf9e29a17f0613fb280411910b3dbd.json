{"sha": "0ca4b45a0ccf9e29a17f0613fb280411910b3dbd", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBjYTRiNDVhMGNjZjllMjlhMTdmMDYxM2ZiMjgwNDExOTEwYjNkYmQ=", "commit": {"author": {"name": "Oliver Schneider", "email": "git-spam-no-reply9815368754983@oli-obk.de", "date": "2018-02-19T11:00:15Z"}, "committer": {"name": "Oliver Schneider", "email": "git-spam-no-reply9815368754983@oli-obk.de", "date": "2018-03-08T07:34:17Z"}, "message": "Step limit is now terminator limit", "tree": {"sha": "efda0594270350b46d8db611e6f89cda786ba8ac", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/efda0594270350b46d8db611e6f89cda786ba8ac"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0ca4b45a0ccf9e29a17f0613fb280411910b3dbd", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEYFTdM4NKd7XQft77pp+NIls619kFAlqg53kACgkQpp+NIls6\n19nmgw/8CrAlvNOtXSh6EOkWEBelPd2L5AdDqEcUBs+lC1NCrXNUdUtBXEtH+unX\nC2Ld5etcSDVKuT6UMAwgujtQWnMlwbYEGCz8NLH0D2dulH6MBOd1kad92LBM05ds\n5A7dJUQ1mIAbGQVRPtksq7JdI2m4MsH1rJcBa3bE24ZYK6LEFmQQeDuPuAfgOZrB\nFKyL63rqKg44bjyg4jHbF8p+mN8WTz2xrL00IdwxDksDrlrx4mQoX8pOKAPX7TGj\nzczjOuFHs2zr0sqYoH5yRIqKi2ybJgaLhjsDk6s0kQGqzD/SAG3OkqWSxItPRz7b\nhK9oJrBA/CzgE4qrpWtWpuEFHjLK7IDdMSUvHiakZcLtB5jXMQZubfOzAswE4wyp\ng90y0B7EMB9B8WwuFuW2gxFMCxCBMzuyinXdSxSxJPmwA0C0flKhhhuf2i+hevUl\nmL84/l2SkdE/OeNp6n1i41Sq4aAD9jsPlFTHvFUJzVHBAqkgygy4E8uTA834WAvD\n04AT4JMpzmWMhyNjzTMPP1IISF4e9XsEok/qEQislsNZEZ9rh2lqOFWopN090JFr\nsTTOPiRiEF0SgAaHum/ocbPafIhOrzJBDeMcnnp7yXc9GuSaUNXO4EI+Jo/nOt7p\n33fj157YcJUvtqi1tGkc6PTiOy8x5vaRmc7zNzuPlfh5VJJeP00=\n=pjpA\n-----END PGP SIGNATURE-----", "payload": "tree efda0594270350b46d8db611e6f89cda786ba8ac\nparent b63c6bbfee45f90fb1b99016fd90cb5c22847a95\nauthor Oliver Schneider <git-spam-no-reply9815368754983@oli-obk.de> 1519038015 +0100\ncommitter Oliver Schneider <git-spam-no-reply9815368754983@oli-obk.de> 1520494457 +0100\n\nStep limit is now terminator limit\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0ca4b45a0ccf9e29a17f0613fb280411910b3dbd", "html_url": "https://github.com/rust-lang/rust/commit/0ca4b45a0ccf9e29a17f0613fb280411910b3dbd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0ca4b45a0ccf9e29a17f0613fb280411910b3dbd/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b63c6bbfee45f90fb1b99016fd90cb5c22847a95", "url": "https://api.github.com/repos/rust-lang/rust/commits/b63c6bbfee45f90fb1b99016fd90cb5c22847a95", "html_url": "https://github.com/rust-lang/rust/commit/b63c6bbfee45f90fb1b99016fd90cb5c22847a95"}], "stats": {"total": 7, "additions": 4, "deletions": 3}, "files": [{"sha": "d6df340e2f68fbb9b76b36e57939b5dda0ff5584", "filename": "src/librustc/mir/interpret/error.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0ca4b45a0ccf9e29a17f0613fb280411910b3dbd/src%2Flibrustc%2Fmir%2Finterpret%2Ferror.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0ca4b45a0ccf9e29a17f0613fb280411910b3dbd/src%2Flibrustc%2Fmir%2Finterpret%2Ferror.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmir%2Finterpret%2Ferror.rs?ref=0ca4b45a0ccf9e29a17f0613fb280411910b3dbd", "patch": "@@ -196,7 +196,7 @@ impl<'tcx> Error for EvalError<'tcx> {\n             OutOfMemory{..} =>\n                 \"could not allocate more memory\",\n             ExecutionTimeLimitReached =>\n-                \"reached the configured maximum execution time\",\n+                \"the expression was too complex to be evaluated or resulted in an infinite loop\",\n             StackFrameLimitReached =>\n                 \"reached the configured maximum number of stack frames\",\n             OutOfTls =>"}, {"sha": "64e823564671b22762f49ae84ff9a32b9a9d1ec3", "filename": "src/librustc_mir/interpret/eval_context.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0ca4b45a0ccf9e29a17f0613fb280411910b3dbd/src%2Flibrustc_mir%2Finterpret%2Feval_context.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0ca4b45a0ccf9e29a17f0613fb280411910b3dbd/src%2Flibrustc_mir%2Finterpret%2Feval_context.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Finterpret%2Feval_context.rs?ref=0ca4b45a0ccf9e29a17f0613fb280411910b3dbd", "patch": "@@ -41,7 +41,7 @@ pub struct EvalContext<'a, 'mir, 'tcx: 'a + 'mir, M: Machine<'mir, 'tcx>> {\n     /// The maximum number of stack frames allowed\n     pub(crate) stack_limit: usize,\n \n-    /// The maximum number of operations that may be executed.\n+    /// The maximum number of terminators that may be evaluated.\n     /// This prevents infinite loops and huge computations from freezing up const eval.\n     /// Remove once halting problem is solved.\n     pub(crate) steps_remaining: usize,"}, {"sha": "4e1750caf26ba30f637e2c3196fb210d0274dce2", "filename": "src/librustc_mir/interpret/step.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/0ca4b45a0ccf9e29a17f0613fb280411910b3dbd/src%2Flibrustc_mir%2Finterpret%2Fstep.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0ca4b45a0ccf9e29a17f0613fb280411910b3dbd/src%2Flibrustc_mir%2Finterpret%2Fstep.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Finterpret%2Fstep.rs?ref=0ca4b45a0ccf9e29a17f0613fb280411910b3dbd", "patch": "@@ -19,7 +19,6 @@ impl<'a, 'mir, 'tcx, M: Machine<'mir, 'tcx>> EvalContext<'a, 'mir, 'tcx, M> {\n \n     /// Returns true as long as there are more things to do.\n     pub fn step(&mut self) -> EvalResult<'tcx, bool> {\n-        self.inc_step_counter_and_check_limit(1)?;\n         if self.stack.is_empty() {\n             return Ok(false);\n         }\n@@ -37,6 +36,8 @@ impl<'a, 'mir, 'tcx, M: Machine<'mir, 'tcx>> EvalContext<'a, 'mir, 'tcx, M> {\n             return Ok(true);\n         }\n \n+        self.inc_step_counter_and_check_limit(1)?;\n+\n         let terminator = basic_block.terminator();\n         assert_eq!(old_frames, self.cur_frame());\n         self.terminator(terminator)?;"}]}