{"sha": "2f62d803aba284bfed6b5d5ef3a412496b9cc50c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJmNjJkODAzYWJhMjg0YmZlZDZiNWQ1ZWYzYTQxMjQ5NmI5Y2M1MGM=", "commit": {"author": {"name": "Oliver Schneider", "email": "oli-obk@users.noreply.github.com", "date": "2018-01-14T12:16:54Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2018-01-14T12:16:54Z"}, "message": "Merge pull request #2349 from rust-lang-nursery/no-main-doc\n\nDon't warn about missing docs for main()", "tree": {"sha": "a0af95ec4824469a68df3b46ac8e4815aa74e83d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a0af95ec4824469a68df3b46ac8e4815aa74e83d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2f62d803aba284bfed6b5d5ef3a412496b9cc50c", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJaW0o2CRBK7hj4Ov3rIwAAdHIIAEcGRVvir6YWUzzEN4A+M4z/\n3YjBMUj+EwJj2bKL1p0B7IW2VXW4S+Kqn6Ss9xP9I/FAreEQNBg1UBCk3vbeMOH4\njxqw0pu5aNMOugocEYq1+dBxKZ/jaQd9nh1BaEryJr5RR6CSZeiK7KXvwmWEXc1b\n55l1pTg5yKqKUBLoiwAsBaBqnF8I0WrxSsIRRqbBI/JCNoVcb0uDzKi3bRKaB4X+\nF+bbUmBwj7m1prJyyW+HM1eoct0fogvtjpzNb/MnYhPQE6QJ1IsEuKWIndUG2rVk\n0pzmuYbjeTUXJaPlj8wORgZyRxh8xLDTe9/abSBr6QPLEIj1wzauFzf3X3WjEIM=\n=2g9j\n-----END PGP SIGNATURE-----\n", "payload": "tree a0af95ec4824469a68df3b46ac8e4815aa74e83d\nparent cc9008b7d497930ba768bc90703183a81b047774\nparent 7e63f93d81062fa810eaefe368b38892bf11f909\nauthor Oliver Schneider <oli-obk@users.noreply.github.com> 1515932214 +0100\ncommitter GitHub <noreply@github.com> 1515932214 +0100\n\nMerge pull request #2349 from rust-lang-nursery/no-main-doc\n\nDon't warn about missing docs for main()"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2f62d803aba284bfed6b5d5ef3a412496b9cc50c", "html_url": "https://github.com/rust-lang/rust/commit/2f62d803aba284bfed6b5d5ef3a412496b9cc50c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2f62d803aba284bfed6b5d5ef3a412496b9cc50c/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cc9008b7d497930ba768bc90703183a81b047774", "url": "https://api.github.com/repos/rust-lang/rust/commits/cc9008b7d497930ba768bc90703183a81b047774", "html_url": "https://github.com/rust-lang/rust/commit/cc9008b7d497930ba768bc90703183a81b047774"}, {"sha": "7e63f93d81062fa810eaefe368b38892bf11f909", "url": "https://api.github.com/repos/rust-lang/rust/commits/7e63f93d81062fa810eaefe368b38892bf11f909", "html_url": "https://github.com/rust-lang/rust/commit/7e63f93d81062fa810eaefe368b38892bf11f909"}], "stats": {"total": 18, "additions": 11, "deletions": 7}, "files": [{"sha": "ecc8f50d6a0699caa3291bbbc79400801cc73c76", "filename": "clippy_lints/src/missing_doc.rs", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/2f62d803aba284bfed6b5d5ef3a412496b9cc50c/clippy_lints%2Fsrc%2Fmissing_doc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2f62d803aba284bfed6b5d5ef3a412496b9cc50c/clippy_lints%2Fsrc%2Fmissing_doc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmissing_doc.rs?ref=2f62d803aba284bfed6b5d5ef3a412496b9cc50c", "patch": "@@ -124,7 +124,17 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for MissingDoc {\n         let desc = match it.node {\n             hir::ItemConst(..) => \"a constant\",\n             hir::ItemEnum(..) => \"an enum\",\n-            hir::ItemFn(..) => \"a function\",\n+            hir::ItemFn(..) => {\n+                // ignore main()\n+                if it.name == \"main\" {\n+                    let def_id = cx.tcx.hir.local_def_id(it.id);\n+                    let def_key = cx.tcx.hir.def_key(def_id);\n+                    if def_key.parent == Some(hir::def_id::CRATE_DEF_INDEX) {\n+                        return;\n+                    }\n+                }\n+                \"a function\"\n+            },\n             hir::ItemMod(..) => \"a module\",\n             hir::ItemStatic(..) => \"a static\",\n             hir::ItemStruct(..) => \"a struct\","}, {"sha": "340a53386f977def04c4297d3dd8c766021c9eac", "filename": "tests/ui/missing-doc.stderr", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/2f62d803aba284bfed6b5d5ef3a412496b9cc50c/tests%2Fui%2Fmissing-doc.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/2f62d803aba284bfed6b5d5ef3a412496b9cc50c/tests%2Fui%2Fmissing-doc.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmissing-doc.stderr?ref=2f62d803aba284bfed6b5d5ef3a412496b9cc50c", "patch": "@@ -264,9 +264,3 @@ error: missing documentation for a function\n 191 |         fn also_undocumented2() {}\n     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: missing documentation for a function\n-   --> $DIR/missing-doc.rs:202:1\n-    |\n-202 | fn main() {}\n-    | ^^^^^^^^^^^^\n-"}]}