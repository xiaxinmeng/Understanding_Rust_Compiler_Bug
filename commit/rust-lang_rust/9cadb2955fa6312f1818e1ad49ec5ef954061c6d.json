{"sha": "9cadb2955fa6312f1818e1ad49ec5ef954061c6d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjljYWRiMjk1NWZhNjMxMmYxODE4ZTFhZDQ5ZWM1ZWY5NTQwNjFjNmQ=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-12-09T09:32:18Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-12-09T09:32:18Z"}, "message": "Auto merge of #30263 - pnkfelix:rsbegin-rsend-are-window-gnu-only, r=alexcrichton\n\nThe `rsbegin.o` and `rsend.o` build products should not be generated\non non WinGnu platforms.\n\nThis is another path to resolving #30063 for non win-gnu targets.\n(And it won't require a snapshot, unlike PR #30208.)\n\nr? @alexcrichton", "tree": {"sha": "d3003b02f56db6696ec7463a073cb2d6d584afcd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d3003b02f56db6696ec7463a073cb2d6d584afcd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9cadb2955fa6312f1818e1ad49ec5ef954061c6d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9cadb2955fa6312f1818e1ad49ec5ef954061c6d", "html_url": "https://github.com/rust-lang/rust/commit/9cadb2955fa6312f1818e1ad49ec5ef954061c6d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9cadb2955fa6312f1818e1ad49ec5ef954061c6d/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8951b3834bb4fabbfffcae6670a96ec495a4a5e2", "url": "https://api.github.com/repos/rust-lang/rust/commits/8951b3834bb4fabbfffcae6670a96ec495a4a5e2", "html_url": "https://github.com/rust-lang/rust/commit/8951b3834bb4fabbfffcae6670a96ec495a4a5e2"}, {"sha": "31d383fcd2651d730187c0dc10bcc950473e48b5", "url": "https://api.github.com/repos/rust-lang/rust/commits/31d383fcd2651d730187c0dc10bcc950473e48b5", "html_url": "https://github.com/rust-lang/rust/commit/31d383fcd2651d730187c0dc10bcc950473e48b5"}], "stats": {"total": 4, "additions": 4, "deletions": 0}, "files": [{"sha": "3426b30aeeb85f9080d28f6f4dda698c8a11dd28", "filename": "mk/cfg/i686-pc-windows-gnu.mk", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/9cadb2955fa6312f1818e1ad49ec5ef954061c6d/mk%2Fcfg%2Fi686-pc-windows-gnu.mk", "raw_url": "https://github.com/rust-lang/rust/raw/9cadb2955fa6312f1818e1ad49ec5ef954061c6d/mk%2Fcfg%2Fi686-pc-windows-gnu.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fcfg%2Fi686-pc-windows-gnu.mk?ref=9cadb2955fa6312f1818e1ad49ec5ef954061c6d", "patch": "@@ -24,3 +24,4 @@ CFG_RUN_TARG_i686-pc-windows-gnu=$(call CFG_RUN_i686-pc-windows-gnu,,$(2))\n CFG_GNU_TRIPLE_i686-pc-windows-gnu := i686-w64-mingw32\n CFG_THIRD_PARTY_OBJECTS_i686-pc-windows-gnu := crt2.o dllcrt2.o\n CFG_INSTALLED_OBJECTS_i686-pc-windows-gnu := crt2.o dllcrt2.o rsbegin.o rsend.o\n+CFG_RUSTRT_HAS_STARTUP_OBJS_i686-pc-windows-gnu := 1"}, {"sha": "f0732d08c71ea84c65b9c5e6140084bb69ac2aa2", "filename": "mk/cfg/x86_64-pc-windows-gnu.mk", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/9cadb2955fa6312f1818e1ad49ec5ef954061c6d/mk%2Fcfg%2Fx86_64-pc-windows-gnu.mk", "raw_url": "https://github.com/rust-lang/rust/raw/9cadb2955fa6312f1818e1ad49ec5ef954061c6d/mk%2Fcfg%2Fx86_64-pc-windows-gnu.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fcfg%2Fx86_64-pc-windows-gnu.mk?ref=9cadb2955fa6312f1818e1ad49ec5ef954061c6d", "patch": "@@ -24,3 +24,4 @@ CFG_RUN_TARG_x86_64-pc-windows-gnu=$(call CFG_RUN_x86_64-pc-windows-gnu,,$(2))\n CFG_GNU_TRIPLE_x86_64-pc-windows-gnu := x86_64-w64-mingw32\n CFG_THIRD_PARTY_OBJECTS_x86_64-pc-windows-gnu := crt2.o dllcrt2.o\n CFG_INSTALLED_OBJECTS_x86_64-pc-windows-gnu := crt2.o dllcrt2.o rsbegin.o rsend.o\n+CFG_RUSTRT_HAS_STARTUP_OBJS_x86_64-pc-windows-gnu := 1"}, {"sha": "f1b5f9e315569a97d515ace943622d9a1eccd412", "filename": "mk/target.mk", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9cadb2955fa6312f1818e1ad49ec5ef954061c6d/mk%2Ftarget.mk", "raw_url": "https://github.com/rust-lang/rust/raw/9cadb2955fa6312f1818e1ad49ec5ef954061c6d/mk%2Ftarget.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Ftarget.mk?ref=9cadb2955fa6312f1818e1ad49ec5ef954061c6d", "patch": "@@ -152,12 +152,14 @@ $$(TLIB$(1)_T_$(2)_H_$(3))/$(4).o: \\\n \t@$$(call E, rustc: $$@)\n \t$$(STAGE$(1)_T_$(2)_H_$(3)) --emit=obj -o $$@ $$<\n \n+ifeq ($$(CFG_RUSTRT_HAS_STARTUP_OBJS_$(2)), 1)\n # Add dependencies on Rust startup objects to all crates that depend on core.\n # This ensures that they are built after core (since they depend on it),\n # but before everything else (since they are needed for linking dylib crates).\n $$(foreach crate, $$(TARGET_CRATES), \\\n \t$$(if $$(findstring core,$$(DEPS_$$(crate))), \\\n \t\t$$(TLIB$(1)_T_$(2)_H_$(3))/stamp.$$(crate))) : $$(TLIB$(1)_T_$(2)_H_$(3))/$(4).o\n+endif\n \n endef\n "}]}