{"sha": "6263eb438def79c393e372eac1237b4d4f97772f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYyNjNlYjQzOGRlZjc5YzM5M2UzNzJlYWMxMjM3YjRkNGY5Nzc3MmY=", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2019-07-25T23:26:33Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2019-07-26T19:18:28Z"}, "message": "ignore-tidy-trailing-newlines", "tree": {"sha": "95acfb9ca42d359a21307f5b8f182860609ea65f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/95acfb9ca42d359a21307f5b8f182860609ea65f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6263eb438def79c393e372eac1237b4d4f97772f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6263eb438def79c393e372eac1237b4d4f97772f", "html_url": "https://github.com/rust-lang/rust/commit/6263eb438def79c393e372eac1237b4d4f97772f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6263eb438def79c393e372eac1237b4d4f97772f/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "eeb1bd18dc172c2ba80c116d711214c2cdac3e32", "url": "https://api.github.com/repos/rust-lang/rust/commits/eeb1bd18dc172c2ba80c116d711214c2cdac3e32", "html_url": "https://github.com/rust-lang/rust/commit/eeb1bd18dc172c2ba80c116d711214c2cdac3e32"}], "stats": {"total": 18, "additions": 15, "deletions": 3}, "files": [{"sha": "18bc51e7ba7cdf4713668d9c01e64559f319b274", "filename": "src/test/ui/parser/issue-62973.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6263eb438def79c393e372eac1237b4d4f97772f/src%2Ftest%2Fui%2Fparser%2Fissue-62973.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6263eb438def79c393e372eac1237b4d4f97772f/src%2Ftest%2Fui%2Fparser%2Fissue-62973.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fissue-62973.rs?ref=6263eb438def79c393e372eac1237b4d4f97772f", "patch": "@@ -1,4 +1,4 @@\n-// ignore-tidy-end-whitespace\n+// ignore-tidy-trailing-newlines\n // error-pattern: aborting due to 6 previous errors\n \n fn main() {}"}, {"sha": "6a0d530e2362a27b55d5b44f8b54928e25945e68", "filename": "src/tools/tidy/src/style.rs", "status": "modified", "additions": 14, "deletions": 2, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/6263eb438def79c393e372eac1237b4d4f97772f/src%2Ftools%2Ftidy%2Fsrc%2Fstyle.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6263eb438def79c393e372eac1237b4d4f97772f/src%2Ftools%2Ftidy%2Fsrc%2Fstyle.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Ftidy%2Fsrc%2Fstyle.rs?ref=6263eb438def79c393e372eac1237b4d4f97772f", "patch": "@@ -152,6 +152,8 @@ pub fn check(path: &Path, bad: &mut bool) {\n         let mut skip_file_length = contains_ignore_directive(can_contain, &contents, \"filelength\");\n         let mut skip_end_whitespace =\n             contains_ignore_directive(can_contain, &contents, \"end-whitespace\");\n+        let mut skip_trailing_newlines =\n+            contains_ignore_directive(can_contain, &contents, \"trailing-newlines\");\n         let mut skip_copyright = contains_ignore_directive(can_contain, &contents, \"copyright\");\n         let mut leading_new_lines = false;\n         let mut trailing_new_lines = 0;\n@@ -214,10 +216,17 @@ pub fn check(path: &Path, bad: &mut bool) {\n         if leading_new_lines {\n             tidy_error!(bad, \"{}: leading newline\", file.display());\n         }\n+        let mut err = |msg: &str| {\n+            tidy_error!(bad, \"{}: {}\", file.display(), msg);\n+        };\n         match trailing_new_lines {\n-            0 => tidy_error!(bad, \"{}: missing trailing newline\", file.display()),\n+            0 => suppressible_tidy_err!(err, skip_trailing_newlines, \"missing trailing newline\"),\n             1 => {}\n-            n => tidy_error!(bad, \"{}: too many trailing newlines ({})\", file.display(), n),\n+            n => suppressible_tidy_err!(\n+                err,\n+                skip_trailing_newlines,\n+                &format!(\"too many trailing newlines ({})\", n)\n+            ),\n         };\n         if lines > LINES {\n             let mut err = |_| {\n@@ -247,6 +256,9 @@ pub fn check(path: &Path, bad: &mut bool) {\n         if let Directive::Ignore(false) = skip_end_whitespace {\n             tidy_error!(bad, \"{}: ignoring trailing whitespace unnecessarily\", file.display());\n         }\n+        if let Directive::Ignore(false) = skip_trailing_newlines {\n+            tidy_error!(bad, \"{}: ignoring trailing newlines unnecessarily\", file.display());\n+        }\n         if let Directive::Ignore(false) = skip_copyright {\n             tidy_error!(bad, \"{}: ignoring copyright unnecessarily\", file.display());\n         }"}]}