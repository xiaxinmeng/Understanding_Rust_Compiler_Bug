{"sha": "47ddb59b802faa25b733416caf3d1b5588ab60a3", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ3ZGRiNTliODAyZmFhMjViNzMzNDE2Y2FmM2QxYjU1ODhhYjYwYTM=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-03-26T04:18:57Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-03-26T04:18:57Z"}, "message": "auto merge of #5525 : dbaupp/rust/minor_fixups, r=graydon\n\nKills some warnings, and implements str::each_char_reverse so that it actually iterates. The test case wasn't detecting a failure, since the loop body was never executed.", "tree": {"sha": "d702d05254e66cd610af253811fc31061182991b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d702d05254e66cd610af253811fc31061182991b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/47ddb59b802faa25b733416caf3d1b5588ab60a3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/47ddb59b802faa25b733416caf3d1b5588ab60a3", "html_url": "https://github.com/rust-lang/rust/commit/47ddb59b802faa25b733416caf3d1b5588ab60a3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/47ddb59b802faa25b733416caf3d1b5588ab60a3/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "02d5f090dcefb43625dc67d0d9147dbc9776c9b1", "url": "https://api.github.com/repos/rust-lang/rust/commits/02d5f090dcefb43625dc67d0d9147dbc9776c9b1", "html_url": "https://github.com/rust-lang/rust/commit/02d5f090dcefb43625dc67d0d9147dbc9776c9b1"}, {"sha": "29e8b6ea9b63c5cc1cd91cc5eb756820f7fe50b7", "url": "https://api.github.com/repos/rust-lang/rust/commits/29e8b6ea9b63c5cc1cd91cc5eb756820f7fe50b7", "html_url": "https://github.com/rust-lang/rust/commit/29e8b6ea9b63c5cc1cd91cc5eb756820f7fe50b7"}], "stats": {"total": 35, "additions": 9, "deletions": 26}, "files": [{"sha": "f38227de49725aed9fdcf5f56d79c719a2ff5616", "filename": "src/libcore/core.rc", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/47ddb59b802faa25b733416caf3d1b5588ab60a3/src%2Flibcore%2Fcore.rc", "raw_url": "https://github.com/rust-lang/rust/raw/47ddb59b802faa25b733416caf3d1b5588ab60a3/src%2Flibcore%2Fcore.rc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fcore.rc?ref=47ddb59b802faa25b733416caf3d1b5588ab60a3", "patch": "@@ -51,7 +51,6 @@ Implicitly, all crates behave as if they included the following prologue:\n #[warn(vecs_implicitly_copyable)];\n #[deny(non_camel_case_types)];\n #[allow(deprecated_mutable_fields)];\n-#[deny(deprecated_self)];\n #[allow(deprecated_drop)];\n \n // On Linux, link to the runtime with -lrt."}, {"sha": "39cc986f77252bb3e8db0ed0449f488680160599", "filename": "src/libcore/repr.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/47ddb59b802faa25b733416caf3d1b5588ab60a3/src%2Flibcore%2Frepr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/47ddb59b802faa25b733416caf3d1b5588ab60a3/src%2Flibcore%2Frepr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Frepr.rs?ref=47ddb59b802faa25b733416caf3d1b5588ab60a3", "patch": "@@ -24,7 +24,6 @@ use managed;\n use ptr;\n use reflect;\n use reflect::{MovePtr, MovePtrAdaptor, align};\n-use str;\n use sys;\n use to_str::ToStr;\n use vec::UnboxedVecRepr;"}, {"sha": "92358c6a5e97ba6a1db2d1c05689c2bf34ddef54", "filename": "src/libcore/str.rs", "status": "modified", "additions": 9, "deletions": 10, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/47ddb59b802faa25b733416caf3d1b5588ab60a3/src%2Flibcore%2Fstr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/47ddb59b802faa25b733416caf3d1b5588ab60a3/src%2Flibcore%2Fstr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fstr.rs?ref=47ddb59b802faa25b733416caf3d1b5588ab60a3", "patch": "@@ -1020,22 +1020,21 @@ pub fn each_chari(s: &str, it: &fn(uint, char) -> bool) {\n /// Iterates over the chars in a string in reverse\n #[inline(always)]\n pub fn each_char_reverse(s: &str, it: &fn(char) -> bool) {\n-    let mut pos = 0;\n-    let len = s.char_len();\n-    while pos > 0 {\n-        let CharRange {ch, next} = char_range_at_reverse(s, pos);\n-        pos = next;\n-        if !it(ch) { break; }\n-    }\n+    each_chari_reverse(s, |_, c| it(c))\n }\n \n // Iterates over the chars in a string in reverse, with indices\n #[inline(always)]\n pub fn each_chari_reverse(s: &str, it: &fn(uint, char) -> bool) {\n+    let mut pos = s.len();\n     let mut ch_pos = s.char_len();\n-    for s.each_char_reverse |ch| {\n+    while pos > 0 {\n+        let CharRange {ch, next} = char_range_at_reverse(s, pos);\n+        pos = next;\n         ch_pos -= 1;\n+\n         if !it(ch_pos, ch) { break; }\n+\n     }\n }\n \n@@ -3661,10 +3660,10 @@ mod tests {\n     fn test_each_char_reverse() {\n         let s = ~\"\u0e28\u0e44\u0e17\u0e22\u4e2d\u534eVi\u1ec7t Nam\";\n         let v = ~['\u0e28','\u0e44','\u0e17','\u0e22','\u4e2d','\u534e','V','i','\u1ec7','t',' ','N','a','m'];\n-        let mut pos = 0;\n+        let mut pos = v.len();\n         for s.each_char_reverse |ch| {\n+            pos -= 1;\n             fail_unless!(ch == v[pos]);\n-            pos += 1;\n         }\n     }\n "}, {"sha": "9def28fd3aa78fe14b0dfca111a72dac1ab30cce", "filename": "src/libcore/vec.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/47ddb59b802faa25b733416caf3d1b5588ab60a3/src%2Flibcore%2Fvec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/47ddb59b802faa25b733416caf3d1b5588ab60a3/src%2Flibcore%2Fvec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fvec.rs?ref=47ddb59b802faa25b733416caf3d1b5588ab60a3", "patch": "@@ -2542,7 +2542,6 @@ impl<A:Clone> Clone for ~[A] {\n #[cfg(test)]\n mod tests {\n     use option::{None, Option, Some};\n-    use option;\n     use sys;\n     use vec::*;\n     use cmp::*;"}, {"sha": "3580edb58146221dba617e14367ecc35c4be90ce", "filename": "src/libfuzzer/fuzzer.rc", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/47ddb59b802faa25b733416caf3d1b5588ab60a3/src%2Flibfuzzer%2Ffuzzer.rc", "raw_url": "https://github.com/rust-lang/rust/raw/47ddb59b802faa25b733416caf3d1b5588ab60a3/src%2Flibfuzzer%2Ffuzzer.rc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibfuzzer%2Ffuzzer.rc?ref=47ddb59b802faa25b733416caf3d1b5588ab60a3", "patch": "@@ -25,7 +25,6 @@\n #[allow(non_camel_case_types)];\n #[allow(deprecated_mode)];\n #[allow(deprecated_pattern)];\n-#[deny(deprecated_self)];\n \n extern mod core(vers = \"0.6\");\n extern mod std(vers = \"0.6\");"}, {"sha": "e590586abbb394bef2937280639c462143223cee", "filename": "src/librust/rust.rc", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/47ddb59b802faa25b733416caf3d1b5588ab60a3/src%2Flibrust%2Frust.rc", "raw_url": "https://github.com/rust-lang/rust/raw/47ddb59b802faa25b733416caf3d1b5588ab60a3/src%2Flibrust%2Frust.rc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrust%2Frust.rc?ref=47ddb59b802faa25b733416caf3d1b5588ab60a3", "patch": "@@ -12,8 +12,6 @@\n // FIXME #2238 Make commands run and test emit proper file endings on winds\n // FIXME #2238 Make run only accept source that emits an executable\n \n-#[deny(deprecated_self)];\n-\n #[link(name = \"rust\",\n        vers = \"0.6\",\n        uuid = \"4a24da33-5cc8-4037-9352-2cbe9bd9d27c\","}, {"sha": "360a5ddccfd2aacd6350cce36d104d62a4e4be1c", "filename": "src/librustc/driver/driver.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/47ddb59b802faa25b733416caf3d1b5588ab60a3/src%2Flibrustc%2Fdriver%2Fdriver.rs", "raw_url": "https://github.com/rust-lang/rust/raw/47ddb59b802faa25b733416caf3d1b5588ab60a3/src%2Flibrustc%2Fdriver%2Fdriver.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fdriver%2Fdriver.rs?ref=47ddb59b802faa25b733416caf3d1b5588ab60a3", "patch": "@@ -25,7 +25,6 @@ use util::common::time;\n use util::ppaux;\n \n use core::int;\n-use core::io::WriterUtil;\n use core::io;\n use core::os;\n use core::str;"}, {"sha": "0861e57c9b4238ac726b338c75b944e4bb50fda6", "filename": "src/librustc/middle/kind.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/47ddb59b802faa25b733416caf3d1b5588ab60a3/src%2Flibrustc%2Fmiddle%2Fkind.rs", "raw_url": "https://github.com/rust-lang/rust/raw/47ddb59b802faa25b733416caf3d1b5588ab60a3/src%2Flibrustc%2Fmiddle%2Fkind.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fkind.rs?ref=47ddb59b802faa25b733416caf3d1b5588ab60a3", "patch": "@@ -56,8 +56,6 @@ use syntax::{visit, ast_util};\n // primitives in the stdlib are explicitly annotated to only take sendable\n // types.\n \n-use core::hashmap::linear::LinearSet;\n-\n pub static try_adding: &'static str = \"Try adding a move\";\n \n pub type rval_map = HashMap<node_id, ()>;"}, {"sha": "6a778a8336190ee4a0a601b58b4baee6772b839d", "filename": "src/librustc/rustc.rc", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/47ddb59b802faa25b733416caf3d1b5588ab60a3/src%2Flibrustc%2Frustc.rc", "raw_url": "https://github.com/rust-lang/rust/raw/47ddb59b802faa25b733416caf3d1b5588ab60a3/src%2Flibrustc%2Frustc.rc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Frustc.rc?ref=47ddb59b802faa25b733416caf3d1b5588ab60a3", "patch": "@@ -24,7 +24,6 @@\n #[allow(non_camel_case_types)];\n #[allow(deprecated_mode)];\n #[warn(deprecated_pattern)];\n-#[deny(deprecated_self)];\n \n #[no_core];\n "}, {"sha": "9eb3e8166280622822f6c4e30374da8502ba9880", "filename": "src/librustdoc/rustdoc.rc", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/47ddb59b802faa25b733416caf3d1b5588ab60a3/src%2Flibrustdoc%2Frustdoc.rc", "raw_url": "https://github.com/rust-lang/rust/raw/47ddb59b802faa25b733416caf3d1b5588ab60a3/src%2Flibrustdoc%2Frustdoc.rc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Frustdoc.rc?ref=47ddb59b802faa25b733416caf3d1b5588ab60a3", "patch": "@@ -22,7 +22,6 @@\n #[no_core];\n \n #[allow(non_implicitly_copyable_typarams)];\n-#[deny(deprecated_self)];\n \n extern mod core(vers = \"0.6\");\n extern mod std(vers = \"0.6\");"}, {"sha": "a1439e2e149329b4ca98f55b05e21b1651118204", "filename": "src/librustdoc/trim_pass.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/47ddb59b802faa25b733416caf3d1b5588ab60a3/src%2Flibrustdoc%2Ftrim_pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/47ddb59b802faa25b733416caf3d1b5588ab60a3/src%2Flibrustdoc%2Ftrim_pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Ftrim_pass.rs?ref=47ddb59b802faa25b733416caf3d1b5588ab60a3", "patch": "@@ -18,8 +18,6 @@ is interpreted as the brief description.\n use pass::Pass;\n use text_pass;\n \n-use core::str;\n-\n pub fn mk_pass() -> Pass {\n     text_pass::mk_pass(~\"trim\", |s| s.trim().to_owned() )\n }"}, {"sha": "e04cc9e389840536f3a8b6e899e7b6cceeec6e53", "filename": "src/librusti/rusti.rc", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/47ddb59b802faa25b733416caf3d1b5588ab60a3/src%2Flibrusti%2Frusti.rc", "raw_url": "https://github.com/rust-lang/rust/raw/47ddb59b802faa25b733416caf3d1b5588ab60a3/src%2Flibrusti%2Frusti.rc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrusti%2Frusti.rc?ref=47ddb59b802faa25b733416caf3d1b5588ab60a3", "patch": "@@ -22,7 +22,6 @@\n \n #[allow(vecs_implicitly_copyable,\n         non_implicitly_copyable_typarams)];\n-#[deny(deprecated_self)];\n \n extern mod core(vers = \"0.6\");\n extern mod std(vers = \"0.6\");"}, {"sha": "2032969fbca6c5cd9327f94e6d34887bf8feb75b", "filename": "src/librustpkg/rustpkg.rc", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/47ddb59b802faa25b733416caf3d1b5588ab60a3/src%2Flibrustpkg%2Frustpkg.rc", "raw_url": "https://github.com/rust-lang/rust/raw/47ddb59b802faa25b733416caf3d1b5588ab60a3/src%2Flibrustpkg%2Frustpkg.rc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustpkg%2Frustpkg.rc?ref=47ddb59b802faa25b733416caf3d1b5588ab60a3", "patch": "@@ -20,7 +20,6 @@\n #[no_core];\n #[allow(vecs_implicitly_copyable,\n         non_implicitly_copyable_typarams)];\n-#[deny(deprecated_self)];\n \n extern mod core(vers = \"0.6\");\n extern mod std(vers = \"0.6\");"}, {"sha": "aa5371671c19411ee893f836a84207a4b76038eb", "filename": "src/libstd/std.rc", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/47ddb59b802faa25b733416caf3d1b5588ab60a3/src%2Flibstd%2Fstd.rc", "raw_url": "https://github.com/rust-lang/rust/raw/47ddb59b802faa25b733416caf3d1b5588ab60a3/src%2Flibstd%2Fstd.rc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fstd.rc?ref=47ddb59b802faa25b733416caf3d1b5588ab60a3", "patch": "@@ -28,7 +28,6 @@ not required in or otherwise suitable for the core library.\n \n #[allow(vecs_implicitly_copyable)];\n #[deny(non_camel_case_types)];\n-#[deny(deprecated_self)];\n #[allow(deprecated_mutable_fields)];\n \n #[no_core];"}]}