{"sha": "24893e8d02d70045254082067c0c6141b7946783", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI0ODkzZThkMDJkNzAwNDUyNTQwODIwNjdjMGM2MTQxYjc5NDY3ODM=", "commit": {"author": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2013-02-25T23:54:13Z"}, "committer": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2013-02-26T12:18:12Z"}, "message": "libsyntax: Stop parsing `~mut`", "tree": {"sha": "82a82f6edd425146eadd98155d04a17839e1ae67", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/82a82f6edd425146eadd98155d04a17839e1ae67"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/24893e8d02d70045254082067c0c6141b7946783", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/24893e8d02d70045254082067c0c6141b7946783", "html_url": "https://github.com/rust-lang/rust/commit/24893e8d02d70045254082067c0c6141b7946783", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/24893e8d02d70045254082067c0c6141b7946783/comments", "author": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e3d43e490be9b298d2bcebf26ac4708157fda9e2", "url": "https://api.github.com/repos/rust-lang/rust/commits/e3d43e490be9b298d2bcebf26ac4708157fda9e2", "html_url": "https://github.com/rust-lang/rust/commit/e3d43e490be9b298d2bcebf26ac4708157fda9e2"}], "stats": {"total": 14, "additions": 13, "deletions": 1}, "files": [{"sha": "7b3030124b72ff1fcd6413967256479f39fd3735", "filename": "src/libsyntax/parse/obsolete.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/24893e8d02d70045254082067c0c6141b7946783/src%2Flibsyntax%2Fparse%2Fobsolete.rs", "raw_url": "https://github.com/rust-lang/rust/raw/24893e8d02d70045254082067c0c6141b7946783/src%2Flibsyntax%2Fparse%2Fobsolete.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fobsolete.rs?ref=24893e8d02d70045254082067c0c6141b7946783", "patch": "@@ -48,6 +48,7 @@ pub enum ObsoleteSyntax {\n     ObsoleteUnenforcedBound,\n     ObsoleteImplSyntax,\n     ObsoleteTraitBoundSeparator,\n+    ObsoleteMutOwnedPointer,\n }\n \n pub impl to_bytes::IterBytes for ObsoleteSyntax {\n@@ -126,6 +127,12 @@ pub impl Parser {\n                 \"space-separated trait bounds\",\n                 \"write `+` between trait bounds\"\n             ),\n+            ObsoleteMutOwnedPointer => (\n+                \"mutable owned pointer\",\n+                \"mutability inherits through `~` pointers; place the `~` box\n+                 in a mutable location, like a mutable local variable or an \\\n+                 `@mut` box\"\n+            ),\n         };\n \n         self.report(sp, kind, kind_str, desc);"}, {"sha": "af25a4f6e58dc832ef63b279587f063a1a0f59ab", "filename": "src/libsyntax/parse/parser.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/24893e8d02d70045254082067c0c6141b7946783/src%2Flibsyntax%2Fparse%2Fparser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/24893e8d02d70045254082067c0c6141b7946783/src%2Flibsyntax%2Fparse%2Fparser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fparser.rs?ref=24893e8d02d70045254082067c0c6141b7946783", "patch": "@@ -75,7 +75,7 @@ use parse::obsolete::{ObsoleteMoveInit, ObsoleteBinaryMove};\n use parse::obsolete::{ObsoleteStructCtor, ObsoleteWith};\n use parse::obsolete::{ObsoleteSyntax, ObsoleteLowerCaseKindBounds};\n use parse::obsolete::{ObsoleteUnsafeBlock, ObsoleteImplSyntax};\n-use parse::obsolete::{ObsoleteTraitBoundSeparator};\n+use parse::obsolete::{ObsoleteTraitBoundSeparator, ObsoleteMutOwnedPointer};\n use parse::prec::{as_prec, token_to_binop};\n use parse::token::{can_begin_expr, is_ident, is_ident_or_path};\n use parse::token::{is_plain_ident, INTERPOLATED, special_idents};\n@@ -677,6 +677,11 @@ pub impl Parser {\n         // rather than boxed ptrs.  But the special casing of str/vec is not\n         // reflected in the AST type.\n         let mt = self.parse_mt();\n+\n+        if mt.mutbl == m_mutbl && sigil == OwnedSigil {\n+            self.obsolete(*self.last_span, ObsoleteMutOwnedPointer);\n+        }\n+\n         ctor(mt)\n     }\n "}]}