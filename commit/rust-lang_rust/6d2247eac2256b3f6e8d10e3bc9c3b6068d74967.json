{"sha": "6d2247eac2256b3f6e8d10e3bc9c3b6068d74967", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZkMjI0N2VhYzIyNTZiM2Y2ZThkMTBlM2JjOWMzYjYwNjhkNzQ5Njc=", "commit": {"author": {"name": "Stein Somers", "email": "git@steinsomers.be", "date": "2021-01-23T14:25:56Z"}, "committer": {"name": "Stein Somers", "email": "git@steinsomers.be", "date": "2021-02-09T10:21:42Z"}, "message": "BTreeMap/BTreeSet: separate off code supporting tests", "tree": {"sha": "3303cef97d9701ac8e745354097da7a31581dcfc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3303cef97d9701ac8e745354097da7a31581dcfc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6d2247eac2256b3f6e8d10e3bc9c3b6068d74967", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6d2247eac2256b3f6e8d10e3bc9c3b6068d74967", "html_url": "https://github.com/rust-lang/rust/commit/6d2247eac2256b3f6e8d10e3bc9c3b6068d74967", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6d2247eac2256b3f6e8d10e3bc9c3b6068d74967/comments", "author": {"login": "ssomers", "id": 10174877, "node_id": "MDQ6VXNlcjEwMTc0ODc3", "avatar_url": "https://avatars.githubusercontent.com/u/10174877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssomers", "html_url": "https://github.com/ssomers", "followers_url": "https://api.github.com/users/ssomers/followers", "following_url": "https://api.github.com/users/ssomers/following{/other_user}", "gists_url": "https://api.github.com/users/ssomers/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssomers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssomers/subscriptions", "organizations_url": "https://api.github.com/users/ssomers/orgs", "repos_url": "https://api.github.com/users/ssomers/repos", "events_url": "https://api.github.com/users/ssomers/events{/privacy}", "received_events_url": "https://api.github.com/users/ssomers/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ssomers", "id": 10174877, "node_id": "MDQ6VXNlcjEwMTc0ODc3", "avatar_url": "https://avatars.githubusercontent.com/u/10174877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssomers", "html_url": "https://github.com/ssomers", "followers_url": "https://api.github.com/users/ssomers/followers", "following_url": "https://api.github.com/users/ssomers/following{/other_user}", "gists_url": "https://api.github.com/users/ssomers/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssomers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssomers/subscriptions", "organizations_url": "https://api.github.com/users/ssomers/orgs", "repos_url": "https://api.github.com/users/ssomers/repos", "events_url": "https://api.github.com/users/ssomers/events{/privacy}", "received_events_url": "https://api.github.com/users/ssomers/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f4008fe94935d05ffb3a48fc5b7149070bb45550", "url": "https://api.github.com/repos/rust-lang/rust/commits/f4008fe94935d05ffb3a48fc5b7149070bb45550", "html_url": "https://github.com/rust-lang/rust/commit/f4008fe94935d05ffb3a48fc5b7149070bb45550"}], "stats": {"total": 68, "additions": 34, "deletions": 34}, "files": [{"sha": "73607a2a638f3ac89cb4f82085100baa67506fb1", "filename": "library/alloc/src/collections/btree/map/tests.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/6d2247eac2256b3f6e8d10e3bc9c3b6068d74967/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Fmap%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6d2247eac2256b3f6e8d10e3bc9c3b6068d74967/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Fmap%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Fmap%2Ftests.rs?ref=6d2247eac2256b3f6e8d10e3bc9c3b6068d74967", "patch": "@@ -1,4 +1,5 @@\n-use super::super::{node, DeterministicRng};\n+use super::super::testing::ord_chaos::{Cyclic3, Governed, Governor};\n+use super::super::testing::rng::DeterministicRng;\n use super::Entry::{Occupied, Vacant};\n use super::*;\n use crate::boxed::Box;\n@@ -15,9 +16,6 @@ use std::ops::RangeBounds;\n use std::panic::{catch_unwind, AssertUnwindSafe};\n use std::sync::atomic::{AtomicUsize, Ordering::SeqCst};\n \n-mod ord_chaos;\n-use ord_chaos::{Cyclic3, Governed, Governor};\n-\n // Capacity of a tree with a single level,\n // i.e., a tree who's root is a leaf node at height 0.\n const NODE_CAPACITY: usize = node::CAPACITY;"}, {"sha": "421f842dab0acab48510fba28497f55482eb9899", "filename": "library/alloc/src/collections/btree/mod.rs", "status": "modified", "additions": 1, "deletions": 29, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/6d2247eac2256b3f6e8d10e3bc9c3b6068d74967/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6d2247eac2256b3f6e8d10e3bc9c3b6068d74967/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Fmod.rs?ref=6d2247eac2256b3f6e8d10e3bc9c3b6068d74967", "patch": "@@ -20,32 +20,4 @@ trait Recover<Q: ?Sized> {\n }\n \n #[cfg(test)]\n-/// XorShiftRng\n-struct DeterministicRng {\n-    count: usize,\n-    x: u32,\n-    y: u32,\n-    z: u32,\n-    w: u32,\n-}\n-\n-#[cfg(test)]\n-impl DeterministicRng {\n-    fn new() -> Self {\n-        DeterministicRng { count: 0, x: 0x193a6754, y: 0xa8a7d469, z: 0x97830e05, w: 0x113ba7bb }\n-    }\n-\n-    /// Guarantees that each returned number is unique.\n-    fn next(&mut self) -> u32 {\n-        self.count += 1;\n-        assert!(self.count <= 70029);\n-        let x = self.x;\n-        let t = x ^ (x << 11);\n-        self.x = self.y;\n-        self.y = self.z;\n-        self.z = self.w;\n-        let w_ = self.w;\n-        self.w = w_ ^ (w_ >> 19) ^ (t ^ (t >> 8));\n-        self.w\n-    }\n-}\n+mod testing;"}, {"sha": "9c6fb44af43c89f9ddecd49e63e6ce30f437705c", "filename": "library/alloc/src/collections/btree/set/tests.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6d2247eac2256b3f6e8d10e3bc9c3b6068d74967/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Fset%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6d2247eac2256b3f6e8d10e3bc9c3b6068d74967/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Fset%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Fset%2Ftests.rs?ref=6d2247eac2256b3f6e8d10e3bc9c3b6068d74967", "patch": "@@ -1,4 +1,4 @@\n-use super::super::DeterministicRng;\n+use super::super::testing::rng::DeterministicRng;\n use super::*;\n use crate::vec::Vec;\n use std::cmp::Ordering;"}, {"sha": "03880e7014e721755b150c20bb179485395acb7a", "filename": "library/alloc/src/collections/btree/testing/mod.rs", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6d2247eac2256b3f6e8d10e3bc9c3b6068d74967/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Ftesting%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6d2247eac2256b3f6e8d10e3bc9c3b6068d74967/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Ftesting%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Ftesting%2Fmod.rs?ref=6d2247eac2256b3f6e8d10e3bc9c3b6068d74967", "patch": "@@ -0,0 +1,2 @@\n+pub mod ord_chaos;\n+pub mod rng;"}, {"sha": "96ce7c15790463b3770285f6395859d64ea9afdc", "filename": "library/alloc/src/collections/btree/testing/ord_chaos.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/6d2247eac2256b3f6e8d10e3bc9c3b6068d74967/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Ftesting%2Ford_chaos.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6d2247eac2256b3f6e8d10e3bc9c3b6068d74967/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Ftesting%2Ford_chaos.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Ftesting%2Ford_chaos.rs?ref=6d2247eac2256b3f6e8d10e3bc9c3b6068d74967", "previous_filename": "library/alloc/src/collections/btree/map/tests/ord_chaos.rs"}, {"sha": "ecf543bee035a38a9adc7f08360c5c57876290c7", "filename": "library/alloc/src/collections/btree/testing/rng.rs", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/6d2247eac2256b3f6e8d10e3bc9c3b6068d74967/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Ftesting%2Frng.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6d2247eac2256b3f6e8d10e3bc9c3b6068d74967/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Ftesting%2Frng.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Ftesting%2Frng.rs?ref=6d2247eac2256b3f6e8d10e3bc9c3b6068d74967", "patch": "@@ -0,0 +1,28 @@\n+/// XorShiftRng\n+pub struct DeterministicRng {\n+    count: usize,\n+    x: u32,\n+    y: u32,\n+    z: u32,\n+    w: u32,\n+}\n+\n+impl DeterministicRng {\n+    pub fn new() -> Self {\n+        DeterministicRng { count: 0, x: 0x193a6754, y: 0xa8a7d469, z: 0x97830e05, w: 0x113ba7bb }\n+    }\n+\n+    /// Guarantees that each returned number is unique.\n+    pub fn next(&mut self) -> u32 {\n+        self.count += 1;\n+        assert!(self.count <= 70029);\n+        let x = self.x;\n+        let t = x ^ (x << 11);\n+        self.x = self.y;\n+        self.y = self.z;\n+        self.z = self.w;\n+        let w_ = self.w;\n+        self.w = w_ ^ (w_ >> 19) ^ (t ^ (t >> 8));\n+        self.w\n+    }\n+}"}]}