{"sha": "fe5574b05a006671fb7dec44d8d6edc92c90b002", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZlNTU3NGIwNWEwMDY2NzFmYjdkZWM0NGQ4ZDZlZGM5MmM5MGIwMDI=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2019-03-02T13:38:28Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2019-03-02T13:38:28Z"}, "message": "rename scopes", "tree": {"sha": "f13ce58c0718dcf4ade76bcf70ea854463e80825", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f13ce58c0718dcf4ade76bcf70ea854463e80825"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fe5574b05a006671fb7dec44d8d6edc92c90b002", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fe5574b05a006671fb7dec44d8d6edc92c90b002", "html_url": "https://github.com/rust-lang/rust/commit/fe5574b05a006671fb7dec44d8d6edc92c90b002", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fe5574b05a006671fb7dec44d8d6edc92c90b002/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ca957edf96199c61496254f8534fe09221e03c26", "url": "https://api.github.com/repos/rust-lang/rust/commits/ca957edf96199c61496254f8534fe09221e03c26", "html_url": "https://github.com/rust-lang/rust/commit/ca957edf96199c61496254f8534fe09221e03c26"}], "stats": {"total": 18, "additions": 9, "deletions": 9}, "files": [{"sha": "e362cc05f23a3afe9ce680b0d62c1e8d1962f63b", "filename": "crates/ra_hir/src/code_model_api.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/fe5574b05a006671fb7dec44d8d6edc92c90b002/crates%2Fra_hir%2Fsrc%2Fcode_model_api.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fe5574b05a006671fb7dec44d8d6edc92c90b002/crates%2Fra_hir%2Fsrc%2Fcode_model_api.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fcode_model_api.rs?ref=fe5574b05a006671fb7dec44d8d6edc92c90b002", "patch": "@@ -5,7 +5,7 @@ use ra_db::{CrateId, SourceRootId, Edition};\n use ra_syntax::{ast::self, TreeArc, SyntaxNode};\n \n use crate::{\n-    Name, ScopesWithSyntaxMapping, Ty, HirFileId,\n+    Name, ScopesWithSourceMap, Ty, HirFileId,\n     HirDatabase, PersistentHirDatabase,\n     type_ref::TypeRef,\n     nameres::{ModuleScope, Namespace, lower::ImportId},\n@@ -495,10 +495,10 @@ impl Function {\n         db.type_for_def((*self).into(), Namespace::Values)\n     }\n \n-    pub fn scopes(&self, db: &impl HirDatabase) -> ScopesWithSyntaxMapping {\n+    pub fn scopes(&self, db: &impl HirDatabase) -> ScopesWithSourceMap {\n         let scopes = db.expr_scopes(*self);\n         let source_map = db.body_with_source_map(*self).1;\n-        ScopesWithSyntaxMapping { scopes, source_map }\n+        ScopesWithSourceMap { scopes, source_map }\n     }\n \n     pub fn signature(&self, db: &impl HirDatabase) -> Arc<FnSignature> {"}, {"sha": "8b1079648ab19932fd11cc4e51a691bc53e0f0ce", "filename": "crates/ra_hir/src/expr.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/fe5574b05a006671fb7dec44d8d6edc92c90b002/crates%2Fra_hir%2Fsrc%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fe5574b05a006671fb7dec44d8d6edc92c90b002/crates%2Fra_hir%2Fsrc%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fexpr.rs?ref=fe5574b05a006671fb7dec44d8d6edc92c90b002", "patch": "@@ -16,7 +16,7 @@ use crate::{\n };\n use crate::{ path::GenericArgs, ty::primitive::{UintTy, UncertainIntTy, UncertainFloatTy}};\n \n-pub use self::scope::{ExprScopes, ScopesWithSyntaxMapping, ScopeEntryWithSyntax};\n+pub use self::scope::{ExprScopes, ScopesWithSourceMap, ScopeEntryWithSyntax};\n \n pub(crate) mod scope;\n "}, {"sha": "81fbc509eb53b6138aa779184ec4e2c49c8a115e", "filename": "crates/ra_hir/src/expr/scope.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/fe5574b05a006671fb7dec44d8d6edc92c90b002/crates%2Fra_hir%2Fsrc%2Fexpr%2Fscope.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fe5574b05a006671fb7dec44d8d6edc92c90b002/crates%2Fra_hir%2Fsrc%2Fexpr%2Fscope.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fexpr%2Fscope.rs?ref=fe5574b05a006671fb7dec44d8d6edc92c90b002", "patch": "@@ -108,7 +108,7 @@ impl ExprScopes {\n }\n \n #[derive(Debug, Clone, PartialEq, Eq)]\n-pub struct ScopesWithSyntaxMapping {\n+pub struct ScopesWithSourceMap {\n     pub source_map: Arc<BodySourceMap>,\n     pub scopes: Arc<ExprScopes>,\n }\n@@ -129,7 +129,7 @@ impl ScopeEntryWithSyntax {\n     }\n }\n \n-impl ScopesWithSyntaxMapping {\n+impl ScopesWithSourceMap {\n     fn scope_chain<'a>(&'a self, node: &SyntaxNode) -> impl Iterator<Item = ScopeId> + 'a {\n         generate(self.scope_for(node), move |&scope| self.scopes.scopes[scope].parent)\n     }\n@@ -319,7 +319,7 @@ mod tests {\n         let (body, source_map) = expr::collect_fn_body_syntax(irrelevant_function, fn_def);\n         let scopes = ExprScopes::new(Arc::new(body));\n         let scopes =\n-            ScopesWithSyntaxMapping { scopes: Arc::new(scopes), source_map: Arc::new(source_map) };\n+            ScopesWithSourceMap { scopes: Arc::new(scopes), source_map: Arc::new(source_map) };\n         let actual = scopes\n             .scope_chain(marker.syntax())\n             .flat_map(|scope| scopes.scopes.entries(scope))\n@@ -418,7 +418,7 @@ mod tests {\n         let (body, source_map) = expr::collect_fn_body_syntax(irrelevant_function, fn_def);\n         let scopes = ExprScopes::new(Arc::new(body));\n         let scopes =\n-            ScopesWithSyntaxMapping { scopes: Arc::new(scopes), source_map: Arc::new(source_map) };\n+            ScopesWithSourceMap { scopes: Arc::new(scopes), source_map: Arc::new(source_map) };\n         let local_name_entry = scopes.resolve_local_name(name_ref).unwrap();\n         let local_name = local_name_entry.ptr();\n         assert_eq!(local_name.range(), expected_name.syntax().range());"}, {"sha": "a6e744ea70e1d5b540f8f98253a86d092332c85c", "filename": "crates/ra_hir/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/fe5574b05a006671fb7dec44d8d6edc92c90b002/crates%2Fra_hir%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fe5574b05a006671fb7dec44d8d6edc92c90b002/crates%2Fra_hir%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Flib.rs?ref=fe5574b05a006671fb7dec44d8d6edc92c90b002", "patch": "@@ -60,7 +60,7 @@ pub use self::{\n     impl_block::{ImplBlock, ImplItem},\n     docs::{Docs, Documentation},\n     adt::AdtDef,\n-    expr::{ExprScopes, ScopesWithSyntaxMapping, ScopeEntryWithSyntax},\n+    expr::{ExprScopes, ScopesWithSourceMap, ScopeEntryWithSyntax},\n     resolve::{Resolver, Resolution},\n };\n "}]}