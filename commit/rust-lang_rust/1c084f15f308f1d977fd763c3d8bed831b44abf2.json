{"sha": "1c084f15f308f1d977fd763c3d8bed831b44abf2", "node_id": "C_kwDOAAsO6NoAKDFjMDg0ZjE1ZjMwOGYxZDk3N2ZkNzYzYzNkOGJlZDgzMWI0NGFiZjI", "commit": {"author": {"name": "Michael Goulet", "email": "michael@errs.io", "date": "2022-07-30T09:44:22Z"}, "committer": {"name": "Michael Goulet", "email": "michael@errs.io", "date": "2022-08-16T01:22:21Z"}, "message": "Correct meaning of two UI tests", "tree": {"sha": "8c8745105176f24a6ff1fc0ff7a72432f63e6018", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8c8745105176f24a6ff1fc0ff7a72432f63e6018"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1c084f15f308f1d977fd763c3d8bed831b44abf2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1c084f15f308f1d977fd763c3d8bed831b44abf2", "html_url": "https://github.com/rust-lang/rust/commit/1c084f15f308f1d977fd763c3d8bed831b44abf2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1c084f15f308f1d977fd763c3d8bed831b44abf2/comments", "author": {"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8b64988575d4b71616620bd78d9c2e9a4f526232", "url": "https://api.github.com/repos/rust-lang/rust/commits/8b64988575d4b71616620bd78d9c2e9a4f526232", "html_url": "https://github.com/rust-lang/rust/commit/8b64988575d4b71616620bd78d9c2e9a4f526232"}], "stats": {"total": 79, "additions": 45, "deletions": 34}, "files": [{"sha": "83dbdb77abeb5c1153843e68f4f0ccfcad365e79", "filename": "src/test/ui/mismatched_types/E0631.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/1c084f15f308f1d977fd763c3d8bed831b44abf2/src%2Ftest%2Fui%2Fmismatched_types%2FE0631.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1c084f15f308f1d977fd763c3d8bed831b44abf2/src%2Ftest%2Fui%2Fmismatched_types%2FE0631.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmismatched_types%2FE0631.rs?ref=1c084f15f308f1d977fd763c3d8bed831b44abf2", "patch": "@@ -1,11 +1,11 @@\n #![feature(unboxed_closures)]\n \n fn foo<F: Fn(usize)>(_: F) {}\n-fn bar<F: Fn<usize>>(_: F) {}\n+fn bar<F: Fn<(usize,)>>(_: F) {}\n fn main() {\n     fn f(_: u64) {}\n     foo(|_: isize| {}); //~ ERROR type mismatch\n-    bar(|_: isize| {}); //~ ERROR mismatched types\n+    bar(|_: isize| {}); //~ ERROR type mismatch\n     foo(f); //~ ERROR type mismatch\n-    bar(f); //~ ERROR mismatched types\n+    bar(f); //~ ERROR type mismatch\n }"}, {"sha": "410ea4b0b3439ebd9f1254d6be34a9b6136c427c", "filename": "src/test/ui/mismatched_types/E0631.stderr", "status": "modified", "additions": 18, "deletions": 14, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/1c084f15f308f1d977fd763c3d8bed831b44abf2/src%2Ftest%2Fui%2Fmismatched_types%2FE0631.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/1c084f15f308f1d977fd763c3d8bed831b44abf2/src%2Ftest%2Fui%2Fmismatched_types%2FE0631.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmismatched_types%2FE0631.stderr?ref=1c084f15f308f1d977fd763c3d8bed831b44abf2", "patch": "@@ -14,19 +14,21 @@ note: required by a bound in `foo`\n LL | fn foo<F: Fn(usize)>(_: F) {}\n    |           ^^^^^^^^^ required by this bound in `foo`\n \n-error[E0308]: mismatched types\n+error[E0631]: type mismatch in closure arguments\n   --> $DIR/E0631.rs:8:5\n    |\n LL |     bar(|_: isize| {});\n-   |     ^^^ types differ\n+   |     ^^^ ---------- found signature defined here\n+   |     |\n+   |     expected due to this\n    |\n-   = note: expected trait `Fn<usize>`\n-              found trait `Fn<(isize,)>`\n+   = note: expected closure signature `fn(usize) -> _`\n+              found closure signature `fn(isize) -> _`\n note: required by a bound in `bar`\n   --> $DIR/E0631.rs:4:11\n    |\n-LL | fn bar<F: Fn<usize>>(_: F) {}\n-   |           ^^^^^^^^^ required by this bound in `bar`\n+LL | fn bar<F: Fn<(usize,)>>(_: F) {}\n+   |           ^^^^^^^^^^^^ required by this bound in `bar`\n \n error[E0631]: type mismatch in function arguments\n   --> $DIR/E0631.rs:9:9\n@@ -47,23 +49,25 @@ note: required by a bound in `foo`\n LL | fn foo<F: Fn(usize)>(_: F) {}\n    |           ^^^^^^^^^ required by this bound in `foo`\n \n-error[E0308]: mismatched types\n+error[E0631]: type mismatch in function arguments\n   --> $DIR/E0631.rs:10:9\n    |\n+LL |     fn f(_: u64) {}\n+   |     ------------ found signature defined here\n+...\n LL |     bar(f);\n-   |     --- ^ types differ\n+   |     --- ^ expected due to this\n    |     |\n    |     required by a bound introduced by this call\n    |\n-   = note: expected trait `Fn<usize>`\n-              found trait `Fn<(u64,)>`\n+   = note: expected function signature `fn(usize) -> _`\n+              found function signature `fn(u64) -> _`\n note: required by a bound in `bar`\n   --> $DIR/E0631.rs:4:11\n    |\n-LL | fn bar<F: Fn<usize>>(_: F) {}\n-   |           ^^^^^^^^^ required by this bound in `bar`\n+LL | fn bar<F: Fn<(usize,)>>(_: F) {}\n+   |           ^^^^^^^^^^^^ required by this bound in `bar`\n \n error: aborting due to 4 previous errors\n \n-Some errors have detailed explanations: E0308, E0631.\n-For more information about an error, try `rustc --explain E0308`.\n+For more information about this error, try `rustc --explain E0631`."}, {"sha": "65c8d6a7e936e2754c82852e40372620afae744c", "filename": "src/test/ui/mismatched_types/closure-arg-count.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/1c084f15f308f1d977fd763c3d8bed831b44abf2/src%2Ftest%2Fui%2Fmismatched_types%2Fclosure-arg-count.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1c084f15f308f1d977fd763c3d8bed831b44abf2/src%2Ftest%2Fui%2Fmismatched_types%2Fclosure-arg-count.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmismatched_types%2Fclosure-arg-count.rs?ref=1c084f15f308f1d977fd763c3d8bed831b44abf2", "patch": "@@ -1,6 +1,6 @@\n #![feature(unboxed_closures)]\n \n-fn f<F: Fn<usize>>(_: F) {}\n+fn f<F: Fn<(usize,)>>(_: F) {}\n fn main() {\n     [1, 2, 3].sort_by(|| panic!());\n     //~^ ERROR closure is expected to take\n@@ -11,9 +11,9 @@ fn main() {\n     [1, 2, 3].sort_by(|(tuple, tuple2): (usize, _)| panic!());\n     //~^ ERROR closure is expected to take\n     f(|| panic!());\n-    //~^ ERROR mismatched types\n+    //~^ ERROR closure is expected to take\n     f(  move    || panic!());\n-    //~^ ERROR mismatched types\n+    //~^ ERROR closure is expected to take\n \n     let _it = vec![1, 2, 3].into_iter().enumerate().map(|i, x| i);\n     //~^ ERROR closure is expected to take"}, {"sha": "a02ec819838833dc2920fdc10ea9e5d380f97ba7", "filename": "src/test/ui/mismatched_types/closure-arg-count.stderr", "status": "modified", "additions": 21, "deletions": 14, "changes": 35, "blob_url": "https://github.com/rust-lang/rust/blob/1c084f15f308f1d977fd763c3d8bed831b44abf2/src%2Ftest%2Fui%2Fmismatched_types%2Fclosure-arg-count.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/1c084f15f308f1d977fd763c3d8bed831b44abf2/src%2Ftest%2Fui%2Fmismatched_types%2Fclosure-arg-count.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmismatched_types%2Fclosure-arg-count.stderr?ref=1c084f15f308f1d977fd763c3d8bed831b44abf2", "patch": "@@ -45,33 +45,41 @@ help: change the closure to take multiple arguments instead of a single tuple\n LL |     [1, 2, 3].sort_by(|tuple, tuple2| panic!());\n    |                       ~~~~~~~~~~~~~~~\n \n-error[E0308]: mismatched types\n+error[E0593]: closure is expected to take 1 argument, but it takes 0 arguments\n   --> $DIR/closure-arg-count.rs:13:5\n    |\n LL |     f(|| panic!());\n-   |     ^ types differ\n+   |     ^ -- takes 0 arguments\n+   |     |\n+   |     expected closure that takes 1 argument\n    |\n-   = note: expected trait `Fn<usize>`\n-              found trait `Fn<()>`\n note: required by a bound in `f`\n   --> $DIR/closure-arg-count.rs:3:9\n    |\n-LL | fn f<F: Fn<usize>>(_: F) {}\n-   |         ^^^^^^^^^ required by this bound in `f`\n+LL | fn f<F: Fn<(usize,)>>(_: F) {}\n+   |         ^^^^^^^^^^^^ required by this bound in `f`\n+help: consider changing the closure to take and ignore the expected argument\n+   |\n+LL |     f(|_| panic!());\n+   |       ~~~\n \n-error[E0308]: mismatched types\n+error[E0593]: closure is expected to take 1 argument, but it takes 0 arguments\n   --> $DIR/closure-arg-count.rs:15:5\n    |\n LL |     f(  move    || panic!());\n-   |     ^ types differ\n+   |     ^   ---------- takes 0 arguments\n+   |     |\n+   |     expected closure that takes 1 argument\n    |\n-   = note: expected trait `Fn<usize>`\n-              found trait `Fn<()>`\n note: required by a bound in `f`\n   --> $DIR/closure-arg-count.rs:3:9\n    |\n-LL | fn f<F: Fn<usize>>(_: F) {}\n-   |         ^^^^^^^^^ required by this bound in `f`\n+LL | fn f<F: Fn<(usize,)>>(_: F) {}\n+   |         ^^^^^^^^^^^^ required by this bound in `f`\n+help: consider changing the closure to take and ignore the expected argument\n+   |\n+LL |     f(  move    |_| panic!());\n+   |                 ~~~\n \n error[E0593]: closure is expected to take a single 2-tuple as argument, but it takes 2 distinct arguments\n   --> $DIR/closure-arg-count.rs:18:53\n@@ -190,5 +198,4 @@ LL | fn call<F, R>(_: F) where F: FnOnce() -> R {}\n \n error: aborting due to 14 previous errors\n \n-Some errors have detailed explanations: E0308, E0593.\n-For more information about an error, try `rustc --explain E0308`.\n+For more information about this error, try `rustc --explain E0593`."}]}