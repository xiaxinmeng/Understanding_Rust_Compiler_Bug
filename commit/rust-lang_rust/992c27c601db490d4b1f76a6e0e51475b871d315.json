{"sha": "992c27c601db490d4b1f76a6e0e51475b871d315", "node_id": "C_kwDOAAsO6NoAKDk5MmMyN2M2MDFkYjQ5MGQ0YjFmNzZhNmUwZTUxNDc1Yjg3MWQzMTU", "commit": {"author": {"name": "Petr Sumbera", "email": "petr.sumbera@oracle.com", "date": "2022-02-24T12:46:34Z"}, "committer": {"name": "Petr Sumbera", "email": "petr.sumbera@oracle.com", "date": "2022-02-24T12:46:34Z"}, "message": "Add test for nested structures.", "tree": {"sha": "7a711a9b6904f641b4bf91b3ade464d633b0a97e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7a711a9b6904f641b4bf91b3ade464d633b0a97e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/992c27c601db490d4b1f76a6e0e51475b871d315", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/992c27c601db490d4b1f76a6e0e51475b871d315", "html_url": "https://github.com/rust-lang/rust/commit/992c27c601db490d4b1f76a6e0e51475b871d315", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/992c27c601db490d4b1f76a6e0e51475b871d315/comments", "author": {"login": "psumbera", "id": 4249116, "node_id": "MDQ6VXNlcjQyNDkxMTY=", "avatar_url": "https://avatars.githubusercontent.com/u/4249116?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psumbera", "html_url": "https://github.com/psumbera", "followers_url": "https://api.github.com/users/psumbera/followers", "following_url": "https://api.github.com/users/psumbera/following{/other_user}", "gists_url": "https://api.github.com/users/psumbera/gists{/gist_id}", "starred_url": "https://api.github.com/users/psumbera/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psumbera/subscriptions", "organizations_url": "https://api.github.com/users/psumbera/orgs", "repos_url": "https://api.github.com/users/psumbera/repos", "events_url": "https://api.github.com/users/psumbera/events{/privacy}", "received_events_url": "https://api.github.com/users/psumbera/received_events", "type": "User", "site_admin": false}, "committer": {"login": "psumbera", "id": 4249116, "node_id": "MDQ6VXNlcjQyNDkxMTY=", "avatar_url": "https://avatars.githubusercontent.com/u/4249116?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psumbera", "html_url": "https://github.com/psumbera", "followers_url": "https://api.github.com/users/psumbera/followers", "following_url": "https://api.github.com/users/psumbera/following{/other_user}", "gists_url": "https://api.github.com/users/psumbera/gists{/gist_id}", "starred_url": "https://api.github.com/users/psumbera/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psumbera/subscriptions", "organizations_url": "https://api.github.com/users/psumbera/orgs", "repos_url": "https://api.github.com/users/psumbera/repos", "events_url": "https://api.github.com/users/psumbera/events{/privacy}", "received_events_url": "https://api.github.com/users/psumbera/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0d200116d3e8188ee7c8c997f31f54cb4d978612", "url": "https://api.github.com/repos/rust-lang/rust/commits/0d200116d3e8188ee7c8c997f31f54cb4d978612", "html_url": "https://github.com/rust-lang/rust/commit/0d200116d3e8188ee7c8c997f31f54cb4d978612"}], "stats": {"total": 20, "additions": 20, "deletions": 0}, "files": [{"sha": "e8816e4f303d4f791f03e181ca3d77b8051e1c2b", "filename": "src/test/codegen/sparc-struct-abi.rs", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/992c27c601db490d4b1f76a6e0e51475b871d315/src%2Ftest%2Fcodegen%2Fsparc-struct-abi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/992c27c601db490d4b1f76a6e0e51475b871d315/src%2Ftest%2Fcodegen%2Fsparc-struct-abi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fsparc-struct-abi.rs?ref=992c27c601db490d4b1f76a6e0e51475b871d315", "patch": "@@ -81,3 +81,23 @@ pub struct FloatLongFloat {\n pub extern \"C\" fn structfloatlongfloat() -> FloatLongFloat {\n     FloatLongFloat { f: 0.1, i: 123, g: 3.14 }\n }\n+\n+#[repr(C)]\n+pub struct FloatFloat {\n+    f: f32,\n+    g: f32,\n+}\n+\n+#[repr(C)]\n+pub struct NestedStructs {\n+    a: FloatFloat,\n+    b: FloatFloat,\n+}\n+\n+// CHECK: define inreg { float, float, float, float } @structnestestructs()\n+// CHECK-NEXT: start:\n+// CHECK-NEXT: ret { float, float, float, float } { float 0x3FB99999A0000000, float 0x3FF19999A0000000, float 0x40019999A0000000, float 0x400A666660000000 }\n+#[no_mangle]\n+pub extern \"C\" fn structnestestructs() -> NestedStructs {\n+    NestedStructs { a: FloatFloat { f: 0.1, g: 1.1 }, b: FloatFloat { f: 2.2, g: 3.3 } }\n+}"}]}