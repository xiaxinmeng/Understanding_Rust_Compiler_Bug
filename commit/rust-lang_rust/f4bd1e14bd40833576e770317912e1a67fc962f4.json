{"sha": "f4bd1e14bd40833576e770317912e1a67fc962f4", "node_id": "C_kwDOAAsO6NoAKGY0YmQxZTE0YmQ0MDgzMzU3NmU3NzAzMTc5MTJlMWE2N2ZjOTYyZjQ", "commit": {"author": {"name": "Santiago Pastorino", "email": "spastorino@gmail.com", "date": "2022-03-24T17:17:54Z"}, "committer": {"name": "Santiago Pastorino", "email": "spastorino@gmail.com", "date": "2022-03-24T17:17:54Z"}, "message": "Normalize both trait and inherent", "tree": {"sha": "591b7ca43d6737b79f70528026880957b49552c3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/591b7ca43d6737b79f70528026880957b49552c3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f4bd1e14bd40833576e770317912e1a67fc962f4", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEF0ntrgrd9qf9uuThgTGiTgx5768FAmI8p8IACgkQgTGiTgx5\n769ZDw//Un0bD5sMIlHUqL/xTOZNt9VVQN8wu/7ywN0AMG1vkBvbka4LWlrZnmWJ\nuUaGCsE3JjFsopsuZgJdJ3pLjE7jKY0j3QF8wrx6419PuyazDlqZKg8MYYabyjFU\nRcYkk3mtFtOwimg4ZmUD9mvbkA8+A2Ru/oqLIW1ob2dbXk/it7xa0X1zPOwm/Jkk\nsCu+gIVcD53lJPWmG8A8CL04gi7ioqUir4keqqXEkYQo0hr3bMY/3VcnuXwYTP2S\nsd3x8EyMJhblLB5BHuwJAdwY42JkEWd1h6tiiSWLOw584VYtVantaf9aX56LEJiU\nV0zNSTK0/CLZg4CKxEJqzoChwj2Nz8i21F75y5JMk9iUyUQsuVBGp6/UfAbGgBEl\nbxY0vj2Y0TcUYxAgy8how0IkZcuS5SseAeu0FD1D8J6+CblRV8gz97LRgD7sam6s\nJEBffMaNOxkIfQl5e+HKnq1c1Yu/Ip7plWM7gTRy/s//Ismn3hY6xK3Iw5K/L9ga\ni7ojXMC4iJ/BgN2j94jrnGaxlK5TFIbFOVrwc23rmumnHztiVFGVvm3LDjPpvSRS\nf5/NZferS6zZSb2FqcYO1nEgTXcaa+P+cblZWHMLnvohqGnCbOYEoYguWw+EC5f7\nr1Q48lRa689nWnxisA6U9uGYopDSONHJcSnQHbFjLO5MnKebjnc=\n=fBRO\n-----END PGP SIGNATURE-----", "payload": "tree 591b7ca43d6737b79f70528026880957b49552c3\nparent 22b311bd826f0a79abfdd2483eed933e86baa31e\nauthor Santiago Pastorino <spastorino@gmail.com> 1648142274 -0300\ncommitter Santiago Pastorino <spastorino@gmail.com> 1648142274 -0300\n\nNormalize both trait and inherent\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f4bd1e14bd40833576e770317912e1a67fc962f4", "html_url": "https://github.com/rust-lang/rust/commit/f4bd1e14bd40833576e770317912e1a67fc962f4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f4bd1e14bd40833576e770317912e1a67fc962f4/comments", "author": {"login": "spastorino", "id": 52642, "node_id": "MDQ6VXNlcjUyNjQy", "avatar_url": "https://avatars.githubusercontent.com/u/52642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spastorino", "html_url": "https://github.com/spastorino", "followers_url": "https://api.github.com/users/spastorino/followers", "following_url": "https://api.github.com/users/spastorino/following{/other_user}", "gists_url": "https://api.github.com/users/spastorino/gists{/gist_id}", "starred_url": "https://api.github.com/users/spastorino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spastorino/subscriptions", "organizations_url": "https://api.github.com/users/spastorino/orgs", "repos_url": "https://api.github.com/users/spastorino/repos", "events_url": "https://api.github.com/users/spastorino/events{/privacy}", "received_events_url": "https://api.github.com/users/spastorino/received_events", "type": "User", "site_admin": false}, "committer": {"login": "spastorino", "id": 52642, "node_id": "MDQ6VXNlcjUyNjQy", "avatar_url": "https://avatars.githubusercontent.com/u/52642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spastorino", "html_url": "https://github.com/spastorino", "followers_url": "https://api.github.com/users/spastorino/followers", "following_url": "https://api.github.com/users/spastorino/following{/other_user}", "gists_url": "https://api.github.com/users/spastorino/gists{/gist_id}", "starred_url": "https://api.github.com/users/spastorino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spastorino/subscriptions", "organizations_url": "https://api.github.com/users/spastorino/orgs", "repos_url": "https://api.github.com/users/spastorino/repos", "events_url": "https://api.github.com/users/spastorino/events{/privacy}", "received_events_url": "https://api.github.com/users/spastorino/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "22b311bd826f0a79abfdd2483eed933e86baa31e", "url": "https://api.github.com/repos/rust-lang/rust/commits/22b311bd826f0a79abfdd2483eed933e86baa31e", "html_url": "https://github.com/rust-lang/rust/commit/22b311bd826f0a79abfdd2483eed933e86baa31e"}], "stats": {"total": 25, "additions": 9, "deletions": 16}, "files": [{"sha": "f3385df513f1c111513803d0fe2cab61c26b4d34", "filename": "compiler/rustc_trait_selection/src/traits/coherence.rs", "status": "modified", "additions": 9, "deletions": 16, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/f4bd1e14bd40833576e770317912e1a67fc962f4/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fcoherence.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f4bd1e14bd40833576e770317912e1a67fc962f4/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fcoherence.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fcoherence.rs?ref=f4bd1e14bd40833576e770317912e1a67fc962f4", "patch": "@@ -305,22 +305,15 @@ fn negative_impl<'cx, 'tcx>(\n     tcx.infer_ctxt().enter(|infcx| {\n         // create a parameter environment corresponding to a (placeholder) instantiation of impl1\n         let impl_env = tcx.param_env(impl1_def_id);\n-        let subject1 = match tcx.impl_subject(impl1_def_id) {\n-            ImplSubject::Trait(impl1_trait_ref) => {\n-                match traits::fully_normalize(\n-                    &infcx,\n-                    FulfillmentContext::new(),\n-                    ObligationCause::dummy(),\n-                    impl_env,\n-                    impl1_trait_ref,\n-                ) {\n-                    Ok(impl1_trait_ref) => ImplSubject::Trait(impl1_trait_ref),\n-                    Err(err) => {\n-                        bug!(\"failed to fully normalize {:?}: {:?}\", impl1_trait_ref, err);\n-                    }\n-                }\n-            }\n-            subject @ ImplSubject::Inherent(_) => subject,\n+        let subject1 = match traits::fully_normalize(\n+            &infcx,\n+            FulfillmentContext::new(),\n+            ObligationCause::dummy(),\n+            impl_env,\n+            tcx.impl_subject(impl1_def_id),\n+        ) {\n+            Ok(s) => s,\n+            Err(err) => bug!(\"failed to fully normalize {:?}: {:?}\", impl1_def_id, err),\n         };\n \n         let (subject2, obligations) ="}]}