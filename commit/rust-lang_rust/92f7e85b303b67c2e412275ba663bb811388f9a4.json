{"sha": "92f7e85b303b67c2e412275ba663bb811388f9a4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkyZjdlODViMzAzYjY3YzJlNDEyMjc1YmE2NjNiYjgxMTM4OGY5YTQ=", "commit": {"author": {"name": "Chiu-Hsiang Hsu", "email": "wdv4758h@gmail.com", "date": "2016-08-10T16:38:12Z"}, "committer": {"name": "Chiu-Hsiang Hsu", "email": "wdv4758h@gmail.com", "date": "2016-08-11T02:18:23Z"}, "message": "Update E0138 to new format", "tree": {"sha": "71e1c65e05dd6f8a78e064dde937c2dbf8e2793f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/71e1c65e05dd6f8a78e064dde937c2dbf8e2793f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/92f7e85b303b67c2e412275ba663bb811388f9a4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/92f7e85b303b67c2e412275ba663bb811388f9a4", "html_url": "https://github.com/rust-lang/rust/commit/92f7e85b303b67c2e412275ba663bb811388f9a4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/92f7e85b303b67c2e412275ba663bb811388f9a4/comments", "author": {"login": "wdv4758h", "id": 2716047, "node_id": "MDQ6VXNlcjI3MTYwNDc=", "avatar_url": "https://avatars.githubusercontent.com/u/2716047?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wdv4758h", "html_url": "https://github.com/wdv4758h", "followers_url": "https://api.github.com/users/wdv4758h/followers", "following_url": "https://api.github.com/users/wdv4758h/following{/other_user}", "gists_url": "https://api.github.com/users/wdv4758h/gists{/gist_id}", "starred_url": "https://api.github.com/users/wdv4758h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wdv4758h/subscriptions", "organizations_url": "https://api.github.com/users/wdv4758h/orgs", "repos_url": "https://api.github.com/users/wdv4758h/repos", "events_url": "https://api.github.com/users/wdv4758h/events{/privacy}", "received_events_url": "https://api.github.com/users/wdv4758h/received_events", "type": "User", "site_admin": false}, "committer": {"login": "wdv4758h", "id": 2716047, "node_id": "MDQ6VXNlcjI3MTYwNDc=", "avatar_url": "https://avatars.githubusercontent.com/u/2716047?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wdv4758h", "html_url": "https://github.com/wdv4758h", "followers_url": "https://api.github.com/users/wdv4758h/followers", "following_url": "https://api.github.com/users/wdv4758h/following{/other_user}", "gists_url": "https://api.github.com/users/wdv4758h/gists{/gist_id}", "starred_url": "https://api.github.com/users/wdv4758h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wdv4758h/subscriptions", "organizations_url": "https://api.github.com/users/wdv4758h/orgs", "repos_url": "https://api.github.com/users/wdv4758h/repos", "events_url": "https://api.github.com/users/wdv4758h/events{/privacy}", "received_events_url": "https://api.github.com/users/wdv4758h/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "561c4e1dd3f39434085d7958a69628600a71937c", "url": "https://api.github.com/repos/rust-lang/rust/commits/561c4e1dd3f39434085d7958a69628600a71937c", "html_url": "https://github.com/rust-lang/rust/commit/561c4e1dd3f39434085d7958a69628600a71937c"}], "stats": {"total": 14, "additions": 11, "deletions": 3}, "files": [{"sha": "11bde922f47f2815047425593dc93e0caf220b41", "filename": "src/librustc/middle/entry.rs", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/92f7e85b303b67c2e412275ba663bb811388f9a4/src%2Flibrustc%2Fmiddle%2Fentry.rs", "raw_url": "https://github.com/rust-lang/rust/raw/92f7e85b303b67c2e412275ba663bb811388f9a4/src%2Flibrustc%2Fmiddle%2Fentry.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fentry.rs?ref=92f7e85b303b67c2e412275ba663bb811388f9a4", "patch": "@@ -132,8 +132,13 @@ fn find_item(item: &Item, ctxt: &mut EntryContext, at_root: bool) {\n             if ctxt.start_fn.is_none() {\n                 ctxt.start_fn = Some((item.id, item.span));\n             } else {\n-                span_err!(ctxt.session, item.span, E0138,\n-                          \"multiple 'start' functions\");\n+                struct_span_err!(\n+                    ctxt.session, item.span, E0138,\n+                    \"multiple 'start' functions\")\n+                    .span_label(ctxt.start_fn.unwrap().1,\n+                                &format!(\"previous `start` function here\"))\n+                    .span_label(item.span, &format!(\"multiple `start` functions\"))\n+                    .emit();\n             }\n         },\n         EntryPointType::None => ()"}, {"sha": "d4630d7c2effbe7bd7ee96ce6f1ca538656f03c0", "filename": "src/test/compile-fail/E0138.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/92f7e85b303b67c2e412275ba663bb811388f9a4/src%2Ftest%2Fcompile-fail%2FE0138.rs", "raw_url": "https://github.com/rust-lang/rust/raw/92f7e85b303b67c2e412275ba663bb811388f9a4/src%2Ftest%2Fcompile-fail%2FE0138.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2FE0138.rs?ref=92f7e85b303b67c2e412275ba663bb811388f9a4", "patch": "@@ -12,6 +12,9 @@\n \n #[start]\n fn foo(argc: isize, argv: *const *const u8) -> isize {}\n+//~^ NOTE previous `start` function here\n \n #[start]\n-fn f(argc: isize, argv: *const *const u8) -> isize {} //~ ERROR E0138\n+fn f(argc: isize, argv: *const *const u8) -> isize {}\n+//~^ ERROR E0138\n+//~| NOTE multiple `start` functions"}]}