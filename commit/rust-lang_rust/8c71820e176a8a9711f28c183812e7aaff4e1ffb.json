{"sha": "8c71820e176a8a9711f28c183812e7aaff4e1ffb", "node_id": "C_kwDOAAsO6NoAKDhjNzE4MjBlMTc2YThhOTcxMWYyOGMxODM4MTJlN2FhZmY0ZTFmZmI", "commit": {"author": {"name": "Thom Chiovoloni", "email": "thom@shift.click", "date": "2022-10-31T11:21:14Z"}, "committer": {"name": "Thom Chiovoloni", "email": "thom@shift.click", "date": "2022-10-31T11:21:26Z"}, "message": "smoketest that libtest doesn't panic in `#[bench]`", "tree": {"sha": "42b63f26e1436db79b97227817363a0756908b3f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/42b63f26e1436db79b97227817363a0756908b3f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8c71820e176a8a9711f28c183812e7aaff4e1ffb", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQQszICQ1r0Zqrp7OLPXcz0dendfCgUCY1+vuAAKCRDXcz0dendf\nCgCDAPkBAfQOyWsMjw2TjRmPt35T1ss081nw8iwd4gi51CXfxgD+JLMBSBaIO/es\n9QdwFHYx9QRTp5ZFccRjIsSX/rC8tAM=\n=Dkbz\n-----END PGP SIGNATURE-----", "payload": "tree 42b63f26e1436db79b97227817363a0756908b3f\nparent b56cb9e032bd6699a79982a3c20d5f2dd9646c83\nauthor Thom Chiovoloni <thom@shift.click> 1667215274 -0700\ncommitter Thom Chiovoloni <thom@shift.click> 1667215286 -0700\n\nsmoketest that libtest doesn't panic in `#[bench]`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8c71820e176a8a9711f28c183812e7aaff4e1ffb", "html_url": "https://github.com/rust-lang/rust/commit/8c71820e176a8a9711f28c183812e7aaff4e1ffb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8c71820e176a8a9711f28c183812e7aaff4e1ffb/comments", "author": {"login": "thomcc", "id": 860665, "node_id": "MDQ6VXNlcjg2MDY2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/860665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thomcc", "html_url": "https://github.com/thomcc", "followers_url": "https://api.github.com/users/thomcc/followers", "following_url": "https://api.github.com/users/thomcc/following{/other_user}", "gists_url": "https://api.github.com/users/thomcc/gists{/gist_id}", "starred_url": "https://api.github.com/users/thomcc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thomcc/subscriptions", "organizations_url": "https://api.github.com/users/thomcc/orgs", "repos_url": "https://api.github.com/users/thomcc/repos", "events_url": "https://api.github.com/users/thomcc/events{/privacy}", "received_events_url": "https://api.github.com/users/thomcc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "thomcc", "id": 860665, "node_id": "MDQ6VXNlcjg2MDY2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/860665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thomcc", "html_url": "https://github.com/thomcc", "followers_url": "https://api.github.com/users/thomcc/followers", "following_url": "https://api.github.com/users/thomcc/following{/other_user}", "gists_url": "https://api.github.com/users/thomcc/gists{/gist_id}", "starred_url": "https://api.github.com/users/thomcc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thomcc/subscriptions", "organizations_url": "https://api.github.com/users/thomcc/orgs", "repos_url": "https://api.github.com/users/thomcc/repos", "events_url": "https://api.github.com/users/thomcc/events{/privacy}", "received_events_url": "https://api.github.com/users/thomcc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b56cb9e032bd6699a79982a3c20d5f2dd9646c83", "url": "https://api.github.com/repos/rust-lang/rust/commits/b56cb9e032bd6699a79982a3c20d5f2dd9646c83", "html_url": "https://github.com/rust-lang/rust/commit/b56cb9e032bd6699a79982a3c20d5f2dd9646c83"}], "stats": {"total": 23, "additions": 23, "deletions": 0}, "files": [{"sha": "4df106fad1448b5cf267de1836ef0929ae4209d0", "filename": "src/test/run-make/test-benches/Makefile", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/8c71820e176a8a9711f28c183812e7aaff4e1ffb/src%2Ftest%2Frun-make%2Ftest-benches%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/8c71820e176a8a9711f28c183812e7aaff4e1ffb/src%2Ftest%2Frun-make%2Ftest-benches%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Ftest-benches%2FMakefile?ref=8c71820e176a8a9711f28c183812e7aaff4e1ffb", "patch": "@@ -0,0 +1,9 @@\n+include ../../run-make-fulldeps/tools.mk\n+\n+all:\n+\t# Smoke-test that `#[bench]` isn't entirely broken.\n+\t$(RUSTC) --test smokebench.rs -O\n+\t$(call RUN,smokebench --bench)\n+\t$(call RUN,smokebench --bench noiter)\n+\t$(call RUN,smokebench --bench yesiter)\n+\t$(call RUN,smokebench)"}, {"sha": "ef5e5a620684701fe7716ec325304185f5501945", "filename": "src/test/run-make/test-benches/smokebench.rs", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/8c71820e176a8a9711f28c183812e7aaff4e1ffb/src%2Ftest%2Frun-make%2Ftest-benches%2Fsmokebench.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c71820e176a8a9711f28c183812e7aaff4e1ffb/src%2Ftest%2Frun-make%2Ftest-benches%2Fsmokebench.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Ftest-benches%2Fsmokebench.rs?ref=8c71820e176a8a9711f28c183812e7aaff4e1ffb", "patch": "@@ -0,0 +1,14 @@\n+#![feature(test)]\n+extern crate test;\n+\n+#[bench]\n+fn smoke_yesiter(b: &mut test::Bencher) {\n+    let mut i = 0usize;\n+    b.iter(|| {\n+        i = i.wrapping_add(1);\n+        i\n+    })\n+}\n+\n+#[bench]\n+fn smoke_noiter(_: &mut test::Bencher) {}"}]}