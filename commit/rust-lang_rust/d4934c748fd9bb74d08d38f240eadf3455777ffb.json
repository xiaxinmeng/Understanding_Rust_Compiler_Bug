{"sha": "d4934c748fd9bb74d08d38f240eadf3455777ffb", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ0OTM0Yzc0OGZkOWJiNzRkMDhkMzhmMjQwZWFkZjM0NTU3NzdmZmI=", "commit": {"author": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2018-11-20T22:28:07Z"}, "committer": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2018-11-20T22:28:07Z"}, "message": "Add a couple more tests", "tree": {"sha": "1d742d1a5de23c12953d569865968b67a4cf54f1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1d742d1a5de23c12953d569865968b67a4cf54f1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d4934c748fd9bb74d08d38f240eadf3455777ffb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d4934c748fd9bb74d08d38f240eadf3455777ffb", "html_url": "https://github.com/rust-lang/rust/commit/d4934c748fd9bb74d08d38f240eadf3455777ffb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d4934c748fd9bb74d08d38f240eadf3455777ffb/comments", "author": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "committer": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1af682a55731ca208fa5a5deb1cf5c89a07856a6", "url": "https://api.github.com/repos/rust-lang/rust/commits/1af682a55731ca208fa5a5deb1cf5c89a07856a6", "html_url": "https://github.com/rust-lang/rust/commit/1af682a55731ca208fa5a5deb1cf5c89a07856a6"}], "stats": {"total": 36, "additions": 33, "deletions": 3}, "files": [{"sha": "6ff3ab73639c0bec32db8ef41797a66fa84beb8e", "filename": "src/test/ui/imports/extern-prelude-extern-crate-restricted-shadowing.rs", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/d4934c748fd9bb74d08d38f240eadf3455777ffb/src%2Ftest%2Fui%2Fimports%2Fextern-prelude-extern-crate-restricted-shadowing.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d4934c748fd9bb74d08d38f240eadf3455777ffb/src%2Ftest%2Fui%2Fimports%2Fextern-prelude-extern-crate-restricted-shadowing.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fimports%2Fextern-prelude-extern-crate-restricted-shadowing.rs?ref=d4934c748fd9bb74d08d38f240eadf3455777ffb", "patch": "@@ -14,4 +14,13 @@ mod m {\n     }\n }\n \n+macro_rules! define_other_core {\n+    () => {\n+        extern crate std as core;\n+        //~^ ERROR macro-expanded `extern crate` items cannot shadow names passed with `--extern`\n+    }\n+}\n+\n+define_other_core!();\n+\n fn main() {}"}, {"sha": "795e1761ccdb3e097ca9b11542f28953e45c0443", "filename": "src/test/ui/imports/extern-prelude-extern-crate-restricted-shadowing.stderr", "status": "modified", "additions": 12, "deletions": 3, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/d4934c748fd9bb74d08d38f240eadf3455777ffb/src%2Ftest%2Fui%2Fimports%2Fextern-prelude-extern-crate-restricted-shadowing.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/d4934c748fd9bb74d08d38f240eadf3455777ffb/src%2Ftest%2Fui%2Fimports%2Fextern-prelude-extern-crate-restricted-shadowing.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fimports%2Fextern-prelude-extern-crate-restricted-shadowing.stderr?ref=d4934c748fd9bb74d08d38f240eadf3455777ffb", "patch": "@@ -1,19 +1,28 @@\n+error: macro-expanded `extern crate` items cannot shadow names passed with `--extern`\n+  --> $DIR/extern-prelude-extern-crate-restricted-shadowing.rs:19:9\n+   |\n+LL |         extern crate std as core;\n+   |         ^^^^^^^^^^^^^^^^^^^^^^^^^\n+...\n+LL | define_other_core!();\n+   | --------------------- in this macro invocation\n+\n error[E0659]: `Vec` is ambiguous (macro-expanded name vs less macro-expanded name from outer scope during import/macro resolution)\n-  --> $DIR/extern-prelude-extern-crate-restricted-shadowing.rs:15:9\n+  --> $DIR/extern-prelude-extern-crate-restricted-shadowing.rs:13:9\n    |\n LL |         Vec::panic!(); //~ ERROR `Vec` is ambiguous\n    |         ^^^ ambiguous name\n    |\n    = note: `Vec` could refer to a struct from prelude\n note: `Vec` could also refer to the extern crate imported here\n-  --> $DIR/extern-prelude-extern-crate-restricted-shadowing.rs:7:9\n+  --> $DIR/extern-prelude-extern-crate-restricted-shadowing.rs:5:9\n    |\n LL |         extern crate std as Vec;\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^\n ...\n LL | define_vec!();\n    | -------------- in this macro invocation\n \n-error: aborting due to previous error\n+error: aborting due to 2 previous errors\n \n For more information about this error, try `rustc --explain E0659`."}, {"sha": "c5adeaf17fa9285c942b73bf0a812781d076e97b", "filename": "src/test/ui/imports/extern-prelude-extern-crate-shadowing.rs", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/d4934c748fd9bb74d08d38f240eadf3455777ffb/src%2Ftest%2Fui%2Fimports%2Fextern-prelude-extern-crate-shadowing.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d4934c748fd9bb74d08d38f240eadf3455777ffb/src%2Ftest%2Fui%2Fimports%2Fextern-prelude-extern-crate-shadowing.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fimports%2Fextern-prelude-extern-crate-shadowing.rs?ref=d4934c748fd9bb74d08d38f240eadf3455777ffb", "patch": "@@ -0,0 +1,12 @@\n+// compile-pass\n+// aux-build:two_macros.rs\n+\n+extern crate two_macros as core;\n+\n+mod m {\n+    fn check() {\n+        core::m!(); // OK\n+    }\n+}\n+\n+fn main() {}"}]}