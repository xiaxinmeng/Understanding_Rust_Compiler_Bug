{"sha": "da5f7f10936198bad22c370118bad1ac332d2f46", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRhNWY3ZjEwOTM2MTk4YmFkMjJjMzcwMTE4YmFkMWFjMzMyZDJmNDY=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-02-20T07:31:43Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-02-20T07:31:43Z"}, "message": "Auto merge of #81427 - klensy:eat-digits, r=m-ou-se\n\nsimplify eat_digits\n\nSimplify eat_digits by checking values in iterator, plus decrease function size, by returning unchecked slices.\n\nhttps://godbolt.org/z/cxjav4", "tree": {"sha": "507efdaaa52f5a6f051298f1c04ac595fbdd9651", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/507efdaaa52f5a6f051298f1c04ac595fbdd9651"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/da5f7f10936198bad22c370118bad1ac332d2f46", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/da5f7f10936198bad22c370118bad1ac332d2f46", "html_url": "https://github.com/rust-lang/rust/commit/da5f7f10936198bad22c370118bad1ac332d2f46", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/da5f7f10936198bad22c370118bad1ac332d2f46/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b75baad5c3fcb85676c4df648962e53c9756e7ba", "url": "https://api.github.com/repos/rust-lang/rust/commits/b75baad5c3fcb85676c4df648962e53c9756e7ba", "html_url": "https://github.com/rust-lang/rust/commit/b75baad5c3fcb85676c4df648962e53c9756e7ba"}, {"sha": "ec09d7fc8bf28f52380cc7f90fb6ccf383c012ea", "url": "https://api.github.com/repos/rust-lang/rust/commits/ec09d7fc8bf28f52380cc7f90fb6ccf383c012ea", "html_url": "https://github.com/rust-lang/rust/commit/ec09d7fc8bf28f52380cc7f90fb6ccf383c012ea"}], "stats": {"total": 7, "additions": 2, "deletions": 5}, "files": [{"sha": "858cc3c9b014693998d9f5fc7dc47bf90cb26328", "filename": "library/core/src/num/dec2flt/parse.rs", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/da5f7f10936198bad22c370118bad1ac332d2f46/library%2Fcore%2Fsrc%2Fnum%2Fdec2flt%2Fparse.rs", "raw_url": "https://github.com/rust-lang/rust/raw/da5f7f10936198bad22c370118bad1ac332d2f46/library%2Fcore%2Fsrc%2Fnum%2Fdec2flt%2Fparse.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fnum%2Fdec2flt%2Fparse.rs?ref=da5f7f10936198bad22c370118bad1ac332d2f46", "patch": "@@ -80,11 +80,8 @@ pub fn parse_decimal(s: &str) -> ParseResult<'_> {\n \n /// Carves off decimal digits up to the first non-digit character.\n fn eat_digits(s: &[u8]) -> (&[u8], &[u8]) {\n-    let mut i = 0;\n-    while i < s.len() && b'0' <= s[i] && s[i] <= b'9' {\n-        i += 1;\n-    }\n-    (&s[..i], &s[i..])\n+    let pos = s.iter().position(|c| !c.is_ascii_digit()).unwrap_or(s.len());\n+    s.split_at(pos)\n }\n \n /// Exponent extraction and error checking."}]}