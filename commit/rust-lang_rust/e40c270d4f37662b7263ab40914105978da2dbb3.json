{"sha": "e40c270d4f37662b7263ab40914105978da2dbb3", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU0MGMyNzBkNGYzNzY2MmI3MjYzYWI0MDkxNDEwNTk3OGRhMmRiYjM=", "commit": {"author": {"name": "mcarton", "email": "cartonmartin+git@gmail.com", "date": "2017-06-18T21:00:14Z"}, "committer": {"name": "mcarton", "email": "cartonmartin+git@gmail.com", "date": "2017-09-30T12:46:55Z"}, "message": "Don't lint autolinks in `doc_markdown`", "tree": {"sha": "f5d8ebe672ff4d02fe9db3be6aff8e020b7ae817", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f5d8ebe672ff4d02fe9db3be6aff8e020b7ae817"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e40c270d4f37662b7263ab40914105978da2dbb3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e40c270d4f37662b7263ab40914105978da2dbb3", "html_url": "https://github.com/rust-lang/rust/commit/e40c270d4f37662b7263ab40914105978da2dbb3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e40c270d4f37662b7263ab40914105978da2dbb3/comments", "author": {"login": "mcarton", "id": 3751788, "node_id": "MDQ6VXNlcjM3NTE3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/3751788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcarton", "html_url": "https://github.com/mcarton", "followers_url": "https://api.github.com/users/mcarton/followers", "following_url": "https://api.github.com/users/mcarton/following{/other_user}", "gists_url": "https://api.github.com/users/mcarton/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcarton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcarton/subscriptions", "organizations_url": "https://api.github.com/users/mcarton/orgs", "repos_url": "https://api.github.com/users/mcarton/repos", "events_url": "https://api.github.com/users/mcarton/events{/privacy}", "received_events_url": "https://api.github.com/users/mcarton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mcarton", "id": 3751788, "node_id": "MDQ6VXNlcjM3NTE3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/3751788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcarton", "html_url": "https://github.com/mcarton", "followers_url": "https://api.github.com/users/mcarton/followers", "following_url": "https://api.github.com/users/mcarton/following{/other_user}", "gists_url": "https://api.github.com/users/mcarton/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcarton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcarton/subscriptions", "organizations_url": "https://api.github.com/users/mcarton/orgs", "repos_url": "https://api.github.com/users/mcarton/repos", "events_url": "https://api.github.com/users/mcarton/events{/privacy}", "received_events_url": "https://api.github.com/users/mcarton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "06280e838b2a8ff2809566aff574d51b182330f5", "url": "https://api.github.com/repos/rust-lang/rust/commits/06280e838b2a8ff2809566aff574d51b182330f5", "html_url": "https://github.com/rust-lang/rust/commit/06280e838b2a8ff2809566aff574d51b182330f5"}], "stats": {"total": 25, "additions": 23, "deletions": 2}, "files": [{"sha": "0c4a2a88ae0e251e8318b53e5c450f5710d11fcb", "filename": "clippy_lints/src/doc.rs", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/e40c270d4f37662b7263ab40914105978da2dbb3/clippy_lints%2Fsrc%2Fdoc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e40c270d4f37662b7263ab40914105978da2dbb3/clippy_lints%2Fsrc%2Fdoc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fdoc.rs?ref=e40c270d4f37662b7263ab40914105978da2dbb3", "patch": "@@ -195,16 +195,26 @@ fn check_doc<'a, Events: Iterator<Item = (usize, pulldown_cmark::Event<'a>)>>(\n     use pulldown_cmark::Tag::*;\n \n     let mut in_code = false;\n+    let mut in_link = None;\n \n     for (offset, event) in docs {\n         match event {\n             Start(CodeBlock(_)) | Start(Code) => in_code = true,\n             End(CodeBlock(_)) | End(Code) => in_code = false,\n-            Start(_tag) | End(_tag) => (),         // We don't care about other tags\n+            Start(Link(link, _)) => in_link = Some(link),\n+            End(Link(_, _)) => in_link = None,\n+            Start(_tag) | End(_tag) => (), // We don't care about other tags\n             Html(_html) | InlineHtml(_html) => (), // HTML is weird, just ignore it\n             SoftBreak => (),\n             HardBreak => (),\n             FootnoteReference(text) | Text(text) => {\n+                if Some(&text) == in_link.as_ref() {\n+                    // Probably a link of the form `<http://example.com>`\n+                    // Which are represented as a link to \"http://example.com\" with\n+                    // text \"http://example.com\" by pulldown-cmark\n+                    continue;\n+                }\n+\n                 if !in_code {\n                     let index = match spans.binary_search_by(|c| c.0.cmp(&offset)) {\n                         Ok(o) => o,"}, {"sha": "21449e526af125d81cf36da34be61df0eb92d8a3", "filename": "tests/ui/doc.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/e40c270d4f37662b7263ab40914105978da2dbb3/tests%2Fui%2Fdoc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e40c270d4f37662b7263ab40914105978da2dbb3/tests%2Fui%2Fdoc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdoc.rs?ref=e40c270d4f37662b7263ab40914105978da2dbb3", "patch": "@@ -159,3 +159,8 @@ fn issue_1469() {}\n  *This would also be an error under a strict common mark interpretation\n  */\n fn issue_1920() {}\n+\n+/// Ok: <http://www.unicode.org/reports/tr9/#Reordering_Resolved_Levels>\n+///\n+/// Not ok: http://www.unicode.org/reports/tr9/#Reordering_Resolved_Levels\n+fn issue_1832() {}"}, {"sha": "fb0d724172d125ea577ba668c9f8d90f77aa2d6e", "filename": "tests/ui/doc.stderr", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/e40c270d4f37662b7263ab40914105978da2dbb3/tests%2Fui%2Fdoc.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/e40c270d4f37662b7263ab40914105978da2dbb3/tests%2Fui%2Fdoc.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdoc.stderr?ref=e40c270d4f37662b7263ab40914105978da2dbb3", "patch": "@@ -156,5 +156,11 @@ error: you should put `be_sure_we_got_to_the_end_of_it` between ticks in the doc\n 138 | /// be_sure_we_got_to_the_end_of_it\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: aborting due to 26 previous errors\n+error: you should put `http://www.unicode.org/reports/tr9/#Reordering_Resolved_Levels` between ticks in the documentation\n+   --> $DIR/doc.rs:165:13\n+    |\n+165 | /// Not ok: http://www.unicode.org/reports/tr9/#Reordering_Resolved_Levels\n+    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+error: aborting due to 27 previous errors\n "}]}