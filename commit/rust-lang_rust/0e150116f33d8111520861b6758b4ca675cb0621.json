{"sha": "0e150116f33d8111520861b6758b4ca675cb0621", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBlMTUwMTE2ZjMzZDgxMTE1MjA4NjFiNjc1OGI0Y2E2NzVjYjA2MjE=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-11-01T01:19:40Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-11-05T20:23:10Z"}, "message": "Reconfigure when the git submodule status changes", "tree": {"sha": "3ecba12feb202bdb08e8b9f49ef73d67c358216d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3ecba12feb202bdb08e8b9f49ef73d67c358216d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0e150116f33d8111520861b6758b4ca675cb0621", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0e150116f33d8111520861b6758b4ca675cb0621", "html_url": "https://github.com/rust-lang/rust/commit/0e150116f33d8111520861b6758b4ca675cb0621", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0e150116f33d8111520861b6758b4ca675cb0621/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f96f1692efa1b9d2f912a30d4b428ae6c913bc81", "url": "https://api.github.com/repos/rust-lang/rust/commits/f96f1692efa1b9d2f912a30d4b428ae6c913bc81", "html_url": "https://github.com/rust-lang/rust/commit/f96f1692efa1b9d2f912a30d4b428ae6c913bc81"}], "stats": {"total": 11, "additions": 11, "deletions": 0}, "files": [{"sha": "477e97b71e7fa687ce25ba94e7767433d71f346c", "filename": "Makefile.in", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/0e150116f33d8111520861b6758b4ca675cb0621/Makefile.in", "raw_url": "https://github.com/rust-lang/rust/raw/0e150116f33d8111520861b6758b4ca675cb0621/Makefile.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Makefile.in?ref=0e150116f33d8111520861b6758b4ca675cb0621", "patch": "@@ -318,6 +318,17 @@ endif\n # Re-configuration\n ######################################################################\n \n+# This is a pretty expensive operation but I don't see any way to avoid it\n+SUBMODULE_STATUS=$(shell cd \"$(CFG_SRC_DIR)\" && \"$(CFG_GIT)\" submodule status)\n+# Look through for submodules prefixed with '-' (need init), or '+' (need update)\n+NEED_GIT_RECONFIG=$(shell echo \"$(SUBMODULE_STATUS)\" | grep -c '^\\(+\\|-\\)')\n+\n+ifeq ($(NEED_GIT_RECONFIG),0)\n+else\n+# If the submodules have changed then always execute config.mk\n+.PHONY: config.mk\n+endif\n+\n config.mk: $(S)configure $(S)Makefile.in $(S)src/snapshots.txt\n \t@$(call E, cfg: reconfiguring)\n \t$(Q)$(S)configure $(CFG_CONFIGURE_ARGS)"}]}