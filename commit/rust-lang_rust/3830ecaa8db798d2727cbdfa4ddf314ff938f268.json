{"sha": "3830ecaa8db798d2727cbdfa4ddf314ff938f268", "node_id": "C_kwDOAAsO6NoAKDM4MzBlY2FhOGRiNzk4ZDI3MjdjYmRmYTRkZGYzMTRmZjkzOGYyNjg", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-08-04T13:24:57Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-08-04T13:24:57Z"}, "message": "Auto merge of #100087 - JakobDegen:mir-patch, r=tmiasko\n\nAvoid invalidating the CFG in `MirPatch`\n\nAs a part of this change, we adjust `MirPatch` to not needlessly create unnecessary resume blocks.\n\nr? `@tmiasko`", "tree": {"sha": "5a1fc180845c469f803d20fc7b8e4be764b5faf1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5a1fc180845c469f803d20fc7b8e4be764b5faf1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3830ecaa8db798d2727cbdfa4ddf314ff938f268", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3830ecaa8db798d2727cbdfa4ddf314ff938f268", "html_url": "https://github.com/rust-lang/rust/commit/3830ecaa8db798d2727cbdfa4ddf314ff938f268", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3830ecaa8db798d2727cbdfa4ddf314ff938f268/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6f18f0a9d4548bc87afff1e4c0fe9081c35002c2", "url": "https://api.github.com/repos/rust-lang/rust/commits/6f18f0a9d4548bc87afff1e4c0fe9081c35002c2", "html_url": "https://github.com/rust-lang/rust/commit/6f18f0a9d4548bc87afff1e4c0fe9081c35002c2"}, {"sha": "efa5eaa5d13ccfa4eb2a7d4b65e7eddd5ca7dd0a", "url": "https://api.github.com/repos/rust-lang/rust/commits/efa5eaa5d13ccfa4eb2a7d4b65e7eddd5ca7dd0a", "html_url": "https://github.com/rust-lang/rust/commit/efa5eaa5d13ccfa4eb2a7d4b65e7eddd5ca7dd0a"}], "stats": {"total": 241, "additions": 32, "deletions": 209}, "files": [{"sha": "15496842d905daff01b32001ee38b4ef6936a5a3", "filename": "compiler/rustc_middle/src/mir/patch.rs", "status": "modified", "additions": 30, "deletions": 35, "changes": 65, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/compiler%2Frustc_middle%2Fsrc%2Fmir%2Fpatch.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/compiler%2Frustc_middle%2Fsrc%2Fmir%2Fpatch.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fmir%2Fpatch.rs?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -11,7 +11,8 @@ pub struct MirPatch<'tcx> {\n     new_blocks: Vec<BasicBlockData<'tcx>>,\n     new_statements: Vec<(Location, StatementKind<'tcx>)>,\n     new_locals: Vec<LocalDecl<'tcx>>,\n-    resume_block: BasicBlock,\n+    resume_block: Option<BasicBlock>,\n+    body_span: Span,\n     next_local: usize,\n }\n \n@@ -23,47 +24,36 @@ impl<'tcx> MirPatch<'tcx> {\n             new_statements: vec![],\n             new_locals: vec![],\n             next_local: body.local_decls.len(),\n-            resume_block: START_BLOCK,\n+            resume_block: None,\n+            body_span: body.span,\n         };\n \n-        // make sure the MIR we create has a resume block. It is\n-        // completely legal to convert jumps to the resume block\n-        // to jumps to None, but we occasionally have to add\n-        // instructions just before that.\n-\n-        let mut resume_block = None;\n-        let mut resume_stmt_block = None;\n+        // Check if we already have a resume block\n         for (bb, block) in body.basic_blocks().iter_enumerated() {\n-            if let TerminatorKind::Resume = block.terminator().kind {\n-                if !block.statements.is_empty() {\n-                    assert!(resume_stmt_block.is_none());\n-                    resume_stmt_block = Some(bb);\n-                } else {\n-                    resume_block = Some(bb);\n-                }\n+            if let TerminatorKind::Resume = block.terminator().kind && block.statements.is_empty() {\n+                result.resume_block = Some(bb);\n                 break;\n             }\n         }\n-        let resume_block = resume_block.unwrap_or_else(|| {\n-            result.new_block(BasicBlockData {\n-                statements: vec![],\n-                terminator: Some(Terminator {\n-                    source_info: SourceInfo::outermost(body.span),\n-                    kind: TerminatorKind::Resume,\n-                }),\n-                is_cleanup: true,\n-            })\n-        });\n-        result.resume_block = resume_block;\n-        if let Some(resume_stmt_block) = resume_stmt_block {\n-            result\n-                .patch_terminator(resume_stmt_block, TerminatorKind::Goto { target: resume_block });\n-        }\n+\n         result\n     }\n \n-    pub fn resume_block(&self) -> BasicBlock {\n-        self.resume_block\n+    pub fn resume_block(&mut self) -> BasicBlock {\n+        if let Some(bb) = self.resume_block {\n+            return bb;\n+        }\n+\n+        let bb = self.new_block(BasicBlockData {\n+            statements: vec![],\n+            terminator: Some(Terminator {\n+                source_info: SourceInfo::outermost(self.body_span),\n+                kind: TerminatorKind::Resume,\n+            }),\n+            is_cleanup: true,\n+        });\n+        self.resume_block = Some(bb);\n+        bb\n     }\n \n     pub fn is_patched(&self, bb: BasicBlock) -> bool {\n@@ -138,12 +128,17 @@ impl<'tcx> MirPatch<'tcx> {\n             self.new_blocks.len(),\n             body.basic_blocks().len()\n         );\n-        body.basic_blocks_mut().extend(self.new_blocks);\n+        let bbs = if self.patch_map.is_empty() && self.new_blocks.is_empty() {\n+            body.basic_blocks.as_mut_preserves_cfg()\n+        } else {\n+            body.basic_blocks.as_mut()\n+        };\n+        bbs.extend(self.new_blocks);\n         body.local_decls.extend(self.new_locals);\n         for (src, patch) in self.patch_map.into_iter_enumerated() {\n             if let Some(patch) = patch {\n                 debug!(\"MirPatch: patching block {:?}\", src);\n-                body[src].terminator_mut().kind = patch;\n+                bbs[src].terminator_mut().kind = patch;\n             }\n         }\n "}, {"sha": "5c441c5b194923e7f4ed8427378c054111fd7b50", "filename": "compiler/rustc_mir_transform/src/remove_noop_landing_pads.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/compiler%2Frustc_mir_transform%2Fsrc%2Fremove_noop_landing_pads.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/compiler%2Frustc_mir_transform%2Fsrc%2Fremove_noop_landing_pads.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir_transform%2Fsrc%2Fremove_noop_landing_pads.rs?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -83,9 +83,9 @@ impl RemoveNoopLandingPads {\n     fn remove_nop_landing_pads(&self, body: &mut Body<'_>) {\n         debug!(\"body: {:#?}\", body);\n \n-        // make sure there's a single resume block\n+        // make sure there's a resume block\n         let resume_block = {\n-            let patch = MirPatch::new(body);\n+            let mut patch = MirPatch::new(body);\n             let resume_block = patch.resume_block();\n             patch.apply(body);\n             resume_block"}, {"sha": "de0c03bb70b7e48632adb34893d8fd5393fa1804", "filename": "src/test/mir-opt/derefer_complex_case.main.Derefer.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Fderefer_complex_case.main.Derefer.diff", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Fderefer_complex_case.main.Derefer.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fderefer_complex_case.main.Derefer.diff?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -102,10 +102,6 @@\n           StorageDead(_6);                 // scope 1 at $DIR/derefer_complex_case.rs:+1:39: +1:40\n           _5 = const ();                   // scope 1 at $DIR/derefer_complex_case.rs:+1:5: +1:40\n           goto -> bb2;                     // scope 1 at $DIR/derefer_complex_case.rs:+1:5: +1:40\n-+     }\n-+ \n-+     bb8 (cleanup): {\n-+         resume;                          // scope 0 at $DIR/derefer_complex_case.rs:+0:1: +2:2\n       }\n   }\n   "}, {"sha": "0a56ee5e454a3b8e1a14dd3fec7b1e5f3eefeb03", "filename": "src/test/mir-opt/derefer_terminator_test.main.Derefer.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Fderefer_terminator_test.main.Derefer.diff", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Fderefer_terminator_test.main.Derefer.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fderefer_terminator_test.main.Derefer.diff?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -94,10 +94,6 @@\n           StorageDead(_2);                 // scope 1 at $DIR/derefer_terminator_test.rs:+8:1: +8:2\n           StorageDead(_1);                 // scope 0 at $DIR/derefer_terminator_test.rs:+8:1: +8:2\n           return;                          // scope 0 at $DIR/derefer_terminator_test.rs:+8:2: +8:2\n-+     }\n-+ \n-+     bb6 (cleanup): {\n-+         resume;                          // scope 0 at $DIR/derefer_terminator_test.rs:+0:1: +8:2\n       }\n   }\n   "}, {"sha": "6c2047e216c05ff11557fd0126cf42a2db260e95", "filename": "src/test/mir-opt/derefer_test.main.Derefer.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Fderefer_test.main.Derefer.diff", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Fderefer_test.main.Derefer.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fderefer_test.main.Derefer.diff?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -49,10 +49,6 @@\n           StorageDead(_2);                 // scope 1 at $DIR/derefer_test.rs:+5:1: +5:2\n           StorageDead(_1);                 // scope 0 at $DIR/derefer_test.rs:+5:1: +5:2\n           return;                          // scope 0 at $DIR/derefer_test.rs:+5:2: +5:2\n-+     }\n-+ \n-+     bb1 (cleanup): {\n-+         resume;                          // scope 0 at $DIR/derefer_test.rs:+0:1: +5:2\n       }\n   }\n   "}, {"sha": "e2dceecfd7c923ed8cd49a8be9cb1c11108f523d", "filename": "src/test/mir-opt/derefer_test_multiple.main.Derefer.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Fderefer_test_multiple.main.Derefer.diff", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Fderefer_test_multiple.main.Derefer.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fderefer_test_multiple.main.Derefer.diff?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -87,10 +87,6 @@\n           StorageDead(_2);                 // scope 1 at $DIR/derefer_test_multiple.rs:+7:1: +7:2\n           StorageDead(_1);                 // scope 0 at $DIR/derefer_test_multiple.rs:+7:1: +7:2\n           return;                          // scope 0 at $DIR/derefer_test_multiple.rs:+7:2: +7:2\n-+     }\n-+ \n-+     bb1 (cleanup): {\n-+         resume;                          // scope 0 at $DIR/derefer_test_multiple.rs:+0:1: +7:2\n       }\n   }\n   "}, {"sha": "8eae04c4dd4a696386f53dddc2c4a2266594f758", "filename": "src/test/mir-opt/inline/dyn_trait.get_query.Inline.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Fdyn_trait.get_query.Inline.diff", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Fdyn_trait.get_query.Inline.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Fdyn_trait.get_query.Inline.diff?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -57,10 +57,6 @@\n           StorageDead(_4);                 // scope 1 at $DIR/dyn-trait.rs:+2:24: +2:25\n           StorageDead(_2);                 // scope 0 at $DIR/dyn-trait.rs:+3:1: +3:2\n           return;                          // scope 0 at $DIR/dyn-trait.rs:+3:2: +3:2\n-+     }\n-+ \n-+     bb3 (cleanup): {\n-+         resume;                          // scope 0 at $DIR/dyn-trait.rs:+0:1: +3:2\n       }\n   }\n   "}, {"sha": "e7c5972f4291ffa380c93b93b2396f28c82283b4", "filename": "src/test/mir-opt/inline/dyn_trait.try_execute_query.Inline.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Fdyn_trait.try_execute_query.Inline.diff", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Fdyn_trait.try_execute_query.Inline.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Fdyn_trait.try_execute_query.Inline.diff?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -32,10 +32,6 @@\n +         StorageDead(_4);                 // scope 1 at $DIR/dyn-trait.rs:+0:21: +0:22\n           StorageDead(_2);                 // scope 0 at $DIR/dyn-trait.rs:+1:15: +1:16\n           return;                          // scope 0 at $DIR/dyn-trait.rs:+2:2: +2:2\n-+     }\n-+ \n-+     bb2 (cleanup): {\n-+         resume;                          // scope 0 at $DIR/dyn-trait.rs:+0:1: +2:2\n       }\n   }\n   "}, {"sha": "6302252581899a41f6d1ab28104954d238921926", "filename": "src/test/mir-opt/inline/inline_any_operand.bar.Inline.after.mir", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_any_operand.bar.Inline.after.mir", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_any_operand.bar.Inline.after.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Finline_any_operand.bar.Inline.after.mir?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -41,8 +41,4 @@ fn bar() -> bool {\n         StorageDead(_1);                 // scope 0 at $DIR/inline-any-operand.rs:+3:1: +3:2\n         return;                          // scope 0 at $DIR/inline-any-operand.rs:+3:2: +3:2\n     }\n-\n-    bb1 (cleanup): {\n-        resume;                          // scope 0 at $DIR/inline-any-operand.rs:+0:1: +3:2\n-    }\n }"}, {"sha": "1fadd2464798d9114ccaf23b36b8e0cd6f5c8565", "filename": "src/test/mir-opt/inline/inline_closure.foo.Inline.after.mir", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_closure.foo.Inline.after.mir", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_closure.foo.Inline.after.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Finline_closure.foo.Inline.after.mir?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -46,8 +46,4 @@ fn foo(_1: T, _2: i32) -> i32 {\n         StorageDead(_3);                 // scope 0 at $DIR/inline-closure.rs:+3:1: +3:2\n         return;                          // scope 0 at $DIR/inline-closure.rs:+3:2: +3:2\n     }\n-\n-    bb1 (cleanup): {\n-        resume;                          // scope 0 at $DIR/inline-closure.rs:+0:1: +3:2\n-    }\n }"}, {"sha": "4069e9f89c8d8fc92f082d61b5c493c3b86fcc17", "filename": "src/test/mir-opt/inline/inline_closure_borrows_arg.foo.Inline.after.mir", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_closure_borrows_arg.foo.Inline.after.mir", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_closure_borrows_arg.foo.Inline.after.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Finline_closure_borrows_arg.foo.Inline.after.mir?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -53,8 +53,4 @@ fn foo(_1: T, _2: &i32) -> i32 {\n         StorageDead(_3);                 // scope 0 at $DIR/inline-closure-borrows-arg.rs:+6:1: +6:2\n         return;                          // scope 0 at $DIR/inline-closure-borrows-arg.rs:+6:2: +6:2\n     }\n-\n-    bb1 (cleanup): {\n-        resume;                          // scope 0 at $DIR/inline-closure-borrows-arg.rs:+0:1: +6:2\n-    }\n }"}, {"sha": "d60b064600f566dd6a685ca3b8c97e3955bbd91a", "filename": "src/test/mir-opt/inline/inline_closure_captures.foo.Inline.after.mir", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_closure_captures.foo.Inline.after.mir", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_closure_captures.foo.Inline.after.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Finline_closure_captures.foo.Inline.after.mir?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -66,8 +66,4 @@ fn foo(_1: T, _2: i32) -> (i32, T) {\n         StorageDead(_3);                 // scope 0 at $DIR/inline-closure-captures.rs:+3:1: +3:2\n         return;                          // scope 0 at $DIR/inline-closure-captures.rs:+3:2: +3:2\n     }\n-\n-    bb1 (cleanup): {\n-        resume;                          // scope 0 at $DIR/inline-closure-captures.rs:+0:1: +3:2\n-    }\n }"}, {"sha": "cf800ba112945aa1b5546d89b5986f1dd10d96da", "filename": "src/test/mir-opt/inline/inline_compatibility.inlined_no_sanitize.Inline.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_compatibility.inlined_no_sanitize.Inline.diff", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_compatibility.inlined_no_sanitize.Inline.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Finline_compatibility.inlined_no_sanitize.Inline.diff?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -19,10 +19,6 @@\n           StorageDead(_1);                 // scope 0 at $DIR/inline-compatibility.rs:+1:18: +1:19\n           _0 = const ();                   // scope 0 at $DIR/inline-compatibility.rs:+0:37: +2:2\n           return;                          // scope 0 at $DIR/inline-compatibility.rs:+2:2: +2:2\n-+     }\n-+ \n-+     bb1 (cleanup): {\n-+         resume;                          // scope 0 at $DIR/inline-compatibility.rs:+0:1: +2:2\n       }\n   }\n   "}, {"sha": "a45f959026d1c88def26fc541ac2c52484d4787a", "filename": "src/test/mir-opt/inline/inline_compatibility.inlined_target_feature.Inline.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_compatibility.inlined_target_feature.Inline.diff", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_compatibility.inlined_target_feature.Inline.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Finline_compatibility.inlined_target_feature.Inline.diff?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -19,10 +19,6 @@\n           StorageDead(_1);                 // scope 0 at $DIR/inline-compatibility.rs:+1:21: +1:22\n           _0 = const ();                   // scope 0 at $DIR/inline-compatibility.rs:+0:40: +2:2\n           return;                          // scope 0 at $DIR/inline-compatibility.rs:+2:2: +2:2\n-+     }\n-+ \n-+     bb1 (cleanup): {\n-+         resume;                          // scope 0 at $DIR/inline-compatibility.rs:+0:1: +2:2\n       }\n   }\n   "}, {"sha": "b1c476362de89c04a7403954ad96135cf76f1659", "filename": "src/test/mir-opt/inline/inline_cycle.one.Inline.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_cycle.one.Inline.diff", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_cycle.one.Inline.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Finline_cycle.one.Inline.diff?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -25,10 +25,6 @@\n           StorageDead(_1);                 // scope 0 at $DIR/inline-cycle.rs:+1:24: +1:25\n           _0 = const ();                   // scope 0 at $DIR/inline-cycle.rs:+0:10: +2:2\n           return;                          // scope 0 at $DIR/inline-cycle.rs:+2:2: +2:2\n-+     }\n-+ \n-+     bb2 (cleanup): {\n-+         resume;                          // scope 0 at $DIR/inline-cycle.rs:+0:1: +2:2\n       }\n   }\n   "}, {"sha": "dc890a365113a5115074936e75f34b015f16cdd0", "filename": "src/test/mir-opt/inline/inline_cycle.two.Inline.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_cycle.two.Inline.diff", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_cycle.two.Inline.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Finline_cycle.two.Inline.diff?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -50,10 +50,6 @@\n           StorageDead(_1);                 // scope 0 at $DIR/inline-cycle.rs:+1:12: +1:13\n           _0 = const ();                   // scope 0 at $DIR/inline-cycle.rs:+0:10: +2:2\n           return;                          // scope 0 at $DIR/inline-cycle.rs:+2:2: +2:2\n-+     }\n-+ \n-+     bb2 (cleanup): {\n-+         resume;                          // scope 0 at $DIR/inline-cycle.rs:+0:1: +2:2\n       }\n   }\n   "}, {"sha": "082f57e59a0135253728d56c4e41eba8c106eb74", "filename": "src/test/mir-opt/inline/inline_cycle_generic.main.Inline.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_cycle_generic.main.Inline.diff", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_cycle_generic.main.Inline.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Finline_cycle_generic.main.Inline.diff?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -27,10 +27,6 @@\n           StorageDead(_1);                 // scope 0 at $DIR/inline-cycle-generic.rs:+1:24: +1:25\n           _0 = const ();                   // scope 0 at $DIR/inline-cycle-generic.rs:+0:11: +2:2\n           return;                          // scope 0 at $DIR/inline-cycle-generic.rs:+2:2: +2:2\n-+     }\n-+ \n-+     bb2 (cleanup): {\n-+         resume;                          // scope 0 at $DIR/inline-cycle-generic.rs:+0:1: +2:2\n       }\n   }\n   "}, {"sha": "6b24b3e16979049d4f40f346d83221ef803366d9", "filename": "src/test/mir-opt/inline/inline_diverging.f.Inline.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_diverging.f.Inline.diff", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_diverging.f.Inline.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Finline_diverging.f.Inline.diff?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -19,10 +19,6 @@\n + \n +     bb1: {\n +         goto -> bb1;                     // scope 1 at $DIR/inline-diverging.rs:+32:5: +32:12\n-+     }\n-+ \n-+     bb2 (cleanup): {\n-+         resume;                          // scope 0 at $DIR/inline-diverging.rs:+0:1: +2:2\n       }\n   }\n   "}, {"sha": "a25f1454fac612bb835a9896363c4113e9e76b16", "filename": "src/test/mir-opt/inline/inline_diverging.g.Inline.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_diverging.g.Inline.diff", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_diverging.g.Inline.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Finline_diverging.g.Inline.diff?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -44,10 +44,6 @@\n +                                          // mir::Constant\n +                                          // + span: $SRC_DIR/std/src/panic.rs:LL:COL\n +                                          // + literal: Const { ty: &str, val: Value(Slice(..)) }\n-+     }\n-+ \n-+     bb3 (cleanup): {\n-+         resume;                          // scope 0 at $DIR/inline-diverging.rs:+0:1: +6:2\n       }\n   }\n   "}, {"sha": "8759f3d02fc30742f6c9de0b16e297bc08aa9593", "filename": "src/test/mir-opt/inline/inline_diverging.h.Inline.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_diverging.h.Inline.diff", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_diverging.h.Inline.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Finline_diverging.h.Inline.diff?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -51,10 +51,6 @@\n + \n +     bb1: {\n +         goto -> bb1;                     // scope 5 at $DIR/inline-diverging.rs:+18:5: +18:12\n-+     }\n-+ \n-+     bb2 (cleanup): {\n-+         resume;                          // scope 0 at $DIR/inline-diverging.rs:+0:1: +2:2\n       }\n   }\n   "}, {"sha": "076509df34949f99f78616cdd738e51dd958109d", "filename": "src/test/mir-opt/inline/inline_instruction_set.default.Inline.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_instruction_set.default.Inline.diff", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_instruction_set.default.Inline.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Finline_instruction_set.default.Inline.diff?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -39,10 +39,6 @@\n           StorageDead(_3);                 // scope 0 at $DIR/inline-instruction-set.rs:+3:30: +3:31\n           _0 = const ();                   // scope 0 at $DIR/inline-instruction-set.rs:+0:18: +4:2\n           return;                          // scope 0 at $DIR/inline-instruction-set.rs:+4:2: +4:2\n-+     }\n-+ \n-+     bb3 (cleanup): {\n-+         resume;                          // scope 0 at $DIR/inline-instruction-set.rs:+0:1: +4:2\n       }\n   }\n   "}, {"sha": "b275d08e05f92c3fc4b9c24ea17de3c589b2d6df", "filename": "src/test/mir-opt/inline/inline_instruction_set.t32.Inline.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_instruction_set.t32.Inline.diff", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_instruction_set.t32.Inline.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Finline_instruction_set.t32.Inline.diff?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -41,10 +41,6 @@\n           StorageDead(_3);                 // scope 0 at $DIR/inline-instruction-set.rs:+5:30: +5:31\n           _0 = const ();                   // scope 0 at $DIR/inline-instruction-set.rs:+0:14: +6:2\n           return;                          // scope 0 at $DIR/inline-instruction-set.rs:+6:2: +6:2\n-+     }\n-+ \n-+     bb3 (cleanup): {\n-+         resume;                          // scope 0 at $DIR/inline-instruction-set.rs:+0:1: +6:2\n       }\n   }\n   "}, {"sha": "275493066ee323349cc5f3fcf1cfdc7f0f0885e9", "filename": "src/test/mir-opt/inline/inline_options.main.Inline.after.mir", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_options.main.Inline.after.mir", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_options.main.Inline.after.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Finline_options.main.Inline.after.mir?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -52,8 +52,4 @@ fn main() -> () {\n         _0 = const ();                   // scope 0 at $DIR/inline-options.rs:+0:11: +3:2\n         return;                          // scope 0 at $DIR/inline-options.rs:+3:2: +3:2\n     }\n-\n-    bb5 (cleanup): {\n-        resume;                          // scope 0 at $DIR/inline-options.rs:+0:1: +3:2\n-    }\n }"}, {"sha": "768608564d666ab9efe022f1a0b65f6a49f24ead", "filename": "src/test/mir-opt/inline/inline_retag.bar.Inline.after.mir", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_retag.bar.Inline.after.mir", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_retag.bar.Inline.after.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Finline_retag.bar.Inline.after.mir?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -69,8 +69,4 @@ fn bar() -> bool {\n         StorageDead(_4);                 // scope 0 at $DIR/inline-retag.rs:+3:1: +3:2\n         return;                          // scope 0 at $DIR/inline-retag.rs:+3:2: +3:2\n     }\n-\n-    bb1 (cleanup): {\n-        resume;                          // scope 0 at $DIR/inline-retag.rs:+0:1: +3:2\n-    }\n }"}, {"sha": "25ca05893b2ee9b3662b8d27b129230b20ae368b", "filename": "src/test/mir-opt/inline/inline_shims.clone.Inline.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_shims.clone.Inline.diff", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_shims.clone.Inline.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Finline_shims.clone.Inline.diff?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -21,10 +21,6 @@\n +         _0 = (*_2);                      // scope 1 at $SRC_DIR/core/src/clone.rs:LL:COL\n           StorageDead(_2);                 // scope 0 at $DIR/inline-shims.rs:+1:13: +1:14\n           return;                          // scope 0 at $DIR/inline-shims.rs:+2:2: +2:2\n-+     }\n-+ \n-+     bb1 (cleanup): {\n-+         resume;                          // scope 0 at $DIR/inline-shims.rs:+0:1: +2:2\n       }\n   }\n   "}, {"sha": "f7b1cde80bdc743db99ae20cf6aa5b234ccda5fa", "filename": "src/test/mir-opt/inline/inline_shims.drop.Inline.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_shims.drop.Inline.diff", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_shims.drop.Inline.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Finline_shims.drop.Inline.diff?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -51,10 +51,6 @@\n + \n +     bb3: {\n +         drop((((*_5) as Some).0: B)) -> bb2; // scope 3 at $SRC_DIR/core/src/ptr/mod.rs:LL:COL\n-+     }\n-+ \n-+     bb4 (cleanup): {\n-+         resume;                          // scope 0 at $DIR/inline-shims.rs:+0:1: +3:2\n       }\n   }\n   "}, {"sha": "106291b36e3973a5b84d613e3532f103db3c4987", "filename": "src/test/mir-opt/inline/inline_specialization.main.Inline.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_specialization.main.Inline.diff", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_specialization.main.Inline.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Finline_specialization.main.Inline.diff?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -23,10 +23,6 @@\n           _0 = const ();                   // scope 0 at $DIR/inline-specialization.rs:+0:11: +2:2\n           StorageDead(_1);                 // scope 0 at $DIR/inline-specialization.rs:+2:1: +2:2\n           return;                          // scope 0 at $DIR/inline-specialization.rs:+2:2: +2:2\n-+     }\n-+ \n-+     bb1 (cleanup): {\n-+         resume;                          // scope 0 at $DIR/inline-specialization.rs:+0:1: +2:2\n       }\n   }\n   "}, {"sha": "116ae4e361be5afd8b92069f2fe3635071e05d1d", "filename": "src/test/mir-opt/inline/inline_trait_method_2.test2.Inline.after.mir", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_trait_method_2.test2.Inline.after.mir", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Finline_trait_method_2.test2.Inline.after.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Finline_trait_method_2.test2.Inline.after.mir?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -29,8 +29,4 @@ fn test2(_1: &dyn X) -> bool {\n         StorageDead(_2);                 // scope 0 at $DIR/inline-trait-method_2.rs:+1:11: +1:12\n         return;                          // scope 0 at $DIR/inline-trait-method_2.rs:+2:2: +2:2\n     }\n-\n-    bb2 (cleanup): {\n-        resume;                          // scope 0 at $DIR/inline-trait-method_2.rs:+0:1: +2:2\n-    }\n }"}, {"sha": "5168ae031f04c956c20610bb11aa93aa53c533cd", "filename": "src/test/mir-opt/inline/issue_58867_inline_as_ref_as_mut.a.Inline.after.mir", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Fissue_58867_inline_as_ref_as_mut.a.Inline.after.mir", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Fissue_58867_inline_as_ref_as_mut.a.Inline.after.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Fissue_58867_inline_as_ref_as_mut.a.Inline.after.mir?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -27,8 +27,4 @@ fn a(_1: &mut [T]) -> &mut [T] {\n         StorageDead(_2);                 // scope 0 at $DIR/issue-58867-inline-as-ref-as-mut.rs:+2:1: +2:2\n         return;                          // scope 0 at $DIR/issue-58867-inline-as-ref-as-mut.rs:+2:2: +2:2\n     }\n-\n-    bb1 (cleanup): {\n-        resume;                          // scope 0 at $DIR/issue-58867-inline-as-ref-as-mut.rs:+0:1: +2:2\n-    }\n }"}, {"sha": "4006dd15a42e94fe1ed65c8539513cf5639e6581", "filename": "src/test/mir-opt/inline/issue_58867_inline_as_ref_as_mut.b.Inline.after.mir", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Fissue_58867_inline_as_ref_as_mut.b.Inline.after.mir", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Fissue_58867_inline_as_ref_as_mut.b.Inline.after.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Fissue_58867_inline_as_ref_as_mut.b.Inline.after.mir?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -39,8 +39,4 @@ fn b(_1: &mut Box<T>) -> &mut T {\n         StorageDead(_2);                 // scope 0 at $DIR/issue-58867-inline-as-ref-as-mut.rs:+2:1: +2:2\n         return;                          // scope 0 at $DIR/issue-58867-inline-as-ref-as-mut.rs:+2:2: +2:2\n     }\n-\n-    bb1 (cleanup): {\n-        resume;                          // scope 0 at $DIR/issue-58867-inline-as-ref-as-mut.rs:+0:1: +2:2\n-    }\n }"}, {"sha": "c7f20ff98ff72204ecdc9d3d79244ab0f3295625", "filename": "src/test/mir-opt/inline/issue_58867_inline_as_ref_as_mut.c.Inline.after.mir", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Fissue_58867_inline_as_ref_as_mut.c.Inline.after.mir", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Fissue_58867_inline_as_ref_as_mut.c.Inline.after.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Fissue_58867_inline_as_ref_as_mut.c.Inline.after.mir?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -19,8 +19,4 @@ fn c(_1: &[T]) -> &[T] {\n         StorageDead(_2);                 // scope 0 at $DIR/issue-58867-inline-as-ref-as-mut.rs:+2:1: +2:2\n         return;                          // scope 0 at $DIR/issue-58867-inline-as-ref-as-mut.rs:+2:2: +2:2\n     }\n-\n-    bb1 (cleanup): {\n-        resume;                          // scope 0 at $DIR/issue-58867-inline-as-ref-as-mut.rs:+0:1: +2:2\n-    }\n }"}, {"sha": "e516269c1407a972cc4fc57ddd7adbfd478a5659", "filename": "src/test/mir-opt/inline/issue_58867_inline_as_ref_as_mut.d.Inline.after.mir", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Fissue_58867_inline_as_ref_as_mut.d.Inline.after.mir", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Fissue_58867_inline_as_ref_as_mut.d.Inline.after.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Fissue_58867_inline_as_ref_as_mut.d.Inline.after.mir?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -27,8 +27,4 @@ fn d(_1: &Box<T>) -> &T {\n         StorageDead(_2);                 // scope 0 at $DIR/issue-58867-inline-as-ref-as-mut.rs:+2:1: +2:2\n         return;                          // scope 0 at $DIR/issue-58867-inline-as-ref-as-mut.rs:+2:2: +2:2\n     }\n-\n-    bb1 (cleanup): {\n-        resume;                          // scope 0 at $DIR/issue-58867-inline-as-ref-as-mut.rs:+0:1: +2:2\n-    }\n }"}, {"sha": "fca53a72f88209cf09fd23c92c0ab79861c19205", "filename": "src/test/mir-opt/inline/issue_76997_inline_scopes_parenting.main.Inline.after.mir", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Fissue_76997_inline_scopes_parenting.main.Inline.after.mir", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Finline%2Fissue_76997_inline_scopes_parenting.main.Inline.after.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Fissue_76997_inline_scopes_parenting.main.Inline.after.mir?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -39,8 +39,4 @@ fn main() -> () {\n         StorageDead(_1);                 // scope 0 at $DIR/issue-76997-inline-scopes-parenting.rs:+3:1: +3:2\n         return;                          // scope 0 at $DIR/issue-76997-inline-scopes-parenting.rs:+3:2: +3:2\n     }\n-\n-    bb1 (cleanup): {\n-        resume;                          // scope 0 at $DIR/issue-76997-inline-scopes-parenting.rs:+0:1: +3:2\n-    }\n }"}, {"sha": "5c635e2220ed707ce1de3fa180afae64e08f1413", "filename": "src/test/mir-opt/lower_intrinsics.align_of.LowerIntrinsics.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Flower_intrinsics.align_of.LowerIntrinsics.diff", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Flower_intrinsics.align_of.LowerIntrinsics.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Flower_intrinsics.align_of.LowerIntrinsics.diff?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -16,9 +16,5 @@\n       bb1: {\n           return;                          // scope 0 at $DIR/lower_intrinsics.rs:+2:2: +2:2\n       }\n-  \n-      bb2 (cleanup): {\n-          resume;                          // scope 0 at $DIR/lower_intrinsics.rs:+0:1: +2:2\n-      }\n   }\n   "}, {"sha": "8a80de32f3ae36d4c7916cc1849c93b4abed061a", "filename": "src/test/mir-opt/lower_intrinsics.discriminant.LowerIntrinsics.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Flower_intrinsics.discriminant.LowerIntrinsics.diff", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Flower_intrinsics.discriminant.LowerIntrinsics.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Flower_intrinsics.discriminant.LowerIntrinsics.diff?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -111,9 +111,5 @@\n       bb5: {\n           return;                          // scope 0 at $DIR/lower_intrinsics.rs:+5:2: +5:2\n       }\n-  \n-      bb6 (cleanup): {\n-          resume;                          // scope 0 at $DIR/lower_intrinsics.rs:+0:1: +5:2\n-      }\n   }\n   "}, {"sha": "e6a2f6512f55af51df45fa5cc4b7a7ae8ece4190", "filename": "src/test/mir-opt/lower_intrinsics.forget.LowerIntrinsics.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Flower_intrinsics.forget.LowerIntrinsics.diff", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Flower_intrinsics.forget.LowerIntrinsics.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Flower_intrinsics.forget.LowerIntrinsics.diff?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -25,9 +25,5 @@\n       bb2: {\n           return;                          // scope 0 at $DIR/lower_intrinsics.rs:+2:2: +2:2\n       }\n-  \n-      bb3 (cleanup): {\n-          resume;                          // scope 0 at $DIR/lower_intrinsics.rs:+0:1: +2:2\n-      }\n   }\n   "}, {"sha": "1ab2f2a0a046828c32577c7ce3721661dfa879bd", "filename": "src/test/mir-opt/lower_intrinsics.non_const.LowerIntrinsics.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Flower_intrinsics.non_const.LowerIntrinsics.diff", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Flower_intrinsics.non_const.LowerIntrinsics.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Flower_intrinsics.non_const.LowerIntrinsics.diff?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -27,9 +27,5 @@\n           StorageDead(_1);                 // scope 0 at $DIR/lower_intrinsics.rs:+4:1: +4:2\n           return;                          // scope 0 at $DIR/lower_intrinsics.rs:+4:2: +4:2\n       }\n-  \n-      bb2 (cleanup): {\n-          resume;                          // scope 0 at $DIR/lower_intrinsics.rs:+0:1: +4:2\n-      }\n   }\n   "}, {"sha": "11b27976b551c9f171e11cbe7f9b0a0edb3ce07f", "filename": "src/test/mir-opt/lower_intrinsics.size_of.LowerIntrinsics.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Flower_intrinsics.size_of.LowerIntrinsics.diff", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Flower_intrinsics.size_of.LowerIntrinsics.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Flower_intrinsics.size_of.LowerIntrinsics.diff?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -16,9 +16,5 @@\n       bb1: {\n           return;                          // scope 0 at $DIR/lower_intrinsics.rs:+2:2: +2:2\n       }\n-  \n-      bb2 (cleanup): {\n-          resume;                          // scope 0 at $DIR/lower_intrinsics.rs:+0:1: +2:2\n-      }\n   }\n   "}, {"sha": "ac077e85b04f357a3ed5eab40a6182c2ec3e63b9", "filename": "src/test/mir-opt/lower_intrinsics.unreachable.LowerIntrinsics.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Flower_intrinsics.unreachable.LowerIntrinsics.diff", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Flower_intrinsics.unreachable.LowerIntrinsics.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Flower_intrinsics.unreachable.LowerIntrinsics.diff?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -18,9 +18,5 @@\n -                                          // + literal: Const { ty: unsafe extern \"rust-intrinsic\" fn() -> ! {std::intrinsics::unreachable}, val: Value(<ZST>) }\n +         unreachable;                     // scope 1 at $DIR/lower_intrinsics.rs:+1:14: +1:45\n       }\n-  \n-      bb1 (cleanup): {\n-          resume;                          // scope 0 at $DIR/lower_intrinsics.rs:+0:1: +2:2\n-      }\n   }\n   "}, {"sha": "e0a5416b22b5fbe431578dadf506d8c7fab940c9", "filename": "src/test/mir-opt/lower_intrinsics.wrapping.LowerIntrinsics.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Flower_intrinsics.wrapping.LowerIntrinsics.diff", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Flower_intrinsics.wrapping.LowerIntrinsics.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Flower_intrinsics.wrapping.LowerIntrinsics.diff?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -79,9 +79,5 @@\n           StorageDead(_3);                 // scope 0 at $DIR/lower_intrinsics.rs:+4:1: +4:2\n           return;                          // scope 0 at $DIR/lower_intrinsics.rs:+4:2: +4:2\n       }\n-  \n-      bb4 (cleanup): {\n-          resume;                          // scope 0 at $DIR/lower_intrinsics.rs:+0:1: +4:2\n-      }\n   }\n   "}, {"sha": "750aaa88b1c48b53fb3c2cb4fffae769d41f7119", "filename": "src/test/mir-opt/remove_storage_markers.main.RemoveStorageMarkers.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Fremove_storage_markers.main.RemoveStorageMarkers.diff", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Fremove_storage_markers.main.RemoveStorageMarkers.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fremove_storage_markers.main.RemoveStorageMarkers.diff?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -96,9 +96,5 @@\n           _10 = discriminant(_7);          // scope 2 at $DIR/remove_storage_markers.rs:+2:14: +2:19\n           switchInt(move _10) -> [0_isize: bb3, otherwise: bb2]; // scope 2 at $DIR/remove_storage_markers.rs:+2:14: +2:19\n       }\n-  \n-      bb5 (cleanup): {\n-          resume;                          // scope 0 at $DIR/remove_storage_markers.rs:+0:1: +5:2\n-      }\n   }\n   "}, {"sha": "087f76dbda83b42787018a3e445d7b43c9d5a0f2", "filename": "src/test/mir-opt/remove_unneeded_drops.opt.RemoveUnneededDrops.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.opt.RemoveUnneededDrops.diff", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.opt.RemoveUnneededDrops.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.opt.RemoveUnneededDrops.diff?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -22,10 +22,6 @@\n           StorageDead(_2);                 // scope 0 at $DIR/remove_unneeded_drops.rs:+1:12: +1:13\n -         nop;                             // scope 0 at $DIR/remove_unneeded_drops.rs:+0:17: +2:2\n           return;                          // scope 0 at $DIR/remove_unneeded_drops.rs:+2:2: +2:2\n--     }\n-- \n--     bb2 (cleanup): {\n--         resume;                          // scope 0 at $DIR/remove_unneeded_drops.rs:+0:1: +2:2\n       }\n   }\n   "}, {"sha": "933d6895f45946ef5293ee87167b43f68f258623", "filename": "src/test/mir-opt/remove_unneeded_drops.opt_generic_copy.RemoveUnneededDrops.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.opt_generic_copy.RemoveUnneededDrops.diff", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.opt_generic_copy.RemoveUnneededDrops.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.opt_generic_copy.RemoveUnneededDrops.diff?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -22,10 +22,6 @@\n           StorageDead(_2);                 // scope 0 at $DIR/remove_unneeded_drops.rs:+1:12: +1:13\n -         nop;                             // scope 0 at $DIR/remove_unneeded_drops.rs:+0:36: +2:2\n           return;                          // scope 0 at $DIR/remove_unneeded_drops.rs:+2:2: +2:2\n--     }\n-- \n--     bb2 (cleanup): {\n--         resume;                          // scope 0 at $DIR/remove_unneeded_drops.rs:+0:1: +2:2\n       }\n   }\n   "}, {"sha": "452cc8a9c26a7f35235e08eca58ba71ce0aabfae", "filename": "src/test/mir-opt/simplify_arm.id_try.SimplifyArmIdentity.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Fsimplify_arm.id_try.SimplifyArmIdentity.diff", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Fsimplify_arm.id_try.SimplifyArmIdentity.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fsimplify_arm.id_try.SimplifyArmIdentity.diff?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -85,9 +85,5 @@\n       bb4: {\n           return;                          // scope 0 at $DIR/simplify-arm.rs:+6:2: +6:2\n       }\n-  \n-      bb5 (cleanup): {\n-          resume;                          // scope 0 at $DIR/simplify-arm.rs:+0:1: +6:2\n-      }\n   }\n   "}, {"sha": "5d7d4ba7c3d8bcd3f0cfd806ce98a8d59632aed9", "filename": "src/test/mir-opt/simplify_arm.id_try.SimplifyBranchSame.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Fsimplify_arm.id_try.SimplifyBranchSame.diff", "raw_url": "https://github.com/rust-lang/rust/raw/3830ecaa8db798d2727cbdfa4ddf314ff938f268/src%2Ftest%2Fmir-opt%2Fsimplify_arm.id_try.SimplifyBranchSame.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fsimplify_arm.id_try.SimplifyBranchSame.diff?ref=3830ecaa8db798d2727cbdfa4ddf314ff938f268", "patch": "@@ -85,9 +85,5 @@\n       bb4: {\n           return;                          // scope 0 at $DIR/simplify-arm.rs:+6:2: +6:2\n       }\n-  \n-      bb5 (cleanup): {\n-          resume;                          // scope 0 at $DIR/simplify-arm.rs:+0:1: +6:2\n-      }\n   }\n   "}]}