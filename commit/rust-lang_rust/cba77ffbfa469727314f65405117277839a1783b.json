{"sha": "cba77ffbfa469727314f65405117277839a1783b", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNiYTc3ZmZiZmE0Njk3MjczMTRmNjU0MDUxMTcyNzc4MzlhMTc4M2I=", "commit": {"author": {"name": "Lindsey Kuper", "email": "lindsey@rockstargirl.org", "date": "2012-06-06T21:28:59Z"}, "committer": {"name": "Lindsey Kuper", "email": "lindsey@rockstargirl.org", "date": "2012-06-06T21:51:13Z"}, "message": "syntax: More grammatical error message", "tree": {"sha": "11139ec29c4744b8cf1fc6b59555a299aa9517e6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/11139ec29c4744b8cf1fc6b59555a299aa9517e6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/cba77ffbfa469727314f65405117277839a1783b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/cba77ffbfa469727314f65405117277839a1783b", "html_url": "https://github.com/rust-lang/rust/commit/cba77ffbfa469727314f65405117277839a1783b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/cba77ffbfa469727314f65405117277839a1783b/comments", "author": {"login": "lkuper", "id": 535218, "node_id": "MDQ6VXNlcjUzNTIxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/535218?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lkuper", "html_url": "https://github.com/lkuper", "followers_url": "https://api.github.com/users/lkuper/followers", "following_url": "https://api.github.com/users/lkuper/following{/other_user}", "gists_url": "https://api.github.com/users/lkuper/gists{/gist_id}", "starred_url": "https://api.github.com/users/lkuper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lkuper/subscriptions", "organizations_url": "https://api.github.com/users/lkuper/orgs", "repos_url": "https://api.github.com/users/lkuper/repos", "events_url": "https://api.github.com/users/lkuper/events{/privacy}", "received_events_url": "https://api.github.com/users/lkuper/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lkuper", "id": 535218, "node_id": "MDQ6VXNlcjUzNTIxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/535218?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lkuper", "html_url": "https://github.com/lkuper", "followers_url": "https://api.github.com/users/lkuper/followers", "following_url": "https://api.github.com/users/lkuper/following{/other_user}", "gists_url": "https://api.github.com/users/lkuper/gists{/gist_id}", "starred_url": "https://api.github.com/users/lkuper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lkuper/subscriptions", "organizations_url": "https://api.github.com/users/lkuper/orgs", "repos_url": "https://api.github.com/users/lkuper/repos", "events_url": "https://api.github.com/users/lkuper/events{/privacy}", "received_events_url": "https://api.github.com/users/lkuper/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9e3e57c58bebe1f8d6872c62be8f8b697846109b", "url": "https://api.github.com/repos/rust-lang/rust/commits/9e3e57c58bebe1f8d6872c62be8f8b697846109b", "html_url": "https://github.com/rust-lang/rust/commit/9e3e57c58bebe1f8d6872c62be8f8b697846109b"}], "stats": {"total": 11, "additions": 7, "deletions": 4}, "files": [{"sha": "f58333c5599be338335a687e592651775bc39a4a", "filename": "src/libsyntax/diagnostic.rs", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/cba77ffbfa469727314f65405117277839a1783b/src%2Flibsyntax%2Fdiagnostic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cba77ffbfa469727314f65405117277839a1783b/src%2Flibsyntax%2Fdiagnostic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fdiagnostic.rs?ref=cba77ffbfa469727314f65405117277839a1783b", "patch": "@@ -86,11 +86,14 @@ impl codemap_handler of handler for handler_t {\n     }\n     fn has_errors() -> bool { self.err_count > 0u }\n     fn abort_if_errors() {\n-        if self.err_count > 0u {\n-            let s = #fmt[\"aborting due to %u previous errors\",\n-                         self.err_count];\n-            self.fatal(s);\n+        let s;\n+        alt self.err_count {\n+          0u { ret; }\n+          1u { s = \"aborting due to previous error\"; }\n+          _  { s = #fmt[\"aborting due to %u previous errors\",\n+                        self.err_count]; }\n         }\n+        self.fatal(s);\n     }\n     fn warn(msg: str) {\n         self.emit(none, msg, warning);"}]}