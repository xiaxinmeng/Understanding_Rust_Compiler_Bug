{"sha": "aa46f08abde35740fc41b0e4f2d83d38b597a3d5", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFhNDZmMDhhYmRlMzU3NDBmYzQxYjBlNGYyZDgzZDM4YjU5N2EzZDU=", "commit": {"author": {"name": "Christiaan Dirkx", "email": "christiaan@dirkx.email", "date": "2021-04-21T14:06:32Z"}, "committer": {"name": "Christiaan Dirkx", "email": "christiaan@dirkx.email", "date": "2021-04-21T14:06:32Z"}, "message": "Apply suggestions from code review", "tree": {"sha": "47a004a39d2e4fc7269503807a18806a5f0ce0b4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/47a004a39d2e4fc7269503807a18806a5f0ce0b4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/aa46f08abde35740fc41b0e4f2d83d38b597a3d5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/aa46f08abde35740fc41b0e4f2d83d38b597a3d5", "html_url": "https://github.com/rust-lang/rust/commit/aa46f08abde35740fc41b0e4f2d83d38b597a3d5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/aa46f08abde35740fc41b0e4f2d83d38b597a3d5/comments", "author": {"login": "CDirkx", "id": 11176562, "node_id": "MDQ6VXNlcjExMTc2NTYy", "avatar_url": "https://avatars.githubusercontent.com/u/11176562?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CDirkx", "html_url": "https://github.com/CDirkx", "followers_url": "https://api.github.com/users/CDirkx/followers", "following_url": "https://api.github.com/users/CDirkx/following{/other_user}", "gists_url": "https://api.github.com/users/CDirkx/gists{/gist_id}", "starred_url": "https://api.github.com/users/CDirkx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CDirkx/subscriptions", "organizations_url": "https://api.github.com/users/CDirkx/orgs", "repos_url": "https://api.github.com/users/CDirkx/repos", "events_url": "https://api.github.com/users/CDirkx/events{/privacy}", "received_events_url": "https://api.github.com/users/CDirkx/received_events", "type": "User", "site_admin": false}, "committer": {"login": "CDirkx", "id": 11176562, "node_id": "MDQ6VXNlcjExMTc2NTYy", "avatar_url": "https://avatars.githubusercontent.com/u/11176562?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CDirkx", "html_url": "https://github.com/CDirkx", "followers_url": "https://api.github.com/users/CDirkx/followers", "following_url": "https://api.github.com/users/CDirkx/following{/other_user}", "gists_url": "https://api.github.com/users/CDirkx/gists{/gist_id}", "starred_url": "https://api.github.com/users/CDirkx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CDirkx/subscriptions", "organizations_url": "https://api.github.com/users/CDirkx/orgs", "repos_url": "https://api.github.com/users/CDirkx/repos", "events_url": "https://api.github.com/users/CDirkx/events{/privacy}", "received_events_url": "https://api.github.com/users/CDirkx/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9bd9cbb28e6fafdc5835fe0c5d496bbaea8504e8", "url": "https://api.github.com/repos/rust-lang/rust/commits/9bd9cbb28e6fafdc5835fe0c5d496bbaea8504e8", "html_url": "https://github.com/rust-lang/rust/commit/9bd9cbb28e6fafdc5835fe0c5d496bbaea8504e8"}], "stats": {"total": 6, "additions": 4, "deletions": 2}, "files": [{"sha": "b9dcc4e4b9e381c13b078e55781c1a7f8946a573", "filename": "library/std/src/sys/unix/process/process_common.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/aa46f08abde35740fc41b0e4f2d83d38b597a3d5/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fprocess%2Fprocess_common.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aa46f08abde35740fc41b0e4f2d83d38b597a3d5/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fprocess%2Fprocess_common.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fprocess%2Fprocess_common.rs?ref=aa46f08abde35740fc41b0e4f2d83d38b597a3d5", "patch": "@@ -223,7 +223,7 @@ impl Command {\n     pub fn get_groups(&self) -> Option<&[gid_t]> {\n         self.groups.as_deref()\n     }\n-    #[allow(dead_code)]\n+\n     pub fn get_closures(&mut self) -> &mut Vec<Box<dyn FnMut() -> io::Result<()> + Send + Sync>> {\n         &mut self.closures\n     }"}, {"sha": "eecdb624b9cfab6b3351fe518e3b1afd1f0e1a9d", "filename": "library/std/src/sys/unix/process/process_vxworks.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/aa46f08abde35740fc41b0e4f2d83d38b597a3d5/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fprocess%2Fprocess_vxworks.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aa46f08abde35740fc41b0e4f2d83d38b597a3d5/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fprocess%2Fprocess_vxworks.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fprocess%2Fprocess_vxworks.rs?ref=aa46f08abde35740fc41b0e4f2d83d38b597a3d5", "patch": "@@ -18,7 +18,6 @@ impl Command {\n         needs_stdin: bool,\n     ) -> io::Result<(Process, StdioPipes)> {\n         use crate::sys::cvt_r;\n-        // const CLOEXEC_MSG_FOOTER: &'static [u8] = b\"NOEX\";\n         let envp = self.capture_env();\n \n         if self.saw_nul() {\n@@ -61,6 +60,9 @@ impl Command {\n                 t!(cvt(libc::chdir(cwd.as_ptr())));\n             }\n \n+            // pre_exec closures are ignored on VxWorks\n+            let _ = self.get_closures();\n+\n             let c_envp = envp\n                 .as_ref()\n                 .map(|c| c.as_ptr())"}]}