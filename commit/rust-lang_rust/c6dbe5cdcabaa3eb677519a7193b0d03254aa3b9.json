{"sha": "c6dbe5cdcabaa3eb677519a7193b0d03254aa3b9", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM2ZGJlNWNkY2FiYWEzZWI2Nzc1MTlhNzE5M2IwZDAzMjU0YWEzYjk=", "commit": {"author": {"name": "Pointerbender", "email": "pointerbender@gmail.com", "date": "2021-06-02T13:31:50Z"}, "committer": {"name": "Pointerbender", "email": "pointerbender@gmail.com", "date": "2021-06-02T13:36:18Z"}, "message": "use references so that potential aliasing bugs are triggered during regression test", "tree": {"sha": "296edcb9864858e72dda84b19feb24f0d4d721cd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/296edcb9864858e72dda84b19feb24f0d4d721cd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c6dbe5cdcabaa3eb677519a7193b0d03254aa3b9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c6dbe5cdcabaa3eb677519a7193b0d03254aa3b9", "html_url": "https://github.com/rust-lang/rust/commit/c6dbe5cdcabaa3eb677519a7193b0d03254aa3b9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c6dbe5cdcabaa3eb677519a7193b0d03254aa3b9/comments", "author": {"login": "Pointerbender", "id": 81013316, "node_id": "MDQ6VXNlcjgxMDEzMzE2", "avatar_url": "https://avatars.githubusercontent.com/u/81013316?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Pointerbender", "html_url": "https://github.com/Pointerbender", "followers_url": "https://api.github.com/users/Pointerbender/followers", "following_url": "https://api.github.com/users/Pointerbender/following{/other_user}", "gists_url": "https://api.github.com/users/Pointerbender/gists{/gist_id}", "starred_url": "https://api.github.com/users/Pointerbender/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Pointerbender/subscriptions", "organizations_url": "https://api.github.com/users/Pointerbender/orgs", "repos_url": "https://api.github.com/users/Pointerbender/repos", "events_url": "https://api.github.com/users/Pointerbender/events{/privacy}", "received_events_url": "https://api.github.com/users/Pointerbender/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Pointerbender", "id": 81013316, "node_id": "MDQ6VXNlcjgxMDEzMzE2", "avatar_url": "https://avatars.githubusercontent.com/u/81013316?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Pointerbender", "html_url": "https://github.com/Pointerbender", "followers_url": "https://api.github.com/users/Pointerbender/followers", "following_url": "https://api.github.com/users/Pointerbender/following{/other_user}", "gists_url": "https://api.github.com/users/Pointerbender/gists{/gist_id}", "starred_url": "https://api.github.com/users/Pointerbender/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Pointerbender/subscriptions", "organizations_url": "https://api.github.com/users/Pointerbender/orgs", "repos_url": "https://api.github.com/users/Pointerbender/repos", "events_url": "https://api.github.com/users/Pointerbender/events{/privacy}", "received_events_url": "https://api.github.com/users/Pointerbender/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b8aba11de3422b5b0ea7be727c2da2b856db3076", "url": "https://api.github.com/repos/rust-lang/rust/commits/b8aba11de3422b5b0ea7be727c2da2b856db3076", "html_url": "https://github.com/rust-lang/rust/commit/b8aba11de3422b5b0ea7be727c2da2b856db3076"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "83d9ff1151889d392fd81fa9de568a77c026da4b", "filename": "tests/run-pass/slices.rs", "status": "modified", "additions": 12, "deletions": 1, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/c6dbe5cdcabaa3eb677519a7193b0d03254aa3b9/tests%2Frun-pass%2Fslices.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c6dbe5cdcabaa3eb677519a7193b0d03254aa3b9/tests%2Frun-pass%2Fslices.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-pass%2Fslices.rs?ref=c6dbe5cdcabaa3eb677519a7193b0d03254aa3b9", "patch": "@@ -1,3 +1,4 @@\n+// compile-flags: -Zmiri-track-raw-pointers\n #![feature(new_uninit)]\n #![feature(slice_as_chunks)]\n #![feature(slice_partition_dedup)]\n@@ -220,13 +221,23 @@ fn test_for_invalidated_pointers() {\n \n     // Calls `fn as_chunks_unchecked_mut` internally (requires unstable `#![feature(slice_as_chunks)]`):\n     assert_eq!(2, buffer.as_chunks_mut::<32>().0.len());\n+    for chunk in buffer.as_chunks_mut::<32>().0 {\n+        for elem in chunk {\n+            *elem += 1;\n+        }\n+    }\n \n     // Calls `fn split_at_mut_unchecked` internally:\n     let split_mut = buffer.split_at_mut(32);\n     assert_eq!(split_mut.0, split_mut.1);\n \n     // Calls `fn partition_dedup_by` internally (requires unstable `#![feature(slice_partition_dedup)]`):\n-    assert_eq!(1, buffer.partition_dedup().0.len());\n+    let partition_dedup = buffer.partition_dedup();\n+    assert_eq!(1, partition_dedup.0.len());\n+    partition_dedup.0[0] += 1;\n+    for elem in partition_dedup.1 {\n+        *elem += 1;\n+    }\n \n     buffer.rotate_left(8);\n     buffer.rotate_right(16);"}]}