{"sha": "83271f9b9977267492a59c4264fbd7dff9f7ea02", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgzMjcxZjliOTk3NzI2NzQ5MmE1OWM0MjY0ZmJkN2RmZjlmN2VhMDI=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2020-07-14T11:37:28Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-07-14T11:37:28Z"}, "message": "Merge #5367\n\n5367: missing impl members: remove assoc. type bounds r=matklad a=jonas-schievink\n\nPreviously \"Add missing impl members\" would paste bounds on associated types into the impl, which is not allowed. This removes them before pasting the item.\n\nCo-authored-by: Jonas Schievink <jonas.schievink@ferrous-systems.com>", "tree": {"sha": "65ab2157e01a6d86861b60ab40bc8f12d46d80a5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/65ab2157e01a6d86861b60ab40bc8f12d46d80a5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/83271f9b9977267492a59c4264fbd7dff9f7ea02", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfDZj4CRBK7hj4Ov3rIwAAdHIIAGO0DJIpBIJcLWXtS21Kexlq\nyD9lFS284yQbGGNWWA1vwVVaiG4NOttzvfXQvdqX+mCHGf/q9Fd0AbHxedeEGenF\nP4vTA9Fq2v2eFJRiQLm2Ph/ueIwqBuEzgRtE98bbGkIETWIvzkMSmB0q/fjR7oXM\nugy7j0hvt/pH4mLvZxlv2GgCw2wW92v1PpxetjGr6Of1hk/iXNB6rX/9VPOEMk2+\nO0WroaMKyYSo33r+/ujEbcsIcnQWuRo/Udb1YGvNzg05aD54vqNxW9rDkw7OanUm\nCs7YXUn7AYKtzpDyShP1NVgsRvB9FrfSv1bXmahKs0XoF6T8O/WqUwWjlYnMLI4=\n=i1E3\n-----END PGP SIGNATURE-----\n", "payload": "tree 65ab2157e01a6d86861b60ab40bc8f12d46d80a5\nparent 395e1d7d48276281c69d77fcdf26013dc6ae152d\nparent 85f5cbc9dc7027f922198f6c2d06cf382aad6970\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1594726648 +0000\ncommitter GitHub <noreply@github.com> 1594726648 +0000\n\nMerge #5367\n\n5367: missing impl members: remove assoc. type bounds r=matklad a=jonas-schievink\n\nPreviously \"Add missing impl members\" would paste bounds on associated types into the impl, which is not allowed. This removes them before pasting the item.\n\nCo-authored-by: Jonas Schievink <jonas.schievink@ferrous-systems.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/83271f9b9977267492a59c4264fbd7dff9f7ea02", "html_url": "https://github.com/rust-lang/rust/commit/83271f9b9977267492a59c4264fbd7dff9f7ea02", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/83271f9b9977267492a59c4264fbd7dff9f7ea02/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "395e1d7d48276281c69d77fcdf26013dc6ae152d", "url": "https://api.github.com/repos/rust-lang/rust/commits/395e1d7d48276281c69d77fcdf26013dc6ae152d", "html_url": "https://github.com/rust-lang/rust/commit/395e1d7d48276281c69d77fcdf26013dc6ae152d"}, {"sha": "85f5cbc9dc7027f922198f6c2d06cf382aad6970", "url": "https://api.github.com/repos/rust-lang/rust/commits/85f5cbc9dc7027f922198f6c2d06cf382aad6970", "html_url": "https://github.com/rust-lang/rust/commit/85f5cbc9dc7027f922198f6c2d06cf382aad6970"}], "stats": {"total": 40, "additions": 40, "deletions": 0}, "files": [{"sha": "f185e61e5951ebece29a874a547249c30d0022f3", "filename": "crates/ra_assists/src/handlers/add_missing_impl_members.rs", "status": "modified", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/83271f9b9977267492a59c4264fbd7dff9f7ea02/crates%2Fra_assists%2Fsrc%2Fhandlers%2Fadd_missing_impl_members.rs", "raw_url": "https://github.com/rust-lang/rust/raw/83271f9b9977267492a59c4264fbd7dff9f7ea02/crates%2Fra_assists%2Fsrc%2Fhandlers%2Fadd_missing_impl_members.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_assists%2Fsrc%2Fhandlers%2Fadd_missing_impl_members.rs?ref=83271f9b9977267492a59c4264fbd7dff9f7ea02", "patch": "@@ -158,6 +158,9 @@ fn add_missing_impl_members_inner(\n             .map(|it| ast_transform::apply(&*ast_transform, it))\n             .map(|it| match it {\n                 ast::AssocItem::FnDef(def) => ast::AssocItem::FnDef(add_body(def)),\n+                ast::AssocItem::TypeAliasDef(def) => {\n+                    ast::AssocItem::TypeAliasDef(def.remove_bounds())\n+                }\n                 _ => it,\n             })\n             .map(|it| edit::remove_attrs_and_docs(&it));\n@@ -681,6 +684,28 @@ impl Foo<T> for S<T> {\n     fn bar(&self, this: &T, that: &Self) {\n         ${0:todo!()}\n     }\n+}\"#,\n+        )\n+    }\n+\n+    #[test]\n+    fn test_assoc_type_bounds_are_removed() {\n+        check_assist(\n+            add_missing_impl_members,\n+            r#\"\n+trait Tr {\n+    type Ty: Copy + 'static;\n+}\n+\n+impl Tr for ()<|> {\n+}\"#,\n+            r#\"\n+trait Tr {\n+    type Ty: Copy + 'static;\n+}\n+\n+impl Tr for () {\n+    $0type Ty;\n }\"#,\n         )\n     }"}, {"sha": "abc7a646c2cd7c2319172f869bf1d6ae3742b139", "filename": "crates/ra_syntax/src/ast/edit.rs", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/83271f9b9977267492a59c4264fbd7dff9f7ea02/crates%2Fra_syntax%2Fsrc%2Fast%2Fedit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/83271f9b9977267492a59c4264fbd7dff9f7ea02/crates%2Fra_syntax%2Fsrc%2Fast%2Fedit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fast%2Fedit.rs?ref=83271f9b9977267492a59c4264fbd7dff9f7ea02", "patch": "@@ -189,6 +189,21 @@ impl ast::RecordFieldList {\n     }\n }\n \n+impl ast::TypeAliasDef {\n+    #[must_use]\n+    pub fn remove_bounds(&self) -> ast::TypeAliasDef {\n+        let colon = match self.colon_token() {\n+            Some(it) => it,\n+            None => return self.clone(),\n+        };\n+        let end = match self.type_bound_list() {\n+            Some(it) => it.syntax().clone().into(),\n+            None => colon.clone().into(),\n+        };\n+        self.replace_children(colon.into()..=end, iter::empty())\n+    }\n+}\n+\n impl ast::TypeParam {\n     #[must_use]\n     pub fn remove_bounds(&self) -> ast::TypeParam {"}]}