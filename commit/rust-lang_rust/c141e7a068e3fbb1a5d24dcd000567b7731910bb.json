{"sha": "c141e7a068e3fbb1a5d24dcd000567b7731910bb", "node_id": "MDY6Q29tbWl0NzI0NzEyOmMxNDFlN2EwNjhlM2ZiYjFhNWQyNGRjZDAwMDU2N2I3NzMxOTEwYmI=", "commit": {"author": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2012-03-28T20:49:39Z"}, "committer": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2012-03-28T20:52:47Z"}, "message": "Fix some gcc-4.4-isms, should build now on 4.1+.", "tree": {"sha": "1760a7bc92475d235e623751c6ef493bcbbe7cad", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1760a7bc92475d235e623751c6ef493bcbbe7cad"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c141e7a068e3fbb1a5d24dcd000567b7731910bb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c141e7a068e3fbb1a5d24dcd000567b7731910bb", "html_url": "https://github.com/rust-lang/rust/commit/c141e7a068e3fbb1a5d24dcd000567b7731910bb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c141e7a068e3fbb1a5d24dcd000567b7731910bb/comments", "author": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "committer": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "211d41948a9f5bb4e6f322cb8639e01439e13abf", "url": "https://api.github.com/repos/rust-lang/rust/commits/211d41948a9f5bb4e6f322cb8639e01439e13abf", "html_url": "https://github.com/rust-lang/rust/commit/211d41948a9f5bb4e6f322cb8639e01439e13abf"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "c5afdd44ae02d29417da4f5df18db7a01a39c935", "filename": "src/rt/rust_internal.h", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/c141e7a068e3fbb1a5d24dcd000567b7731910bb/src%2Frt%2Frust_internal.h", "raw_url": "https://github.com/rust-lang/rust/raw/c141e7a068e3fbb1a5d24dcd000567b7731910bb/src%2Frt%2Frust_internal.h", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust_internal.h?ref=c141e7a068e3fbb1a5d24dcd000567b7731910bb", "patch": "@@ -38,6 +38,11 @@ extern \"C\" {\n #include <pthread.h>\n #include <errno.h>\n #include <dirent.h>\n+\n+#define GCC_VERSION (__GNUC__ * 10000 \\\n+                     + __GNUC_MINOR__ * 100 \\\n+                     + __GNUC_PATCHLEVEL__)\n+\n #else\n #error \"Platform not supported.\"\n #endif"}, {"sha": "3b6ddbe4db24312ac3af7e26c5315151a6221243", "filename": "src/rt/rust_kernel.cpp", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c141e7a068e3fbb1a5d24dcd000567b7731910bb/src%2Frt%2Frust_kernel.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/c141e7a068e3fbb1a5d24dcd000567b7731910bb/src%2Frt%2Frust_kernel.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust_kernel.cpp?ref=c141e7a068e3fbb1a5d24dcd000567b7731910bb", "patch": "@@ -3,11 +3,12 @@\n #define __STDC_LIMIT_MACROS 1\n #endif\n \n-#include <vector>\n #include \"rust_internal.h\"\n #include \"rust_util.h\"\n #include \"rust_scheduler.h\"\n \n+#include <vector>\n+\n #define KLOG_(...)                              \\\n     KLOG(this, kern, __VA_ARGS__)\n #define KLOG_ERR_(field, ...)                   \\"}, {"sha": "647927d5c4b70d56b5d6d6bd8396a6a36d554a9f", "filename": "src/rt/rust_upcall.cpp", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c141e7a068e3fbb1a5d24dcd000567b7731910bb/src%2Frt%2Frust_upcall.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/c141e7a068e3fbb1a5d24dcd000567b7731910bb/src%2Frt%2Frust_upcall.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust_upcall.cpp?ref=c141e7a068e3fbb1a5d24dcd000567b7731910bb", "patch": "@@ -34,7 +34,8 @@\n // the rust stack and happen frequently enough to catch most stack changes,\n // including at the beginning of all landing pads.\n // FIXME: Enable this for windows\n-#if defined __linux__ || defined __APPLE__ || defined __FreeBSD__\n+#if (defined __linux__ || defined __APPLE__ || defined __FreeBSD__) \\\n+    && (defined(GCC_VERSION) && GCC_VERSION > 40300)\n extern \"C\" void\n check_stack_alignment() __attribute__ ((aligned (16)));\n #else"}, {"sha": "d58927156a6fc40309a7c6d458d4fbe2ef7af112", "filename": "src/rt/util/indexed_list.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c141e7a068e3fbb1a5d24dcd000567b7731910bb/src%2Frt%2Futil%2Findexed_list.h", "raw_url": "https://github.com/rust-lang/rust/raw/c141e7a068e3fbb1a5d24dcd000567b7731910bb/src%2Frt%2Futil%2Findexed_list.h", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Futil%2Findexed_list.h?ref=c141e7a068e3fbb1a5d24dcd000567b7731910bb", "patch": "@@ -43,6 +43,7 @@ template<typename T> class indexed_list {\n     }\n     virtual int32_t remove(T* value);\n     virtual T * operator[](int32_t index);\n+    virtual ~indexed_list() {}\n };\n \n template<typename T> int32_t"}]}