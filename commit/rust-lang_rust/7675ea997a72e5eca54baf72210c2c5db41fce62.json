{"sha": "7675ea997a72e5eca54baf72210c2c5db41fce62", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc2NzVlYTk5N2E3MmU1ZWNhNTRiYWY3MjIxMGMyYzVkYjQxZmNlNjI=", "commit": {"author": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2017-10-30T20:19:24Z"}, "committer": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2017-10-31T16:41:40Z"}, "message": "remove the NLL pass (it is now invoked by mir borrowck)", "tree": {"sha": "3ec35a4b9f71d13f0adb5dc44221f2c23e9dee4b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3ec35a4b9f71d13f0adb5dc44221f2c23e9dee4b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7675ea997a72e5eca54baf72210c2c5db41fce62", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7675ea997a72e5eca54baf72210c2c5db41fce62", "html_url": "https://github.com/rust-lang/rust/commit/7675ea997a72e5eca54baf72210c2c5db41fce62", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7675ea997a72e5eca54baf72210c2c5db41fce62/comments", "author": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bf57a230eb94b8a513f3c7b1f68ea5779bcb281a", "url": "https://api.github.com/repos/rust-lang/rust/commits/bf57a230eb94b8a513f3c7b1f68ea5779bcb281a", "html_url": "https://github.com/rust-lang/rust/commit/bf57a230eb94b8a513f3c7b1f68ea5779bcb281a"}], "stats": {"total": 26, "additions": 2, "deletions": 24}, "files": [{"sha": "ea3411f4d07ace5825cec10b4ebffd2160f05c62", "filename": "src/librustc_driver/driver.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7675ea997a72e5eca54baf72210c2c5db41fce62/src%2Flibrustc_driver%2Fdriver.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7675ea997a72e5eca54baf72210c2c5db41fce62/src%2Flibrustc_driver%2Fdriver.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_driver%2Fdriver.rs?ref=7675ea997a72e5eca54baf72210c2c5db41fce62", "patch": "@@ -1003,7 +1003,6 @@ pub fn phase_3_run_analysis_passes<'tcx, F, R>(sess: &'tcx Session,\n \n     passes.push_pass(MIR_VALIDATED, mir::transform::qualify_consts::QualifyAndPromoteConstants);\n     passes.push_pass(MIR_VALIDATED, mir::transform::simplify::SimplifyCfg::new(\"qualify-consts\"));\n-    passes.push_pass(MIR_VALIDATED, mir::transform::nll::NLL);\n \n     // borrowck runs between MIR_VALIDATED and MIR_OPTIMIZED.\n "}, {"sha": "d4938dc40bf25689463cedc6c22541944c29adb3", "filename": "src/librustc_mir/transform/nll/mod.rs", "status": "modified", "additions": 2, "deletions": 23, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/7675ea997a72e5eca54baf72210c2c5db41fce62/src%2Flibrustc_mir%2Ftransform%2Fnll%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7675ea997a72e5eca54baf72210c2c5db41fce62/src%2Flibrustc_mir%2Ftransform%2Fnll%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Ftransform%2Fnll%2Fmod.rs?ref=7675ea997a72e5eca54baf72210c2c5db41fce62", "patch": "@@ -8,9 +8,9 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-use rustc::ty::{self, RegionKind, TyCtxt};\n+use rustc::ty::{self, RegionKind};\n use rustc::mir::{Location, Mir};\n-use rustc::mir::transform::{MirPass, MirSource};\n+use rustc::mir::transform::MirSource;\n use rustc::infer::InferCtxt;\n use rustc::util::nodemap::FxHashMap;\n use rustc_data_structures::indexed_vec::Idx;\n@@ -29,27 +29,6 @@ use self::region_infer::RegionInferenceContext;\n \n mod renumber;\n \n-// MIR Pass for non-lexical lifetimes\n-pub struct NLL;\n-\n-impl MirPass for NLL {\n-    fn run_pass<'a, 'tcx>(\n-        &self,\n-        tcx: TyCtxt<'a, 'tcx, 'tcx>,\n-        source: MirSource,\n-        input_mir: &mut Mir<'tcx>,\n-    ) {\n-        if !tcx.sess.opts.debugging_opts.nll {\n-            return;\n-        }\n-\n-        tcx.infer_ctxt().enter(|ref infcx| {\n-            let mut mir = input_mir.clone();\n-            let _ = compute_regions(infcx, source, &mut mir);\n-        });\n-    }\n-}\n-\n /// Computes the (non-lexical) regions from the input MIR.\n ///\n /// This may result in errors being reported."}]}