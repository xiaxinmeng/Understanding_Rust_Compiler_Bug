{"sha": "e9f4fc8d406ddd2d75e4aae34fe84abdd1bc479a", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU5ZjRmYzhkNDA2ZGRkMmQ3NWU0YWFlMzRmZTg0YWJkZDFiYzQ3OWE=", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2017-12-19T22:45:17Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2017-12-19T23:48:46Z"}, "message": "Point at `while true` span instead of entire block", "tree": {"sha": "59a54881496873121c6b6e0d1d17f9e3dc814036", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/59a54881496873121c6b6e0d1d17f9e3dc814036"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e9f4fc8d406ddd2d75e4aae34fe84abdd1bc479a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e9f4fc8d406ddd2d75e4aae34fe84abdd1bc479a", "html_url": "https://github.com/rust-lang/rust/commit/e9f4fc8d406ddd2d75e4aae34fe84abdd1bc479a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e9f4fc8d406ddd2d75e4aae34fe84abdd1bc479a/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b39c4bc12358078f77ddd01288b24252f757f37d", "url": "https://api.github.com/repos/rust-lang/rust/commits/b39c4bc12358078f77ddd01288b24252f757f37d", "html_url": "https://github.com/rust-lang/rust/commit/b39c4bc12358078f77ddd01288b24252f757f37d"}], "stats": {"total": 35, "additions": 7, "deletions": 28}, "files": [{"sha": "783022394cf53fb082163f9b3449ec1555cfebed", "filename": "src/librustc_lint/builtin.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/e9f4fc8d406ddd2d75e4aae34fe84abdd1bc479a/src%2Flibrustc_lint%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e9f4fc8d406ddd2d75e4aae34fe84abdd1bc479a/src%2Flibrustc_lint%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2Fbuiltin.rs?ref=e9f4fc8d406ddd2d75e4aae34fe84abdd1bc479a", "patch": "@@ -102,11 +102,9 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for WhileTrue {\n                 if let ast::LitKind::Bool(true) = lit.node {\n                     if lit.span.ctxt() == SyntaxContext::empty() {\n                         let msg = \"denote infinite loops with `loop { ... }`\";\n-                        let mut err = cx.struct_span_lint(WHILE_TRUE, e.span, msg);\n                         let condition_span = cx.tcx.sess.codemap().def_span(e.span);\n-                        err.span_suggestion_short(condition_span,\n-                                                  \"use `loop`\",\n-                                                  \"loop\".to_owned());\n+                        let mut err = cx.struct_span_lint(WHILE_TRUE, condition_span, msg);\n+                        err.span_suggestion_short(condition_span, \"use `loop`\", \"loop\".to_owned());\n                         err.emit();\n                     }\n                 }"}, {"sha": "3547accd2ed334f6e9c7c22dc105d6115ae2a7a3", "filename": "src/test/ui/codemap_tests/unicode_3.stderr", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/e9f4fc8d406ddd2d75e4aae34fe84abdd1bc479a/src%2Ftest%2Fui%2Fcodemap_tests%2Funicode_3.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/e9f4fc8d406ddd2d75e4aae34fe84abdd1bc479a/src%2Ftest%2Fui%2Fcodemap_tests%2Funicode_3.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcodemap_tests%2Funicode_3.stderr?ref=e9f4fc8d406ddd2d75e4aae34fe84abdd1bc479a", "patch": "@@ -2,9 +2,7 @@ warning: denote infinite loops with `loop { ... }`\n   --> $DIR/unicode_3.rs:14:45\n    |\n 14 |     let s = \"Z\u0368A\u0351\u0366\u0352\u034b\u0364\u0351\u031aL\u0304\u0351\u034bG\u0302\u0368\u0365\u033f\u0352\u033d\u0344O\u0365\u035b\u036d!\u030f\"; while true { break; }\n-   |                       ----------^^^^^^^^^^^\n-   |                       |\n-   |                       help: use `loop`\n+   |                       ^^^^^^^^^^ help: use `loop`\n    |\n    = note: #[warn(while_true)] on by default\n "}, {"sha": "5f920316b5ca167c0d91b1b81c99f1dbf1e7f60d", "filename": "src/test/ui/issue-1962.stderr", "status": "modified", "additions": 2, "deletions": 9, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/e9f4fc8d406ddd2d75e4aae34fe84abdd1bc479a/src%2Ftest%2Fui%2Fissue-1962.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/e9f4fc8d406ddd2d75e4aae34fe84abdd1bc479a/src%2Ftest%2Fui%2Fissue-1962.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissue-1962.stderr?ref=e9f4fc8d406ddd2d75e4aae34fe84abdd1bc479a", "patch": "@@ -1,15 +1,8 @@\n error: denote infinite loops with `loop { ... }`\n   --> $DIR/issue-1962.rs:14:3\n    |\n-14 |     while true  { //~ ERROR denote infinite loops with `loop\n-   |     ^---------\n-   |     |\n-   |  ___help: use `loop`\n-   | |\n-15 | |     i += 1;\n-16 | |     if i == 5 { break; }\n-17 | |   }\n-   | |___^\n+14 |   while true  { //~ ERROR denote infinite loops with `loop\n+   |   ^^^^^^^^^^ help: use `loop`\n    |\n    = note: requested on the command line with `-D while-true`\n "}, {"sha": "701a95222183a6f9369292f0fd9c1100dde9ec3f", "filename": "src/test/ui/lint/suggestions.stderr", "status": "modified", "additions": 2, "deletions": 12, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/e9f4fc8d406ddd2d75e4aae34fe84abdd1bc479a/src%2Ftest%2Fui%2Flint%2Fsuggestions.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/e9f4fc8d406ddd2d75e4aae34fe84abdd1bc479a/src%2Ftest%2Fui%2Flint%2Fsuggestions.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fsuggestions.stderr?ref=e9f4fc8d406ddd2d75e4aae34fe84abdd1bc479a", "patch": "@@ -75,18 +75,8 @@ warning: function is marked #[no_mangle], but not exported\n warning: denote infinite loops with `loop { ... }`\n   --> $DIR/suggestions.rs:34:5\n    |\n-34 |       while true { // should suggest `loop`\n-   |       ^---------\n-   |       |\n-   |  _____help: use `loop`\n-   | |\n-35 | |     //~^ WARN denote infinite loops\n-36 | |         let mut a = (1); // should suggest no `mut`, no parens\n-37 | |         //~^ WARN does not need to be mutable\n-...  |\n-44 | |         println!(\"{}\", a);\n-45 | |     }\n-   | |_____^\n+34 |     while true { // should suggest `loop`\n+   |     ^^^^^^^^^^ help: use `loop`\n    |\n    = note: #[warn(while_true)] on by default\n "}]}