{"sha": "7e50b599bfeb75f7be1d5a1fa855e37ec6d0e65d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdlNTBiNTk5YmZlYjc1ZjdiZTFkNWExZmE4NTVlMzdlYzZkMGU2NWQ=", "commit": {"author": {"name": "Matthew Healy", "email": "matthew.healy@soundcloud.com", "date": "2020-01-09T22:13:57Z"}, "committer": {"name": "Matthew Healy", "email": "matthew.healy@soundcloud.com", "date": "2020-01-10T10:13:49Z"}, "message": "Prefer llvm-skip-rebuild flag value over config.toml", "tree": {"sha": "f406ec8afdbc381b53a5419570e246124ae42271", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f406ec8afdbc381b53a5419570e246124ae42271"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7e50b599bfeb75f7be1d5a1fa855e37ec6d0e65d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7e50b599bfeb75f7be1d5a1fa855e37ec6d0e65d", "html_url": "https://github.com/rust-lang/rust/commit/7e50b599bfeb75f7be1d5a1fa855e37ec6d0e65d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7e50b599bfeb75f7be1d5a1fa855e37ec6d0e65d/comments", "author": null, "committer": null, "parents": [{"sha": "0bbbd5d418f764146afdde3460c170db205ba0fa", "url": "https://api.github.com/repos/rust-lang/rust/commits/0bbbd5d418f764146afdde3460c170db205ba0fa", "html_url": "https://github.com/rust-lang/rust/commit/0bbbd5d418f764146afdde3460c170db205ba0fa"}], "stats": {"total": 8, "additions": 6, "deletions": 2}, "files": [{"sha": "110c8b844d54c6d68357b3161e753fda23c7d2a1", "filename": "src/bootstrap/config.rs", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/7e50b599bfeb75f7be1d5a1fa855e37ec6d0e65d/src%2Fbootstrap%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7e50b599bfeb75f7be1d5a1fa855e37ec6d0e65d/src%2Fbootstrap%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fconfig.rs?ref=7e50b599bfeb75f7be1d5a1fa855e37ec6d0e65d", "patch": "@@ -493,9 +493,13 @@ impl Config {\n             config.mandir = install.mandir.clone().map(PathBuf::from);\n         }\n \n+        // We want the llvm-skip-rebuild flag to take precedence over the\n+        // skip-rebuild config.toml option so we store it separately\n+        // so that we can infer the right value\n+        let mut llvm_skip_rebuild = flags.llvm_skip_rebuild;\n+\n         // Store off these values as options because if they're not provided\n         // we'll infer default values for them later\n-        let mut llvm_skip_rebuild = None;\n         let mut llvm_assertions = None;\n         let mut debug = None;\n         let mut debug_assertions = None;\n@@ -517,7 +521,7 @@ impl Config {\n             }\n             set(&mut config.ninja, llvm.ninja);\n             llvm_assertions = llvm.assertions;\n-            llvm_skip_rebuild = llvm.skip_rebuild;\n+            llvm_skip_rebuild = llvm_skip_rebuild.or(llvm.skip_rebuild);\n             set(&mut config.llvm_optimize, llvm.optimize);\n             set(&mut config.llvm_thin_lto, llvm.thin_lto);\n             set(&mut config.llvm_release_debuginfo, llvm.release_debuginfo);"}]}