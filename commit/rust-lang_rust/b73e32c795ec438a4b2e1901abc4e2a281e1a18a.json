{"sha": "b73e32c795ec438a4b2e1901abc4e2a281e1a18a", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI3M2UzMmM3OTVlYzQzOGE0YjJlMTkwMWFiYzRlMmEyODFlMWExOGE=", "commit": {"author": {"name": "varkor", "email": "github@varkor.com", "date": "2019-09-07T14:49:27Z"}, "committer": {"name": "varkor", "email": "github@varkor.com", "date": "2019-09-07T14:49:27Z"}, "message": "Add `bool::then` and `bool::then_with`", "tree": {"sha": "de7cb92d083a75db1130186f428250aeeb2acfee", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/de7cb92d083a75db1130186f428250aeeb2acfee"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b73e32c795ec438a4b2e1901abc4e2a281e1a18a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b73e32c795ec438a4b2e1901abc4e2a281e1a18a", "html_url": "https://github.com/rust-lang/rust/commit/b73e32c795ec438a4b2e1901abc4e2a281e1a18a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b73e32c795ec438a4b2e1901abc4e2a281e1a18a/comments", "author": {"login": "varkor", "id": 3943692, "node_id": "MDQ6VXNlcjM5NDM2OTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3943692?v=4", "gravatar_id": "", "url": "https://api.github.com/users/varkor", "html_url": "https://github.com/varkor", "followers_url": "https://api.github.com/users/varkor/followers", "following_url": "https://api.github.com/users/varkor/following{/other_user}", "gists_url": "https://api.github.com/users/varkor/gists{/gist_id}", "starred_url": "https://api.github.com/users/varkor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/varkor/subscriptions", "organizations_url": "https://api.github.com/users/varkor/orgs", "repos_url": "https://api.github.com/users/varkor/repos", "events_url": "https://api.github.com/users/varkor/events{/privacy}", "received_events_url": "https://api.github.com/users/varkor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "varkor", "id": 3943692, "node_id": "MDQ6VXNlcjM5NDM2OTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3943692?v=4", "gravatar_id": "", "url": "https://api.github.com/users/varkor", "html_url": "https://github.com/varkor", "followers_url": "https://api.github.com/users/varkor/followers", "following_url": "https://api.github.com/users/varkor/following{/other_user}", "gists_url": "https://api.github.com/users/varkor/gists{/gist_id}", "starred_url": "https://api.github.com/users/varkor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/varkor/subscriptions", "organizations_url": "https://api.github.com/users/varkor/orgs", "repos_url": "https://api.github.com/users/varkor/repos", "events_url": "https://api.github.com/users/varkor/events{/privacy}", "received_events_url": "https://api.github.com/users/varkor/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f0386a10e0112acef6ea0447e6e5a3ac1c7cb118", "url": "https://api.github.com/repos/rust-lang/rust/commits/f0386a10e0112acef6ea0447e6e5a3ac1c7cb118", "html_url": "https://github.com/rust-lang/rust/commit/f0386a10e0112acef6ea0447e6e5a3ac1c7cb118"}], "stats": {"total": 51, "additions": 50, "deletions": 1}, "files": [{"sha": "0fbd3b8c2bbce992d80b8885c4869ada9dde3944", "filename": "src/libcore/bool/mod.rs", "status": "modified", "additions": 41, "deletions": 1, "changes": 42, "blob_url": "https://github.com/rust-lang/rust/blob/b73e32c795ec438a4b2e1901abc4e2a281e1a18a/src%2Flibcore%2Fbool%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b73e32c795ec438a4b2e1901abc4e2a281e1a18a/src%2Flibcore%2Fbool%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fbool%2Fmod.rs?ref=b73e32c795ec438a4b2e1901abc4e2a281e1a18a", "patch": "@@ -4,4 +4,44 @@\n \n #[cfg(not(boostrap_stdarch_ignore_this))]\n #[lang = \"bool\"]\n-impl bool {}\n+impl bool {\n+    /// Returns `Some(t)` if the `bool` is `true`, or `None` otherwise.\n+    ///\n+    /// # Examples\n+    ///\n+    /// ```\n+    /// #![feature(bool_to_option)]\n+    ///\n+    /// assert_eq!(false.then(0), None);\n+    /// assert_eq!(true.then(0), Some(0));\n+    /// ```\n+    #[unstable(feature = \"bool_to_option\", issue = \"0\")]\n+    #[inline]\n+    pub fn then<T>(self, t: T) -> Option<T> {\n+        if self {\n+            Some(t)\n+        } else {\n+            None\n+        }\n+    }\n+\n+    /// Returns `Some(f())` if the `bool` is `true`, or `None` otherwise.\n+    ///\n+    /// # Examples\n+    ///\n+    /// ```\n+    /// #![feature(bool_to_option)]\n+    ///\n+    /// assert_eq!(false.then_with(|| 0), None);\n+    /// assert_eq!(true.then_with(|| 0), Some(0));\n+    /// ```\n+    #[unstable(feature = \"bool_to_option\", issue = \"0\")]\n+    #[inline]\n+    pub fn then_with<T, F: FnOnce() -> T>(self, f: F) -> Option<T> {\n+        if self {\n+            Some(f())\n+        } else {\n+            None\n+        }\n+    }\n+}"}, {"sha": "0f1e6e89451e9b4294a6aad180c3250e623f2122", "filename": "src/libcore/tests/bool.rs", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/b73e32c795ec438a4b2e1901abc4e2a281e1a18a/src%2Flibcore%2Ftests%2Fbool.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b73e32c795ec438a4b2e1901abc4e2a281e1a18a/src%2Flibcore%2Ftests%2Fbool.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Ftests%2Fbool.rs?ref=b73e32c795ec438a4b2e1901abc4e2a281e1a18a", "patch": "@@ -0,0 +1,7 @@\n+#[test]\n+fn test_bool_to_option() {\n+    assert_eq!(false.then(0), None);\n+    assert_eq!(true.then(0), Some(0));\n+    assert_eq!(false.then_with(|| 0), None);\n+    assert_eq!(true.then_with(|| 0), Some(0));\n+}"}, {"sha": "b2c29aa269265a8a4a2935b41abf0c760eaba089", "filename": "src/libcore/tests/lib.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b73e32c795ec438a4b2e1901abc4e2a281e1a18a/src%2Flibcore%2Ftests%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b73e32c795ec438a4b2e1901abc4e2a281e1a18a/src%2Flibcore%2Ftests%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Ftests%2Flib.rs?ref=b73e32c795ec438a4b2e1901abc4e2a281e1a18a", "patch": "@@ -1,3 +1,4 @@\n+#![feature(bool_to_option)]\n #![feature(bound_cloned)]\n #![feature(box_syntax)]\n #![feature(cell_update)]\n@@ -40,6 +41,7 @@ mod any;\n mod array;\n mod ascii;\n mod atomic;\n+mod bool;\n mod cell;\n mod char;\n mod clone;"}]}