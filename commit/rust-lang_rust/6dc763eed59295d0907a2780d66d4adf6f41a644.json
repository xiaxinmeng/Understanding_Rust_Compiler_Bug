{"sha": "6dc763eed59295d0907a2780d66d4adf6f41a644", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZkYzc2M2VlZDU5Mjk1ZDA5MDdhMjc4MGQ2NmQ0YWRmNmY0MWE2NDQ=", "commit": {"author": {"name": "Aleksi Juvani", "email": "aleksi@aleksijuvani.com", "date": "2019-09-07T16:04:59Z"}, "committer": {"name": "Aleksi Juvani", "email": "aleksi@aleksijuvani.com", "date": "2019-09-07T16:04:59Z"}, "message": "Fix nits", "tree": {"sha": "f1c55d20dc25b523a6f42136a2b30531f508c784", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f1c55d20dc25b523a6f42136a2b30531f508c784"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6dc763eed59295d0907a2780d66d4adf6f41a644", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6dc763eed59295d0907a2780d66d4adf6f41a644", "html_url": "https://github.com/rust-lang/rust/commit/6dc763eed59295d0907a2780d66d4adf6f41a644", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6dc763eed59295d0907a2780d66d4adf6f41a644/comments", "author": {"login": "aleksijuvani", "id": 87529683, "node_id": "MDQ6VXNlcjg3NTI5Njgz", "avatar_url": "https://avatars.githubusercontent.com/u/87529683?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aleksijuvani", "html_url": "https://github.com/aleksijuvani", "followers_url": "https://api.github.com/users/aleksijuvani/followers", "following_url": "https://api.github.com/users/aleksijuvani/following{/other_user}", "gists_url": "https://api.github.com/users/aleksijuvani/gists{/gist_id}", "starred_url": "https://api.github.com/users/aleksijuvani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aleksijuvani/subscriptions", "organizations_url": "https://api.github.com/users/aleksijuvani/orgs", "repos_url": "https://api.github.com/users/aleksijuvani/repos", "events_url": "https://api.github.com/users/aleksijuvani/events{/privacy}", "received_events_url": "https://api.github.com/users/aleksijuvani/received_events", "type": "User", "site_admin": false}, "committer": {"login": "aleksijuvani", "id": 87529683, "node_id": "MDQ6VXNlcjg3NTI5Njgz", "avatar_url": "https://avatars.githubusercontent.com/u/87529683?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aleksijuvani", "html_url": "https://github.com/aleksijuvani", "followers_url": "https://api.github.com/users/aleksijuvani/followers", "following_url": "https://api.github.com/users/aleksijuvani/following{/other_user}", "gists_url": "https://api.github.com/users/aleksijuvani/gists{/gist_id}", "starred_url": "https://api.github.com/users/aleksijuvani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aleksijuvani/subscriptions", "organizations_url": "https://api.github.com/users/aleksijuvani/orgs", "repos_url": "https://api.github.com/users/aleksijuvani/repos", "events_url": "https://api.github.com/users/aleksijuvani/events{/privacy}", "received_events_url": "https://api.github.com/users/aleksijuvani/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "691f645ecd38d346fb047bbcb148694bd82c6a92", "url": "https://api.github.com/repos/rust-lang/rust/commits/691f645ecd38d346fb047bbcb148694bd82c6a92", "html_url": "https://github.com/rust-lang/rust/commit/691f645ecd38d346fb047bbcb148694bd82c6a92"}], "stats": {"total": 20, "additions": 10, "deletions": 10}, "files": [{"sha": "297e64d4aebaa944d204d3df2075431d72542798", "filename": "src/librustc_target/spec/apple_base.rs", "status": "modified", "additions": 10, "deletions": 10, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/6dc763eed59295d0907a2780d66d4adf6f41a644/src%2Flibrustc_target%2Fspec%2Fapple_base.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6dc763eed59295d0907a2780d66d4adf6f41a644/src%2Flibrustc_target%2Fspec%2Fapple_base.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_target%2Fspec%2Fapple_base.rs?ref=6dc763eed59295d0907a2780d66d4adf6f41a644", "patch": "@@ -54,24 +54,24 @@ pub fn macos_llvm_target(arch: &str) -> String {\n \n pub fn sysroot(sdk: &str) -> Result<String, String> {\n     let actual_sdk_path = sdk_path(sdk)?;\n-    // Like Clang, allow the SDKROOT environment variable used by Xcode to define the sysroot\n+    // Like Clang, allow the `SDKROOT` environment variable used by Xcode to define the sysroot.\n     if let Some(sdk_root) = env::var(\"SDKROOT\").ok() {\n         let sdk_root_p = Path::new(&sdk_root);\n-        // Ignore SDKROOT if it's not a valid path\n+        // Ignore `SDKROOT` if it's not a valid path.\n         if !sdk_root_p.is_absolute() || sdk_root_p == Path::new(\"/\") || !sdk_root_p.exists() {\n             return Ok(actual_sdk_path);\n         }\n-        // Ignore SDKROOT if it's clearly set for the wrong platform, which may occur when we're\n-        // compiling a custom build script while targeting iOS for example\n-        match sdk {\n+        // Ignore `SDKROOT` if it's clearly set for the wrong platform, which may occur when we're\n+        // compiling a custom build script while targeting iOS for example.\n+        return Ok(match sdk {\n             \"iphoneos\" if sdk_root.contains(\"iPhoneSimulator.platform\")\n-                || sdk_root.contains(\"MacOSX.platform\") => return Ok(actual_sdk_path),\n+                || sdk_root.contains(\"MacOSX.platform\") => actual_sdk_path,\n             \"iphonesimulator\" if sdk_root.contains(\"iPhoneOS.platform\")\n-                || sdk_root.contains(\"MacOSX.platform\") => return Ok(actual_sdk_path),\n+                || sdk_root.contains(\"MacOSX.platform\") => actual_sdk_path,\n             \"macosx\" | \"macosx10.15\" if sdk_root.contains(\"iPhoneOS.platform\")\n-                || sdk_root.contains(\"iPhoneSimulator.platform\") => return Ok(actual_sdk_path),\n-            _ => return Ok(sdk_root),\n-        }\n+                || sdk_root.contains(\"iPhoneSimulator.platform\") => actual_sdk_path,\n+            _ => sdk_root,\n+        })\n     }\n     Ok(actual_sdk_path)\n }"}]}