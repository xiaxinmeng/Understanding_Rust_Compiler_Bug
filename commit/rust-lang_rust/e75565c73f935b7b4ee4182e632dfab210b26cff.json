{"sha": "e75565c73f935b7b4ee4182e632dfab210b26cff", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU3NTU2NWM3M2Y5MzViN2I0ZWU0MTgyZTYzMmRmYWIyMTBiMjZjZmY=", "commit": {"author": {"name": "kjeremy", "email": "kjeremy@gmail.com", "date": "2020-04-26T22:57:33Z"}, "committer": {"name": "kjeremy", "email": "kjeremy@gmail.com", "date": "2020-05-01T17:44:32Z"}, "message": "Advertise support for all the builtin CodeActionKinds\n\nEven thought we don't return all of these we eventually will so might as\nwell advertise now.", "tree": {"sha": "7ef6d513d04993897c3e29bec6a57c1d96f10ab6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7ef6d513d04993897c3e29bec6a57c1d96f10ab6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e75565c73f935b7b4ee4182e632dfab210b26cff", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e75565c73f935b7b4ee4182e632dfab210b26cff", "html_url": "https://github.com/rust-lang/rust/commit/e75565c73f935b7b4ee4182e632dfab210b26cff", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e75565c73f935b7b4ee4182e632dfab210b26cff/comments", "author": {"login": "kjeremy", "id": 4325700, "node_id": "MDQ6VXNlcjQzMjU3MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/4325700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjeremy", "html_url": "https://github.com/kjeremy", "followers_url": "https://api.github.com/users/kjeremy/followers", "following_url": "https://api.github.com/users/kjeremy/following{/other_user}", "gists_url": "https://api.github.com/users/kjeremy/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjeremy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjeremy/subscriptions", "organizations_url": "https://api.github.com/users/kjeremy/orgs", "repos_url": "https://api.github.com/users/kjeremy/repos", "events_url": "https://api.github.com/users/kjeremy/events{/privacy}", "received_events_url": "https://api.github.com/users/kjeremy/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kjeremy", "id": 4325700, "node_id": "MDQ6VXNlcjQzMjU3MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/4325700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjeremy", "html_url": "https://github.com/kjeremy", "followers_url": "https://api.github.com/users/kjeremy/followers", "following_url": "https://api.github.com/users/kjeremy/following{/other_user}", "gists_url": "https://api.github.com/users/kjeremy/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjeremy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjeremy/subscriptions", "organizations_url": "https://api.github.com/users/kjeremy/orgs", "repos_url": "https://api.github.com/users/kjeremy/repos", "events_url": "https://api.github.com/users/kjeremy/events{/privacy}", "received_events_url": "https://api.github.com/users/kjeremy/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e3ee61f5e81573a2e9415879c8740ac5d59eff06", "url": "https://api.github.com/repos/rust-lang/rust/commits/e3ee61f5e81573a2e9415879c8740ac5d59eff06", "html_url": "https://github.com/rust-lang/rust/commit/e3ee61f5e81573a2e9415879c8740ac5d59eff06"}], "stats": {"total": 28, "additions": 20, "deletions": 8}, "files": [{"sha": "38780726f7b42935b2e9d2be3a7fff1a50af0751", "filename": "crates/rust-analyzer/src/caps.rs", "status": "modified", "additions": 20, "deletions": 8, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/e75565c73f935b7b4ee4182e632dfab210b26cff/crates%2Frust-analyzer%2Fsrc%2Fcaps.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e75565c73f935b7b4ee4182e632dfab210b26cff/crates%2Frust-analyzer%2Fsrc%2Fcaps.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fcaps.rs?ref=e75565c73f935b7b4ee4182e632dfab210b26cff", "patch": "@@ -3,13 +3,13 @@\n use crate::semantic_tokens;\n \n use lsp_types::{\n-    CallHierarchyServerCapability, CodeActionProviderCapability, CodeLensOptions,\n-    CompletionOptions, DocumentOnTypeFormattingOptions, FoldingRangeProviderCapability,\n-    ImplementationProviderCapability, RenameOptions, RenameProviderCapability, SaveOptions,\n-    SelectionRangeProviderCapability, SemanticTokensDocumentProvider, SemanticTokensLegend,\n-    SemanticTokensOptions, ServerCapabilities, SignatureHelpOptions, TextDocumentSyncCapability,\n-    TextDocumentSyncKind, TextDocumentSyncOptions, TypeDefinitionProviderCapability,\n-    WorkDoneProgressOptions,\n+    CallHierarchyServerCapability, CodeActionOptions, CodeActionProviderCapability,\n+    CodeLensOptions, CompletionOptions, DocumentOnTypeFormattingOptions,\n+    FoldingRangeProviderCapability, ImplementationProviderCapability, RenameOptions,\n+    RenameProviderCapability, SaveOptions, SelectionRangeProviderCapability,\n+    SemanticTokensDocumentProvider, SemanticTokensLegend, SemanticTokensOptions,\n+    ServerCapabilities, SignatureHelpOptions, TextDocumentSyncCapability, TextDocumentSyncKind,\n+    TextDocumentSyncOptions, TypeDefinitionProviderCapability, WorkDoneProgressOptions,\n };\n \n pub fn server_capabilities() -> ServerCapabilities {\n@@ -40,7 +40,19 @@ pub fn server_capabilities() -> ServerCapabilities {\n         document_highlight_provider: Some(true),\n         document_symbol_provider: Some(true),\n         workspace_symbol_provider: Some(true),\n-        code_action_provider: Some(CodeActionProviderCapability::Simple(true)),\n+        code_action_provider: Some(CodeActionProviderCapability::Options(CodeActionOptions {\n+            code_action_kinds: Some(vec![\n+                \"\".to_string(),\n+                lsp_types::code_action_kind::QUICKFIX.to_string(),\n+                lsp_types::code_action_kind::REFACTOR.to_string(),\n+                lsp_types::code_action_kind::REFACTOR_EXTRACT.to_string(),\n+                lsp_types::code_action_kind::REFACTOR_INLINE.to_string(),\n+                lsp_types::code_action_kind::REFACTOR_REWRITE.to_string(),\n+                lsp_types::code_action_kind::SOURCE.to_string(),\n+                lsp_types::code_action_kind::SOURCE_ORGANIZE_IMPORTS.to_string(),\n+            ]),\n+            work_done_progress_options: Default::default(),\n+        })),\n         code_lens_provider: Some(CodeLensOptions { resolve_provider: Some(true) }),\n         document_formatting_provider: Some(true),\n         document_range_formatting_provider: None,"}]}