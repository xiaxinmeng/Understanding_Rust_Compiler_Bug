{"sha": "048866bd6b74ef34a8a2e1a3e89f9617834a5d05", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA0ODg2NmJkNmI3NGVmMzRhOGEyZTFhM2U4OWY5NjE3ODM0YTVkMDU=", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2020-09-21T08:40:39Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-09-21T08:40:39Z"}, "message": "Rollup merge of #76958 - est31:ns, r=oli-obk\n\nReplace manual as_nanos and as_secs_f64 reimplementations", "tree": {"sha": "b6fbd667abecb8dffbbdf7a00d7429107500dc12", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b6fbd667abecb8dffbbdf7a00d7429107500dc12"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/048866bd6b74ef34a8a2e1a3e89f9617834a5d05", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfaGcICRBK7hj4Ov3rIwAAdHIIAKOLWeVLrldnoSf4wnyGg9zX\nudUH1EE0M/DC1fLymViSkZ23iI4TE5W5lynPJtNPdyRAouLazDx35qBFc1s7rs2b\nBcowrePfIROR61i1FZC0KPHf/1lOBaWBZGMQDTzYmD/5Cb7OLm0WteYSwu4PzhMX\nwuGj5IYlt7UoU6fdbTl+IRQLuykzegRCUMBEAsAK4+juMIr37F2wQFE4w3t8tYXa\n2oNa3tFJGh+VEc1hgH3NjXMBnNT1hhGFyHEiTBstK+lqkSJj659ddphKU6ZVea53\nghp7zG+AwS4kqo8C22qziX8vnVVPdjJt8NSAafsGNu0RHoBRIMzpuWndb2ObJyw=\n=SJrj\n-----END PGP SIGNATURE-----\n", "payload": "tree b6fbd667abecb8dffbbdf7a00d7429107500dc12\nparent b670b86353ac42b98a969de6f804f9718a56097d\nparent 43193dcb882466163436057e50c96bb74d9bf50f\nauthor Ralf Jung <post@ralfj.de> 1600677639 +0200\ncommitter GitHub <noreply@github.com> 1600677639 +0200\n\nRollup merge of #76958 - est31:ns, r=oli-obk\n\nReplace manual as_nanos and as_secs_f64 reimplementations\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/048866bd6b74ef34a8a2e1a3e89f9617834a5d05", "html_url": "https://github.com/rust-lang/rust/commit/048866bd6b74ef34a8a2e1a3e89f9617834a5d05", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/048866bd6b74ef34a8a2e1a3e89f9617834a5d05/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b670b86353ac42b98a969de6f804f9718a56097d", "url": "https://api.github.com/repos/rust-lang/rust/commits/b670b86353ac42b98a969de6f804f9718a56097d", "html_url": "https://github.com/rust-lang/rust/commit/b670b86353ac42b98a969de6f804f9718a56097d"}, {"sha": "43193dcb882466163436057e50c96bb74d9bf50f", "url": "https://api.github.com/repos/rust-lang/rust/commits/43193dcb882466163436057e50c96bb74d9bf50f", "html_url": "https://github.com/rust-lang/rust/commit/43193dcb882466163436057e50c96bb74d9bf50f"}], "stats": {"total": 13, "additions": 3, "deletions": 10}, "files": [{"sha": "f35708b1d0965c4bc734a8f417ae9faf1d202102", "filename": "compiler/rustc_codegen_llvm/src/base.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/048866bd6b74ef34a8a2e1a3e89f9617834a5d05/compiler%2Frustc_codegen_llvm%2Fsrc%2Fbase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/048866bd6b74ef34a8a2e1a3e89f9617834a5d05/compiler%2Frustc_codegen_llvm%2Fsrc%2Fbase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_llvm%2Fsrc%2Fbase.rs?ref=048866bd6b74ef34a8a2e1a3e89f9617834a5d05", "patch": "@@ -108,7 +108,7 @@ pub fn compile_codegen_unit(\n \n     // We assume that the cost to run LLVM on a CGU is proportional to\n     // the time we needed for codegenning it.\n-    let cost = time_to_codegen.as_secs() * 1_000_000_000 + time_to_codegen.subsec_nanos() as u64;\n+    let cost = time_to_codegen.as_nanos() as u64;\n \n     fn module_codegen(tcx: TyCtxt<'_>, cgu_name: Symbol) -> ModuleCodegen<ModuleLlvm> {\n         let cgu = tcx.codegen_unit(cgu_name);"}, {"sha": "363879cbb1d197329ba35419a3917f398b3d6b32", "filename": "compiler/rustc_data_structures/src/profiling.rs", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/048866bd6b74ef34a8a2e1a3e89f9617834a5d05/compiler%2Frustc_data_structures%2Fsrc%2Fprofiling.rs", "raw_url": "https://github.com/rust-lang/rust/raw/048866bd6b74ef34a8a2e1a3e89f9617834a5d05/compiler%2Frustc_data_structures%2Fsrc%2Fprofiling.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_data_structures%2Fsrc%2Fprofiling.rs?ref=048866bd6b74ef34a8a2e1a3e89f9617834a5d05", "patch": "@@ -600,10 +600,7 @@ pub fn print_time_passes_entry(do_it: bool, what: &str, dur: Duration) {\n // Hack up our own formatting for the duration to make it easier for scripts\n // to parse (always use the same number of decimal places and the same unit).\n pub fn duration_to_secs_str(dur: std::time::Duration) -> String {\n-    const NANOS_PER_SEC: f64 = 1_000_000_000.0;\n-    let secs = dur.as_secs() as f64 + dur.subsec_nanos() as f64 / NANOS_PER_SEC;\n-\n-    format!(\"{:.3}\", secs)\n+    format!(\"{:.3}\", dur.as_secs_f64())\n }\n \n // Memory reporting"}, {"sha": "b709c76329637247c83572149a13240ac09f5264", "filename": "library/test/src/bench.rs", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/048866bd6b74ef34a8a2e1a3e89f9617834a5d05/library%2Ftest%2Fsrc%2Fbench.rs", "raw_url": "https://github.com/rust-lang/rust/raw/048866bd6b74ef34a8a2e1a3e89f9617834a5d05/library%2Ftest%2Fsrc%2Fbench.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Ftest%2Fsrc%2Fbench.rs?ref=048866bd6b74ef34a8a2e1a3e89f9617834a5d05", "patch": "@@ -98,10 +98,6 @@ fn fmt_thousands_sep(mut n: usize, sep: char) -> String {\n     output\n }\n \n-fn ns_from_dur(dur: Duration) -> u64 {\n-    dur.as_secs() * 1_000_000_000 + (dur.subsec_nanos() as u64)\n-}\n-\n fn ns_iter_inner<T, F>(inner: &mut F, k: u64) -> u64\n where\n     F: FnMut() -> T,\n@@ -110,7 +106,7 @@ where\n     for _ in 0..k {\n         black_box(inner());\n     }\n-    ns_from_dur(start.elapsed())\n+    start.elapsed().as_nanos() as u64\n }\n \n pub fn iter<T, F>(inner: &mut F) -> stats::Summary"}]}