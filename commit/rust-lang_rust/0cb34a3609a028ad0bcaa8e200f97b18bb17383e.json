{"sha": "0cb34a3609a028ad0bcaa8e200f97b18bb17383e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBjYjM0YTM2MDlhMDI4YWQwYmNhYThlMjAwZjk3YjE4YmIxNzM4M2U=", "commit": {"author": {"name": "Jorge Aparicio", "email": "japaricious@gmail.com", "date": "2015-01-04T14:13:48Z"}, "committer": {"name": "Jorge Aparicio", "email": "japaricious@gmail.com", "date": "2015-01-05T22:22:13Z"}, "message": "EncodeInlinedItem: convert to \"unboxed\" closures", "tree": {"sha": "70006a3a4ae0be2805f3953decf720af1fc0c5c8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/70006a3a4ae0be2805f3953decf720af1fc0c5c8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0cb34a3609a028ad0bcaa8e200f97b18bb17383e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0cb34a3609a028ad0bcaa8e200f97b18bb17383e", "html_url": "https://github.com/rust-lang/rust/commit/0cb34a3609a028ad0bcaa8e200f97b18bb17383e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0cb34a3609a028ad0bcaa8e200f97b18bb17383e/comments", "author": null, "committer": null, "parents": [{"sha": "bd9eef7ac64b4263c9db25d74b7cc57958909ddc", "url": "https://api.github.com/repos/rust-lang/rust/commits/bd9eef7ac64b4263c9db25d74b7cc57958909ddc", "html_url": "https://github.com/rust-lang/rust/commit/bd9eef7ac64b4263c9db25d74b7cc57958909ddc"}], "stats": {"total": 9, "additions": 4, "deletions": 5}, "files": [{"sha": "14ab471a4b8314c77fd4c626f9dfbca4c44ed939", "filename": "src/librustc/metadata/encoder.rs", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/0cb34a3609a028ad0bcaa8e200f97b18bb17383e/src%2Flibrustc%2Fmetadata%2Fencoder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0cb34a3609a028ad0bcaa8e200f97b18bb17383e/src%2Flibrustc%2Fmetadata%2Fencoder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmetadata%2Fencoder.rs?ref=0cb34a3609a028ad0bcaa8e200f97b18bb17383e", "patch": "@@ -59,9 +59,8 @@ pub enum InlinedItemRef<'a> {\n \n pub type Encoder<'a> = writer::Encoder<'a, SeekableMemWriter>;\n \n-pub type EncodeInlinedItem<'a> = |ecx: &EncodeContext,\n-                                  rbml_w: &mut Encoder,\n-                                  ii: InlinedItemRef|: 'a;\n+pub type EncodeInlinedItem<'a> =\n+    Box<FnMut(&EncodeContext, &mut Encoder, InlinedItemRef) + 'a>;\n \n pub struct EncodeParams<'a, 'tcx: 'a> {\n     pub diag: &'a SpanHandler,\n@@ -953,7 +952,7 @@ fn encode_inlined_item(ecx: &EncodeContext,\n                        ii: InlinedItemRef) {\n     let mut eii = ecx.encode_inlined_item.borrow_mut();\n     let eii: &mut EncodeInlinedItem = &mut *eii;\n-    (*eii)(ecx, rbml_w, ii)\n+    eii.call_mut((ecx, rbml_w, ii))\n }\n \n const FN_FAMILY: char = 'f';"}, {"sha": "29811ad6dd5f71b3550b971fae671fdc8985a794", "filename": "src/librustc_trans/trans/base.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0cb34a3609a028ad0bcaa8e200f97b18bb17383e/src%2Flibrustc_trans%2Ftrans%2Fbase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0cb34a3609a028ad0bcaa8e200f97b18bb17383e/src%2Flibrustc_trans%2Ftrans%2Fbase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Ftrans%2Fbase.rs?ref=0cb34a3609a028ad0bcaa8e200f97b18bb17383e", "patch": "@@ -2978,7 +2978,7 @@ pub fn write_metadata(cx: &SharedCrateContext, krate: &ast::Crate) -> Vec<u8> {\n     }\n \n     let encode_inlined_item: encoder::EncodeInlinedItem =\n-        |ecx, rbml_w, ii| astencode::encode_inlined_item(ecx, rbml_w, ii);\n+        box |ecx, rbml_w, ii| astencode::encode_inlined_item(ecx, rbml_w, ii);\n \n     let encode_parms = crate_ctxt_to_encode_parms(cx, encode_inlined_item);\n     let metadata = encoder::encode_metadata(encode_parms, krate);"}]}