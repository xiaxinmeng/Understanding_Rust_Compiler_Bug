{"sha": "c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM0ZDlmNDJmNmQyOWI5YzdiZjhmNmNhOThiZTAyNjIxNzI0Y2I5ZDI=", "commit": {"author": {"name": "Dylan DPC", "email": "dylan.dpc@gmail.com", "date": "2020-04-27T20:14:55Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-04-27T20:14:55Z"}, "message": "Rollup merge of #67841 - sfackler:can-vector, r=Amaneiu\n\nAdd Read/Write::can_read/write_vectored\n\nWhen working with an arbitrary reader or writer, code that uses vectored\noperations may end up being slower than code that copies into a single\nbuffer when the underlying reader or writer doesn't actually support\nvectored operations. These new methods allow you to ask the reader or\nwiter up front if vectored operations are efficiently supported.\n\nCurrently, you have to use some heuristics to guess by e.g. checking if\nthe read or write only accessed the first buffer. Hyper is one concrete\nexample of a library that has to do this dynamically:\nhttps://github.com/hyperium/hyper/blob/0eaf304644a396895a4ce1f0146e596640bb666a/src/proto/h1/io.rs#L582-L594", "tree": {"sha": "faf85c1d2ef5b674504ce069afa249e1f4e22b31", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/faf85c1d2ef5b674504ce069afa249e1f4e22b31"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJepz1ACRBK7hj4Ov3rIwAAdHIIAKIYJy7TCEP9WWKXuZIFmI0P\nyhJYIGEzkisVJQslhY299CetR2o8j7fJayJ6pCr4SIJwAN7yZkPXcjI2CaB2LRBv\n2coy84cEOr4CQn5IfYzIMlcoRUsCVDvXEj6Rao7TXU7tJLk6jVx2cxa1t6oP7I2v\noPobwYchSmwdODIsCagDQz7I01UVDRcxXFBvWaY1NpWkMcMxP6ph7+vtnHnWsdhi\nqys8fvyJLg0jJBYfUusk0TaLtUurjhbbVJyhooyNH1d88bU8nXF5750dO2qCXZqM\nAY/NWkOZCVLPMZyLe0ssWDP5gZATH6Zl/M7tAXh0khICquOt1QifQxb+tJd8DwU=\n=TXHc\n-----END PGP SIGNATURE-----\n", "payload": "tree faf85c1d2ef5b674504ce069afa249e1f4e22b31\nparent 46ec74e60f238f694b46c976d6217e7cf8d4cf1a\nparent c68f23ff6d670e579e0951352e20a1495b66fce0\nauthor Dylan DPC <dylan.dpc@gmail.com> 1588018495 +0200\ncommitter GitHub <noreply@github.com> 1588018495 +0200\n\nRollup merge of #67841 - sfackler:can-vector, r=Amaneiu\n\nAdd Read/Write::can_read/write_vectored\n\nWhen working with an arbitrary reader or writer, code that uses vectored\noperations may end up being slower than code that copies into a single\nbuffer when the underlying reader or writer doesn't actually support\nvectored operations. These new methods allow you to ask the reader or\nwiter up front if vectored operations are efficiently supported.\n\nCurrently, you have to use some heuristics to guess by e.g. checking if\nthe read or write only accessed the first buffer. Hyper is one concrete\nexample of a library that has to do this dynamically:\nhttps://github.com/hyperium/hyper/blob/0eaf304644a396895a4ce1f0146e596640bb666a/src/proto/h1/io.rs#L582-L594\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "html_url": "https://github.com/rust-lang/rust/commit/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "46ec74e60f238f694b46c976d6217e7cf8d4cf1a", "url": "https://api.github.com/repos/rust-lang/rust/commits/46ec74e60f238f694b46c976d6217e7cf8d4cf1a", "html_url": "https://github.com/rust-lang/rust/commit/46ec74e60f238f694b46c976d6217e7cf8d4cf1a"}, {"sha": "c68f23ff6d670e579e0951352e20a1495b66fce0", "url": "https://api.github.com/repos/rust-lang/rust/commits/c68f23ff6d670e579e0951352e20a1495b66fce0", "html_url": "https://github.com/rust-lang/rust/commit/c68f23ff6d670e579e0951352e20a1495b66fce0"}], "stats": {"total": 565, "additions": 565, "deletions": 0}, "files": [{"sha": "f4c164a324e32e387bd157dbc6f2f78993e7d348", "filename": "src/libstd/fs.rs", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Ffs.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -659,6 +659,11 @@ impl Read for File {\n         self.inner.read_vectored(bufs)\n     }\n \n+    #[inline]\n+    fn is_read_vectored(&self) -> bool {\n+        self.inner.is_read_vectored()\n+    }\n+\n     #[inline]\n     unsafe fn initializer(&self) -> Initializer {\n         Initializer::nop()\n@@ -674,6 +679,11 @@ impl Write for File {\n         self.inner.write_vectored(bufs)\n     }\n \n+    #[inline]\n+    fn is_write_vectored(&self) -> bool {\n+        self.inner.is_write_vectored()\n+    }\n+\n     fn flush(&mut self) -> io::Result<()> {\n         self.inner.flush()\n     }\n@@ -694,6 +704,11 @@ impl Read for &File {\n         self.inner.read_vectored(bufs)\n     }\n \n+    #[inline]\n+    fn is_read_vectored(&self) -> bool {\n+        self.inner.is_read_vectored()\n+    }\n+\n     #[inline]\n     unsafe fn initializer(&self) -> Initializer {\n         Initializer::nop()\n@@ -709,6 +724,11 @@ impl Write for &File {\n         self.inner.write_vectored(bufs)\n     }\n \n+    #[inline]\n+    fn is_write_vectored(&self) -> bool {\n+        self.inner.is_write_vectored()\n+    }\n+\n     fn flush(&mut self) -> io::Result<()> {\n         self.inner.flush()\n     }"}, {"sha": "046b1a68880248577058f819601a6f34e541cd08", "filename": "src/libstd/io/buffered.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fio%2Fbuffered.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fio%2Fbuffered.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Fbuffered.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -292,6 +292,10 @@ impl<R: Read> Read for BufReader<R> {\n         Ok(nread)\n     }\n \n+    fn is_read_vectored(&self) -> bool {\n+        self.inner.is_read_vectored()\n+    }\n+\n     // we can't skip unconditionally because of the large buffer case in read.\n     unsafe fn initializer(&self) -> Initializer {\n         self.inner.initializer()\n@@ -680,6 +684,10 @@ impl<W: Write> Write for BufWriter<W> {\n         }\n     }\n \n+    fn is_write_vectored(&self) -> bool {\n+        self.get_ref().is_write_vectored()\n+    }\n+\n     fn flush(&mut self) -> io::Result<()> {\n         self.flush_buf().and_then(|()| self.get_mut().flush())\n     }"}, {"sha": "f3e3fc81a5d8249d029ed65d82de764bdeddf2dd", "filename": "src/libstd/io/cursor.rs", "status": "modified", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fio%2Fcursor.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fio%2Fcursor.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Fcursor.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -266,6 +266,10 @@ where\n         Ok(nread)\n     }\n \n+    fn is_read_vectored(&self) -> bool {\n+        true\n+    }\n+\n     fn read_exact(&mut self, buf: &mut [u8]) -> io::Result<()> {\n         let n = buf.len();\n         Read::read_exact(&mut self.fill_buf()?, buf)?;\n@@ -372,6 +376,11 @@ impl Write for Cursor<&mut [u8]> {\n         slice_write_vectored(&mut self.pos, self.inner, bufs)\n     }\n \n+    #[inline]\n+    fn is_write_vectored(&self) -> bool {\n+        true\n+    }\n+\n     #[inline]\n     fn flush(&mut self) -> io::Result<()> {\n         Ok(())\n@@ -388,6 +397,11 @@ impl Write for Cursor<&mut Vec<u8>> {\n         vec_write_vectored(&mut self.pos, self.inner, bufs)\n     }\n \n+    #[inline]\n+    fn is_write_vectored(&self) -> bool {\n+        true\n+    }\n+\n     #[inline]\n     fn flush(&mut self) -> io::Result<()> {\n         Ok(())\n@@ -404,6 +418,11 @@ impl Write for Cursor<Vec<u8>> {\n         vec_write_vectored(&mut self.pos, &mut self.inner, bufs)\n     }\n \n+    #[inline]\n+    fn is_write_vectored(&self) -> bool {\n+        true\n+    }\n+\n     #[inline]\n     fn flush(&mut self) -> io::Result<()> {\n         Ok(())\n@@ -422,6 +441,11 @@ impl Write for Cursor<Box<[u8]>> {\n         slice_write_vectored(&mut self.pos, &mut self.inner, bufs)\n     }\n \n+    #[inline]\n+    fn is_write_vectored(&self) -> bool {\n+        true\n+    }\n+\n     #[inline]\n     fn flush(&mut self) -> io::Result<()> {\n         Ok(())"}, {"sha": "01dff0b3eb3909c25b05057e84089a43ca763699", "filename": "src/libstd/io/impls.rs", "status": "modified", "additions": 35, "deletions": 0, "changes": 35, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fio%2Fimpls.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fio%2Fimpls.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Fimpls.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -20,6 +20,11 @@ impl<R: Read + ?Sized> Read for &mut R {\n         (**self).read_vectored(bufs)\n     }\n \n+    #[inline]\n+    fn is_read_vectored(&self) -> bool {\n+        (**self).is_read_vectored()\n+    }\n+\n     #[inline]\n     unsafe fn initializer(&self) -> Initializer {\n         (**self).initializer()\n@@ -52,6 +57,11 @@ impl<W: Write + ?Sized> Write for &mut W {\n         (**self).write_vectored(bufs)\n     }\n \n+    #[inline]\n+    fn is_write_vectored(&self) -> bool {\n+        (**self).is_write_vectored()\n+    }\n+\n     #[inline]\n     fn flush(&mut self) -> io::Result<()> {\n         (**self).flush()\n@@ -109,6 +119,11 @@ impl<R: Read + ?Sized> Read for Box<R> {\n         (**self).read_vectored(bufs)\n     }\n \n+    #[inline]\n+    fn is_read_vectored(&self) -> bool {\n+        (**self).is_read_vectored()\n+    }\n+\n     #[inline]\n     unsafe fn initializer(&self) -> Initializer {\n         (**self).initializer()\n@@ -141,6 +156,11 @@ impl<W: Write + ?Sized> Write for Box<W> {\n         (**self).write_vectored(bufs)\n     }\n \n+    #[inline]\n+    fn is_write_vectored(&self) -> bool {\n+        (**self).is_write_vectored()\n+    }\n+\n     #[inline]\n     fn flush(&mut self) -> io::Result<()> {\n         (**self).flush()\n@@ -240,6 +260,11 @@ impl Read for &[u8] {\n         Ok(nread)\n     }\n \n+    #[inline]\n+    fn is_read_vectored(&self) -> bool {\n+        true\n+    }\n+\n     #[inline]\n     unsafe fn initializer(&self) -> Initializer {\n         Initializer::nop()\n@@ -316,6 +341,11 @@ impl Write for &mut [u8] {\n         Ok(nwritten)\n     }\n \n+    #[inline]\n+    fn is_write_vectored(&self) -> bool {\n+        true\n+    }\n+\n     #[inline]\n     fn write_all(&mut self, data: &[u8]) -> io::Result<()> {\n         if self.write(data)? == data.len() {\n@@ -351,6 +381,11 @@ impl Write for Vec<u8> {\n         Ok(len)\n     }\n \n+    #[inline]\n+    fn is_write_vectored(&self) -> bool {\n+        true\n+    }\n+\n     #[inline]\n     fn write_all(&mut self, buf: &[u8]) -> io::Result<()> {\n         self.extend_from_slice(buf);"}, {"sha": "9cfb1728c04e4fc07128d4864d0bb6091507fe32", "filename": "src/libstd/io/mod.rs", "status": "modified", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fio%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fio%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Fmod.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -256,6 +256,7 @@\n //! [`Read::read`]: trait.Read.html#tymethod.read\n //! [`Result`]: ../result/enum.Result.html\n //! [`.unwrap()`]: ../result/enum.Result.html#method.unwrap\n+// ignore-tidy-filelength\n \n #![stable(feature = \"rust1\", since = \"1.0.0\")]\n \n@@ -580,6 +581,19 @@ pub trait Read {\n         default_read_vectored(|b| self.read(b), bufs)\n     }\n \n+    /// Determines if this `Read`er has an efficient `read_vectored`\n+    /// implementation.\n+    ///\n+    /// If a `Read`er does not override the default `read_vectored`\n+    /// implementation, code using it may want to avoid the method all together\n+    /// and coalesce writes into a single buffer for higher performance.\n+    ///\n+    /// The default implementation returns `false`.\n+    #[unstable(feature = \"can_vector\", issue = \"69941\")]\n+    fn is_read_vectored(&self) -> bool {\n+        false\n+    }\n+\n     /// Determines if this `Read`er can work with buffers of uninitialized\n     /// memory.\n     ///\n@@ -1304,6 +1318,19 @@ pub trait Write {\n         default_write_vectored(|b| self.write(b), bufs)\n     }\n \n+    /// Determines if this `Write`er has an efficient `write_vectored`\n+    /// implementation.\n+    ///\n+    /// If a `Write`er does not override the default `write_vectored`\n+    /// implementation, code using it may want to avoid the method all together\n+    /// and coalesce writes into a single buffer for higher performance.\n+    ///\n+    /// The default implementation returns `false`.\n+    #[unstable(feature = \"can_vector\", issue = \"69941\")]\n+    fn is_write_vectored(&self) -> bool {\n+        false\n+    }\n+\n     /// Flush this output stream, ensuring that all intermediately buffered\n     /// contents reach their destination.\n     ///"}, {"sha": "b65b150d2c3a18ef41bf55d91b36abbce3dd5dac", "filename": "src/libstd/io/stdio.rs", "status": "modified", "additions": 56, "deletions": 0, "changes": 56, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fio%2Fstdio.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fio%2Fstdio.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Fstdio.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -87,6 +87,11 @@ impl Read for StdinRaw {\n         self.0.read_vectored(bufs)\n     }\n \n+    #[inline]\n+    fn is_read_vectored(&self) -> bool {\n+        self.0.is_read_vectored()\n+    }\n+\n     #[inline]\n     unsafe fn initializer(&self) -> Initializer {\n         Initializer::nop()\n@@ -101,6 +106,11 @@ impl Write for StdoutRaw {\n         self.0.write_vectored(bufs)\n     }\n \n+    #[inline]\n+    fn is_write_vectored(&self) -> bool {\n+        self.0.is_write_vectored()\n+    }\n+\n     fn flush(&mut self) -> io::Result<()> {\n         self.0.flush()\n     }\n@@ -114,6 +124,11 @@ impl Write for StderrRaw {\n         self.0.write_vectored(bufs)\n     }\n \n+    #[inline]\n+    fn is_write_vectored(&self) -> bool {\n+        self.0.is_write_vectored()\n+    }\n+\n     fn flush(&mut self) -> io::Result<()> {\n         self.0.flush()\n     }\n@@ -140,6 +155,14 @@ impl<W: io::Write> io::Write for Maybe<W> {\n         }\n     }\n \n+    #[inline]\n+    fn is_write_vectored(&self) -> bool {\n+        match self {\n+            Maybe::Real(w) => w.is_write_vectored(),\n+            Maybe::Fake => true,\n+        }\n+    }\n+\n     fn flush(&mut self) -> io::Result<()> {\n         match *self {\n             Maybe::Real(ref mut w) => handle_ebadf(w.flush(), ()),\n@@ -162,6 +185,14 @@ impl<R: io::Read> io::Read for Maybe<R> {\n             Maybe::Fake => Ok(0),\n         }\n     }\n+\n+    #[inline]\n+    fn is_read_vectored(&self) -> bool {\n+        match self {\n+            Maybe::Real(w) => w.is_read_vectored(),\n+            Maybe::Fake => true,\n+        }\n+    }\n }\n \n fn handle_ebadf<T>(r: io::Result<T>, default: T) -> io::Result<T> {\n@@ -352,6 +383,10 @@ impl Read for Stdin {\n         self.lock().read_vectored(bufs)\n     }\n     #[inline]\n+    fn is_read_vectored(&self) -> bool {\n+        self.lock().is_read_vectored()\n+    }\n+    #[inline]\n     unsafe fn initializer(&self) -> Initializer {\n         Initializer::nop()\n     }\n@@ -376,6 +411,11 @@ impl Read for StdinLock<'_> {\n         self.inner.read_vectored(bufs)\n     }\n \n+    #[inline]\n+    fn is_read_vectored(&self) -> bool {\n+        self.inner.is_read_vectored()\n+    }\n+\n     #[inline]\n     unsafe fn initializer(&self) -> Initializer {\n         Initializer::nop()\n@@ -543,6 +583,10 @@ impl Write for Stdout {\n     fn write_vectored(&mut self, bufs: &[IoSlice<'_>]) -> io::Result<usize> {\n         self.lock().write_vectored(bufs)\n     }\n+    #[inline]\n+    fn is_write_vectored(&self) -> bool {\n+        self.lock().is_write_vectored()\n+    }\n     fn flush(&mut self) -> io::Result<()> {\n         self.lock().flush()\n     }\n@@ -561,6 +605,10 @@ impl Write for StdoutLock<'_> {\n     fn write_vectored(&mut self, bufs: &[IoSlice<'_>]) -> io::Result<usize> {\n         self.inner.borrow_mut().write_vectored(bufs)\n     }\n+    #[inline]\n+    fn is_write_vectored(&self) -> bool {\n+        self.inner.borrow_mut().is_write_vectored()\n+    }\n     fn flush(&mut self) -> io::Result<()> {\n         self.inner.borrow_mut().flush()\n     }\n@@ -709,6 +757,10 @@ impl Write for Stderr {\n     fn write_vectored(&mut self, bufs: &[IoSlice<'_>]) -> io::Result<usize> {\n         self.lock().write_vectored(bufs)\n     }\n+    #[inline]\n+    fn is_write_vectored(&self) -> bool {\n+        self.lock().is_write_vectored()\n+    }\n     fn flush(&mut self) -> io::Result<()> {\n         self.lock().flush()\n     }\n@@ -727,6 +779,10 @@ impl Write for StderrLock<'_> {\n     fn write_vectored(&mut self, bufs: &[IoSlice<'_>]) -> io::Result<usize> {\n         self.inner.borrow_mut().write_vectored(bufs)\n     }\n+    #[inline]\n+    fn is_write_vectored(&self) -> bool {\n+        self.inner.borrow_mut().is_write_vectored()\n+    }\n     fn flush(&mut self) -> io::Result<()> {\n         self.inner.borrow_mut().flush()\n     }"}, {"sha": "b9d5dc27db0063d80bde763d74e51400f361e6e0", "filename": "src/libstd/io/util.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fio%2Futil.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fio%2Futil.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Futil.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -179,6 +179,11 @@ impl Read for Repeat {\n         Ok(nwritten)\n     }\n \n+    #[inline]\n+    fn is_read_vectored(&self) -> bool {\n+        true\n+    }\n+\n     #[inline]\n     unsafe fn initializer(&self) -> Initializer {\n         Initializer::nop()\n@@ -235,6 +240,11 @@ impl Write for Sink {\n         Ok(total_len)\n     }\n \n+    #[inline]\n+    fn is_write_vectored(&self) -> bool {\n+        true\n+    }\n+\n     #[inline]\n     fn flush(&mut self) -> io::Result<()> {\n         Ok(())"}, {"sha": "ac07af5e278fbe902425aeaab38e12799cebf8bb", "filename": "src/libstd/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Flib.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -243,6 +243,7 @@\n #![feature(box_syntax)]\n #![feature(c_variadic)]\n #![feature(cfg_accessible)]\n+#![feature(can_vector)]\n #![feature(cfg_target_has_atomic)]\n #![feature(cfg_target_thread_local)]\n #![feature(char_error_internals)]"}, {"sha": "9ac54dd5f7a65e328092e72bf1aae22438310125", "filename": "src/libstd/net/tcp.rs", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fnet%2Ftcp.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fnet%2Ftcp.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fnet%2Ftcp.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -576,6 +576,11 @@ impl Read for TcpStream {\n         self.0.read_vectored(bufs)\n     }\n \n+    #[inline]\n+    fn is_read_vectored(&self) -> bool {\n+        self.0.is_read_vectored()\n+    }\n+\n     #[inline]\n     unsafe fn initializer(&self) -> Initializer {\n         Initializer::nop()\n@@ -591,6 +596,11 @@ impl Write for TcpStream {\n         self.0.write_vectored(bufs)\n     }\n \n+    #[inline]\n+    fn is_write_vectored(&self) -> bool {\n+        self.0.is_write_vectored()\n+    }\n+\n     fn flush(&mut self) -> io::Result<()> {\n         Ok(())\n     }\n@@ -605,6 +615,11 @@ impl Read for &TcpStream {\n         self.0.read_vectored(bufs)\n     }\n \n+    #[inline]\n+    fn is_read_vectored(&self) -> bool {\n+        self.0.is_read_vectored()\n+    }\n+\n     #[inline]\n     unsafe fn initializer(&self) -> Initializer {\n         Initializer::nop()\n@@ -620,6 +635,11 @@ impl Write for &TcpStream {\n         self.0.write_vectored(bufs)\n     }\n \n+    #[inline]\n+    fn is_write_vectored(&self) -> bool {\n+        self.0.is_write_vectored()\n+    }\n+\n     fn flush(&mut self) -> io::Result<()> {\n         Ok(())\n     }"}, {"sha": "b457d190b951066d429b92cafbd1b6b0564de0a4", "filename": "src/libstd/process.rs", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fprocess.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fprocess.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fprocess.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -245,6 +245,10 @@ impl Write for ChildStdin {\n         self.inner.write_vectored(bufs)\n     }\n \n+    fn is_write_vectored(&self) -> bool {\n+        self.inner.is_write_vectored()\n+    }\n+\n     fn flush(&mut self) -> io::Result<()> {\n         Ok(())\n     }\n@@ -300,6 +304,11 @@ impl Read for ChildStdout {\n         self.inner.read_vectored(bufs)\n     }\n \n+    #[inline]\n+    fn is_read_vectored(&self) -> bool {\n+        self.inner.is_read_vectored()\n+    }\n+\n     #[inline]\n     unsafe fn initializer(&self) -> Initializer {\n         Initializer::nop()\n@@ -356,6 +365,11 @@ impl Read for ChildStderr {\n         self.inner.read_vectored(bufs)\n     }\n \n+    #[inline]\n+    fn is_read_vectored(&self) -> bool {\n+        self.inner.is_read_vectored()\n+    }\n+\n     #[inline]\n     unsafe fn initializer(&self) -> Initializer {\n         Initializer::nop()"}, {"sha": "ecb5b51cccdcd965d85e9ee8e22ecb878d876719", "filename": "src/libstd/sys/cloudabi/shims/fs.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fcloudabi%2Fshims%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fcloudabi%2Fshims%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fcloudabi%2Fshims%2Ffs.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -202,6 +202,10 @@ impl File {\n         match self.0 {}\n     }\n \n+    pub fn is_read_vectored(&self) -> bool {\n+        match self.0 {}\n+    }\n+\n     pub fn write(&self, _buf: &[u8]) -> io::Result<usize> {\n         match self.0 {}\n     }\n@@ -210,6 +214,10 @@ impl File {\n         match self.0 {}\n     }\n \n+    pub fn is_write_vectored(&self) -> bool {\n+        match self.0 {}\n+    }\n+\n     pub fn flush(&self) -> io::Result<()> {\n         match self.0 {}\n     }"}, {"sha": "375aaab405dff13b9de4ae81c4d104b622182647", "filename": "src/libstd/sys/cloudabi/shims/net.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fcloudabi%2Fshims%2Fnet.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fcloudabi%2Fshims%2Fnet.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fcloudabi%2Fshims%2Fnet.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -47,6 +47,10 @@ impl TcpStream {\n         match self.0 {}\n     }\n \n+    pub fn is_read_vectored(&self) -> bool {\n+        match self.0 {}\n+    }\n+\n     pub fn write(&self, _: &[u8]) -> io::Result<usize> {\n         match self.0 {}\n     }\n@@ -55,6 +59,10 @@ impl TcpStream {\n         match self.0 {}\n     }\n \n+    pub fn is_write_vectored(&self) -> bool {\n+        match self.0 {}\n+    }\n+\n     pub fn peer_addr(&self) -> io::Result<SocketAddr> {\n         match self.0 {}\n     }"}, {"sha": "10d0925823eb94660278ce2390c892c093d7e3c6", "filename": "src/libstd/sys/cloudabi/shims/pipe.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fcloudabi%2Fshims%2Fpipe.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fcloudabi%2Fshims%2Fpipe.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fcloudabi%2Fshims%2Fpipe.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -12,6 +12,10 @@ impl AnonPipe {\n         match self.0 {}\n     }\n \n+    pub fn is_read_vectored(&self) -> bool {\n+        match self.0 {}\n+    }\n+\n     pub fn write(&self, _buf: &[u8]) -> io::Result<usize> {\n         match self.0 {}\n     }\n@@ -20,6 +24,10 @@ impl AnonPipe {\n         match self.0 {}\n     }\n \n+    pub fn is_write_vectored(&self) -> bool {\n+        match self.0 {}\n+    }\n+\n     pub fn diverge(&self) -> ! {\n         match self.0 {}\n     }"}, {"sha": "82ccab1462ba868bc3a9315bcac5a0716ca2830e", "filename": "src/libstd/sys/hermit/fs.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fhermit%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fhermit%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fhermit%2Ffs.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -301,6 +301,11 @@ impl File {\n         crate::io::default_read_vectored(|buf| self.read(buf), bufs)\n     }\n \n+    #[inline]\n+    pub fn is_read_vectored(&self) -> bool {\n+        false\n+    }\n+\n     pub fn write(&self, buf: &[u8]) -> io::Result<usize> {\n         self.0.write(buf)\n     }\n@@ -309,6 +314,11 @@ impl File {\n         crate::io::default_write_vectored(|buf| self.write(buf), bufs)\n     }\n \n+    #[inline]\n+    pub fn is_write_vectored(&self) -> bool {\n+        false\n+    }\n+\n     pub fn flush(&self) -> io::Result<()> {\n         Ok(())\n     }"}, {"sha": "5b5379c8b0581fe334096dd77a2940c55f5634df", "filename": "src/libstd/sys/hermit/net.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fhermit%2Fnet.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fhermit%2Fnet.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fhermit%2Fnet.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -99,6 +99,11 @@ impl TcpStream {\n         Ok(size)\n     }\n \n+    #[inline]\n+    pub fn is_read_vectored(&self) -> bool {\n+        true\n+    }\n+\n     pub fn write(&self, buffer: &[u8]) -> io::Result<usize> {\n         self.write_vectored(&[IoSlice::new(buffer)])\n     }\n@@ -114,6 +119,11 @@ impl TcpStream {\n         Ok(size)\n     }\n \n+    #[inline]\n+    pub fn is_write_vectored(&self) -> bool {\n+        true\n+    }\n+\n     pub fn peer_addr(&self) -> io::Result<SocketAddr> {\n         Err(io::Error::new(ErrorKind::Other, \"peer_addr isn't supported\"))\n     }"}, {"sha": "10d0925823eb94660278ce2390c892c093d7e3c6", "filename": "src/libstd/sys/hermit/pipe.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fhermit%2Fpipe.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fhermit%2Fpipe.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fhermit%2Fpipe.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -12,6 +12,10 @@ impl AnonPipe {\n         match self.0 {}\n     }\n \n+    pub fn is_read_vectored(&self) -> bool {\n+        match self.0 {}\n+    }\n+\n     pub fn write(&self, _buf: &[u8]) -> io::Result<usize> {\n         match self.0 {}\n     }\n@@ -20,6 +24,10 @@ impl AnonPipe {\n         match self.0 {}\n     }\n \n+    pub fn is_write_vectored(&self) -> bool {\n+        match self.0 {}\n+    }\n+\n     pub fn diverge(&self) -> ! {\n         match self.0 {}\n     }"}, {"sha": "208265de465adf3a1b81120c1eabe0f7f599a159", "filename": "src/libstd/sys/hermit/stdio.rs", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fhermit%2Fstdio.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fhermit%2Fstdio.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fhermit%2Fstdio.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -20,6 +20,11 @@ impl Stdin {\n         //    .read(data)\n         Ok(0)\n     }\n+\n+    #[inline]\n+    pub fn is_read_vectored(&self) -> bool {\n+        true\n+    }\n }\n \n impl Stdout {\n@@ -51,6 +56,11 @@ impl Stdout {\n         }\n     }\n \n+    #[inline]\n+    pub fn is_write_vectored(&self) -> bool {\n+        true\n+    }\n+\n     pub fn flush(&self) -> io::Result<()> {\n         Ok(())\n     }\n@@ -85,6 +95,11 @@ impl Stderr {\n         }\n     }\n \n+    #[inline]\n+    pub fn is_write_vectored(&self) -> bool {\n+        true\n+    }\n+\n     pub fn flush(&self) -> io::Result<()> {\n         Ok(())\n     }"}, {"sha": "90158030c7fbe19c8a6c00f8d2e367fb8bc6fa45", "filename": "src/libstd/sys/sgx/fd.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fsgx%2Ffd.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fsgx%2Ffd.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fsgx%2Ffd.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -34,6 +34,11 @@ impl FileDesc {\n         usercalls::read(self.fd, bufs)\n     }\n \n+    #[inline]\n+    pub fn is_read_vectored(&self) -> bool {\n+        true\n+    }\n+\n     pub fn write(&self, buf: &[u8]) -> io::Result<usize> {\n         usercalls::write(self.fd, &[IoSlice::new(buf)])\n     }\n@@ -42,6 +47,11 @@ impl FileDesc {\n         usercalls::write(self.fd, bufs)\n     }\n \n+    #[inline]\n+    pub fn is_write_vectored(&self) -> bool {\n+        true\n+    }\n+\n     pub fn flush(&self) -> io::Result<()> {\n         usercalls::flush(self.fd)\n     }"}, {"sha": "ecb5b51cccdcd965d85e9ee8e22ecb878d876719", "filename": "src/libstd/sys/sgx/fs.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fsgx%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fsgx%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fsgx%2Ffs.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -202,6 +202,10 @@ impl File {\n         match self.0 {}\n     }\n \n+    pub fn is_read_vectored(&self) -> bool {\n+        match self.0 {}\n+    }\n+\n     pub fn write(&self, _buf: &[u8]) -> io::Result<usize> {\n         match self.0 {}\n     }\n@@ -210,6 +214,10 @@ impl File {\n         match self.0 {}\n     }\n \n+    pub fn is_write_vectored(&self) -> bool {\n+        match self.0 {}\n+    }\n+\n     pub fn flush(&self) -> io::Result<()> {\n         match self.0 {}\n     }"}, {"sha": "666a157b09cd0e88ebaf79709bbc0b5a164d015e", "filename": "src/libstd/sys/sgx/net.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fsgx%2Fnet.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fsgx%2Fnet.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fsgx%2Fnet.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -149,6 +149,11 @@ impl TcpStream {\n         self.inner.inner.read_vectored(bufs)\n     }\n \n+    #[inline]\n+    pub fn is_read_vectored(&self) -> bool {\n+        self.inner.inner.is_read_vectored()\n+    }\n+\n     pub fn write(&self, buf: &[u8]) -> io::Result<usize> {\n         self.inner.inner.write(buf)\n     }\n@@ -157,6 +162,11 @@ impl TcpStream {\n         self.inner.inner.write_vectored(bufs)\n     }\n \n+    #[inline]\n+    pub fn is_write_vectored(&self) -> bool {\n+        self.inner.inner.is_write_vectored()\n+    }\n+\n     pub fn peer_addr(&self) -> io::Result<SocketAddr> {\n         addr_to_sockaddr(&self.peer_addr)\n     }"}, {"sha": "10d0925823eb94660278ce2390c892c093d7e3c6", "filename": "src/libstd/sys/sgx/pipe.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fsgx%2Fpipe.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fsgx%2Fpipe.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fsgx%2Fpipe.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -12,6 +12,10 @@ impl AnonPipe {\n         match self.0 {}\n     }\n \n+    pub fn is_read_vectored(&self) -> bool {\n+        match self.0 {}\n+    }\n+\n     pub fn write(&self, _buf: &[u8]) -> io::Result<usize> {\n         match self.0 {}\n     }\n@@ -20,6 +24,10 @@ impl AnonPipe {\n         match self.0 {}\n     }\n \n+    pub fn is_write_vectored(&self) -> bool {\n+        match self.0 {}\n+    }\n+\n     pub fn diverge(&self) -> ! {\n         match self.0 {}\n     }"}, {"sha": "bfdc39ada75ebaf99d78f34d75c85ca6a2e1c906", "filename": "src/libstd/sys/unix/ext/net.rs", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Funix%2Fext%2Fnet.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Funix%2Fext%2Fnet.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Funix%2Fext%2Fnet.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -613,6 +613,11 @@ impl io::Read for UnixStream {\n         io::Read::read_vectored(&mut &*self, bufs)\n     }\n \n+    #[inline]\n+    fn is_read_vectored(&self) -> bool {\n+        io::Read::is_read_vectored(&&*self)\n+    }\n+\n     #[inline]\n     unsafe fn initializer(&self) -> Initializer {\n         Initializer::nop()\n@@ -629,6 +634,11 @@ impl<'a> io::Read for &'a UnixStream {\n         self.0.read_vectored(bufs)\n     }\n \n+    #[inline]\n+    fn is_read_vectored(&self) -> bool {\n+        self.0.is_read_vectored()\n+    }\n+\n     #[inline]\n     unsafe fn initializer(&self) -> Initializer {\n         Initializer::nop()\n@@ -645,6 +655,11 @@ impl io::Write for UnixStream {\n         io::Write::write_vectored(&mut &*self, bufs)\n     }\n \n+    #[inline]\n+    fn is_write_vectored(&self) -> bool {\n+        io::Write::is_write_vectored(&&*self)\n+    }\n+\n     fn flush(&mut self) -> io::Result<()> {\n         io::Write::flush(&mut &*self)\n     }\n@@ -660,6 +675,11 @@ impl<'a> io::Write for &'a UnixStream {\n         self.0.write_vectored(bufs)\n     }\n \n+    #[inline]\n+    fn is_write_vectored(&self) -> bool {\n+        self.0.is_write_vectored()\n+    }\n+\n     fn flush(&mut self) -> io::Result<()> {\n         Ok(())\n     }"}, {"sha": "1ef7ffacfcf1413d2143ceea2477cbe0b44c9bda", "filename": "src/libstd/sys/unix/fd.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Funix%2Ffd.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Funix%2Ffd.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Funix%2Ffd.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -64,6 +64,11 @@ impl FileDesc {\n         Ok(ret as usize)\n     }\n \n+    #[inline]\n+    pub fn is_read_vectored(&self) -> bool {\n+        true\n+    }\n+\n     pub fn read_to_end(&self, buf: &mut Vec<u8>) -> io::Result<usize> {\n         let mut me = self;\n         (&mut me).read_to_end(buf)\n@@ -116,6 +121,11 @@ impl FileDesc {\n         Ok(ret as usize)\n     }\n \n+    #[inline]\n+    pub fn is_write_vectored(&self) -> bool {\n+        true\n+    }\n+\n     pub fn write_at(&self, buf: &[u8], offset: u64) -> io::Result<usize> {\n         #[cfg(target_os = \"android\")]\n         use super::android::cvt_pwrite64;"}, {"sha": "2cfc63d94922daea14b0894edbf848192eb84ca2", "filename": "src/libstd/sys/unix/fs.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Funix%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Funix%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Funix%2Ffs.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -828,6 +828,11 @@ impl File {\n         self.0.read_vectored(bufs)\n     }\n \n+    #[inline]\n+    pub fn is_read_vectored(&self) -> bool {\n+        self.0.is_read_vectored()\n+    }\n+\n     pub fn read_at(&self, buf: &mut [u8], offset: u64) -> io::Result<usize> {\n         self.0.read_at(buf, offset)\n     }\n@@ -840,6 +845,11 @@ impl File {\n         self.0.write_vectored(bufs)\n     }\n \n+    #[inline]\n+    pub fn is_write_vectored(&self) -> bool {\n+        self.0.is_write_vectored()\n+    }\n+\n     pub fn write_at(&self, buf: &[u8], offset: u64) -> io::Result<usize> {\n         self.0.write_at(buf, offset)\n     }"}, {"sha": "a2912387108e136ebdac33134937e9a95d6ff444", "filename": "src/libstd/sys/unix/l4re.rs", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Funix%2Fl4re.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Funix%2Fl4re.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Funix%2Fl4re.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -55,6 +55,10 @@ pub mod net {\n             unimpl!();\n         }\n \n+        pub fn is_read_vectored(&self) -> bool {\n+            unimpl!();\n+        }\n+\n         pub fn peek(&self, _: &mut [u8]) -> io::Result<usize> {\n             unimpl!();\n         }\n@@ -75,6 +79,10 @@ pub mod net {\n             unimpl!();\n         }\n \n+        pub fn is_write_vectored(&self) -> bool {\n+            unimpl!();\n+        }\n+\n         pub fn set_timeout(&self, _: Option<Duration>, _: libc::c_int) -> io::Result<()> {\n             unimpl!();\n         }\n@@ -171,6 +179,10 @@ pub mod net {\n             unimpl!();\n         }\n \n+        pub fn is_read_vectored(&self) -> bool {\n+            unimpl!();\n+        }\n+\n         pub fn write(&self, _: &[u8]) -> io::Result<usize> {\n             unimpl!();\n         }\n@@ -179,6 +191,10 @@ pub mod net {\n             unimpl!();\n         }\n \n+        pub fn is_write_vectored(&self) -> bool {\n+            unimpl!();\n+        }\n+\n         pub fn peer_addr(&self) -> io::Result<SocketAddr> {\n             unimpl!();\n         }"}, {"sha": "f062bc012f7ef2c14c1e6900cb2da04bcaf7ba81", "filename": "src/libstd/sys/unix/net.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Funix%2Fnet.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Funix%2Fnet.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Funix%2Fnet.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -226,6 +226,11 @@ impl Socket {\n         self.0.read_vectored(bufs)\n     }\n \n+    #[inline]\n+    pub fn is_read_vectored(&self) -> bool {\n+        self.0.is_read_vectored()\n+    }\n+\n     fn recv_from_with_flags(\n         &self,\n         buf: &mut [u8],\n@@ -263,6 +268,11 @@ impl Socket {\n         self.0.write_vectored(bufs)\n     }\n \n+    #[inline]\n+    pub fn is_write_vectored(&self) -> bool {\n+        self.0.is_write_vectored()\n+    }\n+\n     pub fn set_timeout(&self, dur: Option<Duration>, kind: libc::c_int) -> io::Result<()> {\n         let timeout = match dur {\n             Some(dur) => {"}, {"sha": "f2a2eabef9132509db4c864a40ba769b0974fb0f", "filename": "src/libstd/sys/unix/pipe.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Funix%2Fpipe.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Funix%2Fpipe.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Funix%2Fpipe.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -64,6 +64,11 @@ impl AnonPipe {\n         self.0.read_vectored(bufs)\n     }\n \n+    #[inline]\n+    pub fn is_read_vectored(&self) -> bool {\n+        self.0.is_read_vectored()\n+    }\n+\n     pub fn write(&self, buf: &[u8]) -> io::Result<usize> {\n         self.0.write(buf)\n     }\n@@ -72,6 +77,11 @@ impl AnonPipe {\n         self.0.write_vectored(bufs)\n     }\n \n+    #[inline]\n+    pub fn is_write_vectored(&self) -> bool {\n+        self.0.is_write_vectored()\n+    }\n+\n     pub fn fd(&self) -> &FileDesc {\n         &self.0\n     }"}, {"sha": "f8353214cbca037fa635f342bf6e700a0aabf8e1", "filename": "src/libstd/sys/unix/stdio.rs", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Funix%2Fstdio.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Funix%2Fstdio.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Funix%2Fstdio.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -20,6 +20,11 @@ impl io::Read for Stdin {\n     fn read_vectored(&mut self, bufs: &mut [IoSliceMut<'_>]) -> io::Result<usize> {\n         ManuallyDrop::new(FileDesc::new(libc::STDIN_FILENO)).read_vectored(bufs)\n     }\n+\n+    #[inline]\n+    fn is_read_vectored(&self) -> bool {\n+        true\n+    }\n }\n \n impl Stdout {\n@@ -37,6 +42,11 @@ impl io::Write for Stdout {\n         ManuallyDrop::new(FileDesc::new(libc::STDOUT_FILENO)).write_vectored(bufs)\n     }\n \n+    #[inline]\n+    fn is_write_vectored(&self) -> bool {\n+        true\n+    }\n+\n     fn flush(&mut self) -> io::Result<()> {\n         Ok(())\n     }\n@@ -57,6 +67,11 @@ impl io::Write for Stderr {\n         ManuallyDrop::new(FileDesc::new(libc::STDERR_FILENO)).write_vectored(bufs)\n     }\n \n+    #[inline]\n+    fn is_write_vectored(&self) -> bool {\n+        true\n+    }\n+\n     fn flush(&mut self) -> io::Result<()> {\n         Ok(())\n     }"}, {"sha": "23e9dc428ce2366999c52a3b6855f8799c8c4adb", "filename": "src/libstd/sys/vxworks/fd.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fvxworks%2Ffd.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fvxworks%2Ffd.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fvxworks%2Ffd.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -54,6 +54,11 @@ impl FileDesc {\n         Ok(ret as usize)\n     }\n \n+    #[inline]\n+    fn is_read_vectored(&self) -> bool {\n+        true\n+    }\n+\n     pub fn read_to_end(&self, buf: &mut Vec<u8>) -> io::Result<usize> {\n         let mut me = self;\n         (&mut me).read_to_end(buf)\n@@ -99,6 +104,11 @@ impl FileDesc {\n         Ok(ret as usize)\n     }\n \n+    #[inline]\n+    pub fn is_write_vectored(&self) -> bool {\n+        true\n+    }\n+\n     pub fn write_at(&self, buf: &[u8], offset: u64) -> io::Result<usize> {\n         unsafe fn cvt_pwrite(\n             fd: c_int,"}, {"sha": "557e65ca01b1cca63e92b556335042e81ed5acee", "filename": "src/libstd/sys/vxworks/fs.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fvxworks%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fvxworks%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fvxworks%2Ffs.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -351,6 +351,11 @@ impl File {\n         self.0.read_vectored(bufs)\n     }\n \n+    #[inline]\n+    pub fn is_read_vectored(&self) -> bool {\n+        self.0.is_read_vectored()\n+    }\n+\n     pub fn read_at(&self, buf: &mut [u8], offset: u64) -> io::Result<usize> {\n         self.0.read_at(buf, offset)\n     }\n@@ -363,6 +368,11 @@ impl File {\n         self.0.write_vectored(bufs)\n     }\n \n+    #[inline]\n+    pub fn is_write_vectored(&self) -> bool {\n+        self.0.is_write_vectored()\n+    }\n+\n     pub fn write_at(&self, buf: &[u8], offset: u64) -> io::Result<usize> {\n         self.0.write_at(buf, offset)\n     }"}, {"sha": "de0b15b43a2e2dd12918bfd0c978469df3a75e11", "filename": "src/libstd/sys/vxworks/net.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fvxworks%2Fnet.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fvxworks%2Fnet.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fvxworks%2Fnet.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -163,6 +163,11 @@ impl Socket {\n         self.0.read_vectored(bufs)\n     }\n \n+    #[inline]\n+    pub fn is_read_vectored(&self) -> bool {\n+        self.0.is_read_vectored()\n+    }\n+\n     fn recv_from_with_flags(\n         &self,\n         buf: &mut [u8],\n@@ -200,6 +205,11 @@ impl Socket {\n         self.0.write_vectored(bufs)\n     }\n \n+    #[inline]\n+    pub fn is_write_vectored(&self) -> bool {\n+        self.0.is_write_vectored()\n+    }\n+\n     pub fn set_timeout(&self, dur: Option<Duration>, kind: libc::c_int) -> io::Result<()> {\n         let timeout = match dur {\n             Some(dur) => {"}, {"sha": "a18376212af51a32e8044194fa39892aced42b1d", "filename": "src/libstd/sys/vxworks/pipe.rs", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fvxworks%2Fpipe.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fvxworks%2Fpipe.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fvxworks%2Fpipe.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -24,10 +24,16 @@ impl AnonPipe {\n     pub fn read(&self, buf: &mut [u8]) -> io::Result<usize> {\n         self.0.read(buf)\n     }\n+\n     pub fn read_vectored(&self, bufs: &mut [IoSliceMut<'_>]) -> io::Result<usize> {\n         self.0.read_vectored(bufs)\n     }\n \n+    #[inline]\n+    pub fn is_read_vectored(&self) -> bool {\n+        self.0.is_read_vectored()\n+    }\n+\n     pub fn write(&self, buf: &[u8]) -> io::Result<usize> {\n         self.0.write(buf)\n     }\n@@ -36,6 +42,11 @@ impl AnonPipe {\n         self.0.write_vectored(bufs)\n     }\n \n+    #[inline]\n+    pub fn is_write_vectored(&self) -> bool {\n+        self.0.is_write_vectored()\n+    }\n+\n     pub fn fd(&self) -> &FileDesc {\n         &self.0\n     }"}, {"sha": "793daea43c215baf07149e2157d73781a7102634", "filename": "src/libstd/sys/wasi/fs.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fwasi%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fwasi%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwasi%2Ffs.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -399,6 +399,11 @@ impl File {\n         self.fd.read(bufs)\n     }\n \n+    #[inline]\n+    pub fn is_read_vectored(&self) -> bool {\n+        true\n+    }\n+\n     pub fn write(&self, buf: &[u8]) -> io::Result<usize> {\n         self.write_vectored(&[IoSlice::new(buf)])\n     }\n@@ -407,6 +412,11 @@ impl File {\n         self.fd.write(bufs)\n     }\n \n+    #[inline]\n+    pub fn is_write_vectored(&self) -> bool {\n+        true\n+    }\n+\n     pub fn flush(&self) -> io::Result<()> {\n         Ok(())\n     }"}, {"sha": "e186453588de5762af42ba6bdcd5c47a8f3870ce", "filename": "src/libstd/sys/wasi/net.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fwasi%2Fnet.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fwasi%2Fnet.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwasi%2Fnet.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -48,6 +48,10 @@ impl TcpStream {\n         unsupported()\n     }\n \n+    pub fn is_read_vectored(&self) -> bool {\n+        true\n+    }\n+\n     pub fn write(&self, _: &[u8]) -> io::Result<usize> {\n         unsupported()\n     }\n@@ -56,6 +60,10 @@ impl TcpStream {\n         unsupported()\n     }\n \n+    pub fn is_write_vectored(&self) -> bool {\n+        true\n+    }\n+\n     pub fn peer_addr(&self) -> io::Result<SocketAddr> {\n         unsupported()\n     }"}, {"sha": "10d0925823eb94660278ce2390c892c093d7e3c6", "filename": "src/libstd/sys/wasi/pipe.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fwasi%2Fpipe.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fwasi%2Fpipe.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwasi%2Fpipe.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -12,6 +12,10 @@ impl AnonPipe {\n         match self.0 {}\n     }\n \n+    pub fn is_read_vectored(&self) -> bool {\n+        match self.0 {}\n+    }\n+\n     pub fn write(&self, _buf: &[u8]) -> io::Result<usize> {\n         match self.0 {}\n     }\n@@ -20,6 +24,10 @@ impl AnonPipe {\n         match self.0 {}\n     }\n \n+    pub fn is_write_vectored(&self) -> bool {\n+        match self.0 {}\n+    }\n+\n     pub fn diverge(&self) -> ! {\n         match self.0 {}\n     }"}, {"sha": "9f9e35566ecf59bcbc46291a6deed0558f09740b", "filename": "src/libstd/sys/wasi/stdio.rs", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fwasi%2Fstdio.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fwasi%2Fstdio.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwasi%2Fstdio.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -19,6 +19,11 @@ impl Stdin {\n         ManuallyDrop::new(unsafe { WasiFd::from_raw(self.as_raw_fd()) }).read(data)\n     }\n \n+    #[inline]\n+    pub fn is_read_vectored(&self) -> bool {\n+        true\n+    }\n+\n     pub fn as_raw_fd(&self) -> u32 {\n         0\n     }\n@@ -37,6 +42,11 @@ impl Stdout {\n         ManuallyDrop::new(unsafe { WasiFd::from_raw(self.as_raw_fd()) }).write(data)\n     }\n \n+    #[inline]\n+    pub fn is_write_vectored(&self) -> bool {\n+        true\n+    }\n+\n     pub fn flush(&self) -> io::Result<()> {\n         Ok(())\n     }\n@@ -59,6 +69,11 @@ impl Stderr {\n         ManuallyDrop::new(unsafe { WasiFd::from_raw(self.as_raw_fd()) }).write(data)\n     }\n \n+    #[inline]\n+    pub fn is_write_vectored(&self) -> bool {\n+        true\n+    }\n+\n     pub fn flush(&self) -> io::Result<()> {\n         Ok(())\n     }"}, {"sha": "ecb5b51cccdcd965d85e9ee8e22ecb878d876719", "filename": "src/libstd/sys/wasm/fs.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fwasm%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fwasm%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwasm%2Ffs.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -202,6 +202,10 @@ impl File {\n         match self.0 {}\n     }\n \n+    pub fn is_read_vectored(&self) -> bool {\n+        match self.0 {}\n+    }\n+\n     pub fn write(&self, _buf: &[u8]) -> io::Result<usize> {\n         match self.0 {}\n     }\n@@ -210,6 +214,10 @@ impl File {\n         match self.0 {}\n     }\n \n+    pub fn is_write_vectored(&self) -> bool {\n+        match self.0 {}\n+    }\n+\n     pub fn flush(&self) -> io::Result<()> {\n         match self.0 {}\n     }"}, {"sha": "5c9f1098f9b7f0e8422840ffcce0a91d5ae1223b", "filename": "src/libstd/sys/wasm/net.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fwasm%2Fnet.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fwasm%2Fnet.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwasm%2Fnet.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -44,6 +44,10 @@ impl TcpStream {\n         match self.0 {}\n     }\n \n+    pub fn is_read_vectored(&self) -> bool {\n+        match self.0 {}\n+    }\n+\n     pub fn write(&self, _: &[u8]) -> io::Result<usize> {\n         match self.0 {}\n     }\n@@ -52,6 +56,10 @@ impl TcpStream {\n         match self.0 {}\n     }\n \n+    pub fn is_write_vectored(&self) -> bool {\n+        match self.0 {}\n+    }\n+\n     pub fn peer_addr(&self) -> io::Result<SocketAddr> {\n         match self.0 {}\n     }"}, {"sha": "10d0925823eb94660278ce2390c892c093d7e3c6", "filename": "src/libstd/sys/wasm/pipe.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fwasm%2Fpipe.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fwasm%2Fpipe.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwasm%2Fpipe.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -12,6 +12,10 @@ impl AnonPipe {\n         match self.0 {}\n     }\n \n+    pub fn is_read_vectored(&self) -> bool {\n+        match self.0 {}\n+    }\n+\n     pub fn write(&self, _buf: &[u8]) -> io::Result<usize> {\n         match self.0 {}\n     }\n@@ -20,6 +24,10 @@ impl AnonPipe {\n         match self.0 {}\n     }\n \n+    pub fn is_write_vectored(&self) -> bool {\n+        match self.0 {}\n+    }\n+\n     pub fn diverge(&self) -> ! {\n         match self.0 {}\n     }"}, {"sha": "cdbfac267b9a1ac60722998f49df00165116f88b", "filename": "src/libstd/sys/windows/fs.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fwindows%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fwindows%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwindows%2Ffs.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -409,6 +409,11 @@ impl File {\n         self.handle.read_vectored(bufs)\n     }\n \n+    #[inline]\n+    pub fn is_read_vectored(&self) -> bool {\n+        self.handle.is_read_vectored()\n+    }\n+\n     pub fn read_at(&self, buf: &mut [u8], offset: u64) -> io::Result<usize> {\n         self.handle.read_at(buf, offset)\n     }\n@@ -421,6 +426,11 @@ impl File {\n         self.handle.write_vectored(bufs)\n     }\n \n+    #[inline]\n+    pub fn is_write_vectored(&self) -> bool {\n+        self.handle.is_write_vectored()\n+    }\n+\n     pub fn write_at(&self, buf: &[u8], offset: u64) -> io::Result<usize> {\n         self.handle.write_at(buf, offset)\n     }"}, {"sha": "2131cfc2c94bccba1458215e7b4d5c8ba7c03b14", "filename": "src/libstd/sys/windows/handle.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fwindows%2Fhandle.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fwindows%2Fhandle.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwindows%2Fhandle.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -92,6 +92,11 @@ impl RawHandle {\n         crate::io::default_read_vectored(|buf| self.read(buf), bufs)\n     }\n \n+    #[inline]\n+    pub fn is_read_vectored(&self) -> bool {\n+        false\n+    }\n+\n     pub fn read_at(&self, buf: &mut [u8], offset: u64) -> io::Result<usize> {\n         let mut read = 0;\n         let len = cmp::min(buf.len(), <c::DWORD>::max_value() as usize) as c::DWORD;\n@@ -171,6 +176,11 @@ impl RawHandle {\n         crate::io::default_write_vectored(|buf| self.write(buf), bufs)\n     }\n \n+    #[inline]\n+    pub fn is_write_vectored(&self) -> bool {\n+        false\n+    }\n+\n     pub fn write_at(&self, buf: &[u8], offset: u64) -> io::Result<usize> {\n         let mut written = 0;\n         let len = cmp::min(buf.len(), <c::DWORD>::max_value() as usize) as c::DWORD;"}, {"sha": "a15ded92f08c4a463510774d8ced2ce43c7820a8", "filename": "src/libstd/sys/windows/net.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fwindows%2Fnet.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fwindows%2Fnet.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwindows%2Fnet.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -266,6 +266,11 @@ impl Socket {\n         }\n     }\n \n+    #[inline]\n+    pub fn is_read_vectored(&self) -> bool {\n+        true\n+    }\n+\n     pub fn peek(&self, buf: &mut [u8]) -> io::Result<usize> {\n         self.recv_with_flags(buf, c::MSG_PEEK)\n     }\n@@ -324,6 +329,11 @@ impl Socket {\n         Ok(nwritten as usize)\n     }\n \n+    #[inline]\n+    pub fn is_write_vectored(&self) -> bool {\n+        true\n+    }\n+\n     pub fn set_timeout(&self, dur: Option<Duration>, kind: c_int) -> io::Result<()> {\n         let timeout = match dur {\n             Some(dur) => {"}, {"sha": "104a8db46596e17c3067983b8b0ebab04f98ea78", "filename": "src/libstd/sys/windows/pipe.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fwindows%2Fpipe.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys%2Fwindows%2Fpipe.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwindows%2Fpipe.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -182,13 +182,23 @@ impl AnonPipe {\n         self.inner.read_vectored(bufs)\n     }\n \n+    #[inline]\n+    pub fn is_read_vectored(&self) -> bool {\n+        self.inner.is_read_vectored()\n+    }\n+\n     pub fn write(&self, buf: &[u8]) -> io::Result<usize> {\n         self.inner.write(buf)\n     }\n \n     pub fn write_vectored(&self, bufs: &[IoSlice<'_>]) -> io::Result<usize> {\n         self.inner.write_vectored(bufs)\n     }\n+\n+    #[inline]\n+    pub fn is_write_vectored(&self) -> bool {\n+        self.inner.is_write_vectored()\n+    }\n }\n \n pub fn read2(p1: AnonPipe, v1: &mut Vec<u8>, p2: AnonPipe, v2: &mut Vec<u8>) -> io::Result<()> {"}, {"sha": "a9b6079de7564e612d3b0efa88bdb04a9f0b9c5c", "filename": "src/libstd/sys_common/net.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys_common%2Fnet.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2/src%2Flibstd%2Fsys_common%2Fnet.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys_common%2Fnet.rs?ref=c4d9f42f6d29b9c7bf8f6ca98be02621724cb9d2", "patch": "@@ -265,6 +265,11 @@ impl TcpStream {\n         self.inner.read_vectored(bufs)\n     }\n \n+    #[inline]\n+    pub fn is_read_vectored(&self) -> bool {\n+        self.inner.is_read_vectored()\n+    }\n+\n     pub fn write(&self, buf: &[u8]) -> io::Result<usize> {\n         let len = cmp::min(buf.len(), <wrlen_t>::max_value() as usize) as wrlen_t;\n         let ret = cvt(unsafe {\n@@ -277,6 +282,11 @@ impl TcpStream {\n         self.inner.write_vectored(bufs)\n     }\n \n+    #[inline]\n+    pub fn is_write_vectored(&self) -> bool {\n+        self.inner.is_write_vectored()\n+    }\n+\n     pub fn peer_addr(&self) -> io::Result<SocketAddr> {\n         sockname(|buf, len| unsafe { c::getpeername(*self.inner.as_inner(), buf, len) })\n     }"}]}