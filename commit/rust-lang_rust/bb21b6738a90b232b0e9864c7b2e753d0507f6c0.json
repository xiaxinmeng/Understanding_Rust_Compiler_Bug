{"sha": "bb21b6738a90b232b0e9864c7b2e753d0507f6c0", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJiMjFiNjczOGE5MGIyMzJiMGU5ODY0YzdiMmU3NTNkMDUwN2Y2YzA=", "commit": {"author": {"name": "Seo Sanghyeon", "email": "sanxiyn@gmail.com", "date": "2015-12-10T18:42:47Z"}, "committer": {"name": "Seo Sanghyeon", "email": "sanxiyn@gmail.com", "date": "2015-12-15T06:04:47Z"}, "message": "Fix expansion tests", "tree": {"sha": "398b7f3d5d5b29b0002425e7ca2d436d9ebeaa1c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/398b7f3d5d5b29b0002425e7ca2d436d9ebeaa1c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bb21b6738a90b232b0e9864c7b2e753d0507f6c0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bb21b6738a90b232b0e9864c7b2e753d0507f6c0", "html_url": "https://github.com/rust-lang/rust/commit/bb21b6738a90b232b0e9864c7b2e753d0507f6c0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bb21b6738a90b232b0e9864c7b2e753d0507f6c0/comments", "author": {"login": "sanxiyn", "id": 45249, "node_id": "MDQ6VXNlcjQ1MjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/45249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanxiyn", "html_url": "https://github.com/sanxiyn", "followers_url": "https://api.github.com/users/sanxiyn/followers", "following_url": "https://api.github.com/users/sanxiyn/following{/other_user}", "gists_url": "https://api.github.com/users/sanxiyn/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanxiyn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanxiyn/subscriptions", "organizations_url": "https://api.github.com/users/sanxiyn/orgs", "repos_url": "https://api.github.com/users/sanxiyn/repos", "events_url": "https://api.github.com/users/sanxiyn/events{/privacy}", "received_events_url": "https://api.github.com/users/sanxiyn/received_events", "type": "User", "site_admin": false}, "committer": {"login": "sanxiyn", "id": 45249, "node_id": "MDQ6VXNlcjQ1MjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/45249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanxiyn", "html_url": "https://github.com/sanxiyn", "followers_url": "https://api.github.com/users/sanxiyn/followers", "following_url": "https://api.github.com/users/sanxiyn/following{/other_user}", "gists_url": "https://api.github.com/users/sanxiyn/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanxiyn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanxiyn/subscriptions", "organizations_url": "https://api.github.com/users/sanxiyn/orgs", "repos_url": "https://api.github.com/users/sanxiyn/repos", "events_url": "https://api.github.com/users/sanxiyn/events{/privacy}", "received_events_url": "https://api.github.com/users/sanxiyn/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f9ba1078245bc2c023f51d2a63e0ca84863600e7", "url": "https://api.github.com/repos/rust-lang/rust/commits/f9ba1078245bc2c023f51d2a63e0ca84863600e7", "html_url": "https://github.com/rust-lang/rust/commit/f9ba1078245bc2c023f51d2a63e0ca84863600e7"}], "stats": {"total": 17, "additions": 13, "deletions": 4}, "files": [{"sha": "b1afe2bb69c024d4095ac4efb88be1598919926d", "filename": "src/libsyntax/ext/expand.rs", "status": "modified", "additions": 13, "deletions": 4, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/bb21b6738a90b232b0e9864c7b2e753d0507f6c0/src%2Flibsyntax%2Fext%2Fexpand.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bb21b6738a90b232b0e9864c7b2e753d0507f6c0/src%2Flibsyntax%2Fext%2Fexpand.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fexpand.rs?ref=bb21b6738a90b232b0e9864c7b2e753d0507f6c0", "patch": "@@ -1397,6 +1397,7 @@ mod tests {\n     use ast;\n     use ast::Name;\n     use codemap;\n+    use ext::base::ExtCtxt;\n     use ext::mtwt;\n     use fold::Folder;\n     use parse;\n@@ -1467,7 +1468,9 @@ mod tests {\n             src,\n             Vec::new(), &sess);\n         // should fail:\n-        expand_crate(&sess,test_ecfg(),vec!(),vec!(), &mut vec![], crate_ast);\n+        let mut gated_cfgs = vec![];\n+        let ecx = ExtCtxt::new(&sess, vec![], test_ecfg(), &mut gated_cfgs);\n+        expand_crate(ecx, vec![], vec![], crate_ast);\n     }\n \n     // make sure that macros can't escape modules\n@@ -1480,7 +1483,9 @@ mod tests {\n             \"<test>\".to_string(),\n             src,\n             Vec::new(), &sess);\n-        expand_crate(&sess,test_ecfg(),vec!(),vec!(), &mut vec![], crate_ast);\n+        let mut gated_cfgs = vec![];\n+        let ecx = ExtCtxt::new(&sess, vec![], test_ecfg(), &mut gated_cfgs);\n+        expand_crate(ecx, vec![], vec![], crate_ast);\n     }\n \n     // macro_use modules should allow macros to escape\n@@ -1492,14 +1497,18 @@ mod tests {\n             \"<test>\".to_string(),\n             src,\n             Vec::new(), &sess);\n-        expand_crate(&sess, test_ecfg(), vec!(), vec!(), &mut vec![], crate_ast);\n+        let mut gated_cfgs = vec![];\n+        let ecx = ExtCtxt::new(&sess, vec![], test_ecfg(), &mut gated_cfgs);\n+        expand_crate(ecx, vec![], vec![], crate_ast);\n     }\n \n     fn expand_crate_str(crate_str: String) -> ast::Crate {\n         let ps = parse::ParseSess::new();\n         let crate_ast = panictry!(string_to_parser(&ps, crate_str).parse_crate_mod());\n         // the cfg argument actually does matter, here...\n-        expand_crate(&ps,test_ecfg(),vec!(),vec!(), &mut vec![], crate_ast).0\n+        let mut gated_cfgs = vec![];\n+        let ecx = ExtCtxt::new(&ps, vec![], test_ecfg(), &mut gated_cfgs);\n+        expand_crate(ecx, vec![], vec![], crate_ast).0\n     }\n \n     // find the pat_ident paths in a crate"}]}