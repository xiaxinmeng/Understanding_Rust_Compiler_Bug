{"sha": "4f65d97bf8b4ec68ecba87ce75df1d6a6096a4e7", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRmNjVkOTdiZjhiNGVjNjhlY2JhODdjZTc1ZGYxZDZhNjA5NmE0ZTc=", "commit": {"author": {"name": "Erick Tryzelaar", "email": "erick.tryzelaar@gmail.com", "date": "2014-12-01T04:13:31Z"}, "committer": {"name": "Erick Tryzelaar", "email": "erick.tryzelaar@gmail.com", "date": "2014-12-03T22:40:33Z"}, "message": "rustup: factor out the install flags into a CFG_INSTALL_FLAGS variable", "tree": {"sha": "41ec02fcb0304300b8ad3744ca990fbec00717e1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/41ec02fcb0304300b8ad3744ca990fbec00717e1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4f65d97bf8b4ec68ecba87ce75df1d6a6096a4e7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4f65d97bf8b4ec68ecba87ce75df1d6a6096a4e7", "html_url": "https://github.com/rust-lang/rust/commit/4f65d97bf8b4ec68ecba87ce75df1d6a6096a4e7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4f65d97bf8b4ec68ecba87ce75df1d6a6096a4e7/comments", "author": {"login": "erickt", "id": 84711, "node_id": "MDQ6VXNlcjg0NzEx", "avatar_url": "https://avatars.githubusercontent.com/u/84711?v=4", "gravatar_id": "", "url": "https://api.github.com/users/erickt", "html_url": "https://github.com/erickt", "followers_url": "https://api.github.com/users/erickt/followers", "following_url": "https://api.github.com/users/erickt/following{/other_user}", "gists_url": "https://api.github.com/users/erickt/gists{/gist_id}", "starred_url": "https://api.github.com/users/erickt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/erickt/subscriptions", "organizations_url": "https://api.github.com/users/erickt/orgs", "repos_url": "https://api.github.com/users/erickt/repos", "events_url": "https://api.github.com/users/erickt/events{/privacy}", "received_events_url": "https://api.github.com/users/erickt/received_events", "type": "User", "site_admin": false}, "committer": {"login": "erickt", "id": 84711, "node_id": "MDQ6VXNlcjg0NzEx", "avatar_url": "https://avatars.githubusercontent.com/u/84711?v=4", "gravatar_id": "", "url": "https://api.github.com/users/erickt", "html_url": "https://github.com/erickt", "followers_url": "https://api.github.com/users/erickt/followers", "following_url": "https://api.github.com/users/erickt/following{/other_user}", "gists_url": "https://api.github.com/users/erickt/gists{/gist_id}", "starred_url": "https://api.github.com/users/erickt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/erickt/subscriptions", "organizations_url": "https://api.github.com/users/erickt/orgs", "repos_url": "https://api.github.com/users/erickt/repos", "events_url": "https://api.github.com/users/erickt/events{/privacy}", "received_events_url": "https://api.github.com/users/erickt/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fcb31e834716be12b98390eab921d5b7d39098de", "url": "https://api.github.com/repos/rust-lang/rust/commits/fcb31e834716be12b98390eab921d5b7d39098de", "html_url": "https://github.com/rust-lang/rust/commit/fcb31e834716be12b98390eab921d5b7d39098de"}], "stats": {"total": 27, "additions": 13, "deletions": 14}, "files": [{"sha": "88bcc1916e7751da9d1844fddb050a342d73651e", "filename": "src/etc/rustup.sh", "status": "modified", "additions": 13, "deletions": 14, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/4f65d97bf8b4ec68ecba87ce75df1d6a6096a4e7/src%2Fetc%2Frustup.sh", "raw_url": "https://github.com/rust-lang/rust/raw/4f65d97bf8b4ec68ecba87ce75df1d6a6096a4e7/src%2Fetc%2Frustup.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Frustup.sh?ref=4f65d97bf8b4ec68ecba87ce75df1d6a6096a4e7", "patch": "@@ -389,6 +389,17 @@ esac\n \n msg \"host triple: ${HOST_TRIPLE}\"\n \n+CFG_INSTALL_FLAGS=\"\"\n+if [ -n \"${CFG_UNINSTALL}\" ]\n+then\n+    CFG_INSTALL_FLAGS=\"${CFG_INSTALL_FLAGS} --uninstall\"\n+fi\n+\n+if [ -n \"${CFG_PREFIX}\" ]\n+then\n+    CFG_INSTALL_FLAGS=\"${CFG_INSTALL_FLAGS} --prefix=${CFG_PREFIX}\"\n+fi\n+\n CFG_TMP_DIR=\"./rustup-tmp-install\"\n \n RUST_PACKAGE_NAME=rust-nightly\n@@ -439,19 +450,7 @@ then\n         err \"failed to unpack installer\"\n fi\n \n-MAYBE_UNINSTALL=\n-if [ -n \"${CFG_UNINSTALL}\" ]\n-then\n-        MAYBE_UNINSTALL=\"--uninstall\"\n-fi\n-\n-MAYBE_PREFIX=\n-if [ -n \"${CFG_PREFIX}\" ]\n-then\n-        MAYBE_PREFIX=\"--prefix=${CFG_PREFIX}\"\n-fi\n-\n-sh \"${RUST_LOCAL_INSTALL_SCRIPT}\" \"${MAYBE_UNINSTALL}\" \"${MAYBE_PREFIX}\"\n+sh \"${RUST_LOCAL_INSTALL_SCRIPT}\" \"${CFG_INSTALL_FLAGS}\"\n if [ $? -ne 0 ]\n then\n         rm -Rf \"${CFG_TMP_DIR}\"\n@@ -466,7 +465,7 @@ if [ -z \"${CFG_DISABLE_CARGO}\" ]; then\n             err \"failed to unpack cargo installer\"\n     fi\n \n-    sh \"${CARGO_LOCAL_INSTALL_SCRIPT}\" \"${MAYBE_UNINSTALL}\" \"${MAYBE_PREFIX}\"\n+    sh \"${CARGO_LOCAL_INSTALL_SCRIPT}\" \"${CFG_INSTALL_FLAGS}\"\n     if [ $? -ne 0 ]\n     then\n             rm -Rf \"${CFG_TMP_DIR}\""}]}