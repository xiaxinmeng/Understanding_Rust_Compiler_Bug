{"sha": "865dcb663da2d0534d508346cbe1df5dc66f3ad6", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg2NWRjYjY2M2RhMmQwNTM0ZDUwODM0NmNiZTFkZjVkYzY2ZjNhZDY=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-09-20T23:07:09Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-09-21T00:51:17Z"}, "message": "Parse unique box types\n\nIssue #409", "tree": {"sha": "8e4af2aee695b380631be9887ac36f00aacbf864", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8e4af2aee695b380631be9887ac36f00aacbf864"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/865dcb663da2d0534d508346cbe1df5dc66f3ad6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/865dcb663da2d0534d508346cbe1df5dc66f3ad6", "html_url": "https://github.com/rust-lang/rust/commit/865dcb663da2d0534d508346cbe1df5dc66f3ad6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/865dcb663da2d0534d508346cbe1df5dc66f3ad6/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "be1feaa9187ca75c867b04283c2bea1128c344d5", "url": "https://api.github.com/repos/rust-lang/rust/commits/be1feaa9187ca75c867b04283c2bea1128c344d5", "html_url": "https://github.com/rust-lang/rust/commit/be1feaa9187ca75c867b04283c2bea1128c344d5"}], "stats": {"total": 18, "additions": 18, "deletions": 0}, "files": [{"sha": "4d3189d96c2d9dd4d4d7a76bbc435f92e64e69ca", "filename": "src/comp/middle/typeck.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/865dcb663da2d0534d508346cbe1df5dc66f3ad6/src%2Fcomp%2Fmiddle%2Ftypeck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/865dcb663da2d0534d508346cbe1df5dc66f3ad6/src%2Fcomp%2Fmiddle%2Ftypeck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Ftypeck.rs?ref=865dcb663da2d0534d508346cbe1df5dc66f3ad6", "patch": "@@ -285,6 +285,9 @@ fn ast_ty_to_ty(tcx: ty::ctxt, getter: ty_getter, ast_ty: @ast::ty) -> ty::t {\n       ast::ty_box(mt) {\n         typ = ty::mk_box(tcx, ast_mt_to_mt(tcx, getter, mt));\n       }\n+      ast::ty_uniq(mt) {\n+        typ = ty::mk_uniq(tcx, ast_ty_to_ty(tcx, getter, mt.ty));\n+      }\n       ast::ty_vec(mt) {\n         typ = ty::mk_vec(tcx, ast_mt_to_mt(tcx, getter, mt));\n       }"}, {"sha": "6b64d373746a108ccc4ac2cdf87a66f1d2345644", "filename": "src/comp/syntax/ast.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/865dcb663da2d0534d508346cbe1df5dc66f3ad6/src%2Fcomp%2Fsyntax%2Fast.rs", "raw_url": "https://github.com/rust-lang/rust/raw/865dcb663da2d0534d508346cbe1df5dc66f3ad6/src%2Fcomp%2Fsyntax%2Fast.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fsyntax%2Fast.rs?ref=865dcb663da2d0534d508346cbe1df5dc66f3ad6", "patch": "@@ -307,6 +307,7 @@ tag ty_ {\n     ty_char;\n     ty_str;\n     ty_box(mt);\n+    ty_uniq(mt);\n     ty_vec(mt);\n     ty_ptr(mt);\n     ty_task;"}, {"sha": "3e559e1a2a94d093640e6160caf9a5ecccc0265f", "filename": "src/comp/syntax/parse/parser.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/865dcb663da2d0534d508346cbe1df5dc66f3ad6/src%2Fcomp%2Fsyntax%2Fparse%2Fparser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/865dcb663da2d0534d508346cbe1df5dc66f3ad6/src%2Fcomp%2Fsyntax%2Fparse%2Fparser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fsyntax%2Fparse%2Fparser.rs?ref=865dcb663da2d0534d508346cbe1df5dc66f3ad6", "patch": "@@ -540,6 +540,11 @@ fn parse_ty(p: parser, colons_before_params: bool) -> @ast::ty {\n         let mt = parse_mt(p);\n         hi = mt.ty.span.hi;\n         t = ast::ty_box(mt);\n+    } else if p.peek() == token::TILDE {\n+        p.bump();\n+        let mt = parse_mt(p);\n+        hi = mt.ty.span.hi;\n+        t = ast::ty_uniq(mt);\n     } else if p.peek() == token::BINOP(token::STAR) {\n         p.bump();\n         let mt = parse_mt(p);"}, {"sha": "3a8e5f2b9be5c15aa4a6576b7e862125920362eb", "filename": "src/comp/syntax/print/pprust.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/865dcb663da2d0534d508346cbe1df5dc66f3ad6/src%2Fcomp%2Fsyntax%2Fprint%2Fpprust.rs", "raw_url": "https://github.com/rust-lang/rust/raw/865dcb663da2d0534d508346cbe1df5dc66f3ad6/src%2Fcomp%2Fsyntax%2Fprint%2Fpprust.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fsyntax%2Fprint%2Fpprust.rs?ref=865dcb663da2d0534d508346cbe1df5dc66f3ad6", "patch": "@@ -260,6 +260,7 @@ fn print_type(s: ps, ty: @ast::ty) {\n       ast::ty_char. { word(s.s, \"char\"); }\n       ast::ty_str. { word(s.s, \"str\"); }\n       ast::ty_box(mt) { word(s.s, \"@\"); print_mt(s, mt); }\n+      ast::ty_uniq(mt) { word(s.s, \"~\"); print_mt(s, mt); }\n       ast::ty_vec(mt) {\n         word(s.s, \"[\");\n         alt mt.mut {"}, {"sha": "d5b39bb7ca55c805c69fdbcded953fce57caf476", "filename": "src/comp/syntax/visit.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/865dcb663da2d0534d508346cbe1df5dc66f3ad6/src%2Fcomp%2Fsyntax%2Fvisit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/865dcb663da2d0534d508346cbe1df5dc66f3ad6/src%2Fcomp%2Fsyntax%2Fvisit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fsyntax%2Fvisit.rs?ref=865dcb663da2d0534d508346cbe1df5dc66f3ad6", "patch": "@@ -121,6 +121,7 @@ fn visit_ty<E>(t: @ty, e: E, v: vt<E>) {\n       ty_char. {/* no-op */ }\n       ty_str. {/* no-op */ }\n       ty_box(mt) { v.visit_ty(mt.ty, e, v); }\n+      ty_uniq(mt) { v.visit_ty(mt.ty, e, v); }\n       ty_vec(mt) { v.visit_ty(mt.ty, e, v); }\n       ty_ptr(mt) { v.visit_ty(mt.ty, e, v); }\n       ty_port(t) { v.visit_ty(t, e, v); }"}, {"sha": "5ffda231d8c9d3acb24f2b3a10ce5c7025755445", "filename": "src/test/run-pass/unique-decl.rs", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/865dcb663da2d0534d508346cbe1df5dc66f3ad6/src%2Ftest%2Frun-pass%2Funique-decl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/865dcb663da2d0534d508346cbe1df5dc66f3ad6/src%2Ftest%2Frun-pass%2Funique-decl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Funique-decl.rs?ref=865dcb663da2d0534d508346cbe1df5dc66f3ad6", "patch": "@@ -0,0 +1,7 @@\n+fn main() {\n+    let _: ~int;\n+}\n+\n+fn f(i: ~int) -> ~int {\n+    fail;\n+}"}]}