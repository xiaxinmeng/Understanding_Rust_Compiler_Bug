{"sha": "eef5104c53114bf9a074fe8d83cfd782bd78652d", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVlZjUxMDRjNTMxMTRiZjlhMDc0ZmU4ZDgzY2ZkNzgyYmQ3ODY1MmQ=", "commit": {"author": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2020-10-01T05:13:33Z"}, "committer": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2020-10-01T05:19:39Z"}, "message": "Add test of VEC.push on a const", "tree": {"sha": "540d291115a29c7b0d1b23f33141a2811c360998", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/540d291115a29c7b0d1b23f33141a2811c360998"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/eef5104c53114bf9a074fe8d83cfd782bd78652d", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEERijF2Cz/ZdaBZKeK+boUO5X/bYIFAl91ZusACgkQ+boUO5X/\nbYLU+A//eyjxRVAWkEla7XeWrjvb5wOTijsiNAnDXUX4hmvuEAkJsSynt2/m7j6F\niN7eR/SyYmxWbbkKXl8+uHawxtT6+kECTzw5J70MQhVwzJRbC314ZOYGSy13JwyL\n+uGPDXGp9ZR0MMlxBTA7OL+qf4mnZ52dCQMQG70p1VlcWElXEp1JuENaym3c5Uwh\nJAptOahmJdq7/IAiTOOhlXI4hn2qkuDMRzxx5wKQk/kZVk220Bktt/0PT/DovYi7\nH9THwC2NsscZ51GQZwpuzDmMZEYam0rrUMPKV5Cvcwh+0AJoE5sMW+Z7wB1CIyEG\nUdcutlO1aYACOe2ApSuGWxG8nEDx/0zlwUdO8ys9+9o9+iltPdgjMsLxS70c0ymQ\nDFnfIevL+s0T9ryuWSbnYeqgl+ezUjJvFVwLT1PauFSXb9AIvZBPEsqxUuqE6RzQ\n62qqI3QNM9MzEUJGe0H7ZfmZzdtb2g3fCfvkZrQYsF6MRJgDflWVSvRUNRcn/cjV\nJNzl9uEc/sT8zlYW+yBfUYAfjBPHfISGYt57EvhCJLwhctcpo6VtwalqiafKKUjk\nhGZRIrhx1DgXNDU4A+5x4GAuubHpP8QMazXkO6EQkrOvxjWQkF5d/pGofQovXV5x\nRxqJuRmrI/c6K3Gu/tYmhdPT4/CgGwmQ7nSOMxD6rVHj4GeiKIU=\n=1t30\n-----END PGP SIGNATURE-----", "payload": "tree 540d291115a29c7b0d1b23f33141a2811c360998\nparent 41baa090ad1c40a7fc96f96664543ce4c26746c2\nauthor David Tolnay <dtolnay@gmail.com> 1601529213 -0700\ncommitter David Tolnay <dtolnay@gmail.com> 1601529579 -0700\n\nAdd test of VEC.push on a const\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/eef5104c53114bf9a074fe8d83cfd782bd78652d", "html_url": "https://github.com/rust-lang/rust/commit/eef5104c53114bf9a074fe8d83cfd782bd78652d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/eef5104c53114bf9a074fe8d83cfd782bd78652d/comments", "author": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "41baa090ad1c40a7fc96f96664543ce4c26746c2", "url": "https://api.github.com/repos/rust-lang/rust/commits/41baa090ad1c40a7fc96f96664543ce4c26746c2", "html_url": "https://github.com/rust-lang/rust/commit/41baa090ad1c40a7fc96f96664543ce4c26746c2"}], "stats": {"total": 16, "additions": 9, "deletions": 7}, "files": [{"sha": "9f6a4e590885802cd305794f2d965942e1c0ed1e", "filename": "src/test/ui/lint/lint-const-item-mutation.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/eef5104c53114bf9a074fe8d83cfd782bd78652d/src%2Ftest%2Fui%2Flint%2Flint-const-item-mutation.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eef5104c53114bf9a074fe8d83cfd782bd78652d/src%2Ftest%2Fui%2Flint%2Flint-const-item-mutation.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Flint-const-item-mutation.rs?ref=eef5104c53114bf9a074fe8d83cfd782bd78652d", "patch": "@@ -28,6 +28,7 @@ const MY_STRUCT: MyStruct = MyStruct { field: true, inner_array: ['a'], raw_ptr:\n const RAW_PTR: *mut u8 = 1 as *mut u8;\n const MUTABLE: Mutable = Mutable { msg: \"\" };\n const MUTABLE2: Mutable2 = Mutable2 { msg: \"\", other: String::new() };\n+const VEC: Vec<i32> = Vec::new();\n \n fn main() {\n     ARRAY[0] = 5; //~ WARN attempting to modify\n@@ -48,4 +49,5 @@ fn main() {\n \n     MUTABLE.msg = \"wow\"; // no warning, because Drop observes the mutation\n     MUTABLE2.msg = \"wow\"; //~ WARN attempting to modify\n+    VEC.push(0); // no warning\n }"}, {"sha": "0e02ba928bb358d1b5de2aa696c9339c75e57344", "filename": "src/test/ui/lint/lint-const-item-mutation.stderr", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/eef5104c53114bf9a074fe8d83cfd782bd78652d/src%2Ftest%2Fui%2Flint%2Flint-const-item-mutation.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/eef5104c53114bf9a074fe8d83cfd782bd78652d/src%2Ftest%2Fui%2Flint%2Flint-const-item-mutation.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Flint-const-item-mutation.stderr?ref=eef5104c53114bf9a074fe8d83cfd782bd78652d", "patch": "@@ -1,5 +1,5 @@\n warning: attempting to modify a `const` item\n-  --> $DIR/lint-const-item-mutation.rs:33:5\n+  --> $DIR/lint-const-item-mutation.rs:34:5\n    |\n LL |     ARRAY[0] = 5;\n    |     ^^^^^^^^^^^^\n@@ -13,7 +13,7 @@ LL | const ARRAY: [u8; 1] = [25];\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: attempting to modify a `const` item\n-  --> $DIR/lint-const-item-mutation.rs:34:5\n+  --> $DIR/lint-const-item-mutation.rs:35:5\n    |\n LL |     MY_STRUCT.field = false;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^\n@@ -26,7 +26,7 @@ LL | const MY_STRUCT: MyStruct = MyStruct { field: true, inner_array: ['a'], raw\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: attempting to modify a `const` item\n-  --> $DIR/lint-const-item-mutation.rs:35:5\n+  --> $DIR/lint-const-item-mutation.rs:36:5\n    |\n LL |     MY_STRUCT.inner_array[0] = 'b';\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n@@ -39,7 +39,7 @@ LL | const MY_STRUCT: MyStruct = MyStruct { field: true, inner_array: ['a'], raw\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: taking a mutable reference to a `const` item\n-  --> $DIR/lint-const-item-mutation.rs:36:5\n+  --> $DIR/lint-const-item-mutation.rs:37:5\n    |\n LL |     MY_STRUCT.use_mut();\n    |     ^^^^^^^^^^^^^^^^^^^\n@@ -58,7 +58,7 @@ LL | const MY_STRUCT: MyStruct = MyStruct { field: true, inner_array: ['a'], raw\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: taking a mutable reference to a `const` item\n-  --> $DIR/lint-const-item-mutation.rs:37:5\n+  --> $DIR/lint-const-item-mutation.rs:38:5\n    |\n LL |     &mut MY_STRUCT;\n    |     ^^^^^^^^^^^^^^\n@@ -72,7 +72,7 @@ LL | const MY_STRUCT: MyStruct = MyStruct { field: true, inner_array: ['a'], raw\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: taking a mutable reference to a `const` item\n-  --> $DIR/lint-const-item-mutation.rs:38:5\n+  --> $DIR/lint-const-item-mutation.rs:39:5\n    |\n LL |     (&mut MY_STRUCT).use_mut();\n    |     ^^^^^^^^^^^^^^^^\n@@ -86,7 +86,7 @@ LL | const MY_STRUCT: MyStruct = MyStruct { field: true, inner_array: ['a'], raw\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: attempting to modify a `const` item\n-  --> $DIR/lint-const-item-mutation.rs:50:5\n+  --> $DIR/lint-const-item-mutation.rs:51:5\n    |\n LL |     MUTABLE2.msg = \"wow\";\n    |     ^^^^^^^^^^^^^^^^^^^^"}]}