{"sha": "b82cd9f6391df865551bc6c756cc29a7993e39be", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI4MmNkOWY2MzkxZGY4NjU1NTFiYzZjNzU2Y2MyOWE3OTkzZTM5YmU=", "commit": {"author": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2020-01-08T20:16:57Z"}, "committer": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2020-01-09T18:49:32Z"}, "message": "Address review comments + Update NLL tests", "tree": {"sha": "bb96428b089f3bc0cb59c051bf334c69ac457456", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bb96428b089f3bc0cb59c051bf334c69ac457456"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b82cd9f6391df865551bc6c756cc29a7993e39be", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b82cd9f6391df865551bc6c756cc29a7993e39be", "html_url": "https://github.com/rust-lang/rust/commit/b82cd9f6391df865551bc6c756cc29a7993e39be", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b82cd9f6391df865551bc6c756cc29a7993e39be/comments", "author": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "committer": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "642669c74d97b79a9a9f7300dfac3bb86bb75d97", "url": "https://api.github.com/repos/rust-lang/rust/commits/642669c74d97b79a9a9f7300dfac3bb86bb75d97", "html_url": "https://github.com/rust-lang/rust/commit/642669c74d97b79a9a9f7300dfac3bb86bb75d97"}], "stats": {"total": 124, "additions": 118, "deletions": 6}, "files": [{"sha": "7a28c6428a3555032fa5f7275fd28972609296b1", "filename": "src/test/ui/deduplicate-diagnostics-2.deduplicate.stderr", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/b82cd9f6391df865551bc6c756cc29a7993e39be/src%2Ftest%2Fui%2Fdeduplicate-diagnostics-2.deduplicate.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b82cd9f6391df865551bc6c756cc29a7993e39be/src%2Ftest%2Fui%2Fdeduplicate-diagnostics-2.deduplicate.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdeduplicate-diagnostics-2.deduplicate.stderr?ref=b82cd9f6391df865551bc6c756cc29a7993e39be", "patch": "@@ -0,0 +1,28 @@\n+warning: floating-point types cannot be used in patterns\n+  --> $DIR/deduplicate-diagnostics-2.rs:7:9\n+   |\n+LL |         1.0 => {}\n+   |         ^^^\n+   |\n+   = note: `#[warn(illegal_floating_point_literal_pattern)]` on by default\n+   = warning: this was previously accepted by the compiler but is being phased out; it will become a hard error in a future release!\n+   = note: for more information, see issue #41620 <https://github.com/rust-lang/rust/issues/41620>\n+\n+warning: floating-point types cannot be used in patterns\n+  --> $DIR/deduplicate-diagnostics-2.rs:11:9\n+   |\n+LL |         2.0 => {}\n+   |         ^^^\n+   |\n+   = warning: this was previously accepted by the compiler but is being phased out; it will become a hard error in a future release!\n+   = note: for more information, see issue #41620 <https://github.com/rust-lang/rust/issues/41620>\n+\n+warning: floating-point types cannot be used in patterns\n+  --> $DIR/deduplicate-diagnostics-2.rs:7:9\n+   |\n+LL |         1.0 => {}\n+   |         ^^^\n+   |\n+   = warning: this was previously accepted by the compiler but is being phased out; it will become a hard error in a future release!\n+   = note: for more information, see issue #41620 <https://github.com/rust-lang/rust/issues/41620>\n+"}, {"sha": "4fff3a8c0f374fa3afec632af2800fc385edf6d8", "filename": "src/test/ui/deduplicate-diagnostics-2.duplicate.stderr", "status": "added", "additions": 37, "deletions": 0, "changes": 37, "blob_url": "https://github.com/rust-lang/rust/blob/b82cd9f6391df865551bc6c756cc29a7993e39be/src%2Ftest%2Fui%2Fdeduplicate-diagnostics-2.duplicate.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b82cd9f6391df865551bc6c756cc29a7993e39be/src%2Ftest%2Fui%2Fdeduplicate-diagnostics-2.duplicate.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdeduplicate-diagnostics-2.duplicate.stderr?ref=b82cd9f6391df865551bc6c756cc29a7993e39be", "patch": "@@ -0,0 +1,37 @@\n+warning: floating-point types cannot be used in patterns\n+  --> $DIR/deduplicate-diagnostics-2.rs:7:9\n+   |\n+LL |         1.0 => {}\n+   |         ^^^\n+   |\n+   = note: `#[warn(illegal_floating_point_literal_pattern)]` on by default\n+   = warning: this was previously accepted by the compiler but is being phased out; it will become a hard error in a future release!\n+   = note: for more information, see issue #41620 <https://github.com/rust-lang/rust/issues/41620>\n+\n+warning: floating-point types cannot be used in patterns\n+  --> $DIR/deduplicate-diagnostics-2.rs:11:9\n+   |\n+LL |         2.0 => {}\n+   |         ^^^\n+   |\n+   = warning: this was previously accepted by the compiler but is being phased out; it will become a hard error in a future release!\n+   = note: for more information, see issue #41620 <https://github.com/rust-lang/rust/issues/41620>\n+\n+warning: floating-point types cannot be used in patterns\n+  --> $DIR/deduplicate-diagnostics-2.rs:7:9\n+   |\n+LL |         1.0 => {}\n+   |         ^^^\n+   |\n+   = warning: this was previously accepted by the compiler but is being phased out; it will become a hard error in a future release!\n+   = note: for more information, see issue #41620 <https://github.com/rust-lang/rust/issues/41620>\n+\n+warning: floating-point types cannot be used in patterns\n+  --> $DIR/deduplicate-diagnostics-2.rs:11:9\n+   |\n+LL |         2.0 => {}\n+   |         ^^^\n+   |\n+   = warning: this was previously accepted by the compiler but is being phased out; it will become a hard error in a future release!\n+   = note: for more information, see issue #41620 <https://github.com/rust-lang/rust/issues/41620>\n+"}, {"sha": "f46a7c0c1c4d816954aeb64ad052ccb9c51ef426", "filename": "src/test/ui/deduplicate-diagnostics-2.rs", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/b82cd9f6391df865551bc6c756cc29a7993e39be/src%2Ftest%2Fui%2Fdeduplicate-diagnostics-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b82cd9f6391df865551bc6c756cc29a7993e39be/src%2Ftest%2Fui%2Fdeduplicate-diagnostics-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdeduplicate-diagnostics-2.rs?ref=b82cd9f6391df865551bc6c756cc29a7993e39be", "patch": "@@ -0,0 +1,17 @@\n+// build-pass\n+// revisions: duplicate deduplicate\n+//[deduplicate] compile-flags: -Z deduplicate-diagnostics=yes\n+\n+fn main() {\n+    match 0.0 {\n+        1.0 => {} //~ WARNING floating-point types cannot be used in patterns\n+                  //~| WARNING this was previously accepted\n+                  //~| WARNING floating-point types cannot be used in patterns\n+                  //~| WARNING this was previously accepted\n+        2.0 => {} //~ WARNING floating-point types cannot be used in patterns\n+                  //~| WARNING this was previously accepted\n+                  //[duplicate]~| WARNING floating-point types cannot be used in patterns\n+                  //[duplicate]~| WARNING this was previously accepted\n+        _ => {}\n+    }\n+}"}, {"sha": "5df2c687bddc2ea78b7712f4b3e79bc6dfa1f73b", "filename": "src/test/ui/deduplicate-diagnostics.deduplicate.stderr", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/b82cd9f6391df865551bc6c756cc29a7993e39be/src%2Ftest%2Fui%2Fdeduplicate-diagnostics.deduplicate.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b82cd9f6391df865551bc6c756cc29a7993e39be/src%2Ftest%2Fui%2Fdeduplicate-diagnostics.deduplicate.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdeduplicate-diagnostics.deduplicate.stderr?ref=b82cd9f6391df865551bc6c756cc29a7993e39be", "patch": "@@ -1,8 +1,15 @@\n+error[E0452]: malformed lint attribute input\n+  --> $DIR/deduplicate-diagnostics.rs:8:8\n+   |\n+LL | #[deny(\"literal\")]\n+   |        ^^^^^^^^^ bad attribute argument\n+\n error: cannot find derive macro `Unresolved` in this scope\n   --> $DIR/deduplicate-diagnostics.rs:4:10\n    |\n LL | #[derive(Unresolved)]\n    |          ^^^^^^^^^^\n \n-error: aborting due to previous error\n+error: aborting due to 2 previous errors\n \n+For more information about this error, try `rustc --explain E0452`."}, {"sha": "3b100b59995f067811351df595c5e32037a842b9", "filename": "src/test/ui/deduplicate-diagnostics.duplicate.stderr", "status": "modified", "additions": 20, "deletions": 1, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/b82cd9f6391df865551bc6c756cc29a7993e39be/src%2Ftest%2Fui%2Fdeduplicate-diagnostics.duplicate.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b82cd9f6391df865551bc6c756cc29a7993e39be/src%2Ftest%2Fui%2Fdeduplicate-diagnostics.duplicate.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdeduplicate-diagnostics.duplicate.stderr?ref=b82cd9f6391df865551bc6c756cc29a7993e39be", "patch": "@@ -1,3 +1,9 @@\n+error[E0452]: malformed lint attribute input\n+  --> $DIR/deduplicate-diagnostics.rs:8:8\n+   |\n+LL | #[deny(\"literal\")]\n+   |        ^^^^^^^^^ bad attribute argument\n+\n error: cannot find derive macro `Unresolved` in this scope\n   --> $DIR/deduplicate-diagnostics.rs:4:10\n    |\n@@ -10,5 +16,18 @@ error: cannot find derive macro `Unresolved` in this scope\n LL | #[derive(Unresolved)]\n    |          ^^^^^^^^^^\n \n-error: aborting due to 2 previous errors\n+error[E0452]: malformed lint attribute input\n+  --> $DIR/deduplicate-diagnostics.rs:8:8\n+   |\n+LL | #[deny(\"literal\")]\n+   |        ^^^^^^^^^ bad attribute argument\n+\n+error[E0452]: malformed lint attribute input\n+  --> $DIR/deduplicate-diagnostics.rs:8:8\n+   |\n+LL | #[deny(\"literal\")]\n+   |        ^^^^^^^^^ bad attribute argument\n+\n+error: aborting due to 5 previous errors\n \n+For more information about this error, try `rustc --explain E0452`."}, {"sha": "c5d41ff2fdac3888241390ce946bc64353002ddb", "filename": "src/test/ui/deduplicate-diagnostics.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/b82cd9f6391df865551bc6c756cc29a7993e39be/src%2Ftest%2Fui%2Fdeduplicate-diagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b82cd9f6391df865551bc6c756cc29a7993e39be/src%2Ftest%2Fui%2Fdeduplicate-diagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdeduplicate-diagnostics.rs?ref=b82cd9f6391df865551bc6c756cc29a7993e39be", "patch": "@@ -5,4 +5,7 @@\n                       //[duplicate]~| ERROR cannot find derive macro `Unresolved` in this scope\n struct S;\n \n+#[deny(\"literal\")] //~ ERROR malformed lint attribute input\n+                   //[duplicate]~| ERROR malformed lint attribute input\n+                   //[duplicate]~| ERROR malformed lint attribute input\n fn main() {}"}, {"sha": "bf87aea0d4c1ab847001dd46e04e6383eb532198", "filename": "src/test/ui/generator/auto-trait-regions.nll.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/b82cd9f6391df865551bc6c756cc29a7993e39be/src%2Ftest%2Fui%2Fgenerator%2Fauto-trait-regions.nll.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b82cd9f6391df865551bc6c756cc29a7993e39be/src%2Ftest%2Fui%2Fgenerator%2Fauto-trait-regions.nll.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fgenerator%2Fauto-trait-regions.nll.stderr?ref=b82cd9f6391df865551bc6c756cc29a7993e39be", "patch": "@@ -1,5 +1,5 @@\n error[E0716]: temporary value dropped while borrowed\n-  --> $DIR/auto-trait-regions.rs:44:24\n+  --> $DIR/auto-trait-regions.rs:45:24\n    |\n LL |         let a = A(&mut true, &mut true, No);\n    |                        ^^^^                - temporary value is freed at the end of this statement\n@@ -12,7 +12,7 @@ LL |         assert_foo(a);\n    = note: consider using a `let` binding to create a longer lived value\n \n error[E0716]: temporary value dropped while borrowed\n-  --> $DIR/auto-trait-regions.rs:44:35\n+  --> $DIR/auto-trait-regions.rs:45:35\n    |\n LL |         let a = A(&mut true, &mut true, No);\n    |                                   ^^^^     - temporary value is freed at the end of this statement\n@@ -31,7 +31,7 @@ LL |     assert_foo(gen);\n    |     ^^^^^^^^^^^^^^^\n \n error: higher-ranked subtype error\n-  --> $DIR/auto-trait-regions.rs:48:5\n+  --> $DIR/auto-trait-regions.rs:49:5\n    |\n LL |     assert_foo(gen);\n    |     ^^^^^^^^^^^^^^^"}, {"sha": "303c0cc645e38262d42966cd1bf2f7b0e5f47e2e", "filename": "src/test/ui/hrtb/hrtb-perfect-forwarding.nll.stderr", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/b82cd9f6391df865551bc6c756cc29a7993e39be/src%2Ftest%2Fui%2Fhrtb%2Fhrtb-perfect-forwarding.nll.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b82cd9f6391df865551bc6c756cc29a7993e39be/src%2Ftest%2Fui%2Fhrtb%2Fhrtb-perfect-forwarding.nll.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fhrtb%2Fhrtb-perfect-forwarding.nll.stderr?ref=b82cd9f6391df865551bc6c756cc29a7993e39be", "patch": "@@ -39,6 +39,7 @@ LL | |     // Not OK -- The forwarding impl for `Foo` requires that `Bar` also\n ...  |\n LL | |     foo_hrtb_bar_not(&mut t);\n    | |     ------------------------ recursive call site\n+LL | |\n LL | | }\n    | |_^ cannot return without recursing\n    |\n@@ -62,7 +63,7 @@ LL |     foo_hrtb_bar_not(&mut t);\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: function cannot return without recursing\n-  --> $DIR/hrtb-perfect-forwarding.rs:49:1\n+  --> $DIR/hrtb-perfect-forwarding.rs:50:1\n    |\n LL | / fn foo_hrtb_bar_hrtb<T>(mut t: T)\n LL | |     where T : for<'a> Foo<&'a isize> + for<'b> Bar<&'b isize>"}]}