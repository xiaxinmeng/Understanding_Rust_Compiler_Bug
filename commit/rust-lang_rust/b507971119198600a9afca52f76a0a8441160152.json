{"sha": "b507971119198600a9afca52f76a0a8441160152", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI1MDc5NzExMTkxOTg2MDBhOWFmY2E1MmY3NmEwYTg0NDExNjAxNTI=", "commit": {"author": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2019-09-29T15:51:09Z"}, "committer": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2019-10-03T22:12:28Z"}, "message": "metadata: Remove `CrateMetadata::imported_name`\n\nIt's entirely irrelevant to crate loading", "tree": {"sha": "4e3bf5420a40db0954465f972686d8653073b988", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4e3bf5420a40db0954465f972686d8653073b988"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b507971119198600a9afca52f76a0a8441160152", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b507971119198600a9afca52f76a0a8441160152", "html_url": "https://github.com/rust-lang/rust/commit/b507971119198600a9afca52f76a0a8441160152", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b507971119198600a9afca52f76a0a8441160152/comments", "author": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "committer": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "032a53a06ce293571e51bbe621a5c480e8a28e95", "url": "https://api.github.com/repos/rust-lang/rust/commits/032a53a06ce293571e51bbe621a5c480e8a28e95", "html_url": "https://github.com/rust-lang/rust/commit/032a53a06ce293571e51bbe621a5c480e8a28e95"}], "stats": {"total": 9, "additions": 1, "deletions": 8}, "files": [{"sha": "69e9c6eb83b7405aa05d025a8fae2e623ee1398c", "filename": "src/librustc_metadata/creader.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b507971119198600a9afca52f76a0a8441160152/src%2Flibrustc_metadata%2Fcreader.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b507971119198600a9afca52f76a0a8441160152/src%2Flibrustc_metadata%2Fcreader.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_metadata%2Fcreader.rs?ref=b507971119198600a9afca52f76a0a8441160152", "patch": "@@ -207,7 +207,6 @@ impl<'a> CrateLoader<'a> {\n         info!(\"register crate `extern crate {} as {}` (private_dep = {})\",\n             crate_root.name, ident, private_dep);\n \n-\n         // Claim this crate number and cache it\n         let cnum = self.cstore.alloc_new_crate_num();\n \n@@ -255,7 +254,6 @@ impl<'a> CrateLoader<'a> {\n \n         let cmeta = cstore::CrateMetadata {\n             name: crate_root.name,\n-            imported_name: ident,\n             extern_crate: Lock::new(None),\n             def_path_table: Lrc::new(def_path_table),\n             trait_impls,"}, {"sha": "ed43aad38be0ab4601e1473955cd4f57a73424a0", "filename": "src/librustc_metadata/cstore.rs", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/b507971119198600a9afca52f76a0a8441160152/src%2Flibrustc_metadata%2Fcstore.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b507971119198600a9afca52f76a0a8441160152/src%2Flibrustc_metadata%2Fcstore.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_metadata%2Fcstore.rs?ref=b507971119198600a9afca52f76a0a8441160152", "patch": "@@ -49,10 +49,6 @@ pub struct CrateMetadata {\n     /// Original name of the crate.\n     pub name: Symbol,\n \n-    /// Name of the crate as imported. I.e., if imported with\n-    /// `extern crate foo as bar;` this will be `bar`.\n-    pub imported_name: Symbol,\n-\n     /// Information about the extern crate that caused this crate to\n     /// be loaded. If this is `None`, then the crate was injected\n     /// (e.g., by the allocator)"}, {"sha": "b5366769fff6728a9e7205f1bc0708ba4fee6bdc", "filename": "src/librustc_metadata/cstore_impl.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/b507971119198600a9afca52f76a0a8441160152/src%2Flibrustc_metadata%2Fcstore_impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b507971119198600a9afca52f76a0a8441160152/src%2Flibrustc_metadata%2Fcstore_impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_metadata%2Fcstore_impl.rs?ref=b507971119198600a9afca52f76a0a8441160152", "patch": "@@ -453,8 +453,7 @@ impl cstore::CStore {\n         }\n \n         let def = data.get_macro(id.index);\n-        let macro_full_name = data.def_path(id.index)\n-            .to_string_friendly(|_| data.imported_name);\n+        let macro_full_name = data.def_path(id.index).to_string_friendly(|_| data.name);\n         let source_name = FileName::Macros(macro_full_name);\n \n         let source_file = sess.parse_sess.source_map().new_source_file(source_name, def.body);"}]}