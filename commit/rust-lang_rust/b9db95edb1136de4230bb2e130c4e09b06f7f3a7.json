{"sha": "b9db95edb1136de4230bb2e130c4e09b06f7f3a7", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI5ZGI5NWVkYjExMzZkZTQyMzBiYjJlMTMwYzRlMDliMDZmN2YzYTc=", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2019-08-01T07:12:48Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2019-08-02T21:04:11Z"}, "message": "fix rebase fallout", "tree": {"sha": "40a1a618251df84051a45735a041c59bf0eb5d94", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/40a1a618251df84051a45735a041c59bf0eb5d94"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b9db95edb1136de4230bb2e130c4e09b06f7f3a7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b9db95edb1136de4230bb2e130c4e09b06f7f3a7", "html_url": "https://github.com/rust-lang/rust/commit/b9db95edb1136de4230bb2e130c4e09b06f7f3a7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b9db95edb1136de4230bb2e130c4e09b06f7f3a7/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0f97583e68f26eb1a1957886ea1fa8fa17288b92", "url": "https://api.github.com/repos/rust-lang/rust/commits/0f97583e68f26eb1a1957886ea1fa8fa17288b92", "html_url": "https://github.com/rust-lang/rust/commit/0f97583e68f26eb1a1957886ea1fa8fa17288b92"}], "stats": {"total": 13, "additions": 7, "deletions": 6}, "files": [{"sha": "69f0d8df0aa4aafa1e98f88aaa434b4c5f9a2432", "filename": "src/test/ui/consts/issue-51559.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b9db95edb1136de4230bb2e130c4e09b06f7f3a7/src%2Ftest%2Fui%2Fconsts%2Fissue-51559.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b9db95edb1136de4230bb2e130c4e09b06f7f3a7/src%2Ftest%2Fui%2Fconsts%2Fissue-51559.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fissue-51559.rs?ref=b9db95edb1136de4230bb2e130c4e09b06f7f3a7", "patch": "@@ -2,6 +2,6 @@\n \n const BAR: *mut () = ((|| 3) as fn() -> i32) as *mut ();\n pub const FOO: usize = unsafe { BAR as usize };\n-//~^ ERROR it is undefined behavior to use this value\n+//~^ ERROR any use of this value will cause an error\n \n fn main() {}"}, {"sha": "4d50ec818bce7945e789b3087ce6af3c2e348abf", "filename": "src/test/ui/consts/issue-51559.stderr", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/b9db95edb1136de4230bb2e130c4e09b06f7f3a7/src%2Ftest%2Fui%2Fconsts%2Fissue-51559.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b9db95edb1136de4230bb2e130c4e09b06f7f3a7/src%2Ftest%2Fui%2Fconsts%2Fissue-51559.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fissue-51559.stderr?ref=b9db95edb1136de4230bb2e130c4e09b06f7f3a7", "patch": "@@ -1,11 +1,12 @@\n-error[E0080]: it is undefined behavior to use this value\n-  --> $DIR/issue-51559.rs:4:1\n+error: any use of this value will cause an error\n+  --> $DIR/issue-51559.rs:4:33\n    |\n LL | pub const FOO: usize = unsafe { BAR as usize };\n-   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ type validation failed: encountered a pointer, but expected initialized plain (non-pointer) bytes\n+   | --------------------------------^^^^^^^^^^^^---\n+   |                                 |\n+   |                                 \"pointer-to-integer cast\" needs an rfc before being allowed inside constants\n    |\n-   = note: The rules on what exactly is undefined behavior aren't clear, so this check might be overzealous. Please open an issue on the rust compiler repository if you believe it should not be considered undefined behavior\n+   = note: `#[deny(const_err)]` on by default\n \n error: aborting due to previous error\n \n-For more information about this error, try `rustc --explain E0080`."}]}