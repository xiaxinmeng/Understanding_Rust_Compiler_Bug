{"sha": "82a012299dcf6fefc107cbb7036465fe94ec1e2d", "node_id": "C_kwDOAAsO6NoAKDgyYTAxMjI5OWRjZjZmZWZjMTA3Y2JiNzAzNjQ2NWZlOTRlYzFlMmQ", "commit": {"author": {"name": "Rob Pilling", "email": "robpilling@gmail.com", "date": "2022-02-02T22:22:13Z"}, "committer": {"name": "Rob Pilling", "email": "robpilling@gmail.com", "date": "2022-02-06T20:58:24Z"}, "message": "Merge duplicate suggestion string", "tree": {"sha": "58a8d8daa002a8fb301ff2fdeccae68469fd3962", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/58a8d8daa002a8fb301ff2fdeccae68469fd3962"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/82a012299dcf6fefc107cbb7036465fe94ec1e2d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/82a012299dcf6fefc107cbb7036465fe94ec1e2d", "html_url": "https://github.com/rust-lang/rust/commit/82a012299dcf6fefc107cbb7036465fe94ec1e2d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/82a012299dcf6fefc107cbb7036465fe94ec1e2d/comments", "author": {"login": "bobrippling", "id": 205673, "node_id": "MDQ6VXNlcjIwNTY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/205673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobrippling", "html_url": "https://github.com/bobrippling", "followers_url": "https://api.github.com/users/bobrippling/followers", "following_url": "https://api.github.com/users/bobrippling/following{/other_user}", "gists_url": "https://api.github.com/users/bobrippling/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobrippling/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobrippling/subscriptions", "organizations_url": "https://api.github.com/users/bobrippling/orgs", "repos_url": "https://api.github.com/users/bobrippling/repos", "events_url": "https://api.github.com/users/bobrippling/events{/privacy}", "received_events_url": "https://api.github.com/users/bobrippling/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bobrippling", "id": 205673, "node_id": "MDQ6VXNlcjIwNTY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/205673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobrippling", "html_url": "https://github.com/bobrippling", "followers_url": "https://api.github.com/users/bobrippling/followers", "following_url": "https://api.github.com/users/bobrippling/following{/other_user}", "gists_url": "https://api.github.com/users/bobrippling/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobrippling/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobrippling/subscriptions", "organizations_url": "https://api.github.com/users/bobrippling/orgs", "repos_url": "https://api.github.com/users/bobrippling/repos", "events_url": "https://api.github.com/users/bobrippling/events{/privacy}", "received_events_url": "https://api.github.com/users/bobrippling/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "344ea6e0e5d5fca3fbfb065a9fd03eff55f76471", "url": "https://api.github.com/repos/rust-lang/rust/commits/344ea6e0e5d5fca3fbfb065a9fd03eff55f76471", "html_url": "https://github.com/rust-lang/rust/commit/344ea6e0e5d5fca3fbfb065a9fd03eff55f76471"}], "stats": {"total": 11, "additions": 4, "deletions": 7}, "files": [{"sha": "c5da9977db782404c8abef815f91a10e131330bb", "filename": "compiler/rustc_infer/src/infer/error_reporting/mod.rs", "status": "modified", "additions": 4, "deletions": 7, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/82a012299dcf6fefc107cbb7036465fe94ec1e2d/compiler%2Frustc_infer%2Fsrc%2Finfer%2Ferror_reporting%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/82a012299dcf6fefc107cbb7036465fe94ec1e2d/compiler%2Frustc_infer%2Fsrc%2Finfer%2Ferror_reporting%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_infer%2Fsrc%2Finfer%2Ferror_reporting%2Fmod.rs?ref=82a012299dcf6fefc107cbb7036465fe94ec1e2d", "patch": "@@ -2125,22 +2125,19 @@ impl<'a, 'tcx> InferCtxt<'a, 'tcx> {\n         let Ok(code) = self.tcx.sess().source_map().span_to_snippet(span)\n             else { return };\n \n+        let msg = \"use a trailing comma to create a tuple with one element\";\n         if code.starts_with('(') && code.ends_with(')') {\n             let before_close = span.hi() - BytePos::from_u32(1);\n-\n             err.span_suggestion(\n                 span.with_hi(before_close).shrink_to_hi(),\n-                \"use a trailing comma to create a tuple with one element\",\n+                msg,\n                 \",\".into(),\n                 Applicability::MachineApplicable,\n             );\n         } else {\n             err.multipart_suggestion(\n-                \"use a trailing comma to create a tuple with one element\",\n-                vec![\n-                    (span.shrink_to_lo(), \"(\".into()),\n-                    (span.shrink_to_hi(), \",)\".into()),\n-                ],\n+                msg,\n+                vec![(span.shrink_to_lo(), \"(\".into()), (span.shrink_to_hi(), \",)\".into())],\n                 Applicability::MachineApplicable,\n             );\n         }"}]}