{"sha": "4e6efe48110a5e09ee87b0aa8cea31d511bb5708", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRlNmVmZTQ4MTEwYTVlMDllZTg3YjBhYThjZWEzMWQ1MTFiYjU3MDg=", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2019-10-17T19:22:46Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2019-10-17T19:22:46Z"}, "message": "reorder fmt docs for more clarity", "tree": {"sha": "4de03dcd86362273e5db0e6ad416b9a9d0c2dc86", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4de03dcd86362273e5db0e6ad416b9a9d0c2dc86"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4e6efe48110a5e09ee87b0aa8cea31d511bb5708", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4e6efe48110a5e09ee87b0aa8cea31d511bb5708", "html_url": "https://github.com/rust-lang/rust/commit/4e6efe48110a5e09ee87b0aa8cea31d511bb5708", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4e6efe48110a5e09ee87b0aa8cea31d511bb5708/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b04338087eed5f26c72bdb0e426dc38e215e2dbb", "url": "https://api.github.com/repos/rust-lang/rust/commits/b04338087eed5f26c72bdb0e426dc38e215e2dbb", "html_url": "https://github.com/rust-lang/rust/commit/b04338087eed5f26c72bdb0e426dc38e215e2dbb"}], "stats": {"total": 103, "additions": 61, "deletions": 42}, "files": [{"sha": "4d3523da7fc0941c24b6f342ad910035b5acfe26", "filename": "src/liballoc/fmt.rs", "status": "modified", "additions": 61, "deletions": 42, "changes": 103, "blob_url": "https://github.com/rust-lang/rust/blob/4e6efe48110a5e09ee87b0aa8cea31d511bb5708/src%2Fliballoc%2Ffmt.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e6efe48110a5e09ee87b0aa8cea31d511bb5708/src%2Fliballoc%2Ffmt.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliballoc%2Ffmt.rs?ref=4e6efe48110a5e09ee87b0aa8cea31d511bb5708", "patch": "@@ -86,18 +86,53 @@\n //! parameters (corresponding to `format_spec` in the syntax above). These\n //! parameters affect the string representation of what's being formatted.\n //!\n+//! ## Width\n+//!\n+//! ```\n+//! // All of these print \"Hello x    !\"\n+//! println!(\"Hello {:5}!\", \"x\");\n+//! println!(\"Hello {:1$}!\", \"x\", 5);\n+//! println!(\"Hello {1:0$}!\", 5, \"x\");\n+//! println!(\"Hello {:width$}!\", \"x\", width = 5);\n+//! ```\n+//!\n+//! This is a parameter for the \"minimum width\" that the format should take up.\n+//! If the value's string does not fill up this many characters, then the\n+//! padding specified by fill/alignment will be used to take up the required\n+//! space (see below).\n+//!\n+//! The value for the width can also be provided as a [`usize`] in the list of\n+//! parameters by adding a postfix `$`, indicating that the second argument is\n+//! a [`usize`] specifying the width.\n+//!\n+//! Referring to an argument with the dollar syntax does not affect the \"next\n+//! argument\" counter, so it's usually a good idea to refer to arguments by\n+//! position, or use named arguments.\n+//!\n //! ## Fill/Alignment\n //!\n-//! The fill character is provided normally in conjunction with the\n-//! [`width`](#width)\n-//! parameter. This indicates that if the value being formatted is smaller than\n-//! `width` some extra characters will be printed around it. The extra\n-//! characters are specified by `fill`, and the alignment can be one of the\n-//! following options:\n+//! ```\n+//! assert_eq!(format!(\"Hello {:<5}!\", \"x\"),  \"Hello x    !\");\n+//! assert_eq!(format!(\"Hello {:-<5}!\", \"x\"), \"Hello x----!\");\n+//! assert_eq!(format!(\"Hello {:^5}!\", \"x\"),  \"Hello   x  !\");\n+//! assert_eq!(format!(\"Hello {:>5}!\", \"x\"),  \"Hello     x!\");\n+//! ```\n+//!\n+//! The optional fill character and alignment is provided normally in conjunction with the\n+//! [`width`](#width) parameter. It must be defined before `width`, right after the `:`.\n+//! This indicates that if the value being formatted is smaller than\n+//! `width` some extra characters will be printed around it.\n+//! Filling comes in the following variants for different alignments:\n //!\n-//! * `<` - the argument is left-aligned in `width` columns\n-//! * `^` - the argument is center-aligned in `width` columns\n-//! * `>` - the argument is right-aligned in `width` columns\n+//! * `[fill]<` - the argument is left-aligned in `width` columns\n+//! * `[fill]^` - the argument is center-aligned in `width` columns\n+//! * `[fill]>` - the argument is right-aligned in `width` columns\n+//!\n+//! The default [fill/alignment](#fillalignment) for non-numerics is a space and\n+//! left-aligned. The\n+//! defaults for numeric formatters is also a space but with right-alignment. If\n+//! the `0` flag (see below) is specified for numerics, then the implicit fill character is\n+//! `0`.\n //!\n //! Note that alignment may not be implemented by some types. In particular, it\n //! is not generally implemented for the `Debug` trait.  A good way to ensure\n@@ -106,7 +141,15 @@\n //!\n //! ## Sign/`#`/`0`\n //!\n-//! These can all be interpreted as flags for a particular formatter.\n+//! ```\n+//! assert_eq!(format!(\"Hello {:+}!\", 5), \"Hello +5!\");\n+//! assert_eq!(format!(\"{:#x}!\", 27), \"0x1b!\");\n+//! assert_eq!(format!(\"Hello {:05}!\", 5),  \"Hello 00005!\");\n+//! assert_eq!(format!(\"Hello {:05}!\", -5), \"Hello -0005!\");\n+//! assert_eq!(format!(\"{:#010x}!\", 27), \"0x0000001b!\");\n+//! ```\n+//!\n+//! These are all flags altering the behavior of the formatter.\n //!\n //! * `+` - This is intended for numeric types and indicates that the sign\n //!         should always be printed. Positive signs are never printed by\n@@ -121,44 +164,15 @@\n //!     * `#X` - precedes the argument with a `0x`\n //!     * `#b` - precedes the argument with a `0b`\n //!     * `#o` - precedes the argument with a `0o`\n-//! * `0` - This is used to indicate for integer formats that the padding should\n+//! * `0` - This is used to indicate for integer formats that the padding to `width` should\n //!         both be done with a `0` character as well as be sign-aware. A format\n //!         like `{:08}` would yield `00000001` for the integer `1`, while the\n //!         same format would yield `-0000001` for the integer `-1`. Notice that\n //!         the negative version has one fewer zero than the positive version.\n //!         Note that padding zeroes are always placed after the sign (if any)\n //!         and before the digits. When used together with the `#` flag, a similar\n //!         rule applies: padding zeroes are inserted after the prefix but before\n-//!         the digits.\n-//!\n-//! ## Width\n-//!\n-//! This is a parameter for the \"minimum width\" that the format should take up.\n-//! If the value's string does not fill up this many characters, then the\n-//! padding specified by fill/alignment will be used to take up the required\n-//! space.\n-//!\n-//! The default [fill/alignment](#fillalignment) for non-numerics is a space and\n-//! left-aligned. The\n-//! defaults for numeric formatters is also a space but with right-alignment. If\n-//! the `0` flag is specified for numerics, then the implicit fill character is\n-//! `0`.\n-//!\n-//! The value for the width can also be provided as a [`usize`] in the list of\n-//! parameters by using the dollar syntax indicating that the second argument is\n-//! a [`usize`] specifying the width, for example:\n-//!\n-//! ```\n-//! // All of these print \"Hello x    !\"\n-//! println!(\"Hello {:5}!\", \"x\");\n-//! println!(\"Hello {:1$}!\", \"x\", 5);\n-//! println!(\"Hello {1:0$}!\", 5, \"x\");\n-//! println!(\"Hello {:width$}!\", \"x\", width = 5);\n-//! ```\n-//!\n-//! Referring to an argument with the dollar syntax does not affect the \"next\n-//! argument\" counter, so it's usually a good idea to refer to arguments by\n-//! position, or use named arguments.\n+//!         the digits. The prefix is included in the total width.\n //!\n //! ## Precision\n //!\n@@ -235,9 +249,14 @@\n //! them with the same character. For example, the `{` character is escaped with\n //! `{{` and the `}` character is escaped with `}}`.\n //!\n+//! ```\n+//! assert_eq!(format!(\"Hello {{}}\"), \"Hello {}\");\n+//! assert_eq!(format!(\"{{ Hello\"), \"{ Hello\");\n+//! ```\n+//!\n //! # Syntax\n //!\n-//! To summarize, you can find the full grammar of format strings.\n+//! To summarize, here you can find the full grammar of format strings.\n //! The syntax for the formatting language used is drawn from other languages,\n //! so it should not be too alien. Arguments are formatted with Python-like\n //! syntax, meaning that arguments are surrounded by `{}` instead of the C-like"}]}