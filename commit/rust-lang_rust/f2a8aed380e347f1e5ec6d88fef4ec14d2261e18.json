{"sha": "f2a8aed380e347f1e5ec6d88fef4ec14d2261e18", "node_id": "MDY6Q29tbWl0NzI0NzEyOmYyYThhZWQzODBlMzQ3ZjFlNWVjNmQ4OGZlZjRlYzE0ZDIyNjFlMTg=", "commit": {"author": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2019-11-20T01:02:16Z"}, "committer": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2019-12-03T17:19:16Z"}, "message": "Directly use types from libsyntax::ast", "tree": {"sha": "904e2592e33a936932a290aafb57eb7b89b4536f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/904e2592e33a936932a290aafb57eb7b89b4536f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f2a8aed380e347f1e5ec6d88fef4ec14d2261e18", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f2a8aed380e347f1e5ec6d88fef4ec14d2261e18", "html_url": "https://github.com/rust-lang/rust/commit/f2a8aed380e347f1e5ec6d88fef4ec14d2261e18", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f2a8aed380e347f1e5ec6d88fef4ec14d2261e18/comments", "author": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "72c67bec09f681e73c96237b4aa66e9b01b933d2", "url": "https://api.github.com/repos/rust-lang/rust/commits/72c67bec09f681e73c96237b4aa66e9b01b933d2", "html_url": "https://github.com/rust-lang/rust/commit/72c67bec09f681e73c96237b4aa66e9b01b933d2"}], "stats": {"total": 9, "additions": 4, "deletions": 5}, "files": [{"sha": "1f9fd9e0319a264d62682318a43e01b5fcb472e5", "filename": "src/librustc/session/config.rs", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/f2a8aed380e347f1e5ec6d88fef4ec14d2261e18/src%2Flibrustc%2Fsession%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f2a8aed380e347f1e5ec6d88fef4ec14d2261e18/src%2Flibrustc%2Fsession%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fsession%2Fconfig.rs?ref=f2a8aed380e347f1e5ec6d88fef4ec14d2261e18", "patch": "@@ -12,8 +12,7 @@ use rustc_feature::UnstableFeatures;\n use rustc_target::spec::{LinkerFlavor, MergeFunctions, PanicStrategy, RelroLevel};\n use rustc_target::spec::{Target, TargetTriple};\n \n-use syntax;\n-use syntax::ast;\n+use syntax::ast::CrateConfig;\n use syntax::source_map::{FileName, FilePathMapping};\n use syntax::edition::{Edition, EDITION_NAME_LIST, DEFAULT_EDITION};\n use syntax::symbol::{sym, Symbol};\n@@ -1535,7 +1534,7 @@ pub const fn default_lib_output() -> CrateType {\n     CrateType::Rlib\n }\n \n-pub fn default_configuration(sess: &Session) -> ast::CrateConfig {\n+pub fn default_configuration(sess: &Session) -> CrateConfig {\n     let end = &sess.target.target.target_endian;\n     let arch = &sess.target.target.arch;\n     let wordsz = &sess.target.target.target_pointer_width;\n@@ -1607,13 +1606,13 @@ pub fn default_configuration(sess: &Session) -> ast::CrateConfig {\n /// Converts the crate `cfg!` configuration from `String` to `Symbol`.\n /// `rustc_interface::interface::Config` accepts this in the compiler configuration,\n /// but the symbol interner is not yet set up then, so we must convert it later.\n-pub fn to_crate_config(cfg: FxHashSet<(String, Option<String>)>) -> ast::CrateConfig {\n+pub fn to_crate_config(cfg: FxHashSet<(String, Option<String>)>) -> CrateConfig {\n     cfg.into_iter()\n        .map(|(a, b)| (Symbol::intern(&a), b.map(|b| Symbol::intern(&b))))\n        .collect()\n }\n \n-pub fn build_configuration(sess: &Session, mut user_cfg: ast::CrateConfig) -> ast::CrateConfig {\n+pub fn build_configuration(sess: &Session, mut user_cfg: CrateConfig) -> CrateConfig {\n     // Combine the configuration requested by the session (command line) with\n     // some default and generated configuration items.\n     let default_cfg = default_configuration(sess);"}]}