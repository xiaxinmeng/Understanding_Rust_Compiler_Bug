{"sha": "fbcc886338e581d156c76249b14d01f0117499cc", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZiY2M4ODYzMzhlNTgxZDE1NmM3NjI0OWIxNGQwMWYwMTE3NDk5Y2M=", "commit": {"author": {"name": "topecongiro", "email": "seuchida@gmail.com", "date": "2018-05-22T22:22:42Z"}, "committer": {"name": "topecongiro", "email": "seuchida@gmail.com", "date": "2018-05-22T22:22:42Z"}, "message": "Disallow combining a method call with prefix or suffix", "tree": {"sha": "7c46a16c310274c4851af3fd193c58fb047dd727", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7c46a16c310274c4851af3fd193c58fb047dd727"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fbcc886338e581d156c76249b14d01f0117499cc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fbcc886338e581d156c76249b14d01f0117499cc", "html_url": "https://github.com/rust-lang/rust/commit/fbcc886338e581d156c76249b14d01f0117499cc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fbcc886338e581d156c76249b14d01f0117499cc/comments", "author": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "committer": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d0980655b3934bedc03b0372661ba149bcbe679c", "url": "https://api.github.com/repos/rust-lang/rust/commits/d0980655b3934bedc03b0372661ba149bcbe679c", "html_url": "https://github.com/rust-lang/rust/commit/d0980655b3934bedc03b0372661ba149bcbe679c"}], "stats": {"total": 18, "additions": 15, "deletions": 3}, "files": [{"sha": "ca2d78b03c4a56bf17aa9eeceb567a5c0d51d685", "filename": "src/expr.rs", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/fbcc886338e581d156c76249b14d01f0117499cc/src%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fbcc886338e581d156c76249b14d01f0117499cc/src%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fexpr.rs?ref=fbcc886338e581d156c76249b14d01f0117499cc", "patch": "@@ -2172,3 +2172,15 @@ impl ToExpr for ast::GenericParam {\n         false\n     }\n }\n+\n+pub fn is_method_call(expr: &ast::Expr) -> bool {\n+    match expr.node {\n+        ast::ExprKind::MethodCall(..) => true,\n+        ast::ExprKind::AddrOf(_, ref expr)\n+        | ast::ExprKind::Box(ref expr)\n+        | ast::ExprKind::Cast(ref expr, _)\n+        | ast::ExprKind::Try(ref expr)\n+        | ast::ExprKind::Unary(_, ref expr) => is_method_call(expr),\n+        _ => false,\n+    }\n+}"}, {"sha": "f2f05d835ff0b6eed2571a453ba6491b4a23f074", "filename": "src/overflow.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/fbcc886338e581d156c76249b14d01f0117499cc/src%2Foverflow.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fbcc886338e581d156c76249b14d01f0117499cc/src%2Foverflow.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Foverflow.rs?ref=fbcc886338e581d156c76249b14d01f0117499cc", "patch": "@@ -18,7 +18,7 @@ use syntax::parse::token::DelimToken;\n \n use closures;\n use codemap::SpanUtils;\n-use expr::{is_every_expr_simple, is_nested_call, maybe_get_args_offset, ToExpr};\n+use expr::{is_every_expr_simple, is_method_call, is_nested_call, maybe_get_args_offset, ToExpr};\n use lists::{definitive_tactic, itemize_list, write_list, ListFormatting, ListItem, Separator};\n use rewrite::{Rewrite, RewriteContext};\n use shape::Shape;\n@@ -231,8 +231,8 @@ impl<'a, T: 'a + Rewrite + ToExpr + Spanned> Context<'a, T> {\n         let placeholder = if overflow_last {\n             let old_value = *self.context.force_one_line_chain.borrow();\n             if !combine_arg_with_callee {\n-                if let Some(expr) = self.last_item().and_then(|item| item.to_expr()) {\n-                    if let ast::ExprKind::MethodCall(..) = expr.node {\n+                if let Some(ref expr) = self.last_item().and_then(|item| item.to_expr()) {\n+                    if is_method_call(expr) {\n                         self.context.force_one_line_chain.replace(true);\n                     }\n                 }"}]}