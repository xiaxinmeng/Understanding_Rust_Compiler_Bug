{"sha": "b8ebf4431e48abe6f1844b80416c11f7b0ccab0c", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI4ZWJmNDQzMWU0OGFiZTZmMTg0NGI4MDQxNmMxMWY3YjBjY2FiMGM=", "commit": {"author": {"name": "Joshua Nelson", "email": "jyn514@gmail.com", "date": "2021-06-06T01:16:19Z"}, "committer": {"name": "Joshua Nelson", "email": "jyn514@gmail.com", "date": "2021-06-06T01:18:20Z"}, "message": "Don't fire `invalid_doc_attributes` on `extern crate` items", "tree": {"sha": "2122bb059bf1014275cb0173604b961670084eb7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2122bb059bf1014275cb0173604b961670084eb7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b8ebf4431e48abe6f1844b80416c11f7b0ccab0c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b8ebf4431e48abe6f1844b80416c11f7b0ccab0c", "html_url": "https://github.com/rust-lang/rust/commit/b8ebf4431e48abe6f1844b80416c11f7b0ccab0c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b8ebf4431e48abe6f1844b80416c11f7b0ccab0c/comments", "author": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "34b9932f5c0f519d6b9b9f95f21723142c5dc877", "url": "https://api.github.com/repos/rust-lang/rust/commits/34b9932f5c0f519d6b9b9f95f21723142c5dc877", "html_url": "https://github.com/rust-lang/rust/commit/34b9932f5c0f519d6b9b9f95f21723142c5dc877"}], "stats": {"total": 24, "additions": 23, "deletions": 1}, "files": [{"sha": "b18ef302962378b1819e909dfd9ca6841535dd24", "filename": "compiler/rustc_passes/src/check_attr.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b8ebf4431e48abe6f1844b80416c11f7b0ccab0c/compiler%2Frustc_passes%2Fsrc%2Fcheck_attr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b8ebf4431e48abe6f1844b80416c11f7b0ccab0c/compiler%2Frustc_passes%2Fsrc%2Fcheck_attr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_passes%2Fsrc%2Fcheck_attr.rs?ref=b8ebf4431e48abe6f1844b80416c11f7b0ccab0c", "patch": "@@ -577,7 +577,7 @@ impl CheckAttrVisitor<'tcx> {\n         target: Target,\n         specified_inline: &mut Option<(bool, Span)>,\n     ) -> bool {\n-        if target == Target::Use {\n+        if target == Target::Use || target == Target::ExternCrate {\n             let do_inline = meta.name_or_empty() == sym::inline;\n             if let Some((prev_inline, prev_span)) = *specified_inline {\n                 if do_inline != prev_inline {"}, {"sha": "0eb4c149060db4c16f3d8413d2628e3735393dfd", "filename": "src/test/ui/rustdoc/doc-inline-extern-crate.rs", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/b8ebf4431e48abe6f1844b80416c11f7b0ccab0c/src%2Ftest%2Fui%2Frustdoc%2Fdoc-inline-extern-crate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b8ebf4431e48abe6f1844b80416c11f7b0ccab0c/src%2Ftest%2Fui%2Frustdoc%2Fdoc-inline-extern-crate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frustdoc%2Fdoc-inline-extern-crate.rs?ref=b8ebf4431e48abe6f1844b80416c11f7b0ccab0c", "patch": "@@ -0,0 +1,9 @@\n+#[doc(inline)]\n+//~^ ERROR conflicting\n+#[doc(no_inline)]\n+pub extern crate core;\n+\n+// no warning\n+pub extern crate alloc;\n+\n+fn main() {}"}, {"sha": "41518295b1224bbb5959be5cca543b21989e594a", "filename": "src/test/ui/rustdoc/doc-inline-extern-crate.stderr", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/b8ebf4431e48abe6f1844b80416c11f7b0ccab0c/src%2Ftest%2Fui%2Frustdoc%2Fdoc-inline-extern-crate.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b8ebf4431e48abe6f1844b80416c11f7b0ccab0c/src%2Ftest%2Fui%2Frustdoc%2Fdoc-inline-extern-crate.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frustdoc%2Fdoc-inline-extern-crate.stderr?ref=b8ebf4431e48abe6f1844b80416c11f7b0ccab0c", "patch": "@@ -0,0 +1,13 @@\n+error: conflicting doc inlining attributes\n+  --> $DIR/doc-inline-extern-crate.rs:1:7\n+   |\n+LL | #[doc(inline)]\n+   |       ^^^^^^ this attribute...\n+LL |\n+LL | #[doc(no_inline)]\n+   |       ^^^^^^^^^ ...conflicts with this attribute\n+   |\n+   = help: remove one of the conflicting attributes\n+\n+error: aborting due to previous error\n+"}]}