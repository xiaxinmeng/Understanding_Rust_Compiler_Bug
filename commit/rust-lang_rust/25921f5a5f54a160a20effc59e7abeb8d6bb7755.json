{"sha": "25921f5a5f54a160a20effc59e7abeb8d6bb7755", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI1OTIxZjVhNWY1NGExNjBhMjBlZmZjNTllN2FiZWI4ZDZiYjc3NTU=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2019-07-24T08:27:46Z"}, "committer": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2019-07-24T08:27:46Z"}, "message": "Merge #1573\n\n1573: fix: parse box syntax inside parentheses r=matklad a=csmoe\n\nr? @matklad \n\nCo-authored-by: csmoe <csmoe@msn.com>", "tree": {"sha": "678c8d14ddcee8941291dcb3bde41e765ffddb69", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/678c8d14ddcee8941291dcb3bde41e765ffddb69"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/25921f5a5f54a160a20effc59e7abeb8d6bb7755", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/25921f5a5f54a160a20effc59e7abeb8d6bb7755", "html_url": "https://github.com/rust-lang/rust/commit/25921f5a5f54a160a20effc59e7abeb8d6bb7755", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/25921f5a5f54a160a20effc59e7abeb8d6bb7755/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "parents": [{"sha": "3e086528efd950e3051654daf9e62f339ef4a55c", "url": "https://api.github.com/repos/rust-lang/rust/commits/3e086528efd950e3051654daf9e62f339ef4a55c", "html_url": "https://github.com/rust-lang/rust/commit/3e086528efd950e3051654daf9e62f339ef4a55c"}, {"sha": "8fe58c359817f57ba981f02ee62244ce1954a41b", "url": "https://api.github.com/repos/rust-lang/rust/commits/8fe58c359817f57ba981f02ee62244ce1954a41b", "html_url": "https://github.com/rust-lang/rust/commit/8fe58c359817f57ba981f02ee62244ce1954a41b"}], "stats": {"total": 75, "additions": 69, "deletions": 6}, "files": [{"sha": "d98953a7efa67f03b9af1118463ea7a2e75f51f0", "filename": "crates/ra_parser/src/grammar/expressions/atom.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/25921f5a5f54a160a20effc59e7abeb8d6bb7755/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fexpressions%2Fatom.rs", "raw_url": "https://github.com/rust-lang/rust/raw/25921f5a5f54a160a20effc59e7abeb8d6bb7755/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fexpressions%2Fatom.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fexpressions%2Fatom.rs?ref=25921f5a5f54a160a20effc59e7abeb8d6bb7755", "patch": "@@ -43,6 +43,7 @@ pub(super) const ATOM_EXPR_FIRST: TokenSet =\n         L_BRACK,\n         PIPE,\n         MOVE_KW,\n+        BOX_KW,\n         IF_KW,\n         WHILE_KW,\n         MATCH_KW,\n@@ -529,6 +530,8 @@ fn try_block_expr(p: &mut Parser, m: Option<Marker>) -> CompletedMarker {\n // test box_expr\n // fn foo() {\n //     let x = box 1i32;\n+//     let y = (box 1i32, box 2i32);\n+//     let z = Foo(box 1i32, box 2i32);\n // }\n fn box_expr(p: &mut Parser, m: Option<Marker>) -> CompletedMarker {\n     assert!(p.at(T![box]));"}, {"sha": "fc9923b7137edc40a12b634f83035c0f707db084", "filename": "crates/ra_syntax/tests/data/parser/inline/ok/0132_box_expr.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/25921f5a5f54a160a20effc59e7abeb8d6bb7755/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Finline%2Fok%2F0132_box_expr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/25921f5a5f54a160a20effc59e7abeb8d6bb7755/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Finline%2Fok%2F0132_box_expr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Finline%2Fok%2F0132_box_expr.rs?ref=25921f5a5f54a160a20effc59e7abeb8d6bb7755", "patch": "@@ -1,3 +1,5 @@\n fn foo() {\n     let x = box 1i32;\n+    let y = (box 1i32, box 2i32);\n+    let z = Foo(box 1i32, box 2i32);\n }"}, {"sha": "3d22002a142e3098bfd3d519b2df25b4e3d22873", "filename": "crates/ra_syntax/tests/data/parser/inline/ok/0132_box_expr.txt", "status": "modified", "additions": 64, "deletions": 6, "changes": 70, "blob_url": "https://github.com/rust-lang/rust/blob/25921f5a5f54a160a20effc59e7abeb8d6bb7755/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Finline%2Fok%2F0132_box_expr.txt", "raw_url": "https://github.com/rust-lang/rust/raw/25921f5a5f54a160a20effc59e7abeb8d6bb7755/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Finline%2Fok%2F0132_box_expr.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Finline%2Fok%2F0132_box_expr.txt?ref=25921f5a5f54a160a20effc59e7abeb8d6bb7755", "patch": "@@ -1,5 +1,5 @@\n-SOURCE_FILE@[0; 35)\n-  FN_DEF@[0; 34)\n+SOURCE_FILE@[0; 106)\n+  FN_DEF@[0; 105)\n     FN_KW@[0; 2) \"fn\"\n     WHITESPACE@[2; 3) \" \"\n     NAME@[3; 6)\n@@ -8,7 +8,7 @@ SOURCE_FILE@[0; 35)\n       L_PAREN@[6; 7) \"(\"\n       R_PAREN@[7; 8) \")\"\n     WHITESPACE@[8; 9) \" \"\n-    BLOCK@[9; 34)\n+    BLOCK@[9; 105)\n       L_CURLY@[9; 10) \"{\"\n       WHITESPACE@[10; 15) \"\\n    \"\n       LET_STMT@[15; 32)\n@@ -26,6 +26,64 @@ SOURCE_FILE@[0; 35)\n           LITERAL@[27; 31)\n             INT_NUMBER@[27; 31) \"1i32\"\n         SEMI@[31; 32) \";\"\n-      WHITESPACE@[32; 33) \"\\n\"\n-      R_CURLY@[33; 34) \"}\"\n-  WHITESPACE@[34; 35) \"\\n\"\n+      WHITESPACE@[32; 37) \"\\n    \"\n+      LET_STMT@[37; 66)\n+        LET_KW@[37; 40) \"let\"\n+        WHITESPACE@[40; 41) \" \"\n+        BIND_PAT@[41; 42)\n+          NAME@[41; 42)\n+            IDENT@[41; 42) \"y\"\n+        WHITESPACE@[42; 43) \" \"\n+        EQ@[43; 44) \"=\"\n+        WHITESPACE@[44; 45) \" \"\n+        TUPLE_EXPR@[45; 65)\n+          L_PAREN@[45; 46) \"(\"\n+          BOX_EXPR@[46; 54)\n+            BOX_KW@[46; 49) \"box\"\n+            WHITESPACE@[49; 50) \" \"\n+            LITERAL@[50; 54)\n+              INT_NUMBER@[50; 54) \"1i32\"\n+          COMMA@[54; 55) \",\"\n+          WHITESPACE@[55; 56) \" \"\n+          BOX_EXPR@[56; 64)\n+            BOX_KW@[56; 59) \"box\"\n+            WHITESPACE@[59; 60) \" \"\n+            LITERAL@[60; 64)\n+              INT_NUMBER@[60; 64) \"2i32\"\n+          R_PAREN@[64; 65) \")\"\n+        SEMI@[65; 66) \";\"\n+      WHITESPACE@[66; 71) \"\\n    \"\n+      LET_STMT@[71; 103)\n+        LET_KW@[71; 74) \"let\"\n+        WHITESPACE@[74; 75) \" \"\n+        BIND_PAT@[75; 76)\n+          NAME@[75; 76)\n+            IDENT@[75; 76) \"z\"\n+        WHITESPACE@[76; 77) \" \"\n+        EQ@[77; 78) \"=\"\n+        WHITESPACE@[78; 79) \" \"\n+        CALL_EXPR@[79; 102)\n+          PATH_EXPR@[79; 82)\n+            PATH@[79; 82)\n+              PATH_SEGMENT@[79; 82)\n+                NAME_REF@[79; 82)\n+                  IDENT@[79; 82) \"Foo\"\n+          ARG_LIST@[82; 102)\n+            L_PAREN@[82; 83) \"(\"\n+            BOX_EXPR@[83; 91)\n+              BOX_KW@[83; 86) \"box\"\n+              WHITESPACE@[86; 87) \" \"\n+              LITERAL@[87; 91)\n+                INT_NUMBER@[87; 91) \"1i32\"\n+            COMMA@[91; 92) \",\"\n+            WHITESPACE@[92; 93) \" \"\n+            BOX_EXPR@[93; 101)\n+              BOX_KW@[93; 96) \"box\"\n+              WHITESPACE@[96; 97) \" \"\n+              LITERAL@[97; 101)\n+                INT_NUMBER@[97; 101) \"2i32\"\n+            R_PAREN@[101; 102) \")\"\n+        SEMI@[102; 103) \";\"\n+      WHITESPACE@[103; 104) \"\\n\"\n+      R_CURLY@[104; 105) \"}\"\n+  WHITESPACE@[105; 106) \"\\n\""}]}