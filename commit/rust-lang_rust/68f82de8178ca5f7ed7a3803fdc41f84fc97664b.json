{"sha": "68f82de8178ca5f7ed7a3803fdc41f84fc97664b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY4ZjgyZGU4MTc4Y2E1ZjdlZDdhMzgwM2ZkYzQxZjg0ZmM5NzY2NGI=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-11-08T22:26:16Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-11-08T22:28:41Z"}, "message": "rt: Remove task_yield builtin\n\nThis is just a special case of task_sleep", "tree": {"sha": "edb675d22632be1ce410139b36702de1a1924973", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/edb675d22632be1ce410139b36702de1a1924973"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/68f82de8178ca5f7ed7a3803fdc41f84fc97664b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/68f82de8178ca5f7ed7a3803fdc41f84fc97664b", "html_url": "https://github.com/rust-lang/rust/commit/68f82de8178ca5f7ed7a3803fdc41f84fc97664b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/68f82de8178ca5f7ed7a3803fdc41f84fc97664b/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2f8b69534435d8dc459e5731d8fb41b22725b37f", "url": "https://api.github.com/repos/rust-lang/rust/commits/2f8b69534435d8dc459e5731d8fb41b22725b37f", "html_url": "https://github.com/rust-lang/rust/commit/2f8b69534435d8dc459e5731d8fb41b22725b37f"}], "stats": {"total": 14, "additions": 3, "deletions": 11}, "files": [{"sha": "1b225ceecf1ebd9f7fb82770f7037da8cca3e3fd", "filename": "src/lib/task.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/68f82de8178ca5f7ed7a3803fdc41f84fc97664b/src%2Flib%2Ftask.rs", "raw_url": "https://github.com/rust-lang/rust/raw/68f82de8178ca5f7ed7a3803fdc41f84fc97664b/src%2Flib%2Ftask.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib%2Ftask.rs?ref=68f82de8178ca5f7ed7a3803fdc41f84fc97664b", "patch": "@@ -53,7 +53,6 @@ export spawn_joinable;\n native \"cdecl\" mod rustrt {\n     // these must run on the Rust stack so that they can swap stacks etc:\n     fn task_sleep(time_in_us: uint);\n-    fn task_yield();\n }\n \n native \"c-stack-cdecl\" mod rustrt2 = \"rustrt\" {\n@@ -149,7 +148,7 @@ Yield control to the task scheduler\n \n The scheduler may schedule another task to execute.\n */\n-fn yield() { ret rustrt::task_yield(); }\n+fn yield() { sleep(1u) }\n \n /*\n Function: join"}, {"sha": "dd1e6a2c15ca7aa1cdf5748a7f308c49f5cacdfa", "filename": "src/rt/rust_builtin.cpp", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/68f82de8178ca5f7ed7a3803fdc41f84fc97664b/src%2Frt%2Frust_builtin.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/68f82de8178ca5f7ed7a3803fdc41f84fc97664b/src%2Frt%2Frust_builtin.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust_builtin.cpp?ref=68f82de8178ca5f7ed7a3803fdc41f84fc97664b", "patch": "@@ -171,12 +171,6 @@ task_sleep(size_t time_in_us) {\n     task->yield(time_in_us);\n }\n \n-extern \"C\" CDECL void\n-task_yield() {\n-    rust_task *task = rust_scheduler::get_task();\n-    task->yield(1);\n-}\n-\n /* Debug builtins for std::dbg. */\n \n static void"}, {"sha": "d75a6dc00f14c5729f6ef577a9de50c130a92e33", "filename": "src/rt/rustrt.def.in", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/68f82de8178ca5f7ed7a3803fdc41f84fc97664b/src%2Frt%2Frustrt.def.in", "raw_url": "https://github.com/rust-lang/rust/raw/68f82de8178ca5f7ed7a3803fdc41f84fc97664b/src%2Frt%2Frustrt.def.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frustrt.def.in?ref=68f82de8178ca5f7ed7a3803fdc41f84fc97664b", "patch": "@@ -60,7 +60,6 @@ start_task\n vec_reserve_shared\n vec_from_buf_shared\n task_sleep\n-task_yield\n unsupervise\n upcall_alloc_c_stack\n upcall_call_c_stack"}, {"sha": "f67fb96c4d408018374b79842c440770289ae0b2", "filename": "src/test/run-pass/bind-native.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/68f82de8178ca5f7ed7a3803fdc41f84fc97664b/src%2Ftest%2Frun-pass%2Fbind-native.rs", "raw_url": "https://github.com/rust-lang/rust/raw/68f82de8178ca5f7ed7a3803fdc41f84fc97664b/src%2Ftest%2Frun-pass%2Fbind-native.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fbind-native.rs?ref=68f82de8178ca5f7ed7a3803fdc41f84fc97664b", "patch": "@@ -3,7 +3,7 @@ Can we bind native things?\n */\n \n native \"c-stack-cdecl\" mod rustrt {\n-    fn task_yield();\n+    fn task_sleep();\n }\n \n-fn main() { bind rustrt::task_yield(); }\n+fn main() { bind rustrt::task_sleep(); }"}]}