{"sha": "3e08609ed7740f8aca9bded27b9bdda3591d84d7", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNlMDg2MDllZDc3NDBmOGFjYTliZGVkMjdiOWJkZGEzNTkxZDg0ZDc=", "commit": {"author": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2011-04-29T01:45:56Z"}, "committer": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2011-04-29T01:45:56Z"}, "message": "rustc: Add some value names to the vec append glue function. Un-XFAIL vec-growth.rs.", "tree": {"sha": "422c52eaf3ac31cea43081f69abf43ebbc8c4428", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/422c52eaf3ac31cea43081f69abf43ebbc8c4428"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3e08609ed7740f8aca9bded27b9bdda3591d84d7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3e08609ed7740f8aca9bded27b9bdda3591d84d7", "html_url": "https://github.com/rust-lang/rust/commit/3e08609ed7740f8aca9bded27b9bdda3591d84d7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3e08609ed7740f8aca9bded27b9bdda3591d84d7/comments", "author": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1f44887761439c57d67f132d3ff11cc8b3f6a6b4", "url": "https://api.github.com/repos/rust-lang/rust/commits/1f44887761439c57d67f132d3ff11cc8b3f6a6b4", "html_url": "https://github.com/rust-lang/rust/commit/1f44887761439c57d67f132d3ff11cc8b3f6a6b4"}], "stats": {"total": 8, "additions": 6, "deletions": 2}, "files": [{"sha": "61ccaba2128750118dcc1a03b686bcc03776d287", "filename": "src/comp/middle/trans.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/3e08609ed7740f8aca9bded27b9bdda3591d84d7/src%2Fcomp%2Fmiddle%2Ftrans.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3e08609ed7740f8aca9bded27b9bdda3591d84d7/src%2Fcomp%2Fmiddle%2Ftrans.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Ftrans.rs?ref=3e08609ed7740f8aca9bded27b9bdda3591d84d7", "patch": "@@ -7448,12 +7448,14 @@ fn trans_vec_append_glue(@local_ctxt cx) {\n     bcx = llnew_vec_res.bcx;\n     auto llnew_vec = vi2p(bcx, llnew_vec_res.val,\n                           T_opaque_vec_ptr());\n+    llvm.LLVMSetValueName(llnew_vec, _str.buf(\"llnew_vec\"));\n \n     auto copy_dst_cx = new_sub_block_ctxt(bcx, \"copy new <- dst\");\n     auto copy_src_cx = new_sub_block_ctxt(bcx, \"copy new <- src\");\n \n     auto pp0 = alloca(bcx, T_ptr(T_i8()));\n     bcx.build.Store(vec_p1(bcx, llnew_vec), pp0);\n+    llvm.LLVMSetValueName(pp0, _str.buf(\"pp0\"));\n \n     bcx.build.CondBr(bcx.build.TruncOrBitCast\n                      (bcx.build.Load(llcopy_dst_ptr),\n@@ -7469,11 +7471,13 @@ fn trans_vec_append_glue(@local_ctxt cx) {\n                  ValueRef n_bytes) -> result {\n \n         auto src_lim = cx.build.GEP(src, vec(n_bytes));\n+        llvm.LLVMSetValueName(src_lim, _str.buf(\"src_lim\"));\n \n         auto elt_llsz =\n             cx.build.Load(cx.build.GEP(elt_tydesc,\n                                        vec(C_int(0),\n                                            C_int(abi.tydesc_field_size))));\n+        llvm.LLVMSetValueName(elt_llsz, _str.buf(\"elt_llsz\"));\n \n         fn take_one(ValueRef elt_tydesc,\n                     @block_ctxt cx,\n@@ -7494,6 +7498,8 @@ fn trans_vec_append_glue(@local_ctxt cx) {\n     // Copy any dst elements in, omitting null if doing str.\n \n     auto n_bytes = vec_fill_adjusted(copy_dst_cx, lldst_vec, llskipnull);\n+    llvm.LLVMSetValueName(n_bytes, _str.buf(\"n_bytes\"));\n+\n     copy_dst_cx = copy_elts(copy_dst_cx,\n                             llelt_tydesc,\n                             vec_p0(copy_dst_cx, llnew_vec),"}, {"sha": "fe2070306d5205efb80f2c035090108988ec3967", "filename": "src/test/run-pass/vec-growth.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3e08609ed7740f8aca9bded27b9bdda3591d84d7/src%2Ftest%2Frun-pass%2Fvec-growth.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3e08609ed7740f8aca9bded27b9bdda3591d84d7/src%2Ftest%2Frun-pass%2Fvec-growth.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fvec-growth.rs?ref=3e08609ed7740f8aca9bded27b9bdda3591d84d7", "patch": "@@ -1,5 +1,3 @@\n-// xfail-stage0\n-\n fn main() {\n     auto v = vec(1);\n     v += vec(2);"}]}