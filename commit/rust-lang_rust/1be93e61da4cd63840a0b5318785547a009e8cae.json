{"sha": "1be93e61da4cd63840a0b5318785547a009e8cae", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFiZTkzZTYxZGE0Y2Q2Mzg0MGEwYjUzMTg3ODU1NDdhMDA5ZThjYWU=", "commit": {"author": {"name": "Kang Seonghoon", "email": "public+git@mearie.org", "date": "2014-04-27T13:37:11Z"}, "committer": {"name": "Kang Seonghoon", "email": "public+git@mearie.org", "date": "2014-04-28T13:28:47Z"}, "message": "std: Add more docs to `std::mem::replace`.", "tree": {"sha": "29cc2c9ca57faf7adb4cd538fdd17e89549f4dd1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/29cc2c9ca57faf7adb4cd538fdd17e89549f4dd1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1be93e61da4cd63840a0b5318785547a009e8cae", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1be93e61da4cd63840a0b5318785547a009e8cae", "html_url": "https://github.com/rust-lang/rust/commit/1be93e61da4cd63840a0b5318785547a009e8cae", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1be93e61da4cd63840a0b5318785547a009e8cae/comments", "author": {"login": "lifthrasiir", "id": 323836, "node_id": "MDQ6VXNlcjMyMzgzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/323836?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lifthrasiir", "html_url": "https://github.com/lifthrasiir", "followers_url": "https://api.github.com/users/lifthrasiir/followers", "following_url": "https://api.github.com/users/lifthrasiir/following{/other_user}", "gists_url": "https://api.github.com/users/lifthrasiir/gists{/gist_id}", "starred_url": "https://api.github.com/users/lifthrasiir/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lifthrasiir/subscriptions", "organizations_url": "https://api.github.com/users/lifthrasiir/orgs", "repos_url": "https://api.github.com/users/lifthrasiir/repos", "events_url": "https://api.github.com/users/lifthrasiir/events{/privacy}", "received_events_url": "https://api.github.com/users/lifthrasiir/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lifthrasiir", "id": 323836, "node_id": "MDQ6VXNlcjMyMzgzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/323836?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lifthrasiir", "html_url": "https://github.com/lifthrasiir", "followers_url": "https://api.github.com/users/lifthrasiir/followers", "following_url": "https://api.github.com/users/lifthrasiir/following{/other_user}", "gists_url": "https://api.github.com/users/lifthrasiir/gists{/gist_id}", "starred_url": "https://api.github.com/users/lifthrasiir/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lifthrasiir/subscriptions", "organizations_url": "https://api.github.com/users/lifthrasiir/orgs", "repos_url": "https://api.github.com/users/lifthrasiir/repos", "events_url": "https://api.github.com/users/lifthrasiir/events{/privacy}", "received_events_url": "https://api.github.com/users/lifthrasiir/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "eea4909a8713a54b3c47e871a70baf6c722999a3", "url": "https://api.github.com/repos/rust-lang/rust/commits/eea4909a8713a54b3c47e871a70baf6c722999a3", "html_url": "https://github.com/rust-lang/rust/commit/eea4909a8713a54b3c47e871a70baf6c722999a3"}], "stats": {"total": 32, "additions": 32, "deletions": 0}, "files": [{"sha": "d216d91b9010e0748bdf3cf64b1cc35a14dcbc29", "filename": "src/libstd/mem.rs", "status": "modified", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/1be93e61da4cd63840a0b5318785547a009e8cae/src%2Flibstd%2Fmem.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1be93e61da4cd63840a0b5318785547a009e8cae/src%2Flibstd%2Fmem.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fmem.rs?ref=1be93e61da4cd63840a0b5318785547a009e8cae", "patch": "@@ -248,6 +248,38 @@ pub fn swap<T>(x: &mut T, y: &mut T) {\n /**\n  * Replace the value at a mutable location with a new one, returning the old\n  * value, without deinitialising or copying either one.\n+ *\n+ * This is primarily used for transferring and swapping ownership of a value\n+ * in a mutable location. For example, this function allows consumption of\n+ * one field of a struct by replacing it with another value. The normal approach\n+ * doesn't always work:\n+ *\n+ * ```rust,ignore\n+ * struct Buffer<T> { buf: Vec<T> }\n+ *\n+ * impl<T> Buffer<T> {\n+ *     fn get_and_reset(&mut self) -> Vec<T> {\n+ *         // error: cannot move out of dereference of `&mut`-pointer\n+ *         let buf = self.buf;\n+ *         self.buf = Vec::new();\n+ *         buf\n+ *     }\n+ * }\n+ * ```\n+ *\n+ * Note that `T` does not necessarily implement `Clone`, so it can't even\n+ * clone and reset `self.buf`. But `replace` can be used to disassociate\n+ * the original value of `self.buf` from `self`, allowing it to be returned:\n+ *\n+ * ```rust\n+ * # struct Buffer<T> { buf: Vec<T> }\n+ * impl<T> Buffer<T> {\n+ *     fn get_and_reset(&mut self) -> Vec<T> {\n+ *         use std::mem::replace;\n+ *         replace(&mut self.buf, Vec::new())\n+ *     }\n+ * }\n+ * ```\n  */\n #[inline]\n pub fn replace<T>(dest: &mut T, mut src: T) -> T {"}]}