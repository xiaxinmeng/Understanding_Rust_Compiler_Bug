{"sha": "f119a7b6ab464d89488767fd7235e85a52efeed2", "node_id": "C_kwDOAAsO6NoAKGYxMTlhN2I2YWI0NjRkODk0ODg3NjdmZDcyMzVlODVhNTJlZmVlZDI", "commit": {"author": {"name": "luojia65", "email": "me@luojia.cc", "date": "2022-03-16T08:57:36Z"}, "committer": {"name": "luojia65", "email": "me@luojia.cc", "date": "2022-03-16T08:57:36Z"}, "message": "feat: more RISC-V features\n\nThese features include:\n- V for vector extension\n- Zfinx, Zdinx, Zhinx and Zhinxmin float in integer register extensions\n- Zfh, Zfhmin 16-bit float pointer extensions\n- Zbkb, Zkbc, Zbkc, Zk* cryptography extensions\n\nIt matches name in LLVM feature and is_riscv_feature_detected!.", "tree": {"sha": "695a35ed0c7e997803bbddabeb96f6c74b6041b3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/695a35ed0c7e997803bbddabeb96f6c74b6041b3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f119a7b6ab464d89488767fd7235e85a52efeed2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f119a7b6ab464d89488767fd7235e85a52efeed2", "html_url": "https://github.com/rust-lang/rust/commit/f119a7b6ab464d89488767fd7235e85a52efeed2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f119a7b6ab464d89488767fd7235e85a52efeed2/comments", "author": {"login": "luojia65", "id": 40385009, "node_id": "MDQ6VXNlcjQwMzg1MDA5", "avatar_url": "https://avatars.githubusercontent.com/u/40385009?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luojia65", "html_url": "https://github.com/luojia65", "followers_url": "https://api.github.com/users/luojia65/followers", "following_url": "https://api.github.com/users/luojia65/following{/other_user}", "gists_url": "https://api.github.com/users/luojia65/gists{/gist_id}", "starred_url": "https://api.github.com/users/luojia65/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luojia65/subscriptions", "organizations_url": "https://api.github.com/users/luojia65/orgs", "repos_url": "https://api.github.com/users/luojia65/repos", "events_url": "https://api.github.com/users/luojia65/events{/privacy}", "received_events_url": "https://api.github.com/users/luojia65/received_events", "type": "User", "site_admin": false}, "committer": {"login": "luojia65", "id": 40385009, "node_id": "MDQ6VXNlcjQwMzg1MDA5", "avatar_url": "https://avatars.githubusercontent.com/u/40385009?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luojia65", "html_url": "https://github.com/luojia65", "followers_url": "https://api.github.com/users/luojia65/followers", "following_url": "https://api.github.com/users/luojia65/following{/other_user}", "gists_url": "https://api.github.com/users/luojia65/gists{/gist_id}", "starred_url": "https://api.github.com/users/luojia65/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luojia65/subscriptions", "organizations_url": "https://api.github.com/users/luojia65/orgs", "repos_url": "https://api.github.com/users/luojia65/repos", "events_url": "https://api.github.com/users/luojia65/events{/privacy}", "received_events_url": "https://api.github.com/users/luojia65/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a2af9cf1cf6ccb195eae40cdd793939bc77e7e73", "url": "https://api.github.com/repos/rust-lang/rust/commits/a2af9cf1cf6ccb195eae40cdd793939bc77e7e73", "html_url": "https://github.com/rust-lang/rust/commit/a2af9cf1cf6ccb195eae40cdd793939bc77e7e73"}], "stats": {"total": 20, "additions": 20, "deletions": 0}, "files": [{"sha": "ff7415af373394ffa54fc4956af61a5f5706a422", "filename": "compiler/rustc_codegen_ssa/src/target_features.rs", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/f119a7b6ab464d89488767fd7235e85a52efeed2/compiler%2Frustc_codegen_ssa%2Fsrc%2Ftarget_features.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f119a7b6ab464d89488767fd7235e85a52efeed2/compiler%2Frustc_codegen_ssa%2Fsrc%2Ftarget_features.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_ssa%2Fsrc%2Ftarget_features.rs?ref=f119a7b6ab464d89488767fd7235e85a52efeed2", "patch": "@@ -223,6 +223,26 @@ const RISCV_ALLOWED_FEATURES: &[(&str, Option<Symbol>)] = &[\n     (\"f\", Some(sym::riscv_target_feature)),\n     (\"d\", Some(sym::riscv_target_feature)),\n     (\"e\", Some(sym::riscv_target_feature)),\n+    (\"v\", Some(sym::riscv_target_feature)),\n+    (\"zfinx\", Some(sym::riscv_target_feature)),\n+    (\"zdinx\", Some(sym::riscv_target_feature)),\n+    (\"zhinx\", Some(sym::riscv_target_feature)),\n+    (\"zhinxmin\", Some(sym::riscv_target_feature)),\n+    (\"zfh\", Some(sym::riscv_target_feature)),\n+    (\"zfhmin\", Some(sym::riscv_target_feature)),\n+    (\"zbkb\", Some(sym::riscv_target_feature)),\n+    (\"zbkc\", Some(sym::riscv_target_feature)),\n+    (\"zbkx\", Some(sym::riscv_target_feature)),\n+    (\"zknd\", Some(sym::riscv_target_feature)),\n+    (\"zkne\", Some(sym::riscv_target_feature)),\n+    (\"zknh\", Some(sym::riscv_target_feature)),\n+    (\"zksed\", Some(sym::riscv_target_feature)),\n+    (\"zksh\", Some(sym::riscv_target_feature)),\n+    (\"zkr\", Some(sym::riscv_target_feature)),\n+    (\"zkn\", Some(sym::riscv_target_feature)),\n+    (\"zks\", Some(sym::riscv_target_feature)),\n+    (\"zk\", Some(sym::riscv_target_feature)),\n+    (\"zkt\", Some(sym::riscv_target_feature)),\n ];\n \n const WASM_ALLOWED_FEATURES: &[(&str, Option<Symbol>)] = &["}]}