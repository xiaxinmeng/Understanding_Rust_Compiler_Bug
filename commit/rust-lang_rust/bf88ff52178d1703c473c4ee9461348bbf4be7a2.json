{"sha": "bf88ff52178d1703c473c4ee9461348bbf4be7a2", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJmODhmZjUyMTc4ZDE3MDNjNDczYzRlZTk0NjEzNDhiYmY0YmU3YTI=", "commit": {"author": {"name": "Eric Holk", "email": "eric.holk@gmail.com", "date": "2012-07-11T18:36:15Z"}, "committer": {"name": "Eric Holk", "email": "eric.holk@gmail.com", "date": "2012-07-11T18:36:37Z"}, "message": "Remove slow vec+=, and make word-count difficulty harder.", "tree": {"sha": "225f8bbb070105f2b02f6932dae9fd2b8f93afdf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/225f8bbb070105f2b02f6932dae9fd2b8f93afdf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bf88ff52178d1703c473c4ee9461348bbf4be7a2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bf88ff52178d1703c473c4ee9461348bbf4be7a2", "html_url": "https://github.com/rust-lang/rust/commit/bf88ff52178d1703c473c4ee9461348bbf4be7a2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bf88ff52178d1703c473c4ee9461348bbf4be7a2/comments", "author": {"login": "eholk", "id": 105766, "node_id": "MDQ6VXNlcjEwNTc2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/105766?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eholk", "html_url": "https://github.com/eholk", "followers_url": "https://api.github.com/users/eholk/followers", "following_url": "https://api.github.com/users/eholk/following{/other_user}", "gists_url": "https://api.github.com/users/eholk/gists{/gist_id}", "starred_url": "https://api.github.com/users/eholk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eholk/subscriptions", "organizations_url": "https://api.github.com/users/eholk/orgs", "repos_url": "https://api.github.com/users/eholk/repos", "events_url": "https://api.github.com/users/eholk/events{/privacy}", "received_events_url": "https://api.github.com/users/eholk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "eholk", "id": 105766, "node_id": "MDQ6VXNlcjEwNTc2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/105766?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eholk", "html_url": "https://github.com/eholk", "followers_url": "https://api.github.com/users/eholk/followers", "following_url": "https://api.github.com/users/eholk/following{/other_user}", "gists_url": "https://api.github.com/users/eholk/gists{/gist_id}", "starred_url": "https://api.github.com/users/eholk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eholk/subscriptions", "organizations_url": "https://api.github.com/users/eholk/orgs", "repos_url": "https://api.github.com/users/eholk/repos", "events_url": "https://api.github.com/users/eholk/events{/privacy}", "received_events_url": "https://api.github.com/users/eholk/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a00478b7c9433e8f50f9818ce9b2d8f26d4eabdd", "url": "https://api.github.com/repos/rust-lang/rust/commits/a00478b7c9433e8f50f9818ce9b2d8f26d4eabdd", "html_url": "https://github.com/rust-lang/rust/commit/a00478b7c9433e8f50f9818ce9b2d8f26d4eabdd"}], "stats": {"total": 9, "additions": 4, "deletions": 5}, "files": [{"sha": "7ea03b6d6c6dba2ee2006b572aacb5824de2287f", "filename": "src/test/bench/task-perf-word-count-generic.rs", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/bf88ff52178d1703c473c4ee9461348bbf4be7a2/src%2Ftest%2Fbench%2Ftask-perf-word-count-generic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bf88ff52178d1703c473c4ee9461348bbf4be7a2/src%2Ftest%2Fbench%2Ftask-perf-word-count-generic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Ftask-perf-word-count-generic.rs?ref=bf88ff52178d1703c473c4ee9461348bbf4be7a2", "patch": "@@ -108,7 +108,7 @@ mod map_reduce {\n     {\n         let mut tasks = ~[];\n         for inputs.each |i| {\n-            tasks += ~[spawn_joinable(|| map_task(map, ctrl, i) )];\n+            vec::push(tasks, spawn_joinable(|| map_task(map, ctrl, i) ));\n         }\n         ret tasks;\n     }\n@@ -218,9 +218,8 @@ mod map_reduce {\n                     let p = port();\n                     let ch = chan(p);\n                     let r = reduce, kk = k;\n-                    tasks += ~[\n-                        spawn_joinable(|| reduce_task(r, kk, ch) )\n-                    ];\n+                    vec::push(tasks,\n+                              spawn_joinable(|| reduce_task(r, kk, ch) ));\n                     c = recv(p);\n                     treemap::insert(reducers, k, c);\n                   }\n@@ -255,7 +254,7 @@ fn main(argv: ~[str]) {\n     }\n     else {\n         let num_readers = 50;\n-        let words_per_reader = 400;\n+        let words_per_reader = 1000;\n         vec::from_fn(\n             num_readers,\n             |_i| fn~() -> word_reader {"}]}