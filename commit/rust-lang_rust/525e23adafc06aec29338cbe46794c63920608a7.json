{"sha": "525e23adafc06aec29338cbe46794c63920608a7", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUyNWUyM2FkYWZjMDZhZWMyOTMzOGNiZTQ2Nzk0YzYzOTIwNjA4YTc=", "commit": {"author": {"name": "SNCPlay42", "email": "SNCPlay42@gmail.com", "date": "2021-01-08T22:16:24Z"}, "committer": {"name": "SNCPlay42", "email": "SNCPlay42@gmail.com", "date": "2021-03-16T16:55:11Z"}, "message": "peel derives when checking normalized is expected", "tree": {"sha": "51112900128044240c694917eb00966b679b0c3c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/51112900128044240c694917eb00966b679b0c3c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/525e23adafc06aec29338cbe46794c63920608a7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/525e23adafc06aec29338cbe46794c63920608a7", "html_url": "https://github.com/rust-lang/rust/commit/525e23adafc06aec29338cbe46794c63920608a7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/525e23adafc06aec29338cbe46794c63920608a7/comments", "author": {"login": "SNCPlay42", "id": 5455518, "node_id": "MDQ6VXNlcjU0NTU1MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/5455518?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SNCPlay42", "html_url": "https://github.com/SNCPlay42", "followers_url": "https://api.github.com/users/SNCPlay42/followers", "following_url": "https://api.github.com/users/SNCPlay42/following{/other_user}", "gists_url": "https://api.github.com/users/SNCPlay42/gists{/gist_id}", "starred_url": "https://api.github.com/users/SNCPlay42/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SNCPlay42/subscriptions", "organizations_url": "https://api.github.com/users/SNCPlay42/orgs", "repos_url": "https://api.github.com/users/SNCPlay42/repos", "events_url": "https://api.github.com/users/SNCPlay42/events{/privacy}", "received_events_url": "https://api.github.com/users/SNCPlay42/received_events", "type": "User", "site_admin": false}, "committer": {"login": "SNCPlay42", "id": 5455518, "node_id": "MDQ6VXNlcjU0NTU1MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/5455518?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SNCPlay42", "html_url": "https://github.com/SNCPlay42", "followers_url": "https://api.github.com/users/SNCPlay42/followers", "following_url": "https://api.github.com/users/SNCPlay42/following{/other_user}", "gists_url": "https://api.github.com/users/SNCPlay42/gists{/gist_id}", "starred_url": "https://api.github.com/users/SNCPlay42/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SNCPlay42/subscriptions", "organizations_url": "https://api.github.com/users/SNCPlay42/orgs", "repos_url": "https://api.github.com/users/SNCPlay42/repos", "events_url": "https://api.github.com/users/SNCPlay42/events{/privacy}", "received_events_url": "https://api.github.com/users/SNCPlay42/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "770a9cf780b6560e2c9224ae4588c6f7baa5add6", "url": "https://api.github.com/repos/rust-lang/rust/commits/770a9cf780b6560e2c9224ae4588c6f7baa5add6", "html_url": "https://github.com/rust-lang/rust/commit/770a9cf780b6560e2c9224ae4588c6f7baa5add6"}], "stats": {"total": 49, "additions": 40, "deletions": 9}, "files": [{"sha": "9dc3a143884db14b51be5a99f412ffb31eee59aa", "filename": "compiler/rustc_trait_selection/src/traits/error_reporting/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/525e23adafc06aec29338cbe46794c63920608a7/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/525e23adafc06aec29338cbe46794c63920608a7/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fmod.rs?ref=525e23adafc06aec29338cbe46794c63920608a7", "patch": "@@ -1190,7 +1190,7 @@ impl<'a, 'tcx> InferCtxtPrivExt<'tcx> for InferCtxt<'a, 'tcx> {\n                 );\n \n                 let is_normalized_ty_expected = !matches!(\n-                    obligation.cause.code,\n+                    obligation.cause.code.peel_derives(),\n                     ObligationCauseCode::ItemObligation(_)\n                         | ObligationCauseCode::BindingObligation(_, _)\n                         | ObligationCauseCode::ObjectCastObligation(_)"}, {"sha": "cafc8ec52ca7601414cc26c7db6346e7c70f1539", "filename": "src/test/ui/associated-types/issue-44153.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/525e23adafc06aec29338cbe46794c63920608a7/src%2Ftest%2Fui%2Fassociated-types%2Fissue-44153.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/525e23adafc06aec29338cbe46794c63920608a7/src%2Ftest%2Fui%2Fassociated-types%2Fissue-44153.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fassociated-types%2Fissue-44153.stderr?ref=525e23adafc06aec29338cbe46794c63920608a7", "patch": "@@ -5,7 +5,7 @@ LL |     fn visit() {}\n    |     ---------- required by `Visit::visit`\n ...\n LL |     <() as Visit>::visit();\n-   |     ^^^^^^^^^^^^^^^^^^^^ expected `()`, found `&()`\n+   |     ^^^^^^^^^^^^^^^^^^^^ expected `&()`, found `()`\n    |\n    = note: required because of the requirements on the impl of `Visit` for `()`\n "}, {"sha": "b4fd6b3e74364d45c81e926c63f4f09213202236", "filename": "src/test/ui/impl-trait/projection-mismatch-in-impl-where-clause.rs", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/525e23adafc06aec29338cbe46794c63920608a7/src%2Ftest%2Fui%2Fimpl-trait%2Fprojection-mismatch-in-impl-where-clause.rs", "raw_url": "https://github.com/rust-lang/rust/raw/525e23adafc06aec29338cbe46794c63920608a7/src%2Ftest%2Fui%2Fimpl-trait%2Fprojection-mismatch-in-impl-where-clause.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fimpl-trait%2Fprojection-mismatch-in-impl-where-clause.rs?ref=525e23adafc06aec29338cbe46794c63920608a7", "patch": "@@ -0,0 +1,20 @@\n+pub trait Super {\n+    type Assoc;\n+}\n+\n+impl Super for () {\n+    type Assoc = u8;\n+}\n+\n+pub trait Test {}\n+\n+impl<T> Test for T where T: Super<Assoc = ()> {}\n+\n+fn test() -> impl Test {\n+    //~^ERROR type mismatch resolving `<() as Super>::Assoc == ()`\n+    ()\n+}\n+\n+fn main() {\n+    let a = test();\n+}"}, {"sha": "d1956a9afb809b42609a68c977e11575137bf76f", "filename": "src/test/ui/impl-trait/projection-mismatch-in-impl-where-clause.stderr", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/525e23adafc06aec29338cbe46794c63920608a7/src%2Ftest%2Fui%2Fimpl-trait%2Fprojection-mismatch-in-impl-where-clause.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/525e23adafc06aec29338cbe46794c63920608a7/src%2Ftest%2Fui%2Fimpl-trait%2Fprojection-mismatch-in-impl-where-clause.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fimpl-trait%2Fprojection-mismatch-in-impl-where-clause.stderr?ref=525e23adafc06aec29338cbe46794c63920608a7", "patch": "@@ -0,0 +1,11 @@\n+error[E0271]: type mismatch resolving `<() as Super>::Assoc == ()`\n+  --> $DIR/projection-mismatch-in-impl-where-clause.rs:13:14\n+   |\n+LL | fn test() -> impl Test {\n+   |              ^^^^^^^^^ expected `()`, found `u8`\n+   |\n+   = note: required because of the requirements on the impl of `Test` for `()`\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0271`."}, {"sha": "043658c9508f3721a52cfa2746099d246eceedc9", "filename": "src/test/ui/issues/issue-33941.stderr", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/525e23adafc06aec29338cbe46794c63920608a7/src%2Ftest%2Fui%2Fissues%2Fissue-33941.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/525e23adafc06aec29338cbe46794c63920608a7/src%2Ftest%2Fui%2Fissues%2Fissue-33941.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-33941.stderr?ref=525e23adafc06aec29338cbe46794c63920608a7", "patch": "@@ -11,10 +11,10 @@ error[E0271]: type mismatch resolving `<std::collections::hash_map::Iter<'_, _,\n   --> $DIR/issue-33941.rs:4:14\n    |\n LL |     for _ in HashMap::new().iter().cloned() {}\n-   |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected tuple, found reference\n+   |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected reference, found tuple\n    |\n-   = note:  expected tuple `(&_, &_)`\n-           found reference `&_`\n+   = note: expected reference `&_`\n+                  found tuple `(&_, &_)`\n    = note: required because of the requirements on the impl of `Iterator` for `Cloned<std::collections::hash_map::Iter<'_, _, _>>`\n    = note: required because of the requirements on the impl of `IntoIterator` for `Cloned<std::collections::hash_map::Iter<'_, _, _>>`\n    = note: required by `into_iter`\n@@ -23,10 +23,10 @@ error[E0271]: type mismatch resolving `<std::collections::hash_map::Iter<'_, _,\n   --> $DIR/issue-33941.rs:4:14\n    |\n LL |     for _ in HashMap::new().iter().cloned() {}\n-   |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected tuple, found reference\n+   |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected reference, found tuple\n    |\n-   = note:  expected tuple `(&_, &_)`\n-           found reference `&_`\n+   = note: expected reference `&_`\n+                  found tuple `(&_, &_)`\n    = note: required because of the requirements on the impl of `Iterator` for `Cloned<std::collections::hash_map::Iter<'_, _, _>>`\n    = note: required by `std::iter::Iterator::next`\n "}, {"sha": "8ecde9d1e68e1b2e986e8c02e7caac365bc8a9d8", "filename": "src/test/ui/issues/issue-39970.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/525e23adafc06aec29338cbe46794c63920608a7/src%2Ftest%2Fui%2Fissues%2Fissue-39970.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/525e23adafc06aec29338cbe46794c63920608a7/src%2Ftest%2Fui%2Fissues%2Fissue-39970.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-39970.stderr?ref=525e23adafc06aec29338cbe46794c63920608a7", "patch": "@@ -5,7 +5,7 @@ LL |     fn visit() {}\n    |     ---------- required by `Visit::visit`\n ...\n LL |     <() as Visit>::visit();\n-   |     ^^^^^^^^^^^^^^^^^^^^ expected `&()`, found `()`\n+   |     ^^^^^^^^^^^^^^^^^^^^ expected `()`, found `&()`\n    |\n    = note: required because of the requirements on the impl of `Visit` for `()`\n "}]}