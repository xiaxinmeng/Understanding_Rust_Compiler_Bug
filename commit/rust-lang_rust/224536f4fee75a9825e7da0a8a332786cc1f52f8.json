{"sha": "224536f4fee75a9825e7da0a8a332786cc1f52f8", "node_id": "C_kwDOAAsO6NoAKDIyNDUzNmY0ZmVlNzVhOTgyNWU3ZGEwYThhMzMyNzg2Y2MxZjUyZjg", "commit": {"author": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2022-01-20T02:55:24Z"}, "committer": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2022-01-20T03:04:35Z"}, "message": "Inline indent function", "tree": {"sha": "9f1ff1f129f99ed714d1e945662a80d230b173de", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9f1ff1f129f99ed714d1e945662a80d230b173de"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/224536f4fee75a9825e7da0a8a332786cc1f52f8", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEERijF2Cz/ZdaBZKeK+boUO5X/bYIFAmHo0UMACgkQ+boUO5X/\nbYIaEQ/9F2N3fQ3HfYyDAA5hSqmSsnsPW5oa2g0yNiY1OtMxuEkVZ96gHHfm7YFs\njOlAHd3JkYe51wJKvtsVo6G1twwdnQCjNdm/ygJnYXObCJf43VPXzRbnJvaCuxpr\nETfOipKpLDmEZ2vEkpIllIgLR/Ds8aBQLkqrXewQw5BI6KIw4W2F4afxXqkr2Xpf\nDZZh/Pa7zjrh7jsszV9SYsbY4QKbGmRJMnBYnk0PHw0modxpkcrToG4MCBprixkD\njR24rZ+3n+KKopWstMGglwqSL/Ec5KMd0jcaHZVUliIkOnc6FAmtalXAigySCgO+\n6GLRVztZCm1LPKA7FMGA9Y9vTwaL06KgjOdOZPQNQG5th6U52wfXlzy9eOaLTp4K\nDK+kPfapmfjjiHiE2NJ9v2OYuPRMRsiHXTCjDwdp4A/1xYN7XUIycirtDkJXZFba\nMoHVCK3rdmj3XnHfQrANaMf1vhlmZcnghf+iA7NXy4IKOrty62YmnStniDXsEPdZ\nJzDcCivO6UBe9sJ1X1Qy+MDBwxWNYyut8DzhHMaq5gu3xNBxo4BSrIqhAp1U/SEQ\nyR73HP3OucJI9DyIKBbIaNCpXD0P/+q1a/P3kUZMc4Dl0iyD6yrejIlFSJlUnJAq\n58gEOZ4mctjz666aFXGuXOnC9dnHXTyzeHbrHBKkohu2Ij61EO4=\n=yPQF\n-----END PGP SIGNATURE-----", "payload": "tree 9f1ff1f129f99ed714d1e945662a80d230b173de\nparent 9e794d7de3adcf4e91b04e1a05d4f84c86b54f66\nauthor David Tolnay <dtolnay@gmail.com> 1642647324 -0800\ncommitter David Tolnay <dtolnay@gmail.com> 1642647875 -0800\n\nInline indent function\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/224536f4fee75a9825e7da0a8a332786cc1f52f8", "html_url": "https://github.com/rust-lang/rust/commit/224536f4fee75a9825e7da0a8a332786cc1f52f8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/224536f4fee75a9825e7da0a8a332786cc1f52f8/comments", "author": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9e794d7de3adcf4e91b04e1a05d4f84c86b54f66", "url": "https://api.github.com/repos/rust-lang/rust/commits/9e794d7de3adcf4e91b04e1a05d4f84c86b54f66", "html_url": "https://github.com/rust-lang/rust/commit/9e794d7de3adcf4e91b04e1a05d4f84c86b54f66"}], "stats": {"total": 11, "additions": 3, "deletions": 8}, "files": [{"sha": "726c114b10b1fa415d488bf27a76b2f5e04bd555", "filename": "compiler/rustc_ast_pretty/src/pp.rs", "status": "modified", "additions": 3, "deletions": 8, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/224536f4fee75a9825e7da0a8a332786cc1f52f8/compiler%2Frustc_ast_pretty%2Fsrc%2Fpp.rs", "raw_url": "https://github.com/rust-lang/rust/raw/224536f4fee75a9825e7da0a8a332786cc1f52f8/compiler%2Frustc_ast_pretty%2Fsrc%2Fpp.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast_pretty%2Fsrc%2Fpp.rs?ref=224536f4fee75a9825e7da0a8a332786cc1f52f8", "patch": "@@ -366,12 +366,7 @@ impl Printer {\n \n     fn print_newline(&mut self, amount: isize) {\n         self.out.push('\\n');\n-        self.pending_indentation = 0;\n-        self.indent(amount);\n-    }\n-\n-    fn indent(&mut self, amount: isize) {\n-        self.pending_indentation += amount;\n+        self.pending_indentation = amount;\n     }\n \n     fn get_top(&self) -> PrintFrame {\n@@ -397,7 +392,7 @@ impl Printer {\n     fn print_break(&mut self, token: BreakToken, size: isize) {\n         match self.get_top() {\n             PrintFrame::Fits => {\n-                self.indent(token.blank_space);\n+                self.pending_indentation += token.blank_space;\n                 self.space -= token.blank_space;\n             }\n             PrintFrame::Broken { offset, breaks: Breaks::Consistent } => {\n@@ -409,7 +404,7 @@ impl Printer {\n                     self.print_newline(offset + token.offset);\n                     self.space = self.margin - (offset + token.offset);\n                 } else {\n-                    self.indent(token.blank_space);\n+                    self.pending_indentation += token.blank_space;\n                     self.space -= token.blank_space;\n                 }\n             }"}]}