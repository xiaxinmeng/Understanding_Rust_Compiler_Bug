{"sha": "23e345bc0c79c43753b224ab127f5c06d553e4c4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjIzZTM0NWJjMGM3OWM0Mzc1M2IyMjRhYjEyN2Y1YzA2ZDU1M2U0YzQ=", "commit": {"author": {"name": "Isaac Woods", "email": "isaacwoods.home@gmail.com", "date": "2018-09-02T21:06:32Z"}, "committer": {"name": "Isaac Woods", "email": "isaacwoods.home@gmail.com", "date": "2018-09-14T15:19:59Z"}, "message": "Move std::os::raw::c_void into libcore and re-export in libstd", "tree": {"sha": "f59d1267edd2d67589cb94067629916f7647aede", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f59d1267edd2d67589cb94067629916f7647aede"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/23e345bc0c79c43753b224ab127f5c06d553e4c4", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIcBAABAgAGBQJbm9GfAAoJEB/m5rrew8iOMSUP/jOLTS0s2eKMzJDKyCqP6K/p\nu98IeTfGXXMnTOAzeaVtb3pYaADcPPdICuVLZp9Nw9Zt8tMdW0Jsre4Rt58T9O4c\ncmzsP20vANSTugVhfYta4lCWVsL3bTIz2vEItLHa2f42RLL08Kn6jSf+Ny9uWTEy\n3w+44Rq6gtAmPc1o65rL9PYs1aUsznW3KDl2Pmb+Nn4UtFd/P531+o8z/IjQFPEf\n+bACDgcy9JW7EwGWcer79j7aPLWIaDq8CQ6D1gV4XbYG+bjbKqbiFSc6Mqyc1y9D\nXV4ITnh4s2Jztsfo51+cxWtoPyyBqmhD4tdW2XyaFvXuAhfTvMs+g/6oRB6kX7UL\nc+vA87CYvC1fO9HjL7qRUfYWnd/b7zXGk7XrC4qAdP0iSbYElaftU1eIcWImhMAx\nleTqo4Jeyn3jRDYVrAKgJAc2QRs5S2HesPHL9anu6sALEGs68+rNrQvjDaYf06d0\npg+owiOpfVwndSPBw+hd2xfNBCv84yf2HImK2nadgWBIUCmTNWWYxiqkYa6iOaEp\nnMfPcOoGI7POPdirfZmv0FNcnchM2ebLsct0HJL+vGZbDP2RbnaiD4ohOUWrK4Mi\nP5EI9YKMMUi7yv4JMjp4AXA5TvoEYkXsafA+buHct1Mh+ApbriTXHV5vOkNCYUyc\n35UQN+TPuSJtE6j6zywx\n=bsro\n-----END PGP SIGNATURE-----", "payload": "tree f59d1267edd2d67589cb94067629916f7647aede\nparent dfabe4b88509bfff1eca9060ccc9a4d28ee394e8\nauthor Isaac Woods <isaacwoods.home@gmail.com> 1535922392 +0100\ncommitter Isaac Woods <isaacwoods.home@gmail.com> 1536938399 +0100\n\nMove std::os::raw::c_void into libcore and re-export in libstd\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/23e345bc0c79c43753b224ab127f5c06d553e4c4", "html_url": "https://github.com/rust-lang/rust/commit/23e345bc0c79c43753b224ab127f5c06d553e4c4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/23e345bc0c79c43753b224ab127f5c06d553e4c4/comments", "author": {"login": "IsaacWoods", "id": 10314464, "node_id": "MDQ6VXNlcjEwMzE0NDY0", "avatar_url": "https://avatars.githubusercontent.com/u/10314464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/IsaacWoods", "html_url": "https://github.com/IsaacWoods", "followers_url": "https://api.github.com/users/IsaacWoods/followers", "following_url": "https://api.github.com/users/IsaacWoods/following{/other_user}", "gists_url": "https://api.github.com/users/IsaacWoods/gists{/gist_id}", "starred_url": "https://api.github.com/users/IsaacWoods/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/IsaacWoods/subscriptions", "organizations_url": "https://api.github.com/users/IsaacWoods/orgs", "repos_url": "https://api.github.com/users/IsaacWoods/repos", "events_url": "https://api.github.com/users/IsaacWoods/events{/privacy}", "received_events_url": "https://api.github.com/users/IsaacWoods/received_events", "type": "User", "site_admin": false}, "committer": {"login": "IsaacWoods", "id": 10314464, "node_id": "MDQ6VXNlcjEwMzE0NDY0", "avatar_url": "https://avatars.githubusercontent.com/u/10314464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/IsaacWoods", "html_url": "https://github.com/IsaacWoods", "followers_url": "https://api.github.com/users/IsaacWoods/followers", "following_url": "https://api.github.com/users/IsaacWoods/following{/other_user}", "gists_url": "https://api.github.com/users/IsaacWoods/gists{/gist_id}", "starred_url": "https://api.github.com/users/IsaacWoods/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/IsaacWoods/subscriptions", "organizations_url": "https://api.github.com/users/IsaacWoods/orgs", "repos_url": "https://api.github.com/users/IsaacWoods/repos", "events_url": "https://api.github.com/users/IsaacWoods/events{/privacy}", "received_events_url": "https://api.github.com/users/IsaacWoods/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dfabe4b88509bfff1eca9060ccc9a4d28ee394e8", "url": "https://api.github.com/repos/rust-lang/rust/commits/dfabe4b88509bfff1eca9060ccc9a4d28ee394e8", "html_url": "https://github.com/rust-lang/rust/commit/dfabe4b88509bfff1eca9060ccc9a4d28ee394e8"}], "stats": {"total": 83, "additions": 48, "deletions": 35}, "files": [{"sha": "a03756f9c229f8e4104755cdc4b7383a30dcb9ab", "filename": "src/libcore/ffi.rs", "status": "added", "additions": 42, "deletions": 0, "changes": 42, "blob_url": "https://github.com/rust-lang/rust/blob/23e345bc0c79c43753b224ab127f5c06d553e4c4/src%2Flibcore%2Fffi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/23e345bc0c79c43753b224ab127f5c06d553e4c4/src%2Flibcore%2Fffi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fffi.rs?ref=23e345bc0c79c43753b224ab127f5c06d553e4c4", "patch": "@@ -0,0 +1,42 @@\n+#![stable(feature = \"\", since = \"1.30.0\")]\n+\n+#![allow(non_camel_case_types)]\n+\n+//! Utilities related to FFI bindings.\n+\n+use ::fmt;\n+\n+/// Equivalent to C's `void` type when used as a [pointer].\n+///\n+/// In essence, `*const c_void` is equivalent to C's `const void*`\n+/// and `*mut c_void` is equivalent to C's `void*`. That said, this is\n+/// *not* the same as C's `void` return type, which is Rust's `()` type.\n+///\n+/// Ideally, this type would be equivalent to [`!`], but currently it may\n+/// be more ideal to use `c_void` for FFI purposes.\n+///\n+/// [`!`]: ../../std/primitive.never.html\n+/// [pointer]: ../../std/primitive.pointer.html\n+// NB: For LLVM to recognize the void pointer type and by extension\n+//     functions like malloc(), we need to have it represented as i8* in\n+//     LLVM bitcode. The enum used here ensures this and prevents misuse\n+//     of the \"raw\" type by only having private variants.. We need two\n+//     variants, because the compiler complains about the repr attribute\n+//     otherwise.\n+#[repr(u8)]\n+#[stable(feature = \"raw_os\", since = \"1.1.0\")]\n+pub enum c_void {\n+    #[unstable(feature = \"c_void_variant\", reason = \"should not have to exist\",\n+               issue = \"0\")]\n+    #[doc(hidden)] __variant1,\n+    #[unstable(feature = \"c_void_variant\", reason = \"should not have to exist\",\n+               issue = \"0\")]\n+    #[doc(hidden)] __variant2,\n+}\n+\n+#[stable(feature = \"std_debug\", since = \"1.16.0\")]\n+impl fmt::Debug for c_void {\n+    fn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result {\n+        f.pad(\"c_void\")\n+    }\n+}"}, {"sha": "675e73e952cc2ca011c055a949d38c75e99b18e2", "filename": "src/libcore/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/23e345bc0c79c43753b224ab127f5c06d553e4c4/src%2Flibcore%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/23e345bc0c79c43753b224ab127f5c06d553e4c4/src%2Flibcore%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Flib.rs?ref=23e345bc0c79c43753b224ab127f5c06d553e4c4", "patch": "@@ -202,6 +202,7 @@ pub mod iter;\n pub mod option;\n pub mod raw;\n pub mod result;\n+pub mod ffi;\n \n pub mod slice;\n pub mod str;"}, {"sha": "a3345df5e0d8563e2e3351e3682e99e809fe44b1", "filename": "src/libstd/ffi/mod.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/23e345bc0c79c43753b224ab127f5c06d553e4c4/src%2Flibstd%2Fffi%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/23e345bc0c79c43753b224ab127f5c06d553e4c4/src%2Flibstd%2Fffi%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fffi%2Fmod.rs?ref=23e345bc0c79c43753b224ab127f5c06d553e4c4", "patch": "@@ -171,5 +171,8 @@ pub use self::c_str::{FromBytesWithNulError};\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n pub use self::os_str::{OsString, OsStr};\n \n+#[stable(feature = \"raw_os\", since = \"1.1.0\")]\n+pub use core::ffi::c_void;\n+\n mod c_str;\n mod os_str;"}, {"sha": "95faf3a5dd63d351460c7f70fa2a770e7d711690", "filename": "src/libstd/os/raw/mod.rs", "status": "modified", "additions": 2, "deletions": 35, "changes": 37, "blob_url": "https://github.com/rust-lang/rust/blob/23e345bc0c79c43753b224ab127f5c06d553e4c4/src%2Flibstd%2Fos%2Fraw%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/23e345bc0c79c43753b224ab127f5c06d553e4c4/src%2Flibstd%2Fos%2Fraw%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fos%2Fraw%2Fmod.rs?ref=23e345bc0c79c43753b224ab127f5c06d553e4c4", "patch": "@@ -18,8 +18,6 @@\n \n #![stable(feature = \"raw_os\", since = \"1.1.0\")]\n \n-use fmt;\n-\n #[doc(include = \"os/raw/char.md\")]\n #[cfg(any(all(target_os = \"linux\", any(target_arch = \"aarch64\",\n                                        target_arch = \"arm\",\n@@ -83,40 +81,9 @@ use fmt;\n #[doc(include = \"os/raw/double.md\")]\n #[stable(feature = \"raw_os\", since = \"1.1.0\")] pub type c_double = f64;\n \n-/// Equivalent to C's `void` type when used as a [pointer].\n-///\n-/// In essence, `*const c_void` is equivalent to C's `const void*`\n-/// and `*mut c_void` is equivalent to C's `void*`. That said, this is\n-/// *not* the same as C's `void` return type, which is Rust's `()` type.\n-///\n-/// Ideally, this type would be equivalent to [`!`], but currently it may\n-/// be more ideal to use `c_void` for FFI purposes.\n-///\n-/// [`!`]: ../../primitive.never.html\n-/// [pointer]: ../../primitive.pointer.html\n-// NB: For LLVM to recognize the void pointer type and by extension\n-//     functions like malloc(), we need to have it represented as i8* in\n-//     LLVM bitcode. The enum used here ensures this and prevents misuse\n-//     of the \"raw\" type by only having private variants.. We need two\n-//     variants, because the compiler complains about the repr attribute\n-//     otherwise.\n-#[repr(u8)]\n #[stable(feature = \"raw_os\", since = \"1.1.0\")]\n-pub enum c_void {\n-    #[unstable(feature = \"c_void_variant\", reason = \"should not have to exist\",\n-               issue = \"0\")]\n-    #[doc(hidden)] __variant1,\n-    #[unstable(feature = \"c_void_variant\", reason = \"should not have to exist\",\n-               issue = \"0\")]\n-    #[doc(hidden)] __variant2,\n-}\n-\n-#[stable(feature = \"std_debug\", since = \"1.16.0\")]\n-impl fmt::Debug for c_void {\n-    fn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result {\n-        f.pad(\"c_void\")\n-    }\n-}\n+#[doc(no_inline)]\n+pub use core::ffi::c_void;\n \n #[cfg(test)]\n #[allow(unused_imports)]"}]}