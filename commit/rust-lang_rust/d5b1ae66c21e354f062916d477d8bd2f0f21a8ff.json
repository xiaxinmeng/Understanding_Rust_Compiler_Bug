{"sha": "d5b1ae66c21e354f062916d477d8bd2f0f21a8ff", "node_id": "C_kwDOAAsO6NoAKGQ1YjFhZTY2YzIxZTM1NGYwNjI5MTZkNDc3ZDhiZDJmMGYyMWE4ZmY", "commit": {"author": {"name": "Amos Wenger", "email": "amoswenger@gmail.com", "date": "2022-07-20T13:57:13Z"}, "committer": {"name": "Amos Wenger", "email": "amoswenger@gmail.com", "date": "2022-07-20T13:57:14Z"}, "message": "Remove check_merge_commits test altogether\n\nRationale: Merge commits will probably end up in\n`rust-lang/rust-analyzer` when doing \"rust=>ra\" syncs anyway.\n\nIt could be changed to only check for merge commits in non-sync PRs,\nbut it's \"probably not worth the hassle\"", "tree": {"sha": "afcca47c66d987d6053ec5ea2114750ce51eb456", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/afcca47c66d987d6053ec5ea2114750ce51eb456"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d5b1ae66c21e354f062916d477d8bd2f0f21a8ff", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d5b1ae66c21e354f062916d477d8bd2f0f21a8ff", "html_url": "https://github.com/rust-lang/rust/commit/d5b1ae66c21e354f062916d477d8bd2f0f21a8ff", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d5b1ae66c21e354f062916d477d8bd2f0f21a8ff/comments", "author": {"login": "fasterthanlime", "id": 7998310, "node_id": "MDQ6VXNlcjc5OTgzMTA=", "avatar_url": "https://avatars.githubusercontent.com/u/7998310?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fasterthanlime", "html_url": "https://github.com/fasterthanlime", "followers_url": "https://api.github.com/users/fasterthanlime/followers", "following_url": "https://api.github.com/users/fasterthanlime/following{/other_user}", "gists_url": "https://api.github.com/users/fasterthanlime/gists{/gist_id}", "starred_url": "https://api.github.com/users/fasterthanlime/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fasterthanlime/subscriptions", "organizations_url": "https://api.github.com/users/fasterthanlime/orgs", "repos_url": "https://api.github.com/users/fasterthanlime/repos", "events_url": "https://api.github.com/users/fasterthanlime/events{/privacy}", "received_events_url": "https://api.github.com/users/fasterthanlime/received_events", "type": "User", "site_admin": false}, "committer": {"login": "fasterthanlime", "id": 7998310, "node_id": "MDQ6VXNlcjc5OTgzMTA=", "avatar_url": "https://avatars.githubusercontent.com/u/7998310?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fasterthanlime", "html_url": "https://github.com/fasterthanlime", "followers_url": "https://api.github.com/users/fasterthanlime/followers", "following_url": "https://api.github.com/users/fasterthanlime/following{/other_user}", "gists_url": "https://api.github.com/users/fasterthanlime/gists{/gist_id}", "starred_url": "https://api.github.com/users/fasterthanlime/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fasterthanlime/subscriptions", "organizations_url": "https://api.github.com/users/fasterthanlime/orgs", "repos_url": "https://api.github.com/users/fasterthanlime/repos", "events_url": "https://api.github.com/users/fasterthanlime/events{/privacy}", "received_events_url": "https://api.github.com/users/fasterthanlime/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c5204087316a79be9e39d9944cd5380313fe095e", "url": "https://api.github.com/repos/rust-lang/rust/commits/c5204087316a79be9e39d9944cd5380313fe095e", "html_url": "https://github.com/rust-lang/rust/commit/c5204087316a79be9e39d9944cd5380313fe095e"}], "stats": {"total": 51, "additions": 0, "deletions": 51}, "files": [{"sha": "dc3c5539c2cb4d621dcde7b7bc38f057e76e459b", "filename": "crates/rust-analyzer/tests/slow-tests/tidy.rs", "status": "modified", "additions": 0, "deletions": 51, "changes": 51, "blob_url": "https://github.com/rust-lang/rust/blob/d5b1ae66c21e354f062916d477d8bd2f0f21a8ff/crates%2Frust-analyzer%2Ftests%2Fslow-tests%2Ftidy.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d5b1ae66c21e354f062916d477d8bd2f0f21a8ff/crates%2Frust-analyzer%2Ftests%2Fslow-tests%2Ftidy.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Ftests%2Fslow-tests%2Ftidy.rs?ref=d5b1ae66c21e354f062916d477d8bd2f0f21a8ff", "patch": "@@ -142,57 +142,6 @@ fn check_cargo_toml(path: &Path, text: String) {\n     }\n }\n \n-#[cfg(not(feature = \"in-rust-tree\"))]\n-#[test]\n-fn check_merge_commits() {\n-    let sh = &Shell::new().unwrap();\n-\n-    let bors = cmd!(sh, \"git rev-list --merges --author 'bors' HEAD~19..\").read().unwrap();\n-    let all = cmd!(sh, \"git rev-list --merges HEAD~19..\").read().unwrap();\n-    if bors != all {\n-        panic!(\n-            \"\n-Merge commits are not allowed in the history.\n-\n-When updating a pull-request, please rebase your feature branch\n-on top of master by running `git rebase master`. If rebase fails,\n-you can re-apply your changes like this:\n-\n-  # Just look around to see the current state.\n-  $ git status\n-  $ git log\n-\n-  # Abort in-progress rebase and merges, if any.\n-  $ git rebase --abort\n-  $ git merge --abort\n-\n-  # Make the branch point to the latest commit from master,\n-  # while maintaining your local changes uncommited.\n-  $ git reset --soft origin/master\n-\n-  # Commit all changes in a single batch.\n-  $ git commit -am'My changes'\n-\n-  # Verify that everything looks alright.\n-  $ git status\n-  $ git log\n-\n-  # Push the changes. We did a rebase, so we need `--force` option.\n-  # `--force-with-lease` is a more safe (Rusty) version of `--force`.\n-  $ git push --force-with-lease\n-\n-  # Verify that both local and remote branch point to the same commit.\n-  $ git log\n-\n-And don't fear to mess something up during a rebase -- you can\n-always restore the previous state using `git ref-log`:\n-\n-https://github.blog/2015-06-08-how-to-undo-almost-anything-with-git/#redo-after-undo-local\n-\"\n-        );\n-    }\n-}\n-\n fn deny_clippy(path: &Path, text: &str) {\n     let ignore = &[\n         // The documentation in string literals may contain anything for its own purposes"}]}