{"sha": "5f89a60f1a0feab1e2e0dd37e642877552675da4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVmODlhNjBmMWEwZmVhYjFlMmUwZGQzN2U2NDI4Nzc1NTI2NzVkYTQ=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2021-04-19T14:11:49Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2021-04-19T14:11:49Z"}, "message": "fix: false positive about inner attrs in docs\n\ncloses #8541", "tree": {"sha": "43fb164ef5ca02ccf8d9e8c3bedaa66d473a019c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/43fb164ef5ca02ccf8d9e8c3bedaa66d473a019c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5f89a60f1a0feab1e2e0dd37e642877552675da4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5f89a60f1a0feab1e2e0dd37e642877552675da4", "html_url": "https://github.com/rust-lang/rust/commit/5f89a60f1a0feab1e2e0dd37e642877552675da4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5f89a60f1a0feab1e2e0dd37e642877552675da4/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e4f7f1e1bd2ca3c1816abf87779ad8893b7bf990", "url": "https://api.github.com/repos/rust-lang/rust/commits/e4f7f1e1bd2ca3c1816abf87779ad8893b7bf990", "html_url": "https://github.com/rust-lang/rust/commit/e4f7f1e1bd2ca3c1816abf87779ad8893b7bf990"}], "stats": {"total": 420, "additions": 238, "deletions": 182}, "files": [{"sha": "d9294d93affdddfcfb8276d398270ca9fbe8e9dc", "filename": "crates/hir_def/src/attr.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/5f89a60f1a0feab1e2e0dd37e642877552675da4/crates%2Fhir_def%2Fsrc%2Fattr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5f89a60f1a0feab1e2e0dd37e642877552675da4/crates%2Fhir_def%2Fsrc%2Fattr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir_def%2Fsrc%2Fattr.rs?ref=5f89a60f1a0feab1e2e0dd37e642877552675da4", "patch": "@@ -545,7 +545,7 @@ fn inner_attributes(\n             _ => return None,\n         }\n     };\n-    let attrs = attrs.filter(|attr| attr.excl_token().is_some());\n+    let attrs = attrs.filter(|attr| attr.kind().is_inner());\n     let docs = docs.filter(|doc| doc.is_inner());\n     Some((attrs, docs))\n }\n@@ -740,7 +740,7 @@ fn collect_attrs(\n     let (inner_attrs, inner_docs) = inner_attributes(owner.syntax())\n         .map_or((None, None), |(attrs, docs)| (Some(attrs), Some(docs)));\n \n-    let outer_attrs = owner.attrs().filter(|attr| attr.excl_token().is_none());\n+    let outer_attrs = owner.attrs().filter(|attr| attr.kind().is_outer());\n     let attrs = outer_attrs\n         .chain(inner_attrs.into_iter().flatten())\n         .map(|attr| (attr.syntax().text_range().start(), Either::Left(attr)));"}, {"sha": "171099661bdfc6443d3d6719b26c02265d4b41a0", "filename": "crates/syntax/src/ast/node_ext.rs", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/5f89a60f1a0feab1e2e0dd37e642877552675da4/crates%2Fsyntax%2Fsrc%2Fast%2Fnode_ext.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5f89a60f1a0feab1e2e0dd37e642877552675da4/crates%2Fsyntax%2Fsrc%2Fast%2Fnode_ext.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Fsrc%2Fast%2Fnode_ext.rs?ref=5f89a60f1a0feab1e2e0dd37e642877552675da4", "patch": "@@ -125,6 +125,18 @@ pub enum AttrKind {\n     Outer,\n }\n \n+impl AttrKind {\n+    /// Returns `true` if the attr_kind is [`Inner`].\n+    pub fn is_inner(&self) -> bool {\n+        matches!(self, Self::Inner)\n+    }\n+\n+    /// Returns `true` if the attr_kind is [`Outer`].\n+    pub fn is_outer(&self) -> bool {\n+        matches!(self, Self::Outer)\n+    }\n+}\n+\n impl ast::Attr {\n     pub fn as_simple_atom(&self) -> Option<SmolStr> {\n         if self.eq_token().is_some() || self.token_tree().is_some() {"}, {"sha": "40170014f9a0c8a519c66a59d80dabe300201351", "filename": "crates/syntax/src/validation/block.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5f89a60f1a0feab1e2e0dd37e642877552675da4/crates%2Fsyntax%2Fsrc%2Fvalidation%2Fblock.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5f89a60f1a0feab1e2e0dd37e642877552675da4/crates%2Fsyntax%2Fsrc%2Fvalidation%2Fblock.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Fsrc%2Fvalidation%2Fblock.rs?ref=5f89a60f1a0feab1e2e0dd37e642877552675da4", "patch": "@@ -13,7 +13,7 @@ pub(crate) fn validate_block_expr(block: ast::BlockExpr, errors: &mut Vec<Syntax\n             _ => {}\n         }\n     }\n-    errors.extend(block.attrs().map(|attr| {\n+    errors.extend(block.attrs().filter(|attr| attr.kind().is_inner()).map(|attr| {\n         SyntaxError::new(\n             \"A block in this position cannot accept inner attributes\",\n             attr.syntax().text_range(),"}, {"sha": "50ab52d325d72c7471e416149a388f4272764832", "filename": "crates/syntax/test_data/parser/ok/0045_block_attrs.rast", "status": "added", "additions": 218, "deletions": 0, "changes": 218, "blob_url": "https://github.com/rust-lang/rust/blob/5f89a60f1a0feab1e2e0dd37e642877552675da4/crates%2Fsyntax%2Ftest_data%2Fparser%2Fok%2F0045_block_attrs.rast", "raw_url": "https://github.com/rust-lang/rust/raw/5f89a60f1a0feab1e2e0dd37e642877552675da4/crates%2Fsyntax%2Ftest_data%2Fparser%2Fok%2F0045_block_attrs.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Fok%2F0045_block_attrs.rast?ref=5f89a60f1a0feab1e2e0dd37e642877552675da4", "patch": "@@ -0,0 +1,218 @@\n+SOURCE_FILE@0..764\n+  FN@0..461\n+    FN_KW@0..2 \"fn\"\n+    WHITESPACE@2..3 \" \"\n+    NAME@3..8\n+      IDENT@3..8 \"inner\"\n+    PARAM_LIST@8..10\n+      L_PAREN@8..9 \"(\"\n+      R_PAREN@9..10 \")\"\n+    WHITESPACE@10..11 \" \"\n+    BLOCK_EXPR@11..461\n+      L_CURLY@11..12 \"{\"\n+      WHITESPACE@12..17 \"\\n    \"\n+      ATTR@17..57\n+        POUND@17..18 \"#\"\n+        BANG@18..19 \"!\"\n+        L_BRACK@19..20 \"[\"\n+        PATH@20..23\n+          PATH_SEGMENT@20..23\n+            NAME_REF@20..23\n+              IDENT@20..23 \"doc\"\n+        TOKEN_TREE@23..56\n+          L_PAREN@23..24 \"(\"\n+          STRING@24..55 \"\\\"Inner attributes all ...\"\n+          R_PAREN@55..56 \")\"\n+        R_BRACK@56..57 \"]\"\n+      WHITESPACE@57..62 \"\\n    \"\n+      COMMENT@62..97 \"//! As are ModuleDoc  ...\"\n+      WHITESPACE@97..102 \"\\n    \"\n+      EXPR_STMT@102..295\n+        BLOCK_EXPR@102..294\n+          L_CURLY@102..103 \"{\"\n+          WHITESPACE@103..112 \"\\n        \"\n+          ATTR@112..180\n+            POUND@112..113 \"#\"\n+            BANG@113..114 \"!\"\n+            L_BRACK@114..115 \"[\"\n+            PATH@115..118\n+              PATH_SEGMENT@115..118\n+                NAME_REF@115..118\n+                  IDENT@115..118 \"doc\"\n+            TOKEN_TREE@118..179\n+              L_PAREN@118..119 \"(\"\n+              STRING@119..178 \"\\\"Inner attributes are ...\"\n+              R_PAREN@178..179 \")\"\n+            R_BRACK@179..180 \"]\"\n+          WHITESPACE@180..189 \"\\n        \"\n+          ATTR@189..244\n+            POUND@189..190 \"#\"\n+            BANG@190..191 \"!\"\n+            L_BRACK@191..192 \"[\"\n+            PATH@192..195\n+              PATH_SEGMENT@192..195\n+                NAME_REF@192..195\n+                  IDENT@192..195 \"doc\"\n+            TOKEN_TREE@195..243\n+              L_PAREN@195..196 \"(\"\n+              STRING@196..242 \"\\\"Being validated is n ...\"\n+              R_PAREN@242..243 \")\"\n+            R_BRACK@243..244 \"]\"\n+          WHITESPACE@244..253 \"\\n        \"\n+          COMMENT@253..288 \"//! As are ModuleDoc  ...\"\n+          WHITESPACE@288..293 \"\\n    \"\n+          R_CURLY@293..294 \"}\"\n+        SEMICOLON@294..295 \";\"\n+      WHITESPACE@295..300 \"\\n    \"\n+      BLOCK_EXPR@300..459\n+        L_CURLY@300..301 \"{\"\n+        WHITESPACE@301..310 \"\\n        \"\n+        ATTR@310..409\n+          POUND@310..311 \"#\"\n+          BANG@311..312 \"!\"\n+          L_BRACK@312..313 \"[\"\n+          PATH@313..316\n+            PATH_SEGMENT@313..316\n+              NAME_REF@313..316\n+                IDENT@313..316 \"doc\"\n+          TOKEN_TREE@316..408\n+            L_PAREN@316..317 \"(\"\n+            STRING@317..407 \"\\\"Inner attributes are ...\"\n+            R_PAREN@407..408 \")\"\n+          R_BRACK@408..409 \"]\"\n+        WHITESPACE@409..418 \"\\n        \"\n+        COMMENT@418..453 \"//! As are ModuleDoc  ...\"\n+        WHITESPACE@453..458 \"\\n    \"\n+        R_CURLY@458..459 \"}\"\n+      WHITESPACE@459..460 \"\\n\"\n+      R_CURLY@460..461 \"}\"\n+  WHITESPACE@461..463 \"\\n\\n\"\n+  FN@463..539\n+    FN_KW@463..465 \"fn\"\n+    WHITESPACE@465..466 \" \"\n+    NAME@466..471\n+      IDENT@466..471 \"outer\"\n+    PARAM_LIST@471..473\n+      L_PAREN@471..472 \"(\"\n+      R_PAREN@472..473 \")\"\n+    WHITESPACE@473..474 \" \"\n+    BLOCK_EXPR@474..539\n+      L_CURLY@474..475 \"{\"\n+      WHITESPACE@475..480 \"\\n    \"\n+      LET_STMT@480..537\n+        LET_KW@480..483 \"let\"\n+        WHITESPACE@483..484 \" \"\n+        WILDCARD_PAT@484..485\n+          UNDERSCORE@484..485 \"_\"\n+        WHITESPACE@485..486 \" \"\n+        EQ@486..487 \"=\"\n+        WHITESPACE@487..488 \" \"\n+        BLOCK_EXPR@488..536\n+          ATTR@488..533\n+            POUND@488..489 \"#\"\n+            L_BRACK@489..490 \"[\"\n+            PATH@490..493\n+              PATH_SEGMENT@490..493\n+                NAME_REF@490..493\n+                  IDENT@490..493 \"doc\"\n+            TOKEN_TREE@493..532\n+              L_PAREN@493..494 \"(\"\n+              STRING@494..531 \"\\\"Outer attributes are ...\"\n+              R_PAREN@531..532 \")\"\n+            R_BRACK@532..533 \"]\"\n+          WHITESPACE@533..534 \" \"\n+          L_CURLY@534..535 \"{\"\n+          R_CURLY@535..536 \"}\"\n+        SEMICOLON@536..537 \";\"\n+      WHITESPACE@537..538 \"\\n\"\n+      R_CURLY@538..539 \"}\"\n+  WHITESPACE@539..541 \"\\n\\n\"\n+  COMMENT@541..601 \"// https://github.com ...\"\n+  WHITESPACE@601..602 \"\\n\"\n+  IMPL@602..763\n+    IMPL_KW@602..606 \"impl\"\n+    WHITESPACE@606..607 \" \"\n+    PATH_TYPE@607..615\n+      PATH@607..615\n+        PATH_SEGMENT@607..615\n+          NAME_REF@607..615\n+            IDENT@607..615 \"Whatever\"\n+    WHITESPACE@615..616 \" \"\n+    ASSOC_ITEM_LIST@616..763\n+      L_CURLY@616..617 \"{\"\n+      WHITESPACE@617..622 \"\\n    \"\n+      FN@622..761\n+        FN_KW@622..624 \"fn\"\n+        WHITESPACE@624..625 \" \"\n+        NAME@625..636\n+          IDENT@625..636 \"salsa_event\"\n+        PARAM_LIST@636..679\n+          L_PAREN@636..637 \"(\"\n+          SELF_PARAM@637..642\n+            AMP@637..638 \"&\"\n+            NAME@638..642\n+              SELF_KW@638..642 \"self\"\n+          COMMA@642..643 \",\"\n+          WHITESPACE@643..644 \" \"\n+          PARAM@644..678\n+            IDENT_PAT@644..652\n+              NAME@644..652\n+                IDENT@644..652 \"event_fn\"\n+            COLON@652..653 \":\"\n+            WHITESPACE@653..654 \" \"\n+            IMPL_TRAIT_TYPE@654..678\n+              IMPL_KW@654..658 \"impl\"\n+              WHITESPACE@658..659 \" \"\n+              TYPE_BOUND_LIST@659..678\n+                TYPE_BOUND@659..678\n+                  PATH_TYPE@659..678\n+                    PATH@659..678\n+                      PATH_SEGMENT@659..678\n+                        NAME_REF@659..661\n+                          IDENT@659..661 \"Fn\"\n+                        PARAM_LIST@661..663\n+                          L_PAREN@661..662 \"(\"\n+                          R_PAREN@662..663 \")\"\n+                        WHITESPACE@663..664 \" \"\n+                        RET_TYPE@664..678\n+                          THIN_ARROW@664..666 \"->\"\n+                          WHITESPACE@666..667 \" \"\n+                          PATH_TYPE@667..678\n+                            PATH@667..678\n+                              PATH_SEGMENT@667..678\n+                                NAME_REF@667..672\n+                                  IDENT@667..672 \"Event\"\n+                                GENERIC_ARG_LIST@672..678\n+                                  L_ANGLE@672..673 \"<\"\n+                                  TYPE_ARG@673..677\n+                                    PATH_TYPE@673..677\n+                                      PATH@673..677\n+                                        PATH_SEGMENT@673..677\n+                                          NAME_REF@673..677\n+                                            IDENT@673..677 \"Self\"\n+                                  R_ANGLE@677..678 \">\"\n+          R_PAREN@678..679 \")\"\n+        WHITESPACE@679..680 \" \"\n+        BLOCK_EXPR@680..761\n+          L_CURLY@680..681 \"{\"\n+          WHITESPACE@681..690 \"\\n        \"\n+          ATTR@690..717\n+            POUND@690..691 \"#\"\n+            BANG@691..692 \"!\"\n+            L_BRACK@692..693 \"[\"\n+            PATH@693..698\n+              PATH_SEGMENT@693..698\n+                NAME_REF@693..698\n+                  IDENT@693..698 \"allow\"\n+            TOKEN_TREE@698..716\n+              L_PAREN@698..699 \"(\"\n+              IDENT@699..715 \"unused_variables\"\n+              R_PAREN@715..716 \")\"\n+            R_BRACK@716..717 \"]\"\n+          WHITESPACE@717..718 \" \"\n+          COMMENT@718..755 \"// this is  `inner_at ...\"\n+          WHITESPACE@755..760 \"\\n    \"\n+          R_CURLY@760..761 \"}\"\n+      WHITESPACE@761..762 \"\\n\"\n+      R_CURLY@762..763 \"}\"\n+  WHITESPACE@763..764 \"\\n\""}, {"sha": "ed4593759aceda05ded008619d5f370434303f9a", "filename": "crates/syntax/test_data/parser/ok/0045_block_attrs.rs", "status": "renamed", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/5f89a60f1a0feab1e2e0dd37e642877552675da4/crates%2Fsyntax%2Ftest_data%2Fparser%2Fok%2F0045_block_attrs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5f89a60f1a0feab1e2e0dd37e642877552675da4/crates%2Fsyntax%2Ftest_data%2Fparser%2Fok%2F0045_block_attrs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Fok%2F0045_block_attrs.rs?ref=5f89a60f1a0feab1e2e0dd37e642877552675da4", "patch": "@@ -1,4 +1,4 @@\n-fn block() {\n+fn inner() {\n     #![doc(\"Inner attributes allowed here\")]\n     //! As are ModuleDoc style comments\n     {\n@@ -12,6 +12,10 @@ fn block() {\n     }\n }\n \n+fn outer() {\n+    let _ = #[doc(\"Outer attributes are always allowed\")] {};\n+}\n+\n // https://github.com/rust-analyzer/rust-analyzer/issues/689\n impl Whatever {\n     fn salsa_event(&self, event_fn: impl Fn() -> Event<Self>) {", "previous_filename": "crates/syntax/test_data/parser/ok/0045_block_inner_attrs.rs"}, {"sha": "6afed5f05eb39bd8f9e044e88b796af4e1957de4", "filename": "crates/syntax/test_data/parser/ok/0045_block_inner_attrs.rast", "status": "removed", "additions": 0, "deletions": 178, "changes": 178, "blob_url": "https://github.com/rust-lang/rust/blob/e4f7f1e1bd2ca3c1816abf87779ad8893b7bf990/crates%2Fsyntax%2Ftest_data%2Fparser%2Fok%2F0045_block_inner_attrs.rast", "raw_url": "https://github.com/rust-lang/rust/raw/e4f7f1e1bd2ca3c1816abf87779ad8893b7bf990/crates%2Fsyntax%2Ftest_data%2Fparser%2Fok%2F0045_block_inner_attrs.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Fok%2F0045_block_inner_attrs.rast?ref=e4f7f1e1bd2ca3c1816abf87779ad8893b7bf990", "patch": "@@ -1,178 +0,0 @@\n-SOURCE_FILE@0..686\n-  FN@0..461\n-    FN_KW@0..2 \"fn\"\n-    WHITESPACE@2..3 \" \"\n-    NAME@3..8\n-      IDENT@3..8 \"block\"\n-    PARAM_LIST@8..10\n-      L_PAREN@8..9 \"(\"\n-      R_PAREN@9..10 \")\"\n-    WHITESPACE@10..11 \" \"\n-    BLOCK_EXPR@11..461\n-      L_CURLY@11..12 \"{\"\n-      WHITESPACE@12..17 \"\\n    \"\n-      ATTR@17..57\n-        POUND@17..18 \"#\"\n-        BANG@18..19 \"!\"\n-        L_BRACK@19..20 \"[\"\n-        PATH@20..23\n-          PATH_SEGMENT@20..23\n-            NAME_REF@20..23\n-              IDENT@20..23 \"doc\"\n-        TOKEN_TREE@23..56\n-          L_PAREN@23..24 \"(\"\n-          STRING@24..55 \"\\\"Inner attributes all ...\"\n-          R_PAREN@55..56 \")\"\n-        R_BRACK@56..57 \"]\"\n-      WHITESPACE@57..62 \"\\n    \"\n-      COMMENT@62..97 \"//! As are ModuleDoc  ...\"\n-      WHITESPACE@97..102 \"\\n    \"\n-      EXPR_STMT@102..295\n-        BLOCK_EXPR@102..294\n-          L_CURLY@102..103 \"{\"\n-          WHITESPACE@103..112 \"\\n        \"\n-          ATTR@112..180\n-            POUND@112..113 \"#\"\n-            BANG@113..114 \"!\"\n-            L_BRACK@114..115 \"[\"\n-            PATH@115..118\n-              PATH_SEGMENT@115..118\n-                NAME_REF@115..118\n-                  IDENT@115..118 \"doc\"\n-            TOKEN_TREE@118..179\n-              L_PAREN@118..119 \"(\"\n-              STRING@119..178 \"\\\"Inner attributes are ...\"\n-              R_PAREN@178..179 \")\"\n-            R_BRACK@179..180 \"]\"\n-          WHITESPACE@180..189 \"\\n        \"\n-          ATTR@189..244\n-            POUND@189..190 \"#\"\n-            BANG@190..191 \"!\"\n-            L_BRACK@191..192 \"[\"\n-            PATH@192..195\n-              PATH_SEGMENT@192..195\n-                NAME_REF@192..195\n-                  IDENT@192..195 \"doc\"\n-            TOKEN_TREE@195..243\n-              L_PAREN@195..196 \"(\"\n-              STRING@196..242 \"\\\"Being validated is n ...\"\n-              R_PAREN@242..243 \")\"\n-            R_BRACK@243..244 \"]\"\n-          WHITESPACE@244..253 \"\\n        \"\n-          COMMENT@253..288 \"//! As are ModuleDoc  ...\"\n-          WHITESPACE@288..293 \"\\n    \"\n-          R_CURLY@293..294 \"}\"\n-        SEMICOLON@294..295 \";\"\n-      WHITESPACE@295..300 \"\\n    \"\n-      BLOCK_EXPR@300..459\n-        L_CURLY@300..301 \"{\"\n-        WHITESPACE@301..310 \"\\n        \"\n-        ATTR@310..409\n-          POUND@310..311 \"#\"\n-          BANG@311..312 \"!\"\n-          L_BRACK@312..313 \"[\"\n-          PATH@313..316\n-            PATH_SEGMENT@313..316\n-              NAME_REF@313..316\n-                IDENT@313..316 \"doc\"\n-          TOKEN_TREE@316..408\n-            L_PAREN@316..317 \"(\"\n-            STRING@317..407 \"\\\"Inner attributes are ...\"\n-            R_PAREN@407..408 \")\"\n-          R_BRACK@408..409 \"]\"\n-        WHITESPACE@409..418 \"\\n        \"\n-        COMMENT@418..453 \"//! As are ModuleDoc  ...\"\n-        WHITESPACE@453..458 \"\\n    \"\n-        R_CURLY@458..459 \"}\"\n-      WHITESPACE@459..460 \"\\n\"\n-      R_CURLY@460..461 \"}\"\n-  WHITESPACE@461..463 \"\\n\\n\"\n-  COMMENT@463..523 \"// https://github.com ...\"\n-  WHITESPACE@523..524 \"\\n\"\n-  IMPL@524..685\n-    IMPL_KW@524..528 \"impl\"\n-    WHITESPACE@528..529 \" \"\n-    PATH_TYPE@529..537\n-      PATH@529..537\n-        PATH_SEGMENT@529..537\n-          NAME_REF@529..537\n-            IDENT@529..537 \"Whatever\"\n-    WHITESPACE@537..538 \" \"\n-    ASSOC_ITEM_LIST@538..685\n-      L_CURLY@538..539 \"{\"\n-      WHITESPACE@539..544 \"\\n    \"\n-      FN@544..683\n-        FN_KW@544..546 \"fn\"\n-        WHITESPACE@546..547 \" \"\n-        NAME@547..558\n-          IDENT@547..558 \"salsa_event\"\n-        PARAM_LIST@558..601\n-          L_PAREN@558..559 \"(\"\n-          SELF_PARAM@559..564\n-            AMP@559..560 \"&\"\n-            NAME@560..564\n-              SELF_KW@560..564 \"self\"\n-          COMMA@564..565 \",\"\n-          WHITESPACE@565..566 \" \"\n-          PARAM@566..600\n-            IDENT_PAT@566..574\n-              NAME@566..574\n-                IDENT@566..574 \"event_fn\"\n-            COLON@574..575 \":\"\n-            WHITESPACE@575..576 \" \"\n-            IMPL_TRAIT_TYPE@576..600\n-              IMPL_KW@576..580 \"impl\"\n-              WHITESPACE@580..581 \" \"\n-              TYPE_BOUND_LIST@581..600\n-                TYPE_BOUND@581..600\n-                  PATH_TYPE@581..600\n-                    PATH@581..600\n-                      PATH_SEGMENT@581..600\n-                        NAME_REF@581..583\n-                          IDENT@581..583 \"Fn\"\n-                        PARAM_LIST@583..585\n-                          L_PAREN@583..584 \"(\"\n-                          R_PAREN@584..585 \")\"\n-                        WHITESPACE@585..586 \" \"\n-                        RET_TYPE@586..600\n-                          THIN_ARROW@586..588 \"->\"\n-                          WHITESPACE@588..589 \" \"\n-                          PATH_TYPE@589..600\n-                            PATH@589..600\n-                              PATH_SEGMENT@589..600\n-                                NAME_REF@589..594\n-                                  IDENT@589..594 \"Event\"\n-                                GENERIC_ARG_LIST@594..600\n-                                  L_ANGLE@594..595 \"<\"\n-                                  TYPE_ARG@595..599\n-                                    PATH_TYPE@595..599\n-                                      PATH@595..599\n-                                        PATH_SEGMENT@595..599\n-                                          NAME_REF@595..599\n-                                            IDENT@595..599 \"Self\"\n-                                  R_ANGLE@599..600 \">\"\n-          R_PAREN@600..601 \")\"\n-        WHITESPACE@601..602 \" \"\n-        BLOCK_EXPR@602..683\n-          L_CURLY@602..603 \"{\"\n-          WHITESPACE@603..612 \"\\n        \"\n-          ATTR@612..639\n-            POUND@612..613 \"#\"\n-            BANG@613..614 \"!\"\n-            L_BRACK@614..615 \"[\"\n-            PATH@615..620\n-              PATH_SEGMENT@615..620\n-                NAME_REF@615..620\n-                  IDENT@615..620 \"allow\"\n-            TOKEN_TREE@620..638\n-              L_PAREN@620..621 \"(\"\n-              IDENT@621..637 \"unused_variables\"\n-              R_PAREN@637..638 \")\"\n-            R_BRACK@638..639 \"]\"\n-          WHITESPACE@639..640 \" \"\n-          COMMENT@640..677 \"// this is  `inner_at ...\"\n-          WHITESPACE@677..682 \"\\n    \"\n-          R_CURLY@682..683 \"}\"\n-      WHITESPACE@683..684 \"\\n\"\n-      R_CURLY@684..685 \"}\"\n-  WHITESPACE@685..686 \"\\n\""}]}