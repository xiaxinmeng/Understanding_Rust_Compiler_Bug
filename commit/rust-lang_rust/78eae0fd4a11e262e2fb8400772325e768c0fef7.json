{"sha": "78eae0fd4a11e262e2fb8400772325e768c0fef7", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc4ZWFlMGZkNGExMWUyNjJlMmZiODQwMDc3MjMyNWU3NjhjMGZlZjc=", "commit": {"author": {"name": "Joshua Nelson", "email": "jyn514@gmail.com", "date": "2021-07-14T01:40:09Z"}, "committer": {"name": "Joshua Nelson", "email": "jyn514@gmail.com", "date": "2021-07-14T03:38:12Z"}, "message": "Remove renaming of `test` crate\n\nThis is leftover from when `doctest` used to be called `test`. Remove it\nnow, it's unnecessary and makes the code harder to read.", "tree": {"sha": "902de645775934a62bf50f91064d535973b2c7ae", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/902de645775934a62bf50f91064d535973b2c7ae"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/78eae0fd4a11e262e2fb8400772325e768c0fef7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/78eae0fd4a11e262e2fb8400772325e768c0fef7", "html_url": "https://github.com/rust-lang/rust/commit/78eae0fd4a11e262e2fb8400772325e768c0fef7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/78eae0fd4a11e262e2fb8400772325e768c0fef7/comments", "author": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3e1c75c6e25a4db968066bd2ef2dabc7c504d7ca", "url": "https://api.github.com/repos/rust-lang/rust/commits/3e1c75c6e25a4db968066bd2ef2dabc7c504d7ca", "html_url": "https://github.com/rust-lang/rust/commit/3e1c75c6e25a4db968066bd2ef2dabc7c504d7ca"}], "stats": {"total": 26, "additions": 11, "deletions": 15}, "files": [{"sha": "c5ca396e72029c4870506a73145c79a9aec9c5da", "filename": "src/librustdoc/doctest.rs", "status": "modified", "additions": 8, "deletions": 12, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/78eae0fd4a11e262e2fb8400772325e768c0fef7/src%2Flibrustdoc%2Fdoctest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/78eae0fd4a11e262e2fb8400772325e768c0fef7/src%2Flibrustdoc%2Fdoctest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fdoctest.rs?ref=78eae0fd4a11e262e2fb8400772325e768c0fef7", "patch": "@@ -167,11 +167,7 @@ crate fn run(options: Options) -> Result<(), ErrorReported> {\n \n     test_args.insert(0, \"rustdoctest\".to_string());\n \n-    testing::test_main(\n-        &test_args,\n-        tests,\n-        Some(testing::Options::new().display_output(display_warnings)),\n-    );\n+    test::test_main(&test_args, tests, Some(test::Options::new().display_output(display_warnings)));\n \n     // Collect and warn about unused externs, but only if we've gotten\n     // reports for each doctest\n@@ -769,7 +765,7 @@ crate trait Tester {\n }\n \n crate struct Collector {\n-    crate tests: Vec<testing::TestDescAndFn>,\n+    crate tests: Vec<test::TestDescAndFn>,\n \n     // The name of the test displayed to the user, separated by `::`.\n     //\n@@ -930,22 +926,22 @@ impl Tester for Collector {\n         };\n \n         debug!(\"creating test {}: {}\", name, test);\n-        self.tests.push(testing::TestDescAndFn {\n-            desc: testing::TestDesc {\n-                name: testing::DynTestName(name),\n+        self.tests.push(test::TestDescAndFn {\n+            desc: test::TestDesc {\n+                name: test::DynTestName(name),\n                 ignore: match config.ignore {\n                     Ignore::All => true,\n                     Ignore::None => false,\n                     Ignore::Some(ref ignores) => ignores.iter().any(|s| target_str.contains(s)),\n                 },\n                 // compiler failures are test failures\n-                should_panic: testing::ShouldPanic::No,\n+                should_panic: test::ShouldPanic::No,\n                 allow_fail: config.allow_fail,\n                 compile_fail: config.compile_fail,\n                 no_run,\n-                test_type: testing::TestType::DocTest,\n+                test_type: test::TestType::DocTest,\n             },\n-            testfn: testing::DynTestFn(box move || {\n+            testfn: test::DynTestFn(box move || {\n                 let report_unused_externs = |uext| {\n                     unused_externs.lock().unwrap().push(uext);\n                 };"}, {"sha": "16d14fa49f714ac5096060f807a1c4b96e393a05", "filename": "src/librustdoc/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/78eae0fd4a11e262e2fb8400772325e768c0fef7/src%2Flibrustdoc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/78eae0fd4a11e262e2fb8400772325e768c0fef7/src%2Flibrustdoc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Flib.rs?ref=78eae0fd4a11e262e2fb8400772325e768c0fef7", "patch": "@@ -57,7 +57,7 @@ extern crate rustc_span as rustc_span;\n extern crate rustc_target;\n extern crate rustc_trait_selection;\n extern crate rustc_typeck;\n-extern crate test as testing;\n+extern crate test;\n \n #[cfg(feature = \"jemalloc\")]\n extern crate tikv_jemalloc_sys;"}, {"sha": "45966c0058df4de71fa520d4b631235854f7ebef", "filename": "src/librustdoc/markdown.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/78eae0fd4a11e262e2fb8400772325e768c0fef7/src%2Flibrustdoc%2Fmarkdown.rs", "raw_url": "https://github.com/rust-lang/rust/raw/78eae0fd4a11e262e2fb8400772325e768c0fef7/src%2Flibrustdoc%2Fmarkdown.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fmarkdown.rs?ref=78eae0fd4a11e262e2fb8400772325e768c0fef7", "patch": "@@ -136,10 +136,10 @@ crate fn test(mut options: Options) -> Result<(), String> {\n     find_testable_code(&input_str, &mut collector, codes, options.enable_per_target_ignores, None);\n \n     options.test_args.insert(0, \"rustdoctest\".to_string());\n-    testing::test_main(\n+    test::test_main(\n         &options.test_args,\n         collector.tests,\n-        Some(testing::Options::new().display_output(options.display_warnings)),\n+        Some(test::Options::new().display_output(options.display_warnings)),\n     );\n     Ok(())\n }"}]}