{"sha": "3b5947e1cd2bcdbea6512c659c4e8590b5305ef3", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNiNTk0N2UxY2QyYmNkYmVhNjUxMmM2NTljNGU4NTkwYjUzMDVlZjM=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2020-08-14T13:23:58Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-08-14T13:23:58Z"}, "message": "Merge #5759\n\n5759: Rename hypothetical -> speculative\n r=matklad a=matklad\n\nbors r+\n\ud83e\udd16\n\nCo-authored-by: Aleksey Kladov <aleksey.kladov@gmail.com>", "tree": {"sha": "39cadc001951e59dca1ec17697a8507e438d4791", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/39cadc001951e59dca1ec17697a8507e438d4791"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3b5947e1cd2bcdbea6512c659c4e8590b5305ef3", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfNpBuCRBK7hj4Ov3rIwAAdHIIAA8xajVVxC5zuumZlG1Deb4K\nEw3IvW84zVic2QbCOO8fRQ2Grl6RNpyi4dTV/76q0EvanqteTI6gn5vWkbLPcO5i\nzoIA5fnwCRIhyUiL3d0rckwReqMR27M4tmwh60aEGoURdyWrEiE1TSMAh9UoVNXr\nnfLBQSK97/zJUdf2H0bxHYxnrzYxbJn/otaZ8mWjfk/DHqhCbssui4nSOm3cGsn2\nDvX0eMzAFNs/4A1fTiEcTdaQel8QQnwLQatFiYsb/fhGfkaAlvrGSDt79+quJmpn\n9zLPfZqxg2fx7pGv0igaxyV04urYy6aGbR3mT/XOD8kLeJVcYFE4xbdt4t+WTNI=\n=61R/\n-----END PGP SIGNATURE-----\n", "payload": "tree 39cadc001951e59dca1ec17697a8507e438d4791\nparent 1ec23e7d33e29c6e14f4fe504e1e253e91339ea4\nparent 125744c057a953b2f1b03042e9a6ec49f1eb0a1e\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1597411438 +0000\ncommitter GitHub <noreply@github.com> 1597411438 +0000\n\nMerge #5759\n\n5759: Rename hypothetical -> speculative\n r=matklad a=matklad\n\nbors r+\n\ud83e\udd16\n\nCo-authored-by: Aleksey Kladov <aleksey.kladov@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3b5947e1cd2bcdbea6512c659c4e8590b5305ef3", "html_url": "https://github.com/rust-lang/rust/commit/3b5947e1cd2bcdbea6512c659c4e8590b5305ef3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3b5947e1cd2bcdbea6512c659c4e8590b5305ef3/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1ec23e7d33e29c6e14f4fe504e1e253e91339ea4", "url": "https://api.github.com/repos/rust-lang/rust/commits/1ec23e7d33e29c6e14f4fe504e1e253e91339ea4", "html_url": "https://github.com/rust-lang/rust/commit/1ec23e7d33e29c6e14f4fe504e1e253e91339ea4"}, {"sha": "125744c057a953b2f1b03042e9a6ec49f1eb0a1e", "url": "https://api.github.com/repos/rust-lang/rust/commits/125744c057a953b2f1b03042e9a6ec49f1eb0a1e", "html_url": "https://github.com/rust-lang/rust/commit/125744c057a953b2f1b03042e9a6ec49f1eb0a1e"}], "stats": {"total": 15, "additions": 7, "deletions": 8}, "files": [{"sha": "3953017c3bec9c0f0fb419c6230691ac98750b83", "filename": "crates/hir/src/semantics.rs", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/3b5947e1cd2bcdbea6512c659c4e8590b5305ef3/crates%2Fhir%2Fsrc%2Fsemantics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3b5947e1cd2bcdbea6512c659c4e8590b5305ef3/crates%2Fhir%2Fsrc%2Fsemantics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir%2Fsrc%2Fsemantics.rs?ref=3b5947e1cd2bcdbea6512c659c4e8590b5305ef3", "patch": "@@ -112,14 +112,13 @@ impl<'db, DB: HirDatabase> Semantics<'db, DB> {\n     pub fn expand(&self, macro_call: &ast::MacroCall) -> Option<SyntaxNode> {\n         self.imp.expand(macro_call)\n     }\n-\n-    pub fn expand_hypothetical(\n+    pub fn speculative_expand(\n         &self,\n         actual_macro_call: &ast::MacroCall,\n         hypothetical_args: &ast::TokenTree,\n         token_to_map: SyntaxToken,\n     ) -> Option<(SyntaxNode, SyntaxToken)> {\n-        self.imp.expand_hypothetical(actual_macro_call, hypothetical_args, token_to_map)\n+        self.imp.speculative_expand(actual_macro_call, hypothetical_args, token_to_map)\n     }\n \n     pub fn descend_into_macros(&self, token: SyntaxToken) -> SyntaxToken {\n@@ -311,7 +310,7 @@ impl<'db> SemanticsImpl<'db> {\n         Some(node)\n     }\n \n-    fn expand_hypothetical(\n+    fn speculative_expand(\n         &self,\n         actual_macro_call: &ast::MacroCall,\n         hypothetical_args: &ast::TokenTree,\n@@ -756,7 +755,7 @@ impl<'a> SemanticsScope<'a> {\n \n     /// Resolve a path as-if it was written at the given scope. This is\n     /// necessary a heuristic, as it doesn't take hygiene into account.\n-    pub fn resolve_hypothetical(&self, path: &ast::Path) -> Option<PathResolution> {\n+    pub fn speculative_resolve(&self, path: &ast::Path) -> Option<PathResolution> {\n         let hygiene = Hygiene::new(self.db.upcast(), self.file_id);\n         let path = Path::from_src(path.clone(), &hygiene)?;\n         self.resolve_hir_path(&path)"}, {"sha": "85456a66f5e1afbe07b75eb27a1bfd604f395af9", "filename": "crates/ide/src/completion/completion_context.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3b5947e1cd2bcdbea6512c659c4e8590b5305ef3/crates%2Fide%2Fsrc%2Fcompletion%2Fcompletion_context.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3b5947e1cd2bcdbea6512c659c4e8590b5305ef3/crates%2Fide%2Fsrc%2Fcompletion%2Fcompletion_context.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Fcompletion%2Fcompletion_context.rs?ref=3b5947e1cd2bcdbea6512c659c4e8590b5305ef3", "patch": "@@ -185,7 +185,7 @@ impl<'a> CompletionContext<'a> {\n             };\n             if let (Some(actual_expansion), Some(hypothetical_expansion)) = (\n                 ctx.sema.expand(&actual_macro_call),\n-                ctx.sema.expand_hypothetical(\n+                ctx.sema.speculative_expand(\n                     &actual_macro_call,\n                     &hypothetical_args,\n                     fake_ident_token,"}, {"sha": "b932132d5b948ddd17a161ed0cca70ff933830ba", "filename": "crates/ssr/src/resolving.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3b5947e1cd2bcdbea6512c659c4e8590b5305ef3/crates%2Fssr%2Fsrc%2Fresolving.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3b5947e1cd2bcdbea6512c659c4e8590b5305ef3/crates%2Fssr%2Fsrc%2Fresolving.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fssr%2Fsrc%2Fresolving.rs?ref=3b5947e1cd2bcdbea6512c659c4e8590b5305ef3", "patch": "@@ -212,13 +212,13 @@ impl<'db> ResolutionScope<'db> {\n         // First try resolving the whole path. This will work for things like\n         // `std::collections::HashMap`, but will fail for things like\n         // `std::collections::HashMap::new`.\n-        if let Some(resolution) = self.scope.resolve_hypothetical(&path) {\n+        if let Some(resolution) = self.scope.speculative_resolve(&path) {\n             return Some(resolution);\n         }\n         // Resolution failed, try resolving the qualifier (e.g. `std::collections::HashMap` and if\n         // that succeeds, then iterate through the candidates on the resolved type with the provided\n         // name.\n-        let resolved_qualifier = self.scope.resolve_hypothetical(&path.qualifier()?)?;\n+        let resolved_qualifier = self.scope.speculative_resolve(&path.qualifier()?)?;\n         if let hir::PathResolution::Def(hir::ModuleDef::Adt(adt)) = resolved_qualifier {\n             let name = path.segment()?.name_ref()?;\n             adt.ty(self.scope.db).iterate_path_candidates("}]}