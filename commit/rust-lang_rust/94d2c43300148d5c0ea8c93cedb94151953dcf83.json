{"sha": "94d2c43300148d5c0ea8c93cedb94151953dcf83", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk0ZDJjNDMzMDAxNDhkNWMwZWE4YzkzY2VkYjk0MTUxOTUzZGNmODM=", "commit": {"author": {"name": "Jorge Aparicio", "email": "jorge@japaric.io", "date": "2017-05-13T13:21:24Z"}, "committer": {"name": "Jorge Aparicio", "email": "jorge@japaric.io", "date": "2017-05-13T14:26:55Z"}, "message": "add -Z pre-link-arg{,s} to rustc\n\nThis commit adds two unstable flags to `rustc`: `-Z pre-link-arg` and `-Z\npre-link-args`. These are the counterpart of the existing `-C link-arg{,s}`\nflags and can be used to pass extra arguments at the *beginning* of the linker\ninvocation, before the Rust object files are passed.", "tree": {"sha": "2319f1ce8872dd6cc4a0b40ce3d52a987e12017a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2319f1ce8872dd6cc4a0b40ce3d52a987e12017a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/94d2c43300148d5c0ea8c93cedb94151953dcf83", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/94d2c43300148d5c0ea8c93cedb94151953dcf83", "html_url": "https://github.com/rust-lang/rust/commit/94d2c43300148d5c0ea8c93cedb94151953dcf83", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/94d2c43300148d5c0ea8c93cedb94151953dcf83/comments", "author": {"login": "japaric", "id": 5018213, "node_id": "MDQ6VXNlcjUwMTgyMTM=", "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4", "gravatar_id": "", "url": "https://api.github.com/users/japaric", "html_url": "https://github.com/japaric", "followers_url": "https://api.github.com/users/japaric/followers", "following_url": "https://api.github.com/users/japaric/following{/other_user}", "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}", "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/japaric/subscriptions", "organizations_url": "https://api.github.com/users/japaric/orgs", "repos_url": "https://api.github.com/users/japaric/repos", "events_url": "https://api.github.com/users/japaric/events{/privacy}", "received_events_url": "https://api.github.com/users/japaric/received_events", "type": "User", "site_admin": false}, "committer": {"login": "japaric", "id": 5018213, "node_id": "MDQ6VXNlcjUwMTgyMTM=", "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4", "gravatar_id": "", "url": "https://api.github.com/users/japaric", "html_url": "https://github.com/japaric", "followers_url": "https://api.github.com/users/japaric/followers", "following_url": "https://api.github.com/users/japaric/following{/other_user}", "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}", "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/japaric/subscriptions", "organizations_url": "https://api.github.com/users/japaric/orgs", "repos_url": "https://api.github.com/users/japaric/repos", "events_url": "https://api.github.com/users/japaric/events{/privacy}", "received_events_url": "https://api.github.com/users/japaric/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ef3ec5ece5bdf8950810225a9a3bc3cd1926e3d5", "url": "https://api.github.com/repos/rust-lang/rust/commits/ef3ec5ece5bdf8950810225a9a3bc3cd1926e3d5", "html_url": "https://github.com/rust-lang/rust/commit/ef3ec5ece5bdf8950810225a9a3bc3cd1926e3d5"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "79bb20599ca1a741ae33364fae8048bd762c8465", "filename": "src/librustc/session/config.rs", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/94d2c43300148d5c0ea8c93cedb94151953dcf83/src%2Flibrustc%2Fsession%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/94d2c43300148d5c0ea8c93cedb94151953dcf83/src%2Flibrustc%2Fsession%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fsession%2Fconfig.rs?ref=94d2c43300148d5c0ea8c93cedb94151953dcf83", "patch": "@@ -824,9 +824,9 @@ options! {CodegenOptions, CodegenSetter, basic_codegen_options,\n     linker: Option<String> = (None, parse_opt_string, [UNTRACKED],\n         \"system linker to link outputs with\"),\n     link_arg: Vec<String> = (vec![], parse_string_push, [UNTRACKED],\n-        \"a single extra argument to pass to the linker (can be used several times)\"),\n+        \"a single extra argument to append to the linker invocation (can be used several times)\"),\n     link_args: Option<Vec<String>> = (None, parse_opt_list, [UNTRACKED],\n-        \"extra arguments to pass to the linker (space separated)\"),\n+        \"extra arguments to append to the linker invocation (space separated)\"),\n     link_dead_code: bool = (false, parse_bool, [UNTRACKED],\n         \"don't let linker strip dead code (turning it on can be used for code coverage)\"),\n     lto: bool = (false, parse_bool, [TRACKED],\n@@ -1029,6 +1029,10 @@ options! {DebuggingOptions, DebuggingSetter, basic_debugging_options,\n         \"add a mapping target to the file path remapping config\"),\n     force_unstable_if_unmarked: bool = (false, parse_bool, [TRACKED],\n         \"force all crates to be `rustc_private` unstable\"),\n+    pre_link_arg: Vec<String> = (vec![], parse_string_push, [UNTRACKED],\n+        \"a single extra argument to prepend the linker invocation (can be used several times)\"),\n+    pre_link_args: Option<Vec<String>> = (None, parse_opt_list, [UNTRACKED],\n+        \"extra arguments to prepend to the linker invocation (space separated)\"),\n }\n \n pub fn default_lib_output() -> CrateType {"}, {"sha": "d1000a574b526a8290cd97460666c621e04d13de", "filename": "src/librustc_trans/back/link.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/94d2c43300148d5c0ea8c93cedb94151953dcf83/src%2Flibrustc_trans%2Fback%2Flink.rs", "raw_url": "https://github.com/rust-lang/rust/raw/94d2c43300148d5c0ea8c93cedb94151953dcf83/src%2Flibrustc_trans%2Fback%2Flink.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Fback%2Flink.rs?ref=94d2c43300148d5c0ea8c93cedb94151953dcf83", "patch": "@@ -714,6 +714,10 @@ fn link_natively(sess: &Session,\n     if let Some(args) = sess.target.target.options.pre_link_args.get(&flavor) {\n         cmd.args(args);\n     }\n+    if let Some(ref args) = sess.opts.debugging_opts.pre_link_args {\n+        cmd.args(args);\n+    }\n+    cmd.args(&sess.opts.debugging_opts.pre_link_arg);\n \n     let pre_link_objects = if crate_type == config::CrateTypeExecutable {\n         &sess.target.target.options.pre_link_objects_exe"}]}