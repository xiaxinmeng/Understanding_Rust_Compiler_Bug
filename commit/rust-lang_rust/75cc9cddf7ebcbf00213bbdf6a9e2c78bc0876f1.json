{"sha": "75cc9cddf7ebcbf00213bbdf6a9e2c78bc0876f1", "node_id": "C_kwDOAAsO6NoAKDc1Y2M5Y2RkZjdlYmNiZjAwMjEzYmJkZjZhOWUyYzc4YmMwODc2ZjE", "commit": {"author": {"name": "Luqman Aden", "email": "me@luqman.ca", "date": "2022-08-08T07:32:35Z"}, "committer": {"name": "Luqman Aden", "email": "me@luqman.ca", "date": "2022-08-08T18:52:04Z"}, "message": "Add test for #100246.", "tree": {"sha": "92d3642561f5a5131406c9135c69eff31fcd02a8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/92d3642561f5a5131406c9135c69eff31fcd02a8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/75cc9cddf7ebcbf00213bbdf6a9e2c78bc0876f1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/75cc9cddf7ebcbf00213bbdf6a9e2c78bc0876f1", "html_url": "https://github.com/rust-lang/rust/commit/75cc9cddf7ebcbf00213bbdf6a9e2c78bc0876f1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/75cc9cddf7ebcbf00213bbdf6a9e2c78bc0876f1/comments", "author": {"login": "luqmana", "id": 287063, "node_id": "MDQ6VXNlcjI4NzA2Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/287063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luqmana", "html_url": "https://github.com/luqmana", "followers_url": "https://api.github.com/users/luqmana/followers", "following_url": "https://api.github.com/users/luqmana/following{/other_user}", "gists_url": "https://api.github.com/users/luqmana/gists{/gist_id}", "starred_url": "https://api.github.com/users/luqmana/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luqmana/subscriptions", "organizations_url": "https://api.github.com/users/luqmana/orgs", "repos_url": "https://api.github.com/users/luqmana/repos", "events_url": "https://api.github.com/users/luqmana/events{/privacy}", "received_events_url": "https://api.github.com/users/luqmana/received_events", "type": "User", "site_admin": false}, "committer": {"login": "luqmana", "id": 287063, "node_id": "MDQ6VXNlcjI4NzA2Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/287063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luqmana", "html_url": "https://github.com/luqmana", "followers_url": "https://api.github.com/users/luqmana/followers", "following_url": "https://api.github.com/users/luqmana/following{/other_user}", "gists_url": "https://api.github.com/users/luqmana/gists{/gist_id}", "starred_url": "https://api.github.com/users/luqmana/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luqmana/subscriptions", "organizations_url": "https://api.github.com/users/luqmana/orgs", "repos_url": "https://api.github.com/users/luqmana/repos", "events_url": "https://api.github.com/users/luqmana/events{/privacy}", "received_events_url": "https://api.github.com/users/luqmana/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fb8636fc4826dbab5a728cb75bff0e9295c8e59a", "url": "https://api.github.com/repos/rust-lang/rust/commits/fb8636fc4826dbab5a728cb75bff0e9295c8e59a", "html_url": "https://github.com/rust-lang/rust/commit/fb8636fc4826dbab5a728cb75bff0e9295c8e59a"}], "stats": {"total": 43, "additions": 43, "deletions": 0}, "files": [{"sha": "8f0b34bab0c87f4920f2a8fd2a87a1c98ab095cc", "filename": "src/test/ui/typeck/issue-100246.rs", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/75cc9cddf7ebcbf00213bbdf6a9e2c78bc0876f1/src%2Ftest%2Fui%2Ftypeck%2Fissue-100246.rs", "raw_url": "https://github.com/rust-lang/rust/raw/75cc9cddf7ebcbf00213bbdf6a9e2c78bc0876f1/src%2Ftest%2Fui%2Ftypeck%2Fissue-100246.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftypeck%2Fissue-100246.rs?ref=75cc9cddf7ebcbf00213bbdf6a9e2c78bc0876f1", "patch": "@@ -0,0 +1,30 @@\n+#![recursion_limit = \"5\"] // To reduce noise\n+\n+//expect incompatible type error when ambiguous traits are in scope\n+//and not an overflow error on the span in the main function.\n+\n+struct Ratio<T>(T);\n+\n+pub trait Pow {\n+    fn pow(self) -> Self;\n+}\n+\n+impl<'a, T> Pow for &'a Ratio<T>\n+where\n+    &'a T: Pow,\n+{\n+    fn pow(self) -> Self {\n+        self\n+    }\n+}\n+\n+fn downcast<'a, W: ?Sized>() -> std::io::Result<&'a W> {\n+    todo!()\n+}\n+\n+struct Other;\n+\n+fn main() -> std::io::Result<()> {\n+    let other: Other = downcast()?;//~ERROR 28:24: 28:35: `?` operator has incompatible types\n+    Ok(())\n+}"}, {"sha": "8b77de94e89f866aee1c72f0c916d5927e3f151d", "filename": "src/test/ui/typeck/issue-100246.stderr", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/75cc9cddf7ebcbf00213bbdf6a9e2c78bc0876f1/src%2Ftest%2Fui%2Ftypeck%2Fissue-100246.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/75cc9cddf7ebcbf00213bbdf6a9e2c78bc0876f1/src%2Ftest%2Fui%2Ftypeck%2Fissue-100246.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftypeck%2Fissue-100246.stderr?ref=75cc9cddf7ebcbf00213bbdf6a9e2c78bc0876f1", "patch": "@@ -0,0 +1,13 @@\n+error[E0308]: `?` operator has incompatible types\n+  --> $DIR/issue-100246.rs:28:24\n+   |\n+LL |     let other: Other = downcast()?;\n+   |                        ^^^^^^^^^^^ expected struct `Other`, found reference\n+   |\n+   = note: `?` operator cannot convert from `&_` to `Other`\n+   = note: expected struct `Other`\n+           found reference `&_`\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0308`."}]}