{"sha": "4b133a7e27c32e822e9ff774e4436f184f5a9752", "node_id": "C_kwDOAAsO6NoAKDRiMTMzYTdlMjdjMzJlODIyZTlmZjc3NGU0NDM2ZjE4NGY1YTk3NTI", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-03-24T17:32:40Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-03-24T17:32:40Z"}, "message": "Auto merge of #94517 - aDotInTheVoid:inline_wrapping_next_power_two, r=yaahc\n\nMark `uint::wrapping_next_power_of_two` as `#[inline]`\n\nThis brings it in line with `next_power_of_two` and `checked_next_power_of_two`\n\nhttps://godbolt.org/z/Tr18GnqKj\n\n<details>\n<summary> Output as of `rustc 1.61.0-nightly (4ce374923 2022-02-28)` </summary>\n\n```asm\nexample::npot:\n        lea     eax, [rdi - 1]\n        movzx   eax, al\n        lzcnt   ecx, eax\n        add     ecx, -24\n        mov     al, -1\n        shr     al, cl\n        inc     al\n        cmp     dil, 2\n        movzx   ecx, al\n        mov     eax, 1\n        cmovae  eax, ecx\n        ret\n\nexample::cnpot:\n        lea     eax, [rdi - 1]\n        movzx   eax, al\n        lzcnt   ecx, eax\n        add     ecx, -24\n        mov     al, -1\n        shr     al, cl\n        xor     ecx, ecx\n        cmp     dil, 2\n        movzx   edx, al\n        cmovb   edx, ecx\n        inc     dl\n        setne   al\n        ret\n\nexample::wrapping_next_power_of_two:\n        jmp     qword ptr [rip + _ZN4core3num20_$LT$impl$u20$u8$GT$26wrapping_next_power_of_two17hd879a85055735264E@GOTPCREL]\n```\n\n</details>", "tree": {"sha": "a1840d8dc09218b26dac2024fb29eccc583596c2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a1840d8dc09218b26dac2024fb29eccc583596c2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4b133a7e27c32e822e9ff774e4436f184f5a9752", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4b133a7e27c32e822e9ff774e4436f184f5a9752", "html_url": "https://github.com/rust-lang/rust/commit/4b133a7e27c32e822e9ff774e4436f184f5a9752", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4b133a7e27c32e822e9ff774e4436f184f5a9752/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8d8135f003b35c3e109d013b2bed9ee9496da615", "url": "https://api.github.com/repos/rust-lang/rust/commits/8d8135f003b35c3e109d013b2bed9ee9496da615", "html_url": "https://github.com/rust-lang/rust/commit/8d8135f003b35c3e109d013b2bed9ee9496da615"}, {"sha": "3f04c85e249dbefddc6f45e35146b119b2274ac0", "url": "https://api.github.com/repos/rust-lang/rust/commits/3f04c85e249dbefddc6f45e35146b119b2274ac0", "html_url": "https://github.com/rust-lang/rust/commit/3f04c85e249dbefddc6f45e35146b119b2274ac0"}], "stats": {"total": 1, "additions": 1, "deletions": 0}, "files": [{"sha": "4751faeb93678b1722e0866d55062dc17094ffe5", "filename": "library/core/src/num/uint_macros.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4b133a7e27c32e822e9ff774e4436f184f5a9752/library%2Fcore%2Fsrc%2Fnum%2Fuint_macros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4b133a7e27c32e822e9ff774e4436f184f5a9752/library%2Fcore%2Fsrc%2Fnum%2Fuint_macros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fnum%2Fuint_macros.rs?ref=4b133a7e27c32e822e9ff774e4436f184f5a9752", "patch": "@@ -2226,6 +2226,7 @@ macro_rules! uint_impl {\n         #[doc = concat!(\"assert_eq!(3\", stringify!($SelfT), \".wrapping_next_power_of_two(), 4);\")]\n         #[doc = concat!(\"assert_eq!(\", stringify!($SelfT), \"::MAX.wrapping_next_power_of_two(), 0);\")]\n         /// ```\n+        #[inline]\n         #[unstable(feature = \"wrapping_next_power_of_two\", issue = \"32463\",\n                    reason = \"needs decision on wrapping behaviour\")]\n         #[rustc_const_unstable(feature = \"wrapping_next_power_of_two\", issue = \"32463\")]"}]}