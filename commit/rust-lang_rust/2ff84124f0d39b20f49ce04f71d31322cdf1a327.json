{"sha": "2ff84124f0d39b20f49ce04f71d31322cdf1a327", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJmZjg0MTI0ZjBkMzliMjBmNDljZTA0ZjcxZDMxMzIyY2RmMWEzMjc=", "commit": {"author": {"name": "blake2-ppc", "email": "blake2-ppc", "date": "2013-07-29T22:31:44Z"}, "committer": {"name": "blake2-ppc", "email": "blake2-ppc", "date": "2013-07-29T23:48:17Z"}, "message": "std: Remove RandomAccessIterator impl for VecMutIterator\n\nThe RandomAccessIterator implementation is not sound for the mutable vec\niterator, and makes it easy to duplicate &mut element pointers.", "tree": {"sha": "167d75f4d00f782f6cb2d6d9e0bb1b690f07946c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/167d75f4d00f782f6cb2d6d9e0bb1b690f07946c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2ff84124f0d39b20f49ce04f71d31322cdf1a327", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2ff84124f0d39b20f49ce04f71d31322cdf1a327", "html_url": "https://github.com/rust-lang/rust/commit/2ff84124f0d39b20f49ce04f71d31322cdf1a327", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2ff84124f0d39b20f49ce04f71d31322cdf1a327/comments", "author": null, "committer": null, "parents": [{"sha": "66fccdb2958fef88e00236497aec5e0f99fe7d02", "url": "https://api.github.com/repos/rust-lang/rust/commits/66fccdb2958fef88e00236497aec5e0f99fe7d02", "html_url": "https://github.com/rust-lang/rust/commit/66fccdb2958fef88e00236497aec5e0f99fe7d02"}], "stats": {"total": 8, "additions": 4, "deletions": 4}, "files": [{"sha": "ca752490faa8d7b7a250ab15f45da2dc9206e905", "filename": "src/libstd/vec.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/2ff84124f0d39b20f49ce04f71d31322cdf1a327/src%2Flibstd%2Fvec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2ff84124f0d39b20f49ce04f71d31322cdf1a327/src%2Flibstd%2Fvec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fvec.rs?ref=2ff84124f0d39b20f49ce04f71d31322cdf1a327", "patch": "@@ -2106,7 +2106,8 @@ macro_rules! iterator {\n \n             #[inline]\n             fn size_hint(&self) -> (uint, Option<uint>) {\n-                let exact = self.indexable();\n+                let diff = (self.end as uint) - (self.ptr as uint);\n+                let exact = diff / sys::nonzero_size_of::<T>();\n                 (exact, Some(exact))\n             }\n         }\n@@ -2139,8 +2140,8 @@ macro_rules! random_access_iterator {\n         impl<'self, T> RandomAccessIterator<$elem> for $name<'self, T> {\n             #[inline]\n             fn indexable(&self) -> uint {\n-                let diff = (self.end as uint) - (self.ptr as uint);\n-                diff / sys::nonzero_size_of::<T>()\n+                let (exact, _) = self.size_hint();\n+                exact\n             }\n \n             fn idx(&self, index: uint) -> Option<$elem> {\n@@ -2181,7 +2182,6 @@ pub struct VecMutIterator<'self, T> {\n }\n iterator!{impl VecMutIterator -> &'self mut T}\n double_ended_iterator!{impl VecMutIterator -> &'self mut T}\n-random_access_iterator!{impl VecMutIterator -> &'self mut T}\n pub type MutRevIterator<'self, T> = Invert<VecMutIterator<'self, T>>;\n \n /// An iterator that moves out of a vector."}]}