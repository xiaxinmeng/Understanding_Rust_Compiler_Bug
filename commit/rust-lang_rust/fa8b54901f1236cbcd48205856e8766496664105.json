{"sha": "fa8b54901f1236cbcd48205856e8766496664105", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZhOGI1NDkwMWYxMjM2Y2JjZDQ4MjA1ODU2ZTg3NjY0OTY2NjQxMDU=", "commit": {"author": {"name": "avikozokin", "email": "kozokinavi@gmail.com", "date": "2019-12-02T18:12:51Z"}, "committer": {"name": "avikozokin", "email": "kozokinavi@gmail.com", "date": "2019-12-02T18:12:51Z"}, "message": "added correct error code for WSASocketW failure fallback", "tree": {"sha": "6b654fa4eee7ad72d52861b8b0cb946bab8fc550", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6b654fa4eee7ad72d52861b8b0cb946bab8fc550"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fa8b54901f1236cbcd48205856e8766496664105", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fa8b54901f1236cbcd48205856e8766496664105", "html_url": "https://github.com/rust-lang/rust/commit/fa8b54901f1236cbcd48205856e8766496664105", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fa8b54901f1236cbcd48205856e8766496664105/comments", "author": {"login": "AviKozokin", "id": 37381155, "node_id": "MDQ6VXNlcjM3MzgxMTU1", "avatar_url": "https://avatars.githubusercontent.com/u/37381155?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AviKozokin", "html_url": "https://github.com/AviKozokin", "followers_url": "https://api.github.com/users/AviKozokin/followers", "following_url": "https://api.github.com/users/AviKozokin/following{/other_user}", "gists_url": "https://api.github.com/users/AviKozokin/gists{/gist_id}", "starred_url": "https://api.github.com/users/AviKozokin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AviKozokin/subscriptions", "organizations_url": "https://api.github.com/users/AviKozokin/orgs", "repos_url": "https://api.github.com/users/AviKozokin/repos", "events_url": "https://api.github.com/users/AviKozokin/events{/privacy}", "received_events_url": "https://api.github.com/users/AviKozokin/received_events", "type": "User", "site_admin": false}, "committer": {"login": "AviKozokin", "id": 37381155, "node_id": "MDQ6VXNlcjM3MzgxMTU1", "avatar_url": "https://avatars.githubusercontent.com/u/37381155?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AviKozokin", "html_url": "https://github.com/AviKozokin", "followers_url": "https://api.github.com/users/AviKozokin/followers", "following_url": "https://api.github.com/users/AviKozokin/following{/other_user}", "gists_url": "https://api.github.com/users/AviKozokin/gists{/gist_id}", "starred_url": "https://api.github.com/users/AviKozokin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AviKozokin/subscriptions", "organizations_url": "https://api.github.com/users/AviKozokin/orgs", "repos_url": "https://api.github.com/users/AviKozokin/repos", "events_url": "https://api.github.com/users/AviKozokin/events{/privacy}", "received_events_url": "https://api.github.com/users/AviKozokin/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fdc0011561c6365c596dfd8fa1ef388162bc89c7", "url": "https://api.github.com/repos/rust-lang/rust/commits/fdc0011561c6365c596dfd8fa1ef388162bc89c7", "html_url": "https://github.com/rust-lang/rust/commit/fdc0011561c6365c596dfd8fa1ef388162bc89c7"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "2f2f285edc1c5ee443c2e80c50824f252199a4e2", "filename": "src/libstd/sys/windows/net.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/fa8b54901f1236cbcd48205856e8766496664105/src%2Flibstd%2Fsys%2Fwindows%2Fnet.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fa8b54901f1236cbcd48205856e8766496664105/src%2Flibstd%2Fsys%2Fwindows%2Fnet.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwindows%2Fnet.rs?ref=fa8b54901f1236cbcd48205856e8766496664105", "patch": "@@ -100,7 +100,7 @@ impl Socket {\n                                 c::WSA_FLAG_OVERLAPPED | c::WSA_FLAG_NO_HANDLE_INHERIT) {\n                 c::INVALID_SOCKET => {\n                     match c::WSAGetLastError() {\n-                        c::WSAEPROTOTYPE => {\n+                        c::WSAEPROTOTYPE | c::WSAEINVAL => {\n                             match c::WSASocketW(fam, ty, 0, ptr::null_mut(), 0,\n                                                 c::WSA_FLAG_OVERLAPPED) {\n                                 c::INVALID_SOCKET => Err(last_error()),\n@@ -199,7 +199,7 @@ impl Socket {\n                                 c::WSA_FLAG_OVERLAPPED | c::WSA_FLAG_NO_HANDLE_INHERIT) {\n                 c::INVALID_SOCKET => {\n                     match c::WSAGetLastError() {\n-                        c::WSAEPROTOTYPE => {\n+                        c::WSAEPROTOTYPE | c::WSAEINVAL => {\n                             match c::WSASocketW(info.iAddressFamily,\n                                                 info.iSocketType,\n                                                 info.iProtocol,"}]}