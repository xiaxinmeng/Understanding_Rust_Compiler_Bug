{"sha": "4e0695b79fbe5acc5ef1df82166b283368a643ac", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRlMDY5NWI3OWZiZTVhY2M1ZWYxZGY4MjE2NmIyODMzNjhhNjQzYWM=", "commit": {"author": {"name": "Dylan DPC", "email": "dylan.dpc@gmail.com", "date": "2020-11-09T18:06:57Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-11-09T18:06:57Z"}, "message": "Rollup merge of #78746 - pietroalbini:i686-freebsd, r=Mark-Simulacrum\n\nDemote i686-unknown-freebsd to tier 2 compiler target\n\nWhile technically the `i686-unknown-freebsd` target has been a tier 2 development platform for a long time, with full toolchain tarballs available on static.rust-lang.org, due to a bug in the manifest generation the target was never available for download through rustup.\n\nThe infrastructure team privately inquired the FreeBSD package maintainers, and they weren't relying on those tarballs either, so it's a fair assumption to say practically nobody is using those tarballs.\n\nThis PR then removes the CI builder that produces full tarballs for the target, and moves the compilation of `rust-std` for the target in `dist-various-2`. The `x86_64-unknown-freebsd` target is *not* affected.\n\ncc `@rust-lang/infra` `@rust-lang/compiler` `@rust-lang/release`\nr? `@Mark-Simulacrum`", "tree": {"sha": "928505d225f06e7f02cc23a4fdc8f24d51c90c75", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/928505d225f06e7f02cc23a4fdc8f24d51c90c75"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4e0695b79fbe5acc5ef1df82166b283368a643ac", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfqYVCCRBK7hj4Ov3rIwAAdHIIAEPIQTV9lsoyzi7IEed+DIns\nFQQPy84Gjw9o7MvxYTrywi4dVfI5Hnhc5Mf+zqglbFH0xKODu/mjWYp8qM8lvVyh\ngQf8L5xm0JlHEWl2iK+skiTpiaG009D108sHK+X6/V+Z2SVsDgIjUS946fQMDAjh\nd7MO0G2vV7G2MdzGmeyzdmNkC9FS2Yj0l9+xzZA4N+n2uempt3cQLi/U9vwlCM07\neI52efqUzZFX+/Vfihmg92+rNlzjUVsbnJ+x7Qe8jh2+x6szZgpem1zh2I82nVrR\n6YCbCnFaUFYZBjCbRHApI4ayi98XmA6OP18GQnFq1WH35xcQ4EyECA1RCTuP+JA=\n=RCIo\n-----END PGP SIGNATURE-----\n", "payload": "tree 928505d225f06e7f02cc23a4fdc8f24d51c90c75\nparent 8ebca242bc6797647147b1c178f0620f867710ac\nparent 53c1eb7a26b3e23086534cfcd94a8b3db9e2be23\nauthor Dylan DPC <dylan.dpc@gmail.com> 1604945217 +0100\ncommitter GitHub <noreply@github.com> 1604945217 +0100\n\nRollup merge of #78746 - pietroalbini:i686-freebsd, r=Mark-Simulacrum\n\nDemote i686-unknown-freebsd to tier 2 compiler target\n\nWhile technically the `i686-unknown-freebsd` target has been a tier 2 development platform for a long time, with full toolchain tarballs available on static.rust-lang.org, due to a bug in the manifest generation the target was never available for download through rustup.\n\nThe infrastructure team privately inquired the FreeBSD package maintainers, and they weren't relying on those tarballs either, so it's a fair assumption to say practically nobody is using those tarballs.\n\nThis PR then removes the CI builder that produces full tarballs for the target, and moves the compilation of `rust-std` for the target in `dist-various-2`. The `x86_64-unknown-freebsd` target is *not* affected.\n\ncc `@rust-lang/infra` `@rust-lang/compiler` `@rust-lang/release`\nr? `@Mark-Simulacrum`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4e0695b79fbe5acc5ef1df82166b283368a643ac", "html_url": "https://github.com/rust-lang/rust/commit/4e0695b79fbe5acc5ef1df82166b283368a643ac", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4e0695b79fbe5acc5ef1df82166b283368a643ac/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8ebca242bc6797647147b1c178f0620f867710ac", "url": "https://api.github.com/repos/rust-lang/rust/commits/8ebca242bc6797647147b1c178f0620f867710ac", "html_url": "https://github.com/rust-lang/rust/commit/8ebca242bc6797647147b1c178f0620f867710ac"}, {"sha": "53c1eb7a26b3e23086534cfcd94a8b3db9e2be23", "url": "https://api.github.com/repos/rust-lang/rust/commits/53c1eb7a26b3e23086534cfcd94a8b3db9e2be23", "html_url": "https://github.com/rust-lang/rust/commit/53c1eb7a26b3e23086534cfcd94a8b3db9e2be23"}], "stats": {"total": 49, "additions": 8, "deletions": 41}, "files": [{"sha": "84e39a4189eb4792b99db7e1e92bf476c038f468", "filename": ".github/workflows/ci.yml", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/4e0695b79fbe5acc5ef1df82166b283368a643ac/.github%2Fworkflows%2Fci.yml", "raw_url": "https://github.com/rust-lang/rust/raw/4e0695b79fbe5acc5ef1df82166b283368a643ac/.github%2Fworkflows%2Fci.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Fci.yml?ref=4e0695b79fbe5acc5ef1df82166b283368a643ac", "patch": "@@ -183,9 +183,6 @@ jobs:\n           - name: dist-i586-gnu-i586-i686-musl\n             os: ubuntu-latest-xl\n             env: {}\n-          - name: dist-i686-freebsd\n-            os: ubuntu-latest-xl\n-            env: {}\n           - name: dist-i686-linux\n             os: ubuntu-latest-xl\n             env: {}"}, {"sha": "7db6e58c4d688a018b2fe9fa9a26c02ba7b53e7b", "filename": "src/ci/docker/host-x86_64/dist-i686-freebsd/Dockerfile", "status": "removed", "additions": 0, "deletions": 34, "changes": 34, "blob_url": "https://github.com/rust-lang/rust/blob/8ebca242bc6797647147b1c178f0620f867710ac/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-i686-freebsd%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/8ebca242bc6797647147b1c178f0620f867710ac/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-i686-freebsd%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-i686-freebsd%2FDockerfile?ref=8ebca242bc6797647147b1c178f0620f867710ac", "patch": "@@ -1,34 +0,0 @@\n-FROM ubuntu:18.04\n-\n-RUN apt-get update && apt-get install -y --no-install-recommends \\\n-  clang \\\n-  make \\\n-  ninja-build \\\n-  file \\\n-  curl \\\n-  ca-certificates \\\n-  python3 \\\n-  git \\\n-  cmake \\\n-  sudo \\\n-  bzip2 \\\n-  xz-utils \\\n-  wget \\\n-  libssl-dev \\\n-  pkg-config\n-\n-COPY scripts/freebsd-toolchain.sh /tmp/\n-RUN /tmp/freebsd-toolchain.sh i686\n-\n-COPY scripts/sccache.sh /scripts/\n-RUN sh /scripts/sccache.sh\n-\n-ENV \\\n-    AR_i686_unknown_freebsd=i686-unknown-freebsd11-ar \\\n-    CC_i686_unknown_freebsd=i686-unknown-freebsd11-clang \\\n-    CXX_i686_unknown_freebsd=i686-unknown-freebsd11-clang++\n-\n-ENV HOSTS=i686-unknown-freebsd\n-\n-ENV RUST_CONFIGURE_ARGS --enable-extended --enable-profiler --disable-docs\n-ENV SCRIPT python3 ../x.py dist --host $HOSTS --target $HOSTS"}, {"sha": "b8b81ab327b0232d7d6583815d81ff9222b5285a", "filename": "src/ci/docker/host-x86_64/dist-various-2/Dockerfile", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/4e0695b79fbe5acc5ef1df82166b283368a643ac/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-various-2%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/4e0695b79fbe5acc5ef1df82166b283368a643ac/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-various-2%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-various-2%2FDockerfile?ref=4e0695b79fbe5acc5ef1df82166b283368a643ac", "patch": "@@ -48,6 +48,9 @@ ENV \\\n     CFLAGS_x86_64_fortanix_unknown_sgx=\"-mlvi-hardening -mllvm -x86-experimental-lvi-inline-asm-hardening\" \\\n     CXX_x86_64_fortanix_unknown_sgx=x86_64-fortanix-unknown-sgx-clang++-11 \\\n     CXXFLAGS_x86_64_fortanix_unknown_sgx=\"-mlvi-hardening -mllvm -x86-experimental-lvi-inline-asm-hardening\" \\\n+    AR_i686_unknown_freebsd=i686-unknown-freebsd11-ar \\\n+    CC_i686_unknown_freebsd=i686-unknown-freebsd11-clang \\\n+    CXX_i686_unknown_freebsd=i686-unknown-freebsd11-clang++ \\\n     CC=gcc-7 \\\n     CXX=g++-7\n \n@@ -74,6 +77,9 @@ RUN /tmp/build-x86_64-fortanix-unknown-sgx-toolchain.sh\n COPY host-x86_64/dist-various-2/build-wasi-toolchain.sh /tmp/\n RUN /tmp/build-wasi-toolchain.sh\n \n+COPY scripts/freebsd-toolchain.sh /tmp/\n+RUN /tmp/freebsd-toolchain.sh i686\n+\n COPY scripts/sccache.sh /scripts/\n RUN sh /scripts/sccache.sh\n \n@@ -99,6 +105,7 @@ ENV TARGETS=$TARGETS,x86_64-fortanix-unknown-sgx\n ENV TARGETS=$TARGETS,nvptx64-nvidia-cuda\n ENV TARGETS=$TARGETS,armv7-unknown-linux-gnueabi\n ENV TARGETS=$TARGETS,armv7-unknown-linux-musleabi\n+ENV TARGETS=$TARGETS,i686-unknown-freebsd\n \n # As per https://bugs.launchpad.net/ubuntu/+source/gcc-defaults/+bug/1300211\n # we need asm in the search path for gcc-7 (for gnux32) but not in the search path of the"}, {"sha": "031000d147cdfc1601a88ca853c7a74422677f7b", "filename": "src/ci/github-actions/ci.yml", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/4e0695b79fbe5acc5ef1df82166b283368a643ac/src%2Fci%2Fgithub-actions%2Fci.yml", "raw_url": "https://github.com/rust-lang/rust/raw/4e0695b79fbe5acc5ef1df82166b283368a643ac/src%2Fci%2Fgithub-actions%2Fci.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fgithub-actions%2Fci.yml?ref=4e0695b79fbe5acc5ef1df82166b283368a643ac", "patch": "@@ -328,9 +328,6 @@ jobs:\n           - name: dist-i586-gnu-i586-i686-musl\n             <<: *job-linux-xl\n \n-          - name: dist-i686-freebsd\n-            <<: *job-linux-xl\n-\n           - name: dist-i686-linux\n             <<: *job-linux-xl\n "}, {"sha": "215e5d3d1043ae2f12fc0f6986496b7e55e3193f", "filename": "src/doc/rustc/src/platform-support.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4e0695b79fbe5acc5ef1df82166b283368a643ac/src%2Fdoc%2Frustc%2Fsrc%2Fplatform-support.md", "raw_url": "https://github.com/rust-lang/rust/raw/4e0695b79fbe5acc5ef1df82166b283368a643ac/src%2Fdoc%2Frustc%2Fsrc%2Fplatform-support.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Frustc%2Fsrc%2Fplatform-support.md?ref=4e0695b79fbe5acc5ef1df82166b283368a643ac", "patch": "@@ -94,7 +94,7 @@ target | std | host | notes\n `i586-unknown-linux-gnu` | \u2713 |  | 32-bit Linux w/o SSE (kernel 4.4, glibc 2.23)\n `i586-unknown-linux-musl` | \u2713 |  | 32-bit Linux w/o SSE, MUSL\n `i686-linux-android` | \u2713 |  | 32-bit x86 Android\n-`i686-unknown-freebsd` | \u2713 | \u2713 | 32-bit FreeBSD\n+`i686-unknown-freebsd` | \u2713 |  | 32-bit FreeBSD\n `i686-unknown-linux-musl` | \u2713 |  | 32-bit Linux with MUSL\n `mips-unknown-linux-gnu` | \u2713 | \u2713 | MIPS Linux (kernel 4.4, glibc 2.23)\n `mips-unknown-linux-musl` | \u2713 |  | MIPS Linux with MUSL"}]}