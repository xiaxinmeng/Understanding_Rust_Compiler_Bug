{"sha": "abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFiZmE4YTk1MmM3NGE0MDllZTBkM2NjODBkODVkOTBjYzlkZTcwYWU=", "commit": {"author": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2019-08-02T06:13:54Z"}, "committer": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2019-08-02T16:16:35Z"}, "message": "Doctests: Fix all complexity lint docs\n\ncc #4319", "tree": {"sha": "03e66839f2770818e1b79bad29f08198a136e757", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/03e66839f2770818e1b79bad29f08198a136e757"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQJEBAABCgAuFiEEj4U0bmbiMSg/mWqvgqphyqETl+YFAl1EYeQQHGRldkBwaGFu\nc2NoLm5ldAAKCRCCqmHKoROX5itmEACgkXMdLfNGESHh/gdH+dwM250KoCnUMIMW\nT0Qv9Ccu+ebUv9ZjS9sLWFchA/b9Ot1nYcB8BpVZoFWr0VNABYJex5i2st9cv9L8\nvHh1xGLqJZ5GZn6BIdvmqStO72Xe74X5hm3PayVXQzS/Fd2wlEqmZG1hOwqaDKFl\nZR8PXs751pBcRAdvJ7NHNj3o9Yl2SKp5AVClGfDB2HPPjye9HIo3Ck021ihJVans\n/uttqW4kK8/Ff+AiS+KQlE8GwhyNsnIvSCO2i1VNnUYdaALqKYU1Iyk+ftfcMFRF\n/oSzwkFI34G7nMHX+B5NC0n+L97UnUBw1EJFtCoHEPxLkqojjS0Fj8Vfd5Z1+AQS\nOno/aQ3d1wtEKXTV1o1svONm+hgD+z4axYhLCkTkHJe5DrEe3dOZ4y5r7vYoIAYQ\nA0NfmXvnx7fNqTta14balSs1qfl+WiQ2JuKAv4Hi9G99871MZq0fpFOvRaUiC5Mv\ns5STiiSvmUxJFhMQ2Bcoq0WsxYJ0W9Wy3TT9Qo9eK7z3YWcUI6lg7mZ0ySMYUkeG\ndWfos+wCiubQMhuDCKMVBoeiCnD3EOnhFIfk1VSVDE7JjGSVA0/kQVEUMzhcOe0g\nFuMs4VUegl6i1s7Fw3MICVGRxoDe6E+eveg9ck9QzByMrPinEieHFWncGyK48l9Q\n/vpoRpSsfQ==\n=DRam\n-----END PGP SIGNATURE-----", "payload": "tree 03e66839f2770818e1b79bad29f08198a136e757\nparent 18a7dce4dac18728e03668e17fb685f43954751a\nauthor Philipp Hansch <dev@phansch.net> 1564726434 +0200\ncommitter Philipp Hansch <dev@phansch.net> 1564762595 +0200\n\nDoctests: Fix all complexity lint docs\n\ncc #4319\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "html_url": "https://github.com/rust-lang/rust/commit/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/comments", "author": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "18a7dce4dac18728e03668e17fb685f43954751a", "url": "https://api.github.com/repos/rust-lang/rust/commits/18a7dce4dac18728e03668e17fb685f43954751a", "html_url": "https://github.com/rust-lang/rust/commit/18a7dce4dac18728e03668e17fb685f43954751a"}], "stats": {"total": 238, "additions": 155, "deletions": 83}, "files": [{"sha": "ec4c8f5faa3fa9f456323b158c074a244bbf4c26", "filename": "clippy_lints/src/assign_ops.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fassign_ops.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fassign_ops.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fassign_ops.rs?ref=abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "patch": "@@ -45,7 +45,8 @@ declare_clippy_lint! {\n     /// **Example:**\n     /// ```rust\n     /// let mut a = 5;\n-    /// ...\n+    /// let b = 2;\n+    /// // ...\n     /// a += a + b;\n     /// ```\n     pub MISREFACTORED_ASSIGN_OP,"}, {"sha": "d48bfea73b3962663d34c79f61142c0a9ecf1db3", "filename": "clippy_lints/src/double_comparison.rs", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fdouble_comparison.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fdouble_comparison.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fdouble_comparison.rs?ref=abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "patch": "@@ -18,13 +18,17 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n-    /// x == y || x < y\n+    /// # let x = 1;\n+    /// # let y = 2;\n+    /// if x == y || x < y {}\n     /// ```\n     ///\n     /// Could be written as:\n     ///\n     /// ```rust\n-    /// x <= y\n+    /// # let x = 1;\n+    /// # let y = 2;\n+    /// if x <= y {}\n     /// ```\n     pub DOUBLE_COMPARISONS,\n     complexity,"}, {"sha": "e55490325eca1088f06abc65fcc162905f828edf", "filename": "clippy_lints/src/double_parens.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fdouble_parens.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fdouble_parens.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fdouble_parens.rs?ref=abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "patch": "@@ -13,9 +13,10 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n-    /// ((0))\n-    /// foo((0))\n-    /// ((1, 2))\n+    /// # fn foo(bar: usize) {}\n+    /// ((0));\n+    /// foo((0));\n+    /// ((1, 2));\n     /// ```\n     pub DOUBLE_PARENS,\n     complexity,"}, {"sha": "1346aea3ed0a76c2d70bc60b785167adad7122f3", "filename": "clippy_lints/src/duration_subsec.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fduration_subsec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fduration_subsec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fduration_subsec.rs?ref=abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "patch": "@@ -20,6 +20,7 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n+    /// # use std::time::Duration;\n     /// let dur = Duration::new(5, 0);\n     /// let _micros = dur.subsec_nanos() / 1_000;\n     /// let _millis = dur.subsec_nanos() / 1_000_000;"}, {"sha": "b915d50671b3b017390f2c7d1fc57a17c93bb003", "filename": "clippy_lints/src/eval_order_dependence.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Feval_order_dependence.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Feval_order_dependence.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Feval_order_dependence.rs?ref=abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "patch": "@@ -42,7 +42,9 @@ declare_clippy_lint! {\n     /// shorthand.\n     ///\n     /// **Example:**\n-    /// ```rust\n+    /// ```rust,no_run\n+    /// # fn b() -> bool { true }\n+    /// # fn c() -> bool { true }\n     /// let a = b() || panic!() || c();\n     /// // `c()` is dead, `panic!()` is only called if `b()` returns `false`\n     /// let x = (a, b, c, panic!());"}, {"sha": "a2edb4855b64e3ee1e6baeedaa2e5977c168ddbb", "filename": "clippy_lints/src/explicit_write.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fexplicit_write.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fexplicit_write.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fexplicit_write.rs?ref=abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "patch": "@@ -16,8 +16,10 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n+    /// # use std::io::Write;\n+    /// # let bar = \"furchtbar\";\n     /// // this would be clearer as `eprintln!(\"foo: {:?}\", bar);`\n-    /// writeln!(&mut io::stderr(), \"foo: {:?}\", bar).unwrap();\n+    /// writeln!(&mut std::io::stderr(), \"foo: {:?}\", bar).unwrap();\n     /// ```\n     pub EXPLICIT_WRITE,\n     complexity,"}, {"sha": "751d8fd00830638083b8d5eb861391136e9e9f87", "filename": "clippy_lints/src/format.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fformat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fformat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fformat.rs?ref=abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "patch": "@@ -26,8 +26,9 @@ declare_clippy_lint! {\n     ///\n     /// **Examples:**\n     /// ```rust\n-    /// format!(\"foo\")\n-    /// format!(\"{}\", foo)\n+    /// # let foo = \"foo\";\n+    /// format!(\"foo\");\n+    /// format!(\"{}\", foo);\n     /// ```\n     pub USELESS_FORMAT,\n     complexity,"}, {"sha": "9772a603ba0379dcbbdb2988b72a3bf082850ec2", "filename": "clippy_lints/src/functions.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Ffunctions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Ffunctions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ffunctions.rs?ref=abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "patch": "@@ -23,8 +23,9 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n+    /// # struct Color;\n     /// fn foo(x: u32, y: u32, name: &str, c: Color, w: f32, h: f32, a: f32, b: f32) {\n-    ///     ..\n+    ///     // ..\n     /// }\n     /// ```\n     pub TOO_MANY_ARGUMENTS,"}, {"sha": "1cd58a370945ad7b2e7e5f94d5c8a439defe87c3", "filename": "clippy_lints/src/identity_op.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fidentity_op.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fidentity_op.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fidentity_op.rs?ref=abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "patch": "@@ -17,7 +17,8 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n-    /// x / 1 + 0 * 1 - 0 | 0\n+    /// # let x = 1;\n+    /// x / 1 + 0 * 1 - 0 | 0;\n     /// ```\n     pub IDENTITY_OP,\n     complexity,"}, {"sha": "22ebf562d3ba16fd5eb98265d88b912aec30c5ec", "filename": "clippy_lints/src/int_plus_one.rs", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fint_plus_one.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fint_plus_one.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fint_plus_one.rs?ref=abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "patch": "@@ -17,13 +17,17 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n-    /// x >= y + 1\n+    /// # let x = 1;\n+    /// # let y = 1;\n+    /// if x >= y + 1 {}\n     /// ```\n     ///\n-    /// Could be written:\n+    /// Could be written as:\n     ///\n     /// ```rust\n-    /// x > y\n+    /// # let x = 1;\n+    /// # let y = 1;\n+    /// if x > y {}\n     /// ```\n     pub INT_PLUS_ONE,\n     complexity,"}, {"sha": "d05e815c23181f9d25c32789c859b119fec6c77a", "filename": "clippy_lints/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.rs?ref=abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "patch": "@@ -100,7 +100,7 @@ macro_rules! declare_clippy_lint {\n     };\n     { $(#[$attr:meta])* pub $name:tt, complexity, $description:tt } => {\n         declare_tool_lint! {\n-            pub clippy::$name, Warn, $description, report_in_external_macro: true\n+            $(#[$attr])* pub clippy::$name, Warn, $description, report_in_external_macro: true\n         }\n     };\n     { $(#[$attr:meta])* pub $name:tt, perf, $description:tt } => {"}, {"sha": "73d4a32574b250f994c0cec62bc9a0931c3fc6a2", "filename": "clippy_lints/src/lifetimes.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Flifetimes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Flifetimes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flifetimes.rs?ref=abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "patch": "@@ -47,7 +47,7 @@ declare_clippy_lint! {\n     /// **Example:**\n     /// ```rust\n     /// fn unused_lifetime<'a>(x: u8) {\n-    ///     ..\n+    ///     // ..\n     /// }\n     /// ```\n     pub EXTRA_UNUSED_LIFETIMES,"}, {"sha": "3c66c74324ea1193eea9fbc08796f9bb819b7968", "filename": "clippy_lints/src/loops.rs", "status": "modified", "additions": 9, "deletions": 5, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Floops.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Floops.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Floops.rs?ref=abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "patch": "@@ -217,18 +217,19 @@ declare_clippy_lint! {\n     /// **Known problems:** Sometimes the wrong binding is displayed (#383).\n     ///\n     /// **Example:**\n-    /// ```rust\n+    /// ```rust,no_run\n+    /// # let y = Some(1);\n     /// loop {\n     ///     let x = match y {\n     ///         Some(x) => x,\n     ///         None => break,\n-    ///     }\n+    ///     };\n     ///     // .. do something with x\n     /// }\n     /// // is easier written as\n     /// while let Some(x) = y {\n     ///     // .. do something with x\n-    /// }\n+    /// };\n     /// ```\n     pub WHILE_LET_LOOP,\n     complexity,\n@@ -309,8 +310,11 @@ declare_clippy_lint! {\n     /// **Known problems:** None.\n     ///\n     /// **Example:**\n-    /// ```ignore\n-    /// for i in 0..v.len() { foo(v[i]);\n+    /// ```rust\n+    /// # let v = vec![1];\n+    /// # fn foo(bar: usize) {}\n+    /// # fn bar(bar: usize, baz: usize) {}\n+    /// for i in 0..v.len() { foo(v[i]); }\n     /// for i in 0..v.len() { bar(i, v[i]); }\n     /// ```\n     pub EXPLICIT_COUNTER_LOOP,"}, {"sha": "22093bfbee84adcf9a04f2e04c19b8464bcc3394", "filename": "clippy_lints/src/map_unit_fn.rs", "status": "modified", "additions": 29, "deletions": 12, "changes": 41, "blob_url": "https://github.com/rust-lang/rust/blob/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fmap_unit_fn.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fmap_unit_fn.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmap_unit_fn.rs?ref=abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "patch": "@@ -20,20 +20,29 @@ declare_clippy_lint! {\n     /// **Example:**\n     ///\n     /// ```rust\n-    /// let x: Option<&str> = do_stuff();\n+    /// # fn do_stuff() -> Option<String> { Some(String::new()) }\n+    /// # fn log_err_msg(foo: String) -> Option<String> { Some(foo) }\n+    /// # fn format_msg(foo: String) -> String { String::new() }\n+    /// let x: Option<String> = do_stuff();\n     /// x.map(log_err_msg);\n-    /// x.map(|msg| log_err_msg(format_msg(msg)))\n+    /// # let x: Option<String> = do_stuff();\n+    /// x.map(|msg| log_err_msg(format_msg(msg)));\n     /// ```\n     ///\n     /// The correct use would be:\n     ///\n     /// ```rust\n-    /// let x: Option<&str> = do_stuff();\n+    /// # fn do_stuff() -> Option<String> { Some(String::new()) }\n+    /// # fn log_err_msg(foo: String) -> Option<String> { Some(foo) }\n+    /// # fn format_msg(foo: String) -> String { String::new() }\n+    /// let x: Option<String> = do_stuff();\n     /// if let Some(msg) = x {\n-    ///     log_err_msg(msg)\n+    ///     log_err_msg(msg);\n     /// }\n+    ///\n+    /// # let x: Option<String> = do_stuff();\n     /// if let Some(msg) = x {\n-    ///     log_err_msg(format_msg(msg))\n+    ///     log_err_msg(format_msg(msg));\n     /// }\n     /// ```\n     pub OPTION_MAP_UNIT_FN,\n@@ -53,21 +62,29 @@ declare_clippy_lint! {\n     /// **Example:**\n     ///\n     /// ```rust\n-    /// let x: Result<&str, &str> = do_stuff();\n+    /// # fn do_stuff() -> Result<String, String> { Ok(String::new()) }\n+    /// # fn log_err_msg(foo: String) -> Result<String, String> { Ok(foo) }\n+    /// # fn format_msg(foo: String) -> String { String::new() }\n+    /// let x: Result<String, String> = do_stuff();\n     /// x.map(log_err_msg);\n-    /// x.map(|msg| log_err_msg(format_msg(msg)))\n+    /// # let x: Result<String, String> = do_stuff();\n+    /// x.map(|msg| log_err_msg(format_msg(msg)));\n     /// ```\n     ///\n     /// The correct use would be:\n     ///\n     /// ```rust\n-    /// let x: Result<&str, &str> = do_stuff();\n+    /// # fn do_stuff() -> Result<String, String> { Ok(String::new()) }\n+    /// # fn log_err_msg(foo: String) -> Result<String, String> { Ok(foo) }\n+    /// # fn format_msg(foo: String) -> String { String::new() }\n+    /// let x: Result<String, String> = do_stuff();\n     /// if let Ok(msg) = x {\n-    ///     log_err_msg(msg)\n-    /// }\n+    ///     log_err_msg(msg);\n+    /// };\n+    /// # let x: Result<String, String> = do_stuff();\n     /// if let Ok(msg) = x {\n-    ///     log_err_msg(format_msg(msg))\n-    /// }\n+    ///     log_err_msg(format_msg(msg));\n+    /// };\n     /// ```\n     pub RESULT_MAP_UNIT_FN,\n     complexity,"}, {"sha": "473f3892f22f0e5144b745a10e9016ccfb5c8471", "filename": "clippy_lints/src/methods/mod.rs", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fmethods%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fmethods%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmethods%2Fmod.rs?ref=abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "patch": "@@ -247,7 +247,8 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n-    /// iter.filter(|x| x == 0).next()\n+    /// # let vec = vec![1];\n+    /// vec.iter().filter(|x| **x == 0).next();\n     /// ```\n     pub FILTER_NEXT,\n     complexity,\n@@ -345,7 +346,8 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n-    /// iter.find(|x| x == 0).is_some()\n+    /// # let vec = vec![1];\n+    /// vec.iter().find(|x| **x == 0).is_some();\n     /// ```\n     pub SEARCH_IS_SOME,\n     complexity,\n@@ -363,7 +365,8 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n-    /// name.chars().next() == Some('_')\n+    /// let name = \"foo\";\n+    /// name.chars().next() == Some('_');\n     /// ```\n     pub CHARS_NEXT_CMP,\n     complexity,\n@@ -434,7 +437,7 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n-    /// 42u64.clone()\n+    /// 42u64.clone();\n     /// ```\n     pub CLONE_ON_COPY,\n     complexity,\n@@ -708,11 +711,13 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n+    /// # fn do_stuff(x: &[i32]) {}\n     /// let x: &[i32] = &[1, 2, 3, 4, 5];\n     /// do_stuff(x.as_ref());\n     /// ```\n     /// The correct use would be:\n     /// ```rust\n+    /// # fn do_stuff(x: &[i32]) {}\n     /// let x: &[i32] = &[1, 2, 3, 4, 5];\n     /// do_stuff(x);\n     /// ```"}, {"sha": "6d24aa008fb93f836c4061fa9fccbc910e017433", "filename": "clippy_lints/src/misc.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fmisc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fmisc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmisc.rs?ref=abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "patch": "@@ -184,7 +184,7 @@ declare_clippy_lint! {\n     /// **Known problems:** None.\n     ///\n     /// **Example:**\n-    /// ```rust\n+    /// ```rust,ignore\n     /// f() && g(); // We should write `if f() { g(); }`.\n     /// ```\n     pub SHORT_CIRCUIT_STATEMENT,"}, {"sha": "7d6f29c521b37fb3a327531fbede4a7e988f03a8", "filename": "clippy_lints/src/misc_early.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fmisc_early.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fmisc_early.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmisc_early.rs?ref=abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "patch": "@@ -53,7 +53,7 @@ declare_clippy_lint! {\n     /// **Known problems:** None.\n     ///\n     /// **Example:**\n-    /// ```rust\n+    /// ```rust,ignore\n     /// (|| 42)()\n     /// ```\n     pub REDUNDANT_CLOSURE_CALL,"}, {"sha": "167f00fee517833a06745bf0384a1554ce09bc61", "filename": "clippy_lints/src/needless_bool.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fneedless_bool.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fneedless_bool.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fneedless_bool.rs?ref=abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "patch": "@@ -24,7 +24,7 @@ declare_clippy_lint! {\n     /// shorter code.\n     ///\n     /// **Example:**\n-    /// ```rust\n+    /// ```rust,ignore\n     /// if x {\n     ///     false\n     /// } else {\n@@ -46,7 +46,7 @@ declare_clippy_lint! {\n     /// **Known problems:** None.\n     ///\n     /// **Example:**\n-    /// ```rust\n+    /// ```rust,ignore\n     /// if x == true {} // could be `if x { }`\n     /// ```\n     pub BOOL_COMPARISON,"}, {"sha": "b6598ac55b38f001773c36d1a3fc3e0576ddda3c", "filename": "clippy_lints/src/needless_borrowed_ref.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fneedless_borrowed_ref.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fneedless_borrowed_ref.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fneedless_borrowed_ref.rs?ref=abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "patch": "@@ -18,16 +18,15 @@ declare_clippy_lint! {\n     ///\n     /// **Known problems:** It seems that the `&ref` pattern is sometimes useful.\n     /// For instance in the following snippet:\n-    /// ```rust\n+    /// ```rust,ignore\n     /// enum Animal {\n     ///     Cat(u64),\n     ///     Dog(u64),\n     /// }\n     ///\n     /// fn foo(a: &Animal, b: &Animal) {\n     ///     match (a, b) {\n-    /// (&Animal::Cat(v), k) | (k, &Animal::Cat(v)) => (), // lifetime\n-    /// mismatch error\n+    ///         (&Animal::Cat(v), k) | (k, &Animal::Cat(v)) => (), // lifetime mismatch error\n     ///         (&Animal::Dog(ref c), &Animal::Dog(_)) => ()\n     ///     }\n     /// }"}, {"sha": "fdaa14dfb6ae0f66b1628fe174cae76539eaeb17", "filename": "clippy_lints/src/needless_update.rs", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fneedless_update.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fneedless_update.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fneedless_update.rs?ref=abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "patch": "@@ -15,11 +15,17 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n+    /// # struct Point {\n+    /// #     x: i32,\n+    /// #     y: i32,\n+    /// #     z: i32,\n+    /// # }\n+    /// # let zero_point = Point { x: 0, y: 0, z: 0 };\n     /// Point {\n     ///     x: 1,\n-    ///     y: 0,\n+    ///     y: 1,\n     ///     ..zero_point\n-    /// }\n+    /// };\n     /// ```\n     pub NEEDLESS_UPDATE,\n     complexity,"}, {"sha": "2fe866a1d95ba8d6a537700f740698f3ad22e1d8", "filename": "clippy_lints/src/no_effect.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fno_effect.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fno_effect.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fno_effect.rs?ref=abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "patch": "@@ -34,7 +34,7 @@ declare_clippy_lint! {\n     /// **Known problems:** None.\n     ///\n     /// **Example:**\n-    /// ```rust\n+    /// ```rust,ignore\n     /// compute_array()[0];\n     /// ```\n     pub UNNECESSARY_OPERATION,"}, {"sha": "f4c301958b9eb9c6a27556731bf1ac8997b043b0", "filename": "clippy_lints/src/overflow_check_conditional.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Foverflow_check_conditional.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Foverflow_check_conditional.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Foverflow_check_conditional.rs?ref=abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "patch": "@@ -14,7 +14,9 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n-    /// a + b < a\n+    /// # let a = 1;\n+    /// # let b = 2;\n+    /// a + b < a;\n     /// ```\n     pub OVERFLOW_CHECK_CONDITIONAL,\n     complexity,"}, {"sha": "805efa7cf20ad743eee4f40624c7b0f4f97072d1", "filename": "clippy_lints/src/partialeq_ne_impl.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fpartialeq_ne_impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fpartialeq_ne_impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fpartialeq_ne_impl.rs?ref=abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "patch": "@@ -19,7 +19,7 @@ declare_clippy_lint! {\n     /// struct Foo;\n     ///\n     /// impl PartialEq for Foo {\n-    ///    fn eq(&self, other: &Foo) -> bool { ... }\n+    ///    fn eq(&self, other: &Foo) -> bool { true }\n     ///    fn ne(&self, other: &Foo) -> bool { !(self == other) }\n     /// }\n     /// ```"}, {"sha": "a0391e3364e19e655b6a1d390ce44e34f76c7064", "filename": "clippy_lints/src/ranges.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Franges.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Franges.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Franges.rs?ref=abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "patch": "@@ -40,7 +40,8 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n-    /// x.iter().zip(0..x.len())\n+    /// # let x = vec![1];\n+    /// x.iter().zip(0..x.len());\n     /// ```\n     pub RANGE_ZIP_WITH_LEN,\n     complexity,\n@@ -60,7 +61,7 @@ declare_clippy_lint! {\n     /// I.e., `let _ = (f()+1)..(f()+1)` results in `let _ = ((f()+1)..=f())`.\n     ///\n     /// **Example:**\n-    /// ```rust\n+    /// ```rust,ignore\n     /// for x..(y+1) { .. }\n     /// ```\n     pub RANGE_PLUS_ONE,\n@@ -78,7 +79,7 @@ declare_clippy_lint! {\n     /// **Known problems:** None.\n     ///\n     /// **Example:**\n-    /// ```rust\n+    /// ```rust,ignore\n     /// for x..=(y-1) { .. }\n     /// ```\n     pub RANGE_MINUS_ONE,"}, {"sha": "35e214faae804efc5f43b26eaa6c04d1aa178f77", "filename": "clippy_lints/src/reference.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Freference.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Freference.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Freference.rs?ref=abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "patch": "@@ -15,7 +15,7 @@ declare_clippy_lint! {\n     /// the suggested fix for `x = **&&y` is `x = *&y`, which is still incorrect.\n     ///\n     /// **Example:**\n-    /// ```rust\n+    /// ```rust,ignore\n     /// let a = f(*&mut b);\n     /// let c = *&d;\n     /// ```\n@@ -64,8 +64,8 @@ declare_clippy_lint! {\n     /// **Example:**\n     /// ```rust\n     /// struct Point(u32, u32);\n-    /// let point = Foo(30, 20);\n-    /// let x = (&point).x;\n+    /// let point = Point(30, 20);\n+    /// let x = (&point).0;\n     /// ```\n     pub REF_IN_DEREF,\n     complexity,"}, {"sha": "11ab5b8762821f11eb57ca54f2e55093238664e0", "filename": "clippy_lints/src/swap.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fswap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fswap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fswap.rs?ref=abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "patch": "@@ -20,12 +20,17 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n+    /// let mut a = 42;\n+    /// let mut b = 1337;\n+    ///\n     /// let t = b;\n     /// b = a;\n     /// a = t;\n     /// ```\n     /// Use std::mem::swap():\n     /// ```rust\n+    /// let mut a = 1;\n+    /// let mut b = 2;\n     /// std::mem::swap(&mut a, &mut b);\n     /// ```\n     pub MANUAL_SWAP,"}, {"sha": "bf4c5d65db639b4ab04f99cad850d2797b801f01", "filename": "clippy_lints/src/trait_bounds.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Ftrait_bounds.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Ftrait_bounds.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ftrait_bounds.rs?ref=abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "patch": "@@ -15,13 +15,13 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n-    /// pub fn foo<T>(t: T) where T: Copy, T: Clone\n+    /// pub fn foo<T>(t: T) where T: Copy, T: Clone {}\n     /// ```\n     ///\n     /// Could be written as:\n     ///\n     /// ```rust\n-    /// pub fn foo<T>(t: T) where T: Copy + Clone\n+    /// pub fn foo<T>(t: T) where T: Copy + Clone {}\n     /// ```\n     pub TYPE_REPETITION_IN_BOUNDS,\n     complexity,"}, {"sha": "a514b9c512dbaca6514c1f85cc84d5cdec7dca69", "filename": "clippy_lints/src/transmute.rs", "status": "modified", "additions": 24, "deletions": 11, "changes": 35, "blob_url": "https://github.com/rust-lang/rust/blob/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Ftransmute.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Ftransmute.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ftransmute.rs?ref=abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "patch": "@@ -36,8 +36,8 @@ declare_clippy_lint! {\n     /// **Known problems:** None.\n     ///\n     /// **Example:**\n-    /// ```rust\n-    /// core::intrinsics::transmute(t) // where the result type is the same as `t`'s\n+    /// ```rust,ignore\n+    /// core::intrinsics::transmute(t); // where the result type is the same as `t`'s\n     /// ```\n     pub USELESS_TRANSMUTE,\n     complexity,\n@@ -53,7 +53,7 @@ declare_clippy_lint! {\n     /// **Known problems:** None.\n     ///\n     /// **Example:**\n-    /// ```rust\n+    /// ```rust,ignore\n     /// core::intrinsics::transmute(t) // where the result type is the same as\n     ///                                // `*t` or `&t`'s\n     /// ```\n@@ -70,8 +70,10 @@ declare_clippy_lint! {\n     /// **Known problems:** None.\n     ///\n     /// **Example:**\n-    /// ```rust\n-    /// let _: &T = std::mem::transmute(p); // where p: *const T\n+    /// ```rust,ignore\n+    /// unsafe {\n+    ///     let _: &T = std::mem::transmute(p); // where p: *const T\n+    /// }\n     ///\n     /// // can be written:\n     /// let _: &T = &*p;\n@@ -99,7 +101,10 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n-    /// let _: char = std::mem::transmute(x); // where x: u32\n+    /// let x = 1_u32;\n+    /// unsafe {\n+    ///     let _: char = std::mem::transmute(x); // where x: u32\n+    /// }\n     ///\n     /// // should be:\n     /// let _ = std::char::from_u32(x).unwrap();\n@@ -127,7 +132,10 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n-    /// let _: &str = std::mem::transmute(b); // where b: &[u8]\n+    /// let b: &[u8] = &[1_u8, 2_u8];\n+    /// unsafe {\n+    ///     let _: &str = std::mem::transmute(b); // where b: &[u8]\n+    /// }\n     ///\n     /// // should be:\n     /// let _ = std::str::from_utf8(b).unwrap();\n@@ -146,7 +154,10 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n-    /// let _: bool = std::mem::transmute(x); // where x: u8\n+    /// let x = 1_u8;\n+    /// unsafe {\n+    ///     let _: bool = std::mem::transmute(x); // where x: u8\n+    /// }\n     ///\n     /// // should be:\n     /// let _: bool = x != 0;\n@@ -166,10 +177,12 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n-    /// let _: f32 = std::mem::transmute(x); // where x: u32\n+    /// unsafe {\n+    ///     let _: f32 = std::mem::transmute(1_u32); // where x: u32\n+    /// }\n     ///\n     /// // should be:\n-    /// let _: f32 = f32::from_bits(x);\n+    /// let _: f32 = f32::from_bits(1_u32);\n     /// ```\n     pub TRANSMUTE_INT_TO_FLOAT,\n     complexity,\n@@ -195,7 +208,7 @@ declare_clippy_lint! {\n     ///     let _: &f32 = std::mem::transmute(&1u32);\n     /// }\n     /// // These can be respectively written:\n-    /// let _ = ptr as *const f32\n+    /// let _ = ptr as *const f32;\n     /// let _ = unsafe{ &*(&1u32 as *const u32 as *const f32) };\n     /// ```\n     pub TRANSMUTE_PTR_TO_PTR,"}, {"sha": "838ec76704d093f028039145567efca4c6a5c077", "filename": "clippy_lints/src/types.rs", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ftypes.rs?ref=abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "patch": "@@ -557,7 +557,7 @@ declare_clippy_lint! {\n     /// **Known problems:** None.\n     ///\n     /// **Example:**\n-    /// ```rust\n+    /// ```rust,ignore\n     /// foo({\n     ///     let a = bar();\n     ///     baz(a);\n@@ -775,7 +775,7 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n-    /// let _ = 2i32 as i32\n+    /// let _ = 2i32 as i32;\n     /// ```\n     pub UNNECESSARY_CAST,\n     complexity,\n@@ -1295,6 +1295,7 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n+    /// # use std::rc::Rc;\n     /// struct Foo {\n     ///     inner: Rc<Vec<Vec<Box<(u32, u32, u32, u32)>>>>,\n     /// }\n@@ -1458,13 +1459,13 @@ declare_clippy_lint! {\n     /// **Known problems:** None.\n     ///\n     /// **Example:**\n-    /// ```rust\n+    /// ```rust,ignore\n     /// 'x' as u8\n     /// ```\n     ///\n     /// A better version, using the byte literal:\n     ///\n-    /// ```rust\n+    /// ```rust,ignore\n     /// b'x'\n     /// ```\n     pub CHAR_LIT_AS_U8,"}, {"sha": "811bdce18e89eb44e597852f315b93a8d360552b", "filename": "clippy_lints/src/utils/author.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Futils%2Fauthor.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Futils%2Fauthor.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fauthor.rs?ref=abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "patch": "@@ -15,7 +15,7 @@ declare_clippy_lint! {\n     /// **What it does:** Generates clippy code that detects the offending pattern\n     ///\n     /// **Example:**\n-    /// ```rust\n+    /// ```rust,ignore\n     /// // ./tests/ui/my_lint.rs\n     /// fn foo() {\n     ///     // detect the following pattern\n@@ -24,13 +24,14 @@ declare_clippy_lint! {\n     ///         // but ignore everything from here on\n     ///         #![clippy::author = \"ignore\"]\n     ///     }\n+    ///     ()\n     /// }\n     /// ```\n     ///\n     /// Running `TESTNAME=ui/my_lint cargo uitest` will produce\n     /// a `./tests/ui/new_lint.stdout` file with the generated code:\n     ///\n-    /// ```rust\n+    /// ```rust,ignore\n     /// // ./tests/ui/new_lint.stdout\n     /// if_chain! {\n     ///     if let ExprKind::If(ref cond, ref then, None) = item.node,"}, {"sha": "48dc98c05565e44ab46ff8a5d6037684b66eb7d6", "filename": "clippy_lints/src/utils/inspector.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Futils%2Finspector.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Futils%2Finspector.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Finspector.rs?ref=abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "patch": "@@ -13,14 +13,14 @@ declare_clippy_lint! {\n     /// attribute\n     ///\n     /// **Example:**\n-    /// ```rust\n+    /// ```rust,ignore\n     /// #[clippy::dump]\n     /// extern crate foo;\n     /// ```\n     ///\n     /// prints\n     ///\n-    /// ```\n+    /// ```text\n     /// item `foo`\n     /// visibility inherited from outer item\n     /// extern crate dylib source: \"/path/to/foo.so\""}, {"sha": "0dcac1121842b8bc3fdce6c5f60ab0529af7fa39", "filename": "clippy_lints/src/utils/internal_lints.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Futils%2Finternal_lints.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Futils%2Finternal_lints.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Finternal_lints.rs?ref=abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "patch": "@@ -38,7 +38,7 @@ declare_clippy_lint! {\n     /// `declare_lint_pass!`, `impl_lint_pass!`, and `lint_array!` macros.\n     ///\n     /// **Example:**\n-    /// ```rust\n+    /// ```rust,ignore\n     /// declare_lint! { pub LINT_1, ... }\n     /// declare_lint! { pub LINT_2, ... }\n     /// declare_lint! { pub FORGOTTEN_LINT, ... }\n@@ -62,12 +62,12 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// Bad:\n-    /// ```rust\n+    /// ```rust,ignore\n     /// cx.span_lint(LINT_NAME, \"message\");\n     /// ```\n     ///\n     /// Good:\n-    /// ```rust\n+    /// ```rust,ignore\n     /// utils::span_lint(cx, LINT_NAME, \"message\");\n     /// ```\n     pub COMPILER_LINT_FUNCTIONS,\n@@ -85,12 +85,12 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// Bad:\n-    /// ```rust\n+    /// ```rust,ignore\n     /// expr.span.ctxt().outer().expn_info()\n     /// ```\n     ///\n     /// Good:\n-    /// ```rust\n+    /// ```rust,ignore\n     /// expr.span.ctxt().outer_expn_info()\n     /// ```\n     pub OUTER_EXPN_EXPN_INFO,"}, {"sha": "1c4c54f2626739f50fa2af16765956f68c2bbd78", "filename": "clippy_lints/src/zero_div_zero.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fzero_div_zero.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abfa8a952c74a409ee0d3cc80d85d90cc9de70ae/clippy_lints%2Fsrc%2Fzero_div_zero.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fzero_div_zero.rs?ref=abfa8a952c74a409ee0d3cc80d85d90cc9de70ae", "patch": "@@ -15,7 +15,7 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n-    /// 0.0f32 / 0.0\n+    /// 0.0f32 / 0.0;\n     /// ```\n     pub ZERO_DIVIDED_BY_ZERO,\n     complexity,"}]}