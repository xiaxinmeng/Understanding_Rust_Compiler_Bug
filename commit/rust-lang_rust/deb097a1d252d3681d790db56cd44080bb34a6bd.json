{"sha": "deb097a1d252d3681d790db56cd44080bb34a6bd", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRlYjA5N2ExZDI1MmQzNjgxZDc5MGRiNTZjZDQ0MDgwYmIzNGE2YmQ=", "commit": {"author": {"name": "Simonas Kazlauskas", "email": "git@kazlauskas.me", "date": "2015-03-03T22:57:44Z"}, "committer": {"name": "Simonas Kazlauskas", "email": "git@kazlauskas.me", "date": "2015-04-03T12:48:07Z"}, "message": "Implement LLVMGetOrInsertGlobal wrapper", "tree": {"sha": "78a86a7bb2b787c9b2ae25afd14ddd9ceba14882", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/78a86a7bb2b787c9b2ae25afd14ddd9ceba14882"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/deb097a1d252d3681d790db56cd44080bb34a6bd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/deb097a1d252d3681d790db56cd44080bb34a6bd", "html_url": "https://github.com/rust-lang/rust/commit/deb097a1d252d3681d790db56cd44080bb34a6bd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/deb097a1d252d3681d790db56cd44080bb34a6bd/comments", "author": {"login": "nagisa", "id": 679122, "node_id": "MDQ6VXNlcjY3OTEyMg==", "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nagisa", "html_url": "https://github.com/nagisa", "followers_url": "https://api.github.com/users/nagisa/followers", "following_url": "https://api.github.com/users/nagisa/following{/other_user}", "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}", "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions", "organizations_url": "https://api.github.com/users/nagisa/orgs", "repos_url": "https://api.github.com/users/nagisa/repos", "events_url": "https://api.github.com/users/nagisa/events{/privacy}", "received_events_url": "https://api.github.com/users/nagisa/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nagisa", "id": 679122, "node_id": "MDQ6VXNlcjY3OTEyMg==", "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nagisa", "html_url": "https://github.com/nagisa", "followers_url": "https://api.github.com/users/nagisa/followers", "following_url": "https://api.github.com/users/nagisa/following{/other_user}", "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}", "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions", "organizations_url": "https://api.github.com/users/nagisa/orgs", "repos_url": "https://api.github.com/users/nagisa/repos", "events_url": "https://api.github.com/users/nagisa/events{/privacy}", "received_events_url": "https://api.github.com/users/nagisa/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cb4570311bda1789761a98997bbe57ac6c794101", "url": "https://api.github.com/repos/rust-lang/rust/commits/cb4570311bda1789761a98997bbe57ac6c794101", "html_url": "https://github.com/rust-lang/rust/commit/cb4570311bda1789761a98997bbe57ac6c794101"}], "stats": {"total": 7, "additions": 7, "deletions": 0}, "files": [{"sha": "7030ee5697954e11944e0108b207e573a8ecb7fc", "filename": "src/librustc_llvm/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/deb097a1d252d3681d790db56cd44080bb34a6bd/src%2Flibrustc_llvm%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/deb097a1d252d3681d790db56cd44080bb34a6bd/src%2Flibrustc_llvm%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_llvm%2Flib.rs?ref=deb097a1d252d3681d790db56cd44080bb34a6bd", "patch": "@@ -912,6 +912,7 @@ extern {\n                                        AddressSpace: c_uint)\n                                        -> ValueRef;\n     pub fn LLVMGetNamedGlobal(M: ModuleRef, Name: *const c_char) -> ValueRef;\n+    pub fn LLVMGetOrInsertGlobal(M: ModuleRef, Name: *const c_char, T: TypeRef) -> ValueRef;\n     pub fn LLVMGetFirstGlobal(M: ModuleRef) -> ValueRef;\n     pub fn LLVMGetLastGlobal(M: ModuleRef) -> ValueRef;\n     pub fn LLVMGetNextGlobal(GlobalVar: ValueRef) -> ValueRef;"}, {"sha": "31f75ae03b0998688132ec9c75a311dac3e806ba", "filename": "src/rustllvm/RustWrapper.cpp", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/deb097a1d252d3681d790db56cd44080bb34a6bd/src%2Frustllvm%2FRustWrapper.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/deb097a1d252d3681d790db56cd44080bb34a6bd/src%2Frustllvm%2FRustWrapper.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustllvm%2FRustWrapper.cpp?ref=deb097a1d252d3681d790db56cd44080bb34a6bd", "patch": "@@ -89,6 +89,12 @@ extern \"C\" LLVMValueRef LLVMGetOrInsertFunction(LLVMModuleRef M,\n                                              unwrap<FunctionType>(FunctionTy)));\n }\n \n+extern \"C\" LLVMValueRef LLVMGetOrInsertGlobal(LLVMModuleRef M,\n+                                              const char* Name,\n+                                              LLVMTypeRef Ty) {\n+  return wrap(unwrap(M)->getOrInsertGlobal(Name, unwrap(Ty)));\n+}\n+\n extern \"C\" LLVMTypeRef LLVMMetadataTypeInContext(LLVMContextRef C) {\n   return wrap(Type::getMetadataTy(*unwrap(C)));\n }"}]}