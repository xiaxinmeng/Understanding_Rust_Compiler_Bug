{"sha": "1f6b05e955f5e6972305c04cda1895107cca36f8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFmNmIwNWU5NTVmNWU2OTcyMzA1YzA0Y2RhMTg5NTEwN2NjYTM2Zjg=", "commit": {"author": {"name": "Ticki", "email": "Ticki@users.noreply.github.com", "date": "2016-03-21T20:13:50Z"}, "committer": {"name": "Ticki", "email": "Ticki@users.noreply.github.com", "date": "2016-03-22T08:58:23Z"}, "message": "Add tests", "tree": {"sha": "5a300bd2d69fa086a47fdde57a0f2e63beb06461", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5a300bd2d69fa086a47fdde57a0f2e63beb06461"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1f6b05e955f5e6972305c04cda1895107cca36f8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1f6b05e955f5e6972305c04cda1895107cca36f8", "html_url": "https://github.com/rust-lang/rust/commit/1f6b05e955f5e6972305c04cda1895107cca36f8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1f6b05e955f5e6972305c04cda1895107cca36f8/comments", "author": {"login": "ticki", "id": 13349091, "node_id": "MDQ6VXNlcjEzMzQ5MDkx", "avatar_url": "https://avatars.githubusercontent.com/u/13349091?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ticki", "html_url": "https://github.com/ticki", "followers_url": "https://api.github.com/users/ticki/followers", "following_url": "https://api.github.com/users/ticki/following{/other_user}", "gists_url": "https://api.github.com/users/ticki/gists{/gist_id}", "starred_url": "https://api.github.com/users/ticki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ticki/subscriptions", "organizations_url": "https://api.github.com/users/ticki/orgs", "repos_url": "https://api.github.com/users/ticki/repos", "events_url": "https://api.github.com/users/ticki/events{/privacy}", "received_events_url": "https://api.github.com/users/ticki/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ticki", "id": 13349091, "node_id": "MDQ6VXNlcjEzMzQ5MDkx", "avatar_url": "https://avatars.githubusercontent.com/u/13349091?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ticki", "html_url": "https://github.com/ticki", "followers_url": "https://api.github.com/users/ticki/followers", "following_url": "https://api.github.com/users/ticki/following{/other_user}", "gists_url": "https://api.github.com/users/ticki/gists{/gist_id}", "starred_url": "https://api.github.com/users/ticki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ticki/subscriptions", "organizations_url": "https://api.github.com/users/ticki/orgs", "repos_url": "https://api.github.com/users/ticki/repos", "events_url": "https://api.github.com/users/ticki/events{/privacy}", "received_events_url": "https://api.github.com/users/ticki/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1605ab377bc2c9be97df2cfbab00e011d526e316", "url": "https://api.github.com/repos/rust-lang/rust/commits/1605ab377bc2c9be97df2cfbab00e011d526e316", "html_url": "https://github.com/rust-lang/rust/commit/1605ab377bc2c9be97df2cfbab00e011d526e316"}], "stats": {"total": 71, "additions": 70, "deletions": 1}, "files": [{"sha": "698913be292adbc6de6f0b1fdc5789e8c40b25e1", "filename": "src/libsyntax/feature_gate.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1f6b05e955f5e6972305c04cda1895107cca36f8/src%2Flibsyntax%2Ffeature_gate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f6b05e955f5e6972305c04cda1895107cca36f8/src%2Flibsyntax%2Ffeature_gate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Ffeature_gate.rs?ref=1f6b05e955f5e6972305c04cda1895107cca36f8", "patch": "@@ -212,7 +212,7 @@ const KNOWN_FEATURES: &'static [(&'static str, &'static str, Option<u32>, Status\n     // rust runtime internal\n     (\"unwind_attributes\", \"1.4.0\", None, Active),\n \n-\t// allow the use of `#[naked]` on functions.\n+    // allow the use of `#[naked]` on functions.\n     (\"naked_functions\", \"1.9.0\", None, Active),\n \n     // allow empty structs and enum variants with braces"}, {"sha": "0a600f4acad1fc6855e0714eedfaed09f081235b", "filename": "src/test/codegen/naked-functions.rs", "status": "added", "additions": 69, "deletions": 0, "changes": 69, "blob_url": "https://github.com/rust-lang/rust/blob/1f6b05e955f5e6972305c04cda1895107cca36f8/src%2Ftest%2Fcodegen%2Fnaked-functions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f6b05e955f5e6972305c04cda1895107cca36f8/src%2Ftest%2Fcodegen%2Fnaked-functions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fnaked-functions.rs?ref=1f6b05e955f5e6972305c04cda1895107cca36f8", "patch": "@@ -0,0 +1,69 @@\n+// Copyright 2015 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// ignore-tidy-linelength\n+\n+// compile-flags: -C no-prepopulate-passes\n+\n+#![crate_type = \"lib\"]\n+#![feature(naked_functions)]\n+\n+// CHECK: Function Attrs: naked uwtable\n+// CHECK-NEXT: define internal void @naked_empty()\n+#[no_mangle]\n+#[naked]\n+fn naked_empty() {\n+    // CHECK: ret void\n+}\n+\n+// CHECK: Function Attrs: naked uwtable\n+#[no_mangle]\n+#[naked]\n+// CHECK-NEXT: define internal void @naked_with_args(i{{[0-9]+}})\n+fn naked_with_args(a: isize) {\n+    // CHECK: %a = alloca i{{[0-9]+}}\n+    // CHECK: ret void\n+}\n+\n+// CHECK: Function Attrs: naked uwtable\n+// CHECK-NEXT: define internal i{{[0-9]+}} @naked_with_return()\n+#[no_mangle]\n+#[naked]\n+fn naked_with_return() -> isize {\n+    // CHECK: ret i{{[0-9]+}} 0\n+    0\n+}\n+\n+// CHECK: Function Attrs: naked uwtable\n+// CHECK-NEXT: define internal i{{[0-9]+}} @naked_with_args_and_return(i{{[0-9]+}})\n+#[no_mangle]\n+#[naked]\n+fn naked_with_args_and_return(a: isize) -> isize {\n+    // CHECK: %a = alloca i{{[0-9]+}}\n+    // CHECK: ret i{{[0-9]+}} %{{[0-9]+}}\n+    a\n+}\n+\n+// CHECK: Function Attrs: naked uwtable\n+// CHECK-NEXT: define internal void @naked_recursive()\n+#[no_mangle]\n+#[naked]\n+fn naked_recursive() {\n+    // CHECK: call void @naked_empty()\n+    naked_empty();\n+    // CHECK: %{{[0-9]+}} = call i{{[0-9]+}} @naked_with_return()\n+    naked_with_args(\n+        // CHECK: %{{[0-9]+}} = call i{{[0-9]+}} @naked_with_args_and_return(i{{[0-9]+}} %{{[0-9]+}})\n+        naked_with_args_and_return(\n+            // CHECK: call void @naked_with_args(i{{[0-9]+}} %{{[0-9]+}})\n+            naked_with_return()\n+        )\n+    );\n+}"}]}