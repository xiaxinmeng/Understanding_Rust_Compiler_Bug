{"sha": "ebbcad9ae018e9c6bbd65c573a21783c8fbc0095", "node_id": "MDY6Q29tbWl0NzI0NzEyOmViYmNhZDlhZTAxOGU5YzZiYmQ2NWM1NzNhMjE3ODNjOGZiYzAwOTU=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2017-10-15T11:45:14Z"}, "committer": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2017-10-20T20:55:33Z"}, "message": "Fix rustbuild --color conflict when building on Travis outside of Docker.", "tree": {"sha": "6a7bf825efa799761bc28c90bd970419f0655d41", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6a7bf825efa799761bc28c90bd970419f0655d41"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ebbcad9ae018e9c6bbd65c573a21783c8fbc0095", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZ1R8CLMp8f2GxWoQ/vbIBR0OATwFAlnqYsUACgkQ/vbIBR0O\nATytFg/+NHKZJoKDU5XMw7SORrd5lyj7eSu721vE4KaR3LIN52OfZY1WIMVerxPU\nsRKSL+V9M6lkqJTIi5SdGaSnBmsbH+kwixHaOy5v9S4zVzciiBeewhfwOmKCjyf+\nnZ3j/bZRnWH/hfiG+9P4kPbz9evt8NCqEE6tBkCaQW6xhGLY9F9OcC1ga+YRG0mu\nHv69vqi3GzA1ODriFYWuHuiMv/OFeNMTTADJMeytLsMeOhfCNq/bHKfmI78xqIHl\n4G2HywaB+pdftRi/Yq59XoqnkNrEpqKgnPkALcOLZdu2Ld5ItjlJniIK3xD0LeaO\nAkqu8pBQBc2BHTRtL3Dj227eKtM8Vo3obUATH8EQUL4ptOxAr4QyKLxpaxkUCqZP\nUhfbRJq57fr+577MVq3UJz/MN5A1m4nVFUgH+4OUMIIP94EmdqB2thgnLAxWsVK8\nBl1fHSLhuHCTeuAqQnVQaC09Cq6ZxFVjmQfQQfTEhqqdJmfQzBiHYZIIWLypsxMZ\nheM9DoPlFo1tK2PAHKZtPiXzxKCxUGznPPKRLy2U2hTGlj3V2fYW8tHXF5r0yntg\n7YaADKSx1L2q1QFUamOtpK7/7KwS3749nnHcWLdmmP9Hu8rUlS7If8DondqQHnIW\npp32NsyZbeu7xAggqeHTui7L9v6g/Bm1oZkJMk8zR/eUPJ2sSW8=\n=DOOq\n-----END PGP SIGNATURE-----", "payload": "tree 6a7bf825efa799761bc28c90bd970419f0655d41\nparent b633341c49498488b6e3fce501e23e9f9f8fadec\nauthor kennytm <kennytm@gmail.com> 1508067914 +0800\ncommitter kennytm <kennytm@gmail.com> 1508532933 +0800\n\nFix rustbuild --color conflict when building on Travis outside of Docker.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ebbcad9ae018e9c6bbd65c573a21783c8fbc0095", "html_url": "https://github.com/rust-lang/rust/commit/ebbcad9ae018e9c6bbd65c573a21783c8fbc0095", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ebbcad9ae018e9c6bbd65c573a21783c8fbc0095/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b633341c49498488b6e3fce501e23e9f9f8fadec", "url": "https://api.github.com/repos/rust-lang/rust/commits/b633341c49498488b6e3fce501e23e9f9f8fadec", "html_url": "https://github.com/rust-lang/rust/commit/b633341c49498488b6e3fce501e23e9f9f8fadec"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "a8162f0a92fb304d0e666834b980c84b2caa2edc", "filename": "src/bootstrap/compile.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ebbcad9ae018e9c6bbd65c573a21783c8fbc0095/src%2Fbootstrap%2Fcompile.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ebbcad9ae018e9c6bbd65c573a21783c8fbc0095/src%2Fbootstrap%2Fcompile.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fcompile.rs?ref=ebbcad9ae018e9c6bbd65c573a21783c8fbc0095", "patch": "@@ -29,7 +29,7 @@ use build_helper::{output, mtime, up_to_date};\n use filetime::FileTime;\n use serde_json;\n \n-use util::{exe, libdir, is_dylib, copy, read_stamp_file};\n+use util::{exe, libdir, is_dylib, copy, read_stamp_file, CiEnv};\n use {Build, Compiler, Mode};\n use native;\n use tool;\n@@ -792,7 +792,7 @@ fn run_cargo(build: &Build, cargo: &mut Command, stamp: &Path) {\n     cargo.arg(\"--message-format\").arg(\"json\")\n          .stdout(Stdio::piped());\n \n-    if stderr_isatty() {\n+    if stderr_isatty() && build.ci_env == CiEnv::None {\n         // since we pass message-format=json to cargo, we need to tell the rustc\n         // wrapper to give us colored output if necessary. This is because we\n         // only want Cargo's JSON output, not rustcs."}]}