{"sha": "d503fff28ef8498e9e4ba9fb36f63f6905e882a7", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ1MDNmZmYyOGVmODQ5OGU5ZTRiYTlmYjM2ZjYzZjY5MDVlODgyYTc=", "commit": {"author": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2013-12-20T02:53:59Z"}, "committer": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2013-12-26T21:01:27Z"}, "message": "librustc: De-`@mut` `resolve::Module::populated`", "tree": {"sha": "5b7f6ef20022232d908ab25e441e647e59f6b11c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5b7f6ef20022232d908ab25e441e647e59f6b11c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d503fff28ef8498e9e4ba9fb36f63f6905e882a7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d503fff28ef8498e9e4ba9fb36f63f6905e882a7", "html_url": "https://github.com/rust-lang/rust/commit/d503fff28ef8498e9e4ba9fb36f63f6905e882a7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d503fff28ef8498e9e4ba9fb36f63f6905e882a7/comments", "author": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a1ee3810b82e4947d872c6d74c9d246fe4d2853d", "url": "https://api.github.com/repos/rust-lang/rust/commits/a1ee3810b82e4947d872c6d74c9d246fe4d2853d", "html_url": "https://github.com/rust-lang/rust/commit/a1ee3810b82e4947d872c6d74c9d246fe4d2853d"}], "stats": {"total": 10, "additions": 5, "deletions": 5}, "files": [{"sha": "e2bd6d35366bf75d1b34f67ff76c42f17fe822d6", "filename": "src/librustc/middle/resolve.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/d503fff28ef8498e9e4ba9fb36f63f6905e882a7/src%2Flibrustc%2Fmiddle%2Fresolve.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d503fff28ef8498e9e4ba9fb36f63f6905e882a7/src%2Flibrustc%2Fmiddle%2Fresolve.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fresolve.rs?ref=d503fff28ef8498e9e4ba9fb36f63f6905e882a7", "patch": "@@ -455,7 +455,7 @@ struct Module {\n     // Whether this module is populated. If not populated, any attempt to\n     // access the children must be preceded with a\n     // `populate_module_if_necessary` call.\n-    populated: bool,\n+    populated: Cell<bool>,\n }\n \n impl Module {\n@@ -477,7 +477,7 @@ impl Module {\n             import_resolutions: @mut HashMap::new(),\n             glob_count: 0,\n             resolved_import_count: 0,\n-            populated: !external,\n+            populated: Cell::new(!external),\n         }\n     }\n \n@@ -1887,16 +1887,16 @@ impl Resolver {\n                                                             child_ident,\n                                                             visibility)\n         });\n-        module.populated = true\n+        module.populated.set(true)\n     }\n \n     /// Ensures that the reduced graph rooted at the given external module\n     /// is built, building it if it is not.\n     fn populate_module_if_necessary(&mut self, module: @mut Module) {\n-        if !module.populated {\n+        if !module.populated.get() {\n             self.populate_external_module(module)\n         }\n-        assert!(module.populated)\n+        assert!(module.populated.get())\n     }\n \n     /// Builds the reduced graph rooted at the 'use' directive for an external"}]}