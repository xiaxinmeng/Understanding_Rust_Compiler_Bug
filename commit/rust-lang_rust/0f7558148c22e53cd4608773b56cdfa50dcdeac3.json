{"sha": "0f7558148c22e53cd4608773b56cdfa50dcdeac3", "node_id": "C_kwDOAAsO6NoAKDBmNzU1ODE0OGMyMmU1M2NkNDYwODc3M2I1NmNkZmE1MGRjZGVhYzM", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-02-10T10:58:06Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-02-10T10:58:06Z"}, "message": "Auto merge of #10314 - flip1995:clippy_dev-cli-fix, r=xFrednet\n\nFix CLI of clippy_dev\n\nClap was updated in rust-lang/rust-clippy#10270, which broke the command line of clippy_dev. This swaps out contains_id, which now returns always true in the places it was used with get_flag.\n\nr? `@xFrednet`\n\nThis should also fix https://rust-lang.zulipchat.com/#narrow/stream/257328-clippy/topic/.60cargo.20dev.20setup.20intellij.60.20is.20degraded/near/325770850\n\nchangelog: none", "tree": {"sha": "5a276f0150b984b74e0beb3601e6cda4dc206b99", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5a276f0150b984b74e0beb3601e6cda4dc206b99"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0f7558148c22e53cd4608773b56cdfa50dcdeac3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0f7558148c22e53cd4608773b56cdfa50dcdeac3", "html_url": "https://github.com/rust-lang/rust/commit/0f7558148c22e53cd4608773b56cdfa50dcdeac3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0f7558148c22e53cd4608773b56cdfa50dcdeac3/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a7fecd6911b0702da504a4b0adc2ea11e3a2b24c", "url": "https://api.github.com/repos/rust-lang/rust/commits/a7fecd6911b0702da504a4b0adc2ea11e3a2b24c", "html_url": "https://github.com/rust-lang/rust/commit/a7fecd6911b0702da504a4b0adc2ea11e3a2b24c"}, {"sha": "fabada0c816de9bc2780afad3a1f1bcf50159b08", "url": "https://api.github.com/repos/rust-lang/rust/commits/fabada0c816de9bc2780afad3a1f1bcf50159b08", "html_url": "https://github.com/rust-lang/rust/commit/fabada0c816de9bc2780afad3a1f1bcf50159b08"}], "stats": {"total": 28, "additions": 14, "deletions": 14}, "files": [{"sha": "e2457e5a8a5e9215d8f18fefd32ca379a723b972", "filename": "clippy_dev/src/main.rs", "status": "modified", "additions": 14, "deletions": 14, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/0f7558148c22e53cd4608773b56cdfa50dcdeac3/clippy_dev%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0f7558148c22e53cd4608773b56cdfa50dcdeac3/clippy_dev%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_dev%2Fsrc%2Fmain.rs?ref=0f7558148c22e53cd4608773b56cdfa50dcdeac3", "patch": "@@ -11,22 +11,22 @@ fn main() {\n \n     match matches.subcommand() {\n         Some((\"bless\", matches)) => {\n-            bless::bless(matches.contains_id(\"ignore-timestamp\"));\n+            bless::bless(matches.get_flag(\"ignore-timestamp\"));\n         },\n         Some((\"dogfood\", matches)) => {\n             dogfood::dogfood(\n-                matches.contains_id(\"fix\"),\n-                matches.contains_id(\"allow-dirty\"),\n-                matches.contains_id(\"allow-staged\"),\n+                matches.get_flag(\"fix\"),\n+                matches.get_flag(\"allow-dirty\"),\n+                matches.get_flag(\"allow-staged\"),\n             );\n         },\n         Some((\"fmt\", matches)) => {\n-            fmt::run(matches.contains_id(\"check\"), matches.contains_id(\"verbose\"));\n+            fmt::run(matches.get_flag(\"check\"), matches.get_flag(\"verbose\"));\n         },\n         Some((\"update_lints\", matches)) => {\n-            if matches.contains_id(\"print-only\") {\n+            if matches.get_flag(\"print-only\") {\n                 update_lints::print_lints();\n-            } else if matches.contains_id(\"check\") {\n+            } else if matches.get_flag(\"check\") {\n                 update_lints::update(update_lints::UpdateMode::Check);\n             } else {\n                 update_lints::update(update_lints::UpdateMode::Change);\n@@ -38,15 +38,15 @@ fn main() {\n                 matches.get_one::<String>(\"name\"),\n                 matches.get_one::<String>(\"category\").map(String::as_str),\n                 matches.get_one::<String>(\"type\").map(String::as_str),\n-                matches.contains_id(\"msrv\"),\n+                matches.get_flag(\"msrv\"),\n             ) {\n                 Ok(_) => update_lints::update(update_lints::UpdateMode::Change),\n                 Err(e) => eprintln!(\"Unable to create lint: {e}\"),\n             }\n         },\n         Some((\"setup\", sub_command)) => match sub_command.subcommand() {\n             Some((\"intellij\", matches)) => {\n-                if matches.contains_id(\"remove\") {\n+                if matches.get_flag(\"remove\") {\n                     setup::intellij::remove_rustc_src();\n                 } else {\n                     setup::intellij::setup_rustc_src(\n@@ -57,17 +57,17 @@ fn main() {\n                 }\n             },\n             Some((\"git-hook\", matches)) => {\n-                if matches.contains_id(\"remove\") {\n+                if matches.get_flag(\"remove\") {\n                     setup::git_hook::remove_hook();\n                 } else {\n-                    setup::git_hook::install_hook(matches.contains_id(\"force-override\"));\n+                    setup::git_hook::install_hook(matches.get_flag(\"force-override\"));\n                 }\n             },\n             Some((\"vscode-tasks\", matches)) => {\n-                if matches.contains_id(\"remove\") {\n+                if matches.get_flag(\"remove\") {\n                     setup::vscode::remove_tasks();\n                 } else {\n-                    setup::vscode::install_tasks(matches.contains_id(\"force-override\"));\n+                    setup::vscode::install_tasks(matches.get_flag(\"force-override\"));\n                 }\n             },\n             _ => {},\n@@ -91,7 +91,7 @@ fn main() {\n         Some((\"rename_lint\", matches)) => {\n             let old_name = matches.get_one::<String>(\"old_name\").unwrap();\n             let new_name = matches.get_one::<String>(\"new_name\").unwrap_or(old_name);\n-            let uplift = matches.contains_id(\"uplift\");\n+            let uplift = matches.get_flag(\"uplift\");\n             update_lints::rename(old_name, new_name, uplift);\n         },\n         Some((\"deprecate\", matches)) => {"}]}