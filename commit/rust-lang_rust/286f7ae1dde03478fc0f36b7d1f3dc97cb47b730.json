{"sha": "286f7ae1dde03478fc0f36b7d1f3dc97cb47b730", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI4NmY3YWUxZGRlMDM0NzhmYzBmMzZiN2QxZjNkYzk3Y2I0N2I3MzA=", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2018-11-09T02:11:37Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2018-11-22T22:14:27Z"}, "message": "Join multiple E0191 errors in the same location under a single diagnostic", "tree": {"sha": "0a164e55cbc0dc07c1e5d935ebefb6619ba1d448", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0a164e55cbc0dc07c1e5d935ebefb6619ba1d448"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/286f7ae1dde03478fc0f36b7d1f3dc97cb47b730", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/286f7ae1dde03478fc0f36b7d1f3dc97cb47b730", "html_url": "https://github.com/rust-lang/rust/commit/286f7ae1dde03478fc0f36b7d1f3dc97cb47b730", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/286f7ae1dde03478fc0f36b7d1f3dc97cb47b730/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "abdcb868ff69a5f6a96dd188ff845a1ec67335f8", "url": "https://api.github.com/repos/rust-lang/rust/commits/abdcb868ff69a5f6a96dd188ff845a1ec67335f8", "html_url": "https://github.com/rust-lang/rust/commit/abdcb868ff69a5f6a96dd188ff845a1ec67335f8"}], "stats": {"total": 60, "additions": 33, "deletions": 27}, "files": [{"sha": "906b800ee447233f187ec0346b213659c87793fe", "filename": "src/librustc_typeck/astconv.rs", "status": "modified", "additions": 20, "deletions": 7, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/286f7ae1dde03478fc0f36b7d1f3dc97cb47b730/src%2Flibrustc_typeck%2Fastconv.rs", "raw_url": "https://github.com/rust-lang/rust/raw/286f7ae1dde03478fc0f36b7d1f3dc97cb47b730/src%2Flibrustc_typeck%2Fastconv.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fastconv.rs?ref=286f7ae1dde03478fc0f36b7d1f3dc97cb47b730", "patch": "@@ -1029,18 +1029,31 @@ impl<'o, 'gcx: 'tcx, 'tcx> dyn AstConv<'gcx, 'tcx>+'o {\n             associated_types.remove(&projection_bound.projection_def_id());\n         }\n \n-        for item_def_id in associated_types {\n-            let assoc_item = tcx.associated_item(item_def_id);\n-            let trait_def_id = assoc_item.container.id();\n+        if !associated_types.is_empty() {\n+            let names = associated_types.iter().map(|item_def_id| {\n+                let assoc_item = tcx.associated_item(*item_def_id);\n+                let trait_def_id = assoc_item.container.id();\n+                format!(\n+                    \"`{}` (from the trait `{}`)\",\n+                    assoc_item.ident,\n+                    tcx.item_path_str(trait_def_id),\n+                )\n+            }).collect::<Vec<_>>().join(\", \");\n             let mut err = struct_span_err!(\n                 tcx.sess,\n                 span,\n                 E0191,\n-                \"the value of the associated type `{}` (from the trait `{}`) must be specified\",\n-                assoc_item.ident,\n-                tcx.item_path_str(trait_def_id),\n+                \"the value of the associated type{} {} must be specified\",\n+                if associated_types.len() == 1 { \"\" } else { \"s\" },\n+                names,\n             );\n-            err.span_label(span, format!(\"missing associated type `{}` value\", assoc_item.ident));\n+            for item_def_id in associated_types {\n+                let assoc_item = tcx.associated_item(item_def_id);\n+                err.span_label(\n+                    span,\n+                    format!(\"missing associated type `{}` value\", assoc_item.ident),\n+                );\n+            }\n             err.emit();\n         }\n "}, {"sha": "e575fd695b2db2bcf50b6f703d6df2083f42022a", "filename": "src/test/ui/associated-types/associated-types-incomplete-object.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/286f7ae1dde03478fc0f36b7d1f3dc97cb47b730/src%2Ftest%2Fui%2Fassociated-types%2Fassociated-types-incomplete-object.rs", "raw_url": "https://github.com/rust-lang/rust/raw/286f7ae1dde03478fc0f36b7d1f3dc97cb47b730/src%2Ftest%2Fui%2Fassociated-types%2Fassociated-types-incomplete-object.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fassociated-types%2Fassociated-types-incomplete-object.rs?ref=286f7ae1dde03478fc0f36b7d1f3dc97cb47b730", "patch": "@@ -37,6 +37,5 @@ pub fn main() {\n     //~^ ERROR the value of the associated type `A` (from the trait `Foo`) must be specified\n \n     let d = &42isize as &Foo;\n-    //~^ ERROR the value of the associated type `A` (from the trait `Foo`) must be specified\n-    //~| ERROR the value of the associated type `B` (from the trait `Foo`) must be specified\n+    //~^ ERROR the value of the associated types `A` (from the trait `Foo`), `B` (from the trait\n }"}, {"sha": "5a3c243efd084af19ad135194ceea7ac1411805e", "filename": "src/test/ui/associated-types/associated-types-incomplete-object.stderr", "status": "modified", "additions": 6, "deletions": 9, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/286f7ae1dde03478fc0f36b7d1f3dc97cb47b730/src%2Ftest%2Fui%2Fassociated-types%2Fassociated-types-incomplete-object.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/286f7ae1dde03478fc0f36b7d1f3dc97cb47b730/src%2Ftest%2Fui%2Fassociated-types%2Fassociated-types-incomplete-object.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fassociated-types%2Fassociated-types-incomplete-object.stderr?ref=286f7ae1dde03478fc0f36b7d1f3dc97cb47b730", "patch": "@@ -10,18 +10,15 @@ error[E0191]: the value of the associated type `A` (from the trait `Foo`) must b\n LL |     let c = &42isize as &Foo<B=char>;\n    |                          ^^^^^^^^^^^ missing associated type `A` value\n \n-error[E0191]: the value of the associated type `A` (from the trait `Foo`) must be specified\n-  --> $DIR/associated-types-incomplete-object.rs:39:26\n-   |\n-LL |     let d = &42isize as &Foo;\n-   |                          ^^^ missing associated type `A` value\n-\n-error[E0191]: the value of the associated type `B` (from the trait `Foo`) must be specified\n+error[E0191]: the value of the associated types `A` (from the trait `Foo`), `B` (from the trait `Foo`) must be specified\n   --> $DIR/associated-types-incomplete-object.rs:39:26\n    |\n LL |     let d = &42isize as &Foo;\n-   |                          ^^^ missing associated type `B` value\n+   |                          ^^^\n+   |                          |\n+   |                          missing associated type `A` value\n+   |                          missing associated type `B` value\n \n-error: aborting due to 4 previous errors\n+error: aborting due to 3 previous errors\n \n For more information about this error, try `rustc --explain E0191`."}, {"sha": "f779ca1e0b131ceab4927b2a76fa553c78c025b8", "filename": "src/test/ui/error-codes/E0107-b.stderr", "status": "modified", "additions": 6, "deletions": 9, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/286f7ae1dde03478fc0f36b7d1f3dc97cb47b730/src%2Ftest%2Fui%2Ferror-codes%2FE0107-b.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/286f7ae1dde03478fc0f36b7d1f3dc97cb47b730/src%2Ftest%2Fui%2Ferror-codes%2FE0107-b.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferror-codes%2FE0107-b.stderr?ref=286f7ae1dde03478fc0f36b7d1f3dc97cb47b730", "patch": "@@ -6,19 +6,16 @@ LL |  pub struct Foo { i: Box<T<usize, usize, usize, usize, B=usize>> }\n    |                                          |\n    |                                          unexpected type argument\n \n-error[E0191]: the value of the associated type `A` (from the trait `T`) must be specified\n+error[E0191]: the value of the associated types `A` (from the trait `T`), `C` (from the trait `T`) must be specified\n   --> $DIR/E0107-b.rs:6:26\n    |\n LL |  pub struct Foo { i: Box<T<usize, usize, usize, usize, B=usize>> }\n-   |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ missing associated type `A` value\n+   |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   |                          |\n+   |                          missing associated type `A` value\n+   |                          missing associated type `C` value\n \n-error[E0191]: the value of the associated type `C` (from the trait `T`) must be specified\n-  --> $DIR/E0107-b.rs:6:26\n-   |\n-LL |  pub struct Foo { i: Box<T<usize, usize, usize, usize, B=usize>> }\n-   |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ missing associated type `C` value\n-\n-error: aborting due to 3 previous errors\n+error: aborting due to 2 previous errors\n \n Some errors occurred: E0107, E0191.\n For more information about an error, try `rustc --explain E0107`."}]}