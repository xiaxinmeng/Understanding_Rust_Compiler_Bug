{"sha": "d8c04b13a2a6eaba375bb79c1bda7ec78f820e7e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ4YzA0YjEzYTJhNmVhYmEzNzViYjc5YzFiZGE3ZWM3OGY4MjBlN2U=", "commit": {"author": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2021-04-05T21:24:17Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-04-05T21:24:17Z"}, "message": "Rollup merge of #83885 - jyn514:private-links, r=Mark-Simulacrum\n\nDocument compiler/ with -Aprivate-intra-doc-links\n\nSince compiler/ always passes --document-private-items, it's ok to link to items that are private.", "tree": {"sha": "4ae1e5837c00634449b6529cdf352d627fb9a902", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4ae1e5837c00634449b6529cdf352d627fb9a902"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d8c04b13a2a6eaba375bb79c1bda7ec78f820e7e", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJga4ABCRBK7hj4Ov3rIwAAdHIIAF7C/jtNU4Ttz/hboS97ONl0\nTHVtsQum2V6pxBtFfb6iRC1dL/oBFD+l6HncLIxN+l6VLzjagkLM5ssFxT9y2Qgm\nnu2765lGllozEtPsPYcNFGZUYkBd4ZnJI24L+VP2orgGthn5kXEK69XraCHrrluM\nKFij7/ZJ1I8WmPN0oZ5pJE3+c5Ye0CU6U12S3XHDZECXiWLXx6gwVo2pKCRDc9ua\nsZM4P6Xye56uhNaPBV3PbALm1r2/eNVommHiJsF1A3uVZ7/X0ZUQm4UMjInhHJ5c\nEz+1+3Pv0/dOt5hcarbTjvWtH+eb38rSY6n/lODnWyJCJsJguh76OBieBBNLzUY=\n=ekmh\n-----END PGP SIGNATURE-----\n", "payload": "tree 4ae1e5837c00634449b6529cdf352d627fb9a902\nparent fb6eb4ad93afdfb7a2ccef2728fe252109331448\nparent 0a351abf83f1d146e2d259d404fb16a158721391\nauthor Yuki Okushi <jtitor@2k36.org> 1617657857 +0900\ncommitter GitHub <noreply@github.com> 1617657857 +0900\n\nRollup merge of #83885 - jyn514:private-links, r=Mark-Simulacrum\n\nDocument compiler/ with -Aprivate-intra-doc-links\n\nSince compiler/ always passes --document-private-items, it's ok to link to items that are private.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d8c04b13a2a6eaba375bb79c1bda7ec78f820e7e", "html_url": "https://github.com/rust-lang/rust/commit/d8c04b13a2a6eaba375bb79c1bda7ec78f820e7e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d8c04b13a2a6eaba375bb79c1bda7ec78f820e7e/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fb6eb4ad93afdfb7a2ccef2728fe252109331448", "url": "https://api.github.com/repos/rust-lang/rust/commits/fb6eb4ad93afdfb7a2ccef2728fe252109331448", "html_url": "https://github.com/rust-lang/rust/commit/fb6eb4ad93afdfb7a2ccef2728fe252109331448"}, {"sha": "0a351abf83f1d146e2d259d404fb16a158721391", "url": "https://api.github.com/repos/rust-lang/rust/commits/0a351abf83f1d146e2d259d404fb16a158721391", "html_url": "https://github.com/rust-lang/rust/commit/0a351abf83f1d146e2d259d404fb16a158721391"}], "stats": {"total": 11, "additions": 2, "deletions": 9}, "files": [{"sha": "282877d5dd10962f9c7be3e66e0e96189d9529fc", "filename": "compiler/rustc_errors/src/diagnostic_builder.rs", "status": "modified", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/d8c04b13a2a6eaba375bb79c1bda7ec78f820e7e/compiler%2Frustc_errors%2Fsrc%2Fdiagnostic_builder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d8c04b13a2a6eaba375bb79c1bda7ec78f820e7e/compiler%2Frustc_errors%2Fsrc%2Fdiagnostic_builder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_errors%2Fsrc%2Fdiagnostic_builder.rs?ref=d8c04b13a2a6eaba375bb79c1bda7ec78f820e7e", "patch": "@@ -45,9 +45,6 @@ macro_rules! forward {\n         pub fn $n:ident(&self, $($name:ident: $ty:ty),* $(,)?) -> &Self\n     ) => {\n         $(#[$attrs])*\n-        // we always document with --document-private-items\n-        #[cfg_attr(not(bootstrap), allow(rustdoc::private_intra_doc_links))]\n-        #[cfg_attr(bootstrap, allow(private_intra_doc_links))]\n         #[doc = concat!(\"See [`Diagnostic::\", stringify!($n), \"()`].\")]\n         pub fn $n(&self, $($name: $ty),*) -> &Self {\n             self.diagnostic.$n($($name),*);\n@@ -62,9 +59,6 @@ macro_rules! forward {\n     ) => {\n         $(#[$attrs])*\n         #[doc = concat!(\"See [`Diagnostic::\", stringify!($n), \"()`].\")]\n-        // we always document with --document-private-items\n-        #[cfg_attr(not(bootstrap), allow(rustdoc::private_intra_doc_links))]\n-        #[cfg_attr(bootstrap, allow(private_intra_doc_links))]\n         pub fn $n(&mut self, $($name: $ty),*) -> &mut Self {\n             self.0.diagnostic.$n($($name),*);\n             self\n@@ -82,9 +76,6 @@ macro_rules! forward {\n     ) => {\n         $(#[$attrs])*\n         #[doc = concat!(\"See [`Diagnostic::\", stringify!($n), \"()`].\")]\n-        // we always document with --document-private-items\n-        #[cfg_attr(not(bootstrap), allow(rustdoc::private_intra_doc_links))]\n-        #[cfg_attr(bootstrap, allow(private_intra_doc_links))]\n         pub fn $n<$($generic: $bound),*>(&mut self, $($name: $ty),*) -> &mut Self {\n             self.0.diagnostic.$n($($name),*);\n             self"}, {"sha": "f499f1a684d1d56a7d5cd370265dbd7b1db6273d", "filename": "src/bootstrap/doc.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d8c04b13a2a6eaba375bb79c1bda7ec78f820e7e/src%2Fbootstrap%2Fdoc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d8c04b13a2a6eaba375bb79c1bda7ec78f820e7e/src%2Fbootstrap%2Fdoc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fdoc.rs?ref=d8c04b13a2a6eaba375bb79c1bda7ec78f820e7e", "patch": "@@ -549,6 +549,8 @@ impl Step for Rustc {\n         // Build cargo command.\n         let mut cargo = builder.cargo(compiler, Mode::Rustc, SourceType::InTree, target, \"doc\");\n         cargo.rustdocflag(\"--document-private-items\");\n+        // Since we always pass --document-private-items, there's no need to warn about linking to private items.\n+        cargo.rustdocflag(\"-Arustdoc::private-intra-doc-links\");\n         cargo.rustdocflag(\"--enable-index-page\");\n         cargo.rustdocflag(\"-Zunstable-options\");\n         cargo.rustdocflag(\"-Znormalize-docs\");"}]}