{"sha": "07e3f998b1ceb4b8d2a7992782e60f5e776aa114", "node_id": "C_kwDOAAsO6NoAKDA3ZTNmOTk4YjFjZWI0YjhkMmE3OTkyNzgyZTYwZjVlNzc2YWExMTQ", "commit": {"author": {"name": "cynecx", "email": "me@cynecx.net", "date": "2021-10-10T17:08:08Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2021-11-29T10:07:18Z"}, "message": "rustdoc: merge source sidebar into main sidebar", "tree": {"sha": "dc7f54bca92053b5585b4a5cae30a4ef43558524", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/dc7f54bca92053b5585b4a5cae30a4ef43558524"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/07e3f998b1ceb4b8d2a7992782e60f5e776aa114", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/07e3f998b1ceb4b8d2a7992782e60f5e776aa114", "html_url": "https://github.com/rust-lang/rust/commit/07e3f998b1ceb4b8d2a7992782e60f5e776aa114", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/07e3f998b1ceb4b8d2a7992782e60f5e776aa114/comments", "author": {"login": "cynecx", "id": 5961244, "node_id": "MDQ6VXNlcjU5NjEyNDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5961244?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cynecx", "html_url": "https://github.com/cynecx", "followers_url": "https://api.github.com/users/cynecx/followers", "following_url": "https://api.github.com/users/cynecx/following{/other_user}", "gists_url": "https://api.github.com/users/cynecx/gists{/gist_id}", "starred_url": "https://api.github.com/users/cynecx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cynecx/subscriptions", "organizations_url": "https://api.github.com/users/cynecx/orgs", "repos_url": "https://api.github.com/users/cynecx/repos", "events_url": "https://api.github.com/users/cynecx/events{/privacy}", "received_events_url": "https://api.github.com/users/cynecx/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1e98fb10274ea0245f865ddb1e295e454382000b", "url": "https://api.github.com/repos/rust-lang/rust/commits/1e98fb10274ea0245f865ddb1e295e454382000b", "html_url": "https://github.com/rust-lang/rust/commit/1e98fb10274ea0245f865ddb1e295e454382000b"}], "stats": {"total": 92, "additions": 41, "deletions": 51}, "files": [{"sha": "a99507a215dd34d2cfe125fb2457db97b328872c", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 31, "deletions": 32, "changes": 63, "blob_url": "https://github.com/rust-lang/rust/blob/07e3f998b1ceb4b8d2a7992782e60f5e776aa114/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/07e3f998b1ceb4b8d2a7992782e60f5e776aa114/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=07e3f998b1ceb4b8d2a7992782e60f5e776aa114", "patch": "@@ -311,7 +311,6 @@ li {\n }\n \n .source .content {\n-\tmargin-top: 50px;\n \tmax-width: none;\n \toverflow: visible;\n \tmargin-left: 0px;\n@@ -335,7 +334,15 @@ nav.sub {\n }\n \n .source .sidebar {\n-\tdisplay: none;\n+\twidth: unset;\n+\tmin-width: 0px;\n+\tmax-width: 300px;\n+\tflex-grow: 0;\n+\tflex-shrink: 0;\n+\tflex-basis: auto;\n+\tborder-right: 1px solid;\n+\ttransition: width .5s;\n+\toverflow-x: hidden;\n }\n \n /* Improve the scrollbar display on firefox */\n@@ -367,18 +374,6 @@ nav.sub {\n \tdisplay: none !important;\n }\n \n-.logo-source {\n-\tdisplay: none;\n-}\n-\n-.source .logo-source {\n-\tdisplay: block;\n-\tposition: absolute;\n-\ttop: 0;\n-\tleft: 0;\n-\twidth: 200px;\n-}\n-\n .logo-container {\n \theight: 100px;\n \twidth: 100px;\n@@ -742,7 +737,7 @@ nav:not(.sidebar) {\n \tmargin-bottom: 25px;\n }\n .source nav:not(.sidebar).sub {\n-\tmargin-left: 230px;\n+\tmargin-left: 32px;\n }\n nav.main {\n \tpadding: 20px 0;\n@@ -1367,15 +1362,9 @@ pre.rust {\n \tborder-left: 0;\n }\n #source-sidebar {\n-\tposition: fixed;\n-\ttop: 0;\n-\tbottom: 0;\n-\tleft: 0;\n \twidth: 300px;\n \tz-index: 1;\n \toverflow: auto;\n-\ttransition: left .5s;\n-\tborder-right: 1px solid;\n }\n #source-sidebar > .title {\n \tfont-size: 1.5em;\n@@ -1696,7 +1685,7 @@ details.rustdoc-toggle[open] > summary.hideme::after {\n \t\tflex-direction: column;\n \t}\n \n-\t.rustdoc > .sidebar {\n+\t.rustdoc:not(.source) > .sidebar {\n \t\twidth: 100%;\n \t\theight: 45px;\n \t\tmin-height: 40px;\n@@ -1707,6 +1696,14 @@ details.rustdoc-toggle[open] > summary.hideme::after {\n \t\tz-index: 11;\n \t}\n \n+\t.rustdoc.source > .sidebar {\n+\t\tposition: fixed;\n+\t\ttop: 0;\n+\t\tleft: 0;\n+\t\tmargin: 0;\n+\t\tz-index: 11;\n+\t}\n+\n \t.sidebar > .location {\n \t\tfloat: right;\n \t\tmargin: 0px;\n@@ -1722,13 +1719,19 @@ details.rustdoc-toggle[open] > summary.hideme::after {\n \t\tpadding: 0;\n \t}\n \n-\t.sidebar .logo-container {\n+\t.rustdoc.source .sidebar .logo-container {\n+\t\twidth: 100%;\n+\t\theight: 45px;\n+\t\tmargin: 0 auto;\n+\t}\n+\n+\t.rustdoc:not(.source) .sidebar .logo-container {\n \t\twidth: 35px;\n-\t\theight: 35px;\n-\t\tmargin-top: 5px;\n-\t\tmargin-bottom: 5px;\n-\t\tfloat: left;\n-\t\tmargin-left: 50px;\n+\t    height: 35px;\n+\t    margin-top: 5px;\n+\t    margin-bottom: 5px;\n+\t    float: left;\n+\t    margin-left: 50px;\n \t}\n \n \t.sidebar .logo-container > img {\n@@ -1944,10 +1947,6 @@ details.rustdoc-toggle[open] > summary.hideme::after {\n \t.search-results div.desc, .search-results .result-description, .item-right {\n \t\tpadding-left: 2em;\n \t}\n-\n-\t.source .logo-source {\n-\t\tdisplay: none;\n-\t}\n }\n \n @media print {"}, {"sha": "3e5ec748397c24df3462a21251f1740c9305880a", "filename": "src/librustdoc/html/static/css/themes/dark.css", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/07e3f998b1ceb4b8d2a7992782e60f5e776aa114/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "raw_url": "https://github.com/rust-lang/rust/raw/07e3f998b1ceb4b8d2a7992782e60f5e776aa114/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css?ref=07e3f998b1ceb4b8d2a7992782e60f5e776aa114", "patch": "@@ -66,7 +66,7 @@ pre, .rustdoc.source .example-wrap {\n }\n \n .source .sidebar {\n-\tbackground-color: #353535;\n+    background-color: #565656;\n }\n \n .sidebar .location {"}, {"sha": "ca0a1f21051227af0244148cf903d6799c3e32fa", "filename": "src/librustdoc/html/static/js/source-script.js", "status": "modified", "additions": 8, "deletions": 6, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/07e3f998b1ceb4b8d2a7992782e60f5e776aa114/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsource-script.js", "raw_url": "https://github.com/rust-lang/rust/raw/07e3f998b1ceb4b8d2a7992782e60f5e776aa114/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsource-script.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsource-script.js?ref=07e3f998b1ceb4b8d2a7992782e60f5e776aa114", "patch": "@@ -77,15 +77,15 @@ function createDirEntry(elem, parent, fullPath, currentFile, hasFoundFile) {\n }\n \n function toggleSidebar() {\n-    var sidebar = document.getElementById(\"source-sidebar\");\n+    var sidebar = document.querySelector(\"nav.sidebar\");\n     var child = this.children[0].children[0];\n     if (child.innerText === \">\") {\n-        sidebar.style.left = \"\";\n+        sidebar.style.width = \"300px\";\n         this.style.left = \"\";\n         child.innerText = \"<\";\n         updateLocalStorage(\"rustdoc-source-sidebar-show\", \"true\");\n     } else {\n-        sidebar.style.left = \"-300px\";\n+        sidebar.style.width = \"0\";\n         this.style.left = \"0\";\n         child.innerText = \">\";\n         updateLocalStorage(\"rustdoc-source-sidebar-show\", \"false\");\n@@ -120,15 +120,17 @@ function createSourceSidebar() {\n     if (!window.rootPath.endsWith(\"/\")) {\n         window.rootPath += \"/\";\n     }\n-    var main = document.getElementById(\"main\");\n+    var main = document.querySelector(\"nav.sidebar\");\n \n     var sidebarToggle = createSidebarToggle();\n     main.insertBefore(sidebarToggle, main.firstChild);\n \n     var sidebar = document.createElement(\"div\");\n     sidebar.id = \"source-sidebar\";\n     if (getCurrentValue(\"rustdoc-source-sidebar-show\") !== \"true\") {\n-        sidebar.style.left = \"-300px\";\n+        main.style.width = \"0px\";\n+    } else {\n+        main.style.width = \"300px\";\n     }\n \n     var currentFile = getCurrentFilePath();\n@@ -144,7 +146,7 @@ function createSourceSidebar() {\n                                       currentFile, hasFoundFile);\n     });\n \n-    main.insertBefore(sidebar, main.firstChild);\n+    main.insertBefore(sidebar, document.querySelector(\".sidebar-logo\").nextSibling);\n     // Focus on the current file in the source files sidebar.\n     var selected_elem = sidebar.getElementsByClassName(\"selected\")[0];\n     if (typeof selected_elem !== \"undefined\") {"}, {"sha": "14bf35b6a2e4a6949c8c30b0633bd6b93a49424c", "filename": "src/librustdoc/html/templates/page.html", "status": "modified", "additions": 1, "deletions": 12, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/07e3f998b1ceb4b8d2a7992782e60f5e776aa114/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fpage.html", "raw_url": "https://github.com/rust-lang/rust/raw/07e3f998b1ceb4b8d2a7992782e60f5e776aa114/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fpage.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fpage.html?ref=07e3f998b1ceb4b8d2a7992782e60f5e776aa114", "patch": "@@ -68,7 +68,7 @@\n     {{- layout.external_html.before_content | safe -}}\n     <nav class=\"sidebar\"> {#- -#}\n         <div class=\"sidebar-menu\" role=\"button\">&#9776;</div> {#- -#}\n-        <a href='{{page.root_path | safe}}{{krate_with_trailing_slash | safe}}index.html'> {#- -#}\n+        <a class=\"sidebar-logo\" href='{{page.root_path | safe}}{{krate_with_trailing_slash | safe}}index.html'> {#- -#}\n             <div class='logo-container rust-logo'> {#- -#}\n             <img src='\n                 {%- if layout.logo -%}\n@@ -83,17 +83,6 @@\n     </nav> {#- -#}\n     <main> {#- -#}\n         <div class=\"main-inner\"> {#- -#}\n-            <a class=\"logo-source\" href='{{page.root_path | safe}}{{krate_with_trailing_slash | safe}}index.html'> {#- -#}\n-                <div class='logo-container rust-logo'> {#- -#}\n-                <img src='\n-                    {%- if layout.logo -%}\n-                    {{layout.logo}}\n-                    {%- else -%}\n-                    {{static_root_path | safe}}rust-logo{{page.resource_suffix}}.png\n-                    {%- endif -%}\n-                    ' alt='logo'> {#- -#}\n-                </div> {#- -#}\n-            </a> {#- -#}\n             <nav class=\"sub\"> {#- -#}\n                 <div class=\"theme-picker\"> {#- -#}\n                     <button id=\"theme-picker\" aria-label=\"Pick another theme!\" aria-haspopup=\"menu\" title=\"themes\"> {#- -#}"}]}