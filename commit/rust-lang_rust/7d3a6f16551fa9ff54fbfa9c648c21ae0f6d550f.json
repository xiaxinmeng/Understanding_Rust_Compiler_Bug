{"sha": "7d3a6f16551fa9ff54fbfa9c648c21ae0f6d550f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdkM2E2ZjE2NTUxZmE5ZmY1NGZiZmE5YzY0OGMyMWFlMGY2ZDU1MGY=", "commit": {"author": {"name": "Henry Boisdequin", "email": "65845077+henryboisdequin@users.noreply.github.com", "date": "2021-03-03T11:39:40Z"}, "committer": {"name": "Henry Boisdequin", "email": "65845077+henryboisdequin@users.noreply.github.com", "date": "2021-03-06T02:51:08Z"}, "message": "address comments", "tree": {"sha": "d53c534dbe9f8682bb5f70952234137ad23b75b5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d53c534dbe9f8682bb5f70952234137ad23b75b5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7d3a6f16551fa9ff54fbfa9c648c21ae0f6d550f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7d3a6f16551fa9ff54fbfa9c648c21ae0f6d550f", "html_url": "https://github.com/rust-lang/rust/commit/7d3a6f16551fa9ff54fbfa9c648c21ae0f6d550f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7d3a6f16551fa9ff54fbfa9c648c21ae0f6d550f/comments", "author": {"login": "henryboisdequin", "id": 65845077, "node_id": "MDQ6VXNlcjY1ODQ1MDc3", "avatar_url": "https://avatars.githubusercontent.com/u/65845077?v=4", "gravatar_id": "", "url": "https://api.github.com/users/henryboisdequin", "html_url": "https://github.com/henryboisdequin", "followers_url": "https://api.github.com/users/henryboisdequin/followers", "following_url": "https://api.github.com/users/henryboisdequin/following{/other_user}", "gists_url": "https://api.github.com/users/henryboisdequin/gists{/gist_id}", "starred_url": "https://api.github.com/users/henryboisdequin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/henryboisdequin/subscriptions", "organizations_url": "https://api.github.com/users/henryboisdequin/orgs", "repos_url": "https://api.github.com/users/henryboisdequin/repos", "events_url": "https://api.github.com/users/henryboisdequin/events{/privacy}", "received_events_url": "https://api.github.com/users/henryboisdequin/received_events", "type": "User", "site_admin": false}, "committer": {"login": "henryboisdequin", "id": 65845077, "node_id": "MDQ6VXNlcjY1ODQ1MDc3", "avatar_url": "https://avatars.githubusercontent.com/u/65845077?v=4", "gravatar_id": "", "url": "https://api.github.com/users/henryboisdequin", "html_url": "https://github.com/henryboisdequin", "followers_url": "https://api.github.com/users/henryboisdequin/followers", "following_url": "https://api.github.com/users/henryboisdequin/following{/other_user}", "gists_url": "https://api.github.com/users/henryboisdequin/gists{/gist_id}", "starred_url": "https://api.github.com/users/henryboisdequin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/henryboisdequin/subscriptions", "organizations_url": "https://api.github.com/users/henryboisdequin/orgs", "repos_url": "https://api.github.com/users/henryboisdequin/repos", "events_url": "https://api.github.com/users/henryboisdequin/events{/privacy}", "received_events_url": "https://api.github.com/users/henryboisdequin/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d9d69212c3d1dca7e8975d5163f09289db4a7420", "url": "https://api.github.com/repos/rust-lang/rust/commits/d9d69212c3d1dca7e8975d5163f09289db4a7420", "html_url": "https://github.com/rust-lang/rust/commit/d9d69212c3d1dca7e8975d5163f09289db4a7420"}], "stats": {"total": 27, "additions": 13, "deletions": 14}, "files": [{"sha": "1f47e4899f18c25cf14741b24632ecfdec65194f", "filename": "compiler/rustc_typeck/src/collect/type_of.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/7d3a6f16551fa9ff54fbfa9c648c21ae0f6d550f/compiler%2Frustc_typeck%2Fsrc%2Fcollect%2Ftype_of.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7d3a6f16551fa9ff54fbfa9c648c21ae0f6d550f/compiler%2Frustc_typeck%2Fsrc%2Fcollect%2Ftype_of.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_typeck%2Fsrc%2Fcollect%2Ftype_of.rs?ref=7d3a6f16551fa9ff54fbfa9c648c21ae0f6d550f", "patch": "@@ -659,18 +659,20 @@ fn infer_placeholder_type(\n                 format!(\"{}: {}\", item_ident, ty),\n                 Applicability::MachineApplicable,\n             )\n-            .emit_unless(matches!(ty.kind(), ty::Error(_)));\n+            .emit_unless(ty.references_error());\n         }\n         None => {\n             let mut diag = bad_placeholder_type(tcx, vec![span]);\n-            if !matches!(ty.kind(), ty::Error(_)) {\n+\n+            if !ty.references_error() {\n                 diag.span_suggestion(\n                     span,\n                     \"replace `_` with the correct type\",\n                     ty.to_string(),\n                     Applicability::MaybeIncorrect,\n                 );\n             }\n+\n             diag.emit();\n         }\n     }"}, {"sha": "adc9dc8b42656363b52467c589445fa2f9286676", "filename": "src/test/ui/79040.rs", "status": "removed", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/d9d69212c3d1dca7e8975d5163f09289db4a7420/src%2Ftest%2Fui%2F79040.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d9d69212c3d1dca7e8975d5163f09289db4a7420/src%2Ftest%2Fui%2F79040.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2F79040.rs?ref=d9d69212c3d1dca7e8975d5163f09289db4a7420", "patch": "@@ -1,5 +0,0 @@\n-fn main() {\n-    const FOO = \"hello\" + 1;\n-    //^~ ERROR cannot add `{integer}` to `&str`\n-    println!(\"{}\", FOO);\n-}\n\\ No newline at end of file"}, {"sha": "15a15a207b1cafd52c363e812cea1fa527bd1d2f", "filename": "src/test/ui/parser/item-free-const-no-body-semantic-fail.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7d3a6f16551fa9ff54fbfa9c648c21ae0f6d550f/src%2Ftest%2Fui%2Fparser%2Fitem-free-const-no-body-semantic-fail.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7d3a6f16551fa9ff54fbfa9c648c21ae0f6d550f/src%2Ftest%2Fui%2Fparser%2Fitem-free-const-no-body-semantic-fail.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fitem-free-const-no-body-semantic-fail.rs?ref=7d3a6f16551fa9ff54fbfa9c648c21ae0f6d550f", "patch": "@@ -4,4 +4,3 @@ fn main() {}\n \n const A: u8; //~ ERROR free constant item without body\n const B; //~ ERROR free constant item without body\n-//~^ ERROR missing type for `const` item"}, {"sha": "61d3eab24d8c7b9c257776f39f865b2133b463be", "filename": "src/test/ui/parser/item-free-static-no-body-semantic-fail.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7d3a6f16551fa9ff54fbfa9c648c21ae0f6d550f/src%2Ftest%2Fui%2Fparser%2Fitem-free-static-no-body-semantic-fail.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7d3a6f16551fa9ff54fbfa9c648c21ae0f6d550f/src%2Ftest%2Fui%2Fparser%2Fitem-free-static-no-body-semantic-fail.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fitem-free-static-no-body-semantic-fail.rs?ref=7d3a6f16551fa9ff54fbfa9c648c21ae0f6d550f", "patch": "@@ -4,8 +4,6 @@ fn main() {}\n \n static A: u8; //~ ERROR free static item without body\n static B; //~ ERROR free static item without body\n-//~^ ERROR missing type for `static` item\n \n static mut C: u8; //~ ERROR free static item without body\n static mut D; //~ ERROR free static item without body\n-//~^ ERROR missing type for `static mut` item"}, {"sha": "7b408323674de40721d4a158602d93f2509bf677", "filename": "src/test/ui/parser/item-free-static-no-body-semantic-fail.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7d3a6f16551fa9ff54fbfa9c648c21ae0f6d550f/src%2Ftest%2Fui%2Fparser%2Fitem-free-static-no-body-semantic-fail.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7d3a6f16551fa9ff54fbfa9c648c21ae0f6d550f/src%2Ftest%2Fui%2Fparser%2Fitem-free-static-no-body-semantic-fail.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fitem-free-static-no-body-semantic-fail.stderr?ref=7d3a6f16551fa9ff54fbfa9c648c21ae0f6d550f", "patch": "@@ -15,15 +15,15 @@ LL | static B;\n    |         help: provide a definition for the static: `= <expr>;`\n \n error: free static item without body\n-  --> $DIR/item-free-static-no-body-semantic-fail.rs:9:1\n+  --> $DIR/item-free-static-no-body-semantic-fail.rs:8:1\n    |\n LL | static mut C: u8;\n    | ^^^^^^^^^^^^^^^^-\n    |                 |\n    |                 help: provide a definition for the static: `= <expr>;`\n \n error: free static item without body\n-  --> $DIR/item-free-static-no-body-semantic-fail.rs:10:1\n+  --> $DIR/item-free-static-no-body-semantic-fail.rs:9:1\n    |\n LL | static mut D;\n    | ^^^^^^^^^^^^-"}, {"sha": "af2a9c1ba87ef971739ee9667ada685843c789cf", "filename": "src/test/ui/typeck/issue-79040.rs", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/7d3a6f16551fa9ff54fbfa9c648c21ae0f6d550f/src%2Ftest%2Fui%2Ftypeck%2Fissue-79040.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7d3a6f16551fa9ff54fbfa9c648c21ae0f6d550f/src%2Ftest%2Fui%2Ftypeck%2Fissue-79040.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftypeck%2Fissue-79040.rs?ref=7d3a6f16551fa9ff54fbfa9c648c21ae0f6d550f", "patch": "@@ -0,0 +1,5 @@\n+fn main() {\n+    const FOO = \"hello\" + 1; //~ ERROR cannot add `{integer}` to `&str`\n+    //~^ ERROR cannot add `{integer}` to `&str`\n+    println!(\"{}\", FOO);\n+}"}, {"sha": "32049e5d96860a27af505035e8a71aba2b593ab4", "filename": "src/test/ui/typeck/issue-79040.stderr", "status": "renamed", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7d3a6f16551fa9ff54fbfa9c648c21ae0f6d550f/src%2Ftest%2Fui%2Ftypeck%2Fissue-79040.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7d3a6f16551fa9ff54fbfa9c648c21ae0f6d550f/src%2Ftest%2Fui%2Ftypeck%2Fissue-79040.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftypeck%2Fissue-79040.stderr?ref=7d3a6f16551fa9ff54fbfa9c648c21ae0f6d550f", "patch": "@@ -1,13 +1,13 @@\n error[E0369]: cannot add `{integer}` to `&str`\n-  --> $DIR/79040.rs:2:25\n+  --> $DIR/issue-79040.rs:2:25\n    |\n LL |     const FOO = \"hello\" + 1;\n    |                 ------- ^ - {integer}\n    |                 |\n    |                 &str\n \n error[E0369]: cannot add `{integer}` to `&str`\n-  --> $DIR/79040.rs:2:25\n+  --> $DIR/issue-79040.rs:2:25\n    |\n LL |     const FOO = \"hello\" + 1;\n    |                 ------- ^ - {integer}", "previous_filename": "src/test/ui/79040.stderr"}]}