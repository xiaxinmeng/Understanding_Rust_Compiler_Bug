{"sha": "5b69a34fb5a931908b54e348dc810ae8faf29ddc", "node_id": "C_kwDOAAsO6NoAKDViNjlhMzRmYjVhOTMxOTA4YjU0ZTM0OGRjODEwYWU4ZmFmMjlkZGM", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-05-25T16:42:29Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-05-25T16:42:29Z"}, "message": "Auto merge of #12386 - fasterthanlime:gh-12372-test, r=Veykril\n\nAdd test for #12372 (generate enum variant in different file)\n\nThe test currently fails but I'm not sure why.\n\nThe \"Right\" output seems to contain only the contents of `foo.rs`, without the magic comments:\n\n<img width=\"967\" alt=\"image\" src=\"https://user-images.githubusercontent.com/7998310/170310707-e69b21eb-d4f8-46c1-8a0a-9b4071289e26.png\">\n\ncc `@Veykril`", "tree": {"sha": "cbbf9f6bfdc45a2b6f7ebad097a8b2915bf35ec4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cbbf9f6bfdc45a2b6f7ebad097a8b2915bf35ec4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5b69a34fb5a931908b54e348dc810ae8faf29ddc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5b69a34fb5a931908b54e348dc810ae8faf29ddc", "html_url": "https://github.com/rust-lang/rust/commit/5b69a34fb5a931908b54e348dc810ae8faf29ddc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5b69a34fb5a931908b54e348dc810ae8faf29ddc/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0468d84564717eb5fb4e06d901aaac4d94c5de87", "url": "https://api.github.com/repos/rust-lang/rust/commits/0468d84564717eb5fb4e06d901aaac4d94c5de87", "html_url": "https://github.com/rust-lang/rust/commit/0468d84564717eb5fb4e06d901aaac4d94c5de87"}, {"sha": "c06c4f968264226a8ce36b91545ec3e72e0b6364", "url": "https://api.github.com/repos/rust-lang/rust/commits/c06c4f968264226a8ce36b91545ec3e72e0b6364", "html_url": "https://github.com/rust-lang/rust/commit/c06c4f968264226a8ce36b91545ec3e72e0b6364"}], "stats": {"total": 27, "additions": 27, "deletions": 0}, "files": [{"sha": "b57076d99929e94bf64ab406bc27c6858403a76b", "filename": "crates/ide-assists/src/handlers/generate_enum_variant.rs", "status": "modified", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/5b69a34fb5a931908b54e348dc810ae8faf29ddc/crates%2Fide-assists%2Fsrc%2Fhandlers%2Fgenerate_enum_variant.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5b69a34fb5a931908b54e348dc810ae8faf29ddc/crates%2Fide-assists%2Fsrc%2Fhandlers%2Fgenerate_enum_variant.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide-assists%2Fsrc%2Fhandlers%2Fgenerate_enum_variant.rs?ref=5b69a34fb5a931908b54e348dc810ae8faf29ddc", "patch": "@@ -140,6 +140,33 @@ fn main() {\n         )\n     }\n \n+    #[test]\n+    fn generate_basic_enum_variant_in_different_file() {\n+        check_assist(\n+            generate_enum_variant,\n+            r\"\n+//- /main.rs\n+mod foo;\n+use foo::Foo;\n+\n+fn main() {\n+    Foo::Baz$0\n+}\n+\n+//- /foo.rs\n+enum Foo {\n+    Bar,\n+}\n+\",\n+            r\"\n+enum Foo {\n+    Bar,\n+    Baz,\n+}\n+\",\n+        )\n+    }\n+\n     #[test]\n     fn not_applicable_for_existing_variant() {\n         check_assist_not_applicable("}]}