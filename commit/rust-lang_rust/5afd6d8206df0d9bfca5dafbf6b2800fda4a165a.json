{"sha": "5afd6d8206df0d9bfca5dafbf6b2800fda4a165a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVhZmQ2ZDgyMDZkZjBkOWJmY2E1ZGFmYmY2YjI4MDBmZGE0YTE2NWE=", "commit": {"author": {"name": "Srinivas Reddy Thatiparthy", "email": "thatiparthysreenivas@gmail.com", "date": "2016-10-16T16:41:01Z"}, "committer": {"name": "Srinivas Reddy Thatiparthy", "email": "thatiparthysreenivas@gmail.com", "date": "2016-10-16T16:41:01Z"}, "message": "Run rustfmt on libcore/sync folder", "tree": {"sha": "ef52a8de48154910a4b2a169b3c46181ed7356ff", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ef52a8de48154910a4b2a169b3c46181ed7356ff"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5afd6d8206df0d9bfca5dafbf6b2800fda4a165a", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQIcBAABAgAGBQJYA62dAAoJEAkcWPS/w2VxEJwQAKs4LsifHfvUCTLto+3g9VHv\nOcu05ppBODputbStaEMcT+gcbaEp5ti0O/8p8hvZj3E6LF72/S/Pv6vJZtYgAV57\nWVnOjiumAQ5Z1YQKKVeFmVRHLUOfA2zmooDPQSbbtAus4xHGT8MREVzRsfhcjFUL\n7Ny/bKTqOj1bVW3Yr4L8KfSd6db5NN4qE2AfOtRT5XalnsRZta6ok+7ay8M20y1/\nd1TIY+7FUmeoSXxvQp5joAzUjaFwxco8+VhXLbxg/hN+44xDnLRl1WY6ESUhqesq\nMLaL9Jy1DFo+jOyBwpR/4yapPIy0SMHtc2/z+nwhmdXQNw/+wnKKyyJIqDyZLJaZ\n2MBltkdjIsj9PVt/aDZFqhp4PMXzaRCMcNVh5nrBdL/6TxM2BNXzEP6TtVG23YmW\nwaFOpnGk4za+X0nomVxbV+6UdwKxTB6hsJz9Jh60MYcX+USGPwWuSvMoH8A+FNQH\nDLY+PlsQPnNG+44PGNLZuHZr48xcACYzuFeOWj2rVrfD5imQWmVYy/wY2M+wN5ui\nCcB0h51gpgZgxsTCT4bCuTIL1uJUEfJuu+5ijEbImuweRK02J6j/GK1tjYpNRJUh\nua/zGonIo6SnVj1qzVryWaWySBHBbjQ3cYbj3Z62n+SXB5+QKVPFzAIchGQywLNP\nLPn2C1xgzrm8/WGyCDvh\n=egzG\n-----END PGP SIGNATURE-----", "payload": "tree ef52a8de48154910a4b2a169b3c46181ed7356ff\nparent 6dc035ed911672c6a1f7afc9eed15fb08e574e5b\nauthor Srinivas Reddy Thatiparthy <thatiparthysreenivas@gmail.com> 1476636061 +0530\ncommitter Srinivas Reddy Thatiparthy <thatiparthysreenivas@gmail.com> 1476636061 +0530\n\nRun rustfmt on libcore/sync folder\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5afd6d8206df0d9bfca5dafbf6b2800fda4a165a", "html_url": "https://github.com/rust-lang/rust/commit/5afd6d8206df0d9bfca5dafbf6b2800fda4a165a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5afd6d8206df0d9bfca5dafbf6b2800fda4a165a/comments", "author": {"login": "srinivasreddy", "id": 198396, "node_id": "MDQ6VXNlcjE5ODM5Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/198396?v=4", "gravatar_id": "", "url": "https://api.github.com/users/srinivasreddy", "html_url": "https://github.com/srinivasreddy", "followers_url": "https://api.github.com/users/srinivasreddy/followers", "following_url": "https://api.github.com/users/srinivasreddy/following{/other_user}", "gists_url": "https://api.github.com/users/srinivasreddy/gists{/gist_id}", "starred_url": "https://api.github.com/users/srinivasreddy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/srinivasreddy/subscriptions", "organizations_url": "https://api.github.com/users/srinivasreddy/orgs", "repos_url": "https://api.github.com/users/srinivasreddy/repos", "events_url": "https://api.github.com/users/srinivasreddy/events{/privacy}", "received_events_url": "https://api.github.com/users/srinivasreddy/received_events", "type": "User", "site_admin": false}, "committer": {"login": "srinivasreddy", "id": 198396, "node_id": "MDQ6VXNlcjE5ODM5Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/198396?v=4", "gravatar_id": "", "url": "https://api.github.com/users/srinivasreddy", "html_url": "https://github.com/srinivasreddy", "followers_url": "https://api.github.com/users/srinivasreddy/followers", "following_url": "https://api.github.com/users/srinivasreddy/following{/other_user}", "gists_url": "https://api.github.com/users/srinivasreddy/gists{/gist_id}", "starred_url": "https://api.github.com/users/srinivasreddy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/srinivasreddy/subscriptions", "organizations_url": "https://api.github.com/users/srinivasreddy/orgs", "repos_url": "https://api.github.com/users/srinivasreddy/repos", "events_url": "https://api.github.com/users/srinivasreddy/events{/privacy}", "received_events_url": "https://api.github.com/users/srinivasreddy/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6dc035ed911672c6a1f7afc9eed15fb08e574e5b", "url": "https://api.github.com/repos/rust-lang/rust/commits/6dc035ed911672c6a1f7afc9eed15fb08e574e5b", "html_url": "https://github.com/rust-lang/rust/commit/6dc035ed911672c6a1f7afc9eed15fb08e574e5b"}], "stats": {"total": 114, "additions": 58, "deletions": 56}, "files": [{"sha": "657f7e7992fee06ba53947f87802138df76500a7", "filename": "src/libcore/sync/atomic.rs", "status": "modified", "additions": 58, "deletions": 56, "changes": 114, "blob_url": "https://github.com/rust-lang/rust/blob/5afd6d8206df0d9bfca5dafbf6b2800fda4a165a/src%2Flibcore%2Fsync%2Fatomic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5afd6d8206df0d9bfca5dafbf6b2800fda4a165a/src%2Flibcore%2Fsync%2Fatomic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fsync%2Fatomic.rs?ref=5afd6d8206df0d9bfca5dafbf6b2800fda4a165a", "patch": "@@ -277,7 +277,9 @@ impl AtomicBool {\n     #[inline]\n     #[stable(feature = \"rust1\", since = \"1.0.0\")]\n     pub fn store(&self, val: bool, order: Ordering) {\n-        unsafe { atomic_store(self.v.get(), val as u8, order); }\n+        unsafe {\n+            atomic_store(self.v.get(), val as u8, order);\n+        }\n     }\n \n     /// Stores a value into the bool, returning the old value.\n@@ -366,9 +368,11 @@ impl AtomicBool {\n                             current: bool,\n                             new: bool,\n                             success: Ordering,\n-                            failure: Ordering) -> Result<bool, bool> {\n-        match unsafe { atomic_compare_exchange(self.v.get(), current as u8, new as u8,\n-                                               success, failure) } {\n+                            failure: Ordering)\n+                            -> Result<bool, bool> {\n+        match unsafe {\n+            atomic_compare_exchange(self.v.get(), current as u8, new as u8, success, failure)\n+        } {\n             Ok(x) => Ok(x != 0),\n             Err(x) => Err(x != 0),\n         }\n@@ -409,9 +413,11 @@ impl AtomicBool {\n                                  current: bool,\n                                  new: bool,\n                                  success: Ordering,\n-                                 failure: Ordering) -> Result<bool, bool> {\n-        match unsafe { atomic_compare_exchange_weak(self.v.get(), current as u8, new as u8,\n-                                                    success, failure) } {\n+                                 failure: Ordering)\n+                                 -> Result<bool, bool> {\n+        match unsafe {\n+            atomic_compare_exchange_weak(self.v.get(), current as u8, new as u8, success, failure)\n+        } {\n             Ok(x) => Ok(x != 0),\n             Err(x) => Err(x != 0),\n         }\n@@ -632,9 +638,7 @@ impl<T> AtomicPtr<T> {\n     #[inline]\n     #[stable(feature = \"rust1\", since = \"1.0.0\")]\n     pub fn load(&self, order: Ordering) -> *mut T {\n-        unsafe {\n-            atomic_load(self.p.get() as *mut usize, order) as *mut T\n-        }\n+        unsafe { atomic_load(self.p.get() as *mut usize, order) as *mut T }\n     }\n \n     /// Stores a value into the pointer.\n@@ -660,7 +664,9 @@ impl<T> AtomicPtr<T> {\n     #[inline]\n     #[stable(feature = \"rust1\", since = \"1.0.0\")]\n     pub fn store(&self, ptr: *mut T, order: Ordering) {\n-        unsafe { atomic_store(self.p.get() as *mut usize, ptr as usize, order); }\n+        unsafe {\n+            atomic_store(self.p.get() as *mut usize, ptr as usize, order);\n+        }\n     }\n \n     /// Stores a value into the pointer, returning the old value.\n@@ -745,7 +751,8 @@ impl<T> AtomicPtr<T> {\n                             current: *mut T,\n                             new: *mut T,\n                             success: Ordering,\n-                            failure: Ordering) -> Result<*mut T, *mut T> {\n+                            failure: Ordering)\n+                            -> Result<*mut T, *mut T> {\n         unsafe {\n             let res = atomic_compare_exchange(self.p.get() as *mut usize,\n                                               current as usize,\n@@ -794,7 +801,8 @@ impl<T> AtomicPtr<T> {\n                                  current: *mut T,\n                                  new: *mut T,\n                                  success: Ordering,\n-                                 failure: Ordering) -> Result<*mut T, *mut T> {\n+                                 failure: Ordering)\n+                                 -> Result<*mut T, *mut T> {\n         unsafe {\n             let res = atomic_compare_exchange_weak(self.p.get() as *mut usize,\n                                                    current as usize,\n@@ -1266,9 +1274,9 @@ fn strongest_failure_ordering(order: Ordering) -> Ordering {\n     match order {\n         Release => Relaxed,\n         Relaxed => Relaxed,\n-        SeqCst  => SeqCst,\n+        SeqCst => SeqCst,\n         Acquire => Acquire,\n-        AcqRel  => Acquire,\n+        AcqRel => Acquire,\n     }\n }\n \n@@ -1277,9 +1285,9 @@ unsafe fn atomic_store<T>(dst: *mut T, val: T, order: Ordering) {\n     match order {\n         Release => intrinsics::atomic_store_rel(dst, val),\n         Relaxed => intrinsics::atomic_store_relaxed(dst, val),\n-        SeqCst  => intrinsics::atomic_store(dst, val),\n+        SeqCst => intrinsics::atomic_store(dst, val),\n         Acquire => panic!(\"there is no such thing as an acquire store\"),\n-        AcqRel  => panic!(\"there is no such thing as an acquire/release store\"),\n+        AcqRel => panic!(\"there is no such thing as an acquire/release store\"),\n     }\n }\n \n@@ -1288,9 +1296,9 @@ unsafe fn atomic_load<T>(dst: *const T, order: Ordering) -> T {\n     match order {\n         Acquire => intrinsics::atomic_load_acq(dst),\n         Relaxed => intrinsics::atomic_load_relaxed(dst),\n-        SeqCst  => intrinsics::atomic_load(dst),\n+        SeqCst => intrinsics::atomic_load(dst),\n         Release => panic!(\"there is no such thing as a release load\"),\n-        AcqRel  => panic!(\"there is no such thing as an acquire/release load\"),\n+        AcqRel => panic!(\"there is no such thing as an acquire/release load\"),\n     }\n }\n \n@@ -1299,9 +1307,9 @@ unsafe fn atomic_swap<T>(dst: *mut T, val: T, order: Ordering) -> T {\n     match order {\n         Acquire => intrinsics::atomic_xchg_acq(dst, val),\n         Release => intrinsics::atomic_xchg_rel(dst, val),\n-        AcqRel  => intrinsics::atomic_xchg_acqrel(dst, val),\n+        AcqRel => intrinsics::atomic_xchg_acqrel(dst, val),\n         Relaxed => intrinsics::atomic_xchg_relaxed(dst, val),\n-        SeqCst  => intrinsics::atomic_xchg(dst, val)\n+        SeqCst => intrinsics::atomic_xchg(dst, val),\n     }\n }\n \n@@ -1311,9 +1319,9 @@ unsafe fn atomic_add<T>(dst: *mut T, val: T, order: Ordering) -> T {\n     match order {\n         Acquire => intrinsics::atomic_xadd_acq(dst, val),\n         Release => intrinsics::atomic_xadd_rel(dst, val),\n-        AcqRel  => intrinsics::atomic_xadd_acqrel(dst, val),\n+        AcqRel => intrinsics::atomic_xadd_acqrel(dst, val),\n         Relaxed => intrinsics::atomic_xadd_relaxed(dst, val),\n-        SeqCst  => intrinsics::atomic_xadd(dst, val)\n+        SeqCst => intrinsics::atomic_xadd(dst, val),\n     }\n }\n \n@@ -1323,9 +1331,9 @@ unsafe fn atomic_sub<T>(dst: *mut T, val: T, order: Ordering) -> T {\n     match order {\n         Acquire => intrinsics::atomic_xsub_acq(dst, val),\n         Release => intrinsics::atomic_xsub_rel(dst, val),\n-        AcqRel  => intrinsics::atomic_xsub_acqrel(dst, val),\n+        AcqRel => intrinsics::atomic_xsub_acqrel(dst, val),\n         Relaxed => intrinsics::atomic_xsub_relaxed(dst, val),\n-        SeqCst  => intrinsics::atomic_xsub(dst, val)\n+        SeqCst => intrinsics::atomic_xsub(dst, val),\n     }\n }\n \n@@ -1334,63 +1342,57 @@ unsafe fn atomic_compare_exchange<T>(dst: *mut T,\n                                      old: T,\n                                      new: T,\n                                      success: Ordering,\n-                                     failure: Ordering) -> Result<T, T> {\n+                                     failure: Ordering)\n+                                     -> Result<T, T> {\n     let (val, ok) = match (success, failure) {\n         (Acquire, Acquire) => intrinsics::atomic_cxchg_acq(dst, old, new),\n         (Release, Relaxed) => intrinsics::atomic_cxchg_rel(dst, old, new),\n-        (AcqRel, Acquire)  => intrinsics::atomic_cxchg_acqrel(dst, old, new),\n+        (AcqRel, Acquire) => intrinsics::atomic_cxchg_acqrel(dst, old, new),\n         (Relaxed, Relaxed) => intrinsics::atomic_cxchg_relaxed(dst, old, new),\n-        (SeqCst, SeqCst)   => intrinsics::atomic_cxchg(dst, old, new),\n+        (SeqCst, SeqCst) => intrinsics::atomic_cxchg(dst, old, new),\n         (Acquire, Relaxed) => intrinsics::atomic_cxchg_acq_failrelaxed(dst, old, new),\n-        (AcqRel, Relaxed)  => intrinsics::atomic_cxchg_acqrel_failrelaxed(dst, old, new),\n-        (SeqCst, Relaxed)  => intrinsics::atomic_cxchg_failrelaxed(dst, old, new),\n-        (SeqCst, Acquire)  => intrinsics::atomic_cxchg_failacq(dst, old, new),\n+        (AcqRel, Relaxed) => intrinsics::atomic_cxchg_acqrel_failrelaxed(dst, old, new),\n+        (SeqCst, Relaxed) => intrinsics::atomic_cxchg_failrelaxed(dst, old, new),\n+        (SeqCst, Acquire) => intrinsics::atomic_cxchg_failacq(dst, old, new),\n         (_, AcqRel) => panic!(\"there is no such thing as an acquire/release failure ordering\"),\n         (_, Release) => panic!(\"there is no such thing as a release failure ordering\"),\n         _ => panic!(\"a failure ordering can't be stronger than a success ordering\"),\n     };\n-    if ok {\n-        Ok(val)\n-    } else {\n-        Err(val)\n-    }\n+    if ok { Ok(val) } else { Err(val) }\n }\n \n #[inline]\n unsafe fn atomic_compare_exchange_weak<T>(dst: *mut T,\n                                           old: T,\n                                           new: T,\n                                           success: Ordering,\n-                                          failure: Ordering) -> Result<T, T> {\n+                                          failure: Ordering)\n+                                          -> Result<T, T> {\n     let (val, ok) = match (success, failure) {\n         (Acquire, Acquire) => intrinsics::atomic_cxchgweak_acq(dst, old, new),\n         (Release, Relaxed) => intrinsics::atomic_cxchgweak_rel(dst, old, new),\n-        (AcqRel, Acquire)  => intrinsics::atomic_cxchgweak_acqrel(dst, old, new),\n+        (AcqRel, Acquire) => intrinsics::atomic_cxchgweak_acqrel(dst, old, new),\n         (Relaxed, Relaxed) => intrinsics::atomic_cxchgweak_relaxed(dst, old, new),\n-        (SeqCst, SeqCst)   => intrinsics::atomic_cxchgweak(dst, old, new),\n+        (SeqCst, SeqCst) => intrinsics::atomic_cxchgweak(dst, old, new),\n         (Acquire, Relaxed) => intrinsics::atomic_cxchgweak_acq_failrelaxed(dst, old, new),\n-        (AcqRel, Relaxed)  => intrinsics::atomic_cxchgweak_acqrel_failrelaxed(dst, old, new),\n-        (SeqCst, Relaxed)  => intrinsics::atomic_cxchgweak_failrelaxed(dst, old, new),\n-        (SeqCst, Acquire)  => intrinsics::atomic_cxchgweak_failacq(dst, old, new),\n+        (AcqRel, Relaxed) => intrinsics::atomic_cxchgweak_acqrel_failrelaxed(dst, old, new),\n+        (SeqCst, Relaxed) => intrinsics::atomic_cxchgweak_failrelaxed(dst, old, new),\n+        (SeqCst, Acquire) => intrinsics::atomic_cxchgweak_failacq(dst, old, new),\n         (_, AcqRel) => panic!(\"there is no such thing as an acquire/release failure ordering\"),\n         (_, Release) => panic!(\"there is no such thing as a release failure ordering\"),\n         _ => panic!(\"a failure ordering can't be stronger than a success ordering\"),\n     };\n-    if ok {\n-        Ok(val)\n-    } else {\n-        Err(val)\n-    }\n+    if ok { Ok(val) } else { Err(val) }\n }\n \n #[inline]\n unsafe fn atomic_and<T>(dst: *mut T, val: T, order: Ordering) -> T {\n     match order {\n         Acquire => intrinsics::atomic_and_acq(dst, val),\n         Release => intrinsics::atomic_and_rel(dst, val),\n-        AcqRel  => intrinsics::atomic_and_acqrel(dst, val),\n+        AcqRel => intrinsics::atomic_and_acqrel(dst, val),\n         Relaxed => intrinsics::atomic_and_relaxed(dst, val),\n-        SeqCst  => intrinsics::atomic_and(dst, val)\n+        SeqCst => intrinsics::atomic_and(dst, val),\n     }\n }\n \n@@ -1399,9 +1401,9 @@ unsafe fn atomic_or<T>(dst: *mut T, val: T, order: Ordering) -> T {\n     match order {\n         Acquire => intrinsics::atomic_or_acq(dst, val),\n         Release => intrinsics::atomic_or_rel(dst, val),\n-        AcqRel  => intrinsics::atomic_or_acqrel(dst, val),\n+        AcqRel => intrinsics::atomic_or_acqrel(dst, val),\n         Relaxed => intrinsics::atomic_or_relaxed(dst, val),\n-        SeqCst  => intrinsics::atomic_or(dst, val)\n+        SeqCst => intrinsics::atomic_or(dst, val),\n     }\n }\n \n@@ -1410,9 +1412,9 @@ unsafe fn atomic_xor<T>(dst: *mut T, val: T, order: Ordering) -> T {\n     match order {\n         Acquire => intrinsics::atomic_xor_acq(dst, val),\n         Release => intrinsics::atomic_xor_rel(dst, val),\n-        AcqRel  => intrinsics::atomic_xor_acqrel(dst, val),\n+        AcqRel => intrinsics::atomic_xor_acqrel(dst, val),\n         Relaxed => intrinsics::atomic_xor_relaxed(dst, val),\n-        SeqCst  => intrinsics::atomic_xor(dst, val)\n+        SeqCst => intrinsics::atomic_xor(dst, val),\n     }\n }\n \n@@ -1443,9 +1445,9 @@ pub fn fence(order: Ordering) {\n         match order {\n             Acquire => intrinsics::atomic_fence_acq(),\n             Release => intrinsics::atomic_fence_rel(),\n-            AcqRel  => intrinsics::atomic_fence_acqrel(),\n-            SeqCst  => intrinsics::atomic_fence(),\n-            Relaxed => panic!(\"there is no such thing as a relaxed fence\")\n+            AcqRel => intrinsics::atomic_fence_acqrel(),\n+            SeqCst => intrinsics::atomic_fence(),\n+            Relaxed => panic!(\"there is no such thing as a relaxed fence\"),\n         }\n     }\n }"}]}