{"sha": "92a372b0204a5f18286ff94648b98e4c0d6d27d2", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkyYTM3MmIwMjA0YTVmMTgyODZmZjk0NjQ4Yjk4ZTRjMGQ2ZDI3ZDI=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-12-01T09:46:06Z"}, "committer": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-12-12T16:54:48Z"}, "message": "Unify `{Impl,Trait}Item` as `AssocItem`.", "tree": {"sha": "31c5d5ade0c4222d94d0ba8982988a0c8e473a01", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/31c5d5ade0c4222d94d0ba8982988a0c8e473a01"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/92a372b0204a5f18286ff94648b98e4c0d6d27d2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/92a372b0204a5f18286ff94648b98e4c0d6d27d2", "html_url": "https://github.com/rust-lang/rust/commit/92a372b0204a5f18286ff94648b98e4c0d6d27d2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/92a372b0204a5f18286ff94648b98e4c0d6d27d2/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "39073767a483d10f8b4b2ac2f32bc9573d9dabbf", "url": "https://api.github.com/repos/rust-lang/rust/commits/39073767a483d10f8b4b2ac2f32bc9573d9dabbf", "html_url": "https://github.com/rust-lang/rust/commit/39073767a483d10f8b4b2ac2f32bc9573d9dabbf"}], "stats": {"total": 43, "additions": 25, "deletions": 18}, "files": [{"sha": "dd8a7fa8665c27780def32dc19da4a4c90851b90", "filename": "src/libsyntax/ast.rs", "status": "modified", "additions": 24, "deletions": 17, "changes": 41, "blob_url": "https://github.com/rust-lang/rust/blob/92a372b0204a5f18286ff94648b98e4c0d6d27d2/src%2Flibsyntax%2Fast.rs", "raw_url": "https://github.com/rust-lang/rust/raw/92a372b0204a5f18286ff94648b98e4c0d6d27d2/src%2Flibsyntax%2Fast.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fast.rs?ref=92a372b0204a5f18286ff94648b98e4c0d6d27d2", "patch": "@@ -1603,23 +1603,16 @@ pub struct FnSig {\n     pub decl: P<FnDecl>,\n }\n \n-pub type TraitItem = ImplItem<TraitItemKind>;\n+// FIXME(Centril): Remove all of these.\n+pub type TraitItem = AssocItem<AssocItemKind>;\n+pub type TraitItemKind = AssocItemKind;\n+pub type ImplItem = AssocItem<AssocItemKind>;\n+pub type ImplItemKind = AssocItemKind;\n \n-/// Represents the kind of an item declaration within a trait declaration,\n-/// possibly including a default implementation. A trait item is\n-/// either required (meaning it doesn't have an implementation, just a\n-/// signature) or provided (meaning it has a default implementation).\n+/// Represents associated items.\n+/// These include items in `impl` and `trait` definitions.\n #[derive(Clone, RustcEncodable, RustcDecodable, Debug)]\n-pub enum TraitItemKind {\n-    Const(P<Ty>, Option<P<Expr>>),\n-    Method(FnSig, Option<P<Block>>),\n-    TyAlias(GenericBounds, Option<P<Ty>>),\n-    Macro(Mac),\n-}\n-\n-/// Represents anything within an `impl` block.\n-#[derive(Clone, RustcEncodable, RustcDecodable, Debug)]\n-pub struct ImplItem<K = ImplItemKind> {\n+pub struct AssocItem<K = ImplItemKind> {\n     pub attrs: Vec<Attribute>,\n     pub id: NodeId,\n     pub span: Span,\n@@ -1634,11 +1627,25 @@ pub struct ImplItem<K = ImplItemKind> {\n }\n \n /// Represents various kinds of content within an `impl`.\n-#[derive(Clone, RustcEncodable, RustcDecodable, Debug)]\n-pub enum ImplItemKind  {\n+///\n+/// The term \"provided\" in the variants below refers to the item having a default\n+/// definition / body. Meanwhile, a \"required\" item lacks a definition / body.\n+/// In an implementation, all items must be provided.\n+/// The `Option`s below denote the bodies, where `Some(_)`\n+/// means \"provided\" and conversely `None` means \"required\".\n+#[derive(Clone, RustcEncodable, RustcDecodable, Debug)]\n+pub enum AssocItemKind  {\n+    /// An associated constant, `const $ident: $ty $def?;` where `def ::= \"=\" $expr? ;`.\n+    /// If `def` is parsed, then the associated constant is provided, and otherwise required.\n     Const(P<Ty>, Option<P<Expr>>),\n+\n+    /// An associated function.\n     Method(FnSig, Option<P<Block>>),\n+\n+    /// An associated type.\n     TyAlias(GenericBounds, Option<P<Ty>>),\n+\n+    /// A macro expanding to an associated item.\n     Macro(Mac),\n }\n "}, {"sha": "13a9ed5f215d239a3658b368c3fa9f0081be4222", "filename": "src/libsyntax/attr/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/92a372b0204a5f18286ff94648b98e4c0d6d27d2/src%2Flibsyntax%2Fattr%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/92a372b0204a5f18286ff94648b98e4c0d6d27d2/src%2Flibsyntax%2Fattr%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fattr%2Fmod.rs?ref=92a372b0204a5f18286ff94648b98e4c0d6d27d2", "patch": "@@ -749,6 +749,6 @@ macro_rules! derive_has_attrs {\n }\n \n derive_has_attrs! {\n-    Item, Expr, Local, ast::ForeignItem, ast::StructField, ast::ImplItem, ast::TraitItem, ast::Arm,\n+    Item, Expr, Local, ast::ForeignItem, ast::StructField, ast::AssocItem, ast::Arm,\n     ast::Field, ast::FieldPat, ast::Variant, ast::Param\n }"}]}