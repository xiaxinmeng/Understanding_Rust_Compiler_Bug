{"sha": "da5c911b5f9c0def28662e52e47773d0438f4641", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRhNWM5MTFiNWY5YzBkZWYyODY2MmU1MmU0Nzc3M2QwNDM4ZjQ2NDE=", "commit": {"author": {"name": "Michael Woerister", "email": "michaelwoerister@posteo", "date": "2021-06-16T14:32:42Z"}, "committer": {"name": "Michael Woerister", "email": "michaelwoerister@posteo", "date": "2021-06-21T11:38:46Z"}, "message": "Add regression test  for #85955.", "tree": {"sha": "274dd6e720b55cd47d314ec68223b7d7720a1ab0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/274dd6e720b55cd47d314ec68223b7d7720a1ab0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/da5c911b5f9c0def28662e52e47773d0438f4641", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/da5c911b5f9c0def28662e52e47773d0438f4641", "html_url": "https://github.com/rust-lang/rust/commit/da5c911b5f9c0def28662e52e47773d0438f4641", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/da5c911b5f9c0def28662e52e47773d0438f4641/comments", "author": {"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}, "committer": {"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d789de67dcbd22c017a3a4cccac22510f61bf50c", "url": "https://api.github.com/repos/rust-lang/rust/commits/d789de67dcbd22c017a3a4cccac22510f61bf50c", "html_url": "https://github.com/rust-lang/rust/commit/d789de67dcbd22c017a3a4cccac22510f61bf50c"}], "stats": {"total": 25, "additions": 25, "deletions": 0}, "files": [{"sha": "7b680bce49eb30bd8771e39c085b141be0f5db49", "filename": "src/test/ui/include-macros/auxiliary/same-file-in-two-crates-aux.rs", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/da5c911b5f9c0def28662e52e47773d0438f4641/src%2Ftest%2Fui%2Finclude-macros%2Fauxiliary%2Fsame-file-in-two-crates-aux.rs", "raw_url": "https://github.com/rust-lang/rust/raw/da5c911b5f9c0def28662e52e47773d0438f4641/src%2Ftest%2Fui%2Finclude-macros%2Fauxiliary%2Fsame-file-in-two-crates-aux.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Finclude-macros%2Fauxiliary%2Fsame-file-in-two-crates-aux.rs?ref=da5c911b5f9c0def28662e52e47773d0438f4641", "patch": "@@ -0,0 +1,4 @@\n+#[inline]\n+pub fn some_function() -> u32 {\n+    1\n+}"}, {"sha": "f49efa2cf8a89c2f18b9c07e097b195b0f10e093", "filename": "src/test/ui/include-macros/same-file-in-two-crates.rs", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/da5c911b5f9c0def28662e52e47773d0438f4641/src%2Ftest%2Fui%2Finclude-macros%2Fsame-file-in-two-crates.rs", "raw_url": "https://github.com/rust-lang/rust/raw/da5c911b5f9c0def28662e52e47773d0438f4641/src%2Ftest%2Fui%2Finclude-macros%2Fsame-file-in-two-crates.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Finclude-macros%2Fsame-file-in-two-crates.rs?ref=da5c911b5f9c0def28662e52e47773d0438f4641", "patch": "@@ -0,0 +1,21 @@\n+// This test makes sure that the compiler can handle the same source file to be\n+// part of the local crate *and* an upstream crate. This can happen, for example,\n+// when there is some auto-generated code that is part of both a library and an\n+// accompanying integration test.\n+//\n+// The test uses include!() to include a source file that is also part of\n+// an upstream crate.\n+//\n+// This is a regression test for https://github.com/rust-lang/rust/issues/85955.\n+\n+// check-pass\n+// compile-flags: --crate-type=rlib\n+// aux-build:same-file-in-two-crates-aux.rs\n+extern crate same_file_in_two_crates_aux;\n+\n+pub fn foo() -> u32 {\n+    same_file_in_two_crates_aux::some_function() +\n+    some_function()\n+}\n+\n+include!(\"./auxiliary/same-file-in-two-crates-aux.rs\");"}]}