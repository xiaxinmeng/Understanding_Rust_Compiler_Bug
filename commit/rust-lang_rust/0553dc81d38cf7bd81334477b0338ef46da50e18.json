{"sha": "0553dc81d38cf7bd81334477b0338ef46da50e18", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA1NTNkYzgxZDM4Y2Y3YmQ4MTMzNDQ3N2IwMzM4ZWY0NmRhNTBlMTg=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-02-05T18:13:55Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2018-02-05T18:13:55Z"}, "message": "Rollup merge of #48007 - nrc:rls-field-init, r=eddyb\n\nsave-analysis: avoid implicit unwrap\n\nWhen looking up a field defintion, since the name might be incorrect in the field init shorthand case.\n\ncc https://github.com/rust-lang-nursery/rls/issues/699\n\nr? @eddyb", "tree": {"sha": "fdea43c93e46ce70ebc3a9f102a0bfa37cd6e69b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fdea43c93e46ce70ebc3a9f102a0bfa37cd6e69b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0553dc81d38cf7bd81334477b0338ef46da50e18", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJaeJ7jCRBK7hj4Ov3rIwAAdHIIAAuN/oApxiKxR7wVMczLKnDm\n2Ca7k7mjPYn0cqsnLSnnzpzpXxDkFzKVq9JaI4iWXH+2RjF8Fmxs+eAhwCnCSjZq\ntgHEQua3AbrHrOUcBA2/Z2lIsofu9wPBu4uPOk0WithvZu9FATiLXLS3B9Io3ees\ngUWMlosdAZz1GO/I2upgLI6AGzzUOYqMNwDrh1i75Eb3k8uusJSAljdTgqYpZ6od\nDpzRyN3klQRBMoEn6uI2Bnj5CteY9+0eduTdcVWL31dyUi1egzGnwJ6epyhnMAsD\npmg9ql0bC7CjMNtM7otyYI21c9c/jSk/25CHGOZRGdPzCqfujeX6YX3BBt1SKYY=\n=10+z\n-----END PGP SIGNATURE-----\n", "payload": "tree fdea43c93e46ce70ebc3a9f102a0bfa37cd6e69b\nparent e2f6e134c12e5d0b2ac348c10499eafa5e4ea302\nparent 3c72a848e9d4470d49969fa0ef0a0a8a0c24d681\nauthor kennytm <kennytm@gmail.com> 1517854435 +0800\ncommitter GitHub <noreply@github.com> 1517854435 +0800\n\nRollup merge of #48007 - nrc:rls-field-init, r=eddyb\n\nsave-analysis: avoid implicit unwrap\n\nWhen looking up a field defintion, since the name might be incorrect in the field init shorthand case.\n\ncc https://github.com/rust-lang-nursery/rls/issues/699\n\nr? @eddyb\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0553dc81d38cf7bd81334477b0338ef46da50e18", "html_url": "https://github.com/rust-lang/rust/commit/0553dc81d38cf7bd81334477b0338ef46da50e18", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0553dc81d38cf7bd81334477b0338ef46da50e18/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e2f6e134c12e5d0b2ac348c10499eafa5e4ea302", "url": "https://api.github.com/repos/rust-lang/rust/commits/e2f6e134c12e5d0b2ac348c10499eafa5e4ea302", "html_url": "https://github.com/rust-lang/rust/commit/e2f6e134c12e5d0b2ac348c10499eafa5e4ea302"}, {"sha": "3c72a848e9d4470d49969fa0ef0a0a8a0c24d681", "url": "https://api.github.com/repos/rust-lang/rust/commits/3c72a848e9d4470d49969fa0ef0a0a8a0c24d681", "html_url": "https://github.com/rust-lang/rust/commit/3c72a848e9d4470d49969fa0ef0a0a8a0c24d681"}], "stats": {"total": 10, "additions": 9, "deletions": 1}, "files": [{"sha": "841350bdb68e117d1e2c5ec7d9ea58a9bfb85ff4", "filename": "src/librustc_save_analysis/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0553dc81d38cf7bd81334477b0338ef46da50e18/src%2Flibrustc_save_analysis%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0553dc81d38cf7bd81334477b0338ef46da50e18/src%2Flibrustc_save_analysis%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_save_analysis%2Flib.rs?ref=0553dc81d38cf7bd81334477b0338ef46da50e18", "patch": "@@ -791,7 +791,7 @@ impl<'l, 'tcx: 'l> SaveContext<'l, 'tcx> {\n         field_ref: &ast::Field,\n         variant: &ty::VariantDef,\n     ) -> Option<Ref> {\n-        let f = variant.field_named(field_ref.ident.node.name);\n+        let f = variant.find_field_named(field_ref.ident.node.name)?;\n         // We don't really need a sub-span here, but no harm done\n         let sub_span = self.span_utils.span_for_last_ident(field_ref.ident.span);\n         filter!(self.span_utils, sub_span, field_ref.ident.span, None);"}, {"sha": "07322d8bbc3253cb9c03556e479bb50c898c52f1", "filename": "src/test/run-make/save-analysis-fail/foo.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/0553dc81d38cf7bd81334477b0338ef46da50e18/src%2Ftest%2Frun-make%2Fsave-analysis-fail%2Ffoo.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0553dc81d38cf7bd81334477b0338ef46da50e18/src%2Ftest%2Frun-make%2Fsave-analysis-fail%2Ffoo.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fsave-analysis-fail%2Ffoo.rs?ref=0553dc81d38cf7bd81334477b0338ef46da50e18", "patch": "@@ -451,3 +451,11 @@ extern {\n     static EXTERN_FOO: u8;\n     fn extern_foo(a: u8, b: i32) -> String;\n }\n+\n+struct Rls699 {\n+  f: u32,\n+}\n+\n+fn new(f: u32) -> Rls699 {\n+    Rls699 { fs }\n+}"}]}