{"sha": "a03cba38f1aac7685f91957e9eaa00ab9962019d", "node_id": "MDY6Q29tbWl0NzI0NzEyOmEwM2NiYTM4ZjFhYWM3Njg1ZjkxOTU3ZTllYWEwMGFiOTk2MjAxOWQ=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2021-04-22T11:50:23Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2021-04-22T11:50:23Z"}, "message": "Prevent control, shift and alt keys to make search input lose focus", "tree": {"sha": "64d6c6031cbd32001601216511b7f62a289aeff4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/64d6c6031cbd32001601216511b7f62a289aeff4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a03cba38f1aac7685f91957e9eaa00ab9962019d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a03cba38f1aac7685f91957e9eaa00ab9962019d", "html_url": "https://github.com/rust-lang/rust/commit/a03cba38f1aac7685f91957e9eaa00ab9962019d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a03cba38f1aac7685f91957e9eaa00ab9962019d/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cc44ce0a3f379bc6e8a4078ee6f0b1a4237fa975", "url": "https://api.github.com/repos/rust-lang/rust/commits/cc44ce0a3f379bc6e8a4078ee6f0b1a4237fa975", "html_url": "https://github.com/rust-lang/rust/commit/cc44ce0a3f379bc6e8a4078ee6f0b1a4237fa975"}], "stats": {"total": 9, "additions": 6, "deletions": 3}, "files": [{"sha": "9fab435de49c8b8c8739cbf7d3ec37224e7ab411", "filename": "src/librustdoc/html/static/search.js", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/a03cba38f1aac7685f91957e9eaa00ab9962019d/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fsearch.js", "raw_url": "https://github.com/rust-lang/rust/raw/a03cba38f1aac7685f91957e9eaa00ab9962019d/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fsearch.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fsearch.js?ref=a03cba38f1aac7685f91957e9eaa00ab9962019d", "patch": "@@ -935,6 +935,9 @@ window.initSearch = function(rawSearchIndex) {\n                 });\n                 current += 1;\n             });\n+            var SHIFT = 16;\n+            var CTRL = 17;\n+            var ALT = 18;\n \n             var currentTab = searchState.currentTab;\n             if (e.which === 38) { // up\n@@ -967,10 +970,10 @@ window.initSearch = function(rawSearchIndex) {\n                 e.preventDefault();\n             } else if (e.which === 13) { // return\n                 if (actives[currentTab].length) {\n-                    document.location.href =\n-                        actives[currentTab][0].getElementsByTagName(\"a\")[0].href;\n+                    var elem = actives[currentTab][0].getElementsByTagName(\"a\")[0];\n+                    document.location.href = elem.href;\n                 }\n-            } else if (e.which === 16) { // shift\n+            } else if ([SHIFT, CTRL, ALT].indexOf(e.which) !== -1) {\n                 // Does nothing, it's just to avoid losing \"focus\" on the highlighted element.\n             } else if (actives[currentTab].length > 0) {\n                 removeClass(actives[currentTab][0], \"highlighted\");"}]}