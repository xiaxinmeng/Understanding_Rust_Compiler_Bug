{"sha": "bf9cd6ee30b3044b61e99e24e82fad56d3965417", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJmOWNkNmVlMzBiMzA0NGI2MWU5OWUyNGU4MmZhZDU2ZDM5NjU0MTc=", "commit": {"author": {"name": "bors[bot]", "email": "bors[bot]@users.noreply.github.com", "date": "2019-01-23T19:15:50Z"}, "committer": {"name": "bors[bot]", "email": "bors[bot]@users.noreply.github.com", "date": "2019-01-23T19:15:50Z"}, "message": "Merge #617 #618\n\n617: Use npm ci instead of install r=matklad a=h-michael\n\nfix #422\r\n\r\n`npm install` is always recreate `package-lock.json`.\r\nSo we might use `npm ci` with `install-code`\r\n\r\nhttps://docs.npmjs.com/cli/ci.html#description\n\n618: Add install-lsp subcommand r=matklad a=h-michael\n\nrelated https://github.com/rust-analyzer/rust-analyzer/pull/617#issuecomment-456914650\n\nCo-authored-by: Hirokazu Hata <h.hata.ai.t@gmail.com>", "tree": {"sha": "aae7f2b67c0dada75fc6860c3f2e4e4464e53165", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/aae7f2b67c0dada75fc6860c3f2e4e4464e53165"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bf9cd6ee30b3044b61e99e24e82fad56d3965417", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bf9cd6ee30b3044b61e99e24e82fad56d3965417", "html_url": "https://github.com/rust-lang/rust/commit/bf9cd6ee30b3044b61e99e24e82fad56d3965417", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bf9cd6ee30b3044b61e99e24e82fad56d3965417/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "parents": [{"sha": "e3b6b5d27ec5976ba0d2390829a29185bcd71eba", "url": "https://api.github.com/repos/rust-lang/rust/commits/e3b6b5d27ec5976ba0d2390829a29185bcd71eba", "html_url": "https://github.com/rust-lang/rust/commit/e3b6b5d27ec5976ba0d2390829a29185bcd71eba"}, {"sha": "0dc60e10acfb1e82dfeb9ab98dc6eabf70a74530", "url": "https://api.github.com/repos/rust-lang/rust/commits/0dc60e10acfb1e82dfeb9ab98dc6eabf70a74530", "html_url": "https://github.com/rust-lang/rust/commit/0dc60e10acfb1e82dfeb9ab98dc6eabf70a74530"}, {"sha": "7bd38fb927013e47015abb2e0fd5c2df7261019c", "url": "https://api.github.com/repos/rust-lang/rust/commits/7bd38fb927013e47015abb2e0fd5c2df7261019c", "html_url": "https://github.com/rust-lang/rust/commit/7bd38fb927013e47015abb2e0fd5c2df7261019c"}], "stats": {"total": 10, "additions": 7, "deletions": 3}, "files": [{"sha": "3fba0f71d98a185f54fbd95a7ab181ff1e4b8aa5", "filename": ".cargo/config", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/bf9cd6ee30b3044b61e99e24e82fad56d3965417/.cargo%2Fconfig", "raw_url": "https://github.com/rust-lang/rust/raw/bf9cd6ee30b3044b61e99e24e82fad56d3965417/.cargo%2Fconfig", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.cargo%2Fconfig?ref=bf9cd6ee30b3044b61e99e24e82fad56d3965417", "patch": "@@ -1,8 +1,10 @@\n [alias]\n # Automatically generates the ast and syntax kinds files\n gen-syntax   = \"run --package tools --bin tools -- gen-syntax\"\n-# Extracts the tests from \n+# Extracts the tests from\n gen-tests    = \"run --package tools --bin tools -- gen-tests\"\n+# Installs ra_lsp_server\n+install-lsp = \"install --path crates/ra_lsp_server --force\"\n # Installs the visual studio code extension\n install-code = \"run --package tools --bin tools -- install-code\"\n # Formats the full repository or installs the git hook to do it automatically."}, {"sha": "74f281ccbd9b558788a01e4e1051947e2b3060f8", "filename": "README.md", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bf9cd6ee30b3044b61e99e24e82fad56d3965417/README.md", "raw_url": "https://github.com/rust-lang/rust/raw/bf9cd6ee30b3044b61e99e24e82fad56d3965417/README.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/README.md?ref=bf9cd6ee30b3044b61e99e24e82fad56d3965417", "patch": "@@ -29,6 +29,8 @@ $ cargo run --package ra_cli parse < crates/ra_syntax/src/lib.rs\n $ cargo run --package ra_cli symbols < crates/ra_syntax/src/lib.rs\n \n # install the language server\n+$ cargo install-lsp\n+or\n $ cargo install --path crates/ra_lsp_server\n ```\n "}, {"sha": "d6eabce6c62716c39efeba5e547522c137e0ba43", "filename": "crates/tools/src/main.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/bf9cd6ee30b3044b61e99e24e82fad56d3965417/crates%2Ftools%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bf9cd6ee30b3044b61e99e24e82fad56d3965417/crates%2Ftools%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Ftools%2Fsrc%2Fmain.rs?ref=bf9cd6ee30b3044b61e99e24e82fad56d3965417", "patch": "@@ -150,10 +150,10 @@ fn existing_tests(dir: &Path, ok: bool) -> Result<HashMap<String, (PathBuf, Test\n fn install_code_extension() -> Result<()> {\n     run(\"cargo install --path crates/ra_lsp_server --force\", \".\")?;\n     if cfg!(windows) {\n-        run(r\"cmd.exe /c npm.cmd install\", \"./editors/code\")?;\n+        run(r\"cmd.exe /c npm.cmd ci\", \"./editors/code\")?;\n         run(r\"cmd.exe /c npm.cmd run package\", \"./editors/code\")?;\n     } else {\n-        run(r\"npm install\", \"./editors/code\")?;\n+        run(r\"npm ci\", \"./editors/code\")?;\n         run(r\"npm run package\", \"./editors/code\")?;\n     }\n     if cfg!(windows) {"}]}