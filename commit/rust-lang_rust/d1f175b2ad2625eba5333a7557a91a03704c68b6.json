{"sha": "d1f175b2ad2625eba5333a7557a91a03704c68b6", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQxZjE3NWIyYWQyNjI1ZWJhNTMzM2E3NTU3YTkxYTAzNzA0YzY4YjY=", "commit": {"author": {"name": "Dylan DPC", "email": "dylan.dpc@gmail.com", "date": "2020-02-18T15:07:24Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-02-18T15:07:24Z"}, "message": "Rollup merge of #69192 - JohnTitor:add-tests, r=Centril\n\nAdd more regression tests\n\nCloses #39618\nCloses #51798\nCloses #62894\nCloses #63952\nCloses #68653\n\nr? @Centril", "tree": {"sha": "5e8cee6f6a587f3bf507c7b2e4bdec3ab432ade0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5e8cee6f6a587f3bf507c7b2e4bdec3ab432ade0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d1f175b2ad2625eba5333a7557a91a03704c68b6", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJeS/2sCRBK7hj4Ov3rIwAAdHIIAAht9X5nUqPmEtf+LbqBz4rH\ni8jsjVOqqMbdZ6UWOJGRkQgeEE9aqZMPl6yBFM4M9WhVDFiT2AkRJ1CMBTzB+HtY\n052wG7y0XcIzI3aMHMfSRl9ZaEj8eBcsNm8unK0NhVtYZlEyp1ZZy7QZbW7+coLz\naORb65GRw6uQsyY73t28A/OkPKU6Z4QDHis+sMUeao4HpdudhBD+c5d0Cin53jPV\nKkJdHL0rodXi91qmWecqgOxBDNiMDfvwDV1tn95oby3sc4zf0YM3nUvO2qZu3UW0\nyy0QaQ5cDdhiZV7C0icHrGspdh+UimsFp4yqwYiYYRQV9oQrb4f71MTvRIg8DUc=\n=RBWl\n-----END PGP SIGNATURE-----\n", "payload": "tree 5e8cee6f6a587f3bf507c7b2e4bdec3ab432ade0\nparent 391e7e26ae05a37c03300f60f6345c0006a5a62c\nparent 2f39ec24b20bc1ef09c7810f8210ea48bb5a3d29\nauthor Dylan DPC <dylan.dpc@gmail.com> 1582038444 +0100\ncommitter GitHub <noreply@github.com> 1582038444 +0100\n\nRollup merge of #69192 - JohnTitor:add-tests, r=Centril\n\nAdd more regression tests\n\nCloses #39618\nCloses #51798\nCloses #62894\nCloses #63952\nCloses #68653\n\nr? @Centril\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d1f175b2ad2625eba5333a7557a91a03704c68b6", "html_url": "https://github.com/rust-lang/rust/commit/d1f175b2ad2625eba5333a7557a91a03704c68b6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d1f175b2ad2625eba5333a7557a91a03704c68b6/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "391e7e26ae05a37c03300f60f6345c0006a5a62c", "url": "https://api.github.com/repos/rust-lang/rust/commits/391e7e26ae05a37c03300f60f6345c0006a5a62c", "html_url": "https://github.com/rust-lang/rust/commit/391e7e26ae05a37c03300f60f6345c0006a5a62c"}, {"sha": "2f39ec24b20bc1ef09c7810f8210ea48bb5a3d29", "url": "https://api.github.com/repos/rust-lang/rust/commits/2f39ec24b20bc1ef09c7810f8210ea48bb5a3d29", "html_url": "https://github.com/rust-lang/rust/commit/2f39ec24b20bc1ef09c7810f8210ea48bb5a3d29"}], "stats": {"total": 159, "additions": 159, "deletions": 0}, "files": [{"sha": "35cbc7003f095183119ed320c2289901efa82ac3", "filename": "src/test/ui/consts/issue-63952.rs", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/d1f175b2ad2625eba5333a7557a91a03704c68b6/src%2Ftest%2Fui%2Fconsts%2Fissue-63952.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d1f175b2ad2625eba5333a7557a91a03704c68b6/src%2Ftest%2Fui%2Fconsts%2Fissue-63952.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fissue-63952.rs?ref=d1f175b2ad2625eba5333a7557a91a03704c68b6", "patch": "@@ -0,0 +1,28 @@\n+// Regression test for #63952, shouldn't hang.\n+\n+use std::usize;\n+\n+#[repr(C)]\n+#[derive(Copy, Clone)]\n+struct SliceRepr {\n+    ptr: *const u8,\n+    len: usize,\n+}\n+\n+union SliceTransmute {\n+    repr: SliceRepr,\n+    slice: &'static [u8],\n+}\n+\n+// bad slice: length too big to even exist anywhere\n+const SLICE_WAY_TOO_LONG: &[u8] = unsafe { //~ ERROR: it is undefined behavior to use this value\n+    SliceTransmute {\n+        repr: SliceRepr {\n+            ptr: &42,\n+            len: usize::MAX,\n+        },\n+    }\n+    .slice\n+};\n+\n+fn main() {}"}, {"sha": "d5ed970fc3533d09ca7283f74d2e3487057dead4", "filename": "src/test/ui/consts/issue-63952.stderr", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/d1f175b2ad2625eba5333a7557a91a03704c68b6/src%2Ftest%2Fui%2Fconsts%2Fissue-63952.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/d1f175b2ad2625eba5333a7557a91a03704c68b6/src%2Ftest%2Fui%2Fconsts%2Fissue-63952.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fissue-63952.stderr?ref=d1f175b2ad2625eba5333a7557a91a03704c68b6", "patch": "@@ -0,0 +1,17 @@\n+error[E0080]: it is undefined behavior to use this value\n+  --> $DIR/issue-63952.rs:18:1\n+   |\n+LL | / const SLICE_WAY_TOO_LONG: &[u8] = unsafe {\n+LL | |     SliceTransmute {\n+LL | |         repr: SliceRepr {\n+LL | |             ptr: &42,\n+...  |\n+LL | |     .slice\n+LL | | };\n+   | |__^ invalid slice: total size is bigger than largest supported object\n+   |\n+   = note: The rules on what exactly is undefined behavior aren't clear, so this check might be overzealous. Please open an issue on the rustc repository if you believe it should not be considered undefined behavior.\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0080`."}, {"sha": "01f4c95639d195ced536abd5fe25f74af186397b", "filename": "src/test/ui/generic-associated-types/issue-68653.rs", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/d1f175b2ad2625eba5333a7557a91a03704c68b6/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fissue-68653.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d1f175b2ad2625eba5333a7557a91a03704c68b6/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fissue-68653.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fissue-68653.rs?ref=d1f175b2ad2625eba5333a7557a91a03704c68b6", "patch": "@@ -0,0 +1,16 @@\n+// A regression test for #68653, which was fixed by #68938.\n+\n+// check-pass\n+\n+#![allow(incomplete_features)]\n+#![feature(generic_associated_types)]\n+\n+trait Fun {\n+    type F<'a: 'a>;\n+}\n+\n+impl <T> Fun for T {\n+    type F<'a> = Self;\n+}\n+\n+fn main() {}"}, {"sha": "fef5213db9f7a51d057da27fa9f6710d2c395d4a", "filename": "src/test/ui/issues/auxiliary/issue-51798.rs", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/d1f175b2ad2625eba5333a7557a91a03704c68b6/src%2Ftest%2Fui%2Fissues%2Fauxiliary%2Fissue-51798.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d1f175b2ad2625eba5333a7557a91a03704c68b6/src%2Ftest%2Fui%2Fissues%2Fauxiliary%2Fissue-51798.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fauxiliary%2Fissue-51798.rs?ref=d1f175b2ad2625eba5333a7557a91a03704c68b6", "patch": "@@ -0,0 +1,3 @@\n+#![crate_type = \"lib\"]\n+\n+pub fn vec() -> Vec<u8> { vec![] }"}, {"sha": "b075809e93ac29ba62663c1294b0207d49e87ae0", "filename": "src/test/ui/issues/issue-51798.rs", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/d1f175b2ad2625eba5333a7557a91a03704c68b6/src%2Ftest%2Fui%2Fissues%2Fissue-51798.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d1f175b2ad2625eba5333a7557a91a03704c68b6/src%2Ftest%2Fui%2Fissues%2Fissue-51798.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-51798.rs?ref=d1f175b2ad2625eba5333a7557a91a03704c68b6", "patch": "@@ -0,0 +1,14 @@\n+// edition:2018\n+// aux-build:issue-51798.rs\n+// check-pass\n+\n+extern crate issue_51798;\n+\n+mod server {\n+    fn f() {\n+        let mut v = issue_51798::vec();\n+        v.clear();\n+    }\n+}\n+\n+fn main() {}"}, {"sha": "b9c0bf834ddb251e19ec6f614f1427b12a15fe07", "filename": "src/test/ui/parser/issue-62894.rs", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/d1f175b2ad2625eba5333a7557a91a03704c68b6/src%2Ftest%2Fui%2Fparser%2Fissue-62894.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d1f175b2ad2625eba5333a7557a91a03704c68b6/src%2Ftest%2Fui%2Fparser%2Fissue-62894.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fissue-62894.rs?ref=d1f175b2ad2625eba5333a7557a91a03704c68b6", "patch": "@@ -0,0 +1,7 @@\n+// Regression test for #62894, shouldn't crash.\n+// error-pattern: this file contains an unclosed delimiter\n+// error-pattern: expected one of `(`, `[`, or `{`, found keyword `fn`\n+\n+fn f() { assert_eq!(f(), (), assert_eq!(assert_eq!\n+\n+fn main() {}"}, {"sha": "6db380f7a7fe22c42fb9c93bc52debbc7a40d008", "filename": "src/test/ui/parser/issue-62894.stderr", "status": "added", "additions": 47, "deletions": 0, "changes": 47, "blob_url": "https://github.com/rust-lang/rust/blob/d1f175b2ad2625eba5333a7557a91a03704c68b6/src%2Ftest%2Fui%2Fparser%2Fissue-62894.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/d1f175b2ad2625eba5333a7557a91a03704c68b6/src%2Ftest%2Fui%2Fparser%2Fissue-62894.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fissue-62894.stderr?ref=d1f175b2ad2625eba5333a7557a91a03704c68b6", "patch": "@@ -0,0 +1,47 @@\n+error: this file contains an unclosed delimiter\n+  --> $DIR/issue-62894.rs:7:14\n+   |\n+LL | fn f() { assert_eq!(f(), (), assert_eq!(assert_eq!\n+   |        -           -                   - unclosed delimiter\n+   |        |           |\n+   |        |           unclosed delimiter\n+   |        unclosed delimiter\n+LL | \n+LL | fn main() {}\n+   |              ^\n+\n+error: this file contains an unclosed delimiter\n+  --> $DIR/issue-62894.rs:7:14\n+   |\n+LL | fn f() { assert_eq!(f(), (), assert_eq!(assert_eq!\n+   |        -           -                   - unclosed delimiter\n+   |        |           |\n+   |        |           unclosed delimiter\n+   |        unclosed delimiter\n+LL | \n+LL | fn main() {}\n+   |              ^\n+\n+error: this file contains an unclosed delimiter\n+  --> $DIR/issue-62894.rs:7:14\n+   |\n+LL | fn f() { assert_eq!(f(), (), assert_eq!(assert_eq!\n+   |        -           -                   - unclosed delimiter\n+   |        |           |\n+   |        |           unclosed delimiter\n+   |        unclosed delimiter\n+LL | \n+LL | fn main() {}\n+   |              ^\n+\n+error: expected one of `(`, `[`, or `{`, found keyword `fn`\n+  --> $DIR/issue-62894.rs:7:1\n+   |\n+LL | fn f() { assert_eq!(f(), (), assert_eq!(assert_eq!\n+   |                                                   - expected one of `(`, `[`, or `{`\n+LL | \n+LL | fn main() {}\n+   | ^^ unexpected token\n+\n+error: aborting due to 4 previous errors\n+"}, {"sha": "20e81e4359bacf0e177b28c8971796f4553c31d2", "filename": "src/test/ui/specialization/issue-39618.rs", "status": "added", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/d1f175b2ad2625eba5333a7557a91a03704c68b6/src%2Ftest%2Fui%2Fspecialization%2Fissue-39618.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d1f175b2ad2625eba5333a7557a91a03704c68b6/src%2Ftest%2Fui%2Fspecialization%2Fissue-39618.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fspecialization%2Fissue-39618.rs?ref=d1f175b2ad2625eba5333a7557a91a03704c68b6", "patch": "@@ -0,0 +1,27 @@\n+// Regression test for #39618, shouldn't crash.\n+// FIXME(JohnTitor): Centril pointed out this looks suspicions, we should revisit here.\n+// More context: https://github.com/rust-lang/rust/pull/69192#discussion_r379846796\n+\n+// check-pass\n+\n+#![feature(specialization)]\n+\n+trait Foo {\n+    fn foo(&self);\n+}\n+\n+trait Bar {\n+    fn bar(&self);\n+}\n+\n+impl<T> Bar for T where T: Foo {\n+    fn bar(&self) {}\n+}\n+\n+impl<T> Foo for T where T: Bar {\n+    fn foo(&self) {}\n+}\n+\n+impl Foo for u64 {}\n+\n+fn main() {}"}]}