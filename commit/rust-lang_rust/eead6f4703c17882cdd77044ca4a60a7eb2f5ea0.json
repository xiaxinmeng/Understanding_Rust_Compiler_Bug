{"sha": "eead6f4703c17882cdd77044ca4a60a7eb2f5ea0", "node_id": "C_kwDOAAsO6NoAKGVlYWQ2ZjQ3MDNjMTc4ODJjZGQ3NzA0NGNhNGE2MGE3ZWIyZjVlYTA", "commit": {"author": {"name": "Michael Goulet", "email": "michael@errs.io", "date": "2023-05-12T00:43:09Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-05-12T00:43:09Z"}, "message": "Rollup merge of #111459 - GuillaumeGomez:update-browser-ui-test, r=notriddle\n\nUpdate browser-ui-test version to 0.16.0\n\nThis new version brings one major improvement: it allows to use the original color format in checks (I plan to slowly continue converting colors back to their \"original\" format, ie the one used in CSS).\n\nIt also provides some improvements in some commands API.\n\nr? `````@notriddle`````", "tree": {"sha": "38e6fea57421f26a5d60eceb00ddcafe42e1f8a1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/38e6fea57421f26a5d60eceb00ddcafe42e1f8a1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJkXYudCRBK7hj4Ov3rIwAAIDoIADXp2Wajo8y6wPbYL2zZW8ef\nJIWFa4xoykHPz2zyAefmKlhcCCW9Kuro0ocsccZ9f1fa1+5bSbKER7e+eC5yvSrA\nvFJRITCx7uAfPvSr9tJZFVbNypIaD6EAQBDm7JjZ5+8FH9x10MOCQoOkcChSDD4r\nr8qaRf3GKe8TWKqy/izllHFbRpm/5WaTHXuZighG56Y7Qq6xFZVVmx1r2jqBHttv\nJ8qXjTItLvITnkMeTXoD30+jzrykbn0Mwjup0RS3isNRzWDLBAWB+2yDhbrv+32m\nh8k64SLZnJjUHBVzFo2i+ASeDDYcUV4TQ/MD4rbNI+A7ocLgOFnOQapqfn4xKsI=\n=N77Z\n-----END PGP SIGNATURE-----\n", "payload": "tree 38e6fea57421f26a5d60eceb00ddcafe42e1f8a1\nparent 7c31df9d6c7f0baf38c331607dbc51be50d9eb84\nparent 8e55400ec9b7b529ea28b1b152f2c5ad203761a6\nauthor Michael Goulet <michael@errs.io> 1683852189 -0700\ncommitter GitHub <noreply@github.com> 1683852189 -0700\n\nRollup merge of #111459 - GuillaumeGomez:update-browser-ui-test, r=notriddle\n\nUpdate browser-ui-test version to 0.16.0\n\nThis new version brings one major improvement: it allows to use the original color format in checks (I plan to slowly continue converting colors back to their \"original\" format, ie the one used in CSS).\n\nIt also provides some improvements in some commands API.\n\nr? `````@notriddle`````\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0", "html_url": "https://github.com/rust-lang/rust/commit/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/comments", "author": {"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7c31df9d6c7f0baf38c331607dbc51be50d9eb84", "url": "https://api.github.com/repos/rust-lang/rust/commits/7c31df9d6c7f0baf38c331607dbc51be50d9eb84", "html_url": "https://github.com/rust-lang/rust/commit/7c31df9d6c7f0baf38c331607dbc51be50d9eb84"}, {"sha": "8e55400ec9b7b529ea28b1b152f2c5ad203761a6", "url": "https://api.github.com/repos/rust-lang/rust/commits/8e55400ec9b7b529ea28b1b152f2c5ad203761a6", "html_url": "https://github.com/rust-lang/rust/commit/8e55400ec9b7b529ea28b1b152f2c5ad203761a6"}], "stats": {"total": 151, "additions": 70, "deletions": 81}, "files": [{"sha": "d183d4ace05b92877cec0b45daa9e26b09182d7d", "filename": "src/ci/docker/host-x86_64/x86_64-gnu-tools/browser-ui-test.version", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2Fbrowser-ui-test.version", "raw_url": "https://github.com/rust-lang/rust/raw/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2Fbrowser-ui-test.version", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2Fbrowser-ui-test.version?ref=eead6f4703c17882cdd77044ca4a60a7eb2f5ea0", "patch": "@@ -1 +1 @@\n-0.15.0\n\\ No newline at end of file\n+0.16.0\n\\ No newline at end of file"}, {"sha": "b26480f668b370f67bae98a3b5317e186af79ffc", "filename": "src/tools/rustdoc-gui/tester.js", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/src%2Ftools%2Frustdoc-gui%2Ftester.js", "raw_url": "https://github.com/rust-lang/rust/raw/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/src%2Ftools%2Frustdoc-gui%2Ftester.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Frustdoc-gui%2Ftester.js?ref=eead6f4703c17882cdd77044ca4a60a7eb2f5ea0", "patch": "@@ -143,7 +143,7 @@ async function runTests(opts, framework_options, files, results, status_bar, sho\n     const tests_queue = [];\n \n     for (const testPath of files) {\n-        const callback = runTest(testPath, framework_options)\n+        const callback = runTest(testPath, {\"options\": framework_options})\n             .then(out => {\n                 const [output, nb_failures] = out;\n                 results[nb_failures === 0 ? \"successful\" : \"failed\"].push({\n@@ -323,6 +323,7 @@ async function main(argv) {\n     if (results.failed.length > 0 || results.errored.length > 0) {\n         process.exit(1);\n     }\n+    process.exit(0);\n }\n \n main(process.argv);"}, {"sha": "f25c88690e55146242eb622801bf74a917f30f37", "filename": "tests/rustdoc-gui/check-stab-in-docblock.goml", "status": "modified", "additions": 12, "deletions": 6, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/tests%2Frustdoc-gui%2Fcheck-stab-in-docblock.goml", "raw_url": "https://github.com/rust-lang/rust/raw/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/tests%2Frustdoc-gui%2Fcheck-stab-in-docblock.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fcheck-stab-in-docblock.goml?ref=eead6f4703c17882cdd77044ca4a60a7eb2f5ea0", "patch": "@@ -7,20 +7,26 @@ set-window-size: (786, 600)\n // Confirms that there 3 paragraphs.\n assert-count: (\".top-doc .docblock p\", 3)\n // Checking that there is no scrollable content.\n-store-property: (clientHeight, \".top-doc .docblock p:nth-of-type(1)\", \"clientHeight\")\n-store-property: (clientWidth, \".top-doc .docblock p:nth-of-type(1)\", \"clientWidth\")\n+store-property: (\".top-doc .docblock p:nth-of-type(1)\", {\n+    \"clientHeight\": clientHeight,\n+    \"clientWidth\": clientWidth,\n+})\n assert-property: (\n     \".top-doc .docblock p:nth-of-type(1)\",\n     {\"scrollHeight\": |clientHeight|, \"scrollWidth\": |clientWidth|},\n )\n-store-property: (clientHeight, \".top-doc .docblock p:nth-of-type(2)\", \"clientHeight\")\n-store-property: (clientWidth, \".top-doc .docblock p:nth-of-type(2)\", \"clientWidth\")\n+store-property: (\".top-doc .docblock p:nth-of-type(2)\", {\n+    \"clientHeight\": clientHeight,\n+    \"clientWidth\": clientWidth,\n+})\n assert-property: (\n     \".top-doc .docblock p:nth-of-type(2)\",\n     {\"scrollHeight\": |clientHeight|, \"scrollWidth\": |clientWidth|},\n )\n-store-property: (clientHeight, \".top-doc .docblock p:nth-of-type(3)\", \"clientHeight\")\n-store-property: (clientWidth, \".top-doc .docblock p:nth-of-type(3)\", \"clientWidth\")\n+store-property: (\".top-doc .docblock p:nth-of-type(3)\", {\n+    \"clientHeight\": clientHeight,\n+    \"clientWidth\": clientWidth,\n+})\n assert-property: (\n     \".top-doc .docblock p:nth-of-type(3)\",\n     {\"scrollHeight\": |clientHeight|, \"scrollWidth\": |clientWidth|},"}, {"sha": "a4b0558765abe00139630aa30896cd2a51bedc9d", "filename": "tests/rustdoc-gui/codeblock-sub.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/tests%2Frustdoc-gui%2Fcodeblock-sub.goml", "raw_url": "https://github.com/rust-lang/rust/raw/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/tests%2Frustdoc-gui%2Fcodeblock-sub.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fcodeblock-sub.goml?ref=eead6f4703c17882cdd77044ca4a60a7eb2f5ea0", "patch": "@@ -1,5 +1,5 @@\n // Test that code blocks nested within <sub> do not have a line height of 0.\n go-to: \"file://\" + |DOC_PATH| + \"/test_docs/codeblock_sub/index.html\"\n \n-store-property: (codeblock_sub_1, \"#codeblock-sub-1\", \"offsetHeight\")\n+store-property: (\"#codeblock-sub-1\", {\"offsetHeight\": codeblock_sub_1})\n assert-property-false: (\"#codeblock-sub-3\", { \"offsetHeight\": |codeblock_sub_1| })"}, {"sha": "8e6d2ba824f732ec6b394c319dad1b7e88c6caf6", "filename": "tests/rustdoc-gui/docblock-details.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/tests%2Frustdoc-gui%2Fdocblock-details.goml", "raw_url": "https://github.com/rust-lang/rust/raw/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/tests%2Frustdoc-gui%2Fdocblock-details.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fdocblock-details.goml?ref=eead6f4703c17882cdd77044ca4a60a7eb2f5ea0", "patch": "@@ -9,7 +9,7 @@ reload:\n assert-text: (\".top-doc .docblock > h3\", \"Hello\")\n assert-css: (\n     \".top-doc .docblock > h3\",\n-    {\"border-bottom\": \"1px solid rgb(210, 210, 210)\"},\n+    {\"border-bottom\": \"1px solid #d2d2d2\"},\n )\n // We now check that the `<summary>` doesn't have a bottom border and has the correct display.\n assert-css: ("}, {"sha": "030ff8f8a3e7086c3af542c3bd5ec835033ad570", "filename": "tests/rustdoc-gui/item-info.goml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/tests%2Frustdoc-gui%2Fitem-info.goml", "raw_url": "https://github.com/rust-lang/rust/raw/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/tests%2Frustdoc-gui%2Fitem-info.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fitem-info.goml?ref=eead6f4703c17882cdd77044ca4a60a7eb2f5ea0", "patch": "@@ -4,8 +4,8 @@ go-to: \"file://\" + |DOC_PATH| + \"/lib2/struct.Foo.html\"\n // We set a fixed size so there is no chance of \"random\" resize.\n set-window-size: (1100, 800)\n // We check that \".item-info\" is bigger than its content.\n-assert-css: (\".item-info\", {\"width\": \"840px\"})\n-assert-css: (\".item-info .stab\", {\"width\": \"289px\"})\n+assert-size: (\".item-info\", {\"width\": 840})\n+assert-size: (\".item-info .stab\", {\"width\": 289})\n assert-position: (\".item-info .stab\", {\"x\": 245})\n \n // Now we ensure that they're not rendered on the same line."}, {"sha": "ecb57c274a5d3e09a40ddc2466b84053785a284e", "filename": "tests/rustdoc-gui/notable-trait.goml", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/tests%2Frustdoc-gui%2Fnotable-trait.goml", "raw_url": "https://github.com/rust-lang/rust/raw/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/tests%2Frustdoc-gui%2Fnotable-trait.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fnotable-trait.goml?ref=eead6f4703c17882cdd77044ca4a60a7eb2f5ea0", "patch": "@@ -225,12 +225,12 @@ assert: \"#method\\.create_an_iterator_from_read .tooltip:focus\"\n \n // Now we check that the focus isn't given back to the wrong item when opening\n // another popover.\n-store-window-property: (scroll, \"scrollY\")\n+store-window-property: {\"scrollY\": scroll}\n click: \"#method\\.create_an_iterator_from_read .fn\"\n // We ensure that the scroll position changed.\n assert-window-property-false: {\"scrollY\": |scroll|}\n // Store the new position.\n-store-window-property: (scroll, \"scrollY\")\n+store-window-property: {\"scrollY\": scroll}\n click: \"//*[@id='method.create_an_iterator_from_read']//*[@class='tooltip']\"\n wait-for: \"//*[@class='tooltip popover']\"\n click: \"#settings-menu a\"\n@@ -239,12 +239,12 @@ click: \".search-input\"\n assert-window-property-false: {\"scrollY\": |scroll|}\n \n // Same but with Escape handling.\n-store-window-property: (scroll, \"scrollY\")\n+store-window-property: {\"scrollY\": scroll}\n click: \"#method\\.create_an_iterator_from_read .fn\"\n // We ensure that the scroll position changed.\n assert-window-property-false: {\"scrollY\": |scroll|}\n // Store the new position.\n-store-window-property: (scroll, \"scrollY\")\n+store-window-property: {\"scrollY\": scroll}\n click: \"//*[@id='method.create_an_iterator_from_read']//*[@class='tooltip']\"\n wait-for: \"//*[@class='tooltip popover']\"\n click: \"#settings-menu a\""}, {"sha": "af4293dfc0057c3f384ed59d5fd28580f1cf749e", "filename": "tests/rustdoc-gui/scrape-examples-button-focus.goml", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/tests%2Frustdoc-gui%2Fscrape-examples-button-focus.goml", "raw_url": "https://github.com/rust-lang/rust/raw/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/tests%2Frustdoc-gui%2Fscrape-examples-button-focus.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fscrape-examples-button-focus.goml?ref=eead6f4703c17882cdd77044ca4a60a7eb2f5ea0", "patch": "@@ -3,7 +3,7 @@\n go-to: \"file://\" + |DOC_PATH| + \"/scrape_examples/fn.test.html\"\n \n // The next/prev buttons vertically scroll the code viewport between examples\n-store-property: (initialScrollTop, \".scraped-example-list > .scraped-example pre\", \"scrollTop\")\n+store-property: (\".scraped-example-list > .scraped-example pre\", {\"scrollTop\": initialScrollTop})\n focus: \".scraped-example-list > .scraped-example .next\"\n press-key: \"Enter\"\n assert-property-false: (\".scraped-example-list > .scraped-example pre\", {\n@@ -16,7 +16,7 @@ assert-property: (\".scraped-example-list > .scraped-example pre\", {\n }, NEAR)\n \n // The expand button increases the scrollHeight of the minimized code viewport\n-store-property: (smallOffsetHeight, \".scraped-example-list > .scraped-example pre\", \"offsetHeight\")\n+store-property: (\".scraped-example-list > .scraped-example pre\", {\"offsetHeight\": smallOffsetHeight})\n assert-property-false: (\".scraped-example-list > .scraped-example pre\", {\n     \"scrollHeight\": |smallOffsetHeight|\n }, NEAR)\n@@ -25,7 +25,7 @@ press-key: \"Enter\"\n assert-property-false: (\".scraped-example-list > .scraped-example pre\", {\n     \"offsetHeight\": |smallOffsetHeight|\n }, NEAR)\n-store-property: (fullOffsetHeight, \".scraped-example-list > .scraped-example pre\", \"offsetHeight\")\n+store-property: (\".scraped-example-list > .scraped-example pre\", {\"offsetHeight\": fullOffsetHeight})\n assert-property: (\".scraped-example-list > .scraped-example pre\", {\n     \"scrollHeight\": |fullOffsetHeight|\n }, NEAR)"}, {"sha": "4fc1c1ac065f407e27670684bc02264f4dfeb0d1", "filename": "tests/rustdoc-gui/scrape-examples-layout.goml", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/tests%2Frustdoc-gui%2Fscrape-examples-layout.goml", "raw_url": "https://github.com/rust-lang/rust/raw/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/tests%2Frustdoc-gui%2Fscrape-examples-layout.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fscrape-examples-layout.goml?ref=eead6f4703c17882cdd77044ca4a60a7eb2f5ea0", "patch": "@@ -9,9 +9,8 @@ assert-property-false: (\n \n // Check that examples with very long lines have the same width as ones that don't.\n store-property: (\n-    clientWidth,\n     \".more-scraped-examples .scraped-example:nth-child(2) .code-wrapper .src-line-numbers\",\n-    \"clientWidth\"\n+    {\"clientWidth\": clientWidth},\n )\n \n assert-property: (\n@@ -40,8 +39,8 @@ assert-property: (\n store-value: (offset_y, 4)\n \n // First with desktop\n-assert-position: (\".scraped-example .code-wrapper\", {\"y\": 253})\n-assert-position: (\".scraped-example .code-wrapper .prev\", {\"y\": 253 + |offset_y|})\n+assert-position: (\".scraped-example .code-wrapper\", {\"y\": 226})\n+assert-position: (\".scraped-example .code-wrapper .prev\", {\"y\": 226 + |offset_y|})\n \n // Then with mobile\n set-window-size: (600, 600)"}, {"sha": "ee5598e4b21d0e80492fe8ba500f78b5e93b4573", "filename": "tests/rustdoc-gui/search-result-display.goml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/tests%2Frustdoc-gui%2Fsearch-result-display.goml", "raw_url": "https://github.com/rust-lang/rust/raw/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/tests%2Frustdoc-gui%2Fsearch-result-display.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fsearch-result-display.goml?ref=eead6f4703c17882cdd77044ca4a60a7eb2f5ea0", "patch": "@@ -32,8 +32,8 @@ set-text: (\n )\n \n // Then we compare again to confirm the height didn't change.\n-assert-css: (\"#crate-search\", {\"width\": \"527px\"})\n-assert-css: (\".search-results-title\", {\"height\": \"50px\", \"width\": \"640px\"})\n+assert-size: (\"#crate-search\", {\"width\": 527})\n+assert-size: (\".search-results-title\", {\"height\": 50, \"width\": 640})\n // And we check that the `<select>` isn't bigger than its container (\".search-results-title\").\n assert-css: (\"#search\", {\"width\": \"640px\"})\n "}, {"sha": "bf1fe7be9103664c9bc2a9de9ec9ce18afc660e3", "filename": "tests/rustdoc-gui/settings.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/tests%2Frustdoc-gui%2Fsettings.goml", "raw_url": "https://github.com/rust-lang/rust/raw/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/tests%2Frustdoc-gui%2Fsettings.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fsettings.goml?ref=eead6f4703c17882cdd77044ca4a60a7eb2f5ea0", "patch": "@@ -10,7 +10,7 @@ wait-for: \"#settings\"\n assert-css: (\"#settings\", {\"display\": \"block\"})\n \n // Store the line margin to compare with the settings.html later.\n-store-css: (setting_line_margin, \".setting-line\", \"margin\")\n+store-css: (\".setting-line\", {\"margin\": setting_line_margin})\n \n // Let's close it by clicking on the same button.\n click: \"#settings-menu\""}, {"sha": "0c680bcc9fba903a073db5cbebd4efa00408447f", "filename": "tests/rustdoc-gui/sidebar-source-code-display.goml", "status": "modified", "additions": 13, "deletions": 13, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/tests%2Frustdoc-gui%2Fsidebar-source-code-display.goml", "raw_url": "https://github.com/rust-lang/rust/raw/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/tests%2Frustdoc-gui%2Fsidebar-source-code-display.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fsidebar-source-code-display.goml?ref=eead6f4703c17882cdd77044ca4a60a7eb2f5ea0", "patch": "@@ -121,28 +121,28 @@ define-function: (\n \n call-function: (\"check-colors\", {\n     \"theme\": \"light\",\n-    \"color\": \"rgb(0, 0, 0)\",\n-    \"color_hover\": \"rgb(0, 0, 0)\",\n-    \"background\": \"rgb(255, 255, 255)\",\n-    \"background_hover\": \"rgb(224, 224, 224)\",\n+    \"color\": \"black\",\n+    \"color_hover\": \"#000\",\n+    \"background\": \"#fff\",\n+    \"background_hover\": \"#e0e0e0\",\n     \"background_toggle\": \"rgba(0, 0, 0, 0)\",\n-    \"background_toggle_hover\": \"rgb(224, 224, 224)\",\n+    \"background_toggle_hover\": \"#e0e0e0\",\n })\n call-function: (\"check-colors\", {\n     \"theme\": \"dark\",\n-    \"color\": \"rgb(221, 221, 221)\",\n-    \"color_hover\": \"rgb(221, 221, 221)\",\n-    \"background\": \"rgb(51, 51, 51)\",\n-    \"background_hover\": \"rgb(68, 68, 68)\",\n+    \"color\": \"#ddd\",\n+    \"color_hover\": \"#ddd\",\n+    \"background\": \"#333\",\n+    \"background_hover\": \"#444\",\n     \"background_toggle\": \"rgba(0, 0, 0, 0)\",\n-    \"background_toggle_hover\": \"rgb(103, 103, 103)\",\n+    \"background_toggle_hover\": \"#676767\",\n })\n call-function: (\"check-colors\", {\n     \"theme\": \"ayu\",\n-    \"color\": \"rgb(197, 197, 197)\",\n-    \"color_hover\": \"rgb(255, 180, 76)\",\n+    \"color\": \"#c5c5c5\",\n+    \"color_hover\": \"#ffb44c\",\n     \"background\": \"rgb(20, 25, 31)\",\n-    \"background_hover\": \"rgb(20, 25, 31)\",\n+    \"background_hover\": \"#14191f\",\n     \"background_toggle\": \"rgba(0, 0, 0, 0)\",\n     \"background_toggle_hover\": \"rgba(70, 70, 70, 0.33)\",\n })"}, {"sha": "574cc629a04303c4816882a0aca2900e6bbb0166", "filename": "tests/rustdoc-gui/sidebar.goml", "status": "modified", "additions": 8, "deletions": 6, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/tests%2Frustdoc-gui%2Fsidebar.goml", "raw_url": "https://github.com/rust-lang/rust/raw/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/tests%2Frustdoc-gui%2Fsidebar.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fsidebar.goml?ref=eead6f4703c17882cdd77044ca4a60a7eb2f5ea0", "patch": "@@ -152,14 +152,16 @@ assert-property: (\".sidebar\", {\"clientWidth\": \"200\"})\n \n // Checks that all.html and index.html have their sidebar link in the same place.\n go-to: \"file://\" + |DOC_PATH| + \"/test_docs/index.html\"\n-store-property: (index_sidebar_width, \".sidebar .location a\", \"clientWidth\")\n-store-property: (index_sidebar_height, \".sidebar .location a\", \"clientHeight\")\n-store-property: (index_sidebar_x, \".sidebar .location a\", \"offsetTop\")\n-store-property: (index_sidebar_y, \".sidebar .location a\", \"offsetLeft\")\n+store-property: (\".sidebar .location a\", {\n+    \"clientWidth\": index_sidebar_width,\n+    \"clientHeight\": index_sidebar_height,\n+    \"offsetTop\": index_sidebar_y,\n+    \"offsetLeft\": index_sidebar_x,\n+})\n go-to: \"file://\" + |DOC_PATH| + \"/test_docs/all.html\"\n assert-property: (\".sidebar .location a\", {\n     \"clientWidth\": |index_sidebar_width|,\n     \"clientHeight\": |index_sidebar_height|,\n-    \"offsetTop\": |index_sidebar_x|,\n-    \"offsetLeft\": |index_sidebar_y|,\n+    \"offsetTop\": |index_sidebar_y|,\n+    \"offsetLeft\": |index_sidebar_x|,\n })"}, {"sha": "5c795928bdc9a4aa6d9b1caa253474113325ca53", "filename": "tests/rustdoc-gui/source-code-page.goml", "status": "modified", "additions": 14, "deletions": 33, "changes": 47, "blob_url": "https://github.com/rust-lang/rust/blob/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/tests%2Frustdoc-gui%2Fsource-code-page.goml", "raw_url": "https://github.com/rust-lang/rust/raw/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/tests%2Frustdoc-gui%2Fsource-code-page.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fsource-code-page.goml?ref=eead6f4703c17882cdd77044ca4a60a7eb2f5ea0", "patch": "@@ -117,9 +117,8 @@ assert-property: (\"#source-sidebar details:first-of-type\", {\"open\": \"true\"})\n \n // Check the sidebar directory entries have a marker and spacing (desktop).\n store-property: (\n-    link_height,\n     \"#source-sidebar > details:first-of-type.dir-entry[open] > .files > a\",\n-    \"offsetHeight\"\n+    {\"offsetHeight\": link_height},\n )\n define-function: (\n     \"check-sidebar-dir-entry\",\n@@ -147,16 +146,10 @@ define-function: (\n         )\n     }\n )\n-store-property: (\n-    source_sidebar_title_height,\n-    \"#source-sidebar > .title\",\n-    \"offsetHeight\"\n-)\n-store-property: (\n-    source_sidebar_title_y,\n-    \"#source-sidebar > .title\",\n-    \"offsetTop\"\n-)\n+store-property: (\"#source-sidebar > .title\", {\n+    \"offsetHeight\": source_sidebar_title_height,\n+    \"offsetTop\": source_sidebar_title_y,\n+})\n call-function: (\"check-sidebar-dir-entry\", {\n     \"x\": 0,\n     // border + margin = 6\n@@ -182,16 +175,10 @@ assert-property: (\"#main-content\", {\"offsetTop\": 76})\n // 21 = 76 - 34 - 21\n \n // Check the sidebar directory entries have a marker and spacing (tablet).\n-store-property: (\n-    source_sidebar_title_height,\n-    \"#source-sidebar > .title\",\n-    \"offsetHeight\"\n-)\n-store-property: (\n-    source_sidebar_title_y,\n-    \"#source-sidebar > .title\",\n-    \"offsetTop\"\n-)\n+store-property: (\"#source-sidebar > .title\", {\n+    \"offsetHeight\": source_sidebar_title_height,\n+    \"offsetTop\": source_sidebar_title_y,\n+})\n call-function: (\"check-sidebar-dir-entry\", {\n     \"x\": 0,\n     \"y\": |source_sidebar_title_y| + |source_sidebar_title_height| + 6,\n@@ -202,22 +189,16 @@ set-window-size: (450, 700)\n assert-css: (\"nav.sub\", {\"flex-direction\": \"column\"})\n \n // Check the sidebar directory entries have a marker and spacing (phone).\n-store-property: (\n-    source_sidebar_title_height,\n-    \"#source-sidebar > .title\",\n-    \"offsetHeight\"\n-)\n-store-property: (\n-    source_sidebar_title_y,\n-    \"#source-sidebar > .title\",\n-    \"offsetTop\"\n-)\n+store-property: (\"#source-sidebar > .title\", {\n+    \"offsetHeight\": source_sidebar_title_height,\n+    \"offsetTop\": source_sidebar_title_y,\n+})\n call-function: (\"check-sidebar-dir-entry\", {\n     \"x\": 0,\n     \"y\": |source_sidebar_title_y| + |source_sidebar_title_height| + 6,\n })\n \n // Now we check that the logo has a bottom margin so it's not stuck to the search input.\n assert-css: (\".sub-logo-container > img\", {\"margin-bottom\": \"8px\"})\n-store-property: (logo_height, \".sub-logo-container\", \"clientHeight\")\n+store-property: (\".sub-logo-container\", {\"clientHeight\": logo_height})\n assert-position: (\".search-form\", {\"y\": |logo_height| + 8})"}, {"sha": "ff30bcdf2a22305b747ba2f32ef64a09576ab13e", "filename": "tests/rustdoc-gui/src-font-size.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/tests%2Frustdoc-gui%2Fsrc-font-size.goml", "raw_url": "https://github.com/rust-lang/rust/raw/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/tests%2Frustdoc-gui%2Fsrc-font-size.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fsrc-font-size.goml?ref=eead6f4703c17882cdd77044ca4a60a7eb2f5ea0", "patch": "@@ -11,6 +11,6 @@ assert-css: (\".impl-items .srclink\", {\"font-size\": \"16px\", \"font-weight\": 400},\n assert-css: (\".impl-items .code-header\", {\"font-size\": \"16px\", \"font-weight\": 600}, ALL)\n \n // Check that we can click on source link\n-store-document-property: (url, \"URL\")\n+store-document-property: {\"URL\": url}\n click: \".impl-items .srclink\"\n assert-document-property-false: {\"URL\": |url|}"}, {"sha": "3c87a4cd65427b11d6ae83cb8f4520379baaa687", "filename": "tests/rustdoc-gui/struct-fields.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/tests%2Frustdoc-gui%2Fstruct-fields.goml", "raw_url": "https://github.com/rust-lang/rust/raw/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/tests%2Frustdoc-gui%2Fstruct-fields.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fstruct-fields.goml?ref=eead6f4703c17882cdd77044ca4a60a7eb2f5ea0", "patch": "@@ -1,5 +1,5 @@\n // This test ensures that each field is on its own line (In other words, they have display: block).\n go-to: \"file://\" + |DOC_PATH| + \"/test_docs/struct.StructWithPublicUndocumentedFields.html\"\n \n-store-property: (first_top, \"//*[@id='structfield.first']\", \"offsetTop\")\n+store-property: (\"//*[@id='structfield.first']\", {\"offsetTop\": first_top})\n assert-property-false: (\"//*[@id='structfield.second']\", { \"offsetTop\": |first_top| })"}, {"sha": "f212781e9b340badd20fa6896b6b03c36a4defa0", "filename": "tests/rustdoc-gui/type-declation-overflow.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/tests%2Frustdoc-gui%2Ftype-declation-overflow.goml", "raw_url": "https://github.com/rust-lang/rust/raw/eead6f4703c17882cdd77044ca4a60a7eb2f5ea0/tests%2Frustdoc-gui%2Ftype-declation-overflow.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Ftype-declation-overflow.goml?ref=eead6f4703c17882cdd77044ca4a60a7eb2f5ea0", "patch": "@@ -39,7 +39,7 @@ assert-property: (\"pre.item-decl\", {\"scrollWidth\": \"950\"})\n set-window-size: (600, 600)\n go-to: \"file://\" + |DOC_PATH| + \"/lib2/too_long/struct.SuperIncrediblyLongLongLongLongLongLongLongGigaGigaGigaMegaLongLongLongStructName.html\"\n // It shouldn't have an overflow in the topbar either.\n-store-property: (scrollWidth, \".mobile-topbar h2\", \"scrollWidth\")\n+store-property: (\".mobile-topbar h2\", {\"scrollWidth\": scrollWidth})\n assert-property: (\".mobile-topbar h2\", {\"clientWidth\": |scrollWidth|})\n assert-css: (\".mobile-topbar h2\", {\"overflow-x\": \"hidden\"})\n "}]}