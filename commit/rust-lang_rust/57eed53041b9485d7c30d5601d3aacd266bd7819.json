{"sha": "57eed53041b9485d7c30d5601d3aacd266bd7819", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU3ZWVkNTMwNDFiOTQ4NWQ3YzMwZDU2MDFkM2FhY2QyNjZiZDc4MTk=", "commit": {"author": {"name": "Steve Klabnik", "email": "steve@steveklabnik.com", "date": "2015-07-02T17:00:58Z"}, "committer": {"name": "Steve Klabnik", "email": "steve@steveklabnik.com", "date": "2015-07-02T18:05:57Z"}, "message": "Add more description for from_raw_parts's unsafety\n\nFixes #26737.", "tree": {"sha": "cee7cb931967bac57123eb93ba3bb1d8c8e23e73", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cee7cb931967bac57123eb93ba3bb1d8c8e23e73"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/57eed53041b9485d7c30d5601d3aacd266bd7819", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/57eed53041b9485d7c30d5601d3aacd266bd7819", "html_url": "https://github.com/rust-lang/rust/commit/57eed53041b9485d7c30d5601d3aacd266bd7819", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/57eed53041b9485d7c30d5601d3aacd266bd7819/comments", "author": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "committer": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "50cb22f8e0231c54196a46484d97ef21c9503883", "url": "https://api.github.com/repos/rust-lang/rust/commits/50cb22f8e0231c54196a46484d97ef21c9503883", "html_url": "https://github.com/rust-lang/rust/commit/50cb22f8e0231c54196a46484d97ef21c9503883"}], "stats": {"total": 21, "additions": 18, "deletions": 3}, "files": [{"sha": "6b20d6e2a3f9b99587acdae98ef3ae69a8165439", "filename": "src/libcollections/string.rs", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/57eed53041b9485d7c30d5601d3aacd266bd7819/src%2Flibcollections%2Fstring.rs", "raw_url": "https://github.com/rust-lang/rust/raw/57eed53041b9485d7c30d5601d3aacd266bd7819/src%2Flibcollections%2Fstring.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fstring.rs?ref=57eed53041b9485d7c30d5601d3aacd266bd7819", "patch": "@@ -317,9 +317,14 @@ impl String {\n \n     /// Creates a new `String` from a length, capacity, and pointer.\n     ///\n-    /// This is unsafe because:\n+    /// # Unsafety\n     ///\n-    /// * We call `Vec::from_raw_parts` to get a `Vec<u8>`;\n+    /// This is _very_ unsafe because:\n+    ///\n+    /// * We call `Vec::from_raw_parts` to get a `Vec<u8>`. Therefore, this\n+    ///   function inherits all of its unsafety, see [its\n+    ///   documentation](../vec/struct.Vec.html#method.from_raw_parts)\n+    ///   for the invariants it expects, they also apply to this function.\n     /// * We assume that the `Vec` contains valid UTF-8.\n     #[inline]\n     #[stable(feature = \"rust1\", since = \"1.0.0\")]"}, {"sha": "5b326b1a5b0ace445293e5c291fc24c01248af15", "filename": "src/libcollections/vec.rs", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/57eed53041b9485d7c30d5601d3aacd266bd7819/src%2Flibcollections%2Fvec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/57eed53041b9485d7c30d5601d3aacd266bd7819/src%2Flibcollections%2Fvec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fvec.rs?ref=57eed53041b9485d7c30d5601d3aacd266bd7819", "patch": "@@ -227,7 +227,17 @@ impl<T> Vec<T> {\n \n     /// Creates a `Vec<T>` directly from the raw components of another vector.\n     ///\n-    /// This is highly unsafe, due to the number of invariants that aren't checked.\n+    /// # Unsafety\n+    ///\n+    /// This is highly unsafe, due to the number of invariants that aren't\n+    /// checked:\n+    ///\n+    /// * `ptr` needs to have been previously allocated via `String`/`Vec<T>`\n+    ///   (at least, it's highly likely to be incorrect if it wasn't).\n+    /// * `capacity` needs to be the capacity that the pointer was allocated with.\n+    ///\n+    /// Violating these may cause problems like corrupting the allocator's\n+    /// internal datastructures.\n     ///\n     /// # Examples\n     ///"}]}