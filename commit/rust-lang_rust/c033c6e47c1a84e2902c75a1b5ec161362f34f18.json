{"sha": "c033c6e47c1a84e2902c75a1b5ec161362f34f18", "node_id": "MDY6Q29tbWl0NzI0NzEyOmMwMzNjNmU0N2MxYTg0ZTI5MDJjNzVhMWI1ZWMxNjEzNjJmMzRmMTg=", "commit": {"author": {"name": "Phlosioneer", "email": "mattmdrr2@gmail.com", "date": "2018-03-11T14:03:23Z"}, "committer": {"name": "Phlosioneer", "email": "mattmdrr2@gmail.com", "date": "2018-03-11T14:03:23Z"}, "message": "Fix hygene issue when deriving Debug\n\nThe code for several of the core traits doesn't use hygenic macros.\nThis isn't a problem, except for the Debug trait, which is the only\none that uses a variable, named \"builder\".\n\nVariables can't share names with unit structs, so attempting to\n[derive(Debug)] on any type while a unit struct with the name\n\"builder\" was in scope would result in an error.\n\nThis commit just changes the name of the variable to\n\"__debug_trait_builder\", because I couldn't figure out how to get a\nlist of all unit structs in-scope from within the derive expansion\nfunction. If someone wants to have a unit struct with\nthe exact name \"__debug_trait_builder\", they'll just have to do it\nwithout a [derive(Debug)].", "tree": {"sha": "38ee60e3d76445b079ba71d32bcd9c0fdfbc7927", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/38ee60e3d76445b079ba71d32bcd9c0fdfbc7927"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c033c6e47c1a84e2902c75a1b5ec161362f34f18", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c033c6e47c1a84e2902c75a1b5ec161362f34f18", "html_url": "https://github.com/rust-lang/rust/commit/c033c6e47c1a84e2902c75a1b5ec161362f34f18", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c033c6e47c1a84e2902c75a1b5ec161362f34f18/comments", "author": {"login": "Phlosioneer", "id": 4657718, "node_id": "MDQ6VXNlcjQ2NTc3MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/4657718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Phlosioneer", "html_url": "https://github.com/Phlosioneer", "followers_url": "https://api.github.com/users/Phlosioneer/followers", "following_url": "https://api.github.com/users/Phlosioneer/following{/other_user}", "gists_url": "https://api.github.com/users/Phlosioneer/gists{/gist_id}", "starred_url": "https://api.github.com/users/Phlosioneer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Phlosioneer/subscriptions", "organizations_url": "https://api.github.com/users/Phlosioneer/orgs", "repos_url": "https://api.github.com/users/Phlosioneer/repos", "events_url": "https://api.github.com/users/Phlosioneer/events{/privacy}", "received_events_url": "https://api.github.com/users/Phlosioneer/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Phlosioneer", "id": 4657718, "node_id": "MDQ6VXNlcjQ2NTc3MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/4657718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Phlosioneer", "html_url": "https://github.com/Phlosioneer", "followers_url": "https://api.github.com/users/Phlosioneer/followers", "following_url": "https://api.github.com/users/Phlosioneer/following{/other_user}", "gists_url": "https://api.github.com/users/Phlosioneer/gists{/gist_id}", "starred_url": "https://api.github.com/users/Phlosioneer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Phlosioneer/subscriptions", "organizations_url": "https://api.github.com/users/Phlosioneer/orgs", "repos_url": "https://api.github.com/users/Phlosioneer/repos", "events_url": "https://api.github.com/users/Phlosioneer/events{/privacy}", "received_events_url": "https://api.github.com/users/Phlosioneer/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1733a61141d125beb45587dd89d54cd4a01cdd5a", "url": "https://api.github.com/repos/rust-lang/rust/commits/1733a61141d125beb45587dd89d54cd4a01cdd5a", "html_url": "https://github.com/rust-lang/rust/commit/1733a61141d125beb45587dd89d54cd4a01cdd5a"}], "stats": {"total": 19, "additions": 18, "deletions": 1}, "files": [{"sha": "7b23de582a79aa74415c3234a23183128697654f", "filename": "src/libsyntax_ext/deriving/debug.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c033c6e47c1a84e2902c75a1b5ec161362f34f18/src%2Flibsyntax_ext%2Fderiving%2Fdebug.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c033c6e47c1a84e2902c75a1b5ec161362f34f18/src%2Flibsyntax_ext%2Fderiving%2Fdebug.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax_ext%2Fderiving%2Fdebug.rs?ref=c033c6e47c1a84e2902c75a1b5ec161362f34f18", "patch": "@@ -70,7 +70,7 @@ fn show_substructure(cx: &mut ExtCtxt, span: Span, substr: &Substructure) -> P<E\n     // We want to make sure we have the ctxt set so that we can use unstable methods\n     let span = span.with_ctxt(cx.backtrace());\n     let name = cx.expr_lit(span, ast::LitKind::Str(ident.name, ast::StrStyle::Cooked));\n-    let builder = Ident::from_str(\"builder\");\n+    let builder = Ident::from_str(\"__debug_trait_builder\");\n     let builder_expr = cx.expr_ident(span, builder.clone());\n \n     let fmt = substr.nonself_args[0].clone();"}, {"sha": "dfe3a21961e3b6d62f7217ad9abd4b8d61b4b834", "filename": "src/test/run-pass/issue-42453.rs", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/c033c6e47c1a84e2902c75a1b5ec161362f34f18/src%2Ftest%2Frun-pass%2Fissue-42453.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c033c6e47c1a84e2902c75a1b5ec161362f34f18/src%2Ftest%2Frun-pass%2Fissue-42453.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissue-42453.rs?ref=c033c6e47c1a84e2902c75a1b5ec161362f34f18", "patch": "@@ -0,0 +1,17 @@\n+// Copyright 2014 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+#[derive(Debug)]\n+struct builder;\n+\n+fn main() {\n+\n+}\n+"}]}