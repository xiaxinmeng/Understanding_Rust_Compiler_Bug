{"sha": "800f66de2bea7672e03ffa2be457ef06d91cce83", "node_id": "C_kwDOAAsO6NoAKDgwMGY2NmRlMmJlYTc2NzJlMDNmZmEyYmU0NTdlZjA2ZDkxY2NlODM", "commit": {"author": {"name": "Jaeyong Sung", "email": "jaeyong0201@gmail.com", "date": "2022-03-13T15:13:57Z"}, "committer": {"name": "Jaeyong Sung", "email": "jaeyong0201@gmail.com", "date": "2022-03-13T15:13:57Z"}, "message": "add clearing return vars", "tree": {"sha": "2bbdeaae84fbe4623272a7feecbbc2b22319e3ba", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2bbdeaae84fbe4623272a7feecbbc2b22319e3ba"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/800f66de2bea7672e03ffa2be457ef06d91cce83", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEErNAvdl6JhsmcOZwWK4aJjMsqVIYFAmIuCjUACgkQK4aJjMsq\nVIYoyxAAkMC0h04K0urg2jBuoY17KIgYtsQF377gapuSK2r63NHLGkKo9Gz3BeJZ\nLldJBxIRtrtdi5y7rPl19FLi+6WWlfzA/6cx+lrtGQfPclP+X3VtIleOuuyMLPHe\nS9ucDUo2gmCZKov2nO0HhaQeUZsHcXRZlWOI3FEXD0XJQ0qbNh4mWVX0Z8yksANY\n0dZnJm2ZhEBqhAvRt9SqLR13LUyGh7xxXBzit6rLAQ1eHM0zrA6h9cF3RmZfdNcc\nfISRbpuHLTV2MrlY0qwveuJe9L4UaVEDvdrl4RnmCCV26oaDahn2LN/nMc1NToP+\nrZmtyfqSOJlqy71jARsUcUx8U68Zj4laPkLkdJz61I3kEEo7Ktwlf2q6ZOPDTXvX\nlHyU13nOKmAKQplBcznSCO31JS+j1R09/ZNmabQYtiv51rnB2HHop4UIiNBPhtCv\nnnc5SoEb2oGZr4FTViXU7cDhafhK9UN4flSW9buGLrI/C5uo+Pr4HMmqGgwGb72L\nGtBulKI/v/PN5dsvrhfSG64mSTDZWIjb5Y5uizHx4WQEpfdowuK66TY2UuoDDV3r\nQRnRSOGDMxC1Kbw4tuaYu+3URa2XqBd50saj67P5Njvihtf3Yj87gNJWKw/DZ8lV\nnMy2vRBTY2JhIe+DdRp+mvPhOVkcIT4a1hXTz1i7artEQvLLseY=\n=05Na\n-----END PGP SIGNATURE-----", "payload": "tree 2bbdeaae84fbe4623272a7feecbbc2b22319e3ba\nparent 1ad7e7097ae9274d74b16899e25c65d125159bd4\nauthor Jaeyong Sung <jaeyong0201@gmail.com> 1647184437 +0900\ncommitter Jaeyong Sung <jaeyong0201@gmail.com> 1647184437 +0900\n\nadd clearing return vars\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/800f66de2bea7672e03ffa2be457ef06d91cce83", "html_url": "https://github.com/rust-lang/rust/commit/800f66de2bea7672e03ffa2be457ef06d91cce83", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/800f66de2bea7672e03ffa2be457ef06d91cce83/comments", "author": {"login": "buttercrab", "id": 34997549, "node_id": "MDQ6VXNlcjM0OTk3NTQ5", "avatar_url": "https://avatars.githubusercontent.com/u/34997549?v=4", "gravatar_id": "", "url": "https://api.github.com/users/buttercrab", "html_url": "https://github.com/buttercrab", "followers_url": "https://api.github.com/users/buttercrab/followers", "following_url": "https://api.github.com/users/buttercrab/following{/other_user}", "gists_url": "https://api.github.com/users/buttercrab/gists{/gist_id}", "starred_url": "https://api.github.com/users/buttercrab/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/buttercrab/subscriptions", "organizations_url": "https://api.github.com/users/buttercrab/orgs", "repos_url": "https://api.github.com/users/buttercrab/repos", "events_url": "https://api.github.com/users/buttercrab/events{/privacy}", "received_events_url": "https://api.github.com/users/buttercrab/received_events", "type": "User", "site_admin": false}, "committer": {"login": "buttercrab", "id": 34997549, "node_id": "MDQ6VXNlcjM0OTk3NTQ5", "avatar_url": "https://avatars.githubusercontent.com/u/34997549?v=4", "gravatar_id": "", "url": "https://api.github.com/users/buttercrab", "html_url": "https://github.com/buttercrab", "followers_url": "https://api.github.com/users/buttercrab/followers", "following_url": "https://api.github.com/users/buttercrab/following{/other_user}", "gists_url": "https://api.github.com/users/buttercrab/gists{/gist_id}", "starred_url": "https://api.github.com/users/buttercrab/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/buttercrab/subscriptions", "organizations_url": "https://api.github.com/users/buttercrab/orgs", "repos_url": "https://api.github.com/users/buttercrab/repos", "events_url": "https://api.github.com/users/buttercrab/events{/privacy}", "received_events_url": "https://api.github.com/users/buttercrab/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1ad7e7097ae9274d74b16899e25c65d125159bd4", "url": "https://api.github.com/repos/rust-lang/rust/commits/1ad7e7097ae9274d74b16899e25c65d125159bd4", "html_url": "https://github.com/rust-lang/rust/commit/1ad7e7097ae9274d74b16899e25c65d125159bd4"}], "stats": {"total": 8, "additions": 6, "deletions": 2}, "files": [{"sha": "b828d9334ee0e9e28d5f6a4d5d866edde7a218f6", "filename": "clippy_lints/src/only_used_in_recursion.rs", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/800f66de2bea7672e03ffa2be457ef06d91cce83/clippy_lints%2Fsrc%2Fonly_used_in_recursion.rs", "raw_url": "https://github.com/rust-lang/rust/raw/800f66de2bea7672e03ffa2be457ef06d91cce83/clippy_lints%2Fsrc%2Fonly_used_in_recursion.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fonly_used_in_recursion.rs?ref=800f66de2bea7672e03ffa2be457ef06d91cce83", "patch": "@@ -268,18 +268,22 @@ impl<'tcx> Visitor<'tcx> for SideEffectVisit<'tcx> {\n                 pat, init: Some(init), ..\n             }) => {\n                 self.visit_pat_expr(pat, init, false);\n+                self.ret_vars.clear();\n             },\n             StmtKind::Item(i) => {\n                 let item = self.ty_ctx.hir().item(i);\n                 self.visit_item(item);\n+                self.ret_vars.clear();\n+            },\n+            StmtKind::Expr(e) | StmtKind::Semi(e) => {\n+                self.visit_expr(e);\n+                self.ret_vars.clear();\n             },\n-            StmtKind::Expr(e) | StmtKind::Semi(e) => self.visit_expr(e),\n             StmtKind::Local(_) => {},\n         }\n     }\n \n     fn visit_expr(&mut self, ex: &'tcx Expr<'tcx>) {\n-        debug_assert!(self.ret_vars.is_empty());\n         match ex.kind {\n             ExprKind::Array(exprs) | ExprKind::Tup(exprs) => {\n                 self.ret_vars = exprs"}]}