{"sha": "4a14677239bbd9a3892d165ee24513c1a05820e4", "node_id": "C_kwDOAAsO6NoAKDRhMTQ2NzcyMzliYmQ5YTM4OTJkMTY1ZWUyNDUxM2MxYTA1ODIwZTQ", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-09-23T16:44:06Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-09-23T16:44:06Z"}, "message": "Auto merge of #102192 - matthiaskrgr:rollup-0ctjzco, r=matthiaskrgr\n\nRollup of 7 pull requests\n\nSuccessful merges:\n\n - #102094 (Add missing documentation for `bool::from_str`)\n - #102115 (Add examples to `bool::then` and `bool::then_some`)\n - #102134 (Detect panic strategy using `rustc --print cfg`)\n - #102137 (Don't convert valtree to constvalue during normalization)\n - #102148 (add regression test for miri issue 2433)\n - #102158 (rustdoc: clean up CSS/DOM for deprecation warnings)\n - #102177 (Fix a typo in `std`'s root docs)\n\nFailed merges:\n\nr? `@ghost`\n`@rustbot` modify labels: rollup", "tree": {"sha": "d4c75a3e282d76bf6ef65189696cdd11a4295652", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d4c75a3e282d76bf6ef65189696cdd11a4295652"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4a14677239bbd9a3892d165ee24513c1a05820e4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4a14677239bbd9a3892d165ee24513c1a05820e4", "html_url": "https://github.com/rust-lang/rust/commit/4a14677239bbd9a3892d165ee24513c1a05820e4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4a14677239bbd9a3892d165ee24513c1a05820e4/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9a963e3bade50f48a58c14ab5e82646005654b59", "url": "https://api.github.com/repos/rust-lang/rust/commits/9a963e3bade50f48a58c14ab5e82646005654b59", "html_url": "https://github.com/rust-lang/rust/commit/9a963e3bade50f48a58c14ab5e82646005654b59"}, {"sha": "dfe045ad71982fb6ae134fdb8fff0f924764fbc1", "url": "https://api.github.com/repos/rust-lang/rust/commits/dfe045ad71982fb6ae134fdb8fff0f924764fbc1", "html_url": "https://github.com/rust-lang/rust/commit/dfe045ad71982fb6ae134fdb8fff0f924764fbc1"}], "stats": {"total": 264, "additions": 98, "deletions": 166}, "files": [{"sha": "31e7fb67f0ef98d469916831c37747935e896a32", "filename": "compiler/rustc_trait_selection/src/traits/query/normalize.rs", "status": "modified", "additions": 1, "deletions": 19, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fquery%2Fnormalize.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fquery%2Fnormalize.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fquery%2Fnormalize.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -351,25 +351,7 @@ impl<'cx, 'tcx> FallibleTypeFolder<'tcx> for QueryNormalizer<'cx, 'tcx> {\n         &mut self,\n         constant: mir::ConstantKind<'tcx>,\n     ) -> Result<mir::ConstantKind<'tcx>, Self::Error> {\n-        Ok(match constant {\n-            mir::ConstantKind::Ty(c) => {\n-                let const_folded = c.try_super_fold_with(self)?;\n-                match const_folded.kind() {\n-                    ty::ConstKind::Value(valtree) => {\n-                        let tcx = self.infcx.tcx;\n-                        let ty = const_folded.ty();\n-                        let const_val = tcx.valtree_to_const_val((ty, valtree));\n-                        debug!(?ty, ?valtree, ?const_val);\n-\n-                        mir::ConstantKind::Val(const_val, ty)\n-                    }\n-                    _ => mir::ConstantKind::Ty(const_folded),\n-                }\n-            }\n-            mir::ConstantKind::Val(_, _) | mir::ConstantKind::Unevaluated(..) => {\n-                constant.try_super_fold_with(self)?\n-            }\n-        })\n+        constant.try_super_fold_with(self)\n     }\n \n     #[inline]"}, {"sha": "db1c505ba3851016db993e153efebf7d0ba0a580", "filename": "library/core/src/bool.rs", "status": "modified", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/library%2Fcore%2Fsrc%2Fbool.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/library%2Fcore%2Fsrc%2Fbool.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fbool.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -18,6 +18,18 @@ impl bool {\n     /// assert_eq!(false.then_some(0), None);\n     /// assert_eq!(true.then_some(0), Some(0));\n     /// ```\n+    ///\n+    /// ```\n+    /// let mut a = 0;\n+    /// let mut function_with_side_effects = || { a += 1; };\n+    ///\n+    /// true.then_some(function_with_side_effects());\n+    /// false.then_some(function_with_side_effects());\n+    ///\n+    /// // `a` is incremented twice because the value passed to `then_some` is\n+    /// // evaluated eagerly.\n+    /// assert_eq!(a, 2);\n+    /// ```\n     #[stable(feature = \"bool_to_option\", since = \"1.62.0\")]\n     #[rustc_const_unstable(feature = \"const_bool_to_option\", issue = \"91917\")]\n     #[inline]\n@@ -37,6 +49,17 @@ impl bool {\n     /// assert_eq!(false.then(|| 0), None);\n     /// assert_eq!(true.then(|| 0), Some(0));\n     /// ```\n+    ///\n+    /// ```\n+    /// let mut a = 0;\n+    ///\n+    /// true.then(|| { a += 1; });\n+    /// false.then(|| { a += 1; });\n+    ///\n+    /// // `a` is incremented once because the closure is evaluated lazily by\n+    /// // `then`.\n+    /// assert_eq!(a, 1);\n+    /// ```\n     #[stable(feature = \"lazy_bool_to_option\", since = \"1.50.0\")]\n     #[rustc_const_unstable(feature = \"const_bool_to_option\", issue = \"91917\")]\n     #[inline]"}, {"sha": "18f2ce6edc722a0716a4fd996ff7fb4f8242421c", "filename": "library/core/src/str/traits.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/library%2Fcore%2Fsrc%2Fstr%2Ftraits.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/library%2Fcore%2Fsrc%2Fstr%2Ftraits.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fstr%2Ftraits.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -573,8 +573,8 @@ impl FromStr for bool {\n \n     /// Parse a `bool` from a string.\n     ///\n-    /// Yields a `Result<bool, ParseBoolError>`, because `s` may or may not\n-    /// actually be parseable.\n+    /// The only accepted values are `\"true\"` and `\"false\"`. Any other input\n+    /// will return an error.\n     ///\n     /// # Examples\n     ///"}, {"sha": "3131dd4726984e7d3d24f2c74c53bddb85ed3eab", "filename": "library/std/src/lib.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/library%2Fstd%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/library%2Fstd%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Flib.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -145,8 +145,8 @@\n //! abstracting over differences in common platforms, most notably Windows and\n //! Unix derivatives.\n //!\n-//! Common types of I/O, including [files], [TCP], [UDP], are defined in the\n-//! [`io`], [`fs`], and [`net`] modules.\n+//! Common types of I/O, including [files], [TCP], and [UDP], are defined in\n+//! the [`io`], [`fs`], and [`net`] modules.\n //!\n //! The [`thread`] module contains Rust's threading abstractions. [`sync`]\n //! contains further primitive shared memory types, including [`atomic`] and"}, {"sha": "8e53fbbcd1975ce6fd6aa8fe66182326d2d8d6ac", "filename": "src/librustdoc/html/markdown.rs", "status": "modified", "additions": 8, "deletions": 11, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -111,14 +111,9 @@ pub(crate) struct MarkdownWithToc<'a>(\n     pub(crate) Edition,\n     pub(crate) &'a Option<Playground>,\n );\n-/// A tuple struct like `Markdown` that renders the markdown escaping HTML tags.\n-pub(crate) struct MarkdownHtml<'a>(\n-    pub(crate) &'a str,\n-    pub(crate) &'a mut IdMap,\n-    pub(crate) ErrorCodes,\n-    pub(crate) Edition,\n-    pub(crate) &'a Option<Playground>,\n-);\n+/// A tuple struct like `Markdown` that renders the markdown escaping HTML tags\n+/// and includes no paragraph tags.\n+pub(crate) struct MarkdownItemInfo<'a>(pub(crate) &'a str, pub(crate) &'a mut IdMap);\n /// A tuple struct like `Markdown` that renders only the first paragraph.\n pub(crate) struct MarkdownSummaryLine<'a>(pub &'a str, pub &'a [RenderedLink]);\n \n@@ -1072,9 +1067,9 @@ impl MarkdownWithToc<'_> {\n     }\n }\n \n-impl MarkdownHtml<'_> {\n+impl MarkdownItemInfo<'_> {\n     pub(crate) fn into_string(self) -> String {\n-        let MarkdownHtml(md, ids, codes, edition, playground) = self;\n+        let MarkdownItemInfo(md, ids) = self;\n \n         // This is actually common enough to special-case\n         if md.is_empty() {\n@@ -1093,7 +1088,9 @@ impl MarkdownHtml<'_> {\n         let p = HeadingLinks::new(p, None, ids, HeadingOffset::H1);\n         let p = Footnotes::new(p);\n         let p = TableWrapper::new(p.map(|(ev, _)| ev));\n-        let p = CodeBlocks::new(p, codes, edition, playground);\n+        let p = p.filter(|event| {\n+            !matches!(event, Event::Start(Tag::Paragraph) | Event::End(Tag::Paragraph))\n+        });\n         html::push_html(&mut s, p);\n \n         s"}, {"sha": "e4f72a057892f5ee1098859fecc557aae49df72a", "filename": "src/librustdoc/html/markdown/tests.rs", "status": "modified", "additions": 5, "deletions": 6, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Flibrustdoc%2Fhtml%2Fmarkdown%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Flibrustdoc%2Fhtml%2Fmarkdown%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fmarkdown%2Ftests.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,5 +1,5 @@\n use super::{find_testable_code, plain_text_summary, short_markdown_summary};\n-use super::{ErrorCodes, HeadingOffset, IdMap, Ignore, LangString, Markdown, MarkdownHtml};\n+use super::{ErrorCodes, HeadingOffset, IdMap, Ignore, LangString, Markdown, MarkdownItemInfo};\n use rustc_span::edition::{Edition, DEFAULT_EDITION};\n \n #[test]\n@@ -279,14 +279,13 @@ fn test_plain_text_summary() {\n fn test_markdown_html_escape() {\n     fn t(input: &str, expect: &str) {\n         let mut idmap = IdMap::new();\n-        let output =\n-            MarkdownHtml(input, &mut idmap, ErrorCodes::Yes, DEFAULT_EDITION, &None).into_string();\n+        let output = MarkdownItemInfo(input, &mut idmap).into_string();\n         assert_eq!(output, expect, \"original: {}\", input);\n     }\n \n-    t(\"`Struct<'a, T>`\", \"<p><code>Struct&lt;'a, T&gt;</code></p>\\n\");\n-    t(\"Struct<'a, T>\", \"<p>Struct&lt;\u2019a, T&gt;</p>\\n\");\n-    t(\"Struct<br>\", \"<p>Struct&lt;br&gt;</p>\\n\");\n+    t(\"`Struct<'a, T>`\", \"<code>Struct&lt;'a, T&gt;</code>\");\n+    t(\"Struct<'a, T>\", \"Struct&lt;\u2019a, T&gt;\");\n+    t(\"Struct<br>\", \"Struct&lt;br&gt;\");\n }\n \n #[test]"}, {"sha": "1c4e666cd94afab4c733a65d7c2a3c0e4875215c", "filename": "src/librustdoc/html/render/mod.rs", "status": "modified", "additions": 4, "deletions": 9, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -74,7 +74,9 @@ use crate::html::format::{\n     PrintWithSpace,\n };\n use crate::html::highlight;\n-use crate::html::markdown::{HeadingOffset, IdMap, Markdown, MarkdownHtml, MarkdownSummaryLine};\n+use crate::html::markdown::{\n+    HeadingOffset, IdMap, Markdown, MarkdownItemInfo, MarkdownSummaryLine,\n+};\n use crate::html::sources;\n use crate::html::static_files::SCRAPE_EXAMPLES_HELP_MD;\n use crate::scrape_examples::{CallData, CallLocation};\n@@ -584,7 +586,6 @@ fn short_item_info(\n     parent: Option<&clean::Item>,\n ) -> Vec<String> {\n     let mut extra_info = vec![];\n-    let error_codes = cx.shared.codes;\n \n     if let Some(depr @ Deprecation { note, since, is_since_rustc_version: _, suggestion: _ }) =\n         item.deprecation(cx.tcx())\n@@ -608,13 +609,7 @@ fn short_item_info(\n \n         if let Some(note) = note {\n             let note = note.as_str();\n-            let html = MarkdownHtml(\n-                note,\n-                &mut cx.id_map,\n-                error_codes,\n-                cx.shared.edition(),\n-                &cx.shared.playground,\n-            );\n+            let html = MarkdownItemInfo(note, &mut cx.id_map);\n             message.push_str(&format!(\": {}\", html.into_string()));\n         }\n         extra_info.push(format!("}, {"sha": "e17165440d109a919914a2238eff29772ffe4b39", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1068,10 +1068,6 @@ so that we can apply CSS-filters to change the arrow color in themes */\n \tfont-size: 0.875rem;\n \tfont-weight: normal;\n }\n-.stab p {\n-\tdisplay: inline;\n-\tmargin: 0;\n-}\n \n .stab .emoji {\n \tfont-size: 1.25rem;"}, {"sha": "79b7239f3590db932c56bafc50c88fed0202396c", "filename": "src/test/ui/async-await/async-fn-size-moved-locals.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fasync-await%2Fasync-fn-size-moved-locals.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fasync-await%2Fasync-fn-size-moved-locals.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasync-await%2Fasync-fn-size-moved-locals.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -7,7 +7,6 @@\n //\n // See issue #59123 for a full explanation.\n \n-// ignore-emscripten (sizes don't match)\n // needs-unwind Size of Futures change on panic=abort\n // run-pass\n "}, {"sha": "b4ea4c9f68664c693f6a8adee73003e487035805", "filename": "src/test/ui/async-await/issues/issue-65419/issue-65419-async-fn-resume-after-panic.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fasync-await%2Fissues%2Fissue-65419%2Fissue-65419-async-fn-resume-after-panic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fasync-await%2Fissues%2Fissue-65419%2Fissue-65419-async-fn-resume-after-panic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasync-await%2Fissues%2Fissue-65419%2Fissue-65419-async-fn-resume-after-panic.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -6,7 +6,6 @@\n // error-pattern: thread 'main' panicked at '`async fn` resumed after panicking'\n // edition:2018\n // ignore-wasm no panic or subprocess support\n-// ignore-emscripten no panic or subprocess support\n \n #![feature(generators, generator_trait)]\n "}, {"sha": "0450fe8abbd1476043e6bb08fd40b6ac40f6c156", "filename": "src/test/ui/binding/fn-arg-incomplete-pattern-drop-order.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fbinding%2Ffn-arg-incomplete-pattern-drop-order.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fbinding%2Ffn-arg-incomplete-pattern-drop-order.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fbinding%2Ffn-arg-incomplete-pattern-drop-order.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -3,7 +3,6 @@\n // Check that partially moved from function parameters are dropped after the\n // named bindings that move from them.\n \n-// ignore-wasm32-bare compiled with panic=abort by default\n \n use std::{panic, cell::RefCell};\n "}, {"sha": "16add6ff2f68fdc7f39f7d7c969bf233695be64b", "filename": "src/test/ui/builtin-clone-unwind.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fbuiltin-clone-unwind.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fbuiltin-clone-unwind.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fbuiltin-clone-unwind.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -3,7 +3,6 @@\n \n #![allow(unused_variables)]\n #![allow(unused_imports)]\n-// ignore-wasm32-bare compiled with panic=abort by default\n \n // Test that builtin implementations of `Clone` cleanup everything\n // in case of unwinding."}, {"sha": "fb3503937cb54a0fa62605f8bdc78225bde8edb8", "filename": "src/test/ui/catch-unwind-bang.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fcatch-unwind-bang.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fcatch-unwind-bang.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcatch-unwind-bang.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,6 +1,5 @@\n // run-pass\n // needs-unwind\n-// ignore-wasm32-bare compiled with panic=abort by default\n \n fn worker() -> ! {\n     panic!()"}, {"sha": "2de72d54a481a97701b5b9d6f32c3bc03712f174", "filename": "src/test/ui/cfg/cfg-panic.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fcfg%2Fcfg-panic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fcfg%2Fcfg-panic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcfg%2Fcfg-panic.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,9 +1,6 @@\n // build-pass\n // compile-flags: -C panic=unwind\n // needs-unwind\n-// ignore-emscripten no panic_unwind implementation\n-// ignore-wasm32     no panic_unwind implementation\n-// ignore-wasm64     no panic_unwind implementation\n \n \n #[cfg(panic = \"abort\")]"}, {"sha": "ff2244a8e31b92e638c017db7ebf7baac63372bd", "filename": "src/test/ui/closures/2229_closure_analysis/migrations/mir_calls_to_shims.fixed", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fclosures%2F2229_closure_analysis%2Fmigrations%2Fmir_calls_to_shims.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fclosures%2F2229_closure_analysis%2Fmigrations%2Fmir_calls_to_shims.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fclosures%2F2229_closure_analysis%2Fmigrations%2Fmir_calls_to_shims.fixed?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -3,7 +3,6 @@\n \n #![deny(rust_2021_incompatible_closure_captures)]\n //~^ NOTE: the lint level is defined here\n-// ignore-wasm32-bare compiled with panic=abort by default\n #![feature(fn_traits)]\n #![feature(never_type)]\n "}, {"sha": "52e96d013a265f05f0d3992ffc3f5f07462a76bb", "filename": "src/test/ui/closures/2229_closure_analysis/migrations/mir_calls_to_shims.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fclosures%2F2229_closure_analysis%2Fmigrations%2Fmir_calls_to_shims.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fclosures%2F2229_closure_analysis%2Fmigrations%2Fmir_calls_to_shims.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fclosures%2F2229_closure_analysis%2Fmigrations%2Fmir_calls_to_shims.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -3,7 +3,6 @@\n \n #![deny(rust_2021_incompatible_closure_captures)]\n //~^ NOTE: the lint level is defined here\n-// ignore-wasm32-bare compiled with panic=abort by default\n #![feature(fn_traits)]\n #![feature(never_type)]\n "}, {"sha": "62cfcbe95bc2c7555af03130f0a6af0ba9d722ec", "filename": "src/test/ui/closures/2229_closure_analysis/migrations/mir_calls_to_shims.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fclosures%2F2229_closure_analysis%2Fmigrations%2Fmir_calls_to_shims.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fclosures%2F2229_closure_analysis%2Fmigrations%2Fmir_calls_to_shims.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fclosures%2F2229_closure_analysis%2Fmigrations%2Fmir_calls_to_shims.stderr?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,5 +1,5 @@\n error: changes to closure capture in Rust 2021 will affect which traits the closure implements\n-  --> $DIR/mir_calls_to_shims.rs:21:38\n+  --> $DIR/mir_calls_to_shims.rs:20:38\n    |\n LL |     let result = panic::catch_unwind(move || {\n    |                                      ^^^^^^^"}, {"sha": "8f1cc6691cd8d3f369edbf74e96d8f68e16a2340", "filename": "src/test/ui/drop/dynamic-drop-async.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fdrop%2Fdynamic-drop-async.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fdrop%2Fdynamic-drop-async.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdrop%2Fdynamic-drop-async.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -6,7 +6,6 @@\n // run-pass\n // needs-unwind\n // edition:2018\n-// ignore-wasm32-bare compiled with panic=abort by default\n \n #![allow(unused)]\n "}, {"sha": "9e51d3adaaa68c815026821ef67527985c78cf91", "filename": "src/test/ui/drop/dynamic-drop.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fdrop%2Fdynamic-drop.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fdrop%2Fdynamic-drop.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdrop%2Fdynamic-drop.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,6 +1,5 @@\n // run-pass\n // needs-unwind\n-// ignore-wasm32-bare compiled with panic=abort by default\n \n #![feature(generators, generator_trait)]\n "}, {"sha": "8fd46ecaf442013f4ddc4938579e63709b6195fe", "filename": "src/test/ui/drop/repeat-drop.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fdrop%2Frepeat-drop.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fdrop%2Frepeat-drop.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdrop%2Frepeat-drop.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,8 +1,5 @@\n // run-pass\n // needs-unwind\n-// ignore-wasm32-bare no unwinding panic\n-// ignore-avr no unwinding panic\n-// ignore-nvptx64 no unwinding panic\n \n static mut CHECK: usize = 0;\n "}, {"sha": "2f4ae7d8e70fa525421c82440151f008929a5683", "filename": "src/test/ui/extern-flag/empty-extern-arg.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fextern-flag%2Fempty-extern-arg.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fextern-flag%2Fempty-extern-arg.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fextern-flag%2Fempty-extern-arg.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,6 +1,6 @@\n // compile-flags: --extern std=\n // error-pattern: extern location for std does not exist\n // needs-unwind since it affects the error output\n-// ignore-emscripten compiled with panic=abort, personality not required\n+// ignore-emscripten missing eh_catch_typeinfo lang item\n \n fn main() {}"}, {"sha": "233120c92f38b611823d29696ede53264d8ae4db", "filename": "src/test/ui/extern/issue-64655-allow-unwind-when-calling-panic-directly.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fextern%2Fissue-64655-allow-unwind-when-calling-panic-directly.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fextern%2Fissue-64655-allow-unwind-when-calling-panic-directly.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fextern%2Fissue-64655-allow-unwind-when-calling-panic-directly.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,6 +1,5 @@\n // run-pass\n // needs-unwind\n-// ignore-wasm32-bare compiled with panic=abort by default\n // ignore-emscripten no threads support\n \n // rust-lang/rust#64655: with panic=unwind, a panic from a subroutine"}, {"sha": "3b263e58cbe84886a8193dee06ad6c62f77898f8", "filename": "src/test/ui/extern/issue-64655-extern-rust-must-allow-unwind.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fextern%2Fissue-64655-extern-rust-must-allow-unwind.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fextern%2Fissue-64655-extern-rust-must-allow-unwind.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fextern%2Fissue-64655-extern-rust-must-allow-unwind.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,6 +1,5 @@\n // run-pass\n // needs-unwind\n-// ignore-wasm32-bare compiled with panic=abort by default\n // ignore-emscripten no threads support\n \n // rust-lang/rust#64655: with panic=unwind, a panic from a subroutine"}, {"sha": "4c3caeb14d67e1ed95d6f88d6e5e81def7726568", "filename": "src/test/ui/generator/panic-drops-resume.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fgenerator%2Fpanic-drops-resume.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fgenerator%2Fpanic-drops-resume.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fgenerator%2Fpanic-drops-resume.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -2,8 +2,6 @@\n \n // run-pass\n // needs-unwind\n-// ignore-wasm       no unwind support\n-// ignore-emscripten no unwind support\n \n #![feature(generators, generator_trait)]\n "}, {"sha": "65001fd879bb05f05134da385c071df53204d1d9", "filename": "src/test/ui/generator/panic-drops.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fgenerator%2Fpanic-drops.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fgenerator%2Fpanic-drops.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fgenerator%2Fpanic-drops.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,7 +1,6 @@\n // run-pass\n // needs-unwind\n \n-// ignore-wasm32-bare compiled with panic=abort by default\n \n #![feature(generators, generator_trait)]\n "}, {"sha": "3db80bb58215124268b52b7108d14e31a0b4cdf6", "filename": "src/test/ui/generator/panic-safe.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fgenerator%2Fpanic-safe.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fgenerator%2Fpanic-safe.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fgenerator%2Fpanic-safe.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,7 +1,6 @@\n // run-pass\n // needs-unwind\n \n-// ignore-wasm32-bare compiled with panic=abort by default\n \n #![feature(generators, generator_trait)]\n "}, {"sha": "01a059a161cea8c0594b12911166a3eb627562c0", "filename": "src/test/ui/generator/resume-after-return.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fgenerator%2Fresume-after-return.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fgenerator%2Fresume-after-return.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fgenerator%2Fresume-after-return.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,7 +1,6 @@\n // run-pass\n // needs-unwind\n \n-// ignore-wasm32-bare compiled with panic=abort by default\n \n #![feature(generators, generator_trait)]\n "}, {"sha": "4aa869cca35bef905640895af2e8043ec72e1e8f", "filename": "src/test/ui/intrinsics/panic-uninitialized-zeroed.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fintrinsics%2Fpanic-uninitialized-zeroed.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fintrinsics%2Fpanic-uninitialized-zeroed.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fintrinsics%2Fpanic-uninitialized-zeroed.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,6 +1,5 @@\n // run-pass\n // needs-unwind\n-// ignore-wasm32-bare compiled with panic=abort by default\n // revisions: mir thir strict\n // [thir]compile-flags: -Zthir-unsafeck\n // [strict]compile-flags: -Zstrict-init-checks"}, {"sha": "fca3309155d5443ed2ec85d5a0bbf2e5ea0de3f5", "filename": "src/test/ui/issues/issue-14875.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fissues%2Fissue-14875.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fissues%2Fissue-14875.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-14875.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,6 +1,5 @@\n // run-pass\n // needs-unwind\n-// ignore-wasm32-bare compiled with panic=abort by default\n \n // Check that values are not leaked when a dtor panics (#14875)\n "}, {"sha": "3ed701480b5ed1dff87484cfe43092dd216f0871", "filename": "src/test/ui/issues/issue-29948.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fissues%2Fissue-29948.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fissues%2Fissue-29948.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-29948.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,6 +1,5 @@\n // run-pass\n // needs-unwind\n-// ignore-wasm32-bare compiled with panic=abort by default\n \n use std::panic;\n "}, {"sha": "dd42c1e3cb83134353d4c1f192dfea8ddedf82fd", "filename": "src/test/ui/issues/issue-43853.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fissues%2Fissue-43853.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fissues%2Fissue-43853.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-43853.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,6 +1,5 @@\n // run-pass\n // needs-unwind\n-// ignore-wasm32-bare compiled with panic=abort by default\n \n use std::panic;\n "}, {"sha": "0567923b7fc6985169fcd3afdd24454e7713b93e", "filename": "src/test/ui/issues/issue-46519.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fissues%2Fissue-46519.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fissues%2Fissue-46519.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-46519.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -2,7 +2,6 @@\n // compile-flags:--test -O\n \n // needs-unwind\n-// ignore-wasm32-bare compiled with panic=abort by default\n \n #[test]\n #[should_panic(expected = \"creating inhabited type\")]"}, {"sha": "8e59c11e9dccbfce04bbe8f6142e02467ea66b0a", "filename": "src/test/ui/iterators/iter-count-overflow-debug.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fiterators%2Fiter-count-overflow-debug.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fiterators%2Fiter-count-overflow-debug.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fiterators%2Fiter-count-overflow-debug.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,7 +1,6 @@\n // run-pass\n // only-32bit too impatient for 2\u2076\u2074 items\n // needs-unwind\n-// ignore-wasm32-bare compiled with panic=abort by default\n // compile-flags: -C debug_assertions=yes -C opt-level=3\n \n use std::panic;"}, {"sha": "7a871e744c9844fbe3d017213dd41399d1e96f7f", "filename": "src/test/ui/iterators/iter-position-overflow-debug.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fiterators%2Fiter-position-overflow-debug.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fiterators%2Fiter-position-overflow-debug.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fiterators%2Fiter-position-overflow-debug.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,7 +1,6 @@\n // run-pass\n // only-32bit too impatient for 2\u2076\u2074 items\n // needs-unwind\n-// ignore-wasm32-bare compiled with panic=abort by default\n // compile-flags: -C debug_assertions=yes -C opt-level=3\n \n use std::panic;"}, {"sha": "6aa349ebed29b7bc66b908af0b70bc2ac7ec7686", "filename": "src/test/ui/iterators/iter-step-overflow-debug.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fiterators%2Fiter-step-overflow-debug.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fiterators%2Fiter-step-overflow-debug.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fiterators%2Fiter-step-overflow-debug.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,6 +1,5 @@\n // run-pass\n // needs-unwind\n-// ignore-wasm32-bare compiled with panic=abort by default\n // compile-flags: -C debug_assertions=yes\n \n use std::panic;"}, {"sha": "24c764ff95873b2c143f91add418ae633bb75d17", "filename": "src/test/ui/iterators/iter-sum-overflow-debug.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fiterators%2Fiter-sum-overflow-debug.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fiterators%2Fiter-sum-overflow-debug.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fiterators%2Fiter-sum-overflow-debug.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,6 +1,5 @@\n // run-pass\n // needs-unwind\n-// ignore-wasm32-bare compiled with panic=abort by default\n // compile-flags: -C debug_assertions=yes\n \n use std::panic;"}, {"sha": "be45c075d7331d2ddab5e28e9e944c568498a82a", "filename": "src/test/ui/iterators/iter-sum-overflow-overflow-checks.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fiterators%2Fiter-sum-overflow-overflow-checks.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fiterators%2Fiter-sum-overflow-overflow-checks.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fiterators%2Fiter-sum-overflow-overflow-checks.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,6 +1,5 @@\n // run-pass\n // needs-unwind\n-// ignore-wasm32-bare compiled with panic=abort by default\n // compile-flags: -C overflow-checks\n \n use std::panic;"}, {"sha": "8406b4e78f6bee748d4ac503b5b1325618ff8391", "filename": "src/test/ui/macros/macro-comma-behavior-rpass.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fmacros%2Fmacro-comma-behavior-rpass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fmacros%2Fmacro-comma-behavior-rpass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Fmacro-comma-behavior-rpass.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -14,7 +14,6 @@\n // compile-flags: --test -C debug_assertions=yes\n // revisions: std core\n \n-// ignore-wasm32-bare compiled with panic=abort by default\n #![cfg_attr(core, no_std)]\n \n #[cfg(core)]"}, {"sha": "9dc0acfbfda48f81fa6ddd59efa9620a7f33b665", "filename": "src/test/ui/mir/mir_calls_to_shims.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fmir%2Fmir_calls_to_shims.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fmir%2Fmir_calls_to_shims.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmir%2Fmir_calls_to_shims.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,6 +1,5 @@\n // run-pass\n // needs-unwind\n-// ignore-wasm32-bare compiled with panic=abort by default\n \n #![feature(fn_traits)]\n #![feature(never_type)]"}, {"sha": "19dba497001cc38a10929f2a9bc577591abd2754", "filename": "src/test/ui/mir/mir_codegen_calls_diverging_drops.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fmir%2Fmir_codegen_calls_diverging_drops.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fmir%2Fmir_codegen_calls_diverging_drops.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmir%2Fmir_codegen_calls_diverging_drops.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,7 +1,6 @@\n // run-fail\n // error-pattern:diverging_fn called\n // error-pattern:0 dropped\n-// ignore-emscripten no processes\n // needs-unwind this test checks that a destructor is called after panicking\n \n struct Droppable(u8);"}, {"sha": "75f5b171af352e0de4f524dd0e549911e4bd7b93", "filename": "src/test/ui/mir/mir_drop_order.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fmir%2Fmir_drop_order.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fmir%2Fmir_drop_order.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmir%2Fmir_drop_order.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,6 +1,5 @@\n // run-pass\n // needs-unwind\n-// ignore-wasm32-bare compiled with panic=abort by default\n \n use std::cell::RefCell;\n use std::panic;"}, {"sha": "0d00426d6d2d5fa7165a2cca65069bf9c9370212", "filename": "src/test/ui/mir/mir_drop_panics.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fmir%2Fmir_drop_panics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fmir%2Fmir_drop_panics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmir%2Fmir_drop_panics.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -2,7 +2,6 @@\n // needs-unwind\n // error-pattern:panic 1\n // error-pattern:drop 2\n-// ignore-emscripten no processes\n \n struct Droppable(u32);\n impl Drop for Droppable {"}, {"sha": "536a84a352a498cc3d95d2d54d5734424ebf428c", "filename": "src/test/ui/mir/mir_let_chains_drop_order.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fmir%2Fmir_let_chains_drop_order.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fmir%2Fmir_let_chains_drop_order.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmir%2Fmir_let_chains_drop_order.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,6 +1,5 @@\n // run-pass\n // needs-unwind\n-// ignore-wasm32-bare compiled with panic=abort by default\n \n // See `mir_drop_order.rs` for more information\n "}, {"sha": "79d78da3328a9be7205827116daf96fbf2b29fc6", "filename": "src/test/ui/numbers-arithmetic/next-power-of-two-overflow-debug.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fnumbers-arithmetic%2Fnext-power-of-two-overflow-debug.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fnumbers-arithmetic%2Fnext-power-of-two-overflow-debug.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fnumbers-arithmetic%2Fnext-power-of-two-overflow-debug.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,7 +1,6 @@\n // run-pass\n // compile-flags: -C debug_assertions=yes\n // needs-unwind\n-// ignore-wasm32-bare compiled with panic=abort by default\n // ignore-emscripten dies with an LLVM error\n \n use std::panic;"}, {"sha": "14a07a9ef1b552c372887f50e0212b42cda0211d", "filename": "src/test/ui/panic-handler/weak-lang-item.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fpanic-handler%2Fweak-lang-item.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fpanic-handler%2Fweak-lang-item.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpanic-handler%2Fweak-lang-item.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -2,7 +2,7 @@\n // error-pattern: `#[panic_handler]` function required, but not found\n // error-pattern: language item required, but not found: `eh_personality`\n // needs-unwind since it affects the error output\n-// ignore-emscripten compiled with panic=abort, personality not required\n+// ignore-emscripten missing eh_catch_typeinfo lang item\n \n #![no_std]\n "}, {"sha": "e92400931d231d0f8f9b9711f8f31dea2b6322ab", "filename": "src/test/ui/panic-runtime/need-abort-got-unwind.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fpanic-runtime%2Fneed-abort-got-unwind.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fpanic-runtime%2Fneed-abort-got-unwind.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpanic-runtime%2Fneed-abort-got-unwind.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -2,7 +2,6 @@\n // needs-unwind\n // error-pattern:is incompatible with this crate's strategy of `unwind`\n // aux-build:needs-abort.rs\n-// ignore-wasm32-bare compiled with panic=abort by default\n \n extern crate needs_abort;\n "}, {"sha": "0e74e300f00f09d57b7954be7c5f3c6d593d79d2", "filename": "src/test/ui/panic-runtime/transitive-link-a-bunch.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fpanic-runtime%2Ftransitive-link-a-bunch.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fpanic-runtime%2Ftransitive-link-a-bunch.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpanic-runtime%2Ftransitive-link-a-bunch.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -6,7 +6,6 @@\n // aux-build:wants-panic-runtime-abort.rs\n // aux-build:panic-runtime-lang-items.rs\n // error-pattern: is not compiled with this crate's panic strategy `unwind`\n-// ignore-wasm32-bare compiled with panic=abort by default\n \n #![no_std]\n #![no_main]"}, {"sha": "b6174dc4efee87f8d8941279f5d297a627e77152", "filename": "src/test/ui/panic-runtime/want-unwind-got-abort.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fpanic-runtime%2Fwant-unwind-got-abort.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fpanic-runtime%2Fwant-unwind-got-abort.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpanic-runtime%2Fwant-unwind-got-abort.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -3,7 +3,6 @@\n // error-pattern:is not compiled with this crate's panic strategy `unwind`\n // aux-build:panic-runtime-abort.rs\n // aux-build:panic-runtime-lang-items.rs\n-// ignore-wasm32-bare compiled with panic=abort by default\n \n #![no_std]\n #![no_main]"}, {"sha": "b54babbeffa32aee5c0a739ea9a9240b529c345b", "filename": "src/test/ui/panic-runtime/want-unwind-got-abort2.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fpanic-runtime%2Fwant-unwind-got-abort2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fpanic-runtime%2Fwant-unwind-got-abort2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpanic-runtime%2Fwant-unwind-got-abort2.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -4,7 +4,6 @@\n // aux-build:panic-runtime-abort.rs\n // aux-build:wants-panic-runtime-abort.rs\n // aux-build:panic-runtime-lang-items.rs\n-// ignore-wasm32-bare compiled with panic=abort by default\n \n #![no_std]\n #![no_main]"}, {"sha": "3abedf2a764e2a9de352840bae2e500b73c2b25e", "filename": "src/test/ui/panic-while-printing.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fpanic-while-printing.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fpanic-while-printing.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpanic-while-printing.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,6 +1,5 @@\n // run-pass\n // needs-unwind\n-// ignore-emscripten no subprocess support\n \n #![feature(internal_output_capture)]\n "}, {"sha": "1babe011996b027324b3b7ee71fce91ead03e457", "filename": "src/test/ui/privacy/reachable-unnameable-items.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fprivacy%2Freachable-unnameable-items.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fprivacy%2Freachable-unnameable-items.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fprivacy%2Freachable-unnameable-items.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,5 +1,4 @@\n // run-pass\n-// ignore-wasm32-bare compiled with panic=abort by default\n // needs-unwind\n // aux-build:reachable-unnameable-items.rs\n "}, {"sha": "042a283659517791b3ac18a25c236e7fd1363ff5", "filename": "src/test/ui/proc-macro/expand-with-a-macro.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fproc-macro%2Fexpand-with-a-macro.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fproc-macro%2Fexpand-with-a-macro.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Fexpand-with-a-macro.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -2,7 +2,6 @@\n // needs-unwind\n // aux-build:expand-with-a-macro.rs\n \n-// ignore-wasm32-bare compiled with panic=abort by default\n \n #![deny(warnings)]\n "}, {"sha": "43888cecedab339fc2322b6216670f6c888d053b", "filename": "src/test/ui/rfc-1937-termination-trait/termination-trait-in-test.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Frfc-1937-termination-trait%2Ftermination-trait-in-test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Frfc-1937-termination-trait%2Ftermination-trait-in-test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-1937-termination-trait%2Ftermination-trait-in-test.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -2,7 +2,6 @@\n // run-pass\n // needs-unwind\n \n-// ignore-wasm32-bare compiled with panic=abort by default\n \n #![feature(test)]\n "}, {"sha": "f11456250d8742691a0a2bfae5ce207961839aa1", "filename": "src/test/ui/rfc-2091-track-caller/std-panic-locations.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Frfc-2091-track-caller%2Fstd-panic-locations.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Frfc-2091-track-caller%2Fstd-panic-locations.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2091-track-caller%2Fstd-panic-locations.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,6 +1,5 @@\n // run-pass\n // needs-unwind\n-// ignore-wasm32-bare compiled with panic=abort by default\n // revisions: default mir-opt\n //[mir-opt] compile-flags: -Zmir-opt-level=4\n "}, {"sha": "4c4816c2fbc8df8422d7e0a068a848394877eac0", "filename": "src/test/ui/rfcs/rfc1857-drop-order.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Frfcs%2Frfc1857-drop-order.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Frfcs%2Frfc1857-drop-order.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfcs%2Frfc1857-drop-order.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,6 +1,5 @@\n // run-pass\n // needs-unwind\n-// ignore-wasm32-bare compiled with panic=abort by default\n \n #![allow(dead_code, unreachable_code)]\n "}, {"sha": "e2221e5df8ea149c81330bbea8ff6a74e0a11234", "filename": "src/test/ui/runtime/rt-explody-panic-payloads.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fruntime%2Frt-explody-panic-payloads.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Fruntime%2Frt-explody-panic-payloads.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fruntime%2Frt-explody-panic-payloads.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -2,9 +2,6 @@\n // needs-unwind\n // ignore-emscripten no processes\n // ignore-sgx no processes\n-// ignore-wasm32-bare no unwinding panic\n-// ignore-avr no unwinding panic\n-// ignore-nvptx64 no unwinding panic\n \n use std::env;\n use std::process::Command;"}, {"sha": "033c8beb475dfca5243995af6668a53e19779c43", "filename": "src/test/ui/test-attrs/test-panic-while-printing.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Ftest-attrs%2Ftest-panic-while-printing.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Ftest-attrs%2Ftest-panic-while-printing.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftest-attrs%2Ftest-panic-while-printing.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,7 +1,6 @@\n // compile-flags:--test\n // run-pass\n // needs-unwind\n-// ignore-emscripten no subprocess support\n \n use std::fmt;\n use std::fmt::{Display, Formatter};"}, {"sha": "83519c4524a62145d06105023039b43f2666727c", "filename": "src/test/ui/test-attrs/test-should-fail-good-message.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Ftest-attrs%2Ftest-should-fail-good-message.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Ftest-attrs%2Ftest-should-fail-good-message.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftest-attrs%2Ftest-should-fail-good-message.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,6 +1,5 @@\n // run-pass\n // needs-unwind\n-// ignore-wasm32-bare compiled with panic=abort by default\n // compile-flags: --test\n #[test]\n #[should_panic(expected = \"foo\")]"}, {"sha": "52aa4bb31016c0b3aba2d0a22aacc3ec616a5212", "filename": "src/test/ui/transmutability/malformed-program-gracefulness/wrong-type-assume.rs", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Ftransmutability%2Fmalformed-program-gracefulness%2Fwrong-type-assume.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Ftransmutability%2Fmalformed-program-gracefulness%2Fwrong-type-assume.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftransmutability%2Fmalformed-program-gracefulness%2Fwrong-type-assume.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -24,10 +24,6 @@ mod assert {\n             Src,\n             Context,\n             { from_options(ASSUME_ALIGNMENT, ASSUME_LIFETIMES, ASSUME_SAFETY, ASSUME_VALIDITY) }\n-            //~^ ERROR E0080\n-            //~| ERROR E0080\n-            //~| ERROR E0080\n-            //~| ERROR E0080\n         >,\n     {}\n "}, {"sha": "c6d93876cfafab10c0704588aec42a9e3747e59d", "filename": "src/test/ui/transmutability/malformed-program-gracefulness/wrong-type-assume.stderr", "status": "modified", "additions": 6, "deletions": 31, "changes": 37, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Ftransmutability%2Fmalformed-program-gracefulness%2Fwrong-type-assume.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Ftransmutability%2Fmalformed-program-gracefulness%2Fwrong-type-assume.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftransmutability%2Fmalformed-program-gracefulness%2Fwrong-type-assume.stderr?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,52 +1,27 @@\n error[E0308]: mismatched types\n-  --> $DIR/wrong-type-assume.rs:53:51\n+  --> $DIR/wrong-type-assume.rs:49:51\n    |\n LL |     assert::is_transmutable::<Src, Dst, Context, {0u8}, false, false, false>();\n    |                                                   ^^^ expected `bool`, found `u8`\n \n-error[E0080]: evaluation of `assert::is_transmutable::<test::Src, test::Dst, test::Context, {0u8}, false, false, false>::{constant#0}` failed\n-  --> $DIR/wrong-type-assume.rs:26:15\n-   |\n-LL |             { from_options(ASSUME_ALIGNMENT, ASSUME_LIFETIMES, ASSUME_SAFETY, ASSUME_VALIDITY) }\n-   |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ referenced constant has errors\n-\n error[E0308]: mismatched types\n-  --> $DIR/wrong-type-assume.rs:54:58\n+  --> $DIR/wrong-type-assume.rs:50:58\n    |\n LL |     assert::is_transmutable::<Src, Dst, Context, false, {0u8}, false, false>();\n    |                                                          ^^^ expected `bool`, found `u8`\n \n-error[E0080]: evaluation of `assert::is_transmutable::<test::Src, test::Dst, test::Context, false, {0u8}, false, false>::{constant#0}` failed\n-  --> $DIR/wrong-type-assume.rs:26:15\n-   |\n-LL |             { from_options(ASSUME_ALIGNMENT, ASSUME_LIFETIMES, ASSUME_SAFETY, ASSUME_VALIDITY) }\n-   |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ referenced constant has errors\n-\n error[E0308]: mismatched types\n-  --> $DIR/wrong-type-assume.rs:55:65\n+  --> $DIR/wrong-type-assume.rs:51:65\n    |\n LL |     assert::is_transmutable::<Src, Dst, Context, false, false, {0u8}, false>();\n    |                                                                 ^^^ expected `bool`, found `u8`\n \n-error[E0080]: evaluation of `assert::is_transmutable::<test::Src, test::Dst, test::Context, false, false, {0u8}, false>::{constant#0}` failed\n-  --> $DIR/wrong-type-assume.rs:26:15\n-   |\n-LL |             { from_options(ASSUME_ALIGNMENT, ASSUME_LIFETIMES, ASSUME_SAFETY, ASSUME_VALIDITY) }\n-   |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ referenced constant has errors\n-\n error[E0308]: mismatched types\n-  --> $DIR/wrong-type-assume.rs:56:72\n+  --> $DIR/wrong-type-assume.rs:52:72\n    |\n LL |     assert::is_transmutable::<Src, Dst, Context, false, false, false, {0u8}>();\n    |                                                                        ^^^ expected `bool`, found `u8`\n \n-error[E0080]: evaluation of `assert::is_transmutable::<test::Src, test::Dst, test::Context, false, false, false, {0u8}>::{constant#0}` failed\n-  --> $DIR/wrong-type-assume.rs:26:15\n-   |\n-LL |             { from_options(ASSUME_ALIGNMENT, ASSUME_LIFETIMES, ASSUME_SAFETY, ASSUME_VALIDITY) }\n-   |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ referenced constant has errors\n-\n-error: aborting due to 8 previous errors\n+error: aborting due to 4 previous errors\n \n-Some errors have detailed explanations: E0080, E0308.\n-For more information about an error, try `rustc --explain E0080`.\n+For more information about this error, try `rustc --explain E0308`."}, {"sha": "9a324f00435c714c6e5b7e758a31368b9ecbd041", "filename": "src/test/ui/unwind-abis/ffi-unwind-calls-lint.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Funwind-abis%2Fffi-unwind-calls-lint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Funwind-abis%2Fffi-unwind-calls-lint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funwind-abis%2Fffi-unwind-calls-lint.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,6 +1,5 @@\n // build-pass\n // needs-unwind\n-// ignore-wasm32-bare compiled with panic=abort by default\n \n #![feature(c_unwind)]\n #![warn(ffi_unwind_calls)]"}, {"sha": "937a2b3dff8b6a9ee0db36a8a788a53af88d089b", "filename": "src/test/ui/unwind-abis/ffi-unwind-calls-lint.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Funwind-abis%2Fffi-unwind-calls-lint.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Funwind-abis%2Fffi-unwind-calls-lint.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funwind-abis%2Fffi-unwind-calls-lint.stderr?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,17 +1,17 @@\n warning: call to foreign function with FFI-unwind ABI\n-  --> $DIR/ffi-unwind-calls-lint.rs:21:14\n+  --> $DIR/ffi-unwind-calls-lint.rs:20:14\n    |\n LL |     unsafe { foo(); }\n    |              ^^^^^ call to foreign function with FFI-unwind ABI\n    |\n note: the lint level is defined here\n-  --> $DIR/ffi-unwind-calls-lint.rs:6:9\n+  --> $DIR/ffi-unwind-calls-lint.rs:5:9\n    |\n LL | #![warn(ffi_unwind_calls)]\n    |         ^^^^^^^^^^^^^^^^\n \n warning: call to function pointer with FFI-unwind ABI\n-  --> $DIR/ffi-unwind-calls-lint.rs:25:5\n+  --> $DIR/ffi-unwind-calls-lint.rs:24:5\n    |\n LL |     ptr();\n    |     ^^^^^ call to function pointer with FFI-unwind ABI"}, {"sha": "3bc309233a7ac03dd26d16b90ba933b15e9c3f52", "filename": "src/test/ui/unwind-no-uwtable.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Funwind-no-uwtable.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftest%2Fui%2Funwind-no-uwtable.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funwind-no-uwtable.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,7 +1,6 @@\n // run-pass\n // needs-unwind\n // ignore-windows target requires uwtable\n-// ignore-wasm32-bare no proper panic=unwind support\n // compile-flags: -C panic=unwind -C force-unwind-tables=n\n \n use std::panic::{self, AssertUnwindSafe};"}, {"sha": "4994fb9bbf9418e82e0470a23932aa582cf08f97", "filename": "src/tools/compiletest/src/common.rs", "status": "modified", "additions": 14, "deletions": 4, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftools%2Fcompiletest%2Fsrc%2Fcommon.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftools%2Fcompiletest%2Fsrc%2Fcommon.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fcommon.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -278,10 +278,6 @@ pub struct Config {\n     /// override this setting.\n     pub optimize_tests: bool,\n \n-    /// What panic strategy the target is built with.  Unwind supports Abort, but\n-    /// not vice versa.\n-    pub target_panic: PanicStrategy,\n-\n     /// Target system to be tested\n     pub target: String,\n \n@@ -426,6 +422,10 @@ impl Config {\n         *&self.target_cfg().pointer_width\n     }\n \n+    pub fn can_unwind(&self) -> bool {\n+        self.target_cfg().panic == PanicStrategy::Unwind\n+    }\n+\n     pub fn has_asm_support(&self) -> bool {\n         static ASM_SUPPORTED_ARCHS: &[&str] = &[\n             \"x86\", \"x86_64\", \"arm\", \"aarch64\", \"riscv32\",\n@@ -446,6 +446,7 @@ pub struct TargetCfg {\n     families: Vec<String>,\n     pointer_width: u32,\n     endian: Endian,\n+    panic: PanicStrategy,\n }\n \n #[derive(Eq, PartialEq, Clone, Debug)]\n@@ -481,6 +482,7 @@ impl TargetCfg {\n         let mut families = Vec::new();\n         let mut pointer_width = None;\n         let mut endian = None;\n+        let mut panic = None;\n         for line in print_cfg.lines() {\n             if let Some((name, value)) = line.split_once('=') {\n                 let value = value.trim_matches('\"');\n@@ -498,6 +500,13 @@ impl TargetCfg {\n                             s => panic!(\"unexpected {s}\"),\n                         })\n                     }\n+                    \"panic\" => {\n+                        panic = match value {\n+                            \"abort\" => Some(PanicStrategy::Abort),\n+                            \"unwind\" => Some(PanicStrategy::Unwind),\n+                            s => panic!(\"unexpected {s}\"),\n+                        }\n+                    }\n                     _ => {}\n                 }\n             }\n@@ -510,6 +519,7 @@ impl TargetCfg {\n             families,\n             pointer_width: pointer_width.unwrap(),\n             endian: endian.unwrap(),\n+            panic: panic.unwrap(),\n         }\n     }\n }"}, {"sha": "6f85227500361e3a2f03c44c091bc5f83c287a37", "filename": "src/tools/compiletest/src/header.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftools%2Fcompiletest%2Fsrc%2Fheader.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftools%2Fcompiletest%2Fsrc%2Fheader.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fheader.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -7,7 +7,7 @@ use std::path::{Path, PathBuf};\n \n use tracing::*;\n \n-use crate::common::{CompareMode, Config, Debugger, FailMode, Mode, PanicStrategy, PassMode};\n+use crate::common::{CompareMode, Config, Debugger, FailMode, Mode, PassMode};\n use crate::util;\n use crate::{extract_cdb_version, extract_gdb_version};\n \n@@ -949,8 +949,7 @@ pub fn make_test_description<R: Read>(\n         ignore |= !has_memtag && config.parse_name_directive(ln, \"needs-sanitizer-memtag\");\n         ignore |= !has_shadow_call_stack\n             && config.parse_name_directive(ln, \"needs-sanitizer-shadow-call-stack\");\n-        ignore |= config.target_panic == PanicStrategy::Abort\n-            && config.parse_name_directive(ln, \"needs-unwind\");\n+        ignore |= !config.can_unwind() && config.parse_name_directive(ln, \"needs-unwind\");\n         ignore |= config.target == \"wasm32-unknown-unknown\"\n             && config.parse_name_directive(ln, directives::CHECK_RUN_RESULTS);\n         ignore |= config.debugger == Some(Debugger::Cdb) && ignore_cdb(config, ln);"}, {"sha": "dccfd4e0d9807c7a8a8277bfc0699fa1f4f9a8f9", "filename": "src/tools/compiletest/src/main.rs", "status": "modified", "additions": 1, "deletions": 9, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftools%2Fcompiletest%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftools%2Fcompiletest%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fmain.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -5,9 +5,7 @@\n \n extern crate test;\n \n-use crate::common::{\n-    expected_output_path, output_base_dir, output_relative_path, PanicStrategy, UI_EXTENSIONS,\n-};\n+use crate::common::{expected_output_path, output_base_dir, output_relative_path, UI_EXTENSIONS};\n use crate::common::{CompareMode, Config, Debugger, Mode, PassMode, TestPaths};\n use crate::util::logv;\n use getopts::Options;\n@@ -105,7 +103,6 @@ pub fn parse_config(args: Vec<String>) -> Config {\n         .optmulti(\"\", \"host-rustcflags\", \"flags to pass to rustc for host\", \"FLAGS\")\n         .optmulti(\"\", \"target-rustcflags\", \"flags to pass to rustc for target\", \"FLAGS\")\n         .optflag(\"\", \"optimize-tests\", \"run tests with optimizations enabled\")\n-        .optopt(\"\", \"target-panic\", \"what panic strategy the target supports\", \"unwind | abort\")\n         .optflag(\"\", \"verbose\", \"run tests verbosely, showing all output\")\n         .optflag(\n             \"\",\n@@ -258,11 +255,6 @@ pub fn parse_config(args: Vec<String>) -> Config {\n         host_rustcflags: Some(matches.opt_strs(\"host-rustcflags\").join(\" \")),\n         target_rustcflags: Some(matches.opt_strs(\"target-rustcflags\").join(\" \")),\n         optimize_tests: matches.opt_present(\"optimize-tests\"),\n-        target_panic: match matches.opt_str(\"target-panic\").as_deref() {\n-            Some(\"unwind\") | None => PanicStrategy::Unwind,\n-            Some(\"abort\") => PanicStrategy::Abort,\n-            _ => panic!(\"unknown `--target-panic` option `{}` given\", mode),\n-        },\n         target,\n         host: opt_str2(matches.opt_str(\"host\")),\n         cdb,"}, {"sha": "da891ef077293c51fa8d3cd0d89471e2a20a574b", "filename": "src/tools/miri/cargo-miri/src/main.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftools%2Fmiri%2Fcargo-miri%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftools%2Fmiri%2Fcargo-miri%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Fcargo-miri%2Fsrc%2Fmain.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -1,3 +1,4 @@\n+#![cfg_attr(bootstrap, feature(let_else))]\n #![allow(clippy::useless_format, clippy::derive_partial_eq_without_eq, rustc::internal)]\n \n #[macro_use]"}, {"sha": "cda27beab300fd4c4113f085aaea23880501fe47", "filename": "src/tools/miri/src/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftools%2Fmiri%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftools%2Fmiri%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Fsrc%2Flib.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -10,6 +10,7 @@\n #![feature(is_some_with)]\n #![feature(nonzero_ops)]\n #![feature(local_key_cell_methods)]\n+#![cfg_attr(bootstrap, feature(let_else))]\n // Configure clippy and other lints\n #![allow(\n     clippy::collapsible_else_if,"}, {"sha": "de719df0f1f3044aea44d864844f105d0de6bdff", "filename": "src/tools/miri/tests/pass/issues/issue-miri-2433.rs", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fissues%2Fissue-miri-2433.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a14677239bbd9a3892d165ee24513c1a05820e4/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fissues%2Fissue-miri-2433.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fissues%2Fissue-miri-2433.rs?ref=4a14677239bbd9a3892d165ee24513c1a05820e4", "patch": "@@ -0,0 +1,22 @@\n+#![feature(type_alias_impl_trait)]\n+\n+trait T { type Item; }\n+\n+type Alias<'a> = impl T<Item = &'a ()>;\n+\n+struct S;\n+impl<'a> T for &'a S {\n+    type Item = &'a ();\n+}\n+\n+fn filter_positive<'a>() -> Alias<'a> {\n+    &S\n+}\n+\n+fn with_positive(fun: impl Fn(Alias<'_>)) {\n+    fun(filter_positive());\n+}\n+\n+fn main() {\n+    with_positive(|_| ());\n+}"}]}