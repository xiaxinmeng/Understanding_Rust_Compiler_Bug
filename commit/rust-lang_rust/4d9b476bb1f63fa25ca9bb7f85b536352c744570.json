{"sha": "4d9b476bb1f63fa25ca9bb7f85b536352c744570", "node_id": "C_kwDOAAsO6NoAKDRkOWI0NzZiYjFmNjNmYTI1Y2E5YmI3Zjg1YjUzNjM1MmM3NDQ1NzA", "commit": {"author": {"name": "Arlo Siemsen", "email": "arsiem@microsoft.com", "date": "2023-06-02T16:40:36Z"}, "committer": {"name": "Arlo Siemsen", "email": "arsiem@microsoft.com", "date": "2023-06-02T17:34:01Z"}, "message": "Update dependencies with reported vulnerabilities\n\nbumpalo 3.12.1 (yanked)\n  * updated to 3.13.0\ntokio 1.8.4 - https://rustsec.org/advisories/RUSTSEC-2023-0001\n  * updated to 1.28.2\nremove_dir_all 0.5.3 - https://rustsec.org/advisories/RUSTSEC-2023-0018\n  * removed by using the standard library function in `rust-installer` instead and updating to `tempfile@3.5.0` (which also removes the dependency).", "tree": {"sha": "f23665053b5c95cba9e1c2751de6ed8015d6892a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f23665053b5c95cba9e1c2751de6ed8015d6892a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4d9b476bb1f63fa25ca9bb7f85b536352c744570", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4d9b476bb1f63fa25ca9bb7f85b536352c744570", "html_url": "https://github.com/rust-lang/rust/commit/4d9b476bb1f63fa25ca9bb7f85b536352c744570", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4d9b476bb1f63fa25ca9bb7f85b536352c744570/comments", "author": {"login": "arlosi", "id": 704597, "node_id": "MDQ6VXNlcjcwNDU5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/704597?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arlosi", "html_url": "https://github.com/arlosi", "followers_url": "https://api.github.com/users/arlosi/followers", "following_url": "https://api.github.com/users/arlosi/following{/other_user}", "gists_url": "https://api.github.com/users/arlosi/gists{/gist_id}", "starred_url": "https://api.github.com/users/arlosi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arlosi/subscriptions", "organizations_url": "https://api.github.com/users/arlosi/orgs", "repos_url": "https://api.github.com/users/arlosi/repos", "events_url": "https://api.github.com/users/arlosi/events{/privacy}", "received_events_url": "https://api.github.com/users/arlosi/received_events", "type": "User", "site_admin": false}, "committer": {"login": "arlosi", "id": 704597, "node_id": "MDQ6VXNlcjcwNDU5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/704597?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arlosi", "html_url": "https://github.com/arlosi", "followers_url": "https://api.github.com/users/arlosi/followers", "following_url": "https://api.github.com/users/arlosi/following{/other_user}", "gists_url": "https://api.github.com/users/arlosi/gists{/gist_id}", "starred_url": "https://api.github.com/users/arlosi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arlosi/subscriptions", "organizations_url": "https://api.github.com/users/arlosi/orgs", "repos_url": "https://api.github.com/users/arlosi/repos", "events_url": "https://api.github.com/users/arlosi/events{/privacy}", "received_events_url": "https://api.github.com/users/arlosi/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0939ec13d88dfafcbb7f25314bd0d2f1519bf0d5", "url": "https://api.github.com/repos/rust-lang/rust/commits/0939ec13d88dfafcbb7f25314bd0d2f1519bf0d5", "html_url": "https://github.com/rust-lang/rust/commit/0939ec13d88dfafcbb7f25314bd0d2f1519bf0d5"}], "stats": {"total": 58, "additions": 29, "deletions": 29}, "files": [{"sha": "be622bbb935d6de6b0df78d42b6dbb2a3efe7a86", "filename": "Cargo.lock", "status": "modified", "additions": 23, "deletions": 25, "changes": 48, "blob_url": "https://github.com/rust-lang/rust/blob/4d9b476bb1f63fa25ca9bb7f85b536352c744570/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/4d9b476bb1f63fa25ca9bb7f85b536352c744570/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=4d9b476bb1f63fa25ca9bb7f85b536352c744570", "patch": "@@ -316,9 +316,9 @@ dependencies = [\n \n [[package]]\n name = \"bumpalo\"\n-version = \"3.12.1\"\n+version = \"3.13.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"9b1ce199063694f33ffb7dd4e0ee620741495c32833cde5aa08f02a0bf96f0c8\"\n+checksum = \"a3e2c3daef883ecc1b5d58c15adae93470a91d425f3532ba1695849656af3fc1\"\n \n [[package]]\n name = \"bytecount\"\n@@ -1219,7 +1219,7 @@ checksum = \"8a3de6e8d11b22ff9edc6d916f890800597d60f8b2da1caf2955c274638d6412\"\n dependencies = [\n  \"cfg-if\",\n  \"libc\",\n- \"redox_syscall\",\n+ \"redox_syscall 0.2.10\",\n  \"windows-sys 0.45.0\",\n ]\n \n@@ -1761,7 +1761,6 @@ dependencies = [\n  \"flate2\",\n  \"num_cpus\",\n  \"rayon\",\n- \"remove_dir_all\",\n  \"tar\",\n  \"walkdir\",\n  \"xz2\",\n@@ -2445,7 +2444,7 @@ dependencies = [\n  \"cfg-if\",\n  \"instant\",\n  \"libc\",\n- \"redox_syscall\",\n+ \"redox_syscall 0.2.10\",\n  \"smallvec\",\n  \"winapi\",\n ]\n@@ -2458,7 +2457,7 @@ checksum = \"4dc9e0dc2adc1c69d09143aff38d3d30c5c3f0df0dad82e6d25547af174ebec0\"\n dependencies = [\n  \"cfg-if\",\n  \"libc\",\n- \"redox_syscall\",\n+ \"redox_syscall 0.2.10\",\n  \"smallvec\",\n  \"windows-sys 0.42.0\",\n ]\n@@ -2801,14 +2800,23 @@ dependencies = [\n  \"bitflags\",\n ]\n \n+[[package]]\n+name = \"redox_syscall\"\n+version = \"0.3.5\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"567664f262709473930a4bf9e51bf2ebf3348f2e748ccc50dea20646858f8f29\"\n+dependencies = [\n+ \"bitflags\",\n+]\n+\n [[package]]\n name = \"redox_users\"\n version = \"0.4.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"528532f3d801c87aec9def2add9ca802fe569e44a544afe633765267840abe64\"\n dependencies = [\n  \"getrandom\",\n- \"redox_syscall\",\n+ \"redox_syscall 0.2.10\",\n ]\n \n [[package]]\n@@ -2860,15 +2868,6 @@ version = \"0.1.0\"\n name = \"remote-test-server\"\n version = \"0.1.0\"\n \n-[[package]]\n-name = \"remove_dir_all\"\n-version = \"0.5.3\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"3acd125665422973a33ac9d3dd2df85edad0f4ae9b00dafb1a05e43a9f5ef8e7\"\n-dependencies = [\n- \"winapi\",\n-]\n-\n [[package]]\n name = \"replace-version-placeholder\"\n version = \"0.1.0\"\n@@ -4789,16 +4788,15 @@ dependencies = [\n \n [[package]]\n name = \"tempfile\"\n-version = \"3.3.0\"\n+version = \"3.5.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"5cdb1ef4eaeeaddc8fbd371e5017057064af0911902ef36b39801f67cc6d79e4\"\n+checksum = \"b9fbec84f381d5795b08656e4912bec604d162bff9291d6189a78f4c8ab87998\"\n dependencies = [\n  \"cfg-if\",\n  \"fastrand\",\n- \"libc\",\n- \"redox_syscall\",\n- \"remove_dir_all\",\n- \"winapi\",\n+ \"redox_syscall 0.3.5\",\n+ \"rustix\",\n+ \"windows-sys 0.45.0\",\n ]\n \n [[package]]\n@@ -4984,14 +4982,14 @@ checksum = \"cda74da7e1a664f795bb1f8a87ec406fb89a02522cf6e50620d016add6dbbf5c\"\n \n [[package]]\n name = \"tokio\"\n-version = \"1.8.4\"\n+version = \"1.28.2\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"50dae83881bc9b0403dd5b44ea9deed3e939856cc8722d5be37f0d6e5c6d53dd\"\n+checksum = \"94d7b1cfd2aa4011f2de74c2c4c63665e27a71006b0a192dcd2710272e73dfa2\"\n dependencies = [\n  \"autocfg\",\n  \"bytes\",\n- \"memchr\",\n  \"pin-project-lite\",\n+ \"windows-sys 0.48.0\",\n ]\n \n [[package]]"}, {"sha": "621d3011a2aa1075fe1fffbd799269f7bd886ec6", "filename": "compiler/rustc_data_structures/src/temp_dir.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4d9b476bb1f63fa25ca9bb7f85b536352c744570/compiler%2Frustc_data_structures%2Fsrc%2Ftemp_dir.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4d9b476bb1f63fa25ca9bb7f85b536352c744570/compiler%2Frustc_data_structures%2Fsrc%2Ftemp_dir.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_data_structures%2Fsrc%2Ftemp_dir.rs?ref=4d9b476bb1f63fa25ca9bb7f85b536352c744570", "patch": "@@ -16,7 +16,7 @@ impl Drop for MaybeTempDir {\n         // occur.\n         let dir = unsafe { ManuallyDrop::take(&mut self.dir) };\n         if self.keep {\n-            dir.into_path();\n+            let _ = dir.into_path();\n         }\n     }\n }"}, {"sha": "85e979f07bff97140e736b93c6602712368bc792", "filename": "src/tools/rust-installer/Cargo.toml", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4d9b476bb1f63fa25ca9bb7f85b536352c744570/src%2Ftools%2Frust-installer%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/4d9b476bb1f63fa25ca9bb7f85b536352c744570/src%2Ftools%2Frust-installer%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Frust-installer%2FCargo.toml?ref=4d9b476bb1f63fa25ca9bb7f85b536352c744570", "patch": "@@ -17,7 +17,6 @@ tar = \"0.4.38\"\n walkdir = \"2\"\n xz2 = \"0.1.4\"\n num_cpus = \"1\"\n-remove_dir_all = \"0.5\"\n \n [dependencies.clap]\n features = [\"derive\"]"}, {"sha": "6cac314b68d0635b645938579083946168845c8f", "filename": "src/tools/rust-installer/src/util.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4d9b476bb1f63fa25ca9bb7f85b536352c744570/src%2Ftools%2Frust-installer%2Fsrc%2Futil.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4d9b476bb1f63fa25ca9bb7f85b536352c744570/src%2Ftools%2Frust-installer%2Fsrc%2Futil.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Frust-installer%2Fsrc%2Futil.rs?ref=4d9b476bb1f63fa25ca9bb7f85b536352c744570", "patch": "@@ -82,7 +82,7 @@ pub fn open_file<P: AsRef<Path>>(path: P) -> Result<fs::File> {\n \n /// Wraps `remove_dir_all` with a nicer error message.\n pub fn remove_dir_all<P: AsRef<Path>>(path: P) -> Result<()> {\n-    remove_dir_all::remove_dir_all(path.as_ref())\n+    fs::remove_dir_all(path.as_ref())\n         .with_context(|| format!(\"failed to remove dir '{}'\", path.as_ref().display()))?;\n     Ok(())\n }"}, {"sha": "3dbf2884ed1f17c00b74d88fd100c764505a0dbb", "filename": "src/tools/tidy/src/deps.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/4d9b476bb1f63fa25ca9bb7f85b536352c744570/src%2Ftools%2Ftidy%2Fsrc%2Fdeps.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4d9b476bb1f63fa25ca9bb7f85b536352c744570/src%2Ftools%2Ftidy%2Fsrc%2Fdeps.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Ftidy%2Fsrc%2Fdeps.rs?ref=4d9b476bb1f63fa25ca9bb7f85b536352c744570", "patch": "@@ -168,12 +168,14 @@ const PERMITTED_RUSTC_DEPENDENCIES: &[&str] = &[\n     \"instant\",\n     \"intl-memoizer\",\n     \"intl_pluralrules\",\n+    \"io-lifetimes\",\n     \"itertools\",\n     \"itoa\",\n     \"jobserver\",\n     \"lazy_static\",\n     \"libc\",\n     \"libloading\",\n+    \"linux-raw-sys\",\n     \"litemap\",\n     \"lock_api\",\n     \"log\",\n@@ -211,12 +213,12 @@ const PERMITTED_RUSTC_DEPENDENCIES: &[&str] = &[\n     \"regex\",\n     \"regex-automata\",\n     \"regex-syntax\",\n-    \"remove_dir_all\",\n     \"rustc-demangle\",\n     \"rustc-hash\",\n     \"rustc-rayon\",\n     \"rustc-rayon-core\",\n     \"rustc_version\",\n+    \"rustix\",\n     \"ruzstd\", // via object in thorin-dwp\n     \"ryu\",\n     \"scoped-tls\",\n@@ -280,6 +282,7 @@ const PERMITTED_RUSTC_DEPENDENCIES: &[&str] = &[\n     \"winapi-util\",\n     \"winapi-x86_64-pc-windows-gnu\",\n     \"windows\",\n+    \"windows-sys\",\n     \"windows-targets\",\n     \"windows_aarch64_gnullvm\",\n     \"windows_aarch64_msvc\","}]}