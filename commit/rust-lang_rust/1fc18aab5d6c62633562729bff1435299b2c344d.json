{"sha": "1fc18aab5d6c62633562729bff1435299b2c344d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFmYzE4YWFiNWQ2YzYyNjMzNTYyNzI5YmZmMTQzNTI5OWIyYzM0NGQ=", "commit": {"author": {"name": "Dustin Bensing", "email": "dustin.bensing@googlemail.com", "date": "2016-08-16T21:50:32Z"}, "committer": {"name": "Dustin Bensing", "email": "dustin.bensing@googlemail.com", "date": "2016-08-16T21:50:32Z"}, "message": "Update E0005 to use a label", "tree": {"sha": "22361bd3cf26da24986e1429b2f80e3f43346552", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/22361bd3cf26da24986e1429b2f80e3f43346552"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1fc18aab5d6c62633562729bff1435299b2c344d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1fc18aab5d6c62633562729bff1435299b2c344d", "html_url": "https://github.com/rust-lang/rust/commit/1fc18aab5d6c62633562729bff1435299b2c344d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1fc18aab5d6c62633562729bff1435299b2c344d/comments", "author": {"login": "pythoneer", "id": 1102097, "node_id": "MDQ6VXNlcjExMDIwOTc=", "avatar_url": "https://avatars.githubusercontent.com/u/1102097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pythoneer", "html_url": "https://github.com/pythoneer", "followers_url": "https://api.github.com/users/pythoneer/followers", "following_url": "https://api.github.com/users/pythoneer/following{/other_user}", "gists_url": "https://api.github.com/users/pythoneer/gists{/gist_id}", "starred_url": "https://api.github.com/users/pythoneer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pythoneer/subscriptions", "organizations_url": "https://api.github.com/users/pythoneer/orgs", "repos_url": "https://api.github.com/users/pythoneer/repos", "events_url": "https://api.github.com/users/pythoneer/events{/privacy}", "received_events_url": "https://api.github.com/users/pythoneer/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pythoneer", "id": 1102097, "node_id": "MDQ6VXNlcjExMDIwOTc=", "avatar_url": "https://avatars.githubusercontent.com/u/1102097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pythoneer", "html_url": "https://github.com/pythoneer", "followers_url": "https://api.github.com/users/pythoneer/followers", "following_url": "https://api.github.com/users/pythoneer/following{/other_user}", "gists_url": "https://api.github.com/users/pythoneer/gists{/gist_id}", "starred_url": "https://api.github.com/users/pythoneer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pythoneer/subscriptions", "organizations_url": "https://api.github.com/users/pythoneer/orgs", "repos_url": "https://api.github.com/users/pythoneer/repos", "events_url": "https://api.github.com/users/pythoneer/events{/privacy}", "received_events_url": "https://api.github.com/users/pythoneer/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "db7300d4149256023f9ede6828afef321170c07f", "url": "https://api.github.com/repos/rust-lang/rust/commits/db7300d4149256023f9ede6828afef321170c07f", "html_url": "https://github.com/rust-lang/rust/commit/db7300d4149256023f9ede6828afef321170c07f"}], "stats": {"total": 7, "additions": 4, "deletions": 3}, "files": [{"sha": "5db293f5bb016786ad409920e5d8545829bd0fde", "filename": "src/librustc_const_eval/check_match.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/1fc18aab5d6c62633562729bff1435299b2c344d/src%2Flibrustc_const_eval%2Fcheck_match.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1fc18aab5d6c62633562729bff1435299b2c344d/src%2Flibrustc_const_eval%2Fcheck_match.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_const_eval%2Fcheck_match.rs?ref=1fc18aab5d6c62633562729bff1435299b2c344d", "patch": "@@ -1073,11 +1073,12 @@ fn check_irrefutable(cx: &MatchCheckCtxt, pat: &Pat, is_fn_arg: bool) {\n     };\n \n     is_refutable(cx, pat, |uncovered_pat| {\n-        span_err!(cx.tcx.sess, pat.span, E0005,\n+        let pattern_string = pat_to_string(uncovered_pat);\n+        struct_span_err!(cx.tcx.sess, pat.span, E0005,\n             \"refutable pattern in {}: `{}` not covered\",\n             origin,\n-            pat_to_string(uncovered_pat),\n-        );\n+            pattern_string,\n+        ).span_label(pat.span, &format!(\"pattern `{}` not covered\", pattern_string)).emit();\n     });\n }\n "}]}