{"sha": "7e21db5b5c18f47a5f43e36f0bf34f1bbd1a1466", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdlMjFkYjViNWMxOGY0N2E1ZjQzZTM2ZjBiZjM0ZjFiYmQxYTE0NjY=", "commit": {"author": {"name": "Cameron Steffen", "email": "cam.steffen94@gmail.com", "date": "2021-06-14T15:01:43Z"}, "committer": {"name": "Cameron Steffen", "email": "cam.steffen94@gmail.com", "date": "2021-06-25T13:53:29Z"}, "message": "Add suspicious group", "tree": {"sha": "e90d84daa54a23d8ecb6dc06ee67a932ae99452c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e90d84daa54a23d8ecb6dc06ee67a932ae99452c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7e21db5b5c18f47a5f43e36f0bf34f1bbd1a1466", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7e21db5b5c18f47a5f43e36f0bf34f1bbd1a1466", "html_url": "https://github.com/rust-lang/rust/commit/7e21db5b5c18f47a5f43e36f0bf34f1bbd1a1466", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7e21db5b5c18f47a5f43e36f0bf34f1bbd1a1466/comments", "author": {"login": "camsteffen", "id": 5565418, "node_id": "MDQ6VXNlcjU1NjU0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/5565418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/camsteffen", "html_url": "https://github.com/camsteffen", "followers_url": "https://api.github.com/users/camsteffen/followers", "following_url": "https://api.github.com/users/camsteffen/following{/other_user}", "gists_url": "https://api.github.com/users/camsteffen/gists{/gist_id}", "starred_url": "https://api.github.com/users/camsteffen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/camsteffen/subscriptions", "organizations_url": "https://api.github.com/users/camsteffen/orgs", "repos_url": "https://api.github.com/users/camsteffen/repos", "events_url": "https://api.github.com/users/camsteffen/events{/privacy}", "received_events_url": "https://api.github.com/users/camsteffen/received_events", "type": "User", "site_admin": false}, "committer": {"login": "camsteffen", "id": 5565418, "node_id": "MDQ6VXNlcjU1NjU0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/5565418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/camsteffen", "html_url": "https://github.com/camsteffen", "followers_url": "https://api.github.com/users/camsteffen/followers", "following_url": "https://api.github.com/users/camsteffen/following{/other_user}", "gists_url": "https://api.github.com/users/camsteffen/gists{/gist_id}", "starred_url": "https://api.github.com/users/camsteffen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/camsteffen/subscriptions", "organizations_url": "https://api.github.com/users/camsteffen/orgs", "repos_url": "https://api.github.com/users/camsteffen/repos", "events_url": "https://api.github.com/users/camsteffen/events{/privacy}", "received_events_url": "https://api.github.com/users/camsteffen/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8d427b624f15a5c782c97021c3717451d86b8576", "url": "https://api.github.com/repos/rust-lang/rust/commits/8d427b624f15a5c782c97021c3717451d86b8576", "html_url": "https://github.com/rust-lang/rust/commit/8d427b624f15a5c782c97021c3717451d86b8576"}], "stats": {"total": 42, "additions": 27, "deletions": 15}, "files": [{"sha": "29bfebe45838facc9086e8711ec64053d1ae1dc3", "filename": "README.md", "status": "modified", "additions": 11, "deletions": 10, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/7e21db5b5c18f47a5f43e36f0bf34f1bbd1a1466/README.md", "raw_url": "https://github.com/rust-lang/rust/raw/7e21db5b5c18f47a5f43e36f0bf34f1bbd1a1466/README.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/README.md?ref=7e21db5b5c18f47a5f43e36f0bf34f1bbd1a1466", "patch": "@@ -10,16 +10,17 @@ A collection of lints to catch common mistakes and improve your [Rust](https://g\n Lints are divided into categories, each with a default [lint level](https://doc.rust-lang.org/rustc/lints/levels.html).\n You can choose how much Clippy is supposed to ~~annoy~~ help you by changing the lint level by category.\n \n-| Category              | Description                                                             | Default level |\n-| --------------------- | ----------------------------------------------------------------------- | ------------- |\n-| `clippy::all`         | all lints that are on by default (correctness, style, complexity, perf) | **warn/deny** |\n-| `clippy::correctness` | code that is outright wrong or very useless                             | **deny**      |\n-| `clippy::style`       | code that should be written in a more idiomatic way                     | **warn**      |\n-| `clippy::complexity`  | code that does something simple but in a complex way                    | **warn**      |\n-| `clippy::perf`        | code that can be written to run faster                                  | **warn**      |\n-| `clippy::pedantic`    | lints which are rather strict or might have false positives             | allow         |\n-| `clippy::nursery`     | new lints that are still under development                              | allow         |\n-| `clippy::cargo`       | lints for the cargo manifest                                            | allow         |\n+| Category              | Description                                                                         | Default level |\n+| --------------------- | ----------------------------------------------------------------------------------- | ------------- |\n+| `clippy::all`         | all lints that are on by default (correctness, suspicious, style, complexity, perf) | **warn/deny** |\n+| `clippy::correctness` | code that is outright wrong or useless                                              | **deny**      |\n+| `clippy::suspicious`  | code that is most likely wrong or useless                                           | **warn**      |\n+| `clippy::style`       | code that should be written in a more idiomatic way                                 | **warn**      |\n+| `clippy::complexity`  | code that does something simple but in a complex way                                | **warn**      |\n+| `clippy::perf`        | code that can be written to run faster                                              | **warn**      |\n+| `clippy::pedantic`    | lints which are rather strict or might have false positives                         | allow         |\n+| `clippy::nursery`     | new lints that are still under development                                          | allow         |\n+| `clippy::cargo`       | lints for the cargo manifest                                                        | allow         |\n \n More to come, please [file an issue](https://github.com/rust-lang/rust-clippy/issues) if you have ideas!\n "}, {"sha": "fbc530eb6065a9dbd06de44c419064cc5fe0f803", "filename": "clippy_dev/src/main.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7e21db5b5c18f47a5f43e36f0bf34f1bbd1a1466/clippy_dev%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7e21db5b5c18f47a5f43e36f0bf34f1bbd1a1466/clippy_dev%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_dev%2Fsrc%2Fmain.rs?ref=7e21db5b5c18f47a5f43e36f0bf34f1bbd1a1466", "patch": "@@ -137,6 +137,7 @@ fn get_clap_config<'a>() -> ArgMatches<'a> {\n                         .possible_values(&[\n                             \"style\",\n                             \"correctness\",\n+                            \"suspicious\",\n                             \"complexity\",\n                             \"perf\",\n                             \"pedantic\","}, {"sha": "db467c26f15466de263ddd1c5a00bac7b1f995e5", "filename": "clippy_dev/src/update_lints.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/7e21db5b5c18f47a5f43e36f0bf34f1bbd1a1466/clippy_dev%2Fsrc%2Fupdate_lints.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7e21db5b5c18f47a5f43e36f0bf34f1bbd1a1466/clippy_dev%2Fsrc%2Fupdate_lints.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_dev%2Fsrc%2Fupdate_lints.rs?ref=7e21db5b5c18f47a5f43e36f0bf34f1bbd1a1466", "patch": "@@ -92,7 +92,10 @@ pub fn run(update_mode: UpdateMode) {\n         || {\n             // clippy::all should only include the following lint groups:\n             let all_group_lints = usable_lints.iter().filter(|l| {\n-                l.group == \"correctness\" || l.group == \"style\" || l.group == \"complexity\" || l.group == \"perf\"\n+                matches!(\n+                    &*l.group,\n+                    \"correctness\" | \"suspicious\" | \"style\" | \"complexity\" | \"perf\"\n+                )\n             });\n \n             gen_lint_group_list(all_group_lints)"}, {"sha": "4ce1d511d27c14b528e98ba3ef3115df26c286b5", "filename": "clippy_lints/src/lib.rs", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/7e21db5b5c18f47a5f43e36f0bf34f1bbd1a1466/clippy_lints%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7e21db5b5c18f47a5f43e36f0bf34f1bbd1a1466/clippy_lints%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.rs?ref=7e21db5b5c18f47a5f43e36f0bf34f1bbd1a1466", "patch": "@@ -60,9 +60,9 @@ use rustc_session::Session;\n /// 4. The `description` that contains a short explanation on what's wrong with code where the\n ///    lint is triggered.\n ///\n-/// Currently the categories `style`, `correctness`, `complexity` and `perf` are enabled by default.\n-/// As said in the README.md of this repository, if the lint level mapping changes, please update\n-/// README.md.\n+/// Currently the categories `style`, `correctness`, `suspicious`, `complexity` and `perf` are\n+/// enabled by default. As said in the README.md of this repository, if the lint level mapping\n+/// changes, please update README.md.\n ///\n /// # Example\n ///\n@@ -106,6 +106,11 @@ macro_rules! declare_clippy_lint {\n             $(#[$attr])* pub clippy::$name, Deny, $description, report_in_external_macro: true\n         }\n     };\n+    { $(#[$attr:meta])* pub $name:tt, suspicious, $description:tt } => {\n+        declare_tool_lint! {\n+            $(#[$attr])* pub clippy::$name, Warn, $description, report_in_external_macro: true\n+        }\n+    };\n     { $(#[$attr:meta])* pub $name:tt, complexity, $description:tt } => {\n         declare_tool_lint! {\n             $(#[$attr])* pub clippy::$name, Warn, $description, report_in_external_macro: true"}, {"sha": "e877af09e28900d94f5491a828b93bffabed4388", "filename": "clippy_lints/src/utils/internal_lints/metadata_collector.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/7e21db5b5c18f47a5f43e36f0bf34f1bbd1a1466/clippy_lints%2Fsrc%2Futils%2Finternal_lints%2Fmetadata_collector.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7e21db5b5c18f47a5f43e36f0bf34f1bbd1a1466/clippy_lints%2Fsrc%2Futils%2Finternal_lints%2Fmetadata_collector.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Finternal_lints%2Fmetadata_collector.rs?ref=7e21db5b5c18f47a5f43e36f0bf34f1bbd1a1466", "patch": "@@ -47,8 +47,9 @@ const DEPRECATED_LINT_GROUP_STR: &str = \"deprecated\";\n const DEPRECATED_LINT_LEVEL: &str = \"none\";\n /// This array holds Clippy's lint groups with their corresponding default lint level. The\n /// lint level for deprecated lints is set in `DEPRECATED_LINT_LEVEL`.\n-const DEFAULT_LINT_LEVELS: [(&str, &str); 8] = [\n+const DEFAULT_LINT_LEVELS: &[(&str, &str)] = &[\n     (\"correctness\", \"deny\"),\n+    (\"suspicious\", \"warn\"),\n     (\"restriction\", \"allow\"),\n     (\"style\", \"warn\"),\n     (\"pedantic\", \"allow\"),"}, {"sha": "9cefb2dbb197caffafcc0ae1cd7c6f40f1fa450c", "filename": "util/lintlib.py", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7e21db5b5c18f47a5f43e36f0bf34f1bbd1a1466/util%2Flintlib.py", "raw_url": "https://github.com/rust-lang/rust/raw/7e21db5b5c18f47a5f43e36f0bf34f1bbd1a1466/util%2Flintlib.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/util%2Flintlib.py?ref=7e21db5b5c18f47a5f43e36f0bf34f1bbd1a1466", "patch": "@@ -19,6 +19,7 @@\n \n lint_levels = {\n     \"correctness\": 'Deny',\n+    \"suspicious\": 'Warn',\n     \"style\": 'Warn',\n     \"complexity\": 'Warn',\n     \"perf\": 'Warn',"}]}