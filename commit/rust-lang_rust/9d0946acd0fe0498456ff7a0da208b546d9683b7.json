{"sha": "9d0946acd0fe0498456ff7a0da208b546d9683b7", "node_id": "MDY6Q29tbWl0NzI0NzEyOjlkMDk0NmFjZDBmZTA0OTg0NTZmZjdhMGRhMjA4YjU0NmQ5NjgzYjc=", "commit": {"author": {"name": "Joe Ranweiler", "email": "joe@lemma.co", "date": "2017-07-20T22:05:10Z"}, "committer": {"name": "Joe Ranweiler", "email": "joe@lemma.co", "date": "2017-07-21T04:49:05Z"}, "message": "Tell `tidy` about `compiler_builtins_lib` feature\n\nAfter the work in #42899, it no longer auto-discovers it.", "tree": {"sha": "e6a5c6364c40a07e928f403f3d5e84e716688f44", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e6a5c6364c40a07e928f403f3d5e84e716688f44"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9d0946acd0fe0498456ff7a0da208b546d9683b7", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niIMEABYIACsWIQQJbh8imDr4nXbXu5rgtkWMsD0WfgUCWXGIOg0cam9lQGxlbW1h\nLmNvAAoJEOC2RYywPRZ+1ucBANntR/VlWnI40LXuxthX2dD2PKHZsK23SPDhDjws\nDpfoAP9gYikGpaBcNZF6blxJui6o+jpjzvbZxRYr8md8gb8CAg==\n=i+r0\n-----END PGP SIGNATURE-----", "payload": "tree e6a5c6364c40a07e928f403f3d5e84e716688f44\nparent 344f01cf1322d61bad109b503d0e6a1b55d6ed31\nauthor Joe Ranweiler <joe@lemma.co> 1500588310 -0700\ncommitter Joe Ranweiler <joe@lemma.co> 1500612545 -0700\n\nTell `tidy` about `compiler_builtins_lib` feature\n\nAfter the work in #42899, it no longer auto-discovers it.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9d0946acd0fe0498456ff7a0da208b546d9683b7", "html_url": "https://github.com/rust-lang/rust/commit/9d0946acd0fe0498456ff7a0da208b546d9683b7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9d0946acd0fe0498456ff7a0da208b546d9683b7/comments", "author": {"login": "ranweiler", "id": 515835, "node_id": "MDQ6VXNlcjUxNTgzNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/515835?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ranweiler", "html_url": "https://github.com/ranweiler", "followers_url": "https://api.github.com/users/ranweiler/followers", "following_url": "https://api.github.com/users/ranweiler/following{/other_user}", "gists_url": "https://api.github.com/users/ranweiler/gists{/gist_id}", "starred_url": "https://api.github.com/users/ranweiler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ranweiler/subscriptions", "organizations_url": "https://api.github.com/users/ranweiler/orgs", "repos_url": "https://api.github.com/users/ranweiler/repos", "events_url": "https://api.github.com/users/ranweiler/events{/privacy}", "received_events_url": "https://api.github.com/users/ranweiler/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ranweiler", "id": 515835, "node_id": "MDQ6VXNlcjUxNTgzNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/515835?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ranweiler", "html_url": "https://github.com/ranweiler", "followers_url": "https://api.github.com/users/ranweiler/followers", "following_url": "https://api.github.com/users/ranweiler/following{/other_user}", "gists_url": "https://api.github.com/users/ranweiler/gists{/gist_id}", "starred_url": "https://api.github.com/users/ranweiler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ranweiler/subscriptions", "organizations_url": "https://api.github.com/users/ranweiler/orgs", "repos_url": "https://api.github.com/users/ranweiler/repos", "events_url": "https://api.github.com/users/ranweiler/events{/privacy}", "received_events_url": "https://api.github.com/users/ranweiler/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "344f01cf1322d61bad109b503d0e6a1b55d6ed31", "url": "https://api.github.com/repos/rust-lang/rust/commits/344f01cf1322d61bad109b503d0e6a1b55d6ed31", "html_url": "https://github.com/rust-lang/rust/commit/344f01cf1322d61bad109b503d0e6a1b55d6ed31"}], "stats": {"total": 12, "additions": 12, "deletions": 0}, "files": [{"sha": "301f0d1d80b79a9e65c31a713649c3c5f75d9899", "filename": "src/tools/tidy/src/features.rs", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/9d0946acd0fe0498456ff7a0da208b546d9683b7/src%2Ftools%2Ftidy%2Fsrc%2Ffeatures.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9d0946acd0fe0498456ff7a0da208b546d9683b7/src%2Ftools%2Ftidy%2Fsrc%2Ffeatures.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Ftidy%2Fsrc%2Ffeatures.rs?ref=9d0946acd0fe0498456ff7a0da208b546d9683b7", "patch": "@@ -219,6 +219,18 @@ pub fn collect_lang_features(base_src_path: &Path) -> Features {\n \n pub fn collect_lib_features(base_src_path: &Path) -> Features {\n     let mut lib_features = Features::new();\n+\n+    // This library feature is defined in the `compiler_builtins` crate, which\n+    // has been moved out-of-tree. Now it can no longer be auto-discovered by\n+    // `tidy`, because we need to filter out its (submodule) directory. Manually\n+    // add it to the set of known library features so we can still generate docs.\n+    lib_features.insert(\"compiler_builtins_lib\".to_owned(), Feature {\n+        level: Status::Unstable,\n+        since: \"\".to_owned(),\n+        has_gate_test: false,\n+        tracking_issue: None,\n+    });\n+\n     map_lib_features(base_src_path,\n                      &mut |res, _, _| {\n         match res {"}]}