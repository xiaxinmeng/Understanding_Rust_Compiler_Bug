{"sha": "8d7863fad045edff9d9c825b48e72dd022c6fad5", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhkNzg2M2ZhZDA0NWVkZmY5ZDljODI1YjQ4ZTcyZGQwMjJjNmZhZDU=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-11-29T01:50:23Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-11-29T02:01:42Z"}, "message": "configure: Add --disable-manage-submodules switch\n\nThis will keep configure/make from updating submodules, which becomes\nvery annoying when you are working on LLVM", "tree": {"sha": "c2c0076f3a79da87938d04aa94d72c5e4619e6da", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c2c0076f3a79da87938d04aa94d72c5e4619e6da"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8d7863fad045edff9d9c825b48e72dd022c6fad5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8d7863fad045edff9d9c825b48e72dd022c6fad5", "html_url": "https://github.com/rust-lang/rust/commit/8d7863fad045edff9d9c825b48e72dd022c6fad5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8d7863fad045edff9d9c825b48e72dd022c6fad5/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cd91c6d065bf4b0688a588cb7ed19ad90aa53b94", "url": "https://api.github.com/repos/rust-lang/rust/commits/cd91c6d065bf4b0688a588cb7ed19ad90aa53b94", "html_url": "https://github.com/rust-lang/rust/commit/cd91c6d065bf4b0688a588cb7ed19ad90aa53b94"}], "stats": {"total": 11, "additions": 11, "deletions": 0}, "files": [{"sha": "b9920aa60ad9b3b5e2e0f095f8d493011b421d5d", "filename": "Makefile.in", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/8d7863fad045edff9d9c825b48e72dd022c6fad5/Makefile.in", "raw_url": "https://github.com/rust-lang/rust/raw/8d7863fad045edff9d9c825b48e72dd022c6fad5/Makefile.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Makefile.in?ref=8d7863fad045edff9d9c825b48e72dd022c6fad5", "patch": "@@ -340,8 +340,12 @@ endif\n # Re-configuration\n ######################################################################\n \n+ifndef CFG_DISABLE_MANAGE_SUBMODULES\n # This is a pretty expensive operation but I don't see any way to avoid it\n NEED_GIT_RECONFIG=$(shell cd \"$(CFG_SRC_DIR)\" && \"$(CFG_GIT)\" submodule status | grep -c '^\\(+\\|-\\)')\n+else\n+NEED_GIT_RECONFIG=0\n+endif\n \n ifeq ($(NEED_GIT_RECONFIG),0)\n else"}, {"sha": "dc539d0af0cbad503d4d1d42a22a8daa0ece3456", "filename": "configure", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/8d7863fad045edff9d9c825b48e72dd022c6fad5/configure", "raw_url": "https://github.com/rust-lang/rust/raw/8d7863fad045edff9d9c825b48e72dd022c6fad5/configure", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/configure?ref=8d7863fad045edff9d9c825b48e72dd022c6fad5", "patch": "@@ -253,6 +253,7 @@ opt docs     1 \"build documentation\"\n opt optimize 1 \"build optimized rust code\"\n opt optimize-cxx 1 \"build optimized C++ code\"\n opt optimize-llvm 1 \"build optimized LLVM\"\n+opt manage-submodules 1 \"let the build manage the git submodules\"\n opt mingw-cross 0 \"cross-compile for win32 using mingw\"\n opt clang 0 \"prefer gcc to clang for building the runtime\"\n valopt prefix \"/usr/local\" \"set installation prefix\"\n@@ -404,11 +405,17 @@ step_msg \"configuring submodules\"\n # Have to be in the top of src directory for this\n cd ${CFG_SRC_DIR}\n \n+if [ -z $CFG_DISABLE_MANAGE_SUBMODULES ]\n+then\n SUBMODULE_STATUS=$(\"${CFG_GIT}\" submodule status)\n NEED_INIT_COUNT=$(echo \"$SUBMODULE_STATUS\" | grep -c \"^-\")\n NEED_UPDATE_COUNT=$(echo \"$SUBMODULE_STATUS\" | grep -c \"^+\")\n NEED_INIT=$(test $NEED_INIT_COUNT -gt 0)$?\n NEED_UPDATE=$(test \"($NEED_INIT)\" -o \"$NEED_UPDATE_COUNT\" -gt 0)$?\n+else\n+NEED_INIT=\n+NEED_UPDATE=\n+fi\n \n if [ $NEED_INIT ]\n then"}]}