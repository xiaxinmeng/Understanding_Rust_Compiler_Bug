{"sha": "3e08f1b57ea6df87ee2d01f31339958998f8ea26", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNlMDhmMWI1N2VhNmRmODdlZTJkMDFmMzEzMzk5NTg5OThmOGVhMjY=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-06-20T06:35:58Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-06-20T06:35:58Z"}, "message": "Rollup merge of #60454 - acrrd:issues/54054_skip, r=scottmcm\n\nAdd custom nth_back to Skip\n\nImplementation of nth_back for Skip.\nPart of #54054", "tree": {"sha": "59ff79d60280f87ec16e094fa01bcc36f2ecbb43", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/59ff79d60280f87ec16e094fa01bcc36f2ecbb43"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3e08f1b57ea6df87ee2d01f31339958998f8ea26", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdCylOCRBK7hj4Ov3rIwAAdHIIAE2qdmEYNnoaMNCfryna/zrW\n7QoD3j0x/8ng/j7MSGN5lME8fe4hyt4zxrR2LaEphT+WcpG7vdZSWU8iEaLdSa0J\nhhFIRRNsZGMjeVORCemg9hVYjlcmmMLehsNZkzN/G+xs+iQ745m0XUKJA1HAI8RD\nNhBTrbPj+27EFWfIu0XMiULM0a2o9YcQfi2k9vzrduwZKTHZjzyeHaaFaepEb2V+\nUHF5oywzgnfu+551NpNyXw5xUBBHjmn/jtv9zP3s0qpbJ57xokkec/ue7HH85hJB\nRckULAejBm4pXkiA5Bh2ncee2dHKhkgh5S+xpm0hKL5cfqsSLa2CUv4NBM/AYWY=\n=EZeD\n-----END PGP SIGNATURE-----\n", "payload": "tree 59ff79d60280f87ec16e094fa01bcc36f2ecbb43\nparent 3c805ce183840bd20bd81a54a02b3c8b6dccc9dd\nparent e80a37558df5ac9828caccd48459fdb7be488f5b\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1561012558 +0200\ncommitter GitHub <noreply@github.com> 1561012558 +0200\n\nRollup merge of #60454 - acrrd:issues/54054_skip, r=scottmcm\n\nAdd custom nth_back to Skip\n\nImplementation of nth_back for Skip.\nPart of #54054\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3e08f1b57ea6df87ee2d01f31339958998f8ea26", "html_url": "https://github.com/rust-lang/rust/commit/3e08f1b57ea6df87ee2d01f31339958998f8ea26", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3e08f1b57ea6df87ee2d01f31339958998f8ea26/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3c805ce183840bd20bd81a54a02b3c8b6dccc9dd", "url": "https://api.github.com/repos/rust-lang/rust/commits/3c805ce183840bd20bd81a54a02b3c8b6dccc9dd", "html_url": "https://github.com/rust-lang/rust/commit/3c805ce183840bd20bd81a54a02b3c8b6dccc9dd"}, {"sha": "e80a37558df5ac9828caccd48459fdb7be488f5b", "url": "https://api.github.com/repos/rust-lang/rust/commits/e80a37558df5ac9828caccd48459fdb7be488f5b", "html_url": "https://github.com/rust-lang/rust/commit/e80a37558df5ac9828caccd48459fdb7be488f5b"}], "stats": {"total": 48, "additions": 48, "deletions": 0}, "files": [{"sha": "c2edcd22f953b45d0fecc20167b3d8eea20af3a9", "filename": "src/libcore/iter/adapters/mod.rs", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/3e08f1b57ea6df87ee2d01f31339958998f8ea26/src%2Flibcore%2Fiter%2Fadapters%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3e08f1b57ea6df87ee2d01f31339958998f8ea26/src%2Flibcore%2Fiter%2Fadapters%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fiter%2Fadapters%2Fmod.rs?ref=3e08f1b57ea6df87ee2d01f31339958998f8ea26", "patch": "@@ -1509,6 +1509,20 @@ impl<I> DoubleEndedIterator for Skip<I> where I: DoubleEndedIterator + ExactSize\n         }\n     }\n \n+    #[inline]\n+    fn nth_back(&mut self, n: usize) -> Option<I::Item> {\n+        let len = self.len();\n+        if n < len {\n+            self.iter.nth_back(n)\n+        } else {\n+            if len > 0 {\n+                // consume the original iterator\n+                self.iter.nth_back(len-1);\n+            }\n+            None\n+        }\n+    }\n+\n     fn try_rfold<Acc, Fold, R>(&mut self, init: Acc, mut fold: Fold) -> R where\n         Self: Sized, Fold: FnMut(Acc, Self::Item) -> R, R: Try<Ok=Acc>\n     {"}, {"sha": "4d840ef24c8e68a2abe16763e08a8b166fc7faea", "filename": "src/libcore/tests/iter.rs", "status": "modified", "additions": 34, "deletions": 0, "changes": 34, "blob_url": "https://github.com/rust-lang/rust/blob/3e08f1b57ea6df87ee2d01f31339958998f8ea26/src%2Flibcore%2Ftests%2Fiter.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3e08f1b57ea6df87ee2d01f31339958998f8ea26/src%2Flibcore%2Ftests%2Fiter.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Ftests%2Fiter.rs?ref=3e08f1b57ea6df87ee2d01f31339958998f8ea26", "patch": "@@ -2333,6 +2333,40 @@ fn test_skip_try_folds() {\n     assert_eq!(iter.next_back(), Some(24));\n }\n \n+#[test]\n+fn test_skip_nth_back() {\n+    let xs = [0, 1, 2, 3, 4, 5];\n+    let mut it = xs.iter().skip(2);\n+    assert_eq!(it.nth_back(0), Some(&5));\n+    assert_eq!(it.nth_back(1), Some(&3));\n+    assert_eq!(it.nth_back(0), Some(&2));\n+    assert_eq!(it.nth_back(0), None);\n+\n+    let ys = [2, 3, 4, 5];\n+    let mut ity = ys.iter();\n+    let mut it = xs.iter().skip(2);\n+    assert_eq!(it.nth_back(1), ity.nth_back(1));\n+    assert_eq!(it.clone().nth(0), ity.clone().nth(0));\n+    assert_eq!(it.nth_back(0), ity.nth_back(0));\n+    assert_eq!(it.clone().nth(0), ity.clone().nth(0));\n+    assert_eq!(it.nth_back(0), ity.nth_back(0));\n+    assert_eq!(it.clone().nth(0), ity.clone().nth(0));\n+    assert_eq!(it.nth_back(0), ity.nth_back(0));\n+    assert_eq!(it.clone().nth(0), ity.clone().nth(0));\n+\n+    let mut it = xs.iter().skip(2);\n+    assert_eq!(it.nth_back(4), None);\n+    assert_eq!(it.nth_back(0), None);\n+\n+    let mut it = xs.iter();\n+    it.by_ref().skip(2).nth_back(3);\n+    assert_eq!(it.next_back(), Some(&1));\n+\n+    let mut it = xs.iter();\n+    it.by_ref().skip(2).nth_back(10);\n+    assert_eq!(it.next_back(), Some(&1));\n+}\n+\n #[test]\n fn test_take_try_folds() {\n     let f = &|acc, x| i32::checked_add(2*acc, x);"}]}