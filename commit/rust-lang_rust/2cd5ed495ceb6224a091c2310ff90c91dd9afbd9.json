{"sha": "2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJjZDVlZDQ5NWNlYjYyMjRhMDkxYzIzMTBmZjkwYzkxZGQ5YWZiZDk=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-06-23T17:16:22Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-06-23T17:16:22Z"}, "message": "Auto merge of #61778 - petrochenkov:pass, r=Mark-Simulacrum\n\ncompiletest: Introduce `// {check,build,run}-pass` pass modes\n\nPass UI tests now have three modes\n```\n// check-pass\n// build-pass\n// run-pass\n```\nmirroring equivalent well-known `cargo` commands.\n\n`// check-pass` will compile the test skipping codegen (which is expensive and isn't supposed to fail in most cases).\n`// build-pass` will compile and link the test without running it.\n`// run-pass` will compile, link and run the test.\nTests without a \"pass\" annotation are still considered \"fail\" tests.\n\nMost UI tests would probably want to switch to `check-pass`.\nTests validating codegen would probably want to run the generated code as well and use `run-pass`.\n`build-pass` should probably be rare (linking tests?).\n\nhttps://github.com/rust-lang/rust/pull/61755 will provide a way to run the tests with any mode, e.g. bump `check-pass` tests to `run-pass` to satisfy especially suspicious people, and be able to make sure that codegen doesn't breaks in some entirely unexpected way.\nTests marked with any mode are expected to pass with any other mode, if that's not the case for some legitimate reason, then the test should be made a \"fail\" test rather than a \"pass\" test.\nPerhaps some secondary CI can verify this invariant, but that's not super urgent.\n\n`// compile-pass` still works and is equivalent to `build-pass`.\nWhy is `// compile-pass` bad - 1) it gives an impression that the test is only compiled, but not linked, 2) it doesn't mirror a cargo command.\nIt can be removed some time in the future in a separate PR.\n\ncc https://github.com/rust-lang/rust/issues/61712", "tree": {"sha": "d5f8cb9d593da33e7079028fc4ec691b4a8eb2fb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d5f8cb9d593da33e7079028fc4ec691b4a8eb2fb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "html_url": "https://github.com/rust-lang/rust/commit/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5d677b2efdb00031564d30ee9f63f4d4f936a39f", "url": "https://api.github.com/repos/rust-lang/rust/commits/5d677b2efdb00031564d30ee9f63f4d4f936a39f", "html_url": "https://github.com/rust-lang/rust/commit/5d677b2efdb00031564d30ee9f63f4d4f936a39f"}, {"sha": "0886bc4cbf3ec9b782b2dc9ed99ac6bed9df7b00", "url": "https://api.github.com/repos/rust-lang/rust/commits/0886bc4cbf3ec9b782b2dc9ed99ac6bed9df7b00", "html_url": "https://github.com/rust-lang/rust/commit/0886bc4cbf3ec9b782b2dc9ed99ac6bed9df7b00"}], "stats": {"total": 867, "additions": 389, "deletions": 478}, "files": [{"sha": "afc086213403c89c0506855c4fb137db735c93b1", "filename": "src/test/incremental/issue-59523-on-implemented-is-not-unused.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fincremental%2Fissue-59523-on-implemented-is-not-unused.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fincremental%2Fissue-59523-on-implemented-is-not-unused.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fincremental%2Fissue-59523-on-implemented-is-not-unused.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -2,7 +2,7 @@\n // rustc_on_unimplemented, but with this bug we are seeing it fire (on\n // subsequent runs) if incremental compilation is enabled.\n \n-// revisions: rpass1 rpass2\n+// revisions: cfail1 cfail2\n // compile-pass\n \n #![feature(on_unimplemented)]"}, {"sha": "37bd8d0641fb9fea3b449c7b554653aebfd6af55", "filename": "src/test/incremental/issue-59524-layout-scalar-valid-range-is-not-unused.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fincremental%2Fissue-59524-layout-scalar-valid-range-is-not-unused.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fincremental%2Fissue-59524-layout-scalar-valid-range-is-not-unused.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fincremental%2Fissue-59524-layout-scalar-valid-range-is-not-unused.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -3,7 +3,7 @@\n // seeing it fire (on subsequent runs) if incremental compilation is\n // enabled.\n \n-// revisions: rpass1 rpass2\n+// revisions: cfail1 cfail2\n // compile-pass\n \n #![feature(rustc_attrs)]"}, {"sha": "b1c9b2bc37f64d1ab7cd6bd4c756647f07ae891d", "filename": "src/test/incremental/no_mangle.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fincremental%2Fno_mangle.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fincremental%2Fno_mangle.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fincremental%2Fno_mangle.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,6 +1,6 @@\n-// revisions:rpass1 rpass2\n+// revisions:cfail1 cfail2\n+// check-pass\n // compile-flags: --crate-type cdylib\n-// skip-codegen\n \n #![deny(unused_attributes)]\n "}, {"sha": "796729ac4cc28fb1a04157739e3cd2ed35a44de0", "filename": "src/test/run-fail/rfc-1937-termination-trait/termination-trait-for-box-dyn-error.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Frun-fail%2Frfc-1937-termination-trait%2Ftermination-trait-for-box-dyn-error.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Frun-fail%2Frfc-1937-termination-trait%2Ftermination-trait-for-box-dyn-error.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-fail%2Frfc-1937-termination-trait%2Ftermination-trait-for-box-dyn-error.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,4 +1,4 @@\n-// compile-pass\n+// error-pattern:returned Box<dyn Error> from main()\n // failure-status: 1\n \n use std::error::Error;"}, {"sha": "2f3a73a30ad95a7baacb587b3269fe600dcea3bf", "filename": "src/test/run-fail/rfc-1937-termination-trait/termination-trait-for-result-box-error_err.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Frun-fail%2Frfc-1937-termination-trait%2Ftermination-trait-for-result-box-error_err.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Frun-fail%2Frfc-1937-termination-trait%2Ftermination-trait-for-result-box-error_err.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-fail%2Frfc-1937-termination-trait%2Ftermination-trait-for-result-box-error_err.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,4 +1,4 @@\n-// compile-pass\n+// error-pattern:returned Box<Error> from main()\n // failure-status: 1\n \n use std::io::{Error, ErrorKind};"}, {"sha": "3c0e22613128ad9fc350929a6e7adb4bfdabbb37", "filename": "src/test/run-pass/compiletest-skip-codegen.rs", "status": "removed", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/5d677b2efdb00031564d30ee9f63f4d4f936a39f/src%2Ftest%2Frun-pass%2Fcompiletest-skip-codegen.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5d677b2efdb00031564d30ee9f63f4d4f936a39f/src%2Ftest%2Frun-pass%2Fcompiletest-skip-codegen.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fcompiletest-skip-codegen.rs?ref=5d677b2efdb00031564d30ee9f63f4d4f936a39f", "patch": "@@ -1,7 +0,0 @@\n-// Test that with the `skip-codegen` option the test isn't executed.\n-\n-// skip-codegen\n-\n-fn main() {\n-    unreachable!();\n-}"}, {"sha": "14ff4c2e981b380fad93130bae9fb3adb53c109a", "filename": "src/test/ui/asm/asm-misplaced-option.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fasm%2Fasm-misplaced-option.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fasm%2Fasm-misplaced-option.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasm%2Fasm-misplaced-option.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,3 +1,4 @@\n+// check-pass\n // ignore-android\n // ignore-arm\n // ignore-aarch64\n@@ -11,14 +12,11 @@\n // ignore-mips\n // ignore-mips64\n \n-// compile-pass\n-// skip-codegen\n #![feature(asm)]\n-#![allow(dead_code, non_upper_case_globals)]\n \n #[cfg(any(target_arch = \"x86\",\n           target_arch = \"x86_64\"))]\n-pub fn main() {\n+fn main() {\n     // assignment not dead\n     let mut x: isize = 0;\n     unsafe {"}, {"sha": "3d4b28c3dc44468c8ac455b46553aacef5c57b54", "filename": "src/test/ui/asm/asm-misplaced-option.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fasm%2Fasm-misplaced-option.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fasm%2Fasm-misplaced-option.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasm%2Fasm-misplaced-option.stderr?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,11 +1,11 @@\n warning: unrecognized option\n-  --> $DIR/asm-misplaced-option.rs:26:64\n+  --> $DIR/asm-misplaced-option.rs:24:64\n    |\n LL |         asm!(\"mov $1, $0\" : \"=r\"(x) : \"r\"(5_usize), \"0\"(x) : : \"cc\");\n    |                                                                ^^^^\n \n warning: expected a clobber, found an option\n-  --> $DIR/asm-misplaced-option.rs:33:80\n+  --> $DIR/asm-misplaced-option.rs:31:80\n    |\n LL |         asm!(\"add $2, $1; mov $1, $0\" : \"=r\"(x) : \"r\"(x), \"r\"(8_usize) : \"cc\", \"volatile\");\n    |                                                                                ^^^^^^^^^^"}, {"sha": "8ddd347ff360764bfb042d686351bfd29de7e002", "filename": "src/test/ui/associated-types/cache/chrono-scan.rs", "status": "modified", "additions": 8, "deletions": 9, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fassociated-types%2Fcache%2Fchrono-scan.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fassociated-types%2Fcache%2Fchrono-scan.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fassociated-types%2Fcache%2Fchrono-scan.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,10 +1,10 @@\n-// compile-pass\n-// skip-codegen\n-#![allow(warnings)]\n+// check-pass\n+\n pub type ParseResult<T> = Result<T, ()>;\n \n-pub enum Item<'a> {     Literal(&'a str),\n- }\n+pub enum Item<'a> {\n+    Literal(&'a str)\n+}\n \n pub fn colon_or_space(s: &str) -> ParseResult<&str> {\n     unimplemented!()\n@@ -20,10 +20,9 @@ pub fn parse<'a, I>(mut s: &str, items: I) -> ParseResult<()>\n     macro_rules! try_consume {\n         ($e:expr) => ({ let (s_, v) = try!($e); s = s_; v })\n     }\n-    let offset = try_consume!(timezone_offset_zulu(s.trim_left(), colon_or_space));\n-    let offset = try_consume!(timezone_offset_zulu(s.trim_left(), colon_or_space));\n+    let offset = try_consume!(timezone_offset_zulu(s.trim_start(), colon_or_space));\n+    let offset = try_consume!(timezone_offset_zulu(s.trim_start(), colon_or_space));\n     Ok(())\n }\n \n-\n-fn main() { }\n+fn main() {}"}, {"sha": "b3e1ec8ad703c475b6e41b2332d2c5171d84bb1d", "filename": "src/test/ui/associated-types/cache/elision.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fassociated-types%2Fcache%2Felision.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fassociated-types%2Fcache%2Felision.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fassociated-types%2Fcache%2Felision.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,10 +1,9 @@\n-// compile-pass\n-// skip-codegen\n-#![allow(warnings)]\n // Check that you are allowed to implement using elision but write\n // trait without elision (a bug in this cropped up during\n // bootstrapping, so this is a regression test).\n \n+// check-pass\n+\n pub struct SplitWhitespace<'a> {\n     x: &'a u8\n }"}, {"sha": "c38105870e4c0accb014723b66a1b9fbb4c501fa", "filename": "src/test/ui/bad/bad-lint-cap3.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fbad%2Fbad-lint-cap3.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fbad%2Fbad-lint-cap3.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fbad%2Fbad-lint-cap3.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,10 +1,9 @@\n+// check-pass\n // compile-flags: --cap-lints warn\n \n #![warn(unused)]\n #![deny(warnings)]\n-// compile-pass\n-// skip-codegen\n-use std::option; //~ WARN\n \n+use std::option; //~ WARN\n \n fn main() {}"}, {"sha": "b898d792f65ca1dcb778ef9c69dd9091be147a39", "filename": "src/test/ui/bad/bad-lint-cap3.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fbad%2Fbad-lint-cap3.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fbad%2Fbad-lint-cap3.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fbad%2Fbad-lint-cap3.stderr?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -5,7 +5,7 @@ LL | use std::option;\n    |     ^^^^^^^^^^^\n    |\n note: lint level defined here\n-  --> $DIR/bad-lint-cap3.rs:4:9\n+  --> $DIR/bad-lint-cap3.rs:5:9\n    |\n LL | #![deny(warnings)]\n    |         ^^^^^^^^"}, {"sha": "b34c31dcddb3d3650eff9427dd5e2647981a3d63", "filename": "src/test/ui/coherence/coherence-projection-ok-orphan.rs", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-projection-ok-orphan.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-projection-ok-orphan.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-projection-ok-orphan.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,11 +1,10 @@\n-// compile-pass\n-// skip-codegen\n+// Here we do not get a coherence conflict because `Baz: Iterator`\n+// does not hold and (due to the orphan rules), we can rely on that.\n+\n+// check-pass\n // revisions: old re\n \n #![cfg_attr(re, feature(re_rebalance_coherence))]\n-#![allow(dead_code)]\n-// Here we do not get a coherence conflict because `Baz: Iterator`\n-// does not hold and (due to the orphan rules), we can rely on that.\n \n pub trait Foo<P> {}\n \n@@ -18,5 +17,4 @@ impl Foo<i32> for Baz { }\n \n impl<A:Iterator> Foo<A::Item> for A { }\n \n-\n fn main() {}"}, {"sha": "f4f5ca64de73899b83bd113523dd667a12002e12", "filename": "src/test/ui/coherence/coherence-projection-ok.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-projection-ok.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-projection-ok.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-projection-ok.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,8 +1,8 @@\n-// compile-pass\n-// skip-codegen\n+// check-pass\n // revisions: old re\n \n #![cfg_attr(re, feature(re_rebalance_coherence))]\n+\n pub trait Foo<P> {}\n \n pub trait Bar {\n@@ -17,5 +17,4 @@ impl Bar for i32 {\n     type Output = u32;\n }\n \n-\n fn main() {}"}, {"sha": "0d677800f7949282aebe13f72f38395e73c06f3f", "filename": "src/test/ui/coherence/coherence_copy_like_err_fundamental_struct_ref.rs", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fcoherence%2Fcoherence_copy_like_err_fundamental_struct_ref.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fcoherence%2Fcoherence_copy_like_err_fundamental_struct_ref.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fcoherence_copy_like_err_fundamental_struct_ref.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,13 +1,11 @@\n // Test that we are able to introduce a negative constraint that\n // `MyType: !MyTrait` along with other \"fundamental\" wrappers.\n \n+// check-pass\n // aux-build:coherence_copy_like_lib.rs\n-// compile-pass\n-// skip-codegen\n // revisions: old re\n \n #![cfg_attr(re, feature(re_rebalance_coherence))]\n-#![allow(dead_code)]\n \n extern crate coherence_copy_like_lib as lib;\n \n@@ -23,5 +21,4 @@ impl<T: lib::MyCopy> MyTrait for T { }\n // Huzzah.\n impl<'a> MyTrait for lib::MyFundamentalStruct<&'a MyType> { }\n \n-\n fn main() { }"}, {"sha": "3eab6e03ae3e22123608e67540fd37c9b2d28503", "filename": "src/test/ui/coherence/coherence_local.rs", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fcoherence%2Fcoherence_local.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fcoherence%2Fcoherence_local.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fcoherence_local.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,13 +1,11 @@\n // Test that we are able to introduce a negative constraint that\n // `MyType: !MyTrait` along with other \"fundamental\" wrappers.\n \n+// check-pass\n // aux-build:coherence_copy_like_lib.rs\n-// compile-pass\n-// skip-codegen\n // revisions: old re\n \n #![cfg_attr(re, feature(re_rebalance_coherence))]\n-#![allow(dead_code)]\n \n extern crate coherence_copy_like_lib as lib;\n \n@@ -22,5 +20,4 @@ impl lib::MyCopy for Box<MyType> { }\n impl lib::MyCopy for lib::MyFundamentalStruct<MyType> { }\n impl lib::MyCopy for lib::MyFundamentalStruct<Box<MyType>> { }\n \n-\n-fn main() { }\n+fn main() {}"}, {"sha": "dff684c1699af8d87a4bf901634413bc942d2903", "filename": "src/test/ui/coherence/coherence_local_ref.rs", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fcoherence%2Fcoherence_local_ref.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fcoherence%2Fcoherence_local_ref.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fcoherence_local_ref.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,13 +1,11 @@\n // Test that we are able to introduce a negative constraint that\n // `MyType: !MyTrait` along with other \"fundamental\" wrappers.\n \n+// check-pass\n // aux-build:coherence_copy_like_lib.rs\n-// compile-pass\n-// skip-codegen\n // revisions: old re\n \n #![cfg_attr(re, feature(re_rebalance_coherence))]\n-#![allow(dead_code)]\n \n extern crate coherence_copy_like_lib as lib;\n \n@@ -16,5 +14,4 @@ struct MyType { x: i32 }\n // naturally, legal\n impl lib::MyCopy for MyType { }\n \n-\n fn main() { }"}, {"sha": "efb718b786fa602cd137d5fd971bff220aeaf0ae", "filename": "src/test/ui/conditional-compilation/cfg_attr_path.rs", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg_attr_path.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg_attr_path.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg_attr_path.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,13 +1,12 @@\n-// compile-pass\n-// skip-codegen\n-#![allow(dead_code)]\n+// check-pass\n+\n #![deny(unused_attributes)] // c.f #35584\n+\n mod auxiliary {\n     #[cfg_attr(any(), path = \"nonexistent_file.rs\")] pub mod namespaced_enums;\n     #[cfg_attr(all(), path = \"namespaced_enums.rs\")] pub mod nonexistent_file;\n }\n \n-\n fn main() {\n     let _ = auxiliary::namespaced_enums::Foo::A;\n     let _ = auxiliary::nonexistent_file::Foo::A;"}, {"sha": "0e0e003dcf476641cc7949f03b5181490556a31d", "filename": "src/test/ui/consts/const-eval/const_transmute.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fconst_transmute.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fconst_transmute.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fconst_transmute.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,4 +1,3 @@\n-// compile-pass\n // run-pass\n \n #![feature(const_fn_union)]"}, {"sha": "e09258f11206e60de1a232d1c7621ca5ccb9b217", "filename": "src/test/ui/consts/const-eval/enum_discr.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fenum_discr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fenum_discr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fenum_discr.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,4 +1,3 @@\n-// compile-pass\n // run-pass\n \n enum Foo {"}, {"sha": "b831dee580c1a566dc6ccd7db5880d8eab97b610", "filename": "src/test/ui/consts/const-fn-stability-calls-3.rs", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fconsts%2Fconst-fn-stability-calls-3.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fconsts%2Fconst-fn-stability-calls-3.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-fn-stability-calls-3.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,15 +1,12 @@\n // Test use of const fn from another crate without a feature gate.\n \n-// compile-pass\n-// skip-codegen\n-#![allow(unused_variables)]\n+// check-pass\n // aux-build:const_fn_lib.rs\n \n extern crate const_fn_lib;\n \n use const_fn_lib::foo;\n \n-\n fn main() {\n     let x = foo(); // use outside a constant is ok\n }"}, {"sha": "baa161af76abc80ffc8804f38a168612dd1b2ddb", "filename": "src/test/ui/expanded-cfg.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fexpanded-cfg.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fexpanded-cfg.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fexpanded-cfg.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,5 +1,4 @@\n-// skip-codegen\n-// compile-pass\n+// check-pass\n \n macro_rules! mac {\n     {} => {\n@@ -19,5 +18,4 @@ macro_rules! mac {\n \n mac! {}\n \n-\n fn main() {}"}, {"sha": "3187b4cae55eef3d806c4e5a6fe958acadbf4dbe", "filename": "src/test/ui/feature-gate/issue-43106-gating-of-builtin-attrs.rs", "status": "modified", "additions": 10, "deletions": 9, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-builtin-attrs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-builtin-attrs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-builtin-attrs.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -30,8 +30,9 @@\n // inputs are handled by each, and (2.) to ease searching for related\n // occurrences in the source text.\n \n+// check-pass\n+\n #![warn(unused_attributes, unknown_lints)]\n-#![allow(stable_features)]\n \n // UNGATED WHITE-LISTED BUILT-IN ATTRIBUTES\n \n@@ -75,7 +76,7 @@\n // see issue-43106-gating-of-stable.rs\n // see issue-43106-gating-of-unstable.rs\n // see issue-43106-gating-of-deprecated.rs\n-#![windows_subsystem = \"1000\"]\n+#![windows_subsystem = \"windows\"]\n \n // UNGATED CRATE-LEVEL BUILT-IN ATTRIBUTES\n \n@@ -539,7 +540,7 @@ mod export_name {\n     #[export_name = \"2200\"] impl S { }\n }\n \n-// Note that this test has a `skip-codegen`, so it\n+// Note that this is a `check-pass` test, so it\n // will never invoke the linker. These are here nonetheless to point\n // out that we allow them at non-crate-level (though I do not know\n // whether they have the same effect here as at crate-level).\n@@ -611,17 +612,17 @@ mod must_use {\n     #[must_use] impl S { }\n }\n \n-#[windows_subsystem = \"1000\"]\n+#[windows_subsystem = \"windows\"]\n mod windows_subsystem {\n-    mod inner { #![windows_subsystem=\"1000\"] }\n+    mod inner { #![windows_subsystem=\"windows\"] }\n \n-    #[windows_subsystem = \"1000\"] fn f() { }\n+    #[windows_subsystem = \"windows\"] fn f() { }\n \n-    #[windows_subsystem = \"1000\"] struct S;\n+    #[windows_subsystem = \"windows\"] struct S;\n \n-    #[windows_subsystem = \"1000\"] type T = S;\n+    #[windows_subsystem = \"windows\"] type T = S;\n \n-    #[windows_subsystem = \"1000\"] impl S { }\n+    #[windows_subsystem = \"windows\"] impl S { }\n }\n \n // BROKEN USES OF CRATE-LEVEL BUILT-IN ATTRIBUTES"}, {"sha": "e03b7124ac882fabb45d2f2f63d6efe3faa1bd95", "filename": "src/test/ui/feature-gate/issue-43106-gating-of-builtin-attrs.stderr", "status": "modified", "additions": 204, "deletions": 200, "changes": 404, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-builtin-attrs.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-builtin-attrs.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-builtin-attrs.stderr?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,1182 +1,1186 @@\n warning: unknown lint: `x5400`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:38:9\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:39:9\n    |\n LL | #![warn(x5400)]\n    |         ^^^^^\n    |\n note: lint level defined here\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:33:28\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:35:28\n    |\n LL | #![warn(unused_attributes, unknown_lints)]\n    |                            ^^^^^^^^^^^^^\n \n warning: unknown lint: `x5300`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:39:10\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:40:10\n    |\n LL | #![allow(x5300)]\n    |          ^^^^^\n \n warning: unknown lint: `x5200`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:40:11\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:41:11\n    |\n LL | #![forbid(x5200)]\n    |           ^^^^^\n \n warning: unknown lint: `x5100`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:41:9\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:42:9\n    |\n LL | #![deny(x5100)]\n    |         ^^^^^\n \n warning: unknown lint: `x5400`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:99:8\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:100:8\n    |\n LL | #[warn(x5400)]\n    |        ^^^^^\n \n warning: unknown lint: `x5400`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:102:25\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:103:25\n    |\n LL |     mod inner { #![warn(x5400)] }\n    |                         ^^^^^\n \n warning: unknown lint: `x5400`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:105:12\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:106:12\n    |\n LL |     #[warn(x5400)] fn f() { }\n    |            ^^^^^\n \n warning: unknown lint: `x5400`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:108:12\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:109:12\n    |\n LL |     #[warn(x5400)] struct S;\n    |            ^^^^^\n \n warning: unknown lint: `x5400`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:111:12\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:112:12\n    |\n LL |     #[warn(x5400)] type T = S;\n    |            ^^^^^\n \n warning: unknown lint: `x5400`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:114:12\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:115:12\n    |\n LL |     #[warn(x5400)] impl S { }\n    |            ^^^^^\n \n warning: unknown lint: `x5300`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:118:9\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:119:9\n    |\n LL | #[allow(x5300)]\n    |         ^^^^^\n \n warning: unknown lint: `x5300`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:121:26\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:122:26\n    |\n LL |     mod inner { #![allow(x5300)] }\n    |                          ^^^^^\n \n warning: unknown lint: `x5300`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:124:13\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:125:13\n    |\n LL |     #[allow(x5300)] fn f() { }\n    |             ^^^^^\n \n warning: unknown lint: `x5300`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:127:13\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:128:13\n    |\n LL |     #[allow(x5300)] struct S;\n    |             ^^^^^\n \n warning: unknown lint: `x5300`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:130:13\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:131:13\n    |\n LL |     #[allow(x5300)] type T = S;\n    |             ^^^^^\n \n warning: unknown lint: `x5300`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:133:13\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:134:13\n    |\n LL |     #[allow(x5300)] impl S { }\n    |             ^^^^^\n \n warning: unknown lint: `x5200`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:137:10\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:138:10\n    |\n LL | #[forbid(x5200)]\n    |          ^^^^^\n \n warning: unknown lint: `x5200`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:140:27\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:141:27\n    |\n LL |     mod inner { #![forbid(x5200)] }\n    |                           ^^^^^\n \n warning: unknown lint: `x5200`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:143:14\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:144:14\n    |\n LL |     #[forbid(x5200)] fn f() { }\n    |              ^^^^^\n \n warning: unknown lint: `x5200`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:146:14\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:147:14\n    |\n LL |     #[forbid(x5200)] struct S;\n    |              ^^^^^\n \n warning: unknown lint: `x5200`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:149:14\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:150:14\n    |\n LL |     #[forbid(x5200)] type T = S;\n    |              ^^^^^\n \n warning: unknown lint: `x5200`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:152:14\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:153:14\n    |\n LL |     #[forbid(x5200)] impl S { }\n    |              ^^^^^\n \n warning: unknown lint: `x5100`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:156:8\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:157:8\n    |\n LL | #[deny(x5100)]\n    |        ^^^^^\n \n warning: unknown lint: `x5100`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:159:25\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:160:25\n    |\n LL |     mod inner { #![deny(x5100)] }\n    |                         ^^^^^\n \n warning: unknown lint: `x5100`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:162:12\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:163:12\n    |\n LL |     #[deny(x5100)] fn f() { }\n    |            ^^^^^\n \n warning: unknown lint: `x5100`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:165:12\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:166:12\n    |\n LL |     #[deny(x5100)] struct S;\n    |            ^^^^^\n \n warning: unknown lint: `x5100`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:168:12\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:169:12\n    |\n LL |     #[deny(x5100)] type T = S;\n    |            ^^^^^\n \n warning: unknown lint: `x5100`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:171:12\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:172:12\n    |\n LL |     #[deny(x5100)] impl S { }\n    |            ^^^^^\n \n warning: macro_escape is a deprecated synonym for macro_use\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:455:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:456:1\n    |\n LL | #[macro_escape]\n    | ^^^^^^^^^^^^^^^\n \n warning: macro_escape is a deprecated synonym for macro_use\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:458:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:459:17\n    |\n LL |     mod inner { #![macro_escape] }\n    |                 ^^^^^^^^^^^^^^^^\n    |\n    = help: consider an outer attribute, #[macro_use] mod ...\n \n+warning: the feature `rust1` has been stable since 1.0.0 and no longer requires an attribute to enable\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:89:12\n+   |\n+LL | #![feature(rust1)]\n+   |            ^^^^^\n+   |\n+   = note: #[warn(stable_features)] on by default\n+\n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:179:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:180:5\n    |\n LL |     #[macro_use] fn f() { }\n    |     ^^^^^^^^^^^^\n    |\n note: lint level defined here\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:33:9\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:35:9\n    |\n LL | #![warn(unused_attributes, unknown_lints)]\n    |         ^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:182:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:183:5\n    |\n LL |     #[macro_use] struct S;\n    |     ^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:185:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:186:5\n    |\n LL |     #[macro_use] type T = S;\n    |     ^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:188:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:189:5\n    |\n LL |     #[macro_use] impl S { }\n    |     ^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:195:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:196:17\n    |\n LL |     mod inner { #![macro_export] }\n    |                 ^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:198:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:199:5\n    |\n LL |     #[macro_export] fn f() { }\n    |     ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:201:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:202:5\n    |\n LL |     #[macro_export] struct S;\n    |     ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:204:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:205:5\n    |\n LL |     #[macro_export] type T = S;\n    |     ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:207:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:208:5\n    |\n LL |     #[macro_export] impl S { }\n    |     ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:192:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:193:1\n    |\n LL | #[macro_export]\n    | ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:214:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:215:17\n    |\n LL |     mod inner { #![plugin_registrar] }\n    |                 ^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:219:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:220:5\n    |\n LL |     #[plugin_registrar] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:222:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:223:5\n    |\n LL |     #[plugin_registrar] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:225:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:226:5\n    |\n LL |     #[plugin_registrar] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:211:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:212:1\n    |\n LL | #[plugin_registrar]\n    | ^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:232:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:233:17\n    |\n LL |     mod inner { #![main] }\n    |                 ^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:237:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:238:5\n    |\n LL |     #[main] struct S;\n    |     ^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:240:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:241:5\n    |\n LL |     #[main] type T = S;\n    |     ^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:243:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:244:5\n    |\n LL |     #[main] impl S { }\n    |     ^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:229:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:230:1\n    |\n LL | #[main]\n    | ^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:250:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:251:17\n    |\n LL |     mod inner { #![start] }\n    |                 ^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:255:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:256:5\n    |\n LL |     #[start] struct S;\n    |     ^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:258:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:259:5\n    |\n LL |     #[start] type T = S;\n    |     ^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:261:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:262:5\n    |\n LL |     #[start] impl S { }\n    |     ^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:247:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:248:1\n    |\n LL | #[start]\n    | ^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:314:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:315:5\n    |\n LL |     #[path = \"3800\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:317:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:318:5\n    |\n LL |     #[path = \"3800\"]  struct S;\n    |     ^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:320:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:321:5\n    |\n LL |     #[path = \"3800\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:323:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:324:5\n    |\n LL |     #[path = \"3800\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:330:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:331:17\n    |\n LL |     mod inner { #![automatically_derived] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:333:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:334:5\n    |\n LL |     #[automatically_derived] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:336:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:337:5\n    |\n LL |     #[automatically_derived] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:339:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:340:5\n    |\n LL |     #[automatically_derived] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:342:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:343:5\n    |\n LL |     #[automatically_derived] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:327:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:328:1\n    |\n LL | #[automatically_derived]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:362:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:363:17\n    |\n LL |     mod inner { #![no_link] }\n    |                 ^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:365:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:366:5\n    |\n LL |     #[no_link] fn f() { }\n    |     ^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:368:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:369:5\n    |\n LL |     #[no_link] struct S;\n    |     ^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:371:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:372:5\n    |\n LL |     #[no_link]type T = S;\n    |     ^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:374:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:375:5\n    |\n LL |     #[no_link] impl S { }\n    |     ^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:359:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:360:1\n    |\n LL | #[no_link]\n    | ^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:381:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:382:17\n    |\n LL |     mod inner { #![should_panic] }\n    |                 ^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:384:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:385:5\n    |\n LL |     #[should_panic] fn f() { }\n    |     ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:387:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:388:5\n    |\n LL |     #[should_panic] struct S;\n    |     ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:390:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:391:5\n    |\n LL |     #[should_panic] type T = S;\n    |     ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:393:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:394:5\n    |\n LL |     #[should_panic] impl S { }\n    |     ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:378:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:379:1\n    |\n LL | #[should_panic]\n    | ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:400:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:401:17\n    |\n LL |     mod inner { #![ignore] }\n    |                 ^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:403:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:404:5\n    |\n LL |     #[ignore] fn f() { }\n    |     ^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:406:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:407:5\n    |\n LL |     #[ignore] struct S;\n    |     ^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:409:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:410:5\n    |\n LL |     #[ignore] type T = S;\n    |     ^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:412:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:413:5\n    |\n LL |     #[ignore] impl S { }\n    |     ^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:397:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:398:1\n    |\n LL | #[ignore]\n    | ^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:419:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:420:17\n    |\n LL |     mod inner { #![no_implicit_prelude] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:422:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:423:5\n    |\n LL |     #[no_implicit_prelude] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:425:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:426:5\n    |\n LL |     #[no_implicit_prelude] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:428:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:429:5\n    |\n LL |     #[no_implicit_prelude] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:431:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:432:5\n    |\n LL |     #[no_implicit_prelude] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:416:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:417:1\n    |\n LL | #[no_implicit_prelude]\n    | ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:438:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:439:17\n    |\n LL |     mod inner { #![reexport_test_harness_main=\"2900\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:441:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:442:5\n    |\n LL |     #[reexport_test_harness_main = \"2900\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:444:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:445:5\n    |\n LL |     #[reexport_test_harness_main = \"2900\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:447:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:448:5\n    |\n LL |     #[reexport_test_harness_main = \"2900\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:450:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:451:5\n    |\n LL |     #[reexport_test_harness_main = \"2900\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:435:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:436:1\n    |\n LL | #[reexport_test_harness_main = \"2900\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:461:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:462:5\n    |\n LL |     #[macro_escape] fn f() { }\n    |     ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:464:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:465:5\n    |\n LL |     #[macro_escape] struct S;\n    |     ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:467:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:468:5\n    |\n LL |     #[macro_escape] type T = S;\n    |     ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:470:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:471:5\n    |\n LL |     #[macro_escape] impl S { }\n    |     ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:478:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:479:17\n    |\n LL |     mod inner { #![no_std] }\n    |                 ^^^^^^^^^^\n \n warning: crate-level attribute should be in the root module\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:478:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:479:17\n    |\n LL |     mod inner { #![no_std] }\n    |                 ^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:482:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:483:5\n    |\n LL |     #[no_std] fn f() { }\n    |     ^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:482:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:483:5\n    |\n LL |     #[no_std] fn f() { }\n    |     ^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:486:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:487:5\n    |\n LL |     #[no_std] struct S;\n    |     ^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:486:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:487:5\n    |\n LL |     #[no_std] struct S;\n    |     ^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:490:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:491:5\n    |\n LL |     #[no_std] type T = S;\n    |     ^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:490:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:491:5\n    |\n LL |     #[no_std] type T = S;\n    |     ^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:494:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:495:5\n    |\n LL |     #[no_std] impl S { }\n    |     ^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:494:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:495:5\n    |\n LL |     #[no_std] impl S { }\n    |     ^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:474:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:475:1\n    |\n LL | #[no_std]\n    | ^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:474:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:475:1\n    |\n LL | #[no_std]\n    | ^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:633:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:634:17\n    |\n LL |     mod inner { #![crate_name=\"0900\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be in the root module\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:633:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:634:17\n    |\n LL |     mod inner { #![crate_name=\"0900\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:637:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:638:5\n    |\n LL |     #[crate_name = \"0900\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:637:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:638:5\n    |\n LL |     #[crate_name = \"0900\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:641:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:642:5\n    |\n LL |     #[crate_name = \"0900\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:641:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:642:5\n    |\n LL |     #[crate_name = \"0900\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:645:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:646:5\n    |\n LL |     #[crate_name = \"0900\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:645:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:646:5\n    |\n LL |     #[crate_name = \"0900\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:649:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:650:5\n    |\n LL |     #[crate_name = \"0900\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:649:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:650:5\n    |\n LL |     #[crate_name = \"0900\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:629:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:630:1\n    |\n LL | #[crate_name = \"0900\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:629:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:630:1\n    |\n LL | #[crate_name = \"0900\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:658:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:659:17\n    |\n LL |     mod inner { #![crate_type=\"0800\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be in the root module\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:658:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:659:17\n    |\n LL |     mod inner { #![crate_type=\"0800\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:662:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:663:5\n    |\n LL |     #[crate_type = \"0800\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:662:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:663:5\n    |\n LL |     #[crate_type = \"0800\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:666:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:667:5\n    |\n LL |     #[crate_type = \"0800\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:666:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:667:5\n    |\n LL |     #[crate_type = \"0800\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:670:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:671:5\n    |\n LL |     #[crate_type = \"0800\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:670:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:671:5\n    |\n LL |     #[crate_type = \"0800\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:674:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:675:5\n    |\n LL |     #[crate_type = \"0800\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:674:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:675:5\n    |\n LL |     #[crate_type = \"0800\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:654:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:655:1\n    |\n LL | #[crate_type = \"0800\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:654:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:655:1\n    |\n LL | #[crate_type = \"0800\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:683:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:684:17\n    |\n LL |     mod inner { #![feature(x0600)] }\n    |                 ^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be in the root module\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:683:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:684:17\n    |\n LL |     mod inner { #![feature(x0600)] }\n    |                 ^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:687:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:688:5\n    |\n LL |     #[feature(x0600)] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:687:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:688:5\n    |\n LL |     #[feature(x0600)] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:691:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:692:5\n    |\n LL |     #[feature(x0600)] struct S;\n    |     ^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:691:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:692:5\n    |\n LL |     #[feature(x0600)] struct S;\n    |     ^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:695:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:696:5\n    |\n LL |     #[feature(x0600)] type T = S;\n    |     ^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:695:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:696:5\n    |\n LL |     #[feature(x0600)] type T = S;\n    |     ^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:699:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:700:5\n    |\n LL |     #[feature(x0600)] impl S { }\n    |     ^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:699:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:700:5\n    |\n LL |     #[feature(x0600)] impl S { }\n    |     ^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:679:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:680:1\n    |\n LL | #[feature(x0600)]\n    | ^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:679:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:680:1\n    |\n LL | #[feature(x0600)]\n    | ^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:709:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:710:17\n    |\n LL |     mod inner { #![no_main] }\n    |                 ^^^^^^^^^^^\n \n warning: crate-level attribute should be in the root module\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:709:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:710:17\n    |\n LL |     mod inner { #![no_main] }\n    |                 ^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:713:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:714:5\n    |\n LL |     #[no_main] fn f() { }\n    |     ^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:713:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:714:5\n    |\n LL |     #[no_main] fn f() { }\n    |     ^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:717:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:718:5\n    |\n LL |     #[no_main] struct S;\n    |     ^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:717:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:718:5\n    |\n LL |     #[no_main] struct S;\n    |     ^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:721:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:722:5\n    |\n LL |     #[no_main] type T = S;\n    |     ^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:721:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:722:5\n    |\n LL |     #[no_main] type T = S;\n    |     ^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:725:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:726:5\n    |\n LL |     #[no_main] impl S { }\n    |     ^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:725:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:726:5\n    |\n LL |     #[no_main] impl S { }\n    |     ^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:705:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:706:1\n    |\n LL | #[no_main]\n    | ^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:705:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:706:1\n    |\n LL | #[no_main]\n    | ^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:747:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:748:17\n    |\n LL |     mod inner { #![recursion_limit=\"0200\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be in the root module\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:747:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:748:17\n    |\n LL |     mod inner { #![recursion_limit=\"0200\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:751:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:752:5\n    |\n LL |     #[recursion_limit=\"0200\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:751:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:752:5\n    |\n LL |     #[recursion_limit=\"0200\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:755:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:756:5\n    |\n LL |     #[recursion_limit=\"0200\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:755:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:756:5\n    |\n LL |     #[recursion_limit=\"0200\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:759:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:760:5\n    |\n LL |     #[recursion_limit=\"0200\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:759:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:760:5\n    |\n LL |     #[recursion_limit=\"0200\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:763:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:764:5\n    |\n LL |     #[recursion_limit=\"0200\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:763:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:764:5\n    |\n LL |     #[recursion_limit=\"0200\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:743:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:744:1\n    |\n LL | #[recursion_limit=\"0200\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:743:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:744:1\n    |\n LL | #[recursion_limit=\"0200\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:772:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:773:17\n    |\n LL |     mod inner { #![type_length_limit=\"0100\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be in the root module\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:772:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:773:17\n    |\n LL |     mod inner { #![type_length_limit=\"0100\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:776:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:777:5\n    |\n LL |     #[type_length_limit=\"0100\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:776:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:777:5\n    |\n LL |     #[type_length_limit=\"0100\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:780:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:781:5\n    |\n LL |     #[type_length_limit=\"0100\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:780:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:781:5\n    |\n LL |     #[type_length_limit=\"0100\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:784:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:785:5\n    |\n LL |     #[type_length_limit=\"0100\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:784:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:785:5\n    |\n LL |     #[type_length_limit=\"0100\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:788:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:789:5\n    |\n LL |     #[type_length_limit=\"0100\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:788:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:789:5\n    |\n LL |     #[type_length_limit=\"0100\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:768:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:769:1\n    |\n LL | #[type_length_limit=\"0100\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:768:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:769:1\n    |\n LL | #[type_length_limit=\"0100\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:43:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:44:1\n    |\n LL | #![macro_export]\n    | ^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:44:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:45:1\n    |\n LL | #![plugin_registrar]\n    | ^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:47:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:48:1\n    |\n LL | #![main]\n    | ^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:48:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:49:1\n    |\n LL | #![start]\n    | ^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:51:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:52:1\n    |\n LL | #![repr()]\n    | ^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:53:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:54:1\n    |\n LL | #![path = \"3800\"]\n    | ^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:54:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:55:1\n    |\n LL | #![automatically_derived]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:56:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:57:1\n    |\n LL | #![no_link]\n    | ^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:58:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:59:1\n    |\n LL | #![should_panic]\n    | ^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:59:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:60:1\n    |\n LL | #![ignore]\n    | ^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:65:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:66:1\n    |\n LL | #![proc_macro_derive()]\n    | ^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: invalid windows subsystem `1000`, only `windows` and `console` are allowed\n-\n-error: aborting due to previous error\n-"}, {"sha": "5e1d08dd919d0ba95907677279e8fe0da53a4343", "filename": "src/test/ui/feature-gate/issue-43106-gating-of-deprecated.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-deprecated.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-deprecated.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-deprecated.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -5,8 +5,7 @@\n //\n // (For non-crate-level cases, see issue-43106-gating-of-builtin-attrs.rs)\n \n-// compile-pass\n-// skip-codegen\n+// check-pass\n \n #![deprecated]\n "}, {"sha": "f354cc885d00d3c2091dbb3b0579d73a2e42ce65", "filename": "src/test/ui/glob-cycles.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fglob-cycles.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fglob-cycles.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fglob-cycles.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,5 +1,5 @@\n-// compile-pass\n-// skip-codegen\n+// check-pass\n+\n mod foo {\n     pub use bar::*;\n     pub use main as f;\n@@ -15,5 +15,4 @@ mod baz {\n     pub use super::*;\n }\n \n-\n pub fn main() {}"}, {"sha": "93cf7591a0db2817eba45d424ed6f7c23629f5d9", "filename": "src/test/ui/hygiene/assoc_ty_bindings.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fhygiene%2Fassoc_ty_bindings.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fhygiene%2Fassoc_ty_bindings.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fhygiene%2Fassoc_ty_bindings.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,8 +1,8 @@\n+// check-pass\n // ignore-pretty pretty-printing is unhygienic\n \n #![feature(decl_macro, associated_type_defaults)]\n-// compile-pass\n-// skip-codegen\n+\n trait Base {\n     type AssocTy;\n     fn f();\n@@ -35,5 +35,4 @@ macro mac() {\n \n mac!();\n \n-\n fn main() {}"}, {"sha": "06d0bdf456cdb33e1be0b037f5d77ad1cd5e08d1", "filename": "src/test/ui/if/if-loop.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fif%2Fif-loop.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fif%2Fif-loop.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fif%2Fif-loop.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,10 +1,8 @@\n-// compile-pass\n-// skip-codegen\n-#![allow(warnings)]\n+// check-pass\n+\n // This used to ICE because the \"if\" being unreachable was not handled correctly\n fn err() {\n     if loop {} {}\n }\n \n-\n fn main() {}"}, {"sha": "b9d146d3735f21497c44bb978912e17cf181e4a8", "filename": "src/test/ui/imports/import-crate-var.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fimports%2Fimport-crate-var.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fimports%2Fimport-crate-var.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fimports%2Fimport-crate-var.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,10 +1,8 @@\n+// check-pass\n // aux-build:import_crate_var.rs\n \n-// compile-pass\n-// skip-codegen\n #[macro_use] extern crate import_crate_var;\n \n-\n fn main() {\n     m!();\n     //~^ WARN `$crate` may not be imported"}, {"sha": "2f8c845156a823ff1803a8e9fe43c99f60f03bcc", "filename": "src/test/ui/imports/import-crate-var.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fimports%2Fimport-crate-var.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fimports%2Fimport-crate-var.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fimports%2Fimport-crate-var.stderr?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,5 +1,5 @@\n warning: `$crate` may not be imported\n-  --> $DIR/import-crate-var.rs:9:5\n+  --> $DIR/import-crate-var.rs:7:5\n    |\n LL |     m!();\n    |     ^^^^^"}, {"sha": "dc10a205f2418a06f303f1c46974baa4cc540cac", "filename": "src/test/ui/issues/issue-11740.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-11740.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-11740.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-11740.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,6 +1,5 @@\n-// compile-pass\n-// skip-codegen\n-#![allow(warnings)]\n+// check-pass\n+\n struct Attr {\n     name: String,\n     value: String,\n@@ -21,7 +20,6 @@ impl Element {\n     }\n }\n \n-\n fn main() {\n     let element = Element { attrs: Vec::new() };\n     let _ = unsafe { element.get_attr(\"foo\") };"}, {"sha": "8d3074bcee9cc6251086ee223314e8fde8c48da4", "filename": "src/test/ui/issues/issue-16994.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-16994.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-16994.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-16994.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,10 +1,9 @@\n-// compile-pass\n-// skip-codegen\n+// check-pass\n+\n fn cb<'a,T>(_x: Box<dyn Fn((&'a i32, &'a (Vec<&'static i32>, bool))) -> T>) -> T {\n     panic!()\n }\n \n-\n fn main() {\n     cb(Box::new(|(k, &(ref v, b))| (*k, v.clone(), b)));\n }"}, {"sha": "176e6ba410670df9641eb9028bde1f3dac42ecba", "filename": "src/test/ui/issues/issue-19601.rs", "status": "modified", "additions": 3, "deletions": 6, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-19601.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-19601.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-19601.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,9 +1,6 @@\n-// compile-pass\n-// skip-codegen\n-#![allow(warnings)]\n+// check-pass\n+\n trait A<T> {}\n struct B<T> where B<T>: A<B<T>> { t: T }\n \n-\n-fn main() {\n-}\n+fn main() {}"}, {"sha": "a83e291f999ab88862dc6e59aa8a6c2977d2dbd2", "filename": "src/test/ui/issues/issue-22603.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-22603.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-22603.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-22603.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,6 +1,7 @@\n-// skip-codegen\n-// compile-pass\n+// check-pass\n+\n #![feature(unboxed_closures, fn_traits)]\n+\n struct Foo;\n \n impl<A> FnOnce<(A,)> for Foo {"}, {"sha": "cef407537668688b93192350aef81fb2d5489d72", "filename": "src/test/ui/issues/issue-22789.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-22789.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-22789.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-22789.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,6 +1,7 @@\n-// compile-pass\n-// skip-codegen\n+// check-pass\n+\n #![feature(unboxed_closures, fn_traits)]\n+\n fn main() {\n     let k = |x: i32| { x + 1 };\n     Fn::call(&k, (0,));"}, {"sha": "3c9aa26697907d72ce7874ef64e29f5513caaad5", "filename": "src/test/ui/issues/issue-22933-1.rs", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-22933-1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-22933-1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-22933-1.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,6 +1,5 @@\n-// compile-pass\n-// skip-codegen\n-#![allow(warnings)]\n+// check-pass\n+\n struct CNFParser {\n     token: char,\n }\n@@ -14,12 +13,11 @@ impl CNFParser {\n         self.consume_while(&(CNFParser::is_whitespace))\n     }\n \n-    fn consume_while(&mut self, p: &Fn(char) -> bool) {\n+    fn consume_while(&mut self, p: &dyn Fn(char) -> bool) {\n         while p(self.token) {\n             return\n         }\n     }\n }\n \n-\n fn main() {}"}, {"sha": "819a20ddbda92a286308b3fbe3a5fe1b6506af4a", "filename": "src/test/ui/issues/issue-24883.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-24883.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-24883.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-24883.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,5 +1,5 @@\n-// compile-pass\n-// skip-codegen\n+// check-pass\n+\n mod a {\n     pub mod b { pub struct Foo; }\n \n@@ -11,7 +11,6 @@ mod a {\n     pub use self::c::*;\n }\n \n-\n fn main() {\n     let _ = a::c::Bar(a::b::Foo);\n     let _ = a::Bar(a::b::Foo);"}, {"sha": "b8ebbdc5abc3ed7838bb6117ae2d1c41688bb8c2", "filename": "src/test/ui/issues/issue-26614.rs", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-26614.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-26614.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-26614.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,6 +1,5 @@\n-// compile-pass\n-// skip-codegen\n-#![allow(warnings)]\n+// check-pass\n+\n trait Mirror {\n     type It;\n }\n@@ -9,8 +8,6 @@ impl<T> Mirror for T {\n     type It = Self;\n }\n \n-\n-\n fn main() {\n     let c: <u32 as Mirror>::It = 5;\n     const CCCC: <u32 as Mirror>::It = 5;"}, {"sha": "707e71b11249dd670dca0d41a5da0ac4bb913816", "filename": "src/test/ui/issues/issue-26930.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-26930.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-26930.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-26930.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,10 +1,8 @@\n-// compile-pass\n-// skip-codegen\n-#![allow(unused)]\n+// check-pass\n+\n extern crate core;\n use core as core_export;\n use self::x::*;\n mod x {}\n \n-\n fn main() {}"}, {"sha": "6f4c5f45d0d9cd5ab31955761b59dfab8c49416b", "filename": "src/test/ui/issues/issue-29857.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-29857.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-29857.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-29857.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,5 +1,4 @@\n-// compile-pass\n-// skip-codegen\n+// check-pass\n \n use std::marker::PhantomData;\n \n@@ -17,5 +16,4 @@ pub trait Bar {\n \n impl<T: 'static, W: Bar<Output = T>> Foo<*mut T> for W {}\n \n-\n fn main() {}"}, {"sha": "63e42b484427e51885e42a64407c6d14fe95cb89", "filename": "src/test/ui/issues/issue-31924-non-snake-ffi.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-31924-non-snake-ffi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-31924-non-snake-ffi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-31924-non-snake-ffi.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,8 +1,8 @@\n-// compile-pass\n-// skip-codegen\n+// check-pass\n+\n #![deny(non_snake_case)]\n-#[no_mangle]\n-pub extern \"C\" fn SparklingGenerationForeignFunctionInterface() {}\n \n+#[no_mangle]\n+pub extern \"C\" fn SparklingGenerationForeignFunctionInterface() {} // OK\n \n fn main() {}"}, {"sha": "36adb5289aca5d228addf594cdb3e0292a87e8bb", "filename": "src/test/ui/issues/issue-32119.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-32119.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-32119.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-32119.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,6 +1,5 @@\n-// compile-pass\n-// skip-codegen\n-#![allow(dead_code)]\n+// check-pass\n+\n pub type T = ();\n mod foo { pub use super::T; }\n mod bar { pub use super::T; }\n@@ -15,5 +14,4 @@ mod baz {\n     pub use self::bar::*;\n }\n \n-\n fn main() {}"}, {"sha": "4ed06bff803415667d04f8ee325a373c188feb64", "filename": "src/test/ui/issues/issue-32222.rs", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-32222.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-32222.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-32222.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,6 +1,4 @@\n-// compile-pass\n-// skip-codegen\n-#![allow(warnings)]\n+// check-pass\n \n mod foo {\n     pub fn bar() {}\n@@ -21,5 +19,4 @@ mod b {\n     pub use a::bar;\n }\n \n-\n fn main() {}"}, {"sha": "b12b929f8fcf82af464d429b64294c3d3c9a759c", "filename": "src/test/ui/issues/issue-32797.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-32797.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-32797.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-32797.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,5 +1,4 @@\n-// compile-pass\n-// skip-codegen\n+// check-pass\n \n pub use bar::*;\n mod bar {\n@@ -11,5 +10,4 @@ mod baz {\n     pub use main as f;\n }\n \n-\n pub fn main() {}"}, {"sha": "54ec44a1cf4e519ce592a3d2abd23b68b922528f", "filename": "src/test/ui/issues/issue-32922.rs", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-32922.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-32922.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-32922.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,6 +1,4 @@\n-// compile-pass\n-// skip-codegen\n-#![allow(warnings)]\n+// check-pass\n \n macro_rules! foo { () => {\n     let x = 1;\n@@ -22,7 +20,6 @@ macro_rules! baz {\n     }\n }\n \n-\n fn main() {\n     foo! {};\n     bar! {};"}, {"sha": "5f9f1e4a74211d803fe41107194ce0822f5f18cc", "filename": "src/test/ui/issues/issue-33241.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-33241.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-33241.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-33241.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,13 +1,11 @@\n-// compile-pass\n-// skip-codegen\n+// check-pass\n \n use std::fmt;\n \n // CoerceUnsized is not implemented for tuples. You can still create\n // an unsized tuple by transmuting a trait object.\n fn any<T>() -> T { unreachable!() }\n \n-\n fn main() {\n     let t: &(u8, dyn fmt::Debug) = any();\n     println!(\"{:?}\", &t.1);"}, {"sha": "d761c0c823bcd2e4616e25737004c416d46de1d8", "filename": "src/test/ui/issues/issue-34028.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-34028.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-34028.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-34028.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,5 +1,4 @@\n-// compile-pass\n-// skip-codegen\n+// check-pass\n \n macro_rules! m {\n     () => { #[cfg(any())] fn f() {} }\n@@ -8,5 +7,4 @@ macro_rules! m {\n trait T {}\n impl T for () { m!(); }\n \n-\n fn main() {}"}, {"sha": "157c58c459d6663ce8a5a1c344da9a6bd104eeff", "filename": "src/test/ui/issues/issue-34171.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-34171.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-34171.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-34171.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,12 +1,10 @@\n-// compile-pass\n-// skip-codegen\n+// check-pass\n \n macro_rules! null { ($i:tt) => {} }\n macro_rules! apply_null {\n     ($i:item) => { null! { $i } }\n }\n \n-\n fn main() {\n     apply_null!(#[cfg(all())] fn f() {});\n }"}, {"sha": "6132f744b50a9253ebc6370cfac197587f9a1ae5", "filename": "src/test/ui/issues/issue-34418.rs", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-34418.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-34418.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-34418.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,6 +1,4 @@\n-// compile-pass\n-// skip-codegen\n-#![allow(unused)]\n+// check-pass\n \n macro_rules! make_item {\n     () => { fn f() {} }\n@@ -18,5 +16,4 @@ fn g() {\n     make_stmt! {}\n }\n \n-\n fn main() {}"}, {"sha": "8ffed827e90872397daf5f74980010d195f067fe", "filename": "src/test/ui/issues/issue-34839.rs", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-34839.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-34839.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-34839.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,6 +1,4 @@\n-// compile-pass\n-// skip-codegen\n-#![allow(dead_code)]\n+// check-pass\n \n trait RegularExpression: Sized {\n     type Text;\n@@ -18,5 +16,4 @@ enum FindCapturesInner<'r, 't> {\n     Dynamic(FindCaptures<'t, ExecNoSyncStr<'r>>),\n }\n \n-\n fn main() {}"}, {"sha": "fafef79ea5b866adf39ed4846dc792db57c14729", "filename": "src/test/ui/issues/issue-35570.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-35570.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-35570.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-35570.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,5 +1,4 @@\n-// compile-pass\n-// skip-codegen\n+// check-pass\n \n use std::mem;\n \n@@ -25,7 +24,6 @@ fn foo<'a>(x: &'a ()) -> <() as Lifetime<'a>>::Out {\n fn takes_lifetime(_f: for<'a> fn(&'a ()) -> <() as Lifetime<'a>>::Out) {\n }\n \n-\n fn main() {\n     takes_lifetime(foo);\n }"}, {"sha": "c7c70c7afe7430f11dbcc076c11e7a7880a3b465", "filename": "src/test/ui/issues/issue-36116.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-36116.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-36116.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-36116.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,8 +1,7 @@\n // Unnecessary path disambiguator is ok\n \n-// compile-pass\n-// skip-codegen\n-#![allow(unused)]\n+// check-pass\n+\n macro_rules! m {\n     ($p: path) => {\n         let _ = $p(0);\n@@ -23,5 +22,4 @@ fn f() {\n     m!(S::<u8>);\n }\n \n-\n fn main() {}"}, {"sha": "3a3e6f47067d961a81dc43a6abe71f3cc41f0c94", "filename": "src/test/ui/issues/issue-36379.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-36379.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-36379.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-36379.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,7 +1,5 @@\n-// compile-pass\n-// skip-codegen\n+// check-pass\n \n fn _test() -> impl Default { }\n \n-\n-fn main() { }\n+fn main() {}"}, {"sha": "ca3d66b1c8eb7d9cb96551589f5a97b26da50e31", "filename": "src/test/ui/issues/issue-36839.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-36839.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-36839.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-36839.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,5 +1,4 @@\n-// compile-pass\n-// skip-codegen\n+// check-pass\n \n pub trait Foo {\n     type Bar;\n@@ -17,7 +16,6 @@ impl<T> Broken for T {\n     }\n }\n \n-\n fn main() {\n     let _m: &dyn Broken<Assoc=()> = &();\n }"}, {"sha": "9cae6cf5e7665ced8faeb73dab67ad3676e0b3c0", "filename": "src/test/ui/issues/issue-37051.rs", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-37051.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-37051.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-37051.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,7 +1,7 @@\n-// compile-pass\n-// skip-codegen\n+// check-pass\n+\n #![feature(associated_type_defaults)]\n-#![allow(warnings)]\n+\n trait State: Sized {\n     type NextState: State = StateMachineEnded;\n     fn execute(self) -> Option<Self::NextState>;\n@@ -15,6 +15,4 @@ impl State for StateMachineEnded {\n     }\n }\n \n-\n-fn main() {\n-}\n+fn main() {}"}, {"sha": "6bf3a276ce138580440b8c1d6212fc4f31100f4a", "filename": "src/test/ui/issues/issue-37366.rs", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-37366.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-37366.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-37366.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,6 +1,6 @@\n+// check-pass\n // ignore-emscripten\n-// compile-pass\n-// skip-codegen\n+\n #![feature(asm)]\n \n macro_rules! interrupt_handler {\n@@ -12,6 +12,4 @@ macro_rules! interrupt_handler {\n }\n interrupt_handler!{}\n \n-\n-fn main() {\n-}\n+fn main() {}"}, {"sha": "2081c9f7e26ec0940d52bafc6a9a2b0e5e782951", "filename": "src/test/ui/issues/issue-37510.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-37510.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-37510.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-37510.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,9 +1,7 @@\n-// compile-pass\n-// skip-codegen\n+// check-pass\n \n fn foo(_: &mut i32) -> bool { true }\n \n-\n fn main() {\n     let opt = Some(92);\n     let mut x = 62;"}, {"sha": "caff507c918339ea873d84cdcba1d9f4bb3c4469", "filename": "src/test/ui/issues/issue-37515.rs", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-37515.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-37515.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-37515.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,10 +1,8 @@\n-// skip-codegen\n-// compile-pass\n+// check-pass\n+\n #![warn(unused)]\n \n type Z = dyn for<'x> Send;\n //~^ WARN type alias is never used\n \n-\n-fn main() {\n-}\n+fn main() {}"}, {"sha": "0da8b7900a8a54b508e3b108480e31d882c967be", "filename": "src/test/ui/issues/issue-38160.rs", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-38160.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-38160.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-38160.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,7 +1,5 @@\n-// compile-pass\n-// skip-codegen\n-#![feature(associated_consts)]\n-#![allow(warnings)]\n+// check-pass\n+\n trait MyTrait {\n     const MY_CONST: &'static str;\n }\n@@ -18,5 +16,4 @@ macro_rules! my_macro {\n \n my_macro!();\n \n-\n fn main() {}"}, {"sha": "82d4a4e325ac05af008c881707369fd9d3052ae0", "filename": "src/test/ui/issues/issue-38381.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-38381.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-38381.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-38381.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,9 +1,7 @@\n-// compile-pass\n-// skip-codegen\n+// check-pass\n \n use std::ops::Deref;\n \n-\n fn main() {\n     let _x: fn(&i32) -> <&i32 as Deref>::Target = unimplemented!();\n }"}, {"sha": "a39a8519aa9869c3bbb5bf30d5db349fbdcf3aeb", "filename": "src/test/ui/issues/issue-40350.rs", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-40350.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fissues%2Fissue-40350.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-40350.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,6 +1,4 @@\n-// compile-pass\n-// skip-codegen\n-#![allow(warnings)]\n+// check-pass\n \n enum E {\n     A = {\n@@ -9,5 +7,4 @@ enum E {\n     }\n }\n \n-\n fn main() {}"}, {"sha": "a558e8a1813fd7d2d5e0e846b3c7ebbca0960c1f", "filename": "src/test/ui/nll/closure-requirements/region-lbr1-does-outlive-lbr2-because-implied-bound.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fnll%2Fclosure-requirements%2Fregion-lbr1-does-outlive-lbr2-because-implied-bound.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fnll%2Fclosure-requirements%2Fregion-lbr1-does-outlive-lbr2-because-implied-bound.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fnll%2Fclosure-requirements%2Fregion-lbr1-does-outlive-lbr2-because-implied-bound.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,12 +1,11 @@\n // Basic test for free regions in the NLL code. This test does not\n // report an error because of the (implied) bound that `'b: 'a`.\n \n+// check-pass\n // compile-flags:-Zborrowck=mir -Zverbose\n-// compile-pass\n-// skip-codegen\n \n fn foo<'a, 'b>(x: &'a &'b u32) -> &'a u32 {\n     &**x\n }\n \n-fn main() { }\n+fn main() {}"}, {"sha": "d1e7c3b4d518a34768a92515eaae391a73e0bb49", "filename": "src/test/ui/rfc-2008-non-exhaustive/uninhabited/indirect_match_with_exhaustive_patterns_same_crate.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Frfc-2008-non-exhaustive%2Funinhabited%2Findirect_match_with_exhaustive_patterns_same_crate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Frfc-2008-non-exhaustive%2Funinhabited%2Findirect_match_with_exhaustive_patterns_same_crate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2008-non-exhaustive%2Funinhabited%2Findirect_match_with_exhaustive_patterns_same_crate.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,5 +1,5 @@\n-// compile-pass\n-// skip-codegen\n+// check-pass\n+\n #![deny(unreachable_patterns)]\n #![feature(exhaustive_patterns)]\n #![feature(never_type)]"}, {"sha": "8973d21bff6faaadb974e93565883dae57931fff", "filename": "src/test/ui/rfc-2008-non-exhaustive/uninhabited/match_with_exhaustive_patterns_same_crate.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Frfc-2008-non-exhaustive%2Funinhabited%2Fmatch_with_exhaustive_patterns_same_crate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Frfc-2008-non-exhaustive%2Funinhabited%2Fmatch_with_exhaustive_patterns_same_crate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2008-non-exhaustive%2Funinhabited%2Fmatch_with_exhaustive_patterns_same_crate.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,5 +1,5 @@\n-// compile-pass\n-// skip-codegen\n+// check-pass\n+\n #![deny(unreachable_patterns)]\n #![feature(exhaustive_patterns)]\n #![feature(never_type)]"}, {"sha": "92b25cbf584109bb4092956aeb5bae547d6098d1", "filename": "src/test/ui/single-use-lifetime/one-use-in-fn-return.rs", "status": "modified", "additions": 5, "deletions": 9, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fsingle-use-lifetime%2Fone-use-in-fn-return.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftest%2Fui%2Fsingle-use-lifetime%2Fone-use-in-fn-return.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsingle-use-lifetime%2Fone-use-in-fn-return.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -1,20 +1,16 @@\n-// compile-pass\n-\n-#![deny(single_use_lifetimes)]\n-#![allow(dead_code)]\n-#![allow(unused_variables)]\n-\n // Test that we DO NOT warn when lifetime name is used only\n // once in a fn return type -- using `'_` is not legal there,\n // as it must refer back to an argument.\n //\n // (Normally, using `'static` would be preferred, but there are\n // times when that is not what you want.)\n-//\n-// run-pass\n+\n+// compile-pass\n+\n+#![deny(single_use_lifetimes)]\n \n fn b<'a>() -> &'a u32 { // OK: used only in return type\n     &22\n }\n \n-fn main() { }\n+fn main() {}"}, {"sha": "6ce7461f759a4f189996a3ec62429f02f19bb2bc", "filename": "src/tools/compiletest/src/header.rs", "status": "modified", "additions": 46, "deletions": 33, "changes": 79, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftools%2Fcompiletest%2Fsrc%2Fheader.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftools%2Fcompiletest%2Fsrc%2Fheader.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fheader.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -290,6 +290,13 @@ impl EarlyProps {\n     }\n }\n \n+#[derive(Clone, Copy, PartialEq, Debug)]\n+pub enum PassMode {\n+    Check,\n+    Build,\n+    Run,\n+}\n+\n #[derive(Clone, Debug)]\n pub struct TestProps {\n     // Lines that should be expected, in order, on standard out\n@@ -349,14 +356,10 @@ pub struct TestProps {\n     // testing harness and used when generating compilation\n     // arguments. (In particular, it propagates to the aux-builds.)\n     pub incremental_dir: Option<PathBuf>,\n-    // Specifies that a test must actually compile without errors.\n-    pub compile_pass: bool,\n+    // How far should the test proceed while still passing.\n+    pub pass_mode: Option<PassMode>,\n     // rustdoc will test the output of the `--test` option\n     pub check_test_line_numbers_match: bool,\n-    // The test must be compiled and run successfully. Only used in UI tests for now.\n-    pub run_pass: bool,\n-    // Skip any codegen step and running the executable. Only for run-pass.\n-    pub skip_codegen: bool,\n     // Do not pass `-Z ui-testing` to UI tests\n     pub disable_ui_testing_normalization: bool,\n     // customized normalization rules\n@@ -396,10 +399,8 @@ impl TestProps {\n             pretty_compare_only: false,\n             forbid_output: vec![],\n             incremental_dir: None,\n-            compile_pass: false,\n+            pass_mode: None,\n             check_test_line_numbers_match: false,\n-            run_pass: false,\n-            skip_codegen: false,\n             disable_ui_testing_normalization: false,\n             normalize_stdout: vec![],\n             normalize_stderr: vec![],\n@@ -525,18 +526,7 @@ impl TestProps {\n                 self.check_test_line_numbers_match = config.parse_check_test_line_numbers_match(ln);\n             }\n \n-            if !self.run_pass {\n-                self.run_pass = config.parse_run_pass(ln);\n-            }\n-\n-            if !self.compile_pass {\n-                // run-pass implies compile_pass\n-                self.compile_pass = config.parse_compile_pass(ln) || self.run_pass;\n-            }\n-\n-            if !self.skip_codegen {\n-                self.skip_codegen = config.parse_skip_codegen(ln);\n-            }\n+            self.update_pass_mode(ln, cfg, config);\n \n             if !self.disable_ui_testing_normalization {\n                 self.disable_ui_testing_normalization =\n@@ -583,6 +573,41 @@ impl TestProps {\n             }\n         }\n     }\n+\n+    fn update_pass_mode(&mut self, ln: &str, revision: Option<&str>, config: &Config) {\n+        let check_no_run = |s| {\n+            if config.mode != Mode::Ui && config.mode != Mode::Incremental {\n+                panic!(\"`{}` header is only supported in UI and incremental tests\", s);\n+            }\n+            if config.mode == Mode::Incremental &&\n+                !revision.map_or(false, |r| r.starts_with(\"cfail\")) &&\n+                !self.revisions.iter().all(|r| r.starts_with(\"cfail\")) {\n+                panic!(\"`{}` header is only supported in `cfail` incremental tests\", s);\n+            }\n+        };\n+        let pass_mode = if config.parse_name_directive(ln, \"check-pass\") {\n+            check_no_run(\"check-pass\");\n+            Some(PassMode::Check)\n+        } else if config.parse_name_directive(ln, \"build-pass\") {\n+            check_no_run(\"build-pass\");\n+            Some(PassMode::Build)\n+        } else if config.parse_name_directive(ln, \"compile-pass\") /* compatibility */ {\n+            check_no_run(\"compile-pass\");\n+            Some(PassMode::Build)\n+        } else if config.parse_name_directive(ln, \"run-pass\") {\n+            if config.mode != Mode::Ui && config.mode != Mode::RunPass /* compatibility */ {\n+                panic!(\"`run-pass` header is only supported in UI tests\")\n+            }\n+            Some(PassMode::Run)\n+        } else {\n+            None\n+        };\n+        match (self.pass_mode, pass_mode) {\n+            (None, Some(_)) => self.pass_mode = pass_mode,\n+            (Some(_), Some(_)) => panic!(\"multiple `*-pass` headers in a single test\"),\n+            (_, None) => {}\n+        }\n+    }\n }\n \n fn iter_header(testfile: &Path, cfg: Option<&str>, it: &mut dyn FnMut(&str)) {\n@@ -710,10 +735,6 @@ impl Config {\n         }\n     }\n \n-    fn parse_compile_pass(&self, line: &str) -> bool {\n-        self.parse_name_directive(line, \"compile-pass\")\n-    }\n-\n     fn parse_disable_ui_testing_normalization(&self, line: &str) -> bool {\n         self.parse_name_directive(line, \"disable-ui-testing-normalization\")\n     }\n@@ -722,14 +743,6 @@ impl Config {\n         self.parse_name_directive(line, \"check-test-line-numbers-match\")\n     }\n \n-    fn parse_run_pass(&self, line: &str) -> bool {\n-        self.parse_name_directive(line, \"run-pass\")\n-    }\n-\n-    fn parse_skip_codegen(&self, line: &str) -> bool {\n-        self.parse_name_directive(line, \"skip-codegen\")\n-    }\n-\n     fn parse_assembly_output(&self, line: &str) -> Option<String> {\n         self.parse_name_value_directive(line, \"assembly-output\")\n             .map(|r| r.trim().to_string())"}, {"sha": "8b52a529d440a07e058d09c2b18281fae1af21dc", "filename": "src/tools/compiletest/src/runtest.rs", "status": "modified", "additions": 13, "deletions": 16, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cd5ed495ceb6224a091c2310ff90c91dd9afbd9/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs?ref=2cd5ed495ceb6224a091c2310ff90c91dd9afbd9", "patch": "@@ -10,7 +10,7 @@ use crate::common::{Config, TestPaths};\n use crate::common::{Incremental, MirOpt, RunMake, Ui, JsDocTest, Assembly};\n use diff;\n use crate::errors::{self, Error, ErrorKind};\n-use crate::header::TestProps;\n+use crate::header::{TestProps, PassMode};\n use crate::json;\n use regex::{Captures, Regex};\n use rustfix::{apply_suggestions, get_suggestions_from_json, Filter};\n@@ -310,28 +310,27 @@ impl<'test> TestCx<'test> {\n     }\n \n     fn should_run_successfully(&self) -> bool {\n-        let run_pass = match self.config.mode {\n+        match self.config.mode {\n             RunPass => true,\n-            Ui => self.props.run_pass,\n-            _ => unimplemented!(),\n-        };\n-        return run_pass && !self.props.skip_codegen;\n+            Ui => self.props.pass_mode == Some(PassMode::Run),\n+            mode => panic!(\"unimplemented for mode {:?}\", mode),\n+        }\n     }\n \n     fn should_compile_successfully(&self) -> bool {\n         match self.config.mode {\n-            CompileFail => self.props.compile_pass,\n+            CompileFail => false,\n             RunPass => true,\n             JsDocTest => true,\n-            Ui => self.props.compile_pass,\n+            Ui => self.props.pass_mode.is_some(),\n             Incremental => {\n                 let revision = self.revision\n                     .expect(\"incremental tests require a list of revisions\");\n                 if revision.starts_with(\"rpass\") || revision.starts_with(\"rfail\") {\n                     true\n                 } else if revision.starts_with(\"cfail\") {\n                     // FIXME: would be nice if incremental revs could start with \"cpass\"\n-                    self.props.compile_pass\n+                    self.props.pass_mode.is_some()\n                 } else {\n                     panic!(\"revision name must begin with rpass, rfail, or cfail\");\n                 }\n@@ -433,11 +432,9 @@ impl<'test> TestCx<'test> {\n             \"run-pass tests with expected warnings should be moved to ui/\"\n         );\n \n-        if !self.props.skip_codegen {\n-            let proc_res = self.exec_compiled_test();\n-            if !proc_res.status.success() {\n-                self.fatal_proc_rec(\"test run failed!\", &proc_res);\n-            }\n+        let proc_res = self.exec_compiled_test();\n+        if !proc_res.status.success() {\n+            self.fatal_proc_rec(\"test run failed!\", &proc_res);\n         }\n     }\n \n@@ -1344,7 +1341,7 @@ impl<'test> TestCx<'test> {\n     fn check_error_patterns(&self, output_to_check: &str, proc_res: &ProcRes) {\n         debug!(\"check_error_patterns\");\n         if self.props.error_patterns.is_empty() {\n-            if self.props.compile_pass {\n+            if self.props.pass_mode.is_some() {\n                 return;\n             } else {\n                 self.fatal(&format!(\n@@ -1971,7 +1968,7 @@ impl<'test> TestCx<'test> {\n             }\n         }\n \n-        if self.props.skip_codegen {\n+        if self.props.pass_mode == Some(PassMode::Check) {\n             assert!(\n                 !self\n                     .props"}]}