{"sha": "81b8db218006daaee11bb2c61aa7e3d7386b9fa9", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgxYjhkYjIxODAwNmRhYWVlMTFiYjJjNjFhYTdlM2Q3Mzg2YjlmYTk=", "commit": {"author": {"name": "Tommy Ip", "email": "hkmp7tommy@gmail.com", "date": "2017-12-10T17:36:08Z"}, "committer": {"name": "Tommy Ip", "email": "hkmp7tommy@gmail.com", "date": "2017-12-10T21:14:57Z"}, "message": "Imply must-compile-successfully in ui-tests when the run-pass flag is present.", "tree": {"sha": "d24e48348d51ddb38d8d479deb152b5b909d2f96", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d24e48348d51ddb38d8d479deb152b5b909d2f96"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/81b8db218006daaee11bb2c61aa7e3d7386b9fa9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/81b8db218006daaee11bb2c61aa7e3d7386b9fa9", "html_url": "https://github.com/rust-lang/rust/commit/81b8db218006daaee11bb2c61aa7e3d7386b9fa9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/81b8db218006daaee11bb2c61aa7e3d7386b9fa9/comments", "author": {"login": "tommyip", "id": 18504232, "node_id": "MDQ6VXNlcjE4NTA0MjMy", "avatar_url": "https://avatars.githubusercontent.com/u/18504232?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tommyip", "html_url": "https://github.com/tommyip", "followers_url": "https://api.github.com/users/tommyip/followers", "following_url": "https://api.github.com/users/tommyip/following{/other_user}", "gists_url": "https://api.github.com/users/tommyip/gists{/gist_id}", "starred_url": "https://api.github.com/users/tommyip/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tommyip/subscriptions", "organizations_url": "https://api.github.com/users/tommyip/orgs", "repos_url": "https://api.github.com/users/tommyip/repos", "events_url": "https://api.github.com/users/tommyip/events{/privacy}", "received_events_url": "https://api.github.com/users/tommyip/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tommyip", "id": 18504232, "node_id": "MDQ6VXNlcjE4NTA0MjMy", "avatar_url": "https://avatars.githubusercontent.com/u/18504232?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tommyip", "html_url": "https://github.com/tommyip", "followers_url": "https://api.github.com/users/tommyip/followers", "following_url": "https://api.github.com/users/tommyip/following{/other_user}", "gists_url": "https://api.github.com/users/tommyip/gists{/gist_id}", "starred_url": "https://api.github.com/users/tommyip/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tommyip/subscriptions", "organizations_url": "https://api.github.com/users/tommyip/orgs", "repos_url": "https://api.github.com/users/tommyip/repos", "events_url": "https://api.github.com/users/tommyip/events{/privacy}", "received_events_url": "https://api.github.com/users/tommyip/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5990b8b57caaaf89024791bc053224cd1266aaf4", "url": "https://api.github.com/repos/rust-lang/rust/commits/5990b8b57caaaf89024791bc053224cd1266aaf4", "html_url": "https://github.com/rust-lang/rust/commit/5990b8b57caaaf89024791bc053224cd1266aaf4"}], "stats": {"total": 10, "additions": 6, "deletions": 4}, "files": [{"sha": "1f736e33c8b2a34a11e55721f5afce42d3ba50eb", "filename": "src/tools/compiletest/src/header.rs", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/81b8db218006daaee11bb2c61aa7e3d7386b9fa9/src%2Ftools%2Fcompiletest%2Fsrc%2Fheader.rs", "raw_url": "https://github.com/rust-lang/rust/raw/81b8db218006daaee11bb2c61aa7e3d7386b9fa9/src%2Ftools%2Fcompiletest%2Fsrc%2Fheader.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fheader.rs?ref=81b8db218006daaee11bb2c61aa7e3d7386b9fa9", "patch": "@@ -359,10 +359,6 @@ impl TestProps {\n                 self.forbid_output.push(of);\n             }\n \n-            if !self.must_compile_successfully {\n-                self.must_compile_successfully = config.parse_must_compile_successfully(ln);\n-            }\n-\n             if !self.check_test_line_numbers_match {\n                 self.check_test_line_numbers_match = config.parse_check_test_line_numbers_match(ln);\n             }\n@@ -371,6 +367,12 @@ impl TestProps {\n                 self.run_pass = config.parse_run_pass(ln);\n             }\n \n+            if !self.must_compile_successfully {\n+                // run-pass implies must_compile_sucessfully\n+                self.must_compile_successfully =\n+                    config.parse_must_compile_successfully(ln) || self.run_pass;\n+            }\n+\n             if let Some(rule) = config.parse_custom_normalization(ln, \"normalize-stdout\") {\n                 self.normalize_stdout.push(rule);\n             }"}]}