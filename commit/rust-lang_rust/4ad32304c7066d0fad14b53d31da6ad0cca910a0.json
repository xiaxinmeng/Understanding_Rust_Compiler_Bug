{"sha": "4ad32304c7066d0fad14b53d31da6ad0cca910a0", "node_id": "C_kwDOAAsO6NoAKDRhZDMyMzA0YzcwNjZkMGZhZDE0YjUzZDMxZGE2YWQwY2NhOTEwYTA", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2023-03-10T18:59:19Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-03-10T18:59:19Z"}, "message": "Rollup merge of #108900 - bvanjoi:issue-108275, r=petrochenkov\n\nfix(lexer): print whitespace warning for \\x0c\n\n- close https://github.com/rust-lang/rust/issues/108275\n- discussion: https://github.com/rust-lang/rust/pull/108403", "tree": {"sha": "1592a1cad72a39ac2da842a84167cca168ab4e6e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1592a1cad72a39ac2da842a84167cca168ab4e6e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4ad32304c7066d0fad14b53d31da6ad0cca910a0", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJkC34HCRBK7hj4Ov3rIwAAuvwIAJr/PHkMsWLn7BLXBXc+OMZP\nECGNJeoItXWOf6O7qFVZAM6wSDrP2xf5eth1KFTdGzHEcLtlrXZS8CEB8SQJQS7S\n3jIT6CQHEfcXdXcdjMN2+AzIrW+3vtDLdaexQf96K76q3ChoBYtvFWi2l1+8mY2L\nJuF/AfM/16LqUi8hn551BTtafcAREQ1fNaRmr7Wk76Uzs+4lSvy8N2BZcKultS5k\nvGv2xqQq6ECtSDqMbfkm24qEpFQPIkqM7pSLLFMb2nBHhVBH0u8zb69ki/EDOXto\njjhkNc6Ae1dJfr7hj+Z1PoMvXbh7nroIkmR122ZoByRjR+YEZAHSvHkawFwd3i0=\n=FEeC\n-----END PGP SIGNATURE-----\n", "payload": "tree 1592a1cad72a39ac2da842a84167cca168ab4e6e\nparent bee84733ade5e100a57478b8d551ce1840dc3009\nparent d223c26bced5e3d861daa987820b30091198159e\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1678474759 +0100\ncommitter GitHub <noreply@github.com> 1678474759 +0100\n\nRollup merge of #108900 - bvanjoi:issue-108275, r=petrochenkov\n\nfix(lexer): print whitespace warning for \\x0c\n\n- close https://github.com/rust-lang/rust/issues/108275\n- discussion: https://github.com/rust-lang/rust/pull/108403\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4ad32304c7066d0fad14b53d31da6ad0cca910a0", "html_url": "https://github.com/rust-lang/rust/commit/4ad32304c7066d0fad14b53d31da6ad0cca910a0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4ad32304c7066d0fad14b53d31da6ad0cca910a0/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bee84733ade5e100a57478b8d551ce1840dc3009", "url": "https://api.github.com/repos/rust-lang/rust/commits/bee84733ade5e100a57478b8d551ce1840dc3009", "html_url": "https://github.com/rust-lang/rust/commit/bee84733ade5e100a57478b8d551ce1840dc3009"}, {"sha": "d223c26bced5e3d861daa987820b30091198159e", "url": "https://api.github.com/repos/rust-lang/rust/commits/d223c26bced5e3d861daa987820b30091198159e", "html_url": "https://github.com/rust-lang/rust/commit/d223c26bced5e3d861daa987820b30091198159e"}], "stats": {"total": 50, "additions": 40, "deletions": 10}, "files": [{"sha": "bb4d91247b81d04eefa2c80523d8fa6d8f1b6857", "filename": "compiler/rustc_lexer/src/unescape.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4ad32304c7066d0fad14b53d31da6ad0cca910a0/compiler%2Frustc_lexer%2Fsrc%2Funescape.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4ad32304c7066d0fad14b53d31da6ad0cca910a0/compiler%2Frustc_lexer%2Fsrc%2Funescape.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_lexer%2Fsrc%2Funescape.rs?ref=4ad32304c7066d0fad14b53d31da6ad0cca910a0", "patch": "@@ -298,10 +298,10 @@ where\n         }\n         let tail = &tail[first_non_space..];\n         if let Some(c) = tail.chars().nth(0) {\n-            // For error reporting, we would like the span to contain the character that was not\n-            // skipped. The +1 is necessary to account for the leading \\ that started the escape.\n-            let end = start + first_non_space + c.len_utf8() + 1;\n             if c.is_whitespace() {\n+                // For error reporting, we would like the span to contain the character that was not\n+                // skipped. The +1 is necessary to account for the leading \\ that started the escape.\n+                let end = start + first_non_space + c.len_utf8() + 1;\n                 callback(start..end, Err(EscapeError::UnskippedWhitespaceWarning));\n             }\n         }"}, {"sha": "ab7931d74d766b69e6de4877909dbae73db3f8dc", "filename": "compiler/rustc_parse/locales/en-US.ftl", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4ad32304c7066d0fad14b53d31da6ad0cca910a0/compiler%2Frustc_parse%2Flocales%2Fen-US.ftl", "raw_url": "https://github.com/rust-lang/rust/raw/4ad32304c7066d0fad14b53d31da6ad0cca910a0/compiler%2Frustc_parse%2Flocales%2Fen-US.ftl", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_parse%2Flocales%2Fen-US.ftl?ref=4ad32304c7066d0fad14b53d31da6ad0cca910a0", "patch": "@@ -709,7 +709,7 @@ parse_zero_chars = empty character literal\n parse_lone_slash = invalid trailing slash in literal\n     .label = {parse_lone_slash}\n \n-parse_unskipped_whitespace = non-ASCII whitespace symbol '{$ch}' is not skipped\n+parse_unskipped_whitespace = whitespace symbol '{$ch}' is not skipped\n     .label = {parse_unskipped_whitespace}\n \n parse_multiple_skipped_lines = multiple lines skipped by escaped newline"}, {"sha": "10a72421f24a7da7f9e610b809604666e081866a", "filename": "tests/ui/str/str-escape.rs", "status": "modified", "additions": 21, "deletions": 1, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/4ad32304c7066d0fad14b53d31da6ad0cca910a0/tests%2Fui%2Fstr%2Fstr-escape.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4ad32304c7066d0fad14b53d31da6ad0cca910a0/tests%2Fui%2Fstr%2Fstr-escape.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fstr%2Fstr-escape.rs?ref=4ad32304c7066d0fad14b53d31da6ad0cca910a0", "patch": "@@ -1,11 +1,31 @@\n // check-pass\n+// ignore-tidy-tab\n+\n fn main() {\n     let s = \"\\\n \n              \";\n     //~^^^ WARNING multiple lines skipped by escaped newline\n+    assert_eq!(s, \"\");\n+\n     let s = \"foo\\\n   \u00a0          bar\n              \";\n-    //~^^^ WARNING non-ASCII whitespace symbol '\\u{a0}' is not skipped\n+    //~^^^ WARNING whitespace symbol '\\u{a0}' is not skipped\n+    assert_eq!(s, \"foo\u00a0          bar\\n             \");\n+\n+    let s = \"a\\\n+ b\";\n+    assert_eq!(s, \"ab\");\n+\n+    let s = \"a\\\n+\tb\";\n+    assert_eq!(s, \"ab\");\n+\n+    let s = \"a\\\n+    \fb\";\n+    //~^^ WARNING whitespace symbol '\\u{c}' is not skipped\n+    // '\\x0c' is ASCII whitespace, but it may not need skipped\n+    // discussion: https://github.com/rust-lang/rust/pull/108403\n+    assert_eq!(s, \"a\\x0cb\");\n }"}, {"sha": "43b4f7e36f6abc1b72ca43fc3b76b6505ee93381", "filename": "tests/ui/str/str-escape.stderr", "status": "modified", "additions": 15, "deletions": 5, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/4ad32304c7066d0fad14b53d31da6ad0cca910a0/tests%2Fui%2Fstr%2Fstr-escape.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4ad32304c7066d0fad14b53d31da6ad0cca910a0/tests%2Fui%2Fstr%2Fstr-escape.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fstr%2Fstr-escape.stderr?ref=4ad32304c7066d0fad14b53d31da6ad0cca910a0", "patch": "@@ -1,21 +1,31 @@\n warning: multiple lines skipped by escaped newline\n-  --> $DIR/str-escape.rs:3:14\n+  --> $DIR/str-escape.rs:5:14\n    |\n LL |       let s = \"\\\n    |  ______________^\n LL | |\n LL | |              \";\n    | |_____________^ skipping everything up to and including this point\n \n-warning: non-ASCII whitespace symbol '\\u{a0}' is not skipped\n-  --> $DIR/str-escape.rs:7:17\n+warning: whitespace symbol '\\u{a0}' is not skipped\n+  --> $DIR/str-escape.rs:11:17\n    |\n LL |       let s = \"foo\\\n    |  _________________^\n LL | |   \u00a0          bar\n-   | |   ^ non-ASCII whitespace symbol '\\u{a0}' is not skipped\n+   | |   ^ whitespace symbol '\\u{a0}' is not skipped\n    | |___|\n    | \n \n-warning: 2 warnings emitted\n+warning: whitespace symbol '\\u{c}' is not skipped\n+  --> $DIR/str-escape.rs:25:15\n+   |\n+LL |       let s = \"a\\\n+   |  _______________^\n+LL | |     \fb\";\n+   | |    ^- whitespace symbol '\\u{c}' is not skipped\n+   | |____|\n+   | \n+\n+warning: 3 warnings emitted\n "}]}