{"sha": "5b9f8e7e8e309eb77ec8129ffeb555ff1435cc0f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjViOWY4ZTdlOGUzMDllYjc3ZWM4MTI5ZmZlYjU1NWZmMTQzNWNjMGY=", "commit": {"author": {"name": "BooksBaum", "email": "15612932+Booksbaum@users.noreply.github.com", "date": "2021-08-10T12:15:12Z"}, "committer": {"name": "BooksBaum", "email": "15612932+Booksbaum@users.noreply.github.com", "date": "2021-08-17T17:23:06Z"}, "message": "Fix errors from `rebase master`\n\nNote:\n2nd Assist description is moved down: generated doc tests extracts now\nall tests (previously only the first one). But it uses the first\n`Assist` name -- which is the wrong one for the 2nd test. And 2nd assist\nis currently disabled -> would fail anyway.", "tree": {"sha": "91ab735d7227e805626270e67732156a3e85af47", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/91ab735d7227e805626270e67732156a3e85af47"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5b9f8e7e8e309eb77ec8129ffeb555ff1435cc0f", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEJTdsK5zmAD3L8AFljIMXU7iI9loFAmEb8HoACgkQjIMXU7iI\n9lr66A/+Px/4MysMLO9KzP2B+sq+n04508L6MY+XMZiwSJv+mgkG5iLXwivSDfmI\nTVo0VJadrD+aEmxQnGNcErXB1EC7z+G00qHyWW/76kMvbwyZ6vQ7a6P+yHApPoyI\n30v9i3PysVxVylcqarMH8QRWtHq9BuffmhGq8Cb2cw5rggn2wH9DBJjccX/I4WNZ\ntvS4+9/fIyBJ/7kwTS8UlvrvIXTgQBQtoOuz/1zxST397DbPpxjQzOvIQjTZ1nGe\nWPrgxlDQl+ZtH13qYVPPBjwNSMMPKg4ab2C2iCng84TQNWlFJeMQiaUOajBZuIJv\nAPrGF90AFnzD3t1aZSRScyKEO9D/0ipG5Z3jLT9ynJvkkFocdWGZul+Ehk+iMPpA\naxsriSclAh7RLUXqzEVx4wfPiFpHKga3Tq1pi8tyG2cxVOIuJEj/0zl9SuPooRkI\nOHf8gEouPPwHxmm+LZPNr9EVteSGIA+UKQoMSQfyfojjAsARaPBe9MvQ96ZvrwTq\npieQT+Y8uSm10mWCyXXn1UA7D5KF6Jj1p4sDRuMyxvTvUc9IchP5awElQGth0SA7\nKO0MJ5k5zxsprxP/IhV7/LFhYaLty/GhSoVTLAaaG+0V82D6mu3dyh8yk7vf6J9c\nOvidyJ/5w4/fKDg8ZYoJWhmynMmFAD7M7t97CPTrHVVUyy4TsHk=\n=LlYm\n-----END PGP SIGNATURE-----", "payload": "tree 91ab735d7227e805626270e67732156a3e85af47\nparent b441aa20466e4bc4cf086cc8c7a7cab5942ae771\nauthor BooksBaum <15612932+Booksbaum@users.noreply.github.com> 1628597712 +0200\ncommitter BooksBaum <15612932+Booksbaum@users.noreply.github.com> 1629220986 +0200\n\nFix errors from `rebase master`\n\nNote:\n2nd Assist description is moved down: generated doc tests extracts now\nall tests (previously only the first one). But it uses the first\n`Assist` name -- which is the wrong one for the 2nd test. And 2nd assist\nis currently disabled -> would fail anyway.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5b9f8e7e8e309eb77ec8129ffeb555ff1435cc0f", "html_url": "https://github.com/rust-lang/rust/commit/5b9f8e7e8e309eb77ec8129ffeb555ff1435cc0f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5b9f8e7e8e309eb77ec8129ffeb555ff1435cc0f/comments", "author": {"login": "Booksbaum", "id": 15612932, "node_id": "MDQ6VXNlcjE1NjEyOTMy", "avatar_url": "https://avatars.githubusercontent.com/u/15612932?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Booksbaum", "html_url": "https://github.com/Booksbaum", "followers_url": "https://api.github.com/users/Booksbaum/followers", "following_url": "https://api.github.com/users/Booksbaum/following{/other_user}", "gists_url": "https://api.github.com/users/Booksbaum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Booksbaum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Booksbaum/subscriptions", "organizations_url": "https://api.github.com/users/Booksbaum/orgs", "repos_url": "https://api.github.com/users/Booksbaum/repos", "events_url": "https://api.github.com/users/Booksbaum/events{/privacy}", "received_events_url": "https://api.github.com/users/Booksbaum/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Booksbaum", "id": 15612932, "node_id": "MDQ6VXNlcjE1NjEyOTMy", "avatar_url": "https://avatars.githubusercontent.com/u/15612932?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Booksbaum", "html_url": "https://github.com/Booksbaum", "followers_url": "https://api.github.com/users/Booksbaum/followers", "following_url": "https://api.github.com/users/Booksbaum/following{/other_user}", "gists_url": "https://api.github.com/users/Booksbaum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Booksbaum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Booksbaum/subscriptions", "organizations_url": "https://api.github.com/users/Booksbaum/orgs", "repos_url": "https://api.github.com/users/Booksbaum/repos", "events_url": "https://api.github.com/users/Booksbaum/events{/privacy}", "received_events_url": "https://api.github.com/users/Booksbaum/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b441aa20466e4bc4cf086cc8c7a7cab5942ae771", "url": "https://api.github.com/repos/rust-lang/rust/commits/b441aa20466e4bc4cf086cc8c7a7cab5942ae771", "html_url": "https://github.com/rust-lang/rust/commit/b441aa20466e4bc4cf086cc8c7a7cab5942ae771"}], "stats": {"total": 14, "additions": 6, "deletions": 8}, "files": [{"sha": "a1aa0a04572b69dafbb697b9a04e4afcb9f21398", "filename": "crates/ide_assists/src/handlers/destructure_tuple_binding.rs", "status": "modified", "additions": 6, "deletions": 8, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/5b9f8e7e8e309eb77ec8129ffeb555ff1435cc0f/crates%2Fide_assists%2Fsrc%2Fhandlers%2Fdestructure_tuple_binding.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5b9f8e7e8e309eb77ec8129ffeb555ff1435cc0f/crates%2Fide_assists%2Fsrc%2Fhandlers%2Fdestructure_tuple_binding.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide_assists%2Fsrc%2Fhandlers%2Fdestructure_tuple_binding.rs?ref=5b9f8e7e8e309eb77ec8129ffeb555ff1435cc0f", "patch": "@@ -28,9 +28,11 @@ use crate::assist_context::{AssistBuilder, AssistContext, Assists};\n //     let v = _0;\n // }\n // ```\n-//\n-//\n-// And (currently disabled):\n+pub(crate) fn destructure_tuple_binding(acc: &mut Assists, ctx: &AssistContext) -> Option<()> {\n+    destructure_tuple_binding_impl(acc, ctx, false)\n+}\n+\n+// And when `with_sub_pattern` enabled (currently disabled):\n // Assist: destructure_tuple_binding_in_sub_pattern\n //\n // Destructures tuple items in sub-pattern (after `@`).\n@@ -48,10 +50,6 @@ use crate::assist_context::{AssistBuilder, AssistContext, Assists};\n //     let v = _0;\n // }\n // ```\n-pub(crate) fn destructure_tuple_binding(acc: &mut Assists, ctx: &AssistContext) -> Option<()> {\n-    destructure_tuple_binding_impl(acc, ctx, false)\n-}\n-\n pub(crate) fn destructure_tuple_binding_impl(\n     acc: &mut Assists,\n     ctx: &AssistContext,\n@@ -96,7 +94,7 @@ fn collect_data(ident_pat: IdentPat, ctx: &AssistContext) -> Option<TupleData> {\n \n     let ty = ctx.sema.type_of_pat(&ident_pat.clone().into())?;\n     // might be reference\n-    let ty = ty.strip_references();\n+    let ty = ty.adjusted().strip_references();\n     // must be tuple\n     let field_types = ty.tuple_fields(ctx.db());\n     if field_types.is_empty() {"}]}