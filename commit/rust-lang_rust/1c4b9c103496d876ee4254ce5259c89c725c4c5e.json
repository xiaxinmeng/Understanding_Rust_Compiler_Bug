{"sha": "1c4b9c103496d876ee4254ce5259c89c725c4c5e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFjNGI5YzEwMzQ5NmQ4NzZlZTQyNTRjZTUyNTljODljNzI1YzRjNWU=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2018-03-16T18:42:42Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2018-03-16T19:47:49Z"}, "message": "ci: Disable optimized tests for asm.js\n\nSince all tests are compiled with LTO effectively in Emscripten this commit\ndisables optimizations to hopefully squeeze some more time out of the CI\nbuilders.\n\nCloses #48826", "tree": {"sha": "5e4de4b255276f53dde1d690bf1beb0cef7a93d8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5e4de4b255276f53dde1d690bf1beb0cef7a93d8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1c4b9c103496d876ee4254ce5259c89c725c4c5e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1c4b9c103496d876ee4254ce5259c89c725c4c5e", "html_url": "https://github.com/rust-lang/rust/commit/1c4b9c103496d876ee4254ce5259c89c725c4c5e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1c4b9c103496d876ee4254ce5259c89c725c4c5e/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cc34ca1c9787fde84116637a0cee92fc5e375e3d", "url": "https://api.github.com/repos/rust-lang/rust/commits/cc34ca1c9787fde84116637a0cee92fc5e375e3d", "html_url": "https://github.com/rust-lang/rust/commit/cc34ca1c9787fde84116637a0cee92fc5e375e3d"}], "stats": {"total": 29, "additions": 25, "deletions": 4}, "files": [{"sha": "be1b161f33e08785c114a6c8dc33e0a63b02bbb0", "filename": "src/ci/docker/asmjs/Dockerfile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1c4b9c103496d876ee4254ce5259c89c725c4c5e/src%2Fci%2Fdocker%2Fasmjs%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/1c4b9c103496d876ee4254ce5259c89c725c4c5e/src%2Fci%2Fdocker%2Fasmjs%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fasmjs%2FDockerfile?ref=1c4b9c103496d876ee4254ce5259c89c725c4c5e", "patch": "@@ -29,6 +29,6 @@ ENV EM_CONFIG=/emsdk-portable/.emscripten\n \n ENV TARGETS=asmjs-unknown-emscripten\n \n-ENV RUST_CONFIGURE_ARGS --enable-emscripten\n+ENV RUST_CONFIGURE_ARGS --enable-emscripten --disable-optimize-tests\n \n ENV SCRIPT python2.7 ../x.py test --target $TARGETS"}, {"sha": "d59fe8d813d249af0e9d4782519299c9d6b745a5", "filename": "src/test/run-pass/deep.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/1c4b9c103496d876ee4254ce5259c89c725c4c5e/src%2Ftest%2Frun-pass%2Fdeep.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1c4b9c103496d876ee4254ce5259c89c725c4c5e/src%2Ftest%2Frun-pass%2Fdeep.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fdeep.rs?ref=1c4b9c103496d876ee4254ce5259c89c725c4c5e", "patch": "@@ -8,9 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-\n-\n-\n+// ignore-emscripten apparently blows the stack\n \n fn f(x: isize) -> isize {\n     if x == 1 { return 1; } else { let y: isize = 1 + f(x - 1); return y; }"}, {"sha": "d44f78922c70221b410ae3dcc47d87ccaf0fc082", "filename": "src/test/run-pass/float-int-invalid-const-cast.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1c4b9c103496d876ee4254ce5259c89c725c4c5e/src%2Ftest%2Frun-pass%2Ffloat-int-invalid-const-cast.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1c4b9c103496d876ee4254ce5259c89c725c4c5e/src%2Ftest%2Frun-pass%2Ffloat-int-invalid-const-cast.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Ffloat-int-invalid-const-cast.rs?ref=1c4b9c103496d876ee4254ce5259c89c725c4c5e", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+// ignore-emscripten no i128 support\n+\n #![feature(i128_type)]\n #![deny(const_err)]\n "}, {"sha": "cdfad51e648a3b03f65d0843686bb5e1673ba5d1", "filename": "src/test/run-pass/intrinsics-integer.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1c4b9c103496d876ee4254ce5259c89c725c4c5e/src%2Ftest%2Frun-pass%2Fintrinsics-integer.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1c4b9c103496d876ee4254ce5259c89c725c4c5e/src%2Ftest%2Frun-pass%2Fintrinsics-integer.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fintrinsics-integer.rs?ref=1c4b9c103496d876ee4254ce5259c89c725c4c5e", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+// ignore-emscripten no i128 support\n+\n #![feature(intrinsics, i128_type)]\n \n mod rusti {"}, {"sha": "5132405a9d583a00ed4a0d8850878500817bacb5", "filename": "src/test/run-pass/intrinsics-math.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1c4b9c103496d876ee4254ce5259c89c725c4c5e/src%2Ftest%2Frun-pass%2Fintrinsics-math.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1c4b9c103496d876ee4254ce5259c89c725c4c5e/src%2Ftest%2Frun-pass%2Fintrinsics-math.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fintrinsics-math.rs?ref=1c4b9c103496d876ee4254ce5259c89c725c4c5e", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+// ignore-emscripten fma not implemented in emscripten\n+\n macro_rules! assert_approx_eq {\n     ($a:expr, $b:expr) => ({\n         let (a, b) = (&$a, &$b);"}, {"sha": "d059a46b4df123d3456d2b2e26ec3f1c99ed6e1a", "filename": "src/test/run-pass/issue-32947.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1c4b9c103496d876ee4254ce5259c89c725c4c5e/src%2Ftest%2Frun-pass%2Fissue-32947.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1c4b9c103496d876ee4254ce5259c89c725c4c5e/src%2Ftest%2Frun-pass%2Fissue-32947.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissue-32947.rs?ref=1c4b9c103496d876ee4254ce5259c89c725c4c5e", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+// ignore-emscripten FIXME(#45351)\n+\n #![feature(repr_simd, test)]\n \n extern crate test;"}, {"sha": "2368ba8a110be28206c27beeb03b7b2a77bab0b4", "filename": "src/test/run-pass/issue-38074.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1c4b9c103496d876ee4254ce5259c89c725c4c5e/src%2Ftest%2Frun-pass%2Fissue-38074.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1c4b9c103496d876ee4254ce5259c89c725c4c5e/src%2Ftest%2Frun-pass%2Fissue-38074.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissue-38074.rs?ref=1c4b9c103496d876ee4254ce5259c89c725c4c5e", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+// ignore-emscripten FIXME(#45351)\n+\n #![feature(platform_intrinsics, repr_simd)]\n \n extern \"platform-intrinsic\" {"}, {"sha": "9873a8c2bf44f8eba4f6b5a1c534dc7d8e73dbb9", "filename": "src/test/run-pass/issue-39720.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1c4b9c103496d876ee4254ce5259c89c725c4c5e/src%2Ftest%2Frun-pass%2Fissue-39720.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1c4b9c103496d876ee4254ce5259c89c725c4c5e/src%2Ftest%2Frun-pass%2Fissue-39720.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissue-39720.rs?ref=1c4b9c103496d876ee4254ce5259c89c725c4c5e", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+// ignore-emscripten FIXME(#45351)\n+\n #![feature(repr_simd, platform_intrinsics)]\n \n #[repr(C)]"}, {"sha": "b50852175776cb9d35e64081a219aca9beca5f6b", "filename": "src/test/run-pass/mir_heavy_promoted.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1c4b9c103496d876ee4254ce5259c89c725c4c5e/src%2Ftest%2Frun-pass%2Fmir_heavy_promoted.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1c4b9c103496d876ee4254ce5259c89c725c4c5e/src%2Ftest%2Frun-pass%2Fmir_heavy_promoted.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fmir_heavy_promoted.rs?ref=1c4b9c103496d876ee4254ce5259c89c725c4c5e", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+// ignore-emscripten apparently only works in optimized mode\n+\n const TEST_DATA: [u8; 32 * 1024 * 1024] = [42; 32 * 1024 * 1024];\n \n // Check that the promoted copy of TEST_DATA doesn't"}, {"sha": "599c6dfd31d906b5de6b98f43c5ccbc25b797c2d", "filename": "src/test/run-pass/next-power-of-two-overflow-debug.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/1c4b9c103496d876ee4254ce5259c89c725c4c5e/src%2Ftest%2Frun-pass%2Fnext-power-of-two-overflow-debug.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1c4b9c103496d876ee4254ce5259c89c725c4c5e/src%2Ftest%2Frun-pass%2Fnext-power-of-two-overflow-debug.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fnext-power-of-two-overflow-debug.rs?ref=1c4b9c103496d876ee4254ce5259c89c725c4c5e", "patch": "@@ -10,6 +10,7 @@\n \n // compile-flags: -C debug_assertions=yes\n // ignore-wasm32-bare compiled with panic=abort by default\n+// ignore-emscripten dies with an LLVM error\n \n #![feature(i128_type)]\n "}, {"sha": "f2312b70be679aa3bcdd9931eccfe6abdc51fabf", "filename": "src/test/run-pass/next-power-of-two-overflow-ndebug.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/1c4b9c103496d876ee4254ce5259c89c725c4c5e/src%2Ftest%2Frun-pass%2Fnext-power-of-two-overflow-ndebug.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1c4b9c103496d876ee4254ce5259c89c725c4c5e/src%2Ftest%2Frun-pass%2Fnext-power-of-two-overflow-ndebug.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fnext-power-of-two-overflow-ndebug.rs?ref=1c4b9c103496d876ee4254ce5259c89c725c4c5e", "patch": "@@ -9,6 +9,7 @@\n // except according to those terms.\n \n // compile-flags: -C debug_assertions=no\n+// ignore-emscripten dies with an LLVM error\n \n #![feature(i128_type)]\n "}, {"sha": "e725b25efee520ab92d16a46cd0e55643173a578", "filename": "src/test/run-pass/packed-struct-borrow-element.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/1c4b9c103496d876ee4254ce5259c89c725c4c5e/src%2Ftest%2Frun-pass%2Fpacked-struct-borrow-element.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1c4b9c103496d876ee4254ce5259c89c725c4c5e/src%2Ftest%2Frun-pass%2Fpacked-struct-borrow-element.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fpacked-struct-borrow-element.rs?ref=1c4b9c103496d876ee4254ce5259c89c725c4c5e", "patch": "@@ -8,6 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+// ignore-emscripten weird assertion?\n \n #[repr(packed)]\n struct Foo {"}, {"sha": "ac6d0c697ecc04bb8dc524f3bae9b09dd0a9576b", "filename": "src/test/run-pass/simd-intrinsic-generic-arithmetic.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1c4b9c103496d876ee4254ce5259c89c725c4c5e/src%2Ftest%2Frun-pass%2Fsimd-intrinsic-generic-arithmetic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1c4b9c103496d876ee4254ce5259c89c725c4c5e/src%2Ftest%2Frun-pass%2Fsimd-intrinsic-generic-arithmetic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fsimd-intrinsic-generic-arithmetic.rs?ref=1c4b9c103496d876ee4254ce5259c89c725c4c5e", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+// ignore-emscripten FIXME(#45351) hits an LLVM assert\n+\n #![feature(repr_simd, platform_intrinsics)]\n \n #[repr(simd)]"}, {"sha": "d27378ba893082ed1d5385624e4ece0e23604d10", "filename": "src/test/run-pass/simd-intrinsic-generic-comparison.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1c4b9c103496d876ee4254ce5259c89c725c4c5e/src%2Ftest%2Frun-pass%2Fsimd-intrinsic-generic-comparison.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1c4b9c103496d876ee4254ce5259c89c725c4c5e/src%2Ftest%2Frun-pass%2Fsimd-intrinsic-generic-comparison.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fsimd-intrinsic-generic-comparison.rs?ref=1c4b9c103496d876ee4254ce5259c89c725c4c5e", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+// ignore-emscripten FIXME(#45351) hits an LLVM assert\n+\n #![feature(repr_simd, platform_intrinsics, concat_idents)]\n #![allow(non_camel_case_types)]\n "}, {"sha": "72fcef27a665bc7b00e80fb1bdf727141c6ba086", "filename": "src/test/run-pass/simd-intrinsic-generic-elements.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1c4b9c103496d876ee4254ce5259c89c725c4c5e/src%2Ftest%2Frun-pass%2Fsimd-intrinsic-generic-elements.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1c4b9c103496d876ee4254ce5259c89c725c4c5e/src%2Ftest%2Frun-pass%2Fsimd-intrinsic-generic-elements.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fsimd-intrinsic-generic-elements.rs?ref=1c4b9c103496d876ee4254ce5259c89c725c4c5e", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+// ignore-emscripten FIXME(#45351) hits an LLVM assert\n+\n #![feature(repr_simd, platform_intrinsics)]\n \n #[repr(simd)]"}]}