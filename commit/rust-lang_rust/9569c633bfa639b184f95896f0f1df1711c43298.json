{"sha": "9569c633bfa639b184f95896f0f1df1711c43298", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk1NjljNjMzYmZhNjM5YjE4NGY5NTg5NmYwZjFkZjE3MTFjNDMyOTg=", "commit": {"author": {"name": "Jack Fransham", "email": "jack.fransham@cuvva.co", "date": "2015-11-29T14:29:04Z"}, "committer": {"name": "Jack Fransham", "email": "jack.fransham@cuvva.co", "date": "2015-11-29T14:29:04Z"}, "message": "Avoid showing no-derivable-lifetime error message when there are no arguments", "tree": {"sha": "4e00af1d1b49d9de3dbac75d6bf006b265fa990d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4e00af1d1b49d9de3dbac75d6bf006b265fa990d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9569c633bfa639b184f95896f0f1df1711c43298", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9569c633bfa639b184f95896f0f1df1711c43298", "html_url": "https://github.com/rust-lang/rust/commit/9569c633bfa639b184f95896f0f1df1711c43298", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9569c633bfa639b184f95896f0f1df1711c43298/comments", "author": null, "committer": null, "parents": [{"sha": "a1a48c42b646c0d3171897aa4b8087ec7446ef92", "url": "https://api.github.com/repos/rust-lang/rust/commits/a1a48c42b646c0d3171897aa4b8087ec7446ef92", "html_url": "https://github.com/rust-lang/rust/commit/a1a48c42b646c0d3171897aa4b8087ec7446ef92"}], "stats": {"total": 14, "additions": 7, "deletions": 7}, "files": [{"sha": "d8fc76c76f9e84aaeb4c915eaa0f28d57c9ed989", "filename": "src/librustc_typeck/astconv.rs", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/9569c633bfa639b184f95896f0f1df1711c43298/src%2Flibrustc_typeck%2Fastconv.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9569c633bfa639b184f95896f0f1df1711c43298/src%2Flibrustc_typeck%2Fastconv.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fastconv.rs?ref=9569c633bfa639b184f95896f0f1df1711c43298", "patch": "@@ -234,7 +234,13 @@ fn report_elision_failure(\n         }\n     }\n \n-    if !any_lifetimes {\n+    if len == 0 {\n+        fileline_help!(tcx.sess, default_span,\n+                       \"this function's return type contains a borrowed value, but \\\n+                        there is no value for it to be borrowed from\");\n+        fileline_help!(tcx.sess, default_span,\n+                       \"consider giving it a 'static lifetime\");\n+    } else if !any_lifetimes {\n         fileline_help!(tcx.sess, default_span,\n                        \"this function's return type contains a borrowed value with \\\n                         an elided lifetime, but the lifetime cannot be derived from \\\n@@ -247,12 +253,6 @@ fn report_elision_failure(\n                        \"this function's return type contains a borrowed value, but \\\n                         the signature does not say which {} it is borrowed from\",\n                        m);\n-    } else if len == 0 {\n-        fileline_help!(tcx.sess, default_span,\n-                       \"this function's return type contains a borrowed value, but \\\n-                        there is no value for it to be borrowed from\");\n-        fileline_help!(tcx.sess, default_span,\n-                       \"consider giving it a 'static lifetime\");\n     } else {\n         fileline_help!(tcx.sess, default_span,\n                        \"this function's return type contains a borrowed value, but \\"}]}