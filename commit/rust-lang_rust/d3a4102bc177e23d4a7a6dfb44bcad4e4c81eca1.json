{"sha": "d3a4102bc177e23d4a7a6dfb44bcad4e4c81eca1", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQzYTQxMDJiYzE3N2UyM2Q0YTdhNmRmYjQ0YmNhZDRlNGM4MWVjYTE=", "commit": {"author": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2011-07-05T04:20:18Z"}, "committer": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2011-07-05T04:20:18Z"}, "message": "stdlib: Add an inefficient implementation of ivec::pop", "tree": {"sha": "68f313dbffc8aa77def88c1ffd191f492903f505", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/68f313dbffc8aa77def88c1ffd191f492903f505"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d3a4102bc177e23d4a7a6dfb44bcad4e4c81eca1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d3a4102bc177e23d4a7a6dfb44bcad4e4c81eca1", "html_url": "https://github.com/rust-lang/rust/commit/d3a4102bc177e23d4a7a6dfb44bcad4e4c81eca1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d3a4102bc177e23d4a7a6dfb44bcad4e4c81eca1/comments", "author": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5d2c1896311cdd5cd244c4a16dfde807974671cf", "url": "https://api.github.com/repos/rust-lang/rust/commits/5d2c1896311cdd5cd244c4a16dfde807974671cf", "html_url": "https://github.com/rust-lang/rust/commit/5d2c1896311cdd5cd244c4a16dfde807974671cf"}], "stats": {"total": 35, "additions": 34, "deletions": 1}, "files": [{"sha": "91912f7dc5a2463c61a1d6f0082892498947dfa5", "filename": "src/lib/ivec.rs", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/d3a4102bc177e23d4a7a6dfb44bcad4e4c81eca1/src%2Flib%2Fivec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d3a4102bc177e23d4a7a6dfb44bcad4e4c81eca1/src%2Flib%2Fivec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib%2Fivec.rs?ref=d3a4102bc177e23d4a7a6dfb44bcad4e4c81eca1", "patch": "@@ -104,7 +104,17 @@ fn slice_mut[T](&T[mutable?] v, uint start, uint end) -> T[mutable] {\n \n // Mutators\n \n-// TODO\n+// TODO: Write this, unsafely, in a way that's not O(n).\n+fn pop[T](&mutable T[mutable?] v) -> T {\n+    auto ln = len(v);\n+    assert (ln > 0u);\n+    ln -= 1u;\n+    auto e = v.(ln);\n+    v = slice(v, 0u, ln);\n+    ret e;\n+}\n+\n+// TODO: More.\n \n \n // Appending"}, {"sha": "f1e5aa5b632bec37919112a67db342b8f70f97a6", "filename": "src/test/run-pass/lib-ivec.rs", "status": "modified", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/d3a4102bc177e23d4a7a6dfb44bcad4e4c81eca1/src%2Ftest%2Frun-pass%2Flib-ivec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d3a4102bc177e23d4a7a6dfb44bcad4e4c81eca1/src%2Ftest%2Frun-pass%2Flib-ivec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Flib-ivec.rs?ref=d3a4102bc177e23d4a7a6dfb44bcad4e4c81eca1", "patch": "@@ -106,6 +106,26 @@ fn test_slice() {\n     assert (v.(4) == 6);\n }\n \n+fn test_pop() {\n+    // Test on-stack pop.\n+    auto v = ~[ 1, 2, 3 ];\n+    auto e = ivec::pop(v);\n+    assert (ivec::len(v) == 2u);\n+    assert (v.(0) == 1);\n+    assert (v.(1) == 2);\n+    assert (e == 3);\n+\n+    // Test on-heap pop.\n+    v = ~[ 1, 2, 3, 4, 5 ];\n+    e = ivec::pop(v);\n+    assert (ivec::len(v) == 4u);\n+    assert (v.(0) == 1);\n+    assert (v.(1) == 2);\n+    assert (v.(2) == 3);\n+    assert (v.(3) == 4);\n+    assert (e == 5);\n+}\n+\n fn test_grow() {\n     // Test on-stack grow().\n     auto v = ~[];\n@@ -154,6 +174,9 @@ fn main() {\n     test_last();\n     test_slice();\n \n+    // Mutators\n+    test_pop();\n+\n     // Appending\n     test_grow();\n     test_grow_fn();"}]}