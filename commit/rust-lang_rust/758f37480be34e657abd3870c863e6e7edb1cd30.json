{"sha": "758f37480be34e657abd3870c863e6e7edb1cd30", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc1OGYzNzQ4MGJlMzRlNjU3YWJkMzg3MGM4NjNlNmU3ZWRiMWNkMzA=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2017-03-09T00:20:25Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2017-03-09T00:20:25Z"}, "message": "Auto merge of #40371 - arielb1:bean-counter, r=alexcrichton\n\nadd some disk usage accounting\n\nTry to figure out why we are out of free space\n\nr? @alexcrichton", "tree": {"sha": "937d05da780c6b52185f8a3c53d646fc70c2a6e1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/937d05da780c6b52185f8a3c53d646fc70c2a6e1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/758f37480be34e657abd3870c863e6e7edb1cd30", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/758f37480be34e657abd3870c863e6e7edb1cd30", "html_url": "https://github.com/rust-lang/rust/commit/758f37480be34e657abd3870c863e6e7edb1cd30", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/758f37480be34e657abd3870c863e6e7edb1cd30/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ee60afa09465cedfa08be04e59b6a8ccfd54685f", "url": "https://api.github.com/repos/rust-lang/rust/commits/ee60afa09465cedfa08be04e59b6a8ccfd54685f", "html_url": "https://github.com/rust-lang/rust/commit/ee60afa09465cedfa08be04e59b6a8ccfd54685f"}, {"sha": "8bbbfec96f92790874f5d947a8fd21f4ed6fa1f8", "url": "https://api.github.com/repos/rust-lang/rust/commits/8bbbfec96f92790874f5d947a8fd21f4ed6fa1f8", "html_url": "https://github.com/rust-lang/rust/commit/8bbbfec96f92790874f5d947a8fd21f4ed6fa1f8"}], "stats": {"total": 18, "additions": 18, "deletions": 0}, "files": [{"sha": "2f12408242f47c2f5bf58a2f5b6560e1830c8dee", "filename": ".travis.yml", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/758f37480be34e657abd3870c863e6e7edb1cd30/.travis.yml", "raw_url": "https://github.com/rust-lang/rust/raw/758f37480be34e657abd3870c863e6e7edb1cd30/.travis.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.travis.yml?ref=758f37480be34e657abd3870c863e6e7edb1cd30", "patch": "@@ -98,6 +98,12 @@ env:\n     # AWS_SECRET_ACCESS_KEY=...\n     - secure: \"Pixhh0hXDqGCdOyLtGFjli3J2AtDWIpyb2btIrLe956nCBDRutRoMm6rv5DI9sFZN07Mms7VzNNvhc9wCW1y63JAm414d2Co7Ob8kWMZlz9l9t7ACHuktUiis8yr+S4Quq1Vqd6pqi7pf2J++UxC8R/uLeqVrubzr6+X7AbmEFE=\"\n \n+before_script:\n+  - >\n+      echo \"#### Disk usage before running script:\";\n+      df -h;\n+      du . | sort -nr | head -n100\n+\n script:\n   - >\n       if [ \"$ALLOW_PR\" = \"\" ] && [ \"$TRAVIS_BRANCH\" != \"auto\" ]; then\n@@ -110,6 +116,18 @@ script:\n           src/ci/docker/run.sh $IMAGE;\n       fi\n \n+after_success:\n+  - >\n+      echo \"#### Build successful; Disk usage after running script:\";\n+      df -h;\n+      du . | sort -nr | head -n100\n+\n+after_failure:\n+  - >\n+      echo \"#### Build failed; Disk usage after running script:\";\n+      df -h;\n+      du . | sort -nr | head -n100\n+\n # Save tagged docker images we created and load them if they're available\n before_cache:\n   - docker history -q rust-ci |"}]}