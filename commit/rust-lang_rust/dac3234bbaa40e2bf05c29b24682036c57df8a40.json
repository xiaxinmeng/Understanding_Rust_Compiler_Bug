{"sha": "dac3234bbaa40e2bf05c29b24682036c57df8a40", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRhYzMyMzRiYmFhNDBlMmJmMDVjMjliMjQ2ODIwMzZjNTdkZjhhNDA=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2014-10-27T16:07:40Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2014-10-27T22:12:29Z"}, "message": "rollup merge of #18321 : chastell/guide_refresh_testing_output", "tree": {"sha": "1776b6ad429c4218026bbe9ba694a58c53a8e72f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1776b6ad429c4218026bbe9ba694a58c53a8e72f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/dac3234bbaa40e2bf05c29b24682036c57df8a40", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/dac3234bbaa40e2bf05c29b24682036c57df8a40", "html_url": "https://github.com/rust-lang/rust/commit/dac3234bbaa40e2bf05c29b24682036c57df8a40", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/dac3234bbaa40e2bf05c29b24682036c57df8a40/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "54647bd317d548da36c020b7912ba5fd5c7b5793", "url": "https://api.github.com/repos/rust-lang/rust/commits/54647bd317d548da36c020b7912ba5fd5c7b5793", "html_url": "https://github.com/rust-lang/rust/commit/54647bd317d548da36c020b7912ba5fd5c7b5793"}, {"sha": "eb903b484389259cdfcae068776d306ee1293d66", "url": "https://api.github.com/repos/rust-lang/rust/commits/eb903b484389259cdfcae068776d306ee1293d66", "html_url": "https://github.com/rust-lang/rust/commit/eb903b484389259cdfcae068776d306ee1293d66"}], "stats": {"total": 133, "additions": 75, "deletions": 58}, "files": [{"sha": "876157409c55714f4e75879df470a6379790947f", "filename": "src/doc/guide.md", "status": "modified", "additions": 75, "deletions": 58, "changes": 133, "blob_url": "https://github.com/rust-lang/rust/blob/dac3234bbaa40e2bf05c29b24682036c57df8a40/src%2Fdoc%2Fguide.md", "raw_url": "https://github.com/rust-lang/rust/raw/dac3234bbaa40e2bf05c29b24682036c57df8a40/src%2Fdoc%2Fguide.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Fguide.md?ref=dac3234bbaa40e2bf05c29b24682036c57df8a40", "patch": "@@ -1793,7 +1793,7 @@ Finally, Cargo generated a hello, world for us. Check out `src/main.rs`:\n \n ```{rust}\n fn main() {\n-    println!(\"Hello, world!\");\n+    println!(\"Hello, world!\")\n }\n ```\n \n@@ -2682,12 +2682,12 @@ like this:\n \n ```\n fn main() {\n-    println!(\"Hello, world!\");\n+    println!(\"Hello, world!\")\n }\n \n mod hello {\n     fn print_hello() {\n-        println!(\"Hello, world!\");\n+        println!(\"Hello, world!\")\n     }\n }\n ```\n@@ -2721,7 +2721,7 @@ fn main() {\n \n mod hello {\n     fn print_hello() {\n-        println!(\"Hello, world!\");\n+        println!(\"Hello, world!\")\n     }\n }\n ```\n@@ -2744,7 +2744,7 @@ fn main() {\n \n mod hello {\n     pub fn print_hello() {\n-        println!(\"Hello, world!\");\n+        println!(\"Hello, world!\")\n     }\n }\n ```\n@@ -2921,15 +2921,11 @@ it `false`, so this test should fail. Let's try it!\n ```{notrust,ignore}\n $ cargo test\n    Compiling testing v0.0.1 (file:///home/you/projects/testing)\n-/home/you/projects/testing/src/main.rs:1:1: 3:2 warning: code is never used: `main`, #[warn(dead_code)] on by default\n+/home/you/projects/testing/src/main.rs:1:1: 3:2 warning: function is never used: `main`, #[warn(dead_code)] on by default\n /home/you/projects/testing/src/main.rs:1 fn main() {\n-/home/you/projects/testing/src/main.rs:2     println!(\"Hello, world\");\n+/home/you/projects/testing/src/main.rs:2     println!(\"Hello, world!\")\n /home/you/projects/testing/src/main.rs:3 }\n-\n-running 0 tests\n-\n-test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured\n-\n+     Running target/lib-654ce120f310a3a5\n \n running 1 test\n test foo ... FAILED\n@@ -2946,7 +2942,7 @@ failures:\n \n test result: FAILED. 0 passed; 1 failed; 0 ignored; 0 measured\n \n-task '<main>' failed at 'Some tests failed', /home/you/src/rust/src/libtest/lib.rs:242\n+task '<main>' failed at 'Some tests failed', /home/you/src/rust/src/libtest/lib.rs:243\n ```\n \n Lots of output! Let's break this down:\n@@ -2960,9 +2956,9 @@ You can run all of your tests with `cargo test`. This runs both your tests in\n `tests`, as well as the tests you put inside of your crate.\n \n ```{notrust,ignore}\n-/home/you/projects/testing/src/main.rs:1:1: 3:2 warning: code is never used: `main`, #[warn(dead_code)] on by default\n+/home/you/projects/testing/src/main.rs:1:1: 3:2 warning: function is never used: `main`, #[warn(dead_code)] on by default\n /home/you/projects/testing/src/main.rs:1 fn main() {\n-/home/you/projects/testing/src/main.rs:2     println!(\"Hello, world\");\n+/home/you/projects/testing/src/main.rs:2     println!(\"Hello, world!\")\n /home/you/projects/testing/src/main.rs:3 }\n ```\n \n@@ -2974,18 +2970,8 @@ We'll turn this lint off for just this function soon. For now, just ignore this\n output.\n \n ```{notrust,ignore}\n-running 0 tests\n+     Running target/lib-654ce120f310a3a5\n \n-test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured\n-```\n-\n-Wait a minute, zero tests? Didn't we define one? Yup. This output is from\n-attempting to run the tests in our crate, of which we don't have any.\n-You'll note that Rust reports on several kinds of tests: passed, failed,\n-ignored, and measured. The 'measured' tests refer to benchmark tests, which\n-we'll cover soon enough!\n-\n-```{notrust,ignore}\n running 1 test\n test foo ... FAILED\n ```\n@@ -3008,7 +2994,7 @@ failures:\n \n test result: FAILED. 0 passed; 1 failed; 0 ignored; 0 measured\n \n-task '<main>' failed at 'Some tests failed', /home/you/src/rust/src/libtest/lib.rs:242\n+task '<main>' failed at 'Some tests failed', /home/you/src/rust/src/libtest/lib.rs:243\n ```\n \n After all the tests run, Rust will show us any output from our failed tests.\n@@ -3029,29 +3015,30 @@ And then try to run our tests again:\n ```{notrust,ignore}\n $ cargo test\n    Compiling testing v0.0.1 (file:///home/you/projects/testing)\n-/home/you/projects/testing/src/main.rs:1:1: 3:2 warning: code is never used: `main`, #[warn(dead_code)] on by default\n-/home/you/projects/testing/src/main.rs:1 fn main() {\n-/home/you/projects/testing/src/main.rs:2     println!(\"Hello, world\");\n-/home/you/projects/testing/src/main.rs:3 }\n-\n-running 0 tests\n-\n-test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured\n-\n+     Running target/lib-654ce120f310a3a5\n \n running 1 test\n test foo ... ok\n \n test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured\n+\n+     Running target/testing-6d7518593c7c3ee5\n+\n+running 0 tests\n+\n+test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured\n ```\n \n-Nice! Our test passes, as we expected. Let's get rid of that warning for our `main`\n-function. Change your `src/main.rs` to look like this:\n+Nice! Our test passes, as we expected. Note how we didn't get the\n+`main` warning this time? This is because `src/main.rs` didn't\n+need recompiling, but we'll get that warning again if we\n+change (and recompile) that file. Let's get rid of that\n+warning; change your `src/main.rs` to look like this:\n \n ```{rust}\n #[cfg(not(test))]\n fn main() {\n-    println!(\"Hello, world\");\n+    println!(\"Hello, world!\")\n }\n ```\n \n@@ -3062,21 +3049,24 @@ our tests, it sets things up so that `cfg(test)` is true. But we want to only\n include `main` when it's _not_ true. So we use `not` to negate things:\n `cfg(not(test))` will only compile our code when the `cfg(test)` is false.\n \n-With this attribute, we won't get the warning:\n+With this attribute we won't get the warning (even\n+though `src/main.rs` gets recompiled this time):\n \n ```{notrust,ignore}\n $ cargo test\n    Compiling testing v0.0.1 (file:///home/you/projects/testing)\n-\n-running 0 tests\n-\n-test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured\n-\n+     Running target/lib-654ce120f310a3a5\n \n running 1 test\n test foo ... ok\n \n test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured\n+\n+     Running target/testing-6d7518593c7c3ee5\n+\n+running 0 tests\n+\n+test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured\n ```\n \n Nice. Okay, let's write a real test now. Change your `tests/lib.rs`\n@@ -3133,7 +3123,7 @@ extern crate testing;\n \n #[cfg(not(test))]\n fn main() {\n-    println!(\"Hello, world\");\n+    println!(\"Hello, world!\")\n }\n ```\n \n@@ -3156,21 +3146,30 @@ Let's give it a run:\n ```{ignore,notrust}\n $ cargo test\n    Compiling testing v0.0.1 (file:///home/you/projects/testing)\n+     Running target/lib-654ce120f310a3a5\n+\n+running 1 test\n+test math_checks_out ... ok\n+\n+test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured\n+\n+     Running target/testing-6d7518593c7c3ee5\n \n running 0 tests\n \n test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured\n \n+     Running target/testing-8a94b31f7fd2e8fe\n \n running 0 tests\n \n test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured\n \n+   Doc-tests testing\n \n-running 1 test\n-test math_checks_out ... ok\n+running 0 tests\n \n-test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured\n+test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured\n ```\n \n Great! One test passed. We've got an integration test showing that our public\n@@ -3196,21 +3195,30 @@ If you run `cargo test`, you should get the same output:\n ```{ignore,notrust}\n $ cargo test\n    Compiling testing v0.0.1 (file:///home/you/projects/testing)\n+     Running target/lib-654ce120f310a3a5\n+\n+running 1 test\n+test math_checks_out ... ok\n+\n+test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured\n+\n+     Running target/testing-6d7518593c7c3ee5\n \n running 0 tests\n \n test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured\n \n+     Running target/testing-8a94b31f7fd2e8fe\n \n running 0 tests\n \n test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured\n \n+   Doc-tests testing\n \n-running 1 test\n-test math_checks_out ... ok\n+running 0 tests\n \n-test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured\n+test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured\n ```\n \n If we tried to write a test for these two new functions, it wouldn't\n@@ -3283,23 +3291,32 @@ Let's give it a shot:\n ```{ignore,notrust}\n $ cargo test\n    Compiling testing v0.0.1 (file:///home/you/projects/testing)\n+     Running target/lib-654ce120f310a3a5\n+\n+running 1 test\n+test math_checks_out ... ok\n+\n+test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured\n+\n+     Running target/testing-6d7518593c7c3ee5\n+\n+running 0 tests\n+\n+test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured\n+\n+     Running target/testing-8a94b31f7fd2e8fe\n \n running 2 tests\n test test::test_times_four ... ok\n test test::test_add_three ... ok\n \n test result: ok. 2 passed; 0 failed; 0 ignored; 0 measured\n \n+   Doc-tests testing\n \n running 0 tests\n \n test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured\n-\n-\n-running 1 test\n-test math_checks_out ... ok\n-\n-test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured\n ```\n \n Cool! We now have two tests of our internal functions. You'll note that there"}]}