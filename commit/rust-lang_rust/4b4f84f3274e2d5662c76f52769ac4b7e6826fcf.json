{"sha": "4b4f84f3274e2d5662c76f52769ac4b7e6826fcf", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRiNGY4NGYzMjc0ZTJkNTY2MmM3NmY1Mjc2OWFjNGI3ZTY4MjZmY2Y=", "commit": {"author": {"name": "Aaron Hill", "email": "aa1ronham@gmail.com", "date": "2020-10-19T15:49:07Z"}, "committer": {"name": "Aaron Hill", "email": "aa1ronham@gmail.com", "date": "2020-10-31T00:02:15Z"}, "message": "Only error on unfixed diagnostics", "tree": {"sha": "71a7a07beb79b0764d77258eddc564d04ff621bc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/71a7a07beb79b0764d77258eddc564d04ff621bc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4b4f84f3274e2d5662c76f52769ac4b7e6826fcf", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7J9Gc3TfBwj2K399tAh+UQ6YsWQFAl+cqYcACgkQtAh+UQ6Y\nsWSQwQ/+Ol4J7QZDMdhylmC+ucnsyLrrTBlmAdmsoW658pvRCiCgDEDovGE4FU2y\n8fmjsLdqKFA9vtasOz6G0M6W2IuJDuCvAT/oJ8QujJbGijXUGqwYexyXF1pBh9g4\nP+HvYcJoNJuI4FEgKATNuLaX7WOOuxP/RtkVgdX6VTEnhB0bydhZdIawgayhf9Sd\nwYOLnnxZ4vO4fWvPpW39+l+WdgttM81qSgu8dc23Uur4jwC4HjJmjOs+cLBbQe4n\nZ2e3MZdOLnlARLcTfASyCMlJ0Vdo0Z/Si7flvLgcGqERJ7WOkrQeZhJ77DMdN1CV\nY8ZQHfMmHDSciZ/TNdJOG/8ARcfScB7382d86ho6nbixyp+e+rhefY36WpFadrfT\nNwtho6rwyOYZGaFVQxXqXv/dOFHyDJ/FdfUwo1hznNTpD3KXB3RO/N5yanNsBSkr\nKOJ+w9AKfo00fhkKYd6D2ALcvQ7carfYDBWwPjFb05/KkEG0IBaHswquG2IH6KbW\nT4vgKuXUCTZaMyaomUc1yLzEFODBZG2ELPyaSUh8yXSvlZHy6S8rXFLSjmnTh5zy\nBriylycuQ/YvfM+d2tY42jwhH0kB51P68IIfGb7HlAGE2MDOIOXWP68arEoLrydR\neYgJT/DdvQeg9JWuQ1Q51Y37AkBT2eZOccxTck4udZbXS4E+UDQ=\n=DyiZ\n-----END PGP SIGNATURE-----", "payload": "tree 71a7a07beb79b0764d77258eddc564d04ff621bc\nparent 2d17597f849fce55aa730edaa8f1bf0e91d64147\nauthor Aaron Hill <aa1ronham@gmail.com> 1603122547 -0400\ncommitter Aaron Hill <aa1ronham@gmail.com> 1604102535 -0400\n\nOnly error on unfixed diagnostics\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4b4f84f3274e2d5662c76f52769ac4b7e6826fcf", "html_url": "https://github.com/rust-lang/rust/commit/4b4f84f3274e2d5662c76f52769ac4b7e6826fcf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4b4f84f3274e2d5662c76f52769ac4b7e6826fcf/comments", "author": {"login": "Aaron1011", "id": 1408859, "node_id": "MDQ6VXNlcjE0MDg4NTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1408859?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aaron1011", "html_url": "https://github.com/Aaron1011", "followers_url": "https://api.github.com/users/Aaron1011/followers", "following_url": "https://api.github.com/users/Aaron1011/following{/other_user}", "gists_url": "https://api.github.com/users/Aaron1011/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aaron1011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aaron1011/subscriptions", "organizations_url": "https://api.github.com/users/Aaron1011/orgs", "repos_url": "https://api.github.com/users/Aaron1011/repos", "events_url": "https://api.github.com/users/Aaron1011/events{/privacy}", "received_events_url": "https://api.github.com/users/Aaron1011/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Aaron1011", "id": 1408859, "node_id": "MDQ6VXNlcjE0MDg4NTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1408859?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aaron1011", "html_url": "https://github.com/Aaron1011", "followers_url": "https://api.github.com/users/Aaron1011/followers", "following_url": "https://api.github.com/users/Aaron1011/following{/other_user}", "gists_url": "https://api.github.com/users/Aaron1011/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aaron1011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aaron1011/subscriptions", "organizations_url": "https://api.github.com/users/Aaron1011/orgs", "repos_url": "https://api.github.com/users/Aaron1011/repos", "events_url": "https://api.github.com/users/Aaron1011/events{/privacy}", "received_events_url": "https://api.github.com/users/Aaron1011/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2d17597f849fce55aa730edaa8f1bf0e91d64147", "url": "https://api.github.com/repos/rust-lang/rust/commits/2d17597f849fce55aa730edaa8f1bf0e91d64147", "html_url": "https://github.com/rust-lang/rust/commit/2d17597f849fce55aa730edaa8f1bf0e91d64147"}], "stats": {"total": 4, "additions": 3, "deletions": 1}, "files": [{"sha": "f36bc662ea89cd05ffbdaf3346169a50f2fa3f76", "filename": "src/tools/compiletest/src/runtest.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/4b4f84f3274e2d5662c76f52769ac4b7e6826fcf/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4b4f84f3274e2d5662c76f52769ac4b7e6826fcf/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs?ref=4b4f84f3274e2d5662c76f52769ac4b7e6826fcf", "patch": "@@ -3122,7 +3122,9 @@ impl<'test> TestCx<'test> {\n                 self.fatal_proc_rec(\"failed to compile fixed code\", &res);\n             }\n             if !res.stderr.is_empty() && !self.props.rustfix_only_machine_applicable {\n-                self.fatal_proc_rec(\"fixed code is still producing diagnostics\", &res);\n+                if !json::rustfix_diagnostics_only(&res.stderr).is_empty() {\n+                    self.fatal_proc_rec(\"fixed code is still producing diagnostics\", &res);\n+                }\n             }\n         }\n     }"}]}