{"sha": "b1dff40bae94dd0fd1e4846fd7b76723d0a3f9f9", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIxZGZmNDBiYWU5NGRkMGZkMWU0ODQ2ZmQ3Yjc2NzIzZDBhM2Y5Zjk=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-11-15T01:43:41Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-11-15T05:56:58Z"}, "message": "Create CodeMap.add_filemap", "tree": {"sha": "b6b2bf8b667ee4b9b619c733f8bd505e259154b6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b6b2bf8b667ee4b9b619c733f8bd505e259154b6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b1dff40bae94dd0fd1e4846fd7b76723d0a3f9f9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b1dff40bae94dd0fd1e4846fd7b76723d0a3f9f9", "html_url": "https://github.com/rust-lang/rust/commit/b1dff40bae94dd0fd1e4846fd7b76723d0a3f9f9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b1dff40bae94dd0fd1e4846fd7b76723d0a3f9f9/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3a9ccd53e559be6db3300eb161951fe75b1ff962", "url": "https://api.github.com/repos/rust-lang/rust/commits/3a9ccd53e559be6db3300eb161951fe75b1ff962", "html_url": "https://github.com/rust-lang/rust/commit/3a9ccd53e559be6db3300eb161951fe75b1ff962"}], "stats": {"total": 8, "additions": 6, "deletions": 2}, "files": [{"sha": "f3b0611e463791bcf7fe8fb15de41cb16b913b5a", "filename": "src/libsyntax/codemap.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/b1dff40bae94dd0fd1e4846fd7b76723d0a3f9f9/src%2Flibsyntax%2Fcodemap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b1dff40bae94dd0fd1e4846fd7b76723d0a3f9f9/src%2Flibsyntax%2Fcodemap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fcodemap.rs?ref=b1dff40bae94dd0fd1e4846fd7b76723d0a3f9f9", "patch": "@@ -230,6 +230,10 @@ pub impl CodeMap {\n         }\n     }\n \n+    pub fn add_filemap(@self, filemap: @FileMap) {\n+        self.files.push(filemap);\n+    }\n+\n     pub fn mk_substr_filename(@self, sp: span) -> ~str {\n         let pos = self.lookup_char_pos(sp.lo);\n         return fmt!(\"<%s:%u:%u>\", pos.file.name,"}, {"sha": "97ca8568cfe91f5d2ec7938f30784aa8331fd0e0", "filename": "src/libsyntax/parse.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/b1dff40bae94dd0fd1e4846fd7b76723d0a3f9f9/src%2Flibsyntax%2Fparse.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b1dff40bae94dd0fd1e4846fd7b76723d0a3f9f9/src%2Flibsyntax%2Fparse.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse.rs?ref=b1dff40bae94dd0fd1e4846fd7b76723d0a3f9f9", "patch": "@@ -173,7 +173,7 @@ fn new_parser_etc_from_source_str(sess: parse_sess, cfg: ast::crate_cfg,\n     let ftype = parser::SOURCE_FILE;\n     let filemap = @FileMap::new_w_substr\n         (name, ss, source, sess.pos);\n-    sess.cm.files.push(filemap);\n+    sess.cm.add_filemap(filemap);\n     let srdr = lexer::new_string_reader(sess.span_diagnostic, filemap,\n                                         sess.interner);\n     return (Parser(sess, cfg, srdr as reader, ftype), srdr);\n@@ -198,7 +198,7 @@ fn new_parser_etc_from_file(sess: parse_sess, cfg: ast::crate_cfg,\n     let src = @result::unwrap(res);\n     let filemap = @FileMap::new(path.to_str(), src,\n                                 sess.pos);\n-    sess.cm.files.push(filemap);\n+    sess.cm.add_filemap(filemap);\n     let srdr = lexer::new_string_reader(sess.span_diagnostic, filemap,\n                                         sess.interner);\n     return (Parser(sess, cfg, srdr as reader, ftype), srdr);"}]}