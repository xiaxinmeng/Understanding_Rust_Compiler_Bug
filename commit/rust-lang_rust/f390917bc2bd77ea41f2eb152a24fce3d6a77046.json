{"sha": "f390917bc2bd77ea41f2eb152a24fce3d6a77046", "node_id": "MDY6Q29tbWl0NzI0NzEyOmYzOTA5MTdiYzJiZDc3ZWE0MWYyZWIxNTJhMjRmY2UzZDZhNzcwNDY=", "commit": {"author": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2018-08-01T00:02:12Z"}, "committer": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2018-08-01T00:05:51Z"}, "message": "Move dataflow to borrowck\n\nNo one else uses it.", "tree": {"sha": "5fc67963eeb47db27b9c88a8fb1c119fd2310248", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5fc67963eeb47db27b9c88a8fb1c119fd2310248"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f390917bc2bd77ea41f2eb152a24fce3d6a77046", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f390917bc2bd77ea41f2eb152a24fce3d6a77046", "html_url": "https://github.com/rust-lang/rust/commit/f390917bc2bd77ea41f2eb152a24fce3d6a77046", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f390917bc2bd77ea41f2eb152a24fce3d6a77046/comments", "author": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e94df4acb4c3f42fdc224a7164b63a99240add1e", "url": "https://api.github.com/repos/rust-lang/rust/commits/e94df4acb4c3f42fdc224a7164b63a99240add1e", "html_url": "https://github.com/rust-lang/rust/commit/e94df4acb4c3f42fdc224a7164b63a99240add1e"}], "stats": {"total": 33, "additions": 15, "deletions": 18}, "files": [{"sha": "bdf3c2ba496427d5b2a40a69dab7c3a811636527", "filename": "src/librustc/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/f390917bc2bd77ea41f2eb152a24fce3d6a77046/src%2Flibrustc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f390917bc2bd77ea41f2eb152a24fce3d6a77046/src%2Flibrustc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Flib.rs?ref=f390917bc2bd77ea41f2eb152a24fce3d6a77046", "patch": "@@ -134,7 +134,6 @@ pub mod middle {\n     pub mod borrowck;\n     pub mod expr_use_visitor;\n     pub mod cstore;\n-    pub mod dataflow;\n     pub mod dead;\n     pub mod dependency_format;\n     pub mod entry;"}, {"sha": "7c23fad45ddbab834132370cc4d11bd90ebfed37", "filename": "src/librustc_borrowck/borrowck/mod.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/f390917bc2bd77ea41f2eb152a24fce3d6a77046/src%2Flibrustc_borrowck%2Fborrowck%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f390917bc2bd77ea41f2eb152a24fce3d6a77046/src%2Flibrustc_borrowck%2Fborrowck%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_borrowck%2Fborrowck%2Fmod.rs?ref=f390917bc2bd77ea41f2eb152a24fce3d6a77046", "patch": "@@ -24,10 +24,6 @@ use rustc::hir::HirId;\n use rustc::hir::map as hir_map;\n use rustc::hir::map::blocks::FnLikeNode;\n use rustc::cfg;\n-use rustc::middle::dataflow::DataFlowContext;\n-use rustc::middle::dataflow::BitwiseOperator;\n-use rustc::middle::dataflow::DataFlowOperator;\n-use rustc::middle::dataflow::KillFrom;\n use rustc::middle::borrowck::{BorrowCheckResult, SignalledError};\n use rustc::hir::def_id::{DefId, LocalDefId};\n use rustc::middle::expr_use_visitor as euv;\n@@ -54,6 +50,8 @@ use errors::{DiagnosticBuilder, DiagnosticId};\n use rustc::hir;\n use rustc::hir::intravisit::{self, Visitor};\n \n+use dataflow::{DataFlowContext, BitwiseOperator, DataFlowOperator, KillFrom};\n+\n pub mod check_loans;\n \n pub mod gather_loans;"}, {"sha": "6c380338327d579590bc481abe6d97381dcae60c", "filename": "src/librustc_borrowck/borrowck/move_data.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/f390917bc2bd77ea41f2eb152a24fce3d6a77046/src%2Flibrustc_borrowck%2Fborrowck%2Fmove_data.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f390917bc2bd77ea41f2eb152a24fce3d6a77046/src%2Flibrustc_borrowck%2Fborrowck%2Fmove_data.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_borrowck%2Fborrowck%2Fmove_data.rs?ref=f390917bc2bd77ea41f2eb152a24fce3d6a77046", "patch": "@@ -13,12 +13,10 @@\n \n pub use self::MoveKind::*;\n \n+use dataflow::{DataFlowContext, BitwiseOperator, DataFlowOperator, KillFrom};\n+\n use borrowck::*;\n use rustc::cfg;\n-use rustc::middle::dataflow::DataFlowContext;\n-use rustc::middle::dataflow::BitwiseOperator;\n-use rustc::middle::dataflow::DataFlowOperator;\n-use rustc::middle::dataflow::KillFrom;\n use rustc::middle::expr_use_visitor as euv;\n use rustc::middle::expr_use_visitor::MutateMode;\n use rustc::ty::{self, TyCtxt};"}, {"sha": "d5f30c1dcd42da8d4f7ec94a03ebee820765f8e2", "filename": "src/librustc_borrowck/dataflow.rs", "status": "renamed", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/f390917bc2bd77ea41f2eb152a24fce3d6a77046/src%2Flibrustc_borrowck%2Fdataflow.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f390917bc2bd77ea41f2eb152a24fce3d6a77046/src%2Flibrustc_borrowck%2Fdataflow.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_borrowck%2Fdataflow.rs?ref=f390917bc2bd77ea41f2eb152a24fce3d6a77046", "patch": "@@ -14,20 +14,20 @@\n //! and thus uses bitvectors. Your job is simply to specify the so-called\n //! GEN and KILL bits for each expression.\n \n-use cfg;\n-use cfg::CFGIndex;\n-use ty::TyCtxt;\n+use rustc::cfg;\n+use rustc::cfg::CFGIndex;\n+use rustc::ty::TyCtxt;\n use std::io;\n use std::mem;\n use std::usize;\n use syntax::print::pprust::PrintState;\n \n use rustc_data_structures::graph::implementation::OUTGOING;\n \n-use util::nodemap::FxHashMap;\n-use hir;\n-use hir::intravisit::{self, IdRange};\n-use hir::print as pprust;\n+use rustc::util::nodemap::FxHashMap;\n+use rustc::hir;\n+use rustc::hir::intravisit::{self, IdRange};\n+use rustc::hir::print as pprust;\n \n \n #[derive(Copy, Clone, Debug)]\n@@ -193,7 +193,7 @@ fn build_local_id_to_index(body: Option<&hir::Body>,\n     fn add_entries_from_fn_body(index: &mut FxHashMap<hir::ItemLocalId, Vec<CFGIndex>>,\n                                 body: &hir::Body,\n                                 entry: CFGIndex) {\n-        use hir::intravisit::Visitor;\n+        use rustc::hir::intravisit::Visitor;\n \n         struct Formals<'a> {\n             entry: CFGIndex,", "previous_filename": "src/librustc/middle/dataflow.rs"}, {"sha": "dddd6a354c115bd6f95c24c62f68a8720cfc8294", "filename": "src/librustc_borrowck/graphviz.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f390917bc2bd77ea41f2eb152a24fce3d6a77046/src%2Flibrustc_borrowck%2Fgraphviz.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f390917bc2bd77ea41f2eb152a24fce3d6a77046/src%2Flibrustc_borrowck%2Fgraphviz.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_borrowck%2Fgraphviz.rs?ref=f390917bc2bd77ea41f2eb152a24fce3d6a77046", "patch": "@@ -21,7 +21,7 @@ use borrowck;\n use borrowck::{BorrowckCtxt, LoanPath};\n use dot;\n use rustc::cfg::CFGIndex;\n-use rustc::middle::dataflow::{DataFlowOperator, DataFlowContext, EntryOrExit};\n+use dataflow::{DataFlowOperator, DataFlowContext, EntryOrExit};\n use std::rc::Rc;\n use dot::IntoCow;\n "}, {"sha": "7bb76efd49ca68cbd56b32d33d5a1f4d5546e21c", "filename": "src/librustc_borrowck/lib.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f390917bc2bd77ea41f2eb152a24fce3d6a77046/src%2Flibrustc_borrowck%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f390917bc2bd77ea41f2eb152a24fce3d6a77046/src%2Flibrustc_borrowck%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_borrowck%2Flib.rs?ref=f390917bc2bd77ea41f2eb152a24fce3d6a77046", "patch": "@@ -39,4 +39,6 @@ mod borrowck;\n \n pub mod graphviz;\n \n+mod dataflow;\n+\n pub use borrowck::provide;"}]}