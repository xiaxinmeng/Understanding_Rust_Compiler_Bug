{"sha": "13f9a4c309eb35d0d2f48194edea044530177171", "node_id": "MDY6Q29tbWl0NzI0NzEyOjEzZjlhNGMzMDllYjM1ZDBkMmY0ODE5NGVkZWEwNDQ1MzAxNzcxNzE=", "commit": {"author": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2021-08-06T02:21:33Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-08-06T02:21:33Z"}, "message": "Rollup merge of #87759 - m-ou-se:linux-process-sealed, r=jyn514\n\nRe-use std::sealed::Sealed in os/linux/process.\n\nThis uses `std::sealed::Sealed` in `std::os::linux::process` instead of defining new `Sealed` traits there.", "tree": {"sha": "bc3a3b934c0da801aa1bb6f35122a81f32584937", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bc3a3b934c0da801aa1bb6f35122a81f32584937"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/13f9a4c309eb35d0d2f48194edea044530177171", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJhDJytCRBK7hj4Ov3rIwAA1uwIAB1rbFTx8FphC/MrAh71+zrY\nR80Wxhn6pw6vW4Dkz+f9yuuzRqMWMHMqHPGuD+fbB7Xjr7vidy1gHi4S5WljH+RU\nbsG2SIcsvLaqJ8LtPfgTt7A5ylk2kQzlmHuewp8el1vEl9DW1GpJmY71dBMmriuq\n6gHPN5/Hj2uEQTSgSpQKSiHt21tIBn0KWbill43xXBJxQQaA7wRIGoBgdrJZSiMv\nSveKKIyCpea0Wty7Gm7hpRsC3CpIx3xRlVL8glDtYci1+8MsR1uyZBkqP0FJxvES\nqy/rDKDwPs99PN+ipg+J57AnF38lovcD2VIZ/yx29SHOCM4S2tIK36NuwzF4D2c=\n=tmL7\n-----END PGP SIGNATURE-----\n", "payload": "tree bc3a3b934c0da801aa1bb6f35122a81f32584937\nparent 5a36cdb9d27b4c644adc47d3ee6dca58d1a45f3f\nparent f280a126b291bf7f6040db1214cdad5877811b6d\nauthor Yuki Okushi <jtitor@2k36.org> 1628216493 +0900\ncommitter GitHub <noreply@github.com> 1628216493 +0900\n\nRollup merge of #87759 - m-ou-se:linux-process-sealed, r=jyn514\n\nRe-use std::sealed::Sealed in os/linux/process.\n\nThis uses `std::sealed::Sealed` in `std::os::linux::process` instead of defining new `Sealed` traits there.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/13f9a4c309eb35d0d2f48194edea044530177171", "html_url": "https://github.com/rust-lang/rust/commit/13f9a4c309eb35d0d2f48194edea044530177171", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/13f9a4c309eb35d0d2f48194edea044530177171/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5a36cdb9d27b4c644adc47d3ee6dca58d1a45f3f", "url": "https://api.github.com/repos/rust-lang/rust/commits/5a36cdb9d27b4c644adc47d3ee6dca58d1a45f3f", "html_url": "https://github.com/rust-lang/rust/commit/5a36cdb9d27b4c644adc47d3ee6dca58d1a45f3f"}, {"sha": "f280a126b291bf7f6040db1214cdad5877811b6d", "url": "https://api.github.com/repos/rust-lang/rust/commits/f280a126b291bf7f6040db1214cdad5877811b6d", "html_url": "https://github.com/rust-lang/rust/commit/f280a126b291bf7f6040db1214cdad5877811b6d"}], "stats": {"total": 19, "additions": 7, "deletions": 12}, "files": [{"sha": "6daff0f003c8fb03cff4667e8f09868baadfcec3", "filename": "library/std/src/os/linux/process.rs", "status": "modified", "additions": 3, "deletions": 12, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/13f9a4c309eb35d0d2f48194edea044530177171/library%2Fstd%2Fsrc%2Fos%2Flinux%2Fprocess.rs", "raw_url": "https://github.com/rust-lang/rust/raw/13f9a4c309eb35d0d2f48194edea044530177171/library%2Fstd%2Fsrc%2Fos%2Flinux%2Fprocess.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fos%2Flinux%2Fprocess.rs?ref=13f9a4c309eb35d0d2f48194edea044530177171", "patch": "@@ -5,6 +5,7 @@\n use crate::io::Result;\n use crate::os::unix::io::{AsRawFd, FromRawFd, IntoRawFd, RawFd};\n use crate::process;\n+use crate::sealed::Sealed;\n #[cfg(not(doc))]\n use crate::sys::fd::FileDesc;\n use crate::sys_common::{AsInner, AsInnerMut, FromInner, IntoInner};\n@@ -84,15 +85,10 @@ impl IntoRawFd for PidFd {\n     }\n }\n \n-mod private_child_ext {\n-    pub trait Sealed {}\n-    impl Sealed for crate::process::Child {}\n-}\n-\n /// Os-specific extensions for [`Child`]\n ///\n /// [`Child`]: process::Child\n-pub trait ChildExt: private_child_ext::Sealed {\n+pub trait ChildExt: Sealed {\n     /// Obtains a reference to the [`PidFd`] created for this [`Child`], if available.\n     ///\n     /// A pidfd will only be available if its creation was requested with\n@@ -120,15 +116,10 @@ pub trait ChildExt: private_child_ext::Sealed {\n     fn take_pidfd(&mut self) -> Result<PidFd>;\n }\n \n-mod private_command_ext {\n-    pub trait Sealed {}\n-    impl Sealed for crate::process::Command {}\n-}\n-\n /// Os-specific extensions for [`Command`]\n ///\n /// [`Command`]: process::Command\n-pub trait CommandExt: private_command_ext::Sealed {\n+pub trait CommandExt: Sealed {\n     /// Sets whether a [`PidFd`](struct@PidFd) should be created for the [`Child`]\n     /// spawned by this [`Command`].\n     /// By default, no pidfd will be created."}, {"sha": "d3e271df8d8ccc1835ccca4137413075e5561257", "filename": "library/std/src/process.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/13f9a4c309eb35d0d2f48194edea044530177171/library%2Fstd%2Fsrc%2Fprocess.rs", "raw_url": "https://github.com/rust-lang/rust/raw/13f9a4c309eb35d0d2f48194edea044530177171/library%2Fstd%2Fsrc%2Fprocess.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fprocess.rs?ref=13f9a4c309eb35d0d2f48194edea044530177171", "patch": "@@ -205,6 +205,10 @@ pub struct Child {\n     pub stderr: Option<ChildStderr>,\n }\n \n+/// Allows extension traits within `std`.\n+#[unstable(feature = \"sealed\", issue = \"none\")]\n+impl crate::sealed::Sealed for Child {}\n+\n impl AsInner<imp::Process> for Child {\n     fn as_inner(&self) -> &imp::Process {\n         &self.handle"}]}