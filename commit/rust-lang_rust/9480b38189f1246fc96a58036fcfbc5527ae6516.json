{"sha": "9480b38189f1246fc96a58036fcfbc5527ae6516", "node_id": "C_kwDOAAsO6NoAKDk0ODBiMzgxODlmMTI0NmZjOTZhNTgwMzZmY2ZiYzU1MjdhZTY1MTY", "commit": {"author": {"name": "Kartavya Vashishtha", "email": "sendtokartavya@gmail.com", "date": "2022-08-25T07:41:51Z"}, "committer": {"name": "Kartavya Vashishtha", "email": "sendtokartavya@gmail.com", "date": "2022-08-25T07:41:51Z"}, "message": "extract const generic in ArrayType", "tree": {"sha": "af22f1c58fed3dc6610cc22c1e3539f444b1804c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/af22f1c58fed3dc6610cc22c1e3539f444b1804c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9480b38189f1246fc96a58036fcfbc5527ae6516", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE+fRQYdEX7Emd36W/pQASwjJOXfAFAmMHJ78ACgkQpQASwjJO\nXfCVVhAAr8X2VGzlaEzrf7HRM4Xfmi/lVZe0OYsoYyC5nWkov9D6Z76QZ1m1/Ij3\ntoz8M5x26gdJ36Zyhp2kHrmVqOt5M06vgwSwSkR1SIr7lavRY+MLvK50wuDI3Bmw\nSSu04aahnUCzyJkxv6PJOKBFbvv5bmFug8orc4OZcx+I8I2HqWKwNALDYTc/lZ/9\nFQwtj1du+7cDXhkcpGyghSR/bYoHqskX4s93qQZrckwweDJHr6RsXPeqtQmuF7d6\n6EIt6I0hC+DVK0LSYPvLzYlDYm7bONQnOS8tCly4bbpdd/cSdsA2IaEVIzfq87An\n8bCKx2w3g+NJPlANoQ2n93Y2lQnsoMOk3XHP82tCXTZ6RMbXhCU641a04pIToyBm\nAvSdFF8PIpwIQgQHkgxpvTF+BvxmxM95zvFIudhabsqg+vrOEkq3lQAGLa89KOvT\nwLZqb5QRw9LH3oCyBhDKOqj9i74/cerObJc5NU4rwA77xy0T59gXV3MZ7SBnzzrr\nKCtS1V3duC+bW3HfMTKRibT+QCKGG1ArrP/05/y35ywfXAAOhtZcEBlaw2FRHgck\nalmzdMlskXcyh7xyPHt3J75Q7MY4wTyzSmjfe+DBHN5QfbaDPSuCodm2RwtKex/f\nZcvSAFjzMbSO4JTWY7vyNc4rh9a+I/qEtmrqUavQczcpvkLWejg=\n=MLq/\n-----END PGP SIGNATURE-----", "payload": "tree af22f1c58fed3dc6610cc22c1e3539f444b1804c\nparent 71c15f2a442df1760c535ebec51768187209cd10\nauthor Kartavya Vashishtha <sendtokartavya@gmail.com> 1661413311 +0530\ncommitter Kartavya Vashishtha <sendtokartavya@gmail.com> 1661413311 +0530\n\nextract const generic in ArrayType\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9480b38189f1246fc96a58036fcfbc5527ae6516", "html_url": "https://github.com/rust-lang/rust/commit/9480b38189f1246fc96a58036fcfbc5527ae6516", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9480b38189f1246fc96a58036fcfbc5527ae6516/comments", "author": {"login": "DesmondWillowbrook", "id": 51814158, "node_id": "MDQ6VXNlcjUxODE0MTU4", "avatar_url": "https://avatars.githubusercontent.com/u/51814158?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DesmondWillowbrook", "html_url": "https://github.com/DesmondWillowbrook", "followers_url": "https://api.github.com/users/DesmondWillowbrook/followers", "following_url": "https://api.github.com/users/DesmondWillowbrook/following{/other_user}", "gists_url": "https://api.github.com/users/DesmondWillowbrook/gists{/gist_id}", "starred_url": "https://api.github.com/users/DesmondWillowbrook/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DesmondWillowbrook/subscriptions", "organizations_url": "https://api.github.com/users/DesmondWillowbrook/orgs", "repos_url": "https://api.github.com/users/DesmondWillowbrook/repos", "events_url": "https://api.github.com/users/DesmondWillowbrook/events{/privacy}", "received_events_url": "https://api.github.com/users/DesmondWillowbrook/received_events", "type": "User", "site_admin": false}, "committer": {"login": "DesmondWillowbrook", "id": 51814158, "node_id": "MDQ6VXNlcjUxODE0MTU4", "avatar_url": "https://avatars.githubusercontent.com/u/51814158?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DesmondWillowbrook", "html_url": "https://github.com/DesmondWillowbrook", "followers_url": "https://api.github.com/users/DesmondWillowbrook/followers", "following_url": "https://api.github.com/users/DesmondWillowbrook/following{/other_user}", "gists_url": "https://api.github.com/users/DesmondWillowbrook/gists{/gist_id}", "starred_url": "https://api.github.com/users/DesmondWillowbrook/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DesmondWillowbrook/subscriptions", "organizations_url": "https://api.github.com/users/DesmondWillowbrook/orgs", "repos_url": "https://api.github.com/users/DesmondWillowbrook/repos", "events_url": "https://api.github.com/users/DesmondWillowbrook/events{/privacy}", "received_events_url": "https://api.github.com/users/DesmondWillowbrook/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "71c15f2a442df1760c535ebec51768187209cd10", "url": "https://api.github.com/repos/rust-lang/rust/commits/71c15f2a442df1760c535ebec51768187209cd10", "html_url": "https://github.com/rust-lang/rust/commit/71c15f2a442df1760c535ebec51768187209cd10"}], "stats": {"total": 19, "additions": 19, "deletions": 0}, "files": [{"sha": "0e031a793bf8d97d91e98807f627edd9dda8c938", "filename": "crates/ide-assists/src/handlers/extract_type_alias.rs", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/9480b38189f1246fc96a58036fcfbc5527ae6516/crates%2Fide-assists%2Fsrc%2Fhandlers%2Fextract_type_alias.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9480b38189f1246fc96a58036fcfbc5527ae6516/crates%2Fide-assists%2Fsrc%2Fhandlers%2Fextract_type_alias.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide-assists%2Fsrc%2Fhandlers%2Fextract_type_alias.rs?ref=9480b38189f1246fc96a58036fcfbc5527ae6516", "patch": "@@ -171,6 +171,25 @@ fn collect_used_generics<'gp>(\n         ast::Type::RefType(ref_) => generics.extend(\n             ref_.lifetime().and_then(|lt| known_generics.iter().find(find_lifetime(&lt.text()))),\n         ),\n+        ast::Type::ArrayType(ar) => {\n+            if let Some(expr) = ar.expr() {\n+                if let ast::Expr::PathExpr(p) = expr {\n+                    if let Some(path) = p.path() {\n+                        if let Some(name_ref) = path.as_single_name_ref() {\n+                            if let Some(param) = known_generics.iter().find(|gp| {\n+                                if let ast::GenericParam::ConstParam(cp) = gp {\n+                                    cp.name().map_or(false, |n| n.text() == name_ref.text())\n+                                } else {\n+                                    false\n+                                }\n+                            }) {\n+                                generics.push(param);\n+                            }\n+                        }\n+                    }\n+                }\n+            }\n+        },\n         _ => (),\n     });\n     // stable resort to lifetime, type, const"}]}