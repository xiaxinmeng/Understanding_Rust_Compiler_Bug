{"sha": "388c3f25f95c55add63d436a8e8bb207d003c63b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM4OGMzZjI1Zjk1YzU1YWRkNjNkNDM2YThlOGJiMjA3ZDAwM2M2M2I=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2016-09-26T21:26:18Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2016-09-26T21:26:18Z"}, "message": "Auto merge of #36661 - jneem:master, r=nrc\n\nChange error message for intrinsic signature.\n\nMakes it so the signature of the intrinsic in the user's code is\n\"found,\" while the signature that rustc knows about is \"expected.\"\n\nBefore this patch, the code\n```\nextern \"platform-intrinsic\" {\n    fn x86_mm_movemask_ps() -> i32;\n}\n```\nwould give the error\n```\nerror[E0444]: platform-specific intrinsic has invalid number of arguments: found 1, expected 0\n --> test.rs:4:5\n  |\n4 |     fn x86_mm_movemask_ps() -> i32;\n  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nerror: aborting due to previous error\n```\n\nAfter this patch, it says \"found 0, expected 1\".", "tree": {"sha": "2db50fcc1b05a9017fc8284e0a632aa7f4ed25ea", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2db50fcc1b05a9017fc8284e0a632aa7f4ed25ea"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/388c3f25f95c55add63d436a8e8bb207d003c63b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/388c3f25f95c55add63d436a8e8bb207d003c63b", "html_url": "https://github.com/rust-lang/rust/commit/388c3f25f95c55add63d436a8e8bb207d003c63b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/388c3f25f95c55add63d436a8e8bb207d003c63b/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8ccfc695b56c102a2e7e95719b398bfa0a5e8af1", "url": "https://api.github.com/repos/rust-lang/rust/commits/8ccfc695b56c102a2e7e95719b398bfa0a5e8af1", "html_url": "https://github.com/rust-lang/rust/commit/8ccfc695b56c102a2e7e95719b398bfa0a5e8af1"}, {"sha": "159aa0b902b6939631ad7afbc77def5b7c77953c", "url": "https://api.github.com/repos/rust-lang/rust/commits/159aa0b902b6939631ad7afbc77def5b7c77953c", "html_url": "https://github.com/rust-lang/rust/commit/159aa0b902b6939631ad7afbc77def5b7c77953c"}], "stats": {"total": 18, "additions": 17, "deletions": 1}, "files": [{"sha": "93d8b3e1563d974e27520c66f8fe2fa6dd366ff4", "filename": "src/librustc_typeck/check/intrinsic.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/388c3f25f95c55add63d436a8e8bb207d003c63b/src%2Flibrustc_typeck%2Fcheck%2Fintrinsic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/388c3f25f95c55add63d436a8e8bb207d003c63b/src%2Flibrustc_typeck%2Fcheck%2Fintrinsic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fintrinsic.rs?ref=388c3f25f95c55add63d436a8e8bb207d003c63b", "patch": "@@ -379,7 +379,7 @@ pub fn check_platform_intrinsic_type(ccx: &CrateCtxt,\n                         span_err!(tcx.sess, it.span, E0444,\n                                   \"platform-specific intrinsic has invalid number of \\\n                                    arguments: found {}, expected {}\",\n-                                  intr.inputs.len(), sig.inputs.len());\n+                                  sig.inputs.len(), intr.inputs.len());\n                         return\n                     }\n                     let input_pairs = intr.inputs.iter().zip(&sig.inputs);"}, {"sha": "e8a9031dba8dbfddca19dede416f72d1c77be461", "filename": "src/test/compile-fail/platform-intrinsic-params.rs", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/388c3f25f95c55add63d436a8e8bb207d003c63b/src%2Ftest%2Fcompile-fail%2Fplatform-intrinsic-params.rs", "raw_url": "https://github.com/rust-lang/rust/raw/388c3f25f95c55add63d436a8e8bb207d003c63b/src%2Ftest%2Fcompile-fail%2Fplatform-intrinsic-params.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fplatform-intrinsic-params.rs?ref=388c3f25f95c55add63d436a8e8bb207d003c63b", "patch": "@@ -0,0 +1,16 @@\n+// Copyright 2016 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+#![feature(platform_intrinsics)]\n+extern \"platform-intrinsic\" {\n+    fn x86_mm_movemask_ps() -> i32; //~ERROR found 0, expected 1\n+}\n+\n+fn main() { }"}]}