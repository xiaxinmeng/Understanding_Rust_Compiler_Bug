{"sha": "9b1465af322e311152a23c1f61f967bda2bffcee", "node_id": "MDY6Q29tbWl0NzI0NzEyOjliMTQ2NWFmMzIyZTMxMTE1MmEyM2MxZjYxZjk2N2JkYTJiZmZjZWU=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2020-01-22T15:00:21Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-01-22T15:00:21Z"}, "message": "Merge #2894\n\n2894: Omit default parameters for references r=matklad a=SomeoneToIgnore\n\n\n\nCo-authored-by: Kirill Bulatov <mail4score@gmail.com>", "tree": {"sha": "96de0273a72ddf6a434a82e9db72df942cf1c51c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/96de0273a72ddf6a434a82e9db72df942cf1c51c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9b1465af322e311152a23c1f61f967bda2bffcee", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJeKGOFCRBK7hj4Ov3rIwAAdHIIAKgmeijYbcaDGCFIj0Tbo+SU\nRvKqj6WEqCBwVGdGEoI200320d7BeX+QwWvNj0VcG/MkpjM3TcgT0B0lKg/seHFf\nu+ZJ6pK0Gz7yWUfSJM13+fBpo8hSPnCZoIa2vcYbF6VHZwf9kVHY6vvRFLKK99PC\niSH6nRdYWfNDQIpLgC0201ltS8wf5H++fcQMyVMb6V1CQOOaVKT75uZrHqxEcuGm\ngM4sBO3/AsmhAOs4cvHQjNOW8akTCDeyxddJDxGhXGzXpvZiEfV6MKTYSzo/o3lw\nkwAzUtSUzGFwdt6+U1Rjwu9hQTvaEa2ac6bZWbT00FcVmx1tea7e62IlKQxtKHI=\n=AcRy\n-----END PGP SIGNATURE-----\n", "payload": "tree 96de0273a72ddf6a434a82e9db72df942cf1c51c\nparent a5407ddc05826b208ed8a0026b2ae566bf0a8b70\nparent 4029e4410245eeb2e1f58adefad1d4cc24898579\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1579705221 +0000\ncommitter GitHub <noreply@github.com> 1579705221 +0000\n\nMerge #2894\n\n2894: Omit default parameters for references r=matklad a=SomeoneToIgnore\n\n\n\nCo-authored-by: Kirill Bulatov <mail4score@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9b1465af322e311152a23c1f61f967bda2bffcee", "html_url": "https://github.com/rust-lang/rust/commit/9b1465af322e311152a23c1f61f967bda2bffcee", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9b1465af322e311152a23c1f61f967bda2bffcee/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a5407ddc05826b208ed8a0026b2ae566bf0a8b70", "url": "https://api.github.com/repos/rust-lang/rust/commits/a5407ddc05826b208ed8a0026b2ae566bf0a8b70", "html_url": "https://github.com/rust-lang/rust/commit/a5407ddc05826b208ed8a0026b2ae566bf0a8b70"}, {"sha": "4029e4410245eeb2e1f58adefad1d4cc24898579", "url": "https://api.github.com/repos/rust-lang/rust/commits/4029e4410245eeb2e1f58adefad1d4cc24898579", "html_url": "https://github.com/rust-lang/rust/commit/4029e4410245eeb2e1f58adefad1d4cc24898579"}], "stats": {"total": 23, "additions": 20, "deletions": 3}, "files": [{"sha": "d1ff85f0f2e7c6b6ce96035651a266646d833ba2", "filename": "crates/ra_hir_ty/src/display.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9b1465af322e311152a23c1f61f967bda2bffcee/crates%2Fra_hir_ty%2Fsrc%2Fdisplay.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9b1465af322e311152a23c1f61f967bda2bffcee/crates%2Fra_hir_ty%2Fsrc%2Fdisplay.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir_ty%2Fsrc%2Fdisplay.rs?ref=9b1465af322e311152a23c1f61f967bda2bffcee", "patch": "@@ -9,7 +9,7 @@ pub struct HirFormatter<'a, 'b, DB> {\n     fmt: &'a mut fmt::Formatter<'b>,\n     buf: String,\n     curr_size: usize,\n-    max_size: Option<usize>,\n+    pub(crate) max_size: Option<usize>,\n     omit_verbose_types: bool,\n }\n "}, {"sha": "908e4862d62ce81fb1394535807ba69bec4418fa", "filename": "crates/ra_hir_ty/src/lib.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/9b1465af322e311152a23c1f61f967bda2bffcee/crates%2Fra_hir_ty%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9b1465af322e311152a23c1f61f967bda2bffcee/crates%2Fra_hir_ty%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir_ty%2Fsrc%2Flib.rs?ref=9b1465af322e311152a23c1f61f967bda2bffcee", "patch": "@@ -855,7 +855,12 @@ impl HirDisplay for ApplicationTy {\n             }\n             TypeCtor::Ref(m) => {\n                 let t = self.parameters.as_single();\n-                write!(f, \"&{}{}\", m.as_keyword_for_ref(), t.display(f.db))?;\n+                let ty_display = if f.omit_verbose_types() {\n+                    t.display_truncated(f.db, f.max_size)\n+                } else {\n+                    t.display(f.db)\n+                };\n+                write!(f, \"&{}{}\", m.as_keyword_for_ref(), ty_display)?;\n             }\n             TypeCtor::Never => write!(f, \"!\")?,\n             TypeCtor::Tuple { .. } => {"}, {"sha": "393ca9447d6824f6de53bcb5639de9a482ec87e7", "filename": "crates/ra_ide/src/inlay_hints.rs", "status": "modified", "additions": 13, "deletions": 1, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/9b1465af322e311152a23c1f61f967bda2bffcee/crates%2Fra_ide%2Fsrc%2Finlay_hints.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9b1465af322e311152a23c1f61f967bda2bffcee/crates%2Fra_ide%2Fsrc%2Finlay_hints.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Finlay_hints.rs?ref=9b1465af322e311152a23c1f61f967bda2bffcee", "patch": "@@ -245,6 +245,7 @@ struct Test<K, T = u8> {\n \n fn main() {\n     let zz = Test { t: 23, k: 33 };\n+    let zz_ref = &zz;\n }\"#,\n         );\n \n@@ -255,6 +256,11 @@ fn main() {\n                 kind: TypeHint,\n                 label: \"Test<i32>\",\n             },\n+            InlayHint {\n+                range: [105; 111),\n+                kind: TypeHint,\n+                label: \"&Test<i32>\",\n+            },\n         ]\n         \"###\n         );\n@@ -374,6 +380,7 @@ fn main() {\n \n     let multiply = |a, b, c, d| a * b * c * d;\n     let _: i32 = multiply(1, 2, 3, 4);\n+    let multiply_ref = &multiply;\n \n     let return_42 = || 42;\n }\"#,\n@@ -417,7 +424,12 @@ fn main() {\n                 label: \"i32\",\n             },\n             InlayHint {\n-                range: [201; 210),\n+                range: [200; 212),\n+                kind: TypeHint,\n+                label: \"&|\u2026| -> i32\",\n+            },\n+            InlayHint {\n+                range: [235; 244),\n                 kind: TypeHint,\n                 label: \"|| -> i32\",\n             },"}]}