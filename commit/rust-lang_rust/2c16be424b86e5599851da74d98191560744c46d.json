{"sha": "2c16be424b86e5599851da74d98191560744c46d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJjMTZiZTQyNGI4NmU1NTk5ODUxZGE3NGQ5ODE5MTU2MDc0NGM0NmQ=", "commit": {"author": {"name": "Rafael \u00c1vila de Esp\u00edndola", "email": "respindola@mozilla.com", "date": "2011-06-08T17:33:35Z"}, "committer": {"name": "Rafael \u00c1vila de Esp\u00edndola", "email": "respindola@mozilla.com", "date": "2011-06-08T17:33:35Z"}, "message": "Use main.o directly now that stage0 is ok with it.", "tree": {"sha": "7c828f6f5d02288c9b3a5a5456a54fa378b9a1c6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7c828f6f5d02288c9b3a5a5456a54fa378b9a1c6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2c16be424b86e5599851da74d98191560744c46d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2c16be424b86e5599851da74d98191560744c46d", "html_url": "https://github.com/rust-lang/rust/commit/2c16be424b86e5599851da74d98191560744c46d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2c16be424b86e5599851da74d98191560744c46d/comments", "author": null, "committer": null, "parents": [{"sha": "124ad321add25604e99eaaeac0ed0ead4cb7c7c9", "url": "https://api.github.com/repos/rust-lang/rust/commits/124ad321add25604e99eaaeac0ed0ead4cb7c7c9", "html_url": "https://github.com/rust-lang/rust/commit/124ad321add25604e99eaaeac0ed0ead4cb7c7c9"}], "stats": {"total": 23, "additions": 9, "deletions": 14}, "files": [{"sha": "50224f62a0d8a09af2a3a34a6a8cb0d8d60839a5", "filename": "Makefile.in", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/2c16be424b86e5599851da74d98191560744c46d/Makefile.in", "raw_url": "https://github.com/rust-lang/rust/raw/2c16be424b86e5599851da74d98191560744c46d/Makefile.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Makefile.in?ref=2c16be424b86e5599851da74d98191560744c46d", "patch": "@@ -144,9 +144,9 @@ COMPILER_INPUTS := $(wildcard $(addprefix $(S)src/comp/, \\\n ######################################################################\n \n LREQ := rt/$(CFG_RUNTIME) rustllvm/$(CFG_RUSTLLVM)\n-SREQ0 := stage0/rustc$(X) $(LREQ) rt/main.a stage1/glue.o stage1/$(CFG_STDLIB)\n-SREQ1 := stage1/rustc$(X) $(LREQ) rt/main.a stage2/glue.o stage2/$(CFG_STDLIB)\n-SREQ2 := stage2/rustc$(X) $(LREQ) rt/main.a stage3/glue.o stage3/$(CFG_STDLIB)\n+SREQ0 := stage0/rustc$(X) $(LREQ) rt/main.o stage1/glue.o stage1/$(CFG_STDLIB)\n+SREQ1 := stage1/rustc$(X) $(LREQ) rt/main.o stage2/glue.o stage2/$(CFG_STDLIB)\n+SREQ2 := stage2/rustc$(X) $(LREQ) rt/main.o stage3/glue.o stage3/$(CFG_STDLIB)\n \n \n ######################################################################"}, {"sha": "5353006fe7cafbcab61330c44297791628d9acba", "filename": "mk/clean.mk", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/2c16be424b86e5599851da74d98191560744c46d/mk%2Fclean.mk", "raw_url": "https://github.com/rust-lang/rust/raw/2c16be424b86e5599851da74d98191560744c46d/mk%2Fclean.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fclean.mk?ref=2c16be424b86e5599851da74d98191560744c46d", "patch": "@@ -29,7 +29,6 @@ clean:\n \t$(Q)rm -f rustllvm/$(CFG_RUSTLLVM) rustllvm/rustllvmbits.a\n \t$(Q)rm -f rt/$(CFG_RUNTIME)\n \t$(Q)rm -f rt/main.o\n-\t$(Q)rm -f rt/main.a\n \t$(Q)rm -Rf $(PKG_NAME)-*.tar.gz dist\n \t$(Q)rm -f $(foreach ext,o a d bc s exe,$(wildcard stage*/*.$(ext)))\n \t$(Q)rm -Rf $(foreach ext,out out.tmp                      \\"}, {"sha": "566e5f285d4e05ba438f956db8e9fc26a85ae79c", "filename": "mk/rt.mk", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2c16be424b86e5599851da74d98191560744c46d/mk%2Frt.mk", "raw_url": "https://github.com/rust-lang/rust/raw/2c16be424b86e5599851da74d98191560744c46d/mk%2Frt.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Frt.mk?ref=2c16be424b86e5599851da74d98191560744c46d", "patch": "@@ -84,10 +84,6 @@ rt/main.ll: rt/main.ll.in\n \tsed 's/MAIN/main/' < $^ > $@\n endif\n \n-rt/main.a: rt/main.o\n-\trm -f $@\n-\tar crs $@ $^\n-\n rt/%.o: rt/%.ll $(MKFILES)\n \t@$(call E, llc: $@)\n \t$(Q)$(LLC) -filetype=obj -relocation-model=pic -march=x86 -o $@ $<"}, {"sha": "d3a2ca52853dc26d1261f683723fc189839dad1b", "filename": "mk/stage1.mk", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2c16be424b86e5599851da74d98191560744c46d/mk%2Fstage1.mk", "raw_url": "https://github.com/rust-lang/rust/raw/2c16be424b86e5599851da74d98191560744c46d/mk%2Fstage1.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fstage1.mk?ref=2c16be424b86e5599851da74d98191560744c46d", "patch": "@@ -44,7 +44,7 @@ stage1/%.o: stage1/%.s\n stage1/%$(X): stage1/%.o  $(SREQ0)\n \t@$(call E, link [gcc]: $@)\n \t$(Q)gcc $(CFG_GCCISH_CFLAGS) stage1/glue.o -o $@ $< \\\n-      -Lstage1 -Lrustllvm -Lrt rt/main.a -lrustrt -lrustllvm -lstd -lm\n+      -Lstage1 -Lrustllvm -Lrt rt/main.o -lrustrt -lrustllvm -lstd -lm\n \t@# dsymutil sometimes fails or prints a warning, but the\n \t@# program still runs.  Since it simplifies debugging other\n \t@# programs, I\\'ll live with the noise."}, {"sha": "a1c8da05ba3e46cc88ba5279afa18fac8b5d99c9", "filename": "mk/stage2.mk", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2c16be424b86e5599851da74d98191560744c46d/mk%2Fstage2.mk", "raw_url": "https://github.com/rust-lang/rust/raw/2c16be424b86e5599851da74d98191560744c46d/mk%2Fstage2.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fstage2.mk?ref=2c16be424b86e5599851da74d98191560744c46d", "patch": "@@ -44,7 +44,7 @@ stage2/%.o: stage2/%.s\n stage2/%$(X): stage2/%.o  $(SREQ1)\n \t@$(call E, link [gcc]: $@)\n \t$(Q)gcc $(CFG_GCCISH_CFLAGS) stage2/glue.o -o $@ $< \\\n-      -Lstage2 -Lrustllvm -Lrt rt/main.a -lrustrt -lrustllvm -lstd -lm\n+      -Lstage2 -Lrustllvm -Lrt rt/main.o -lrustrt -lrustllvm -lstd -lm\n \t@# dsymutil sometimes fails or prints a warning, but the\n \t@# program still runs.  Since it simplifies debugging other\n \t@# programs, I\\'ll live with the noise."}, {"sha": "3654c17aa44510810361a05c70e97b0d819bf4fe", "filename": "mk/stage3.mk", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2c16be424b86e5599851da74d98191560744c46d/mk%2Fstage3.mk", "raw_url": "https://github.com/rust-lang/rust/raw/2c16be424b86e5599851da74d98191560744c46d/mk%2Fstage3.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fstage3.mk?ref=2c16be424b86e5599851da74d98191560744c46d", "patch": "@@ -44,7 +44,7 @@ stage3/%.o: stage3/%.s\n stage3/%$(X): stage3/%.o  $(SREQ2)\n \t@$(call E, link [gcc]: $@)\n \t$(Q)gcc $(CFG_GCCISH_CFLAGS) stage3/glue.o -o $@ $< \\\n-      -Lstage3 -Lrustllvm -Lrt rt/main.a -lrustrt -lrustllvm -lstd -lm\n+      -Lstage3 -Lrustllvm -Lrt rt/main.o -lrustrt -lrustllvm -lstd -lm\n \t@# dsymutil sometimes fails or prints a warning, but the\n \t@# program still runs.  Since it simplifies debugging other\n \t@# programs, I\\'ll live with the noise."}, {"sha": "79ab8d3774b626ee4e81d7fd1984d8b708e71e9d", "filename": "mk/tests.mk", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/2c16be424b86e5599851da74d98191560744c46d/mk%2Ftests.mk", "raw_url": "https://github.com/rust-lang/rust/raw/2c16be424b86e5599851da74d98191560744c46d/mk%2Ftests.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Ftests.mk?ref=2c16be424b86e5599851da74d98191560744c46d", "patch": "@@ -185,7 +185,7 @@ compile-check: tidy \\\n %.stage0$(X): %.stage0.o  $(SREQ0)\n \t@$(call E, link [gcc]: $@)\n \t$(Q)gcc $(CFG_GCCISH_CFLAGS) stage1/glue.o -o $@ $< \\\n-      -Lstage1 -Lrt rt/main.a -lrustrt -lstd -lm\n+      -Lstage1 -Lrt rt/main.o -lrustrt -lstd -lm\n \t@# dsymutil sometimes fails or prints a warning, but the\n \t@# program still runs.  Since it simplifies debugging other\n \t@# programs, I\\'ll live with the noise.\n@@ -194,7 +194,7 @@ compile-check: tidy \\\n %.stage1$(X): %.stage1.o $(SREQ1)\n \t@$(call E, link [gcc]: $@)\n \t$(Q)gcc $(CFG_GCCISH_CFLAGS) stage2/glue.o -o $@ $< \\\n-      -Lstage2 -Lrt rt/main.a -lrustrt -lstd -lm\n+      -Lstage2 -Lrt rt/main.o -lrustrt -lstd -lm\n \t@# dsymutil sometimes fails or prints a warning, but the\n \t@# program still runs.  Since it simplifies debugging other\n \t@# programs, I\\'ll live with the noise.\n@@ -203,7 +203,7 @@ compile-check: tidy \\\n %.stage2$(X): %.stage2.o $(SREQ2)\n \t@$(call E, link [gcc]: $@)\n \t$(Q)gcc $(CFG_GCCISH_CFLAGS) stage3/glue.o -o $@ $< \\\n-      -Lstage3 -Lrt rt/main.a -lrustrt -lstd -lm\n+      -Lstage3 -Lrt rt/main.o -lrustrt -lstd -lm\n \t@# dsymutil sometimes fails or prints a warning, but the\n \t@# program still runs.  Since it simplifies debugging other\n \t@# programs, I\\'ll live with the noise."}]}