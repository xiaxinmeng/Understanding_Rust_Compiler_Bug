{"sha": "15aa2d61895a5b41100c15a3ef98c0f895d1a1b6", "node_id": "C_kwDOAAsO6NoAKDE1YWEyZDYxODk1YTViNDExMDBjMTVhM2VmOThjMGY4OTVkMWExYjY", "commit": {"author": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2022-05-17T10:01:29Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-05-17T10:01:29Z"}, "message": "Rollup merge of #96329 - aliemjay:fixed-by-90887, r=jackh726\n\nAdd a couple tests for #90887 fixes\n\ncloses #56556\ncloses #90875\n\nThese are confirmed fixes by #90887, so\nr? ``@jackh726``", "tree": {"sha": "5ce4f8107354e748d13c24dd12966486c238ed5a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5ce4f8107354e748d13c24dd12966486c238ed5a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/15aa2d61895a5b41100c15a3ef98c0f895d1a1b6", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJig3J5CRBK7hj4Ov3rIwAAQvkIAD45LrWjBC/OkIEGvnh+GG2J\nfU/9ULUyXGoOSgGr6Q50t6WdPaA5xsdivJ2apViCd4prHLQ7+aMZZEpJpBJIxkNu\nn/peYkRP/G5fKC89Hni97tS92jlAM3F3Afo49p7fbCOhHJnOsfIZI3v00m4+5Sg+\nfkMuOxg0sDy1JW+Wdxe2sjR0qXWBjPi8hk6B/s6S72HFKK5rRB0AML9YIygeqaRi\nKyafW2ajsIbyhOy0+BcXoi6c6qQEOgACmJkCDLlz6U/IL8YcT9fXH349OdZx4gkX\nMZRl5gp2BFWSu4thBHDtTFLe7wUqOhTJ4j0597BNQyAf/5+HP+A+9GkejX/u+cQ=\n=+VFM\n-----END PGP SIGNATURE-----\n", "payload": "tree 5ce4f8107354e748d13c24dd12966486c238ed5a\nparent 7355d971a954ed63293e4191f6677f60c1bc07d9\nparent a0b464ade8c728cbe7f4a05ecdc00f62be064142\nauthor Yuki Okushi <jtitor@2k36.org> 1652781689 +0900\ncommitter GitHub <noreply@github.com> 1652781689 +0900\n\nRollup merge of #96329 - aliemjay:fixed-by-90887, r=jackh726\n\nAdd a couple tests for #90887 fixes\n\ncloses #56556\ncloses #90875\n\nThese are confirmed fixes by #90887, so\nr? ``@jackh726``\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/15aa2d61895a5b41100c15a3ef98c0f895d1a1b6", "html_url": "https://github.com/rust-lang/rust/commit/15aa2d61895a5b41100c15a3ef98c0f895d1a1b6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/15aa2d61895a5b41100c15a3ef98c0f895d1a1b6/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7355d971a954ed63293e4191f6677f60c1bc07d9", "url": "https://api.github.com/repos/rust-lang/rust/commits/7355d971a954ed63293e4191f6677f60c1bc07d9", "html_url": "https://github.com/rust-lang/rust/commit/7355d971a954ed63293e4191f6677f60c1bc07d9"}, {"sha": "a0b464ade8c728cbe7f4a05ecdc00f62be064142", "url": "https://api.github.com/repos/rust-lang/rust/commits/a0b464ade8c728cbe7f4a05ecdc00f62be064142", "html_url": "https://github.com/rust-lang/rust/commit/a0b464ade8c728cbe7f4a05ecdc00f62be064142"}], "stats": {"total": 48, "additions": 48, "deletions": 0}, "files": [{"sha": "4d38cb19e9bf2e00dc68007899b44a319fbd7ba0", "filename": "src/test/ui/higher-rank-trait-bounds/normalize-under-binder/issue-56556.rs", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/15aa2d61895a5b41100c15a3ef98c0f895d1a1b6/src%2Ftest%2Fui%2Fhigher-rank-trait-bounds%2Fnormalize-under-binder%2Fissue-56556.rs", "raw_url": "https://github.com/rust-lang/rust/raw/15aa2d61895a5b41100c15a3ef98c0f895d1a1b6/src%2Ftest%2Fui%2Fhigher-rank-trait-bounds%2Fnormalize-under-binder%2Fissue-56556.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fhigher-rank-trait-bounds%2Fnormalize-under-binder%2Fissue-56556.rs?ref=15aa2d61895a5b41100c15a3ef98c0f895d1a1b6", "patch": "@@ -11,3 +11,20 @@ where\n fn main() {\n     foo::<Vec<u32>>(vec![]);\n }\n+\n+mod another {\n+    use std::ops::Deref;\n+\n+    fn test<T, TDeref>()\n+    where\n+        T: Deref<Target = TDeref>,\n+        TDeref: ?Sized,\n+        for<'a> &'a TDeref: IntoIterator,\n+        for<'a> <&'a TDeref as IntoIterator>::IntoIter: Clone,\n+    {\n+    }\n+\n+    fn main() {\n+        test::<Vec<u8>, _>();\n+    }\n+}"}, {"sha": "ffd6857d84a6eeebf3b3fa8795f4e996cee9fdab", "filename": "src/test/ui/higher-rank-trait-bounds/normalize-under-binder/issue-90875.rs", "status": "added", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/rust-lang/rust/blob/15aa2d61895a5b41100c15a3ef98c0f895d1a1b6/src%2Ftest%2Fui%2Fhigher-rank-trait-bounds%2Fnormalize-under-binder%2Fissue-90875.rs", "raw_url": "https://github.com/rust-lang/rust/raw/15aa2d61895a5b41100c15a3ef98c0f895d1a1b6/src%2Ftest%2Fui%2Fhigher-rank-trait-bounds%2Fnormalize-under-binder%2Fissue-90875.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fhigher-rank-trait-bounds%2Fnormalize-under-binder%2Fissue-90875.rs?ref=15aa2d61895a5b41100c15a3ef98c0f895d1a1b6", "patch": "@@ -0,0 +1,31 @@\n+// check-pass\n+\n+trait Variable<'a> {\n+    type Type;\n+}\n+\n+impl Variable<'_> for () {\n+    type Type = ();\n+}\n+\n+fn check<F, T>(_: F)\n+where\n+    F: Fn(T), // <- if removed, all fn_* then require type annotations\n+    F: for<'a> Fn(<T as Variable<'a>>::Type),\n+    T: for<'a> Variable<'a>,\n+{\n+}\n+\n+fn test(arg: impl Fn(())) {\n+    fn fn_1(_: ()) {}\n+    let fn_2 = |_: ()| ();\n+    let fn_3 = |a| fn_1(a);\n+    let fn_4 = arg;\n+\n+    check(fn_1); // Error\n+    check(fn_2); // Ok\n+    check(fn_3); // Ok\n+    check(fn_4); // Error\n+}\n+\n+fn main() {}"}]}