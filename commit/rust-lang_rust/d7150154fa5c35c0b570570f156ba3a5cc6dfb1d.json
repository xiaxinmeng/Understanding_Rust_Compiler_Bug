{"sha": "d7150154fa5c35c0b570570f156ba3a5cc6dfb1d", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ3MTUwMTU0ZmE1YzM1YzBiNTcwNTcwZjE1NmJhM2E1Y2M2ZGZiMWQ=", "commit": {"author": {"name": "Joshua Nelson", "email": "jyn514@gmail.com", "date": "2020-08-30T16:06:40Z"}, "committer": {"name": "Joshua Nelson", "email": "jyn514@gmail.com", "date": "2020-08-30T16:06:40Z"}, "message": "Improve tests\n\nNow this actually tests the links are generated correctly", "tree": {"sha": "8a2ed9d3cb2ece50720f7ac157b7dcfcc1dd8b63", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8a2ed9d3cb2ece50720f7ac157b7dcfcc1dd8b63"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d7150154fa5c35c0b570570f156ba3a5cc6dfb1d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d7150154fa5c35c0b570570f156ba3a5cc6dfb1d", "html_url": "https://github.com/rust-lang/rust/commit/d7150154fa5c35c0b570570f156ba3a5cc6dfb1d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d7150154fa5c35c0b570570f156ba3a5cc6dfb1d/comments", "author": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e885f00f24aab657b3a9835818fc96e638e7fb21", "url": "https://api.github.com/repos/rust-lang/rust/commits/e885f00f24aab657b3a9835818fc96e638e7fb21", "html_url": "https://github.com/rust-lang/rust/commit/e885f00f24aab657b3a9835818fc96e638e7fb21"}], "stats": {"total": 22, "additions": 18, "deletions": 4}, "files": [{"sha": "a4db2ffc445f8f9562681bd7cecd275c9a83c78e", "filename": "src/test/rustdoc/auxiliary/intra-link-pub-use.rs", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/d7150154fa5c35c0b570570f156ba3a5cc6dfb1d/src%2Ftest%2Frustdoc%2Fauxiliary%2Fintra-link-pub-use.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d7150154fa5c35c0b570570f156ba3a5cc6dfb1d/src%2Ftest%2Frustdoc%2Fauxiliary%2Fintra-link-pub-use.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fauxiliary%2Fintra-link-pub-use.rs?ref=d7150154fa5c35c0b570570f156ba3a5cc6dfb1d", "patch": "@@ -0,0 +1,4 @@\n+#![crate_name = \"inner\"]\n+\n+/// Documentation, including a link to [std::ptr]\n+pub fn f() {}"}, {"sha": "dd52249abc6d0ad27cab524bd0c82325ba7fa7e5", "filename": "src/test/rustdoc/intra-link-pub-use.rs", "status": "modified", "additions": 14, "deletions": 4, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/d7150154fa5c35c0b570570f156ba3a5cc6dfb1d/src%2Ftest%2Frustdoc%2Fintra-link-pub-use.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d7150154fa5c35c0b570570f156ba3a5cc6dfb1d/src%2Ftest%2Frustdoc%2Fintra-link-pub-use.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fintra-link-pub-use.rs?ref=d7150154fa5c35c0b570570f156ba3a5cc6dfb1d", "patch": "@@ -1,17 +1,27 @@\n+// aux-build: intra-link-pub-use.rs\n #![deny(broken_intra_doc_links)]\n+#![crate_name = \"outer\"]\n+\n+extern crate inner;\n+\n+/// [mod@std::env] [g]\n \n-/// [std::env] [g]\n // FIXME: This can't be tested because rustdoc doesn't show documentation on pub re-exports.\n // Until then, comment out the `htmldocck` test.\n // This test still does something; namely check that no incorrect errors are emitted when\n // documenting the re-export.\n \n-// @has intra_link_pub_use/index.html\n+// @has outer/index.html\n // @ has - '//a[@href=\"https://doc.rust-lang.org/nightly/std/env/fn.var.html\"]' \"std::env\"\n-// @ has - '//a[@href=\"../intra_link_pub_use/fn.f.html\"]' \"g\"\n+// @ has - '//a[@href=\"../outer/fn.f.html\"]' \"g\"\n pub use f as g;\n \n+// FIXME: same as above\n /// [std::env]\n extern crate self as _;\n \n-pub fn f() {}\n+// Make sure the documentation is actually correct by documenting an inlined re-export\n+/// [mod@std::env]\n+// @has outer/fn.f.html\n+// @has - '//a[@href=\"https://doc.rust-lang.org/nightly/std/env/index.html\"]' \"std::env\"\n+pub use inner::f;"}]}