{"sha": "0da81997a2652b8a46506cf0a5e4d382ea1f3308", "node_id": "C_kwDOAAsO6NoAKDBkYTgxOTk3YTI2NTJiOGE0NjUwNmNmMGE1ZTRkMzgyZWExZjMzMDg", "commit": {"author": {"name": "Eric Holk", "email": "ericholk@microsoft.com", "date": "2022-07-29T22:13:44Z"}, "committer": {"name": "Eric Holk", "email": "ericholk@microsoft.com", "date": "2022-07-29T22:59:26Z"}, "message": "Fix after rebasing", "tree": {"sha": "540e2156c18bbb825238e21de71afcd99b44caf0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/540e2156c18bbb825238e21de71afcd99b44caf0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0da81997a2652b8a46506cf0a5e4d382ea1f3308", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0da81997a2652b8a46506cf0a5e4d382ea1f3308", "html_url": "https://github.com/rust-lang/rust/commit/0da81997a2652b8a46506cf0a5e4d382ea1f3308", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0da81997a2652b8a46506cf0a5e4d382ea1f3308/comments", "author": {"login": "eholk", "id": 105766, "node_id": "MDQ6VXNlcjEwNTc2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/105766?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eholk", "html_url": "https://github.com/eholk", "followers_url": "https://api.github.com/users/eholk/followers", "following_url": "https://api.github.com/users/eholk/following{/other_user}", "gists_url": "https://api.github.com/users/eholk/gists{/gist_id}", "starred_url": "https://api.github.com/users/eholk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eholk/subscriptions", "organizations_url": "https://api.github.com/users/eholk/orgs", "repos_url": "https://api.github.com/users/eholk/repos", "events_url": "https://api.github.com/users/eholk/events{/privacy}", "received_events_url": "https://api.github.com/users/eholk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "eholk", "id": 105766, "node_id": "MDQ6VXNlcjEwNTc2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/105766?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eholk", "html_url": "https://github.com/eholk", "followers_url": "https://api.github.com/users/eholk/followers", "following_url": "https://api.github.com/users/eholk/following{/other_user}", "gists_url": "https://api.github.com/users/eholk/gists{/gist_id}", "starred_url": "https://api.github.com/users/eholk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eholk/subscriptions", "organizations_url": "https://api.github.com/users/eholk/orgs", "repos_url": "https://api.github.com/users/eholk/repos", "events_url": "https://api.github.com/users/eholk/events{/privacy}", "received_events_url": "https://api.github.com/users/eholk/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c42c77bc7b64cf9015c5b8e7f11f192e499509b3", "url": "https://api.github.com/repos/rust-lang/rust/commits/c42c77bc7b64cf9015c5b8e7f11f192e499509b3", "html_url": "https://github.com/rust-lang/rust/commit/c42c77bc7b64cf9015c5b8e7f11f192e499509b3"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "85a0d4e44990602e6a6bcdb7172bf0057d0f685f", "filename": "compiler/rustc_typeck/src/check/generator_interior.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0da81997a2652b8a46506cf0a5e4d382ea1f3308/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fgenerator_interior.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0da81997a2652b8a46506cf0a5e4d382ea1f3308/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fgenerator_interior.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fgenerator_interior.rs?ref=0da81997a2652b8a46506cf0a5e4d382ea1f3308", "patch": "@@ -584,7 +584,7 @@ fn check_must_not_suspend_ty<'tcx>(\n         }\n         // If drop tracking is enabled, we want to look through references, since the referrent\n         // may not be considered live across the await point.\n-        ty::Ref(_region, ty, _mutability) if fcx.sess().opts.debugging_opts.drop_tracking => {\n+        ty::Ref(_region, ty, _mutability) if fcx.sess().opts.unstable_opts.drop_tracking => {\n             let descr_pre = &format!(\"{}reference{} to \", data.descr_pre, plural_suffix);\n             check_must_not_suspend_ty(fcx, ty, hir_id, SuspendCheckData { descr_pre, ..data })\n         }"}, {"sha": "c49d27128537155c497ece58431a6814fcea9bdc", "filename": "src/test/ui/lint/must_not_suspend/ref-drop-tracking.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0da81997a2652b8a46506cf0a5e4d382ea1f3308/src%2Ftest%2Fui%2Flint%2Fmust_not_suspend%2Fref-drop-tracking.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/0da81997a2652b8a46506cf0a5e4d382ea1f3308/src%2Ftest%2Fui%2Flint%2Fmust_not_suspend%2Fref-drop-tracking.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fmust_not_suspend%2Fref-drop-tracking.stderr?ref=0da81997a2652b8a46506cf0a5e4d382ea1f3308", "patch": "@@ -3,7 +3,7 @@ error: reference to `Umm` held across a suspend point, but should not be\n    |\n LL |         let guard = &mut self.u;\n    |             ^^^^^\n-LL | \n+LL |\n LL |         other().await;\n    |                ------ the value is held across this suspend point\n    |"}]}