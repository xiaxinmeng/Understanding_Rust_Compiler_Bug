{"sha": "c3e28f06463854e4711c4c49a49c77d1e136969f", "node_id": "MDY6Q29tbWl0NzI0NzEyOmMzZTI4ZjA2NDYzODU0ZTQ3MTFjNGM0OWE0OWM3N2QxZTEzNjk2OWY=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-09-03T21:49:21Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-09-03T21:49:21Z"}, "message": "extern blocks", "tree": {"sha": "9f031e9b9b38e1136a019e67120398f47f199066", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9f031e9b9b38e1136a019e67120398f47f199066"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c3e28f06463854e4711c4c49a49c77d1e136969f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c3e28f06463854e4711c4c49a49c77d1e136969f", "html_url": "https://github.com/rust-lang/rust/commit/c3e28f06463854e4711c4c49a49c77d1e136969f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c3e28f06463854e4711c4c49a49c77d1e136969f/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "952da31f44b717d5679c1c0baffcd998c0f67266", "url": "https://api.github.com/repos/rust-lang/rust/commits/952da31f44b717d5679c1c0baffcd998c0f67266", "html_url": "https://github.com/rust-lang/rust/commit/952da31f44b717d5679c1c0baffcd998c0f67266"}], "stats": {"total": 1040, "additions": 1032, "deletions": 8}, "files": [{"sha": "5466146b48879a2af7389e286e7704a3312e9c75", "filename": "crates/libsyntax2/src/grammar/items/mod.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c3e28f06463854e4711c4c49a49c77d1e136969f/crates%2Flibsyntax2%2Fsrc%2Fgrammar%2Fitems%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c3e28f06463854e4711c4c49a49c77d1e136969f/crates%2Flibsyntax2%2Fsrc%2Fgrammar%2Fitems%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Flibsyntax2%2Fsrc%2Fgrammar%2Fitems%2Fmod.rs?ref=c3e28f06463854e4711c4c49a49c77d1e136969f", "patch": "@@ -227,6 +227,7 @@ fn extern_item_list(p: &mut Parser) {\n     assert!(p.at(L_CURLY));\n     let m = p.start();\n     p.bump();\n+    mod_contents(p, true);\n     p.expect(R_CURLY);\n     m.complete(p, EXTERN_ITEM_LIST);\n }"}, {"sha": "3b5115110600e3141a83bcf1c56a57e88390f3f5", "filename": "crates/libsyntax2/src/lib.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c3e28f06463854e4711c4c49a49c77d1e136969f/crates%2Flibsyntax2%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c3e28f06463854e4711c4c49a49c77d1e136969f/crates%2Flibsyntax2%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Flibsyntax2%2Fsrc%2Flib.rs?ref=c3e28f06463854e4711c4c49a49c77d1e136969f", "patch": "@@ -127,7 +127,8 @@ fn validate_block_structure(root: SyntaxNodeRef) {\n                     assert_eq!(\n                         node.parent(),\n                         pair.parent(),\n-                        \"\\nunpaired curleys:\\n{}\",\n+                        \"\\nunpaired curleys:\\n{}\\n{}\\n\",\n+                        root.text(),\n                         utils::dump_tree(root),\n                     );\n                     assert!("}, {"sha": "b33ac273ca6e83e81539d3e8a8a0646470490af8", "filename": "crates/libsyntax2/tests/data/parser/ok/0031_extern.rs", "status": "added", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/c3e28f06463854e4711c4c49a49c77d1e136969f/crates%2Flibsyntax2%2Ftests%2Fdata%2Fparser%2Fok%2F0031_extern.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c3e28f06463854e4711c4c49a49c77d1e136969f/crates%2Flibsyntax2%2Ftests%2Fdata%2Fparser%2Fok%2F0031_extern.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Flibsyntax2%2Ftests%2Fdata%2Fparser%2Fok%2F0031_extern.rs?ref=c3e28f06463854e4711c4c49a49c77d1e136969f", "patch": "@@ -0,0 +1,29 @@\n+extern {\n+    pub fn socket(domain: ::c_int, ty: ::c_int, protocol: ::c_int) -> ::c_int;\n+    pub fn bind(fd: ::c_int, addr: *const sockaddr, len: socklen_t) -> ::c_int;\n+    pub fn connect(socket: ::c_int, address: *const sockaddr,\n+                   len: socklen_t) -> ::c_int;\n+    pub fn listen(socket: ::c_int, backlog: ::c_int) -> ::c_int;\n+    pub fn getsockname(socket: ::c_int, address: *mut sockaddr,\n+                       address_len: *mut socklen_t) -> ::c_int;\n+    pub fn getsockopt(sockfd: ::c_int,\n+                      level: ::c_int,\n+                      optname: ::c_int,\n+                      optval: *mut ::c_void,\n+                      optlen: *mut ::socklen_t) -> ::c_int;\n+    pub fn setsockopt(socket: ::c_int, level: ::c_int, name: ::c_int,\n+                      value: *const ::c_void,\n+                      option_len: socklen_t) -> ::c_int;\n+    pub fn getpeername(socket: ::c_int, address: *mut sockaddr,\n+                       address_len: *mut socklen_t) -> ::c_int;\n+    pub fn sendto(socket: ::c_int, buf: *const ::c_void, len: ::size_t,\n+                  flags: ::c_int, addr: *const sockaddr,\n+                  addrlen: socklen_t) -> ::ssize_t;\n+    pub fn send(socket: ::c_int, buf: *const ::c_void, len: ::size_t,\n+                flags: ::c_int) -> ::ssize_t;\n+    pub fn recvfrom(socket: ::c_int, buf: *mut ::c_void, len: ::size_t,\n+                    flags: ::c_int, addr: *mut ::sockaddr,\n+                    addrlen: *mut ::socklen_t) -> ::ssize_t;\n+    pub fn recv(socket: ::c_int, buf: *mut ::c_void, len: ::size_t,\n+                flags: ::c_int) -> ::ssize_t;\n+}"}, {"sha": "f3f1c25a9c5cfedb6a81b59e8fafb7c48bd95e1d", "filename": "crates/libsyntax2/tests/data/parser/ok/0031_extern.txt", "status": "added", "additions": 973, "deletions": 0, "changes": 973, "blob_url": "https://github.com/rust-lang/rust/blob/c3e28f06463854e4711c4c49a49c77d1e136969f/crates%2Flibsyntax2%2Ftests%2Fdata%2Fparser%2Fok%2F0031_extern.txt", "raw_url": "https://github.com/rust-lang/rust/raw/c3e28f06463854e4711c4c49a49c77d1e136969f/crates%2Flibsyntax2%2Ftests%2Fdata%2Fparser%2Fok%2F0031_extern.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Flibsyntax2%2Ftests%2Fdata%2Fparser%2Fok%2F0031_extern.txt?ref=c3e28f06463854e4711c4c49a49c77d1e136969f", "patch": "@@ -0,0 +1,973 @@\n+ROOT@[0; 1598)\n+  EXTERN_BLOCK@[0; 1597)\n+    ABI@[0; 6)\n+      EXTERN_KW@[0; 6)\n+    WHITESPACE@[6; 7)\n+    EXTERN_ITEM_LIST@[7; 1597)\n+      L_CURLY@[7; 8)\n+      WHITESPACE@[8; 13)\n+      FN_DEF@[13; 87)\n+        VISIBILITY@[13; 16)\n+          PUB_KW@[13; 16)\n+        WHITESPACE@[16; 17)\n+        FN_KW@[17; 19)\n+        WHITESPACE@[19; 20)\n+        NAME@[20; 26)\n+          IDENT@[20; 26) \"socket\"\n+        PARAM_LIST@[26; 75)\n+          L_PAREN@[26; 27)\n+          PARAM@[27; 42)\n+            BIND_PAT@[27; 33)\n+              NAME@[27; 33)\n+                IDENT@[27; 33) \"domain\"\n+            COLON@[33; 34)\n+            WHITESPACE@[34; 35)\n+            PATH_TYPE@[35; 42)\n+              PATH@[35; 42)\n+                PATH_SEGMENT@[35; 42)\n+                  COLONCOLON@[35; 37)\n+                  NAME_REF@[37; 42)\n+                    IDENT@[37; 42) \"c_int\"\n+          COMMA@[42; 43)\n+          WHITESPACE@[43; 44)\n+          PARAM@[44; 55)\n+            BIND_PAT@[44; 46)\n+              NAME@[44; 46)\n+                IDENT@[44; 46) \"ty\"\n+            COLON@[46; 47)\n+            WHITESPACE@[47; 48)\n+            PATH_TYPE@[48; 55)\n+              PATH@[48; 55)\n+                PATH_SEGMENT@[48; 55)\n+                  COLONCOLON@[48; 50)\n+                  NAME_REF@[50; 55)\n+                    IDENT@[50; 55) \"c_int\"\n+          COMMA@[55; 56)\n+          WHITESPACE@[56; 57)\n+          PARAM@[57; 74)\n+            BIND_PAT@[57; 65)\n+              NAME@[57; 65)\n+                IDENT@[57; 65) \"protocol\"\n+            COLON@[65; 66)\n+            WHITESPACE@[66; 67)\n+            PATH_TYPE@[67; 74)\n+              PATH@[67; 74)\n+                PATH_SEGMENT@[67; 74)\n+                  COLONCOLON@[67; 69)\n+                  NAME_REF@[69; 74)\n+                    IDENT@[69; 74) \"c_int\"\n+          R_PAREN@[74; 75)\n+        WHITESPACE@[75; 76)\n+        RET_TYPE@[76; 86)\n+          THIN_ARROW@[76; 78)\n+          WHITESPACE@[78; 79)\n+          PATH_TYPE@[79; 86)\n+            PATH@[79; 86)\n+              PATH_SEGMENT@[79; 86)\n+                COLONCOLON@[79; 81)\n+                NAME_REF@[81; 86)\n+                  IDENT@[81; 86) \"c_int\"\n+        SEMI@[86; 87)\n+      WHITESPACE@[87; 92)\n+      FN_DEF@[92; 167)\n+        VISIBILITY@[92; 95)\n+          PUB_KW@[92; 95)\n+        WHITESPACE@[95; 96)\n+        FN_KW@[96; 98)\n+        WHITESPACE@[98; 99)\n+        NAME@[99; 103)\n+          IDENT@[99; 103) \"bind\"\n+        PARAM_LIST@[103; 155)\n+          L_PAREN@[103; 104)\n+          PARAM@[104; 115)\n+            BIND_PAT@[104; 106)\n+              NAME@[104; 106)\n+                IDENT@[104; 106) \"fd\"\n+            COLON@[106; 107)\n+            WHITESPACE@[107; 108)\n+            PATH_TYPE@[108; 115)\n+              PATH@[108; 115)\n+                PATH_SEGMENT@[108; 115)\n+                  COLONCOLON@[108; 110)\n+                  NAME_REF@[110; 115)\n+                    IDENT@[110; 115) \"c_int\"\n+          COMMA@[115; 116)\n+          WHITESPACE@[116; 117)\n+          PARAM@[117; 138)\n+            BIND_PAT@[117; 121)\n+              NAME@[117; 121)\n+                IDENT@[117; 121) \"addr\"\n+            COLON@[121; 122)\n+            WHITESPACE@[122; 123)\n+            POINTER_TYPE@[123; 138)\n+              STAR@[123; 124)\n+              CONST_KW@[124; 129)\n+              WHITESPACE@[129; 130)\n+              PATH_TYPE@[130; 138)\n+                PATH@[130; 138)\n+                  PATH_SEGMENT@[130; 138)\n+                    NAME_REF@[130; 138)\n+                      IDENT@[130; 138) \"sockaddr\"\n+          COMMA@[138; 139)\n+          WHITESPACE@[139; 140)\n+          PARAM@[140; 154)\n+            BIND_PAT@[140; 143)\n+              NAME@[140; 143)\n+                IDENT@[140; 143) \"len\"\n+            COLON@[143; 144)\n+            WHITESPACE@[144; 145)\n+            PATH_TYPE@[145; 154)\n+              PATH@[145; 154)\n+                PATH_SEGMENT@[145; 154)\n+                  NAME_REF@[145; 154)\n+                    IDENT@[145; 154) \"socklen_t\"\n+          R_PAREN@[154; 155)\n+        WHITESPACE@[155; 156)\n+        RET_TYPE@[156; 166)\n+          THIN_ARROW@[156; 158)\n+          WHITESPACE@[158; 159)\n+          PATH_TYPE@[159; 166)\n+            PATH@[159; 166)\n+              PATH_SEGMENT@[159; 166)\n+                COLONCOLON@[159; 161)\n+                NAME_REF@[161; 166)\n+                  IDENT@[161; 166) \"c_int\"\n+        SEMI@[166; 167)\n+      WHITESPACE@[167; 172)\n+      FN_DEF@[172; 276)\n+        VISIBILITY@[172; 175)\n+          PUB_KW@[172; 175)\n+        WHITESPACE@[175; 176)\n+        FN_KW@[176; 178)\n+        WHITESPACE@[178; 179)\n+        NAME@[179; 186)\n+          IDENT@[179; 186) \"connect\"\n+        PARAM_LIST@[186; 264)\n+          L_PAREN@[186; 187)\n+          PARAM@[187; 202)\n+            BIND_PAT@[187; 193)\n+              NAME@[187; 193)\n+                IDENT@[187; 193) \"socket\"\n+            COLON@[193; 194)\n+            WHITESPACE@[194; 195)\n+            PATH_TYPE@[195; 202)\n+              PATH@[195; 202)\n+                PATH_SEGMENT@[195; 202)\n+                  COLONCOLON@[195; 197)\n+                  NAME_REF@[197; 202)\n+                    IDENT@[197; 202) \"c_int\"\n+          COMMA@[202; 203)\n+          WHITESPACE@[203; 204)\n+          PARAM@[204; 228)\n+            BIND_PAT@[204; 211)\n+              NAME@[204; 211)\n+                IDENT@[204; 211) \"address\"\n+            COLON@[211; 212)\n+            WHITESPACE@[212; 213)\n+            POINTER_TYPE@[213; 228)\n+              STAR@[213; 214)\n+              CONST_KW@[214; 219)\n+              WHITESPACE@[219; 220)\n+              PATH_TYPE@[220; 228)\n+                PATH@[220; 228)\n+                  PATH_SEGMENT@[220; 228)\n+                    NAME_REF@[220; 228)\n+                      IDENT@[220; 228) \"sockaddr\"\n+          COMMA@[228; 229)\n+          WHITESPACE@[229; 249)\n+          PARAM@[249; 263)\n+            BIND_PAT@[249; 252)\n+              NAME@[249; 252)\n+                IDENT@[249; 252) \"len\"\n+            COLON@[252; 253)\n+            WHITESPACE@[253; 254)\n+            PATH_TYPE@[254; 263)\n+              PATH@[254; 263)\n+                PATH_SEGMENT@[254; 263)\n+                  NAME_REF@[254; 263)\n+                    IDENT@[254; 263) \"socklen_t\"\n+          R_PAREN@[263; 264)\n+        WHITESPACE@[264; 265)\n+        RET_TYPE@[265; 275)\n+          THIN_ARROW@[265; 267)\n+          WHITESPACE@[267; 268)\n+          PATH_TYPE@[268; 275)\n+            PATH@[268; 275)\n+              PATH_SEGMENT@[268; 275)\n+                COLONCOLON@[268; 270)\n+                NAME_REF@[270; 275)\n+                  IDENT@[270; 275) \"c_int\"\n+        SEMI@[275; 276)\n+      WHITESPACE@[276; 281)\n+      FN_DEF@[281; 341)\n+        VISIBILITY@[281; 284)\n+          PUB_KW@[281; 284)\n+        WHITESPACE@[284; 285)\n+        FN_KW@[285; 287)\n+        WHITESPACE@[287; 288)\n+        NAME@[288; 294)\n+          IDENT@[288; 294) \"listen\"\n+        PARAM_LIST@[294; 329)\n+          L_PAREN@[294; 295)\n+          PARAM@[295; 310)\n+            BIND_PAT@[295; 301)\n+              NAME@[295; 301)\n+                IDENT@[295; 301) \"socket\"\n+            COLON@[301; 302)\n+            WHITESPACE@[302; 303)\n+            PATH_TYPE@[303; 310)\n+              PATH@[303; 310)\n+                PATH_SEGMENT@[303; 310)\n+                  COLONCOLON@[303; 305)\n+                  NAME_REF@[305; 310)\n+                    IDENT@[305; 310) \"c_int\"\n+          COMMA@[310; 311)\n+          WHITESPACE@[311; 312)\n+          PARAM@[312; 328)\n+            BIND_PAT@[312; 319)\n+              NAME@[312; 319)\n+                IDENT@[312; 319) \"backlog\"\n+            COLON@[319; 320)\n+            WHITESPACE@[320; 321)\n+            PATH_TYPE@[321; 328)\n+              PATH@[321; 328)\n+                PATH_SEGMENT@[321; 328)\n+                  COLONCOLON@[321; 323)\n+                  NAME_REF@[323; 328)\n+                    IDENT@[323; 328) \"c_int\"\n+          R_PAREN@[328; 329)\n+        WHITESPACE@[329; 330)\n+        RET_TYPE@[330; 340)\n+          THIN_ARROW@[330; 332)\n+          WHITESPACE@[332; 333)\n+          PATH_TYPE@[333; 340)\n+            PATH@[333; 340)\n+              PATH_SEGMENT@[333; 340)\n+                COLONCOLON@[333; 335)\n+                NAME_REF@[335; 340)\n+                  IDENT@[335; 340) \"c_int\"\n+        SEMI@[340; 341)\n+      WHITESPACE@[341; 346)\n+      FN_DEF@[346; 469)\n+        VISIBILITY@[346; 349)\n+          PUB_KW@[346; 349)\n+        WHITESPACE@[349; 350)\n+        FN_KW@[350; 352)\n+        WHITESPACE@[352; 353)\n+        NAME@[353; 364)\n+          IDENT@[353; 364) \"getsockname\"\n+        PARAM_LIST@[364; 457)\n+          L_PAREN@[364; 365)\n+          PARAM@[365; 380)\n+            BIND_PAT@[365; 371)\n+              NAME@[365; 371)\n+                IDENT@[365; 371) \"socket\"\n+            COLON@[371; 372)\n+            WHITESPACE@[372; 373)\n+            PATH_TYPE@[373; 380)\n+              PATH@[373; 380)\n+                PATH_SEGMENT@[373; 380)\n+                  COLONCOLON@[373; 375)\n+                  NAME_REF@[375; 380)\n+                    IDENT@[375; 380) \"c_int\"\n+          COMMA@[380; 381)\n+          WHITESPACE@[381; 382)\n+          PARAM@[382; 404)\n+            BIND_PAT@[382; 389)\n+              NAME@[382; 389)\n+                IDENT@[382; 389) \"address\"\n+            COLON@[389; 390)\n+            WHITESPACE@[390; 391)\n+            POINTER_TYPE@[391; 404)\n+              STAR@[391; 392)\n+              MUT_KW@[392; 395)\n+              WHITESPACE@[395; 396)\n+              PATH_TYPE@[396; 404)\n+                PATH@[396; 404)\n+                  PATH_SEGMENT@[396; 404)\n+                    NAME_REF@[396; 404)\n+                      IDENT@[396; 404) \"sockaddr\"\n+          COMMA@[404; 405)\n+          WHITESPACE@[405; 429)\n+          PARAM@[429; 456)\n+            BIND_PAT@[429; 440)\n+              NAME@[429; 440)\n+                IDENT@[429; 440) \"address_len\"\n+            COLON@[440; 441)\n+            WHITESPACE@[441; 442)\n+            POINTER_TYPE@[442; 456)\n+              STAR@[442; 443)\n+              MUT_KW@[443; 446)\n+              WHITESPACE@[446; 447)\n+              PATH_TYPE@[447; 456)\n+                PATH@[447; 456)\n+                  PATH_SEGMENT@[447; 456)\n+                    NAME_REF@[447; 456)\n+                      IDENT@[447; 456) \"socklen_t\"\n+          R_PAREN@[456; 457)\n+        WHITESPACE@[457; 458)\n+        RET_TYPE@[458; 468)\n+          THIN_ARROW@[458; 460)\n+          WHITESPACE@[460; 461)\n+          PATH_TYPE@[461; 468)\n+            PATH@[461; 468)\n+              PATH_SEGMENT@[461; 468)\n+                COLONCOLON@[461; 463)\n+                NAME_REF@[463; 468)\n+                  IDENT@[463; 468) \"c_int\"\n+        SEMI@[468; 469)\n+      WHITESPACE@[469; 474)\n+      FN_DEF@[474; 691)\n+        VISIBILITY@[474; 477)\n+          PUB_KW@[474; 477)\n+        WHITESPACE@[477; 478)\n+        FN_KW@[478; 480)\n+        WHITESPACE@[480; 481)\n+        NAME@[481; 491)\n+          IDENT@[481; 491) \"getsockopt\"\n+        PARAM_LIST@[491; 679)\n+          L_PAREN@[491; 492)\n+          PARAM@[492; 507)\n+            BIND_PAT@[492; 498)\n+              NAME@[492; 498)\n+                IDENT@[492; 498) \"sockfd\"\n+            COLON@[498; 499)\n+            WHITESPACE@[499; 500)\n+            PATH_TYPE@[500; 507)\n+              PATH@[500; 507)\n+                PATH_SEGMENT@[500; 507)\n+                  COLONCOLON@[500; 502)\n+                  NAME_REF@[502; 507)\n+                    IDENT@[502; 507) \"c_int\"\n+          COMMA@[507; 508)\n+          WHITESPACE@[508; 531)\n+          PARAM@[531; 545)\n+            BIND_PAT@[531; 536)\n+              NAME@[531; 536)\n+                IDENT@[531; 536) \"level\"\n+            COLON@[536; 537)\n+            WHITESPACE@[537; 538)\n+            PATH_TYPE@[538; 545)\n+              PATH@[538; 545)\n+                PATH_SEGMENT@[538; 545)\n+                  COLONCOLON@[538; 540)\n+                  NAME_REF@[540; 545)\n+                    IDENT@[540; 545) \"c_int\"\n+          COMMA@[545; 546)\n+          WHITESPACE@[546; 569)\n+          PARAM@[569; 585)\n+            BIND_PAT@[569; 576)\n+              NAME@[569; 576)\n+                IDENT@[569; 576) \"optname\"\n+            COLON@[576; 577)\n+            WHITESPACE@[577; 578)\n+            PATH_TYPE@[578; 585)\n+              PATH@[578; 585)\n+                PATH_SEGMENT@[578; 585)\n+                  COLONCOLON@[578; 580)\n+                  NAME_REF@[580; 585)\n+                    IDENT@[580; 585) \"c_int\"\n+          COMMA@[585; 586)\n+          WHITESPACE@[586; 609)\n+          PARAM@[609; 630)\n+            BIND_PAT@[609; 615)\n+              NAME@[609; 615)\n+                IDENT@[609; 615) \"optval\"\n+            COLON@[615; 616)\n+            WHITESPACE@[616; 617)\n+            POINTER_TYPE@[617; 630)\n+              STAR@[617; 618)\n+              MUT_KW@[618; 621)\n+              WHITESPACE@[621; 622)\n+              PATH_TYPE@[622; 630)\n+                PATH@[622; 630)\n+                  PATH_SEGMENT@[622; 630)\n+                    COLONCOLON@[622; 624)\n+                    NAME_REF@[624; 630)\n+                      IDENT@[624; 630) \"c_void\"\n+          COMMA@[630; 631)\n+          WHITESPACE@[631; 654)\n+          PARAM@[654; 678)\n+            BIND_PAT@[654; 660)\n+              NAME@[654; 660)\n+                IDENT@[654; 660) \"optlen\"\n+            COLON@[660; 661)\n+            WHITESPACE@[661; 662)\n+            POINTER_TYPE@[662; 678)\n+              STAR@[662; 663)\n+              MUT_KW@[663; 666)\n+              WHITESPACE@[666; 667)\n+              PATH_TYPE@[667; 678)\n+                PATH@[667; 678)\n+                  PATH_SEGMENT@[667; 678)\n+                    COLONCOLON@[667; 669)\n+                    NAME_REF@[669; 678)\n+                      IDENT@[669; 678) \"socklen_t\"\n+          R_PAREN@[678; 679)\n+        WHITESPACE@[679; 680)\n+        RET_TYPE@[680; 690)\n+          THIN_ARROW@[680; 682)\n+          WHITESPACE@[682; 683)\n+          PATH_TYPE@[683; 690)\n+            PATH@[683; 690)\n+              PATH_SEGMENT@[683; 690)\n+                COLONCOLON@[683; 685)\n+                NAME_REF@[685; 690)\n+                  IDENT@[685; 690) \"c_int\"\n+        SEMI@[690; 691)\n+      WHITESPACE@[691; 696)\n+      FN_DEF@[696; 864)\n+        VISIBILITY@[696; 699)\n+          PUB_KW@[696; 699)\n+        WHITESPACE@[699; 700)\n+        FN_KW@[700; 702)\n+        WHITESPACE@[702; 703)\n+        NAME@[703; 713)\n+          IDENT@[703; 713) \"setsockopt\"\n+        PARAM_LIST@[713; 852)\n+          L_PAREN@[713; 714)\n+          PARAM@[714; 729)\n+            BIND_PAT@[714; 720)\n+              NAME@[714; 720)\n+                IDENT@[714; 720) \"socket\"\n+            COLON@[720; 721)\n+            WHITESPACE@[721; 722)\n+            PATH_TYPE@[722; 729)\n+              PATH@[722; 729)\n+                PATH_SEGMENT@[722; 729)\n+                  COLONCOLON@[722; 724)\n+                  NAME_REF@[724; 729)\n+                    IDENT@[724; 729) \"c_int\"\n+          COMMA@[729; 730)\n+          WHITESPACE@[730; 731)\n+          PARAM@[731; 745)\n+            BIND_PAT@[731; 736)\n+              NAME@[731; 736)\n+                IDENT@[731; 736) \"level\"\n+            COLON@[736; 737)\n+            WHITESPACE@[737; 738)\n+            PATH_TYPE@[738; 745)\n+              PATH@[738; 745)\n+                PATH_SEGMENT@[738; 745)\n+                  COLONCOLON@[738; 740)\n+                  NAME_REF@[740; 745)\n+                    IDENT@[740; 745) \"c_int\"\n+          COMMA@[745; 746)\n+          WHITESPACE@[746; 747)\n+          PARAM@[747; 760)\n+            BIND_PAT@[747; 751)\n+              NAME@[747; 751)\n+                IDENT@[747; 751) \"name\"\n+            COLON@[751; 752)\n+            WHITESPACE@[752; 753)\n+            PATH_TYPE@[753; 760)\n+              PATH@[753; 760)\n+                PATH_SEGMENT@[753; 760)\n+                  COLONCOLON@[753; 755)\n+                  NAME_REF@[755; 760)\n+                    IDENT@[755; 760) \"c_int\"\n+          COMMA@[760; 761)\n+          WHITESPACE@[761; 784)\n+          PARAM@[784; 806)\n+            BIND_PAT@[784; 789)\n+              NAME@[784; 789)\n+                IDENT@[784; 789) \"value\"\n+            COLON@[789; 790)\n+            WHITESPACE@[790; 791)\n+            POINTER_TYPE@[791; 806)\n+              STAR@[791; 792)\n+              CONST_KW@[792; 797)\n+              WHITESPACE@[797; 798)\n+              PATH_TYPE@[798; 806)\n+                PATH@[798; 806)\n+                  PATH_SEGMENT@[798; 806)\n+                    COLONCOLON@[798; 800)\n+                    NAME_REF@[800; 806)\n+                      IDENT@[800; 806) \"c_void\"\n+          COMMA@[806; 807)\n+          WHITESPACE@[807; 830)\n+          PARAM@[830; 851)\n+            BIND_PAT@[830; 840)\n+              NAME@[830; 840)\n+                IDENT@[830; 840) \"option_len\"\n+            COLON@[840; 841)\n+            WHITESPACE@[841; 842)\n+            PATH_TYPE@[842; 851)\n+              PATH@[842; 851)\n+                PATH_SEGMENT@[842; 851)\n+                  NAME_REF@[842; 851)\n+                    IDENT@[842; 851) \"socklen_t\"\n+          R_PAREN@[851; 852)\n+        WHITESPACE@[852; 853)\n+        RET_TYPE@[853; 863)\n+          THIN_ARROW@[853; 855)\n+          WHITESPACE@[855; 856)\n+          PATH_TYPE@[856; 863)\n+            PATH@[856; 863)\n+              PATH_SEGMENT@[856; 863)\n+                COLONCOLON@[856; 858)\n+                NAME_REF@[858; 863)\n+                  IDENT@[858; 863) \"c_int\"\n+        SEMI@[863; 864)\n+      WHITESPACE@[864; 869)\n+      FN_DEF@[869; 992)\n+        VISIBILITY@[869; 872)\n+          PUB_KW@[869; 872)\n+        WHITESPACE@[872; 873)\n+        FN_KW@[873; 875)\n+        WHITESPACE@[875; 876)\n+        NAME@[876; 887)\n+          IDENT@[876; 887) \"getpeername\"\n+        PARAM_LIST@[887; 980)\n+          L_PAREN@[887; 888)\n+          PARAM@[888; 903)\n+            BIND_PAT@[888; 894)\n+              NAME@[888; 894)\n+                IDENT@[888; 894) \"socket\"\n+            COLON@[894; 895)\n+            WHITESPACE@[895; 896)\n+            PATH_TYPE@[896; 903)\n+              PATH@[896; 903)\n+                PATH_SEGMENT@[896; 903)\n+                  COLONCOLON@[896; 898)\n+                  NAME_REF@[898; 903)\n+                    IDENT@[898; 903) \"c_int\"\n+          COMMA@[903; 904)\n+          WHITESPACE@[904; 905)\n+          PARAM@[905; 927)\n+            BIND_PAT@[905; 912)\n+              NAME@[905; 912)\n+                IDENT@[905; 912) \"address\"\n+            COLON@[912; 913)\n+            WHITESPACE@[913; 914)\n+            POINTER_TYPE@[914; 927)\n+              STAR@[914; 915)\n+              MUT_KW@[915; 918)\n+              WHITESPACE@[918; 919)\n+              PATH_TYPE@[919; 927)\n+                PATH@[919; 927)\n+                  PATH_SEGMENT@[919; 927)\n+                    NAME_REF@[919; 927)\n+                      IDENT@[919; 927) \"sockaddr\"\n+          COMMA@[927; 928)\n+          WHITESPACE@[928; 952)\n+          PARAM@[952; 979)\n+            BIND_PAT@[952; 963)\n+              NAME@[952; 963)\n+                IDENT@[952; 963) \"address_len\"\n+            COLON@[963; 964)\n+            WHITESPACE@[964; 965)\n+            POINTER_TYPE@[965; 979)\n+              STAR@[965; 966)\n+              MUT_KW@[966; 969)\n+              WHITESPACE@[969; 970)\n+              PATH_TYPE@[970; 979)\n+                PATH@[970; 979)\n+                  PATH_SEGMENT@[970; 979)\n+                    NAME_REF@[970; 979)\n+                      IDENT@[970; 979) \"socklen_t\"\n+          R_PAREN@[979; 980)\n+        WHITESPACE@[980; 981)\n+        RET_TYPE@[981; 991)\n+          THIN_ARROW@[981; 983)\n+          WHITESPACE@[983; 984)\n+          PATH_TYPE@[984; 991)\n+            PATH@[984; 991)\n+              PATH_SEGMENT@[984; 991)\n+                COLONCOLON@[984; 986)\n+                NAME_REF@[986; 991)\n+                  IDENT@[986; 991) \"c_int\"\n+        SEMI@[991; 992)\n+      WHITESPACE@[992; 997)\n+      FN_DEF@[997; 1173)\n+        VISIBILITY@[997; 1000)\n+          PUB_KW@[997; 1000)\n+        WHITESPACE@[1000; 1001)\n+        FN_KW@[1001; 1003)\n+        WHITESPACE@[1003; 1004)\n+        NAME@[1004; 1010)\n+          IDENT@[1004; 1010) \"sendto\"\n+        PARAM_LIST@[1010; 1159)\n+          L_PAREN@[1010; 1011)\n+          PARAM@[1011; 1026)\n+            BIND_PAT@[1011; 1017)\n+              NAME@[1011; 1017)\n+                IDENT@[1011; 1017) \"socket\"\n+            COLON@[1017; 1018)\n+            WHITESPACE@[1018; 1019)\n+            PATH_TYPE@[1019; 1026)\n+              PATH@[1019; 1026)\n+                PATH_SEGMENT@[1019; 1026)\n+                  COLONCOLON@[1019; 1021)\n+                  NAME_REF@[1021; 1026)\n+                    IDENT@[1021; 1026) \"c_int\"\n+          COMMA@[1026; 1027)\n+          WHITESPACE@[1027; 1028)\n+          PARAM@[1028; 1048)\n+            BIND_PAT@[1028; 1031)\n+              NAME@[1028; 1031)\n+                IDENT@[1028; 1031) \"buf\"\n+            COLON@[1031; 1032)\n+            WHITESPACE@[1032; 1033)\n+            POINTER_TYPE@[1033; 1048)\n+              STAR@[1033; 1034)\n+              CONST_KW@[1034; 1039)\n+              WHITESPACE@[1039; 1040)\n+              PATH_TYPE@[1040; 1048)\n+                PATH@[1040; 1048)\n+                  PATH_SEGMENT@[1040; 1048)\n+                    COLONCOLON@[1040; 1042)\n+                    NAME_REF@[1042; 1048)\n+                      IDENT@[1042; 1048) \"c_void\"\n+          COMMA@[1048; 1049)\n+          WHITESPACE@[1049; 1050)\n+          PARAM@[1050; 1063)\n+            BIND_PAT@[1050; 1053)\n+              NAME@[1050; 1053)\n+                IDENT@[1050; 1053) \"len\"\n+            COLON@[1053; 1054)\n+            WHITESPACE@[1054; 1055)\n+            PATH_TYPE@[1055; 1063)\n+              PATH@[1055; 1063)\n+                PATH_SEGMENT@[1055; 1063)\n+                  COLONCOLON@[1055; 1057)\n+                  NAME_REF@[1057; 1063)\n+                    IDENT@[1057; 1063) \"size_t\"\n+          COMMA@[1063; 1064)\n+          WHITESPACE@[1064; 1083)\n+          PARAM@[1083; 1097)\n+            BIND_PAT@[1083; 1088)\n+              NAME@[1083; 1088)\n+                IDENT@[1083; 1088) \"flags\"\n+            COLON@[1088; 1089)\n+            WHITESPACE@[1089; 1090)\n+            PATH_TYPE@[1090; 1097)\n+              PATH@[1090; 1097)\n+                PATH_SEGMENT@[1090; 1097)\n+                  COLONCOLON@[1090; 1092)\n+                  NAME_REF@[1092; 1097)\n+                    IDENT@[1092; 1097) \"c_int\"\n+          COMMA@[1097; 1098)\n+          WHITESPACE@[1098; 1099)\n+          PARAM@[1099; 1120)\n+            BIND_PAT@[1099; 1103)\n+              NAME@[1099; 1103)\n+                IDENT@[1099; 1103) \"addr\"\n+            COLON@[1103; 1104)\n+            WHITESPACE@[1104; 1105)\n+            POINTER_TYPE@[1105; 1120)\n+              STAR@[1105; 1106)\n+              CONST_KW@[1106; 1111)\n+              WHITESPACE@[1111; 1112)\n+              PATH_TYPE@[1112; 1120)\n+                PATH@[1112; 1120)\n+                  PATH_SEGMENT@[1112; 1120)\n+                    NAME_REF@[1112; 1120)\n+                      IDENT@[1112; 1120) \"sockaddr\"\n+          COMMA@[1120; 1121)\n+          WHITESPACE@[1121; 1140)\n+          PARAM@[1140; 1158)\n+            BIND_PAT@[1140; 1147)\n+              NAME@[1140; 1147)\n+                IDENT@[1140; 1147) \"addrlen\"\n+            COLON@[1147; 1148)\n+            WHITESPACE@[1148; 1149)\n+            PATH_TYPE@[1149; 1158)\n+              PATH@[1149; 1158)\n+                PATH_SEGMENT@[1149; 1158)\n+                  NAME_REF@[1149; 1158)\n+                    IDENT@[1149; 1158) \"socklen_t\"\n+          R_PAREN@[1158; 1159)\n+        WHITESPACE@[1159; 1160)\n+        RET_TYPE@[1160; 1172)\n+          THIN_ARROW@[1160; 1162)\n+          WHITESPACE@[1162; 1163)\n+          PATH_TYPE@[1163; 1172)\n+            PATH@[1163; 1172)\n+              PATH_SEGMENT@[1163; 1172)\n+                COLONCOLON@[1163; 1165)\n+                NAME_REF@[1165; 1172)\n+                  IDENT@[1165; 1172) \"ssize_t\"\n+        SEMI@[1172; 1173)\n+      WHITESPACE@[1173; 1178)\n+      FN_DEF@[1178; 1289)\n+        VISIBILITY@[1178; 1181)\n+          PUB_KW@[1178; 1181)\n+        WHITESPACE@[1181; 1182)\n+        FN_KW@[1182; 1184)\n+        WHITESPACE@[1184; 1185)\n+        NAME@[1185; 1189)\n+          IDENT@[1185; 1189) \"send\"\n+        PARAM_LIST@[1189; 1275)\n+          L_PAREN@[1189; 1190)\n+          PARAM@[1190; 1205)\n+            BIND_PAT@[1190; 1196)\n+              NAME@[1190; 1196)\n+                IDENT@[1190; 1196) \"socket\"\n+            COLON@[1196; 1197)\n+            WHITESPACE@[1197; 1198)\n+            PATH_TYPE@[1198; 1205)\n+              PATH@[1198; 1205)\n+                PATH_SEGMENT@[1198; 1205)\n+                  COLONCOLON@[1198; 1200)\n+                  NAME_REF@[1200; 1205)\n+                    IDENT@[1200; 1205) \"c_int\"\n+          COMMA@[1205; 1206)\n+          WHITESPACE@[1206; 1207)\n+          PARAM@[1207; 1227)\n+            BIND_PAT@[1207; 1210)\n+              NAME@[1207; 1210)\n+                IDENT@[1207; 1210) \"buf\"\n+            COLON@[1210; 1211)\n+            WHITESPACE@[1211; 1212)\n+            POINTER_TYPE@[1212; 1227)\n+              STAR@[1212; 1213)\n+              CONST_KW@[1213; 1218)\n+              WHITESPACE@[1218; 1219)\n+              PATH_TYPE@[1219; 1227)\n+                PATH@[1219; 1227)\n+                  PATH_SEGMENT@[1219; 1227)\n+                    COLONCOLON@[1219; 1221)\n+                    NAME_REF@[1221; 1227)\n+                      IDENT@[1221; 1227) \"c_void\"\n+          COMMA@[1227; 1228)\n+          WHITESPACE@[1228; 1229)\n+          PARAM@[1229; 1242)\n+            BIND_PAT@[1229; 1232)\n+              NAME@[1229; 1232)\n+                IDENT@[1229; 1232) \"len\"\n+            COLON@[1232; 1233)\n+            WHITESPACE@[1233; 1234)\n+            PATH_TYPE@[1234; 1242)\n+              PATH@[1234; 1242)\n+                PATH_SEGMENT@[1234; 1242)\n+                  COLONCOLON@[1234; 1236)\n+                  NAME_REF@[1236; 1242)\n+                    IDENT@[1236; 1242) \"size_t\"\n+          COMMA@[1242; 1243)\n+          WHITESPACE@[1243; 1260)\n+          PARAM@[1260; 1274)\n+            BIND_PAT@[1260; 1265)\n+              NAME@[1260; 1265)\n+                IDENT@[1260; 1265) \"flags\"\n+            COLON@[1265; 1266)\n+            WHITESPACE@[1266; 1267)\n+            PATH_TYPE@[1267; 1274)\n+              PATH@[1267; 1274)\n+                PATH_SEGMENT@[1267; 1274)\n+                  COLONCOLON@[1267; 1269)\n+                  NAME_REF@[1269; 1274)\n+                    IDENT@[1269; 1274) \"c_int\"\n+          R_PAREN@[1274; 1275)\n+        WHITESPACE@[1275; 1276)\n+        RET_TYPE@[1276; 1288)\n+          THIN_ARROW@[1276; 1278)\n+          WHITESPACE@[1278; 1279)\n+          PATH_TYPE@[1279; 1288)\n+            PATH@[1279; 1288)\n+              PATH_SEGMENT@[1279; 1288)\n+                COLONCOLON@[1279; 1281)\n+                NAME_REF@[1281; 1288)\n+                  IDENT@[1281; 1288) \"ssize_t\"\n+        SEMI@[1288; 1289)\n+      WHITESPACE@[1289; 1294)\n+      FN_DEF@[1294; 1481)\n+        VISIBILITY@[1294; 1297)\n+          PUB_KW@[1294; 1297)\n+        WHITESPACE@[1297; 1298)\n+        FN_KW@[1298; 1300)\n+        WHITESPACE@[1300; 1301)\n+        NAME@[1301; 1309)\n+          IDENT@[1301; 1309) \"recvfrom\"\n+        PARAM_LIST@[1309; 1467)\n+          L_PAREN@[1309; 1310)\n+          PARAM@[1310; 1325)\n+            BIND_PAT@[1310; 1316)\n+              NAME@[1310; 1316)\n+                IDENT@[1310; 1316) \"socket\"\n+            COLON@[1316; 1317)\n+            WHITESPACE@[1317; 1318)\n+            PATH_TYPE@[1318; 1325)\n+              PATH@[1318; 1325)\n+                PATH_SEGMENT@[1318; 1325)\n+                  COLONCOLON@[1318; 1320)\n+                  NAME_REF@[1320; 1325)\n+                    IDENT@[1320; 1325) \"c_int\"\n+          COMMA@[1325; 1326)\n+          WHITESPACE@[1326; 1327)\n+          PARAM@[1327; 1345)\n+            BIND_PAT@[1327; 1330)\n+              NAME@[1327; 1330)\n+                IDENT@[1327; 1330) \"buf\"\n+            COLON@[1330; 1331)\n+            WHITESPACE@[1331; 1332)\n+            POINTER_TYPE@[1332; 1345)\n+              STAR@[1332; 1333)\n+              MUT_KW@[1333; 1336)\n+              WHITESPACE@[1336; 1337)\n+              PATH_TYPE@[1337; 1345)\n+                PATH@[1337; 1345)\n+                  PATH_SEGMENT@[1337; 1345)\n+                    COLONCOLON@[1337; 1339)\n+                    NAME_REF@[1339; 1345)\n+                      IDENT@[1339; 1345) \"c_void\"\n+          COMMA@[1345; 1346)\n+          WHITESPACE@[1346; 1347)\n+          PARAM@[1347; 1360)\n+            BIND_PAT@[1347; 1350)\n+              NAME@[1347; 1350)\n+                IDENT@[1347; 1350) \"len\"\n+            COLON@[1350; 1351)\n+            WHITESPACE@[1351; 1352)\n+            PATH_TYPE@[1352; 1360)\n+              PATH@[1352; 1360)\n+                PATH_SEGMENT@[1352; 1360)\n+                  COLONCOLON@[1352; 1354)\n+                  NAME_REF@[1354; 1360)\n+                    IDENT@[1354; 1360) \"size_t\"\n+          COMMA@[1360; 1361)\n+          WHITESPACE@[1361; 1382)\n+          PARAM@[1382; 1396)\n+            BIND_PAT@[1382; 1387)\n+              NAME@[1382; 1387)\n+                IDENT@[1382; 1387) \"flags\"\n+            COLON@[1387; 1388)\n+            WHITESPACE@[1388; 1389)\n+            PATH_TYPE@[1389; 1396)\n+              PATH@[1389; 1396)\n+                PATH_SEGMENT@[1389; 1396)\n+                  COLONCOLON@[1389; 1391)\n+                  NAME_REF@[1391; 1396)\n+                    IDENT@[1391; 1396) \"c_int\"\n+          COMMA@[1396; 1397)\n+          WHITESPACE@[1397; 1398)\n+          PARAM@[1398; 1419)\n+            BIND_PAT@[1398; 1402)\n+              NAME@[1398; 1402)\n+                IDENT@[1398; 1402) \"addr\"\n+            COLON@[1402; 1403)\n+            WHITESPACE@[1403; 1404)\n+            POINTER_TYPE@[1404; 1419)\n+              STAR@[1404; 1405)\n+              MUT_KW@[1405; 1408)\n+              WHITESPACE@[1408; 1409)\n+              PATH_TYPE@[1409; 1419)\n+                PATH@[1409; 1419)\n+                  PATH_SEGMENT@[1409; 1419)\n+                    COLONCOLON@[1409; 1411)\n+                    NAME_REF@[1411; 1419)\n+                      IDENT@[1411; 1419) \"sockaddr\"\n+          COMMA@[1419; 1420)\n+          WHITESPACE@[1420; 1441)\n+          PARAM@[1441; 1466)\n+            BIND_PAT@[1441; 1448)\n+              NAME@[1441; 1448)\n+                IDENT@[1441; 1448) \"addrlen\"\n+            COLON@[1448; 1449)\n+            WHITESPACE@[1449; 1450)\n+            POINTER_TYPE@[1450; 1466)\n+              STAR@[1450; 1451)\n+              MUT_KW@[1451; 1454)\n+              WHITESPACE@[1454; 1455)\n+              PATH_TYPE@[1455; 1466)\n+                PATH@[1455; 1466)\n+                  PATH_SEGMENT@[1455; 1466)\n+                    COLONCOLON@[1455; 1457)\n+                    NAME_REF@[1457; 1466)\n+                      IDENT@[1457; 1466) \"socklen_t\"\n+          R_PAREN@[1466; 1467)\n+        WHITESPACE@[1467; 1468)\n+        RET_TYPE@[1468; 1480)\n+          THIN_ARROW@[1468; 1470)\n+          WHITESPACE@[1470; 1471)\n+          PATH_TYPE@[1471; 1480)\n+            PATH@[1471; 1480)\n+              PATH_SEGMENT@[1471; 1480)\n+                COLONCOLON@[1471; 1473)\n+                NAME_REF@[1473; 1480)\n+                  IDENT@[1473; 1480) \"ssize_t\"\n+        SEMI@[1480; 1481)\n+      WHITESPACE@[1481; 1486)\n+      FN_DEF@[1486; 1595)\n+        VISIBILITY@[1486; 1489)\n+          PUB_KW@[1486; 1489)\n+        WHITESPACE@[1489; 1490)\n+        FN_KW@[1490; 1492)\n+        WHITESPACE@[1492; 1493)\n+        NAME@[1493; 1497)\n+          IDENT@[1493; 1497) \"recv\"\n+        PARAM_LIST@[1497; 1581)\n+          L_PAREN@[1497; 1498)\n+          PARAM@[1498; 1513)\n+            BIND_PAT@[1498; 1504)\n+              NAME@[1498; 1504)\n+                IDENT@[1498; 1504) \"socket\"\n+            COLON@[1504; 1505)\n+            WHITESPACE@[1505; 1506)\n+            PATH_TYPE@[1506; 1513)\n+              PATH@[1506; 1513)\n+                PATH_SEGMENT@[1506; 1513)\n+                  COLONCOLON@[1506; 1508)\n+                  NAME_REF@[1508; 1513)\n+                    IDENT@[1508; 1513) \"c_int\"\n+          COMMA@[1513; 1514)\n+          WHITESPACE@[1514; 1515)\n+          PARAM@[1515; 1533)\n+            BIND_PAT@[1515; 1518)\n+              NAME@[1515; 1518)\n+                IDENT@[1515; 1518) \"buf\"\n+            COLON@[1518; 1519)\n+            WHITESPACE@[1519; 1520)\n+            POINTER_TYPE@[1520; 1533)\n+              STAR@[1520; 1521)\n+              MUT_KW@[1521; 1524)\n+              WHITESPACE@[1524; 1525)\n+              PATH_TYPE@[1525; 1533)\n+                PATH@[1525; 1533)\n+                  PATH_SEGMENT@[1525; 1533)\n+                    COLONCOLON@[1525; 1527)\n+                    NAME_REF@[1527; 1533)\n+                      IDENT@[1527; 1533) \"c_void\"\n+          COMMA@[1533; 1534)\n+          WHITESPACE@[1534; 1535)\n+          PARAM@[1535; 1548)\n+            BIND_PAT@[1535; 1538)\n+              NAME@[1535; 1538)\n+                IDENT@[1535; 1538) \"len\"\n+            COLON@[1538; 1539)\n+            WHITESPACE@[1539; 1540)\n+            PATH_TYPE@[1540; 1548)\n+              PATH@[1540; 1548)\n+                PATH_SEGMENT@[1540; 1548)\n+                  COLONCOLON@[1540; 1542)\n+                  NAME_REF@[1542; 1548)\n+                    IDENT@[1542; 1548) \"size_t\"\n+          COMMA@[1548; 1549)\n+          WHITESPACE@[1549; 1566)\n+          PARAM@[1566; 1580)\n+            BIND_PAT@[1566; 1571)\n+              NAME@[1566; 1571)\n+                IDENT@[1566; 1571) \"flags\"\n+            COLON@[1571; 1572)\n+            WHITESPACE@[1572; 1573)\n+            PATH_TYPE@[1573; 1580)\n+              PATH@[1573; 1580)\n+                PATH_SEGMENT@[1573; 1580)\n+                  COLONCOLON@[1573; 1575)\n+                  NAME_REF@[1575; 1580)\n+                    IDENT@[1575; 1580) \"c_int\"\n+          R_PAREN@[1580; 1581)\n+        WHITESPACE@[1581; 1582)\n+        RET_TYPE@[1582; 1594)\n+          THIN_ARROW@[1582; 1584)\n+          WHITESPACE@[1584; 1585)\n+          PATH_TYPE@[1585; 1594)\n+            PATH@[1585; 1594)\n+              PATH_SEGMENT@[1585; 1594)\n+                COLONCOLON@[1585; 1587)\n+                NAME_REF@[1587; 1594)\n+                  IDENT@[1587; 1594) \"ssize_t\"\n+        SEMI@[1594; 1595)\n+      WHITESPACE@[1595; 1596)\n+      R_CURLY@[1596; 1597)\n+  WHITESPACE@[1597; 1598)"}, {"sha": "596f322164d561d1ad8d2b7ca03c65147e6b7ad8", "filename": "crates/libsyntax2/tests/test/main.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c3e28f06463854e4711c4c49a49c77d1e136969f/crates%2Flibsyntax2%2Ftests%2Ftest%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c3e28f06463854e4711c4c49a49c77d1e136969f/crates%2Flibsyntax2%2Ftests%2Ftest%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Flibsyntax2%2Ftests%2Ftest%2Fmain.rs?ref=c3e28f06463854e4711c4c49a49c77d1e136969f", "patch": "@@ -26,7 +26,6 @@ fn lexer_tests() {\n #[test]\n fn parser_tests() {\n     dir_tests(&[\"parser/inline\", \"parser/ok\", \"parser/err\"], |text| {\n-        eprintln!(\"\\n{}\\n\", text);\n         let file = File::parse(text);\n         dump_tree(file.syntax())\n     })"}, {"sha": "58f6f88a7ecd3cc79479c990e3715ac9c4140e4a", "filename": "crates/server/src/main_loop/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c3e28f06463854e4711c4c49a49c77d1e136969f/crates%2Fserver%2Fsrc%2Fmain_loop%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c3e28f06463854e4711c4c49a49c77d1e136969f/crates%2Fserver%2Fsrc%2Fmain_loop%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fserver%2Fsrc%2Fmain_loop%2Fmod.rs?ref=c3e28f06463854e4711c4c49a49c77d1e136969f", "patch": "@@ -126,7 +126,6 @@ fn main_loop_inner(\n             }\n             recv(libdata_receiver, data) => Event::Lib(data.unwrap())\n         };\n-        trace!(\"selected {:?}\", event);\n         let mut state_changed = false;\n         match event {\n             Event::Task(task) => on_task(task, msg_sender, pending_requests),\n@@ -163,6 +162,7 @@ fn main_loop_inner(\n                 }\n             }\n             Event::Lib(lib) => {\n+                feedback(internal_mode, \"library loaded\", msg_sender);\n                 state.add_lib(lib);\n             }\n             Event::Msg(msg) => {"}, {"sha": "66620ac62271aa8acf932a3118614fc9f757483f", "filename": "crates/server/tests/heavy_tests/main.rs", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/c3e28f06463854e4711c4c49a49c77d1e136969f/crates%2Fserver%2Ftests%2Fheavy_tests%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c3e28f06463854e4711c4c49a49c77d1e136969f/crates%2Fserver%2Ftests%2Fheavy_tests%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fserver%2Ftests%2Fheavy_tests%2Fmain.rs?ref=c3e28f06463854e4711c4c49a49c77d1e136969f", "patch": "@@ -14,6 +14,7 @@ use m::req::{Runnables, RunnablesParams};\n \n use support::project;\n \n+\n const LOG: &'static str = \"\";\n \n #[test]\n@@ -79,3 +80,20 @@ fn test_eggs() {}\n         ]\"#\n     );\n }\n+\n+// #[test]\n+// fn test_deps() {\n+//     let server = project(r#\"\n+// //- Cargo.toml\n+// [package]\n+// name = \"foo\"\n+// version = \"0.0.0\"\n+// [dependencies]\n+// regex = \"=1.0.4\"\n+\n+// //- src/lib.rs\n+// extern crate regex;\n+// \"#);\n+//     server.wait_for_feedback(\"workspace loaded\");\n+//     server.wait_for_feedback_n(\"library loaded\", 1);\n+// }"}, {"sha": "731c2f51cd24b47669bf1e949f6575cf128758eb", "filename": "crates/server/tests/heavy_tests/support.rs", "status": "modified", "additions": 8, "deletions": 5, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/c3e28f06463854e4711c4c49a49c77d1e136969f/crates%2Fserver%2Ftests%2Fheavy_tests%2Fsupport.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c3e28f06463854e4711c4c49a49c77d1e136969f/crates%2Fserver%2Ftests%2Fheavy_tests%2Fsupport.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fserver%2Ftests%2Fheavy_tests%2Fsupport.rs?ref=c3e28f06463854e4711c4c49a49c77d1e136969f", "patch": "@@ -155,25 +155,28 @@ impl Server {\n         panic!(\"no response\");\n     }\n     pub fn wait_for_feedback(&self, feedback: &str) {\n+        self.wait_for_feedback_n(feedback, 1)\n+    }\n+    pub fn wait_for_feedback_n(&self, feedback: &str, n: usize) {\n         let f = |msg: &RawMessage| match msg {\n                 RawMessage::Notification(n) if n.method == \"internalFeedback\" => {\n                     return n.clone().cast::<req::InternalFeedback>()\n                         .unwrap() == feedback\n                 }\n                 _ => false,\n         };\n-\n+        let mut total = 0;\n         for msg in self.messages.borrow().iter() {\n             if f(msg) {\n-                return;\n+                total += 1\n             }\n         }\n-        while let Some(msg) = self.recv() {\n+        while total < n {\n+            let msg = self.recv().expect(\"no response\");\n             if f(&msg) {\n-                return;\n+                total += 1;\n             }\n         }\n-        panic!(\"no response\")\n     }\n     fn recv(&self) -> Option<RawMessage> {\n         let timeout = Duration::from_secs(5);"}]}