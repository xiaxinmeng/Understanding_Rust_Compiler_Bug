{"sha": "455a55e681c16f599bb66c9b634bcf0672f8a4c0", "node_id": "C_kwDOAAsO6NoAKDQ1NWE1NWU2ODFjMTZmNTk5YmI2NmM5YjYzNGJjZjA2NzJmOGE0YzA", "commit": {"author": {"name": "Nilstrieb", "email": "48135649+Nilstrieb@users.noreply.github.com", "date": "2022-07-29T14:34:06Z"}, "committer": {"name": "nils", "email": "48135649+Nilstrieb@users.noreply.github.com", "date": "2022-08-22T12:06:55Z"}, "message": "Show absolute line numbers if span is outside relative span\n\nIn the MIR pretty printing, it can sometimes happen that the span of the\nstatement is outside the span of the body (for example through\ninlining). In this case, don't display a relative span but an absolute\nspan. This will make the mir-opt-tests a little more prone to diffs\nagain, but the impact should be small.", "tree": {"sha": "2d1e98fa3a019e7a3b6db605cd41c51101e7eff0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2d1e98fa3a019e7a3b6db605cd41c51101e7eff0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/455a55e681c16f599bb66c9b634bcf0672f8a4c0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/455a55e681c16f599bb66c9b634bcf0672f8a4c0", "html_url": "https://github.com/rust-lang/rust/commit/455a55e681c16f599bb66c9b634bcf0672f8a4c0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/455a55e681c16f599bb66c9b634bcf0672f8a4c0/comments", "author": {"login": "Nilstrieb", "id": 48135649, "node_id": "MDQ6VXNlcjQ4MTM1NjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/48135649?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nilstrieb", "html_url": "https://github.com/Nilstrieb", "followers_url": "https://api.github.com/users/Nilstrieb/followers", "following_url": "https://api.github.com/users/Nilstrieb/following{/other_user}", "gists_url": "https://api.github.com/users/Nilstrieb/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nilstrieb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nilstrieb/subscriptions", "organizations_url": "https://api.github.com/users/Nilstrieb/orgs", "repos_url": "https://api.github.com/users/Nilstrieb/repos", "events_url": "https://api.github.com/users/Nilstrieb/events{/privacy}", "received_events_url": "https://api.github.com/users/Nilstrieb/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Nilstrieb", "id": 48135649, "node_id": "MDQ6VXNlcjQ4MTM1NjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/48135649?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nilstrieb", "html_url": "https://github.com/Nilstrieb", "followers_url": "https://api.github.com/users/Nilstrieb/followers", "following_url": "https://api.github.com/users/Nilstrieb/following{/other_user}", "gists_url": "https://api.github.com/users/Nilstrieb/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nilstrieb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nilstrieb/subscriptions", "organizations_url": "https://api.github.com/users/Nilstrieb/orgs", "repos_url": "https://api.github.com/users/Nilstrieb/repos", "events_url": "https://api.github.com/users/Nilstrieb/events{/privacy}", "received_events_url": "https://api.github.com/users/Nilstrieb/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ee8c31e64d229cac4eba6d8f03bb70e16f34a14b", "url": "https://api.github.com/repos/rust-lang/rust/commits/ee8c31e64d229cac4eba6d8f03bb70e16f34a14b", "html_url": "https://github.com/rust-lang/rust/commit/ee8c31e64d229cac4eba6d8f03bb70e16f34a14b"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "5f928707ea826f9014720bddd56ea4e7adaf7af0", "filename": "compiler/rustc_span/src/source_map.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/455a55e681c16f599bb66c9b634bcf0672f8a4c0/compiler%2Frustc_span%2Fsrc%2Fsource_map.rs", "raw_url": "https://github.com/rust-lang/rust/raw/455a55e681c16f599bb66c9b634bcf0672f8a4c0/compiler%2Frustc_span%2Fsrc%2Fsource_map.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_span%2Fsrc%2Fsource_map.rs?ref=455a55e681c16f599bb66c9b634bcf0672f8a4c0", "patch": "@@ -472,7 +472,7 @@ impl SourceMap {\n         let hi = self.lookup_char_pos(sp.hi());\n         let offset = self.lookup_char_pos(relative_to.lo());\n \n-        if lo.file.name != offset.file.name {\n+        if lo.file.name != offset.file.name || !relative_to.contains(sp) {\n             return self.span_to_embeddable_string(sp);\n         }\n "}]}