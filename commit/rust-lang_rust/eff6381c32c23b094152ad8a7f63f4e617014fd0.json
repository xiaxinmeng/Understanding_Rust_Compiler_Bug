{"sha": "eff6381c32c23b094152ad8a7f63f4e617014fd0", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVmZjYzODFjMzJjMjNiMDk0MTUyYWQ4YTdmNjNmNGU2MTcwMTRmZDA=", "commit": {"author": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2020-01-20T22:32:42Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-01-20T22:32:42Z"}, "message": "Rollup merge of #68290 - petrochenkov:passcheck, r=oli-obk\n\nFix some tests failing in `--pass check` mode\n\nWarnings reported at codegen or linking time either have to be converted to errors (preferable), or the tests for them need to be marked with `// ignore-pass` (as a last resort).\n\nhttps://github.com/rust-lang/rust/commit/ecd5852194f43511443f134aebf0462b58c8e197 turned them from errors to warnings, but that shouldn't be necessary because it's still clear from the `.stderr` output that the errors are lints and not hard-coded.", "tree": {"sha": "7103c806a4c66826118beda5f625f25fb41ec40f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7103c806a4c66826118beda5f625f25fb41ec40f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/eff6381c32c23b094152ad8a7f63f4e617014fd0", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJeJiqKCRBK7hj4Ov3rIwAAdHIIAIq+TglnUaG6LWhAlgid7Hnk\n4hqDA431qf5T4OVREwaeaOFkbr6ZDpFxXWvNcLDL/uqJLf/lP+ee6hO4JNMqcbpO\nYKmbFubuDbNEvASLpLRIVMDt3oeFUqwGNjwiCr55j6jc9dugPrHheQOZP9D4v6yw\nOL7QibG2EK6cfK8/eyipSBhDD8llY2nCokEMOekhVBbfEMAHsuZiM9ssBJq5xYUg\nF9HxpWq36QiOgY4V83R9XD8mX40Af5Lscz2Sbp4GW9HflKhLzcjdeOHJpaF3aCRH\nxqLU6ob0+Fg/7Wfwls+4bJnpGpbpL5ECste9ZZupAAbqD6HoBBh6i7Rm2clqVEE=\n=xGZO\n-----END PGP SIGNATURE-----\n", "payload": "tree 7103c806a4c66826118beda5f625f25fb41ec40f\nparent e1bd9b33963f51620980ee1450a64ed12e104934\nparent 8fa8b81a7701ba8c14476d86b641d5cbe6cfa713\nauthor Yuki Okushi <huyuumi.dev@gmail.com> 1579559562 +0900\ncommitter GitHub <noreply@github.com> 1579559562 +0900\n\nRollup merge of #68290 - petrochenkov:passcheck, r=oli-obk\n\nFix some tests failing in `--pass check` mode\n\nWarnings reported at codegen or linking time either have to be converted to errors (preferable), or the tests for them need to be marked with `// ignore-pass` (as a last resort).\n\nhttps://github.com/rust-lang/rust/commit/ecd5852194f43511443f134aebf0462b58c8e197 turned them from errors to warnings, but that shouldn't be necessary because it's still clear from the `.stderr` output that the errors are lints and not hard-coded.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/eff6381c32c23b094152ad8a7f63f4e617014fd0", "html_url": "https://github.com/rust-lang/rust/commit/eff6381c32c23b094152ad8a7f63f4e617014fd0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/eff6381c32c23b094152ad8a7f63f4e617014fd0/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e1bd9b33963f51620980ee1450a64ed12e104934", "url": "https://api.github.com/repos/rust-lang/rust/commits/e1bd9b33963f51620980ee1450a64ed12e104934", "html_url": "https://github.com/rust-lang/rust/commit/e1bd9b33963f51620980ee1450a64ed12e104934"}, {"sha": "8fa8b81a7701ba8c14476d86b641d5cbe6cfa713", "url": "https://api.github.com/repos/rust-lang/rust/commits/8fa8b81a7701ba8c14476d86b641d5cbe6cfa713", "html_url": "https://github.com/rust-lang/rust/commit/8fa8b81a7701ba8c14476d86b641d5cbe6cfa713"}], "stats": {"total": 53, "additions": 28, "deletions": 25}, "files": [{"sha": "af63d1f75a77022b0bd1a8894b12b40d4c76927a", "filename": "src/test/ui/consts/array-literal-index-oob.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/eff6381c32c23b094152ad8a7f63f4e617014fd0/src%2Ftest%2Fui%2Fconsts%2Farray-literal-index-oob.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eff6381c32c23b094152ad8a7f63f4e617014fd0/src%2Ftest%2Fui%2Fconsts%2Farray-literal-index-oob.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Farray-literal-index-oob.rs?ref=eff6381c32c23b094152ad8a7f63f4e617014fd0", "patch": "@@ -1,4 +1,5 @@\n // build-pass\n+// ignore-pass (emit codegen-time warnings and verify that they are indeed warnings and not errors)\n \n #![warn(const_err)]\n "}, {"sha": "e93aa324784c3820629c81cfa1c7f99acb56d1ad", "filename": "src/test/ui/consts/array-literal-index-oob.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/eff6381c32c23b094152ad8a7f63f4e617014fd0/src%2Ftest%2Fui%2Fconsts%2Farray-literal-index-oob.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/eff6381c32c23b094152ad8a7f63f4e617014fd0/src%2Ftest%2Fui%2Fconsts%2Farray-literal-index-oob.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Farray-literal-index-oob.stderr?ref=eff6381c32c23b094152ad8a7f63f4e617014fd0", "patch": "@@ -1,25 +1,25 @@\n warning: index out of bounds: the len is 3 but the index is 4\n-  --> $DIR/array-literal-index-oob.rs:6:8\n+  --> $DIR/array-literal-index-oob.rs:7:8\n    |\n LL |     &{ [1, 2, 3][4] };\n    |        ^^^^^^^^^^^^\n    |\n note: lint level defined here\n-  --> $DIR/array-literal-index-oob.rs:3:9\n+  --> $DIR/array-literal-index-oob.rs:4:9\n    |\n LL | #![warn(const_err)]\n    |         ^^^^^^^^^\n \n warning: reaching this expression at runtime will panic or abort\n-  --> $DIR/array-literal-index-oob.rs:6:8\n+  --> $DIR/array-literal-index-oob.rs:7:8\n    |\n LL |     &{ [1, 2, 3][4] };\n    |     ---^^^^^^^^^^^^--\n    |        |\n    |        indexing out of bounds: the len is 3 but the index is 4\n \n warning: erroneous constant used\n-  --> $DIR/array-literal-index-oob.rs:6:5\n+  --> $DIR/array-literal-index-oob.rs:7:5\n    |\n LL |     &{ [1, 2, 3][4] };\n    |     ^^^^^^^^^^^^^^^^^ referenced constant has errors"}, {"sha": "22f863fb15ac4ab887c4b6098d1592e5c68b33a2", "filename": "src/test/ui/consts/const-eval/promoted_errors.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/eff6381c32c23b094152ad8a7f63f4e617014fd0/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fpromoted_errors.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eff6381c32c23b094152ad8a7f63f4e617014fd0/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fpromoted_errors.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fpromoted_errors.rs?ref=eff6381c32c23b094152ad8a7f63f4e617014fd0", "patch": "@@ -1,4 +1,5 @@\n // build-pass\n+// ignore-pass (emit codegen-time warnings and verify that they are indeed warnings and not errors)\n // compile-flags: -O\n \n #![warn(const_err)]"}, {"sha": "b4330deb3ef10376e5c0d5ece726b913a15df298", "filename": "src/test/ui/consts/const-eval/promoted_errors.stderr", "status": "modified", "additions": 10, "deletions": 10, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/eff6381c32c23b094152ad8a7f63f4e617014fd0/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fpromoted_errors.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/eff6381c32c23b094152ad8a7f63f4e617014fd0/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fpromoted_errors.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fpromoted_errors.stderr?ref=eff6381c32c23b094152ad8a7f63f4e617014fd0", "patch": "@@ -1,59 +1,59 @@\n warning: this expression will panic at runtime\n-  --> $DIR/promoted_errors.rs:8:14\n+  --> $DIR/promoted_errors.rs:9:14\n    |\n LL |     let _x = 0u32 - 1;\n    |              ^^^^^^^^ attempt to subtract with overflow\n    |\n note: lint level defined here\n-  --> $DIR/promoted_errors.rs:4:9\n+  --> $DIR/promoted_errors.rs:5:9\n    |\n LL | #![warn(const_err)]\n    |         ^^^^^^^^^\n \n warning: attempt to divide by zero\n-  --> $DIR/promoted_errors.rs:10:20\n+  --> $DIR/promoted_errors.rs:11:20\n    |\n LL |     println!(\"{}\", 1 / (1 - 1));\n    |                    ^^^^^^^^^^^\n \n warning: reaching this expression at runtime will panic or abort\n-  --> $DIR/promoted_errors.rs:10:20\n+  --> $DIR/promoted_errors.rs:11:20\n    |\n LL |     println!(\"{}\", 1 / (1 - 1));\n    |                    ^^^^^^^^^^^ dividing by zero\n \n warning: erroneous constant used\n-  --> $DIR/promoted_errors.rs:10:20\n+  --> $DIR/promoted_errors.rs:11:20\n    |\n LL |     println!(\"{}\", 1 / (1 - 1));\n    |                    ^^^^^^^^^^^ referenced constant has errors\n \n warning: attempt to divide by zero\n-  --> $DIR/promoted_errors.rs:14:14\n+  --> $DIR/promoted_errors.rs:15:14\n    |\n LL |     let _x = 1 / (1 - 1);\n    |              ^^^^^^^^^^^\n \n warning: attempt to divide by zero\n-  --> $DIR/promoted_errors.rs:16:20\n+  --> $DIR/promoted_errors.rs:17:20\n    |\n LL |     println!(\"{}\", 1 / (false as u32));\n    |                    ^^^^^^^^^^^^^^^^^^\n \n warning: reaching this expression at runtime will panic or abort\n-  --> $DIR/promoted_errors.rs:16:20\n+  --> $DIR/promoted_errors.rs:17:20\n    |\n LL |     println!(\"{}\", 1 / (false as u32));\n    |                    ^^^^^^^^^^^^^^^^^^ dividing by zero\n \n warning: erroneous constant used\n-  --> $DIR/promoted_errors.rs:16:20\n+  --> $DIR/promoted_errors.rs:17:20\n    |\n LL |     println!(\"{}\", 1 / (false as u32));\n    |                    ^^^^^^^^^^^^^^^^^^ referenced constant has errors\n \n warning: attempt to divide by zero\n-  --> $DIR/promoted_errors.rs:20:14\n+  --> $DIR/promoted_errors.rs:21:14\n    |\n LL |     let _x = 1 / (false as u32);\n    |              ^^^^^^^^^^^^^^^^^^"}, {"sha": "62c77f76d9064ca7325cc14369ea7dc2b59ecb03", "filename": "src/test/ui/consts/const-eval/promoted_errors2.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/eff6381c32c23b094152ad8a7f63f4e617014fd0/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fpromoted_errors2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eff6381c32c23b094152ad8a7f63f4e617014fd0/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fpromoted_errors2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fpromoted_errors2.rs?ref=eff6381c32c23b094152ad8a7f63f4e617014fd0", "patch": "@@ -1,4 +1,5 @@\n // build-pass\n+// ignore-pass (emit codegen-time warnings and verify that they are indeed warnings and not errors)\n // compile-flags: -C overflow-checks=on -O\n \n #![warn(const_err)]"}, {"sha": "a4dad295edd793f22805c8b5ca10886f2ee55396", "filename": "src/test/ui/consts/const-eval/promoted_errors2.stderr", "status": "modified", "additions": 11, "deletions": 11, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/eff6381c32c23b094152ad8a7f63f4e617014fd0/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fpromoted_errors2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/eff6381c32c23b094152ad8a7f63f4e617014fd0/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fpromoted_errors2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fpromoted_errors2.stderr?ref=eff6381c32c23b094152ad8a7f63f4e617014fd0", "patch": "@@ -1,65 +1,65 @@\n warning: attempt to subtract with overflow\n-  --> $DIR/promoted_errors2.rs:7:20\n+  --> $DIR/promoted_errors2.rs:8:20\n    |\n LL |     println!(\"{}\", 0u32 - 1);\n    |                    ^^^^^^^^\n    |\n note: lint level defined here\n-  --> $DIR/promoted_errors2.rs:4:9\n+  --> $DIR/promoted_errors2.rs:5:9\n    |\n LL | #![warn(const_err)]\n    |         ^^^^^^^^^\n \n warning: attempt to subtract with overflow\n-  --> $DIR/promoted_errors2.rs:9:14\n+  --> $DIR/promoted_errors2.rs:10:14\n    |\n LL |     let _x = 0u32 - 1;\n    |              ^^^^^^^^\n \n warning: attempt to divide by zero\n-  --> $DIR/promoted_errors2.rs:11:20\n+  --> $DIR/promoted_errors2.rs:12:20\n    |\n LL |     println!(\"{}\", 1 / (1 - 1));\n    |                    ^^^^^^^^^^^\n \n warning: reaching this expression at runtime will panic or abort\n-  --> $DIR/promoted_errors2.rs:11:20\n+  --> $DIR/promoted_errors2.rs:12:20\n    |\n LL |     println!(\"{}\", 1 / (1 - 1));\n    |                    ^^^^^^^^^^^ dividing by zero\n \n warning: erroneous constant used\n-  --> $DIR/promoted_errors2.rs:11:20\n+  --> $DIR/promoted_errors2.rs:12:20\n    |\n LL |     println!(\"{}\", 1 / (1 - 1));\n    |                    ^^^^^^^^^^^ referenced constant has errors\n \n warning: attempt to divide by zero\n-  --> $DIR/promoted_errors2.rs:15:14\n+  --> $DIR/promoted_errors2.rs:16:14\n    |\n LL |     let _x = 1 / (1 - 1);\n    |              ^^^^^^^^^^^\n \n warning: attempt to divide by zero\n-  --> $DIR/promoted_errors2.rs:17:20\n+  --> $DIR/promoted_errors2.rs:18:20\n    |\n LL |     println!(\"{}\", 1 / (false as u32));\n    |                    ^^^^^^^^^^^^^^^^^^\n \n warning: reaching this expression at runtime will panic or abort\n-  --> $DIR/promoted_errors2.rs:17:20\n+  --> $DIR/promoted_errors2.rs:18:20\n    |\n LL |     println!(\"{}\", 1 / (false as u32));\n    |                    ^^^^^^^^^^^^^^^^^^ dividing by zero\n \n warning: erroneous constant used\n-  --> $DIR/promoted_errors2.rs:17:20\n+  --> $DIR/promoted_errors2.rs:18:20\n    |\n LL |     println!(\"{}\", 1 / (false as u32));\n    |                    ^^^^^^^^^^^^^^^^^^ referenced constant has errors\n \n warning: attempt to divide by zero\n-  --> $DIR/promoted_errors2.rs:21:14\n+  --> $DIR/promoted_errors2.rs:22:14\n    |\n LL |     let _x = 1 / (false as u32);\n    |              ^^^^^^^^^^^^^^^^^^"}]}