{"sha": "54b68b656913baa760dc9daf75796e84172f810a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU0YjY4YjY1NjkxM2JhYTc2MGRjOWRhZjc1Nzk2ZTg0MTcyZjgxMGE=", "commit": {"author": {"name": "Johannes L\u00f6thberg", "email": "johannes@kyriasis.com", "date": "2018-02-22T19:38:35Z"}, "committer": {"name": "Johannes L\u00f6thberg", "email": "johannes@kyriasis.com", "date": "2018-03-06T22:39:09Z"}, "message": "Add RELRO run-make tests\n\nSigned-off-by: Johannes L\u00f6thberg <johannes@kyriasis.com>", "tree": {"sha": "4faef745e1b8f6b2912578991f8c6fe965207555", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4faef745e1b8f6b2912578991f8c6fe965207555"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/54b68b656913baa760dc9daf75796e84172f810a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/54b68b656913baa760dc9daf75796e84172f810a", "html_url": "https://github.com/rust-lang/rust/commit/54b68b656913baa760dc9daf75796e84172f810a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/54b68b656913baa760dc9daf75796e84172f810a/comments", "author": {"login": "kyrias", "id": 2285387, "node_id": "MDQ6VXNlcjIyODUzODc=", "avatar_url": "https://avatars.githubusercontent.com/u/2285387?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kyrias", "html_url": "https://github.com/kyrias", "followers_url": "https://api.github.com/users/kyrias/followers", "following_url": "https://api.github.com/users/kyrias/following{/other_user}", "gists_url": "https://api.github.com/users/kyrias/gists{/gist_id}", "starred_url": "https://api.github.com/users/kyrias/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kyrias/subscriptions", "organizations_url": "https://api.github.com/users/kyrias/orgs", "repos_url": "https://api.github.com/users/kyrias/repos", "events_url": "https://api.github.com/users/kyrias/events{/privacy}", "received_events_url": "https://api.github.com/users/kyrias/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kyrias", "id": 2285387, "node_id": "MDQ6VXNlcjIyODUzODc=", "avatar_url": "https://avatars.githubusercontent.com/u/2285387?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kyrias", "html_url": "https://github.com/kyrias", "followers_url": "https://api.github.com/users/kyrias/followers", "following_url": "https://api.github.com/users/kyrias/following{/other_user}", "gists_url": "https://api.github.com/users/kyrias/gists{/gist_id}", "starred_url": "https://api.github.com/users/kyrias/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kyrias/subscriptions", "organizations_url": "https://api.github.com/users/kyrias/orgs", "repos_url": "https://api.github.com/users/kyrias/repos", "events_url": "https://api.github.com/users/kyrias/events{/privacy}", "received_events_url": "https://api.github.com/users/kyrias/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f0c459ebd2edbf6ad18eac91fb1ad80b98d3359e", "url": "https://api.github.com/repos/rust-lang/rust/commits/f0c459ebd2edbf6ad18eac91fb1ad80b98d3359e", "html_url": "https://github.com/rust-lang/rust/commit/f0c459ebd2edbf6ad18eac91fb1ad80b98d3359e"}], "stats": {"total": 34, "additions": 34, "deletions": 0}, "files": [{"sha": "673ba9a9a02c8c2c8b0c9546227eb92913d8430e", "filename": "src/test/run-make/relro-levels/Makefile", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/54b68b656913baa760dc9daf75796e84172f810a/src%2Ftest%2Frun-make%2Frelro-levels%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/54b68b656913baa760dc9daf75796e84172f810a/src%2Ftest%2Frun-make%2Frelro-levels%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Frelro-levels%2FMakefile?ref=54b68b656913baa760dc9daf75796e84172f810a", "patch": "@@ -0,0 +1,21 @@\n+-include ../tools.mk\n+\n+# This tests the different -Zrelro-level values, and makes sure that they they work properly.\n+\n+all:\n+ifeq ($(UNAME),Linux)\n+\t# Ensure that binaries built with the full relro level links them with both\n+\t# RELRO and BIND_NOW for doing eager symbol resolving.\n+\t$(RUSTC) -Zrelro-level=full hello.rs\n+\treadelf -l $(TMPDIR)/hello | grep -q GNU_RELRO\n+\treadelf -d $(TMPDIR)/hello | grep -q BIND_NOW\n+\n+\t$(RUSTC) -Zrelro-level=partial hello.rs\n+\treadelf -l $(TMPDIR)/hello | grep -q GNU_RELRO\n+\n+\t# Ensure that we're *not* built with RELRO when setting it to off.  We do\n+\t# not want to check for BIND_NOW however, as the linker might have that\n+\t# enabled by default.\n+\t$(RUSTC) -Zrelro-level=off hello.rs\n+\t! readelf -l $(TMPDIR)/hello | grep -q GNU_RELRO\n+endif"}, {"sha": "41782851a1a6d763c5487a0ae35edc01fb71d6fb", "filename": "src/test/run-make/relro-levels/hello.rs", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/54b68b656913baa760dc9daf75796e84172f810a/src%2Ftest%2Frun-make%2Frelro-levels%2Fhello.rs", "raw_url": "https://github.com/rust-lang/rust/raw/54b68b656913baa760dc9daf75796e84172f810a/src%2Ftest%2Frun-make%2Frelro-levels%2Fhello.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Frelro-levels%2Fhello.rs?ref=54b68b656913baa760dc9daf75796e84172f810a", "patch": "@@ -0,0 +1,13 @@\n+// Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+fn main() {\n+    println!(\"Hello, world!\");\n+}"}]}