{"sha": "7df41a77b821946e2f187d938e4bc9ef49e03f79", "node_id": "C_kwDOAAsO6NoAKDdkZjQxYTc3YjgyMTk0NmUyZjE4N2Q5MzhlNGJjOWVmNDllMDNmNzk", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2022-08-13T12:22:19Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2022-08-13T12:23:28Z"}, "message": "rustup", "tree": {"sha": "4cbab0c40b7cdff091418f4a8c17b4ba59820571", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4cbab0c40b7cdff091418f4a8c17b4ba59820571"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7df41a77b821946e2f187d938e4bc9ef49e03f79", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7df41a77b821946e2f187d938e4bc9ef49e03f79", "html_url": "https://github.com/rust-lang/rust/commit/7df41a77b821946e2f187d938e4bc9ef49e03f79", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7df41a77b821946e2f187d938e4bc9ef49e03f79/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4e1bc7e695cb412fa77fe17b5380b0244e9a70b9", "url": "https://api.github.com/repos/rust-lang/rust/commits/4e1bc7e695cb412fa77fe17b5380b0244e9a70b9", "html_url": "https://github.com/rust-lang/rust/commit/4e1bc7e695cb412fa77fe17b5380b0244e9a70b9"}], "stats": {"total": 23, "additions": 22, "deletions": 1}, "files": [{"sha": "fdd18704d184076fb0b55d35d1b6e58e14488014", "filename": "rust-version", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7df41a77b821946e2f187d938e4bc9ef49e03f79/rust-version", "raw_url": "https://github.com/rust-lang/rust/raw/7df41a77b821946e2f187d938e4bc9ef49e03f79/rust-version", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/rust-version?ref=7df41a77b821946e2f187d938e4bc9ef49e03f79", "patch": "@@ -1 +1 @@\n-20ffea6938b5839c390252e07940b99e3b6a889a\n+75b7e52e92c3b00fc891b47f5b2efdff0a2be55a"}, {"sha": "ba337f28311e940e30a484a0973b0d77496d4d7b", "filename": "src/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7df41a77b821946e2f187d938e4bc9ef49e03f79/src%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7df41a77b821946e2f187d938e4bc9ef49e03f79/src%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib.rs?ref=7df41a77b821946e2f187d938e4bc9ef49e03f79", "patch": "@@ -116,4 +116,5 @@ pub const MIRI_DEFAULT_ARGS: &[&str] = &[\n     \"-Zmir-opt-level=0\",\n     \"--cfg=miri\",\n     \"-Cdebug-assertions=on\",\n+    \"-Zextra-const-ub-checks\",\n ];"}, {"sha": "fa522c30cbd0fdda4c397188b3383bea7070a8c8", "filename": "tests/fail/const-ub-checks.rs", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/7df41a77b821946e2f187d938e4bc9ef49e03f79/tests%2Ffail%2Fconst-ub-checks.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7df41a77b821946e2f187d938e4bc9ef49e03f79/tests%2Ffail%2Fconst-ub-checks.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ffail%2Fconst-ub-checks.rs?ref=7df41a77b821946e2f187d938e4bc9ef49e03f79", "patch": "@@ -0,0 +1,11 @@\n+#![feature(const_ptr_read)]\n+\n+const UNALIGNED_READ: () = unsafe {\n+    let x = &[0u8; 4];\n+    let ptr = x.as_ptr().cast::<u32>();\n+    ptr.read(); //~ERROR: evaluation of constant value failed\n+};\n+\n+fn main() {\n+    let _x = UNALIGNED_READ;\n+}"}, {"sha": "a8b7ea242b97018c21811a80c08f22f3ed2cca47", "filename": "tests/fail/const-ub-checks.stderr", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/7df41a77b821946e2f187d938e4bc9ef49e03f79/tests%2Ffail%2Fconst-ub-checks.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7df41a77b821946e2f187d938e4bc9ef49e03f79/tests%2Ffail%2Fconst-ub-checks.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ffail%2Fconst-ub-checks.stderr?ref=7df41a77b821946e2f187d938e4bc9ef49e03f79", "patch": "@@ -0,0 +1,9 @@\n+error[E0080]: evaluation of constant value failed\n+  --> $DIR/const-ub-checks.rs:LL:CC\n+   |\n+LL |     ptr.read();\n+   |     ^^^^^^^^^^ accessing memory with alignment ALIGN, but alignment ALIGN is required\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0080`."}]}