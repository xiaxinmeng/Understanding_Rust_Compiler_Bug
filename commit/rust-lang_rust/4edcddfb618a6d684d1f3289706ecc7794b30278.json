{"sha": "4edcddfb618a6d684d1f3289706ecc7794b30278", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRlZGNkZGZiNjE4YTZkNjg0ZDFmMzI4OTcwNmVjYzc3OTRiMzAyNzg=", "commit": {"author": {"name": "Jeremy Soller", "email": "jackpot51@gmail.com", "date": "2016-10-30T22:14:47Z"}, "committer": {"name": "Jeremy Soller", "email": "jackpot51@gmail.com", "date": "2016-10-30T22:14:47Z"}, "message": "Implement TLS scoped keys, compiler builtins", "tree": {"sha": "4b7bc9d8fc70baba2261135de9c514b5e1b4018e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4b7bc9d8fc70baba2261135de9c514b5e1b4018e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4edcddfb618a6d684d1f3289706ecc7794b30278", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4edcddfb618a6d684d1f3289706ecc7794b30278", "html_url": "https://github.com/rust-lang/rust/commit/4edcddfb618a6d684d1f3289706ecc7794b30278", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4edcddfb618a6d684d1f3289706ecc7794b30278/comments", "author": {"login": "jackpot51", "id": 7741236, "node_id": "MDQ6VXNlcjc3NDEyMzY=", "avatar_url": "https://avatars.githubusercontent.com/u/7741236?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackpot51", "html_url": "https://github.com/jackpot51", "followers_url": "https://api.github.com/users/jackpot51/followers", "following_url": "https://api.github.com/users/jackpot51/following{/other_user}", "gists_url": "https://api.github.com/users/jackpot51/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackpot51/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackpot51/subscriptions", "organizations_url": "https://api.github.com/users/jackpot51/orgs", "repos_url": "https://api.github.com/users/jackpot51/repos", "events_url": "https://api.github.com/users/jackpot51/events{/privacy}", "received_events_url": "https://api.github.com/users/jackpot51/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jackpot51", "id": 7741236, "node_id": "MDQ6VXNlcjc3NDEyMzY=", "avatar_url": "https://avatars.githubusercontent.com/u/7741236?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackpot51", "html_url": "https://github.com/jackpot51", "followers_url": "https://api.github.com/users/jackpot51/followers", "following_url": "https://api.github.com/users/jackpot51/following{/other_user}", "gists_url": "https://api.github.com/users/jackpot51/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackpot51/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackpot51/subscriptions", "organizations_url": "https://api.github.com/users/jackpot51/orgs", "repos_url": "https://api.github.com/users/jackpot51/repos", "events_url": "https://api.github.com/users/jackpot51/events{/privacy}", "received_events_url": "https://api.github.com/users/jackpot51/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "37bfef023dab045852ea577dbe40693147a810f5", "url": "https://api.github.com/repos/rust-lang/rust/commits/37bfef023dab045852ea577dbe40693147a810f5", "html_url": "https://github.com/rust-lang/rust/commit/37bfef023dab045852ea577dbe40693147a810f5"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "82a719693ec03ab7a10cff040075012dfcb0622c", "filename": "src/libstd/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4edcddfb618a6d684d1f3289706ecc7794b30278/src%2Flibstd%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4edcddfb618a6d684d1f3289706ecc7794b30278/src%2Flibstd%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Flib.rs?ref=4edcddfb618a6d684d1f3289706ecc7794b30278", "patch": "@@ -322,7 +322,7 @@ extern crate unwind;\n extern crate alloc_system;\n \n // compiler-rt intrinsics\n-//REDOX TODO extern crate compiler_builtins;\n+extern crate compiler_builtins;\n \n // Make std testable by not duplicating lang items and other globals. See #2912\n #[cfg(test)] extern crate std as realstd;"}, {"sha": "7958437a30a5a774e801f3e00f4d9ea0d765f488", "filename": "src/libstd/sys/redox/thread_local.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/4edcddfb618a6d684d1f3289706ecc7794b30278/src%2Flibstd%2Fsys%2Fredox%2Fthread_local.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4edcddfb618a6d684d1f3289706ecc7794b30278/src%2Flibstd%2Fsys%2Fredox%2Fthread_local.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fredox%2Fthread_local.rs?ref=4edcddfb618a6d684d1f3289706ecc7794b30278", "patch": "@@ -17,10 +17,10 @@ pub type Key = usize;\n \n type Dtor = unsafe extern fn(*mut u8);\n \n-//TODO: Implement this properly\n-\n+#[thread_local]\n static mut NEXT_KEY: Key = 0;\n \n+#[thread_local]\n static mut LOCALS: *mut BTreeMap<Key, (*mut u8, Option<Dtor>)> = ptr::null_mut();\n \n unsafe fn locals() -> &'static mut BTreeMap<Key, (*mut u8, Option<Dtor>)> {"}]}