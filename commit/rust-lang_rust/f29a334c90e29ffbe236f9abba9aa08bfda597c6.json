{"sha": "f29a334c90e29ffbe236f9abba9aa08bfda597c6", "node_id": "C_kwDOAAsO6NoAKGYyOWEzMzRjOTBlMjlmZmJlMjM2ZjlhYmJhOWFhMDhiZmRhNTk3YzY", "commit": {"author": {"name": "Kyle Matsuda", "email": "kyle.yoshio.matsuda@gmail.com", "date": "2023-01-10T21:57:22Z"}, "committer": {"name": "Kyle Matsuda", "email": "kyle.yoshio.matsuda@gmail.com", "date": "2023-01-14T07:29:56Z"}, "message": "change impl_trait_ref query to return EarlyBinder; remove bound_impl_trait_ref query; add EarlyBinder to impl_trait_ref in metadata", "tree": {"sha": "58cf93d10ec51c3fe9c5bea7242ff8a498186ba3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/58cf93d10ec51c3fe9c5bea7242ff8a498186ba3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f29a334c90e29ffbe236f9abba9aa08bfda597c6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f29a334c90e29ffbe236f9abba9aa08bfda597c6", "html_url": "https://github.com/rust-lang/rust/commit/f29a334c90e29ffbe236f9abba9aa08bfda597c6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f29a334c90e29ffbe236f9abba9aa08bfda597c6/comments", "author": {"login": "kylematsuda", "id": 17287790, "node_id": "MDQ6VXNlcjE3Mjg3Nzkw", "avatar_url": "https://avatars.githubusercontent.com/u/17287790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kylematsuda", "html_url": "https://github.com/kylematsuda", "followers_url": "https://api.github.com/users/kylematsuda/followers", "following_url": "https://api.github.com/users/kylematsuda/following{/other_user}", "gists_url": "https://api.github.com/users/kylematsuda/gists{/gist_id}", "starred_url": "https://api.github.com/users/kylematsuda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kylematsuda/subscriptions", "organizations_url": "https://api.github.com/users/kylematsuda/orgs", "repos_url": "https://api.github.com/users/kylematsuda/repos", "events_url": "https://api.github.com/users/kylematsuda/events{/privacy}", "received_events_url": "https://api.github.com/users/kylematsuda/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kylematsuda", "id": 17287790, "node_id": "MDQ6VXNlcjE3Mjg3Nzkw", "avatar_url": "https://avatars.githubusercontent.com/u/17287790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kylematsuda", "html_url": "https://github.com/kylematsuda", "followers_url": "https://api.github.com/users/kylematsuda/followers", "following_url": "https://api.github.com/users/kylematsuda/following{/other_user}", "gists_url": "https://api.github.com/users/kylematsuda/gists{/gist_id}", "starred_url": "https://api.github.com/users/kylematsuda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kylematsuda/subscriptions", "organizations_url": "https://api.github.com/users/kylematsuda/orgs", "repos_url": "https://api.github.com/users/kylematsuda/repos", "events_url": "https://api.github.com/users/kylematsuda/events{/privacy}", "received_events_url": "https://api.github.com/users/kylematsuda/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "be130b57d477069799158506d7e80145fdf71c73", "url": "https://api.github.com/repos/rust-lang/rust/commits/be130b57d477069799158506d7e80145fdf71c73", "html_url": "https://github.com/rust-lang/rust/commit/be130b57d477069799158506d7e80145fdf71c73"}], "stats": {"total": 235, "additions": 108, "deletions": 127}, "files": [{"sha": "7567a02d1454ec47b5745cff92aeb9fe108d82ed", "filename": "compiler/rustc_hir_analysis/src/astconv/mod.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_hir_analysis%2Fsrc%2Fastconv%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_hir_analysis%2Fsrc%2Fastconv%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_analysis%2Fsrc%2Fastconv%2Fmod.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -2059,7 +2059,7 @@ impl<'o, 'tcx> dyn AstConv<'tcx> + 'o {\n             (_, Res::SelfTyAlias { alias_to: impl_def_id, is_trait_impl: true, .. }) => {\n                 // `Self` in an impl of a trait -- we have a concrete self type and a\n                 // trait reference.\n-                let Some(trait_ref) = tcx.bound_impl_trait_ref(impl_def_id) else {\n+                let Some(trait_ref) = tcx.impl_trait_ref(impl_def_id) else {\n                     // A cycle error occurred, most likely.\n                     let guar = tcx.sess.delay_span_bug(span, \"expected cycle error\");\n                     return Err(guar);\n@@ -2155,7 +2155,7 @@ impl<'o, 'tcx> dyn AstConv<'tcx> + 'o {\n                                 .is_accessible_from(self.item_def_id(), tcx)\n                             && tcx.all_impls(*trait_def_id)\n                                 .any(|impl_def_id| {\n-                                    let trait_ref = tcx.bound_impl_trait_ref(impl_def_id);\n+                                    let trait_ref = tcx.impl_trait_ref(impl_def_id);\n                                     trait_ref.map_or(false, |trait_ref| {\n                                         let impl_ = trait_ref.subst(\n                                             tcx,\n@@ -2308,7 +2308,7 @@ impl<'o, 'tcx> dyn AstConv<'tcx> + 'o {\n                             && tcx.impl_polarity(impl_def_id) != ty::ImplPolarity::Negative\n                     })\n                     .filter_map(|impl_def_id| tcx.impl_trait_ref(impl_def_id))\n-                    .map(|impl_| impl_.self_ty())\n+                    .map(|impl_| impl_.subst_identity().self_ty())\n                     // We don't care about blanket impls.\n                     .filter(|self_ty| !self_ty.has_non_region_param())\n                     .map(|self_ty| tcx.erase_regions(self_ty).to_string())"}, {"sha": "7df19ba6d36bfa1b88fca5cbb0af3bc59cec9c8f", "filename": "compiler/rustc_hir_analysis/src/check/check.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_hir_analysis%2Fsrc%2Fcheck%2Fcheck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_hir_analysis%2Fsrc%2Fcheck%2Fcheck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_analysis%2Fsrc%2Fcheck%2Fcheck.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -535,7 +535,7 @@ fn check_item_type(tcx: TyCtxt<'_>, id: hir::ItemId) {\n                 return;\n             };\n             debug!(\"ItemKind::Impl {} with id {:?}\", it.ident, it.owner_id);\n-            if let Some(impl_trait_ref) = tcx.bound_impl_trait_ref(it.owner_id.to_def_id()) {\n+            if let Some(impl_trait_ref) = tcx.impl_trait_ref(it.owner_id) {\n                 check_impl_items_against_trait(\n                     tcx,\n                     it.span,"}, {"sha": "770d7b6f927e4a4179752e85ca412ee7924e07d0", "filename": "compiler/rustc_hir_analysis/src/check/compare_impl_item.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_hir_analysis%2Fsrc%2Fcheck%2Fcompare_impl_item.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_hir_analysis%2Fsrc%2Fcheck%2Fcompare_impl_item.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_analysis%2Fsrc%2Fcheck%2Fcompare_impl_item.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -617,7 +617,7 @@ pub(super) fn collect_return_position_impl_trait_in_trait_tys<'tcx>(\n     let impl_m = tcx.opt_associated_item(def_id).unwrap();\n     let trait_m = tcx.opt_associated_item(impl_m.trait_item_def_id.unwrap()).unwrap();\n     let impl_trait_ref =\n-        tcx.bound_impl_trait_ref(impl_m.impl_container(tcx).unwrap()).unwrap().subst_identity();\n+        tcx.impl_trait_ref(impl_m.impl_container(tcx).unwrap()).unwrap().subst_identity();\n     let param_env = tcx.param_env(def_id);\n \n     // First, check a few of the same things as `compare_impl_method`,\n@@ -1686,7 +1686,7 @@ pub(super) fn compare_impl_const_raw(\n     let impl_const_item = tcx.associated_item(impl_const_item_def);\n     let trait_const_item = tcx.associated_item(trait_const_item_def);\n     let impl_trait_ref =\n-        tcx.bound_impl_trait_ref(impl_const_item.container_id(tcx)).unwrap().subst_identity();\n+        tcx.impl_trait_ref(impl_const_item.container_id(tcx)).unwrap().subst_identity();\n     debug!(\"compare_const_impl(impl_trait_ref={:?})\", impl_trait_ref);\n \n     let impl_c_span = tcx.def_span(impl_const_item_def.to_def_id());"}, {"sha": "912e0ec560b49e9768e482ec31ffa98a8740ecd3", "filename": "compiler/rustc_hir_analysis/src/check/wfcheck.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_hir_analysis%2Fsrc%2Fcheck%2Fwfcheck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_hir_analysis%2Fsrc%2Fcheck%2Fwfcheck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_analysis%2Fsrc%2Fcheck%2Fwfcheck.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -181,7 +181,7 @@ fn check_item<'tcx>(tcx: TyCtxt<'tcx>, item: &'tcx hir::Item<'tcx>) {\n         // for `T`\n         hir::ItemKind::Impl(ref impl_) => {\n             let is_auto = tcx\n-                .bound_impl_trait_ref(def_id.into())\n+                .impl_trait_ref(def_id)\n                 .map_or(false, |trait_ref| tcx.trait_is_auto(trait_ref.skip_binder().def_id));\n             if let (hir::Defaultness::Default { .. }, true) = (impl_.defaultness, is_auto) {\n                 let sp = impl_.of_trait.as_ref().map_or(item.span, |t| t.path.span);\n@@ -1253,8 +1253,7 @@ fn check_impl<'tcx>(\n                 // `#[rustc_reservation_impl]` impls are not real impls and\n                 // therefore don't need to be WF (the trait's `Self: Trait` predicate\n                 // won't hold).\n-                let trait_ref =\n-                    tcx.bound_impl_trait_ref(item.owner_id.to_def_id()).unwrap().subst_identity();\n+                let trait_ref = tcx.impl_trait_ref(item.owner_id).unwrap().subst_identity();\n                 let trait_ref = wfcx.normalize(\n                     ast_trait_ref.path.span,\n                     Some(WellFormedLoc::Ty(item.hir_id().expect_owner().def_id)),"}, {"sha": "5bdd18fcd637c7eb9b214e588f5a5e053081832d", "filename": "compiler/rustc_hir_analysis/src/coherence/builtin.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_hir_analysis%2Fsrc%2Fcoherence%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_hir_analysis%2Fsrc%2Fcoherence%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_analysis%2Fsrc%2Fcoherence%2Fbuiltin.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -192,7 +192,7 @@ fn visit_implementation_of_dispatch_from_dyn(tcx: TyCtxt<'_>, impl_did: LocalDef\n     let source = tcx.type_of(impl_did);\n     assert!(!source.has_escaping_bound_vars());\n     let target = {\n-        let trait_ref = tcx.bound_impl_trait_ref(impl_did.into()).unwrap().subst_identity();\n+        let trait_ref = tcx.impl_trait_ref(impl_did).unwrap().subst_identity();\n         assert_eq!(trait_ref.def_id, dispatch_from_dyn_trait);\n \n         trait_ref.substs.type_at(1)\n@@ -354,7 +354,7 @@ pub fn coerce_unsized_info<'tcx>(tcx: TyCtxt<'tcx>, impl_did: DefId) -> CoerceUn\n     });\n \n     let source = tcx.type_of(impl_did);\n-    let trait_ref = tcx.bound_impl_trait_ref(impl_did.into()).unwrap().subst_identity();\n+    let trait_ref = tcx.impl_trait_ref(impl_did).unwrap().subst_identity();\n     assert_eq!(trait_ref.def_id, coerce_unsized_trait);\n     let target = trait_ref.substs.type_at(1);\n     debug!(\"visit_implementation_of_coerce_unsized: {:?} -> {:?} (bound)\", source, target);"}, {"sha": "2e9cd2fca01c139d366a0f1f43a06d1179c30f31", "filename": "compiler/rustc_hir_analysis/src/coherence/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_hir_analysis%2Fsrc%2Fcoherence%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_hir_analysis%2Fsrc%2Fcoherence%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_analysis%2Fsrc%2Fcoherence%2Fmod.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -128,7 +128,7 @@ fn coherent_trait(tcx: TyCtxt<'_>, def_id: DefId) {\n \n     let impls = tcx.hir().trait_impls(def_id);\n     for &impl_def_id in impls {\n-        let trait_ref = tcx.bound_impl_trait_ref(impl_def_id.into()).unwrap().subst_identity();\n+        let trait_ref = tcx.impl_trait_ref(impl_def_id).unwrap().subst_identity();\n \n         check_impl(tcx, impl_def_id, trait_ref);\n         check_object_overlap(tcx, impl_def_id, trait_ref);"}, {"sha": "e8fe92814576ecbe7a0666eb205e8e021e479f00", "filename": "compiler/rustc_hir_analysis/src/coherence/orphan.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_hir_analysis%2Fsrc%2Fcoherence%2Forphan.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_hir_analysis%2Fsrc%2Fcoherence%2Forphan.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_analysis%2Fsrc%2Fcoherence%2Forphan.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -21,7 +21,7 @@ pub(crate) fn orphan_check_impl(\n     tcx: TyCtxt<'_>,\n     impl_def_id: LocalDefId,\n ) -> Result<(), ErrorGuaranteed> {\n-    let trait_ref = tcx.bound_impl_trait_ref(impl_def_id.into()).unwrap().skip_binder();\n+    let trait_ref = tcx.impl_trait_ref(impl_def_id).unwrap().skip_binder();\n     trait_ref.error_reported()?;\n \n     let ret = do_orphan_check_impl(tcx, trait_ref, impl_def_id);"}, {"sha": "c7693cab47412fbc283e1c34f24b8d3c70250331", "filename": "compiler/rustc_hir_analysis/src/coherence/unsafety.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_hir_analysis%2Fsrc%2Fcoherence%2Funsafety.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_hir_analysis%2Fsrc%2Fcoherence%2Funsafety.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_analysis%2Fsrc%2Fcoherence%2Funsafety.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -13,9 +13,7 @@ pub(super) fn check_item(tcx: TyCtxt<'_>, def_id: LocalDefId) {\n     let item = tcx.hir().expect_item(def_id);\n     let hir::ItemKind::Impl(ref impl_) = item.kind else { bug!() };\n \n-    if let Some(trait_ref) =\n-        tcx.bound_impl_trait_ref(item.owner_id.to_def_id()).map(|t| t.subst_identity())\n-    {\n+    if let Some(trait_ref) = tcx.impl_trait_ref(item.owner_id).map(|t| t.subst_identity()) {\n         let trait_def = tcx.trait_def(trait_ref.def_id);\n         let unsafe_attr =\n             impl_.generics.params.iter().find(|p| p.pure_wrt_drop).map(|_| \"may_dangle\");"}, {"sha": "35f47dfc1a5e289b038e15041e93ff421ddd5149", "filename": "compiler/rustc_hir_analysis/src/collect.rs", "status": "modified", "additions": 13, "deletions": 9, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_hir_analysis%2Fsrc%2Fcollect.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_hir_analysis%2Fsrc%2Fcollect.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_analysis%2Fsrc%2Fcollect.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -1339,18 +1339,22 @@ fn suggest_impl_trait<'tcx>(\n     None\n }\n \n-fn impl_trait_ref(tcx: TyCtxt<'_>, def_id: DefId) -> Option<ty::TraitRef<'_>> {\n+fn impl_trait_ref(tcx: TyCtxt<'_>, def_id: DefId) -> Option<ty::EarlyBinder<ty::TraitRef<'_>>> {\n     let icx = ItemCtxt::new(tcx, def_id);\n     let item = tcx.hir().expect_item(def_id.expect_local());\n     match item.kind {\n-        hir::ItemKind::Impl(ref impl_) => impl_.of_trait.as_ref().map(|ast_trait_ref| {\n-            let selfty = tcx.type_of(def_id);\n-            icx.astconv().instantiate_mono_trait_ref(\n-                ast_trait_ref,\n-                selfty,\n-                check_impl_constness(tcx, impl_.constness, ast_trait_ref),\n-            )\n-        }),\n+        hir::ItemKind::Impl(ref impl_) => impl_\n+            .of_trait\n+            .as_ref()\n+            .map(|ast_trait_ref| {\n+                let selfty = tcx.type_of(def_id);\n+                icx.astconv().instantiate_mono_trait_ref(\n+                    ast_trait_ref,\n+                    selfty,\n+                    check_impl_constness(tcx, impl_.constness, ast_trait_ref),\n+                )\n+            })\n+            .map(ty::EarlyBinder),\n         _ => bug!(),\n     }\n }"}, {"sha": "a7e6494c15adb4cf57198821423968c51c4b9c66", "filename": "compiler/rustc_hir_analysis/src/collect/predicates_of.rs", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_hir_analysis%2Fsrc%2Fcollect%2Fpredicates_of.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_hir_analysis%2Fsrc%2Fcollect%2Fpredicates_of.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_analysis%2Fsrc%2Fcollect%2Fpredicates_of.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -87,9 +87,8 @@ fn gather_explicit_predicates_of(tcx: TyCtxt<'_>, def_id: DefId) -> ty::GenericP\n         Node::Item(item) => match item.kind {\n             ItemKind::Impl(ref impl_) => {\n                 if impl_.defaultness.is_default() {\n-                    is_default_impl_trait = tcx\n-                        .bound_impl_trait_ref(def_id)\n-                        .map(|t| ty::Binder::dummy(t.subst_identity()));\n+                    is_default_impl_trait =\n+                        tcx.impl_trait_ref(def_id).map(|t| ty::Binder::dummy(t.subst_identity()));\n                 }\n                 &impl_.generics\n             }\n@@ -253,7 +252,7 @@ fn gather_explicit_predicates_of(tcx: TyCtxt<'_>, def_id: DefId) -> ty::GenericP\n     // for details.\n     if let Node::Item(&Item { kind: ItemKind::Impl { .. }, .. }) = node {\n         let self_ty = tcx.type_of(def_id);\n-        let trait_ref = tcx.bound_impl_trait_ref(def_id).map(ty::EarlyBinder::subst_identity);\n+        let trait_ref = tcx.impl_trait_ref(def_id).map(ty::EarlyBinder::subst_identity);\n         cgp::setup_constraining_predicates(\n             tcx,\n             &mut predicates,"}, {"sha": "1f9a9f80302e3590957b9ef5a7d466ddfd860c1e", "filename": "compiler/rustc_hir_analysis/src/collect/type_of.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_hir_analysis%2Fsrc%2Fcollect%2Ftype_of.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_hir_analysis%2Fsrc%2Fcollect%2Ftype_of.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_analysis%2Fsrc%2Fcollect%2Ftype_of.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -286,7 +286,7 @@ pub(super) fn type_of(tcx: TyCtxt<'_>, def_id: DefId) -> Ty<'_> {\n                 }\n             }\n             ImplItemKind::Type(ty) => {\n-                if tcx.bound_impl_trait_ref(tcx.hir().get_parent_item(hir_id).to_def_id()).is_none() {\n+                if tcx.impl_trait_ref(tcx.hir().get_parent_item(hir_id)).is_none() {\n                     check_feature_inherent_assoc_ty(tcx, item.span);\n                 }\n "}, {"sha": "4fe893442b9bd2987c0ed22233a1eb88a2fe5c9c", "filename": "compiler/rustc_hir_analysis/src/impl_wf_check.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_hir_analysis%2Fsrc%2Fimpl_wf_check.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_hir_analysis%2Fsrc%2Fimpl_wf_check.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_analysis%2Fsrc%2Fimpl_wf_check.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -85,8 +85,7 @@ fn enforce_impl_params_are_constrained(tcx: TyCtxt<'_>, impl_def_id: LocalDefId)\n     }\n     let impl_generics = tcx.generics_of(impl_def_id);\n     let impl_predicates = tcx.predicates_of(impl_def_id);\n-    let impl_trait_ref =\n-        tcx.bound_impl_trait_ref(impl_def_id.into()).map(ty::EarlyBinder::subst_identity);\n+    let impl_trait_ref = tcx.impl_trait_ref(impl_def_id).map(ty::EarlyBinder::subst_identity);\n \n     let mut input_parameters = cgp::parameters_for_impl(impl_self_ty, impl_trait_ref);\n     cgp::identify_constrained_generic_params("}, {"sha": "bcda26c4cc854156c2c7ed4fdfa75d8e1e95a2e7", "filename": "compiler/rustc_hir_analysis/src/impl_wf_check/min_specialization.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_hir_analysis%2Fsrc%2Fimpl_wf_check%2Fmin_specialization.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_hir_analysis%2Fsrc%2Fimpl_wf_check%2Fmin_specialization.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_analysis%2Fsrc%2Fimpl_wf_check%2Fmin_specialization.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -89,7 +89,7 @@ pub(super) fn check_min_specialization(tcx: TyCtxt<'_>, impl_def_id: LocalDefId)\n }\n \n fn parent_specialization_node(tcx: TyCtxt<'_>, impl1_def_id: LocalDefId) -> Option<Node> {\n-    let trait_ref = tcx.bound_impl_trait_ref(impl1_def_id.into())?;\n+    let trait_ref = tcx.impl_trait_ref(impl1_def_id)?;\n     let trait_def = tcx.trait_def(trait_ref.skip_binder().def_id);\n \n     let impl2_node = trait_def.ancestors(tcx, impl1_def_id.to_def_id()).ok()?.nth(1)?;\n@@ -207,7 +207,7 @@ fn unconstrained_parent_impl_substs<'tcx>(\n     let impl_generic_predicates = tcx.predicates_of(impl_def_id);\n     let mut unconstrained_parameters = FxHashSet::default();\n     let mut constrained_params = FxHashSet::default();\n-    let impl_trait_ref = tcx.bound_impl_trait_ref(impl_def_id).map(ty::EarlyBinder::subst_identity);\n+    let impl_trait_ref = tcx.impl_trait_ref(impl_def_id).map(ty::EarlyBinder::subst_identity);\n \n     // Unfortunately the functions in `constrained_generic_parameters` don't do\n     // what we want here. We want only a list of constrained parameters while\n@@ -370,7 +370,7 @@ fn check_predicates<'tcx>(\n     });\n \n     // Include the well-formed predicates of the type parameters of the impl.\n-    for arg in tcx.bound_impl_trait_ref(impl1_def_id.into()).unwrap().subst_identity().substs {\n+    for arg in tcx.impl_trait_ref(impl1_def_id).unwrap().subst_identity().substs {\n         let infcx = &tcx.infer_ctxt().build();\n         let obligations = wf::obligations(\n             infcx,"}, {"sha": "4a33a791e1b7f3b12db9c6e54ca541ab93b5c0fa", "filename": "compiler/rustc_hir_typeck/src/method/confirm.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_hir_typeck%2Fsrc%2Fmethod%2Fconfirm.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_hir_typeck%2Fsrc%2Fmethod%2Fconfirm.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_typeck%2Fsrc%2Fmethod%2Fconfirm.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -240,7 +240,7 @@ impl<'a, 'tcx> ConfirmContext<'a, 'tcx> {\n             probe::InherentImplPick => {\n                 let impl_def_id = pick.item.container_id(self.tcx);\n                 assert!(\n-                    self.tcx.bound_impl_trait_ref(impl_def_id).is_none(),\n+                    self.tcx.impl_trait_ref(impl_def_id).is_none(),\n                     \"impl {:?} is not an inherent impl\",\n                     impl_def_id\n                 );"}, {"sha": "723d489ec46f861ee3cdbb93302a53a2eff4a19a", "filename": "compiler/rustc_hir_typeck/src/method/suggest.rs", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_hir_typeck%2Fsrc%2Fmethod%2Fsuggest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_hir_typeck%2Fsrc%2Fmethod%2Fsuggest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_typeck%2Fsrc%2Fmethod%2Fsuggest.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -1036,7 +1036,7 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n                     // Provide the best span we can. Use the item, if local to crate, else\n                     // the impl, if local to crate (item may be defaulted), else nothing.\n                     let Some(item) = self.associated_value(impl_did, item_name).or_else(|| {\n-                        let impl_trait_ref = self.tcx.bound_impl_trait_ref(impl_did)?;\n+                        let impl_trait_ref = self.tcx.impl_trait_ref(impl_did)?;\n                         self.associated_value(impl_trait_ref.skip_binder().def_id, item_name)\n                     }) else {\n                         continue;\n@@ -1052,7 +1052,7 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n \n                     let impl_ty = self.tcx.at(span).type_of(impl_did);\n \n-                    let insertion = match self.tcx.bound_impl_trait_ref(impl_did) {\n+                    let insertion = match self.tcx.impl_trait_ref(impl_did) {\n                         None => String::new(),\n                         Some(trait_ref) => {\n                             format!(\n@@ -1088,7 +1088,7 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n                         err.note(&note_str);\n                     }\n                     if let Some(sugg_span) = sugg_span\n-                        && let Some(trait_ref) = self.tcx.bound_impl_trait_ref(impl_did) {\n+                        && let Some(trait_ref) = self.tcx.impl_trait_ref(impl_did) {\n                         let path = self.tcx.def_path_str(trait_ref.skip_binder().def_id);\n \n                         let ty = match item.kind {\n@@ -2584,8 +2584,7 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n                             self.tcx.impl_polarity(*imp_did) == ty::ImplPolarity::Negative\n                         })\n                         .any(|imp_did| {\n-                            let imp =\n-                                self.tcx.bound_impl_trait_ref(imp_did).unwrap().subst_identity();\n+                            let imp = self.tcx.impl_trait_ref(imp_did).unwrap().subst_identity();\n                             let imp_simp =\n                                 simplify_type(self.tcx, imp.self_ty(), TreatParams::AsPlaceholder);\n                             imp_simp.map_or(false, |s| s == simp_rcvr_ty)"}, {"sha": "021e741ee2f710b871fb74f33e65cedb1f6152fc", "filename": "compiler/rustc_infer/src/infer/error_reporting/note.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_infer%2Fsrc%2Finfer%2Ferror_reporting%2Fnote.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_infer%2Fsrc%2Finfer%2Ferror_reporting%2Fnote.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_infer%2Fsrc%2Finfer%2Ferror_reporting%2Fnote.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -317,7 +317,7 @@ impl<'tcx> TypeErrCtxt<'_, 'tcx> {\n             self.tcx.associated_item(impl_item_def_id).impl_container(self.tcx) else { return; };\n         let Some(trait_ref) = self\n             .tcx\n-            .bound_impl_trait_ref(impl_def_id)\n+            .impl_trait_ref(impl_def_id)\n             else { return; };\n         let trait_substs = trait_ref\n             .subst_identity()"}, {"sha": "74d234fabea0872467d98c5828b39e472ddc9e0f", "filename": "compiler/rustc_lint/src/nonstandard_style.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_lint%2Fsrc%2Fnonstandard_style.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_lint%2Fsrc%2Fnonstandard_style.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_lint%2Fsrc%2Fnonstandard_style.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -26,7 +26,7 @@ pub fn method_context(cx: &LateContext<'_>, id: hir::HirId) -> MethodLateContext\n     let item = cx.tcx.associated_item(def_id);\n     match item.container {\n         ty::TraitContainer => MethodLateContext::TraitAutoImpl,\n-        ty::ImplContainer => match cx.tcx.bound_impl_trait_ref(item.container_id(cx.tcx)) {\n+        ty::ImplContainer => match cx.tcx.impl_trait_ref(item.container_id(cx.tcx)) {\n             Some(_) => MethodLateContext::TraitImpl,\n             None => MethodLateContext::PlainImpl,\n         },"}, {"sha": "57482a9edba880761fd97b38a0b4dc567aba419d", "filename": "compiler/rustc_lint/src/pass_by_value.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_lint%2Fsrc%2Fpass_by_value.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_lint%2Fsrc%2Fpass_by_value.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_lint%2Fsrc%2Fpass_by_value.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -24,7 +24,7 @@ impl<'tcx> LateLintPass<'tcx> for PassByValue {\n         match &ty.kind {\n             TyKind::Ref(_, hir::MutTy { ty: inner_ty, mutbl: hir::Mutability::Not }) => {\n                 if let Some(impl_did) = cx.tcx.impl_of_method(ty.hir_id.owner.to_def_id()) {\n-                    if cx.tcx.bound_impl_trait_ref(impl_did).is_some() {\n+                    if cx.tcx.impl_trait_ref(impl_did).is_some() {\n                         return;\n                     }\n                 }"}, {"sha": "ba856a11890e50ecc398ab327de12c7fbb397447", "filename": "compiler/rustc_metadata/src/rmeta/encoder.rs", "status": "modified", "additions": 4, "deletions": 8, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_metadata%2Fsrc%2Frmeta%2Fencoder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_metadata%2Fsrc%2Frmeta%2Fencoder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_metadata%2Fsrc%2Frmeta%2Fencoder.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -1555,8 +1555,7 @@ impl<'a, 'tcx> EncodeContext<'a, 'tcx> {\n                 self.tables.impl_defaultness.set(def_id.index, *defaultness);\n                 self.tables.constness.set(def_id.index, *constness);\n \n-                let trait_ref =\n-                    self.tcx.bound_impl_trait_ref(def_id).map(ty::EarlyBinder::skip_binder);\n+                let trait_ref = self.tcx.impl_trait_ref(def_id).map(ty::EarlyBinder::skip_binder);\n                 if let Some(trait_ref) = trait_ref {\n                     let trait_def = self.tcx.trait_def(trait_ref.def_id);\n                     if let Ok(mut an) = trait_def.ancestors(self.tcx, def_id) {\n@@ -1633,9 +1632,7 @@ impl<'a, 'tcx> EncodeContext<'a, 'tcx> {\n             }\n         }\n         if let hir::ItemKind::Impl { .. } = item.kind {\n-            if let Some(trait_ref) =\n-                self.tcx.bound_impl_trait_ref(def_id).map(ty::EarlyBinder::subst_identity)\n-            {\n+            if let Some(trait_ref) = self.tcx.impl_trait_ref(def_id) {\n                 record!(self.tables.impl_trait_ref[def_id] <- trait_ref);\n             }\n         }\n@@ -1901,9 +1898,8 @@ impl<'a, 'tcx> EncodeContext<'a, 'tcx> {\n \n         for id in tcx.hir().items() {\n             if matches!(tcx.def_kind(id.owner_id), DefKind::Impl) {\n-                if let Some(trait_ref) = tcx\n-                    .bound_impl_trait_ref(id.owner_id.to_def_id())\n-                    .map(ty::EarlyBinder::subst_identity)\n+                if let Some(trait_ref) =\n+                    tcx.impl_trait_ref(id.owner_id).map(ty::EarlyBinder::subst_identity)\n                 {\n                     let simplified_self_ty = fast_reject::simplify_type(\n                         self.tcx,"}, {"sha": "5b7b096b4edf1a903beb400bb27b6e2de463d515", "filename": "compiler/rustc_metadata/src/rmeta/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_metadata%2Fsrc%2Frmeta%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_metadata%2Fsrc%2Frmeta%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_metadata%2Fsrc%2Frmeta%2Fmod.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -359,7 +359,7 @@ define_tables! {\n     variances_of: Table<DefIndex, LazyArray<ty::Variance>>,\n     fn_sig: Table<DefIndex, LazyValue<ty::PolyFnSig<'static>>>,\n     codegen_fn_attrs: Table<DefIndex, LazyValue<CodegenFnAttrs>>,\n-    impl_trait_ref: Table<DefIndex, LazyValue<ty::TraitRef<'static>>>,\n+    impl_trait_ref: Table<DefIndex, LazyValue<ty::EarlyBinder<ty::TraitRef<'static>>>>,\n     const_param_default: Table<DefIndex, LazyValue<ty::EarlyBinder<rustc_middle::ty::Const<'static>>>>,\n     object_lifetime_default: Table<DefIndex, LazyValue<ObjectLifetimeDefault>>,\n     optimized_mir: Table<DefIndex, LazyValue<mir::Body<'static>>>,"}, {"sha": "f567eaf967724909a88df86872a878956d2c2ff3", "filename": "compiler/rustc_middle/src/hir/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_middle%2Fsrc%2Fhir%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_middle%2Fsrc%2Fhir%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fhir%2Fmod.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -101,7 +101,7 @@ impl<'tcx> TyCtxt<'tcx> {\n     }\n \n     pub fn impl_subject(self, def_id: DefId) -> ImplSubject<'tcx> {\n-        self.bound_impl_trait_ref(def_id)\n+        self.impl_trait_ref(def_id)\n             .map(|t| t.subst_identity())\n             .map(ImplSubject::Trait)\n             .unwrap_or_else(|| ImplSubject::Inherent(self.type_of(def_id)))"}, {"sha": "b3acf815e0c10e931045db237c919ce7191d1acd", "filename": "compiler/rustc_middle/src/query/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_middle%2Fsrc%2Fquery%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_middle%2Fsrc%2Fquery%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fquery%2Fmod.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -737,7 +737,7 @@ rustc_queries! {\n \n     /// Given an `impl_id`, return the trait it implements.\n     /// Return `None` if this is an inherent impl.\n-    query impl_trait_ref(impl_id: DefId) -> Option<ty::TraitRef<'tcx>> {\n+    query impl_trait_ref(impl_id: DefId) -> Option<ty::EarlyBinder<ty::TraitRef<'tcx>>> {\n         desc { |tcx| \"computing trait implemented by `{}`\", tcx.def_path_str(impl_id) }\n         cache_on_disk_if { impl_id.is_local() }\n         separate_provide_extern"}, {"sha": "63f31e5a11f39e96e835a308d2e12653767d22f7", "filename": "compiler/rustc_middle/src/ty/context.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_middle%2Fsrc%2Fty%2Fcontext.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_middle%2Fsrc%2Fty%2Fcontext.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fty%2Fcontext.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -1027,7 +1027,7 @@ impl<'tcx> TyCtxt<'tcx> {\n     /// Checks if the bound region is in Impl Item.\n     pub fn is_bound_region_in_impl_item(self, suitable_region_binding_scope: LocalDefId) -> bool {\n         let container_id = self.parent(suitable_region_binding_scope.to_def_id());\n-        if self.bound_impl_trait_ref(container_id).is_some() {\n+        if self.impl_trait_ref(container_id).is_some() {\n             // For now, we do not try to target impls of traits. This is\n             // because this message is going to suggest that the user\n             // change the fn signature, but they may not be free to do so,"}, {"sha": "7cc4ad4ca46cd2e8da7bd1b8ce56ec962b714774", "filename": "compiler/rustc_middle/src/ty/mod.rs", "status": "modified", "additions": 4, "deletions": 8, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_middle%2Fsrc%2Fty%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_middle%2Fsrc%2Fty%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fty%2Fmod.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -2187,12 +2187,8 @@ impl<'tcx> TyCtxt<'tcx> {\n     ) -> Option<ImplOverlapKind> {\n         // If either trait impl references an error, they're allowed to overlap,\n         // as one of them essentially doesn't exist.\n-        if self\n-            .bound_impl_trait_ref(def_id1)\n-            .map_or(false, |tr| tr.skip_binder().references_error())\n-            || self\n-                .bound_impl_trait_ref(def_id2)\n-                .map_or(false, |tr| tr.skip_binder().references_error())\n+        if self.impl_trait_ref(def_id1).map_or(false, |tr| tr.skip_binder().references_error())\n+            || self.impl_trait_ref(def_id2).map_or(false, |tr| tr.skip_binder().references_error())\n         {\n             return Some(ImplOverlapKind::Permitted { marker: false });\n         }\n@@ -2221,7 +2217,7 @@ impl<'tcx> TyCtxt<'tcx> {\n \n         let is_marker_overlap = {\n             let is_marker_impl = |def_id: DefId| -> bool {\n-                let trait_ref = self.bound_impl_trait_ref(def_id);\n+                let trait_ref = self.impl_trait_ref(def_id);\n                 trait_ref.map_or(false, |tr| self.trait_def(tr.skip_binder().def_id).is_marker)\n             };\n             is_marker_impl(def_id1) && is_marker_impl(def_id2)\n@@ -2368,7 +2364,7 @@ impl<'tcx> TyCtxt<'tcx> {\n     /// Given the `DefId` of an impl, returns the `DefId` of the trait it implements.\n     /// If it implements no trait, returns `None`.\n     pub fn trait_id_of_impl(self, def_id: DefId) -> Option<DefId> {\n-        self.bound_impl_trait_ref(def_id).map(|tr| tr.skip_binder().def_id)\n+        self.impl_trait_ref(def_id).map(|tr| tr.skip_binder().def_id)\n     }\n \n     /// If the given `DefId` describes an item belonging to a trait,"}, {"sha": "c302c461195aaf833b9b00e843efb17c5dd8272f", "filename": "compiler/rustc_middle/src/ty/print/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_middle%2Fsrc%2Fty%2Fprint%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_middle%2Fsrc%2Fty%2Fprint%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fty%2Fprint%2Fmod.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -116,7 +116,7 @@ pub trait Printer<'tcx>: Sized {\n             DefPathData::Impl => {\n                 let generics = self.tcx().generics_of(def_id);\n                 let self_ty = self.tcx().bound_type_of(def_id);\n-                let impl_trait_ref = self.tcx().bound_impl_trait_ref(def_id);\n+                let impl_trait_ref = self.tcx().impl_trait_ref(def_id);\n                 let (self_ty, impl_trait_ref) = if substs.len() >= generics.count() {\n                     (\n                         self_ty.subst(self.tcx(), substs),"}, {"sha": "1286a5253c068618fcc4da0bee0515990a8eb515", "filename": "compiler/rustc_middle/src/ty/util.rs", "status": "modified", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_middle%2Fsrc%2Fty%2Futil.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_middle%2Fsrc%2Fty%2Futil.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fty%2Futil.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -652,13 +652,6 @@ impl<'tcx> TyCtxt<'tcx> {\n         ty::EarlyBinder(self.fn_sig(def_id))\n     }\n \n-    pub fn bound_impl_trait_ref(\n-        self,\n-        def_id: DefId,\n-    ) -> Option<ty::EarlyBinder<ty::TraitRef<'tcx>>> {\n-        self.impl_trait_ref(def_id).map(|i| ty::EarlyBinder(i))\n-    }\n-\n     pub fn bound_explicit_item_bounds(\n         self,\n         def_id: DefId,"}, {"sha": "3080248d508244caf014857281e3cdbc082e2aa1", "filename": "compiler/rustc_monomorphize/src/collector.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_monomorphize%2Fsrc%2Fcollector.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_monomorphize%2Fsrc%2Fcollector.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_monomorphize%2Fsrc%2Fcollector.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -1351,9 +1351,8 @@ fn create_mono_items_for_default_impls<'tcx>(\n                 tcx.def_path_str(item.owner_id.to_def_id())\n             );\n \n-            if let Some(trait_ref) = tcx\n-                .bound_impl_trait_ref(item.owner_id.to_def_id())\n-                .map(ty::EarlyBinder::subst_identity)\n+            if let Some(trait_ref) =\n+                tcx.impl_trait_ref(item.owner_id).map(ty::EarlyBinder::subst_identity)\n             {\n                 let param_env = ty::ParamEnv::reveal_all();\n                 let trait_ref = tcx.normalize_erasing_regions(param_env, trait_ref);"}, {"sha": "94171b4b0c8f1b5ffa6021d2bf3a68c035aceb5c", "filename": "compiler/rustc_passes/src/dead.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_passes%2Fsrc%2Fdead.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_passes%2Fsrc%2Fdead.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_passes%2Fsrc%2Fdead.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -266,7 +266,7 @@ impl<'tcx> MarkSymbolVisitor<'tcx> {\n             if let Some(trait_of) = self.tcx.trait_id_of_impl(impl_of)\n                 && self.tcx.has_attr(trait_of, sym::rustc_trivial_field_reads)\n             {\n-                let trait_ref = self.tcx.bound_impl_trait_ref(impl_of).unwrap().subst_identity();\n+                let trait_ref = self.tcx.impl_trait_ref(impl_of).unwrap().subst_identity();\n                 if let ty::Adt(adt_def, _) = trait_ref.self_ty().kind()\n                     && let Some(adt_def_id) = adt_def.did().as_local()\n                 {\n@@ -310,7 +310,7 @@ impl<'tcx> MarkSymbolVisitor<'tcx> {\n             }\n             Node::ImplItem(impl_item) => {\n                 let item = self.tcx.local_parent(impl_item.owner_id.def_id);\n-                if self.tcx.bound_impl_trait_ref(item.into()).is_none() {\n+                if self.tcx.impl_trait_ref(item).is_none() {\n                     //// If it's a type whose items are live, then it's live, too.\n                     //// This is done to handle the case where, for example, the static\n                     //// method of a private type is used, but the type itself is never\n@@ -534,7 +534,7 @@ fn check_item<'tcx>(\n             }\n         }\n         DefKind::Impl => {\n-            let of_trait = tcx.bound_impl_trait_ref(id.owner_id.to_def_id());\n+            let of_trait = tcx.impl_trait_ref(id.owner_id);\n \n             if of_trait.is_some() {\n                 worklist.push(id.owner_id.def_id);"}, {"sha": "96f7236de5cb12ab9209f1b2827319026419cfaf", "filename": "compiler/rustc_passes/src/stability.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_passes%2Fsrc%2Fstability.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_passes%2Fsrc%2Fstability.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_passes%2Fsrc%2Fstability.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -593,7 +593,7 @@ impl<'tcx> Visitor<'tcx> for MissingStabilityAnnotations<'tcx> {\n \n     fn visit_impl_item(&mut self, ii: &'tcx hir::ImplItem<'tcx>) {\n         let impl_def_id = self.tcx.hir().get_parent_item(ii.hir_id());\n-        if self.tcx.bound_impl_trait_ref(impl_def_id.to_def_id()).is_none() {\n+        if self.tcx.impl_trait_ref(impl_def_id).is_none() {\n             self.check_missing_stability(ii.owner_id.def_id, ii.span);\n             self.check_missing_const_stability(ii.owner_id.def_id, ii.span);\n         }"}, {"sha": "fb55bb4afaac3adadbdc8c993038c794df18b324", "filename": "compiler/rustc_privacy/src/lib.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_privacy%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_privacy%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_privacy%2Fsrc%2Flib.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -337,7 +337,7 @@ trait VisibilityLike: Sized {\n     ) -> Self {\n         let mut find = FindMin { tcx, effective_visibilities, min: Self::MAX };\n         find.visit(tcx.type_of(def_id));\n-        if let Some(trait_ref) = tcx.bound_impl_trait_ref(def_id.into()) {\n+        if let Some(trait_ref) = tcx.impl_trait_ref(def_id) {\n             find.visit_trait(trait_ref.subst_identity());\n         }\n         find.min\n@@ -857,7 +857,7 @@ impl ReachEverythingInTheInterfaceVisitor<'_, '_> {\n     }\n \n     fn trait_ref(&mut self) -> &mut Self {\n-        if let Some(trait_ref) = self.ev.tcx.bound_impl_trait_ref(self.item_def_id.into()) {\n+        if let Some(trait_ref) = self.ev.tcx.impl_trait_ref(self.item_def_id) {\n             self.visit_trait(trait_ref.subst_identity());\n         }\n         self"}, {"sha": "e9140507192e1d296ec0a1671f383a62004ba7e4", "filename": "compiler/rustc_trait_selection/src/solve/project_goals.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_trait_selection%2Fsrc%2Fsolve%2Fproject_goals.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_trait_selection%2Fsrc%2Fsolve%2Fproject_goals.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Fsolve%2Fproject_goals.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -110,7 +110,7 @@ impl<'tcx> assembly::GoalKind<'tcx> for ProjectionPredicate<'tcx> {\n     ) {\n         let tcx = acx.cx.tcx;\n         let goal_trait_ref = goal.predicate.projection_ty.trait_ref(tcx);\n-        let impl_trait_ref = tcx.bound_impl_trait_ref(impl_def_id).unwrap();\n+        let impl_trait_ref = tcx.impl_trait_ref(impl_def_id).unwrap();\n         let drcx = DeepRejectCtxt { treat_obligation_params: TreatParams::AsPlaceholder };\n         if iter::zip(goal_trait_ref.substs, impl_trait_ref.skip_binder().substs)\n             .any(|(goal, imp)| !drcx.generic_args_may_unify(goal, imp))"}, {"sha": "a43fef5cdb0c875f26e0976766cf9faedc0febf1", "filename": "compiler/rustc_trait_selection/src/solve/trait_goals.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_trait_selection%2Fsrc%2Fsolve%2Ftrait_goals.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_trait_selection%2Fsrc%2Fsolve%2Ftrait_goals.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Fsolve%2Ftrait_goals.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -73,7 +73,7 @@ impl<'tcx> assembly::GoalKind<'tcx> for TraitPredicate<'tcx> {\n     ) {\n         let tcx = acx.cx.tcx;\n \n-        let impl_trait_ref = tcx.bound_impl_trait_ref(impl_def_id).unwrap();\n+        let impl_trait_ref = tcx.impl_trait_ref(impl_def_id).unwrap();\n         let drcx = DeepRejectCtxt { treat_obligation_params: TreatParams::AsPlaceholder };\n         if iter::zip(goal.predicate.trait_ref.substs, impl_trait_ref.skip_binder().substs)\n             .any(|(goal, imp)| !drcx.generic_args_may_unify(goal, imp))"}, {"sha": "185810ed3d8ee936998a6b508aaf617d331d1213", "filename": "compiler/rustc_trait_selection/src/traits/coherence.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fcoherence.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fcoherence.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fcoherence.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -77,8 +77,8 @@ pub fn overlapping_impls(\n     // a quick check via fast_reject to tell if the impl headers could possibly\n     // unify.\n     let drcx = DeepRejectCtxt { treat_obligation_params: TreatParams::AsInfer };\n-    let impl1_ref = tcx.bound_impl_trait_ref(impl1_def_id).map(ty::EarlyBinder::subst_identity);\n-    let impl2_ref = tcx.bound_impl_trait_ref(impl2_def_id).map(ty::EarlyBinder::subst_identity);\n+    let impl1_ref = tcx.impl_trait_ref(impl1_def_id).map(ty::EarlyBinder::subst_identity);\n+    let impl2_ref = tcx.impl_trait_ref(impl2_def_id).map(ty::EarlyBinder::subst_identity);\n     let may_overlap = match (impl1_ref, impl2_ref) {\n         (Some(a), Some(b)) => iter::zip(a.substs, b.substs)\n             .all(|(arg1, arg2)| drcx.generic_args_may_unify(arg1, arg2)),\n@@ -126,7 +126,7 @@ fn with_fresh_ty_vars<'cx, 'tcx>(\n     let header = ty::ImplHeader {\n         impl_def_id,\n         self_ty: tcx.bound_type_of(impl_def_id).subst(tcx, impl_substs),\n-        trait_ref: tcx.bound_impl_trait_ref(impl_def_id).map(|i| i.subst(tcx, impl_substs)),\n+        trait_ref: tcx.impl_trait_ref(impl_def_id).map(|i| i.subst(tcx, impl_substs)),\n         predicates: tcx.predicates_of(impl_def_id).instantiate(tcx, impl_substs).predicates,\n     };\n \n@@ -461,7 +461,7 @@ pub fn orphan_check(tcx: TyCtxt<'_>, impl_def_id: DefId) -> Result<(), OrphanChe\n \n     // We only except this routine to be invoked on implementations\n     // of a trait, not inherent implementations.\n-    let trait_ref = tcx.bound_impl_trait_ref(impl_def_id).unwrap().skip_binder();\n+    let trait_ref = tcx.impl_trait_ref(impl_def_id).unwrap().skip_binder();\n     debug!(\"orphan_check: trait_ref={:?}\", trait_ref);\n \n     // If the *trait* is local to the crate, ok."}, {"sha": "df57c0f60fa6d760675b5ece4064a98d0d41ebe8", "filename": "compiler/rustc_trait_selection/src/traits/error_reporting/ambiguity.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fambiguity.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fambiguity.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fambiguity.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -27,7 +27,7 @@ pub fn recompute_applicable_impls<'tcx>(\n             ocx.normalize(&ObligationCause::dummy(), param_env, placeholder_obligation.trait_ref);\n \n         let impl_substs = infcx.fresh_substs_for_item(DUMMY_SP, impl_def_id);\n-        let impl_trait_ref = tcx.bound_impl_trait_ref(impl_def_id).unwrap().subst(tcx, impl_substs);\n+        let impl_trait_ref = tcx.impl_trait_ref(impl_def_id).unwrap().subst(tcx, impl_substs);\n         let impl_trait_ref = ocx.normalize(&ObligationCause::dummy(), param_env, impl_trait_ref);\n \n         if let Err(_) ="}, {"sha": "5d2e0bd5afa451db5530abeac0c55617e2bb055d", "filename": "compiler/rustc_trait_selection/src/traits/error_reporting/mod.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fmod.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -1940,7 +1940,7 @@ impl<'tcx> InferCtxtPrivExt<'tcx> for TypeErrCtxt<'_, 'tcx> {\n                     return None;\n                 }\n \n-                let imp = self.tcx.bound_impl_trait_ref(def_id).unwrap().subst_identity();\n+                let imp = self.tcx.impl_trait_ref(def_id).unwrap().subst_identity();\n \n                 self.fuzzy_match_tys(trait_pred.skip_binder().self_ty(), imp.self_ty(), false)\n                     .map(|similarity| ImplCandidate { trait_ref: imp, similarity })\n@@ -2039,7 +2039,7 @@ impl<'tcx> InferCtxtPrivExt<'tcx> for TypeErrCtxt<'_, 'tcx> {\n                     self.tcx.impl_polarity(def_id) != ty::ImplPolarity::Negative\n                         || self.tcx.is_builtin_derive(def_id)\n                 })\n-                .filter_map(|def_id| self.tcx.bound_impl_trait_ref(def_id))\n+                .filter_map(|def_id| self.tcx.impl_trait_ref(def_id))\n                 .map(ty::EarlyBinder::subst_identity)\n                 .filter(|trait_ref| {\n                     let self_ty = trait_ref.self_ty();"}, {"sha": "18d308f7123aec90bf1d9192e1cc5b24b76dc8a8", "filename": "compiler/rustc_trait_selection/src/traits/error_reporting/on_unimplemented.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fon_unimplemented.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fon_unimplemented.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fon_unimplemented.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -68,7 +68,7 @@ impl<'tcx> TypeErrCtxtExt<'tcx> for TypeErrCtxt<'_, 'tcx> {\n \n         self.tcx.for_each_relevant_impl(trait_ref.def_id, trait_self_ty, |def_id| {\n             let impl_substs = self.fresh_substs_for_item(obligation.cause.span, def_id);\n-            let impl_trait_ref = tcx.bound_impl_trait_ref(def_id).unwrap().subst(tcx, impl_substs);\n+            let impl_trait_ref = tcx.impl_trait_ref(def_id).unwrap().subst(tcx, impl_substs);\n \n             let impl_self_ty = impl_trait_ref.self_ty();\n "}, {"sha": "241ae0275cec849d9bd31f27dbb1f8c225a5da9c", "filename": "compiler/rustc_trait_selection/src/traits/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fmod.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -522,7 +522,7 @@ fn is_impossible_method(tcx: TyCtxt<'_>, (impl_def_id, trait_item_def_id): (DefI\n     let generics = tcx.generics_of(trait_item_def_id);\n     let predicates = tcx.predicates_of(trait_item_def_id);\n     let impl_trait_ref = tcx\n-        .bound_impl_trait_ref(impl_def_id)\n+        .impl_trait_ref(impl_def_id)\n         .expect(\"expected impl to correspond to trait\")\n         .subst_identity();\n     let param_env = tcx.param_env(impl_def_id);"}, {"sha": "e29ad30d5f2ec7cb5a9e7aa4c0382912e45c6e85", "filename": "compiler/rustc_trait_selection/src/traits/select/candidate_assembly.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fselect%2Fcandidate_assembly.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fselect%2Fcandidate_assembly.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fselect%2Fcandidate_assembly.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -357,7 +357,7 @@ impl<'cx, 'tcx> SelectionContext<'cx, 'tcx> {\n                 // Before we create the substitutions and everything, first\n                 // consider a \"quick reject\". This avoids creating more types\n                 // and so forth that we need to.\n-                let impl_trait_ref = self.tcx().bound_impl_trait_ref(impl_def_id).unwrap();\n+                let impl_trait_ref = self.tcx().impl_trait_ref(impl_def_id).unwrap();\n                 if self.fast_reject_trait_refs(obligation, &impl_trait_ref.0) {\n                     return;\n                 }"}, {"sha": "ba4e668f52ddd93b30abdecc98402aa5171efef0", "filename": "compiler/rustc_trait_selection/src/traits/select/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fselect%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fselect%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fselect%2Fmod.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -2335,7 +2335,7 @@ impl<'cx, 'tcx> SelectionContext<'cx, 'tcx> {\n         impl_def_id: DefId,\n         obligation: &TraitObligation<'tcx>,\n     ) -> Normalized<'tcx, SubstsRef<'tcx>> {\n-        let impl_trait_ref = self.tcx().bound_impl_trait_ref(impl_def_id).unwrap();\n+        let impl_trait_ref = self.tcx().impl_trait_ref(impl_def_id).unwrap();\n         match self.match_impl(impl_def_id, impl_trait_ref, obligation) {\n             Ok(substs) => substs,\n             Err(()) => {"}, {"sha": "69b671b27bd519f72a0caa92d104d04c3be22a53", "filename": "compiler/rustc_trait_selection/src/traits/specialize/mod.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fspecialize%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fspecialize%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fspecialize%2Fmod.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -87,7 +87,7 @@ pub fn translate_substs<'tcx>(\n         param_env, source_impl, source_substs, target_node\n     );\n     let source_trait_ref =\n-        infcx.tcx.bound_impl_trait_ref(source_impl).unwrap().subst(infcx.tcx, &source_substs);\n+        infcx.tcx.impl_trait_ref(source_impl).unwrap().subst(infcx.tcx, &source_substs);\n \n     // translate the Self and Param parts of the substitution, since those\n     // vary across impls\n@@ -148,7 +148,7 @@ pub(super) fn specializes(tcx: TyCtxt<'_>, (impl1_def_id, impl2_def_id): (DefId,\n \n     // create a parameter environment corresponding to a (placeholder) instantiation of impl1\n     let penv = tcx.param_env(impl1_def_id);\n-    let impl1_trait_ref = tcx.bound_impl_trait_ref(impl1_def_id).unwrap().subst_identity();\n+    let impl1_trait_ref = tcx.impl_trait_ref(impl1_def_id).unwrap().subst_identity();\n \n     // Create an infcx, taking the predicates of impl1 as assumptions:\n     let infcx = tcx.infer_ctxt().build();\n@@ -431,7 +431,7 @@ fn report_conflicting_impls<'tcx>(\n pub(crate) fn to_pretty_impl_header(tcx: TyCtxt<'_>, impl_def_id: DefId) -> Option<String> {\n     use std::fmt::Write;\n \n-    let trait_ref = tcx.bound_impl_trait_ref(impl_def_id)?.skip_binder();\n+    let trait_ref = tcx.impl_trait_ref(impl_def_id)?.skip_binder();\n     let mut w = \"impl\".to_owned();\n \n     let substs = InternalSubsts::identity_for_item(tcx, impl_def_id);"}, {"sha": "eb4815122c33e0cff93671e2314a83666bff3602", "filename": "compiler/rustc_trait_selection/src/traits/specialize/specialization_graph.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fspecialize%2Fspecialization_graph.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fspecialize%2Fspecialization_graph.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fspecialize%2Fspecialization_graph.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -48,7 +48,7 @@ trait ChildrenExt<'tcx> {\n impl<'tcx> ChildrenExt<'tcx> for Children {\n     /// Insert an impl into this set of children without comparing to any existing impls.\n     fn insert_blindly(&mut self, tcx: TyCtxt<'tcx>, impl_def_id: DefId) {\n-        let trait_ref = tcx.bound_impl_trait_ref(impl_def_id).unwrap().subst_identity();\n+        let trait_ref = tcx.impl_trait_ref(impl_def_id).unwrap().subst_identity();\n         if let Some(st) = fast_reject::simplify_type(tcx, trait_ref.self_ty(), TreatParams::AsInfer)\n         {\n             debug!(\"insert_blindly: impl_def_id={:?} st={:?}\", impl_def_id, st);\n@@ -63,7 +63,7 @@ impl<'tcx> ChildrenExt<'tcx> for Children {\n     /// an impl with a parent. The impl must be present in the list of\n     /// children already.\n     fn remove_existing(&mut self, tcx: TyCtxt<'tcx>, impl_def_id: DefId) {\n-        let trait_ref = tcx.bound_impl_trait_ref(impl_def_id).unwrap().subst_identity();\n+        let trait_ref = tcx.impl_trait_ref(impl_def_id).unwrap().subst_identity();\n         let vec: &mut Vec<DefId>;\n         if let Some(st) = fast_reject::simplify_type(tcx, trait_ref.self_ty(), TreatParams::AsInfer)\n         {\n@@ -181,15 +181,15 @@ impl<'tcx> ChildrenExt<'tcx> for Children {\n             if le && !ge {\n                 debug!(\n                     \"descending as child of TraitRef {:?}\",\n-                    tcx.bound_impl_trait_ref(possible_sibling).unwrap().subst_identity()\n+                    tcx.impl_trait_ref(possible_sibling).unwrap().subst_identity()\n                 );\n \n                 // The impl specializes `possible_sibling`.\n                 return Ok(Inserted::ShouldRecurseOn(possible_sibling));\n             } else if ge && !le {\n                 debug!(\n                     \"placing as parent of TraitRef {:?}\",\n-                    tcx.bound_impl_trait_ref(possible_sibling).unwrap().subst_identity()\n+                    tcx.impl_trait_ref(possible_sibling).unwrap().subst_identity()\n                 );\n \n                 replace_children.push(possible_sibling);\n@@ -275,7 +275,7 @@ impl<'tcx> GraphExt<'tcx> for Graph {\n     ) -> Result<Option<FutureCompatOverlapError<'tcx>>, OverlapError<'tcx>> {\n         assert!(impl_def_id.is_local());\n \n-        let trait_ref = tcx.bound_impl_trait_ref(impl_def_id).unwrap().subst_identity();\n+        let trait_ref = tcx.impl_trait_ref(impl_def_id).unwrap().subst_identity();\n         let trait_def_id = trait_ref.def_id;\n \n         debug!(\n@@ -388,7 +388,7 @@ pub(crate) fn assoc_def(\n     impl_def_id: DefId,\n     assoc_def_id: DefId,\n ) -> Result<LeafDef, ErrorGuaranteed> {\n-    let trait_def_id = tcx.bound_impl_trait_ref(impl_def_id).unwrap().skip_binder().def_id;\n+    let trait_def_id = tcx.impl_trait_ref(impl_def_id).unwrap().skip_binder().def_id;\n     let trait_def = tcx.trait_def(trait_def_id);\n \n     // This function may be called while we are still building the"}, {"sha": "7c0cae1e7bdc2e6658a8267d575562368a7fca2e", "filename": "compiler/rustc_traits/src/chalk/db.rs", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_traits%2Fsrc%2Fchalk%2Fdb.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_traits%2Fsrc%2Fchalk%2Fdb.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_traits%2Fsrc%2Fchalk%2Fdb.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -309,7 +309,7 @@ impl<'tcx> chalk_solve::RustIrDatabase<RustInterner<'tcx>> for RustIrDatabase<'t\n         let bound_vars = bound_vars_for_item(self.interner.tcx, def_id);\n         let binders = binders_for(self.interner, bound_vars);\n \n-        let trait_ref = self.interner.tcx.bound_impl_trait_ref(def_id).expect(\"not an impl\");\n+        let trait_ref = self.interner.tcx.impl_trait_ref(def_id).expect(\"not an impl\");\n         let trait_ref = trait_ref.subst(self.interner.tcx, bound_vars);\n \n         let where_clauses = self.where_clauses_for(def_id, bound_vars);\n@@ -351,7 +351,7 @@ impl<'tcx> chalk_solve::RustIrDatabase<RustInterner<'tcx>> for RustIrDatabase<'t\n         let all_impls = self.interner.tcx.all_impls(def_id);\n         let matched_impls = all_impls.filter(|impl_def_id| {\n             use chalk_ir::could_match::CouldMatch;\n-            let trait_ref = self.interner.tcx.bound_impl_trait_ref(*impl_def_id).unwrap();\n+            let trait_ref = self.interner.tcx.impl_trait_ref(*impl_def_id).unwrap();\n             let bound_vars = bound_vars_for_item(self.interner.tcx, *impl_def_id);\n \n             let self_ty = trait_ref.map_bound(|t| t.self_ty());\n@@ -380,8 +380,7 @@ impl<'tcx> chalk_solve::RustIrDatabase<RustInterner<'tcx>> for RustIrDatabase<'t\n         let trait_def_id = auto_trait_id.0;\n         let all_impls = self.interner.tcx.all_impls(trait_def_id);\n         for impl_def_id in all_impls {\n-            let trait_ref =\n-                self.interner.tcx.bound_impl_trait_ref(impl_def_id).unwrap().subst_identity();\n+            let trait_ref = self.interner.tcx.impl_trait_ref(impl_def_id).unwrap().subst_identity();\n             let self_ty = trait_ref.self_ty();\n             let provides = match (self_ty.kind(), chalk_ty) {\n                 (&ty::Adt(impl_adt_def, ..), Adt(id, ..)) => impl_adt_def.did() == id.0.did(),"}, {"sha": "7a9c1d8ffe7d413d4d4d11f40ea3e54264c10e59", "filename": "compiler/rustc_ty_utils/src/implied_bounds.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_ty_utils%2Fsrc%2Fimplied_bounds.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_ty_utils%2Fsrc%2Fimplied_bounds.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ty_utils%2Fsrc%2Fimplied_bounds.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -22,7 +22,7 @@ fn assumed_wf_types(tcx: TyCtxt<'_>, def_id: DefId) -> &ty::List<Ty<'_>> {\n             tcx.intern_type_list(&assumed_wf_types)\n         }\n         DefKind::Impl => {\n-            match tcx.bound_impl_trait_ref(def_id).map(ty::EarlyBinder::subst_identity) {\n+            match tcx.impl_trait_ref(def_id).map(ty::EarlyBinder::subst_identity) {\n                 Some(trait_ref) => {\n                     let types: Vec<_> = trait_ref.substs.types().collect();\n                     tcx.intern_type_list(&types)"}, {"sha": "eb5454bf2634b6b61f948a265efea3b59a0ed8c5", "filename": "compiler/rustc_ty_utils/src/ty.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_ty_utils%2Fsrc%2Fty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/compiler%2Frustc_ty_utils%2Fsrc%2Fty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ty_utils%2Fsrc%2Fty.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -289,7 +289,7 @@ fn well_formed_types_in_env(tcx: TyCtxt<'_>, def_id: DefId) -> &ty::List<Predica\n         // In a trait impl, we assume that the header trait ref and all its\n         // constituents are well-formed.\n         NodeKind::TraitImpl => {\n-            let trait_ref = tcx.bound_impl_trait_ref(def_id).expect(\"not an impl\").subst_identity();\n+            let trait_ref = tcx.impl_trait_ref(def_id).expect(\"not an impl\").subst_identity();\n \n             // FIXME(chalk): this has problems because of late-bound regions\n             //inputs.extend(trait_ref.substs.iter().flat_map(|arg| arg.walk()));\n@@ -359,7 +359,7 @@ fn issue33140_self_ty(tcx: TyCtxt<'_>, def_id: DefId) -> Option<Ty<'_>> {\n     debug!(\"issue33140_self_ty({:?})\", def_id);\n \n     let trait_ref = tcx\n-        .bound_impl_trait_ref(def_id)\n+        .impl_trait_ref(def_id)\n         .unwrap_or_else(|| bug!(\"issue33140_self_ty called on inherent impl {:?}\", def_id))\n         .skip_binder();\n "}, {"sha": "e6b2b2349452acff5b992bfbd0d095d7c6c7c509", "filename": "src/librustdoc/clean/blanket_impl.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/src%2Flibrustdoc%2Fclean%2Fblanket_impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/src%2Flibrustdoc%2Fclean%2Fblanket_impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fclean%2Fblanket_impl.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -33,7 +33,7 @@ impl<'a, 'tcx> BlanketImplFinder<'a, 'tcx> {\n                     trait_def_id,\n                     impl_def_id\n                 );\n-                let trait_ref = cx.tcx.bound_impl_trait_ref(impl_def_id).unwrap();\n+                let trait_ref = cx.tcx.impl_trait_ref(impl_def_id).unwrap();\n                 if !matches!(trait_ref.0.self_ty().kind(), ty::Param(_)) {\n                     continue;\n                 }"}, {"sha": "c6939326144ea87aae3bd7c1c08df53081a755b8", "filename": "src/librustdoc/clean/inline.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/src%2Flibrustdoc%2Fclean%2Finline.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/src%2Flibrustdoc%2Fclean%2Finline.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fclean%2Finline.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -376,7 +376,7 @@ pub(crate) fn build_impl(\n     let _prof_timer = cx.tcx.sess.prof.generic_activity(\"build_impl\");\n \n     let tcx = cx.tcx;\n-    let associated_trait = tcx.bound_impl_trait_ref(did).map(ty::EarlyBinder::skip_binder);\n+    let associated_trait = tcx.impl_trait_ref(did).map(ty::EarlyBinder::skip_binder);\n \n     // Only inline impl if the implemented trait is\n     // reachable in rustdoc generated documentation"}, {"sha": "87de41fde63c5e27ce9b4b333c81814347eaf33d", "filename": "src/librustdoc/clean/types.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/src%2Flibrustdoc%2Fclean%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/src%2Flibrustdoc%2Fclean%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fclean%2Ftypes.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -734,7 +734,7 @@ impl Item {\n                     ty::ImplContainer => {\n                         // Trait impl items always inherit the impl's visibility --\n                         // we don't want to show `pub`.\n-                        tcx.bound_impl_trait_ref(tcx.parent(assoc_item.def_id)).is_some()\n+                        tcx.impl_trait_ref(tcx.parent(assoc_item.def_id)).is_some()\n                     }\n                 };\n                 if is_trait_item {"}, {"sha": "62588040685fc5fbfbabdee0cc7690fdeed90b49", "filename": "src/librustdoc/passes/collect_intra_doc_links.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/src%2Flibrustdoc%2Fpasses%2Fcollect_intra_doc_links.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/src%2Flibrustdoc%2Fpasses%2Fcollect_intra_doc_links.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fpasses%2Fcollect_intra_doc_links.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -784,7 +784,7 @@ fn trait_impls_for<'a>(\n \n         // Look at each trait implementation to see if it's an impl for `did`\n         tcx.find_map_relevant_impl(trait_, ty, |impl_| {\n-            let trait_ref = tcx.bound_impl_trait_ref(impl_).expect(\"this is not an inherent impl\");\n+            let trait_ref = tcx.impl_trait_ref(impl_).expect(\"this is not an inherent impl\");\n             // Check if these are the same type.\n             let impl_type = trait_ref.subst_identity().self_ty();\n             trace!("}, {"sha": "248d7388410673c3da902461a252936750345e67", "filename": "src/tools/clippy/clippy_lints/src/derive.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fderive.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fderive.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fderive.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -247,7 +247,7 @@ fn check_hash_peq<'tcx>(\n                     return;\n                 }\n \n-                let trait_ref = cx.tcx.bound_impl_trait_ref(impl_id).expect(\"must be a trait implementation\");\n+                let trait_ref = cx.tcx.impl_trait_ref(impl_id).expect(\"must be a trait implementation\");\n \n                 // Only care about `impl PartialEq<Foo> for Foo`\n                 // For `impl PartialEq<B> for A, input_types is [A, B]\n@@ -295,7 +295,7 @@ fn check_ord_partial_ord<'tcx>(\n                     return;\n                 }\n \n-                let trait_ref = cx.tcx.bound_impl_trait_ref(impl_id).expect(\"must be a trait implementation\");\n+                let trait_ref = cx.tcx.impl_trait_ref(impl_id).expect(\"must be a trait implementation\");\n \n                 // Only care about `impl PartialOrd<Foo> for Foo`\n                 // For `impl PartialOrd<B> for A, input_types is [A, B]"}, {"sha": "2ef547526d4f7961027d20dbb77f7e846435b992", "filename": "src/tools/clippy/clippy_lints/src/fallible_impl_from.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Ffallible_impl_from.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Ffallible_impl_from.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Ffallible_impl_from.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -55,7 +55,7 @@ impl<'tcx> LateLintPass<'tcx> for FallibleImplFrom {\n         // check for `impl From<???> for ..`\n         if_chain! {\n             if let hir::ItemKind::Impl(impl_) = &item.kind;\n-            if let Some(impl_trait_ref) = cx.tcx.bound_impl_trait_ref(item.owner_id.to_def_id());\n+            if let Some(impl_trait_ref) = cx.tcx.impl_trait_ref(item.owner_id);\n             if cx.tcx.is_diagnostic_item(sym::From, impl_trait_ref.skip_binder().def_id);\n             then {\n                 lint_impl_body(cx, item.span, impl_.items);"}, {"sha": "bd66ace4500a8d305f55ec1e430e1785e09d3348", "filename": "src/tools/clippy/clippy_lints/src/from_over_into.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Ffrom_over_into.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Ffrom_over_into.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Ffrom_over_into.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -76,7 +76,7 @@ impl<'tcx> LateLintPass<'tcx> for FromOverInto {\n             && let Some(into_trait_seg) = hir_trait_ref.path.segments.last()\n             // `impl Into<target_ty> for self_ty`\n             && let Some(GenericArgs { args: [GenericArg::Type(target_ty)], .. }) = into_trait_seg.args\n-            && let Some(middle_trait_ref) = cx.tcx.bound_impl_trait_ref(item.owner_id.to_def_id()).map(ty::EarlyBinder::subst_identity)\n+            && let Some(middle_trait_ref) = cx.tcx.impl_trait_ref(item.owner_id).map(ty::EarlyBinder::subst_identity)\n             && cx.tcx.is_diagnostic_item(sym::Into, middle_trait_ref.def_id)\n             && !matches!(middle_trait_ref.substs.type_at(1).kind(), ty::Alias(ty::Opaque, _))\n         {"}, {"sha": "29d59c26d92c4a2f697399ff93df5c753bc89152", "filename": "src/tools/clippy/clippy_lints/src/implicit_saturating_sub.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fimplicit_saturating_sub.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fimplicit_saturating_sub.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fimplicit_saturating_sub.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -101,7 +101,7 @@ impl<'tcx> LateLintPass<'tcx> for ImplicitSaturatingSub {\n                             if name.ident.as_str() == \"MIN\";\n                             if let Some(const_id) = cx.typeck_results().type_dependent_def_id(cond_num_val.hir_id);\n                             if let Some(impl_id) = cx.tcx.impl_of_method(const_id);\n-                            if let None = cx.tcx.bound_impl_trait_ref(impl_id); // An inherent impl\n+                            if let None = cx.tcx.impl_trait_ref(impl_id); // An inherent impl\n                             if cx.tcx.type_of(impl_id).is_integral();\n                             then {\n                                 print_lint_and_sugg(cx, var_name, expr)\n@@ -114,7 +114,7 @@ impl<'tcx> LateLintPass<'tcx> for ImplicitSaturatingSub {\n                             if name.ident.as_str() == \"min_value\";\n                             if let Some(func_id) = cx.typeck_results().type_dependent_def_id(func.hir_id);\n                             if let Some(impl_id) = cx.tcx.impl_of_method(func_id);\n-                            if let None = cx.tcx.bound_impl_trait_ref(impl_id); // An inherent impl\n+                            if let None = cx.tcx.impl_trait_ref(impl_id); // An inherent impl\n                             if cx.tcx.type_of(impl_id).is_integral();\n                             then {\n                                 print_lint_and_sugg(cx, var_name, expr)"}, {"sha": "06ecbce4e70e940bed5d941b41be29198817ef6c", "filename": "src/tools/clippy/clippy_lints/src/methods/implicit_clone.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fmethods%2Fimplicit_clone.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fmethods%2Fimplicit_clone.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fmethods%2Fimplicit_clone.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -53,7 +53,7 @@ pub fn is_clone_like(cx: &LateContext<'_>, method_name: &str, method_def_id: hir\n         \"to_vec\" => cx\n             .tcx\n             .impl_of_method(method_def_id)\n-            .filter(|&impl_did| cx.tcx.type_of(impl_did).is_slice() && cx.tcx.bound_impl_trait_ref(impl_did).is_none())\n+            .filter(|&impl_did| cx.tcx.type_of(impl_did).is_slice() && cx.tcx.impl_trait_ref(impl_did).is_none())\n             .is_some(),\n         _ => false,\n     }"}, {"sha": "219a9edd65768eeb3124f3c174375e5fce335058", "filename": "src/tools/clippy/clippy_lints/src/methods/suspicious_splitn.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fmethods%2Fsuspicious_splitn.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fmethods%2Fsuspicious_splitn.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fmethods%2Fsuspicious_splitn.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -12,7 +12,7 @@ pub(super) fn check(cx: &LateContext<'_>, method_name: &str, expr: &Expr<'_>, se\n         if count <= 1;\n         if let Some(call_id) = cx.typeck_results().type_dependent_def_id(expr.hir_id);\n         if let Some(impl_id) = cx.tcx.impl_of_method(call_id);\n-        if cx.tcx.bound_impl_trait_ref(impl_id).is_none();\n+        if cx.tcx.impl_trait_ref(impl_id).is_none();\n         let self_ty = cx.tcx.type_of(impl_id);\n         if self_ty.is_slice() || self_ty.is_str();\n         then {"}, {"sha": "6fd100762b49dd7caacd956f9b6596f050d053db", "filename": "src/tools/clippy/clippy_lints/src/missing_doc.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fmissing_doc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fmissing_doc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fmissing_doc.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -175,7 +175,7 @@ impl<'tcx> LateLintPass<'tcx> for MissingDoc {\n     fn check_impl_item(&mut self, cx: &LateContext<'tcx>, impl_item: &'tcx hir::ImplItem<'_>) {\n         // If the method is an impl for a trait, don't doc.\n         if let Some(cid) = cx.tcx.associated_item(impl_item.owner_id).impl_container(cx.tcx) {\n-            if cx.tcx.bound_impl_trait_ref(cid).is_some() {\n+            if cx.tcx.impl_trait_ref(cid).is_some() {\n                 return;\n             }\n         } else {"}, {"sha": "5a459548153aab242c7a0d4b6aa800e50d522fc2", "filename": "src/tools/clippy/clippy_lints/src/missing_inline.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fmissing_inline.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fmissing_inline.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fmissing_inline.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -155,7 +155,7 @@ impl<'tcx> LateLintPass<'tcx> for MissingInline {\n         let container_id = assoc_item.container_id(cx.tcx);\n         let trait_def_id = match assoc_item.container {\n             TraitContainer => Some(container_id),\n-            ImplContainer => cx.tcx.bound_impl_trait_ref(container_id).map(|t| t.skip_binder().def_id),\n+            ImplContainer => cx.tcx.impl_trait_ref(container_id).map(|t| t.skip_binder().def_id),\n         };\n \n         if let Some(trait_def_id) = trait_def_id {"}, {"sha": "839c3a3815c29ef5a55b0bcf877b680916a41923", "filename": "src/tools/clippy/clippy_lints/src/non_send_fields_in_send_ty.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fnon_send_fields_in_send_ty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fnon_send_fields_in_send_ty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fnon_send_fields_in_send_ty.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -89,7 +89,7 @@ impl<'tcx> LateLintPass<'tcx> for NonSendFieldInSendTy {\n             if let Some(trait_id) = trait_ref.trait_def_id();\n             if send_trait == trait_id;\n             if hir_impl.polarity == ImplPolarity::Positive;\n-            if let Some(ty_trait_ref) = cx.tcx.bound_impl_trait_ref(item.owner_id.to_def_id());\n+            if let Some(ty_trait_ref) = cx.tcx.impl_trait_ref(item.owner_id);\n             if let self_ty = ty_trait_ref.subst_identity().self_ty();\n             if let ty::Adt(adt_def, impl_trait_substs) = self_ty.kind();\n             then {"}, {"sha": "7b1d974f2f877e51f0c1d4fe29a89d57d383fb87", "filename": "src/tools/clippy/clippy_lints/src/only_used_in_recursion.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fonly_used_in_recursion.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fonly_used_in_recursion.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fonly_used_in_recursion.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -244,7 +244,7 @@ impl<'tcx> LateLintPass<'tcx> for OnlyUsedInRecursion {\n             })) => {\n                 #[allow(trivial_casts)]\n                 if let Some(Node::Item(item)) = get_parent_node(cx.tcx, owner_id.into())\n-                    && let Some(trait_ref) = cx.tcx.bound_impl_trait_ref(item.owner_id.to_def_id()).map(|t| t.subst_identity())\n+                    && let Some(trait_ref) = cx.tcx.impl_trait_ref(item.owner_id).map(|t| t.subst_identity())\n                     && let Some(trait_item_id) = cx.tcx.associated_item(owner_id).trait_item_def_id\n                 {\n                     ("}, {"sha": "6ae9d9d63538006d7d4e759b17217a07d98424b5", "filename": "src/tools/clippy/clippy_lints/src/use_self.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f29a334c90e29ffbe236f9abba9aa08bfda597c6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fuse_self.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f29a334c90e29ffbe236f9abba9aa08bfda597c6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fuse_self.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fuse_self.rs?ref=f29a334c90e29ffbe236f9abba9aa08bfda597c6", "patch": "@@ -133,7 +133,7 @@ impl<'tcx> LateLintPass<'tcx> for UseSelf {\n                 ref mut types_to_skip,\n                 ..\n             }) = self.stack.last_mut();\n-            if let Some(impl_trait_ref) = cx.tcx.bound_impl_trait_ref(impl_id.to_def_id());\n+            if let Some(impl_trait_ref) = cx.tcx.impl_trait_ref(impl_id);\n             then {\n                 // `self_ty` is the semantic self type of `impl <trait> for <type>`. This cannot be\n                 // `Self`."}]}