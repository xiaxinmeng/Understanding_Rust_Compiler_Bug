{"sha": "d77edb6458f6eafa61ff7a5c2bef3b613add80a1", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ3N2VkYjY0NThmNmVhZmE2MWZmN2E1YzJiZWYzYjYxM2FkZDgwYTE=", "commit": {"author": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2018-11-28T19:52:58Z"}, "committer": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2018-11-28T19:57:25Z"}, "message": "resolve: Fix false-positives from lint `absolute_paths_not_starting_with_crate`", "tree": {"sha": "8c22ac770cd0dcd7460247639dd0ede60eff0fce", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8c22ac770cd0dcd7460247639dd0ede60eff0fce"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d77edb6458f6eafa61ff7a5c2bef3b613add80a1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d77edb6458f6eafa61ff7a5c2bef3b613add80a1", "html_url": "https://github.com/rust-lang/rust/commit/d77edb6458f6eafa61ff7a5c2bef3b613add80a1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d77edb6458f6eafa61ff7a5c2bef3b613add80a1/comments", "author": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "committer": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b68fc18c45350e1cdcd83cecf0f12e294e55af56", "url": "https://api.github.com/repos/rust-lang/rust/commits/b68fc18c45350e1cdcd83cecf0f12e294e55af56", "html_url": "https://github.com/rust-lang/rust/commit/b68fc18c45350e1cdcd83cecf0f12e294e55af56"}], "stats": {"total": 23, "additions": 22, "deletions": 1}, "files": [{"sha": "c1d4643c2403ea633c4d439a79c299684cb7838d", "filename": "src/librustc_resolve/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d77edb6458f6eafa61ff7a5c2bef3b613add80a1/src%2Flibrustc_resolve%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d77edb6458f6eafa61ff7a5c2bef3b613add80a1/src%2Flibrustc_resolve%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Flib.rs?ref=d77edb6458f6eafa61ff7a5c2bef3b613add80a1", "patch": "@@ -3950,7 +3950,7 @@ impl<'a, 'crateloader: 'a> Resolver<'a, 'crateloader> {\n \n         let first_name = match path.get(0) {\n             // In the 2018 edition this lint is a hard error, so nothing to do\n-            Some(seg) if seg.ident.span.rust_2015() => seg.ident.name,\n+            Some(seg) if seg.ident.span.rust_2015() && self.session.rust_2015() => seg.ident.name,\n             _ => return,\n         };\n "}, {"sha": "dc4ab2131a83420f9681454e854a99feca821872", "filename": "src/test/ui/rust-2018/auxiliary/edition-lint-paths.rs", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/d77edb6458f6eafa61ff7a5c2bef3b613add80a1/src%2Ftest%2Fui%2Frust-2018%2Fauxiliary%2Fedition-lint-paths.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d77edb6458f6eafa61ff7a5c2bef3b613add80a1/src%2Ftest%2Fui%2Frust-2018%2Fauxiliary%2Fedition-lint-paths.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frust-2018%2Fauxiliary%2Fedition-lint-paths.rs?ref=d77edb6458f6eafa61ff7a5c2bef3b613add80a1", "patch": "@@ -9,3 +9,14 @@\n // except according to those terms.\n \n pub fn foo() {}\n+\n+#[macro_export]\n+macro_rules! macro_2015 {\n+    () => {\n+        use edition_lint_paths as other_name;\n+        use edition_lint_paths::foo as other_foo;\n+        fn check_macro_2015() {\n+            ::edition_lint_paths::foo();\n+        }\n+    }\n+}"}, {"sha": "09b31beb775859dedaecf63813c69f1d699937fd", "filename": "src/test/ui/rust-2018/edition-lint-paths-2018.rs", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/d77edb6458f6eafa61ff7a5c2bef3b613add80a1/src%2Ftest%2Fui%2Frust-2018%2Fedition-lint-paths-2018.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d77edb6458f6eafa61ff7a5c2bef3b613add80a1/src%2Ftest%2Fui%2Frust-2018%2Fedition-lint-paths-2018.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frust-2018%2Fedition-lint-paths-2018.rs?ref=d77edb6458f6eafa61ff7a5c2bef3b613add80a1", "patch": "@@ -0,0 +1,10 @@\n+// compile-pass\n+// edition:2018\n+// compile-flags:--extern edition_lint_paths\n+// aux-build:edition-lint-paths.rs\n+\n+#![deny(absolute_paths_not_starting_with_crate)]\n+\n+edition_lint_paths::macro_2015!(); // OK\n+\n+fn main() {}"}]}