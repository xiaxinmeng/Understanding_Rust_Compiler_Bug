{"sha": "1c009e7e534d24efbf149e1c6eb2b9fde229c007", "node_id": "C_kwDOAAsO6NoAKDFjMDA5ZTdlNTM0ZDI0ZWZiZjE0OWUxYzZlYjJiOWZkZTIyOWMwMDc", "commit": {"author": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2022-02-06T22:13:40Z"}, "committer": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2022-05-02T19:33:05Z"}, "message": "enable build.metrics on CI", "tree": {"sha": "97b54a023c2d280ad130275f3cd6398e3248e88a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/97b54a023c2d280ad130275f3cd6398e3248e88a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1c009e7e534d24efbf149e1c6eb2b9fde229c007", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE1JbYPtLJAsc22U9xPgar6Auq8ZwFAmJwMfEACgkQPgar6Auq\n8ZyfVQ/+LXEXneBZhyrSd5SogUuG76NQy3K7U4InHyPCGEDCN5pTSiSAvrrFEBx/\n0knwPSxlWKV/8QLWUu+CQCkLsdy4K/sANU418CjgU9o1hVEc2YgG/l6ThzkDAQvb\nXrjdvUe3tNG/0I/14aN6Fe8pe601SOiwTIQHwwIu182CQqWvBATgnvXEMDyLMA61\nwEe3t8p7MJvp6X0szoV6wEI/S9s5yphxuyXZyEJ3otv/5xzLFbOAyAnjhVXnaKq/\nZXHibgeJ9hEi7eL6C03dOB6sZ6N3GtfW1KUjDNtMZWGgovZHolRF8xaZlFGMdWjg\ngQ5pPt6Eg2j/Sx5JJlkv1scuwmgn/A6gCFs7TFUgeFBENhD/gBauwC+z6GBAJFMU\nENyfdzgT6WiEUc8TDiAZfjjcqnTq5Wo1FklLEZdny5JwMR/kBchS1+bb+iG7TWGg\n3RlEKoU2xkijhpfBP9GmPHN17JA8CHVL8Me94t/nGe4I5KvK976IHeRdI2Pz5Q6h\nU563MRURqrwXRxBc0Y7C9JnA+h8Z8RDIN8MJa2iRbK1YQtRaaM8ws2a/tNFeWCOk\nxOVZiwtoiqYpwkPtrBuGMxW40VxUmF6/MMHmm9w+oPKMVB36M9uAdSPu6r4/wSCE\nSpqWMZ5/ITyO/nzssvB+U7XOLHw02hoRjzngcWpcVYbF+foXpP0=\n=N/6o\n-----END PGP SIGNATURE-----", "payload": "tree 97b54a023c2d280ad130275f3cd6398e3248e88a\nparent 53965d3daf43a041e56f64f28c6710fb7943dd01\nauthor Pietro Albini <pietro@pietroalbini.org> 1644185620 +0100\ncommitter Pietro Albini <pietro@pietroalbini.org> 1651519985 +0200\n\nenable build.metrics on CI\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1c009e7e534d24efbf149e1c6eb2b9fde229c007", "html_url": "https://github.com/rust-lang/rust/commit/1c009e7e534d24efbf149e1c6eb2b9fde229c007", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1c009e7e534d24efbf149e1c6eb2b9fde229c007/comments", "author": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "53965d3daf43a041e56f64f28c6710fb7943dd01", "url": "https://api.github.com/repos/rust-lang/rust/commits/53965d3daf43a041e56f64f28c6710fb7943dd01", "html_url": "https://github.com/rust-lang/rust/commit/53965d3daf43a041e56f64f28c6710fb7943dd01"}], "stats": {"total": 4, "additions": 4, "deletions": 0}, "files": [{"sha": "7557c8d8385dccd177cde87270efa05eb32a8780", "filename": "src/ci/run.sh", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/1c009e7e534d24efbf149e1c6eb2b9fde229c007/src%2Fci%2Frun.sh", "raw_url": "https://github.com/rust-lang/rust/raw/1c009e7e534d24efbf149e1c6eb2b9fde229c007/src%2Fci%2Frun.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Frun.sh?ref=1c009e7e534d24efbf149e1c6eb2b9fde229c007", "patch": "@@ -45,6 +45,7 @@ fi\n \n if ! isCI || isCiBranch auto || isCiBranch beta || isCiBranch try; then\n     RUST_CONFIGURE_ARGS=\"$RUST_CONFIGURE_ARGS --set build.print-step-timings --enable-verbose-tests\"\n+    RUST_CONFIGURE_ARGS=\"$RUST_CONFIGURE_ARGS --set build.metrics\"\n fi\n \n RUST_CONFIGURE_ARGS=\"$RUST_CONFIGURE_ARGS --enable-sccache\""}, {"sha": "73e41f1f8d71e317f388f4f1a883209e2800f167", "filename": "src/ci/scripts/upload-artifacts.sh", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/1c009e7e534d24efbf149e1c6eb2b9fde229c007/src%2Fci%2Fscripts%2Fupload-artifacts.sh", "raw_url": "https://github.com/rust-lang/rust/raw/1c009e7e534d24efbf149e1c6eb2b9fde229c007/src%2Fci%2Fscripts%2Fupload-artifacts.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fscripts%2Fupload-artifacts.sh?ref=1c009e7e534d24efbf149e1c6eb2b9fde229c007", "patch": "@@ -23,6 +23,9 @@ fi\n # CPU usage statistics.\n cp cpu-usage.csv \"${upload_dir}/cpu-${CI_JOB_NAME}.csv\"\n \n+# Build metrics generated by x.py.\n+cp \"${dist_dir}/../metrics.json\" \"${upload_dir}/metrics-${CI_JOB_NAME}.json\"\n+\n # Toolstate data.\n if [[ -n \"${DEPLOY_TOOLSTATES_JSON+x}\" ]]; then\n     cp /tmp/toolstate/toolstates.json \"${upload_dir}/${DEPLOY_TOOLSTATES_JSON}\""}]}