{"sha": "f269fe71569984dea7738926d164f284552196ed", "node_id": "MDY6Q29tbWl0NzI0NzEyOmYyNjlmZTcxNTY5OTg0ZGVhNzczODkyNmQxNjRmMjg0NTUyMTk2ZWQ=", "commit": {"author": {"name": "Chetan Khilosiya", "email": "chetan.khilosiya@gmail.com", "date": "2021-03-29T17:27:05Z"}, "committer": {"name": "Chetan Khilosiya", "email": "chetan.khilosiya@gmail.com", "date": "2021-03-30T19:01:15Z"}, "message": "8024: Added the trait modifier for methods\n\nmethod in impls and method calls will have trait modifier.", "tree": {"sha": "994fb62cf27c4c65ba841074664f9516ad780565", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/994fb62cf27c4c65ba841074664f9516ad780565"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f269fe71569984dea7738926d164f284552196ed", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f269fe71569984dea7738926d164f284552196ed", "html_url": "https://github.com/rust-lang/rust/commit/f269fe71569984dea7738926d164f284552196ed", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f269fe71569984dea7738926d164f284552196ed/comments", "author": {"login": "chetankhilosiya", "id": 1639535, "node_id": "MDQ6VXNlcjE2Mzk1MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1639535?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chetankhilosiya", "html_url": "https://github.com/chetankhilosiya", "followers_url": "https://api.github.com/users/chetankhilosiya/followers", "following_url": "https://api.github.com/users/chetankhilosiya/following{/other_user}", "gists_url": "https://api.github.com/users/chetankhilosiya/gists{/gist_id}", "starred_url": "https://api.github.com/users/chetankhilosiya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chetankhilosiya/subscriptions", "organizations_url": "https://api.github.com/users/chetankhilosiya/orgs", "repos_url": "https://api.github.com/users/chetankhilosiya/repos", "events_url": "https://api.github.com/users/chetankhilosiya/events{/privacy}", "received_events_url": "https://api.github.com/users/chetankhilosiya/received_events", "type": "User", "site_admin": false}, "committer": {"login": "chetankhilosiya", "id": 1639535, "node_id": "MDQ6VXNlcjE2Mzk1MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1639535?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chetankhilosiya", "html_url": "https://github.com/chetankhilosiya", "followers_url": "https://api.github.com/users/chetankhilosiya/followers", "following_url": "https://api.github.com/users/chetankhilosiya/following{/other_user}", "gists_url": "https://api.github.com/users/chetankhilosiya/gists{/gist_id}", "starred_url": "https://api.github.com/users/chetankhilosiya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chetankhilosiya/subscriptions", "organizations_url": "https://api.github.com/users/chetankhilosiya/orgs", "repos_url": "https://api.github.com/users/chetankhilosiya/repos", "events_url": "https://api.github.com/users/chetankhilosiya/events{/privacy}", "received_events_url": "https://api.github.com/users/chetankhilosiya/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fd7c454d516e3af90d8c0d0d8a22655345fec2d7", "url": "https://api.github.com/repos/rust-lang/rust/commits/fd7c454d516e3af90d8c0d0d8a22655345fec2d7", "html_url": "https://github.com/rust-lang/rust/commit/fd7c454d516e3af90d8c0d0d8a22655345fec2d7"}], "stats": {"total": 25, "additions": 24, "deletions": 1}, "files": [{"sha": "26118929bc9df4ceb0e0c177265d2d91d23bdca8", "filename": "crates/ide/src/syntax_highlighting/highlight.rs", "status": "modified", "additions": 18, "deletions": 1, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/f269fe71569984dea7738926d164f284552196ed/crates%2Fide%2Fsrc%2Fsyntax_highlighting%2Fhighlight.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f269fe71569984dea7738926d164f284552196ed/crates%2Fide%2Fsrc%2Fsyntax_highlighting%2Fhighlight.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Fsyntax_highlighting%2Fhighlight.rs?ref=f269fe71569984dea7738926d164f284552196ed", "patch": "@@ -1,6 +1,6 @@\n //! Computes color for a single element.\n \n-use hir::{AsAssocItem, Semantics, VariantDef};\n+use hir::{AsAssocItem, AssocItemContainer, Semantics, VariantDef};\n use ide_db::{\n     defs::{Definition, NameClass, NameRefClass},\n     RootDatabase, SymbolKind,\n@@ -275,6 +275,19 @@ fn highlight_def(db: &RootDatabase, def: Definition) -> Highlight {\n             hir::ModuleDef::Module(_) => HlTag::Symbol(SymbolKind::Module),\n             hir::ModuleDef::Function(func) => {\n                 let mut h = Highlight::new(HlTag::Symbol(SymbolKind::Function));\n+                if let Some(item) = func.as_assoc_item(db) {\n+                    match item.container(db) {\n+                        AssocItemContainer::Impl(i) => {\n+                            if i.target_trait(db).is_some() {\n+                                h |= HlMod::Trait;\n+                            }\n+                        }\n+                        AssocItemContainer::Trait(_t) => {\n+                            h |= HlMod::Trait;\n+                        }\n+                    }\n+                }\n+\n                 if func.as_assoc_item(db).is_some() {\n                     h |= HlMod::Associated;\n                     if func.self_param(db).is_none() {\n@@ -362,6 +375,10 @@ fn highlight_method_call(\n     if func.is_unsafe(sema.db) || sema.is_unsafe_method_call(&method_call) {\n         h |= HlMod::Unsafe;\n     }\n+    if let Some(_t) = func.as_assoc_item(sema.db)?.containing_trait(sema.db) {\n+        h |= HlMod::Trait\n+    }\n+\n     if let Some(self_param) = func.self_param(sema.db) {\n         match self_param.access(sema.db) {\n             hir::Access::Shared => (),"}, {"sha": "04540813ceedf37a7b3becb26929f0299743624a", "filename": "crates/ide/src/syntax_highlighting/tags.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f269fe71569984dea7738926d164f284552196ed/crates%2Fide%2Fsrc%2Fsyntax_highlighting%2Ftags.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f269fe71569984dea7738926d164f284552196ed/crates%2Fide%2Fsrc%2Fsyntax_highlighting%2Ftags.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Fsyntax_highlighting%2Ftags.rs?ref=f269fe71569984dea7738926d164f284552196ed", "patch": "@@ -58,6 +58,8 @@ pub enum HlMod {\n     Associated,\n     /// Used for intra doc links in doc injection.\n     IntraDocLink,\n+    /// Used for trait items in impls.\n+    Trait,\n \n     /// Keep this last!\n     Unsafe,\n@@ -158,6 +160,7 @@ impl HlMod {\n         HlMod::Callable,\n         HlMod::Static,\n         HlMod::Associated,\n+        HlMod::Trait,\n         HlMod::Unsafe,\n     ];\n \n@@ -174,6 +177,7 @@ impl HlMod {\n             HlMod::IntraDocLink => \"intra_doc_link\",\n             HlMod::Mutable => \"mutable\",\n             HlMod::Static => \"static\",\n+            HlMod::Trait => \"trait\",\n             HlMod::Unsafe => \"unsafe\",\n         }\n     }"}, {"sha": "2dc8a42f1ebd206212ab75e96058c7ff4004beaa", "filename": "crates/rust-analyzer/src/semantic_tokens.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/f269fe71569984dea7738926d164f284552196ed/crates%2Frust-analyzer%2Fsrc%2Fsemantic_tokens.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f269fe71569984dea7738926d164f284552196ed/crates%2Frust-analyzer%2Fsrc%2Fsemantic_tokens.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fsemantic_tokens.rs?ref=f269fe71569984dea7738926d164f284552196ed", "patch": "@@ -88,6 +88,7 @@ define_semantic_token_modifiers![\n     (CONSUMING, \"consuming\"),\n     (UNSAFE, \"unsafe\"),\n     (ATTRIBUTE_MODIFIER, \"attribute\"),\n+    (TRAIT_MODIFIER, \"trait\"),\n     (CALLABLE, \"callable\"),\n     (INTRA_DOC_LINK, \"intraDocLink\"),\n ];"}, {"sha": "c3820944bcb03e65d107875611875f4fa14660d7", "filename": "crates/rust-analyzer/src/to_proto.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/f269fe71569984dea7738926d164f284552196ed/crates%2Frust-analyzer%2Fsrc%2Fto_proto.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f269fe71569984dea7738926d164f284552196ed/crates%2Frust-analyzer%2Fsrc%2Fto_proto.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fto_proto.rs?ref=f269fe71569984dea7738926d164f284552196ed", "patch": "@@ -474,6 +474,7 @@ fn semantic_token_type_and_modifiers(\n             HlMod::Callable => semantic_tokens::CALLABLE,\n             HlMod::Static => lsp_types::SemanticTokenModifier::STATIC,\n             HlMod::IntraDocLink => semantic_tokens::INTRA_DOC_LINK,\n+            HlMod::Trait => semantic_tokens::TRAIT_MODIFIER,\n             HlMod::Associated => continue,\n         };\n         mods |= modifier;"}]}