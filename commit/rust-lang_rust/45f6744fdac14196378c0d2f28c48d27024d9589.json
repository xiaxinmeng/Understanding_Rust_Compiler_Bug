{"sha": "45f6744fdac14196378c0d2f28c48d27024d9589", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ1ZjY3NDRmZGFjMTQxOTYzNzhjMGQyZjI4YzQ4ZDI3MDI0ZDk1ODk=", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2020-02-07T13:19:58Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2020-02-07T13:20:42Z"}, "message": "panics dont work on Windows, just the smoke test should be enough", "tree": {"sha": "fa3943c4ba14e64bee4e4a6f4c5168f551de9c45", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fa3943c4ba14e64bee4e4a6f4c5168f551de9c45"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/45f6744fdac14196378c0d2f28c48d27024d9589", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/45f6744fdac14196378c0d2f28c48d27024d9589", "html_url": "https://github.com/rust-lang/rust/commit/45f6744fdac14196378c0d2f28c48d27024d9589", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/45f6744fdac14196378c0d2f28c48d27024d9589/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "418dd641dc41e3e9edc832f9083a669836110d15", "url": "https://api.github.com/repos/rust-lang/rust/commits/418dd641dc41e3e9edc832f9083a669836110d15", "html_url": "https://github.com/rust-lang/rust/commit/418dd641dc41e3e9edc832f9083a669836110d15"}], "stats": {"total": 28, "additions": 0, "deletions": 28}, "files": [{"sha": "e85d2cf8f29a8006a5ea23185f1784ed26ec85bb", "filename": "tests/run-pass/generator.rs", "status": "modified", "additions": 0, "deletions": 27, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/45f6744fdac14196378c0d2f28c48d27024d9589/tests%2Frun-pass%2Fgenerator.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45f6744fdac14196378c0d2f28c48d27024d9589/tests%2Frun-pass%2Fgenerator.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-pass%2Fgenerator.rs?ref=45f6744fdac14196378c0d2f28c48d27024d9589", "patch": "@@ -1,6 +1,5 @@\n #![feature(generators, generator_trait, never_type)]\n \n-use std::panic::{catch_unwind, AssertUnwindSafe};\n use std::ops::{GeneratorState::{self, *}, Generator};\n use std::pin::Pin;\n use std::sync::atomic::{AtomicUsize, Ordering};\n@@ -183,33 +182,7 @@ fn smoke_resume_arg() {\n     });\n }\n \n-fn panic_drop_resume() {\n-    static DROP: AtomicUsize = AtomicUsize::new(0);\n-\n-    struct Dropper {}\n-\n-    impl Drop for Dropper {\n-        fn drop(&mut self) {\n-            DROP.fetch_add(1, Ordering::SeqCst);\n-        }\n-    }\n-\n-    let mut gen = |_arg| {\n-        if true {\n-            panic!();\n-        }\n-        yield ();\n-    };\n-    let mut gen = Pin::new(&mut gen);\n-\n-    assert_eq!(DROP.load(Ordering::Acquire), 0);\n-    let res = catch_unwind(AssertUnwindSafe(|| gen.as_mut().resume(Dropper {})));\n-    assert!(res.is_err());\n-    assert_eq!(DROP.load(Ordering::Acquire), 1);\n-}\n-\n fn main() {\n     basic();\n     smoke_resume_arg();\n-    panic_drop_resume();\n }"}, {"sha": "17f385d4d69515e9b19c9b63011b169543557c74", "filename": "tests/run-pass/generator.stderr", "status": "removed", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/418dd641dc41e3e9edc832f9083a669836110d15/tests%2Frun-pass%2Fgenerator.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/418dd641dc41e3e9edc832f9083a669836110d15/tests%2Frun-pass%2Fgenerator.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-pass%2Fgenerator.stderr?ref=418dd641dc41e3e9edc832f9083a669836110d15", "patch": "@@ -1 +0,0 @@\n-thread 'main' panicked at 'explicit panic', $DIR/generator.rs:199:13"}]}