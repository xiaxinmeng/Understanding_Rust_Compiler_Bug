{"sha": "a6ee46db0be868730bd9a9129f54210343ff408e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE2ZWU0NmRiMGJlODY4NzMwYmQ5YTkxMjlmNTQyMTAzNDNmZjQwOGU=", "commit": {"author": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2012-07-10T19:29:30Z"}, "committer": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2012-07-10T19:30:02Z"}, "message": "rustc: Resolve expressions in literal and range patterns", "tree": {"sha": "c0e4191e521011d26e107f5c6087490bdf3848a2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c0e4191e521011d26e107f5c6087490bdf3848a2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a6ee46db0be868730bd9a9129f54210343ff408e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a6ee46db0be868730bd9a9129f54210343ff408e", "html_url": "https://github.com/rust-lang/rust/commit/a6ee46db0be868730bd9a9129f54210343ff408e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a6ee46db0be868730bd9a9129f54210343ff408e/comments", "author": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "71fd542f260f3398ee5c4967b481222e2e66021a", "url": "https://api.github.com/repos/rust-lang/rust/commits/71fd542f260f3398ee5c4967b481222e2e66021a", "html_url": "https://github.com/rust-lang/rust/commit/71fd542f260f3398ee5c4967b481222e2e66021a"}], "stats": {"total": 12, "additions": 11, "deletions": 1}, "files": [{"sha": "3ea829fe9ef6b633b3e96c4b71da0c83175ff65f", "filename": "src/rustc/middle/resolve3.rs", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/a6ee46db0be868730bd9a9129f54210343ff408e/src%2Frustc%2Fmiddle%2Fresolve3.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a6ee46db0be868730bd9a9129f54210343ff408e/src%2Frustc%2Fmiddle%2Fresolve3.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fmiddle%2Fresolve3.rs?ref=a6ee46db0be868730bd9a9129f54210343ff408e", "patch": "@@ -17,7 +17,8 @@ import syntax::ast::{ident, trait_ref, impure_fn, instance_var, item};\n import syntax::ast::{item_class, item_const, item_enum, item_fn, item_mac};\n import syntax::ast::{item_foreign_mod, item_trait, item_impl, item_mod};\n import syntax::ast::{item_ty, local, local_crate, method, node_id, pat};\n-import syntax::ast::{pat_enum, pat_ident, path, prim_ty, stmt_decl, ty};\n+import syntax::ast::{pat_enum, pat_ident, pat_lit, pat_range, path, prim_ty};\n+import syntax::ast::{stmt_decl, ty};\n import syntax::ast::{ty_bool, ty_char, ty_constr, ty_f, ty_f32, ty_f64};\n import syntax::ast::{ty_float, ty_i, ty_i16, ty_i32, ty_i64, ty_i8, ty_int};\n import syntax::ast::{ty_param, ty_path, ty_str, ty_u, ty_u16, ty_u32, ty_u64};\n@@ -3640,6 +3641,15 @@ class Resolver {\n                     }\n                 }\n \n+                pat_lit(expr) {\n+                    self.resolve_expr(expr, visitor);\n+                }\n+\n+                pat_range(first_expr, last_expr) {\n+                    self.resolve_expr(first_expr, visitor);\n+                    self.resolve_expr(last_expr, visitor);\n+                }\n+\n                 _ {\n                     // Nothing to do.\n                 }"}]}