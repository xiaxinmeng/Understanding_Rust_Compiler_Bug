{"sha": "af6010ca0bfc0abf3f9e184cc33b9821c8453916", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFmNjAxMGNhMGJmYzBhYmYzZjllMTg0Y2MzM2I5ODIxYzg0NTM5MTY=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-12-08T18:31:32Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-12-08T18:31:32Z"}, "message": "auto merge of #10855 : alexcrichton/rust/snapshots, r=pcwalton\n\nThis transitions the snapshot dependency process to understand that our\r\nsnapshots are now a single static binary rather than an array of files.", "tree": {"sha": "02a0328c879faf6f575ec7e1fac0e2f6690a83dc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/02a0328c879faf6f575ec7e1fac0e2f6690a83dc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/af6010ca0bfc0abf3f9e184cc33b9821c8453916", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/af6010ca0bfc0abf3f9e184cc33b9821c8453916", "html_url": "https://github.com/rust-lang/rust/commit/af6010ca0bfc0abf3f9e184cc33b9821c8453916", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/af6010ca0bfc0abf3f9e184cc33b9821c8453916/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "49b751dda19af57a2545a67879dd217e601b84c6", "url": "https://api.github.com/repos/rust-lang/rust/commits/49b751dda19af57a2545a67879dd217e601b84c6", "html_url": "https://github.com/rust-lang/rust/commit/49b751dda19af57a2545a67879dd217e601b84c6"}, {"sha": "70273bb1d673babf0c3c600214b0a29f35f5d50e", "url": "https://api.github.com/repos/rust-lang/rust/commits/70273bb1d673babf0c3c600214b0a29f35f5d50e", "html_url": "https://github.com/rust-lang/rust/commit/70273bb1d673babf0c3c600214b0a29f35f5d50e"}], "stats": {"total": 88, "additions": 12, "deletions": 76}, "files": [{"sha": "86d0e453b1082acf95191dd9965007f37bf57a41", "filename": "Makefile.in", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/af6010ca0bfc0abf3f9e184cc33b9821c8453916/Makefile.in", "raw_url": "https://github.com/rust-lang/rust/raw/af6010ca0bfc0abf3f9e184cc33b9821c8453916/Makefile.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Makefile.in?ref=af6010ca0bfc0abf3f9e184cc33b9821c8453916", "patch": "@@ -431,6 +431,9 @@ TLIBRUSTUV_DEFAULT$(1)_T_$(2)_H_$(3) = \\\n   $$(TLIB$(1)_T_$(2)_H_$(3))/$(CFG_LIBRUSTUV_$(2))\n \n # Preqrequisites for using the stageN compiler\n+ifeq ($(1),0)\n+HSREQ$(1)_H_$(3) = $$(HBIN$(1)_H_$(3))/rustc$$(X_$(3))\n+else\n HSREQ$(1)_H_$(3) = \\\n \t$$(HBIN$(1)_H_$(3))/rustc$$(X_$(3)) \\\n \t$$(HSTDLIB_DEFAULT$(1)_H_$(3)) \\\n@@ -439,6 +442,7 @@ HSREQ$(1)_H_$(3) = \\\n \t$$(HLIBRUSTC_DEFAULT$(1)_H_$(3)) \\\n \t$$(HLIBRUSTUV_DEFAULT$(1)_H_$(3)) \\\n \t$$(MKFILE_DEPS)\n+endif\n \n # Prerequisites for using the stageN compiler to build target artifacts\n TSREQ$(1)_T_$(2)_H_$(3) = \\"}, {"sha": "ddc9ec5ac7857332d5eb3a7a9f6f0c86e1c0cc8f", "filename": "mk/stage0.mk", "status": "modified", "additions": 0, "deletions": 67, "changes": 67, "blob_url": "https://github.com/rust-lang/rust/blob/af6010ca0bfc0abf3f9e184cc33b9821c8453916/mk%2Fstage0.mk", "raw_url": "https://github.com/rust-lang/rust/raw/af6010ca0bfc0abf3f9e184cc33b9821c8453916/mk%2Fstage0.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fstage0.mk?ref=af6010ca0bfc0abf3f9e184cc33b9821c8453916", "patch": "@@ -25,34 +25,6 @@ endif\n endif\n \t$(Q)touch $@\n \n-# Host libs will be extracted by the above rule\n-\n-# NOTE: remove all these after the next snapshot\n-$(HLIB0_H_$(CFG_BUILD))/$(CFG_STDLIB_$(CFG_BUILD)): \\\n-\t\t$(HBIN0_H_$(CFG_BUILD))/rustc$(X_$(CFG_BUILD)) \\\n-\t\t| $(HLIB0_H_$(CFG_BUILD))/\n-\t$(Q)touch $@\n-\n-$(HLIB0_H_$(CFG_BUILD))/$(CFG_EXTRALIB_$(CFG_BUILD)): \\\n-\t\t$(HBIN0_H_$(CFG_BUILD))/rustc$(X_$(CFG_BUILD)) \\\n-\t\t| $(HLIB0_H_$(CFG_BUILD))/\n-\t$(Q)touch $@\n-\n-$(HLIB0_H_$(CFG_BUILD))/$(CFG_LIBRUSTUV_$(CFG_BUILD)): \\\n-\t\t$(HBIN0_H_$(CFG_BUILD))/rustc$(X_$(CFG_BUILD)) \\\n-\t\t| $(HLIB0_H_$(CFG_BUILD))/\n-\t$(Q)touch $@\n-\n-$(HLIB0_H_$(CFG_BUILD))/$(CFG_LIBRUSTC_$(CFG_BUILD)): \\\n-\t\t$(HBIN0_H_$(CFG_BUILD))/rustc$(X_$(CFG_BUILD)) \\\n-\t\t| $(HLIB0_H_$(CFG_BUILD))/\n-\t$(Q)touch $@\n-\n-$(HLIB0_H_$(CFG_BUILD))/$(CFG_RUSTLLVM_$(CFG_BUILD)): \\\n-\t\t$(HBIN0_H_$(CFG_BUILD))/rustc$(X_$(CFG_BUILD)) \\\n-\t\t| $(HLIB0_H_$(CFG_BUILD))/\n-\t$(Q)touch $@\n-\n # For other targets, let the host build the target:\n \n define BOOTSTRAP_STAGE0\n@@ -72,45 +44,6 @@ $$(HBIN0_H_$(1))/rustc$$(X_$(1)): \\\n \t@$$(call E, cp: $$@)\n \t$$(Q)cp $$< $$@\n \n-# NOTE: removing everything below after the next snapshot\n-$$(HLIB0_H_$(1))/$(CFG_STDLIB_$(1)): \\\n-\t\t$$(TLIB$(2)_T_$(1)_H_$(3))/$(CFG_STDLIB_$(1)) \\\n-\t\t| $(HLIB0_H_$(1))/\n-\t@$$(call E, cp: $$@)\n-\t$$(call CHECK_FOR_OLD_GLOB_MATCHES_EXCEPT,$$(dir $$@),$(STDLIB_GLOB_$(4)),$$(notdir $$@))\n-\t$$(Q)cp $$(TLIB$(2)_T_$(1)_H_$(3))/$(STDLIB_GLOB_$(1)) $$@\n-\t$$(call LIST_ALL_OLD_GLOB_MATCHES_EXCEPT,$$(dir $$@),$(STDLIB_GLOB_$(4)),$$(notdir $$@))\n-\n-$$(HLIB0_H_$(1))/$(CFG_EXTRALIB_$(1)): \\\n-\t\t$$(TLIB$(2)_T_$(1)_H_$(3))/$(CFG_EXTRALIB_$(1)) \\\n-\t\t| $(HLIB0_H_$(1))/\n-\t@$$(call E, cp: $$@)\n-\t$$(call CHECK_FOR_OLD_GLOB_MATCHES_EXCEPT,$$(dir $$@),$(EXTRALIB_GLOB_$(4)),$$(notdir $$@))\n-\t$$(Q)cp $$(TLIB$(2)_T_$(1)_H_$(3))/$(EXTRALIB_GLOB_$(1)) $$@\n-\t$$(call LIST_ALL_OLD_GLOB_MATCHES_EXCEPT,$$(dir $$@),$(EXTRALIB_GLOB_$(4)),$$(notdir $$@))\n-\n-$$(HLIB0_H_$(1))/$(CFG_LIBRUSTUV_$(1)): \\\n-\t\t$$(TLIB$(2)_T_$(1)_H_$(3))/$(CFG_LIBRUSTUV_$(1)) \\\n-\t\t| $(HLIB0_H_$(1))/\n-\t@$$(call E, cp: $$@)\n-\t$$(call CHECK_FOR_OLD_GLOB_MATCHES_EXCEPT,$$(dir $$@),$(LIBRUSTUV_GLOB_$(4)),$$(notdir $$@))\n-\t$$(Q)cp $$(TLIB$(2)_T_$(1)_H_$(3))/$(LIBRUSTUV_GLOB_$(1)) $$@\n-\t$$(call LIST_ALL_OLD_GLOB_MATCHES_EXCEPT,$$(dir $$@),$(LIBRUSTUV_GLOB_$(4)),$$(notdir $$@))\n-\n-$$(HLIB0_H_$(1))/$(CFG_LIBRUSTC_$(1)): \\\n-\t\t$$(TLIB$(2)_T_$(1)_H_$(3))/$(CFG_LIBRUSTC_$(1)) \\\n-\t\t| $(HLIB0_H_$(1))/\n-\t@$$(call E, cp: $$@)\n-\t$$(call CHECK_FOR_OLD_GLOB_MATCHES_EXCEPT,$$(dir $$@),$(LIBRUSTC_GLOB_$(4)),$$(notdir $$@))\n-\t$$(Q)cp $$(TLIB$(2)_T_$(1)_H_$(3))/$(LIBRUSTC_GLOB_$(1)) $$@\n-\t$$(call LIST_ALL_OLD_GLOB_MATCHES_EXCEPT,$$(dir $$@),$(LIBRUSTC_GLOB_$(4)),$$(notdir $$@))\n-\n-$$(HLIB0_H_$(1))/$(CFG_RUSTLLVM_$(1)): \\\n-\t\t$$(TLIB$(2)_T_$(1)_H_$(3))/$(CFG_RUSTLLVM_$(1)) \\\n-\t\t| $(HLIB0_H_$(1))/\n-\t@$$(call E, cp: $$@)\n-\t$$(Q)cp $$< $$@\n-\n endef\n \n # Use stage1 to build other architectures: then you don't have to wait"}, {"sha": "6a3e7b7513cbc292123e34444895307872dd7e11", "filename": "src/rt/rust_upcall.c", "status": "modified", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/af6010ca0bfc0abf3f9e184cc33b9821c8453916/src%2Frt%2Frust_upcall.c", "raw_url": "https://github.com/rust-lang/rust/raw/af6010ca0bfc0abf3f9e184cc33b9821c8453916/src%2Frt%2Frust_upcall.c", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust_upcall.c?ref=af6010ca0bfc0abf3f9e184cc33b9821c8453916", "patch": "@@ -78,15 +78,6 @@ upcall_rust_personality(int version,\n     return args.retval;\n }\n \n-// NOTE: remove after stage0\n-// Landing pads need to call this to insert the\n-// correct limit into TLS.\n-// NB: This must run on the Rust stack because it\n-// needs to acquire the value of the stack pointer\n-void\n-upcall_reset_stack_limit() {\n-}\n-\n //\n // Local Variables:\n // mode: C++"}, {"sha": "1a93b20c886b9b75599e211dd3fd98bb3dea272e", "filename": "src/snapshots.txt", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/af6010ca0bfc0abf3f9e184cc33b9821c8453916/src%2Fsnapshots.txt", "raw_url": "https://github.com/rust-lang/rust/raw/af6010ca0bfc0abf3f9e184cc33b9821c8453916/src%2Fsnapshots.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fsnapshots.txt?ref=af6010ca0bfc0abf3f9e184cc33b9821c8453916", "patch": "@@ -1,3 +1,11 @@\n+S 2013-12-07 49b751d\n+  freebsd-x86_64 b604a8c1846067756488d7d46f382328b35ae492\n+  linux-i386 e3c11032b19a74b86b5b6f271ee7457ce0b00d48\n+  linux-x86_64 e33ed8c5872144e0d3ba5785db700511766a4653\n+  macos-i386 4e4cca6d947c3984bd280a2c7606dd22db1b32f4\n+  macos-x86_64 492d28b86de14c8c359ab6dfbe7efc15f6305269\n+  winnt-i386 3075b0033433bd5449f27d0b6039e8ab939e27c2\n+\n S 2013-12-04 9169579\n   freebsd-x86_64 0dc6dcd9435e23c891b9e9e37d483e92cfe51449\n   linux-i386 9802f6ba319bec4dd02299af08e421270ede5f5f"}]}