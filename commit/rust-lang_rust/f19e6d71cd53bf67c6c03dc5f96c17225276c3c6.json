{"sha": "f19e6d71cd53bf67c6c03dc5f96c17225276c3c6", "node_id": "MDY6Q29tbWl0NzI0NzEyOmYxOWU2ZDcxY2Q1M2JmNjdjNmMwM2RjNWY5NmMxNzIyNTI3NmMzYzY=", "commit": {"author": {"name": "Michael Woerister", "email": "michaelwoerister@posteo", "date": "2014-11-13T08:39:27Z"}, "committer": {"name": "Michael Woerister", "email": "michaelwoerister@posteo", "date": "2014-11-26T14:58:17Z"}, "message": "Add -Z print-sysroot commandline option to rustc.", "tree": {"sha": "3c53b41612a03b4e09aa4534273192ab4a5f235f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3c53b41612a03b4e09aa4534273192ab4a5f235f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f19e6d71cd53bf67c6c03dc5f96c17225276c3c6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f19e6d71cd53bf67c6c03dc5f96c17225276c3c6", "html_url": "https://github.com/rust-lang/rust/commit/f19e6d71cd53bf67c6c03dc5f96c17225276c3c6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f19e6d71cd53bf67c6c03dc5f96c17225276c3c6/comments", "author": {"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}, "committer": {"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8fb027e398ef756b7b02a270ef0304be92e70f4d", "url": "https://api.github.com/repos/rust-lang/rust/commits/8fb027e398ef756b7b02a270ef0304be92e70f4d", "html_url": "https://github.com/rust-lang/rust/commit/8fb027e398ef756b7b02a270ef0304be92e70f4d"}], "stats": {"total": 16, "additions": 13, "deletions": 3}, "files": [{"sha": "8b4918b6db0f30c0d99168ca3e86fd3ccf3731a7", "filename": "src/librustc/session/config.rs", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/f19e6d71cd53bf67c6c03dc5f96c17225276c3c6/src%2Flibrustc%2Fsession%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f19e6d71cd53bf67c6c03dc5f96c17225276c3c6/src%2Flibrustc%2Fsession%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fsession%2Fconfig.rs?ref=f19e6d71cd53bf67c6c03dc5f96c17225276c3c6", "patch": "@@ -212,13 +212,14 @@ debugging_opts!(\n         FLOWGRAPH_PRINT_LOANS,\n         FLOWGRAPH_PRINT_MOVES,\n         FLOWGRAPH_PRINT_ASSIGNS,\n-        FLOWGRAPH_PRINT_ALL\n+        FLOWGRAPH_PRINT_ALL,\n+        PRINT_SYSROOT\n     ]\n     0\n )\n \n pub fn debugging_opts_map() -> Vec<(&'static str, &'static str, u64)> {\n-    vec!((\"verbose\", \"in general, enable more debug printouts\", VERBOSE),\n+    vec![(\"verbose\", \"in general, enable more debug printouts\", VERBOSE),\n      (\"time-passes\", \"measure time of each rustc pass\", TIME_PASSES),\n      (\"count-llvm-insns\", \"count where LLVM \\\n                            instrs originate\", COUNT_LLVM_INSNS),\n@@ -256,7 +257,9 @@ pub fn debugging_opts_map() -> Vec<(&'static str, &'static str, u64)> {\n      (\"flowgraph-print-assigns\", \"Include assignment analysis data in \\\n                        --pretty flowgraph output\", FLOWGRAPH_PRINT_ASSIGNS),\n      (\"flowgraph-print-all\", \"Include all dataflow analysis data in \\\n-                       --pretty flowgraph output\", FLOWGRAPH_PRINT_ALL))\n+                       --pretty flowgraph output\", FLOWGRAPH_PRINT_ALL),\n+     (\"print-sysroot\", \"Print the sysroot as used by this rustc invocation\",\n+      PRINT_SYSROOT)]\n }\n \n #[deriving(Clone)]"}, {"sha": "658be9169afdd5fe0e84f0a1d5287bf05bc48e1d", "filename": "src/librustc_trans/driver/mod.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/f19e6d71cd53bf67c6c03dc5f96c17225276c3c6/src%2Flibrustc_trans%2Fdriver%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f19e6d71cd53bf67c6c03dc5f96c17225276c3c6/src%2Flibrustc_trans%2Fdriver%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Fdriver%2Fmod.rs?ref=f19e6d71cd53bf67c6c03dc5f96c17225276c3c6", "patch": "@@ -75,6 +75,13 @@ fn run_compiler(args: &[String]) {\n                 describe_lints(&ls, false);\n                 return;\n             }\n+\n+            let sess = build_session(sopts, None, descriptions);\n+            if sess.debugging_opt(config::PRINT_SYSROOT) {\n+                println!(\"{}\", sess.sysroot().display());\n+                return;\n+            }\n+\n             early_error(\"no input filename given\");\n         }\n         1u => {"}]}