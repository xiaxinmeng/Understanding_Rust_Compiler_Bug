{"sha": "56e519dd5c8df832dfb78a180ac771de3649b12f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU2ZTUxOWRkNWM4ZGY4MzJkZmI3OGExODBhYzc3MWRlMzY0OWIxMmY=", "commit": {"author": {"name": "Taylor Cramer", "email": "cramertaylorj@gmail.com", "date": "2017-02-17T04:24:18Z"}, "committer": {"name": "Taylor Cramer", "email": "cramertaylorj@gmail.com", "date": "2017-02-18T20:43:25Z"}, "message": "Add tests for control flow in while condition", "tree": {"sha": "d8fb976350685918cb0b1148bd5a060687741df8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d8fb976350685918cb0b1148bd5a060687741df8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/56e519dd5c8df832dfb78a180ac771de3649b12f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/56e519dd5c8df832dfb78a180ac771de3649b12f", "html_url": "https://github.com/rust-lang/rust/commit/56e519dd5c8df832dfb78a180ac771de3649b12f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/56e519dd5c8df832dfb78a180ac771de3649b12f/comments", "author": {"login": "cramertj", "id": 5963049, "node_id": "MDQ6VXNlcjU5NjMwNDk=", "avatar_url": "https://avatars.githubusercontent.com/u/5963049?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cramertj", "html_url": "https://github.com/cramertj", "followers_url": "https://api.github.com/users/cramertj/followers", "following_url": "https://api.github.com/users/cramertj/following{/other_user}", "gists_url": "https://api.github.com/users/cramertj/gists{/gist_id}", "starred_url": "https://api.github.com/users/cramertj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cramertj/subscriptions", "organizations_url": "https://api.github.com/users/cramertj/orgs", "repos_url": "https://api.github.com/users/cramertj/repos", "events_url": "https://api.github.com/users/cramertj/events{/privacy}", "received_events_url": "https://api.github.com/users/cramertj/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cramertj", "id": 5963049, "node_id": "MDQ6VXNlcjU5NjMwNDk=", "avatar_url": "https://avatars.githubusercontent.com/u/5963049?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cramertj", "html_url": "https://github.com/cramertj", "followers_url": "https://api.github.com/users/cramertj/followers", "following_url": "https://api.github.com/users/cramertj/following{/other_user}", "gists_url": "https://api.github.com/users/cramertj/gists{/gist_id}", "starred_url": "https://api.github.com/users/cramertj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cramertj/subscriptions", "organizations_url": "https://api.github.com/users/cramertj/orgs", "repos_url": "https://api.github.com/users/cramertj/repos", "events_url": "https://api.github.com/users/cramertj/events{/privacy}", "received_events_url": "https://api.github.com/users/cramertj/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4d65622dcd3be66ec53656c499afe7bbc8aa1ae7", "url": "https://api.github.com/repos/rust-lang/rust/commits/4d65622dcd3be66ec53656c499afe7bbc8aa1ae7", "html_url": "https://github.com/rust-lang/rust/commit/4d65622dcd3be66ec53656c499afe7bbc8aa1ae7"}], "stats": {"total": 122, "additions": 88, "deletions": 34}, "files": [{"sha": "e3c1ada878df593d9e2367441b4c8cad61339a18", "filename": "src/test/compile-fail/issue-37576.rs", "status": "added", "additions": 55, "deletions": 0, "changes": 55, "blob_url": "https://github.com/rust-lang/rust/blob/56e519dd5c8df832dfb78a180ac771de3649b12f/src%2Ftest%2Fcompile-fail%2Fissue-37576.rs", "raw_url": "https://github.com/rust-lang/rust/raw/56e519dd5c8df832dfb78a180ac771de3649b12f/src%2Ftest%2Fcompile-fail%2Fissue-37576.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-37576.rs?ref=56e519dd5c8df832dfb78a180ac771de3649b12f", "patch": "@@ -0,0 +1,55 @@\n+// Copyright 2012 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+fn main() {\n+    'test_1: while break 'test_1 {}\n+    while break {}\n+    //~^ ERROR `break` or `continue` with no label\n+\n+    'test_2: while let true = break 'test_2 {}\n+    while let true = break {}\n+    //~^ ERROR `break` or `continue` with no label\n+\n+    loop { 'test_3: while break 'test_3 {} }\n+    loop { while break {} }\n+    //~^ ERROR `break` or `continue` with no label\n+\n+    loop {\n+        'test_4: while break 'test_4 {}\n+        break;\n+    }\n+    loop {\n+        while break {}\n+        //~^ ERROR `break` or `continue` with no label\n+        break;\n+    }\n+\n+    'test_5: while continue 'test_5 {}\n+    while continue {}\n+    //~^ ERROR `break` or `continue` with no label\n+\n+    'test_6: while let true = continue 'test_6 {}\n+    while let true = continue {}\n+    //~^ ERROR `break` or `continue` with no label\n+\n+    loop { 'test_7: while continue 'test_7 {} }\n+    loop { while continue {} }\n+    //~^ ERROR `break` or `continue` with no label\n+\n+    loop {\n+        'test_8: while continue 'test_8 {}\n+        continue;\n+    }\n+    loop {\n+        while continue {}\n+        //~^ ERROR `break` or `continue` with no label\n+        continue;\n+    }\n+}"}, {"sha": "6695e972f333731caa591f8d2c27f4c08b458580", "filename": "src/test/compile-fail/resolve-label.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/56e519dd5c8df832dfb78a180ac771de3649b12f/src%2Ftest%2Fcompile-fail%2Fresolve-label.rs", "raw_url": "https://github.com/rust-lang/rust/raw/56e519dd5c8df832dfb78a180ac771de3649b12f/src%2Ftest%2Fcompile-fail%2Fresolve-label.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fresolve-label.rs?ref=56e519dd5c8df832dfb78a180ac771de3649b12f", "patch": "@@ -17,8 +17,7 @@ fn f() {\n         }\n     }\n \n-    // issue #37353\n-    loop { 'w: while break 'w { } } //~ ERROR use of undeclared label\n+    loop { 'w: while break 'w { } }\n }\n \n fn main() {}"}, {"sha": "07b9c744a71711c33f87bad824fbdd4746dc8140", "filename": "src/test/run-make/graphviz-flowgraph/f10.dot-expected.dot", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/56e519dd5c8df832dfb78a180ac771de3649b12f/src%2Ftest%2Frun-make%2Fgraphviz-flowgraph%2Ff10.dot-expected.dot", "raw_url": "https://github.com/rust-lang/rust/raw/56e519dd5c8df832dfb78a180ac771de3649b12f/src%2Ftest%2Frun-make%2Fgraphviz-flowgraph%2Ff10.dot-expected.dot", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fgraphviz-flowgraph%2Ff10.dot-expected.dot?ref=56e519dd5c8df832dfb78a180ac771de3649b12f", "patch": "@@ -5,10 +5,10 @@ digraph block {\n     N3[label=\"local mut x\"];\n     N4[label=\"stmt let mut x = 10;\"];\n     N5[label=\"(dummy_node)\"];\n-    N6[label=\"expr x\"];\n-    N7[label=\"expr 0\"];\n-    N8[label=\"expr x > 0\"];\n-    N9[label=\"expr while x > 0 { x -= 1; }\"];\n+    N6[label=\"expr while x > 0 { x -= 1; }\"];\n+    N7[label=\"expr x\"];\n+    N8[label=\"expr 0\"];\n+    N9[label=\"expr x > 0\"];\n     N10[label=\"expr 1\"];\n     N11[label=\"expr x\"];\n     N12[label=\"expr x -= 1\"];\n@@ -20,17 +20,17 @@ digraph block {\n     N2 -> N3;\n     N3 -> N4;\n     N4 -> N5;\n-    N5 -> N6;\n-    N6 -> N7;\n+    N5 -> N7;\n     N7 -> N8;\n     N8 -> N9;\n-    N8 -> N10;\n+    N9 -> N6;\n+    N9 -> N10;\n     N10 -> N11;\n     N11 -> N12;\n     N12 -> N13;\n     N13 -> N14;\n     N14 -> N5;\n-    N9 -> N15;\n+    N6 -> N15;\n     N15 -> N16;\n     N16 -> N1;\n }"}, {"sha": "c8bfcd6510b30054fd02295cc34bd62e033d5e94", "filename": "src/test/run-make/graphviz-flowgraph/f23.dot-expected.dot", "status": "modified", "additions": 24, "deletions": 24, "changes": 48, "blob_url": "https://github.com/rust-lang/rust/blob/56e519dd5c8df832dfb78a180ac771de3649b12f/src%2Ftest%2Frun-make%2Fgraphviz-flowgraph%2Ff23.dot-expected.dot", "raw_url": "https://github.com/rust-lang/rust/raw/56e519dd5c8df832dfb78a180ac771de3649b12f/src%2Ftest%2Frun-make%2Fgraphviz-flowgraph%2Ff23.dot-expected.dot", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fgraphviz-flowgraph%2Ff23.dot-expected.dot?ref=56e519dd5c8df832dfb78a180ac771de3649b12f", "patch": "@@ -11,28 +11,28 @@ digraph block {\n     N9[label=\"local mut z\"];\n     N10[label=\"stmt let mut z = 23;\"];\n     N11[label=\"(dummy_node)\"];\n-    N12[label=\"expr x\"];\n-    N13[label=\"expr 0\"];\n-    N14[label=\"expr x > 0\"];\n-    N15[label=\"expr while x > 0 {\\l    x -= 1;\\l    while y > 0 {\\l        y -= 1;\\l        while z > 0 { z -= 1; }\\l        if x > 10 { return; \\\"unreachable\\\"; }\\l    }\\l}\\l\"];\n+    N12[label=\"expr while x > 0 {\\l    x -= 1;\\l    while y > 0 {\\l        y -= 1;\\l        while z > 0 { z -= 1; }\\l        if x > 10 { return; \\\"unreachable\\\"; }\\l    }\\l}\\l\"];\n+    N13[label=\"expr x\"];\n+    N14[label=\"expr 0\"];\n+    N15[label=\"expr x > 0\"];\n     N16[label=\"expr 1\"];\n     N17[label=\"expr x\"];\n     N18[label=\"expr x -= 1\"];\n     N19[label=\"stmt x -= 1;\"];\n     N20[label=\"(dummy_node)\"];\n-    N21[label=\"expr y\"];\n-    N22[label=\"expr 0\"];\n-    N23[label=\"expr y > 0\"];\n-    N24[label=\"expr while y > 0 {\\l    y -= 1;\\l    while z > 0 { z -= 1; }\\l    if x > 10 { return; \\\"unreachable\\\"; }\\l}\\l\"];\n+    N21[label=\"expr while y > 0 {\\l    y -= 1;\\l    while z > 0 { z -= 1; }\\l    if x > 10 { return; \\\"unreachable\\\"; }\\l}\\l\"];\n+    N22[label=\"expr y\"];\n+    N23[label=\"expr 0\"];\n+    N24[label=\"expr y > 0\"];\n     N25[label=\"expr 1\"];\n     N26[label=\"expr y\"];\n     N27[label=\"expr y -= 1\"];\n     N28[label=\"stmt y -= 1;\"];\n     N29[label=\"(dummy_node)\"];\n-    N30[label=\"expr z\"];\n-    N31[label=\"expr 0\"];\n-    N32[label=\"expr z > 0\"];\n-    N33[label=\"expr while z > 0 { z -= 1; }\"];\n+    N30[label=\"expr while z > 0 { z -= 1; }\"];\n+    N31[label=\"expr z\"];\n+    N32[label=\"expr 0\"];\n+    N33[label=\"expr z > 0\"];\n     N34[label=\"expr 1\"];\n     N35[label=\"expr z\"];\n     N36[label=\"expr z -= 1\"];\n@@ -63,35 +63,35 @@ digraph block {\n     N8 -> N9;\n     N9 -> N10;\n     N10 -> N11;\n-    N11 -> N12;\n-    N12 -> N13;\n+    N11 -> N13;\n     N13 -> N14;\n     N14 -> N15;\n-    N14 -> N16;\n+    N15 -> N12;\n+    N15 -> N16;\n     N16 -> N17;\n     N17 -> N18;\n     N18 -> N19;\n     N19 -> N20;\n-    N20 -> N21;\n-    N21 -> N22;\n+    N20 -> N22;\n     N22 -> N23;\n     N23 -> N24;\n-    N23 -> N25;\n+    N24 -> N21;\n+    N24 -> N25;\n     N25 -> N26;\n     N26 -> N27;\n     N27 -> N28;\n     N28 -> N29;\n-    N29 -> N30;\n-    N30 -> N31;\n+    N29 -> N31;\n     N31 -> N32;\n     N32 -> N33;\n-    N32 -> N34;\n+    N33 -> N30;\n+    N33 -> N34;\n     N34 -> N35;\n     N35 -> N36;\n     N36 -> N37;\n     N37 -> N38;\n     N38 -> N29;\n-    N33 -> N39;\n+    N30 -> N39;\n     N39 -> N40;\n     N40 -> N41;\n     N41 -> N42;\n@@ -105,9 +105,9 @@ digraph block {\n     N48 -> N49;\n     N49 -> N50;\n     N50 -> N20;\n-    N24 -> N51;\n+    N21 -> N51;\n     N51 -> N11;\n-    N15 -> N52;\n+    N12 -> N52;\n     N52 -> N53;\n     N53 -> N1;\n }"}]}