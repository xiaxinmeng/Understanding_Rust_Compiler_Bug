{"sha": "4a647167e64c77c72a074c354543bbe9dacb2d96", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRhNjQ3MTY3ZTY0Yzc3YzcyYTA3NGMzNTQ1NDNiYmU5ZGFjYjJkOTY=", "commit": {"author": {"name": "John K\u00e5re Alsaker", "email": "john.kare.alsaker@gmail.com", "date": "2020-01-10T23:38:10Z"}, "committer": {"name": "John K\u00e5re Alsaker", "email": "john.kare.alsaker@gmail.com", "date": "2020-01-10T23:38:10Z"}, "message": "Add a comment", "tree": {"sha": "898b2d08a22ad449d77666d8ff76250205392c75", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/898b2d08a22ad449d77666d8ff76250205392c75"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4a647167e64c77c72a074c354543bbe9dacb2d96", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4a647167e64c77c72a074c354543bbe9dacb2d96", "html_url": "https://github.com/rust-lang/rust/commit/4a647167e64c77c72a074c354543bbe9dacb2d96", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4a647167e64c77c72a074c354543bbe9dacb2d96/comments", "author": {"login": "Zoxc", "id": 25784, "node_id": "MDQ6VXNlcjI1Nzg0", "avatar_url": "https://avatars.githubusercontent.com/u/25784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zoxc", "html_url": "https://github.com/Zoxc", "followers_url": "https://api.github.com/users/Zoxc/followers", "following_url": "https://api.github.com/users/Zoxc/following{/other_user}", "gists_url": "https://api.github.com/users/Zoxc/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zoxc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zoxc/subscriptions", "organizations_url": "https://api.github.com/users/Zoxc/orgs", "repos_url": "https://api.github.com/users/Zoxc/repos", "events_url": "https://api.github.com/users/Zoxc/events{/privacy}", "received_events_url": "https://api.github.com/users/Zoxc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Zoxc", "id": 25784, "node_id": "MDQ6VXNlcjI1Nzg0", "avatar_url": "https://avatars.githubusercontent.com/u/25784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zoxc", "html_url": "https://github.com/Zoxc", "followers_url": "https://api.github.com/users/Zoxc/followers", "following_url": "https://api.github.com/users/Zoxc/following{/other_user}", "gists_url": "https://api.github.com/users/Zoxc/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zoxc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zoxc/subscriptions", "organizations_url": "https://api.github.com/users/Zoxc/orgs", "repos_url": "https://api.github.com/users/Zoxc/repos", "events_url": "https://api.github.com/users/Zoxc/events{/privacy}", "received_events_url": "https://api.github.com/users/Zoxc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "51a73eb4fbbf2ec74c6a86942780fc2600811540", "url": "https://api.github.com/repos/rust-lang/rust/commits/51a73eb4fbbf2ec74c6a86942780fc2600811540", "html_url": "https://github.com/rust-lang/rust/commit/51a73eb4fbbf2ec74c6a86942780fc2600811540"}], "stats": {"total": 3, "additions": 3, "deletions": 0}, "files": [{"sha": "511a5fbc617951e94343a1cb6bc5ac8ba4cfab77", "filename": "src/librustc_mir/monomorphize/collector.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/4a647167e64c77c72a074c354543bbe9dacb2d96/src%2Flibrustc_mir%2Fmonomorphize%2Fcollector.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a647167e64c77c72a074c354543bbe9dacb2d96/src%2Flibrustc_mir%2Fmonomorphize%2Fcollector.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fmonomorphize%2Fcollector.rs?ref=4a647167e64c77c72a074c354543bbe9dacb2d96", "patch": "@@ -398,6 +398,9 @@ fn record_accesses<'tcx>(\n         mono_item.instantiation_mode(tcx) == InstantiationMode::LocalCopy\n     };\n \n+    // We collect this into a `SmallVec` to avoid calling `is_inlining_candidate` in the lock.\n+    // FIXME: Call `is_inlining_candidate` when pushing to `neighbors` in `collect_items_rec`\n+    // instead to avoid creating this `SmallVec`.\n     let accesses: SmallVec<[_; 128]> = callees\n         .into_iter()\n         .map(|mono_item| (*mono_item, is_inlining_candidate(mono_item)))"}]}