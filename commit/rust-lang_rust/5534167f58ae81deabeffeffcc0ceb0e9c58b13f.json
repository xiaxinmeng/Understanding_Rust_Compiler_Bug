{"sha": "5534167f58ae81deabeffeffcc0ceb0e9c58b13f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU1MzQxNjdmNThhZTgxZGVhYmVmZmVmZmNjMGNlYjBlOWM1OGIxM2Y=", "commit": {"author": {"name": "cynecx", "email": "me@cynecx.net", "date": "2019-08-21T22:39:18Z"}, "committer": {"name": "cynecx", "email": "me@cynecx.net", "date": "2019-08-21T22:39:18Z"}, "message": "Fix syntax-highlighting for fields (`NAMED_FIELD_DEF`)", "tree": {"sha": "b2a80bc03046760e0345233d67dac7de8553a168", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b2a80bc03046760e0345233d67dac7de8553a168"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5534167f58ae81deabeffeffcc0ceb0e9c58b13f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5534167f58ae81deabeffeffcc0ceb0e9c58b13f", "html_url": "https://github.com/rust-lang/rust/commit/5534167f58ae81deabeffeffcc0ceb0e9c58b13f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5534167f58ae81deabeffeffcc0ceb0e9c58b13f/comments", "author": {"login": "cynecx", "id": 5961244, "node_id": "MDQ6VXNlcjU5NjEyNDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5961244?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cynecx", "html_url": "https://github.com/cynecx", "followers_url": "https://api.github.com/users/cynecx/followers", "following_url": "https://api.github.com/users/cynecx/following{/other_user}", "gists_url": "https://api.github.com/users/cynecx/gists{/gist_id}", "starred_url": "https://api.github.com/users/cynecx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cynecx/subscriptions", "organizations_url": "https://api.github.com/users/cynecx/orgs", "repos_url": "https://api.github.com/users/cynecx/repos", "events_url": "https://api.github.com/users/cynecx/events{/privacy}", "received_events_url": "https://api.github.com/users/cynecx/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cynecx", "id": 5961244, "node_id": "MDQ6VXNlcjU5NjEyNDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5961244?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cynecx", "html_url": "https://github.com/cynecx", "followers_url": "https://api.github.com/users/cynecx/followers", "following_url": "https://api.github.com/users/cynecx/following{/other_user}", "gists_url": "https://api.github.com/users/cynecx/gists{/gist_id}", "starred_url": "https://api.github.com/users/cynecx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cynecx/subscriptions", "organizations_url": "https://api.github.com/users/cynecx/orgs", "repos_url": "https://api.github.com/users/cynecx/repos", "events_url": "https://api.github.com/users/cynecx/events{/privacy}", "received_events_url": "https://api.github.com/users/cynecx/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5fd9a5be0984faa138281e46dd4b73cfdad073b1", "url": "https://api.github.com/repos/rust-lang/rust/commits/5fd9a5be0984faa138281e46dd4b73cfdad073b1", "html_url": "https://github.com/rust-lang/rust/commit/5fd9a5be0984faa138281e46dd4b73cfdad073b1"}], "stats": {"total": 24, "additions": 10, "deletions": 14}, "files": [{"sha": "448acffc86ffa656eb216eda27812a14480f5ca0", "filename": "crates/ra_ide_api/src/syntax_highlighting.rs", "status": "modified", "additions": 10, "deletions": 14, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/5534167f58ae81deabeffeffcc0ceb0e9c58b13f/crates%2Fra_ide_api%2Fsrc%2Fsyntax_highlighting.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5534167f58ae81deabeffeffcc0ceb0e9c58b13f/crates%2Fra_ide_api%2Fsrc%2Fsyntax_highlighting.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide_api%2Fsrc%2Fsyntax_highlighting.rs?ref=5534167f58ae81deabeffeffcc0ceb0e9c58b13f", "patch": "@@ -158,21 +158,17 @@ pub(crate) fn highlight(db: &RootDatabase, file_id: FileId) -> Vec<HighlightedRa\n                         } else {\n                             \"variable\"\n                         }\n-                    } else if name\n-                        .syntax()\n-                        .parent()\n-                        .map(|x| {\n-                            x.kind() == TYPE_PARAM\n-                                || x.kind() == STRUCT_DEF\n-                                || x.kind() == ENUM_DEF\n-                                || x.kind() == TRAIT_DEF\n-                                || x.kind() == TYPE_ALIAS_DEF\n-                        })\n-                        .unwrap_or(false)\n-                    {\n-                        \"type\"\n                     } else {\n-                        \"function\"\n+                        name.syntax()\n+                            .parent()\n+                            .map(|x| match x.kind() {\n+                                TYPE_PARAM | STRUCT_DEF | ENUM_DEF | TRAIT_DEF | TYPE_ALIAS_DEF => {\n+                                    \"type\"\n+                                }\n+                                NAMED_FIELD_DEF => \"field\",\n+                                _ => \"function\",\n+                            })\n+                            .unwrap_or(\"function\")\n                     }\n                 } else {\n                     \"text\""}]}