{"sha": "93996b160ce319f864fbab6c9243048c4d65704c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkzOTk2YjE2MGNlMzE5Zjg2NGZiYWI2YzkyNDMwNDhjNGQ2NTcwNGM=", "commit": {"author": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2016-01-06T16:29:00Z"}, "committer": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2016-01-06T16:29:00Z"}, "message": "Fix dependency graph test cases to have correct commments and use -Z incr-comp", "tree": {"sha": "44fb0367855f3ead22c846f4dc75571dd64b1f7c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/44fb0367855f3ead22c846f4dc75571dd64b1f7c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/93996b160ce319f864fbab6c9243048c4d65704c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/93996b160ce319f864fbab6c9243048c4d65704c", "html_url": "https://github.com/rust-lang/rust/commit/93996b160ce319f864fbab6c9243048c4d65704c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/93996b160ce319f864fbab6c9243048c4d65704c/comments", "author": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "876de6e4956e45d4a335b41af953b6cc05c8a36b", "url": "https://api.github.com/repos/rust-lang/rust/commits/876de6e4956e45d4a335b41af953b6cc05c8a36b", "html_url": "https://github.com/rust-lang/rust/commit/876de6e4956e45d4a335b41af953b6cc05c8a36b"}], "stats": {"total": 28, "additions": 22, "deletions": 6}, "files": [{"sha": "acd6091cbdd482c93319d7474ecaa14473dcfac5", "filename": "src/test/compile-fail/dep-graph-caller-callee.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/93996b160ce319f864fbab6c9243048c4d65704c/src%2Ftest%2Fcompile-fail%2Fdep-graph-caller-callee.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93996b160ce319f864fbab6c9243048c4d65704c/src%2Ftest%2Fcompile-fail%2Fdep-graph-caller-callee.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fdep-graph-caller-callee.rs?ref=93996b160ce319f864fbab6c9243048c4d65704c", "patch": "@@ -8,7 +8,10 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// Test that two unrelated functions have no trans dependency.\n+// Test that immediate callers have to change when callee changes, but\n+// not callers' callers.\n+\n+// compile-flags: -Z incr-comp\n \n #![feature(rustc_attrs)]\n #![allow(dead_code)]"}, {"sha": "5cfb748b6f4596f188d69f321edce56403a82261", "filename": "src/test/compile-fail/dep-graph-struct-signature.rs", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/93996b160ce319f864fbab6c9243048c4d65704c/src%2Ftest%2Fcompile-fail%2Fdep-graph-struct-signature.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93996b160ce319f864fbab6c9243048c4d65704c/src%2Ftest%2Fcompile-fail%2Fdep-graph-struct-signature.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fdep-graph-struct-signature.rs?ref=93996b160ce319f864fbab6c9243048c4d65704c", "patch": "@@ -8,7 +8,10 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// Test that two unrelated functions have no trans dependency.\n+// Test cases where a changing struct appears in the signature of fns\n+// and methods.\n+\n+// compile-flags: -Z incr-comp\n \n #![feature(rustc_attrs)]\n #![allow(dead_code)]\n@@ -68,7 +71,7 @@ mod signatures {\n \n     #[rustc_then_this_would_need(ItemSignature)] //~ ERROR OK\n     #[rustc_then_this_would_need(CollectItem)] //~ ERROR OK\n-    fn indirect(x: WillChange) { }\n+    fn indirect(x: WillChanges) { }\n }\n \n // these are invalid dependencies, though sometimes we create edges"}, {"sha": "57e83586d8d37b79c5b32c87fb0c5081b21e8127", "filename": "src/test/compile-fail/dep-graph-trait-impl-two-traits-same-method.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/93996b160ce319f864fbab6c9243048c4d65704c/src%2Ftest%2Fcompile-fail%2Fdep-graph-trait-impl-two-traits-same-method.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93996b160ce319f864fbab6c9243048c4d65704c/src%2Ftest%2Fcompile-fail%2Fdep-graph-trait-impl-two-traits-same-method.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fdep-graph-trait-impl-two-traits-same-method.rs?ref=93996b160ce319f864fbab6c9243048c4d65704c", "patch": "@@ -8,7 +8,10 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// Test that two unrelated functions have no trans dependency.\n+// Test that adding an impl to a trait `Foo` DOES affect functions\n+// that only use `Bar` if they have methods in common.\n+\n+// compile-flags: -Z incr-comp\n \n #![feature(rustc_attrs)]\n #![allow(dead_code)]"}, {"sha": "ba54a056209454720f1012c6233b723140fb7ed7", "filename": "src/test/compile-fail/dep-graph-trait-impl-two-traits.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/93996b160ce319f864fbab6c9243048c4d65704c/src%2Ftest%2Fcompile-fail%2Fdep-graph-trait-impl-two-traits.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93996b160ce319f864fbab6c9243048c4d65704c/src%2Ftest%2Fcompile-fail%2Fdep-graph-trait-impl-two-traits.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fdep-graph-trait-impl-two-traits.rs?ref=93996b160ce319f864fbab6c9243048c4d65704c", "patch": "@@ -9,7 +9,9 @@\n // except according to those terms.\n \n // Test that adding an impl to a trait `Foo` does not affect functions\n-// that only use `Bar`.\n+// that only use `Bar`, so long as they do not have methods in common.\n+\n+// compile-flags: -Z incr-comp\n \n #![feature(rustc_attrs)]\n #![allow(warnings)]"}, {"sha": "83e924fe06d7dfd223f57744b53fe32a95a9f0a5", "filename": "src/test/compile-fail/dep-graph-trait-impl.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/93996b160ce319f864fbab6c9243048c4d65704c/src%2Ftest%2Fcompile-fail%2Fdep-graph-trait-impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93996b160ce319f864fbab6c9243048c4d65704c/src%2Ftest%2Fcompile-fail%2Fdep-graph-trait-impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fdep-graph-trait-impl.rs?ref=93996b160ce319f864fbab6c9243048c4d65704c", "patch": "@@ -8,7 +8,10 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// Test that two unrelated functions have no trans dependency.\n+// Test that when a trait impl changes, fns whose body uses that trait\n+// must also be recompiled.\n+\n+// compile-flags: -Z incr-comp\n \n #![feature(rustc_attrs)]\n #![allow(warnings)]"}, {"sha": "8feec12a2f76c975d9cb284db890445c65771870", "filename": "src/test/compile-fail/dep-graph-unrelated.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/93996b160ce319f864fbab6c9243048c4d65704c/src%2Ftest%2Fcompile-fail%2Fdep-graph-unrelated.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93996b160ce319f864fbab6c9243048c4d65704c/src%2Ftest%2Fcompile-fail%2Fdep-graph-unrelated.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fdep-graph-unrelated.rs?ref=93996b160ce319f864fbab6c9243048c4d65704c", "patch": "@@ -10,6 +10,8 @@\n \n // Test that two unrelated functions have no trans dependency.\n \n+// compile-flags: -Z incr-comp\n+\n #![feature(rustc_attrs)]\n #![allow(dead_code)]\n "}]}