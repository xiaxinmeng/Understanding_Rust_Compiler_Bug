{"sha": "936238a92b2f9d6e7afe7dda69b4afd903f96399", "node_id": "C_kwDOAAsO6NoAKDkzNjIzOGE5MmIyZjlkNmU3YWZlN2RkYTY5YjRhZmQ5MDNmOTYzOTk", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-11-11T18:26:49Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-11-11T18:26:49Z"}, "message": "Auto merge of #90746 - nnethercote:opt-pattern-matching, r=Nadrieril\n\nOptimize pattern matching\n\nThese commits speed up the `match-stress-enum` benchmark, which is very artificial, but the changes are simple enough that it's probably worth doing.\n\nr? `@Nadrieril`", "tree": {"sha": "29df31c1ec7b72ac84a9e53ec3775e627f969cb9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/29df31c1ec7b72ac84a9e53ec3775e627f969cb9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/936238a92b2f9d6e7afe7dda69b4afd903f96399", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/936238a92b2f9d6e7afe7dda69b4afd903f96399", "html_url": "https://github.com/rust-lang/rust/commit/936238a92b2f9d6e7afe7dda69b4afd903f96399", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/936238a92b2f9d6e7afe7dda69b4afd903f96399/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3d29b6807740db74aeb9c2f626115e519dee4a62", "url": "https://api.github.com/repos/rust-lang/rust/commits/3d29b6807740db74aeb9c2f626115e519dee4a62", "html_url": "https://github.com/rust-lang/rust/commit/3d29b6807740db74aeb9c2f626115e519dee4a62"}, {"sha": "580d357b5adef605fc731d295ca53ab8532e26fb", "url": "https://api.github.com/repos/rust-lang/rust/commits/580d357b5adef605fc731d295ca53ab8532e26fb", "html_url": "https://github.com/rust-lang/rust/commit/580d357b5adef605fc731d295ca53ab8532e26fb"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "067b0506e308cd2353a4c99e8458f2d7b3319172", "filename": "compiler/rustc_mir_build/src/thir/pattern/usefulness.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/936238a92b2f9d6e7afe7dda69b4afd903f96399/compiler%2Frustc_mir_build%2Fsrc%2Fthir%2Fpattern%2Fusefulness.rs", "raw_url": "https://github.com/rust-lang/rust/raw/936238a92b2f9d6e7afe7dda69b4afd903f96399/compiler%2Frustc_mir_build%2Fsrc%2Fthir%2Fpattern%2Fusefulness.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir_build%2Fsrc%2Fthir%2Fpattern%2Fusefulness.rs?ref=936238a92b2f9d6e7afe7dda69b4afd903f96399", "patch": "@@ -797,7 +797,7 @@ fn is_useful<'p, 'tcx>(\n         return ret;\n     }\n \n-    assert!(rows.iter().all(|r| r.len() == v.len()));\n+    debug_assert!(rows.iter().all(|r| r.len() == v.len()));\n \n     let ty = v.head().ty();\n     let is_non_exhaustive = cx.is_foreign_non_exhaustive_enum(ty);"}]}