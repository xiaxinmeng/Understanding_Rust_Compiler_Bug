{"sha": "2bb390b28164f9d3dac863a4e16568d84c3e3aee", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJiYjM5MGIyODE2NGY5ZDNkYWM4NjNhNGUxNjU2OGQ4NGMzZTNhZWU=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-06-10T11:14:31Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-06-10T11:14:31Z"}, "message": "Rollup merge of #61683 - nielx:haiku-stack-limit, r=nagisa\n\nHaiku: the maximum stack size is 16 MB\n\nThis keeps the compiler from crashing every time it is invoked. No functional change on other platforms.\n\nThis patch is similar to the limitation that is in the [librustdoc/lib.rs](https://github.com/rust-lang/rust/blob/57e13e0325c1d41161a31de1f8520538ec2c575c/src/librustdoc/lib.rs#L89).", "tree": {"sha": "9d26130395d89628ae38e1062a5d8f1be50e91f8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9d26130395d89628ae38e1062a5d8f1be50e91f8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2bb390b28164f9d3dac863a4e16568d84c3e3aee", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJc/juXCRBK7hj4Ov3rIwAAdHIIAJy/tgM3hP31rVtrTwStqBsQ\n3E3QQnYybD+AZ29iCTEFx5qnOnBHsjLXbIYJyVVrspPkwJmGZuxHEMrwbd3ALqMv\ng3yXlnqfe15sIBefg+XrhVWW0f7CpdPYM8Hp2hu4gNaWe3AXC091zp56+C921RdW\nbyz6Omsbzsrxfxj+MLonlU1SLmGvXIUm+IWU3Hxf/VmUymgqCjRorrZVHzA19x34\nliydPkRzjepYAB/u3lprHHQ+JfhzpwX1+9gyo2xyvFA67cW3wJqjY1mF3UWnWhHR\n2vCjuuWNbxDJonXe7SQSC+tFXZ2XoAM9vNl/z1LHbCD7rSC4HQ1lBbUqLsHRnsA=\n=z7vO\n-----END PGP SIGNATURE-----\n", "payload": "tree 9d26130395d89628ae38e1062a5d8f1be50e91f8\nparent e18113916267d46b1705d278ee1392e18ada44c3\nparent 56a7f1e77ecb264e1588924588071d2eef6e1840\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1560165271 +0200\ncommitter GitHub <noreply@github.com> 1560165271 +0200\n\nRollup merge of #61683 - nielx:haiku-stack-limit, r=nagisa\n\nHaiku: the maximum stack size is 16 MB\n\nThis keeps the compiler from crashing every time it is invoked. No functional change on other platforms.\n\nThis patch is similar to the limitation that is in the [librustdoc/lib.rs](https://github.com/rust-lang/rust/blob/57e13e0325c1d41161a31de1f8520538ec2c575c/src/librustdoc/lib.rs#L89).\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2bb390b28164f9d3dac863a4e16568d84c3e3aee", "html_url": "https://github.com/rust-lang/rust/commit/2bb390b28164f9d3dac863a4e16568d84c3e3aee", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2bb390b28164f9d3dac863a4e16568d84c3e3aee/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e18113916267d46b1705d278ee1392e18ada44c3", "url": "https://api.github.com/repos/rust-lang/rust/commits/e18113916267d46b1705d278ee1392e18ada44c3", "html_url": "https://github.com/rust-lang/rust/commit/e18113916267d46b1705d278ee1392e18ada44c3"}, {"sha": "56a7f1e77ecb264e1588924588071d2eef6e1840", "url": "https://api.github.com/repos/rust-lang/rust/commits/56a7f1e77ecb264e1588924588071d2eef6e1840", "html_url": "https://github.com/rust-lang/rust/commit/56a7f1e77ecb264e1588924588071d2eef6e1840"}], "stats": {"total": 8, "additions": 6, "deletions": 2}, "files": [{"sha": "a86d3cc43948d50a4a6865ad9e009559206f4ac0", "filename": "src/librustc_interface/util.rs", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/2bb390b28164f9d3dac863a4e16568d84c3e3aee/src%2Flibrustc_interface%2Futil.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2bb390b28164f9d3dac863a4e16568d84c3e3aee/src%2Flibrustc_interface%2Futil.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_interface%2Futil.rs?ref=2bb390b28164f9d3dac863a4e16568d84c3e3aee", "patch": "@@ -121,9 +121,13 @@ pub fn create_session(\n }\n \n // Temporarily have stack size set to 32MB to deal with various crates with long method\n-// chains or deep syntax trees.\n+// chains or deep syntax trees, except when on Haiku.\n // FIXME(oli-obk): get https://github.com/rust-lang/rust/pull/55617 the finish line\n-const STACK_SIZE: usize = 32 * 1024 * 1024; // 32MB\n+#[cfg(not(target_os = \"haiku\"))]\n+const STACK_SIZE: usize = 32 * 1024 * 1024;\n+\n+#[cfg(target_os = \"haiku\")]\n+const STACK_SIZE: usize = 16 * 1024 * 1024;\n \n fn get_stack_size() -> Option<usize> {\n     // FIXME: Hacks on hacks. If the env is trying to override the stack size"}]}