{"sha": "c9cec381bcfd97e5f3536e31a9c546ab5c0665e6", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM5Y2VjMzgxYmNmZDk3ZTVmMzUzNmUzMWE5YzU0NmFiNWMwNjY1ZTY=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2021-01-06T16:41:22Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-01-06T16:41:22Z"}, "message": "Merge #7181\n\n7181: Document project_model::PackageData and project_model::TargetData r=arnaudgolfouse a=arnaudgolfouse\n\nThis PR adds some documentation for the `project_model` crate.\r\n\r\nSome of the field descriptions were taken directly from their `cargo_metadata` counterpart :\r\n- `PackageData` -> `cargo_metadata::Package`\r\n- `TargetData` -> `cargo_metadata::Target`\n\nCo-authored-by: Arnaud <arnaud.golfouse@free.fr>", "tree": {"sha": "6ed39837e3adb17ca5700a53e3a4b3b4e331ad68", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6ed39837e3adb17ca5700a53e3a4b3b4e331ad68"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c9cec381bcfd97e5f3536e31a9c546ab5c0665e6", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJf9egyCRBK7hj4Ov3rIwAAdHIIAITxR5z/F062P15KBr5NNoc2\n1MVGsxfPcJWX9SWFQppSMEEwa2QoNUmFcgkPDnOYZIl5tyQLgrs+Ew5G7iF0TjZn\njcCyHgT0MCj2PgTPFdpikfwy+S8+ght8B8VL5xi5S0LCfSC7iRQx0PeTtSiszPiO\nEC+JHSz0tBMOaH8dOo/gk26sGW4qLSljJ6yVLwJ8kQwW3rQLJ4Kf7Zh4WW39u3wT\nfos0r3RtGc1/hYBH3XNPrW1rejhex7fzKY/y5zIwAIhkf/55ikoCXAdKYqF+VdDE\nocdoQCjEzP1ie7i5eOpJa3+RcL0Hbq37VE2fY34B9+g+Wn1gaTzNGY+NsQmB6q8=\n=I0dJ\n-----END PGP SIGNATURE-----\n", "payload": "tree 6ed39837e3adb17ca5700a53e3a4b3b4e331ad68\nparent 1b2d80dfa753b4fa834ab6987399738064cfd7a4\nparent ef636ba346582db196cd52a694ac9fe71fc36019\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1609951282 +0000\ncommitter GitHub <noreply@github.com> 1609951282 +0000\n\nMerge #7181\n\n7181: Document project_model::PackageData and project_model::TargetData r=arnaudgolfouse a=arnaudgolfouse\n\nThis PR adds some documentation for the `project_model` crate.\r\n\r\nSome of the field descriptions were taken directly from their `cargo_metadata` counterpart :\r\n- `PackageData` -> `cargo_metadata::Package`\r\n- `TargetData` -> `cargo_metadata::Target`\n\nCo-authored-by: Arnaud <arnaud.golfouse@free.fr>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c9cec381bcfd97e5f3536e31a9c546ab5c0665e6", "html_url": "https://github.com/rust-lang/rust/commit/c9cec381bcfd97e5f3536e31a9c546ab5c0665e6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c9cec381bcfd97e5f3536e31a9c546ab5c0665e6/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1b2d80dfa753b4fa834ab6987399738064cfd7a4", "url": "https://api.github.com/repos/rust-lang/rust/commits/1b2d80dfa753b4fa834ab6987399738064cfd7a4", "html_url": "https://github.com/rust-lang/rust/commit/1b2d80dfa753b4fa834ab6987399738064cfd7a4"}, {"sha": "ef636ba346582db196cd52a694ac9fe71fc36019", "url": "https://api.github.com/repos/rust-lang/rust/commits/ef636ba346582db196cd52a694ac9fe71fc36019", "html_url": "https://github.com/rust-lang/rust/commit/ef636ba346582db196cd52a694ac9fe71fc36019"}], "stats": {"total": 29, "additions": 27, "deletions": 2}, "files": [{"sha": "0e6679542443bf89fb80b8ae995a4847508afd72", "filename": "crates/project_model/src/cargo_workspace.rs", "status": "modified", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/c9cec381bcfd97e5f3536e31a9c546ab5c0665e6/crates%2Fproject_model%2Fsrc%2Fcargo_workspace.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c9cec381bcfd97e5f3536e31a9c546ab5c0665e6/crates%2Fproject_model%2Fsrc%2Fcargo_workspace.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fproject_model%2Fsrc%2Fcargo_workspace.rs?ref=c9cec381bcfd97e5f3536e31a9c546ab5c0665e6", "patch": "@@ -80,19 +80,35 @@ pub type Package = Idx<PackageData>;\n \n pub type Target = Idx<TargetData>;\n \n+/// Information associated with a cargo crate\n #[derive(Debug, Clone, Eq, PartialEq)]\n pub struct PackageData {\n+    /// Version given in the `Cargo.toml`\n     pub version: String,\n+    /// Name as given in the `Cargo.toml`\n     pub name: String,\n+    /// Path containing the `Cargo.toml`\n     pub manifest: AbsPathBuf,\n+    /// Targets provided by the crate (lib, bin, example, test, ...)\n     pub targets: Vec<Target>,\n+    /// Is this package a member of the current workspace\n     pub is_member: bool,\n+    /// List of packages this package depends on\n     pub dependencies: Vec<PackageDependency>,\n+    /// Rust edition for this package\n     pub edition: Edition,\n+    /// List of features to activate\n     pub features: Vec<String>,\n+    /// List of config flags defined by this package's build script\n     pub cfgs: Vec<CfgFlag>,\n+    /// List of cargo-related environment variables with their value\n+    ///\n+    /// If the package has a build script which defines environment variables,\n+    /// they can also be found here.\n     pub envs: Vec<(String, String)>,\n+    /// Directory where a build script might place its output\n     pub out_dir: Option<AbsPathBuf>,\n+    /// Path to the proc-macro library file if this package exposes proc-macros\n     pub proc_macro_dylib_path: Option<AbsPathBuf>,\n }\n \n@@ -102,12 +118,18 @@ pub struct PackageDependency {\n     pub name: String,\n }\n \n+/// Information associated with a package's target\n #[derive(Debug, Clone, Eq, PartialEq)]\n pub struct TargetData {\n+    /// Package that provided this target\n     pub package: Package,\n+    /// Name as given in the `Cargo.toml` or generated from the file name\n     pub name: String,\n+    /// Path to the main source file of the target\n     pub root: AbsPathBuf,\n+    /// Kind of target\n     pub kind: TargetKind,\n+    /// Is this target a proc-macro\n     pub is_proc_macro: bool,\n }\n "}, {"sha": "aabb7a47dff46af4df23b7e064c058ad2003e24f", "filename": "crates/project_model/src/lib.rs", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/c9cec381bcfd97e5f3536e31a9c546ab5c0665e6/crates%2Fproject_model%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c9cec381bcfd97e5f3536e31a9c546ab5c0665e6/crates%2Fproject_model%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fproject_model%2Fsrc%2Flib.rs?ref=c9cec381bcfd97e5f3536e31a9c546ab5c0665e6", "patch": "@@ -1,9 +1,9 @@\n //! FIXME: write short doc here\n \n mod cargo_workspace;\n+mod cfg_flag;\n mod project_json;\n mod sysroot;\n-mod cfg_flag;\n mod workspace;\n \n use std::{\n@@ -17,7 +17,10 @@ use paths::{AbsPath, AbsPathBuf};\n use rustc_hash::FxHashSet;\n \n pub use crate::{\n-    cargo_workspace::{CargoConfig, CargoWorkspace, Package, Target, TargetKind},\n+    cargo_workspace::{\n+        CargoConfig, CargoWorkspace, Package, PackageData, PackageDependency, Target, TargetData,\n+        TargetKind,\n+    },\n     project_json::{ProjectJson, ProjectJsonData},\n     sysroot::Sysroot,\n     workspace::{PackageRoot, ProjectWorkspace},"}]}