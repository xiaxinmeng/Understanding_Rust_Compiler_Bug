{"sha": "0ab861aa2dc972e13d98c24db603f125688d5e43", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBhYjg2MWFhMmRjOTcyZTEzZDk4YzI0ZGI2MDNmMTI1Njg4ZDVlNDM=", "commit": {"author": {"name": "Erick Tryzelaar", "email": "erick.tryzelaar@gmail.com", "date": "2014-11-12T01:51:43Z"}, "committer": {"name": "Erick Tryzelaar", "email": "erick.tryzelaar@gmail.com", "date": "2014-11-12T01:51:43Z"}, "message": "std: Rename AsRef{Reader,Writer} to ByRef{Reader,Writer}", "tree": {"sha": "10f69857679b1d0eace539ae553d2376568cdf4e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/10f69857679b1d0eace539ae553d2376568cdf4e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0ab861aa2dc972e13d98c24db603f125688d5e43", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0ab861aa2dc972e13d98c24db603f125688d5e43", "html_url": "https://github.com/rust-lang/rust/commit/0ab861aa2dc972e13d98c24db603f125688d5e43", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0ab861aa2dc972e13d98c24db603f125688d5e43/comments", "author": {"login": "erickt", "id": 84711, "node_id": "MDQ6VXNlcjg0NzEx", "avatar_url": "https://avatars.githubusercontent.com/u/84711?v=4", "gravatar_id": "", "url": "https://api.github.com/users/erickt", "html_url": "https://github.com/erickt", "followers_url": "https://api.github.com/users/erickt/followers", "following_url": "https://api.github.com/users/erickt/following{/other_user}", "gists_url": "https://api.github.com/users/erickt/gists{/gist_id}", "starred_url": "https://api.github.com/users/erickt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/erickt/subscriptions", "organizations_url": "https://api.github.com/users/erickt/orgs", "repos_url": "https://api.github.com/users/erickt/repos", "events_url": "https://api.github.com/users/erickt/events{/privacy}", "received_events_url": "https://api.github.com/users/erickt/received_events", "type": "User", "site_admin": false}, "committer": {"login": "erickt", "id": 84711, "node_id": "MDQ6VXNlcjg0NzEx", "avatar_url": "https://avatars.githubusercontent.com/u/84711?v=4", "gravatar_id": "", "url": "https://api.github.com/users/erickt", "html_url": "https://github.com/erickt", "followers_url": "https://api.github.com/users/erickt/followers", "following_url": "https://api.github.com/users/erickt/following{/other_user}", "gists_url": "https://api.github.com/users/erickt/gists{/gist_id}", "starred_url": "https://api.github.com/users/erickt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/erickt/subscriptions", "organizations_url": "https://api.github.com/users/erickt/orgs", "repos_url": "https://api.github.com/users/erickt/repos", "events_url": "https://api.github.com/users/erickt/events{/privacy}", "received_events_url": "https://api.github.com/users/erickt/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e82f60eb471c4ee092bd4867f6946d271a620e71", "url": "https://api.github.com/repos/rust-lang/rust/commits/e82f60eb471c4ee092bd4867f6946d271a620e71", "html_url": "https://github.com/rust-lang/rust/commit/e82f60eb471c4ee092bd4867f6946d271a620e71"}], "stats": {"total": 41, "additions": 38, "deletions": 3}, "files": [{"sha": "9828c2092d3622e1045bbef8bbc1ab8641b8800c", "filename": "src/libstd/io/mod.rs", "status": "modified", "additions": 37, "deletions": 2, "changes": 39, "blob_url": "https://github.com/rust-lang/rust/blob/0ab861aa2dc972e13d98c24db603f125688d5e43/src%2Flibstd%2Fio%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0ab861aa2dc972e13d98c24db603f125688d5e43/src%2Flibstd%2Fio%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Fmod.rs?ref=0ab861aa2dc972e13d98c24db603f125688d5e43", "patch": "@@ -849,6 +849,7 @@ pub trait Reader {\n }\n \n /// A reader which can be converted to a RefReader.\n+#[deprecated = \"use ByRefReader instead\"]\n pub trait AsRefReader {\n     /// Creates a wrapper around a mutable reference to the reader.\n     ///\n@@ -857,12 +858,28 @@ pub trait AsRefReader {\n     fn by_ref<'a>(&'a mut self) -> RefReader<'a, Self>;\n }\n \n+#[allow(deprecated)]\n impl<T: Reader> AsRefReader for T {\n     fn by_ref<'a>(&'a mut self) -> RefReader<'a, T> {\n         RefReader { inner: self }\n     }\n }\n \n+/// A reader which can be converted to a RefReader.\n+pub trait ByRefReader {\n+    /// Creates a wrapper around a mutable reference to the reader.\n+    ///\n+    /// This is useful to allow applying adaptors while still\n+    /// retaining ownership of the original value.\n+    fn by_ref<'a>(&'a mut self) -> RefReader<'a, Self>;\n+}\n+\n+impl<T: Reader> ByRefReader for T {\n+    fn by_ref<'a>(&'a mut self) -> RefReader<'a, T> {\n+        RefReader { inner: self }\n+    }\n+}\n+\n /// A reader which can be converted to bytes.\n pub trait BytesReader {\n     /// Create an iterator that reads a single byte on\n@@ -925,7 +942,7 @@ unsafe fn slice_vec_capacity<'a, T>(v: &'a mut Vec<T>, start: uint, end: uint) -\n /// # fn process_input<R: Reader>(r: R) {}\n /// # fn foo() {\n /// use std::io;\n-/// use std::io::AsRefReader;\n+/// use std::io::ByRefReader;\n /// use std::io::util::LimitReader;\n ///\n /// let mut stream = io::stdin();\n@@ -1211,6 +1228,7 @@ pub trait Writer {\n }\n \n /// A writer which can be converted to a RefWriter.\n+#[deprecated = \"use ByRefWriter instead\"]\n pub trait AsRefWriter {\n     /// Creates a wrapper around a mutable reference to the writer.\n     ///\n@@ -1220,12 +1238,29 @@ pub trait AsRefWriter {\n     fn by_ref<'a>(&'a mut self) -> RefWriter<'a, Self>;\n }\n \n+#[allow(deprecated)]\n impl<T: Writer> AsRefWriter for T {\n     fn by_ref<'a>(&'a mut self) -> RefWriter<'a, T> {\n         RefWriter { inner: self }\n     }\n }\n \n+/// A writer which can be converted to a RefWriter.\n+pub trait ByRefWriter {\n+    /// Creates a wrapper around a mutable reference to the writer.\n+    ///\n+    /// This is useful to allow applying wrappers while still\n+    /// retaining ownership of the original value.\n+    #[inline]\n+    fn by_ref<'a>(&'a mut self) -> RefWriter<'a, Self>;\n+}\n+\n+impl<T: Writer> ByRefWriter for T {\n+    fn by_ref<'a>(&'a mut self) -> RefWriter<'a, T> {\n+        RefWriter { inner: self }\n+    }\n+}\n+\n impl<'a> Writer for Box<Writer+'a> {\n     #[inline]\n     fn write(&mut self, buf: &[u8]) -> IoResult<()> {\n@@ -1256,7 +1291,7 @@ impl<'a> Writer for &'a mut Writer+'a {\n /// # fn process_input<R: Reader>(r: R) {}\n /// # fn foo () {\n /// use std::io::util::TeeReader;\n-/// use std::io::{stdin, MemWriter, AsRefWriter};\n+/// use std::io::{stdin, MemWriter, ByRefWriter};\n ///\n /// let mut output = MemWriter::new();\n ///"}, {"sha": "765af0dfbc0d9bcb6b256647156ca45dc84d7073", "filename": "src/libstd/io/util.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0ab861aa2dc972e13d98c24db603f125688d5e43/src%2Flibstd%2Fio%2Futil.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0ab861aa2dc972e13d98c24db603f125688d5e43/src%2Flibstd%2Fio%2Futil.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Futil.rs?ref=0ab861aa2dc972e13d98c24db603f125688d5e43", "patch": "@@ -265,7 +265,7 @@ impl<T: Iterator<u8>> Reader for IterReader<T> {\n \n #[cfg(test)]\n mod test {\n-    use io::{MemReader, MemWriter, BufReader, AsRefReader};\n+    use io::{MemReader, MemWriter, BufReader, ByRefReader};\n     use io;\n     use boxed::Box;\n     use super::*;"}]}