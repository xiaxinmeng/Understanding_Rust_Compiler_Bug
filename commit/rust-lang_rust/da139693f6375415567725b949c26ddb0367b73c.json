{"sha": "da139693f6375415567725b949c26ddb0367b73c", "node_id": "C_kwDOAAsO6NoAKGRhMTM5NjkzZjYzNzU0MTU1Njc3MjViOTQ5YzI2ZGRiMDM2N2I3M2M", "commit": {"author": {"name": "Pietro Albini", "email": "pietro.albini@ferrous-systems.com", "date": "2022-05-02T07:51:38Z"}, "committer": {"name": "Pietro Albini", "email": "pietro.albini@ferrous-systems.com", "date": "2022-05-02T07:51:38Z"}, "message": "fix existing bug when the first write was always included in full", "tree": {"sha": "904f1c779814e9d4f0fa9f4d7c64ed1e1d463523", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/904f1c779814e9d4f0fa9f4d7c64ed1e1d463523"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/da139693f6375415567725b949c26ddb0367b73c", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEMycKYjxLY0eb13b7zXazX3c0dp4FAmJvjZkACgkQzXazX3c0\ndp66PRAAi/yOz1krFEVspnMOy9j6pwUAnUtwZpmDdSoLIIS8lhkZp2jTucJvj3wZ\nlV2MZ+xWqWuvkYKlgGfWEzNu+RTdtK3p1SbI6++ywSgALAhzrYZB4oePkQA5zlbw\n9dNbIwrrYKjHWkJoOi+/U1GckryEkDNPQ9lVCPMhqj2Y2u8zGAr188RL5I8qgJQj\nGgc/uaqrIHDZrODGg95Z6s4DIHzGdRjhdUktZTQUFj6hBazCWmC5Og0FQf8aCmHm\nBZ82TdlsP54zy/t1Cjcdmm93Dbp/biYKS/vOSsDNwjlgOwBVxi6SCsVUSC5IX4P5\nXaqF0Ls6knXoHKSDGJSIpqypNengcsUNIBmtWvd97RG+7ynTjdC+YSZadxRIW73c\nZDtVz9LutwW/kMRoNHW08wskA2wcbyqmNMD6+xFu0fIt5MJDKyTOOgJg8TTck8zB\nsTun5Z+I09pAww3cxK70coAlSRTmRcNbSd9xRh3PrMslMRA1H3dsHISPEmrYIWwF\nf7ptkZHSSvQpXBihCQp8cIIjeQW3KtUmgSfWwKubzO6vqfFTpQ6Qw9TMkgHZuomJ\njPRLndPmGjZj/Mfu9PqKwXzvUf4bOLLsV48J/PVd0C1jECrsCCD+0LEDItB48Rv7\n0bMJKaB2DeLmJ4JWeIbl+szqXQ/6DNyGXzKls/qGRIGGJVmKrCQ=\n=MuZk\n-----END PGP SIGNATURE-----", "payload": "tree 904f1c779814e9d4f0fa9f4d7c64ed1e1d463523\nparent e52fb6c96b96fdaba14f31ca583baebdec14366b\nauthor Pietro Albini <pietro.albini@ferrous-systems.com> 1651477898 +0200\ncommitter Pietro Albini <pietro.albini@ferrous-systems.com> 1651477898 +0200\n\nfix existing bug when the first write was always included in full\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/da139693f6375415567725b949c26ddb0367b73c", "html_url": "https://github.com/rust-lang/rust/commit/da139693f6375415567725b949c26ddb0367b73c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/da139693f6375415567725b949c26ddb0367b73c/comments", "author": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e52fb6c96b96fdaba14f31ca583baebdec14366b", "url": "https://api.github.com/repos/rust-lang/rust/commits/e52fb6c96b96fdaba14f31ca583baebdec14366b", "html_url": "https://github.com/rust-lang/rust/commit/e52fb6c96b96fdaba14f31ca583baebdec14366b"}], "stats": {"total": 3, "additions": 2, "deletions": 1}, "files": [{"sha": "bd5f3593b6554a4d618f04c7a90096b9c8a4bc2a", "filename": "src/tools/compiletest/src/read2.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/da139693f6375415567725b949c26ddb0367b73c/src%2Ftools%2Fcompiletest%2Fsrc%2Fread2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/da139693f6375415567725b949c26ddb0367b73c/src%2Ftools%2Fcompiletest%2Fsrc%2Fread2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fread2.rs?ref=da139693f6375415567725b949c26ddb0367b73c", "patch": "@@ -74,7 +74,8 @@ impl ProcOutput {\n                 }\n \n                 let mut head = replace(bytes, Vec::new());\n-                let tail = head.split_off(new_len - TAIL_LEN).into_boxed_slice();\n+                let mut middle = head.split_off(HEAD_LEN);\n+                let tail = middle.split_off(middle.len() - TAIL_LEN).into_boxed_slice();\n                 let skipped = new_len - HEAD_LEN - TAIL_LEN;\n                 ProcOutput::Abbreviated { head, skipped, tail }\n             }"}]}