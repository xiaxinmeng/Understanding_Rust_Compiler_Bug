{"sha": "4a726f0573dcfcd01ae9b37266014df0e26f2e22", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRhNzI2ZjA1NzNkY2ZjZDAxYWU5YjM3MjY2MDE0ZGYwZTI2ZjJlMjI=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-07-24T23:49:36Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-07-24T23:49:36Z"}, "message": "auto merge of #8006 : emillon/rust/issue-6060, r=pcwalton\n\nHello,\r\n\r\nI made a tiny change to `tidy.py` so that it uses a regexp to find `// NOTE` comments. I could not find an easy way to write an automated test for this but if this is needed and possible I'd be happy to write one.\r\nPlease note that it also removes extra empty lines that appear after each of these warnings (I believe that there were not wanted).\r\n\r\nOn the performance side, `make tidy` is now a bit slower (running it 10 times in a row takes 71s on my machine, 65s before) but I don't think that it is performance sensitive.\r\n\r\nThanks!", "tree": {"sha": "139069b9363fbbaaee1823431e44c7277969c997", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/139069b9363fbbaaee1823431e44c7277969c997"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4a726f0573dcfcd01ae9b37266014df0e26f2e22", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4a726f0573dcfcd01ae9b37266014df0e26f2e22", "html_url": "https://github.com/rust-lang/rust/commit/4a726f0573dcfcd01ae9b37266014df0e26f2e22", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4a726f0573dcfcd01ae9b37266014df0e26f2e22/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "330378d1a1a97be85f1150242da277c00b7270f5", "url": "https://api.github.com/repos/rust-lang/rust/commits/330378d1a1a97be85f1150242da277c00b7270f5", "html_url": "https://github.com/rust-lang/rust/commit/330378d1a1a97be85f1150242da277c00b7270f5"}, {"sha": "b128ceb16127ec9c817595aaa64c025b9e5ed12e", "url": "https://api.github.com/repos/rust-lang/rust/commits/b128ceb16127ec9c817595aaa64c025b9e5ed12e", "html_url": "https://github.com/rust-lang/rust/commit/b128ceb16127ec9c817595aaa64c025b9e5ed12e"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "4815bc601f69acb2417fa09ebf03c2e75407fff7", "filename": "src/etc/tidy.py", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4a726f0573dcfcd01ae9b37266014df0e26f2e22/src%2Fetc%2Ftidy.py", "raw_url": "https://github.com/rust-lang/rust/raw/4a726f0573dcfcd01ae9b37266014df0e26f2e22/src%2Fetc%2Ftidy.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Ftidy.py?ref=4a726f0573dcfcd01ae9b37266014df0e26f2e22", "patch": "@@ -49,9 +49,9 @@ def do_license_check(name, contents):\n                     report_err(\"FIXME without issue number\")\n             if line.find(\"TODO\") != -1:\n                 report_err(\"TODO is deprecated; use FIXME\")\n-            idx = line.find(\"// NOTE\")\n-            if idx != -1:\n-                report_warn(\"NOTE\" + line[idx + len(\"// NOTE\"):])\n+            match = re.match(r'^.*//\\s*(NOTE.*)$', line)\n+            if match:\n+                report_warn(match.group(1))\n         if (line.find('\\t') != -1 and\n             fileinput.filename().find(\"Makefile\") == -1):\n             report_err(\"tab character\")"}]}