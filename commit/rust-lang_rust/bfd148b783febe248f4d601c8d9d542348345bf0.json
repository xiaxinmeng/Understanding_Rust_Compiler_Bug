{"sha": "bfd148b783febe248f4d601c8d9d542348345bf0", "node_id": "C_kwDOAAsO6NoAKGJmZDE0OGI3ODNmZWJlMjQ4ZjRkNjAxYzhkOWQ1NDIzNDgzNDViZjA", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2022-07-18T21:47:32Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2022-07-18T21:48:45Z"}, "message": "use env vars, not Cargo.toml, to configure out dev profile", "tree": {"sha": "f8387c1f5ef24090430c0aa22f82436abcc34075", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f8387c1f5ef24090430c0aa22f82436abcc34075"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bfd148b783febe248f4d601c8d9d542348345bf0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bfd148b783febe248f4d601c8d9d542348345bf0", "html_url": "https://github.com/rust-lang/rust/commit/bfd148b783febe248f4d601c8d9d542348345bf0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bfd148b783febe248f4d601c8d9d542348345bf0/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b9c677112a982fa91f8ff00d831e46fe613e715e", "url": "https://api.github.com/repos/rust-lang/rust/commits/b9c677112a982fa91f8ff00d831e46fe613e715e", "html_url": "https://github.com/rust-lang/rust/commit/b9c677112a982fa91f8ff00d831e46fe613e715e"}], "stats": {"total": 11, "additions": 8, "deletions": 3}, "files": [{"sha": "208b3a764436f67104c8e0e364213e311dfc2b58", "filename": "Cargo.toml", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/bfd148b783febe248f4d601c8d9d542348345bf0/Cargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/bfd148b783febe248f4d601c8d9d542348345bf0/Cargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.toml?ref=bfd148b783febe248f4d601c8d9d542348345bf0", "patch": "@@ -56,5 +56,6 @@ harness = false\n default = [\"stack-cache\"]\n stack-cache = []\n \n-[profile.dev]\n-opt-level = 2 # because it's too slow otherwise\n+# Be aware that this file is inside a workspace when used via the\n+# submodule in the rustc repo. That means there are many cargo features\n+# we cannot use, such as profiles."}, {"sha": "04d441b60780d959a167a3941723a9afcf816330", "filename": "miri", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/bfd148b783febe248f4d601c8d9d542348345bf0/miri", "raw_url": "https://github.com/rust-lang/rust/raw/bfd148b783febe248f4d601c8d9d542348345bf0/miri", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/miri?ref=bfd148b783febe248f4d601c8d9d542348345bf0", "patch": "@@ -96,10 +96,14 @@ fi\n \n # Prepare flags for cargo and rustc.\n CARGO=\"cargo +$TOOLCHAIN\"\n+# Share target dir between `miri` and `cargo-miri`.\n if [ -z \"$CARGO_TARGET_DIR\" ]; then\n-    # Share target dir between `miri` and `cargo-miri`.\n     export CARGO_TARGET_DIR=\"$MIRIDIR/target\"\n fi\n+# We configure dev builds to not be unusably slow.\n+if [ -z \"$CARGO_PROFILE_DEV_OPT_LEVEL\" ]; then\n+    export CARGO_PROFILE_DEV_OPT_LEVEL=2\n+fi\n # We set the rpath so that Miri finds the private rustc libraries it needs.\n export RUSTFLAGS=\"-C link-args=-Wl,-rpath,$LIBDIR $RUSTFLAGS\"\n "}]}