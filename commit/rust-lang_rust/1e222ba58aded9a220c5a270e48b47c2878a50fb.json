{"sha": "1e222ba58aded9a220c5a270e48b47c2878a50fb", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFlMjIyYmE1OGFkZWQ5YTIyMGM1YTI3MGU0OGI0N2MyODc4YTUwZmI=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2021-06-19T10:56:55Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2021-06-19T12:19:39Z"}, "message": "Update browser-ui-test version", "tree": {"sha": "13e66c525f364baa24f6f8475ae3543382b925c2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/13e66c525f364baa24f6f8475ae3543382b925c2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1e222ba58aded9a220c5a270e48b47c2878a50fb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1e222ba58aded9a220c5a270e48b47c2878a50fb", "html_url": "https://github.com/rust-lang/rust/commit/1e222ba58aded9a220c5a270e48b47c2878a50fb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1e222ba58aded9a220c5a270e48b47c2878a50fb/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9cf05f3614ef00c0da82b0594704aff213ab7c34", "url": "https://api.github.com/repos/rust-lang/rust/commits/9cf05f3614ef00c0da82b0594704aff213ab7c34", "html_url": "https://github.com/rust-lang/rust/commit/9cf05f3614ef00c0da82b0594704aff213ab7c34"}], "stats": {"total": 202, "additions": 101, "deletions": 101}, "files": [{"sha": "c33d5b4e4dc72255b409ee3843f4a8fa8d5893c2", "filename": "src/ci/docker/host-x86_64/x86_64-gnu-tools/Dockerfile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2FDockerfile?ref=1e222ba58aded9a220c5a270e48b47c2878a50fb", "patch": "@@ -71,7 +71,7 @@ ENV PATH=\"/node-v14.4.0-linux-x64/bin:${PATH}\"\n # https://github.com/puppeteer/puppeteer/issues/375\n #\n # We also specify the version in case we need to update it to go around cache limitations.\n-RUN npm install -g browser-ui-test@0.2.14 --unsafe-perm=true\n+RUN npm install -g browser-ui-test@0.3.0 --unsafe-perm=true\n \n ENV RUST_CONFIGURE_ARGS \\\n   --build=x86_64-unknown-linux-gnu \\"}, {"sha": "27deb2c989c8bde5f0ccc7a5864d45d1615d5c26", "filename": "src/test/rustdoc-gui/basic-code.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Fbasic-code.goml", "raw_url": "https://github.com/rust-lang/rust/raw/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Fbasic-code.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fbasic-code.goml?ref=1e222ba58aded9a220c5a270e48b47c2878a50fb", "patch": "@@ -1,3 +1,3 @@\n goto: file://|DOC_PATH|/test_docs/index.html\n click: \".srclink\"\n-assert: (\".line-numbers\", 1)\n+assert-count: (\".line-numbers\", 1)"}, {"sha": "94e3fe79c945180e779422dfc42e01aae7ebcb48", "filename": "src/test/rustdoc-gui/check_info_sign_position.goml", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Fcheck_info_sign_position.goml", "raw_url": "https://github.com/rust-lang/rust/raw/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Fcheck_info_sign_position.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fcheck_info_sign_position.goml?ref=1e222ba58aded9a220c5a270e48b47c2878a50fb", "patch": "@@ -2,8 +2,8 @@ goto: file://|DOC_PATH|/test_docs/index.html\n goto: ./fn.check_list_code_block.html\n // If the codeblock is the first element of the docblock, the information tooltip must have\n // have some top margin to avoid going over the toggle (the \"[+]\").\n-assert: (\".docblock > .information > .compile_fail\", { \"margin-top\": \"16px\" })\n+assert-css: (\".docblock > .information > .compile_fail\", { \"margin-top\": \"16px\" })\n // Checks that the other codeblocks don't have this top margin.\n-assert: (\"ol > li > .information > .compile_fail\", { \"margin-top\": \"0px\" })\n-assert: (\"ol > li > .information > .ignore\", { \"margin-top\": \"0px\" })\n-assert: (\".docblock > .information > .ignore\", { \"margin-top\": \"0px\" })\n+assert-css: (\"ol > li > .information > .compile_fail\", { \"margin-top\": \"0px\" })\n+assert-css: (\"ol > li > .information > .ignore\", { \"margin-top\": \"0px\" })\n+assert-css: (\".docblock > .information > .ignore\", { \"margin-top\": \"0px\" })"}, {"sha": "00326e9bbc4ccfd5d8cae0ea5182ba5958cf1fc1", "filename": "src/test/rustdoc-gui/code-sidebar-toggle.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Fcode-sidebar-toggle.goml", "raw_url": "https://github.com/rust-lang/rust/raw/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Fcode-sidebar-toggle.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fcode-sidebar-toggle.goml?ref=1e222ba58aded9a220c5a270e48b47c2878a50fb", "patch": "@@ -3,4 +3,4 @@ click: \".srclink\"\n click: \"#sidebar-toggle\"\n wait-for: 500\n fail: true\n-assert: (\"#source-sidebar\", { \"left\": \"-300px\" })\n+assert-css: (\"#source-sidebar\", { \"left\": \"-300px\" })"}, {"sha": "a81bd9a4c03904882405dfd0c312e8f1e164e996", "filename": "src/test/rustdoc-gui/escape-key.goml", "status": "modified", "additions": 13, "deletions": 13, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Fescape-key.goml", "raw_url": "https://github.com/rust-lang/rust/raw/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Fescape-key.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fescape-key.goml?ref=1e222ba58aded9a220c5a270e48b47c2878a50fb", "patch": "@@ -2,25 +2,25 @@ goto: file://|DOC_PATH|/test_docs/index.html\n // First, we check that the search results are hidden when the Escape key is pressed.\n write: (\".search-input\", \"test\")\n wait-for: \"#search > h1\" // The search element is empty before the first search \n-assert: (\"#search\", \"class\", \"content\")\n-assert: (\"#main\", \"class\", \"content hidden\")\n+assert-attr: (\"#search\", {\"class\": \"content\"})\n+assert-attr: (\"#main\", {\"class\": \"content hidden\"})\n press-key: \"Escape\"\n-assert: (\"#search\", \"class\", \"content hidden\")\n-assert: (\"#main\", \"class\", \"content\")\n+assert-attr: (\"#search\", {\"class\": \"content hidden\"})\n+assert-attr: (\"#main\", {\"class\": \"content\"})\n \n // Check that focusing the search input brings back the search results\n focus: \".search-input\"\n-assert: (\"#search\", \"class\", \"content\")\n-assert: (\"#main\", \"class\", \"content hidden\")\n+assert-attr: (\"#search\", {\"class\": \"content\"})\n+assert-attr: (\"#main\", {\"class\": \"content hidden\"})\n \n // Now let's check that when the help popup is displayed and we press Escape, it doesn't\n // hide the search results too.\n click: \"#help-button\"\n-assert: (\"#help\", \"class\", \"\")\n+assert-attr: (\"#help\", {\"class\": \"\"})\n press-key: \"Escape\"\n-assert: (\"#help\", \"class\", \"hidden\")\n-assert: (\"#search\", \"class\", \"content\")\n-assert: (\"#main\", \"class\", \"content hidden\")\n+assert-attr: (\"#help\", {\"class\": \"hidden\"})\n+assert-attr: (\"#search\", {\"class\": \"content\"})\n+assert-attr: (\"#main\", {\"class\": \"content hidden\"})\n \n // Check that Escape hides the search results when a search result is focused.\n focus: \".search-input\"\n@@ -29,6 +29,6 @@ press-key: \"ArrowDown\"\n assert-false: \".search-input:focus\"\n assert: \"#results a:focus\"\n press-key: \"Escape\"\n-assert: (\"#help\", \"class\", \"hidden\")\n-assert: (\"#search\", \"class\", \"content hidden\")\n-assert: (\"#main\", \"class\", \"content\")\n+assert-attr: (\"#help\", {\"class\": \"hidden\"})\n+assert-attr: (\"#search\", {\"class\": \"content hidden\"})\n+assert-attr: (\"#main\", {\"class\": \"content\"})"}, {"sha": "806181121033035dee597a2751bff0a9fe2da915", "filename": "src/test/rustdoc-gui/font-weight.goml", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Ffont-weight.goml", "raw_url": "https://github.com/rust-lang/rust/raw/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Ffont-weight.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Ffont-weight.goml?ref=1e222ba58aded9a220c5a270e48b47c2878a50fb", "patch": "@@ -1,7 +1,7 @@\n goto: file://|DOC_PATH|/lib2/struct.Foo.html\n // This test checks that the font weight is correctly applied.\n-assert: (\"//*[@class='docblock type-decl']//a[text()='Alias']\", {\"font-weight\": \"400\"})\n-assert: (\"//*[@class='structfield small-section-header']//a[text()='Alias']\", {\"font-weight\": \"400\"})\n-assert: (\"#method\\.a_method > code\", {\"font-weight\": \"600\"})\n-assert: (\"#associatedtype\\.X > code\", {\"font-weight\": \"600\"})\n-assert: (\"#associatedconstant\\.Y > code\", {\"font-weight\": \"600\"})\n+assert-css: (\"//*[@class='docblock type-decl']//a[text()='Alias']\", {\"font-weight\": \"400\"})\n+assert-css: (\"//*[@class='structfield small-section-header']//a[text()='Alias']\", {\"font-weight\": \"400\"})\n+assert-css: (\"#method\\.a_method > code\", {\"font-weight\": \"600\"})\n+assert-css: (\"#associatedtype\\.X > code\", {\"font-weight\": \"600\"})\n+assert-css: (\"#associatedconstant\\.Y > code\", {\"font-weight\": \"600\"})"}, {"sha": "62c1f200123460b7493fd7fb544b2ba232d0f495", "filename": "src/test/rustdoc-gui/hash-item-expansion.goml", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Fhash-item-expansion.goml", "raw_url": "https://github.com/rust-lang/rust/raw/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Fhash-item-expansion.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fhash-item-expansion.goml?ref=1e222ba58aded9a220c5a270e48b47c2878a50fb", "patch": "@@ -1,15 +1,15 @@\n // This test ensures that the element corresponding to the hash is displayed.\n goto: file://|DOC_PATH|/test_docs/struct.Foo.html#method.borrow\n // In the blanket implementations list, \"Borrow\" is the second one, hence the \":nth(2)\".\n-assert: (\"#blanket-implementations-list > details:nth-child(2)\", \"open\", \"\")\n+assert-attr: (\"#blanket-implementations-list > details:nth-child(2)\", {\"open\": \"\"})\n // We first check that the impl block is open by default.\n-assert: (\"#implementations + details\", \"open\", \"\")\n+assert-attr: (\"#implementations + details\", {\"open\": \"\"})\n // We collapse it.\n click: \"#implementations + details > summary\"\n // We check that it was collapsed as expected.\n-assert-false: (\"#implementations + details\", \"open\", \"\")\n+assert-attr-false: (\"#implementations + details\", {\"open\": \"\"})\n // To ensure that we will click on the currently hidden method.\n-assert: (\".sidebar-links > a\", \"must_use\")\n+assert-text: (\".sidebar-links > a\", \"must_use\")\n click: \".sidebar-links > a\"\n // We check that the impl block was opened as expected so that we can see the method.\n-assert: (\"#implementations + details\", \"open\", \"\")\n+assert-attr: (\"#implementations + details\", {\"open\": \"\"})"}, {"sha": "266b66d586fe0685f49e974d24ed2afdef57398a", "filename": "src/test/rustdoc-gui/impl-default-expansion.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Fimpl-default-expansion.goml", "raw_url": "https://github.com/rust-lang/rust/raw/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Fimpl-default-expansion.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fimpl-default-expansion.goml?ref=1e222ba58aded9a220c5a270e48b47c2878a50fb", "patch": "@@ -1,3 +1,3 @@\n // This test ensures that the impl blocks are open by default.\n goto: file://|DOC_PATH|/test_docs/struct.Foo.html\n-assert: (\"#main > details.implementors-toggle\", \"open\", \"\")\n+assert-attr: (\"#main > details.implementors-toggle\", {\"open\": \"\"})"}, {"sha": "6ed62006151a216fad74811d036f436e530f2efc", "filename": "src/test/rustdoc-gui/search-result-colors.goml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Fsearch-result-colors.goml", "raw_url": "https://github.com/rust-lang/rust/raw/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Fsearch-result-colors.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsearch-result-colors.goml?ref=1e222ba58aded9a220c5a270e48b47c2878a50fb", "patch": "@@ -10,5 +10,5 @@ write: (\".search-input\", \"thisisanalias\")\n // Waiting for the search results to appear...\n wait-for: \"#titles\"\n // Checking that the colors for the alias element are the ones expected.\n-assert: (\".result-name > .alias\", {\"color\": \"rgb(255, 255, 255)\"})\n-assert: (\".result-name > .alias > .grey\", {\"color\": \"rgb(204, 204, 204)\"})\n+assert-css: (\".result-name > .alias\", {\"color\": \"rgb(255, 255, 255)\"})\n+assert-css: (\".result-name > .alias > .grey\", {\"color\": \"rgb(204, 204, 204)\"})"}, {"sha": "d8cb6ee5731b9724060bb8cfeb52a64a03b2d4b7", "filename": "src/test/rustdoc-gui/search-result-description.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Fsearch-result-description.goml", "raw_url": "https://github.com/rust-lang/rust/raw/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Fsearch-result-description.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsearch-result-description.goml?ref=1e222ba58aded9a220c5a270e48b47c2878a50fb", "patch": "@@ -2,4 +2,4 @@\n goto: file://|DOC_PATH|/test_docs/index.html?search=some_more_function\n // Waiting for the search results to appear...\n wait-for: \"#titles\"\n-assert: (\".search-results .desc code\", \"format!\")\n+assert-text: (\".search-results .desc code\", \"format!\")"}, {"sha": "ea94e5640fbd1bcb5ccbe09ee28ea00318440f0b", "filename": "src/test/rustdoc-gui/search-result-display.goml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Fsearch-result-display.goml", "raw_url": "https://github.com/rust-lang/rust/raw/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Fsearch-result-display.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsearch-result-display.goml?ref=1e222ba58aded9a220c5a270e48b47c2878a50fb", "patch": "@@ -5,8 +5,8 @@ write: (\".search-input\", \"test\")\n wait-for: \"#titles\"\n // The width is returned by \"getComputedStyle\" which returns the exact number instead of the\n // CSS rule which is \"50%\"...\n-assert: (\".search-results div.desc\", {\"width\": \"320px\"})\n+assert-css: (\".search-results div.desc\", {\"width\": \"320px\"})\n size: (600, 100)\n // As counter-intuitive as it may seem, in this width, the width is \"100%\", which is why\n // when computed it's larger.\n-assert: (\".search-results div.desc\", {\"width\": \"570px\"})\n+assert-css: (\".search-results div.desc\", {\"width\": \"570px\"})"}, {"sha": "5342d431d992f3ebcdf7fb66feae780417cee66b", "filename": "src/test/rustdoc-gui/search-result-keyword.goml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Fsearch-result-keyword.goml", "raw_url": "https://github.com/rust-lang/rust/raw/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Fsearch-result-keyword.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsearch-result-keyword.goml?ref=1e222ba58aded9a220c5a270e48b47c2878a50fb", "patch": "@@ -6,5 +6,5 @@ wait-for: \"#titles\"\n // less good.\n //\n // Checking that the CSS is displaying \" (keyword)\" in italic.\n-assert: (\".result-name span.keyword > i\", \"(keyword)\")\n-assert: (\".result-name span.keyword\", \"CookieMonster (keyword)\")\n+assert-text: (\".result-name span.keyword > i\", \"(keyword)\")\n+assert-text: (\".result-name span.keyword\", \"CookieMonster (keyword)\")"}, {"sha": "88a0b340415b2b8259bfc9c474db2704dbb02f78", "filename": "src/test/rustdoc-gui/search-tab-selection-if-current-is-empty.goml", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Fsearch-tab-selection-if-current-is-empty.goml", "raw_url": "https://github.com/rust-lang/rust/raw/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Fsearch-tab-selection-if-current-is-empty.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsearch-tab-selection-if-current-is-empty.goml?ref=1e222ba58aded9a220c5a270e48b47c2878a50fb", "patch": "@@ -2,20 +2,20 @@ goto: file://|DOC_PATH|/test_docs/index.html\n write: (\".search-input\", \"Foo\")\n // Waiting for the search results to appear...\n wait-for: \"#titles\"\n-assert: (\"#titles > button:nth-of-type(1)\", \"class\", \"selected\")\n+assert-attr: (\"#titles > button:nth-of-type(1)\", {\"class\": \"selected\"})\n \n // To go back to the original \"state\"\n goto: file://|DOC_PATH|/test_docs/index.html\n write: (\".search-input\", \"-> String\")\n // Waiting for the search results to appear...\n wait-for: \"#titles\"\n // With this search, only the last tab shouldn't be empty so it should be selected.\n-assert: (\"#titles > button:nth-of-type(3)\", \"class\", \"selected\")\n+assert-attr: (\"#titles > button:nth-of-type(3)\", {\"class\": \"selected\"})\n \n // To go back to the original \"state\"\n goto: file://|DOC_PATH|/test_docs/index.html\n write: (\".search-input\", \"-> Something\")\n // Waiting for the search results to appear...\n wait-for: \"#titles\"\n // With this search, all the tabs are empty so the first one should remain selected.\n-assert: (\"#titles > button:nth-of-type(1)\", \"class\", \"selected\")\n+assert-attr: (\"#titles > button:nth-of-type(1)\", {\"class\": \"selected\"})"}, {"sha": "42d945d0eb81700a5c9d09771cc637ff3454ced6", "filename": "src/test/rustdoc-gui/shortcuts.goml", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Fshortcuts.goml", "raw_url": "https://github.com/rust-lang/rust/raw/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Fshortcuts.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fshortcuts.goml?ref=1e222ba58aded9a220c5a270e48b47c2878a50fb", "patch": "@@ -8,19 +8,19 @@ press-key: \"Escape\"\n assert-false: \"input.search-input:focus\"\n // We now check for the help popup.\n press-key: \"?\"\n-assert: (\"#help\", {\"display\": \"flex\"})\n+assert-css: (\"#help\", {\"display\": \"flex\"})\n assert-false: \"#help.hidden\"\n press-key: \"Escape\"\n-assert: (\"#help.hidden\", {\"display\": \"none\"})\n+assert-css: (\"#help.hidden\", {\"display\": \"none\"})\n // Check for the themes list.\n-assert: (\"#theme-choices\", {\"display\": \"none\"})\n+assert-css: (\"#theme-choices\", {\"display\": \"none\"})\n press-key: \"t\"\n-assert: (\"#theme-choices\", {\"display\": \"block\"})\n+assert-css: (\"#theme-choices\", {\"display\": \"block\"})\n press-key: \"t\"\n // We ensure that 't' hides back the menu.\n-assert: (\"#theme-choices\", {\"display\": \"none\"})\n+assert-css: (\"#theme-choices\", {\"display\": \"none\"})\n press-key: \"t\"\n-assert: (\"#theme-choices\", {\"display\": \"block\"})\n+assert-css: (\"#theme-choices\", {\"display\": \"block\"})\n press-key: \"Escape\"\n // We ensure that 'Escape' hides the menu too.\n-assert: (\"#theme-choices\", {\"display\": \"none\"})\n+assert-css: (\"#theme-choices\", {\"display\": \"none\"})"}, {"sha": "4f6b3aded18163f61be573c1b1cee5db6091665a", "filename": "src/test/rustdoc-gui/sidebar.goml", "status": "modified", "additions": 27, "deletions": 27, "changes": 54, "blob_url": "https://github.com/rust-lang/rust/blob/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Fsidebar.goml", "raw_url": "https://github.com/rust-lang/rust/raw/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Fsidebar.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsidebar.goml?ref=1e222ba58aded9a220c5a270e48b47c2878a50fb", "patch": "@@ -1,23 +1,23 @@\n goto: file://|DOC_PATH|/test_docs/index.html\n-assert: (\".sidebar > .location\", \"Crate test_docs\")\n+assert-text: (\".sidebar > .location\", \"Crate test_docs\")\n // In modules, we only have one \"location\" element.\n-assert: (\".sidebar .location\", 1)\n-assert: (\".sidebar-elems > #all-types\", \"See all test_docs's items\")\n+assert-count: (\".sidebar .location\", 1)\n+assert-text: (\".sidebar-elems > #all-types\", \"See all test_docs's items\")\n // We check that we have the crates list and that the \"current\" on is \"test_docs\".\n-assert: (\".sidebar-elems > .crate > ul > li > a.current\", \"test_docs\")\n+assert-text: (\".sidebar-elems > .crate > ul > li > a.current\", \"test_docs\")\n // And we're also supposed to have the list of items in the current module.\n-assert: (\".sidebar-elems > .items > ul > li:nth-child(1)\", \"Modules\")\n-assert: (\".sidebar-elems > .items > ul > li:nth-child(2)\", \"Structs\")\n-assert: (\".sidebar-elems > .items > ul > li:nth-child(3)\", \"Enums\")\n-assert: (\".sidebar-elems > .items > ul > li:nth-child(4)\", \"Traits\")\n-assert: (\".sidebar-elems > .items > ul > li:nth-child(5)\", \"Functions\")\n-assert: (\".sidebar-elems > .items > ul > li:nth-child(6)\", \"Type Definitions\")\n-assert: (\".sidebar-elems > .items > ul > li:nth-child(7)\", \"Keywords\")\n-assert: (\"#structs + table td > a\", \"Foo\")\n+assert-text: (\".sidebar-elems > .items > ul > li:nth-child(1)\", \"Modules\")\n+assert-text: (\".sidebar-elems > .items > ul > li:nth-child(2)\", \"Structs\")\n+assert-text: (\".sidebar-elems > .items > ul > li:nth-child(3)\", \"Enums\")\n+assert-text: (\".sidebar-elems > .items > ul > li:nth-child(4)\", \"Traits\")\n+assert-text: (\".sidebar-elems > .items > ul > li:nth-child(5)\", \"Functions\")\n+assert-text: (\".sidebar-elems > .items > ul > li:nth-child(6)\", \"Type Definitions\")\n+assert-text: (\".sidebar-elems > .items > ul > li:nth-child(7)\", \"Keywords\")\n+assert-text: (\"#structs + table td > a\", \"Foo\")\n click: \"#structs + table td > a\"\n \n // PAGE: struct.Foo.html\n-assert: (\".sidebar .location\", 2)\n+assert-count: (\".sidebar .location\", 2)\n // We check that there is no crate listed outside of the top level.\n assert-false: \".sidebar-elems > .crate\"\n // We now go back to the crate page to click on the \"lib2\" crate link.\n@@ -26,35 +26,35 @@ click: \".sidebar-elems > .crate > ul > li:first-child > a\"\n \n // PAGE: lib2/index.html\n goto: file://|DOC_PATH|/lib2/index.html\n-assert: (\".sidebar > .location\", \"Crate lib2\")\n+assert-text: (\".sidebar > .location\", \"Crate lib2\")\n // We check that we have the crates list and that the \"current\" on is now \"lib2\".\n-assert: (\".sidebar-elems > .crate > ul > li > a.current\", \"lib2\")\n+assert-text: (\".sidebar-elems > .crate > ul > li > a.current\", \"lib2\")\n // We now go to the \"foobar\" function page.\n-assert: (\".sidebar-elems > .items > ul > li:nth-child(1)\", \"Modules\")\n-assert: (\".sidebar-elems > .items > ul > li:nth-child(2)\", \"Structs\")\n-assert: (\".sidebar-elems > .items > ul > li:nth-child(3)\", \"Traits\")\n-assert: (\".sidebar-elems > .items > ul > li:nth-child(4)\", \"Functions\")\n-assert: (\".sidebar-elems > .items > ul > li:nth-child(5)\", \"Type Definitions\")\n-assert:\t(\"#functions + table td > a\", \"foobar\")\n+assert-text: (\".sidebar-elems > .items > ul > li:nth-child(1)\", \"Modules\")\n+assert-text: (\".sidebar-elems > .items > ul > li:nth-child(2)\", \"Structs\")\n+assert-text: (\".sidebar-elems > .items > ul > li:nth-child(3)\", \"Traits\")\n+assert-text: (\".sidebar-elems > .items > ul > li:nth-child(4)\", \"Functions\")\n+assert-text: (\".sidebar-elems > .items > ul > li:nth-child(5)\", \"Type Definitions\")\n+assert-text: (\"#functions + table td > a\", \"foobar\")\n click: \"#functions + table td > a\"\n \n // PAGE: fn.foobar.html\n // In items containing no items (like functions or constants) and in modules, we have one\n // \"location\" elements.\n-assert: (\".sidebar .location\", 1)\n+assert-count: (\".sidebar .location\", 1)\n // There is a \"<br>\" tag between \"in\" and \"lib2\", but it doesn't count as a space.\n-assert: (\".sidebar .sidebar-elems .location\", \"Other items inlib2\")\n+assert-text: (\".sidebar .sidebar-elems .location\", \"Other items inlib2\")\n // We check that we don't have the crate list.\n assert-false: \".sidebar-elems > .crate\"\n \n goto: ./module/index.html\n-assert: (\".sidebar > .location\", \"Module module\")\n+assert-text: (\".sidebar > .location\", \"Module module\")\n // We check that we don't have the crate list.\n assert-false: \".sidebar-elems > .crate\"\n \n goto: ./sub_module/sub_sub_module/index.html\n-assert: (\".sidebar > .location\", \"Module sub_sub_module\")\n+assert-text: (\".sidebar > .location\", \"Module sub_sub_module\")\n // We check that we don't have the crate list.\n assert-false: \".sidebar-elems > .crate\"\n-assert: (\".sidebar-elems > .items > ul > li:nth-child(1)\", \"Functions\")\n-assert: (\"#functions + table td > a\", \"foo\")\n+assert-text: (\".sidebar-elems > .items > ul > li:nth-child(1)\", \"Functions\")\n+assert-text: (\"#functions + table td > a\", \"foo\")"}, {"sha": "20396e268958a9c39806f5be860c5d9eaadccfb8", "filename": "src/test/rustdoc-gui/source-code-page.goml", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Fsource-code-page.goml", "raw_url": "https://github.com/rust-lang/rust/raw/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Fsource-code-page.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsource-code-page.goml?ref=1e222ba58aded9a220c5a270e48b47c2878a50fb", "patch": "@@ -3,11 +3,11 @@ goto: file://|DOC_PATH|/src/test_docs/lib.rs.html\n click: (40, 224) // This is the position of the span for line 4.\n // Unfortunately, \"#4\" isn't a valid query selector, so we have to go around that limitation\n // by instead getting the nth span.\n-assert: (\".line-numbers > span:nth-child(4)\", \"class\", \"line-highlighted\")\n+assert-attr: (\".line-numbers > span:nth-child(4)\", {\"class\": \"line-highlighted\"})\n // We now check that the good spans are highlighted\n goto: file://|DOC_PATH|/src/test_docs/lib.rs.html#4-6\n-assert-false: (\".line-numbers > span:nth-child(3)\", \"class\", \"line-highlighted\")\n-assert: (\".line-numbers > span:nth-child(4)\", \"class\", \"line-highlighted\")\n-assert: (\".line-numbers > span:nth-child(5)\", \"class\", \"line-highlighted\")\n-assert: (\".line-numbers > span:nth-child(6)\", \"class\", \"line-highlighted\")\n-assert-false: (\".line-numbers > span:nth-child(7)\", \"class\", \"line-highlighted\")\n+assert-attr-false: (\".line-numbers > span:nth-child(3)\", {\"class\": \"line-highlighted\"})\n+assert-attr: (\".line-numbers > span:nth-child(4)\", {\"class\": \"line-highlighted\"})\n+assert-attr: (\".line-numbers > span:nth-child(5)\", {\"class\": \"line-highlighted\"})\n+assert-attr: (\".line-numbers > span:nth-child(6)\", {\"class\": \"line-highlighted\"})\n+assert-attr-false: (\".line-numbers > span:nth-child(7)\", {\"class\": \"line-highlighted\"})"}, {"sha": "5221cda2f1fb6bb96f7a699e508646ae053dea0a", "filename": "src/test/rustdoc-gui/theme-change.goml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Ftheme-change.goml", "raw_url": "https://github.com/rust-lang/rust/raw/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Ftheme-change.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Ftheme-change.goml?ref=1e222ba58aded9a220c5a270e48b47c2878a50fb", "patch": "@@ -3,8 +3,8 @@ click: \"#theme-picker\"\n click: \"#theme-choices > button:first-child\"\n wait-for: 500\n // should be the ayu theme so let's check the color\n-assert: (\"body\", { \"background-color\": \"rgb(15, 20, 25)\" })\n+assert-css: (\"body\", { \"background-color\": \"rgb(15, 20, 25)\" })\n click: \"#theme-choices > button:last-child\"\n wait-for: 500\n // should be the light theme so let's check the color\n-assert: (\"body\", { \"background-color\": \"rgb(255, 255, 255)\" })\n+assert-css: (\"body\", { \"background-color\": \"rgb(255, 255, 255)\" })"}, {"sha": "9ec91aba881cbe34dc2445b8418d7075b11e9112", "filename": "src/test/rustdoc-gui/toggle-docs-mobile.goml", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Ftoggle-docs-mobile.goml", "raw_url": "https://github.com/rust-lang/rust/raw/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Ftoggle-docs-mobile.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Ftoggle-docs-mobile.goml?ref=1e222ba58aded9a220c5a270e48b47c2878a50fb", "patch": "@@ -1,21 +1,21 @@\n goto: file://|DOC_PATH|/test_docs/struct.Foo.html\n size: (433, 600)\n-assert: (\".top-doc\", \"open\", \"\")\n+assert-attr: (\".top-doc\", {\"open\": \"\"})\n click: (4, 280) // This is the position of the top doc comment toggle\n-assert-false: (\".top-doc\", \"open\", \"\")\n+assert-attr-false: (\".top-doc\", {\"open\": \"\"})\n click: (4, 280)\n-assert: (\".top-doc\", \"open\", \"\")\n+assert-attr: (\".top-doc\", {\"open\": \"\"})\n // To ensure that the toggle isn't over the text, we check that the toggle isn't clicked.\n click: (3, 280)\n-assert: (\".top-doc\", \"open\", \"\")\n+assert-attr: (\".top-doc\", {\"open\": \"\"})\n \n // Now we do the same but with a little bigger width\n size: (600, 600)\n-assert: (\".top-doc\", \"open\", \"\")\n+assert-attr: (\".top-doc\", {\"open\": \"\"})\n click: (4, 240) // New Y position since all search elements are back on one line.\n-assert-false: (\".top-doc\", \"open\", \"\")\n+assert-attr-false: (\".top-doc\", {\"open\": \"\"})\n click: (4, 240)\n-assert: (\".top-doc\", \"open\", \"\")\n+assert-attr: (\".top-doc\", {\"open\": \"\"})\n // To ensure that the toggle isn't over the text, we check that the toggle isn't clicked.\n click: (3, 240)\n-assert: (\".top-doc\", \"open\", \"\")\n+assert-attr: (\".top-doc\", {\"open\": \"\"})"}, {"sha": "601998b7bd28ac26dc9b2f5a5a8eb84da4e67d52", "filename": "src/test/rustdoc-gui/toggle-docs.goml", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Ftoggle-docs.goml", "raw_url": "https://github.com/rust-lang/rust/raw/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Ftoggle-docs.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Ftoggle-docs.goml?ref=1e222ba58aded9a220c5a270e48b47c2878a50fb", "patch": "@@ -1,10 +1,10 @@\n goto: file://|DOC_PATH|/test_docs/index.html\n-assert: (\"#main > details.top-doc\", \"open\", \"\")\n+assert-attr: (\"#main > details.top-doc\", {\"open\": \"\"})\n click: \"#toggle-all-docs\"\n wait-for: 1000\n // This is now collapsed so there shouldn't be the \"open\" attribute on details.\n-assert-false: (\"#main > details.top-doc\", \"open\", \"\")\n+assert-attr-false: (\"#main > details.top-doc\", {\"open\": \"\"})\n click: \"#toggle-all-docs\"\n wait-for: 1000\n // Not collapsed anymore so the \"open\" attribute should be back.\n-assert: (\"#main > details.top-doc\", \"open\", \"\")\n+assert-attr: (\"#main > details.top-doc\", {\"open\": \"\"})"}, {"sha": "d8615c207b2faef043c4cdae3946fd7875afc8ee", "filename": "src/test/rustdoc-gui/toggled-open-implementations.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Ftoggled-open-implementations.goml", "raw_url": "https://github.com/rust-lang/rust/raw/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Ftoggled-open-implementations.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Ftoggled-open-implementations.goml?ref=1e222ba58aded9a220c5a270e48b47c2878a50fb", "patch": "@@ -2,4 +2,4 @@\n // has all the implementations toggled open by default, so users can\n // find method names in those implementations with Ctrl-F.\n goto: file://|DOC_PATH|/test_docs/struct.Foo.html\n-assert: (\".rustdoc-toggle.implementors-toggle\", \"open\", \"\")\n+assert-attr: (\".rustdoc-toggle.implementors-toggle\", {\"open\": \"\"})"}, {"sha": "739745792c2a193ab08d053b506335b38299e343", "filename": "src/test/rustdoc-gui/trait-sidebar-item-order.goml", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Ftrait-sidebar-item-order.goml", "raw_url": "https://github.com/rust-lang/rust/raw/1e222ba58aded9a220c5a270e48b47c2878a50fb/src%2Ftest%2Frustdoc-gui%2Ftrait-sidebar-item-order.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Ftrait-sidebar-item-order.goml?ref=1e222ba58aded9a220c5a270e48b47c2878a50fb", "patch": "@@ -1,7 +1,7 @@\n goto: file://|DOC_PATH|/test_docs/trait.AnotherOne.html\n-assert: (\".sidebar-links a:nth-of-type(1)\", \"another\")\n-assert: (\".sidebar-links a:nth-of-type(2)\", \"func1\")\n-assert: (\".sidebar-links a:nth-of-type(3)\", \"func2\")\n-assert: (\".sidebar-links a:nth-of-type(4)\", \"func3\")\n-assert: (\".sidebar-links a:nth-of-type(5)\", \"hello\")\n-assert: (\".sidebar-links a:nth-of-type(6)\", \"why_not\")\n+assert-text: (\".sidebar-links a:nth-of-type(1)\", \"another\")\n+assert-text: (\".sidebar-links a:nth-of-type(2)\", \"func1\")\n+assert-text: (\".sidebar-links a:nth-of-type(3)\", \"func2\")\n+assert-text: (\".sidebar-links a:nth-of-type(4)\", \"func3\")\n+assert-text: (\".sidebar-links a:nth-of-type(5)\", \"hello\")\n+assert-text: (\".sidebar-links a:nth-of-type(6)\", \"why_not\")"}]}