{"sha": "1f3676f7d003cd43d69dc02c25167dadcf5a4aad", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFmMzY3NmY3ZDAwM2NkNDNkNjlkYzAyYzI1MTY3ZGFkY2Y1YTRhYWQ=", "commit": {"author": {"name": "daubaris", "email": "paulius.daubaris@gmail.com", "date": "2018-09-03T15:24:47Z"}, "committer": {"name": "daubaris", "email": "paulius.daubaris@gmail.com", "date": "2018-09-03T15:24:47Z"}, "message": "Merge branch 'master' of https://github.com/rust-lang-nursery/rust-clippy into range-plus-one", "tree": {"sha": "2e1b4da356e08fc9fe941ed29e6f0b4906684e2c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2e1b4da356e08fc9fe941ed29e6f0b4906684e2c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1f3676f7d003cd43d69dc02c25167dadcf5a4aad", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1f3676f7d003cd43d69dc02c25167dadcf5a4aad", "html_url": "https://github.com/rust-lang/rust/commit/1f3676f7d003cd43d69dc02c25167dadcf5a4aad", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1f3676f7d003cd43d69dc02c25167dadcf5a4aad/comments", "author": {"login": "daubaris", "id": 16244425, "node_id": "MDQ6VXNlcjE2MjQ0NDI1", "avatar_url": "https://avatars.githubusercontent.com/u/16244425?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daubaris", "html_url": "https://github.com/daubaris", "followers_url": "https://api.github.com/users/daubaris/followers", "following_url": "https://api.github.com/users/daubaris/following{/other_user}", "gists_url": "https://api.github.com/users/daubaris/gists{/gist_id}", "starred_url": "https://api.github.com/users/daubaris/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daubaris/subscriptions", "organizations_url": "https://api.github.com/users/daubaris/orgs", "repos_url": "https://api.github.com/users/daubaris/repos", "events_url": "https://api.github.com/users/daubaris/events{/privacy}", "received_events_url": "https://api.github.com/users/daubaris/received_events", "type": "User", "site_admin": false}, "committer": {"login": "daubaris", "id": 16244425, "node_id": "MDQ6VXNlcjE2MjQ0NDI1", "avatar_url": "https://avatars.githubusercontent.com/u/16244425?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daubaris", "html_url": "https://github.com/daubaris", "followers_url": "https://api.github.com/users/daubaris/followers", "following_url": "https://api.github.com/users/daubaris/following{/other_user}", "gists_url": "https://api.github.com/users/daubaris/gists{/gist_id}", "starred_url": "https://api.github.com/users/daubaris/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daubaris/subscriptions", "organizations_url": "https://api.github.com/users/daubaris/orgs", "repos_url": "https://api.github.com/users/daubaris/repos", "events_url": "https://api.github.com/users/daubaris/events{/privacy}", "received_events_url": "https://api.github.com/users/daubaris/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b825578a4a1049f0a29205e35c61f0f47e3ae6dc", "url": "https://api.github.com/repos/rust-lang/rust/commits/b825578a4a1049f0a29205e35c61f0f47e3ae6dc", "html_url": "https://github.com/rust-lang/rust/commit/b825578a4a1049f0a29205e35c61f0f47e3ae6dc"}, {"sha": "c0513097ab648f497e18e565bf00b71edd60c65c", "url": "https://api.github.com/repos/rust-lang/rust/commits/c0513097ab648f497e18e565bf00b71edd60c65c", "html_url": "https://github.com/rust-lang/rust/commit/c0513097ab648f497e18e565bf00b71edd60c65c"}], "stats": {"total": 16, "additions": 15, "deletions": 1}, "files": [{"sha": "e7c90f041889a591627fc3053f295428397ec167", "filename": "clippy_lints/src/default_trait_access.rs", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/1f3676f7d003cd43d69dc02c25167dadcf5a4aad/clippy_lints%2Fsrc%2Fdefault_trait_access.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f3676f7d003cd43d69dc02c25167dadcf5a4aad/clippy_lints%2Fsrc%2Fdefault_trait_access.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fdefault_trait_access.rs?ref=1f3676f7d003cd43d69dc02c25167dadcf5a4aad", "patch": "@@ -48,6 +48,17 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for DefaultTraitAccess {\n             then {\n                 match qpath {\n                     QPath::Resolved(..) => {\n+                        if_chain! {\n+                            // Detect and ignore <Foo as Default>::default() because these calls do\n+                            // explicitly name the type.\n+                            if let ExprKind::Call(ref method, ref _args) = expr.node;\n+                            if let ExprKind::Path(ref p) = method.node;\n+                            if let QPath::Resolved(Some(_ty), _path) = p;\n+                            then {\n+                                return;\n+                            }\n+                        }\n+\n                         // TODO: Work out a way to put \"whatever the imported way of referencing\n                         // this type in this file\" rather than a fully-qualified type.\n                         let expr_ty = cx.tables.expr_ty(expr);"}, {"sha": "248b4ec0066ee2090d7032a8d0884a09baa9ddc7", "filename": "tests/ui/default_trait_access.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/1f3676f7d003cd43d69dc02c25167dadcf5a4aad/tests%2Fui%2Fdefault_trait_access.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f3676f7d003cd43d69dc02c25167dadcf5a4aad/tests%2Fui%2Fdefault_trait_access.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdefault_trait_access.rs?ref=1f3676f7d003cd43d69dc02c25167dadcf5a4aad", "patch": "@@ -43,8 +43,10 @@ fn main() {\n \n     let s18 = TupleStructDerivedDefault::default();\n \n+    let s19 = <DerivedDefault as Default>::default();\n+\n     println!(\n-        \"[{}] [{}] [{}] [{}] [{}] [{}] [{}] [{}] [{}] [{:?}] [{:?}] [{:?}] [{:?}] [{:?}] [{:?}] [{:?}] [{:?}] [{:?}]\",\n+        \"[{}] [{}] [{}] [{}] [{}] [{}] [{}] [{}] [{}] [{:?}] [{:?}] [{:?}] [{:?}] [{:?}] [{:?}] [{:?}] [{:?}] [{:?}], [{:?}]\",\n         s1,\n         s2,\n         s3,\n@@ -63,6 +65,7 @@ fn main() {\n         s16,\n         s17,\n         s18,\n+        s19,\n     );\n }\n "}]}