{"sha": "8f008ba4eed563cc2995509048ae638a64426a96", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhmMDA4YmE0ZWVkNTYzY2MyOTk1NTA5MDQ4YWU2MzhhNjQ0MjZhOTY=", "commit": {"author": {"name": "Corey Farwell", "email": "coreyf@rwell.org", "date": "2016-03-14T03:24:03Z"}, "committer": {"name": "Corey Farwell", "email": "coreyf@rwell.org", "date": "2016-03-14T18:43:16Z"}, "message": "Clean up cloning logic in compiletest.rs.", "tree": {"sha": "f902ce9cec1099f8b77d220135f5711d8ed78b46", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f902ce9cec1099f8b77d220135f5711d8ed78b46"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8f008ba4eed563cc2995509048ae638a64426a96", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8f008ba4eed563cc2995509048ae638a64426a96", "html_url": "https://github.com/rust-lang/rust/commit/8f008ba4eed563cc2995509048ae638a64426a96", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8f008ba4eed563cc2995509048ae638a64426a96/comments", "author": {"login": "frewsxcv", "id": 416575, "node_id": "MDQ6VXNlcjQxNjU3NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/416575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/frewsxcv", "html_url": "https://github.com/frewsxcv", "followers_url": "https://api.github.com/users/frewsxcv/followers", "following_url": "https://api.github.com/users/frewsxcv/following{/other_user}", "gists_url": "https://api.github.com/users/frewsxcv/gists{/gist_id}", "starred_url": "https://api.github.com/users/frewsxcv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/frewsxcv/subscriptions", "organizations_url": "https://api.github.com/users/frewsxcv/orgs", "repos_url": "https://api.github.com/users/frewsxcv/repos", "events_url": "https://api.github.com/users/frewsxcv/events{/privacy}", "received_events_url": "https://api.github.com/users/frewsxcv/received_events", "type": "User", "site_admin": false}, "committer": {"login": "frewsxcv", "id": 416575, "node_id": "MDQ6VXNlcjQxNjU3NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/416575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/frewsxcv", "html_url": "https://github.com/frewsxcv", "followers_url": "https://api.github.com/users/frewsxcv/followers", "following_url": "https://api.github.com/users/frewsxcv/following{/other_user}", "gists_url": "https://api.github.com/users/frewsxcv/gists{/gist_id}", "starred_url": "https://api.github.com/users/frewsxcv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/frewsxcv/subscriptions", "organizations_url": "https://api.github.com/users/frewsxcv/orgs", "repos_url": "https://api.github.com/users/frewsxcv/repos", "events_url": "https://api.github.com/users/frewsxcv/events{/privacy}", "received_events_url": "https://api.github.com/users/frewsxcv/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "170f4708bb48234a2f1a089342b31a424ac94fa9", "url": "https://api.github.com/repos/rust-lang/rust/commits/170f4708bb48234a2f1a089342b31a424ac94fa9", "html_url": "https://github.com/rust-lang/rust/commit/170f4708bb48234a2f1a089342b31a424ac94fa9"}], "stats": {"total": 13, "additions": 2, "deletions": 11}, "files": [{"sha": "458a3a8c739f435447116d09f1c4423296dfaf01", "filename": "src/compiletest/compiletest.rs", "status": "modified", "additions": 2, "deletions": 11, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/8f008ba4eed563cc2995509048ae638a64426a96/src%2Fcompiletest%2Fcompiletest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8f008ba4eed563cc2995509048ae638a64426a96/src%2Fcompiletest%2Fcompiletest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcompiletest%2Fcompiletest.rs?ref=8f008ba4eed563cc2995509048ae638a64426a96", "patch": "@@ -116,12 +116,6 @@ pub fn parse_config(args: Vec<String> ) -> Config {\n         }\n     }\n \n-    let filter = if !matches.free.is_empty() {\n-        Some(matches.free[0].clone())\n-    } else {\n-        None\n-    };\n-\n     Config {\n         compile_lib_path: matches.opt_str(\"compile-lib-path\").unwrap(),\n         run_lib_path: matches.opt_str(\"run-lib-path\").unwrap(),\n@@ -137,7 +131,7 @@ pub fn parse_config(args: Vec<String> ) -> Config {\n         stage_id: matches.opt_str(\"stage-id\").unwrap(),\n         mode: matches.opt_str(\"mode\").unwrap().parse().ok().expect(\"invalid mode\"),\n         run_ignored: matches.opt_present(\"ignored\"),\n-        filter: filter,\n+        filter: matches.free.first().cloned(),\n         logfile: matches.opt_str(\"logfile\").map(|s| PathBuf::from(&s)),\n         runtool: matches.opt_str(\"runtool\"),\n         host_rustcflags: matches.opt_str(\"host-rustcflags\"),\n@@ -251,10 +245,7 @@ pub fn run_tests(config: &Config) {\n \n pub fn test_opts(config: &Config) -> test::TestOpts {\n     test::TestOpts {\n-        filter: match config.filter {\n-            None => None,\n-            Some(ref filter) => Some(filter.clone()),\n-        },\n+        filter: config.filter.clone(),\n         run_ignored: config.run_ignored,\n         logfile: config.logfile.clone(),\n         run_tests: true,"}]}