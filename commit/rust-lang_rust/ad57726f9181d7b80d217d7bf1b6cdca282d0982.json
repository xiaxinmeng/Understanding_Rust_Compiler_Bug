{"sha": "ad57726f9181d7b80d217d7bf1b6cdca282d0982", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFkNTc3MjZmOTE4MWQ3YjgwZDIxN2Q3YmYxYjZjZGNhMjgyZDA5ODI=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-02-03T15:37:12Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-02-03T15:37:12Z"}, "message": "Use simple prng instead of a dependency\n\ncloses #2999", "tree": {"sha": "04bd8d40a59ba81df0f49f5d315b0017a3554c3c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/04bd8d40a59ba81df0f49f5d315b0017a3554c3c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ad57726f9181d7b80d217d7bf1b6cdca282d0982", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ad57726f9181d7b80d217d7bf1b6cdca282d0982", "html_url": "https://github.com/rust-lang/rust/commit/ad57726f9181d7b80d217d7bf1b6cdca282d0982", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ad57726f9181d7b80d217d7bf1b6cdca282d0982/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "056a01502b7a072f16db0e81eeb99ed8508d2ee6", "url": "https://api.github.com/repos/rust-lang/rust/commits/056a01502b7a072f16db0e81eeb99ed8508d2ee6", "html_url": "https://github.com/rust-lang/rust/commit/056a01502b7a072f16db0e81eeb99ed8508d2ee6"}], "stats": {"total": 41, "additions": 23, "deletions": 18}, "files": [{"sha": "0760f870cbff4697cc3e0b9f7aa8c3810fe7e684", "filename": "editors/code/package-lock.json", "status": "modified", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/ad57726f9181d7b80d217d7bf1b6cdca282d0982/editors%2Fcode%2Fpackage-lock.json", "raw_url": "https://github.com/rust-lang/rust/raw/ad57726f9181d7b80d217d7bf1b6cdca282d0982/editors%2Fcode%2Fpackage-lock.json", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fpackage-lock.json?ref=ad57726f9181d7b80d217d7bf1b6cdca282d0982", "patch": "@@ -98,12 +98,6 @@\n                 \"@types/node\": \"*\"\n             }\n         },\n-        \"@types/seedrandom\": {\n-            \"version\": \"2.4.28\",\n-            \"resolved\": \"https://registry.npmjs.org/@types/seedrandom/-/seedrandom-2.4.28.tgz\",\n-            \"integrity\": \"sha512-SMA+fUwULwK7sd/ZJicUztiPs8F1yCPwF3O23Z9uQ32ME5Ha0NmDK9+QTsYE4O2tHXChzXomSWWeIhCnoN1LqA==\",\n-            \"dev\": true\n-        },\n         \"@types/vscode\": {\n             \"version\": \"1.41.0\",\n             \"resolved\": \"https://registry.npmjs.org/@types/vscode/-/vscode-1.41.0.tgz\",\n@@ -691,11 +685,6 @@\n             \"integrity\": \"sha512-fZEwUGbVl7kouZs1jCdMLdt95hdIv0ZeHg6L7qPeciMZhZ+/gdesW4wgTARkrFWEpspjEATAzUGPG8N2jJiwbg==\",\n             \"dev\": true\n         },\n-        \"seedrandom\": {\n-            \"version\": \"3.0.5\",\n-            \"resolved\": \"https://registry.npmjs.org/seedrandom/-/seedrandom-3.0.5.tgz\",\n-            \"integrity\": \"sha512-8OwmbklUNzwezjGInmZ+2clQmExQPvomqjL7LFqOYqtmuxRgQYqOD3mHaU+MvZn5FLUeVxVfQjwLZW/n/JFuqg==\"\n-        },\n         \"semver\": {\n             \"version\": \"6.3.0\",\n             \"resolved\": \"https://registry.npmjs.org/semver/-/semver-6.3.0.tgz\","}, {"sha": "a46b0a82bde8e0144546f8d3e3263ee94a7f2a31", "filename": "editors/code/package.json", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ad57726f9181d7b80d217d7bf1b6cdca282d0982/editors%2Fcode%2Fpackage.json", "raw_url": "https://github.com/rust-lang/rust/raw/ad57726f9181d7b80d217d7bf1b6cdca282d0982/editors%2Fcode%2Fpackage.json", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fpackage.json?ref=ad57726f9181d7b80d217d7bf1b6cdca282d0982", "patch": "@@ -25,15 +25,13 @@\n     },\n     \"dependencies\": {\n         \"jsonc-parser\": \"^2.1.0\",\n-        \"seedrandom\": \"^3.0.5\",\n         \"vscode-languageclient\": \"^6.1.0\"\n     },\n     \"devDependencies\": {\n         \"@rollup/plugin-commonjs\": \"^11.0.1\",\n         \"@rollup/plugin-node-resolve\": \"^6.1.0\",\n         \"@rollup/plugin-typescript\": \"^2.0.0\",\n         \"@types/node\": \"^12.12.25\",\n-        \"@types/seedrandom\": \"^2.4.28\",\n         \"@types/vscode\": \"^1.41.0\",\n         \"rollup\": \"^1.30.1\",\n         \"tslib\": \"^1.10.0\","}, {"sha": "66216e0fc3284b77b99a6bfb4312ac376056393d", "filename": "editors/code/src/highlighting.ts", "status": "modified", "additions": 22, "deletions": 3, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/ad57726f9181d7b80d217d7bf1b6cdca282d0982/editors%2Fcode%2Fsrc%2Fhighlighting.ts", "raw_url": "https://github.com/rust-lang/rust/raw/ad57726f9181d7b80d217d7bf1b6cdca282d0982/editors%2Fcode%2Fsrc%2Fhighlighting.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Fhighlighting.ts?ref=ad57726f9181d7b80d217d7bf1b6cdca282d0982", "patch": "@@ -1,6 +1,5 @@\n import * as vscode from 'vscode';\n import * as lc from 'vscode-languageclient';\n-import seedrandom from 'seedrandom';\n \n import { ColorTheme, TextMateRuleSettings } from './color_theme';\n \n@@ -70,9 +69,9 @@ interface Decoration {\n \n // Based on this HSL-based color generator: https://gist.github.com/bendc/76c48ce53299e6078a76\n function fancify(seed: string, shade: 'light' | 'dark') {\n-    const random = seedrandom(seed);\n+    const random = randomU32Numbers(hashString(seed))\n     const randomInt = (min: number, max: number) => {\n-        return Math.floor(random() * (max - min + 1)) + min;\n+        return Math.abs(random()) % (max - min + 1) + min;\n     };\n \n     const h = randomInt(0, 360);\n@@ -246,3 +245,23 @@ const TAG_TO_SCOPES = new Map<string, string[]>([\n     [\"keyword.unsafe\", [\"keyword.other.unsafe\"]],\n     [\"keyword.control\", [\"keyword.control\"]],\n ]);\n+\n+function randomU32Numbers(seed: number) {\n+    let random = seed | 0;\n+    return () => {\n+        random ^= random << 13;\n+        random ^= random >> 17;\n+        random ^= random << 5;\n+        random |= 0;\n+        return random\n+    }\n+}\n+\n+function hashString(str: string): number {\n+    let res = 0;\n+    for (let i = 0; i < str.length; ++i) {\n+        const c = str.codePointAt(i)!!;\n+        res = (res * 31 + c) & ~0;\n+    }\n+    return res;\n+}"}, {"sha": "e60eb8e5e5b74d5601a232cc7767a435946871b6", "filename": "editors/code/tsconfig.json", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/ad57726f9181d7b80d217d7bf1b6cdca282d0982/editors%2Fcode%2Ftsconfig.json", "raw_url": "https://github.com/rust-lang/rust/raw/ad57726f9181d7b80d217d7bf1b6cdca282d0982/editors%2Fcode%2Ftsconfig.json", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Ftsconfig.json?ref=ad57726f9181d7b80d217d7bf1b6cdca282d0982", "patch": "@@ -13,8 +13,7 @@\n         \"noUnusedParameters\": true,\n         \"noImplicitReturns\": true,\n         \"noFallthroughCasesInSwitch\": true,\n-        \"newLine\": \"LF\",\n-        \"esModuleInterop\": true\n+        \"newLine\": \"LF\"\n     },\n     \"exclude\": [\n         \"node_modules\""}]}