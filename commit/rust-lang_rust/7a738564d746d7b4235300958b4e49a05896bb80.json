{"sha": "7a738564d746d7b4235300958b4e49a05896bb80", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdhNzM4NTY0ZDc0NmQ3YjQyMzUzMDA5NThiNGU0OWEwNTg5NmJiODA=", "commit": {"author": {"name": "Pascal Hertleif", "email": "killercup@gmail.com", "date": "2018-05-13T16:35:40Z"}, "committer": {"name": "Pascal Hertleif", "email": "killercup@gmail.com", "date": "2018-05-22T20:04:45Z"}, "message": "Update compiltest to use rustfix 0.3.1", "tree": {"sha": "7baef7115a3157d1c4a96b500ba5d45a657006c7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7baef7115a3157d1c4a96b500ba5d45a657006c7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7a738564d746d7b4235300958b4e49a05896bb80", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\nComment: GPGTools - http://gpgtools.org\n\niF0EABECAB0WIQQ4AX3IqIzUAd4RqS7tuxqNIEegdAUCWwR39AAKCRDtuxqNIEeg\ndKCmAJwPFqmYeHxNPk6aDVq6noK4LZFLMwCgmVvsnnWoW2KFDSJX9JrPh5RweGw=\n=FsGn\n-----END PGP SIGNATURE-----", "payload": "tree 7baef7115a3157d1c4a96b500ba5d45a657006c7\nparent e0635188ed30e083245482218a0de9237f14ce90\nauthor Pascal Hertleif <killercup@gmail.com> 1526229340 +0200\ncommitter Pascal Hertleif <killercup@gmail.com> 1527019485 +0200\n\nUpdate compiltest to use rustfix 0.3.1\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7a738564d746d7b4235300958b4e49a05896bb80", "html_url": "https://github.com/rust-lang/rust/commit/7a738564d746d7b4235300958b4e49a05896bb80", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7a738564d746d7b4235300958b4e49a05896bb80/comments", "author": {"login": "killercup", "id": 20063, "node_id": "MDQ6VXNlcjIwMDYz", "avatar_url": "https://avatars.githubusercontent.com/u/20063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/killercup", "html_url": "https://github.com/killercup", "followers_url": "https://api.github.com/users/killercup/followers", "following_url": "https://api.github.com/users/killercup/following{/other_user}", "gists_url": "https://api.github.com/users/killercup/gists{/gist_id}", "starred_url": "https://api.github.com/users/killercup/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/killercup/subscriptions", "organizations_url": "https://api.github.com/users/killercup/orgs", "repos_url": "https://api.github.com/users/killercup/repos", "events_url": "https://api.github.com/users/killercup/events{/privacy}", "received_events_url": "https://api.github.com/users/killercup/received_events", "type": "User", "site_admin": false}, "committer": {"login": "killercup", "id": 20063, "node_id": "MDQ6VXNlcjIwMDYz", "avatar_url": "https://avatars.githubusercontent.com/u/20063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/killercup", "html_url": "https://github.com/killercup", "followers_url": "https://api.github.com/users/killercup/followers", "following_url": "https://api.github.com/users/killercup/following{/other_user}", "gists_url": "https://api.github.com/users/killercup/gists{/gist_id}", "starred_url": "https://api.github.com/users/killercup/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/killercup/subscriptions", "organizations_url": "https://api.github.com/users/killercup/orgs", "repos_url": "https://api.github.com/users/killercup/repos", "events_url": "https://api.github.com/users/killercup/events{/privacy}", "received_events_url": "https://api.github.com/users/killercup/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e0635188ed30e083245482218a0de9237f14ce90", "url": "https://api.github.com/repos/rust-lang/rust/commits/e0635188ed30e083245482218a0de9237f14ce90", "html_url": "https://github.com/rust-lang/rust/commit/e0635188ed30e083245482218a0de9237f14ce90"}], "stats": {"total": 15, "additions": 9, "deletions": 6}, "files": [{"sha": "0392466956eb6c58a9a5118b0b6293d38544ccc1", "filename": "src/Cargo.lock", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/7a738564d746d7b4235300958b4e49a05896bb80/src%2FCargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/7a738564d746d7b4235300958b4e49a05896bb80/src%2FCargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2FCargo.lock?ref=7a738564d746d7b4235300958b4e49a05896bb80", "patch": "@@ -402,7 +402,7 @@ dependencies = [\n  \"log 0.4.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"miow 0.3.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"regex 0.2.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"rustfix 0.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustfix 0.3.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"serde 1.0.40 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"serde_derive 1.0.40 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"serde_json 1.0.15 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -2282,10 +2282,11 @@ dependencies = [\n \n [[package]]\n name = \"rustfix\"\n-version = \"0.2.0\"\n+version = \"0.3.1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"quick-error 1.2.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"failure 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"log 0.4.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"serde 1.0.40 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"serde_derive 1.0.40 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"serde_json 1.0.15 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -3145,7 +3146,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \"checksum rustc-rayon-core 0.1.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"d69983f8613a9c3ba1a3bbf5e8bdf2fd5c42317b1d8dd8623ca8030173bf8a6b\"\n \"checksum rustc-serialize 0.3.24 (registry+https://github.com/rust-lang/crates.io-index)\" = \"dcf128d1287d2ea9d80910b5f1120d0b8eede3fbf1abe91c40d39ea7d51e6fda\"\n \"checksum rustc_version 0.2.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"a54aa04a10c68c1c4eacb4337fd883b435997ede17a9385784b990777686b09a\"\n-\"checksum rustfix 0.2.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"165a212dd11124d7070892da20f71d82970ef1d1dd41cd804b70f39740a21c85\"\n+\"checksum rustfix 0.3.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"9da3cf9b79dc889a2c9879643f26d7a53e37e9361c7566b7d2787d5ace0d8396\"\n \"checksum same-file 1.0.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"cfb6eded0b06a0b512c8ddbcf04089138c9b4362c2f696f3c3d76039d68f3637\"\n \"checksum schannel 0.1.12 (registry+https://github.com/rust-lang/crates.io-index)\" = \"85fd9df495640643ad2d00443b3d78aae69802ad488debab4f1dd52fc1806ade\"\n \"checksum scoped-tls 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"8674d439c964889e2476f474a3bf198cc9e199e77499960893bac5de7e9218a4\""}, {"sha": "780387580232aee715604633a7cdec96e4147191", "filename": "src/tools/compiletest/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7a738564d746d7b4235300958b4e49a05896bb80/src%2Ftools%2Fcompiletest%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/7a738564d746d7b4235300958b4e49a05896bb80/src%2Ftools%2Fcompiletest%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2FCargo.toml?ref=7a738564d746d7b4235300958b4e49a05896bb80", "patch": "@@ -13,7 +13,7 @@ regex = \"0.2\"\n serde = \"1.0\"\n serde_json = \"1.0\"\n serde_derive = \"1.0\"\n-rustfix = \"0.2\"\n+rustfix = \"0.3.1\"\n \n [target.'cfg(unix)'.dependencies]\n libc = \"0.2\""}, {"sha": "f99b30151e4ef42e1123ca00c601de7b0db19199", "filename": "src/tools/compiletest/src/runtest.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7a738564d746d7b4235300958b4e49a05896bb80/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7a738564d746d7b4235300958b4e49a05896bb80/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs?ref=7a738564d746d7b4235300958b4e49a05896bb80", "patch": "@@ -2587,7 +2587,9 @@ impl<'test> TestCx<'test> {\n             let unfixed_code = self.load_expected_output_from_path(&self.testpaths.file)\n                 .unwrap();\n             let suggestions = get_suggestions_from_json(&proc_res.stderr, &HashSet::new()).unwrap();\n-            let fixed_code = apply_suggestions(&unfixed_code, &suggestions);\n+            let fixed_code = apply_suggestions(&unfixed_code, &suggestions).expect(\n+                &format!(\"failed to apply suggestions for {:?} with rustfix\", self.testpaths.file)\n+            );\n \n             errors += self.compare_output(\"fixed\", &fixed_code, &expected_fixed);\n         } else if !expected_fixed.is_empty() {"}]}