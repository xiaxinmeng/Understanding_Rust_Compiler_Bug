{"sha": "ff8faedf0c9a5b59ec8f9f4fbdb9ff22de153ee5", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZmOGZhZWRmMGM5YTViNTllYzhmOWY0ZmJkYjlmZjIyZGUxNTNlZTU=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2016-12-07T18:42:51Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2016-12-07T18:42:51Z"}, "message": "Rollup merge of #38123 - GuillaumeGomez:panic_doc, r=frewsxcv\n\nAdd missing examples for panicking objects\n\nr? @frewsxcv", "tree": {"sha": "3a3160a7caf91c0784c1a4d2fed2242b084aed53", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3a3160a7caf91c0784c1a4d2fed2242b084aed53"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ff8faedf0c9a5b59ec8f9f4fbdb9ff22de153ee5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ff8faedf0c9a5b59ec8f9f4fbdb9ff22de153ee5", "html_url": "https://github.com/rust-lang/rust/commit/ff8faedf0c9a5b59ec8f9f4fbdb9ff22de153ee5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ff8faedf0c9a5b59ec8f9f4fbdb9ff22de153ee5/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "494f68626348ae98165e0c253e4540d22492e5bc", "url": "https://api.github.com/repos/rust-lang/rust/commits/494f68626348ae98165e0c253e4540d22492e5bc", "html_url": "https://github.com/rust-lang/rust/commit/494f68626348ae98165e0c253e4540d22492e5bc"}, {"sha": "d9b5ae992450d26098e7d81aa3868ef808595582", "url": "https://api.github.com/repos/rust-lang/rust/commits/d9b5ae992450d26098e7d81aa3868ef808595582", "html_url": "https://github.com/rust-lang/rust/commit/d9b5ae992450d26098e7d81aa3868ef808595582"}], "stats": {"total": 106, "additions": 104, "deletions": 2}, "files": [{"sha": "45a10d2452851a573f08e85485763cab2d8bf364", "filename": "src/libstd/panicking.rs", "status": "modified", "additions": 104, "deletions": 2, "changes": 106, "blob_url": "https://github.com/rust-lang/rust/blob/ff8faedf0c9a5b59ec8f9f4fbdb9ff22de153ee5/src%2Flibstd%2Fpanicking.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff8faedf0c9a5b59ec8f9f4fbdb9ff22de153ee5/src%2Flibstd%2Fpanicking.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fpanicking.rs?ref=ff8faedf0c9a5b59ec8f9f4fbdb9ff22de153ee5", "patch": "@@ -159,6 +159,23 @@ pub fn take_hook() -> Box<Fn(&PanicInfo) + 'static + Sync + Send> {\n }\n \n /// A struct providing information about a panic.\n+///\n+/// `PanicInfo` structure is passed to a panic hook set by the [`set_hook()`]\n+/// function.\n+///\n+/// [`set_hook()`]: ../../std/panic/fn.set_hook.html\n+///\n+/// # Examples\n+///\n+/// ```should_panic\n+/// use std::panic;\n+///\n+/// panic::set_hook(Box::new(|panic_info| {\n+///     println!(\"panic occured: {:?}\", panic_info.payload().downcast_ref::<&str>().unwrap());\n+/// }));\n+///\n+/// panic!(\"Normal panic\");\n+/// ```\n #[stable(feature = \"panic_hooks\", since = \"1.10.0\")]\n pub struct PanicInfo<'a> {\n     payload: &'a (Any + Send),\n@@ -168,7 +185,21 @@ pub struct PanicInfo<'a> {\n impl<'a> PanicInfo<'a> {\n     /// Returns the payload associated with the panic.\n     ///\n-    /// This will commonly, but not always, be a `&'static str` or `String`.\n+    /// This will commonly, but not always, be a `&'static str` or [`String`].\n+    ///\n+    /// [`String`]: ../../std/string/struct.String.html\n+    ///\n+    /// # Examples\n+    ///\n+    /// ```should_panic\n+    /// use std::panic;\n+    ///\n+    /// panic::set_hook(Box::new(|panic_info| {\n+    ///     println!(\"panic occured: {:?}\", panic_info.payload().downcast_ref::<&str>().unwrap());\n+    /// }));\n+    ///\n+    /// panic!(\"Normal panic\");\n+    /// ```\n     #[stable(feature = \"panic_hooks\", since = \"1.10.0\")]\n     pub fn payload(&self) -> &(Any + Send) {\n         self.payload\n@@ -177,15 +208,54 @@ impl<'a> PanicInfo<'a> {\n     /// Returns information about the location from which the panic originated,\n     /// if available.\n     ///\n-    /// This method will currently always return `Some`, but this may change\n+    /// This method will currently always return [`Some`], but this may change\n     /// in future versions.\n+    ///\n+    /// [`Some`]: ../../std/option/enum.Option.html#variant.Some\n+    ///\n+    /// # Examples\n+    ///\n+    /// ```should_panic\n+    /// use std::panic;\n+    ///\n+    /// panic::set_hook(Box::new(|panic_info| {\n+    ///     if let Some(location) = panic_info.location() {\n+    ///         println!(\"panic occured in file '{}' at line {}\", location.file(), location.line());\n+    ///     } else {\n+    ///         println!(\"panic occured but can't get location information...\");\n+    ///     }\n+    /// }));\n+    ///\n+    /// panic!(\"Normal panic\");\n+    /// ```\n     #[stable(feature = \"panic_hooks\", since = \"1.10.0\")]\n     pub fn location(&self) -> Option<&Location> {\n         Some(&self.location)\n     }\n }\n \n /// A struct containing information about the location of a panic.\n+///\n+/// This structure is created by the [`location()`] method of [`PanicInfo`].\n+///\n+/// [`location()`]: ../../std/panic/struct.PanicInfo.html#method.location\n+/// [`PanicInfo`]: ../../std/panic/struct.PanicInfo.html\n+///\n+/// # Examples\n+///\n+/// ```should_panic\n+/// use std::panic;\n+///\n+/// panic::set_hook(Box::new(|panic_info| {\n+///     if let Some(location) = panic_info.location() {\n+///         println!(\"panic occured in file '{}' at line {}\", location.file(), location.line());\n+///     } else {\n+///         println!(\"panic occured but can't get location information...\");\n+///     }\n+/// }));\n+///\n+/// panic!(\"Normal panic\");\n+/// ```\n #[stable(feature = \"panic_hooks\", since = \"1.10.0\")]\n pub struct Location<'a> {\n     file: &'a str,\n@@ -194,12 +264,44 @@ pub struct Location<'a> {\n \n impl<'a> Location<'a> {\n     /// Returns the name of the source file from which the panic originated.\n+    ///\n+    /// # Examples\n+    ///\n+    /// ```should_panic\n+    /// use std::panic;\n+    ///\n+    /// panic::set_hook(Box::new(|panic_info| {\n+    ///     if let Some(location) = panic_info.location() {\n+    ///         println!(\"panic occured in file '{}'\", location.file());\n+    ///     } else {\n+    ///         println!(\"panic occured but can't get location information...\");\n+    ///     }\n+    /// }));\n+    ///\n+    /// panic!(\"Normal panic\");\n+    /// ```\n     #[stable(feature = \"panic_hooks\", since = \"1.10.0\")]\n     pub fn file(&self) -> &str {\n         self.file\n     }\n \n     /// Returns the line number from which the panic originated.\n+    ///\n+    /// # Examples\n+    ///\n+    /// ```should_panic\n+    /// use std::panic;\n+    ///\n+    /// panic::set_hook(Box::new(|panic_info| {\n+    ///     if let Some(location) = panic_info.location() {\n+    ///         println!(\"panic occured at line {}\", location.line());\n+    ///     } else {\n+    ///         println!(\"panic occured but can't get location information...\");\n+    ///     }\n+    /// }));\n+    ///\n+    /// panic!(\"Normal panic\");\n+    /// ```\n     #[stable(feature = \"panic_hooks\", since = \"1.10.0\")]\n     pub fn line(&self) -> u32 {\n         self.line"}]}