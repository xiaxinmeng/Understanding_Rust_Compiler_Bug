{"sha": "80e096830dc4bd291597c904078fb0e60a09b2ec", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgwZTA5NjgzMGRjNGJkMjkxNTk3YzkwNDA3OGZiMGU2MGEwOWIyZWM=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-09-23T07:20:51Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-09-23T07:20:51Z"}, "message": "auto merge of #9422 : alexcrichton/rust/fix-link, r=thestinger\n\nThis makes clicking on the logo do what you'd expect.", "tree": {"sha": "2f99a24f55a9854dcf07be90b204ee433de9c6ff", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2f99a24f55a9854dcf07be90b204ee433de9c6ff"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/80e096830dc4bd291597c904078fb0e60a09b2ec", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/80e096830dc4bd291597c904078fb0e60a09b2ec", "html_url": "https://github.com/rust-lang/rust/commit/80e096830dc4bd291597c904078fb0e60a09b2ec", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/80e096830dc4bd291597c904078fb0e60a09b2ec/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "03e5e9631567904e03ec61b698a1eeff1372125d", "url": "https://api.github.com/repos/rust-lang/rust/commits/03e5e9631567904e03ec61b698a1eeff1372125d", "html_url": "https://github.com/rust-lang/rust/commit/03e5e9631567904e03ec61b698a1eeff1372125d"}, {"sha": "83499d1a89ef4e38a0cd0fc02316539a836e24a2", "url": "https://api.github.com/repos/rust-lang/rust/commits/83499d1a89ef4e38a0cd0fc02316539a836e24a2", "html_url": "https://github.com/rust-lang/rust/commit/83499d1a89ef4e38a0cd0fc02316539a836e24a2"}], "stats": {"total": 30, "additions": 13, "deletions": 17}, "files": [{"sha": "45ed936417899786772a237e50856cfa064cf455", "filename": "mk/tools.mk", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/80e096830dc4bd291597c904078fb0e60a09b2ec/mk%2Ftools.mk", "raw_url": "https://github.com/rust-lang/rust/raw/80e096830dc4bd291597c904078fb0e60a09b2ec/mk%2Ftools.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Ftools.mk?ref=80e096830dc4bd291597c904078fb0e60a09b2ec", "patch": "@@ -21,7 +21,8 @@ RUSTPKG_INPUTS := $(wildcard $(S)src/librustpkg/*.rs)\n \n # Rustdoc, the documentation tool\n RUSTDOC_LIB := $(S)src/librustdoc/rustdoc.rs\n-RUSTDOC_INPUTS := $(wildcard $(S)src/librustdoc/*.rs)\n+RUSTDOC_INPUTS := $(wildcard $(addprefix $(S)src/librustdoc/,        \\\n+                                           *.rs */*.rs */*/*.rs))\n \n # Rusti, the JIT REPL\n RUSTI_LIB := $(S)src/librusti/rusti.rs"}, {"sha": "718bacc24fd83942ec6532b9f09ccc69b227069e", "filename": "src/librustdoc/html/layout.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/80e096830dc4bd291597c904078fb0e60a09b2ec/src%2Flibrustdoc%2Fhtml%2Flayout.rs", "raw_url": "https://github.com/rust-lang/rust/raw/80e096830dc4bd291597c904078fb0e60a09b2ec/src%2Flibrustdoc%2Fhtml%2Flayout.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Flayout.rs?ref=80e096830dc4bd291597c904078fb0e60a09b2ec", "patch": "@@ -36,7 +36,7 @@ pub fn render<T: fmt::Default, S: fmt::Default>(\n \n     <link href='http://fonts.googleapis.com/css?family=Oswald:700|Inconsolata:400'\n           rel='stylesheet' type='text/css'>\n-    <link rel=\\\"stylesheet\\\" type=\\\"text/css\\\" href=\\\"{root_path}main.css\\\">\n+    <link rel=\\\"stylesheet\\\" type=\\\"text/css\\\" href=\\\"{root_path}{crate}/main.css\\\">\n \n     {favicon, select, none{} other{\n         <link rel=\\\"icon\\\" href=\\\"#\\\" sizes=\\\"16x16\\\"\n@@ -52,7 +52,7 @@ pub fn render<T: fmt::Default, S: fmt::Default>(\n \n     <section class=\\\"sidebar\\\">\n         {logo, select, none{} other{\n-            <a href='{root_path}index.html'><img src='#' alt=''/></a>\n+            <a href='{root_path}{crate}/index.html'><img src='#' alt=''/></a>\n         }}\n \n         {sidebar}\n@@ -73,9 +73,9 @@ pub fn render<T: fmt::Default, S: fmt::Default>(\n     <script>\n         var rootPath = \\\"{root_path}\\\";\n     </script>\n-    <script src=\\\"{root_path}jquery.js\\\"></script>\n+    <script src=\\\"{root_path}{crate}/jquery.js\\\"></script>\n     <script src=\\\"{root_path}{crate}/search-index.js\\\"></script>\n-    <script src=\\\"{root_path}main.js\\\"></script>\n+    <script src=\\\"{root_path}{crate}/main.js\\\"></script>\n \n     <div id=\\\"help\\\" class=\\\"hidden\\\">\n         <div class=\\\"shortcuts\\\">"}, {"sha": "464a4e4b736553c94f422368e084d7ca93849a93", "filename": "src/librustdoc/html/render.rs", "status": "modified", "additions": 7, "deletions": 12, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/80e096830dc4bd291597c904078fb0e60a09b2ec/src%2Flibrustdoc%2Fhtml%2Frender.rs", "raw_url": "https://github.com/rust-lang/rust/raw/80e096830dc4bd291597c904078fb0e60a09b2ec/src%2Flibrustdoc%2Fhtml%2Frender.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender.rs?ref=80e096830dc4bd291597c904078fb0e60a09b2ec", "patch": "@@ -128,20 +128,15 @@ pub fn run(mut crate: clean::Crate, dst: Path) {\n     crate = cache.fold_crate(crate);\n \n     // Add all the static files\n-    write(cx.dst.push(\"jquery.js\"), include_str!(\"static/jquery-2.0.3.min.js\"));\n-    write(cx.dst.push(\"main.js\"), include_str!(\"static/main.js\"));\n-    write(cx.dst.push(\"main.css\"), include_str!(\"static/main.css\"));\n-    write(cx.dst.push(\"normalize.css\"), include_str!(\"static/normalize.css\"));\n-    write(cx.dst.push(\"index.html\"), format!(\"\n-        <DOCTYPE html><html><head>\n-            <meta http-equiv='refresh'\n-                  content=\\\"0; url={}/index.html\\\">\n-        </head><body></body></html>\n-    \", crate.name));\n+    let dst = cx.dst.push(crate.name);\n+    mkdir(&dst);\n+    write(dst.push(\"jquery.js\"), include_str!(\"static/jquery-2.0.3.min.js\"));\n+    write(dst.push(\"main.js\"), include_str!(\"static/main.js\"));\n+    write(dst.push(\"main.css\"), include_str!(\"static/main.css\"));\n+    write(dst.push(\"normalize.css\"), include_str!(\"static/normalize.css\"));\n \n     {\n-        mkdir(&cx.dst.push(crate.name));\n-        let dst = cx.dst.push(crate.name).push(\"search-index.js\");\n+        let dst = dst.push(\"search-index.js\");\n         let mut w = BufferedWriter::new(dst.open_writer(io::CreateOrTruncate));\n         let w = &mut w as &mut io::Writer;\n         write!(w, \"var searchIndex = [\");"}]}