{"sha": "8894b366fdb976a703fe76010f6e56c591cada1f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg4OTRiMzY2ZmRiOTc2YTcwM2ZlNzYwMTBmNmU1NmM1OTFjYWRhMWY=", "commit": {"author": {"name": "kadmin", "email": "julianknodt@gmail.com", "date": "2020-08-26T00:30:02Z"}, "committer": {"name": "kadmin", "email": "julianknodt@gmail.com", "date": "2020-08-30T19:39:51Z"}, "message": "Remove error message in specific case\n\nIn the case that a trait is not implemented for an ADT with type errors, cancel the error.", "tree": {"sha": "3a4df5c9914a364aa388b9f4ccf16e65726acf4b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3a4df5c9914a364aa388b9f4ccf16e65726acf4b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8894b366fdb976a703fe76010f6e56c591cada1f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8894b366fdb976a703fe76010f6e56c591cada1f", "html_url": "https://github.com/rust-lang/rust/commit/8894b366fdb976a703fe76010f6e56c591cada1f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8894b366fdb976a703fe76010f6e56c591cada1f/comments", "author": {"login": "JulianKnodt", "id": 7675847, "node_id": "MDQ6VXNlcjc2NzU4NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/7675847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JulianKnodt", "html_url": "https://github.com/JulianKnodt", "followers_url": "https://api.github.com/users/JulianKnodt/followers", "following_url": "https://api.github.com/users/JulianKnodt/following{/other_user}", "gists_url": "https://api.github.com/users/JulianKnodt/gists{/gist_id}", "starred_url": "https://api.github.com/users/JulianKnodt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JulianKnodt/subscriptions", "organizations_url": "https://api.github.com/users/JulianKnodt/orgs", "repos_url": "https://api.github.com/users/JulianKnodt/repos", "events_url": "https://api.github.com/users/JulianKnodt/events{/privacy}", "received_events_url": "https://api.github.com/users/JulianKnodt/received_events", "type": "User", "site_admin": false}, "committer": {"login": "JulianKnodt", "id": 7675847, "node_id": "MDQ6VXNlcjc2NzU4NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/7675847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JulianKnodt", "html_url": "https://github.com/JulianKnodt", "followers_url": "https://api.github.com/users/JulianKnodt/followers", "following_url": "https://api.github.com/users/JulianKnodt/following{/other_user}", "gists_url": "https://api.github.com/users/JulianKnodt/gists{/gist_id}", "starred_url": "https://api.github.com/users/JulianKnodt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JulianKnodt/subscriptions", "organizations_url": "https://api.github.com/users/JulianKnodt/orgs", "repos_url": "https://api.github.com/users/JulianKnodt/repos", "events_url": "https://api.github.com/users/JulianKnodt/events{/privacy}", "received_events_url": "https://api.github.com/users/JulianKnodt/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "85fbf49ce0e2274d0acf798f6e703747674feec3", "url": "https://api.github.com/repos/rust-lang/rust/commits/85fbf49ce0e2274d0acf798f6e703747674feec3", "html_url": "https://github.com/rust-lang/rust/commit/85fbf49ce0e2274d0acf798f6e703747674feec3"}], "stats": {"total": 20, "additions": 20, "deletions": 0}, "files": [{"sha": "f86fc425bd3a23d028aa3d5443d9f52d65c84d28", "filename": "compiler/rustc_trait_selection/src/traits/error_reporting/suggestions.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/8894b366fdb976a703fe76010f6e56c591cada1f/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fsuggestions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8894b366fdb976a703fe76010f6e56c591cada1f/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fsuggestions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fsuggestions.rs?ref=8894b366fdb976a703fe76010f6e56c591cada1f", "patch": "@@ -1906,6 +1906,11 @@ impl<'a, 'tcx> InferCtxtExt<'tcx> for InferCtxt<'a, 'tcx> {\n             ObligationCauseCode::BuiltinDerivedObligation(ref data) => {\n                 let parent_trait_ref = self.resolve_vars_if_possible(&data.parent_trait_ref);\n                 let ty = parent_trait_ref.skip_binder().self_ty();\n+                if parent_trait_ref.references_error() {\n+                    err.cancel();\n+                    return;\n+                }\n+\n                 err.note(&format!(\"required because it appears within the type `{}`\", ty));\n                 obligated_types.push(ty);\n "}, {"sha": "93a2ec1cc50c33e019d50d3b7544af732f97974d", "filename": "src/test/ui/traits/issue-75627.rs", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/8894b366fdb976a703fe76010f6e56c591cada1f/src%2Ftest%2Fui%2Ftraits%2Fissue-75627.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8894b366fdb976a703fe76010f6e56c591cada1f/src%2Ftest%2Fui%2Ftraits%2Fissue-75627.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftraits%2Fissue-75627.rs?ref=8894b366fdb976a703fe76010f6e56c591cada1f", "patch": "@@ -0,0 +1,6 @@\n+struct Foo<T>(T, *const ());\n+\n+unsafe impl Send for Foo<T> {}\n+//~^ ERROR cannot find type\n+\n+fn main() {}"}, {"sha": "92d9ac0f84c990a622e6fb149688f595c1835f60", "filename": "src/test/ui/traits/issue-75627.stderr", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/8894b366fdb976a703fe76010f6e56c591cada1f/src%2Ftest%2Fui%2Ftraits%2Fissue-75627.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8894b366fdb976a703fe76010f6e56c591cada1f/src%2Ftest%2Fui%2Ftraits%2Fissue-75627.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftraits%2Fissue-75627.stderr?ref=8894b366fdb976a703fe76010f6e56c591cada1f", "patch": "@@ -0,0 +1,9 @@\n+error[E0412]: cannot find type `T` in this scope\n+  --> $DIR/issue-75627.rs:3:26\n+   |\n+LL | unsafe impl Send for Foo<T> {}\n+   |                          ^ not found in this scope\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0412`."}]}