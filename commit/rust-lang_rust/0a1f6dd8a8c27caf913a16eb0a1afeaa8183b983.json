{"sha": "0a1f6dd8a8c27caf913a16eb0a1afeaa8183b983", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBhMWY2ZGQ4YThjMjdjYWY5MTNhMTZlYjBhMWFmZWFhODE4M2I5ODM=", "commit": {"author": {"name": "Michael Woerister", "email": "michaelwoerister@posteo", "date": "2017-11-16T17:07:49Z"}, "committer": {"name": "Michael Woerister", "email": "michaelwoerister@posteo", "date": "2017-11-16T17:09:04Z"}, "message": "Add doc comment for LocalDefId.", "tree": {"sha": "38430568b9208d2bef6f2bebc92c798ae674b24c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/38430568b9208d2bef6f2bebc92c798ae674b24c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0a1f6dd8a8c27caf913a16eb0a1afeaa8183b983", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0a1f6dd8a8c27caf913a16eb0a1afeaa8183b983", "html_url": "https://github.com/rust-lang/rust/commit/0a1f6dd8a8c27caf913a16eb0a1afeaa8183b983", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0a1f6dd8a8c27caf913a16eb0a1afeaa8183b983/comments", "author": {"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}, "committer": {"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4c4f7a3189c837805e203decacb2f43d0866aac6", "url": "https://api.github.com/repos/rust-lang/rust/commits/4c4f7a3189c837805e203decacb2f43d0866aac6", "html_url": "https://github.com/rust-lang/rust/commit/4c4f7a3189c837805e203decacb2f43d0866aac6"}], "stats": {"total": 9, "additions": 7, "deletions": 2}, "files": [{"sha": "f6fcff37ca53edacb0c24ecfa228b38b57095a29", "filename": "src/librustc/hir/def_id.rs", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/0a1f6dd8a8c27caf913a16eb0a1afeaa8183b983/src%2Flibrustc%2Fhir%2Fdef_id.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0a1f6dd8a8c27caf913a16eb0a1afeaa8183b983/src%2Flibrustc%2Fhir%2Fdef_id.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fhir%2Fdef_id.rs?ref=0a1f6dd8a8c27caf913a16eb0a1afeaa8183b983", "patch": "@@ -198,7 +198,7 @@ impl DefId {\n         self.krate == LOCAL_CRATE\n     }\n \n-     #[inline]\n+    #[inline]\n     pub fn to_local(self) -> LocalDefId {\n         LocalDefId::from_def_id(self)\n     }\n@@ -207,7 +207,12 @@ impl DefId {\n impl serialize::UseSpecializedEncodable for DefId {}\n impl serialize::UseSpecializedDecodable for DefId {}\n \n-\n+/// A LocalDefId is equivalent to a DefId with `krate == LOCAL_CRATE`. Since\n+/// we encode this information in the type, we can ensure at compile time that\n+/// no DefIds from upstream crates get thrown into the mix. There are quite a\n+/// few cases where we know that only DefIds from the local crate are expected\n+/// and a DefId from a different crate would signify a bug somewhere. This\n+/// is when LocalDefId comes in handy.\n #[derive(Clone, Copy, Eq, PartialEq, Ord, PartialOrd, Hash)]\n pub struct LocalDefId(DefIndex);\n "}]}