{"sha": "a36c6361999ff23d604a5a0e7d06611ad31b6262", "node_id": "MDY6Q29tbWl0NzI0NzEyOmEzNmM2MzYxOTk5ZmYyM2Q2MDRhNWEwZTdkMDY2MTFhZDMxYjYyNjI=", "commit": {"author": {"name": "Tamir Duberstein", "email": "tamird@google.com", "date": "2021-05-18T11:48:00Z"}, "committer": {"name": "Tamir Duberstein", "email": "tamird@google.com", "date": "2021-05-18T11:48:00Z"}, "message": "Avoid cloning cache key", "tree": {"sha": "c4a37301d1e7bcaa8e3f7b5e92399fc5fe5927f4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c4a37301d1e7bcaa8e3f7b5e92399fc5fe5927f4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a36c6361999ff23d604a5a0e7d06611ad31b6262", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEEGdbxTRDxXfPwlFQKMuM+wV4f7zwFAmCjqXcACgkQMuM+wV4f\n7zxaVQv+O1vJaoY0WqgxeRp3yTvCUPH/xm2wCRZcdSNBiY25vt4vAxlosOXKlmyd\nKl0Uo2rLLZcdxS5PUSKbwzEOtZncxsJkOZYIbo/FMtIPe8osL2Ydr4KyPAsDS+Tg\nC7jht/qhIeGccfpbcZoW3PUbVmdbmzzO7yfcvv0ebPPLe+Byhqk/o1+XlmpmFRr8\nxvGK/b8dEX0aLDlfjt7wdSJCsyzTOyKSRykQHnLcyaShMiYAFbMP1jWrQB/X8sIZ\nLxwHTr6cb0i0C31QLtGXrgqEi3v2Y4vq7Nty3WhD10MH88m5SspmUHiP4HSqDpoR\nk7mq0b8VeAQNuZPc4claH9ZEqBGLJZXg+clRy2oHrieFKXywUA2oV+WwtYIypxuU\nW2py+fqSuH6UIcUxsXviZoBsICz1ocQp75WsSUKeAOMWCekQfhM1R59rJr9n41B7\nhYtARCYCe16mKa/DX/TwDVjah3x0l93jTGD74UsZp+pSYGj188uJqt986sqa3r06\nkeFEvEUi\n=7l7n\n-----END PGP SIGNATURE-----", "payload": "tree c4a37301d1e7bcaa8e3f7b5e92399fc5fe5927f4\nparent 5f10d310f475b3ba583b9c590b8d19f6c2fde28f\nauthor Tamir Duberstein <tamird@google.com> 1621338480 -0400\ncommitter Tamir Duberstein <tamird@google.com> 1621338480 -0400\n\nAvoid cloning cache key\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a36c6361999ff23d604a5a0e7d06611ad31b6262", "html_url": "https://github.com/rust-lang/rust/commit/a36c6361999ff23d604a5a0e7d06611ad31b6262", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a36c6361999ff23d604a5a0e7d06611ad31b6262/comments", "author": {"login": "tamird", "id": 1535036, "node_id": "MDQ6VXNlcjE1MzUwMzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1535036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tamird", "html_url": "https://github.com/tamird", "followers_url": "https://api.github.com/users/tamird/followers", "following_url": "https://api.github.com/users/tamird/following{/other_user}", "gists_url": "https://api.github.com/users/tamird/gists{/gist_id}", "starred_url": "https://api.github.com/users/tamird/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tamird/subscriptions", "organizations_url": "https://api.github.com/users/tamird/orgs", "repos_url": "https://api.github.com/users/tamird/repos", "events_url": "https://api.github.com/users/tamird/events{/privacy}", "received_events_url": "https://api.github.com/users/tamird/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tamird", "id": 1535036, "node_id": "MDQ6VXNlcjE1MzUwMzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1535036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tamird", "html_url": "https://github.com/tamird", "followers_url": "https://api.github.com/users/tamird/followers", "following_url": "https://api.github.com/users/tamird/following{/other_user}", "gists_url": "https://api.github.com/users/tamird/gists{/gist_id}", "starred_url": "https://api.github.com/users/tamird/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tamird/subscriptions", "organizations_url": "https://api.github.com/users/tamird/orgs", "repos_url": "https://api.github.com/users/tamird/repos", "events_url": "https://api.github.com/users/tamird/events{/privacy}", "received_events_url": "https://api.github.com/users/tamird/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5f10d310f475b3ba583b9c590b8d19f6c2fde28f", "url": "https://api.github.com/repos/rust-lang/rust/commits/5f10d310f475b3ba583b9c590b8d19f6c2fde28f", "html_url": "https://github.com/rust-lang/rust/commit/5f10d310f475b3ba583b9c590b8d19f6c2fde28f"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "74ceed67807a99dc6ac277bb8fe7a9287a007879", "filename": "compiler/rustc_data_structures/src/obligation_forest/mod.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a36c6361999ff23d604a5a0e7d06611ad31b6262/compiler%2Frustc_data_structures%2Fsrc%2Fobligation_forest%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a36c6361999ff23d604a5a0e7d06611ad31b6262/compiler%2Frustc_data_structures%2Fsrc%2Fobligation_forest%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_data_structures%2Fsrc%2Fobligation_forest%2Fmod.rs?ref=a36c6361999ff23d604a5a0e7d06611ad31b6262", "patch": "@@ -342,7 +342,7 @@ impl<O: ForestObligation> ObligationForest<O> {\n             return Ok(());\n         }\n \n-        match self.active_cache.entry(cache_key.clone()) {\n+        match self.active_cache.entry(cache_key) {\n             Entry::Occupied(o) => {\n                 let node = &mut self.nodes[*o.get()];\n                 if let Some(parent_index) = parent {\n@@ -366,7 +366,7 @@ impl<O: ForestObligation> ObligationForest<O> {\n                     && self\n                         .error_cache\n                         .get(&obligation_tree_id)\n-                        .map(|errors| errors.contains(&cache_key))\n+                        .map(|errors| errors.contains(v.key()))\n                         .unwrap_or(false);\n \n                 if already_failed {"}]}