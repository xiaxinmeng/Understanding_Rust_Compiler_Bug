{"sha": "39f0270544af19bf51b0088c93fe5cf58a8eccbe", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM5ZjAyNzA1NDRhZjE5YmY1MWIwMDg4YzkzZmU1Y2Y1OGE4ZWNjYmU=", "commit": {"author": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2013-12-28T02:03:28Z"}, "committer": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2014-01-03T22:01:59Z"}, "message": "libsyntax: Remove an unnecessary `@mut io::Reader`", "tree": {"sha": "320f9274d173ae83d0b8a34b49ddc537d100f508", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/320f9274d173ae83d0b8a34b49ddc537d100f508"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/39f0270544af19bf51b0088c93fe5cf58a8eccbe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/39f0270544af19bf51b0088c93fe5cf58a8eccbe", "html_url": "https://github.com/rust-lang/rust/commit/39f0270544af19bf51b0088c93fe5cf58a8eccbe", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/39f0270544af19bf51b0088c93fe5cf58a8eccbe/comments", "author": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1dbeb5b2ac3ee6ea0634036e9778b2eb5a2445e4", "url": "https://api.github.com/repos/rust-lang/rust/commits/1dbeb5b2ac3ee6ea0634036e9778b2eb5a2445e4", "html_url": "https://github.com/rust-lang/rust/commit/1dbeb5b2ac3ee6ea0634036e9778b2eb5a2445e4"}], "stats": {"total": 18, "additions": 10, "deletions": 8}, "files": [{"sha": "70e4922aabf670c7ee79b479b19b4cd702a25224", "filename": "src/libsyntax/ast_util.rs", "status": "modified", "additions": 10, "deletions": 8, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/39f0270544af19bf51b0088c93fe5cf58a8eccbe/src%2Flibsyntax%2Fast_util.rs", "raw_url": "https://github.com/rust-lang/rust/raw/39f0270544af19bf51b0088c93fe5cf58a8eccbe/src%2Flibsyntax%2Fast_util.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fast_util.rs?ref=39f0270544af19bf51b0088c93fe5cf58a8eccbe", "patch": "@@ -17,7 +17,7 @@ use parse::token;\n use visit::Visitor;\n use visit;\n \n-use std::cell::RefCell;\n+use std::cell::{Cell, RefCell};\n use std::hashmap::HashMap;\n use std::u32;\n use std::local_data;\n@@ -602,21 +602,23 @@ pub fn visit_ids_for_inlined_item<O: IdVisitingOperation>(item: &inlined_item,\n }\n \n struct IdRangeComputingVisitor {\n-    result: @mut id_range,\n+    result: Cell<id_range>,\n }\n \n impl IdVisitingOperation for IdRangeComputingVisitor {\n     fn visit_id(&self, id: NodeId) {\n-        self.result.add(id)\n+        let mut id_range = self.result.get();\n+        id_range.add(id);\n+        self.result.set(id_range)\n     }\n }\n \n pub fn compute_id_range_for_inlined_item(item: &inlined_item) -> id_range {\n-    let result = @mut id_range::max();\n-    visit_ids_for_inlined_item(item, &IdRangeComputingVisitor {\n-        result: result,\n-    });\n-    *result\n+    let visitor = IdRangeComputingVisitor {\n+        result: Cell::new(id_range::max())\n+    };\n+    visit_ids_for_inlined_item(item, &visitor);\n+    visitor.result.get()\n }\n \n pub fn is_item_impl(item: @ast::item) -> bool {"}]}