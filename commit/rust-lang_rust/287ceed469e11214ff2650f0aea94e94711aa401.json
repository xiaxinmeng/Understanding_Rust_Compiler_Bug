{"sha": "287ceed469e11214ff2650f0aea94e94711aa401", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI4N2NlZWQ0NjllMTEyMTRmZjI2NTBmMGFlYTk0ZTk0NzExYWE0MDE=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-09-21T23:32:51Z"}, "committer": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-10-03T04:46:52Z"}, "message": "Deprecate `#![plugin]` and `#[plugin_registrar]`.", "tree": {"sha": "5af15396e3d8f509b503d8ebe8367e3af7f17549", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5af15396e3d8f509b503d8ebe8367e3af7f17549"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/287ceed469e11214ff2650f0aea94e94711aa401", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/287ceed469e11214ff2650f0aea94e94711aa401", "html_url": "https://github.com/rust-lang/rust/commit/287ceed469e11214ff2650f0aea94e94711aa401", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/287ceed469e11214ff2650f0aea94e94711aa401/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2daa404e9a151a2e8262cbd6d8c209fd067aca16", "url": "https://api.github.com/repos/rust-lang/rust/commits/2daa404e9a151a2e8262cbd6d8c209fd067aca16", "html_url": "https://github.com/rust-lang/rust/commit/2daa404e9a151a2e8262cbd6d8c209fd067aca16"}], "stats": {"total": 137, "additions": 119, "deletions": 18}, "files": [{"sha": "d1c2ffb2880bff86d0c2d1d80580253b46db2ea9", "filename": "src/libsyntax/feature_gate/builtin_attrs.rs", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/287ceed469e11214ff2650f0aea94e94711aa401/src%2Flibsyntax%2Ffeature_gate%2Fbuiltin_attrs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/287ceed469e11214ff2650f0aea94e94711aa401/src%2Flibsyntax%2Ffeature_gate%2Fbuiltin_attrs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Ffeature_gate%2Fbuiltin_attrs.rs?ref=287ceed469e11214ff2650f0aea94e94711aa401", "patch": "@@ -279,9 +279,14 @@ pub const BUILTIN_ATTRIBUTES: &[BuiltinAttribute] = &[\n \n     // Plugins:\n     ungated!(plugin_registrar, Normal, template!(Word)),\n-    gated!(\n-        plugin, CrateLevel, template!(List: \"name|name(args)\"),\n-        \"compiler plugins are experimental and possibly buggy\",\n+    (\n+        sym::plugin, CrateLevel, template!(List: \"name|name(args)\"),\n+        Gated(\n+            Stability::Deprecated(\"https://github.com/rust-lang/rust/issues/29597\", None),\n+            sym::plugin,\n+            \"compiler plugins are deprecated and will be removed in 1.44.0\",\n+            cfg_fn!(plugin)\n+        )\n     ),\n \n     // Testing:"}, {"sha": "158f12839ae526e2db446dc20a8967d607dc219a", "filename": "src/libsyntax/feature_gate/check.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/287ceed469e11214ff2650f0aea94e94711aa401/src%2Flibsyntax%2Ffeature_gate%2Fcheck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/287ceed469e11214ff2650f0aea94e94711aa401/src%2Flibsyntax%2Ffeature_gate%2Fcheck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Ffeature_gate%2Fcheck.rs?ref=287ceed469e11214ff2650f0aea94e94711aa401", "patch": "@@ -311,6 +311,10 @@ impl<'a> Visitor<'a> for PostExpansionVisitor<'a> {\n                 if attr::contains_name(&i.attrs[..], sym::plugin_registrar) {\n                     gate_feature_post!(&self, plugin_registrar, i.span,\n                                        \"compiler plugins are experimental and possibly buggy\");\n+                    self.parse_sess.span_diagnostic.span_warn(\n+                        i.span,\n+                        \"`#[plugin_registrar]` is deprecated and will be removed in 1.44.0\",\n+                    );\n                 }\n                 if attr::contains_name(&i.attrs[..], sym::start) {\n                     gate_feature_post!(&self, start, i.span,"}, {"sha": "1566a153ec03c4dbb2230298f40374a932bb02c9", "filename": "src/test/run-make-fulldeps/hotplug_codegen_backend/the_backend.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Frun-make-fulldeps%2Fhotplug_codegen_backend%2Fthe_backend.rs", "raw_url": "https://github.com/rust-lang/rust/raw/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Frun-make-fulldeps%2Fhotplug_codegen_backend%2Fthe_backend.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Fhotplug_codegen_backend%2Fthe_backend.rs?ref=287ceed469e11214ff2650f0aea94e94711aa401", "patch": "@@ -41,7 +41,7 @@ impl MetadataLoader for NoLlvmMetadataLoader {\n struct TheBackend;\n \n impl CodegenBackend for TheBackend {\n-    fn metadata_loader(&self) -> Box<MetadataLoader + Sync> {\n+    fn metadata_loader(&self) -> Box<dyn MetadataLoader + Sync> {\n         Box::new(NoLlvmMetadataLoader)\n     }\n \n@@ -64,15 +64,15 @@ impl CodegenBackend for TheBackend {\n         tcx: TyCtxt<'tcx>,\n         _metadata: EncodedMetadata,\n         _need_metadata_module: bool,\n-    ) -> Box<Any> {\n+    ) -> Box<dyn Any> {\n         use rustc::hir::def_id::LOCAL_CRATE;\n \n         Box::new(tcx.crate_name(LOCAL_CRATE) as Symbol)\n     }\n \n     fn join_codegen_and_link(\n         &self,\n-        ongoing_codegen: Box<Any>,\n+        ongoing_codegen: Box<dyn Any>,\n         sess: &Session,\n         _dep_graph: &DepGraph,\n         outputs: &OutputFilenames,\n@@ -97,6 +97,6 @@ impl CodegenBackend for TheBackend {\n \n /// This is the entrypoint for a hot plugged rustc_codegen_llvm\n #[no_mangle]\n-pub fn __rustc_codegen_backend() -> Box<CodegenBackend> {\n+pub fn __rustc_codegen_backend() -> Box<dyn CodegenBackend> {\n     Box::new(TheBackend)\n }"}, {"sha": "2cae74e241130f1eead5fb01d56134adfca04923", "filename": "src/test/ui-fulldeps/gated-plugin.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Fui-fulldeps%2Fgated-plugin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Fui-fulldeps%2Fgated-plugin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Fgated-plugin.rs?ref=287ceed469e11214ff2650f0aea94e94711aa401", "patch": "@@ -1,6 +1,8 @@\n+// ignore-tidy-linelength\n // aux-build:attr-plugin-test.rs\n \n #![plugin(attr_plugin_test)]\n-//~^ ERROR compiler plugins are experimental and possibly buggy\n+//~^ ERROR compiler plugins are deprecated and will be removed in 1.44.0\n+//~| WARN use of deprecated attribute `plugin`: compiler plugins are deprecated and will be removed in 1.44.0\n \n fn main() {}"}, {"sha": "0c0256bde0f761621f36f4c8f00154862525e79a", "filename": "src/test/ui-fulldeps/gated-plugin.stderr", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Fui-fulldeps%2Fgated-plugin.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Fui-fulldeps%2Fgated-plugin.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Fgated-plugin.stderr?ref=287ceed469e11214ff2650f0aea94e94711aa401", "patch": "@@ -1,12 +1,20 @@\n-error[E0658]: compiler plugins are experimental and possibly buggy\n-  --> $DIR/gated-plugin.rs:3:1\n+error[E0658]: compiler plugins are deprecated and will be removed in 1.44.0\n+  --> $DIR/gated-plugin.rs:4:1\n    |\n LL | #![plugin(attr_plugin_test)]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n    = note: for more information, see https://github.com/rust-lang/rust/issues/29597\n    = help: add `#![feature(plugin)]` to the crate attributes to enable\n \n+warning: use of deprecated attribute `plugin`: compiler plugins are deprecated and will be removed in 1.44.0. See https://github.com/rust-lang/rust/issues/29597\n+  --> $DIR/gated-plugin.rs:4:1\n+   |\n+LL | #![plugin(attr_plugin_test)]\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute\n+   |\n+   = note: `#[warn(deprecated)]` on by default\n+\n error: aborting due to previous error\n \n For more information about this error, try `rustc --explain E0658`."}, {"sha": "27145396473fc19c2add65785b7fe1c0f60dbfc7", "filename": "src/test/ui-fulldeps/macro-crate-rlib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Fui-fulldeps%2Fmacro-crate-rlib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Fui-fulldeps%2Fmacro-crate-rlib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Fmacro-crate-rlib.rs?ref=287ceed469e11214ff2650f0aea94e94711aa401", "patch": "@@ -5,5 +5,6 @@\n #![feature(plugin)]\n #![plugin(rlib_crate_test)]\n //~^ ERROR: plugin `rlib_crate_test` only found in rlib format, but must be available in dylib format\n+//~| WARN use of deprecated attribute `plugin`: compiler plugins are deprecated and will be removed in 1.44.0\n \n fn main() {}"}, {"sha": "c625d8f61c2492786b10170caa06aed664966196", "filename": "src/test/ui-fulldeps/macro-crate-rlib.stderr", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Fui-fulldeps%2Fmacro-crate-rlib.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Fui-fulldeps%2Fmacro-crate-rlib.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Fmacro-crate-rlib.stderr?ref=287ceed469e11214ff2650f0aea94e94711aa401", "patch": "@@ -4,5 +4,13 @@ error[E0457]: plugin `rlib_crate_test` only found in rlib format, but must be av\n LL | #![plugin(rlib_crate_test)]\n    |           ^^^^^^^^^^^^^^^\n \n+warning: use of deprecated attribute `plugin`: compiler plugins are deprecated and will be removed in 1.44.0. See https://github.com/rust-lang/rust/issues/29597\n+  --> $DIR/macro-crate-rlib.rs:6:1\n+   |\n+LL | #![plugin(rlib_crate_test)]\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute\n+   |\n+   = note: `#[warn(deprecated)]` on by default\n+\n error: aborting due to previous error\n "}, {"sha": "4afa9d4082c8a90775a468197ba62cd8a480a9c0", "filename": "src/test/ui/feature-gates/feature-gate-plugin.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-plugin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-plugin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-plugin.rs?ref=287ceed469e11214ff2650f0aea94e94711aa401", "patch": "@@ -1,6 +1,7 @@\n // Test that `#![plugin(...)]` attribute is gated by `plugin` feature gate\n \n #![plugin(foo)]\n-//~^ ERROR compiler plugins are experimental and possibly buggy\n+//~^ ERROR compiler plugins are deprecated and will be removed in 1.44.0\n+//~| WARN use of deprecated attribute `plugin`: compiler plugins are deprecated\n \n fn main() {}"}, {"sha": "db4919f3e09095dfe933485ee0d02a042e1ca9fc", "filename": "src/test/ui/feature-gates/feature-gate-plugin.stderr", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-plugin.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-plugin.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-plugin.stderr?ref=287ceed469e11214ff2650f0aea94e94711aa401", "patch": "@@ -1,4 +1,4 @@\n-error[E0658]: compiler plugins are experimental and possibly buggy\n+error[E0658]: compiler plugins are deprecated and will be removed in 1.44.0\n   --> $DIR/feature-gate-plugin.rs:3:1\n    |\n LL | #![plugin(foo)]\n@@ -7,6 +7,14 @@ LL | #![plugin(foo)]\n    = note: for more information, see https://github.com/rust-lang/rust/issues/29597\n    = help: add `#![feature(plugin)]` to the crate attributes to enable\n \n+warning: use of deprecated attribute `plugin`: compiler plugins are deprecated and will be removed in 1.44.0. See https://github.com/rust-lang/rust/issues/29597\n+  --> $DIR/feature-gate-plugin.rs:3:1\n+   |\n+LL | #![plugin(foo)]\n+   | ^^^^^^^^^^^^^^^ help: remove this attribute\n+   |\n+   = note: `#[warn(deprecated)]` on by default\n+\n error: aborting due to previous error\n \n For more information about this error, try `rustc --explain E0658`."}, {"sha": "6ff67de86feb77fe73b8c65908decdb468c65c87", "filename": "src/test/ui/feature-gates/feature-gate-plugin_registrar.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-plugin_registrar.rs", "raw_url": "https://github.com/rust-lang/rust/raw/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-plugin_registrar.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-plugin_registrar.rs?ref=287ceed469e11214ff2650f0aea94e94711aa401", "patch": "@@ -5,4 +5,6 @@\n #[plugin_registrar]\n pub fn registrar() {}\n //~^ ERROR compiler plugins are experimental\n+//~| WARN `#[plugin_registrar]` is deprecated and will be removed in 1.44.0\n+\n fn main() {}"}, {"sha": "1cf30b7a58e95cf70e8386e7ba2abdd2a29bd7da", "filename": "src/test/ui/feature-gates/feature-gate-plugin_registrar.stderr", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-plugin_registrar.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-plugin_registrar.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-plugin_registrar.stderr?ref=287ceed469e11214ff2650f0aea94e94711aa401", "patch": "@@ -7,6 +7,12 @@ LL | pub fn registrar() {}\n    = note: for more information, see https://github.com/rust-lang/rust/issues/29597\n    = help: add `#![feature(plugin_registrar)]` to the crate attributes to enable\n \n+warning: `#[plugin_registrar]` is deprecated and will be removed in 1.44.0\n+  --> $DIR/feature-gate-plugin_registrar.rs:6:1\n+   |\n+LL | pub fn registrar() {}\n+   | ^^^^^^^^^^^^^^^^^^^^^\n+\n error: aborting due to previous error\n \n For more information about this error, try `rustc --explain E0658`."}, {"sha": "99f328137d4b2cf48bb10133ac54b182686973e4", "filename": "src/test/ui/invalid/invalid-plugin-attr.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Fui%2Finvalid%2Finvalid-plugin-attr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Fui%2Finvalid%2Finvalid-plugin-attr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Finvalid%2Finvalid-plugin-attr.rs?ref=287ceed469e11214ff2650f0aea94e94711aa401", "patch": "@@ -1,7 +1,10 @@\n+// ignore-tidy-linelength\n+\n #![deny(unused_attributes)]\n #![feature(plugin)]\n \n #[plugin(bla)]  //~ ERROR unused attribute\n                 //~^ ERROR should be an inner attribute\n+//~| WARN use of deprecated attribute `plugin`: compiler plugins are deprecated and will be removed in 1.44.0\n \n fn main() {}"}, {"sha": "06ac14dd4671afdc54cdb1308a8f9a56134b207f", "filename": "src/test/ui/invalid/invalid-plugin-attr.stderr", "status": "modified", "additions": 11, "deletions": 3, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Fui%2Finvalid%2Finvalid-plugin-attr.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Fui%2Finvalid%2Finvalid-plugin-attr.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Finvalid%2Finvalid-plugin-attr.stderr?ref=287ceed469e11214ff2650f0aea94e94711aa401", "patch": "@@ -1,17 +1,25 @@\n+warning: use of deprecated attribute `plugin`: compiler plugins are deprecated and will be removed in 1.44.0. See https://github.com/rust-lang/rust/issues/29597\n+  --> $DIR/invalid-plugin-attr.rs:6:1\n+   |\n+LL | #[plugin(bla)]\n+   | ^^^^^^^^^^^^^^ help: remove this attribute\n+   |\n+   = note: `#[warn(deprecated)]` on by default\n+\n error: unused attribute\n-  --> $DIR/invalid-plugin-attr.rs:4:1\n+  --> $DIR/invalid-plugin-attr.rs:6:1\n    |\n LL | #[plugin(bla)]\n    | ^^^^^^^^^^^^^^\n    |\n note: lint level defined here\n-  --> $DIR/invalid-plugin-attr.rs:1:9\n+  --> $DIR/invalid-plugin-attr.rs:3:9\n    |\n LL | #![deny(unused_attributes)]\n    |         ^^^^^^^^^^^^^^^^^\n \n error: crate-level attribute should be an inner attribute: add an exclamation mark: `#![foo]`\n-  --> $DIR/invalid-plugin-attr.rs:4:1\n+  --> $DIR/invalid-plugin-attr.rs:6:1\n    |\n LL | #[plugin(bla)]\n    | ^^^^^^^^^^^^^^"}, {"sha": "b8b76753de8b06c6cb0dfe8c72fc11d5eac479be", "filename": "src/test/ui/malformed/malformed-plugin-1.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Fui%2Fmalformed%2Fmalformed-plugin-1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Fui%2Fmalformed%2Fmalformed-plugin-1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmalformed%2Fmalformed-plugin-1.rs?ref=287ceed469e11214ff2650f0aea94e94711aa401", "patch": "@@ -1,4 +1,7 @@\n+// ignore-tidy-linelength\n+\n #![feature(plugin)]\n #![plugin] //~ ERROR malformed `plugin` attribute\n+//~| WARN use of deprecated attribute `plugin`: compiler plugins are deprecated and will be removed in 1.44.0\n \n fn main() {}"}, {"sha": "14675350255edc6ce574c38a74942673e3db34d5", "filename": "src/test/ui/malformed/malformed-plugin-1.stderr", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Fui%2Fmalformed%2Fmalformed-plugin-1.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Fui%2Fmalformed%2Fmalformed-plugin-1.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmalformed%2Fmalformed-plugin-1.stderr?ref=287ceed469e11214ff2650f0aea94e94711aa401", "patch": "@@ -1,8 +1,16 @@\n error: malformed `plugin` attribute input\n-  --> $DIR/malformed-plugin-1.rs:2:1\n+  --> $DIR/malformed-plugin-1.rs:4:1\n    |\n LL | #![plugin]\n    | ^^^^^^^^^^ help: must be of the form: `#[plugin(name|name(args))]`\n \n+warning: use of deprecated attribute `plugin`: compiler plugins are deprecated and will be removed in 1.44.0. See https://github.com/rust-lang/rust/issues/29597\n+  --> $DIR/malformed-plugin-1.rs:4:1\n+   |\n+LL | #![plugin]\n+   | ^^^^^^^^^^ help: remove this attribute\n+   |\n+   = note: `#[warn(deprecated)]` on by default\n+\n error: aborting due to previous error\n "}, {"sha": "0eabf5203e1f332e0ba16e1cec1ff614586965e4", "filename": "src/test/ui/malformed/malformed-plugin-2.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Fui%2Fmalformed%2Fmalformed-plugin-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Fui%2Fmalformed%2Fmalformed-plugin-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmalformed%2Fmalformed-plugin-2.rs?ref=287ceed469e11214ff2650f0aea94e94711aa401", "patch": "@@ -1,4 +1,7 @@\n+// ignore-tidy-linelength\n+\n #![feature(plugin)]\n #![plugin=\"bleh\"] //~ ERROR malformed `plugin` attribute\n+//~| WARN use of deprecated attribute `plugin`: compiler plugins are deprecated and will be removed in 1.44.0\n \n fn main() {}"}, {"sha": "591b9473741b02620d1d0506155d3d8291de0497", "filename": "src/test/ui/malformed/malformed-plugin-2.stderr", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Fui%2Fmalformed%2Fmalformed-plugin-2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Fui%2Fmalformed%2Fmalformed-plugin-2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmalformed%2Fmalformed-plugin-2.stderr?ref=287ceed469e11214ff2650f0aea94e94711aa401", "patch": "@@ -1,8 +1,16 @@\n error: malformed `plugin` attribute input\n-  --> $DIR/malformed-plugin-2.rs:2:1\n+  --> $DIR/malformed-plugin-2.rs:4:1\n    |\n LL | #![plugin=\"bleh\"]\n    | ^^^^^^^^^^^^^^^^^ help: must be of the form: `#[plugin(name|name(args))]`\n \n+warning: use of deprecated attribute `plugin`: compiler plugins are deprecated and will be removed in 1.44.0. See https://github.com/rust-lang/rust/issues/29597\n+  --> $DIR/malformed-plugin-2.rs:4:1\n+   |\n+LL | #![plugin=\"bleh\"]\n+   | ^^^^^^^^^^^^^^^^^ help: remove this attribute\n+   |\n+   = note: `#[warn(deprecated)]` on by default\n+\n error: aborting due to previous error\n "}, {"sha": "fd3e72c09ba664298f7ae110a1b7620754aed7b4", "filename": "src/test/ui/malformed/malformed-plugin-3.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Fui%2Fmalformed%2Fmalformed-plugin-3.rs", "raw_url": "https://github.com/rust-lang/rust/raw/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Fui%2Fmalformed%2Fmalformed-plugin-3.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmalformed%2Fmalformed-plugin-3.rs?ref=287ceed469e11214ff2650f0aea94e94711aa401", "patch": "@@ -1,4 +1,7 @@\n+// ignore-tidy-linelength\n+\n #![feature(plugin)]\n #![plugin(foo=\"bleh\")] //~ ERROR malformed `plugin` attribute\n+//~| WARN use of deprecated attribute `plugin`: compiler plugins are deprecated and will be removed in 1.44.0\n \n fn main() {}"}, {"sha": "ae24f09ecf0cb5c123e5ed7243c87cedd5cba9cd", "filename": "src/test/ui/malformed/malformed-plugin-3.stderr", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Fui%2Fmalformed%2Fmalformed-plugin-3.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Fui%2Fmalformed%2Fmalformed-plugin-3.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmalformed%2Fmalformed-plugin-3.stderr?ref=287ceed469e11214ff2650f0aea94e94711aa401", "patch": "@@ -1,8 +1,16 @@\n error[E0498]: malformed `plugin` attribute\n-  --> $DIR/malformed-plugin-3.rs:2:1\n+  --> $DIR/malformed-plugin-3.rs:4:1\n    |\n LL | #![plugin(foo=\"bleh\")]\n    | ^^^^^^^^^^^^^^^^^^^^^^ malformed attribute\n \n+warning: use of deprecated attribute `plugin`: compiler plugins are deprecated and will be removed in 1.44.0. See https://github.com/rust-lang/rust/issues/29597\n+  --> $DIR/malformed-plugin-3.rs:4:1\n+   |\n+LL | #![plugin(foo=\"bleh\")]\n+   | ^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute\n+   |\n+   = note: `#[warn(deprecated)]` on by default\n+\n error: aborting due to previous error\n "}, {"sha": "0e022e3234c497cb4fce2d60bee100876c83b72f", "filename": "src/test/ui/multiple-plugin-registrars.stderr", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Fui%2Fmultiple-plugin-registrars.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/287ceed469e11214ff2650f0aea94e94711aa401/src%2Ftest%2Fui%2Fmultiple-plugin-registrars.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmultiple-plugin-registrars.stderr?ref=287ceed469e11214ff2650f0aea94e94711aa401", "patch": "@@ -1,3 +1,15 @@\n+warning: `#[plugin_registrar]` is deprecated and will be removed in 1.44.0\n+  --> $DIR/multiple-plugin-registrars.rs:7:1\n+   |\n+LL | pub fn one() {}\n+   | ^^^^^^^^^^^^^^^\n+\n+warning: `#[plugin_registrar]` is deprecated and will be removed in 1.44.0\n+  --> $DIR/multiple-plugin-registrars.rs:10:1\n+   |\n+LL | pub fn two() {}\n+   | ^^^^^^^^^^^^^^^\n+\n error: multiple plugin registration functions found\n    |\n note: one is here"}]}