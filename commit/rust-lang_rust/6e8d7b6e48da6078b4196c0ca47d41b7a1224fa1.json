{"sha": "6e8d7b6e48da6078b4196c0ca47d41b7a1224fa1", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZlOGQ3YjZlNDhkYTYwNzhiNDE5NmMwY2E0N2Q0MWI3YTEyMjRmYTE=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-07-25T21:21:06Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-07-25T21:21:06Z"}, "message": "Rollup merge of #62930 - iluuu1994:test-for-51559, r=oli-obk\n\nAdd test for #51559\n\nCloses #51559", "tree": {"sha": "c9c0e42dfac594a8608fefbb8cfc5fbfebcfe8bb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c9c0e42dfac594a8608fefbb8cfc5fbfebcfe8bb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6e8d7b6e48da6078b4196c0ca47d41b7a1224fa1", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdOh1CCRBK7hj4Ov3rIwAAdHIIAIZ4bWrxQ2JjNMEFUlPrz3+X\nSjQdugrJ56zuZ/ybZgCqUmemMyVs/HCMyyljSaLzU4mh1Q/YKZLp9w6knAnW27cL\nBcCO1Xbp9nZ7GqsvIPvLentQsNsZd6XHumktobGm2+lkkDxmFQmZuzMSeuO4tHRT\ntqaPBq3xzzsLmAq1Zim9TeDK+d2r5Pl1eQs/wRR4QQy3hQCXW217ZiZ0Q4Iayzg7\n0Nx4ojnzvQBj5vxHcdMBhBdIRhTiscAmcZlSqVpj/kyVvqd6ru1WV+3VOU1fZaBv\n+wZx4yvpoKRoO5bo6ahyjoOi8YTvgl8J3UigyUD6C8rNJxFRA5livKAB6FOMQII=\n=LYVv\n-----END PGP SIGNATURE-----\n", "payload": "tree c9c0e42dfac594a8608fefbb8cfc5fbfebcfe8bb\nparent fe07132c80be874f47ddebe1456d0c3af2d8e36b\nparent f49a96501d4f11cb08c382bd8180a5a5db59213d\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1564089666 +0200\ncommitter GitHub <noreply@github.com> 1564089666 +0200\n\nRollup merge of #62930 - iluuu1994:test-for-51559, r=oli-obk\n\nAdd test for #51559\n\nCloses #51559\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6e8d7b6e48da6078b4196c0ca47d41b7a1224fa1", "html_url": "https://github.com/rust-lang/rust/commit/6e8d7b6e48da6078b4196c0ca47d41b7a1224fa1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6e8d7b6e48da6078b4196c0ca47d41b7a1224fa1/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fe07132c80be874f47ddebe1456d0c3af2d8e36b", "url": "https://api.github.com/repos/rust-lang/rust/commits/fe07132c80be874f47ddebe1456d0c3af2d8e36b", "html_url": "https://github.com/rust-lang/rust/commit/fe07132c80be874f47ddebe1456d0c3af2d8e36b"}, {"sha": "f49a96501d4f11cb08c382bd8180a5a5db59213d", "url": "https://api.github.com/repos/rust-lang/rust/commits/f49a96501d4f11cb08c382bd8180a5a5db59213d", "html_url": "https://github.com/rust-lang/rust/commit/f49a96501d4f11cb08c382bd8180a5a5db59213d"}], "stats": {"total": 18, "additions": 18, "deletions": 0}, "files": [{"sha": "429947269385be53b7f1c71d7b6ff99ed701a51c", "filename": "src/test/ui/consts/issue-51559.rs", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/6e8d7b6e48da6078b4196c0ca47d41b7a1224fa1/src%2Ftest%2Fui%2Fconsts%2Fissue-51559.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6e8d7b6e48da6078b4196c0ca47d41b7a1224fa1/src%2Ftest%2Fui%2Fconsts%2Fissue-51559.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fissue-51559.rs?ref=6e8d7b6e48da6078b4196c0ca47d41b7a1224fa1", "patch": "@@ -0,0 +1,7 @@\n+#![feature(const_raw_ptr_to_usize_cast)]\n+\n+const BAR: *mut () = ((|| 3) as fn() -> i32) as *mut ();\n+pub const FOO: usize = unsafe { BAR as usize };\n+//~^ ERROR it is undefined behavior to use this value\n+\n+fn main() {}"}, {"sha": "917c54ddaef1efeeab049cd327c2a013b591cf3e", "filename": "src/test/ui/consts/issue-51559.stderr", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/6e8d7b6e48da6078b4196c0ca47d41b7a1224fa1/src%2Ftest%2Fui%2Fconsts%2Fissue-51559.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6e8d7b6e48da6078b4196c0ca47d41b7a1224fa1/src%2Ftest%2Fui%2Fconsts%2Fissue-51559.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fissue-51559.stderr?ref=6e8d7b6e48da6078b4196c0ca47d41b7a1224fa1", "patch": "@@ -0,0 +1,11 @@\n+error[E0080]: it is undefined behavior to use this value\n+  --> $DIR/issue-51559.rs:4:1\n+   |\n+LL | pub const FOO: usize = unsafe { BAR as usize };\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ type validation failed: encountered a pointer, but expected initialized plain (non-pointer) bytes\n+   |\n+   = note: The rules on what exactly is undefined behavior aren't clear, so this check might be overzealous. Please open an issue on the rust compiler repository if you believe it should not be considered undefined behavior\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0080`."}]}