{"sha": "ac4644d7de7ec1528061dd4bb9639308c6018ee6", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFjNDY0NGQ3ZGU3ZWMxNTI4MDYxZGQ0YmI5NjM5MzA4YzYwMThlZTY=", "commit": {"author": {"name": "Jed Davis", "email": "jld@panix.com", "date": "2013-10-26T04:22:00Z"}, "committer": {"name": "Jed Davis", "email": "jld@panix.com", "date": "2013-10-29T16:09:20Z"}, "message": "Add another discriminant-size-related test, this time with fields.", "tree": {"sha": "2b7ab78fe05a5a3b48806bcd1b71685c6d9a2da0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2b7ab78fe05a5a3b48806bcd1b71685c6d9a2da0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ac4644d7de7ec1528061dd4bb9639308c6018ee6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ac4644d7de7ec1528061dd4bb9639308c6018ee6", "html_url": "https://github.com/rust-lang/rust/commit/ac4644d7de7ec1528061dd4bb9639308c6018ee6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ac4644d7de7ec1528061dd4bb9639308c6018ee6/comments", "author": {"login": "jld", "id": 254973, "node_id": "MDQ6VXNlcjI1NDk3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/254973?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jld", "html_url": "https://github.com/jld", "followers_url": "https://api.github.com/users/jld/followers", "following_url": "https://api.github.com/users/jld/following{/other_user}", "gists_url": "https://api.github.com/users/jld/gists{/gist_id}", "starred_url": "https://api.github.com/users/jld/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jld/subscriptions", "organizations_url": "https://api.github.com/users/jld/orgs", "repos_url": "https://api.github.com/users/jld/repos", "events_url": "https://api.github.com/users/jld/events{/privacy}", "received_events_url": "https://api.github.com/users/jld/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jld", "id": 254973, "node_id": "MDQ6VXNlcjI1NDk3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/254973?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jld", "html_url": "https://github.com/jld", "followers_url": "https://api.github.com/users/jld/followers", "following_url": "https://api.github.com/users/jld/following{/other_user}", "gists_url": "https://api.github.com/users/jld/gists{/gist_id}", "starred_url": "https://api.github.com/users/jld/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jld/subscriptions", "organizations_url": "https://api.github.com/users/jld/orgs", "repos_url": "https://api.github.com/users/jld/repos", "events_url": "https://api.github.com/users/jld/events{/privacy}", "received_events_url": "https://api.github.com/users/jld/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "472d798dc1c0a7804b54c67b485e134fe097a57e", "url": "https://api.github.com/repos/rust-lang/rust/commits/472d798dc1c0a7804b54c67b485e134fe097a57e", "html_url": "https://github.com/rust-lang/rust/commit/472d798dc1c0a7804b54c67b485e134fe097a57e"}], "stats": {"total": 41, "additions": 41, "deletions": 0}, "files": [{"sha": "c4f4b5e4e37f2014f510cba2f6e1d52635a83bd8", "filename": "src/test/run-pass/small-enums-with-fields.rs", "status": "added", "additions": 41, "deletions": 0, "changes": 41, "blob_url": "https://github.com/rust-lang/rust/blob/ac4644d7de7ec1528061dd4bb9639308c6018ee6/src%2Ftest%2Frun-pass%2Fsmall-enums-with-fields.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ac4644d7de7ec1528061dd4bb9639308c6018ee6/src%2Ftest%2Frun-pass%2Fsmall-enums-with-fields.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fsmall-enums-with-fields.rs?ref=ac4644d7de7ec1528061dd4bb9639308c6018ee6", "patch": "@@ -0,0 +1,41 @@\n+// Copyright 2013 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+#[feature(macro_rules)];\n+\n+use std::mem::size_of;\n+\n+macro_rules! check {\n+    ($t:ty, $sz:expr, $($e:expr, $s:expr),*) => {{\n+        assert_eq!(size_of::<$t>(), $sz);\n+        $({\n+            static S: $t = $e;\n+            let v: $t = $e;\n+            assert_eq!(S, v);\n+            assert_eq!(format!(\"{:?}\", v), ~$s);\n+            assert_eq!(format!(\"{:?}\", S), ~$s);\n+        });*\n+    }}\n+}\n+\n+pub fn main() {\n+    check!(Option<u8>, 2,\n+           None, \"None\",\n+           Some(129u8), \"Some(129u8)\");\n+    check!(Option<i16>, 4,\n+           None, \"None\",\n+           Some(-20000i16), \"Some(-20000i16)\");\n+    check!(Either<u8, i8>, 2,\n+           Left(132u8), \"Left(132u8)\",\n+           Right(-32i8), \"Right(-32i8)\");\n+    check!(Either<u8, i16>, 4,\n+           Left(132u8), \"Left(132u8)\",\n+           Right(-20000i16), \"Right(-20000i16)\");\n+}"}]}