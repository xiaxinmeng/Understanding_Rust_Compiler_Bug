{"sha": "4e1a09844e49a91d0f9dea19561f15d34992d0e8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRlMWEwOTg0NGU0OWE5MWQwZjlkZWExOTU2MWYxNWQzNDk5MmQwZTg=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-04-24T04:46:34Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-04-24T04:46:34Z"}, "message": "auto merge of #13704 : edwardw/rust/doc-hidden, r=alexcrichton\n\nCloses #13698", "tree": {"sha": "c9a7bd966e7df8ff5964c95cb2fc659dc42e5b70", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c9a7bd966e7df8ff5964c95cb2fc659dc42e5b70"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4e1a09844e49a91d0f9dea19561f15d34992d0e8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4e1a09844e49a91d0f9dea19561f15d34992d0e8", "html_url": "https://github.com/rust-lang/rust/commit/4e1a09844e49a91d0f9dea19561f15d34992d0e8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4e1a09844e49a91d0f9dea19561f15d34992d0e8/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0e750adefcb1985fc0fa60a240d9b8abbbc457c5", "url": "https://api.github.com/repos/rust-lang/rust/commits/0e750adefcb1985fc0fa60a240d9b8abbbc457c5", "html_url": "https://github.com/rust-lang/rust/commit/0e750adefcb1985fc0fa60a240d9b8abbbc457c5"}, {"sha": "2cf1e4b0ceb4db8ab48144407f3afa9ccd8ced2c", "url": "https://api.github.com/repos/rust-lang/rust/commits/2cf1e4b0ceb4db8ab48144407f3afa9ccd8ced2c", "html_url": "https://github.com/rust-lang/rust/commit/2cf1e4b0ceb4db8ab48144407f3afa9ccd8ced2c"}], "stats": {"total": 89, "additions": 52, "deletions": 37}, "files": [{"sha": "510241588228ce105ba5e86abda2d487220db2ce", "filename": "src/libsyntax/ext/deriving/clone.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/4e1a09844e49a91d0f9dea19561f15d34992d0e8/src%2Flibsyntax%2Fext%2Fderiving%2Fclone.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e1a09844e49a91d0f9dea19561f15d34992d0e8/src%2Flibsyntax%2Fext%2Fderiving%2Fclone.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fderiving%2Fclone.rs?ref=4e1a09844e49a91d0f9dea19561f15d34992d0e8", "patch": "@@ -13,12 +13,15 @@ use codemap::Span;\n use ext::base::ExtCtxt;\n use ext::build::AstBuilder;\n use ext::deriving::generic::*;\n+use parse::token::InternedString;\n \n pub fn expand_deriving_clone(cx: &mut ExtCtxt,\n                              span: Span,\n                              mitem: @MetaItem,\n                              item: @Item,\n                              push: |@Item|) {\n+    let inline = cx.meta_word(span, InternedString::new(\"inline\"));\n+    let attrs = vec!(cx.attribute(span, inline));\n     let trait_def = TraitDef {\n         span: span,\n         attributes: Vec::new(),\n@@ -32,7 +35,7 @@ pub fn expand_deriving_clone(cx: &mut ExtCtxt,\n                 explicit_self: borrowed_explicit_self(),\n                 args: Vec::new(),\n                 ret_ty: Self,\n-                inline: true,\n+                attributes: attrs,\n                 const_nonmatching: false,\n                 combine_substructure: combine_substructure(|c, s, sub| {\n                     cs_clone(\"Clone\", c, s, sub)"}, {"sha": "92b3788c247443c53791a8eecbb6e8480ac52d09", "filename": "src/libsyntax/ext/deriving/cmp/eq.rs", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/4e1a09844e49a91d0f9dea19561f15d34992d0e8/src%2Flibsyntax%2Fext%2Fderiving%2Fcmp%2Feq.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e1a09844e49a91d0f9dea19561f15d34992d0e8/src%2Flibsyntax%2Fext%2Fderiving%2Fcmp%2Feq.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fderiving%2Fcmp%2Feq.rs?ref=4e1a09844e49a91d0f9dea19561f15d34992d0e8", "patch": "@@ -13,6 +13,7 @@ use codemap::Span;\n use ext::base::ExtCtxt;\n use ext::build::AstBuilder;\n use ext::deriving::generic::*;\n+use parse::token::InternedString;\n \n pub fn expand_deriving_eq(cx: &mut ExtCtxt,\n                           span: Span,\n@@ -31,20 +32,22 @@ pub fn expand_deriving_eq(cx: &mut ExtCtxt,\n     }\n \n     macro_rules! md (\n-        ($name:expr, $f:ident) => {\n+        ($name:expr, $f:ident) => { {\n+            let inline = cx.meta_word(span, InternedString::new(\"inline\"));\n+            let attrs = vec!(cx.attribute(span, inline));\n             MethodDef {\n                 name: $name,\n                 generics: LifetimeBounds::empty(),\n                 explicit_self: borrowed_explicit_self(),\n                 args: vec!(borrowed_self()),\n                 ret_ty: Literal(Path::new(vec!(\"bool\"))),\n-                inline: true,\n+                attributes: attrs,\n                 const_nonmatching: true,\n                 combine_substructure: combine_substructure(|a, b, c| {\n                     $f(a, b, c)\n                 })\n             }\n-        }\n+        } }\n     );\n \n     let trait_def = TraitDef {"}, {"sha": "dd2f90cfa5fae9ac21880ad8a78513c6567d063d", "filename": "src/libsyntax/ext/deriving/cmp/ord.rs", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/4e1a09844e49a91d0f9dea19561f15d34992d0e8/src%2Flibsyntax%2Fext%2Fderiving%2Fcmp%2Ford.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e1a09844e49a91d0f9dea19561f15d34992d0e8/src%2Flibsyntax%2Fext%2Fderiving%2Fcmp%2Ford.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fderiving%2Fcmp%2Ford.rs?ref=4e1a09844e49a91d0f9dea19561f15d34992d0e8", "patch": "@@ -14,27 +14,30 @@ use codemap::Span;\n use ext::base::ExtCtxt;\n use ext::build::AstBuilder;\n use ext::deriving::generic::*;\n+use parse::token::InternedString;\n \n pub fn expand_deriving_ord(cx: &mut ExtCtxt,\n                            span: Span,\n                            mitem: @MetaItem,\n                            item: @Item,\n                            push: |@Item|) {\n     macro_rules! md (\n-        ($name:expr, $op:expr, $equal:expr) => {\n+        ($name:expr, $op:expr, $equal:expr) => { {\n+            let inline = cx.meta_word(span, InternedString::new(\"inline\"));\n+            let attrs = vec!(cx.attribute(span, inline));\n             MethodDef {\n                 name: $name,\n                 generics: LifetimeBounds::empty(),\n                 explicit_self: borrowed_explicit_self(),\n                 args: vec!(borrowed_self()),\n                 ret_ty: Literal(Path::new(vec!(\"bool\"))),\n-                inline: true,\n+                attributes: attrs,\n                 const_nonmatching: false,\n                 combine_substructure: combine_substructure(|cx, span, substr| {\n                     cs_op($op, $equal, cx, span, substr)\n                 })\n             }\n-        }\n+        } }\n     );\n \n     let trait_def = TraitDef {"}, {"sha": "b76caccffecc6095b168fcd4474987124f94bc51", "filename": "src/libsyntax/ext/deriving/cmp/totaleq.rs", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/4e1a09844e49a91d0f9dea19561f15d34992d0e8/src%2Flibsyntax%2Fext%2Fderiving%2Fcmp%2Ftotaleq.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e1a09844e49a91d0f9dea19561f15d34992d0e8/src%2Flibsyntax%2Fext%2Fderiving%2Fcmp%2Ftotaleq.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fderiving%2Fcmp%2Ftotaleq.rs?ref=4e1a09844e49a91d0f9dea19561f15d34992d0e8", "patch": "@@ -13,6 +13,7 @@ use codemap::Span;\n use ext::base::ExtCtxt;\n use ext::build::AstBuilder;\n use ext::deriving::generic::*;\n+use parse::token::InternedString;\n \n pub fn expand_deriving_totaleq(cx: &mut ExtCtxt,\n                                span: Span,\n@@ -33,6 +34,11 @@ pub fn expand_deriving_totaleq(cx: &mut ExtCtxt,\n                        substr)\n     }\n \n+    let inline = cx.meta_word(span, InternedString::new(\"inline\"));\n+    let hidden = cx.meta_word(span, InternedString::new(\"hidden\"));\n+    let doc = cx.meta_list(span, InternedString::new(\"doc\"), vec!(hidden));\n+    let attrs = vec!(cx.attribute(span, inline),\n+                     cx.attribute(span, doc));\n     let trait_def = TraitDef {\n         span: span,\n         attributes: Vec::new(),\n@@ -46,7 +52,7 @@ pub fn expand_deriving_totaleq(cx: &mut ExtCtxt,\n                 explicit_self: borrowed_explicit_self(),\n                 args: vec!(),\n                 ret_ty: nil_ty(),\n-                inline: true,\n+                attributes: attrs,\n                 const_nonmatching: true,\n                 combine_substructure: combine_substructure(|a, b, c| {\n                     cs_total_eq_assert(a, b, c)"}, {"sha": "3ca4f9e28626380da776cee61b04e8c3a0d70cf3", "filename": "src/libsyntax/ext/deriving/cmp/totalord.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/4e1a09844e49a91d0f9dea19561f15d34992d0e8/src%2Flibsyntax%2Fext%2Fderiving%2Fcmp%2Ftotalord.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e1a09844e49a91d0f9dea19561f15d34992d0e8/src%2Flibsyntax%2Fext%2Fderiving%2Fcmp%2Ftotalord.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fderiving%2Fcmp%2Ftotalord.rs?ref=4e1a09844e49a91d0f9dea19561f15d34992d0e8", "patch": "@@ -14,6 +14,7 @@ use codemap::Span;\n use ext::base::ExtCtxt;\n use ext::build::AstBuilder;\n use ext::deriving::generic::*;\n+use parse::token::InternedString;\n \n use std::cmp::{Ordering, Equal, Less, Greater};\n \n@@ -22,6 +23,8 @@ pub fn expand_deriving_totalord(cx: &mut ExtCtxt,\n                                 mitem: @MetaItem,\n                                 item: @Item,\n                                 push: |@Item|) {\n+    let inline = cx.meta_word(span, InternedString::new(\"inline\"));\n+    let attrs = vec!(cx.attribute(span, inline));\n     let trait_def = TraitDef {\n         span: span,\n         attributes: Vec::new(),\n@@ -35,7 +38,7 @@ pub fn expand_deriving_totalord(cx: &mut ExtCtxt,\n                 explicit_self: borrowed_explicit_self(),\n                 args: vec!(borrowed_self()),\n                 ret_ty: Literal(Path::new(vec!(\"std\", \"cmp\", \"Ordering\"))),\n-                inline: true,\n+                attributes: attrs,\n                 const_nonmatching: false,\n                 combine_substructure: combine_substructure(|a, b, c| {\n                     cs_cmp(a, b, c)"}, {"sha": "062f198425b28d0ab7289608e18c26c5063e13ef", "filename": "src/libsyntax/ext/deriving/decodable.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4e1a09844e49a91d0f9dea19561f15d34992d0e8/src%2Flibsyntax%2Fext%2Fderiving%2Fdecodable.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e1a09844e49a91d0f9dea19561f15d34992d0e8/src%2Flibsyntax%2Fext%2Fderiving%2Fdecodable.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fderiving%2Fdecodable.rs?ref=4e1a09844e49a91d0f9dea19561f15d34992d0e8", "patch": "@@ -50,7 +50,7 @@ pub fn expand_deriving_decodable(cx: &mut ExtCtxt,\n                             Borrowed(None, MutMutable))),\n                 ret_ty: Literal(Path::new_(vec!(\"std\", \"result\", \"Result\"), None,\n                                           vec!(~Self, ~Literal(Path::new_local(\"__E\"))), true)),\n-                inline: false,\n+                attributes: Vec::new(),\n                 const_nonmatching: true,\n                 combine_substructure: combine_substructure(|a, b, c| {\n                     decodable_substructure(a, b, c)"}, {"sha": "c225906ed2babafcf00398b5b991b8423cd1fcfc", "filename": "src/libsyntax/ext/deriving/default.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/4e1a09844e49a91d0f9dea19561f15d34992d0e8/src%2Flibsyntax%2Fext%2Fderiving%2Fdefault.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e1a09844e49a91d0f9dea19561f15d34992d0e8/src%2Flibsyntax%2Fext%2Fderiving%2Fdefault.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fderiving%2Fdefault.rs?ref=4e1a09844e49a91d0f9dea19561f15d34992d0e8", "patch": "@@ -13,12 +13,15 @@ use codemap::Span;\n use ext::base::ExtCtxt;\n use ext::build::AstBuilder;\n use ext::deriving::generic::*;\n+use parse::token::InternedString;\n \n pub fn expand_deriving_default(cx: &mut ExtCtxt,\n                             span: Span,\n                             mitem: @MetaItem,\n                             item: @Item,\n                             push: |@Item|) {\n+    let inline = cx.meta_word(span, InternedString::new(\"inline\"));\n+    let attrs = vec!(cx.attribute(span, inline));\n     let trait_def = TraitDef {\n         span: span,\n         attributes: Vec::new(),\n@@ -32,7 +35,7 @@ pub fn expand_deriving_default(cx: &mut ExtCtxt,\n                 explicit_self: None,\n                 args: Vec::new(),\n                 ret_ty: Self,\n-                inline: true,\n+                attributes: attrs,\n                 const_nonmatching: false,\n                 combine_substructure: combine_substructure(|a, b, c| {\n                     default_substructure(a, b, c)"}, {"sha": "ec3d4e0078bc6c5c0037088705bff066048a5c97", "filename": "src/libsyntax/ext/deriving/encodable.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4e1a09844e49a91d0f9dea19561f15d34992d0e8/src%2Flibsyntax%2Fext%2Fderiving%2Fencodable.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e1a09844e49a91d0f9dea19561f15d34992d0e8/src%2Flibsyntax%2Fext%2Fderiving%2Fencodable.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fderiving%2Fencodable.rs?ref=4e1a09844e49a91d0f9dea19561f15d34992d0e8", "patch": "@@ -121,7 +121,7 @@ pub fn expand_deriving_encodable(cx: &mut ExtCtxt,\n                                            vec!(~Tuple(Vec::new()),\n                                                 ~Literal(Path::new_local(\"__E\"))),\n                                            true)),\n-                inline: false,\n+                attributes: Vec::new(),\n                 const_nonmatching: true,\n                 combine_substructure: combine_substructure(|a, b, c| {\n                     encodable_substructure(a, b, c)"}, {"sha": "2b48cd58f50831b1b91a03c2489c9b514c0c4bb1", "filename": "src/libsyntax/ext/deriving/generic.rs", "status": "modified", "additions": 2, "deletions": 16, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/4e1a09844e49a91d0f9dea19561f15d34992d0e8/src%2Flibsyntax%2Fext%2Fderiving%2Fgeneric.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e1a09844e49a91d0f9dea19561f15d34992d0e8/src%2Flibsyntax%2Fext%2Fderiving%2Fgeneric.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fderiving%2Fgeneric.rs?ref=4e1a09844e49a91d0f9dea19561f15d34992d0e8", "patch": "@@ -229,8 +229,7 @@ pub struct MethodDef<'a> {\n     /// Return type\n     pub ret_ty: Ty<'a>,\n \n-    /// Whether to mark this as #[inline]\n-    pub inline: bool,\n+    pub attributes: Vec<ast::Attribute>,\n \n     /// if the value of the nonmatching enums is independent of the\n     /// actual enum variants, i.e. can use _ => .. match.\n@@ -612,23 +611,10 @@ impl<'a> MethodDef<'a> {\n         let fn_decl = cx.fn_decl(args, ret_type);\n         let body_block = cx.block_expr(body);\n \n-        let attrs = if self.inline {\n-            vec!(\n-                cx\n-                      .attribute(trait_.span,\n-                                 cx\n-                                       .meta_word(trait_.span,\n-                                                  InternedString::new(\n-                                                      \"inline\")))\n-            )\n-        } else {\n-            Vec::new()\n-        };\n-\n         // Create the method.\n         @ast::Method {\n             ident: method_ident,\n-            attrs: attrs,\n+            attrs: self.attributes.clone(),\n             generics: fn_generics,\n             explicit_self: explicit_self,\n             fn_style: ast::NormalFn,"}, {"sha": "d367ae61e0b8f3e86d62e417821d0607620110eb", "filename": "src/libsyntax/ext/deriving/hash.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/4e1a09844e49a91d0f9dea19561f15d34992d0e8/src%2Flibsyntax%2Fext%2Fderiving%2Fhash.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e1a09844e49a91d0f9dea19561f15d34992d0e8/src%2Flibsyntax%2Fext%2Fderiving%2Fhash.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fderiving%2Fhash.rs?ref=4e1a09844e49a91d0f9dea19561f15d34992d0e8", "patch": "@@ -14,6 +14,7 @@ use codemap::Span;\n use ext::base::ExtCtxt;\n use ext::build::AstBuilder;\n use ext::deriving::generic::*;\n+use parse::token::InternedString;\n \n pub fn expand_deriving_hash(cx: &mut ExtCtxt,\n                             span: Span,\n@@ -34,6 +35,8 @@ pub fn expand_deriving_hash(cx: &mut ExtCtxt,\n          LifetimeBounds::empty(),\n          Path::new(vec!(\"std\", \"hash\", \"sip\", \"SipState\")))\n     };\n+    let inline = cx.meta_word(span, InternedString::new(\"inline\"));\n+    let attrs = vec!(cx.attribute(span, inline));\n     let hash_trait_def = TraitDef {\n         span: span,\n         attributes: Vec::new(),\n@@ -47,7 +50,7 @@ pub fn expand_deriving_hash(cx: &mut ExtCtxt,\n                 explicit_self: borrowed_explicit_self(),\n                 args: vec!(Ptr(~Literal(args), Borrowed(None, MutMutable))),\n                 ret_ty: nil_ty(),\n-                inline: true,\n+                attributes: attrs,\n                 const_nonmatching: false,\n                 combine_substructure: combine_substructure(|a, b, c| {\n                     hash_substructure(a, b, c)"}, {"sha": "0a7aa591657668441b368b0ee3b0eb1d42462ad3", "filename": "src/libsyntax/ext/deriving/primitive.rs", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/4e1a09844e49a91d0f9dea19561f15d34992d0e8/src%2Flibsyntax%2Fext%2Fderiving%2Fprimitive.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e1a09844e49a91d0f9dea19561f15d34992d0e8/src%2Flibsyntax%2Fext%2Fderiving%2Fprimitive.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fderiving%2Fprimitive.rs?ref=4e1a09844e49a91d0f9dea19561f15d34992d0e8", "patch": "@@ -21,6 +21,8 @@ pub fn expand_deriving_from_primitive(cx: &mut ExtCtxt,\n                                       mitem: @MetaItem,\n                                       item: @Item,\n                                       push: |@Item|) {\n+    let inline = cx.meta_word(span, InternedString::new(\"inline\"));\n+    let attrs = vec!(cx.attribute(span, inline));\n     let trait_def = TraitDef {\n         span: span,\n         attributes: Vec::new(),\n@@ -38,8 +40,8 @@ pub fn expand_deriving_from_primitive(cx: &mut ExtCtxt,\n                                            None,\n                                            vec!(~Self),\n                                            true)),\n-                // liable to cause code-bloat\n-                inline: true,\n+                // #[inline] liable to cause code-bloat\n+                attributes: attrs.clone(),\n                 const_nonmatching: false,\n                 combine_substructure: combine_substructure(|c, s, sub| {\n                     cs_from(\"i64\", c, s, sub)\n@@ -55,8 +57,8 @@ pub fn expand_deriving_from_primitive(cx: &mut ExtCtxt,\n                                            None,\n                                            vec!(~Self),\n                                            true)),\n-                // liable to cause code-bloat\n-                inline: true,\n+                // #[inline] liable to cause code-bloat\n+                attributes: attrs,\n                 const_nonmatching: false,\n                 combine_substructure: combine_substructure(|c, s, sub| {\n                     cs_from(\"u64\", c, s, sub)"}, {"sha": "23877dd29ea79d6c55e909cb7309e8ea33e2416d", "filename": "src/libsyntax/ext/deriving/rand.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4e1a09844e49a91d0f9dea19561f15d34992d0e8/src%2Flibsyntax%2Fext%2Fderiving%2Frand.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e1a09844e49a91d0f9dea19561f15d34992d0e8/src%2Flibsyntax%2Fext%2Fderiving%2Frand.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fderiving%2Frand.rs?ref=4e1a09844e49a91d0f9dea19561f15d34992d0e8", "patch": "@@ -41,7 +41,7 @@ pub fn expand_deriving_rand(cx: &mut ExtCtxt,\n                         Borrowed(None, ast::MutMutable))\n                 ),\n                 ret_ty: Self,\n-                inline: false,\n+                attributes: Vec::new(),\n                 const_nonmatching: false,\n                 combine_substructure: combine_substructure(|a, b, c| {\n                     rand_substructure(a, b, c)"}, {"sha": "b9725361538d1fbc9500d63f640b07711ab9cab1", "filename": "src/libsyntax/ext/deriving/show.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4e1a09844e49a91d0f9dea19561f15d34992d0e8/src%2Flibsyntax%2Fext%2Fderiving%2Fshow.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e1a09844e49a91d0f9dea19561f15d34992d0e8/src%2Flibsyntax%2Fext%2Fderiving%2Fshow.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fderiving%2Fshow.rs?ref=4e1a09844e49a91d0f9dea19561f15d34992d0e8", "patch": "@@ -42,7 +42,7 @@ pub fn expand_deriving_show(cx: &mut ExtCtxt,\n                 explicit_self: borrowed_explicit_self(),\n                 args: vec!(fmtr),\n                 ret_ty: Literal(Path::new(vec!(\"std\", \"fmt\", \"Result\"))),\n-                inline: false,\n+                attributes: Vec::new(),\n                 const_nonmatching: false,\n                 combine_substructure: combine_substructure(|a, b, c| {\n                     show_substructure(a, b, c)"}, {"sha": "449851dd3ea5913aecc03654a5d5f5f55958c801", "filename": "src/libsyntax/ext/deriving/zero.rs", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/4e1a09844e49a91d0f9dea19561f15d34992d0e8/src%2Flibsyntax%2Fext%2Fderiving%2Fzero.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e1a09844e49a91d0f9dea19561f15d34992d0e8/src%2Flibsyntax%2Fext%2Fderiving%2Fzero.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fderiving%2Fzero.rs?ref=4e1a09844e49a91d0f9dea19561f15d34992d0e8", "patch": "@@ -13,12 +13,15 @@ use codemap::Span;\n use ext::base::ExtCtxt;\n use ext::build::AstBuilder;\n use ext::deriving::generic::*;\n+use parse::token::InternedString;\n \n pub fn expand_deriving_zero(cx: &mut ExtCtxt,\n                             span: Span,\n                             mitem: @MetaItem,\n                             item: @Item,\n                             push: |@Item|) {\n+    let inline = cx.meta_word(span, InternedString::new(\"inline\"));\n+    let attrs = vec!(cx.attribute(span, inline));\n     let trait_def = TraitDef {\n         span: span,\n         attributes: Vec::new(),\n@@ -32,7 +35,7 @@ pub fn expand_deriving_zero(cx: &mut ExtCtxt,\n                 explicit_self: None,\n                 args: Vec::new(),\n                 ret_ty: Self,\n-                inline: true,\n+                attributes: attrs.clone(),\n                 const_nonmatching: false,\n                 combine_substructure: combine_substructure(|a, b, c| {\n                     zero_substructure(a, b, c)\n@@ -44,7 +47,7 @@ pub fn expand_deriving_zero(cx: &mut ExtCtxt,\n                 explicit_self: borrowed_explicit_self(),\n                 args: Vec::new(),\n                 ret_ty: Literal(Path::new(vec!(\"bool\"))),\n-                inline: true,\n+                attributes: attrs,\n                 const_nonmatching: false,\n                 combine_substructure: combine_substructure(|cx, span, substr| {\n                     cs_and(|cx, span, _, _| cx.span_bug(span,"}]}