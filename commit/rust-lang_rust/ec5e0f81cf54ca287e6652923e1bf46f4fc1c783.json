{"sha": "ec5e0f81cf54ca287e6652923e1bf46f4fc1c783", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVjNWUwZjgxY2Y1NGNhMjg3ZTY2NTI5MjNlMWJmNDZmNGZjMWM3ODM=", "commit": {"author": {"name": "pierzchalski", "email": "e.a.pierzchalski@gmail.com", "date": "2016-04-15T04:41:54Z"}, "committer": {"name": "pierzchalski", "email": "e.a.pierzchalski@gmail.com", "date": "2016-04-15T04:41:54Z"}, "message": "Add flag for whether an item is default or not.\n\nWe don't want to render default item docs but previously\n`doctraititem` naively delegated to the trait definition in those\ncases.\n\nUpdated tests to also check that this doesn't strip default item\ndocs from the trait definition.", "tree": {"sha": "92b688d85609dd73f22e5ab2d124dc3d275519d5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/92b688d85609dd73f22e5ab2d124dc3d275519d5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ec5e0f81cf54ca287e6652923e1bf46f4fc1c783", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ec5e0f81cf54ca287e6652923e1bf46f4fc1c783", "html_url": "https://github.com/rust-lang/rust/commit/ec5e0f81cf54ca287e6652923e1bf46f4fc1c783", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ec5e0f81cf54ca287e6652923e1bf46f4fc1c783/comments", "author": {"login": "pierzchalski", "id": 1725294, "node_id": "MDQ6VXNlcjE3MjUyOTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1725294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pierzchalski", "html_url": "https://github.com/pierzchalski", "followers_url": "https://api.github.com/users/pierzchalski/followers", "following_url": "https://api.github.com/users/pierzchalski/following{/other_user}", "gists_url": "https://api.github.com/users/pierzchalski/gists{/gist_id}", "starred_url": "https://api.github.com/users/pierzchalski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pierzchalski/subscriptions", "organizations_url": "https://api.github.com/users/pierzchalski/orgs", "repos_url": "https://api.github.com/users/pierzchalski/repos", "events_url": "https://api.github.com/users/pierzchalski/events{/privacy}", "received_events_url": "https://api.github.com/users/pierzchalski/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pierzchalski", "id": 1725294, "node_id": "MDQ6VXNlcjE3MjUyOTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1725294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pierzchalski", "html_url": "https://github.com/pierzchalski", "followers_url": "https://api.github.com/users/pierzchalski/followers", "following_url": "https://api.github.com/users/pierzchalski/following{/other_user}", "gists_url": "https://api.github.com/users/pierzchalski/gists{/gist_id}", "starred_url": "https://api.github.com/users/pierzchalski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pierzchalski/subscriptions", "organizations_url": "https://api.github.com/users/pierzchalski/orgs", "repos_url": "https://api.github.com/users/pierzchalski/repos", "events_url": "https://api.github.com/users/pierzchalski/events{/privacy}", "received_events_url": "https://api.github.com/users/pierzchalski/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d95ca2822cdc67ddec96d16533e23a10d6bfd136", "url": "https://api.github.com/repos/rust-lang/rust/commits/d95ca2822cdc67ddec96d16533e23a10d6bfd136", "html_url": "https://github.com/rust-lang/rust/commit/d95ca2822cdc67ddec96d16533e23a10d6bfd136"}], "stats": {"total": 12, "additions": 8, "deletions": 4}, "files": [{"sha": "ba1fbc75c18a3b3343bac5c448eb4f853e9814e6", "filename": "src/librustdoc/html/render.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/ec5e0f81cf54ca287e6652923e1bf46f4fc1c783/src%2Flibrustdoc%2Fhtml%2Frender.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ec5e0f81cf54ca287e6652923e1bf46f4fc1c783/src%2Flibrustdoc%2Fhtml%2Frender.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender.rs?ref=ec5e0f81cf54ca287e6652923e1bf46f4fc1c783", "patch": "@@ -2489,7 +2489,7 @@ fn render_impl(w: &mut fmt::Formatter, cx: &Context, i: &Impl, link: AssocItemLi\n     }\n \n     fn doctraititem(w: &mut fmt::Formatter, cx: &Context, item: &clean::Item,\n-                    link: AssocItemLink, render_static: bool,\n+                    link: AssocItemLink, render_static: bool, is_default_item: bool,\n                     outer_version: Option<&str>) -> fmt::Result {\n         let shortty = shortty(item);\n         let name = item.name.as_ref().unwrap();\n@@ -2540,7 +2540,7 @@ fn render_impl(w: &mut fmt::Formatter, cx: &Context, i: &Impl, link: AssocItemLi\n             _ => panic!(\"can't make docs for trait item with name {:?}\", item.name)\n         }\n \n-        if !is_static || render_static {\n+        if !is_default_item && (!is_static || render_static) {\n             document(w, cx, item)\n         } else {\n             Ok(())\n@@ -2549,7 +2549,7 @@ fn render_impl(w: &mut fmt::Formatter, cx: &Context, i: &Impl, link: AssocItemLi\n \n     write!(w, \"<div class='impl-items'>\")?;\n     for trait_item in &i.impl_.items {\n-        doctraititem(w, cx, trait_item, link, render_header, outer_version)?;\n+        doctraititem(w, cx, trait_item, link, render_header, false, outer_version)?;\n     }\n \n     fn render_default_items(w: &mut fmt::Formatter,\n@@ -2566,7 +2566,7 @@ fn render_impl(w: &mut fmt::Formatter, cx: &Context, i: &Impl, link: AssocItemLi\n             let did = i.trait_.as_ref().unwrap().def_id().unwrap();\n             let assoc_link = AssocItemLink::GotoSource(did, &i.provided_trait_methods);\n \n-            doctraititem(w, cx, trait_item, assoc_link, render_static,\n+            doctraititem(w, cx, trait_item, assoc_link, render_static, true,\n                          outer_version)?;\n         }\n         Ok(())"}, {"sha": "5eccf97bb5f6f25fda3d1d43ee6f040358221d2e", "filename": "src/test/rustdoc/manual_impl.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ec5e0f81cf54ca287e6652923e1bf46f4fc1c783/src%2Ftest%2Frustdoc%2Fmanual_impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ec5e0f81cf54ca287e6652923e1bf46f4fc1c783/src%2Ftest%2Frustdoc%2Fmanual_impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fmanual_impl.rs?ref=ec5e0f81cf54ca287e6652923e1bf46f4fc1c783", "patch": "@@ -8,6 +8,10 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+// @has manual_impl/trait.T.html\n+// @has  - '//*[@class=\"docblock\"]' 'Docs associated with the trait definition.'\n+// @has  - '//*[@class=\"docblock\"]' 'Docs associated with the trait a_method definition.'\n+// @has  - '//*[@class=\"docblock\"]' 'Docs associated with the trait b_method definition.'\n /// Docs associated with the trait definition.\n pub trait T {\n     /// Docs associated with the trait a_method definition."}]}