{"sha": "92197a551f8210d9f7d8658f60d738e4ea3c7dd6", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkyMTk3YTU1MWY4MjEwZDlmN2Q4NjU4ZjYwZDczOGU0ZWEzYzdkZDY=", "commit": {"author": {"name": "Taylor Yu", "email": "tlyu@mit.edu", "date": "2021-06-19T20:28:32Z"}, "committer": {"name": "Taylor Yu", "email": "tlyu@mit.edu", "date": "2021-07-04T15:04:37Z"}, "message": "E0716: clarify that equivalent code example is erroneous\n\nIn E0716, there is a code block that is equivalent to the erroneous\ncode example. Especially when viewed with `rustc --explain`, it's\nnot obvious that it is also erroneous, and some users have been\nconfused when they try to change their code to match the erroneous\nequivalent.", "tree": {"sha": "12429d62f36c3f8bda70b5cb21078397c7e70293", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/12429d62f36c3f8bda70b5cb21078397c7e70293"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/92197a551f8210d9f7d8658f60d738e4ea3c7dd6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/92197a551f8210d9f7d8658f60d738e4ea3c7dd6", "html_url": "https://github.com/rust-lang/rust/commit/92197a551f8210d9f7d8658f60d738e4ea3c7dd6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/92197a551f8210d9f7d8658f60d738e4ea3c7dd6/comments", "author": {"login": "tlyu", "id": 431873, "node_id": "MDQ6VXNlcjQzMTg3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/431873?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tlyu", "html_url": "https://github.com/tlyu", "followers_url": "https://api.github.com/users/tlyu/followers", "following_url": "https://api.github.com/users/tlyu/following{/other_user}", "gists_url": "https://api.github.com/users/tlyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tlyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tlyu/subscriptions", "organizations_url": "https://api.github.com/users/tlyu/orgs", "repos_url": "https://api.github.com/users/tlyu/repos", "events_url": "https://api.github.com/users/tlyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tlyu/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tlyu", "id": 431873, "node_id": "MDQ6VXNlcjQzMTg3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/431873?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tlyu", "html_url": "https://github.com/tlyu", "followers_url": "https://api.github.com/users/tlyu/followers", "following_url": "https://api.github.com/users/tlyu/following{/other_user}", "gists_url": "https://api.github.com/users/tlyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tlyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tlyu/subscriptions", "organizations_url": "https://api.github.com/users/tlyu/orgs", "repos_url": "https://api.github.com/users/tlyu/repos", "events_url": "https://api.github.com/users/tlyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tlyu/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e062e5d34ee80e0d5da403e8c5609f29e6a7dbcb", "url": "https://api.github.com/repos/rust-lang/rust/commits/e062e5d34ee80e0d5da403e8c5609f29e6a7dbcb", "html_url": "https://github.com/rust-lang/rust/commit/e062e5d34ee80e0d5da403e8c5609f29e6a7dbcb"}], "stats": {"total": 6, "additions": 4, "deletions": 2}, "files": [{"sha": "c3546cd744f7b6be9527aa18cfc3eb1d0805aa74", "filename": "compiler/rustc_error_codes/src/error_codes/E0716.md", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/92197a551f8210d9f7d8658f60d738e4ea3c7dd6/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0716.md", "raw_url": "https://github.com/rust-lang/rust/raw/92197a551f8210d9f7d8658f60d738e4ea3c7dd6/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0716.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0716.md?ref=92197a551f8210d9f7d8658f60d738e4ea3c7dd6", "patch": "@@ -14,14 +14,16 @@ Here, the expression `&foo()` is borrowing the expression `foo()`. As `foo()` is\n a call to a function, and not the name of a variable, this creates a\n **temporary** -- that temporary stores the return value from `foo()` so that it\n can be borrowed. You could imagine that `let p = bar(&foo());` is equivalent to\n-this:\n+the following, which uses an explicit temporary variable.\n+\n+Erroneous code example:\n \n ```compile_fail,E0597\n # fn foo() -> i32 { 22 }\n # fn bar(x: &i32) -> &i32 { x }\n let p = {\n   let tmp = foo(); // the temporary\n-  bar(&tmp)\n+  bar(&tmp) // error: `tmp` does not live long enough\n }; // <-- tmp is freed as we exit this block\n let q = p;\n ```"}]}