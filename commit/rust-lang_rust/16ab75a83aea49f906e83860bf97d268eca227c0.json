{"sha": "16ab75a83aea49f906e83860bf97d268eca227c0", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE2YWI3NWE4M2FlYTQ5ZjkwNmU4Mzg2MGJmOTdkMjY4ZWNhMjI3YzA=", "commit": {"author": {"name": "Florian Diebold", "email": "flodiebold@gmail.com", "date": "2021-08-07T11:11:58Z"}, "committer": {"name": "Florian Diebold", "email": "flodiebold@gmail.com", "date": "2021-08-07T11:12:35Z"}, "message": "Upgrade Chalk", "tree": {"sha": "da977e1316d27c3dc499351d9473957df18107d4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/da977e1316d27c3dc499351d9473957df18107d4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/16ab75a83aea49f906e83860bf97d268eca227c0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/16ab75a83aea49f906e83860bf97d268eca227c0", "html_url": "https://github.com/rust-lang/rust/commit/16ab75a83aea49f906e83860bf97d268eca227c0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/16ab75a83aea49f906e83860bf97d268eca227c0/comments", "author": {"login": "flodiebold", "id": 906069, "node_id": "MDQ6VXNlcjkwNjA2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/906069?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flodiebold", "html_url": "https://github.com/flodiebold", "followers_url": "https://api.github.com/users/flodiebold/followers", "following_url": "https://api.github.com/users/flodiebold/following{/other_user}", "gists_url": "https://api.github.com/users/flodiebold/gists{/gist_id}", "starred_url": "https://api.github.com/users/flodiebold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flodiebold/subscriptions", "organizations_url": "https://api.github.com/users/flodiebold/orgs", "repos_url": "https://api.github.com/users/flodiebold/repos", "events_url": "https://api.github.com/users/flodiebold/events{/privacy}", "received_events_url": "https://api.github.com/users/flodiebold/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flodiebold", "id": 906069, "node_id": "MDQ6VXNlcjkwNjA2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/906069?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flodiebold", "html_url": "https://github.com/flodiebold", "followers_url": "https://api.github.com/users/flodiebold/followers", "following_url": "https://api.github.com/users/flodiebold/following{/other_user}", "gists_url": "https://api.github.com/users/flodiebold/gists{/gist_id}", "starred_url": "https://api.github.com/users/flodiebold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flodiebold/subscriptions", "organizations_url": "https://api.github.com/users/flodiebold/orgs", "repos_url": "https://api.github.com/users/flodiebold/repos", "events_url": "https://api.github.com/users/flodiebold/events{/privacy}", "received_events_url": "https://api.github.com/users/flodiebold/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b8800fd85d705bb91c002a3a16dbf6150c7df20b", "url": "https://api.github.com/repos/rust-lang/rust/commits/b8800fd85d705bb91c002a3a16dbf6150c7df20b", "html_url": "https://github.com/rust-lang/rust/commit/b8800fd85d705bb91c002a3a16dbf6150c7df20b"}], "stats": {"total": 26, "additions": 13, "deletions": 13}, "files": [{"sha": "4d42c1c7be88e9dddbe37a382533a9e8fba74553", "filename": "Cargo.lock", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/16ab75a83aea49f906e83860bf97d268eca227c0/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/16ab75a83aea49f906e83860bf97d268eca227c0/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=16ab75a83aea49f906e83860bf97d268eca227c0", "patch": "@@ -162,9 +162,9 @@ checksum = \"baf1de4339761588bc0619e3cbc0120ee582ebb74b53b4efbf79117bd2da40fd\"\n \n [[package]]\n name = \"chalk-derive\"\n-version = \"0.69.0\"\n+version = \"0.70.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"ef492c0897139b578c495149fda9153ef074f91d07361603d70531b68e2a5c02\"\n+checksum = \"1b29a4ef88867aee29bc709976d9b0a20ddb2c52aeca0bd635893a74fa77d7f6\"\n dependencies = [\n  \"proc-macro2\",\n  \"quote\",\n@@ -174,9 +174,9 @@ dependencies = [\n \n [[package]]\n name = \"chalk-ir\"\n-version = \"0.69.0\"\n+version = \"0.70.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"95066fe8bd77ad2dd53981b87a0b72385695e5caab56d69151873cb5df415b42\"\n+checksum = \"3efd5b260d23af3daebae111ea4066604dd3cdb18ca610358ab2e2a7aab71461\"\n dependencies = [\n  \"bitflags\",\n  \"chalk-derive\",\n@@ -185,9 +185,9 @@ dependencies = [\n \n [[package]]\n name = \"chalk-recursive\"\n-version = \"0.69.0\"\n+version = \"0.70.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"ede3f73bba6510660b5c4fdab5a60a81396ecb0f38f9165fcdf80d62ba017800\"\n+checksum = \"7c8089c69051fa6bfdadb67f6dc951881f99fef6814e0e0c27c47218e34d8adb\"\n dependencies = [\n  \"chalk-derive\",\n  \"chalk-ir\",\n@@ -198,9 +198,9 @@ dependencies = [\n \n [[package]]\n name = \"chalk-solve\"\n-version = \"0.69.0\"\n+version = \"0.70.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"c9539e84bb8ac8960762794ae88e108d6c3e4b2f60d4241d461ddcf2ba8645e1\"\n+checksum = \"3ad0c276126d7787577d22f82785d8f2795318ad30349e66b487a6d6a591e351\"\n dependencies = [\n  \"chalk-derive\",\n  \"chalk-ir\","}, {"sha": "304dbb1b99fb53c7c1509d44febfd6f1153a8d13", "filename": "crates/hir_ty/Cargo.toml", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/16ab75a83aea49f906e83860bf97d268eca227c0/crates%2Fhir_ty%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/16ab75a83aea49f906e83860bf97d268eca227c0/crates%2Fhir_ty%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir_ty%2FCargo.toml?ref=16ab75a83aea49f906e83860bf97d268eca227c0", "patch": "@@ -17,9 +17,9 @@ ena = \"0.14.0\"\n log = \"0.4.8\"\n rustc-hash = \"1.1.0\"\n scoped-tls = \"1\"\n-chalk-solve = { version = \"0.69\", default-features = false }\n-chalk-ir = \"0.69\"\n-chalk-recursive = { version = \"0.69\", default-features = false }\n+chalk-solve = { version = \"0.70\", default-features = false }\n+chalk-ir = \"0.70\"\n+chalk-recursive = { version = \"0.70\", default-features = false }\n la-arena = { version = \"0.2.0\", path = \"../../lib/arena\" }\n once_cell = { version = \"1.5.0\" }\n "}, {"sha": "147c5b5e5272644eff7d64ca753384ea558af734", "filename": "crates/hir_ty/src/traits.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/16ab75a83aea49f906e83860bf97d268eca227c0/crates%2Fhir_ty%2Fsrc%2Ftraits.rs", "raw_url": "https://github.com/rust-lang/rust/raw/16ab75a83aea49f906e83860bf97d268eca227c0/crates%2Fhir_ty%2Fsrc%2Ftraits.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir_ty%2Fsrc%2Ftraits.rs?ref=16ab75a83aea49f906e83860bf97d268eca227c0", "patch": "@@ -3,6 +3,7 @@\n use std::env::var;\n \n use chalk_ir::GoalData;\n+use chalk_recursive::Cache;\n use chalk_solve::{logging_db::LoggingRustIrDatabase, Solver};\n \n use base_db::CrateId;\n@@ -26,9 +27,8 @@ pub(crate) struct ChalkContext<'a> {\n fn create_chalk_solver() -> chalk_recursive::RecursiveSolver<Interner> {\n     let overflow_depth =\n         var(\"CHALK_OVERFLOW_DEPTH\").ok().and_then(|s| s.parse().ok()).unwrap_or(100);\n-    let caching_enabled = true;\n     let max_size = var(\"CHALK_SOLVER_MAX_SIZE\").ok().and_then(|s| s.parse().ok()).unwrap_or(30);\n-    chalk_recursive::RecursiveSolver::new(overflow_depth, max_size, caching_enabled)\n+    chalk_recursive::RecursiveSolver::new(overflow_depth, max_size, Some(Cache::new()))\n }\n \n /// A set of clauses that we assume to be true. E.g. if we are inside this function:"}]}