{"sha": "2319c2d1ba81cf85aaadd809afc1367f7b217757", "node_id": "MDY6Q29tbWl0NzI0NzEyOjIzMTljMmQxYmE4MWNmODVhYWFkZDgwOWFmYzEzNjdmN2IyMTc3NTc=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-04-15T10:57:24Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-04-15T10:57:24Z"}, "message": "syntax: lexer doesn't need a codemap", "tree": {"sha": "8f91447e01c3e5305731932d027bc9a34c78a722", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8f91447e01c3e5305731932d027bc9a34c78a722"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2319c2d1ba81cf85aaadd809afc1367f7b217757", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2319c2d1ba81cf85aaadd809afc1367f7b217757", "html_url": "https://github.com/rust-lang/rust/commit/2319c2d1ba81cf85aaadd809afc1367f7b217757", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2319c2d1ba81cf85aaadd809afc1367f7b217757/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "aa8dc0175df1a5879faf6e573c35d8f038f46107", "url": "https://api.github.com/repos/rust-lang/rust/commits/aa8dc0175df1a5879faf6e573c35d8f038f46107", "html_url": "https://github.com/rust-lang/rust/commit/aa8dc0175df1a5879faf6e573c35d8f038f46107"}], "stats": {"total": 18, "additions": 7, "deletions": 11}, "files": [{"sha": "2b428bb117087028e730a45d244ddfbd38fec4a7", "filename": "src/librustsyntax/parse/comments.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/2319c2d1ba81cf85aaadd809afc1367f7b217757/src%2Flibrustsyntax%2Fparse%2Fcomments.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2319c2d1ba81cf85aaadd809afc1367f7b217757/src%2Flibrustsyntax%2Fparse%2Fcomments.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustsyntax%2Fparse%2Fcomments.rs?ref=2319c2d1ba81cf85aaadd809afc1367f7b217757", "patch": "@@ -155,14 +155,13 @@ fn is_lit(t: token::token) -> bool {\n \n type lit = {lit: str, pos: uint};\n \n-fn gather_comments_and_literals(cm: codemap::codemap,\n-                                span_diagnostic: diagnostic::span_handler,\n+fn gather_comments_and_literals(span_diagnostic: diagnostic::span_handler,\n                                 path: str,\n                                 srdr: io::reader) ->\n    {cmnts: [cmnt], lits: [lit]} {\n     let src = @str::from_bytes(srdr.read_whole_stream());\n     let itr = @interner::mk::<str>(str::hash, str::eq);\n-    let rdr = new_reader(cm, span_diagnostic,\n+    let rdr = new_reader(span_diagnostic,\n                          codemap::new_filemap(path, src, 0u, 0u), itr);\n     let mut comments: [cmnt] = [];\n     let mut literals: [lit] = [];"}, {"sha": "0414e11ab3102185e88e60a05ac064e11bf334db", "filename": "src/librustsyntax/parse/lexer.rs", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/2319c2d1ba81cf85aaadd809afc1367f7b217757/src%2Flibrustsyntax%2Fparse%2Flexer.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2319c2d1ba81cf85aaadd809afc1367f7b217757/src%2Flibrustsyntax%2Fparse%2Flexer.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustsyntax%2Fparse%2Flexer.rs?ref=2319c2d1ba81cf85aaadd809afc1367f7b217757", "patch": "@@ -5,7 +5,6 @@ import diagnostic;\n export reader, new_reader, next_token, is_whitespace;\n \n type reader = @{\n-    cm: codemap::codemap,\n     span_diagnostic: diagnostic::span_handler,\n     src: @str,\n     len: uint,\n@@ -57,12 +56,10 @@ impl reader for reader {\n     }\n }\n \n-fn new_reader(cm: codemap::codemap,\n-              span_diagnostic: diagnostic::span_handler,\n+fn new_reader(span_diagnostic: diagnostic::span_handler,\n               filemap: codemap::filemap,\n               itr: @interner::interner<str>) -> reader {\n-    let r = @{cm: cm,\n-              span_diagnostic: span_diagnostic,\n+    let r = @{span_diagnostic: span_diagnostic,\n               src: filemap.src, len: str::len(*filemap.src),\n               mut col: 0u, mut pos: 0u, mut curr: -1 as char,\n               mut chpos: filemap.start_pos.ch, mut strs: [],"}, {"sha": "e017f42a712cad65c2838ecb9234009915b7f29f", "filename": "src/librustsyntax/parse/parser.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2319c2d1ba81cf85aaadd809afc1367f7b217757/src%2Flibrustsyntax%2Fparse%2Fparser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2319c2d1ba81cf85aaadd809afc1367f7b217757/src%2Flibrustsyntax%2Fparse%2Fparser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustsyntax%2Fparse%2Fparser.rs?ref=2319c2d1ba81cf85aaadd809afc1367f7b217757", "patch": "@@ -104,7 +104,7 @@ fn new_parser_from_file(sess: parse_sess, cfg: ast::crate_cfg, path: str,\n                                        sess.chpos, sess.byte_pos);\n     sess.cm.files += [filemap];\n     let itr = @interner::mk(str::hash, str::eq);\n-    let rdr = lexer::new_reader(sess.cm, sess.span_diagnostic, filemap, itr);\n+    let rdr = lexer::new_reader(sess.span_diagnostic, filemap, itr);\n     ret new_parser(sess, cfg, rdr, ftype);\n }\n \n@@ -116,7 +116,7 @@ fn new_parser_from_source_str(sess: parse_sess, cfg: ast::crate_cfg,\n         (name, ss, source, sess.chpos, sess.byte_pos);\n     sess.cm.files += [filemap];\n     let itr = @interner::mk(str::hash, str::eq);\n-    let rdr = lexer::new_reader(sess.cm, sess.span_diagnostic,\n+    let rdr = lexer::new_reader(sess.span_diagnostic,\n                                 filemap, itr);\n     ret new_parser(sess, cfg, rdr, ftype);\n }"}, {"sha": "ff7a5b6c35e4449bcf3e1e841f949a55008a36dc", "filename": "src/librustsyntax/print/pprust.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2319c2d1ba81cf85aaadd809afc1367f7b217757/src%2Flibrustsyntax%2Fprint%2Fpprust.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2319c2d1ba81cf85aaadd809afc1367f7b217757/src%2Flibrustsyntax%2Fprint%2Fpprust.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustsyntax%2Fprint%2Fpprust.rs?ref=2319c2d1ba81cf85aaadd809afc1367f7b217757", "patch": "@@ -58,7 +58,7 @@ fn print_crate(cm: codemap, span_diagnostic: diagnostic::span_handler,\n                crate: @ast::crate, filename: str, in: io::reader,\n                out: io::writer, ann: pp_ann) {\n     let boxes: [pp::breaks] = [];\n-    let r = comments::gather_comments_and_literals(cm, span_diagnostic,\n+    let r = comments::gather_comments_and_literals(span_diagnostic,\n                                                    filename, in);\n     let s =\n         @{s: pp::mk_printer(out, default_columns),"}]}