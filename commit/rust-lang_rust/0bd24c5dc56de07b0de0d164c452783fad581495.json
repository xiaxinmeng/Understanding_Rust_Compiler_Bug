{"sha": "0bd24c5dc56de07b0de0d164c452783fad581495", "node_id": "C_kwDOAAsO6NoAKDBiZDI0YzVkYzU2ZGUwN2IwZGUwZDE2NGM0NTI3ODNmYWQ1ODE0OTU", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-10-16T15:51:31Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-10-16T15:51:31Z"}, "message": "Rollup merge of #103060 - notriddle:notridddle/help-page, r=GuillaumeGomez\n\nrustdoc: make the help button a link to a page\n\nThis allows you to open the help section in a new browser tab, which is a pretty reasonable thing to want for a documentation page.\n\nPreview: http://notriddle.com/notriddle-rustdoc-demos/help-page/std/index.html", "tree": {"sha": "67bbb2b3cb461ac0b45256910bd5a1facb505e51", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/67bbb2b3cb461ac0b45256910bd5a1facb505e51"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0bd24c5dc56de07b0de0d164c452783fad581495", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjTCiDCRBK7hj4Ov3rIwAAWVkIABqI7u2rwQ9fAbzs99jtnmIH\nAc1Z8/wkgCmWnT/rvivdudqsN5DzrHp65cHqryQdAoYgrTdaj/ifikgVwjKOWEhB\nEyX/iT3nz+xhOm0gtJ+IylBCc+xwDdruCilb/HFii4bYmPiXa8HyrbwbcPUvzFLI\n0jeg1UD9u3fUlwwWQogaTy3PGeOYLkJx2fsh7zRu2/U2V3VfmDRKUwFkpo09YK86\npUNeH4zioMtn5VLGdxtF+qwk9jOwByaTp4rW3fE/GnJTpQRcj57we/iunmYN154k\n/2JZoBOQckLObvlF1kDaFrV25o0sU0Ir8cR8LVqGRAO48+jactIZp2no20lRtu0=\n=2PmZ\n-----END PGP SIGNATURE-----\n", "payload": "tree 67bbb2b3cb461ac0b45256910bd5a1facb505e51\nparent d6506cc0bee265a70ee6734a9a5be058dd37c178\nparent 834448163d9835dee7512d537d86ca6c58e56b84\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1665935491 +0200\ncommitter GitHub <noreply@github.com> 1665935491 +0200\n\nRollup merge of #103060 - notriddle:notridddle/help-page, r=GuillaumeGomez\n\nrustdoc: make the help button a link to a page\n\nThis allows you to open the help section in a new browser tab, which is a pretty reasonable thing to want for a documentation page.\n\nPreview: http://notriddle.com/notriddle-rustdoc-demos/help-page/std/index.html\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0bd24c5dc56de07b0de0d164c452783fad581495", "html_url": "https://github.com/rust-lang/rust/commit/0bd24c5dc56de07b0de0d164c452783fad581495", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0bd24c5dc56de07b0de0d164c452783fad581495/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d6506cc0bee265a70ee6734a9a5be058dd37c178", "url": "https://api.github.com/repos/rust-lang/rust/commits/d6506cc0bee265a70ee6734a9a5be058dd37c178", "html_url": "https://github.com/rust-lang/rust/commit/d6506cc0bee265a70ee6734a9a5be058dd37c178"}, {"sha": "834448163d9835dee7512d537d86ca6c58e56b84", "url": "https://api.github.com/repos/rust-lang/rust/commits/834448163d9835dee7512d537d86ca6c58e56b84", "html_url": "https://github.com/rust-lang/rust/commit/834448163d9835dee7512d537d86ca6c58e56b84"}], "stats": {"total": 223, "additions": 173, "deletions": 50}, "files": [{"sha": "5ce62224d35e54130d87c5c1fcac24162c2578d9", "filename": "src/librustdoc/html/markdown.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/0bd24c5dc56de07b0de0d164c452783fad581495/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0bd24c5dc56de07b0de0d164c452783fad581495/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs?ref=0bd24c5dc56de07b0de0d164c452783fad581495", "patch": "@@ -1433,6 +1433,7 @@ static DEFAULT_ID_MAP: Lazy<FxHashMap<Cow<'static, str>, usize>> = Lazy::new(||\n fn init_id_map() -> FxHashMap<Cow<'static, str>, usize> {\n     let mut map = FxHashMap::default();\n     // This is the list of IDs used in Javascript.\n+    map.insert(\"help\".into(), 1);\n     map.insert(\"settings\".into(), 1);\n     map.insert(\"not-displayed\".into(), 1);\n     map.insert(\"alternative-display\".into(), 1);"}, {"sha": "e303dd8bdaf13a075c0f3a94ecd43bf2d529b33a", "filename": "src/librustdoc/html/render/context.rs", "status": "modified", "additions": 34, "deletions": 0, "changes": 34, "blob_url": "https://github.com/rust-lang/rust/blob/0bd24c5dc56de07b0de0d164c452783fad581495/src%2Flibrustdoc%2Fhtml%2Frender%2Fcontext.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0bd24c5dc56de07b0de0d164c452783fad581495/src%2Flibrustdoc%2Fhtml%2Frender%2Fcontext.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fcontext.rs?ref=0bd24c5dc56de07b0de0d164c452783fad581495", "patch": "@@ -581,6 +581,7 @@ impl<'tcx> FormatRenderer<'tcx> for Context<'tcx> {\n         let crate_name = self.tcx().crate_name(LOCAL_CRATE);\n         let final_file = self.dst.join(crate_name.as_str()).join(\"all.html\");\n         let settings_file = self.dst.join(\"settings.html\");\n+        let help_file = self.dst.join(\"help.html\");\n         let scrape_examples_help_file = self.dst.join(\"scrape-examples-help.html\");\n \n         let mut root_path = self.dst.to_str().expect(\"invalid path\").to_owned();\n@@ -657,6 +658,39 @@ impl<'tcx> FormatRenderer<'tcx> for Context<'tcx> {\n         );\n         shared.fs.write(settings_file, v)?;\n \n+        // Generating help page.\n+        page.title = \"Rustdoc help\";\n+        page.description = \"Documentation for Rustdoc\";\n+        page.root_path = \"./\";\n+\n+        let sidebar = \"<h2 class=\\\"location\\\">Help</h2><div class=\\\"sidebar-elems\\\"></div>\";\n+        let v = layout::render(\n+            &shared.layout,\n+            &page,\n+            sidebar,\n+            |buf: &mut Buffer| {\n+                write!(\n+                    buf,\n+                    \"<div class=\\\"main-heading\\\">\\\n+                     <h1 class=\\\"fqn\\\">Rustdoc help</h1>\\\n+                     <span class=\\\"out-of-band\\\">\\\n+                         <a id=\\\"back\\\" href=\\\"javascript:void(0)\\\" onclick=\\\"history.back();\\\">\\\n+                            Back\\\n+                        </a>\\\n+                     </span>\\\n+                     </div>\\\n+                     <noscript>\\\n+                        <section>\\\n+                            <p>You need to enable Javascript to use keyboard commands or search.</p>\\\n+                            <p>For more information, browse the <a href=\\\"https://doc.rust-lang.org/rustdoc/\\\">rustdoc handbook</a>.</p>\\\n+                        </section>\\\n+                     </noscript>\",\n+                )\n+            },\n+            &shared.style_files,\n+        );\n+        shared.fs.write(help_file, v)?;\n+\n         if shared.layout.scrape_examples_extension {\n             page.title = \"About scraped examples\";\n             page.description = \"How the scraped examples feature works in Rustdoc\";"}, {"sha": "271dd177a4bac058c66b2e23e57986b1c30c7da4", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 11, "deletions": 10, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/0bd24c5dc56de07b0de0d164c452783fad581495/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/0bd24c5dc56de07b0de0d164c452783fad581495/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=0bd24c5dc56de07b0de0d164c452783fad581495", "patch": "@@ -199,7 +199,7 @@ h1, h2, h3, h4, h5, h6,\n .out-of-band,\n span.since,\n a.srclink,\n-#help-button > button,\n+#help-button > a,\n details.rustdoc-toggle.top-doc > summary,\n details.rustdoc-toggle.non-exhaustive > summary,\n .scraped-example-title,\n@@ -974,32 +974,33 @@ so that we can apply CSS-filters to change the arrow color in themes */\n \tcolor: var(--main-color);\n }\n \n-#help-button .popover {\n+/* use larger max-width for help popover, but not for help.html */\n+#help.popover {\n \tmax-width: 600px;\n }\n \n-#help-button .popover::before {\n+#help.popover::before {\n \tright: 48px;\n }\n \n-#help-button dt {\n+#help dt {\n \tfloat: left;\n \tclear: left;\n \tdisplay: block;\n \tmargin-right: 0.5rem;\n }\n-#help-button span.top, #help-button span.bottom {\n+#help span.top, #help span.bottom {\n \ttext-align: center;\n \tdisplay: block;\n \tfont-size: 1.125rem;\n }\n-#help-button span.top {\n+#help span.top {\n \tmargin: 10px 0;\n \tborder-bottom: 1px solid var(--border-color);\n \tpadding-bottom: 4px;\n \tmargin-bottom: 6px;\n }\n-#help-button span.bottom {\n+#help span.bottom {\n \tclear: both;\n \tborder-top: 1px solid var(--border-color);\n }\n@@ -1433,7 +1434,7 @@ h3.variant {\n \toutline: none;\n }\n \n-#settings-menu > a, #help-button > button, #copy-path {\n+#settings-menu > a, #help-button > a, #copy-path {\n \tpadding: 5px;\n \twidth: 33px;\n \tborder: 1px solid var(--border-color);\n@@ -1442,7 +1443,7 @@ h3.variant {\n \tline-height: 1.5;\n }\n \n-#settings-menu > a, #help-button > button {\n+#settings-menu > a, #help-button > a {\n \tpadding: 5px;\n \theight: 100%;\n \tdisplay: block;\n@@ -1490,7 +1491,7 @@ input:checked + .slider {\n \tbackground-color: var(--settings-input-color);\n }\n \n-#help-button > button {\n+#help-button > a {\n \ttext-align: center;\n \t/* Rare exception to specifying font sizes in rem. Since this is acting\n \t   as an icon, it's okay to specify their sizes in pixels. */"}, {"sha": "33817c16808c60eb15403aaf4db617cd59c733d8", "filename": "src/librustdoc/html/static/css/themes/ayu.css", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/0bd24c5dc56de07b0de0d164c452783fad581495/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "raw_url": "https://github.com/rust-lang/rust/raw/0bd24c5dc56de07b0de0d164c452783fad581495/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css?ref=0bd24c5dc56de07b0de0d164c452783fad581495", "patch": "@@ -248,7 +248,7 @@ kbd {\n \tbox-shadow: inset 0 -1px 0 #5c6773;\n }\n \n-#settings-menu > a, #help-button > button {\n+#settings-menu > a, #help-button > a {\n \tcolor: #fff;\n }\n \n@@ -257,7 +257,7 @@ kbd {\n }\n \n #settings-menu > a:hover, #settings-menu > a:focus,\n-#help-button > button:hover, #help-button > button:focus {\n+#help-button > a:hover, #help-button > a:focus {\n \tborder-color: #e0e0e0;\n }\n "}, {"sha": "d88710288b905a9e271e7f946d26d403ee6bddaf", "filename": "src/librustdoc/html/static/css/themes/dark.css", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/0bd24c5dc56de07b0de0d164c452783fad581495/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "raw_url": "https://github.com/rust-lang/rust/raw/0bd24c5dc56de07b0de0d164c452783fad581495/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css?ref=0bd24c5dc56de07b0de0d164c452783fad581495", "patch": "@@ -153,12 +153,12 @@ kbd {\n \tbox-shadow: inset 0 -1px 0 #c6cbd1;\n }\n \n-#settings-menu > a, #help-button > button {\n+#settings-menu > a, #help-button > a {\n \tcolor: #000;\n }\n \n #settings-menu > a:hover, #settings-menu > a:focus,\n-#help-button > button:hover, #help-button > button:focus {\n+#help-button > a:hover, #help-button > a:focus {\n \tborder-color: #ffb900;\n }\n "}, {"sha": "cadc71dab9591e0b6dbc1b14525937dc7e7a8c53", "filename": "src/librustdoc/html/static/css/themes/light.css", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/0bd24c5dc56de07b0de0d164c452783fad581495/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "raw_url": "https://github.com/rust-lang/rust/raw/0bd24c5dc56de07b0de0d164c452783fad581495/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css?ref=0bd24c5dc56de07b0de0d164c452783fad581495", "patch": "@@ -147,8 +147,12 @@ kbd {\n \tbox-shadow: inset 0 -1px 0 #c6cbd1;\n }\n \n+#settings-menu > a, #help-button > a {\n+\tcolor: #000;\n+}\n+\n #settings-menu > a:hover, #settings-menu > a:focus,\n-#help-button > button:hover, #help-button > button:focus {\n+#help-button > a:hover, #help-button > a:focus {\n \tborder-color: #717171;\n }\n "}, {"sha": "db1cc8e451627cd5bbbb0607a7715ee52001e590", "filename": "src/librustdoc/html/static/js/main.js", "status": "modified", "additions": 62, "deletions": 23, "changes": 85, "blob_url": "https://github.com/rust-lang/rust/blob/0bd24c5dc56de07b0de0d164c452783fad581495/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/0bd24c5dc56de07b0de0d164c452783fad581495/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fmain.js?ref=0bd24c5dc56de07b0de0d164c452783fad581495", "patch": "@@ -192,13 +192,18 @@ function loadCss(cssFileName) {\n }\n \n (function() {\n+    const isHelpPage = window.location.pathname.endsWith(\"/help.html\");\n+\n     function loadScript(url) {\n         const script = document.createElement(\"script\");\n         script.src = url;\n         document.head.append(script);\n     }\n \n     getSettingsButton().onclick = event => {\n+        if (event.ctrlKey || event.altKey || event.metaKey) {\n+            return;\n+        }\n         addClass(getSettingsButton(), \"rotate\");\n         event.preventDefault();\n         // Sending request for the CSS and the JS files at the same time so it will\n@@ -873,7 +878,10 @@ function loadCss(cssFileName) {\n         rustdoc_version.appendChild(rustdoc_version_code);\n \n         const container = document.createElement(\"div\");\n-        container.className = \"popover\";\n+        if (!isHelpPage) {\n+            container.className = \"popover\";\n+        }\n+        container.id = \"help\";\n         container.style.display = \"none\";\n \n         const side_by_side = document.createElement(\"div\");\n@@ -885,15 +893,22 @@ function loadCss(cssFileName) {\n         container.appendChild(side_by_side);\n         container.appendChild(rustdoc_version);\n \n-        const help_button = getHelpButton();\n-        help_button.appendChild(container);\n-\n-        container.onblur = helpBlurHandler;\n-        container.onclick = event => {\n-            event.preventDefault();\n-        };\n-        help_button.onblur = helpBlurHandler;\n-        help_button.children[0].onblur = helpBlurHandler;\n+        if (isHelpPage) {\n+            const help_section = document.createElement(\"section\");\n+            help_section.appendChild(container);\n+            document.getElementById(\"main-content\").appendChild(help_section);\n+            container.style.display = \"block\";\n+        } else {\n+            const help_button = getHelpButton();\n+            help_button.appendChild(container);\n+\n+            container.onblur = helpBlurHandler;\n+            container.onclick = event => {\n+                event.preventDefault();\n+            };\n+            help_button.onblur = helpBlurHandler;\n+            help_button.children[0].onblur = helpBlurHandler;\n+        }\n \n         return container;\n     }\n@@ -934,19 +949,43 @@ function loadCss(cssFileName) {\n         }\n     }\n \n-    document.querySelector(`#${HELP_BUTTON_ID} > button`).addEventListener(\"click\", event => {\n-        const target = event.target;\n-        if (target.tagName !== \"BUTTON\" || target.parentElement.id !== HELP_BUTTON_ID) {\n-            return;\n-        }\n-        const menu = getHelpMenu(true);\n-        const shouldShowHelp = menu.style.display === \"none\";\n-        if (shouldShowHelp) {\n-            showHelp();\n-        } else {\n-            window.hidePopoverMenus();\n-        }\n-    });\n+    if (isHelpPage) {\n+        showHelp();\n+        document.querySelector(`#${HELP_BUTTON_ID} > a`).addEventListener(\"click\", event => {\n+            // Already on the help page, make help button a no-op.\n+            const target = event.target;\n+            if (target.tagName !== \"A\" ||\n+                target.parentElement.id !== HELP_BUTTON_ID ||\n+                event.ctrlKey ||\n+                event.altKey ||\n+                event.metaKey) {\n+                return;\n+            }\n+            event.preventDefault();\n+        });\n+    } else {\n+        document.querySelector(`#${HELP_BUTTON_ID} > a`).addEventListener(\"click\", event => {\n+            // By default, have help button open docs in a popover.\n+            // If user clicks with a moderator, though, use default browser behavior,\n+            // probably opening in a new window or tab.\n+            const target = event.target;\n+            if (target.tagName !== \"A\" ||\n+                target.parentElement.id !== HELP_BUTTON_ID ||\n+                event.ctrlKey ||\n+                event.altKey ||\n+                event.metaKey) {\n+                return;\n+            }\n+            event.preventDefault();\n+            const menu = getHelpMenu(true);\n+            const shouldShowHelp = menu.style.display === \"none\";\n+            if (shouldShowHelp) {\n+                showHelp();\n+            } else {\n+                window.hidePopoverMenus();\n+            }\n+        });\n+    }\n \n     setMobileTopbar();\n     addSidebarItems();"}, {"sha": "6e6bb70707dc1982f8c4c542e421798ac500ee3a", "filename": "src/librustdoc/html/templates/page.html", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0bd24c5dc56de07b0de0d164c452783fad581495/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fpage.html", "raw_url": "https://github.com/rust-lang/rust/raw/0bd24c5dc56de07b0de0d164c452783fad581495/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fpage.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fpage.html?ref=0bd24c5dc56de07b0de0d164c452783fad581495", "patch": "@@ -122,7 +122,7 @@ <h2 class=\"location\"></h2> {#- -#}\n                                 placeholder=\"Click or press \u2018S\u2019 to search, \u2018?\u2019 for more options\u2026\" {# -#}\n                                 type=\"search\"> {#- -#}\n                             <div id=\"help-button\" title=\"help\" tabindex=\"-1\"> {#- -#}\n-                                <button type=\"button\">?</button> {#- -#}\n+                                <a href=\"{{page.root_path|safe}}help.html\">?</a> {#- -#}\n                             </div> {#- -#}\n                             <div id=\"settings-menu\" tabindex=\"-1\"> {#- -#}\n                                 <a href=\"{{page.root_path|safe}}settings.html\" title=\"settings\"> {#- -#}"}, {"sha": "51f089cce747f5c0a62cfbee8db98db9851414cc", "filename": "src/test/rustdoc-gui/help-page.goml", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/0bd24c5dc56de07b0de0d164c452783fad581495/src%2Ftest%2Frustdoc-gui%2Fhelp-page.goml", "raw_url": "https://github.com/rust-lang/rust/raw/0bd24c5dc56de07b0de0d164c452783fad581495/src%2Ftest%2Frustdoc-gui%2Fhelp-page.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fhelp-page.goml?ref=0bd24c5dc56de07b0de0d164c452783fad581495", "patch": "@@ -0,0 +1,24 @@\n+// This test ensures that opening the help page in its own tab works.\n+goto: \"file://\" + |DOC_PATH| + \"/help.html\"\n+size: (1000, 1000) // Try desktop size first.\n+wait-for: \"#help\"\n+assert-css: (\"#help\", {\"display\": \"block\"})\n+click: \"#help-button > a\"\n+assert-css: (\"#help\", {\"display\": \"block\"})\n+compare-elements-property: (\".sub-container\", \"#help\", [\"offsetWidth\"])\n+compare-elements-position: (\".sub-container\", \"#help\", (\"x\"))\n+size: (500, 1000) // Try mobile next.\n+assert-css: (\"#help\", {\"display\": \"block\"})\n+compare-elements-property: (\".sub-container\", \"#help\", [\"offsetWidth\"])\n+compare-elements-position: (\".sub-container\", \"#help\", (\"x\"))\n+\n+// This test ensures that opening the help popover without switching pages works.\n+goto: \"file://\" + |DOC_PATH| + \"/test_docs/index.html\"\n+size: (1000, 1000) // Only supported on desktop.\n+assert-false: \"#help\"\n+click: \"#help-button > a\"\n+assert-css: (\"#help\", {\"display\": \"block\"})\n+click: \"#help-button > a\"\n+assert-css: (\"#help\", {\"display\": \"none\"})\n+compare-elements-property-false: (\".sub-container\", \"#help\", [\"offsetWidth\"])\n+compare-elements-position-false: (\".sub-container\", \"#help\", (\"x\"))"}, {"sha": "542db348c3b19a72d9c0d6139e3146d67dbc9559", "filename": "src/test/rustdoc-gui/search-form-elements.goml", "status": "modified", "additions": 31, "deletions": 11, "changes": 42, "blob_url": "https://github.com/rust-lang/rust/blob/0bd24c5dc56de07b0de0d164c452783fad581495/src%2Ftest%2Frustdoc-gui%2Fsearch-form-elements.goml", "raw_url": "https://github.com/rust-lang/rust/raw/0bd24c5dc56de07b0de0d164c452783fad581495/src%2Ftest%2Frustdoc-gui%2Fsearch-form-elements.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsearch-form-elements.goml?ref=0bd24c5dc56de07b0de0d164c452783fad581495", "patch": "@@ -33,7 +33,7 @@ assert-css: (\n     {\"border-color\": \"rgb(197, 197, 197)\"},\n )\n assert-css: (\n-    \"#help-button > button\",\n+    \"#help-button > a\",\n     {\n         \"color\": \"rgb(255, 255, 255)\",\n         \"border-color\": \"rgb(92, 103, 115)\",\n@@ -47,13 +47,21 @@ assert-css: (\n )\n // Only \"border-color\" should change.\n assert-css: (\n-    \"#help-button:hover > button\",\n+    \"#help-button:hover > a\",\n     {\n         \"color\": \"rgb(255, 255, 255)\",\n         \"border-color\": \"rgb(224, 224, 224)\",\n         \"background-color\": \"rgb(20, 25, 32)\",\n     },\n )\n+// Link color inside\n+click: \"#help-button\"\n+assert-css: (\n+    \"#help a\",\n+    {\n+        \"color\": \"rgb(57, 175, 215)\",\n+    },\n+)\n \n assert-css: (\n     \"#settings-menu\",\n@@ -62,7 +70,6 @@ assert-css: (\n assert-css: (\n     \"#settings-menu > a\",\n     {\n-        \"color\": \"rgb(255, 255, 255)\",\n         \"border-color\": \"rgb(92, 103, 115)\",\n         \"background-color\": \"rgb(20, 25, 32)\",\n     },\n@@ -76,7 +83,6 @@ assert-css: (\n assert-css: (\n     \"#settings-menu:hover > a\",\n     {\n-        \"color\": \"rgb(255, 255, 255)\",\n         \"border-color\": \"rgb(224, 224, 224)\",\n         \"background-color\": \"rgb(20, 25, 32)\",\n     },\n@@ -113,7 +119,7 @@ assert-css: (\n     {\"border-color\": \"rgb(221, 221, 221)\"},\n )\n assert-css: (\n-    \"#help-button > button\",\n+    \"#help-button > a\",\n     {\n         \"color\": \"rgb(0, 0, 0)\",\n         \"border-color\": \"rgb(224, 224, 224)\",\n@@ -127,13 +133,21 @@ assert-css: (\n )\n // Only \"border-color\" should change.\n assert-css: (\n-    \"#help-button:hover > button\",\n+    \"#help-button:hover > a\",\n     {\n         \"color\": \"rgb(0, 0, 0)\",\n         \"border-color\": \"rgb(255, 185, 0)\",\n         \"background-color\": \"rgb(240, 240, 240)\",\n     },\n )\n+// Link color inside\n+click: \"#help-button\"\n+assert-css: (\n+    \"#help a\",\n+    {\n+        \"color\": \"rgb(210, 153, 29)\",\n+    },\n+)\n \n assert-css: (\n     \"#settings-menu\",\n@@ -142,7 +156,6 @@ assert-css: (\n assert-css: (\n     \"#settings-menu > a\",\n     {\n-        \"color\": \"rgb(0, 0, 0)\",\n         \"border-color\": \"rgb(224, 224, 224)\",\n         \"background-color\": \"rgb(240, 240, 240)\",\n     },\n@@ -193,7 +206,7 @@ assert-css: (\n     {\"border-color\": \"rgb(0, 0, 0)\"},\n )\n assert-css: (\n-    \"#help-button > button\",\n+    \"#help-button > a\",\n     {\n         \"color\": \"rgb(0, 0, 0)\",\n         \"border-color\": \"rgb(224, 224, 224)\",\n@@ -207,13 +220,21 @@ assert-css: (\n )\n // Only \"border-color\" should change.\n assert-css: (\n-    \"#help-button:hover > button\",\n+    \"#help-button:hover > a\",\n     {\n         \"color\": \"rgb(0, 0, 0)\",\n         \"border-color\": \"rgb(113, 113, 113)\",\n         \"background-color\": \"rgb(255, 255, 255)\",\n     },\n )\n+// Link color inside\n+click: \"#help-button\"\n+assert-css: (\n+    \"#help a\",\n+    {\n+        \"color\": \"rgb(56, 115, 173)\",\n+    },\n+)\n \n assert-css: (\n     \"#settings-menu\",\n@@ -222,7 +243,6 @@ assert-css: (\n assert-css: (\n     \"#settings-menu > a\",\n     {\n-        \"color\": \"rgb(56, 115, 173)\",\n         \"border-color\": \"rgb(224, 224, 224)\",\n         \"background-color\": \"rgb(255, 255, 255)\",\n     },\n@@ -236,7 +256,7 @@ assert-css: (\n assert-css: (\n     \"#settings-menu:hover > a\",\n     {\n-        \"color\": \"rgb(56, 115, 173)\",\n+        \"color\": \"rgb(0, 0, 0)\",\n         \"border-color\": \"rgb(113, 113, 113)\",\n         \"background-color\": \"rgb(255, 255, 255)\",\n     },"}]}