{"sha": "48fc948ca3548d5bdcc479b5f9c317767d941e3b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ4ZmM5NDhjYTM1NDhkNWJkY2M0NzliNWY5YzMxNzc2N2Q5NDFlM2I=", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2020-12-29T15:18:31Z"}, "committer": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2021-01-23T01:18:11Z"}, "message": "clippy dev crater: address more review commetns\n\nmake serde a feature-dep\nsave clippy version in the crater log", "tree": {"sha": "cfeb2c545702df3c5a8e44def604cc750005f984", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cfeb2c545702df3c5a8e44def604cc750005f984"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/48fc948ca3548d5bdcc479b5f9c317767d941e3b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/48fc948ca3548d5bdcc479b5f9c317767d941e3b", "html_url": "https://github.com/rust-lang/rust/commit/48fc948ca3548d5bdcc479b5f9c317767d941e3b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/48fc948ca3548d5bdcc479b5f9c317767d941e3b/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "94a73d7b11d849441cd38b015393c1544422468b", "url": "https://api.github.com/repos/rust-lang/rust/commits/94a73d7b11d849441cd38b015393c1544422468b", "html_url": "https://github.com/rust-lang/rust/commit/94a73d7b11d849441cd38b015393c1544422468b"}], "stats": {"total": 35, "additions": 24, "deletions": 11}, "files": [{"sha": "4268ef80282ee84f65f143760fa1ad4c71468b50", "filename": "clippy_dev/Cargo.toml", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/48fc948ca3548d5bdcc479b5f9c317767d941e3b/clippy_dev%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/48fc948ca3548d5bdcc479b5f9c317767d941e3b/clippy_dev%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_dev%2FCargo.toml?ref=48fc948ca3548d5bdcc479b5f9c317767d941e3b", "patch": "@@ -8,18 +8,18 @@ edition = \"2018\"\n [dependencies]\n bytecount = \"0.6\"\n clap = \"2.33\"\n-flate2 = { version = \"1.0.19\" , optional = true}\n+flate2 = { version = \"1.0.19\", optional = true }\n itertools = \"0.9\"\n opener = \"0.4\"\n regex = \"1\"\n-serde = { version = \"1.0\", features = [\"derive\"]}\n-serde_json = { version = \"1.0\" , optional = true}\n+serde = { version = \"1.0\", features = [\"derive\"], optional = true }\n+serde_json = { version = \"1.0\", optional = true }\n shell-escape = \"0.1\"\n-tar = { version = \"0.4.30\" , optional = true}\n-toml = { version = \"0.5\" , optional = true}\n-ureq = { version = \"2.0.0-rc3\" , optional = true}\n+tar = { version = \"0.4.30\", optional = true }\n+toml = { version = \"0.5\", optional = true }\n+ureq = { version = \"2.0.0-rc3\", optional = true }\n walkdir = \"2\"\n \n [features]\n-crater = [\"flate2\", \"serde_json\", \"tar\", \"toml\", \"ureq\"]\n+crater = [\"flate2\", \"serde_json\", \"tar\", \"toml\", \"ureq\", \"serde\"]\n deny-warnings = []"}, {"sha": "98a4af3591ea21b224a7737bed7659ce2e62fd03", "filename": "clippy_dev/src/crater.rs", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/48fc948ca3548d5bdcc479b5f9c317767d941e3b/clippy_dev%2Fsrc%2Fcrater.rs", "raw_url": "https://github.com/rust-lang/rust/raw/48fc948ca3548d5bdcc479b5f9c317767d941e3b/clippy_dev%2Fsrc%2Fcrater.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_dev%2Fsrc%2Fcrater.rs?ref=48fc948ca3548d5bdcc479b5f9c317767d941e3b", "patch": "@@ -216,6 +216,12 @@ pub fn run(clap_config: &ArgMatches) {\n         cargo_clippy_path.display()\n     );\n \n+    let clippy_ver = std::process::Command::new(\"target/debug/cargo-clippy\")\n+        .arg(\"--version\")\n+        .output()\n+        .map(|o| String::from_utf8_lossy(&o.stdout).into_owned())\n+        .expect(\"could not get clippy version!\");\n+\n     // download and extract the crates, then run clippy on them and collect clippys warnings\n     // flatten into one big list of warnings\n \n@@ -274,6 +280,7 @@ pub fn run(clap_config: &ArgMatches) {\n     all_msgs.push(stats_formatted);\n \n     // save the text into mini-crater/logs.txt\n-    let text = all_msgs.join(\"\");\n+    let mut text = clippy_ver; // clippy version number on top\n+    text.push_str(&format!(\"\\n{}\", all_msgs.join(\"\")));\n     write(\"mini-crater/logs.txt\", text).unwrap();\n }"}, {"sha": "c47aabc2e0aa3b3e3ada087ada5deb5b89a1c28b", "filename": "clippy_dev/src/main.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/48fc948ca3548d5bdcc479b5f9c317767d941e3b/clippy_dev%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/48fc948ca3548d5bdcc479b5f9c317767d941e3b/clippy_dev%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_dev%2Fsrc%2Fmain.rs?ref=48fc948ca3548d5bdcc479b5f9c317767d941e3b", "patch": "@@ -65,7 +65,7 @@ fn get_clap_config<'a>() -> ArgMatches<'a> {\n         );\n \n     let app = App::new(\"Clippy developer tooling\")\n-            .subcommand(\n+        .subcommand(\n             SubCommand::with_name(\"bless\")\n                 .about(\"bless the test output changes\")\n                 .arg("}, {"sha": "f9084dc8321b997f69abd87272efbf0cf7a848b8", "filename": "mini-crater/logs.txt", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/48fc948ca3548d5bdcc479b5f9c317767d941e3b/mini-crater%2Flogs.txt", "raw_url": "https://github.com/rust-lang/rust/raw/48fc948ca3548d5bdcc479b5f9c317767d941e3b/mini-crater%2Flogs.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mini-crater%2Flogs.txt?ref=48fc948ca3548d5bdcc479b5f9c317767d941e3b", "patch": "@@ -1,3 +1,5 @@\n+clippy 0.0.212 (0d8a27a6f 2020-12-28)\n+\n cargo/0.49.0//home/matthias/.rustup/toolchains/nightly-2020-12-20-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/macros/mod.rs:393:34 clippy::match_same_arms \"this `match` has identical arm bodies\"\n cargo/0.49.0/build.rs:1:null clippy::cargo_common_metadata \"package `cargo` is missing `package.categories` metadata\"\n cargo/0.49.0/build.rs:1:null clippy::cargo_common_metadata \"package `cargo` is missing `package.keywords` metadata\"\n@@ -107,6 +109,7 @@ cargo/0.49.0/src/cargo/core/compiler/build_context/target_info.rs:96:31 clippy::\n cargo/0.49.0/src/cargo/core/compiler/build_context/target_info.rs:98:5 clippy::must_use_candidate \"this method could have a `#[must_use]` attribute\"\n cargo/0.49.0/src/cargo/core/compiler/build_plan.rs:4:9 clippy::doc_markdown \"you should put `BuildPlan` between ticks in the documentation\"\n cargo/0.49.0/src/cargo/core/compiler/build_plan.rs:5:66 clippy::doc_markdown \"you should put `BuildPlan` between ticks in the documentation\"\n+cargo/0.49.0/src/cargo/core/compiler/build_plan.rs:66:40 clippy::ptr_arg \"writing `&PathBuf` instead of `&Path` involves a new object where a slice will do.\"\n cargo/0.49.0/src/cargo/core/compiler/compilation.rs:150:5 clippy::missing_errors_doc \"docs for function returning `Result` missing `# Errors` section\"\n cargo/0.49.0/src/cargo/core/compiler/compilation.rs:169:5 clippy::missing_errors_doc \"docs for function returning `Result` missing `# Errors` section\"\n cargo/0.49.0/src/cargo/core/compiler/compilation.rs:185:5 clippy::missing_errors_doc \"docs for function returning `Result` missing `# Errors` section\"\n@@ -237,6 +240,8 @@ cargo/0.49.0/src/cargo/core/compiler/mod.rs:364:5 clippy::items_after_statements\n cargo/0.49.0/src/cargo/core/compiler/mod.rs:364:5 clippy::unnecessary_wraps \"this function's return value is unnecessarily wrapped by `Result`\"\n cargo/0.49.0/src/cargo/core/compiler/mod.rs:392:45 clippy::redundant_closure_for_method_calls \"redundant closure found\"\n cargo/0.49.0/src/cargo/core/compiler/mod.rs:415:23 clippy::single_match_else \"you seem to be trying to use match for destructuring a single pattern. Consider using `if let`\"\n+cargo/0.49.0/src/cargo/core/compiler/mod.rs:464:18 clippy::ptr_arg \"writing `&PathBuf` instead of `&Path` involves a new object where a slice will do.\"\n+cargo/0.49.0/src/cargo/core/compiler/mod.rs:488:61 clippy::ptr_arg \"writing `&PathBuf` instead of `&Path` involves a new object where a slice will do.\"\n cargo/0.49.0/src/cargo/core/compiler/mod.rs:667:15 clippy::similar_names \"binding's name is too similar to existing binding\"\n cargo/0.49.0/src/cargo/core/compiler/mod.rs:693:1 clippy::unnecessary_wraps \"this function's return value is unnecessarily wrapped by `Result`\"\n cargo/0.49.0/src/cargo/core/compiler/mod.rs:725:42 clippy::match_same_arms \"this `match` has identical arm bodies\"\n@@ -3059,9 +3064,9 @@ ripgrep/12.1.1/crates/core/search.rs:533:5 clippy::cast_precision_loss \"casting\n ripgrep/12.1.1/crates/core/subject.rs:20:1 clippy::module_name_repetitions \"item name starts with its containing module's name\"\n ripgrep/12.1.1/crates/core/subject.rs:4:1 clippy::single_component_path_imports \"this import is redundant\"\n syn/1.0.54/build.rs:1:null clippy::cargo_common_metadata \"package `syn` is missing `package.keywords` metadata\"\n-syn/1.0.54/build.rs:1:null clippy::multiple_crate_versions \"could not read cargo metadata: failed to run `cargo metadata`:     Blocking waiting for file lock on package cache\\n    Blocking waiting for file lock on package cache\\n    Blocking waiting for file lock on package cache\\n Downloading crates ...\\n  Downloaded ref-cast v1.0.5\\n  Downloaded ref-cast-impl v1.0.5\\n  Downloaded syn-test-suite v0.0.0\\nerror: failed to verify the checksum of `syn-test-suite v0.0.0`\"\n+syn/1.0.54/build.rs:1:null clippy::multiple_crate_versions \"could not read cargo metadata: failed to run `cargo metadata`:  Downloading crates ...\\n  Downloaded dtoa v0.4.7\\n  Downloaded anyhow v1.0.37\\n  Downloaded syn-test-suite v0.0.0\\nerror: failed to verify the checksum of `syn-test-suite v0.0.0`\"\n syn/1.0.54/src/lib.rs:1:null clippy::cargo_common_metadata \"package `syn` is missing `package.keywords` metadata\"\n-syn/1.0.54/src/lib.rs:1:null clippy::multiple_crate_versions \"could not read cargo metadata: failed to run `cargo metadata`:  Downloading crates ...\\n  Downloaded openssl-sys v0.9.60\\n  Downloaded syn-test-suite v0.0.0\\nerror: failed to verify the checksum of `syn-test-suite v0.0.0`\"\n+syn/1.0.54/src/lib.rs:1:null clippy::multiple_crate_versions \"could not read cargo metadata: failed to run `cargo metadata`:  Downloading crates ...\\n  Downloaded syn-test-suite v0.0.0\\nerror: failed to verify the checksum of `syn-test-suite v0.0.0`\"\n syn/1.0.54/src/lit.rs:1397:40 clippy::redundant_else \"redundant else block\"\n syn/1.0.54/src/lit.rs:1405:28 clippy::redundant_else \"redundant else block\"\n syn/1.0.54/src/lit.rs:1485:32 clippy::redundant_else \"redundant else block\"\n@@ -3293,6 +3298,7 @@ clippy::write_with_newline 2\n clippy::filter_map_next 3\n clippy::fn_params_excessive_bools 3\n clippy::mut_mut 3\n+clippy::ptr_arg 3\n clippy::zero_ptr 3\n clippy::if_same_then_else 4\n clippy::let_underscore_drop 4"}]}