{"sha": "e47f410536899d2653f86ff374809f1c63ec8ae6", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU0N2Y0MTA1MzY4OTlkMjY1M2Y4NmZmMzc0ODA5ZjFjNjNlYzhhZTY=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-11-01T23:12:19Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-11-05T20:23:10Z"}, "message": "Use LLVM directly from the build directory\n\nThis will cut out the few seconds it takes to run make install.", "tree": {"sha": "95d935ba499efd99fa439166d214ee029a302a2d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/95d935ba499efd99fa439166d214ee029a302a2d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e47f410536899d2653f86ff374809f1c63ec8ae6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e47f410536899d2653f86ff374809f1c63ec8ae6", "html_url": "https://github.com/rust-lang/rust/commit/e47f410536899d2653f86ff374809f1c63ec8ae6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e47f410536899d2653f86ff374809f1c63ec8ae6/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "26bb6716ef5593fc9425b9cdd54054108b6c1b96", "url": "https://api.github.com/repos/rust-lang/rust/commits/26bb6716ef5593fc9425b9cdd54054108b6c1b96", "html_url": "https://github.com/rust-lang/rust/commit/26bb6716ef5593fc9425b9cdd54054108b6c1b96"}], "stats": {"total": 16, "additions": 6, "deletions": 10}, "files": [{"sha": "00e7929d5767f83a30c2b56d6e2bfc93a9465dad", "filename": "configure", "status": "modified", "additions": 5, "deletions": 9, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/e47f410536899d2653f86ff374809f1c63ec8ae6/configure", "raw_url": "https://github.com/rust-lang/rust/raw/e47f410536899d2653f86ff374809f1c63ec8ae6/configure", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/configure?ref=e47f410536899d2653f86ff374809f1c63ec8ae6", "patch": "@@ -414,9 +414,6 @@ putvar CFG_LLVM_LDFLAGS\n putvar CFG_LLVM_LIBS\n putvar CFG_LLVM_TRIPLE\n \n-LLVM_BUILD_DIR=llvm/build\n-LLVM_INST_DIR=llvm/install\n-\n step_msg \"making directories\"\n \n for i in \\\n@@ -425,7 +422,7 @@ for i in \\\n     dl \\\n     test/run-pass test/run-fail test/compile-fail \\\n     test/bench test/perf test/pretty \\\n-    $LLVM_BUILD_DIR $LLVM_INST_DIR\n+    llvm\n do\n     make_dir $i\n done\n@@ -499,13 +496,12 @@ msg\n # Configure llvm. Here we go...\n step_msg \"configuring LLVM\"\n \n-CFG_LLVM_SRC_DIR=${CFG_SRC_DIR}/src/llvm\n-CFG_LLVM_BUILD_DIR=${CFG_BUILD_DIR}/${LLVM_BUILD_DIR}\n-CFG_LLVM_INST_DIR=${CFG_BUILD_DIR}/${LLVM_INST_DIR}\n+CFG_LLVM_SRC_DIR=${CFG_SRC_DIR}src/llvm\n+CFG_LLVM_BUILD_DIR=${CFG_BUILD_DIR}/llvm\n+CFG_LLVM_INST_DIR=${CFG_LLVM_BUILD_DIR}/Release+Asserts\n \n LLVM_TARGETS=\"--enable-targets=x86,x86_64\"\n LLVM_DISABLE=\"--disable-docs\"\n-LLVM_PREFIX=\"--prefix=${CFG_LLVM_INST_DIR}\"\n LLVM_BUILD=\"--build=${CFG_HOST_TRIPLE}\"\n LLVM_HOST=\"--host=${CFG_HOST_TRIPLE}\"\n LLVM_TARGET=\"--target=${CFG_HOST_TRIPLE}\"\n@@ -529,7 +525,7 @@ CFLAGS=$LLVM_CFLAGS\n CXXFLAGS=$LLVM_CXXFLAGS\n LDFLAGS=$LLVM_LDFLAGS\n \n-LLVM_FLAGS=\"$LLVM_TARGETS $LLVM_DISABLE $LLVM_PREFIX $LLVM_BUILD $LLVM_HOST $LLVM_TARGET\"\n+LLVM_FLAGS=\"$LLVM_TARGETS $LLVM_DISABLE $LLVM_BUILD $LLVM_HOST $LLVM_TARGET\"\n \n export CXX\n export CC"}, {"sha": "2743c289d487264a06e11d20d3a693f19e4a9514", "filename": "mk/llvm.mk", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e47f410536899d2653f86ff374809f1c63ec8ae6/mk%2Fllvm.mk", "raw_url": "https://github.com/rust-lang/rust/raw/e47f410536899d2653f86ff374809f1c63ec8ae6/mk%2Fllvm.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fllvm.mk?ref=e47f410536899d2653f86ff374809f1c63ec8ae6", "patch": "@@ -2,4 +2,4 @@\n \n $(CFG_LLVM_INST_DIR)/bin/llc:\n \t@$(call E, make: llvm)\n-\t$(Q)make install -C $(CFG_LLVM_BUILD_DIR)\n\\ No newline at end of file\n+\t$(Q)make -C $(CFG_LLVM_BUILD_DIR)\n\\ No newline at end of file"}]}