{"sha": "8e7786a2d9285fc79ec595d85081064560b9d4e4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhlNzc4NmEyZDkyODVmYzc5ZWM1OTVkODUwODEwNjQ1NjBiOWQ0ZTQ=", "commit": {"author": {"name": "David Wood", "email": "david@davidtw.co", "date": "2018-11-05T13:35:30Z"}, "committer": {"name": "David Wood", "email": "david@davidtw.co", "date": "2018-11-05T16:34:53Z"}, "message": "Add run-pass test for reinitialized unions.\n\nThis commit adds a run-pass test for the subset of\n`src/test/ui/borrowck/borrowck-union-move-assign.rs` that is intended to\npass as the union is reinitialized.", "tree": {"sha": "c8ee27e4b78de4a7753e87f95faf17865b5dbbc5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c8ee27e4b78de4a7753e87f95faf17865b5dbbc5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8e7786a2d9285fc79ec595d85081064560b9d4e4", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEWwgxPGhT5b/6kagXAXYLT59T8VQFAlvgcS0ACgkQAXYLT59T\n8VSe0g//Tik/VuZfhtR3sbudQuK5VzP70BfRCRq4V9Vh0U3A52Dwwf0bVetB4S6v\nj+D3ugSdX6R4kiJPVWG5kSL0CxD0iIZHNQDvWRqjhhXu7gwbHZ14dxKSUkO+FEq8\nAssY62NlcprviAKu6Lc2DsABy3SvSTOzqIgwxxyL8FxyZSNGLy5TXiBcOyBxpqO8\nzF2yY/DWeCPHam/91r7FLKTfY/dpCQJpAFNhrdur45Slwvytvw1vZGnNqZ+g3cyy\nH4IqTv+ydCagwsduXqJMlUzMXtKGVYUaQk5vskEYT6/tDwnfANKYQiEDd1i+lfZr\nl/4jPonsSFRwDhW/ln8Ibww+w69Nbfi1I+hZLbEXN/Z0q45+VTQZGPkz+XT2Gdw4\nNj45dqs+sMZnz0X1sNLKAe4XG6uVxeOsriSqhK2tp+XLngFiLjvN8j22vqPDODkZ\nhcU3h5zQpGjkb6IAH296Z7d7Ng66iYaz7dCRbWnnaodb0yKfy2Cjs8z1O1a440/c\ncJ9eMQIzPjilxm+3jSOFBGb0cp6GeL3bpS4HBvs1mLOMTcozFeF/sPrSlsuMT1wM\nZPasGOrzI0Oc9b2U4wT84a8CFBx+zz4Sp4zmKiMQ4ogVmdqb+JNgGSk0MFj33otd\ney9cPRLtEbMt1d8Hy4mx3k35T+VYISn0B27D5+UrsG2rAJaR6t8=\n=Muva\n-----END PGP SIGNATURE-----", "payload": "tree c8ee27e4b78de4a7753e87f95faf17865b5dbbc5\nparent a4e094562122d9839a9b247ace2be3c4b3724b47\nauthor David Wood <david@davidtw.co> 1541424930 +0100\ncommitter David Wood <david@davidtw.co> 1541435693 +0100\n\nAdd run-pass test for reinitialized unions.\n\nThis commit adds a run-pass test for the subset of\n`src/test/ui/borrowck/borrowck-union-move-assign.rs` that is intended to\npass as the union is reinitialized.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8e7786a2d9285fc79ec595d85081064560b9d4e4", "html_url": "https://github.com/rust-lang/rust/commit/8e7786a2d9285fc79ec595d85081064560b9d4e4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8e7786a2d9285fc79ec595d85081064560b9d4e4/comments", "author": {"login": "davidtwco", "id": 1295100, "node_id": "MDQ6VXNlcjEyOTUxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1295100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidtwco", "html_url": "https://github.com/davidtwco", "followers_url": "https://api.github.com/users/davidtwco/followers", "following_url": "https://api.github.com/users/davidtwco/following{/other_user}", "gists_url": "https://api.github.com/users/davidtwco/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidtwco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidtwco/subscriptions", "organizations_url": "https://api.github.com/users/davidtwco/orgs", "repos_url": "https://api.github.com/users/davidtwco/repos", "events_url": "https://api.github.com/users/davidtwco/events{/privacy}", "received_events_url": "https://api.github.com/users/davidtwco/received_events", "type": "User", "site_admin": false}, "committer": {"login": "davidtwco", "id": 1295100, "node_id": "MDQ6VXNlcjEyOTUxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1295100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidtwco", "html_url": "https://github.com/davidtwco", "followers_url": "https://api.github.com/users/davidtwco/followers", "following_url": "https://api.github.com/users/davidtwco/following{/other_user}", "gists_url": "https://api.github.com/users/davidtwco/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidtwco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidtwco/subscriptions", "organizations_url": "https://api.github.com/users/davidtwco/orgs", "repos_url": "https://api.github.com/users/davidtwco/repos", "events_url": "https://api.github.com/users/davidtwco/events{/privacy}", "received_events_url": "https://api.github.com/users/davidtwco/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a4e094562122d9839a9b247ace2be3c4b3724b47", "url": "https://api.github.com/repos/rust-lang/rust/commits/a4e094562122d9839a9b247ace2be3c4b3724b47", "html_url": "https://github.com/rust-lang/rust/commit/a4e094562122d9839a9b247ace2be3c4b3724b47"}], "stats": {"total": 38, "additions": 38, "deletions": 0}, "files": [{"sha": "b9777831bf620566fb1cbf9dcc40a9ca39a1b115", "filename": "src/test/ui/nll/issue-55651.rs", "status": "added", "additions": 38, "deletions": 0, "changes": 38, "blob_url": "https://github.com/rust-lang/rust/blob/8e7786a2d9285fc79ec595d85081064560b9d4e4/src%2Ftest%2Fui%2Fnll%2Fissue-55651.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8e7786a2d9285fc79ec595d85081064560b9d4e4/src%2Ftest%2Fui%2Fnll%2Fissue-55651.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fnll%2Fissue-55651.rs?ref=8e7786a2d9285fc79ec595d85081064560b9d4e4", "patch": "@@ -0,0 +1,38 @@\n+// Copyright 2016 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// compile-pass\n+\n+#![feature(untagged_unions)]\n+\n+struct A;\n+struct B;\n+\n+union U {\n+    a: A,\n+    b: B,\n+}\n+\n+fn main() {\n+    unsafe {\n+        {\n+            let mut u = U { a: A };\n+            let a = u.a;\n+            u.a = A;\n+            let a = u.a; // OK\n+        }\n+        {\n+            let mut u = U { a: A };\n+            let a = u.a;\n+            u.b = B;\n+            let a = u.a; // OK\n+        }\n+    }\n+}"}]}