{"sha": "65614e91ad847e3d2941e1308bb2b1d916eba25f", "node_id": "C_kwDOAAsO6NoAKDY1NjE0ZTkxYWQ4NDdlM2QyOTQxZTEzMDhiYjJiMWQ5MTZlYmEyNWY", "commit": {"author": {"name": "Scott Mabin", "email": "scott@mabez.dev", "date": "2022-02-22T10:44:56Z"}, "committer": {"name": "Scott Mabin", "email": "scott@mabez.dev", "date": "2022-02-23T13:11:26Z"}, "message": "riscv32imc_esp_espidf: set max_atomic_width to 64", "tree": {"sha": "b125cb7d217596f52ab74cd6aa73733e48c57c45", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b125cb7d217596f52ab74cd6aa73733e48c57c45"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/65614e91ad847e3d2941e1308bb2b1d916eba25f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/65614e91ad847e3d2941e1308bb2b1d916eba25f", "html_url": "https://github.com/rust-lang/rust/commit/65614e91ad847e3d2941e1308bb2b1d916eba25f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/65614e91ad847e3d2941e1308bb2b1d916eba25f/comments", "author": {"login": "MabezDev", "id": 6977289, "node_id": "MDQ6VXNlcjY5NzcyODk=", "avatar_url": "https://avatars.githubusercontent.com/u/6977289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MabezDev", "html_url": "https://github.com/MabezDev", "followers_url": "https://api.github.com/users/MabezDev/followers", "following_url": "https://api.github.com/users/MabezDev/following{/other_user}", "gists_url": "https://api.github.com/users/MabezDev/gists{/gist_id}", "starred_url": "https://api.github.com/users/MabezDev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MabezDev/subscriptions", "organizations_url": "https://api.github.com/users/MabezDev/orgs", "repos_url": "https://api.github.com/users/MabezDev/repos", "events_url": "https://api.github.com/users/MabezDev/events{/privacy}", "received_events_url": "https://api.github.com/users/MabezDev/received_events", "type": "User", "site_admin": false}, "committer": {"login": "MabezDev", "id": 6977289, "node_id": "MDQ6VXNlcjY5NzcyODk=", "avatar_url": "https://avatars.githubusercontent.com/u/6977289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MabezDev", "html_url": "https://github.com/MabezDev", "followers_url": "https://api.github.com/users/MabezDev/followers", "following_url": "https://api.github.com/users/MabezDev/following{/other_user}", "gists_url": "https://api.github.com/users/MabezDev/gists{/gist_id}", "starred_url": "https://api.github.com/users/MabezDev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MabezDev/subscriptions", "organizations_url": "https://api.github.com/users/MabezDev/orgs", "repos_url": "https://api.github.com/users/MabezDev/repos", "events_url": "https://api.github.com/users/MabezDev/events{/privacy}", "received_events_url": "https://api.github.com/users/MabezDev/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c651ba8a542c7d89b271efbf024a31091c824f4b", "url": "https://api.github.com/repos/rust-lang/rust/commits/c651ba8a542c7d89b271efbf024a31091c824f4b", "html_url": "https://github.com/rust-lang/rust/commit/c651ba8a542c7d89b271efbf024a31091c824f4b"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "d506e7f6aacbcdf80ea85de35f7ad502601fe7df", "filename": "compiler/rustc_target/src/spec/riscv32imc_esp_espidf.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/65614e91ad847e3d2941e1308bb2b1d916eba25f/compiler%2Frustc_target%2Fsrc%2Fspec%2Friscv32imc_esp_espidf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/65614e91ad847e3d2941e1308bb2b1d916eba25f/compiler%2Frustc_target%2Fsrc%2Fspec%2Friscv32imc_esp_espidf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Friscv32imc_esp_espidf.rs?ref=65614e91ad847e3d2941e1308bb2b1d916eba25f", "patch": "@@ -18,11 +18,11 @@ pub fn target() -> Target {\n             cpu: \"generic-rv32\".to_string(),\n \n             // While the RiscV32IMC architecture does not natively support atomics, ESP-IDF does support\n-            // the __atomic* and __sync* GCC builtins, so setting `max_atomic_width` to `Some(32)`\n+            // the __atomic* and __sync* GCC builtins, so setting `max_atomic_width` to `Some(64)`\n             // and `atomic_cas` to `true` will cause the compiler to emit libcalls to these builtins.\n             //\n             // Support for atomics is necessary for the Rust STD library, which is supported by the ESP-IDF framework.\n-            max_atomic_width: Some(32),\n+            max_atomic_width: Some(64),\n             atomic_cas: true,\n \n             features: \"+m,+c\".to_string(),"}]}