{"sha": "f05d9679d708ccd1a6a643838bbf3a64ccf271bf", "node_id": "MDY6Q29tbWl0NzI0NzEyOmYwNWQ5Njc5ZDcwOGNjZDFhNmE2NDM4MzhiYmYzYTY0Y2NmMjcxYmY=", "commit": {"author": {"name": "Bj\u00f6rn Steinbrink", "email": "bsteinbr@gmail.com", "date": "2018-02-27T13:20:13Z"}, "committer": {"name": "Bj\u00f6rn Steinbrink", "email": "bsteinbr@gmail.com", "date": "2018-02-27T13:20:13Z"}, "message": "Backport LLVM fixes for a JumpThreading / assume intrinsic bug", "tree": {"sha": "adaae6d477aacd3fdebafc4eacc67d9e7a113db4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/adaae6d477aacd3fdebafc4eacc67d9e7a113db4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f05d9679d708ccd1a6a643838bbf3a64ccf271bf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f05d9679d708ccd1a6a643838bbf3a64ccf271bf", "html_url": "https://github.com/rust-lang/rust/commit/f05d9679d708ccd1a6a643838bbf3a64ccf271bf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f05d9679d708ccd1a6a643838bbf3a64ccf271bf/comments", "author": {"login": "dotdash", "id": 230962, "node_id": "MDQ6VXNlcjIzMDk2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/230962?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dotdash", "html_url": "https://github.com/dotdash", "followers_url": "https://api.github.com/users/dotdash/followers", "following_url": "https://api.github.com/users/dotdash/following{/other_user}", "gists_url": "https://api.github.com/users/dotdash/gists{/gist_id}", "starred_url": "https://api.github.com/users/dotdash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dotdash/subscriptions", "organizations_url": "https://api.github.com/users/dotdash/orgs", "repos_url": "https://api.github.com/users/dotdash/repos", "events_url": "https://api.github.com/users/dotdash/events{/privacy}", "received_events_url": "https://api.github.com/users/dotdash/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dotdash", "id": 230962, "node_id": "MDQ6VXNlcjIzMDk2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/230962?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dotdash", "html_url": "https://github.com/dotdash", "followers_url": "https://api.github.com/users/dotdash/followers", "following_url": "https://api.github.com/users/dotdash/following{/other_user}", "gists_url": "https://api.github.com/users/dotdash/gists{/gist_id}", "starred_url": "https://api.github.com/users/dotdash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dotdash/subscriptions", "organizations_url": "https://api.github.com/users/dotdash/orgs", "repos_url": "https://api.github.com/users/dotdash/repos", "events_url": "https://api.github.com/users/dotdash/events{/privacy}", "received_events_url": "https://api.github.com/users/dotdash/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "29f5c699b11a6a148f097f82eaa05202f8799bbc", "url": "https://api.github.com/repos/rust-lang/rust/commits/29f5c699b11a6a148f097f82eaa05202f8799bbc", "html_url": "https://github.com/rust-lang/rust/commit/29f5c699b11a6a148f097f82eaa05202f8799bbc"}], "stats": {"total": 26, "additions": 10, "deletions": 16}, "files": [{"sha": "aacbbd5058e05c23ce194e4659be2f6b090d543d", "filename": "src/libcore/slice/mod.rs", "status": "modified", "additions": 9, "deletions": 15, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/f05d9679d708ccd1a6a643838bbf3a64ccf271bf/src%2Flibcore%2Fslice%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f05d9679d708ccd1a6a643838bbf3a64ccf271bf/src%2Flibcore%2Fslice%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fslice%2Fmod.rs?ref=f05d9679d708ccd1a6a643838bbf3a64ccf271bf", "patch": "@@ -1246,18 +1246,15 @@ macro_rules! iterator {\n             {\n                 // The addition might panic on overflow\n                 // Use the len of the slice to hint optimizer to remove result index bounds check.\n-                let _n = make_slice!(self.ptr, self.end).len();\n+                let n = make_slice!(self.ptr, self.end).len();\n                 self.try_fold(0, move |i, x| {\n                     if predicate(x) { Err(i) }\n                     else { Ok(i + 1) }\n                 }).err()\n-                    // // FIXME(#48116/#45964):\n-                    // // This assume() causes misoptimization on LLVM 6.\n-                    // // Commented out until it is fixed again.\n-                    // .map(|i| {\n-                    //     unsafe { assume(i < n) };\n-                    //     i\n-                    // })\n+                    .map(|i| {\n+                        unsafe { assume(i < n) };\n+                        i\n+                    })\n             }\n \n             #[inline]\n@@ -1274,13 +1271,10 @@ macro_rules! iterator {\n                     if predicate(x) { Err(i) }\n                     else { Ok(i) }\n                 }).err()\n-                    // // FIXME(#48116/#45964):\n-                    // // This assume() causes misoptimization on LLVM 6.\n-                    // // Commented out until it is fixed again.\n-                    // .map(|i| {\n-                    //     unsafe { assume(i < n) };\n-                    //     i\n-                    // })\n+                    .map(|i| {\n+                        unsafe { assume(i < n) };\n+                        i\n+                    })\n             }\n         }\n "}, {"sha": "5c6b7fea4a302261f18b1cc6ea22b2a9eec2abd9", "filename": "src/llvm", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": null, "raw_url": null, "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fllvm?ref=f05d9679d708ccd1a6a643838bbf3a64ccf271bf", "patch": "@@ -1 +1 @@\n-Subproject commit 9f81beaf32608fbe1fe0f2a82f974e800e9d8c62\n+Subproject commit 5c6b7fea4a302261f18b1cc6ea22b2a9eec2abd9"}]}