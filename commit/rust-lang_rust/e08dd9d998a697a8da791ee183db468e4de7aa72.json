{"sha": "e08dd9d998a697a8da791ee183db468e4de7aa72", "node_id": "C_kwDOAAsO6NoAKGUwOGRkOWQ5OThhNjk3YThkYTc5MWVlMTgzZGI0NjhlNGRlN2FhNzI", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-12-23T23:31:40Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-12-23T23:31:40Z"}, "message": "Rollup merge of #105970 - Ezrashaw:add-docs+test-e0462, r=GuillaumeGomez\n\ndocs/test: add UI test and long-form error docs for E0462\n\nAnother UI test/ docs combo.\n\nr? ``@GuillaumeGomez``", "tree": {"sha": "0cac13d412d159151d28a223f1e435b4d2630919", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0cac13d412d159151d28a223f1e435b4d2630919"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e08dd9d998a697a8da791ee183db468e4de7aa72", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjpjpcCRBK7hj4Ov3rIwAANwcIAJiU0AzKaUR6NFqqOVf8RJHB\n1cVBU/Ol2DwBmoQQrcJOR24Ral2/cFZwKkzxzpeNl5XOcS3RVlNtMsr576Q9aok1\nUJBJ4g8TNq1CT1X8rbp+OOnGcT3xiIJt/LvF6A2Yu/cNjyC5AYXl8kH2EB1xGifh\nnoCz384d9EJeaogEjCYfJNumW93bowFgXNbip2pzo9BKE2BZeWcJOtpbeWTCE791\ntctH9vWM0WswZgLKcR4JDGFxyHm1T4THWlO1URtYVsUFd/1c3IlwdCKp/1fh62kW\nVGl3OiiaOGVW9iUX5ty0Olb8j9URsl5Pio0TeiTUm4LexzZIFvhOQpvnF2DBevk=\n=g0ey\n-----END PGP SIGNATURE-----\n", "payload": "tree 0cac13d412d159151d28a223f1e435b4d2630919\nparent af3e06f1bf4ca49407562b1b84744e27905bea98\nparent 66ed1812cfaf3c7dd47643140f8e1380204f7234\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1671838300 +0100\ncommitter GitHub <noreply@github.com> 1671838300 +0100\n\nRollup merge of #105970 - Ezrashaw:add-docs+test-e0462, r=GuillaumeGomez\n\ndocs/test: add UI test and long-form error docs for E0462\n\nAnother UI test/ docs combo.\n\nr? ``@GuillaumeGomez``\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e08dd9d998a697a8da791ee183db468e4de7aa72", "html_url": "https://github.com/rust-lang/rust/commit/e08dd9d998a697a8da791ee183db468e4de7aa72", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e08dd9d998a697a8da791ee183db468e4de7aa72/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "af3e06f1bf4ca49407562b1b84744e27905bea98", "url": "https://api.github.com/repos/rust-lang/rust/commits/af3e06f1bf4ca49407562b1b84744e27905bea98", "html_url": "https://github.com/rust-lang/rust/commit/af3e06f1bf4ca49407562b1b84744e27905bea98"}, {"sha": "66ed1812cfaf3c7dd47643140f8e1380204f7234", "url": "https://api.github.com/repos/rust-lang/rust/commits/66ed1812cfaf3c7dd47643140f8e1380204f7234", "html_url": "https://github.com/rust-lang/rust/commit/66ed1812cfaf3c7dd47643140f8e1380204f7234"}], "stats": {"total": 66, "additions": 63, "deletions": 3}, "files": [{"sha": "d05559e92440f28f5eb2b7197991b30f74e39392", "filename": "compiler/rustc_error_codes/src/error_codes.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e08dd9d998a697a8da791ee183db468e4de7aa72/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e08dd9d998a697a8da791ee183db468e4de7aa72/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes.rs?ref=e08dd9d998a697a8da791ee183db468e4de7aa72", "patch": "@@ -244,6 +244,7 @@ E0457: include_str!(\"./error_codes/E0457.md\"),\n E0458: include_str!(\"./error_codes/E0458.md\"),\n E0459: include_str!(\"./error_codes/E0459.md\"),\n E0460: include_str!(\"./error_codes/E0460.md\"),\n+E0462: include_str!(\"./error_codes/E0462.md\"),\n E0463: include_str!(\"./error_codes/E0463.md\"),\n E0464: include_str!(\"./error_codes/E0464.md\"),\n E0466: include_str!(\"./error_codes/E0466.md\"),\n@@ -595,7 +596,6 @@ E0791: include_str!(\"./error_codes/E0791.md\"),\n //  E0427, // merged into 530\n //  E0456, // plugin `..` is not available for triple `..`\n     E0461, // couldn't find crate `..` with expected target triple ..\n-    E0462, // found staticlib `..` instead of rlib or dylib\n     E0465, // multiple .. candidates for `..` found\n //  E0467, // removed\n //  E0470, // removed"}, {"sha": "4509cc6fad2d4e9bde523b81f93778d0eae9652d", "filename": "compiler/rustc_error_codes/src/error_codes/E0462.md", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/e08dd9d998a697a8da791ee183db468e4de7aa72/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0462.md", "raw_url": "https://github.com/rust-lang/rust/raw/e08dd9d998a697a8da791ee183db468e4de7aa72/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0462.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0462.md?ref=e08dd9d998a697a8da791ee183db468e4de7aa72", "patch": "@@ -0,0 +1,32 @@\n+Found `staticlib` `..` instead of `rlib` or `dylib`.\n+\n+Consider the following two files:\n+\n+`a.rs`\n+```ignore (cannot-link-with-other-tests)\n+#![crate_type = \"staticlib\"]\n+\n+fn foo() {}\n+```\n+\n+`main.rs`\n+```ignore (cannot-link-with-other-tests)\n+extern crate a;\n+\n+fn main() {\n+    a::foo();\n+}\n+```\n+\n+Crate `a` is compiled as a `staticlib`. A `staticlib` is a system-dependant\n+library only intended for linking with non-Rust applications (C programs). Note\n+that `staticlib`s include all upstream dependencies (`core`, `std`, other user\n+dependencies, etc) which makes them significantly larger than `dylib`s:\n+prefer `staticlib` for linking with C programs. Learn more about different\n+`crate_type`s in [this section of the Reference](../reference/linkage.html).\n+\n+This error can be fixed by:\n+ * Using [Cargo](../cargo/index.html), the Rust package manager, automatically\n+   fixing this issue.\n+ * Recompiling the crate as a `rlib` or `dylib`; formats suitable for Rust\n+   linking."}, {"sha": "f839ee783b53e30a3d57dcb1c1e84f0e626efb67", "filename": "src/test/ui/error-codes/E0462.rs", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/e08dd9d998a697a8da791ee183db468e4de7aa72/src%2Ftest%2Fui%2Ferror-codes%2FE0462.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e08dd9d998a697a8da791ee183db468e4de7aa72/src%2Ftest%2Fui%2Ferror-codes%2FE0462.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferror-codes%2FE0462.rs?ref=e08dd9d998a697a8da791ee183db468e4de7aa72", "patch": "@@ -0,0 +1,11 @@\n+// aux-build:found-staticlib.rs\n+\n+// normalize-stderr-test: \"\\.nll/\" -> \"/\"\n+// normalize-stderr-test: \"\\\\\\?\\\\\" -> \"\"\n+// normalize-stderr-test: \"(lib)?found_staticlib\\.[a-z]+\" -> \"libfound_staticlib.somelib\"\n+\n+extern crate found_staticlib; //~ ERROR E0462\n+\n+fn main() {\n+    found_staticlib::foo();\n+}"}, {"sha": "43e27965ffc50796d02585f29f747807b805582e", "filename": "src/test/ui/error-codes/E0462.stderr", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/e08dd9d998a697a8da791ee183db468e4de7aa72/src%2Ftest%2Fui%2Ferror-codes%2FE0462.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/e08dd9d998a697a8da791ee183db468e4de7aa72/src%2Ftest%2Fui%2Ferror-codes%2FE0462.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferror-codes%2FE0462.stderr?ref=e08dd9d998a697a8da791ee183db468e4de7aa72", "patch": "@@ -0,0 +1,13 @@\n+error[E0462]: found staticlib `found_staticlib` instead of rlib or dylib\n+  --> $DIR/E0462.rs:7:1\n+   |\n+LL | extern crate found_staticlib;\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: the following crate versions were found:\n+           crate `found_staticlib`: $TEST_BUILD_DIR/error-codes/E0462/auxiliary/libfound_staticlib.somelib\n+   = help: please recompile that crate using --crate-type lib\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0462`."}, {"sha": "04e2c59789d0c3154fccafe0b85578b247df01c7", "filename": "src/test/ui/error-codes/auxiliary/found-staticlib.rs", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/e08dd9d998a697a8da791ee183db468e4de7aa72/src%2Ftest%2Fui%2Ferror-codes%2Fauxiliary%2Ffound-staticlib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e08dd9d998a697a8da791ee183db468e4de7aa72/src%2Ftest%2Fui%2Ferror-codes%2Fauxiliary%2Ffound-staticlib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferror-codes%2Fauxiliary%2Ffound-staticlib.rs?ref=e08dd9d998a697a8da791ee183db468e4de7aa72", "patch": "@@ -0,0 +1,4 @@\n+// no-prefer-dynamic\n+#![crate_type = \"staticlib\"]\n+\n+pub fn foo() {}"}, {"sha": "49fc2ceb3a27f48e5bc5cc5e995c8a5b0ebc0161", "filename": "src/tools/tidy/src/error_codes_check.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/e08dd9d998a697a8da791ee183db468e4de7aa72/src%2Ftools%2Ftidy%2Fsrc%2Ferror_codes_check.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e08dd9d998a697a8da791ee183db468e4de7aa72/src%2Ftools%2Ftidy%2Fsrc%2Ferror_codes_check.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Ftidy%2Fsrc%2Ferror_codes_check.rs?ref=e08dd9d998a697a8da791ee183db468e4de7aa72", "patch": "@@ -11,8 +11,8 @@ use regex::Regex;\n \n // A few of those error codes can't be tested but all the others can and *should* be tested!\n const EXEMPTED_FROM_TEST: &[&str] = &[\n-    \"E0313\", \"E0461\", \"E0462\", \"E0465\", \"E0476\", \"E0490\", \"E0514\", \"E0519\", \"E0523\", \"E0554\",\n-    \"E0640\", \"E0717\", \"E0729\", \"E0789\",\n+    \"E0313\", \"E0461\", \"E0465\", \"E0476\", \"E0490\", \"E0514\", \"E0519\", \"E0523\", \"E0554\", \"E0640\",\n+    \"E0717\", \"E0729\", \"E0789\",\n ];\n \n // Some error codes don't have any tests apparently..."}]}