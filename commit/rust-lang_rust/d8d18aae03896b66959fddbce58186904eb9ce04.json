{"sha": "d8d18aae03896b66959fddbce58186904eb9ce04", "node_id": "C_kwDOAAsO6NoAKGQ4ZDE4YWFlMDM4OTZiNjY5NTlmZGRiY2U1ODE4NjkwNGViOWNlMDQ", "commit": {"author": {"name": "Ben Kimock", "email": "kimockb@gmail.com", "date": "2023-02-12T19:42:16Z"}, "committer": {"name": "Ben Kimock", "email": "kimockb@gmail.com", "date": "2023-02-12T19:42:16Z"}, "message": "Fix UB in the test case", "tree": {"sha": "b9b842f02489dc5efc9200c62d41521e57c1c4b9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b9b842f02489dc5efc9200c62d41521e57c1c4b9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d8d18aae03896b66959fddbce58186904eb9ce04", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d8d18aae03896b66959fddbce58186904eb9ce04", "html_url": "https://github.com/rust-lang/rust/commit/d8d18aae03896b66959fddbce58186904eb9ce04", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d8d18aae03896b66959fddbce58186904eb9ce04/comments", "author": {"login": "saethlin", "id": 12105168, "node_id": "MDQ6VXNlcjEyMTA1MTY4", "avatar_url": "https://avatars.githubusercontent.com/u/12105168?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saethlin", "html_url": "https://github.com/saethlin", "followers_url": "https://api.github.com/users/saethlin/followers", "following_url": "https://api.github.com/users/saethlin/following{/other_user}", "gists_url": "https://api.github.com/users/saethlin/gists{/gist_id}", "starred_url": "https://api.github.com/users/saethlin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saethlin/subscriptions", "organizations_url": "https://api.github.com/users/saethlin/orgs", "repos_url": "https://api.github.com/users/saethlin/repos", "events_url": "https://api.github.com/users/saethlin/events{/privacy}", "received_events_url": "https://api.github.com/users/saethlin/received_events", "type": "User", "site_admin": false}, "committer": {"login": "saethlin", "id": 12105168, "node_id": "MDQ6VXNlcjEyMTA1MTY4", "avatar_url": "https://avatars.githubusercontent.com/u/12105168?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saethlin", "html_url": "https://github.com/saethlin", "followers_url": "https://api.github.com/users/saethlin/followers", "following_url": "https://api.github.com/users/saethlin/following{/other_user}", "gists_url": "https://api.github.com/users/saethlin/gists{/gist_id}", "starred_url": "https://api.github.com/users/saethlin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saethlin/subscriptions", "organizations_url": "https://api.github.com/users/saethlin/orgs", "repos_url": "https://api.github.com/users/saethlin/repos", "events_url": "https://api.github.com/users/saethlin/events{/privacy}", "received_events_url": "https://api.github.com/users/saethlin/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "640ede7b0a1840415cb6ec881c2210302bfeba18", "url": "https://api.github.com/repos/rust-lang/rust/commits/640ede7b0a1840415cb6ec881c2210302bfeba18", "html_url": "https://github.com/rust-lang/rust/commit/640ede7b0a1840415cb6ec881c2210302bfeba18"}], "stats": {"total": 7, "additions": 4, "deletions": 3}, "files": [{"sha": "6ca73ffdde280fd1200a3159a1af98dc3a80273c", "filename": "tests/mir-opt/copy-prop/custom_move_arg.f.CopyProp.diff", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/d8d18aae03896b66959fddbce58186904eb9ce04/tests%2Fmir-opt%2Fcopy-prop%2Fcustom_move_arg.f.CopyProp.diff", "raw_url": "https://github.com/rust-lang/rust/raw/d8d18aae03896b66959fddbce58186904eb9ce04/tests%2Fmir-opt%2Fcopy-prop%2Fcustom_move_arg.f.CopyProp.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fmir-opt%2Fcopy-prop%2Fcustom_move_arg.f.CopyProp.diff?ref=d8d18aae03896b66959fddbce58186904eb9ce04", "patch": "@@ -7,8 +7,9 @@\n       let mut _3: NotCopy;                 // in scope 0 at $SRC_DIR/core/src/intrinsics/mir.rs:LL:COL\n   \n       bb0: {\n--         _2 = move _1;                    // scope 0 at $SRC_DIR/core/src/intrinsics/mir.rs:LL:COL\n-          _0 = opaque::<NotCopy>(move _1) -> bb1; // scope 0 at $DIR/custom_move_arg.rs:+3:9: +3:41\n+-         _2 = _1;                         // scope 0 at $SRC_DIR/core/src/intrinsics/mir.rs:LL:COL\n+-         _0 = opaque::<NotCopy>(move _1) -> bb1; // scope 0 at $DIR/custom_move_arg.rs:+3:9: +3:41\n++         _0 = opaque::<NotCopy>(_1) -> bb1; // scope 0 at $DIR/custom_move_arg.rs:+3:9: +3:41\n                                            // mir::Constant\n                                            // + span: $DIR/custom_move_arg.rs:15:24: 15:30\n                                            // + literal: Const { ty: fn(NotCopy) {opaque::<NotCopy>}, val: Value(<ZST>) }"}, {"sha": "4a591146e619f950ea5c7f2dd6de55fe0c18873b", "filename": "tests/mir-opt/copy-prop/custom_move_arg.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d8d18aae03896b66959fddbce58186904eb9ce04/tests%2Fmir-opt%2Fcopy-prop%2Fcustom_move_arg.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d8d18aae03896b66959fddbce58186904eb9ce04/tests%2Fmir-opt%2Fcopy-prop%2Fcustom_move_arg.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fmir-opt%2Fcopy-prop%2Fcustom_move_arg.rs?ref=d8d18aae03896b66959fddbce58186904eb9ce04", "patch": "@@ -11,7 +11,7 @@ struct NotCopy(bool);\n #[custom_mir(dialect = \"analysis\", phase = \"post-cleanup\")]\n fn f(_1: NotCopy) {\n     mir!({\n-        let _2 = Move(_1);\n+        let _2 = _1;\n         Call(RET, bb1, opaque(Move(_1)))\n     }\n     bb1 = {"}]}