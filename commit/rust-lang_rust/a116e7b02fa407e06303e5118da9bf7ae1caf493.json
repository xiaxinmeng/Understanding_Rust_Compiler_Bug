{"sha": "a116e7b02fa407e06303e5118da9bf7ae1caf493", "node_id": "MDY6Q29tbWl0NzI0NzEyOmExMTZlN2IwMmZhNDA3ZTA2MzAzZTUxMThkYTliZjdhZTFjYWY0OTM=", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2020-05-22T14:58:31Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-05-22T14:58:31Z"}, "message": "Rollup merge of #72376 - wesleywiser:record_cgu_name, r=Mark-Simulacrum\n\n[self-profling] Record the cgu name when doing codegen for a module", "tree": {"sha": "d4bdb5d74bdeefa7df1fb23a2f03f39926cd8a11", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d4bdb5d74bdeefa7df1fb23a2f03f39926cd8a11"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a116e7b02fa407e06303e5118da9bf7ae1caf493", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJex+iYCRBK7hj4Ov3rIwAAdHIIAAK6etuKcCbHfDD/roASf19f\n2KnOjDI7C/oVUBJzpQ8LTNAN5NdMfy1fnB+8e9auqbMm6H5MoHIFBZGVkPLpggH2\nL48Q0bx4zt08X++rEwaxf0jY51J5pHtwNLqwxDpOgw2RYoEjl7+tPZnZb7kq22nY\nDZsy4Nozqy7qAuCiXUmEFqs/UycqpJcrvPJicJlYO0pR39VA6mSzug5uUHH8fHID\n0J8Yrfgz1scaCL+a3MKfZdqqxIZSh+iq5UG6AHONeG3f46VcBdAH2ZOruk6wL8vn\nzvRmZVAYUZ5ZBMnvVUWdeAQGj/TamIgb6BqQ+QyB9LWnJzfaxsnOUpn6Ctc4Zks=\n=uMKb\n-----END PGP SIGNATURE-----\n", "payload": "tree d4bdb5d74bdeefa7df1fb23a2f03f39926cd8a11\nparent f7ed13b6a50cb7994dc6fa2f967219a9c7a714ee\nparent 8ac1699ea15bf8d6d9bcecec4c340c88cf20c0da\nauthor Ralf Jung <post@ralfj.de> 1590159511 +0200\ncommitter GitHub <noreply@github.com> 1590159511 +0200\n\nRollup merge of #72376 - wesleywiser:record_cgu_name, r=Mark-Simulacrum\n\n[self-profling] Record the cgu name when doing codegen for a module\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a116e7b02fa407e06303e5118da9bf7ae1caf493", "html_url": "https://github.com/rust-lang/rust/commit/a116e7b02fa407e06303e5118da9bf7ae1caf493", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a116e7b02fa407e06303e5118da9bf7ae1caf493/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f7ed13b6a50cb7994dc6fa2f967219a9c7a714ee", "url": "https://api.github.com/repos/rust-lang/rust/commits/f7ed13b6a50cb7994dc6fa2f967219a9c7a714ee", "html_url": "https://github.com/rust-lang/rust/commit/f7ed13b6a50cb7994dc6fa2f967219a9c7a714ee"}, {"sha": "8ac1699ea15bf8d6d9bcecec4c340c88cf20c0da", "url": "https://api.github.com/repos/rust-lang/rust/commits/8ac1699ea15bf8d6d9bcecec4c340c88cf20c0da", "html_url": "https://github.com/rust-lang/rust/commit/8ac1699ea15bf8d6d9bcecec4c340c88cf20c0da"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "3e17a51528e3eb70a368c9855e4023fc658b5f15", "filename": "src/librustc_codegen_llvm/base.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a116e7b02fa407e06303e5118da9bf7ae1caf493/src%2Flibrustc_codegen_llvm%2Fbase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a116e7b02fa407e06303e5118da9bf7ae1caf493/src%2Flibrustc_codegen_llvm%2Fbase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_llvm%2Fbase.rs?ref=a116e7b02fa407e06303e5118da9bf7ae1caf493", "patch": "@@ -100,7 +100,7 @@ pub fn compile_codegen_unit(\n     tcx: TyCtxt<'tcx>,\n     cgu_name: Symbol,\n ) -> (ModuleCodegen<ModuleLlvm>, u64) {\n-    let prof_timer = tcx.prof.generic_activity(\"codegen_module\");\n+    let prof_timer = tcx.prof.generic_activity_with_arg(\"codegen_module\", cgu_name.to_string());\n     let start_time = Instant::now();\n \n     let dep_node = tcx.codegen_unit(cgu_name).codegen_dep_node(tcx);"}]}