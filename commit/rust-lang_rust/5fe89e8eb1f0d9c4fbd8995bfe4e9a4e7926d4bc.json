{"sha": "5fe89e8eb1f0d9c4fbd8995bfe4e9a4e7926d4bc", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVmZTg5ZThlYjFmMGQ5YzRmYmQ4OTk1YmZlNGU5YTRlNzkyNmQ0YmM=", "commit": {"author": {"name": "Malo Jaffr\u00e9", "email": "jaffre.malo@gmail.com", "date": "2017-06-18T16:18:08Z"}, "committer": {"name": "Malo Jaffr\u00e9", "email": "jaffre.malo@gmail.com", "date": "2017-06-18T16:18:08Z"}, "message": "Add tests for various issues\n\nFixes #11740.\nFixes #19601.\nFixes #22603\nFixes #22789.\nFixes #26614.\n\nr? @Mark-Simulacrum.", "tree": {"sha": "43571b7ece1323f5b3255a7e35d2de4395d7c953", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/43571b7ece1323f5b3255a7e35d2de4395d7c953"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5fe89e8eb1f0d9c4fbd8995bfe4e9a4e7926d4bc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5fe89e8eb1f0d9c4fbd8995bfe4e9a4e7926d4bc", "html_url": "https://github.com/rust-lang/rust/commit/5fe89e8eb1f0d9c4fbd8995bfe4e9a4e7926d4bc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5fe89e8eb1f0d9c4fbd8995bfe4e9a4e7926d4bc/comments", "author": {"login": "MaloJaffre", "id": 16278359, "node_id": "MDQ6VXNlcjE2Mjc4MzU5", "avatar_url": "https://avatars.githubusercontent.com/u/16278359?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MaloJaffre", "html_url": "https://github.com/MaloJaffre", "followers_url": "https://api.github.com/users/MaloJaffre/followers", "following_url": "https://api.github.com/users/MaloJaffre/following{/other_user}", "gists_url": "https://api.github.com/users/MaloJaffre/gists{/gist_id}", "starred_url": "https://api.github.com/users/MaloJaffre/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MaloJaffre/subscriptions", "organizations_url": "https://api.github.com/users/MaloJaffre/orgs", "repos_url": "https://api.github.com/users/MaloJaffre/repos", "events_url": "https://api.github.com/users/MaloJaffre/events{/privacy}", "received_events_url": "https://api.github.com/users/MaloJaffre/received_events", "type": "User", "site_admin": false}, "committer": {"login": "MaloJaffre", "id": 16278359, "node_id": "MDQ6VXNlcjE2Mjc4MzU5", "avatar_url": "https://avatars.githubusercontent.com/u/16278359?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MaloJaffre", "html_url": "https://github.com/MaloJaffre", "followers_url": "https://api.github.com/users/MaloJaffre/followers", "following_url": "https://api.github.com/users/MaloJaffre/following{/other_user}", "gists_url": "https://api.github.com/users/MaloJaffre/gists{/gist_id}", "starred_url": "https://api.github.com/users/MaloJaffre/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MaloJaffre/subscriptions", "organizations_url": "https://api.github.com/users/MaloJaffre/orgs", "repos_url": "https://api.github.com/users/MaloJaffre/repos", "events_url": "https://api.github.com/users/MaloJaffre/events{/privacy}", "received_events_url": "https://api.github.com/users/MaloJaffre/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "78d8416caf65cfb50de61bb9423e9efa026bd45a", "url": "https://api.github.com/repos/rust-lang/rust/commits/78d8416caf65cfb50de61bb9423e9efa026bd45a", "html_url": "https://github.com/rust-lang/rust/commit/78d8416caf65cfb50de61bb9423e9efa026bd45a"}], "stats": {"total": 124, "additions": 124, "deletions": 0}, "files": [{"sha": "0bda06be9e8ca964575185441d3beff9f5d526f2", "filename": "src/test/compile-fail/issue-11740.rs", "status": "added", "additions": 38, "deletions": 0, "changes": 38, "blob_url": "https://github.com/rust-lang/rust/blob/5fe89e8eb1f0d9c4fbd8995bfe4e9a4e7926d4bc/src%2Ftest%2Fcompile-fail%2Fissue-11740.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5fe89e8eb1f0d9c4fbd8995bfe4e9a4e7926d4bc/src%2Ftest%2Fcompile-fail%2Fissue-11740.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-11740.rs?ref=5fe89e8eb1f0d9c4fbd8995bfe4e9a4e7926d4bc", "patch": "@@ -0,0 +1,38 @@\n+// Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+#![feature(rustc_attrs)]\n+#![allow(warnings)]\n+\n+struct Attr {\n+    name: String,\n+    value: String,\n+}\n+\n+struct Element {\n+    attrs: Vec<Box<Attr>>,\n+}\n+\n+impl Element {\n+    pub unsafe fn get_attr<'a>(&'a self, name: &str) {\n+        self.attrs\n+            .iter()\n+            .find(|attr| {\n+                      let attr: &&Box<Attr> = std::mem::transmute(attr);\n+                      true\n+                  });\n+    }\n+}\n+\n+#[rustc_error]\n+fn main() { //~ ERROR compilation successful\n+    let element = Element { attrs: Vec::new() };\n+    let _ = unsafe { element.get_attr(\"foo\") };\n+}"}, {"sha": "02b4932cea8c9c12e0cdba0c28c7247976d2380b", "filename": "src/test/compile-fail/issue-19601.rs", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/5fe89e8eb1f0d9c4fbd8995bfe4e9a4e7926d4bc/src%2Ftest%2Fcompile-fail%2Fissue-19601.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5fe89e8eb1f0d9c4fbd8995bfe4e9a4e7926d4bc/src%2Ftest%2Fcompile-fail%2Fissue-19601.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-19601.rs?ref=5fe89e8eb1f0d9c4fbd8995bfe4e9a4e7926d4bc", "patch": "@@ -0,0 +1,19 @@\n+// Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+#![feature(rustc_attrs)]\n+#![allow(warnings)]\n+\n+trait A<T> {}\n+struct B<T> where B<T>: A<B<T>> { t: T }\n+\n+#[rustc_error]\n+fn main() { //~ ERROR compilation successful\n+}"}, {"sha": "d08f916b870c1159bf0c79bb03011b0842131aff", "filename": "src/test/compile-fail/issue-22603.rs", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/5fe89e8eb1f0d9c4fbd8995bfe4e9a4e7926d4bc/src%2Ftest%2Fcompile-fail%2Fissue-22603.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5fe89e8eb1f0d9c4fbd8995bfe4e9a4e7926d4bc/src%2Ftest%2Fcompile-fail%2Fissue-22603.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-22603.rs?ref=5fe89e8eb1f0d9c4fbd8995bfe4e9a4e7926d4bc", "patch": "@@ -0,0 +1,23 @@\n+// Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+#![feature(unboxed_closures, fn_traits, rustc_attrs)]\n+\n+struct Foo;\n+\n+impl<A> FnOnce<(A,)> for Foo {\n+    type Output = ();\n+    extern \"rust-call\" fn call_once(self, (_,): (A,)) {\n+    }\n+}\n+#[rustc_error]\n+fn main() { //~ ERROR compilation successful\n+    println!(\"{:?}\", Foo(\"bar\"));\n+}"}, {"sha": "cba1c367bb9b2792b7d382fe4619c90e7e9e9e46", "filename": "src/test/compile-fail/issue-22789.rs", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/5fe89e8eb1f0d9c4fbd8995bfe4e9a4e7926d4bc/src%2Ftest%2Fcompile-fail%2Fissue-22789.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5fe89e8eb1f0d9c4fbd8995bfe4e9a4e7926d4bc/src%2Ftest%2Fcompile-fail%2Fissue-22789.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-22789.rs?ref=5fe89e8eb1f0d9c4fbd8995bfe4e9a4e7926d4bc", "patch": "@@ -0,0 +1,17 @@\n+// Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+#![feature(unboxed_closures, fn_traits, rustc_attrs)]\n+\n+#[rustc_error]\n+fn main() { //~ ERROR compilation successful\n+    let k = |x: i32| { x + 1 };\n+    Fn::call(&k, (0,));\n+}"}, {"sha": "c128fb3b47959bb04cb7c64144192045b91efe4d", "filename": "src/test/compile-fail/issue-26614.rs", "status": "added", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/5fe89e8eb1f0d9c4fbd8995bfe4e9a4e7926d4bc/src%2Ftest%2Fcompile-fail%2Fissue-26614.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5fe89e8eb1f0d9c4fbd8995bfe4e9a4e7926d4bc/src%2Ftest%2Fcompile-fail%2Fissue-26614.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-26614.rs?ref=5fe89e8eb1f0d9c4fbd8995bfe4e9a4e7926d4bc", "patch": "@@ -0,0 +1,27 @@\n+// Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+#![feature(rustc_attrs)]\n+#![allow(warnings)]\n+\n+trait Mirror {\n+    type It;\n+}\n+\n+impl<T> Mirror for T {\n+    type It = Self;\n+}\n+\n+\n+#[rustc_error]\n+fn main() { //~ ERROR compilation successful\n+    let c: <u32 as Mirror>::It = 5;\n+    const CCCC: <u32 as Mirror>::It = 5;\n+}"}]}