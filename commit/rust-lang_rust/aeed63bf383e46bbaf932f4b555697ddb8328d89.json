{"sha": "aeed63bf383e46bbaf932f4b555697ddb8328d89", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFlZWQ2M2JmMzgzZTQ2YmJhZjkzMmY0YjU1NTY5N2RkYjgzMjhkODk=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2018-12-31T08:06:15Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2018-12-31T08:06:15Z"}, "message": "Auto merge of #57208 - estebank:issue-57198, r=petrochenkov\n\nDo not complain about missing crate named as a keyword\n\nFix #57198.", "tree": {"sha": "5483489af6f56e40b7e6224dfd7f4b140988777b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5483489af6f56e40b7e6224dfd7f4b140988777b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/aeed63bf383e46bbaf932f4b555697ddb8328d89", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/aeed63bf383e46bbaf932f4b555697ddb8328d89", "html_url": "https://github.com/rust-lang/rust/commit/aeed63bf383e46bbaf932f4b555697ddb8328d89", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/aeed63bf383e46bbaf932f4b555697ddb8328d89/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "url": "https://api.github.com/repos/rust-lang/rust/commits/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "html_url": "https://github.com/rust-lang/rust/commit/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491"}, {"sha": "cef919e9715556413730c85093ad0251ea1c90a3", "url": "https://api.github.com/repos/rust-lang/rust/commits/cef919e9715556413730c85093ad0251ea1c90a3", "html_url": "https://github.com/rust-lang/rust/commit/cef919e9715556413730c85093ad0251ea1c90a3"}], "stats": {"total": 32, "additions": 30, "deletions": 2}, "files": [{"sha": "47f9ad5398bcacc1bda9678445d21e2d38f7d878", "filename": "src/librustc_resolve/lib.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/aeed63bf383e46bbaf932f4b555697ddb8328d89/src%2Flibrustc_resolve%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aeed63bf383e46bbaf932f4b555697ddb8328d89/src%2Flibrustc_resolve%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Flib.rs?ref=aeed63bf383e46bbaf932f4b555697ddb8328d89", "patch": "@@ -3925,8 +3925,11 @@ impl<'a> Resolver<'a> {\n                         });\n                         if let Some(candidate) = candidates.get(0) {\n                             format!(\"did you mean `{}`?\", candidate.path)\n-                        } else {\n+                        } else if !ident.is_reserved() {\n                             format!(\"maybe a missing `extern crate {};`?\", ident)\n+                        } else {\n+                            // the parser will already have complained about the keyword being used\n+                            return PathResult::NonModule(err_path_resolution());\n                         }\n                     } else if i == 0 {\n                         format!(\"use of undeclared type or module `{}`\", ident)"}, {"sha": "379ebe239947424b873d28e9c1ce949dda831563", "filename": "src/librustc_resolve/macros.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/aeed63bf383e46bbaf932f4b555697ddb8328d89/src%2Flibrustc_resolve%2Fmacros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aeed63bf383e46bbaf932f4b555697ddb8328d89/src%2Flibrustc_resolve%2Fmacros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Fmacros.rs?ref=aeed63bf383e46bbaf932f4b555697ddb8328d89", "patch": "@@ -929,7 +929,7 @@ impl<'a> Resolver<'a> {\n                     let def = path_res.base_def();\n                     check_consistency(self, &path, path_span, kind, initial_def, def);\n                 }\n-                path_res @ PathResult::NonModule(..) | path_res @  PathResult::Failed(..) => {\n+                path_res @ PathResult::NonModule(..) | path_res @ PathResult::Failed(..) => {\n                     let (span, msg) = if let PathResult::Failed(span, msg, ..) = path_res {\n                         (span, msg)\n                     } else {"}, {"sha": "3857def9824f85e9fab018e4c0f49268030730e0", "filename": "src/test/ui/issues/issue-57198-pass.rs", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/aeed63bf383e46bbaf932f4b555697ddb8328d89/src%2Ftest%2Fui%2Fissues%2Fissue-57198-pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aeed63bf383e46bbaf932f4b555697ddb8328d89/src%2Ftest%2Fui%2Fissues%2Fissue-57198-pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-57198-pass.rs?ref=aeed63bf383e46bbaf932f4b555697ddb8328d89", "patch": "@@ -0,0 +1,9 @@\n+// run-pass\n+\n+mod m {\n+    pub fn r#for() {}\n+}\n+\n+fn main() {\n+    m::r#for();\n+}"}, {"sha": "714a46cbc9f481e7e05ab1a09f3cf23be44ef52a", "filename": "src/test/ui/issues/issue-57198.rs", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/aeed63bf383e46bbaf932f4b555697ddb8328d89/src%2Ftest%2Fui%2Fissues%2Fissue-57198.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aeed63bf383e46bbaf932f4b555697ddb8328d89/src%2Ftest%2Fui%2Fissues%2Fissue-57198.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-57198.rs?ref=aeed63bf383e46bbaf932f4b555697ddb8328d89", "patch": "@@ -0,0 +1,8 @@\n+mod m {\n+    pub fn r#for() {}\n+}\n+\n+fn main() {\n+    m::for();\n+    //~^ ERROR expected identifier, found keyword `for`\n+}"}, {"sha": "c4d297b2d95eb18e640ee8d7deaaa515cd35938f", "filename": "src/test/ui/issues/issue-57198.stderr", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/aeed63bf383e46bbaf932f4b555697ddb8328d89/src%2Ftest%2Fui%2Fissues%2Fissue-57198.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/aeed63bf383e46bbaf932f4b555697ddb8328d89/src%2Ftest%2Fui%2Fissues%2Fissue-57198.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-57198.stderr?ref=aeed63bf383e46bbaf932f4b555697ddb8328d89", "patch": "@@ -0,0 +1,8 @@\n+error: expected identifier, found keyword `for`\n+  --> $DIR/issue-57198.rs:6:8\n+   |\n+LL |     m::for();\n+   |        ^^^ expected identifier, found keyword\n+\n+error: aborting due to previous error\n+"}]}