{"sha": "2c198561dd878dcfa4fca3b7785215fd3490ca84", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJjMTk4NTYxZGQ4NzhkY2ZhNGZjYTNiNzc4NTIxNWZkMzQ5MGNhODQ=", "commit": {"author": {"name": "Luqman Aden", "email": "laden@csclub.uwaterloo.ca", "date": "2013-02-13T20:41:04Z"}, "committer": {"name": "Luqman Aden", "email": "laden@csclub.uwaterloo.ca", "date": "2013-02-13T20:41:38Z"}, "message": "rt: Fix alignment in debug_opaque", "tree": {"sha": "5ebd865d0151f14ca98239dd66ab14874c4aeb55", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5ebd865d0151f14ca98239dd66ab14874c4aeb55"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2c198561dd878dcfa4fca3b7785215fd3490ca84", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2c198561dd878dcfa4fca3b7785215fd3490ca84", "html_url": "https://github.com/rust-lang/rust/commit/2c198561dd878dcfa4fca3b7785215fd3490ca84", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2c198561dd878dcfa4fca3b7785215fd3490ca84/comments", "author": {"login": "luqmana", "id": 287063, "node_id": "MDQ6VXNlcjI4NzA2Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/287063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luqmana", "html_url": "https://github.com/luqmana", "followers_url": "https://api.github.com/users/luqmana/followers", "following_url": "https://api.github.com/users/luqmana/following{/other_user}", "gists_url": "https://api.github.com/users/luqmana/gists{/gist_id}", "starred_url": "https://api.github.com/users/luqmana/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luqmana/subscriptions", "organizations_url": "https://api.github.com/users/luqmana/orgs", "repos_url": "https://api.github.com/users/luqmana/repos", "events_url": "https://api.github.com/users/luqmana/events{/privacy}", "received_events_url": "https://api.github.com/users/luqmana/received_events", "type": "User", "site_admin": false}, "committer": {"login": "luqmana", "id": 287063, "node_id": "MDQ6VXNlcjI4NzA2Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/287063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luqmana", "html_url": "https://github.com/luqmana", "followers_url": "https://api.github.com/users/luqmana/followers", "following_url": "https://api.github.com/users/luqmana/following{/other_user}", "gists_url": "https://api.github.com/users/luqmana/gists{/gist_id}", "starred_url": "https://api.github.com/users/luqmana/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luqmana/subscriptions", "organizations_url": "https://api.github.com/users/luqmana/orgs", "repos_url": "https://api.github.com/users/luqmana/repos", "events_url": "https://api.github.com/users/luqmana/events{/privacy}", "received_events_url": "https://api.github.com/users/luqmana/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c22d0af14c621a847e71dac7fe0e7fe19bf851a1", "url": "https://api.github.com/repos/rust-lang/rust/commits/c22d0af14c621a847e71dac7fe0e7fe19bf851a1", "html_url": "https://github.com/rust-lang/rust/commit/c22d0af14c621a847e71dac7fe0e7fe19bf851a1"}], "stats": {"total": 11, "additions": 5, "deletions": 6}, "files": [{"sha": "3f6545caaa8e47d56470d873afc5b8014324b5a9", "filename": "src/rt/rust_builtin.cpp", "status": "modified", "additions": 5, "deletions": 6, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/2c198561dd878dcfa4fca3b7785215fd3490ca84/src%2Frt%2Frust_builtin.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/2c198561dd878dcfa4fca3b7785215fd3490ca84/src%2Frt%2Frust_builtin.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust_builtin.cpp?ref=2c198561dd878dcfa4fca3b7785215fd3490ca84", "patch": "@@ -241,13 +241,12 @@ debug_opaque(type_desc *t, uint8_t *front) {\n     rust_task *task = rust_get_current_task();\n     LOG(task, stdlib, \"debug_opaque\");\n     debug_tydesc_helper(t);\n+    // Account for alignment. `front` may not indeed be the\n+    // front byte of the passed-in argument\n+    if (((uintptr_t)front % t->align) != 0) {\n+        front = (uint8_t *)align_to((uintptr_t)front, (size_t)t->align);\n+    }\n     for (uintptr_t i = 0; i < t->size; ++front, ++i) {\n-\n-        // Account for alignment. `front` may not indeed be the\n-        // front byte of the passed-in argument\n-        if (((uintptr_t)front % t->align) != 0)\n-            front = (uint8_t *)align_to((uintptr_t)front, (size_t)t->align);\n-\n         LOG(task, stdlib, \"  byte %\" PRIdPTR \": 0x%\" PRIx8, i, *front);\n     }\n }"}]}