{"sha": "e7a000e717b06d7010c872efb1ed395fe8d8857d", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU3YTAwMGU3MTdiMDZkNzAxMGM4NzJlZmIxZWQzOTVmZThkODg1N2Q=", "commit": {"author": {"name": "inrustwetrust", "email": "inrustwetrust@users.noreply.github.com", "date": "2014-09-04T20:41:00Z"}, "committer": {"name": "inrustwetrust", "email": "inrustwetrust@users.noreply.github.com", "date": "2014-09-07T09:42:02Z"}, "message": "Added test for link path ordering", "tree": {"sha": "6e3eb609a6433f8a2a77c9bfaa06589cda1e132a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6e3eb609a6433f8a2a77c9bfaa06589cda1e132a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e7a000e717b06d7010c872efb1ed395fe8d8857d", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e7a000e717b06d7010c872efb1ed395fe8d8857d", "html_url": "https://github.com/rust-lang/rust/commit/e7a000e717b06d7010c872efb1ed395fe8d8857d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e7a000e717b06d7010c872efb1ed395fe8d8857d/comments", "author": {"login": "inrustwetrust", "id": 8572437, "node_id": "MDQ6VXNlcjg1NzI0Mzc=", "avatar_url": "https://avatars.githubusercontent.com/u/8572437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/inrustwetrust", "html_url": "https://github.com/inrustwetrust", "followers_url": "https://api.github.com/users/inrustwetrust/followers", "following_url": "https://api.github.com/users/inrustwetrust/following{/other_user}", "gists_url": "https://api.github.com/users/inrustwetrust/gists{/gist_id}", "starred_url": "https://api.github.com/users/inrustwetrust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/inrustwetrust/subscriptions", "organizations_url": "https://api.github.com/users/inrustwetrust/orgs", "repos_url": "https://api.github.com/users/inrustwetrust/repos", "events_url": "https://api.github.com/users/inrustwetrust/events{/privacy}", "received_events_url": "https://api.github.com/users/inrustwetrust/received_events", "type": "User", "site_admin": false}, "committer": {"login": "inrustwetrust", "id": 8572437, "node_id": "MDQ6VXNlcjg1NzI0Mzc=", "avatar_url": "https://avatars.githubusercontent.com/u/8572437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/inrustwetrust", "html_url": "https://github.com/inrustwetrust", "followers_url": "https://api.github.com/users/inrustwetrust/followers", "following_url": "https://api.github.com/users/inrustwetrust/following{/other_user}", "gists_url": "https://api.github.com/users/inrustwetrust/gists{/gist_id}", "starred_url": "https://api.github.com/users/inrustwetrust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/inrustwetrust/subscriptions", "organizations_url": "https://api.github.com/users/inrustwetrust/orgs", "repos_url": "https://api.github.com/users/inrustwetrust/repos", "events_url": "https://api.github.com/users/inrustwetrust/events{/privacy}", "received_events_url": "https://api.github.com/users/inrustwetrust/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "61414a985004a8948be8d01de11f4e55ef0dbad4", "url": "https://api.github.com/repos/rust-lang/rust/commits/61414a985004a8948be8d01de11f4e55ef0dbad4", "html_url": "https://github.com/rust-lang/rust/commit/61414a985004a8948be8d01de11f4e55ef0dbad4"}], "stats": {"total": 45, "additions": 45, "deletions": 0}, "files": [{"sha": "b8ebe6db6fd8f4d06a69fa29862460ec8365ea59", "filename": "src/test/run-make/link-path-order/Makefile", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/e7a000e717b06d7010c872efb1ed395fe8d8857d/src%2Ftest%2Frun-make%2Flink-path-order%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/e7a000e717b06d7010c872efb1ed395fe8d8857d/src%2Ftest%2Frun-make%2Flink-path-order%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Flink-path-order%2FMakefile?ref=e7a000e717b06d7010c872efb1ed395fe8d8857d", "patch": "@@ -0,0 +1,17 @@\n+-include ../tools.mk\n+\n+# Verifies that the -L arguments given to the linker is in the same order\n+# as the -L arguments on the rustc command line.\n+\n+CORRECT_DIR=$(TMPDIR)/correct\n+WRONG_DIR=$(TMPDIR)/wrong\n+\n+all: $(TMPDIR)/libcorrect.a $(TMPDIR)/libwrong.a\n+\tmkdir -p $(CORRECT_DIR) $(WRONG_DIR)\n+\tmv $(TMPDIR)/libcorrect.a $(CORRECT_DIR)/libfoo.a\n+\tmv $(TMPDIR)/libwrong.a $(WRONG_DIR)/libfoo.a\n+\t$(RUSTC) main.rs -o $(TMPDIR)/should_succeed -L $(CORRECT_DIR) -L $(WRONG_DIR)\n+\t$(call RUN,should_succeed)\n+\t$(RUSTC) main.rs -o $(TMPDIR)/should_fail -L $(WRONG_DIR) -L $(CORRECT_DIR)\n+\t$(call FAIL,should_fail)\n+"}, {"sha": "3064af952f898dd0af82955b866136b66867c114", "filename": "src/test/run-make/link-path-order/correct.c", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/e7a000e717b06d7010c872efb1ed395fe8d8857d/src%2Ftest%2Frun-make%2Flink-path-order%2Fcorrect.c", "raw_url": "https://github.com/rust-lang/rust/raw/e7a000e717b06d7010c872efb1ed395fe8d8857d/src%2Ftest%2Frun-make%2Flink-path-order%2Fcorrect.c", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Flink-path-order%2Fcorrect.c?ref=e7a000e717b06d7010c872efb1ed395fe8d8857d", "patch": "@@ -0,0 +1 @@\n+int should_return_one() { return 1; }"}, {"sha": "cd286af602a70c36856faf30947b3ec046c0372d", "filename": "src/test/run-make/link-path-order/main.rs", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/e7a000e717b06d7010c872efb1ed395fe8d8857d/src%2Ftest%2Frun-make%2Flink-path-order%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7a000e717b06d7010c872efb1ed395fe8d8857d/src%2Ftest%2Frun-make%2Flink-path-order%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Flink-path-order%2Fmain.rs?ref=e7a000e717b06d7010c872efb1ed395fe8d8857d", "patch": "@@ -0,0 +1,26 @@\n+// Copyright 2014 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+extern crate libc;\n+\n+#[link(name=\"foo\")]\n+extern {\n+    fn should_return_one() -> libc::c_int;\n+}\n+\n+fn main() {\n+    let result = unsafe {\n+        should_return_one()\n+    };\n+\n+    if result != 1 {\n+        std::os::set_exit_status(255);\n+    }\n+}"}, {"sha": "64275b3ad6bb0f78f4edd2abee386e200c445bff", "filename": "src/test/run-make/link-path-order/wrong.c", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/e7a000e717b06d7010c872efb1ed395fe8d8857d/src%2Ftest%2Frun-make%2Flink-path-order%2Fwrong.c", "raw_url": "https://github.com/rust-lang/rust/raw/e7a000e717b06d7010c872efb1ed395fe8d8857d/src%2Ftest%2Frun-make%2Flink-path-order%2Fwrong.c", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Flink-path-order%2Fwrong.c?ref=e7a000e717b06d7010c872efb1ed395fe8d8857d", "patch": "@@ -0,0 +1 @@\n+int should_return_one() { return 0; }"}]}