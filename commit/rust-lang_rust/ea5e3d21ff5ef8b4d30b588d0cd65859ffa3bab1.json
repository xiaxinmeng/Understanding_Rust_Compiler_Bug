{"sha": "ea5e3d21ff5ef8b4d30b588d0cd65859ffa3bab1", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVhNWUzZDIxZmY1ZWY4YjRkMzBiNTg4ZDBjZDY1ODU5ZmZhM2JhYjE=", "commit": {"author": {"name": "Tim Chevalier", "email": "chevalier@alum.wellesley.edu", "date": "2012-09-19T05:33:49Z"}, "committer": {"name": "Tim Chevalier", "email": "chevalier@alum.wellesley.edu", "date": "2012-10-13T03:43:37Z"}, "message": "Make moves explicit in doc examples\n\nHad to remove the buffalo example. It was awkward to update for\nexplicit moves.", "tree": {"sha": "3a490d6c9d82154a49861a6fb6ace98bc047b5d6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3a490d6c9d82154a49861a6fb6ace98bc047b5d6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ea5e3d21ff5ef8b4d30b588d0cd65859ffa3bab1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ea5e3d21ff5ef8b4d30b588d0cd65859ffa3bab1", "html_url": "https://github.com/rust-lang/rust/commit/ea5e3d21ff5ef8b4d30b588d0cd65859ffa3bab1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ea5e3d21ff5ef8b4d30b588d0cd65859ffa3bab1/comments", "author": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "committer": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d0ed13c4bdb19b2e9c445908775794f0880a301c", "url": "https://api.github.com/repos/rust-lang/rust/commits/d0ed13c4bdb19b2e9c445908775794f0880a301c", "html_url": "https://github.com/rust-lang/rust/commit/d0ed13c4bdb19b2e9c445908775794f0880a301c"}], "stats": {"total": 38, "additions": 28, "deletions": 10}, "files": [{"sha": "2d203400dda8e20186053625b5edb65c6771d32c", "filename": "doc/tutorial-tasks.md", "status": "modified", "additions": 9, "deletions": 9, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/ea5e3d21ff5ef8b4d30b588d0cd65859ffa3bab1/doc%2Ftutorial-tasks.md", "raw_url": "https://github.com/rust-lang/rust/raw/ea5e3d21ff5ef8b4d30b588d0cd65859ffa3bab1/doc%2Ftutorial-tasks.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/doc%2Ftutorial-tasks.md?ref=ea5e3d21ff5ef8b4d30b588d0cd65859ffa3bab1", "patch": "@@ -161,7 +161,7 @@ use pipes::{stream, Port, Chan};\n \n let (chan, port): (Chan<int>, Port<int>) = stream();\n \n-do spawn {\n+do spawn |move chan| {\n     let result = some_expensive_computation();\n     chan.send(result);\n }\n@@ -192,7 +192,7 @@ spawns the child task.\n # use pipes::{stream, Port, Chan};\n # fn some_expensive_computation() -> int { 42 }\n # let (chan, port) = stream();\n-do spawn {\n+do spawn |move chan| {\n     let result = some_expensive_computation();\n     chan.send(result);\n }\n@@ -229,7 +229,7 @@ following program is ill-typed:\n # fn some_expensive_computation() -> int { 42 }\n let (chan, port) = stream();\n \n-do spawn {\n+do spawn |move chan| {\n     chan.send(some_expensive_computation());\n }\n \n@@ -253,7 +253,7 @@ let chan = SharedChan(move chan);\n for uint::range(0, 3) |init_val| {\n     // Create a new channel handle to distribute to the child task\n     let child_chan = chan.clone();\n-    do spawn {\n+    do spawn |move child_chan| {\n         child_chan.send(some_expensive_computation(init_val));\n     }\n }\n@@ -283,10 +283,10 @@ might look like the example below.\n // Create a vector of ports, one for each child task\n let ports = do vec::from_fn(3) |init_val| {\n     let (chan, port) = stream();\n-    do spawn {\n+    do spawn |move chan| {\n         chan.send(some_expensive_computation(init_val));\n     }\n-    port\n+    move port\n };\n \n // Wait on each port, accumulating the results\n@@ -398,13 +398,13 @@ before returning. Hence:\n # fn sleep_forever() { loop { task::yield() } }\n # do task::try {\n let (sender, receiver): (Chan<int>, Port<int>) = stream();\n-do spawn {  // Bidirectionally linked\n+do spawn |move receiver| {  // Bidirectionally linked\n     // Wait for the supervised child task to exist.\n     let message = receiver.recv();\n     // Kill both it and the parent task.\n     assert message != 42;\n }\n-do try {  // Unidirectionally linked\n+do try |move sender| {  // Unidirectionally linked\n     sender.send(42);\n     sleep_forever();  // Will get woken up by force\n }\n@@ -505,7 +505,7 @@ Here is the code for the parent task:\n \n let (from_child, to_child) = DuplexStream();\n \n-do spawn || {\n+do spawn |move to_child| {\n     stringifier(&to_child);\n };\n "}, {"sha": "8746cf026f9ec6a840c96f9441a4b5debdd81557", "filename": "doc/tutorial.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ea5e3d21ff5ef8b4d30b588d0cd65859ffa3bab1/doc%2Ftutorial.md", "raw_url": "https://github.com/rust-lang/rust/raw/ea5e3d21ff5ef8b4d30b588d0cd65859ffa3bab1/doc%2Ftutorial.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/doc%2Ftutorial.md?ref=ea5e3d21ff5ef8b4d30b588d0cd65859ffa3bab1", "patch": "@@ -1827,7 +1827,7 @@ fn map<T, U>(vector: &[T], function: fn(v: &T) -> U) -> ~[U] {\n     for vec::each(vector) |element| {\n         accumulator.push(function(element));\n     }\n-    return accumulator;\n+    return (move accumulator);\n }\n ~~~~\n "}, {"sha": "5f677767240d12b60302cc3a725e79e0ee0c6b6c", "filename": "src/test/run-pass/issue-3668.rs", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/ea5e3d21ff5ef8b4d30b588d0cd65859ffa3bab1/src%2Ftest%2Frun-pass%2Fissue-3668.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ea5e3d21ff5ef8b4d30b588d0cd65859ffa3bab1/src%2Ftest%2Frun-pass%2Fissue-3668.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissue-3668.rs?ref=ea5e3d21ff5ef8b4d30b588d0cd65859ffa3bab1", "patch": "@@ -0,0 +1,13 @@\n+struct P { child: Option<@mut P> }\n+trait PTrait {\n+   fn getChildOption() -> Option<@P>;\n+}\n+\n+impl P: PTrait {\n+   fn getChildOption() -> Option<@P> {\n+       const childVal: @P = self.child.get();\n+       fail;\n+   }\n+}\n+\n+fn main() {}"}, {"sha": "018bd1d2a8d3822d22a7fb89b5431b571988e7fd", "filename": "src/test/run-pass/issue-3688-2.rs", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/ea5e3d21ff5ef8b4d30b588d0cd65859ffa3bab1/src%2Ftest%2Frun-pass%2Fissue-3688-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ea5e3d21ff5ef8b4d30b588d0cd65859ffa3bab1/src%2Ftest%2Frun-pass%2Fissue-3688-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissue-3688-2.rs?ref=ea5e3d21ff5ef8b4d30b588d0cd65859ffa3bab1", "patch": "@@ -0,0 +1,5 @@\n+   fn f(x:int) {\n+       const child: int = x + 1;\n+   }\n+\n+fn main() {}"}]}