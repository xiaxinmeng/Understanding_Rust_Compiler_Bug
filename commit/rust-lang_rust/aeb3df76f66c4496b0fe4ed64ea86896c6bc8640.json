{"sha": "aeb3df76f66c4496b0fe4ed64ea86896c6bc8640", "node_id": "C_kwDOAAsO6NoAKGFlYjNkZjc2ZjY2YzQ0OTZiMGZlNGVkNjRlYTg2ODk2YzZiYzg2NDA", "commit": {"author": {"name": "Jakub Ber\u00e1nek", "email": "berykubik@gmail.com", "date": "2022-04-11T08:05:05Z"}, "committer": {"name": "Jakub Ber\u00e1nek", "email": "berykubik@gmail.com", "date": "2022-04-11T08:05:05Z"}, "message": "CI: do not compile libcore twice when performing LLVM PGO", "tree": {"sha": "faeecec05756ce7a15b19425b16ba48861c9382b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/faeecec05756ce7a15b19425b16ba48861c9382b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/aeb3df76f66c4496b0fe4ed64ea86896c6bc8640", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEEzFQynJm4WzBnfhz8kJzQ0mSDUWsFAmJT4TEACgkQkJzQ0mSD\nUWtBqgv/fcMjoARKVMMHBKiE4dgbuVn8g4vj55pkipHQjY42JIDsmb3/NCHhIxud\noV022tUmhL1XQE0FPyeEnRdzM1QmLN9r47bqpYfZxYjCP0S8yhXMQJOrNRJrYqni\nN736UT00c86uudXFFnSehCoF3pCTFKVnad54GVJGzg4X9RnV/AoEQHK78yKw4sBL\nQGPVOQ2Y5qxdPDYAAmbl2/XINpgEG8VeAOs0s/R7fB0tdB4RXbOdektalBLKtwiF\nHV6YcBDYfbKwU2l7wLFiNIpiyR/ynU9Kcmreg4XnGWA3/acieQ8BtMTTcnLfWAiL\n/bplRF5OKYYJl/7oczCdAabRETBELoE5doh0g4wrKBTrHfPxwKSabS/jgz/7ANN5\n8gRuspO4GzTkWbpxO3GmNCxEWZP4bUJfcLvDHW5q6PvUq+cFNrxeYWSEXJLDlpJW\n28OU5IFPDhMCT2Za4nrBZY7dAVFBxHGnGwyWCwaQfDjOHnRocQ6HqoK1K/5G86/f\nb+kfA6Rc\n=Crvg\n-----END PGP SIGNATURE-----", "payload": "tree faeecec05756ce7a15b19425b16ba48861c9382b\nparent 48a9e104dfafdec3a5d00d365229d6369939f433\nauthor Jakub Ber\u00e1nek <berykubik@gmail.com> 1649664305 +0200\ncommitter Jakub Ber\u00e1nek <berykubik@gmail.com> 1649664305 +0200\n\nCI: do not compile libcore twice when performing LLVM PGO\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/aeb3df76f66c4496b0fe4ed64ea86896c6bc8640", "html_url": "https://github.com/rust-lang/rust/commit/aeb3df76f66c4496b0fe4ed64ea86896c6bc8640", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/aeb3df76f66c4496b0fe4ed64ea86896c6bc8640/comments", "author": {"login": "Kobzol", "id": 4539057, "node_id": "MDQ6VXNlcjQ1MzkwNTc=", "avatar_url": "https://avatars.githubusercontent.com/u/4539057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kobzol", "html_url": "https://github.com/Kobzol", "followers_url": "https://api.github.com/users/Kobzol/followers", "following_url": "https://api.github.com/users/Kobzol/following{/other_user}", "gists_url": "https://api.github.com/users/Kobzol/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kobzol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kobzol/subscriptions", "organizations_url": "https://api.github.com/users/Kobzol/orgs", "repos_url": "https://api.github.com/users/Kobzol/repos", "events_url": "https://api.github.com/users/Kobzol/events{/privacy}", "received_events_url": "https://api.github.com/users/Kobzol/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Kobzol", "id": 4539057, "node_id": "MDQ6VXNlcjQ1MzkwNTc=", "avatar_url": "https://avatars.githubusercontent.com/u/4539057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kobzol", "html_url": "https://github.com/Kobzol", "followers_url": "https://api.github.com/users/Kobzol/followers", "following_url": "https://api.github.com/users/Kobzol/following{/other_user}", "gists_url": "https://api.github.com/users/Kobzol/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kobzol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kobzol/subscriptions", "organizations_url": "https://api.github.com/users/Kobzol/orgs", "repos_url": "https://api.github.com/users/Kobzol/repos", "events_url": "https://api.github.com/users/Kobzol/events{/privacy}", "received_events_url": "https://api.github.com/users/Kobzol/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "48a9e104dfafdec3a5d00d365229d6369939f433", "url": "https://api.github.com/repos/rust-lang/rust/commits/48a9e104dfafdec3a5d00d365229d6369939f433", "html_url": "https://github.com/rust-lang/rust/commit/48a9e104dfafdec3a5d00d365229d6369939f433"}], "stats": {"total": 6, "additions": 0, "deletions": 6}, "files": [{"sha": "691d1282cf499ceae3f17bc288c0d44a77c83c23", "filename": "src/ci/pgo.sh", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/aeb3df76f66c4496b0fe4ed64ea86896c6bc8640/src%2Fci%2Fpgo.sh", "raw_url": "https://github.com/rust-lang/rust/raw/aeb3df76f66c4496b0fe4ed64ea86896c6bc8640/src%2Fci%2Fpgo.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fpgo.sh?ref=aeb3df76f66c4496b0fe4ed64ea86896c6bc8640", "patch": "@@ -47,12 +47,6 @@ python3 ../x.py build --target=$PGO_HOST --host=$PGO_HOST \\\n     --stage 2 library/std \\\n     --llvm-profile-generate\n \n-# Profile libcore compilation in opt-level=0 and opt-level=3\n-RUSTC_BOOTSTRAP=1 ./build/$PGO_HOST/stage2/bin/rustc \\\n-    --edition=2021 --crate-type=lib ../library/core/src/lib.rs\n-RUSTC_BOOTSTRAP=1 ./build/$PGO_HOST/stage2/bin/rustc \\\n-    --edition=2021 --crate-type=lib -Copt-level=3 ../library/core/src/lib.rs\n-\n # Compile rustc perf\n cp -r /tmp/rustc-perf ./\n chown -R $(whoami): ./rustc-perf"}]}