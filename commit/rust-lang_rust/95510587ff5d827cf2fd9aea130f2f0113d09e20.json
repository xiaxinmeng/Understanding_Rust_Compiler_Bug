{"sha": "95510587ff5d827cf2fd9aea130f2f0113d09e20", "node_id": "C_kwDOAAsO6NoAKDk1NTEwNTg3ZmY1ZDgyN2NmMmZkOWFlYTEzMGYyZjAxMTNkMDllMjA", "commit": {"author": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2022-04-29T22:54:09Z"}, "committer": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2022-04-29T22:55:30Z"}, "message": "Resolve clippy::op_ref\n\n    error: taken reference of right operand\n      --> src/shims/env.rs:53:63\n       |\n    53 |                     true => !excluded_env_vars.iter().any(|v| v.as_str() == &name),\n       |                                                               ^^^^^^^^^^^^^^-----\n       |                                                                             |\n       |                                                                             help: use the right value directly: `name`\n       |\n       = note: `-D clippy::op-ref` implied by `-D clippy::all`\n       = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#op_ref\n\n    error: taken reference of right operand\n      --> src/shims/env.rs:54:71\n       |\n    54 |                     false => config.forwarded_env_vars.iter().any(|v| v.as_str() == &name),\n       |                                                                       ^^^^^^^^^^^^^^-----\n       |                                                                                     |\n       |                                                                                     help: use the right value directly: `name`\n       |\n       = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#op_ref", "tree": {"sha": "9ee7acbabf0f4bd26f90fb53aa4f1d6e14c2d4e1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9ee7acbabf0f4bd26f90fb53aa4f1d6e14c2d4e1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/95510587ff5d827cf2fd9aea130f2f0113d09e20", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEERijF2Cz/ZdaBZKeK+boUO5X/bYIFAmJsbOIACgkQ+boUO5X/\nbYKyRQ//e9SixZEjt55YbRtX3KZBarfy0nOX+7DZqFThq5s8ZuSgDFiPW7btdZGl\nl8JSdGhYmFAJMyJA2Vd9iT+cORczXtmsvPgFR8RExFn9IuDAfZKGRgUGW17SIlLx\nezQ/CkRuChBHDm+80E2WqGiCM5ztPkCZVfSSHyeHYDqkxFSTgi1qXmSD7atH3W4x\nOtUzIEhicRMrKnmdCjqImkgyzwg8STuL9fHv5P54ntvKys1Dcao6yh/6TMuI7zQ5\n7wxwCoOQWYui689Oos2sVCx9y1VpwuMP+QFwAIxzyN8BARHuPYJWC0sWoc6wf+xF\nGv1ZHRDR365mZwu42yUGC01k0Q9YBsgIWXkoTdkEP1LT3p/I4fr3ZriKa2XDxHwm\njkzGX80/crKpkuwJ44spTQZg/2Uh4HeQUFuDEg70LRXYtdo66v5z6TVj20lxDATY\nKlhIKu70oEGzeDV0br5SkqnMifZCvg8ZKlib3Edbyaz++ovfEYUrtZbEIQAJDicN\nAZ0S8aGwiVc2qjEOE8C/6657WRcjLTQghQZosNFV32ACsJSQ5ubbXwDuGMhk1yTt\niqtRa1CjQKYT/m72xr8oo6bUDRJHOZoZfB9zWxhJZV/O03FanOkCwiT9NQuglvBx\n4639rDkuwpSUoScJrRHSV5LcEK6e15T8ke4CahMG5qnmO2llTiw=\n=zgIB\n-----END PGP SIGNATURE-----", "payload": "tree 9ee7acbabf0f4bd26f90fb53aa4f1d6e14c2d4e1\nparent 519755a82356895545a8e383c6aa27aba20eabd6\nauthor David Tolnay <dtolnay@gmail.com> 1651272849 -0700\ncommitter David Tolnay <dtolnay@gmail.com> 1651272930 -0700\n\nResolve clippy::op_ref\n\n    error: taken reference of right operand\n      --> src/shims/env.rs:53:63\n       |\n    53 |                     true => !excluded_env_vars.iter().any(|v| v.as_str() == &name),\n       |                                                               ^^^^^^^^^^^^^^-----\n       |                                                                             |\n       |                                                                             help: use the right value directly: `name`\n       |\n       = note: `-D clippy::op-ref` implied by `-D clippy::all`\n       = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#op_ref\n\n    error: taken reference of right operand\n      --> src/shims/env.rs:54:71\n       |\n    54 |                     false => config.forwarded_env_vars.iter().any(|v| v.as_str() == &name),\n       |                                                                       ^^^^^^^^^^^^^^-----\n       |                                                                                     |\n       |                                                                                     help: use the right value directly: `name`\n       |\n       = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#op_ref\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/95510587ff5d827cf2fd9aea130f2f0113d09e20", "html_url": "https://github.com/rust-lang/rust/commit/95510587ff5d827cf2fd9aea130f2f0113d09e20", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/95510587ff5d827cf2fd9aea130f2f0113d09e20/comments", "author": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "519755a82356895545a8e383c6aa27aba20eabd6", "url": "https://api.github.com/repos/rust-lang/rust/commits/519755a82356895545a8e383c6aa27aba20eabd6", "html_url": "https://github.com/rust-lang/rust/commit/519755a82356895545a8e383c6aa27aba20eabd6"}], "stats": {"total": 5, "additions": 2, "deletions": 3}, "files": [{"sha": "cd62c0c1f3fe9d7572901fa75bc8787df1542b1c", "filename": "src/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/95510587ff5d827cf2fd9aea130f2f0113d09e20/src%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/95510587ff5d827cf2fd9aea130f2f0113d09e20/src%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib.rs?ref=95510587ff5d827cf2fd9aea130f2f0113d09e20", "patch": "@@ -20,7 +20,6 @@\n     clippy::manual_map,\n     clippy::needless_lifetimes,\n     clippy::new_without_default,\n-    clippy::op_ref,\n     clippy::redundant_closure,\n     clippy::redundant_field_names,\n     clippy::single_char_add_str,"}, {"sha": "34a716f08ab2f5d607b8983e67e71e2769a43df4", "filename": "src/shims/env.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/95510587ff5d827cf2fd9aea130f2f0113d09e20/src%2Fshims%2Fenv.rs", "raw_url": "https://github.com/rust-lang/rust/raw/95510587ff5d827cf2fd9aea130f2f0113d09e20/src%2Fshims%2Fenv.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fshims%2Fenv.rs?ref=95510587ff5d827cf2fd9aea130f2f0113d09e20", "patch": "@@ -50,8 +50,8 @@ impl<'tcx> EnvVars<'tcx> {\n         if ecx.machine.communicate() || !config.forwarded_env_vars.is_empty() {\n             for (name, value) in env::vars_os() {\n                 let forward = match ecx.machine.communicate() {\n-                    true => !excluded_env_vars.iter().any(|v| v.as_str() == &name),\n-                    false => config.forwarded_env_vars.iter().any(|v| v.as_str() == &name),\n+                    true => !excluded_env_vars.iter().any(|v| **v == name),\n+                    false => config.forwarded_env_vars.iter().any(|v| **v == name),\n                 };\n                 if forward {\n                     let var_ptr = match target_os {"}]}