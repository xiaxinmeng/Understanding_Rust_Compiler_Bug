{"sha": "f09e2cc7ed34ae1623c334df92981bc53a11a6ae", "node_id": "MDY6Q29tbWl0NzI0NzEyOmYwOWUyY2M3ZWQzNGFlMTYyM2MzMzRkZjkyOTgxYmM1M2ExMWE2YWU=", "commit": {"author": {"name": "Jon Gjengset", "email": "jon@thesquareplanet.com", "date": "2016-12-12T04:57:15Z"}, "committer": {"name": "Jon Gjengset", "email": "jon@thesquareplanet.com", "date": "2016-12-12T04:57:20Z"}, "message": "Expand E0309 explanation with motivating example", "tree": {"sha": "96aafb3ca53716573a94435b2eb4885bd683e15e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/96aafb3ca53716573a94435b2eb4885bd683e15e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f09e2cc7ed34ae1623c334df92981bc53a11a6ae", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEDrgUCxKUwmVd3b8M1krJ1nF23HEFAlhOLjMACgkQ1krJ1nF2\n3HEXWg//Q4vU0ka9qHp3GKrgFQz7kfAJg9xv7923mFlWDRLp6b8ehw4X+7hnIeaO\nwMIvOJ/+sFYENB9VRwGSASC/+oc1KG+9LakTvOIWCPjeX+Zw/a3BL0/PhF/H9mKD\nPo0jyFiKQhPLFnrxS4Rn/jXK3HxLNIb+al9oZ/qVg3+DQhZ6ZNellSgu4Q34J1vi\nHz7XPIDXoMgS6+JdzYD/6jgBXYLs8FIFZmyV8u72+9uokAXDQvyHSoqjNcIHfIYz\ndGTKdIgNuCNnWVGe6HGzNjCscmV0OIfY27gp9amt4K84O1dnwOY+eEfp8pk7yIHM\nn1SzZPva8OCS+JNCcUKKK3R0ijKRaFzjUTg2zpXuKYojECOoYlQsZIYSYfziJ+w7\nJ7OCMUhz1f3wDbabDZAMeTbkjP3SHuO044GH0n8jsVUkseJlwSH3XxeoXYFpgbZl\nLrrM0NbhlxXRRD3rK0xGjDbAycrWBeF8KMnV7Ml65XutwOtlIet4/uo6rH9/Knc5\nlSRqB8RhStLYcXHlFBOCRPQgzt8rqcpuyK525oty6BSY+KoYsw0DF/fksKSoqng6\nHNfIfbv92/XjTBQr1Na4Pk2NttrIFXnlb42Z+zF2eICgJMw2CG/EvZDPDk6ZHe2X\nF9rTFyYBkvpMv2nMq/RzoY8V+0/BEo56kTnMJvfpQwRqej2UnZE=\n=r4nA\n-----END PGP SIGNATURE-----", "payload": "tree 96aafb3ca53716573a94435b2eb4885bd683e15e\nparent 5e2f37fca9a792a8780e6f427e77ca0fe707bd47\nauthor Jon Gjengset <jon@thesquareplanet.com> 1481518635 -0500\ncommitter Jon Gjengset <jon@thesquareplanet.com> 1481518640 -0500\n\nExpand E0309 explanation with motivating example\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f09e2cc7ed34ae1623c334df92981bc53a11a6ae", "html_url": "https://github.com/rust-lang/rust/commit/f09e2cc7ed34ae1623c334df92981bc53a11a6ae", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f09e2cc7ed34ae1623c334df92981bc53a11a6ae/comments", "author": {"login": "jonhoo", "id": 176295, "node_id": "MDQ6VXNlcjE3NjI5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/176295?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonhoo", "html_url": "https://github.com/jonhoo", "followers_url": "https://api.github.com/users/jonhoo/followers", "following_url": "https://api.github.com/users/jonhoo/following{/other_user}", "gists_url": "https://api.github.com/users/jonhoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonhoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonhoo/subscriptions", "organizations_url": "https://api.github.com/users/jonhoo/orgs", "repos_url": "https://api.github.com/users/jonhoo/repos", "events_url": "https://api.github.com/users/jonhoo/events{/privacy}", "received_events_url": "https://api.github.com/users/jonhoo/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jonhoo", "id": 176295, "node_id": "MDQ6VXNlcjE3NjI5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/176295?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonhoo", "html_url": "https://github.com/jonhoo", "followers_url": "https://api.github.com/users/jonhoo/followers", "following_url": "https://api.github.com/users/jonhoo/following{/other_user}", "gists_url": "https://api.github.com/users/jonhoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonhoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonhoo/subscriptions", "organizations_url": "https://api.github.com/users/jonhoo/orgs", "repos_url": "https://api.github.com/users/jonhoo/repos", "events_url": "https://api.github.com/users/jonhoo/events{/privacy}", "received_events_url": "https://api.github.com/users/jonhoo/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5e2f37fca9a792a8780e6f427e77ca0fe707bd47", "url": "https://api.github.com/repos/rust-lang/rust/commits/5e2f37fca9a792a8780e6f427e77ca0fe707bd47", "html_url": "https://github.com/rust-lang/rust/commit/5e2f37fca9a792a8780e6f427e77ca0fe707bd47"}], "stats": {"total": 17, "additions": 17, "deletions": 0}, "files": [{"sha": "1655c716b6bfa59dac2c36c52420a055b115e29d", "filename": "src/librustc/diagnostics.rs", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/f09e2cc7ed34ae1623c334df92981bc53a11a6ae/src%2Flibrustc%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f09e2cc7ed34ae1623c334df92981bc53a11a6ae/src%2Flibrustc%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fdiagnostics.rs?ref=f09e2cc7ed34ae1623c334df92981bc53a11a6ae", "patch": "@@ -1236,6 +1236,23 @@ struct Foo<'a, T: 'a> {\n     foo: &'a T\n }\n ```\n+\n+To see why this is important, consider the case where `T` is itself a reference\n+(e.g., `T = &str`). If we don't include the restriction that `T: 'a`, the\n+following code would be perfectly legal:\n+\n+```compile_fail,E0309\n+struct Foo<'a, T> {\n+    foo: &'a T\n+}\n+\n+fn main() {\n+    let v = \"42\".to_string();\n+    let f = Foo{foo: &v};\n+    drop(v);\n+    println!(\"{}\", f.foo); // but we've already dropped v!\n+}\n+```\n \"##,\n \n E0310: r##\""}]}