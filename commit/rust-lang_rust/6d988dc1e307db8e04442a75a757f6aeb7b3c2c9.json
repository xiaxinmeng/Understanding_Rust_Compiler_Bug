{"sha": "6d988dc1e307db8e04442a75a757f6aeb7b3c2c9", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZkOTg4ZGMxZTMwN2RiOGUwNDQ0MmE3NWE3NTdmNmFlYjdiM2MyYzk=", "commit": {"author": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2021-04-28T15:47:09Z"}, "committer": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2021-07-30T17:42:18Z"}, "message": "Fix undocumented unsafe in AssertUnwindSafe impls", "tree": {"sha": "b624b9799602f316290aac6dc3545dc8fb172d5f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b624b9799602f316290aac6dc3545dc8fb172d5f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6d988dc1e307db8e04442a75a757f6aeb7b3c2c9", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEERijF2Cz/ZdaBZKeK+boUO5X/bYIFAmEEOfoACgkQ+boUO5X/\nbYLiDxAAuHnnp5yC+QDS9lThqR5Grv0eHwqrM6b6s8NrBCRWXePwwY+MMdjA5Vo0\n/ahY7mDTtfkie0r/nN3798mZ+8+utBm9VjWYzW65c0o0x4hQcO2FOhEh8UCQ0uCO\nEP1guToPZDcMlvVOkpk81Xf7imWYSiJWpiGZB/kuq49OqLBS5FNCOG+mqPRoPFQ2\nEEaPIp28YFiLCO94SeeAAGZuyNHymEAJITGaa+ZZKqCByjr//fm2hH02UqDxwfyS\nZq584mv6XLtXBUUEGkGaeFcJNrs7NwfVS3wNCFgA9OsotfXBuIzfadms/Ow22tuy\nT8unS1gS/kS56kspwEdvf8rJjjWVOSI9jesC0/4vHF6Yesfz9A81wKc19geUkpCm\nJQss3a4u+YaouWSqeO24lBe+sbLgxE7KUUWCAxwzjgFNBrExI3fiM2PEQNagChrS\nUmuZmXPgUNXxM07tg/pshiIdtnLZqulHgUvrCgSTvzNsOP2drhIkz+ZR30f2EOQx\nG4fuhhMPgkmS6Pub2VR2eLbBHxPgamujaNKKRdsmDUINZuFzYFdomgbPrP/utHbf\nUfSfC5D3S2DQT/WUzUi71Nk94dTHFSJITbtZ6ApPsf4wFpzP4zn65HnhR8SPQovz\nCg2XZ/K7Tp5JFZHw/MYvoPZg/rwlphAICGuMt9LpZzpsTpDDC9Q=\n=xBKQ\n-----END PGP SIGNATURE-----", "payload": "tree b624b9799602f316290aac6dc3545dc8fb172d5f\nparent 4e17994b2ca5da45f219ad09cad591fc7d31dd59\nauthor David Tolnay <dtolnay@gmail.com> 1619624829 -0700\ncommitter David Tolnay <dtolnay@gmail.com> 1627666938 -0700\n\nFix undocumented unsafe in AssertUnwindSafe impls\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6d988dc1e307db8e04442a75a757f6aeb7b3c2c9", "html_url": "https://github.com/rust-lang/rust/commit/6d988dc1e307db8e04442a75a757f6aeb7b3c2c9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6d988dc1e307db8e04442a75a757f6aeb7b3c2c9/comments", "author": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4e17994b2ca5da45f219ad09cad591fc7d31dd59", "url": "https://api.github.com/repos/rust-lang/rust/commits/4e17994b2ca5da45f219ad09cad591fc7d31dd59", "html_url": "https://github.com/rust-lang/rust/commit/4e17994b2ca5da45f219ad09cad591fc7d31dd59"}], "stats": {"total": 2, "additions": 2, "deletions": 0}, "files": [{"sha": "a1ee47e4d4863a69eb2b97b52bb80cd42be5ce92", "filename": "library/core/src/panic/unwind_safe.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6d988dc1e307db8e04442a75a757f6aeb7b3c2c9/library%2Fcore%2Fsrc%2Fpanic%2Funwind_safe.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6d988dc1e307db8e04442a75a757f6aeb7b3c2c9/library%2Fcore%2Fsrc%2Fpanic%2Funwind_safe.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fpanic%2Funwind_safe.rs?ref=6d988dc1e307db8e04442a75a757f6aeb7b3c2c9", "patch": "@@ -281,6 +281,7 @@ impl<F: Future> Future for AssertUnwindSafe<F> {\n     type Output = F::Output;\n \n     fn poll(self: Pin<&mut Self>, cx: &mut Context<'_>) -> Poll<Self::Output> {\n+        // SAFETY: pin projection. AssertUnwindSafe follows structural pinning.\n         let pinned_field = unsafe { Pin::map_unchecked_mut(self, |x| &mut x.0) };\n         F::poll(pinned_field, cx)\n     }\n@@ -291,6 +292,7 @@ impl<S: Stream> Stream for AssertUnwindSafe<S> {\n     type Item = S::Item;\n \n     fn poll_next(self: Pin<&mut Self>, cx: &mut Context<'_>) -> Poll<Option<S::Item>> {\n+        // SAFETY: pin projection. AssertUnwindSafe follows structural pinning.\n         unsafe { self.map_unchecked_mut(|x| &mut x.0) }.poll_next(cx)\n     }\n "}]}