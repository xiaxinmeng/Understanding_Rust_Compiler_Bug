{"sha": "41f5e701e69a164acae301574938c30e2fd605a5", "node_id": "C_kwDOAAsO6NoAKDQxZjVlNzAxZTY5YTE2NGFjYWUzMDE1NzQ5MzhjMzBlMmZkNjA1YTU", "commit": {"author": {"name": "Antoni Boucher", "email": "bouanto@zoho.com", "date": "2023-01-23T02:22:49Z"}, "committer": {"name": "Antoni Boucher", "email": "bouanto@zoho.com", "date": "2023-01-26T22:14:09Z"}, "message": "Fix signed integer overflow", "tree": {"sha": "bb1d541b23a0bf745084ae4b07823894b8a7f353", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bb1d541b23a0bf745084ae4b07823894b8a7f353"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/41f5e701e69a164acae301574938c30e2fd605a5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/41f5e701e69a164acae301574938c30e2fd605a5", "html_url": "https://github.com/rust-lang/rust/commit/41f5e701e69a164acae301574938c30e2fd605a5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/41f5e701e69a164acae301574938c30e2fd605a5/comments", "author": {"login": "antoyo", "id": 584972, "node_id": "MDQ6VXNlcjU4NDk3Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/584972?v=4", "gravatar_id": "", "url": "https://api.github.com/users/antoyo", "html_url": "https://github.com/antoyo", "followers_url": "https://api.github.com/users/antoyo/followers", "following_url": "https://api.github.com/users/antoyo/following{/other_user}", "gists_url": "https://api.github.com/users/antoyo/gists{/gist_id}", "starred_url": "https://api.github.com/users/antoyo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/antoyo/subscriptions", "organizations_url": "https://api.github.com/users/antoyo/orgs", "repos_url": "https://api.github.com/users/antoyo/repos", "events_url": "https://api.github.com/users/antoyo/events{/privacy}", "received_events_url": "https://api.github.com/users/antoyo/received_events", "type": "User", "site_admin": false}, "committer": {"login": "antoyo", "id": 584972, "node_id": "MDQ6VXNlcjU4NDk3Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/584972?v=4", "gravatar_id": "", "url": "https://api.github.com/users/antoyo", "html_url": "https://github.com/antoyo", "followers_url": "https://api.github.com/users/antoyo/followers", "following_url": "https://api.github.com/users/antoyo/following{/other_user}", "gists_url": "https://api.github.com/users/antoyo/gists{/gist_id}", "starred_url": "https://api.github.com/users/antoyo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/antoyo/subscriptions", "organizations_url": "https://api.github.com/users/antoyo/orgs", "repos_url": "https://api.github.com/users/antoyo/repos", "events_url": "https://api.github.com/users/antoyo/events{/privacy}", "received_events_url": "https://api.github.com/users/antoyo/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e6024f3bf3d6f60ef51bf9bb76a730f3898bf5b6", "url": "https://api.github.com/repos/rust-lang/rust/commits/e6024f3bf3d6f60ef51bf9bb76a730f3898bf5b6", "html_url": "https://github.com/rust-lang/rust/commit/e6024f3bf3d6f60ef51bf9bb76a730f3898bf5b6"}], "stats": {"total": 5, "additions": 4, "deletions": 1}, "files": [{"sha": "c60c96d2023e58ce4a8b46e589b0c1e1846dcd70", "filename": ".github/workflows/release.yml", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/41f5e701e69a164acae301574938c30e2fd605a5/.github%2Fworkflows%2Frelease.yml", "raw_url": "https://github.com/rust-lang/rust/raw/41f5e701e69a164acae301574938c30e2fd605a5/.github%2Fworkflows%2Frelease.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Frelease.yml?ref=41f5e701e69a164acae301574938c30e2fd605a5", "patch": "@@ -104,7 +104,8 @@ jobs:\n \n     - name: Run tests\n       run: |\n-        ./test.sh --release --clean --release-sysroot --build-sysroot --mini-tests --std-tests # --test-libcore # FIXME(antoyo): libcore tests fail.\n+        ./test.sh --release --clean --release-sysroot --build-sysroot --mini-tests --std-tests --test-libcore\n+        # TODO(antoyo): also run the rustc's test suite.\n \n     - name: Run stdarch tests\n       run: |"}, {"sha": "6102016b43451f7854812f00398933b50e943da2", "filename": "src/base.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/41f5e701e69a164acae301574938c30e2fd605a5/src%2Fbase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/41f5e701e69a164acae301574938c30e2fd605a5/src%2Fbase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbase.rs?ref=41f5e701e69a164acae301574938c30e2fd605a5", "patch": "@@ -124,6 +124,8 @@ pub fn compile_codegen_unit<'tcx>(tcx: TyCtxt<'tcx>, cgu_name: Symbol, supports_\n         context.add_command_line_option(\"-fno-semantic-interposition\");\n         // NOTE: Rust relies on LLVM not doing TBAA (https://github.com/rust-lang/unsafe-code-guidelines/issues/292).\n         context.add_command_line_option(\"-fno-strict-aliasing\");\n+        // NOTE: Rust relies on LLVM doing wrapping on overflow.\n+        context.add_command_line_option(\"-fwrapv\");\n \n         if tcx.sess.opts.unstable_opts.function_sections.unwrap_or(tcx.sess.target.function_sections) {\n             context.add_command_line_option(\"-ffunction-sections\");"}]}