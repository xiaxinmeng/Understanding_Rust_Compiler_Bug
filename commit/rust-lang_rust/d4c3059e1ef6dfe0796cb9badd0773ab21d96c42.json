{"sha": "d4c3059e1ef6dfe0796cb9badd0773ab21d96c42", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ0YzMwNTllMWVmNmRmZTA3OTZjYjliYWRkMDc3M2FiMjFkOTZjNDI=", "commit": {"author": {"name": "Marijn Haverbeke", "email": "marijnh@gmail.com", "date": "2011-03-24T15:07:43Z"}, "committer": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2011-03-25T15:23:00Z"}, "message": "make lexer unicode-aware for strings and char literals", "tree": {"sha": "9b243aeff79918f2f7d0a32773688a59e6f6307d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9b243aeff79918f2f7d0a32773688a59e6f6307d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d4c3059e1ef6dfe0796cb9badd0773ab21d96c42", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d4c3059e1ef6dfe0796cb9badd0773ab21d96c42", "html_url": "https://github.com/rust-lang/rust/commit/d4c3059e1ef6dfe0796cb9badd0773ab21d96c42", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d4c3059e1ef6dfe0796cb9badd0773ab21d96c42/comments", "author": {"login": "marijnh", "id": 144427, "node_id": "MDQ6VXNlcjE0NDQyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/144427?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marijnh", "html_url": "https://github.com/marijnh", "followers_url": "https://api.github.com/users/marijnh/followers", "following_url": "https://api.github.com/users/marijnh/following{/other_user}", "gists_url": "https://api.github.com/users/marijnh/gists{/gist_id}", "starred_url": "https://api.github.com/users/marijnh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marijnh/subscriptions", "organizations_url": "https://api.github.com/users/marijnh/orgs", "repos_url": "https://api.github.com/users/marijnh/repos", "events_url": "https://api.github.com/users/marijnh/events{/privacy}", "received_events_url": "https://api.github.com/users/marijnh/received_events", "type": "User", "site_admin": false}, "committer": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a0455144774de6c9dc0ff0e87fe4352f8a70cac3", "url": "https://api.github.com/repos/rust-lang/rust/commits/a0455144774de6c9dc0ff0e87fe4352f8a70cac3", "html_url": "https://github.com/rust-lang/rust/commit/a0455144774de6c9dc0ff0e87fe4352f8a70cac3"}], "stats": {"total": 15, "additions": 7, "deletions": 8}, "files": [{"sha": "791276a77ef95e9dbd371fbbfffec311cf62468e", "filename": "src/comp/front/lexer.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/d4c3059e1ef6dfe0796cb9badd0773ab21d96c42/src%2Fcomp%2Ffront%2Flexer.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d4c3059e1ef6dfe0796cb9badd0773ab21d96c42/src%2Fcomp%2Ffront%2Flexer.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Ffront%2Flexer.rs?ref=d4c3059e1ef6dfe0796cb9badd0773ab21d96c42", "patch": "@@ -76,7 +76,7 @@ impure fn new_reader(io.reader rdr, str filename) -> reader\n                     col += 1u;\n                 }\n \n-                n = rdr.read_byte() as char;\n+                n = rdr.read_char();\n             }\n \n             fn mark() {\n@@ -204,8 +204,8 @@ impure fn new_reader(io.reader rdr, str filename) -> reader\n     reserved.insert(\"m128\", ()); // IEEE 754-2008 'decimal128'\n     reserved.insert(\"dec\", ());  // One of m32, m64, m128\n \n-    ret reader(rdr, filename, rdr.read_byte() as char,\n-               rdr.read_byte() as char, 1u, 0u, 1u, 0u, keywords, reserved);\n+    ret reader(rdr, filename, rdr.read_char(),\n+               rdr.read_char(), 1u, 0u, 1u, 0u, keywords, reserved);\n }\n \n \n@@ -505,7 +505,7 @@ impure fn next_token(reader rdr) -> token.token {\n \n     if (is_alpha(c) || c == '_') {\n         while (is_alnum(c) || c == '_') {\n-            _str.push_byte(accum_str, (c as u8));\n+            _str.push_char(accum_str, c);\n             rdr.bump();\n             c = rdr.curr();\n         }\n@@ -692,7 +692,7 @@ impure fn next_token(reader rdr) -> token.token {\n                         }\n                     }\n                     case (_) {\n-                        _str.push_byte(accum_str, rdr.curr() as u8);\n+                        _str.push_char(accum_str, rdr.curr());\n                     }\n                 }\n                 rdr.bump();"}, {"sha": "72d82010ed72947d9617ff76b68b498ca88ea603", "filename": "src/comp/front/token.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/d4c3059e1ef6dfe0796cb9badd0773ab21d96c42/src%2Fcomp%2Ffront%2Ftoken.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d4c3059e1ef6dfe0796cb9badd0773ab21d96c42/src%2Fcomp%2Ffront%2Ftoken.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Ffront%2Ftoken.rs?ref=d4c3059e1ef6dfe0796cb9badd0773ab21d96c42", "patch": "@@ -303,9 +303,9 @@ fn to_str(token t) -> str {\n             ret \"\\\"\" + s + \"\\\"\";\n         }\n         case (LIT_CHAR(?c)) {\n-            // FIXME: escape and encode.\n+            // FIXME: escape.\n             auto tmp = \"'\";\n-            _str.push_byte(tmp, c as u8);\n+            _str.push_char(tmp, c);\n             _str.push_byte(tmp, '\\'' as u8);\n             ret tmp;\n         }"}, {"sha": "25eb60edd36fb18990398d87a51a0c7e61274c91", "filename": "src/comp/pretty/pprust.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d4c3059e1ef6dfe0796cb9badd0773ab21d96c42/src%2Fcomp%2Fpretty%2Fpprust.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d4c3059e1ef6dfe0796cb9badd0773ab21d96c42/src%2Fcomp%2Fpretty%2Fpprust.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fpretty%2Fpprust.rs?ref=d4c3059e1ef6dfe0796cb9badd0773ab21d96c42", "patch": "@@ -718,7 +718,6 @@ impure fn print_maybe_parens(ps s, @ast.expr expr, int outer_prec) {\n   if (add_them) {pclose(s);}\n }\n \n-// TODO non-ascii\n fn escape_str(str st, char to_escape) -> str {\n   let str out = \"\";\n   auto len = _str.byte_len(st);"}]}