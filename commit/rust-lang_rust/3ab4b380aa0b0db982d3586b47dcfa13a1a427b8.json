{"sha": "3ab4b380aa0b0db982d3586b47dcfa13a1a427b8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNhYjRiMzgwYWEwYjBkYjk4MmQzNTg2YjQ3ZGNmYTEzYTFhNDI3Yjg=", "commit": {"author": {"name": "Jake Degen", "email": "jakob@degen.org", "date": "2020-06-13T04:06:09Z"}, "committer": {"name": "Jake Degen", "email": "jakob@degen.com", "date": "2020-06-13T04:12:07Z"}, "message": "Adjusted some doctests in libcore to use `should_panic`.\n\nPreviously, some doctests were spawning new threads and joining them to\nindicate that a particular call should panic; this hurt readability, so\nthe tests have been adjusted to simply call the method and use the\n`should_panic` marker.", "tree": {"sha": "0cba48b98b58731e24503c325ab61b046fb6452c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0cba48b98b58731e24503c325ab61b046fb6452c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3ab4b380aa0b0db982d3586b47dcfa13a1a427b8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3ab4b380aa0b0db982d3586b47dcfa13a1a427b8", "html_url": "https://github.com/rust-lang/rust/commit/3ab4b380aa0b0db982d3586b47dcfa13a1a427b8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3ab4b380aa0b0db982d3586b47dcfa13a1a427b8/comments", "author": null, "committer": {"login": "JakobDegen", "id": 51179609, "node_id": "MDQ6VXNlcjUxMTc5NjA5", "avatar_url": "https://avatars.githubusercontent.com/u/51179609?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JakobDegen", "html_url": "https://github.com/JakobDegen", "followers_url": "https://api.github.com/users/JakobDegen/followers", "following_url": "https://api.github.com/users/JakobDegen/following{/other_user}", "gists_url": "https://api.github.com/users/JakobDegen/gists{/gist_id}", "starred_url": "https://api.github.com/users/JakobDegen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JakobDegen/subscriptions", "organizations_url": "https://api.github.com/users/JakobDegen/orgs", "repos_url": "https://api.github.com/users/JakobDegen/repos", "events_url": "https://api.github.com/users/JakobDegen/events{/privacy}", "received_events_url": "https://api.github.com/users/JakobDegen/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e93cb961ba67c73815401291ab42b81e3e5733ae", "url": "https://api.github.com/repos/rust-lang/rust/commits/e93cb961ba67c73815401291ab42b81e3e5733ae", "html_url": "https://github.com/rust-lang/rust/commit/e93cb961ba67c73815401291ab42b81e3e5733ae"}], "stats": {"total": 99, "additions": 28, "deletions": 71}, "files": [{"sha": "b35ecf4a2d7daa82adc3101751a552f6cc8ec720", "filename": "src/libcore/cell.rs", "status": "modified", "additions": 8, "deletions": 18, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/3ab4b380aa0b0db982d3586b47dcfa13a1a427b8/src%2Flibcore%2Fcell.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3ab4b380aa0b0db982d3586b47dcfa13a1a427b8/src%2Flibcore%2Fcell.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fcell.rs?ref=3ab4b380aa0b0db982d3586b47dcfa13a1a427b8", "patch": "@@ -778,18 +778,13 @@ impl<T: ?Sized> RefCell<T> {\n     ///\n     /// An example of panic:\n     ///\n-    /// ```\n+    /// ```should_panic\n     /// use std::cell::RefCell;\n-    /// use std::thread;\n-    ///\n-    /// let result = thread::spawn(move || {\n-    ///    let c = RefCell::new(5);\n-    ///    let m = c.borrow_mut();\n     ///\n-    ///    let b = c.borrow(); // this causes a panic\n-    /// }).join();\n+    /// let c = RefCell::new(5);\n     ///\n-    /// assert!(result.is_err());\n+    /// let m = c.borrow_mut();\n+    /// let b = c.borrow(); // this causes a panic\n     /// ```\n     #[stable(feature = \"rust1\", since = \"1.0.0\")]\n     #[inline]\n@@ -858,18 +853,13 @@ impl<T: ?Sized> RefCell<T> {\n     ///\n     /// An example of panic:\n     ///\n-    /// ```\n+    /// ```should_panic\n     /// use std::cell::RefCell;\n-    /// use std::thread;\n-    ///\n-    /// let result = thread::spawn(move || {\n-    ///    let c = RefCell::new(5);\n-    ///    let m = c.borrow();\n     ///\n-    ///    let b = c.borrow_mut(); // this causes a panic\n-    /// }).join();\n+    /// let c = RefCell::new(5);\n+    /// let m = c.borrow();\n     ///\n-    /// assert!(result.is_err());\n+    /// let b = c.borrow_mut(); // this causes a panic\n     /// ```\n     #[stable(feature = \"rust1\", since = \"1.0.0\")]\n     #[inline]"}, {"sha": "d7e39946148ed793fd1eb0b175f275305f92df08", "filename": "src/libcore/char/convert.rs", "status": "modified", "additions": 3, "deletions": 8, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/3ab4b380aa0b0db982d3586b47dcfa13a1a427b8/src%2Flibcore%2Fchar%2Fconvert.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3ab4b380aa0b0db982d3586b47dcfa13a1a427b8/src%2Flibcore%2Fchar%2Fconvert.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fchar%2Fconvert.rs?ref=3ab4b380aa0b0db982d3586b47dcfa13a1a427b8", "patch": "@@ -278,16 +278,11 @@ impl fmt::Display for CharTryFromError {\n ///\n /// Passing a large radix, causing a panic:\n ///\n-/// ```\n-/// use std::thread;\n+/// ```should_panic\n /// use std::char;\n ///\n-/// let result = thread::spawn(|| {\n-///     // this panics\n-///     let c = char::from_digit(1, 37);\n-/// }).join();\n-///\n-/// assert!(result.is_err());\n+/// // this panics\n+/// let c = char::from_digit(1, 37);\n /// ```\n #[inline]\n #[stable(feature = \"rust1\", since = \"1.0.0\")]"}, {"sha": "dd2f01c679f7347a33ac6409f1fef7fa1b13d3c0", "filename": "src/libcore/char/methods.rs", "status": "modified", "additions": 17, "deletions": 45, "changes": 62, "blob_url": "https://github.com/rust-lang/rust/blob/3ab4b380aa0b0db982d3586b47dcfa13a1a427b8/src%2Flibcore%2Fchar%2Fmethods.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3ab4b380aa0b0db982d3586b47dcfa13a1a427b8/src%2Flibcore%2Fchar%2Fmethods.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fchar%2Fmethods.rs?ref=3ab4b380aa0b0db982d3586b47dcfa13a1a427b8", "patch": "@@ -229,16 +229,11 @@ impl char {\n     ///\n     /// Passing a large radix, causing a panic:\n     ///\n-    /// ```\n-    /// use std::thread;\n+    /// ```should_panic\n     /// use std::char;\n     ///\n-    /// let result = thread::spawn(|| {\n-    ///     // this panics\n-    ///     let c = char::from_digit(1, 37);\n-    /// }).join();\n-    ///\n-    /// assert!(result.is_err());\n+    /// // this panics\n+    /// char::from_digit(1, 37);\n     /// ```\n     #[unstable(feature = \"assoc_char_funcs\", reason = \"recently added\", issue = \"71763\")]\n     #[inline]\n@@ -282,15 +277,9 @@ impl char {\n     ///\n     /// Passing a large radix, causing a panic:\n     ///\n-    /// ```\n-    /// use std::thread;\n-    ///\n-    /// let result = thread::spawn(|| {\n-    ///     // this panics\n-    ///     '1'.is_digit(37);\n-    /// }).join();\n-    ///\n-    /// assert!(result.is_err());\n+    /// ```should_panic\n+    /// // this panics\n+    /// '1'.is_digit(37);\n     /// ```\n     #[stable(feature = \"rust1\", since = \"1.0.0\")]\n     #[inline]\n@@ -337,14 +326,9 @@ impl char {\n     ///\n     /// Passing a large radix, causing a panic:\n     ///\n-    /// ```\n-    /// use std::thread;\n-    ///\n-    /// let result = thread::spawn(|| {\n-    ///     '1'.to_digit(37);\n-    /// }).join();\n-    ///\n-    /// assert!(result.is_err());\n+    /// ```should_panic\n+    /// // this panics\n+    /// '1'.to_digit(37);\n     /// ```\n     #[stable(feature = \"rust1\", since = \"1.0.0\")]\n     #[inline]\n@@ -646,17 +630,11 @@ impl char {\n     ///\n     /// A buffer that's too small:\n     ///\n-    /// ```\n-    /// use std::thread;\n-    ///\n-    /// let result = thread::spawn(|| {\n-    ///     let mut b = [0; 1];\n-    ///\n-    ///     // this panics\n-    ///    '\u00df'.encode_utf8(&mut b);\n-    /// }).join();\n+    /// ```should_panic\n+    /// let mut b = [0; 1];\n     ///\n-    /// assert!(result.is_err());\n+    /// // this panics\n+    /// '\u00df'.encode_utf8(&mut b);\n     /// ```\n     #[stable(feature = \"unicode_encode_char\", since = \"1.15.0\")]\n     #[inline]\n@@ -687,17 +665,11 @@ impl char {\n     ///\n     /// A buffer that's too small:\n     ///\n-    /// ```\n-    /// use std::thread;\n-    ///\n-    /// let result = thread::spawn(|| {\n-    ///     let mut b = [0; 1];\n-    ///\n-    ///     // this panics\n-    ///     '\ud835\udd4a'.encode_utf16(&mut b);\n-    /// }).join();\n+    /// ```should_panic\n+    /// let mut b = [0; 1];\n     ///\n-    /// assert!(result.is_err());\n+    /// // this panics\n+    /// '\ud835\udd4a'.encode_utf16(&mut b);\n     /// ```\n     #[stable(feature = \"unicode_encode_char\", since = \"1.15.0\")]\n     #[inline]"}]}