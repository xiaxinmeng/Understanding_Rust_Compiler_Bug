{"sha": "9ea17d42a7c5f089143e8b4ed37ee9de268a3bbb", "node_id": "MDY6Q29tbWl0NzI0NzEyOjllYTE3ZDQyYTdjNWYwODkxNDNlOGI0ZWQzN2VlOWRlMjY4YTNiYmI=", "commit": {"author": {"name": "flip1995", "email": "hello@philkrones.com", "date": "2020-01-08T16:31:06Z"}, "committer": {"name": "flip1995", "email": "hello@philkrones.com", "date": "2020-01-08T16:47:01Z"}, "message": "Fix useless attribute suggestion", "tree": {"sha": "1a996bad13f4696f7a98d2d9ba735de1160df6e1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1a996bad13f4696f7a98d2d9ba735de1160df6e1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9ea17d42a7c5f089143e8b4ed37ee9de268a3bbb", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZxoS6lESXlRGMHWcaTCGhp1QZjcFAl4WB4UACgkQaTCGhp1Q\nZjc2rA/8C4AWkjVONvHvtFF1nX9kn5YxLFwUty4pdB0q3M+4K4XKs8Qg89JcOYA6\npcjCriT1+wONI7hXFcSc/DZacIAbZdYpTD5faEZyCNtzapUDc3rzgZvRdA5/Pj4p\nF7QL7m1VegePUp+OZmYqfcwh57H5N4hWHFQxX4BgsG9vkbj3uvI1mirIQ0Az8HBq\nX5u1iIa6hNLN8HWzdukKn9Ur0LLgBOiZZfcooKSViCFuqpxpHfw2qyhB7XTlGi6U\n2hR9B0B5m6Lh/xAliQqZYE8quEKVQ0PUTbLdiuIfywwnBJJ0VB9f6aphfJR/Lc4s\ndhUefzifOiR5z6+gsvuoTcWH+RJ2Fnq2XGbUIbH8+hEDjRz66BAQjdZZEcYtiXSb\nTSA3I18QD9zXrQsipkTtzc75iv9HstmyzB0hL6HbTA8BzSLXYrrHd3cZxX5L6H/y\njl2LiAdIiLwQtWiD4x/PNFioubGU7k/3B9/H6BG5VYovh/iSveE3r/xjDgQhHD/C\nuoNhRd7wmzWxGd2EL60iFP5X/K3z3/3srs0nYcOvXihUkMOlZK1JFNkw0sNLXiB5\nfa3vUTecIs3t+LpRCqn5cYPUAHhIJ7379avohEN1+0Kj4tC1wAUe9Zx57FKI7zsl\nF4RT3cQegvoK9MN7p0IogjXStwcjHLP1ZxXH3Gd8REWz5nbK6y4=\n=W3YM\n-----END PGP SIGNATURE-----", "payload": "tree 1a996bad13f4696f7a98d2d9ba735de1160df6e1\nparent c789caa45490c291f1fa7893b222f0e30e916ff9\nauthor flip1995 <hello@philkrones.com> 1578501066 +0100\ncommitter flip1995 <hello@philkrones.com> 1578502021 +0100\n\nFix useless attribute suggestion\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9ea17d42a7c5f089143e8b4ed37ee9de268a3bbb", "html_url": "https://github.com/rust-lang/rust/commit/9ea17d42a7c5f089143e8b4ed37ee9de268a3bbb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9ea17d42a7c5f089143e8b4ed37ee9de268a3bbb/comments", "author": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c789caa45490c291f1fa7893b222f0e30e916ff9", "url": "https://api.github.com/repos/rust-lang/rust/commits/c789caa45490c291f1fa7893b222f0e30e916ff9", "html_url": "https://github.com/rust-lang/rust/commit/c789caa45490c291f1fa7893b222f0e30e916ff9"}], "stats": {"total": 13, "additions": 11, "deletions": 2}, "files": [{"sha": "e304d98009891e8b489d396790b88ad4d880250a", "filename": "clippy_lints/src/utils/mod.rs", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/9ea17d42a7c5f089143e8b4ed37ee9de268a3bbb/clippy_lints%2Fsrc%2Futils%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9ea17d42a7c5f089143e8b4ed37ee9de268a3bbb/clippy_lints%2Fsrc%2Futils%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fmod.rs?ref=9ea17d42a7c5f089143e8b4ed37ee9de268a3bbb", "patch": "@@ -42,8 +42,8 @@ use rustc_hir::def_id::{DefId, CRATE_DEF_INDEX, LOCAL_CRATE};\n use rustc_hir::Node;\n use rustc_hir::*;\n use rustc_span::hygiene::ExpnKind;\n-use rustc_span::source_map::{Span, DUMMY_SP};\n use rustc_span::symbol::{kw, Symbol};\n+use rustc_span::{BytePos, Pos, Span, DUMMY_SP};\n use smallvec::SmallVec;\n use syntax::ast::{self, Attribute, LitKind};\n use syntax::attr;\n@@ -554,7 +554,16 @@ pub fn last_line_of_span<T: LintContext>(cx: &T, span: Span) -> Span {\n     let source_map_and_line = cx.sess().source_map().lookup_line(span.lo()).unwrap();\n     let line_no = source_map_and_line.line;\n     let line_start = &source_map_and_line.sf.lines[line_no];\n-    Span::new(*line_start, span.hi(), span.ctxt())\n+    let span = Span::new(*line_start, span.hi(), span.ctxt());\n+    if_chain! {\n+        if let Some(snip) = snippet_opt(cx, span);\n+        if let Some(first_ch_pos) = snip.find(|c: char| !c.is_whitespace());\n+        then {\n+            span.with_lo(span.lo() + BytePos::from_usize(first_ch_pos))\n+        } else {\n+            span\n+        }\n+    }\n }\n \n /// Like `snippet_block`, but add braces if the expr is not an `ExprKind::Block`."}]}