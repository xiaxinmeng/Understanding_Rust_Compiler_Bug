{"sha": "7b9aa5fa2cb4daf8414b9b8091dc651a8e17f9e7", "node_id": "C_kwDOAAsO6NoAKDdiOWFhNWZhMmNiNGRhZjg0MTRiOWI4MDkxZGM2NTFhOGUxN2Y5ZTc", "commit": {"author": {"name": "Eric Huss", "email": "eric@huss.org", "date": "2023-04-03T03:45:20Z"}, "committer": {"name": "Eric Huss", "email": "eric@huss.org", "date": "2023-04-03T03:45:20Z"}, "message": "Fix macos pkg installer when rust-docs is not available.", "tree": {"sha": "bb21eef03cab3fdd79b47931297a8223cd3d3486", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bb21eef03cab3fdd79b47931297a8223cd3d3486"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7b9aa5fa2cb4daf8414b9b8091dc651a8e17f9e7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7b9aa5fa2cb4daf8414b9b8091dc651a8e17f9e7", "html_url": "https://github.com/rust-lang/rust/commit/7b9aa5fa2cb4daf8414b9b8091dc651a8e17f9e7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7b9aa5fa2cb4daf8414b9b8091dc651a8e17f9e7/comments", "author": {"login": "ehuss", "id": 43198, "node_id": "MDQ6VXNlcjQzMTk4", "avatar_url": "https://avatars.githubusercontent.com/u/43198?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehuss", "html_url": "https://github.com/ehuss", "followers_url": "https://api.github.com/users/ehuss/followers", "following_url": "https://api.github.com/users/ehuss/following{/other_user}", "gists_url": "https://api.github.com/users/ehuss/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehuss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehuss/subscriptions", "organizations_url": "https://api.github.com/users/ehuss/orgs", "repos_url": "https://api.github.com/users/ehuss/repos", "events_url": "https://api.github.com/users/ehuss/events{/privacy}", "received_events_url": "https://api.github.com/users/ehuss/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ehuss", "id": 43198, "node_id": "MDQ6VXNlcjQzMTk4", "avatar_url": "https://avatars.githubusercontent.com/u/43198?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehuss", "html_url": "https://github.com/ehuss", "followers_url": "https://api.github.com/users/ehuss/followers", "following_url": "https://api.github.com/users/ehuss/following{/other_user}", "gists_url": "https://api.github.com/users/ehuss/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehuss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehuss/subscriptions", "organizations_url": "https://api.github.com/users/ehuss/orgs", "repos_url": "https://api.github.com/users/ehuss/repos", "events_url": "https://api.github.com/users/ehuss/events{/privacy}", "received_events_url": "https://api.github.com/users/ehuss/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a93bcdc30771340dfff914a1cf48556886ad33a6", "url": "https://api.github.com/repos/rust-lang/rust/commits/a93bcdc30771340dfff914a1cf48556886ad33a6", "html_url": "https://github.com/rust-lang/rust/commit/a93bcdc30771340dfff914a1cf48556886ad33a6"}], "stats": {"total": 8, "additions": 7, "deletions": 1}, "files": [{"sha": "9eed2bf5023786006e91d5e41a2d1d921c950353", "filename": "src/bootstrap/dist.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7b9aa5fa2cb4daf8414b9b8091dc651a8e17f9e7/src%2Fbootstrap%2Fdist.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7b9aa5fa2cb4daf8414b9b8091dc651a8e17f9e7/src%2Fbootstrap%2Fdist.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fdist.rs?ref=7b9aa5fa2cb4daf8414b9b8091dc651a8e17f9e7", "patch": "@@ -1488,7 +1488,7 @@ impl Step for Extended {\n \n         let xform = |p: &Path| {\n             let mut contents = t!(fs::read_to_string(p));\n-            for tool in &[\"rust-demangler\", \"miri\"] {\n+            for tool in &[\"rust-demangler\", \"miri\", \"rust-docs\"] {\n                 if !built_tools.contains(tool) {\n                     contents = filter(&contents, tool);\n                 }"}, {"sha": "1643fc8364b64a3b806b08fbb01d48d7da146f8e", "filename": "src/etc/installer/pkg/Distribution.xml", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/7b9aa5fa2cb4daf8414b9b8091dc651a8e17f9e7/src%2Fetc%2Finstaller%2Fpkg%2FDistribution.xml", "raw_url": "https://github.com/rust-lang/rust/raw/7b9aa5fa2cb4daf8414b9b8091dc651a8e17f9e7/src%2Fetc%2Finstaller%2Fpkg%2FDistribution.xml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Finstaller%2Fpkg%2FDistribution.xml?ref=7b9aa5fa2cb4daf8414b9b8091dc651a8e17f9e7", "patch": "@@ -15,7 +15,9 @@\n       <line choice=\"rustc\"/>\n       <line choice=\"rust-std\"/>\n       <line choice=\"cargo\"/>\n+      <!-- tool-rust-docs-start -->\n       <line choice=\"rust-docs\"/>\n+      <!-- tool-rust-docs-end -->\n       </line>\n       <line choice=\"uninstall\" />\n     </choices-outline>\n@@ -55,15 +57,19 @@\n         >\n         <pkg-ref id=\"org.rust-lang.rust-std\"/>\n     </choice>\n+    <!-- tool-rust-docs-start -->\n     <choice id=\"rust-docs\" visible=\"true\"\n         title=\"Documentation\" description=\"HTML documentation.\"\n         selected=\"(!choices.uninstall.selected &amp;&amp; choices['rust-docs'].selected) || (choices.uninstall.selected &amp;&amp; choices.install.selected)\"\n         >\n         <pkg-ref id=\"org.rust-lang.rust-docs\"/>\n     </choice>\n+    <!-- tool-rust-docs-end -->\n     <pkg-ref id=\"org.rust-lang.rustc\" version=\"0\" onConclusion=\"none\">rustc.pkg</pkg-ref>\n     <pkg-ref id=\"org.rust-lang.cargo\" version=\"0\" onConclusion=\"none\">cargo.pkg</pkg-ref>\n+    <!-- tool-rust-docs-start -->\n     <pkg-ref id=\"org.rust-lang.rust-docs\" version=\"0\" onConclusion=\"none\">rust-docs.pkg</pkg-ref>\n+    <!-- tool-rust-docs-end -->\n     <pkg-ref id=\"org.rust-lang.rust-std\" version=\"0\" onConclusion=\"none\">rust-std.pkg</pkg-ref>\n     <pkg-ref id=\"org.rust-lang.uninstall\" version=\"0\" onConclusion=\"none\">uninstall.pkg</pkg-ref>\n     <background file=\"rust-logo.png\" mime-type=\"image/png\""}]}