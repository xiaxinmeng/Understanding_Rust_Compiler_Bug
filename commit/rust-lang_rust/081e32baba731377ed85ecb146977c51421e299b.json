{"sha": "081e32baba731377ed85ecb146977c51421e299b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA4MWUzMmJhYmE3MzEzNzdlZDg1ZWNiMTQ2OTc3YzUxNDIxZTI5OWI=", "commit": {"author": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2020-03-13T00:03:30Z"}, "committer": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2020-03-13T07:06:07Z"}, "message": "Add test for issue-58490", "tree": {"sha": "d39e0359b1018903a4228e4790b4d98a20bcc4cd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d39e0359b1018903a4228e4790b4d98a20bcc4cd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/081e32baba731377ed85ecb146977c51421e299b", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEXmatGLoofN5+9u4rsJhshcDi2qEFAl5rMN8ACgkQsJhshcDi\n2qHSAA/9ETbOD3iG7SHcYuRDcwbLYfcLzCkvl7AGT1sZfvgARS1icBJMqvmcMgwT\nNA0ZVSnCXjvhywiEGcg/Njra2gZFrpF8B2WRsfUOPbpbOByeB+eOfUjcPMUKh4oh\n2wDCte8fM1kaFuT415B3vo1rtrK6aUvZTBV5dhT+OG3/zi5jopzbtqpvI6sOfzhd\nhZSUIx0CZIIDak1NaS3ot8XZth6Cxhgaw9ycB17PbIm4IbCL78lt0RPtqrIdJoou\nX9UDPF5pD7HNzLkJ/gnU5e2+wR6VlZa62jMhD5O/2+8ZhsWPXR/5MY361his9lLy\n/uZBST16gO9lqAKqYI1u944aU7rcHf2rdd26sEdYIERIkOZR7dhwmRwdZ7MhmPv1\nkJhMOf8Iy3Sb5YexVHYunp+nQLu3ndh4mfobsnt/zIBPV7mkarO74YoumuPQ4VSO\n0KwNoihrJ0cM6l3TGnegq41Thbx/aKvbH6ZcTNpudsNQyRiahTxCW1/Z05dFCChp\n4HSoQvIF34nUIrNtAe7pAdTR/Q6pMyLrP/YAGKCnPzpd5aORqULMR4MAeQ443ckU\nkWSPjIePE5t+lyvvzcLyLllBmG9Io+4ii+2SzXn+NXzaxHI3n7fvZ7j9O8v3SkS7\nVue2KtPiPqW1asXQ61B8OxvyRUyBbPIJ/ArpX3TsCEqcms1dkSU=\n=b8mC\n-----END PGP SIGNATURE-----", "payload": "tree d39e0359b1018903a4228e4790b4d98a20bcc4cd\nparent 54b7d21f59a363e53eb1c31d76b40af2ff99321c\nauthor Yuki Okushi <huyuumi.dev@gmail.com> 1584057810 +0900\ncommitter Yuki Okushi <huyuumi.dev@gmail.com> 1584083167 +0900\n\nAdd test for issue-58490\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/081e32baba731377ed85ecb146977c51421e299b", "html_url": "https://github.com/rust-lang/rust/commit/081e32baba731377ed85ecb146977c51421e299b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/081e32baba731377ed85ecb146977c51421e299b/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "54b7d21f59a363e53eb1c31d76b40af2ff99321c", "url": "https://api.github.com/repos/rust-lang/rust/commits/54b7d21f59a363e53eb1c31d76b40af2ff99321c", "html_url": "https://github.com/rust-lang/rust/commit/54b7d21f59a363e53eb1c31d76b40af2ff99321c"}], "stats": {"total": 40, "additions": 40, "deletions": 0}, "files": [{"sha": "97e71c9a1ce40bb9a4e83641a5786c133ae71d85", "filename": "src/test/ui/macros/issue-58490.rs", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/081e32baba731377ed85ecb146977c51421e299b/src%2Ftest%2Fui%2Fmacros%2Fissue-58490.rs", "raw_url": "https://github.com/rust-lang/rust/raw/081e32baba731377ed85ecb146977c51421e299b/src%2Ftest%2Fui%2Fmacros%2Fissue-58490.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Fissue-58490.rs?ref=081e32baba731377ed85ecb146977c51421e299b", "patch": "@@ -0,0 +1,26 @@\n+// Regression test for #58490\n+\n+macro_rules! a {\n+    ( @1 $i:item ) => {\n+        a! { @2 $i }\n+    };\n+    ( @2 $i:item ) => {\n+        $i\n+    };\n+}\n+mod b {\n+    a! {\n+        @1\n+        #[macro_export]\n+        macro_rules! b { () => () }\n+    }\n+    #[macro_export]\n+    macro_rules! b { () => () }\n+    //~^ ERROR: the name `b` is defined multiple times\n+}\n+mod c {\n+    #[allow(unused_imports)]\n+    use crate::b;\n+}\n+\n+fn main() {}"}, {"sha": "b1f0896f3b65c920457458271c801e239f32d295", "filename": "src/test/ui/macros/issue-58490.stderr", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/081e32baba731377ed85ecb146977c51421e299b/src%2Ftest%2Fui%2Fmacros%2Fissue-58490.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/081e32baba731377ed85ecb146977c51421e299b/src%2Ftest%2Fui%2Fmacros%2Fissue-58490.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Fissue-58490.stderr?ref=081e32baba731377ed85ecb146977c51421e299b", "patch": "@@ -0,0 +1,14 @@\n+error[E0428]: the name `b` is defined multiple times\n+  --> $DIR/issue-58490.rs:18:5\n+   |\n+LL |         macro_rules! b { () => () }\n+   |         -------------- previous definition of the macro `b` here\n+...\n+LL |     macro_rules! b { () => () }\n+   |     ^^^^^^^^^^^^^^ `b` redefined here\n+   |\n+   = note: `b` must be defined only once in the macro namespace of this module\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0428`."}]}