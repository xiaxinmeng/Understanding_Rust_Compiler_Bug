{"sha": "ff94b3b12b30d1a52d594cb48f80efa39a6029a6", "node_id": "C_kwDOAAsO6NoAKGZmOTRiM2IxMmIzMGQxYTUyZDU5NGNiNDhmODBlZmEzOWE2MDI5YTY", "commit": {"author": {"name": "Josh Triplett", "email": "josh@joshtriplett.org", "date": "2021-10-21T12:57:14Z"}, "committer": {"name": "Josh Triplett", "email": "josh@joshtriplett.org", "date": "2022-01-01T23:53:11Z"}, "message": "Update references to `-Z symbol-mangling-version` to use `-C`\n\nReplace `-Z symbol-mangling-version=v0` with `-C symbol-mangling-version=v0`.\n\nReplace `-Z symbol-mangling-version=legacy` with\n`-Z unstable-options -C symbol-mangling-version=legacy`.", "tree": {"sha": "f21d447aaacc9f8ab5dfbcd59e8abb1b9faefded", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f21d447aaacc9f8ab5dfbcd59e8abb1b9faefded"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ff94b3b12b30d1a52d594cb48f80efa39a6029a6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ff94b3b12b30d1a52d594cb48f80efa39a6029a6", "html_url": "https://github.com/rust-lang/rust/commit/ff94b3b12b30d1a52d594cb48f80efa39a6029a6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/comments", "author": {"login": "joshtriplett", "id": 162737, "node_id": "MDQ6VXNlcjE2MjczNw==", "avatar_url": "https://avatars.githubusercontent.com/u/162737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joshtriplett", "html_url": "https://github.com/joshtriplett", "followers_url": "https://api.github.com/users/joshtriplett/followers", "following_url": "https://api.github.com/users/joshtriplett/following{/other_user}", "gists_url": "https://api.github.com/users/joshtriplett/gists{/gist_id}", "starred_url": "https://api.github.com/users/joshtriplett/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joshtriplett/subscriptions", "organizations_url": "https://api.github.com/users/joshtriplett/orgs", "repos_url": "https://api.github.com/users/joshtriplett/repos", "events_url": "https://api.github.com/users/joshtriplett/events{/privacy}", "received_events_url": "https://api.github.com/users/joshtriplett/received_events", "type": "User", "site_admin": false}, "committer": {"login": "joshtriplett", "id": 162737, "node_id": "MDQ6VXNlcjE2MjczNw==", "avatar_url": "https://avatars.githubusercontent.com/u/162737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joshtriplett", "html_url": "https://github.com/joshtriplett", "followers_url": "https://api.github.com/users/joshtriplett/followers", "following_url": "https://api.github.com/users/joshtriplett/following{/other_user}", "gists_url": "https://api.github.com/users/joshtriplett/gists{/gist_id}", "starred_url": "https://api.github.com/users/joshtriplett/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joshtriplett/subscriptions", "organizations_url": "https://api.github.com/users/joshtriplett/orgs", "repos_url": "https://api.github.com/users/joshtriplett/repos", "events_url": "https://api.github.com/users/joshtriplett/events{/privacy}", "received_events_url": "https://api.github.com/users/joshtriplett/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bbf4b6699e41dd5a7c6d9afe4bc8d6af50afc768", "url": "https://api.github.com/repos/rust-lang/rust/commits/bbf4b6699e41dd5a7c6d9afe4bc8d6af50afc768", "html_url": "https://github.com/rust-lang/rust/commit/bbf4b6699e41dd5a7c6d9afe4bc8d6af50afc768"}], "stats": {"total": 68, "additions": 34, "deletions": 34}, "files": [{"sha": "a932c1c8372b488dc479bbba4d8fd85f864d14f5", "filename": "compiler/rustc_codegen_gcc/config.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/compiler%2Frustc_codegen_gcc%2Fconfig.sh", "raw_url": "https://github.com/rust-lang/rust/raw/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/compiler%2Frustc_codegen_gcc%2Fconfig.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_gcc%2Fconfig.sh?ref=ff94b3b12b30d1a52d594cb48f80efa39a6029a6", "patch": "@@ -38,7 +38,7 @@ if [[ \"$HOST_TRIPLE\" != \"$TARGET_TRIPLE\" ]]; then\n    fi\n fi\n \n-export RUSTFLAGS=\"$linker -Cpanic=abort -Zsymbol-mangling-version=v0 -Cdebuginfo=2 -Clto=off -Zpanic-abort-tests -Zcodegen-backend=$(pwd)/target/${CHANNEL:-debug}/librustc_codegen_gcc.$dylib_ext --sysroot $(pwd)/build_sysroot/sysroot\"\n+export RUSTFLAGS=\"$linker -Cpanic=abort -Csymbol-mangling-version=v0 -Cdebuginfo=2 -Clto=off -Zpanic-abort-tests -Zcodegen-backend=$(pwd)/target/${CHANNEL:-debug}/librustc_codegen_gcc.$dylib_ext --sysroot $(pwd)/build_sysroot/sysroot\"\n \n # FIXME(antoyo): remove once the atomic shim is gone\n if [[ `uname` == 'Darwin' ]]; then"}, {"sha": "b9aeee795504780d4a1355019eeee0bfa5832243", "filename": "compiler/rustc_codegen_gcc/test.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/compiler%2Frustc_codegen_gcc%2Ftest.sh", "raw_url": "https://github.com/rust-lang/rust/raw/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/compiler%2Frustc_codegen_gcc%2Ftest.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_gcc%2Ftest.sh?ref=ff94b3b12b30d1a52d594cb48f80efa39a6029a6", "patch": "@@ -183,7 +183,7 @@ EOF\n     git checkout src/test/ui/type-alias-impl-trait/auxiliary/cross_crate_ice2.rs\n     rm src/test/ui/llvm-asm/llvm-asm-in-out-operand.rs || true # TODO(antoyo): Enable back this test if I ever implement the llvm_asm! macro.\n \n-    RUSTC_ARGS=\"-Zpanic-abort-tests -Zsymbol-mangling-version=v0 -Zcodegen-backend=\"$(pwd)\"/../target/\"$CHANNEL\"/librustc_codegen_gcc.\"$dylib_ext\" --sysroot \"$(pwd)\"/../build_sysroot/sysroot -Cpanic=abort\"\n+    RUSTC_ARGS=\"-Zpanic-abort-tests -Csymbol-mangling-version=v0 -Zcodegen-backend=\"$(pwd)\"/../target/\"$CHANNEL\"/librustc_codegen_gcc.\"$dylib_ext\" --sysroot \"$(pwd)\"/../build_sysroot/sysroot -Cpanic=abort\"\n \n     echo \"[TEST] rustc test suite\"\n     COMPILETEST_FORCE_STAGE0=1 ./x.py test --run always --stage 0 src/test/ui/ --rustc-args \"$RUSTC_ARGS\""}, {"sha": "c8adc9f00a1b93e96ee8c33619eafa25a270af62", "filename": "compiler/rustc_session/src/options.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/compiler%2Frustc_session%2Fsrc%2Foptions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/compiler%2Frustc_session%2Fsrc%2Foptions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_session%2Fsrc%2Foptions.rs?ref=ff94b3b12b30d1a52d594cb48f80efa39a6029a6", "patch": "@@ -1230,7 +1230,7 @@ options! {\n     instrument_coverage: Option<InstrumentCoverage> = (None, parse_instrument_coverage, [TRACKED],\n         \"instrument the generated code to support LLVM source-based code coverage \\\n         reports (note, the compiler build config must include `profiler = true`); \\\n-        implies `-Z symbol-mangling-version=v0`. Optional values are:\n+        implies `-C symbol-mangling-version=v0`. Optional values are:\n         `=all` (implicit value)\n         `=except-unused-generics`\n         `=except-unused-functions`"}, {"sha": "1f38240ee41461b4832d92b2156ae01112b0a584", "filename": "compiler/rustc_symbol_mangling/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/compiler%2Frustc_symbol_mangling%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/compiler%2Frustc_symbol_mangling%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_symbol_mangling%2Fsrc%2Flib.rs?ref=ff94b3b12b30d1a52d594cb48f80efa39a6029a6", "patch": "@@ -237,7 +237,7 @@ fn compute_symbol_name<'tcx>(\n \n     // Pick the crate responsible for the symbol mangling version, which has to:\n     // 1. be stable for each instance, whether it's being defined or imported\n-    // 2. obey each crate's own `-Z symbol-mangling-version`, as much as possible\n+    // 2. obey each crate's own `-C symbol-mangling-version`, as much as possible\n     // We solve these as follows:\n     // 1. because symbol names depend on both `def_id` and `instantiating_crate`,\n     // both their `CrateNum`s are stable for any given instance, so we can pick"}, {"sha": "39eb407269c1180931a07d1d10054aec8502bada", "filename": "src/doc/unstable-book/src/compiler-flags/instrument-coverage.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Fdoc%2Funstable-book%2Fsrc%2Fcompiler-flags%2Finstrument-coverage.md", "raw_url": "https://github.com/rust-lang/rust/raw/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Fdoc%2Funstable-book%2Fsrc%2Fcompiler-flags%2Finstrument-coverage.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Funstable-book%2Fsrc%2Fcompiler-flags%2Finstrument-coverage.md?ref=ff94b3b12b30d1a52d594cb48f80efa39a6029a6", "patch": "@@ -27,7 +27,7 @@ When running a coverage-instrumented program, the counter values are written to\n [`llvm.instrprof.increment`]: https://llvm.org/docs/LangRef.html#llvm-instrprof-increment-intrinsic\n [llvm code coverage mapping format]: https://llvm.org/docs/CoverageMappingFormat.html\n \n-> **Note**: `-Z instrument-coverage` also automatically enables `-Z symbol-mangling-version=v0` (tracking issue [#60705]). The `v0` symbol mangler is strongly recommended, but be aware that this demangler is also experimental. The `v0` demangler can be overridden by explicitly adding `-Z symbol-mangling-version=legacy`.\n+> **Note**: `-Z instrument-coverage` also automatically enables `-C symbol-mangling-version=v0` (tracking issue [#60705]). The `v0` symbol mangler is strongly recommended, but be aware that this demangler is also experimental. The `v0` demangler can be overridden by explicitly adding `-Z unstable-options -C symbol-mangling-version=legacy`.\n \n [#60705]: https://github.com/rust-lang/rust/issues/60705\n "}, {"sha": "ad41badf38169036d03b02a6a1fb599e0f86d583", "filename": "src/test/codegen/inline-hint.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fcodegen%2Finline-hint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fcodegen%2Finline-hint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Finline-hint.rs?ref=ff94b3b12b30d1a52d594cb48f80efa39a6029a6", "patch": "@@ -1,7 +1,7 @@\n // Checks that closures, constructors, and shims except\n // for a drop glue receive inline hint by default.\n //\n-// compile-flags: -Cno-prepopulate-passes -Zsymbol-mangling-version=v0\n+// compile-flags: -Cno-prepopulate-passes -Csymbol-mangling-version=v0\n #![crate_type = \"lib\"]\n \n pub fn f() {"}, {"sha": "4a9b3d70933e4980345c6429dcf84d821a1fd0b6", "filename": "src/test/run-make-fulldeps/a-b-a-linker-guard/Makefile", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Frun-make-fulldeps%2Fa-b-a-linker-guard%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Frun-make-fulldeps%2Fa-b-a-linker-guard%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Fa-b-a-linker-guard%2FMakefile?ref=ff94b3b12b30d1a52d594cb48f80efa39a6029a6", "patch": "@@ -8,8 +8,8 @@\n # and will probably get removed once `legacy` is gone.\n \n all:\n-\t$(RUSTC) a.rs --cfg x -C prefer-dynamic -Z symbol-mangling-version=legacy\n-\t$(RUSTC) b.rs -C prefer-dynamic -Z symbol-mangling-version=legacy\n+\t$(RUSTC) a.rs --cfg x -C prefer-dynamic -Z unstable-options -C symbol-mangling-version=legacy\n+\t$(RUSTC) b.rs -C prefer-dynamic -Z unstable-options -C symbol-mangling-version=legacy\n \t$(call RUN,b)\n-\t$(RUSTC) a.rs --cfg y -C prefer-dynamic -Z symbol-mangling-version=legacy\n+\t$(RUSTC) a.rs --cfg y -C prefer-dynamic -Z unstable-options -C symbol-mangling-version=legacy\n \t$(call FAIL,b)"}, {"sha": "282cb2461f69a7b494f987af2fb7ab893e059dcb", "filename": "src/test/run-make-fulldeps/share-generics-dylib/Makefile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Frun-make-fulldeps%2Fshare-generics-dylib%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Frun-make-fulldeps%2Fshare-generics-dylib%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Fshare-generics-dylib%2FMakefile?ref=ff94b3b12b30d1a52d594cb48f80efa39a6029a6", "patch": "@@ -11,7 +11,7 @@\n \n -include ../../run-make-fulldeps/tools.mk\n \n-COMMON_ARGS=-Cprefer-dynamic -Zshare-generics=yes -Ccodegen-units=1 -Zsymbol-mangling-version=v0\n+COMMON_ARGS=-Cprefer-dynamic -Zshare-generics=yes -Ccodegen-units=1 -Csymbol-mangling-version=v0\n \n all:\n \t$(RUSTC) instance_provider_a.rs $(COMMON_ARGS) --crate-type=rlib"}, {"sha": "b315ef05190719647ef94a7014e147bbb4366391", "filename": "src/test/ui/lifetimes/issue-84604.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fui%2Flifetimes%2Fissue-84604.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fui%2Flifetimes%2Fissue-84604.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flifetimes%2Fissue-84604.rs?ref=ff94b3b12b30d1a52d594cb48f80efa39a6029a6", "patch": "@@ -1,5 +1,5 @@\n // run-pass\n-// compile-flags: -Zsymbol-mangling-version=v0\n+// compile-flags: -Csymbol-mangling-version=v0\n \n pub fn f<T: ?Sized>() {}\n pub trait Frob<T: ?Sized> {}"}, {"sha": "c34e00bab7cdd8ec23bf823e16d416822a0a16a5", "filename": "src/test/ui/panics/issue-47429-short-backtraces.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fui%2Fpanics%2Fissue-47429-short-backtraces.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fui%2Fpanics%2Fissue-47429-short-backtraces.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpanics%2Fissue-47429-short-backtraces.rs?ref=ff94b3b12b30d1a52d594cb48f80efa39a6029a6", "patch": "@@ -14,8 +14,8 @@\n \n // NOTE(eddyb) output differs between symbol mangling schemes\n // revisions: legacy v0\n-// [legacy] compile-flags: -Zsymbol-mangling-version=legacy\n-//     [v0] compile-flags: -Zsymbol-mangling-version=v0\n+// [legacy] compile-flags: -Zunstable-options -Csymbol-mangling-version=legacy\n+//     [v0] compile-flags: -Csymbol-mangling-version=v0\n \n fn main() {\n     panic!()"}, {"sha": "e1030858814e0978786c1c3329d17e1c3d4601f5", "filename": "src/test/ui/polymorphization/closure_in_upvar/fn.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fui%2Fpolymorphization%2Fclosure_in_upvar%2Ffn.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fui%2Fpolymorphization%2Fclosure_in_upvar%2Ffn.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpolymorphization%2Fclosure_in_upvar%2Ffn.rs?ref=ff94b3b12b30d1a52d594cb48f80efa39a6029a6", "patch": "@@ -1,5 +1,5 @@\n // build-pass\n-// compile-flags:-Zpolymorphize=on -Zsymbol-mangling-version=v0\n+// compile-flags:-Zpolymorphize=on -Csymbol-mangling-version=v0\n \n fn foo(f: impl Fn()) {\n     let x = |_: ()| ();"}, {"sha": "62164ff94850814edb44e2dab8de115fae01142e", "filename": "src/test/ui/polymorphization/closure_in_upvar/fnmut.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fui%2Fpolymorphization%2Fclosure_in_upvar%2Ffnmut.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fui%2Fpolymorphization%2Fclosure_in_upvar%2Ffnmut.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpolymorphization%2Fclosure_in_upvar%2Ffnmut.rs?ref=ff94b3b12b30d1a52d594cb48f80efa39a6029a6", "patch": "@@ -1,5 +1,5 @@\n // build-pass\n-// compile-flags:-Zpolymorphize=on -Zsymbol-mangling-version=v0\n+// compile-flags:-Zpolymorphize=on -Csymbol-mangling-version=v0\n \n fn foo(f: impl Fn()) {\n     // Mutate an upvar from `x` so that it implements `FnMut`."}, {"sha": "7a364882fb8fd5d56afddb878037679624199703", "filename": "src/test/ui/polymorphization/closure_in_upvar/fnonce.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fui%2Fpolymorphization%2Fclosure_in_upvar%2Ffnonce.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fui%2Fpolymorphization%2Fclosure_in_upvar%2Ffnonce.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpolymorphization%2Fclosure_in_upvar%2Ffnonce.rs?ref=ff94b3b12b30d1a52d594cb48f80efa39a6029a6", "patch": "@@ -1,5 +1,5 @@\n // build-pass\n-// compile-flags:-Zpolymorphize=on -Zsymbol-mangling-version=v0\n+// compile-flags:-Zpolymorphize=on -Csymbol-mangling-version=v0\n \n fn foo(f: impl Fn()) {\n     // Move a non-copy type into `x` so that it implements `FnOnce`."}, {"sha": "27d59ec8899800cf9c3861eb734cfd2fed847f27", "filename": "src/test/ui/polymorphization/closure_in_upvar/other.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fui%2Fpolymorphization%2Fclosure_in_upvar%2Fother.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fui%2Fpolymorphization%2Fclosure_in_upvar%2Fother.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpolymorphization%2Fclosure_in_upvar%2Fother.rs?ref=ff94b3b12b30d1a52d594cb48f80efa39a6029a6", "patch": "@@ -1,5 +1,5 @@\n // build-pass\n-// compile-flags:-Zpolymorphize=on -Zsymbol-mangling-version=v0\n+// compile-flags:-Zpolymorphize=on -Csymbol-mangling-version=v0\n \n fn y_uses_f(f: impl Fn()) {\n     let x = |_: ()| ();"}, {"sha": "6277a902fa213c9d2fe10567a4d279f32bd1d6af", "filename": "src/test/ui/polymorphization/symbol-ambiguity.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fui%2Fpolymorphization%2Fsymbol-ambiguity.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fui%2Fpolymorphization%2Fsymbol-ambiguity.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpolymorphization%2Fsymbol-ambiguity.rs?ref=ff94b3b12b30d1a52d594cb48f80efa39a6029a6", "patch": "@@ -1,5 +1,5 @@\n // build-pass\n-// compile-flags: -Zpolymorphize=on -Zsymbol-mangling-version=v0\n+// compile-flags: -Zpolymorphize=on -Csymbol-mangling-version=v0\n \n pub(crate) struct Foo<'a, I, E>(I, &'a E);\n "}, {"sha": "65a63262810feadb45b9da166693f60a4ce545e6", "filename": "src/test/ui/symbol-names/basic.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fui%2Fsymbol-names%2Fbasic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fui%2Fsymbol-names%2Fbasic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsymbol-names%2Fbasic.rs?ref=ff94b3b12b30d1a52d594cb48f80efa39a6029a6", "patch": "@@ -1,7 +1,7 @@\n // build-fail\n // revisions: legacy v0\n-//[legacy]compile-flags: -Z symbol-mangling-version=legacy\n-    //[v0]compile-flags: -Z symbol-mangling-version=v0\n+//[legacy]compile-flags: -Z unstable-options -C symbol-mangling-version=legacy\n+    //[v0]compile-flags: -C symbol-mangling-version=v0\n \n #![feature(rustc_attrs)]\n "}, {"sha": "5c40c391a9e0b621bac86c75fb113e52d2280fd4", "filename": "src/test/ui/symbol-names/const-generics-demangling.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fui%2Fsymbol-names%2Fconst-generics-demangling.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fui%2Fsymbol-names%2Fconst-generics-demangling.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsymbol-names%2Fconst-generics-demangling.rs?ref=ff94b3b12b30d1a52d594cb48f80efa39a6029a6", "patch": "@@ -1,5 +1,5 @@\n // build-fail\n-// compile-flags: -Z symbol-mangling-version=v0 --crate-name=c\n+// compile-flags: -C symbol-mangling-version=v0 --crate-name=c\n // normalize-stderr-test: \"c\\[.*?\\]\" -> \"c[HASH]\"\n #![feature(rustc_attrs)]\n "}, {"sha": "619b34f2559a80040db39929bdc65a21c5ad0c92", "filename": "src/test/ui/symbol-names/const-generics-str-demangling.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fui%2Fsymbol-names%2Fconst-generics-str-demangling.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fui%2Fsymbol-names%2Fconst-generics-str-demangling.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsymbol-names%2Fconst-generics-str-demangling.rs?ref=ff94b3b12b30d1a52d594cb48f80efa39a6029a6", "patch": "@@ -1,5 +1,5 @@\n // build-fail\n-// compile-flags: -Z symbol-mangling-version=v0 --crate-name=c\n+// compile-flags: -C symbol-mangling-version=v0 --crate-name=c\n // normalize-stderr-test: \"c\\[.*?\\]\" -> \"c[HASH]\"\n #![feature(adt_const_params, rustc_attrs)]\n #![allow(incomplete_features)]"}, {"sha": "df09ba494a74f76ebaef9f2be76998e345d82103", "filename": "src/test/ui/symbol-names/const-generics-structural-demangling.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fui%2Fsymbol-names%2Fconst-generics-structural-demangling.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fui%2Fsymbol-names%2Fconst-generics-structural-demangling.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsymbol-names%2Fconst-generics-structural-demangling.rs?ref=ff94b3b12b30d1a52d594cb48f80efa39a6029a6", "patch": "@@ -1,5 +1,5 @@\n // build-fail\n-// compile-flags: -Z symbol-mangling-version=v0 --crate-name=c\n+// compile-flags: -C symbol-mangling-version=v0 --crate-name=c\n \n // NOTE(eddyb) we need `core` for `core::option::Option`, normalize away its\n // disambiguator hash, which can/should change (including between stage{1,2})."}, {"sha": "1242126e0cceee01cc897bf72e969b761c2b113e", "filename": "src/test/ui/symbol-names/const-generics.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fui%2Fsymbol-names%2Fconst-generics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fui%2Fsymbol-names%2Fconst-generics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsymbol-names%2Fconst-generics.rs?ref=ff94b3b12b30d1a52d594cb48f80efa39a6029a6", "patch": "@@ -1,7 +1,7 @@\n // check-pass\n // revisions: legacy v0\n-//[legacy]compile-flags: -Z symbol-mangling-version=legacy --crate-type=lib\n-//[v0]compile-flags: -Z symbol-mangling-version=v0 --crate-type=lib\n+//[legacy]compile-flags: -Z unstable-options -C symbol-mangling-version=legacy --crate-type=lib\n+//[v0]compile-flags: -C symbol-mangling-version=v0 --crate-type=lib\n \n // `char`\n pub struct Char<const F: char>;"}, {"sha": "86f0a8b0bef4dfc8c47c9d198c2aa7e1abde2336", "filename": "src/test/ui/symbol-names/impl1.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fui%2Fsymbol-names%2Fimpl1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fui%2Fsymbol-names%2Fimpl1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsymbol-names%2Fimpl1.rs?ref=ff94b3b12b30d1a52d594cb48f80efa39a6029a6", "patch": "@@ -1,7 +1,7 @@\n // build-fail\n // revisions: legacy v0\n-//[legacy]compile-flags: -Z symbol-mangling-version=legacy\n-    //[v0]compile-flags: -Z symbol-mangling-version=v0\n+//[legacy]compile-flags: -Z unstable-options -C symbol-mangling-version=legacy\n+    //[v0]compile-flags: -C symbol-mangling-version=v0\n //[legacy]normalize-stderr-test: \"h[\\w]{16}E?\\)\" -> \"<SYMBOL_HASH>)\"\n \n #![feature(auto_traits, rustc_attrs)]"}, {"sha": "ab0a3a7df1d15ec1ca717defcf8133e86387b940", "filename": "src/test/ui/symbol-names/issue-60925.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fui%2Fsymbol-names%2Fissue-60925.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fui%2Fsymbol-names%2Fissue-60925.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsymbol-names%2Fissue-60925.rs?ref=ff94b3b12b30d1a52d594cb48f80efa39a6029a6", "patch": "@@ -1,7 +1,7 @@\n // build-fail\n // revisions: legacy v0\n-//[legacy]compile-flags: -Z symbol-mangling-version=legacy\n-    //[v0]compile-flags: -Z symbol-mangling-version=v0\n+//[legacy]compile-flags: -Z unstable-options -C symbol-mangling-version=legacy\n+    //[v0]compile-flags: -C symbol-mangling-version=v0\n \n #![feature(rustc_attrs)]\n "}, {"sha": "4a1f5a21263dd309fc1a6cd7b5c111f1c59206bf", "filename": "src/test/ui/symbol-names/issue-75326.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fui%2Fsymbol-names%2Fissue-75326.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fui%2Fsymbol-names%2Fissue-75326.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsymbol-names%2Fissue-75326.rs?ref=ff94b3b12b30d1a52d594cb48f80efa39a6029a6", "patch": "@@ -1,7 +1,7 @@\n // build-fail\n // revisions: legacy v0\n-//[legacy]compile-flags: -Z symbol-mangling-version=legacy\n-//[v0]compile-flags: -Z symbol-mangling-version=v0\n+//[legacy]compile-flags: -Z unstable-options -C symbol-mangling-version=legacy\n+//[v0]compile-flags: -C symbol-mangling-version=v0\n //[legacy]normalize-stderr-test: \"h[\\w{16}]+\" -> \"SYMBOL_HASH\"\n \n #![feature(rustc_attrs)]"}, {"sha": "932057b659081e53602983322fb3b4bf00b5319e", "filename": "src/test/ui/symbol-names/issue-76365.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fui%2Fsymbol-names%2Fissue-76365.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fui%2Fsymbol-names%2Fissue-76365.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsymbol-names%2Fissue-76365.rs?ref=ff94b3b12b30d1a52d594cb48f80efa39a6029a6", "patch": "@@ -1,7 +1,7 @@\n // check-pass\n // revisions: legacy v0\n-//[legacy]compile-flags: -Z symbol-mangling-version=legacy --crate-type=lib\n-//[v0]compile-flags: -Z symbol-mangling-version=v0 --crate-type=lib\n+//[legacy]compile-flags: -Z unstable-options -C symbol-mangling-version=legacy --crate-type=lib\n+//[v0]compile-flags: -C symbol-mangling-version=v0 --crate-type=lib\n \n \n pub struct Bar<const F: bool>;"}, {"sha": "5bcbc08413fe10b83cf5c364bf2cc9cbc0e19823", "filename": "src/test/ui/symbol-names/trait-objects.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fui%2Fsymbol-names%2Ftrait-objects.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff94b3b12b30d1a52d594cb48f80efa39a6029a6/src%2Ftest%2Fui%2Fsymbol-names%2Ftrait-objects.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsymbol-names%2Ftrait-objects.rs?ref=ff94b3b12b30d1a52d594cb48f80efa39a6029a6", "patch": "@@ -2,7 +2,7 @@\n \n // build-fail\n // revisions: v0\n-//[v0]compile-flags: -Z symbol-mangling-version=v0\n+//[v0]compile-flags: -C symbol-mangling-version=v0\n //[v0]normalize-stderr-test: \"core\\[.*?\\]\" -> \"core[HASH]\"\n \n #![feature(rustc_attrs)]"}]}