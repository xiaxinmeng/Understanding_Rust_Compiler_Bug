{"sha": "a651106ad0c8395fcfbd62ef58de9e36376252e0", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE2NTExMDZhZDBjODM5NWZjZmJkNjJlZjU4ZGU5ZTM2Mzc2MjUyZTA=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2017-10-19T23:55:20Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2017-10-19T23:55:20Z"}, "message": "Auto merge of #45288 - GuillaumeGomez:tab-key-binding, r=QuietMisdreavus\n\nSave the highlighted item when switching tab\n\nTo be merged after #45281.\n\nr? @rust-lang/docs", "tree": {"sha": "6d0e56ccf3792ad159f3f8d57c3af1aaf9fc39cb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6d0e56ccf3792ad159f3f8d57c3af1aaf9fc39cb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a651106ad0c8395fcfbd62ef58de9e36376252e0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a651106ad0c8395fcfbd62ef58de9e36376252e0", "html_url": "https://github.com/rust-lang/rust/commit/a651106ad0c8395fcfbd62ef58de9e36376252e0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a651106ad0c8395fcfbd62ef58de9e36376252e0/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4750c1ec047f18bc0e33823182e09711a3826fb5", "url": "https://api.github.com/repos/rust-lang/rust/commits/4750c1ec047f18bc0e33823182e09711a3826fb5", "html_url": "https://github.com/rust-lang/rust/commit/4750c1ec047f18bc0e33823182e09711a3826fb5"}, {"sha": "f44232688e7c70400e5edf9e83a44f1da2317406", "url": "https://api.github.com/repos/rust-lang/rust/commits/f44232688e7c70400e5edf9e83a44f1da2317406", "html_url": "https://github.com/rust-lang/rust/commit/f44232688e7c70400e5edf9e83a44f1da2317406"}], "stats": {"total": 51, "additions": 34, "deletions": 17}, "files": [{"sha": "79eaabe31e86b4698a10da1ee0fa1ecdd91fed9a", "filename": "src/librustdoc/html/layout.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a651106ad0c8395fcfbd62ef58de9e36376252e0/src%2Flibrustdoc%2Fhtml%2Flayout.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a651106ad0c8395fcfbd62ef58de9e36376252e0/src%2Flibrustdoc%2Fhtml%2Flayout.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Flayout.rs?ref=a651106ad0c8395fcfbd62ef58de9e36376252e0", "patch": "@@ -101,6 +101,8 @@ r##\"<!DOCTYPE html>\n                     <dd>Move up in search results</dd>\n                     <dt>\u2193</dt>\n                     <dd>Move down in search results</dd>\n+                    <dt>\u21b9</dt>\n+                    <dd>Switch tab</dd>\n                     <dt>&#9166;</dt>\n                     <dd>Go to active search result</dd>\n                     <dt>+</dt>"}, {"sha": "04bf466a7804dee5fb53479542a07a2e477afe58", "filename": "src/librustdoc/html/static/main.js", "status": "modified", "additions": 31, "deletions": 16, "changes": 47, "blob_url": "https://github.com/rust-lang/rust/blob/a651106ad0c8395fcfbd62ef58de9e36376252e0/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/a651106ad0c8395fcfbd62ef58de9e36376252e0/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js?ref=a651106ad0c8395fcfbd62ef58de9e36376252e0", "patch": "@@ -712,41 +712,56 @@\n             });\n \n             var search_input = document.getElementsByClassName('search-input')[0];\n-            search_input.onkeydown = null;\n             search_input.onkeydown = function(e) {\n-                var actives = [];\n+                // \"actives\" references the currently highlighted item in each search tab.\n+                // Each array in \"actives\" represents a tab.\n+                var actives = [[], [], []];\n+                // \"current\" is used to know which tab we're looking into.\n+                var current = 0;\n                 onEach(document.getElementsByClassName('search-results'), function(e) {\n-                    onEach(document.getElementsByClassName('highlighted'), function(e) {\n-                        actives.push(e);\n+                    onEach(e.getElementsByClassName('highlighted'), function(e) {\n+                        actives[current].push(e);\n                     });\n+                    current += 1;\n                 });\n \n                 if (e.which === 38) { // up\n-                    if (!actives.length || !actives[0].previousElementSibling) {\n+                    if (!actives[currentTab].length ||\n+                        !actives[currentTab][0].previousElementSibling) {\n                         return;\n                     }\n \n-                    addClass(actives[0].previousElementSibling, 'highlighted');\n-                    removeClass(actives[0], 'highlighted');\n+                    addClass(actives[currentTab][0].previousElementSibling, 'highlighted');\n+                    removeClass(actives[currentTab][0], 'highlighted');\n                 } else if (e.which === 40) { // down\n-                    if (!actives.length) {\n+                    if (!actives[currentTab].length) {\n                         var results = document.getElementsByClassName('search-results');\n                         if (results.length > 0) {\n-                            var res = results[0].getElementsByClassName('result');\n+                            var res = results[currentTab].getElementsByClassName('result');\n                             if (res.length > 0) {\n                                 addClass(res[0], 'highlighted');\n                             }\n                         }\n-                    } else if (actives[0].nextElementSibling) {\n-                        addClass(actives[0].nextElementSibling, 'highlighted');\n-                        removeClass(actives[0], 'highlighted');\n+                    } else if (actives[currentTab][0].nextElementSibling) {\n+                        addClass(actives[currentTab][0].nextElementSibling, 'highlighted');\n+                        removeClass(actives[currentTab][0], 'highlighted');\n                     }\n                 } else if (e.which === 13) { // return\n-                    if (actives.length) {\n-                        document.location.href = actives[0].getElementsByTagName('a')[0].href;\n+                    if (actives[currentTab].length) {\n+                        document.location.href =\n+                            actives[currentTab][0].getElementsByTagName('a')[0].href;\n                     }\n-                } else if (actives.length > 0) {\n-                    removeClass(actives[0], 'highlighted');\n+                } else if (e.which === 9) { // tab\n+                    if (e.shiftKey) {\n+                        printTab(currentTab > 0 ? currentTab - 1 : 2);\n+                    } else {\n+                        printTab(currentTab > 1 ? 0 : currentTab + 1);\n+                    }\n+                    e.preventDefault();\n+                } else if (e.which === 16) { // shift\n+                    // Does nothing, it's just to avoid losing \"focus\" on the highlighted element.\n+                } else if (actives[currentTab].length > 0) {\n+                    removeClass(actives[currentTab][0], 'highlighted');\n                 }\n             };\n         }"}, {"sha": "18270654aa93c5f7ee67e36031012ef1a01d90c6", "filename": "src/librustdoc/html/static/rustdoc.css", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a651106ad0c8395fcfbd62ef58de9e36376252e0/src%2Flibrustdoc%2Fhtml%2Fstatic%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/a651106ad0c8395fcfbd62ef58de9e36376252e0/src%2Flibrustdoc%2Fhtml%2Fstatic%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Frustdoc.css?ref=a651106ad0c8395fcfbd62ef58de9e36376252e0", "patch": "@@ -552,7 +552,7 @@ body.blur > :not(#help) {\n \tflex: 0 0 auto;\n \tbox-shadow: 0 0 6px rgba(0,0,0,.2);\n \twidth: 550px;\n-\theight: 330px;\n+\theight: 354px;\n \tborder: 1px solid;\n }\n #help dt {"}]}