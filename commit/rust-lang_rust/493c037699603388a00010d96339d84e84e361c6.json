{"sha": "493c037699603388a00010d96339d84e84e361c6", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ5M2MwMzc2OTk2MDMzODhhMDAwMTBkOTYzMzlkODRlODRlMzYxYzY=", "commit": {"author": {"name": "carbotaniuman", "email": "41451839+carbotaniuman@users.noreply.github.com", "date": "2020-09-09T17:11:44Z"}, "committer": {"name": "carbotaniuman", "email": "41451839+carbotaniuman@users.noreply.github.com", "date": "2020-09-09T17:14:18Z"}, "message": "Eliminate mut reference UB in Drop impl for Rc<T>\n\nThis changes `self.ptr.as_mut()` with `get_mut_unchecked` which\ndoes not use an intermediate reference.  Arc<T> already handled this\ncase properly.", "tree": {"sha": "24afdf0c8086ce4e8f28c44c8117ce066b991e46", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/24afdf0c8086ce4e8f28c44c8117ce066b991e46"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/493c037699603388a00010d96339d84e84e361c6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/493c037699603388a00010d96339d84e84e361c6", "html_url": "https://github.com/rust-lang/rust/commit/493c037699603388a00010d96339d84e84e361c6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/493c037699603388a00010d96339d84e84e361c6/comments", "author": {"login": "carbotaniuman", "id": 41451839, "node_id": "MDQ6VXNlcjQxNDUxODM5", "avatar_url": "https://avatars.githubusercontent.com/u/41451839?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carbotaniuman", "html_url": "https://github.com/carbotaniuman", "followers_url": "https://api.github.com/users/carbotaniuman/followers", "following_url": "https://api.github.com/users/carbotaniuman/following{/other_user}", "gists_url": "https://api.github.com/users/carbotaniuman/gists{/gist_id}", "starred_url": "https://api.github.com/users/carbotaniuman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carbotaniuman/subscriptions", "organizations_url": "https://api.github.com/users/carbotaniuman/orgs", "repos_url": "https://api.github.com/users/carbotaniuman/repos", "events_url": "https://api.github.com/users/carbotaniuman/events{/privacy}", "received_events_url": "https://api.github.com/users/carbotaniuman/received_events", "type": "User", "site_admin": false}, "committer": {"login": "carbotaniuman", "id": 41451839, "node_id": "MDQ6VXNlcjQxNDUxODM5", "avatar_url": "https://avatars.githubusercontent.com/u/41451839?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carbotaniuman", "html_url": "https://github.com/carbotaniuman", "followers_url": "https://api.github.com/users/carbotaniuman/followers", "following_url": "https://api.github.com/users/carbotaniuman/following{/other_user}", "gists_url": "https://api.github.com/users/carbotaniuman/gists{/gist_id}", "starred_url": "https://api.github.com/users/carbotaniuman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carbotaniuman/subscriptions", "organizations_url": "https://api.github.com/users/carbotaniuman/orgs", "repos_url": "https://api.github.com/users/carbotaniuman/repos", "events_url": "https://api.github.com/users/carbotaniuman/events{/privacy}", "received_events_url": "https://api.github.com/users/carbotaniuman/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b4bdc07ff5a70175dbcdff7331c557245ddb012f", "url": "https://api.github.com/repos/rust-lang/rust/commits/b4bdc07ff5a70175dbcdff7331c557245ddb012f", "html_url": "https://github.com/rust-lang/rust/commit/b4bdc07ff5a70175dbcdff7331c557245ddb012f"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "fe429e6e9464cfca5ba511bdb8570afa8bbc9d8c", "filename": "library/alloc/src/rc.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/493c037699603388a00010d96339d84e84e361c6/library%2Falloc%2Fsrc%2Frc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/493c037699603388a00010d96339d84e84e361c6/library%2Falloc%2Fsrc%2Frc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Falloc%2Fsrc%2Frc.rs?ref=493c037699603388a00010d96339d84e84e361c6", "patch": "@@ -1195,7 +1195,7 @@ unsafe impl<#[may_dangle] T: ?Sized> Drop for Rc<T> {\n             self.dec_strong();\n             if self.strong() == 0 {\n                 // destroy the contained object\n-                ptr::drop_in_place(self.ptr.as_mut());\n+                ptr::drop_in_place(Self::get_mut_unchecked(self));\n \n                 // remove the implicit \"strong weak\" pointer now that we've\n                 // destroyed the contents."}]}