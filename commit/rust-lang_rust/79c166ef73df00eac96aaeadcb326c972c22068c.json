{"sha": "79c166ef73df00eac96aaeadcb326c972c22068c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc5YzE2NmVmNzNkZjAwZWFjOTZhYWVhZGNiMzI2Yzk3MmMyMjA2OGM=", "commit": {"author": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2020-02-05T14:47:01Z"}, "committer": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2020-02-17T11:21:28Z"}, "message": "ci: switch macOS builders to 10.15", "tree": {"sha": "97f948841fc0aa8288c10d0a92c82594ba179ba3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/97f948841fc0aa8288c10d0a92c82594ba179ba3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/79c166ef73df00eac96aaeadcb326c972c22068c", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE1JbYPtLJAsc22U9xPgar6Auq8ZwFAl5KdzgACgkQPgar6Auq\n8ZzixhAAweww0F5WjDDO4CLCgVKgf2c8LFP7iSLB5agE7Q+ZXUykBP6LP4KGVlR5\n+cRdw05m/yYZQ2HNDDmMBl2l6d05nD4uOEssWIf0lQN1oi+xrjPLfSDZDArwpS6b\nOGmbYdZZBUJH5bOSFp+nSjcbiJqq3TG0w5a9C0AFgv3vsDkHnF1Aab5BaaM0UXKZ\nNB9H1EGtIpmvL/iXdbe47AVZWwjh/gfDfYeyF5K8sNdVJeYmSmdluQgtacZY9bal\nwLUQ8EEXcpeCNhslKP6KD0aIJp0FVvmsmbvTDvwjDeWhPMoE/OnwjEH2TKDTdV72\nV9WIn6G/GmN4zoVMmRYd0tAMzMHWuU7v/oMXBDI9XvqJ+Q5eKePFa3Oq7ZjOHKzC\nMrbAEqZD2W5+IuRok9c8/voB2Xpn/mK6FP3iU00xkXnOELj78XQde5ODrAqmQYDJ\n+UShSgSTXMLcG1OXi4aI7M7lK1ClSxFZKOLL3i4r6Cc3jJhWB29RynCcZUsMHbQ1\nSYUL3BzMSDSbSSJu2kQelUu12mZpUPTybrClzgklZ1fRrt43XftBSWAoUlCBJpY+\n6/AlDtEUC4SS3wSO1Zk7a6KM8eJDeUi3upTugeCF7iNtA7Al5k4a0A95gmGGysWz\nlmO2VgHfs2bUuGM04UQU7Vi/zEtz2jm7/6pMkaGyUvBN8ppthMw=\n=M2NA\n-----END PGP SIGNATURE-----", "payload": "tree 97f948841fc0aa8288c10d0a92c82594ba179ba3\nparent 75b98fbe77d472d85d1691bae5b25e7eefb3609c\nauthor Pietro Albini <pietro@pietroalbini.org> 1580914021 +0100\ncommitter Pietro Albini <pietro@pietroalbini.org> 1581938488 +0100\n\nci: switch macOS builders to 10.15\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/79c166ef73df00eac96aaeadcb326c972c22068c", "html_url": "https://github.com/rust-lang/rust/commit/79c166ef73df00eac96aaeadcb326c972c22068c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/79c166ef73df00eac96aaeadcb326c972c22068c/comments", "author": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "75b98fbe77d472d85d1691bae5b25e7eefb3609c", "url": "https://api.github.com/repos/rust-lang/rust/commits/75b98fbe77d472d85d1691bae5b25e7eefb3609c", "html_url": "https://github.com/rust-lang/rust/commit/75b98fbe77d472d85d1691bae5b25e7eefb3609c"}], "stats": {"total": 29, "additions": 5, "deletions": 24}, "files": [{"sha": "3d6d4065fe80ce4358012ae7caf0d3bab72f7b22", "filename": "src/bootstrap/test.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/79c166ef73df00eac96aaeadcb326c972c22068c/src%2Fbootstrap%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79c166ef73df00eac96aaeadcb326c972c22068c/src%2Fbootstrap%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Ftest.rs?ref=79c166ef73df00eac96aaeadcb326c972c22068c", "patch": "@@ -1051,10 +1051,10 @@ impl Step for Compiletest {\n         cmd.arg(\"--docck-python\").arg(builder.python());\n \n         if builder.config.build.ends_with(\"apple-darwin\") {\n-            // Force /usr/bin/python on macOS for LLDB tests because we're loading the\n+            // Force /usr/bin/python3 on macOS for LLDB tests because we're loading the\n             // LLDB plugin's compiled module which only works with the system python\n             // (namely not Homebrew-installed python)\n-            cmd.arg(\"--lldb-python\").arg(\"/usr/bin/python\");\n+            cmd.arg(\"--lldb-python\").arg(\"/usr/bin/python3\");\n         } else {\n             cmd.arg(\"--lldb-python\").arg(builder.python());\n         }"}, {"sha": "74b7469ea27b7f64de3063543aa8092a8bc75e4d", "filename": "src/ci/azure-pipelines/auto.yml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/79c166ef73df00eac96aaeadcb326c972c22068c/src%2Fci%2Fazure-pipelines%2Fauto.yml", "raw_url": "https://github.com/rust-lang/rust/raw/79c166ef73df00eac96aaeadcb326c972c22068c/src%2Fci%2Fazure-pipelines%2Fauto.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fazure-pipelines%2Fauto.yml?ref=79c166ef73df00eac96aaeadcb326c972c22068c", "patch": "@@ -63,7 +63,7 @@ jobs:\n - job: macOS\n   timeoutInMinutes: 600\n   pool:\n-    vmImage: macos-10.13\n+    vmImage: macos-10.15\n   steps:\n   - template: steps/run.yml\n   strategy:"}, {"sha": "1532608f0c02072b12263aa39b227c2c1b74943b", "filename": "src/ci/azure-pipelines/steps/run.yml", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/79c166ef73df00eac96aaeadcb326c972c22068c/src%2Fci%2Fazure-pipelines%2Fsteps%2Frun.yml", "raw_url": "https://github.com/rust-lang/rust/raw/79c166ef73df00eac96aaeadcb326c972c22068c/src%2Fci%2Fazure-pipelines%2Fsteps%2Frun.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fazure-pipelines%2Fsteps%2Frun.yml?ref=79c166ef73df00eac96aaeadcb326c972c22068c", "patch": "@@ -48,10 +48,6 @@ steps:\n   displayName: Install clang\n   condition: and(succeeded(), not(variables.SKIP_JOB))\n \n-- bash: src/ci/scripts/switch-xcode.sh\n-  displayName: Switch to Xcode 9.3\n-  condition: and(succeeded(), not(variables.SKIP_JOB))\n-\n - bash: src/ci/scripts/install-wix.sh\n   displayName: Install wix\n   condition: and(succeeded(), not(variables.SKIP_JOB))"}, {"sha": "f8ddf0eb46cfd1d23b29f01960ad17962724d33c", "filename": "src/ci/azure-pipelines/try.yml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/79c166ef73df00eac96aaeadcb326c972c22068c/src%2Fci%2Fazure-pipelines%2Ftry.yml", "raw_url": "https://github.com/rust-lang/rust/raw/79c166ef73df00eac96aaeadcb326c972c22068c/src%2Fci%2Fazure-pipelines%2Ftry.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fazure-pipelines%2Ftry.yml?ref=79c166ef73df00eac96aaeadcb326c972c22068c", "patch": "@@ -25,7 +25,7 @@ jobs:\n # - job: macOS\n #   timeoutInMinutes: 600\n #   pool:\n-#     vmImage: macos-10.13\n+#     vmImage: macos-10.15\n #   steps:\n #   - template: steps/run.yml\n #   strategy:"}, {"sha": "c242f5d4562690ba8f0c310bd86df305cee523ef", "filename": "src/ci/scripts/install-clang.sh", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/79c166ef73df00eac96aaeadcb326c972c22068c/src%2Fci%2Fscripts%2Finstall-clang.sh", "raw_url": "https://github.com/rust-lang/rust/raw/79c166ef73df00eac96aaeadcb326c972c22068c/src%2Fci%2Fscripts%2Finstall-clang.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fscripts%2Finstall-clang.sh?ref=79c166ef73df00eac96aaeadcb326c972c22068c", "patch": "@@ -19,9 +19,7 @@ if isMacOS; then\n     # native clang is configured to use the correct path, but our custom one\n     # doesn't. This sets the SDKROOT environment variable to the SDK so that\n     # our own clang can figure out the correct include path on its own.\n-    if ! [[ -d \"/usr/include\" ]]; then\n-        ciCommandSetEnv SDKROOT \"$(xcrun --sdk macosx --show-sdk-path)\"\n-    fi\n+    ciCommandSetEnv SDKROOT \"$(xcrun --sdk macosx --show-sdk-path)\"\n \n     # Configure `AR` specifically so rustbuild doesn't try to infer it as\n     # `clang-ar` by accident."}, {"sha": "2cbb2ddbc7046ab77caf06977f76aad5e750568f", "filename": "src/ci/scripts/switch-xcode.sh", "status": "removed", "additions": 0, "deletions": 13, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/75b98fbe77d472d85d1691bae5b25e7eefb3609c/src%2Fci%2Fscripts%2Fswitch-xcode.sh", "raw_url": "https://github.com/rust-lang/rust/raw/75b98fbe77d472d85d1691bae5b25e7eefb3609c/src%2Fci%2Fscripts%2Fswitch-xcode.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fscripts%2Fswitch-xcode.sh?ref=75b98fbe77d472d85d1691bae5b25e7eefb3609c", "patch": "@@ -1,13 +0,0 @@\n-#!/bin/bash\n-# Switch to XCode 9.3 on OSX since it seems to be the last version that supports\n-# i686-apple-darwin. We'll eventually want to upgrade this and it will probably\n-# force us to drop i686-apple-darwin, but let's keep the wheels turning for now.\n-\n-set -euo pipefail\n-IFS=$'\\n\\t'\n-\n-source \"$(cd \"$(dirname \"$0\")\" && pwd)/../shared.sh\"\n-\n-if isMacOS; then\n-    sudo xcode-select --switch /Applications/Xcode_9.3.app\n-fi"}]}