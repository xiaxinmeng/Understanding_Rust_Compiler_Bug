{"sha": "e1be69b8a97d48d579b5474907aab9199d1b8ab7", "node_id": "MDY6Q29tbWl0NzI0NzEyOmUxYmU2OWI4YTk3ZDQ4ZDU3OWI1NDc0OTA3YWFiOTE5OWQxYjhhYjc=", "commit": {"author": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2015-04-03T02:56:27Z"}, "committer": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2015-04-03T02:56:27Z"}, "message": "Add tests for parsing of patterns", "tree": {"sha": "211ed449785d7600bc2916f2faca1ad1211ee7a2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/211ed449785d7600bc2916f2faca1ad1211ee7a2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e1be69b8a97d48d579b5474907aab9199d1b8ab7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e1be69b8a97d48d579b5474907aab9199d1b8ab7", "html_url": "https://github.com/rust-lang/rust/commit/e1be69b8a97d48d579b5474907aab9199d1b8ab7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e1be69b8a97d48d579b5474907aab9199d1b8ab7/comments", "author": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "committer": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "80def6c2447d23a624e611417f24cf0ab2a5a676", "url": "https://api.github.com/repos/rust-lang/rust/commits/80def6c2447d23a624e611417f24cf0ab2a5a676", "html_url": "https://github.com/rust-lang/rust/commit/80def6c2447d23a624e611417f24cf0ab2a5a676"}], "stats": {"total": 197, "additions": 197, "deletions": 0}, "files": [{"sha": "6d3d1207788303f7036e206441060274724d0707", "filename": "src/test/parse-fail/pat-lt-bracket-1.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e1be69b8a97d48d579b5474907aab9199d1b8ab7/src%2Ftest%2Fparse-fail%2Fpat-lt-bracket-1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e1be69b8a97d48d579b5474907aab9199d1b8ab7/src%2Ftest%2Fparse-fail%2Fpat-lt-bracket-1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fparse-fail%2Fpat-lt-bracket-1.rs?ref=e1be69b8a97d48d579b5474907aab9199d1b8ab7", "previous_filename": "src/test/compile-fail/issue-22426-1.rs"}, {"sha": "6a0653041d45b194d344a7cb6ab9d34dfae78c5c", "filename": "src/test/parse-fail/pat-lt-bracket-2.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e1be69b8a97d48d579b5474907aab9199d1b8ab7/src%2Ftest%2Fparse-fail%2Fpat-lt-bracket-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e1be69b8a97d48d579b5474907aab9199d1b8ab7/src%2Ftest%2Fparse-fail%2Fpat-lt-bracket-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fparse-fail%2Fpat-lt-bracket-2.rs?ref=e1be69b8a97d48d579b5474907aab9199d1b8ab7", "previous_filename": "src/test/compile-fail/issue-22426-2.rs"}, {"sha": "8ea2bcf900c97066e7f4f798328b45bd57343acd", "filename": "src/test/parse-fail/pat-lt-bracket-3.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e1be69b8a97d48d579b5474907aab9199d1b8ab7/src%2Ftest%2Fparse-fail%2Fpat-lt-bracket-3.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e1be69b8a97d48d579b5474907aab9199d1b8ab7/src%2Ftest%2Fparse-fail%2Fpat-lt-bracket-3.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fparse-fail%2Fpat-lt-bracket-3.rs?ref=e1be69b8a97d48d579b5474907aab9199d1b8ab7", "previous_filename": "src/test/compile-fail/issue-22426-3.rs"}, {"sha": "3d9b492307a7cd7493b66e6dbfab58b5e5ecd652", "filename": "src/test/parse-fail/pat-lt-bracket-4.rs", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/e1be69b8a97d48d579b5474907aab9199d1b8ab7/src%2Ftest%2Fparse-fail%2Fpat-lt-bracket-4.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e1be69b8a97d48d579b5474907aab9199d1b8ab7/src%2Ftest%2Fparse-fail%2Fpat-lt-bracket-4.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fparse-fail%2Fpat-lt-bracket-4.rs?ref=e1be69b8a97d48d579b5474907aab9199d1b8ab7", "patch": "@@ -0,0 +1,21 @@\n+// Copyright 2015 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+enum BtNode {\n+    Node(u32,Box<BtNode>,Box<BtNode>),\n+    Leaf(u32),\n+}\n+\n+fn main() {\n+    let y = match x {\n+        Foo<T>::A(value) => value, //~ error: expected one of `=>`, `@`, `if`, or `|`, found `<`\n+        Foo<T>::B => 7,\n+    };\n+}"}, {"sha": "3345845eee9ae0e5784472421fba06ccebef0ea3", "filename": "src/test/parse-fail/pat-lt-bracket-5.rs", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/e1be69b8a97d48d579b5474907aab9199d1b8ab7/src%2Ftest%2Fparse-fail%2Fpat-lt-bracket-5.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e1be69b8a97d48d579b5474907aab9199d1b8ab7/src%2Ftest%2Fparse-fail%2Fpat-lt-bracket-5.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fparse-fail%2Fpat-lt-bracket-5.rs?ref=e1be69b8a97d48d579b5474907aab9199d1b8ab7", "patch": "@@ -0,0 +1,13 @@\n+// Copyright 2015 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+fn main() {\n+    let v[0] = v[1]; //~ error: expected one of `:`, `;`, `=`, or `@`, found `[`\n+}"}, {"sha": "72fdae82260eafed8485fa05c69f8b347836dda6", "filename": "src/test/parse-fail/pat-lt-bracket-6.rs", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/e1be69b8a97d48d579b5474907aab9199d1b8ab7/src%2Ftest%2Fparse-fail%2Fpat-lt-bracket-6.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e1be69b8a97d48d579b5474907aab9199d1b8ab7/src%2Ftest%2Fparse-fail%2Fpat-lt-bracket-6.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fparse-fail%2Fpat-lt-bracket-6.rs?ref=e1be69b8a97d48d579b5474907aab9199d1b8ab7", "patch": "@@ -0,0 +1,13 @@\n+// Copyright 2015 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+fn main() {\n+    let Test(&desc[..]) = x; //~ error: expected one of `,` or `@`, found `[`\n+}"}, {"sha": "c7731d156ad626fd345cb2ba5895e373f848e0de", "filename": "src/test/parse-fail/pat-lt-bracket-7.rs", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/e1be69b8a97d48d579b5474907aab9199d1b8ab7/src%2Ftest%2Fparse-fail%2Fpat-lt-bracket-7.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e1be69b8a97d48d579b5474907aab9199d1b8ab7/src%2Ftest%2Fparse-fail%2Fpat-lt-bracket-7.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fparse-fail%2Fpat-lt-bracket-7.rs?ref=e1be69b8a97d48d579b5474907aab9199d1b8ab7", "patch": "@@ -0,0 +1,13 @@\n+// Copyright 2015 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+fn main() {\n+    for thing(x[]) {} //~ error: expected one of `,` or `@`, found `[`\n+}"}, {"sha": "e1cbb961b1bcc5c0e769827889f8acc982663c53", "filename": "src/test/parse-fail/pat-ranges-1.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/e1be69b8a97d48d579b5474907aab9199d1b8ab7/src%2Ftest%2Fparse-fail%2Fpat-ranges-1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e1be69b8a97d48d579b5474907aab9199d1b8ab7/src%2Ftest%2Fparse-fail%2Fpat-ranges-1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fparse-fail%2Fpat-ranges-1.rs?ref=e1be69b8a97d48d579b5474907aab9199d1b8ab7", "patch": "@@ -0,0 +1,15 @@\n+// Copyright 2015 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// Parsing of range patterns\n+\n+fn main() {\n+    let macropus!() ... 11 = 12; //~ error: expected one of `:`, `;`, or `=`, found `...`\n+}"}, {"sha": "04ad5ff083bc8f98e8d98c55fe6d90ab3b09d738", "filename": "src/test/parse-fail/pat-ranges-2.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/e1be69b8a97d48d579b5474907aab9199d1b8ab7/src%2Ftest%2Fparse-fail%2Fpat-ranges-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e1be69b8a97d48d579b5474907aab9199d1b8ab7/src%2Ftest%2Fparse-fail%2Fpat-ranges-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fparse-fail%2Fpat-ranges-2.rs?ref=e1be69b8a97d48d579b5474907aab9199d1b8ab7", "patch": "@@ -0,0 +1,15 @@\n+// Copyright 2015 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// Parsing of range patterns\n+\n+fn main() {\n+    let 10 ... makropulos!() = 12; //~ error: expected one of `::`, `:`, `;`, or `=`, found `!`\n+}"}, {"sha": "5f7aac71d29b25bc129377fc09bdfb1e5ffcfdc2", "filename": "src/test/parse-fail/pat-ranges-3.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/e1be69b8a97d48d579b5474907aab9199d1b8ab7/src%2Ftest%2Fparse-fail%2Fpat-ranges-3.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e1be69b8a97d48d579b5474907aab9199d1b8ab7/src%2Ftest%2Fparse-fail%2Fpat-ranges-3.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fparse-fail%2Fpat-ranges-3.rs?ref=e1be69b8a97d48d579b5474907aab9199d1b8ab7", "patch": "@@ -0,0 +1,15 @@\n+// Copyright 2015 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// Parsing of range patterns\n+\n+fn main() {\n+    let 10 ... 10 + 3 = 12; //~ expected one of `:`, `;`, or `=`, found `+`\n+}"}, {"sha": "50dcb8995279c8a74d8396369142c16d35bdd8de", "filename": "src/test/parse-fail/pat-ranges-4.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/e1be69b8a97d48d579b5474907aab9199d1b8ab7/src%2Ftest%2Fparse-fail%2Fpat-ranges-4.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e1be69b8a97d48d579b5474907aab9199d1b8ab7/src%2Ftest%2Fparse-fail%2Fpat-ranges-4.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fparse-fail%2Fpat-ranges-4.rs?ref=e1be69b8a97d48d579b5474907aab9199d1b8ab7", "patch": "@@ -0,0 +1,15 @@\n+// Copyright 2015 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// Parsing of range patterns\n+\n+fn main() {\n+    let 10 - 3 ... 10 = 8; //~ error: expected one of `...`, `:`, `;`, or `=`, found `-`\n+}"}, {"sha": "b3cb8a78213b8ff64a0f857483bb0d177ff3702a", "filename": "src/test/run-pass/issue-22546.rs", "status": "added", "additions": 54, "deletions": 0, "changes": 54, "blob_url": "https://github.com/rust-lang/rust/blob/e1be69b8a97d48d579b5474907aab9199d1b8ab7/src%2Ftest%2Frun-pass%2Fissue-22546.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e1be69b8a97d48d579b5474907aab9199d1b8ab7/src%2Ftest%2Frun-pass%2Fissue-22546.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissue-22546.rs?ref=e1be69b8a97d48d579b5474907aab9199d1b8ab7", "patch": "@@ -0,0 +1,54 @@\n+// Copyright 2015 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// Parsing patterns with paths with type parameters (issue #22544)\n+\n+use std::default::Default;\n+\n+#[derive(Default)]\n+pub struct Foo<T>(T, T);\n+\n+impl<T: ::std::fmt::Display> Foo<T> {\n+    fn foo(&self) {\n+        match *self {\n+            Foo::<T>(ref x, ref y) => println!(\"Goodbye, World! {} {}\", x, y)\n+        }\n+    }\n+}\n+\n+trait Tr {\n+    type U;\n+}\n+\n+impl<T> Tr for Foo<T> {\n+    type U = T;\n+}\n+\n+struct Wrapper<T> {\n+    value: T\n+}\n+\n+fn main() {\n+    let Foo::<i32>(a, b) = Default::default();\n+\n+    let f = Foo(2,3);\n+    f.foo();\n+\n+    let w = Wrapper { value: Foo(10u8, 11u8) };\n+    match w {\n+        Wrapper::<Foo<u8>> { value: Foo(10, 11) } => {},\n+        ::Wrapper::<<Foo<_> as Tr>::U> { value: Foo::<u8>(11, 16) } => { panic!() },\n+        _ => { panic!() }\n+    }\n+\n+    if let None::<u8> = Some(8) {\n+        panic!();\n+    }\n+}"}, {"sha": "964989508ccf290f37509f5b5dd66b4f18f16069", "filename": "src/test/run-pass/pat-ranges.rs", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/e1be69b8a97d48d579b5474907aab9199d1b8ab7/src%2Ftest%2Frun-pass%2Fpat-ranges.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e1be69b8a97d48d579b5474907aab9199d1b8ab7/src%2Ftest%2Frun-pass%2Fpat-ranges.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fpat-ranges.rs?ref=e1be69b8a97d48d579b5474907aab9199d1b8ab7", "patch": "@@ -0,0 +1,23 @@\n+// Copyright 2015 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// Parsing of range patterns\n+\n+const NUM1: i32 = 10;\n+\n+mod m {\n+    pub const NUM2: i32 = 16;\n+}\n+\n+fn main() {\n+    if let NUM1 ... m::NUM2 = 10 {} else { panic!() }\n+    if let ::NUM1 ... ::m::NUM2 = 11 {} else { panic!() }\n+    if let -13 ... -10 = 12 { panic!() } else {}\n+}"}]}