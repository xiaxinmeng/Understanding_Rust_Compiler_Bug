{"sha": "88cb597e7ae3f6b7d8d7e17f3f49cdf30eb726b8", "node_id": "C_kwDOAAsO6NoAKDg4Y2I1OTdlN2FlM2Y2YjdkOGQ3ZTE3ZjNmNDljZGYzMGViNzI2Yjg", "commit": {"author": {"name": "Dylan DPC", "email": "99973273+Dylan-DPC@users.noreply.github.com", "date": "2022-06-19T13:26:29Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-06-19T13:26:29Z"}, "message": "Rollup merge of #98146 - hoodmane:remove-memory-init-flag, r=petrochenkov\n\nRemove --memory-init-file flag when linking with Emscripten\n\nThis flag does nothing. It only applies when generating asmjs JavaScript.\n``@sbc100``", "tree": {"sha": "f2cde5f0194d19a7c4ecae3ea8f0c203ff2f08b5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f2cde5f0194d19a7c4ecae3ea8f0c203ff2f08b5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/88cb597e7ae3f6b7d8d7e17f3f49cdf30eb726b8", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJiryQFCRBK7hj4Ov3rIwAAOPIIAK+lRh7NCehsoyH4bm0x8NJ5\nYcXt/qTh4GbcoJrCYT9n4iptiopWkB81EUiqMZpvFNeNXzRIf8SfTR+pR/wzKh2l\nrdlT8mB8qTOZFi0/3T1kZnu4DIzIT3dufkyJZnrAsv6xeH1f/OzN0yr/1M8S5kJR\nqrkxVCGg+tkOG9l4HR4xW72Y0/OGbEW25/vnxUZQyQBqyFVK7SsLEVoWqWhflnUy\nombjCFSAu0arWRrG7xzlH+sd3Q1tPLN35DA2BmKiVHz3FnJwXVQ9VBY/ARm+r27y\nx79EOsmEOxWBhTEj+xyUKD7HZ5rheldKuJryOaeX7Y1Vdaw3Cg235AfXSBAln0A=\n=kEOf\n-----END PGP SIGNATURE-----\n", "payload": "tree f2cde5f0194d19a7c4ecae3ea8f0c203ff2f08b5\nparent 6e8f541fffac4cbd0b342b2b106b6547b99781aa\nparent 3fb6d45af9c9e8a682da743f6d920bb5b6dd66de\nauthor Dylan DPC <99973273+Dylan-DPC@users.noreply.github.com> 1655645189 +0200\ncommitter GitHub <noreply@github.com> 1655645189 +0200\n\nRollup merge of #98146 - hoodmane:remove-memory-init-flag, r=petrochenkov\n\nRemove --memory-init-file flag when linking with Emscripten\n\nThis flag does nothing. It only applies when generating asmjs JavaScript.\n``@sbc100``\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/88cb597e7ae3f6b7d8d7e17f3f49cdf30eb726b8", "html_url": "https://github.com/rust-lang/rust/commit/88cb597e7ae3f6b7d8d7e17f3f49cdf30eb726b8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/88cb597e7ae3f6b7d8d7e17f3f49cdf30eb726b8/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6e8f541fffac4cbd0b342b2b106b6547b99781aa", "url": "https://api.github.com/repos/rust-lang/rust/commits/6e8f541fffac4cbd0b342b2b106b6547b99781aa", "html_url": "https://github.com/rust-lang/rust/commit/6e8f541fffac4cbd0b342b2b106b6547b99781aa"}, {"sha": "3fb6d45af9c9e8a682da743f6d920bb5b6dd66de", "url": "https://api.github.com/repos/rust-lang/rust/commits/3fb6d45af9c9e8a682da743f6d920bb5b6dd66de", "html_url": "https://github.com/rust-lang/rust/commit/3fb6d45af9c9e8a682da743f6d920bb5b6dd66de"}], "stats": {"total": 12, "additions": 5, "deletions": 7}, "files": [{"sha": "8ac5f094cf6ee0cbc36f5bf55448a5d404348717", "filename": "compiler/rustc_codegen_ssa/src/back/linker.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/88cb597e7ae3f6b7d8d7e17f3f49cdf30eb726b8/compiler%2Frustc_codegen_ssa%2Fsrc%2Fback%2Flinker.rs", "raw_url": "https://github.com/rust-lang/rust/raw/88cb597e7ae3f6b7d8d7e17f3f49cdf30eb726b8/compiler%2Frustc_codegen_ssa%2Fsrc%2Fback%2Flinker.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_ssa%2Fsrc%2Fback%2Flinker.rs?ref=88cb597e7ae3f6b7d8d7e17f3f49cdf30eb726b8", "patch": "@@ -1120,8 +1120,6 @@ impl<'a> Linker for EmLinker<'a> {\n             OptLevel::Size => \"-Os\",\n             OptLevel::SizeMin => \"-Oz\",\n         });\n-        // Unusable until https://github.com/rust-lang/rust/issues/38454 is resolved\n-        self.cmd.args(&[\"--memory-init-file\", \"0\"]);\n     }\n \n     fn pgo_gen(&mut self) {"}, {"sha": "269bf8b8bcd49814a371c96d360562758396c4e5", "filename": "compiler/rustc_target/src/spec/asmjs_unknown_emscripten.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/88cb597e7ae3f6b7d8d7e17f3f49cdf30eb726b8/compiler%2Frustc_target%2Fsrc%2Fspec%2Fasmjs_unknown_emscripten.rs", "raw_url": "https://github.com/rust-lang/rust/raw/88cb597e7ae3f6b7d8d7e17f3f49cdf30eb726b8/compiler%2Frustc_target%2Fsrc%2Fspec%2Fasmjs_unknown_emscripten.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fasmjs_unknown_emscripten.rs?ref=88cb597e7ae3f6b7d8d7e17f3f49cdf30eb726b8", "patch": "@@ -2,10 +2,10 @@ use super::{wasm32_unknown_emscripten, LinkerFlavor, Target};\n \n pub fn target() -> Target {\n     let mut target = wasm32_unknown_emscripten::target();\n-    target\n-        .post_link_args\n-        .entry(LinkerFlavor::Em)\n-        .or_default()\n-        .extend(vec![\"-s\".into(), \"WASM=0\".into()]);\n+    target.post_link_args.entry(LinkerFlavor::Em).or_default().extend(vec![\n+        \"-sWASM=0\".into(),\n+        \"--memory-init-file\".into(),\n+        \"0\".into(),\n+    ]);\n     target\n }"}]}