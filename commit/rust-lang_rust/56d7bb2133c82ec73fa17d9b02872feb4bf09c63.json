{"sha": "56d7bb2133c82ec73fa17d9b02872feb4bf09c63", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU2ZDdiYjIxMzNjODJlYzczZmExN2Q5YjAyODcyZmViNGJmMDljNjM=", "commit": {"author": {"name": "Eduard-Mihai Burtescu", "email": "edy.burt@gmail.com", "date": "2019-10-31T16:49:22Z"}, "committer": {"name": "Eduard-Mihai Burtescu", "email": "edy.burt@gmail.com", "date": "2019-10-31T17:08:12Z"}, "message": "Revert \"pre-expansion gate associated_type_bounds\"\n\nThis reverts commit c17a1fd7d0ef0f1f546445d0c8bdb11be55e4be7.", "tree": {"sha": "43b98bf8affbd606601c14b472108225cf339090", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/43b98bf8affbd606601c14b472108225cf339090"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/56d7bb2133c82ec73fa17d9b02872feb4bf09c63", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/56d7bb2133c82ec73fa17d9b02872feb4bf09c63", "html_url": "https://github.com/rust-lang/rust/commit/56d7bb2133c82ec73fa17d9b02872feb4bf09c63", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/56d7bb2133c82ec73fa17d9b02872feb4bf09c63/comments", "author": {"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}, "committer": {"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b05d36228ef95f4d628b7f8338ecca3b320806e4", "url": "https://api.github.com/repos/rust-lang/rust/commits/b05d36228ef95f4d628b7f8338ecca3b320806e4", "html_url": "https://github.com/rust-lang/rust/commit/b05d36228ef95f4d628b7f8338ecca3b320806e4"}], "stats": {"total": 30, "additions": 15, "deletions": 15}, "files": [{"sha": "a4fc6114b98509cf74aad453ebe33f55faf133e8", "filename": "src/libsyntax/feature_gate/check.rs", "status": "modified", "additions": 14, "deletions": 1, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/56d7bb2133c82ec73fa17d9b02872feb4bf09c63/src%2Flibsyntax%2Ffeature_gate%2Fcheck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/56d7bb2133c82ec73fa17d9b02872feb4bf09c63/src%2Flibsyntax%2Ffeature_gate%2Fcheck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Ffeature_gate%2Fcheck.rs?ref=56d7bb2133c82ec73fa17d9b02872feb4bf09c63", "patch": "@@ -3,7 +3,10 @@ use super::accepted::ACCEPTED_FEATURES;\n use super::removed::{REMOVED_FEATURES, STABLE_REMOVED_FEATURES};\n use super::builtin_attrs::{AttributeGate, BUILTIN_ATTRIBUTE_MAP};\n \n-use crate::ast::{self, NodeId, GenericParam, GenericParamKind, PatKind, RangeEnd, VariantData};\n+use crate::ast::{\n+    self, AssocTyConstraint, AssocTyConstraintKind, NodeId, GenericParam, GenericParamKind,\n+    PatKind, RangeEnd, VariantData,\n+};\n use crate::attr::{self, check_builtin_attribute};\n use crate::source_map::Spanned;\n use crate::edition::{ALL_EDITIONS, Edition};\n@@ -604,6 +607,16 @@ impl<'a> Visitor<'a> for PostExpansionVisitor<'a> {\n         visit::walk_generic_param(self, param)\n     }\n \n+    fn visit_assoc_ty_constraint(&mut self, constraint: &'a AssocTyConstraint) {\n+        match constraint.kind {\n+            AssocTyConstraintKind::Bound { .. } =>\n+                gate_feature_post!(&self, associated_type_bounds, constraint.span,\n+                    \"associated type bounds are unstable\"),\n+            _ => {}\n+        }\n+        visit::walk_assoc_ty_constraint(self, constraint)\n+    }\n+\n     fn visit_trait_item(&mut self, ti: &'a ast::TraitItem) {\n         match ti.kind {\n             ast::TraitItemKind::Method(ref sig, ref block) => {"}, {"sha": "0faa9090f4ebcfd898a632a1faf6d6dc6448d5be", "filename": "src/test/ui/feature-gates/feature-gate-associated_type_bounds.rs", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/56d7bb2133c82ec73fa17d9b02872feb4bf09c63/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-associated_type_bounds.rs", "raw_url": "https://github.com/rust-lang/rust/raw/56d7bb2133c82ec73fa17d9b02872feb4bf09c63/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-associated_type_bounds.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-associated_type_bounds.rs?ref=56d7bb2133c82ec73fa17d9b02872feb4bf09c63", "patch": "@@ -70,7 +70,3 @@ fn main() {\n     // FIXME: uncomment when `impl_trait_in_bindings` feature is fixed.\n     // let _: &dyn Tr1<As1: Copy> = &S1;\n }\n-\n-macro_rules! accept_path { ($p:path) => {} }\n-accept_path!(Iterator<Item: Ord>);\n-//~^ ERROR associated type bounds are unstable"}, {"sha": "84af2a0163ae44dbc6948aa69624f88e7bfb11bc", "filename": "src/test/ui/feature-gates/feature-gate-associated_type_bounds.stderr", "status": "modified", "additions": 1, "deletions": 10, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/56d7bb2133c82ec73fa17d9b02872feb4bf09c63/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-associated_type_bounds.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/56d7bb2133c82ec73fa17d9b02872feb4bf09c63/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-associated_type_bounds.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-associated_type_bounds.stderr?ref=56d7bb2133c82ec73fa17d9b02872feb4bf09c63", "patch": "@@ -115,15 +115,6 @@ LL |     let _: impl Tr1<As1: Copy> = S1;\n    = note: for more information, see https://github.com/rust-lang/rust/issues/52662\n    = help: add `#![feature(associated_type_bounds)]` to the crate attributes to enable\n \n-error[E0658]: associated type bounds are unstable\n-  --> $DIR/feature-gate-associated_type_bounds.rs:75:23\n-   |\n-LL | accept_path!(Iterator<Item: Ord>);\n-   |                       ^^^^^^^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/52662\n-   = help: add `#![feature(associated_type_bounds)]` to the crate attributes to enable\n-\n error[E0562]: `impl Trait` not allowed outside of function and inherent method return types\n   --> $DIR/feature-gate-associated_type_bounds.rs:54:14\n    |\n@@ -148,7 +139,7 @@ LL |     let _: impl Tr1<As1: Copy> = S1;\n    |\n    = help: add `#![feature(impl_trait_in_bindings)]` to the crate attributes to enable\n \n-error: aborting due to 17 previous errors\n+error: aborting due to 16 previous errors\n \n Some errors have detailed explanations: E0562, E0658.\n For more information about an error, try `rustc --explain E0562`."}]}