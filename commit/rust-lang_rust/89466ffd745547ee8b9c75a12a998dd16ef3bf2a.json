{"sha": "89466ffd745547ee8b9c75a12a998dd16ef3bf2a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg5NDY2ZmZkNzQ1NTQ3ZWU4YjljNzVhMTJhOTk4ZGQxNmVmM2JmMmE=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-10-13T19:25:57Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-10-13T19:25:57Z"}, "message": "Rename rustc::middle::unsafeck to fn_usage\n\nI'm going to add further checks unrelated to unsafe.\n\nIssue #1038", "tree": {"sha": "ee3f37eab9f72f080d7f31c66a337b0331bfe1c0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ee3f37eab9f72f080d7f31c66a337b0331bfe1c0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/89466ffd745547ee8b9c75a12a998dd16ef3bf2a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/89466ffd745547ee8b9c75a12a998dd16ef3bf2a", "html_url": "https://github.com/rust-lang/rust/commit/89466ffd745547ee8b9c75a12a998dd16ef3bf2a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/89466ffd745547ee8b9c75a12a998dd16ef3bf2a/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "60cfa91897b90d37ef85068f93c01b2b99c30e10", "url": "https://api.github.com/repos/rust-lang/rust/commits/60cfa91897b90d37ef85068f93c01b2b99c30e10", "html_url": "https://github.com/rust-lang/rust/commit/60cfa91897b90d37ef85068f93c01b2b99c30e10"}], "stats": {"total": 30, "additions": 15, "deletions": 15}, "files": [{"sha": "2e2bf37da778700aa0a729cb1c07bd5730762985", "filename": "src/comp/driver/rustc.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/89466ffd745547ee8b9c75a12a998dd16ef3bf2a/src%2Fcomp%2Fdriver%2Frustc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/89466ffd745547ee8b9c75a12a998dd16ef3bf2a/src%2Fcomp%2Fdriver%2Frustc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fdriver%2Frustc.rs?ref=89466ffd745547ee8b9c75a12a998dd16ef3bf2a", "patch": "@@ -5,7 +5,7 @@ import metadata::{creader, cstore};\n import syntax::parse::{parser, token};\n import syntax::{ast, codemap};\n import front::attr;\n-import middle::{trans, resolve, freevars, kind, ty, typeck, unsafeck};\n+import middle::{trans, resolve, freevars, kind, ty, typeck, fn_usage};\n import middle::tstate::ck;\n import syntax::print::{pp, pprust};\n import util::{ppaux, common, filesearch};\n@@ -129,8 +129,8 @@ fn compile_input(sess: session::session, cfg: ast::crate_cfg, input: str,\n              bind freevars::annotate_freevars(def_map, crate));\n     let ty_cx = ty::mk_ctxt(sess, def_map, ext_map, ast_map, freevars);\n     time(time_passes, \"typechecking\", bind typeck::check_crate(ty_cx, crate));\n-    time(time_passes, \"unsafechecking\",\n-         bind unsafeck::unsafeck_crate(ty_cx, crate));\n+    time(time_passes, \"function usage\",\n+         bind fn_usage::check_crate_fn_usage(ty_cx, crate));\n     time(time_passes, \"alt checking\",\n          bind middle::check_alt::check_crate(ty_cx, crate));\n     if sess.get_opts().run_typestate {"}, {"sha": "3e170f19d16ac21ce0fa4fff3f54222ff52448cd", "filename": "src/comp/middle/fn_usage.rs", "status": "renamed", "additions": 11, "deletions": 11, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/89466ffd745547ee8b9c75a12a998dd16ef3bf2a/src%2Fcomp%2Fmiddle%2Ffn_usage.rs", "raw_url": "https://github.com/rust-lang/rust/raw/89466ffd745547ee8b9c75a12a998dd16ef3bf2a/src%2Fcomp%2Fmiddle%2Ffn_usage.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Ffn_usage.rs?ref=89466ffd745547ee8b9c75a12a998dd16ef3bf2a", "patch": "@@ -3,22 +3,22 @@ import syntax::visit;\n import std::option::some;\n import syntax::print::pprust::{expr_to_str, path_to_str};\n \n-export unsafeck_crate;\n+export check_crate_fn_usage;\n \n-type unsafe_ctx = {\n+type fn_usage_ctx = {\n     tcx: ty::ctxt,\n     unsafe_fn_legal: bool\n };\n \n-fn unsafeck_view_item(_vi: @ast::view_item,\n-                      _ctx: unsafe_ctx,\n-                      _v: visit::vt<unsafe_ctx>) {\n+fn fn_usage_view_item(_vi: @ast::view_item,\n+                      _ctx: fn_usage_ctx,\n+                      _v: visit::vt<fn_usage_ctx>) {\n     // Ignore paths that appear in use, import, etc\n }\n \n-fn unsafeck_expr(expr: @ast::expr,\n-                 ctx: unsafe_ctx,\n-                 v: visit::vt<unsafe_ctx>) {\n+fn fn_usage_expr(expr: @ast::expr,\n+                 ctx: fn_usage_ctx,\n+                 v: visit::vt<fn_usage_ctx>) {\n     alt expr.node {\n       ast::expr_path(path) {\n         if !ctx.unsafe_fn_legal {\n@@ -51,11 +51,11 @@ fn unsafeck_expr(expr: @ast::expr,\n     }\n }\n \n-fn unsafeck_crate(tcx: ty::ctxt, crate: @ast::crate) {\n+fn check_crate_fn_usage(tcx: ty::ctxt, crate: @ast::crate) {\n     let visit =\n         visit::mk_vt(\n-            @{visit_expr: unsafeck_expr,\n-              visit_view_item: unsafeck_view_item\n+            @{visit_expr: fn_usage_expr,\n+              visit_view_item: fn_usage_view_item\n                   with *visit::default_visitor()});\n     let ctx = {tcx: tcx, unsafe_fn_legal: false};\n     visit::visit_crate(*crate, ctx, visit);", "previous_filename": "src/comp/middle/unsafeck.rs"}, {"sha": "34170db8131feab70da76da798258cbbae96d005", "filename": "src/comp/rustc.rc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/89466ffd745547ee8b9c75a12a998dd16ef3bf2a/src%2Fcomp%2Frustc.rc", "raw_url": "https://github.com/rust-lang/rust/raw/89466ffd745547ee8b9c75a12a998dd16ef3bf2a/src%2Fcomp%2Frustc.rc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Frustc.rc?ref=89466ffd745547ee8b9c75a12a998dd16ef3bf2a", "patch": "@@ -25,7 +25,7 @@ mod middle {\n     mod ast_map;\n     mod resolve;\n     mod typeck;\n-    mod unsafeck;\n+    mod fn_usage;\n     mod check_alt;\n     mod mut;\n     mod alias;"}]}