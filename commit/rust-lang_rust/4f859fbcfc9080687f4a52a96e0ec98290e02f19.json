{"sha": "4f859fbcfc9080687f4a52a96e0ec98290e02f19", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRmODU5ZmJjZmM5MDgwNjg3ZjRhNTJhOTZlMGVjOTgyOTBlMDJmMTk=", "commit": {"author": {"name": "Christiaan Dirkx", "email": "christiaan@dirkx.email", "date": "2020-09-03T22:13:25Z"}, "committer": {"name": "Christiaan", "email": "christiaan@dirkx.email", "date": "2020-09-20T20:42:14Z"}, "message": "Move const tests for `Option` to `library\\core`\n\nPart of #76268", "tree": {"sha": "cb0e4d9c245ac6cd39902f08daf86f9b3269e04b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cb0e4d9c245ac6cd39902f08daf86f9b3269e04b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4f859fbcfc9080687f4a52a96e0ec98290e02f19", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4f859fbcfc9080687f4a52a96e0ec98290e02f19", "html_url": "https://github.com/rust-lang/rust/commit/4f859fbcfc9080687f4a52a96e0ec98290e02f19", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4f859fbcfc9080687f4a52a96e0ec98290e02f19/comments", "author": {"login": "CDirkx", "id": 11176562, "node_id": "MDQ6VXNlcjExMTc2NTYy", "avatar_url": "https://avatars.githubusercontent.com/u/11176562?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CDirkx", "html_url": "https://github.com/CDirkx", "followers_url": "https://api.github.com/users/CDirkx/followers", "following_url": "https://api.github.com/users/CDirkx/following{/other_user}", "gists_url": "https://api.github.com/users/CDirkx/gists{/gist_id}", "starred_url": "https://api.github.com/users/CDirkx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CDirkx/subscriptions", "organizations_url": "https://api.github.com/users/CDirkx/orgs", "repos_url": "https://api.github.com/users/CDirkx/repos", "events_url": "https://api.github.com/users/CDirkx/events{/privacy}", "received_events_url": "https://api.github.com/users/CDirkx/received_events", "type": "User", "site_admin": false}, "committer": {"login": "CDirkx", "id": 11176562, "node_id": "MDQ6VXNlcjExMTc2NTYy", "avatar_url": "https://avatars.githubusercontent.com/u/11176562?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CDirkx", "html_url": "https://github.com/CDirkx", "followers_url": "https://api.github.com/users/CDirkx/followers", "following_url": "https://api.github.com/users/CDirkx/following{/other_user}", "gists_url": "https://api.github.com/users/CDirkx/gists{/gist_id}", "starred_url": "https://api.github.com/users/CDirkx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CDirkx/subscriptions", "organizations_url": "https://api.github.com/users/CDirkx/orgs", "repos_url": "https://api.github.com/users/CDirkx/repos", "events_url": "https://api.github.com/users/CDirkx/events{/privacy}", "received_events_url": "https://api.github.com/users/CDirkx/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9486f728790e1fb15bb88db672d2f164078a19eb", "url": "https://api.github.com/repos/rust-lang/rust/commits/9486f728790e1fb15bb88db672d2f164078a19eb", "html_url": "https://github.com/rust-lang/rust/commit/9486f728790e1fb15bb88db672d2f164078a19eb"}], "stats": {"total": 28, "additions": 16, "deletions": 12}, "files": [{"sha": "9e86e07dd91a3cf51cc9b938f5fc270fb7594845", "filename": "library/core/tests/option.rs", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/4f859fbcfc9080687f4a52a96e0ec98290e02f19/library%2Fcore%2Ftests%2Foption.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f859fbcfc9080687f4a52a96e0ec98290e02f19/library%2Fcore%2Ftests%2Foption.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Ftests%2Foption.rs?ref=4f859fbcfc9080687f4a52a96e0ec98290e02f19", "patch": "@@ -356,3 +356,19 @@ fn test_replace() {\n     assert_eq!(x, Some(3));\n     assert_eq!(old, None);\n }\n+\n+#[test]\n+fn option_const() {\n+    // test that the methods of `Option` are usable in a const context\n+\n+    const OPTION: Option<usize> = Some(32);\n+\n+    const REF: Option<&usize> = OPTION.as_ref();\n+    assert_eq!(REF, Some(&32));\n+\n+    const IS_SOME: bool = OPTION.is_some();\n+    assert!(IS_SOME);\n+\n+    const IS_NONE: bool = OPTION.is_none();\n+    assert!(!IS_NONE);\n+}"}, {"sha": "793f78c8d20fa0c6dcc392e4867c6536f47734f3", "filename": "src/test/ui/consts/const-option.rs", "status": "removed", "additions": 0, "deletions": 12, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/9486f728790e1fb15bb88db672d2f164078a19eb/src%2Ftest%2Fui%2Fconsts%2Fconst-option.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9486f728790e1fb15bb88db672d2f164078a19eb/src%2Ftest%2Fui%2Fconsts%2Fconst-option.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-option.rs?ref=9486f728790e1fb15bb88db672d2f164078a19eb", "patch": "@@ -1,12 +0,0 @@\n-// run-pass\n-\n-const X: Option<i32> = Some(32);\n-const Y: Option<&i32> = X.as_ref();\n-\n-const IS_SOME: bool = X.is_some();\n-const IS_NONE: bool = Y.is_none();\n-\n-fn main() {\n-    assert!(IS_SOME);\n-    assert!(!IS_NONE)\n-}"}]}