{"sha": "c8de552c0134896c8c804c7ca74555bd300ee937", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM4ZGU1NTJjMDEzNDg5NmM4YzgwNGM3Y2E3NDU1NWJkMzAwZWU5Mzc=", "commit": {"author": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2019-10-27T15:55:35Z"}, "committer": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2020-02-26T13:41:05Z"}, "message": "Tls support", "tree": {"sha": "2fa57c5c8ced519e4290e0f56f6d59eb5f0b54e6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2fa57c5c8ced519e4290e0f56f6d59eb5f0b54e6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c8de552c0134896c8c804c7ca74555bd300ee937", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c8de552c0134896c8c804c7ca74555bd300ee937", "html_url": "https://github.com/rust-lang/rust/commit/c8de552c0134896c8c804c7ca74555bd300ee937", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c8de552c0134896c8c804c7ca74555bd300ee937/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0e0afb4f1fe47638aa59e41ce0b9a775bb4c15f6", "url": "https://api.github.com/repos/rust-lang/rust/commits/0e0afb4f1fe47638aa59e41ce0b9a775bb4c15f6", "html_url": "https://github.com/rust-lang/rust/commit/0e0afb4f1fe47638aa59e41ce0b9a775bb4c15f6"}], "stats": {"total": 477, "additions": 270, "deletions": 207}, "files": [{"sha": "881b953884b29a2829f6be82d3ffb2850f151c29", "filename": "Cargo.lock", "status": "modified", "additions": 153, "deletions": 164, "changes": 317, "blob_url": "https://github.com/rust-lang/rust/blob/c8de552c0134896c8c804c7ca74555bd300ee937/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/c8de552c0134896c8c804c7ca74555bd300ee937/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=c8de552c0134896c8c804c7ca74555bd300ee937", "patch": "@@ -4,448 +4,437 @@\n name = \"ar\"\n version = \"0.8.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"450575f58f7bee32816abbff470cbc47797397c2a81e0eaced4b98436daf52e1\"\n \n [[package]]\n name = \"autocfg\"\n version = \"1.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"f8aac770f1885fd7e387acedd76065302551364496e46b3dd00860b2f8359b9d\"\n \n [[package]]\n name = \"bitflags\"\n version = \"1.2.1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"cf1de2fe8c75bc145a2f577add951f8134889b4795d47466a54a5c846d691693\"\n \n [[package]]\n name = \"byteorder\"\n version = \"1.3.4\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"08c48aae112d48ed9f069b33538ea9e3e90aa263cfa3d1c24309612b1f7472de\"\n \n [[package]]\n name = \"cc\"\n version = \"1.0.50\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"95e28fa049fda1c330bcf9d723be7663a899c4679724b34c81e9f5a326aab8cd\"\n \n [[package]]\n name = \"cfg-if\"\n version = \"0.1.10\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"4785bdd1c96b2a846b2bd7cc02e86b6b3dbf14e7e53446c4f54c92a361040822\"\n \n [[package]]\n name = \"cranelift-bforest\"\n-version = \"0.58.0\"\n-source = \"git+https://github.com/bytecodealliance/cranelift/#5ad55057f18652ad0a4f270cd9b2876eb051c7d0\"\n+version = \"0.59.0\"\n+source = \"git+https://github.com/bytecodealliance/cranelift/#1d144eeacffb1997cc567b7d518f195932ee3d92\"\n dependencies = [\n- \"cranelift-entity 0.58.0 (git+https://github.com/bytecodealliance/cranelift/)\",\n+ \"cranelift-entity\",\n ]\n \n [[package]]\n name = \"cranelift-codegen\"\n-version = \"0.58.0\"\n-source = \"git+https://github.com/bytecodealliance/cranelift/#5ad55057f18652ad0a4f270cd9b2876eb051c7d0\"\n+version = \"0.59.0\"\n+source = \"git+https://github.com/bytecodealliance/cranelift/#1d144eeacffb1997cc567b7d518f195932ee3d92\"\n dependencies = [\n- \"byteorder 1.3.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"cranelift-bforest 0.58.0 (git+https://github.com/bytecodealliance/cranelift/)\",\n- \"cranelift-codegen-meta 0.58.0 (git+https://github.com/bytecodealliance/cranelift/)\",\n- \"cranelift-codegen-shared 0.58.0 (git+https://github.com/bytecodealliance/cranelift/)\",\n- \"cranelift-entity 0.58.0 (git+https://github.com/bytecodealliance/cranelift/)\",\n- \"gimli 0.20.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"log 0.4.8 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"smallvec 1.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"target-lexicon 0.10.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"thiserror 1.0.11 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"byteorder\",\n+ \"cranelift-bforest\",\n+ \"cranelift-codegen-meta\",\n+ \"cranelift-codegen-shared\",\n+ \"cranelift-entity\",\n+ \"gimli\",\n+ \"log\",\n+ \"smallvec\",\n+ \"target-lexicon\",\n+ \"thiserror\",\n ]\n \n [[package]]\n name = \"cranelift-codegen-meta\"\n-version = \"0.58.0\"\n-source = \"git+https://github.com/bytecodealliance/cranelift/#5ad55057f18652ad0a4f270cd9b2876eb051c7d0\"\n+version = \"0.59.0\"\n+source = \"git+https://github.com/bytecodealliance/cranelift/#1d144eeacffb1997cc567b7d518f195932ee3d92\"\n dependencies = [\n- \"cranelift-codegen-shared 0.58.0 (git+https://github.com/bytecodealliance/cranelift/)\",\n- \"cranelift-entity 0.58.0 (git+https://github.com/bytecodealliance/cranelift/)\",\n+ \"cranelift-codegen-shared\",\n+ \"cranelift-entity\",\n ]\n \n [[package]]\n name = \"cranelift-codegen-shared\"\n-version = \"0.58.0\"\n-source = \"git+https://github.com/bytecodealliance/cranelift/#5ad55057f18652ad0a4f270cd9b2876eb051c7d0\"\n+version = \"0.59.0\"\n+source = \"git+https://github.com/bytecodealliance/cranelift/#1d144eeacffb1997cc567b7d518f195932ee3d92\"\n \n [[package]]\n name = \"cranelift-entity\"\n-version = \"0.58.0\"\n-source = \"git+https://github.com/bytecodealliance/cranelift/#5ad55057f18652ad0a4f270cd9b2876eb051c7d0\"\n+version = \"0.59.0\"\n+source = \"git+https://github.com/bytecodealliance/cranelift/#1d144eeacffb1997cc567b7d518f195932ee3d92\"\n \n [[package]]\n name = \"cranelift-frontend\"\n-version = \"0.58.0\"\n-source = \"git+https://github.com/bytecodealliance/cranelift/#5ad55057f18652ad0a4f270cd9b2876eb051c7d0\"\n+version = \"0.59.0\"\n+source = \"git+https://github.com/bytecodealliance/cranelift/#1d144eeacffb1997cc567b7d518f195932ee3d92\"\n dependencies = [\n- \"cranelift-codegen 0.58.0 (git+https://github.com/bytecodealliance/cranelift/)\",\n- \"log 0.4.8 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"smallvec 1.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"target-lexicon 0.10.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cranelift-codegen\",\n+ \"log\",\n+ \"smallvec\",\n+ \"target-lexicon\",\n ]\n \n [[package]]\n name = \"cranelift-module\"\n-version = \"0.58.0\"\n-source = \"git+https://github.com/bytecodealliance/cranelift/#5ad55057f18652ad0a4f270cd9b2876eb051c7d0\"\n+version = \"0.59.0\"\n+source = \"git+https://github.com/bytecodealliance/cranelift/#1d144eeacffb1997cc567b7d518f195932ee3d92\"\n dependencies = [\n- \"cranelift-codegen 0.58.0 (git+https://github.com/bytecodealliance/cranelift/)\",\n- \"cranelift-entity 0.58.0 (git+https://github.com/bytecodealliance/cranelift/)\",\n- \"log 0.4.8 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"thiserror 1.0.11 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cranelift-codegen\",\n+ \"cranelift-entity\",\n+ \"log\",\n+ \"thiserror\",\n ]\n \n [[package]]\n name = \"cranelift-native\"\n-version = \"0.58.0\"\n-source = \"git+https://github.com/bytecodealliance/cranelift/#5ad55057f18652ad0a4f270cd9b2876eb051c7d0\"\n+version = \"0.59.0\"\n+source = \"git+https://github.com/bytecodealliance/cranelift/#1d144eeacffb1997cc567b7d518f195932ee3d92\"\n dependencies = [\n- \"cranelift-codegen 0.58.0 (git+https://github.com/bytecodealliance/cranelift/)\",\n- \"raw-cpuid 7.0.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"target-lexicon 0.10.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cranelift-codegen\",\n+ \"raw-cpuid\",\n+ \"target-lexicon\",\n ]\n \n [[package]]\n name = \"cranelift-object\"\n-version = \"0.58.0\"\n-source = \"git+https://github.com/bytecodealliance/cranelift/#5ad55057f18652ad0a4f270cd9b2876eb051c7d0\"\n+version = \"0.59.0\"\n+source = \"git+https://github.com/bytecodealliance/cranelift/#1d144eeacffb1997cc567b7d518f195932ee3d92\"\n dependencies = [\n- \"cranelift-codegen 0.58.0 (git+https://github.com/bytecodealliance/cranelift/)\",\n- \"cranelift-module 0.58.0 (git+https://github.com/bytecodealliance/cranelift/)\",\n- \"object 0.17.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"target-lexicon 0.10.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cranelift-codegen\",\n+ \"cranelift-module\",\n+ \"goblin\",\n+ \"object\",\n+ \"target-lexicon\",\n ]\n \n [[package]]\n name = \"cranelift-simplejit\"\n-version = \"0.58.0\"\n-source = \"git+https://github.com/bytecodealliance/cranelift/#5ad55057f18652ad0a4f270cd9b2876eb051c7d0\"\n+version = \"0.59.0\"\n+source = \"git+https://github.com/bytecodealliance/cranelift/#1d144eeacffb1997cc567b7d518f195932ee3d92\"\n dependencies = [\n- \"cranelift-codegen 0.58.0 (git+https://github.com/bytecodealliance/cranelift/)\",\n- \"cranelift-module 0.58.0 (git+https://github.com/bytecodealliance/cranelift/)\",\n- \"cranelift-native 0.58.0 (git+https://github.com/bytecodealliance/cranelift/)\",\n- \"errno 0.2.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.67 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"region 2.1.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"target-lexicon 0.10.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"winapi 0.3.8 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cranelift-codegen\",\n+ \"cranelift-module\",\n+ \"cranelift-native\",\n+ \"errno\",\n+ \"libc\",\n+ \"region\",\n+ \"target-lexicon\",\n+ \"winapi\",\n ]\n \n [[package]]\n name = \"crc32fast\"\n version = \"1.2.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"ba125de2af0df55319f41944744ad91c71113bf74a4646efff39afe1f6842db1\"\n dependencies = [\n- \"cfg-if 0.1.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cfg-if\",\n ]\n \n [[package]]\n name = \"errno\"\n version = \"0.2.4\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"c2a071601ed01b988f896ab14b95e67335d1eeb50190932a1320f7fe3cadc84e\"\n dependencies = [\n- \"errno-dragonfly 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.67 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"winapi 0.3.8 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"errno-dragonfly\",\n+ \"libc\",\n+ \"winapi\",\n ]\n \n [[package]]\n name = \"errno-dragonfly\"\n version = \"0.1.1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"14ca354e36190500e1e1fb267c647932382b54053c50b14970856c0b00a35067\"\n dependencies = [\n- \"gcc 0.3.55 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.67 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"gcc\",\n+ \"libc\",\n ]\n \n [[package]]\n name = \"gcc\"\n version = \"0.3.55\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"8f5f3913fa0bfe7ee1fd8248b6b9f42a5af4b9d65ec2dd2c3c26132b950ecfc2\"\n \n [[package]]\n name = \"gimli\"\n version = \"0.20.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"81dd6190aad0f05ddbbf3245c54ed14ca4aa6dd32f22312b70d8f168c3e3e633\"\n dependencies = [\n- \"byteorder 1.3.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"indexmap 1.3.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"byteorder\",\n+ \"indexmap\",\n ]\n \n [[package]]\n name = \"goblin\"\n version = \"0.1.3\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"3081214398d39e4bd7f2c1975f0488ed04614ffdd976c6fc7a0708278552c0da\"\n dependencies = [\n- \"log 0.4.8 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"plain 0.2.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"scroll 0.10.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"log\",\n+ \"plain\",\n+ \"scroll\",\n ]\n \n [[package]]\n name = \"indexmap\"\n version = \"1.3.2\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"076f042c5b7b98f31d205f1249267e12a6518c1481e9dae9764af19b707d2292\"\n dependencies = [\n- \"autocfg 1.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"autocfg\",\n ]\n \n [[package]]\n name = \"libc\"\n version = \"0.2.67\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"eb147597cdf94ed43ab7a9038716637d2d1bf2bc571da995d0028dec06bd3018\"\n \n [[package]]\n name = \"libloading\"\n version = \"0.5.2\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"f2b111a074963af1d37a139918ac6d49ad1d0d5e47f72fd55388619691a7d753\"\n dependencies = [\n- \"cc 1.0.50 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"winapi 0.3.8 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cc\",\n+ \"winapi\",\n ]\n \n [[package]]\n name = \"log\"\n version = \"0.4.8\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"14b6052be84e6b71ab17edffc2eeabf5c2c3ae1fdb464aae35ac50c67a44e1f7\"\n dependencies = [\n- \"cfg-if 0.1.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cfg-if\",\n ]\n \n [[package]]\n name = \"mach\"\n version = \"0.2.3\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"86dd2487cdfea56def77b88438a2c915fb45113c5319bfe7e14306ca4cd0b0e1\"\n dependencies = [\n- \"libc 0.2.67 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc\",\n ]\n \n [[package]]\n name = \"object\"\n version = \"0.17.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"ea44a4fd660ab0f38434934ca0212e90fbeaaee54126ef20a3451c30c95bafae\"\n dependencies = [\n- \"crc32fast 1.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"goblin 0.1.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"indexmap 1.3.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"scroll 0.10.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"target-lexicon 0.10.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"uuid 0.8.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"crc32fast\",\n+ \"goblin\",\n+ \"indexmap\",\n+ \"scroll\",\n+ \"target-lexicon\",\n+ \"uuid\",\n ]\n \n [[package]]\n name = \"plain\"\n version = \"0.2.3\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"b4596b6d070b27117e987119b4dac604f3c58cfb0b191112e24771b2faeac1a6\"\n \n [[package]]\n name = \"proc-macro2\"\n version = \"1.0.8\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"3acb317c6ff86a4e579dfa00fc5e6cca91ecbb4e7eb2df0468805b674eb88548\"\n dependencies = [\n- \"unicode-xid 0.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"unicode-xid\",\n ]\n \n [[package]]\n name = \"quote\"\n version = \"1.0.2\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"053a8c8bcc71fcce321828dc897a98ab9760bef03a4fc36693c231e5b3216cfe\"\n dependencies = [\n- \"proc-macro2 1.0.8 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"proc-macro2\",\n ]\n \n [[package]]\n name = \"raw-cpuid\"\n version = \"7.0.3\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"b4a349ca83373cfa5d6dbb66fd76e58b2cca08da71a5f6400de0a0a6a9bceeaf\"\n dependencies = [\n- \"bitflags 1.2.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"cc 1.0.50 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"rustc_version 0.2.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"bitflags\",\n+ \"cc\",\n+ \"rustc_version\",\n ]\n \n [[package]]\n name = \"region\"\n version = \"2.1.2\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"448e868c6e4cfddfa49b6a72c95906c04e8547465e9536575b95c70a4044f856\"\n dependencies = [\n- \"bitflags 1.2.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.67 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"mach 0.2.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"winapi 0.3.8 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"bitflags\",\n+ \"libc\",\n+ \"mach\",\n+ \"winapi\",\n ]\n \n [[package]]\n name = \"rustc_codegen_cranelift\"\n version = \"0.1.0\"\n dependencies = [\n- \"ar 0.8.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"byteorder 1.3.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"cranelift-codegen 0.58.0 (git+https://github.com/bytecodealliance/cranelift/)\",\n- \"cranelift-frontend 0.58.0 (git+https://github.com/bytecodealliance/cranelift/)\",\n- \"cranelift-module 0.58.0 (git+https://github.com/bytecodealliance/cranelift/)\",\n- \"cranelift-object 0.58.0 (git+https://github.com/bytecodealliance/cranelift/)\",\n- \"cranelift-simplejit 0.58.0 (git+https://github.com/bytecodealliance/cranelift/)\",\n- \"gimli 0.20.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"indexmap 1.3.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libloading 0.5.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"object 0.17.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"target-lexicon 0.10.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"ar\",\n+ \"byteorder\",\n+ \"cranelift-codegen\",\n+ \"cranelift-frontend\",\n+ \"cranelift-module\",\n+ \"cranelift-object\",\n+ \"cranelift-simplejit\",\n+ \"gimli\",\n+ \"indexmap\",\n+ \"libloading\",\n+ \"object\",\n+ \"target-lexicon\",\n ]\n \n [[package]]\n name = \"rustc_version\"\n version = \"0.2.3\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"138e3e0acb6c9fb258b19b67cb8abd63c00679d2851805ea151465464fe9030a\"\n dependencies = [\n- \"semver 0.9.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"semver\",\n ]\n \n [[package]]\n name = \"scroll\"\n version = \"0.10.1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"abb2332cb595d33f7edd5700f4cbf94892e680c7f0ae56adab58a35190b66cb1\"\n dependencies = [\n- \"scroll_derive 0.10.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"scroll_derive\",\n ]\n \n [[package]]\n name = \"scroll_derive\"\n version = \"0.10.1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"f8584eea9b9ff42825b46faf46a8c24d2cff13ec152fa2a50df788b87c07ee28\"\n dependencies = [\n- \"proc-macro2 1.0.8 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"quote 1.0.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"syn 1.0.15 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"proc-macro2\",\n+ \"quote\",\n+ \"syn\",\n ]\n \n [[package]]\n name = \"semver\"\n version = \"0.9.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"1d7eb9ef2c18661902cc47e535f9bc51b78acd254da71d375c2f6720d9a40403\"\n dependencies = [\n- \"semver-parser 0.7.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"semver-parser\",\n ]\n \n [[package]]\n name = \"semver-parser\"\n version = \"0.7.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"388a1df253eca08550bef6c72392cfe7c30914bf41df5269b68cbd6ff8f570a3\"\n \n [[package]]\n name = \"smallvec\"\n version = \"1.2.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"5c2fb2ec9bcd216a5b0d0ccf31ab17b5ed1d627960edff65bbe95d3ce221cefc\"\n \n [[package]]\n name = \"syn\"\n version = \"1.0.15\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"7a0294dc449adc58bb6592fff1a23d3e5e6e235afc6a0ffca2657d19e7bbffe5\"\n dependencies = [\n- \"proc-macro2 1.0.8 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"quote 1.0.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"unicode-xid 0.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"proc-macro2\",\n+ \"quote\",\n+ \"unicode-xid\",\n ]\n \n [[package]]\n name = \"target-lexicon\"\n version = \"0.10.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"ab0e7238dcc7b40a7be719a25365910f6807bd864f4cce6b2e6b873658e2b19d\"\n \n [[package]]\n name = \"thiserror\"\n version = \"1.0.11\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"ee14bf8e6767ab4c687c9e8bc003879e042a96fd67a3ba5934eadb6536bef4db\"\n dependencies = [\n- \"thiserror-impl 1.0.11 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"thiserror-impl\",\n ]\n \n [[package]]\n name = \"thiserror-impl\"\n version = \"1.0.11\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"a7b51e1fbc44b5a0840be594fbc0f960be09050f2617e61e6aa43bef97cd3ef4\"\n dependencies = [\n- \"proc-macro2 1.0.8 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"quote 1.0.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"syn 1.0.15 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"proc-macro2\",\n+ \"quote\",\n+ \"syn\",\n ]\n \n [[package]]\n name = \"unicode-xid\"\n version = \"0.2.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"826e7639553986605ec5979c7dd957c7895e93eabed50ab2ffa7f6128a75097c\"\n \n [[package]]\n name = \"uuid\"\n version = \"0.8.1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"9fde2f6a4bea1d6e007c4ad38c6839fa71cbb63b6dbf5b595aa38dc9b1093c11\"\n \n [[package]]\n name = \"winapi\"\n version = \"0.3.8\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"8093091eeb260906a183e6ae1abdba2ef5ef2257a21801128899c3fc699229c6\"\n dependencies = [\n- \"winapi-i686-pc-windows-gnu 0.4.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"winapi-x86_64-pc-windows-gnu 0.4.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"winapi-i686-pc-windows-gnu\",\n+ \"winapi-x86_64-pc-windows-gnu\",\n ]\n \n [[package]]\n name = \"winapi-i686-pc-windows-gnu\"\n version = \"0.4.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"ac3b87c63620426dd9b991e5ce0329eff545bccbbb34f3be09ff6fb6ab51b7b6\"\n \n [[package]]\n name = \"winapi-x86_64-pc-windows-gnu\"\n version = \"0.4.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-\n-[metadata]\n-\"checksum ar 0.8.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"450575f58f7bee32816abbff470cbc47797397c2a81e0eaced4b98436daf52e1\"\n-\"checksum autocfg 1.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"f8aac770f1885fd7e387acedd76065302551364496e46b3dd00860b2f8359b9d\"\n-\"checksum bitflags 1.2.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"cf1de2fe8c75bc145a2f577add951f8134889b4795d47466a54a5c846d691693\"\n-\"checksum byteorder 1.3.4 (registry+https://github.com/rust-lang/crates.io-index)\" = \"08c48aae112d48ed9f069b33538ea9e3e90aa263cfa3d1c24309612b1f7472de\"\n-\"checksum cc 1.0.50 (registry+https://github.com/rust-lang/crates.io-index)\" = \"95e28fa049fda1c330bcf9d723be7663a899c4679724b34c81e9f5a326aab8cd\"\n-\"checksum cfg-if 0.1.10 (registry+https://github.com/rust-lang/crates.io-index)\" = \"4785bdd1c96b2a846b2bd7cc02e86b6b3dbf14e7e53446c4f54c92a361040822\"\n-\"checksum cranelift-bforest 0.58.0 (git+https://github.com/bytecodealliance/cranelift/)\" = \"<none>\"\n-\"checksum cranelift-codegen 0.58.0 (git+https://github.com/bytecodealliance/cranelift/)\" = \"<none>\"\n-\"checksum cranelift-codegen-meta 0.58.0 (git+https://github.com/bytecodealliance/cranelift/)\" = \"<none>\"\n-\"checksum cranelift-codegen-shared 0.58.0 (git+https://github.com/bytecodealliance/cranelift/)\" = \"<none>\"\n-\"checksum cranelift-entity 0.58.0 (git+https://github.com/bytecodealliance/cranelift/)\" = \"<none>\"\n-\"checksum cranelift-frontend 0.58.0 (git+https://github.com/bytecodealliance/cranelift/)\" = \"<none>\"\n-\"checksum cranelift-module 0.58.0 (git+https://github.com/bytecodealliance/cranelift/)\" = \"<none>\"\n-\"checksum cranelift-native 0.58.0 (git+https://github.com/bytecodealliance/cranelift/)\" = \"<none>\"\n-\"checksum cranelift-object 0.58.0 (git+https://github.com/bytecodealliance/cranelift/)\" = \"<none>\"\n-\"checksum cranelift-simplejit 0.58.0 (git+https://github.com/bytecodealliance/cranelift/)\" = \"<none>\"\n-\"checksum crc32fast 1.2.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"ba125de2af0df55319f41944744ad91c71113bf74a4646efff39afe1f6842db1\"\n-\"checksum errno 0.2.4 (registry+https://github.com/rust-lang/crates.io-index)\" = \"c2a071601ed01b988f896ab14b95e67335d1eeb50190932a1320f7fe3cadc84e\"\n-\"checksum errno-dragonfly 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"14ca354e36190500e1e1fb267c647932382b54053c50b14970856c0b00a35067\"\n-\"checksum gcc 0.3.55 (registry+https://github.com/rust-lang/crates.io-index)\" = \"8f5f3913fa0bfe7ee1fd8248b6b9f42a5af4b9d65ec2dd2c3c26132b950ecfc2\"\n-\"checksum gimli 0.20.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"81dd6190aad0f05ddbbf3245c54ed14ca4aa6dd32f22312b70d8f168c3e3e633\"\n-\"checksum goblin 0.1.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"3081214398d39e4bd7f2c1975f0488ed04614ffdd976c6fc7a0708278552c0da\"\n-\"checksum indexmap 1.3.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"076f042c5b7b98f31d205f1249267e12a6518c1481e9dae9764af19b707d2292\"\n-\"checksum libc 0.2.67 (registry+https://github.com/rust-lang/crates.io-index)\" = \"eb147597cdf94ed43ab7a9038716637d2d1bf2bc571da995d0028dec06bd3018\"\n-\"checksum libloading 0.5.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"f2b111a074963af1d37a139918ac6d49ad1d0d5e47f72fd55388619691a7d753\"\n-\"checksum log 0.4.8 (registry+https://github.com/rust-lang/crates.io-index)\" = \"14b6052be84e6b71ab17edffc2eeabf5c2c3ae1fdb464aae35ac50c67a44e1f7\"\n-\"checksum mach 0.2.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"86dd2487cdfea56def77b88438a2c915fb45113c5319bfe7e14306ca4cd0b0e1\"\n-\"checksum object 0.17.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"ea44a4fd660ab0f38434934ca0212e90fbeaaee54126ef20a3451c30c95bafae\"\n-\"checksum plain 0.2.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"b4596b6d070b27117e987119b4dac604f3c58cfb0b191112e24771b2faeac1a6\"\n-\"checksum proc-macro2 1.0.8 (registry+https://github.com/rust-lang/crates.io-index)\" = \"3acb317c6ff86a4e579dfa00fc5e6cca91ecbb4e7eb2df0468805b674eb88548\"\n-\"checksum quote 1.0.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"053a8c8bcc71fcce321828dc897a98ab9760bef03a4fc36693c231e5b3216cfe\"\n-\"checksum raw-cpuid 7.0.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"b4a349ca83373cfa5d6dbb66fd76e58b2cca08da71a5f6400de0a0a6a9bceeaf\"\n-\"checksum region 2.1.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"448e868c6e4cfddfa49b6a72c95906c04e8547465e9536575b95c70a4044f856\"\n-\"checksum rustc_version 0.2.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"138e3e0acb6c9fb258b19b67cb8abd63c00679d2851805ea151465464fe9030a\"\n-\"checksum scroll 0.10.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"abb2332cb595d33f7edd5700f4cbf94892e680c7f0ae56adab58a35190b66cb1\"\n-\"checksum scroll_derive 0.10.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"f8584eea9b9ff42825b46faf46a8c24d2cff13ec152fa2a50df788b87c07ee28\"\n-\"checksum semver 0.9.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"1d7eb9ef2c18661902cc47e535f9bc51b78acd254da71d375c2f6720d9a40403\"\n-\"checksum semver-parser 0.7.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"388a1df253eca08550bef6c72392cfe7c30914bf41df5269b68cbd6ff8f570a3\"\n-\"checksum smallvec 1.2.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"5c2fb2ec9bcd216a5b0d0ccf31ab17b5ed1d627960edff65bbe95d3ce221cefc\"\n-\"checksum syn 1.0.15 (registry+https://github.com/rust-lang/crates.io-index)\" = \"7a0294dc449adc58bb6592fff1a23d3e5e6e235afc6a0ffca2657d19e7bbffe5\"\n-\"checksum target-lexicon 0.10.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"ab0e7238dcc7b40a7be719a25365910f6807bd864f4cce6b2e6b873658e2b19d\"\n-\"checksum thiserror 1.0.11 (registry+https://github.com/rust-lang/crates.io-index)\" = \"ee14bf8e6767ab4c687c9e8bc003879e042a96fd67a3ba5934eadb6536bef4db\"\n-\"checksum thiserror-impl 1.0.11 (registry+https://github.com/rust-lang/crates.io-index)\" = \"a7b51e1fbc44b5a0840be594fbc0f960be09050f2617e61e6aa43bef97cd3ef4\"\n-\"checksum unicode-xid 0.2.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"826e7639553986605ec5979c7dd957c7895e93eabed50ab2ffa7f6128a75097c\"\n-\"checksum uuid 0.8.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"9fde2f6a4bea1d6e007c4ad38c6839fa71cbb63b6dbf5b595aa38dc9b1093c11\"\n-\"checksum winapi 0.3.8 (registry+https://github.com/rust-lang/crates.io-index)\" = \"8093091eeb260906a183e6ae1abdba2ef5ef2257a21801128899c3fc699229c6\"\n-\"checksum winapi-i686-pc-windows-gnu 0.4.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"ac3b87c63620426dd9b991e5ce0329eff545bccbbb34f3be09ff6fb6ab51b7b6\"\n-\"checksum winapi-x86_64-pc-windows-gnu 0.4.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"712e227841d057c1ee1cd2fb22fa7e5a5461ae8e48fa2ca79ec42cfc1931183f\"\n+checksum = \"712e227841d057c1ee1cd2fb22fa7e5a5461ae8e48fa2ca79ec42cfc1931183f\""}, {"sha": "4209ccfbdd2a90589fb2842c895bbf3266687716", "filename": "crate_patches/regex.patch", "status": "removed", "additions": 0, "deletions": 34, "changes": 34, "blob_url": "https://github.com/rust-lang/rust/blob/0e0afb4f1fe47638aa59e41ce0b9a775bb4c15f6/crate_patches%2Fregex.patch", "raw_url": "https://github.com/rust-lang/rust/raw/0e0afb4f1fe47638aa59e41ce0b9a775bb4c15f6/crate_patches%2Fregex.patch", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crate_patches%2Fregex.patch?ref=0e0afb4f1fe47638aa59e41ce0b9a775bb4c15f6", "patch": "@@ -1,34 +0,0 @@\n-From febff2a8c639efb5de1e1b4758cdb473847d80ce Mon Sep 17 00:00:00 2001\n-From: bjorn3 <bjorn3@users.noreply.github.com>\n-Date: Tue, 30 Jul 2019 12:12:37 +0200\n-Subject: [PATCH] Disable threads in shootout-regex-dna example\n-\n----\n- examples/shootout-regex-dna.rs | 4 ++--\n- 1 file changed, 2 insertions(+), 2 deletions(-)\n-\n-diff --git a/examples/shootout-regex-dna.rs b/examples/shootout-regex-dna.rs\n-index 2171bb3..37382f8 100644\n---- a/examples/shootout-regex-dna.rs\n-+++ b/examples/shootout-regex-dna.rs\n-@@ -37,7 +37,7 @@ fn main() {\n-     for variant in variants {\n-         let seq = seq_arc.clone();\n-         let restr = variant.to_string();\n--        let future = thread::spawn(move || variant.find_iter(&seq).count());\n-+        let future = variant.find_iter(&seq).count();\n-         counts.push((restr, future));\n-     }\n- \n-@@ -60,7 +60,7 @@ fn main() {\n-     }\n- \n-     for (variant, count) in counts {\n--        println!(\"{} {}\", variant, count.join().unwrap());\n-+        println!(\"{} {}\", variant, count);\n-     }\n-     println!(\"\\n{}\\n{}\\n{}\", ilen, clen, seq.len());\n- }\n--- \n-2.11.0\n-"}, {"sha": "2e14424d8de860407f6c11a14bf8ddfd5f4ef486", "filename": "example/mini_core.rs", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/c8de552c0134896c8c804c7ca74555bd300ee937/example%2Fmini_core.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c8de552c0134896c8c804c7ca74555bd300ee937/example%2Fmini_core.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/example%2Fmini_core.rs?ref=c8de552c0134896c8c804c7ca74555bd300ee937", "patch": "@@ -1,6 +1,7 @@\n #![feature(\n     no_core, lang_items, intrinsics, unboxed_closures, type_ascription, extern_types,\n-    untagged_unions, decl_macro, rustc_attrs, transparent_unions, optin_builtin_traits\n+    untagged_unions, decl_macro, rustc_attrs, transparent_unions, optin_builtin_traits,\n+    thread_local,\n )]\n #![no_core]\n #![allow(dead_code)]\n@@ -551,3 +552,11 @@ struct PanicLocation {\n     line: u32,\n     column: u32,\n }\n+\n+#[no_mangle]\n+pub fn get_tls() -> u8 {\n+    #[thread_local]\n+    static A: u8 = 42;\n+\n+    A\n+}"}, {"sha": "489ceea83ea195afb81f5387eb1b285b98b90894", "filename": "example/mini_core_hello_world.rs", "status": "modified", "additions": 77, "deletions": 2, "changes": 79, "blob_url": "https://github.com/rust-lang/rust/blob/c8de552c0134896c8c804c7ca74555bd300ee937/example%2Fmini_core_hello_world.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c8de552c0134896c8c804c7ca74555bd300ee937/example%2Fmini_core_hello_world.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/example%2Fmini_core_hello_world.rs?ref=c8de552c0134896c8c804c7ca74555bd300ee937", "patch": "@@ -1,8 +1,11 @@\n // Adapted from https://github.com/sunfishcode/mir2cranelift/blob/master/rust-examples/nocore-hello-world.rs\n \n-#![feature(no_core, unboxed_closures, start, lang_items, box_syntax, slice_patterns, never_type, linkage, extern_types)]\n+#![feature(\n+    no_core, unboxed_closures, start, lang_items, box_syntax, slice_patterns, never_type, linkage,\n+    extern_types, thread_local\n+)]\n #![no_core]\n-#![allow(dead_code)]\n+#![allow(dead_code, non_camel_case_types)]\n \n extern crate mini_core;\n \n@@ -276,6 +279,78 @@ fn main() {\n     extern_nullptr as *const ();\n     let slice_ptr = &[] as *const [u8];\n     slice_ptr as *const u8;\n+\n+    #[cfg(not(jit))]\n+    test_tls();\n+}\n+\n+#[repr(C)]\n+enum c_void {\n+    _1,\n+    _2,\n+}\n+\n+type c_int = i32;\n+type c_ulong = u64;\n+\n+type pthread_t = c_ulong;\n+\n+#[repr(C)]\n+struct pthread_attr_t {\n+    __size: [u64; 7],\n+}\n+\n+#[link(name = \"pthread\")]\n+extern \"C\" {\n+    fn pthread_attr_init(attr: *mut pthread_attr_t) -> c_int;\n+\n+    fn pthread_create(\n+        native: *mut pthread_t,\n+        attr: *const pthread_attr_t,\n+        f: extern \"C\" fn(_: *mut c_void) -> *mut c_void,\n+        value: *mut c_void\n+    ) -> c_int;\n+\n+    fn pthread_join(\n+        native: pthread_t,\n+        value: *mut *mut c_void\n+    ) -> c_int;\n+}\n+\n+#[thread_local]\n+#[cfg(not(jit))]\n+static mut TLS: u8 = 42;\n+\n+#[cfg(not(jit))]\n+extern \"C\" fn mutate_tls(_: *mut c_void) -> *mut c_void {\n+    unsafe { TLS = 0; }\n+    0 as *mut c_void\n+}\n+\n+#[cfg(not(jit))]\n+fn test_tls() {\n+    unsafe {\n+        let mut attr: pthread_attr_t = intrinsics::init();\n+        let mut thread: pthread_t = 0;\n+\n+        assert_eq!(TLS, 42);\n+\n+        if pthread_attr_init(&mut attr) != 0 {\n+            assert!(false);\n+        }\n+\n+        if pthread_create(&mut thread, &attr, mutate_tls, 0 as *mut c_void) != 0 {\n+            assert!(false);\n+        }\n+\n+        let mut res = 0 as *mut c_void;\n+        pthread_join(thread, &mut res);\n+\n+        // TLS of main thread must not have been changed by the other thread.\n+        assert_eq!(TLS, 42);\n+\n+        puts(\"TLS works!\\n\\0\" as *const str as *const u8);\n+    }\n }\n \n // Copied ui/issues/issue-61696.rs"}, {"sha": "3332c025e173f1f5c1e757a1860ad63211cd70e6", "filename": "example/std_example.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c8de552c0134896c8c804c7ca74555bd300ee937/example%2Fstd_example.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c8de552c0134896c8c804c7ca74555bd300ee937/example%2Fstd_example.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/example%2Fstd_example.rs?ref=c8de552c0134896c8c804c7ca74555bd300ee937", "patch": "@@ -12,6 +12,10 @@ fn main() {\n     let stderr = ::std::io::stderr();\n     let mut stderr = stderr.lock();\n \n+    std::thread::spawn(move || {\n+        println!(\"Hello from another thread!\");\n+    });\n+\n     writeln!(stderr, \"some {} text\", \"<unknown>\").unwrap();\n \n     let _ = std::process::Command::new(\"true\").env(\"c\", \"d\").spawn();"}, {"sha": "12a4fbf4425e156bf6c9a4c7a2e5e143764fd1f5", "filename": "patches/0018-Add-FnBox-back.patch", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/c8de552c0134896c8c804c7ca74555bd300ee937/patches%2F0018-Add-FnBox-back.patch", "raw_url": "https://github.com/rust-lang/rust/raw/c8de552c0134896c8c804c7ca74555bd300ee937/patches%2F0018-Add-FnBox-back.patch", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/patches%2F0018-Add-FnBox-back.patch?ref=c8de552c0134896c8c804c7ca74555bd300ee937", "patch": "@@ -95,8 +95,9 @@ index 143cf2f..a6e8faf 100644\n      // unsafe: see thread::Builder::spawn_unchecked for safety requirements\n -    pub unsafe fn new(stack: usize, p: Box<dyn FnOnce()>) -> io::Result<Thread> {\n +    pub unsafe fn new(stack: usize, p: Box<dyn FnBox()>) -> io::Result<Thread> {\n-         panic!(\"Warning: Threads are not yet fully supported, because cranelift doesn't support atomics.\");\n- \n+-        panic!(\"Warning: Threads are not yet fully supported, because cranelift doesn't support atomics.\");\n++        println!(\"Spawned thread\");\n+\n          let p = box p;\n          let mut native: libc::pthread_t = mem::zeroed();\n diff --git a/src/libstd/sys_common/at_exit_imp.rs b/src/libstd/sys_common/at_exit_imp.rs"}, {"sha": "c0ff44eaf5d020470c32b650b5ae818a5dc551a7", "filename": "prepare.sh", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c8de552c0134896c8c804c7ca74555bd300ee937/prepare.sh", "raw_url": "https://github.com/rust-lang/rust/raw/c8de552c0134896c8c804c7ca74555bd300ee937/prepare.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/prepare.sh?ref=c8de552c0134896c8c804c7ca74555bd300ee937", "patch": "@@ -9,7 +9,6 @@ git clone https://github.com/rust-lang/regex.git || echo \"rust-lang/regex has al\n pushd regex\n git checkout -- .\n git checkout 341f207c1071f7290e3f228c710817c280c8dca1\n-git apply ../crate_patches/regex.patch\n popd\n \n git clone https://github.com/ebobby/simple-raytracer || echo \"ebobby/simple-raytracer has already been cloned\""}, {"sha": "17922e7bbcded3240cdcca161fc57548e23729c0", "filename": "src/atomic_shim.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c8de552c0134896c8c804c7ca74555bd300ee937/src%2Fatomic_shim.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c8de552c0134896c8c804c7ca74555bd300ee937/src%2Fatomic_shim.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fatomic_shim.rs?ref=c8de552c0134896c8c804c7ca74555bd300ee937", "patch": "@@ -22,6 +22,7 @@ pub fn init_global_lock(module: &mut Module<impl Backend>, bcx: &mut FunctionBui\n         \"__cg_clif_global_atomic_mutex\",\n         Linkage::Export,\n         true,\n+        false,\n         Some(16),\n     ).unwrap();\n     module.define_data(atomic_mutex, &data_ctx).unwrap();\n@@ -50,6 +51,7 @@ pub fn lock_global_lock(fx: &mut FunctionCx<'_, '_, impl Backend>) {\n         \"__cg_clif_global_atomic_mutex\",\n         Linkage::Import,\n         true,\n+        false,\n         None,\n     ).unwrap();\n \n@@ -74,6 +76,7 @@ pub fn unlock_global_lock(fx: &mut FunctionCx<'_, '_, impl Backend>) {\n         \"__cg_clif_global_atomic_mutex\",\n         Linkage::Import,\n         true,\n+        false,\n         None,\n     ).unwrap();\n "}, {"sha": "3da096655f593e932991dd3b961e14bd2d32a670", "filename": "src/constant.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c8de552c0134896c8c804c7ca74555bd300ee937/src%2Fconstant.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c8de552c0134896c8c804c7ca74555bd300ee937/src%2Fconstant.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fconstant.rs?ref=c8de552c0134896c8c804c7ca74555bd300ee937", "patch": "@@ -212,6 +212,7 @@ fn data_id_for_alloc_id<B: Backend>(\n             &format!(\"__alloc_{}\", alloc_id.0),\n             Linkage::Local,\n             false,\n+            false,\n             Some(align.bytes() as u8),\n         )\n         .unwrap()\n@@ -238,11 +239,14 @@ fn data_id_for_static(\n         .pref\n         .bytes();\n \n+    let attrs = tcx.codegen_fn_attrs(def_id);\n+\n     let data_id = module\n         .declare_data(\n             &*symbol_name,\n             linkage,\n             is_mutable,\n+            attrs.flags.contains(rustc::middle::codegen_fn_attrs::CodegenFnAttrFlags::THREAD_LOCAL),\n             Some(align.try_into().unwrap()),\n         )\n         .unwrap();"}, {"sha": "1d27e99e32f61aaf7a8b0064cfaae863bca376ab", "filename": "src/lib.rs", "status": "modified", "additions": 12, "deletions": 1, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/c8de552c0134896c8c804c7ca74555bd300ee937/src%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c8de552c0134896c8c804c7ca74555bd300ee937/src%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib.rs?ref=c8de552c0134896c8c804c7ca74555bd300ee937", "patch": "@@ -256,6 +256,10 @@ fn target_triple(sess: &Session) -> target_lexicon::Triple {\n }\n \n fn build_isa(sess: &Session, enable_pic: bool) -> Box<dyn isa::TargetIsa + 'static> {\n+    use target_lexicon::BinaryFormat;\n+\n+    let target_triple = crate::target_triple(sess);\n+\n     let mut flags_builder = settings::builder();\n     if enable_pic {\n         flags_builder.enable(\"is_pic\").unwrap();\n@@ -274,6 +278,14 @@ fn build_isa(sess: &Session, enable_pic: bool) -> Box<dyn isa::TargetIsa + 'stat\n         )\n         .unwrap();\n \n+    let tls_model = match target_triple.binary_format {\n+        BinaryFormat::Elf => \"elf_gd\",\n+        BinaryFormat::Macho => \"macho\",\n+        BinaryFormat::Coff => \"coff\",\n+        _ => \"none\",\n+    };\n+    flags_builder.set(\"tls_model\", tls_model).unwrap();\n+\n     // FIXME(CraneStation/cranelift#732) fix LICM in presence of jump tables\n     /*\n     use rustc::session::config::OptLevel;\n@@ -290,7 +302,6 @@ fn build_isa(sess: &Session, enable_pic: bool) -> Box<dyn isa::TargetIsa + 'stat\n         }\n     }*/\n \n-    let target_triple = crate::target_triple(sess);\n     let flags = settings::Flags::new(flags_builder);\n     cranelift_codegen::isa::lookup(target_triple)\n         .unwrap()"}, {"sha": "6ce5be0009fcb0a2dd01d7f2b87a1148c5679df5", "filename": "src/trap.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c8de552c0134896c8c804c7ca74555bd300ee937/src%2Ftrap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c8de552c0134896c8c804c7ca74555bd300ee937/src%2Ftrap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftrap.rs?ref=c8de552c0134896c8c804c7ca74555bd300ee937", "patch": "@@ -29,6 +29,7 @@ fn codegen_print(fx: &mut FunctionCx<'_, '_, impl cranelift_module::Backend>, ms\n             &(symbol_name.name.as_str().to_string() + msg),\n             Linkage::Local,\n             false,\n+            false,\n             None,\n         )\n         .unwrap();"}, {"sha": "5ce975d3124f38ebf4d0a2e2221d8073c959a36e", "filename": "src/vtable.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c8de552c0134896c8c804c7ca74555bd300ee937/src%2Fvtable.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c8de552c0134896c8c804c7ca74555bd300ee937/src%2Fvtable.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fvtable.rs?ref=c8de552c0134896c8c804c7ca74555bd300ee937", "patch": "@@ -129,6 +129,7 @@ fn build_vtable<'tcx>(\n             &format!(\"vtable.{:?}.for.{:?}\", trait_ref, layout.ty),\n             Linkage::Local,\n             false,\n+            false,\n             Some(\n                 fx.tcx\n                     .data_layout"}, {"sha": "b650653b740361ba54a9cba0b5a8cfec64dffe20", "filename": "test.sh", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c8de552c0134896c8c804c7ca74555bd300ee937/test.sh", "raw_url": "https://github.com/rust-lang/rust/raw/c8de552c0134896c8c804c7ca74555bd300ee937/test.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/test.sh?ref=c8de552c0134896c8c804c7ca74555bd300ee937", "patch": "@@ -22,7 +22,7 @@ echo \"[BUILD] example\"\n $RUSTC example/example.rs --crate-type lib\n \n echo \"[JIT] mini_core_hello_world\"\n-JIT_ARGS=\"abc bcd\" SHOULD_RUN=1 $RUSTC --crate-type bin -Cprefer-dynamic example/mini_core_hello_world.rs\n+JIT_ARGS=\"abc bcd\" SHOULD_RUN=1 $RUSTC --crate-type bin -Cprefer-dynamic example/mini_core_hello_world.rs --cfg jit\n \n echo \"[AOT] mini_core_hello_world\"\n $RUSTC example/mini_core_hello_world.rs --crate-name mini_core_hello_world --crate-type bin -g\n@@ -88,7 +88,7 @@ echo \"[TEST] rust-lang/regex example shootout-regex-dna\"\n ../cargo.sh clean\n # Make sure `[codegen mono items] start` doesn't poison the diff\n ../cargo.sh build --example shootout-regex-dna\n-cat examples/regexdna-input.txt | ../cargo.sh run --example shootout-regex-dna > res.txt\n+cat examples/regexdna-input.txt | ../cargo.sh run --example shootout-regex-dna | grep -v \"Spawned thread\" > res.txt\n diff -u res.txt examples/regexdna-output.txt\n \n echo \"[TEST] rust-lang/regex tests\""}]}