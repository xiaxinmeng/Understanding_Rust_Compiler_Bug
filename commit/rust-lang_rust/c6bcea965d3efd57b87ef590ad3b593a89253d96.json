{"sha": "c6bcea965d3efd57b87ef590ad3b593a89253d96", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM2YmNlYTk2NWQzZWZkNTdiODdlZjU5MGFkM2I1OTNhODkyNTNkOTY=", "commit": {"author": {"name": "leo60228", "email": "iakornfeld@gmail.com", "date": "2019-11-21T19:03:31Z"}, "committer": {"name": "leo60228", "email": "iakornfeld@gmail.com", "date": "2019-11-22T17:27:07Z"}, "message": "Test std::env::args in a staticlib on glibc Linux", "tree": {"sha": "2ebf5f7ead750f8240485a0ad0fb36afcc5813b5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2ebf5f7ead750f8240485a0ad0fb36afcc5813b5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c6bcea965d3efd57b87ef590ad3b593a89253d96", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c6bcea965d3efd57b87ef590ad3b593a89253d96", "html_url": "https://github.com/rust-lang/rust/commit/c6bcea965d3efd57b87ef590ad3b593a89253d96", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c6bcea965d3efd57b87ef590ad3b593a89253d96/comments", "author": {"login": "leo60228", "id": 8355305, "node_id": "MDQ6VXNlcjgzNTUzMDU=", "avatar_url": "https://avatars.githubusercontent.com/u/8355305?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leo60228", "html_url": "https://github.com/leo60228", "followers_url": "https://api.github.com/users/leo60228/followers", "following_url": "https://api.github.com/users/leo60228/following{/other_user}", "gists_url": "https://api.github.com/users/leo60228/gists{/gist_id}", "starred_url": "https://api.github.com/users/leo60228/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leo60228/subscriptions", "organizations_url": "https://api.github.com/users/leo60228/orgs", "repos_url": "https://api.github.com/users/leo60228/repos", "events_url": "https://api.github.com/users/leo60228/events{/privacy}", "received_events_url": "https://api.github.com/users/leo60228/received_events", "type": "User", "site_admin": false}, "committer": {"login": "leo60228", "id": 8355305, "node_id": "MDQ6VXNlcjgzNTUzMDU=", "avatar_url": "https://avatars.githubusercontent.com/u/8355305?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leo60228", "html_url": "https://github.com/leo60228", "followers_url": "https://api.github.com/users/leo60228/followers", "following_url": "https://api.github.com/users/leo60228/following{/other_user}", "gists_url": "https://api.github.com/users/leo60228/gists{/gist_id}", "starred_url": "https://api.github.com/users/leo60228/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leo60228/subscriptions", "organizations_url": "https://api.github.com/users/leo60228/orgs", "repos_url": "https://api.github.com/users/leo60228/repos", "events_url": "https://api.github.com/users/leo60228/events{/privacy}", "received_events_url": "https://api.github.com/users/leo60228/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d448ab0cf10a6c822b209f208a87ce200efd0772", "url": "https://api.github.com/repos/rust-lang/rust/commits/d448ab0cf10a6c822b209f208a87ce200efd0772", "html_url": "https://github.com/rust-lang/rust/commit/d448ab0cf10a6c822b209f208a87ce200efd0772"}], "stats": {"total": 23, "additions": 23, "deletions": 0}, "files": [{"sha": "ad841ec6101cd73a95c715c658c4e2280218144f", "filename": "src/test/run-make-fulldeps/glibc-staticlib-args/Makefile", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/c6bcea965d3efd57b87ef590ad3b593a89253d96/src%2Ftest%2Frun-make-fulldeps%2Fglibc-staticlib-args%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/c6bcea965d3efd57b87ef590ad3b593a89253d96/src%2Ftest%2Frun-make-fulldeps%2Fglibc-staticlib-args%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Fglibc-staticlib-args%2FMakefile?ref=c6bcea965d3efd57b87ef590ad3b593a89253d96", "patch": "@@ -0,0 +1,12 @@\n+# only-gnu\n+# only-linux\n+\n+-include ../tools.mk\n+\n+# This ensures that std::env::args works in a library called from C on glibc Linux.\n+\n+all:\n+\t$(RUSTC) --crate-type=staticlib library.rs\n+\t$(CC) program.c $(call STATICLIB,library) $(call OUT_EXE,program) \\\n+\t\t$(EXTRACFLAGS) $(EXTRACXXFLAGS)\n+\t$(call RUN,program)"}, {"sha": "991981dc09666c0afa99563bb2e9962e8ef15bd0", "filename": "src/test/run-make-fulldeps/glibc-staticlib-args/library.rs", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c6bcea965d3efd57b87ef590ad3b593a89253d96/src%2Ftest%2Frun-make-fulldeps%2Fglibc-staticlib-args%2Flibrary.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c6bcea965d3efd57b87ef590ad3b593a89253d96/src%2Ftest%2Frun-make-fulldeps%2Fglibc-staticlib-args%2Flibrary.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Fglibc-staticlib-args%2Flibrary.rs?ref=c6bcea965d3efd57b87ef590ad3b593a89253d96", "patch": "@@ -0,0 +1,4 @@\n+#[no_mangle]\n+pub extern fn args_check() {\n+    assert_ne!(std::env::args_os().count(), 0);\n+}"}, {"sha": "d704c39d5c42f096effc85cb4001e21c4e6826fc", "filename": "src/test/run-make-fulldeps/glibc-staticlib-args/program.c", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/c6bcea965d3efd57b87ef590ad3b593a89253d96/src%2Ftest%2Frun-make-fulldeps%2Fglibc-staticlib-args%2Fprogram.c", "raw_url": "https://github.com/rust-lang/rust/raw/c6bcea965d3efd57b87ef590ad3b593a89253d96/src%2Ftest%2Frun-make-fulldeps%2Fglibc-staticlib-args%2Fprogram.c", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Fglibc-staticlib-args%2Fprogram.c?ref=c6bcea965d3efd57b87ef590ad3b593a89253d96", "patch": "@@ -0,0 +1,7 @@\n+// ignore-license\n+void args_check();\n+\n+int main() {\n+    args_check();\n+    return 0;\n+}"}]}