{"sha": "05e05eaed7f512bf2a1f7f236fc4b484d4a52aa5", "node_id": "C_kwDOAAsO6NoAKDA1ZTA1ZWFlZDdmNTEyYmYyYTFmN2YyMzZmYzRiNDg0ZDRhNTJhYTU", "commit": {"author": {"name": "Max Baumann", "email": "max@bmn.dev", "date": "2022-03-18T00:04:33Z"}, "committer": {"name": "Max Baumann", "email": "max@bmn.dev", "date": "2022-03-18T00:04:33Z"}, "message": "refactor: rename lint to or_then_unwrap", "tree": {"sha": "d60f4b526d2570557c1e74194a0b9091b032eb3c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d60f4b526d2570557c1e74194a0b9091b032eb3c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/05e05eaed7f512bf2a1f7f236fc4b484d4a52aa5", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEhJzmO046LuvaNO3WIPoWCbA7HW0FAmIzzJEACgkQIPoWCbA7\nHW1ouRAAtsleehkRimGNZLlbDoUa2HfwR/623hGUCwVsfBBzh5dIX6laPVosC6TK\nSDq7DsCsXv09kRLNjmWdy/Rge/4i+3LTlscAgGRD0gd8vTwad7T6WAk7VYboMVKl\niX2DYNJSkOMPqWfO4UmcKJ0jR5Sk+1Ef8OO88s4eplqUaJ3AboCQqncPsvFd7okN\nk2txZOktL5g1dXS8wqU9morbKtRQAOXsDocBA+oWR6JL1AaXvngqwDVhZ5M10u5E\n4yysQLwj8kBh+aSHnqdBFsRGee3XU+WBDZYZ+g+4kSQB1Vj/krrmgT6c9MtuK9Ru\n9KlBJI3u1iX7hL4w1S79ppaeNFSuVK7K5q5suxQX8jDP5Ptx7wlxQRwuZzAAQCEJ\nVoRO8vpOlOhnYgGMgIVVKFPKg2RIKPjL+OKkRR6iIOdK3D4mKBSOgwZo3yl/dIz9\nY+bm47ARsoHOkyo+Z54PiQI7kE5+9UdeXZLAPOLuP/L6iHor39hIM4w40ckBSaXs\nKB4s0YtHpT+dQj5fkNgcshhl6hggORLAHfebjgjSYeLIizIW9YA18Cky6vhFVVsk\nQBubca5Dy3K7ldOgAipIRgM6PUZVzmmKkrFTUy79OXyi4j/YIxfx6QoMg9q8uvnK\nmkN8TyJ/obQzDbWrjZnZX2S/gIVs92OLlnzmytbSIensbhNQrGk=\n=7AX2\n-----END PGP SIGNATURE-----", "payload": "tree d60f4b526d2570557c1e74194a0b9091b032eb3c\nparent 44c62c9aa23e0d8401d9bdc1e2df913cfd035c7e\nauthor Max Baumann <max@bmn.dev> 1647561873 +0100\ncommitter Max Baumann <max@bmn.dev> 1647561873 +0100\n\nrefactor: rename lint to or_then_unwrap\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/05e05eaed7f512bf2a1f7f236fc4b484d4a52aa5", "html_url": "https://github.com/rust-lang/rust/commit/05e05eaed7f512bf2a1f7f236fc4b484d4a52aa5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/05e05eaed7f512bf2a1f7f236fc4b484d4a52aa5/comments", "author": {"login": "FoseFx", "id": 22842759, "node_id": "MDQ6VXNlcjIyODQyNzU5", "avatar_url": "https://avatars.githubusercontent.com/u/22842759?v=4", "gravatar_id": "", "url": "https://api.github.com/users/FoseFx", "html_url": "https://github.com/FoseFx", "followers_url": "https://api.github.com/users/FoseFx/followers", "following_url": "https://api.github.com/users/FoseFx/following{/other_user}", "gists_url": "https://api.github.com/users/FoseFx/gists{/gist_id}", "starred_url": "https://api.github.com/users/FoseFx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/FoseFx/subscriptions", "organizations_url": "https://api.github.com/users/FoseFx/orgs", "repos_url": "https://api.github.com/users/FoseFx/repos", "events_url": "https://api.github.com/users/FoseFx/events{/privacy}", "received_events_url": "https://api.github.com/users/FoseFx/received_events", "type": "User", "site_admin": false}, "committer": {"login": "FoseFx", "id": 22842759, "node_id": "MDQ6VXNlcjIyODQyNzU5", "avatar_url": "https://avatars.githubusercontent.com/u/22842759?v=4", "gravatar_id": "", "url": "https://api.github.com/users/FoseFx", "html_url": "https://github.com/FoseFx", "followers_url": "https://api.github.com/users/FoseFx/followers", "following_url": "https://api.github.com/users/FoseFx/following{/other_user}", "gists_url": "https://api.github.com/users/FoseFx/gists{/gist_id}", "starred_url": "https://api.github.com/users/FoseFx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/FoseFx/subscriptions", "organizations_url": "https://api.github.com/users/FoseFx/orgs", "repos_url": "https://api.github.com/users/FoseFx/repos", "events_url": "https://api.github.com/users/FoseFx/events{/privacy}", "received_events_url": "https://api.github.com/users/FoseFx/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "44c62c9aa23e0d8401d9bdc1e2df913cfd035c7e", "url": "https://api.github.com/repos/rust-lang/rust/commits/44c62c9aa23e0d8401d9bdc1e2df913cfd035c7e", "html_url": "https://github.com/rust-lang/rust/commit/44c62c9aa23e0d8401d9bdc1e2df913cfd035c7e"}], "stats": {"total": 28, "additions": 14, "deletions": 14}, "files": [{"sha": "b45be38bf4dcfc6cfe9651cbfc88b4c870d302f9", "filename": "CHANGELOG.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05e05eaed7f512bf2a1f7f236fc4b484d4a52aa5/CHANGELOG.md", "raw_url": "https://github.com/rust-lang/rust/raw/05e05eaed7f512bf2a1f7f236fc4b484d4a52aa5/CHANGELOG.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/CHANGELOG.md?ref=05e05eaed7f512bf2a1f7f236fc4b484d4a52aa5", "patch": "@@ -3538,7 +3538,7 @@ Released 2018-09-13\n [`upper_case_acronyms`]: https://rust-lang.github.io/rust-clippy/master/index.html#upper_case_acronyms\n [`use_debug`]: https://rust-lang.github.io/rust-clippy/master/index.html#use_debug\n [`use_self`]: https://rust-lang.github.io/rust-clippy/master/index.html#use_self\n-[`use_unwrap_or`]: https://rust-lang.github.io/rust-clippy/master/index.html#use_unwrap_or\n+[`or_then_unwrap`]: https://rust-lang.github.io/rust-clippy/master/index.html#or_then_unwrap\n [`used_underscore_binding`]: https://rust-lang.github.io/rust-clippy/master/index.html#used_underscore_binding\n [`useless_asref`]: https://rust-lang.github.io/rust-clippy/master/index.html#useless_asref\n [`useless_attribute`]: https://rust-lang.github.io/rust-clippy/master/index.html#useless_attribute"}, {"sha": "5c3e352d09fd803c62a315c92d5f6942e7311381", "filename": "clippy_lints/src/lib.register_all.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05e05eaed7f512bf2a1f7f236fc4b484d4a52aa5/clippy_lints%2Fsrc%2Flib.register_all.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05e05eaed7f512bf2a1f7f236fc4b484d4a52aa5/clippy_lints%2Fsrc%2Flib.register_all.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.register_all.rs?ref=05e05eaed7f512bf2a1f7f236fc4b484d4a52aa5", "patch": "@@ -310,7 +310,7 @@ store.register_group(true, \"clippy::all\", Some(\"clippy_all\"), vec![\n     LintId::of(unwrap::PANICKING_UNWRAP),\n     LintId::of(unwrap::UNNECESSARY_UNWRAP),\n     LintId::of(upper_case_acronyms::UPPER_CASE_ACRONYMS),\n-    LintId::of(use_unwrap_or::USE_UNWRAP_OR),\n+    LintId::of(or_then_unwrap::OR_THEN_UNWRAP),\n     LintId::of(useless_conversion::USELESS_CONVERSION),\n     LintId::of(vec::USELESS_VEC),\n     LintId::of(vec_init_then_push::VEC_INIT_THEN_PUSH),"}, {"sha": "45ad1520396547ef187e902081db9c7baa6c948f", "filename": "clippy_lints/src/lib.register_complexity.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05e05eaed7f512bf2a1f7f236fc4b484d4a52aa5/clippy_lints%2Fsrc%2Flib.register_complexity.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05e05eaed7f512bf2a1f7f236fc4b484d4a52aa5/clippy_lints%2Fsrc%2Flib.register_complexity.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.register_complexity.rs?ref=05e05eaed7f512bf2a1f7f236fc4b484d4a52aa5", "patch": "@@ -94,7 +94,7 @@ store.register_group(true, \"clippy::complexity\", Some(\"clippy_complexity\"), vec!\n     LintId::of(unit_types::UNIT_ARG),\n     LintId::of(unnecessary_sort_by::UNNECESSARY_SORT_BY),\n     LintId::of(unwrap::UNNECESSARY_UNWRAP),\n-    LintId::of(use_unwrap_or::USE_UNWRAP_OR),\n+    LintId::of(or_then_unwrap::OR_THEN_UNWRAP),\n     LintId::of(useless_conversion::USELESS_CONVERSION),\n     LintId::of(zero_div_zero::ZERO_DIVIDED_BY_ZERO),\n ])"}, {"sha": "aad0c8735eeba5b91548bf64fb3efd6714fc2f8e", "filename": "clippy_lints/src/lib.register_lints.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05e05eaed7f512bf2a1f7f236fc4b484d4a52aa5/clippy_lints%2Fsrc%2Flib.register_lints.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05e05eaed7f512bf2a1f7f236fc4b484d4a52aa5/clippy_lints%2Fsrc%2Flib.register_lints.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.register_lints.rs?ref=05e05eaed7f512bf2a1f7f236fc4b484d4a52aa5", "patch": "@@ -528,7 +528,7 @@ store.register_lints(&[\n     unwrap_in_result::UNWRAP_IN_RESULT,\n     upper_case_acronyms::UPPER_CASE_ACRONYMS,\n     use_self::USE_SELF,\n-    use_unwrap_or::USE_UNWRAP_OR,\n+    or_then_unwrap::OR_THEN_UNWRAP,\n     useless_conversion::USELESS_CONVERSION,\n     vec::USELESS_VEC,\n     vec_init_then_push::VEC_INIT_THEN_PUSH,"}, {"sha": "fdab58935ef956ec9fd6b874e8e01f15a06188de", "filename": "clippy_lints/src/lib.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/05e05eaed7f512bf2a1f7f236fc4b484d4a52aa5/clippy_lints%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05e05eaed7f512bf2a1f7f236fc4b484d4a52aa5/clippy_lints%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.rs?ref=05e05eaed7f512bf2a1f7f236fc4b484d4a52aa5", "patch": "@@ -322,6 +322,7 @@ mod only_used_in_recursion;\n mod open_options;\n mod option_env_unwrap;\n mod option_if_let_else;\n+mod or_then_unwrap;\n mod overflow_check_conditional;\n mod panic_in_result_fn;\n mod panic_unimplemented;\n@@ -394,7 +395,6 @@ mod unwrap;\n mod unwrap_in_result;\n mod upper_case_acronyms;\n mod use_self;\n-mod use_unwrap_or;\n mod useless_conversion;\n mod vec;\n mod vec_init_then_push;\n@@ -867,7 +867,7 @@ pub fn register_plugins(store: &mut rustc_lint::LintStore, sess: &Session, conf:\n             ignore_publish: cargo_ignore_publish,\n         })\n     });\n-    store.register_late_pass(|| Box::new(use_unwrap_or::UseUnwrapOr));\n+    store.register_late_pass(|| Box::new(or_then_unwrap::OrThenUnwrap));\n     // add lints here, do not remove this comment, it's used in `new_lint`\n }\n "}, {"sha": "d467fbdfe02868bbd6c7e115fbe74538a5dbd207", "filename": "clippy_lints/src/or_then_unwrap.rs", "status": "renamed", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/05e05eaed7f512bf2a1f7f236fc4b484d4a52aa5/clippy_lints%2Fsrc%2For_then_unwrap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05e05eaed7f512bf2a1f7f236fc4b484d4a52aa5/clippy_lints%2Fsrc%2For_then_unwrap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2For_then_unwrap.rs?ref=05e05eaed7f512bf2a1f7f236fc4b484d4a52aa5", "patch": "@@ -37,13 +37,13 @@ declare_clippy_lint! {\n     /// let value = option.unwrap_or(fallback);\n     /// ```\n     #[clippy::version = \"1.61.0\"]\n-    pub USE_UNWRAP_OR,\n+    pub OR_THEN_UNWRAP,\n     complexity,\n     \"checks for `.or(\u2026).unwrap()` calls to Options and Results.\"\n }\n-declare_lint_pass!(UseUnwrapOr => [USE_UNWRAP_OR]);\n+declare_lint_pass!(OrThenUnwrap => [OR_THEN_UNWRAP]);\n \n-impl<'tcx> LateLintPass<'tcx> for UseUnwrapOr {\n+impl<'tcx> LateLintPass<'tcx> for OrThenUnwrap {\n     fn check_expr(&mut self, cx: &LateContext<'tcx>, expr: &'tcx Expr<'_>) {\n         // look for x.or().unwrap()\n         if_chain! {\n@@ -73,7 +73,7 @@ impl<'tcx> LateLintPass<'tcx> for UseUnwrapOr {\n \n                 span_lint_and_help(\n                     cx,\n-                    USE_UNWRAP_OR,\n+                    OR_THEN_UNWRAP,\n                     or_span.to(*unwrap_span),\n                     title,\n                     None,", "previous_filename": "clippy_lints/src/use_unwrap_or.rs"}, {"sha": "cbc3c387da0f71057153f2a96ac2a70d8c60f169", "filename": "tests/ui/or_then_unwrap.rs", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05e05eaed7f512bf2a1f7f236fc4b484d4a52aa5/tests%2Fui%2For_then_unwrap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05e05eaed7f512bf2a1f7f236fc4b484d4a52aa5/tests%2Fui%2For_then_unwrap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2For_then_unwrap.rs?ref=05e05eaed7f512bf2a1f7f236fc4b484d4a52aa5", "patch": "@@ -1,4 +1,4 @@\n-#![warn(clippy::use_unwrap_or)]\n+#![warn(clippy::or_then_unwrap)]\n #![allow(clippy::map_identity)]\n \n struct SomeStruct {}", "previous_filename": "tests/ui/use_unwrap_or.rs"}, {"sha": "fdd718b35808910ef0ad50aa938d7c156c669936", "filename": "tests/ui/or_then_unwrap.stderr", "status": "renamed", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/05e05eaed7f512bf2a1f7f236fc4b484d4a52aa5/tests%2Fui%2For_then_unwrap.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/05e05eaed7f512bf2a1f7f236fc4b484d4a52aa5/tests%2Fui%2For_then_unwrap.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2For_then_unwrap.stderr?ref=05e05eaed7f512bf2a1f7f236fc4b484d4a52aa5", "patch": "@@ -1,14 +1,14 @@\n error: .or(Some(\u2026)).unwrap() found\n-  --> $DIR/use_unwrap_or.rs:22:20\n+  --> $DIR/or_then_unwrap.rs:22:20\n    |\n LL |     let _ = option.or(Some(\"fallback\")).unwrap(); // should trigger lint\n    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n-   = note: `-D clippy::use-unwrap-or` implied by `-D warnings`\n+   = note: `-D clippy::or-then-unwrap` implied by `-D warnings`\n    = help: use `unwrap_or()` instead\n \n error: .or(Ok(\u2026)).unwrap() found\n-  --> $DIR/use_unwrap_or.rs:25:20\n+  --> $DIR/or_then_unwrap.rs:25:20\n    |\n LL |     let _ = result.or::<&str>(Ok(\"fallback\")).unwrap(); // should trigger lint\n    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^", "previous_filename": "tests/ui/use_unwrap_or.stderr"}]}