{"sha": "e2e33b4d355cb77d716a9fb191d2453b5ab5d42b", "node_id": "MDY6Q29tbWl0NzI0NzEyOmUyZTMzYjRkMzU1Y2I3N2Q3MTZhOWZiMTkxZDI0NTNiNWFiNWQ0MmI=", "commit": {"author": {"name": "daxpedda", "email": "daxpedda@gmail.com", "date": "2021-02-06T16:57:31Z"}, "committer": {"name": "daxpedda", "email": "daxpedda@gmail.com", "date": "2021-02-06T16:57:31Z"}, "message": "Pick up `clippy.toml` in `ui-cargo` tests.", "tree": {"sha": "32d2a5b38f6ff5271e08e7c8b6c328a62d3e6773", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/32d2a5b38f6ff5271e08e7c8b6c328a62d3e6773"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e2e33b4d355cb77d716a9fb191d2453b5ab5d42b", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE3qx/rJh59vdc2+v9Q9YqPqOI5G8FAmAeynsACgkQQ9YqPqOI\n5G/dchAAgRe2XsOV/2baF41wErxbON6vFYlJNAracaJWOFccksCkezVKEzLvwgEn\nhZMdVJv2rrF+GVe25Q1lX9nzHi4p7paw8p2dobjIqwZY/fn7CRH5Ng8zLiByzY23\nJbluk7s/lSF0e00X4lRlNEBZpxQjCr5EGac4npxEWpvY9kVuJbKeRfnZFaFDqLlz\ndYKSt15YtwxtomEQZnf8xWklxBoqlu4U4mwcrJcF9QXVsgpaWMUEcWMoZOhXvbf5\nZSLFa/gjJiydEbx2jOlEXj7tHmPEViQ3Sp6PAlEuIBEMSTvVKyE03Sj15Xz00m0U\nwaXUsoJ437MP9U7ffUt0iuG7KODwRnLIkVdaZxQxqD9t3Cn49zqPKCKYDOyUbcc7\na16LSmFTiwg/N0sC6fsFZedu4JNwG/laO7+jRxsHoDaYt2wqAHGZSRMVwoXgaZFc\nWjoVyIQCHPvqrIMhTbGRwbFt0ZMu9GuseIwQRYDDv6PGbEPwGejZ/mlRJLCJ+3HI\nVmods9n+rc7ufYWpxZ0MJ18eYfjsFTv2jSbFCPYz6Cr8d7w+PL0pJsHBn6r2H3m4\nG+x5I6SMdr/TZtVBf9v8KVOXf6hBsq7VG/txTsatBQIp0mkcVHCQ0kjwn4r+lB8l\nHmpBCYlUoiJWWGsHn0Qsc6EJBbw4ysIDjGCfDVlgbd12eDmlaxE=\n=jd/B\n-----END PGP SIGNATURE-----", "payload": "tree 32d2a5b38f6ff5271e08e7c8b6c328a62d3e6773\nparent cd361a5e64f3f1b5a1389701bc30f64538f8eb69\nauthor daxpedda <daxpedda@gmail.com> 1612630651 +0100\ncommitter daxpedda <daxpedda@gmail.com> 1612630651 +0100\n\nPick up `clippy.toml` in `ui-cargo` tests.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e2e33b4d355cb77d716a9fb191d2453b5ab5d42b", "html_url": "https://github.com/rust-lang/rust/commit/e2e33b4d355cb77d716a9fb191d2453b5ab5d42b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e2e33b4d355cb77d716a9fb191d2453b5ab5d42b/comments", "author": {"login": "daxpedda", "id": 1645124, "node_id": "MDQ6VXNlcjE2NDUxMjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1645124?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daxpedda", "html_url": "https://github.com/daxpedda", "followers_url": "https://api.github.com/users/daxpedda/followers", "following_url": "https://api.github.com/users/daxpedda/following{/other_user}", "gists_url": "https://api.github.com/users/daxpedda/gists{/gist_id}", "starred_url": "https://api.github.com/users/daxpedda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daxpedda/subscriptions", "organizations_url": "https://api.github.com/users/daxpedda/orgs", "repos_url": "https://api.github.com/users/daxpedda/repos", "events_url": "https://api.github.com/users/daxpedda/events{/privacy}", "received_events_url": "https://api.github.com/users/daxpedda/received_events", "type": "User", "site_admin": false}, "committer": {"login": "daxpedda", "id": 1645124, "node_id": "MDQ6VXNlcjE2NDUxMjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1645124?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daxpedda", "html_url": "https://github.com/daxpedda", "followers_url": "https://api.github.com/users/daxpedda/followers", "following_url": "https://api.github.com/users/daxpedda/following{/other_user}", "gists_url": "https://api.github.com/users/daxpedda/gists{/gist_id}", "starred_url": "https://api.github.com/users/daxpedda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daxpedda/subscriptions", "organizations_url": "https://api.github.com/users/daxpedda/orgs", "repos_url": "https://api.github.com/users/daxpedda/repos", "events_url": "https://api.github.com/users/daxpedda/events{/privacy}", "received_events_url": "https://api.github.com/users/daxpedda/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cd361a5e64f3f1b5a1389701bc30f64538f8eb69", "url": "https://api.github.com/repos/rust-lang/rust/commits/cd361a5e64f3f1b5a1389701bc30f64538f8eb69", "html_url": "https://github.com/rust-lang/rust/commit/cd361a5e64f3f1b5a1389701bc30f64538f8eb69"}], "stats": {"total": 3, "additions": 3, "deletions": 0}, "files": [{"sha": "c0b40add1096d0654033524626bca9d687e349e5", "filename": "tests/compile-test.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/e2e33b4d355cb77d716a9fb191d2453b5ab5d42b/tests%2Fcompile-test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e2e33b4d355cb77d716a9fb191d2453b5ab5d42b/tests%2Fcompile-test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-test.rs?ref=e2e33b4d355cb77d716a9fb191d2453b5ab5d42b", "patch": "@@ -214,6 +214,7 @@ fn run_ui_cargo(config: &mut compiletest::Config) {\n                         Some(\"main.rs\") => {},\n                         _ => continue,\n                     }\n+                    set_var(\"CLIPPY_CONF_DIR\", case.path());\n                     let paths = compiletest::common::TestPaths {\n                         file: file_path,\n                         base: config.src_base.clone(),\n@@ -241,9 +242,11 @@ fn run_ui_cargo(config: &mut compiletest::Config) {\n     let tests = compiletest::make_tests(&config);\n \n     let current_dir = env::current_dir().unwrap();\n+    let conf_dir = var(\"CLIPPY_CONF_DIR\").unwrap_or_default();\n     let filter = env::var(\"TESTNAME\").ok();\n     let res = run_tests(&config, &filter, tests);\n     env::set_current_dir(current_dir).unwrap();\n+    set_var(\"CLIPPY_CONF_DIR\", conf_dir);\n \n     match res {\n         Ok(true) => {},"}]}