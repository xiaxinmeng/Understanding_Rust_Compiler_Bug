{"sha": "53c94e3ad8782b2ab51bea1aeb5687ec34f7a96d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUzYzk0ZTNhZDg3ODJiMmFiNTFiZWExYWViNTY4N2VjMzRmN2E5NmQ=", "commit": {"author": {"name": "csmoe", "email": "csmoe@msn.com", "date": "2018-12-30T13:51:40Z"}, "committer": {"name": "csmoe", "email": "csmoe@msn.com", "date": "2018-12-30T15:25:07Z"}, "message": "parse minus before number literal", "tree": {"sha": "9eaaf088ff03c78df8a8a856bfdf586a017ba21d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9eaaf088ff03c78df8a8a856bfdf586a017ba21d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/53c94e3ad8782b2ab51bea1aeb5687ec34f7a96d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/53c94e3ad8782b2ab51bea1aeb5687ec34f7a96d", "html_url": "https://github.com/rust-lang/rust/commit/53c94e3ad8782b2ab51bea1aeb5687ec34f7a96d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/53c94e3ad8782b2ab51bea1aeb5687ec34f7a96d/comments", "author": {"login": "csmoe", "id": 35686186, "node_id": "MDQ6VXNlcjM1Njg2MTg2", "avatar_url": "https://avatars.githubusercontent.com/u/35686186?v=4", "gravatar_id": "", "url": "https://api.github.com/users/csmoe", "html_url": "https://github.com/csmoe", "followers_url": "https://api.github.com/users/csmoe/followers", "following_url": "https://api.github.com/users/csmoe/following{/other_user}", "gists_url": "https://api.github.com/users/csmoe/gists{/gist_id}", "starred_url": "https://api.github.com/users/csmoe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/csmoe/subscriptions", "organizations_url": "https://api.github.com/users/csmoe/orgs", "repos_url": "https://api.github.com/users/csmoe/repos", "events_url": "https://api.github.com/users/csmoe/events{/privacy}", "received_events_url": "https://api.github.com/users/csmoe/received_events", "type": "User", "site_admin": false}, "committer": {"login": "csmoe", "id": 35686186, "node_id": "MDQ6VXNlcjM1Njg2MTg2", "avatar_url": "https://avatars.githubusercontent.com/u/35686186?v=4", "gravatar_id": "", "url": "https://api.github.com/users/csmoe", "html_url": "https://github.com/csmoe", "followers_url": "https://api.github.com/users/csmoe/followers", "following_url": "https://api.github.com/users/csmoe/following{/other_user}", "gists_url": "https://api.github.com/users/csmoe/gists{/gist_id}", "starred_url": "https://api.github.com/users/csmoe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/csmoe/subscriptions", "organizations_url": "https://api.github.com/users/csmoe/orgs", "repos_url": "https://api.github.com/users/csmoe/repos", "events_url": "https://api.github.com/users/csmoe/events{/privacy}", "received_events_url": "https://api.github.com/users/csmoe/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e422c2e2f4117cf977d28a40a9c8e4dc4cfee811", "url": "https://api.github.com/repos/rust-lang/rust/commits/e422c2e2f4117cf977d28a40a9c8e4dc4cfee811", "html_url": "https://github.com/rust-lang/rust/commit/e422c2e2f4117cf977d28a40a9c8e4dc4cfee811"}], "stats": {"total": 84, "additions": 51, "deletions": 33}, "files": [{"sha": "692ffbb8c275b329bd4df2af3f38222eb2c1bdef", "filename": "crates/ra_syntax/src/grammar/patterns.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/53c94e3ad8782b2ab51bea1aeb5687ec34f7a96d/crates%2Fra_syntax%2Fsrc%2Fgrammar%2Fpatterns.rs", "raw_url": "https://github.com/rust-lang/rust/raw/53c94e3ad8782b2ab51bea1aeb5687ec34f7a96d/crates%2Fra_syntax%2Fsrc%2Fgrammar%2Fpatterns.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fgrammar%2Fpatterns.rs?ref=53c94e3ad8782b2ab51bea1aeb5687ec34f7a96d", "patch": "@@ -48,11 +48,16 @@ fn atom_pat(p: &mut Parser, recovery_set: TokenSet) -> Option<CompletedMarker> {\n     // test literal_pattern\n     // fn main() {\n     //     match () {\n+    //         -1 => (),\n     //         92 => (),\n     //         'c' => (),\n     //         \"hello\" => (),\n     //     }\n     // }\n+    if p.at(MINUS) && (p.nth(1) == INT_NUMBER || p.nth(1) == FLOAT_NUMBER) {\n+        p.bump();\n+    }\n+\n     if let Some(m) = expressions::literal(p) {\n         return Some(m);\n     }"}, {"sha": "6dfd67b4ce93274dd1db5d99e649de62a21f1a27", "filename": "crates/ra_syntax/tests/data/parser/inline/ok/0055_literal_pattern.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/53c94e3ad8782b2ab51bea1aeb5687ec34f7a96d/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Finline%2Fok%2F0055_literal_pattern.rs", "raw_url": "https://github.com/rust-lang/rust/raw/53c94e3ad8782b2ab51bea1aeb5687ec34f7a96d/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Finline%2Fok%2F0055_literal_pattern.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Finline%2Fok%2F0055_literal_pattern.rs?ref=53c94e3ad8782b2ab51bea1aeb5687ec34f7a96d", "patch": "@@ -1,5 +1,6 @@\n fn main() {\n     match () {\n+        -1 => (),\n         92 => (),\n         'c' => (),\n         \"hello\" => (),"}, {"sha": "71d62eaba78327f36320787dff06329a203c5e68", "filename": "crates/ra_syntax/tests/data/parser/inline/ok/0055_literal_pattern.txt", "status": "modified", "additions": 45, "deletions": 33, "changes": 78, "blob_url": "https://github.com/rust-lang/rust/blob/53c94e3ad8782b2ab51bea1aeb5687ec34f7a96d/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Finline%2Fok%2F0055_literal_pattern.txt", "raw_url": "https://github.com/rust-lang/rust/raw/53c94e3ad8782b2ab51bea1aeb5687ec34f7a96d/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Finline%2Fok%2F0055_literal_pattern.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Finline%2Fok%2F0055_literal_pattern.txt?ref=53c94e3ad8782b2ab51bea1aeb5687ec34f7a96d", "patch": "@@ -1,5 +1,5 @@\n-SOURCE_FILE@[0; 95)\n-  FN_DEF@[0; 94)\n+SOURCE_FILE@[0; 113)\n+  FN_DEF@[0; 112)\n     FN_KW@[0; 2)\n     WHITESPACE@[2; 3)\n     NAME@[3; 7)\n@@ -8,22 +8,23 @@ SOURCE_FILE@[0; 95)\n       L_PAREN@[7; 8)\n       R_PAREN@[8; 9)\n     WHITESPACE@[9; 10)\n-    BLOCK@[10; 94)\n+    BLOCK@[10; 112)\n       L_CURLY@[10; 11)\n       WHITESPACE@[11; 16)\n-      MATCH_EXPR@[16; 92)\n+      MATCH_EXPR@[16; 110)\n         MATCH_KW@[16; 21)\n         WHITESPACE@[21; 22)\n         TUPLE_EXPR@[22; 24)\n           L_PAREN@[22; 23)\n           R_PAREN@[23; 24)\n         WHITESPACE@[24; 25)\n-        MATCH_ARM_LIST@[25; 92)\n+        MATCH_ARM_LIST@[25; 110)\n           L_CURLY@[25; 26)\n           WHITESPACE@[26; 35)\n           MATCH_ARM@[35; 43)\n-            LITERAL@[35; 37)\n-              INT_NUMBER@[35; 37) \"92\"\n+            MINUS@[35; 36)\n+            LITERAL@[36; 37)\n+              INT_NUMBER@[36; 37) \"1\"\n             WHITESPACE@[37; 38)\n             FAT_ARROW@[38; 40)\n             WHITESPACE@[40; 41)\n@@ -32,29 +33,40 @@ SOURCE_FILE@[0; 95)\n               R_PAREN@[42; 43)\n           COMMA@[43; 44)\n           WHITESPACE@[44; 53)\n-          MATCH_ARM@[53; 62)\n-            LITERAL@[53; 56)\n-              CHAR@[53; 56)\n-            WHITESPACE@[56; 57)\n-            FAT_ARROW@[57; 59)\n-            WHITESPACE@[59; 60)\n-            TUPLE_EXPR@[60; 62)\n-              L_PAREN@[60; 61)\n-              R_PAREN@[61; 62)\n-          COMMA@[62; 63)\n-          WHITESPACE@[63; 72)\n-          MATCH_ARM@[72; 85)\n-            LITERAL@[72; 79)\n-              STRING@[72; 79)\n-            WHITESPACE@[79; 80)\n-            FAT_ARROW@[80; 82)\n-            WHITESPACE@[82; 83)\n-            TUPLE_EXPR@[83; 85)\n-              L_PAREN@[83; 84)\n-              R_PAREN@[84; 85)\n-          COMMA@[85; 86)\n-          WHITESPACE@[86; 91)\n-          R_CURLY@[91; 92)\n-      WHITESPACE@[92; 93)\n-      R_CURLY@[93; 94)\n-  WHITESPACE@[94; 95)\n+          MATCH_ARM@[53; 61)\n+            LITERAL@[53; 55)\n+              INT_NUMBER@[53; 55) \"92\"\n+            WHITESPACE@[55; 56)\n+            FAT_ARROW@[56; 58)\n+            WHITESPACE@[58; 59)\n+            TUPLE_EXPR@[59; 61)\n+              L_PAREN@[59; 60)\n+              R_PAREN@[60; 61)\n+          COMMA@[61; 62)\n+          WHITESPACE@[62; 71)\n+          MATCH_ARM@[71; 80)\n+            LITERAL@[71; 74)\n+              CHAR@[71; 74)\n+            WHITESPACE@[74; 75)\n+            FAT_ARROW@[75; 77)\n+            WHITESPACE@[77; 78)\n+            TUPLE_EXPR@[78; 80)\n+              L_PAREN@[78; 79)\n+              R_PAREN@[79; 80)\n+          COMMA@[80; 81)\n+          WHITESPACE@[81; 90)\n+          MATCH_ARM@[90; 103)\n+            LITERAL@[90; 97)\n+              STRING@[90; 97)\n+            WHITESPACE@[97; 98)\n+            FAT_ARROW@[98; 100)\n+            WHITESPACE@[100; 101)\n+            TUPLE_EXPR@[101; 103)\n+              L_PAREN@[101; 102)\n+              R_PAREN@[102; 103)\n+          COMMA@[103; 104)\n+          WHITESPACE@[104; 109)\n+          R_CURLY@[109; 110)\n+      WHITESPACE@[110; 111)\n+      R_CURLY@[111; 112)\n+  WHITESPACE@[112; 113)"}]}