{"sha": "e632c440f88b3e252bf8c0942fc7be21d9e946d3", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU2MzJjNDQwZjg4YjNlMjUyYmY4YzA5NDJmYzdiZTIxZDllOTQ2ZDM=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-11-25T21:11:43Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-11-25T21:11:43Z"}, "message": "auto merge of #10658 : LeoTestard/rust/serialize-rc, r=cmr\n\nImplement various traits (IterBytes and extra's Encodable and Decodable) for Rc<T> when T alreay implements the trait.", "tree": {"sha": "9f3cb0bcbd64e827f2c0ceefa03a2ee162697311", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9f3cb0bcbd64e827f2c0ceefa03a2ee162697311"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e632c440f88b3e252bf8c0942fc7be21d9e946d3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e632c440f88b3e252bf8c0942fc7be21d9e946d3", "html_url": "https://github.com/rust-lang/rust/commit/e632c440f88b3e252bf8c0942fc7be21d9e946d3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e632c440f88b3e252bf8c0942fc7be21d9e946d3/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4", "url": "https://api.github.com/repos/rust-lang/rust/commits/6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4", "html_url": "https://github.com/rust-lang/rust/commit/6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4"}, {"sha": "ae836c1e44d7459d4588e622a8535f127e32716f", "url": "https://api.github.com/repos/rust-lang/rust/commits/ae836c1e44d7459d4588e622a8535f127e32716f", "html_url": "https://github.com/rust-lang/rust/commit/ae836c1e44d7459d4588e622a8535f127e32716f"}], "stats": {"total": 23, "additions": 23, "deletions": 0}, "files": [{"sha": "9b0e00a41e50851e39c64265ae61d00e4ecf0319", "filename": "src/libextra/serialize.rs", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/e632c440f88b3e252bf8c0942fc7be21d9e946d3/src%2Flibextra%2Fserialize.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e632c440f88b3e252bf8c0942fc7be21d9e946d3/src%2Flibextra%2Fserialize.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibextra%2Fserialize.rs?ref=e632c440f88b3e252bf8c0942fc7be21d9e946d3", "patch": "@@ -20,6 +20,7 @@ Core encoding and decoding interfaces.\n \n use std::at_vec;\n use std::hashmap::{HashMap, HashSet};\n+use std::rc::Rc;\n use std::trie::{TrieMap, TrieSet};\n use std::vec;\n use ringbuf::RingBuf;\n@@ -405,6 +406,20 @@ impl<S:Encoder,T:Encodable<S>> Encodable<S> for @T {\n     }\n }\n \n+impl<S:Encoder,T:Encodable<S> + Freeze> Encodable<S> for Rc<T> {\n+    #[inline]\n+    fn encode(&self, s: &mut S) {\n+        self.borrow().encode(s)\n+    }\n+}\n+\n+impl<D:Decoder,T:Decodable<D> + Freeze> Decodable<D> for Rc<T> {\n+    #[inline]\n+    fn decode(d: &mut D) -> Rc<T> {\n+        Rc::new(Decodable::decode(d))\n+    }\n+}\n+\n impl<D:Decoder,T:Decodable<D> + 'static> Decodable<D> for @T {\n     fn decode(d: &mut D) -> @T {\n         @Decodable::decode(d)"}, {"sha": "28b79bdd320b407286864d8af1993c14d6737006", "filename": "src/libstd/to_bytes.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/e632c440f88b3e252bf8c0942fc7be21d9e946d3/src%2Flibstd%2Fto_bytes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e632c440f88b3e252bf8c0942fc7be21d9e946d3/src%2Flibstd%2Fto_bytes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fto_bytes.rs?ref=e632c440f88b3e252bf8c0942fc7be21d9e946d3", "patch": "@@ -18,6 +18,7 @@ use cast;\n use container::Container;\n use iter::Iterator;\n use option::{None, Option, Some};\n+use rc::Rc;\n use str::{Str, StrSlice};\n use vec::{Vector, ImmutableVector};\n \n@@ -325,6 +326,13 @@ impl<A:IterBytes> IterBytes for @mut A {\n     }\n }\n \n+impl<A:IterBytes> IterBytes for Rc<A> {\n+    #[inline]\n+    fn iter_bytes(&self, lsb0: bool, f: Cb) -> bool {\n+        self.borrow().iter_bytes(lsb0, f)\n+    }\n+}\n+\n impl<A:IterBytes> IterBytes for ~A {\n     #[inline]\n     fn iter_bytes(&self, lsb0: bool, f: Cb) -> bool {"}]}