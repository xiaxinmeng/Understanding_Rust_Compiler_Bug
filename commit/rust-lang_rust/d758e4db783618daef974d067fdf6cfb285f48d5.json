{"sha": "d758e4db783618daef974d067fdf6cfb285f48d5", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ3NThlNGRiNzgzNjE4ZGFlZjk3NGQwNjdmZGY2Y2ZiMjg1ZjQ4ZDU=", "commit": {"author": {"name": "Georg Semmler", "email": "georg_semmler_05@web.de", "date": "2019-01-04T09:19:22Z"}, "committer": {"name": "Georg Semmler", "email": "georg_semmler_05@web.de", "date": "2019-01-04T09:19:22Z"}, "message": "Update tests changed by rebase", "tree": {"sha": "2a5f47b6608239bb35749fcff1fd1ea036675f29", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2a5f47b6608239bb35749fcff1fd1ea036675f29"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d758e4db783618daef974d067fdf6cfb285f48d5", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQEzBAABCgAdFiEEt/EOFp+yWvA8Dk28qHvO5SBc5IkFAlwvJRoACgkQqHvO5SBc\n5IkFNgf/XtDiixWj9CbW6EYi6dN/dPq8xEb8kHxkgAsJWPLqOipxqNQ2eiI9jJoV\nHxqOLfXSPTrO5Ug2I25CWTC67+EozEawSATMqt9+o1o9vd8CTOR47RVEkkU5vmGG\noFHk9gB2MtBtqju/CPVipzm++8G7z45oCIz8o7pHp7UGiz1CfXCe2HVBIhODARIK\nXgZl4MkWJ/lU6QOYXtMKn+imLaU2LttZs6PNZNwlCu1nFU6a5Da70MBYeolH+BH5\nc1YDqamQV1ciX+/hfVmHwQqstkZWfML1UHYJDBud/Tlh7TgHkZrKhCPPfMQTd8Az\ncrgIv5JDLGfLk5PvE0iz2bQ0pcg0iA==\n=5bFb\n-----END PGP SIGNATURE-----", "payload": "tree 2a5f47b6608239bb35749fcff1fd1ea036675f29\nparent ae5c092682d62e44df860e91c7c4c92c9c8987a9\nauthor Georg Semmler <georg_semmler_05@web.de> 1546593562 +0100\ncommitter Georg Semmler <georg_semmler_05@web.de> 1546593562 +0100\n\nUpdate tests changed by rebase\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d758e4db783618daef974d067fdf6cfb285f48d5", "html_url": "https://github.com/rust-lang/rust/commit/d758e4db783618daef974d067fdf6cfb285f48d5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d758e4db783618daef974d067fdf6cfb285f48d5/comments", "author": {"login": "weiznich", "id": 1674512, "node_id": "MDQ6VXNlcjE2NzQ1MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1674512?v=4", "gravatar_id": "", "url": "https://api.github.com/users/weiznich", "html_url": "https://github.com/weiznich", "followers_url": "https://api.github.com/users/weiznich/followers", "following_url": "https://api.github.com/users/weiznich/following{/other_user}", "gists_url": "https://api.github.com/users/weiznich/gists{/gist_id}", "starred_url": "https://api.github.com/users/weiznich/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/weiznich/subscriptions", "organizations_url": "https://api.github.com/users/weiznich/orgs", "repos_url": "https://api.github.com/users/weiznich/repos", "events_url": "https://api.github.com/users/weiznich/events{/privacy}", "received_events_url": "https://api.github.com/users/weiznich/received_events", "type": "User", "site_admin": false}, "committer": {"login": "weiznich", "id": 1674512, "node_id": "MDQ6VXNlcjE2NzQ1MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1674512?v=4", "gravatar_id": "", "url": "https://api.github.com/users/weiznich", "html_url": "https://github.com/weiznich", "followers_url": "https://api.github.com/users/weiznich/followers", "following_url": "https://api.github.com/users/weiznich/following{/other_user}", "gists_url": "https://api.github.com/users/weiznich/gists{/gist_id}", "starred_url": "https://api.github.com/users/weiznich/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/weiznich/subscriptions", "organizations_url": "https://api.github.com/users/weiznich/orgs", "repos_url": "https://api.github.com/users/weiznich/repos", "events_url": "https://api.github.com/users/weiznich/events{/privacy}", "received_events_url": "https://api.github.com/users/weiznich/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ae5c092682d62e44df860e91c7c4c92c9c8987a9", "url": "https://api.github.com/repos/rust-lang/rust/commits/ae5c092682d62e44df860e91c7c4c92c9c8987a9", "html_url": "https://github.com/rust-lang/rust/commit/ae5c092682d62e44df860e91c7c4c92c9c8987a9"}], "stats": {"total": 43, "additions": 39, "deletions": 4}, "files": [{"sha": "756ab2b102b56d819d514fb90a2ead200bb3ff8b", "filename": "src/test/ui/coherence/coherence-fundamental-trait-objects.old.stderr", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d758e4db783618daef974d067fdf6cfb285f48d5/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-fundamental-trait-objects.old.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/d758e4db783618daef974d067fdf6cfb285f48d5/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-fundamental-trait-objects.old.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-fundamental-trait-objects.old.stderr?ref=d758e4db783618daef974d067fdf6cfb285f48d5", "patch": "@@ -1,5 +1,5 @@\n error[E0117]: only traits defined in the current crate can be implemented for arbitrary types\n-  --> $DIR/coherence-fundamental-trait-objects.rs:12:1\n+  --> $DIR/coherence-fundamental-trait-objects.rs:15:1\n    |\n LL | impl Misc for dyn Fundamental<Local> {}\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ impl doesn't use types inside crate", "previous_filename": "src/test/ui/coherence/coherence-fundamental-trait-objects.stderr"}, {"sha": "756ab2b102b56d819d514fb90a2ead200bb3ff8b", "filename": "src/test/ui/coherence/coherence-fundamental-trait-objects.re.stderr", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/d758e4db783618daef974d067fdf6cfb285f48d5/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-fundamental-trait-objects.re.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/d758e4db783618daef974d067fdf6cfb285f48d5/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-fundamental-trait-objects.re.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-fundamental-trait-objects.re.stderr?ref=d758e4db783618daef974d067fdf6cfb285f48d5", "patch": "@@ -0,0 +1,12 @@\n+error[E0117]: only traits defined in the current crate can be implemented for arbitrary types\n+  --> $DIR/coherence-fundamental-trait-objects.rs:15:1\n+   |\n+LL | impl Misc for dyn Fundamental<Local> {}\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ impl doesn't use types inside crate\n+   |\n+   = note: the impl does not reference any types defined in this crate\n+   = note: define and implement a trait or new type instead\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0117`."}, {"sha": "0c7d54425ddc43351da038737efe058ba1c8562c", "filename": "src/test/ui/coherence/coherence-fundamental-trait-objects.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/d758e4db783618daef974d067fdf6cfb285f48d5/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-fundamental-trait-objects.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d758e4db783618daef974d067fdf6cfb285f48d5/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-fundamental-trait-objects.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-fundamental-trait-objects.rs?ref=d758e4db783618daef974d067fdf6cfb285f48d5", "patch": "@@ -3,13 +3,17 @@\n // are distinct.\n \n // aux-build:coherence_fundamental_trait_lib.rs\n+// revisions: old re\n+\n+#![cfg_attr(re, feature(re_rebalance_coherence))]\n \n extern crate coherence_fundamental_trait_lib;\n \n use coherence_fundamental_trait_lib::{Fundamental, Misc};\n \n pub struct Local;\n impl Misc for dyn Fundamental<Local> {}\n-//~^ ERROR E0117\n+//[old]~^ ERROR E0117\n+//[re]~^^ ERROR E0117\n \n fn main() {}"}, {"sha": "db9f9f7665374ce3f0fe00f2dcad8690311fe356", "filename": "src/test/ui/coherence/coherence-subtyping.old.stderr", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d758e4db783618daef974d067fdf6cfb285f48d5/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-subtyping.old.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/d758e4db783618daef974d067fdf6cfb285f48d5/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-subtyping.old.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-subtyping.old.stderr?ref=d758e4db783618daef974d067fdf6cfb285f48d5", "patch": "@@ -1,5 +1,5 @@\n error[E0119]: conflicting implementations of trait `TheTrait` for type `for<'a, 'b> fn(&'a u8, &'b u8) -> &'a u8`:\n-  --> $DIR/coherence-subtyping.rs:11:1\n+  --> $DIR/coherence-subtyping.rs:15:1\n    |\n LL | impl TheTrait for for<'a,'b> fn(&'a u8, &'b u8) -> &'a u8 {\n    | --------------------------------------------------------- first implementation here", "previous_filename": "src/test/ui/coherence/coherence-subtyping.stderr"}, {"sha": "db9f9f7665374ce3f0fe00f2dcad8690311fe356", "filename": "src/test/ui/coherence/coherence-subtyping.re.stderr", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/d758e4db783618daef974d067fdf6cfb285f48d5/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-subtyping.re.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/d758e4db783618daef974d067fdf6cfb285f48d5/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-subtyping.re.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-subtyping.re.stderr?ref=d758e4db783618daef974d067fdf6cfb285f48d5", "patch": "@@ -0,0 +1,14 @@\n+error[E0119]: conflicting implementations of trait `TheTrait` for type `for<'a, 'b> fn(&'a u8, &'b u8) -> &'a u8`:\n+  --> $DIR/coherence-subtyping.rs:15:1\n+   |\n+LL | impl TheTrait for for<'a,'b> fn(&'a u8, &'b u8) -> &'a u8 {\n+   | --------------------------------------------------------- first implementation here\n+...\n+LL | impl TheTrait for for<'a> fn(&'a u8, &'a u8) -> &'a u8 {\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ conflicting implementation for `for<'a, 'b> fn(&'a u8, &'b u8) -> &'a u8`\n+   |\n+   = note: this behavior recently changed as a result of a bug fix; see rust-lang/rust#56105 for details\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0119`."}, {"sha": "f27e14eab63da96951ee661229ce3f467393bd29", "filename": "src/test/ui/coherence/coherence-subtyping.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/d758e4db783618daef974d067fdf6cfb285f48d5/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-subtyping.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d758e4db783618daef974d067fdf6cfb285f48d5/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-subtyping.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-subtyping.rs?ref=d758e4db783618daef974d067fdf6cfb285f48d5", "patch": "@@ -1,6 +1,10 @@\n // Test that two distinct impls which match subtypes of one another\n // yield coherence errors (or not) depending on the variance.\n \n+// revisions: old re\n+\n+#![cfg_attr(re, feature(re_rebalance_coherence))]\n+\n trait TheTrait {\n     fn foo(&self) { }\n }\n@@ -9,7 +13,8 @@ impl TheTrait for for<'a,'b> fn(&'a u8, &'b u8) -> &'a u8 {\n }\n \n impl TheTrait for for<'a> fn(&'a u8, &'a u8) -> &'a u8 {\n-    //~^ ERROR\n+    //[old]~^ ERROR\n+    //[re]~^^ ERROR\n }\n \n fn main() { }"}]}