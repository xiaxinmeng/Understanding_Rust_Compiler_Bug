{"sha": "61d93877b70cfb9cab974ef2fb3c60d9cb50f72f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYxZDkzODc3YjcwY2ZiOWNhYjk3NGVmMmZiM2M2MGQ5Y2I1MGY3MmY=", "commit": {"author": {"name": "Peter Wagenet", "email": "peter.wagenet@gmail.com", "date": "2017-03-13T18:36:44Z"}, "committer": {"name": "Peter Wagenet", "email": "peter.wagenet@gmail.com", "date": "2017-03-14T17:08:29Z"}, "message": "Target builds for older macOS", "tree": {"sha": "223ecf851087011ff7be2588f5cf53c8931f9ae0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/223ecf851087011ff7be2588f5cf53c8931f9ae0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/61d93877b70cfb9cab974ef2fb3c60d9cb50f72f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/61d93877b70cfb9cab974ef2fb3c60d9cb50f72f", "html_url": "https://github.com/rust-lang/rust/commit/61d93877b70cfb9cab974ef2fb3c60d9cb50f72f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/61d93877b70cfb9cab974ef2fb3c60d9cb50f72f/comments", "author": {"login": "wagenet", "id": 9835, "node_id": "MDQ6VXNlcjk4MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/9835?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wagenet", "html_url": "https://github.com/wagenet", "followers_url": "https://api.github.com/users/wagenet/followers", "following_url": "https://api.github.com/users/wagenet/following{/other_user}", "gists_url": "https://api.github.com/users/wagenet/gists{/gist_id}", "starred_url": "https://api.github.com/users/wagenet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wagenet/subscriptions", "organizations_url": "https://api.github.com/users/wagenet/orgs", "repos_url": "https://api.github.com/users/wagenet/repos", "events_url": "https://api.github.com/users/wagenet/events{/privacy}", "received_events_url": "https://api.github.com/users/wagenet/received_events", "type": "User", "site_admin": false}, "committer": {"login": "wagenet", "id": 9835, "node_id": "MDQ6VXNlcjk4MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/9835?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wagenet", "html_url": "https://github.com/wagenet", "followers_url": "https://api.github.com/users/wagenet/followers", "following_url": "https://api.github.com/users/wagenet/following{/other_user}", "gists_url": "https://api.github.com/users/wagenet/gists{/gist_id}", "starred_url": "https://api.github.com/users/wagenet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wagenet/subscriptions", "organizations_url": "https://api.github.com/users/wagenet/orgs", "repos_url": "https://api.github.com/users/wagenet/repos", "events_url": "https://api.github.com/users/wagenet/events{/privacy}", "received_events_url": "https://api.github.com/users/wagenet/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a5483a7f36dfb97c2500c0ed4eedc4a665f3f5b1", "url": "https://api.github.com/repos/rust-lang/rust/commits/a5483a7f36dfb97c2500c0ed4eedc4a665f3f5b1", "html_url": "https://github.com/rust-lang/rust/commit/a5483a7f36dfb97c2500c0ed4eedc4a665f3f5b1"}], "stats": {"total": 19, "additions": 19, "deletions": 0}, "files": [{"sha": "ba70497ba3fd9581993788e05e85c97e63e44db7", "filename": ".travis.yml", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/61d93877b70cfb9cab974ef2fb3c60d9cb50f72f/.travis.yml", "raw_url": "https://github.com/rust-lang/rust/raw/61d93877b70cfb9cab974ef2fb3c60d9cb50f72f/.travis.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.travis.yml?ref=61d93877b70cfb9cab974ef2fb3c60d9cb50f72f", "patch": "@@ -48,6 +48,8 @@ matrix:\n         RUSTC_RETRY_LINKER_ON_SEGFAULT=1\n         SCCACHE_ERROR_LOG=/tmp/sccache.log\n         RUST_LOG=sccache=debug\n+        MACOSX_DEPLOYMENT_TARGET=10.8\n+        MACOSX_STD_DEPLOYMENT_TARGET=10.7\n       os: osx\n       osx_image: xcode8.2\n       install: &osx_install_sccache >\n@@ -60,6 +62,8 @@ matrix:\n         RUSTC_RETRY_LINKER_ON_SEGFAULT=1\n         SCCACHE_ERROR_LOG=/tmp/sccache.log\n         RUST_LOG=sccache=debug\n+        MACOSX_DEPLOYMENT_TARGET=10.8\n+        MACOSX_STD_DEPLOYMENT_TARGET=10.7\n       os: osx\n       osx_image: xcode8.2\n       install: *osx_install_sccache\n@@ -72,6 +76,8 @@ matrix:\n         RUSTC_RETRY_LINKER_ON_SEGFAULT=1\n         SCCACHE_ERROR_LOG=/tmp/sccache.log\n         RUST_LOG=sccache=debug\n+        MACOSX_DEPLOYMENT_TARGET=10.8\n+        MACOSX_STD_DEPLOYMENT_TARGET=10.7\n       os: osx\n       osx_image: xcode8.2\n       install: >\n@@ -85,6 +91,8 @@ matrix:\n         RUSTC_RETRY_LINKER_ON_SEGFAULT=1\n         SCCACHE_ERROR_LOG=/tmp/sccache.log\n         RUST_LOG=sccache=debug\n+        MACOSX_DEPLOYMENT_TARGET=10.8\n+        MACOSX_STD_DEPLOYMENT_TARGET=10.7\n       os: osx\n       osx_image: xcode8.2\n       install: *osx_install_sccache\n@@ -102,6 +110,8 @@ matrix:\n         RUSTC_RETRY_LINKER_ON_SEGFAULT=1\n         SCCACHE_ERROR_LOG=/tmp/sccache.log\n         RUST_LOG=sccache=debug\n+        MACOSX_DEPLOYMENT_TARGET=10.8\n+        MACOSX_STD_DEPLOYMENT_TARGET=10.7\n       os: osx\n       osx_image: xcode8.2\n       install: *osx_install_sccache"}, {"sha": "af1f43eb4c1ae005570dcf75eb3492ad6564a5ed", "filename": "src/bootstrap/compile.rs", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/61d93877b70cfb9cab974ef2fb3c60d9cb50f72f/src%2Fbootstrap%2Fcompile.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61d93877b70cfb9cab974ef2fb3c60d9cb50f72f/src%2Fbootstrap%2Fcompile.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fcompile.rs?ref=61d93877b70cfb9cab974ef2fb3c60d9cb50f72f", "patch": "@@ -20,6 +20,7 @@ use std::collections::HashMap;\n use std::fs::{self, File};\n use std::path::{Path, PathBuf};\n use std::process::Command;\n+use std::env;\n \n use build_helper::{output, mtime, up_to_date};\n use filetime::FileTime;\n@@ -44,6 +45,11 @@ pub fn std(build: &Build, target: &str, compiler: &Compiler) {\n     build.clear_if_dirty(&out_dir, &build.compiler_path(compiler));\n     let mut cargo = build.cargo(compiler, Mode::Libstd, target, \"build\");\n     let mut features = build.std_features();\n+\n+    if let Ok(target) = env::var(\"MACOSX_STD_DEPLOYMENT_TARGET\") {\n+        cargo.env(\"MACOSX_DEPLOYMENT_TARGET\", target);\n+    }\n+\n     // When doing a local rebuild we tell cargo that we're stage1 rather than\n     // stage0. This works fine if the local rust and being-built rust have the\n     // same view of what the default allocator is, but fails otherwise. Since\n@@ -170,6 +176,9 @@ pub fn test(build: &Build, target: &str, compiler: &Compiler) {\n     let out_dir = build.cargo_out(compiler, Mode::Libtest, target);\n     build.clear_if_dirty(&out_dir, &libstd_stamp(build, compiler, target));\n     let mut cargo = build.cargo(compiler, Mode::Libtest, target, \"build\");\n+    if let Ok(target) = env::var(\"MACOSX_STD_DEPLOYMENT_TARGET\") {\n+        cargo.env(\"MACOSX_DEPLOYMENT_TARGET\", target);\n+    }\n     cargo.arg(\"--manifest-path\")\n          .arg(build.src.join(\"src/libtest/Cargo.toml\"));\n     build.run(&mut cargo);"}]}