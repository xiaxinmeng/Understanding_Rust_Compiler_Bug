{"sha": "9d938f69362e9568c14955d7df801c21a2266e66", "node_id": "MDY6Q29tbWl0NzI0NzEyOjlkOTM4ZjY5MzYyZTk1NjhjMTQ5NTVkN2RmODAxYzIxYTIyNjZlNjY=", "commit": {"author": {"name": "David Wood", "email": "david@davidtw.co", "date": "2019-03-13T11:38:10Z"}, "committer": {"name": "David Wood", "email": "david@davidtw.co", "date": "2019-03-13T11:38:10Z"}, "message": "Add test for #55809.\n\nThis commit adds a regression test for #55809 which checks that a\noverflow does not occur when evaluating a requirement for async\nfunctions and `&mut` arguments in some specific circumstances.", "tree": {"sha": "282babe4b1fb6c33c91d642e60d88d780c02c848", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/282babe4b1fb6c33c91d642e60d88d780c02c848"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9d938f69362e9568c14955d7df801c21a2266e66", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEWwgxPGhT5b/6kagXAXYLT59T8VQFAlyI69UACgkQAXYLT59T\n8VRY6Q/8DwmWkfbpmYbh86t+1GBwFClqVacoFAquLoY5lyq8WJBZuZtaj7tasYeQ\n/NL6YpChjLscQIbcAuQO6IElPv4Wcxr9DSBjm8XgLj7641cskFWMPGgxp3Ip2GbQ\n/lymKan8N7Y7tNunHRLuVjmWCgdk+CdDZMiYa98U9xUulCdM5uYdK1XDOWgQwHJc\n1F+TqUEmuMRJDydeIvWJm7tkZ5RDi1VwjYptzXPFeKQHnbeM5q0zvh6Xp8nsIYsY\nvuQyxlx+kMdSW538PCt/8AO3pIHvQTk46Yd2yu/TEd3Jfhgc+jp3pE23Zk/mTY69\nBSaM8q3ukcx4HjTIdBtAGe5Qo1iJcwd1PIlYuxxXF58/H/qLZ/CUPmn+t5LFEox0\n5vKBqIbwQ1CZ1XNdBRcsxPLwjhrq9p7Tys9bI9tMIWwF9ZTlXxEqs3Z7zJyg61tK\nfZiTy0vFmQgmRTX1fTGhgJdE+JpESeBhpyZkY9Km/4X6SHIIW0ElFZoNtkzpNTy3\nNgSnMSBTcqD6q/kTjfr2Kj+6km6kP6/3Aab7QHTOIo98GyxVYWEQB2kGvrvH0rO6\nRYw4vWg0kpsM8IM7mLKLdIanzzB4TSusWc3FoYgJSfO+70oZ1KtrZpnr0PAJLdff\nzdBq2bDm0OxI1mzVywZ3+Y0CmU+6F8s747CF+4vtTJCFo7giOcQ=\n=Arbd\n-----END PGP SIGNATURE-----", "payload": "tree 282babe4b1fb6c33c91d642e60d88d780c02c848\nparent f8860f217dda287600b2b2f1812d3026aa0d35d4\nauthor David Wood <david@davidtw.co> 1552477090 +0100\ncommitter David Wood <david@davidtw.co> 1552477090 +0100\n\nAdd test for #55809.\n\nThis commit adds a regression test for #55809 which checks that a\noverflow does not occur when evaluating a requirement for async\nfunctions and `&mut` arguments in some specific circumstances.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9d938f69362e9568c14955d7df801c21a2266e66", "html_url": "https://github.com/rust-lang/rust/commit/9d938f69362e9568c14955d7df801c21a2266e66", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9d938f69362e9568c14955d7df801c21a2266e66/comments", "author": {"login": "davidtwco", "id": 1295100, "node_id": "MDQ6VXNlcjEyOTUxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1295100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidtwco", "html_url": "https://github.com/davidtwco", "followers_url": "https://api.github.com/users/davidtwco/followers", "following_url": "https://api.github.com/users/davidtwco/following{/other_user}", "gists_url": "https://api.github.com/users/davidtwco/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidtwco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidtwco/subscriptions", "organizations_url": "https://api.github.com/users/davidtwco/orgs", "repos_url": "https://api.github.com/users/davidtwco/repos", "events_url": "https://api.github.com/users/davidtwco/events{/privacy}", "received_events_url": "https://api.github.com/users/davidtwco/received_events", "type": "User", "site_admin": false}, "committer": {"login": "davidtwco", "id": 1295100, "node_id": "MDQ6VXNlcjEyOTUxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1295100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidtwco", "html_url": "https://github.com/davidtwco", "followers_url": "https://api.github.com/users/davidtwco/followers", "following_url": "https://api.github.com/users/davidtwco/following{/other_user}", "gists_url": "https://api.github.com/users/davidtwco/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidtwco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidtwco/subscriptions", "organizations_url": "https://api.github.com/users/davidtwco/orgs", "repos_url": "https://api.github.com/users/davidtwco/repos", "events_url": "https://api.github.com/users/davidtwco/events{/privacy}", "received_events_url": "https://api.github.com/users/davidtwco/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f8860f217dda287600b2b2f1812d3026aa0d35d4", "url": "https://api.github.com/repos/rust-lang/rust/commits/f8860f217dda287600b2b2f1812d3026aa0d35d4", "html_url": "https://github.com/rust-lang/rust/commit/f8860f217dda287600b2b2f1812d3026aa0d35d4"}], "stats": {"total": 30, "additions": 30, "deletions": 0}, "files": [{"sha": "86b0977bebe1d5a3f2821d5e6a9423ed3a5a99b4", "filename": "src/test/run-pass/issue-55809.rs", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/9d938f69362e9568c14955d7df801c21a2266e66/src%2Ftest%2Frun-pass%2Fissue-55809.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9d938f69362e9568c14955d7df801c21a2266e66/src%2Ftest%2Frun-pass%2Fissue-55809.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissue-55809.rs?ref=9d938f69362e9568c14955d7df801c21a2266e66", "patch": "@@ -0,0 +1,30 @@\n+// edition:2018\n+// run-pass\n+\n+#![feature(async_await, await_macro, futures_api)]\n+\n+trait Foo { }\n+\n+impl Foo for () { }\n+\n+impl<'a, T> Foo for &'a mut T where T: Foo { }\n+\n+async fn foo_async<T>(_v: T) -> u8 where T: Foo {\n+    0\n+}\n+\n+async fn bad<T>(v: T) -> u8 where T: Foo {\n+    await!(foo_async(v))\n+}\n+\n+async fn async_main() {\n+    let mut v = ();\n+\n+    let _ = await!(bad(&mut v));\n+    let _ = await!(foo_async(&mut v));\n+    let _ = await!(bad(v));\n+}\n+\n+fn main() {\n+    let _ = async_main();\n+}"}]}