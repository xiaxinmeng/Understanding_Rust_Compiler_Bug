{"sha": "db00c3320f8f0235f2ae022de7ecac65bfd80ff8", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRiMDBjMzMyMGY4ZjAyMzVmMmFlMDIyZGU3ZWNhYzY1YmZkODBmZjg=", "commit": {"author": {"name": "Kampfkarren", "email": "boynedmaster@gmail.com", "date": "2018-12-13T18:15:56Z"}, "committer": {"name": "Kampfkarren", "email": "boynedmaster@gmail.com", "date": "2018-12-13T18:18:17Z"}, "message": "Remove references to sized for end users", "tree": {"sha": "e6c4e197e7de4e4300974fbcb0b13d33e8a9ed19", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e6c4e197e7de4e4300974fbcb0b13d33e8a9ed19"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/db00c3320f8f0235f2ae022de7ecac65bfd80ff8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/db00c3320f8f0235f2ae022de7ecac65bfd80ff8", "html_url": "https://github.com/rust-lang/rust/commit/db00c3320f8f0235f2ae022de7ecac65bfd80ff8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/db00c3320f8f0235f2ae022de7ecac65bfd80ff8/comments", "author": {"login": "Kampfkarren", "id": 3190756, "node_id": "MDQ6VXNlcjMxOTA3NTY=", "avatar_url": "https://avatars.githubusercontent.com/u/3190756?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kampfkarren", "html_url": "https://github.com/Kampfkarren", "followers_url": "https://api.github.com/users/Kampfkarren/followers", "following_url": "https://api.github.com/users/Kampfkarren/following{/other_user}", "gists_url": "https://api.github.com/users/Kampfkarren/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kampfkarren/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kampfkarren/subscriptions", "organizations_url": "https://api.github.com/users/Kampfkarren/orgs", "repos_url": "https://api.github.com/users/Kampfkarren/repos", "events_url": "https://api.github.com/users/Kampfkarren/events{/privacy}", "received_events_url": "https://api.github.com/users/Kampfkarren/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Kampfkarren", "id": 3190756, "node_id": "MDQ6VXNlcjMxOTA3NTY=", "avatar_url": "https://avatars.githubusercontent.com/u/3190756?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kampfkarren", "html_url": "https://github.com/Kampfkarren", "followers_url": "https://api.github.com/users/Kampfkarren/followers", "following_url": "https://api.github.com/users/Kampfkarren/following{/other_user}", "gists_url": "https://api.github.com/users/Kampfkarren/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kampfkarren/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kampfkarren/subscriptions", "organizations_url": "https://api.github.com/users/Kampfkarren/orgs", "repos_url": "https://api.github.com/users/Kampfkarren/repos", "events_url": "https://api.github.com/users/Kampfkarren/events{/privacy}", "received_events_url": "https://api.github.com/users/Kampfkarren/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9fc914cf4d6c508d1d07a2ff94ee23d1840eb5e5", "url": "https://api.github.com/repos/rust-lang/rust/commits/9fc914cf4d6c508d1d07a2ff94ee23d1840eb5e5", "html_url": "https://github.com/rust-lang/rust/commit/9fc914cf4d6c508d1d07a2ff94ee23d1840eb5e5"}], "stats": {"total": 23, "additions": 12, "deletions": 11}, "files": [{"sha": "1713fda031f6d5b23b611debaf78ab490b5e5db7", "filename": "CHANGELOG.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/db00c3320f8f0235f2ae022de7ecac65bfd80ff8/CHANGELOG.md", "raw_url": "https://github.com/rust-lang/rust/raw/db00c3320f8f0235f2ae022de7ecac65bfd80ff8/CHANGELOG.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/CHANGELOG.md?ref=db00c3320f8f0235f2ae022de7ecac65bfd80ff8", "patch": "@@ -899,7 +899,7 @@ All notable changes to this project will be documented in this file.\n [`useless_let_if_seq`]: https://rust-lang.github.io/rust-clippy/master/index.html#useless_let_if_seq\n [`useless_transmute`]: https://rust-lang.github.io/rust-clippy/master/index.html#useless_transmute\n [`useless_vec`]: https://rust-lang.github.io/rust-clippy/master/index.html#useless_vec\n-[`vec_box_sized`]: https://rust-lang.github.io/rust-clippy/master/index.html#vec_box_sized\n+[`vec_box`]: https://rust-lang.github.io/rust-clippy/master/index.html#vec_box\n [`verbose_bit_mask`]: https://rust-lang.github.io/rust-clippy/master/index.html#verbose_bit_mask\n [`while_immutable_condition`]: https://rust-lang.github.io/rust-clippy/master/index.html#while_immutable_condition\n [`while_let_loop`]: https://rust-lang.github.io/rust-clippy/master/index.html#while_let_loop"}, {"sha": "f4b5edee84c5a44ae5f3b3dcc81202f82fd368a9", "filename": "clippy_lints/src/lib.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/db00c3320f8f0235f2ae022de7ecac65bfd80ff8/clippy_lints%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/db00c3320f8f0235f2ae022de7ecac65bfd80ff8/clippy_lints%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.rs?ref=db00c3320f8f0235f2ae022de7ecac65bfd80ff8", "patch": "@@ -766,7 +766,7 @@ pub fn register_plugins(reg: &mut rustc_plugin::Registry<'_>, conf: &Conf) {\n         types::UNIT_ARG,\n         types::UNIT_CMP,\n         types::UNNECESSARY_CAST,\n-        types::VEC_BOX_SIZED,\n+        types::VEC_BOX,\n         unicode::ZERO_WIDTH_SPACE,\n         unsafe_removed_from_name::UNSAFE_REMOVED_FROM_NAME,\n         unused_io_amount::UNUSED_IO_AMOUNT,\n@@ -932,7 +932,7 @@ pub fn register_plugins(reg: &mut rustc_plugin::Registry<'_>, conf: &Conf) {\n         types::TYPE_COMPLEXITY,\n         types::UNIT_ARG,\n         types::UNNECESSARY_CAST,\n-        types::VEC_BOX_SIZED,\n+        types::VEC_BOX,\n         unused_label::UNUSED_LABEL,\n         zero_div_zero::ZERO_DIVIDED_BY_ZERO,\n     ]);"}, {"sha": "62e99b92d3513f4452557c0008493351823acdbb", "filename": "clippy_lints/src/types.rs", "status": "modified", "additions": 7, "deletions": 6, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/db00c3320f8f0235f2ae022de7ecac65bfd80ff8/clippy_lints%2Fsrc%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/db00c3320f8f0235f2ae022de7ecac65bfd80ff8/clippy_lints%2Fsrc%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ftypes.rs?ref=db00c3320f8f0235f2ae022de7ecac65bfd80ff8", "patch": "@@ -90,7 +90,7 @@ declare_clippy_lint! {\n /// }\n /// ```\n declare_clippy_lint! {\n-    pub VEC_BOX_SIZED,\n+    pub VEC_BOX,\n     complexity,\n     \"usage of `Vec<Box<T>>` where T: Sized, vector elements are already on the heap\"\n }\n@@ -175,7 +175,7 @@ declare_clippy_lint! {\n \n impl LintPass for TypePass {\n     fn get_lints(&self) -> LintArray {\n-        lint_array!(BOX_VEC, VEC_BOX_SIZED, OPTION_OPTION, LINKEDLIST, BORROWED_BOX)\n+        lint_array!(BOX_VEC, VEC_BOX, OPTION_OPTION, LINKEDLIST, BORROWED_BOX)\n     }\n }\n \n@@ -292,13 +292,14 @@ fn check_ty(cx: &LateContext<'_, '_>, ast_ty: &hir::Ty, is_local: bool) {\n                         then {\n                             span_lint_and_sugg(\n                                 cx,\n-                                VEC_BOX_SIZED,\n+                                VEC_BOX,\n                                 ast_ty.span,\n-                                \"you seem to be trying to use `Vec<Box<T>>`, but T is Sized. `Vec<T>` is already on the heap, `Vec<Box<T>>` makes an extra allocation.\",\n+                                \"`Vec<T>` is already on the heap, the boxing is unnecessary.\",\n                                 \"try\",\n                                 format!(\"Vec<{}>\", boxed_type),\n-                                Applicability::MachineApplicable\n-                            )\n+                                Applicability::MaybeIncorrect,\n+                            );\n+                            return; // don't recurse into the type\n                         }\n                     }\n                 } else if match_def_path(cx.tcx, def_id, &paths::OPTION) {"}, {"sha": "7f4bdfb5aed95a1ca477fa42bd2d376a60ea8ef7", "filename": "tests/ui/vec_box_sized.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/db00c3320f8f0235f2ae022de7ecac65bfd80ff8/tests%2Fui%2Fvec_box_sized.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/db00c3320f8f0235f2ae022de7ecac65bfd80ff8/tests%2Fui%2Fvec_box_sized.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fvec_box_sized.stderr?ref=db00c3320f8f0235f2ae022de7ecac65bfd80ff8", "patch": "@@ -1,10 +1,10 @@\n-error: you seem to be trying to use `Vec<Box<T>>`, but T is Sized. `Vec<T>` is already on the heap, `Vec<Box<T>>` makes an extra allocation.\n+error: `Vec<T>` is already on the heap, the boxing is unnecessary.\n   --> $DIR/vec_box_sized.rs:10:14\n    |\n 10 |     sized_type: Vec<Box<SizedStruct>>,\n    |                 ^^^^^^^^^^^^^^^^^^^^^ help: try: `Vec<SizedStruct>`\n    |\n-   = note: `-D clippy::vec-box-sized` implied by `-D warnings`\n+   = note: `-D clippy::vec-box` implied by `-D warnings`\n \n error: aborting due to previous error\n "}]}