{"sha": "6d0a765d34a1f94645310f36d39c5125fea563f2", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZkMGE3NjVkMzRhMWY5NDY0NTMxMGYzNmQzOWM1MTI1ZmVhNTYzZjI=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2020-06-21T12:37:29Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-06-21T12:37:29Z"}, "message": "Merge #4962\n\n4962: Implement APIs for parsing expressions, types, paths, patterns and items r=davidlattimore a=davidlattimore\n\n\n\nCo-authored-by: David Lattimore <dml@google.com>", "tree": {"sha": "cb25ad5b951dfe9a2993c5bc9f4c193ed1317788", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cb25ad5b951dfe9a2993c5bc9f4c193ed1317788"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6d0a765d34a1f94645310f36d39c5125fea563f2", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJe71SJCRBK7hj4Ov3rIwAAdHIIAC6QAGtP6051eSXlqcz4TdH6\nFFw30x18TXBt6S2PM647MnmpQVT5kpJO76D8EyNaiD7NQbeS6qXNY+8g2EVOHP4J\ntCxA0af5+8hGi8Ct7OYszHkBCJA0JHIUCTpVG9pHZBbXMDbz3ZGWC6NWBRwE10Kk\nLOjfnty4oIYyoNGjaI4/I/SCCuStUu6DBt18MJYSqp4+tUL6PsteiXiF+dIY/eRU\nDDYI66TLK1rDRhWo96QFLy9VW5Vwe6IXJZjYJVRLG52PrRD5jfZmPTxopSxAboBS\niADlfB3ERbKPpnt8S6ONM2RL+CpIhKSC3EncSi4jhnTik2Crljbb4m+XKDtDF+0=\n=i6WG\n-----END PGP SIGNATURE-----\n", "payload": "tree cb25ad5b951dfe9a2993c5bc9f4c193ed1317788\nparent 50dad50188f9eef5b10b2908351e668e8ba8a0c5\nparent bc99e95d7d954701c36142881302bb70e791bec1\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1592743049 +0000\ncommitter GitHub <noreply@github.com> 1592743049 +0000\n\nMerge #4962\n\n4962: Implement APIs for parsing expressions, types, paths, patterns and items r=davidlattimore a=davidlattimore\n\n\n\nCo-authored-by: David Lattimore <dml@google.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6d0a765d34a1f94645310f36d39c5125fea563f2", "html_url": "https://github.com/rust-lang/rust/commit/6d0a765d34a1f94645310f36d39c5125fea563f2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6d0a765d34a1f94645310f36d39c5125fea563f2/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "50dad50188f9eef5b10b2908351e668e8ba8a0c5", "url": "https://api.github.com/repos/rust-lang/rust/commits/50dad50188f9eef5b10b2908351e668e8ba8a0c5", "html_url": "https://github.com/rust-lang/rust/commit/50dad50188f9eef5b10b2908351e668e8ba8a0c5"}, {"sha": "bc99e95d7d954701c36142881302bb70e791bec1", "url": "https://api.github.com/repos/rust-lang/rust/commits/bc99e95d7d954701c36142881302bb70e791bec1", "html_url": "https://github.com/rust-lang/rust/commit/bc99e95d7d954701c36142881302bb70e791bec1"}], "stats": {"total": 223, "additions": 222, "deletions": 1}, "files": [{"sha": "9b766457679f58d4a0b46605f489329b3c791915", "filename": "crates/ra_syntax/src/lib.rs", "status": "modified", "additions": 35, "deletions": 0, "changes": 35, "blob_url": "https://github.com/rust-lang/rust/blob/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Flib.rs?ref=6d0a765d34a1f94645310f36d39c5125fea563f2", "patch": "@@ -168,6 +168,41 @@ impl SourceFile {\n     }\n }\n \n+impl ast::Path {\n+    /// Returns `text`, parsed as a path, but only if it has no errors.\n+    pub fn parse(text: &str) -> Result<Self, ()> {\n+        parsing::parse_text_fragment(text, ra_parser::FragmentKind::Path)\n+    }\n+}\n+\n+impl ast::Pat {\n+    /// Returns `text`, parsed as a pattern, but only if it has no errors.\n+    pub fn parse(text: &str) -> Result<Self, ()> {\n+        parsing::parse_text_fragment(text, ra_parser::FragmentKind::Pattern)\n+    }\n+}\n+\n+impl ast::Expr {\n+    /// Returns `text`, parsed as an expression, but only if it has no errors.\n+    pub fn parse(text: &str) -> Result<Self, ()> {\n+        parsing::parse_text_fragment(text, ra_parser::FragmentKind::Expr)\n+    }\n+}\n+\n+impl ast::ModuleItem {\n+    /// Returns `text`, parsed as an item, but only if it has no errors.\n+    pub fn parse(text: &str) -> Result<Self, ()> {\n+        parsing::parse_text_fragment(text, ra_parser::FragmentKind::Item)\n+    }\n+}\n+\n+impl ast::TypeRef {\n+    /// Returns `text`, parsed as an type reference, but only if it has no errors.\n+    pub fn parse(text: &str) -> Result<Self, ()> {\n+        parsing::parse_text_fragment(text, ra_parser::FragmentKind::Type)\n+    }\n+}\n+\n /// Matches a `SyntaxNode` against an `ast` type.\n ///\n /// # Example:"}, {"sha": "0ed3c20ef928865f2f93a1065bc1a0ff45de0a8e", "filename": "crates/ra_syntax/src/parsing.rs", "status": "modified", "additions": 31, "deletions": 1, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Fsrc%2Fparsing.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Fsrc%2Fparsing.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fparsing.rs?ref=6d0a765d34a1f94645310f36d39c5125fea563f2", "patch": "@@ -6,13 +6,14 @@ mod text_token_source;\n mod text_tree_sink;\n mod reparsing;\n \n-use crate::{syntax_node::GreenNode, SyntaxError};\n+use crate::{syntax_node::GreenNode, AstNode, SyntaxError, SyntaxNode};\n use text_token_source::TextTokenSource;\n use text_tree_sink::TextTreeSink;\n \n pub use lexer::*;\n \n pub(crate) use self::reparsing::incremental_reparse;\n+use ra_parser::SyntaxKind;\n \n pub(crate) fn parse_text(text: &str) -> (GreenNode, Vec<SyntaxError>) {\n     let (tokens, lexer_errors) = tokenize(&text);\n@@ -27,3 +28,32 @@ pub(crate) fn parse_text(text: &str) -> (GreenNode, Vec<SyntaxError>) {\n \n     (tree, parser_errors)\n }\n+\n+/// Returns `text` parsed as a `T` provided there are no parse errors.\n+pub(crate) fn parse_text_fragment<T: AstNode>(\n+    text: &str,\n+    fragment_kind: ra_parser::FragmentKind,\n+) -> Result<T, ()> {\n+    let (tokens, lexer_errors) = tokenize(&text);\n+    if !lexer_errors.is_empty() {\n+        return Err(());\n+    }\n+\n+    let mut token_source = TextTokenSource::new(text, &tokens);\n+    let mut tree_sink = TextTreeSink::new(text, &tokens);\n+\n+    // TextTreeSink assumes that there's at least some root node to which it can attach errors and\n+    // tokens. We arbitrarily give it a SourceFile.\n+    use ra_parser::TreeSink;\n+    tree_sink.start_node(SyntaxKind::SOURCE_FILE);\n+    ra_parser::parse_fragment(&mut token_source, &mut tree_sink, fragment_kind);\n+    tree_sink.finish_node();\n+\n+    let (tree, parser_errors) = tree_sink.finish();\n+    use ra_parser::TokenSource;\n+    if !parser_errors.is_empty() || token_source.current().kind != SyntaxKind::EOF {\n+        return Err(());\n+    }\n+\n+    SyntaxNode::new_root(tree).first_child().and_then(T::cast).ok_or(())\n+}"}, {"sha": "959967b7922362f521532b5c0a47b70beb845f68", "filename": "crates/ra_syntax/src/tests.rs", "status": "modified", "additions": 66, "deletions": 0, "changes": 66, "blob_url": "https://github.com/rust-lang/rust/blob/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Fsrc%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Fsrc%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Ftests.rs?ref=6d0a765d34a1f94645310f36d39c5125fea563f2", "patch": "@@ -54,6 +54,51 @@ fn parser_tests() {\n     });\n }\n \n+#[test]\n+fn expr_parser_tests() {\n+    fragment_parser_dir_test(\n+        &[\"parser/fragments/expr/ok\"],\n+        &[\"parser/fragments/expr/err\"],\n+        crate::ast::Expr::parse,\n+    );\n+}\n+\n+#[test]\n+fn path_parser_tests() {\n+    fragment_parser_dir_test(\n+        &[\"parser/fragments/path/ok\"],\n+        &[\"parser/fragments/path/err\"],\n+        crate::ast::Path::parse,\n+    );\n+}\n+\n+#[test]\n+fn pattern_parser_tests() {\n+    fragment_parser_dir_test(\n+        &[\"parser/fragments/pattern/ok\"],\n+        &[\"parser/fragments/pattern/err\"],\n+        crate::ast::Pat::parse,\n+    );\n+}\n+\n+#[test]\n+fn item_parser_tests() {\n+    fragment_parser_dir_test(\n+        &[\"parser/fragments/item/ok\"],\n+        &[\"parser/fragments/item/err\"],\n+        crate::ast::ModuleItem::parse,\n+    );\n+}\n+\n+#[test]\n+fn type_parser_tests() {\n+    fragment_parser_dir_test(\n+        &[\"parser/fragments/type/ok\"],\n+        &[\"parser/fragments/type/err\"],\n+        crate::ast::TypeRef::parse,\n+    );\n+}\n+\n #[test]\n fn parser_fuzz_tests() {\n     for (_, text) in collect_rust_files(&test_data_dir(), &[\"parser/fuzz-failures\"]) {\n@@ -134,3 +179,24 @@ fn dump_tokens_and_errors(tokens: &[Token], errors: &[SyntaxError], text: &str)\n     }\n     acc\n }\n+\n+fn fragment_parser_dir_test<T, F>(ok_paths: &[&str], err_paths: &[&str], f: F)\n+where\n+    T: crate::AstNode,\n+    F: Fn(&str) -> Result<T, ()>,\n+{\n+    dir_tests(&test_data_dir(), ok_paths, \"rast\", |text, path| {\n+        if let Ok(node) = f(text) {\n+            format!(\"{:#?}\", crate::ast::AstNode::syntax(&node))\n+        } else {\n+            panic!(\"Failed to parse '{:?}'\", path);\n+        }\n+    });\n+    dir_tests(&test_data_dir(), err_paths, \"rast\", |text, path| {\n+        if let Ok(_) = f(text) {\n+            panic!(\"'{:?}' successfully parsed when it should have errored\", path);\n+        } else {\n+            \"ERROR\\n\".to_owned()\n+        }\n+    });\n+}"}, {"sha": "5df7507e2de1edff6c240a9c549c5c2b14e8a190", "filename": "crates/ra_syntax/test_data/parser/fragments/expr/err/0000_truncated_add.rast", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fexpr%2Ferr%2F0000_truncated_add.rast", "raw_url": "https://github.com/rust-lang/rust/raw/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fexpr%2Ferr%2F0000_truncated_add.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fexpr%2Ferr%2F0000_truncated_add.rast?ref=6d0a765d34a1f94645310f36d39c5125fea563f2", "patch": "@@ -0,0 +1 @@\n+ERROR"}, {"sha": "ca49acb079e2e0a90ef5cecad257a0e27b7f7ef1", "filename": "crates/ra_syntax/test_data/parser/fragments/expr/err/0000_truncated_add.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fexpr%2Ferr%2F0000_truncated_add.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fexpr%2Ferr%2F0000_truncated_add.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fexpr%2Ferr%2F0000_truncated_add.rs?ref=6d0a765d34a1f94645310f36d39c5125fea563f2", "patch": "@@ -0,0 +1 @@\n+1 +"}, {"sha": "fa78a02a6bf449e4d1bf583c0a5a03231792f42b", "filename": "crates/ra_syntax/test_data/parser/fragments/expr/ok/0000_add.rast", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fexpr%2Fok%2F0000_add.rast", "raw_url": "https://github.com/rust-lang/rust/raw/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fexpr%2Fok%2F0000_add.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fexpr%2Fok%2F0000_add.rast?ref=6d0a765d34a1f94645310f36d39c5125fea563f2", "patch": "@@ -0,0 +1,8 @@\n+BIN_EXPR@0..5\n+  LITERAL@0..1\n+    INT_NUMBER@0..1 \"1\"\n+  WHITESPACE@1..2 \" \"\n+  PLUS@2..3 \"+\"\n+  WHITESPACE@3..4 \" \"\n+  LITERAL@4..5\n+    INT_NUMBER@4..5 \"2\""}, {"sha": "e0ef5840209cba55095233da06d417f0c5ac7e00", "filename": "crates/ra_syntax/test_data/parser/fragments/expr/ok/0000_add.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fexpr%2Fok%2F0000_add.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fexpr%2Fok%2F0000_add.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fexpr%2Fok%2F0000_add.rs?ref=6d0a765d34a1f94645310f36d39c5125fea563f2", "patch": "@@ -0,0 +1 @@\n+1 + 2"}, {"sha": "5df7507e2de1edff6c240a9c549c5c2b14e8a190", "filename": "crates/ra_syntax/test_data/parser/fragments/item/err/0000_extra_keyword.rast", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fitem%2Ferr%2F0000_extra_keyword.rast", "raw_url": "https://github.com/rust-lang/rust/raw/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fitem%2Ferr%2F0000_extra_keyword.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fitem%2Ferr%2F0000_extra_keyword.rast?ref=6d0a765d34a1f94645310f36d39c5125fea563f2", "patch": "@@ -0,0 +1 @@\n+ERROR"}, {"sha": "dc32389bbb79e914093ab979ef9d23b11cdddcc0", "filename": "crates/ra_syntax/test_data/parser/fragments/item/err/0000_extra_keyword.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fitem%2Ferr%2F0000_extra_keyword.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fitem%2Ferr%2F0000_extra_keyword.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fitem%2Ferr%2F0000_extra_keyword.rs?ref=6d0a765d34a1f94645310f36d39c5125fea563f2", "patch": "@@ -0,0 +1 @@\n+fn fn foo() {}"}, {"sha": "f1e78f38829e6343588ebfe32f2bf06ecd7b22cc", "filename": "crates/ra_syntax/test_data/parser/fragments/item/ok/0000_fn.rast", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fitem%2Fok%2F0000_fn.rast", "raw_url": "https://github.com/rust-lang/rust/raw/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fitem%2Fok%2F0000_fn.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fitem%2Fok%2F0000_fn.rast?ref=6d0a765d34a1f94645310f36d39c5125fea563f2", "patch": "@@ -0,0 +1,12 @@\n+FN_DEF@0..11\n+  FN_KW@0..2 \"fn\"\n+  WHITESPACE@2..3 \" \"\n+  NAME@3..6\n+    IDENT@3..6 \"foo\"\n+  PARAM_LIST@6..8\n+    L_PAREN@6..7 \"(\"\n+    R_PAREN@7..8 \")\"\n+  WHITESPACE@8..9 \" \"\n+  BLOCK_EXPR@9..11\n+    L_CURLY@9..10 \"{\"\n+    R_CURLY@10..11 \"}\""}, {"sha": "8f3b7ef112a0f4951016967f520b9399c02f902d", "filename": "crates/ra_syntax/test_data/parser/fragments/item/ok/0000_fn.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fitem%2Fok%2F0000_fn.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fitem%2Fok%2F0000_fn.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fitem%2Fok%2F0000_fn.rs?ref=6d0a765d34a1f94645310f36d39c5125fea563f2", "patch": "@@ -0,0 +1 @@\n+fn foo() {}"}, {"sha": "5df7507e2de1edff6c240a9c549c5c2b14e8a190", "filename": "crates/ra_syntax/test_data/parser/fragments/path/err/0000_reserved_word.rast", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpath%2Ferr%2F0000_reserved_word.rast", "raw_url": "https://github.com/rust-lang/rust/raw/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpath%2Ferr%2F0000_reserved_word.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpath%2Ferr%2F0000_reserved_word.rast?ref=6d0a765d34a1f94645310f36d39c5125fea563f2", "patch": "@@ -0,0 +1 @@\n+ERROR"}, {"sha": "2046de04929f3945bf86c84d65496deba7ae7fd8", "filename": "crates/ra_syntax/test_data/parser/fragments/path/err/0000_reserved_word.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpath%2Ferr%2F0000_reserved_word.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpath%2Ferr%2F0000_reserved_word.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpath%2Ferr%2F0000_reserved_word.rs?ref=6d0a765d34a1f94645310f36d39c5125fea563f2", "patch": "@@ -0,0 +1 @@\n+struct"}, {"sha": "5df7507e2de1edff6c240a9c549c5c2b14e8a190", "filename": "crates/ra_syntax/test_data/parser/fragments/path/err/0001_expression.rast", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpath%2Ferr%2F0001_expression.rast", "raw_url": "https://github.com/rust-lang/rust/raw/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpath%2Ferr%2F0001_expression.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpath%2Ferr%2F0001_expression.rast?ref=6d0a765d34a1f94645310f36d39c5125fea563f2", "patch": "@@ -0,0 +1 @@\n+ERROR"}, {"sha": "745e8d376f74da507d315cea74116b2d5cbf96de", "filename": "crates/ra_syntax/test_data/parser/fragments/path/err/0001_expression.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpath%2Ferr%2F0001_expression.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpath%2Ferr%2F0001_expression.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpath%2Ferr%2F0001_expression.rs?ref=6d0a765d34a1f94645310f36d39c5125fea563f2", "patch": "@@ -0,0 +1 @@\n+a + b"}, {"sha": "0c5d4360fa8d5dbdb2000708f24c232f7ad8ba49", "filename": "crates/ra_syntax/test_data/parser/fragments/path/ok/0000_single_ident.rast", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpath%2Fok%2F0000_single_ident.rast", "raw_url": "https://github.com/rust-lang/rust/raw/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpath%2Fok%2F0000_single_ident.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpath%2Fok%2F0000_single_ident.rast?ref=6d0a765d34a1f94645310f36d39c5125fea563f2", "patch": "@@ -0,0 +1,4 @@\n+PATH@0..3\n+  PATH_SEGMENT@0..3\n+    NAME_REF@0..3\n+      IDENT@0..3 \"foo\""}, {"sha": "257cc5642cb1a054f08cc83f2d943e56fd3ebe99", "filename": "crates/ra_syntax/test_data/parser/fragments/path/ok/0000_single_ident.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpath%2Fok%2F0000_single_ident.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpath%2Fok%2F0000_single_ident.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpath%2Fok%2F0000_single_ident.rs?ref=6d0a765d34a1f94645310f36d39c5125fea563f2", "patch": "@@ -0,0 +1 @@\n+foo"}, {"sha": "4a2b45e6a968e00a44bec5af2227042a90f20d71", "filename": "crates/ra_syntax/test_data/parser/fragments/path/ok/0001_multipart.rast", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpath%2Fok%2F0001_multipart.rast", "raw_url": "https://github.com/rust-lang/rust/raw/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpath%2Fok%2F0001_multipart.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpath%2Fok%2F0001_multipart.rast?ref=6d0a765d34a1f94645310f36d39c5125fea563f2", "patch": "@@ -0,0 +1,14 @@\n+PATH@0..13\n+  PATH@0..8\n+    PATH@0..3\n+      PATH_SEGMENT@0..3\n+        NAME_REF@0..3\n+          IDENT@0..3 \"foo\"\n+    COLON2@3..5 \"::\"\n+    PATH_SEGMENT@5..8\n+      NAME_REF@5..8\n+        IDENT@5..8 \"bar\"\n+  COLON2@8..10 \"::\"\n+  PATH_SEGMENT@10..13\n+    NAME_REF@10..13\n+      IDENT@10..13 \"baz\""}, {"sha": "81e0b21cd4105c0225f62f414f2fac29adaccf3d", "filename": "crates/ra_syntax/test_data/parser/fragments/path/ok/0001_multipart.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpath%2Fok%2F0001_multipart.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpath%2Fok%2F0001_multipart.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpath%2Fok%2F0001_multipart.rs?ref=6d0a765d34a1f94645310f36d39c5125fea563f2", "patch": "@@ -0,0 +1 @@\n+foo::bar::baz"}, {"sha": "5df7507e2de1edff6c240a9c549c5c2b14e8a190", "filename": "crates/ra_syntax/test_data/parser/fragments/pattern/err/0000_reserved_word.rast", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpattern%2Ferr%2F0000_reserved_word.rast", "raw_url": "https://github.com/rust-lang/rust/raw/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpattern%2Ferr%2F0000_reserved_word.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpattern%2Ferr%2F0000_reserved_word.rast?ref=6d0a765d34a1f94645310f36d39c5125fea563f2", "patch": "@@ -0,0 +1 @@\n+ERROR"}, {"sha": "ae26fc4556604acde5227fb00eb5c35a5bb4077f", "filename": "crates/ra_syntax/test_data/parser/fragments/pattern/err/0000_reserved_word.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpattern%2Ferr%2F0000_reserved_word.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpattern%2Ferr%2F0000_reserved_word.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpattern%2Ferr%2F0000_reserved_word.rs?ref=6d0a765d34a1f94645310f36d39c5125fea563f2", "patch": "@@ -0,0 +1 @@\n+fn"}, {"sha": "5df7507e2de1edff6c240a9c549c5c2b14e8a190", "filename": "crates/ra_syntax/test_data/parser/fragments/pattern/err/0001_missing_paren.rast", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpattern%2Ferr%2F0001_missing_paren.rast", "raw_url": "https://github.com/rust-lang/rust/raw/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpattern%2Ferr%2F0001_missing_paren.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpattern%2Ferr%2F0001_missing_paren.rast?ref=6d0a765d34a1f94645310f36d39c5125fea563f2", "patch": "@@ -0,0 +1 @@\n+ERROR"}, {"sha": "61a391d08460babc26054738b42da0612b7cfc30", "filename": "crates/ra_syntax/test_data/parser/fragments/pattern/err/0001_missing_paren.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpattern%2Ferr%2F0001_missing_paren.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpattern%2Ferr%2F0001_missing_paren.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpattern%2Ferr%2F0001_missing_paren.rs?ref=6d0a765d34a1f94645310f36d39c5125fea563f2", "patch": "@@ -0,0 +1 @@\n+Some(x"}, {"sha": "15eb7f9c67fe01488fa3b1ed803919e8626aa7f4", "filename": "crates/ra_syntax/test_data/parser/fragments/pattern/ok/0000_enum.rast", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpattern%2Fok%2F0000_enum.rast", "raw_url": "https://github.com/rust-lang/rust/raw/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpattern%2Fok%2F0000_enum.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpattern%2Fok%2F0000_enum.rast?ref=6d0a765d34a1f94645310f36d39c5125fea563f2", "patch": "@@ -0,0 +1,10 @@\n+TUPLE_STRUCT_PAT@0..7\n+  PATH@0..4\n+    PATH_SEGMENT@0..4\n+      NAME_REF@0..4\n+        IDENT@0..4 \"Some\"\n+  L_PAREN@4..5 \"(\"\n+  BIND_PAT@5..6\n+    NAME@5..6\n+      IDENT@5..6 \"x\"\n+  R_PAREN@6..7 \")\""}, {"sha": "87114dd78814cac401f0fd74424cf08d09d15451", "filename": "crates/ra_syntax/test_data/parser/fragments/pattern/ok/0000_enum.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpattern%2Fok%2F0000_enum.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpattern%2Fok%2F0000_enum.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Fpattern%2Fok%2F0000_enum.rs?ref=6d0a765d34a1f94645310f36d39c5125fea563f2", "patch": "@@ -0,0 +1 @@\n+Some(x)"}, {"sha": "5df7507e2de1edff6c240a9c549c5c2b14e8a190", "filename": "crates/ra_syntax/test_data/parser/fragments/type/err/0000_missing_close.rast", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Ftype%2Ferr%2F0000_missing_close.rast", "raw_url": "https://github.com/rust-lang/rust/raw/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Ftype%2Ferr%2F0000_missing_close.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Ftype%2Ferr%2F0000_missing_close.rast?ref=6d0a765d34a1f94645310f36d39c5125fea563f2", "patch": "@@ -0,0 +1 @@\n+ERROR"}, {"sha": "caa4d7c09275bdbff9d1ec03c7469fd0abbffd4a", "filename": "crates/ra_syntax/test_data/parser/fragments/type/err/0000_missing_close.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Ftype%2Ferr%2F0000_missing_close.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Ftype%2Ferr%2F0000_missing_close.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Ftype%2Ferr%2F0000_missing_close.rs?ref=6d0a765d34a1f94645310f36d39c5125fea563f2", "patch": "@@ -0,0 +1 @@\n+Result<Foo, Bar"}, {"sha": "8831cfa6c8efd17b9bef65addf9d83891e438375", "filename": "crates/ra_syntax/test_data/parser/fragments/type/ok/0000_result.rast", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Ftype%2Fok%2F0000_result.rast", "raw_url": "https://github.com/rust-lang/rust/raw/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Ftype%2Fok%2F0000_result.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Ftype%2Fok%2F0000_result.rast?ref=6d0a765d34a1f94645310f36d39c5125fea563f2", "patch": "@@ -0,0 +1,22 @@\n+PATH_TYPE@0..16\n+  PATH@0..16\n+    PATH_SEGMENT@0..16\n+      NAME_REF@0..6\n+        IDENT@0..6 \"Result\"\n+      TYPE_ARG_LIST@6..16\n+        L_ANGLE@6..7 \"<\"\n+        TYPE_ARG@7..10\n+          PATH_TYPE@7..10\n+            PATH@7..10\n+              PATH_SEGMENT@7..10\n+                NAME_REF@7..10\n+                  IDENT@7..10 \"Foo\"\n+        COMMA@10..11 \",\"\n+        WHITESPACE@11..12 \" \"\n+        TYPE_ARG@12..15\n+          PATH_TYPE@12..15\n+            PATH@12..15\n+              PATH_SEGMENT@12..15\n+                NAME_REF@12..15\n+                  IDENT@12..15 \"Bar\"\n+        R_ANGLE@15..16 \">\""}, {"sha": "b50b3bb3bfd68dfe86f0948907e844ae4e1335b6", "filename": "crates/ra_syntax/test_data/parser/fragments/type/ok/0000_result.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Ftype%2Fok%2F0000_result.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6d0a765d34a1f94645310f36d39c5125fea563f2/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Ftype%2Fok%2F0000_result.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ffragments%2Ftype%2Fok%2F0000_result.rs?ref=6d0a765d34a1f94645310f36d39c5125fea563f2", "patch": "@@ -0,0 +1 @@\n+Result<Foo, Bar>"}]}