{"sha": "8dfabdf11c6cdaffd7c6e6552a6ead8d52c49b10", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhkZmFiZGYxMWM2Y2RhZmZkN2M2ZTY1NTJhNmVhZDhkNTJjNDliMTA=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-03-01T16:03:15Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-03-01T16:03:15Z"}, "message": "Auto merge of #3823 - spastorino:place_base, r=flip1995\n\nPlace::Local(x) is now Place::Base(PlaceBase::Local(x))\n\nWe need to merge this after the beta cut for this https://github.com/rust-lang/rust/pull/58631 to work.\n/cc @oli-obk", "tree": {"sha": "87ef52662a292a7afb590b9e3723c6f322358946", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/87ef52662a292a7afb590b9e3723c6f322358946"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8dfabdf11c6cdaffd7c6e6552a6ead8d52c49b10", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8dfabdf11c6cdaffd7c6e6552a6ead8d52c49b10", "html_url": "https://github.com/rust-lang/rust/commit/8dfabdf11c6cdaffd7c6e6552a6ead8d52c49b10", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8dfabdf11c6cdaffd7c6e6552a6ead8d52c49b10/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9f2055637e3a32064517c888f7d69b4fad6d67c5", "url": "https://api.github.com/repos/rust-lang/rust/commits/9f2055637e3a32064517c888f7d69b4fad6d67c5", "html_url": "https://github.com/rust-lang/rust/commit/9f2055637e3a32064517c888f7d69b4fad6d67c5"}, {"sha": "77a67c914d92cd2a9ec1e6d36ea84a37a05e0338", "url": "https://api.github.com/repos/rust-lang/rust/commits/77a67c914d92cd2a9ec1e6d36ea84a37a05e0338", "html_url": "https://github.com/rust-lang/rust/commit/77a67c914d92cd2a9ec1e6d36ea84a37a05e0338"}], "stats": {"total": 9, "additions": 5, "deletions": 4}, "files": [{"sha": "65276937bc2d08cc10a703d710c03d944e1e252c", "filename": "clippy_lints/src/redundant_clone.rs", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/8dfabdf11c6cdaffd7c6e6552a6ead8d52c49b10/clippy_lints%2Fsrc%2Fredundant_clone.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8dfabdf11c6cdaffd7c6e6552a6ead8d52c49b10/clippy_lints%2Fsrc%2Fredundant_clone.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fredundant_clone.rs?ref=8dfabdf11c6cdaffd7c6e6552a6ead8d52c49b10", "patch": "@@ -143,7 +143,7 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for RedundantClone {\n                 let pred_arg = if_chain! {\n                     if let Some((pred_fn_def_id, pred_arg, pred_arg_ty, Some(res))) =\n                         is_call_with_ref_arg(cx, mir, &pred_terminator.kind);\n-                    if *res == mir::Place::Local(cloned);\n+                    if *res == mir::Place::Base(mir::PlaceBase::Local(cloned));\n                     if match_def_path(cx.tcx, pred_fn_def_id, &paths::DEREF_TRAIT_METHOD);\n                     if match_type(cx, pred_arg_ty, &paths::PATH_BUF)\n                         || match_type(cx, pred_arg_ty, &paths::OS_STRING);\n@@ -229,7 +229,7 @@ fn is_call_with_ref_arg<'tcx>(\n     if_chain! {\n         if let TerminatorKind::Call { func, args, destination, .. } = kind;\n         if args.len() == 1;\n-        if let mir::Operand::Move(mir::Place::Local(local)) = &args[0];\n+        if let mir::Operand::Move(mir::Place::Base(mir::PlaceBase::Local(local))) = &args[0];\n         if let ty::FnDef(def_id, _) = func.ty(&*mir, cx.tcx).sty;\n         if let (inner_ty, 1) = walk_ptrs_ty_depth(args[0].ty(&*mir, cx.tcx));\n         if !is_copy(cx, inner_ty);\n@@ -255,7 +255,7 @@ fn find_stmt_assigns_to<'a, 'tcx: 'a>(\n     stmts\n         .rev()\n         .find_map(|stmt| {\n-            if let mir::StatementKind::Assign(mir::Place::Local(local), v) = &stmt.kind {\n+            if let mir::StatementKind::Assign(mir::Place::Base(mir::PlaceBase::Local(local)), v) = &stmt.kind {\n                 if *local == to {\n                     return Some(v);\n                 }\n@@ -285,6 +285,7 @@ fn base_local_and_movability<'tcx>(\n     mut place: &mir::Place<'tcx>,\n ) -> Option<(mir::Local, CannotMoveOut)> {\n     use rustc::mir::Place::*;\n+    use rustc::mir::PlaceBase;\n \n     // Dereference. You cannot move things out from a borrowed value.\n     let mut deref = false;\n@@ -293,7 +294,7 @@ fn base_local_and_movability<'tcx>(\n \n     loop {\n         match place {\n-            Local(local) => return Some((*local, deref || field)),\n+            Base(PlaceBase::Local(local)) => return Some((*local, deref || field)),\n             Projection(proj) => {\n                 place = &proj.base;\n                 deref = deref || matches!(proj.elem, mir::ProjectionElem::Deref);"}]}