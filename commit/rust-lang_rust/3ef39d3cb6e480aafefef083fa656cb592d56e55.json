{"sha": "3ef39d3cb6e480aafefef083fa656cb592d56e55", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNlZjM5ZDNjYjZlNDgwYWFmZWZlZjA4M2ZhNjU2Y2I1OTJkNTZlNTU=", "commit": {"author": {"name": "S\u00e9bastien Marie", "email": "semarie@users.noreply.github.com", "date": "2017-11-26T09:08:25Z"}, "committer": {"name": "S\u00e9bastien Marie", "email": "semarie@users.noreply.github.com", "date": "2017-11-26T09:08:25Z"}, "message": "make OpenBSD to use libc++ instead of (e)stdc++", "tree": {"sha": "30dff541d6f7dbf89bea836d0cc5a894b97db182", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/30dff541d6f7dbf89bea836d0cc5a894b97db182"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3ef39d3cb6e480aafefef083fa656cb592d56e55", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3ef39d3cb6e480aafefef083fa656cb592d56e55", "html_url": "https://github.com/rust-lang/rust/commit/3ef39d3cb6e480aafefef083fa656cb592d56e55", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3ef39d3cb6e480aafefef083fa656cb592d56e55/comments", "author": {"login": "semarie", "id": 8948701, "node_id": "MDQ6VXNlcjg5NDg3MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/8948701?v=4", "gravatar_id": "", "url": "https://api.github.com/users/semarie", "html_url": "https://github.com/semarie", "followers_url": "https://api.github.com/users/semarie/followers", "following_url": "https://api.github.com/users/semarie/following{/other_user}", "gists_url": "https://api.github.com/users/semarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/semarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/semarie/subscriptions", "organizations_url": "https://api.github.com/users/semarie/orgs", "repos_url": "https://api.github.com/users/semarie/repos", "events_url": "https://api.github.com/users/semarie/events{/privacy}", "received_events_url": "https://api.github.com/users/semarie/received_events", "type": "User", "site_admin": false}, "committer": {"login": "semarie", "id": 8948701, "node_id": "MDQ6VXNlcjg5NDg3MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/8948701?v=4", "gravatar_id": "", "url": "https://api.github.com/users/semarie", "html_url": "https://github.com/semarie", "followers_url": "https://api.github.com/users/semarie/followers", "following_url": "https://api.github.com/users/semarie/following{/other_user}", "gists_url": "https://api.github.com/users/semarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/semarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/semarie/subscriptions", "organizations_url": "https://api.github.com/users/semarie/orgs", "repos_url": "https://api.github.com/users/semarie/repos", "events_url": "https://api.github.com/users/semarie/events{/privacy}", "received_events_url": "https://api.github.com/users/semarie/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2f84fb5cc1ac5f04bdf5a281997e02bcf4fc18d9", "url": "https://api.github.com/repos/rust-lang/rust/commits/2f84fb5cc1ac5f04bdf5a281997e02bcf4fc18d9", "html_url": "https://github.com/rust-lang/rust/commit/2f84fb5cc1ac5f04bdf5a281997e02bcf4fc18d9"}], "stats": {"total": 9, "additions": 5, "deletions": 4}, "files": [{"sha": "ab421dec7807ff9fcb3fc244e5da54ad140f41d5", "filename": "src/librustc_back/target/openbsd_base.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/3ef39d3cb6e480aafefef083fa656cb592d56e55/src%2Flibrustc_back%2Ftarget%2Fopenbsd_base.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3ef39d3cb6e480aafefef083fa656cb592d56e55/src%2Flibrustc_back%2Ftarget%2Fopenbsd_base.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Ftarget%2Fopenbsd_base.rs?ref=3ef39d3cb6e480aafefef083fa656cb592d56e55", "patch": "@@ -34,6 +34,7 @@ pub fn opts() -> TargetOptions {\n         is_like_openbsd: true,\n         pre_link_args: args,\n         position_independent_executables: true,\n+        eliminate_frame_pointer: false, // FIXME 43575\n         relro_level: RelroLevel::Full,\n         .. Default::default()\n     }"}, {"sha": "141a9a8d704d2ee473f7a51cf590169800aba784", "filename": "src/librustc_llvm/build.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3ef39d3cb6e480aafefef083fa656cb592d56e55/src%2Flibrustc_llvm%2Fbuild.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3ef39d3cb6e480aafefef083fa656cb592d56e55/src%2Flibrustc_llvm%2Fbuild.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_llvm%2Fbuild.rs?ref=3ef39d3cb6e480aafefef083fa656cb592d56e55", "patch": "@@ -252,8 +252,8 @@ fn main() {\n     let llvm_static_stdcpp = env::var_os(\"LLVM_STATIC_STDCPP\");\n \n     let stdcppname = if target.contains(\"openbsd\") {\n-        // OpenBSD has a particular C++ runtime library name\n-        \"estdc++\"\n+        // llvm-config on OpenBSD doesn't mention stdlib=libc++\n+        \"c++\"\n     } else if target.contains(\"netbsd\") && llvm_static_stdcpp.is_some() {\n         // NetBSD uses a separate library when relocation is required\n         \"stdc++_pic\""}, {"sha": "d8457dab51bba63e31806ce15b57c94f2637ddc7", "filename": "src/libunwind/build.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3ef39d3cb6e480aafefef083fa656cb592d56e55/src%2Flibunwind%2Fbuild.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3ef39d3cb6e480aafefef083fa656cb592d56e55/src%2Flibunwind%2Fbuild.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibunwind%2Fbuild.rs?ref=3ef39d3cb6e480aafefef083fa656cb592d56e55", "patch": "@@ -27,7 +27,7 @@ fn main() {\n     } else if target.contains(\"netbsd\") {\n         println!(\"cargo:rustc-link-lib=gcc_s\");\n     } else if target.contains(\"openbsd\") {\n-        println!(\"cargo:rustc-link-lib=gcc\");\n+        println!(\"cargo:rustc-link-lib=c++abi\");\n     } else if target.contains(\"solaris\") {\n         println!(\"cargo:rustc-link-lib=gcc_s\");\n     } else if target.contains(\"bitrig\") {"}, {"sha": "a882ef448b96b3c7bc0bc2cb907f07a173f77de4", "filename": "src/test/run-make/tools.mk", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3ef39d3cb6e480aafefef083fa656cb592d56e55/src%2Ftest%2Frun-make%2Ftools.mk", "raw_url": "https://github.com/rust-lang/rust/raw/3ef39d3cb6e480aafefef083fa656cb592d56e55/src%2Ftest%2Frun-make%2Ftools.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Ftools.mk?ref=3ef39d3cb6e480aafefef083fa656cb592d56e55", "patch": "@@ -92,7 +92,7 @@ ifeq ($(UNAME),SunOS)\n \tEXTRACFLAGS := -lm -lpthread -lposix4 -lsocket -lresolv\n else\n ifeq ($(UNAME),OpenBSD)\n-\tEXTRACFLAGS := -lm -lpthread\n+\tEXTRACFLAGS := -lm -lpthread -lc++abi\n \tRUSTC := $(RUSTC) -C linker=\"$(word 1,$(CC:ccache=))\"\n else\n \tEXTRACFLAGS := -lm -lrt -ldl -lpthread"}]}