{"sha": "a6b9fa0cd1a6eb29a127e05d10910d8b8f194f59", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE2YjlmYTBjZDFhNmViMjlhMTI3ZTA1ZDEwOTEwZDhiOGYxOTRmNTk=", "commit": {"author": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2012-05-11T21:42:31Z"}, "committer": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2012-05-12T01:27:17Z"}, "message": "new test for loaning out an index", "tree": {"sha": "1471385f720fcf7e4b97325adf186c8dbd9e2a48", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1471385f720fcf7e4b97325adf186c8dbd9e2a48"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a6b9fa0cd1a6eb29a127e05d10910d8b8f194f59", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a6b9fa0cd1a6eb29a127e05d10910d8b8f194f59", "html_url": "https://github.com/rust-lang/rust/commit/a6b9fa0cd1a6eb29a127e05d10910d8b8f194f59", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a6b9fa0cd1a6eb29a127e05d10910d8b8f194f59/comments", "author": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "63eb8e0e8784ad8cc126bf80a9267c30b4a3a82a", "url": "https://api.github.com/repos/rust-lang/rust/commits/63eb8e0e8784ad8cc126bf80a9267c30b4a3a82a", "html_url": "https://github.com/rust-lang/rust/commit/63eb8e0e8784ad8cc126bf80a9267c30b4a3a82a"}], "stats": {"total": 36, "additions": 36, "deletions": 0}, "files": [{"sha": "053f138bc99215964041a252ee7745c4b363923c", "filename": "src/test/compile-fail/borrowck-loan-vec-content.rs", "status": "added", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/a6b9fa0cd1a6eb29a127e05d10910d8b8f194f59/src%2Ftest%2Fcompile-fail%2Fborrowck-loan-vec-content.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a6b9fa0cd1a6eb29a127e05d10910d8b8f194f59/src%2Ftest%2Fcompile-fail%2Fborrowck-loan-vec-content.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fborrowck-loan-vec-content.rs?ref=a6b9fa0cd1a6eb29a127e05d10910d8b8f194f59", "patch": "@@ -0,0 +1,36 @@\n+// compile-flags:--borrowck=err\n+\n+// Here we check that it is allowed to lend out an element of a\n+// (locally rooted) mutable, unique vector, and that we then prevent\n+// modifications to the contents.\n+\n+fn takes_imm_elt(_v: &int, f: fn()) {\n+    f();\n+}\n+\n+fn has_mut_vec_and_does_not_try_to_change_it() {\n+    let v = [mut 1, 2, 3];\n+    takes_imm_elt(&v[0]) {||\n+    }\n+}\n+\n+fn has_mut_vec_but_tries_to_change_it() {\n+    let v = [mut 1, 2, 3];\n+    takes_imm_elt(&v[0]) {|| //! NOTE loan of mutable vec content granted here\n+        v[1] = 4; //! ERROR assigning to mutable vec content prohibited due to outstanding loan\n+    }\n+}\n+\n+fn takes_const_elt(_v: &const int, f: fn()) {\n+    f();\n+}\n+\n+fn has_mut_vec_and_tries_to_change_it() {\n+    let v = [mut 1, 2, 3];\n+    takes_const_elt(&const v[0]) {||\n+        v[1] = 4;\n+    }\n+}\n+\n+fn main() {\n+}\n\\ No newline at end of file"}]}