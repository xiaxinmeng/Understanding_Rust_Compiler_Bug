{"sha": "3a37c9a47eaf55cc76f313331f375559993b3ab1", "node_id": "C_kwDOAAsO6NoAKDNhMzdjOWE0N2VhZjU1Y2M3NmYzMTMzMzFmMzc1NTU5OTkzYjNhYjE", "commit": {"author": {"name": "Dylan DPC", "email": "99973273+Dylan-DPC@users.noreply.github.com", "date": "2022-07-28T11:08:34Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-07-28T11:08:34Z"}, "message": "Rollup merge of #99837 - TaKO8Ki:avoid-symbol-to-string-conversions, r=fee1-dead\n\nAvoid `Symbol` to `String` conversions\n\nfollow-up to #99508", "tree": {"sha": "1253ed68d592637b85960228267000b638fcc5f6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1253ed68d592637b85960228267000b638fcc5f6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3a37c9a47eaf55cc76f313331f375559993b3ab1", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJi4m4yCRBK7hj4Ov3rIwAAiAsIAFVZOO1/2X7MTufqiPBdnNFW\n3WC87j/dKLOqPH+SYfGYd9mPlmcgRIqIkrme+ox+vkyg77KE+JvmNrmvFlKC19eX\nEBVsHbPOUWq3IxA8d+awns0ACuYBRLk3UTKn0ALRPvm1d5aBOsUllU4SMiBxzBOK\nUOE51DqfS/Kxhml6k7VM+wby9yei6Nvm1P9tX8fULUSFrEiRMNgP56HzCNtGXtJm\nLGaOKbHjrn0EjRk8IiSMOItGVo37VAaa2I2e8v3U5+jQkP/bL3CXWQe2XKneqv1r\n39SAwrlVOPuuzsYt99brqDUnvqyvMvfCifkU8UCJ4cnvlt4rGb9gVMkdnDk7mmM=\n=6mR0\n-----END PGP SIGNATURE-----\n", "payload": "tree 1253ed68d592637b85960228267000b638fcc5f6\nparent 3c4a66d04e2c3e6cd87a5c89f0a6c8905caaa976\nparent 3cbc94427cb00ff53b0b085acacc7219a32a444f\nauthor Dylan DPC <99973273+Dylan-DPC@users.noreply.github.com> 1659006514 +0530\ncommitter GitHub <noreply@github.com> 1659006514 +0530\n\nRollup merge of #99837 - TaKO8Ki:avoid-symbol-to-string-conversions, r=fee1-dead\n\nAvoid `Symbol` to `String` conversions\n\nfollow-up to #99508\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3a37c9a47eaf55cc76f313331f375559993b3ab1", "html_url": "https://github.com/rust-lang/rust/commit/3a37c9a47eaf55cc76f313331f375559993b3ab1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3a37c9a47eaf55cc76f313331f375559993b3ab1/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3c4a66d04e2c3e6cd87a5c89f0a6c8905caaa976", "url": "https://api.github.com/repos/rust-lang/rust/commits/3c4a66d04e2c3e6cd87a5c89f0a6c8905caaa976", "html_url": "https://github.com/rust-lang/rust/commit/3c4a66d04e2c3e6cd87a5c89f0a6c8905caaa976"}, {"sha": "3cbc94427cb00ff53b0b085acacc7219a32a444f", "url": "https://api.github.com/repos/rust-lang/rust/commits/3cbc94427cb00ff53b0b085acacc7219a32a444f", "html_url": "https://github.com/rust-lang/rust/commit/3cbc94427cb00ff53b0b085acacc7219a32a444f"}], "stats": {"total": 12, "additions": 6, "deletions": 6}, "files": [{"sha": "ccc29adc0153ee206a14d14fa03e1ffaf07af8ee", "filename": "compiler/rustc_expand/src/config.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3a37c9a47eaf55cc76f313331f375559993b3ab1/compiler%2Frustc_expand%2Fsrc%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3a37c9a47eaf55cc76f313331f375559993b3ab1/compiler%2Frustc_expand%2Fsrc%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_expand%2Fsrc%2Fconfig.rs?ref=3a37c9a47eaf55cc76f313331f375559993b3ab1", "patch": "@@ -129,7 +129,7 @@ fn get_features(\n                         .span_suggestion(\n                             mi.span(),\n                             \"expected just one word\",\n-                            format!(\"{}\", ident.name),\n+                            ident.name,\n                             Applicability::MaybeIncorrect,\n                         )\n                         .emit();"}, {"sha": "6c8faed0df4867125b990be66441157b3d469339", "filename": "compiler/rustc_trait_selection/src/traits/error_reporting/suggestions.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/3a37c9a47eaf55cc76f313331f375559993b3ab1/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fsuggestions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3a37c9a47eaf55cc76f313331f375559993b3ab1/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fsuggestions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fsuggestions.rs?ref=3a37c9a47eaf55cc76f313331f375559993b3ab1", "patch": "@@ -184,7 +184,7 @@ pub trait InferCtxtExt<'tcx> {\n         trait_pred: ty::PolyTraitPredicate<'tcx>,\n     ) -> bool;\n \n-    fn get_closure_name(&self, def_id: DefId, err: &mut Diagnostic, msg: &str) -> Option<String>;\n+    fn get_closure_name(&self, def_id: DefId, err: &mut Diagnostic, msg: &str) -> Option<Symbol>;\n \n     fn suggest_fn_call(\n         &self,\n@@ -737,13 +737,13 @@ impl<'a, 'tcx> InferCtxtExt<'tcx> for InferCtxt<'a, 'tcx> {\n     /// Given a closure's `DefId`, return the given name of the closure.\n     ///\n     /// This doesn't account for reassignments, but it's only used for suggestions.\n-    fn get_closure_name(&self, def_id: DefId, err: &mut Diagnostic, msg: &str) -> Option<String> {\n-        let get_name = |err: &mut Diagnostic, kind: &hir::PatKind<'_>| -> Option<String> {\n+    fn get_closure_name(&self, def_id: DefId, err: &mut Diagnostic, msg: &str) -> Option<Symbol> {\n+        let get_name = |err: &mut Diagnostic, kind: &hir::PatKind<'_>| -> Option<Symbol> {\n             // Get the local name of this closure. This can be inaccurate because\n             // of the possibility of reassignment, but this should be good enough.\n             match &kind {\n-                hir::PatKind::Binding(hir::BindingAnnotation::Unannotated, _, name, None) => {\n-                    Some(format!(\"{}\", name))\n+                hir::PatKind::Binding(hir::BindingAnnotation::Unannotated, _, ident, None) => {\n+                    Some(ident.name)\n                 }\n                 _ => {\n                     err.note(msg);"}]}