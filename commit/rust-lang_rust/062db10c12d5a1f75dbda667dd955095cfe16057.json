{"sha": "062db10c12d5a1f75dbda667dd955095cfe16057", "node_id": "C_kwDOAAsO6NoAKDA2MmRiMTBjMTJkNWExZjc1ZGJkYTY2N2RkOTU1MDk1Y2ZlMTYwNTc", "commit": {"author": {"name": "Jason Newcomb", "email": "jsnewcomb@pm.me", "date": "2022-01-12T17:33:47Z"}, "committer": {"name": "Jason Newcomb", "email": "jsnewcomb@pm.me", "date": "2022-01-12T17:33:47Z"}, "message": "Add `manual_memcpy_test` for `VecDeque`", "tree": {"sha": "fc92793dac427b5181e0b13fdc5e40a5d316012e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fc92793dac427b5181e0b13fdc5e40a5d316012e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/062db10c12d5a1f75dbda667dd955095cfe16057", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/062db10c12d5a1f75dbda667dd955095cfe16057", "html_url": "https://github.com/rust-lang/rust/commit/062db10c12d5a1f75dbda667dd955095cfe16057", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/062db10c12d5a1f75dbda667dd955095cfe16057/comments", "author": {"login": "Jarcho", "id": 7761774, "node_id": "MDQ6VXNlcjc3NjE3NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/7761774?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jarcho", "html_url": "https://github.com/Jarcho", "followers_url": "https://api.github.com/users/Jarcho/followers", "following_url": "https://api.github.com/users/Jarcho/following{/other_user}", "gists_url": "https://api.github.com/users/Jarcho/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jarcho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jarcho/subscriptions", "organizations_url": "https://api.github.com/users/Jarcho/orgs", "repos_url": "https://api.github.com/users/Jarcho/repos", "events_url": "https://api.github.com/users/Jarcho/events{/privacy}", "received_events_url": "https://api.github.com/users/Jarcho/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Jarcho", "id": 7761774, "node_id": "MDQ6VXNlcjc3NjE3NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/7761774?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jarcho", "html_url": "https://github.com/Jarcho", "followers_url": "https://api.github.com/users/Jarcho/followers", "following_url": "https://api.github.com/users/Jarcho/following{/other_user}", "gists_url": "https://api.github.com/users/Jarcho/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jarcho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jarcho/subscriptions", "organizations_url": "https://api.github.com/users/Jarcho/orgs", "repos_url": "https://api.github.com/users/Jarcho/repos", "events_url": "https://api.github.com/users/Jarcho/events{/privacy}", "received_events_url": "https://api.github.com/users/Jarcho/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3925def9cf0daace7e725840d6044ad9d831c40d", "url": "https://api.github.com/repos/rust-lang/rust/commits/3925def9cf0daace7e725840d6044ad9d831c40d", "html_url": "https://github.com/rust-lang/rust/commit/3925def9cf0daace7e725840d6044ad9d831c40d"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "ea0535d076b81911d99676b6d785afe22141544a", "filename": "tests/ui/manual_memcpy/without_loop_counters.rs", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/062db10c12d5a1f75dbda667dd955095cfe16057/tests%2Fui%2Fmanual_memcpy%2Fwithout_loop_counters.rs", "raw_url": "https://github.com/rust-lang/rust/raw/062db10c12d5a1f75dbda667dd955095cfe16057/tests%2Fui%2Fmanual_memcpy%2Fwithout_loop_counters.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmanual_memcpy%2Fwithout_loop_counters.rs?ref=062db10c12d5a1f75dbda667dd955095cfe16057", "patch": "@@ -113,6 +113,17 @@ pub fn manual_copy(src: &[i32], dst: &mut [i32], dst2: &mut [i32]) {\n     for i in 0.. {\n         dst[i] = src[i];\n     }\n+\n+    // VecDeque - ideally this would work, but would require something like `range_as_slices`\n+    let mut dst = std::collections::VecDeque::from_iter([0; 5]);\n+    let src = std::collections::VecDeque::from_iter([0, 1, 2, 3, 4]);\n+    for i in 0..dst.len() {\n+        dst[i] = src[i];\n+    }\n+    let src = vec![0, 1, 2, 3, 4];\n+    for i in 0..dst.len() {\n+        dst[i] = src[i];\n+    }\n }\n \n #[warn(clippy::needless_range_loop, clippy::manual_memcpy)]"}, {"sha": "c163ae061dfc934235b87a4b5ef0c8971ae370e5", "filename": "tests/ui/manual_memcpy/without_loop_counters.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/062db10c12d5a1f75dbda667dd955095cfe16057/tests%2Fui%2Fmanual_memcpy%2Fwithout_loop_counters.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/062db10c12d5a1f75dbda667dd955095cfe16057/tests%2Fui%2Fmanual_memcpy%2Fwithout_loop_counters.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmanual_memcpy%2Fwithout_loop_counters.stderr?ref=062db10c12d5a1f75dbda667dd955095cfe16057", "patch": "@@ -104,7 +104,7 @@ LL | |     }\n    | |_____^ help: try replacing the loop by: `dst[..0].copy_from_slice(&src[..0]);`\n \n error: it looks like you're manually copying between slices\n-  --> $DIR/without_loop_counters.rs:120:5\n+  --> $DIR/without_loop_counters.rs:131:5\n    |\n LL | /     for i in 0..src.len() {\n LL | |         dst[i] = src[i].clone();"}]}