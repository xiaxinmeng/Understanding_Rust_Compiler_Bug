{"sha": "c18c0ad2bc5988ca7953459e5a35ece8e69e35e7", "node_id": "MDY6Q29tbWl0NzI0NzEyOmMxOGMwYWQyYmM1OTg4Y2E3OTUzNDU5ZTVhMzVlY2U4ZTY5ZTM1ZTc=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-04-12T10:49:39Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-04-12T10:49:39Z"}, "message": "Auto merge of #84068 - Amanieu:fix_lint, r=lcnr\n\nAdd `bad_asm_style` to  HardwiredLints\n\nThis was missed when the lint was added, which prevents the lint from being ignored with `#[allow]`.", "tree": {"sha": "431be7e00be89e78279941edf6ffef3ec633b805", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/431be7e00be89e78279941edf6ffef3ec633b805"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c18c0ad2bc5988ca7953459e5a35ece8e69e35e7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c18c0ad2bc5988ca7953459e5a35ece8e69e35e7", "html_url": "https://github.com/rust-lang/rust/commit/c18c0ad2bc5988ca7953459e5a35ece8e69e35e7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c18c0ad2bc5988ca7953459e5a35ece8e69e35e7/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "67e402f94693f0bcf44381db4d92d2da164eb99a", "url": "https://api.github.com/repos/rust-lang/rust/commits/67e402f94693f0bcf44381db4d92d2da164eb99a", "html_url": "https://github.com/rust-lang/rust/commit/67e402f94693f0bcf44381db4d92d2da164eb99a"}, {"sha": "83c2c5b98cd8bd644703961748b1c3cffa97c948", "url": "https://api.github.com/repos/rust-lang/rust/commits/83c2c5b98cd8bd644703961748b1c3cffa97c948", "html_url": "https://github.com/rust-lang/rust/commit/83c2c5b98cd8bd644703961748b1c3cffa97c948"}], "stats": {"total": 28, "additions": 16, "deletions": 12}, "files": [{"sha": "53b94e18306314ad9b2a4310b1092154a3c5bbde", "filename": "compiler/rustc_lint_defs/src/builtin.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c18c0ad2bc5988ca7953459e5a35ece8e69e35e7/compiler%2Frustc_lint_defs%2Fsrc%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c18c0ad2bc5988ca7953459e5a35ece8e69e35e7/compiler%2Frustc_lint_defs%2Fsrc%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_lint_defs%2Fsrc%2Fbuiltin.rs?ref=c18c0ad2bc5988ca7953459e5a35ece8e69e35e7", "patch": "@@ -2944,6 +2944,7 @@ declare_lint_pass! {\n         NONTRIVIAL_STRUCTURAL_MATCH,\n         SOFT_UNSTABLE,\n         INLINE_NO_SANITIZE,\n+        BAD_ASM_STYLE,\n         ASM_SUB_REGISTER,\n         UNSAFE_OP_IN_UNSAFE_FN,\n         INCOMPLETE_INCLUDE,"}, {"sha": "bcae1d565f136790d0c004776b9542c3d2bf5356", "filename": "src/test/ui/asm/inline-syntax.arm.stderr", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/c18c0ad2bc5988ca7953459e5a35ece8e69e35e7/src%2Ftest%2Fui%2Fasm%2Finline-syntax.arm.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c18c0ad2bc5988ca7953459e5a35ece8e69e35e7/src%2Ftest%2Fui%2Fasm%2Finline-syntax.arm.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasm%2Finline-syntax.arm.stderr?ref=c18c0ad2bc5988ca7953459e5a35ece8e69e35e7", "patch": "@@ -1,5 +1,5 @@\n error: unknown directive\n-  --> $DIR/inline-syntax.rs:22:15\n+  --> $DIR/inline-syntax.rs:25:15\n    |\n LL |         asm!(\".intel_syntax noprefix\", \"nop\");\n    |               ^\n@@ -11,7 +11,7 @@ LL |     .intel_syntax noprefix\n    |     ^\n \n error: unknown directive\n-  --> $DIR/inline-syntax.rs:25:15\n+  --> $DIR/inline-syntax.rs:28:15\n    |\n LL |         asm!(\".intel_syntax aaa noprefix\", \"nop\");\n    |               ^\n@@ -23,7 +23,7 @@ LL |     .intel_syntax aaa noprefix\n    |     ^\n \n error: unknown directive\n-  --> $DIR/inline-syntax.rs:28:15\n+  --> $DIR/inline-syntax.rs:31:15\n    |\n LL |         asm!(\".att_syntax noprefix\", \"nop\");\n    |               ^\n@@ -35,7 +35,7 @@ LL |     .att_syntax noprefix\n    |     ^\n \n error: unknown directive\n-  --> $DIR/inline-syntax.rs:31:15\n+  --> $DIR/inline-syntax.rs:34:15\n    |\n LL |         asm!(\".att_syntax bbb noprefix\", \"nop\");\n    |               ^\n@@ -47,7 +47,7 @@ LL |     .att_syntax bbb noprefix\n    |     ^\n \n error: unknown directive\n-  --> $DIR/inline-syntax.rs:34:15\n+  --> $DIR/inline-syntax.rs:37:15\n    |\n LL |         asm!(\".intel_syntax noprefix; nop\");\n    |               ^\n@@ -59,7 +59,7 @@ LL |     .intel_syntax noprefix; nop\n    |     ^\n \n error: unknown directive\n-  --> $DIR/inline-syntax.rs:40:13\n+  --> $DIR/inline-syntax.rs:43:13\n    |\n LL |             .intel_syntax noprefix\n    |             ^"}, {"sha": "13ded19cfea915e5c6181315e932df4126017c1b", "filename": "src/test/ui/asm/inline-syntax.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c18c0ad2bc5988ca7953459e5a35ece8e69e35e7/src%2Ftest%2Fui%2Fasm%2Finline-syntax.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c18c0ad2bc5988ca7953459e5a35ece8e69e35e7/src%2Ftest%2Fui%2Fasm%2Finline-syntax.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasm%2Finline-syntax.rs?ref=c18c0ad2bc5988ca7953459e5a35ece8e69e35e7", "patch": "@@ -2,12 +2,15 @@\n // revisions: x86_64 arm\n //[x86_64] compile-flags: --target x86_64-unknown-linux-gnu\n //[x86_64] check-pass\n+//[x86_64_allowed] compile-flags: --target x86_64-unknown-linux-gnu\n+//[x86_64_allowed] check-pass\n //[arm] compile-flags: --target armv7-unknown-linux-gnueabihf\n //[arm] build-fail\n \n #![feature(no_core, lang_items, rustc_attrs)]\n #![crate_type = \"rlib\"]\n #![no_core]\n+#![cfg_attr(x86_64_allowed, allow(bad_asm_style))]\n \n #[rustc_builtin_macro]\n macro_rules! asm {"}, {"sha": "02b29b09013ddc5186fd27ca062b82954ae5ae3e", "filename": "src/test/ui/asm/inline-syntax.x86_64.stderr", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/c18c0ad2bc5988ca7953459e5a35ece8e69e35e7/src%2Ftest%2Fui%2Fasm%2Finline-syntax.x86_64.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c18c0ad2bc5988ca7953459e5a35ece8e69e35e7/src%2Ftest%2Fui%2Fasm%2Finline-syntax.x86_64.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasm%2Finline-syntax.x86_64.stderr?ref=c18c0ad2bc5988ca7953459e5a35ece8e69e35e7", "patch": "@@ -1,37 +1,37 @@\n warning: avoid using `.intel_syntax`, Intel syntax is the default\n-  --> $DIR/inline-syntax.rs:22:15\n+  --> $DIR/inline-syntax.rs:25:15\n    |\n LL |         asm!(\".intel_syntax noprefix\", \"nop\");\n    |               ^^^^^^^^^^^^^^^^^^^^^^\n    |\n    = note: `#[warn(bad_asm_style)]` on by default\n \n warning: avoid using `.intel_syntax`, Intel syntax is the default\n-  --> $DIR/inline-syntax.rs:25:15\n+  --> $DIR/inline-syntax.rs:28:15\n    |\n LL |         asm!(\".intel_syntax aaa noprefix\", \"nop\");\n    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: avoid using `.att_syntax`, prefer using `options(att_syntax)` instead\n-  --> $DIR/inline-syntax.rs:28:15\n+  --> $DIR/inline-syntax.rs:31:15\n    |\n LL |         asm!(\".att_syntax noprefix\", \"nop\");\n    |               ^^^^^^^^^^^^^^^^^^^^\n \n warning: avoid using `.att_syntax`, prefer using `options(att_syntax)` instead\n-  --> $DIR/inline-syntax.rs:31:15\n+  --> $DIR/inline-syntax.rs:34:15\n    |\n LL |         asm!(\".att_syntax bbb noprefix\", \"nop\");\n    |               ^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: avoid using `.intel_syntax`, Intel syntax is the default\n-  --> $DIR/inline-syntax.rs:34:15\n+  --> $DIR/inline-syntax.rs:37:15\n    |\n LL |         asm!(\".intel_syntax noprefix; nop\");\n    |               ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: avoid using `.intel_syntax`, Intel syntax is the default\n-  --> $DIR/inline-syntax.rs:40:13\n+  --> $DIR/inline-syntax.rs:43:13\n    |\n LL |             .intel_syntax noprefix\n    |             ^^^^^^^^^^^^^^^^^^^^^^"}]}