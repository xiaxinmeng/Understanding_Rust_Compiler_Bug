{"sha": "2125ad272e036c13547e6c6ff8cdfd0188c91fd7", "node_id": "MDY6Q29tbWl0NzI0NzEyOjIxMjVhZDI3MmUwMzZjMTM1NDdlNmM2ZmY4Y2RmZDAxODhjOTFmZDc=", "commit": {"author": {"name": "St\u00e9phane Campinas", "email": "stephane.campinas@gmail.com", "date": "2019-01-27T11:46:14Z"}, "committer": {"name": "St\u00e9phane Campinas", "email": "stephane.campinas@gmail.com", "date": "2019-01-27T11:46:14Z"}, "message": "fix glob and nested global imports", "tree": {"sha": "fb83db2fc26e891e3ede4f7a01ca61ebbb7590c6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fb83db2fc26e891e3ede4f7a01ca61ebbb7590c6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2125ad272e036c13547e6c6ff8cdfd0188c91fd7", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQEzBAABCgAdFiEEipi5pnt+pUplKNfibVYg2QghATMFAlxNmgYACgkQbVYg2Qgh\nATMTNAf/VeLSIuHcHWQYvqnOBM6d25t7PecCrhsdUkVIFM4+ny/rRc9axU1D21Rq\nuj4QDoCxJkQMNSQTZMWOezi2/FPf4uPb0BhP0EpLa6yuuDJl74D//mCWoBTwK615\nvOClWXlia5kgb4H6E1Ytsi5K1HEEDYVz/E8GkPYAVHdDR620FfBMgfrzSBAMcEXh\nFceLybfEg/eI8gQB8YzdmRrzyj7VsoJuyrnKe64sWc70oHy28prykukmF05xKEK2\nhxle8Bi9YLP04Yq644ksryJiM0ORb94iDT4djCdTIpIJmVV8F0uhtGoJsmrEIRJx\n4wlFL00VMF/et2djRiVaMhq8dWEQZw==\n=ikma\n-----END PGP SIGNATURE-----", "payload": "tree fb83db2fc26e891e3ede4f7a01ca61ebbb7590c6\nparent a2bfc026e55427296b5044b3b4c427d3e9353956\nauthor St\u00e9phane Campinas <stephane.campinas@gmail.com> 1548589574 +0100\ncommitter St\u00e9phane Campinas <stephane.campinas@gmail.com> 1548589574 +0100\n\nfix glob and nested global imports\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2125ad272e036c13547e6c6ff8cdfd0188c91fd7", "html_url": "https://github.com/rust-lang/rust/commit/2125ad272e036c13547e6c6ff8cdfd0188c91fd7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2125ad272e036c13547e6c6ff8cdfd0188c91fd7/comments", "author": {"login": "scampi", "id": 795879, "node_id": "MDQ6VXNlcjc5NTg3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/795879?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scampi", "html_url": "https://github.com/scampi", "followers_url": "https://api.github.com/users/scampi/followers", "following_url": "https://api.github.com/users/scampi/following{/other_user}", "gists_url": "https://api.github.com/users/scampi/gists{/gist_id}", "starred_url": "https://api.github.com/users/scampi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scampi/subscriptions", "organizations_url": "https://api.github.com/users/scampi/orgs", "repos_url": "https://api.github.com/users/scampi/repos", "events_url": "https://api.github.com/users/scampi/events{/privacy}", "received_events_url": "https://api.github.com/users/scampi/received_events", "type": "User", "site_admin": false}, "committer": {"login": "scampi", "id": 795879, "node_id": "MDQ6VXNlcjc5NTg3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/795879?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scampi", "html_url": "https://github.com/scampi", "followers_url": "https://api.github.com/users/scampi/followers", "following_url": "https://api.github.com/users/scampi/following{/other_user}", "gists_url": "https://api.github.com/users/scampi/gists{/gist_id}", "starred_url": "https://api.github.com/users/scampi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scampi/subscriptions", "organizations_url": "https://api.github.com/users/scampi/orgs", "repos_url": "https://api.github.com/users/scampi/repos", "events_url": "https://api.github.com/users/scampi/events{/privacy}", "received_events_url": "https://api.github.com/users/scampi/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a2bfc026e55427296b5044b3b4c427d3e9353956", "url": "https://api.github.com/repos/rust-lang/rust/commits/a2bfc026e55427296b5044b3b4c427d3e9353956", "html_url": "https://github.com/rust-lang/rust/commit/a2bfc026e55427296b5044b3b4c427d3e9353956"}], "stats": {"total": 31, "additions": 31, "deletions": 0}, "files": [{"sha": "dea8fdf313fbc1830a237509ea2e32f9e5b6e2d3", "filename": "src/imports.rs", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/2125ad272e036c13547e6c6ff8cdfd0188c91fd7/src%2Fimports.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2125ad272e036c13547e6c6ff8cdfd0188c91fd7/src%2Fimports.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fimports.rs?ref=2125ad272e036c13547e6c6ff8cdfd0188c91fd7", "patch": "@@ -338,6 +338,10 @@ impl UseTree {\n \n         match a.kind {\n             UseTreeKind::Glob => {\n+                // in case of a global path and the glob starts at the root, e.g., \"::*\"\n+                if a.prefix.segments.len() == 1 && leading_modsep {\n+                    result.path.push(UseSegment::Ident(\"\".to_owned(), None));\n+                }\n                 result.path.push(UseSegment::Glob);\n             }\n             UseTreeKind::Nested(ref list) => {\n@@ -356,6 +360,11 @@ impl UseTree {\n                     false,\n                 )\n                 .collect();\n+                // in case of a global path and the nested list starts at the root,\n+                // e.g., \"::{foo, bar}\"\n+                if a.prefix.segments.len() == 1 && leading_modsep {\n+                    result.path.push(UseSegment::Ident(\"\".to_owned(), None));\n+                }\n                 result.path.push(UseSegment::List(\n                     list.iter()\n                         .zip(items.into_iter())"}, {"sha": "090284a21fdce001724746a5256e53b57992b5e5", "filename": "tests/source/issue-3241.rs", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/2125ad272e036c13547e6c6ff8cdfd0188c91fd7/tests%2Fsource%2Fissue-3241.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2125ad272e036c13547e6c6ff8cdfd0188c91fd7/tests%2Fsource%2Fissue-3241.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fissue-3241.rs?ref=2125ad272e036c13547e6c6ff8cdfd0188c91fd7", "patch": "@@ -0,0 +1,11 @@\n+// rustfmt-edition: 2018\n+\n+use ::ignore;\n+use ::ignore::some::more;\n+use ::{foo, bar};\n+use ::*;\n+use ::baz::{foo, bar};\n+\n+fn main() {\n+    println!(\"Hello, world!\");\n+}"}, {"sha": "60b452abdde916c7788c6c53649f6c5fa6878854", "filename": "tests/target/issue-3241.rs", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/2125ad272e036c13547e6c6ff8cdfd0188c91fd7/tests%2Ftarget%2Fissue-3241.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2125ad272e036c13547e6c6ff8cdfd0188c91fd7/tests%2Ftarget%2Fissue-3241.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fissue-3241.rs?ref=2125ad272e036c13547e6c6ff8cdfd0188c91fd7", "patch": "@@ -0,0 +1,11 @@\n+// rustfmt-edition: 2018\n+\n+use ::baz::{bar, foo};\n+use ::ignore;\n+use ::ignore::some::more;\n+use ::*;\n+use ::{bar, foo};\n+\n+fn main() {\n+    println!(\"Hello, world!\");\n+}"}]}