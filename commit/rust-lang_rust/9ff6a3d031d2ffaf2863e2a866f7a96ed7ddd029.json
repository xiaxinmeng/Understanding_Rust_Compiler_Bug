{"sha": "9ff6a3d031d2ffaf2863e2a866f7a96ed7ddd029", "node_id": "MDY6Q29tbWl0NzI0NzEyOjlmZjZhM2QwMzFkMmZmYWYyODYzZTJhODY2ZjdhOTZlZDdkZGQwMjk=", "commit": {"author": {"name": "Michael Bebenita", "email": "mbebenita@mozilla.com", "date": "2010-08-09T14:42:06Z"}, "committer": {"name": "Michael Bebenita", "email": "mbebenita@mozilla.com", "date": "2010-08-09T14:42:06Z"}, "message": "Added class to abstract away platform specific thread primitives.", "tree": {"sha": "fc1d740c0715011adbf2169b9b0ad9845d7bc19b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fc1d740c0715011adbf2169b9b0ad9845d7bc19b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9ff6a3d031d2ffaf2863e2a866f7a96ed7ddd029", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9ff6a3d031d2ffaf2863e2a866f7a96ed7ddd029", "html_url": "https://github.com/rust-lang/rust/commit/9ff6a3d031d2ffaf2863e2a866f7a96ed7ddd029", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9ff6a3d031d2ffaf2863e2a866f7a96ed7ddd029/comments", "author": {"login": "mbebenita", "id": 311082, "node_id": "MDQ6VXNlcjMxMTA4Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/311082?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mbebenita", "html_url": "https://github.com/mbebenita", "followers_url": "https://api.github.com/users/mbebenita/followers", "following_url": "https://api.github.com/users/mbebenita/following{/other_user}", "gists_url": "https://api.github.com/users/mbebenita/gists{/gist_id}", "starred_url": "https://api.github.com/users/mbebenita/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mbebenita/subscriptions", "organizations_url": "https://api.github.com/users/mbebenita/orgs", "repos_url": "https://api.github.com/users/mbebenita/repos", "events_url": "https://api.github.com/users/mbebenita/events{/privacy}", "received_events_url": "https://api.github.com/users/mbebenita/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mbebenita", "id": 311082, "node_id": "MDQ6VXNlcjMxMTA4Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/311082?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mbebenita", "html_url": "https://github.com/mbebenita", "followers_url": "https://api.github.com/users/mbebenita/followers", "following_url": "https://api.github.com/users/mbebenita/following{/other_user}", "gists_url": "https://api.github.com/users/mbebenita/gists{/gist_id}", "starred_url": "https://api.github.com/users/mbebenita/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mbebenita/subscriptions", "organizations_url": "https://api.github.com/users/mbebenita/orgs", "repos_url": "https://api.github.com/users/mbebenita/repos", "events_url": "https://api.github.com/users/mbebenita/events{/privacy}", "received_events_url": "https://api.github.com/users/mbebenita/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "56cd4e458a6c3cd40a8ee2ceb0a0fdab0352bf20", "url": "https://api.github.com/repos/rust-lang/rust/commits/56cd4e458a6c3cd40a8ee2ceb0a0fdab0352bf20", "html_url": "https://github.com/rust-lang/rust/commit/56cd4e458a6c3cd40a8ee2ceb0a0fdab0352bf20"}], "stats": {"total": 27, "additions": 25, "deletions": 2}, "files": [{"sha": "f8c891c21542a0037b76f6b13226b25c3737b1bf", "filename": "src/Makefile", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9ff6a3d031d2ffaf2863e2a866f7a96ed7ddd029/src%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/9ff6a3d031d2ffaf2863e2a866f7a96ed7ddd029/src%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2FMakefile?ref=9ff6a3d031d2ffaf2863e2a866f7a96ed7ddd029", "patch": "@@ -245,7 +245,8 @@ BOOT_CMXS := $(BOOT_MLS:.ml=.cmx)\n BOOT_OBJS := $(BOOT_MLS:.ml=.o)\n BOOT_CMIS := $(BOOT_MLS:.ml=.cmi)\n \n-RUNTIME_CS := rt/sync/spin_lock.cpp \\\n+RUNTIME_CS := rt/sync/sync.cpp \\\n+\t\t\t  rt/sync/spin_lock.cpp \\\n               rt/sync/lock_free_queue.cpp \\\n               rt/sync/condition_variable.cpp \\\n               rt/rust.cpp \\\n@@ -279,7 +280,8 @@ RUNTIME_HDR := rt/globals.h \\\n                rt/rust_message.h \\\n                rt/circular_buffer.h \\\n                rt/util/array_list.h \\\n-               rt/util/hash_map.h\n+               rt/util/hash_map.h \\\n+               rt/sync/sync.h\n \n RUNTIME_INCS := -Irt/isaac -Irt/uthash\n RUNTIME_OBJS := $(RUNTIME_CS:.cpp=$(CFG_OBJ_SUFFIX))"}, {"sha": "eba51a49dfc29cfecd9c2ee98c8a42bbd8ef28ca", "filename": "src/rt/sync/sync.cpp", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/9ff6a3d031d2ffaf2863e2a866f7a96ed7ddd029/src%2Frt%2Fsync%2Fsync.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/9ff6a3d031d2ffaf2863e2a866f7a96ed7ddd029/src%2Frt%2Fsync%2Fsync.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Fsync%2Fsync.cpp?ref=9ff6a3d031d2ffaf2863e2a866f7a96ed7ddd029", "patch": "@@ -0,0 +1,12 @@\n+#include \"../globals.h\"\n+#include \"sync.h\"\n+\n+void sync::yield() {\n+#ifdef __APPLE__\n+    pthread_yield_np();\n+#elif __WIN32__\n+\n+#else\n+    pthread_yield();\n+#endif\n+}"}, {"sha": "902b5661be427e237d663244157f6930dde6adf8", "filename": "src/rt/sync/sync.h", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/9ff6a3d031d2ffaf2863e2a866f7a96ed7ddd029/src%2Frt%2Fsync%2Fsync.h", "raw_url": "https://github.com/rust-lang/rust/raw/9ff6a3d031d2ffaf2863e2a866f7a96ed7ddd029/src%2Frt%2Fsync%2Fsync.h", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Fsync%2Fsync.h?ref=9ff6a3d031d2ffaf2863e2a866f7a96ed7ddd029", "patch": "@@ -0,0 +1,9 @@\n+#ifndef SYNC_H\n+#define SYNC_H\n+\n+class sync {\n+public:\n+    static void yield();\n+};\n+\n+#endif /* SYNC_H */"}]}