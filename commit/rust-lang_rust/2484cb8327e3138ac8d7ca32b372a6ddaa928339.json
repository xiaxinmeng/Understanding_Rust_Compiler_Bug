{"sha": "2484cb8327e3138ac8d7ca32b372a6ddaa928339", "node_id": "C_kwDOAAsO6NoAKDI0ODRjYjgzMjdlMzEzOGFjOGQ3Y2EzMmIzNzJhNmRkYWE5MjgzMzk", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-02-02T06:11:06Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-02-02T06:11:06Z"}, "message": "Rollup merge of #93420 - jsha:adjust-settings-layout, r=GuillaumeGomez\n\nImprove wrapping on settings page\n\nPreviously, the radio button choices for themes would wrap awkwardly on\nnarrow screens. With this change, the group of choices will prefer\nbumping down to the next line together, leaving the setting name on its\nown line.\n\nAlso fix some minor spacing issues:\n\n - Align the setting name vertically with the radio button choices.\n - Use margin instead of padding for most spacing choices.\n - Use no margin/padding on the right-hand side.\n\n Demo: https://rustdoc.crud.net/jsha/adjust-settings-layout/settings.html\n\n r? ``@GuillaumeGomez``\n\nBefore (narrow screen):\n\n![image](https://user-images.githubusercontent.com/220205/151555533-7ab65216-d178-4dcc-8792-3c8fb9da8718.png)\n\nAfter (narrow screen):\n\n![image](https://user-images.githubusercontent.com/220205/151555702-ad79af32-f84b-4ee4-ae7a-1a2a463c0f6f.png)", "tree": {"sha": "fd6f5f8d24eb85822322b90383c4f9a11c1dbe33", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fd6f5f8d24eb85822322b90383c4f9a11c1dbe33"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2484cb8327e3138ac8d7ca32b372a6ddaa928339", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJh+iB6CRBK7hj4Ov3rIwAA5sQIAHxvcoNX+2Vir29oxJSjBKXG\n4UQIW2egjEEqcN77Itx/WyREsHrqh4NtQHnZvTdTZfhZs4gROeTG3dURAi101YuZ\nPwRYZIzI/KuFBf13dlnXbYEIbrwg7WQatG+69IoT4u8W68bpaf0wj89h7t/H6TUH\nCn5eVF86xQM5gkIjijJOKJ7S0iEIKL4QWzvvzUWsoSjFxsO2I4E/nUubmHtOAPkQ\nGTgCM/bu5lgO77X3AqYJioxVa0WDflCChYcnDOTLmAnjd8qcuvRQbZ6rdcU29IA0\nfTZKd8tf1NCw4LFyOqCqXb1fdTuBz4669WLIx2rQ24WgHPlE2z47wUiSnRNjm5M=\n=tsGE\n-----END PGP SIGNATURE-----\n", "payload": "tree fd6f5f8d24eb85822322b90383c4f9a11c1dbe33\nparent 8ede21b09ce7130a1453bfaa5e889fc2a7ae3ac8\nparent c790128c3c2c26a4ca347fd68cffd4000ecb3295\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1643782266 +0100\ncommitter GitHub <noreply@github.com> 1643782266 +0100\n\nRollup merge of #93420 - jsha:adjust-settings-layout, r=GuillaumeGomez\n\nImprove wrapping on settings page\n\nPreviously, the radio button choices for themes would wrap awkwardly on\nnarrow screens. With this change, the group of choices will prefer\nbumping down to the next line together, leaving the setting name on its\nown line.\n\nAlso fix some minor spacing issues:\n\n - Align the setting name vertically with the radio button choices.\n - Use margin instead of padding for most spacing choices.\n - Use no margin/padding on the right-hand side.\n\n Demo: https://rustdoc.crud.net/jsha/adjust-settings-layout/settings.html\n\n r? ``@GuillaumeGomez``\n\nBefore (narrow screen):\n\n![image](https://user-images.githubusercontent.com/220205/151555533-7ab65216-d178-4dcc-8792-3c8fb9da8718.png)\n\nAfter (narrow screen):\n\n![image](https://user-images.githubusercontent.com/220205/151555702-ad79af32-f84b-4ee4-ae7a-1a2a463c0f6f.png)\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2484cb8327e3138ac8d7ca32b372a6ddaa928339", "html_url": "https://github.com/rust-lang/rust/commit/2484cb8327e3138ac8d7ca32b372a6ddaa928339", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2484cb8327e3138ac8d7ca32b372a6ddaa928339/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8ede21b09ce7130a1453bfaa5e889fc2a7ae3ac8", "url": "https://api.github.com/repos/rust-lang/rust/commits/8ede21b09ce7130a1453bfaa5e889fc2a7ae3ac8", "html_url": "https://github.com/rust-lang/rust/commit/8ede21b09ce7130a1453bfaa5e889fc2a7ae3ac8"}, {"sha": "c790128c3c2c26a4ca347fd68cffd4000ecb3295", "url": "https://api.github.com/repos/rust-lang/rust/commits/c790128c3c2c26a4ca347fd68cffd4000ecb3295", "html_url": "https://github.com/rust-lang/rust/commit/c790128c3c2c26a4ca347fd68cffd4000ecb3295"}], "stats": {"total": 24, "additions": 16, "deletions": 8}, "files": [{"sha": "59a6187b62be9a804703ebfb01e9bb62bfa1085f", "filename": "src/librustdoc/html/render/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2484cb8327e3138ac8d7ca32b372a6ddaa928339/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2484cb8327e3138ac8d7ca32b372a6ddaa928339/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs?ref=2484cb8327e3138ac8d7ca32b372a6ddaa928339", "patch": "@@ -376,7 +376,7 @@ impl Setting {\n                 description,\n             ),\n             Setting::Select { js_data_name, description, default_value, ref options } => format!(\n-                \"<div class=\\\"setting-line\\\"><div class=\\\"radio-line\\\" id=\\\"{}\\\"><span class=\\\"setting-name\\\">{}</span>{}</div></div>\",\n+                \"<div class=\\\"setting-line\\\"><div class=\\\"radio-line\\\" id=\\\"{}\\\"><span class=\\\"setting-name\\\">{}</span><div class=\\\"choices\\\">{}</div></div></div>\",\n                 js_data_name,\n                 description,\n                 options"}, {"sha": "7b337c2bc7a3356b4ba78835ba8305b8aded84c3", "filename": "src/librustdoc/html/static/css/settings.css", "status": "modified", "additions": 9, "deletions": 7, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/2484cb8327e3138ac8d7ca32b372a6ddaa928339/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fsettings.css", "raw_url": "https://github.com/rust-lang/rust/raw/2484cb8327e3138ac8d7ca32b372a6ddaa928339/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fsettings.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fsettings.css?ref=2484cb8327e3138ac8d7ca32b372a6ddaa928339", "patch": "@@ -1,5 +1,5 @@\n .setting-line {\n-\tpadding: 5px;\n+\tmargin: 0.6em 0 0.6em 0.3em;\n \tposition: relative;\n }\n \n@@ -17,17 +17,16 @@\n \tborder-bottom: 1px solid;\n }\n \n-.setting-line .radio-line {\n+.setting-line .radio-line,\n+.setting-line .choices {\n \tdisplay: flex;\n \tflex-wrap: wrap;\n }\n \n-.setting-line .radio-line > * {\n-\tpadding: 0.3em;\n-}\n-\n .setting-line .radio-line .setting-name {\n \tflex-grow: 1;\n+\tmargin-top: auto;\n+\tmargin-bottom: auto;\n }\n \n .setting-line .radio-line input {\n@@ -38,7 +37,10 @@\n \tborder-radius: 0.1em;\n \tborder: 1px solid;\n \tmargin-left: 0.5em;\n-\tmin-width: 3.5em;\n+\tmargin-top: 0.1em;\n+\tmargin-bottom: 0.1em;\n+\tmin-width: 3.8em;\n+\tpadding: 0.3em;\n }\n \n .toggle {"}, {"sha": "7be46a613c4fb159323fb96e5831edfe2f5ee235", "filename": "src/test/rustdoc-gui/mobile.goml", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/2484cb8327e3138ac8d7ca32b372a6ddaa928339/src%2Ftest%2Frustdoc-gui%2Fmobile.goml", "raw_url": "https://github.com/rust-lang/rust/raw/2484cb8327e3138ac8d7ca32b372a6ddaa928339/src%2Ftest%2Frustdoc-gui%2Fmobile.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fmobile.goml?ref=2484cb8327e3138ac8d7ca32b372a6ddaa928339", "patch": "@@ -19,3 +19,9 @@ assert-css: (\".content .out-of-band .since::before\", { \"content\": \"\\\"Since \\\"\" }\n \n size: (1000, 1000)\n assert-css-false: (\".content .out-of-band .since::before\", { \"content\": \"\\\"Since \\\"\" })\n+\n+// On the settings page, the theme buttons should not line-wrap. Instead, they should\n+// all be placed as a group on a line below the setting name \"Theme.\"\n+goto: file://|DOC_PATH|/settings.html\n+size: (400, 600)\n+compare-elements-position-near-false: (\"#preferred-light-theme .setting-name\", \"#preferred-light-theme .choice\", {\"y\": 16})"}]}