{"sha": "79f0d88de860bed2747811cffba177504d3ead8e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc5ZjBkODhkZTg2MGJlZDI3NDc4MTFjZmZiYTE3NzUwNGQzZWFkOGU=", "commit": {"author": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2019-07-11T22:00:20Z"}, "committer": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2019-07-18T10:42:45Z"}, "message": "resolve: Use `feature(custom_attribute)` fallback only if the feature is enabled\n\nNormally `#![feature(...)]` shouldn't change behavior, but custom attributes in particular are in the process of retirement, and we should not produce a message telling to enable them.\nIt also helps with unifying diagnostics for unresolved macros.", "tree": {"sha": "969c583fafbf7ee4f1559a97b8b389cc2b06ce41", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/969c583fafbf7ee4f1559a97b8b389cc2b06ce41"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/79f0d88de860bed2747811cffba177504d3ead8e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/79f0d88de860bed2747811cffba177504d3ead8e", "html_url": "https://github.com/rust-lang/rust/commit/79f0d88de860bed2747811cffba177504d3ead8e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/79f0d88de860bed2747811cffba177504d3ead8e/comments", "author": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "committer": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1e1b081e0e9dc2fe06839519eaf74bbb84155fbe", "url": "https://api.github.com/repos/rust-lang/rust/commits/1e1b081e0e9dc2fe06839519eaf74bbb84155fbe", "html_url": "https://github.com/rust-lang/rust/commit/1e1b081e0e9dc2fe06839519eaf74bbb84155fbe"}], "stats": {"total": 523, "additions": 144, "deletions": 379}, "files": [{"sha": "424ebbbd88dcd8dbda3d114343be7e955007ac38", "filename": "src/librustc_resolve/diagnostics.rs", "status": "modified", "additions": 0, "deletions": 55, "changes": 55, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Flibrustc_resolve%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Flibrustc_resolve%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Fdiagnostics.rs?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -11,7 +11,6 @@ use rustc::ty::{self, DefIdTree};\n use rustc::util::nodemap::FxHashSet;\n use syntax::ast::{self, Expr, ExprKind, Ident, NodeId, Path, Ty, TyKind};\n use syntax::ext::base::MacroKind;\n-use syntax::feature_gate::{feature_err, AttributeGate, GateIssue, Stability, BUILTIN_ATTRIBUTES};\n use syntax::symbol::{Symbol, kw};\n use syntax::util::lev_distance::find_best_match_for_name;\n use syntax_pos::{BytePos, Span};\n@@ -903,60 +902,6 @@ impl<'a> Resolver<'a> {\n             }\n         }\n     }\n-\n-    crate fn report_unknown_attribute(&self, span: Span, name: &str, msg: &str, feature: Symbol) {\n-        let mut err = feature_err(\n-            &self.session.parse_sess,\n-            feature,\n-            span,\n-            GateIssue::Language,\n-            &msg,\n-        );\n-\n-        let features = self.session.features_untracked();\n-\n-        let attr_candidates = BUILTIN_ATTRIBUTES\n-            .iter()\n-            .filter_map(|&(name, _, _, ref gate)| {\n-                if name.as_str().starts_with(\"rustc_\") && !features.rustc_attrs {\n-                    return None;\n-                }\n-\n-                match gate {\n-                    AttributeGate::Gated(Stability::Unstable, ..)\n-                        if self.session.opts.unstable_features.is_nightly_build() =>\n-                    {\n-                        Some(name)\n-                    }\n-                    AttributeGate::Gated(Stability::Deprecated(..), ..) => Some(name),\n-                    AttributeGate::Ungated => Some(name),\n-                    _ => None,\n-                }\n-            })\n-            .chain(\n-                // Add built-in macro attributes as well.\n-                self.builtin_macros.iter().filter_map(|(name, binding)| {\n-                    match binding.macro_kind() {\n-                        Some(MacroKind::Attr) => Some(*name),\n-                        _ => None,\n-                    }\n-                }),\n-            )\n-            .collect::<Vec<_>>();\n-\n-        let lev_suggestion = find_best_match_for_name(attr_candidates.iter(), &name, None);\n-\n-        if let Some(suggestion) = lev_suggestion {\n-            err.span_suggestion(\n-                span,\n-                \"a built-in attribute with a similar name exists\",\n-                suggestion.to_string(),\n-                Applicability::MaybeIncorrect,\n-            );\n-        }\n-\n-        err.emit();\n-    }\n }\n \n impl<'a, 'b> ImportResolver<'a, 'b> {"}, {"sha": "bf1c4d671c64224b5ce60683b384b5354d63ef4e", "filename": "src/librustc_resolve/macros.rs", "status": "modified", "additions": 3, "deletions": 18, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Flibrustc_resolve%2Fmacros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Flibrustc_resolve%2Fmacros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Fmacros.rs?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -312,23 +312,7 @@ impl<'a> Resolver<'a> {\n                     }\n                 }\n             }\n-            Res::NonMacroAttr(attr_kind) => {\n-                if attr_kind == NonMacroAttrKind::Custom {\n-                    assert!(path.segments.len() == 1);\n-                    if !features.custom_attribute {\n-                        let msg = format!(\"The attribute `{}` is currently unknown to the \\\n-                                            compiler and may have meaning added to it in the \\\n-                                            future\", path);\n-                        self.report_unknown_attribute(\n-                            path.span,\n-                            &path.segments[0].ident.as_str(),\n-                            &msg,\n-                            sym::custom_attribute,\n-                        );\n-                    }\n-                }\n-            }\n-            Res::Err => {}\n+            Res::NonMacroAttr(..) | Res::Err => {}\n             _ => panic!(\"expected `DefKind::Macro` or `Res::NonMacroAttr`\"),\n         };\n \n@@ -721,7 +705,8 @@ impl<'a> Resolver<'a> {\n         }\n \n         let determinacy = Determinacy::determined(determinacy == Determinacy::Determined || force);\n-        if determinacy == Determinacy::Determined && macro_kind == Some(MacroKind::Attr) {\n+        if determinacy == Determinacy::Determined && macro_kind == Some(MacroKind::Attr) &&\n+           self.session.features_untracked().custom_attribute {\n             // For single-segment attributes interpret determinate \"no resolution\" as a custom\n             // attribute. (Lexical resolution implies the first segment and attr kind should imply\n             // the last segment, so we are certainly working with a single-segment attribute here.)"}, {"sha": "8759344e6f820940d867597f820de7287ca21f54", "filename": "src/test/ui/attributes/obsolete-attr.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fattributes%2Fobsolete-attr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fattributes%2Fobsolete-attr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fattributes%2Fobsolete-attr.rs?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -1,7 +1,9 @@\n // Obsolete attributes fall back to feature gated custom attributes.\n \n-#[ab_isize=\"stdcall\"] extern {} //~ ERROR attribute `ab_isize` is currently unknown\n+#[ab_isize=\"stdcall\"] extern {}\n+//~^ ERROR cannot find attribute macro `ab_isize` in this scope\n \n-#[fixed_stack_segment] fn f() {} //~ ERROR attribute `fixed_stack_segment` is currently unknown\n+#[fixed_stack_segment] fn f() {}\n+//~^ ERROR cannot find attribute macro `fixed_stack_segment` in this scope\n \n fn main() {}"}, {"sha": "9c6909f65f3ea3ab3e48d73acbb0433c091e0140", "filename": "src/test/ui/attributes/obsolete-attr.stderr", "status": "modified", "additions": 3, "deletions": 10, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fattributes%2Fobsolete-attr.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fattributes%2Fobsolete-attr.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fattributes%2Fobsolete-attr.stderr?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -1,21 +1,14 @@\n-error[E0658]: The attribute `fixed_stack_segment` is currently unknown to the compiler and may have meaning added to it in the future\n-  --> $DIR/obsolete-attr.rs:5:3\n+error: cannot find attribute macro `fixed_stack_segment` in this scope\n+  --> $DIR/obsolete-attr.rs:6:3\n    |\n LL | #[fixed_stack_segment] fn f() {}\n    |   ^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n \n-error[E0658]: The attribute `ab_isize` is currently unknown to the compiler and may have meaning added to it in the future\n+error: cannot find attribute macro `ab_isize` in this scope\n   --> $DIR/obsolete-attr.rs:3:3\n    |\n LL | #[ab_isize=\"stdcall\"] extern {}\n    |   ^^^^^^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n \n error: aborting due to 2 previous errors\n \n-For more information about this error, try `rustc --explain E0658`."}, {"sha": "140a1fc3f93e59cfddf8f3d1d07c63c7141f08b8", "filename": "src/test/ui/attributes/unknown-attr.rs", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fattributes%2Funknown-attr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fattributes%2Funknown-attr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fattributes%2Funknown-attr.rs?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -2,8 +2,11 @@\n \n #![feature(custom_inner_attributes)]\n \n-#![mutable_doc] //~ ERROR attribute `mutable_doc` is currently unknown\n+#![mutable_doc]\n+//~^ ERROR cannot find attribute macro `mutable_doc` in this scope\n \n-#[dance] mod a {} //~ ERROR attribute `dance` is currently unknown\n+#[dance] mod a {}\n+//~^ ERROR cannot find attribute macro `dance` in this scope\n \n-#[dance] fn main() {} //~ ERROR attribute `dance` is currently unknown\n+#[dance] fn main() {}\n+//~^ ERROR cannot find attribute macro `dance` in this scope"}, {"sha": "4d463874d669e995c5b9e779f50a21373fde4bbd", "filename": "src/test/ui/attributes/unknown-attr.stderr", "status": "modified", "additions": 5, "deletions": 15, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fattributes%2Funknown-attr.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fattributes%2Funknown-attr.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fattributes%2Funknown-attr.stderr?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -1,30 +1,20 @@\n-error[E0658]: The attribute `mutable_doc` is currently unknown to the compiler and may have meaning added to it in the future\n+error: cannot find attribute macro `mutable_doc` in this scope\n   --> $DIR/unknown-attr.rs:5:4\n    |\n LL | #![mutable_doc]\n    |    ^^^^^^^^^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n \n-error[E0658]: The attribute `dance` is currently unknown to the compiler and may have meaning added to it in the future\n-  --> $DIR/unknown-attr.rs:7:3\n+error: cannot find attribute macro `dance` in this scope\n+  --> $DIR/unknown-attr.rs:8:3\n    |\n LL | #[dance] mod a {}\n    |   ^^^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n \n-error[E0658]: The attribute `dance` is currently unknown to the compiler and may have meaning added to it in the future\n-  --> $DIR/unknown-attr.rs:9:3\n+error: cannot find attribute macro `dance` in this scope\n+  --> $DIR/unknown-attr.rs:11:3\n    |\n LL | #[dance] fn main() {}\n    |   ^^^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n \n error: aborting due to 3 previous errors\n \n-For more information about this error, try `rustc --explain E0658`."}, {"sha": "22dbac766707dca067c8e62fae0fb64fe5b40ab6", "filename": "src/test/ui/conditional-compilation/cfg-attr-unknown-attribute-macro-expansion.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg-attr-unknown-attribute-macro-expansion.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg-attr-unknown-attribute-macro-expansion.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg-attr-unknown-attribute-macro-expansion.rs?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -1,6 +1,7 @@\n macro_rules! foo {\n     () => {\n-        #[cfg_attr(all(), unknown)] //~ ERROR `unknown` is currently unknown\n+        #[cfg_attr(all(), unknown)]\n+        //~^ ERROR cannot find attribute macro `unknown` in this scope\n         fn foo() {}\n     }\n }"}, {"sha": "c7c52a2923a5998790dae92c9cd5dfedcbe8c25f", "filename": "src/test/ui/conditional-compilation/cfg-attr-unknown-attribute-macro-expansion.stderr", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg-attr-unknown-attribute-macro-expansion.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg-attr-unknown-attribute-macro-expansion.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg-attr-unknown-attribute-macro-expansion.stderr?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -1,15 +1,11 @@\n-error[E0658]: The attribute `unknown` is currently unknown to the compiler and may have meaning added to it in the future\n+error: cannot find attribute macro `unknown` in this scope\n   --> $DIR/cfg-attr-unknown-attribute-macro-expansion.rs:3:27\n    |\n LL |         #[cfg_attr(all(), unknown)]\n    |                           ^^^^^^^\n ...\n LL | foo!();\n    | ------- in this macro invocation\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n \n error: aborting due to previous error\n \n-For more information about this error, try `rustc --explain E0658`."}, {"sha": "13c873c3b7e48cd2d559ae7ac694fd7152f01d47", "filename": "src/test/ui/custom_attribute.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fcustom_attribute.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fcustom_attribute.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcustom_attribute.rs?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -1,9 +1,9 @@\n #![feature(stmt_expr_attributes)]\n \n-#[foo] //~ ERROR The attribute `foo`\n+#[foo] //~ ERROR cannot find attribute macro `foo` in this scope\n fn main() {\n-    #[foo] //~ ERROR The attribute `foo`\n+    #[foo] //~ ERROR cannot find attribute macro `foo` in this scope\n     let x = ();\n-    #[foo] //~ ERROR The attribute `foo`\n+    #[foo] //~ ERROR cannot find attribute macro `foo` in this scope\n     x\n }"}, {"sha": "b4f9f3f49b2350d443e915cfa81ead67a35c1c6f", "filename": "src/test/ui/custom_attribute.stderr", "status": "modified", "additions": 3, "deletions": 13, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fcustom_attribute.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fcustom_attribute.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcustom_attribute.stderr?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -1,30 +1,20 @@\n-error[E0658]: The attribute `foo` is currently unknown to the compiler and may have meaning added to it in the future\n+error: cannot find attribute macro `foo` in this scope\n   --> $DIR/custom_attribute.rs:3:3\n    |\n LL | #[foo]\n    |   ^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n \n-error[E0658]: The attribute `foo` is currently unknown to the compiler and may have meaning added to it in the future\n+error: cannot find attribute macro `foo` in this scope\n   --> $DIR/custom_attribute.rs:5:7\n    |\n LL |     #[foo]\n    |       ^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n \n-error[E0658]: The attribute `foo` is currently unknown to the compiler and may have meaning added to it in the future\n+error: cannot find attribute macro `foo` in this scope\n   --> $DIR/custom_attribute.rs:7:7\n    |\n LL |     #[foo]\n    |       ^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n \n error: aborting due to 3 previous errors\n \n-For more information about this error, try `rustc --explain E0658`."}, {"sha": "d34936b42a6ffe8521aad764bd006052fe6ea572", "filename": "src/test/ui/feature-gates/feature-gate-custom_attribute.rs", "status": "modified", "additions": 15, "deletions": 20, "changes": 35, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-custom_attribute.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-custom_attribute.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-custom_attribute.rs?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -1,23 +1,18 @@\n // Check that literals in attributes parse just fine.\n \n+#[fake_attr] //~ ERROR cannot find attribute macro `fake_attr` in this scope\n+#[fake_attr(100)] //~ ERROR cannot find attribute macro `fake_attr` in this scope\n+#[fake_attr(1, 2, 3)] //~ ERROR cannot find attribute macro `fake_attr` in this scope\n+#[fake_attr(\"hello\")] //~ ERROR cannot find attribute macro `fake_attr` in this scope\n+#[fake_attr(name = \"hello\")] //~ ERROR cannot find attribute macro `fake_attr` in this scope\n+#[fake_attr(1, \"hi\", key = 12, true, false)] //~ ERROR cannot find attribute macro `fake_attr` in th\n+#[fake_attr(key = \"hello\", val = 10)] //~ ERROR cannot find attribute macro `fake_attr` in this scop\n+#[fake_attr(key(\"hello\"), val(10))] //~ ERROR cannot find attribute macro `fake_attr` in this scope\n+#[fake_attr(enabled = true, disabled = false)] //~ ERROR cannot find attribute macro `fake_attr` in\n+#[fake_attr(true)] //~ ERROR cannot find attribute macro `fake_attr` in this scope\n+#[fake_attr(pi = 3.14159)] //~ ERROR cannot find attribute macro `fake_attr` in this scope\n+#[fake_attr(b\"hi\")] //~ ERROR cannot find attribute macro `fake_attr` in this scope\n+#[fake_doc(r\"doc\")] //~ ERROR cannot find attribute macro `fake_doc` in this scope\n+struct Q {}\n \n-#![allow(dead_code)]\n-#![allow(unused_variables)]\n-\n-#[fake_attr] //~ ERROR attribute `fake_attr` is currently unknown\n-#[fake_attr(100)] //~ ERROR attribute `fake_attr` is currently unknown\n-#[fake_attr(1, 2, 3)] //~ ERROR attribute `fake_attr` is currently unknown\n-#[fake_attr(\"hello\")] //~ ERROR attribute `fake_attr` is currently unknown\n-#[fake_attr(name = \"hello\")] //~ ERROR attribute `fake_attr` is currently unknown\n-#[fake_attr(1, \"hi\", key = 12, true, false)] //~ ERROR attribute `fake_attr` is currently unknown\n-#[fake_attr(key = \"hello\", val = 10)] //~ ERROR attribute `fake_attr` is currently unknown\n-#[fake_attr(key(\"hello\"), val(10))] //~ ERROR attribute `fake_attr` is currently unknown\n-#[fake_attr(enabled = true, disabled = false)] //~ ERROR attribute `fake_attr` is currently unknown\n-#[fake_attr(true)] //~ ERROR attribute `fake_attr` is currently unknown\n-#[fake_attr(pi = 3.14159)] //~ ERROR attribute `fake_attr` is currently unknown\n-#[fake_attr(b\"hi\")] //~ ERROR attribute `fake_attr` is currently unknown\n-#[fake_doc(r\"doc\")] //~ ERROR attribute `fake_doc` is currently unknown\n-struct Q {  }\n-\n-\n-fn main() { }\n+fn main() {}"}, {"sha": "efdc2d1cd31ed6b70c9977dc746105a817aa61bc", "filename": "src/test/ui/feature-gates/feature-gate-custom_attribute.stderr", "status": "modified", "additions": 26, "deletions": 66, "changes": 92, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-custom_attribute.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-custom_attribute.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-custom_attribute.stderr?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -1,120 +1,80 @@\n-error[E0658]: The attribute `fake_attr` is currently unknown to the compiler and may have meaning added to it in the future\n-  --> $DIR/feature-gate-custom_attribute.rs:7:3\n+error: cannot find attribute macro `fake_attr` in this scope\n+  --> $DIR/feature-gate-custom_attribute.rs:3:3\n    |\n LL | #[fake_attr]\n    |   ^^^^^^^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n \n-error[E0658]: The attribute `fake_attr` is currently unknown to the compiler and may have meaning added to it in the future\n-  --> $DIR/feature-gate-custom_attribute.rs:8:3\n+error: cannot find attribute macro `fake_attr` in this scope\n+  --> $DIR/feature-gate-custom_attribute.rs:4:3\n    |\n LL | #[fake_attr(100)]\n    |   ^^^^^^^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n \n-error[E0658]: The attribute `fake_attr` is currently unknown to the compiler and may have meaning added to it in the future\n-  --> $DIR/feature-gate-custom_attribute.rs:9:3\n+error: cannot find attribute macro `fake_attr` in this scope\n+  --> $DIR/feature-gate-custom_attribute.rs:5:3\n    |\n LL | #[fake_attr(1, 2, 3)]\n    |   ^^^^^^^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n \n-error[E0658]: The attribute `fake_attr` is currently unknown to the compiler and may have meaning added to it in the future\n-  --> $DIR/feature-gate-custom_attribute.rs:10:3\n+error: cannot find attribute macro `fake_attr` in this scope\n+  --> $DIR/feature-gate-custom_attribute.rs:6:3\n    |\n LL | #[fake_attr(\"hello\")]\n    |   ^^^^^^^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n \n-error[E0658]: The attribute `fake_attr` is currently unknown to the compiler and may have meaning added to it in the future\n-  --> $DIR/feature-gate-custom_attribute.rs:11:3\n+error: cannot find attribute macro `fake_attr` in this scope\n+  --> $DIR/feature-gate-custom_attribute.rs:7:3\n    |\n LL | #[fake_attr(name = \"hello\")]\n    |   ^^^^^^^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n \n-error[E0658]: The attribute `fake_attr` is currently unknown to the compiler and may have meaning added to it in the future\n-  --> $DIR/feature-gate-custom_attribute.rs:12:3\n+error: cannot find attribute macro `fake_attr` in this scope\n+  --> $DIR/feature-gate-custom_attribute.rs:8:3\n    |\n LL | #[fake_attr(1, \"hi\", key = 12, true, false)]\n    |   ^^^^^^^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n \n-error[E0658]: The attribute `fake_attr` is currently unknown to the compiler and may have meaning added to it in the future\n-  --> $DIR/feature-gate-custom_attribute.rs:13:3\n+error: cannot find attribute macro `fake_attr` in this scope\n+  --> $DIR/feature-gate-custom_attribute.rs:9:3\n    |\n LL | #[fake_attr(key = \"hello\", val = 10)]\n    |   ^^^^^^^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n \n-error[E0658]: The attribute `fake_attr` is currently unknown to the compiler and may have meaning added to it in the future\n-  --> $DIR/feature-gate-custom_attribute.rs:14:3\n+error: cannot find attribute macro `fake_attr` in this scope\n+  --> $DIR/feature-gate-custom_attribute.rs:10:3\n    |\n LL | #[fake_attr(key(\"hello\"), val(10))]\n    |   ^^^^^^^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n \n-error[E0658]: The attribute `fake_attr` is currently unknown to the compiler and may have meaning added to it in the future\n-  --> $DIR/feature-gate-custom_attribute.rs:15:3\n+error: cannot find attribute macro `fake_attr` in this scope\n+  --> $DIR/feature-gate-custom_attribute.rs:11:3\n    |\n LL | #[fake_attr(enabled = true, disabled = false)]\n    |   ^^^^^^^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n \n-error[E0658]: The attribute `fake_attr` is currently unknown to the compiler and may have meaning added to it in the future\n-  --> $DIR/feature-gate-custom_attribute.rs:16:3\n+error: cannot find attribute macro `fake_attr` in this scope\n+  --> $DIR/feature-gate-custom_attribute.rs:12:3\n    |\n LL | #[fake_attr(true)]\n    |   ^^^^^^^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n \n-error[E0658]: The attribute `fake_attr` is currently unknown to the compiler and may have meaning added to it in the future\n-  --> $DIR/feature-gate-custom_attribute.rs:17:3\n+error: cannot find attribute macro `fake_attr` in this scope\n+  --> $DIR/feature-gate-custom_attribute.rs:13:3\n    |\n LL | #[fake_attr(pi = 3.14159)]\n    |   ^^^^^^^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n \n-error[E0658]: The attribute `fake_attr` is currently unknown to the compiler and may have meaning added to it in the future\n-  --> $DIR/feature-gate-custom_attribute.rs:18:3\n+error: cannot find attribute macro `fake_attr` in this scope\n+  --> $DIR/feature-gate-custom_attribute.rs:14:3\n    |\n LL | #[fake_attr(b\"hi\")]\n    |   ^^^^^^^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n \n-error[E0658]: The attribute `fake_doc` is currently unknown to the compiler and may have meaning added to it in the future\n-  --> $DIR/feature-gate-custom_attribute.rs:19:3\n+error: cannot find attribute macro `fake_doc` in this scope\n+  --> $DIR/feature-gate-custom_attribute.rs:15:3\n    |\n LL | #[fake_doc(r\"doc\")]\n    |   ^^^^^^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n \n error: aborting due to 13 previous errors\n \n-For more information about this error, try `rustc --explain E0658`."}, {"sha": "13983726c78debbd60cd587ca568b8b20a5ec244", "filename": "src/test/ui/feature-gates/feature-gate-rustc-attrs.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-rustc-attrs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-rustc-attrs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-rustc-attrs.rs?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -19,5 +19,5 @@ fn g() {}\n //~^ ERROR used by the test suite\n #[rustc_unknown]\n //~^ ERROR attributes starting with `rustc` are reserved for use by the `rustc` compiler\n-//~| ERROR attribute `rustc_unknown` is currently unknown\n+//~| ERROR cannot find attribute macro `rustc_unknown` in this scope\n fn main() {}"}, {"sha": "23cf936ee8350bdc548e3a07ff161ea04e459f04", "filename": "src/test/ui/feature-gates/feature-gate-rustc-attrs.stderr", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-rustc-attrs.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-rustc-attrs.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-rustc-attrs.stderr?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -37,14 +37,11 @@ LL | #[rustc_unknown]\n    = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n    = help: add `#![feature(rustc_attrs)]` to the crate attributes to enable\n \n-error[E0658]: The attribute `rustc_unknown` is currently unknown to the compiler and may have meaning added to it in the future\n+error: cannot find attribute macro `rustc_unknown` in this scope\n   --> $DIR/feature-gate-rustc-attrs.rs:20:3\n    |\n LL | #[rustc_unknown]\n    |   ^^^^^^^^^^^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n \n error[E0658]: used by the test suite\n   --> $DIR/feature-gate-rustc-attrs.rs:18:1"}, {"sha": "fad7bf55cf4ea28bbe4593ca80c753c44ad9ab6f", "filename": "src/test/ui/issues/issue-32655.rs", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fissues%2Fissue-32655.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fissues%2Fissue-32655.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-32655.rs?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -1,9 +1,6 @@\n-#![allow(dead_code)]\n-#![feature(rustc_attrs)]\n-\n macro_rules! foo (\n     () => (\n-        #[derive_Clone] //~ ERROR attribute `derive_Clone` is currently unknown\n+        #[derive_Clone] //~ ERROR cannot find attribute macro `derive_Clone` in this scope\n         struct T;\n     );\n );\n@@ -15,7 +12,7 @@ macro_rules! bar (\n foo!();\n \n bar!(\n-    #[derive_Clone] //~ ERROR attribute `derive_Clone` is currently unknown\n+    #[derive_Clone] //~ ERROR cannot find attribute macro `derive_Clone` in this scope\n     struct S;\n );\n "}, {"sha": "e13bed0fbfd660befb083ccb4cdb7b324150c54b", "filename": "src/test/ui/issues/issue-32655.stderr", "status": "modified", "additions": 4, "deletions": 11, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fissues%2Fissue-32655.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fissues%2Fissue-32655.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-32655.stderr?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -1,24 +1,17 @@\n-error[E0658]: The attribute `derive_Clone` is currently unknown to the compiler and may have meaning added to it in the future\n-  --> $DIR/issue-32655.rs:6:11\n+error: cannot find attribute macro `derive_Clone` in this scope\n+  --> $DIR/issue-32655.rs:3:11\n    |\n LL |         #[derive_Clone]\n    |           ^^^^^^^^^^^^\n ...\n LL | foo!();\n    | ------- in this macro invocation\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n \n-error[E0658]: The attribute `derive_Clone` is currently unknown to the compiler and may have meaning added to it in the future\n-  --> $DIR/issue-32655.rs:18:7\n+error: cannot find attribute macro `derive_Clone` in this scope\n+  --> $DIR/issue-32655.rs:15:7\n    |\n LL |     #[derive_Clone]\n    |       ^^^^^^^^^^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n \n error: aborting due to 2 previous errors\n \n-For more information about this error, try `rustc --explain E0658`."}, {"sha": "38074d5b05ca2485859b352cf22c7623e6bcbe92", "filename": "src/test/ui/issues/issue-49074.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fissues%2Fissue-49074.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fissues%2Fissue-49074.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-49074.rs?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -1,7 +1,7 @@\n // Check that unknown attribute error is shown even if there are unresolved macros.\n \n #[marco_use] // typo\n-//~^ ERROR The attribute `marco_use` is currently unknown to the compiler\n+//~^ ERROR cannot find attribute macro `marco_use` in this scope\n mod foo {\n     macro_rules! bar {\n         () => ();"}, {"sha": "d9b133a8c579bb91aae000875bbff8c94fe3cd51", "filename": "src/test/ui/issues/issue-49074.stderr", "status": "modified", "additions": 2, "deletions": 6, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fissues%2Fissue-49074.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fissues%2Fissue-49074.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-49074.stderr?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -1,11 +1,8 @@\n-error[E0658]: The attribute `marco_use` is currently unknown to the compiler and may have meaning added to it in the future\n+error: cannot find attribute macro `marco_use` in this scope\n   --> $DIR/issue-49074.rs:3:3\n    |\n LL | #[marco_use] // typo\n-   |   ^^^^^^^^^ help: a built-in attribute with a similar name exists: `macro_use`\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n+   |   ^^^^^^^^^\n \n error: cannot find macro `bar!` in this scope\n   --> $DIR/issue-49074.rs:12:4\n@@ -17,4 +14,3 @@ LL |    bar!();\n \n error: aborting due to 2 previous errors\n \n-For more information about this error, try `rustc --explain E0658`."}, {"sha": "b69a1fa4df08ac6bc475f4d6df028215455d73e0", "filename": "src/test/ui/macros/macro-reexport-removed.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fmacros%2Fmacro-reexport-removed.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fmacros%2Fmacro-reexport-removed.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Fmacro-reexport-removed.rs?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -2,7 +2,7 @@\n \n #![feature(macro_reexport)] //~ ERROR feature has been removed\n \n-#[macro_reexport(macro_one)] //~ ERROR attribute `macro_reexport` is currently unknown\n+#[macro_reexport(macro_one)] //~ ERROR cannot find attribute macro `macro_reexport` in this scope\n extern crate two_macros;\n \n fn main() {}"}, {"sha": "29baa6e0f288f82600831fa20b01e519c1a7065f", "filename": "src/test/ui/macros/macro-reexport-removed.stderr", "status": "modified", "additions": 3, "deletions": 7, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fmacros%2Fmacro-reexport-removed.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fmacros%2Fmacro-reexport-removed.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Fmacro-reexport-removed.stderr?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -10,16 +10,12 @@ note: subsumed by `pub use`\n LL | #![feature(macro_reexport)]\n    |            ^^^^^^^^^^^^^^\n \n-error[E0658]: The attribute `macro_reexport` is currently unknown to the compiler and may have meaning added to it in the future\n+error: cannot find attribute macro `macro_reexport` in this scope\n   --> $DIR/macro-reexport-removed.rs:5:3\n    |\n LL | #[macro_reexport(macro_one)]\n-   |   ^^^^^^^^^^^^^^ help: a built-in attribute with a similar name exists: `macro_export`\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n+   |   ^^^^^^^^^^^^^^\n \n error: aborting due to 2 previous errors\n \n-Some errors have detailed explanations: E0557, E0658.\n-For more information about an error, try `rustc --explain E0557`.\n+For more information about this error, try `rustc --explain E0557`."}, {"sha": "59ba1390e13237e023caf6a59e50a0b70c764f8d", "filename": "src/test/ui/proc-macro/derive-helper-shadowing.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fproc-macro%2Fderive-helper-shadowing.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fproc-macro%2Fderive-helper-shadowing.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Fderive-helper-shadowing.rs?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -19,7 +19,7 @@ struct S {\n         struct U;\n \n         mod inner {\n-            #[empty_helper] //~ ERROR attribute `empty_helper` is currently unknown\n+            #[empty_helper] //~ ERROR cannot find attribute macro `empty_helper` in this scope\n             struct V;\n         }\n "}, {"sha": "149f6eef443c1f7c68d08862fb5df41e7de54d7f", "filename": "src/test/ui/proc-macro/derive-helper-shadowing.stderr", "status": "modified", "additions": 2, "deletions": 6, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fproc-macro%2Fderive-helper-shadowing.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fproc-macro%2Fderive-helper-shadowing.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Fderive-helper-shadowing.stderr?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -1,11 +1,8 @@\n-error[E0658]: The attribute `empty_helper` is currently unknown to the compiler and may have meaning added to it in the future\n+error: cannot find attribute macro `empty_helper` in this scope\n   --> $DIR/derive-helper-shadowing.rs:22:15\n    |\n LL |             #[empty_helper]\n    |               ^^^^^^^^^^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n \n error[E0659]: `empty_helper` is ambiguous (derive helper attribute vs any other name)\n   --> $DIR/derive-helper-shadowing.rs:8:3\n@@ -27,5 +24,4 @@ LL | use test_macros::empty_attr as empty_helper;\n \n error: aborting due to 2 previous errors\n \n-Some errors have detailed explanations: E0658, E0659.\n-For more information about an error, try `rustc --explain E0658`.\n+For more information about this error, try `rustc --explain E0659`."}, {"sha": "4e6f9b072205da90ceb6388a9df4aacf2c493713", "filename": "src/test/ui/proc-macro/derive-still-gated.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fproc-macro%2Fderive-still-gated.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fproc-macro%2Fderive-still-gated.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Fderive-still-gated.rs?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -3,7 +3,7 @@\n #[macro_use]\n extern crate test_macros;\n \n-#[derive_Empty] //~ ERROR attribute `derive_Empty` is currently unknown\n+#[derive_Empty] //~ ERROR cannot find attribute macro `derive_Empty` in this scope\n struct A;\n \n fn main() {}"}, {"sha": "4df1715db94678e141292b8ea3b6662ce233632b", "filename": "src/test/ui/proc-macro/derive-still-gated.stderr", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fproc-macro%2Fderive-still-gated.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fproc-macro%2Fderive-still-gated.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Fderive-still-gated.stderr?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -1,12 +1,8 @@\n-error[E0658]: The attribute `derive_Empty` is currently unknown to the compiler and may have meaning added to it in the future\n+error: cannot find attribute macro `derive_Empty` in this scope\n   --> $DIR/derive-still-gated.rs:6:3\n    |\n LL | #[derive_Empty]\n    |   ^^^^^^^^^^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n \n error: aborting due to previous error\n \n-For more information about this error, try `rustc --explain E0658`."}, {"sha": "da7c89fdd46de40f8ec31ef382a3d7d7191e5850", "filename": "src/test/ui/proc-macro/expand-to-unstable-2.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fproc-macro%2Fexpand-to-unstable-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fproc-macro%2Fexpand-to-unstable-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Fexpand-to-unstable-2.rs?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -1,11 +1,12 @@\n // aux-build:derive-unstable-2.rs\n \n+#![feature(custom_attribute)]\n+\n #[macro_use]\n extern crate derive_unstable_2;\n \n #[derive(Unstable)]\n //~^ ERROR attributes starting with `rustc` are reserved for use by the `rustc` compiler\n-//~| ERROR attribute `rustc_foo` is currently unknown to the compiler\n \n struct A;\n "}, {"sha": "01e6a4a8ab95dc13ef6418bb078258e7bfe927bf", "filename": "src/test/ui/proc-macro/expand-to-unstable-2.stderr", "status": "modified", "additions": 2, "deletions": 11, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fproc-macro%2Fexpand-to-unstable-2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fproc-macro%2Fexpand-to-unstable-2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Fexpand-to-unstable-2.stderr?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -1,21 +1,12 @@\n error[E0658]: attributes starting with `rustc` are reserved for use by the `rustc` compiler\n-  --> $DIR/expand-to-unstable-2.rs:6:10\n+  --> $DIR/expand-to-unstable-2.rs:8:10\n    |\n LL | #[derive(Unstable)]\n    |          ^^^^^^^^\n    |\n    = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n    = help: add `#![feature(rustc_attrs)]` to the crate attributes to enable\n \n-error[E0658]: The attribute `rustc_foo` is currently unknown to the compiler and may have meaning added to it in the future\n-  --> $DIR/expand-to-unstable-2.rs:6:10\n-   |\n-LL | #[derive(Unstable)]\n-   |          ^^^^^^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n-\n-error: aborting due to 2 previous errors\n+error: aborting due to previous error\n \n For more information about this error, try `rustc --explain E0658`."}, {"sha": "491b89b2f5598018f7a80e6472791c0166544728", "filename": "src/test/ui/proc-macro/issue-41211.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fproc-macro%2Fissue-41211.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fproc-macro%2Fissue-41211.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Fissue-41211.rs?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -3,11 +3,11 @@\n // FIXME: https://github.com/rust-lang/rust/issues/41430\n // This is a temporary regression test for the ICE reported in #41211\n \n+#![feature(custom_attribute)]\n #![feature(custom_inner_attributes)]\n \n #![identity_attr]\n-//~^ ERROR attribute `identity_attr` is currently unknown to the compiler\n-//~| ERROR inconsistent resolution for a macro: first custom attribute, then attribute macro\n+//~^ ERROR inconsistent resolution for a macro: first custom attribute, then attribute macro\n extern crate test_macros;\n use test_macros::identity_attr;\n "}, {"sha": "f01cba0c93034b416ce2f2db3c8d17f245a9e119", "filename": "src/test/ui/proc-macro/issue-41211.stderr", "status": "modified", "additions": 2, "deletions": 12, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fproc-macro%2Fissue-41211.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fproc-macro%2Fissue-41211.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Fissue-41211.stderr?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -1,18 +1,8 @@\n-error[E0658]: The attribute `identity_attr` is currently unknown to the compiler and may have meaning added to it in the future\n-  --> $DIR/issue-41211.rs:8:4\n-   |\n-LL | #![identity_attr]\n-   |    ^^^^^^^^^^^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n-\n error: inconsistent resolution for a macro: first custom attribute, then attribute macro\n-  --> $DIR/issue-41211.rs:8:4\n+  --> $DIR/issue-41211.rs:9:4\n    |\n LL | #![identity_attr]\n    |    ^^^^^^^^^^^^^\n \n-error: aborting due to 2 previous errors\n+error: aborting due to previous error\n \n-For more information about this error, try `rustc --explain E0658`."}, {"sha": "8a26df9e76ade24209a90f1e308e738144737049", "filename": "src/test/ui/proc-macro/macro-namespace-reserved-2.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fproc-macro%2Fmacro-namespace-reserved-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fproc-macro%2Fmacro-namespace-reserved-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Fmacro-namespace-reserved-2.rs?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -35,7 +35,7 @@ fn check_bang3() {\n                        //~| ERROR expected macro, found derive macro `crate::MyTrait`\n }\n \n-#[my_macro] //~ ERROR attribute `my_macro` is currently unknown\n+#[my_macro] //~ ERROR cannot find attribute macro `my_macro` in this scope\n #[crate::my_macro] //~ ERROR can't use a procedural macro from the same crate that defines it\n                    //~| ERROR expected attribute, found macro `crate::my_macro`\n fn check_attr1() {}"}, {"sha": "e6017dc4d116387f618fa9259160c20fde5e704d", "filename": "src/test/ui/proc-macro/macro-namespace-reserved-2.stderr", "status": "modified", "additions": 6, "deletions": 10, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fproc-macro%2Fmacro-namespace-reserved-2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fproc-macro%2Fmacro-namespace-reserved-2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Fmacro-namespace-reserved-2.stderr?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -76,15 +76,6 @@ error: can't use a procedural macro from the same crate that defines it\n LL | #[derive(MyTrait)]\n    |          ^^^^^^^\n \n-error[E0658]: The attribute `my_macro` is currently unknown to the compiler and may have meaning added to it in the future\n-  --> $DIR/macro-namespace-reserved-2.rs:38:3\n-   |\n-LL | #[my_macro]\n-   |   ^^^^^^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n-\n error: can't use a procedural macro from the same crate that defines it\n   --> $DIR/macro-namespace-reserved-2.rs:39:3\n    |\n@@ -97,6 +88,12 @@ error: expected attribute, found macro `crate::my_macro`\n LL | #[crate::my_macro]\n    |   ^^^^^^^^^^^^^^^ not an attribute\n \n+error: cannot find attribute macro `my_macro` in this scope\n+  --> $DIR/macro-namespace-reserved-2.rs:38:3\n+   |\n+LL | #[my_macro]\n+   |   ^^^^^^^^\n+\n error: cannot find derive macro `my_macro` in this scope\n   --> $DIR/macro-namespace-reserved-2.rs:48:10\n    |\n@@ -117,4 +114,3 @@ LL |     MyTrait!();\n \n error: aborting due to 19 previous errors\n \n-For more information about this error, try `rustc --explain E0658`."}, {"sha": "04215226c6d4183b505f63a8f02b279ab9bec7cf", "filename": "src/test/ui/proc-macro/proc-macro-attributes.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fproc-macro%2Fproc-macro-attributes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fproc-macro%2Fproc-macro-attributes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Fproc-macro-attributes.rs?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -4,7 +4,7 @@\n extern crate derive_b;\n \n #[B] //~ ERROR `B` is ambiguous\n-#[C] //~ ERROR attribute `C` is currently unknown to the compiler\n+#[C] //~ ERROR cannot find attribute macro `C` in this scope\n #[B(D)] //~ ERROR `B` is ambiguous\n #[B(E = \"foo\")] //~ ERROR `B` is ambiguous\n #[B(arbitrary tokens)] //~ ERROR `B` is ambiguous"}, {"sha": "f59a47ad29448efec10cccc0f97805f95561d617", "filename": "src/test/ui/proc-macro/proc-macro-attributes.stderr", "status": "modified", "additions": 2, "deletions": 6, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fproc-macro%2Fproc-macro-attributes.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fproc-macro%2Fproc-macro-attributes.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Fproc-macro-attributes.stderr?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -1,11 +1,8 @@\n-error[E0658]: The attribute `C` is currently unknown to the compiler and may have meaning added to it in the future\n+error: cannot find attribute macro `C` in this scope\n   --> $DIR/proc-macro-attributes.rs:7:3\n    |\n LL | #[C]\n    |   ^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n \n error[E0659]: `B` is ambiguous (derive helper attribute vs any other name)\n   --> $DIR/proc-macro-attributes.rs:6:3\n@@ -77,5 +74,4 @@ LL | #[macro_use]\n \n error: aborting due to 5 previous errors\n \n-Some errors have detailed explanations: E0658, E0659.\n-For more information about an error, try `rustc --explain E0658`.\n+For more information about this error, try `rustc --explain E0659`."}, {"sha": "0a7861aba6ebb1a2888472e116aff2df2edd61e3", "filename": "src/test/ui/proc-macro/resolve-error.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fproc-macro%2Fresolve-error.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fproc-macro%2Fresolve-error.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Fresolve-error.rs?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -24,11 +24,11 @@ macro_rules! attr_proc_mac {\n struct Foo;\n \n // Interpreted as a feature gated custom attribute\n-#[attr_proc_macra] //~ ERROR attribute `attr_proc_macra` is currently unknown\n+#[attr_proc_macra] //~ ERROR cannot find attribute macro `attr_proc_macra` in this scope\n struct Bar;\n \n // Interpreted as a feature gated custom attribute\n-#[FooWithLongNan] //~ ERROR attribute `FooWithLongNan` is currently unknown\n+#[FooWithLongNan] //~ ERROR cannot find attribute macro `FooWithLongNan` in this scope\n struct Asdf;\n \n #[derive(Dlone)]"}, {"sha": "ca13fc2003c417449ac91b408ebf740662b495ed", "filename": "src/test/ui/proc-macro/resolve-error.stderr", "status": "modified", "additions": 9, "deletions": 16, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fproc-macro%2Fresolve-error.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fproc-macro%2Fresolve-error.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Fresolve-error.stderr?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -1,26 +1,20 @@\n-error[E0658]: The attribute `attr_proc_macra` is currently unknown to the compiler and may have meaning added to it in the future\n+error: cannot find derive macro `FooWithLongNan` in this scope\n+  --> $DIR/resolve-error.rs:22:10\n+   |\n+LL | #[derive(FooWithLongNan)]\n+   |          ^^^^^^^^^^^^^^ help: try: `FooWithLongName`\n+\n+error: cannot find attribute macro `attr_proc_macra` in this scope\n   --> $DIR/resolve-error.rs:27:3\n    |\n LL | #[attr_proc_macra]\n-   |   ^^^^^^^^^^^^^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n+   |   ^^^^^^^^^^^^^^^ help: try: `attr_proc_macro`\n \n-error[E0658]: The attribute `FooWithLongNan` is currently unknown to the compiler and may have meaning added to it in the future\n+error: cannot find attribute macro `FooWithLongNan` in this scope\n   --> $DIR/resolve-error.rs:31:3\n    |\n LL | #[FooWithLongNan]\n    |   ^^^^^^^^^^^^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n-\n-error: cannot find derive macro `FooWithLongNan` in this scope\n-  --> $DIR/resolve-error.rs:22:10\n-   |\n-LL | #[derive(FooWithLongNan)]\n-   |          ^^^^^^^^^^^^^^ help: try: `FooWithLongName`\n \n error: cannot find derive macro `Dlone` in this scope\n   --> $DIR/resolve-error.rs:34:10\n@@ -66,4 +60,3 @@ LL |     bang_proc_macrp!();\n \n error: aborting due to 10 previous errors\n \n-For more information about this error, try `rustc --explain E0658`."}, {"sha": "fddb991da822cfa297c9db0a5ca67a365024e45c", "filename": "src/test/ui/reserved/reserved-attr-on-macro.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Freserved%2Freserved-attr-on-macro.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Freserved%2Freserved-attr-on-macro.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Freserved%2Freserved-attr-on-macro.rs?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -1,5 +1,5 @@\n #[rustc_attribute_should_be_reserved]\n-//~^ ERROR attribute `rustc_attribute_should_be_reserved` is currently unknown\n+//~^ ERROR cannot find attribute macro `rustc_attribute_should_be_reserved` in this scope\n //~| ERROR attributes starting with `rustc` are reserved for use by the `rustc` compiler\n \n macro_rules! foo {"}, {"sha": "d4b97d290ea891b5593fa94748431bc1edb323ba", "filename": "src/test/ui/reserved/reserved-attr-on-macro.stderr", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Freserved%2Freserved-attr-on-macro.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Freserved%2Freserved-attr-on-macro.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Freserved%2Freserved-attr-on-macro.stderr?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -7,14 +7,11 @@ LL | #[rustc_attribute_should_be_reserved]\n    = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n    = help: add `#![feature(rustc_attrs)]` to the crate attributes to enable\n \n-error[E0658]: The attribute `rustc_attribute_should_be_reserved` is currently unknown to the compiler and may have meaning added to it in the future\n+error: cannot find attribute macro `rustc_attribute_should_be_reserved` in this scope\n   --> $DIR/reserved-attr-on-macro.rs:1:3\n    |\n LL | #[rustc_attribute_should_be_reserved]\n    |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n \n error: cannot determine resolution for the macro `foo`\n   --> $DIR/reserved-attr-on-macro.rs:10:5"}, {"sha": "14b2c8644e0b40f2caa9fc05695220cba02b16e1", "filename": "src/test/ui/span/issue-36530.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fspan%2Fissue-36530.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fspan%2Fissue-36530.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fspan%2Fissue-36530.rs?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -1,9 +1,10 @@\n // gate-test-custom_inner_attributes\n \n-#[foo] //~ ERROR is currently unknown to the compiler\n+#![feature(custom_attribute)]\n+\n+#[foo]\n mod foo {\n-    #![foo] //~ ERROR is currently unknown to the compiler\n-            //~| ERROR non-builtin inner attributes are unstable\n+    #![foo] //~ ERROR non-builtin inner attributes are unstable\n }\n \n fn main() {}"}, {"sha": "c6b7895e65a0f240620617e48a2417a5d0add39e", "filename": "src/test/ui/span/issue-36530.stderr", "status": "modified", "additions": 2, "deletions": 20, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fspan%2Fissue-36530.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fspan%2Fissue-36530.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fspan%2Fissue-36530.stderr?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -1,30 +1,12 @@\n-error[E0658]: The attribute `foo` is currently unknown to the compiler and may have meaning added to it in the future\n-  --> $DIR/issue-36530.rs:3:3\n-   |\n-LL | #[foo]\n-   |   ^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n-\n error[E0658]: non-builtin inner attributes are unstable\n-  --> $DIR/issue-36530.rs:5:5\n+  --> $DIR/issue-36530.rs:7:5\n    |\n LL |     #![foo]\n    |     ^^^^^^^\n    |\n    = note: for more information, see https://github.com/rust-lang/rust/issues/54726\n    = help: add `#![feature(custom_inner_attributes)]` to the crate attributes to enable\n \n-error[E0658]: The attribute `foo` is currently unknown to the compiler and may have meaning added to it in the future\n-  --> $DIR/issue-36530.rs:5:8\n-   |\n-LL |     #![foo]\n-   |        ^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n-\n-error: aborting due to 3 previous errors\n+error: aborting due to previous error\n \n For more information about this error, try `rustc --explain E0658`."}, {"sha": "74f63f2b0ed073fca059049714baa620f07a907b", "filename": "src/test/ui/suggestions/attribute-typos.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fsuggestions%2Fattribute-typos.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fsuggestions%2Fattribute-typos.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Fattribute-typos.rs?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -1,11 +1,11 @@\n-#[deprcated] //~ ERROR attribute `deprcated` is currently unknown\n+#[deprcated] //~ ERROR cannot find attribute macro `deprcated` in this scope\n fn foo() {}\n \n-#[tests] //~ ERROR attribute `tests` is currently unknown to the compiler\n+#[tests] //~ ERROR cannot find attribute macro `tests` in this scope\n fn bar() {}\n \n #[rustc_err]\n-//~^ ERROR attribute `rustc_err` is currently unknown\n+//~^ ERROR cannot find attribute macro `rustc_err` in this scope\n //~| ERROR attributes starting with `rustc` are reserved for use by the `rustc` compiler\n \n fn main() {}"}, {"sha": "8ed9eef05c847ffd576ea197be4e3c5de9b98b83", "filename": "src/test/ui/suggestions/attribute-typos.stderr", "status": "modified", "additions": 5, "deletions": 14, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fsuggestions%2Fattribute-typos.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Fsuggestions%2Fattribute-typos.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Fattribute-typos.stderr?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -7,32 +7,23 @@ LL | #[rustc_err]\n    = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n    = help: add `#![feature(rustc_attrs)]` to the crate attributes to enable\n \n-error[E0658]: The attribute `rustc_err` is currently unknown to the compiler and may have meaning added to it in the future\n+error: cannot find attribute macro `rustc_err` in this scope\n   --> $DIR/attribute-typos.rs:7:3\n    |\n LL | #[rustc_err]\n    |   ^^^^^^^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n \n-error[E0658]: The attribute `tests` is currently unknown to the compiler and may have meaning added to it in the future\n+error: cannot find attribute macro `tests` in this scope\n   --> $DIR/attribute-typos.rs:4:3\n    |\n LL | #[tests]\n-   |   ^^^^^ help: a built-in attribute with a similar name exists: `test`\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n+   |   ^^^^^ help: try: `test`\n \n-error[E0658]: The attribute `deprcated` is currently unknown to the compiler and may have meaning added to it in the future\n+error: cannot find attribute macro `deprcated` in this scope\n   --> $DIR/attribute-typos.rs:1:3\n    |\n LL | #[deprcated]\n-   |   ^^^^^^^^^ help: a built-in attribute with a similar name exists: `deprecated`\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n+   |   ^^^^^^^^^\n \n error: aborting due to 4 previous errors\n "}, {"sha": "8c62b34bd9ea5695edfdc1de5e454ff91114e5e7", "filename": "src/test/ui/tool-attributes/tool-attributes-misplaced-1.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Ftool-attributes%2Ftool-attributes-misplaced-1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Ftool-attributes%2Ftool-attributes-misplaced-1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftool-attributes%2Ftool-attributes-misplaced-1.rs?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -5,7 +5,7 @@ type B = rustfmt::skip; //~ ERROR expected type, found tool attribute `rustfmt::\n struct S;\n \n // Interpreted as a feature gated custom attribute\n-#[rustfmt] //~ ERROR attribute `rustfmt` is currently unknown\n+#[rustfmt] //~ ERROR cannot find attribute macro `rustfmt` in this scope\n fn check() {}\n \n #[rustfmt::skip] // OK"}, {"sha": "33581a170822b848857efffc6a5f837cb44078cd", "filename": "src/test/ui/tool-attributes/tool-attributes-misplaced-1.stderr", "status": "modified", "additions": 7, "deletions": 11, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Ftool-attributes%2Ftool-attributes-misplaced-1.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/79f0d88de860bed2747811cffba177504d3ead8e/src%2Ftest%2Fui%2Ftool-attributes%2Ftool-attributes-misplaced-1.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftool-attributes%2Ftool-attributes-misplaced-1.stderr?ref=79f0d88de860bed2747811cffba177504d3ead8e", "patch": "@@ -1,18 +1,15 @@\n-error[E0658]: The attribute `rustfmt` is currently unknown to the compiler and may have meaning added to it in the future\n-  --> $DIR/tool-attributes-misplaced-1.rs:8:3\n-   |\n-LL | #[rustfmt]\n-   |   ^^^^^^^\n-   |\n-   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n-   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n-\n error: cannot find derive macro `rustfmt` in this scope\n   --> $DIR/tool-attributes-misplaced-1.rs:4:10\n    |\n LL | #[derive(rustfmt)]\n    |          ^^^^^^^\n \n+error: cannot find attribute macro `rustfmt` in this scope\n+  --> $DIR/tool-attributes-misplaced-1.rs:8:3\n+   |\n+LL | #[rustfmt]\n+   |   ^^^^^^^\n+\n error: cannot find macro `rustfmt!` in this scope\n   --> $DIR/tool-attributes-misplaced-1.rs:14:5\n    |\n@@ -45,5 +42,4 @@ LL |     rustfmt::skip;\n \n error: aborting due to 7 previous errors\n \n-Some errors have detailed explanations: E0423, E0658.\n-For more information about an error, try `rustc --explain E0423`.\n+For more information about this error, try `rustc --explain E0423`."}]}