{"sha": "be20570a07067e0c5fad37581f1287835cffda65", "node_id": "C_kwDOAAsO6NoAKGJlMjA1NzBhMDcwNjdlMGM1ZmFkMzc1ODFmMTI4NzgzNWNmZmRhNjU", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2021-12-12T06:45:29Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-12-12T06:45:29Z"}, "message": "Rollup merge of #91811 - itzurabhi:boostrap-dist-wix-unwrap-issue, r=Mark-Simulacrum\n\nbootstrap: Change unwrap() to expect() for WIX path\n\nOn Windows, `x.py dist` command panics without proper error message if `WIX` environment variable is not set. This patch changes `Option::unwrap()` to `Option::expect()`.", "tree": {"sha": "a6b497bcf1a80d308b337471609ebc748dacb39f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a6b497bcf1a80d308b337471609ebc748dacb39f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/be20570a07067e0c5fad37581f1287835cffda65", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJhtZqKCRBK7hj4Ov3rIwAA5LsIAEGiojRUvNX+47fDJSdIN2JF\nxCBLAbFTVCMzya11UWfi/gFYuEy5SYinTbV05qmnuu3IZ7DGztTZgIO3kkkBRtFk\nmxMZgdR8jrGC3XXVjqp2w5fgKK/VE1hNexqgU0M1ffWHqzEVxZSwzL/zCy533VTS\nJCCVH56vtQQUKq4EVny9UagE1RIV1exONTe46fCxGqV+BsjV+W9u7Ue+38KDo2Wg\nyi/UJ8+03dB/bDhZ+IYZ3mWNt8ky/a/UIhEdmZzzQpK7YN5lqBXSF0zW1JKW6SvK\n0h2IcEWfzQuilKcseOMgw3YcSrJQv5RKbMvB1Wen2hAK6Mbno8S2aphD7nQMdhQ=\n=bJq0\n-----END PGP SIGNATURE-----\n", "payload": "tree a6b497bcf1a80d308b337471609ebc748dacb39f\nparent 5dec0139f9452acbb3d5cd05ddfa54944f22a5c9\nparent b9ae04f088803d1df2b704aa5a3f5392ddf53cf6\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1639291529 +0100\ncommitter GitHub <noreply@github.com> 1639291529 +0100\n\nRollup merge of #91811 - itzurabhi:boostrap-dist-wix-unwrap-issue, r=Mark-Simulacrum\n\nbootstrap: Change unwrap() to expect() for WIX path\n\nOn Windows, `x.py dist` command panics without proper error message if `WIX` environment variable is not set. This patch changes `Option::unwrap()` to `Option::expect()`.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/be20570a07067e0c5fad37581f1287835cffda65", "html_url": "https://github.com/rust-lang/rust/commit/be20570a07067e0c5fad37581f1287835cffda65", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/be20570a07067e0c5fad37581f1287835cffda65/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5dec0139f9452acbb3d5cd05ddfa54944f22a5c9", "url": "https://api.github.com/repos/rust-lang/rust/commits/5dec0139f9452acbb3d5cd05ddfa54944f22a5c9", "html_url": "https://github.com/rust-lang/rust/commit/5dec0139f9452acbb3d5cd05ddfa54944f22a5c9"}, {"sha": "b9ae04f088803d1df2b704aa5a3f5392ddf53cf6", "url": "https://api.github.com/repos/rust-lang/rust/commits/b9ae04f088803d1df2b704aa5a3f5392ddf53cf6", "html_url": "https://github.com/rust-lang/rust/commit/b9ae04f088803d1df2b704aa5a3f5392ddf53cf6"}], "stats": {"total": 4, "additions": 3, "deletions": 1}, "files": [{"sha": "dd179df394889e91dbe213d35bf1570d103a75e1", "filename": "src/bootstrap/dist.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/be20570a07067e0c5fad37581f1287835cffda65/src%2Fbootstrap%2Fdist.rs", "raw_url": "https://github.com/rust-lang/rust/raw/be20570a07067e0c5fad37581f1287835cffda65/src%2Fbootstrap%2Fdist.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fdist.rs?ref=be20570a07067e0c5fad37581f1287835cffda65", "patch": "@@ -1564,7 +1564,9 @@ impl Step for Extended {\n             builder.install(&etc.join(\"gfx/rust-logo.ico\"), &exe, 0o644);\n \n             // Generate msi installer\n-            let wix = PathBuf::from(env::var_os(\"WIX\").unwrap());\n+            let wix_path = env::var_os(\"WIX\")\n+                .expect(\"`WIX` environment variable must be set for generating MSI installer(s).\");\n+            let wix = PathBuf::from(wix_path);\n             let heat = wix.join(\"bin/heat.exe\");\n             let candle = wix.join(\"bin/candle.exe\");\n             let light = wix.join(\"bin/light.exe\");"}]}