{"sha": "a09b94b3d9209a07c416d30baaf73fe78e84e4b8", "node_id": "MDY6Q29tbWl0NzI0NzEyOmEwOWI5NGIzZDkyMDlhMDdjNDE2ZDMwYmFhZjczZmU3OGU4NGU0Yjg=", "commit": {"author": {"name": "Eduard-Mihai Burtescu", "email": "edy.burt@gmail.com", "date": "2016-10-19T05:00:04Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2016-10-19T05:00:04Z"}, "message": "Rollup merge of #37254 - srinivasreddy:master, r=alexcrichton\n\nrun rustfmt on libpanic_unwind", "tree": {"sha": "c2f2efd0dbeb975fb9989426fd8b4fc62d5dea14", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c2f2efd0dbeb975fb9989426fd8b4fc62d5dea14"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a09b94b3d9209a07c416d30baaf73fe78e84e4b8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a09b94b3d9209a07c416d30baaf73fe78e84e4b8", "html_url": "https://github.com/rust-lang/rust/commit/a09b94b3d9209a07c416d30baaf73fe78e84e4b8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a09b94b3d9209a07c416d30baaf73fe78e84e4b8/comments", "author": {"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3d57d42f13a2148ecbc3686f367643ebe4b841af", "url": "https://api.github.com/repos/rust-lang/rust/commits/3d57d42f13a2148ecbc3686f367643ebe4b841af", "html_url": "https://github.com/rust-lang/rust/commit/3d57d42f13a2148ecbc3686f367643ebe4b841af"}, {"sha": "1cc1dcce7d7e934817c3bf3543ca8e7753960d0b", "url": "https://api.github.com/repos/rust-lang/rust/commits/1cc1dcce7d7e934817c3bf3543ca8e7753960d0b", "html_url": "https://github.com/rust-lang/rust/commit/1cc1dcce7d7e934817c3bf3543ca8e7753960d0b"}], "stats": {"total": 41, "additions": 20, "deletions": 21}, "files": [{"sha": "e7994f4e0ef0a3837ee33ad2719db00e18d45c80", "filename": "src/libpanic_unwind/dwarf/eh.rs", "status": "modified", "additions": 3, "deletions": 7, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/a09b94b3d9209a07c416d30baaf73fe78e84e4b8/src%2Flibpanic_unwind%2Fdwarf%2Feh.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a09b94b3d9209a07c416d30baaf73fe78e84e4b8/src%2Flibpanic_unwind%2Fdwarf%2Feh.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibpanic_unwind%2Fdwarf%2Feh.rs?ref=a09b94b3d9209a07c416d30baaf73fe78e84e4b8", "patch": "@@ -116,7 +116,7 @@ pub unsafe fn find_eh_action(lsda: *const u8, context: &EHContext) -> EHAction {\n         // The \"IP\" is an index into the call-site table, with two exceptions:\n         // -1 means 'no-action', and 0 means 'terminate'.\n         match ip as isize {\n-           -1 => return EHAction::None,\n+            -1 => return EHAction::None,\n             0 => return EHAction::Terminate,\n             _ => (),\n         }\n@@ -182,12 +182,8 @@ unsafe fn read_encoded_pointer(reader: &mut DwarfReader,\n             assert!(context.func_start != 0);\n             context.func_start\n         }\n-        DW_EH_PE_textrel => {\n-            (*context.get_text_start)()\n-        }\n-        DW_EH_PE_datarel => {\n-            (*context.get_data_start)()\n-        }\n+        DW_EH_PE_textrel => (*context.get_text_start)(),\n+        DW_EH_PE_datarel => (*context.get_data_start)(),\n         _ => panic!(),\n     };\n "}, {"sha": "0e48e37c92358150f285f4cc5db6357e098b9fb3", "filename": "src/libpanic_unwind/emcc.rs", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/a09b94b3d9209a07c416d30baaf73fe78e84e4b8/src%2Flibpanic_unwind%2Femcc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a09b94b3d9209a07c416d30baaf73fe78e84e4b8/src%2Flibpanic_unwind%2Femcc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibpanic_unwind%2Femcc.rs?ref=a09b94b3d9209a07c416d30baaf73fe78e84e4b8", "patch": "@@ -57,13 +57,10 @@ unsafe extern \"C\" fn rust_eh_personality(version: c_int,\n                                          exception_object: *mut uw::_Unwind_Exception,\n                                          context: *mut uw::_Unwind_Context)\n                                          -> uw::_Unwind_Reason_Code {\n-    __gxx_personality_v0(version, actions,\n-                         exception_class,\n-                         exception_object,\n-                         context)\n+    __gxx_personality_v0(version, actions, exception_class, exception_object, context)\n }\n \n-extern {\n+extern \"C\" {\n     fn __cxa_allocate_exception(thrown_size: libc::size_t) -> *mut libc::c_void;\n     fn __cxa_free_exception(thrown_exception: *mut libc::c_void);\n     fn __cxa_throw(thrown_exception: *mut libc::c_void,"}, {"sha": "f0f19be3366bd064f9699fa87271f7518007f401", "filename": "src/libpanic_unwind/gcc.rs", "status": "modified", "additions": 13, "deletions": 8, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/a09b94b3d9209a07c416d30baaf73fe78e84e4b8/src%2Flibpanic_unwind%2Fgcc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a09b94b3d9209a07c416d30baaf73fe78e84e4b8/src%2Flibpanic_unwind%2Fgcc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibpanic_unwind%2Fgcc.rs?ref=a09b94b3d9209a07c416d30baaf73fe78e84e4b8", "patch": "@@ -156,14 +156,16 @@ unsafe extern \"C\" fn rust_eh_personality(version: c_int,\n     let eh_action = find_eh_action(context);\n     if actions as i32 & uw::_UA_SEARCH_PHASE as i32 != 0 {\n         match eh_action {\n-            EHAction::None | EHAction::Cleanup(_) => return uw::_URC_CONTINUE_UNWIND,\n+            EHAction::None |\n+            EHAction::Cleanup(_) => return uw::_URC_CONTINUE_UNWIND,\n             EHAction::Catch(_) => return uw::_URC_HANDLER_FOUND,\n             EHAction::Terminate => return uw::_URC_FATAL_PHASE1_ERROR,\n         }\n     } else {\n         match eh_action {\n             EHAction::None => return uw::_URC_CONTINUE_UNWIND,\n-            EHAction::Cleanup(lpad) | EHAction::Catch(lpad) => {\n+            EHAction::Cleanup(lpad) |\n+            EHAction::Catch(lpad) => {\n                 uw::_Unwind_SetGR(context, UNWIND_DATA_REG.0, exception_object as uintptr_t);\n                 uw::_Unwind_SetGR(context, UNWIND_DATA_REG.1, 0);\n                 uw::_Unwind_SetIP(context, lpad);\n@@ -182,7 +184,7 @@ unsafe extern \"C\" fn rust_eh_personality(version: c_int,\n unsafe extern \"C\" fn rust_eh_personality(state: uw::_Unwind_State,\n                                          exception_object: *mut uw::_Unwind_Exception,\n                                          context: *mut uw::_Unwind_Context)\n-                                        -> uw::_Unwind_Reason_Code {\n+                                         -> uw::_Unwind_Reason_Code {\n     let state = state as c_int;\n     let action = state & uw::_US_ACTION_MASK as c_int;\n     let search_phase = if action == uw::_US_VIRTUAL_UNWIND_FRAME as c_int {\n@@ -191,7 +193,7 @@ unsafe extern \"C\" fn rust_eh_personality(state: uw::_Unwind_State,\n         // we want to continue unwinding the stack, otherwise all our backtraces\n         // would end at __rust_try\n         if state & uw::_US_FORCE_UNWIND as c_int != 0 {\n-            return continue_unwind(exception_object, context)\n+            return continue_unwind(exception_object, context);\n         }\n         true\n     } else if action == uw::_US_UNWIND_FRAME_STARTING as c_int {\n@@ -207,7 +209,9 @@ unsafe extern \"C\" fn rust_eh_personality(state: uw::_Unwind_State,\n     // To preserve signatures of functions like _Unwind_GetLanguageSpecificData(), which\n     // take only the context pointer, GCC personality routines stash a pointer to exception_object\n     // in the context, using location reserved for ARM's \"scratch register\" (r12).\n-    uw::_Unwind_SetGR(context, uw::UNWIND_POINTER_REG, exception_object as uw::_Unwind_Ptr);\n+    uw::_Unwind_SetGR(context,\n+                      uw::UNWIND_POINTER_REG,\n+                      exception_object as uw::_Unwind_Ptr);\n     // ...A more principled approach would be to provide the full definition of ARM's\n     // _Unwind_Context in our libunwind bindings and fetch the required data from there directly,\n     // bypassing DWARF compatibility functions.\n@@ -223,7 +227,8 @@ unsafe extern \"C\" fn rust_eh_personality(state: uw::_Unwind_State,\n     } else {\n         match eh_action {\n             EHAction::None => return continue_unwind(exception_object, context),\n-            EHAction::Cleanup(lpad) | EHAction::Catch(lpad) => {\n+            EHAction::Cleanup(lpad) |\n+            EHAction::Catch(lpad) => {\n                 uw::_Unwind_SetGR(context, UNWIND_DATA_REG.0, exception_object as uintptr_t);\n                 uw::_Unwind_SetGR(context, UNWIND_DATA_REG.1, 0);\n                 uw::_Unwind_SetIP(context, lpad);\n@@ -247,8 +252,8 @@ unsafe extern \"C\" fn rust_eh_personality(state: uw::_Unwind_State,\n     // defined in libgcc\n     extern \"C\" {\n         fn __gnu_unwind_frame(exception_object: *mut uw::_Unwind_Exception,\n-                                context: *mut uw::_Unwind_Context)\n-                                -> uw::_Unwind_Reason_Code;\n+                              context: *mut uw::_Unwind_Context)\n+                              -> uw::_Unwind_Reason_Code;\n     }\n }\n "}, {"sha": "d4906b556b31a5be0fd2e9922dd7c9ade6629f0e", "filename": "src/libpanic_unwind/seh64_gnu.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a09b94b3d9209a07c416d30baaf73fe78e84e4b8/src%2Flibpanic_unwind%2Fseh64_gnu.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a09b94b3d9209a07c416d30baaf73fe78e84e4b8/src%2Flibpanic_unwind%2Fseh64_gnu.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibpanic_unwind%2Fseh64_gnu.rs?ref=a09b94b3d9209a07c416d30baaf73fe78e84e4b8", "patch": "@@ -129,7 +129,8 @@ unsafe fn find_landing_pad(dc: &c::DISPATCHER_CONTEXT) -> Option<usize> {\n     };\n     match find_eh_action(dc.HandlerData, &eh_ctx) {\n         EHAction::None => None,\n-        EHAction::Cleanup(lpad) | EHAction::Catch(lpad) => Some(lpad),\n+        EHAction::Cleanup(lpad) |\n+        EHAction::Catch(lpad) => Some(lpad),\n         EHAction::Terminate => intrinsics::abort(),\n     }\n }"}]}