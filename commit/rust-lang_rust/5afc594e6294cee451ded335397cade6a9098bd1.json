{"sha": "5afc594e6294cee451ded335397cade6a9098bd1", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVhZmM1OTRlNjI5NGNlZTQ1MWRlZDMzNTM5N2NhZGU2YTkwOThiZDE=", "commit": {"author": {"name": "klensy", "email": "klensy@users.noreply.github.com", "date": "2021-06-01T16:44:10Z"}, "committer": {"name": "klensy", "email": "klensy@users.noreply.github.com", "date": "2021-06-01T16:44:10Z"}, "message": "replace lazy_static with once_cell, drop direct dependency on serde", "tree": {"sha": "d75a4f3621743cb946278228875626bbe8f22000", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d75a4f3621743cb946278228875626bbe8f22000"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5afc594e6294cee451ded335397cade6a9098bd1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5afc594e6294cee451ded335397cade6a9098bd1", "html_url": "https://github.com/rust-lang/rust/commit/5afc594e6294cee451ded335397cade6a9098bd1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5afc594e6294cee451ded335397cade6a9098bd1/comments", "author": {"login": "klensy", "id": 1782831, "node_id": "MDQ6VXNlcjE3ODI4MzE=", "avatar_url": "https://avatars.githubusercontent.com/u/1782831?v=4", "gravatar_id": "", "url": "https://api.github.com/users/klensy", "html_url": "https://github.com/klensy", "followers_url": "https://api.github.com/users/klensy/followers", "following_url": "https://api.github.com/users/klensy/following{/other_user}", "gists_url": "https://api.github.com/users/klensy/gists{/gist_id}", "starred_url": "https://api.github.com/users/klensy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/klensy/subscriptions", "organizations_url": "https://api.github.com/users/klensy/orgs", "repos_url": "https://api.github.com/users/klensy/repos", "events_url": "https://api.github.com/users/klensy/events{/privacy}", "received_events_url": "https://api.github.com/users/klensy/received_events", "type": "User", "site_admin": false}, "committer": {"login": "klensy", "id": 1782831, "node_id": "MDQ6VXNlcjE3ODI4MzE=", "avatar_url": "https://avatars.githubusercontent.com/u/1782831?v=4", "gravatar_id": "", "url": "https://api.github.com/users/klensy", "html_url": "https://github.com/klensy", "followers_url": "https://api.github.com/users/klensy/followers", "following_url": "https://api.github.com/users/klensy/following{/other_user}", "gists_url": "https://api.github.com/users/klensy/gists{/gist_id}", "starred_url": "https://api.github.com/users/klensy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/klensy/subscriptions", "organizations_url": "https://api.github.com/users/klensy/orgs", "repos_url": "https://api.github.com/users/klensy/repos", "events_url": "https://api.github.com/users/klensy/events{/privacy}", "received_events_url": "https://api.github.com/users/klensy/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c63cb014a045642efbbf1363666a4eda247163a3", "url": "https://api.github.com/repos/rust-lang/rust/commits/c63cb014a045642efbbf1363666a4eda247163a3", "html_url": "https://github.com/rust-lang/rust/commit/c63cb014a045642efbbf1363666a4eda247163a3"}], "stats": {"total": 18, "additions": 8, "deletions": 10}, "files": [{"sha": "7badb93bce553282a5893bf71970a8fe45c8e803", "filename": "Cargo.lock", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/5afc594e6294cee451ded335397cade6a9098bd1/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/5afc594e6294cee451ded335397cade6a9098bd1/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=5afc594e6294cee451ded335397cade6a9098bd1", "patch": "@@ -1743,9 +1743,8 @@ dependencies = [\n  \"fs-err\",\n  \"getopts\",\n  \"jsonpath_lib\",\n- \"lazy_static\",\n+ \"once_cell\",\n  \"regex\",\n- \"serde\",\n  \"serde_json\",\n  \"shlex\",\n ]"}, {"sha": "b5f1554dbe4df7959a6524ef972f91eb97cf3be8", "filename": "src/tools/jsondocck/Cargo.toml", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/5afc594e6294cee451ded335397cade6a9098bd1/src%2Ftools%2Fjsondocck%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/5afc594e6294cee451ded335397cade6a9098bd1/src%2Ftools%2Fjsondocck%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fjsondocck%2FCargo.toml?ref=5afc594e6294cee451ded335397cade6a9098bd1", "patch": "@@ -8,8 +8,7 @@ edition = \"2018\"\n jsonpath_lib = \"0.2\"\n getopts = \"0.2\"\n regex = \"1.4\"\n-lazy_static = \"1.4\"\n shlex = \"1.0\"\n-serde = \"1.0\"\n serde_json = \"1.0\"\n fs-err = \"2.5.0\"\n+once_cell = \"1.0\""}, {"sha": "b8ea10f3d22778e6a96032bdecc729f8ba1b2376", "filename": "src/tools/jsondocck/src/main.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/5afc594e6294cee451ded335397cade6a9098bd1/src%2Ftools%2Fjsondocck%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5afc594e6294cee451ded335397cade6a9098bd1/src%2Ftools%2Fjsondocck%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fjsondocck%2Fsrc%2Fmain.rs?ref=5afc594e6294cee451ded335397cade6a9098bd1", "patch": "@@ -1,5 +1,5 @@\n use jsonpath_lib::select;\n-use lazy_static::lazy_static;\n+use once_cell::sync::Lazy;\n use regex::{Regex, RegexBuilder};\n use serde_json::Value;\n use std::borrow::Cow;\n@@ -94,19 +94,19 @@ impl fmt::Display for CommandKind {\n     }\n }\n \n-lazy_static! {\n-    static ref LINE_PATTERN: Regex = RegexBuilder::new(\n+static LINE_PATTERN: Lazy<Regex> = Lazy::new(|| {\n+    RegexBuilder::new(\n         r#\"\n         \\s(?P<invalid>!?)@(?P<negated>!?)\n         (?P<cmd>[A-Za-z]+(?:-[A-Za-z]+)*)\n         (?P<args>.*)$\n-    \"#\n+    \"#,\n     )\n     .ignore_whitespace(true)\n     .unicode(true)\n     .build()\n-    .unwrap();\n-}\n+    .unwrap()\n+});\n \n fn print_err(msg: &str, lineno: usize) {\n     eprintln!(\"Invalid command: {} on line {}\", msg, lineno)"}]}