{"sha": "6090cea18479f3a3bf12fe63034966cbe6eed2f7", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYwOTBjZWExODQ3OWYzYTNiZjEyZmU2MzAzNDk2NmNiZTZlZWQyZjc=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2015-09-09T09:58:27Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2015-09-09T09:59:55Z"}, "message": "Add error code for unnecessary visibility qualifier", "tree": {"sha": "0483ba9b8c01d57aed52a55580c269a28cd706a7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0483ba9b8c01d57aed52a55580c269a28cd706a7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6090cea18479f3a3bf12fe63034966cbe6eed2f7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6090cea18479f3a3bf12fe63034966cbe6eed2f7", "html_url": "https://github.com/rust-lang/rust/commit/6090cea18479f3a3bf12fe63034966cbe6eed2f7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6090cea18479f3a3bf12fe63034966cbe6eed2f7/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bda7ec0755e7eda62ff3e5d26365f6fd0cc7e4fb", "url": "https://api.github.com/repos/rust-lang/rust/commits/bda7ec0755e7eda62ff3e5d26365f6fd0cc7e4fb", "html_url": "https://github.com/rust-lang/rust/commit/bda7ec0755e7eda62ff3e5d26365f6fd0cc7e4fb"}], "stats": {"total": 25, "additions": 24, "deletions": 1}, "files": [{"sha": "78f5cc4bbf2500512c5d4db4e6db135705919415", "filename": "src/librustc_privacy/diagnostics.rs", "status": "modified", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/6090cea18479f3a3bf12fe63034966cbe6eed2f7/src%2Flibrustc_privacy%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6090cea18479f3a3bf12fe63034966cbe6eed2f7/src%2Flibrustc_privacy%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_privacy%2Fdiagnostics.rs?ref=6090cea18479f3a3bf12fe63034966cbe6eed2f7", "patch": "@@ -103,4 +103,26 @@ pub enum Foo {\n ```\n \"##,\n \n+E0449: r##\"\n+A visibility qualifier was used when it was unnecessary. Erroneous code\n+examples:\n+\n+```\n+struct Bar;\n+\n+trait Foo {\n+    fn foo();\n+}\n+\n+pub impl Bar {} // error: unnecessary visibility qualifier\n+\n+pub impl Foo for Bar { // error: unnecessary visibility qualifier\n+    pub fn foo() {} // error: unnecessary visibility qualifier\n+}\n+```\n+\n+To fix this error, please remove the visibility qualifier when it is not\n+required.\n+\"##,\n+\n }\n\\ No newline at end of file"}, {"sha": "2dbab840ba26b30dea8a06889bfdffef373c987b", "filename": "src/librustc_privacy/lib.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/6090cea18479f3a3bf12fe63034966cbe6eed2f7/src%2Flibrustc_privacy%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6090cea18479f3a3bf12fe63034966cbe6eed2f7/src%2Flibrustc_privacy%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_privacy%2Flib.rs?ref=6090cea18479f3a3bf12fe63034966cbe6eed2f7", "patch": "@@ -1045,7 +1045,8 @@ impl<'a, 'tcx> SanePrivacyVisitor<'a, 'tcx> {\n         let tcx = self.tcx;\n         let check_inherited = |sp: Span, vis: hir::Visibility, note: &str| {\n             if vis != hir::Inherited {\n-                tcx.sess.span_err(sp, \"unnecessary visibility qualifier\");\n+                span_err!(tcx.sess, sp, E0449,\n+                          \"unnecessary visibility qualifier\");\n                 if !note.is_empty() {\n                     tcx.sess.span_note(sp, note);\n                 }"}]}