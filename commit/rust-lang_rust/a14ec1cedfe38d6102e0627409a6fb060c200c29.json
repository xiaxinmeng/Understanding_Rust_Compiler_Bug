{"sha": "a14ec1cedfe38d6102e0627409a6fb060c200c29", "node_id": "MDY6Q29tbWl0NzI0NzEyOmExNGVjMWNlZGZlMzhkNjEwMmUwNjI3NDA5YTZmYjA2MGMyMDBjMjk=", "commit": {"author": {"name": "Tomasz Mi\u0105sko", "email": "tomasz.miasko@gmail.com", "date": "2021-02-07T00:00:00Z"}, "committer": {"name": "Tomasz Mi\u0105sko", "email": "tomasz.miasko@gmail.com", "date": "2021-02-07T00:00:00Z"}, "message": "Show MIR bytes separately in -Zmeta-stats output", "tree": {"sha": "36d4e153540cbbc5eee3868c2f22e09202241034", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/36d4e153540cbbc5eee3868c2f22e09202241034"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a14ec1cedfe38d6102e0627409a6fb060c200c29", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a14ec1cedfe38d6102e0627409a6fb060c200c29", "html_url": "https://github.com/rust-lang/rust/commit/a14ec1cedfe38d6102e0627409a6fb060c200c29", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a14ec1cedfe38d6102e0627409a6fb060c200c29/comments", "author": {"login": "tmiasko", "id": 51362316, "node_id": "MDQ6VXNlcjUxMzYyMzE2", "avatar_url": "https://avatars.githubusercontent.com/u/51362316?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmiasko", "html_url": "https://github.com/tmiasko", "followers_url": "https://api.github.com/users/tmiasko/followers", "following_url": "https://api.github.com/users/tmiasko/following{/other_user}", "gists_url": "https://api.github.com/users/tmiasko/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmiasko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmiasko/subscriptions", "organizations_url": "https://api.github.com/users/tmiasko/orgs", "repos_url": "https://api.github.com/users/tmiasko/repos", "events_url": "https://api.github.com/users/tmiasko/events{/privacy}", "received_events_url": "https://api.github.com/users/tmiasko/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tmiasko", "id": 51362316, "node_id": "MDQ6VXNlcjUxMzYyMzE2", "avatar_url": "https://avatars.githubusercontent.com/u/51362316?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmiasko", "html_url": "https://github.com/tmiasko", "followers_url": "https://api.github.com/users/tmiasko/followers", "following_url": "https://api.github.com/users/tmiasko/following{/other_user}", "gists_url": "https://api.github.com/users/tmiasko/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmiasko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmiasko/subscriptions", "organizations_url": "https://api.github.com/users/tmiasko/orgs", "repos_url": "https://api.github.com/users/tmiasko/repos", "events_url": "https://api.github.com/users/tmiasko/events{/privacy}", "received_events_url": "https://api.github.com/users/tmiasko/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "36ecbc94eb6be90bc38b2d0fdd4bfac3f34d9923", "url": "https://api.github.com/repos/rust-lang/rust/commits/36ecbc94eb6be90bc38b2d0fdd4bfac3f34d9923", "html_url": "https://github.com/rust-lang/rust/commit/36ecbc94eb6be90bc38b2d0fdd4bfac3f34d9923"}], "stats": {"total": 7, "additions": 6, "deletions": 1}, "files": [{"sha": "14ca51008bec558cebdbfc058f8c3a0fcbc066fe", "filename": "compiler/rustc_metadata/src/rmeta/encoder.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/a14ec1cedfe38d6102e0627409a6fb060c200c29/compiler%2Frustc_metadata%2Fsrc%2Frmeta%2Fencoder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a14ec1cedfe38d6102e0627409a6fb060c200c29/compiler%2Frustc_metadata%2Fsrc%2Frmeta%2Fencoder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_metadata%2Fsrc%2Frmeta%2Fencoder.rs?ref=a14ec1cedfe38d6102e0627409a6fb060c200c29", "patch": "@@ -572,10 +572,14 @@ impl<'a, 'tcx> EncodeContext<'a, 'tcx> {\n \n         let tcx = self.tcx;\n \n+        // Encode MIR.\n+        i = self.position();\n+        self.encode_mir();\n+        let mir_bytes = self.position() - i;\n+\n         // Encode the items.\n         i = self.position();\n         self.encode_def_ids();\n-        self.encode_mir();\n         self.encode_info_for_items();\n         let item_bytes = self.position() - i;\n \n@@ -700,6 +704,7 @@ impl<'a, 'tcx> EncodeContext<'a, 'tcx> {\n             println!(\"    exp. symbols bytes: {}\", exported_symbols_bytes);\n             println!(\"  def-path table bytes: {}\", def_path_table_bytes);\n             println!(\" proc-macro-data-bytes: {}\", proc_macro_data_bytes);\n+            println!(\"             mir bytes: {}\", mir_bytes);\n             println!(\"            item bytes: {}\", item_bytes);\n             println!(\"           table bytes: {}\", tables_bytes);\n             println!(\"         hygiene bytes: {}\", hygiene_bytes);"}]}