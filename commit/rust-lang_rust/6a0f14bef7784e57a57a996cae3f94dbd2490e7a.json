{"sha": "6a0f14bef7784e57a57a996cae3f94dbd2490e7a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZhMGYxNGJlZjc3ODRlNTdhNTdhOTk2Y2FlM2Y5NGRiZDI0OTBlN2E=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2020-01-15T18:36:23Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2020-01-15T18:36:23Z"}, "message": "Auto merge of #1146 - RalfJung:rustup, r=RalfJung\n\nRustup", "tree": {"sha": "9334c9ab41075ef3cfabcc9fd8799dd194838934", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9334c9ab41075ef3cfabcc9fd8799dd194838934"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6a0f14bef7784e57a57a996cae3f94dbd2490e7a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6a0f14bef7784e57a57a996cae3f94dbd2490e7a", "html_url": "https://github.com/rust-lang/rust/commit/6a0f14bef7784e57a57a996cae3f94dbd2490e7a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6a0f14bef7784e57a57a996cae3f94dbd2490e7a/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b6bec6d9ea5b620788b464be714d67a068341789", "url": "https://api.github.com/repos/rust-lang/rust/commits/b6bec6d9ea5b620788b464be714d67a068341789", "html_url": "https://github.com/rust-lang/rust/commit/b6bec6d9ea5b620788b464be714d67a068341789"}, {"sha": "88f01027534e6dceb2b977158bd97bcad5c89a01", "url": "https://api.github.com/repos/rust-lang/rust/commits/88f01027534e6dceb2b977158bd97bcad5c89a01", "html_url": "https://github.com/rust-lang/rust/commit/88f01027534e6dceb2b977158bd97bcad5c89a01"}], "stats": {"total": 12, "additions": 6, "deletions": 6}, "files": [{"sha": "5927df6c9519a1f8b32b709e4768fd8ebbeb58b4", "filename": "rust-version", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6a0f14bef7784e57a57a996cae3f94dbd2490e7a/rust-version", "raw_url": "https://github.com/rust-lang/rust/raw/6a0f14bef7784e57a57a996cae3f94dbd2490e7a/rust-version", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/rust-version?ref=6a0f14bef7784e57a57a996cae3f94dbd2490e7a", "patch": "@@ -1 +1 @@\n-adc65725004c8aac16392fe4052c3e347181157d\n+6d0bb91bcba33a70fae4b0c663fb4403ed78f071"}, {"sha": "fba933d278d2fcd452dee6ab3948ffcfe7af9cec", "filename": "src/helpers.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6a0f14bef7784e57a57a996cae3f94dbd2490e7a/src%2Fhelpers.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6a0f14bef7784e57a57a996cae3f94dbd2490e7a/src%2Fhelpers.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fhelpers.rs?ref=6a0f14bef7784e57a57a996cae3f94dbd2490e7a", "patch": "@@ -76,7 +76,7 @@ pub trait EvalContextExt<'mir, 'tcx: 'mir>: crate::MiriEvalContextExt<'mir, 'tcx\n     /// Get the `Place` for a local\n     fn local_place(&mut self, local: mir::Local) -> InterpResult<'tcx, PlaceTy<'tcx, Tag>> {\n         let this = self.eval_context_mut();\n-        let place = mir::Place { base: mir::PlaceBase::Local(local), projection: List::empty() };\n+        let place = mir::Place { local: local, projection: List::empty() };\n         this.eval_place(&place)\n     }\n \n@@ -349,7 +349,7 @@ pub trait EvalContextExt<'mir, 'tcx: 'mir>: crate::MiriEvalContextExt<'mir, 'tcx\n         for &imm in imms {\n             this.write_immediate_to_mplace(\n                 *imm,\n-                place.offset(offset, None, imm.layout, &*this.tcx)?,\n+                place.offset(offset, MemPlaceMeta::None, imm.layout, &*this.tcx)?,\n             )?;\n             offset += imm.layout.size;\n         }"}, {"sha": "151edfda4318af25a9578b7e5e4415efa3ee216a", "filename": "src/shims/intrinsics.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6a0f14bef7784e57a57a996cae3f94dbd2490e7a/src%2Fshims%2Fintrinsics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6a0f14bef7784e57a57a996cae3f94dbd2490e7a/src%2Fshims%2Fintrinsics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fshims%2Fintrinsics.rs?ref=6a0f14bef7784e57a57a996cae3f94dbd2490e7a", "patch": "@@ -409,7 +409,7 @@ pub trait EvalContextExt<'mir, 'tcx: 'mir>: crate::MiriEvalContextExt<'mir, 'tcx\n                         _ => {\n                             // Do it in memory\n                             let mplace = this.force_allocation(dest)?;\n-                            mplace.meta.unwrap_none(); // must be sized\n+                            assert!(!mplace.layout.is_unsized());\n                             this.memory.write_bytes(\n                                 mplace.ptr,\n                                 iter::repeat(0u8).take(dest.layout.size.bytes() as usize),\n@@ -574,7 +574,7 @@ pub trait EvalContextExt<'mir, 'tcx: 'mir>: crate::MiriEvalContextExt<'mir, 'tcx\n                         _ => {\n                             // Do it in memory\n                             let mplace = this.force_allocation(dest)?;\n-                            mplace.meta.unwrap_none();\n+                            assert!(!mplace.layout.is_unsized());\n                             let ptr = mplace.ptr.assert_ptr();\n                             // We know the return place is in-bounds\n                             this.memory.get_raw_mut(ptr.alloc_id)?.mark_definedness("}, {"sha": "d676f046465741caca179b502867375044925305", "filename": "src/shims/panic.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6a0f14bef7784e57a57a996cae3f94dbd2490e7a/src%2Fshims%2Fpanic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6a0f14bef7784e57a57a996cae3f94dbd2490e7a/src%2Fshims%2Fpanic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fshims%2Fpanic.rs?ref=6a0f14bef7784e57a57a996cae3f94dbd2490e7a", "patch": "@@ -132,7 +132,7 @@ pub trait EvalContextExt<'mir, 'tcx: 'mir>: crate::MiriEvalContextExt<'mir, 'tcx\n             let payload = this.machine.panic_payload.take().unwrap();\n             let payload = this.ref_to_mplace(payload)?;\n             let payload_data_place = payload.ptr;\n-            let payload_vtable_place = payload.meta.expect(\"Expected fat pointer\");\n+            let payload_vtable_place = payload.meta.unwrap_meta();\n \n             this.write_scalar(payload_data_place, unwind_data.data_place.into())?;\n             this.write_scalar(payload_vtable_place, unwind_data.vtable_place.into())?;"}]}