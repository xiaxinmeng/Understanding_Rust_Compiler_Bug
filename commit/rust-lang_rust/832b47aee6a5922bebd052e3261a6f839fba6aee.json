{"sha": "832b47aee6a5922bebd052e3261a6f839fba6aee", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgzMmI0N2FlZTZhNTkyMmJlYmQwNTJlMzI2MWE2ZjgzOWZiYTZhZWU=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-09-08T10:11:59Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-09-08T10:11:59Z"}, "message": "Rollup merge of #64267 - ehuss:rustdoc-fix-mixed-code-block, r=GuillaumeGomez\n\nrustdoc: fix diagnostic with mixed code block styles\n\nThis fixes a relatively obscure issue where the diagnostic (emitted [here](https://github.com/rust-lang/rust/blame/ef54f57c5b9d894a38179d09b00610c1b337b086/src/librustdoc/passes/check_code_block_syntax.rs#L69)) would get confused since the \"is_fenced\" flag wasn't reset properly.", "tree": {"sha": "fbbcf77cf17fbaf2dcbab14dcce6ccd1cf7658da", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fbbcf77cf17fbaf2dcbab14dcce6ccd1cf7658da"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/832b47aee6a5922bebd052e3261a6f839fba6aee", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJddNPvCRBK7hj4Ov3rIwAAdHIIAFvpVJTw/0ZjJ3HWitKYHFtD\nC5MdjbPsfbKlvdH7MTDa40w7XPd6FM2SHVhpqFBjRU4lj+sRw8okyVffUflOv92M\njRd3JA7DuXiiqeQyeePv0mjH1wbu3ZJ0DZ+J/MXS336AfsFot9jS7FP9bPOfmvnZ\nc3bbI3YemEcWNQB4cWtUUbNkGHt+Kh/E+L8gIAUZK0BIOwcbJJ+CQRYxGiNitHwh\nBAvdat5UnIe+0p5P771KJp8/PnP2/tIv6CCZGTYP9vFaKdPd+tnwcEi84sJ1K4hH\ns+0pmunXbYEsGzcVmai55FBqIKQ9vhGJGWEyIOgz/FDPzq4j5ZvgErwl40VbGT0=\n=4I7l\n-----END PGP SIGNATURE-----\n", "payload": "tree fbbcf77cf17fbaf2dcbab14dcce6ccd1cf7658da\nparent 3a3280326e9cf2cd2c31dcdbca68e98c1a16bf56\nparent fb387088e2e327e4060290edc92a90d49669b04c\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1567937519 +0200\ncommitter GitHub <noreply@github.com> 1567937519 +0200\n\nRollup merge of #64267 - ehuss:rustdoc-fix-mixed-code-block, r=GuillaumeGomez\n\nrustdoc: fix diagnostic with mixed code block styles\n\nThis fixes a relatively obscure issue where the diagnostic (emitted [here](https://github.com/rust-lang/rust/blame/ef54f57c5b9d894a38179d09b00610c1b337b086/src/librustdoc/passes/check_code_block_syntax.rs#L69)) would get confused since the \"is_fenced\" flag wasn't reset properly.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/832b47aee6a5922bebd052e3261a6f839fba6aee", "html_url": "https://github.com/rust-lang/rust/commit/832b47aee6a5922bebd052e3261a6f839fba6aee", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/832b47aee6a5922bebd052e3261a6f839fba6aee/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3a3280326e9cf2cd2c31dcdbca68e98c1a16bf56", "url": "https://api.github.com/repos/rust-lang/rust/commits/3a3280326e9cf2cd2c31dcdbca68e98c1a16bf56", "html_url": "https://github.com/rust-lang/rust/commit/3a3280326e9cf2cd2c31dcdbca68e98c1a16bf56"}, {"sha": "fb387088e2e327e4060290edc92a90d49669b04c", "url": "https://api.github.com/repos/rust-lang/rust/commits/fb387088e2e327e4060290edc92a90d49669b04c", "html_url": "https://github.com/rust-lang/rust/commit/fb387088e2e327e4060290edc92a90d49669b04c"}], "stats": {"total": 31, "additions": 30, "deletions": 1}, "files": [{"sha": "8bf01d2cc1aac8906a9790ff1dea9f56670683bd", "filename": "src/librustdoc/html/markdown.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/832b47aee6a5922bebd052e3261a6f839fba6aee/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs", "raw_url": "https://github.com/rust-lang/rust/raw/832b47aee6a5922bebd052e3261a6f839fba6aee/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs?ref=832b47aee6a5922bebd052e3261a6f839fba6aee", "patch": "@@ -931,7 +931,10 @@ crate fn rust_code_blocks(md: &str) -> Vec<RustCodeBlock> {\n                             is_fenced = true;\n                             previous_offset + fence_idx\n                         }\n-                        None => offset,\n+                        None => {\n+                            is_fenced = false;\n+                            offset\n+                        }\n                     };\n                 }\n             }"}, {"sha": "97a0f4aaec1eba117cd7f1e2ac76744ec9e54ae6", "filename": "src/test/rustdoc-ui/invalid-syntax.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/832b47aee6a5922bebd052e3261a6f839fba6aee/src%2Ftest%2Frustdoc-ui%2Finvalid-syntax.rs", "raw_url": "https://github.com/rust-lang/rust/raw/832b47aee6a5922bebd052e3261a6f839fba6aee/src%2Ftest%2Frustdoc-ui%2Finvalid-syntax.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Finvalid-syntax.rs?ref=832b47aee6a5922bebd052e3261a6f839fba6aee", "patch": "@@ -74,3 +74,11 @@ pub fn empty_rust() {}\n ///\n /// ```\n pub fn empty_rust_with_whitespace() {}\n+\n+/// ```\n+/// let x = 1;\n+/// ```\n+///\n+///     \\____/\n+///\n+pub fn indent_after_fenced() {}"}, {"sha": "6f50edae6503408362d0a2b67a7f78319663ddb2", "filename": "src/test/rustdoc-ui/invalid-syntax.stderr", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/832b47aee6a5922bebd052e3261a6f839fba6aee/src%2Ftest%2Frustdoc-ui%2Finvalid-syntax.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/832b47aee6a5922bebd052e3261a6f839fba6aee/src%2Ftest%2Frustdoc-ui%2Finvalid-syntax.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Finvalid-syntax.stderr?ref=832b47aee6a5922bebd052e3261a6f839fba6aee", "patch": "@@ -201,6 +201,24 @@ help: mark blocks that do not contain Rust code as text\n LL | /// ```text\n    |     ^^^^^^^\n \n+error: unknown start of token: \\\n+ --> <doctest>:1:1\n+  |\n+1 | \\____/\n+  | ^\n+\n+warning: could not parse code block as Rust code\n+  --> $DIR/invalid-syntax.rs:82:9\n+   |\n+LL | ///     \\____/\n+   |         ^^^^^^\n+\n+error: unknown start of token: \\\n+ --> <rustdoc-highlighting>:1:1\n+  |\n+1 | \\____/\n+  | ^\n+\n error: unknown start of token: \\\n  --> <rustdoc-highlighting>:1:1\n   |"}]}