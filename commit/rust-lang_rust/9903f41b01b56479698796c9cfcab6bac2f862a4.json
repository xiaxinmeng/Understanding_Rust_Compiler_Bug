{"sha": "9903f41b01b56479698796c9cfcab6bac2f862a4", "node_id": "C_kwDOAAsO6NoAKDk5MDNmNDFiMDFiNTY0Nzk2OTg3OTZjOWNmY2FiNmJhYzJmODYyYTQ", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-07-26T19:40:01Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-07-27T12:48:10Z"}, "message": "Add GUI test for item info position", "tree": {"sha": "a8247a1235d2755000faf8044023f8b88dcb501b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a8247a1235d2755000faf8044023f8b88dcb501b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9903f41b01b56479698796c9cfcab6bac2f862a4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9903f41b01b56479698796c9cfcab6bac2f862a4", "html_url": "https://github.com/rust-lang/rust/commit/9903f41b01b56479698796c9cfcab6bac2f862a4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9903f41b01b56479698796c9cfcab6bac2f862a4/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "51e658f966a2c57d9d637747b457a5f9e087ec8d", "url": "https://api.github.com/repos/rust-lang/rust/commits/51e658f966a2c57d9d637747b457a5f9e087ec8d", "html_url": "https://github.com/rust-lang/rust/commit/51e658f966a2c57d9d637747b457a5f9e087ec8d"}], "stats": {"total": 43, "additions": 35, "deletions": 8}, "files": [{"sha": "8b6d355a8f1a7f488911fd79c505a6a793b6bda9", "filename": "src/test/rustdoc-gui/item-info-width.goml", "status": "removed", "additions": 0, "deletions": 8, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/51e658f966a2c57d9d637747b457a5f9e087ec8d/src%2Ftest%2Frustdoc-gui%2Fitem-info-width.goml", "raw_url": "https://github.com/rust-lang/rust/raw/51e658f966a2c57d9d637747b457a5f9e087ec8d/src%2Ftest%2Frustdoc-gui%2Fitem-info-width.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fitem-info-width.goml?ref=51e658f966a2c57d9d637747b457a5f9e087ec8d", "patch": "@@ -1,8 +0,0 @@\n-// This test ensures that the item information don't take 100% of the width if unnecessary.\n-goto: file://|DOC_PATH|/lib2/struct.Foo.html\n-// We set a fixed size so there is no chance of \"random\" resize.\n-size: (1100, 800)\n-// We check that \".item-info\" is bigger than its content.\n-assert-css: (\".item-info\", {\"width\": \"790px\"})\n-assert-css: (\".item-info .stab\", {\"width\": \"289px\"})\n-assert-position: (\".item-info .stab\", {\"x\": 295})"}, {"sha": "50c45b76bd630c83f4bc29b444a7da8d036c48e4", "filename": "src/test/rustdoc-gui/item-info.goml", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/9903f41b01b56479698796c9cfcab6bac2f862a4/src%2Ftest%2Frustdoc-gui%2Fitem-info.goml", "raw_url": "https://github.com/rust-lang/rust/raw/9903f41b01b56479698796c9cfcab6bac2f862a4/src%2Ftest%2Frustdoc-gui%2Fitem-info.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fitem-info.goml?ref=9903f41b01b56479698796c9cfcab6bac2f862a4", "patch": "@@ -0,0 +1,32 @@\n+// This test ensures a few things for item info elements.\n+goto: file://|DOC_PATH|/lib2/struct.Foo.html\n+// Ensuring that the item information don't take 100% of the width if unnecessary.\n+// We set a fixed size so there is no chance of \"random\" resize.\n+size: (1100, 800)\n+// We check that \".item-info\" is bigger than its content.\n+assert-css: (\".item-info\", {\"width\": \"790px\"})\n+assert-css: (\".item-info .stab\", {\"width\": \"289px\"})\n+assert-position: (\".item-info .stab\", {\"x\": 295})\n+\n+// Now we ensure that they're not rendered on the same line.\n+goto: file://|DOC_PATH|/lib2/trait.Trait.html\n+// We first ensure that there are two item info on the trait.\n+assert-count: (\"#main-content > .item-info .stab\", 2)\n+// They should not have the same `y` position!\n+compare-elements-position-false: (\n+    \"#main-content > .item-info .stab:nth-of-type(1)\",\n+    \"#main-content > .item-info .stab:nth-of-type(2)\",\n+    (\"y\"),\n+)\n+// But they should have the same `x` position.\n+compare-elements-position: (\n+    \"#main-content > .item-info .stab:nth-of-type(1)\",\n+    \"#main-content > .item-info .stab:nth-of-type(2)\",\n+    (\"x\"),\n+)\n+// They are supposed to have the same height too.\n+compare-elements-css: (\n+    \"#main-content > .item-info .stab:nth-of-type(1)\",\n+    \"#main-content > .item-info .stab:nth-of-type(2)\",\n+    [\"height\"],\n+)"}, {"sha": "87f91be3ac82cec26d87785a1afe2debd038aed8", "filename": "src/test/rustdoc-gui/src/lib2/lib.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/9903f41b01b56479698796c9cfcab6bac2f862a4/src%2Ftest%2Frustdoc-gui%2Fsrc%2Flib2%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9903f41b01b56479698796c9cfcab6bac2f862a4/src%2Ftest%2Frustdoc-gui%2Fsrc%2Flib2%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsrc%2Flib2%2Flib.rs?ref=9903f41b01b56479698796c9cfcab6bac2f862a4", "patch": "@@ -30,10 +30,13 @@ impl Foo {\n     pub fn a_method(&self) {}\n }\n \n+#[doc(cfg(feature = \"foo-method\"))]\n+#[deprecated = \"Whatever [`Foo::a_method`](#method.a_method)\"]\n pub trait Trait {\n     type X;\n     const Y: u32;\n \n+    #[deprecated = \"Whatever [`Foo`](#tadam)\"]\n     fn foo() {}\n }\n "}]}