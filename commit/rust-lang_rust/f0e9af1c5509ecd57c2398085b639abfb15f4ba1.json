{"sha": "f0e9af1c5509ecd57c2398085b639abfb15f4ba1", "node_id": "MDY6Q29tbWl0NzI0NzEyOmYwZTlhZjFjNTUwOWVjZDU3YzIzOTgwODViNjM5YWJmYjE1ZjRiYTE=", "commit": {"author": {"name": "Jimmy Brush", "email": "code@jimmah.com", "date": "2018-02-11T15:50:18Z"}, "committer": {"name": "Jimmy Brush", "email": "code@jimmah.com", "date": "2018-02-14T03:10:27Z"}, "message": "verify passed -no-pie arg before retrying failed link", "tree": {"sha": "b9f57d586a0c8db5b2e18472e06810b339e07fb9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b9f57d586a0c8db5b2e18472e06810b339e07fb9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f0e9af1c5509ecd57c2398085b639abfb15f4ba1", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA1EtiBaDzGKsVzCxjAopB5kfVmQFAlqDqKMACgkQjAopB5kf\nVmRp5xAA80s97X/wnLHOarntIiaOvcfYtotoA/mRI81vhtAr2NfbrvZfvj0r1lTT\nDqCoTpakFDBsPQNg7Pkt70hAwBjUiqD+WEy+nslvJgsbv/O+V2oTh0m9Y0YvJ5lZ\n3xgs5QTA9voMJrwf489J2JDbNKXKH331fsOyixEEbGyE+mnyOCup3VSvtVUJ6YSH\n5bRrh/FIL3Yb0wvhOUPsf+EQi9YVheq66NWau0mEGzY4EufRyX+ZldMvhD50Qs3a\nYXhwH5sVN9/aDPSN2pjD23nHZDqX9N1jF2q88SBntAfUhJ55TUEQnWKUBk9WAkoF\nI5H2Vl6U6Nqa4R/WNAS4QSjHNKxuAQvSdHVefhqBXg3BHUVxxywa8NYMVBYmu/ko\nM5X0Y/QGCdr2/84UeDy1EoKG6PehJ6hiUppz3KlNT2VhHFcIW6L2Lzy8aFMUgTuy\n8VfKeQn88GHuKZkAyTgDorvGeLPQz2hMLI2fomvH/nT38D4NdlEq6yJcd89ZbYP9\n8JJAat7rjhj1byAGbG24sIPxrryBlMolts9SnGzJg6V12J4/YTRBBXykWpQQGtO/\n8IUSGtz1RRY7cEqVrtjL7h3Etm6Zid1bH11IWTqc6U4sTaSvbe6EZAxihSjm7unb\noD6QtYibdCkGJvBZsiVri/g9RfTE2kz33+wExF2NYwMGRW7QZO4=\n=sty9\n-----END PGP SIGNATURE-----", "payload": "tree b9f57d586a0c8db5b2e18472e06810b339e07fb9\nparent 8a72f589e5f8d628a5dcfcedbdd8eec117fbe2a2\nauthor Jimmy Brush <code@jimmah.com> 1518364218 -0500\ncommitter Jimmy Brush <code@jimmah.com> 1518577827 -0500\n\nverify passed -no-pie arg before retrying failed link\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f0e9af1c5509ecd57c2398085b639abfb15f4ba1", "html_url": "https://github.com/rust-lang/rust/commit/f0e9af1c5509ecd57c2398085b639abfb15f4ba1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f0e9af1c5509ecd57c2398085b639abfb15f4ba1/comments", "author": {"login": "canarysnort01", "id": 24806352, "node_id": "MDQ6VXNlcjI0ODA2MzUy", "avatar_url": "https://avatars.githubusercontent.com/u/24806352?v=4", "gravatar_id": "", "url": "https://api.github.com/users/canarysnort01", "html_url": "https://github.com/canarysnort01", "followers_url": "https://api.github.com/users/canarysnort01/followers", "following_url": "https://api.github.com/users/canarysnort01/following{/other_user}", "gists_url": "https://api.github.com/users/canarysnort01/gists{/gist_id}", "starred_url": "https://api.github.com/users/canarysnort01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/canarysnort01/subscriptions", "organizations_url": "https://api.github.com/users/canarysnort01/orgs", "repos_url": "https://api.github.com/users/canarysnort01/repos", "events_url": "https://api.github.com/users/canarysnort01/events{/privacy}", "received_events_url": "https://api.github.com/users/canarysnort01/received_events", "type": "User", "site_admin": false}, "committer": {"login": "canarysnort01", "id": 24806352, "node_id": "MDQ6VXNlcjI0ODA2MzUy", "avatar_url": "https://avatars.githubusercontent.com/u/24806352?v=4", "gravatar_id": "", "url": "https://api.github.com/users/canarysnort01", "html_url": "https://github.com/canarysnort01", "followers_url": "https://api.github.com/users/canarysnort01/followers", "following_url": "https://api.github.com/users/canarysnort01/following{/other_user}", "gists_url": "https://api.github.com/users/canarysnort01/gists{/gist_id}", "starred_url": "https://api.github.com/users/canarysnort01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/canarysnort01/subscriptions", "organizations_url": "https://api.github.com/users/canarysnort01/orgs", "repos_url": "https://api.github.com/users/canarysnort01/repos", "events_url": "https://api.github.com/users/canarysnort01/events{/privacy}", "received_events_url": "https://api.github.com/users/canarysnort01/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8a72f589e5f8d628a5dcfcedbdd8eec117fbe2a2", "url": "https://api.github.com/repos/rust-lang/rust/commits/8a72f589e5f8d628a5dcfcedbdd8eec117fbe2a2", "html_url": "https://github.com/rust-lang/rust/commit/8a72f589e5f8d628a5dcfcedbdd8eec117fbe2a2"}], "stats": {"total": 8, "additions": 7, "deletions": 1}, "files": [{"sha": "0bccef1e62a8e186126bd6cc4593d806e3d6064f", "filename": "src/librustc_trans/back/command.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f0e9af1c5509ecd57c2398085b639abfb15f4ba1/src%2Flibrustc_trans%2Fback%2Fcommand.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f0e9af1c5509ecd57c2398085b639abfb15f4ba1/src%2Flibrustc_trans%2Fback%2Fcommand.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Fback%2Fcommand.rs?ref=f0e9af1c5509ecd57c2398085b639abfb15f4ba1", "patch": "@@ -109,6 +109,10 @@ impl Command {\n \n     // extensions\n \n+    pub fn get_args(&self) -> &[OsString] {\n+        &self.args\n+    }\n+\n     pub fn take_args(&mut self) -> Vec<OsString> {\n         mem::replace(&mut self.args, Vec::new())\n     }"}, {"sha": "6f8b425ad56dc010118812753b4eff88a1c6e1a2", "filename": "src/librustc_trans/back/link.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f0e9af1c5509ecd57c2398085b639abfb15f4ba1/src%2Flibrustc_trans%2Fback%2Flink.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f0e9af1c5509ecd57c2398085b639abfb15f4ba1/src%2Flibrustc_trans%2Fback%2Flink.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Fback%2Flink.rs?ref=f0e9af1c5509ecd57c2398085b639abfb15f4ba1", "patch": "@@ -668,7 +668,9 @@ fn link_natively(sess: &Session,\n         // is safe because if the linker doesn't support -no-pie then it should not\n         // default to linking executables as pie. Different versions of gcc seem to\n         // use different quotes in the error message so don't check for them.\n-        if out.contains(\"unrecognized command line option\") && out.contains(\"-no-pie\") {\n+        if out.contains(\"unrecognized command line option\") &&\n+           out.contains(\"-no-pie\") &&\n+           cmd.get_args().iter().any(|e| e.to_string_lossy() == \"-no-pie\") {\n             info!(\"linker output: {:?}\", out);\n             warn!(\"Linker does not support -no-pie command line option. Retrying without.\");\n             for arg in cmd.take_args() {"}]}