{"sha": "b4f83c6ed817bc42b1ea2e2c582488cfe5f6f1da", "node_id": "C_kwDOAAsO6NoAKGI0ZjgzYzZlZDgxN2JjNDJiMWVhMmUyYzU4MjQ4OGNmZTVmNmYxZGE", "commit": {"author": {"name": "Antoni Boucher", "email": "bouanto@zoho.com", "date": "2023-03-02T22:15:57Z"}, "committer": {"name": "Antoni Boucher", "email": "bouanto@zoho.com", "date": "2023-03-02T22:15:57Z"}, "message": "Fix error", "tree": {"sha": "f5c2ad57b736234c800ebed9374e0ae4fe5b7ffe", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f5c2ad57b736234c800ebed9374e0ae4fe5b7ffe"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b4f83c6ed817bc42b1ea2e2c582488cfe5f6f1da", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b4f83c6ed817bc42b1ea2e2c582488cfe5f6f1da", "html_url": "https://github.com/rust-lang/rust/commit/b4f83c6ed817bc42b1ea2e2c582488cfe5f6f1da", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b4f83c6ed817bc42b1ea2e2c582488cfe5f6f1da/comments", "author": {"login": "antoyo", "id": 584972, "node_id": "MDQ6VXNlcjU4NDk3Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/584972?v=4", "gravatar_id": "", "url": "https://api.github.com/users/antoyo", "html_url": "https://github.com/antoyo", "followers_url": "https://api.github.com/users/antoyo/followers", "following_url": "https://api.github.com/users/antoyo/following{/other_user}", "gists_url": "https://api.github.com/users/antoyo/gists{/gist_id}", "starred_url": "https://api.github.com/users/antoyo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/antoyo/subscriptions", "organizations_url": "https://api.github.com/users/antoyo/orgs", "repos_url": "https://api.github.com/users/antoyo/repos", "events_url": "https://api.github.com/users/antoyo/events{/privacy}", "received_events_url": "https://api.github.com/users/antoyo/received_events", "type": "User", "site_admin": false}, "committer": {"login": "antoyo", "id": 584972, "node_id": "MDQ6VXNlcjU4NDk3Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/584972?v=4", "gravatar_id": "", "url": "https://api.github.com/users/antoyo", "html_url": "https://github.com/antoyo", "followers_url": "https://api.github.com/users/antoyo/followers", "following_url": "https://api.github.com/users/antoyo/following{/other_user}", "gists_url": "https://api.github.com/users/antoyo/gists{/gist_id}", "starred_url": "https://api.github.com/users/antoyo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/antoyo/subscriptions", "organizations_url": "https://api.github.com/users/antoyo/orgs", "repos_url": "https://api.github.com/users/antoyo/repos", "events_url": "https://api.github.com/users/antoyo/events{/privacy}", "received_events_url": "https://api.github.com/users/antoyo/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d8b5a3eaa927c0b8730d3fb3e4cd0731bbe48813", "url": "https://api.github.com/repos/rust-lang/rust/commits/d8b5a3eaa927c0b8730d3fb3e4cd0731bbe48813", "html_url": "https://github.com/rust-lang/rust/commit/d8b5a3eaa927c0b8730d3fb3e4cd0731bbe48813"}], "stats": {"total": 43, "additions": 6, "deletions": 37}, "files": [{"sha": "7ea0eebe6a128c64f1f8918009f080099eb83222", "filename": "patches/0024-core-Disable-portable-simd-test.patch", "status": "removed", "additions": 0, "deletions": 32, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/d8b5a3eaa927c0b8730d3fb3e4cd0731bbe48813/patches%2F0024-core-Disable-portable-simd-test.patch", "raw_url": "https://github.com/rust-lang/rust/raw/d8b5a3eaa927c0b8730d3fb3e4cd0731bbe48813/patches%2F0024-core-Disable-portable-simd-test.patch", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/patches%2F0024-core-Disable-portable-simd-test.patch?ref=d8b5a3eaa927c0b8730d3fb3e4cd0731bbe48813", "patch": "@@ -1,32 +0,0 @@\n-From f845df4056f5ba16b9f5bd703460c4ac40ea03b9 Mon Sep 17 00:00:00 2001\n-From: Antoni Boucher <bouanto@zoho.com>\n-Date: Fri, 26 Aug 2022 20:38:58 -0400\n-Subject: [PATCH] Edit\n-\n----\n- library/core/tests/lib.rs | 2 --\n- 1 file changed, 2 deletions(-)\n-\n-diff --git a/library/core/tests/lib.rs b/library/core/tests/lib.rs\n-index 59510d3..179bf26 100644\n---- a/library/core/tests/lib.rs\n-+++ b/library/core/tests/lib.rs\n-@@ -77,7 +77,6 @@\n- #![feature(unwrap_infallible)]\n- #![feature(result_into_ok_or_err)]\n- #![feature(pointer_byte_offsets)]\n--#![feature(portable_simd)]\n- #![feature(ptr_metadata)]\n- #![feature(once_cell)]\n- #![feature(option_result_contains)]\n-@@ -135,7 +134,6 @@ mod pin;\n- mod pin_macro;\n- mod ptr;\n- mod result;\n--mod simd;\n- mod slice;\n- mod str;\n- mod str_lossy;\n--- \n-2.26.2.7.g19db9cfb68.dirty\n-"}, {"sha": "617c7e8640a95f184eff1bc578f0ed4298d0c927", "filename": "src/common.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b4f83c6ed817bc42b1ea2e2c582488cfe5f6f1da/src%2Fcommon.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b4f83c6ed817bc42b1ea2e2c582488cfe5f6f1da/src%2Fcommon.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcommon.rs?ref=b4f83c6ed817bc42b1ea2e2c582488cfe5f6f1da", "patch": "@@ -241,7 +241,7 @@ impl<'gcc, 'tcx> ConstMethods<'tcx> for CodegenCx<'gcc, 'tcx> {\n         let value =\n             if layout.size == Size::ZERO {\n                 let value = self.const_usize(alloc.inner().align.bytes());\n-                self.context.new_cast(None, value, ty)\n+                self.const_bitcast(value, ty)\n             }\n             else {\n                 let init = const_alloc_to_gcc(self, alloc);"}, {"sha": "86a7f78de2702057de5a4f0e6ff56ff37eac1951", "filename": "src/consts.rs", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/b4f83c6ed817bc42b1ea2e2c582488cfe5f6f1da/src%2Fconsts.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b4f83c6ed817bc42b1ea2e2c582488cfe5f6f1da/src%2Fconsts.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fconsts.rs?ref=b4f83c6ed817bc42b1ea2e2c582488cfe5f6f1da", "patch": "@@ -341,7 +341,7 @@ pub fn codegen_static_initializer<'gcc, 'tcx>(cx: &CodegenCx<'gcc, 'tcx>, def_id\n \n fn check_and_apply_linkage<'gcc, 'tcx>(cx: &CodegenCx<'gcc, 'tcx>, attrs: &CodegenFnAttrs, ty: Ty<'tcx>, sym: &str) -> LValue<'gcc> {\n     let is_tls = attrs.flags.contains(CodegenFnAttrFlags::THREAD_LOCAL);\n-    let llty = cx.layout_of(ty).gcc_type(cx);\n+    let gcc_type = cx.layout_of(ty).gcc_type(cx);\n     if let Some(linkage) = attrs.import_linkage {\n         // Declare a symbol `foo` with the desired linkage.\n         let global1 = cx.declare_global_with_linkage(&sym, cx.type_i8(), base::global_linkage_to_gcc(linkage));\n@@ -354,9 +354,10 @@ fn check_and_apply_linkage<'gcc, 'tcx>(cx: &CodegenCx<'gcc, 'tcx>, attrs: &Codeg\n         // zero.\n         let mut real_name = \"_rust_extern_with_linkage_\".to_string();\n         real_name.push_str(&sym);\n-        let global2 = cx.define_global(&real_name, llty, is_tls, attrs.link_section);\n+        let global2 = cx.define_global(&real_name, gcc_type, is_tls, attrs.link_section);\n         // TODO(antoyo): set linkage.\n-        global2.global_set_initializer_rvalue(global1.get_address(None));\n+        let value = cx.const_ptrcast(global1.get_address(None), gcc_type);\n+        global2.global_set_initializer_rvalue(value);\n         // TODO(antoyo): use global_set_initializer() when it will work.\n         global2\n     }\n@@ -370,6 +371,6 @@ fn check_and_apply_linkage<'gcc, 'tcx>(cx: &CodegenCx<'gcc, 'tcx>, attrs: &Codeg\n         // don't do this then linker errors can be generated where the linker\n         // complains that one object files has a thread local version of the\n         // symbol and another one doesn't.\n-        cx.declare_global(&sym, llty, GlobalKind::Imported, is_tls, attrs.link_section)\n+        cx.declare_global(&sym, gcc_type, GlobalKind::Imported, is_tls, attrs.link_section)\n     }\n }"}]}