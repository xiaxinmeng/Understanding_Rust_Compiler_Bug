{"sha": "7a5ede677b7642f098fd5fd69272c742d13e4ea4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdhNWVkZTY3N2I3NjQyZjA5OGZkNWZkNjkyNzJjNzQyZDEzZTRlYTQ=", "commit": {"author": {"name": "Dale Wijnand", "email": "dale.wijnand@gmail.com", "date": "2018-08-06T13:42:08Z"}, "committer": {"name": "Dale Wijnand", "email": "dale.wijnand@gmail.com", "date": "2018-08-06T16:52:09Z"}, "message": "Use Option::map_or", "tree": {"sha": "3ff724539496aa5607c36baca1972d9ee635a7b7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3ff724539496aa5607c36baca1972d9ee635a7b7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7a5ede677b7642f098fd5fd69272c742d13e4ea4", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEERGS9JmrgEHKCFADQTyVuPRUd9e8FAltofLkACgkQTyVuPRUd\n9e9C6A/+KWrS8KP4PwLwbfFVrivRNxSNdg+baa/hhDZVlZn8EP+Sgy96mm9fpe0K\nMhJdtZMvhRMXTKF+Dvopq3I1b24oOO68vWbDz3kGTwmerL2WCns7SVdI1Zw8ZL89\nCEz59VXeCk1BgESdbdji9h4LdX6QU+iGWPFxdyhRavEKbyie5EnxC5RDCY0K5TrX\npPndUOXnPHezXjFbx0zoV0k2OG868mp1fYXFe9+1Qn0AVv5WYpJpMI4En3UxbdTr\nGroM6tdJbNU+32u4I9e6ImTnX0ei4gxKzk6LJEKHwibC+36GqrFlm3xxEWt59AjK\nfKXeqSlYix88KcmF/nBrNuETpi/x5p/Jb5nc16dIln/n3opLz6HQgoEWMaXHY72u\nLpYbO8Sk5171Ivj1GwdiUaAZ25HvGouxpZMvxAjPCf7iC3Ve7iX1xkfSh9HgX8ks\nuM50Se6pQHYLjqcJdqn9qVQ0Pi2rH0OakDGxOtJ5bTkh7Q8ap2UEqLcmnuB54EpX\n6fJoZIv+5sMxWkMxBn94edKadzFGtoFAmXajDYv367Koi+XVR5Pz+0TxXEQM1GOy\ntU3j85YkeQ1eR7dFr8IBuuv7JqVMK3KdqNgOM+hXZ86T9WgK7/n4aVeNmh42FGYf\noPErwcgiV1oJpwjCPlJA+h37KHcZsy9oTnMHlLwS9e+lSJ1aGDk=\n=AORx\n-----END PGP SIGNATURE-----", "payload": "tree 3ff724539496aa5607c36baca1972d9ee635a7b7\nparent b18a3c5b6073375d3cb6d17a97e7a2ba0474fe38\nauthor Dale Wijnand <dale.wijnand@gmail.com> 1533562928 +0200\ncommitter Dale Wijnand <dale.wijnand@gmail.com> 1533574329 +0100\n\nUse Option::map_or\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7a5ede677b7642f098fd5fd69272c742d13e4ea4", "html_url": "https://github.com/rust-lang/rust/commit/7a5ede677b7642f098fd5fd69272c742d13e4ea4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7a5ede677b7642f098fd5fd69272c742d13e4ea4/comments", "author": {"login": "dwijnand", "id": 344610, "node_id": "MDQ6VXNlcjM0NDYxMA==", "avatar_url": "https://avatars.githubusercontent.com/u/344610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dwijnand", "html_url": "https://github.com/dwijnand", "followers_url": "https://api.github.com/users/dwijnand/followers", "following_url": "https://api.github.com/users/dwijnand/following{/other_user}", "gists_url": "https://api.github.com/users/dwijnand/gists{/gist_id}", "starred_url": "https://api.github.com/users/dwijnand/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dwijnand/subscriptions", "organizations_url": "https://api.github.com/users/dwijnand/orgs", "repos_url": "https://api.github.com/users/dwijnand/repos", "events_url": "https://api.github.com/users/dwijnand/events{/privacy}", "received_events_url": "https://api.github.com/users/dwijnand/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dwijnand", "id": 344610, "node_id": "MDQ6VXNlcjM0NDYxMA==", "avatar_url": "https://avatars.githubusercontent.com/u/344610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dwijnand", "html_url": "https://github.com/dwijnand", "followers_url": "https://api.github.com/users/dwijnand/followers", "following_url": "https://api.github.com/users/dwijnand/following{/other_user}", "gists_url": "https://api.github.com/users/dwijnand/gists{/gist_id}", "starred_url": "https://api.github.com/users/dwijnand/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dwijnand/subscriptions", "organizations_url": "https://api.github.com/users/dwijnand/orgs", "repos_url": "https://api.github.com/users/dwijnand/repos", "events_url": "https://api.github.com/users/dwijnand/events{/privacy}", "received_events_url": "https://api.github.com/users/dwijnand/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b18a3c5b6073375d3cb6d17a97e7a2ba0474fe38", "url": "https://api.github.com/repos/rust-lang/rust/commits/b18a3c5b6073375d3cb6d17a97e7a2ba0474fe38", "html_url": "https://github.com/rust-lang/rust/commit/b18a3c5b6073375d3cb6d17a97e7a2ba0474fe38"}], "stats": {"total": 5, "additions": 1, "deletions": 4}, "files": [{"sha": "80130de15d7d3965656ef3dc927dd5870f5030c3", "filename": "clippy_lints/src/mem_forget.rs", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/7a5ede677b7642f098fd5fd69272c742d13e4ea4/clippy_lints%2Fsrc%2Fmem_forget.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7a5ede677b7642f098fd5fd69272c742d13e4ea4/clippy_lints%2Fsrc%2Fmem_forget.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmem_forget.rs?ref=7a5ede677b7642f098fd5fd69272c742d13e4ea4", "patch": "@@ -37,10 +37,7 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for MemForget {\n                     if match_def_path(cx.tcx, def_id, &paths::MEM_FORGET) {\n                         let forgot_ty = cx.tables.expr_ty(&args[0]);\n \n-                        if match forgot_ty.ty_adt_def() {\n-                            Some(def) => def.has_dtor(cx.tcx),\n-                            _ => false,\n-                        } {\n+                        if forgot_ty.ty_adt_def().map_or(false, |def| def.has_dtor(cx.tcx)) {\n                             span_lint(cx, MEM_FORGET, e.span, \"usage of mem::forget on Drop type\");\n                         }\n                     }"}]}