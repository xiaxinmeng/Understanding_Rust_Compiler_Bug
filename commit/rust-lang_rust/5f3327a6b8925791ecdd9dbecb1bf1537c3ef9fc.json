{"sha": "5f3327a6b8925791ecdd9dbecb1bf1537c3ef9fc", "node_id": "C_kwDOAAsO6NoAKDVmMzMyN2E2Yjg5MjU3OTFlY2RkOWRiZWNiMWJmMTUzN2MzZWY5ZmM", "commit": {"author": {"name": "KarlWithK", "email": "jocelinc60@outlook.com", "date": "2022-02-18T02:27:37Z"}, "committer": {"name": "KarlWithK", "email": "jocelinc60@outlook.com", "date": "2022-02-18T02:27:37Z"}, "message": "Correctly fix formatting doc tests with generics\n\nBefore the doc_test would be outputted like this:\n\"Foo<T, U>::t\"\nHowever, this would cause shells with shell redirection. I've changed it\nso when generics are involved we simply wrap the expression under escape\nchanters as so:\n\"\\\"Foo<T, U>::t\\\"\"\n\nNote:\nAt the cost of adding this, I had to allocate a new string via\nformat!{}. However, I argue this is alright as this for just for\noutputting the name of the doc test.\n\nThe following tests have been changed:\nrunnables::tests::doc_test_type_params\nrunnables::tests::test_doc_runnables_impl_mod\nrunnables::tests::test_runnables_doc_test_in_impl", "tree": {"sha": "65433d4b74492fa495c85cf4cfadebd207707b5e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/65433d4b74492fa495c85cf4cfadebd207707b5e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5f3327a6b8925791ecdd9dbecb1bf1537c3ef9fc", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEfGaKbRPVcpmJ+xJrGDNXtBMguysFAmIPBUoACgkQGDNXtBMg\nuyv+hw//REFjVeHTYOlJRDhS+o6Ct+dp5qrGIRSUXmbTLkUdKt9PkWGidLPVHIZm\nTrvjFxrVxCK26oorLbvLWsJ32sYadLl0CTp5hYaGn9aVadCehTbtXRSVH0ZxV86N\nIVEZwrU5S2UvnxmbpwWNpxjnlcYr2b9EO13A87ITAz6xpSLo9CCXvvy/5ugpUbLw\netNTcoPiuvdcApzTIqCSuKG5QExpPqz2nGBmEtMWt6J7sXUsRukcFbTuDgrtXI5f\nvOkGB8Usyv4zoxQsw/QkGorfBRry1Du3fUU+thnGE7n+MJjSQY02rxRL78Vr2yOm\nQ1a4wmqwAtoaKz8SGXoMjNc7YPnilNB1K4bd2SzFCifjIQKkXWdGuLc71lIhaNYu\n9uQWlAMKVAXcDKB+Yjua6+Ewlz1xDUUpQakx9QY6EADz8i9xqPE3pgcnPlfRtKli\nHBeUIyKWvKwe2D6nJ/KMIjTPDxhARxaG3U5GIgzTvlZM5iYrXNAoK+S/r22qKLtm\ntlShBiEGOdTDi3pTaroAB91F6eBWILfmEWsg8i6HDC9Z7As2/cMZ4sh7cU9xzdNt\nKxVsfAI6x6CY5EKes4NyDMKJAN5lDBTacdhSjruCnxnyQH2+b8XLUiCBq2Fj97XE\noOkTEWibacYbORzrgOtSvskn06o42gzi38xK2+oo/3NweAH9MLM=\n=vmxL\n-----END PGP SIGNATURE-----", "payload": "tree 65433d4b74492fa495c85cf4cfadebd207707b5e\nparent 89faff7477e904f6820990f130a3aed72c1d7e6b\nauthor KarlWithK <jocelinc60@outlook.com> 1645151257 -0600\ncommitter KarlWithK <jocelinc60@outlook.com> 1645151257 -0600\n\nCorrectly fix formatting doc tests with generics\n\nBefore the doc_test would be outputted like this:\n\"Foo<T, U>::t\"\nHowever, this would cause shells with shell redirection. I've changed it\nso when generics are involved we simply wrap the expression under escape\nchanters as so:\n\"\\\"Foo<T, U>::t\\\"\"\n\nNote:\nAt the cost of adding this, I had to allocate a new string via\nformat!{}. However, I argue this is alright as this for just for\noutputting the name of the doc test.\n\nThe following tests have been changed:\nrunnables::tests::doc_test_type_params\nrunnables::tests::test_doc_runnables_impl_mod\nrunnables::tests::test_runnables_doc_test_in_impl\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5f3327a6b8925791ecdd9dbecb1bf1537c3ef9fc", "html_url": "https://github.com/rust-lang/rust/commit/5f3327a6b8925791ecdd9dbecb1bf1537c3ef9fc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5f3327a6b8925791ecdd9dbecb1bf1537c3ef9fc/comments", "author": {"login": "SeniorMars", "id": 31679231, "node_id": "MDQ6VXNlcjMxNjc5MjMx", "avatar_url": "https://avatars.githubusercontent.com/u/31679231?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SeniorMars", "html_url": "https://github.com/SeniorMars", "followers_url": "https://api.github.com/users/SeniorMars/followers", "following_url": "https://api.github.com/users/SeniorMars/following{/other_user}", "gists_url": "https://api.github.com/users/SeniorMars/gists{/gist_id}", "starred_url": "https://api.github.com/users/SeniorMars/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SeniorMars/subscriptions", "organizations_url": "https://api.github.com/users/SeniorMars/orgs", "repos_url": "https://api.github.com/users/SeniorMars/repos", "events_url": "https://api.github.com/users/SeniorMars/events{/privacy}", "received_events_url": "https://api.github.com/users/SeniorMars/received_events", "type": "User", "site_admin": false}, "committer": {"login": "SeniorMars", "id": 31679231, "node_id": "MDQ6VXNlcjMxNjc5MjMx", "avatar_url": "https://avatars.githubusercontent.com/u/31679231?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SeniorMars", "html_url": "https://github.com/SeniorMars", "followers_url": "https://api.github.com/users/SeniorMars/followers", "following_url": "https://api.github.com/users/SeniorMars/following{/other_user}", "gists_url": "https://api.github.com/users/SeniorMars/gists{/gist_id}", "starred_url": "https://api.github.com/users/SeniorMars/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SeniorMars/subscriptions", "organizations_url": "https://api.github.com/users/SeniorMars/orgs", "repos_url": "https://api.github.com/users/SeniorMars/repos", "events_url": "https://api.github.com/users/SeniorMars/events{/privacy}", "received_events_url": "https://api.github.com/users/SeniorMars/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "89faff7477e904f6820990f130a3aed72c1d7e6b", "url": "https://api.github.com/repos/rust-lang/rust/commits/89faff7477e904f6820990f130a3aed72c1d7e6b", "html_url": "https://github.com/rust-lang/rust/commit/89faff7477e904f6820990f130a3aed72c1d7e6b"}], "stats": {"total": 10, "additions": 5, "deletions": 5}, "files": [{"sha": "39af47ebc6008620fd4e84b0a41638a96eaf3f28", "filename": "crates/ide/src/runnables.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/5f3327a6b8925791ecdd9dbecb1bf1537c3ef9fc/crates%2Fide%2Fsrc%2Frunnables.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5f3327a6b8925791ecdd9dbecb1bf1537c3ef9fc/crates%2Fide%2Fsrc%2Frunnables.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Frunnables.rs?ref=5f3327a6b8925791ecdd9dbecb1bf1537c3ef9fc", "patch": "@@ -426,8 +426,8 @@ fn module_def_doctest(db: &RootDatabase, def: Definition) -> Option<Runnable> {\n                             ty_args.format_with(\", \", |ty, cb| cb(&ty.display(db)))\n                         );\n                     }\n-                    format_to!(path, \"::{}\", def_name);\n-                    return Some(path);\n+                    format_to!(path, \"::{}\\\"\", def_name);\n+                    return Some(format!(\"\\\"{}\", path));\n                 }\n             }\n         }\n@@ -966,7 +966,7 @@ impl Data {\n                         },\n                         kind: DocTest {\n                             test_id: Path(\n-                                \"Data::foo\",\n+                                \"\\\"Data::foo\\\"\",\n                             ),\n                         },\n                         cfg: None,\n@@ -1360,7 +1360,7 @@ impl Foo {\n                         },\n                         kind: DocTest {\n                             test_id: Path(\n-                                \"foo::Foo::foo\",\n+                                \"\\\"foo::Foo::foo\\\"\",\n                             ),\n                         },\n                         cfg: None,\n@@ -2066,7 +2066,7 @@ impl<T, U> Foo<T, U> {\n                         },\n                         kind: DocTest {\n                             test_id: Path(\n-                                \"Foo<T, U>::t\",\n+                                \"\\\"Foo<T, U>::t\\\"\",\n                             ),\n                         },\n                         cfg: None,"}]}