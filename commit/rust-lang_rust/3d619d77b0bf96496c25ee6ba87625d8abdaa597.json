{"sha": "3d619d77b0bf96496c25ee6ba87625d8abdaa597", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNkNjE5ZDc3YjBiZjk2NDk2YzI1ZWU2YmE4NzYyNWQ4YWJkYWE1OTc=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2015-11-06T00:06:25Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2015-11-06T00:43:31Z"}, "message": "mk: Account for libdir change on windows\n\nThe recent change of libdir on windows was accidentally not propagated to\n`make dist` and related commands. This commit touches that up!\n\nCloses #29640", "tree": {"sha": "451223cb73b88bd37a11f6b7a69932f0b9de23b8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/451223cb73b88bd37a11f6b7a69932f0b9de23b8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3d619d77b0bf96496c25ee6ba87625d8abdaa597", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3d619d77b0bf96496c25ee6ba87625d8abdaa597", "html_url": "https://github.com/rust-lang/rust/commit/3d619d77b0bf96496c25ee6ba87625d8abdaa597", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3d619d77b0bf96496c25ee6ba87625d8abdaa597/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4ee11cd210ccb9a9be04ccab731cdaac5f4dea4c", "url": "https://api.github.com/repos/rust-lang/rust/commits/4ee11cd210ccb9a9be04ccab731cdaac5f4dea4c", "html_url": "https://github.com/rust-lang/rust/commit/4ee11cd210ccb9a9be04ccab731cdaac5f4dea4c"}], "stats": {"total": 23, "additions": 14, "deletions": 9}, "files": [{"sha": "8320eea8cf9451dddc268660096792c8bf2b5b3f", "filename": "mk/prepare.mk", "status": "modified", "additions": 14, "deletions": 9, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/3d619d77b0bf96496c25ee6ba87625d8abdaa597/mk%2Fprepare.mk", "raw_url": "https://github.com/rust-lang/rust/raw/3d619d77b0bf96496c25ee6ba87625d8abdaa597/mk%2Fprepare.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fprepare.mk?ref=3d619d77b0bf96496c25ee6ba87625d8abdaa597", "patch": "@@ -90,6 +90,8 @@ PREPARE_TOOLS = $(filter-out compiletest rustbook error-index-generator, $(TOOLS\n # $(3) is host\n # $(4) tag\n define DEF_PREPARE_HOST_TOOL\n+prepare-host-tool-$(1)-$(2)-$(3)-$(4): \\\n+\tPREPARE_SOURCE_BIN_DIR=$$(HBIN$(2)_H_$(3))\n prepare-host-tool-$(1)-$(2)-$(3)-$(4): prepare-maybe-clean-$(4) \\\n                                   $$(foreach dep,$$(TOOL_DEPS_$(1)),prepare-host-lib-$$(dep)-$(2)-$(3)-$(4)) \\\n                                   $$(HBIN$(2)_H_$(3))/$(1)$$(X_$(3)) \\\n@@ -110,8 +112,10 @@ endef\n # $(3) is host\n # $(4) tag\n define DEF_PREPARE_HOST_LIB\n-prepare-host-lib-$(1)-$(2)-$(3)-$(4): PREPARE_WORKING_SOURCE_LIB_DIR=$$(PREPARE_SOURCE_LIB_DIR)\n-prepare-host-lib-$(1)-$(2)-$(3)-$(4): PREPARE_WORKING_DEST_LIB_DIR=$$(PREPARE_DEST_LIB_DIR)\n+prepare-host-lib-$(1)-$(2)-$(3)-$(4): \\\n+\tPREPARE_WORKING_SOURCE_LIB_DIR=$$(HLIB$(2)_H_$(3))\n+prepare-host-lib-$(1)-$(2)-$(3)-$(4): \\\n+\tPREPARE_WORKING_DEST_LIB_DIR=$$(PREPARE_DEST_DIR)/$$(notdir $$(HLIB$(2)_H_$(3)))\n prepare-host-lib-$(1)-$(2)-$(3)-$(4): prepare-maybe-clean-$(4) \\\n                                  $$(foreach dep,$$(RUST_DEPS_$(1)),prepare-host-lib-$$(dep)-$(2)-$(3)-$(4)) \\\n                                  $$(HLIB$(2)_H_$(3))/stamp.$(1) \\\n@@ -129,10 +133,14 @@ endef\n # $(4) tag\n define DEF_PREPARE_TARGET_N\n # Rebind PREPARE_*_LIB_DIR to point to rustlib, then install the libs for the targets\n-prepare-target-$(2)-host-$(3)-$(1)-$(4): PREPARE_WORKING_SOURCE_LIB_DIR=$$(PREPARE_SOURCE_LIB_DIR)/rustlib/$(2)/lib\n-prepare-target-$(2)-host-$(3)-$(1)-$(4): PREPARE_WORKING_DEST_LIB_DIR=$$(PREPARE_DEST_LIB_DIR)/rustlib/$(2)/lib\n-prepare-target-$(2)-host-$(3)-$(1)-$(4): PREPARE_SOURCE_BIN_DIR=$$(PREPARE_SOURCE_LIB_DIR)/rustlib/$(3)/bin\n-prepare-target-$(2)-host-$(3)-$(1)-$(4): PREPARE_DEST_BIN_DIR=$$(PREPARE_DEST_LIB_DIR)/rustlib/$(3)/bin\n+prepare-target-$(2)-host-$(3)-$(1)-$(4): \\\n+\tPREPARE_WORKING_SOURCE_LIB_DIR=$$(TLIB$(1)_T_$(2)_H_$(3))\n+prepare-target-$(2)-host-$(3)-$(1)-$(4): \\\n+\tPREPARE_WORKING_DEST_LIB_DIR=$$(PREPARE_DEST_LIB_DIR)/rustlib/$(2)/lib\n+prepare-target-$(2)-host-$(3)-$(1)-$(4): \\\n+\tPREPARE_SOURCE_BIN_DIR=$$(TBIN$(1)_T_$(2)_H_$(3))\n+prepare-target-$(2)-host-$(3)-$(1)-$(4): \\\n+\tPREPARE_DEST_BIN_DIR=$$(PREPARE_DEST_LIB_DIR)/rustlib/$(3)/bin\n prepare-target-$(2)-host-$(3)-$(1)-$(4): prepare-maybe-clean-$(4) \\\n         $$(foreach crate,$$(TARGET_CRATES), \\\n           $$(TLIB$(1)_T_$(2)_H_$(3))/stamp.$$(crate)) \\\n@@ -185,9 +193,6 @@ INSTALL_DEBUGGER_SCRIPT_COMMANDS=$(if $(findstring windows,$(1)),\\\n \n define DEF_PREPARE\n \n-prepare-base-$(1)-%: PREPARE_SOURCE_DIR=$$(PREPARE_HOST)/stage$$(PREPARE_STAGE)\n-prepare-base-$(1)-%: PREPARE_SOURCE_BIN_DIR=$$(PREPARE_SOURCE_DIR)/bin\n-prepare-base-$(1)-%: PREPARE_SOURCE_LIB_DIR=$$(PREPARE_SOURCE_DIR)/$$(CFG_LIBDIR_RELATIVE)\n prepare-base-$(1)-%: PREPARE_SOURCE_MAN_DIR=$$(S)/man\n prepare-base-$(1)-%: PREPARE_DEST_BIN_DIR=$$(PREPARE_DEST_DIR)/bin\n prepare-base-$(1)-%: PREPARE_DEST_LIB_DIR=$$(PREPARE_DEST_DIR)/$$(CFG_LIBDIR_RELATIVE)"}]}