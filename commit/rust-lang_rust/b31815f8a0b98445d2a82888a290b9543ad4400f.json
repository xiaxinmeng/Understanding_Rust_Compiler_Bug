{"sha": "b31815f8a0b98445d2a82888a290b9543ad4400f", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIzMTgxNWY4YTBiOTg0NDVkMmE4Mjg4OGEyOTBiOTU0M2FkNDQwMGY=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-08-25T04:05:18Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-08-25T17:33:28Z"}, "message": "Fix istr::unsafe_from_bytes. Issue #855", "tree": {"sha": "78ebee136a2051839099420656150fb7b321dd0a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/78ebee136a2051839099420656150fb7b321dd0a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b31815f8a0b98445d2a82888a290b9543ad4400f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b31815f8a0b98445d2a82888a290b9543ad4400f", "html_url": "https://github.com/rust-lang/rust/commit/b31815f8a0b98445d2a82888a290b9543ad4400f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b31815f8a0b98445d2a82888a290b9543ad4400f/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b371891c7c35f5d561a4847515e41014c652fa26", "url": "https://api.github.com/repos/rust-lang/rust/commits/b371891c7c35f5d561a4847515e41014c652fa26", "html_url": "https://github.com/rust-lang/rust/commit/b371891c7c35f5d561a4847515e41014c652fa26"}], "stats": {"total": 10, "additions": 9, "deletions": 1}, "files": [{"sha": "b679093cea3e1b4c3a78c963078f7396f730bbc3", "filename": "src/lib/istr.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/b31815f8a0b98445d2a82888a290b9543ad4400f/src%2Flib%2Fistr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b31815f8a0b98445d2a82888a290b9543ad4400f/src%2Flib%2Fistr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib%2Fistr.rs?ref=b31815f8a0b98445d2a82888a290b9543ad4400f", "patch": "@@ -2,7 +2,7 @@ export eq, lteq, hash, is_empty, is_not_empty, is_whitespace, byte_len,\n index, rindex, find, starts_with, ends_with, substr, slice, split,\n concat, connect, to_upper, replace, char_slice, trim_left, trim_right, trim,\n unshift_char, shift_char, pop_char, push_char, is_utf8, from_chars, to_chars,\n-char_len, char_at, bytes, is_ascii, shift_byte, pop_byte;\n+char_len, char_at, bytes, is_ascii, shift_byte, pop_byte, unsafe_from_bytes;\n \n export from_str, to_str;\n \n@@ -111,6 +111,7 @@ fn bytes(s: &istr) -> [u8] {\n fn unsafe_from_bytes(v: &[mutable? u8]) -> istr {\n     let vcopy: [u8] = v + [0u8];\n     let scopy: istr = unsafe::reinterpret_cast(vcopy);\n+    unsafe::leak(vcopy);\n     ret scopy;\n }\n "}, {"sha": "646d02649e12536a2a6a71508b9b4ec7eecfeeff", "filename": "src/test/stdtest/istr.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/b31815f8a0b98445d2a82888a290b9543ad4400f/src%2Ftest%2Fstdtest%2Fistr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b31815f8a0b98445d2a82888a290b9543ad4400f/src%2Ftest%2Fstdtest%2Fistr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fstdtest%2Fistr.rs?ref=b31815f8a0b98445d2a82888a290b9543ad4400f", "patch": "@@ -249,3 +249,10 @@ fn pop_byte() {\n     assert s == ~\"AB\";\n     assert b == 67u8;\n }\n+\n+#[test]\n+fn unsafe_from_bytes() {\n+    let a = [65u8, 65u8, 65u8, 65u8, 65u8, 65u8, 65u8];\n+    let b = istr::unsafe_from_bytes(a);\n+    assert b == ~\"AAAAAAA\";\n+}\n\\ No newline at end of file"}]}