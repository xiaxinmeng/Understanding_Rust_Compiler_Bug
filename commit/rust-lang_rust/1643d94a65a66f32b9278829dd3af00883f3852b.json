{"sha": "1643d94a65a66f32b9278829dd3af00883f3852b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE2NDNkOTRhNjVhNjZmMzJiOTI3ODgyOWRkM2FmMDA4ODNmMzg1MmI=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-10-30T18:26:55Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-10-30T18:26:55Z"}, "message": "switch to TextRange::subrange", "tree": {"sha": "95344947f1957d03edcbcd6ef8a2786cc1b9142d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/95344947f1957d03edcbcd6ef8a2786cc1b9142d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1643d94a65a66f32b9278829dd3af00883f3852b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1643d94a65a66f32b9278829dd3af00883f3852b", "html_url": "https://github.com/rust-lang/rust/commit/1643d94a65a66f32b9278829dd3af00883f3852b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1643d94a65a66f32b9278829dd3af00883f3852b/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "950e8b8182897da60bcece70d84e9f0b6dc88632", "url": "https://api.github.com/repos/rust-lang/rust/commits/950e8b8182897da60bcece70d84e9f0b6dc88632", "html_url": "https://github.com/rust-lang/rust/commit/950e8b8182897da60bcece70d84e9f0b6dc88632"}], "stats": {"total": 14, "additions": 4, "deletions": 10}, "files": [{"sha": "0220f7d5d3086578cfe87b89f73d5801b31807ce", "filename": "crates/ra_analysis/src/descriptors/mod.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/1643d94a65a66f32b9278829dd3af00883f3852b/crates%2Fra_analysis%2Fsrc%2Fdescriptors%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1643d94a65a66f32b9278829dd3af00883f3852b/crates%2Fra_analysis%2Fsrc%2Fdescriptors%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_analysis%2Fsrc%2Fdescriptors%2Fmod.rs?ref=1643d94a65a66f32b9278829dd3af00883f3852b", "patch": "@@ -2,7 +2,6 @@ pub(crate) mod module;\n \n use ra_syntax::{\n     ast::{self, AstNode, NameOwner},\n-    text_utils::is_subrange,\n };\n \n #[derive(Debug, Clone)]\n@@ -23,7 +22,7 @@ impl FnDescriptor {\n             let label: String = node\n                 .syntax()\n                 .children()\n-                .filter(|child| !is_subrange(body_range, child.range()))\n+                .filter(|child| !child.range().is_subrange(&body_range))\n                 .map(|node| node.text().to_string())\n                 .collect();\n             label"}, {"sha": "a0b168bc6da69a2df745a64314171cc0eae0890f", "filename": "crates/ra_editor/src/completion.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/1643d94a65a66f32b9278829dd3af00883f3852b/crates%2Fra_editor%2Fsrc%2Fcompletion.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1643d94a65a66f32b9278829dd3af00883f3852b/crates%2Fra_editor%2Fsrc%2Fcompletion.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_editor%2Fsrc%2Fcompletion.rs?ref=1643d94a65a66f32b9278829dd3af00883f3852b", "patch": "@@ -3,7 +3,6 @@ use rustc_hash::{FxHashMap, FxHashSet};\n use ra_syntax::{\n     algo::visit::{visitor, visitor_ctx, Visitor, VisitorCtx},\n     ast::{self, AstChildren, LoopBodyOwner, ModuleItemOwner},\n-    text_utils::is_subrange,\n     AstNode, File,\n     SyntaxKind::*,\n     SyntaxNodeRef, TextUnit,\n@@ -191,7 +190,7 @@ fn is_in_loop_body(name_ref: ast::NameRef) -> bool {\n             .visit::<ast::LoopExpr, _>(LoopBodyOwner::loop_body)\n             .accept(node);\n         if let Some(Some(body)) = loop_body {\n-            if is_subrange(body.syntax().range(), name_ref.syntax().range()) {\n+            if name_ref.syntax().range().is_subrange(&body.syntax().range()) {\n                 return true;\n             }\n         }"}, {"sha": "f92529d3ee4800e8df588a61e9857ec1775cc862", "filename": "crates/ra_syntax/src/algo/mod.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/1643d94a65a66f32b9278829dd3af00883f3852b/crates%2Fra_syntax%2Fsrc%2Falgo%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1643d94a65a66f32b9278829dd3af00883f3852b/crates%2Fra_syntax%2Fsrc%2Falgo%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Falgo%2Fmod.rs?ref=1643d94a65a66f32b9278829dd3af00883f3852b", "patch": "@@ -2,7 +2,7 @@ pub mod visit;\n // pub mod walk;\n \n use crate::{\n-    text_utils::{contains_offset_nonstrict, is_subrange},\n+    text_utils::{contains_offset_nonstrict},\n     SyntaxNodeRef, TextRange, TextUnit,\n };\n \n@@ -91,7 +91,7 @@ impl<'f> Iterator for LeafAtOffset<'f> {\n \n pub fn find_covering_node(root: SyntaxNodeRef, range: TextRange) -> SyntaxNodeRef {\n     assert!(\n-        is_subrange(root.range(), range),\n+        range.is_subrange(&root.range()),\n         \"node range: {:?}, target range: {:?}\",\n         root.range(),\n         range,"}, {"sha": "a90f8a083d674823b7a2606b3b0f194ca843e7ca", "filename": "crates/ra_syntax/src/text_utils.rs", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/1643d94a65a66f32b9278829dd3af00883f3852b/crates%2Fra_syntax%2Fsrc%2Ftext_utils.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1643d94a65a66f32b9278829dd3af00883f3852b/crates%2Fra_syntax%2Fsrc%2Ftext_utils.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Ftext_utils.rs?ref=1643d94a65a66f32b9278829dd3af00883f3852b", "patch": "@@ -4,10 +4,6 @@ pub fn contains_offset_nonstrict(range: TextRange, offset: TextUnit) -> bool {\n     range.start() <= offset && offset <= range.end()\n }\n \n-pub fn is_subrange(range: TextRange, subrange: TextRange) -> bool {\n-    range.start() <= subrange.start() && subrange.end() <= range.end()\n-}\n-\n pub fn intersect(r1: TextRange, r2: TextRange) -> Option<TextRange> {\n     let start = r1.start().max(r2.start());\n     let end = r1.end().min(r2.end());"}]}