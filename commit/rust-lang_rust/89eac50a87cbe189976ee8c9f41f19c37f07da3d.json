{"sha": "89eac50a87cbe189976ee8c9f41f19c37f07da3d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg5ZWFjNTBhODdjYmUxODk5NzZlZThjOWY0MWYxOWMzN2YwN2RhM2Q=", "commit": {"author": {"name": "Santiago Pastorino", "email": "spastorino@gmail.com", "date": "2020-10-21T00:56:29Z"}, "committer": {"name": "Santiago Pastorino", "email": "spastorino@gmail.com", "date": "2020-10-27T17:45:40Z"}, "message": "Hide outermost_fn_param_pat, it's an internal detail", "tree": {"sha": "cec4aa2f639c9d7731954dea63b10fce4c9183a1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cec4aa2f639c9d7731954dea63b10fce4c9183a1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/89eac50a87cbe189976ee8c9f41f19c37f07da3d", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEF0ntrgrd9qf9uuThgTGiTgx5768FAl+YXMQACgkQgTGiTgx5\n76/ILg//XJ1x+cwvwsz2KGBKOuvVN++iGKor4kQ7SJQXzE8USfEwjZKebbT2kcd6\nO6v2udEtF5JUQ0GPyc6eyCOLLdg47Tpcz7HWYMaVfhogewgZRzh8X9Mr1u/uamJD\no3LiUuLmqOLEj1jYC+cti5FBLgiQXTawsIlvbRQuDW2f0UWRdizVA/0LIBiAXk5h\nRmTax6Rg0x1sH0oeTJGWg/y0J1/p9KUNVGxfDoRznhFKeobR4Fn9NOiidozq2oqM\ncXcmCkmRbj2iiVWqJ+WvYSjDr0uK3Sz/CorLZvlm8QVg6W6m9Yqfro129v0vMBll\nMB14siKfUz3jwZSUGuBxJJN+q63N+R9aYv+g5s7Z0MlrILj8ghrnnrFe8O+KoiL1\nVdLwBH5adKdVXO3X9IG95fj0pAWv9EU4Mkm3A2w5HXjkdqCUYQ8U5yTwIUHCHegc\nE5S3k02mdd4tPtGZZ7i4p+xccfmAT/JatKCosbV3XPkPHr7nx3bgXdU9ZmqJk3CL\n4k/ATNXUNJ96LfZFKBSEaA1FzP1VtqWqRR2/H4qFLs2/TQJ4+sRZi/KVvLOD79I8\n3lLGh+N5cW24XKKPTfJAxJqukZPzcs+zD0VggTEfHN7EfvQAvc3j3T1hBHh7Bgl8\n4zJ7BPeYUSBPaKAacOOTU1HvDyIFoQafOxusMi11JUlF9qBmJ3s=\n=+WXZ\n-----END PGP SIGNATURE-----", "payload": "tree cec4aa2f639c9d7731954dea63b10fce4c9183a1\nparent f0fe0a6ebad583f10a6a1740ca93618c4f5dd175\nauthor Santiago Pastorino <spastorino@gmail.com> 1603241789 -0300\ncommitter Santiago Pastorino <spastorino@gmail.com> 1603820740 -0300\n\nHide outermost_fn_param_pat, it's an internal detail\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/89eac50a87cbe189976ee8c9f41f19c37f07da3d", "html_url": "https://github.com/rust-lang/rust/commit/89eac50a87cbe189976ee8c9f41f19c37f07da3d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/89eac50a87cbe189976ee8c9f41f19c37f07da3d/comments", "author": {"login": "spastorino", "id": 52642, "node_id": "MDQ6VXNlcjUyNjQy", "avatar_url": "https://avatars.githubusercontent.com/u/52642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spastorino", "html_url": "https://github.com/spastorino", "followers_url": "https://api.github.com/users/spastorino/followers", "following_url": "https://api.github.com/users/spastorino/following{/other_user}", "gists_url": "https://api.github.com/users/spastorino/gists{/gist_id}", "starred_url": "https://api.github.com/users/spastorino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spastorino/subscriptions", "organizations_url": "https://api.github.com/users/spastorino/orgs", "repos_url": "https://api.github.com/users/spastorino/repos", "events_url": "https://api.github.com/users/spastorino/events{/privacy}", "received_events_url": "https://api.github.com/users/spastorino/received_events", "type": "User", "site_admin": false}, "committer": {"login": "spastorino", "id": 52642, "node_id": "MDQ6VXNlcjUyNjQy", "avatar_url": "https://avatars.githubusercontent.com/u/52642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spastorino", "html_url": "https://github.com/spastorino", "followers_url": "https://api.github.com/users/spastorino/followers", "following_url": "https://api.github.com/users/spastorino/following{/other_user}", "gists_url": "https://api.github.com/users/spastorino/gists{/gist_id}", "starred_url": "https://api.github.com/users/spastorino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spastorino/subscriptions", "organizations_url": "https://api.github.com/users/spastorino/orgs", "repos_url": "https://api.github.com/users/spastorino/repos", "events_url": "https://api.github.com/users/spastorino/events{/privacy}", "received_events_url": "https://api.github.com/users/spastorino/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f0fe0a6ebad583f10a6a1740ca93618c4f5dd175", "url": "https://api.github.com/repos/rust-lang/rust/commits/f0fe0a6ebad583f10a6a1740ca93618c4f5dd175", "html_url": "https://github.com/rust-lang/rust/commit/f0fe0a6ebad583f10a6a1740ca93618c4f5dd175"}], "stats": {"total": 12, "additions": 4, "deletions": 8}, "files": [{"sha": "6dd8a143ec0f28c1e94f36a963964e7716d67a4c", "filename": "compiler/rustc_typeck/src/check/check.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/89eac50a87cbe189976ee8c9f41f19c37f07da3d/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fcheck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/89eac50a87cbe189976ee8c9f41f19c37f07da3d/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fcheck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fcheck.rs?ref=89eac50a87cbe189976ee8c9f41f19c37f07da3d", "patch": "@@ -105,7 +105,7 @@ pub(super) fn check_fn<'a, 'tcx>(\n \n     let outer_def_id = tcx.closure_base_def_id(hir.local_def_id(fn_id).to_def_id()).expect_local();\n     let outer_hir_id = hir.local_def_id_to_hir_id(outer_def_id);\n-    GatherLocalsVisitor::new(&fcx, outer_hir_id, false).visit_body(body);\n+    GatherLocalsVisitor::new(&fcx, outer_hir_id).visit_body(body);\n \n     // C-variadic fns also have a `VaList` input that's not listed in `fn_sig`\n     // (as it's created inside the body itself, not passed in from outside)."}, {"sha": "af552389de02491def93f0a9c6a247d11645aa21", "filename": "compiler/rustc_typeck/src/check/gather_locals.rs", "status": "modified", "additions": 2, "deletions": 6, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/89eac50a87cbe189976ee8c9f41f19c37f07da3d/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fgather_locals.rs", "raw_url": "https://github.com/rust-lang/rust/raw/89eac50a87cbe189976ee8c9f41f19c37f07da3d/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fgather_locals.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fgather_locals.rs?ref=89eac50a87cbe189976ee8c9f41f19c37f07da3d", "patch": "@@ -18,12 +18,8 @@ pub(super) struct GatherLocalsVisitor<'a, 'tcx> {\n }\n \n impl<'a, 'tcx> GatherLocalsVisitor<'a, 'tcx> {\n-    pub(super) fn new(\n-        fcx: &'a FnCtxt<'a, 'tcx>,\n-        parent_id: hir::HirId,\n-        outermost_fn_param_pat: bool,\n-    ) -> Self {\n-        Self { fcx, parent_id, outermost_fn_param_pat }\n+    pub(super) fn new(fcx: &'a FnCtxt<'a, 'tcx>, parent_id: hir::HirId) -> Self {\n+        Self { fcx, parent_id, outermost_fn_param_pat: false }\n     }\n \n     fn assign(&mut self, span: Span, nid: hir::HirId, ty_opt: Option<LocalTy<'tcx>>) -> Ty<'tcx> {"}, {"sha": "169ad0df3a5c963fe572faefddef6ad8704cae0b", "filename": "compiler/rustc_typeck/src/check/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/89eac50a87cbe189976ee8c9f41f19c37f07da3d/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/89eac50a87cbe189976ee8c9f41f19c37f07da3d/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fmod.rs?ref=89eac50a87cbe189976ee8c9f41f19c37f07da3d", "patch": "@@ -553,7 +553,7 @@ fn typeck_with_fallback<'tcx>(\n             };\n \n             // Gather locals in statics (because of block expressions).\n-            GatherLocalsVisitor::new(&fcx, id, false).visit_body(body);\n+            GatherLocalsVisitor::new(&fcx, id).visit_body(body);\n \n             fcx.check_expr_coercable_to_type(&body.value, revealed_ty, None);\n "}]}