{"sha": "80b3b740184a6a64ee0ff8767ab6f5b786dc0dd7", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgwYjNiNzQwMTg0YTZhNjRlZTBmZjg3NjdhYjZmNWI3ODZkYzBkZDc=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2021-06-11T14:10:22Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-06-11T14:10:22Z"}, "message": "Merge #9215\n\n9215: change visibility for use and macro items r=jonas-schievink a=Maan2003\n\n\n\nCo-authored-by: Maan2003 <manmeetmann2003@gmail.com>", "tree": {"sha": "b67d068ebdd3a101bf6487cf6c567ca1aaaf8409", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b67d068ebdd3a101bf6487cf6c567ca1aaaf8409"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/80b3b740184a6a64ee0ff8767ab6f5b786dc0dd7", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgw27OCRBK7hj4Ov3rIwAAGBsIAFl8Nw3dWqaOYoOAeDy5/8h2\nyxmFJ20xXbMV+CaVrWn2CbXa2ON6yNAZugAFvLJAXsTaiom+OTdgjXfLpr6TmvMl\nv02iHMjkgCjBG/YE96LEXBlr0T+qtEykVnTGe7G2bCKen4ZvH//fEWIkQtStKnSJ\nHy7+Ky9Cli2hcyD8HPtSfVSVqbA+I7txZNjN7H8Vtd6SLrH8iOA291ICrE3Aat7K\n3+T1ZwHQhYPCsL9I5qy+LcIVP2dPhNaGBJWXKzbkaroNIDnFjsd/B8lRNvrOTJ7k\n46yljl+DYBcu7RBr5D1OMhgW5x1NQF2XCGmOm9DvnD9T9m0jVWFtg+HdD90KrR4=\n=+aMQ\n-----END PGP SIGNATURE-----\n", "payload": "tree b67d068ebdd3a101bf6487cf6c567ca1aaaf8409\nparent 050232a37e71ec06e8810af29178b124c76a527d\nparent 4c1a02288c2c46d98c048ef9007a82c11a3f855d\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1623420622 +0000\ncommitter GitHub <noreply@github.com> 1623420622 +0000\n\nMerge #9215\n\n9215: change visibility for use and macro items r=jonas-schievink a=Maan2003\n\n\n\nCo-authored-by: Maan2003 <manmeetmann2003@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/80b3b740184a6a64ee0ff8767ab6f5b786dc0dd7", "html_url": "https://github.com/rust-lang/rust/commit/80b3b740184a6a64ee0ff8767ab6f5b786dc0dd7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/80b3b740184a6a64ee0ff8767ab6f5b786dc0dd7/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "050232a37e71ec06e8810af29178b124c76a527d", "url": "https://api.github.com/repos/rust-lang/rust/commits/050232a37e71ec06e8810af29178b124c76a527d", "html_url": "https://github.com/rust-lang/rust/commit/050232a37e71ec06e8810af29178b124c76a527d"}, {"sha": "4c1a02288c2c46d98c048ef9007a82c11a3f855d", "url": "https://api.github.com/repos/rust-lang/rust/commits/4c1a02288c2c46d98c048ef9007a82c11a3f855d", "html_url": "https://github.com/rust-lang/rust/commit/4c1a02288c2c46d98c048ef9007a82c11a3f855d"}], "stats": {"total": 11, "additions": 9, "deletions": 2}, "files": [{"sha": "ed936667f8c07bb6566f0ba94325b94bb746eb03", "filename": "crates/ide_assists/src/handlers/change_visibility.rs", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/80b3b740184a6a64ee0ff8767ab6f5b786dc0dd7/crates%2Fide_assists%2Fsrc%2Fhandlers%2Fchange_visibility.rs", "raw_url": "https://github.com/rust-lang/rust/raw/80b3b740184a6a64ee0ff8767ab6f5b786dc0dd7/crates%2Fide_assists%2Fsrc%2Fhandlers%2Fchange_visibility.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide_assists%2Fsrc%2Fhandlers%2Fchange_visibility.rs?ref=80b3b740184a6a64ee0ff8767ab6f5b786dc0dd7", "patch": "@@ -1,7 +1,9 @@\n use syntax::{\n     ast::{self, NameOwner, VisibilityOwner},\n     AstNode,\n-    SyntaxKind::{CONST, ENUM, FN, MODULE, STATIC, STRUCT, TRAIT, TYPE_ALIAS, VISIBILITY},\n+    SyntaxKind::{\n+        CONST, ENUM, FN, MACRO_DEF, MODULE, STATIC, STRUCT, TRAIT, TYPE_ALIAS, USE, VISIBILITY,\n+    },\n     T,\n };\n \n@@ -37,12 +39,15 @@ fn add_vis(acc: &mut Assists, ctx: &AssistContext) -> Option<()> {\n                 | T![enum]\n                 | T![trait]\n                 | T![type]\n+                | T![use]\n+                | T![macro]\n         )\n     });\n \n     let (offset, target) = if let Some(keyword) = item_keyword {\n         let parent = keyword.parent()?;\n-        let def_kws = vec![CONST, STATIC, TYPE_ALIAS, FN, MODULE, STRUCT, ENUM, TRAIT];\n+        let def_kws =\n+            vec![CONST, STATIC, TYPE_ALIAS, FN, MODULE, STRUCT, ENUM, TRAIT, USE, MACRO_DEF];\n         // Parent is not a definition, can't add visibility\n         if !def_kws.iter().any(|&def_kw| def_kw == parent.kind()) {\n             return None;\n@@ -122,6 +127,8 @@ mod tests {\n         check_assist(change_visibility, \"$0trait Foo {}\", \"pub(crate) trait Foo {}\");\n         check_assist(change_visibility, \"m$0od {}\", \"pub(crate) mod {}\");\n         check_assist(change_visibility, \"unsafe f$0n foo() {}\", \"pub(crate) unsafe fn foo() {}\");\n+        check_assist(change_visibility, \"$0macro foo() {}\", \"pub(crate) macro foo() {}\");\n+        check_assist(change_visibility, \"$0use foo;\", \"pub(crate) use foo;\");\n     }\n \n     #[test]"}]}