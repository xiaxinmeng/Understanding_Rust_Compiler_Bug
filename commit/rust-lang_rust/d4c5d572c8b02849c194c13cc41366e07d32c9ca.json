{"sha": "d4c5d572c8b02849c194c13cc41366e07d32c9ca", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ0YzVkNTcyYzhiMDI4NDljMTk0YzEzY2M0MTM2NmUwN2QzMmM5Y2E=", "commit": {"author": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2017-03-19T22:59:08Z"}, "committer": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2017-03-19T22:59:08Z"}, "message": "Unify fn_args_layout and fn_arg_indent\n\nCloses #1390", "tree": {"sha": "1eca45e9b2a4f5a86668322ac0c95b5f87ffa7fd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1eca45e9b2a4f5a86668322ac0c95b5f87ffa7fd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d4c5d572c8b02849c194c13cc41366e07d32c9ca", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d4c5d572c8b02849c194c13cc41366e07d32c9ca", "html_url": "https://github.com/rust-lang/rust/commit/d4c5d572c8b02849c194c13cc41366e07d32c9ca", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d4c5d572c8b02849c194c13cc41366e07d32c9ca/comments", "author": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "21ff1d43ba2dd2a6e9011b393d94599b04effc2f", "url": "https://api.github.com/repos/rust-lang/rust/commits/21ff1d43ba2dd2a6e9011b393d94599b04effc2f", "html_url": "https://github.com/rust-lang/rust/commit/21ff1d43ba2dd2a6e9011b393d94599b04effc2f"}], "stats": {"total": 64, "additions": 37, "deletions": 27}, "files": [{"sha": "91438a00f0846fdc73eb02894fa94e5361f2e419", "filename": "src/config.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d4c5d572c8b02849c194c13cc41366e07d32c9ca/src%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d4c5d572c8b02849c194c13cc41366e07d32c9ca/src%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fconfig.rs?ref=d4c5d572c8b02849c194c13cc41366e07d32c9ca", "patch": "@@ -341,7 +341,6 @@ create_config! {\n     fn_args_density: Density, Density::Tall, \"Argument density in functions\";\n     fn_args_layout: IndentStyle, IndentStyle::Visual,\n         \"Layout of function arguments and tuple structs\";\n-    fn_arg_indent: IndentStyle, IndentStyle::Visual, \"Indent on function arguments\";\n     array_layout: IndentStyle, IndentStyle::Visual, \"Indent on arrays\";\n     type_punctuation_density: TypeDensity, TypeDensity::Wide,\n         \"Determines if '+' or '=' are wrapped in spaces in the punctuation of types\";"}, {"sha": "69acab70f3430ca065c361044e6e0d92f8ddbb17", "filename": "src/items.rs", "status": "modified", "additions": 5, "deletions": 8, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/d4c5d572c8b02849c194c13cc41366e07d32c9ca/src%2Fitems.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d4c5d572c8b02849c194c13cc41366e07d32c9ca/src%2Fitems.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fitems.rs?ref=d4c5d572c8b02849c194c13cc41366e07d32c9ca", "patch": "@@ -1800,9 +1800,11 @@ fn rewrite_args(context: &RewriteContext,\n         item.item = Some(arg);\n     }\n \n-    let indent = match context.config.fn_arg_indent {\n-        IndentStyle::Block => indent.block_indent(context.config),\n-        IndentStyle::Visual => arg_indent,\n+    let (indent, trailing_comma, end_with_newline) = match context.config.fn_args_layout {\n+        IndentStyle::Block => {\n+            (indent.block_indent(context.config), SeparatorTactic::Vertical, true)\n+        }\n+        IndentStyle::Visual => (arg_indent, SeparatorTactic::Never, false),\n     };\n \n     let tactic = definitive_tactic(&arg_items,\n@@ -1815,11 +1817,6 @@ fn rewrite_args(context: &RewriteContext,\n \n     debug!(\"rewrite_args: budget: {}, tactic: {:?}\", budget, tactic);\n \n-    let (trailing_comma, end_with_newline) = match context.config.fn_args_layout {\n-        IndentStyle::Block => (SeparatorTactic::Vertical, true),\n-        _ => (SeparatorTactic::Never, false),\n-    };\n-\n     let fmt = ListFormatting {\n         tactic: tactic,\n         separator: \",\","}, {"sha": "4a86f8c2d281e55e7674654628443fd0bd140882", "filename": "tests/source/fn-custom-2.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d4c5d572c8b02849c194c13cc41366e07d32c9ca/tests%2Fsource%2Ffn-custom-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d4c5d572c8b02849c194c13cc41366e07d32c9ca/tests%2Fsource%2Ffn-custom-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Ffn-custom-2.rs?ref=d4c5d572c8b02849c194c13cc41366e07d32c9ca", "patch": "@@ -1,4 +1,4 @@\n-// rustfmt-fn_arg_indent: Block\n+// rustfmt-fn_args_layout: Block\n // rustfmt-generics_indent: Block\n // rustfmt-where_indent: Block\n // rustfmt-where_layout: Mixed"}, {"sha": "38c7839a49ae2684ea69d65b0ea555195ff3fc40", "filename": "tests/source/fn-custom-3.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d4c5d572c8b02849c194c13cc41366e07d32c9ca/tests%2Fsource%2Ffn-custom-3.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d4c5d572c8b02849c194c13cc41366e07d32c9ca/tests%2Fsource%2Ffn-custom-3.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Ffn-custom-3.rs?ref=d4c5d572c8b02849c194c13cc41366e07d32c9ca", "patch": "@@ -1,4 +1,4 @@\n-// rustfmt-fn_arg_indent: Block\n+// rustfmt-fn_args_layout: Block\n // rustfmt-generics_indent: Block\n // rustfmt-where_layout: HorizontalVertical\n // Test different indents."}, {"sha": "6ebf42364237c851f560a14836652b191c181b6f", "filename": "tests/source/fn-custom-7.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d4c5d572c8b02849c194c13cc41366e07d32c9ca/tests%2Fsource%2Ffn-custom-7.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d4c5d572c8b02849c194c13cc41366e07d32c9ca/tests%2Fsource%2Ffn-custom-7.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Ffn-custom-7.rs?ref=d4c5d572c8b02849c194c13cc41366e07d32c9ca", "patch": "@@ -1,7 +1,6 @@\n // rustfmt-normalize_comments: true\n // rustfmt-fn_args_layout: Block\n // rustfmt-fn_args_density: Vertical\n-// rustfmt-fn_arg_indent: Block\n // rustfmt-fn_brace_style: AlwaysNextLine\n \n // Case with only one variable."}, {"sha": "f0251b70b58287a9a17f3ecb8061304db47f7d37", "filename": "tests/target/fn-custom-2.rs", "status": "modified", "additions": 15, "deletions": 7, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/d4c5d572c8b02849c194c13cc41366e07d32c9ca/tests%2Ftarget%2Ffn-custom-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d4c5d572c8b02849c194c13cc41366e07d32c9ca/tests%2Ftarget%2Ffn-custom-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Ffn-custom-2.rs?ref=d4c5d572c8b02849c194c13cc41366e07d32c9ca", "patch": "@@ -1,22 +1,26 @@\n-// rustfmt-fn_arg_indent: Block\n+// rustfmt-fn_args_layout: Block\n // rustfmt-generics_indent: Block\n // rustfmt-where_indent: Block\n // rustfmt-where_layout: Mixed\n // Test different indents.\n \n-fn foo(a: Aaaaaaaaaaaaaaa,\n+fn foo(\n+    a: Aaaaaaaaaaaaaaa,\n     b: Bbbbbbbbbbbbbbbb,\n     c: Ccccccccccccccccc,\n     d: Ddddddddddddddddddddddddd,\n-    e: Eeeeeeeeeeeeeeeeeee) {\n+    e: Eeeeeeeeeeeeeeeeeee,\n+) {\n     foo();\n }\n \n fn bar<\n     'a: 'bbbbbbbbbbbbbbbbbbbbbbbbbbb,\n     TTTTTTTTTTTTT,\n     UUUUUUUUUUUUUUUUUUUU: WWWWWWWWWWWWWWWWWWWWWWWW\n->(a: Aaaaaaaaaaaaaaa) {\n+>(\n+    a: Aaaaaaaaaaaaaaa,\n+) {\n     bar();\n }\n \n@@ -34,12 +38,14 @@ fn qux()\n }\n \n impl Foo {\n-    fn foo(self,\n+    fn foo(\n+        self,\n         a: Aaaaaaaaaaaaaaa,\n         b: Bbbbbbbbbbbbbbbb,\n         c: Ccccccccccccccccc,\n         d: Ddddddddddddddddddddddddd,\n-        e: Eeeeeeeeeeeeeeeeeee) {\n+        e: Eeeeeeeeeeeeeeeeeee,\n+    ) {\n         foo();\n     }\n \n@@ -48,7 +54,9 @@ impl Foo {\n         TTTTTTTTTTTTT,\n         UUUUUUUUUUUUUUUUUUUU: WWWWWWWWWWWWWWWWWWWWWWWW\n     >\n-        (a: Aaaaaaaaaaaaaaa) {\n+        (\n+        a: Aaaaaaaaaaaaaaa,\n+    ) {\n         bar();\n     }\n "}, {"sha": "309b1cd7eea48d4619fd1ecd6110803fe6b9e760", "filename": "tests/target/fn-custom-3.rs", "status": "modified", "additions": 15, "deletions": 7, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/d4c5d572c8b02849c194c13cc41366e07d32c9ca/tests%2Ftarget%2Ffn-custom-3.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d4c5d572c8b02849c194c13cc41366e07d32c9ca/tests%2Ftarget%2Ffn-custom-3.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Ffn-custom-3.rs?ref=d4c5d572c8b02849c194c13cc41366e07d32c9ca", "patch": "@@ -1,21 +1,25 @@\n-// rustfmt-fn_arg_indent: Block\n+// rustfmt-fn_args_layout: Block\n // rustfmt-generics_indent: Block\n // rustfmt-where_layout: HorizontalVertical\n // Test different indents.\n \n-fn foo(a: Aaaaaaaaaaaaaaa,\n+fn foo(\n+    a: Aaaaaaaaaaaaaaa,\n     b: Bbbbbbbbbbbbbbbb,\n     c: Ccccccccccccccccc,\n     d: Ddddddddddddddddddddddddd,\n-    e: Eeeeeeeeeeeeeeeeeee) {\n+    e: Eeeeeeeeeeeeeeeeeee,\n+) {\n     foo();\n }\n \n fn bar<\n     'a: 'bbbbbbbbbbbbbbbbbbbbbbbbbbb,\n     TTTTTTTTTTTTT,\n     UUUUUUUUUUUUUUUUUUUU: WWWWWWWWWWWWWWWWWWWWWWWW\n->(a: Aaaaaaaaaaaaaaa) {\n+>(\n+    a: Aaaaaaaaaaaaaaa,\n+) {\n     bar();\n }\n \n@@ -35,12 +39,14 @@ fn qux()\n }\n \n impl Foo {\n-    fn foo(self,\n+    fn foo(\n+        self,\n         a: Aaaaaaaaaaaaaaa,\n         b: Bbbbbbbbbbbbbbbb,\n         c: Ccccccccccccccccc,\n         d: Ddddddddddddddddddddddddd,\n-        e: Eeeeeeeeeeeeeeeeeee) {\n+        e: Eeeeeeeeeeeeeeeeeee,\n+    ) {\n         foo();\n     }\n \n@@ -49,7 +55,9 @@ impl Foo {\n         TTTTTTTTTTTTT,\n         UUUUUUUUUUUUUUUUUUUU: WWWWWWWWWWWWWWWWWWWWWWWW\n     >\n-        (a: Aaaaaaaaaaaaaaa) {\n+        (\n+        a: Aaaaaaaaaaaaaaa,\n+    ) {\n         bar();\n     }\n }"}, {"sha": "0f5297e33edae826dee4a940156a82f4beba631f", "filename": "tests/target/fn-custom-7.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d4c5d572c8b02849c194c13cc41366e07d32c9ca/tests%2Ftarget%2Ffn-custom-7.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d4c5d572c8b02849c194c13cc41366e07d32c9ca/tests%2Ftarget%2Ffn-custom-7.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Ffn-custom-7.rs?ref=d4c5d572c8b02849c194c13cc41366e07d32c9ca", "patch": "@@ -1,7 +1,6 @@\n // rustfmt-normalize_comments: true\n // rustfmt-fn_args_layout: Block\n // rustfmt-fn_args_density: Vertical\n-// rustfmt-fn_arg_indent: Block\n // rustfmt-fn_brace_style: AlwaysNextLine\n \n // Case with only one variable."}]}