{"sha": "7826c57be6ce056ec12faff7f68c980a2d18ea48", "node_id": "C_kwDOAAsO6NoAKDc4MjZjNTdiZTZjZTA1NmVjMTJmYWZmN2Y2OGM5ODBhMmQxOGVhNDg", "commit": {"author": {"name": "Aaron Hill", "email": "aa1ronham@gmail.com", "date": "2021-11-25T17:45:58Z"}, "committer": {"name": "Aaron Hill", "email": "aa1ronham@gmail.com", "date": "2021-12-04T22:00:29Z"}, "message": "Include `lld` in `rust-dev` package\n\nFixes #88941\n\nThis will allow using `download-ci-llvm` while still having LLD\navailable.", "tree": {"sha": "976e9332626a8780a345648f71510aa1b698fa2c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/976e9332626a8780a345648f71510aa1b698fa2c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7826c57be6ce056ec12faff7f68c980a2d18ea48", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7J9Gc3TfBwj2K399tAh+UQ6YsWQFAmGr5P4ACgkQtAh+UQ6Y\nsWSD9xAAuKzVlHPxsX98jakfZZHwTPZ1Vn1PcGfchmB/Im/HBR/LB98uamNjGyRj\ngStgg3qYzPcaqVkrKkLFRQZCYKLGF+8XeyXLTGPFaAd7+Akh15MEkewNEKloC4u/\nqusW90TFEZCN/kkP9Q2smPPVr8zqKNTUh6hbZbqB9ikSn93EZ2QiqTxkSgZWwEHa\n9jYJu5d/E4Dbf9afIYxn9j0mZWjA0PaTO+572sEosyHIY0W5fO4vk98kN0fvl/1u\nQUpOUj3Fj/7v283m0PpBpwGqWjoGc+SmCLn+H/fGKM/1DXwzLVsEM0BaQhdCwaa4\n+tR6ijzAMG/PAO8TEzCkJbYYO9v5hOrTJ3AhcAl21hJ2W5PS5c/CZRoUPIZXSVwK\nVJjgQRVxHlHXZs26KkQP52NMcqAgM2qjR9t/CVjLtHIPtIV9CTXpFReSdgl4IJhW\nqoFY1bZ0spd0GMwW9OI/2VYvy49Ca/6lR6OLmXIsMM0vOyiy4yX9niTz2AV/puLj\nPhJcem2e0wEczljSmgWa5x7CU9WfRMioXrW6z3QTZZDssnWDqnLBe5y6GRa9FY7a\nx197/3bPZRjdb9ASOcCRLroUxITFuXpPnW7H9+D63LT0jGvgxYmF3hR6nNb7Z+Xl\n71fCqKGHrARbn1uvOAIZRHHYKp60outJ3LXwEufsk8tSyfowM5c=\n=tGBK\n-----END PGP SIGNATURE-----", "payload": "tree 976e9332626a8780a345648f71510aa1b698fa2c\nparent ff23ad3179014ba258f2b540fb39dd0f26852b7a\nauthor Aaron Hill <aa1ronham@gmail.com> 1637862358 -0600\ncommitter Aaron Hill <aa1ronham@gmail.com> 1638655229 -0500\n\nInclude `lld` in `rust-dev` package\n\nFixes #88941\n\nThis will allow using `download-ci-llvm` while still having LLD\navailable.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7826c57be6ce056ec12faff7f68c980a2d18ea48", "html_url": "https://github.com/rust-lang/rust/commit/7826c57be6ce056ec12faff7f68c980a2d18ea48", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7826c57be6ce056ec12faff7f68c980a2d18ea48/comments", "author": {"login": "Aaron1011", "id": 1408859, "node_id": "MDQ6VXNlcjE0MDg4NTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1408859?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aaron1011", "html_url": "https://github.com/Aaron1011", "followers_url": "https://api.github.com/users/Aaron1011/followers", "following_url": "https://api.github.com/users/Aaron1011/following{/other_user}", "gists_url": "https://api.github.com/users/Aaron1011/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aaron1011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aaron1011/subscriptions", "organizations_url": "https://api.github.com/users/Aaron1011/orgs", "repos_url": "https://api.github.com/users/Aaron1011/repos", "events_url": "https://api.github.com/users/Aaron1011/events{/privacy}", "received_events_url": "https://api.github.com/users/Aaron1011/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Aaron1011", "id": 1408859, "node_id": "MDQ6VXNlcjE0MDg4NTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1408859?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aaron1011", "html_url": "https://github.com/Aaron1011", "followers_url": "https://api.github.com/users/Aaron1011/followers", "following_url": "https://api.github.com/users/Aaron1011/following{/other_user}", "gists_url": "https://api.github.com/users/Aaron1011/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aaron1011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aaron1011/subscriptions", "organizations_url": "https://api.github.com/users/Aaron1011/orgs", "repos_url": "https://api.github.com/users/Aaron1011/repos", "events_url": "https://api.github.com/users/Aaron1011/events{/privacy}", "received_events_url": "https://api.github.com/users/Aaron1011/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ff23ad3179014ba258f2b540fb39dd0f26852b7a", "url": "https://api.github.com/repos/rust-lang/rust/commits/ff23ad3179014ba258f2b540fb39dd0f26852b7a", "html_url": "https://github.com/rust-lang/rust/commit/ff23ad3179014ba258f2b540fb39dd0f26852b7a"}], "stats": {"total": 7, "additions": 7, "deletions": 0}, "files": [{"sha": "5f28ffeda8fee35b30f0fc783e3c2bcfdcd3639d", "filename": "src/bootstrap/dist.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/7826c57be6ce056ec12faff7f68c980a2d18ea48/src%2Fbootstrap%2Fdist.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7826c57be6ce056ec12faff7f68c980a2d18ea48/src%2Fbootstrap%2Fdist.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fdist.rs?ref=7826c57be6ce056ec12faff7f68c980a2d18ea48", "patch": "@@ -2085,6 +2085,13 @@ impl Step for RustDev {\n         ] {\n             tarball.add_file(src_bindir.join(exe(bin, target)), \"bin\", 0o755);\n         }\n+\n+        // We don't build LLD on some platforms, so only add it if it exists\n+        let lld_path = builder.lld_out(target).join(\"bin\").join(exe(\"lld\", target));\n+        if lld_path.exists() {\n+            tarball.add_file(lld_path, \"bin\", 0o755);\n+        }\n+\n         tarball.add_file(&builder.llvm_filecheck(target), \"bin\", 0o755);\n \n         // Copy the include directory as well; needed mostly to build"}]}