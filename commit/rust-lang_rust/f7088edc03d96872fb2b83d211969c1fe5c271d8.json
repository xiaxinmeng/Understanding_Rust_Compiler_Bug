{"sha": "f7088edc03d96872fb2b83d211969c1fe5c271d8", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY3MDg4ZWRjMDNkOTY4NzJmYjJiODNkMjExOTY5YzFmZTVjMjcxZDg=", "commit": {"author": {"name": "Jack Moffitt", "email": "jack@metajack.im", "date": "2013-12-20T18:08:29Z"}, "committer": {"name": "Jack Moffitt", "email": "jack@metajack.im", "date": "2014-01-17T21:45:07Z"}, "message": "Change some rustpkg tests to use new crate_id syntax.", "tree": {"sha": "b4045115733a42cbc24630d71ca03956a6549112", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b4045115733a42cbc24630d71ca03956a6549112"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f7088edc03d96872fb2b83d211969c1fe5c271d8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f7088edc03d96872fb2b83d211969c1fe5c271d8", "html_url": "https://github.com/rust-lang/rust/commit/f7088edc03d96872fb2b83d211969c1fe5c271d8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f7088edc03d96872fb2b83d211969c1fe5c271d8/comments", "author": {"login": "metajack", "id": 28357, "node_id": "MDQ6VXNlcjI4MzU3", "avatar_url": "https://avatars.githubusercontent.com/u/28357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/metajack", "html_url": "https://github.com/metajack", "followers_url": "https://api.github.com/users/metajack/followers", "following_url": "https://api.github.com/users/metajack/following{/other_user}", "gists_url": "https://api.github.com/users/metajack/gists{/gist_id}", "starred_url": "https://api.github.com/users/metajack/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/metajack/subscriptions", "organizations_url": "https://api.github.com/users/metajack/orgs", "repos_url": "https://api.github.com/users/metajack/repos", "events_url": "https://api.github.com/users/metajack/events{/privacy}", "received_events_url": "https://api.github.com/users/metajack/received_events", "type": "User", "site_admin": false}, "committer": {"login": "metajack", "id": 28357, "node_id": "MDQ6VXNlcjI4MzU3", "avatar_url": "https://avatars.githubusercontent.com/u/28357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/metajack", "html_url": "https://github.com/metajack", "followers_url": "https://api.github.com/users/metajack/followers", "following_url": "https://api.github.com/users/metajack/following{/other_user}", "gists_url": "https://api.github.com/users/metajack/gists{/gist_id}", "starred_url": "https://api.github.com/users/metajack/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/metajack/subscriptions", "organizations_url": "https://api.github.com/users/metajack/orgs", "repos_url": "https://api.github.com/users/metajack/repos", "events_url": "https://api.github.com/users/metajack/events{/privacy}", "received_events_url": "https://api.github.com/users/metajack/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "363fa51c66a5cffc5e29a59dcfafc4222b07189c", "url": "https://api.github.com/repos/rust-lang/rust/commits/363fa51c66a5cffc5e29a59dcfafc4222b07189c", "html_url": "https://github.com/rust-lang/rust/commit/363fa51c66a5cffc5e29a59dcfafc4222b07189c"}], "stats": {"total": 8, "additions": 5, "deletions": 3}, "files": [{"sha": "bdae3c09be076dfcff22634cbd3bd71692ab5c34", "filename": "src/librustpkg/tests.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/f7088edc03d96872fb2b83d211969c1fe5c271d8/src%2Flibrustpkg%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f7088edc03d96872fb2b83d211969c1fe5c271d8/src%2Flibrustpkg%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustpkg%2Ftests.rs?ref=f7088edc03d96872fb2b83d211969c1fe5c271d8", "patch": "@@ -1894,9 +1894,11 @@ fn crateid_pointing_to_subdir() {\n     fs::mkdir_recursive(&foo_dir, io::UserRWX);\n     fs::mkdir_recursive(&bar_dir, io::UserRWX);\n     writeFile(&foo_dir.join(\"lib.rs\"),\n-              \"#[crate_id=\\\"mockgithub.com/mozilla/some_repo/extras/foo\\\"]; pub fn f() {}\");\n+              \"#[crate_id=\\\"mockgithub.com/mozilla/some_repo/extras/rust-foo#foo:0.0\\\"];\" +\n+              \"pub fn f() {}\");\n     writeFile(&bar_dir.join(\"lib.rs\"),\n-              \"#[crate_id=\\\"mockgithub.com/mozilla/some_repo/extras/bar\\\"]; pub fn g() {}\");\n+              \"#[crate_id=\\\"mockgithub.com/mozilla/some_repo/extras/rust-bar#bar:0.0\\\"];\" +\n+              \"pub fn g() {}\");\n \n     debug!(\"Creating a file in {}\", workspace.display());\n     let testpkg_dir = workspace.join_many([\"src\", \"testpkg-0.0\"]);\n@@ -2318,7 +2320,7 @@ fn find_sources_in_cwd() {\n     let source_dir = temp_dir.join(\"foo\");\n     fs::mkdir_recursive(&source_dir, io::UserRWX);\n     writeFile(&source_dir.join(\"main.rs\"),\n-              r#\"#[crate_id=\"foo\"]; fn main() { let _x = (); }\"#);\n+              r#\"#[crate_id=\"rust-foo#foo:0.0\"]; fn main() { let _x = (); }\"#);\n     command_line_test([~\"install\", ~\"foo\"], &source_dir);\n     assert_executable_exists(&source_dir.join(\".rust\"), \"foo\");\n }"}]}