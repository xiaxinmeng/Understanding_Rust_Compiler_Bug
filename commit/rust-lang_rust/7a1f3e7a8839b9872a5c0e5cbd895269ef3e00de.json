{"sha": "7a1f3e7a8839b9872a5c0e5cbd895269ef3e00de", "node_id": "C_kwDOAAsO6NoAKDdhMWYzZTdhODgzOWI5ODcyYTVjMGU1Y2JkODk1MjY5ZWYzZTAwZGU", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2023-05-15T08:58:39Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-05-15T08:58:39Z"}, "message": "Rollup merge of #111531 - chenyukang:yukang-fix-111416-ice, r=compiler-errors\n\nFix ice caused by shorthand fields in NoFieldsForFnCall\n\nFixes #111416", "tree": {"sha": "49dfb12fb4d96a42552a67c4c43fe27b0b8c861a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/49dfb12fb4d96a42552a67c4c43fe27b0b8c861a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7a1f3e7a8839b9872a5c0e5cbd895269ef3e00de", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJkYfQ/CRBK7hj4Ov3rIwAAGfYIAKYVMO0hcJgio1fk5dTEvwCs\npSUqIvmKCfMd7h4OppRg43yjmPzGCxxd9z1ZVdL2Pzy7ZgfF+5F6QiV02UKwQpLd\n+ISr4Rvksyu6gH7XHu2zBPQIoEEZ7p4hXeQQVDxY/8Wqxbh9wV/umg0gOXoYPNGB\n/koiVcxIENw1A6XXRj+KSMABvTZwaCCqL4nb+02DXMC1qwkOPFloD+nmuVOeSqcP\nrb74pXt2bgLrjyFJX/u8ZjW0Rh6tLW5+mLvsN1L0GKuPV5wzn6m11FPMXxvGyZEm\n98YGU3tVWQt8ZaYr5OVbunhXn1UYOGwBZ43Hpa4e+cfGZL1aC//UqJT4R1bM1Do=\n=yWJw\n-----END PGP SIGNATURE-----\n", "payload": "tree 49dfb12fb4d96a42552a67c4c43fe27b0b8c861a\nparent 28bc8745ad752e80a05a8b075e701c314a7b1040\nparent 83789b8b068ad38c6a3c937d0a2c6ca64e588c85\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1684141119 +0200\ncommitter GitHub <noreply@github.com> 1684141119 +0200\n\nRollup merge of #111531 - chenyukang:yukang-fix-111416-ice, r=compiler-errors\n\nFix ice caused by shorthand fields in NoFieldsForFnCall\n\nFixes #111416\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7a1f3e7a8839b9872a5c0e5cbd895269ef3e00de", "html_url": "https://github.com/rust-lang/rust/commit/7a1f3e7a8839b9872a5c0e5cbd895269ef3e00de", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7a1f3e7a8839b9872a5c0e5cbd895269ef3e00de/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "28bc8745ad752e80a05a8b075e701c314a7b1040", "url": "https://api.github.com/repos/rust-lang/rust/commits/28bc8745ad752e80a05a8b075e701c314a7b1040", "html_url": "https://github.com/rust-lang/rust/commit/28bc8745ad752e80a05a8b075e701c314a7b1040"}, {"sha": "83789b8b068ad38c6a3c937d0a2c6ca64e588c85", "url": "https://api.github.com/repos/rust-lang/rust/commits/83789b8b068ad38c6a3c937d0a2c6ca64e588c85", "html_url": "https://github.com/rust-lang/rust/commit/83789b8b068ad38c6a3c937d0a2c6ca64e588c85"}], "stats": {"total": 25, "additions": 25, "deletions": 0}, "files": [{"sha": "ee712a8e1b5db6530e1de2219a42a442bd632051", "filename": "compiler/rustc_parse/src/parser/expr.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7a1f3e7a8839b9872a5c0e5cbd895269ef3e00de/compiler%2Frustc_parse%2Fsrc%2Fparser%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7a1f3e7a8839b9872a5c0e5cbd895269ef3e00de/compiler%2Frustc_parse%2Fsrc%2Fparser%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_parse%2Fsrc%2Fparser%2Fexpr.rs?ref=7a1f3e7a8839b9872a5c0e5cbd895269ef3e00de", "patch": "@@ -1180,6 +1180,10 @@ impl<'a> Parser<'a> {\n                         self.restore_snapshot(snapshot);\n                         let close_paren = self.prev_token.span;\n                         let span = lo.to(close_paren);\n+                        // filter shorthand fields\n+                        let fields: Vec<_> =\n+                            fields.into_iter().filter(|field| !field.is_shorthand).collect();\n+\n                         if !fields.is_empty() &&\n                             // `token.kind` should not be compared here.\n                             // This is because the `snapshot.token.kind` is treated as the same as"}, {"sha": "cfd1b6b99ba7605104bc3f634484c2f072567eca", "filename": "tests/ui/parser/issues/issue-111416.rs", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/7a1f3e7a8839b9872a5c0e5cbd895269ef3e00de/tests%2Fui%2Fparser%2Fissues%2Fissue-111416.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7a1f3e7a8839b9872a5c0e5cbd895269ef3e00de/tests%2Fui%2Fparser%2Fissues%2Fissue-111416.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fparser%2Fissues%2Fissue-111416.rs?ref=7a1f3e7a8839b9872a5c0e5cbd895269ef3e00de", "patch": "@@ -0,0 +1,3 @@\n+fn main() {\n+    let my = monad_bind(mx, T: Try); //~ ERROR invalid `struct` delimiters or `fn` call arguments\n+}"}, {"sha": "ddacf4d6dfc310ba8ecf5ddd7e21f22a53ada318", "filename": "tests/ui/parser/issues/issue-111416.stderr", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/7a1f3e7a8839b9872a5c0e5cbd895269ef3e00de/tests%2Fui%2Fparser%2Fissues%2Fissue-111416.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7a1f3e7a8839b9872a5c0e5cbd895269ef3e00de/tests%2Fui%2Fparser%2Fissues%2Fissue-111416.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fparser%2Fissues%2Fissue-111416.stderr?ref=7a1f3e7a8839b9872a5c0e5cbd895269ef3e00de", "patch": "@@ -0,0 +1,18 @@\n+error: invalid `struct` delimiters or `fn` call arguments\n+  --> $DIR/issue-111416.rs:2:14\n+   |\n+LL |     let my = monad_bind(mx, T: Try);\n+   |              ^^^^^^^^^^^^^^^^^^^^^^\n+   |\n+help: if `monad_bind` is a struct, use braces as delimiters\n+   |\n+LL |     let my = monad_bind { mx, T: Try };\n+   |                         ~            ~\n+help: if `monad_bind` is a function, use the arguments directly\n+   |\n+LL -     let my = monad_bind(mx, T: Try);\n+LL +     let my = monad_bind(mx, Try);\n+   |\n+\n+error: aborting due to previous error\n+"}]}