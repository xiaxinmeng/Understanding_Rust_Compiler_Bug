{"sha": "12bf008ab12f87b2e6d4805681f5a389d9e2f425", "node_id": "MDY6Q29tbWl0NzI0NzEyOjEyYmYwMDhhYjEyZjg3YjJlNmQ0ODA1NjgxZjVhMzg5ZDllMmY0MjU=", "commit": {"author": {"name": "Fedor Sakharov", "email": "fedor.sakharov@gmail.com", "date": "2020-05-14T10:47:36Z"}, "committer": {"name": "Fedor Sakharov", "email": "fedor.sakharov@gmail.com", "date": "2020-05-14T10:47:36Z"}, "message": "Adds a param_idx helper", "tree": {"sha": "d0e4a40066d1ddbe0d9819a0c300480433bc8a79", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d0e4a40066d1ddbe0d9819a0c300480433bc8a79"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/12bf008ab12f87b2e6d4805681f5a389d9e2f425", "comment_count": 0, "verification": {"verified": false, "reason": "unknown_key", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEEOrvX5g4uaJk/ZAnkk9Q25ma/D+4FAl69IcgACgkQk9Q25ma/\nD+5DOgv/dh7vHk7ED5gzcSh2PtlBr96Kx/XMnavLVmuqOqL6Ch21ZXKwzYzivXVt\nbK7BJWELiTmYsP052d0/m8DLN78rvmb4Ulk8UNxEroy3RVryhBBMUzjIHzYVUx0B\na+AXgZLvI+z1WXCMFUOW5h4P1NXhVXqK4Tayey35fzZAw2JRrxQNQ9ibSYqTMTj3\nuxTYLeDadnvBxxP3mnK+0TREtjpwDOFp3ncwwQd8mXVw/Ul2gzhmG5GiQJLxm3kk\nDGe1ApmWgJGKHH5qMqWWeem90ohsQ0NXRDX015ghpz6tP24Uqt03GlU9r3Jx7U86\nYiu4QLxwReLmXvAhmRDhPsjO9PBsQOX6+PFiNqPV+g9tOXOMf6qzVJzuFCbXoFrv\nOvRl3fZa/CWZv761QK2AoDZmKimEk7ajfQtoE50jgo4whH8HrbXdHuOAMqYgUCQa\nRDGjh29TWVYCcu6lNK4K2D9VEDJBc+BoXS1/kselYVziCZf7CBzA5I38IyN1fxj4\nuNEmdDg4\n=nWeF\n-----END PGP SIGNATURE-----", "payload": "tree d0e4a40066d1ddbe0d9819a0c300480433bc8a79\nparent 2dfbec149f6de3fe8e64680521aa6076928b24f9\nauthor Fedor Sakharov <fedor.sakharov@gmail.com> 1589453256 +0300\ncommitter Fedor Sakharov <fedor.sakharov@gmail.com> 1589453256 +0300\n\nAdds a param_idx helper\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/12bf008ab12f87b2e6d4805681f5a389d9e2f425", "html_url": "https://github.com/rust-lang/rust/commit/12bf008ab12f87b2e6d4805681f5a389d9e2f425", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/12bf008ab12f87b2e6d4805681f5a389d9e2f425/comments", "author": {"login": "montekki", "id": 56672, "node_id": "MDQ6VXNlcjU2Njcy", "avatar_url": "https://avatars.githubusercontent.com/u/56672?v=4", "gravatar_id": "", "url": "https://api.github.com/users/montekki", "html_url": "https://github.com/montekki", "followers_url": "https://api.github.com/users/montekki/followers", "following_url": "https://api.github.com/users/montekki/following{/other_user}", "gists_url": "https://api.github.com/users/montekki/gists{/gist_id}", "starred_url": "https://api.github.com/users/montekki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/montekki/subscriptions", "organizations_url": "https://api.github.com/users/montekki/orgs", "repos_url": "https://api.github.com/users/montekki/repos", "events_url": "https://api.github.com/users/montekki/events{/privacy}", "received_events_url": "https://api.github.com/users/montekki/received_events", "type": "User", "site_admin": false}, "committer": {"login": "montekki", "id": 56672, "node_id": "MDQ6VXNlcjU2Njcy", "avatar_url": "https://avatars.githubusercontent.com/u/56672?v=4", "gravatar_id": "", "url": "https://api.github.com/users/montekki", "html_url": "https://github.com/montekki", "followers_url": "https://api.github.com/users/montekki/followers", "following_url": "https://api.github.com/users/montekki/following{/other_user}", "gists_url": "https://api.github.com/users/montekki/gists{/gist_id}", "starred_url": "https://api.github.com/users/montekki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/montekki/subscriptions", "organizations_url": "https://api.github.com/users/montekki/orgs", "repos_url": "https://api.github.com/users/montekki/repos", "events_url": "https://api.github.com/users/montekki/events{/privacy}", "received_events_url": "https://api.github.com/users/montekki/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2dfbec149f6de3fe8e64680521aa6076928b24f9", "url": "https://api.github.com/repos/rust-lang/rust/commits/2dfbec149f6de3fe8e64680521aa6076928b24f9", "html_url": "https://github.com/rust-lang/rust/commit/2dfbec149f6de3fe8e64680521aa6076928b24f9"}], "stats": {"total": 9, "additions": 7, "deletions": 2}, "files": [{"sha": "cdbf475b36415e5228d34654a552f37c874256d3", "filename": "crates/ra_hir/src/code_model.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/12bf008ab12f87b2e6d4805681f5a389d9e2f425/crates%2Fra_hir%2Fsrc%2Fcode_model.rs", "raw_url": "https://github.com/rust-lang/rust/raw/12bf008ab12f87b2e6d4805681f5a389d9e2f425/crates%2Fra_hir%2Fsrc%2Fcode_model.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fcode_model.rs?ref=12bf008ab12f87b2e6d4805681f5a389d9e2f425", "patch": "@@ -992,8 +992,8 @@ impl TypeParam {\n \n     pub fn default(self, db: &dyn HirDatabase) -> Option<Ty> {\n         let params = db.generic_defaults(self.id.parent);\n-        let local_idx: u32 = self.id.local_id.into_raw().into();\n-        params.get(local_idx as usize).map(|d| d.clone())\n+        let local_idx = hir_ty::param_idx(db, self.id)?;\n+        params.get(local_idx).map(|d| d.clone())\n     }\n }\n "}, {"sha": "ccc4348f4269b447ad0dc2524d9b6e98d96ed751", "filename": "crates/ra_hir_ty/src/lib.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/12bf008ab12f87b2e6d4805681f5a389d9e2f425/crates%2Fra_hir_ty%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/12bf008ab12f87b2e6d4805681f5a389d9e2f425/crates%2Fra_hir_ty%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir_ty%2Fsrc%2Flib.rs?ref=12bf008ab12f87b2e6d4805681f5a389d9e2f425", "patch": "@@ -427,6 +427,11 @@ impl Substs {\n     }\n }\n \n+/// Return an index of a parameter in the generic type parameter list by it's id.\n+pub fn param_idx(db: &dyn HirDatabase, id: TypeParamId) -> Option<usize> {\n+    generics(db.upcast(), id.parent).param_idx(id)\n+}\n+\n #[derive(Debug, Clone)]\n pub struct SubstsBuilder {\n     vec: Vec<Ty>,"}]}