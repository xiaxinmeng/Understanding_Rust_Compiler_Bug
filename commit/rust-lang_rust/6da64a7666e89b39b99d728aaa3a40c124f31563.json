{"sha": "6da64a7666e89b39b99d728aaa3a40c124f31563", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZkYTY0YTc2NjZlODliMzliOTlkNzI4YWFhM2E0MGMxMjRmMzE1NjM=", "commit": {"author": {"name": "Kyle Stachowicz", "email": "kylestach99@gmail.com", "date": "2018-05-18T23:53:39Z"}, "committer": {"name": "Kyle Stachowicz", "email": "kylestach99@gmail.com", "date": "2018-05-18T23:57:16Z"}, "message": "Default `unused_labels` to allow, move to \"unused\"", "tree": {"sha": "e5bf48427867efa10f9c979ea98b3d2e906b58b1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e5bf48427867efa10f9c979ea98b3d2e906b58b1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6da64a7666e89b39b99d728aaa3a40c124f31563", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6da64a7666e89b39b99d728aaa3a40c124f31563", "html_url": "https://github.com/rust-lang/rust/commit/6da64a7666e89b39b99d728aaa3a40c124f31563", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6da64a7666e89b39b99d728aaa3a40c124f31563/comments", "author": {"login": "kylestach", "id": 9097872, "node_id": "MDQ6VXNlcjkwOTc4NzI=", "avatar_url": "https://avatars.githubusercontent.com/u/9097872?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kylestach", "html_url": "https://github.com/kylestach", "followers_url": "https://api.github.com/users/kylestach/followers", "following_url": "https://api.github.com/users/kylestach/following{/other_user}", "gists_url": "https://api.github.com/users/kylestach/gists{/gist_id}", "starred_url": "https://api.github.com/users/kylestach/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kylestach/subscriptions", "organizations_url": "https://api.github.com/users/kylestach/orgs", "repos_url": "https://api.github.com/users/kylestach/repos", "events_url": "https://api.github.com/users/kylestach/events{/privacy}", "received_events_url": "https://api.github.com/users/kylestach/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kylestach", "id": 9097872, "node_id": "MDQ6VXNlcjkwOTc4NzI=", "avatar_url": "https://avatars.githubusercontent.com/u/9097872?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kylestach", "html_url": "https://github.com/kylestach", "followers_url": "https://api.github.com/users/kylestach/followers", "following_url": "https://api.github.com/users/kylestach/following{/other_user}", "gists_url": "https://api.github.com/users/kylestach/gists{/gist_id}", "starred_url": "https://api.github.com/users/kylestach/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kylestach/subscriptions", "organizations_url": "https://api.github.com/users/kylestach/orgs", "repos_url": "https://api.github.com/users/kylestach/repos", "events_url": "https://api.github.com/users/kylestach/events{/privacy}", "received_events_url": "https://api.github.com/users/kylestach/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5586cd80e244936283b913ab3cf0f3626eec3136", "url": "https://api.github.com/repos/rust-lang/rust/commits/5586cd80e244936283b913ab3cf0f3626eec3136", "html_url": "https://github.com/rust-lang/rust/commit/5586cd80e244936283b913ab3cf0f3626eec3136"}], "stats": {"total": 37, "additions": 26, "deletions": 11}, "files": [{"sha": "79b4ec61bd081ba5eba79fcd4d3eb2094570f969", "filename": "src/librustc/lint/builtin.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6da64a7666e89b39b99d728aaa3a40c124f31563/src%2Flibrustc%2Flint%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6da64a7666e89b39b99d728aaa3a40c124f31563/src%2Flibrustc%2Flint%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Flint%2Fbuiltin.rs?ref=6da64a7666e89b39b99d728aaa3a40c124f31563", "patch": "@@ -281,7 +281,7 @@ declare_lint! {\n \n declare_lint! {\n     pub UNUSED_LABELS,\n-    Warn,\n+    Allow,\n     \"detects labels that are never used\"\n }\n "}, {"sha": "69825027b052bc77ed5fb17dabaf37915720e9c7", "filename": "src/librustc_lint/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6da64a7666e89b39b99d728aaa3a40c124f31563/src%2Flibrustc_lint%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6da64a7666e89b39b99d728aaa3a40c124f31563/src%2Flibrustc_lint%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2Flib.rs?ref=6da64a7666e89b39b99d728aaa3a40c124f31563", "patch": "@@ -177,6 +177,7 @@ pub fn register_builtins(store: &mut lint::LintStore, sess: Option<&Session>) {\n                     UNUSED_DOC_COMMENT,\n                     UNUSED_EXTERN_CRATES,\n                     UNUSED_FEATURES,\n+                    UNUSED_LABELS,\n                     UNUSED_PARENS);\n \n     add_lint_group!(sess,"}, {"sha": "23add604da6ab29feda8ae149b6c9313145a2018", "filename": "src/test/ui/lint/unused_labels.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/6da64a7666e89b39b99d728aaa3a40c124f31563/src%2Ftest%2Fui%2Flint%2Funused_labels.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6da64a7666e89b39b99d728aaa3a40c124f31563/src%2Ftest%2Fui%2Flint%2Funused_labels.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Funused_labels.rs?ref=6da64a7666e89b39b99d728aaa3a40c124f31563", "patch": "@@ -15,6 +15,7 @@\n // compile-pass\n \n #![feature(label_break_value)]\n+#![warn(unused_labels)]\n \n fn main() {\n     'unused_while_label: while 0 == 0 {\n@@ -55,6 +56,15 @@ fn main() {\n         }\n     }\n \n+    // You should be able to break the same label many times\n+    'many_used: loop {\n+        if true {\n+            break 'many_used;\n+        } else {\n+            break 'many_used;\n+        }\n+    }\n+\n     // Test breaking many times with the same inner label doesn't break the\n     // warning on the outer label\n     'many_used_shadowed: for _ in 0..10 {"}, {"sha": "825f5e281f0b9d784ef42fb19ace6d97f5c76b3e", "filename": "src/test/ui/lint/unused_labels.stderr", "status": "modified", "additions": 14, "deletions": 10, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/6da64a7666e89b39b99d728aaa3a40c124f31563/src%2Ftest%2Fui%2Flint%2Funused_labels.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6da64a7666e89b39b99d728aaa3a40c124f31563/src%2Ftest%2Fui%2Flint%2Funused_labels.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Funused_labels.stderr?ref=6da64a7666e89b39b99d728aaa3a40c124f31563", "patch": "@@ -1,55 +1,59 @@\n warning: unused label\n-  --> $DIR/unused_labels.rs:20:5\n+  --> $DIR/unused_labels.rs:21:5\n    |\n LL |     'unused_while_label: while 0 == 0 {\n    |     ^^^^^^^^^^^^^^^^^^^\n    |\n-   = note: #[warn(unused_labels)] on by default\n+note: lint level defined here\n+  --> $DIR/unused_labels.rs:18:9\n+   |\n+LL | #![warn(unused_labels)]\n+   |         ^^^^^^^^^^^^^\n \n warning: unused label\n-  --> $DIR/unused_labels.rs:25:5\n+  --> $DIR/unused_labels.rs:26:5\n    |\n LL |     'unused_while_let_label: while let Some(_) = opt {\n    |     ^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused label\n-  --> $DIR/unused_labels.rs:29:5\n+  --> $DIR/unused_labels.rs:30:5\n    |\n LL |     'unused_for_label: for _ in 0..10 {\n    |     ^^^^^^^^^^^^^^^^^\n \n warning: unused label\n-  --> $DIR/unused_labels.rs:45:9\n+  --> $DIR/unused_labels.rs:46:9\n    |\n LL |         'unused_loop_label_inner_2: for _ in 0..10 {\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused label\n-  --> $DIR/unused_labels.rs:51:5\n+  --> $DIR/unused_labels.rs:52:5\n    |\n LL |     'unused_loop_label_outer_3: for _ in 0..10 {\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused label\n-  --> $DIR/unused_labels.rs:60:5\n+  --> $DIR/unused_labels.rs:70:5\n    |\n LL |     'many_used_shadowed: for _ in 0..10 {\n    |     ^^^^^^^^^^^^^^^^^^^\n \n warning: unused label\n-  --> $DIR/unused_labels.rs:72:5\n+  --> $DIR/unused_labels.rs:82:5\n    |\n LL |     'unused_loop_label: loop {\n    |     ^^^^^^^^^^^^^^^^^^\n \n warning: unused label\n-  --> $DIR/unused_labels.rs:78:5\n+  --> $DIR/unused_labels.rs:88:5\n    |\n LL |     'unused_block_label: {\n    |     ^^^^^^^^^^^^^^^^^^^\n \n warning: label name `'many_used_shadowed` shadows a label name that is already in scope\n-  --> $DIR/unused_labels.rs:62:9\n+  --> $DIR/unused_labels.rs:72:9\n    |\n LL |     'many_used_shadowed: for _ in 0..10 {\n    |     ------------------- first declared here"}]}