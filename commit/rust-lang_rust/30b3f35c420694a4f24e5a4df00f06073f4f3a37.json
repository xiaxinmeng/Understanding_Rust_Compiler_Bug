{"sha": "30b3f35c420694a4f24e5a4df00f06073f4f3a37", "node_id": "C_kwDOAAsO6NoAKDMwYjNmMzVjNDIwNjk0YTRmMjRlNWE0ZGYwMGYwNjA3M2Y0ZjNhMzc", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-02-17T13:08:46Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-02-17T13:08:46Z"}, "message": "Auto merge of #93577 - nikic:llvm-14, r=nagisa\n\nUpgrade to LLVM 14\n\nLLVM patch state:\n * [x] https://github.com/llvm/llvm-project/commit/a55727f334b39600bfc71144b11b42aae6b94e0b Backported.\n * [x] https://github.com/rust-lang/llvm-project/commit/c3c82dc12402dd41441180c0c6cf7aed7e330c53 Backported as https://github.com/llvm/llvm-project/commit/917c47b3bf0dfc45a2a5ba12c1397d647ecf4017.\n * [x] https://github.com/rust-lang/llvm-project/commit/6e8f9ab632d12271355d10d34c9835a7ba14e4b9 No plan to upstream.\n * [x] https://github.com/llvm/llvm-project/commit/319f4b2d52e31b000db75a0a2484b5f2ab90534a Backported.\n * [x] https://github.com/rust-lang/llvm-project/commit/8b2c25d321f877161f85218479e2d1317d770e18 No plan to upstream.\n * [x] https://github.com/rust-lang/llvm-project/commit/75fef2efd427362c8f16b2d09e6ebf44069e3919 No plan to upstream.\n * [ ] https://github.com/rust-lang/llvm-project/commit/adef757547de5a570d9f6a00d3e6ac16c666ab79 Upstreamed as https://github.com/llvm/llvm-project/commit/2d2ef384b2f6e723edb793d08f52e7f4dc94ba3a. Needs backport.\n * [x] https://github.com/rust-lang/llvm-project/commit/4b7c1b4910e9fa9e04f23f06be078e168ef4c0ee No plan to upstream.\n * [x] https://github.com/rust-lang/llvm-project/commit/3f5ab0c061adb723f25b94243828b6b5407720c8 No plan to upstream.\n * [x] https://github.com/rust-lang/llvm-project/commit/514d05500e0e15e358f05f5c4cec78a805858f8e No plan to upstream.\n * [ ] https://github.com/rust-lang/llvm-project/commit/54c586958564582b3341d1838a5de86541e5fecf Under review at https://reviews.llvm.org/D119695 and https://reviews.llvm.org/D119856.\n\nRelease timeline:\n * LLVM 14.0.0 final planned for Mar 15.\n * Rust 1.60.0 planned for Apr 7.\n\nCompile-time:\n  * https://perf.rust-lang.org/compare.html?start=250384edc5d78533e993f38c60d64e42b21684b2&end=b87df8d2c7c5d9ac448c585de10927ab2ee1b864\n  * A slight improvement on average, though no big changes either way.\n  * There are some larger max-rss improvements.\n\nr? `@ghost`", "tree": {"sha": "16b681dfffc954d638880f0220f0e831a7d05196", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/16b681dfffc954d638880f0220f0e831a7d05196"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/30b3f35c420694a4f24e5a4df00f06073f4f3a37", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/30b3f35c420694a4f24e5a4df00f06073f4f3a37", "html_url": "https://github.com/rust-lang/rust/commit/30b3f35c420694a4f24e5a4df00f06073f4f3a37", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/30b3f35c420694a4f24e5a4df00f06073f4f3a37/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "582b6964a8868c9714881d9821d08415a8f4f13b", "url": "https://api.github.com/repos/rust-lang/rust/commits/582b6964a8868c9714881d9821d08415a8f4f13b", "html_url": "https://github.com/rust-lang/rust/commit/582b6964a8868c9714881d9821d08415a8f4f13b"}, {"sha": "75636bb6cf09c03742e62ba680abf9376ab0d321", "url": "https://api.github.com/repos/rust-lang/rust/commits/75636bb6cf09c03742e62ba680abf9376ab0d321", "html_url": "https://github.com/rust-lang/rust/commit/75636bb6cf09c03742e62ba680abf9376ab0d321"}], "stats": {"total": 84, "additions": 54, "deletions": 30}, "files": [{"sha": "9f54ed5bdab6d3abf747a47bc63c1931d10ce862", "filename": ".gitmodules", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/30b3f35c420694a4f24e5a4df00f06073f4f3a37/.gitmodules", "raw_url": "https://github.com/rust-lang/rust/raw/30b3f35c420694a4f24e5a4df00f06073f4f3a37/.gitmodules", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.gitmodules?ref=30b3f35c420694a4f24e5a4df00f06073f4f3a37", "patch": "@@ -34,7 +34,7 @@\n [submodule \"src/llvm-project\"]\n \tpath = src/llvm-project\n \turl = https://github.com/rust-lang/llvm-project.git\n-\tbranch = rustc/13.0-2021-09-30\n+\tbranch = rustc/14.0-2022-02-09\n [submodule \"src/doc/embedded-book\"]\n \tpath = src/doc/embedded-book\n \turl = https://github.com/rust-embedded/book.git"}, {"sha": "fd65ed8d4a2d6fdf857dcf4f941016c140763144", "filename": "Cargo.lock", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/30b3f35c420694a4f24e5a4df00f06073f4f3a37/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/30b3f35c420694a4f24e5a4df00f06073f4f3a37/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=30b3f35c420694a4f24e5a4df00f06073f4f3a37", "patch": "@@ -740,9 +740,9 @@ dependencies = [\n \n [[package]]\n name = \"compiler_builtins\"\n-version = \"0.1.69\"\n+version = \"0.1.70\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"ac0d1d6b2307c15fd27af2bb41234b4ebddeae69f33714bfbdb44b3b5a6e3efe\"\n+checksum = \"80873f979f0a344a4ade87c2f70d9ccf5720b83b10c97ec7cd745895d021e85a\"\n dependencies = [\n  \"cc\",\n  \"rustc-std-workspace-core\","}, {"sha": "ec68f6eb0f85dcd4d29b595231d3a7d94dcc6c13", "filename": "compiler/rustc_codegen_llvm/src/context.rs", "status": "modified", "additions": 14, "deletions": 1, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/30b3f35c420694a4f24e5a4df00f06073f4f3a37/compiler%2Frustc_codegen_llvm%2Fsrc%2Fcontext.rs", "raw_url": "https://github.com/rust-lang/rust/raw/30b3f35c420694a4f24e5a4df00f06073f4f3a37/compiler%2Frustc_codegen_llvm%2Fsrc%2Fcontext.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_llvm%2Fsrc%2Fcontext.rs?ref=30b3f35c420694a4f24e5a4df00f06073f4f3a37", "patch": "@@ -135,7 +135,8 @@ pub unsafe fn create_module<'ll>(\n     let llmod = llvm::LLVMModuleCreateWithNameInContext(mod_name.as_ptr(), llcx);\n \n     let mut target_data_layout = sess.target.data_layout.clone();\n-    if llvm_util::get_version() < (13, 0, 0) {\n+    let llvm_version = llvm_util::get_version();\n+    if llvm_version < (13, 0, 0) {\n         if sess.target.arch == \"powerpc64\" {\n             target_data_layout = target_data_layout.replace(\"-S128\", \"\");\n         }\n@@ -146,6 +147,18 @@ pub unsafe fn create_module<'ll>(\n             target_data_layout = \"e-m:e-p:64:64-i64:64-n32:64-S128\".to_string();\n         }\n     }\n+    if llvm_version < (14, 0, 0) {\n+        if sess.target.llvm_target == \"i686-pc-windows-msvc\"\n+            || sess.target.llvm_target == \"i586-pc-windows-msvc\"\n+        {\n+            target_data_layout =\n+                \"e-m:x-p:32:32-p270:32:32-p271:32:32-p272:64:64-i64:64-f80:32-n8:16:32-a:0:32-S32\"\n+                    .to_string();\n+        }\n+        if sess.target.arch == \"wasm32\" {\n+            target_data_layout = target_data_layout.replace(\"-p10:8:8-p20:8:8\", \"\");\n+        }\n+    }\n \n     // Ensure the data-layout values hardcoded remain the defaults.\n     if sess.target.is_builtin {"}, {"sha": "b1c14c7e44bd0031a6d75e6ca0723bbac6af7e97", "filename": "compiler/rustc_codegen_llvm/src/llvm_util.rs", "status": "modified", "additions": 24, "deletions": 16, "changes": 40, "blob_url": "https://github.com/rust-lang/rust/blob/30b3f35c420694a4f24e5a4df00f06073f4f3a37/compiler%2Frustc_codegen_llvm%2Fsrc%2Fllvm_util.rs", "raw_url": "https://github.com/rust-lang/rust/raw/30b3f35c420694a4f24e5a4df00f06073f4f3a37/compiler%2Frustc_codegen_llvm%2Fsrc%2Fllvm_util.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_llvm%2Fsrc%2Fllvm_util.rs?ref=30b3f35c420694a4f24e5a4df00f06073f4f3a37", "patch": "@@ -217,24 +217,32 @@ pub fn check_tied_features(\n \n pub fn target_features(sess: &Session) -> Vec<Symbol> {\n     let target_machine = create_informational_target_machine(sess);\n-    supported_target_features(sess)\n-        .iter()\n-        .filter_map(\n-            |&(feature, gate)| {\n+    let mut features: Vec<Symbol> =\n+        supported_target_features(sess)\n+            .iter()\n+            .filter_map(|&(feature, gate)| {\n                 if sess.is_nightly_build() || gate.is_none() { Some(feature) } else { None }\n-            },\n-        )\n-        .filter(|feature| {\n-            for llvm_feature in to_llvm_feature(sess, feature) {\n-                let cstr = CString::new(llvm_feature).unwrap();\n-                if unsafe { llvm::LLVMRustHasFeature(target_machine, cstr.as_ptr()) } {\n-                    return true;\n+            })\n+            .filter(|feature| {\n+                for llvm_feature in to_llvm_feature(sess, feature) {\n+                    let cstr = CString::new(llvm_feature).unwrap();\n+                    if unsafe { llvm::LLVMRustHasFeature(target_machine, cstr.as_ptr()) } {\n+                        return true;\n+                    }\n                 }\n-            }\n-            false\n-        })\n-        .map(|feature| Symbol::intern(feature))\n-        .collect()\n+                false\n+            })\n+            .map(|feature| Symbol::intern(feature))\n+            .collect();\n+\n+    // LLVM 14 changed the ABI for i128 arguments to __float/__fix builtins on Win64\n+    // (see https://reviews.llvm.org/D110413). This unstable target feature is intended for use\n+    // by compiler-builtins, to export the builtins with the expected, LLVM-version-dependent ABI.\n+    // The target feature can be dropped once we no longer support older LLVM versions.\n+    if sess.is_nightly_build() && get_version() >= (14, 0, 0) {\n+        features.push(Symbol::intern(\"llvm14-builtins-abi\"));\n+    }\n+    features\n }\n \n pub fn print_version() {"}, {"sha": "174294895bf7a435d05b706ab1b0acd3ebd17a30", "filename": "compiler/rustc_target/src/spec/i686_pc_windows_msvc.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/30b3f35c420694a4f24e5a4df00f06073f4f3a37/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_pc_windows_msvc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/30b3f35c420694a4f24e5a4df00f06073f4f3a37/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_pc_windows_msvc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_pc_windows_msvc.rs?ref=30b3f35c420694a4f24e5a4df00f06073f4f3a37", "patch": "@@ -24,7 +24,7 @@ pub fn target() -> Target {\n         llvm_target: \"i686-pc-windows-msvc\".to_string(),\n         pointer_width: 32,\n         data_layout: \"e-m:x-p:32:32-p270:32:32-p271:32:32-p272:64:64-\\\n-            i64:64-f80:32-n8:16:32-a:0:32-S32\"\n+            i64:64-f80:128-n8:16:32-a:0:32-S32\"\n             .to_string(),\n         arch: \"x86\".to_string(),\n         options: base,"}, {"sha": "e2f65e7a7c938c102182ab89f00d2e57d5e6b1d8", "filename": "compiler/rustc_target/src/spec/i686_uwp_windows_msvc.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/30b3f35c420694a4f24e5a4df00f06073f4f3a37/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_uwp_windows_msvc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/30b3f35c420694a4f24e5a4df00f06073f4f3a37/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_uwp_windows_msvc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_uwp_windows_msvc.rs?ref=30b3f35c420694a4f24e5a4df00f06073f4f3a37", "patch": "@@ -9,7 +9,7 @@ pub fn target() -> Target {\n         llvm_target: \"i686-pc-windows-msvc\".to_string(),\n         pointer_width: 32,\n         data_layout: \"e-m:x-p:32:32-p270:32:32-p271:32:32-p272:64:64-\\\n-            i64:64-f80:32-n8:16:32-a:0:32-S32\"\n+            i64:64-f80:128-n8:16:32-a:0:32-S32\"\n             .to_string(),\n         arch: \"x86\".to_string(),\n         options: base,"}, {"sha": "8fcdbc146af93dcb00eb785076ee77882bee6983", "filename": "compiler/rustc_target/src/spec/wasm32_unknown_emscripten.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/30b3f35c420694a4f24e5a4df00f06073f4f3a37/compiler%2Frustc_target%2Fsrc%2Fspec%2Fwasm32_unknown_emscripten.rs", "raw_url": "https://github.com/rust-lang/rust/raw/30b3f35c420694a4f24e5a4df00f06073f4f3a37/compiler%2Frustc_target%2Fsrc%2Fspec%2Fwasm32_unknown_emscripten.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fwasm32_unknown_emscripten.rs?ref=30b3f35c420694a4f24e5a4df00f06073f4f3a37", "patch": "@@ -43,7 +43,8 @@ pub fn target() -> Target {\n     Target {\n         llvm_target: \"wasm32-unknown-emscripten\".to_string(),\n         pointer_width: 32,\n-        data_layout: \"e-m:e-p:32:32-i64:64-f128:64-n32:64-S128-ni:1:10:20\".to_string(),\n+        data_layout: \"e-m:e-p:32:32-p10:8:8-p20:8:8-i64:64-f128:64-n32:64-S128-ni:1:10:20\"\n+            .to_string(),\n         arch: \"wasm32\".to_string(),\n         options: opts,\n     }"}, {"sha": "e50cf9740947549f4fb8486cd19d7844bc5a6b96", "filename": "compiler/rustc_target/src/spec/wasm32_unknown_unknown.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/30b3f35c420694a4f24e5a4df00f06073f4f3a37/compiler%2Frustc_target%2Fsrc%2Fspec%2Fwasm32_unknown_unknown.rs", "raw_url": "https://github.com/rust-lang/rust/raw/30b3f35c420694a4f24e5a4df00f06073f4f3a37/compiler%2Frustc_target%2Fsrc%2Fspec%2Fwasm32_unknown_unknown.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fwasm32_unknown_unknown.rs?ref=30b3f35c420694a4f24e5a4df00f06073f4f3a37", "patch": "@@ -54,7 +54,7 @@ pub fn target() -> Target {\n     Target {\n         llvm_target: \"wasm32-unknown-unknown\".to_string(),\n         pointer_width: 32,\n-        data_layout: \"e-m:e-p:32:32-i64:64-n32:64-S128-ni:1:10:20\".to_string(),\n+        data_layout: \"e-m:e-p:32:32-p10:8:8-p20:8:8-i64:64-n32:64-S128-ni:1:10:20\".to_string(),\n         arch: \"wasm32\".to_string(),\n         options,\n     }"}, {"sha": "a4b81c9a2788f939eaf93d25f36c103baa8dd522", "filename": "compiler/rustc_target/src/spec/wasm32_wasi.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/30b3f35c420694a4f24e5a4df00f06073f4f3a37/compiler%2Frustc_target%2Fsrc%2Fspec%2Fwasm32_wasi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/30b3f35c420694a4f24e5a4df00f06073f4f3a37/compiler%2Frustc_target%2Fsrc%2Fspec%2Fwasm32_wasi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fwasm32_wasi.rs?ref=30b3f35c420694a4f24e5a4df00f06073f4f3a37", "patch": "@@ -109,7 +109,7 @@ pub fn target() -> Target {\n     Target {\n         llvm_target: \"wasm32-wasi\".to_string(),\n         pointer_width: 32,\n-        data_layout: \"e-m:e-p:32:32-i64:64-n32:64-S128-ni:1:10:20\".to_string(),\n+        data_layout: \"e-m:e-p:32:32-p10:8:8-p20:8:8-i64:64-n32:64-S128-ni:1:10:20\".to_string(),\n         arch: \"wasm32\".to_string(),\n         options,\n     }"}, {"sha": "013687ce3776e89acc195b70745873e948e79f7b", "filename": "src/bootstrap/dist.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/30b3f35c420694a4f24e5a4df00f06073f4f3a37/src%2Fbootstrap%2Fdist.rs", "raw_url": "https://github.com/rust-lang/rust/raw/30b3f35c420694a4f24e5a4df00f06073f4f3a37/src%2Fbootstrap%2Fdist.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fdist.rs?ref=30b3f35c420694a4f24e5a4df00f06073f4f3a37", "patch": "@@ -734,6 +734,8 @@ fn copy_src_dirs(\n             \"llvm-project\\\\llvm\",\n             \"llvm-project/compiler-rt\",\n             \"llvm-project\\\\compiler-rt\",\n+            \"llvm-project/cmake\",\n+            \"llvm-project\\\\cmake\",\n         ];\n         if spath.contains(\"llvm-project\")\n             && !spath.ends_with(\"llvm-project\")"}, {"sha": "e29ac13bc97e26f886c3bfe72f9135e994c3cd0a", "filename": "src/llvm-project", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": null, "raw_url": null, "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fllvm-project?ref=30b3f35c420694a4f24e5a4df00f06073f4f3a37", "patch": "@@ -1 +1 @@\n-Subproject commit fdc8f411ec9253d4eeb7a572b058be4f2131fd1c\n+Subproject commit e29ac13bc97e26f886c3bfe72f9135e994c3cd0a"}, {"sha": "84e67e53ea4c6512eef386723e4bdb4e9f49e4f7", "filename": "src/test/run-make-fulldeps/coverage-llvmir/filecheck.testprog.txt", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/30b3f35c420694a4f24e5a4df00f06073f4f3a37/src%2Ftest%2Frun-make-fulldeps%2Fcoverage-llvmir%2Ffilecheck.testprog.txt", "raw_url": "https://github.com/rust-lang/rust/raw/30b3f35c420694a4f24e5a4df00f06073f4f3a37/src%2Ftest%2Frun-make-fulldeps%2Fcoverage-llvmir%2Ffilecheck.testprog.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Fcoverage-llvmir%2Ffilecheck.testprog.txt?ref=30b3f35c420694a4f24e5a4df00f06073f4f3a37", "patch": "@@ -15,14 +15,14 @@ CHECK:        @__profc__R{{[a-zA-Z0-9_]+}}testprog14will_be_called = {{private|i\n CHECK-SAME:   section \"[[INSTR_PROF_CNTS]]\"{{.*}}, align 8\n \n CHECK:        @__profd__R{{[a-zA-Z0-9_]+}}testprog14will_be_called = {{private|internal}} global\n-CHECK-SAME:   @__profc__R{{[a-zA-Z0-9_]+}}testprog14will_be_called,\n+CHECK-SAME:   @__profc__R{{[a-zA-Z0-9_]+}}testprog14will_be_called\n CHECK-SAME:   section \"[[INSTR_PROF_DATA]]\"{{.*}}, align 8\n \n CHECK:        @__profc__R{{[a-zA-Z0-9_]+}}testprog4main = {{private|internal}} global\n CHECK-SAME:   section \"[[INSTR_PROF_CNTS]]\"{{.*}}, align 8\n \n CHECK:        @__profd__R{{[a-zA-Z0-9_]+}}testprog4main = {{private|internal}} global\n-CHECK-SAME:   @__profc__R{{[a-zA-Z0-9_]+}}testprog4main,\n+CHECK-SAME:   @__profc__R{{[a-zA-Z0-9_]+}}testprog4main\n CHECK-SAME:   section \"[[INSTR_PROF_DATA]]\"{{.*}}, align 8\n \n CHECK:        @__llvm_prf_nm = private constant"}, {"sha": "d4b39c670162de049294613d48660d5cf1f65862", "filename": "src/test/ui/optimization-remark.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/30b3f35c420694a4f24e5a4df00f06073f4f3a37/src%2Ftest%2Fui%2Foptimization-remark.rs", "raw_url": "https://github.com/rust-lang/rust/raw/30b3f35c420694a4f24e5a4df00f06073f4f3a37/src%2Ftest%2Fui%2Foptimization-remark.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Foptimization-remark.rs?ref=30b3f35c420694a4f24e5a4df00f06073f4f3a37", "patch": "@@ -1,6 +1,6 @@\n // build-pass\n // ignore-pass\n-// no-system-llvm\n+// min-llvm-version: 14.0.0\n // revisions: all inline merge1 merge2\n // compile-flags: --crate-type=lib -Cdebuginfo=1 -Copt-level=2\n //\n@@ -14,7 +14,7 @@\n // [merge1] compile-flags: -Cremark=all    -Cremark=giraffe\n // [merge2] compile-flags: -Cremark=inline -Cremark=giraffe\n //\n-// error-pattern: inline: f not inlined into g\n+// error-pattern: inline: 'f' not inlined into 'g'\n // dont-check-compiler-stderr\n \n #[no_mangle]"}]}