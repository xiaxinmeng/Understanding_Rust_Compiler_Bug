{"sha": "7b5543d7b6155c4e8dd44e0d7ed17a076db48c60", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdiNTU0M2Q3YjYxNTVjNGU4ZGQ0NGUwZDdlZDE3YTA3NmRiNDhjNjA=", "commit": {"author": {"name": "Ed Schouten", "email": "ed@nuxi.nl", "date": "2018-01-01T18:30:19Z"}, "committer": {"name": "Ed Schouten", "email": "ed@nuxi.nl", "date": "2018-01-01T18:30:19Z"}, "message": "Move the TestPaths structure from libtest to compiletest.\n\nThis structure doesn't seem to be used by libtest itself. It is used by\ncompiletest, but never passed on to anything externally. This makes it\neasier to get the testing framework to work for CloudABI crossbuilds, as\nCloudABI currently lacks PathBuf, which is used by TestPaths.", "tree": {"sha": "472a799c49825414735378f292c1f33c5e6363e3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/472a799c49825414735378f292c1f33c5e6363e3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7b5543d7b6155c4e8dd44e0d7ed17a076db48c60", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7b5543d7b6155c4e8dd44e0d7ed17a076db48c60", "html_url": "https://github.com/rust-lang/rust/commit/7b5543d7b6155c4e8dd44e0d7ed17a076db48c60", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7b5543d7b6155c4e8dd44e0d7ed17a076db48c60/comments", "author": {"login": "EdSchouten", "id": 736085, "node_id": "MDQ6VXNlcjczNjA4NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/736085?v=4", "gravatar_id": "", "url": "https://api.github.com/users/EdSchouten", "html_url": "https://github.com/EdSchouten", "followers_url": "https://api.github.com/users/EdSchouten/followers", "following_url": "https://api.github.com/users/EdSchouten/following{/other_user}", "gists_url": "https://api.github.com/users/EdSchouten/gists{/gist_id}", "starred_url": "https://api.github.com/users/EdSchouten/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/EdSchouten/subscriptions", "organizations_url": "https://api.github.com/users/EdSchouten/orgs", "repos_url": "https://api.github.com/users/EdSchouten/repos", "events_url": "https://api.github.com/users/EdSchouten/events{/privacy}", "received_events_url": "https://api.github.com/users/EdSchouten/received_events", "type": "User", "site_admin": false}, "committer": {"login": "EdSchouten", "id": 736085, "node_id": "MDQ6VXNlcjczNjA4NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/736085?v=4", "gravatar_id": "", "url": "https://api.github.com/users/EdSchouten", "html_url": "https://github.com/EdSchouten", "followers_url": "https://api.github.com/users/EdSchouten/followers", "following_url": "https://api.github.com/users/EdSchouten/following{/other_user}", "gists_url": "https://api.github.com/users/EdSchouten/gists{/gist_id}", "starred_url": "https://api.github.com/users/EdSchouten/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/EdSchouten/subscriptions", "organizations_url": "https://api.github.com/users/EdSchouten/orgs", "repos_url": "https://api.github.com/users/EdSchouten/repos", "events_url": "https://api.github.com/users/EdSchouten/events{/privacy}", "received_events_url": "https://api.github.com/users/EdSchouten/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "79b25c666fecc908539087918131d6a56e669312", "url": "https://api.github.com/repos/rust-lang/rust/commits/79b25c666fecc908539087918131d6a56e669312", "html_url": "https://github.com/rust-lang/rust/commit/79b25c666fecc908539087918131d6a56e669312"}], "stats": {"total": 23, "additions": 11, "deletions": 12}, "files": [{"sha": "839f697b39cfaf5a089edbb1469d7536dd5cff1b", "filename": "src/libtest/lib.rs", "status": "modified", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/7b5543d7b6155c4e8dd44e0d7ed17a076db48c60/src%2Flibtest%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7b5543d7b6155c4e8dd44e0d7ed17a076db48c60/src%2Flibtest%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibtest%2Flib.rs?ref=7b5543d7b6155c4e8dd44e0d7ed17a076db48c60", "patch": "@@ -203,13 +203,6 @@ pub struct TestDesc {\n     pub allow_fail: bool,\n }\n \n-#[derive(Clone)]\n-pub struct TestPaths {\n-    pub file: PathBuf,         // e.g., compile-test/foo/bar/baz.rs\n-    pub base: PathBuf,         // e.g., compile-test, auxiliary\n-    pub relative_dir: PathBuf, // e.g., foo/bar\n-}\n-\n #[derive(Debug)]\n pub struct TestDescAndFn {\n     pub desc: TestDesc,"}, {"sha": "1d8cef05b7dd3408f0e330c0cd529d8f49a89faf", "filename": "src/tools/compiletest/src/common.rs", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/7b5543d7b6155c4e8dd44e0d7ed17a076db48c60/src%2Ftools%2Fcompiletest%2Fsrc%2Fcommon.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7b5543d7b6155c4e8dd44e0d7ed17a076db48c60/src%2Ftools%2Fcompiletest%2Fsrc%2Fcommon.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fcommon.rs?ref=7b5543d7b6155c4e8dd44e0d7ed17a076db48c60", "patch": "@@ -13,7 +13,7 @@ use std::fmt;\n use std::str::FromStr;\n use std::path::PathBuf;\n \n-use test::{ColorConfig, TestPaths};\n+use test::ColorConfig;\n \n #[derive(Clone, Copy, PartialEq, Debug)]\n pub enum Mode {\n@@ -222,6 +222,13 @@ pub struct Config {\n     pub nodejs: Option<String>,\n }\n \n+#[derive(Clone)]\n+pub struct TestPaths {\n+    pub file: PathBuf,         // e.g., compile-test/foo/bar/baz.rs\n+    pub base: PathBuf,         // e.g., compile-test, auxiliary\n+    pub relative_dir: PathBuf, // e.g., foo/bar\n+}\n+\n /// Used by `ui` tests to generate things like `foo.stderr` from `foo.rs`.\n pub fn expected_output_path(testpaths: &TestPaths, revision: Option<&str>, kind: &str) -> PathBuf {\n     assert!(UI_EXTENSIONS.contains(&kind));"}, {"sha": "533aaf9cd27353bf9e0b78eab246f8df8728da72", "filename": "src/tools/compiletest/src/main.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7b5543d7b6155c4e8dd44e0d7ed17a076db48c60/src%2Ftools%2Fcompiletest%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7b5543d7b6155c4e8dd44e0d7ed17a076db48c60/src%2Ftools%2Fcompiletest%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fmain.rs?ref=7b5543d7b6155c4e8dd44e0d7ed17a076db48c60", "patch": "@@ -33,10 +33,10 @@ use std::path::{Path, PathBuf};\n use std::process::Command;\n use filetime::FileTime;\n use getopts::Options;\n-use common::Config;\n+use common::{Config, TestPaths};\n use common::{DebugInfoGdb, DebugInfoLldb, Mode, Pretty};\n use common::{expected_output_path, UI_EXTENSIONS};\n-use test::{ColorConfig, TestPaths};\n+use test::ColorConfig;\n use util::logv;\n \n use self::header::EarlyProps;"}, {"sha": "aceb472ca63198b1b47567e8908585b15ea7a804", "filename": "src/tools/compiletest/src/runtest.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/7b5543d7b6155c4e8dd44e0d7ed17a076db48c60/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7b5543d7b6155c4e8dd44e0d7ed17a076db48c60/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs?ref=7b5543d7b6155c4e8dd44e0d7ed17a076db48c60", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-use common::Config;\n+use common::{Config, TestPaths};\n use common::{CompileFail, ParseFail, Pretty, RunFail, RunPass, RunPassValgrind};\n use common::{Codegen, CodegenUnits, DebugInfoGdb, DebugInfoLldb, Rustdoc};\n use common::{Incremental, MirOpt, RunMake, Ui};\n@@ -18,7 +18,6 @@ use errors::{self, Error, ErrorKind};\n use filetime::FileTime;\n use json;\n use header::TestProps;\n-use test::TestPaths;\n use util::logv;\n use regex::Regex;\n "}]}