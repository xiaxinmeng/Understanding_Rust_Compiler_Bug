{"sha": "ce81d15289867f7ec0bba959712d100d3ff6a653", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNlODFkMTUyODk4NjdmN2VjMGJiYTk1OTcxMmQxMDBkM2ZmNmE2NTM=", "commit": {"author": {"name": "Jeremy Fitzhardinge", "email": "jsgf@fb.com", "date": "2020-05-28T21:40:07Z"}, "committer": {"name": "Jeremy Fitzhardinge", "email": "jsgf@fb.com", "date": "2020-05-28T23:29:23Z"}, "message": "Add test to make sure -Wunused-crate-dependencies works with tests\n\nMake sure code in `#[test]` blocks counts as a use of a crate.", "tree": {"sha": "ad550f59aca23ded2cbc3423432df35fa729d695", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ad550f59aca23ded2cbc3423432df35fa729d695"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ce81d15289867f7ec0bba959712d100d3ff6a653", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ce81d15289867f7ec0bba959712d100d3ff6a653", "html_url": "https://github.com/rust-lang/rust/commit/ce81d15289867f7ec0bba959712d100d3ff6a653", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ce81d15289867f7ec0bba959712d100d3ff6a653/comments", "author": {"login": "jsgf", "id": 147966, "node_id": "MDQ6VXNlcjE0Nzk2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/147966?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsgf", "html_url": "https://github.com/jsgf", "followers_url": "https://api.github.com/users/jsgf/followers", "following_url": "https://api.github.com/users/jsgf/following{/other_user}", "gists_url": "https://api.github.com/users/jsgf/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsgf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsgf/subscriptions", "organizations_url": "https://api.github.com/users/jsgf/orgs", "repos_url": "https://api.github.com/users/jsgf/repos", "events_url": "https://api.github.com/users/jsgf/events{/privacy}", "received_events_url": "https://api.github.com/users/jsgf/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jsgf", "id": 147966, "node_id": "MDQ6VXNlcjE0Nzk2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/147966?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsgf", "html_url": "https://github.com/jsgf", "followers_url": "https://api.github.com/users/jsgf/followers", "following_url": "https://api.github.com/users/jsgf/following{/other_user}", "gists_url": "https://api.github.com/users/jsgf/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsgf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsgf/subscriptions", "organizations_url": "https://api.github.com/users/jsgf/orgs", "repos_url": "https://api.github.com/users/jsgf/repos", "events_url": "https://api.github.com/users/jsgf/events{/privacy}", "received_events_url": "https://api.github.com/users/jsgf/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "45127211566c53bac386b66909a830649182ab7a", "url": "https://api.github.com/repos/rust-lang/rust/commits/45127211566c53bac386b66909a830649182ab7a", "html_url": "https://github.com/rust-lang/rust/commit/45127211566c53bac386b66909a830649182ab7a"}], "stats": {"total": 15, "additions": 15, "deletions": 0}, "files": [{"sha": "66d6440c9cb9fb9f332af2cdac0e14fdbffd3ecf", "filename": "src/test/ui/unused-crate-deps/test-use-ok.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/ce81d15289867f7ec0bba959712d100d3ff6a653/src%2Ftest%2Fui%2Funused-crate-deps%2Ftest-use-ok.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ce81d15289867f7ec0bba959712d100d3ff6a653/src%2Ftest%2Fui%2Funused-crate-deps%2Ftest-use-ok.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funused-crate-deps%2Ftest-use-ok.rs?ref=ce81d15289867f7ec0bba959712d100d3ff6a653", "patch": "@@ -0,0 +1,15 @@\n+// Test-only use OK\n+\n+// edition:2018\n+// check-pass\n+// aux-crate:bar=bar.rs\n+// compile-flags:--test\n+\n+#![deny(unused_crate_dependencies)]\n+\n+fn main() {}\n+\n+#[test]\n+fn test_bar() {\n+    assert_eq!(bar::BAR, \"bar\");\n+}"}]}