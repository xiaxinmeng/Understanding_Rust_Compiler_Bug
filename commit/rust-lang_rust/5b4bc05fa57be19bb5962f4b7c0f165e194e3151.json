{"sha": "5b4bc05fa57be19bb5962f4b7c0f165e194e3151", "node_id": "MDY6Q29tbWl0NzI0NzEyOjViNGJjMDVmYTU3YmUxOWJiNTk2MmY0YjdjMGYxNjVlMTk0ZTMxNTE=", "commit": {"author": {"name": "jedel1043", "email": "jedel0124@gmail.com", "date": "2021-05-20T15:06:11Z"}, "committer": {"name": "jedel1043", "email": "jedel0124@gmail.com", "date": "2021-05-24T05:03:59Z"}, "message": "Fix ast expanded printing for anonymous types", "tree": {"sha": "aeebc754c20b4d5abc397cd73bd7aa2752c5dc1e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/aeebc754c20b4d5abc397cd73bd7aa2752c5dc1e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5b4bc05fa57be19bb5962f4b7c0f165e194e3151", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5b4bc05fa57be19bb5962f4b7c0f165e194e3151", "html_url": "https://github.com/rust-lang/rust/commit/5b4bc05fa57be19bb5962f4b7c0f165e194e3151", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5b4bc05fa57be19bb5962f4b7c0f165e194e3151/comments", "author": {"login": "jedel1043", "id": 38230983, "node_id": "MDQ6VXNlcjM4MjMwOTgz", "avatar_url": "https://avatars.githubusercontent.com/u/38230983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jedel1043", "html_url": "https://github.com/jedel1043", "followers_url": "https://api.github.com/users/jedel1043/followers", "following_url": "https://api.github.com/users/jedel1043/following{/other_user}", "gists_url": "https://api.github.com/users/jedel1043/gists{/gist_id}", "starred_url": "https://api.github.com/users/jedel1043/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jedel1043/subscriptions", "organizations_url": "https://api.github.com/users/jedel1043/orgs", "repos_url": "https://api.github.com/users/jedel1043/repos", "events_url": "https://api.github.com/users/jedel1043/events{/privacy}", "received_events_url": "https://api.github.com/users/jedel1043/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jedel1043", "id": 38230983, "node_id": "MDQ6VXNlcjM4MjMwOTgz", "avatar_url": "https://avatars.githubusercontent.com/u/38230983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jedel1043", "html_url": "https://github.com/jedel1043", "followers_url": "https://api.github.com/users/jedel1043/followers", "following_url": "https://api.github.com/users/jedel1043/following{/other_user}", "gists_url": "https://api.github.com/users/jedel1043/gists{/gist_id}", "starred_url": "https://api.github.com/users/jedel1043/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jedel1043/subscriptions", "organizations_url": "https://api.github.com/users/jedel1043/orgs", "repos_url": "https://api.github.com/users/jedel1043/repos", "events_url": "https://api.github.com/users/jedel1043/events{/privacy}", "received_events_url": "https://api.github.com/users/jedel1043/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "af2ed1b51887ede4d766ee123d3fa216970d1fdd", "url": "https://api.github.com/repos/rust-lang/rust/commits/af2ed1b51887ede4d766ee123d3fa216970d1fdd", "html_url": "https://github.com/rust-lang/rust/commit/af2ed1b51887ede4d766ee123d3fa216970d1fdd"}], "stats": {"total": 16, "additions": 6, "deletions": 10}, "files": [{"sha": "b7bb896f31802281214b5cc44e55e84606de1e8e", "filename": "compiler/rustc_ast_pretty/src/pprust/state.rs", "status": "modified", "additions": 6, "deletions": 10, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/5b4bc05fa57be19bb5962f4b7c0f165e194e3151/compiler%2Frustc_ast_pretty%2Fsrc%2Fpprust%2Fstate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5b4bc05fa57be19bb5962f4b7c0f165e194e3151/compiler%2Frustc_ast_pretty%2Fsrc%2Fpprust%2Fstate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast_pretty%2Fsrc%2Fpprust%2Fstate.rs?ref=5b4bc05fa57be19bb5962f4b7c0f165e194e3151", "patch": "@@ -955,12 +955,12 @@ impl<'a> State<'a> {\n                 self.pclose();\n             }\n             ast::TyKind::AnonymousStruct(ref fields, ..) => {\n-                self.s.word(\"struct\");\n-                self.print_record_struct_body(fields, ty.span);\n+                self.head(\"struct\");\n+                self.print_record_struct_body(&fields, ty.span);\n             }\n             ast::TyKind::AnonymousUnion(ref fields, ..) => {\n-                self.s.word(\"union\");\n-                self.print_record_struct_body(fields, ty.span);\n+                self.head(\"union\");\n+                self.print_record_struct_body(&fields, ty.span);\n             }\n             ast::TyKind::Paren(ref typ) => {\n                 self.popen();\n@@ -1397,12 +1397,7 @@ impl<'a> State<'a> {\n         }\n     }\n \n-    crate fn print_record_struct_body(\n-        &mut self,\n-        fields: &Vec<ast::FieldDef>,\n-        span: rustc_span::Span,\n-    ) {\n-        self.nbsp();\n+    crate fn print_record_struct_body(&mut self, fields: &[ast::FieldDef], span: rustc_span::Span) {\n         self.bopen();\n         self.hardbreak_if_not_bol();\n \n@@ -1451,6 +1446,7 @@ impl<'a> State<'a> {\n             }\n             ast::VariantData::Struct(ref fields, ..) => {\n                 self.print_where_clause(&generics.where_clause);\n+                self.nbsp();\n                 self.print_record_struct_body(fields, span);\n             }\n         }"}]}