{"sha": "919feaaec5c3c07052f607268f110778ead48964", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkxOWZlYWFlYzVjM2MwNzA1MmY2MDcyNjhmMTEwNzc4ZWFkNDg5NjQ=", "commit": {"author": {"name": "Wim Looman", "email": "wim@nemo157.com", "date": "2016-12-01T21:36:35Z"}, "committer": {"name": "Wim Looman", "email": "wim@nemo157.com", "date": "2016-12-01T21:36:35Z"}, "message": "Allow `allow(deprecated)` attribute on `use` items\n\nfixes #1372", "tree": {"sha": "847810d8a7915bb072e843fab227cc6c321799bb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/847810d8a7915bb072e843fab227cc6c321799bb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/919feaaec5c3c07052f607268f110778ead48964", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/919feaaec5c3c07052f607268f110778ead48964", "html_url": "https://github.com/rust-lang/rust/commit/919feaaec5c3c07052f607268f110778ead48964", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/919feaaec5c3c07052f607268f110778ead48964/comments", "author": {"login": "Nemo157", "id": 81079, "node_id": "MDQ6VXNlcjgxMDc5", "avatar_url": "https://avatars.githubusercontent.com/u/81079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nemo157", "html_url": "https://github.com/Nemo157", "followers_url": "https://api.github.com/users/Nemo157/followers", "following_url": "https://api.github.com/users/Nemo157/following{/other_user}", "gists_url": "https://api.github.com/users/Nemo157/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nemo157/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nemo157/subscriptions", "organizations_url": "https://api.github.com/users/Nemo157/orgs", "repos_url": "https://api.github.com/users/Nemo157/repos", "events_url": "https://api.github.com/users/Nemo157/events{/privacy}", "received_events_url": "https://api.github.com/users/Nemo157/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Nemo157", "id": 81079, "node_id": "MDQ6VXNlcjgxMDc5", "avatar_url": "https://avatars.githubusercontent.com/u/81079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nemo157", "html_url": "https://github.com/Nemo157", "followers_url": "https://api.github.com/users/Nemo157/followers", "following_url": "https://api.github.com/users/Nemo157/following{/other_user}", "gists_url": "https://api.github.com/users/Nemo157/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nemo157/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nemo157/subscriptions", "organizations_url": "https://api.github.com/users/Nemo157/orgs", "repos_url": "https://api.github.com/users/Nemo157/repos", "events_url": "https://api.github.com/users/Nemo157/events{/privacy}", "received_events_url": "https://api.github.com/users/Nemo157/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f9fe50da1ed24fc02da84d526d8d2b9ba91682cb", "url": "https://api.github.com/repos/rust-lang/rust/commits/f9fe50da1ed24fc02da84d526d8d2b9ba91682cb", "html_url": "https://github.com/rust-lang/rust/commit/f9fe50da1ed24fc02da84d526d8d2b9ba91682cb"}], "stats": {"total": 9, "additions": 7, "deletions": 2}, "files": [{"sha": "2d9960c7e3d889f68d604cbe40c1a5a6baa80930", "filename": "clippy_lints/src/attrs.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/919feaaec5c3c07052f607268f110778ead48964/clippy_lints%2Fsrc%2Fattrs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/919feaaec5c3c07052f607268f110778ead48964/clippy_lints%2Fsrc%2Fattrs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fattrs.rs?ref=919feaaec5c3c07052f607268f110778ead48964", "patch": "@@ -110,9 +110,9 @@ impl LateLintPass for AttrPass {\n                     if let MetaItemKind::List(ref lint_list) = attr.value.node {\n                         match &*attr.name().as_str() {\n                             \"allow\" | \"warn\" | \"deny\" | \"forbid\" => {\n-                                // whitelist `unused_imports`\n+                                // whitelist `unused_imports` and `deprecated`\n                                 for lint in lint_list {\n-                                    if is_word(lint, \"unused_imports\") {\n+                                    if is_word(lint, \"unused_imports\") || is_word(lint, \"deprecated\") {\n                                         if let ItemUse(_) = item.node {\n                                             return;\n                                         }"}, {"sha": "de3896f091b4b55b9fbb1cc5a66edcaad6f075be", "filename": "tests/compile-fail/useless_attribute.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/919feaaec5c3c07052f607268f110778ead48964/tests%2Fcompile-fail%2Fuseless_attribute.rs", "raw_url": "https://github.com/rust-lang/rust/raw/919feaaec5c3c07052f607268f110778ead48964/tests%2Fcompile-fail%2Fuseless_attribute.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail%2Fuseless_attribute.rs?ref=919feaaec5c3c07052f607268f110778ead48964", "patch": "@@ -11,4 +11,9 @@ extern crate clippy_lints;\n #[allow(unused_imports)]\n use std::collections;\n \n+// don't lint on deprecated for `use` items\n+mod foo { #[deprecated] pub struct Bar; }\n+#[allow(deprecated)]\n+pub use foo::Bar;\n+\n fn main() {}"}]}