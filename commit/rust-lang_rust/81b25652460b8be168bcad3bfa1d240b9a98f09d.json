{"sha": "81b25652460b8be168bcad3bfa1d240b9a98f09d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgxYjI1NjUyNDYwYjhiZTE2OGJjYWQzYmZhMWQyNDBiOWE5OGYwOWQ=", "commit": {"author": {"name": "Oliver Schneider", "email": "oli-obk@users.noreply.github.com", "date": "2018-02-06T18:35:26Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2018-02-06T18:35:26Z"}, "message": "Merge pull request #2443 from goodmanjonathan/fix-2438\n\nDon't suggest eliding 'static on associated consts", "tree": {"sha": "a4319b86a42bbb6fba76b3388fc8df7982f46d0e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a4319b86a42bbb6fba76b3388fc8df7982f46d0e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/81b25652460b8be168bcad3bfa1d240b9a98f09d", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJaefVuCRBK7hj4Ov3rIwAAdHIIABzG4RTqDRnjQMkmhmA/L3p4\n3RPXbL/Yc99TZL8Ps7kTO6yUWEdmgi08ieBBgyro0U94ZaBeDHgJ8LyMyIWjswbK\nQNZxQqWYYYENHjpGggiRbaNoSGTdxzYx0IrjjxwkhseoLYRgtpdp4S94jPX+/FGq\nbfLKqlIuxv8WZNuCphQfD6+bM36KoG+WkaNMSodMereWH3Pdenav2JFjC1m0y9Vw\niYxLCv65ovsrBP/BdN61BBFE93gca20MNsygVKTjz8//L6STtdyoxJOoVjMaGHP7\nnVQMjitYL4aBRu5QlU5k0fgE1DpG7uaZA7FxZzCirp5+BoWzyutiOx42VtvqsQ4=\n=SLqY\n-----END PGP SIGNATURE-----\n", "payload": "tree a4319b86a42bbb6fba76b3388fc8df7982f46d0e\nparent b835877d2ecba1b91ac74fee5b042ac0673aff14\nparent 73f2ba5ded4452839d2025f6fe6eb0818685fa2a\nauthor Oliver Schneider <oli-obk@users.noreply.github.com> 1517942126 +0100\ncommitter GitHub <noreply@github.com> 1517942126 +0100\n\nMerge pull request #2443 from goodmanjonathan/fix-2438\n\nDon't suggest eliding 'static on associated consts"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/81b25652460b8be168bcad3bfa1d240b9a98f09d", "html_url": "https://github.com/rust-lang/rust/commit/81b25652460b8be168bcad3bfa1d240b9a98f09d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/81b25652460b8be168bcad3bfa1d240b9a98f09d/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b835877d2ecba1b91ac74fee5b042ac0673aff14", "url": "https://api.github.com/repos/rust-lang/rust/commits/b835877d2ecba1b91ac74fee5b042ac0673aff14", "html_url": "https://github.com/rust-lang/rust/commit/b835877d2ecba1b91ac74fee5b042ac0673aff14"}, {"sha": "73f2ba5ded4452839d2025f6fe6eb0818685fa2a", "url": "https://api.github.com/repos/rust-lang/rust/commits/73f2ba5ded4452839d2025f6fe6eb0818685fa2a", "html_url": "https://github.com/rust-lang/rust/commit/73f2ba5ded4452839d2025f6fe6eb0818685fa2a"}], "stats": {"total": 38, "additions": 2, "deletions": 36}, "files": [{"sha": "66a1634ebce6a57e1476a9b3fb32b660468b5908", "filename": "clippy_lints/src/const_static_lifetime.rs", "status": "modified", "additions": 1, "deletions": 17, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/81b25652460b8be168bcad3bfa1d240b9a98f09d/clippy_lints%2Fsrc%2Fconst_static_lifetime.rs", "raw_url": "https://github.com/rust-lang/rust/raw/81b25652460b8be168bcad3bfa1d240b9a98f09d/clippy_lints%2Fsrc%2Fconst_static_lifetime.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fconst_static_lifetime.rs?ref=81b25652460b8be168bcad3bfa1d240b9a98f09d", "patch": "@@ -87,21 +87,5 @@ impl EarlyLintPass for StaticConst {\n         }\n     }\n \n-    fn check_trait_item(&mut self, cx: &EarlyContext, item: &TraitItem) {\n-        if !in_macro(item.span) {\n-            // Match only constants...\n-            if let TraitItemKind::Const(ref var_type, _) = item.node {\n-                self.visit_type(var_type, cx);\n-            }\n-        }\n-    }\n-\n-    fn check_impl_item(&mut self, cx: &EarlyContext, item: &ImplItem) {\n-        if !in_macro(item.span) {\n-            // Match only constants...\n-            if let ImplItemKind::Const(ref var_type, _) = item.node {\n-                self.visit_type(var_type, cx);\n-            }\n-        }\n-    }\n+    // Don't check associated consts because `'static` cannot be elided on those (issue #2438)\n }"}, {"sha": "db33744c7a9bf857bf2169f3167cc0d4dd5c144f", "filename": "tests/ui/const_static_lifetime.stderr", "status": "modified", "additions": 1, "deletions": 19, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/81b25652460b8be168bcad3bfa1d240b9a98f09d/tests%2Fui%2Fconst_static_lifetime.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/81b25652460b8be168bcad3bfa1d240b9a98f09d/tests%2Fui%2Fconst_static_lifetime.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fconst_static_lifetime.stderr?ref=81b25652460b8be168bcad3bfa1d240b9a98f09d", "patch": "@@ -78,23 +78,5 @@ error: Constants have by default a `'static` lifetime\n 24 | const VAR_ARRAY: &'static [u8; 1] = b\"T\"; // ERROR Consider removing 'static.\n    |                  -^^^^^^^-------- help: consider removing `'static`: `&[u8; 1]`\n \n-error: Constants have by default a `'static` lifetime\n-  --> $DIR/const_static_lifetime.rs:40:23\n-   |\n-40 |     const TRAIT_VAR: &'static str;\n-   |                      -^^^^^^^---- help: consider removing `'static`: `&str`\n-\n-error: Constants have by default a `'static` lifetime\n-  --> $DIR/const_static_lifetime.rs:44:22\n-   |\n-44 |     const IMPL_VAR: &'static str = \"var\";\n-   |                     -^^^^^^^---- help: consider removing `'static`: `&str`\n-\n-error: Constants have by default a `'static` lifetime\n-  --> $DIR/const_static_lifetime.rs:48:23\n-   |\n-48 |     const TRAIT_VAR: &'static str = \"foo\";\n-   |                      -^^^^^^^---- help: consider removing `'static`: `&str`\n-\n-error: aborting due to 16 previous errors\n+error: aborting due to 13 previous errors\n "}]}