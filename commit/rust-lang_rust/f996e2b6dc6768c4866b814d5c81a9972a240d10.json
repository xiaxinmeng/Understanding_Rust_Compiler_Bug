{"sha": "f996e2b6dc6768c4866b814d5c81a9972a240d10", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY5OTZlMmI2ZGM2NzY4YzQ4NjZiODE0ZDVjODFhOTk3MmEyNDBkMTA=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-02-02T17:18:24Z"}, "committer": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-02-11T22:49:48Z"}, "message": "libarena => 2018", "tree": {"sha": "90a394173010a2a5c87308792a377e28bc412f5a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/90a394173010a2a5c87308792a377e28bc412f5a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f996e2b6dc6768c4866b814d5c81a9972a240d10", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f996e2b6dc6768c4866b814d5c81a9972a240d10", "html_url": "https://github.com/rust-lang/rust/commit/f996e2b6dc6768c4866b814d5c81a9972a240d10", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f996e2b6dc6768c4866b814d5c81a9972a240d10/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "57d7cfc3cf50f0c427ad3043ff09eaef20671320", "url": "https://api.github.com/repos/rust-lang/rust/commits/57d7cfc3cf50f0c427ad3043ff09eaef20671320", "html_url": "https://github.com/rust-lang/rust/commit/57d7cfc3cf50f0c427ad3043ff09eaef20671320"}], "stats": {"total": 21, "additions": 11, "deletions": 10}, "files": [{"sha": "82fc64ba64e331645d075fbd879a6696e04cf523", "filename": "src/libarena/Cargo.toml", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/f996e2b6dc6768c4866b814d5c81a9972a240d10/src%2Flibarena%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/f996e2b6dc6768c4866b814d5c81a9972a240d10/src%2Flibarena%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibarena%2FCargo.toml?ref=f996e2b6dc6768c4866b814d5c81a9972a240d10", "patch": "@@ -2,11 +2,12 @@\n authors = [\"The Rust Project Developers\"]\n name = \"arena\"\n version = \"0.0.0\"\n+edition = \"2018\"\n \n [lib]\n name = \"arena\"\n path = \"lib.rs\"\n crate-type = [\"dylib\"]\n \n [dependencies]\n-rustc_data_structures = { path = \"../librustc_data_structures\" }\n\\ No newline at end of file\n+rustc_data_structures = { path = \"../librustc_data_structures\" }"}, {"sha": "8ae046c0796bc53e8f57eaa413af43a7e1bad17e", "filename": "src/libarena/lib.rs", "status": "modified", "additions": 9, "deletions": 9, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/f996e2b6dc6768c4866b814d5c81a9972a240d10/src%2Flibarena%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f996e2b6dc6768c4866b814d5c81a9972a240d10/src%2Flibarena%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibarena%2Flib.rs?ref=f996e2b6dc6768c4866b814d5c81a9972a240d10", "patch": "@@ -11,17 +11,17 @@\n #![doc(html_root_url = \"https://doc.rust-lang.org/nightly/\",\n        test(no_crate_inject, attr(deny(warnings))))]\n \n+#![deny(rust_2018_idioms)]\n+\n #![feature(alloc)]\n #![feature(core_intrinsics)]\n #![feature(dropck_eyepatch)]\n-#![feature(nll)]\n #![feature(raw_vec_internals)]\n #![cfg_attr(test, feature(test))]\n \n #![allow(deprecated)]\n \n extern crate alloc;\n-extern crate rustc_data_structures;\n \n use rustc_data_structures::sync::MTLock;\n \n@@ -476,7 +476,7 @@ impl SyncDroplessArena {\n #[cfg(test)]\n mod tests {\n     extern crate test;\n-    use self::test::Bencher;\n+    use test::Bencher;\n     use super::TypedArena;\n     use std::cell::Cell;\n \n@@ -511,15 +511,15 @@ mod tests {\n \n         impl<'a> Wrap<'a> {\n             fn alloc_inner<F: Fn() -> Inner>(&self, f: F) -> &Inner {\n-                let r: &EI = self.0.alloc(EI::I(f()));\n+                let r: &EI<'_> = self.0.alloc(EI::I(f()));\n                 if let &EI::I(ref i) = r {\n                     i\n                 } else {\n                     panic!(\"mismatch\");\n                 }\n             }\n-            fn alloc_outer<F: Fn() -> Outer<'a>>(&self, f: F) -> &Outer {\n-                let r: &EI = self.0.alloc(EI::O(f()));\n+            fn alloc_outer<F: Fn() -> Outer<'a>>(&self, f: F) -> &Outer<'_> {\n+                let r: &EI<'_> = self.0.alloc(EI::O(f()));\n                 if let &EI::O(ref o) = r {\n                     o\n                 } else {\n@@ -609,7 +609,7 @@ mod tests {\n         count: &'a Cell<u32>,\n     }\n \n-    impl<'a> Drop for DropCounter<'a> {\n+    impl Drop for DropCounter<'_> {\n         fn drop(&mut self) {\n             self.count.set(self.count.get() + 1);\n         }\n@@ -619,7 +619,7 @@ mod tests {\n     fn test_typed_arena_drop_count() {\n         let counter = Cell::new(0);\n         {\n-            let arena: TypedArena<DropCounter> = TypedArena::default();\n+            let arena: TypedArena<DropCounter<'_>> = TypedArena::default();\n             for _ in 0..100 {\n                 // Allocate something with drop glue to make sure it doesn't leak.\n                 arena.alloc(DropCounter { count: &counter });\n@@ -631,7 +631,7 @@ mod tests {\n     #[test]\n     fn test_typed_arena_drop_on_clear() {\n         let counter = Cell::new(0);\n-        let mut arena: TypedArena<DropCounter> = TypedArena::default();\n+        let mut arena: TypedArena<DropCounter<'_>> = TypedArena::default();\n         for i in 0..10 {\n             for _ in 0..100 {\n                 // Allocate something with drop glue to make sure it doesn't leak."}]}