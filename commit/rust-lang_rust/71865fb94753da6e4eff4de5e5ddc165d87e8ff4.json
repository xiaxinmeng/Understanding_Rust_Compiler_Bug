{"sha": "71865fb94753da6e4eff4de5e5ddc165d87e8ff4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjcxODY1ZmI5NDc1M2RhNmU0ZWZmNGRlNWU1ZGRjMTY1ZDg3ZThmZjQ=", "commit": {"author": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2018-06-08T23:20:57Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2018-06-08T23:20:57Z"}, "message": "Rollup merge of #51099 - Crazycolorz5:expectedcloseparen, r=estebank\n\nFix Issue 38777\n\nWhen looking through for a closing bracket in the loop condition, adds them to expecteds.\nhttps://github.com/rust-lang/rust/issues/38777", "tree": {"sha": "e17ecd771f935a3172d562224ea781cb4d47be4d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e17ecd771f935a3172d562224ea781cb4d47be4d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/71865fb94753da6e4eff4de5e5ddc165d87e8ff4", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJbGw9ZCRBK7hj4Ov3rIwAAdHIIABuVdOcfrlriRxi5T8JbOPeW\n/RgJf6YpL4HmXBTjV4PdwRMGRhEFecUuHu/1amICDh/5ifj3k/czraFsMrbUAlpd\n1FxBRGmRkjtbj8ddkskJ3mpo/0IXc5Frg0Qo8qnL3z8BUcp7N0fBvl+8ULaR6pKz\nxuQMcj1lvTxjVAWG9KAaCU5SpxfkmILcSrjjiq86AU5GiDpgNY93E/QB6v2fj2p8\n4UShPGEcVFjYj4P+Qk3mRiyI2V2ssDua58Ox5yGn6edoNtOEK7sFFapiG/lFdt47\nPP66TdlMOhOVmyD/l/aNsXDaXxT9ZX9O4NtQghl6r963xMN+Jpw7dIk3uE000zo=\n=KFgI\n-----END PGP SIGNATURE-----\n", "payload": "tree e17ecd771f935a3172d562224ea781cb4d47be4d\nparent 91b6842dc9b795cdee9bfe552f42cdd463e1a8dd\nparent df0c6a97b4a7897931c6e4b21b9f4398272d552e\nauthor Mark Rousskov <mark.simulacrum@gmail.com> 1528500057 -0600\ncommitter GitHub <noreply@github.com> 1528500057 -0600\n\nRollup merge of #51099 - Crazycolorz5:expectedcloseparen, r=estebank\n\nFix Issue 38777\n\nWhen looking through for a closing bracket in the loop condition, adds them to expecteds.\nhttps://github.com/rust-lang/rust/issues/38777\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/71865fb94753da6e4eff4de5e5ddc165d87e8ff4", "html_url": "https://github.com/rust-lang/rust/commit/71865fb94753da6e4eff4de5e5ddc165d87e8ff4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/71865fb94753da6e4eff4de5e5ddc165d87e8ff4/comments", "author": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "91b6842dc9b795cdee9bfe552f42cdd463e1a8dd", "url": "https://api.github.com/repos/rust-lang/rust/commits/91b6842dc9b795cdee9bfe552f42cdd463e1a8dd", "html_url": "https://github.com/rust-lang/rust/commit/91b6842dc9b795cdee9bfe552f42cdd463e1a8dd"}, {"sha": "df0c6a97b4a7897931c6e4b21b9f4398272d552e", "url": "https://api.github.com/repos/rust-lang/rust/commits/df0c6a97b4a7897931c6e4b21b9f4398272d552e", "html_url": "https://github.com/rust-lang/rust/commit/df0c6a97b4a7897931c6e4b21b9f4398272d552e"}], "stats": {"total": 75, "additions": 61, "deletions": 14}, "files": [{"sha": "dd3559798ec0c6381196c5dd2fb2edd8e22babf0", "filename": "src/libsyntax/parse/parser.rs", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/71865fb94753da6e4eff4de5e5ddc165d87e8ff4/src%2Flibsyntax%2Fparse%2Fparser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/71865fb94753da6e4eff4de5e5ddc165d87e8ff4/src%2Flibsyntax%2Fparse%2Fparser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fparser.rs?ref=71865fb94753da6e4eff4de5e5ddc165d87e8ff4", "patch": "@@ -652,7 +652,7 @@ impl<'a> Parser<'a> {\n                 Err(err)\n             }\n         } else {\n-            self.expect_one_of(unsafe { slice::from_raw_parts(t, 1) }, &[])\n+            self.expect_one_of(slice::from_ref(t), &[])\n         }\n     }\n \n@@ -1108,7 +1108,12 @@ impl<'a> Parser<'a> {\n     {\n         let mut first: bool = true;\n         let mut v = vec![];\n-        while !kets.contains(&&self.token) {\n+        while !kets.iter().any(|k| {\n+                match expect {\n+                    TokenExpectType::Expect => self.check(k),\n+                    TokenExpectType::NoExpect => self.token == **k,\n+                }\n+            }) {\n             match self.token {\n                 token::CloseDelim(..) | token::Eof => break,\n                 _ => {}"}, {"sha": "13b4c0896e75c443d8fe5be74e26bc12296df0f9", "filename": "src/test/compile-fail/issue-39616.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/71865fb94753da6e4eff4de5e5ddc165d87e8ff4/src%2Ftest%2Fcompile-fail%2Fissue-39616.rs", "raw_url": "https://github.com/rust-lang/rust/raw/71865fb94753da6e4eff4de5e5ddc165d87e8ff4/src%2Ftest%2Fcompile-fail%2Fissue-39616.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-39616.rs?ref=71865fb94753da6e4eff4de5e5ddc165d87e8ff4", "patch": "@@ -9,7 +9,7 @@\n // except according to those terms.\n \n fn foo(a: [0; 1]) {} //~ ERROR expected type, found `0`\n-//~| ERROR expected one of `->`, `where`, or `{`, found `]`\n+//~| ERROR expected one of `)`, `,`, `->`, `where`, or `{`, found `]`\n // FIXME(jseyfried): avoid emitting the second error (preexisting)\n \n fn main() {}"}, {"sha": "24186d94acce966c087ce5c3d65b41709d55a3de", "filename": "src/test/ui/resolve/token-error-correct-3.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/71865fb94753da6e4eff4de5e5ddc165d87e8ff4/src%2Ftest%2Fui%2Fresolve%2Ftoken-error-correct-3.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/71865fb94753da6e4eff4de5e5ddc165d87e8ff4/src%2Ftest%2Fui%2Fresolve%2Ftoken-error-correct-3.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fresolve%2Ftoken-error-correct-3.stderr?ref=71865fb94753da6e4eff4de5e5ddc165d87e8ff4", "patch": "@@ -10,11 +10,11 @@ note: unclosed delimiter\n LL |             callback(path.as_ref(); //~ ERROR expected one of\n    |                     ^\n \n-error: expected one of `,`, `.`, `?`, or an operator, found `;`\n+error: expected one of `)`, `,`, `.`, `?`, or an operator, found `;`\n   --> $DIR/token-error-correct-3.rs:24:35\n    |\n LL |             callback(path.as_ref(); //~ ERROR expected one of\n-   |                                   ^ expected one of `,`, `.`, `?`, or an operator here\n+   |                                   ^ expected one of `)`, `,`, `.`, `?`, or an operator here\n \n error: expected one of `.`, `;`, `?`, `}`, or an operator, found `)`\n   --> $DIR/token-error-correct-3.rs:30:9"}, {"sha": "350a2262391b5da92dffaf36293e42e46078cde1", "filename": "src/test/ui/similar-tokens.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/71865fb94753da6e4eff4de5e5ddc165d87e8ff4/src%2Ftest%2Fui%2Fsimilar-tokens.rs", "raw_url": "https://github.com/rust-lang/rust/raw/71865fb94753da6e4eff4de5e5ddc165d87e8ff4/src%2Ftest%2Fui%2Fsimilar-tokens.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsimilar-tokens.rs?ref=71865fb94753da6e4eff4de5e5ddc165d87e8ff4", "patch": "@@ -14,6 +14,6 @@ mod x {\n }\n \n // `.` is similar to `,` so list parsing should continue to closing `}`\n-use x::{A. B}; //~ ERROR expected one of `,`, `::`, or `as`, found `.`\n+use x::{A. B}; //~ ERROR expected one of `,`, `::`, `as`, or `}`, found `.`\n \n fn main() {}"}, {"sha": "90acc56cbc99964504da56f29db676405d3c41a5", "filename": "src/test/ui/similar-tokens.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/71865fb94753da6e4eff4de5e5ddc165d87e8ff4/src%2Ftest%2Fui%2Fsimilar-tokens.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/71865fb94753da6e4eff4de5e5ddc165d87e8ff4/src%2Ftest%2Fui%2Fsimilar-tokens.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsimilar-tokens.stderr?ref=71865fb94753da6e4eff4de5e5ddc165d87e8ff4", "patch": "@@ -1,8 +1,8 @@\n-error: expected one of `,`, `::`, or `as`, found `.`\n+error: expected one of `,`, `::`, `as`, or `}`, found `.`\n   --> $DIR/similar-tokens.rs:17:10\n    |\n-LL | use x::{A. B}; //~ ERROR expected one of `,`, `::`, or `as`, found `.`\n-   |          ^ expected one of `,`, `::`, or `as` here\n+LL | use x::{A. B}; //~ ERROR expected one of `,`, `::`, `as`, or `}`, found `.`\n+   |          ^ expected one of `,`, `::`, `as`, or `}` here\n \n error: aborting due to previous error\n "}, {"sha": "6c0053f2f8597997489345fb210a66de136321be", "filename": "src/test/ui/token/issue-10636-2.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/71865fb94753da6e4eff4de5e5ddc165d87e8ff4/src%2Ftest%2Fui%2Ftoken%2Fissue-10636-2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/71865fb94753da6e4eff4de5e5ddc165d87e8ff4/src%2Ftest%2Fui%2Ftoken%2Fissue-10636-2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftoken%2Fissue-10636-2.stderr?ref=71865fb94753da6e4eff4de5e5ddc165d87e8ff4", "patch": "@@ -10,11 +10,11 @@ note: unclosed delimiter\n LL |     option.map(|some| 42;\n    |               ^\n \n-error: expected one of `,`, `.`, `?`, or an operator, found `;`\n+error: expected one of `)`, `,`, `.`, `?`, or an operator, found `;`\n   --> $DIR/issue-10636-2.rs:15:25\n    |\n LL |     option.map(|some| 42;\n-   |                         ^ expected one of `,`, `.`, `?`, or an operator here\n+   |                         ^ expected one of `)`, `,`, `.`, `?`, or an operator here\n \n error: expected expression, found `)`\n   --> $DIR/issue-10636-2.rs:18:1"}, {"sha": "22d54a3834073d4f205701f49847732f13183c45", "filename": "src/test/ui/tuple-struct-fields/test.rs", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/71865fb94753da6e4eff4de5e5ddc165d87e8ff4/src%2Ftest%2Fui%2Ftuple-struct-fields%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/71865fb94753da6e4eff4de5e5ddc165d87e8ff4/src%2Ftest%2Fui%2Ftuple-struct-fields%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftuple-struct-fields%2Ftest.rs?ref=71865fb94753da6e4eff4de5e5ddc165d87e8ff4", "patch": "@@ -12,6 +12,6 @@ mod foo {\n     type T = ();\n     struct S1(pub(in foo) (), pub(T), pub(crate) (), pub(((), T)));\n     struct S2(pub((foo)) ());\n-    //~^ ERROR expected `,`, found `(`\n+    //~^ ERROR expected one of `)` or `,`, found `(`\n     //~| ERROR cannot find type `foo` in this scope\n }", "previous_filename": "src/test/compile-fail/privacy/restricted/tuple-struct-fields/test.rs"}, {"sha": "59228ea8c14d2ca41e9bb8d5f5474d90b33ff92b", "filename": "src/test/ui/tuple-struct-fields/test.stderr", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/71865fb94753da6e4eff4de5e5ddc165d87e8ff4/src%2Ftest%2Fui%2Ftuple-struct-fields%2Ftest.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/71865fb94753da6e4eff4de5e5ddc165d87e8ff4/src%2Ftest%2Fui%2Ftuple-struct-fields%2Ftest.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftuple-struct-fields%2Ftest.stderr?ref=71865fb94753da6e4eff4de5e5ddc165d87e8ff4", "patch": "@@ -0,0 +1,20 @@\n+error: expected one of `)` or `,`, found `(`\n+  --> $DIR/test.rs:14:26\n+   |\n+LL |     struct S2(pub((foo)) ());\n+   |                          ^ expected one of `)` or `,` here\n+\n+error[E0412]: cannot find type `foo` in this scope\n+  --> $DIR/test.rs:14:20\n+   |\n+LL |     struct S2(pub((foo)) ());\n+   |                    ^^^ not found in this scope\n+\n+error[E0601]: `main` function not found in crate `test`\n+   |\n+   = note: consider adding a `main` function to `$DIR/test.rs`\n+\n+error: aborting due to 3 previous errors\n+\n+Some errors occurred: E0412, E0601.\n+For more information about an error, try `rustc --explain E0412`."}, {"sha": "eead027cb13516d73dd57f125edf8666fa484e36", "filename": "src/test/ui/tuple-struct-fields/test2.rs", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/71865fb94753da6e4eff4de5e5ddc165d87e8ff4/src%2Ftest%2Fui%2Ftuple-struct-fields%2Ftest2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/71865fb94753da6e4eff4de5e5ddc165d87e8ff4/src%2Ftest%2Fui%2Ftuple-struct-fields%2Ftest2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftuple-struct-fields%2Ftest2.rs?ref=71865fb94753da6e4eff4de5e5ddc165d87e8ff4", "patch": "@@ -13,7 +13,7 @@ macro_rules! define_struct {\n         struct S1(pub $t);\n         struct S2(pub (in foo) ());\n         struct S3(pub $t ());\n-        //~^ ERROR expected `,`, found `(`\n+        //~^ ERROR expected one of `)` or `,`, found `(`\n     }\n }\n ", "previous_filename": "src/test/compile-fail/privacy/restricted/tuple-struct-fields/test2.rs"}, {"sha": "983e74772ac690a0f0b8a33a01aef49e0dd5bed7", "filename": "src/test/ui/tuple-struct-fields/test2.stderr", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/71865fb94753da6e4eff4de5e5ddc165d87e8ff4/src%2Ftest%2Fui%2Ftuple-struct-fields%2Ftest2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/71865fb94753da6e4eff4de5e5ddc165d87e8ff4/src%2Ftest%2Fui%2Ftuple-struct-fields%2Ftest2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftuple-struct-fields%2Ftest2.stderr?ref=71865fb94753da6e4eff4de5e5ddc165d87e8ff4", "patch": "@@ -0,0 +1,11 @@\n+error: expected one of `)` or `,`, found `(`\n+  --> $DIR/test2.rs:15:26\n+   |\n+LL |         struct S3(pub $t ());\n+   |                          ^ expected one of `)` or `,` here\n+...\n+LL |     define_struct! { (foo) }\n+   |     ------------------------ in this macro invocation\n+\n+error: aborting due to previous error\n+"}, {"sha": "d666c8abd3c957d1d763d9a9b590c9b9a2675de8", "filename": "src/test/ui/tuple-struct-fields/test3.rs", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/71865fb94753da6e4eff4de5e5ddc165d87e8ff4/src%2Ftest%2Fui%2Ftuple-struct-fields%2Ftest3.rs", "raw_url": "https://github.com/rust-lang/rust/raw/71865fb94753da6e4eff4de5e5ddc165d87e8ff4/src%2Ftest%2Fui%2Ftuple-struct-fields%2Ftest3.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftuple-struct-fields%2Ftest3.rs?ref=71865fb94753da6e4eff4de5e5ddc165d87e8ff4", "patch": "@@ -13,7 +13,7 @@ macro_rules! define_struct {\n         struct S1(pub($t));\n         struct S2(pub (in foo) ());\n         struct S3(pub($t) ());\n-        //~^ ERROR expected `,`, found `(`\n+        //~^ ERROR expected one of `)` or `,`, found `(`\n     }\n }\n ", "previous_filename": "src/test/compile-fail/privacy/restricted/tuple-struct-fields/test3.rs"}, {"sha": "6738595b997987ac41d95bb1eef2ef61883a1f66", "filename": "src/test/ui/tuple-struct-fields/test3.stderr", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/71865fb94753da6e4eff4de5e5ddc165d87e8ff4/src%2Ftest%2Fui%2Ftuple-struct-fields%2Ftest3.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/71865fb94753da6e4eff4de5e5ddc165d87e8ff4/src%2Ftest%2Fui%2Ftuple-struct-fields%2Ftest3.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftuple-struct-fields%2Ftest3.stderr?ref=71865fb94753da6e4eff4de5e5ddc165d87e8ff4", "patch": "@@ -0,0 +1,11 @@\n+error: expected one of `)` or `,`, found `(`\n+  --> $DIR/test3.rs:15:27\n+   |\n+LL |         struct S3(pub($t) ());\n+   |                           ^ expected one of `)` or `,` here\n+...\n+LL |     define_struct! { foo }\n+   |     ---------------------- in this macro invocation\n+\n+error: aborting due to previous error\n+"}]}