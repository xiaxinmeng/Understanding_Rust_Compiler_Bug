{"sha": "5187a3e15723c85cd7ef3418b0c0e61c79709f4c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUxODdhM2UxNTcyM2M4NWNkN2VmMzQxOGIwYzBlNjFjNzk3MDlmNGM=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-08-31T05:08:23Z"}, "committer": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-08-31T05:08:23Z"}, "message": "Harden param_attrs test wrt. usage of proc macro attrs.", "tree": {"sha": "af7a6567788e0bf596d9a380eaa0ff96d3a64a4c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/af7a6567788e0bf596d9a380eaa0ff96d3a64a4c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5187a3e15723c85cd7ef3418b0c0e61c79709f4c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5187a3e15723c85cd7ef3418b0c0e61c79709f4c", "html_url": "https://github.com/rust-lang/rust/commit/5187a3e15723c85cd7ef3418b0c0e61c79709f4c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5187a3e15723c85cd7ef3418b0c0e61c79709f4c/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fd68d023f4011fea1c988a2b82801d09a5ad8bdf", "url": "https://api.github.com/repos/rust-lang/rust/commits/fd68d023f4011fea1c988a2b82801d09a5ad8bdf", "html_url": "https://github.com/rust-lang/rust/commit/fd68d023f4011fea1c988a2b82801d09a5ad8bdf"}], "stats": {"total": 299, "additions": 299, "deletions": 0}, "files": [{"sha": "b62cf31205fd3748c424dabdc64ea11629af73bc", "filename": "src/test/ui/rfc-2565-param-attrs/auxiliary/ident-mac.rs", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/5187a3e15723c85cd7ef3418b0c0e61c79709f4c/src%2Ftest%2Fui%2Frfc-2565-param-attrs%2Fauxiliary%2Fident-mac.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5187a3e15723c85cd7ef3418b0c0e61c79709f4c/src%2Ftest%2Fui%2Frfc-2565-param-attrs%2Fauxiliary%2Fident-mac.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2565-param-attrs%2Fauxiliary%2Fident-mac.rs?ref=5187a3e15723c85cd7ef3418b0c0e61c79709f4c", "patch": "@@ -0,0 +1,11 @@\n+// force-host\n+// no-prefer-dynamic\n+\n+#![crate_type = \"proc-macro\"]\n+\n+extern crate proc_macro;\n+\n+use proc_macro::TokenStream;\n+\n+#[proc_macro_attribute]\n+pub fn id(_: TokenStream, input: TokenStream) -> TokenStream { input }"}, {"sha": "8defa26e48d8d20a15ef28d702762d4546c6d1c1", "filename": "src/test/ui/rfc-2565-param-attrs/proc-macro-cannot-be-used.rs", "status": "added", "additions": 60, "deletions": 0, "changes": 60, "blob_url": "https://github.com/rust-lang/rust/blob/5187a3e15723c85cd7ef3418b0c0e61c79709f4c/src%2Ftest%2Fui%2Frfc-2565-param-attrs%2Fproc-macro-cannot-be-used.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5187a3e15723c85cd7ef3418b0c0e61c79709f4c/src%2Ftest%2Fui%2Frfc-2565-param-attrs%2Fproc-macro-cannot-be-used.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2565-param-attrs%2Fproc-macro-cannot-be-used.rs?ref=5187a3e15723c85cd7ef3418b0c0e61c79709f4c", "patch": "@@ -0,0 +1,60 @@\n+// aux-build:ident-mac.rs\n+\n+#![feature(param_attrs)]\n+#![feature(c_variadic)]\n+\n+extern crate ident_mac;\n+use ident_mac::id;\n+\n+struct W(u8);\n+\n+extern \"C\" { fn ffi(#[id] arg1: i32, #[id] ...); }\n+//~^ ERROR the attribute `id` is currently unknown to the compiler\n+//~| ERROR the attribute `id` is currently unknown to the compiler\n+\n+unsafe extern \"C\" fn cvar(arg1: i32, #[id] mut args: ...) {}\n+//~^ ERROR the attribute `id` is currently unknown to the compiler\n+\n+type Alias = extern \"C\" fn(#[id] u8, #[id] ...);\n+    //~^ ERROR the attribute `id` is currently unknown to the compiler\n+    //~| ERROR the attribute `id` is currently unknown to the compiler\n+\n+fn free(#[id] arg1: u8) {\n+    //~^ ERROR the attribute `id` is currently unknown to the compiler\n+    let lam = |#[id] W(x), #[id] y| ();\n+    //~^ ERROR the attribute `id` is currently unknown to the compiler\n+    //~| ERROR the attribute `id` is currently unknown to the compiler\n+}\n+\n+impl W {\n+    fn inherent1(#[id] self, #[id] arg1: u8) {}\n+    //~^ ERROR the attribute `id` is currently unknown to the compiler\n+    //~| ERROR the attribute `id` is currently unknown to the compiler\n+    fn inherent2(#[id] &self, #[id] arg1: u8) {}\n+    //~^ ERROR the attribute `id` is currently unknown to the compiler\n+    //~| ERROR the attribute `id` is currently unknown to the compiler\n+    fn inherent3<'a>(#[id] &'a mut self, #[id] arg1: u8) {}\n+    //~^ ERROR the attribute `id` is currently unknown to the compiler\n+    //~| ERROR the attribute `id` is currently unknown to the compiler\n+    fn inherent4<'a>(#[id] self: Box<Self>, #[id] arg1: u8) {}\n+    //~^ ERROR the attribute `id` is currently unknown to the compiler\n+    //~| ERROR the attribute `id` is currently unknown to the compiler\n+}\n+\n+trait A {\n+    fn trait1(#[id] self, #[id] arg1: u8);\n+    //~^ ERROR the attribute `id` is currently unknown to the compiler\n+    //~| ERROR the attribute `id` is currently unknown to the compiler\n+    fn trait2(#[id] &self, #[id] arg1: u8);\n+    //~^ ERROR the attribute `id` is currently unknown to the compiler\n+    //~| ERROR the attribute `id` is currently unknown to the compiler\n+    fn trait3<'a>(#[id] &'a mut self, #[id] arg1: u8);\n+    //~^ ERROR the attribute `id` is currently unknown to the compiler\n+    //~| ERROR the attribute `id` is currently unknown to the compiler\n+    fn trait4<'a>(#[id] self: Box<Self>, #[id] arg1: u8, #[id] Vec<u8>);\n+    //~^ ERROR the attribute `id` is currently unknown to the compiler\n+    //~| ERROR the attribute `id` is currently unknown to the compiler\n+    //~| ERROR the attribute `id` is currently unknown to the compiler\n+}\n+\n+fn main() {}"}, {"sha": "69b9a46b3d502a9e8efc0f9d81add32fce6de4db", "filename": "src/test/ui/rfc-2565-param-attrs/proc-macro-cannot-be-used.stderr", "status": "added", "additions": 228, "deletions": 0, "changes": 228, "blob_url": "https://github.com/rust-lang/rust/blob/5187a3e15723c85cd7ef3418b0c0e61c79709f4c/src%2Ftest%2Fui%2Frfc-2565-param-attrs%2Fproc-macro-cannot-be-used.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/5187a3e15723c85cd7ef3418b0c0e61c79709f4c/src%2Ftest%2Fui%2Frfc-2565-param-attrs%2Fproc-macro-cannot-be-used.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2565-param-attrs%2Fproc-macro-cannot-be-used.stderr?ref=5187a3e15723c85cd7ef3418b0c0e61c79709f4c", "patch": "@@ -0,0 +1,228 @@\n+error[E0658]: the attribute `id` is currently unknown to the compiler and may have meaning added to it in the future\n+  --> $DIR/proc-macro-cannot-be-used.rs:11:21\n+   |\n+LL | extern \"C\" { fn ffi(#[id] arg1: i32, #[id] ...); }\n+   |                     ^^^^^\n+   |\n+   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n+   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n+\n+error[E0658]: the attribute `id` is currently unknown to the compiler and may have meaning added to it in the future\n+  --> $DIR/proc-macro-cannot-be-used.rs:11:38\n+   |\n+LL | extern \"C\" { fn ffi(#[id] arg1: i32, #[id] ...); }\n+   |                                      ^^^^^\n+   |\n+   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n+   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n+\n+error[E0658]: the attribute `id` is currently unknown to the compiler and may have meaning added to it in the future\n+  --> $DIR/proc-macro-cannot-be-used.rs:15:38\n+   |\n+LL | unsafe extern \"C\" fn cvar(arg1: i32, #[id] mut args: ...) {}\n+   |                                      ^^^^^\n+   |\n+   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n+   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n+\n+error[E0658]: the attribute `id` is currently unknown to the compiler and may have meaning added to it in the future\n+  --> $DIR/proc-macro-cannot-be-used.rs:18:28\n+   |\n+LL | type Alias = extern \"C\" fn(#[id] u8, #[id] ...);\n+   |                            ^^^^^\n+   |\n+   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n+   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n+\n+error[E0658]: the attribute `id` is currently unknown to the compiler and may have meaning added to it in the future\n+  --> $DIR/proc-macro-cannot-be-used.rs:18:38\n+   |\n+LL | type Alias = extern \"C\" fn(#[id] u8, #[id] ...);\n+   |                                      ^^^^^\n+   |\n+   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n+   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n+\n+error[E0658]: the attribute `id` is currently unknown to the compiler and may have meaning added to it in the future\n+  --> $DIR/proc-macro-cannot-be-used.rs:22:9\n+   |\n+LL | fn free(#[id] arg1: u8) {\n+   |         ^^^^^\n+   |\n+   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n+   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n+\n+error[E0658]: the attribute `id` is currently unknown to the compiler and may have meaning added to it in the future\n+  --> $DIR/proc-macro-cannot-be-used.rs:24:16\n+   |\n+LL |     let lam = |#[id] W(x), #[id] y| ();\n+   |                ^^^^^\n+   |\n+   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n+   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n+\n+error[E0658]: the attribute `id` is currently unknown to the compiler and may have meaning added to it in the future\n+  --> $DIR/proc-macro-cannot-be-used.rs:24:28\n+   |\n+LL |     let lam = |#[id] W(x), #[id] y| ();\n+   |                            ^^^^^\n+   |\n+   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n+   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n+\n+error[E0658]: the attribute `id` is currently unknown to the compiler and may have meaning added to it in the future\n+  --> $DIR/proc-macro-cannot-be-used.rs:30:18\n+   |\n+LL |     fn inherent1(#[id] self, #[id] arg1: u8) {}\n+   |                  ^^^^^\n+   |\n+   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n+   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n+\n+error[E0658]: the attribute `id` is currently unknown to the compiler and may have meaning added to it in the future\n+  --> $DIR/proc-macro-cannot-be-used.rs:30:30\n+   |\n+LL |     fn inherent1(#[id] self, #[id] arg1: u8) {}\n+   |                              ^^^^^\n+   |\n+   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n+   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n+\n+error[E0658]: the attribute `id` is currently unknown to the compiler and may have meaning added to it in the future\n+  --> $DIR/proc-macro-cannot-be-used.rs:33:18\n+   |\n+LL |     fn inherent2(#[id] &self, #[id] arg1: u8) {}\n+   |                  ^^^^^\n+   |\n+   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n+   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n+\n+error[E0658]: the attribute `id` is currently unknown to the compiler and may have meaning added to it in the future\n+  --> $DIR/proc-macro-cannot-be-used.rs:33:31\n+   |\n+LL |     fn inherent2(#[id] &self, #[id] arg1: u8) {}\n+   |                               ^^^^^\n+   |\n+   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n+   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n+\n+error[E0658]: the attribute `id` is currently unknown to the compiler and may have meaning added to it in the future\n+  --> $DIR/proc-macro-cannot-be-used.rs:36:22\n+   |\n+LL |     fn inherent3<'a>(#[id] &'a mut self, #[id] arg1: u8) {}\n+   |                      ^^^^^\n+   |\n+   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n+   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n+\n+error[E0658]: the attribute `id` is currently unknown to the compiler and may have meaning added to it in the future\n+  --> $DIR/proc-macro-cannot-be-used.rs:36:42\n+   |\n+LL |     fn inherent3<'a>(#[id] &'a mut self, #[id] arg1: u8) {}\n+   |                                          ^^^^^\n+   |\n+   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n+   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n+\n+error[E0658]: the attribute `id` is currently unknown to the compiler and may have meaning added to it in the future\n+  --> $DIR/proc-macro-cannot-be-used.rs:39:22\n+   |\n+LL |     fn inherent4<'a>(#[id] self: Box<Self>, #[id] arg1: u8) {}\n+   |                      ^^^^^\n+   |\n+   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n+   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n+\n+error[E0658]: the attribute `id` is currently unknown to the compiler and may have meaning added to it in the future\n+  --> $DIR/proc-macro-cannot-be-used.rs:39:45\n+   |\n+LL |     fn inherent4<'a>(#[id] self: Box<Self>, #[id] arg1: u8) {}\n+   |                                             ^^^^^\n+   |\n+   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n+   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n+\n+error[E0658]: the attribute `id` is currently unknown to the compiler and may have meaning added to it in the future\n+  --> $DIR/proc-macro-cannot-be-used.rs:45:15\n+   |\n+LL |     fn trait1(#[id] self, #[id] arg1: u8);\n+   |               ^^^^^\n+   |\n+   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n+   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n+\n+error[E0658]: the attribute `id` is currently unknown to the compiler and may have meaning added to it in the future\n+  --> $DIR/proc-macro-cannot-be-used.rs:45:27\n+   |\n+LL |     fn trait1(#[id] self, #[id] arg1: u8);\n+   |                           ^^^^^\n+   |\n+   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n+   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n+\n+error[E0658]: the attribute `id` is currently unknown to the compiler and may have meaning added to it in the future\n+  --> $DIR/proc-macro-cannot-be-used.rs:48:15\n+   |\n+LL |     fn trait2(#[id] &self, #[id] arg1: u8);\n+   |               ^^^^^\n+   |\n+   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n+   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n+\n+error[E0658]: the attribute `id` is currently unknown to the compiler and may have meaning added to it in the future\n+  --> $DIR/proc-macro-cannot-be-used.rs:48:28\n+   |\n+LL |     fn trait2(#[id] &self, #[id] arg1: u8);\n+   |                            ^^^^^\n+   |\n+   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n+   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n+\n+error[E0658]: the attribute `id` is currently unknown to the compiler and may have meaning added to it in the future\n+  --> $DIR/proc-macro-cannot-be-used.rs:51:19\n+   |\n+LL |     fn trait3<'a>(#[id] &'a mut self, #[id] arg1: u8);\n+   |                   ^^^^^\n+   |\n+   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n+   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n+\n+error[E0658]: the attribute `id` is currently unknown to the compiler and may have meaning added to it in the future\n+  --> $DIR/proc-macro-cannot-be-used.rs:51:39\n+   |\n+LL |     fn trait3<'a>(#[id] &'a mut self, #[id] arg1: u8);\n+   |                                       ^^^^^\n+   |\n+   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n+   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n+\n+error[E0658]: the attribute `id` is currently unknown to the compiler and may have meaning added to it in the future\n+  --> $DIR/proc-macro-cannot-be-used.rs:54:19\n+   |\n+LL |     fn trait4<'a>(#[id] self: Box<Self>, #[id] arg1: u8, #[id] Vec<u8>);\n+   |                   ^^^^^\n+   |\n+   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n+   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n+\n+error[E0658]: the attribute `id` is currently unknown to the compiler and may have meaning added to it in the future\n+  --> $DIR/proc-macro-cannot-be-used.rs:54:42\n+   |\n+LL |     fn trait4<'a>(#[id] self: Box<Self>, #[id] arg1: u8, #[id] Vec<u8>);\n+   |                                          ^^^^^\n+   |\n+   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n+   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n+\n+error[E0658]: the attribute `id` is currently unknown to the compiler and may have meaning added to it in the future\n+  --> $DIR/proc-macro-cannot-be-used.rs:54:58\n+   |\n+LL |     fn trait4<'a>(#[id] self: Box<Self>, #[id] arg1: u8, #[id] Vec<u8>);\n+   |                                                          ^^^^^\n+   |\n+   = note: for more information, see https://github.com/rust-lang/rust/issues/29642\n+   = help: add `#![feature(custom_attribute)]` to the crate attributes to enable\n+\n+error: aborting due to 25 previous errors\n+\n+For more information about this error, try `rustc --explain E0658`."}]}