{"sha": "a77bcadaa55801cc870ef740ca0d9fa4ca45df42", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE3N2JjYWRhYTU1ODAxY2M4NzBlZjc0MGNhMGQ5ZmE0Y2E0NWRmNDI=", "commit": {"author": {"name": "daxpedda", "email": "daxpedda@users.noreply.github.com", "date": "2018-12-25T11:48:54Z"}, "committer": {"name": "daxpedda", "email": "daxpedda@users.noreply.github.com", "date": "2018-12-25T11:48:54Z"}, "message": "Changed `macro_backtrace()` to `in_macro()`.", "tree": {"sha": "089e36337ec5541886e3b6f2fbf3bd609745330d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/089e36337ec5541886e3b6f2fbf3bd609745330d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a77bcadaa55801cc870ef740ca0d9fa4ca45df42", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQJWBAABCABAFiEEtfVYniVMfR+YKQUSxyLctqGR7qsFAlwiGSYiHGRheHBlZGRh\nQHVzZXJzLm5vcmVwbHkuZ2l0aHViLmNvbQAKCRDHIty2oZHuq1IdD/sGk2A7RyA1\n1bxn64LmbPzCgbUrW5NwsAFBPTdyt5TFR793eAqyJKR6JZatZ+1WbHSubcUlvHg5\nTqQxDE+5swbBppCpk/1C/f71sicbVnq/Vx0v3HQa1PgT3PYZXU9jElvYy81tBax/\nYC7yY3+8vSGBQ/YTbnPJbMTmn6/nNVCJggXp4C6Mdp1z8vlewRzbCjvklCPEIApz\nVanIb62dMrP5kmwaFWv8WWz59GOYjaYhn3Y/LTvl1LmIqZ6v5eQ0pjB4mSJJQNsX\n9c3yRLtKSOwmuxPeZsykZRmxOf2dLaNhY0C7SyKClyESlN3TgPuwkRKnc/H0kEaH\nZUjNooVck2H1tlvL6iO1R4j59NERG5whn4WyK4qib9wWShl6gUZD1ho66KoN98q+\nUCDZCesT/h8eEdTb2GGl5dcIUDQTvBsZv8NSLZgNQuP7pNnA2+wD1hiH39ZwqzpJ\n010geya6pWuC3bv3kdisfw5+b6HaTVBH5cWWbQq4j5yk3hQDYG4gbpyvm/GZHqls\nDfE0MG18FehlB2cfwuqWYM0qEaKqCR7OmTz0gMa1GhLwnIYuVGY3432XEgpq5ZCg\nLziIlT8fOjfm+1SvFR1DDhU45WkpllmF4SAATtwoFlfuZDK1ZdxeMk9J2Sin1RcY\nDEI04J8d+W0ebwk/rx/5+/LWWjsmCw+H8g==\n=iW2t\n-----END PGP SIGNATURE-----", "payload": "tree 089e36337ec5541886e3b6f2fbf3bd609745330d\nparent b5587a894f34e77b103947d37594c91ce124a2c0\nauthor daxpedda <daxpedda@users.noreply.github.com> 1545738534 +0100\ncommitter daxpedda <daxpedda@users.noreply.github.com> 1545738534 +0100\n\nChanged `macro_backtrace()` to `in_macro()`.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a77bcadaa55801cc870ef740ca0d9fa4ca45df42", "html_url": "https://github.com/rust-lang/rust/commit/a77bcadaa55801cc870ef740ca0d9fa4ca45df42", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a77bcadaa55801cc870ef740ca0d9fa4ca45df42/comments", "author": {"login": "daxpedda", "id": 1645124, "node_id": "MDQ6VXNlcjE2NDUxMjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1645124?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daxpedda", "html_url": "https://github.com/daxpedda", "followers_url": "https://api.github.com/users/daxpedda/followers", "following_url": "https://api.github.com/users/daxpedda/following{/other_user}", "gists_url": "https://api.github.com/users/daxpedda/gists{/gist_id}", "starred_url": "https://api.github.com/users/daxpedda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daxpedda/subscriptions", "organizations_url": "https://api.github.com/users/daxpedda/orgs", "repos_url": "https://api.github.com/users/daxpedda/repos", "events_url": "https://api.github.com/users/daxpedda/events{/privacy}", "received_events_url": "https://api.github.com/users/daxpedda/received_events", "type": "User", "site_admin": false}, "committer": {"login": "daxpedda", "id": 1645124, "node_id": "MDQ6VXNlcjE2NDUxMjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1645124?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daxpedda", "html_url": "https://github.com/daxpedda", "followers_url": "https://api.github.com/users/daxpedda/followers", "following_url": "https://api.github.com/users/daxpedda/following{/other_user}", "gists_url": "https://api.github.com/users/daxpedda/gists{/gist_id}", "starred_url": "https://api.github.com/users/daxpedda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daxpedda/subscriptions", "organizations_url": "https://api.github.com/users/daxpedda/orgs", "repos_url": "https://api.github.com/users/daxpedda/repos", "events_url": "https://api.github.com/users/daxpedda/events{/privacy}", "received_events_url": "https://api.github.com/users/daxpedda/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b5587a894f34e77b103947d37594c91ce124a2c0", "url": "https://api.github.com/repos/rust-lang/rust/commits/b5587a894f34e77b103947d37594c91ce124a2c0", "html_url": "https://github.com/rust-lang/rust/commit/b5587a894f34e77b103947d37594c91ce124a2c0"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "912ed43aab3b12a354a2976918dcfde81714acbb", "filename": "clippy_lints/src/implicit_return.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a77bcadaa55801cc870ef740ca0d9fa4ca45df42/clippy_lints%2Fsrc%2Fimplicit_return.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a77bcadaa55801cc870ef740ca0d9fa4ca45df42/clippy_lints%2Fsrc%2Fimplicit_return.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fimplicit_return.rs?ref=a77bcadaa55801cc870ef740ca0d9fa4ca45df42", "patch": "@@ -12,7 +12,7 @@ use crate::rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n use crate::rustc::{declare_tool_lint, lint_array};\n use crate::rustc_errors::Applicability;\n use crate::syntax::{ast::NodeId, source_map::Span};\n-use crate::utils::{snippet_opt, span_lint_and_then};\n+use crate::utils::{snippet_opt, span_lint_and_then, in_macro};\n \n /// **What it does:** Checks for missing return statements at the end of a block.\n ///\n@@ -124,7 +124,7 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for Pass {\n \n         // checking return type through MIR, HIR is not able to determine inferred closure return types\n         // make sure it's not a macro\n-        if !mir.return_ty().is_unit() && span.macro_backtrace().is_empty() {\n+        if !mir.return_ty().is_unit() && !in_macro(span) {\n             Self::expr_match(cx, &body.value);\n         }\n     }"}, {"sha": "66f85e88398036a7f5b31b792cd3f8cf896c422d", "filename": "clippy_lints/src/loops.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a77bcadaa55801cc870ef740ca0d9fa4ca45df42/clippy_lints%2Fsrc%2Floops.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a77bcadaa55801cc870ef740ca0d9fa4ca45df42/clippy_lints%2Fsrc%2Floops.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Floops.rs?ref=a77bcadaa55801cc870ef740ca0d9fa4ca45df42", "patch": "@@ -479,7 +479,7 @@ impl LintPass for Pass {\n impl<'a, 'tcx> LateLintPass<'a, 'tcx> for Pass {\n     fn check_expr(&mut self, cx: &LateContext<'a, 'tcx>, expr: &'tcx Expr) {\n         // we don't want to check expanded macros\n-        if !expr.span.macro_backtrace().is_empty() {\n+        if !in_macro(expr.span) {\n             return;\n         }\n "}]}