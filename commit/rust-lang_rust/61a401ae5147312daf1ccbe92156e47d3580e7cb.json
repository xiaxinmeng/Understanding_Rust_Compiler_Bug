{"sha": "61a401ae5147312daf1ccbe92156e47d3580e7cb", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYxYTQwMWFlNTE0NzMxMmRhZjFjY2JlOTIxNTZlNDdkMzU4MGU3Y2I=", "commit": {"author": {"name": "topecongiro", "email": "seuchida@gmail.com", "date": "2018-04-30T06:49:32Z"}, "committer": {"name": "topecongiro", "email": "seuchida@gmail.com", "date": "2018-04-30T06:49:32Z"}, "message": "Use correct one line width for list attribute\n\nCloses #2647.", "tree": {"sha": "f604adbd2bb0da0a0e8d5e72f8fab273e7aef0ef", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f604adbd2bb0da0a0e8d5e72f8fab273e7aef0ef"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/61a401ae5147312daf1ccbe92156e47d3580e7cb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/61a401ae5147312daf1ccbe92156e47d3580e7cb", "html_url": "https://github.com/rust-lang/rust/commit/61a401ae5147312daf1ccbe92156e47d3580e7cb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/61a401ae5147312daf1ccbe92156e47d3580e7cb/comments", "author": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "committer": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9f3f48c85c02bccd6d91365b60ce982b058aa1ca", "url": "https://api.github.com/repos/rust-lang/rust/commits/9f3f48c85c02bccd6d91365b60ce982b058aa1ca", "html_url": "https://github.com/rust-lang/rust/commit/9f3f48c85c02bccd6d91365b60ce982b058aa1ca"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "83de61c5e253addf6a2188fe305b501d4f392580", "filename": "src/attr.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/61a401ae5147312daf1ccbe92156e47d3580e7cb/src%2Fattr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61a401ae5147312daf1ccbe92156e47d3580e7cb/src%2Fattr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fattr.rs?ref=61a401ae5147312daf1ccbe92156e47d3580e7cb", "patch": "@@ -247,7 +247,8 @@ impl Rewrite for ast::MetaItem {\n                     config: context.config,\n                 };\n                 let item_str = write_list(&item_vec, &fmt)?;\n-                let one_line_budget = shape.offset_left(name.len())?.sub_width(2)?.width;\n+                // 3 = \"()\" and \"]\"\n+                let one_line_budget = shape.offset_left(name.len())?.sub_width(3)?.width;\n                 if context.config.indent_style() == IndentStyle::Visual\n                     || (!item_str.contains('\\n') && item_str.len() <= one_line_budget)\n                 {"}, {"sha": "d5c244a9bf88456a8cf3f4d95e9da8bc3d6f2429", "filename": "tests/source/attrib.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/61a401ae5147312daf1ccbe92156e47d3580e7cb/tests%2Fsource%2Fattrib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61a401ae5147312daf1ccbe92156e47d3580e7cb/tests%2Fsource%2Fattrib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fattrib.rs?ref=61a401ae5147312daf1ccbe92156e47d3580e7cb", "patch": "@@ -157,3 +157,7 @@ pub struct HP(pub u8);\n \n // Long `#[doc = \"...\"]`\n struct A { #[doc = \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\"] b: i32 }\n+\n+// #2647\n+#[cfg(feature = \"this_line_is_101_characters_long_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\")]\n+pub fn foo() {}"}, {"sha": "45dc4ea8ba956f9a6bac2329c005a7d39fac3ae7", "filename": "tests/target/attrib.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/61a401ae5147312daf1ccbe92156e47d3580e7cb/tests%2Ftarget%2Fattrib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61a401ae5147312daf1ccbe92156e47d3580e7cb/tests%2Ftarget%2Fattrib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fattrib.rs?ref=61a401ae5147312daf1ccbe92156e47d3580e7cb", "patch": "@@ -165,3 +165,9 @@ struct A {\n     #[doc = \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\"]\n     b: i32,\n }\n+\n+// #2647\n+#[cfg(\n+    feature = \"this_line_is_101_characters_long_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\"\n+)]\n+pub fn foo() {}"}]}