{"sha": "fd182f41dc5e0c90b491c416b60458e105e96659", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZkMTgyZjQxZGM1ZTBjOTBiNDkxYzQxNmI2MDQ1OGUxMDVlOTY2NTk=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2015-04-01T20:22:12Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2015-04-01T20:22:12Z"}, "message": "rollup merge of #23933: kgv/kgv_fix\n\nFix example and some text for: `read_line` takes `&mut String` and return `Result` instead `IoResult`.\n\nr? @steveklabnik", "tree": {"sha": "75bca920f95f84f4d78656d4433312e7a9d65806", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/75bca920f95f84f4d78656d4433312e7a9d65806"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fd182f41dc5e0c90b491c416b60458e105e96659", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fd182f41dc5e0c90b491c416b60458e105e96659", "html_url": "https://github.com/rust-lang/rust/commit/fd182f41dc5e0c90b491c416b60458e105e96659", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fd182f41dc5e0c90b491c416b60458e105e96659/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a3f6273795363c29f3b70c9fa1229c3ed5c14afd", "url": "https://api.github.com/repos/rust-lang/rust/commits/a3f6273795363c29f3b70c9fa1229c3ed5c14afd", "html_url": "https://github.com/rust-lang/rust/commit/a3f6273795363c29f3b70c9fa1229c3ed5c14afd"}, {"sha": "343c110e76ddb673ed8bfc22ea917c3146c7b6e3", "url": "https://api.github.com/repos/rust-lang/rust/commits/343c110e76ddb673ed8bfc22ea917c3146c7b6e3", "html_url": "https://github.com/rust-lang/rust/commit/343c110e76ddb673ed8bfc22ea917c3146c7b6e3"}], "stats": {"total": 13, "additions": 7, "deletions": 6}, "files": [{"sha": "b9e7bd78c5b2fa26dd200d632ce8875b1da846e4", "filename": "src/doc/trpl/error-handling.md", "status": "modified", "additions": 7, "deletions": 6, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/fd182f41dc5e0c90b491c416b60458e105e96659/src%2Fdoc%2Ftrpl%2Ferror-handling.md", "raw_url": "https://github.com/rust-lang/rust/raw/fd182f41dc5e0c90b491c416b60458e105e96659/src%2Fdoc%2Ftrpl%2Ferror-handling.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Ftrpl%2Ferror-handling.md?ref=fd182f41dc5e0c90b491c416b60458e105e96659", "patch": "@@ -200,15 +200,15 @@ Because these kinds of situations are relatively rare, use panics sparingly.\n # Upgrading failures to panics\n \n In certain circumstances, even though a function may fail, we may want to treat\n-it as a panic instead. For example, `io::stdin().read_line()` returns an\n-`IoResult<String>`, a form of `Result`, when there is an error reading the\n-line. This allows us to handle and possibly recover from this sort of error.\n+it as a panic instead. For example, `io::stdin().read_line(&mut buffer)` returns\n+an `Result<usize>`, when there is an error reading the line. This allows us to\n+handle and possibly recover from error.\n \n If we don't want to handle this error, and would rather just abort the program,\n we can use the `unwrap()` method:\n \n ```{rust,ignore}\n-io::stdin().read_line().unwrap();\n+io::stdin().read_line(&mut buffer).unwrap();\n ```\n \n `unwrap()` will `panic!` if the `Option` is `None`. This basically says \"Give\n@@ -219,12 +219,13 @@ shorter. Sometimes, just crashing is appropriate.\n There's another way of doing this that's a bit nicer than `unwrap()`:\n \n ```{rust,ignore}\n-let input = io::stdin().read_line()\n+let mut buffer = String::new();\n+let input = io::stdin().read_line(&mut buffer)\n                        .ok()\n                        .expect(\"Failed to read line\");\n ```\n \n-`ok()` converts the `IoResult` into an `Option`, and `expect()` does the same\n+`ok()` converts the `Result` into an `Option`, and `expect()` does the same\n thing as `unwrap()`, but takes a message. This message is passed along to the\n underlying `panic!`, providing a better error message if the code errors.\n "}]}