{"sha": "a239d71729973d56221dd5a51eb987972ecc44d2", "node_id": "MDY6Q29tbWl0NzI0NzEyOmEyMzlkNzE3Mjk5NzNkNTYyMjFkZDVhNTFlYjk4Nzk3MmVjYzQ0ZDI=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2014-12-31T00:26:09Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2014-12-31T00:26:09Z"}, "message": "rollup merge of #20323: brson/beta\n\nAdds a new 'beta cycle' variable that can be appended to the '-beta' version label, e.g. '-beta1'. Changes the version label for the beta channel temporarily to 'alpha'. Changes the artifact name of the beta channel to contain the version number instead of just being called 'beta'. The beta cycle number is currently set to 1.\n\nThe impact of this is that the first alphas will be called '1.0.0-alpha1' and the artifacts will also be called '1.0.0-alpha1-*.tar.gz'. We could alternately leave out the cycle number if we are confident there will be only one alpha cycle.\n\nr? @alexcrichton cc @nikomatsakis @huonw", "tree": {"sha": "a58f1453f570e54c7eec338a8b53b051920f6b82", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a58f1453f570e54c7eec338a8b53b051920f6b82"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a239d71729973d56221dd5a51eb987972ecc44d2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a239d71729973d56221dd5a51eb987972ecc44d2", "html_url": "https://github.com/rust-lang/rust/commit/a239d71729973d56221dd5a51eb987972ecc44d2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a239d71729973d56221dd5a51eb987972ecc44d2/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d1a19e830312d54adb6888c3956e3a3223f9af36", "url": "https://api.github.com/repos/rust-lang/rust/commits/d1a19e830312d54adb6888c3956e3a3223f9af36", "html_url": "https://github.com/rust-lang/rust/commit/d1a19e830312d54adb6888c3956e3a3223f9af36"}, {"sha": "20fcece88bfdca78695b2d5b454d2cf1570625b6", "url": "https://api.github.com/repos/rust-lang/rust/commits/20fcece88bfdca78695b2d5b454d2cf1570625b6", "html_url": "https://github.com/rust-lang/rust/commit/20fcece88bfdca78695b2d5b454d2cf1570625b6"}], "stats": {"total": 8, "additions": 6, "deletions": 2}, "files": [{"sha": "32167dfd8999019c5b5ee13bd23611ce8e0b6587", "filename": "mk/main.mk", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a239d71729973d56221dd5a51eb987972ecc44d2/mk%2Fmain.mk", "raw_url": "https://github.com/rust-lang/rust/raw/a239d71729973d56221dd5a51eb987972ecc44d2/mk%2Fmain.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fmain.mk?ref=a239d71729973d56221dd5a51eb987972ecc44d2", "patch": "@@ -15,6 +15,9 @@\n # The version number\n CFG_RELEASE_NUM=0.13.0\n \n+# An optional number to put after the label, e.g. '2' -> '-beta2'\n+CFG_BETA_CYCLE=\n+\n CFG_FILENAME_EXTRA=4e7c5e5c\n \n ifeq ($(CFG_RELEASE_CHANNEL),stable)\n@@ -24,12 +27,13 @@ CFG_RELEASE=$(CFG_RELEASE_NUM)\n CFG_PACKAGE_VERS=$(CFG_RELEASE_NUM)\n endif\n ifeq ($(CFG_RELEASE_CHANNEL),beta)\n-CFG_RELEASE=$(CFG_RELEASE_NUM)-beta\n+# The beta channel is temporarily called 'alpha'\n+CFG_RELEASE=$(CFG_RELEASE_NUM)-alpha$(CFG_BETA_CYCLE)\n # When building beta/nightly distributables just reuse the same \"beta\"\n # name so when we upload we'll always override the previous\n # nighly. This doesn't actually impact the version reported by rustc -\n # it's just for file naming.\n-CFG_PACKAGE_VERS=beta\n+CFG_PACKAGE_VERS=alpha\n endif\n ifeq ($(CFG_RELEASE_CHANNEL),nightly)\n CFG_RELEASE=$(CFG_RELEASE_NUM)-nightly"}]}