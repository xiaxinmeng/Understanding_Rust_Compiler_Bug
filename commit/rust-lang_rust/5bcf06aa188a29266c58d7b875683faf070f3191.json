{"sha": "5bcf06aa188a29266c58d7b875683faf070f3191", "node_id": "MDY6Q29tbWl0NzI0NzEyOjViY2YwNmFhMTg4YTI5MjY2YzU4ZDdiODc1NjgzZmFmMDcwZjMxOTE=", "commit": {"author": {"name": "Tatsuyuki Ishi", "email": "ishitatsuyuki@gmail.com", "date": "2017-05-19T11:36:49Z"}, "committer": {"name": "Tatsuyuki Ishi", "email": "ishitatsuyuki@gmail.com", "date": "2017-05-25T04:57:51Z"}, "message": "bootstrap.py: Filter instead of iteration", "tree": {"sha": "18f5e662179a4c97e03fd66599733c591866fc1b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/18f5e662179a4c97e03fd66599733c591866fc1b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5bcf06aa188a29266c58d7b875683faf070f3191", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5bcf06aa188a29266c58d7b875683faf070f3191", "html_url": "https://github.com/rust-lang/rust/commit/5bcf06aa188a29266c58d7b875683faf070f3191", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5bcf06aa188a29266c58d7b875683faf070f3191/comments", "author": {"login": "ishitatsuyuki", "id": 12389383, "node_id": "MDQ6VXNlcjEyMzg5Mzgz", "avatar_url": "https://avatars.githubusercontent.com/u/12389383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ishitatsuyuki", "html_url": "https://github.com/ishitatsuyuki", "followers_url": "https://api.github.com/users/ishitatsuyuki/followers", "following_url": "https://api.github.com/users/ishitatsuyuki/following{/other_user}", "gists_url": "https://api.github.com/users/ishitatsuyuki/gists{/gist_id}", "starred_url": "https://api.github.com/users/ishitatsuyuki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ishitatsuyuki/subscriptions", "organizations_url": "https://api.github.com/users/ishitatsuyuki/orgs", "repos_url": "https://api.github.com/users/ishitatsuyuki/repos", "events_url": "https://api.github.com/users/ishitatsuyuki/events{/privacy}", "received_events_url": "https://api.github.com/users/ishitatsuyuki/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ishitatsuyuki", "id": 12389383, "node_id": "MDQ6VXNlcjEyMzg5Mzgz", "avatar_url": "https://avatars.githubusercontent.com/u/12389383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ishitatsuyuki", "html_url": "https://github.com/ishitatsuyuki", "followers_url": "https://api.github.com/users/ishitatsuyuki/followers", "following_url": "https://api.github.com/users/ishitatsuyuki/following{/other_user}", "gists_url": "https://api.github.com/users/ishitatsuyuki/gists{/gist_id}", "starred_url": "https://api.github.com/users/ishitatsuyuki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ishitatsuyuki/subscriptions", "organizations_url": "https://api.github.com/users/ishitatsuyuki/orgs", "repos_url": "https://api.github.com/users/ishitatsuyuki/repos", "events_url": "https://api.github.com/users/ishitatsuyuki/events{/privacy}", "received_events_url": "https://api.github.com/users/ishitatsuyuki/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1fea55ba51be4a0cc68c0ea820cf3e7eb8995b9a", "url": "https://api.github.com/repos/rust-lang/rust/commits/1fea55ba51be4a0cc68c0ea820cf3e7eb8995b9a", "html_url": "https://github.com/rust-lang/rust/commit/1fea55ba51be4a0cc68c0ea820cf3e7eb8995b9a"}], "stats": {"total": 17, "additions": 8, "deletions": 9}, "files": [{"sha": "b7a13b8096905c42d5238526c1a65c82b4b5b314", "filename": "src/bootstrap/bootstrap.py", "status": "modified", "additions": 8, "deletions": 9, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/5bcf06aa188a29266c58d7b875683faf070f3191/src%2Fbootstrap%2Fbootstrap.py", "raw_url": "https://github.com/rust-lang/rust/raw/5bcf06aa188a29266c58d7b875683faf070f3191/src%2Fbootstrap%2Fbootstrap.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbootstrap.py?ref=5bcf06aa188a29266c58d7b875683faf070f3191", "patch": "@@ -565,15 +565,14 @@ def update_submodules(self):\n         submodules = [s.split()[1] for s in subprocess.check_output(\n             [\"git\", \"config\", \"--file\", os.path.join(\n                 self.rust_root, \".gitmodules\"), \"--get-regexp\", \"path\"]).splitlines()]\n-        for module in submodules:\n-            if module.endswith(b\"llvm\") and \\\n-                    (self.get_toml('llvm-config') or self.get_mk('CFG_LLVM_ROOT')):\n-                continue\n-            if module.endswith(b\"jemalloc\") and \\\n-                    (self.get_toml('jemalloc') or self.get_mk('CFG_JEMALLOC_ROOT')):\n-                continue\n-            run([\"git\", \"submodule\", \"update\",\n-                      \"--init\", module], cwd=self.rust_root)\n+        submodules = [module for module in submodules\n+                      if not ((module.endswith(b\"llvm\") and\n+                              (self.get_toml('llvm-config') or self.get_mk('CFG_LLVM_ROOT'))) or\n+                      (module.endswith(b\"jemalloc\") and\n+                       (self.get_toml('jemalloc') or self.get_mk('CFG_JEMALLOC_ROOT'))))\n+                      ]\n+        run([\"git\", \"submodule\", \"update\",\n+                  \"--init\"] + submodules, cwd=self.rust_root)\n         run([\"git\", \"submodule\", \"-q\", \"foreach\", \"git\",\n                   \"reset\", \"-q\", \"--hard\"], cwd=self.rust_root)\n         run([\"git\", \"submodule\", \"-q\", \"foreach\", \"git\","}]}