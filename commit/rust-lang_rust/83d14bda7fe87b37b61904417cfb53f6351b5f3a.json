{"sha": "83d14bda7fe87b37b61904417cfb53f6351b5f3a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgzZDE0YmRhN2ZlODdiMzdiNjE5MDQ0MTdjZmI1M2Y2MzUxYjVmM2E=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2017-09-07T05:09:18Z"}, "committer": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2017-09-07T09:14:27Z"}, "message": "Disable the 80-year-difference test on 32-bit-time_t platforms.", "tree": {"sha": "b4bea11c04abd47a8f979ab374850b42492e786b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b4bea11c04abd47a8f979ab374850b42492e786b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/83d14bda7fe87b37b61904417cfb53f6351b5f3a", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIcBAABCAAGBQJZsQ3zAAoJEP72yAUdDgE8YfEQAJtpXnt3lmheZ+yqeMeIGbud\nw1n9X0pLxV+S5/H2INm/mmyJPeR/HFlriMrVaYRUjG5iRRmzLuMbyv9mS5bPnUeg\nFo5ScPCOtMrvBmJ72ub3Ty9JTOlDWDb0T5FfTd2Y2X0uT4rNjmKP7c/VzmiB0FX2\nO8bpS6sbDtryiiG7gQJAJHSm5lSZXYkRYi400NxkGrMuu7iyUMHKM9zv9din3tNw\nAQFohqZVJJ5cBIbQKGdkVnpwlUsNVIyU7yqeRlAx7EgGzIDuhG++kECr5XTJcT+m\nwut662hmTPKlofmgBIHNYRlySwVhNu9fAkMbP0rFxT5RNtwSSwrVP78z3Ju8+srL\n0mV3iaVn0UPVHa93f6xcdcr3SstAuiRISMGcJPZO4kSS89O3IL9fvC3VMzw1iRka\nxdUOzrqRNf13ZyhxW6TX7I960qbHMh4zQPq5rWAiNSsDJEnQC2vHAhO2fuUvHI0h\nNIz+ZC0IzteRn53mPmGE5rNMq59OcVA9appP8jWnzKbK9iS61KJl/4QUecm8rfGF\njq8Sijf5LVEz8BTLx5ZRxNQtpW8qHKf3SoaSGmuGqt2kHc83aqJTUtp1Y1vSteS2\n2N6QJQdeXxiMLWos0REIssqzhiYmG3rAN6WR3SghrUDL7K9CpQTklLDOX4X1W61Y\nLrxpid3mOHmEq94ReusL\n=A71y\n-----END PGP SIGNATURE-----", "payload": "tree b4bea11c04abd47a8f979ab374850b42492e786b\nparent 756026563d82f8d339f7d66c4ca5f5974e210f82\nauthor kennytm <kennytm@gmail.com> 1504760958 +0800\ncommitter kennytm <kennytm@gmail.com> 1504775667 +0800\n\nDisable the 80-year-difference test on 32-bit-time_t platforms.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/83d14bda7fe87b37b61904417cfb53f6351b5f3a", "html_url": "https://github.com/rust-lang/rust/commit/83d14bda7fe87b37b61904417cfb53f6351b5f3a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/83d14bda7fe87b37b61904417cfb53f6351b5f3a/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "756026563d82f8d339f7d66c4ca5f5974e210f82", "url": "https://api.github.com/repos/rust-lang/rust/commits/756026563d82f8d339f7d66c4ca5f5974e210f82", "html_url": "https://github.com/rust-lang/rust/commit/756026563d82f8d339f7d66c4ca5f5974e210f82"}], "stats": {"total": 9, "additions": 6, "deletions": 3}, "files": [{"sha": "d4993ded843ddb5304306e4588728089b62ffb58", "filename": "src/libstd/time/mod.rs", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/83d14bda7fe87b37b61904417cfb53f6351b5f3a/src%2Flibstd%2Ftime%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/83d14bda7fe87b37b61904417cfb53f6351b5f3a/src%2Flibstd%2Ftime%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Ftime%2Fmod.rs?ref=83d14bda7fe87b37b61904417cfb53f6351b5f3a", "patch": "@@ -520,9 +520,12 @@ mod tests {\n \n         assert_almost_eq!(a - second + second, a);\n \n-        let eighty_years = second * 60 * 60 * 24 * 365 * 80;\n-        assert_almost_eq!(a - eighty_years + eighty_years, a);\n-        assert_almost_eq!(a - (eighty_years * 10) + (eighty_years * 10), a);\n+        // A difference of 80 and 800 years cannot fit inside a 32-bit time_t\n+        if !(cfg!(unix) && ::mem::size_of::<::libc::time_t>() <= 4) {\n+            let eighty_years = second * 60 * 60 * 24 * 365 * 80;\n+            assert_almost_eq!(a - eighty_years + eighty_years, a);\n+            assert_almost_eq!(a - (eighty_years * 10) + (eighty_years * 10), a);\n+        }\n \n         let one_second_from_epoch = UNIX_EPOCH + Duration::new(1, 0);\n         let one_second_from_epoch2 = UNIX_EPOCH + Duration::new(0, 500_000_000)"}]}