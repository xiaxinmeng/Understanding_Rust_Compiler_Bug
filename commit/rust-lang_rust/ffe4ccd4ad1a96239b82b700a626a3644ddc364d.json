{"sha": "ffe4ccd4ad1a96239b82b700a626a3644ddc364d", "node_id": "C_kwDOAAsO6NoAKGZmZTRjY2Q0YWQxYTk2MjM5YjgyYjcwMGE2MjZhMzY0NGRkYzM2NGQ", "commit": {"author": {"name": "Pietro Albini", "email": "pietro.albini@ferrous-systems.com", "date": "2023-04-14T09:40:07Z"}, "committer": {"name": "Pietro Albini", "email": "pietro.albini@ferrous-systems.com", "date": "2023-04-14T09:40:07Z"}, "message": "rename rust-lldb to needs-rust-lldb for consistency", "tree": {"sha": "6e81523fe5f8324b54dad579b6474a9993aefbc1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6e81523fe5f8324b54dad579b6474a9993aefbc1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ffe4ccd4ad1a96239b82b700a626a3644ddc364d", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEMycKYjxLY0eb13b7zXazX3c0dp4FAmQ5H4AACgkQzXazX3c0\ndp4zHQ/+J2lFqnwL2bIbLXR7a0tMGVdFgd/j80ylumRzW6d6CANvf8sSHrmHW/Hi\nZVVRrrlxwj9eseXV4VxyYr3r/uHPulx+Ht318h9zxzCEVrcHtVXxSmiK9kYLnVRt\nrTPq6uIrPZGl1i6lp/Qg/rzW0IE4nTdBsuDRbxQwlYEP1I+GIQDh680LTAKHyIFr\nAoLbR+IOv6VDIBOtYgqiHXr8QynMtOArG4/m2Jcvee8x4+XUs7SvyXrZS03s9KHt\nJureeHz6yc9I0MCXMYBcYkwpQxf3hd1lngnw123GzPA33tKw41rUuT4CPelVrWiC\ndUqci5ZzzAQH7hiRwlTMMSvE7m2Lo+/c5bu8MC7rw/+a2uWOFLyaSTII3zOrC9Gt\ncJ6IQBRDST+7eLvJJAc54B6OoHFu1h7W8C1X1cwtEpivfAi20NCK6dXBMcVZ0jp3\nP16hWZ2WI/YOiumz0mTWf/Ad5xScGxu4VuGtwRWDNDIeFf80+nN7kZQnWDCZeEb5\nFdXU3nsQWVR7cQTcSmOsCtbRaKO8TzKeOQ+4O8c0iUn1WCnrrz4jgJYyXyKrvFuC\nRhSYHgaq8tmBN/8DR3ne3dq07rORcOLrjELiQb77Is8X3Cx+SpEh3ltxcan1I9/y\nVFC5Temkj6tU5pAJxHQoiM/85X4/fWdezm+2WYw1MnPMl9V72YU=\n=YAt9\n-----END PGP SIGNATURE-----", "payload": "tree 6e81523fe5f8324b54dad579b6474a9993aefbc1\nparent aea43673f2efce50501e55c5186805cebc3deb4a\nauthor Pietro Albini <pietro.albini@ferrous-systems.com> 1681465207 +0200\ncommitter Pietro Albini <pietro.albini@ferrous-systems.com> 1681465207 +0200\n\nrename rust-lldb to needs-rust-lldb for consistency\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ffe4ccd4ad1a96239b82b700a626a3644ddc364d", "html_url": "https://github.com/rust-lang/rust/commit/ffe4ccd4ad1a96239b82b700a626a3644ddc364d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ffe4ccd4ad1a96239b82b700a626a3644ddc364d/comments", "author": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "aea43673f2efce50501e55c5186805cebc3deb4a", "url": "https://api.github.com/repos/rust-lang/rust/commits/aea43673f2efce50501e55c5186805cebc3deb4a", "html_url": "https://github.com/rust-lang/rust/commit/aea43673f2efce50501e55c5186805cebc3deb4a"}], "stats": {"total": 33, "additions": 15, "deletions": 18}, "files": [{"sha": "ac659c8940540dec161acef0e114917783d4caf0", "filename": "src/tools/compiletest/src/header.rs", "status": "modified", "additions": 0, "deletions": 8, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/ffe4ccd4ad1a96239b82b700a626a3644ddc364d/src%2Ftools%2Fcompiletest%2Fsrc%2Fheader.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ffe4ccd4ad1a96239b82b700a626a3644ddc364d/src%2Ftools%2Fcompiletest%2Fsrc%2Fheader.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fheader.rs?ref=ffe4ccd4ad1a96239b82b700a626a3644ddc364d", "patch": "@@ -943,14 +943,6 @@ pub fn make_test_description<R: Read>(\n             }\n         }\n \n-        if config.debugger == Some(Debugger::Lldb) && !config.lldb_native_rust {\n-            if config.parse_name_directive(ln, \"rust-lldb\") {\n-                decision!(IgnoreDecision::Ignore {\n-                    reason: \"ignored on targets wihtout Rust's LLDB\".into()\n-                });\n-            }\n-        }\n-\n         should_fail |= config.parse_name_directive(ln, \"should-fail\");\n     });\n "}, {"sha": "8b42ef5db596c9be6a92074cac233f779e856aab", "filename": "src/tools/compiletest/src/header/needs.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/ffe4ccd4ad1a96239b82b700a626a3644ddc364d/src%2Ftools%2Fcompiletest%2Fsrc%2Fheader%2Fneeds.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ffe4ccd4ad1a96239b82b700a626a3644ddc364d/src%2Ftools%2Fcompiletest%2Fsrc%2Fheader%2Fneeds.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fheader%2Fneeds.rs?ref=ffe4ccd4ad1a96239b82b700a626a3644ddc364d", "patch": "@@ -1,4 +1,4 @@\n-use crate::common::Config;\n+use crate::common::{Config, Debugger};\n use crate::header::IgnoreDecision;\n use crate::util;\n \n@@ -100,6 +100,11 @@ pub(super) fn handle_needs(\n             condition: cache.rust_lld,\n             ignore_reason: \"ignored on targets without Rust's LLD\",\n         },\n+        Need {\n+            name: \"needs-rust-lldb\",\n+            condition: config.debugger != Some(Debugger::Lldb) || config.lldb_native_rust,\n+            ignore_reason: \"ignored on targets without Rust's LLDB\",\n+        },\n         Need {\n             name: \"needs-i686-dlltool\",\n             condition: cache.i686_dlltool,"}, {"sha": "a1735520b11736f581d242cacb0cc9310cce8768", "filename": "tests/debuginfo/associated-types.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ffe4ccd4ad1a96239b82b700a626a3644ddc364d/tests%2Fdebuginfo%2Fassociated-types.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ffe4ccd4ad1a96239b82b700a626a3644ddc364d/tests%2Fdebuginfo%2Fassociated-types.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdebuginfo%2Fassociated-types.rs?ref=ffe4ccd4ad1a96239b82b700a626a3644ddc364d", "patch": "@@ -1,6 +1,6 @@\n // Some versions of the non-rust-enabled LLDB print the wrong generic\n // parameter type names in this test.\n-// rust-lldb\n+// needs-rust-lldb\n \n // compile-flags:-g\n "}, {"sha": "37d458cb494ce69e7846ec5356b3dd733bd65817", "filename": "tests/debuginfo/borrowed-enum.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ffe4ccd4ad1a96239b82b700a626a3644ddc364d/tests%2Fdebuginfo%2Fborrowed-enum.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ffe4ccd4ad1a96239b82b700a626a3644ddc364d/tests%2Fdebuginfo%2Fborrowed-enum.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdebuginfo%2Fborrowed-enum.rs?ref=ffe4ccd4ad1a96239b82b700a626a3644ddc364d", "patch": "@@ -1,6 +1,6 @@\n // Require a gdb or lldb that can read DW_TAG_variant_part.\n // min-gdb-version: 8.2\n-// rust-lldb\n+// needs-rust-lldb\n \n // compile-flags:-g\n "}, {"sha": "2d54c2b07df309aa308208176c95ed09a63fddd7", "filename": "tests/debuginfo/generic-method-on-generic-struct.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ffe4ccd4ad1a96239b82b700a626a3644ddc364d/tests%2Fdebuginfo%2Fgeneric-method-on-generic-struct.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ffe4ccd4ad1a96239b82b700a626a3644ddc364d/tests%2Fdebuginfo%2Fgeneric-method-on-generic-struct.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdebuginfo%2Fgeneric-method-on-generic-struct.rs?ref=ffe4ccd4ad1a96239b82b700a626a3644ddc364d", "patch": "@@ -2,7 +2,7 @@\n \n // Some versions of the non-rust-enabled LLDB print the wrong generic\n // parameter type names in this test.\n-// rust-lldb\n+// needs-rust-lldb\n \n // === GDB TESTS ===================================================================================\n "}, {"sha": "5213eebc18bd2a0c2e315d1e9bdbf6cb45db0949", "filename": "tests/debuginfo/generic-struct.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ffe4ccd4ad1a96239b82b700a626a3644ddc364d/tests%2Fdebuginfo%2Fgeneric-struct.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ffe4ccd4ad1a96239b82b700a626a3644ddc364d/tests%2Fdebuginfo%2Fgeneric-struct.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdebuginfo%2Fgeneric-struct.rs?ref=ffe4ccd4ad1a96239b82b700a626a3644ddc364d", "patch": "@@ -1,6 +1,6 @@\n // Some versions of the non-rust-enabled LLDB print the wrong generic\n // parameter type names in this test.\n-// rust-lldb\n+// needs-rust-lldb\n \n // compile-flags:-g\n "}, {"sha": "a55402691dc309ae63ea7798804d698c6dc15478", "filename": "tests/debuginfo/generic-tuple-style-enum.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ffe4ccd4ad1a96239b82b700a626a3644ddc364d/tests%2Fdebuginfo%2Fgeneric-tuple-style-enum.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ffe4ccd4ad1a96239b82b700a626a3644ddc364d/tests%2Fdebuginfo%2Fgeneric-tuple-style-enum.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdebuginfo%2Fgeneric-tuple-style-enum.rs?ref=ffe4ccd4ad1a96239b82b700a626a3644ddc364d", "patch": "@@ -1,6 +1,6 @@\n // Require a gdb or lldb that can read DW_TAG_variant_part.\n // min-gdb-version: 8.2\n-// rust-lldb\n+// needs-rust-lldb\n \n // compile-flags:-g\n "}, {"sha": "138d8391d40ab63542273b5f2e4e90da5cc8307b", "filename": "tests/debuginfo/method-on-generic-struct.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ffe4ccd4ad1a96239b82b700a626a3644ddc364d/tests%2Fdebuginfo%2Fmethod-on-generic-struct.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ffe4ccd4ad1a96239b82b700a626a3644ddc364d/tests%2Fdebuginfo%2Fmethod-on-generic-struct.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdebuginfo%2Fmethod-on-generic-struct.rs?ref=ffe4ccd4ad1a96239b82b700a626a3644ddc364d", "patch": "@@ -1,6 +1,6 @@\n // Some versions of the non-rust-enabled LLDB print the wrong generic\n // parameter type names in this test.\n-// rust-lldb\n+// needs-rust-lldb\n \n // compile-flags:-g\n "}, {"sha": "0152dd9ea9b11e83279ec9036c28461dfe4c228a", "filename": "tests/debuginfo/struct-style-enum.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ffe4ccd4ad1a96239b82b700a626a3644ddc364d/tests%2Fdebuginfo%2Fstruct-style-enum.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ffe4ccd4ad1a96239b82b700a626a3644ddc364d/tests%2Fdebuginfo%2Fstruct-style-enum.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdebuginfo%2Fstruct-style-enum.rs?ref=ffe4ccd4ad1a96239b82b700a626a3644ddc364d", "patch": "@@ -1,6 +1,6 @@\n // Require a gdb or lldb that can read DW_TAG_variant_part.\n // min-gdb-version: 8.2\n-// rust-lldb\n+// needs-rust-lldb\n \n // compile-flags:-g\n "}, {"sha": "60f3ecbd21e2698266835db644752b9a7a29fb18", "filename": "tests/debuginfo/tuple-style-enum.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ffe4ccd4ad1a96239b82b700a626a3644ddc364d/tests%2Fdebuginfo%2Ftuple-style-enum.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ffe4ccd4ad1a96239b82b700a626a3644ddc364d/tests%2Fdebuginfo%2Ftuple-style-enum.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdebuginfo%2Ftuple-style-enum.rs?ref=ffe4ccd4ad1a96239b82b700a626a3644ddc364d", "patch": "@@ -1,6 +1,6 @@\n // Require a gdb or lldb that can read DW_TAG_variant_part.\n // min-gdb-version: 8.2\n-// rust-lldb\n+// needs-rust-lldb\n \n // compile-flags:-g\n "}, {"sha": "1ff6f5d9cbe1e720edda65092f896f3a0c155918", "filename": "tests/debuginfo/unique-enum.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ffe4ccd4ad1a96239b82b700a626a3644ddc364d/tests%2Fdebuginfo%2Funique-enum.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ffe4ccd4ad1a96239b82b700a626a3644ddc364d/tests%2Fdebuginfo%2Funique-enum.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdebuginfo%2Funique-enum.rs?ref=ffe4ccd4ad1a96239b82b700a626a3644ddc364d", "patch": "@@ -1,6 +1,6 @@\n // Require a gdb or lldb that can read DW_TAG_variant_part.\n // min-gdb-version: 8.2\n-// rust-lldb\n+// needs-rust-lldb\n \n // compile-flags:-g\n "}]}