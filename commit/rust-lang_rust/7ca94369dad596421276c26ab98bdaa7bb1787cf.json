{"sha": "7ca94369dad596421276c26ab98bdaa7bb1787cf", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdjYTk0MzY5ZGFkNTk2NDIxMjc2YzI2YWI5OGJkYWE3YmIxNzg3Y2Y=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-12-13T22:55:08Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-12-13T23:02:42Z"}, "message": "Fix encoding of trait static method paths. Closes #4097. r=pcwalton", "tree": {"sha": "8091b4d747c763a8eef03c6d0596b0de160f2fef", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8091b4d747c763a8eef03c6d0596b0de160f2fef"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7ca94369dad596421276c26ab98bdaa7bb1787cf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7ca94369dad596421276c26ab98bdaa7bb1787cf", "html_url": "https://github.com/rust-lang/rust/commit/7ca94369dad596421276c26ab98bdaa7bb1787cf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7ca94369dad596421276c26ab98bdaa7bb1787cf/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e71ec06118fee49a86063c5eb7386f1000f56237", "url": "https://api.github.com/repos/rust-lang/rust/commits/e71ec06118fee49a86063c5eb7386f1000f56237", "html_url": "https://github.com/rust-lang/rust/commit/e71ec06118fee49a86063c5eb7386f1000f56237"}], "stats": {"total": 25, "additions": 24, "deletions": 1}, "files": [{"sha": "01755a79f2e85114848af6e2c8f7ae4d9fbaae4e", "filename": "src/librustc/metadata/encoder.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/7ca94369dad596421276c26ab98bdaa7bb1787cf/src%2Flibrustc%2Fmetadata%2Fencoder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7ca94369dad596421276c26ab98bdaa7bb1787cf/src%2Flibrustc%2Fmetadata%2Fencoder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmetadata%2Fencoder.rs?ref=7ca94369dad596421276c26ab98bdaa7bb1787cf", "patch": "@@ -768,6 +768,7 @@ fn encode_info_for_item(ecx: @encode_ctxt, ebml_w: writer::Serializer,\n         for traits.each |associated_trait| {\n            encode_trait_ref(ebml_w, ecx, *associated_trait)\n         }\n+\n         ebml_w.end_tag();\n \n         // Now, output all of the static methods as items.  Note that for the\n@@ -789,7 +790,9 @@ fn encode_info_for_item(ecx: @encode_ctxt, ebml_w: writer::Serializer,\n             let polyty = ecx.tcx.tcache.get(local_def(ty_m.id));\n             encode_ty_type_param_bounds(ebml_w, ecx, polyty.bounds);\n             encode_type(ecx, ebml_w, polyty.ty);\n-            encode_path(ecx, ebml_w, path, ast_map::path_name(ty_m.ident));\n+            let m_path = vec::append_one(path,\n+                                         ast_map::path_name(item.ident));\n+            encode_path(ecx, ebml_w, m_path, ast_map::path_name(ty_m.ident));\n             ebml_w.end_tag();\n         }\n "}, {"sha": "e67d46553cfc2497c9266ec14584b702258997d9", "filename": "src/test/auxiliary/static_fn_trait_xc_aux.rs", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/7ca94369dad596421276c26ab98bdaa7bb1787cf/src%2Ftest%2Fauxiliary%2Fstatic_fn_trait_xc_aux.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7ca94369dad596421276c26ab98bdaa7bb1787cf/src%2Ftest%2Fauxiliary%2Fstatic_fn_trait_xc_aux.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fauxiliary%2Fstatic_fn_trait_xc_aux.rs?ref=7ca94369dad596421276c26ab98bdaa7bb1787cf", "patch": "@@ -0,0 +1,11 @@\n+pub mod num {\n+    pub trait Num2 {\n+        static pure fn from_int2(n: int) -> self;\n+    }\n+}\n+\n+pub mod float {\n+    impl float: num::Num2 {\n+        static pure fn from_int2(n: int) -> float { return n as float;  }\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "d2bd9b2f5c801e041ebe9b742639e0b4e7592e79", "filename": "src/test/run-pass/static-fn-trait-xc.rs", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/7ca94369dad596421276c26ab98bdaa7bb1787cf/src%2Ftest%2Frun-pass%2Fstatic-fn-trait-xc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7ca94369dad596421276c26ab98bdaa7bb1787cf/src%2Ftest%2Frun-pass%2Fstatic-fn-trait-xc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fstatic-fn-trait-xc.rs?ref=7ca94369dad596421276c26ab98bdaa7bb1787cf", "patch": "@@ -0,0 +1,9 @@\n+// aux-build:static_fn_trait_xc_aux.rs\n+\n+extern mod mycore(name =\"static_fn_trait_xc_aux\");\n+\n+use mycore::num;\n+\n+fn main() {\n+    let _1:float = num::from_int2(1i);\n+}"}]}