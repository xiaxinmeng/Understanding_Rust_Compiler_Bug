{"sha": "443b45fa9fd87cf0939e80a64bead413530e375c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ0M2I0NWZhOWZkODdjZjA5MzllODBhNjRiZWFkNDEzNTMwZTM3NWM=", "commit": {"author": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2020-11-11T17:10:15Z"}, "committer": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2020-11-11T17:24:14Z"}, "message": "rustc_target: Change os from \"unknown\" to \"none\" for bare metal targets\n\nx86_64-fortanix-unknown-sgx and wasm32-unknown-unknown still have os == \"unknown\" because both have libstd", "tree": {"sha": "bbd4f744a746b5c60e7bb09fa9a6bbf5a1f4493f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bbd4f744a746b5c60e7bb09fa9a6bbf5a1f4493f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/443b45fa9fd87cf0939e80a64bead413530e375c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/443b45fa9fd87cf0939e80a64bead413530e375c", "html_url": "https://github.com/rust-lang/rust/commit/443b45fa9fd87cf0939e80a64bead413530e375c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/443b45fa9fd87cf0939e80a64bead413530e375c/comments", "author": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "committer": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d4ea0b3e46a0303d5802b632e88ba1ba84d9d16f", "url": "https://api.github.com/repos/rust-lang/rust/commits/d4ea0b3e46a0303d5802b632e88ba1ba84d9d16f", "html_url": "https://github.com/rust-lang/rust/commit/d4ea0b3e46a0303d5802b632e88ba1ba84d9d16f"}], "stats": {"total": 4, "additions": 3, "deletions": 1}, "files": [{"sha": "67a7684da2c70434bc917388fb3cfd1e7865dde5", "filename": "compiler/rustc_target/src/spec/avr_gnu_base.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/443b45fa9fd87cf0939e80a64bead413530e375c/compiler%2Frustc_target%2Fsrc%2Fspec%2Favr_gnu_base.rs", "raw_url": "https://github.com/rust-lang/rust/raw/443b45fa9fd87cf0939e80a64bead413530e375c/compiler%2Frustc_target%2Fsrc%2Fspec%2Favr_gnu_base.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Favr_gnu_base.rs?ref=443b45fa9fd87cf0939e80a64bead413530e375c", "patch": "@@ -11,7 +11,6 @@ pub fn target(target_cpu: String) -> Target {\n         pointer_width: 16,\n         options: TargetOptions {\n             c_int_width: \"16\".to_string(),\n-            os: \"unknown\".to_string(),\n             cpu: target_cpu.clone(),\n             exe_suffix: \".elf\".to_string(),\n "}, {"sha": "dc8c41ecedc2c26f388734da853727160def0835", "filename": "compiler/rustc_target/src/spec/mod.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/443b45fa9fd87cf0939e80a64bead413530e375c/compiler%2Frustc_target%2Fsrc%2Fspec%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/443b45fa9fd87cf0939e80a64bead413530e375c/compiler%2Frustc_target%2Fsrc%2Fspec%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fmod.rs?ref=443b45fa9fd87cf0939e80a64bead413530e375c", "patch": "@@ -713,6 +713,9 @@ pub struct TargetOptions {\n     /// Width of c_int type. Defaults to \"32\".\n     pub c_int_width: String,\n     /// OS name to use for conditional compilation. Defaults to \"none\".\n+    /// \"none\" implies a bare metal target without `std` library.\n+    /// A couple of targets having `std` also use \"unknown\" as an `os` value,\n+    /// but they are exceptions.\n     pub os: String,\n     /// Environment name to use for conditional compilation. Defaults to \"\".\n     pub env: String,"}]}