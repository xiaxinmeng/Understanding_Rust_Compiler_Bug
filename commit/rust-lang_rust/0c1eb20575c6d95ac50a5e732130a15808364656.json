{"sha": "0c1eb20575c6d95ac50a5e732130a15808364656", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBjMWViMjA1NzVjNmQ5NWFjNTBhNWU3MzIxMzBhMTU4MDgzNjQ2NTY=", "commit": {"author": {"name": "Seiichi Uchida", "email": "seuchida@gmail.com", "date": "2017-12-05T01:03:23Z"}, "committer": {"name": "Seiichi Uchida", "email": "seuchida@gmail.com", "date": "2017-12-05T01:03:23Z"}, "message": "Fix indent of chain with small parent", "tree": {"sha": "c60c5db0210157121c970da92a4ea24322a42d3f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c60c5db0210157121c970da92a4ea24322a42d3f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0c1eb20575c6d95ac50a5e732130a15808364656", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0c1eb20575c6d95ac50a5e732130a15808364656", "html_url": "https://github.com/rust-lang/rust/commit/0c1eb20575c6d95ac50a5e732130a15808364656", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0c1eb20575c6d95ac50a5e732130a15808364656/comments", "author": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "committer": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b45a69699aa002e3afd764c3900d52f112855362", "url": "https://api.github.com/repos/rust-lang/rust/commits/b45a69699aa002e3afd764c3900d52f112855362", "html_url": "https://github.com/rust-lang/rust/commit/b45a69699aa002e3afd764c3900d52f112855362"}], "stats": {"total": 6, "additions": 5, "deletions": 1}, "files": [{"sha": "816ce60ad4d96a3dec43eef929cc1718e7bf8749", "filename": "src/chains.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/0c1eb20575c6d95ac50a5e732130a15808364656/src%2Fchains.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0c1eb20575c6d95ac50a5e732130a15808364656/src%2Fchains.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fchains.rs?ref=0c1eb20575c6d95ac50a5e732130a15808364656", "patch": "@@ -150,7 +150,11 @@ pub fn rewrite_chain(expr: &ast::Expr, context: &RewriteContext, shape: Shape) -\n         .collect::<Option<Vec<_>>>()?;\n \n     // Total of all items excluding the last.\n-    let extend_last_subexpr = last_line_extendable(&parent_rewrite) && rewrites.is_empty();\n+    let extend_last_subexpr = if is_small_parent {\n+        rewrites.len() == 1 && last_line_extendable(&rewrites[0])\n+    } else {\n+        rewrites.is_empty() && last_line_extendable(&parent_rewrite)\n+    };\n     let almost_total = if extend_last_subexpr {\n         last_line_width(&parent_rewrite)\n     } else {"}]}