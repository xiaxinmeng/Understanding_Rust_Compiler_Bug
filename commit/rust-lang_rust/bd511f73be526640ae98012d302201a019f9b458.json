{"sha": "bd511f73be526640ae98012d302201a019f9b458", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJkNTExZjczYmU1MjY2NDBhZTk4MDEyZDMwMjIwMWEwMTlmOWI0NTg=", "commit": {"author": {"name": "Flavio Percoco", "email": "flaper87@gmail.com", "date": "2015-01-26T20:30:56Z"}, "committer": {"name": "Flavio Percoco", "email": "flaper87@gmail.com", "date": "2015-02-22T01:14:24Z"}, "message": "Add negative impls for `*const T` and `*mut T`", "tree": {"sha": "35957397e49f86cab40b4e90c9eb879e98c77e35", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/35957397e49f86cab40b4e90c9eb879e98c77e35"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bd511f73be526640ae98012d302201a019f9b458", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bd511f73be526640ae98012d302201a019f9b458", "html_url": "https://github.com/rust-lang/rust/commit/bd511f73be526640ae98012d302201a019f9b458", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bd511f73be526640ae98012d302201a019f9b458/comments", "author": {"login": "flaper87", "id": 13816, "node_id": "MDQ6VXNlcjEzODE2", "avatar_url": "https://avatars.githubusercontent.com/u/13816?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flaper87", "html_url": "https://github.com/flaper87", "followers_url": "https://api.github.com/users/flaper87/followers", "following_url": "https://api.github.com/users/flaper87/following{/other_user}", "gists_url": "https://api.github.com/users/flaper87/gists{/gist_id}", "starred_url": "https://api.github.com/users/flaper87/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flaper87/subscriptions", "organizations_url": "https://api.github.com/users/flaper87/orgs", "repos_url": "https://api.github.com/users/flaper87/repos", "events_url": "https://api.github.com/users/flaper87/events{/privacy}", "received_events_url": "https://api.github.com/users/flaper87/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flaper87", "id": 13816, "node_id": "MDQ6VXNlcjEzODE2", "avatar_url": "https://avatars.githubusercontent.com/u/13816?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flaper87", "html_url": "https://github.com/flaper87", "followers_url": "https://api.github.com/users/flaper87/followers", "following_url": "https://api.github.com/users/flaper87/following{/other_user}", "gists_url": "https://api.github.com/users/flaper87/gists{/gist_id}", "starred_url": "https://api.github.com/users/flaper87/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flaper87/subscriptions", "organizations_url": "https://api.github.com/users/flaper87/orgs", "repos_url": "https://api.github.com/users/flaper87/repos", "events_url": "https://api.github.com/users/flaper87/events{/privacy}", "received_events_url": "https://api.github.com/users/flaper87/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ad3e748128dc52d55820acc07aa034f61f90006d", "url": "https://api.github.com/repos/rust-lang/rust/commits/ad3e748128dc52d55820acc07aa034f61f90006d", "html_url": "https://github.com/rust-lang/rust/commit/ad3e748128dc52d55820acc07aa034f61f90006d"}], "stats": {"total": 13, "additions": 11, "deletions": 2}, "files": [{"sha": "0370d6473d74652c5e8887c0cd2409e0c9704924", "filename": "src/libcore/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/bd511f73be526640ae98012d302201a019f9b458/src%2Flibcore%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bd511f73be526640ae98012d302201a019f9b458/src%2Flibcore%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Flib.rs?ref=bd511f73be526640ae98012d302201a019f9b458", "patch": "@@ -68,6 +68,7 @@\n #![feature(staged_api)]\n #![feature(unboxed_closures)]\n #![feature(rustc_attrs)]\n+#![feature(optin_builtin_traits)]\n \n #[macro_use]\n mod macros;"}, {"sha": "eefb6ef7703b5dd878a3dc007df734d053b77c6e", "filename": "src/libcore/marker.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/bd511f73be526640ae98012d302201a019f9b458/src%2Flibcore%2Fmarker.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bd511f73be526640ae98012d302201a019f9b458/src%2Flibcore%2Fmarker.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fmarker.rs?ref=bd511f73be526640ae98012d302201a019f9b458", "patch": "@@ -49,6 +49,9 @@ pub unsafe trait Send : MarkerTrait {\n     // empty.\n }\n \n+impl<T> !Send for *const T { }\n+impl<T> !Send for *mut T { }\n+\n /// Types with a constant size known at compile-time.\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n #[lang=\"sized\"]\n@@ -214,6 +217,9 @@ pub unsafe trait Sync : MarkerTrait {\n     // Empty\n }\n \n+impl<T> !Sync for *const T { }\n+impl<T> !Sync for *mut T { }\n+\n /// A type which is considered \"not POD\", meaning that it is not\n /// implicitly copyable. This is typically embedded in other types to\n /// ensure that they are never copied, even if they lack a destructor."}, {"sha": "53fdab1cd0774e12f1ec415e1490ca3ec83dc489", "filename": "src/librustc/middle/traits/select.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/bd511f73be526640ae98012d302201a019f9b458/src%2Flibrustc%2Fmiddle%2Ftraits%2Fselect.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bd511f73be526640ae98012d302201a019f9b458/src%2Flibrustc%2Fmiddle%2Ftraits%2Fselect.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftraits%2Fselect.rs?ref=bd511f73be526640ae98012d302201a019f9b458", "patch": "@@ -1377,8 +1377,10 @@ impl<'cx, 'tcx> SelectionContext<'cx, 'tcx> {\n \n                     ty::BoundSync |\n                     ty::BoundSend => {\n-                        // sync and send are not implemented for *const, *mut\n-                        Err(Unimplemented)\n+                        self.tcx().sess.bug(\n+                            &format!(\n+                                \"raw pointers should have a negative \\\n+                                 impl for `Send` and `Sync`\")[]);\n                     }\n                 }\n             }"}]}