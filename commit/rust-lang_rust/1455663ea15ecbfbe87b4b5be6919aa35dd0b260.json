{"sha": "1455663ea15ecbfbe87b4b5be6919aa35dd0b260", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE0NTU2NjNlYTE1ZWNiZmJlODdiNGI1YmU2OTE5YWEzNWRkMGIyNjA=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2019-11-25T14:34:15Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2019-11-25T14:50:49Z"}, "message": "Fixme for union fields", "tree": {"sha": "d051e9bb71631cca33a1b4c23bf3f2576d1c0f56", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d051e9bb71631cca33a1b4c23bf3f2576d1c0f56"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1455663ea15ecbfbe87b4b5be6919aa35dd0b260", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1455663ea15ecbfbe87b4b5be6919aa35dd0b260", "html_url": "https://github.com/rust-lang/rust/commit/1455663ea15ecbfbe87b4b5be6919aa35dd0b260", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1455663ea15ecbfbe87b4b5be6919aa35dd0b260/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5fd68b592938b6a4c074146c1b22ea0f6908fe26", "url": "https://api.github.com/repos/rust-lang/rust/commits/5fd68b592938b6a4c074146c1b22ea0f6908fe26", "html_url": "https://github.com/rust-lang/rust/commit/5fd68b592938b6a4c074146c1b22ea0f6908fe26"}], "stats": {"total": 9, "additions": 9, "deletions": 0}, "files": [{"sha": "994a6d7e9503f8b00ca1f1ec9cb49749a6b1257f", "filename": "crates/ra_hir/src/ty/infer/expr.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1455663ea15ecbfbe87b4b5be6919aa35dd0b260/crates%2Fra_hir%2Fsrc%2Fty%2Finfer%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1455663ea15ecbfbe87b4b5be6919aa35dd0b260/crates%2Fra_hir%2Fsrc%2Fty%2Finfer%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Finfer%2Fexpr.rs?ref=1455663ea15ecbfbe87b4b5be6919aa35dd0b260", "patch": "@@ -263,6 +263,8 @@ impl<'a, D: HirDatabase> InferenceContext<'a, D> {\n                                 .clone()\n                                 .subst(&a_ty.parameters)\n                         }),\n+                        // FIXME:\n+                        TypeCtor::Adt(Adt::Union(_)) => None,\n                         _ => None,\n                     },\n                     _ => None,"}, {"sha": "eb51d31bd06f27ed5652561ca03c93042bcf295c", "filename": "crates/ra_hir/src/ty/lower.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/1455663ea15ecbfbe87b4b5be6919aa35dd0b260/crates%2Fra_hir%2Fsrc%2Fty%2Flower.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1455663ea15ecbfbe87b4b5be6919aa35dd0b260/crates%2Fra_hir%2Fsrc%2Fty%2Flower.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Flower.rs?ref=1455663ea15ecbfbe87b4b5be6919aa35dd0b260", "patch": "@@ -561,6 +561,7 @@ pub(crate) fn field_types_query(\n ) -> Arc<ArenaMap<LocalStructFieldId, Ty>> {\n     let (resolver, var_data) = match variant_id {\n         VariantId::StructId(it) => (it.resolver(db), db.struct_data(it).variant_data.clone()),\n+        VariantId::UnionId(it) => (it.resolver(db), db.union_data(it).variant_data.clone()),\n         VariantId::EnumVariantId(it) => (\n             it.parent.resolver(db),\n             db.enum_data(it.parent).variants[it.local_id].variant_data.clone(),"}, {"sha": "0091bfbc33600f2f31afe7a98c9aeda2eb03cf61", "filename": "crates/ra_hir_def/src/adt.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/1455663ea15ecbfbe87b4b5be6919aa35dd0b260/crates%2Fra_hir_def%2Fsrc%2Fadt.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1455663ea15ecbfbe87b4b5be6919aa35dd0b260/crates%2Fra_hir_def%2Fsrc%2Fadt.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir_def%2Fsrc%2Fadt.rs?ref=1455663ea15ecbfbe87b4b5be6919aa35dd0b260", "patch": "@@ -150,6 +150,11 @@ impl HasChildSource for VariantId {\n                 src.map(|map| map[it.local_id].kind())\n             }\n             VariantId::StructId(it) => it.source(db).map(|it| it.kind()),\n+            VariantId::UnionId(it) => it.source(db).map(|it| {\n+                it.record_field_def_list()\n+                    .map(ast::StructKind::Record)\n+                    .unwrap_or(ast::StructKind::Unit)\n+            }),\n         };\n         let mut trace = Trace::new_for_map();\n         lower_struct(&mut trace, &src.value);"}, {"sha": "a88a78b38f5d8b18c19f2595b3f0a6ddbd1f6998", "filename": "crates/ra_hir_def/src/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/1455663ea15ecbfbe87b4b5be6919aa35dd0b260/crates%2Fra_hir_def%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1455663ea15ecbfbe87b4b5be6919aa35dd0b260/crates%2Fra_hir_def%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir_def%2Fsrc%2Flib.rs?ref=1455663ea15ecbfbe87b4b5be6919aa35dd0b260", "patch": "@@ -431,6 +431,7 @@ impl_froms!(\n pub enum VariantId {\n     EnumVariantId(EnumVariantId),\n     StructId(StructId),\n+    UnionId(UnionId),\n }\n impl_froms!(VariantId: EnumVariantId, StructId);\n "}]}