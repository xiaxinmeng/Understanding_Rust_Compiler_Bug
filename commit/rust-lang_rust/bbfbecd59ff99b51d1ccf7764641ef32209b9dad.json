{"sha": "bbfbecd59ff99b51d1ccf7764641ef32209b9dad", "node_id": "C_kwDOAAsO6NoAKGJiZmJlY2Q1OWZmOTliNTFkMWNjZjc3NjQ2NDFlZjMyMjA5YjlkYWQ", "commit": {"author": {"name": "Mu42", "email": "mu001999@outlook.com", "date": "2023-04-02T02:48:01Z"}, "committer": {"name": "Mu42", "email": "mu001999@outlook.com", "date": "2023-04-02T02:48:01Z"}, "message": "Do not repeat idx", "tree": {"sha": "5df94f84945e70d7f4218e37d67eac8bd6ceb2c1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5df94f84945e70d7f4218e37d67eac8bd6ceb2c1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bbfbecd59ff99b51d1ccf7764641ef32209b9dad", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bbfbecd59ff99b51d1ccf7764641ef32209b9dad", "html_url": "https://github.com/rust-lang/rust/commit/bbfbecd59ff99b51d1ccf7764641ef32209b9dad", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bbfbecd59ff99b51d1ccf7764641ef32209b9dad/comments", "author": {"login": "MU001999", "id": 21022101, "node_id": "MDQ6VXNlcjIxMDIyMTAx", "avatar_url": "https://avatars.githubusercontent.com/u/21022101?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MU001999", "html_url": "https://github.com/MU001999", "followers_url": "https://api.github.com/users/MU001999/followers", "following_url": "https://api.github.com/users/MU001999/following{/other_user}", "gists_url": "https://api.github.com/users/MU001999/gists{/gist_id}", "starred_url": "https://api.github.com/users/MU001999/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MU001999/subscriptions", "organizations_url": "https://api.github.com/users/MU001999/orgs", "repos_url": "https://api.github.com/users/MU001999/repos", "events_url": "https://api.github.com/users/MU001999/events{/privacy}", "received_events_url": "https://api.github.com/users/MU001999/received_events", "type": "User", "site_admin": false}, "committer": {"login": "MU001999", "id": 21022101, "node_id": "MDQ6VXNlcjIxMDIyMTAx", "avatar_url": "https://avatars.githubusercontent.com/u/21022101?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MU001999", "html_url": "https://github.com/MU001999", "followers_url": "https://api.github.com/users/MU001999/followers", "following_url": "https://api.github.com/users/MU001999/following{/other_user}", "gists_url": "https://api.github.com/users/MU001999/gists{/gist_id}", "starred_url": "https://api.github.com/users/MU001999/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MU001999/subscriptions", "organizations_url": "https://api.github.com/users/MU001999/orgs", "repos_url": "https://api.github.com/users/MU001999/repos", "events_url": "https://api.github.com/users/MU001999/events{/privacy}", "received_events_url": "https://api.github.com/users/MU001999/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0f6312f643aa1a8713e203a9ce2307f8b622b226", "url": "https://api.github.com/repos/rust-lang/rust/commits/0f6312f643aa1a8713e203a9ce2307f8b622b226", "html_url": "https://github.com/rust-lang/rust/commit/0f6312f643aa1a8713e203a9ce2307f8b622b226"}], "stats": {"total": 71, "additions": 66, "deletions": 5}, "files": [{"sha": "32c603e4897446f56be7b3e3bfe218960c526c99", "filename": "compiler/rustc_hir_typeck/src/fn_ctxt/checks.rs", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/bbfbecd59ff99b51d1ccf7764641ef32209b9dad/compiler%2Frustc_hir_typeck%2Fsrc%2Ffn_ctxt%2Fchecks.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bbfbecd59ff99b51d1ccf7764641ef32209b9dad/compiler%2Frustc_hir_typeck%2Fsrc%2Ffn_ctxt%2Fchecks.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_typeck%2Fsrc%2Ffn_ctxt%2Fchecks.rs?ref=bbfbecd59ff99b51d1ccf7764641ef32209b9dad", "patch": "@@ -1156,14 +1156,15 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n         // ```\n         // which includes the replacement of the first two `()` for the correct type, and the\n         // removal of the last `()`.\n-        let mut prev = -1;\n+        let mut idx = -1;\n         for (expected_idx, provided_idx) in matched_inputs.iter_enumerated() {\n             // We want to point not at the *current* argument expression index, but rather at the\n             // index position where it *should have been*, which is *after* the previous one.\n-            if let Some(provided_idx) = provided_idx {\n-                prev = provided_idx.index() as i64;\n-            }\n-            let idx = ProvidedIdx::from_usize((prev + 1) as usize);\n+            idx = match provided_idx {\n+                Some(provided_idx) => provided_idx.index() as i64 + 1,\n+                None => idx + 1,\n+            };\n+            let idx = ProvidedIdx::from_usize(idx as usize);\n             if let None = provided_idx\n                 && let Some((_, arg_span)) = provided_arg_tys.get(idx)\n             {"}, {"sha": "2e8ae40f63059452cd88e13fcb35334eb3d9fbf3", "filename": "tests/ui/argument-suggestions/109831.rs", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/bbfbecd59ff99b51d1ccf7764641ef32209b9dad/tests%2Fui%2Fargument-suggestions%2F109831.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bbfbecd59ff99b51d1ccf7764641ef32209b9dad/tests%2Fui%2Fargument-suggestions%2F109831.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fargument-suggestions%2F109831.rs?ref=bbfbecd59ff99b51d1ccf7764641ef32209b9dad", "patch": "@@ -0,0 +1,9 @@\n+struct A;\n+struct B;\n+\n+fn f(b1: B, b2: B, a2: C) {} //~ ERROR E0412\n+\n+fn main() {\n+    f(A, A, B, C); //~ ERROR E0425\n+    //~^ ERROR E0061\n+}"}, {"sha": "861f6d67baf269a5f9de85b2f2980fbdc4b45bfb", "filename": "tests/ui/argument-suggestions/109831.stderr", "status": "added", "additions": 51, "deletions": 0, "changes": 51, "blob_url": "https://github.com/rust-lang/rust/blob/bbfbecd59ff99b51d1ccf7764641ef32209b9dad/tests%2Fui%2Fargument-suggestions%2F109831.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/bbfbecd59ff99b51d1ccf7764641ef32209b9dad/tests%2Fui%2Fargument-suggestions%2F109831.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fargument-suggestions%2F109831.stderr?ref=bbfbecd59ff99b51d1ccf7764641ef32209b9dad", "patch": "@@ -0,0 +1,51 @@\n+error[E0412]: cannot find type `C` in this scope\n+  --> $DIR/109831.rs:4:24\n+   |\n+LL | struct A;\n+   | --------- similarly named struct `A` defined here\n+...\n+LL | fn f(b1: B, b2: B, a2: C) {}\n+   |                        ^\n+   |\n+help: a struct with a similar name exists\n+   |\n+LL | fn f(b1: B, b2: B, a2: A) {}\n+   |                        ~\n+help: you might be missing a type parameter\n+   |\n+LL | fn f<C>(b1: B, b2: B, a2: C) {}\n+   |     +++\n+\n+error[E0425]: cannot find value `C` in this scope\n+  --> $DIR/109831.rs:7:16\n+   |\n+LL | struct A;\n+   | --------- similarly named unit struct `A` defined here\n+...\n+LL |     f(A, A, B, C);\n+   |                ^ help: a unit struct with a similar name exists: `A`\n+\n+error[E0061]: this function takes 3 arguments but 4 arguments were supplied\n+  --> $DIR/109831.rs:7:5\n+   |\n+LL |     f(A, A, B, C);\n+   |     ^ -  -     - unexpected argument\n+   |       |  |\n+   |       |  expected `B`, found `A`\n+   |       expected `B`, found `A`\n+   |\n+note: function defined here\n+  --> $DIR/109831.rs:4:4\n+   |\n+LL | fn f(b1: B, b2: B, a2: C) {}\n+   |    ^ -----  -----  -----\n+help: remove the extra argument\n+   |\n+LL -     f(A, A, B, C);\n+LL +     f(/* B */, /* B */, B);\n+   |\n+\n+error: aborting due to 3 previous errors\n+\n+Some errors have detailed explanations: E0061, E0412, E0425.\n+For more information about an error, try `rustc --explain E0061`."}]}