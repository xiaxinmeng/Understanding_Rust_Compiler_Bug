{"sha": "0e2d6e017592753089a9238c7fe269e45d32d459", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBlMmQ2ZTAxNzU5Mjc1MzA4OWE5MjM4YzdmZTI2OWU0NWQzMmQ0NTk=", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2019-01-06T23:23:30Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2019-01-24T18:36:50Z"}, "message": "Point at type argument suggesting adding `Copy` constraint", "tree": {"sha": "b8dbf6efcdd80d938ae6b6f76dcec19a9dc6ddf4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b8dbf6efcdd80d938ae6b6f76dcec19a9dc6ddf4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0e2d6e017592753089a9238c7fe269e45d32d459", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0e2d6e017592753089a9238c7fe269e45d32d459", "html_url": "https://github.com/rust-lang/rust/commit/0e2d6e017592753089a9238c7fe269e45d32d459", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0e2d6e017592753089a9238c7fe269e45d32d459/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f6e29babc03d1554469d5f8cc49aec7dba162f42", "url": "https://api.github.com/repos/rust-lang/rust/commits/f6e29babc03d1554469d5f8cc49aec7dba162f42", "html_url": "https://github.com/rust-lang/rust/commit/f6e29babc03d1554469d5f8cc49aec7dba162f42"}], "stats": {"total": 17, "additions": 16, "deletions": 1}, "files": [{"sha": "d8a3cf9947024b516441bb68576461eb682ed25c", "filename": "src/librustc_mir/borrow_check/error_reporting.rs", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/0e2d6e017592753089a9238c7fe269e45d32d459/src%2Flibrustc_mir%2Fborrow_check%2Ferror_reporting.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0e2d6e017592753089a9238c7fe269e45d32d459/src%2Flibrustc_mir%2Fborrow_check%2Ferror_reporting.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fborrow_check%2Ferror_reporting.rs?ref=0e2d6e017592753089a9238c7fe269e45d32d459", "patch": "@@ -217,6 +217,17 @@ impl<'cx, 'gcx, 'tcx> MirBorrowckCtxt<'cx, 'gcx, 'tcx> {\n                         break;\n                     }\n                 }\n+                if let ty::TyKind::Param(param_ty) = ty.sty {\n+                    let tcx = self.infcx.tcx;\n+                    let generics = tcx.generics_of(self.mir_def_id);\n+                    let def_id = generics.type_param(&param_ty, tcx).def_id;\n+                    if let Some(sp) = tcx.hir().span_if_local(def_id) {\n+                        err.span_label(\n+                            sp,\n+                            \"consider adding a `Copy` constraint to this type argument\",\n+                        );\n+                    }\n+                }\n                 if note {\n                     err.note(&format!(\n                         \"move occurs because {} has type `{}`, \\"}, {"sha": "d026f81b7aad6f2ea7af7620f97c2f02dc0759f2", "filename": "src/test/ui/borrowck/two-phase-nonrecv-autoref.nll.stderr", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0e2d6e017592753089a9238c7fe269e45d32d459/src%2Ftest%2Fui%2Fborrowck%2Ftwo-phase-nonrecv-autoref.nll.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/0e2d6e017592753089a9238c7fe269e45d32d459/src%2Ftest%2Fui%2Fborrowck%2Ftwo-phase-nonrecv-autoref.nll.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fborrowck%2Ftwo-phase-nonrecv-autoref.nll.stderr?ref=0e2d6e017592753089a9238c7fe269e45d32d459", "patch": "@@ -10,6 +10,8 @@ LL |         f(f(10));\n error[E0382]: use of moved value: `*f`\n   --> $DIR/two-phase-nonrecv-autoref.rs:69:11\n    |\n+LL |     fn twice_ten_so<F: FnOnce(i32) -> i32>(f: Box<F>) {\n+   |                     - consider adding a `Copy` constraint to this type argument\n LL |         f(f(10));\n    |         - ^ value used here after move\n    |         |"}, {"sha": "2ed7b543e713c8b691e0e098b639793a995d9929", "filename": "src/test/ui/issues/issue-34721.stderr", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/0e2d6e017592753089a9238c7fe269e45d32d459/src%2Ftest%2Fui%2Fissues%2Fissue-34721.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/0e2d6e017592753089a9238c7fe269e45d32d459/src%2Ftest%2Fui%2Fissues%2Fissue-34721.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-34721.stderr?ref=0e2d6e017592753089a9238c7fe269e45d32d459", "patch": "@@ -2,7 +2,9 @@ error[E0382]: use of moved value: `x`\n   --> $DIR/issue-34721.rs:27:9\n    |\n LL |     pub fn baz<T: Foo>(x: T) -> T {\n-   |                        - move occurs because `x` has type `T`, which does not implement the `Copy` trait\n+   |                -       - move occurs because `x` has type `T`, which does not implement the `Copy` trait\n+   |                |\n+   |                consider adding a `Copy` constraint to this type argument\n LL |         if 0 == 1 {\n LL |             bar::bar(x.zero())\n    |                      - value moved here"}]}