{"sha": "8fce135326707264d99102cdb514b00d6aa38081", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhmY2UxMzUzMjY3MDcyNjRkOTkxMDJjZGI1MTRiMDBkNmFhMzgwODE=", "commit": {"author": {"name": "blake2-ppc", "email": "blake2-ppc", "date": "2013-09-10T22:52:46Z"}, "committer": {"name": "blake2-ppc", "email": "blake2-ppc", "date": "2013-09-16T17:13:41Z"}, "message": "std::vec: Add function vec::bytes::push_bytes\n\n`push_bytes` is implemented with `ptr::copy_memory` here since this\nfunction is intended to be used to implement `.push_str()` for str, so\nwe want to avoid the overhead.", "tree": {"sha": "f2764ef86a6ca3d83100b1d1fd238d9159d3755a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f2764ef86a6ca3d83100b1d1fd238d9159d3755a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8fce135326707264d99102cdb514b00d6aa38081", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8fce135326707264d99102cdb514b00d6aa38081", "html_url": "https://github.com/rust-lang/rust/commit/8fce135326707264d99102cdb514b00d6aa38081", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8fce135326707264d99102cdb514b00d6aa38081/comments", "author": null, "committer": null, "parents": [{"sha": "8d488f38ed4fad414f9a693b6f4574dfa92b06fd", "url": "https://api.github.com/repos/rust-lang/rust/commits/8d488f38ed4fad414f9a693b6f4574dfa92b06fd", "html_url": "https://github.com/rust-lang/rust/commit/8d488f38ed4fad414f9a693b6f4574dfa92b06fd"}], "stats": {"total": 17, "additions": 17, "deletions": 0}, "files": [{"sha": "b7274d58e1bba1bba65713c00a14d6870e05d5ff", "filename": "src/libstd/vec.rs", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/8fce135326707264d99102cdb514b00d6aa38081/src%2Flibstd%2Fvec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8fce135326707264d99102cdb514b00d6aa38081/src%2Flibstd%2Fvec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fvec.rs?ref=8fce135326707264d99102cdb514b00d6aa38081", "patch": "@@ -2244,6 +2244,23 @@ pub mod bytes {\n         // Bound checks are done at vec::raw::copy_memory.\n         unsafe { vec::raw::copy_memory(dst, src, count) }\n     }\n+\n+    /**\n+     * Allocate space in `dst` and append the data in `src`.\n+     */\n+    #[inline]\n+    pub fn push_bytes(dst: &mut ~[u8], src: &[u8]) {\n+        let old_len = dst.len();\n+        dst.reserve_additional(src.len());\n+        unsafe {\n+            do dst.as_mut_buf |p_dst, len_dst| {\n+                do src.as_imm_buf |p_src, len_src| {\n+                    ptr::copy_memory(p_dst.offset(len_dst as int), p_src, len_src)\n+                }\n+            }\n+            vec::raw::set_len(dst, old_len + src.len());\n+        }\n+    }\n }\n \n impl<A: Clone> Clone for ~[A] {"}]}