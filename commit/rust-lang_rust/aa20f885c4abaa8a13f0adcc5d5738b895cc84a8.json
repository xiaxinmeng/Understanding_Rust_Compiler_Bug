{"sha": "aa20f885c4abaa8a13f0adcc5d5738b895cc84a8", "node_id": "C_kwDOAAsO6NoAKGFhMjBmODg1YzRhYmFhOGExM2YwYWRjYzVkNTczOGI4OTVjYzg0YTg", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-12-28T16:15:09Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-12-28T16:15:09Z"}, "message": "Add GUI test for scraped examples colors", "tree": {"sha": "36119627d0f3b3e100e7d37d44c324c85e737a6b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/36119627d0f3b3e100e7d37d44c324c85e737a6b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/aa20f885c4abaa8a13f0adcc5d5738b895cc84a8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/aa20f885c4abaa8a13f0adcc5d5738b895cc84a8", "html_url": "https://github.com/rust-lang/rust/commit/aa20f885c4abaa8a13f0adcc5d5738b895cc84a8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/aa20f885c4abaa8a13f0adcc5d5738b895cc84a8/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c3eb202a61445eec77f0fb4af87704d148bca0e0", "url": "https://api.github.com/repos/rust-lang/rust/commits/c3eb202a61445eec77f0fb4af87704d148bca0e0", "html_url": "https://github.com/rust-lang/rust/commit/c3eb202a61445eec77f0fb4af87704d148bca0e0"}], "stats": {"total": 34, "additions": 34, "deletions": 0}, "files": [{"sha": "5175891e7ba69817c67a34e78984995f9057dc2a", "filename": "src/test/rustdoc-gui/scrape-examples-color.goml", "status": "added", "additions": 34, "deletions": 0, "changes": 34, "blob_url": "https://github.com/rust-lang/rust/blob/aa20f885c4abaa8a13f0adcc5d5738b895cc84a8/src%2Ftest%2Frustdoc-gui%2Fscrape-examples-color.goml", "raw_url": "https://github.com/rust-lang/rust/raw/aa20f885c4abaa8a13f0adcc5d5738b895cc84a8/src%2Ftest%2Frustdoc-gui%2Fscrape-examples-color.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fscrape-examples-color.goml?ref=aa20f885c4abaa8a13f0adcc5d5738b895cc84a8", "patch": "@@ -0,0 +1,34 @@\n+// Check that scrape example code blocks have the expected colors.\n+goto: \"file://\" + |DOC_PATH| + \"/scrape_examples/fn.test_many.html\"\n+\n+define-function: (\n+    \"check-colors\",\n+    (theme, highlight, highlight_focus),\n+    [\n+        (\"local-storage\", { \"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\", }),\n+        (\"reload\"),\n+        (\"wait-for\", \".more-examples-toggle\"),\n+        (\"assert-css\", (\".scraped-example .example-wrap .rust span.highlight:not(.focus)\", {\n+            \"background-color\": |highlight|,\n+        }, ALL)),\n+        (\"assert-css\", (\".scraped-example .example-wrap .rust span.highlight.focus\", {\n+            \"background-color\": |highlight_focus|,\n+        }, ALL)),\n+    ]\n+)\n+\n+call-function: (\"check-colors\", {\n+    \"theme\": \"ayu\",\n+    \"highlight\": \"rgb(91, 59, 1)\",\n+    \"highlight_focus\": \"rgb(124, 75, 15)\",\n+})\n+call-function: (\"check-colors\", {\n+    \"theme\": \"dark\",\n+    \"highlight\": \"rgb(91, 59, 1)\",\n+    \"highlight_focus\": \"rgb(124, 75, 15)\",\n+})\n+call-function: (\"check-colors\", {\n+    \"theme\": \"light\",\n+    \"highlight\": \"rgb(252, 255, 214)\",\n+    \"highlight_focus\": \"rgb(246, 253, 176)\",\n+})"}]}