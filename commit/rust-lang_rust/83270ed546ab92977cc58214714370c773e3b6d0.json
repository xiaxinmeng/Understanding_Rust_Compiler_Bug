{"sha": "83270ed546ab92977cc58214714370c773e3b6d0", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgzMjcwZWQ1NDZhYjkyOTc3Y2M1ODIxNDcxNDM3MGM3NzNlM2I2ZDA=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2015-01-02T23:15:15Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2015-01-02T23:15:15Z"}, "message": "rustup: Install from the combined installer", "tree": {"sha": "c061154033e966b9a5111c1191ef1903e25e4c64", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c061154033e966b9a5111c1191ef1903e25e4c64"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/83270ed546ab92977cc58214714370c773e3b6d0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/83270ed546ab92977cc58214714370c773e3b6d0", "html_url": "https://github.com/rust-lang/rust/commit/83270ed546ab92977cc58214714370c773e3b6d0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/83270ed546ab92977cc58214714370c773e3b6d0/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b32e0098efdf62df22f2fdb01d1d84dce6eed895", "url": "https://api.github.com/repos/rust-lang/rust/commits/b32e0098efdf62df22f2fdb01d1d84dce6eed895", "html_url": "https://github.com/rust-lang/rust/commit/b32e0098efdf62df22f2fdb01d1d84dce6eed895"}], "stats": {"total": 49, "additions": 4, "deletions": 45}, "files": [{"sha": "a89d0d0c5529e7ab8cbc00e2919725e76605ab8f", "filename": "src/etc/rustup.sh", "status": "modified", "additions": 4, "deletions": 45, "changes": 49, "blob_url": "https://github.com/rust-lang/rust/blob/83270ed546ab92977cc58214714370c773e3b6d0/src%2Fetc%2Frustup.sh", "raw_url": "https://github.com/rust-lang/rust/raw/83270ed546ab92977cc58214714370c773e3b6d0/src%2Fetc%2Frustup.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Frustup.sh?ref=83270ed546ab92977cc58214714370c773e3b6d0", "patch": "@@ -284,10 +284,7 @@ VAL_OPTIONS=\"\"\n \n flag uninstall \"only uninstall from the installation prefix\"\n valopt prefix \"\" \"set installation prefix\"\n-opt cargo 1 \"install cargo with rust\"\n valopt date \"\" \"use the YYYY-MM-DD nightly instead of the current nightly\"\n-valopt rust-date \"\" \"use the YYYY-MM-DD rust nightly instead of the current nightly\"\n-valopt cargo-date \"\" \"use the YYYY-MM-DD cargo nightly instead of the current nightly\"\n flag save \"save the downloaded nightlies to ~/.rustup\"\n \n if [ $HELP -eq 1 ]\n@@ -443,37 +440,17 @@ then\n     CFG_DATE=`date \"+%Y-%m-%d\"`\n fi\n \n-if [ -z \"${CFG_RUST_DATE}\" ]; then\n-    CFG_RUST_DATE=\"${CFG_DATE}\"\n-fi\n-\n-if [ -z \"${CFG_CARGO_DATE}\" ]; then\n-    CFG_CARGO_DATE=\"${CFG_DATE}\"\n-fi\n-\n RUST_URL=\"https://static.rust-lang.org/dist\"\n-RUST_PACKAGE_NAME=rust-nightly\n+RUST_PACKAGE_NAME=rust-combined-nightly\n RUST_PACKAGE_NAME_AND_TRIPLE=\"${RUST_PACKAGE_NAME}-${HOST_TRIPLE}\"\n RUST_TARBALL_NAME=\"${RUST_PACKAGE_NAME_AND_TRIPLE}.tar.gz\"\n RUST_LOCAL_INSTALL_DIR=\"${CFG_TMP_DIR}/${RUST_PACKAGE_NAME_AND_TRIPLE}\"\n RUST_LOCAL_INSTALL_SCRIPT=\"${RUST_LOCAL_INSTALL_DIR}/install.sh\"\n \n-CARGO_URL=\"https://static.rust-lang.org/cargo-dist\"\n-CARGO_PACKAGE_NAME=cargo-nightly\n-CARGO_PACKAGE_NAME_AND_TRIPLE=\"${CARGO_PACKAGE_NAME}-${HOST_TRIPLE}\"\n-CARGO_TARBALL_NAME=\"${CARGO_PACKAGE_NAME_AND_TRIPLE}.tar.gz\"\n-CARGO_LOCAL_INSTALL_DIR=\"${CFG_TMP_DIR}/${CARGO_PACKAGE_NAME_AND_TRIPLE}\"\n-CARGO_LOCAL_INSTALL_SCRIPT=\"${CARGO_LOCAL_INSTALL_DIR}/install.sh\"\n-\n # add a date suffix if we want a particular nighly.\n-if [ -n \"${CFG_RUST_DATE}\" ];\n-then\n-    RUST_URL=\"${RUST_URL}/${CFG_RUST_DATE}\"\n-fi\n-\n-if [ -n \"${CFG_CARGO_DATE}\" ];\n+if [ -n \"${CFG_DATE}\" ];\n then\n-    CARGO_URL=\"${CARGO_URL}/${CFG_CARGO_DATE}\"\n+    RUST_URL=\"${RUST_URL}/${CFG_DATE}\"\n fi\n \n verify_hash() {\n@@ -574,42 +551,24 @@ install_packages() {\n     # If we're saving our nightlies, put them in $HOME/.rustup.\n     if [ -n \"${CFG_SAVE}\" ]\n     then\n-        RUST_DOWNLOAD_DIR=\"${HOME}/.rustup/${CFG_RUST_DATE}\"\n-        CARGO_DOWNLOAD_DIR=\"${HOME}/.rustup/${CFG_CARGO_DATE}\"\n+        RUST_DOWNLOAD_DIR=\"${HOME}/.rustup/${CFG_DATE}\"\n     else\n         RUST_DOWNLOAD_DIR=\"${CFG_TMP_DIR}\"\n-        CARGO_DOWNLOAD_DIR=\"${CFG_TMP_DIR}\"\n     fi\n \n     mkdir -p \"${RUST_DOWNLOAD_DIR}\"\n     need_ok \"failed to create create download directory\"\n \n-    mkdir -p \"${CARGO_DOWNLOAD_DIR}\"\n-    need_ok \"failed to create create download directory\"\n-\n     RUST_LOCAL_TARBALL=\"${RUST_DOWNLOAD_DIR}/${RUST_TARBALL_NAME}\"\n-    CARGO_LOCAL_TARBALL=\"${CARGO_DOWNLOAD_DIR}/${CARGO_TARBALL_NAME}\"\n \n     download_package \\\n         \"${RUST_URL}/${RUST_TARBALL_NAME}\" \\\n         \"${RUST_LOCAL_TARBALL}\"\n \n-    if [ -z \"${CFG_DISABLE_CARGO}\" ]; then\n-        download_package \\\n-            \"${CARGO_URL}/${CARGO_TARBALL_NAME}\" \\\n-            \"${CARGO_LOCAL_TARBALL}\"\n-    fi\n-\n     install_package \\\n         \"${RUST_LOCAL_TARBALL}\" \\\n         \"${RUST_LOCAL_INSTALL_SCRIPT}\"\n \n-    if [ -z \"${CFG_DISABLE_CARGO}\" ]; then\n-        install_package \\\n-            \"${CARGO_LOCAL_TARBALL}\" \\\n-            \"${CARGO_LOCAL_INSTALL_SCRIPT}\"\n-    fi\n-\n     rm -Rf \"${CFG_TMP_DIR}\"\n     need_ok \"couldn't rm temporary installation directory\"\n }"}]}