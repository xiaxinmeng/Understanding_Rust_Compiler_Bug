{"sha": "ade0b01ebf18550e41d24c6e36f91afaccd7f389", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFkZTBiMDFlYmYxODU1MGU0MWQyNGM2ZTM2ZjkxYWZhY2NkN2YzODk=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2017-10-08T14:44:12Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2017-10-08T14:44:12Z"}, "message": "Auto merge of #45020 - MaloJaffre:needs-test, r=alexcrichton\n\nFix some E-needstest issues.\n\nAlso ignore `attr-on-trait` test on stage-1 to keep `./x.py test --stage 1` successful.\n\nFixes #30355.\nFixes #33241.\nFixes #36400.\nFixes #37887.\nFixes #44578.", "tree": {"sha": "5ad7b00c4718cab792b2e38a2243f94555f6d6ec", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5ad7b00c4718cab792b2e38a2243f94555f6d6ec"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ade0b01ebf18550e41d24c6e36f91afaccd7f389", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ade0b01ebf18550e41d24c6e36f91afaccd7f389", "html_url": "https://github.com/rust-lang/rust/commit/ade0b01ebf18550e41d24c6e36f91afaccd7f389", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ade0b01ebf18550e41d24c6e36f91afaccd7f389/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ff8e264950b070578c8c8187241f4ca55ebf28fe", "url": "https://api.github.com/repos/rust-lang/rust/commits/ff8e264950b070578c8c8187241f4ca55ebf28fe", "html_url": "https://github.com/rust-lang/rust/commit/ff8e264950b070578c8c8187241f4ca55ebf28fe"}, {"sha": "7428806bf9a4efb1ec9ebb737fadabf882e7b255", "url": "https://api.github.com/repos/rust-lang/rust/commits/7428806bf9a4efb1ec9ebb737fadabf882e7b255", "html_url": "https://github.com/rust-lang/rust/commit/7428806bf9a4efb1ec9ebb737fadabf882e7b255"}], "stats": {"total": 119, "additions": 119, "deletions": 0}, "files": [{"sha": "ee19d040318939254618f8112552890c7c2ca7b9", "filename": "src/test/compile-fail/issue-30355.rs", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/ade0b01ebf18550e41d24c6e36f91afaccd7f389/src%2Ftest%2Fcompile-fail%2Fissue-30355.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ade0b01ebf18550e41d24c6e36f91afaccd7f389/src%2Ftest%2Fcompile-fail%2Fissue-30355.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-30355.rs?ref=ade0b01ebf18550e41d24c6e36f91afaccd7f389", "patch": "@@ -0,0 +1,21 @@\n+// Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+pub struct X([u8]);\n+\n+pub static Y: &'static X = {\n+    const Y: &'static [u8] = b\"\";\n+    &X(*Y)\n+    //~^ ERROR cannot move out\n+    //~^^ ERROR cannot move a\n+    //~^^^ ERROR cannot move a\n+};\n+\n+fn main() {}"}, {"sha": "6a411b4c59c6885278f055742a3949699b42351c", "filename": "src/test/compile-fail/issue-33241.rs", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/ade0b01ebf18550e41d24c6e36f91afaccd7f389/src%2Ftest%2Fcompile-fail%2Fissue-33241.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ade0b01ebf18550e41d24c6e36f91afaccd7f389/src%2Ftest%2Fcompile-fail%2Fissue-33241.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-33241.rs?ref=ade0b01ebf18550e41d24c6e36f91afaccd7f389", "patch": "@@ -0,0 +1,23 @@\n+// Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+#![feature(rustc_attrs)]\n+\n+use std::fmt;\n+\n+// CoerceUnsized is not implemented for tuples. You can still create\n+// an unsized tuple by transmuting a trait object.\n+fn any<T>() -> T { unreachable!() }\n+\n+#[rustc_error]\n+fn main() { //~ ERROR compilation successful\n+    let t: &(u8, fmt::Debug) = any();\n+    println!(\"{:?}\", &t.1);\n+}"}, {"sha": "f120bbbfc9f1a5589091de318e482557d6f2ad85", "filename": "src/test/compile-fail/issue-37887.rs", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/ade0b01ebf18550e41d24c6e36f91afaccd7f389/src%2Ftest%2Fcompile-fail%2Fissue-37887.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ade0b01ebf18550e41d24c6e36f91afaccd7f389/src%2Ftest%2Fcompile-fail%2Fissue-37887.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-37887.rs?ref=ade0b01ebf18550e41d24c6e36f91afaccd7f389", "patch": "@@ -0,0 +1,14 @@\n+// Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+fn main() {\n+    extern crate libc; //~ ERROR use of unstable\n+    use libc::*; //~ ERROR unresolved import\n+}"}, {"sha": "a6ae21c3b5497457163487e612255c4f9f622da9", "filename": "src/test/compile-fail/issue-44578.rs", "status": "added", "additions": 34, "deletions": 0, "changes": 34, "blob_url": "https://github.com/rust-lang/rust/blob/ade0b01ebf18550e41d24c6e36f91afaccd7f389/src%2Ftest%2Fcompile-fail%2Fissue-44578.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ade0b01ebf18550e41d24c6e36f91afaccd7f389/src%2Ftest%2Fcompile-fail%2Fissue-44578.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-44578.rs?ref=ade0b01ebf18550e41d24c6e36f91afaccd7f389", "patch": "@@ -0,0 +1,34 @@\n+// Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+trait Foo {\n+    const AMT: usize;\n+}\n+\n+enum Bar<A, B> {\n+    First(A),\n+    Second(B),\n+}\n+\n+impl<A: Foo, B: Foo> Foo for Bar<A, B> {\n+    const AMT: usize = [A::AMT][(A::AMT > B::AMT) as usize]; //~ ERROR constant evaluation\n+}\n+\n+impl Foo for u8 {\n+    const AMT: usize = 1;\n+}\n+\n+impl Foo for u16 {\n+    const AMT: usize = 2;\n+}\n+\n+fn main() {\n+    println!(\"{}\", <Bar<u16, u8> as Foo>::AMT);\n+}"}, {"sha": "52a8652e65bcf1158e556ba7dc8e28e5ae1f70b8", "filename": "src/test/run-pass-fulldeps/proc-macro/attr-on-trait.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ade0b01ebf18550e41d24c6e36f91afaccd7f389/src%2Ftest%2Frun-pass-fulldeps%2Fproc-macro%2Fattr-on-trait.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ade0b01ebf18550e41d24c6e36f91afaccd7f389/src%2Ftest%2Frun-pass-fulldeps%2Fproc-macro%2Fattr-on-trait.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass-fulldeps%2Fproc-macro%2Fattr-on-trait.rs?ref=ade0b01ebf18550e41d24c6e36f91afaccd7f389", "patch": "@@ -9,6 +9,7 @@\n // except according to those terms.\n \n // aux-build:attr-on-trait.rs\n+// ignore-stage1\n \n #![feature(proc_macro)]\n "}, {"sha": "c0aec5b4296be0d8f8e666692f8e7b4c52ee15ff", "filename": "src/test/ui/issue-36400.rs", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/ade0b01ebf18550e41d24c6e36f91afaccd7f389/src%2Ftest%2Fui%2Fissue-36400.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ade0b01ebf18550e41d24c6e36f91afaccd7f389/src%2Ftest%2Fui%2Fissue-36400.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissue-36400.rs?ref=ade0b01ebf18550e41d24c6e36f91afaccd7f389", "patch": "@@ -0,0 +1,16 @@\n+// Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+fn f(x: &mut u32) {}\n+\n+fn main() {\n+    let x = Box::new(3);\n+    f(&mut *x);\n+}"}, {"sha": "69e9c455f357df3be2be13abc4b6e7776fa79674", "filename": "src/test/ui/issue-36400.stderr", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/ade0b01ebf18550e41d24c6e36f91afaccd7f389/src%2Ftest%2Fui%2Fissue-36400.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/ade0b01ebf18550e41d24c6e36f91afaccd7f389/src%2Ftest%2Fui%2Fissue-36400.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissue-36400.stderr?ref=ade0b01ebf18550e41d24c6e36f91afaccd7f389", "patch": "@@ -0,0 +1,10 @@\n+error[E0596]: cannot borrow immutable `Box` content `*x` as mutable\n+  --> $DIR/issue-36400.rs:15:12\n+   |\n+14 |     let x = Box::new(3);\n+   |         - consider changing this to `mut x`\n+15 |     f(&mut *x);\n+   |            ^^ cannot borrow as mutable\n+\n+error: aborting due to previous error\n+"}]}