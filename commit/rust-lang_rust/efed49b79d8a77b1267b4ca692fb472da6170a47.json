{"sha": "efed49b79d8a77b1267b4ca692fb472da6170a47", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVmZWQ0OWI3OWQ4YTc3YjEyNjdiNGNhNjkyZmI0NzJkYTYxNzBhNDc=", "commit": {"author": {"name": "Dylan DPC", "email": "dylan.dpc@gmail.com", "date": "2020-04-27T20:15:09Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-04-27T20:15:09Z"}, "message": "Rollup merge of #71604 - RalfJung:unleash-recursive-zst, r=oli-obk\n\nmake recursive-zst test unleashed\n\nMake sure we find this issue even without const qualification.\n\nr? @oli-obk @ecstatic-morse", "tree": {"sha": "5801738546bcf8805cc157527dd5af1aac0ab413", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5801738546bcf8805cc157527dd5af1aac0ab413"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/efed49b79d8a77b1267b4ca692fb472da6170a47", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJepz1NCRBK7hj4Ov3rIwAAdHIIAEV5MKEkIUzhyXbPtvAGz2co\nK+L3bFhG6kI7HFBrNqA0EYjlHgJyQqI71VVa+28OD/qvRdPdX7iCgBcmMrCCZzAi\nzJbEBPR9Kg4CRO2NKebpST11LlFatnwm2Iqm7Ey67GP3lAvDqvcKYzfho9jF82kn\n0BZbGcgENBKQwok2cytRlZ1Aa9bxo6j2UOxzw/xgdmB1DVSv561tk799FsVPk0At\ngoOUWvJEWoz7jCsv65j6VuMKB9cy2YLFDgZ1GDSsYof2I2cimgYEIO1QPYIYrAWd\nwW3u25EfEnrpfX2gjOWMa0sN1pCRF0j0q4gtB6q9Cprj9FaLHXtaE2nUTu/c+mY=\n=3epd\n-----END PGP SIGNATURE-----\n", "payload": "tree 5801738546bcf8805cc157527dd5af1aac0ab413\nparent c1c46c751c3e4124f7f75198bce940830efcc17c\nparent 3bce639fc087216caf3e0f0a23bc00d18a235887\nauthor Dylan DPC <dylan.dpc@gmail.com> 1588018509 +0200\ncommitter GitHub <noreply@github.com> 1588018509 +0200\n\nRollup merge of #71604 - RalfJung:unleash-recursive-zst, r=oli-obk\n\nmake recursive-zst test unleashed\n\nMake sure we find this issue even without const qualification.\n\nr? @oli-obk @ecstatic-morse\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/efed49b79d8a77b1267b4ca692fb472da6170a47", "html_url": "https://github.com/rust-lang/rust/commit/efed49b79d8a77b1267b4ca692fb472da6170a47", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/efed49b79d8a77b1267b4ca692fb472da6170a47/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c1c46c751c3e4124f7f75198bce940830efcc17c", "url": "https://api.github.com/repos/rust-lang/rust/commits/c1c46c751c3e4124f7f75198bce940830efcc17c", "html_url": "https://github.com/rust-lang/rust/commit/c1c46c751c3e4124f7f75198bce940830efcc17c"}, {"sha": "3bce639fc087216caf3e0f0a23bc00d18a235887", "url": "https://api.github.com/repos/rust-lang/rust/commits/3bce639fc087216caf3e0f0a23bc00d18a235887", "html_url": "https://github.com/rust-lang/rust/commit/3bce639fc087216caf3e0f0a23bc00d18a235887"}], "stats": {"total": 30, "additions": 27, "deletions": 3}, "files": [{"sha": "d424b22f000bfa81b050b310a1e82055f49692b4", "filename": "src/test/ui/consts/recursive-zst-static.default.stderr", "status": "renamed", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/efed49b79d8a77b1267b4ca692fb472da6170a47/src%2Ftest%2Fui%2Fconsts%2Frecursive-zst-static.default.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/efed49b79d8a77b1267b4ca692fb472da6170a47/src%2Ftest%2Fui%2Fconsts%2Frecursive-zst-static.default.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Frecursive-zst-static.default.stderr?ref=efed49b79d8a77b1267b4ca692fb472da6170a47", "patch": "@@ -1,17 +1,17 @@\n error[E0391]: cycle detected when const-evaluating `FOO`\n-  --> $DIR/recursive-zst-static.rs:7:18\n+  --> $DIR/recursive-zst-static.rs:10:18\n    |\n LL | static FOO: () = FOO;\n    |                  ^^^\n    |\n note: ...which requires const-evaluating `FOO`...\n-  --> $DIR/recursive-zst-static.rs:7:1\n+  --> $DIR/recursive-zst-static.rs:10:1\n    |\n LL | static FOO: () = FOO;\n    | ^^^^^^^^^^^^^^^^^^^^^\n    = note: ...which again requires const-evaluating `FOO`, completing the cycle\n note: cycle used when const-evaluating + checking `FOO`\n-  --> $DIR/recursive-zst-static.rs:7:1\n+  --> $DIR/recursive-zst-static.rs:10:1\n    |\n LL | static FOO: () = FOO;\n    | ^^^^^^^^^^^^^^^^^^^^^", "previous_filename": "src/test/ui/consts/recursive-zst-static.stderr"}, {"sha": "29a467c006a492d6f16e3676672ce2452795ddbc", "filename": "src/test/ui/consts/recursive-zst-static.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/efed49b79d8a77b1267b4ca692fb472da6170a47/src%2Ftest%2Fui%2Fconsts%2Frecursive-zst-static.rs", "raw_url": "https://github.com/rust-lang/rust/raw/efed49b79d8a77b1267b4ca692fb472da6170a47/src%2Ftest%2Fui%2Fconsts%2Frecursive-zst-static.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Frecursive-zst-static.rs?ref=efed49b79d8a77b1267b4ca692fb472da6170a47", "patch": "@@ -1,3 +1,6 @@\n+// revisions: default unleash\n+//[unleash]compile-flags: -Zunleash-the-miri-inside-of-you\n+\n // This test ensures that we do not allow ZST statics to initialize themselves without ever\n // actually creating a value of that type. This is important, as the ZST may have private fields\n // that users can reasonably expect to only get initialized by their own code. Thus unsafe code"}, {"sha": "d424b22f000bfa81b050b310a1e82055f49692b4", "filename": "src/test/ui/consts/recursive-zst-static.unleash.stderr", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/efed49b79d8a77b1267b4ca692fb472da6170a47/src%2Ftest%2Fui%2Fconsts%2Frecursive-zst-static.unleash.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/efed49b79d8a77b1267b4ca692fb472da6170a47/src%2Ftest%2Fui%2Fconsts%2Frecursive-zst-static.unleash.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Frecursive-zst-static.unleash.stderr?ref=efed49b79d8a77b1267b4ca692fb472da6170a47", "patch": "@@ -0,0 +1,21 @@\n+error[E0391]: cycle detected when const-evaluating `FOO`\n+  --> $DIR/recursive-zst-static.rs:10:18\n+   |\n+LL | static FOO: () = FOO;\n+   |                  ^^^\n+   |\n+note: ...which requires const-evaluating `FOO`...\n+  --> $DIR/recursive-zst-static.rs:10:1\n+   |\n+LL | static FOO: () = FOO;\n+   | ^^^^^^^^^^^^^^^^^^^^^\n+   = note: ...which again requires const-evaluating `FOO`, completing the cycle\n+note: cycle used when const-evaluating + checking `FOO`\n+  --> $DIR/recursive-zst-static.rs:10:1\n+   |\n+LL | static FOO: () = FOO;\n+   | ^^^^^^^^^^^^^^^^^^^^^\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0391`."}]}