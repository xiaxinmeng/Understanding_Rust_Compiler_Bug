{"sha": "827e5180f20ebeec990ab8f92a4196ad8c5feb19", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgyN2U1MTgwZjIwZWJlZWM5OTBhYjhmOTJhNDE5NmFkOGM1ZmViMTk=", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2018-11-16T09:01:54Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2018-11-16T09:01:54Z"}, "message": "stacked borrows is broken without full MIR", "tree": {"sha": "143c1a757c3a9978247b3ed8567931faedc80edf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/143c1a757c3a9978247b3ed8567931faedc80edf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/827e5180f20ebeec990ab8f92a4196ad8c5feb19", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/827e5180f20ebeec990ab8f92a4196ad8c5feb19", "html_url": "https://github.com/rust-lang/rust/commit/827e5180f20ebeec990ab8f92a4196ad8c5feb19", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/827e5180f20ebeec990ab8f92a4196ad8c5feb19/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c93f6d6bb0a46b8c45c5074f8d164017c785d327", "url": "https://api.github.com/repos/rust-lang/rust/commits/c93f6d6bb0a46b8c45c5074f8d164017c785d327", "html_url": "https://github.com/rust-lang/rust/commit/c93f6d6bb0a46b8c45c5074f8d164017c785d327"}], "stats": {"total": 17, "additions": 13, "deletions": 4}, "files": [{"sha": "5eb7b34425e6e9641b4da080e4b80156926283f8", "filename": "README.md", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/827e5180f20ebeec990ab8f92a4196ad8c5feb19/README.md", "raw_url": "https://github.com/rust-lang/rust/raw/827e5180f20ebeec990ab8f92a4196ad8c5feb19/README.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/README.md?ref=827e5180f20ebeec990ab8f92a4196ad8c5feb19", "patch": "@@ -45,14 +45,19 @@ in this directory.\n ## Running Miri\n \n ```sh\n-cargo +nightly run tests/run-pass/vecs.rs # Or whatever test you like.\n+cargo +nightly run -- -Zmiri-disable-validation tests/run-pass/vecs.rs # Or whatever test you like.\n ```\n \n+We have to disable validation because that can lead to errors when libstd is not\n+compiled the right way.\n+\n ## Running Miri with full libstd\n \n-Per default libstd does not contain the MIR of non-polymorphic functions. When\n-Miri hits a call to such a function, execution terminates. To fix this, it is\n-possible to compile libstd with full MIR:\n+Per default libstd does not contain the MIR of non-polymorphic functions, and\n+also does not contain some extra MIR statements that miri needs for validation.\n+When Miri hits a call to such a function, execution terminates, and even when\n+the MIR is present, validation can fail.  To fix this, it is possible to compile\n+libstd with full MIR:\n \n ```sh\n rustup component add --toolchain nightly rust-src"}, {"sha": "8e8912c81fe902de72389ff88349ea44c9f9e536", "filename": "tests/compile-fail-fullmir/copy_nonoverlapping.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fcopy_nonoverlapping.rs", "raw_url": "https://github.com/rust-lang/rust/raw/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fcopy_nonoverlapping.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail-fullmir%2Fcopy_nonoverlapping.rs?ref=827e5180f20ebeec990ab8f92a4196ad8c5feb19", "previous_filename": "tests/compile-fail/copy_nonoverlapping.rs"}, {"sha": "14a85ecd8947cd2c051013fe7678547f4c5dc448", "filename": "tests/compile-fail-fullmir/memleak_rc.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fmemleak_rc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fmemleak_rc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail-fullmir%2Fmemleak_rc.rs?ref=827e5180f20ebeec990ab8f92a4196ad8c5feb19", "previous_filename": "tests/compile-fail/memleak_rc.rs"}, {"sha": "092f3f09ed196dff9f93b2675fb67221d05f744e", "filename": "tests/compile-fail-fullmir/stacked_borrows/alias_through_mutation.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Falias_through_mutation.rs", "raw_url": "https://github.com/rust-lang/rust/raw/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Falias_through_mutation.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Falias_through_mutation.rs?ref=827e5180f20ebeec990ab8f92a4196ad8c5feb19", "previous_filename": "tests/compile-fail/stacked_borrows/alias_through_mutation.rs"}, {"sha": "e812e13e702cadbfc5dd1dece7e0ba011b0720e2", "filename": "tests/compile-fail-fullmir/stacked_borrows/aliasing_mut1.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Faliasing_mut1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Faliasing_mut1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Faliasing_mut1.rs?ref=827e5180f20ebeec990ab8f92a4196ad8c5feb19", "previous_filename": "tests/compile-fail/stacked_borrows/aliasing_mut1.rs"}, {"sha": "36ebcc2b4ac6fae57a657af0c9b9c1dfdeda47a3", "filename": "tests/compile-fail-fullmir/stacked_borrows/aliasing_mut2.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Faliasing_mut2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Faliasing_mut2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Faliasing_mut2.rs?ref=827e5180f20ebeec990ab8f92a4196ad8c5feb19", "previous_filename": "tests/compile-fail/stacked_borrows/aliasing_mut2.rs"}, {"sha": "ad50fbd61b451f0d1a8d1cd05b24afe11a8eff8c", "filename": "tests/compile-fail-fullmir/stacked_borrows/aliasing_mut3.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Faliasing_mut3.rs", "raw_url": "https://github.com/rust-lang/rust/raw/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Faliasing_mut3.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Faliasing_mut3.rs?ref=827e5180f20ebeec990ab8f92a4196ad8c5feb19", "previous_filename": "tests/compile-fail/stacked_borrows/aliasing_mut3.rs"}, {"sha": "a0f0a3cf9753a1abbb6fff23ded22eeb41f0e989", "filename": "tests/compile-fail-fullmir/stacked_borrows/aliasing_mut4.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Faliasing_mut4.rs", "raw_url": "https://github.com/rust-lang/rust/raw/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Faliasing_mut4.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Faliasing_mut4.rs?ref=827e5180f20ebeec990ab8f92a4196ad8c5feb19", "previous_filename": "tests/compile-fail/stacked_borrows/aliasing_mut4.rs"}, {"sha": "2f3d0793f63e1535cb7b7dc5d333a41463084f82", "filename": "tests/compile-fail-fullmir/stacked_borrows/buggy_as_mut_slice.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fbuggy_as_mut_slice.rs", "raw_url": "https://github.com/rust-lang/rust/raw/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fbuggy_as_mut_slice.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fbuggy_as_mut_slice.rs?ref=827e5180f20ebeec990ab8f92a4196ad8c5feb19", "previous_filename": "tests/compile-fail/stacked_borrows/buggy_as_mut_slice.rs"}, {"sha": "711544f80149c28c3cf4cc3a6fc181a4f043157c", "filename": "tests/compile-fail-fullmir/stacked_borrows/buggy_split_at_mut.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fbuggy_split_at_mut.rs", "raw_url": "https://github.com/rust-lang/rust/raw/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fbuggy_split_at_mut.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fbuggy_split_at_mut.rs?ref=827e5180f20ebeec990ab8f92a4196ad8c5feb19", "previous_filename": "tests/compile-fail/stacked_borrows/buggy_split_at_mut.rs"}, {"sha": "dbaccae8827211b0599a09fcf258c103183a1c36", "filename": "tests/compile-fail-fullmir/stacked_borrows/illegal_read1.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fillegal_read1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fillegal_read1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fillegal_read1.rs?ref=827e5180f20ebeec990ab8f92a4196ad8c5feb19", "previous_filename": "tests/compile-fail/stacked_borrows/illegal_read1.rs"}, {"sha": "2da755d9aabc137206a1cc8eedc4d50a91dbb2e4", "filename": "tests/compile-fail-fullmir/stacked_borrows/illegal_read2.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fillegal_read2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fillegal_read2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fillegal_read2.rs?ref=827e5180f20ebeec990ab8f92a4196ad8c5feb19", "previous_filename": "tests/compile-fail/stacked_borrows/illegal_read2.rs"}, {"sha": "b0da0511dee3fb52a748b76b39cbd616ae2a5c32", "filename": "tests/compile-fail-fullmir/stacked_borrows/illegal_read3.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fillegal_read3.rs", "raw_url": "https://github.com/rust-lang/rust/raw/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fillegal_read3.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fillegal_read3.rs?ref=827e5180f20ebeec990ab8f92a4196ad8c5feb19", "previous_filename": "tests/compile-fail/stacked_borrows/illegal_read3.rs"}, {"sha": "c86ec1286daad8121b41b45e1672521e69e91f53", "filename": "tests/compile-fail-fullmir/stacked_borrows/illegal_read4.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fillegal_read4.rs", "raw_url": "https://github.com/rust-lang/rust/raw/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fillegal_read4.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fillegal_read4.rs?ref=827e5180f20ebeec990ab8f92a4196ad8c5feb19", "previous_filename": "tests/compile-fail/stacked_borrows/illegal_read4.rs"}, {"sha": "863649a47b5ef374d74d4fc21fb2f672d70694c9", "filename": "tests/compile-fail-fullmir/stacked_borrows/illegal_read5.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fillegal_read5.rs", "raw_url": "https://github.com/rust-lang/rust/raw/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fillegal_read5.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fillegal_read5.rs?ref=827e5180f20ebeec990ab8f92a4196ad8c5feb19", "previous_filename": "tests/compile-fail/stacked_borrows/illegal_read5.rs"}, {"sha": "b106cc8dc403cc7d8e0387263950c1c0ee538c45", "filename": "tests/compile-fail-fullmir/stacked_borrows/illegal_write1.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fillegal_write1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fillegal_write1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fillegal_write1.rs?ref=827e5180f20ebeec990ab8f92a4196ad8c5feb19", "previous_filename": "tests/compile-fail/stacked_borrows/illegal_write1.rs"}, {"sha": "b53655c82147e312364940ea983d14fb4102d99a", "filename": "tests/compile-fail-fullmir/stacked_borrows/illegal_write2.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fillegal_write2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fillegal_write2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fillegal_write2.rs?ref=827e5180f20ebeec990ab8f92a4196ad8c5feb19", "previous_filename": "tests/compile-fail/stacked_borrows/illegal_write2.rs"}, {"sha": "01559af21e7c64fbcea94f6923d9bba9d8cd8770", "filename": "tests/compile-fail-fullmir/stacked_borrows/illegal_write3.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fillegal_write3.rs", "raw_url": "https://github.com/rust-lang/rust/raw/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fillegal_write3.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fillegal_write3.rs?ref=827e5180f20ebeec990ab8f92a4196ad8c5feb19", "previous_filename": "tests/compile-fail/stacked_borrows/illegal_write3.rs"}, {"sha": "37ae0f055f0ee52ca6f4951d1e4ab226f3b775bb", "filename": "tests/compile-fail-fullmir/stacked_borrows/illegal_write4.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fillegal_write4.rs", "raw_url": "https://github.com/rust-lang/rust/raw/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fillegal_write4.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fillegal_write4.rs?ref=827e5180f20ebeec990ab8f92a4196ad8c5feb19", "previous_filename": "tests/compile-fail/stacked_borrows/illegal_write4.rs"}, {"sha": "57b2ca87d810236ad8c75fb77bd79dd4ef63af90", "filename": "tests/compile-fail-fullmir/stacked_borrows/illegal_write5.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fillegal_write5.rs", "raw_url": "https://github.com/rust-lang/rust/raw/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fillegal_write5.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fillegal_write5.rs?ref=827e5180f20ebeec990ab8f92a4196ad8c5feb19", "previous_filename": "tests/compile-fail/stacked_borrows/illegal_write5.rs"}, {"sha": "98b9451eda87e77a2217ad9d043f9f7cb13ef5ee", "filename": "tests/compile-fail-fullmir/stacked_borrows/load_invalid_mut.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fload_invalid_mut.rs", "raw_url": "https://github.com/rust-lang/rust/raw/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fload_invalid_mut.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fload_invalid_mut.rs?ref=827e5180f20ebeec990ab8f92a4196ad8c5feb19", "previous_filename": "tests/compile-fail/stacked_borrows/load_invalid_mut.rs"}, {"sha": "6599924f0f4c49e92c9fa0e36dbfbbdda8cb1179", "filename": "tests/compile-fail-fullmir/stacked_borrows/load_invalid_shr.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fload_invalid_shr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fload_invalid_shr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fload_invalid_shr.rs?ref=827e5180f20ebeec990ab8f92a4196ad8c5feb19", "previous_filename": "tests/compile-fail/stacked_borrows/load_invalid_shr.rs"}, {"sha": "255e35b145588df57cc0d848d4bd677a7e5eaf1e", "filename": "tests/compile-fail-fullmir/stacked_borrows/mut_exclusive_violation1.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fmut_exclusive_violation1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fmut_exclusive_violation1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fmut_exclusive_violation1.rs?ref=827e5180f20ebeec990ab8f92a4196ad8c5feb19", "previous_filename": "tests/compile-fail/stacked_borrows/mut_exclusive_violation1.rs"}, {"sha": "64a8ff69108ec06f75140bb68a00325eebd66bc1", "filename": "tests/compile-fail-fullmir/stacked_borrows/outdated_local.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Foutdated_local.rs", "raw_url": "https://github.com/rust-lang/rust/raw/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Foutdated_local.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Foutdated_local.rs?ref=827e5180f20ebeec990ab8f92a4196ad8c5feb19", "previous_filename": "tests/compile-fail/stacked_borrows/outdated_local.rs"}, {"sha": "28288c6c63623154d91d8915f6900c665ea86325", "filename": "tests/compile-fail-fullmir/stacked_borrows/pass_invalid_mut.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fpass_invalid_mut.rs", "raw_url": "https://github.com/rust-lang/rust/raw/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fpass_invalid_mut.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fpass_invalid_mut.rs?ref=827e5180f20ebeec990ab8f92a4196ad8c5feb19", "previous_filename": "tests/compile-fail/stacked_borrows/pass_invalid_mut.rs"}, {"sha": "67bbc88e40fb0dc8a423a8d366618818d0b55831", "filename": "tests/compile-fail-fullmir/stacked_borrows/pass_invalid_shr.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fpass_invalid_shr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fpass_invalid_shr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fpass_invalid_shr.rs?ref=827e5180f20ebeec990ab8f92a4196ad8c5feb19", "previous_filename": "tests/compile-fail/stacked_borrows/pass_invalid_shr.rs"}, {"sha": "68f3d2923b15ff062e9695ec32a42740ef13e6ff", "filename": "tests/compile-fail-fullmir/stacked_borrows/pointer_smuggling.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fpointer_smuggling.rs", "raw_url": "https://github.com/rust-lang/rust/raw/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fpointer_smuggling.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fpointer_smuggling.rs?ref=827e5180f20ebeec990ab8f92a4196ad8c5feb19", "previous_filename": "tests/compile-fail/stacked_borrows/pointer_smuggling.rs"}, {"sha": "e7f0b9bc9ddd0e127715a1e03373fca2b0b430f9", "filename": "tests/compile-fail-fullmir/stacked_borrows/return_invalid_mut.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Freturn_invalid_mut.rs", "raw_url": "https://github.com/rust-lang/rust/raw/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Freturn_invalid_mut.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Freturn_invalid_mut.rs?ref=827e5180f20ebeec990ab8f92a4196ad8c5feb19", "previous_filename": "tests/compile-fail/stacked_borrows/return_invalid_mut.rs"}, {"sha": "986dd18b2e0b4e1c1467c1bf68e1f9c69d4b2574", "filename": "tests/compile-fail-fullmir/stacked_borrows/return_invalid_shr.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Freturn_invalid_shr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Freturn_invalid_shr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Freturn_invalid_shr.rs?ref=827e5180f20ebeec990ab8f92a4196ad8c5feb19", "previous_filename": "tests/compile-fail/stacked_borrows/return_invalid_shr.rs"}, {"sha": "5c605eff678436eb2934021acac69f9039e397e9", "filename": "tests/compile-fail-fullmir/stacked_borrows/static_memory_modification.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fstatic_memory_modification.rs", "raw_url": "https://github.com/rust-lang/rust/raw/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fstatic_memory_modification.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Fstatic_memory_modification.rs?ref=827e5180f20ebeec990ab8f92a4196ad8c5feb19", "previous_filename": "tests/compile-fail/stacked_borrows/static_memory_modification.rs"}, {"sha": "1ab005e3fa17dd711bae157f869eb2ba77929001", "filename": "tests/compile-fail-fullmir/stacked_borrows/transmute-is-no-escape.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Ftransmute-is-no-escape.rs", "raw_url": "https://github.com/rust-lang/rust/raw/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Ftransmute-is-no-escape.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Ftransmute-is-no-escape.rs?ref=827e5180f20ebeec990ab8f92a4196ad8c5feb19", "previous_filename": "tests/compile-fail/stacked_borrows/transmute-is-no-escape.rs"}, {"sha": "054697b04a09d8ea45b3db3b233f4c3efa480351", "filename": "tests/compile-fail-fullmir/stacked_borrows/unescaped_local.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Funescaped_local.rs", "raw_url": "https://github.com/rust-lang/rust/raw/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Funescaped_local.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail-fullmir%2Fstacked_borrows%2Funescaped_local.rs?ref=827e5180f20ebeec990ab8f92a4196ad8c5feb19", "previous_filename": "tests/compile-fail/stacked_borrows/unescaped_local.rs"}, {"sha": "acc6098af7ee04a2c638d71b23fab120e9e91d78", "filename": "tests/compile-fail-fullmir/transmute-pair-undef.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Ftransmute-pair-undef.rs", "raw_url": "https://github.com/rust-lang/rust/raw/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompile-fail-fullmir%2Ftransmute-pair-undef.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail-fullmir%2Ftransmute-pair-undef.rs?ref=827e5180f20ebeec990ab8f92a4196ad8c5feb19", "previous_filename": "tests/compile-fail/transmute-pair-undef.rs"}, {"sha": "7ecf64590b6148fd2af5e57f0bb89ceb76a96c7e", "filename": "tests/compiletest.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompiletest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/827e5180f20ebeec990ab8f92a4196ad8c5feb19/tests%2Fcompiletest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompiletest.rs?ref=827e5180f20ebeec990ab8f92a4196ad8c5feb19", "patch": "@@ -103,6 +103,10 @@ fn miri_pass(sysroot: &Path, path: &str, target: &str, host: &str, need_fullmir:\n         // whitelist.\n         flags.push(\"-Zmir-opt-level=1\".to_owned());\n     }\n+    if !have_fullmir() {\n+        // Validation relies on the EscapeToRaw statements being emitted\n+        flags.push(\"-Zmiri-disable-validation\".to_owned());\n+    }\n \n     let mut config = mk_config(\"ui\");\n     config.src_base = PathBuf::from(path);"}]}