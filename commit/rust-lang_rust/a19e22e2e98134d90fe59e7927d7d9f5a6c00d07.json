{"sha": "a19e22e2e98134d90fe59e7927d7d9f5a6c00d07", "node_id": "MDY6Q29tbWl0NzI0NzEyOmExOWUyMmUyZTk4MTM0ZDkwZmU1OWU3OTI3ZDdkOWY1YTZjMDBkMDc=", "commit": {"author": {"name": "Jonathan Turner", "email": "jonathandturner@users.noreply.github.com", "date": "2016-10-06T15:35:43Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2016-10-06T15:35:43Z"}, "message": "Rollup merge of #36967 - edre:master, r=alexcrichton\n\nupdate sip.rs for new intrinsics and defaults", "tree": {"sha": "798279832b21771ac90364c50533e9bdc83250bc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/798279832b21771ac90364c50533e9bdc83250bc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a19e22e2e98134d90fe59e7927d7d9f5a6c00d07", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a19e22e2e98134d90fe59e7927d7d9f5a6c00d07", "html_url": "https://github.com/rust-lang/rust/commit/a19e22e2e98134d90fe59e7927d7d9f5a6c00d07", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a19e22e2e98134d90fe59e7927d7d9f5a6c00d07/comments", "author": {"login": "jonathandturner", "id": 111457284, "node_id": "O_kgDOBqS0BA", "avatar_url": "https://avatars.githubusercontent.com/u/111457284?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonathandturner", "html_url": "https://github.com/jonathandturner", "followers_url": "https://api.github.com/users/jonathandturner/followers", "following_url": "https://api.github.com/users/jonathandturner/following{/other_user}", "gists_url": "https://api.github.com/users/jonathandturner/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonathandturner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonathandturner/subscriptions", "organizations_url": "https://api.github.com/users/jonathandturner/orgs", "repos_url": "https://api.github.com/users/jonathandturner/repos", "events_url": "https://api.github.com/users/jonathandturner/events{/privacy}", "received_events_url": "https://api.github.com/users/jonathandturner/received_events", "type": "Organization", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4c100260e03d41034d7746cd3e0244170e40ff7e", "url": "https://api.github.com/repos/rust-lang/rust/commits/4c100260e03d41034d7746cd3e0244170e40ff7e", "html_url": "https://github.com/rust-lang/rust/commit/4c100260e03d41034d7746cd3e0244170e40ff7e"}, {"sha": "7bbfac60e3cf502c34809a3572e108ca4dde2ef5", "url": "https://api.github.com/repos/rust-lang/rust/commits/7bbfac60e3cf502c34809a3572e108ca4dde2ef5", "html_url": "https://github.com/rust-lang/rust/commit/7bbfac60e3cf502c34809a3572e108ca4dde2ef5"}], "stats": {"total": 23, "additions": 9, "deletions": 14}, "files": [{"sha": "fc74669635934b6fae563c8b2241721aeb96d0eb", "filename": "src/libcore/hash/sip.rs", "status": "modified", "additions": 9, "deletions": 14, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/a19e22e2e98134d90fe59e7927d7d9f5a6c00d07/src%2Flibcore%2Fhash%2Fsip.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a19e22e2e98134d90fe59e7927d7d9f5a6c00d07/src%2Flibcore%2Fhash%2Fsip.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fhash%2Fsip.rs?ref=a19e22e2e98134d90fe59e7927d7d9f5a6c00d07", "patch": "@@ -17,6 +17,9 @@ use ptr;\n \n /// An implementation of SipHash 1-3.\n ///\n+/// This is currently the default hashing function used by standard library\n+/// (eg. `collections::HashMap` uses it by default).\n+///\n /// See: https://131002.net/siphash/\n #[unstable(feature = \"sip_hash_13\", issue = \"34767\")]\n #[rustc_deprecated(since = \"1.13.0\", reason = \"use `DefaultHasher` instead\")]\n@@ -39,9 +42,6 @@ pub struct SipHasher24 {\n ///\n /// See: https://131002.net/siphash/\n ///\n-/// This is currently the default hashing function used by standard library\n-/// (eg. `collections::HashMap` uses it by default).\n-///\n /// SipHash is a general-purpose hashing function: it runs at a good\n /// speed (competitive with Spooky and City) and permits strong _keyed_\n /// hashing. This lets you key your hashtables from a strong RNG, such as\n@@ -117,23 +117,18 @@ unsafe fn load_u64_le(buf: &[u8], i: usize) -> u64 {\n     data.to_le()\n }\n \n-macro_rules! rotl {\n-    ($x:expr, $b:expr) =>\n-    (($x << $b) | ($x >> (64_i32.wrapping_sub($b))))\n-}\n-\n macro_rules! compress {\n     ($state:expr) => ({\n         compress!($state.v0, $state.v1, $state.v2, $state.v3)\n     });\n     ($v0:expr, $v1:expr, $v2:expr, $v3:expr) =>\n     ({\n-        $v0 = $v0.wrapping_add($v1); $v1 = rotl!($v1, 13); $v1 ^= $v0;\n-        $v0 = rotl!($v0, 32);\n-        $v2 = $v2.wrapping_add($v3); $v3 = rotl!($v3, 16); $v3 ^= $v2;\n-        $v0 = $v0.wrapping_add($v3); $v3 = rotl!($v3, 21); $v3 ^= $v0;\n-        $v2 = $v2.wrapping_add($v1); $v1 = rotl!($v1, 17); $v1 ^= $v2;\n-        $v2 = rotl!($v2, 32);\n+        $v0 = $v0.wrapping_add($v1); $v1 = $v1.rotate_left(13); $v1 ^= $v0;\n+        $v0 = $v0.rotate_left(32);\n+        $v2 = $v2.wrapping_add($v3); $v3 = $v3.rotate_left(16); $v3 ^= $v2;\n+        $v0 = $v0.wrapping_add($v3); $v3 = $v3.rotate_left(21); $v3 ^= $v0;\n+        $v2 = $v2.wrapping_add($v1); $v1 = $v1.rotate_left(17); $v1 ^= $v2;\n+        $v2 = $v2.rotate_left(32);\n     });\n }\n "}]}