{"sha": "063e68b0b6db5bd732f1719c5fcfa8837837eb1a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA2M2U2OGIwYjZkYjViZDczMmYxNzE5YzVmY2ZhODgzNzgzN2ViMWE=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2016-03-08T06:34:13Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2016-03-08T06:50:55Z"}, "message": "rustbuild: Add `make check` and a check target\n\nWe'll tack on more steps here later", "tree": {"sha": "e54c1b0b8bc91d2d531fae8b8445d5cdef453615", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e54c1b0b8bc91d2d531fae8b8445d5cdef453615"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/063e68b0b6db5bd732f1719c5fcfa8837837eb1a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/063e68b0b6db5bd732f1719c5fcfa8837837eb1a", "html_url": "https://github.com/rust-lang/rust/commit/063e68b0b6db5bd732f1719c5fcfa8837837eb1a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/063e68b0b6db5bd732f1719c5fcfa8837837eb1a/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "388ccda455140e51456980efc07d175c19dcf005", "url": "https://api.github.com/repos/rust-lang/rust/commits/388ccda455140e51456980efc07d175c19dcf005", "html_url": "https://github.com/rust-lang/rust/commit/388ccda455140e51456980efc07d175c19dcf005"}], "stats": {"total": 14, "additions": 14, "deletions": 0}, "files": [{"sha": "fbdcddf3aa06491495e782e83e6723e50ef13db0", "filename": "src/bootstrap/build/step.rs", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/063e68b0b6db5bd732f1719c5fcfa8837837eb1a/src%2Fbootstrap%2Fbuild%2Fstep.rs", "raw_url": "https://github.com/rust-lang/rust/raw/063e68b0b6db5bd732f1719c5fcfa8837837eb1a/src%2Fbootstrap%2Fbuild%2Fstep.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbuild%2Fstep.rs?ref=063e68b0b6db5bd732f1719c5fcfa8837837eb1a", "patch": "@@ -53,11 +53,19 @@ macro_rules! targets {\n             // with braces are unstable so we just pick something that works.\n             (llvm, Llvm { _dummy: () }),\n             (compiler_rt, CompilerRt { _dummy: () }),\n+\n+            // Steps for various pieces of documentation that we can generate,\n+            // the 'doc' step is just a pseudo target to depend on a bunch of\n+            // others.\n             (doc, Doc { stage: u32 }),\n             (doc_book, DocBook { stage: u32 }),\n             (doc_nomicon, DocNomicon { stage: u32 }),\n             (doc_style, DocStyle { stage: u32 }),\n             (doc_standalone, DocStandalone { stage: u32 }),\n+\n+            // Steps for running tests. The 'check' target is just a pseudo\n+            // target to depend on a bunch of others.\n+            (check, Check { stage: u32, compiler: Compiler<'a> }),\n         }\n     }\n }\n@@ -175,6 +183,7 @@ fn add_steps<'a>(build: &'a Build,\n             \"doc-nomicon\" => targets.push(host.doc_nomicon(stage)),\n             \"doc-book\" => targets.push(host.doc_book(stage)),\n             \"doc\" => targets.push(host.doc(stage)),\n+            \"check\" => targets.push(host.check(stage, compiler)),\n             _ => panic!(\"unknown build target: `{}`\", step),\n         }\n     }\n@@ -240,6 +249,9 @@ impl<'a> Step<'a> {\n                 vec![self.doc_book(stage), self.doc_nomicon(stage),\n                      self.doc_style(stage), self.doc_standalone(stage)]\n             }\n+            Source::Check { stage, compiler: _ } => {\n+                vec![]\n+            }\n         }\n     }\n }"}, {"sha": "7d7930021498bb25677890d4c69782ecee36aa00", "filename": "src/bootstrap/mk/Makefile.in", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/063e68b0b6db5bd732f1719c5fcfa8837837eb1a/src%2Fbootstrap%2Fmk%2FMakefile.in", "raw_url": "https://github.com/rust-lang/rust/raw/063e68b0b6db5bd732f1719c5fcfa8837837eb1a/src%2Fbootstrap%2Fmk%2FMakefile.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fmk%2FMakefile.in?ref=063e68b0b6db5bd732f1719c5fcfa8837837eb1a", "patch": "@@ -36,3 +36,5 @@ book:\n \t$(Q)$(BOOTSTRAP) --step doc-book\n standalone-docs:\n \t$(Q)$(BOOTSTRAP) --step doc-standalone\n+check:\n+\t$(Q)$(BOOTSTRAP) --step check"}]}