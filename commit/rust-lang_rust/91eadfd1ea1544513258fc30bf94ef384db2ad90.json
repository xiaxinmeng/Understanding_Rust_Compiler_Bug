{"sha": "91eadfd1ea1544513258fc30bf94ef384db2ad90", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkxZWFkZmQxZWExNTQ0NTEzMjU4ZmMzMGJmOTRlZjM4NGRiMmFkOTA=", "commit": {"author": {"name": "Eric Holk", "email": "eholk@mozilla.com", "date": "2011-06-17T23:19:04Z"}, "committer": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2011-06-27T16:58:39Z"}, "message": "Added a parallel fibonacci program. It doesn't actually run in parallel yet, but it will give us something fun to test threading with.", "tree": {"sha": "26ce2e1ae07e155b6d0a57d9e69929efa987840f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/26ce2e1ae07e155b6d0a57d9e69929efa987840f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/91eadfd1ea1544513258fc30bf94ef384db2ad90", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/91eadfd1ea1544513258fc30bf94ef384db2ad90", "html_url": "https://github.com/rust-lang/rust/commit/91eadfd1ea1544513258fc30bf94ef384db2ad90", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/91eadfd1ea1544513258fc30bf94ef384db2ad90/comments", "author": null, "committer": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bea28ea5376cba26713c4e49bc1d6fa2642ab419", "url": "https://api.github.com/repos/rust-lang/rust/commits/bea28ea5376cba26713c4e49bc1d6fa2642ab419", "html_url": "https://github.com/rust-lang/rust/commit/bea28ea5376cba26713c4e49bc1d6fa2642ab419"}], "stats": {"total": 41, "additions": 41, "deletions": 0}, "files": [{"sha": "60f2d3779c194c5d1194c3e4ad2dd5d8b1108221", "filename": "src/test/bench/shootout/pfib.rs", "status": "added", "additions": 41, "deletions": 0, "changes": 41, "blob_url": "https://github.com/rust-lang/rust/blob/91eadfd1ea1544513258fc30bf94ef384db2ad90/src%2Ftest%2Fbench%2Fshootout%2Fpfib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/91eadfd1ea1544513258fc30bf94ef384db2ad90/src%2Ftest%2Fbench%2Fshootout%2Fpfib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Fshootout%2Fpfib.rs?ref=91eadfd1ea1544513258fc30bf94ef384db2ad90", "patch": "@@ -0,0 +1,41 @@\n+// -*- rust -*-\n+\n+/*\n+  A parallel version of fibonacci numbers.\n+*/\n+\n+fn recv[T](&port[T] p) -> T {\n+  let T x;\n+  p |> x;\n+  ret x;\n+}\n+\n+fn fib(int n) -> int {\n+  fn pfib(chan[int] c, int n) {\n+    if (n == 0) {\n+      c <| 0;\n+    }\n+    else if (n <= 2) {\n+      c <| 1;\n+    }\n+    else {\n+      let port[int] p = port();\n+      \n+      auto t1 = spawn pfib(chan(p), n - 1);\n+      auto t2 = spawn pfib(chan(p), n - 2);\n+\n+      c <| recv(p) + recv(p);\n+    }\n+  }\n+\n+  let port[int] p = port();\n+  auto t = spawn pfib(chan(p), n);\n+  ret recv(p);\n+}\n+\n+fn main() {\n+    assert (fib(8) == 21);\n+    assert (fib(15) == 610);\n+    log fib(8);\n+    log fib(15);\n+}"}]}