{"sha": "9f6eb29a9dc4b3236bde6afb1da4fcee49f5bd6a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjlmNmViMjlhOWRjNGIzMjM2YmRlNmFmYjFkYTRmY2VlNDlmNWJkNmE=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2014-12-30T00:36:05Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2014-12-30T00:36:05Z"}, "message": "rollup merge of #20214: bluss/fix-hashmap-example\n\nThe example derived Hash + Eq on a type that was used as *values* for\na hashmap.. for the example to make sense, we have to use a custom *key*\ntype.\n\nWrite a slightly more involved example, still using Vikings, but this\ntime as key.\n\nI preferred using String over &str here, since that's the typical usage\nand we might want to lead users down that path.", "tree": {"sha": "5a215e9f68b17a965ede8a8cd65e39b7d33ca3b1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5a215e9f68b17a965ede8a8cd65e39b7d33ca3b1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9f6eb29a9dc4b3236bde6afb1da4fcee49f5bd6a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9f6eb29a9dc4b3236bde6afb1da4fcee49f5bd6a", "html_url": "https://github.com/rust-lang/rust/commit/9f6eb29a9dc4b3236bde6afb1da4fcee49f5bd6a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9f6eb29a9dc4b3236bde6afb1da4fcee49f5bd6a/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9ac9d7af3b60c8536034a41434ab52e6261d8c24", "url": "https://api.github.com/repos/rust-lang/rust/commits/9ac9d7af3b60c8536034a41434ab52e6261d8c24", "html_url": "https://github.com/rust-lang/rust/commit/9ac9d7af3b60c8536034a41434ab52e6261d8c24"}, {"sha": "11146856969515807f85796028d8a214aaac0528", "url": "https://api.github.com/repos/rust-lang/rust/commits/11146856969515807f85796028d8a214aaac0528", "html_url": "https://github.com/rust-lang/rust/commit/11146856969515807f85796028d8a214aaac0528"}], "stats": {"total": 28, "additions": 18, "deletions": 10}, "files": [{"sha": "8c6e72ea2aec22e55eb68237ecd35c95735d1d95", "filename": "src/libstd/collections/hash/map.rs", "status": "modified", "additions": 18, "deletions": 10, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/9f6eb29a9dc4b3236bde6afb1da4fcee49f5bd6a/src%2Flibstd%2Fcollections%2Fhash%2Fmap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f6eb29a9dc4b3236bde6afb1da4fcee49f5bd6a/src%2Flibstd%2Fcollections%2Fhash%2Fmap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fcollections%2Fhash%2Fmap.rs?ref=9f6eb29a9dc4b3236bde6afb1da4fcee49f5bd6a", "patch": "@@ -264,27 +264,35 @@ fn test_resize_policy() {\n /// }\n /// ```\n ///\n-/// The easiest way to use `HashMap` with a custom type is to derive `Eq` and `Hash`.\n+/// The easiest way to use `HashMap` with a custom type as key is to derive `Eq` and `Hash`.\n /// We must also derive `PartialEq`.\n ///\n /// ```\n /// use std::collections::HashMap;\n ///\n /// #[deriving(Hash, Eq, PartialEq, Show)]\n-/// struct Viking<'a> {\n-///     name: &'a str,\n-///     power: uint,\n+/// struct Viking {\n+///     name: String,\n+///     country: String,\n /// }\n ///\n+/// impl Viking {\n+///     /// Create a new Viking.\n+///     pub fn new(name: &str, country: &str) -> Viking {\n+///         Viking { name: name.to_string(), country: country.to_string() }\n+///     }\n+/// }\n+///\n+/// // Use a HashMap to store the vikings' health points.\n /// let mut vikings = HashMap::new();\n ///\n-/// vikings.insert(\"Norway\", Viking { name: \"Einar\", power: 9u });\n-/// vikings.insert(\"Denmark\", Viking { name: \"Olaf\", power: 4u });\n-/// vikings.insert(\"Iceland\", Viking { name: \"Harald\", power: 8u });\n+/// vikings.insert(Viking::new(\"Einar\", \"Norway\"), 25u);\n+/// vikings.insert(Viking::new(\"Olaf\", \"Denmark\"), 24u);\n+/// vikings.insert(Viking::new(\"Harald\", \"Iceland\"), 12u);\n ///\n-/// // Use derived implementation to print the vikings.\n-/// for (land, viking) in vikings.iter() {\n-///     println!(\"{} at {}\", viking, land);\n+/// // Use derived implementation to print the status of the vikings.\n+/// for (viking, health) in vikings.iter() {\n+///     println!(\"{} has {} hp\", viking, health);\n /// }\n /// ```\n #[deriving(Clone)]"}]}