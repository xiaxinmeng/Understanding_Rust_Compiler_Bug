{"sha": "fa0037a5d52457b98dafa7b897dbf3eced1197a4", "node_id": "C_kwDOAAsO6NoAKGZhMDAzN2E1ZDUyNDU3Yjk4ZGFmYTdiODk3ZGJmM2VjZWQxMTk3YTQ", "commit": {"author": {"name": "Amos Wenger", "email": "amoswenger@gmail.com", "date": "2022-07-24T19:04:56Z"}, "committer": {"name": "Amos Wenger", "email": "amoswenger@gmail.com", "date": "2022-07-24T19:04:56Z"}, "message": "Only run proc-macro-srv tests for now (after discussion with @Veykril, @jyn514, and @lnicola)", "tree": {"sha": "b30b0341fe50526d540c0080183411aded1c63b7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b30b0341fe50526d540c0080183411aded1c63b7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fa0037a5d52457b98dafa7b897dbf3eced1197a4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fa0037a5d52457b98dafa7b897dbf3eced1197a4", "html_url": "https://github.com/rust-lang/rust/commit/fa0037a5d52457b98dafa7b897dbf3eced1197a4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fa0037a5d52457b98dafa7b897dbf3eced1197a4/comments", "author": {"login": "fasterthanlime", "id": 7998310, "node_id": "MDQ6VXNlcjc5OTgzMTA=", "avatar_url": "https://avatars.githubusercontent.com/u/7998310?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fasterthanlime", "html_url": "https://github.com/fasterthanlime", "followers_url": "https://api.github.com/users/fasterthanlime/followers", "following_url": "https://api.github.com/users/fasterthanlime/following{/other_user}", "gists_url": "https://api.github.com/users/fasterthanlime/gists{/gist_id}", "starred_url": "https://api.github.com/users/fasterthanlime/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fasterthanlime/subscriptions", "organizations_url": "https://api.github.com/users/fasterthanlime/orgs", "repos_url": "https://api.github.com/users/fasterthanlime/repos", "events_url": "https://api.github.com/users/fasterthanlime/events{/privacy}", "received_events_url": "https://api.github.com/users/fasterthanlime/received_events", "type": "User", "site_admin": false}, "committer": {"login": "fasterthanlime", "id": 7998310, "node_id": "MDQ6VXNlcjc5OTgzMTA=", "avatar_url": "https://avatars.githubusercontent.com/u/7998310?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fasterthanlime", "html_url": "https://github.com/fasterthanlime", "followers_url": "https://api.github.com/users/fasterthanlime/followers", "following_url": "https://api.github.com/users/fasterthanlime/following{/other_user}", "gists_url": "https://api.github.com/users/fasterthanlime/gists{/gist_id}", "starred_url": "https://api.github.com/users/fasterthanlime/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fasterthanlime/subscriptions", "organizations_url": "https://api.github.com/users/fasterthanlime/orgs", "repos_url": "https://api.github.com/users/fasterthanlime/repos", "events_url": "https://api.github.com/users/fasterthanlime/events{/privacy}", "received_events_url": "https://api.github.com/users/fasterthanlime/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ee584c19c776cbc89c93bb226d1501c61d20c8eb", "url": "https://api.github.com/repos/rust-lang/rust/commits/ee584c19c776cbc89c93bb226d1501c61d20c8eb", "html_url": "https://github.com/rust-lang/rust/commit/ee584c19c776cbc89c93bb226d1501c61d20c8eb"}], "stats": {"total": 11, "additions": 7, "deletions": 4}, "files": [{"sha": "fd583da9082552fb22e1b2a1f5533110f4a4bb37", "filename": "src/bootstrap/test.rs", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/fa0037a5d52457b98dafa7b897dbf3eced1197a4/src%2Fbootstrap%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fa0037a5d52457b98dafa7b897dbf3eced1197a4/src%2Fbootstrap%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Ftest.rs?ref=fa0037a5d52457b98dafa7b897dbf3eced1197a4", "patch": "@@ -379,19 +379,22 @@ impl Step for RustAnalyzer {\n \n         builder.ensure(tool::RustAnalyzer { compiler, target: self.host }).expect(\"in-tree tool\");\n \n-        let path = \"src/tools/rust-analyzer\";\n+        let workspace_path = \"src/tools/rust-analyzer\";\n+        // until the whole RA test suite runs on `i686`, we only run\n+        // `proc-macro-srv` tests\n+        let crate_path = \"src/tools/rust-analyzer/crates/proc-macro-srv\";\n         let mut cargo = tool::prepare_tool_cargo(\n             builder,\n             compiler,\n             Mode::ToolStd,\n             host,\n             \"test\",\n-            path,\n+            crate_path,\n             SourceType::InTree,\n-            &[\"rust-analyzer/in-rust-tree\".to_owned()],\n+            &[\"sysroot-abi\".to_owned()],\n         );\n \n-        let dir = builder.src.join(path);\n+        let dir = builder.src.join(workspace_path);\n         // needed by rust-analyzer to find its own text fixtures, cf.\n         // https://github.com/rust-analyzer/expect-test/issues/33\n         cargo.env(\"CARGO_WORKSPACE_DIR\", &dir);"}]}