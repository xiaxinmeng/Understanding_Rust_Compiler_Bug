{"sha": "13e482bf8384062eb0360603a895ffdbfe2cc95a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjEzZTQ4MmJmODM4NDA2MmViMDM2MDYwM2E4OTVmZmRiZmUyY2M5NWE=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2021-04-03T13:14:23Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2021-04-03T21:27:21Z"}, "message": "Remove unneeded INITIAL_IDS const", "tree": {"sha": "7ce32e7746797fa80db3dbeebac7f56c7fef0810", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7ce32e7746797fa80db3dbeebac7f56c7fef0810"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/13e482bf8384062eb0360603a895ffdbfe2cc95a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/13e482bf8384062eb0360603a895ffdbfe2cc95a", "html_url": "https://github.com/rust-lang/rust/commit/13e482bf8384062eb0360603a895ffdbfe2cc95a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/13e482bf8384062eb0360603a895ffdbfe2cc95a/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ccd997592bf545fc54a9cce31f1280f833915ba1", "url": "https://api.github.com/repos/rust-lang/rust/commits/ccd997592bf545fc54a9cce31f1280f833915ba1", "html_url": "https://github.com/rust-lang/rust/commit/ccd997592bf545fc54a9cce31f1280f833915ba1"}], "stats": {"total": 41, "additions": 11, "deletions": 30}, "files": [{"sha": "5df52e498b53d60bb06370a80f69067e4508952d", "filename": "src/librustdoc/config.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/13e482bf8384062eb0360603a895ffdbfe2cc95a/src%2Flibrustdoc%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/13e482bf8384062eb0360603a895ffdbfe2cc95a/src%2Flibrustdoc%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fconfig.rs?ref=13e482bf8384062eb0360603a895ffdbfe2cc95a", "patch": "@@ -507,7 +507,6 @@ impl Options {\n         let edition = config::parse_crate_edition(&matches);\n \n         let mut id_map = html::markdown::IdMap::new();\n-        id_map.populate(&html::render::INITIAL_IDS);\n         let external_html = match ExternalHtml::load(\n             &matches.opt_strs(\"html-in-header\"),\n             &matches.opt_strs(\"html-before-content\"),"}, {"sha": "509f1730557756ee7b1cc92d569eb45a4c1b1639", "filename": "src/librustdoc/html/markdown.rs", "status": "modified", "additions": 9, "deletions": 6, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/13e482bf8384062eb0360603a895ffdbfe2cc95a/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs", "raw_url": "https://github.com/rust-lang/rust/raw/13e482bf8384062eb0360603a895ffdbfe2cc95a/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs?ref=13e482bf8384062eb0360603a895ffdbfe2cc95a", "patch": "@@ -1356,6 +1356,9 @@ fn init_id_map() -> FxHashMap<String, usize> {\n     map.insert(\"rustdoc-vars\".to_owned(), 1);\n     map.insert(\"sidebar-vars\".to_owned(), 1);\n     map.insert(\"copy-path\".to_owned(), 1);\n+    map.insert(\"help\".to_owned(), 1);\n+    map.insert(\"TOC\".to_owned(), 1);\n+    map.insert(\"render-detail\".to_owned(), 1);\n     // This is the list of IDs used by rustdoc sections.\n     map.insert(\"fields\".to_owned(), 1);\n     map.insert(\"variants\".to_owned(), 1);\n@@ -1365,6 +1368,12 @@ fn init_id_map() -> FxHashMap<String, usize> {\n     map.insert(\"trait-implementations\".to_owned(), 1);\n     map.insert(\"synthetic-implementations\".to_owned(), 1);\n     map.insert(\"blanket-implementations\".to_owned(), 1);\n+    map.insert(\"associated-types\".to_owned(), 1);\n+    map.insert(\"associated-const\".to_owned(), 1);\n+    map.insert(\"required-methods\".to_owned(), 1);\n+    map.insert(\"provided-methods\".to_owned(), 1);\n+    map.insert(\"implementors\".to_owned(), 1);\n+    map.insert(\"synthetic-implementors\".to_owned(), 1);\n     map\n }\n \n@@ -1373,12 +1382,6 @@ impl IdMap {\n         IdMap { map: init_id_map() }\n     }\n \n-    crate fn populate<I: IntoIterator<Item = S>, S: AsRef<str> + ToString>(&mut self, ids: I) {\n-        for id in ids {\n-            let _ = self.derive(id);\n-        }\n-    }\n-\n     crate fn derive<S: AsRef<str> + ToString>(&mut self, candidate: S) -> String {\n         let id = match self.map.get_mut(candidate.as_ref()) {\n             None => candidate.to_string(),"}, {"sha": "1a993f360a1660c7e0718238777973e50df28315", "filename": "src/librustdoc/html/render/context.rs", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/13e482bf8384062eb0360603a895ffdbfe2cc95a/src%2Flibrustdoc%2Fhtml%2Frender%2Fcontext.rs", "raw_url": "https://github.com/rust-lang/rust/raw/13e482bf8384062eb0360603a895ffdbfe2cc95a/src%2Flibrustdoc%2Fhtml%2Frender%2Fcontext.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fcontext.rs?ref=13e482bf8384062eb0360603a895ffdbfe2cc95a", "patch": "@@ -18,7 +18,7 @@ use super::print_item::{full_path, item_path, print_item};\n use super::write_shared::write_shared;\n use super::{\n     print_sidebar, settings, AllTypes, NameDoc, SharedContext, StylePath, BASIC_KEYWORDS,\n-    CURRENT_DEPTH, INITIAL_IDS,\n+    CURRENT_DEPTH,\n };\n \n use crate::clean::{self, AttributesExt};\n@@ -423,14 +423,11 @@ impl<'tcx> FormatRenderer<'tcx> for Context<'tcx> {\n     }\n \n     fn make_child_renderer(&self) -> Self {\n-        let mut id_map = IdMap::new();\n-        id_map.populate(&INITIAL_IDS);\n-\n         Self {\n             current: self.current.clone(),\n             dst: self.dst.clone(),\n             render_redirect_pages: self.render_redirect_pages,\n-            id_map: RefCell::new(id_map),\n+            id_map: RefCell::new(IdMap::new()),\n             deref_id_map: RefCell::new(FxHashMap::default()),\n             shared: Rc::clone(&self.shared),\n             cache: Rc::clone(&self.cache),"}, {"sha": "3a557a3f719b3419cd202ad825615613f896dde6", "filename": "src/librustdoc/html/render/mod.rs", "status": "modified", "additions": 0, "deletions": 18, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/13e482bf8384062eb0360603a895ffdbfe2cc95a/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/13e482bf8384062eb0360603a895ffdbfe2cc95a/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs?ref=13e482bf8384062eb0360603a895ffdbfe2cc95a", "patch": "@@ -283,24 +283,6 @@ crate struct StylePath {\n \n thread_local!(crate static CURRENT_DEPTH: Cell<usize> = Cell::new(0));\n \n-crate const INITIAL_IDS: [&'static str; 15] = [\n-    \"main\",\n-    \"search\",\n-    \"help\",\n-    \"TOC\",\n-    \"render-detail\",\n-    \"associated-types\",\n-    \"associated-const\",\n-    \"required-methods\",\n-    \"provided-methods\",\n-    \"implementors\",\n-    \"synthetic-implementors\",\n-    \"implementors-list\",\n-    \"synthetic-implementors-list\",\n-    \"methods\",\n-    \"implementations\",\n-];\n-\n fn write_srclink(cx: &Context<'_>, item: &clean::Item, buf: &mut Buffer) {\n     if let Some(l) = cx.src_href(item) {\n         write!(buf, \"<a class=\\\"srclink\\\" href=\\\"{}\\\" title=\\\"goto source code\\\">[src]</a>\", l)"}]}