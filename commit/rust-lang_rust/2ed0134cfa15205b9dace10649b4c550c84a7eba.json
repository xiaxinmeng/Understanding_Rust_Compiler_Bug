{"sha": "2ed0134cfa15205b9dace10649b4c550c84a7eba", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJlZDAxMzRjZmExNTIwNWI5ZGFjZTEwNjQ5YjRjNTUwYzg0YTdlYmE=", "commit": {"author": {"name": "Dylan DPC", "email": "dylan.dpc@gmail.com", "date": "2021-05-06T11:30:55Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-05-06T11:30:55Z"}, "message": "Rollup merge of #84712 - joshtriplett:simplify-chdir, r=yaahc\n\nSimplify chdir implementation and minimize unsafe block", "tree": {"sha": "20e3e56d93b233ec13d3cd47644d7bea91fcc283", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/20e3e56d93b233ec13d3cd47644d7bea91fcc283"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2ed0134cfa15205b9dace10649b4c550c84a7eba", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgk9NwCRBK7hj4Ov3rIwAARI0IAGOCJlTPalfwQlgJQMktbSGX\nOrJYwL1GsTa/nD4+DVv6WNz4DXv0O+Sgk5h31PCk99KoH3LR2nGPHwW0EUeL6808\nXWmMx6EWtFW2frT5bk9mhlsZSy7xpCqkB8EDzbjMyn6szp2+DZmlQ8aAj9gTTZZt\nQR1PqD8mPD46xPlSUnc2hYw7DTYS12aJUSoXOFuJ06b8hU1D/k4z0Sxdq7OpjsNv\nCBer2g5yqIMt4M9dH5H6fo8iCYwFSUwnTq4TjyHk4LFpPLKwsNvfI2Jz1v8+ZaaO\ntOXHD7n6R+KUoNaMVC3BHAG4ejIfnvCQPuIT9fb8bB4njTLrtWdWcowBlZvBrss=\n=rgBE\n-----END PGP SIGNATURE-----\n", "payload": "tree 20e3e56d93b233ec13d3cd47644d7bea91fcc283\nparent 6a6c64401681471bb3223a2f4190ecd82a590cfa\nparent 8a2e67e0d0826f73531f79ecc8d14aba71a8d837\nauthor Dylan DPC <dylan.dpc@gmail.com> 1620300655 +0200\ncommitter GitHub <noreply@github.com> 1620300655 +0200\n\nRollup merge of #84712 - joshtriplett:simplify-chdir, r=yaahc\n\nSimplify chdir implementation and minimize unsafe block\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2ed0134cfa15205b9dace10649b4c550c84a7eba", "html_url": "https://github.com/rust-lang/rust/commit/2ed0134cfa15205b9dace10649b4c550c84a7eba", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2ed0134cfa15205b9dace10649b4c550c84a7eba/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6a6c64401681471bb3223a2f4190ecd82a590cfa", "url": "https://api.github.com/repos/rust-lang/rust/commits/6a6c64401681471bb3223a2f4190ecd82a590cfa", "html_url": "https://github.com/rust-lang/rust/commit/6a6c64401681471bb3223a2f4190ecd82a590cfa"}, {"sha": "8a2e67e0d0826f73531f79ecc8d14aba71a8d837", "url": "https://api.github.com/repos/rust-lang/rust/commits/8a2e67e0d0826f73531f79ecc8d14aba71a8d837", "html_url": "https://github.com/rust-lang/rust/commit/8a2e67e0d0826f73531f79ecc8d14aba71a8d837"}], "stats": {"total": 8, "additions": 3, "deletions": 5}, "files": [{"sha": "51c3e5d175cca86a0b9c351c19a6ccf459378b1d", "filename": "library/std/src/sys/unix/os.rs", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/2ed0134cfa15205b9dace10649b4c550c84a7eba/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fos.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2ed0134cfa15205b9dace10649b4c550c84a7eba/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fos.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fos.rs?ref=2ed0134cfa15205b9dace10649b4c550c84a7eba", "patch": "@@ -155,12 +155,10 @@ pub fn getcwd() -> io::Result<PathBuf> {\n pub fn chdir(p: &path::Path) -> io::Result<()> {\n     let p: &OsStr = p.as_ref();\n     let p = CString::new(p.as_bytes())?;\n-    unsafe {\n-        match libc::chdir(p.as_ptr()) == (0 as c_int) {\n-            true => Ok(()),\n-            false => Err(io::Error::last_os_error()),\n-        }\n+    if unsafe { libc::chdir(p.as_ptr()) } != 0 {\n+        return Err(io::Error::last_os_error());\n     }\n+    Ok(())\n }\n \n pub struct SplitPaths<'a> {"}]}