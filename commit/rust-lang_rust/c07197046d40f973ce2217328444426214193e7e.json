{"sha": "c07197046d40f973ce2217328444426214193e7e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmMwNzE5NzA0NmQ0MGY5NzNjZTIyMTczMjg0NDQ0MjYyMTQxOTNlN2U=", "commit": {"author": {"name": "The8472", "email": "git@infinite-source.de", "date": "2021-02-12T20:27:16Z"}, "committer": {"name": "The8472", "email": "git@infinite-source.de", "date": "2021-02-20T22:12:56Z"}, "message": "remove redundant box wrapper", "tree": {"sha": "e2f573f5f41109c3a94bd1a4610dd64225393142", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e2f573f5f41109c3a94bd1a4610dd64225393142"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c07197046d40f973ce2217328444426214193e7e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c07197046d40f973ce2217328444426214193e7e", "html_url": "https://github.com/rust-lang/rust/commit/c07197046d40f973ce2217328444426214193e7e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c07197046d40f973ce2217328444426214193e7e/comments", "author": {"login": "the8472", "id": 1065730, "node_id": "MDQ6VXNlcjEwNjU3MzA=", "avatar_url": "https://avatars.githubusercontent.com/u/1065730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/the8472", "html_url": "https://github.com/the8472", "followers_url": "https://api.github.com/users/the8472/followers", "following_url": "https://api.github.com/users/the8472/following{/other_user}", "gists_url": "https://api.github.com/users/the8472/gists{/gist_id}", "starred_url": "https://api.github.com/users/the8472/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/the8472/subscriptions", "organizations_url": "https://api.github.com/users/the8472/orgs", "repos_url": "https://api.github.com/users/the8472/repos", "events_url": "https://api.github.com/users/the8472/events{/privacy}", "received_events_url": "https://api.github.com/users/the8472/received_events", "type": "User", "site_admin": false}, "committer": {"login": "the8472", "id": 1065730, "node_id": "MDQ6VXNlcjEwNjU3MzA=", "avatar_url": "https://avatars.githubusercontent.com/u/1065730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/the8472", "html_url": "https://github.com/the8472", "followers_url": "https://api.github.com/users/the8472/followers", "following_url": "https://api.github.com/users/the8472/following{/other_user}", "gists_url": "https://api.github.com/users/the8472/gists{/gist_id}", "starred_url": "https://api.github.com/users/the8472/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/the8472/subscriptions", "organizations_url": "https://api.github.com/users/the8472/orgs", "repos_url": "https://api.github.com/users/the8472/repos", "events_url": "https://api.github.com/users/the8472/events{/privacy}", "received_events_url": "https://api.github.com/users/the8472/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6dc948e7238780dbe3d8e19b03f720c7c1e53449", "url": "https://api.github.com/repos/rust-lang/rust/commits/6dc948e7238780dbe3d8e19b03f720c7c1e53449", "html_url": "https://github.com/rust-lang/rust/commit/6dc948e7238780dbe3d8e19b03f720c7c1e53449"}], "stats": {"total": 8, "additions": 4, "deletions": 4}, "files": [{"sha": "d21e3408144fea607c598ea6695d479c58e28539", "filename": "src/bootstrap/format.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c07197046d40f973ce2217328444426214193e7e/src%2Fbootstrap%2Fformat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c07197046d40f973ce2217328444426214193e7e/src%2Fbootstrap%2Fformat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fformat.rs?ref=c07197046d40f973ce2217328444426214193e7e", "patch": "@@ -8,7 +8,7 @@ use std::path::{Path, PathBuf};\n use std::process::{Command, Stdio};\n use std::sync::mpsc::SyncSender;\n \n-fn rustfmt(src: &Path, rustfmt: &Path, paths: &[PathBuf], check: bool) -> Box<impl FnMut()> {\n+fn rustfmt(src: &Path, rustfmt: &Path, paths: &[PathBuf], check: bool) -> impl FnMut() {\n     let mut cmd = Command::new(&rustfmt);\n     // avoid the submodule config paths from coming into play,\n     // we only allow a single global config for the workspace for now\n@@ -22,8 +22,8 @@ fn rustfmt(src: &Path, rustfmt: &Path, paths: &[PathBuf], check: bool) -> Box<im\n     cmd.args(paths);\n     let cmd_debug = format!(\"{:?}\", cmd);\n     let mut cmd = cmd.spawn().expect(\"running rustfmt\");\n-    // poor man's async: return a box that'll wait for rustfmt's completion\n-    Box::new(move || {\n+    // poor man's async: return a closure that'll wait for rustfmt's completion\n+    move || {\n         let status = cmd.wait().unwrap();\n         if !status.success() {\n             eprintln!(\n@@ -34,7 +34,7 @@ fn rustfmt(src: &Path, rustfmt: &Path, paths: &[PathBuf], check: bool) -> Box<im\n             );\n             std::process::exit(1);\n         }\n-    })\n+    }\n }\n \n #[derive(serde::Deserialize)]"}]}