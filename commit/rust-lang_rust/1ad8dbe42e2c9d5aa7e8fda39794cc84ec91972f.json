{"sha": "1ad8dbe42e2c9d5aa7e8fda39794cc84ec91972f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFhZDhkYmU0MmUyYzlkNWFhN2U4ZmRhMzk3OTRjYzg0ZWM5MTk3MmY=", "commit": {"author": {"name": "Chris Morgan", "email": "me@chrismorgan.info", "date": "2013-10-29T13:27:15Z"}, "committer": {"name": "Chris Morgan", "email": "me@chrismorgan.info", "date": "2013-10-29T13:27:15Z"}, "message": "Fix Vim indent for wrapped function arguments.", "tree": {"sha": "1d1580f23042e56f20ca0fa94f2d4f8f8e34ec8b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1d1580f23042e56f20ca0fa94f2d4f8f8e34ec8b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1ad8dbe42e2c9d5aa7e8fda39794cc84ec91972f", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1ad8dbe42e2c9d5aa7e8fda39794cc84ec91972f", "html_url": "https://github.com/rust-lang/rust/commit/1ad8dbe42e2c9d5aa7e8fda39794cc84ec91972f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1ad8dbe42e2c9d5aa7e8fda39794cc84ec91972f/comments", "author": {"login": "chris-morgan", "id": 392868, "node_id": "MDQ6VXNlcjM5Mjg2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/392868?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chris-morgan", "html_url": "https://github.com/chris-morgan", "followers_url": "https://api.github.com/users/chris-morgan/followers", "following_url": "https://api.github.com/users/chris-morgan/following{/other_user}", "gists_url": "https://api.github.com/users/chris-morgan/gists{/gist_id}", "starred_url": "https://api.github.com/users/chris-morgan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chris-morgan/subscriptions", "organizations_url": "https://api.github.com/users/chris-morgan/orgs", "repos_url": "https://api.github.com/users/chris-morgan/repos", "events_url": "https://api.github.com/users/chris-morgan/events{/privacy}", "received_events_url": "https://api.github.com/users/chris-morgan/received_events", "type": "User", "site_admin": false}, "committer": {"login": "chris-morgan", "id": 392868, "node_id": "MDQ6VXNlcjM5Mjg2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/392868?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chris-morgan", "html_url": "https://github.com/chris-morgan", "followers_url": "https://api.github.com/users/chris-morgan/followers", "following_url": "https://api.github.com/users/chris-morgan/following{/other_user}", "gists_url": "https://api.github.com/users/chris-morgan/gists{/gist_id}", "starred_url": "https://api.github.com/users/chris-morgan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chris-morgan/subscriptions", "organizations_url": "https://api.github.com/users/chris-morgan/orgs", "repos_url": "https://api.github.com/users/chris-morgan/repos", "events_url": "https://api.github.com/users/chris-morgan/events{/privacy}", "received_events_url": "https://api.github.com/users/chris-morgan/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c20186bde5cc0129e4211fc766f117bf43a4b360", "url": "https://api.github.com/repos/rust-lang/rust/commits/c20186bde5cc0129e4211fc766f117bf43a4b360", "html_url": "https://github.com/rust-lang/rust/commit/c20186bde5cc0129e4211fc766f117bf43a4b360"}], "stats": {"total": 19, "additions": 17, "deletions": 2}, "files": [{"sha": "1f08c5190214f68c711c561800b15384de4d0ef0", "filename": "src/etc/vim/indent/rust.vim", "status": "modified", "additions": 17, "deletions": 2, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/1ad8dbe42e2c9d5aa7e8fda39794cc84ec91972f/src%2Fetc%2Fvim%2Findent%2Frust.vim", "raw_url": "https://github.com/rust-lang/rust/raw/1ad8dbe42e2c9d5aa7e8fda39794cc84ec91972f/src%2Fetc%2Fvim%2Findent%2Frust.vim", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fvim%2Findent%2Frust.vim?ref=1ad8dbe42e2c9d5aa7e8fda39794cc84ec91972f", "patch": "@@ -1,7 +1,7 @@\n \" Vim indent file\n \" Language:         Rust\n \" Author:           Chris Morgan <me@chrismorgan.info>\n-\" Last Change:      2013 Jul 10\n+\" Last Change:      2013 Oct 29\n \n \" Only load this indent file when no other was loaded.\n if exists(\"b:did_indent\")\n@@ -104,8 +104,23 @@ function GetRustIndent(lnum)\n \tlet prevline = s:get_line_trimmed(prevnonblank(a:lnum - 1))\n \tif prevline[len(prevline) - 1] == \",\"\n \t\t\t\t\\ && s:get_line_trimmed(a:lnum) !~ \"^\\\\s*[\\\\[\\\\]{}]\"\n+\t\t\t\t\\ && prevline !~ \"^\\\\s*fn\\\\s\"\n \t\t\" Oh ho! The previous line ended in a comma! I bet cindent will try to\n-\t\t\" take this too far... For now, let's use the previous line's indent\n+\t\t\" take this too far... For now, let's normally use the previous line's\n+\t\t\" indent.\n+\n+\t\t\" One case where this doesn't work out is where *this* line contains\n+\t\t\" square or curly brackets; then we normally *do* want to be indenting\n+\t\t\" further.\n+\t\t\"\n+\t\t\" Another case where we don't want to is one like a function\n+\t\t\" definition with arguments spread over multiple lines:\n+\t\t\"\n+\t\t\" fn foo(baz: Baz,\n+\t\t\"        baz: Baz) // <-- cindent gets this right by itself\n+\t\t\"\n+\t\t\" There are probably other cases where we don't want to do this as\n+\t\t\" well. Add them as needed.\n \t\treturn GetRustIndent(a:lnum - 1)\n \tendif\n "}]}