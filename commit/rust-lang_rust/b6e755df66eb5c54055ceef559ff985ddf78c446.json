{"sha": "b6e755df66eb5c54055ceef559ff985ddf78c446", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI2ZTc1NWRmNjZlYjVjNTQwNTVjZWVmNTU5ZmY5ODVkZGY3OGM0NDY=", "commit": {"author": {"name": "Johannes Hoff", "email": "johshoff@gmail.com", "date": "2015-05-16T23:07:52Z"}, "committer": {"name": "Johannes Hoff", "email": "johshoff@gmail.com", "date": "2015-05-16T23:07:52Z"}, "message": "fs::walk_dir example without unstable features\n\nThe current version of the example won't compile due to unstable features.\nThis is an attempt to fix that, at the cost of slightly more verbose code.", "tree": {"sha": "e9745495ccbe57ffa3ce3ec122b33ec986f2395e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e9745495ccbe57ffa3ce3ec122b33ec986f2395e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b6e755df66eb5c54055ceef559ff985ddf78c446", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b6e755df66eb5c54055ceef559ff985ddf78c446", "html_url": "https://github.com/rust-lang/rust/commit/b6e755df66eb5c54055ceef559ff985ddf78c446", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b6e755df66eb5c54055ceef559ff985ddf78c446/comments", "author": {"login": "johshoff", "id": 353935, "node_id": "MDQ6VXNlcjM1MzkzNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/353935?v=4", "gravatar_id": "", "url": "https://api.github.com/users/johshoff", "html_url": "https://github.com/johshoff", "followers_url": "https://api.github.com/users/johshoff/followers", "following_url": "https://api.github.com/users/johshoff/following{/other_user}", "gists_url": "https://api.github.com/users/johshoff/gists{/gist_id}", "starred_url": "https://api.github.com/users/johshoff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/johshoff/subscriptions", "organizations_url": "https://api.github.com/users/johshoff/orgs", "repos_url": "https://api.github.com/users/johshoff/repos", "events_url": "https://api.github.com/users/johshoff/events{/privacy}", "received_events_url": "https://api.github.com/users/johshoff/received_events", "type": "User", "site_admin": false}, "committer": {"login": "johshoff", "id": 353935, "node_id": "MDQ6VXNlcjM1MzkzNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/353935?v=4", "gravatar_id": "", "url": "https://api.github.com/users/johshoff", "html_url": "https://github.com/johshoff", "followers_url": "https://api.github.com/users/johshoff/followers", "following_url": "https://api.github.com/users/johshoff/following{/other_user}", "gists_url": "https://api.github.com/users/johshoff/gists{/gist_id}", "starred_url": "https://api.github.com/users/johshoff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/johshoff/subscriptions", "organizations_url": "https://api.github.com/users/johshoff/orgs", "repos_url": "https://api.github.com/users/johshoff/repos", "events_url": "https://api.github.com/users/johshoff/events{/privacy}", "received_events_url": "https://api.github.com/users/johshoff/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0d707d15f6ee4bef23cca36ce5f98aaf0ca707f9", "url": "https://api.github.com/repos/rust-lang/rust/commits/0d707d15f6ee4bef23cca36ce5f98aaf0ca707f9", "html_url": "https://github.com/rust-lang/rust/commit/0d707d15f6ee4bef23cca36ce5f98aaf0ca707f9"}], "stats": {"total": 11, "additions": 5, "deletions": 6}, "files": [{"sha": "481d9e69abd533e3a8adef732fdd16dcdbd32c57", "filename": "src/libstd/fs.rs", "status": "modified", "additions": 5, "deletions": 6, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/b6e755df66eb5c54055ceef559ff985ddf78c446/src%2Flibstd%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b6e755df66eb5c54055ceef559ff985ddf78c446/src%2Flibstd%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Ffs.rs?ref=b6e755df66eb5c54055ceef559ff985ddf78c446", "patch": "@@ -1099,20 +1099,19 @@ pub fn remove_dir_all<P: AsRef<Path>>(path: P) -> io::Result<()> {\n /// # Examples\n ///\n /// ```\n-/// # #![feature(path_ext)]\n /// use std::io;\n-/// use std::fs::{self, PathExt, DirEntry};\n+/// use std::fs::{self, DirEntry};\n /// use std::path::Path;\n ///\n /// // one possible implementation of fs::walk_dir only visiting files\n-/// fn visit_dirs(dir: &Path, cb: &mut FnMut(DirEntry)) -> io::Result<()> {\n-///     if dir.is_dir() {\n+/// fn visit_dirs(dir: &Path, cb: &Fn(&DirEntry)) -> io::Result<()> {\n+///     if try!(fs::metadata(dir)).is_dir() {\n ///         for entry in try!(fs::read_dir(dir)) {\n ///             let entry = try!(entry);\n-///             if entry.path().is_dir() {\n+///             if try!(fs::metadata(entry.path())).is_dir() {\n ///                 try!(visit_dirs(&entry.path(), cb));\n ///             } else {\n-///                 cb(entry);\n+///                 cb(&entry);\n ///             }\n ///         }\n ///     }"}]}