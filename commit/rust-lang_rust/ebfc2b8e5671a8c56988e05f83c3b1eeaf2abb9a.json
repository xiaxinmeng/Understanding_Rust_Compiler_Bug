{"sha": "ebfc2b8e5671a8c56988e05f83c3b1eeaf2abb9a", "node_id": "MDY6Q29tbWl0NzI0NzEyOmViZmMyYjhlNTY3MWE4YzU2OTg4ZTA1ZjgzYzNiMWVlYWYyYWJiOWE=", "commit": {"author": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2013-05-17T20:12:42Z"}, "committer": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2013-05-23T04:57:05Z"}, "message": "librustc: Rename core injection to std injection", "tree": {"sha": "b4553945a013ff16298a4f4efe9557d17faa1eb5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b4553945a013ff16298a4f4efe9557d17faa1eb5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ebfc2b8e5671a8c56988e05f83c3b1eeaf2abb9a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ebfc2b8e5671a8c56988e05f83c3b1eeaf2abb9a", "html_url": "https://github.com/rust-lang/rust/commit/ebfc2b8e5671a8c56988e05f83c3b1eeaf2abb9a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ebfc2b8e5671a8c56988e05f83c3b1eeaf2abb9a/comments", "author": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0c820d4123c754522b0655e9e74f692c55685bfa", "url": "https://api.github.com/repos/rust-lang/rust/commits/0c820d4123c754522b0655e9e74f692c55685bfa", "html_url": "https://github.com/rust-lang/rust/commit/0c820d4123c754522b0655e9e74f692c55685bfa"}], "stats": {"total": 36, "additions": 18, "deletions": 18}, "files": [{"sha": "837d3c285aaaaa08095806d7257e67b23c41454c", "filename": "src/librustc/driver/driver.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ebfc2b8e5671a8c56988e05f83c3b1eeaf2abb9a/src%2Flibrustc%2Fdriver%2Fdriver.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ebfc2b8e5671a8c56988e05f83c3b1eeaf2abb9a/src%2Flibrustc%2Fdriver%2Fdriver.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fdriver%2Fdriver.rs?ref=ebfc2b8e5671a8c56988e05f83c3b1eeaf2abb9a", "patch": "@@ -198,8 +198,8 @@ pub fn compile_rest(sess: Session,\n     crate = time(time_passes, ~\"intrinsic injection\", ||\n         front::intrinsic_inject::inject_intrinsic(sess, crate));\n \n-    crate = time(time_passes, ~\"core injection\", ||\n-        front::core_inject::maybe_inject_libcore_ref(sess, crate));\n+    crate = time(time_passes, ~\"std injection\", ||\n+        front::std_inject::maybe_inject_libstd_ref(sess, crate));\n \n     let ast_map = time(time_passes, ~\"ast indexing\", ||\n             syntax::ast_map::map_crate(sess.diagnostic(), crate));"}, {"sha": "e84f552fd1ce9dea404583c0d9ab550abe726829", "filename": "src/librustc/front/std_inject.rs", "status": "renamed", "additions": 9, "deletions": 10, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/ebfc2b8e5671a8c56988e05f83c3b1eeaf2abb9a/src%2Flibrustc%2Ffront%2Fstd_inject.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ebfc2b8e5671a8c56988e05f83c3b1eeaf2abb9a/src%2Flibrustc%2Ffront%2Fstd_inject.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Ffront%2Fstd_inject.rs?ref=ebfc2b8e5671a8c56988e05f83c3b1eeaf2abb9a", "patch": "@@ -16,23 +16,22 @@ use syntax::codemap;\n use syntax::codemap::dummy_sp;\n use syntax::fold;\n \n-static CORE_VERSION: &'static str = \"0.7-pre\";\n+static STD_VERSION: &'static str = \"0.7-pre\";\n \n-pub fn maybe_inject_libcore_ref(sess: Session,\n-                                crate: @ast::crate) -> @ast::crate {\n-    if use_core(crate) {\n-        inject_libcore_ref(sess, crate)\n+pub fn maybe_inject_libstd_ref(sess: Session, crate: @ast::crate)\n+                               -> @ast::crate {\n+    if use_std(crate) {\n+        inject_libstd_ref(sess, crate)\n     } else {\n         crate\n     }\n }\n \n-fn use_core(crate: @ast::crate) -> bool {\n-    !attr::attrs_contains_name(crate.node.attrs, \"no_core\")\n+fn use_std(crate: @ast::crate) -> bool {\n+    !attr::attrs_contains_name(crate.node.attrs, \"no_std\")\n }\n \n-fn inject_libcore_ref(sess: Session,\n-                      crate: @ast::crate) -> @ast::crate {\n+fn inject_libstd_ref(sess: Session, crate: @ast::crate) -> @ast::crate {\n     fn spanned<T:Copy>(x: T) -> codemap::spanned<T> {\n         codemap::spanned { node: x, span: dummy_sp() }\n     }\n@@ -48,7 +47,7 @@ fn inject_libcore_ref(sess: Session,\n                         style: ast::attr_inner,\n                         value: @spanned(ast::meta_name_value(\n                             @~\"vers\",\n-                            spanned(ast::lit_str(@CORE_VERSION.to_str()))\n+                            spanned(ast::lit_str(@STD_VERSION.to_str()))\n                         )),\n                         is_sugared_doc: false\n                     })", "previous_filename": "src/librustc/front/core_inject.rs"}, {"sha": "a21c5dc7b36e021acb7a2b5750cfd4fad57e7c8f", "filename": "src/librustc/rustc.rc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ebfc2b8e5671a8c56988e05f83c3b1eeaf2abb9a/src%2Flibrustc%2Frustc.rc", "raw_url": "https://github.com/rust-lang/rust/raw/ebfc2b8e5671a8c56988e05f83c3b1eeaf2abb9a/src%2Flibrustc%2Frustc.rc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Frustc.rc?ref=ebfc2b8e5671a8c56988e05f83c3b1eeaf2abb9a", "patch": "@@ -102,7 +102,7 @@ pub mod middle {\n pub mod front {\n     pub mod config;\n     pub mod test;\n-    pub mod core_inject;\n+    pub mod std_inject;\n     pub mod intrinsic_inject;\n }\n "}, {"sha": "6f4890c7834a7fbf6d73ed5301bc8ea4ae06fbc5", "filename": "src/libstd/core.rc", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/ebfc2b8e5671a8c56988e05f83c3b1eeaf2abb9a/src%2Flibstd%2Fcore.rc", "raw_url": "https://github.com/rust-lang/rust/raw/ebfc2b8e5671a8c56988e05f83c3b1eeaf2abb9a/src%2Flibstd%2Fcore.rc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fcore.rc?ref=ebfc2b8e5671a8c56988e05f83c3b1eeaf2abb9a", "patch": "@@ -57,8 +57,9 @@ they contained the following prologue:\n #[crate_type = \"lib\"];\n \n \n-// Don't link to core. We are core.\n-#[no_core];\n+// Don't link to std. We are std.\n+#[no_core]; // for stage0\n+#[no_std];\n \n #[deny(non_camel_case_types)];\n "}, {"sha": "f167ee3d5c48e13e34fa8f78a0a9e4c761d47283", "filename": "src/test/compile-fail/tag-that-dare-not-speak-its-name.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ebfc2b8e5671a8c56988e05f83c3b1eeaf2abb9a/src%2Ftest%2Fcompile-fail%2Ftag-that-dare-not-speak-its-name.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ebfc2b8e5671a8c56988e05f83c3b1eeaf2abb9a/src%2Ftest%2Fcompile-fail%2Ftag-that-dare-not-speak-its-name.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Ftag-that-dare-not-speak-its-name.rs?ref=ebfc2b8e5671a8c56988e05f83c3b1eeaf2abb9a", "patch": "@@ -11,7 +11,7 @@\n // error-pattern:mismatched types: expected `char` but found\n // Issue #876\n \n-#[no_core];\n+#[no_std];\n \n extern mod core;\n "}, {"sha": "9726eed58043e676904f38e8b934754a3234b36a", "filename": "src/test/run-pass/trait-to-str.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ebfc2b8e5671a8c56988e05f83c3b1eeaf2abb9a/src%2Ftest%2Frun-pass%2Ftrait-to-str.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ebfc2b8e5671a8c56988e05f83c3b1eeaf2abb9a/src%2Ftest%2Frun-pass%2Ftrait-to-str.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Ftrait-to-str.rs?ref=ebfc2b8e5671a8c56988e05f83c3b1eeaf2abb9a", "patch": "@@ -10,7 +10,7 @@\n \n // xfail-fast\n \n-#[no_core];\n+#[no_std];\n \n extern mod core;\n "}, {"sha": "11f9e7641e17b58cae9e8ccd8305c7e2cdd2b0c5", "filename": "src/test/run-pass/use.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ebfc2b8e5671a8c56988e05f83c3b1eeaf2abb9a/src%2Ftest%2Frun-pass%2Fuse.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ebfc2b8e5671a8c56988e05f83c3b1eeaf2abb9a/src%2Ftest%2Frun-pass%2Fuse.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fuse.rs?ref=ebfc2b8e5671a8c56988e05f83c3b1eeaf2abb9a", "patch": "@@ -10,7 +10,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-#[no_core];\n+#[no_std];\n extern mod core;\n extern mod zed(name = \"core\");\n extern mod bar(name = \"core\", vers = \"0.7-pre\");"}]}