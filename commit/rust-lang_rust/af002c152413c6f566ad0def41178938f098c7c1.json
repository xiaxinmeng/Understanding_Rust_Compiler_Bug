{"sha": "af002c152413c6f566ad0def41178938f098c7c1", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFmMDAyYzE1MjQxM2M2ZjU2NmFkMGRlZjQxMTc4OTM4ZjA5OGM3YzE=", "commit": {"author": {"name": "Eduard-Mihai Burtescu", "email": "eddyb@lyken.rs", "date": "2021-08-10T21:38:14Z"}, "committer": {"name": "Eduard-Mihai Burtescu", "email": "eddyb@lyken.rs", "date": "2021-08-24T17:11:49Z"}, "message": "tests: add v0 `&str` const value demangling test.", "tree": {"sha": "39dc28c202ca86a27da0d167876555218e5ad6b3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/39dc28c202ca86a27da0d167876555218e5ad6b3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/af002c152413c6f566ad0def41178938f098c7c1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/af002c152413c6f566ad0def41178938f098c7c1", "html_url": "https://github.com/rust-lang/rust/commit/af002c152413c6f566ad0def41178938f098c7c1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/af002c152413c6f566ad0def41178938f098c7c1/comments", "author": {"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}, "committer": {"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f8810ee171d1549cfb4082d4e1289704aad722e9", "url": "https://api.github.com/repos/rust-lang/rust/commits/f8810ee171d1549cfb4082d4e1289704aad722e9", "html_url": "https://github.com/rust-lang/rust/commit/f8810ee171d1549cfb4082d4e1289704aad722e9"}], "stats": {"total": 154, "additions": 154, "deletions": 0}, "files": [{"sha": "af111dd39face675e7219a112997ec7ab813595d", "filename": "src/test/ui/symbol-names/const-generics-str-demangling.rs", "status": "added", "additions": 44, "deletions": 0, "changes": 44, "blob_url": "https://github.com/rust-lang/rust/blob/af002c152413c6f566ad0def41178938f098c7c1/src%2Ftest%2Fui%2Fsymbol-names%2Fconst-generics-str-demangling.rs", "raw_url": "https://github.com/rust-lang/rust/raw/af002c152413c6f566ad0def41178938f098c7c1/src%2Ftest%2Fui%2Fsymbol-names%2Fconst-generics-str-demangling.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsymbol-names%2Fconst-generics-str-demangling.rs?ref=af002c152413c6f566ad0def41178938f098c7c1", "patch": "@@ -0,0 +1,44 @@\n+// build-fail\n+// compile-flags: -Z symbol-mangling-version=v0 --crate-name=c\n+#![feature(const_generics, rustc_attrs)]\n+#![allow(incomplete_features)]\n+\n+pub struct Str<const S: &'static str>;\n+\n+#[rustc_symbol_name]\n+//~^ ERROR symbol-name(_RMCsno73SFvQKx_1cINtB0_3StrKRe616263_E)\n+//~| ERROR demangling(<c[464da6a86cb672f]::Str<\"abc\">>)\n+//~| ERROR demangling-alt(<c::Str<\"abc\">>)\n+impl Str<\"abc\"> {}\n+\n+#[rustc_symbol_name]\n+//~^ ERROR symbol-name(_RMs_Csno73SFvQKx_1cINtB2_3StrKRe27_E)\n+//~| ERROR demangling(<c[464da6a86cb672f]::Str<\"'\">>)\n+//~| ERROR demangling-alt(<c::Str<\"'\">>)\n+impl Str<\"'\"> {}\n+\n+#[rustc_symbol_name]\n+//~^ ERROR symbol-name(_RMs0_Csno73SFvQKx_1cINtB3_3StrKRe090a_E)\n+//~| ERROR demangling(<c[464da6a86cb672f]::Str<\"\\t\\n\">>)\n+//~| ERROR demangling-alt(<c::Str<\"\\t\\n\">>)\n+impl Str<\"\\t\\n\"> {}\n+\n+#[rustc_symbol_name]\n+//~^ ERROR symbol-name(_RMs1_Csno73SFvQKx_1cINtB3_3StrKRee28882c3bc_E)\n+//~| ERROR demangling(<c[464da6a86cb672f]::Str<\"\u2202\u00fc\">>)\n+//~| ERROR demangling-alt(<c::Str<\"\u2202\u00fc\">>)\n+impl Str<\"\u2202\u00fc\"> {}\n+\n+#[rustc_symbol_name]\n+//~^ ERROR symbol-name(_RMs2_Csno73SFvQKx_1cINtB3_3StrKRee183a1e18390e183ade1839be18394e1839ae18390e183935fe18392e18394e1839be183a0e18398e18394e1839ae183985fe183a1e18390e18393e18398e1839ae18398_E)\n+//~| ERROR demangling(<c[464da6a86cb672f]::Str<\"\u10e1\u10d0\u10ed\u10db\u10d4\u10da\u10d0\u10d3_\u10d2\u10d4\u10db\u10e0\u10d8\u10d4\u10da\u10d8_\u10e1\u10d0\u10d3\u10d8\u10da\u10d8\">>)\n+//~| ERROR demangling-alt(<c::Str<\"\u10e1\u10d0\u10ed\u10db\u10d4\u10da\u10d0\u10d3_\u10d2\u10d4\u10db\u10e0\u10d8\u10d4\u10da\u10d8_\u10e1\u10d0\u10d3\u10d8\u10da\u10d8\">>)\n+impl Str<\"\u10e1\u10d0\u10ed\u10db\u10d4\u10da\u10d0\u10d3_\u10d2\u10d4\u10db\u10e0\u10d8\u10d4\u10da\u10d8_\u10e1\u10d0\u10d3\u10d8\u10da\u10d8\"> {}\n+\n+#[rustc_symbol_name]\n+//~^ ERROR symbol-name(_RMs3_Csno73SFvQKx_1cINtB3_3StrKRef09f908af09fa688f09fa686f09f90ae20c2a720f09f90b6f09f9192e29895f09f94a520c2a720f09fa7a1f09f929bf09f929af09f9299f09f929c_E)\n+//~| ERROR demangling(<c[464da6a86cb672f]::Str<\"\ud83d\udc0a\ud83e\udd88\ud83e\udd86\ud83d\udc2e \u00a7 \ud83d\udc36\ud83d\udc52\u2615\ud83d\udd25 \u00a7 \ud83e\udde1\ud83d\udc9b\ud83d\udc9a\ud83d\udc99\ud83d\udc9c\">>)\n+//~| ERROR demangling-alt(<c::Str<\"\ud83d\udc0a\ud83e\udd88\ud83e\udd86\ud83d\udc2e \u00a7 \ud83d\udc36\ud83d\udc52\u2615\ud83d\udd25 \u00a7 \ud83e\udde1\ud83d\udc9b\ud83d\udc9a\ud83d\udc99\ud83d\udc9c\">>)\n+impl Str<\"\ud83d\udc0a\ud83e\udd88\ud83e\udd86\ud83d\udc2e \u00a7 \ud83d\udc36\ud83d\udc52\u2615\ud83d\udd25 \u00a7 \ud83e\udde1\ud83d\udc9b\ud83d\udc9a\ud83d\udc99\ud83d\udc9c\"> {}\n+\n+fn main() {}"}, {"sha": "f401997017fb54d6da9f7e8bbd4ddc9c6a2e4ec4", "filename": "src/test/ui/symbol-names/const-generics-str-demangling.stderr", "status": "added", "additions": 110, "deletions": 0, "changes": 110, "blob_url": "https://github.com/rust-lang/rust/blob/af002c152413c6f566ad0def41178938f098c7c1/src%2Ftest%2Fui%2Fsymbol-names%2Fconst-generics-str-demangling.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/af002c152413c6f566ad0def41178938f098c7c1/src%2Ftest%2Fui%2Fsymbol-names%2Fconst-generics-str-demangling.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsymbol-names%2Fconst-generics-str-demangling.stderr?ref=af002c152413c6f566ad0def41178938f098c7c1", "patch": "@@ -0,0 +1,110 @@\n+error: symbol-name(_RMCsno73SFvQKx_1cINtB0_3StrKRe616263_E)\n+  --> $DIR/const-generics-str-demangling.rs:8:1\n+   |\n+LL | #[rustc_symbol_name]\n+   | ^^^^^^^^^^^^^^^^^^^^\n+\n+error: demangling(<c[464da6a86cb672f]::Str<\"abc\">>)\n+  --> $DIR/const-generics-str-demangling.rs:8:1\n+   |\n+LL | #[rustc_symbol_name]\n+   | ^^^^^^^^^^^^^^^^^^^^\n+\n+error: demangling-alt(<c::Str<\"abc\">>)\n+  --> $DIR/const-generics-str-demangling.rs:8:1\n+   |\n+LL | #[rustc_symbol_name]\n+   | ^^^^^^^^^^^^^^^^^^^^\n+\n+error: symbol-name(_RMs_Csno73SFvQKx_1cINtB2_3StrKRe27_E)\n+  --> $DIR/const-generics-str-demangling.rs:14:1\n+   |\n+LL | #[rustc_symbol_name]\n+   | ^^^^^^^^^^^^^^^^^^^^\n+\n+error: demangling(<c[464da6a86cb672f]::Str<\"'\">>)\n+  --> $DIR/const-generics-str-demangling.rs:14:1\n+   |\n+LL | #[rustc_symbol_name]\n+   | ^^^^^^^^^^^^^^^^^^^^\n+\n+error: demangling-alt(<c::Str<\"'\">>)\n+  --> $DIR/const-generics-str-demangling.rs:14:1\n+   |\n+LL | #[rustc_symbol_name]\n+   | ^^^^^^^^^^^^^^^^^^^^\n+\n+error: symbol-name(_RMs0_Csno73SFvQKx_1cINtB3_3StrKRe090a_E)\n+  --> $DIR/const-generics-str-demangling.rs:20:1\n+   |\n+LL | #[rustc_symbol_name]\n+   | ^^^^^^^^^^^^^^^^^^^^\n+\n+error: demangling(<c[464da6a86cb672f]::Str<\"\\t\\n\">>)\n+  --> $DIR/const-generics-str-demangling.rs:20:1\n+   |\n+LL | #[rustc_symbol_name]\n+   | ^^^^^^^^^^^^^^^^^^^^\n+\n+error: demangling-alt(<c::Str<\"\\t\\n\">>)\n+  --> $DIR/const-generics-str-demangling.rs:20:1\n+   |\n+LL | #[rustc_symbol_name]\n+   | ^^^^^^^^^^^^^^^^^^^^\n+\n+error: symbol-name(_RMs1_Csno73SFvQKx_1cINtB3_3StrKRee28882c3bc_E)\n+  --> $DIR/const-generics-str-demangling.rs:26:1\n+   |\n+LL | #[rustc_symbol_name]\n+   | ^^^^^^^^^^^^^^^^^^^^\n+\n+error: demangling(<c[464da6a86cb672f]::Str<\"\u2202\u00fc\">>)\n+  --> $DIR/const-generics-str-demangling.rs:26:1\n+   |\n+LL | #[rustc_symbol_name]\n+   | ^^^^^^^^^^^^^^^^^^^^\n+\n+error: demangling-alt(<c::Str<\"\u2202\u00fc\">>)\n+  --> $DIR/const-generics-str-demangling.rs:26:1\n+   |\n+LL | #[rustc_symbol_name]\n+   | ^^^^^^^^^^^^^^^^^^^^\n+\n+error: symbol-name(_RMs2_Csno73SFvQKx_1cINtB3_3StrKRee183a1e18390e183ade1839be18394e1839ae18390e183935fe18392e18394e1839be183a0e18398e18394e1839ae183985fe183a1e18390e18393e18398e1839ae18398_E)\n+  --> $DIR/const-generics-str-demangling.rs:32:1\n+   |\n+LL | #[rustc_symbol_name]\n+   | ^^^^^^^^^^^^^^^^^^^^\n+\n+error: demangling(<c[464da6a86cb672f]::Str<\"\u10e1\u10d0\u10ed\u10db\u10d4\u10da\u10d0\u10d3_\u10d2\u10d4\u10db\u10e0\u10d8\u10d4\u10da\u10d8_\u10e1\u10d0\u10d3\u10d8\u10da\u10d8\">>)\n+  --> $DIR/const-generics-str-demangling.rs:32:1\n+   |\n+LL | #[rustc_symbol_name]\n+   | ^^^^^^^^^^^^^^^^^^^^\n+\n+error: demangling-alt(<c::Str<\"\u10e1\u10d0\u10ed\u10db\u10d4\u10da\u10d0\u10d3_\u10d2\u10d4\u10db\u10e0\u10d8\u10d4\u10da\u10d8_\u10e1\u10d0\u10d3\u10d8\u10da\u10d8\">>)\n+  --> $DIR/const-generics-str-demangling.rs:32:1\n+   |\n+LL | #[rustc_symbol_name]\n+   | ^^^^^^^^^^^^^^^^^^^^\n+\n+error: symbol-name(_RMs3_Csno73SFvQKx_1cINtB3_3StrKRef09f908af09fa688f09fa686f09f90ae20c2a720f09f90b6f09f9192e29895f09f94a520c2a720f09fa7a1f09f929bf09f929af09f9299f09f929c_E)\n+  --> $DIR/const-generics-str-demangling.rs:38:1\n+   |\n+LL | #[rustc_symbol_name]\n+   | ^^^^^^^^^^^^^^^^^^^^\n+\n+error: demangling(<c[464da6a86cb672f]::Str<\"\ud83d\udc0a\ud83e\udd88\ud83e\udd86\ud83d\udc2e \u00a7 \ud83d\udc36\ud83d\udc52\u2615\ud83d\udd25 \u00a7 \ud83e\udde1\ud83d\udc9b\ud83d\udc9a\ud83d\udc99\ud83d\udc9c\">>)\n+  --> $DIR/const-generics-str-demangling.rs:38:1\n+   |\n+LL | #[rustc_symbol_name]\n+   | ^^^^^^^^^^^^^^^^^^^^\n+\n+error: demangling-alt(<c::Str<\"\ud83d\udc0a\ud83e\udd88\ud83e\udd86\ud83d\udc2e \u00a7 \ud83d\udc36\ud83d\udc52\u2615\ud83d\udd25 \u00a7 \ud83e\udde1\ud83d\udc9b\ud83d\udc9a\ud83d\udc99\ud83d\udc9c\">>)\n+  --> $DIR/const-generics-str-demangling.rs:38:1\n+   |\n+LL | #[rustc_symbol_name]\n+   | ^^^^^^^^^^^^^^^^^^^^\n+\n+error: aborting due to 18 previous errors\n+"}]}