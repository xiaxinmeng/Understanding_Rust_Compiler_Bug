{"sha": "f40aa598e97465feb753abbb18268a368ef0118e", "node_id": "C_kwDOAAsO6NoAKGY0MGFhNTk4ZTk3NDY1ZmViNzUzYWJiYjE4MjY4YTM2OGVmMDExOGU", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2023-03-21T15:43:51Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2023-03-30T20:56:52Z"}, "message": "Rename doc(primitive) into rustc_doc_primitive", "tree": {"sha": "b48fa256229502bac02faeeda24e9604aad54757", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b48fa256229502bac02faeeda24e9604aad54757"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f40aa598e97465feb753abbb18268a368ef0118e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f40aa598e97465feb753abbb18268a368ef0118e", "html_url": "https://github.com/rust-lang/rust/commit/f40aa598e97465feb753abbb18268a368ef0118e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f40aa598e97465feb753abbb18268a368ef0118e/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "789ee5e4333a132cb58708ac5c341571c57d92ef", "url": "https://api.github.com/repos/rust-lang/rust/commits/789ee5e4333a132cb58708ac5c341571c57d92ef", "html_url": "https://github.com/rust-lang/rust/commit/789ee5e4333a132cb58708ac5c341571c57d92ef"}], "stats": {"total": 25, "additions": 6, "deletions": 19}, "files": [{"sha": "b62da63644d20e3ae828fb2ec4960e7f93e39ac4", "filename": "compiler/rustc_feature/src/active.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f40aa598e97465feb753abbb18268a368ef0118e/compiler%2Frustc_feature%2Fsrc%2Factive.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f40aa598e97465feb753abbb18268a368ef0118e/compiler%2Frustc_feature%2Fsrc%2Factive.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_feature%2Fsrc%2Factive.rs?ref=f40aa598e97465feb753abbb18268a368ef0118e", "patch": "@@ -225,7 +225,7 @@ declare_features! (\n     (active, rustc_allow_const_fn_unstable, \"1.49.0\", Some(69399), None),\n     /// Allows using compiler's own crates.\n     (active, rustc_private, \"1.0.0\", Some(27812), None),\n-    /// Allows using internal rustdoc features like `doc(primitive)` or `doc(keyword)`.\n+    /// Allows using internal rustdoc features like `doc(keyword)`.\n     (active, rustdoc_internals, \"1.58.0\", Some(90418), None),\n     /// Allows using the `rustdoc::missing_doc_code_examples` lint\n     (active, rustdoc_missing_doc_code_examples, \"1.31.0\", Some(101730), None),"}, {"sha": "c77292fdd1647d630407cafafe14482f17760764", "filename": "compiler/rustc_feature/src/builtin_attrs.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f40aa598e97465feb753abbb18268a368ef0118e/compiler%2Frustc_feature%2Fsrc%2Fbuiltin_attrs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f40aa598e97465feb753abbb18268a368ef0118e/compiler%2Frustc_feature%2Fsrc%2Fbuiltin_attrs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_feature%2Fsrc%2Fbuiltin_attrs.rs?ref=f40aa598e97465feb753abbb18268a368ef0118e", "patch": "@@ -778,6 +778,10 @@ pub const BUILTIN_ATTRIBUTES: &[BuiltinAttribute] = &[\n         definition of a trait, it's currently in experimental form and should be changed before \\\n         being exposed outside of the std\"\n     ),\n+    rustc_attr!(\n+        rustc_doc_primitive, Normal, template!(NameValueStr: \"primitive name\"), ErrorFollowing,\n+        r#\"`rustc_doc_primitive` is a rustc internal attribute\"#,\n+    ),\n \n     // ==========================================================================\n     // Internal attributes, Testing:"}, {"sha": "b354dca7cc44c1a80830775280a187100c216d52", "filename": "compiler/rustc_passes/messages.ftl", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/f40aa598e97465feb753abbb18268a368ef0118e/compiler%2Frustc_passes%2Fmessages.ftl", "raw_url": "https://github.com/rust-lang/rust/raw/f40aa598e97465feb753abbb18268a368ef0118e/compiler%2Frustc_passes%2Fmessages.ftl", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_passes%2Fmessages.ftl?ref=f40aa598e97465feb753abbb18268a368ef0118e", "patch": "@@ -148,9 +148,6 @@ passes_doc_test_unknown =\n passes_doc_test_takes_list =\n     `#[doc(test(...)]` takes a list of attributes\n \n-passes_doc_primitive =\n-    `doc(primitive)` should never have been stable\n-\n passes_doc_cfg_hide_takes_list =\n     `#[doc(cfg_hide(...)]` takes a list of attributes\n "}, {"sha": "80a93da2b45c4bc8327f0a7a97c163f615d2cb78", "filename": "compiler/rustc_passes/src/check_attr.rs", "status": "modified", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/f40aa598e97465feb753abbb18268a368ef0118e/compiler%2Frustc_passes%2Fsrc%2Fcheck_attr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f40aa598e97465feb753abbb18268a368ef0118e/compiler%2Frustc_passes%2Fsrc%2Fcheck_attr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_passes%2Fsrc%2Fcheck_attr.rs?ref=f40aa598e97465feb753abbb18268a368ef0118e", "patch": "@@ -1109,17 +1109,6 @@ impl CheckAttrVisitor<'_> {\n                             }\n                         }\n \n-                        sym::primitive => {\n-                            if !self.tcx.features().rustdoc_internals {\n-                                self.tcx.emit_spanned_lint(\n-                                    INVALID_DOC_ATTRIBUTES,\n-                                    hir_id,\n-                                    i_meta.span,\n-                                    errors::DocPrimitive,\n-                                );\n-                            }\n-                        }\n-\n                         _ => {\n                             let path = rustc_ast_pretty::pprust::path_to_string(&i_meta.path);\n                             if i_meta.has_name(sym::spotlight) {"}, {"sha": "139ba8c9677561267145e77e8c303b5f5596d4b4", "filename": "compiler/rustc_passes/src/errors.rs", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f40aa598e97465feb753abbb18268a368ef0118e/compiler%2Frustc_passes%2Fsrc%2Ferrors.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f40aa598e97465feb753abbb18268a368ef0118e/compiler%2Frustc_passes%2Fsrc%2Ferrors.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_passes%2Fsrc%2Ferrors.rs?ref=f40aa598e97465feb753abbb18268a368ef0118e", "patch": "@@ -288,10 +288,6 @@ pub struct DocTestTakesList;\n #[diag(passes_doc_cfg_hide_takes_list)]\n pub struct DocCfgHideTakesList;\n \n-#[derive(LintDiagnostic)]\n-#[diag(passes_doc_primitive)]\n-pub struct DocPrimitive;\n-\n #[derive(LintDiagnostic)]\n #[diag(passes_doc_test_unknown_any)]\n pub struct DocTestUnknownAny {"}, {"sha": "f08f84a2a124f97bbe887a93a6c0473ac5cc9835", "filename": "compiler/rustc_span/src/symbol.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/f40aa598e97465feb753abbb18268a368ef0118e/compiler%2Frustc_span%2Fsrc%2Fsymbol.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f40aa598e97465feb753abbb18268a368ef0118e/compiler%2Frustc_span%2Fsrc%2Fsymbol.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_span%2Fsrc%2Fsymbol.rs?ref=f40aa598e97465feb753abbb18268a368ef0118e", "patch": "@@ -1245,6 +1245,7 @@ symbols! {\n         rustc_diagnostic_macros,\n         rustc_dirty,\n         rustc_do_not_const_check,\n+        rustc_doc_primitive,\n         rustc_dummy,\n         rustc_dump_env_program_clauses,\n         rustc_dump_program_clauses,"}]}