{"sha": "594c499db995abaacc10a74c0afbb9aeed48117d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU5NGM0OTlkYjk5NWFiYWFjYzEwYTc0YzBhZmJiOWFlZWQ0ODExN2Q=", "commit": {"author": {"name": "LeSeulArtichaut", "email": "leseulartichaut@gmail.com", "date": "2020-05-03T21:11:58Z"}, "committer": {"name": "LeSeulArtichaut", "email": "leseulartichaut@gmail.com", "date": "2020-05-27T18:37:57Z"}, "message": "Add tests", "tree": {"sha": "5c34c3bd5024f72f4db50e5d65d7a37d14aebf26", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5c34c3bd5024f72f4db50e5d65d7a37d14aebf26"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/594c499db995abaacc10a74c0afbb9aeed48117d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/594c499db995abaacc10a74c0afbb9aeed48117d", "html_url": "https://github.com/rust-lang/rust/commit/594c499db995abaacc10a74c0afbb9aeed48117d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/594c499db995abaacc10a74c0afbb9aeed48117d/comments", "author": {"login": "LeSeulArtichaut", "id": 38361244, "node_id": "MDQ6VXNlcjM4MzYxMjQ0", "avatar_url": "https://avatars.githubusercontent.com/u/38361244?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LeSeulArtichaut", "html_url": "https://github.com/LeSeulArtichaut", "followers_url": "https://api.github.com/users/LeSeulArtichaut/followers", "following_url": "https://api.github.com/users/LeSeulArtichaut/following{/other_user}", "gists_url": "https://api.github.com/users/LeSeulArtichaut/gists{/gist_id}", "starred_url": "https://api.github.com/users/LeSeulArtichaut/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LeSeulArtichaut/subscriptions", "organizations_url": "https://api.github.com/users/LeSeulArtichaut/orgs", "repos_url": "https://api.github.com/users/LeSeulArtichaut/repos", "events_url": "https://api.github.com/users/LeSeulArtichaut/events{/privacy}", "received_events_url": "https://api.github.com/users/LeSeulArtichaut/received_events", "type": "User", "site_admin": false}, "committer": {"login": "LeSeulArtichaut", "id": 38361244, "node_id": "MDQ6VXNlcjM4MzYxMjQ0", "avatar_url": "https://avatars.githubusercontent.com/u/38361244?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LeSeulArtichaut", "html_url": "https://github.com/LeSeulArtichaut", "followers_url": "https://api.github.com/users/LeSeulArtichaut/followers", "following_url": "https://api.github.com/users/LeSeulArtichaut/following{/other_user}", "gists_url": "https://api.github.com/users/LeSeulArtichaut/gists{/gist_id}", "starred_url": "https://api.github.com/users/LeSeulArtichaut/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LeSeulArtichaut/subscriptions", "organizations_url": "https://api.github.com/users/LeSeulArtichaut/orgs", "repos_url": "https://api.github.com/users/LeSeulArtichaut/repos", "events_url": "https://api.github.com/users/LeSeulArtichaut/events{/privacy}", "received_events_url": "https://api.github.com/users/LeSeulArtichaut/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a977df35d160c1fe7040c76a9276b64e7a7aedec", "url": "https://api.github.com/repos/rust-lang/rust/commits/a977df35d160c1fe7040c76a9276b64e7a7aedec", "html_url": "https://github.com/rust-lang/rust/commit/a977df35d160c1fe7040c76a9276b64e7a7aedec"}], "stats": {"total": 82, "additions": 82, "deletions": 0}, "files": [{"sha": "80005fd4ef6321fc1ca94349b022d071f0095fc6", "filename": "src/test/ui/feature-gates/feature-gate-unsafe_block_in_unsafe_fn.rs", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/594c499db995abaacc10a74c0afbb9aeed48117d/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-unsafe_block_in_unsafe_fn.rs", "raw_url": "https://github.com/rust-lang/rust/raw/594c499db995abaacc10a74c0afbb9aeed48117d/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-unsafe_block_in_unsafe_fn.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-unsafe_block_in_unsafe_fn.rs?ref=594c499db995abaacc10a74c0afbb9aeed48117d", "patch": "@@ -0,0 +1,11 @@\n+#![deny(unused_unsafe)]\n+\n+unsafe fn unsf() {}\n+\n+unsafe fn foo() {\n+    unsafe { //~ ERROR unnecessary `unsafe` block\n+        unsf()\n+    }\n+}\n+\n+fn main() {}"}, {"sha": "64874e590fb89a32271bf0b00447182ff08a5165", "filename": "src/test/ui/feature-gates/feature-gate-unsafe_block_in_unsafe_fn.stderr", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/594c499db995abaacc10a74c0afbb9aeed48117d/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-unsafe_block_in_unsafe_fn.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/594c499db995abaacc10a74c0afbb9aeed48117d/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-unsafe_block_in_unsafe_fn.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-unsafe_block_in_unsafe_fn.stderr?ref=594c499db995abaacc10a74c0afbb9aeed48117d", "patch": "@@ -0,0 +1,16 @@\n+error: unnecessary `unsafe` block\n+  --> $DIR/feature-gate-unsafe_block_in_unsafe_fn.rs:6:5\n+   |\n+LL | unsafe fn foo() {\n+   | --------------- because it's nested under this `unsafe` fn\n+LL |     unsafe {\n+   |     ^^^^^^ unnecessary `unsafe` block\n+   |\n+note: the lint level is defined here\n+  --> $DIR/feature-gate-unsafe_block_in_unsafe_fn.rs:1:9\n+   |\n+LL | #![deny(unused_unsafe)]\n+   |         ^^^^^^^^^^^^^\n+\n+error: aborting due to previous error\n+"}, {"sha": "0ffb2827bfde29f37bdf361d8397816385479faf", "filename": "src/test/ui/unsafe/rfc-2585-unsafe_op_in_unsafe_fn.rs", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/594c499db995abaacc10a74c0afbb9aeed48117d/src%2Ftest%2Fui%2Funsafe%2Frfc-2585-unsafe_op_in_unsafe_fn.rs", "raw_url": "https://github.com/rust-lang/rust/raw/594c499db995abaacc10a74c0afbb9aeed48117d/src%2Ftest%2Fui%2Funsafe%2Frfc-2585-unsafe_op_in_unsafe_fn.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funsafe%2Frfc-2585-unsafe_op_in_unsafe_fn.rs?ref=594c499db995abaacc10a74c0afbb9aeed48117d", "patch": "@@ -0,0 +1,26 @@\n+#![feature(unsafe_block_in_unsafe_fn)]\n+#![warn(unsafe_op_in_unsafe_fn)]\n+#![deny(unused_unsafe)]\n+\n+unsafe fn unsf() {}\n+\n+unsafe fn foo() {\n+    unsf();\n+    //~^ WARNING call to unsafe function is unsafe and requires unsafe block\n+}\n+\n+unsafe fn bar() {\n+    unsafe { unsf() } // no error\n+}\n+\n+unsafe fn baz() {\n+    unsafe { unsafe { unsf() } }\n+    //~^ ERROR unnecessary `unsafe` block\n+}\n+\n+#[allow(unsafe_op_in_unsafe_fn)]\n+unsafe fn qux() {\n+    unsf(); // no error\n+}\n+\n+fn main() {}"}, {"sha": "be6af2a11c40aab861dc55cd2ec1006aa746f048", "filename": "src/test/ui/unsafe/rfc-2585-unsafe_op_in_unsafe_fn.stderr", "status": "added", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/594c499db995abaacc10a74c0afbb9aeed48117d/src%2Ftest%2Fui%2Funsafe%2Frfc-2585-unsafe_op_in_unsafe_fn.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/594c499db995abaacc10a74c0afbb9aeed48117d/src%2Ftest%2Fui%2Funsafe%2Frfc-2585-unsafe_op_in_unsafe_fn.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funsafe%2Frfc-2585-unsafe_op_in_unsafe_fn.stderr?ref=594c499db995abaacc10a74c0afbb9aeed48117d", "patch": "@@ -0,0 +1,29 @@\n+warning: call to unsafe function is unsafe and requires unsafe block (error E0133)\n+  --> $DIR/rfc-2585-unsafe_op_in_unsafe_fn.rs:8:5\n+   |\n+LL |     unsf();\n+   |     ^^^^^^ call to unsafe function\n+   |\n+note: the lint level is defined here\n+  --> $DIR/rfc-2585-unsafe_op_in_unsafe_fn.rs:2:9\n+   |\n+LL | #![warn(unsafe_op_in_unsafe_fn)]\n+   |         ^^^^^^^^^^^^^^^^^^^^^^\n+   = note: consult the function's documentation for information on how to avoid undefined behavior\n+\n+error: unnecessary `unsafe` block\n+  --> $DIR/rfc-2585-unsafe_op_in_unsafe_fn.rs:17:14\n+   |\n+LL |     unsafe { unsafe { unsf() } }\n+   |     ------   ^^^^^^ unnecessary `unsafe` block\n+   |     |\n+   |     because it's nested under this `unsafe` block\n+   |\n+note: the lint level is defined here\n+  --> $DIR/rfc-2585-unsafe_op_in_unsafe_fn.rs:3:9\n+   |\n+LL | #![deny(unused_unsafe)]\n+   |         ^^^^^^^^^^^^^\n+\n+error: aborting due to previous error; 1 warning emitted\n+"}]}