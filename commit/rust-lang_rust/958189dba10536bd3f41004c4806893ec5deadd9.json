{"sha": "958189dba10536bd3f41004c4806893ec5deadd9", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk1ODE4OWRiYTEwNTM2YmQzZjQxMDA0YzQ4MDY4OTNlYzVkZWFkZDk=", "commit": {"author": {"name": "Tim Chevalier", "email": "chevalier@alum.wellesley.edu", "date": "2013-04-18T01:59:32Z"}, "committer": {"name": "Tim Chevalier", "email": "chevalier@alum.wellesley.edu", "date": "2013-04-18T01:59:32Z"}, "message": "rustpkg: Add a list of rustpkg commands that should pass\n\nThis is a test file containing examples of commands that should\nsucceed. When we write the test runner, we will have to figure\nout how to automate them.", "tree": {"sha": "f182a917b8670dde0ba98f56497ab8b0967ffabd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f182a917b8670dde0ba98f56497ab8b0967ffabd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/958189dba10536bd3f41004c4806893ec5deadd9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/958189dba10536bd3f41004c4806893ec5deadd9", "html_url": "https://github.com/rust-lang/rust/commit/958189dba10536bd3f41004c4806893ec5deadd9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/958189dba10536bd3f41004c4806893ec5deadd9/comments", "author": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "committer": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e2d947d72f78ea195585fd2fc10e2a7bd8d274a4", "url": "https://api.github.com/repos/rust-lang/rust/commits/e2d947d72f78ea195585fd2fc10e2a7bd8d274a4", "html_url": "https://github.com/rust-lang/rust/commit/e2d947d72f78ea195585fd2fc10e2a7bd8d274a4"}], "stats": {"total": 35, "additions": 35, "deletions": 0}, "files": [{"sha": "e1a1b2462b253b609a699975d07f1d7dd31538a1", "filename": "src/librustpkg/testsuite/pass/commands.txt", "status": "added", "additions": 35, "deletions": 0, "changes": 35, "blob_url": "https://github.com/rust-lang/rust/blob/958189dba10536bd3f41004c4806893ec5deadd9/src%2Flibrustpkg%2Ftestsuite%2Fpass%2Fcommands.txt", "raw_url": "https://github.com/rust-lang/rust/raw/958189dba10536bd3f41004c4806893ec5deadd9/src%2Flibrustpkg%2Ftestsuite%2Fpass%2Fcommands.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustpkg%2Ftestsuite%2Fpass%2Fcommands.txt?ref=958189dba10536bd3f41004c4806893ec5deadd9", "patch": "@@ -0,0 +1,35 @@\n+Commands that should succeed:\n+\n+1. rustpkg install github.com/mozilla-servo/rust-http-client\n+\n+2. Create a git repo containing a package \"foo\", add a tag called \"1.0\" -- `rustpkg install foo` should install a library called \"libfoo-....-1.0...\"\n+\n+3. rustpkg install foo, if ./.rust/foo exists and is a valid package directory\n+\n+4. RUST_PATH=/home/rust rustpkg install foo installs an executable in /home/rust/foo if ./foo exists and is a valid package directory\n+\n+5. RUST_PATH=/home/rust:/home/more_rust rustpkg install foo succeeds if /home/more_rust/foo exists and is a valid package directory\n+\n+6. rustpkg install foo; rustpkg install bar; rustpkg install quux; rustpkg list should show foo, bar, and quux\n+  6a. then, rustpkg remove foo; rustpkg list should show bar and quux, but not foo\n+\n+7. Execute `rustpkg build foo`. Check the datestamp on build/foo. Execute the same command again. Make sure the datestamp hasn't changed.\n+\n+8. Execute `rustpkg build foo` where foo has a dependency on bar, which hasn't been built before. Check the datestamps on build/foo and build/bar and make sure bar's datestamp is earlier than foo's.\n+\n+9. Execute `rustpkg build foo` where foo has a dependency on bar, which hasn't been built before. Then, change one of the source files in bar. Execute `rustpkg build foo` again. Make sure, based on datestamps, that foo was really rebuilt.\n+\n+10. Repeat test 9 in the case where the contents of the source file in bar change but its datestamp doesn't change.\n+\n+11. If the current directory contains package directories for foo-0.1 and foo.0.2, `rustpkg install foo#0.1` installs foo#0.1 and doesn't install foo#0.2.\n+\n+12. `rustpkg do fancy-pkg frob` succeeds if `fancy-pkg` has a package script that defines a custom build hook named `frob`.\n+\n+13. `rustpkg info foo` prints out something about foo, if foo is installed.\n+\n+14. (Not sure what prefer and unprefer do)\n+\n+15. `rustpkg test foo` runs tests and prints their output, if foo contains #[test]s.\n+\n+16. If foo is installed, `rustpkg uninstall foo; rustpkg list` doesn't include foo in the list\n+"}]}