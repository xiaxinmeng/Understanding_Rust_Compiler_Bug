{"sha": "a8d37af2473da79be704c9ce2374f278c47177b6", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE4ZDM3YWYyNDczZGE3OWJlNzA0YzljZTIzNzRmMjc4YzQ3MTc3YjY=", "commit": {"author": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2013-01-08T19:12:16Z"}, "committer": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2013-01-09T03:27:57Z"}, "message": "librustc: Make unqualified identifier searches terminate at the nearest module scope. r=tjc", "tree": {"sha": "4d2ed9670352600b81c1132e1b2fc8dcd16c8abb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4d2ed9670352600b81c1132e1b2fc8dcd16c8abb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a8d37af2473da79be704c9ce2374f278c47177b6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a8d37af2473da79be704c9ce2374f278c47177b6", "html_url": "https://github.com/rust-lang/rust/commit/a8d37af2473da79be704c9ce2374f278c47177b6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a8d37af2473da79be704c9ce2374f278c47177b6/comments", "author": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fd872284bb827f22cd4b38e3e0002efd4c99884f", "url": "https://api.github.com/repos/rust-lang/rust/commits/fd872284bb827f22cd4b38e3e0002efd4c99884f", "html_url": "https://github.com/rust-lang/rust/commit/fd872284bb827f22cd4b38e3e0002efd4c99884f"}], "stats": {"total": 1795, "additions": 1342, "deletions": 453}, "files": [{"sha": "ea53160109b8a604b86b515f9257c0c74c8d00d1", "filename": "doc/tutorial.md", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/doc%2Ftutorial.md", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/doc%2Ftutorial.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/doc%2Ftutorial.md?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -2284,6 +2284,10 @@ struct level. Note that fields and methods are _public_ by default.\n ~~~\n mod farm {\n # use farm;\n+# pub type Chicken = int;\n+# type Cow = int;\n+# enum Human = int;\n+# impl Human { fn rest(&self) { } }\n # pub fn make_me_a_farm() -> farm::Farm { farm::Farm { chickens: ~[], cows: ~[], farmer: Human(0) } }\n     pub struct Farm {\n         priv mut chickens: ~[Chicken],\n@@ -2310,12 +2314,8 @@ fn main() {\n      farm::feed_animals(&f);\n      f.farmer.rest();\n }\n-# type Chicken = int;\n-# type Cow = int;\n-# enum Human = int;\n # fn make_me_a_farm() -> farm::Farm { farm::make_me_a_farm() }\n-# fn make_me_a_chicken() -> Chicken { 0 }\n-# impl Human { fn rest(&self) { } }\n+# fn make_me_a_chicken() -> farm::Chicken { 0 }\n ~~~\n \n ## Crates"}, {"sha": "5b93c55ddc65ebb64c0ffeacfe9bb28110c2fba0", "filename": "src/compiletest/common.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Fcompiletest%2Fcommon.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Fcompiletest%2Fcommon.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcompiletest%2Fcommon.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n+\n use cmp;\n \n enum mode { mode_compile_fail, mode_run_fail, mode_run_pass, mode_pretty, }"}, {"sha": "54723253141f8da1a3648b675c8a6eab3fa9cce7", "filename": "src/compiletest/errors.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Fcompiletest%2Ferrors.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Fcompiletest%2Ferrors.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcompiletest%2Ferrors.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n+\n use common::config;\n use io;\n use io::ReaderUtil;"}, {"sha": "9fe5d9acb9b68c0f1c63ea0cc8ec02cc2867be3d", "filename": "src/compiletest/header.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Fcompiletest%2Fheader.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Fcompiletest%2Fheader.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcompiletest%2Fheader.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n+\n use common;\n use common::config;\n use io;"}, {"sha": "b3884917389742e57f2d2edb5483c844d911978c", "filename": "src/compiletest/procsrv.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Fcompiletest%2Fprocsrv.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Fcompiletest%2Fprocsrv.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcompiletest%2Fprocsrv.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n+\n use io;\n use io::{ReaderUtil, WriterUtil};\n use libc;"}, {"sha": "d7810ced2b6c8e6294fac8724bbed44f914a5194", "filename": "src/compiletest/runtest.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Fcompiletest%2Fruntest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Fcompiletest%2Fruntest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcompiletest%2Fruntest.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n+\n use io;\n use io::WriterUtil;\n use os;"}, {"sha": "13614c58855630b0e2d22928575659b4336d1210", "filename": "src/compiletest/util.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Fcompiletest%2Futil.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Fcompiletest%2Futil.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcompiletest%2Futil.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n+\n use io;\n use os;\n use os::getenv;"}, {"sha": "829a82baf7fab234f490a6851f996d3e7f2daa62", "filename": "src/libcargo/pgp.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcargo%2Fpgp.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcargo%2Fpgp.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcargo%2Fpgp.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -9,6 +9,7 @@\n // except according to those terms.\n \n use core::os;\n+use core::path::Path;\n use core::run;\n \n fn gpgv(args: ~[~str]) -> { status: int, out: ~str, err: ~str } {"}, {"sha": "d78d241d2b1fda153747408b03fe0334f3cf9a28", "filename": "src/libcore/at_vec.rs", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fat_vec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fat_vec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fat_vec.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -15,8 +15,10 @@\n #[forbid(deprecated_pattern)];\n \n use cast::transmute;\n+use kinds::Copy;\n use iter;\n use libc;\n+use option::Option;\n use ptr::addr_of;\n use sys;\n use uint;\n@@ -150,6 +152,10 @@ pub pure fn from_elem<T: Copy>(n_elts: uint, t: T) -> @[T] {\n \n #[cfg(notest)]\n pub mod traits {\n+    use at_vec::append;\n+    use kinds::Copy;\n+    use ops::Add;\n+\n     pub impl<T: Copy> @[T] : Add<&[const T],@[T]> {\n         #[inline(always)]\n         pure fn add(&self, rhs: & &self/[const T]) -> @[T] {\n@@ -162,8 +168,10 @@ pub mod traits {\n pub mod traits {}\n \n pub mod raw {\n-    use at_vec::{rusti, rustrt};\n+    use at_vec::{capacity, rusti, rustrt};\n+    use cast::transmute;\n     use libc;\n+    use ptr::addr_of;\n     use ptr;\n     use sys;\n     use uint;"}, {"sha": "3e7b88b7b78f7b1d4c5edecbfb975fefb1c53c78", "filename": "src/libcore/bool.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fbool.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fbool.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fbool.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -19,6 +19,7 @@\n use bool;\n use cmp;\n use cmp::Eq;\n+use option::{None, Option, Some};\n \n /// Negation / inverse\n pub pure fn not(v: bool) -> bool { !v }"}, {"sha": "950a753d73f0fb9a6dcf7802da53bb920027749c", "filename": "src/libcore/cast.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fcast.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fcast.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fcast.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -108,6 +108,8 @@ pub unsafe fn copy_lifetime_vec<S,T>(_ptr: &a/[S], ptr: &T) -> &a/T {\n \n #[cfg(test)]\n pub mod tests {\n+    use cast::{bump_box_refcount, reinterpret_cast, transmute};\n+\n     #[test]\n     pub fn test_reinterpret_cast() {\n         assert 1u == unsafe { reinterpret_cast(&1) };"}, {"sha": "8403c6216082a11ecc7dac09004a9b00fb8ed969", "filename": "src/libcore/char.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fchar.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fchar.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fchar.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -16,6 +16,7 @@\n \n use char;\n use cmp::Eq;\n+use option::{None, Option, Some};\n use str;\n use u32;\n use uint;"}, {"sha": "a40121445fa407a1afc2243b9cb9a409147ab169", "filename": "src/libcore/condition.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fcondition.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fcondition.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fcondition.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use prelude::*;\n use task;\n use task::local_data::{local_data_pop, local_data_set};\n "}, {"sha": "b422d76e02d2cfcacdde04a0fb2531531cdf2967", "filename": "src/libcore/core.rc", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fcore.rc", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fcore.rc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fcore.rc?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -53,6 +53,9 @@ Implicitly, all crates behave as if they included the following prologue:\n #[warn(vecs_implicitly_copyable)];\n #[deny(non_camel_case_types)];\n \n+/* The Prelude. */\n+\n+pub mod prelude;\n \n /* Primitive types */\n \n@@ -243,6 +246,8 @@ pub mod core {\n \n     pub use cmp;\n     pub use condition;\n+    pub use option;\n+    pub use kinds;\n }\n \n "}, {"sha": "1aa6c5a01972f42247d105b9c5bae9e43f541982", "filename": "src/libcore/dlist.rs", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fdlist.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fdlist.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fdlist.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -22,7 +22,9 @@ Do not use ==, !=, <, etc on doubly-linked lists -- it may not terminate.\n #[forbid(deprecated_mode)];\n #[forbid(deprecated_pattern)];\n \n+use kinds::Copy;\n use managed;\n+use option::{None, Option, Some};\n use option;\n use vec;\n \n@@ -94,13 +96,13 @@ impl<T> DListNode<T> {\n }\n \n /// Creates a new dlist node with the given data.\n-pure fn new_dlist_node<T>(data: T) -> DListNode<T> {\n+pub pure fn new_dlist_node<T>(data: T) -> DListNode<T> {\n     DListNode(@{data: move data, mut linked: false,\n                  mut prev: None, mut next: None})\n }\n \n /// Creates a new, empty dlist.\n-pure fn DList<T>() -> DList<T> {\n+pub pure fn DList<T>() -> DList<T> {\n     DList_(@{mut size: 0, mut hd: None, mut tl: None})\n }\n \n@@ -120,7 +122,7 @@ pub fn from_vec<T: Copy>(vec: &[T]) -> DList<T> {\n \n /// Produce a list from a list of lists, leaving no elements behind in the\n /// input. O(number of sub-lists).\n-fn concat<T>(lists: DList<DList<T>>) -> DList<T> {\n+pub fn concat<T>(lists: DList<DList<T>>) -> DList<T> {\n     let result = DList();\n     while !lists.is_empty() {\n         result.append(lists.pop().get());\n@@ -474,7 +476,9 @@ impl<T: Copy> DList<T> {\n mod tests {\n     #[legacy_exports];\n \n+    use dlist::{DList, concat, from_vec, new_dlist_node};\n     use iter;\n+    use option::{None, Some};\n     use vec;\n \n     #[test]"}, {"sha": "92ac1faf30696e7fd4922d4e9f1ff67a8eb17879", "filename": "src/libcore/dvec.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fdvec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fdvec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fdvec.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -25,6 +25,7 @@ Note that recursive use is not permitted.\n \n use cast;\n use cast::reinterpret_cast;\n+use prelude::*;\n use ptr::null;\n use vec;\n "}, {"sha": "4902edcedb1025531944d2b203a84aa36ac7fa08", "filename": "src/libcore/either.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Feither.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Feither.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Feither.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -14,10 +14,11 @@\n \n //! A type that represents one of two alternatives\n \n-use cmp;\n use cmp::Eq;\n-use result;\n+use cmp;\n+use kinds::Copy;\n use result::Result;\n+use result;\n use vec;\n \n /// The either type"}, {"sha": "474e4ae77bb47ff490e3ed5e168da4c09c0e2b99", "filename": "src/libcore/extfmt.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fextfmt.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fextfmt.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fextfmt.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -82,6 +82,7 @@ debug!(\"hello, %s!\", \"world\");\n \n use cmp::Eq;\n use option::{Some, None};\n+use prelude::*;\n use str;\n \n /*\n@@ -99,6 +100,7 @@ use str;\n #[doc(hidden)]\n pub mod ct {\n     use char;\n+    use prelude::*;\n     use str;\n     use vec;\n "}, {"sha": "3e521764723449b55f3b18983d13c7cb83a057b4", "filename": "src/libcore/float.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Ffloat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Ffloat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Ffloat.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -31,6 +31,7 @@ use cmp;\n use f64;\n use num;\n use num::Num::from_int;\n+use option::{None, Option, Some};\n use str;\n use uint;\n "}, {"sha": "bab0c710c3a79e1ec8f4d95e77c358b7e8391363", "filename": "src/libcore/gc.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fgc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fgc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fgc.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -42,6 +42,7 @@ with destructors.\n use cast;\n use io;\n use libc::{size_t, uintptr_t};\n+use option::{None, Option, Some};\n use ptr;\n use send_map::linear::LinearMap;\n use stackwalk;"}, {"sha": "4946a0997c1ed3612708464bcb11021268277264", "filename": "src/libcore/int-template.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fint-template.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fint-template.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fint-template.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -21,6 +21,7 @@ use from_str::FromStr;\n use iter;\n use num;\n use num::Num::from_int;\n+use prelude::*;\n use str;\n use uint;\n use vec;"}, {"sha": "224da0dc062d35dde0376e60184cd5d95cf00fcb", "filename": "src/libcore/int-template/int.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fint-template%2Fint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fint-template%2Fint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fint-template%2Fint.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -50,8 +50,8 @@ mod inst {\n \n     #[test]\n     fn test_overflows() {\n-        assert (max_value > 0);\n-        assert (min_value <= 0);\n-        assert (min_value + max_value + 1 == 0);\n+        assert (::int::max_value > 0);\n+        assert (::int::min_value <= 0);\n+        assert (::int::min_value + ::int::max_value + 1 == 0);\n     }\n }"}, {"sha": "e0065f9c1e843efd3a011a0b91a4013e21f9d726", "filename": "src/libcore/io.rs", "status": "modified", "additions": 12, "deletions": 5, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fio.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fio.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fio.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -28,14 +28,15 @@ use libc::consts::os::posix88::*;\n use libc::consts::os::extra::*;\n use option;\n use os;\n+use prelude::*;\n use ptr;\n use result;\n use str;\n use uint;\n use vec;\n \n #[allow(non_camel_case_types)] // not sure what to do about this\n-type fd_t = c_int;\n+pub type fd_t = c_int;\n \n #[abi = \"cdecl\"]\n extern mod rustrt {\n@@ -452,12 +453,12 @@ impl<T: Reader, C> {base: T, cleanup: C}: Reader {\n     fn tell(&self) -> uint { self.base.tell() }\n }\n \n-struct FILERes {\n+pub struct FILERes {\n     f: *libc::FILE,\n     drop { libc::fclose(self.f); }\n }\n \n-fn FILERes(f: *libc::FILE) -> FILERes {\n+pub fn FILERes(f: *libc::FILE) -> FILERes {\n     FILERes {\n         f: f\n     }\n@@ -629,12 +630,12 @@ impl fd_t: Writer {\n     }\n }\n \n-struct FdRes {\n+pub struct FdRes {\n     fd: fd_t,\n     drop { libc::close(self.fd); }\n }\n \n-fn FdRes(fd: fd_t) -> FdRes {\n+pub fn FdRes(fd: fd_t) -> FdRes {\n     FdRes {\n         fd: fd\n     }\n@@ -1028,7 +1029,10 @@ pub fn read_whole_file(file: &Path) -> Result<~[u8], ~str> {\n // fsync related\n \n pub mod fsync {\n+    use io::{FILERes, FdRes, fd_t};\n+    use kinds::Copy;\n     use libc;\n+    use option::Option;\n     use option;\n     use os;\n \n@@ -1113,8 +1117,11 @@ pub mod fsync {\n \n #[cfg(test)]\n mod tests {\n+    use debug;\n     use i32;\n+    use io::{BytesWriter, SeekCur, SeekEnd, SeekSet};\n     use io;\n+    use path::Path;\n     use result;\n     use str;\n     use u64;"}, {"sha": "a139daddcef11ca56f73308f3d536adf38d5958a", "filename": "src/libcore/iter-trait.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fiter-trait.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fiter-trait.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fiter-trait.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -16,7 +16,10 @@\n #[forbid(deprecated_pattern)];\n \n use cmp::{Eq, Ord};\n+use iter::BaseIter;\n use iter;\n+use kinds::Copy;\n+use option::Option;\n \n use self::inst::{IMPL_T, EACH, SIZE_HINT};\n "}, {"sha": "eb395c57ae8cb6f95541f4ac12f0bb7e2102e712", "filename": "src/libcore/iter-trait/dlist.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fiter-trait%2Fdlist.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fiter-trait%2Fdlist.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fiter-trait%2Fdlist.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -11,6 +11,7 @@\n mod inst {\n     use dlist;\n     use managed;\n+    use option::{Option, Some};\n     use option;\n \n     #[allow(non_camel_case_types)]"}, {"sha": "28d1cf03d46c7a13621b704d49a09f97f4bc5bc1", "filename": "src/libcore/iter-trait/dvec.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fiter-trait%2Fdvec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fiter-trait%2Fdvec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fiter-trait%2Fdvec.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -10,6 +10,7 @@\n \n mod inst {\n     use dvec;\n+    use option::{Option, Some};\n \n     #[allow(non_camel_case_types)]\n     pub type IMPL_T<A> = dvec::DVec<A>;"}, {"sha": "2240db82f2953c08c96083514442e6f012fd1e6e", "filename": "src/libcore/iter-trait/option.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fiter-trait%2Foption.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fiter-trait%2Foption.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fiter-trait%2Foption.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -9,6 +9,8 @@\n // except according to those terms.\n \n mod inst {\n+    use option::{None, Option, Some};\n+\n     #[allow(non_camel_case_types)]\n     pub type IMPL_T<A> = Option<A>;\n \n@@ -25,4 +27,4 @@ mod inst {\n             Some(_) => Some(1)\n         }\n     }\n-}\n\\ No newline at end of file\n+}"}, {"sha": "1e56b0f14afb7d250618fe9dfbdbd1f3571df38f", "filename": "src/libcore/iter.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fiter.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fiter.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fiter.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -18,6 +18,8 @@ The iteration traits and common implementation\n #[forbid(deprecated_pattern)];\n \n use cmp::{Eq, Ord};\n+use kinds::Copy;\n+use option::{None, Option, Some};\n use vec;\n \n /// A function used to initialize the elements of a sequence"}, {"sha": "8e468bab15dd24bdec602d8d5240a53d39c6a743", "filename": "src/libcore/libc.rs", "status": "modified", "additions": 87, "deletions": 28, "changes": 115, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Flibc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Flibc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Flibc.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -164,7 +164,7 @@ pub use libc::funcs::posix88::unistd::{getpid, isatty, lseek, pipe, read};\n pub use libc::funcs::posix88::unistd::{rmdir, unlink, write};\n \n \n-mod types {\n+pub mod types {\n \n     // Types tend to vary *per architecture* so we pull their definitions out\n     // into this module.\n@@ -230,6 +230,8 @@ mod types {\n                 pub type uintptr_t = uint;\n             }\n             pub mod posix88 {\n+                use prelude::*;\n+\n                 pub type off_t = i32;\n                 pub type dev_t = u64;\n                 pub type ino_t = u32;\n@@ -528,33 +530,6 @@ mod types {\n     pub mod os {\n         pub mod common {\n             pub mod posix01 {\n-                pub type nlink_t = u16;\n-                pub type blksize_t = i64;\n-                pub type blkcnt_t = i32;\n-                pub struct stat {\n-                    st_dev: dev_t,\n-                    st_mode: mode_t,\n-                    st_nlink: nlink_t,\n-                    st_ino: ino_t,\n-                    st_uid: uid_t,\n-                    st_gid: gid_t,\n-                    st_rdev: dev_t,\n-                    st_atime: time_t,\n-                    st_atime_nsec: c_long,\n-                    st_mtime: time_t,\n-                    st_mtime_nsec: c_long,\n-                    st_ctime: time_t,\n-                    st_ctime_nsec: c_long,\n-                    st_birthtime: time_t,\n-                    st_birthtime_nsec: c_long,\n-                    st_size: off_t,\n-                    st_blocks: blkcnt_t,\n-                    st_blksize: blksize_t,\n-                    st_flags: uint32_t,\n-                    st_gen: uint32_t,\n-                    st_lspare: int32_t,\n-                    st_qspare: [int64_t * 2],\n-                }\n             }\n         }\n \n@@ -596,6 +571,34 @@ mod types {\n                 pub type ssize_t = i32;\n             }\n             pub mod posix01 {\n+                pub type nlink_t = u16;\n+                pub type blksize_t = i64;\n+                pub type blkcnt_t = i32;\n+\n+                pub struct stat {\n+                    st_dev: dev_t,\n+                    st_mode: mode_t,\n+                    st_nlink: nlink_t,\n+                    st_ino: ino_t,\n+                    st_uid: uid_t,\n+                    st_gid: gid_t,\n+                    st_rdev: dev_t,\n+                    st_atime: time_t,\n+                    st_atime_nsec: c_long,\n+                    st_mtime: time_t,\n+                    st_mtime_nsec: c_long,\n+                    st_ctime: time_t,\n+                    st_ctime_nsec: c_long,\n+                    st_birthtime: time_t,\n+                    st_birthtime_nsec: c_long,\n+                    st_size: off_t,\n+                    st_blocks: blkcnt_t,\n+                    st_blksize: blksize_t,\n+                    st_flags: uint32_t,\n+                    st_gen: uint32_t,\n+                    st_lspare: int32_t,\n+                    st_qspare: [int64_t * 2],\n+                }\n             }\n             pub mod posix08 {\n             }\n@@ -643,6 +646,40 @@ mod types {\n                 pub type ssize_t = i64;\n             }\n             pub mod posix01 {\n+                use libc::types::common::c99::{int32_t, int64_t};\n+                use libc::types::common::c99::{uint32_t};\n+                use libc::types::os::arch::c95::{c_long, time_t};\n+                use libc::types::os::arch::posix88::{dev_t, gid_t, ino_t};\n+                use libc::types::os::arch::posix88::{mode_t, off_t, uid_t};\n+\n+                pub type nlink_t = u16;\n+                pub type blksize_t = i64;\n+                pub type blkcnt_t = i32;\n+\n+                pub struct stat {\n+                    st_dev: dev_t,\n+                    st_mode: mode_t,\n+                    st_nlink: nlink_t,\n+                    st_ino: ino_t,\n+                    st_uid: uid_t,\n+                    st_gid: gid_t,\n+                    st_rdev: dev_t,\n+                    st_atime: time_t,\n+                    st_atime_nsec: c_long,\n+                    st_mtime: time_t,\n+                    st_mtime_nsec: c_long,\n+                    st_ctime: time_t,\n+                    st_ctime_nsec: c_long,\n+                    st_birthtime: time_t,\n+                    st_birthtime_nsec: c_long,\n+                    st_size: off_t,\n+                    st_blocks: blkcnt_t,\n+                    st_blksize: blksize_t,\n+                    st_flags: uint32_t,\n+                    st_gen: uint32_t,\n+                    st_lspare: int32_t,\n+                    st_qspare: [int64_t * 2],\n+                }\n             }\n             pub mod posix08 {\n             }\n@@ -934,6 +971,11 @@ pub mod funcs {\n     // or anything. The same is not true of POSIX.\n \n     pub mod c95 {\n+        use libc::types::common::c95::{FILE, c_void, fpos_t};\n+        use libc::types::common::posix88::dirent_t;\n+        use libc::types::os::arch::c95::{c_char, c_double, c_int, c_long};\n+        use libc::types::os::arch::c95::{c_uint, c_ulong, c_void, size_t};\n+\n         #[nolink]\n         #[abi = \"cdecl\"]\n         pub extern mod ctype {\n@@ -1174,6 +1216,14 @@ pub mod funcs {\n     #[cfg(target_os = \"macos\")]\n     #[cfg(target_os = \"freebsd\")]\n     pub mod posix88 {\n+        use libc::types::common::c95::{FILE, c_void};\n+        use libc::types::common::posix88::{DIR, dirent_t};\n+        use libc::types::os::arch::c95::{c_char, c_int, c_long, c_uint};\n+        use libc::types::os::arch::c95::{size_t};\n+        use libc::types::os::arch::posix01::stat;\n+        use libc::types::os::arch::posix88::{gid_t, mode_t, off_t, pid_t};\n+        use libc::types::os::arch::posix88::{ssize_t, uid_t};\n+\n         #[nolink]\n         #[abi = \"cdecl\"]\n         pub extern mod stat_ {\n@@ -1282,6 +1332,10 @@ pub mod funcs {\n     #[cfg(target_os = \"macos\")]\n     #[cfg(target_os = \"freebsd\")]\n     pub mod posix01 {\n+        use libc::types::os::arch::c95::{c_char, c_int, size_t};\n+        use libc::types::os::arch::posix01::stat;\n+        use libc::types::os::arch::posix88::{pid_t, ssize_t};\n+\n         #[nolink]\n         #[abi = \"cdecl\"]\n         pub extern mod stat_ {\n@@ -1349,6 +1403,9 @@ pub mod funcs {\n     #[nolink]\n     #[abi = \"cdecl\"]\n     pub extern mod bsd44 {\n+        use libc::types::common::c95::{c_void};\n+        use libc::types::os::arch::c95::{c_char, c_int, c_uint, size_t};\n+\n         fn sysctl(name: *c_int, namelen: c_uint,\n                   oldp: *mut c_void, oldlenp: *mut size_t,\n                   newp: *c_void, newlen: size_t) -> c_int;\n@@ -1371,6 +1428,8 @@ pub mod funcs {\n     #[nolink]\n     #[abi = \"cdecl\"]\n     pub extern mod extra {\n+        use libc::types::os::arch::c95::{c_char, c_int};\n+\n         fn _NSGetExecutablePath(buf: *mut c_char,\n                                 bufsize: *mut u32) -> c_int;\n     }"}, {"sha": "b334d24674308b453998276ec1682556246245c5", "filename": "src/libcore/managed.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fmanaged.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fmanaged.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fmanaged.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -15,10 +15,12 @@\n #[forbid(deprecated_pattern)];\n \n use cmp::{Eq, Ord};\n-use intrinsic::TyDesc;\n+use prelude::*;\n use ptr;\n \n pub mod raw {\n+    use intrinsic::TyDesc;\n+\n     pub struct BoxHeaderRepr {\n         ref_count: uint,\n         type_desc: *TyDesc,"}, {"sha": "4425858bcff0c0f7963cf3bdf765d5d264d15e92", "filename": "src/libcore/oldcomm.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Foldcomm.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Foldcomm.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Foldcomm.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -52,11 +52,13 @@ use either::Either;\n use iter;\n use libc;\n use libc::size_t;\n+use prelude::*;\n use ptr;\n use result;\n use sys;\n use task;\n use vec;\n+\n // After snapshot, change p2::addr_of => addr_of\n \n /**"}, {"sha": "49ba10dfffbe749b8a45ef53d53fc3e9fad82338", "filename": "src/libcore/option.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Foption.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Foption.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Foption.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -45,6 +45,7 @@ let unwrapped_msg = match move msg {\n #[forbid(deprecated_pattern)];\n \n use cmp::Eq;\n+use kinds::Copy;\n use option;\n use ptr;\n use str;"}, {"sha": "587d684c60c3a6201dbe9029a012778439d8980a", "filename": "src/libcore/os.rs", "status": "modified", "additions": 14, "deletions": 5, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fos.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fos.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fos.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -38,6 +38,7 @@ use libc::{c_char, c_void, c_int, c_uint, size_t, ssize_t};\n use libc::{mode_t, pid_t, FILE};\n use option;\n use option::{Some, None};\n+use prelude::*;\n use private;\n use ptr;\n use str;\n@@ -144,6 +145,7 @@ mod global_env {\n     use either;\n     use libc;\n     use oldcomm;\n+    use option::Option;\n     use private;\n     use str;\n     use task;\n@@ -217,6 +219,7 @@ mod global_env {\n     mod impl_ {\n         use cast;\n         use libc;\n+        use option::Option;\n         use option;\n         use ptr;\n         use str;\n@@ -780,7 +783,7 @@ unsafe fn load_argc_and_argv(argc: c_int, argv: **c_char) -> ~[~str] {\n  * Returns a list of the command line arguments.\n  */\n #[cfg(target_os = \"macos\")]\n-fn real_args() -> ~[~str] {\n+pub fn real_args() -> ~[~str] {\n     unsafe {\n         let (argc, argv) = (*_NSGetArgc() as c_int,\n                             *_NSGetArgv() as **c_char);\n@@ -790,7 +793,7 @@ fn real_args() -> ~[~str] {\n \n #[cfg(target_os = \"linux\")]\n #[cfg(target_os = \"freebsd\")]\n-fn real_args() -> ~[~str] {\n+pub fn real_args() -> ~[~str] {\n     unsafe {\n         let argc = rustrt::rust_get_argc();\n         let argv = rustrt::rust_get_argv();\n@@ -799,7 +802,7 @@ fn real_args() -> ~[~str] {\n }\n \n #[cfg(windows)]\n-fn real_args() -> ~[~str] {\n+pub fn real_args() -> ~[~str] {\n     let mut nArgs: c_int = 0;\n     let lpArgCount = ptr::to_mut_unsafe_ptr(&mut nArgs);\n     let lpCmdLine = GetCommandLineW();\n@@ -873,7 +876,7 @@ extern {\n     pub fn _NSGetArgv() -> ***c_char;\n }\n \n-mod consts {\n+pub mod consts {\n \n     #[cfg(unix)]\n     use os::consts::unix::*;\n@@ -954,17 +957,23 @@ mod consts {\n #[cfg(test)]\n #[allow(non_implicitly_copyable_typarams)]\n mod tests {\n+    use debug;\n+    use libc::{c_int, c_void, size_t};\n     use libc;\n+    use option::{None, Option, Some};\n     use option;\n+    use os::{as_c_charp, env, getcwd, getenv, make_absolute, real_args};\n+    use os::{remove_file, setenv};\n     use os;\n+    use path::Path;\n     use rand;\n     use run;\n     use str;\n     use vec;\n \n     #[test]\n     pub fn last_os_error() {\n-        log(debug, last_os_error());\n+        log(debug, os::last_os_error());\n     }\n \n     #[test]"}, {"sha": "d1d7d00bab8a3a50ce05235cfe0cf32a3c58817a", "filename": "src/libcore/path.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fpath.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fpath.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fpath.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -20,8 +20,10 @@ Cross-platform file path handling\n \n use cmp::Eq;\n use libc;\n+use option::{None, Option, Some};\n use ptr;\n use str;\n+use to_str::ToStr;\n \n #[deriving_eq]\n pub struct WindowsPath {\n@@ -751,6 +753,8 @@ pub pure fn normalize(components: &[~str]) -> ~[~str] {\n // Various windows helpers, and tests for the impl.\n pub mod windows {\n     use libc;\n+    use option::{None, Option, Some};\n+    use to_str::ToStr;\n \n     #[inline(always)]\n     pub pure fn is_sep(u: u8) -> bool {\n@@ -793,7 +797,8 @@ pub mod windows {\n \n #[cfg(test)]\n mod tests {\n-    use path::windows;\n+    use option::{None, Some};\n+    use path::{PosixPath, WindowsPath, windows};\n     use str;\n \n     #[test]"}, {"sha": "260bc7e247617381ace5b1211b5aae4b0b4cb6db", "filename": "src/libcore/pipes.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fpipes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fpipes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fpipes.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -90,11 +90,13 @@ bounded and unbounded protocols allows for less code duplication.\n use cmp::Eq;\n use cast::{forget, reinterpret_cast, transmute};\n use either::{Either, Left, Right};\n+use kinds::Owned;\n use libc;\n use option;\n use option::unwrap;\n use pipes;\n use ptr;\n+use prelude::*;\n use private;\n use task;\n use vec;\n@@ -1238,6 +1240,8 @@ pub fn try_send_one<T: Owned>(chan: ChanOne<T>, data: T)\n }\n \n pub mod rt {\n+    use option::{None, Option, Some};\n+\n     // These are used to hide the option constructors from the\n     // compiler because their names are changing\n     pub fn make_some<T>(val: T) -> Option<T> { Some(move val) }\n@@ -1246,7 +1250,8 @@ pub mod rt {\n \n #[cfg(test)]\n pub mod test {\n-    use pipes::oneshot;\n+    use either::{Either, Left, Right};\n+    use pipes::{Chan, Port, oneshot, recv_one, stream};\n     use pipes;\n \n     #[test]"}, {"sha": "3d5139a2d32a1231889db9eb8717471b19d165a8", "filename": "src/libcore/prelude.rs", "status": "added", "additions": 93, "deletions": 0, "changes": 93, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fprelude.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fprelude.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fprelude.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -0,0 +1,93 @@\n+// This file is imported into every module by default.\n+\n+/* Reexported core operators */\n+\n+pub use kinds::{Const, Copy, Owned, Durable};\n+pub use ops::{Drop};\n+pub use ops::{Add, Sub, Mul, Div, Modulo, Neg};\n+pub use ops::{BitAnd, BitOr, BitXor};\n+pub use ops::{Shl, Shr, Index};\n+pub use option::{Option, Some, None};\n+pub use result::{Result, Ok, Err};\n+\n+/* Reexported types and traits */\n+\n+pub use path::Path;\n+pub use path::GenericPath;\n+pub use path::WindowsPath;\n+pub use path::PosixPath;\n+\n+pub use tuple::{CopyableTuple, ImmutableTuple, ExtendedTupleOps};\n+pub use str::{StrSlice, Trimmable};\n+pub use vec::{ConstVector, CopyableVector, ImmutableVector};\n+pub use vec::{ImmutableEqVector, ImmutableCopyableVector};\n+pub use vec::{MutableVector, MutableCopyableVector};\n+pub use iter::{BaseIter, ExtendedIter, EqIter, CopyableIter};\n+pub use iter::{CopyableOrderedIter, CopyableNonstrictIter, Times};\n+\n+pub use num::Num;\n+pub use ptr::Ptr;\n+pub use to_str::ToStr;\n+pub use clone::Clone;\n+\n+pub use cmp::{Eq, Ord};\n+pub use hash::Hash;\n+pub use to_bytes::IterBytes;\n+\n+/* Reexported modules */\n+\n+pub use at_vec;\n+pub use bool;\n+pub use cast;\n+pub use char;\n+pub use cmp;\n+pub use dvec;\n+pub use either;\n+pub use extfmt;\n+pub use f32;\n+pub use f64;\n+pub use float;\n+pub use i16;\n+pub use i32;\n+pub use i64;\n+pub use i8;\n+pub use int;\n+pub use io;\n+pub use iter;\n+pub use libc;\n+pub use num;\n+pub use oldcomm;\n+pub use ops;\n+pub use option;\n+pub use os;\n+pub use path;\n+pub use pipes;\n+pub use private;\n+pub use ptr;\n+pub use rand;\n+pub use result;\n+pub use str;\n+pub use sys;\n+pub use task;\n+pub use to_str;\n+pub use u16;\n+pub use u32;\n+pub use u64;\n+pub use u8;\n+pub use uint;\n+pub use vec;\n+\n+/*\n+ * Export the log levels as global constants. Higher levels mean\n+ * more-verbosity. Error is the bottom level, default logging level is\n+ * warn-and-below.\n+ */\n+\n+/// The error log level\n+pub const error : u32 = 1_u32;\n+/// The warning log level\n+pub const warn : u32 = 2_u32;\n+/// The info log level\n+pub const info : u32 = 3_u32;\n+/// The debug log level\n+pub const debug : u32 = 4_u32;"}, {"sha": "273e933f530cf657256493cc09330bdfee9fcb36", "filename": "src/libcore/private.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fprivate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fprivate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fprivate.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -21,6 +21,7 @@ use libc;\n use oldcomm;\n use option;\n use pipes;\n+use prelude::*;\n use ptr;\n use result;\n use task;\n@@ -580,8 +581,11 @@ pub fn unwrap_exclusive<T: Owned>(arc: Exclusive<T>) -> T {\n \n #[cfg(test)]\n pub mod tests {\n+    use core::option::{None, Some};\n+\n     use option;\n     use pipes;\n+    use private::{exclusive, unwrap_exclusive};\n     use result;\n     use task;\n     use uint;"}, {"sha": "cf114f0b5bc1afc79f029c3fb860cce6baf3223b", "filename": "src/libcore/rand.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Frand.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Frand.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Frand.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -15,6 +15,7 @@\n #[forbid(deprecated_pattern)];\n \n use int;\n+use prelude::*;\n use str;\n use task;\n use u32;\n@@ -362,7 +363,8 @@ pub fn random() -> uint {\n \n #[cfg(test)]\n pub mod tests {\n-    use option::Option;\n+    use debug;\n+    use option::{None, Option, Some};\n     use rand;\n \n     #[test]"}, {"sha": "91f51908be8b63e6f9ed49cac0f46a4cec7b21d7", "filename": "src/libcore/result.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fresult.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fresult.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fresult.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -19,6 +19,8 @@ use cmp;\n use cmp::Eq;\n use either;\n use either::Either;\n+use kinds::Copy;\n+use option::{None, Option, Some};\n use vec;\n \n /// The result type\n@@ -382,6 +384,7 @@ pub pure fn unwrap_err<T, U>(res: Result<T, U>) -> U {\n mod tests {\n     #[legacy_exports];\n \n+    use result::{Err, Ok, Result, chain, get, get_err};\n     use result;\n \n     fn op1() -> result::Result<int, ~str> { result::Ok(666) }"}, {"sha": "60fe54109d0d9332594c7c343ea135e263b5deae", "filename": "src/libcore/run.rs", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Frun.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Frun.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Frun.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -20,6 +20,7 @@ use libc::{pid_t, c_void, c_int};\n use oldcomm;\n use option::{Some, None};\n use os;\n+use prelude::*;\n use ptr;\n use run;\n use str;\n@@ -349,7 +350,7 @@ pub fn program_output(prog: &str, args: &[~str]) ->\n     return {status: status, out: move outs, err: move errs};\n }\n \n-fn writeclose(fd: c_int, s: ~str) {\n+pub fn writeclose(fd: c_int, s: ~str) {\n     use io::WriterUtil;\n \n     error!(\"writeclose %d, %s\", fd as int, s);\n@@ -359,7 +360,7 @@ fn writeclose(fd: c_int, s: ~str) {\n     os::close(fd);\n }\n \n-fn readclose(fd: c_int) -> ~str {\n+pub fn readclose(fd: c_int) -> ~str {\n     let file = os::fdopen(fd);\n     let reader = io::FILE_reader(file, false);\n     let buf = io::with_bytes_writer(|writer| {\n@@ -417,8 +418,11 @@ pub fn waitpid(pid: pid_t) -> int {\n \n #[cfg(test)]\n mod tests {\n+    use debug;\n     use io::WriterUtil;\n+    use option::{None, Some};\n     use os;\n+    use run::{readclose, writeclose};\n     use run;\n \n     // Regression test for memory leaks"}, {"sha": "4cd3502bd6212fc77f82e38abd7b55a5df28804c", "filename": "src/libcore/send_map.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fsend_map.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fsend_map.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fsend_map.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -20,6 +20,7 @@ Sendable hash maps.  Very much a work in progress.\n \n use cmp::Eq;\n use hash::Hash;\n+use prelude::*;\n use to_bytes::IterBytes;\n \n pub trait SendMap<K:Eq Hash, V: Copy> {\n@@ -45,9 +46,14 @@ pub trait SendMap<K:Eq Hash, V: Copy> {\n \n /// Open addressing with linear probing.\n pub mod linear {\n+    use cmp::Eq;\n     use cmp;\n+    use hash::Hash;\n+    use kinds::Copy;\n+    use option::{None, Option, Some};\n     use option;\n     use rand;\n+    use to_bytes::IterBytes;\n     use uint;\n     use vec;\n \n@@ -458,6 +464,7 @@ pub mod linear {\n \n #[test]\n pub mod test {\n+    use option::{None, Some};\n     use send_map::linear::LinearMap;\n     use send_map::linear;\n     use uint;"}, {"sha": "722d62626a6b48cb0294eaec7f0111c892c54796", "filename": "src/libcore/str.rs", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fstr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fstr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fstr.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -27,6 +27,7 @@ use cmp::{Eq, Ord};\n use libc;\n use libc::size_t;\n use io::WriterUtil;\n+use option::{None, Option, Some};\n use ptr;\n use str;\n use to_str::ToStr;\n@@ -1949,6 +1950,7 @@ pub mod raw {\n     use libc;\n     use ptr;\n     use str::raw;\n+    use str::{as_buf, is_utf8, len, reserve_at_least};\n     use vec;\n \n     /// Create a Rust string from a null-terminated *u8 buffer\n@@ -2129,6 +2131,9 @@ impl ~str: Trimmable {\n \n #[cfg(notest)]\n pub mod traits {\n+    use ops::Add;\n+    use str::append;\n+\n     impl ~str : Add<&str,~str> {\n         #[inline(always)]\n         pure fn add(&self, rhs: & &self/str) -> ~str {\n@@ -2308,10 +2313,11 @@ impl &str: StrSlice {\n #[cfg(test)]\n mod tests {\n     use char;\n+    use debug;\n     use libc::c_char;\n     use libc;\n     use ptr;\n-    use str::raw;\n+    use str::*;\n     use vec;\n \n     #[test]"}, {"sha": "4cefe2fea1c1545c2850094c06f8d07cacd360d6", "filename": "src/libcore/sys.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fsys.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fsys.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fsys.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -146,6 +146,7 @@ pub pure fn begin_unwind_(msg: *c_char, file: *c_char, line: size_t) -> ! {\n #[cfg(test)]\n pub mod tests {\n     use cast;\n+    use sys::{Closure, pref_align_of, size_of};\n \n     #[test]\n     pub fn size_of_basic() {"}, {"sha": "990d309a1594572c2d0daf715f01ab1ffb800897", "filename": "src/libcore/task/local_data.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Ftask%2Flocal_data.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Ftask%2Flocal_data.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Ftask%2Flocal_data.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -26,6 +26,7 @@ magic.\n \n */\n \n+use prelude::*;\n use rt;\n use task::local_data_priv::{local_get, local_pop, local_modify, local_set};\n use task;"}, {"sha": "c08f0f9c997154c512aa118b7a2c2235fe2e8be4", "filename": "src/libcore/task/local_data_priv.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Ftask%2Flocal_data_priv.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Ftask%2Flocal_data_priv.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Ftask%2Flocal_data_priv.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -11,9 +11,11 @@\n #[doc(hidden)]; // FIXME #3538\n \n use cast;\n+use cmp::Eq;\n use dvec;\n use libc;\n use option;\n+use prelude::*;\n use task::rt;\n use task::local_data::LocalDataKey;\n "}, {"sha": "62d30bdc45c7fa2ceefcce0997c353d5df563a9d", "filename": "src/libcore/task/mod.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Ftask%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Ftask%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Ftask%2Fmod.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -48,6 +48,7 @@ use option;\n use result::Result;\n use pipes::{stream, Chan, Port};\n use pipes;\n+use prelude::*;\n use ptr;\n use result;\n use task::local_data_priv::{local_get, local_set};"}, {"sha": "1ffd7fee6b16d9e9400ebcf7432d298828c6d3fc", "filename": "src/libcore/task/spawn.rs", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Ftask%2Fspawn.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Ftask%2Fspawn.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Ftask%2Fspawn.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -76,13 +76,19 @@\n use cast;\n use oldcomm;\n use option;\n+use pipes::{Chan, Port};\n use pipes;\n+use prelude::*;\n use private;\n use ptr;\n use send_map;\n-use task::rt;\n+use task::local_data_priv::{local_get, local_set};\n use task::rt::rust_task;\n use task::rt::rust_closure;\n+use task::rt;\n+use task::{Failure, ManualThreads, PlatformThread, SchedOpts, SingleThreaded};\n+use task::{Success, TaskOpts, TaskResult, ThreadPerCore, ThreadPerTask};\n+use task::{default_task_opts, unkillable};\n use uint;\n use util;\n "}, {"sha": "8f5ca4bc72a7f169082f4393dd51b597ad5a58b7", "filename": "src/libcore/to_bytes.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fto_bytes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fto_bytes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fto_bytes.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -20,6 +20,7 @@ The `ToBytes` and `IterBytes` traits\n \n use io;\n use io::Writer;\n+use option::{None, Option, Some};\n use str;\n \n pub type Cb = fn(buf: &[const u8]) -> bool;\n@@ -181,6 +182,8 @@ pub mod x32 {\n \n #[cfg(target_word_size = \"64\")]\n pub mod x64 {\n+    use to_bytes::{Cb, IterBytes};\n+\n     pub impl uint: IterBytes {\n         #[inline(always)]\n         pure fn iter_bytes(&self, lsb0: bool, f: Cb) {"}, {"sha": "fb4ea48ca95cc8ca8b70f2f0c016239a10be4296", "filename": "src/libcore/to_str.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fto_str.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fto_str.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fto_str.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -18,6 +18,7 @@ The `ToStr` trait for converting to strings\n #[forbid(deprecated_mode)];\n #[forbid(deprecated_pattern)];\n \n+use kinds::Copy;\n use str;\n use vec;\n "}, {"sha": "6ac7a1a04a3972c998340a5fc04997f593bbe81d", "filename": "src/libcore/tuple.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Ftuple.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Ftuple.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Ftuple.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -15,6 +15,7 @@\n //! Operations on tuples\n \n use cmp::{Eq, Ord};\n+use kinds::Copy;\n use vec;\n \n pub trait CopyableTuple<T, U> {"}, {"sha": "ad6f73e56c060767fcc28257204d27c4e0c80055", "filename": "src/libcore/uint-template.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fuint-template.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fuint-template.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fuint-template.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -19,6 +19,7 @@ use cmp::{Eq, Ord};\n use from_str::FromStr;\n use iter;\n use num;\n+use option::{None, Option, Some};\n use str;\n use uint;\n use vec;"}, {"sha": "423dbaedf267dce19728a7d08d095d9668a23930", "filename": "src/libcore/util.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Futil.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Futil.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Futil.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -19,6 +19,7 @@ Miscellaneous helpers for common patterns.\n #[forbid(deprecated_pattern)];\n \n use cmp::Eq;\n+use prelude::*;\n \n /// The identity function.\n #[inline(always)]\n@@ -104,6 +105,10 @@ pub fn unreachable() -> ! {\n \n mod tests {\n     #[legacy_exports];\n+\n+    use option::{None, Some};\n+    use util::{NonCopyable, id, replace, swap};\n+\n     #[test]\n     fn identity_crisis() {\n         // Writing a test for the identity function. How did it come to this?"}, {"sha": "541dcde218136d0cc4de0e3083bcf6ad97504c09", "filename": "src/libcore/vec.rs", "status": "modified", "additions": 16, "deletions": 4, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fvec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibcore%2Fvec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fvec.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -16,10 +16,12 @@\n \n use cast;\n use cmp::{Eq, Ord};\n+use iter::BaseIter;\n use iter;\n+use kinds::Copy;\n use libc;\n use libc::size_t;\n-use option::{Some, None};\n+use option::{None, Option, Some};\n use ptr;\n use ptr::addr_of;\n use sys;\n@@ -673,7 +675,7 @@ pub pure fn append_one<T>(lhs: ~[T], x: T) -> ~[T] {\n }\n \n #[inline(always)]\n-pure fn append_mut<T: Copy>(lhs: ~[mut T], rhs: &[const T]) -> ~[mut T] {\n+pub pure fn append_mut<T: Copy>(lhs: ~[mut T], rhs: &[const T]) -> ~[mut T] {\n     to_mut(append(from_mut(lhs), rhs))\n }\n \n@@ -1517,6 +1519,10 @@ impl<T: Ord> @[T] : Ord {\n \n #[cfg(notest)]\n pub mod traits {\n+    use kinds::Copy;\n+    use ops::Add;\n+    use vec::{append, append_mut};\n+\n     impl<T: Copy> ~[T] : Add<&[const T],~[T]> {\n         #[inline(always)]\n         pure fn add(&self, rhs: & &self/[const T]) -> ~[T] {\n@@ -1839,10 +1845,14 @@ pub struct UnboxedVecRepr {\n \n /// Unsafe operations\n pub mod raw {\n+    use kinds::Copy;\n     use managed;\n+    use option::{None, Some};\n     use option;\n+    use ptr::addr_of;\n     use ptr;\n     use sys;\n+    use vec::{UnboxedVecRepr, as_const_buf, as_mut_buf, len, with_capacity};\n     use vec::rusti;\n \n     /// The internal representation of a (boxed) vector\n@@ -1992,8 +2002,9 @@ pub mod raw {\n pub mod bytes {\n     use libc;\n     use uint;\n-    use vec;\n+    use vec::len;\n     use vec::raw;\n+    use vec;\n \n     /// Bytewise string comparison\n     pub pure fn cmp(a: &~[u8], b: &~[u8]) -> int {\n@@ -2280,8 +2291,9 @@ impl<A:Copy> @[A] : iter::CopyableNonstrictIter<A> {\n \n #[cfg(test)]\n mod tests {\n+    use option::{None, Option, Some};\n     use option;\n-    use vec::raw;\n+    use vec::*;\n \n     fn square(n: uint) -> uint { return n * n; }\n "}, {"sha": "85268ad8f02a493f9e6c1374dd492435c533f9cc", "filename": "src/librustc/back/link.rs", "status": "modified", "additions": 17, "deletions": 5, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fback%2Flink.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fback%2Flink.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fback%2Flink.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n use back::rpath;\n use driver::session;\n@@ -29,6 +30,7 @@ use core::cmp;\n use core::hash;\n use core::io::{Writer, WriterUtil};\n use core::libc::{c_int, c_uint, c_char};\n+use core::os::consts::{macos, freebsd, linux, win32};\n use core::os;\n use core::ptr;\n use core::run;\n@@ -41,9 +43,7 @@ use syntax::ast_map::{path, path_mod, path_name};\n use syntax::attr;\n use syntax::print::pprust;\n \n-use core::os::consts::{macos, freebsd, linux, win32};\n-\n-enum output_type {\n+pub enum output_type {\n     output_type_none,\n     output_type_bitcode,\n     output_type_assembly,\n@@ -59,7 +59,7 @@ impl output_type : cmp::Eq {\n     pure fn ne(&self, other: &output_type) -> bool { !(*self).eq(other) }\n }\n \n-fn llvm_err(sess: Session, +msg: ~str) -> ! unsafe {\n+pub fn llvm_err(sess: Session, +msg: ~str) -> ! unsafe {\n     let cstr = llvm::LLVMRustGetLastError();\n     if cstr == ptr::null() {\n         sess.fatal(msg);\n@@ -68,7 +68,7 @@ fn llvm_err(sess: Session, +msg: ~str) -> ! unsafe {\n     }\n }\n \n-fn WriteOutputFile(sess: Session,\n+pub fn WriteOutputFile(sess: Session,\n         PM: lib::llvm::PassManagerRef, M: ModuleRef,\n         Triple: *c_char,\n         // FIXME: When #2334 is fixed, change\n@@ -86,10 +86,14 @@ fn WriteOutputFile(sess: Session,\n pub mod jit {\n     #[legacy_exports];\n \n+    use back::link::llvm_err;\n     use lib::llvm::llvm;\n+    use lib::llvm::{ModuleRef, PassManagerRef, mk_target_data};\n     use metadata::cstore;\n+    use session::Session;\n \n     use core::cast;\n+    use core::libc::c_int;\n     use core::ptr;\n     use core::str;\n \n@@ -161,11 +165,19 @@ mod write {\n     #[legacy_exports];\n \n     use back::link::jit;\n+    use back::link::{ModuleRef, WriteOutputFile, output_type};\n+    use back::link::{output_type_assembly, output_type_bitcode};\n+    use back::link::{output_type_exe, output_type_llvm_assembly};\n+    use back::link::{output_type_object};\n     use driver::session;\n     use lib::llvm::llvm;\n+    use lib::llvm::{False, True, mk_pass_manager, mk_target_data};\n     use lib;\n+    use session::Session;\n \n     use core::char;\n+    use core::libc::{c_char, c_int, c_uint};\n+    use core::path::Path;\n     use core::str;\n     use core::vec;\n "}, {"sha": "8378270bee4a1ba6acb77a5914ff094976083023", "filename": "src/librustc/back/rpath.rs", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fback%2Frpath.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fback%2Frpath.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fback%2Frpath.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n use driver::session;\n use metadata::cstore;\n@@ -20,7 +21,13 @@ use core::vec;\n use std::map::HashMap;\n use std::map;\n \n+export get_absolute_rpath;\n+export get_install_prefix_rpath;\n+export get_relative_to;\n export get_rpath_flags;\n+export get_rpath_relative_to_output;\n+export minimize_rpaths;\n+export rpaths_to_flags;\n \n pure fn not_win32(os: session::os) -> bool {\n   match os {\n@@ -202,6 +209,11 @@ fn minimize_rpaths(rpaths: &[Path]) -> ~[Path] {\n mod test {\n     #[legacy_exports];\n \n+    use core::prelude::*;\n+\n+    use back::rpath::{get_absolute_rpath, get_install_prefix_rpath};\n+    use back::rpath::{get_relative_to, get_rpath_relative_to_output};\n+    use back::rpath::{minimize_rpaths, rpaths_to_flags};\n     use driver::session;\n \n     use core::os;"}, {"sha": "cbc598228a4ce7853bbe659e6ea03a23b5948ded", "filename": "src/librustc/driver/driver.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fdriver%2Fdriver.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fdriver%2Fdriver.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fdriver%2Fdriver.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -9,6 +9,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n use back::link;\n use back::{x86, x86_64};\n@@ -830,7 +831,13 @@ fn list_metadata(sess: Session, path: &Path, out: io::Writer) {\n mod test {\n     #[legacy_exports];\n \n+    use core::prelude::*;\n+\n+    use driver::driver::{build_configuration, build_session};\n+    use driver::driver::{build_session_options, optgroups, str_input};\n+\n     use core::vec;\n+    use std::getopts::groups::getopts;\n     use std::getopts;\n     use syntax::attr;\n     use syntax::diagnostic;"}, {"sha": "ee34570203bc5d9e3ddb9f65038f3dd9439c6248", "filename": "src/librustc/driver/session.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fdriver%2Fsession.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fdriver%2Fsession.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fdriver%2Fsession.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n use back::link;\n use back::target_strs;\n@@ -333,6 +334,12 @@ fn sess_os_to_meta_os(os: os) -> metadata::loader::os {\n #[cfg(test)]\n mod test {\n     #[legacy_exports];\n+\n+    use core::prelude::*;\n+\n+    use driver::session::{bin_crate, building_library, lib_crate};\n+    use driver::session::{unknown_crate};\n+\n     use syntax::ast;\n     use syntax::ast_util;\n "}, {"sha": "b5622e1e575cc2a0686d70f1004ac14ae92bc689", "filename": "src/librustc/front/config.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Ffront%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Ffront%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Ffront%2Fconfig.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n use syntax::{ast, fold, attr};\n "}, {"sha": "9bd7566e2e7df15e85ef1a1646f5b1e0c7a0aff5", "filename": "src/librustc/front/core_inject.rs", "status": "modified", "additions": 13, "deletions": 4, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Ffront%2Fcore_inject.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Ffront%2Fcore_inject.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Ffront%2Fcore_inject.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n use driver::session::Session;\n \n@@ -75,10 +76,18 @@ fn inject_libcore_ref(sess: Session,\n         fold_mod: |module, fld| {\n             let n2 = sess.next_node_id();\n \n-            let vp = @spanned(\n-                ast::view_path_glob(ident_to_path(dummy_sp(),\n-                                                  sess.ident_of(~\"core\")),\n-                                    n2));\n+            let prelude_path = @{\n+                span: dummy_sp(),\n+                global: false,\n+                idents: ~[\n+                    sess.ident_of(~\"core\"),\n+                    sess.ident_of(~\"prelude\")\n+                ],\n+                rp: None,\n+                types: ~[]\n+            };\n+\n+            let vp = @spanned(ast::view_path_glob(prelude_path, n2));\n             let vi2 = @{node: ast::view_item_import(~[vp]),\n                         attrs: ~[],\n                         vis: ast::private,"}, {"sha": "bad8ca88ad88ca31156f663c72da156994cc28e0", "filename": "src/librustc/front/intrinsic_inject.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Ffront%2Fintrinsic_inject.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Ffront%2Fintrinsic_inject.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Ffront%2Fintrinsic_inject.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n use driver::session::Session;\n use syntax::parse;"}, {"sha": "1e2063649b08b439d1dbb5225d505455c516e0ab", "filename": "src/librustc/front/test.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Ffront%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Ffront%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Ffront%2Ftest.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -10,6 +10,7 @@\n \n // Code that generates a test runner to run all the tests in a crate\n \n+use core::prelude::*;\n \n use driver::session;\n use front::config;"}, {"sha": "d5c055845394d0345511a586a3aa74f4090b572b", "filename": "src/librustc/lib/llvm.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Flib%2Fllvm.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Flib%2Fllvm.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Flib%2Fllvm.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n use core::cast;\n use core::cmp;"}, {"sha": "078b5ea9a4b334bf97e7640171577dab7b9768d1", "filename": "src/librustc/metadata/creader.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmetadata%2Fcreader.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmetadata%2Fcreader.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmetadata%2Fcreader.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -11,6 +11,8 @@\n \n //! Validates all used crates and extern libraries and loads their metadata\n \n+use core::prelude::*;\n+\n use metadata::cstore;\n use metadata::common::*;\n use metadata::decoder;"}, {"sha": "2b1c66eb4bbb678711bff7b2dc1c848b5554513b", "filename": "src/librustc/metadata/csearch.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmetadata%2Fcsearch.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmetadata%2Fcsearch.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmetadata%2Fcsearch.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -11,6 +11,8 @@\n \n // Searching for information from the cstore\n \n+use core::prelude::*;\n+\n use metadata::common::*;\n use metadata::cstore;\n use metadata::decoder;"}, {"sha": "e9d6711d87b361bd63d87ec00fd3ceb36b6ad163", "filename": "src/librustc/metadata/cstore.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmetadata%2Fcstore.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmetadata%2Fcstore.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmetadata%2Fcstore.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -12,6 +12,8 @@\n // The crate store - a central repo for information collected about external\n // crates and libraries\n \n+use core::prelude::*;\n+\n use metadata::creader;\n use metadata::cstore;\n use metadata::decoder;"}, {"sha": "dbc70f1318c41685c73e39e545be68595dfb81f0", "filename": "src/librustc/metadata/decoder.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmetadata%2Fdecoder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmetadata%2Fdecoder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmetadata%2Fdecoder.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -11,6 +11,8 @@\n \n // Decoding metadata from a single crate's metadata\n \n+use core::prelude::*;\n+\n use cmd = metadata::cstore::crate_metadata;\n use dvec::DVec;\n use hash::{Hash, HashUtil};"}, {"sha": "f52c2e448fe33e53920be774d6c161d7bc995897", "filename": "src/librustc/metadata/encoder.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmetadata%2Fencoder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmetadata%2Fencoder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmetadata%2Fencoder.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -11,6 +11,8 @@\n \n // Metadata encoding\n \n+use core::prelude::*;\n+\n use metadata::common::*;\n use metadata::csearch;\n use metadata::cstore;"}, {"sha": "15c0a1944ea42829bc18564760b44ad8c591b070", "filename": "src/librustc/metadata/filesearch.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmetadata%2Ffilesearch.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmetadata%2Ffilesearch.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmetadata%2Ffilesearch.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -13,6 +13,8 @@\n // FIXME (#2658): I'm not happy how this module turned out. Should\n // probably just be folded into cstore.\n \n+use core::prelude::*;\n+\n use core::option;\n use core::os;\n use core::result::Result;"}, {"sha": "535f45ae8395419ee89a8cc8bdd3abbdab062d86", "filename": "src/librustc/metadata/loader.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmetadata%2Floader.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmetadata%2Floader.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmetadata%2Floader.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -11,6 +11,8 @@\n \n //! Finds crate binaries and loads their metadata\n \n+use core::prelude::*;\n+\n use lib::llvm::{False, llvm, mk_object_file, mk_section_iter};\n use metadata::decoder;\n use metadata::encoder;\n@@ -26,14 +28,13 @@ use core::cast;\n use core::flate;\n use core::io::WriterUtil;\n use core::io;\n+use core::os::consts::{macos, freebsd, linux, win32};\n use core::option;\n use core::ptr;\n use core::str;\n use core::uint;\n use core::vec;\n \n-use core::os::consts::{macos, freebsd, linux, win32};\n-\n export os;\n export os_macos, os_win32, os_linux, os_freebsd;\n export ctxt;"}, {"sha": "927ef29b04fc26b363066f3c6e45081593930fe9", "filename": "src/librustc/metadata/tydecode.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmetadata%2Ftydecode.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmetadata%2Ftydecode.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmetadata%2Ftydecode.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -14,6 +14,8 @@\n // tjc note: Would be great to have a `match check` macro equivalent\n // for some of these\n \n+use core::prelude::*;\n+\n use middle::ty;\n use middle::ty::{FnTyBase, FnMeta, FnSig};\n "}, {"sha": "67f168cc5b649951d0b9d1ca6c57c0ec66f29e35", "filename": "src/librustc/metadata/tyencode.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmetadata%2Ftyencode.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmetadata%2Ftyencode.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmetadata%2Ftyencode.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -11,6 +11,8 @@\n \n // Type encoding\n \n+use core::prelude::*;\n+\n use middle::ty;\n use middle::ty::vid;\n "}, {"sha": "c2f2d7711af6c1d1523c98b4e549179dfbb1b10c", "filename": "src/librustc/middle/astencode.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fastencode.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fastencode.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fastencode.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n use c = metadata::common;\n use cstore = metadata::cstore;"}, {"sha": "534098d96dc9a7593dcaeae945ea8cc3a730ceee", "filename": "src/librustc/middle/borrowck/check_loans.rs", "status": "modified", "additions": 12, "deletions": 1, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fborrowck%2Fcheck_loans.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fborrowck%2Fcheck_loans.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fborrowck%2Fcheck_loans.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -15,18 +15,29 @@\n // 1. assignments are always made to mutable locations;\n // 2. loans made in overlapping scopes do not conflict\n // 3. assignments do not affect things loaned out as immutable\n-// 4. moves to dnot affect things loaned out in any way\n+// 4. moves do not affect things loaned out in any way\n \n+use core::prelude::*;\n \n+use middle::borrowck::{Loan, bckerr, borrowck_ctxt, cmt, inherent_mutability};\n+use middle::borrowck::{req_maps, save_and_restore};\n+use middle::mem_categorization::{cat_arg, cat_binding, cat_deref, cat_local};\n+use middle::mem_categorization::{cat_rvalue, cat_special};\n+use middle::mem_categorization::{loan_path, lp_arg, lp_comp, lp_deref};\n+use middle::mem_categorization::{lp_local};\n use middle::ty::{CopyValue, MoveValue, ReadValue};\n use middle::ty;\n+use util::ppaux::ty_to_str;\n \n use core::cmp;\n use core::dvec::DVec;\n use core::uint;\n use core::vec;\n+use std::map::HashMap;\n+use syntax::ast::{m_const, m_imm, m_mutbl};\n use syntax::ast;\n use syntax::ast_util;\n+use syntax::codemap::span;\n use syntax::print::pprust;\n use syntax::visit;\n "}, {"sha": "215256a8e9536e94b35d9ccca9d2d71273fcbc9c", "filename": "src/librustc/middle/borrowck/gather_loans.rs", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fborrowck%2Fgather_loans.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fborrowck%2Fgather_loans.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fborrowck%2Fgather_loans.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -16,17 +16,26 @@\n // their associated scopes.  In phase two, checking loans, we will then make\n // sure that all of these loans are honored.\n \n+use core::prelude::*;\n \n use middle::borrowck::preserve::{preserve_condition, pc_ok, pc_if_pure};\n-use middle::mem_categorization::{mem_categorization_ctxt, opt_deref_kind};\n+use middle::borrowck::{Loan, bckres, borrowck_ctxt, err_mutbl, req_maps};\n+use middle::mem_categorization::{cat_binding, cat_discr, cmt, comp_variant};\n+use middle::mem_categorization::{mem_categorization_ctxt};\n+use middle::mem_categorization::{opt_deref_kind};\n use middle::pat_util;\n use middle::ty::{ty_region};\n use middle::ty;\n+use util::common::indenter;\n+use util::ppaux::{expr_repr, region_to_str};\n \n use core::dvec;\n use core::send_map::linear::LinearMap;\n use core::vec;\n+use std::map::HashMap;\n+use syntax::ast::{m_const, m_imm, m_mutbl};\n use syntax::ast;\n+use syntax::codemap::span;\n use syntax::print::pprust;\n use syntax::visit;\n "}, {"sha": "92a3ce2458913828b9773c5eda6f0f5c86b87cd7", "filename": "src/librustc/middle/borrowck/loan.rs", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fborrowck%2Floan.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fborrowck%2Floan.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fborrowck%2Floan.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -12,10 +12,19 @@\n // Loan(Ex, M, S) = Ls holds if ToAddr(Ex) will remain valid for the entirety\n // of the scope S, presuming that the returned set of loans `Ls` are honored.\n \n+use core::prelude::*;\n \n+use middle::borrowck::{Loan, bckres, borrowck_ctxt, cmt, err_mutbl};\n+use middle::borrowck::{err_out_of_scope};\n+use middle::mem_categorization::{cat_arg, cat_binding, cat_discr, cat_comp};\n+use middle::mem_categorization::{cat_deref, cat_discr, cat_local};\n+use middle::mem_categorization::{cat_special, cat_stack_upvar, comp_field};\n+use middle::mem_categorization::{comp_index, comp_variant, region_ptr};\n use middle::ty;\n+use util::common::indenter;\n \n-use core::result::{Result, Ok, Err};\n+use core::result::{Err, Ok, Result};\n+use syntax::ast::{m_const, m_imm, m_mutbl};\n use syntax::ast;\n \n export public_methods;"}, {"sha": "a6fbe5bd6ddf1768f4c52b96ba7a48400f932633", "filename": "src/librustc/middle/borrowck/mod.rs", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fborrowck%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fborrowck%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fborrowck%2Fmod.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -226,6 +226,8 @@ Borrowck results in two maps.\n \n #[legacy_exports];\n \n+use core::prelude::*;\n+\n use middle::liveness;\n use middle::mem_categorization::*;\n use middle::region;\n@@ -259,9 +261,6 @@ pub mod loan;\n #[legacy_exports]\n pub mod preserve;\n \n-export check_crate, root_map, mutbl_map;\n-export check_loans, gather_loans, loan, preserve;\n-\n fn check_crate(tcx: ty::ctxt,\n                method_map: typeck::method_map,\n                last_use_map: liveness::last_use_map,\n@@ -410,15 +409,15 @@ impl bckerr : cmp::Eq {\n type bckres<T> = Result<T, bckerr>;\n \n /// a complete record of a loan that was granted\n-struct Loan {lp: @loan_path, cmt: cmt, mutbl: ast::mutability}\n+pub struct Loan {lp: @loan_path, cmt: cmt, mutbl: ast::mutability}\n \n /// maps computed by `gather_loans` that are then used by `check_loans`\n ///\n /// - `req_loan_map`: map from each block/expr to the required loans needed\n ///   for the duration of that block/expr\n /// - `pure_map`: map from block/expr that must be pure to the error message\n ///   that should be reported if they are not pure\n-type req_maps = {\n+pub type req_maps = {\n     req_loan_map: HashMap<ast::node_id, @DVec<Loan>>,\n     pure_map: HashMap<ast::node_id, bckerr>\n };"}, {"sha": "600ede8c720ecac699bedec973c843a8e910add2", "filename": "src/librustc/middle/borrowck/preserve.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fborrowck%2Fpreserve.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fborrowck%2Fpreserve.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fborrowck%2Fpreserve.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -13,9 +13,19 @@\n // the scope S.\n //\n \n+use core::prelude::*;\n \n+use middle::borrowck::{bckerr, bckerr_code, bckres, borrowck_ctxt, cmt};\n+use middle::borrowck::{err_mut_uniq, err_mut_variant, err_out_of_root_scope};\n+use middle::borrowck::{err_out_of_scope, err_root_not_permitted};\n+use middle::mem_categorization::{cat_arg, cat_binding, cat_comp, cat_deref};\n+use middle::mem_categorization::{cat_discr, cat_local, cat_special};\n+use middle::mem_categorization::{cat_stack_upvar, comp_field, comp_index};\n+use middle::mem_categorization::{comp_variant, region_ptr};\n use middle::ty;\n+use util::common::indenter;\n \n+use syntax::ast::{m_const, m_imm, m_mutbl};\n use syntax::ast;\n \n export public_methods, preserve_condition, pc_ok, pc_if_pure;"}, {"sha": "bd8d1b64906599b1de12a9ac8c8234f7442bb515", "filename": "src/librustc/middle/capture.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fcapture.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fcapture.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fcapture.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n use middle::freevars;\n use middle::ty;"}, {"sha": "b8d222aecd7e53adf38e2be87838e44436513071", "filename": "src/librustc/middle/check_const.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fcheck_const.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fcheck_const.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fcheck_const.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n use driver::session::Session;\n use middle::resolve;"}, {"sha": "c70d17423cfb66022f58c5c33c073a205ae89b16", "filename": "src/librustc/middle/check_match.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fcheck_match.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fcheck_match.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fcheck_match.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n use middle::const_eval::{compare_const_vals, lookup_const_by_id};\n use middle::const_eval::{eval_const_expr, const_val, const_int, const_bool};"}, {"sha": "5821bf4fbe5a706f77c55d69c810c72fe37ab849", "filename": "src/librustc/middle/const_eval.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fconst_eval.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fconst_eval.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fconst_eval.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n use middle::resolve;\n use middle::ty;"}, {"sha": "f2a7dd0648cb3e9657e94d6fccff4ac72cfdfc9a", "filename": "src/librustc/middle/kind.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fkind.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fkind.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fkind.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n use middle::freevars::freevar_entry;\n use middle::freevars;"}, {"sha": "cca71153a7d68da2705cc738a0c963e2a6c6e7b4", "filename": "src/librustc/middle/lang_items.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Flang_items.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Flang_items.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Flang_items.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -20,6 +20,8 @@\n //\n // * Functions called by the compiler itself.\n \n+use core::prelude::*;\n+\n use driver::session::Session;\n use metadata::csearch::{each_lang_item, get_item_attrs};\n use metadata::cstore::{iter_crate_data};"}, {"sha": "d5992d201bbc3c57bee65e0c604c4acd660c6abe", "filename": "src/librustc/middle/lint.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Flint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Flint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Flint.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n use driver::session::Session;\n use driver::session;"}, {"sha": "6c78c270139b8d7bd61a365881587c2746c401ba", "filename": "src/librustc/middle/liveness.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fliveness.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fliveness.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fliveness.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -103,6 +103,8 @@\n  *   to return explicitly.\n  */\n \n+use core::prelude::*;\n+\n use middle::capture::{cap_move, cap_drop, cap_copy, cap_ref};\n use middle::capture;\n use middle::pat_util;"}, {"sha": "b72950cbf4b1b3ef1a264420b58a596b24e2e5eb", "filename": "src/librustc/middle/mem_categorization.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fmem_categorization.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fmem_categorization.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fmem_categorization.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -47,6 +47,8 @@\n  * then an index to jump forward to the relevant item.\n  */\n \n+use core::prelude::*;\n+\n use middle::ty;\n use middle::typeck;\n use util::ppaux::{ty_to_str, region_to_str};\n@@ -136,7 +138,7 @@ impl categorization : cmp::Eq {\n }\n \n // different kinds of pointers:\n-enum ptr_kind {\n+pub enum ptr_kind {\n     uniq_ptr,\n     gc_ptr,\n     region_ptr(ty::Region),\n@@ -177,7 +179,7 @@ impl ptr_kind : cmp::Eq {\n \n // I am coining the term \"components\" to mean \"pieces of a data\n // structure accessible without a dereference\":\n-enum comp_kind {\n+pub enum comp_kind {\n     comp_tuple,                  // elt in a tuple\n     comp_anon_field,             // anonymous field (in e.g.\n                                  // struct Foo(int, int);\n@@ -269,7 +271,7 @@ impl cmt_ : cmp::Eq {\n // a loan path is like a category, but it exists only when the data is\n // interior to the stack frame.  loan paths are used as the key to a\n // map indicating what is borrowed at any point in time.\n-enum loan_path {\n+pub enum loan_path {\n     lp_local(ast::node_id),\n     lp_arg(ast::node_id),\n     lp_deref(@loan_path, ptr_kind),"}, {"sha": "00be40cbf49dd4f317ca9c7ab831a32e7a4a7f88", "filename": "src/librustc/middle/mode.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fmode.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fmode.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fmode.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n use middle::pat_util;\n use middle::ty;"}, {"sha": "5a4d36f1d10a9e794a51f11d82db0a30632759d0", "filename": "src/librustc/middle/pat_util.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fpat_util.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fpat_util.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fpat_util.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n use middle::resolve;\n use middle::ty::{CopyValue, MoveValue, ReadValue};"}, {"sha": "56dee0843dd3a8effbc1d5eb0a0335c6d64c9166", "filename": "src/librustc/middle/privacy.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fprivacy.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fprivacy.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fprivacy.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -12,6 +12,8 @@\n // A pass that checks to make sure private fields and methods aren't used\n // outside their scopes.\n \n+use core::prelude::*;\n+\n use middle::ty::{ty_struct, ty_enum};\n use middle::ty;\n use middle::typeck::{method_map, method_origin, method_param, method_self};"}, {"sha": "21ccfd3b5f2b0da646e11f6198c4362a5bfb3a79", "filename": "src/librustc/middle/region.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fregion.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fregion.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fregion.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -17,6 +17,7 @@ region parameterized.\n \n */\n \n+use core::prelude::*;\n \n use driver::session::Session;\n use metadata::csearch;"}, {"sha": "4e5e9b97957e0d26665c6575d20ce53aaf54864c", "filename": "src/librustc/middle/resolve.rs", "status": "modified", "additions": 3, "deletions": 74, "changes": 77, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fresolve.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fresolve.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fresolve.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n use driver::session::Session;\n use metadata::csearch::{each_path, get_method_names_if_trait};\n@@ -3075,77 +3076,6 @@ impl Resolver {\n                self.module_to_str(containing_module));\n \n         return Success(PrefixFound(containing_module, i));\n-\n-        /*\n-        // If we reached the end, return the containing module.\n-        if i == module_path.len() {\n-            return ModulePrefixResult {\n-                result: Success(containing_module),\n-                prefix_len: i\n-            };\n-        }\n-\n-        // Is the containing module the current module? If so, we allow\n-        // globs to be unresolved.\n-        let allow_globs = core::managed::ptr_eq(containing_module, module_);\n-\n-        let name = module_path.get_elt(i);\n-        i += 1;\n-\n-        let resolve_result = self.resolve_name_in_module(containing_module,\n-                                                         name,\n-                                                         TypeNS,\n-                                                         Xray,\n-                                                         allow_globs);\n-        match resolve_result {\n-            Success(target) => {\n-                match target.bindings.type_def {\n-                    Some(ref type_def) => {\n-                        match (*type_def).module_def {\n-                            None => {\n-                                error!(\"!!! (resolving crate-relative \\\n-                                        module) module wasn't actually a \\\n-                                        module!\");\n-                                return ModulePrefixResult {\n-                                    result: Failed,\n-                                    prefix_len: i\n-                                };\n-                            }\n-                            Some(module_def) => {\n-                                return ModulePrefixResult {\n-                                    result: Success(module_def),\n-                                    prefix_len: i\n-                                };\n-                            }\n-                        }\n-                    }\n-                    None => {\n-                        error!(\"!!! (resolving crate-relative module) module\n-                                wasn't actually a module!\");\n-                        return ModulePrefixResult {\n-                            result: Failed,\n-                            prefix_len: i\n-                        };\n-                    }\n-                }\n-            }\n-            Indeterminate => {\n-                debug!(\"(resolving crate-relative module) indeterminate; \\\n-                        bailing\");\n-                return ModulePrefixResult {\n-                    result: Indeterminate,\n-                    prefix_len: i\n-                };\n-            }\n-            Failed => {\n-                debug!(\"(resolving crate-relative module) failed to resolve\");\n-                return ModulePrefixResult {\n-                    result: Failed,\n-                    prefix_len: i\n-                };\n-            }\n-        }\n-        */\n     }\n \n     fn name_is_exported(module_: @Module, name: ident) -> bool {\n@@ -3165,7 +3095,6 @@ impl Resolver {\n                               xray: XrayFlag,\n                               allow_globs: bool)\n                            -> ResolveResult<Target> {\n-\n         debug!(\"(resolving name in module) resolving `%s` in `%s`\",\n                self.session.str_of(name),\n                self.module_to_str(module_));\n@@ -4818,7 +4747,7 @@ impl Resolver {\n         }\n \n         return self.resolve_item_by_identifier_in_lexical_scope(identifier,\n-                                                             namespace);\n+                                                                namespace);\n     }\n \n     // XXX: Merge me with resolve_name_in_module?\n@@ -5035,7 +4964,7 @@ impl Resolver {\n         match self.resolve_item_in_lexical_scope(self.current_module,\n                                                  ident,\n                                                  namespace,\n-                                                 SearchThroughModules) {\n+                                                 DontSearchThroughModules) {\n             Success(target) => {\n                 match (*target.bindings).def_for_namespace(namespace) {\n                     None => {"}, {"sha": "2b07ed1fc2d418adeb4c85084ed91d5e4b9aa64c", "filename": "src/librustc/middle/trans/_match.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftrans%2F_match.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftrans%2F_match.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftrans%2F_match.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -142,6 +142,7 @@\n  *\n  */\n \n+use core::prelude::*;\n \n use back::abi;\n use lib::llvm::llvm;"}, {"sha": "78c70dd3cf1dc34fc134930ad62dfac14bcdc2a4", "filename": "src/librustc/middle/trans/base.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftrans%2Fbase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftrans%2Fbase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftrans%2Fbase.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -23,6 +23,7 @@\n //     but many TypeRefs correspond to one ty::t; for instance, tup(int, int,\n //     int) and rec(x=int, y=int, z=int) will have the same TypeRef.\n \n+use core::prelude::*;\n \n use back::link::{mangle_exported_name};\n use back::link::{mangle_internal_name_by_path_and_seq};"}, {"sha": "8f02cee5b2af15d69c6b9ca9b8642a0aff810f52", "filename": "src/librustc/middle/trans/callee.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftrans%2Fcallee.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftrans%2Fcallee.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftrans%2Fcallee.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -16,6 +16,7 @@\n // and methods are represented as just a fn ptr and not a full\n // closure.\n \n+use core::prelude::*;\n \n use lib::llvm::ValueRef;\n use middle::trans::base::{get_item_val, trans_external_path};"}, {"sha": "632870556850d1d1bc3172b254146287e7a3715b", "filename": "src/librustc/middle/trans/closure.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftrans%2Fclosure.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftrans%2Fclosure.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftrans%2Fclosure.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n use back::abi;\n use back::link::{mangle_internal_name_by_path_and_seq};"}, {"sha": "3bec973fc90052fb91d020286ac1c79b2339b857", "filename": "src/librustc/middle/trans/common.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftrans%2Fcommon.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftrans%2Fcommon.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftrans%2Fcommon.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -14,6 +14,8 @@\n \n */\n \n+use core::prelude::*;\n+\n use back::{link, abi, upcall};\n use driver::session;\n use driver::session::Session;"}, {"sha": "0f57ca09386f816f172064f2f47bd57ef15f1f7a", "filename": "src/librustc/middle/trans/consts.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftrans%2Fconsts.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftrans%2Fconsts.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftrans%2Fconsts.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n use middle::const_eval;\n use middle::trans::base::get_insn_ctxt;"}, {"sha": "c1abe7e417bd965a34cfaed34a887f4445063732", "filename": "src/librustc/middle/trans/controlflow.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftrans%2Fcontrolflow.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftrans%2Fcontrolflow.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftrans%2Fcontrolflow.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n use lib::llvm::ValueRef;\n use middle::trans::base::*;"}, {"sha": "b94d06585977661e06745abff34c7b7c49b54456", "filename": "src/librustc/middle/trans/datum.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftrans%2Fdatum.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftrans%2Fdatum.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftrans%2Fdatum.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -95,6 +95,7 @@\n  * methods themselves.  Most are only suitable for some types of\n  * values. */\n \n+use core::prelude::*;\n \n use lib::llvm::ValueRef;\n use middle::trans::base::*;"}, {"sha": "ce8db8690acf2d965d540041d6baa31f8a10e186", "filename": "src/librustc/middle/trans/debuginfo.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftrans%2Fdebuginfo.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftrans%2Fdebuginfo.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftrans%2Fdebuginfo.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n use driver::session;\n use lib::llvm::ValueRef;"}, {"sha": "40face3655d812148c24ce731a1eece3074ff74c", "filename": "src/librustc/middle/trans/expr.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftrans%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftrans%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftrans%2Fexpr.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -111,6 +111,7 @@ lvalues are *never* stored by value.\n \n */\n \n+use core::prelude::*;\n \n use lib::llvm::ValueRef;\n use middle::resolve;"}, {"sha": "658cffa936bcb2e5510c6c7fbc5720bc410cde28", "filename": "src/librustc/middle/trans/foreign.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftrans%2Fforeign.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftrans%2Fforeign.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftrans%2Fforeign.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -11,6 +11,7 @@\n // The classification code for the x86_64 ABI is taken from the clay language\n // https://github.com/jckarter/clay/blob/master/compiler/src/externals.cpp\n \n+use core::prelude::*;\n \n use back::{link, abi};\n use driver::session::arch_x86_64;"}, {"sha": "70049fb3e4e90f9ade08e64bf4204fcaf738ded3", "filename": "src/librustc/middle/trans/glue.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftrans%2Fglue.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftrans%2Fglue.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftrans%2Fglue.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -12,6 +12,7 @@\n //\n // Code relating to taking, dropping, etc as well as type descriptors.\n \n+use core::prelude::*;\n \n use lib::llvm::{ValueRef, TypeRef};\n use middle::trans::base::*;"}, {"sha": "447b4455adfa1a375e8efb59e4d5a305739f064d", "filename": "src/librustc/middle/trans/inline.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftrans%2Finline.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftrans%2Finline.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftrans%2Finline.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n use middle::astencode;\n use middle::trans::base::{get_insn_ctxt};"}, {"sha": "9631fd8b389cb6df4e307780deb75b8e8ea0b081", "filename": "src/librustc/middle/trans/meth.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftrans%2Fmeth.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftrans%2Fmeth.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftrans%2Fmeth.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n+\n use back::{link, abi};\n use driver;\n use lib::llvm::llvm::LLVMGetParam;"}, {"sha": "60ad1b83807bc3b1773a25b865ec0d9db34bf886", "filename": "src/librustc/middle/trans/monomorphize.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftrans%2Fmonomorphize.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftrans%2Fmonomorphize.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftrans%2Fmonomorphize.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n use back::link::mangle_exported_name;\n use middle::trans::base::{get_insn_ctxt};"}, {"sha": "b894b9f50ebd830e28c5cca1e9160c7b2248083d", "filename": "src/librustc/middle/ty.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Fty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fty.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -10,6 +10,8 @@\n \n #[warn(deprecated_pattern)];\n \n+use core::prelude::*;\n+\n use driver::session;\n use metadata::csearch;\n use metadata;"}, {"sha": "043ff3fbec48bc63d31fee52348fcd7ce988d7a4", "filename": "src/librustc/middle/typeck/astconv.rs", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fastconv.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fastconv.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fastconv.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -52,18 +52,24 @@\n  * an rptr (`&r.T`) use the region `r` that appears in the rptr.\n  */\n \n+use core::prelude::*;\n \n-use middle::ty::{FnTyBase, FnMeta, FnSig};\n+use middle::pat_util::pat_id_map;\n+use middle::ty::{FnTyBase, FnMeta, FnSig, ty_param_substs_and_ty};\n use middle::ty;\n use middle::typeck::check::fn_ctxt;\n use middle::typeck::collect;\n use middle::typeck::rscope::{anon_rscope, binding_rscope, empty_rscope};\n use middle::typeck::rscope::{in_anon_rscope, in_binding_rscope};\n use middle::typeck::rscope::{region_scope, type_rscope};\n+use middle::typeck::{crate_ctxt, write_substs_to_tcx, write_ty_to_tcx};\n \n use core::result;\n use core::vec;\n use syntax::ast;\n+use syntax::codemap::span;\n+use syntax::print::pprust::path_to_str;\n+use util::common::indent;\n \n pub trait ast_conv {\n     fn tcx() -> ty::ctxt;"}, {"sha": "5514d2f04b3b843c5511c2824c8c1fa9e9d260d1", "filename": "src/librustc/middle/typeck/check/_match.rs", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcheck%2F_match.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcheck%2F_match.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcheck%2F_match.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,17 +8,23 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n-use middle::pat_util::{pat_is_binding, pat_is_const};\n+use middle::pat_util::{PatIdMap, pat_id_map, pat_is_binding, pat_is_const};\n use middle::pat_util::{pat_is_variant_or_struct};\n use middle::ty;\n use middle::typeck::check::demand;\n+use middle::typeck::check::{check_block, check_expr_with, fn_ctxt};\n+use middle::typeck::check::{instantiate_path, lookup_def, lookup_local};\n+use middle::typeck::check::{structure_of, valid_range_bounds};\n+use middle::typeck::require_same_types;\n \n use core::vec;\n use std::map::HashMap;\n use syntax::ast;\n use syntax::ast_util::walk_pat;\n use syntax::ast_util;\n+use syntax::codemap::span;\n use syntax::print::pprust;\n \n fn check_match(fcx: @fn_ctxt,"}, {"sha": "e4b232500bbf76656fd86ca7542a03b1e6e09eee", "filename": "src/librustc/middle/typeck/check/demand.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcheck%2Fdemand.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcheck%2Fdemand.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcheck%2Fdemand.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -13,8 +13,10 @@ use middle::ty;\n use middle::typeck::check::fn_ctxt;\n use middle::typeck::infer;\n \n+use core::result::{Err, Ok};\n use core::result;\n use syntax::ast;\n+use syntax::codemap::span;\n \n // Requires that the two types unify, and prints an error message if they\n // don't."}, {"sha": "a8c1b0aaa9033b4299b701d6c9a5189102b6cecc", "filename": "src/librustc/middle/typeck/check/method.rs", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcheck%2Fmethod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcheck%2Fmethod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcheck%2Fmethod.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -79,27 +79,37 @@ obtained the type `Foo`, we would never match this method.\n \n */\n \n+use core::prelude::*;\n \n use middle::resolve::{Impl, MethodInfo};\n use middle::resolve;\n use middle::ty::*;\n use middle::ty;\n-use middle::typeck::check;\n+use middle::typeck::check::{fn_ctxt, impl_self_ty};\n+use middle::typeck::check::{structurally_resolved_type};\n+use middle::typeck::check::vtable::VtableContext;\n use middle::typeck::check::vtable;\n+use middle::typeck::check;\n use middle::typeck::coherence::get_base_type_def_id;\n use middle::typeck::infer;\n+use middle::typeck::{method_map_entry, method_origin, method_param};\n+use middle::typeck::{method_self, method_static, method_trait};\n+use util::common::indenter;\n+use util::ppaux::expr_repr;\n \n use core::dvec::DVec;\n use core::result;\n use core::uint;\n use core::vec;\n+use std::map::HashMap;\n use syntax::ast::{def_id, sty_by_ref, sty_value, sty_region, sty_box};\n use syntax::ast::{sty_uniq, sty_static, node_id, by_copy, by_ref};\n use syntax::ast::{m_const, m_mutbl, m_imm};\n use syntax::ast;\n use syntax::ast_map;\n use syntax::ast_map::node_id_to_str;\n use syntax::ast_util::dummy_sp;\n+use syntax::codemap::span;\n \n fn lookup(\n     fcx: @fn_ctxt,"}, {"sha": "d0abd61697db261a16682f9be424f4a75daf2b72", "filename": "src/librustc/middle/typeck/check/mod.rs", "status": "modified", "additions": 25, "deletions": 3, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcheck%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcheck%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcheck%2Fmod.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -76,11 +76,14 @@ type parameter).\n \n */\n \n+use core::prelude::*;\n \n use middle::capture;\n use middle::const_eval;\n+use middle::pat_util::pat_id_map;\n use middle::pat_util;\n-use middle::ty::{TyVid, vid, FnTyBase, FnMeta, FnSig, VariantInfo_};\n+use middle::ty::{TyVid, vid, FnTyBase, FnMeta, FnSig, VariantInfo_, field};\n+use middle::ty::{ty_param_bounds_and_ty, ty_param_substs_and_ty};\n use middle::ty;\n use middle::typeck::astconv::{ast_conv, ast_path_to_ty};\n use middle::typeck::astconv::{ast_region_to_region, ast_ty_to_ty};\n@@ -89,12 +92,18 @@ use middle::typeck::check::_match::pat_ctxt;\n use middle::typeck::check::method::TransformTypeNormally;\n use middle::typeck::check::regionmanip::replace_bound_regions_in_fn_ty;\n use middle::typeck::check::vtable::{LocationInfo, VtableContext};\n+use middle::typeck::crate_ctxt;\n use middle::typeck::infer::{resolve_type, force_tvar};\n use middle::typeck::infer;\n use middle::typeck::rscope::{anon_rscope, binding_rscope, bound_self_region};\n use middle::typeck::rscope::{empty_rscope, in_anon_rscope};\n use middle::typeck::rscope::{in_binding_rscope, region_scope, type_rscope};\n use middle::typeck::rscope;\n+use middle::typeck::{isr_alist, lookup_def_ccx, method_map_entry};\n+use middle::typeck::{method_origin, method_self, method_trait, no_params};\n+use middle::typeck::{require_same_types};\n+use util::common::{block_query, indenter, loop_query};\n+use util::ppaux::{bound_region_to_str, expr_repr};\n use util::ppaux;\n \n use core::either;\n@@ -104,15 +113,19 @@ use core::result::{Result, Ok, Err};\n use core::result;\n use core::str;\n use core::vec;\n+use std::list::Nil;\n use std::map::HashMap;\n use std::map;\n-use syntax::ast::ty_i;\n+use syntax::ast::{provided, required, spanned, ty_i};\n use syntax::ast;\n use syntax::ast_map;\n-use syntax::ast_util::{is_local, visibility_to_privacy, Private, Public};\n+use syntax::ast_util::{Private, Public, is_local, local_def, respan};\n+use syntax::ast_util::{visibility_to_privacy};\n use syntax::ast_util;\n+use syntax::codemap::span;\n use syntax::codemap;\n use syntax::parse::token::special_idents;\n+use syntax::print::pprust::{expr_to_str, pat_to_str};\n use syntax::print::pprust;\n use syntax::visit;\n use syntax;\n@@ -131,6 +144,15 @@ export DerefArgs;\n export DontDerefArgs;\n export DoDerefArgs;\n export check_item_types;\n+export check_block;\n+export check_expr_with;\n+export fn_ctxt;\n+export lookup_def;\n+export structure_of;\n+export self_info;\n+export structurally_resolved_type;\n+export instantiate_path;\n+export valid_range_bounds;\n \n #[legacy_exports]\n pub mod _match;"}, {"sha": "029a61c8ca61061662634b4bfcea8b5f966ee004", "filename": "src/librustc/middle/typeck/check/regionck.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcheck%2Fregionck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcheck%2Fregionck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcheck%2Fregionck.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -27,20 +27,25 @@ this point a bit better.\n \n */\n \n+use core::prelude::*;\n \n use middle::freevars::get_freevars;\n use middle::pat_util::pat_bindings;\n use middle::ty::{encl_region, re_scope};\n use middle::ty::{ty_fn_proto, vstore_box, vstore_fixed, vstore_slice};\n use middle::ty::{vstore_uniq};\n use middle::ty;\n-use middle::typeck::infer::{resolve_and_force_all_but_regions, fres};\n+use middle::typeck::check::fn_ctxt;\n+use middle::typeck::check::lookup_def;\n+use middle::typeck::infer::{fres, resolve_and_force_all_but_regions};\n+use middle::typeck::infer::{resolve_type};\n use util::ppaux::{note_and_explain_region, ty_to_str};\n \n use core::result;\n use syntax::ast::{ProtoBare, ProtoBox, ProtoUniq, ProtoBorrowed};\n use syntax::ast::{def_arg, def_binding, def_local, def_self, def_upvar};\n use syntax::ast;\n+use syntax::codemap::span;\n use syntax::print::pprust;\n use syntax::visit;\n "}, {"sha": "1de37f79f08906e9bb9906ee48aada8e9a04d974", "filename": "src/librustc/middle/typeck/check/regionmanip.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcheck%2Fregionmanip.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcheck%2Fregionmanip.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcheck%2Fregionmanip.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -10,9 +10,16 @@\n \n // #[warn(deprecated_mode)];\n \n+use core::prelude::*;\n+\n use middle::ty;\n+use middle::typeck::check::self_info;\n+use middle::typeck::isr_alist;\n+use util::common::indenter;\n+use util::ppaux::region_to_str;\n use util::ppaux;\n \n+use std::list::Cons;\n use syntax::ast;\n use syntax::print::pprust::{expr_to_str};\n "}, {"sha": "593d32c644e28975ae5bf1a0c591d1df55682024", "filename": "src/librustc/middle/typeck/check/vtable.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcheck%2Fvtable.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcheck%2Fvtable.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcheck%2Fvtable.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,23 +8,30 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n use middle::resolve;\n use middle::ty;\n use middle::typeck::check::{fn_ctxt, impl_self_ty};\n+use middle::typeck::check::{structurally_resolved_type};\n use middle::typeck::infer::{fixup_err_to_str, infer_ctxt};\n use middle::typeck::infer::{resolve_and_force_all_but_regions, resolve_type};\n use middle::typeck::infer;\n+use middle::typeck::{crate_ctxt, vtable_origin, vtable_param, vtable_res};\n+use middle::typeck::{vtable_static, vtable_trait};\n use util::common::indenter;\n+use util::ppaux::tys_to_str;\n use util::ppaux;\n \n use core::result;\n use core::uint;\n use core::vec;\n use result::{Result, Ok, Err};\n+use std::map::HashMap;\n use syntax::ast;\n use syntax::ast_util;\n use syntax::codemap::span;\n+use syntax::print::pprust::expr_to_str;\n use syntax::print::pprust;\n use syntax::visit;\n "}, {"sha": "a00fe073c545a9c4bc06a660b21745f484a30d30", "filename": "src/librustc/middle/typeck/check/writeback.rs", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcheck%2Fwriteback.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcheck%2Fwriteback.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcheck%2Fwriteback.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -12,18 +12,24 @@\n // unresolved type variables and replaces \"ty_var\" types with their\n // substitutions.\n \n+use core::prelude::*;\n \n use middle::pat_util;\n use middle::ty;\n-use middle::typeck::check::{fn_ctxt, lookup_local};\n+use middle::typeck::check::{fn_ctxt, lookup_local, self_info};\n use middle::typeck::infer::{force_all, resolve_all, resolve_region};\n use middle::typeck::infer::{resolve_type};\n use middle::typeck::infer;\n+use middle::typeck::{vtable_param, vtable_trait, write_substs_to_tcx};\n+use middle::typeck::{write_ty_to_tcx};\n use util::ppaux;\n \n use core::result::{Result, Ok, Err};\n use core::vec;\n+use std::map::HashMap;\n use syntax::ast;\n+use syntax::codemap::span;\n+use syntax::print::pprust::pat_to_str;\n use syntax::visit;\n \n export resolve_type_vars_in_fn;"}, {"sha": "d25c91dfe47eb4b7774ad2e2f1168a500f2721f0", "filename": "src/librustc/middle/typeck/coherence.rs", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcoherence.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcoherence.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcoherence.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -14,6 +14,7 @@\n // has at most one implementation for each type. Then we build a mapping from\n // each trait in the system to its implementations.\n \n+use core::prelude::*;\n \n use driver;\n use metadata::csearch::{ProvidedTraitMethodInfo, each_path, get_impl_traits};\n@@ -25,12 +26,14 @@ use middle::resolve::{Impl, MethodInfo};\n use middle::ty::{ProvidedMethodSource, ProvidedMethodInfo, bound_copy, get};\n use middle::ty::{kind_can_be_copied, lookup_item_type, param_bounds, subst};\n use middle::ty::{t, ty_bool, ty_bot, ty_box, ty_enum, ty_err, ty_estr};\n-use middle::ty::{ty_evec, ty_float, ty_fn, ty_infer, ty_int, ty_nil, ty_ptr};\n-use middle::ty::{ty_rec, ty_rptr, ty_struct, ty_trait, ty_tup, ty_uint};\n-use middle::ty::{ty_param, ty_self, ty_type, ty_opaque_box, ty_uniq};\n+use middle::ty::{ty_evec, ty_float, ty_fn, ty_infer, ty_int, ty_nil};\n+use middle::ty::{ty_opaque_box, ty_param, ty_param_bounds_and_ty, ty_ptr};\n+use middle::ty::{ty_rec, ty_rptr, ty_self, ty_struct, ty_trait, ty_tup};\n+use middle::ty::{ty_type, ty_uint, ty_uniq};\n use middle::ty::{ty_opaque_closure_ptr, ty_unboxed_vec, type_kind_ext};\n use middle::ty::{type_is_ty_var};\n use middle::ty;\n+use middle::typeck::crate_ctxt;\n use middle::typeck::infer::{infer_ctxt, can_mk_subty};\n use middle::typeck::infer::{new_infer_ctxt, resolve_ivar};\n use middle::typeck::infer::{resolve_nested_tvar, resolve_type};\n@@ -42,7 +45,7 @@ use syntax::ast::{trait_ref};\n use syntax::ast;\n use syntax::ast_map::node_item;\n use syntax::ast_map;\n-use syntax::ast_util::{def_id_of_def, dummy_sp};\n+use syntax::ast_util::{def_id_of_def, dummy_sp, local_def};\n use syntax::attr;\n use syntax::codemap::span;\n use syntax::parse;"}, {"sha": "11a932db2879bb0aa67a54f54847382d84f9a67f", "filename": "src/librustc/middle/typeck/collect.rs", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcollect.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcollect.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcollect.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -30,16 +30,20 @@ are represented as `ty_param()` instances.\n \n */\n \n+use core::prelude::*;\n+\n use metadata::csearch;\n use middle::ty::{FnMeta, FnSig, FnTyBase, InstantiatedTraitRef};\n+use middle::ty::{ty_param_substs_and_ty};\n use middle::ty;\n use middle::typeck::astconv::{ast_conv, ty_of_fn_decl, ty_of_arg};\n use middle::typeck::astconv::{ast_ty_to_ty};\n use middle::typeck::astconv;\n use middle::typeck::infer;\n use middle::typeck::rscope::*;\n use middle::typeck::rscope;\n-use util::common::pluralize;\n+use middle::typeck::{crate_ctxt, lookup_def_tcx, no_params, write_ty_to_tcx};\n+use util::common::{indenter, pluralize};\n use util::ppaux;\n use util::ppaux::bound_to_str;\n \n@@ -48,9 +52,12 @@ use core::option;\n use core::vec;\n use syntax::ast;\n use syntax::ast_map;\n-use syntax::ast_util::trait_method_to_ty_method;\n+use syntax::ast_util::{local_def, split_trait_methods};\n+use syntax::ast_util::{trait_method_to_ty_method};\n use syntax::ast_util;\n+use syntax::codemap::span;\n use syntax::codemap;\n+use syntax::print::pprust::path_to_str;\n use syntax::visit;\n \n fn collect_item_types(ccx: @crate_ctxt, crate: @ast::crate) {"}, {"sha": "8e524bb8019870cc6e431cf342cd1e09a686cbc1", "filename": "src/librustc/middle/typeck/infer/assignment.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fassignment.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fassignment.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fassignment.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -58,12 +58,18 @@\n // A.  But this upper-bound might be stricter than what is truly\n // needed.\n \n+use core::prelude::*;\n \n+use middle::ty::TyVar;\n use middle::ty;\n+use middle::typeck::infer::{ares, cres};\n use middle::typeck::infer::combine::combine_fields;\n+use middle::typeck::infer::sub::Sub;\n use middle::typeck::infer::to_str::ToStr;\n+use util::common::{indent, indenter};\n \n use core::option;\n+use syntax::ast::{m_const, m_imm, m_mutbl};\n use syntax::ast;\n \n fn to_ares(+c: cres<ty::t>) -> ares {"}, {"sha": "d0b17d2ddc3b5c1a4c7c34c048b6e093ffec1e7f", "filename": "src/librustc/middle/typeck/infer/combine.rs", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fcombine.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fcombine.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fcombine.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -54,14 +54,22 @@\n // terms of error reporting, although we do not do that properly right\n // now.\n \n+use core::prelude::*;\n+\n+use middle::ty::{FloatVar, FnTyBase, FnMeta, FnSig, IntVar, TyVar};\n use middle::ty;\n-use middle::ty::{FnTyBase, FnMeta, FnSig};\n+use middle::typeck::infer::glb::Glb;\n+use middle::typeck::infer::lub::Lub;\n use middle::typeck::infer::sub::Sub;\n use middle::typeck::infer::to_str::ToStr;\n+use middle::typeck::infer::{cres, infer_ctxt, ures};\n+use util::common::indent;\n \n+use core::result::{iter_vec2, map_vec2};\n use core::vec;\n-use syntax::ast::Onceness;\n+use syntax::ast::{Onceness, purity, ret_style};\n use syntax::ast;\n+use syntax::codemap::span;\n \n fn macros() { include!(\"macros.rs\"); } // FIXME(#3114): Macro import/export.\n "}, {"sha": "68adeeb82db697022c6d91296e01793cbf557a1f", "filename": "src/librustc/middle/typeck/infer/floating.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Ffloating.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Ffloating.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Ffloating.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -14,9 +14,10 @@ Code related to floating-point type inference.\n \n */\n \n+use core::prelude::*;\n \n+use middle::ty::{get, ty_float};\n use middle::ty;\n-use middle::ty::ty_float;\n use middle::typeck::infer::to_str::ToStr;\n \n use core::uint;"}, {"sha": "62be4488796c073f0ba229bd226f9b03c920f740", "filename": "src/librustc/middle/typeck/infer/glb.rs", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fglb.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fglb.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fglb.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,17 +8,21 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n use middle::ty;\n use middle::typeck::infer::combine::*;\n use middle::typeck::infer::lattice::*;\n+use middle::typeck::infer::glb::Glb;\n+use middle::typeck::infer::lub::Lub;\n use middle::typeck::infer::sub::Sub;\n use middle::typeck::infer::to_str::ToStr;\n+use syntax::ast::{Many, Once, extern_fn, impure_fn, m_const, m_imm, m_mutbl};\n+use syntax::ast::{noreturn, pure_fn, ret_style, return_val, unsafe_fn};\n+use util::ppaux::mt_to_str;\n \n use std::list;\n \n-use syntax::ast::{Many, Once};\n-\n enum Glb = combine_fields;  // \"greatest lower bound\" (common subtype)\n \n impl Glb: combine {"}, {"sha": "aa67c1371f91771edc0e2513046528c16b5d01c1", "filename": "src/librustc/middle/typeck/infer/integral.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fintegral.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fintegral.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fintegral.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -14,6 +14,9 @@ Code related to integral type inference.\n \n */\n \n+use core::prelude::*;\n+\n+use middle::ty::{get, ty_int, ty_uint};\n use middle::ty;\n use middle::typeck::infer::to_str::ToStr;\n "}, {"sha": "47343f8b48bb58b3d6a0b5477fa6d0822f2a836b", "filename": "src/librustc/middle/typeck/infer/lattice.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Flattice.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Flattice.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Flattice.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,9 +8,14 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n+use middle::ty::TyVar;\n use middle::ty;\n+use middle::typeck::infer::*;\n use middle::typeck::infer::combine::*;\n+use middle::typeck::infer::glb::Glb;\n+use middle::typeck::infer::lub::Lub;\n use middle::typeck::infer::unify::*;\n use middle::typeck::infer::to_str::ToStr;\n "}, {"sha": "d478e8d9b920d334d19b6059121b10ad3e794848", "filename": "src/librustc/middle/typeck/infer/lub.rs", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Flub.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Flub.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Flub.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,15 +8,21 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n+use middle::ty::RegionVid;\n use middle::ty;\n use middle::typeck::infer::combine::*;\n+use middle::typeck::infer::glb::Glb;\n use middle::typeck::infer::lattice::*;\n use middle::typeck::infer::sub::Sub;\n use middle::typeck::infer::to_str::ToStr;\n+use middle::typeck::isr_alist;\n+use util::ppaux::mt_to_str;\n \n use std::list;\n-use syntax::ast::{Many, Once};\n+use syntax::ast::{Many, Once, extern_fn, m_const, impure_fn, noreturn};\n+use syntax::ast::{pure_fn, ret_style, return_val, unsafe_fn};\n \n fn macros() { include!(\"macros.rs\"); } // FIXME(#3114): Macro import/export.\n "}, {"sha": "51e0a5186e8313a83c2be77544086028dbdf71c6", "filename": "src/librustc/middle/typeck/infer/mod.rs", "status": "modified", "additions": 16, "deletions": 3, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fmod.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -259,6 +259,8 @@ section on \"Type Combining\" below for details.\n #[warn(deprecated_mode)];\n #[warn(deprecated_pattern)];\n \n+use core::prelude::*;\n+\n use middle::ty::{TyVid, IntVid, FloatVid, RegionVid, vid};\n use middle::ty::{mk_fn, type_is_bot};\n use middle::ty::{ty_int, ty_uint, get, terr_fn, TyVar, IntVar, FloatVar};\n@@ -280,21 +282,25 @@ use middle::typeck::infer::resolve::{resolver};\n use middle::typeck::infer::sub::Sub;\n use middle::typeck::infer::to_str::ToStr;\n use middle::typeck::infer::unify::{vals_and_bindings, root};\n+use middle::typeck::isr_alist;\n use util::common::{indent, indenter};\n-use util::ppaux::{ty_to_str, mt_to_str};\n+use util::ppaux::{bound_region_to_str, ty_to_str, mt_to_str};\n \n use core::cmp::Eq;\n use core::dvec::DVec;\n use core::result::{Result, Ok, Err, map_vec, map_vec2, iter_vec2};\n use core::result;\n use core::vec;\n+use std::list::Nil;\n use std::map::HashMap;\n use std::smallintmap;\n use syntax::ast::{ret_style, purity};\n use syntax::ast::{m_const, m_imm, m_mutbl};\n use syntax::ast::{unsafe_fn, impure_fn, pure_fn, extern_fn};\n+use syntax::ast;\n use syntax::ast_util::dummy_sp;\n-use syntax::{ast, ast_util};\n+use syntax::ast_util;\n+use syntax::codemap::span;\n \n export infer_ctxt;\n export new_infer_ctxt;\n@@ -325,6 +331,13 @@ export resolve;\n export sub;\n export to_str;\n export unify;\n+export uok;\n+export cyclic_ty, unresolved_ty, region_var_bound_by_region_var;\n+export bound, bounds;\n+export ures;\n+export ares;\n+export infer_ctxt;\n+export fixup_err;\n \n #[legacy_exports]\n mod assignment;\n@@ -557,7 +570,7 @@ impl<T:Copy Eq> cres<T>: CresCompare<T> {\n     }\n }\n \n-fn uok() -> ures {\n+pub fn uok() -> ures {\n     Ok(())\n }\n "}, {"sha": "0d9c90e454ca2b6f6178abd12c874f4ec416bd7c", "filename": "src/librustc/middle/typeck/infer/region_inference.rs", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fregion_inference.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fregion_inference.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fregion_inference.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -539,13 +539,16 @@ more convincing in the future.\n #[warn(deprecated_mode)];\n #[warn(deprecated_pattern)];\n \n+use core::prelude::*;\n+\n use middle::region::is_subregion_of;\n use middle::region;\n use middle::ty;\n-use middle::ty::{Region, RegionVid, re_static, re_infer, re_free, re_bound};\n-use middle::ty::{re_scope, ReVar, ReSkolemized, br_fresh};\n+use middle::ty::{Region, RegionVid, br_fresh, re_bound, re_free, re_infer};\n+use middle::ty::{re_scope, re_static, ReVar, ReSkolemized};\n+use middle::typeck::infer::cres;\n use middle::typeck::infer::to_str::ToStr;\n-use syntax::codemap;\n+use util::common::indenter;\n use util::ppaux::note_and_explain_region;\n \n use core::cmp;\n@@ -558,6 +561,8 @@ use result::{Ok, Err};\n use std::map::HashMap;\n use std::cell::{Cell, empty_cell};\n use std::list::{List, Nil, Cons};\n+use syntax::codemap::span;\n+use syntax::codemap;\n \n export RegionVarBindings;\n export make_subregion;"}, {"sha": "68e589cab2768e819d670f773f2528697c5855a4", "filename": "src/librustc/middle/typeck/infer/resolve.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fresolve.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fresolve.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fresolve.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -46,13 +46,21 @@\n // future).  If you want to resolve everything but one type, you are\n // probably better off writing `resolve_all - resolve_ivar`.\n \n+use core::prelude::*;\n \n+use middle::ty::{FloatVar, FloatVid, IntVar, IntVid, RegionVid, TyVar, TyVid};\n+use middle::ty::{type_is_bot};\n use middle::ty;\n+use middle::typeck::infer::{cyclic_ty, fixup_err, fres, infer_ctxt};\n+use middle::typeck::infer::{region_var_bound_by_region_var, unresolved_ty};\n use middle::typeck::infer::floating::*;\n use middle::typeck::infer::floating;\n use middle::typeck::infer::integral::*;\n use middle::typeck::infer::integral;\n use middle::typeck::infer::to_str::ToStr;\n+use middle::typeck::infer::unify::root;\n+use util::common::indent;\n+use util::ppaux::ty_to_str;\n \n use core::uint;\n use core::vec;"}, {"sha": "79405e955f5997475770a62f96930474ec5648e7", "filename": "src/librustc/middle/typeck/infer/sub.rs", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fsub.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fsub.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fsub.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,13 +8,22 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n use middle::ty;\n+use middle::typeck::check::regionmanip::replace_bound_regions_in_fn_ty;\n use middle::typeck::infer::combine::*;\n+use middle::typeck::infer::cres;\n+use middle::typeck::infer::glb::Glb;\n+use middle::typeck::infer::infer_ctxt;\n+use middle::typeck::infer::lub::Lub;\n use middle::typeck::infer::to_str::ToStr;\n use middle::typeck::infer::unify::*;\n+use util::ppaux::bound_region_to_str;\n \n+use std::list::Nil;\n use std::list;\n+use syntax::ast::{m_const, purity, ret_style};\n \n fn macros() { include!(\"macros.rs\"); } // FIXME(#3114): Macro import/export.\n "}, {"sha": "5f85d6c4268e2ce0d2b1a362fd42f5e789bc8343", "filename": "src/librustc/middle/typeck/infer/test.rs", "status": "modified", "additions": 15, "deletions": 13, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Ftest.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -16,22 +16,24 @@ Note: This module is only compiled when doing unit testing.\n \n */\n \n-use dvec::DVec;\n-use std::getopts;\n-use std::map::HashMap;\n-use std::getopts;\n-use std::getopts::{opt_present};\n-use std::getopts::groups;\n-use std::getopts::groups::{optopt, optmulti, optflag, optflagopt, getopts};\n-use driver::driver::{optgroups, build_session_options, build_session,\n-                     str_input, build_configuration};\n+use core::prelude::*;\n+\n use driver::diagnostic;\n-use syntax::{ast, attr, parse};\n-use syntax::parse::parse_crate_from_source_str;\n-use middle::lang_items::LanguageItems;\n+use driver::driver::{optgroups, build_session_options, build_session};\n+use driver::driver::{str_input, build_configuration};\n+use middle::lang_items::{LanguageItems, language_items};\n+use middle::ty::{FnTyBase, FnMeta, FnSig};\n use util::ppaux::ty_to_str;\n+\n+use std::getopts::groups::{optopt, optmulti, optflag, optflagopt, getopts};\n+use std::getopts::groups;\n+use std::getopts::{opt_present};\n+use std::getopts;\n+use std::getopts;\n+use std::map::HashMap;\n use syntax::ast_util::dummy_sp;\n-use middle::ty::{FnTyBase, FnMeta, FnSig};\n+use syntax::parse::parse_crate_from_source_str;\n+use syntax::{ast, attr, parse};\n \n struct Env {\n     crate: @ast::crate,"}, {"sha": "0a1647eb09ad565c5474e0ce10db8655911bd6c7", "filename": "src/librustc/middle/typeck/infer/to_str.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fto_str.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fto_str.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fto_str.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,11 +8,16 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n+use middle::ty::vid;\n use middle::ty;\n-use middle::typeck::infer::integral::int_ty_set;\n+use middle::typeck::infer::{bound, bounds};\n use middle::typeck::infer::floating::float_ty_set;\n+use middle::typeck::infer::infer_ctxt;\n+use middle::typeck::infer::integral::int_ty_set;\n use middle::typeck::infer::unify::{redirect, root, var_value};\n+use util::ppaux::{mt_to_str, ty_to_str};\n use util::ppaux;\n \n use core::uint;"}, {"sha": "633ff706a26e626e34eb31615c185eb10a3e2a26", "filename": "src/librustc/middle/typeck/infer/unify.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Funify.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Funify.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Funify.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,14 +8,19 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n+use middle::ty::vid;\n use middle::ty;\n+use middle::typeck::infer::{bound, bounds, cres, uok, ures};\n use middle::typeck::infer::combine::combine;\n use middle::typeck::infer::floating::*;\n use middle::typeck::infer::floating;\n+use middle::typeck::infer::infer_ctxt;\n use middle::typeck::infer::integral::*;\n use middle::typeck::infer::integral;\n use middle::typeck::infer::to_str::ToStr;\n+use util::common::{indent, indenter};\n \n use core::result;\n use std::smallintmap::SmallIntMap;"}, {"sha": "f922e83a1643ab5b1b44e87fb5d0a1d7a4486c9e", "filename": "src/librustc/middle/typeck/mod.rs", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fmod.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -50,6 +50,8 @@ independently:\n \n #[legacy_exports];\n \n+use core::prelude::*;\n+\n use metadata::csearch;\n use middle::pat_util::{pat_id_map, PatIdMap};\n use middle::resolve;\n@@ -99,6 +101,12 @@ export infer;\n export collect;\n export coherence;\n export deriving;\n+export crate_ctxt;\n+export write_ty_to_tcx, write_substs_to_tcx;\n+export no_params;\n+export isr_alist;\n+export require_same_types;\n+export lookup_def_ccx, lookup_def_tcx;\n \n #[legacy_exports]\n #[path = \"check/mod.rs\"]\n@@ -225,7 +233,7 @@ struct crate_ctxt__ {\n     tcx: ty::ctxt\n }\n \n-enum crate_ctxt {\n+pub enum crate_ctxt {\n     crate_ctxt_(crate_ctxt__)\n }\n "}, {"sha": "f1655f2a363b1a23d42ce940c426333fe0412aa7", "filename": "src/librustc/middle/typeck/rscope.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Frscope.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Fmiddle%2Ftypeck%2Frscope.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Frscope.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,12 +8,14 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n use middle::ty;\n \n use core::result::Result;\n use core::result;\n use syntax::ast;\n+use syntax::codemap::span;\n use syntax::parse::token::special_idents;\n \n trait region_scope {"}, {"sha": "1a556c32bf3d13835daa5565d67f78d756eb0e66", "filename": "src/librustc/util/common.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Futil%2Fcommon.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Futil%2Fcommon.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Futil%2Fcommon.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n use syntax::ast;\n use syntax::codemap::{span};"}, {"sha": "ebb75de8626de764d92f2bdb184ba3c9b3a4968e", "filename": "src/librustc/util/ppaux.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Futil%2Fppaux.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustc%2Futil%2Fppaux.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Futil%2Fppaux.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n \n use middle::ty;\n use middle::ty::{arg, canon_mode};"}, {"sha": "99cf301f18248d811d29d4e32662ee2f119927f6", "filename": "src/librustdoc/astsrv.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fastsrv.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fastsrv.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fastsrv.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -17,6 +17,8 @@ query AST-related information, shielding the rest of Rustdoc from its\n non-sendableness.\n */\n \n+use core::prelude::*;\n+\n use parse;\n use util;\n "}, {"sha": "aa6e40ab1d1efc9f231c4df2784276e4ae140533", "filename": "src/librustdoc/attr_parser.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fattr_parser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fattr_parser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fattr_parser.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -15,6 +15,8 @@ The attribute parser provides methods for pulling documentation out of\n an AST's attributes.\n */\n \n+use core::prelude::*;\n+\n use core::str;\n use core::tuple;\n use core::vec;\n@@ -29,12 +31,12 @@ pub type CrateAttrs = {\n \n #[cfg(test)]\n mod test {\n-    #[legacy_exports];\n-\n     use syntax::ast;\n     use syntax;\n \n-    fn parse_attributes(+source: ~str) -> ~[ast::attribute] {\n+    use core::option::None;\n+\n+    pub fn parse_attributes(+source: ~str) -> ~[ast::attribute] {\n         use syntax::parse;\n         use syntax::parse::parser;\n         use syntax::parse::attr::parser_attr;"}, {"sha": "530f9f226664e5966d885af104eb8814148f23e4", "filename": "src/librustdoc/attr_pass.rs", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fattr_pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fattr_pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fattr_pass.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -16,13 +16,16 @@ corresponding AST nodes. The information gathered here is the basis\n of the natural-language documentation for a crate.\n */\n \n+use core::prelude::*;\n+\n use astsrv;\n use attr_parser;\n use doc::ItemUtils;\n use doc;\n use extract::to_str;\n use fold::Fold;\n use fold;\n+use pass::Pass;\n \n use core::option;\n use core::vec;\n@@ -38,7 +41,7 @@ pub fn mk_pass() -> Pass {\n     }\n }\n \n-fn run(\n+pub fn run(\n     srv: astsrv::Srv,\n     +doc: doc::Doc\n ) -> doc::Doc {\n@@ -309,13 +312,12 @@ fn should_extract_impl_method_docs() {\n \n #[cfg(test)]\n mod test {\n-    #[legacy_exports];\n-\n     use astsrv;\n+    use attr_pass::run;\n     use doc;\n     use extract;\n \n-    fn mk_doc(source: ~str) -> doc::Doc {\n+    pub fn mk_doc(source: ~str) -> doc::Doc {\n         do astsrv::from_str(source) |srv| {\n             let doc = extract::from_srv(srv, ~\"\");\n             run(srv, doc)"}, {"sha": "ebd5c047df372433a46f0af1f687fefd1796d777", "filename": "src/librustdoc/config.rs", "status": "modified", "additions": 10, "deletions": 5, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fconfig.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n+\n use core::cmp;\n use core::os;\n use core::result;\n@@ -56,7 +58,7 @@ pub type Config = {\n     pandoc_cmd: Option<~str>\n };\n \n-impl Config: Clone {\n+pub impl Config: Clone {\n     fn clone(&self) -> Config { copy *self }\n }\n \n@@ -105,7 +107,7 @@ pub fn default_config(input_crate: &Path) -> Config {\n type ProgramOutput = fn~((&str), (&[~str])) ->\n     {status: int, out: ~str, err: ~str};\n \n-fn mock_program_output(_prog: &str, _args: &[~str]) -> {\n+pub fn mock_program_output(_prog: &str, _args: &[~str]) -> {\n     status: int, out: ~str, err: ~str\n } {\n     {\n@@ -119,7 +121,7 @@ pub fn parse_config(args: &[~str]) -> Result<Config, ~str> {\n     parse_config_(args, run::program_output)\n }\n \n-fn parse_config_(\n+pub fn parse_config_(\n     args: &[~str],\n     +program_output: ProgramOutput\n ) -> Result<Config, ~str> {\n@@ -288,8 +290,11 @@ fn should_error_with_no_pandoc() {\n \n #[cfg(test)]\n mod test {\n-    #[legacy_exports];\n-    fn parse_config(args: &[~str]) -> Result<Config, ~str> {\n+    use config::{Config, mock_program_output, parse_config_};\n+\n+    use core::result::Result;\n+\n+    pub fn parse_config(args: &[~str]) -> Result<Config, ~str> {\n         parse_config_(args, mock_program_output)\n     }\n }"}, {"sha": "bb8f37dc7ade9a2fbccc895cd95cb3551b93728a", "filename": "src/librustdoc/demo.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fdemo.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fdemo.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fdemo.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -21,6 +21,8 @@\n  * tests on this file\n  */\n \n+use core::prelude::*;\n+\n /// The base price of a muffin on a non-holiday\n const price_of_a_muffin: float = 70f;\n "}, {"sha": "97caa71d692a0699e1b60c3a4f0acc361783d4fd", "filename": "src/librustdoc/desc_to_brief_pass.rs", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fdesc_to_brief_pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fdesc_to_brief_pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fdesc_to_brief_pass.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -15,11 +15,14 @@ If the first paragraph of a long description is short enough then it\n is interpreted as the brief description.\n */\n \n+use core::prelude::*;\n+\n use astsrv;\n use doc::ItemUtils;\n use doc;\n use fold::Fold;\n use fold;\n+use pass::Pass;\n \n use core::str;\n use core::vec;\n@@ -32,7 +35,7 @@ pub fn mk_pass() -> Pass {\n     }\n }\n \n-fn run(\n+pub fn run(\n     _srv: astsrv::Srv,\n     +doc: doc::Doc\n ) -> doc::Doc {\n@@ -98,15 +101,14 @@ fn should_promote_impl_method_desc() {\n }\n \n #[cfg(test)]\n-mod test {\n-    #[legacy_exports];\n-\n+pub mod test {\n     use astsrv;\n     use attr_pass;\n+    use desc_to_brief_pass::run;\n     use doc;\n     use extract;\n \n-    fn mk_doc(source: ~str) -> doc::Doc {\n+    pub fn mk_doc(source: ~str) -> doc::Doc {\n         do astsrv::from_str(source) |srv| {\n             let doc = extract::from_srv(srv, ~\"\");\n             let doc = (attr_pass::mk_pass().f)(srv, doc);"}, {"sha": "18742720b90c985528af26b03224d621947b1ce5", "filename": "src/librustdoc/doc.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fdoc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fdoc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fdoc.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -10,7 +10,10 @@\n \n //! The document model\n \n+use core::prelude::*;\n+\n use doc;\n+use pass::Pass;\n \n use core::cmp;\n use core::option;"}, {"sha": "6e000444865f15aee8ba354123669296e3ad1667", "filename": "src/librustdoc/escape_pass.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fescape_pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fescape_pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fescape_pass.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -10,6 +10,7 @@\n \n //! Escapes text sequences\n \n+use pass::Pass;\n use text_pass;\n \n use core::str;"}, {"sha": "444949cfb7f0ccde1b1722e71a32138468f5e297", "filename": "src/librustdoc/extract.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fextract.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fextract.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fextract.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -10,6 +10,8 @@\n \n //! Converts the Rust AST to the rustdoc document model\n \n+use core::prelude::*;\n+\n use astsrv;\n use doc::ItemUtils;\n use doc;\n@@ -346,6 +348,7 @@ mod test {\n \n     use astsrv;\n     use doc;\n+    use extract::{extract, from_srv};\n     use parse;\n \n     use core::vec;"}, {"sha": "29c53e0af2555bcf8e6ecd8870cd8832b5115fcb", "filename": "src/librustdoc/fold.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Ffold.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Ffold.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Ffold.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,10 +8,13 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n+\n use astsrv;\n use doc;\n use extract;\n use parse;\n+use pass::Pass;\n \n use core::vec;\n use std::par;"}, {"sha": "881352c9c77773f8d55ee94bcfe226545b683925", "filename": "src/librustdoc/markdown_index_pass.rs", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fmarkdown_index_pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fmarkdown_index_pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fmarkdown_index_pass.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -10,6 +10,8 @@\n \n //! Build indexes as appropriate for the markdown pass\n \n+use core::prelude::*;\n+\n use astsrv;\n use config;\n use doc::ItemUtils;\n@@ -18,6 +20,7 @@ use fold::Fold;\n use fold;\n use markdown_pass;\n use markdown_writer;\n+use pass::Pass;\n \n use core::str;\n use std::par;\n@@ -31,7 +34,7 @@ pub fn mk_pass(+config: config::Config) -> Pass {\n     }\n }\n \n-fn run(\n+pub fn run(\n     _srv: astsrv::Srv,\n     +doc: doc::Doc,\n     +config: config::Config\n@@ -251,17 +254,19 @@ fn should_index_foreign_mod_contents() {\n \n #[cfg(test)]\n mod test {\n-    #[legacy_exports];\n-\n     use astsrv;\n     use attr_pass;\n     use config;\n     use desc_to_brief_pass;\n     use doc;\n     use extract;\n+    use markdown_index_pass::run;\n     use path_pass;\n \n-    fn mk_doc(output_style: config::OutputStyle, +source: ~str) -> doc::Doc {\n+    use core::path::Path;\n+\n+    pub fn mk_doc(output_style: config::OutputStyle, +source: ~str)\n+               -> doc::Doc {\n         do astsrv::from_str(source) |srv| {\n             let config = {\n                 output_style: output_style,"}, {"sha": "ad100b9b4e89e45a1cd3834ca391481fb299fcec", "filename": "src/librustdoc/markdown_pass.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fmarkdown_pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fmarkdown_pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fmarkdown_pass.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -10,6 +10,8 @@\n \n //! Generate markdown from a document tree\n \n+use core::prelude::*;\n+\n use astsrv;\n use attr_pass;\n use config;\n@@ -25,6 +27,7 @@ use markdown_writer::WriterUtils;\n use markdown_writer::WriterFactory;\n use markdown_writer;\n use page_pass;\n+use pass::Pass;\n use path_pass;\n use sectionalize_pass;\n use sort_pass;\n@@ -111,7 +114,7 @@ type Ctxt = {\n     w: Writer\n };\n \n-fn write_markdown(\n+pub fn write_markdown(\n     +doc: doc::Doc,\n     +writer_factory: WriterFactory\n ) {\n@@ -838,6 +841,7 @@ mod test {\n     use doc;\n     use extract;\n     use markdown_index_pass;\n+    use markdown_pass::{mk_pass, write_markdown};\n     use markdown_writer;\n     use path_pass;\n     use sectionalize_pass;\n@@ -846,6 +850,7 @@ mod test {\n     use unindent_pass;\n \n     use core::oldcomm;\n+    use core::path::Path;\n     use core::str;\n \n     fn render(+source: ~str) -> ~str {"}, {"sha": "b701b674083bc96e19d007de2a5b474f50beeb0c", "filename": "src/librustdoc/markdown_writer.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fmarkdown_writer.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fmarkdown_writer.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fmarkdown_writer.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,9 +8,12 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n+\n use config;\n use doc::ItemUtils;\n use doc;\n+use pass::Pass;\n \n use core::io::ReaderUtil;\n use core::io;"}, {"sha": "e099beef7b6c655996aaf7c05407a6c62d94ae34", "filename": "src/librustdoc/page_pass.rs", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fpage_pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fpage_pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fpage_pass.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -15,12 +15,15 @@ Each page corresponds is a logical section. There may be pages for\n individual modules, pages for the crate, indexes, etc.\n */\n \n+use core::prelude::*;\n+\n use astsrv;\n use config;\n use doc::{ItemUtils, PageUtils};\n use doc;\n use fold::Fold;\n use fold;\n+use pass::Pass;\n use sort_pass;\n use util::NominalOp;\n use util;\n@@ -39,7 +42,7 @@ pub fn mk_pass(output_style: config::OutputStyle) -> Pass {\n     }\n }\n \n-fn run(\n+pub fn run(\n     _srv: astsrv::Srv,\n     +doc: doc::Doc,\n     output_style: config::OutputStyle\n@@ -182,14 +185,13 @@ fn should_remove_foreign_mods_from_containing_mods() {\n \n #[cfg(test)]\n mod test {\n-    #[legacy_exports];\n-\n     use astsrv;\n     use config;\n     use doc;\n     use extract;\n+    use page_pass::run;\n \n-    fn mk_doc_(\n+    pub fn mk_doc_(\n         output_style: config::OutputStyle,\n         source: ~str\n     ) -> doc::Doc {\n@@ -199,7 +201,7 @@ mod test {\n         }\n     }\n \n-    fn mk_doc(source: ~str) -> doc::Doc {\n+    pub fn mk_doc(source: ~str) -> doc::Doc {\n         mk_doc_(config::DocPerMod, source)\n     }\n }"}, {"sha": "48eb3d47a167ac33728c6e3927e035256da2d48f", "filename": "src/librustdoc/parse.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fparse.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fparse.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fparse.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -10,6 +10,8 @@\n \n //! AST-parsing helpers\n \n+use core::prelude::*;\n+\n use rustc::driver::driver::{file_input, str_input};\n use rustc::driver::driver;\n use rustc::driver::session;"}, {"sha": "e6b85ca9d64cfec5d7ab9e95b1365f72f8722a26", "filename": "src/librustdoc/pass.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fpass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fpass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fpass.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,9 +8,12 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n+\n use astsrv;\n use doc;\n use extract;\n+use time;\n \n use core::vec;\n "}, {"sha": "01ea26e1ad0e303d234388ce726f6ed3614eef8a", "filename": "src/librustdoc/path_pass.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fpath_pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fpath_pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fpath_pass.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -10,12 +10,15 @@\n \n //! Records the full path to items\n \n+use core::prelude::*;\n+\n use astsrv;\n use doc::ItemUtils;\n use doc;\n use extract;\n use fold::Fold;\n use fold;\n+use pass::Pass;\n \n use syntax::ast;\n "}, {"sha": "c87cc6f7d8c6232834aa35193d8610f27ee7c389", "filename": "src/librustdoc/prune_hidden_pass.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fprune_hidden_pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fprune_hidden_pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fprune_hidden_pass.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -16,6 +16,7 @@ use doc::ItemUtils;\n use doc;\n use fold::Fold;\n use fold;\n+use pass::Pass;\n \n use core::vec;\n use std::map::HashMap;\n@@ -27,7 +28,7 @@ pub fn mk_pass() -> Pass {\n     }\n }\n \n-fn run(srv: astsrv::Srv, +doc: doc::Doc) -> doc::Doc {\n+pub fn run(srv: astsrv::Srv, +doc: doc::Doc) -> doc::Doc {\n     let fold = Fold {\n         fold_mod: fold_mod,\n         .. fold::default_any_fold(srv)\n@@ -69,14 +70,13 @@ fn should_prune_hidden_items() {\n }\n \n #[cfg(test)]\n-mod test {\n-    #[legacy_exports];\n-\n+pub mod test {\n     use astsrv;\n     use doc;\n     use extract;\n+    use prune_hidden_pass::run;\n \n-    fn mk_doc(source: ~str) -> doc::Doc {\n+    pub fn mk_doc(source: ~str) -> doc::Doc {\n         do astsrv::from_str(source) |srv| {\n             let doc = extract::from_srv(srv, ~\"\");\n             run(srv, doc)"}, {"sha": "25613acbb3567c4632ae389dcc1b59bf02efdd37", "filename": "src/librustdoc/prune_private_pass.rs", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fprune_private_pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fprune_private_pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fprune_private_pass.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -12,16 +12,20 @@\n \n #[legacy_exports];\n \n+use core::prelude::*;\n+\n use astsrv;\n use doc;\n use fold::Fold;\n use fold;\n+use pass::Pass;\n \n use core::util;\n use core::vec;\n use syntax::ast;\n \n export mk_pass;\n+export run;\n \n fn mk_pass() -> Pass {\n     {\n@@ -30,7 +34,7 @@ fn mk_pass() -> Pass {\n     }\n }\n \n-fn run(srv: astsrv::Srv, +doc: doc::Doc) -> doc::Doc {\n+pub fn run(srv: astsrv::Srv, +doc: doc::Doc) -> doc::Doc {\n     let fold = Fold {\n         fold_mod: fold_mod,\n         .. fold::default_any_fold(srv)\n@@ -75,10 +79,11 @@ fn should_prune_items_without_pub_modifier() {\n }\n \n #[cfg(test)]\n-mod test {\n+pub mod test {\n     use astsrv;\n     use doc;\n     use extract;\n+    use prune_private_pass::run;\n \n     pub fn mk_doc(source: ~str) -> doc::Doc {\n         do astsrv::from_str(source) |srv| {"}, {"sha": "a9cb8aa1e5d972f2d20c4a722d09ed16c45a9bba", "filename": "src/librustdoc/sectionalize_pass.rs", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fsectionalize_pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fsectionalize_pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fsectionalize_pass.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -10,13 +10,16 @@\n \n //! Breaks rustdocs into sections according to their headers\n \n+use core::prelude::*;\n+\n use astsrv;\n use attr_pass;\n use doc::ItemUtils;\n use doc;\n use extract;\n use fold::Fold;\n use fold;\n+use pass::Pass;\n \n use core::str;\n use core::vec;\n@@ -29,7 +32,7 @@ pub fn mk_pass() -> Pass {\n     }\n }\n \n-fn run(_srv: astsrv::Srv, +doc: doc::Doc) -> doc::Doc {\n+pub fn run(_srv: astsrv::Srv, +doc: doc::Doc) -> doc::Doc {\n     let fold = Fold {\n         fold_item: fold_item,\n         fold_trait: fold_trait,\n@@ -249,15 +252,14 @@ fn should_sectionalize_impl_methods() {\n }\n \n #[cfg(test)]\n-mod test {\n-    #[legacy_exports];\n-\n+pub mod test {\n     use astsrv;\n     use attr_pass;\n     use doc;\n     use extract;\n+    use sectionalize_pass::run;\n \n-    fn mk_doc(source: ~str) -> doc::Doc {\n+    pub fn mk_doc(source: ~str) -> doc::Doc {\n         do astsrv::from_str(source) |srv| {\n             let doc = extract::from_srv(srv, ~\"\");\n             let doc = (attr_pass::mk_pass().f)(srv, doc);"}, {"sha": "9a777d79345f56883b7ede442bfdb106f1d8d7f8", "filename": "src/librustdoc/sort_item_name_pass.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fsort_item_name_pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fsort_item_name_pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fsort_item_name_pass.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -14,6 +14,7 @@ use astsrv;\n use doc::ItemUtils;\n use doc;\n use extract;\n+use pass::Pass;\n use sort_pass;\n \n pub fn mk_pass() -> Pass {"}, {"sha": "332c2082e4ba97d35cda669e8e5904ab2b774652", "filename": "src/librustdoc/sort_item_type_pass.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fsort_item_type_pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fsort_item_type_pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fsort_item_type_pass.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -10,10 +10,13 @@\n \n //! Sorts items by type\n \n+use core::prelude::*;\n+\n use astsrv;\n use doc::ItemUtils;\n use doc;\n use extract;\n+use pass::Pass;\n use sort_pass;\n \n pub fn mk_pass() -> Pass {"}, {"sha": "c6d2ab0e9ad82369aabe53e415aba4a06cf221c6", "filename": "src/librustdoc/sort_pass.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fsort_pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Fsort_pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fsort_pass.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -10,12 +10,15 @@\n \n //! A general sorting pass\n \n+use core::prelude::*;\n+\n use astsrv;\n use doc::ItemUtils;\n use doc;\n use extract;\n use fold::Fold;\n use fold;\n+use pass::Pass;\n use util::NominalOp;\n \n use std::sort;"}, {"sha": "975767727c5d3489a27584901b2f26f56c5cc7fa", "filename": "src/librustdoc/text_pass.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Ftext_pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Ftext_pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Ftext_pass.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -10,11 +10,14 @@\n \n //! Generic pass for performing an operation on all descriptions\n \n+use core::prelude::*;\n+\n use astsrv;\n use doc::ItemUtils;\n use doc;\n use fold::Fold;\n use fold;\n+use pass::Pass;\n use util::NominalOp;\n \n use std::par;\n@@ -288,18 +291,17 @@ fn should_execute_on_impl_method_section_bodies() {\n \n #[cfg(test)]\n mod test {\n-    #[legacy_exports];\n-\n     use astsrv;\n     use attr_pass;\n     use desc_to_brief_pass;\n     use doc;\n     use extract;\n     use sectionalize_pass;\n+    use text_pass::mk_pass;\n \n     use core::str;\n \n-    fn mk_doc(source: ~str) -> doc::Doc {\n+    pub fn mk_doc(source: ~str) -> doc::Doc {\n         do astsrv::from_str(source) |srv| {\n             let doc = extract::from_srv(srv, ~\"\");\n             let doc = (attr_pass::mk_pass().f)(srv, doc);"}, {"sha": "4ac8b51a6bcf70ef8893099a970d6cc9de79a336", "filename": "src/librustdoc/trim_pass.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Ftrim_pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Ftrim_pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Ftrim_pass.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -17,8 +17,10 @@ is interpreted as the brief description.\n \n use doc::ItemUtils;\n use doc;\n+use pass::Pass;\n use text_pass;\n \n+use core::option::Some;\n use core::str;\n \n pub fn mk_pass() -> Pass {\n@@ -35,14 +37,13 @@ fn should_trim_text() {\n \n #[cfg(test)]\n mod test {\n-    #[legacy_exports];\n-\n     use astsrv;\n     use attr_pass;\n     use doc;\n     use extract;\n+    use trim_pass::mk_pass;\n \n-    fn mk_doc(source: ~str) -> doc::Doc {\n+    pub fn mk_doc(source: ~str) -> doc::Doc {\n         do astsrv::from_str(source) |srv| {\n             let doc = extract::from_srv(srv, ~\"\");\n             let doc = (attr_pass::mk_pass().f)(srv, doc);"}, {"sha": "97d57569c731c4c1851ba9cec1bd1d015651b548", "filename": "src/librustdoc/tystr_pass.rs", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Ftystr_pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Ftystr_pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Ftystr_pass.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -10,13 +10,16 @@\n \n //! Pulls type information out of the AST and attaches it to the document\n \n+use core::prelude::*;\n+\n use astsrv;\n use doc::ItemUtils;\n use doc;\n use extract::to_str;\n use extract;\n use fold::Fold;\n use fold;\n+use pass::Pass;\n \n use core::vec;\n use std::map::HashMap;\n@@ -32,7 +35,7 @@ pub fn mk_pass() -> Pass {\n     }\n }\n \n-fn run(\n+pub fn run(\n     srv: astsrv::Srv,\n     +doc: doc::Doc\n ) -> doc::Doc {\n@@ -405,14 +408,13 @@ fn should_not_serialize_struct_attrs() {\n }\n \n #[cfg(test)]\n-mod test {\n-    #[legacy_exports];\n-\n+pub mod test {\n     use astsrv;\n     use doc;\n     use extract;\n+    use tystr_pass::run;\n \n-    fn mk_doc(source: ~str) -> doc::Doc {\n+    pub fn mk_doc(source: ~str) -> doc::Doc {\n         do astsrv::from_str(source) |srv| {\n             let doc = extract::from_srv(srv, ~\"\");\n             run(srv, doc)"}, {"sha": "87c249a7a18fc5dae9c408df085eef1ca76d5462", "filename": "src/librustdoc/unindent_pass.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Funindent_pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Funindent_pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Funindent_pass.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -19,6 +19,9 @@ instances where the string containing the doc comment is opened in the\n middle of a line, and each of the following lines is indented.\n */\n \n+use core::prelude::*;\n+\n+use pass::Pass;\n use text_pass;\n \n use core::str;"}, {"sha": "48ed77099c435419705e1596702a396a02f18a44", "filename": "src/librustdoc/util.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Futil.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibrustdoc%2Futil.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Futil.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n+\n use core::oldcomm;\n use core::task;\n "}, {"sha": "3463b31c55c6d0c709189867bf8d79ec2f3e2af6", "filename": "src/libstd/arc.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Farc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Farc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Farc.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -20,6 +20,7 @@ use sync::{Mutex, mutex_with_condvars, RWlock, rwlock_with_condvars};\n \n use core::cast;\n use core::pipes;\n+use core::prelude::*;\n use core::private::{SharedMutableState, shared_mutable_state};\n use core::private::{clone_shared_mutable_state, unwrap_shared_mutable_state};\n use core::private::{get_shared_mutable_state, get_shared_immutable_state};\n@@ -470,6 +471,9 @@ impl<T: Const Owned> &RWReadMode<T> {\n mod tests {\n     #[legacy_exports];\n \n+    use core::prelude::*;\n+\n+    use arc::*;\n     use arc;\n \n     use core::oldcomm::*;"}, {"sha": "6fee82521e87f6a4c5c0bdb42c0c77451a331741", "filename": "src/libstd/arena.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Farena.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Farena.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Farena.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -42,6 +42,7 @@ use core::at_vec;\n use core::cast::reinterpret_cast;\n use core::cast;\n use core::libc::size_t;\n+use core::prelude::*;\n use core::ptr;\n use core::sys::TypeDesc;\n use core::sys;"}, {"sha": "834edc3f464e2b453354dce1e94487cc4b5bfe99", "filename": "src/libstd/bitv.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fbitv.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fbitv.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fbitv.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -11,6 +11,7 @@\n #[forbid(deprecated_mode)];\n \n use core::ops;\n+use core::prelude::*;\n use core::uint;\n use core::vec::{to_mut, from_elem};\n use core::vec;\n@@ -578,6 +579,9 @@ impl Bitv: ops::Index<uint,bool> {\n mod tests {\n     #[legacy_exports];\n \n+    use core::prelude::*;\n+\n+    use bitv::*;\n     use bitv;\n \n     use core::uint;"}, {"sha": "fe1bfa62fb1a9dc3910033381c571b438126b8f4", "filename": "src/libstd/c_vec.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fc_vec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fc_vec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fc_vec.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -40,6 +40,7 @@\n use core::libc;\n use core::oldcomm;\n use core::option;\n+use core::prelude::*;\n use core::ptr;\n use core::task;\n \n@@ -152,6 +153,10 @@ pub unsafe fn ptr<T>(t: CVec<T>) -> *mut T {\n \n #[cfg(test)]\n mod tests {\n+    use core::prelude::*;\n+\n+    use c_vec::*;\n+\n     use core::libc::*;\n     use core::libc;\n "}, {"sha": "d4077e94617a20a1209711af6f5d32ca77cf006d", "filename": "src/libstd/cell.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fcell.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fcell.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fcell.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -11,6 +11,7 @@\n #[forbid(deprecated_mode)];\n \n use core::option;\n+use core::prelude::*;\n \n /// A dynamic, mutable location.\n ///"}, {"sha": "3118a0c1ba54573e38893c5a52bd1bafb0881bad", "filename": "src/libstd/comm.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fcomm.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fcomm.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fcomm.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -20,6 +20,7 @@ Higher level communication abstractions.\n use core::pipes::{GenericChan, GenericSmartChan, GenericPort};\n use core::pipes::{Chan, Port, Selectable, Peekable};\n use core::pipes;\n+use core::prelude::*;\n \n /// An extension of `pipes::stream` that allows both sending and receiving.\n pub struct DuplexStream<T: Owned, U: Owned> {\n@@ -80,6 +81,8 @@ pub fn DuplexStream<T: Owned, U: Owned>()\n #[cfg(test)]\n mod test {\n     #[legacy_exports];\n+    use comm::DuplexStream;\n+\n     #[test]\n     fn DuplexStream1() {\n         let (left, right) = DuplexStream();"}, {"sha": "71d8743a3615402a4f5f118c107f0e2f2e083c00", "filename": "src/libstd/deque.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fdeque.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fdeque.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fdeque.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -15,6 +15,7 @@\n use core::cmp::Eq;\n use core::dvec::DVec;\n use core::dvec;\n+use core::prelude::*;\n use core::uint;\n use core::vec;\n \n@@ -131,6 +132,9 @@ pub fn create<T: Copy>() -> Deque<T> {\n \n #[cfg(test)]\n mod tests {\n+    use core::prelude::*;\n+\n+    use deque::*;\n     use deque;\n \n     #[test]"}, {"sha": "5a2fc2298ae0673c81918502bb476b34836200ce", "filename": "src/libstd/ebml.rs", "status": "modified", "additions": 15, "deletions": 3, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Febml.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Febml.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Febml.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -14,6 +14,7 @@ use serialize;\n \n use core::io;\n use core::ops;\n+use core::prelude::*;\n use core::str;\n use core::vec;\n \n@@ -33,18 +34,18 @@ struct EbmlState {\n     data_pos: uint,\n }\n \n-struct Doc {\n+pub struct Doc {\n     data: @~[u8],\n     start: uint,\n     end: uint,\n }\n \n-struct TaggedDoc {\n+pub struct TaggedDoc {\n     tag: uint,\n     doc: Doc,\n }\n \n-enum EbmlEncoderTag {\n+pub enum EbmlEncoderTag {\n     EsUint, EsU64, EsU32, EsU16, EsU8,\n     EsInt, EsI64, EsI32, EsI16, EsI8,\n     EsBool,\n@@ -60,11 +61,16 @@ enum EbmlEncoderTag {\n // --------------------------------------\n \n pub mod reader {\n+    use ebml::{Doc, EbmlEncoderTag, EsBool, EsEnum, EsEnumBody, EsEnumVid};\n+    use ebml::{EsF32, EsF64, EsFloat, EsI16, EsI32, EsI64, EsI8, EsInt};\n+    use ebml::{EsLabel, EsOpaque, EsStr, EsU16, EsU32, EsU64, EsU8, EsUint};\n+    use ebml::{EsVec, EsVecElt, EsVecLen, TaggedDoc};\n     use serialize;\n \n     use core::int;\n     use core::io;\n     use core::ops;\n+    use core::prelude::*;\n     use core::str;\n     use core::vec;\n \n@@ -398,6 +404,11 @@ pub mod reader {\n }\n \n pub mod writer {\n+    use ebml::{Doc, EbmlEncoderTag, EsBool, EsEnum, EsEnumBody, EsEnumVid};\n+    use ebml::{EsF32, EsF64, EsFloat, EsI16, EsI32, EsI64, EsI8, EsInt};\n+    use ebml::{EsLabel, EsOpaque, EsStr, EsU16, EsU32, EsU64, EsU8, EsUint};\n+    use ebml::{EsVec, EsVecElt, EsVecLen, TaggedDoc};\n+\n     use core::io;\n     use core::str;\n     use core::vec;\n@@ -668,6 +679,7 @@ mod tests {\n     use serialize;\n \n     use core::io;\n+    use core::option::{None, Option, Some};\n \n     #[test]\n     fn test_option_int() {"}, {"sha": "07201a1180d30bc13fe0e1a7fbf57ca00146b9e2", "filename": "src/libstd/flatpipes.rs", "status": "modified", "additions": 19, "deletions": 4, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fflatpipes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fflatpipes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fflatpipes.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -42,6 +42,7 @@ use core::io;\n use core::pipes::GenericChan;\n use core::pipes::GenericPort;\n use core::pipes;\n+use core::prelude::*;\n use core::sys::size_of;\n use core::uint;\n use core::vec;\n@@ -160,15 +161,16 @@ POD are not equivelant.\n \n */\n pub mod pod {\n-\n-    use core::io::{Reader, Writer};\n-    use core::pipes::{Port, Chan};\n-    use core::pipes;\n     use flatpipes::flatteners::{PodUnflattener, PodFlattener};\n     use flatpipes::bytepipes::{ReaderBytePort, WriterByteChan};\n     use flatpipes::bytepipes::{PipeBytePort, PipeByteChan};\n     use flatpipes::{FlatPort, FlatChan};\n \n+    use core::io::{Reader, Writer};\n+    use core::pipes::{Port, Chan};\n+    use core::pipes;\n+    use core::prelude::*;\n+\n     pub type ReaderPort<T: Copy Owned, R> =\n         FlatPort<T, PodUnflattener<T>, ReaderBytePort<R>>;\n     pub type WriterChan<T: Copy Owned, W> =\n@@ -326,12 +328,14 @@ pub impl<T,F:Flattener<T>,C:ByteChan> FlatChan<T, F, C> {\n \n pub mod flatteners {\n     use ebml;\n+    use flatpipes::{ByteChan, BytePort, Flattener, Unflattener};\n     use flatpipes::util::BufReader;\n     use json;\n     use serialize::{Encoder, Decoder, Encodable, Decodable};\n \n     use core::cast;\n     use core::io::{Writer, Reader, BytesWriter, ReaderUtil};\n+    use core::prelude::*;\n     use core::ptr;\n     use core::sys::size_of;\n     use core::vec;\n@@ -496,9 +500,12 @@ pub mod flatteners {\n }\n \n pub mod bytepipes {\n+    use flatpipes::{ByteChan, BytePort};\n+\n     use core::io::{Writer, Reader, ReaderUtil};\n     use core::pipes::{Port, Chan};\n     use core::pipes;\n+    use core::prelude::*;\n \n     pub struct ReaderBytePort<R: Reader> {\n         reader: R\n@@ -622,6 +629,7 @@ pub mod bytepipes {\n mod util {\n     use core::io::{Reader, BytesReader};\n     use core::io;\n+    use core::prelude::*;\n \n     pub struct BufReader {\n         buf: ~[u8],\n@@ -675,6 +683,7 @@ mod util {\n \n #[cfg(test)]\n mod test {\n+    use core::prelude::*;\n \n     // XXX: json::Decoder doesn't work because of problems related to\n     // its interior pointers\n@@ -688,13 +697,15 @@ mod test {\n     use flatpipes::pod;\n     use flatpipes::serial;\n     use flatpipes::util::BufReader;\n+    use flatpipes::{BytePort, FlatChan, FlatPort};\n     use net::ip;\n     use net::tcp::TcpSocketBuf;\n \n     use core::dvec::DVec;\n     use core::int;\n     use core::io::BytesReader;\n     use core::io;\n+    use core::prelude::*;\n     use core::result;\n     use core::sys;\n     use core::task;\n@@ -918,6 +929,10 @@ mod test {\n     // Tests that the different backends behave the same when the\n     // binary streaming protocol is broken\n     mod broken_protocol {\n+        use core::prelude::*;\n+\n+        use flatpipes::{BytePort, FlatPort};\n+        use flatpipes::flatteners::PodUnflattener;\n         use flatpipes::pod;\n         use flatpipes::util::BufReader;\n "}, {"sha": "e0d4b95a7e425e867df4351a0c121cc917f098e8", "filename": "src/libstd/fun_treemap.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Ffun_treemap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Ffun_treemap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Ffun_treemap.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -23,6 +23,7 @@\n \n use core::cmp::{Eq, Ord};\n use core::option::{Some, None};\n+use core::prelude::*;\n \n pub type Treemap<K, V> = @TreeNode<K, V>;\n "}, {"sha": "6a34c29b51662120f582182bd289ec6d1e80a79e", "filename": "src/libstd/future.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Ffuture.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Ffuture.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Ffuture.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -26,6 +26,7 @@ use core::cast;\n use core::either::Either;\n use core::option;\n use core::pipes::{recv, oneshot, ChanOne, PortOne, send_one, recv_one};\n+use core::prelude::*;\n use core::task;\n \n #[doc = \"The future type\"]\n@@ -145,6 +146,10 @@ pub fn spawn<A:Owned>(blk: fn~() -> A) -> Future<A> {\n \n #[allow(non_implicitly_copyable_typarams)]\n pub mod test {\n+    use core::prelude::*;\n+\n+    use future::*;\n+\n     use core::pipes::oneshot;\n     use core::task;\n "}, {"sha": "93eb2095c5eafb73ff01970a63cc92045bb5694b", "filename": "src/libstd/getopts.rs", "status": "modified", "additions": 11, "deletions": 6, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fgetopts.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fgetopts.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fgetopts.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -75,6 +75,7 @@\n #[forbid(deprecated_mode)];\n \n use core::cmp::Eq;\n+use core::prelude::*;\n use core::result::{Err, Ok};\n use core::result;\n use core::option;\n@@ -83,16 +84,16 @@ use core::str;\n use core::vec;\n \n #[deriving_eq]\n-enum Name {\n+pub enum Name {\n     Long(~str),\n     Short(char),\n }\n \n #[deriving_eq]\n-enum HasArg { Yes, No, Maybe, }\n+pub enum HasArg { Yes, No, Maybe, }\n \n #[deriving_eq]\n-enum Occur { Req, Optional, Multi, }\n+pub enum Occur { Req, Optional, Multi, }\n \n /// A description of a possible option\n #[deriving_eq]\n@@ -453,8 +454,10 @@ enum FailType {\n  *  groups of short and long option names, together.\n  */\n pub mod groups {\n-    use getopts::Result;\n+    use getopts::{HasArg, Long, Maybe, Multi, No, Occur, Opt, Optional, Req};\n+    use getopts::{Result, Short, Yes};\n \n+    use core::prelude::*;\n     use core::str;\n     use core::vec;\n \n@@ -569,7 +572,7 @@ pub mod groups {\n     /*\n      * Parse command line args with the provided long format options\n      */\n-    pub fn getopts(args: &[~str], opts: &[OptGroup]) -> Result {\n+    pub fn getopts(args: &[~str], opts: &[OptGroup]) -> ::getopts::Result {\n         ::getopts::getopts(args, vec::flat_map(opts, long_to_short))\n     }\n \n@@ -633,9 +636,11 @@ pub mod groups {\n #[cfg(test)]\n mod tests {\n     #[legacy_exports];\n+    use core::prelude::*;\n+\n     use opt = getopts;\n     use getopts::groups::OptGroup;\n-    use getopts::groups;\n+    use getopts::*;\n \n     use core::result::{Err, Ok};\n     use core::result;"}, {"sha": "f29e2b5e2ca44625d502ae628a08807d6b3ed225", "filename": "src/libstd/json.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fjson.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fjson.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fjson.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -23,6 +23,7 @@ use core::cmp::{Eq, Ord};\n use core::float;\n use core::io::{WriterUtil, ReaderUtil};\n use core::io;\n+use core::prelude::*;\n use core::send_map::linear;\n use core::str;\n use core::to_str;\n@@ -1193,6 +1194,10 @@ impl Error: to_str::ToStr {\n \n #[cfg(test)]\n mod tests {\n+    use core::prelude::*;\n+\n+    use json::*;\n+\n     use core::result;\n     use core::send_map::linear;\n "}, {"sha": "2d9c96b28a983de1f377a0b799102cfad9ce8ea3", "filename": "src/libstd/list.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Flist.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Flist.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Flist.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -14,6 +14,7 @@\n use core::cmp::Eq;\n use core::option;\n use core::option::*;\n+use core::prelude::*;\n use core::vec;\n \n #[deriving_eq]\n@@ -162,6 +163,7 @@ pub pure fn each<T>(l: @List<T>, f: fn(&T) -> bool) {\n mod tests {\n     #[legacy_exports];\n \n+    use list::*;\n     use list;\n \n     use core::option;"}, {"sha": "c7d59aa18cb607b62bf972fdfe5e23c2a78603c9", "filename": "src/libstd/map.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fmap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fmap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fmap.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -18,6 +18,7 @@ use core::io;\n use core::ops;\n use core::to_str::ToStr;\n use core::mutable::Mut;\n+use core::prelude::*;\n use core::send_map::linear::LinearMap;\n use core::to_bytes::IterBytes;\n use core::uint;\n@@ -120,11 +121,12 @@ pub mod util {\n // FIXME (#2344): package this up and export it as a datatype usable for\n // external code that doesn't want to pay the cost of a box.\n pub mod chained {\n-    use map::util;\n+    use map::{Map, util};\n \n     use core::io;\n     use core::ops;\n     use core::option;\n+    use core::prelude::*;\n     use core::uint;\n     use core::vec;\n \n@@ -615,6 +617,7 @@ impl<K: Eq IterBytes Hash Copy, V: Copy> @Mut<LinearMap<K, V>>:\n mod tests {\n     use map;\n \n+    use core::option::None;\n     use core::option;\n     use core::uint;\n "}, {"sha": "fad583a668b3b930d8fbd6dc4f07b18f9f2708ca", "filename": "src/libstd/net_ip.rs", "status": "modified", "additions": 14, "deletions": 1, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fnet_ip.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fnet_ip.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fnet_ip.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -13,6 +13,7 @@\n \n use core::libc;\n use core::oldcomm;\n+use core::prelude::*;\n use core::ptr;\n use core::result;\n use core::str;\n@@ -47,7 +48,7 @@ pub enum IpAddr {\n }\n \n /// Human-friendly feedback on why a parse_addr attempt failed\n-type ParseAddrErr = {\n+pub type ParseAddrErr = {\n     err_msg: ~str\n };\n \n@@ -147,8 +148,12 @@ pub fn get_addr(node: &str, iotask: iotask)\n }\n \n pub mod v4 {\n+    use net::ip::{IpAddr, Ipv4, Ipv6, ParseAddrErr};\n     use uv::ll;\n+    use uv_ip4_addr = uv::ll::ip4_addr;\n+    use uv_ip4_name = uv::ll::ip4_name;\n \n+    use core::prelude::*;\n     use core::ptr;\n     use core::result;\n     use core::str;\n@@ -241,6 +246,11 @@ pub mod v4 {\n     }\n }\n pub mod v6 {\n+    use net::ip::{IpAddr, Ipv6, ParseAddrErr};\n+    use uv_ip6_addr = uv::ll::ip6_addr;\n+    use uv_ip6_name = uv::ll::ip6_name;\n+\n+    use core::prelude::*;\n     use core::result;\n     use core::str;\n \n@@ -350,6 +360,9 @@ extern fn get_addr_cb(handle: *uv_getaddrinfo_t, status: libc::c_int,\n \n #[cfg(test)]\n mod test {\n+    use core::prelude::*;\n+\n+    use net_ip::*;\n     use net_ip::v4;\n     use net_ip::v6;\n     use uv;"}, {"sha": "64e779fb99694db963f9803d5db726cc4769da0b", "filename": "src/libstd/net_tcp.rs", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fnet_tcp.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fnet_tcp.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fnet_tcp.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -24,6 +24,7 @@ use core::io;\n use core::libc::size_t;\n use core::libc;\n use core::oldcomm;\n+use core::prelude::*;\n use core::ptr;\n use core::result::{Result};\n use core::result;\n@@ -86,7 +87,7 @@ pub type TcpErrData = {\n     err_msg: ~str\n };\n /// Details returned as part of a `result::err` result from `tcp::listen`\n-enum TcpListenErrData {\n+pub enum TcpListenErrData {\n     /**\n      * Some unplanned-for error. The first and second fields correspond\n      * to libuv's `err_name` and `err_msg` fields, respectively.\n@@ -374,7 +375,7 @@ pub fn read_stop(sock: &TcpSocket,\n  * * `timeout_msecs` - a `uint` value, in msecs, to wait before dropping the\n  * read attempt. Pass `0u` to wait indefinitely\n  */\n-fn read(sock: &TcpSocket, timeout_msecs: uint)\n+pub fn read(sock: &TcpSocket, timeout_msecs: uint)\n     -> result::Result<~[u8],TcpErrData> {\n     let socket_data = ptr::addr_of(&(*(sock.socket_data)));\n     read_common_impl(socket_data, timeout_msecs)\n@@ -1270,12 +1271,16 @@ type TcpBufferedSocketData = {\n \n //#[cfg(test)]\n mod test {\n-    use net;\n     use net::ip;\n+    use net::tcp::{GenericListenErr, TcpConnectErrData, TcpListenErrData};\n+    use net::tcp::{TcpSocket, accept, connect, listen, read, socket_buf};\n+    use net;\n+    use uv::iotask::IoTask;\n     use uv;\n \n     use core::io;\n     use core::oldcomm;\n+    use core::prelude::*;\n     use core::result;\n     use core::str;\n     use core::task;"}, {"sha": "cd683dcf8d04a0d13bd7eb75eaa4d9d2020ff446", "filename": "src/libstd/net_url.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fnet_url.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fnet_url.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fnet_url.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -19,6 +19,7 @@ use core::dvec::DVec;\n use core::from_str::FromStr;\n use core::io::{Reader, ReaderUtil};\n use core::io;\n+use core::prelude::*;\n use core::send_map::linear::LinearMap;\n use core::send_map;\n use core::str;\n@@ -735,6 +736,10 @@ impl Url: to_bytes::IterBytes {\n #[cfg(test)]\n mod tests {\n     #[legacy_exports];\n+\n+    use core::prelude::*;\n+\n+    use net_url::*;\n     use net_url::UserInfo;\n \n     use core::result;"}, {"sha": "04d88af1100f5d526cdcad556276580a7d18088b", "filename": "src/libstd/par.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fpar.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fpar.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fpar.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -11,6 +11,7 @@\n #[forbid(deprecated_mode)];\n \n use core::cast;\n+use core::prelude::*;\n use core::ptr;\n use core::sys;\n use core::uint;"}, {"sha": "4d341d737f60279e686111439c2476ba4e9680a1", "filename": "src/libstd/priority_queue.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fpriority_queue.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fpriority_queue.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fpriority_queue.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -2,6 +2,7 @@\n //! A priority queue implemented with a binary heap\n \n use core::cmp::Ord;\n+use core::prelude::*;\n use core::ptr::addr_of;\n use core::vec;\n "}, {"sha": "f0168607adb1c273f905b5f156107d8722335849", "filename": "src/libstd/rl.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Frl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Frl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Frl.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -12,6 +12,7 @@\n // state without mutexes.\n \n use core::libc::{c_char, c_int};\n+use core::prelude::*;\n use core::str;\n use core::task;\n "}, {"sha": "153f39568845a143068b65bac1d02d0fcc6bfb6f", "filename": "src/libstd/rope.rs", "status": "modified", "additions": 14, "deletions": 4, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Frope.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Frope.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Frope.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -38,6 +38,7 @@\n use core::cast;\n use core::char;\n use core::option;\n+use core::prelude::*;\n use core::str;\n use core::uint;\n use core::vec;\n@@ -448,7 +449,9 @@ pub fn loop_leaves(rope: Rope, it: fn(node::Leaf) -> bool) -> bool{\n \n pub mod iterator {\n     pub mod leaf {\n-        use rope::node;\n+        use rope::{Rope, node};\n+\n+        use core::prelude::*;\n \n         pub fn start(rope: Rope) -> node::leaf_iterator::T {\n             match (rope) {\n@@ -461,7 +464,9 @@ pub mod iterator {\n         }\n     }\n     pub mod char {\n-        use rope::node;\n+        use rope::{Rope, node};\n+\n+        use core::prelude::*;\n \n         pub fn start(rope: Rope) -> node::char_iterator::T {\n             match (rope) {\n@@ -560,6 +565,7 @@ pub mod node {\n     use core::cast;\n     use core::char;\n     use core::option;\n+    use core::prelude::*;\n     use core::str;\n     use core::uint;\n     use core::vec;\n@@ -1135,7 +1141,10 @@ pub mod node {\n     }\n \n     pub mod leaf_iterator {\n+        use rope::node::{Concat, Leaf, Node, height};\n+\n         use core::option;\n+        use core::prelude::*;\n         use core::vec;\n \n         pub type T = {\n@@ -1175,9 +1184,11 @@ pub mod node {\n     }\n \n     pub mod char_iterator {\n+        use rope::node::{Leaf, Node};\n         use rope::node::leaf_iterator;\n \n         use core::option;\n+        use core::prelude::*;\n         use core::str;\n \n         pub type T = {\n@@ -1259,8 +1270,7 @@ pub mod node {\n \n #[cfg(test)]\n mod tests {\n-    use rope::iterator;\n-    use rope::node;\n+    use rope::*;\n \n     use core::option;\n     use core::str;"}, {"sha": "aa4ed82bbe9c8b2b603fe73daebb86f5dadfdab3", "filename": "src/libstd/serialize.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fserialize.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fserialize.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fserialize.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -18,6 +18,7 @@ Core encoding and decoding interfaces.\n #[forbid(non_camel_case_types)];\n \n use core::at_vec;\n+use core::prelude::*;\n use core::vec;\n \n pub trait Encoder {"}, {"sha": "dbcb0c6aeec6ea20438bf2bd361a720d1a62672c", "filename": "src/libstd/smallintmap.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fsmallintmap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fsmallintmap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsmallintmap.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -21,6 +21,7 @@ use core::dvec::DVec;\n use core::ops;\n use core::option::{Some, None};\n use core::option;\n+use core::prelude::*;\n \n // FIXME (#2347): Should not be @; there's a bug somewhere in rustc that\n // requires this to be.\n@@ -168,6 +169,8 @@ pub fn as_map<V: Copy>(s: SmallIntMap<V>) -> map::Map<uint, V> {\n \n #[cfg(test)]\n mod tests {\n+    use smallintmap::{mk, SmallIntMap};\n+\n     use core::option::None;\n     use core::option;\n "}, {"sha": "d83568ddd94756fb96b1aefd75b2cfb9d53a4792", "filename": "src/libstd/sort.rs", "status": "modified", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fsort.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fsort.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsort.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -13,6 +13,7 @@\n \n use core::cmp::{Eq, Ord};\n use core::dvec::DVec;\n+use core::prelude::*;\n use core::util;\n use core::vec::{len, push};\n use core::vec;\n@@ -715,6 +716,10 @@ fn copy_vec<T: Copy>(dest: &[mut T], s1: uint,\n mod test_qsort3 {\n     #[legacy_exports];\n \n+    use core::prelude::*;\n+\n+    use sort::*;\n+\n     use core::vec;\n \n     fn check_sort(v1: &[mut int], v2: &[mut int]) {\n@@ -758,6 +763,10 @@ mod test_qsort3 {\n mod test_qsort {\n     #[legacy_exports];\n \n+    use core::prelude::*;\n+\n+    use sort::*;\n+\n     use core::int;\n     use core::vec;\n \n@@ -822,6 +831,10 @@ mod test_qsort {\n mod tests {\n     #[legacy_exports];\n \n+    use core::prelude::*;\n+\n+    use sort::*;\n+\n     use core::vec;\n \n     fn check_sort(v1: &[int], v2: &[int]) {\n@@ -887,6 +900,10 @@ mod tests {\n \n #[cfg(test)]\n mod test_tim_sort {\n+    use core::prelude::*;\n+\n+    use sort::tim_sort;\n+\n     use core::rand;\n     use core::vec;\n \n@@ -980,6 +997,10 @@ mod test_tim_sort {\n \n #[cfg(test)]\n mod big_tests {\n+    use core::prelude::*;\n+\n+    use sort::*;\n+\n     use core::rand;\n     use core::task;\n     use core::uint;"}, {"sha": "a883062c4b9d5497082a21656de3884d93e4a867", "filename": "src/libstd/sync.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fsync.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fsync.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsync.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -19,6 +19,7 @@\n \n use core::option;\n use core::pipes;\n+use core::prelude::*;\n use core::private::{Exclusive, exclusive};\n use core::ptr;\n use core::task;\n@@ -709,6 +710,10 @@ impl &RWlockReadMode {\n mod tests {\n     #[legacy_exports];\n \n+    use core::prelude::*;\n+\n+    use sync::*;\n+\n     use core::cast;\n     use core::option;\n     use core::pipes;"}, {"sha": "5ed2195d2d2ad88d5fde1d837f8681df740e4059", "filename": "src/libstd/task_pool.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Ftask_pool.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Ftask_pool.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Ftask_pool.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -14,6 +14,7 @@\n use core::io;\n use core::pipes::{Chan, Port};\n use core::pipes;\n+use core::prelude::*;\n use core::task::{SchedMode, SingleThreaded};\n use core::task;\n use core::vec;"}, {"sha": "bbe1e5c7ccd9a625d869602d3e6afe7cbfeb747a", "filename": "src/libstd/tempfile.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Ftempfile.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Ftempfile.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Ftempfile.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -13,6 +13,7 @@\n #[forbid(deprecated_mode)];\n \n use core::os;\n+use core::prelude::*;\n use core::rand;\n use core::str;\n "}, {"sha": "8b4c53604bc265d42ece95dcd602366d76122c2b", "filename": "src/libstd/test.rs", "status": "modified", "additions": 10, "deletions": 6, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Ftest.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -29,6 +29,7 @@ use core::io;\n use core::libc::size_t;\n use core::oldcomm;\n use core::option;\n+use core::prelude::*;\n use core::result;\n use core::str;\n use core::task::TaskBuilder;\n@@ -79,7 +80,7 @@ pub type TestOpts = {filter: Option<~str>, run_ignored: bool,\n type OptRes = Either<TestOpts, ~str>;\n \n // Parses command line arguments into test options\n-fn parse_opts(args: &[~str]) -> OptRes {\n+pub fn parse_opts(args: &[~str]) -> OptRes {\n     let args_ = vec::tail(args);\n     let opts = ~[getopts::optflag(~\"ignored\"), getopts::optopt(~\"logfile\")];\n     let matches =\n@@ -283,9 +284,9 @@ enum TestEvent {\n \n type MonitorMsg = (TestDesc, TestResult);\n \n-fn run_tests(opts: &TestOpts, tests: &[TestDesc],\n+fn run_tests(opts: &TestOpts,\n+             tests: &[TestDesc],\n              callback: fn@(e: TestEvent)) {\n-\n     let mut filtered_tests = filter_tests(opts, tests);\n     callback(TeFiltered(copy filtered_tests));\n \n@@ -340,8 +341,9 @@ fn get_concurrency() -> uint {\n }\n \n #[allow(non_implicitly_copyable_typarams)]\n-fn filter_tests(opts: &TestOpts,\n-                tests: &[TestDesc]) -> ~[TestDesc] {\n+pub fn filter_tests(opts: &TestOpts,\n+                    tests: &[TestDesc])\n+                 -> ~[TestDesc] {\n     let mut filtered = vec::slice(tests, 0, tests.len());\n \n     // Remove tests that don't match the test filter\n@@ -393,7 +395,7 @@ fn filter_tests(opts: &TestOpts,\n \n type TestFuture = {test: TestDesc, wait: fn@() -> TestResult};\n \n-fn run_test(test: TestDesc, monitor_ch: oldcomm::Chan<MonitorMsg>) {\n+pub fn run_test(test: TestDesc, monitor_ch: oldcomm::Chan<MonitorMsg>) {\n     if test.ignore {\n         oldcomm::send(monitor_ch, (copy test, TrIgnored));\n         return;\n@@ -425,6 +427,8 @@ fn calc_result(test: &TestDesc, task_succeeded: bool) -> TestResult {\n mod tests {\n     #[legacy_exports];\n \n+    use test::{TrFailed, TrIgnored, TrOk, filter_tests, parse_opts, run_test};\n+\n     use core::either;\n     use core::oldcomm;\n     use core::option;"}, {"sha": "575f49c73fbe2eb33bfa692d6c71423f1b9a7f4b", "filename": "src/libstd/time.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Ftime.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Ftime.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Ftime.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -16,6 +16,7 @@ use core::libc::{c_char, c_int, c_long, size_t, time_t};\n use core::i32;\n use core::io::{Reader, ReaderUtil};\n use core::io;\n+use core::prelude::*;\n use core::result::{Result, Ok, Err};\n use core::str;\n \n@@ -857,6 +858,8 @@ priv fn do_strftime(format: &str, tm: &Tm) -> ~str {\n mod tests {\n     #[legacy_exports];\n \n+    use time::*;\n+\n     use core::float;\n     use core::os;\n     use core::result;"}, {"sha": "18c623c2bd8ce8f24038e504238e621d767315ae", "filename": "src/libstd/timer.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Ftimer.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Ftimer.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Ftimer.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -19,6 +19,7 @@ use uv::iotask::IoTask;\n use core::either;\n use core::libc;\n use core::oldcomm;\n+use core::prelude::*;\n use core::ptr;\n use core;\n \n@@ -164,6 +165,9 @@ extern fn delayed_send_close_cb(handle: *uv::ll::uv_timer_t) unsafe {\n mod test {\n     #[legacy_exports];\n \n+    use core::prelude::*;\n+\n+    use timer::*;\n     use uv;\n \n     use core::iter;"}, {"sha": "af3ab4b88eb68b29868fa405e41170ab1649947b", "filename": "src/libstd/treemap.rs", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Ftreemap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Ftreemap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Ftreemap.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -18,8 +18,8 @@\n #[forbid(deprecated_mode)];\n \n use core::cmp::{Eq, Ord};\n-use core::option::{Some, None};\n-use Option = core::Option;\n+use core::option::{Option, Some, None};\n+use core::prelude::*;\n \n pub type TreeMap<K: Copy Eq Ord, V: Copy> = @mut TreeEdge<K, V>;\n \n@@ -107,6 +107,9 @@ pub fn equals<K: Copy Eq Ord, V: Copy Eq>(t1: &const TreeEdge<K, V>,\n mod tests {\n     #[legacy_exports];\n \n+    use treemap::*;\n+\n+    use core::option::{None, Option, Some};\n     use core::str;\n \n     #[test]"}, {"sha": "f65c8ce38756592596ee9ad74e1a219e32499a3f", "filename": "src/libstd/uv_global_loop.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fuv_global_loop.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fuv_global_loop.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fuv_global_loop.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -123,8 +123,11 @@ fn spawn_loop() -> IoTask {\n \n #[cfg(test)]\n mod test {\n+    use core::prelude::*;\n+\n     use uv::iotask;\n     use uv::ll;\n+    use uv_global_loop::*;\n \n     use core::iter;\n     use core::libc;"}, {"sha": "409d73c2539bbbbc2349717cd8a75302e6fbc17e", "filename": "src/libstd/uv_iotask.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fuv_iotask.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fuv_iotask.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fuv_iotask.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -21,6 +21,7 @@ use ll = uv_ll;\n use core::libc::c_void;\n use core::libc;\n use core::oldcomm::{Port, Chan, listen};\n+use core::prelude::*;\n use core::ptr::addr_of;\n use core::task::TaskBuilder;\n use core::task;\n@@ -176,7 +177,10 @@ extern fn tear_down_close_cb(handle: *ll::uv_async_t) unsafe {\n \n #[cfg(test)]\n mod test {\n+    use core::prelude::*;\n+\n     use uv::ll;\n+    use uv_iotask::*;\n \n     use core::iter;\n     use core::libc;"}, {"sha": "4446e1388e62f62bdf0194af739fe61500fe3d2b", "filename": "src/libstd/uv_ll.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fuv_ll.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fuv_ll.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fuv_ll.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -34,6 +34,7 @@\n \n use core::libc::size_t;\n use core::libc;\n+use core::prelude::*;\n use core::ptr::to_unsafe_ptr;\n use core::ptr;\n use core::str;\n@@ -319,6 +320,9 @@ pub type uv_getaddrinfo_t = {\n };\n \n pub mod uv_ll_struct_stubgen {\n+    use uv_ll::{uv_async_t, uv_connect_t, uv_getaddrinfo_t, uv_tcp_t};\n+    use uv_ll::{uv_timer_t, uv_write_t};\n+\n     use core::ptr;\n \n     pub fn gen_stub_uv_tcp_t() -> uv_tcp_t {\n@@ -1040,6 +1044,10 @@ pub unsafe fn addrinfo_as_sockaddr_in6(input: *addrinfo) -> *sockaddr_in6 {\n \n #[cfg(test)]\n pub mod test {\n+    use core::prelude::*;\n+\n+    use uv_ll::*;\n+\n     use core::libc;\n     use core::oldcomm;\n     use core::ptr;"}, {"sha": "c8898ccd9c7b69ac4073175563a84f282b9b147a", "filename": "src/libstd/workcache.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fworkcache.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibstd%2Fworkcache.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fworkcache.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -16,6 +16,7 @@ use core::either::{Either, Left, Right};\n use core::io;\n use core::option;\n use core::pipes::{recv, oneshot, PortOne, send_one};\n+use core::prelude::*;\n use core::result;\n use core::run;\n use core::send_map::linear::LinearMap;"}, {"sha": "42e722f8d5307b9528024ee60ce76fcafd2cc57b", "filename": "src/libsyntax/ast.rs", "status": "modified", "additions": 8, "deletions": 7, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fast.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fast.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fast.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -12,10 +12,10 @@\n \n use ast;\n use codemap::{span, FileName};\n-use parse::token;\n \n use core::cast;\n use core::cmp;\n+use core::option::{None, Option, Some};\n use core::ptr;\n use core::task;\n use core::to_bytes;\n@@ -29,7 +29,8 @@ type spanned<T> = {node: T, span: span};\n /* can't import macros yet, so this is copied from token.rs. See its comment\n  * there. */\n macro_rules! interner_key (\n-    () => (cast::transmute::<(uint, uint), &fn(+v: @@token::ident_interner)>(\n+    () => (cast::transmute::<(uint, uint),\n+            &fn(+v: @@::parse::token::ident_interner)>(\n         (-3 as uint, 0u)))\n )\n \n@@ -768,10 +769,10 @@ type capture_clause = @~[capture_item];\n #[auto_decode]\n #[doc=\"For macro invocations; parsing is delegated to the macro\"]\n enum token_tree {\n-    tt_tok(span, token::Token),\n+    tt_tok(span, ::parse::token::Token),\n     tt_delim(~[token_tree]),\n     // These only make sense for right-hand-sides of MBE macros\n-    tt_seq(span, ~[token_tree], Option<token::Token>, bool),\n+    tt_seq(span, ~[token_tree], Option<::parse::token::Token>, bool),\n     tt_nonterminal(span, ident)\n }\n \n@@ -833,10 +834,10 @@ type matcher = spanned<matcher_>;\n #[auto_decode]\n enum matcher_ {\n     // match one token\n-    match_tok(token::Token),\n+    match_tok(::parse::token::Token),\n     // match repetitions of a sequence: body, separator, zero ok?,\n     // lo, hi position-in-match-array used:\n-    match_seq(~[matcher], Option<token::Token>, bool, uint, uint),\n+    match_seq(~[matcher], Option<::parse::token::Token>, bool, uint, uint),\n     // parse a Rust NT: name to bind, name of NT, position in match array:\n     match_nonterminal(ident, ident, uint)\n }\n@@ -1149,7 +1150,7 @@ type fn_decl =\n \n #[auto_encode]\n #[auto_decode]\n-enum purity {\n+pub enum purity {\n     pure_fn, // declared with \"pure fn\"\n     unsafe_fn, // declared with \"unsafe fn\"\n     impure_fn, // declared with \"fn\""}, {"sha": "f56f0c545bf37cca2a7571108252f6e72c0f7a9a", "filename": "src/libsyntax/ast_map.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fast_map.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fast_map.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fast_map.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n+\n use ast::*;\n use ast;\n use ast_util::{path_to_ident, stmt_id};"}, {"sha": "3cab2151fdebe793342099d046073698dfda323a", "filename": "src/libsyntax/ast_util.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fast_util.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fast_util.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fast_util.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,10 +8,13 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n+\n use ast::*;\n use ast;\n use ast_util;\n use codemap::{span, BytePos};\n+use parse::token;\n use visit;\n \n use core::cmp;"}, {"sha": "985e0951794dacbf45884b7273f1360819e6ced3", "filename": "src/libsyntax/attr.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fattr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fattr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fattr.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -10,6 +10,8 @@\n \n // Functions dealing with attributes and meta_items\n \n+use core::prelude::*;\n+\n use ast;\n use ast_util::{spanned, dummy_spanned};\n use attr;"}, {"sha": "1e4a40405fd3ae0af9a2bed02a5a1ae8165656ea", "filename": "src/libsyntax/codemap.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fcodemap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fcodemap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fcodemap.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -21,6 +21,8 @@ source code snippets, etc.\n \n */\n \n+use core::prelude::*;\n+\n use ast_util;\n \n use core::cmp;"}, {"sha": "7e9d257a742b1ddb4481d0602cc908c3762eff57", "filename": "src/libsyntax/diagnostic.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fdiagnostic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fdiagnostic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fdiagnostic.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n+\n use codemap::span;\n use codemap;\n "}, {"sha": "152c49461b87d53b1cef8e9fc803844cf58e3cc4", "filename": "src/libsyntax/ext/auto_encode.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Fauto_encode.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Fauto_encode.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fauto_encode.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -88,10 +88,14 @@ node twice.\n \n */\n \n+use core::prelude::*;\n+\n+use ast;\n use ast_util;\n use attr;\n use codemap::span;\n use ext::base::*;\n+use parse;\n \n use core::vec;\n use std::map;\n@@ -421,7 +425,7 @@ fn mk_impl(\n     @{\n         // This is a new-style impl declaration.\n         // XXX: clownshoes\n-        ident: ast::token::special_idents::clownshoes_extensions,\n+        ident: parse::token::special_idents::clownshoes_extensions,\n         attrs: ~[],\n         id: cx.next_id(),\n         node: ast::item_impl(trait_tps, opt_trait, ty, ~[f(ty)]),"}, {"sha": "7b69084a827a3392b96a14f5b81cbff6dfae8c1c", "filename": "src/libsyntax/ext/base.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Fbase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Fbase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fbase.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n+\n use ast;\n use ast_util::dummy_sp;\n use codemap;"}, {"sha": "4a3c8ee2259db89f3c5f52143e5ac97704ddc2ac", "filename": "src/libsyntax/ext/build.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Fbuild.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Fbuild.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fbuild.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n+\n use ast;\n use codemap;\n use codemap::span;"}, {"sha": "d847cfee053a7ace3dab4be31363e5cac057b4c3", "filename": "src/libsyntax/ext/concat_idents.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Fconcat_idents.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Fconcat_idents.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fconcat_idents.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n+\n use ext::base::*;\n use ext::base;\n "}, {"sha": "41804b1022a3c79e311789e449ad2a6ab362ed3b", "filename": "src/libsyntax/ext/deriving.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Fderiving.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Fderiving.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fderiving.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -11,6 +11,8 @@\n /// The compiler code necessary to implement the #[deriving_eq] and\n /// #[deriving_iter_bytes] extensions.\n \n+use core::prelude::*;\n+\n use ast::{Ty, and, bind_by_ref, binop, deref, enum_def, enum_variant_kind};\n use ast::{expr, expr_match, ident, item, item_, item_struct, item_enum};\n use ast::{item_impl, m_imm, meta_item, method, named_field, or, pat};"}, {"sha": "8faeb1671913403d9857bb84eb4f12ad77e0159f", "filename": "src/libsyntax/ext/expand.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Fexpand.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Fexpand.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fexpand.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n+\n use ast::{crate, expr_, expr_mac, mac_invoc_tt};\n use ast::{tt_delim, tt_tok, item_mac, stmt_, stmt_mac, stmt_expr, stmt_semi};\n use ast;"}, {"sha": "0eaa983ccad8b175af2667cc8d273a3b3ef56b5f", "filename": "src/libsyntax/ext/fmt.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Ffmt.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Ffmt.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Ffmt.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -16,6 +16,8 @@\n  * compiler syntax extension plugin interface.\n  */\n \n+use core::prelude::*;\n+\n use ast;\n use codemap::span;\n use ext::base::*;"}, {"sha": "56ace4aac1be92639011648ba15f35bed828e1a4", "filename": "src/libsyntax/ext/pipes/ast_builder.rs", "status": "modified", "additions": 36, "deletions": 5, "changes": 41, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Fpipes%2Fast_builder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Fpipes%2Fast_builder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fpipes%2Fast_builder.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -13,13 +13,15 @@\n // To start with, it will be use dummy spans, but it might someday do\n // something smarter.\n \n+use core::prelude::*;\n+\n use ast::{ident, node_id};\n use ast;\n use ast_util::{ident_to_path, respan, dummy_sp};\n use ast_util;\n use attr;\n use codemap::span;\n-use ext::base::mk_ctxt;\n+use ext::base::{ext_ctxt, mk_ctxt};\n use ext::quote::rt::*;\n \n use core::vec;\n@@ -112,9 +114,11 @@ trait ext_ctxt_ast_builder {\n \n impl ext_ctxt: ext_ctxt_ast_builder {\n     fn ty_option(ty: @ast::Ty) -> @ast::Ty {\n-        self.ty_path_ast_builder(path(~[self.ident_of(~\"Option\")],\n-                                      dummy_sp())\n-                                 .add_ty(ty))\n+        self.ty_path_ast_builder(path_global(~[\n+            self.ident_of(~\"core\"),\n+            self.ident_of(~\"option\"),\n+            self.ident_of(~\"Option\")\n+        ], dummy_sp()).add_ty(ty))\n     }\n \n     fn block_expr(b: ast::blk) -> @ast::expr {\n@@ -283,10 +287,37 @@ impl ext_ctxt: ext_ctxt_ast_builder {\n     fn item_mod(name: ident,\n                 span: span,\n                 +items: ~[@ast::item]) -> @ast::item {\n+        // XXX: Total hack: import `core::kinds::Owned` to work around a\n+        // parser bug whereby `fn f<T: ::kinds::Owned>` doesn't parse.\n+        let vi = ast::view_item_import(~[\n+            @{\n+                node: ast::view_path_simple(\n+                    self.ident_of(~\"Owned\"),\n+                    path(\n+                        ~[\n+                            self.ident_of(~\"core\"),\n+                            self.ident_of(~\"kinds\"),\n+                            self.ident_of(~\"Owned\")\n+                        ],\n+                        ast_util::dummy_sp()\n+                    ),\n+                    ast::type_value_ns,\n+                    self.next_id()\n+                ),\n+                span: ast_util::dummy_sp()\n+            }\n+        ]);\n+        let vi = @{\n+            node: vi,\n+            attrs: ~[],\n+            vis: ast::private,\n+            span: ast_util::dummy_sp()\n+        };\n+\n         self.item(name,\n                   span,\n                   ast::item_mod({\n-                      view_items: ~[],\n+                      view_items: ~[vi],\n                       items: items}))\n     }\n "}, {"sha": "f2ba413dd38dfea43b101dd134cdc3046f03416a", "filename": "src/libsyntax/ext/pipes/check.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Fpipes%2Fcheck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Fpipes%2Fcheck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fpipes%2Fcheck.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -29,7 +29,10 @@ that.\n \n */\n \n+use core::prelude::*;\n+\n use ast;\n+use codemap::span;\n use ext::base::ext_ctxt;\n use ext::pipes::proto::{state, protocol, next_state};\n use ext::pipes::proto;"}, {"sha": "01e995940835db7c52ef047f953694e1d003467c", "filename": "src/libsyntax/ext/pipes/liveness.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Fpipes%2Fliveness.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Fpipes%2Fliveness.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fpipes%2Fliveness.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -37,6 +37,11 @@ updating the states using rule (2) until there are no changes.\n \n */\n \n+use core::prelude::*;\n+\n+use ext::base::ext_ctxt;\n+use ext::pipes::protocol;\n+\n use core::str;\n use std::bitv::{Bitv};\n "}, {"sha": "cb17e56e99073da56f634c0f15fba703e9f28e06", "filename": "src/libsyntax/ext/pipes/mod.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Fpipes%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Fpipes%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fpipes%2Fmod.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -53,6 +53,8 @@ use ext::pipes::proto::{visit, protocol};\n use parse::lexer::{new_tt_reader, reader};\n use parse::parser::Parser;\n \n+use core::option::None;\n+\n #[legacy_exports]\n mod ast_builder;\n #[legacy_exports]"}, {"sha": "6a6e895bd401f6554e2961de9fdd32d6850aa989", "filename": "src/libsyntax/ext/pipes/parse_proto.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Fpipes%2Fparse_proto.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Fpipes%2Fparse_proto.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fpipes%2Fparse_proto.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -10,10 +10,11 @@\n \n // Parsing pipes protocols from token trees.\n \n+use ext::pipes::pipec::*;\n use parse::parser;\n use parse::token;\n \n-use ext::pipes::pipec::*;\n+use core::prelude::*;\n \n trait proto_parser {\n     fn parse_proto(id: ~str) -> protocol;"}, {"sha": "e88ddb841be1bc4702573bdf9d36b7b888685284", "filename": "src/libsyntax/ext/pipes/pipec.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Fpipes%2Fpipec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Fpipes%2Fpipec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fpipes%2Fpipec.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -20,6 +20,7 @@ use parse::*;\n use util::interner;\n \n use core::dvec::DVec;\n+use core::prelude::*;\n use core::str;\n use core::to_str::ToStr;\n use core::vec;\n@@ -385,7 +386,8 @@ impl protocol: gen_init {\n             }\n         }\n \n-        cx.ty_path_ast_builder(path(~[cx.ident_of(~\"__Buffer\")], self.span)\n+        cx.ty_path_ast_builder(path(~[cx.ident_of(~\"super\"),\n+                                      cx.ident_of(~\"__Buffer\")], self.span)\n                                .add_tys(cx.ty_vars_global(params)))\n     }\n "}, {"sha": "9953b4de50d46a6b4ff33aa1acae40dc0e0e2692", "filename": "src/libsyntax/ext/pipes/proto.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Fpipes%2Fproto.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Fpipes%2Fproto.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fpipes%2Fproto.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,7 +8,11 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n+\n use ast;\n+use codemap::span;\n+use ext::base::ext_ctxt;\n use ext::pipes::ast_builder::{path, append_types};\n \n use core::cmp;"}, {"sha": "4aed5b647479a6bd63951d9311f99b16e51aeef2", "filename": "src/libsyntax/ext/quote.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Fquote.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Fquote.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fquote.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -18,6 +18,7 @@ use parse::token::*;\n use parse::token;\n use parse;\n \n+use core::prelude::*;\n use core::str;\n \n /**\n@@ -33,6 +34,7 @@ use core::str;\n \n pub mod rt {\n     use ast;\n+    use ext::base::ext_ctxt;\n     use parse;\n     use print::pprust;\n "}, {"sha": "3d012b393bb21330498ea4fc0e4d83fa8caaa7d2", "filename": "src/libsyntax/ext/source_util.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Fsource_util.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Fsource_util.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fsource_util.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -16,6 +16,7 @@ use ext::build::{mk_base_vec_e, mk_uint, mk_u8, mk_base_str};\n use print::pprust;\n \n use core::io;\n+use core::prelude::*;\n use core::result;\n use core::str;\n use core::vec;"}, {"sha": "d5031b97718cd743d7dc04a22031a39fc6b2e77f", "filename": "src/libsyntax/ext/trace_macros.rs", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Ftrace_macros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Ftrace_macros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Ftrace_macros.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,17 +8,18 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use ast::tt_delim;\n use ast;\n use codemap::span;\n-use ext::base;\n use ext::base::ext_ctxt;\n-use ast::tt_delim;\n+use ext::base;\n use parse::lexer::{new_tt_reader, reader};\n use parse::parser::Parser;\n \n+use core::option::None;\n+\n fn expand_trace_macros(cx: ext_ctxt, sp: span,\n-                       tt: ~[ast::token_tree]) -> base::mac_result\n-{\n+                       tt: ~[ast::token_tree]) -> base::mac_result {\n     let sess = cx.parse_sess();\n     let cfg = cx.cfg();\n     let tt_rdr = new_tt_reader(cx.parse_sess().span_diagnostic,"}, {"sha": "1f1efdfe16598bb7cfc3ae97da4935debd1d7308", "filename": "src/libsyntax/ext/tt/macro_rules.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Ftt%2Fmacro_rules.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Ftt%2Fmacro_rules.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Ftt%2Fmacro_rules.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n+\n use ast::{ident, matcher_, matcher, match_tok, match_nonterminal, match_seq};\n use ast::{tt_delim};\n use ast;"}, {"sha": "47489034a0f518c20ce321d6aab3321b4e2ad857", "filename": "src/libsyntax/ext/tt/transcribe.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Ftt%2Ftranscribe.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fext%2Ftt%2Ftranscribe.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Ftt%2Ftranscribe.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n+\n use ast;\n use ast::{token_tree, tt_delim, tt_tok, tt_seq, tt_nonterminal,ident};\n use ast_util;"}, {"sha": "7de4e3f1d5fb08b4c68f8b6d43409e7864b289ee", "filename": "src/libsyntax/fold.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Ffold.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Ffold.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Ffold.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n+\n use ast::*;\n use ast;\n use codemap::span;"}, {"sha": "49197be4bb9740bb07f02a77983ed2e9d00657d6", "filename": "src/libsyntax/parse/attr.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fparse%2Fattr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fparse%2Fattr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fattr.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,8 +8,11 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n+\n use ast;\n use ast_util::spanned;\n+use codemap::BytePos;\n use parse::common::*; //resolve bug?\n use parse::token;\n "}, {"sha": "0e101d54ba3ef1ebbfb4831948d295ddec245d0e", "filename": "src/libsyntax/parse/comments.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fparse%2Fcomments.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fparse%2Fcomments.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fcomments.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,8 +8,10 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n+\n use ast;\n-use codemap::{CodeMap, FileMap, CharPos};\n+use codemap::{BytePos, CharPos, CodeMap, FileMap};\n use diagnostic;\n use parse::lexer::{is_whitespace, get_str_from, reader};\n use parse::lexer::{string_reader, bump, is_eof, nextch};"}, {"sha": "1c6022130dc4a0d9127929cc0a22615e62042675", "filename": "src/libsyntax/parse/common.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fparse%2Fcommon.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fparse%2Fcommon.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fcommon.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,12 +8,16 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n+\n use ast;\n use ast_util::spanned;\n+use codemap::BytePos;\n use parse::lexer::reader;\n use parse::parser::Parser;\n use parse::token;\n \n+use core::option::{None, Option, Some};\n use core::option;\n use std::map::HashMap;\n "}, {"sha": "573c36e619b8aa9ab668be90d2ad742ab302d302", "filename": "src/libsyntax/parse/lexer.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fparse%2Flexer.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fparse%2Flexer.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Flexer.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,13 +8,15 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n+\n use ast;\n use ast_util;\n use codemap::{span, CodeMap, CharPos, BytePos};\n use codemap;\n use diagnostic::span_handler;\n use ext::tt::transcribe::{tt_next_token};\n-use ext::tt::transcribe::{tt_reader,  new_tt_reader, dup_tt_reader};\n+use ext::tt::transcribe::{tt_reader, new_tt_reader, dup_tt_reader};\n use parse::token;\n \n use core::char;"}, {"sha": "b14b60af1345cd01b920bb720304aa10fc9b6b9f", "filename": "src/libsyntax/parse/mod.rs", "status": "modified", "additions": 46, "deletions": 60, "changes": 106, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fparse%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fparse%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fmod.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -10,8 +10,6 @@\n \n //! The main parser interface\n \n-#[legacy_exports];\n-\n use ast::node_id;\n use ast;\n use codemap::{span, CodeMap, FileMap, CharPos, BytePos};\n@@ -24,70 +22,47 @@ use parse::token::{ident_interner, mk_ident_interner};\n use util::interner;\n \n use core::io;\n+use core::option::{None, Option, Some};\n+use core::path::Path;\n+use core::result::{Err, Ok, Result};\n use core::result;\n \n-export parser;\n-export common;\n-export lexer;\n-export token;\n-export comments;\n-export prec;\n-export classify;\n-export attr;\n-export obsolete;\n-\n-export parse_sess;\n-export new_parse_sess, new_parse_sess_special_handler;\n-export next_node_id;\n-export new_parser_from_file, new_parser_etc_from_file;\n-export new_parser_from_source_str;\n-export new_parser_from_tts;\n-export new_sub_parser_from_file;\n-export parse_crate_from_file, parse_crate_from_crate_file;\n-export parse_crate_from_source_str;\n-export parse_expr_from_source_str, parse_item_from_source_str;\n-export parse_stmt_from_source_str;\n-export parse_tts_from_source_str;\n-export parse_from_source_str;\n-\n-\n #[legacy_exports]\n-mod lexer;\n+pub mod lexer;\n #[legacy_exports]\n-mod parser;\n+pub mod parser;\n #[legacy_exports]\n-mod token;\n+pub mod token;\n #[legacy_exports]\n-mod comments;\n+pub mod comments;\n #[legacy_exports]\n-mod attr;\n+pub mod attr;\n #[legacy_exports]\n \n /// Common routines shared by parser mods\n #[legacy_exports]\n-mod common;\n+pub mod common;\n \n /// Functions dealing with operator precedence\n #[legacy_exports]\n-mod prec;\n+pub mod prec;\n \n /// Routines the parser uses to classify AST nodes\n #[legacy_exports]\n-mod classify;\n+pub mod classify;\n \n /// Reporting obsolete syntax\n #[legacy_exports]\n-mod obsolete;\n-\n+pub mod obsolete;\n \n-type parse_sess = @{\n+pub type parse_sess = @{\n     cm: @codemap::CodeMap,\n     mut next_id: node_id,\n     span_diagnostic: span_handler,\n     interner: @ident_interner,\n };\n \n-fn new_parse_sess(demitter: Option<emitter>) -> parse_sess {\n+pub fn new_parse_sess(demitter: Option<emitter>) -> parse_sess {\n     let cm = @CodeMap::new();\n     return @{cm: cm,\n              mut next_id: 1,\n@@ -96,7 +71,7 @@ fn new_parse_sess(demitter: Option<emitter>) -> parse_sess {\n             };\n }\n \n-fn new_parse_sess_special_handler(sh: span_handler, cm: @codemap::CodeMap)\n+pub fn new_parse_sess_special_handler(sh: span_handler, cm: @codemap::CodeMap)\n     -> parse_sess {\n     return @{cm: cm,\n              mut next_id: 1,\n@@ -105,53 +80,64 @@ fn new_parse_sess_special_handler(sh: span_handler, cm: @codemap::CodeMap)\n              };\n }\n \n-fn parse_crate_from_file(input: &Path, cfg: ast::crate_cfg,\n+pub fn parse_crate_from_file(input: &Path, cfg: ast::crate_cfg,\n                          sess: parse_sess) -> @ast::crate {\n     let p = new_crate_parser_from_file(sess, cfg, input);\n     let r = p.parse_crate_mod(cfg);\n     return r;\n }\n \n-fn parse_crate_from_source_str(name: ~str, source: @~str, cfg: ast::crate_cfg,\n-                               sess: parse_sess) -> @ast::crate {\n+pub fn parse_crate_from_source_str(name: ~str,\n+                                   source: @~str,\n+                                   cfg: ast::crate_cfg,\n+                                   sess: parse_sess) -> @ast::crate {\n     let p = new_parser_from_source_str(sess, cfg, name,\n                                        codemap::FssNone, source);\n     let r = p.parse_crate_mod(cfg);\n     p.abort_if_errors();\n     return r;\n }\n \n-fn parse_expr_from_source_str(name: ~str, source: @~str, cfg: ast::crate_cfg,\n-                              sess: parse_sess) -> @ast::expr {\n+pub fn parse_expr_from_source_str(name: ~str,\n+                                  source: @~str,\n+                                  cfg: ast::crate_cfg,\n+                                  sess: parse_sess) -> @ast::expr {\n     let p = new_parser_from_source_str(sess, cfg, name,\n                                        codemap::FssNone, source);\n     let r = p.parse_expr();\n     p.abort_if_errors();\n     return r;\n }\n \n-fn parse_item_from_source_str(name: ~str, source: @~str, cfg: ast::crate_cfg,\n-                              +attrs: ~[ast::attribute],\n-                              sess: parse_sess) -> Option<@ast::item> {\n+pub fn parse_item_from_source_str(name: ~str,\n+                                  source: @~str,\n+                                  cfg: ast::crate_cfg,\n+                                  +attrs: ~[ast::attribute],\n+                                  sess: parse_sess)\n+                               -> Option<@ast::item> {\n     let p = new_parser_from_source_str(sess, cfg, name,\n                                        codemap::FssNone, source);\n     let r = p.parse_item(attrs);\n     p.abort_if_errors();\n     return r;\n }\n \n-fn parse_stmt_from_source_str(name: ~str, source: @~str, cfg: ast::crate_cfg,\n-                              +attrs: ~[ast::attribute],\n-                              sess: parse_sess) -> @ast::stmt {\n+pub fn parse_stmt_from_source_str(name: ~str,\n+                                  source: @~str,\n+                                  cfg: ast::crate_cfg,\n+                                  +attrs: ~[ast::attribute],\n+                                  sess: parse_sess) -> @ast::stmt {\n     let p = new_parser_from_source_str(sess, cfg, name,\n                                        codemap::FssNone, source);\n     let r = p.parse_stmt(attrs);\n     p.abort_if_errors();\n     return r;\n }\n \n-fn parse_tts_from_source_str(name: ~str, source: @~str, cfg: ast::crate_cfg,\n-                             sess: parse_sess) -> ~[ast::token_tree] {\n+pub fn parse_tts_from_source_str(name: ~str,\n+                                 source: @~str,\n+                                 cfg: ast::crate_cfg,\n+                                 sess: parse_sess) -> ~[ast::token_tree] {\n     let p = new_parser_from_source_str(sess, cfg, name,\n                                        codemap::FssNone, source);\n     p.quote_depth += 1u;\n@@ -160,7 +146,7 @@ fn parse_tts_from_source_str(name: ~str, source: @~str, cfg: ast::crate_cfg,\n     return r;\n }\n \n-fn parse_from_source_str<T>(f: fn (p: Parser) -> T,\n+pub fn parse_from_source_str<T>(f: fn (p: Parser) -> T,\n                             name: ~str, ss: codemap::FileSubstr,\n                             source: @~str, cfg: ast::crate_cfg,\n                             sess: parse_sess)\n@@ -176,15 +162,15 @@ fn parse_from_source_str<T>(f: fn (p: Parser) -> T,\n     move r\n }\n \n-fn next_node_id(sess: parse_sess) -> node_id {\n+pub fn next_node_id(sess: parse_sess) -> node_id {\n     let rv = sess.next_id;\n     sess.next_id += 1;\n     // ID 0 is reserved for the crate and doesn't actually exist in the AST\n     assert rv != 0;\n     return rv;\n }\n \n-fn new_parser_from_source_str(sess: parse_sess, cfg: ast::crate_cfg,\n+pub fn new_parser_from_source_str(sess: parse_sess, cfg: ast::crate_cfg,\n                               +name: ~str, +ss: codemap::FileSubstr,\n                               source: @~str) -> Parser {\n     let filemap = sess.cm.new_filemap_w_substr(name, ss, source);\n@@ -193,7 +179,7 @@ fn new_parser_from_source_str(sess: parse_sess, cfg: ast::crate_cfg,\n     return Parser(sess, cfg, srdr as reader);\n }\n \n-fn new_parser_from_file(sess: parse_sess, cfg: ast::crate_cfg,\n+pub fn new_parser_from_file(sess: parse_sess, cfg: ast::crate_cfg,\n                         path: &Path) -> Result<Parser, ~str> {\n     match io::read_whole_file_str(path) {\n       result::Ok(move src) => {\n@@ -211,7 +197,7 @@ fn new_parser_from_file(sess: parse_sess, cfg: ast::crate_cfg,\n \n /// Create a new parser for an entire crate, handling errors as appropriate\n /// if the file doesn't exist\n-fn new_crate_parser_from_file(sess: parse_sess, cfg: ast::crate_cfg,\n+pub fn new_crate_parser_from_file(sess: parse_sess, cfg: ast::crate_cfg,\n                               path: &Path) -> Parser {\n     match new_parser_from_file(sess, cfg, path) {\n         Ok(move parser) => move parser,\n@@ -223,7 +209,7 @@ fn new_crate_parser_from_file(sess: parse_sess, cfg: ast::crate_cfg,\n \n /// Create a new parser based on a span from an existing parser. Handles\n /// error messages correctly when the file does not exist.\n-fn new_sub_parser_from_file(sess: parse_sess, cfg: ast::crate_cfg,\n+pub fn new_sub_parser_from_file(sess: parse_sess, cfg: ast::crate_cfg,\n                             path: &Path, sp: span) -> Parser {\n     match new_parser_from_file(sess, cfg, path) {\n         Ok(move parser) => move parser,\n@@ -233,7 +219,7 @@ fn new_sub_parser_from_file(sess: parse_sess, cfg: ast::crate_cfg,\n     }\n }\n \n-fn new_parser_from_tts(sess: parse_sess, cfg: ast::crate_cfg,\n+pub fn new_parser_from_tts(sess: parse_sess, cfg: ast::crate_cfg,\n                        tts: ~[ast::token_tree]) -> Parser {\n     let trdr = lexer::new_tt_reader(sess.span_diagnostic, sess.interner,\n                                     None, tts);"}, {"sha": "15905c090db4d94aa2df543e9e1cdc506fe1e834", "filename": "src/libsyntax/parse/obsolete.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fparse%2Fobsolete.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fparse%2Fobsolete.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fobsolete.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -17,10 +17,13 @@ Obsolete syntax that becomes too hard to parse can be\n removed.\n */\n \n+use core::prelude::*;\n+\n use ast::{expr, expr_lit, lit_nil};\n use ast;\n use ast_util::{respan};\n use codemap::span;\n+use parse::parser::Parser;\n use parse::token::Token;\n use parse::token;\n "}, {"sha": "80fd04f0e10181086b6fa416e8cc6b83f6c923ab", "filename": "src/libsyntax/parse/parser.rs", "status": "modified", "additions": 21, "deletions": 17, "changes": 38, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fparse%2Fparser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fparse%2Fparser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fparser.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n+\n use ast::{ProtoBox, ProtoUniq, provided, public, pure_fn, purity, re_static};\n use ast::{_mod, add, arg, arm, attribute, bind_by_ref, bind_infer};\n use ast::{bind_by_value, bind_by_move, bitand, bitor, bitxor, blk};\n@@ -33,23 +35,24 @@ use ast::{lit_bool, lit_float, lit_float_unsuffixed, lit_int};\n use ast::{lit_int_unsuffixed, lit_nil, lit_str, lit_uint, local, m_const};\n use ast::{m_imm, m_mutbl, mac_, mac_invoc_tt, matcher, match_nonterminal};\n use ast::{match_seq, match_tok, method, mode, module_ns, mt, mul, mutability};\n-use ast::{named_field, neg, noreturn, not, pat, pat_box, pat_enum, pat_ident};\n-use ast::{pat_lit, pat_range, pat_rec, pat_region, pat_struct, pat_tup};\n-use ast::{pat_uniq, pat_wild, path, private, Proto, ProtoBare, ProtoBorrowed};\n-use ast::{re_self, re_anon, re_named, region, rem, required, ret_style};\n-use ast::{return_val, self_ty, shl, shr, stmt, stmt_decl, stmt_expr};\n-use ast::{stmt_semi, stmt_mac, struct_def, struct_field, struct_immutable};\n-use ast::{struct_mutable, struct_variant_kind, subtract, sty_box, sty_by_ref};\n-use ast::{sty_region, sty_static, sty_uniq, sty_value, token_tree};\n-use ast::{trait_method, trait_ref, tt_delim, tt_seq, tt_tok, tt_nonterminal};\n-use ast::{tuple_variant_kind, Ty, ty_, ty_bot, ty_box, ty_field, ty_fn};\n-use ast::{ty_fixed_length_vec, type_value_ns, uniq, unnamed_field};\n-use ast::{ty_infer, ty_mac, ty_method, ty_nil, ty_param, ty_param_bound};\n-use ast::{ty_path, ty_ptr, ty_rec, ty_rptr, ty_tup, ty_u32, ty_uniq, ty_vec};\n-use ast::{unsafe_blk, unsafe_fn, variant, view_item, view_item_};\n-use ast::{view_item_export, view_item_import, view_item_use, view_path};\n-use ast::{view_path_glob, view_path_list, view_path_simple, visibility};\n-use ast::{vstore, vstore_box, vstore_fixed, vstore_slice, vstore_uniq};\n+use ast::{named_field, neg, node_id, noreturn, not, pat, pat_box, pat_enum};\n+use ast::{pat_ident, pat_lit, pat_range, pat_rec, pat_region, pat_struct};\n+use ast::{pat_tup, pat_uniq, pat_wild, path, private, Proto, ProtoBare};\n+use ast::{ProtoBorrowed, re_self, re_anon, re_named, region, rem, required};\n+use ast::{ret_style, return_val, self_ty, shl, shr, stmt, stmt_decl};\n+use ast::{stmt_expr, stmt_semi, stmt_mac, struct_def, struct_field};\n+use ast::{struct_immutable, struct_mutable, struct_variant_kind, subtract};\n+use ast::{sty_box, sty_by_ref, sty_region, sty_static, sty_uniq, sty_value};\n+use ast::{token_tree, trait_method, trait_ref, tt_delim, tt_seq, tt_tok};\n+use ast::{tt_nonterminal, tuple_variant_kind, Ty, ty_, ty_bot, ty_box};\n+use ast::{ty_field, ty_fixed_length_vec, ty_fn, ty_infer, ty_mac, ty_method};\n+use ast::{ty_nil, ty_param, ty_param_bound, ty_path, ty_ptr, ty_rec, ty_rptr};\n+use ast::{ty_tup, ty_u32, ty_uniq, ty_vec, type_value_ns, uniq};\n+use ast::{unnamed_field, unsafe_blk, unsafe_fn, variant, view_item};\n+use ast::{view_item_, view_item_export, view_item_import, view_item_use};\n+use ast::{view_path, view_path_glob, view_path_list, view_path_simple};\n+use ast::{visibility, vstore, vstore_box, vstore_fixed, vstore_slice};\n+use ast::{vstore_uniq};\n use ast;\n use ast_util::{spanned, respan, mk_sp, ident_to_path, operator_prec};\n use ast_util;\n@@ -69,6 +72,7 @@ use parse::prec::{as_prec, token_to_binop};\n use parse::token::{can_begin_expr, is_ident, is_ident_or_path};\n use parse::token::{is_plain_ident, INTERPOLATED, special_idents};\n use parse::token;\n+use parse::{new_sub_parser_from_file, next_node_id, parse_sess};\n use print::pprust::expr_to_str;\n use util::interner::Interner;\n "}, {"sha": "107547771292b7abb1333a5f5ab4f8663e12c351", "filename": "src/libsyntax/parse/prec.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fparse%2Fprec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fparse%2Fprec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fprec.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -12,9 +12,11 @@ export as_prec;\n export unop_prec;\n export token_to_binop;\n \n+use ast::*;\n use parse::token::*;\n use parse::token::Token;\n-use ast::*;\n+\n+use core::prelude::*;\n \n /// Unary operators have higher precedence than binary\n const unop_prec: uint = 100u;"}, {"sha": "606247b8cbedeb7e5955ee330fe0081cb0ba760b", "filename": "src/libsyntax/parse/token.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fparse%2Ftoken.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fparse%2Ftoken.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Ftoken.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n+\n use ast;\n use ast_util;\n use parse::token;"}, {"sha": "b3b267027ce7e8fe8c4e6a817441a9ad338037bd", "filename": "src/libsyntax/print/pp.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fprint%2Fpp.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fprint%2Fpp.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fprint%2Fpp.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n+\n use core::cmp;\n use core::dvec::DVec;\n use core::io::WriterUtil;"}, {"sha": "c121bc30b96a38e5571015cd1e8b9f9382d4eb55", "filename": "src/libsyntax/print/pprust.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fprint%2Fpprust.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fprint%2Fpprust.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fprint%2Fpprust.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n+\n use ast::{required, provided};\n use ast;\n use ast_util;\n@@ -16,9 +18,9 @@ use attr;\n use codemap::{CodeMap, BytePos};\n use codemap;\n use diagnostic;\n-use parse::classify::*;\n+use parse::classify::{expr_is_simple_block, expr_requires_semi_to_be_stmt};\n+use parse::classify::{stmt_ends_with_semi};\n use parse::token::ident_interner;\n-use parse::token;\n use parse::{comments, lexer, token};\n use parse;\n use print::pp::{break_offset, word, printer, space, zerobreak, hardbreak};"}, {"sha": "fd759a3294158f1180649498110cdb442aded075", "filename": "src/libsyntax/util/interner.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Futil%2Finterner.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Futil%2Finterner.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Futil%2Finterner.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -11,12 +11,12 @@\n // An \"interner\" is a data structure that associates values with uint tags and\n // allows bidirectional lookup; i.e. given a value, one can easily find the\n // type, and vice versa.\n-use std::map;\n+\n+use core::prelude::*;\n+\n+use core::dvec::DVec;\n use std::map::HashMap;\n-use dvec::DVec;\n-use cmp::Eq;\n-use hash::Hash;\n-use to_bytes::IterBytes;\n+use std::map;\n \n type hash_interner<T: Const> =\n     {map: HashMap<T, uint>,"}, {"sha": "3f7ba2dc37bd14f64eff02f119c5af9bccd392b4", "filename": "src/libsyntax/visit.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fvisit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Flibsyntax%2Fvisit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fvisit.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use core::prelude::*;\n+\n use ast::*;\n use ast;\n use ast_util;"}, {"sha": "b0be34508b332036b92107a198ac11371f5a197c", "filename": "src/test/bench/task-perf-word-count-generic.rs", "status": "modified", "additions": 31, "deletions": 21, "changes": 52, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Ftest%2Fbench%2Ftask-perf-word-count-generic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Ftest%2Fbench%2Ftask-perf-word-count-generic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Ftask-perf-word-count-generic.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -45,9 +45,9 @@ trait word_reader {\n     fn read_word() -> Option<~str>;\n }\n \n-// These used to be in task, but they disappeard.\n-type joinable_task = Port<()>;\n-fn spawn_joinable(+f: fn~()) -> joinable_task {\n+// These used to be in task, but they disappeared.\n+pub type joinable_task = Port<()>;\n+pub fn spawn_joinable(+f: fn~()) -> joinable_task {\n     let p = Port();\n     let c = Chan(&p);\n     do task::spawn() |move f| {\n@@ -57,7 +57,7 @@ fn spawn_joinable(+f: fn~()) -> joinable_task {\n     p\n }\n \n-fn join(t: joinable_task) {\n+pub fn join(t: joinable_task) {\n     t.recv()\n }\n \n@@ -90,11 +90,11 @@ fn reduce(word: &~str, get: map_reduce::getter<int>) {\n     io::println(fmt!(\"%s\\t%?\", *word, count));\n }\n \n-struct box<T> {\n+pub struct box<T> {\n     mut contents: Option<T>,\n }\n \n-impl<T> box<T> {\n+pub impl<T> box<T> {\n     fn swap(f: fn(+v: T) -> T) {\n         let mut tmp = None;\n         self.contents <-> tmp;\n@@ -108,13 +108,16 @@ impl<T> box<T> {\n     }\n }\n \n-fn box<T>(+x: T) -> box<T> {\n+pub fn box<T>(+x: T) -> box<T> {\n     box {\n         contents: Some(move x)\n     }\n }\n \n mod map_reduce {\n+    use core::oldcomm::*;\n+\n+    use std::map::HashMap;\n     use std::map;\n \n     pub type putter<K: Owned, V: Owned> = fn(&K, V);\n@@ -126,7 +129,7 @@ mod map_reduce {\n     pub type reducer<K: Copy Owned, V: Copy Owned> = fn~(&K, getter<V>);\n \n     enum ctrl_proto<K: Copy Owned, V: Copy Owned> {\n-        find_reducer(K, Chan<Chan<reduce_proto<V>>>),\n+        find_reducer(K, Chan<Chan<::map_reduce::reduce_proto<V>>>),\n         mapper_done\n     }\n \n@@ -138,43 +141,49 @@ mod map_reduce {\n         }\n \n         reducer_response: recv<K: Copy Owned, V: Copy Owned> {\n-            reducer(Chan<reduce_proto<V>>) -> open<K, V>\n+            reducer(::core::oldcomm::Chan<::map_reduce::reduce_proto<V>>)\n+                -> open<K, V>\n         }\n     )\n \n-    enum reduce_proto<V: Copy Owned> { emit_val(V), done, addref, release }\n+    pub enum reduce_proto<V: Copy Owned> {\n+        emit_val(V),\n+        done,\n+        addref,\n+        release\n+    }\n \n     fn start_mappers<K1: Copy Owned, K2: Hash IterBytes Eq Const Copy Owned,\n                      V: Copy Owned>(\n         map: &mapper<K1, K2, V>,\n         ctrls: &mut ~[ctrl_proto::server::open<K2, V>],\n         inputs: &~[K1])\n-        -> ~[joinable_task]\n+        -> ~[::joinable_task]\n     {\n         let mut tasks = ~[];\n         for inputs.each |i| {\n             let (ctrl, ctrl_server) = ctrl_proto::init();\n-            let ctrl = box(move ctrl);\n+            let ctrl = ::box(move ctrl);\n             let i = copy *i;\n             let m = copy *map;\n-            tasks.push(spawn_joinable(|move ctrl, move i| map_task(copy m, &ctrl, i)));\n+            tasks.push(::spawn_joinable(|move ctrl, move i| map_task(copy m, &ctrl, i)));\n             ctrls.push(move ctrl_server);\n         }\n         move tasks\n     }\n \n     fn map_task<K1: Copy Owned, K2: Hash IterBytes Eq Const Copy Owned, V: Copy Owned>(\n         map: mapper<K1, K2, V>,\n-        ctrl: &box<ctrl_proto::client::open<K2, V>>,\n+        ctrl: &::box<ctrl_proto::client::open<K2, V>>,\n         input: K1)\n     {\n         // log(error, \"map_task \" + input);\n-        let intermediates: HashMap<K2, Chan<reduce_proto<V>>>\n+        let intermediates: HashMap<K2, Chan<::map_reduce::reduce_proto<V>>>\n             = map::HashMap();\n \n         do map(input) |key: &K2, val| {\n             let mut c = None;\n-            let found: Option<Chan<reduce_proto<V>>>\n+            let found: Option<Chan<::map_reduce::reduce_proto<V>>>\n                 = intermediates.find(*key);\n             match found {\n               Some(_c) => { c = Some(_c); }\n@@ -195,7 +204,8 @@ mod map_reduce {\n             send(c.get(), emit_val(val));\n         }\n \n-        fn finish<K: Copy Owned, V: Copy Owned>(_k: K, v: Chan<reduce_proto<V>>)\n+        fn finish<K: Copy Owned, V: Copy Owned>(\n+            _k: K, v: Chan<::map_reduce::reduce_proto<V>>)\n         {\n             send(v, release);\n         }\n@@ -206,7 +216,7 @@ mod map_reduce {\n     fn reduce_task<K: Copy Owned, V: Copy Owned>(\n         reduce: ~reducer<K, V>, \n         key: K,\n-        out: Chan<Chan<reduce_proto<V>>>)\n+        out: Chan<Chan<::map_reduce::reduce_proto<V>>>)\n     {\n         let p = Port();\n \n@@ -215,7 +225,7 @@ mod map_reduce {\n         let mut ref_count = 0;\n         let mut is_done = false;\n \n-        fn get<V: Copy Owned>(p: Port<reduce_proto<V>>,\n+        fn get<V: Copy Owned>(p: Port<::map_reduce::reduce_proto<V>>,\n                              ref_count: &mut int, is_done: &mut bool)\n            -> Option<V> {\n             while !*is_done || *ref_count > 0 {\n@@ -274,7 +284,7 @@ mod map_reduce {\n                     let p = Port();\n                     let ch = Chan(&p);\n                     let r = copy reduce, kk = k;\n-                    tasks.push(spawn_joinable(|move r|\n+                    tasks.push(::spawn_joinable(|move r|\n                         reduce_task(~copy r, kk, ch)\n                     ));\n                     c = recv(p);\n@@ -290,7 +300,7 @@ mod map_reduce {\n \n         for reducers.each_value |v| { send(v, done) }\n \n-        for tasks.each |t| { join(*t); }\n+        for tasks.each |t| { ::join(*t); }\n     }\n }\n "}, {"sha": "21d4fa8eab8808a29c592413992512ce3839d3f3", "filename": "src/test/compile-fail/copy-into-closure.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Ftest%2Fcompile-fail%2Fcopy-into-closure.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Ftest%2Fcompile-fail%2Fcopy-into-closure.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fcopy-into-closure.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,17 +8,17 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-fn closure2(+x: util::NonCopyable) -> (util::NonCopyable,\n-                                       fn@() -> util::NonCopyable) {\n-    let f = fn@(copy x) -> util::NonCopyable {\n+fn closure2(+x: core::util::NonCopyable)\n+        -> (core::util::NonCopyable, fn@() -> core::util::NonCopyable) {\n+    let f = fn@(copy x) -> core::util::NonCopyable {\n         //~^ ERROR copying a noncopyable value\n         //~^^ NOTE non-copyable value cannot be copied into a @fn closure\n         copy x\n         //~^ ERROR copying a noncopyable value\n     };\n     (move x,f)\n }\n-fn closure3(+x: util::NonCopyable) {\n+fn closure3(+x: core::util::NonCopyable) {\n     do task::spawn |copy x| {\n         //~^ ERROR copying a noncopyable value\n         //~^^ NOTE non-copyable value cannot be copied into a ~fn closure"}, {"sha": "2332d54037fbd567bdaf183bc90072af0fabd634", "filename": "src/test/compile-fail/issue-2718-a.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Ftest%2Fcompile-fail%2Fissue-2718-a.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Ftest%2Fcompile-fail%2Fissue-2718-a.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-2718-a.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -8,15 +8,15 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-struct send_packet<T: Copy> {\n+pub struct send_packet<T: Copy> {\n   p: T\n }\n \n \n mod pingpong {\n-    #[legacy_exports];\n-    type ping = send_packet<pong>;\n-    enum pong = send_packet<ping>; //~ ERROR illegal recursive enum type; wrap the inner value in a box to make it representable\n+    use send_packet;\n+    pub type ping = send_packet<pong>;\n+    pub enum pong = send_packet<ping>; //~ ERROR illegal recursive enum type; wrap the inner value in a box to make it representable\n }\n \n fn main() {}"}, {"sha": "25a4c29244c6010a01e6619a8b993dec5cd60135", "filename": "src/test/run-pass/export-non-interference2.rs", "status": "modified", "additions": 2, "deletions": 7, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Ftest%2Frun-pass%2Fexport-non-interference2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Ftest%2Frun-pass%2Fexport-non-interference2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fexport-non-interference2.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -9,16 +9,11 @@\n // except according to those terms.\n \n mod foo {\n-    #[legacy_exports];\n-\n-    export bar;\n-\n     mod bar {\n-        #[legacy_exports];\n-        fn y() { x(); }\n+        pub fn y() { ::foo::x(); }\n     }\n \n-    fn x() { debug!(\"x\"); }\n+    pub fn x() { debug!(\"x\"); }\n }\n \n fn main() { foo::bar::y(); }"}, {"sha": "6232f0c6e06d8d1fe958a8c002f6e7edd6e72c84", "filename": "src/test/run-pass/hashmap-memory.rs", "status": "modified", "additions": 10, "deletions": 6, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Ftest%2Frun-pass%2Fhashmap-memory.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Ftest%2Frun-pass%2Fhashmap-memory.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fhashmap-memory.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -20,16 +20,20 @@ extern mod std;\n \n use std::map;\n use std::map::HashMap;\n-use oldcomm::Chan;\n-use oldcomm::Port;\n-use oldcomm::send;\n-use oldcomm::recv;\n+use core::oldcomm::Chan;\n+use core::oldcomm::Port;\n+use core::oldcomm::send;\n+use core::oldcomm::recv;\n \n-fn map(filename: ~str, emit: map_reduce::putter) { emit(filename, ~\"1\"); }\n+pub fn map(filename: ~str, emit: map_reduce::putter) { emit(filename, ~\"1\"); }\n \n mod map_reduce {\n     use std::map;\n     use std::map::HashMap;\n+    use core::oldcomm::Chan;\n+    use core::oldcomm::Port;\n+    use core::oldcomm::send;\n+    use core::oldcomm::recv;\n \n     pub type putter = fn@(~str, ~str);\n \n@@ -64,7 +68,7 @@ mod map_reduce {\n             }\n         }\n \n-        map(input, |a,b| emit(intermediates, ctrl, a, b) );\n+        ::map(input, |a,b| emit(intermediates, ctrl, a, b) );\n         send(ctrl, mapper_done);\n     }\n "}, {"sha": "7c35c9e8cf1ac2364a0eb4b091d625682d72f7d4", "filename": "src/test/run-pass/issue-2718.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Ftest%2Frun-pass%2Fissue-2718.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Ftest%2Frun-pass%2Fissue-2718.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissue-2718.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -250,7 +250,7 @@ pub mod pingpong {\n         pub fn do_ping(-c: ping) -> pong {\n             let (sp, rp) = ::pipes::entangle();\n \n-            ::pipes::send(move c, ping(move sp));\n+            ::pipes::send(move c, pingpong::ping(move sp));\n             move rp\n         }\n \n@@ -259,7 +259,7 @@ pub mod pingpong {\n             if packet.is_none() {\n                 fail ~\"sender closed the connection\"\n             }\n-            (liberate_pong(option::unwrap(move packet)), ())\n+            (pingpong::liberate_pong(option::unwrap(move packet)), ())\n         }\n     }\n \n@@ -274,12 +274,12 @@ pub mod pingpong {\n             if packet.is_none() {\n                 fail ~\"sender closed the connection\"\n             }\n-            (liberate_ping(option::unwrap(move packet)), ())\n+            (pingpong::liberate_ping(option::unwrap(move packet)), ())\n         }\n \n         pub fn do_pong(-c: pong) -> ping {\n             let (sp, rp) = ::pipes::entangle();\n-            ::pipes::send(move c, pong(move sp));\n+            ::pipes::send(move c, pingpong::pong(move sp));\n             move rp\n         }\n     }"}, {"sha": "856057e10ae8327b942111c4601e0b1c7f9cf9f4", "filename": "src/test/run-pass/pipe-bank-proto.rs", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Ftest%2Frun-pass%2Fpipe-bank-proto.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Ftest%2Frun-pass%2Fpipe-bank-proto.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fpipe-bank-proto.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -17,14 +17,14 @@\n \n use pipes::try_recv;\n \n-type username = ~str;\n-type password = ~str;\n-type money = float;\n-type amount = float;\n+pub type username = ~str;\n+pub type password = ~str;\n+pub type money = float;\n+pub type amount = float;\n \n proto! bank (\n     login:send {\n-        login(username, password) -> login_response\n+        login(::username, ::password) -> login_response\n     }\n \n     login_response:recv {\n@@ -33,12 +33,12 @@ proto! bank (\n     }\n \n     connected:send {\n-        deposit(money) -> connected,\n-        withdrawal(amount) -> withdrawal_response\n+        deposit(::money) -> connected,\n+        withdrawal(::amount) -> withdrawal_response\n     }\n \n     withdrawal_response:recv {\n-        money(money) -> connected,\n+        money(::money) -> connected,\n         insufficient_funds -> connected\n     }\n )"}, {"sha": "774e3544d891db2a11af4899c3e4eb47d83d36f1", "filename": "src/test/run-pass/pipe-pingpong-bounded.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Ftest%2Frun-pass%2Fpipe-pingpong-bounded.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Ftest%2Frun-pass%2Fpipe-pingpong-bounded.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fpipe-pingpong-bounded.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -43,6 +43,7 @@ mod pingpong {\n     pub enum ping = server::pong;\n     pub enum pong = client::ping;\n     pub mod client {\n+        use core::pipes::*;\n         use core::ptr;\n \n         pub fn ping(+pipe: ping) -> pong {\n@@ -61,6 +62,7 @@ mod pingpong {\n                                                   ::pingpong::packets>;\n     }\n     pub mod server {\n+        use core::pipes::*;\n         use core::ptr;\n \n         pub type ping = pipes::RecvPacketBuffered<::pingpong::ping,"}, {"sha": "0fe845dd1f934196ed369ba21657f8f32412ab67", "filename": "src/test/run-pass/pipe-presentation-examples.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Ftest%2Frun-pass%2Fpipe-presentation-examples.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Ftest%2Frun-pass%2Fpipe-presentation-examples.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fpipe-presentation-examples.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -75,12 +75,12 @@ macro_rules! select (\n )\n \n // Types and protocols\n-struct Buffer {\n+pub struct Buffer {\n     foo: (),\n \n }\n \n-impl Buffer : Drop {\n+pub impl Buffer : Drop {\n     fn finalize(&self) {}\n }\n \n@@ -90,11 +90,11 @@ proto! double_buffer (\n     }\n \n     wait_buffer:recv {\n-        give_buffer(Buffer) -> release\n+        give_buffer(::Buffer) -> release\n     }\n \n     release:send {\n-        release(Buffer) -> acquire\n+        release(::Buffer) -> acquire\n     }\n )\n "}, {"sha": "3e66c18d58b8f77dccf793bdfb8fec7f70b21c88", "filename": "src/test/run-pass/reflect-visit-data.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Ftest%2Frun-pass%2Freflect-visit-data.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Ftest%2Frun-pass%2Freflect-visit-data.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Freflect-visit-data.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -11,6 +11,7 @@\n // xfail-fast\n #[legacy_modes];\n \n+use core::bool;\n use intrinsic::{TyDesc, get_tydesc, visit_tydesc, TyVisitor};\n use libc::c_void;\n use vec::UnboxedVecRepr;"}, {"sha": "6987dfab1b5a3d159fca9955ea266011f6f31d72", "filename": "src/test/run-pass/static-impl.rs", "status": "modified", "additions": 5, "deletions": 7, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Ftest%2Frun-pass%2Fstatic-impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8d37af2473da79be704c9ce2374f278c47177b6/src%2Ftest%2Frun-pass%2Fstatic-impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fstatic-impl.rs?ref=a8d37af2473da79be704c9ce2374f278c47177b6", "patch": "@@ -11,20 +11,18 @@\n // xfail-fast\n #[legacy_modes];\n \n-use a::*;\n-\n-trait plus {\n+pub trait plus {\n     fn plus() -> int;\n }\n \n mod a {\n-    #[legacy_exports];\n-    impl uint: plus { fn plus() -> int { self as int + 20 } }\n+    use plus;\n+    pub impl uint: plus { fn plus() -> int { self as int + 20 } }\n }\n \n mod b {\n-    #[legacy_exports];\n-    impl ~str: plus { fn plus() -> int { 200 } }\n+    use plus;\n+    pub impl ~str: plus { fn plus() -> int { 200 } }\n }\n \n trait uint_utils {"}]}