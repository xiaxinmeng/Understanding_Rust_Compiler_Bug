{"sha": "eeebfd667bd1524476229ecb910f9751405e85c7", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVlZWJmZDY2N2JkMTUyNDQ3NjIyOWVjYjkxMGY5NzUxNDA1ZTg1Yzc=", "commit": {"author": {"name": "Edward Yang", "email": "edward.yang6771@gmail.com", "date": "2017-05-30T02:31:33Z"}, "committer": {"name": "Edward Yang", "email": "edward.yang6771@gmail.com", "date": "2017-05-30T02:31:33Z"}, "message": "Add RLS to .exe and .msi installers", "tree": {"sha": "39379a83c29cb2e834e75bf06f6c4769a5ac4935", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/39379a83c29cb2e834e75bf06f6c4769a5ac4935"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/eeebfd667bd1524476229ecb910f9751405e85c7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/eeebfd667bd1524476229ecb910f9751405e85c7", "html_url": "https://github.com/rust-lang/rust/commit/eeebfd667bd1524476229ecb910f9751405e85c7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/eeebfd667bd1524476229ecb910f9751405e85c7/comments", "author": {"login": "efyang", "id": 10342494, "node_id": "MDQ6VXNlcjEwMzQyNDk0", "avatar_url": "https://avatars.githubusercontent.com/u/10342494?v=4", "gravatar_id": "", "url": "https://api.github.com/users/efyang", "html_url": "https://github.com/efyang", "followers_url": "https://api.github.com/users/efyang/followers", "following_url": "https://api.github.com/users/efyang/following{/other_user}", "gists_url": "https://api.github.com/users/efyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/efyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/efyang/subscriptions", "organizations_url": "https://api.github.com/users/efyang/orgs", "repos_url": "https://api.github.com/users/efyang/repos", "events_url": "https://api.github.com/users/efyang/events{/privacy}", "received_events_url": "https://api.github.com/users/efyang/received_events", "type": "User", "site_admin": false}, "committer": {"login": "efyang", "id": 10342494, "node_id": "MDQ6VXNlcjEwMzQyNDk0", "avatar_url": "https://avatars.githubusercontent.com/u/10342494?v=4", "gravatar_id": "", "url": "https://api.github.com/users/efyang", "html_url": "https://github.com/efyang", "followers_url": "https://api.github.com/users/efyang/followers", "following_url": "https://api.github.com/users/efyang/following{/other_user}", "gists_url": "https://api.github.com/users/efyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/efyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/efyang/subscriptions", "organizations_url": "https://api.github.com/users/efyang/orgs", "repos_url": "https://api.github.com/users/efyang/repos", "events_url": "https://api.github.com/users/efyang/events{/privacy}", "received_events_url": "https://api.github.com/users/efyang/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5d2512ec5b03a1155054df881e40e35fc87d6351", "url": "https://api.github.com/repos/rust-lang/rust/commits/5d2512ec5b03a1155054df881e40e35fc87d6351", "html_url": "https://github.com/rust-lang/rust/commit/5d2512ec5b03a1155054df881e40e35fc87d6351"}], "stats": {"total": 49, "additions": 49, "deletions": 0}, "files": [{"sha": "8a8e5539ef05dad360bc6a85f6e772e89a5e8ce4", "filename": "src/bootstrap/dist.rs", "status": "modified", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/eeebfd667bd1524476229ecb910f9751405e85c7/src%2Fbootstrap%2Fdist.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eeebfd667bd1524476229ecb910f9751405e85c7/src%2Fbootstrap%2Fdist.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fdist.rs?ref=eeebfd667bd1524476229ecb910f9751405e85c7", "patch": "@@ -949,6 +949,8 @@ pub fn extended(build: &Build, stage: u32, target: &str) {\n         let _ = fs::remove_dir_all(&exe);\n         t!(fs::create_dir_all(exe.join(\"rustc\")));\n         t!(fs::create_dir_all(exe.join(\"cargo\")));\n+        t!(fs::create_dir_all(exe.join(\"rls\")));\n+        t!(fs::create_dir_all(exe.join(\"rust-analysis\")));\n         t!(fs::create_dir_all(exe.join(\"rust-docs\")));\n         t!(fs::create_dir_all(exe.join(\"rust-std\")));\n         cp_r(&work.join(&format!(\"{}-{}\", pkgname(build, \"rustc\"), target))\n@@ -963,11 +965,19 @@ pub fn extended(build: &Build, stage: u32, target: &str) {\n         cp_r(&work.join(&format!(\"{}-{}\", pkgname(build, \"rust-std\"), target))\n                   .join(format!(\"rust-std-{}\", target)),\n              &exe.join(\"rust-std\"));\n+        cp_r(&work.join(&format!(\"{}-{}\", pkgname(build, \"rls\"), target))\n+                  .join(\"rls\"),\n+             &exe.join(\"rls\"));\n+        cp_r(&work.join(&format!(\"{}-{}\", pkgname(build, \"rust-analysis\"), target))\n+                  .join(format!(\"rust-analysis-{}\", target)),\n+             &exe.join(\"rust-analysis\"));\n \n         t!(fs::remove_file(exe.join(\"rustc/manifest.in\")));\n         t!(fs::remove_file(exe.join(\"cargo/manifest.in\")));\n         t!(fs::remove_file(exe.join(\"rust-docs/manifest.in\")));\n         t!(fs::remove_file(exe.join(\"rust-std/manifest.in\")));\n+        t!(fs::remove_file(exe.join(\"rls/manifest.in\")));\n+        t!(fs::remove_file(exe.join(\"rust-analysis/manifest.in\")));\n \n         if target.contains(\"windows-gnu\") {\n             t!(fs::create_dir_all(exe.join(\"rust-mingw\")));\n@@ -1041,6 +1051,26 @@ pub fn extended(build: &Build, stage: u32, target: &str) {\n                         .arg(\"-dr\").arg(\"Std\")\n                         .arg(\"-var\").arg(\"var.StdDir\")\n                         .arg(\"-out\").arg(exe.join(\"StdGroup.wxs\")));\n+        build.run(Command::new(&heat)\n+                        .current_dir(&exe)\n+                        .arg(\"dir\")\n+                        .arg(\"rls\")\n+                        .args(&heat_flags)\n+                        .arg(\"-cg\").arg(\"RlsGroup\")\n+                        .arg(\"-dr\").arg(\"Rls\")\n+                        .arg(\"-var\").arg(\"var.RlsDir\")\n+                        .arg(\"-out\").arg(exe.join(\"RlsGroup.wxs\"))\n+                        .arg(\"-t\").arg(etc.join(\"msi/remove-duplicates.xsl\")));\n+        build.run(Command::new(&heat)\n+                        .current_dir(&exe)\n+                        .arg(\"dir\")\n+                        .arg(\"rust-analysis\")\n+                        .args(&heat_flags)\n+                        .arg(\"-cg\").arg(\"AnalysisGroup\")\n+                        .arg(\"-dr\").arg(\"Analysis\")\n+                        .arg(\"-var\").arg(\"var.AnalysisDir\")\n+                        .arg(\"-out\").arg(exe.join(\"AnalysisGroup.wxs\"))\n+                        .arg(\"-t\").arg(etc.join(\"msi/remove-duplicates.xsl\")));\n         if target.contains(\"windows-gnu\") {\n             build.run(Command::new(&heat)\n                             .current_dir(&exe)\n@@ -1064,6 +1094,8 @@ pub fn extended(build: &Build, stage: u32, target: &str) {\n                .arg(\"-dDocsDir=rust-docs\")\n                .arg(\"-dCargoDir=cargo\")\n                .arg(\"-dStdDir=rust-std\")\n+               .arg(\"-dRlsDir=rls\")\n+               .arg(\"-dAnalysisDir=rust-analysis\")\n                .arg(\"-arch\").arg(&arch)\n                .arg(\"-out\").arg(&output)\n                .arg(&input);\n@@ -1081,6 +1113,8 @@ pub fn extended(build: &Build, stage: u32, target: &str) {\n         candle(\"DocsGroup.wxs\".as_ref());\n         candle(\"CargoGroup.wxs\".as_ref());\n         candle(\"StdGroup.wxs\".as_ref());\n+        candle(\"RlsGroup.wxs\".as_ref());\n+        candle(\"AnalysisGroup.wxs\".as_ref());\n \n         if target.contains(\"windows-gnu\") {\n             candle(\"GccGroup.wxs\".as_ref());\n@@ -1103,6 +1137,8 @@ pub fn extended(build: &Build, stage: u32, target: &str) {\n            .arg(\"DocsGroup.wixobj\")\n            .arg(\"CargoGroup.wixobj\")\n            .arg(\"StdGroup.wixobj\")\n+           .arg(\"RlsGroup.wixobj\")\n+           .arg(\"AnalysisGroup.wixobj\")\n            .current_dir(&exe);\n \n         if target.contains(\"windows-gnu\") {"}, {"sha": "e7d4ec61946869369ef89227b34034d12bce616c", "filename": "src/etc/installer/exe/rust.iss", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/eeebfd667bd1524476229ecb910f9751405e85c7/src%2Fetc%2Finstaller%2Fexe%2Frust.iss", "raw_url": "https://github.com/rust-lang/rust/raw/eeebfd667bd1524476229ecb910f9751405e85c7/src%2Fetc%2Finstaller%2Fexe%2Frust.iss", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Finstaller%2Fexe%2Frust.iss?ref=eeebfd667bd1524476229ecb910f9751405e85c7", "patch": "@@ -46,6 +46,7 @@ Name: gcc; Description: \"Linker and platform libraries\"; Types: full\n Name: docs; Description: \"HTML documentation\"; Types: full\n Name: cargo; Description: \"Cargo, the Rust package manager\"; Types: full\n Name: std; Description: \"The Rust Standard Library\"; Types: full\n+Name: rls; Description: \"RLS, the Rust Language Server\"\n \n [Files]\n Source: \"rustc/*.*\"; DestDir: \"{app}\"; Flags: ignoreversion recursesubdirs; Components: rust\n@@ -55,6 +56,8 @@ Source: \"rust-mingw/*.*\"; DestDir: \"{app}\"; Flags: ignoreversion recursesubdirs;\n Source: \"rust-docs/*.*\"; DestDir: \"{app}\"; Flags: ignoreversion recursesubdirs; Components: docs\n Source: \"cargo/*.*\"; DestDir: \"{app}\"; Flags: ignoreversion recursesubdirs; Components: cargo\n Source: \"rust-std/*.*\"; DestDir: \"{app}\"; Flags: ignoreversion recursesubdirs; Components: std\n+Source: \"rls/*.*\"; DestDir: \"{app}\"; Flags: ignoreversion recursesubdirs; Components: rls\n+Source: \"rust-analysis/*.*\"; DestDir: \"{app}\"; Flags: ignoreversion recursesubdirs; Components: rls\n \n [Code]\n const"}, {"sha": "258291cbb72e1e2d9ab4b8dabf78ee8e8d5698df", "filename": "src/etc/installer/msi/rust.wxs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/eeebfd667bd1524476229ecb910f9751405e85c7/src%2Fetc%2Finstaller%2Fmsi%2Frust.wxs", "raw_url": "https://github.com/rust-lang/rust/raw/eeebfd667bd1524476229ecb910f9751405e85c7/src%2Fetc%2Finstaller%2Fmsi%2Frust.wxs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Finstaller%2Fmsi%2Frust.wxs?ref=eeebfd667bd1524476229ecb910f9751405e85c7", "patch": "@@ -170,6 +170,8 @@\n                     <Directory Id=\"Docs\" Name=\".\" />\n                     <Directory Id=\"Cargo\" Name=\".\" />\n                     <Directory Id=\"Std\" Name=\".\" />\n+                    <Directory Id=\"Rls\" Name=\".\" />\n+                    <Directory Id=\"Analysis\" Name=\".\" />\n                 </Directory>\n             </Directory>\n \n@@ -273,6 +275,14 @@\n                  <ComponentRef Id=\"PathEnvPerMachine\" />\n                  <ComponentRef Id=\"PathEnvPerUser\" />\n         </Feature>\n+        <Feature Id=\"RLS\"\n+                 Title=\"RLS, the Rust Language Server\"\n+                 Display=\"7\"\n+                 Level=\"2\"\n+                 AllowAdvertise=\"no\">\n+                 <ComponentGroupRef Id=\"RlsGroup\" />\n+                 <ComponentGroupRef Id=\"AnalysisGroup\" />\n+        </Feature>\n \n         <UIRef Id=\"RustUI\" />\n     </Product>"}]}