{"sha": "1417f26f820bd6428b528c3dc6127fabb084115a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE0MTdmMjZmODIwYmQ2NDI4YjUyOGMzZGM2MTI3ZmFiYjA4NDExNWE=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-01-28T08:18:17Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-01-28T08:18:17Z"}, "message": "Document the design of `FileBuilder`", "tree": {"sha": "a943a0920b2eeb4be44eca9987aae6302bb9fac2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a943a0920b2eeb4be44eca9987aae6302bb9fac2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1417f26f820bd6428b528c3dc6127fabb084115a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1417f26f820bd6428b528c3dc6127fabb084115a", "html_url": "https://github.com/rust-lang/rust/commit/1417f26f820bd6428b528c3dc6127fabb084115a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1417f26f820bd6428b528c3dc6127fabb084115a/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "efadcf715862a2d96af0f57d2b53bfa325390779", "url": "https://api.github.com/repos/rust-lang/rust/commits/efadcf715862a2d96af0f57d2b53bfa325390779", "html_url": "https://github.com/rust-lang/rust/commit/efadcf715862a2d96af0f57d2b53bfa325390779"}], "stats": {"total": 21, "additions": 14, "deletions": 7}, "files": [{"sha": "2d8ddade0da29741c34c6900cb4778a76565c414", "filename": "src/lib.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/1417f26f820bd6428b528c3dc6127fabb084115a/src%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1417f26f820bd6428b528c3dc6127fabb084115a/src%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib.rs?ref=1417f26f820bd6428b528c3dc6127fabb084115a", "patch": "@@ -26,7 +26,8 @@ mod parser;\n #[allow(missing_docs)]\n pub mod syntax_kinds;\n pub use text::{TextRange, TextUnit};\n-pub use tree::{File, FileBuilder, Node, Sink, SyntaxKind, Token};\n+pub use tree::{File, Node, SyntaxKind, Token};\n+pub(crate) use tree::{FileBuilder, Sink};\n pub use lexer::{next_token, tokenize};\n pub use parser::parse;\n "}, {"sha": "47038496de93612555063381623fe58545209c03", "filename": "src/tree/file_builder.rs", "status": "modified", "additions": 11, "deletions": 5, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/1417f26f820bd6428b528c3dc6127fabb084115a/src%2Ftree%2Ffile_builder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1417f26f820bd6428b528c3dc6127fabb084115a/src%2Ftree%2Ffile_builder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftree%2Ffile_builder.rs?ref=1417f26f820bd6428b528c3dc6127fabb084115a", "patch": "@@ -1,18 +1,24 @@\n-// FIXME(CAD97): I don't understand this mod well enough to stub out docs for the public symbols yet\n-#![allow(missing_docs)]\n-\n+//! This module provides a way to construct a `File`.\n+//! It is intended to be completely decoupled from the\n+//! parser, so as to allow to evolve the tree representation\n+//! and the parser algorithm independently.\n+//!\n+//! The `Sink` trait is the bridge between the parser and the\n+//! tree builder: the parser produces a stream of events like\n+//! `start node`, `finish node`, and `FileBuilder` converts\n+//! this stream to a real tree.\n use {SyntaxKind, TextRange, TextUnit};\n use super::{File, NodeData, NodeIdx, SyntaxErrorData};\n \n-pub trait Sink {\n+pub(crate) trait Sink {\n     fn leaf(&mut self, kind: SyntaxKind, len: TextUnit);\n     fn start_internal(&mut self, kind: SyntaxKind);\n     fn finish_internal(&mut self);\n     fn error(&mut self) -> ErrorBuilder;\n }\n \n #[derive(Debug)]\n-pub struct FileBuilder {\n+pub(crate) struct FileBuilder {\n     text: String,\n     nodes: Vec<NodeData>,\n     errors: Vec<SyntaxErrorData>,"}, {"sha": "30a4b33a9dfb737fb01d8a6bf9189024f29ba2db", "filename": "src/tree/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1417f26f820bd6428b528c3dc6127fabb084115a/src%2Ftree%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1417f26f820bd6428b528c3dc6127fabb084115a/src%2Ftree%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftree%2Fmod.rs?ref=1417f26f820bd6428b528c3dc6127fabb084115a", "patch": "@@ -5,7 +5,7 @@ use std::fmt;\n use std::cmp;\n \n mod file_builder;\n-pub use self::file_builder::{FileBuilder, Sink};\n+pub(crate) use self::file_builder::{FileBuilder, Sink};\n \n /// The kind of syntax node, e.g. `IDENT`, `USE_KW`, or `STRUCT_DEF`.\n #[derive(Clone, Copy, PartialEq, Eq, PartialOrd, Ord, Hash)]"}]}