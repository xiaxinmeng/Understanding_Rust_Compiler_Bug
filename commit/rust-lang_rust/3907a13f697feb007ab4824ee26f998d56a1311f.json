{"sha": "3907a13f697feb007ab4824ee26f998d56a1311f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM5MDdhMTNmNjk3ZmViMDA3YWI0ODI0ZWUyNmY5OThkNTZhMTMxMWY=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-09-22T10:55:26Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-09-22T10:55:26Z"}, "message": "auto merge of #17425 : klutzy/rust/win-backtrace, r=alexcrichton\n\nFixes #17372", "tree": {"sha": "0d3532010bd471daf38e68ecfb9c3f389242b5cf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0d3532010bd471daf38e68ecfb9c3f389242b5cf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3907a13f697feb007ab4824ee26f998d56a1311f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3907a13f697feb007ab4824ee26f998d56a1311f", "html_url": "https://github.com/rust-lang/rust/commit/3907a13f697feb007ab4824ee26f998d56a1311f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3907a13f697feb007ab4824ee26f998d56a1311f/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8a458181dd7fef8df0bb488eee2c354a8ca4df4a", "url": "https://api.github.com/repos/rust-lang/rust/commits/8a458181dd7fef8df0bb488eee2c354a8ca4df4a", "html_url": "https://github.com/rust-lang/rust/commit/8a458181dd7fef8df0bb488eee2c354a8ca4df4a"}, {"sha": "3bc7d3da42280cc96265818918405dcf97e4087c", "url": "https://api.github.com/repos/rust-lang/rust/commits/3bc7d3da42280cc96265818918405dcf97e4087c", "html_url": "https://github.com/rust-lang/rust/commit/3bc7d3da42280cc96265818918405dcf97e4087c"}], "stats": {"total": 8, "additions": 5, "deletions": 3}, "files": [{"sha": "de5c26e03a3b32e27bd6fb2fe4002fef83953ba0", "filename": "src/libstd/rt/backtrace.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/3907a13f697feb007ab4824ee26f998d56a1311f/src%2Flibstd%2Frt%2Fbacktrace.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3907a13f697feb007ab4824ee26f998d56a1311f/src%2Flibstd%2Frt%2Fbacktrace.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Frt%2Fbacktrace.rs?ref=3907a13f697feb007ab4824ee26f998d56a1311f", "patch": "@@ -701,7 +701,7 @@ mod imp {\n     static IMAGE_FILE_MACHINE_IA64: libc::DWORD = 0x0200;\n     static IMAGE_FILE_MACHINE_AMD64: libc::DWORD = 0x8664;\n \n-    #[repr(C, packed)]\n+    #[repr(C)]\n     struct SYMBOL_INFO {\n         SizeOfStruct: libc::c_ulong,\n         TypeIndex: libc::c_ulong,\n@@ -983,8 +983,10 @@ mod imp {\n             try!(write!(w, \"  {:2}: {:#2$x}\", i, addr, super::HEX_WIDTH));\n             let mut info: SYMBOL_INFO = unsafe { intrinsics::init() };\n             info.MaxNameLen = MAX_SYM_NAME as libc::c_ulong;\n-            info.SizeOfStruct = (mem::size_of::<SYMBOL_INFO>() -\n-                                 info.Name.len() + 1) as libc::c_ulong;\n+            // the struct size in C.  the value is different to\n+            // `size_of::<SYMBOL_INFO>() - MAX_SYM_NAME + 1` (== 81)\n+            // due to struct alignment.\n+            info.SizeOfStruct = 88;\n \n             let mut displacement = 0u64;\n             let ret = SymFromAddr(process, addr as u64, &mut displacement,"}]}