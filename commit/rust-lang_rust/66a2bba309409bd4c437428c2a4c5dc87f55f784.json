{"sha": "66a2bba309409bd4c437428c2a4c5dc87f55f784", "node_id": "C_kwDOAAsO6NoAKDY2YTJiYmEzMDk0MDliZDRjNDM3NDI4YzJhNGM1ZGM4N2Y1NWY3ODQ", "commit": {"author": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2022-10-16T02:41:14Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-10-16T02:41:14Z"}, "message": "Rollup merge of #103088 - GuillaumeGomez:fix-settings-page, r=notriddle\n\nFix settings page\n\nThanks to https://github.com/rust-lang/rust/pull/103060, I discovered that the settings page was badly rendered. This PR fixes it.\n\nBefore:\n![Screenshot from 2022-10-15 16-02-41](https://user-images.githubusercontent.com/3050060/195990668-42e0b16b-3146-4864-b822-6f6a80fb77a5.png)\n\nAfter:\n![Screenshot from 2022-10-15 16-02-31](https://user-images.githubusercontent.com/3050060/195990664-20f967df-8989-4336-bca9-be52baab8e81.png)\n\nr? ```@notriddle```", "tree": {"sha": "8f525a9b46b12c335be05c3d2eac27b00552719a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8f525a9b46b12c335be05c3d2eac27b00552719a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/66a2bba309409bd4c437428c2a4c5dc87f55f784", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjS29KCRBK7hj4Ov3rIwAAIUcIAH65Ayn44Ecuv97rZ4/iIzJf\nHYGcQab/vwqzzAPxS2tUXbl6l4LPtN1cr/kmkkQKQLi1Rq7fVipsA3oSsWXcY0vX\nPtPSMP9bqMW5tlmwrIrYFq8UT3TZiN0esi2wuXDsK9Sca8VRGc8p816oGmyvelgF\nYQtLRNLXrG+GNFPfWY5nH7g4+Ypa/UlUTJadZmxA6X22oBzmsbUK5PIUuH8K9Diz\nqmIBP7JxYrMhAgZpH3l9IAie9Q356lfxpOMscXVKVsIzJjlkrMPhK4u2Yi86jVIy\n5G53hVYafZO27VaDkHz0GTWWiuF3jpQhm3lbaPam2l6yn4KBRQQcjeeYWIZRDkg=\n=dyF/\n-----END PGP SIGNATURE-----\n", "payload": "tree 8f525a9b46b12c335be05c3d2eac27b00552719a\nparent b495c122e8880244d10ea666086908230b3dd93c\nparent 11a40ec5ffc68dc44e8ac1b122d46c919b35aff5\nauthor Yuki Okushi <jtitor@2k36.org> 1665888074 +0900\ncommitter GitHub <noreply@github.com> 1665888074 +0900\n\nRollup merge of #103088 - GuillaumeGomez:fix-settings-page, r=notriddle\n\nFix settings page\n\nThanks to https://github.com/rust-lang/rust/pull/103060, I discovered that the settings page was badly rendered. This PR fixes it.\n\nBefore:\n![Screenshot from 2022-10-15 16-02-41](https://user-images.githubusercontent.com/3050060/195990668-42e0b16b-3146-4864-b822-6f6a80fb77a5.png)\n\nAfter:\n![Screenshot from 2022-10-15 16-02-31](https://user-images.githubusercontent.com/3050060/195990664-20f967df-8989-4336-bca9-be52baab8e81.png)\n\nr? ```@notriddle```\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/66a2bba309409bd4c437428c2a4c5dc87f55f784", "html_url": "https://github.com/rust-lang/rust/commit/66a2bba309409bd4c437428c2a4c5dc87f55f784", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/66a2bba309409bd4c437428c2a4c5dc87f55f784/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b495c122e8880244d10ea666086908230b3dd93c", "url": "https://api.github.com/repos/rust-lang/rust/commits/b495c122e8880244d10ea666086908230b3dd93c", "html_url": "https://github.com/rust-lang/rust/commit/b495c122e8880244d10ea666086908230b3dd93c"}, {"sha": "11a40ec5ffc68dc44e8ac1b122d46c919b35aff5", "url": "https://api.github.com/repos/rust-lang/rust/commits/11a40ec5ffc68dc44e8ac1b122d46c919b35aff5", "html_url": "https://github.com/rust-lang/rust/commit/11a40ec5ffc68dc44e8ac1b122d46c919b35aff5"}], "stats": {"total": 15, "additions": 12, "deletions": 3}, "files": [{"sha": "5e1c7e6f03e75402b776f9fe29a0ca3c58057159", "filename": "src/librustdoc/html/static/js/settings.js", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/66a2bba309409bd4c437428c2a4c5dc87f55f784/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsettings.js", "raw_url": "https://github.com/rust-lang/rust/raw/66a2bba309409bd4c437428c2a4c5dc87f55f784/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsettings.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsettings.js?ref=66a2bba309409bd4c437428c2a4c5dc87f55f784", "patch": "@@ -216,7 +216,9 @@\n         const innerHTML = `<div class=\"settings\">${buildSettingsPageSections(settings)}</div>`;\n         const el = document.createElement(elementKind);\n         el.id = \"settings\";\n-        el.className = \"popover\";\n+        if (!isSettingsPage) {\n+            el.className = \"popover\";\n+        }\n         el.innerHTML = innerHTML;\n \n         if (isSettingsPage) {"}, {"sha": "ed4e9c2516b0b3dcef7586c5dd6768f697e43e9a", "filename": "src/test/rustdoc-gui/settings.goml", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/66a2bba309409bd4c437428c2a4c5dc87f55f784/src%2Ftest%2Frustdoc-gui%2Fsettings.goml", "raw_url": "https://github.com/rust-lang/rust/raw/66a2bba309409bd4c437428c2a4c5dc87f55f784/src%2Ftest%2Frustdoc-gui%2Fsettings.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsettings.goml?ref=66a2bba309409bd4c437428c2a4c5dc87f55f784", "patch": "@@ -1,4 +1,5 @@\n-// This test ensures that the settings menu display is working as expected.\n+// This test ensures that the settings menu display is working as expected and that\n+// the settings page is also rendered as expected.\n goto: \"file://\" + |DOC_PATH| + \"/test_docs/index.html\"\n show-text: true // needed when we check for colors below.\n // First, we check that the settings page doesn't exist.\n@@ -140,7 +141,13 @@ assert-css: (\"#settings-menu .popover\", {\"display\": \"none\"})\n // Now we go to the settings page to check that the CSS is loaded as expected.\n goto: \"file://\" + |DOC_PATH| + \"/settings.html\"\n wait-for: \"#settings\"\n-assert-css: (\".setting-line .toggle .slider\", {\"width\": \"45px\", \"margin-right\": \"20px\"})\n+assert-css: (\n+    \".setting-line .toggle .slider\",\n+    {\"width\": \"45px\", \"margin-right\": \"20px\", \"border\": \"0px none rgb(0, 0, 0)\"},\n+)\n+\n+assert-attribute-false: (\"#settings\", {\"class\": \"popover\"}, CONTAINS)\n+compare-elements-position: (\".sub-container\", \"#settings\", (\"x\"))\n \n // We now check the display with JS disabled.\n assert-false: \"noscript section\""}]}