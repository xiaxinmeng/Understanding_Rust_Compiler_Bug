{"sha": "45594d5dec4237f49e794a2a854a69f50b63d31e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ1NTk0ZDVkZWM0MjM3ZjQ5ZTc5NGEyYTg1NGE2OWY1MGI2M2QzMWU=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2017-11-22T16:14:13Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2017-11-22T16:14:13Z"}, "message": "Auto merge of #46035 - oli-obk:use_suggestions, r=petrochenkov\n\nAdd structured suggestions for various \"use\" suggestions\n\nr? @petrochenkov", "tree": {"sha": "c2c522897b0e8ae3e37238bc280ba5cb058e83c7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c2c522897b0e8ae3e37238bc280ba5cb058e83c7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/45594d5dec4237f49e794a2a854a69f50b63d31e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/45594d5dec4237f49e794a2a854a69f50b63d31e", "html_url": "https://github.com/rust-lang/rust/commit/45594d5dec4237f49e794a2a854a69f50b63d31e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/45594d5dec4237f49e794a2a854a69f50b63d31e/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1dc0b573e7ce4314eb196b21b7e0ea4a1bf1f673", "url": "https://api.github.com/repos/rust-lang/rust/commits/1dc0b573e7ce4314eb196b21b7e0ea4a1bf1f673", "html_url": "https://github.com/rust-lang/rust/commit/1dc0b573e7ce4314eb196b21b7e0ea4a1bf1f673"}, {"sha": "2c2891b9f519462cc970090309cfdfc0c1f5d09b", "url": "https://api.github.com/repos/rust-lang/rust/commits/2c2891b9f519462cc970090309cfdfc0c1f5d09b", "html_url": "https://github.com/rust-lang/rust/commit/2c2891b9f519462cc970090309cfdfc0c1f5d09b"}], "stats": {"total": 250, "additions": 207, "deletions": 43}, "files": [{"sha": "2bd08d2c7989ff4bb60f17f5202ae078e99d586e", "filename": "src/librustc_resolve/lib.rs", "status": "modified", "additions": 18, "deletions": 7, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/45594d5dec4237f49e794a2a854a69f50b63d31e/src%2Flibrustc_resolve%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45594d5dec4237f49e794a2a854a69f50b63d31e/src%2Flibrustc_resolve%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Flib.rs?ref=45594d5dec4237f49e794a2a854a69f50b63d31e", "patch": "@@ -588,6 +588,18 @@ struct UsePlacementFinder {\n     found_use: bool,\n }\n \n+impl UsePlacementFinder {\n+    fn check(krate: &Crate, target_module: NodeId) -> (Option<Span>, bool) {\n+        let mut finder = UsePlacementFinder {\n+            target_module,\n+            span: None,\n+            found_use: false,\n+        };\n+        visit::walk_crate(&mut finder, krate);\n+        (finder.span, finder.found_use)\n+    }\n+}\n+\n impl<'tcx> Visitor<'tcx> for UsePlacementFinder {\n     fn visit_mod(\n         &mut self,\n@@ -1278,6 +1290,8 @@ pub struct Resolver<'a> {\n     ambiguity_errors: Vec<AmbiguityError<'a>>,\n     /// `use` injections are delayed for better placement and deduplication\n     use_injections: Vec<UseError<'a>>,\n+    /// `use` injections for proc macros wrongly imported with #[macro_use]\n+    proc_mac_errors: Vec<macros::ProcMacError>,\n \n     gated_errors: FxHashSet<Span>,\n     disallowed_shadowing: Vec<&'a LegacyBinding<'a>>,\n@@ -1486,6 +1500,7 @@ impl<'a> Resolver<'a> {\n             privacy_errors: Vec::new(),\n             ambiguity_errors: Vec::new(),\n             use_injections: Vec::new(),\n+            proc_mac_errors: Vec::new(),\n             gated_errors: FxHashSet(),\n             disallowed_shadowing: Vec::new(),\n \n@@ -3569,6 +3584,7 @@ impl<'a> Resolver<'a> {\n     fn report_errors(&mut self, krate: &Crate) {\n         self.report_shadowing_errors();\n         self.report_with_use_injections(krate);\n+        self.report_proc_macro_import(krate);\n         let mut reported_spans = FxHashSet();\n \n         for &AmbiguityError { span, name, b1, b2, lexical, legacy } in &self.ambiguity_errors {\n@@ -3618,14 +3634,9 @@ impl<'a> Resolver<'a> {\n \n     fn report_with_use_injections(&mut self, krate: &Crate) {\n         for UseError { mut err, candidates, node_id, better } in self.use_injections.drain(..) {\n-            let mut finder = UsePlacementFinder {\n-                target_module: node_id,\n-                span: None,\n-                found_use: false,\n-            };\n-            visit::walk_crate(&mut finder, krate);\n+            let (span, found_use) = UsePlacementFinder::check(krate, node_id);\n             if !candidates.is_empty() {\n-                show_candidates(&mut err, finder.span, &candidates, better, finder.found_use);\n+                show_candidates(&mut err, span, &candidates, better, found_use);\n             }\n             err.emit();\n         }"}, {"sha": "3d1d7c0c48a1e92135ddbe38517779b42a0a7bbd", "filename": "src/librustc_resolve/macros.rs", "status": "modified", "additions": 38, "deletions": 5, "changes": 43, "blob_url": "https://github.com/rust-lang/rust/blob/45594d5dec4237f49e794a2a854a69f50b63d31e/src%2Flibrustc_resolve%2Fmacros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45594d5dec4237f49e794a2a854a69f50b63d31e/src%2Flibrustc_resolve%2Fmacros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Fmacros.rs?ref=45594d5dec4237f49e794a2a854a69f50b63d31e", "patch": "@@ -83,6 +83,14 @@ pub struct LegacyBinding<'a> {\n     pub span: Span,\n }\n \n+pub struct ProcMacError {\n+    crate_name: Symbol,\n+    name: Symbol,\n+    module: ast::NodeId,\n+    use_span: Span,\n+    warn_msg: &'static str,\n+}\n+\n #[derive(Copy, Clone)]\n pub enum MacroBinding<'a> {\n     Legacy(&'a LegacyBinding<'a>),\n@@ -779,12 +787,37 @@ impl<'a> Resolver<'a> {\n             _ => return,\n         };\n \n-        let crate_name = self.cstore.crate_name_untracked(krate);\n+        let def_id = self.current_module.normal_ancestor_id;\n+        let node_id = self.definitions.as_local_node_id(def_id).unwrap();\n+\n+        self.proc_mac_errors.push(ProcMacError {\n+            crate_name: self.cstore.crate_name_untracked(krate),\n+            name,\n+            module: node_id,\n+            use_span,\n+            warn_msg,\n+        });\n+    }\n+\n+    pub fn report_proc_macro_import(&mut self, krate: &ast::Crate) {\n+        for err in self.proc_mac_errors.drain(..) {\n+            let (span, found_use) = ::UsePlacementFinder::check(krate, err.module);\n \n-        self.session.struct_span_err(use_span, warn_msg)\n-            .help(&format!(\"instead, import the procedural macro like any other item: \\\n-                             `use {}::{};`\", crate_name, name))\n-            .emit();\n+            if let Some(span) = span {\n+                let found_use = if found_use { \"\" } else { \"\\n\" };\n+                self.session.struct_span_err(err.use_span, err.warn_msg)\n+                    .span_suggestion(\n+                        span,\n+                        \"instead, import the procedural macro like any other item\",\n+                        format!(\"use {}::{};{}\", err.crate_name, err.name, found_use),\n+                    ).emit();\n+            } else {\n+                self.session.struct_span_err(err.use_span, err.warn_msg)\n+                    .help(&format!(\"instead, import the procedural macro like any other item: \\\n+                                    `use {}::{};`\", err.crate_name, err.name))\n+                    .emit();\n+            }\n+        }\n     }\n \n     fn gate_legacy_custom_derive(&mut self, name: Symbol, span: Span) {"}, {"sha": "50e996dd9546ecaf3d8cc752dbae8ea103ee6476", "filename": "src/librustc_typeck/check/method/suggest.rs", "status": "modified", "additions": 108, "deletions": 9, "changes": 117, "blob_url": "https://github.com/rust-lang/rust/blob/45594d5dec4237f49e794a2a854a69f50b63d31e/src%2Flibrustc_typeck%2Fcheck%2Fmethod%2Fsuggest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45594d5dec4237f49e794a2a854a69f50b63d31e/src%2Flibrustc_typeck%2Fcheck%2Fmethod%2Fsuggest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fmethod%2Fsuggest.rs?ref=45594d5dec4237f49e794a2a854a69f50b63d31e", "patch": "@@ -340,16 +340,35 @@ impl<'a, 'gcx, 'tcx> FnCtxt<'a, 'gcx, 'tcx> {\n                               err: &mut DiagnosticBuilder,\n                               mut msg: String,\n                               candidates: Vec<DefId>) {\n-        let limit = if candidates.len() == 5 { 5 } else { 4 };\n-        for (i, trait_did) in candidates.iter().take(limit).enumerate() {\n-            msg.push_str(&format!(\"\\ncandidate #{}: `use {};`\",\n-                                    i + 1,\n-                                    self.tcx.item_path_str(*trait_did)));\n-        }\n-        if candidates.len() > limit {\n-            msg.push_str(&format!(\"\\nand {} others\", candidates.len() - limit));\n+        let module_did = self.tcx.hir.get_module_parent(self.body_id);\n+        let module_id = self.tcx.hir.as_local_node_id(module_did).unwrap();\n+        let krate = self.tcx.hir.krate();\n+        let (span, found_use) = UsePlacementFinder::check(self.tcx, krate, module_id);\n+        if let Some(span) = span {\n+            let path_strings = candidates.iter().map(|did| {\n+                // produce an additional newline to separate the new use statement\n+                // from the directly following item.\n+                let additional_newline = if found_use {\n+                    \"\"\n+                } else {\n+                    \"\\n\"\n+                };\n+                format!(\"use {};\\n{}\", self.tcx.item_path_str(*did), additional_newline)\n+            }).collect();\n+\n+            err.span_suggestions(span, &msg, path_strings);\n+        } else {\n+            let limit = if candidates.len() == 5 { 5 } else { 4 };\n+            for (i, trait_did) in candidates.iter().take(limit).enumerate() {\n+                msg.push_str(&format!(\"\\ncandidate #{}: `use {};`\",\n+                                        i + 1,\n+                                        self.tcx.item_path_str(*trait_did)));\n+            }\n+            if candidates.len() > limit {\n+                msg.push_str(&format!(\"\\nand {} others\", candidates.len() - limit));\n+            }\n+            err.note(&msg[..]);\n         }\n-        err.note(&msg[..]);\n     }\n \n     fn suggest_valid_traits(&self,\n@@ -604,3 +623,83 @@ impl<'a> Iterator for AllTraits<'a> {\n         })\n     }\n }\n+\n+\n+struct UsePlacementFinder<'a, 'tcx: 'a, 'gcx: 'tcx> {\n+    target_module: ast::NodeId,\n+    span: Option<Span>,\n+    found_use: bool,\n+    tcx: TyCtxt<'a, 'gcx, 'tcx>\n+}\n+\n+impl<'a, 'tcx, 'gcx> UsePlacementFinder<'a, 'tcx, 'gcx> {\n+    fn check(\n+        tcx: TyCtxt<'a, 'gcx, 'tcx>,\n+        krate: &'tcx hir::Crate,\n+        target_module: ast::NodeId,\n+    ) -> (Option<Span>, bool) {\n+        let mut finder = UsePlacementFinder {\n+            target_module,\n+            span: None,\n+            found_use: false,\n+            tcx,\n+        };\n+        hir::intravisit::walk_crate(&mut finder, krate);\n+        (finder.span, finder.found_use)\n+    }\n+}\n+\n+impl<'a, 'tcx, 'gcx> hir::intravisit::Visitor<'tcx> for UsePlacementFinder<'a, 'tcx, 'gcx> {\n+    fn visit_mod(\n+        &mut self,\n+        module: &'tcx hir::Mod,\n+        _: Span,\n+        node_id: ast::NodeId,\n+    ) {\n+        if self.span.is_some() {\n+            return;\n+        }\n+        if node_id != self.target_module {\n+            hir::intravisit::walk_mod(self, module, node_id);\n+            return;\n+        }\n+        // find a use statement\n+        for item_id in &module.item_ids {\n+            let item = self.tcx.hir.expect_item(item_id.id);\n+            match item.node {\n+                hir::ItemUse(..) => {\n+                    // don't suggest placing a use before the prelude\n+                    // import or other generated ones\n+                    if item.span.ctxt().outer().expn_info().is_none() {\n+                        self.span = Some(item.span.with_hi(item.span.lo()));\n+                        self.found_use = true;\n+                        return;\n+                    }\n+                },\n+                // don't place use before extern crate\n+                hir::ItemExternCrate(_) => {}\n+                // but place them before the first other item\n+                _ => if self.span.map_or(true, |span| item.span < span ) {\n+                    if item.span.ctxt().outer().expn_info().is_none() {\n+                        // don't insert between attributes and an item\n+                        if item.attrs.is_empty() {\n+                            self.span = Some(item.span.with_hi(item.span.lo()));\n+                        } else {\n+                            // find the first attribute on the item\n+                            for attr in &item.attrs {\n+                                if self.span.map_or(true, |span| attr.span < span) {\n+                                    self.span = Some(attr.span.with_hi(attr.span.lo()));\n+                                }\n+                            }\n+                        }\n+                    }\n+                },\n+            }\n+        }\n+    }\n+    fn nested_visit_map<'this>(\n+        &'this mut self\n+    ) -> hir::intravisit::NestedVisitorMap<'this, 'tcx> {\n+        hir::intravisit::NestedVisitorMap::None\n+    }\n+}"}, {"sha": "793e1c6668337b274f7f7d3021f36eb28d7b9d90", "filename": "src/test/ui/impl-trait/no-method-suggested-traits.stderr", "status": "modified", "additions": 36, "deletions": 18, "changes": 54, "blob_url": "https://github.com/rust-lang/rust/blob/45594d5dec4237f49e794a2a854a69f50b63d31e/src%2Ftest%2Fui%2Fimpl-trait%2Fno-method-suggested-traits.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/45594d5dec4237f49e794a2a854a69f50b63d31e/src%2Ftest%2Fui%2Fimpl-trait%2Fno-method-suggested-traits.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fimpl-trait%2Fno-method-suggested-traits.stderr?ref=45594d5dec4237f49e794a2a854a69f50b63d31e", "patch": "@@ -5,11 +5,16 @@ error[E0599]: no method named `method` found for type `u32` in the current scope\n    |          ^^^^^^\n    |\n    = help: items from traits can only be used if the trait is in scope\n-   = note: the following traits are implemented but not in scope, perhaps add a `use` for one of them:\n-           candidate #1: `use foo::Bar;`\n-           candidate #2: `use no_method_suggested_traits::foo::PubPub;`\n-           candidate #3: `use no_method_suggested_traits::qux::PrivPub;`\n-           candidate #4: `use no_method_suggested_traits::Reexported;`\n+help: the following traits are implemented but not in scope, perhaps add a `use` for one of them:\n+   |\n+14 | use foo::Bar;\n+   |\n+14 | use no_method_suggested_traits::foo::PubPub;\n+   |\n+14 | use no_method_suggested_traits::qux::PrivPub;\n+   |\n+14 | use no_method_suggested_traits::Reexported;\n+   |\n \n error[E0599]: no method named `method` found for type `std::rc::Rc<&mut std::boxed::Box<&u32>>` in the current scope\n   --> $DIR/no-method-suggested-traits.rs:38:44\n@@ -18,11 +23,16 @@ error[E0599]: no method named `method` found for type `std::rc::Rc<&mut std::box\n    |                                            ^^^^^^\n    |\n    = help: items from traits can only be used if the trait is in scope\n-   = note: the following traits are implemented but not in scope, perhaps add a `use` for one of them:\n-           candidate #1: `use foo::Bar;`\n-           candidate #2: `use no_method_suggested_traits::foo::PubPub;`\n-           candidate #3: `use no_method_suggested_traits::qux::PrivPub;`\n-           candidate #4: `use no_method_suggested_traits::Reexported;`\n+help: the following traits are implemented but not in scope, perhaps add a `use` for one of them:\n+   |\n+14 | use foo::Bar;\n+   |\n+14 | use no_method_suggested_traits::foo::PubPub;\n+   |\n+14 | use no_method_suggested_traits::qux::PrivPub;\n+   |\n+14 | use no_method_suggested_traits::Reexported;\n+   |\n \n error[E0599]: no method named `method` found for type `char` in the current scope\n   --> $DIR/no-method-suggested-traits.rs:44:9\n@@ -31,8 +41,10 @@ error[E0599]: no method named `method` found for type `char` in the current scop\n    |         ^^^^^^\n    |\n    = help: items from traits can only be used if the trait is in scope\n-   = note: the following trait is implemented but not in scope, perhaps add a `use` for it:\n-           candidate #1: `use foo::Bar;`\n+help: the following trait is implemented but not in scope, perhaps add a `use` for it:\n+   |\n+14 | use foo::Bar;\n+   |\n \n error[E0599]: no method named `method` found for type `std::rc::Rc<&mut std::boxed::Box<&char>>` in the current scope\n   --> $DIR/no-method-suggested-traits.rs:48:43\n@@ -41,8 +53,10 @@ error[E0599]: no method named `method` found for type `std::rc::Rc<&mut std::box\n    |                                           ^^^^^^\n    |\n    = help: items from traits can only be used if the trait is in scope\n-   = note: the following trait is implemented but not in scope, perhaps add a `use` for it:\n-           candidate #1: `use foo::Bar;`\n+help: the following trait is implemented but not in scope, perhaps add a `use` for it:\n+   |\n+14 | use foo::Bar;\n+   |\n \n error[E0599]: no method named `method` found for type `i32` in the current scope\n   --> $DIR/no-method-suggested-traits.rs:53:10\n@@ -51,8 +65,10 @@ error[E0599]: no method named `method` found for type `i32` in the current scope\n    |          ^^^^^^\n    |\n    = help: items from traits can only be used if the trait is in scope\n-   = note: the following trait is implemented but not in scope, perhaps add a `use` for it:\n-           candidate #1: `use no_method_suggested_traits::foo::PubPub;`\n+help: the following trait is implemented but not in scope, perhaps add a `use` for it:\n+   |\n+14 | use no_method_suggested_traits::foo::PubPub;\n+   |\n \n error[E0599]: no method named `method` found for type `std::rc::Rc<&mut std::boxed::Box<&i32>>` in the current scope\n   --> $DIR/no-method-suggested-traits.rs:57:44\n@@ -61,8 +77,10 @@ error[E0599]: no method named `method` found for type `std::rc::Rc<&mut std::box\n    |                                            ^^^^^^\n    |\n    = help: items from traits can only be used if the trait is in scope\n-   = note: the following trait is implemented but not in scope, perhaps add a `use` for it:\n-           candidate #1: `use no_method_suggested_traits::foo::PubPub;`\n+help: the following trait is implemented but not in scope, perhaps add a `use` for it:\n+   |\n+14 | use no_method_suggested_traits::foo::PubPub;\n+   |\n \n error[E0599]: no method named `method` found for type `Foo` in the current scope\n   --> $DIR/no-method-suggested-traits.rs:62:9"}, {"sha": "146d0ff72d83f7b16bad3a761bed7d8f0fead8ef", "filename": "src/test/ui/issue-35976.stderr", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/45594d5dec4237f49e794a2a854a69f50b63d31e/src%2Ftest%2Fui%2Fissue-35976.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/45594d5dec4237f49e794a2a854a69f50b63d31e/src%2Ftest%2Fui%2Fissue-35976.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissue-35976.stderr?ref=45594d5dec4237f49e794a2a854a69f50b63d31e", "patch": "@@ -3,9 +3,10 @@ error: the `wait` method cannot be invoked on a trait object\n    |\n 24 |     arg.wait();\n    |         ^^^^\n+help: another candidate was found in the following trait, perhaps add a `use` for it:\n+   |\n+11 | use private::Future;\n    |\n-   = note: another candidate was found in the following trait, perhaps add a `use` for it:\n-           candidate #1: `use private::Future;`\n \n error: aborting due to previous error\n "}, {"sha": "549c84b9b032539e8449da59ec585af3ae740223", "filename": "src/test/ui/trait-method-private.stderr", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/45594d5dec4237f49e794a2a854a69f50b63d31e/src%2Ftest%2Fui%2Ftrait-method-private.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/45594d5dec4237f49e794a2a854a69f50b63d31e/src%2Ftest%2Fui%2Ftrait-method-private.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftrait-method-private.stderr?ref=45594d5dec4237f49e794a2a854a69f50b63d31e", "patch": "@@ -5,8 +5,10 @@ error[E0624]: method `method` is private\n    |         ^^^^^^\n    |\n    = help: items from traits can only be used if the trait is in scope\n-   = note: the following trait is implemented but not in scope, perhaps add a `use` for it:\n-           candidate #1: `use inner::Bar;`\n+help: the following trait is implemented but not in scope, perhaps add a `use` for it:\n+   |\n+11 | use inner::Bar;\n+   |\n \n error: aborting due to previous error\n "}]}