{"sha": "5864ad9ab1816c204301ffa4cffe39a4248d1d10", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU4NjRhZDlhYjE4MTZjMjA0MzAxZmZhNGNmZmUzOWE0MjQ4ZDFkMTA=", "commit": {"author": {"name": "kud1ing", "email": "github@kudling.de", "date": "2013-10-31T19:36:27Z"}, "committer": {"name": "kud1ing", "email": "github@kudling.de", "date": "2013-10-31T21:43:59Z"}, "message": "add target triple arm-apple-darwin", "tree": {"sha": "181557c3143b214e5342d68ec204d4362f00997f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/181557c3143b214e5342d68ec204d4362f00997f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5864ad9ab1816c204301ffa4cffe39a4248d1d10", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5864ad9ab1816c204301ffa4cffe39a4248d1d10", "html_url": "https://github.com/rust-lang/rust/commit/5864ad9ab1816c204301ffa4cffe39a4248d1d10", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5864ad9ab1816c204301ffa4cffe39a4248d1d10/comments", "author": null, "committer": null, "parents": [{"sha": "f09959361b4ef44e11cfe94d4051ce7199bf129d", "url": "https://api.github.com/repos/rust-lang/rust/commits/f09959361b4ef44e11cfe94d4051ce7199bf129d", "html_url": "https://github.com/rust-lang/rust/commit/f09959361b4ef44e11cfe94d4051ce7199bf129d"}], "stats": {"total": 36, "additions": 36, "deletions": 0}, "files": [{"sha": "24a5f2cefab829991f2f1680133a7b9811d3c4a4", "filename": "configure", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/5864ad9ab1816c204301ffa4cffe39a4248d1d10/configure", "raw_url": "https://github.com/rust-lang/rust/raw/5864ad9ab1816c204301ffa4cffe39a4248d1d10/configure", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/configure?ref=5864ad9ab1816c204301ffa4cffe39a4248d1d10", "patch": "@@ -635,6 +635,13 @@ do\n             fi\n             ;;\n \n+        arm-apple-darwin)\n+            if [ $CFG_OSTYPE != apple-darwin ]\n+            then\n+                err \"The iOS target is only supported on Mac OS X\"\n+            fi\n+            ;;\n+\n         *)\n             ;;\n     esac"}, {"sha": "93abaafff7004d5dfa74be36110f48c28de9f4fe", "filename": "mk/platform.mk", "status": "modified", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/5864ad9ab1816c204301ffa4cffe39a4248d1d10/mk%2Fplatform.mk", "raw_url": "https://github.com/rust-lang/rust/raw/5864ad9ab1816c204301ffa4cffe39a4248d1d10/mk%2Fplatform.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fplatform.mk?ref=5864ad9ab1816c204301ffa4cffe39a4248d1d10", "patch": "@@ -193,6 +193,35 @@ CFG_LDPATH_i686-unknown-linux-gnu :=\n CFG_RUN_i686-unknown-linux-gnu=$(2)\n CFG_RUN_TARG_i686-unknown-linux-gnu=$(call CFG_RUN_i686-unknown-linux-gnu,,$(2))\n \n+# arm-apple-darwin configuration\n+ifeq ($(CFG_OSTYPE),apple-darwin)\n+CFG_IOS_SDK = $(shell xcrun --show-sdk-path -sdk iphoneos)\n+CFG_IOS_FLAGS = -target arm-apple-darwin -isysroot $(CFG_IOS_SDK) -I $(CFG_IOS_SDK)/usr/include -I $(CFG_IOS_SDK)/usr/include/c++/4.2.1 -I /usr/include\n+CC_arm-apple-darwin = $(shell xcrun -find -sdk iphoneos clang)\n+CXX_arm-apple-darwin = $(shell xcrun -find -sdk iphoneos clang++)\n+CPP_arm-apple-darwin = $(shell xcrun -find -sdk iphoneos clang++)\n+AR_arm-apple-darwin = $(shell xcrun -find -sdk iphoneos ar)\n+CFG_LIB_NAME_arm-apple-darwin = lib$(1).dylib\n+CFG_LIB_GLOB_arm-apple-darwin = lib$(1)-*.dylib\n+CFG_LIB_DSYM_GLOB_arm-apple-darwin = lib$(1)-*.dylib.dSYM\n+CFG_GCCISH_CFLAGS_arm-apple-darwin := -Wall -Werror -g -fPIC $(CFG_IOS_FLAGS)\n+CFG_GCCISH_CXXFLAGS_arm-apple-darwin := -fno-rtti $(CFG_IOS_FLAGS)\n+CFG_GCCISH_LINK_FLAGS_arm-apple-darwin := -dynamiclib -lpthread -framework CoreServices -Wl,-no_compact_unwind \n+CFG_GCCISH_DEF_FLAG_arm-apple-darwin := -Wl,-exported_symbols_list,\n+CFG_GCCISH_PRE_LIB_FLAGS_arm-apple-darwin :=\n+CFG_GCCISH_POST_LIB_FLAGS_arm-apple-darwin :=\n+CFG_DEF_SUFFIX_arm-apple-darwin := .darwin.def\n+CFG_INSTALL_NAME_arm-apple-darwin = -Wl,-install_name,@rpath/$(1)\n+CFG_LIBUV_LINK_FLAGS_arm-apple-darwin =\n+CFG_EXE_SUFFIX_arm-apple-darwin :=\n+CFG_WINDOWSY_arm-apple-darwin :=\n+CFG_UNIXY_arm-apple-darwin := 1\n+CFG_PATH_MUNGE_arm-apple-darwin := true\n+CFG_LDPATH_arm-apple-darwin :=\n+CFG_RUN_arm-apple-darwin = $(2)\n+CFG_RUN_TARG_arm-apple-darwin = $(call CFG_RUN_arm-apple-darwin,,$(2))\n+endif\n+\n # x86_64-apple-darwin configuration\n CC_x86_64-apple-darwin=$(CC)\n CXX_x86_64-apple-darwin=$(CXX)"}]}