{"sha": "e6c11313c88574aa2500df2f76c5534fbc2e0512", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU2YzExMzEzYzg4NTc0YWEyNTAwZGYyZjc2YzU1MzRmYmMyZTA1MTI=", "commit": {"author": {"name": "Erick Tryzelaar", "email": "erick.tryzelaar@gmail.com", "date": "2013-09-10T02:32:32Z"}, "committer": {"name": "Erick Tryzelaar", "email": "erick.tryzelaar@gmail.com", "date": "2013-09-13T01:54:12Z"}, "message": "std: Add Option.{result_or_default,or_default} that uses Default", "tree": {"sha": "11918e2476ef68448fe58d160e91f290d0a82aff", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/11918e2476ef68448fe58d160e91f290d0a82aff"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e6c11313c88574aa2500df2f76c5534fbc2e0512", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e6c11313c88574aa2500df2f76c5534fbc2e0512", "html_url": "https://github.com/rust-lang/rust/commit/e6c11313c88574aa2500df2f76c5534fbc2e0512", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e6c11313c88574aa2500df2f76c5534fbc2e0512/comments", "author": {"login": "erickt", "id": 84711, "node_id": "MDQ6VXNlcjg0NzEx", "avatar_url": "https://avatars.githubusercontent.com/u/84711?v=4", "gravatar_id": "", "url": "https://api.github.com/users/erickt", "html_url": "https://github.com/erickt", "followers_url": "https://api.github.com/users/erickt/followers", "following_url": "https://api.github.com/users/erickt/following{/other_user}", "gists_url": "https://api.github.com/users/erickt/gists{/gist_id}", "starred_url": "https://api.github.com/users/erickt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/erickt/subscriptions", "organizations_url": "https://api.github.com/users/erickt/orgs", "repos_url": "https://api.github.com/users/erickt/repos", "events_url": "https://api.github.com/users/erickt/events{/privacy}", "received_events_url": "https://api.github.com/users/erickt/received_events", "type": "User", "site_admin": false}, "committer": {"login": "erickt", "id": 84711, "node_id": "MDQ6VXNlcjg0NzEx", "avatar_url": "https://avatars.githubusercontent.com/u/84711?v=4", "gravatar_id": "", "url": "https://api.github.com/users/erickt", "html_url": "https://github.com/erickt", "followers_url": "https://api.github.com/users/erickt/followers", "following_url": "https://api.github.com/users/erickt/following{/other_user}", "gists_url": "https://api.github.com/users/erickt/gists{/gist_id}", "starred_url": "https://api.github.com/users/erickt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/erickt/subscriptions", "organizations_url": "https://api.github.com/users/erickt/orgs", "repos_url": "https://api.github.com/users/erickt/repos", "events_url": "https://api.github.com/users/erickt/events{/privacy}", "received_events_url": "https://api.github.com/users/erickt/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f1374a7044d844fb1f89b651bf4c628ac32ed48a", "url": "https://api.github.com/repos/rust-lang/rust/commits/f1374a7044d844fb1f89b651bf4c628ac32ed48a", "html_url": "https://github.com/rust-lang/rust/commit/f1374a7044d844fb1f89b651bf4c628ac32ed48a"}], "stats": {"total": 26, "additions": 23, "deletions": 3}, "files": [{"sha": "061921e60e1257602cc0b5fde6ea55c0fdd7dc21", "filename": "src/librustc/middle/typeck/check/_match.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/e6c11313c88574aa2500df2f76c5534fbc2e0512/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcheck%2F_match.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e6c11313c88574aa2500df2f76c5534fbc2e0512/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcheck%2F_match.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcheck%2F_match.rs?ref=e6c11313c88574aa2500df2f76c5534fbc2e0512", "patch": "@@ -173,7 +173,7 @@ pub fn check_pat_variant(pcx: &pat_ctxt, pat: @ast::Pat, path: &ast::Path,\n                     fcx.write_error(pat.id);\n                     kind_name = \"[error]\";\n                     arg_types = (*subpats).clone()\n-                                          .unwrap_or(~[])\n+                                          .unwrap_or_default()\n                                           .map(|_| ty::mk_err());\n                 }\n             }\n@@ -222,7 +222,7 @@ pub fn check_pat_variant(pcx: &pat_ctxt, pat: @ast::Pat, path: &ast::Path,\n             fcx.write_error(pat.id);\n             kind_name = \"[error]\";\n             arg_types = (*subpats).clone()\n-                                  .unwrap_or(~[])\n+                                  .unwrap_or_default()\n                                   .map(|_| ty::mk_err());\n         }\n     }"}, {"sha": "84d8a3aa18890cdece94a94d18ed2b1301b66c48", "filename": "src/libstd/option.rs", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/e6c11313c88574aa2500df2f76c5534fbc2e0512/src%2Flibstd%2Foption.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e6c11313c88574aa2500df2f76c5534fbc2e0512/src%2Flibstd%2Foption.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Foption.rs?ref=e6c11313c88574aa2500df2f76c5534fbc2e0512", "patch": "@@ -350,6 +350,26 @@ impl<T> Option<T> {\n     }\n }\n \n+impl<T: Default> Option<T> {\n+    /// Returns the contained value or default (for this type)\n+    #[inline]\n+    pub fn unwrap_or_default(self) -> T {\n+        match self {\n+            Some(x) => x,\n+            None => Default::default()\n+        }\n+    }\n+\n+    /// Returns self or `Some`-wrapped default value\n+    #[inline]\n+    pub fn or_default(self) -> Option<T> {\n+        match self {\n+            None => Some(Default::default()),\n+            x => x,\n+        }\n+    }\n+}\n+\n impl<T> Default for Option<T> {\n     fn default() -> Option<T> { None }\n }"}, {"sha": "6a15641430fb91646b37b6f70802d011534c4f62", "filename": "src/libsyntax/parse/parser.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e6c11313c88574aa2500df2f76c5534fbc2e0512/src%2Flibsyntax%2Fparse%2Fparser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e6c11313c88574aa2500df2f76c5534fbc2e0512/src%2Flibsyntax%2Fparse%2Fparser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fparser.rs?ref=e6c11313c88574aa2500df2f76c5534fbc2e0512", "patch": "@@ -3461,7 +3461,7 @@ impl Parser {\n         let ident = self.parse_ident();\n         let opt_bounds = self.parse_optional_ty_param_bounds();\n         // For typarams we don't care about the difference b/w \"<T>\" and \"<T:>\".\n-        let bounds = opt_bounds.unwrap_or(opt_vec::Empty);\n+        let bounds = opt_bounds.unwrap_or_default();\n         ast::TyParam { ident: ident, id: ast::DUMMY_NODE_ID, bounds: bounds }\n     }\n "}]}