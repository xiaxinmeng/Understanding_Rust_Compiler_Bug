{"sha": "2049d1f05e29e50ae92c2551adf24434f3c6b680", "node_id": "MDY6Q29tbWl0NzI0NzEyOjIwNDlkMWYwNWUyOWU1MGFlOTJjMjU1MWFkZjI0NDM0ZjNjNmI2ODA=", "commit": {"author": {"name": "Daniel Brooks", "email": "db48x@db48x.net", "date": "2012-02-29T18:18:04Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-03-08T20:57:40Z"}, "message": "only require git if the source looks like it was checked out from git, otherwise don't attempt to manage the submodules", "tree": {"sha": "ec268b07fde50a90c0d05eba381de30b33058b24", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ec268b07fde50a90c0d05eba381de30b33058b24"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2049d1f05e29e50ae92c2551adf24434f3c6b680", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2049d1f05e29e50ae92c2551adf24434f3c6b680", "html_url": "https://github.com/rust-lang/rust/commit/2049d1f05e29e50ae92c2551adf24434f3c6b680", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2049d1f05e29e50ae92c2551adf24434f3c6b680/comments", "author": {"login": "db48x", "id": 228849, "node_id": "MDQ6VXNlcjIyODg0OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/228849?v=4", "gravatar_id": "", "url": "https://api.github.com/users/db48x", "html_url": "https://github.com/db48x", "followers_url": "https://api.github.com/users/db48x/followers", "following_url": "https://api.github.com/users/db48x/following{/other_user}", "gists_url": "https://api.github.com/users/db48x/gists{/gist_id}", "starred_url": "https://api.github.com/users/db48x/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/db48x/subscriptions", "organizations_url": "https://api.github.com/users/db48x/orgs", "repos_url": "https://api.github.com/users/db48x/repos", "events_url": "https://api.github.com/users/db48x/events{/privacy}", "received_events_url": "https://api.github.com/users/db48x/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "11b403d513ff650edb2181bbe87125cd89478bfb", "url": "https://api.github.com/repos/rust-lang/rust/commits/11b403d513ff650edb2181bbe87125cd89478bfb", "html_url": "https://github.com/rust-lang/rust/commit/11b403d513ff650edb2181bbe87125cd89478bfb"}], "stats": {"total": 12, "additions": 11, "deletions": 1}, "files": [{"sha": "153cfa22d8ef558a0a80d943ec5d29e5e5173bae", "filename": "configure", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/2049d1f05e29e50ae92c2551adf24434f3c6b680/configure", "raw_url": "https://github.com/rust-lang/rust/raw/2049d1f05e29e50ae92c2551adf24434f3c6b680/configure", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/configure?ref=2049d1f05e29e50ae92c2551adf24434f3c6b680", "patch": "@@ -301,7 +301,17 @@ step_msg \"looking for build programs\"\n probe_need CFG_PERL        perl\n probe_need CFG_PYTHON      python python2.6 python2 python3\n probe_need CFG_CURL        curl\n-probe_need CFG_GIT         git\n+\n+# If we have no git directory then we are probably a tarball distribution\n+# and shouldn't attempt to load submodules\n+if [ ! -e ${CFG_SRC_DIR}.git ]\n+then\n+    msg \"git: no git directory. disabling submodules\"\n+    CFG_DISABLE_MANAGE_SUBMODULES=1\n+else\n+    probe_need CFG_GIT              git\n+fi\n+\n probe CFG_CLANG            clang++\n probe CFG_GCC              gcc\n probe CFG_LLVM_CONFIG      llvm-config"}]}