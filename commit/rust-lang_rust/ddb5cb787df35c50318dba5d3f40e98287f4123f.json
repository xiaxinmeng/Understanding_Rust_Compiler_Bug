{"sha": "ddb5cb787df35c50318dba5d3f40e98287f4123f", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRkYjVjYjc4N2RmMzVjNTAzMThkYmE1ZDNmNDBlOTgyODdmNDEyM2Y=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-10-15T18:34:30Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-10-15T18:34:30Z"}, "message": "Auto merge of #4668 - lzutao:update-rtim, r=flip1995\n\n build: switch back to latest official RTIM release\n\nCloses #4666\n\nchangelog: none", "tree": {"sha": "73214cfe3f7f291a3704fb842901f2d367ee8bfd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/73214cfe3f7f291a3704fb842901f2d367ee8bfd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ddb5cb787df35c50318dba5d3f40e98287f4123f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ddb5cb787df35c50318dba5d3f40e98287f4123f", "html_url": "https://github.com/rust-lang/rust/commit/ddb5cb787df35c50318dba5d3f40e98287f4123f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ddb5cb787df35c50318dba5d3f40e98287f4123f/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "778ace37e5cc42f007b30c403d8ccc6790594458", "url": "https://api.github.com/repos/rust-lang/rust/commits/778ace37e5cc42f007b30c403d8ccc6790594458", "html_url": "https://github.com/rust-lang/rust/commit/778ace37e5cc42f007b30c403d8ccc6790594458"}, {"sha": "0b39946b20eb892e569c4f42c5c9d569209b33b2", "url": "https://api.github.com/repos/rust-lang/rust/commits/0b39946b20eb892e569c4f42c5c9d569209b33b2", "html_url": "https://github.com/rust-lang/rust/commit/0b39946b20eb892e569c4f42c5c9d569209b33b2"}], "stats": {"total": 46, "additions": 25, "deletions": 21}, "files": [{"sha": "59e384cfaf3e1ada29432412eb44fbf0eca1a9a5", "filename": ".travis.yml", "status": "modified", "additions": 21, "deletions": 18, "changes": 39, "blob_url": "https://github.com/rust-lang/rust/blob/ddb5cb787df35c50318dba5d3f40e98287f4123f/.travis.yml", "raw_url": "https://github.com/rust-lang/rust/raw/ddb5cb787df35c50318dba5d3f40e98287f4123f/.travis.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.travis.yml?ref=ddb5cb787df35c50318dba5d3f40e98287f4123f", "patch": "@@ -91,7 +91,7 @@ matrix:\n     - os: osx\n     - os: windows\n \n-script:\n+before_script:\n   - |\n     if [ \"$TRAVIS_BRANCH\" == \"auto\" ] || [ \"$TRAVIS_BRANCH\" == \"try\" ]; then\n       pr=$(echo $TRAVIS_COMMIT_MESSAGE | grep -o \"#[0-9]*\" | head -1 | sed 's/^#//g')\n@@ -107,28 +107,31 @@ script:\n       fi\n     fi\n   - |\n-      rm rust-toolchain\n-      ./setup-toolchain.sh\n-      if [ \"$TRAVIS_OS_NAME\" == \"windows\" ]; then\n-        export PATH=$PATH:$(rustc --print sysroot)/bin\n-      else\n-        export LD_LIBRARY_PATH=$(rustc --print sysroot)/lib\n-      fi\n+    rm rust-toolchain\n+    ./setup-toolchain.sh\n+  - |\n+    if [ \"$TRAVIS_OS_NAME\" == \"windows\" ]; then\n+      export PATH=$PATH:$(rustc --print sysroot)/bin\n+    else\n+      export LD_LIBRARY_PATH=$(rustc --print sysroot)/lib\n+    fi\n+\n+script:\n   - |\n     if [ -z ${INTEGRATION} ]; then\n       travis_wait 30 ./ci/base-tests.sh && sleep 5\n     else\n       ./ci/integration-tests.sh && sleep 5\n     fi\n \n-after_success: |\n-  #!/bin/bash\n-  if [ \"$TRAVIS_OS_NAME\" == \"linux\" ]; then\n-    set -ex\n-    if [ -z ${INTEGRATION} ]; then\n-      ./.github/deploy.sh\n-    else\n-      echo \"Not deploying, because we're in an integration test run\"\n+after_success:\n+  - |\n+    if [ \"$TRAVIS_OS_NAME\" == \"linux\" ]; then\n+      set -e\n+      if [ -z ${INTEGRATION} ]; then\n+        ./.github/deploy.sh\n+      else\n+        echo \"Not deploying, because we're in an integration test run\"\n+      fi\n+      set +e\n     fi\n-    set +e\n-  fi"}, {"sha": "c13bf711ae35ba07bb522b23c0c40ab36876b2f9", "filename": "appveyor.yml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ddb5cb787df35c50318dba5d3f40e98287f4123f/appveyor.yml", "raw_url": "https://github.com/rust-lang/rust/raw/ddb5cb787df35c50318dba5d3f40e98287f4123f/appveyor.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/appveyor.yml?ref=ddb5cb787df35c50318dba5d3f40e98287f4123f", "patch": "@@ -18,7 +18,7 @@ install:\n     - rustup-init.exe -y --default-host %TARGET% --default-toolchain nightly\n     - set PATH=%PATH%;C:\\Users\\appveyor\\.cargo\\bin\n     - del rust-toolchain\n-    - cargo install --git https://github.com/kennytm/rustup-toolchain-install-master --debug || echo \"rustup-toolchain-install-master already installed\"\n+    - cargo install rustup-toolchain-install-master --debug || echo \"rustup-toolchain-install-master already installed\"\n     - rustup-toolchain-install-master -f -n master\n     - rustup component add rustfmt --toolchain nightly & exit 0 # Format test handles missing rustfmt\n     - rustup default master"}, {"sha": "b83116606894a5f0db885cb5233ff6eca6f85d14", "filename": "setup-toolchain.sh", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/ddb5cb787df35c50318dba5d3f40e98287f4123f/setup-toolchain.sh", "raw_url": "https://github.com/rust-lang/rust/raw/ddb5cb787df35c50318dba5d3f40e98287f4123f/setup-toolchain.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/setup-toolchain.sh?ref=ddb5cb787df35c50318dba5d3f40e98287f4123f", "patch": "@@ -1,12 +1,13 @@\n #!/bin/bash\n # Set up the appropriate rustc toolchain\n \n+set -e\n+\n cd \"$(dirname \"$0\")\" || exit\n \n if ! command -v rustup-toolchain-install-master > /dev/null; then\n   cargo install \\\n-    --git https://github.com/lzutao/rustup-toolchain-install-master \\\n-    --rev c44dbf920b644000ac3ba01184cbb1a01bb91519 \\\n+    rustup-toolchain-install-master \\\n     --bin rustup-toolchain-install-master \\\n     --debug\n fi"}]}