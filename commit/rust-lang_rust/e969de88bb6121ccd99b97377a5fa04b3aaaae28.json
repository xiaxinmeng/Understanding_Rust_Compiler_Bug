{"sha": "e969de88bb6121ccd99b97377a5fa04b3aaaae28", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU5NjlkZTg4YmI2MTIxY2NkOTliOTczNzdhNWZhMDRiM2FhYWFlMjg=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2019-03-02T16:17:08Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2019-03-02T16:17:08Z"}, "message": "Fix \"Auto-hide item methods documentation\" setting", "tree": {"sha": "c20ca34a064acd6ee3b629bea76b554749984cbd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c20ca34a064acd6ee3b629bea76b554749984cbd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e969de88bb6121ccd99b97377a5fa04b3aaaae28", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e969de88bb6121ccd99b97377a5fa04b3aaaae28", "html_url": "https://github.com/rust-lang/rust/commit/e969de88bb6121ccd99b97377a5fa04b3aaaae28", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e969de88bb6121ccd99b97377a5fa04b3aaaae28/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "da573206f87b5510de4b0ee1a9c044127e409bd3", "url": "https://api.github.com/repos/rust-lang/rust/commits/da573206f87b5510de4b0ee1a9c044127e409bd3", "html_url": "https://github.com/rust-lang/rust/commit/da573206f87b5510de4b0ee1a9c044127e409bd3"}], "stats": {"total": 69, "additions": 37, "deletions": 32}, "files": [{"sha": "fef6910f40a574c5f62d6f259b25f1b6d25c88ee", "filename": "src/librustdoc/html/static/main.js", "status": "modified", "additions": 37, "deletions": 32, "changes": 69, "blob_url": "https://github.com/rust-lang/rust/blob/e969de88bb6121ccd99b97377a5fa04b3aaaae28/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/e969de88bb6121ccd99b97377a5fa04b3aaaae28/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js?ref=e969de88bb6121ccd99b97377a5fa04b3aaaae28", "patch": "@@ -2077,16 +2077,22 @@ if (!DOMTokenList.prototype.remove) {\n     }\n \n     var toggle = createSimpleToggle(false);\n+    var hideMethodDocs = getCurrentValue(\"rustdoc-method-docs\") !== \"false\";\n+    var pageId = getPageId();\n \n     var func = function(e) {\n         var next = e.nextElementSibling;\n         if (!next) {\n             return;\n         }\n-        if (hasClass(next, \"docblock\") ||\n-            (hasClass(next, \"stability\") &&\n-             hasClass(next.nextElementSibling, \"docblock\"))) {\n-            insertAfter(toggle.cloneNode(true), e.childNodes[e.childNodes.length - 1]);\n+        if (hasClass(next, \"docblock\") === true ||\n+            (hasClass(next, \"stability\") === true &&\n+             hasClass(next.nextElementSibling, \"docblock\") === true)) {\n+            var newToggle = toggle.cloneNode(true);\n+            insertAfter(newToggle, e.childNodes[e.childNodes.length - 1]);\n+            if (hideMethodDocs === true && hasClass(e, \"method\") === true) {\n+                collapseDocs(newToggle, \"hide\", pageId);\n+            }\n         }\n     };\n \n@@ -2107,17 +2113,16 @@ if (!DOMTokenList.prototype.remove) {\n     onEachLazy(document.getElementsByClassName(\"associatedconstant\"), func);\n     onEachLazy(document.getElementsByClassName(\"impl\"), funcImpl);\n     var impl_call = function() {};\n-    if (getCurrentValue(\"rustdoc-method-docs\") !== \"false\") {\n+    if (hideMethodDocs === true) {\n         impl_call = function(e, newToggle, pageId) {\n             if (e.id.match(/^impl(?:-\\d+)?$/) === null) {\n                 // Automatically minimize all non-inherent impls\n-                if (hasClass(e, \"impl\")) {\n+                if (hasClass(e, \"impl\") === true) {\n                     collapseDocs(newToggle, \"hide\", pageId);\n                 }\n             }\n         };\n     }\n-    var pageId = getPageId();\n     var newToggle = document.createElement(\"a\");\n     newToggle.href = \"javascript:void(0)\";\n     newToggle.className = \"collapse-toggle hidden-default collapsed\";\n@@ -2163,7 +2168,7 @@ if (!DOMTokenList.prototype.remove) {\n             var inner_toggle = newToggle.cloneNode(true);\n             inner_toggle.onclick = toggleClicked;\n             e.insertBefore(inner_toggle, e.firstChild);\n-            impl_call(e, inner_toggle, pageId);\n+            impl_call(e.previousSibling, inner_toggle, pageId);\n         }\n     });\n \n@@ -2265,30 +2270,6 @@ if (!DOMTokenList.prototype.remove) {\n     onEachLazy(document.getElementsByClassName(\"docblock\"), buildToggleWrapper);\n     onEachLazy(document.getElementsByClassName(\"sub-variant\"), buildToggleWrapper);\n \n-    // In the search display, allows to switch between tabs.\n-    function printTab(nb) {\n-        if (nb === 0 || nb === 1 || nb === 2) {\n-            currentTab = nb;\n-        }\n-        var nb_copy = nb;\n-        onEachLazy(document.getElementById(\"titles\").childNodes, function(elem) {\n-            if (nb_copy === 0) {\n-                addClass(elem, \"selected\");\n-            } else {\n-                removeClass(elem, \"selected\");\n-            }\n-            nb_copy -= 1;\n-        });\n-        onEachLazy(document.getElementById(\"results\").childNodes, function(elem) {\n-            if (nb === 0) {\n-                elem.style.display = \"\";\n-            } else {\n-                elem.style.display = \"none\";\n-            }\n-            nb -= 1;\n-        });\n-    }\n-\n     function createToggleWrapper(tog) {\n         var span = document.createElement(\"span\");\n         span.className = \"toggle-label\";\n@@ -2374,6 +2355,30 @@ if (!DOMTokenList.prototype.remove) {\n         };\n     });\n \n+    // In the search display, allows to switch between tabs.\n+    function printTab(nb) {\n+        if (nb === 0 || nb === 1 || nb === 2) {\n+            currentTab = nb;\n+        }\n+        var nb_copy = nb;\n+        onEachLazy(document.getElementById(\"titles\").childNodes, function(elem) {\n+            if (nb_copy === 0) {\n+                addClass(elem, \"selected\");\n+            } else {\n+                removeClass(elem, \"selected\");\n+            }\n+            nb_copy -= 1;\n+        });\n+        onEachLazy(document.getElementById(\"results\").childNodes, function(elem) {\n+            if (nb === 0) {\n+                elem.style.display = \"\";\n+            } else {\n+                elem.style.display = \"none\";\n+            }\n+            nb -= 1;\n+        });\n+    }\n+\n     function putBackSearch(search_input) {\n         if (search_input.value !== \"\") {\n             addClass(main, \"hidden\");"}]}