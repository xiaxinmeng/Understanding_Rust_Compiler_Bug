{"sha": "4f7a260472d1722c8b2bf0771c875e69f3a2bf48", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRmN2EyNjA0NzJkMTcyMmM4YjJiZjA3NzFjODc1ZTY5ZjNhMmJmNDg=", "commit": {"author": {"name": "Michael Wright", "email": "mikerite@lavabit.com", "date": "2018-09-06T05:01:56Z"}, "committer": {"name": "Michael Wright", "email": "mikerite@lavabit.com", "date": "2018-09-06T05:01:56Z"}, "message": "driver: Improve check for rustc arg\n\nThe rustc arg might not be exactly \"rustc\". It may be any path to a rustc\nexecutable (especially if the RUSTC environment variable is set when\nexecuting cargo). Rather check that it is a path with 'rustc' file stem.", "tree": {"sha": "57763d16a69989c4e5d84c0a69c6ca1cf0f7363d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/57763d16a69989c4e5d84c0a69c6ca1cf0f7363d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4f7a260472d1722c8b2bf0771c875e69f3a2bf48", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4f7a260472d1722c8b2bf0771c875e69f3a2bf48", "html_url": "https://github.com/rust-lang/rust/commit/4f7a260472d1722c8b2bf0771c875e69f3a2bf48", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4f7a260472d1722c8b2bf0771c875e69f3a2bf48/comments", "author": null, "committer": null, "parents": [{"sha": "ed38d9c79f6c8613f508e024d4aa0d78b8b6e108", "url": "https://api.github.com/repos/rust-lang/rust/commits/ed38d9c79f6c8613f508e024d4aa0d78b8b6e108", "html_url": "https://github.com/rust-lang/rust/commit/ed38d9c79f6c8613f508e024d4aa0d78b8b6e108"}], "stats": {"total": 3, "additions": 2, "deletions": 1}, "files": [{"sha": "267e460ad2e5ec7623ae133bdd6ac3daf4cd97b1", "filename": "src/driver.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/4f7a260472d1722c8b2bf0771c875e69f3a2bf48/src%2Fdriver.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f7a260472d1722c8b2bf0771c875e69f3a2bf48/src%2Fdriver.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdriver.rs?ref=4f7a260472d1722c8b2bf0771c875e69f3a2bf48", "patch": "@@ -6,6 +6,7 @@\n \n use rustc_driver::{self, driver::CompileController, Compilation};\n use rustc_plugin;\n+use std::path::Path;\n use std::process::{exit, Command};\n \n #[allow(clippy::print_stdout)]\n@@ -47,7 +48,7 @@ pub fn main() {\n         if orig_args.len() <= 1 {\n             std::process::exit(1);\n         }\n-        if orig_args[1] == \"rustc\" {\n+        if Path::new(&orig_args[1]).file_stem() == Some(\"rustc\".as_ref()) {\n             // we still want to be able to invoke it normally though\n             orig_args.remove(1);\n         }"}]}