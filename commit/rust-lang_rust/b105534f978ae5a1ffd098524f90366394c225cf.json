{"sha": "b105534f978ae5a1ffd098524f90366394c225cf", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIxMDU1MzRmOTc4YWU1YTFmZmQwOTg1MjRmOTAzNjYzOTRjMjI1Y2Y=", "commit": {"author": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2018-12-28T16:15:13Z"}, "committer": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2018-12-28T16:15:20Z"}, "message": "Misc build changes", "tree": {"sha": "41fea3d73db48c6911a1697e8ff06c8b0a225ac7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/41fea3d73db48c6911a1697e8ff06c8b0a225ac7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b105534f978ae5a1ffd098524f90366394c225cf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b105534f978ae5a1ffd098524f90366394c225cf", "html_url": "https://github.com/rust-lang/rust/commit/b105534f978ae5a1ffd098524f90366394c225cf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b105534f978ae5a1ffd098524f90366394c225cf/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8561349ece98ade3a848501d1b3c390f2b3e6911", "url": "https://api.github.com/repos/rust-lang/rust/commits/8561349ece98ade3a848501d1b3c390f2b3e6911", "html_url": "https://github.com/rust-lang/rust/commit/8561349ece98ade3a848501d1b3c390f2b3e6911"}], "stats": {"total": 7, "additions": 4, "deletions": 3}, "files": [{"sha": "33da1e3dd67920f50401d43026092f75748e446c", "filename": "build_sysroot/build_sysroot.sh", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/b105534f978ae5a1ffd098524f90366394c225cf/build_sysroot%2Fbuild_sysroot.sh", "raw_url": "https://github.com/rust-lang/rust/raw/b105534f978ae5a1ffd098524f90366394c225cf/build_sysroot%2Fbuild_sysroot.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/build_sysroot%2Fbuild_sysroot.sh?ref=b105534f978ae5a1ffd098524f90366394c225cf", "patch": "@@ -19,7 +19,8 @@ else\n fi\n \n # Build libs\n-export RUSTFLAGS=\"$RUSTFLAGS -Z force-unstable-if-unmarked --sysroot ../\"\n+mkdir -p sysroot/lib/rustlib/$TARGET_TRIPLE/lib/\n+export RUSTFLAGS=\"$RUSTFLAGS -Z force-unstable-if-unmarked --sysroot sysroot\"\n if [[ \"$1\" == \"--release\" ]]; then\n     channel='release'\n     RUSTFLAGS=\"$RUSTFLAGS -Zmir-opt-level=3\" cargo build --target $TARGET_TRIPLE --release\n@@ -29,5 +30,4 @@ else\n fi\n \n # Copy files to sysroot\n-mkdir -p sysroot/lib/rustlib/$TARGET_TRIPLE/lib/\n cp target/$TARGET_TRIPLE/$channel/deps/*.rlib sysroot/lib/rustlib/$TARGET_TRIPLE/lib/"}, {"sha": "d03b48c96bce8136a202a864876432bf05aa2cc7", "filename": "test.sh", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/b105534f978ae5a1ffd098524f90366394c225cf/test.sh", "raw_url": "https://github.com/rust-lang/rust/raw/b105534f978ae5a1ffd098524f90366394c225cf/test.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/test.sh?ref=b105534f978ae5a1ffd098524f90366394c225cf", "patch": "@@ -19,7 +19,8 @@ echo \"[JIT] mini_core_hello_world\"\n SHOULD_RUN=1 $RUSTC --crate-type bin example/mini_core_hello_world.rs --cfg jit\n \n echo \"[AOT] mini_core_hello_world\"\n-build_example_bin mini_core_hello_world example/mini_core_hello_world.rs\n+$RUSTC example/mini_core_hello_world.rs --crate-name mini_core_hello_world --crate-type bin\n+sh -c ./target/out/mini_core_hello_world || true\n \n echo \"[BUILD] sysroot\"\n time ./build_sysroot/build_sysroot.sh"}]}