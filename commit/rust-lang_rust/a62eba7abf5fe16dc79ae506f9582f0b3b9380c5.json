{"sha": "a62eba7abf5fe16dc79ae506f9582f0b3b9380c5", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE2MmViYTdhYmY1ZmUxNmRjNzlhZTUwNmY5NTgyZjBiM2I5MzgwYzU=", "commit": {"author": {"name": "Eduard Burtescu", "email": "edy.burt@gmail.com", "date": "2014-04-10T15:01:07Z"}, "committer": {"name": "Eduard Burtescu", "email": "edy.burt@gmail.com", "date": "2014-04-10T17:18:46Z"}, "message": "rustc: move mutability from ty_vec and ty_trait to VstoreSlice and RegionTraitStore.", "tree": {"sha": "f2219c168c3ae9dd85a020f3a889603a2666fd29", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f2219c168c3ae9dd85a020f3a889603a2666fd29"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a62eba7abf5fe16dc79ae506f9582f0b3b9380c5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a62eba7abf5fe16dc79ae506f9582f0b3b9380c5", "html_url": "https://github.com/rust-lang/rust/commit/a62eba7abf5fe16dc79ae506f9582f0b3b9380c5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a62eba7abf5fe16dc79ae506f9582f0b3b9380c5/comments", "author": {"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}, "committer": {"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2803b383f099e71d6eb885d0ea7c01d771dc7e46", "url": "https://api.github.com/repos/rust-lang/rust/commits/2803b383f099e71d6eb885d0ea7c01d771dc7e46", "html_url": "https://github.com/rust-lang/rust/commit/2803b383f099e71d6eb885d0ea7c01d771dc7e46"}], "stats": {"total": 21, "additions": 14, "deletions": 7}, "files": [{"sha": "05f16896a49f53743d08802400f137934ea9dd51", "filename": "src/librustc/middle/ty.rs", "status": "modified", "additions": 14, "deletions": 7, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/a62eba7abf5fe16dc79ae506f9582f0b3b9380c5/src%2Flibrustc%2Fmiddle%2Fty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a62eba7abf5fe16dc79ae506f9582f0b3b9380c5/src%2Flibrustc%2Fmiddle%2Fty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fty.rs?ref=a62eba7abf5fe16dc79ae506f9582f0b3b9380c5", "patch": "@@ -130,16 +130,24 @@ pub struct mt {\n }\n \n #[deriving(Clone, Eq, TotalEq, Encodable, Decodable, Hash, Show)]\n-pub enum Vstore {\n+/// Describes the \"storage mode\" of a `[]`, whether it's fixed length or a slice.\n+///\n+/// Set M to () to disable mutable slices.\n+pub enum Vstore<M = ast::Mutability> {\n+    /// [T, ..N]\n     VstoreFixed(uint),\n+    /// ~[T]\n     VstoreUniq,\n-    VstoreSlice(Region)\n+    /// &[T] and &mut [T]\n+    VstoreSlice(Region, M)\n }\n \n #[deriving(Clone, Eq, TotalEq, Hash, Encodable, Decodable, Show)]\n pub enum TraitStore {\n-    UniqTraitStore,             // ~Trait\n-    RegionTraitStore(Region),   // &Trait\n+    /// ~Trait\n+    UniqTraitStore,\n+    /// &Trait and &mut Trait\n+    RegionTraitStore(Region, ast::Mutability),\n }\n \n pub struct field_ty {\n@@ -729,11 +737,11 @@ pub enum sty {\n     ty_int(ast::IntTy),\n     ty_uint(ast::UintTy),\n     ty_float(ast::FloatTy),\n-    ty_str(Vstore),\n     ty_enum(DefId, substs),\n     ty_box(t),\n     ty_uniq(t),\n-    ty_vec(mt, Vstore),\n+    ty_str(Vstore<()>),\n+    ty_vec(t, Vstore),\n     ty_ptr(mt),\n     ty_rptr(Region, mt),\n     ty_bare_fn(BareFnTy),\n@@ -757,7 +765,6 @@ pub struct TyTrait {\n     pub def_id: DefId,\n     pub substs: substs,\n     pub store: TraitStore,\n-    pub mutability: ast::Mutability,\n     pub bounds: BuiltinBounds\n }\n "}]}