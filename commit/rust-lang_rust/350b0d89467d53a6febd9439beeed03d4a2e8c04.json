{"sha": "350b0d89467d53a6febd9439beeed03d4a2e8c04", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM1MGIwZDg5NDY3ZDUzYTZmZWJkOTQzOWJlZWVkMDNkNGEyZThjMDQ=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2016-10-14T10:12:42Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2016-10-14T11:47:16Z"}, "message": "Lint against lowercase static mut", "tree": {"sha": "ac7217b3603bc29023d3c5f9f0e8a1fc0169f67d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ac7217b3603bc29023d3c5f9f0e8a1fc0169f67d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/350b0d89467d53a6febd9439beeed03d4a2e8c04", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/350b0d89467d53a6febd9439beeed03d4a2e8c04", "html_url": "https://github.com/rust-lang/rust/commit/350b0d89467d53a6febd9439beeed03d4a2e8c04", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/350b0d89467d53a6febd9439beeed03d4a2e8c04/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "098d22845933814a92497cbfaa8eb4a9a36b117f", "url": "https://api.github.com/repos/rust-lang/rust/commits/098d22845933814a92497cbfaa8eb4a9a36b117f", "html_url": "https://github.com/rust-lang/rust/commit/098d22845933814a92497cbfaa8eb4a9a36b117f"}], "stats": {"total": 26, "additions": 6, "deletions": 20}, "files": [{"sha": "d68d4c23b84f95768d0793b819894984aeedef14", "filename": "src/librustc_lint/bad_style.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/350b0d89467d53a6febd9439beeed03d4a2e8c04/src%2Flibrustc_lint%2Fbad_style.rs", "raw_url": "https://github.com/rust-lang/rust/raw/350b0d89467d53a6febd9439beeed03d4a2e8c04/src%2Flibrustc_lint%2Fbad_style.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2Fbad_style.rs?ref=350b0d89467d53a6febd9439beeed03d4a2e8c04", "patch": "@@ -355,10 +355,12 @@ impl LintPass for NonUpperCaseGlobals {\n impl LateLintPass for NonUpperCaseGlobals {\n     fn check_item(&mut self, cx: &LateContext, it: &hir::Item) {\n         match it.node {\n-            // only check static constants\n             hir::ItemStatic(_, hir::MutImmutable, _) => {\n                 NonUpperCaseGlobals::check_upper_case(cx, \"static constant\", it.name, it.span);\n             }\n+            hir::ItemStatic(_, hir::MutMutable, _) => {\n+                NonUpperCaseGlobals::check_upper_case(cx, \"static variable\", it.name, it.span);\n+            }\n             hir::ItemConst(..) => {\n                 NonUpperCaseGlobals::check_upper_case(cx, \"constant\", it.name, it.span);\n             }"}, {"sha": "a9161a8b11b7b21ab1bd97b599fe158cf91e7eda", "filename": "src/test/compile-fail/lint-non-uppercase-statics.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/350b0d89467d53a6febd9439beeed03d4a2e8c04/src%2Ftest%2Fcompile-fail%2Flint-non-uppercase-statics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/350b0d89467d53a6febd9439beeed03d4a2e8c04/src%2Ftest%2Fcompile-fail%2Flint-non-uppercase-statics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Flint-non-uppercase-statics.rs?ref=350b0d89467d53a6febd9439beeed03d4a2e8c04", "patch": "@@ -13,4 +13,7 @@\n \n static foo: isize = 1; //~ ERROR static constant `foo` should have an upper case name such as `FOO`\n \n+static mut bar: isize = 1;\n+        //~^ ERROR static variable `bar` should have an upper case name such as `BAR`\n+\n fn main() { }"}, {"sha": "aa5b3834c01786fc0d58684a6aaabfc69839649a", "filename": "src/test/run-pass/lint-non-uppercase-statics-lowercase-mut-statics.rs", "status": "removed", "additions": 0, "deletions": 19, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/098d22845933814a92497cbfaa8eb4a9a36b117f/src%2Ftest%2Frun-pass%2Flint-non-uppercase-statics-lowercase-mut-statics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/098d22845933814a92497cbfaa8eb4a9a36b117f/src%2Ftest%2Frun-pass%2Flint-non-uppercase-statics-lowercase-mut-statics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Flint-non-uppercase-statics-lowercase-mut-statics.rs?ref=098d22845933814a92497cbfaa8eb4a9a36b117f", "patch": "@@ -1,19 +0,0 @@\n-// Copyright 2013 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n-\n-// pretty-expanded FIXME #23616\n-\n-#![forbid(non_camel_case_types)]\n-#![forbid(non_upper_case_globals)]\n-\n-static mut bar: isize = 2;\n-\n-pub fn main() {}"}]}