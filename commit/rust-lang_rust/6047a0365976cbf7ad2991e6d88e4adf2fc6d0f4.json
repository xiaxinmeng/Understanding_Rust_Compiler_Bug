{"sha": "6047a0365976cbf7ad2991e6d88e4adf2fc6d0f4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYwNDdhMDM2NTk3NmNiZjdhZDI5OTFlNmQ4OGU0YWRmMmZjNmQwZjQ=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2017-11-17T23:32:12Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2017-11-18T13:37:10Z"}, "message": "Add tooltip for important traits display", "tree": {"sha": "433506c2d4b43b801f1e726a816e76a3ba32a4dc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/433506c2d4b43b801f1e726a816e76a3ba32a4dc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6047a0365976cbf7ad2991e6d88e4adf2fc6d0f4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6047a0365976cbf7ad2991e6d88e4adf2fc6d0f4", "html_url": "https://github.com/rust-lang/rust/commit/6047a0365976cbf7ad2991e6d88e4adf2fc6d0f4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6047a0365976cbf7ad2991e6d88e4adf2fc6d0f4/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d86621f69e827361e47bc6c4b2c7fd5319155227", "url": "https://api.github.com/repos/rust-lang/rust/commits/d86621f69e827361e47bc6c4b2c7fd5319155227", "html_url": "https://github.com/rust-lang/rust/commit/d86621f69e827361e47bc6c4b2c7fd5319155227"}], "stats": {"total": 24, "additions": 15, "deletions": 9}, "files": [{"sha": "731b444300439a2f9546d6a227ce5ea4df6a3549", "filename": "src/librustdoc/html/render.rs", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/6047a0365976cbf7ad2991e6d88e4adf2fc6d0f4/src%2Flibrustdoc%2Fhtml%2Frender.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6047a0365976cbf7ad2991e6d88e4adf2fc6d0f4/src%2Flibrustdoc%2Fhtml%2Frender.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender.rs?ref=6047a0365976cbf7ad2991e6d88e4adf2fc6d0f4", "patch": "@@ -3255,6 +3255,7 @@ fn render_spotlight_traits(item: &clean::Item) -> Result<String, fmt::Error> {\n \n fn spotlight_decl(decl: &clean::FnDecl) -> Result<String, fmt::Error> {\n     let mut out = String::new();\n+    let mut trait_ = String::new();\n \n     if let Some(did) = decl.output.def_id() {\n         let c = cache();\n@@ -3265,9 +3266,10 @@ fn spotlight_decl(decl: &clean::FnDecl) -> Result<String, fmt::Error> {\n                                         .map_or(false, |t| t.is_spotlight) {\n                     if out.is_empty() {\n                         out.push_str(\n-                            &format!(\"<h3 class=\\\"important\\\">Important traits for {}</h3>\",\n+                            &format!(\"<h3 class=\\\"important\\\">Important traits for {}</h3>\\\n+                                      <code class=\\\"content\\\">\",\n                                      impl_.for_));\n-                        out.push_str(\"<code class=\\\"content\\\">\");\n+                        trait_.push_str(&format!(\"{}\", impl_.for_));\n                     }\n \n                     //use the \"where\" class here to make it small\n@@ -3288,8 +3290,11 @@ fn spotlight_decl(decl: &clean::FnDecl) -> Result<String, fmt::Error> {\n     }\n \n     if !out.is_empty() {\n-        out.insert_str(0, \"<div class=\\\"important-traits\\\">\u24d8<div class=\\\"content hidden\\\">\");\n-        out.push_str(\"</code></span></div></div>\");\n+        out.insert_str(0, &format!(\"<div class=\\\"important-traits\\\"><div class='tooltip'>\u24d8\\\n+                                    <span class='tooltiptext'>Important traits for {}</span></div>\\\n+                                    <div class=\\\"content hidden\\\">\",\n+                                   trait_));\n+        out.push_str(\"</code></div></div>\");\n     }\n \n     Ok(out)"}, {"sha": "51d6857d628a80dc8800f307f858b29682ed4843", "filename": "src/librustdoc/html/static/main.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6047a0365976cbf7ad2991e6d88e4adf2fc6d0f4/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/6047a0365976cbf7ad2991e6d88e4adf2fc6d0f4/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js?ref=6047a0365976cbf7ad2991e6d88e4adf2fc6d0f4", "patch": "@@ -1737,7 +1737,7 @@\n \n     onEach(document.getElementsByClassName('important-traits'), function(e) {\n         e.onclick = function() {\n-            showModal(e.firstElementChild.innerHTML);\n+            showModal(e.lastElementChild.innerHTML);\n         };\n     });\n "}, {"sha": "d7f4674908c5887b8104dbce10f1b5556bb29789", "filename": "src/librustdoc/html/static/rustdoc.css", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6047a0365976cbf7ad2991e6d88e4adf2fc6d0f4/src%2Flibrustdoc%2Fhtml%2Fstatic%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/6047a0365976cbf7ad2991e6d88e4adf2fc6d0f4/src%2Flibrustdoc%2Fhtml%2Fstatic%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Frustdoc.css?ref=6047a0365976cbf7ad2991e6d88e4adf2fc6d0f4", "patch": "@@ -958,6 +958,7 @@ pre.rust {\n \n .important-traits {\n \tcursor: pointer;\n+\tz-index: 2;\n }\n \n h4 > .important-traits {"}, {"sha": "a570aa2d3984f29a9cc803fa51153ffd98a90e4d", "filename": "src/test/rustdoc/doc-spotlight.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/6047a0365976cbf7ad2991e6d88e4adf2fc6d0f4/src%2Ftest%2Frustdoc%2Fdoc-spotlight.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6047a0365976cbf7ad2991e6d88e4adf2fc6d0f4/src%2Ftest%2Frustdoc%2Fdoc-spotlight.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fdoc-spotlight.rs?ref=6047a0365976cbf7ad2991e6d88e4adf2fc6d0f4", "patch": "@@ -19,7 +19,7 @@ impl<T: SomeTrait> SomeTrait for Wrapper<T> {}\n #[doc(spotlight)]\n pub trait SomeTrait {\n     // @has doc_spotlight/trait.SomeTrait.html\n-    // @has - '//code[@class=\"spotlight\"]' 'impl<T: SomeTrait> SomeTrait for Wrapper<T>'\n+    // @has - '//code[@class=\"content\"]' 'impl<T: SomeTrait> SomeTrait for Wrapper<T>'\n     fn wrap_me(self) -> Wrapper<Self> where Self: Sized {\n         Wrapper {\n             inner: self,\n@@ -32,15 +32,15 @@ impl SomeTrait for SomeStruct {}\n \n impl SomeStruct {\n     // @has doc_spotlight/struct.SomeStruct.html\n-    // @has - '//code[@class=\"spotlight\"]' 'impl SomeTrait for SomeStruct'\n-    // @has - '//code[@class=\"spotlight\"]' 'impl<T: SomeTrait> SomeTrait for Wrapper<T>'\n+    // @has - '//code[@class=\"content\"]' 'impl SomeTrait for SomeStruct'\n+    // @has - '//code[@class=\"content\"]' 'impl<T: SomeTrait> SomeTrait for Wrapper<T>'\n     pub fn new() -> SomeStruct {\n         SomeStruct\n     }\n }\n \n // @has doc_spotlight/fn.bare_fn.html\n-// @has - '//code[@class=\"spotlight\"]' 'impl SomeTrait for SomeStruct'\n+// @has - '//code[@class=\"content\"]' 'impl SomeTrait for SomeStruct'\n pub fn bare_fn() -> SomeStruct {\n     SomeStruct\n }"}]}