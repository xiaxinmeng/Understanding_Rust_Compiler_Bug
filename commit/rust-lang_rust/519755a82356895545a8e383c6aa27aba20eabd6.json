{"sha": "519755a82356895545a8e383c6aa27aba20eabd6", "node_id": "C_kwDOAAsO6NoAKDUxOTc1NWE4MjM1Njg5NTU0NWE4ZTM4M2M2YWEyN2FiYTIwZWFiZDY", "commit": {"author": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2022-04-29T22:48:24Z"}, "committer": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2022-04-29T22:53:48Z"}, "message": "Resolve clippy::needless_return\n\n    error: unneeded `return` statement\n       --> src/helpers.rs:734:13\n        |\n    734 |             return Ok(());\n        |             ^^^^^^^^^^^^^^ help: remove `return`: `Ok(())`\n        |\n        = note: `-D clippy::needless-return` implied by `-D clippy::all`\n        = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_return\n\n    error: unneeded `return` statement\n       --> src/range_map.rs:113:9\n        |\n    113 |         return true;\n        |         ^^^^^^^^^^^^ help: remove `return`: `true`\n        |\n        = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_return\n\n    error: unneeded `return` statement\n       --> src/shims/posix/fs.rs:648:25\n        |\n    648 |                 None => return this.handle_not_found(),\n        |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove `return`: `this.handle_not_found()`\n        |\n        = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_return\n\n    error: unneeded `return` statement\n      --> src/shims/panic.rs:62:9\n       |\n    62 |         return Ok(());\n       |         ^^^^^^^^^^^^^^ help: remove `return`: `Ok(())`\n       |\n       = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_return\n\n    error: unneeded `return` statement\n       --> src/shims/panic.rs:115:9\n        |\n    115 |         return Ok(());\n        |         ^^^^^^^^^^^^^^ help: remove `return`: `Ok(())`\n        |\n        = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_return\n\n    error: unneeded `return` statement\n       --> src/thread.rs:477:9\n        |\n    477 |         return free_tls_statics;\n        |         ^^^^^^^^^^^^^^^^^^^^^^^^ help: remove `return`: `free_tls_statics`\n        |\n        = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_return\n\n    error: unneeded `return` statement\n       --> src/thread.rs:459:17\n        |\n    459 |                 return false;\n        |                 ^^^^^^^^^^^^^ help: remove `return`: `false`\n        |\n        = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_return", "tree": {"sha": "1df2b3957fa2d01b8e8314df666fbc6a595e67ba", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1df2b3957fa2d01b8e8314df666fbc6a595e67ba"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/519755a82356895545a8e383c6aa27aba20eabd6", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEERijF2Cz/ZdaBZKeK+boUO5X/bYIFAmJsbHwACgkQ+boUO5X/\nbYKJRA/7BStLHHXQ/lvm577Me8FIpFIFdB3YhC7YKMWD8R3CHk9XWl5+a+qUdg4C\nSFvSfl1JPr9OrxHaK+u9Nnl+1l2aQCE9VXsH3CEn4xgN7hYB8fFb6EZ3p30w2OBk\ne59cwZzDGI+Afl1JYmSqS9zuaRs1rU4h3PFPrdVmn1tZ+NZ3ON31lEKwoPNswCfj\nrCJ0nrvGNwa+nZr/e9mf+/sXqBm4sDVGFV9KTG3bFem9GvijBLAe4kfba5jXRuHy\nBZ2emElDI560gx122zGb6WJcblaYwi9GWBY/0gC5cz6jS/W0ARQXmJZ1jXBrlIcC\nIHAvC/Mt/JyPd/94oOiDqUaYaBOiYeK0w6NC/dRiotqETt2AN9E/PA9ypXnbNx9R\nqPU7iodlVaraXjte2FSxVmenaLqCkGaMHjlL41ru1LOyVeFsfjq1BiRE+LX96GW1\nNaM4MvXq41/fiyjWeqHR3yz6W1GeofAioaRPpT0PL30nw08pLMtVX7LVjaJ/odlU\nnBcGzMQSNInzRLUhqCiSY3VZJDivGVOlj7sXObLxeGuVtdIqX9qYv7pdI9HNXMDp\nNviTDKlL3HjK3g+tER+ToZ7lE5gxMbgnn3QlEJQTBrCR8kJwJCxCiX+o88SxA3a/\nqaQ6TnJ8uPEmOIv6YZLEHnRId4xMSaHHouSUVR/OCXwIgiubY3A=\n=TQdz\n-----END PGP SIGNATURE-----", "payload": "tree 1df2b3957fa2d01b8e8314df666fbc6a595e67ba\nparent 6e2297fde014ea5a89765bde4ade220b8f50fd7d\nauthor David Tolnay <dtolnay@gmail.com> 1651272504 -0700\ncommitter David Tolnay <dtolnay@gmail.com> 1651272828 -0700\n\nResolve clippy::needless_return\n\n    error: unneeded `return` statement\n       --> src/helpers.rs:734:13\n        |\n    734 |             return Ok(());\n        |             ^^^^^^^^^^^^^^ help: remove `return`: `Ok(())`\n        |\n        = note: `-D clippy::needless-return` implied by `-D clippy::all`\n        = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_return\n\n    error: unneeded `return` statement\n       --> src/range_map.rs:113:9\n        |\n    113 |         return true;\n        |         ^^^^^^^^^^^^ help: remove `return`: `true`\n        |\n        = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_return\n\n    error: unneeded `return` statement\n       --> src/shims/posix/fs.rs:648:25\n        |\n    648 |                 None => return this.handle_not_found(),\n        |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove `return`: `this.handle_not_found()`\n        |\n        = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_return\n\n    error: unneeded `return` statement\n      --> src/shims/panic.rs:62:9\n       |\n    62 |         return Ok(());\n       |         ^^^^^^^^^^^^^^ help: remove `return`: `Ok(())`\n       |\n       = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_return\n\n    error: unneeded `return` statement\n       --> src/shims/panic.rs:115:9\n        |\n    115 |         return Ok(());\n        |         ^^^^^^^^^^^^^^ help: remove `return`: `Ok(())`\n        |\n        = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_return\n\n    error: unneeded `return` statement\n       --> src/thread.rs:477:9\n        |\n    477 |         return free_tls_statics;\n        |         ^^^^^^^^^^^^^^^^^^^^^^^^ help: remove `return`: `free_tls_statics`\n        |\n        = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_return\n\n    error: unneeded `return` statement\n       --> src/thread.rs:459:17\n        |\n    459 |                 return false;\n        |                 ^^^^^^^^^^^^^ help: remove `return`: `false`\n        |\n        = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_return\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/519755a82356895545a8e383c6aa27aba20eabd6", "html_url": "https://github.com/rust-lang/rust/commit/519755a82356895545a8e383c6aa27aba20eabd6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/519755a82356895545a8e383c6aa27aba20eabd6/comments", "author": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6e2297fde014ea5a89765bde4ade220b8f50fd7d", "url": "https://api.github.com/repos/rust-lang/rust/commits/6e2297fde014ea5a89765bde4ade220b8f50fd7d", "html_url": "https://github.com/rust-lang/rust/commit/6e2297fde014ea5a89765bde4ade220b8f50fd7d"}], "stats": {"total": 15, "additions": 7, "deletions": 8}, "files": [{"sha": "76a65bcbb76ea4a4ee532116129684e1fd780630", "filename": "src/helpers.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/519755a82356895545a8e383c6aa27aba20eabd6/src%2Fhelpers.rs", "raw_url": "https://github.com/rust-lang/rust/raw/519755a82356895545a8e383c6aa27aba20eabd6/src%2Fhelpers.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fhelpers.rs?ref=519755a82356895545a8e383c6aa27aba20eabd6", "patch": "@@ -731,7 +731,7 @@ pub trait EvalContextExt<'mir, 'tcx: 'mir>: crate::MiriEvalContextExt<'mir, 'tcx\n             // message is slightly different here to make automated analysis easier\n             let error_msg = format!(\"unsupported Miri functionality: {}\", error_msg.as_ref());\n             this.start_panic(error_msg.as_ref(), StackPopUnwind::Skip)?;\n-            return Ok(());\n+            Ok(())\n         } else {\n             throw_unsup_format!(\"{}\", error_msg.as_ref());\n         }"}, {"sha": "50d6a09eb8917841d60d9037c3a1252ec8d6f4f3", "filename": "src/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/519755a82356895545a8e383c6aa27aba20eabd6/src%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/519755a82356895545a8e383c6aa27aba20eabd6/src%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib.rs?ref=519755a82356895545a8e383c6aa27aba20eabd6", "patch": "@@ -19,7 +19,6 @@\n     clippy::if_same_then_else,\n     clippy::manual_map,\n     clippy::needless_lifetimes,\n-    clippy::needless_return,\n     clippy::new_without_default,\n     clippy::op_ref,\n     clippy::redundant_closure,"}, {"sha": "474ad9dcccd933977765f045fb23703500cb0a90", "filename": "src/range_map.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/519755a82356895545a8e383c6aa27aba20eabd6/src%2Frange_map.rs", "raw_url": "https://github.com/rust-lang/rust/raw/519755a82356895545a8e383c6aa27aba20eabd6/src%2Frange_map.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frange_map.rs?ref=519755a82356895545a8e383c6aa27aba20eabd6", "patch": "@@ -110,7 +110,7 @@ impl<T> RangeMap<T> {\n         // Copy the data, and insert second element.\n         let second = Elem { range: second_range, data: elem.data.clone() };\n         self.v.insert(index + 1, second);\n-        return true;\n+        true\n     }\n \n     /// Provides mutable iteration over everything in the given range. As a side-effect,"}, {"sha": "96d3b7c9f891e03d7da39fa584b86d1788fa96f5", "filename": "src/shims/panic.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/519755a82356895545a8e383c6aa27aba20eabd6/src%2Fshims%2Fpanic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/519755a82356895545a8e383c6aa27aba20eabd6/src%2Fshims%2Fpanic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fshims%2Fpanic.rs?ref=519755a82356895545a8e383c6aa27aba20eabd6", "patch": "@@ -59,7 +59,7 @@ pub trait EvalContextExt<'mir, 'tcx: 'mir>: crate::MiriEvalContextExt<'mir, 'tcx\n \n         // Jump to the unwind block to begin unwinding.\n         this.unwind_to_block(unwind)?;\n-        return Ok(());\n+        Ok(())\n     }\n \n     /// Handles the `try` intrinsic, the underlying implementation of `std::panicking::try`.\n@@ -112,7 +112,7 @@ pub trait EvalContextExt<'mir, 'tcx: 'mir>: crate::MiriEvalContextExt<'mir, 'tcx\n                 Some(CatchUnwindData { catch_fn, data, dest: *dest, ret });\n         }\n \n-        return Ok(());\n+        Ok(())\n     }\n \n     fn handle_stack_pop("}, {"sha": "f224a1461f93d98bb9f5991d3fc15d498cbdc76b", "filename": "src/shims/posix/fs.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/519755a82356895545a8e383c6aa27aba20eabd6/src%2Fshims%2Fposix%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/519755a82356895545a8e383c6aa27aba20eabd6/src%2Fshims%2Fposix%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fshims%2Fposix%2Ffs.rs?ref=519755a82356895545a8e383c6aa27aba20eabd6", "patch": "@@ -645,7 +645,7 @@ pub trait EvalContextExt<'mir, 'tcx: 'mir>: crate::MiriEvalContextExt<'mir, 'tcx\n                         }\n                     }\n                 }\n-                None => return this.handle_not_found(),\n+                None => this.handle_not_found(),\n             }\n         } else if this.tcx.sess.target.os == \"macos\" && cmd == this.eval_libc_i32(\"F_FULLFSYNC\")? {\n             if let Some(file_descriptor) = this.machine.file_handler.handles.get(&fd) {"}, {"sha": "2ed8b3a7ce1cc55063e97fa219b3487603a3529d", "filename": "src/thread.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/519755a82356895545a8e383c6aa27aba20eabd6/src%2Fthread.rs", "raw_url": "https://github.com/rust-lang/rust/raw/519755a82356895545a8e383c6aa27aba20eabd6/src%2Fthread.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fthread.rs?ref=519755a82356895545a8e383c6aa27aba20eabd6", "patch": "@@ -456,7 +456,7 @@ impl<'mir, 'tcx: 'mir> ThreadManager<'mir, 'tcx> {\n                 // Delete this static from the map and from memory.\n                 // We cannot free directly here as we cannot use `?` in this context.\n                 free_tls_statics.push(alloc_id);\n-                return false;\n+                false\n             });\n         }\n         // Set the thread into a terminated state in the data-race detector\n@@ -474,7 +474,7 @@ impl<'mir, 'tcx: 'mir> ThreadManager<'mir, 'tcx> {\n                 thread.state = ThreadState::Enabled;\n             }\n         }\n-        return free_tls_statics;\n+        free_tls_statics\n     }\n \n     /// Decide which action to take next and on which thread."}]}