{"sha": "eb99deb9c61704ff4a511ea375ae6ba7dbd980c4", "node_id": "MDY6Q29tbWl0NzI0NzEyOmViOTlkZWI5YzYxNzA0ZmY0YTUxMWVhMzc1YWU2YmE3ZGJkOTgwYzQ=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-03-22T09:51:40Z"}, "committer": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-03-22T14:43:53Z"}, "message": "Rollup merge of #49242 - Mrowqa:typaram-attrs, r=petrochenkov\n\nPass attributes to hir::TyParam\n\nRequired by https://github.com/servo/servo/pull/20264\nDiscussed here: https://gitter.im/servo/servo?at=5aafdcd1012ff2bf681da97a\n\nCC @nikomatsakis", "tree": {"sha": "294a6df00d657e1bf8e81070b8d14bf4545ee588", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/294a6df00d657e1bf8e81070b8d14bf4545ee588"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/eb99deb9c61704ff4a511ea375ae6ba7dbd980c4", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZ1R8CLMp8f2GxWoQ/vbIBR0OATwFAlqzwSoACgkQ/vbIBR0O\nATyQcA/+I0B8pSEDQdLYW1dxlPb2I1nnfWwvtwPHs1wZ1HdRXYlPA+woBGt+P0cl\nBdnNg7FL/G7Cqu5PVyAx6UfM3BoKBJ8tld5gxZruRWC0ha/gvxeY13eGbuyi/BHt\n2A9a1iijusQID9Kj4aPTlJ/bI90vIgAdvwdGKRDCEj2iNGDU9Pg4Npq3m7ZlV8yU\nBt457IOuwxbsZ84VRKWyk1ROfkVsQ2E/FfU5NbthX9XDMh1vozHA/96cZvtB31Cj\nwcdleLraqVCWPYoRPvhEnI9g19OoVf45Of9ogyh6nHORrKgvSEqArsCJ95qm0gmX\nFH1SdNPYlhOnHScHLNhmxVqwqBhhQWmM0tWgbnnad/f5bdS2OAemuuwUp91CC/Zn\njFk1OVsa1SwZLBy9mi77Ap4abE16j16IaPnPaPoTgn1dA6gxksJKH6NwIKRYBJ5g\nzI/hZ/QPX1drzqGeMTJce92jRiaHl8/JQnHDq2bP/CUqgRRUL0cLtPzWpa9n0G+q\n2EET6vuS995YdX3m2lsIxqfIsBy/74SDstL/+yWdi/Dwx9xCevODGX5uqEIElopS\nJBTazRIXJHyr8z+SB4BPTfbqfMdlvq1TSLUiiQL1vyWhmeFeFGhiMOtrxxIjnWbt\n2pkHaZYk0OHbzwDM2Oc2K5XGfaZ4JuDUl8o3Zo2bfzdPQpplXzw=\n=oCQ+\n-----END PGP SIGNATURE-----", "payload": "tree 294a6df00d657e1bf8e81070b8d14bf4545ee588\nparent a10db970692fbf1907aa198c542d30ffc9449d7d\nparent 99b49b532c8fa2b45179ff346089d9527d05a7a6\nauthor kennytm <kennytm@gmail.com> 1521712300 +0800\ncommitter kennytm <kennytm@gmail.com> 1521729833 +0800\n\nRollup merge of #49242 - Mrowqa:typaram-attrs, r=petrochenkov\n\nPass attributes to hir::TyParam\n\nRequired by https://github.com/servo/servo/pull/20264\nDiscussed here: https://gitter.im/servo/servo?at=5aafdcd1012ff2bf681da97a\n\nCC @nikomatsakis\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/eb99deb9c61704ff4a511ea375ae6ba7dbd980c4", "html_url": "https://github.com/rust-lang/rust/commit/eb99deb9c61704ff4a511ea375ae6ba7dbd980c4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/eb99deb9c61704ff4a511ea375ae6ba7dbd980c4/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a10db970692fbf1907aa198c542d30ffc9449d7d", "url": "https://api.github.com/repos/rust-lang/rust/commits/a10db970692fbf1907aa198c542d30ffc9449d7d", "html_url": "https://github.com/rust-lang/rust/commit/a10db970692fbf1907aa198c542d30ffc9449d7d"}, {"sha": "99b49b532c8fa2b45179ff346089d9527d05a7a6", "url": "https://api.github.com/repos/rust-lang/rust/commits/99b49b532c8fa2b45179ff346089d9527d05a7a6", "html_url": "https://github.com/rust-lang/rust/commit/99b49b532c8fa2b45179ff346089d9527d05a7a6"}], "stats": {"total": 9, "additions": 7, "deletions": 2}, "files": [{"sha": "f6bdfde15fc5ff962cf7f6f12ab90e49a0febe64", "filename": "src/librustc/hir/lowering.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/eb99deb9c61704ff4a511ea375ae6ba7dbd980c4/src%2Flibrustc%2Fhir%2Flowering.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eb99deb9c61704ff4a511ea375ae6ba7dbd980c4/src%2Flibrustc%2Fhir%2Flowering.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fhir%2Flowering.rs?ref=eb99deb9c61704ff4a511ea375ae6ba7dbd980c4", "patch": "@@ -809,7 +809,7 @@ impl<'a> LoweringContext<'a> {\n         }\n     }\n \n-    fn lower_attrs(&mut self, attrs: &Vec<Attribute>) -> hir::HirVec<Attribute> {\n+    fn lower_attrs(&mut self, attrs: &[Attribute]) -> hir::HirVec<Attribute> {\n         attrs.iter().map(|a| self.lower_attr(a)).collect::<Vec<_>>().into()\n     }\n \n@@ -1019,6 +1019,7 @@ impl<'a> LoweringContext<'a> {\n                             span,\n                             pure_wrt_drop: false,\n                             synthetic: Some(hir::SyntheticTyParamKind::ImplTrait),\n+                            attrs: P::new(),\n                         });\n \n                         hir::TyPath(hir::QPath::Resolved(None, P(hir::Path {\n@@ -1585,6 +1586,7 @@ impl<'a> LoweringContext<'a> {\n                                .filter(|attr| attr.check_name(\"rustc_synthetic\"))\n                                .map(|_| hir::SyntheticTyParamKind::ImplTrait)\n                                .nth(0),\n+            attrs: self.lower_attrs(&tp.attrs),\n         }\n     }\n "}, {"sha": "e8bcbfbb77a1791cb03d6d65352566accc740c8a", "filename": "src/librustc/hir/map/mod.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/eb99deb9c61704ff4a511ea375ae6ba7dbd980c4/src%2Flibrustc%2Fhir%2Fmap%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eb99deb9c61704ff4a511ea375ae6ba7dbd980c4/src%2Flibrustc%2Fhir%2Fmap%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fhir%2Fmap%2Fmod.rs?ref=eb99deb9c61704ff4a511ea375ae6ba7dbd980c4", "patch": "@@ -962,6 +962,7 @@ impl<'hir> Map<'hir> {\n             Some(NodeField(ref f)) => Some(&f.attrs[..]),\n             Some(NodeExpr(ref e)) => Some(&*e.attrs),\n             Some(NodeStmt(ref s)) => Some(s.node.attrs()),\n+            Some(NodeTyParam(tp)) => Some(&tp.attrs[..]),\n             // unit/tuple structs take the attributes straight from\n             // the struct definition.\n             Some(NodeStructCtor(_)) => {"}, {"sha": "d6810b2468bccbed8dc1d332e42847db7b3da388", "filename": "src/librustc/hir/mod.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/eb99deb9c61704ff4a511ea375ae6ba7dbd980c4/src%2Flibrustc%2Fhir%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eb99deb9c61704ff4a511ea375ae6ba7dbd980c4/src%2Flibrustc%2Fhir%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fhir%2Fmod.rs?ref=eb99deb9c61704ff4a511ea375ae6ba7dbd980c4", "patch": "@@ -414,6 +414,7 @@ pub struct TyParam {\n     pub span: Span,\n     pub pure_wrt_drop: bool,\n     pub synthetic: Option<SyntheticTyParamKind>,\n+    pub attrs: HirVec<Attribute>,\n }\n \n #[derive(Clone, PartialEq, Eq, RustcEncodable, RustcDecodable, Hash, Debug)]"}, {"sha": "774b1442b7101cd0da9aea15ede223d57231ed9b", "filename": "src/librustc/ich/impls_hir.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/eb99deb9c61704ff4a511ea375ae6ba7dbd980c4/src%2Flibrustc%2Fich%2Fimpls_hir.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eb99deb9c61704ff4a511ea375ae6ba7dbd980c4/src%2Flibrustc%2Fich%2Fimpls_hir.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fich%2Fimpls_hir.rs?ref=eb99deb9c61704ff4a511ea375ae6ba7dbd980c4", "patch": "@@ -203,7 +203,8 @@ impl_stable_hash_for!(struct hir::TyParam {\n     default,\n     span,\n     pure_wrt_drop,\n-    synthetic\n+    synthetic,\n+    attrs\n });\n \n impl_stable_hash_for!(enum hir::GenericParam {"}]}