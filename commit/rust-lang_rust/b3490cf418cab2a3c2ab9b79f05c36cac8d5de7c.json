{"sha": "b3490cf418cab2a3c2ab9b79f05c36cac8d5de7c", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIzNDkwY2Y0MThjYWIyYTNjMmFiOWI3OWYwNWMzNmNhYzhkNWRlN2M=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2019-03-19T20:34:01Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-03-19T20:34:01Z"}, "message": "Rollup merge of #58986 - cuviper:ppc64-binutils, r=alexcrichton\n\n[CI] Update binutils for powerpc64 and powerpc64le\n\nCargo powerpc64 and powerpc64le are seeing `SIGILL` crashes in openssl,\nwhich was found to be a linking problem, fixed by newer binutils. See\n<https://github.com/rust-lang/rust/issues/57345#issuecomment-462094555>\n\nFor powerpc64 we're using crosstool-ng, which doesn't offer a newer\nbinutils version, but we can just compile it separately. On powerpc64le\nwe're already building binutils. Both are now updated to binutils 2.32.\n\nCloses rust-lang/cargo#6320\nCloses rust-lang/rust#57345\nCloses rust-lang/rustup.rs#1620\n\nr? @alexcrichton", "tree": {"sha": "0364ab7e266423048a6a58097fff513f3eb169e9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0364ab7e266423048a6a58097fff513f3eb169e9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b3490cf418cab2a3c2ab9b79f05c36cac8d5de7c", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJckVI5CRBK7hj4Ov3rIwAAdHIIAI49WY+8WCUxyUkYEkGtNMvd\nSpIkMZM8cM59oMfQlF5nrGGPdjSZOsxZH3m77hvWqPGeaJkVW8fw/gJ5bcgV4HFS\nbPqwD5rA+Va82vlMuGZ7KCLN5pMMPyERdnSqjW3eJ/8tavCxfjvEw3gHFtiuJMpG\njuB+rRuYiOuGf/kAvyOsRBz4jSxrrga5GGW/x8IBs+xw0/wQjrdIEQzn/U92+YNq\n8/K2cYJJ9TtpCtQoUssjdZkljKOdPTh54vXPRlmsleTcDiqgsFCtZx3ShdFtk+w8\nx2askH0gjrukk4YdtQW/EaiLPliDN6rAYxyfrs14LBgcvF3CvT4QpFiTwlJXDsc=\n=0kdO\n-----END PGP SIGNATURE-----\n", "payload": "tree 0364ab7e266423048a6a58097fff513f3eb169e9\nparent 7a4df3b53da369110984a2b57419c05a53e33b38\nparent c843fe710bb7fb454d68505c8000c0a50bc2a729\nauthor kennytm <kennytm@gmail.com> 1553027641 +0800\ncommitter GitHub <noreply@github.com> 1553027641 +0800\n\nRollup merge of #58986 - cuviper:ppc64-binutils, r=alexcrichton\n\n[CI] Update binutils for powerpc64 and powerpc64le\n\nCargo powerpc64 and powerpc64le are seeing `SIGILL` crashes in openssl,\nwhich was found to be a linking problem, fixed by newer binutils. See\n<https://github.com/rust-lang/rust/issues/57345#issuecomment-462094555>\n\nFor powerpc64 we're using crosstool-ng, which doesn't offer a newer\nbinutils version, but we can just compile it separately. On powerpc64le\nwe're already building binutils. Both are now updated to binutils 2.32.\n\nCloses rust-lang/cargo#6320\nCloses rust-lang/rust#57345\nCloses rust-lang/rustup.rs#1620\n\nr? @alexcrichton\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b3490cf418cab2a3c2ab9b79f05c36cac8d5de7c", "html_url": "https://github.com/rust-lang/rust/commit/b3490cf418cab2a3c2ab9b79f05c36cac8d5de7c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b3490cf418cab2a3c2ab9b79f05c36cac8d5de7c/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7a4df3b53da369110984a2b57419c05a53e33b38", "url": "https://api.github.com/repos/rust-lang/rust/commits/7a4df3b53da369110984a2b57419c05a53e33b38", "html_url": "https://github.com/rust-lang/rust/commit/7a4df3b53da369110984a2b57419c05a53e33b38"}, {"sha": "c843fe710bb7fb454d68505c8000c0a50bc2a729", "url": "https://api.github.com/repos/rust-lang/rust/commits/c843fe710bb7fb454d68505c8000c0a50bc2a729", "html_url": "https://github.com/rust-lang/rust/commit/c843fe710bb7fb454d68505c8000c0a50bc2a729"}], "stats": {"total": 22, "additions": 21, "deletions": 1}, "files": [{"sha": "fc53849a2ada41f6094b3793e96b093d8ffc606a", "filename": "src/ci/docker/dist-powerpc64-linux/build-powerpc64-toolchain.sh", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/b3490cf418cab2a3c2ab9b79f05c36cac8d5de7c/src%2Fci%2Fdocker%2Fdist-powerpc64-linux%2Fbuild-powerpc64-toolchain.sh", "raw_url": "https://github.com/rust-lang/rust/raw/b3490cf418cab2a3c2ab9b79f05c36cac8d5de7c/src%2Fci%2Fdocker%2Fdist-powerpc64-linux%2Fbuild-powerpc64-toolchain.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-powerpc64-linux%2Fbuild-powerpc64-toolchain.sh?ref=b3490cf418cab2a3c2ab9b79f05c36cac8d5de7c", "patch": "@@ -3,9 +3,29 @@ set -ex\n \n source shared.sh\n \n+BINUTILS=2.32\n+TARGET=powerpc64-unknown-linux-gnu\n+PREFIX=/x-tools/$TARGET\n+SYSROOT=$PREFIX/$TARGET/sysroot\n+\n mkdir build\n cd build\n cp ../powerpc64-linux-gnu.config .config\n hide_output ct-ng build\n cd ..\n rm -rf build\n+\n+chmod -R u+w $PREFIX\n+\n+# Next, download and build newer binutils.\n+mkdir binutils-$TARGET\n+pushd binutils-$TARGET\n+curl https://ftp.gnu.org/gnu/binutils/binutils-$BINUTILS.tar.bz2 | tar xjf -\n+mkdir binutils-build\n+cd binutils-build\n+hide_output ../binutils-$BINUTILS/configure --target=$TARGET \\\n+  --prefix=$PREFIX --with-sysroot=$SYSROOT\n+hide_output make -j10\n+hide_output make install\n+popd\n+rm -rf binutils-$TARGET"}, {"sha": "f866a24287f9e6d9aed7b0758bd4ee258f37ee1c", "filename": "src/ci/docker/dist-powerpc64le-linux/build-powerpc64le-toolchain.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b3490cf418cab2a3c2ab9b79f05c36cac8d5de7c/src%2Fci%2Fdocker%2Fdist-powerpc64le-linux%2Fbuild-powerpc64le-toolchain.sh", "raw_url": "https://github.com/rust-lang/rust/raw/b3490cf418cab2a3c2ab9b79f05c36cac8d5de7c/src%2Fci%2Fdocker%2Fdist-powerpc64le-linux%2Fbuild-powerpc64le-toolchain.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-powerpc64le-linux%2Fbuild-powerpc64le-toolchain.sh?ref=b3490cf418cab2a3c2ab9b79f05c36cac8d5de7c", "patch": "@@ -4,7 +4,7 @@ set -ex\n \n source shared.sh\n \n-BINUTILS=2.25.1\n+BINUTILS=2.32\n GCC=5.3.0\n TARGET=powerpc64le-linux-gnu\n SYSROOT=/usr/local/$TARGET/sysroot"}]}