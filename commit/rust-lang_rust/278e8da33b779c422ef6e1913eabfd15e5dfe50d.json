{"sha": "278e8da33b779c422ef6e1913eabfd15e5dfe50d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI3OGU4ZGEzM2I3NzljNDIyZWY2ZTE5MTNlYWJmZDE1ZTVkZmU1MGQ=", "commit": {"author": {"name": "Scott McMurray", "email": "scottmcm@users.noreply.github.com", "date": "2020-10-13T04:43:04Z"}, "committer": {"name": "Caleb Cartwright", "email": "calebcartwright@users.noreply.github.com", "date": "2020-11-03T00:31:51Z"}, "message": "Add some basic tests for `try{}` expressions\n\nThey failed to parse in rustfmt on me in https://github.com/rust-lang/rust/pull/77877, which looks like it's since been fixed, but I figured I'd send in some tests anyway.", "tree": {"sha": "421732bcb56fce0de43dd8957c56d3d67f0734f3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/421732bcb56fce0de43dd8957c56d3d67f0734f3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/278e8da33b779c422ef6e1913eabfd15e5dfe50d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/278e8da33b779c422ef6e1913eabfd15e5dfe50d", "html_url": "https://github.com/rust-lang/rust/commit/278e8da33b779c422ef6e1913eabfd15e5dfe50d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/278e8da33b779c422ef6e1913eabfd15e5dfe50d/comments", "author": {"login": "scottmcm", "id": 18526288, "node_id": "MDQ6VXNlcjE4NTI2Mjg4", "avatar_url": "https://avatars.githubusercontent.com/u/18526288?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scottmcm", "html_url": "https://github.com/scottmcm", "followers_url": "https://api.github.com/users/scottmcm/followers", "following_url": "https://api.github.com/users/scottmcm/following{/other_user}", "gists_url": "https://api.github.com/users/scottmcm/gists{/gist_id}", "starred_url": "https://api.github.com/users/scottmcm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scottmcm/subscriptions", "organizations_url": "https://api.github.com/users/scottmcm/orgs", "repos_url": "https://api.github.com/users/scottmcm/repos", "events_url": "https://api.github.com/users/scottmcm/events{/privacy}", "received_events_url": "https://api.github.com/users/scottmcm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "calebcartwright", "id": 13042488, "node_id": "MDQ6VXNlcjEzMDQyNDg4", "avatar_url": "https://avatars.githubusercontent.com/u/13042488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/calebcartwright", "html_url": "https://github.com/calebcartwright", "followers_url": "https://api.github.com/users/calebcartwright/followers", "following_url": "https://api.github.com/users/calebcartwright/following{/other_user}", "gists_url": "https://api.github.com/users/calebcartwright/gists{/gist_id}", "starred_url": "https://api.github.com/users/calebcartwright/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/calebcartwright/subscriptions", "organizations_url": "https://api.github.com/users/calebcartwright/orgs", "repos_url": "https://api.github.com/users/calebcartwright/repos", "events_url": "https://api.github.com/users/calebcartwright/events{/privacy}", "received_events_url": "https://api.github.com/users/calebcartwright/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "98975e1a64dbb8e00907a61cf642c02e76aa75a3", "url": "https://api.github.com/repos/rust-lang/rust/commits/98975e1a64dbb8e00907a61cf642c02e76aa75a3", "html_url": "https://github.com/rust-lang/rust/commit/98975e1a64dbb8e00907a61cf642c02e76aa75a3"}], "stats": {"total": 59, "additions": 59, "deletions": 0}, "files": [{"sha": "2e8d61f7e66a5a2c35ba6e947f279fae89d9b7dc", "filename": "tests/source/try_block.rs", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/278e8da33b779c422ef6e1913eabfd15e5dfe50d/tests%2Fsource%2Ftry_block.rs", "raw_url": "https://github.com/rust-lang/rust/raw/278e8da33b779c422ef6e1913eabfd15e5dfe50d/tests%2Fsource%2Ftry_block.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Ftry_block.rs?ref=278e8da33b779c422ef6e1913eabfd15e5dfe50d", "patch": "@@ -0,0 +1,30 @@\n+// rustfmt-edition: 2018\n+\n+fn main() -> Result<(), !> {\n+    let _x: Option<_> = try {\n+        4\n+    };\n+\n+    try {}\n+}\n+\n+fn baz() -> Option<i32> {\n+    if (1 == 1) {\n+        return try {\n+            5\n+        };\n+    }\n+\n+    // test\n+    let x: Option<()> = try {\n+        // try blocks are great\n+    };\n+\n+    let y: Option<i32> = try {\n+        6\n+    }; // comment\n+\n+    let x: Option<i32> = try { baz()?; baz()?; baz()?; 7 };\n+\n+    return None;\n+}"}, {"sha": "19a3f3e1487698bcee7151f86ddb293693e618bc", "filename": "tests/target/try_block.rs", "status": "added", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/278e8da33b779c422ef6e1913eabfd15e5dfe50d/tests%2Ftarget%2Ftry_block.rs", "raw_url": "https://github.com/rust-lang/rust/raw/278e8da33b779c422ef6e1913eabfd15e5dfe50d/tests%2Ftarget%2Ftry_block.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Ftry_block.rs?ref=278e8da33b779c422ef6e1913eabfd15e5dfe50d", "patch": "@@ -0,0 +1,29 @@\n+// rustfmt-edition: 2018\n+\n+fn main() -> Result<(), !> {\n+    let _x: Option<_> = try { 4 };\n+\n+    try {}\n+}\n+\n+fn baz() -> Option<i32> {\n+    if (1 == 1) {\n+        return try { 5 };\n+    }\n+\n+    // test\n+    let x: Option<()> = try {\n+        // try blocks are great\n+    };\n+\n+    let y: Option<i32> = try { 6 }; // comment\n+\n+    let x: Option<i32> = try {\n+        baz()?;\n+        baz()?;\n+        baz()?;\n+        7\n+    };\n+\n+    return None;\n+}"}]}