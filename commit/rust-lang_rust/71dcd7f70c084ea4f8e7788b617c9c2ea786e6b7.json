{"sha": "71dcd7f70c084ea4f8e7788b617c9c2ea786e6b7", "node_id": "MDY6Q29tbWl0NzI0NzEyOjcxZGNkN2Y3MGMwODRlYTRmOGU3Nzg4YjYxN2M5YzJlYTc4NmU2Yjc=", "commit": {"author": {"name": "Robin Kruppe", "email": "robin.kruppe@gmail.com", "date": "2015-10-14T17:27:49Z"}, "committer": {"name": "Robin Kruppe", "email": "robin.kruppe@gmail.com", "date": "2015-10-14T17:55:59Z"}, "message": "Reject \"+\" and \"-\" when parsing floats.\n\nFixes #29042", "tree": {"sha": "84b50f4a26af5f7b5a9c6e66591ae8db89938aca", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/84b50f4a26af5f7b5a9c6e66591ae8db89938aca"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/71dcd7f70c084ea4f8e7788b617c9c2ea786e6b7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/71dcd7f70c084ea4f8e7788b617c9c2ea786e6b7", "html_url": "https://github.com/rust-lang/rust/commit/71dcd7f70c084ea4f8e7788b617c9c2ea786e6b7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/71dcd7f70c084ea4f8e7788b617c9c2ea786e6b7/comments", "author": null, "committer": null, "parents": [{"sha": "e3cd87241898cd88e4348e9c6142a03d8909c4e0", "url": "https://api.github.com/repos/rust-lang/rust/commits/e3cd87241898cd88e4348e9c6142a03d8909c4e0", "html_url": "https://github.com/rust-lang/rust/commit/e3cd87241898cd88e4348e9c6142a03d8909c4e0"}], "stats": {"total": 19, "additions": 18, "deletions": 1}, "files": [{"sha": "414bcc874eac1ca320e7dac04aedc9a03516ce43", "filename": "src/libcore/num/dec2flt/parse.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/71dcd7f70c084ea4f8e7788b617c9c2ea786e6b7/src%2Flibcore%2Fnum%2Fdec2flt%2Fparse.rs", "raw_url": "https://github.com/rust-lang/rust/raw/71dcd7f70c084ea4f8e7788b617c9c2ea786e6b7/src%2Flibcore%2Fnum%2Fdec2flt%2Fparse.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fnum%2Fdec2flt%2Fparse.rs?ref=71dcd7f70c084ea4f8e7788b617c9c2ea786e6b7", "patch": "@@ -59,7 +59,12 @@ pub fn parse_decimal(s: &str) -> ParseResult {\n     let s = s.as_bytes();\n     let (integral, s) = eat_digits(s);\n     match s.first() {\n-        None => Valid(Decimal::new(integral, b\"\", 0)),\n+        None => {\n+            if integral.is_empty() {\n+                return Invalid; // No digits at all\n+            }\n+            Valid(Decimal::new(integral, b\"\", 0))\n+        }\n         Some(&b'e') | Some(&b'E') => {\n             if integral.is_empty() {\n                 return Invalid; // No digits before 'e'"}, {"sha": "0c92b2fe2a7dc425de69110c586b98daf62c14d3", "filename": "src/libcoretest/num/dec2flt/mod.rs", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/71dcd7f70c084ea4f8e7788b617c9c2ea786e6b7/src%2Flibcoretest%2Fnum%2Fdec2flt%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/71dcd7f70c084ea4f8e7788b617c9c2ea786e6b7/src%2Flibcoretest%2Fnum%2Fdec2flt%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcoretest%2Fnum%2Fdec2flt%2Fmod.rs?ref=71dcd7f70c084ea4f8e7788b617c9c2ea786e6b7", "patch": "@@ -101,6 +101,18 @@ fn lonely_dot() {\n     assert_eq!(\".\".parse(), Ok(0.0));\n }\n \n+#[test]\n+fn lonely_sign() {\n+    assert!(\"+\".parse::<f32>().is_err());\n+    assert!(\"-\".parse::<f64>().is_err());\n+}\n+\n+#[test]\n+fn whitespace() {\n+    assert!(\" 1.0\".parse::<f32>().is_err());\n+    assert!(\"1.0 \".parse::<f64>().is_err());\n+}\n+\n #[test]\n fn nan() {\n     assert!(\"NaN\".parse::<f32>().unwrap().is_nan());"}]}