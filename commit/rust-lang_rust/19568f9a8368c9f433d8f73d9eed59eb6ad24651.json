{"sha": "19568f9a8368c9f433d8f73d9eed59eb6ad24651", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE5NTY4ZjlhODM2OGM5ZjQzM2Q4ZjczZDllZWQ1OWViNmFkMjQ2NTE=", "commit": {"author": {"name": "Kornel", "email": "kornel@geekhood.net", "date": "2021-04-30T11:34:32Z"}, "committer": {"name": "Kornel", "email": "kornel@geekhood.net", "date": "2021-05-02T10:40:32Z"}, "message": "Use ErrorKind::OutOfMemory in unix, windows, and wasi", "tree": {"sha": "cc4e5be6dd2215111c0ecfa76ca44569992ceb7f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cc4e5be6dd2215111c0ecfa76ca44569992ceb7f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/19568f9a8368c9f433d8f73d9eed59eb6ad24651", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/19568f9a8368c9f433d8f73d9eed59eb6ad24651", "html_url": "https://github.com/rust-lang/rust/commit/19568f9a8368c9f433d8f73d9eed59eb6ad24651", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/19568f9a8368c9f433d8f73d9eed59eb6ad24651/comments", "author": {"login": "kornelski", "id": 72159, "node_id": "MDQ6VXNlcjcyMTU5", "avatar_url": "https://avatars.githubusercontent.com/u/72159?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kornelski", "html_url": "https://github.com/kornelski", "followers_url": "https://api.github.com/users/kornelski/followers", "following_url": "https://api.github.com/users/kornelski/following{/other_user}", "gists_url": "https://api.github.com/users/kornelski/gists{/gist_id}", "starred_url": "https://api.github.com/users/kornelski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kornelski/subscriptions", "organizations_url": "https://api.github.com/users/kornelski/orgs", "repos_url": "https://api.github.com/users/kornelski/repos", "events_url": "https://api.github.com/users/kornelski/events{/privacy}", "received_events_url": "https://api.github.com/users/kornelski/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kornelski", "id": 72159, "node_id": "MDQ6VXNlcjcyMTU5", "avatar_url": "https://avatars.githubusercontent.com/u/72159?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kornelski", "html_url": "https://github.com/kornelski", "followers_url": "https://api.github.com/users/kornelski/followers", "following_url": "https://api.github.com/users/kornelski/following{/other_user}", "gists_url": "https://api.github.com/users/kornelski/gists{/gist_id}", "starred_url": "https://api.github.com/users/kornelski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kornelski/subscriptions", "organizations_url": "https://api.github.com/users/kornelski/orgs", "repos_url": "https://api.github.com/users/kornelski/repos", "events_url": "https://api.github.com/users/kornelski/events{/privacy}", "received_events_url": "https://api.github.com/users/kornelski/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "541c8d898ea96f2475fa752e29d2e2fbe5593643", "url": "https://api.github.com/repos/rust-lang/rust/commits/541c8d898ea96f2475fa752e29d2e2fbe5593643", "html_url": "https://github.com/rust-lang/rust/commit/541c8d898ea96f2475fa752e29d2e2fbe5593643"}], "stats": {"total": 5, "additions": 5, "deletions": 0}, "files": [{"sha": "562d9d92637a6662fb415d4509e491c702b37df0", "filename": "library/std/src/sys/unix/mod.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/19568f9a8368c9f433d8f73d9eed59eb6ad24651/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/19568f9a8368c9f433d8f73d9eed59eb6ad24651/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fmod.rs?ref=19568f9a8368c9f433d8f73d9eed59eb6ad24651", "patch": "@@ -149,6 +149,7 @@ pub fn decode_error_kind(errno: i32) -> ErrorKind {\n         libc::ETIMEDOUT => ErrorKind::TimedOut,\n         libc::EEXIST => ErrorKind::AlreadyExists,\n         libc::ENOSYS => ErrorKind::Unsupported,\n+        libc::ENOMEM => ErrorKind::OutOfMemory,\n \n         // These two constants can have the same value on some systems,\n         // but different values on others, so we can't use a match"}, {"sha": "88b81d455d2416f1c408c1b62e1fdcf4cfb2d165", "filename": "library/std/src/sys/wasi/mod.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/19568f9a8368c9f433d8f73d9eed59eb6ad24651/library%2Fstd%2Fsrc%2Fsys%2Fwasi%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/19568f9a8368c9f433d8f73d9eed59eb6ad24651/library%2Fstd%2Fsrc%2Fsys%2Fwasi%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fwasi%2Fmod.rs?ref=19568f9a8368c9f433d8f73d9eed59eb6ad24651", "patch": "@@ -77,6 +77,7 @@ pub fn decode_error_kind(errno: i32) -> std_io::ErrorKind {\n         wasi::ERRNO_EXIST => AlreadyExists,\n         wasi::ERRNO_AGAIN => WouldBlock,\n         wasi::ERRNO_NOSYS => Unsupported,\n+        wasi::ERRNO_NOMEM => OutOfMemory,\n         _ => Other,\n     }\n }"}, {"sha": "7ea6048e94a883e0fea616733edadb3fb73797d4", "filename": "library/std/src/sys/windows/c.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/19568f9a8368c9f433d8f73d9eed59eb6ad24651/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Fc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/19568f9a8368c9f433d8f73d9eed59eb6ad24651/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Fc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Fc.rs?ref=19568f9a8368c9f433d8f73d9eed59eb6ad24651", "patch": "@@ -168,6 +168,8 @@ pub const ERROR_FILE_NOT_FOUND: DWORD = 2;\n pub const ERROR_PATH_NOT_FOUND: DWORD = 3;\n pub const ERROR_ACCESS_DENIED: DWORD = 5;\n pub const ERROR_INVALID_HANDLE: DWORD = 6;\n+pub const ERROR_NOT_ENOUGH_MEMORY: DWORD = 8;\n+pub const ERROR_OUTOFMEMORY: DWORD = 14;\n pub const ERROR_NO_MORE_FILES: DWORD = 18;\n pub const ERROR_HANDLE_EOF: DWORD = 38;\n pub const ERROR_FILE_EXISTS: DWORD = 80;"}, {"sha": "2208ff025c0f7d77e6a6563a986488207662b0fc", "filename": "library/std/src/sys/windows/mod.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/19568f9a8368c9f433d8f73d9eed59eb6ad24651/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/19568f9a8368c9f433d8f73d9eed59eb6ad24651/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Fmod.rs?ref=19568f9a8368c9f433d8f73d9eed59eb6ad24651", "patch": "@@ -71,6 +71,7 @@ pub fn decode_error_kind(errno: i32) -> ErrorKind {\n         c::ERROR_PATH_NOT_FOUND => return ErrorKind::NotFound,\n         c::ERROR_NO_DATA => return ErrorKind::BrokenPipe,\n         c::ERROR_INVALID_PARAMETER => return ErrorKind::InvalidInput,\n+        c::ERROR_NOT_ENOUGH_MEMORY | c::ERROR_OUTOFMEMORY => return ErrorKind::OutOfMemory,\n         c::ERROR_SEM_TIMEOUT\n         | c::WAIT_TIMEOUT\n         | c::ERROR_DRIVER_CANCEL_TIMEOUT"}]}