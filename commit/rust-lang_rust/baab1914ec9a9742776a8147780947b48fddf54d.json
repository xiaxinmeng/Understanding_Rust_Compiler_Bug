{"sha": "baab1914ec9a9742776a8147780947b48fddf54d", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJhYWIxOTE0ZWM5YTk3NDI3NzZhODE0Nzc4MDk0N2I0OGZkZGY1NGQ=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-07-05T03:33:03Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-07-05T03:33:03Z"}, "message": "Auto merge of #62376 - Mark-Simulacrum:1.38-nightly, r=alexcrichton\n\nSwitch master to 1.38", "tree": {"sha": "f3b289eca1a26917641165eaa2c06340441648da", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f3b289eca1a26917641165eaa2c06340441648da"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/baab1914ec9a9742776a8147780947b48fddf54d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/baab1914ec9a9742776a8147780947b48fddf54d", "html_url": "https://github.com/rust-lang/rust/commit/baab1914ec9a9742776a8147780947b48fddf54d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/baab1914ec9a9742776a8147780947b48fddf54d/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4ca7a349da6869286d94fd8159eb225629ffba5f", "url": "https://api.github.com/repos/rust-lang/rust/commits/4ca7a349da6869286d94fd8159eb225629ffba5f", "html_url": "https://github.com/rust-lang/rust/commit/4ca7a349da6869286d94fd8159eb225629ffba5f"}, {"sha": "007d87f1719e2fcf2ff36aef8b6dc866fa276386", "url": "https://api.github.com/repos/rust-lang/rust/commits/007d87f1719e2fcf2ff36aef8b6dc866fa276386", "html_url": "https://github.com/rust-lang/rust/commit/007d87f1719e2fcf2ff36aef8b6dc866fa276386"}], "stats": {"total": 154, "additions": 47, "deletions": 107}, "files": [{"sha": "8e8d8f5e787a7a0effa2488d705a1e7e1871d7ce", "filename": "src/bootstrap/channel.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Fbootstrap%2Fchannel.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Fbootstrap%2Fchannel.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fchannel.rs?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -13,7 +13,7 @@ use build_helper::output;\n use crate::Build;\n \n // The version number\n-pub const CFG_RELEASE_NUM: &str = \"1.37.0\";\n+pub const CFG_RELEASE_NUM: &str = \"1.38.0\";\n \n pub struct GitInfo {\n     inner: Option<Info>,"}, {"sha": "cef2b5eea344acb506f9e382ae01bb998e67bc5d", "filename": "src/liballoc/alloc.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Fliballoc%2Falloc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Fliballoc%2Falloc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliballoc%2Falloc.rs?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -15,8 +15,7 @@ extern \"Rust\" {\n     // them from the `#[global_allocator]` attribute if there is one, or uses the\n     // default implementations in libstd (`__rdl_alloc` etc in `src/libstd/alloc.rs`)\n     // otherwise.\n-    #[cfg_attr(bootstrap, allocator)]\n-    #[cfg_attr(not(bootstrap), rustc_allocator)]\n+    #[rustc_allocator]\n     #[rustc_allocator_nounwind]\n     fn __rust_alloc(size: usize, align: usize) -> *mut u8;\n     #[rustc_allocator_nounwind]"}, {"sha": "0750665c6b4246dd0d5c28419ef226a2d68c9f1d", "filename": "src/liballoc/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Fliballoc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Fliballoc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliballoc%2Flib.rs?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -79,7 +79,6 @@\n #![feature(coerce_unsized)]\n #![feature(dispatch_from_dyn)]\n #![feature(core_intrinsics)]\n-#![cfg_attr(bootstrap, feature(custom_attribute))]\n #![feature(dropck_eyepatch)]\n #![feature(exact_size_is_empty)]\n #![feature(fmt_internals)]"}, {"sha": "4f87cc506efae2efc10bfbc1a1964efcba764588", "filename": "src/libcore/ffi.rs", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Flibcore%2Fffi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Flibcore%2Fffi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fffi.rs?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -302,7 +302,6 @@ impl<T> sealed_trait::VaArgSafe for *const T {}\n            reason = \"the `c_variadic` feature has not been properly tested on \\\n                      all supported platforms\",\n            issue = \"44930\")]\n-#[cfg(not(bootstrap))]\n impl<'f> VaListImpl<'f> {\n     /// Advance to the next arg.\n     #[inline]\n@@ -324,7 +323,6 @@ impl<'f> VaListImpl<'f> {\n            reason = \"the `c_variadic` feature has not been properly tested on \\\n                      all supported platforms\",\n            issue = \"44930\")]\n-#[cfg(not(bootstrap))]\n impl<'f> Clone for VaListImpl<'f> {\n     #[inline]\n     fn clone(&self) -> Self {\n@@ -340,7 +338,6 @@ impl<'f> Clone for VaListImpl<'f> {\n            reason = \"the `c_variadic` feature has not been properly tested on \\\n                      all supported platforms\",\n            issue = \"44930\")]\n-#[cfg(not(bootstrap))]\n impl<'f> Drop for VaListImpl<'f> {\n     fn drop(&mut self) {\n         // FIXME: this should call `va_end`, but there's no clean way to\n@@ -359,15 +356,12 @@ impl<'f> Drop for VaListImpl<'f> {\n extern \"rust-intrinsic\" {\n     /// Destroy the arglist `ap` after initialization with `va_start` or\n     /// `va_copy`.\n-    #[cfg(not(bootstrap))]\n     fn va_end(ap: &mut VaListImpl<'_>);\n \n     /// Copies the current location of arglist `src` to the arglist `dst`.\n-    #[cfg(not(bootstrap))]\n     fn va_copy<'f>(dest: *mut VaListImpl<'f>, src: &VaListImpl<'f>);\n \n     /// Loads an argument of type `T` from the `va_list` `ap` and increment the\n     /// argument `ap` points to.\n-    #[cfg(not(bootstrap))]\n     fn va_arg<T: sealed_trait::VaArgSafe>(ap: &mut VaListImpl<'_>) -> T;\n }"}, {"sha": "8bd1601a362133899176df264d1a7373df31f706", "filename": "src/libcore/future/future.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Flibcore%2Ffuture%2Ffuture.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Flibcore%2Ffuture%2Ffuture.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Ffuture%2Ffuture.rs?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -25,7 +25,7 @@ use crate::task::{Context, Poll};\n #[doc(spotlight)]\n #[must_use = \"futures do nothing unless you `.await` or poll them\"]\n #[stable(feature = \"futures_api\", since = \"1.36.0\")]\n-#[cfg_attr(not(bootstrap), lang = \"future_trait\")]\n+#[lang = \"future_trait\"]\n pub trait Future {\n     /// The type of value produced on completion.\n     #[stable(feature = \"futures_api\", since = \"1.36.0\")]"}, {"sha": "8e53022c287f794b5b56ceeb3b6727c34466d081", "filename": "src/libcore/intrinsics.rs", "status": "modified", "additions": 0, "deletions": 57, "changes": 57, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Flibcore%2Fintrinsics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Flibcore%2Fintrinsics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fintrinsics.rs?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -1052,16 +1052,12 @@ extern \"rust-intrinsic\" {\n     pub fn fabsf64(x: f64) -> f64;\n \n     /// Returns the minimum of two `f32` values.\n-    #[cfg(not(bootstrap))]\n     pub fn minnumf32(x: f32, y: f32) -> f32;\n     /// Returns the minimum of two `f64` values.\n-    #[cfg(not(bootstrap))]\n     pub fn minnumf64(x: f64, y: f64) -> f64;\n     /// Returns the maximum of two `f32` values.\n-    #[cfg(not(bootstrap))]\n     pub fn maxnumf32(x: f32, y: f32) -> f32;\n     /// Returns the maximum of two `f64` values.\n-    #[cfg(not(bootstrap))]\n     pub fn maxnumf64(x: f64, y: f64) -> f64;\n \n     /// Copies the sign from `y` to `x` for `f32` values.\n@@ -1255,17 +1251,14 @@ extern \"rust-intrinsic\" {\n \n     /// Returns the result of an unchecked addition, resulting in\n     /// undefined behavior when `x + y > T::max_value()` or `x + y < T::min_value()`.\n-    #[cfg(not(bootstrap))]\n     pub fn unchecked_add<T>(x: T, y: T) -> T;\n \n     /// Returns the result of an unchecked substraction, resulting in\n     /// undefined behavior when `x - y > T::max_value()` or `x - y < T::min_value()`.\n-    #[cfg(not(bootstrap))]\n     pub fn unchecked_sub<T>(x: T, y: T) -> T;\n \n     /// Returns the result of an unchecked multiplication, resulting in\n     /// undefined behavior when `x * y > T::max_value()` or `x * y < T::min_value()`.\n-    #[cfg(not(bootstrap))]\n     pub fn unchecked_mul<T>(x: T, y: T) -> T;\n \n     /// Performs rotate left.\n@@ -1563,53 +1556,3 @@ pub unsafe fn write_bytes<T>(dst: *mut T, val: u8, count: usize) {\n     }\n     write_bytes(dst, val, count)\n }\n-\n-// Simple bootstrap implementations of minnum/maxnum for stage0 compilation.\n-\n-/// Returns the minimum of two `f32` values.\n-#[cfg(bootstrap)]\n-pub fn minnumf32(x: f32, y: f32) -> f32 {\n-    // IEEE754 says: minNum(x, y) is the canonicalized number x if x < y, y if y < x, the\n-    // canonicalized number if one operand is a number and the other a quiet NaN. Otherwise it\n-    // is either x or y, canonicalized (this means results might differ among implementations).\n-    // When either x or y is a signaling NaN, then the result is according to 6.2.\n-    //\n-    // Since we do not support sNaN in Rust yet, we do not need to handle them.\n-    // FIXME(nagisa): due to https://bugs.llvm.org/show_bug.cgi?id=33303 we canonicalize by\n-    // multiplying by 1.0. Should switch to the `canonicalize` when it works.\n-    (if x < y || y != y { x } else { y }) * 1.0\n-}\n-\n-/// Returns the minimum of two `f64` values.\n-#[cfg(bootstrap)]\n-pub fn minnumf64(x: f64, y: f64) -> f64 {\n-    // Identical to the `f32` case.\n-    (if x < y || y != y { x } else { y }) * 1.0\n-}\n-\n-/// Returns the maximum of two `f32` values.\n-#[cfg(bootstrap)]\n-pub fn maxnumf32(x: f32, y: f32) -> f32 {\n-    // IEEE754 says: maxNum(x, y) is the canonicalized number y if x < y, x if y < x, the\n-    // canonicalized number if one operand is a number and the other a quiet NaN. Otherwise it\n-    // is either x or y, canonicalized (this means results might differ among implementations).\n-    // When either x or y is a signaling NaN, then the result is according to 6.2.\n-    //\n-    // Since we do not support sNaN in Rust yet, we do not need to handle them.\n-    // FIXME(nagisa): due to https://bugs.llvm.org/show_bug.cgi?id=33303 we canonicalize by\n-    // multiplying by 1.0. Should switch to the `canonicalize` when it works.\n-    (if x < y || x != x { y } else { x }) * 1.0\n-}\n-\n-/// Returns the maximum of two `f64` values.\n-#[cfg(bootstrap)]\n-pub fn maxnumf64(x: f64, y: f64) -> f64 {\n-    // Identical to the `f32` case.\n-    (if x < y || x != x { y } else { x }) * 1.0\n-}\n-\n-/// For bootstrapping, implement unchecked_sub as just wrapping_sub.\n-#[cfg(bootstrap)]\n-pub unsafe fn unchecked_sub<T>(x: T, y: T) -> T {\n-    sub_with_overflow(x, y).0\n-}"}, {"sha": "398b929b206f0fb23e1bcab7f08b2c1657e3b2e4", "filename": "src/libcore/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Flibcore%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Flibcore%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Flib.rs?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -99,7 +99,7 @@\n #![feature(staged_api)]\n #![feature(std_internals)]\n #![feature(stmt_expr_attributes)]\n-#![cfg_attr(not(bootstrap), feature(transparent_unions))]\n+#![feature(transparent_unions)]\n #![feature(unboxed_closures)]\n #![feature(unsized_locals)]\n #![feature(untagged_unions)]"}, {"sha": "407691662d14ee8d80ea02496fd83ee3f639c23e", "filename": "src/libcore/mem/maybe_uninit.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Flibcore%2Fmem%2Fmaybe_uninit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Flibcore%2Fmem%2Fmaybe_uninit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fmem%2Fmaybe_uninit.rs?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -207,7 +207,7 @@ use crate::mem::ManuallyDrop;\n #[allow(missing_debug_implementations)]\n #[stable(feature = \"maybe_uninit\", since = \"1.36.0\")]\n #[derive(Copy)]\n-#[cfg_attr(not(bootstrap), repr(transparent))]\n+#[repr(transparent)]\n pub union MaybeUninit<T> {\n     uninit: (),\n     value: ManuallyDrop<T>,"}, {"sha": "72552c5a0b0f06c8e709f6d55b1badd402f659ad", "filename": "src/libcore/num/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Flibcore%2Fnum%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Flibcore%2Fnum%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fnum%2Fmod.rs?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -50,7 +50,7 @@ assert_eq!(size_of::<Option<core::num::\", stringify!($Ty), \">>(), size_of::<\", s\n                 #[derive(Copy, Clone, Eq, PartialEq, Ord, PartialOrd, Hash)]\n                 #[repr(transparent)]\n                 #[rustc_layout_scalar_valid_range_start(1)]\n-                #[cfg_attr(not(bootstrap), rustc_nonnull_optimization_guaranteed)]\n+                #[rustc_nonnull_optimization_guaranteed]\n                 pub struct $Ty($Int);\n             }\n "}, {"sha": "ad3d1ce396ab755c70dd1adc709eec93943f9565", "filename": "src/libcore/ptr/non_null.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Flibcore%2Fptr%2Fnon_null.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Flibcore%2Fptr%2Fnon_null.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fptr%2Fnon_null.rs?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -38,7 +38,7 @@ use crate::cmp::Ordering;\n #[stable(feature = \"nonnull\", since = \"1.25.0\")]\n #[repr(transparent)]\n #[rustc_layout_scalar_valid_range_start(1)]\n-#[cfg_attr(not(bootstrap), rustc_nonnull_optimization_guaranteed)]\n+#[rustc_nonnull_optimization_guaranteed]\n pub struct NonNull<T: ?Sized> {\n     pointer: *const T,\n }"}, {"sha": "9fdc93c3ff0f3e01ce3586347f1c30d7a6494bc4", "filename": "src/librustc_codegen_llvm/common.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Flibrustc_codegen_llvm%2Fcommon.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Flibrustc_codegen_llvm%2Fcommon.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_llvm%2Fcommon.rs?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -170,6 +170,7 @@ impl CodegenCx<'ll, 'tcx> {\n     pub fn const_get_real(&self, v: &'ll Value) -> Option<(f64, bool)> {\n         unsafe {\n             if self.is_const_real(v) {\n+                #[allow(deprecated)]\n                 let mut loses_info: llvm::Bool = ::std::mem::uninitialized();\n                 let r = llvm::LLVMConstRealGetDouble(v, &mut loses_info);\n                 let loses_info = if loses_info == 1 { true } else { false };"}, {"sha": "3f75523a81584a7bc62330d01ab267200f68ec75", "filename": "src/librustc_data_structures/macros.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Flibrustc_data_structures%2Fmacros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Flibrustc_data_structures%2Fmacros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_data_structures%2Fmacros.rs?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -1,7 +1,6 @@\n /// A simple static assertion macro.\n #[macro_export]\n-#[cfg_attr(bootstrap, allow_internal_unstable(type_ascription, underscore_const_names))]\n-#[cfg_attr(not(bootstrap), allow_internal_unstable(type_ascription))]\n+#[allow_internal_unstable(type_ascription)]\n macro_rules! static_assert {\n     ($test:expr) => {\n         // Use the bool to access an array such that if the bool is false, the access\n@@ -13,7 +12,6 @@ macro_rules! static_assert {\n \n /// Type size assertion. The first argument is a type and the second argument is its expected size.\n #[macro_export]\n-#[cfg_attr(bootstrap, allow_internal_unstable(underscore_const_names))]\n macro_rules! static_assert_size {\n     ($ty:ty, $size:expr) => {\n         const _: [(); $size] = [(); ::std::mem::size_of::<$ty>()];"}, {"sha": "ce5a6b854ea6c4c9d3cb38685d449b381a080cf2", "filename": "src/librustc_resolve/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Flibrustc_resolve%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Flibrustc_resolve%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Flib.rs?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -7,7 +7,6 @@\n #![feature(mem_take)]\n #![feature(nll)]\n #![feature(rustc_diagnostic_macros)]\n-#![cfg_attr(bootstrap, feature(type_alias_enum_variants))]\n \n #![recursion_limit=\"256\"]\n "}, {"sha": "2bfd3e4ad20e3d29170370a849b4705ccfa3f0f5", "filename": "src/libstd/io/util.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Flibstd%2Fio%2Futil.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Flibstd%2Fio%2Futil.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Futil.rs?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -44,6 +44,7 @@ pub fn copy<R: ?Sized, W: ?Sized>(reader: &mut R, writer: &mut W) -> io::Result<\n     where R: Read, W: Write\n {\n     let mut buf = unsafe {\n+        #[allow(deprecated)]\n         let mut buf: [u8; super::DEFAULT_BUF_SIZE] = mem::uninitialized();\n         reader.initializer().initialize(&mut buf);\n         buf"}, {"sha": "3fef7552259c86eb52ac0c38b7d0d370f049f591", "filename": "src/libstd/sys/cloudabi/mod.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Flibstd%2Fsys%2Fcloudabi%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Flibstd%2Fsys%2Fcloudabi%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fcloudabi%2Fmod.rs?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -1,3 +1,5 @@\n+#![allow(deprecated)] // mem::uninitialized\n+\n use crate::io::ErrorKind;\n use crate::mem;\n "}, {"sha": "3bf9ecf40808be426f49b9f531e95566609780e0", "filename": "src/libstd/sys/sgx/mod.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Flibstd%2Fsys%2Fsgx%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Flibstd%2Fsys%2Fsgx%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fsgx%2Fmod.rs?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -3,6 +3,8 @@\n //! This module contains the facade (aka platform-specific) implementations of\n //! OS level functionality for Fortanix SGX.\n \n+#![allow(deprecated)]\n+\n use crate::io::ErrorKind;\n use crate::os::raw::c_char;\n use crate::sync::atomic::{AtomicBool, Ordering};"}, {"sha": "b32049b1da8c365992d1b284701b4553b654b331", "filename": "src/libsyntax/tokenstream.rs", "status": "modified", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Flibsyntax%2Ftokenstream.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Flibsyntax%2Ftokenstream.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Ftokenstream.rs?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -59,17 +59,6 @@ where\n     TokenStream: Send + Sync,\n {}\n \n-// These are safe since we ensure that they hold for all fields in the `_dummy` function.\n-//\n-// These impls are only here because the compiler takes forever to compute the Send and Sync\n-// bounds without them.\n-// FIXME: Remove these impls when the compiler can compute the bounds quickly again.\n-// See https://github.com/rust-lang/rust/issues/60846\n-#[cfg(all(bootstrap, parallel_compiler))]\n-unsafe impl Send for TokenTree {}\n-#[cfg(all(bootstrap, parallel_compiler))]\n-unsafe impl Sync for TokenTree {}\n-\n impl TokenTree {\n     /// Use this token tree as a matcher to parse given tts.\n     pub fn parse(cx: &base::ExtCtxt<'_>, mtch: &[quoted::TokenTree], tts: TokenStream)"}, {"sha": "14ea68d3788785246dd8458622893daf57a387cd", "filename": "src/libterm/win.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Flibterm%2Fwin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Flibterm%2Fwin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibterm%2Fwin.rs?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -108,6 +108,7 @@ impl<T: Write + Send + 'static> WinConsole<T> {\n         let fg;\n         let bg;\n         unsafe {\n+            #[allow(deprecated)]\n             let mut buffer_info = ::std::mem::uninitialized();\n             if GetConsoleScreenBufferInfo(GetStdHandle(-11i32 as DWORD), &mut buffer_info) != 0 {\n                 fg = bits_to_color(buffer_info.wAttributes);"}, {"sha": "20280aa3c41300b96d90efe626d21e41f5c18bc4", "filename": "src/libunwind/build.rs", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Flibunwind%2Fbuild.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Flibunwind%2Fbuild.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibunwind%2Fbuild.rs?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -4,13 +4,11 @@ fn main() {\n     println!(\"cargo:rerun-if-changed=build.rs\");\n     let target = env::var(\"TARGET\").expect(\"TARGET was not set\");\n \n-    // FIXME: the not(bootstrap) part is needed because of the issue addressed by #62286,\n-    // and could be removed once that change is in beta.\n-    if cfg!(all(not(bootstrap), feature = \"llvm-libunwind\")) &&\n+    if cfg!(feature = \"llvm-libunwind\") &&\n         (target.contains(\"linux\") ||\n          target.contains(\"fuchsia\")) {\n         // Build the unwinding from libunwind C/C++ source code.\n-        #[cfg(all(not(bootstrap), feature = \"llvm-libunwind\"))]\n+        #[cfg(feature = \"llvm-libunwind\")]\n         llvm_libunwind::compile();\n     } else if target.contains(\"linux\") {\n         if target.contains(\"musl\") {\n@@ -44,7 +42,7 @@ fn main() {\n     }\n }\n \n-#[cfg(all(not(bootstrap), feature = \"llvm-libunwind\"))]\n+#[cfg(feature = \"llvm-libunwind\")]\n mod llvm_libunwind {\n     use std::env;\n     use std::path::Path;"}, {"sha": "41adc0a415370a42c5cf8d075ea4dd8032f2023e", "filename": "src/libunwind/libunwind.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Flibunwind%2Flibunwind.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Flibunwind%2Flibunwind.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibunwind%2Flibunwind.rs?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -67,7 +67,7 @@ pub enum _Unwind_Context {}\n \n pub type _Unwind_Exception_Cleanup_Fn = extern \"C\" fn(unwind_code: _Unwind_Reason_Code,\n                                                       exception: *mut _Unwind_Exception);\n-#[cfg_attr(all(not(bootstrap), feature = \"llvm-libunwind\"),\n+#[cfg_attr(feature = \"llvm-libunwind\",\n            link(name = \"unwind\", kind = \"static\"))]\n extern \"C\" {\n     #[unwind(allowed)]\n@@ -93,7 +93,7 @@ if #[cfg(all(any(target_os = \"ios\", target_os = \"netbsd\", not(target_arch = \"arm\n     }\n     pub use _Unwind_Action::*;\n \n-    #[cfg_attr(all(not(bootstrap), feature = \"llvm-libunwind\"),\n+    #[cfg_attr(feature = \"llvm-libunwind\",\n                link(name = \"unwind\", kind = \"static\"))]\n     extern \"C\" {\n         pub fn _Unwind_GetGR(ctx: *mut _Unwind_Context, reg_index: c_int) -> _Unwind_Word;\n@@ -148,7 +148,7 @@ if #[cfg(all(any(target_os = \"ios\", target_os = \"netbsd\", not(target_arch = \"arm\n     pub const UNWIND_POINTER_REG: c_int = 12;\n     pub const UNWIND_IP_REG: c_int = 15;\n \n-    #[cfg_attr(all(not(bootstrap), feature = \"llvm-libunwind\"),\n+    #[cfg_attr(feature = \"llvm-libunwind\",\n                link(name = \"unwind\", kind = \"static\"))]\n     extern \"C\" {\n         fn _Unwind_VRS_Get(ctx: *mut _Unwind_Context,\n@@ -212,7 +212,7 @@ if #[cfg(all(any(target_os = \"ios\", target_os = \"netbsd\", not(target_arch = \"arm\n cfg_if::cfg_if! {\n if #[cfg(not(all(target_os = \"ios\", target_arch = \"arm\")))] {\n     // Not 32-bit iOS\n-    #[cfg_attr(all(not(bootstrap), feature = \"llvm-libunwind\"),\n+    #[cfg_attr(feature = \"llvm-libunwind\",\n                link(name = \"unwind\", kind = \"static\"))]\n     extern \"C\" {\n         #[unwind(allowed)]\n@@ -223,7 +223,7 @@ if #[cfg(not(all(target_os = \"ios\", target_arch = \"arm\")))] {\n     }\n } else {\n     // 32-bit iOS uses SjLj and does not provide _Unwind_Backtrace()\n-    #[cfg_attr(all(not(bootstrap), feature = \"llvm-libunwind\"),\n+    #[cfg_attr(feature = \"llvm-libunwind\",\n                link(name = \"unwind\", kind = \"static\"))]\n     extern \"C\" {\n         #[unwind(allowed)]"}, {"sha": "9b70a40458287c08127f2ce5433b1b7b666c4db4", "filename": "src/stage0.txt", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Fstage0.txt", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Fstage0.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fstage0.txt?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -12,7 +12,7 @@\n # source tarball for a stable release you'll likely see `1.x.0` for rustc and\n # `0.x.0` for Cargo where they were released on `date`.\n \n-date: 2019-05-23\n+date: 2019-07-04\n rustc: beta\n cargo: beta\n "}, {"sha": "cb857e3bc38d352561278f03ec51216deba01f94", "filename": "src/test/run-make-fulldeps/sanitizer-memory/uninit.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Ftest%2Frun-make-fulldeps%2Fsanitizer-memory%2Funinit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Ftest%2Frun-make-fulldeps%2Fsanitizer-memory%2Funinit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Fsanitizer-memory%2Funinit.rs?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -1,6 +1,7 @@\n use std::mem;\n \n fn main() {\n+    #[allow(deprecated)]\n     let xs: [u8; 4] = unsafe { mem::uninitialized() };\n     let y = xs[0] + xs[1];\n }"}, {"sha": "38c34d2dc2e6f8fbc7802b706aa4267a7418d977", "filename": "src/test/run-pass/for-loop-while/for-loop-has-unit-body.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Ftest%2Frun-pass%2Ffor-loop-while%2Ffor-loop-has-unit-body.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Ftest%2Frun-pass%2Ffor-loop-while%2Ffor-loop-has-unit-body.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Ffor-loop-while%2Ffor-loop-has-unit-body.rs?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -2,6 +2,7 @@\n fn main() {\n     // Check that the tail statement in the body unifies with something\n     for _ in 0..3 {\n+        #[allow(deprecated)]\n         unsafe { std::mem::uninitialized() }\n     }\n "}, {"sha": "d4ce6496cae7733437612843ef850434a1b6d3c2", "filename": "src/test/run-pass/issues/issue-58212.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Ftest%2Frun-pass%2Fissues%2Fissue-58212.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Ftest%2Frun-pass%2Fissues%2Fissue-58212.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissues%2Fissue-58212.rs?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -4,6 +4,7 @@ trait FromUnchecked {\n \n impl FromUnchecked for [u8; 1] {\n     unsafe fn from_unchecked() {\n+        #[allow(deprecated)]\n         let mut array: Self = std::mem::uninitialized();\n         let _ptr = &mut array as *mut [u8] as *mut u8;\n     }"}, {"sha": "5026ad1ccd4ceae68cd31fdeab74f2c81707d7a5", "filename": "src/test/run-pass/panic-uninitialized-zeroed.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Ftest%2Frun-pass%2Fpanic-uninitialized-zeroed.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Ftest%2Frun-pass%2Fpanic-uninitialized-zeroed.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fpanic-uninitialized-zeroed.rs?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -3,6 +3,7 @@\n // in a runtime panic.\n \n #![feature(never_type)]\n+#![allow(deprecated)]\n \n use std::{mem, panic};\n "}, {"sha": "773d0ace90ed9dbc25792c4097c68e45768645d1", "filename": "src/test/run-pass/stack-probes.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Ftest%2Frun-pass%2Fstack-probes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Ftest%2Frun-pass%2Fstack-probes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fstack-probes.rs?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -49,6 +49,7 @@ fn main() {\n #[allow(unconditional_recursion)]\n fn recurse(array: &[u64]) {\n     unsafe { black_box(array.as_ptr() as u64); }\n+    #[allow(deprecated)]\n     let local: [_; 1024] = unsafe { mem::uninitialized() };\n     recurse(&local);\n }"}, {"sha": "78d8e5e3a5dbf39e9abf8059883df24647bdf652", "filename": "src/test/run-pass/structs-enums/enum-non-c-like-repr-c-and-int.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Ftest%2Frun-pass%2Fstructs-enums%2Fenum-non-c-like-repr-c-and-int.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Ftest%2Frun-pass%2Fstructs-enums%2Fenum-non-c-like-repr-c-and-int.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fstructs-enums%2Fenum-non-c-like-repr-c-and-int.rs?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -69,6 +69,7 @@ fn main() {\n     unsafe {\n         // This should be safe, because we don't match on it unless it's fully formed,\n         // and it doesn't have a destructor.\n+        #[allow(deprecated)]\n         let mut dest: MyEnum = mem::uninitialized();\n         while buf.len() > 0 {\n             match parse_my_enum(&mut dest, &mut buf) {"}, {"sha": "1209533efda82097f7564bfa2e4f9294398e83d5", "filename": "src/test/run-pass/structs-enums/enum-non-c-like-repr-c.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Ftest%2Frun-pass%2Fstructs-enums%2Fenum-non-c-like-repr-c.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Ftest%2Frun-pass%2Fstructs-enums%2Fenum-non-c-like-repr-c.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fstructs-enums%2Fenum-non-c-like-repr-c.rs?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -69,6 +69,7 @@ fn main() {\n     unsafe {\n         // This should be safe, because we don't match on it unless it's fully formed,\n         // and it doesn't have a destructor.\n+        #[allow(deprecated)]\n         let mut dest: MyEnum = mem::uninitialized();\n         while buf.len() > 0 {\n             match parse_my_enum(&mut dest, &mut buf) {"}, {"sha": "5dd9c1863d62da2b00b5343e8c4b35d956c59803", "filename": "src/test/run-pass/structs-enums/enum-non-c-like-repr-int.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Ftest%2Frun-pass%2Fstructs-enums%2Fenum-non-c-like-repr-int.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Ftest%2Frun-pass%2Fstructs-enums%2Fenum-non-c-like-repr-int.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fstructs-enums%2Fenum-non-c-like-repr-int.rs?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -65,6 +65,7 @@ fn main() {\n     unsafe {\n         // This should be safe, because we don't match on it unless it's fully formed,\n         // and it doesn't have a destructor.\n+        #[allow(deprecated)]\n         let mut dest: MyEnum = mem::uninitialized();\n         while buf.len() > 0 {\n             match parse_my_enum(&mut dest, &mut buf) {"}, {"sha": "4bc247a3dcab5ba6a13b706e32c710d95e303bf5", "filename": "src/test/run-pass/uninit-empty-types.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Ftest%2Frun-pass%2Funinit-empty-types.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Ftest%2Frun-pass%2Funinit-empty-types.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Funinit-empty-types.rs?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -7,6 +7,7 @@ use std::mem;\n #[derive(Clone)]\n struct Foo;\n \n+#[allow(deprecated)]\n pub fn main() {\n     unsafe {\n         let _x: Foo = mem::uninitialized();"}, {"sha": "653c004c04b231c2606ce5f879dca7d4fb0b8d4c", "filename": "src/test/rustdoc/issue-52873.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Ftest%2Frustdoc%2Fissue-52873.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Ftest%2Frustdoc%2Fissue-52873.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fissue-52873.rs?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -105,6 +105,7 @@ impl<U: Unsigned, B: Bit> Add<B0> for UInt<U, B> {\n impl<U: Unsigned> Add<U> for UTerm {\n     type Output = U;\n     fn add(self, _: U) -> Self::Output {\n+        #[allow(deprecated)]\n         unsafe { ::std::mem::uninitialized() }\n     }\n }"}, {"sha": "68e5a52e0ac5cba18c9873560dbf5a86768df1b0", "filename": "src/test/ui/const-generics/issue-61422.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Ftest%2Fui%2Fconst-generics%2Fissue-61422.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Ftest%2Fui%2Fconst-generics%2Fissue-61422.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissue-61422.rs?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -7,6 +7,7 @@ use std::mem;\n \n fn foo<const SIZE: usize>() {\n     let arr: [u8; SIZE] = unsafe {\n+        #[allow(deprecated)]\n         let mut array: [u8; SIZE] = mem::uninitialized();\n         array\n     };"}, {"sha": "c8540729352b270111be4af7913aa6e94d55972b", "filename": "src/test/ui/issues/issue-48131.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Ftest%2Fui%2Fissues%2Fissue-48131.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Ftest%2Fui%2Fissues%2Fissue-48131.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-48131.rs?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -1,6 +1,7 @@\n // This note is annotated because the purpose of the test\n // is to ensure that certain other notes are not generated.\n #![deny(unused_unsafe)] //~ NOTE\n+#![allow(deprecated)]\n \n // (test that no note is generated on this unsafe fn)\n pub unsafe fn a() {"}, {"sha": "6df065b9807f2dff91c3f1c6cc3705c471967851", "filename": "src/test/ui/issues/issue-48131.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Ftest%2Fui%2Fissues%2Fissue-48131.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Ftest%2Fui%2Fissues%2Fissue-48131.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-48131.stderr?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -1,5 +1,5 @@\n error: unnecessary `unsafe` block\n-  --> $DIR/issue-48131.rs:8:9\n+  --> $DIR/issue-48131.rs:9:9\n    |\n LL |         unsafe { /* unnecessary */ }\n    |         ^^^^^^ unnecessary `unsafe` block\n@@ -11,7 +11,7 @@ LL | #![deny(unused_unsafe)]\n    |         ^^^^^^^^^^^^^\n \n error: unnecessary `unsafe` block\n-  --> $DIR/issue-48131.rs:19:13\n+  --> $DIR/issue-48131.rs:20:13\n    |\n LL |             unsafe { /* unnecessary */ }\n    |             ^^^^^^ unnecessary `unsafe` block"}, {"sha": "a5360fa13c4ea22f730ed317413532b976db2976", "filename": "src/test/ui/uninhabited/uninhabited-matches-feature-gated.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Ftest%2Fui%2Funinhabited%2Funinhabited-matches-feature-gated.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Ftest%2Fui%2Funinhabited%2Funinhabited-matches-feature-gated.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funinhabited%2Funinhabited-matches-feature-gated.rs?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -1,3 +1,5 @@\n+#![allow(deprecated)]\n+\n enum Void {}\n \n fn main() {"}, {"sha": "25519ab2d6a7d1cfc9130988a68bd7df10b6be6e", "filename": "src/test/ui/uninhabited/uninhabited-matches-feature-gated.stderr", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/baab1914ec9a9742776a8147780947b48fddf54d/src%2Ftest%2Fui%2Funinhabited%2Funinhabited-matches-feature-gated.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/baab1914ec9a9742776a8147780947b48fddf54d/src%2Ftest%2Fui%2Funinhabited%2Funinhabited-matches-feature-gated.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funinhabited%2Funinhabited-matches-feature-gated.stderr?ref=baab1914ec9a9742776a8147780947b48fddf54d", "patch": "@@ -1,53 +1,53 @@\n error[E0004]: non-exhaustive patterns: `Err(_)` not covered\n-  --> $DIR/uninhabited-matches-feature-gated.rs:5:19\n+  --> $DIR/uninhabited-matches-feature-gated.rs:7:19\n    |\n LL |     let _ = match x {\n    |                   ^ pattern `Err(_)` not covered\n    |\n    = help: ensure that all possible cases are being handled, possibly by adding wildcards or more match arms\n \n error[E0004]: non-exhaustive patterns: type `&Void` is non-empty\n-  --> $DIR/uninhabited-matches-feature-gated.rs:10:19\n+  --> $DIR/uninhabited-matches-feature-gated.rs:12:19\n    |\n LL |     let _ = match x {};\n    |                   ^\n    |\n    = help: ensure that all possible cases are being handled, possibly by adding wildcards or more match arms\n \n error[E0004]: non-exhaustive patterns: type `(Void,)` is non-empty\n-  --> $DIR/uninhabited-matches-feature-gated.rs:13:19\n+  --> $DIR/uninhabited-matches-feature-gated.rs:15:19\n    |\n LL |     let _ = match x {};\n    |                   ^\n    |\n    = help: ensure that all possible cases are being handled, possibly by adding wildcards or more match arms\n \n error[E0004]: non-exhaustive patterns: type `[Void; 1]` is non-empty\n-  --> $DIR/uninhabited-matches-feature-gated.rs:16:19\n+  --> $DIR/uninhabited-matches-feature-gated.rs:18:19\n    |\n LL |     let _ = match x {};\n    |                   ^\n    |\n    = help: ensure that all possible cases are being handled, possibly by adding wildcards or more match arms\n \n error[E0004]: non-exhaustive patterns: `&[_]` not covered\n-  --> $DIR/uninhabited-matches-feature-gated.rs:19:19\n+  --> $DIR/uninhabited-matches-feature-gated.rs:21:19\n    |\n LL |     let _ = match x {\n    |                   ^ pattern `&[_]` not covered\n    |\n    = help: ensure that all possible cases are being handled, possibly by adding wildcards or more match arms\n \n error[E0004]: non-exhaustive patterns: `Err(_)` not covered\n-  --> $DIR/uninhabited-matches-feature-gated.rs:27:19\n+  --> $DIR/uninhabited-matches-feature-gated.rs:29:19\n    |\n LL |     let _ = match x {\n    |                   ^ pattern `Err(_)` not covered\n    |\n    = help: ensure that all possible cases are being handled, possibly by adding wildcards or more match arms\n \n error[E0005]: refutable pattern in local binding: `Err(_)` not covered\n-  --> $DIR/uninhabited-matches-feature-gated.rs:32:9\n+  --> $DIR/uninhabited-matches-feature-gated.rs:34:9\n    |\n LL |     let Ok(x) = x;\n    |         ^^^^^ pattern `Err(_)` not covered"}]}