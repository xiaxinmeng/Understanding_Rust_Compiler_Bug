{"sha": "b0cd1e192c2e217c08f2759d86a3807acb8e2178", "node_id": "C_kwDOAAsO6NoAKGIwY2QxZTE5MmMyZTIxN2MwOGYyNzU5ZDg2YTM4MDdhY2I4ZTIxNzg", "commit": {"author": {"name": "Michael Goulet", "email": "michael@errs.io", "date": "2022-08-13T05:22:47Z"}, "committer": {"name": "Michael Goulet", "email": "michael@errs.io", "date": "2022-08-13T18:24:36Z"}, "message": "Label argument coercion errors", "tree": {"sha": "6797146a5570856ab0dbc4457b40890bd2f4d246", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6797146a5570856ab0dbc4457b40890bd2f4d246"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b0cd1e192c2e217c08f2759d86a3807acb8e2178", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b0cd1e192c2e217c08f2759d86a3807acb8e2178", "html_url": "https://github.com/rust-lang/rust/commit/b0cd1e192c2e217c08f2759d86a3807acb8e2178", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b0cd1e192c2e217c08f2759d86a3807acb8e2178/comments", "author": {"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "75b7e52e92c3b00fc891b47f5b2efdff0a2be55a", "url": "https://api.github.com/repos/rust-lang/rust/commits/75b7e52e92c3b00fc891b47f5b2efdff0a2be55a", "html_url": "https://github.com/rust-lang/rust/commit/75b7e52e92c3b00fc891b47f5b2efdff0a2be55a"}], "stats": {"total": 13, "additions": 9, "deletions": 4}, "files": [{"sha": "11f11d8c61226af4e6c911c36230be9b397703ff", "filename": "compiler/rustc_typeck/src/check/fn_ctxt/checks.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/b0cd1e192c2e217c08f2759d86a3807acb8e2178/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Ffn_ctxt%2Fchecks.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b0cd1e192c2e217c08f2759d86a3807acb8e2178/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Ffn_ctxt%2Fchecks.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Ffn_ctxt%2Fchecks.rs?ref=b0cd1e192c2e217c08f2759d86a3807acb8e2178", "patch": "@@ -545,7 +545,9 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n             let coerced_ty = expectation.only_has_type(self).unwrap_or(formal_input_ty);\n             let can_coerce = self.can_coerce(arg_ty, coerced_ty);\n             if !can_coerce {\n-                return Compatibility::Incompatible(None);\n+                return Compatibility::Incompatible(Some(ty::error::TypeError::Sorts(\n+                    ty::error::ExpectedFound::new(true, coerced_ty, arg_ty),\n+                )));\n             }\n \n             // Using probe here, since we don't want this subtyping to affect inference."}, {"sha": "804cb1aa322190344eecfd1d60c619cfce52f32a", "filename": "src/test/ui/argument-suggestions/issue-96638.stderr", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/b0cd1e192c2e217c08f2759d86a3807acb8e2178/src%2Ftest%2Fui%2Fargument-suggestions%2Fissue-96638.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b0cd1e192c2e217c08f2759d86a3807acb8e2178/src%2Ftest%2Fui%2Fargument-suggestions%2Fissue-96638.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fargument-suggestions%2Fissue-96638.stderr?ref=b0cd1e192c2e217c08f2759d86a3807acb8e2178", "patch": "@@ -2,7 +2,9 @@ error[E0061]: this function takes 3 arguments but 2 arguments were supplied\n   --> $DIR/issue-96638.rs:8:5\n    |\n LL |     f(&x, \"\");\n-   |     ^ -- an argument of type `usize` is missing\n+   |     ^ --  -- expected `usize`, found `&str`\n+   |       |\n+   |       an argument of type `usize` is missing\n    |\n note: function defined here\n   --> $DIR/issue-96638.rs:1:4"}, {"sha": "b5dedf0f4fa05494a8b9dea6823f83639cda07ef", "filename": "src/test/ui/argument-suggestions/issue-97484.stderr", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/b0cd1e192c2e217c08f2759d86a3807acb8e2178/src%2Ftest%2Fui%2Fargument-suggestions%2Fissue-97484.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b0cd1e192c2e217c08f2759d86a3807acb8e2178/src%2Ftest%2Fui%2Fargument-suggestions%2Fissue-97484.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fargument-suggestions%2Fissue-97484.stderr?ref=b0cd1e192c2e217c08f2759d86a3807acb8e2178", "patch": "@@ -2,8 +2,9 @@ error[E0061]: this function takes 4 arguments but 7 arguments were supplied\n   --> $DIR/issue-97484.rs:12:5\n    |\n LL |     foo(&&A, B, C, D, E, F, G);\n-   |     ^^^      -  -        - argument of type `F` unexpected\n-   |              |  |\n+   |     ^^^      -  -     -  - argument of type `F` unexpected\n+   |              |  |     |\n+   |              |  |     expected `&E`, found struct `E`\n    |              |  argument of type `C` unexpected\n    |              argument of type `B` unexpected\n    |"}]}