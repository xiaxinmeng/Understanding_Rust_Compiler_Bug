{"sha": "5cb6fafd366158ac5d9461819dbb0fb7018ad685", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVjYjZmYWZkMzY2MTU4YWM1ZDk0NjE4MTlkYmIwZmI3MDE4YWQ2ODU=", "commit": {"author": {"name": "kjeremy", "email": "kjeremy@gmail.com", "date": "2020-10-21T18:57:55Z"}, "committer": {"name": "kjeremy", "email": "kjeremy@gmail.com", "date": "2020-10-26T13:23:34Z"}, "message": "Latest proposed LSP 3.16.0\n\nNeeds: https://github.com/gluon-lang/lsp-types/pull/183", "tree": {"sha": "4cced8415251921c09efe4fec71a36a2c9da0aa2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4cced8415251921c09efe4fec71a36a2c9da0aa2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5cb6fafd366158ac5d9461819dbb0fb7018ad685", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5cb6fafd366158ac5d9461819dbb0fb7018ad685", "html_url": "https://github.com/rust-lang/rust/commit/5cb6fafd366158ac5d9461819dbb0fb7018ad685", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5cb6fafd366158ac5d9461819dbb0fb7018ad685/comments", "author": {"login": "kjeremy", "id": 4325700, "node_id": "MDQ6VXNlcjQzMjU3MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/4325700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjeremy", "html_url": "https://github.com/kjeremy", "followers_url": "https://api.github.com/users/kjeremy/followers", "following_url": "https://api.github.com/users/kjeremy/following{/other_user}", "gists_url": "https://api.github.com/users/kjeremy/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjeremy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjeremy/subscriptions", "organizations_url": "https://api.github.com/users/kjeremy/orgs", "repos_url": "https://api.github.com/users/kjeremy/repos", "events_url": "https://api.github.com/users/kjeremy/events{/privacy}", "received_events_url": "https://api.github.com/users/kjeremy/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kjeremy", "id": 4325700, "node_id": "MDQ6VXNlcjQzMjU3MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/4325700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjeremy", "html_url": "https://github.com/kjeremy", "followers_url": "https://api.github.com/users/kjeremy/followers", "following_url": "https://api.github.com/users/kjeremy/following{/other_user}", "gists_url": "https://api.github.com/users/kjeremy/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjeremy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjeremy/subscriptions", "organizations_url": "https://api.github.com/users/kjeremy/orgs", "repos_url": "https://api.github.com/users/kjeremy/repos", "events_url": "https://api.github.com/users/kjeremy/events{/privacy}", "received_events_url": "https://api.github.com/users/kjeremy/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "35ed3d2c005fdb0ec9ab78a52b31758bd7de298e", "url": "https://api.github.com/repos/rust-lang/rust/commits/35ed3d2c005fdb0ec9ab78a52b31758bd7de298e", "html_url": "https://github.com/rust-lang/rust/commit/35ed3d2c005fdb0ec9ab78a52b31758bd7de298e"}], "stats": {"total": 63, "additions": 39, "deletions": 24}, "files": [{"sha": "fe211b9b30fbd2e3df89bbe564eb8935cac7e4a5", "filename": "Cargo.lock", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/5cb6fafd366158ac5d9461819dbb0fb7018ad685/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/5cb6fafd366158ac5d9461819dbb0fb7018ad685/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=5cb6fafd366158ac5d9461819dbb0fb7018ad685", "patch": "@@ -852,9 +852,9 @@ dependencies = [\n \n [[package]]\n name = \"lsp-types\"\n-version = \"0.82.0\"\n+version = \"0.83.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"db895abb8527cf59e3de893ab2acf52cf904faeb65e60ea6f373e11fe86464e8\"\n+checksum = \"25e0bd4b95038f2c23bda332ba0ca684e8dda765db1f9bdb63dc4c3e01f3b456\"\n dependencies = [\n  \"base64\",\n  \"bitflags\","}, {"sha": "d25c4bf83747202e06f0dc9a5ec237b7061712dc", "filename": "crates/rust-analyzer/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5cb6fafd366158ac5d9461819dbb0fb7018ad685/crates%2Frust-analyzer%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/5cb6fafd366158ac5d9461819dbb0fb7018ad685/crates%2Frust-analyzer%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2FCargo.toml?ref=5cb6fafd366158ac5d9461819dbb0fb7018ad685", "patch": "@@ -21,7 +21,7 @@ env_logger = { version = \"0.8.1\", default-features = false }\n itertools = \"0.9.0\"\n jod-thread = \"0.1.0\"\n log = \"0.4.8\"\n-lsp-types = { version = \"0.82.0\", features = [\"proposed\"] }\n+lsp-types = { version = \"0.83.0\", features = [\"proposed\"] }\n parking_lot = \"0.11.0\"\n pico-args = \"0.3.1\"\n oorandom = \"11.1.2\""}, {"sha": "ff1ae9575ffae6fcf95811420b78b7de23577d84", "filename": "crates/rust-analyzer/src/caps.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/5cb6fafd366158ac5d9461819dbb0fb7018ad685/crates%2Frust-analyzer%2Fsrc%2Fcaps.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5cb6fafd366158ac5d9461819dbb0fb7018ad685/crates%2Frust-analyzer%2Fsrc%2Fcaps.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fcaps.rs?ref=5cb6fafd366158ac5d9461819dbb0fb7018ad685", "patch": "@@ -48,7 +48,7 @@ pub fn server_capabilities(client_caps: &ClientCapabilities) -> ServerCapabiliti\n         references_provider: Some(OneOf::Left(true)),\n         document_highlight_provider: Some(OneOf::Left(true)),\n         document_symbol_provider: Some(OneOf::Left(true)),\n-        workspace_symbol_provider: Some(true),\n+        workspace_symbol_provider: Some(OneOf::Left(true)),\n         code_action_provider: Some(code_action_provider),\n         code_lens_provider: Some(CodeLensOptions { resolve_provider: Some(true) }),\n         document_formatting_provider: Some(OneOf::Left(true)),\n@@ -113,6 +113,7 @@ fn code_action_capabilities(client_caps: &ClientCapabilities) -> CodeActionProvi\n                     CodeActionKind::REFACTOR_INLINE,\n                     CodeActionKind::REFACTOR_REWRITE,\n                 ]),\n+                resolve_provider: None,\n                 work_done_progress_options: Default::default(),\n             })\n         })"}, {"sha": "b949577c13d63d99a69e9d36a34d12d9353f0b05", "filename": "crates/rust-analyzer/src/diagnostics/to_proto.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/5cb6fafd366158ac5d9461819dbb0fb7018ad685/crates%2Frust-analyzer%2Fsrc%2Fdiagnostics%2Fto_proto.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5cb6fafd366158ac5d9461819dbb0fb7018ad685/crates%2Frust-analyzer%2Fsrc%2Fdiagnostics%2Fto_proto.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fdiagnostics%2Fto_proto.rs?ref=5cb6fafd366158ac5d9461819dbb0fb7018ad685", "patch": "@@ -248,10 +248,12 @@ pub(crate) fn map_rust_diagnostic_to_lsp(\n                         range: in_macro_location.range,\n                         severity,\n                         code: code.clone().map(lsp_types::NumberOrString::String),\n+                        code_description: None,\n                         source: Some(source.clone()),\n                         message: message.clone(),\n                         related_information: Some(information_for_additional_diagnostic),\n                         tags: if tags.is_empty() { None } else { Some(tags.clone()) },\n+                        data: None,\n                     };\n \n                     Some(MappedRustDiagnostic {\n@@ -267,6 +269,7 @@ pub(crate) fn map_rust_diagnostic_to_lsp(\n                 range: location.range,\n                 severity,\n                 code: code.clone().map(lsp_types::NumberOrString::String),\n+                code_description: None,\n                 source: Some(source.clone()),\n                 message,\n                 related_information: if related_information.is_empty() {\n@@ -275,6 +278,7 @@ pub(crate) fn map_rust_diagnostic_to_lsp(\n                     Some(related_information.clone())\n                 },\n                 tags: if tags.is_empty() { None } else { Some(tags.clone()) },\n+                data: None,\n             };\n \n             let main_diagnostic ="}, {"sha": "049c583a42cb6ec5a40e2a62572725074d8f96dd", "filename": "crates/rust-analyzer/src/handlers.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5cb6fafd366158ac5d9461819dbb0fb7018ad685/crates%2Frust-analyzer%2Fsrc%2Fhandlers.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5cb6fafd366158ac5d9461819dbb0fb7018ad685/crates%2Frust-analyzer%2Fsrc%2Fhandlers.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fhandlers.rs?ref=5cb6fafd366158ac5d9461819dbb0fb7018ad685", "patch": "@@ -1121,10 +1121,12 @@ pub(crate) fn publish_diagnostics(\n             range: to_proto::range(&line_index, d.range),\n             severity: Some(to_proto::diagnostic_severity(d.severity)),\n             code: None,\n+            code_description: None,\n             source: Some(\"rust-analyzer\".to_string()),\n             message: d.message,\n             related_information: None,\n             tags: if d.unused { Some(vec![DiagnosticTag::Unnecessary]) } else { None },\n+            data: None,\n         })\n         .collect();\n     Ok(diagnostics)"}, {"sha": "92b7c7b681073f4bd4c20df61022eb7c536c770b", "filename": "crates/rust-analyzer/src/to_proto.rs", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/5cb6fafd366158ac5d9461819dbb0fb7018ad685/crates%2Frust-analyzer%2Fsrc%2Fto_proto.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5cb6fafd366158ac5d9461819dbb0fb7018ad685/crates%2Frust-analyzer%2Fsrc%2Fto_proto.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fto_proto.rs?ref=5cb6fafd366158ac5d9461819dbb0fb7018ad685", "patch": "@@ -709,7 +709,16 @@ pub(crate) fn call_hierarchy_item(\n     let detail = target.description.clone();\n     let kind = symbol_kind(target.kind);\n     let (uri, range, selection_range) = location_info(snap, target)?;\n-    Ok(lsp_types::CallHierarchyItem { name, kind, tags: None, detail, uri, range, selection_range })\n+    Ok(lsp_types::CallHierarchyItem {\n+        name,\n+        kind,\n+        tags: None,\n+        detail,\n+        uri,\n+        range,\n+        selection_range,\n+        data: None,\n+    })\n }\n \n pub(crate) fn code_action_kind(kind: AssistKind) -> lsp_types::CodeActionKind {"}, {"sha": "86c3730add17dccbd4ba0fce2ec5ec1ceda86370", "filename": "editors/code/package-lock.json", "status": "modified", "additions": 15, "deletions": 15, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/5cb6fafd366158ac5d9461819dbb0fb7018ad685/editors%2Fcode%2Fpackage-lock.json", "raw_url": "https://github.com/rust-lang/rust/raw/5cb6fafd366158ac5d9461819dbb0fb7018ad685/editors%2Fcode%2Fpackage-lock.json", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fpackage-lock.json?ref=5cb6fafd366158ac5d9461819dbb0fb7018ad685", "patch": "@@ -2409,32 +2409,32 @@\n             }\n         },\n         \"vscode-jsonrpc\": {\n-            \"version\": \"6.0.0-next.5\",\n-            \"resolved\": \"https://registry.npmjs.org/vscode-jsonrpc/-/vscode-jsonrpc-6.0.0-next.5.tgz\",\n-            \"integrity\": \"sha512-IAgsltQPwg/pXOPsdXgbUTCaO9VSKZwirZN5SGtkdYQ/R3VjeC4v00WTVvoNayWMZpoC3O9u0ogqmsKzKhVasQ==\"\n+            \"version\": \"6.0.0-next.6\",\n+            \"resolved\": \"https://registry.npmjs.org/vscode-jsonrpc/-/vscode-jsonrpc-6.0.0-next.6.tgz\",\n+            \"integrity\": \"sha512-w3w1T9tGsInSbGyv2kpi4o6ciMIyfVkM+kAvkxEv4zIv3fs69q3Qyt7ZMLiXnaRFXecIOY2ALDKwIMi0n2IwHQ==\"\n         },\n         \"vscode-languageclient\": {\n-            \"version\": \"7.0.0-next.9\",\n-            \"resolved\": \"https://registry.npmjs.org/vscode-languageclient/-/vscode-languageclient-7.0.0-next.9.tgz\",\n-            \"integrity\": \"sha512-lFO+rN/i72CM2va6iKXq1lD7pJg8J93KEXf0w0boWVqU+DJhWzLrV3pXl8Xk1nCv//qOAyhlc/nx2KZCTeRF/A==\",\n+            \"version\": \"7.0.0-next.10\",\n+            \"resolved\": \"https://registry.npmjs.org/vscode-languageclient/-/vscode-languageclient-7.0.0-next.10.tgz\",\n+            \"integrity\": \"sha512-J9Hp64j1aaQfXlhMPGI1XAcdsIcSNPAL6022JElzgxsfAydmQfZeKCCNdyybjhmZ+xrep2yoVRAeD5TZFP7y6g==\",\n             \"requires\": {\n                 \"semver\": \"^6.3.0\",\n-                \"vscode-languageserver-protocol\": \"3.16.0-next.7\"\n+                \"vscode-languageserver-protocol\": \"3.16.0-next.8\"\n             }\n         },\n         \"vscode-languageserver-protocol\": {\n-            \"version\": \"3.16.0-next.7\",\n-            \"resolved\": \"https://registry.npmjs.org/vscode-languageserver-protocol/-/vscode-languageserver-protocol-3.16.0-next.7.tgz\",\n-            \"integrity\": \"sha512-tOjrg+K3RddJ547zpC9/LAgTbzadkPuHlqJFFWIcKjVhiJOh73XyY+Ngcu9wukGaTsuSGjJ0W8rlmwanixa0FQ==\",\n+            \"version\": \"3.16.0-next.8\",\n+            \"resolved\": \"https://registry.npmjs.org/vscode-languageserver-protocol/-/vscode-languageserver-protocol-3.16.0-next.8.tgz\",\n+            \"integrity\": \"sha512-AWMc7vVN7xuTpQf6A7yvaYjxyKEeMBQWJpkcRgT3EFAYU8PXJK2NCL0wPrgHH2soF/bErxJwajA1vNtCqrsRsg==\",\n             \"requires\": {\n-                \"vscode-jsonrpc\": \"6.0.0-next.5\",\n-                \"vscode-languageserver-types\": \"3.16.0-next.3\"\n+                \"vscode-jsonrpc\": \"6.0.0-next.6\",\n+                \"vscode-languageserver-types\": \"3.16.0-next.4\"\n             }\n         },\n         \"vscode-languageserver-types\": {\n-            \"version\": \"3.16.0-next.3\",\n-            \"resolved\": \"https://registry.npmjs.org/vscode-languageserver-types/-/vscode-languageserver-types-3.16.0-next.3.tgz\",\n-            \"integrity\": \"sha512-s/z5ZqSe7VpoXJ6JQcvwRiPPA3nG0nAcJ/HH03zoU6QaFfnkcgPK+HshC3WKPPnC2G08xA0iRB6h7kmyBB5Adg==\"\n+            \"version\": \"3.16.0-next.4\",\n+            \"resolved\": \"https://registry.npmjs.org/vscode-languageserver-types/-/vscode-languageserver-types-3.16.0-next.4.tgz\",\n+            \"integrity\": \"sha512-NlKJyGcET/ZBCCLBYIPaGo2c37R03bPYeWXozUtnjyye7+9dhlbMSODyoG2INcQf8zFmB4qhm2UOJjgYEgPCNA==\"\n         },\n         \"vscode-test\": {\n             \"version\": \"1.4.0\","}, {"sha": "26044491c3f09fa51355039b42cfe1e989c0e0b3", "filename": "editors/code/package.json", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5cb6fafd366158ac5d9461819dbb0fb7018ad685/editors%2Fcode%2Fpackage.json", "raw_url": "https://github.com/rust-lang/rust/raw/5cb6fafd366158ac5d9461819dbb0fb7018ad685/editors%2Fcode%2Fpackage.json", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fpackage.json?ref=5cb6fafd366158ac5d9461819dbb0fb7018ad685", "patch": "@@ -36,7 +36,7 @@\n     },\n     \"dependencies\": {\n         \"node-fetch\": \"^2.6.1\",\n-        \"vscode-languageclient\": \"7.0.0-next.9\"\n+        \"vscode-languageclient\": \"7.0.0-next.10\"\n     },\n     \"devDependencies\": {\n         \"@rollup/plugin-commonjs\": \"^13.0.2\","}, {"sha": "53492a445c4eea8268f6f5ad71c33220e60de076", "filename": "editors/code/src/util.ts", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5cb6fafd366158ac5d9461819dbb0fb7018ad685/editors%2Fcode%2Fsrc%2Futil.ts", "raw_url": "https://github.com/rust-lang/rust/raw/5cb6fafd366158ac5d9461819dbb0fb7018ad685/editors%2Fcode%2Fsrc%2Futil.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Futil.ts?ref=5cb6fafd366158ac5d9461819dbb0fb7018ad685", "patch": "@@ -75,12 +75,11 @@ export async function sendRequestWithRetry<TParam, TRet>(\n                 log.warn(\"LSP request timed out\", { method: reqType.method, param, error });\n                 throw error;\n             }\n-\n-            if (error.code === lc.ErrorCodes.RequestCancelled) {\n+            if (error.code === lc.LSPErrorCodes.RequestCancelled) {\n                 throw error;\n             }\n \n-            if (error.code !== lc.ErrorCodes.ContentModified) {\n+            if (error.code !== lc.LSPErrorCodes.ContentModified) {\n                 log.warn(\"LSP request failed\", { method: reqType.method, param, error });\n                 throw error;\n             }"}]}