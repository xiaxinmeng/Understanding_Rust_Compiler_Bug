{"sha": "24a789b666f2c36d443cde48b5baef04e5b3c76d", "node_id": "C_kwDOAAsO6NoAKDI0YTc4OWI2NjZmMmMzNmQ0NDNjZGU0OGI1YmFlZjA0ZTViM2M3NmQ", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-09-29T22:39:40Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-09-29T22:39:40Z"}, "message": "Auto merge of #89380 - ehuss:fix-windows-llvm, r=Mark-Simulacrum\n\nFix Windows LLVM issue.\n\nGitHub image 20210928.2 added LLVM 12.0.1 to the stock image.  However, the `lldb` executable doesn't work, it fails with:\n\n> C:/Program Files/LLVM/bin/lldb.exe: error while loading shared libraries: ?: cannot open shared object file: No such file or directory\n\nWe probably don't want to start testing LLDB on windows anyways (at least not without intent).\n\nThe hacky solution for now is to just delete the system LLVM.", "tree": {"sha": "0e963368a160774f7aca00a48b910ca7b5b6422a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0e963368a160774f7aca00a48b910ca7b5b6422a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/24a789b666f2c36d443cde48b5baef04e5b3c76d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/24a789b666f2c36d443cde48b5baef04e5b3c76d", "html_url": "https://github.com/rust-lang/rust/commit/24a789b666f2c36d443cde48b5baef04e5b3c76d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/24a789b666f2c36d443cde48b5baef04e5b3c76d/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "11491938f80988c7261a1179cf71a25c379c8783", "url": "https://api.github.com/repos/rust-lang/rust/commits/11491938f80988c7261a1179cf71a25c379c8783", "html_url": "https://github.com/rust-lang/rust/commit/11491938f80988c7261a1179cf71a25c379c8783"}, {"sha": "0f4731273a2451668c0dad15604f975db73848f3", "url": "https://api.github.com/repos/rust-lang/rust/commits/0f4731273a2451668c0dad15604f975db73848f3", "html_url": "https://github.com/rust-lang/rust/commit/0f4731273a2451668c0dad15604f975db73848f3"}], "stats": {"total": 6, "additions": 6, "deletions": 0}, "files": [{"sha": "b17398bb6b440741d5e23d84d297ab5122572a1c", "filename": "src/ci/scripts/install-clang.sh", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/24a789b666f2c36d443cde48b5baef04e5b3c76d/src%2Fci%2Fscripts%2Finstall-clang.sh", "raw_url": "https://github.com/rust-lang/rust/raw/24a789b666f2c36d443cde48b5baef04e5b3c76d/src%2Fci%2Fscripts%2Finstall-clang.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fscripts%2Finstall-clang.sh?ref=24a789b666f2c36d443cde48b5baef04e5b3c76d", "patch": "@@ -61,3 +61,9 @@ elif isWindows && [[ ${CUSTOM_MINGW-0} -ne 1 ]]; then\n     ciCommandSetEnv RUST_CONFIGURE_ARGS \\\n         \"${RUST_CONFIGURE_ARGS} --set llvm.clang-cl=$(pwd)/clang-rust/bin/clang-cl.exe\"\n fi\n+\n+if isWindows; then\n+    # GitHub image 20210928.2 added LLVM, but it is broken (and we don't want\n+    # to use it anyways).\n+    rm -rf /c/Program\\ Files/LLVM\n+fi"}]}