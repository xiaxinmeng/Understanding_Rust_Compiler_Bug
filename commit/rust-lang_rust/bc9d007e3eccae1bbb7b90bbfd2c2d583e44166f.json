{"sha": "bc9d007e3eccae1bbb7b90bbfd2c2d583e44166f", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJjOWQwMDdlM2VjY2FlMWJiYjdiOTBiYmZkMmMyZDU4M2U0NDE2NmY=", "commit": {"author": {"name": "Vytautas Astrauskas", "email": "astrauv@amazon.com", "date": "2020-04-24T23:47:18Z"}, "committer": {"name": "Vytautas Astrauskas", "email": "astrauv@amazon.com", "date": "2020-04-27T21:26:36Z"}, "message": "Improve Debug formatting of the thread name.", "tree": {"sha": "cfb6618f71fb97efbbf52d93755064a810438b69", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cfb6618f71fb97efbbf52d93755064a810438b69"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bc9d007e3eccae1bbb7b90bbfd2c2d583e44166f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bc9d007e3eccae1bbb7b90bbfd2c2d583e44166f", "html_url": "https://github.com/rust-lang/rust/commit/bc9d007e3eccae1bbb7b90bbfd2c2d583e44166f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bc9d007e3eccae1bbb7b90bbfd2c2d583e44166f/comments", "author": null, "committer": null, "parents": [{"sha": "04abf066f15c2ce2d1a788a1021bb14dcb9ac045", "url": "https://api.github.com/repos/rust-lang/rust/commits/04abf066f15c2ce2d1a788a1021bb14dcb9ac045", "html_url": "https://github.com/rust-lang/rust/commit/04abf066f15c2ce2d1a788a1021bb14dcb9ac045"}], "stats": {"total": 8, "additions": 2, "deletions": 6}, "files": [{"sha": "ecdaced3f8c5dc2ef89874ac3f85f2320816e7cb", "filename": "src/thread.rs", "status": "modified", "additions": 2, "deletions": 6, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/bc9d007e3eccae1bbb7b90bbfd2c2d583e44166f/src%2Fthread.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bc9d007e3eccae1bbb7b90bbfd2c2d583e44166f/src%2Fthread.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fthread.rs?ref=bc9d007e3eccae1bbb7b90bbfd2c2d583e44166f", "patch": "@@ -132,13 +132,9 @@ impl<'mir, 'tcx> Thread<'mir, 'tcx> {\n impl<'mir, 'tcx> std::fmt::Debug for Thread<'mir, 'tcx> {\n     fn fmt(&self, f: &mut std::fmt::Formatter<'_>) -> std::fmt::Result {\n         if let Some(ref name) = self.thread_name {\n-            if let Ok(name_str) = std::str::from_utf8(name) {\n-                write!(f, \"{}\", name_str)?;\n-            } else {\n-                write!(f, \"<invalid thread name>\")?;\n-            }\n+            write!(f, \"{}\", String::from_utf8_lossy(name))?;\n         } else {\n-            write!(f, \"unnamed\")?;\n+            write!(f, \"<unnamed>\")?;\n         }\n         write!(f, \"({:?}, {:?})\", self.state, self.join_status)\n     }"}]}