{"sha": "b41672eba8b0f06d2803cbd3bc2bd9ca7a8f2465", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI0MTY3MmViYThiMGYwNmQyODAzY2JkM2JjMmJkOWNhN2E4ZjI0NjU=", "commit": {"author": {"name": "Aaron Hill", "email": "aa1ronham@gmail.com", "date": "2021-07-19T22:45:28Z"}, "committer": {"name": "Aaron Hill", "email": "aa1ronham@gmail.com", "date": "2021-07-19T22:50:27Z"}, "message": "Fix incorrect use of `#[repr(no_niche)]`", "tree": {"sha": "52d6d488145306a275a72e76a297722bca42d51f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/52d6d488145306a275a72e76a297722bca42d51f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b41672eba8b0f06d2803cbd3bc2bd9ca7a8f2465", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7J9Gc3TfBwj2K399tAh+UQ6YsWQFAmD2AbMACgkQtAh+UQ6Y\nsWTYWQ//UqZRJzErGAf7K41sQqVF86VqtAFnkBAuJhmsgpG8rRnUZscc0kKMHJ3M\nDyxo5tNWm24f6y4UypdnK6RsokfJceLA6b7XdX7Lja2wgH+jnEH29d9G43u+igTI\nQ9tEK6XEeTdgwcRuxY7EVPTUL9wAqmatPlhw8EZHUOIleYRLOPTBN9LdAm4ilT23\nqB5UYoI1ya2nL18fCpU58VxTogo4ROBxhZeETkHJV4L1SLjqIpsy9lShUevCGUyB\n0tVHJro9pam08z8X4kR7nzHn6pHeiDNI14TmLkuDZNFC4JjsllMVIH7R1waCQgw5\nHRzbAfKvBukeiLRrQYavx/oH+QFqq9TgxdugEYqomFR7tiTNKqgArTb6jtXPR619\nfmlpWDZGI3e6WU3pJ6Ex3t//ZVgS6jbiNXRQAhei6d3noCLNyhn5CGzgHuQlyG95\nlp5n+CWij5SEvzCczavjZzdRbJ/sIguozukhJSkSeB+iRuxqmzgBpIXIwRwQqJOQ\nmz9+g0w3GbG19VCEQhFAIcvmczwqv0Oj+aAI73SIAzXt9yD+Oabm5wB5zK4wyY88\n1YmjTxT003tMmteQ1ak1s7ZPNsbbGD/ZwOdAXPhuBYKJKL5sQFckDcRtszaC2t8r\nMQwuEKyimOgQl3YjsDV/VeA0iwrjU3zeSIqGKXxoAtJadp3IYBs=\n=488X\n-----END PGP SIGNATURE-----", "payload": "tree 52d6d488145306a275a72e76a297722bca42d51f\nparent 070df9e676d8f32b424484cdabca612c8b392020\nauthor Aaron Hill <aa1ronham@gmail.com> 1626734728 -0500\ncommitter Aaron Hill <aa1ronham@gmail.com> 1626735027 -0500\n\nFix incorrect use of `#[repr(no_niche)]`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b41672eba8b0f06d2803cbd3bc2bd9ca7a8f2465", "html_url": "https://github.com/rust-lang/rust/commit/b41672eba8b0f06d2803cbd3bc2bd9ca7a8f2465", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b41672eba8b0f06d2803cbd3bc2bd9ca7a8f2465/comments", "author": {"login": "Aaron1011", "id": 1408859, "node_id": "MDQ6VXNlcjE0MDg4NTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1408859?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aaron1011", "html_url": "https://github.com/Aaron1011", "followers_url": "https://api.github.com/users/Aaron1011/followers", "following_url": "https://api.github.com/users/Aaron1011/following{/other_user}", "gists_url": "https://api.github.com/users/Aaron1011/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aaron1011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aaron1011/subscriptions", "organizations_url": "https://api.github.com/users/Aaron1011/orgs", "repos_url": "https://api.github.com/users/Aaron1011/repos", "events_url": "https://api.github.com/users/Aaron1011/events{/privacy}", "received_events_url": "https://api.github.com/users/Aaron1011/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Aaron1011", "id": 1408859, "node_id": "MDQ6VXNlcjE0MDg4NTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1408859?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aaron1011", "html_url": "https://github.com/Aaron1011", "followers_url": "https://api.github.com/users/Aaron1011/followers", "following_url": "https://api.github.com/users/Aaron1011/following{/other_user}", "gists_url": "https://api.github.com/users/Aaron1011/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aaron1011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aaron1011/subscriptions", "organizations_url": "https://api.github.com/users/Aaron1011/orgs", "repos_url": "https://api.github.com/users/Aaron1011/repos", "events_url": "https://api.github.com/users/Aaron1011/events{/privacy}", "received_events_url": "https://api.github.com/users/Aaron1011/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "070df9e676d8f32b424484cdabca612c8b392020", "url": "https://api.github.com/repos/rust-lang/rust/commits/070df9e676d8f32b424484cdabca612c8b392020", "html_url": "https://github.com/rust-lang/rust/commit/070df9e676d8f32b424484cdabca612c8b392020"}], "stats": {"total": 14, "additions": 6, "deletions": 8}, "files": [{"sha": "2e6064aeb00744f1e1c620fe8212fed9d3f28a04", "filename": "src/test/ui/repr/repr-no-niche.rs", "status": "modified", "additions": 6, "deletions": 8, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/b41672eba8b0f06d2803cbd3bc2bd9ca7a8f2465/src%2Ftest%2Fui%2Frepr%2Frepr-no-niche.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b41672eba8b0f06d2803cbd3bc2bd9ca7a8f2465/src%2Ftest%2Fui%2Frepr%2Frepr-no-niche.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frepr%2Frepr-no-niche.rs?ref=b41672eba8b0f06d2803cbd3bc2bd9ca7a8f2465", "patch": "@@ -73,8 +73,7 @@ mod enum_inline {\n     // general; this test is relying on that.)\n     two_fifty_six_variant_enum!(Visible2, N8);\n \n-    #[repr(no_niche)]\n-    two_fifty_six_variant_enum!(Cloaked2, N8);\n+    two_fifty_six_variant_enum!(#[repr(no_niche)] Cloaked2, N8);\n }\n \n mod enum_param {\n@@ -96,8 +95,7 @@ mod enum_param {\n     // here as above (assuming `T` is instantiated with `NonZeroU8`).\n     two_fifty_six_variant_enum!(Visible2<T>);\n \n-    #[repr(no_niche)]\n-    two_fifty_six_variant_enum!(Cloaked2<T>);\n+    two_fifty_six_variant_enum!(#[repr(no_niche)] Cloaked2<T>);\n }\n \n fn main() {\n@@ -157,8 +155,8 @@ fn main() {\n }\n \n macro two_fifty_six_variant_enum {\n-    ($name:ident<$param:ident>) => {\n-        #[derive(Debug)]\n+    ($(#[$attr:meta])* $name:ident<$param:ident>) => {\n+        #[derive(Debug)] $(#[$attr])*\n         pub enum $name<$param> {\n             _V00($param, u16), _V01(u16, $param), _V02($param, u16), _V03(u16, $param),\n             _V04($param, u16), _V05(u16, $param), _V06($param, u16), _V07(u16, $param),\n@@ -242,8 +240,8 @@ macro two_fifty_six_variant_enum {\n         }\n     },\n \n-    ($name:ident, $param:ty) => {\n-        #[derive(Debug)]\n+    ($(#[$attr:meta])* $name:ident, $param:ty) => {\n+        #[derive(Debug)] $(#[$attr])*\n         pub enum $name {\n             _V00($param, u16), _V01(u16, $param), _V02($param, u16), _V03(u16, $param),\n             _V04($param, u16), _V05(u16, $param), _V06($param, u16), _V07(u16, $param),"}]}