{"sha": "4d84b1630b586e4de9436e37f357b480132540fd", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRkODRiMTYzMGI1ODZlNGRlOTQzNmUzN2YzNTdiNDgwMTMyNTQwZmQ=", "commit": {"author": {"name": "Christopher Durham", "email": "cad97@cad97.com", "date": "2017-12-03T02:26:09Z"}, "committer": {"name": "Christopher Durham", "email": "cad97@cad97.com", "date": "2017-12-04T06:24:38Z"}, "message": "Fix macOS build\n\n- Ensure python is available https://github.com/travis-ci/travis-ci/issues/2312\n- Only pip install --user on linux, macOS is in virtualenv\n- Set PATH in a os-agnostic manner https://github.com/huonw/travis-cargo/pull/71", "tree": {"sha": "41f603499a561b700e254d9bbcaae65791e967f5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/41f603499a561b700e254d9bbcaae65791e967f5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4d84b1630b586e4de9436e37f357b480132540fd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4d84b1630b586e4de9436e37f357b480132540fd", "html_url": "https://github.com/rust-lang/rust/commit/4d84b1630b586e4de9436e37f357b480132540fd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4d84b1630b586e4de9436e37f357b480132540fd/comments", "author": {"login": "CAD97", "id": 5992217, "node_id": "MDQ6VXNlcjU5OTIyMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5992217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CAD97", "html_url": "https://github.com/CAD97", "followers_url": "https://api.github.com/users/CAD97/followers", "following_url": "https://api.github.com/users/CAD97/following{/other_user}", "gists_url": "https://api.github.com/users/CAD97/gists{/gist_id}", "starred_url": "https://api.github.com/users/CAD97/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CAD97/subscriptions", "organizations_url": "https://api.github.com/users/CAD97/orgs", "repos_url": "https://api.github.com/users/CAD97/repos", "events_url": "https://api.github.com/users/CAD97/events{/privacy}", "received_events_url": "https://api.github.com/users/CAD97/received_events", "type": "User", "site_admin": false}, "committer": {"login": "CAD97", "id": 5992217, "node_id": "MDQ6VXNlcjU5OTIyMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5992217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CAD97", "html_url": "https://github.com/CAD97", "followers_url": "https://api.github.com/users/CAD97/followers", "following_url": "https://api.github.com/users/CAD97/following{/other_user}", "gists_url": "https://api.github.com/users/CAD97/gists{/gist_id}", "starred_url": "https://api.github.com/users/CAD97/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CAD97/subscriptions", "organizations_url": "https://api.github.com/users/CAD97/orgs", "repos_url": "https://api.github.com/users/CAD97/repos", "events_url": "https://api.github.com/users/CAD97/events{/privacy}", "received_events_url": "https://api.github.com/users/CAD97/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "24f1f69d5a73a4ff7347772cdd414d14cbd2d486", "url": "https://api.github.com/repos/rust-lang/rust/commits/24f1f69d5a73a4ff7347772cdd414d14cbd2d486", "html_url": "https://github.com/rust-lang/rust/commit/24f1f69d5a73a4ff7347772cdd414d14cbd2d486"}], "stats": {"total": 11, "additions": 9, "deletions": 2}, "files": [{"sha": "5ece4e0dbe6d3b06d085d416731a659ec642044a", "filename": ".travis.yml", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/4d84b1630b586e4de9436e37f357b480132540fd/.travis.yml", "raw_url": "https://github.com/rust-lang/rust/raw/4d84b1630b586e4de9436e37f357b480132540fd/.travis.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.travis.yml?ref=4d84b1630b586e4de9436e37f357b480132540fd", "patch": "@@ -20,8 +20,15 @@ addons:\n \n before_script:\n - |\n-  pip install 'travis-cargo<0.2' --user &&\n-  export PATH=$HOME/.local/bin:/usr/local/bin:$PATH\n+  if [ $TRAVIS_OS_NAME = 'osx' ]; then\n+    brew install python3\n+    virtualenv env -p python3\n+    source env/bin/activate\n+    pip install 'travis-cargo<0.2'\n+  else\n+    pip install 'travis-cargo<0.2' --user\n+  fi\n+- export PATH=\"$(python -m site --user-base)/bin:$PATH\"\n \n script:\n - |"}]}