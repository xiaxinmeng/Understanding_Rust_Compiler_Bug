{"sha": "d1f164142b1f551fbec8759a803882ed3935d8c7", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQxZjE2NDE0MmIxZjU1MWZiZWM4NzU5YTgwMzg4MmVkMzkzNWQ4Yzc=", "commit": {"author": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2021-08-25T11:46:15Z"}, "committer": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2021-08-25T11:46:15Z"}, "message": "Update patches/0027-sysroot-128bit-atomic-operations.patch", "tree": {"sha": "680cdadc96cc740f5002c56e5ec4353a00df3a2d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/680cdadc96cc740f5002c56e5ec4353a00df3a2d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d1f164142b1f551fbec8759a803882ed3935d8c7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d1f164142b1f551fbec8759a803882ed3935d8c7", "html_url": "https://github.com/rust-lang/rust/commit/d1f164142b1f551fbec8759a803882ed3935d8c7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d1f164142b1f551fbec8759a803882ed3935d8c7/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "92f488754b345f2d93b82195107facef07aea7db", "url": "https://api.github.com/repos/rust-lang/rust/commits/92f488754b345f2d93b82195107facef07aea7db", "html_url": "https://github.com/rust-lang/rust/commit/92f488754b345f2d93b82195107facef07aea7db"}], "stats": {"total": 41, "additions": 37, "deletions": 4}, "files": [{"sha": "e2d07bd12670264d2674919a63809eb55d15a112", "filename": "patches/0027-sysroot-128bit-atomic-operations.patch", "status": "modified", "additions": 37, "deletions": 4, "changes": 41, "blob_url": "https://github.com/rust-lang/rust/blob/d1f164142b1f551fbec8759a803882ed3935d8c7/patches%2F0027-sysroot-128bit-atomic-operations.patch", "raw_url": "https://github.com/rust-lang/rust/raw/d1f164142b1f551fbec8759a803882ed3935d8c7/patches%2F0027-sysroot-128bit-atomic-operations.patch", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/patches%2F0027-sysroot-128bit-atomic-operations.patch?ref=d1f164142b1f551fbec8759a803882ed3935d8c7", "patch": "@@ -1,4 +1,4 @@\n-From 6a4e6f5dc8c8a529a822eb9b57f9e57519595439 Mon Sep 17 00:00:00 2001\n+From ad7ffe71baba46865f2e65266ab025920dfdc20b Mon Sep 17 00:00:00 2001\n From: bjorn3 <bjorn3@users.noreply.github.com>\n Date: Thu, 18 Feb 2021 18:45:28 +0100\n Subject: [PATCH] Disable 128bit atomic operations\n@@ -8,7 +8,8 @@ Cranelift doesn't support them yet\n  library/core/src/panic/unwind_safe.rs |  6 -----\n  library/core/src/sync/atomic.rs       | 38 ---------------------------\n  library/core/tests/atomic.rs          |  4 ---\n- 3 files changed, 48 deletions(-)\n+ library/std/src/time/monotonic.rs     |  6 +++--\n+ 4 files changed, 4 insertions(+), 50 deletions(-)\n \n diff --git a/library/core/src/panic/unwind_safe.rs b/library/core/src/panic/unwind_safe.rs\n index 092b7cf..158cf71 100644\n@@ -35,10 +36,10 @@ index 092b7cf..158cf71 100644\n  #[cfg(target_has_atomic_load_store = \"8\")]\n  #[stable(feature = \"unwind_safe_atomic_refs\", since = \"1.14.0\")]\n diff --git a/library/core/src/sync/atomic.rs b/library/core/src/sync/atomic.rs\n-index 0194c58..25a0038 100644\n+index d9de37e..8293fce 100644\n --- a/library/core/src/sync/atomic.rs\n +++ b/library/core/src/sync/atomic.rs\n-@@ -2229,44 +2229,6 @@ atomic_int! {\n+@@ -2234,44 +2234,6 @@ atomic_int! {\n      \"AtomicU64::new(0)\",\n      u64 AtomicU64 ATOMIC_U64_INIT\n  }\n@@ -98,6 +99,38 @@ index b735957..ea728b6 100644\n      #[cfg(target_has_atomic = \"ptr\")]\n      assert_eq!(align_of::<AtomicUsize>(), size_of::<AtomicUsize>());\n      #[cfg(target_has_atomic = \"ptr\")]\n+diff --git a/library/std/src/time/monotonic.rs b/library/std/src/time/monotonic.rs\n+index fa96b7a..2854f9c 100644\n+--- a/library/std/src/time/monotonic.rs\n++++ b/library/std/src/time/monotonic.rs\n+@@ -5,7 +5,7 @@ pub(super) fn monotonize(raw: time::Instant) -> time::Instant {\n+     inner::monotonize(raw)\n+ }\n+ \n+-#[cfg(all(target_has_atomic = \"64\", not(target_has_atomic = \"128\")))]\n++#[cfg(target_has_atomic = \"64\")]\n+ pub mod inner {\n+     use crate::sync::atomic::AtomicU64;\n+     use crate::sync::atomic::Ordering::*;\n+@@ -70,6 +70,7 @@ pub mod inner {\n+     }\n+ }\n+ \n++/*\n+ #[cfg(target_has_atomic = \"128\")]\n+ pub mod inner {\n+     use crate::sync::atomic::AtomicU128;\n+@@ -94,8 +95,9 @@ pub mod inner {\n+         ZERO.checked_add_duration(&Duration::new(secs, nanos)).unwrap()\n+     }\n+ }\n++*/\n+ \n+-#[cfg(not(any(target_has_atomic = \"64\", target_has_atomic = \"128\")))]\n++#[cfg(not(target_has_atomic = \"64\"))]\n+ pub mod inner {\n+     use crate::cmp;\n+     use crate::sys::time;\n -- \n 2.26.2.7.g19db9cfb68\n "}]}