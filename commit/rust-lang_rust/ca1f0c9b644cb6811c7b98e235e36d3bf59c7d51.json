{"sha": "ca1f0c9b644cb6811c7b98e235e36d3bf59c7d51", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNhMWYwYzliNjQ0Y2I2ODExYzdiOThlMjM1ZTM2ZDNiZjU5YzdkNTE=", "commit": {"author": {"name": "Lawrence Woodman", "email": "lwoodman@vlifesystems.com", "date": "2016-01-05T11:09:39Z"}, "committer": {"name": "Lawrence Woodman", "email": "lwoodman@vlifesystems.com", "date": "2016-01-05T11:09:39Z"}, "message": "Add correct use for Error and io\n\nThis also repeated the case analysis used.", "tree": {"sha": "afbcbf4e15140329ae327a2e00894e0106952aff", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/afbcbf4e15140329ae327a2e00894e0106952aff"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ca1f0c9b644cb6811c7b98e235e36d3bf59c7d51", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ca1f0c9b644cb6811c7b98e235e36d3bf59c7d51", "html_url": "https://github.com/rust-lang/rust/commit/ca1f0c9b644cb6811c7b98e235e36d3bf59c7d51", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ca1f0c9b644cb6811c7b98e235e36d3bf59c7d51/comments", "author": {"login": "lawrencewoodman", "id": 238718, "node_id": "MDQ6VXNlcjIzODcxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/238718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lawrencewoodman", "html_url": "https://github.com/lawrencewoodman", "followers_url": "https://api.github.com/users/lawrencewoodman/followers", "following_url": "https://api.github.com/users/lawrencewoodman/following{/other_user}", "gists_url": "https://api.github.com/users/lawrencewoodman/gists{/gist_id}", "starred_url": "https://api.github.com/users/lawrencewoodman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lawrencewoodman/subscriptions", "organizations_url": "https://api.github.com/users/lawrencewoodman/orgs", "repos_url": "https://api.github.com/users/lawrencewoodman/repos", "events_url": "https://api.github.com/users/lawrencewoodman/events{/privacy}", "received_events_url": "https://api.github.com/users/lawrencewoodman/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lawrencewoodman", "id": 238718, "node_id": "MDQ6VXNlcjIzODcxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/238718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lawrencewoodman", "html_url": "https://github.com/lawrencewoodman", "followers_url": "https://api.github.com/users/lawrencewoodman/followers", "following_url": "https://api.github.com/users/lawrencewoodman/following{/other_user}", "gists_url": "https://api.github.com/users/lawrencewoodman/gists{/gist_id}", "starred_url": "https://api.github.com/users/lawrencewoodman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lawrencewoodman/subscriptions", "organizations_url": "https://api.github.com/users/lawrencewoodman/orgs", "repos_url": "https://api.github.com/users/lawrencewoodman/repos", "events_url": "https://api.github.com/users/lawrencewoodman/events{/privacy}", "received_events_url": "https://api.github.com/users/lawrencewoodman/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3a6c6c8e01b489cac888a679d9cd567138987000", "url": "https://api.github.com/repos/rust-lang/rust/commits/3a6c6c8e01b489cac888a679d9cd567138987000", "html_url": "https://github.com/rust-lang/rust/commit/3a6c6c8e01b489cac888a679d9cd567138987000"}], "stats": {"total": 17, "additions": 15, "deletions": 2}, "files": [{"sha": "8c1a138ec4825ba9f1c7bd9a876065826917987e", "filename": "src/doc/book/error-handling.md", "status": "modified", "additions": 15, "deletions": 2, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/ca1f0c9b644cb6811c7b98e235e36d3bf59c7d51/src%2Fdoc%2Fbook%2Ferror-handling.md", "raw_url": "https://github.com/rust-lang/rust/raw/ca1f0c9b644cb6811c7b98e235e36d3bf59c7d51/src%2Fdoc%2Fbook%2Ferror-handling.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Fbook%2Ferror-handling.md?ref=ca1f0c9b644cb6811c7b98e235e36d3bf59c7d51", "patch": "@@ -1795,6 +1795,10 @@ To convert this to proper error handling, we need to do the following:\n Let's try it:\n \n ```rust,ignore\n+use std::error::Error\n+\n+// The rest of the code before this is unchanged\n+\n fn search<P: AsRef<Path>>\n          (file_path: P, city: &str)\n          -> Result<Vec<PopulationCount>, Box<Error+Send+Sync>> {\n@@ -1903,8 +1907,13 @@ let city = if !matches.free.is_empty() {\n \treturn;\n };\n \n-for pop in search(&data_file, &city) {\n-\tprintln!(\"{}, {}: {:?}\", pop.city, pop.country, pop.count);\n+match search(&data_file, &city) {\n+    Ok(pops) => {\n+        for pop in pops {\n+            println!(\"{}, {}: {:?}\", pop.city, pop.country, pop.count);\n+        }\n+    }\n+    Err(err) => println!(\"{}\", err)\n }\n ...\n ```\n@@ -1927,6 +1936,10 @@ that it is generic on some type parameter `R` that satisfies\n `io::Read`. Another way is to just use trait objects:\n \n ```rust,ignore\n+use std::io;\n+\n+// The rest of the code before this is unchanged\n+\n fn search<P: AsRef<Path>>\n          (file_path: &Option<P>, city: &str)\n          -> Result<Vec<PopulationCount>, Box<Error+Send+Sync>> {"}]}