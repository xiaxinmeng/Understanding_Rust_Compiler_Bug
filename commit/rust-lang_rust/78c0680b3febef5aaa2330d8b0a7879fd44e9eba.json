{"sha": "78c0680b3febef5aaa2330d8b0a7879fd44e9eba", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc4YzA2ODBiM2ZlYmVmNWFhYTIzMzBkOGIwYTc4NzlmZDQ0ZTllYmE=", "commit": {"author": {"name": "Chenguang Wang", "email": "w3cing@gmail.com", "date": "2020-12-10T03:50:11Z"}, "committer": {"name": "Chenguang Wang", "email": "w3cing@gmail.com", "date": "2020-12-10T03:50:11Z"}, "message": "update comments", "tree": {"sha": "d919b016c79fabbd545e8c5f38aae8dc975e463b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d919b016c79fabbd545e8c5f38aae8dc975e463b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/78c0680b3febef5aaa2330d8b0a7879fd44e9eba", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/78c0680b3febef5aaa2330d8b0a7879fd44e9eba", "html_url": "https://github.com/rust-lang/rust/commit/78c0680b3febef5aaa2330d8b0a7879fd44e9eba", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/78c0680b3febef5aaa2330d8b0a7879fd44e9eba/comments", "author": {"login": "wecing", "id": 328191, "node_id": "MDQ6VXNlcjMyODE5MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/328191?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wecing", "html_url": "https://github.com/wecing", "followers_url": "https://api.github.com/users/wecing/followers", "following_url": "https://api.github.com/users/wecing/following{/other_user}", "gists_url": "https://api.github.com/users/wecing/gists{/gist_id}", "starred_url": "https://api.github.com/users/wecing/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wecing/subscriptions", "organizations_url": "https://api.github.com/users/wecing/orgs", "repos_url": "https://api.github.com/users/wecing/repos", "events_url": "https://api.github.com/users/wecing/events{/privacy}", "received_events_url": "https://api.github.com/users/wecing/received_events", "type": "User", "site_admin": false}, "committer": {"login": "wecing", "id": 328191, "node_id": "MDQ6VXNlcjMyODE5MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/328191?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wecing", "html_url": "https://github.com/wecing", "followers_url": "https://api.github.com/users/wecing/followers", "following_url": "https://api.github.com/users/wecing/following{/other_user}", "gists_url": "https://api.github.com/users/wecing/gists{/gist_id}", "starred_url": "https://api.github.com/users/wecing/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wecing/subscriptions", "organizations_url": "https://api.github.com/users/wecing/orgs", "repos_url": "https://api.github.com/users/wecing/repos", "events_url": "https://api.github.com/users/wecing/events{/privacy}", "received_events_url": "https://api.github.com/users/wecing/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c6f2d49ff8be6b42bba94e7dc96e0fff8b5ca580", "url": "https://api.github.com/repos/rust-lang/rust/commits/c6f2d49ff8be6b42bba94e7dc96e0fff8b5ca580", "html_url": "https://github.com/rust-lang/rust/commit/c6f2d49ff8be6b42bba94e7dc96e0fff8b5ca580"}], "stats": {"total": 9, "additions": 4, "deletions": 5}, "files": [{"sha": "f28a4b4671571a7a22800416e2f1b4f4420be787", "filename": "compiler/rustc_mir/src/transform/early_otherwise_branch.rs", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/78c0680b3febef5aaa2330d8b0a7879fd44e9eba/compiler%2Frustc_mir%2Fsrc%2Ftransform%2Fearly_otherwise_branch.rs", "raw_url": "https://github.com/rust-lang/rust/raw/78c0680b3febef5aaa2330d8b0a7879fd44e9eba/compiler%2Frustc_mir%2Fsrc%2Ftransform%2Fearly_otherwise_branch.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir%2Fsrc%2Ftransform%2Fearly_otherwise_branch.rs?ref=78c0680b3febef5aaa2330d8b0a7879fd44e9eba", "patch": "@@ -283,7 +283,7 @@ impl<'a, 'tcx> Helper<'a, 'tcx> {\n                 return None;\n             }\n \n-            // when one place is the projection of the other, it's not safe to calculate their discriminant values sequentially.\n+            // when the second place is a projection of the first one, it's not safe to calculate their discriminant values sequentially.\n             // for example, this should not be optimized:\n             //\n             // ```rust\n@@ -294,18 +294,17 @@ impl<'a, 'tcx> Helper<'a, 'tcx> {\n             // ```mir\n             // bb0: {\n             //   _2 = discriminant(*_1)\n-            //   switchInt(move _2) -> [...]\n+            //   switchInt(_2) -> [...]\n             // }\n             // bb1: {\n             //   _3 = discriminant(*(((*_1) as Some).0: &E))\n-            //   switchInt(move _3) -> [...]\n+            //   switchInt(_3) -> [...]\n             // }\n             // ```\n             let discr_place = discr_info.place_of_adt_discr_read;\n             let this_discr_place = this_bb_discr_info.place_of_adt_discr_read;\n             if discr_place.local == this_discr_place.local\n-                && (discr_place.projection.starts_with(this_discr_place.projection)\n-                    || this_discr_place.projection.starts_with(discr_place.projection))\n+                && this_discr_place.projection.starts_with(discr_place.projection)\n             {\n                 trace!(\"NO: one target is the projection of another\");\n                 return None;"}]}