{"sha": "a70c14aecca90e29417ab3c9b9dcbf0631efae79", "node_id": "C_kwDOAAsO6NoAKGE3MGMxNGFlY2NhOTBlMjk0MTdhYjNjOWI5ZGNiZjA2MzFlZmFlNzk", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-06-14T09:21:28Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-06-14T18:09:09Z"}, "message": "Add GUI test for sidebar items expand/collapse", "tree": {"sha": "8b314192d9eec3722ba877620b8bd59228f85231", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8b314192d9eec3722ba877620b8bd59228f85231"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a70c14aecca90e29417ab3c9b9dcbf0631efae79", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a70c14aecca90e29417ab3c9b9dcbf0631efae79", "html_url": "https://github.com/rust-lang/rust/commit/a70c14aecca90e29417ab3c9b9dcbf0631efae79", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a70c14aecca90e29417ab3c9b9dcbf0631efae79/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "df9fea24a58eba9476aaeccc350441634eaf5eae", "url": "https://api.github.com/repos/rust-lang/rust/commits/df9fea24a58eba9476aaeccc350441634eaf5eae", "html_url": "https://github.com/rust-lang/rust/commit/df9fea24a58eba9476aaeccc350441634eaf5eae"}], "stats": {"total": 25, "additions": 24, "deletions": 1}, "files": [{"sha": "188b2605f0f135b29de20472db35d4121201e8cf", "filename": "src/test/rustdoc-gui/source-code-page.goml", "status": "modified", "additions": 24, "deletions": 1, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/a70c14aecca90e29417ab3c9b9dcbf0631efae79/src%2Ftest%2Frustdoc-gui%2Fsource-code-page.goml", "raw_url": "https://github.com/rust-lang/rust/raw/a70c14aecca90e29417ab3c9b9dcbf0631efae79/src%2Ftest%2Frustdoc-gui%2Fsource-code-page.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsource-code-page.goml?ref=a70c14aecca90e29417ab3c9b9dcbf0631efae79", "patch": "@@ -1,4 +1,4 @@\n-// Checks that the interactions with the source code pages are workined as expected.\n+// Checks that the interactions with the source code pages are working as expected.\n goto: file://|DOC_PATH|/src/test_docs/lib.rs.html\n // Check that we can click on the line number.\n click: \".line-numbers > span:nth-child(4)\" // This is the span for line 4.\n@@ -27,3 +27,26 @@ assert-position: (\"//*[@id='1']\", {\"x\": 104, \"y\": 103})\n // We click on the left of the \"1\" span but still in the \"line-number\" `<pre>`.\n click: (103, 103)\n assert-document-property: ({\"URL\": \"/lib.rs.html\"}, ENDS_WITH)\n+\n+// Checking the source code sidebar.\n+\n+// First we \"open\" it.\n+click: \"#sidebar-toggle\"\n+assert: \".sidebar.expanded\"\n+\n+// We check that the first entry of the sidebar is collapsed (which, for whatever reason,\n+// is number 2 and not 1...).\n+assert-attribute: (\"#source-sidebar .name:nth-child(2)\", {\"class\": \"name\"})\n+assert-text: (\"#source-sidebar .name:nth-child(2)\", \"implementors\")\n+// We also check its children are hidden too.\n+assert-css: (\"#source-sidebar .name:nth-child(2) + .children\", {\"display\": \"none\"})\n+// We now click on it.\n+click: \"#source-sidebar .name:nth-child(2)\"\n+assert-attribute: (\"#source-sidebar .name:nth-child(2)\", {\"class\": \"name expand\"})\n+// Checking that its children are displayed as well.\n+assert-css: (\"#source-sidebar .name:nth-child(2) + .children\", {\"display\": \"block\"})\n+\n+// And now we collapse it again.\n+click: \"#source-sidebar .name:nth-child(2)\"\n+assert-attribute: (\"#source-sidebar .name:nth-child(2)\", {\"class\": \"name\"})\n+assert-css: (\"#source-sidebar .name:nth-child(2) + .children\", {\"display\": \"none\"})"}]}