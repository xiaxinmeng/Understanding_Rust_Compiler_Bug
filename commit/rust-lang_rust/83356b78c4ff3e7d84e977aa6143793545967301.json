{"sha": "83356b78c4ff3e7d84e977aa6143793545967301", "node_id": "C_kwDOAAsO6NoAKDgzMzU2Yjc4YzRmZjNlN2Q4NGU5NzdhYTYxNDM3OTM1NDU5NjczMDE", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-11-17T17:15:31Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-11-17T17:15:31Z"}, "message": "Auto merge of #104361 - vladimir-ea:watchos_fix_linking, r=oli-obk\n\n[watchos] Dynamic linking is not allowed for watchos targets\n\nDynamic linking of all apple targets was (re-) enabled in PR #100636. However, dynamic linking is not allowed on WatchOS so this broke the build of standard library for WatchOS.\n\nThis change disables dynamic linking for WatchOS non-simulator targets.", "tree": {"sha": "ef97af3c35b3bdfcac12aa421555c607dbe74bac", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ef97af3c35b3bdfcac12aa421555c607dbe74bac"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/83356b78c4ff3e7d84e977aa6143793545967301", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/83356b78c4ff3e7d84e977aa6143793545967301", "html_url": "https://github.com/rust-lang/rust/commit/83356b78c4ff3e7d84e977aa6143793545967301", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/83356b78c4ff3e7d84e977aa6143793545967301/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b6097f2e1b2ca62e188ba53cf43bd66b06b36915", "url": "https://api.github.com/repos/rust-lang/rust/commits/b6097f2e1b2ca62e188ba53cf43bd66b06b36915", "html_url": "https://github.com/rust-lang/rust/commit/b6097f2e1b2ca62e188ba53cf43bd66b06b36915"}, {"sha": "db99a89e38c806a3240098876a725ce4b24b4193", "url": "https://api.github.com/repos/rust-lang/rust/commits/db99a89e38c806a3240098876a725ce4b24b4193", "html_url": "https://github.com/rust-lang/rust/commit/db99a89e38c806a3240098876a725ce4b24b4193"}], "stats": {"total": 4, "additions": 4, "deletions": 0}, "files": [{"sha": "52ee68e7560f6c0d82892d34e88f2d5e1a480069", "filename": "compiler/rustc_target/src/spec/arm64_32_apple_watchos.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/83356b78c4ff3e7d84e977aa6143793545967301/compiler%2Frustc_target%2Fsrc%2Fspec%2Farm64_32_apple_watchos.rs", "raw_url": "https://github.com/rust-lang/rust/raw/83356b78c4ff3e7d84e977aa6143793545967301/compiler%2Frustc_target%2Fsrc%2Fspec%2Farm64_32_apple_watchos.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Farm64_32_apple_watchos.rs?ref=83356b78c4ff3e7d84e977aa6143793545967301", "patch": "@@ -12,6 +12,8 @@ pub fn target() -> Target {\n             features: \"+neon,+fp-armv8,+apple-a7\".into(),\n             max_atomic_width: Some(128),\n             forces_embed_bitcode: true,\n+            dynamic_linking: false,\n+            position_independent_executables: true,\n             // These arguments are not actually invoked - they just have\n             // to look right to pass App Store validation.\n             bitcode_llvm_cmdline: \"-triple\\0\\"}, {"sha": "6e1d00d1f6ca5ce21789153bb4248da44de9fd54", "filename": "compiler/rustc_target/src/spec/armv7k_apple_watchos.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/83356b78c4ff3e7d84e977aa6143793545967301/compiler%2Frustc_target%2Fsrc%2Fspec%2Farmv7k_apple_watchos.rs", "raw_url": "https://github.com/rust-lang/rust/raw/83356b78c4ff3e7d84e977aa6143793545967301/compiler%2Frustc_target%2Fsrc%2Fspec%2Farmv7k_apple_watchos.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Farmv7k_apple_watchos.rs?ref=83356b78c4ff3e7d84e977aa6143793545967301", "patch": "@@ -12,6 +12,8 @@ pub fn target() -> Target {\n             features: \"+v7,+vfp4,+neon\".into(),\n             max_atomic_width: Some(64),\n             forces_embed_bitcode: true,\n+            dynamic_linking: false,\n+            position_independent_executables: true,\n             // These arguments are not actually invoked - they just have\n             // to look right to pass App Store validation.\n             bitcode_llvm_cmdline: \"-triple\\0\\"}]}