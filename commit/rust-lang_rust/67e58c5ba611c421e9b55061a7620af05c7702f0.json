{"sha": "67e58c5ba611c421e9b55061a7620af05c7702f0", "node_id": "C_kwDOAAsO6NoAKDY3ZTU4YzViYTYxMWM0MjFlOWI1NTA2MWE3NjIwYWYwNWM3NzAyZjA", "commit": {"author": {"name": "Ddystopia", "email": "alexanderbabak@proton.me", "date": "2023-04-27T13:03:13Z"}, "committer": {"name": "Ddystopia", "email": "alexanderbabak@proton.me", "date": "2023-05-02T15:08:56Z"}, "message": "Add sysroot", "tree": {"sha": "9bf108ff2b02e616be48994d59a75691784dfedb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9bf108ff2b02e616be48994d59a75691784dfedb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/67e58c5ba611c421e9b55061a7620af05c7702f0", "comment_count": 0, "verification": {"verified": false, "reason": "unknown_key", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE83x4qCmEA5TzaAMiEJh17BFTUhIFAmRRJ4gACgkQEJh17BFT\nUhKL6Q/+JCVbIUN8C2j7g4YlSUjiGY6cGfQ3sn3K8AQ0dyqZj5GUTBwFD+tOpyEK\nWsWhG/+7LlV0iuDnVVMFUmaejFCiNkYjd+eONP8x60gKDFBGdE8sDhRy6pB4G5M6\nWBp9+lV1m85L2rHInLdKGFpTNRl1kg0VS06dmE7IUygRSnQT+IA3Ydl4Sv377dyc\n0/zF6S89N112tMDwCPyj9xk0SvrKnogf6FKbiYJWMGPewSOrcSCKtte/Twj/9gck\nOBwmqUEAmHcF8WsCKyT5M07+LmcUUaL7uE0ec5vN5QW5ceui8t/lsVP/J7SipGtr\nFf6WMNkngPsNRX9Ld8tlBx1kK4X0wAw8cO7KZfWmPJjRoGaKCitScdBc5ZLTVYC3\nOHVHqTWoxu5UMIt+w/5wdYQoCqtTLUIoFbFo6+YpQyzICUTg2XPI7ljp2Rs3FCwA\nFFgqQfeCYKF8fI+jkgBxnieoVHAJmjwjeg0ZdGRH6lOATJ/c4x0aLV5OZgIVqarl\ngAN9uLgyFpkLSmQ60pA0EeWKleR93Uik5HREW0bhCxkN3xFD29zMEC0NoV9zosug\nyp6n1E0ZlIXeWEHZqwOhItRigPnp+GknXFZU+j8DoM8pnbnStlrzwtjkxp0PcI//\n94jhAuNW8a13sPEpcQKarAoookftmY+S5vonV5VYzrHakGXVWls=\n=Me+k\n-----END PGP SIGNATURE-----", "payload": "tree 9bf108ff2b02e616be48994d59a75691784dfedb\nparent 396934860c609bbe7d780fd072b77778ba220f44\nauthor Ddystopia <alexanderbabak@proton.me> 1682600593 +0200\ncommitter Ddystopia <alexanderbabak@proton.me> 1683040136 +0200\n\nAdd sysroot\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/67e58c5ba611c421e9b55061a7620af05c7702f0", "html_url": "https://github.com/rust-lang/rust/commit/67e58c5ba611c421e9b55061a7620af05c7702f0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/67e58c5ba611c421e9b55061a7620af05c7702f0/comments", "author": {"login": "Ddystopia", "id": 63151578, "node_id": "MDQ6VXNlcjYzMTUxNTc4", "avatar_url": "https://avatars.githubusercontent.com/u/63151578?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ddystopia", "html_url": "https://github.com/Ddystopia", "followers_url": "https://api.github.com/users/Ddystopia/followers", "following_url": "https://api.github.com/users/Ddystopia/following{/other_user}", "gists_url": "https://api.github.com/users/Ddystopia/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ddystopia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ddystopia/subscriptions", "organizations_url": "https://api.github.com/users/Ddystopia/orgs", "repos_url": "https://api.github.com/users/Ddystopia/repos", "events_url": "https://api.github.com/users/Ddystopia/events{/privacy}", "received_events_url": "https://api.github.com/users/Ddystopia/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Ddystopia", "id": 63151578, "node_id": "MDQ6VXNlcjYzMTUxNTc4", "avatar_url": "https://avatars.githubusercontent.com/u/63151578?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ddystopia", "html_url": "https://github.com/Ddystopia", "followers_url": "https://api.github.com/users/Ddystopia/followers", "following_url": "https://api.github.com/users/Ddystopia/following{/other_user}", "gists_url": "https://api.github.com/users/Ddystopia/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ddystopia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ddystopia/subscriptions", "organizations_url": "https://api.github.com/users/Ddystopia/orgs", "repos_url": "https://api.github.com/users/Ddystopia/repos", "events_url": "https://api.github.com/users/Ddystopia/events{/privacy}", "received_events_url": "https://api.github.com/users/Ddystopia/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "396934860c609bbe7d780fd072b77778ba220f44", "url": "https://api.github.com/repos/rust-lang/rust/commits/396934860c609bbe7d780fd072b77778ba220f44", "html_url": "https://github.com/rust-lang/rust/commit/396934860c609bbe7d780fd072b77778ba220f44"}], "stats": {"total": 11, "additions": 10, "deletions": 1}, "files": [{"sha": "39c290264bb1ae518b28fb748a5486e04e229cc7", "filename": "crates/ide/src/doc_links.rs", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/67e58c5ba611c421e9b55061a7620af05c7702f0/crates%2Fide%2Fsrc%2Fdoc_links.rs", "raw_url": "https://github.com/rust-lang/rust/raw/67e58c5ba611c421e9b55061a7620af05c7702f0/crates%2Fide%2Fsrc%2Fdoc_links.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Fdoc_links.rs?ref=67e58c5ba611c421e9b55061a7620af05c7702f0", "patch": "@@ -481,6 +481,8 @@ fn get_doc_base_urls(\n     let Some(display_name) = krate.display_name(db) else { return Default::default() };\n     let crate_data = &db.crate_graph()[krate.into()];\n     let channel = crate_data.channel.map_or(\"nightly\", ReleaseChannel::as_str);\n+    let sysroot = \"/home/ddystopia/.rustup/toolchains/stable-x86_64-unknown-linux-gnu\";\n+\n     let (web_base, local_base) = match &crate_data.origin {\n         // std and co do not specify `html_root_url` any longer so we gotta handwrite this ourself.\n         // FIXME: Use the toolchains channel instead of nightly\n@@ -490,7 +492,14 @@ fn get_doc_base_urls(\n             | LangCrateOrigin::ProcMacro\n             | LangCrateOrigin::Std\n             | LangCrateOrigin::Test),\n-        ) => (Some(format!(\"https://doc.rust-lang.org/{channel}/{origin}\")), None),\n+        ) => {\n+            let local_url = format!(\"file:///{sysroot}/share/doc/rust/html/{origin}/index.html\");\n+            let local_url = Url::parse(&local_url).ok();\n+            let web_url = format!(\"https://doc.rust-lang.org/{channel}/{origin}\");\n+            println!(\"local_url: {:?}\", local_url.unwrap().to_string());\n+            panic!();\n+            (Some(web_url), local_url)\n+        },\n         CrateOrigin::Lang(_) => return (None, None),\n         CrateOrigin::Rustc { name: _ } => {\n             (Some(format!(\"https://doc.rust-lang.org/{channel}/nightly-rustc/\")), None)"}]}