{"sha": "5dad13cc3bfbf69f470198860ea905d72fc9fbd3", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVkYWQxM2NjM2JmYmY2OWY0NzAxOTg4NjBlYTkwNWQ3MmZjOWZiZDM=", "commit": {"author": {"name": "antoyo", "email": "antoyo@users.noreply.github.com", "date": "2021-08-28T15:34:47Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-08-28T15:34:47Z"}, "message": "Update custom rustc instructions (#73)", "tree": {"sha": "41ad2caeaaf747e5b4c4ee0c842e592b615b5a8b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/41ad2caeaaf747e5b4c4ee0c842e592b615b5a8b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5dad13cc3bfbf69f470198860ea905d72fc9fbd3", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJhKleXCRBK7hj4Ov3rIwAAbPAIAFu9M2IJO5fpyglQGIMjtI6t\nYxbnYnCzL7XVhLHjcEjVYp6rXJGt7YoaHi+Cdmh3vU0qa0gw07JKIlXFcraRLEwC\nqQ/BhOG39O+XCE0Zx1pAsk01QY510Nz7nz7qSDq9klgYx31XqoEi5jpA0aqaoatK\n365wVHHAtq3Q1omVxe0TRGZISXKMcd6NZXvQk2FO1EaiM/JcN68ecycXFs2SMWOl\nCJe13RvbaGlQMydManO3uaIT9RGrjrZriTepJQBCbd1lwm/NKdvl/fD2P0lGXs4u\njr5B7xK1lr6mvCxg+h9Au6v3kZx7eXd7CxCpsNnGIqcMOwV5K1lb5xN/0HS3Y+o=\n=beFU\n-----END PGP SIGNATURE-----\n", "payload": "tree 41ad2caeaaf747e5b4c4ee0c842e592b615b5a8b\nparent 6f50986667debbfc67776304a8ee23fe0158613f\nauthor antoyo <antoyo@users.noreply.github.com> 1630164887 -0400\ncommitter GitHub <noreply@github.com> 1630164887 -0400\n\nUpdate custom rustc instructions (#73)\n\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5dad13cc3bfbf69f470198860ea905d72fc9fbd3", "html_url": "https://github.com/rust-lang/rust/commit/5dad13cc3bfbf69f470198860ea905d72fc9fbd3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5dad13cc3bfbf69f470198860ea905d72fc9fbd3/comments", "author": {"login": "antoyo", "id": 584972, "node_id": "MDQ6VXNlcjU4NDk3Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/584972?v=4", "gravatar_id": "", "url": "https://api.github.com/users/antoyo", "html_url": "https://github.com/antoyo", "followers_url": "https://api.github.com/users/antoyo/followers", "following_url": "https://api.github.com/users/antoyo/following{/other_user}", "gists_url": "https://api.github.com/users/antoyo/gists{/gist_id}", "starred_url": "https://api.github.com/users/antoyo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/antoyo/subscriptions", "organizations_url": "https://api.github.com/users/antoyo/orgs", "repos_url": "https://api.github.com/users/antoyo/repos", "events_url": "https://api.github.com/users/antoyo/events{/privacy}", "received_events_url": "https://api.github.com/users/antoyo/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6f50986667debbfc67776304a8ee23fe0158613f", "url": "https://api.github.com/repos/rust-lang/rust/commits/6f50986667debbfc67776304a8ee23fe0158613f", "html_url": "https://github.com/rust-lang/rust/commit/6f50986667debbfc67776304a8ee23fe0158613f"}], "stats": {"total": 9, "additions": 6, "deletions": 3}, "files": [{"sha": "98bed8ef387ff4fee2f2c513f89f4db1655eeec3", "filename": ".github/workflows/main.yml", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5dad13cc3bfbf69f470198860ea905d72fc9fbd3/.github%2Fworkflows%2Fmain.yml", "raw_url": "https://github.com/rust-lang/rust/raw/5dad13cc3bfbf69f470198860ea905d72fc9fbd3/.github%2Fworkflows%2Fmain.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Fmain.yml?ref=5dad13cc3bfbf69f470198860ea905d72fc9fbd3", "patch": "@@ -31,7 +31,9 @@ jobs:\n           ln gcc-build/libgccjit.so gcc-build/libgccjit.so.0\n \n     - name: Set LIBRARY_PATH\n-      run: echo \"LIBRARY_PATH=$(cat gcc_path)\" >> $GITHUB_ENV\n+      run: |\n+        echo \"LIBRARY_PATH=$(cat gcc_path)\" >> $GITHUB_ENV\n+        echo \"LD_LIBRARY_PATH=$(cat gcc_path)\" >> $GITHUB_ENV\n \n     # https://github.com/actions/cache/issues/133\n     - name: Fixup owner of ~/.cargo/\n@@ -66,6 +68,7 @@ jobs:\n       run: |\n         ./prepare_build.sh\n         ./build.sh\n+        cargo test\n         ./clean_all.sh\n \n     - name: Prepare dependencies"}, {"sha": "573ed83e5356620c256199b7d1884b45733e12a2", "filename": ".gitignore", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/5dad13cc3bfbf69f470198860ea905d72fc9fbd3/.gitignore", "raw_url": "https://github.com/rust-lang/rust/raw/5dad13cc3bfbf69f470198860ea905d72fc9fbd3/.gitignore", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.gitignore?ref=5dad13cc3bfbf69f470198860ea905d72fc9fbd3", "patch": "@@ -15,3 +15,4 @@ gimple*\n *asm\n res\n test-backend\n+gcc_path"}, {"sha": "96a6c3a04145e36132447343e46c3ede16c77a79", "filename": "Readme.md", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/5dad13cc3bfbf69f470198860ea905d72fc9fbd3/Readme.md", "raw_url": "https://github.com/rust-lang/rust/raw/5dad13cc3bfbf69f470198860ea905d72fc9fbd3/Readme.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Readme.md?ref=5dad13cc3bfbf69f470198860ea905d72fc9fbd3", "patch": "@@ -113,6 +113,5 @@ p loc->m_line\n \n ### How to use a custom-build rustc\n \n- * Build the stage1 compiler (`rustup toolchain link debug-current stage2 build/x86_64-unknown-linux-gnu/stage1`).\n+ * Build the stage2 compiler (`rustup toolchain link debug-current build/x86_64-unknown-linux-gnu/stage2`).\n  * Clean and rebuild the codegen with `debug-current` in the file `rust-toolchain`.\n- * Add `~/.rustup/toolchains/debug-current/lib/rustlib/x86_64-unknown-linux-gnu/lib` to `LD_LIBRARY_PATH`."}, {"sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391", "filename": "gcc_path", "status": "removed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/6f50986667debbfc67776304a8ee23fe0158613f/gcc_path", "raw_url": "https://github.com/rust-lang/rust/raw/6f50986667debbfc67776304a8ee23fe0158613f/gcc_path", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/gcc_path?ref=6f50986667debbfc67776304a8ee23fe0158613f"}]}