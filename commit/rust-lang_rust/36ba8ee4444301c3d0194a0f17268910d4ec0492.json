{"sha": "36ba8ee4444301c3d0194a0f17268910d4ec0492", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM2YmE4ZWU0NDQ0MzAxYzNkMDE5NGEwZjE3MjY4OTEwZDRlYzA0OTI=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2017-08-12T11:15:01Z"}, "committer": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2017-08-12T11:53:15Z"}, "message": "Fix `-Z hir-stats` always panics (fix #43232).", "tree": {"sha": "58ee5a07ed3d109abe48030870d8771738ab1477", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/58ee5a07ed3d109abe48030870d8771738ab1477"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/36ba8ee4444301c3d0194a0f17268910d4ec0492", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIcBAABCAAGBQJZjuwsAAoJEP72yAUdDgE8PS4P/0wttXx+I97lxI0C9HshaaI8\nsxGhL0MTZYGRCm7sqhmyxikugZXY7EEFwSQ54EqWvqE2hsC5oCtDIRa5pY/J4IfL\nyW8ClKsqb4nnk4S985xTJI5r/JTgNl3pw856nQh+rxM4RGVGym5OQesdXr+8EpxY\nIx1eoAO3Z7dQH7OOzy827LYhOAhojzhe2AmRIwSkvNk0fbch+XHKNQ2OPNIiyrUu\n4IuA/+/7h6QbcymL9ZOr+jncLlqkoJYsaWb+6WdrJPRqR+KNn6BHhCTu8WmepgNF\nV9g1fIDqGE/G3VIOCm4SLsyTaFhQHmkuSMfPTEnxLgAqQqvtjLR7oyTwC2F8h5nC\nsOfiUAYYq5L9TFND6Wh/nc4fZUKHg2zSfrtqLiU+hTXkq9BXm4Jvo4J52QTKHCDl\ncAN1mWlSRt9UYaYRAO+xPEdlLLl19+QuvjpSzMyPU+5iqBDx99aOgUrLf2cSwtXh\naGspm/N99RFDzNbf9b4T/Cl//Q2OXxMNsrBd0Gs8N7HLoUQ6Za1c7LjUJHGG8Zo2\n74LYKi3FDmNe71SQcLPmuJJ3DvZay7D4dCDW9b+XpezzT+CblEEfImV9gNTKqHEX\n4RWY6WAeYtFc7WgfmLg5ka09y4Q630vqu4fxGFmjVH2w2NfxTy9hbTFlWLfOVlF2\n8IOPHjfn733O71QErv9V\n=csxf\n-----END PGP SIGNATURE-----", "payload": "tree 58ee5a07ed3d109abe48030870d8771738ab1477\nparent 2fa5340318111d562af2ef4897c75916731d55a2\nauthor kennytm <kennytm@gmail.com> 1502536501 +0800\ncommitter kennytm <kennytm@gmail.com> 1502538795 +0800\n\nFix `-Z hir-stats` always panics (fix #43232).\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/36ba8ee4444301c3d0194a0f17268910d4ec0492", "html_url": "https://github.com/rust-lang/rust/commit/36ba8ee4444301c3d0194a0f17268910d4ec0492", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/36ba8ee4444301c3d0194a0f17268910d4ec0492/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2fa5340318111d562af2ef4897c75916731d55a2", "url": "https://api.github.com/repos/rust-lang/rust/commits/2fa5340318111d562af2ef4897c75916731d55a2", "html_url": "https://github.com/rust-lang/rust/commit/2fa5340318111d562af2ef4897c75916731d55a2"}], "stats": {"total": 5, "additions": 5, "deletions": 0}, "files": [{"sha": "c6bc045f0de3bf16720bfa3effeaf48bcb1afa8a", "filename": "src/librustc_passes/hir_stats.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/36ba8ee4444301c3d0194a0f17268910d4ec0492/src%2Flibrustc_passes%2Fhir_stats.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36ba8ee4444301c3d0194a0f17268910d4ec0492/src%2Flibrustc_passes%2Fhir_stats.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_passes%2Fhir_stats.rs?ref=36ba8ee4444301c3d0194a0f17268910d4ec0492", "patch": "@@ -125,6 +125,11 @@ impl<'v> hir_visit::Visitor<'v> for StatCollector<'v> {\n         self.visit_impl_item(nested_impl_item)\n     }\n \n+    fn visit_nested_body(&mut self, body_id: hir::BodyId) {\n+        let nested_body = self.krate.unwrap().body(body_id);\n+        self.visit_body(nested_body)\n+    }\n+\n     fn visit_item(&mut self, i: &'v hir::Item) {\n         self.record(\"Item\", Id::Node(i.id), i);\n         hir_visit::walk_item(self, i)"}]}