{"sha": "16c2b39e1c5029913daf7b780c2cbea7477e077c", "node_id": "C_kwDOAAsO6NoAKDE2YzJiMzllMWM1MDI5OTEzZGFmN2I3ODBjMmNiZWE3NDc3ZTA3N2M", "commit": {"author": {"name": "Thom Chiovoloni", "email": "chiovolonit@gmail.com", "date": "2022-02-07T01:16:47Z"}, "committer": {"name": "Thom Chiovoloni", "email": "chiovolonit@gmail.com", "date": "2022-05-11T08:29:56Z"}, "message": "Add a test that `#[used]` makes it through to the linker on macos", "tree": {"sha": "6625871d24a1e642a7df731f5a0ddb61f3c4f485", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6625871d24a1e642a7df731f5a0ddb61f3c4f485"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/16c2b39e1c5029913daf7b780c2cbea7477e077c", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEh0+qV0hta6XFe2D54u/UMJ4RyKgFAmJ7dAQACgkQ4u/UMJ4R\nyKiFxg//XpknRFsfvErKrnLEktPwBFjKH6GNtws53yngV+kOk7kdDY9M9yu+gfgv\n0+yZLua0WzQ3VAr5jm5fcr5LFTL0zkeoUlp3IBbx5op1rHQiQ8RLQdvd+9UKKwrE\nTRzIVYE6wcjdXspNhpdDf5MaOjmFDKiHV86cwkh+Ccd2Z/pDh3I2shkDBfDTBGYZ\ncrQUzZASgaHYmUOIriAaCc9x336CDZyQ23JT6o7tN+Hlu7+aXnf+ggqSzwirwGTh\nknuBuMinL81861e8UmQeY1VDSKdbL8DdtbJga4DWWl0lrcbMHccGtq/h09KXthtj\nMe6XjEDPzJwTIgfZqB7m7ifHQhF5hcQ83bRRekBLrb6zz2luU00YOoqOFcK0wIqu\negcCYgkQORzNT49N2i5eMFRqejckV8ytGMbuzPmhB8sYNy7Q7ZunyhgskLryAuBB\nR/uQtNkGFX5tFbeBvgW1C7+7rECU4AGoK8Nie52ne4KtDdOIHPe5ANC2TPb2AbLN\n+0pNzB1EO6B/gpSYGY3cNTj5wqlObOlPkzAMtPFBB/sNXAzqOmrVY4BMZkmBiKd3\nG2qovqR3+r7Fjse4ttTha6LeVC6YfFvrp8vfLhtxiCwHS6dVLups+QQwQEKtoH0g\nUmJIpN3ug49HTH6sZy2PQVJTQ/HXUaAFFMAjbJTX0cizEm7qbkQ=\n=Wmzb\n-----END PGP SIGNATURE-----", "payload": "tree 6625871d24a1e642a7df731f5a0ddb61f3c4f485\nparent 54133cfcf49c68886a7cd8046007ea14e3d3944d\nauthor Thom Chiovoloni <chiovolonit@gmail.com> 1644196607 -0800\ncommitter Thom Chiovoloni <chiovolonit@gmail.com> 1652257796 -0700\n\nAdd a test that `#[used]` makes it through to the linker on macos\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/16c2b39e1c5029913daf7b780c2cbea7477e077c", "html_url": "https://github.com/rust-lang/rust/commit/16c2b39e1c5029913daf7b780c2cbea7477e077c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/16c2b39e1c5029913daf7b780c2cbea7477e077c/comments", "author": {"login": "thomcc", "id": 860665, "node_id": "MDQ6VXNlcjg2MDY2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/860665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thomcc", "html_url": "https://github.com/thomcc", "followers_url": "https://api.github.com/users/thomcc/followers", "following_url": "https://api.github.com/users/thomcc/following{/other_user}", "gists_url": "https://api.github.com/users/thomcc/gists{/gist_id}", "starred_url": "https://api.github.com/users/thomcc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thomcc/subscriptions", "organizations_url": "https://api.github.com/users/thomcc/orgs", "repos_url": "https://api.github.com/users/thomcc/repos", "events_url": "https://api.github.com/users/thomcc/events{/privacy}", "received_events_url": "https://api.github.com/users/thomcc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "thomcc", "id": 860665, "node_id": "MDQ6VXNlcjg2MDY2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/860665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thomcc", "html_url": "https://github.com/thomcc", "followers_url": "https://api.github.com/users/thomcc/followers", "following_url": "https://api.github.com/users/thomcc/following{/other_user}", "gists_url": "https://api.github.com/users/thomcc/gists{/gist_id}", "starred_url": "https://api.github.com/users/thomcc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thomcc/subscriptions", "organizations_url": "https://api.github.com/users/thomcc/orgs", "repos_url": "https://api.github.com/users/thomcc/repos", "events_url": "https://api.github.com/users/thomcc/events{/privacy}", "received_events_url": "https://api.github.com/users/thomcc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "54133cfcf49c68886a7cd8046007ea14e3d3944d", "url": "https://api.github.com/repos/rust-lang/rust/commits/54133cfcf49c68886a7cd8046007ea14e3d3944d", "html_url": "https://github.com/rust-lang/rust/commit/54133cfcf49c68886a7cd8046007ea14e3d3944d"}], "stats": {"total": 15, "additions": 15, "deletions": 0}, "files": [{"sha": "4828d9c8aad2c0b18fa59239817cffb07533f019", "filename": "src/test/run-make-fulldeps/used-cdylib-macos/Makefile", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/16c2b39e1c5029913daf7b780c2cbea7477e077c/src%2Ftest%2Frun-make-fulldeps%2Fused-cdylib-macos%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/16c2b39e1c5029913daf7b780c2cbea7477e077c/src%2Ftest%2Frun-make-fulldeps%2Fused-cdylib-macos%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Fused-cdylib-macos%2FMakefile?ref=16c2b39e1c5029913daf7b780c2cbea7477e077c", "patch": "@@ -0,0 +1,11 @@\n+-include ../tools.mk\n+\n+# only-macos\n+#\n+# This checks that `#[used]` passes through to the linker on\n+# darwin. This is subject to change in the future, see\n+# https://github.com/rust-lang/rust/pull/93718 for discussion\n+\n+all:\n+\t$(RUSTC) -Copt-level=3 dylib_used.rs\n+\tnm $(TMPDIR)/libdylib_used.dylib | $(CGREP) VERY_IMPORTANT_SYMBOL"}, {"sha": "85f0ff92fe7301be3469e3f18aa2067d13e59032", "filename": "src/test/run-make-fulldeps/used-cdylib-macos/dylib_used.rs", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/16c2b39e1c5029913daf7b780c2cbea7477e077c/src%2Ftest%2Frun-make-fulldeps%2Fused-cdylib-macos%2Fdylib_used.rs", "raw_url": "https://github.com/rust-lang/rust/raw/16c2b39e1c5029913daf7b780c2cbea7477e077c/src%2Ftest%2Frun-make-fulldeps%2Fused-cdylib-macos%2Fdylib_used.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Fused-cdylib-macos%2Fdylib_used.rs?ref=16c2b39e1c5029913daf7b780c2cbea7477e077c", "patch": "@@ -0,0 +1,4 @@\n+#![crate_type = \"cdylib\"]\n+\n+#[used]\n+static VERY_IMPORTANT_SYMBOL: u32 = 12345;"}]}