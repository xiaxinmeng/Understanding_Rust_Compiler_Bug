{"sha": "86141797dbeb406a6b0a7c6442cc715d3f7bcc75", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg2MTQxNzk3ZGJlYjQwNmE2YjBhN2M2NDQyY2M3MTVkM2Y3YmNjNzU=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2018-08-25T19:19:38Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2018-08-26T10:08:30Z"}, "message": "Remove static and const initialization from documentation", "tree": {"sha": "0d8f8d39eab816c858c671cff8a5a3ec7d9555f1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0d8f8d39eab816c858c671cff8a5a3ec7d9555f1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/86141797dbeb406a6b0a7c6442cc715d3f7bcc75", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/86141797dbeb406a6b0a7c6442cc715d3f7bcc75", "html_url": "https://github.com/rust-lang/rust/commit/86141797dbeb406a6b0a7c6442cc715d3f7bcc75", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/86141797dbeb406a6b0a7c6442cc715d3f7bcc75/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a00706a3b93500f3a11eb6a5d0e5a6fed228c248", "url": "https://api.github.com/repos/rust-lang/rust/commits/a00706a3b93500f3a11eb6a5d0e5a6fed228c248", "html_url": "https://github.com/rust-lang/rust/commit/a00706a3b93500f3a11eb6a5d0e5a6fed228c248"}], "stats": {"total": 27, "additions": 7, "deletions": 20}, "files": [{"sha": "d61855011d36b153e5bf8be2f3b44f9e3b35ad4b", "filename": "src/librustdoc/html/render.rs", "status": "modified", "additions": 4, "deletions": 17, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/86141797dbeb406a6b0a7c6442cc715d3f7bcc75/src%2Flibrustdoc%2Fhtml%2Frender.rs", "raw_url": "https://github.com/rust-lang/rust/raw/86141797dbeb406a6b0a7c6442cc715d3f7bcc75/src%2Flibrustdoc%2Fhtml%2Frender.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender.rs?ref=86141797dbeb406a6b0a7c6442cc715d3f7bcc75", "patch": "@@ -2579,27 +2579,15 @@ fn short_stability(item: &clean::Item, cx: &Context, show_reason: bool) -> Vec<S\n     stability\n }\n \n-struct Initializer<'a>(&'a str);\n-\n-impl<'a> fmt::Display for Initializer<'a> {\n-    fn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result {\n-        let Initializer(s) = *self;\n-        if s.is_empty() { return Ok(()); }\n-        write!(f, \"<code> = </code>\")?;\n-        write!(f, \"<code>{}</code>\", Escape(s))\n-    }\n-}\n-\n fn item_constant(w: &mut fmt::Formatter, cx: &Context, it: &clean::Item,\n                  c: &clean::Constant) -> fmt::Result {\n     write!(w, \"<pre class='rust const'>\")?;\n     render_attributes(w, it)?;\n     write!(w, \"{vis}const \\\n-               {name}: {typ}{init}</pre>\",\n+               {name}: {typ}</pre>\",\n            vis = VisSpace(&it.visibility),\n            name = it.name.as_ref().unwrap(),\n-           typ = c.type_,\n-           init = Initializer(&c.expr))?;\n+           typ = c.type_)?;\n     document(w, cx, it)\n }\n \n@@ -2608,12 +2596,11 @@ fn item_static(w: &mut fmt::Formatter, cx: &Context, it: &clean::Item,\n     write!(w, \"<pre class='rust static'>\")?;\n     render_attributes(w, it)?;\n     write!(w, \"{vis}static {mutability}\\\n-               {name}: {typ}{init}</pre>\",\n+               {name}: {typ}</pre>\",\n            vis = VisSpace(&it.visibility),\n            mutability = MutableSpace(s.mutability),\n            name = it.name.as_ref().unwrap(),\n-           typ = s.type_,\n-           init = Initializer(&s.expr))?;\n+           typ = s.type_)?;\n     document(w, cx, it)\n }\n "}, {"sha": "4594eb95ea18e2abc23202a596b016dde16afbaf", "filename": "src/test/rustdoc/escape-rust-expr.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/86141797dbeb406a6b0a7c6442cc715d3f7bcc75/src%2Ftest%2Frustdoc%2Fescape-rust-expr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/86141797dbeb406a6b0a7c6442cc715d3f7bcc75/src%2Ftest%2Frustdoc%2Fescape-rust-expr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fescape-rust-expr.rs?ref=86141797dbeb406a6b0a7c6442cc715d3f7bcc75", "patch": "@@ -11,5 +11,5 @@\n // Test that we HTML-escape Rust expressions, where HTML special chars\n // can occur, and we know it's definitely not markup.\n \n-// @has escape_rust_expr/constant.CONST_S.html '//pre[@class=\"rust const\"]' '\"<script>\"'\n+// @!has escape_rust_expr/constant.CONST_S.html '//pre[@class=\"rust const\"]' '\"<script>\"'\n pub const CONST_S: &'static str = \"<script>\";"}, {"sha": "538de228424ae11fb9a28aaca34130c70420b5ea", "filename": "src/test/rustdoc/issue-33302.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/86141797dbeb406a6b0a7c6442cc715d3f7bcc75/src%2Ftest%2Frustdoc%2Fissue-33302.rs", "raw_url": "https://github.com/rust-lang/rust/raw/86141797dbeb406a6b0a7c6442cc715d3f7bcc75/src%2Ftest%2Frustdoc%2Fissue-33302.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fissue-33302.rs?ref=86141797dbeb406a6b0a7c6442cc715d3f7bcc75", "patch": "@@ -17,10 +17,10 @@ macro_rules! make {\n         pub struct S;\n \n         // @has issue_33302/constant.CST.html \\\n-        //        '//pre[@class=\"rust const\"]' 'pub const CST: i32 = 4 * 4'\n+        //        '//pre[@class=\"rust const\"]' 'pub const CST: i32'\n         pub const CST: i32 = ($n * $n);\n         // @has issue_33302/static.ST.html \\\n-        //        '//pre[@class=\"rust static\"]' 'pub static ST: i32 = 4 * 4'\n+        //        '//pre[@class=\"rust static\"]' 'pub static ST: i32'\n         pub static ST: i32 = ($n * $n);\n \n         pub trait T<X> {"}]}