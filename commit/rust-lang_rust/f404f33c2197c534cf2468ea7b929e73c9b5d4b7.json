{"sha": "f404f33c2197c534cf2468ea7b929e73c9b5d4b7", "node_id": "C_kwDOAAsO6NoAKGY0MDRmMzNjMjE5N2M1MzRjZjI0NjhlYTdiOTI5ZTczYzliNWQ0Yjc", "commit": {"author": {"name": "Andy Wang", "email": "cbeuw.andy@gmail.com", "date": "2023-03-20T15:21:43Z"}, "committer": {"name": "Andy Wang", "email": "cbeuw.andy@gmail.com", "date": "2023-03-20T15:27:44Z"}, "message": "Use builtin_index instead of match\n\nCo-authored-by: Oli Scherer <github35764891676564198441@oli-obk.de>", "tree": {"sha": "f831282c8a56f7ae0f6d5817c57851072e2dad74", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f831282c8a56f7ae0f6d5817c57851072e2dad74"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f404f33c2197c534cf2468ea7b929e73c9b5d4b7", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCAAdFiEE7dcbcBMl24/h63ldGBtJ+fOPM3QFAmQYe3EACgkQGBtJ+fOP\nM3R5BAwAoU1LVoME09qz47tLJ9FvgyKxKrypP5S6bRZbLT3UVj+JLyo3o9sqg9Ma\nxrQNbZtgHgV6FxL97HCiE9d6JBXBwvq6RbDd2oohFz0sYS9xjeLQ5leY/s8JQ4vi\n4ixfykjdZ7ziw8YoCNRJ07qFWWv3zjaMXbuwEicbCqoGca49mJiOrgB/ESPyh/RZ\nxXAg1aX2l02jzda2DIcLbCkcM0Oyi6EzNioKcFcyYedVJVeUSgauHk/csVxc6o3/\nggmUNksFfD0AwftVL0OyAQ9I8sbFWbd7bR3VYLFw9DvW5tuZXDc48VcV6xnxTV+B\n6Ct/M5T7QVEyNSgsdsJl2T8AjFYPADTv3tuWRD5q5BSJK3UfEwDqrB/2d8MCOMJR\nxYPKe6S5aZ1Ma1Kh76Ufk1NhhdPHgRva/hxKHIE6xz5s7eYKhB9g8+4+v521EmIf\nfaOU9BqVq7rWklcEDQXy1D1izP71K3u1pY69VhCRvJg1RcoF9EJ9EQPdJK4CdEA2\nN7SWOctT\n=JGGn\n-----END PGP SIGNATURE-----", "payload": "tree f831282c8a56f7ae0f6d5817c57851072e2dad74\nparent e24f5ac56b001d205618590b0519137abbc65580\nauthor Andy Wang <cbeuw.andy@gmail.com> 1679325703 +0100\ncommitter Andy Wang <cbeuw.andy@gmail.com> 1679326064 +0100\n\nUse builtin_index instead of match\n\nCo-authored-by: Oli Scherer <github35764891676564198441@oli-obk.de>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f404f33c2197c534cf2468ea7b929e73c9b5d4b7", "html_url": "https://github.com/rust-lang/rust/commit/f404f33c2197c534cf2468ea7b929e73c9b5d4b7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f404f33c2197c534cf2468ea7b929e73c9b5d4b7/comments", "author": {"login": "cbeuw", "id": 7034308, "node_id": "MDQ6VXNlcjcwMzQzMDg=", "avatar_url": "https://avatars.githubusercontent.com/u/7034308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbeuw", "html_url": "https://github.com/cbeuw", "followers_url": "https://api.github.com/users/cbeuw/followers", "following_url": "https://api.github.com/users/cbeuw/following{/other_user}", "gists_url": "https://api.github.com/users/cbeuw/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbeuw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbeuw/subscriptions", "organizations_url": "https://api.github.com/users/cbeuw/orgs", "repos_url": "https://api.github.com/users/cbeuw/repos", "events_url": "https://api.github.com/users/cbeuw/events{/privacy}", "received_events_url": "https://api.github.com/users/cbeuw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cbeuw", "id": 7034308, "node_id": "MDQ6VXNlcjcwMzQzMDg=", "avatar_url": "https://avatars.githubusercontent.com/u/7034308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbeuw", "html_url": "https://github.com/cbeuw", "followers_url": "https://api.github.com/users/cbeuw/followers", "following_url": "https://api.github.com/users/cbeuw/following{/other_user}", "gists_url": "https://api.github.com/users/cbeuw/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbeuw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbeuw/subscriptions", "organizations_url": "https://api.github.com/users/cbeuw/orgs", "repos_url": "https://api.github.com/users/cbeuw/repos", "events_url": "https://api.github.com/users/cbeuw/events{/privacy}", "received_events_url": "https://api.github.com/users/cbeuw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e24f5ac56b001d205618590b0519137abbc65580", "url": "https://api.github.com/repos/rust-lang/rust/commits/e24f5ac56b001d205618590b0519137abbc65580", "html_url": "https://github.com/rust-lang/rust/commit/e24f5ac56b001d205618590b0519137abbc65580"}], "stats": {"total": 7, "additions": 2, "deletions": 5}, "files": [{"sha": "adbd37a7cd9502e0a3877cae4d0abc0aa9d401a2", "filename": "compiler/rustc_mir_build/src/build/custom/parse/instruction.rs", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/f404f33c2197c534cf2468ea7b929e73c9b5d4b7/compiler%2Frustc_mir_build%2Fsrc%2Fbuild%2Fcustom%2Fparse%2Finstruction.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f404f33c2197c534cf2468ea7b929e73c9b5d4b7/compiler%2Frustc_mir_build%2Fsrc%2Fbuild%2Fcustom%2Fparse%2Finstruction.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir_build%2Fsrc%2Fbuild%2Fcustom%2Fparse%2Finstruction.rs?ref=f404f33c2197c534cf2468ea7b929e73c9b5d4b7", "patch": "@@ -173,12 +173,9 @@ impl<'tcx, 'body> ParseCtxt<'tcx, 'body> {\n                 )\n             ),\n             ExprKind::Array { fields } => {\n-                let elem_ty = match expr.ty.kind() {\n-                    ty::Array(ty, ..) => ty,\n-                    _                 => unreachable!(\"ty is array\"),\n-                };\n+                let elem_ty = expr.ty.builtin_index().expect(\"ty must be an array\");\n                 Ok(Rvalue::Aggregate(\n-                    Box::new(AggregateKind::Array(*elem_ty)),\n+                    Box::new(AggregateKind::Array(elem_ty)),\n                     fields.iter().map(|e| self.parse_operand(*e)).collect::<Result<_, _>>()?\n                 ))\n             },"}]}