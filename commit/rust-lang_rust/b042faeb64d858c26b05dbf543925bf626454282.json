{"sha": "b042faeb64d858c26b05dbf543925bf626454282", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIwNDJmYWViNjRkODU4YzI2YjA1ZGJmNTQzOTI1YmY2MjY0NTQyODI=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2019-07-08T10:47:02Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2019-07-08T10:47:02Z"}, "message": "simplify", "tree": {"sha": "105a681c9dd3ce924373a16f7d124308826a500a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/105a681c9dd3ce924373a16f7d124308826a500a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b042faeb64d858c26b05dbf543925bf626454282", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b042faeb64d858c26b05dbf543925bf626454282", "html_url": "https://github.com/rust-lang/rust/commit/b042faeb64d858c26b05dbf543925bf626454282", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b042faeb64d858c26b05dbf543925bf626454282/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "227bc0b6d478564c45f49cb47dac963d9c37a528", "url": "https://api.github.com/repos/rust-lang/rust/commits/227bc0b6d478564c45f49cb47dac963d9c37a528", "html_url": "https://github.com/rust-lang/rust/commit/227bc0b6d478564c45f49cb47dac963d9c37a528"}], "stats": {"total": 43, "additions": 20, "deletions": 23}, "files": [{"sha": "d0bdc94aa6f365242dbcd06e6c33c6502eb648ae", "filename": "crates/ra_lsp_server/src/conv.rs", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/b042faeb64d858c26b05dbf543925bf626454282/crates%2Fra_lsp_server%2Fsrc%2Fconv.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b042faeb64d858c26b05dbf543925bf626454282/crates%2Fra_lsp_server%2Fsrc%2Fconv.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_lsp_server%2Fsrc%2Fconv.rs?ref=b042faeb64d858c26b05dbf543925bf626454282", "patch": "@@ -412,6 +412,19 @@ impl TryConvWith for (FileId, RangeInfo<NavigationTarget>) {\n     }\n }\n \n+impl TryConvWith for (FileId, RangeInfo<Vec<NavigationTarget>>) {\n+    type Ctx = WorldSnapshot;\n+    type Output = req::GotoDefinitionResponse;\n+    fn try_conv_with(self, world: &WorldSnapshot) -> Result<req::GotoTypeDefinitionResponse> {\n+        let (file_id, RangeInfo { range, info: navs }) = self;\n+        let links = navs\n+            .into_iter()\n+            .map(|nav| (file_id, RangeInfo::new(range, nav)))\n+            .try_conv_with_to_vec(world)?;\n+        Ok(links.into())\n+    }\n+}\n+\n pub fn to_location(\n     file_id: FileId,\n     range: TextRange,"}, {"sha": "ab9ed5080615c8116fa03991526cfdea7ab70c56", "filename": "crates/ra_lsp_server/src/main_loop/handlers.rs", "status": "modified", "additions": 7, "deletions": 23, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/b042faeb64d858c26b05dbf543925bf626454282/crates%2Fra_lsp_server%2Fsrc%2Fmain_loop%2Fhandlers.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b042faeb64d858c26b05dbf543925bf626454282/crates%2Fra_lsp_server%2Fsrc%2Fmain_loop%2Fhandlers.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_lsp_server%2Fsrc%2Fmain_loop%2Fhandlers.rs?ref=b042faeb64d858c26b05dbf543925bf626454282", "patch": "@@ -9,8 +9,7 @@ use lsp_types::{\n     TextDocumentIdentifier, TextEdit, WorkspaceEdit,\n };\n use ra_ide_api::{\n-    AssistId, Cancelable, FileId, FilePosition, FileRange, FoldKind, Query, RangeInfo,\n-    RunnableKind, Severity,\n+    AssistId, Cancelable, FileId, FilePosition, FileRange, FoldKind, Query, RunnableKind, Severity,\n };\n use ra_prof::profile;\n use ra_syntax::{AstNode, SyntaxKind, TextRange, TextUnit};\n@@ -267,13 +266,8 @@ pub fn handle_goto_definition(\n         None => return Ok(None),\n         Some(it) => it,\n     };\n-    let nav_range = nav_info.range;\n-    let res = nav_info\n-        .info\n-        .into_iter()\n-        .map(|nav| (position.file_id, RangeInfo::new(nav_range, nav)))\n-        .try_conv_with_to_vec(&world)?;\n-    Ok(Some(res.into()))\n+    let res = (position.file_id, nav_info).try_conv_with(&world)?;\n+    Ok(Some(res))\n }\n \n pub fn handle_goto_implementation(\n@@ -285,13 +279,8 @@ pub fn handle_goto_implementation(\n         None => return Ok(None),\n         Some(it) => it,\n     };\n-    let nav_range = nav_info.range;\n-    let res = nav_info\n-        .info\n-        .into_iter()\n-        .map(|nav| (position.file_id, RangeInfo::new(nav_range, nav)))\n-        .try_conv_with_to_vec(&world)?;\n-    Ok(Some(res.into()))\n+    let res = (position.file_id, nav_info).try_conv_with(&world)?;\n+    Ok(Some(res))\n }\n \n pub fn handle_goto_type_definition(\n@@ -303,13 +292,8 @@ pub fn handle_goto_type_definition(\n         None => return Ok(None),\n         Some(it) => it,\n     };\n-    let nav_range = nav_info.range;\n-    let res = nav_info\n-        .info\n-        .into_iter()\n-        .map(|nav| (position.file_id, RangeInfo::new(nav_range, nav)))\n-        .try_conv_with_to_vec(&world)?;\n-    Ok(Some(res.into()))\n+    let res = (position.file_id, nav_info).try_conv_with(&world)?;\n+    Ok(Some(res))\n }\n \n pub fn handle_parent_module("}]}