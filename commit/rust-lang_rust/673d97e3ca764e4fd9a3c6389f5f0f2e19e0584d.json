{"sha": "673d97e3ca764e4fd9a3c6389f5f0f2e19e0584d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY3M2Q5N2UzY2E3NjRlNGZkOWEzYzYzODlmNWYwZjJlMTllMDU4NGQ=", "commit": {"author": {"name": "David Wood", "email": "david@davidtw.co", "date": "2018-01-27T20:15:18Z"}, "committer": {"name": "David Wood", "email": "david@davidtw.co", "date": "2018-02-14T18:16:53Z"}, "message": "Added tests for #47703", "tree": {"sha": "d301d7f8d58d5202f7a3fa8e9ec49f6838a7dc1c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d301d7f8d58d5202f7a3fa8e9ec49f6838a7dc1c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/673d97e3ca764e4fd9a3c6389f5f0f2e19e0584d", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEWwgxPGhT5b/6kagXAXYLT59T8VQFAlqEfRUACgkQAXYLT59T\n8VQIUQ/8C+saJgbT+ytgNm1q7zaHbJICpAis2XDrmq4O24SUgtfPe5iOzQREU5yo\ncig/3WMKxT2UEBBAnxx2ooj12Zb1UQZ5K2csDbK3xwin4abjhQkOMoQlOnA6FbHw\nFa3D9ayVFauifoXIfyM5GvE1ca1yc4yOs+d7TPQTirNEmTUM/tE2Yf2wT9/BJzK3\nf+cZQbqaddkmc1YJ0m/M8roCB1raSYxlxExeCF8FjdvEuelUAz4LvmeMUyzUqIe8\npEff8qwuwyrtA0p/pEc6UCVxuWRmfvapwlbkdIr61mQB650NxM2asilS3i9HraDQ\n4jzWAVo33HvukFq4HbZT4r5R3H3bTkkp7H4XD4nP6meGJZSrALEZfO+3L6KUhBeU\nXvOAJFiwdZc/P4Qt7sX8wgj62I2lE5FFOBp72NuC2onYIg7pTtqXHOLJVesAhkhX\n+dSeVV+XNQBOc90Z74VEzHvGrpPXJDwvx7wtMHFosWAexv8jaEtZCavt/IhPv11h\ncbVmyud2hn028XTbuGkq4If79cokjxZ5zCp+0bx7/4HAd7cBICl3hk/Y0/y2HdCR\n3wa0eP94xEdF/nwi4t6Fkc3c7dRLce1ZadcbgZiTHF9cFrptEprtrAUuhq7+Wiax\nys/KJh9QnPBGAHpYdQ+pcckZflJu5L8VegbZWXB74i+bYalQVV4=\n=7ktG\n-----END PGP SIGNATURE-----", "payload": "tree d301d7f8d58d5202f7a3fa8e9ec49f6838a7dc1c\nparent 4d2d3fc5dadf894a8ad709a5860a549f2c0b1032\nauthor David Wood <david@davidtw.co> 1517084118 +0000\ncommitter David Wood <david@davidtw.co> 1518632213 +0000\n\nAdded tests for #47703\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/673d97e3ca764e4fd9a3c6389f5f0f2e19e0584d", "html_url": "https://github.com/rust-lang/rust/commit/673d97e3ca764e4fd9a3c6389f5f0f2e19e0584d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/673d97e3ca764e4fd9a3c6389f5f0f2e19e0584d/comments", "author": {"login": "davidtwco", "id": 1295100, "node_id": "MDQ6VXNlcjEyOTUxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1295100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidtwco", "html_url": "https://github.com/davidtwco", "followers_url": "https://api.github.com/users/davidtwco/followers", "following_url": "https://api.github.com/users/davidtwco/following{/other_user}", "gists_url": "https://api.github.com/users/davidtwco/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidtwco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidtwco/subscriptions", "organizations_url": "https://api.github.com/users/davidtwco/orgs", "repos_url": "https://api.github.com/users/davidtwco/repos", "events_url": "https://api.github.com/users/davidtwco/events{/privacy}", "received_events_url": "https://api.github.com/users/davidtwco/received_events", "type": "User", "site_admin": false}, "committer": {"login": "davidtwco", "id": 1295100, "node_id": "MDQ6VXNlcjEyOTUxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1295100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidtwco", "html_url": "https://github.com/davidtwco", "followers_url": "https://api.github.com/users/davidtwco/followers", "following_url": "https://api.github.com/users/davidtwco/following{/other_user}", "gists_url": "https://api.github.com/users/davidtwco/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidtwco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidtwco/subscriptions", "organizations_url": "https://api.github.com/users/davidtwco/orgs", "repos_url": "https://api.github.com/users/davidtwco/repos", "events_url": "https://api.github.com/users/davidtwco/events{/privacy}", "received_events_url": "https://api.github.com/users/davidtwco/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4d2d3fc5dadf894a8ad709a5860a549f2c0b1032", "url": "https://api.github.com/repos/rust-lang/rust/commits/4d2d3fc5dadf894a8ad709a5860a549f2c0b1032", "html_url": "https://github.com/rust-lang/rust/commit/4d2d3fc5dadf894a8ad709a5860a549f2c0b1032"}], "stats": {"total": 61, "additions": 61, "deletions": 0}, "files": [{"sha": "facdee5cc176fb8935a516ff425bdcb7dbd8b04b", "filename": "src/test/run-pass/issue-47703-1.rs", "status": "added", "additions": 33, "deletions": 0, "changes": 33, "blob_url": "https://github.com/rust-lang/rust/blob/673d97e3ca764e4fd9a3c6389f5f0f2e19e0584d/src%2Ftest%2Frun-pass%2Fissue-47703-1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/673d97e3ca764e4fd9a3c6389f5f0f2e19e0584d/src%2Ftest%2Frun-pass%2Fissue-47703-1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissue-47703-1.rs?ref=673d97e3ca764e4fd9a3c6389f5f0f2e19e0584d", "patch": "@@ -0,0 +1,33 @@\n+// Copyright 2012 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+#![feature(nll)]\n+\n+struct AtomicRefMut<'a> {\n+    value: &'a mut i32,\n+    borrow: AtomicBorrowRefMut,\n+}\n+\n+struct AtomicBorrowRefMut {\n+}\n+\n+impl Drop for AtomicBorrowRefMut {\n+    fn drop(&mut self) {\n+    }\n+}\n+\n+fn map(orig: AtomicRefMut) -> AtomicRefMut {\n+    AtomicRefMut {\n+        value: orig.value,\n+        borrow: orig.borrow,\n+    }\n+}\n+\n+fn main() {}"}, {"sha": "2146986377a0522f3263830511e1220bcb3756aa", "filename": "src/test/run-pass/issue-47703.rs", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/673d97e3ca764e4fd9a3c6389f5f0f2e19e0584d/src%2Ftest%2Frun-pass%2Fissue-47703.rs", "raw_url": "https://github.com/rust-lang/rust/raw/673d97e3ca764e4fd9a3c6389f5f0f2e19e0584d/src%2Ftest%2Frun-pass%2Fissue-47703.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissue-47703.rs?ref=673d97e3ca764e4fd9a3c6389f5f0f2e19e0584d", "patch": "@@ -0,0 +1,28 @@\n+// Copyright 2012 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+#![feature(nll)]\n+\n+struct MyStruct<'a> {\n+    field: &'a mut (),\n+    field2: WithDrop\n+}\n+\n+struct WithDrop;\n+\n+impl Drop for WithDrop {\n+    fn drop(&mut self) {}\n+}\n+\n+impl<'a> MyStruct<'a> {\n+    fn consume(self) -> &'a mut () { self.field }\n+}\n+\n+fn main() {}"}]}