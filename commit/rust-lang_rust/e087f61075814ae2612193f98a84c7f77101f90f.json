{"sha": "e087f61075814ae2612193f98a84c7f77101f90f", "node_id": "C_kwDOAAsO6NoAKGUwODdmNjEwNzU4MTRhZTI2MTIxOTNmOThhODRjN2Y3NzEwMWY5MGY", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2023-02-15T22:18:40Z"}, "committer": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2023-02-15T22:34:25Z"}, "message": "don't clone types that are copy", "tree": {"sha": "839a00c658fb1bc3758d56c5e51731b844a1840c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/839a00c658fb1bc3758d56c5e51731b844a1840c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e087f61075814ae2612193f98a84c7f77101f90f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e087f61075814ae2612193f98a84c7f77101f90f", "html_url": "https://github.com/rust-lang/rust/commit/e087f61075814ae2612193f98a84c7f77101f90f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e087f61075814ae2612193f98a84c7f77101f90f/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2d14db321b043ffc579a7461464c88d7e3f54f83", "url": "https://api.github.com/repos/rust-lang/rust/commits/2d14db321b043ffc579a7461464c88d7e3f54f83", "html_url": "https://github.com/rust-lang/rust/commit/2d14db321b043ffc579a7461464c88d7e3f54f83"}], "stats": {"total": 13, "additions": 6, "deletions": 7}, "files": [{"sha": "6dd3726a2be38ba4ce63c31ea3ad6a668ff0a454", "filename": "compiler/rustc_hir_typeck/src/method/probe.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/e087f61075814ae2612193f98a84c7f77101f90f/compiler%2Frustc_hir_typeck%2Fsrc%2Fmethod%2Fprobe.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e087f61075814ae2612193f98a84c7f77101f90f/compiler%2Frustc_hir_typeck%2Fsrc%2Fmethod%2Fprobe.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_typeck%2Fsrc%2Fmethod%2Fprobe.rs?ref=e087f61075814ae2612193f98a84c7f77101f90f", "patch": "@@ -517,8 +517,7 @@ fn method_autoderef_steps<'tcx>(\n         .by_ref()\n         .map(|(ty, d)| {\n             let step = CandidateStep {\n-                self_ty: infcx\n-                    .make_query_response_ignoring_pending_obligations(inference_vars.clone(), ty),\n+                self_ty: infcx.make_query_response_ignoring_pending_obligations(inference_vars, ty),\n                 autoderefs: d,\n                 from_unsafe_deref: reached_raw_pointer,\n                 unsize: false,"}, {"sha": "81c7e4673d41b7e11e950cfd2eba1363a4cbf11a", "filename": "compiler/rustc_query_system/src/query/caches.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/e087f61075814ae2612193f98a84c7f77101f90f/compiler%2Frustc_query_system%2Fsrc%2Fquery%2Fcaches.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e087f61075814ae2612193f98a84c7f77101f90f/compiler%2Frustc_query_system%2Fsrc%2Fquery%2Fcaches.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_query_system%2Fsrc%2Fquery%2Fcaches.rs?ref=e087f61075814ae2612193f98a84c7f77101f90f", "patch": "@@ -92,7 +92,7 @@ where\n         let mut lock = self.cache.lock();\n         // We may be overwriting another value. This is all right, since the dep-graph\n         // will check that the fingerprint matches.\n-        lock.insert(key, (value.clone(), index));\n+        lock.insert(key, (value, index));\n         value\n     }\n \n@@ -153,7 +153,7 @@ where\n \n     #[inline]\n     fn complete(&self, _key: (), value: V, index: DepNodeIndex) -> Self::Stored {\n-        *self.cache.lock() = Some((value.clone(), index));\n+        *self.cache.lock() = Some((value, index));\n         value\n     }\n \n@@ -283,7 +283,7 @@ where\n         let mut lock = self.cache.get_shard_by_hash(key.index() as u64).lock();\n         #[cfg(not(parallel_compiler))]\n         let mut lock = self.cache.lock();\n-        lock.insert(key, (value.clone(), index));\n+        lock.insert(key, (value, index));\n         value\n     }\n "}, {"sha": "28aa3d5270590f2c6c15d7faf54619bf77b84e51", "filename": "compiler/rustc_trait_selection/src/solve/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e087f61075814ae2612193f98a84c7f77101f90f/compiler%2Frustc_trait_selection%2Fsrc%2Fsolve%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e087f61075814ae2612193f98a84c7f77101f90f/compiler%2Frustc_trait_selection%2Fsrc%2Fsolve%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Fsolve%2Fmod.rs?ref=e087f61075814ae2612193f98a84c7f77101f90f", "patch": "@@ -547,7 +547,7 @@ impl<'tcx> EvalCtxt<'_, 'tcx> {\n             response.value.certainty == Certainty::Yes\n                 && response.has_no_inference_or_external_constraints()\n         }) {\n-            return Ok(response.clone());\n+            return Ok(*response);\n         }\n \n         let certainty = candidates.iter().fold(Certainty::AMBIGUOUS, |certainty, response| {"}, {"sha": "7ef39b20107438e0266f8a06b7eba2cf9aecf4b3", "filename": "compiler/rustc_trait_selection/src/traits/object_safety.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e087f61075814ae2612193f98a84c7f77101f90f/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fobject_safety.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e087f61075814ae2612193f98a84c7f77101f90f/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fobject_safety.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fobject_safety.rs?ref=e087f61075814ae2612193f98a84c7f77101f90f", "patch": "@@ -599,7 +599,7 @@ fn virtual_call_violation_for_method<'tcx>(\n             return false;\n         }\n \n-        contains_illegal_self_type_reference(tcx, trait_def_id, pred.clone())\n+        contains_illegal_self_type_reference(tcx, trait_def_id, pred)\n     }) {\n         return Some(MethodViolationCode::WhereClauseReferencesSelf);\n     }"}]}