{"sha": "054f31086814281fc3045bfdcc444344f0faf244", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA1NGYzMTA4NjgxNDI4MWZjMzA0NWJmZGNjNDQ0MzQ0ZjBmYWYyNDQ=", "commit": {"author": {"name": "Samuel Holland", "email": "samuel@sholland.org", "date": "2017-08-22T21:24:29Z"}, "committer": {"name": "Samuel Holland", "email": "samuel@sholland.org", "date": "2017-08-22T21:24:29Z"}, "message": "Disable PIE when linking statically\n\nStatic PIE support, while supported on musl, requires a patch to GCC.\nUntil/unless it is merged, adding '-pie' to the linker command line will\noverride '-static' and create a binary that requires a dynamic\ninterpreter (ld.so).", "tree": {"sha": "049335c7298b4d712b51df2870133f156e2cffe0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/049335c7298b4d712b51df2870133f156e2cffe0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/054f31086814281fc3045bfdcc444344f0faf244", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/054f31086814281fc3045bfdcc444344f0faf244", "html_url": "https://github.com/rust-lang/rust/commit/054f31086814281fc3045bfdcc444344f0faf244", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/054f31086814281fc3045bfdcc444344f0faf244/comments", "author": {"login": "smaeul", "id": 5846453, "node_id": "MDQ6VXNlcjU4NDY0NTM=", "avatar_url": "https://avatars.githubusercontent.com/u/5846453?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smaeul", "html_url": "https://github.com/smaeul", "followers_url": "https://api.github.com/users/smaeul/followers", "following_url": "https://api.github.com/users/smaeul/following{/other_user}", "gists_url": "https://api.github.com/users/smaeul/gists{/gist_id}", "starred_url": "https://api.github.com/users/smaeul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smaeul/subscriptions", "organizations_url": "https://api.github.com/users/smaeul/orgs", "repos_url": "https://api.github.com/users/smaeul/repos", "events_url": "https://api.github.com/users/smaeul/events{/privacy}", "received_events_url": "https://api.github.com/users/smaeul/received_events", "type": "User", "site_admin": false}, "committer": {"login": "smaeul", "id": 5846453, "node_id": "MDQ6VXNlcjU4NDY0NTM=", "avatar_url": "https://avatars.githubusercontent.com/u/5846453?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smaeul", "html_url": "https://github.com/smaeul", "followers_url": "https://api.github.com/users/smaeul/followers", "following_url": "https://api.github.com/users/smaeul/following{/other_user}", "gists_url": "https://api.github.com/users/smaeul/gists{/gist_id}", "starred_url": "https://api.github.com/users/smaeul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smaeul/subscriptions", "organizations_url": "https://api.github.com/users/smaeul/orgs", "repos_url": "https://api.github.com/users/smaeul/repos", "events_url": "https://api.github.com/users/smaeul/events{/privacy}", "received_events_url": "https://api.github.com/users/smaeul/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "12ceed013cdbd5d431a6908d49b2b6cb6fe1d032", "url": "https://api.github.com/repos/rust-lang/rust/commits/12ceed013cdbd5d431a6908d49b2b6cb6fe1d032", "html_url": "https://github.com/rust-lang/rust/commit/12ceed013cdbd5d431a6908d49b2b6cb6fe1d032"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "fb485e71d946918dbb2971cb4a875d6b04a24416", "filename": "src/librustc_trans/back/link.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/054f31086814281fc3045bfdcc444344f0faf244/src%2Flibrustc_trans%2Fback%2Flink.rs", "raw_url": "https://github.com/rust-lang/rust/raw/054f31086814281fc3045bfdcc444344f0faf244/src%2Flibrustc_trans%2Fback%2Flink.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Fback%2Flink.rs?ref=054f31086814281fc3045bfdcc444344f0faf244", "patch": "@@ -902,7 +902,7 @@ fn link_args(cmd: &mut Linker,\n         let mut args = args.iter().chain(more_args.iter()).chain(used_link_args.iter());\n \n         if get_reloc_model(sess) == llvm::RelocMode::PIC\n-            && !args.any(|x| *x == \"-static\") {\n+            && !sess.crt_static() && !args.any(|x| *x == \"-static\") {\n             cmd.position_independent_executable();\n         }\n     }"}]}