{"sha": "dbceaf522b717bd0dda89f6af1684ebd8e033aee", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRiY2VhZjUyMmI3MTdiZDBkZGE4OWY2YWYxNjg0ZWJkOGUwMzNhZWU=", "commit": {"author": {"name": "Paul Daniel Faria", "email": "nashenas88@users.noreply.github.com", "date": "2020-06-08T16:10:23Z"}, "committer": {"name": "Paul Daniel Faria", "email": "nashenas88@users.noreply.github.com", "date": "2020-06-08T16:10:23Z"}, "message": "Use Option<&str> for target instead of Option<&String>", "tree": {"sha": "4a705fb7cc150dd5ad6f13431ac1719455ba6cbf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4a705fb7cc150dd5ad6f13431ac1719455ba6cbf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/dbceaf522b717bd0dda89f6af1684ebd8e033aee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/dbceaf522b717bd0dda89f6af1684ebd8e033aee", "html_url": "https://github.com/rust-lang/rust/commit/dbceaf522b717bd0dda89f6af1684ebd8e033aee", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/dbceaf522b717bd0dda89f6af1684ebd8e033aee/comments", "author": {"login": "Nashenas88", "id": 1673130, "node_id": "MDQ6VXNlcjE2NzMxMzA=", "avatar_url": "https://avatars.githubusercontent.com/u/1673130?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nashenas88", "html_url": "https://github.com/Nashenas88", "followers_url": "https://api.github.com/users/Nashenas88/followers", "following_url": "https://api.github.com/users/Nashenas88/following{/other_user}", "gists_url": "https://api.github.com/users/Nashenas88/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nashenas88/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nashenas88/subscriptions", "organizations_url": "https://api.github.com/users/Nashenas88/orgs", "repos_url": "https://api.github.com/users/Nashenas88/repos", "events_url": "https://api.github.com/users/Nashenas88/events{/privacy}", "received_events_url": "https://api.github.com/users/Nashenas88/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Nashenas88", "id": 1673130, "node_id": "MDQ6VXNlcjE2NzMxMzA=", "avatar_url": "https://avatars.githubusercontent.com/u/1673130?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nashenas88", "html_url": "https://github.com/Nashenas88", "followers_url": "https://api.github.com/users/Nashenas88/followers", "following_url": "https://api.github.com/users/Nashenas88/following{/other_user}", "gists_url": "https://api.github.com/users/Nashenas88/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nashenas88/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nashenas88/subscriptions", "organizations_url": "https://api.github.com/users/Nashenas88/orgs", "repos_url": "https://api.github.com/users/Nashenas88/repos", "events_url": "https://api.github.com/users/Nashenas88/events{/privacy}", "received_events_url": "https://api.github.com/users/Nashenas88/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9c35f135b9c872e904ee1e838cfa69fc5745c45f", "url": "https://api.github.com/repos/rust-lang/rust/commits/9c35f135b9c872e904ee1e838cfa69fc5745c45f", "html_url": "https://github.com/rust-lang/rust/commit/9c35f135b9c872e904ee1e838cfa69fc5745c45f"}], "stats": {"total": 8, "additions": 4, "deletions": 4}, "files": [{"sha": "fe03b509e4ff2f7d66fdfd67fffa91d8bf170b21", "filename": "crates/ra_project_model/src/lib.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/dbceaf522b717bd0dda89f6af1684ebd8e033aee/crates%2Fra_project_model%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dbceaf522b717bd0dda89f6af1684ebd8e033aee/crates%2Fra_project_model%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_project_model%2Fsrc%2Flib.rs?ref=dbceaf522b717bd0dda89f6af1684ebd8e033aee", "patch": "@@ -250,7 +250,7 @@ impl ProjectWorkspace {\n \n     pub fn to_crate_graph(\n         &self,\n-        target: Option<&String>,\n+        target: Option<&str>,\n         extern_source_roots: &FxHashMap<PathBuf, ExternSourceId>,\n         proc_macro_client: &ProcMacroClient,\n         load: &mut dyn FnMut(&Path) -> Option<FileId>,\n@@ -560,7 +560,7 @@ impl ProjectWorkspace {\n     }\n }\n \n-fn get_rustc_cfg_options(target: Option<&String>) -> CfgOptions {\n+fn get_rustc_cfg_options(target: Option<&str>) -> CfgOptions {\n     let mut cfg_options = CfgOptions::default();\n \n     // Some nightly-only cfgs, which are required for stdlib\n@@ -578,7 +578,7 @@ fn get_rustc_cfg_options(target: Option<&String>) -> CfgOptions {\n         let mut cmd = Command::new(ra_toolchain::rustc());\n         cmd.args(&[\"--print\", \"cfg\", \"-O\"]);\n         if let Some(target) = target {\n-            cmd.args(&[\"--target\", target.as_str()]);\n+            cmd.args(&[\"--target\", target]);\n         }\n         let output = output(cmd)?;\n         Ok(String::from_utf8(output.stdout)?)"}, {"sha": "73b0f881d36976f668e949d444fd8b3246f406bf", "filename": "crates/rust-analyzer/src/global_state.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dbceaf522b717bd0dda89f6af1684ebd8e033aee/crates%2Frust-analyzer%2Fsrc%2Fglobal_state.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dbceaf522b717bd0dda89f6af1684ebd8e033aee/crates%2Frust-analyzer%2Fsrc%2Fglobal_state.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fglobal_state.rs?ref=dbceaf522b717bd0dda89f6af1684ebd8e033aee", "patch": "@@ -160,7 +160,7 @@ impl GlobalState {\n         };\n         for ws in workspaces.iter() {\n             crate_graph.extend(ws.to_crate_graph(\n-                config.cargo.target.as_ref(),\n+                config.cargo.target.as_deref(),\n                 &extern_source_roots,\n                 &proc_macro_client,\n                 &mut load,"}]}