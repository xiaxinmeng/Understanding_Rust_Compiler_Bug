{"sha": "29d2ceae7c03fb4a4d99e4e766cf212fb9582ffa", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI5ZDJjZWFlN2MwM2ZiNGE0ZDk5ZTRlNzY2Y2YyMTJmYjk1ODJmZmE=", "commit": {"author": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2018-11-01T23:22:30Z"}, "committer": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2018-11-01T23:22:30Z"}, "message": "Remove deprecated unstable `#[panic_implementation]`\n\nIt was superseded by `#[panic_handler]`", "tree": {"sha": "889e40eb304ad091e669608fdad73e62a0e101d0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/889e40eb304ad091e669608fdad73e62a0e101d0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/29d2ceae7c03fb4a4d99e4e766cf212fb9582ffa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/29d2ceae7c03fb4a4d99e4e766cf212fb9582ffa", "html_url": "https://github.com/rust-lang/rust/commit/29d2ceae7c03fb4a4d99e4e766cf212fb9582ffa", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/29d2ceae7c03fb4a4d99e4e766cf212fb9582ffa/comments", "author": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "committer": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "89cf577c73b70e66157d9a4ff6560e738d039ab1", "url": "https://api.github.com/repos/rust-lang/rust/commits/89cf577c73b70e66157d9a4ff6560e738d039ab1", "html_url": "https://github.com/rust-lang/rust/commit/89cf577c73b70e66157d9a4ff6560e738d039ab1"}], "stats": {"total": 103, "additions": 8, "deletions": 95}, "files": [{"sha": "c5bcfd48cf39a5dbcc46fc2b527f0900031acf70", "filename": "src/librustc/middle/dead.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/29d2ceae7c03fb4a4d99e4e766cf212fb9582ffa/src%2Flibrustc%2Fmiddle%2Fdead.rs", "raw_url": "https://github.com/rust-lang/rust/raw/29d2ceae7c03fb4a4d99e4e766cf212fb9582ffa/src%2Flibrustc%2Fmiddle%2Fdead.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fdead.rs?ref=29d2ceae7c03fb4a4d99e4e766cf212fb9582ffa", "patch": "@@ -291,10 +291,8 @@ fn has_allow_dead_code_or_lang_attr(tcx: TyCtxt<'_, '_, '_>,\n         return true;\n     }\n \n-    // (To be) stable attribute for #[lang = \"panic_impl\"]\n-    if attr::contains_name(attrs, \"panic_implementation\") ||\n-        attr::contains_name(attrs, \"panic_handler\")\n-    {\n+    // Stable attribute for #[lang = \"panic_impl\"]\n+    if attr::contains_name(attrs, \"panic_handler\") {\n         return true;\n     }\n "}, {"sha": "931f466e4228048d703bbe1ae91d7be24d6b68ca", "filename": "src/librustc/middle/lang_items.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/29d2ceae7c03fb4a4d99e4e766cf212fb9582ffa/src%2Flibrustc%2Fmiddle%2Flang_items.rs", "raw_url": "https://github.com/rust-lang/rust/raw/29d2ceae7c03fb4a4d99e4e766cf212fb9582ffa/src%2Flibrustc%2Fmiddle%2Flang_items.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Flang_items.rs?ref=29d2ceae7c03fb4a4d99e4e766cf212fb9582ffa", "patch": "@@ -204,9 +204,7 @@ pub fn extract(attrs: &[ast::Attribute]) -> Option<(Symbol, Span)> {\n             if let Some(value) = attribute.value_str() {\n                 return Some((value, attribute.span));\n             }\n-        } else if attribute.check_name(\"panic_implementation\") ||\n-            attribute.check_name(\"panic_handler\")\n-        {\n+        } else if attribute.check_name(\"panic_handler\") {\n             return Some((Symbol::intern(\"panic_impl\"), attribute.span))\n         } else if attribute.check_name(\"alloc_error_handler\") {\n             return Some((Symbol::intern(\"oom\"), attribute.span))"}, {"sha": "fd63bf79da952d221c1d4a0e217e78b5c122d64d", "filename": "src/librustc_mir/monomorphize/partitioning.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/29d2ceae7c03fb4a4d99e4e766cf212fb9582ffa/src%2Flibrustc_mir%2Fmonomorphize%2Fpartitioning.rs", "raw_url": "https://github.com/rust-lang/rust/raw/29d2ceae7c03fb4a4d99e4e766cf212fb9582ffa/src%2Flibrustc_mir%2Fmonomorphize%2Fpartitioning.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fmonomorphize%2Fpartitioning.rs?ref=29d2ceae7c03fb4a4d99e4e766cf212fb9582ffa", "patch": "@@ -505,7 +505,7 @@ fn mono_item_visibility(\n         //\n         // * First is weak lang items. These are basically mechanisms for\n         //   libcore to forward-reference symbols defined later in crates like\n-        //   the standard library or `#[panic_implementation]` definitions. The\n+        //   the standard library or `#[panic_handler]` definitions. The\n         //   definition of these weak lang items needs to be referenceable by\n         //   libcore, so we're no longer a candidate for internalization.\n         //   Removal of these functions can't be done by LLVM but rather must be"}, {"sha": "694cd0c27183d72e8c83cb88f19c676704ee5226", "filename": "src/librustc_typeck/check/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/29d2ceae7c03fb4a4d99e4e766cf212fb9582ffa/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/29d2ceae7c03fb4a4d99e4e766cf212fb9582ffa/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs?ref=29d2ceae7c03fb4a4d99e4e766cf212fb9582ffa", "patch": "@@ -1167,7 +1167,7 @@ fn check_fn<'a, 'gcx, 'tcx>(inherited: &'a Inherited<'a, 'gcx, 'tcx>,\n         }\n     }\n \n-    // Check that a function marked as `#[panic_implementation]` has signature `fn(&PanicInfo) -> !`\n+    // Check that a function marked as `#[panic_handler]` has signature `fn(&PanicInfo) -> !`\n     if let Some(panic_impl_did) = fcx.tcx.lang_items().panic_impl() {\n         if panic_impl_did == fcx.tcx.hir.local_def_id(fn_id) {\n             if let Some(panic_info_did) = fcx.tcx.lang_items().panic_info() {"}, {"sha": "dd5eacb86eb23b122c4a0f30e0531bbddb49737c", "filename": "src/libsyntax/feature_gate.rs", "status": "modified", "additions": 2, "deletions": 13, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/29d2ceae7c03fb4a4d99e4e766cf212fb9582ffa/src%2Flibsyntax%2Ffeature_gate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/29d2ceae7c03fb4a4d99e4e766cf212fb9582ffa/src%2Flibsyntax%2Ffeature_gate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Ffeature_gate.rs?ref=29d2ceae7c03fb4a4d99e4e766cf212fb9582ffa", "patch": "@@ -448,9 +448,6 @@ declare_features! (\n     // Integer match exhaustiveness checking\n     (active, exhaustive_integer_patterns, \"1.30.0\", Some(50907), None),\n \n-    // RFC 2070: #[panic_implementation] / #[panic_handler]\n-    (active, panic_implementation, \"1.28.0\", Some(44489), None),\n-\n     // #[doc(keyword = \"...\")]\n     (active, doc_keyword, \"1.28.0\", Some(51315), None),\n \n@@ -541,6 +538,8 @@ declare_features! (\n      Some(\"subsumed by `#![feature(proc_macro_hygiene)]`\")),\n     (removed, proc_macro_gen, \"1.27.0\", Some(54727), None,\n      Some(\"subsumed by `#![feature(proc_macro_hygiene)]`\")),\n+    (removed, panic_implementation, \"1.28.0\", Some(44489), None,\n+     Some(\"subsumed by `#[panic_handler]`\")),\n );\n \n declare_features! (\n@@ -1160,16 +1159,6 @@ pub const BUILTIN_ATTRIBUTES: &'static [(&'static str, AttributeType, AttributeG\n                                    \"infer 'static lifetime requirements\",\n                                    cfg_fn!(infer_static_outlives_requirements))),\n \n-    // RFC 2070 (deprecated attribute name)\n-    (\"panic_implementation\",\n-     Normal,\n-     Gated(Stability::Deprecated(\"https://github.com/rust-lang/rust/issues/44489\\\n-                                  #issuecomment-415140224\",\n-                                 Some(\"replace this attribute with `#[panic_handler]`\")),\n-           \"panic_implementation\",\n-           \"this attribute was renamed to `panic_handler`\",\n-           cfg_fn!(panic_implementation))),\n-\n     // RFC 2070\n     (\"panic_handler\", Normal, Ungated),\n "}, {"sha": "dcc2f4f5223007cd09abe8325f1b37f4510ebec6", "filename": "src/test/run-make/wasm-symbols-not-imported/foo.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/29d2ceae7c03fb4a4d99e4e766cf212fb9582ffa/src%2Ftest%2Frun-make%2Fwasm-symbols-not-imported%2Ffoo.rs", "raw_url": "https://github.com/rust-lang/rust/raw/29d2ceae7c03fb4a4d99e4e766cf212fb9582ffa/src%2Ftest%2Frun-make%2Fwasm-symbols-not-imported%2Ffoo.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fwasm-symbols-not-imported%2Ffoo.rs?ref=29d2ceae7c03fb4a4d99e4e766cf212fb9582ffa", "patch": "@@ -9,8 +9,6 @@\n // except according to those terms.\n \n #![crate_type = \"cdylib\"]\n-\n-#![feature(panic_implementation)]\n #![no_std]\n \n use core::panic::PanicInfo;\n@@ -20,7 +18,7 @@ pub extern fn foo() {\n     panic!()\n }\n \n-#[panic_implementation]\n+#[panic_handler]\n fn panic(_info: &PanicInfo) -> ! {\n     loop {}\n }"}, {"sha": "ca51154884f1227fb047c5df0bc3940fbcb87993", "filename": "src/test/ui/feature-gates/feature-gate-panic-implementation.rs", "status": "removed", "additions": 0, "deletions": 21, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/89cf577c73b70e66157d9a4ff6560e738d039ab1/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-panic-implementation.rs", "raw_url": "https://github.com/rust-lang/rust/raw/89cf577c73b70e66157d9a4ff6560e738d039ab1/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-panic-implementation.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-panic-implementation.rs?ref=89cf577c73b70e66157d9a4ff6560e738d039ab1", "patch": "@@ -1,21 +0,0 @@\n-// Copyright 2018 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n-// compile-flags:-C panic=abort\n-\n-#![no_std]\n-#![no_main]\n-\n-use core::panic::PanicInfo;\n-\n-#[panic_implementation] //~ ERROR this attribute was renamed to `panic_handler` (see issue #44489)\n-fn panic(info: &PanicInfo) -> ! {\n-    loop {}\n-}"}, {"sha": "a54780468c42de97a4c48303f78e7fe4d8435237", "filename": "src/test/ui/feature-gates/feature-gate-panic-implementation.stderr", "status": "removed", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/89cf577c73b70e66157d9a4ff6560e738d039ab1/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-panic-implementation.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/89cf577c73b70e66157d9a4ff6560e738d039ab1/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-panic-implementation.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-panic-implementation.stderr?ref=89cf577c73b70e66157d9a4ff6560e738d039ab1", "patch": "@@ -1,11 +0,0 @@\n-error[E0658]: this attribute was renamed to `panic_handler` (see issue #44489)\n-  --> $DIR/feature-gate-panic-implementation.rs:18:1\n-   |\n-LL | #[panic_implementation] //~ ERROR this attribute was renamed to `panic_handler` (see issue #44489)\n-   | ^^^^^^^^^^^^^^^^^^^^^^^\n-   |\n-   = help: add #![feature(panic_implementation)] to the crate attributes to enable\n-\n-error: aborting due to previous error\n-\n-For more information about this error, try `rustc --explain E0658`."}, {"sha": "c4bec01f6af61a59ef0ec990b4906c19e7ea41bf", "filename": "src/test/ui/panic-implementation/panic-implementation-deprecated.rs", "status": "removed", "additions": 0, "deletions": 24, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/89cf577c73b70e66157d9a4ff6560e738d039ab1/src%2Ftest%2Fui%2Fpanic-implementation%2Fpanic-implementation-deprecated.rs", "raw_url": "https://github.com/rust-lang/rust/raw/89cf577c73b70e66157d9a4ff6560e738d039ab1/src%2Ftest%2Fui%2Fpanic-implementation%2Fpanic-implementation-deprecated.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpanic-implementation%2Fpanic-implementation-deprecated.rs?ref=89cf577c73b70e66157d9a4ff6560e738d039ab1", "patch": "@@ -1,24 +0,0 @@\n-// Copyright 2018 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n-// compile-flags:-C panic=abort\n-\n-#![deny(deprecated)]\n-#![feature(panic_implementation)]\n-#![no_std]\n-\n-use core::panic::PanicInfo;\n-\n-#[panic_implementation]\n-fn panic(info: &PanicInfo) -> ! {\n-    loop {}\n-}\n-\n-fn main() {}"}, {"sha": "fabfba94878f520548230e5db2c5b80fd808f10c", "filename": "src/test/ui/panic-implementation/panic-implementation-deprecated.stderr", "status": "removed", "additions": 0, "deletions": 14, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/89cf577c73b70e66157d9a4ff6560e738d039ab1/src%2Ftest%2Fui%2Fpanic-implementation%2Fpanic-implementation-deprecated.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/89cf577c73b70e66157d9a4ff6560e738d039ab1/src%2Ftest%2Fui%2Fpanic-implementation%2Fpanic-implementation-deprecated.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpanic-implementation%2Fpanic-implementation-deprecated.stderr?ref=89cf577c73b70e66157d9a4ff6560e738d039ab1", "patch": "@@ -1,14 +0,0 @@\n-error: use of deprecated attribute `panic_implementation`: this attribute was renamed to `panic_handler`. See https://github.com/rust-lang/rust/issues/44489#issuecomment-415140224\n-  --> $DIR/panic-implementation-deprecated.rs:19:1\n-   |\n-LL | #[panic_implementation]\n-   | ^^^^^^^^^^^^^^^^^^^^^^^ help: replace this attribute with `#[panic_handler]`\n-   |\n-note: lint level defined here\n-  --> $DIR/panic-implementation-deprecated.rs:13:9\n-   |\n-LL | #![deny(deprecated)]\n-   |         ^^^^^^^^^^\n-\n-error: aborting due to previous error\n-"}]}