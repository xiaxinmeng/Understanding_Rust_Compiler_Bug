{"sha": "de950c2973e20be37159952ded06a8d8aeff261d", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRlOTUwYzI5NzNlMjBiZTM3MTU5OTUyZGVkMDZhOGQ4YWVmZjI2MWQ=", "commit": {"author": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2018-05-14T04:11:55Z"}, "committer": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2018-05-14T04:13:21Z"}, "message": "Skip on `rustfmt::skip` as well as `rustfmt_skip`", "tree": {"sha": "7d9d75f32c8b43c10609b92a3e2bd2149175edb7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7d9d75f32c8b43c10609b92a3e2bd2149175edb7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/de950c2973e20be37159952ded06a8d8aeff261d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/de950c2973e20be37159952ded06a8d8aeff261d", "html_url": "https://github.com/rust-lang/rust/commit/de950c2973e20be37159952ded06a8d8aeff261d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/de950c2973e20be37159952ded06a8d8aeff261d/comments", "author": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7eb8bdbbd29bfc8c781948215e9291d64aa69cf4", "url": "https://api.github.com/repos/rust-lang/rust/commits/7eb8bdbbd29bfc8c781948215e9291d64aa69cf4", "html_url": "https://github.com/rust-lang/rust/commit/7eb8bdbbd29bfc8c781948215e9291d64aa69cf4"}], "stats": {"total": 23, "additions": 14, "deletions": 9}, "files": [{"sha": "b5a4bc7bbc55e31368c853dcf43765511b00966b", "filename": "README.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/de950c2973e20be37159952ded06a8d8aeff261d/README.md", "raw_url": "https://github.com/rust-lang/rust/raw/de950c2973e20be37159952ded06a8d8aeff261d/README.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/README.md?ref=de950c2973e20be37159952ded06a8d8aeff261d", "patch": "@@ -174,7 +174,7 @@ See [Configurations.md](Configurations.md) for details.\n * For things you do not want rustfmt to mangle, use one of\n \n     ```rust\n-    #[rustfmt_skip]  // requires nightly and #![feature(custom_attribute)] in crate root\n+    #[rustfmt::skip]  // requires nightly Rust and #![feature(tool_attributes)] in crate root\n     #[cfg_attr(rustfmt, rustfmt_skip)]  // works in stable\n     ```\n * When you run rustfmt, place a file named `rustfmt.toml` or `.rustfmt.toml` in"}, {"sha": "9b935b0a287f923382a41f47daf314a62100c7f7", "filename": "rustfmt.toml", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/de950c2973e20be37159952ded06a8d8aeff261d/rustfmt.toml", "raw_url": "https://github.com/rust-lang/rust/raw/de950c2973e20be37159952ded06a8d8aeff261d/rustfmt.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/rustfmt.toml?ref=de950c2973e20be37159952ded06a8d8aeff261d", "patch": "@@ -0,0 +1,2 @@\n+error_on_line_overflow = true\n+error_on_unformatted = true"}, {"sha": "2556fa2c97f6b0529cdedd8dcfeb8e9eba7aeb7b", "filename": "src/utils.rs", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/de950c2973e20be37159952ded06a8d8aeff261d/src%2Futils.rs", "raw_url": "https://github.com/rust-lang/rust/raw/de950c2973e20be37159952ded06a8d8aeff261d/src%2Futils.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Futils.rs?ref=de950c2973e20be37159952ded06a8d8aeff261d", "patch": "@@ -22,8 +22,8 @@ use config::Color;\n use rewrite::RewriteContext;\n use shape::Shape;\n \n-// When we get scoped annotations, we should have rustfmt::skip.\n-const SKIP_ANNOTATION: &str = \"rustfmt_skip\";\n+const DEPR_SKIP_ANNOTATION: &str = \"rustfmt_skip\";\n+const SKIP_ANNOTATION: &str = \"rustfmt::skip\";\n \n // Computes the length of a string's last line, minus offset.\n pub fn extra_offset(text: &str, shape: Shape) -> usize {\n@@ -212,7 +212,10 @@ pub fn last_line_extendable(s: &str) -> bool {\n #[inline]\n fn is_skip(meta_item: &MetaItem) -> bool {\n     match meta_item.node {\n-        MetaItemKind::Word => meta_item.name() == SKIP_ANNOTATION,\n+        MetaItemKind::Word => {\n+            let path_str = meta_item.ident.to_string();\n+            path_str == SKIP_ANNOTATION || path_str == DEPR_SKIP_ANNOTATION\n+        }\n         MetaItemKind::List(ref l) => {\n             meta_item.name() == \"cfg_attr\" && l.len() == 2 && is_skip_nested(&l[1])\n         }"}, {"sha": "ee2094151cf42dec7497712a5e4faeb55fe12faf", "filename": "tests/target/skip.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/de950c2973e20be37159952ded06a8d8aeff261d/tests%2Ftarget%2Fskip.rs", "raw_url": "https://github.com/rust-lang/rust/raw/de950c2973e20be37159952ded06a8d8aeff261d/tests%2Ftarget%2Fskip.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fskip.rs?ref=de950c2973e20be37159952ded06a8d8aeff261d", "patch": "@@ -1,10 +1,10 @@\n // Test the skip attribute works\n \n-#[rustfmt_skip]\n+#[rustfmt::skip]\n fn foo() { badly; formatted; stuff\n ; }\n \n-#[rustfmt_skip]\n+#[rustfmt::skip]\n trait Foo\n {\n fn foo(\n@@ -32,15 +32,15 @@ fn issue1346() {\n \n fn skip_on_statements() {\n     // Outside block\n-    #[rustfmt_skip]\n+    #[rustfmt::skip]\n     {\n         foo; bar;\n             // junk\n     }\n \n     {\n         // Inside block\n-        #![rustfmt_skip]\n+        #![rustfmt::skip]\n         foo; bar;\n             // junk\n     }\n@@ -79,7 +79,7 @@ fn skip_on_statements() {\n }\n \n // Check that the skip attribute applies to other attributes.\n-#[rustfmt_skip]\n+#[rustfmt::skip]\n #[cfg\n (  a , b\n )]"}]}