{"sha": "1d3de19e99603cd2666f25335f02a096eb6d9b46", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFkM2RlMTllOTk2MDNjZDI2NjZmMjUzMzVmMDJhMDk2ZWI2ZDliNDY=", "commit": {"author": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2015-03-03T19:36:54Z"}, "committer": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2015-03-04T20:06:33Z"}, "message": "Add tests related to #20220. Fixes #20220.", "tree": {"sha": "9c9a634ecf2260d51926800af7b549b5f802c421", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9c9a634ecf2260d51926800af7b549b5f802c421"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1d3de19e99603cd2666f25335f02a096eb6d9b46", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1d3de19e99603cd2666f25335f02a096eb6d9b46", "html_url": "https://github.com/rust-lang/rust/commit/1d3de19e99603cd2666f25335f02a096eb6d9b46", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1d3de19e99603cd2666f25335f02a096eb6d9b46/comments", "author": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cd50b4e0b14b698e2217947727b4ae9f39e758b8", "url": "https://api.github.com/repos/rust-lang/rust/commits/cd50b4e0b14b698e2217947727b4ae9f39e758b8", "html_url": "https://github.com/rust-lang/rust/commit/cd50b4e0b14b698e2217947727b4ae9f39e758b8"}], "stats": {"total": 57, "additions": 57, "deletions": 0}, "files": [{"sha": "971869ba85bb02b3193809764fd109380325f272", "filename": "src/test/compile-fail/traits-assoc-type-in-supertrait-bad.rs", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/1d3de19e99603cd2666f25335f02a096eb6d9b46/src%2Ftest%2Fcompile-fail%2Ftraits-assoc-type-in-supertrait-bad.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1d3de19e99603cd2666f25335f02a096eb6d9b46/src%2Ftest%2Fcompile-fail%2Ftraits-assoc-type-in-supertrait-bad.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Ftraits-assoc-type-in-supertrait-bad.rs?ref=1d3de19e99603cd2666f25335f02a096eb6d9b46", "patch": "@@ -0,0 +1,26 @@\n+// Copyright 2015 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// Test case where an associated type is referenced from within the\n+// supertrait definition, and the impl makes the wrong\n+// associations. Issue #20220.\n+\n+use std::vec::IntoIter;\n+\n+pub trait Foo: Iterator<Item=<Self as Foo>::Key> {\n+    type Key;\n+}\n+\n+impl Foo for IntoIter<i32> { //~ ERROR type mismatch\n+    type Key = u32;\n+}\n+\n+fn main() {\n+}"}, {"sha": "6a4a6710131e384646fa9c7d1889f3425b226154", "filename": "src/test/run-pass/traits-assoc-type-in-supertrait.rs", "status": "added", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/rust-lang/rust/blob/1d3de19e99603cd2666f25335f02a096eb6d9b46/src%2Ftest%2Frun-pass%2Ftraits-assoc-type-in-supertrait.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1d3de19e99603cd2666f25335f02a096eb6d9b46/src%2Ftest%2Frun-pass%2Ftraits-assoc-type-in-supertrait.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Ftraits-assoc-type-in-supertrait.rs?ref=1d3de19e99603cd2666f25335f02a096eb6d9b46", "patch": "@@ -0,0 +1,31 @@\n+// Copyright 2015 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// Test case where an associated type is referenced from within the\n+// supertrait definition. Issue #20220.\n+\n+use std::vec::IntoIter;\n+\n+pub trait Foo: Iterator<Item=<Self as Foo>::Key> {\n+    type Key;\n+}\n+\n+impl Foo for IntoIter<i32> {\n+    type Key = i32;\n+}\n+\n+fn sum_foo<F:Foo<Key=i32>>(f: F) -> i32 {\n+    f.fold(0, |a,b| a + b)\n+}\n+\n+fn main() {\n+    let x = sum_foo(vec![11, 10, 1].into_iter());\n+    assert_eq!(x, 22);\n+}"}]}