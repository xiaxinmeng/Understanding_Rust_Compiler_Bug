{"sha": "888b736560755254e33593033c3d1248c8e56085", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg4OGI3MzY1NjA3NTUyNTRlMzM1OTMwMzNjM2QxMjQ4YzhlNTYwODU=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-08-29T10:48:14Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-08-29T10:48:14Z"}, "message": "Auto merge of #4408 - phansch:more_rustfix_tests, r=flip1995\n\nMore rustfix tests\n\n<!--\nThank you for making Clippy better!\n\nWe're collecting our changelog from pull request descriptions.\nIf your PR only updates to the latest nightly, you can leave the\n`changelog` entry as `none`. Otherwise, please write a short comment\nexplaining your change.\n\nIf your PR fixes an issue, you can add \"fixes #issue_number\" into this\nPR description. This way the issue will be automatically closed when\nyour PR is merged.\n\nIf you added a new lint, here's a checklist for things that will be\nchecked during review or continuous integration.\n\n- [ ] Followed [lint naming conventions][lint_naming]\n- [ ] Added passing UI tests (including committed `.stderr` file)\n- [ ] `cargo test` passes locally\n- [ ] Executed `./util/dev update_lints`\n- [ ] Added lint documentation\n- [ ] Run `./util/dev fmt`\n\n[lint_naming]: https://rust-lang.github.io/rfcs/0344-conventions-galore.html#lints\n\nNote that you can skip the above if you are just opening a WIP PR in\norder to get feedback.\n\nDelete this line and everything above before opening your PR -->\n\ncc #3630\n\nThis is probably easier reviewed per-commit.\n\nchangelog: none", "tree": {"sha": "b6a1b7e15d0614675de4e65969ab35d8b1d59062", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b6a1b7e15d0614675de4e65969ab35d8b1d59062"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/888b736560755254e33593033c3d1248c8e56085", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/888b736560755254e33593033c3d1248c8e56085", "html_url": "https://github.com/rust-lang/rust/commit/888b736560755254e33593033c3d1248c8e56085", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/888b736560755254e33593033c3d1248c8e56085/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "83f2eb7a059c4197a302150cc13e8c665306b2a1", "url": "https://api.github.com/repos/rust-lang/rust/commits/83f2eb7a059c4197a302150cc13e8c665306b2a1", "html_url": "https://github.com/rust-lang/rust/commit/83f2eb7a059c4197a302150cc13e8c665306b2a1"}, {"sha": "eeeadf30bf5f674bcbbb4f62526f89666f6fdd7c", "url": "https://api.github.com/repos/rust-lang/rust/commits/eeeadf30bf5f674bcbbb4f62526f89666f6fdd7c", "html_url": "https://github.com/rust-lang/rust/commit/eeeadf30bf5f674bcbbb4f62526f89666f6fdd7c"}], "stats": {"total": 189, "additions": 129, "deletions": 60}, "files": [{"sha": "558298c2e0e0786bf756973b5c5915d3c9369584", "filename": "clippy_lints/src/attrs.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/888b736560755254e33593033c3d1248c8e56085/clippy_lints%2Fsrc%2Fattrs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/888b736560755254e33593033c3d1248c8e56085/clippy_lints%2Fsrc%2Fattrs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fattrs.rs?ref=888b736560755254e33593033c3d1248c8e56085", "patch": "@@ -277,7 +277,7 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for Attributes {\n                                                         line_span,\n                                                         \"if you just forgot a `!`, use\",\n                                                         sugg,\n-                                                        Applicability::MachineApplicable,\n+                                                        Applicability::MaybeIncorrect,\n                                                     );\n                                                 },\n                                             );"}, {"sha": "c886743533f8949514b1ad00388e1210acfb6c5a", "filename": "clippy_lints/src/int_plus_one.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/888b736560755254e33593033c3d1248c8e56085/clippy_lints%2Fsrc%2Fint_plus_one.rs", "raw_url": "https://github.com/rust-lang/rust/raw/888b736560755254e33593033c3d1248c8e56085/clippy_lints%2Fsrc%2Fint_plus_one.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fint_plus_one.rs?ref=888b736560755254e33593033c3d1248c8e56085", "patch": "@@ -158,7 +158,7 @@ impl IntPlusOne {\n             |db| {\n                 db.span_suggestion(\n                     block.span,\n-                    \"change `>= y + 1` to `> y` as shown\",\n+                    \"change it to\",\n                     recommendation,\n                     Applicability::MachineApplicable, // snippet\n                 );"}, {"sha": "c6bcb845c7adc6be754536a690ffae7caf451de3", "filename": "clippy_lints/src/misc.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/888b736560755254e33593033c3d1248c8e56085/clippy_lints%2Fsrc%2Fmisc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/888b736560755254e33593033c3d1248c8e56085/clippy_lints%2Fsrc%2Fmisc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmisc.rs?ref=888b736560755254e33593033c3d1248c8e56085", "patch": "@@ -407,7 +407,7 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for MiscLints {\n                                 lhs - rhs,\n                                 if op == BinOpKind::Eq { '<' } else { '>' }\n                             ),\n-                            Applicability::MachineApplicable, // snippet\n+                            Applicability::HasPlaceholders, // snippet\n                         );\n                         db.span_note(expr.span, \"std::f32::EPSILON and std::f64::EPSILON are available.\");\n                     });"}, {"sha": "52b1b3afe16fe2ca265cbd0c7b420c9bc8a1e391", "filename": "tests/ui/assign_ops.fixed", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/888b736560755254e33593033c3d1248c8e56085/tests%2Fui%2Fassign_ops.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/888b736560755254e33593033c3d1248c8e56085/tests%2Fui%2Fassign_ops.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fassign_ops.fixed?ref=888b736560755254e33593033c3d1248c8e56085", "patch": "@@ -0,0 +1,21 @@\n+// run-rustfix\n+\n+#[allow(dead_code, unused_assignments)]\n+#[warn(clippy::assign_op_pattern)]\n+fn main() {\n+    let mut a = 5;\n+    a += 1;\n+    a += 1;\n+    a -= 1;\n+    a *= 99;\n+    a *= 42;\n+    a /= 2;\n+    a %= 5;\n+    a &= 1;\n+    a = 1 - a;\n+    a = 5 / a;\n+    a = 42 % a;\n+    a = 6 << a;\n+    let mut s = String::new();\n+    s += \"bla\";\n+}"}, {"sha": "527a46b2c2bb90f4e0485bc925bdd5e55f4c6d14", "filename": "tests/ui/assign_ops.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/888b736560755254e33593033c3d1248c8e56085/tests%2Fui%2Fassign_ops.rs", "raw_url": "https://github.com/rust-lang/rust/raw/888b736560755254e33593033c3d1248c8e56085/tests%2Fui%2Fassign_ops.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fassign_ops.rs?ref=888b736560755254e33593033c3d1248c8e56085", "patch": "@@ -1,3 +1,5 @@\n+// run-rustfix\n+\n #[allow(dead_code, unused_assignments)]\n #[warn(clippy::assign_op_pattern)]\n fn main() {"}, {"sha": "3486bd8da4d07ed98b2ec55cf49949508d3c9603", "filename": "tests/ui/assign_ops.stderr", "status": "modified", "additions": 9, "deletions": 9, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/888b736560755254e33593033c3d1248c8e56085/tests%2Fui%2Fassign_ops.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/888b736560755254e33593033c3d1248c8e56085/tests%2Fui%2Fassign_ops.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fassign_ops.stderr?ref=888b736560755254e33593033c3d1248c8e56085", "patch": "@@ -1,55 +1,55 @@\n error: manual implementation of an assign operation\n-  --> $DIR/assign_ops.rs:5:5\n+  --> $DIR/assign_ops.rs:7:5\n    |\n LL |     a = a + 1;\n    |     ^^^^^^^^^ help: replace it with: `a += 1`\n    |\n    = note: `-D clippy::assign-op-pattern` implied by `-D warnings`\n \n error: manual implementation of an assign operation\n-  --> $DIR/assign_ops.rs:6:5\n+  --> $DIR/assign_ops.rs:8:5\n    |\n LL |     a = 1 + a;\n    |     ^^^^^^^^^ help: replace it with: `a += 1`\n \n error: manual implementation of an assign operation\n-  --> $DIR/assign_ops.rs:7:5\n+  --> $DIR/assign_ops.rs:9:5\n    |\n LL |     a = a - 1;\n    |     ^^^^^^^^^ help: replace it with: `a -= 1`\n \n error: manual implementation of an assign operation\n-  --> $DIR/assign_ops.rs:8:5\n+  --> $DIR/assign_ops.rs:10:5\n    |\n LL |     a = a * 99;\n    |     ^^^^^^^^^^ help: replace it with: `a *= 99`\n \n error: manual implementation of an assign operation\n-  --> $DIR/assign_ops.rs:9:5\n+  --> $DIR/assign_ops.rs:11:5\n    |\n LL |     a = 42 * a;\n    |     ^^^^^^^^^^ help: replace it with: `a *= 42`\n \n error: manual implementation of an assign operation\n-  --> $DIR/assign_ops.rs:10:5\n+  --> $DIR/assign_ops.rs:12:5\n    |\n LL |     a = a / 2;\n    |     ^^^^^^^^^ help: replace it with: `a /= 2`\n \n error: manual implementation of an assign operation\n-  --> $DIR/assign_ops.rs:11:5\n+  --> $DIR/assign_ops.rs:13:5\n    |\n LL |     a = a % 5;\n    |     ^^^^^^^^^ help: replace it with: `a %= 5`\n \n error: manual implementation of an assign operation\n-  --> $DIR/assign_ops.rs:12:5\n+  --> $DIR/assign_ops.rs:14:5\n    |\n LL |     a = a & 1;\n    |     ^^^^^^^^^ help: replace it with: `a &= 1`\n \n error: manual implementation of an assign operation\n-  --> $DIR/assign_ops.rs:18:5\n+  --> $DIR/assign_ops.rs:20:5\n    |\n LL |     s = s + \"bla\";\n    |     ^^^^^^^^^^^^^ help: replace it with: `s += \"bla\"`"}, {"sha": "642830f24f58adbb4effca6d619bce3c6f2298c0", "filename": "tests/ui/int_plus_one.fixed", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/888b736560755254e33593033c3d1248c8e56085/tests%2Fui%2Fint_plus_one.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/888b736560755254e33593033c3d1248c8e56085/tests%2Fui%2Fint_plus_one.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fint_plus_one.fixed?ref=888b736560755254e33593033c3d1248c8e56085", "patch": "@@ -0,0 +1,17 @@\n+// run-rustfix\n+\n+#[allow(clippy::no_effect, clippy::unnecessary_operation)]\n+#[warn(clippy::int_plus_one)]\n+fn main() {\n+    let x = 1i32;\n+    let y = 0i32;\n+\n+    let _ = x > y;\n+    let _ = y < x;\n+\n+    let _ = x > y;\n+    let _ = y < x;\n+\n+    let _ = x > y; // should be ok\n+    let _ = y < x; // should be ok\n+}"}, {"sha": "0755a0c79d2801eb50e1f372fd4ff1aaf71d8f69", "filename": "tests/ui/int_plus_one.rs", "status": "modified", "additions": 8, "deletions": 6, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/888b736560755254e33593033c3d1248c8e56085/tests%2Fui%2Fint_plus_one.rs", "raw_url": "https://github.com/rust-lang/rust/raw/888b736560755254e33593033c3d1248c8e56085/tests%2Fui%2Fint_plus_one.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fint_plus_one.rs?ref=888b736560755254e33593033c3d1248c8e56085", "patch": "@@ -1,15 +1,17 @@\n+// run-rustfix\n+\n #[allow(clippy::no_effect, clippy::unnecessary_operation)]\n #[warn(clippy::int_plus_one)]\n fn main() {\n     let x = 1i32;\n     let y = 0i32;\n \n-    x >= y + 1;\n-    y + 1 <= x;\n+    let _ = x >= y + 1;\n+    let _ = y + 1 <= x;\n \n-    x - 1 >= y;\n-    y <= x - 1;\n+    let _ = x - 1 >= y;\n+    let _ = y <= x - 1;\n \n-    x > y; // should be ok\n-    y < x; // should be ok\n+    let _ = x > y; // should be ok\n+    let _ = y < x; // should be ok\n }"}, {"sha": "29a6914761c9f92c319918bbee76403312ad2724", "filename": "tests/ui/int_plus_one.stderr", "status": "modified", "additions": 12, "deletions": 28, "changes": 40, "blob_url": "https://github.com/rust-lang/rust/blob/888b736560755254e33593033c3d1248c8e56085/tests%2Fui%2Fint_plus_one.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/888b736560755254e33593033c3d1248c8e56085/tests%2Fui%2Fint_plus_one.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fint_plus_one.stderr?ref=888b736560755254e33593033c3d1248c8e56085", "patch": "@@ -1,44 +1,28 @@\n error: Unnecessary `>= y + 1` or `x - 1 >=`\n-  --> $DIR/int_plus_one.rs:7:5\n+  --> $DIR/int_plus_one.rs:9:13\n    |\n-LL |     x >= y + 1;\n-   |     ^^^^^^^^^^\n+LL |     let _ = x >= y + 1;\n+   |             ^^^^^^^^^^ help: change it to: `x > y`\n    |\n    = note: `-D clippy::int-plus-one` implied by `-D warnings`\n-help: change `>= y + 1` to `> y` as shown\n-   |\n-LL |     x > y;\n-   |     ^^^^^\n \n error: Unnecessary `>= y + 1` or `x - 1 >=`\n-  --> $DIR/int_plus_one.rs:8:5\n-   |\n-LL |     y + 1 <= x;\n-   |     ^^^^^^^^^^\n-help: change `>= y + 1` to `> y` as shown\n+  --> $DIR/int_plus_one.rs:10:13\n    |\n-LL |     y < x;\n-   |     ^^^^^\n+LL |     let _ = y + 1 <= x;\n+   |             ^^^^^^^^^^ help: change it to: `y < x`\n \n error: Unnecessary `>= y + 1` or `x - 1 >=`\n-  --> $DIR/int_plus_one.rs:10:5\n+  --> $DIR/int_plus_one.rs:12:13\n    |\n-LL |     x - 1 >= y;\n-   |     ^^^^^^^^^^\n-help: change `>= y + 1` to `> y` as shown\n-   |\n-LL |     x > y;\n-   |     ^^^^^\n+LL |     let _ = x - 1 >= y;\n+   |             ^^^^^^^^^^ help: change it to: `x > y`\n \n error: Unnecessary `>= y + 1` or `x - 1 >=`\n-  --> $DIR/int_plus_one.rs:11:5\n-   |\n-LL |     y <= x - 1;\n-   |     ^^^^^^^^^^\n-help: change `>= y + 1` to `> y` as shown\n+  --> $DIR/int_plus_one.rs:13:13\n    |\n-LL |     y < x;\n-   |     ^^^^^\n+LL |     let _ = y <= x - 1;\n+   |             ^^^^^^^^^^ help: change it to: `y < x`\n \n error: aborting due to 4 previous errors\n "}, {"sha": "4118214e6d927cec74fa577f4b1267cd10173c76", "filename": "tests/ui/outer_expn_data.fixed", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/888b736560755254e33593033c3d1248c8e56085/tests%2Fui%2Fouter_expn_data.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/888b736560755254e33593033c3d1248c8e56085/tests%2Fui%2Fouter_expn_data.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fouter_expn_data.fixed?ref=888b736560755254e33593033c3d1248c8e56085", "patch": "@@ -0,0 +1,25 @@\n+// run-rustfix\n+\n+#![deny(clippy::internal)]\n+#![feature(rustc_private)]\n+\n+#[macro_use]\n+extern crate rustc;\n+use rustc::hir::Expr;\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+\n+declare_lint! {\n+    pub TEST_LINT,\n+    Warn,\n+    \"\"\n+}\n+\n+declare_lint_pass!(Pass => [TEST_LINT]);\n+\n+impl<'a, 'tcx> LateLintPass<'a, 'tcx> for Pass {\n+    fn check_expr(&mut self, _cx: &LateContext<'a, 'tcx>, expr: &'tcx Expr) {\n+        let _ = expr.span.ctxt().outer_expn_data();\n+    }\n+}\n+\n+fn main() {}"}, {"sha": "a6726a9bf6abbc44cd6b35e30624b1b35a34af69", "filename": "tests/ui/outer_expn_data.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/888b736560755254e33593033c3d1248c8e56085/tests%2Fui%2Fouter_expn_data.rs", "raw_url": "https://github.com/rust-lang/rust/raw/888b736560755254e33593033c3d1248c8e56085/tests%2Fui%2Fouter_expn_data.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fouter_expn_data.rs?ref=888b736560755254e33593033c3d1248c8e56085", "patch": "@@ -1,3 +1,5 @@\n+// run-rustfix\n+\n #![deny(clippy::internal)]\n #![feature(rustc_private)]\n "}, {"sha": "6803b3feb8e651659054d20cbde67eabd4868e82", "filename": "tests/ui/outer_expn_data.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/888b736560755254e33593033c3d1248c8e56085/tests%2Fui%2Fouter_expn_data.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/888b736560755254e33593033c3d1248c8e56085/tests%2Fui%2Fouter_expn_data.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fouter_expn_data.stderr?ref=888b736560755254e33593033c3d1248c8e56085", "patch": "@@ -1,11 +1,11 @@\n error: usage of `outer_expn().expn_data()`\n-  --> $DIR/outer_expn_data.rs:19:33\n+  --> $DIR/outer_expn_data.rs:21:33\n    |\n LL |         let _ = expr.span.ctxt().outer_expn().expn_data();\n    |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `.outer_expn_data()`\n    |\n note: lint level defined here\n-  --> $DIR/outer_expn_data.rs:1:9\n+  --> $DIR/outer_expn_data.rs:3:9\n    |\n LL | #![deny(clippy::internal)]\n    |         ^^^^^^^^^^^^^^^^"}, {"sha": "947914aa123f07277b8baee1990672ae007f344a", "filename": "tests/ui/rename.fixed", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/888b736560755254e33593033c3d1248c8e56085/tests%2Fui%2Frename.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/888b736560755254e33593033c3d1248c8e56085/tests%2Fui%2Frename.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Frename.fixed?ref=888b736560755254e33593033c3d1248c8e56085", "patch": "@@ -0,0 +1,20 @@\n+//! Test for Clippy lint renames.\n+// run-rustfix\n+\n+#![allow(dead_code)]\n+// allow the new lint name here, to test if the new name works\n+#![allow(clippy::module_name_repetitions)]\n+#![allow(clippy::new_without_default)]\n+#![allow(clippy::cognitive_complexity)]\n+#![allow(clippy::redundant_static_lifetimes)]\n+// warn for the old lint name here, to test if the renaming worked\n+#![warn(clippy::cognitive_complexity)]\n+\n+#[warn(clippy::module_name_repetitions)]\n+fn main() {}\n+\n+#[warn(clippy::new_without_default)]\n+struct Foo;\n+\n+#[warn(clippy::redundant_static_lifetimes)]\n+fn foo() {}"}, {"sha": "e2c8c223fc77f7abb0e4d268c1e9db0e81a9b7d1", "filename": "tests/ui/rename.rs", "status": "modified", "additions": 3, "deletions": 7, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/888b736560755254e33593033c3d1248c8e56085/tests%2Fui%2Frename.rs", "raw_url": "https://github.com/rust-lang/rust/raw/888b736560755254e33593033c3d1248c8e56085/tests%2Fui%2Frename.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Frename.rs?ref=888b736560755254e33593033c3d1248c8e56085", "patch": "@@ -1,5 +1,7 @@\n //! Test for Clippy lint renames.\n+// run-rustfix\n \n+#![allow(dead_code)]\n // allow the new lint name here, to test if the new name works\n #![allow(clippy::module_name_repetitions)]\n #![allow(clippy::new_without_default)]\n@@ -15,10 +17,4 @@ fn main() {}\n struct Foo;\n \n #[warn(clippy::const_static_lifetime)]\n-static Bar: &'static str = \"baz\";\n-\n-impl Foo {\n-    fn new() -> Self {\n-        Foo\n-    }\n-}\n+fn foo() {}"}, {"sha": "83c7f26ba5fadd90da07ab8e4610d799c71ab521", "filename": "tests/ui/rename.stderr", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/888b736560755254e33593033c3d1248c8e56085/tests%2Fui%2Frename.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/888b736560755254e33593033c3d1248c8e56085/tests%2Fui%2Frename.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Frename.stderr?ref=888b736560755254e33593033c3d1248c8e56085", "patch": "@@ -1,31 +1,31 @@\n error: lint `clippy::cyclomatic_complexity` has been renamed to `clippy::cognitive_complexity`\n-  --> $DIR/rename.rs:9:9\n+  --> $DIR/rename.rs:11:9\n    |\n LL | #![warn(clippy::cyclomatic_complexity)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `clippy::cognitive_complexity`\n    |\n    = note: `-D renamed-and-removed-lints` implied by `-D warnings`\n \n error: lint `clippy::stutter` has been renamed to `clippy::module_name_repetitions`\n-  --> $DIR/rename.rs:11:8\n+  --> $DIR/rename.rs:13:8\n    |\n LL | #[warn(clippy::stutter)]\n    |        ^^^^^^^^^^^^^^^ help: use the new name: `clippy::module_name_repetitions`\n \n error: lint `clippy::new_without_default_derive` has been renamed to `clippy::new_without_default`\n-  --> $DIR/rename.rs:14:8\n+  --> $DIR/rename.rs:16:8\n    |\n LL | #[warn(clippy::new_without_default_derive)]\n    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `clippy::new_without_default`\n \n error: lint `clippy::const_static_lifetime` has been renamed to `clippy::redundant_static_lifetimes`\n-  --> $DIR/rename.rs:17:8\n+  --> $DIR/rename.rs:19:8\n    |\n LL | #[warn(clippy::const_static_lifetime)]\n    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `clippy::redundant_static_lifetimes`\n \n error: lint `clippy::cyclomatic_complexity` has been renamed to `clippy::cognitive_complexity`\n-  --> $DIR/rename.rs:9:9\n+  --> $DIR/rename.rs:11:9\n    |\n LL | #![warn(clippy::cyclomatic_complexity)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `clippy::cognitive_complexity`"}]}