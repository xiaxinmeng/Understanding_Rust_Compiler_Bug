{"sha": "b3fb0d10f03fe7d8f2eaa705a972b0f45e1723db", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIzZmIwZDEwZjAzZmU3ZDhmMmVhYTcwNWE5NzJiMGY0NWUxNzIzZGI=", "commit": {"author": {"name": "QuietMisdreavus", "email": "grey@quietmisdreavus.net", "date": "2018-03-22T00:57:10Z"}, "committer": {"name": "QuietMisdreavus", "email": "grey@quietmisdreavus.net", "date": "2018-03-22T00:57:10Z"}, "message": "add target_feature items to doc_cfg rustdoc test", "tree": {"sha": "dd6d01f514f919f805574ec324d1c5770cf90542", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/dd6d01f514f919f805574ec324d1c5770cf90542"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b3fb0d10f03fe7d8f2eaa705a972b0f45e1723db", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b3fb0d10f03fe7d8f2eaa705a972b0f45e1723db", "html_url": "https://github.com/rust-lang/rust/commit/b3fb0d10f03fe7d8f2eaa705a972b0f45e1723db", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b3fb0d10f03fe7d8f2eaa705a972b0f45e1723db/comments", "author": {"login": "QuietMisdreavus", "id": 5217170, "node_id": "MDQ6VXNlcjUyMTcxNzA=", "avatar_url": "https://avatars.githubusercontent.com/u/5217170?v=4", "gravatar_id": "", "url": "https://api.github.com/users/QuietMisdreavus", "html_url": "https://github.com/QuietMisdreavus", "followers_url": "https://api.github.com/users/QuietMisdreavus/followers", "following_url": "https://api.github.com/users/QuietMisdreavus/following{/other_user}", "gists_url": "https://api.github.com/users/QuietMisdreavus/gists{/gist_id}", "starred_url": "https://api.github.com/users/QuietMisdreavus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/QuietMisdreavus/subscriptions", "organizations_url": "https://api.github.com/users/QuietMisdreavus/orgs", "repos_url": "https://api.github.com/users/QuietMisdreavus/repos", "events_url": "https://api.github.com/users/QuietMisdreavus/events{/privacy}", "received_events_url": "https://api.github.com/users/QuietMisdreavus/received_events", "type": "User", "site_admin": false}, "committer": {"login": "QuietMisdreavus", "id": 5217170, "node_id": "MDQ6VXNlcjUyMTcxNzA=", "avatar_url": "https://avatars.githubusercontent.com/u/5217170?v=4", "gravatar_id": "", "url": "https://api.github.com/users/QuietMisdreavus", "html_url": "https://github.com/QuietMisdreavus", "followers_url": "https://api.github.com/users/QuietMisdreavus/followers", "following_url": "https://api.github.com/users/QuietMisdreavus/following{/other_user}", "gists_url": "https://api.github.com/users/QuietMisdreavus/gists{/gist_id}", "starred_url": "https://api.github.com/users/QuietMisdreavus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/QuietMisdreavus/subscriptions", "organizations_url": "https://api.github.com/users/QuietMisdreavus/orgs", "repos_url": "https://api.github.com/users/QuietMisdreavus/repos", "events_url": "https://api.github.com/users/QuietMisdreavus/events{/privacy}", "received_events_url": "https://api.github.com/users/QuietMisdreavus/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "017bfc361170d43fb9f93e6fed535e1719a680b4", "url": "https://api.github.com/repos/rust-lang/rust/commits/017bfc361170d43fb9f93e6fed535e1719a680b4", "html_url": "https://github.com/rust-lang/rust/commit/017bfc361170d43fb9f93e6fed535e1719a680b4"}], "stats": {"total": 24, "additions": 24, "deletions": 0}, "files": [{"sha": "ea8a13b034beb244eaf4a716864f1317ec70f07d", "filename": "src/test/rustdoc/doc-cfg.rs", "status": "modified", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/b3fb0d10f03fe7d8f2eaa705a972b0f45e1723db/src%2Ftest%2Frustdoc%2Fdoc-cfg.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b3fb0d10f03fe7d8f2eaa705a972b0f45e1723db/src%2Ftest%2Frustdoc%2Fdoc-cfg.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fdoc-cfg.rs?ref=b3fb0d10f03fe7d8f2eaa705a972b0f45e1723db", "patch": "@@ -9,6 +9,7 @@\n // except according to those terms.\n \n #![feature(doc_cfg)]\n+#![feature(target_feature, cfg_target_feature)]\n \n // @has doc_cfg/struct.Portable.html\n // @!has - '//*[@id=\"main\"]/*[@class=\"stability\"]/*[@class=\"stab portability\"]' ''\n@@ -45,3 +46,26 @@ pub mod unix_only {\n         fn unix_and_arm_only_function() {}\n     }\n }\n+\n+// tagging a function with `#[target_feature]` creates a doc(cfg(target_feature)) node for that\n+// item as well\n+\n+// the portability header is different on the module view versus the full view\n+// @has doc_cfg/index.html\n+// @matches - '//*[@class=\" module-item\"]//*[@class=\"stab portability\"]' '\\Aavx\\Z'\n+\n+// @has doc_cfg/fn.uses_target_feature.html\n+// @has - '//*[@id=\"main\"]/*[@class=\"stability\"]/*[@class=\"stab portability\"]' \\\n+//        'This is supported with target feature avx only.'\n+#[target_feature(enable = \"avx\")]\n+pub unsafe fn uses_target_feature() {\n+    content::should::be::irrelevant();\n+}\n+\n+// @has doc_cfg/fn.uses_cfg_target_feature.html\n+// @has - '//*[@id=\"main\"]/*[@class=\"stability\"]/*[@class=\"stab portability\"]' \\\n+//        'This is supported with target feature avx only.'\n+#[doc(cfg(target_feature = \"avx\"))]\n+pub fn uses_cfg_target_feature() {\n+    uses_target_feature();\n+}"}]}