{"sha": "aa1e331469509a0029f2dcdd0577b4c203fcaf14", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFhMWUzMzE0Njk1MDlhMDAyOWYyZGNkZDA1NzdiNGMyMDNmY2FmMTQ=", "commit": {"author": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2011-03-20T01:34:19Z"}, "committer": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2011-03-20T01:34:51Z"}, "message": "Set up dynamic library paths properly in builddir.", "tree": {"sha": "646e18ea52fc98d6fdd0ac1da52ba204f2bc25d8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/646e18ea52fc98d6fdd0ac1da52ba204f2bc25d8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/aa1e331469509a0029f2dcdd0577b4c203fcaf14", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/aa1e331469509a0029f2dcdd0577b4c203fcaf14", "html_url": "https://github.com/rust-lang/rust/commit/aa1e331469509a0029f2dcdd0577b4c203fcaf14", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/aa1e331469509a0029f2dcdd0577b4c203fcaf14/comments", "author": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "committer": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "724a9a392abc979826c57b238ec25446fe55967b", "url": "https://api.github.com/repos/rust-lang/rust/commits/724a9a392abc979826c57b238ec25446fe55967b", "html_url": "https://github.com/rust-lang/rust/commit/724a9a392abc979826c57b238ec25446fe55967b"}], "stats": {"total": 15, "additions": 12, "deletions": 3}, "files": [{"sha": "a83c0c6fa274ea2a843596a20e459a447c9564e8", "filename": "Makefile.in", "status": "modified", "additions": 12, "deletions": 3, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/aa1e331469509a0029f2dcdd0577b4c203fcaf14/Makefile.in", "raw_url": "https://github.com/rust-lang/rust/raw/aa1e331469509a0029f2dcdd0577b4c203fcaf14/Makefile.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Makefile.in?ref=aa1e331469509a0029f2dcdd0577b4c203fcaf14", "patch": "@@ -60,12 +60,17 @@ ifneq ($(findstring MINGW,$(CFG_OSTYPE)),)\n   CFG_WINDOWSY := 1\n endif\n \n+CFG_LDPATH :=$(CFG_BUILD_DIR)/rt\n+CFG_LDPATH :=$(CFG_LDPATH):$(CFG_BUILD_DIR)/llvmext\n+\n ifdef CFG_WINDOWSY\n   CFG_INFO := $(info cfg: windows-y environment)\n \n   CFG_EXE_SUFFIX := .exe\n   CFG_LIB_NAME=$(1).dll\n-  CFG_RUN_PROGRAM=$(1)\n+  CFG_LDPATH :=$(CFG_LDPATH):$(CFG_LLVM_BINDIR)\n+  CFG_LDPATH :=$(CFG_LDPATH):$$PATH\n+  CFG_RUN_PROGRAM=PATH=$(CFG_LDPATH) $(1)\n \n   CFG_PATH_MUNGE := $(strip | perl -p                  \\\n                            -e 's@\\\\(.)@/\\1@go;'        \\\n@@ -81,14 +86,18 @@ ifdef CFG_UNIXY\n   CFG_INFO := $(info cfg: unix-y environment)\n \n   CFG_EXE_SUFFIX :=\n-  CFG_RUN_PROGRAM=LD_LIBRARY_PATH=$(dir $(1)) $(CFG_VALGRIND) $(1)\n+  CFG_LDPATH :=$(CFG_LDPATH):$(CFG_LLVM_LIBDIR)\n+  CFG_RUN_PROGRAM=\\\n+      LD_LIBRARY_PATH=$(dir $(1)):$(CFG_LDPATH) $(CFG_VALGRIND) $(1)\n \n   CFG_BOOT_NATIVE := 1\n \n   ifdef MINGW_CROSS\n     CFG_EXE_SUFFIX := .exe\n     CFG_LIB_NAME=$(1).dll\n-    CFG_RUN_PROGRAM=$(1)\n+    CFG_LDPATH :=$(CFG_LDPATH):$(CFG_LLVM_BINDIR)\n+    CFG_LDPATH :=$(CFG_LDPATH):$$PATH\n+    CFG_RUN_PROGRAM=PATH=$(CFG_LDPATH) $(1)\n \n     CFG_INFO := $(info cfg: mingw-cross)\n     CFG_GCC_CROSS := i586-mingw32msvc-"}]}