{"sha": "65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY1Y2NhN2M4YjE0ZTljNTY3M2FmNDkyMWE1N2MyY2NiYWMzZmMyY2I=", "commit": {"author": {"name": "Steven Fackler", "email": "sfackler@gmail.com", "date": "2014-08-04T00:41:58Z"}, "committer": {"name": "Steven Fackler", "email": "sfackler@gmail.com", "date": "2014-09-24T06:49:20Z"}, "message": "Deprecate `#[ignore(cfg(...))]`\n\nReplace `#[ignore(cfg(a, b))]` with `#[cfg_attr(all(a, b), ignore)]`", "tree": {"sha": "2a693f86b51ea3725368b408efcc25d83041b9bd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2a693f86b51ea3725368b408efcc25d83041b9bd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb", "html_url": "https://github.com/rust-lang/rust/commit/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/comments", "author": {"login": "sfackler", "id": 1455697, "node_id": "MDQ6VXNlcjE0NTU2OTc=", "avatar_url": "https://avatars.githubusercontent.com/u/1455697?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sfackler", "html_url": "https://github.com/sfackler", "followers_url": "https://api.github.com/users/sfackler/followers", "following_url": "https://api.github.com/users/sfackler/following{/other_user}", "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}", "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions", "organizations_url": "https://api.github.com/users/sfackler/orgs", "repos_url": "https://api.github.com/users/sfackler/repos", "events_url": "https://api.github.com/users/sfackler/events{/privacy}", "received_events_url": "https://api.github.com/users/sfackler/received_events", "type": "User", "site_admin": false}, "committer": {"login": "sfackler", "id": 1455697, "node_id": "MDQ6VXNlcjE0NTU2OTc=", "avatar_url": "https://avatars.githubusercontent.com/u/1455697?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sfackler", "html_url": "https://github.com/sfackler", "followers_url": "https://api.github.com/users/sfackler/followers", "following_url": "https://api.github.com/users/sfackler/following{/other_user}", "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}", "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions", "organizations_url": "https://api.github.com/users/sfackler/orgs", "repos_url": "https://api.github.com/users/sfackler/repos", "events_url": "https://api.github.com/users/sfackler/events{/privacy}", "received_events_url": "https://api.github.com/users/sfackler/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e520bb1b2f1667f17c3503af71273921c4fc9989", "url": "https://api.github.com/repos/rust-lang/rust/commits/e520bb1b2f1667f17c3503af71273921c4fc9989", "html_url": "https://github.com/rust-lang/rust/commit/e520bb1b2f1667f17c3503af71273921c4fc9989"}], "stats": {"total": 48, "additions": 28, "deletions": 20}, "files": [{"sha": "07813855d9b9bb1e95a61bd7301f84c14c3927aa", "filename": "src/doc/guide-testing.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/src%2Fdoc%2Fguide-testing.md", "raw_url": "https://github.com/rust-lang/rust/raw/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/src%2Fdoc%2Fguide-testing.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Fguide-testing.md?ref=65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb", "patch": "@@ -72,8 +72,8 @@ is not used.\n Tests that should not be run can be annotated with the `ignore`\n attribute. The existence of these tests will be noted in the test\n runner output, but the test will not be run. Tests can also be ignored\n-by configuration so, for example, to ignore a test on windows you can\n-write `#[ignore(cfg(target_os = \"win32\"))]`.\n+by configuration using the `cfg_attr` attribute so, for example, to ignore a\n+test on windows you can write `#[cfg_attr(windows, ignore)]`.\n \n Tests that are intended to fail can be annotated with the\n `should_fail` attribute. The test will be run, and if it causes its"}, {"sha": "97d48df600ee4f1bc1d9b3d50560a752e46f6e35", "filename": "src/libnative/io/file_unix.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/src%2Flibnative%2Fio%2Ffile_unix.rs", "raw_url": "https://github.com/rust-lang/rust/raw/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/src%2Flibnative%2Fio%2Ffile_unix.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibnative%2Fio%2Ffile_unix.rs?ref=65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb", "patch": "@@ -506,7 +506,7 @@ mod tests {\n     use std::os;\n     use std::rt::rtio::{RtioFileStream, SeekSet};\n \n-    #[ignore(cfg(target_os = \"freebsd\"))] // hmm, maybe pipes have a tiny buffer\n+    #[cfg_attr(target_os = \"freebsd\", ignore)] // hmm, maybe pipes have a tiny buffer\n     #[test]\n     fn test_file_desc() {\n         // Run this test with some pipes so we don't have to mess around with"}, {"sha": "0e70527cdca7965cc827e4e2fa368b7cc492dbc0", "filename": "src/libnum/complex.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/src%2Flibnum%2Fcomplex.rs", "raw_url": "https://github.com/rust-lang/rust/raw/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/src%2Flibnum%2Fcomplex.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibnum%2Fcomplex.rs?ref=65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb", "patch": "@@ -219,7 +219,7 @@ mod test {\n     }\n \n     #[test]\n-    #[ignore(cfg(target_arch = \"x86\"))]\n+    #[cfg_attr(target_arch = \"x86\", ignore)]\n     // FIXME #7158: (maybe?) currently failing on x86.\n     fn test_norm() {\n         fn test(c: Complex64, ns: f64) {"}, {"sha": "3531d162db08115968eae31dde7f78cdd2c946cf", "filename": "src/librustuv/net.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/src%2Flibrustuv%2Fnet.rs", "raw_url": "https://github.com/rust-lang/rust/raw/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/src%2Flibrustuv%2Fnet.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustuv%2Fnet.rs?ref=65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb", "patch": "@@ -1085,7 +1085,7 @@ mod test {\n     }\n \n     #[test]\n-    #[ignore(cfg(windows))] // FIXME(#10102) server never sees second packet\n+    #[cfg_attr(windows, ignore)] // FIXME(#10102) server never sees second packet\n     fn test_udp_twice() {\n         let server_addr = ::next_test_ip4();\n         let client_addr = ::next_test_ip4();"}, {"sha": "7cb448cf15c3abea0131f0bafde90853c29e7a11", "filename": "src/libserialize/json.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/src%2Flibserialize%2Fjson.rs", "raw_url": "https://github.com/rust-lang/rust/raw/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/src%2Flibserialize%2Fjson.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibserialize%2Fjson.rs?ref=65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb", "patch": "@@ -3352,7 +3352,7 @@ mod tests {\n         }\n     }\n     #[test]\n-    #[ignore(cfg(target_word_size = \"32\"))] // FIXME(#14064)\n+    #[cfg_attr(target_word_size = \"32\", ignore)] // FIXME(#14064)\n     fn test_streaming_parser() {\n         assert_stream_equal(\n             r#\"{ \"foo\":\"bar\", \"array\" : [0, 1, 2, 3, 4, 5], \"idents\":[null,true,false]}\"#,\n@@ -3388,7 +3388,7 @@ mod tests {\n     }\n \n     #[test]\n-    #[ignore(cfg(target_word_size = \"32\"))] // FIXME(#14064)\n+    #[cfg_attr(target_word_size = \"32\", ignore)] // FIXME(#14064)\n     fn test_read_object_streaming() {\n         assert_eq!(last_event(\"{ \"),      Error(SyntaxError(EOFWhileParsingObject, 1, 3)));\n         assert_eq!(last_event(\"{1\"),      Error(SyntaxError(KeyMustBeAString,      1, 2)));\n@@ -3461,7 +3461,7 @@ mod tests {\n         );\n     }\n     #[test]\n-    #[ignore(cfg(target_word_size = \"32\"))] // FIXME(#14064)\n+    #[cfg_attr(target_word_size = \"32\", ignore)] // FIXME(#14064)\n     fn test_read_list_streaming() {\n         assert_stream_equal(\n             \"[]\","}, {"sha": "a88448f47e0c6e9c62f3bfdc1e783242cba51ca4", "filename": "src/libstd/dynamic_lib.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/src%2Flibstd%2Fdynamic_lib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/src%2Flibstd%2Fdynamic_lib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fdynamic_lib.rs?ref=65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb", "patch": "@@ -162,8 +162,7 @@ mod test {\n     use mem;\n \n     #[test]\n-    #[ignore(cfg(windows))] // FIXME #8818\n-    #[ignore(cfg(target_os=\"android\"))] // FIXME(#10379)\n+    #[cfg_attr(any(windows, target_os = \"android\"), ignore)] // FIXME #8818, #10379\n     fn test_loading_cosine() {\n         // The math library does not need to be loaded since it is already\n         // statically linked in"}, {"sha": "9faa018237245c5e651409c1a9715523e625a412", "filename": "src/libstd/io/net/pipe.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/src%2Flibstd%2Fio%2Fnet%2Fpipe.rs", "raw_url": "https://github.com/rust-lang/rust/raw/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/src%2Flibstd%2Fio%2Fnet%2Fpipe.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Fnet%2Fpipe.rs?ref=65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb", "patch": "@@ -320,7 +320,7 @@ mod tests {\n         }, proc(_client) {\n             // drop the client\n         })\n-    } #[ignore(cfg(windows))]) // FIXME(#12516)\n+    } #[cfg_attr(windows, ignore)]) // FIXME(#12516)\n \n     iotest!(fn write_begone() {\n         smalltest(proc(mut server) {"}, {"sha": "65d8f1c9c776458c4dbfa98dbd254d31ba4a256f", "filename": "src/libstd/io/net/tcp.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/src%2Flibstd%2Fio%2Fnet%2Ftcp.rs", "raw_url": "https://github.com/rust-lang/rust/raw/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/src%2Flibstd%2Fio%2Fnet%2Ftcp.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Fnet%2Ftcp.rs?ref=65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb", "patch": "@@ -533,7 +533,7 @@ mod test {\n             Ok(..) => fail!(),\n             Err(e) => assert_eq!(e.kind, PermissionDenied),\n         }\n-    } #[ignore(cfg(windows))] #[ignore(cfg(target_os = \"android\"))])\n+    } #[cfg_attr(any(windows, target_os = \"android\"), ignore)])\n \n     iotest!(fn connect_error() {\n         match TcpStream::connect(\"0.0.0.0\", 1) {"}, {"sha": "9718ceb1185551123692a928337841ffa91a91f1", "filename": "src/libstd/io/net/udp.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/src%2Flibstd%2Fio%2Fnet%2Fudp.rs", "raw_url": "https://github.com/rust-lang/rust/raw/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/src%2Flibstd%2Fio%2Fnet%2Fudp.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Fnet%2Fudp.rs?ref=65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb", "patch": "@@ -273,7 +273,7 @@ mod test {\n             Ok(..) => fail!(),\n             Err(e) => assert_eq!(e.kind, PermissionDenied),\n         }\n-    } #[ignore(cfg(windows))] #[ignore(cfg(target_os = \"android\"))])\n+    } #[cfg_attr(any(windows, target_os = \"android\"), ignore)])\n \n     iotest!(fn socket_smoke_test_ip4() {\n         let server_ip = next_test_ip4();"}, {"sha": "b2a9f1b7b20d338211899ab8d796d59bd2741d77", "filename": "src/libstd/num/f32.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/src%2Flibstd%2Fnum%2Ff32.rs", "raw_url": "https://github.com/rust-lang/rust/raw/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/src%2Flibstd%2Fnum%2Ff32.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fnum%2Ff32.rs?ref=65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb", "patch": "@@ -766,7 +766,7 @@ mod tests {\n         assert_eq!((-0f32).frexp(), (-0f32, 0));\n     }\n \n-    #[test] #[ignore(cfg(windows))] // FIXME #8755\n+    #[test] #[cfg_attr(windows, ignore)] // FIXME #8755\n     fn test_frexp_nowin() {\n         let inf: f32 = Float::infinity();\n         let neg_inf: f32 = Float::neg_infinity();"}, {"sha": "6fe9fcad2aad7c177a8db243ad603d967e0ab6a2", "filename": "src/libstd/num/f64.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/src%2Flibstd%2Fnum%2Ff64.rs", "raw_url": "https://github.com/rust-lang/rust/raw/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/src%2Flibstd%2Fnum%2Ff64.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fnum%2Ff64.rs?ref=65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb", "patch": "@@ -768,7 +768,7 @@ mod tests {\n         assert_eq!((-0f64).frexp(), (-0f64, 0));\n     }\n \n-    #[test] #[ignore(cfg(windows))] // FIXME #8755\n+    #[test] #[cfg_attr(windows, ignore)] // FIXME #8755\n     fn test_frexp_nowin() {\n         let inf: f64 = Float::infinity();\n         let neg_inf: f64 = Float::neg_infinity();"}, {"sha": "15c0c14b28a86d587f75d2c48c9550f2d944237f", "filename": "src/libsync/deque.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/src%2Flibsync%2Fdeque.rs", "raw_url": "https://github.com/rust-lang/rust/raw/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/src%2Flibsync%2Fdeque.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsync%2Fdeque.rs?ref=65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb", "patch": "@@ -600,7 +600,7 @@ mod tests {\n     }\n \n     #[test]\n-    #[ignore(cfg(windows))] // apparently windows scheduling is weird?\n+    #[cfg_attr(windows, ignore)] // apparently windows scheduling is weird?\n     fn no_starvation() {\n         static AMT: int = 10000;\n         static NTHREADS: int = 4;"}, {"sha": "b6e3023d2ae3a944f67733ec0cf8df62f4d28c5c", "filename": "src/libsyntax/test.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/src%2Flibsyntax%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/src%2Flibsyntax%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Ftest.rs?ref=65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb", "patch": "@@ -339,6 +339,12 @@ fn is_ignored(cx: &TestCtxt, i: &ast::Item) -> bool {\n         // check ignore(cfg(foo, bar))\n         attr.check_name(\"ignore\") && match attr.meta_item_list() {\n             Some(ref cfgs) => {\n+                if cfgs.iter().any(|cfg| cfg.check_name(\"cfg\")) {\n+                    cx.sess.span_warn(attr.span,\n+                            \"The use of cfg filters in #[ignore] is \\\n+                             deprecated. Use #[cfg_attr(<cfg pattern>, \\\n+                             ignore)] instead.\");\n+                }\n                 attr::test_cfg(cx.config.as_slice(), cfgs.iter())\n             }\n             None => true"}, {"sha": "04489d780278dbc3245afbe71078a5676072ba9b", "filename": "src/libtest/lib.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/src%2Flibtest%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/src%2Flibtest%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibtest%2Flib.rs?ref=65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb", "patch": "@@ -356,8 +356,7 @@ Test Attributes:\n     #[ignore]      - When applied to a function which is already attributed as a\n                      test, then the test runner will ignore these tests during\n                      normal test runs. Running with --ignored will run these\n-                     tests. This may also be written as #[ignore(cfg(...))] to\n-                     ignore the test on certain configurations.\",\n+                     tests.\",\n              usage = getopts::usage(message.as_slice(),\n                                     optgroups().as_slice()));\n }"}, {"sha": "9cec71104d403f3efe66f7784dabfb37f7e4070f", "filename": "src/libtime/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/src%2Flibtime%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/src%2Flibtime%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibtime%2Flib.rs?ref=65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb", "patch": "@@ -1564,7 +1564,7 @@ mod tests {\n     }\n \n     #[test]\n-    #[ignore(cfg(target_os = \"android\"))] // FIXME #10958\n+    #[cfg_attr(target_os = \"android\", ignore)] // FIXME #10958\n     fn run_tests() {\n         // The tests race on tzset. So instead of having many independent\n         // tests, we will just call the functions now."}, {"sha": "15d3f4a04d57ae6bb1e4186d884ed6a1f29c7605", "filename": "src/test/run-pass/cfg_attr.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/src%2Ftest%2Frun-pass%2Fcfg_attr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/src%2Ftest%2Frun-pass%2Fcfg_attr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fcfg_attr.rs?ref=65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb", "patch": "@@ -44,6 +44,9 @@ struct Complex;\n #[cfg_attr(any(notset, not(any(set1, notset))), deriving(Show))]\n struct ComplexNot(NotShowable);\n \n+#[cfg_attr(any(target_endian = \"little\", target_endian = \"big\"), deriving(Show))]\n+struct KeyValue;\n+\n fn is_show<T: Show>() {}\n \n fn main() {\n@@ -52,4 +55,5 @@ fn main() {\n     is_show::<AllSet1Set2>();\n     is_show::<AnySet1Notset>();\n     is_show::<Complex>();\n+    is_show::<KeyValue>();\n }"}, {"sha": "00906004dbfb0cc06cb27d85ef1037ee511f7dc4", "filename": "src/test/run-pass/tcp-connect-timeouts.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/src%2Ftest%2Frun-pass%2Ftcp-connect-timeouts.rs", "raw_url": "https://github.com/rust-lang/rust/raw/65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb/src%2Ftest%2Frun-pass%2Ftcp-connect-timeouts.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Ftcp-connect-timeouts.rs?ref=65cca7c8b14e9c5673af4921a57c2ccbac3fc2cb", "patch": "@@ -80,7 +80,7 @@ iotest!(fn eventual_timeout() {\n         }\n     }\n     fail!(\"never timed out!\");\n-} #[ignore(cfg(target_os = \"freebsd\"))])\n+} #[cfg_attr(target_os = \"freebsd\", ignore)])\n \n iotest!(fn timeout_success() {\n     let addr = next_test_ip4();"}]}