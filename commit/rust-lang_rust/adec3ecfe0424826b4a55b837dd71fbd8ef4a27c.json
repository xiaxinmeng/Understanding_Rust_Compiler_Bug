{"sha": "adec3ecfe0424826b4a55b837dd71fbd8ef4a27c", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFkZWMzZWNmZTA0MjQ4MjZiNGE1NWI4MzdkZDcxZmJkOGVmNGEyN2M=", "commit": {"author": {"name": "Marijn Haverbeke", "email": "marijnh@gmail.com", "date": "2011-08-30T11:10:10Z"}, "committer": {"name": "Marijn Haverbeke", "email": "marijnh@gmail.com", "date": "2011-08-30T11:10:10Z"}, "message": "Remove compiler-bug-workaround that's no longer needed", "tree": {"sha": "b7e4651a54b4474f91eb771e15cd356f9a05c303", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b7e4651a54b4474f91eb771e15cd356f9a05c303"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/adec3ecfe0424826b4a55b837dd71fbd8ef4a27c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/adec3ecfe0424826b4a55b837dd71fbd8ef4a27c", "html_url": "https://github.com/rust-lang/rust/commit/adec3ecfe0424826b4a55b837dd71fbd8ef4a27c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/adec3ecfe0424826b4a55b837dd71fbd8ef4a27c/comments", "author": {"login": "marijnh", "id": 144427, "node_id": "MDQ6VXNlcjE0NDQyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/144427?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marijnh", "html_url": "https://github.com/marijnh", "followers_url": "https://api.github.com/users/marijnh/followers", "following_url": "https://api.github.com/users/marijnh/following{/other_user}", "gists_url": "https://api.github.com/users/marijnh/gists{/gist_id}", "starred_url": "https://api.github.com/users/marijnh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marijnh/subscriptions", "organizations_url": "https://api.github.com/users/marijnh/orgs", "repos_url": "https://api.github.com/users/marijnh/repos", "events_url": "https://api.github.com/users/marijnh/events{/privacy}", "received_events_url": "https://api.github.com/users/marijnh/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marijnh", "id": 144427, "node_id": "MDQ6VXNlcjE0NDQyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/144427?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marijnh", "html_url": "https://github.com/marijnh", "followers_url": "https://api.github.com/users/marijnh/followers", "following_url": "https://api.github.com/users/marijnh/following{/other_user}", "gists_url": "https://api.github.com/users/marijnh/gists{/gist_id}", "starred_url": "https://api.github.com/users/marijnh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marijnh/subscriptions", "organizations_url": "https://api.github.com/users/marijnh/orgs", "repos_url": "https://api.github.com/users/marijnh/repos", "events_url": "https://api.github.com/users/marijnh/events{/privacy}", "received_events_url": "https://api.github.com/users/marijnh/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c1ba28c7779a68b74b26ef70acd81d324d97e7dc", "url": "https://api.github.com/repos/rust-lang/rust/commits/c1ba28c7779a68b74b26ef70acd81d324d97e7dc", "html_url": "https://github.com/rust-lang/rust/commit/c1ba28c7779a68b74b26ef70acd81d324d97e7dc"}], "stats": {"total": 18, "additions": 4, "deletions": 14}, "files": [{"sha": "f7e1d4a27bc76efb650105378d30b034f268fed2", "filename": "src/comp/middle/trans.rs", "status": "modified", "additions": 4, "deletions": 14, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/adec3ecfe0424826b4a55b837dd71fbd8ef4a27c/src%2Fcomp%2Fmiddle%2Ftrans.rs", "raw_url": "https://github.com/rust-lang/rust/raw/adec3ecfe0424826b4a55b837dd71fbd8ef4a27c/src%2Fcomp%2Fmiddle%2Ftrans.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Ftrans.rs?ref=adec3ecfe0424826b4a55b837dd71fbd8ef4a27c", "patch": "@@ -1663,17 +1663,6 @@ type val_fn = fn(&@block_ctxt, ValueRef) -> result;\n type val_and_ty_fn = fn(&@block_ctxt, ValueRef, ty::t) -> result;\n \n \n-// Iterates through the elements of a structural type.\n-fn iter_structural_ty(cx: &@block_ctxt, v: ValueRef, t: ty::t,\n-                      f: val_and_ty_fn) -> result {\n-    fn adaptor_fn(f: val_and_ty_fn, cx: &@block_ctxt, av: ValueRef, t: ty::t)\n-       -> result {\n-        ret f(cx, av, t);\n-    }\n-    let x = iter_structural_ty_full(cx, v, t, bind adaptor_fn(f, _, _, _));\n-    ret x;\n-}\n-\n fn load_inbounds(cx: &@block_ctxt, p: ValueRef, idxs: &[ValueRef]) ->\n    ValueRef {\n     ret Load(cx, InBoundsGEP(cx, p, idxs));\n@@ -1690,8 +1679,9 @@ fn incr_ptr(cx: &@block_ctxt, p: ValueRef, incr: ValueRef, pp: ValueRef) {\n     Store(cx, InBoundsGEP(cx, p, [incr]), pp);\n }\n \n-fn iter_structural_ty_full(cx: &@block_ctxt, av: ValueRef, t: ty::t,\n-                           f: &val_and_ty_fn) -> result {\n+// Iterates through the elements of a structural type.\n+fn iter_structural_ty(cx: &@block_ctxt, av: ValueRef, t: ty::t,\n+                      f: &val_and_ty_fn) -> result {\n     fn iter_boxpp(cx: @block_ctxt, box_cell: ValueRef, f: &val_and_ty_fn) ->\n        result {\n         let box_ptr = Load(cx, box_cell);\n@@ -1808,7 +1798,7 @@ fn iter_structural_ty_full(cx: &@block_ctxt, av: ValueRef, t: ty::t,\n             GEP(cx, av, [C_int(0), C_int(abi::obj_field_box)]);\n         ret iter_boxpp(cx, box_cell_a, f);\n       }\n-      _ { bcx_ccx(cx).sess.unimpl(~\"type in iter_structural_ty_full\"); }\n+      _ { bcx_ccx(cx).sess.unimpl(~\"type in iter_structural_ty\"); }\n     }\n     ret r;\n }"}]}