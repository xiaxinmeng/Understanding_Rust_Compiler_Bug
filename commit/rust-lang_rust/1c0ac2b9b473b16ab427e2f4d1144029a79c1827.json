{"sha": "1c0ac2b9b473b16ab427e2f4d1144029a79c1827", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFjMGFjMmI5YjQ3M2IxNmFiNDI3ZTJmNGQxMTQ0MDI5YTc5YzE4Mjc=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-08-26T16:36:16Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-08-26T16:36:16Z"}, "message": "Cleanup hover links tests", "tree": {"sha": "b6a26405a93554c3b2508f36f34735dedeb4d8a9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b6a26405a93554c3b2508f36f34735dedeb4d8a9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1c0ac2b9b473b16ab427e2f4d1144029a79c1827", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1c0ac2b9b473b16ab427e2f4d1144029a79c1827", "html_url": "https://github.com/rust-lang/rust/commit/1c0ac2b9b473b16ab427e2f4d1144029a79c1827", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1c0ac2b9b473b16ab427e2f4d1144029a79c1827/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "84acd56e978de792db278b624458b96d52fa7b73", "url": "https://api.github.com/repos/rust-lang/rust/commits/84acd56e978de792db278b624458b96d52fa7b73", "html_url": "https://github.com/rust-lang/rust/commit/84acd56e978de792db278b624458b96d52fa7b73"}], "stats": {"total": 162, "additions": 74, "deletions": 88}, "files": [{"sha": "53641170481fccac78925bc719b442a257a1b920", "filename": "crates/ide/src/hover.rs", "status": "modified", "additions": 74, "deletions": 88, "changes": 162, "blob_url": "https://github.com/rust-lang/rust/blob/1c0ac2b9b473b16ab427e2f4d1144029a79c1827/crates%2Fide%2Fsrc%2Fhover.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1c0ac2b9b473b16ab427e2f4d1144029a79c1827/crates%2Fide%2Fsrc%2Fhover.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Fhover.rs?ref=1c0ac2b9b473b16ab427e2f4d1144029a79c1827", "patch": "@@ -1407,12 +1407,11 @@ fn foo() { let bar = Ba<|>r; }\n     #[test]\n     fn test_hover_path_link() {\n         check(\n-            r\"\n-            //- /lib.rs\n-            pub struct Foo;\n-            /// [Foo](struct.Foo.html)\n-            pub struct B<|>ar\n-            \",\n+            r#\"\n+pub struct Foo;\n+/// [Foo](struct.Foo.html)\n+pub struct B<|>ar\n+\"#,\n             expect![[r#\"\n                 *Bar*\n \n@@ -1434,12 +1433,11 @@ fn foo() { let bar = Ba<|>r; }\n     #[test]\n     fn test_hover_path_link_no_strip() {\n         check(\n-            r\"\n-            //- /lib.rs\n-            pub struct Foo;\n-            /// [struct Foo](struct.Foo.html)\n-            pub struct B<|>ar\n-            \",\n+            r#\"\n+pub struct Foo;\n+/// [struct Foo](struct.Foo.html)\n+pub struct B<|>ar\n+\"#,\n             expect![[r#\"\n                 *Bar*\n \n@@ -1462,14 +1460,13 @@ fn foo() { let bar = Ba<|>r; }\n     #[test]\n     fn test_hover_path_link_field() {\n         check(\n-            r\"\n-            //- /lib.rs\n-            pub struct Foo;\n-            pub struct Bar {\n-                /// [Foo](struct.Foo.html)\n-                fie<|>ld: ()\n-            }\n-            \",\n+            r#\"\n+pub struct Foo;\n+pub struct Bar {\n+    /// [Foo](struct.Foo.html)\n+    fie<|>ld: ()\n+}\n+\"#,\n             expect![[r#\"\n                 *field*\n \n@@ -1491,14 +1488,13 @@ fn foo() { let bar = Ba<|>r; }\n     #[test]\n     fn test_hover_intra_link() {\n         check(\n-            r\"\n-            //- /lib.rs\n-            pub mod foo {\n-                pub struct Foo;\n-            }\n-            /// [Foo](foo::Foo)\n-            pub struct B<|>ar\n-            \",\n+            r#\"\n+pub mod foo {\n+    pub struct Foo;\n+}\n+/// [Foo](foo::Foo)\n+pub struct B<|>ar\n+\"#,\n             expect![[r#\"\n                 *Bar*\n \n@@ -1521,16 +1517,14 @@ fn foo() { let bar = Ba<|>r; }\n     fn test_hover_intra_link_html_root_url() {\n         check(\n             r#\"\n-            //- /lib.rs\n-\n-            #![doc(arbitrary_attribute = \"test\", html_root_url = \"https:/example.com\", arbitrary_attribute2)]\n+#![doc(arbitrary_attribute = \"test\", html_root_url = \"https:/example.com\", arbitrary_attribute2)]\n \n-            pub mod foo {\n-                pub struct Foo;\n-            }\n-            /// [Foo](foo::Foo)\n-            pub struct B<|>ar\n-            \"#,\n+pub mod foo {\n+    pub struct Foo;\n+}\n+/// [Foo](foo::Foo)\n+pub struct B<|>ar\n+\"#,\n             expect![[r#\"\n                 *Bar*\n \n@@ -1552,12 +1546,11 @@ fn foo() { let bar = Ba<|>r; }\n     #[test]\n     fn test_hover_intra_link_shortlink() {\n         check(\n-            r\"\n-            //- /lib.rs\n-            pub struct Foo;\n-            /// [Foo]\n-            pub struct B<|>ar\n-            \",\n+            r#\"\n+pub struct Foo;\n+/// [Foo]\n+pub struct B<|>ar\n+\"#,\n             expect![[r#\"\n                 *Bar*\n \n@@ -1579,12 +1572,11 @@ fn foo() { let bar = Ba<|>r; }\n     #[test]\n     fn test_hover_intra_link_shortlink_code() {\n         check(\n-            r\"\n-            //- /lib.rs\n-            pub struct Foo;\n-            /// [`Foo`]\n-            pub struct B<|>ar\n-            \",\n+            r#\"\n+pub struct Foo;\n+/// [`Foo`]\n+pub struct B<|>ar\n+\"#,\n             expect![[r#\"\n                 *Bar*\n \n@@ -1606,13 +1598,12 @@ fn foo() { let bar = Ba<|>r; }\n     #[test]\n     fn test_hover_intra_link_namespaced() {\n         check(\n-            r\"\n-            //- /lib.rs\n-            pub struct Foo;\n-            fn Foo() {}\n-            /// [Foo()]\n-            pub struct B<|>ar\n-            \",\n+            r#\"\n+pub struct Foo;\n+fn Foo() {}\n+/// [Foo()]\n+pub struct B<|>ar\n+\"#,\n             expect![[r#\"\n                 *Bar*\n \n@@ -1634,12 +1625,11 @@ fn foo() { let bar = Ba<|>r; }\n     #[test]\n     fn test_hover_intra_link_shortlink_namspaced_code() {\n         check(\n-            r\"\n-            //- /lib.rs\n-            pub struct Foo;\n-            /// [`struct Foo`]\n-            pub struct B<|>ar\n-            \",\n+            r#\"\n+pub struct Foo;\n+/// [`struct Foo`]\n+pub struct B<|>ar\n+\"#,\n             expect![[r#\"\n                 *Bar*\n \n@@ -1661,12 +1651,11 @@ fn foo() { let bar = Ba<|>r; }\n     #[test]\n     fn test_hover_intra_link_shortlink_namspaced_code_with_at() {\n         check(\n-            r\"\n-            //- /lib.rs\n-            pub struct Foo;\n-            /// [`struct@Foo`]\n-            pub struct B<|>ar\n-            \",\n+            r#\"\n+pub struct Foo;\n+/// [`struct@Foo`]\n+pub struct B<|>ar\n+\"#,\n             expect![[r#\"\n                 *Bar*\n \n@@ -1688,14 +1677,13 @@ fn foo() { let bar = Ba<|>r; }\n     #[test]\n     fn test_hover_intra_link_reference() {\n         check(\n-            r\"\n-            //- /lib.rs\n-            pub struct Foo;\n-            /// [my Foo][foo]\n-            ///\n-            /// [foo]: Foo\n-            pub struct B<|>ar\n-            \",\n+            r#\"\n+pub struct Foo;\n+/// [my Foo][foo]\n+///\n+/// [foo]: Foo\n+pub struct B<|>ar\n+\"#,\n             expect![[r#\"\n                 *Bar*\n \n@@ -1717,12 +1705,11 @@ fn foo() { let bar = Ba<|>r; }\n     #[test]\n     fn test_hover_external_url() {\n         check(\n-            r\"\n-            //- /lib.rs\n-            pub struct Foo;\n-            /// [external](https://www.google.com)\n-            pub struct B<|>ar\n-            \",\n+            r#\"\n+pub struct Foo;\n+/// [external](https://www.google.com)\n+pub struct B<|>ar\n+\"#,\n             expect![[r#\"\n                 *Bar*\n \n@@ -1745,12 +1732,11 @@ fn foo() { let bar = Ba<|>r; }\n     #[test]\n     fn test_hover_unknown_target() {\n         check(\n-            r\"\n-            //- /lib.rs\n-            pub struct Foo;\n-            /// [baz](Baz)\n-            pub struct B<|>ar\n-            \",\n+            r#\"\n+pub struct Foo;\n+/// [baz](Baz)\n+pub struct B<|>ar\n+\"#,\n             expect![[r#\"\n                 *Bar*\n "}]}