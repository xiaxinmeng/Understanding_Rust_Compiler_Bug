{"sha": "391562706de61db09222e06d613a42d641b318f6", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM5MTU2MjcwNmRlNjFkYjA5MjIyZTA2ZDYxM2E0MmQ2NDFiMzE4ZjY=", "commit": {"author": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2018-05-25T06:11:15Z"}, "committer": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2018-05-25T06:11:15Z"}, "message": "Don't run deploy script in integration tests\n\nThe deploy.sh was causing random integration tests to fail, possibly due to\nmultiple jobs trying to push to the same repo/branch at the same time?\n\nThe error message is:\n\n    +git push git@github.com:rust-lang-nursery/rust-clippy.git gh-pages\n    Warning: Permanently added the RSA host key for IP address '192.30.253.112' to the list of known hosts.\n    To github.com:rust-lang-nursery/rust-clippy.git\n     ! [rejected]          gh-pages -> gh-pages (fetch first)\n    error: failed to push some refs to 'git@github.com:rust-lang-nursery/rust-clippy.git'\n    hint: Updates were rejected because the re\n\nThe travis log is always truncated in similar ways.\n\nSome examples:\n\n* https://travis-ci.org/rust-lang-nursery/rust-clippy/jobs/383325083#L1076-L1082\n* https://travis-ci.org/rust-lang-nursery/rust-clippy/jobs/382711561#L2768-L2773", "tree": {"sha": "67239d7f85c2ba293fc248ece86fcb1ef556bbbb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/67239d7f85c2ba293fc248ece86fcb1ef556bbbb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/391562706de61db09222e06d613a42d641b318f6", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIcBAABCAAGBQJbB6ojAAoJELb6Bqbg4mZbTeMP/j3jEcVmHzcObajY6nq8dc66\nk1Q6Q6uBLm31+AgF0aap3OvQWEs5bCk+6XkJrHthkQw4P2XG6UreyW8yefFjj+z9\nRi6BsEYHfZVyyQHe0AOayTsy80bZNwVSyZ05QIc/JcDcyqpfAwf5dtl05fo58RBL\nqZnufNLXLsvgK8WfTRPYzbOkP9PkkmKVUS93YO6+RWQBa7qHbkN16wrYL6FSCxl6\nChj64GmadJEc5sTB41Vohce9mAXDnMzdIi8hcQ+7oGPq4E088wXwJNLji0X8EuM0\niSYdWYhltUFCczPh8IeM5qXzN+9lIBxD8jEKBbUWbUpow6t6Cv8j4M37RiQxVGn0\nUk6dL11DUowYE2LDJu2PlF7auh11esE6VFKpSC0zdt+cX+FT0VBr1rb0KaiglsGm\nGVvN2MRAiYc6fzkj69pUPBy5ThriQ7qBU58C6/0M6jhw4CFq2Y8GKIC6QaHVMJ8h\nDpenbwmQVdd5dNSD5LsiWxVB1clr2CynMvRFpMezJbzL2L+DQM2p3VStFu0S7f4x\nQDgTDsWKSGpzk5LhdKqPmRtCqrO9mevnIxfRAr+DA78ewJsw4lSaut0J/DCGVE9C\ngCXeAP7FjGFOLwnRjiw1UPi2WU/pwMZ8WUVoaWSTTANESwkd7CmK0jqZY68UanBB\n8DEpZNNPGOXt80/AHyHt\n=A/kR\n-----END PGP SIGNATURE-----", "payload": "tree 67239d7f85c2ba293fc248ece86fcb1ef556bbbb\nparent 0a368b467e65e4a3aa8462cbda5beb78e8f622e4\nauthor Philipp Hansch <dev@phansch.net> 1527228675 +0200\ncommitter Philipp Hansch <dev@phansch.net> 1527228675 +0200\n\nDon't run deploy script in integration tests\n\nThe deploy.sh was causing random integration tests to fail, possibly due to\nmultiple jobs trying to push to the same repo/branch at the same time?\n\nThe error message is:\n\n    +git push git@github.com:rust-lang-nursery/rust-clippy.git gh-pages\n    Warning: Permanently added the RSA host key for IP address '192.30.253.112' to the list of known hosts.\n    To github.com:rust-lang-nursery/rust-clippy.git\n     ! [rejected]          gh-pages -> gh-pages (fetch first)\n    error: failed to push some refs to 'git@github.com:rust-lang-nursery/rust-clippy.git'\n    hint: Updates were rejected because the re\n\nThe travis log is always truncated in similar ways.\n\nSome examples:\n\n* https://travis-ci.org/rust-lang-nursery/rust-clippy/jobs/383325083#L1076-L1082\n* https://travis-ci.org/rust-lang-nursery/rust-clippy/jobs/382711561#L2768-L2773\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/391562706de61db09222e06d613a42d641b318f6", "html_url": "https://github.com/rust-lang/rust/commit/391562706de61db09222e06d613a42d641b318f6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/391562706de61db09222e06d613a42d641b318f6/comments", "author": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0a368b467e65e4a3aa8462cbda5beb78e8f622e4", "url": "https://api.github.com/repos/rust-lang/rust/commits/0a368b467e65e4a3aa8462cbda5beb78e8f622e4", "html_url": "https://github.com/rust-lang/rust/commit/0a368b467e65e4a3aa8462cbda5beb78e8f622e4"}], "stats": {"total": 4, "additions": 3, "deletions": 1}, "files": [{"sha": "301612b154e34c13fc712463495f854e147a9563", "filename": ".travis.yml", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/391562706de61db09222e06d613a42d641b318f6/.travis.yml", "raw_url": "https://github.com/rust-lang/rust/raw/391562706de61db09222e06d613a42d641b318f6/.travis.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.travis.yml?ref=391562706de61db09222e06d613a42d641b318f6", "patch": "@@ -72,7 +72,9 @@ after_success: |\n   #!/bin/bash\n   if [ $(uname) == Linux ]; then\n     set -ex\n-    ./.github/deploy.sh\n+    if [ -z ${INTEGRATION} ]; then\n+      ./.github/deploy.sh\n+    fi\n     # trigger rebuild of the clippy-service, to keep it up to date with clippy itself\n     if [ \"$TRAVIS_PULL_REQUEST\" == \"false\" ] &&\n        [ \"$TRAVIS_REPO_SLUG\" == \"Manishearth/rust-clippy\" ] &&"}]}