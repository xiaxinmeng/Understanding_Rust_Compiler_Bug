{"sha": "248fe949afbebb0df59d84d17b0e45762965238f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI0OGZlOTQ5YWZiZWJiMGRmNTlkODRkMTdiMGU0NTc2Mjk2NTIzOGY=", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2019-04-18T00:22:16Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2019-04-19T01:39:56Z"}, "message": "Change suggestion of field when not in self context", "tree": {"sha": "a99114854a3f5446ff3f15cf340d1cb96c212dc1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a99114854a3f5446ff3f15cf340d1cb96c212dc1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/248fe949afbebb0df59d84d17b0e45762965238f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/248fe949afbebb0df59d84d17b0e45762965238f", "html_url": "https://github.com/rust-lang/rust/commit/248fe949afbebb0df59d84d17b0e45762965238f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/248fe949afbebb0df59d84d17b0e45762965238f/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e928e9441157f63a776ba1f8773818838e0912ea", "url": "https://api.github.com/repos/rust-lang/rust/commits/e928e9441157f63a776ba1f8773818838e0912ea", "html_url": "https://github.com/rust-lang/rust/commit/e928e9441157f63a776ba1f8773818838e0912ea"}], "stats": {"total": 90, "additions": 60, "deletions": 30}, "files": [{"sha": "6821921e45467026898799f122bb2d76e3c067d8", "filename": "src/librustc_resolve/diagnostics.rs", "status": "modified", "additions": 12, "deletions": 10, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/248fe949afbebb0df59d84d17b0e45762965238f/src%2Flibrustc_resolve%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/248fe949afbebb0df59d84d17b0e45762965238f/src%2Flibrustc_resolve%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Fdiagnostics.rs?ref=248fe949afbebb0df59d84d17b0e45762965238f", "patch": "@@ -166,16 +166,18 @@ impl<'a> Resolver<'a> {\n                 let self_is_available = self.self_value_is_available(path[0].ident.span, span);\n                 match candidate {\n                     AssocSuggestion::Field => {\n-                        err.span_suggestion(\n-                            span,\n-                            \"try\",\n-                            format!(\"self.{}\", path_str),\n-                            Applicability::MachineApplicable,\n-                        );\n-                        if !self_is_available {\n-                            err.span_label(span, format!(\"`self` value is a keyword \\\n-                                                         only available in \\\n-                                                         methods with `self` parameter\"));\n+                        if self_is_available {\n+                            err.span_suggestion(\n+                                span,\n+                                \"you might have meant to use the available field\",\n+                                format!(\"self.{}\", path_str),\n+                                Applicability::MachineApplicable,\n+                            );\n+                        } else {\n+                            err.span_label(\n+                                span,\n+                                format!(\"a field by this name exists in `Self::{}`\", path_str),\n+                            );\n                         }\n                     }\n                     AssocSuggestion::MethodWithSelf if self_is_available => {"}, {"sha": "25cb85dadb903dcae01f9193a74aad1b6d130157", "filename": "src/test/ui/class-missing-self.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/248fe949afbebb0df59d84d17b0e45762965238f/src%2Ftest%2Fui%2Fclass-missing-self.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/248fe949afbebb0df59d84d17b0e45762965238f/src%2Ftest%2Fui%2Fclass-missing-self.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fclass-missing-self.stderr?ref=248fe949afbebb0df59d84d17b0e45762965238f", "patch": "@@ -2,7 +2,7 @@ error[E0425]: cannot find value `meows` in this scope\n   --> $DIR/class-missing-self.rs:9:7\n    |\n LL |       meows += 1;\n-   |       ^^^^^ help: try: `self.meows`\n+   |       ^^^^^ help: you might have meant to use the available field: `self.meows`\n \n error[E0425]: cannot find function `sleep` in this scope\n   --> $DIR/class-missing-self.rs:10:7"}, {"sha": "3027d01c5325bd41f5d1159b878cb29d59fb319b", "filename": "src/test/ui/issues/issue-60057.rs", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/248fe949afbebb0df59d84d17b0e45762965238f/src%2Ftest%2Fui%2Fissues%2Fissue-60057.rs", "raw_url": "https://github.com/rust-lang/rust/raw/248fe949afbebb0df59d84d17b0e45762965238f/src%2Ftest%2Fui%2Fissues%2Fissue-60057.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-60057.rs?ref=248fe949afbebb0df59d84d17b0e45762965238f", "patch": "@@ -0,0 +1,17 @@\n+struct A {\n+    banana: u8,\n+}\n+\n+impl A {\n+    fn new(peach: u8) -> A {\n+        A {\n+            banana: banana //~ ERROR cannot find value `banana` in this scope\n+        }\n+    }\n+\n+    fn foo(&self, peach: u8) -> A {\n+        A {\n+            banana: banana //~ ERROR cannot find value `banana` in this scope\n+        }\n+    }\n+}"}, {"sha": "0bee87a43722f1aaab816394f3b27c834fdf8995", "filename": "src/test/ui/issues/issue-60057.stderr", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/248fe949afbebb0df59d84d17b0e45762965238f/src%2Ftest%2Fui%2Fissues%2Fissue-60057.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/248fe949afbebb0df59d84d17b0e45762965238f/src%2Ftest%2Fui%2Fissues%2Fissue-60057.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-60057.stderr?ref=248fe949afbebb0df59d84d17b0e45762965238f", "patch": "@@ -0,0 +1,20 @@\n+error[E0425]: cannot find value `banana` in this scope\n+  --> $DIR/issue-60057.rs:8:21\n+   |\n+LL |             banana: banana\n+   |                     ^^^^^^ a field by this name exists in `Self::banana`\n+\n+error[E0425]: cannot find value `banana` in this scope\n+  --> $DIR/issue-60057.rs:14:21\n+   |\n+LL |             banana: banana\n+   |                     ^^^^^^ help: you might have meant to use the available field: `self.banana`\n+\n+error[E0601]: `main` function not found in crate `issue_60057`\n+   |\n+   = note: consider adding a `main` function to `$DIR/issue-60057.rs`\n+\n+error: aborting due to 3 previous errors\n+\n+Some errors occurred: E0425, E0601.\n+For more information about an error, try `rustc --explain E0425`."}, {"sha": "97d42aa8ef4a5e166b61bdfeeda38744b682d445", "filename": "src/test/ui/resolve/issue-14254.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/248fe949afbebb0df59d84d17b0e45762965238f/src%2Ftest%2Fui%2Fresolve%2Fissue-14254.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/248fe949afbebb0df59d84d17b0e45762965238f/src%2Ftest%2Fui%2Fresolve%2Fissue-14254.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fresolve%2Fissue-14254.stderr?ref=248fe949afbebb0df59d84d17b0e45762965238f", "patch": "@@ -20,13 +20,13 @@ error[E0425]: cannot find value `x` in this scope\n   --> $DIR/issue-14254.rs:30:9\n    |\n LL |         x;\n-   |         ^ help: try: `self.x`\n+   |         ^ help: you might have meant to use the available field: `self.x`\n \n error[E0425]: cannot find value `y` in this scope\n   --> $DIR/issue-14254.rs:32:9\n    |\n LL |         y;\n-   |         ^ help: try: `self.y`\n+   |         ^ help: you might have meant to use the available field: `self.y`\n \n error[E0425]: cannot find value `a` in this scope\n   --> $DIR/issue-14254.rs:34:9\n@@ -56,13 +56,13 @@ error[E0425]: cannot find value `x` in this scope\n   --> $DIR/issue-14254.rs:47:9\n    |\n LL |         x;\n-   |         ^ help: try: `self.x`\n+   |         ^ help: you might have meant to use the available field: `self.x`\n \n error[E0425]: cannot find value `y` in this scope\n   --> $DIR/issue-14254.rs:49:9\n    |\n LL |         y;\n-   |         ^ help: try: `self.y`\n+   |         ^ help: you might have meant to use the available field: `self.y`\n \n error[E0425]: cannot find value `a` in this scope\n   --> $DIR/issue-14254.rs:51:9"}, {"sha": "10fcbfc74f2591d168c08dfa3e72f07ceeac4a71", "filename": "src/test/ui/resolve/issue-2356.stderr", "status": "modified", "additions": 3, "deletions": 9, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/248fe949afbebb0df59d84d17b0e45762965238f/src%2Ftest%2Fui%2Fresolve%2Fissue-2356.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/248fe949afbebb0df59d84d17b0e45762965238f/src%2Ftest%2Fui%2Fresolve%2Fissue-2356.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fresolve%2Fissue-2356.stderr?ref=248fe949afbebb0df59d84d17b0e45762965238f", "patch": "@@ -20,10 +20,7 @@ error[E0425]: cannot find value `whiskers` in this scope\n   --> $DIR/issue-2356.rs:39:5\n    |\n LL |     whiskers -= other;\n-   |     ^^^^^^^^\n-   |     |\n-   |     `self` value is a keyword only available in methods with `self` parameter\n-   |     help: try: `self.whiskers`\n+   |     ^^^^^^^^ a field by this name exists in `Self::whiskers`\n \n error[E0425]: cannot find function `shave` in this scope\n   --> $DIR/issue-2356.rs:41:5\n@@ -83,16 +80,13 @@ error[E0425]: cannot find value `whiskers` in this scope\n   --> $DIR/issue-2356.rs:79:5\n    |\n LL |     whiskers = 0;\n-   |     ^^^^^^^^ help: try: `self.whiskers`\n+   |     ^^^^^^^^ help: you might have meant to use the available field: `self.whiskers`\n \n error[E0425]: cannot find value `whiskers` in this scope\n   --> $DIR/issue-2356.rs:84:5\n    |\n LL |     whiskers = 4;\n-   |     ^^^^^^^^\n-   |     |\n-   |     `self` value is a keyword only available in methods with `self` parameter\n-   |     help: try: `self.whiskers`\n+   |     ^^^^^^^^ a field by this name exists in `Self::whiskers`\n \n error[E0425]: cannot find function `purr_louder` in this scope\n   --> $DIR/issue-2356.rs:86:5"}, {"sha": "87040015b8d805add6bd2b422e4429b97420abc5", "filename": "src/test/ui/resolve/resolve-assoc-suggestions.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/248fe949afbebb0df59d84d17b0e45762965238f/src%2Ftest%2Fui%2Fresolve%2Fresolve-assoc-suggestions.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/248fe949afbebb0df59d84d17b0e45762965238f/src%2Ftest%2Fui%2Fresolve%2Fresolve-assoc-suggestions.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fresolve%2Fresolve-assoc-suggestions.stderr?ref=248fe949afbebb0df59d84d17b0e45762965238f", "patch": "@@ -14,7 +14,7 @@ error[E0425]: cannot find value `field` in this scope\n   --> $DIR/resolve-assoc-suggestions.rs:20:9\n    |\n LL |         field;\n-   |         ^^^^^ help: try: `self.field`\n+   |         ^^^^^ help: you might have meant to use the available field: `self.field`\n \n error[E0412]: cannot find type `Type` in this scope\n   --> $DIR/resolve-assoc-suggestions.rs:23:16"}, {"sha": "892b50309a905daeab7848418c6196bb9332729b", "filename": "src/test/ui/resolve/resolve-speculative-adjustment.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/248fe949afbebb0df59d84d17b0e45762965238f/src%2Ftest%2Fui%2Fresolve%2Fresolve-speculative-adjustment.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/248fe949afbebb0df59d84d17b0e45762965238f/src%2Ftest%2Fui%2Fresolve%2Fresolve-speculative-adjustment.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fresolve%2Fresolve-speculative-adjustment.stderr?ref=248fe949afbebb0df59d84d17b0e45762965238f", "patch": "@@ -14,7 +14,7 @@ error[E0425]: cannot find value `field` in this scope\n   --> $DIR/resolve-speculative-adjustment.rs:23:9\n    |\n LL |         field;\n-   |         ^^^^^ help: try: `self.field`\n+   |         ^^^^^ help: you might have meant to use the available field: `self.field`\n \n error[E0425]: cannot find function `method` in this scope\n   --> $DIR/resolve-speculative-adjustment.rs:25:9"}, {"sha": "7008fadad8170f845c8f799c77b8824bd5128470", "filename": "src/test/ui/resolve/unresolved_static_type_field.stderr", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/248fe949afbebb0df59d84d17b0e45762965238f/src%2Ftest%2Fui%2Fresolve%2Funresolved_static_type_field.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/248fe949afbebb0df59d84d17b0e45762965238f/src%2Ftest%2Fui%2Fresolve%2Funresolved_static_type_field.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fresolve%2Funresolved_static_type_field.stderr?ref=248fe949afbebb0df59d84d17b0e45762965238f", "patch": "@@ -2,10 +2,7 @@ error[E0425]: cannot find value `cx` in this scope\n   --> $DIR/unresolved_static_type_field.rs:9:11\n    |\n LL |         f(cx);\n-   |           ^^\n-   |           |\n-   |           `self` value is a keyword only available in methods with `self` parameter\n-   |           help: try: `self.cx`\n+   |           ^^ a field by this name exists in `Self::cx`\n \n error: aborting due to previous error\n "}]}