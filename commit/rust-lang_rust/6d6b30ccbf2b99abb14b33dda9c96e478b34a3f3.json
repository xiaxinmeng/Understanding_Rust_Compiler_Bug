{"sha": "6d6b30ccbf2b99abb14b33dda9c96e478b34a3f3", "node_id": "C_kwDOAAsO6NoAKDZkNmIzMGNjYmYyYjk5YWJiMTRiMzNkZGE5Yzk2ZTQ3OGIzNGEzZjM", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-06-29T22:23:51Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-06-29T22:23:51Z"}, "message": "Rollup merge of #98681 - Enselic:rustdoc-json-default-assoc-type-blanket-impl, r=GuillaumeGomez\n\nrustdoc-json: Make default value of blanket impl assoc types work\n\nCloses #98658\n\nr? ``@GuillaumeGomez``\n\n``@rustbot`` labels +A-rustdoc-json", "tree": {"sha": "9c38e77513c0d7044bc326fb506917513c548214", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9c38e77513c0d7044bc326fb506917513c548214"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6d6b30ccbf2b99abb14b33dda9c96e478b34a3f3", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJivND3CRBK7hj4Ov3rIwAAkrQIAAWCoBFa2H3FqIVgLfzYkPXx\nBSsaOLQGWF/u0ia3Vbw18Z2svTYraWJpTqJ5mWIIMSmgw6oOp6Tw/qCl5JcAVxPM\nOhUEmfVNR04XAA05fP+rmBUuEChKg8ggcyfnBWFKsh4ENMvxORrVDu8HwxMHOZ34\nov+3Qu923n3P8MDnWiOzaKrE9GwpE6WJWImQWUUtE3XvRRVStrvI6ECTBkGJcNEf\ndIHLT1bEUbWiHzg2A8a1xz+aE8+QMumeTLxaXwM0eQ4J2d5ecvwCOGT9VU+lP88x\nyB08kar8eAoHaSFDS1U2zgX22jFdjzHOPjQndTgNmXT8DdojLP4Z/5spTaT0pRA=\n=CHFv\n-----END PGP SIGNATURE-----\n", "payload": "tree 9c38e77513c0d7044bc326fb506917513c548214\nparent 48170d5a1ccc4ff1e8a370fb63bd8eb29de92a25\nparent ba87c934ea86476bbd75909eb18cbf7627c12c81\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1656541431 +0200\ncommitter GitHub <noreply@github.com> 1656541431 +0200\n\nRollup merge of #98681 - Enselic:rustdoc-json-default-assoc-type-blanket-impl, r=GuillaumeGomez\n\nrustdoc-json: Make default value of blanket impl assoc types work\n\nCloses #98658\n\nr? ``@GuillaumeGomez``\n\n``@rustbot`` labels +A-rustdoc-json\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6d6b30ccbf2b99abb14b33dda9c96e478b34a3f3", "html_url": "https://github.com/rust-lang/rust/commit/6d6b30ccbf2b99abb14b33dda9c96e478b34a3f3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6d6b30ccbf2b99abb14b33dda9c96e478b34a3f3/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "48170d5a1ccc4ff1e8a370fb63bd8eb29de92a25", "url": "https://api.github.com/repos/rust-lang/rust/commits/48170d5a1ccc4ff1e8a370fb63bd8eb29de92a25", "html_url": "https://github.com/rust-lang/rust/commit/48170d5a1ccc4ff1e8a370fb63bd8eb29de92a25"}, {"sha": "ba87c934ea86476bbd75909eb18cbf7627c12c81", "url": "https://api.github.com/repos/rust-lang/rust/commits/ba87c934ea86476bbd75909eb18cbf7627c12c81", "html_url": "https://github.com/rust-lang/rust/commit/ba87c934ea86476bbd75909eb18cbf7627c12c81"}], "stats": {"total": 11, "additions": 10, "deletions": 1}, "files": [{"sha": "316554808c2018bed1bd196c1e09f2373b9125da", "filename": "src/librustdoc/json/conversions.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6d6b30ccbf2b99abb14b33dda9c96e478b34a3f3/src%2Flibrustdoc%2Fjson%2Fconversions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6d6b30ccbf2b99abb14b33dda9c96e478b34a3f3/src%2Flibrustdoc%2Fjson%2Fconversions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fjson%2Fconversions.rs?ref=6d6b30ccbf2b99abb14b33dda9c96e478b34a3f3", "patch": "@@ -255,7 +255,7 @@ fn from_clean_item(item: clean::Item, tcx: TyCtxt<'_>) -> ItemEnum {\n         AssocTypeItem(t, b) => ItemEnum::AssocType {\n             generics: t.generics.into_tcx(tcx),\n             bounds: b.into_iter().map(|x| x.into_tcx(tcx)).collect(),\n-            default: t.item_type.map(|ty| ty.into_tcx(tcx)),\n+            default: Some(t.item_type.unwrap_or(t.type_).into_tcx(tcx)),\n         },\n         // `convert_item` early returns `None` for striped items and keywords.\n         StrippedItem(_) | KeywordItem(_) => unreachable!(),"}, {"sha": "edf1a9fe2fcf9f89ed180ebbfa6508075afa4a3f", "filename": "src/test/rustdoc-json/blanket_impls.rs", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/6d6b30ccbf2b99abb14b33dda9c96e478b34a3f3/src%2Ftest%2Frustdoc-json%2Fblanket_impls.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6d6b30ccbf2b99abb14b33dda9c96e478b34a3f3/src%2Ftest%2Frustdoc-json%2Fblanket_impls.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-json%2Fblanket_impls.rs?ref=6d6b30ccbf2b99abb14b33dda9c96e478b34a3f3", "patch": "@@ -0,0 +1,9 @@\n+// Regression test for <https://github.com/rust-lang/rust/issues/98658>\n+\n+#![no_std]\n+\n+// @has blanket_impls.json\n+// @has - \"$.index[*][?(@.name=='Error')].kind\" \\\"assoc_type\\\"\n+// @has - \"$.index[*][?(@.name=='Error')].inner.default.kind\" \\\"resolved_path\\\"\n+// @has - \"$.index[*][?(@.name=='Error')].inner.default.inner.name\" \\\"Infallible\\\"\n+pub struct ForBlanketTryFromImpl;"}]}