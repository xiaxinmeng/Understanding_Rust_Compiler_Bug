{"sha": "2314f3b8751b61ce5a00a2b49cfde461b3d7cfe5", "node_id": "C_kwDOAAsO6NoAKDIzMTRmM2I4NzUxYjYxY2U1YTAwYTJiNDljZmRlNDYxYjNkN2NmZTU", "commit": {"author": {"name": "Milo", "email": "50248166+Milo123459@users.noreply.github.com", "date": "2022-07-20T20:42:11Z"}, "committer": {"name": "Milo", "email": "50248166+Milo123459@users.noreply.github.com", "date": "2022-07-20T20:42:11Z"}, "message": "test stage-1 in ci", "tree": {"sha": "69a7a681ba48492913ad8e9c9d205e0676c6ac33", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/69a7a681ba48492913ad8e9c9d205e0676c6ac33"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2314f3b8751b61ce5a00a2b49cfde461b3d7cfe5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2314f3b8751b61ce5a00a2b49cfde461b3d7cfe5", "html_url": "https://github.com/rust-lang/rust/commit/2314f3b8751b61ce5a00a2b49cfde461b3d7cfe5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2314f3b8751b61ce5a00a2b49cfde461b3d7cfe5/comments", "author": {"login": "Milo123459", "id": 50248166, "node_id": "MDQ6VXNlcjUwMjQ4MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/50248166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Milo123459", "html_url": "https://github.com/Milo123459", "followers_url": "https://api.github.com/users/Milo123459/followers", "following_url": "https://api.github.com/users/Milo123459/following{/other_user}", "gists_url": "https://api.github.com/users/Milo123459/gists{/gist_id}", "starred_url": "https://api.github.com/users/Milo123459/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Milo123459/subscriptions", "organizations_url": "https://api.github.com/users/Milo123459/orgs", "repos_url": "https://api.github.com/users/Milo123459/repos", "events_url": "https://api.github.com/users/Milo123459/events{/privacy}", "received_events_url": "https://api.github.com/users/Milo123459/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Milo123459", "id": 50248166, "node_id": "MDQ6VXNlcjUwMjQ4MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/50248166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Milo123459", "html_url": "https://github.com/Milo123459", "followers_url": "https://api.github.com/users/Milo123459/followers", "following_url": "https://api.github.com/users/Milo123459/following{/other_user}", "gists_url": "https://api.github.com/users/Milo123459/gists{/gist_id}", "starred_url": "https://api.github.com/users/Milo123459/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Milo123459/subscriptions", "organizations_url": "https://api.github.com/users/Milo123459/orgs", "repos_url": "https://api.github.com/users/Milo123459/repos", "events_url": "https://api.github.com/users/Milo123459/events{/privacy}", "received_events_url": "https://api.github.com/users/Milo123459/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a7468c60f8dbf5feb23ad840b174d7e57113a846", "url": "https://api.github.com/repos/rust-lang/rust/commits/a7468c60f8dbf5feb23ad840b174d7e57113a846", "html_url": "https://github.com/rust-lang/rust/commit/a7468c60f8dbf5feb23ad840b174d7e57113a846"}], "stats": {"total": 59, "additions": 59, "deletions": 0}, "files": [{"sha": "2e16a8d894cfda8d33d34d154e4395014b41dbfb", "filename": ".github/workflows/ci.yml", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/2314f3b8751b61ce5a00a2b49cfde461b3d7cfe5/.github%2Fworkflows%2Fci.yml", "raw_url": "https://github.com/rust-lang/rust/raw/2314f3b8751b61ce5a00a2b49cfde461b3d7cfe5/.github%2Fworkflows%2Fci.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Fci.yml?ref=2314f3b8751b61ce5a00a2b49cfde461b3d7cfe5", "patch": "@@ -46,6 +46,9 @@ jobs:\n           - name: x86_64-gnu-llvm-12\n             os: ubuntu-20.04-xl\n             env: {}\n+          - name: x86_64-gnu-llvm-12-stage1\n+            os: ubuntu-20.04-xl\n+            env: {}\n           - name: x86_64-gnu-tools\n             env:\n               CI_ONLY_WHEN_SUBMODULES_CHANGED: 1"}, {"sha": "dd2aa56db44cca0eb2318e903bb00b5efa15a055", "filename": "src/ci/docker/host-x86_64/x86_64-gnu-llvm-12-stage1/Dockerfile", "status": "added", "additions": 53, "deletions": 0, "changes": 53, "blob_url": "https://github.com/rust-lang/rust/blob/2314f3b8751b61ce5a00a2b49cfde461b3d7cfe5/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-llvm-12-stage1%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/2314f3b8751b61ce5a00a2b49cfde461b3d7cfe5/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-llvm-12-stage1%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-llvm-12-stage1%2FDockerfile?ref=2314f3b8751b61ce5a00a2b49cfde461b3d7cfe5", "patch": "@@ -0,0 +1,53 @@\n+FROM ubuntu:20.04\n+\n+ARG DEBIAN_FRONTEND=noninteractive\n+RUN apt-get update && apt-get install -y --no-install-recommends \\\n+    g++ \\\n+    gcc-multilib \\\n+    make \\\n+    ninja-build \\\n+    file \\\n+    curl \\\n+    ca-certificates \\\n+    python2.7 \\\n+    git \\\n+    cmake \\\n+    sudo \\\n+    gdb \\\n+    llvm-12-tools \\\n+    llvm-12-dev \\\n+    libedit-dev \\\n+    libssl-dev \\\n+    pkg-config \\\n+    zlib1g-dev \\\n+    xz-utils \\\n+    nodejs\n+\n+COPY scripts/sccache.sh /scripts/\n+RUN sh /scripts/sccache.sh\n+\n+# using llvm-link-shared due to libffi issues -- see #34486\n+ENV RUST_CONFIGURE_ARGS \\\n+    --build=x86_64-unknown-linux-gnu \\\n+    --llvm-root=/usr/lib/llvm-12 \\\n+    --enable-llvm-link-shared \\\n+    --set rust.thin-lto-import-instr-limit=10\n+\n+ENV SCRIPT python2.7 ../x.py --stage 1 test --exclude src/tools/tidy && \\\n+    # Run the `mir-opt` tests again but this time for a 32-bit target.\n+    # This enforces that tests using `// EMIT_MIR_FOR_EACH_BIT_WIDTH` have\n+    # both 32-bit and 64-bit outputs updated by the PR author, before\n+    # the PR is approved and tested for merging.\n+    # It will also detect tests lacking `// EMIT_MIR_FOR_EACH_BIT_WIDTH`,\n+    # despite having different output on 32-bit vs 64-bit targets.\n+    python2.7 ../x.py --stage 1 test src/test/mir-opt \\\n+    --host='' --target=i686-unknown-linux-gnu && \\\n+    # Run the UI test suite again, but in `--pass=check` mode\n+    #\n+    # This is intended to make sure that both `--pass=check` continues to\n+    # work.\n+    #\n+    python2.7 ../x.py --stage 1 test src/test/ui --pass=check \\\n+    --host='' --target=i686-unknown-linux-gnu && \\\n+    # Run tidy at the very end, after all the other tests.\n+    python2.7 ../x.py --stage 1 test src/tools/tidy"}, {"sha": "0dd4fc65792c98a478c41027f4047f740d83c7ae", "filename": "src/ci/github-actions/ci.yml", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/2314f3b8751b61ce5a00a2b49cfde461b3d7cfe5/src%2Fci%2Fgithub-actions%2Fci.yml", "raw_url": "https://github.com/rust-lang/rust/raw/2314f3b8751b61ce5a00a2b49cfde461b3d7cfe5/src%2Fci%2Fgithub-actions%2Fci.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fgithub-actions%2Fci.yml?ref=2314f3b8751b61ce5a00a2b49cfde461b3d7cfe5", "patch": "@@ -287,6 +287,9 @@ jobs:\n           - name: x86_64-gnu-llvm-12\n             <<: *job-linux-xl\n \n+          - name: x86_64-gnu-llvm-12-stage1\n+            <<: *job-linux-xl\n+\n           - name: x86_64-gnu-tools\n             env:\n               CI_ONLY_WHEN_SUBMODULES_CHANGED: 1"}]}