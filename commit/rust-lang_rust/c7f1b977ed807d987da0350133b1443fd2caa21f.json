{"sha": "c7f1b977ed807d987da0350133b1443fd2caa21f", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM3ZjFiOTc3ZWQ4MDdkOTg3ZGEwMzUwMTMzYjE0NDNmZDJjYWEyMWY=", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2018-12-13T00:54:27Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2018-12-13T00:54:27Z"}, "message": "Suggest using `.display()` when trying to print a `Path`", "tree": {"sha": "6472dcd01318c90b9893e681f2d03f6772db2cc0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6472dcd01318c90b9893e681f2d03f6772db2cc0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c7f1b977ed807d987da0350133b1443fd2caa21f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c7f1b977ed807d987da0350133b1443fd2caa21f", "html_url": "https://github.com/rust-lang/rust/commit/c7f1b977ed807d987da0350133b1443fd2caa21f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c7f1b977ed807d987da0350133b1443fd2caa21f/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0076f58d5333f24f709aa46b4bad760ffb51b9b0", "url": "https://api.github.com/repos/rust-lang/rust/commits/0076f58d5333f24f709aa46b4bad760ffb51b9b0", "html_url": "https://github.com/rust-lang/rust/commit/0076f58d5333f24f709aa46b4bad760ffb51b9b0"}], "stats": {"total": 30, "additions": 28, "deletions": 2}, "files": [{"sha": "de93651569891bdbf2c84f5389dbf1736f982149", "filename": "src/libcore/fmt/mod.rs", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/c7f1b977ed807d987da0350133b1443fd2caa21f/src%2Flibcore%2Ffmt%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c7f1b977ed807d987da0350133b1443fd2caa21f/src%2Flibcore%2Ffmt%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Ffmt%2Fmod.rs?ref=c7f1b977ed807d987da0350133b1443fd2caa21f", "patch": "@@ -609,10 +609,15 @@ pub trait Debug {\n /// println!(\"The origin is: {}\", origin);\n /// ```\n #[rustc_on_unimplemented(\n+    on(\n+        _Self=\"std::path::Path\",\n+        label=\"`{Self}` cannot be formatted with the default formatter, call `.display()` on it\",\n+        note=\"you need to call `.display()` or `.to_string_lossy()` for safely printing paths as \\\n+              they may contain non-Unicode data\"\n+    ),\n     message=\"`{Self}` doesn't implement `{Display}`\",\n     label=\"`{Self}` cannot be formatted with the default formatter\",\n-    note=\"in format strings you may be able to use `{{:?}}` \\\n-          (or {{:#?}} for pretty-print) instead\",\n+    note=\"in format strings you may be able to use `{{:?}}` (or {{:#?}} for pretty-print) instead\",\n )]\n #[doc(alias = \"{}\")]\n #[stable(feature = \"rust1\", since = \"1.0.0\")]"}, {"sha": "62fc9e79f7aa23537de36ec3ec1be43bb973f4ca", "filename": "src/test/ui/suggestions/path-display.rs", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/c7f1b977ed807d987da0350133b1443fd2caa21f/src%2Ftest%2Fui%2Fsuggestions%2Fpath-display.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c7f1b977ed807d987da0350133b1443fd2caa21f/src%2Ftest%2Fui%2Fsuggestions%2Fpath-display.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Fpath-display.rs?ref=c7f1b977ed807d987da0350133b1443fd2caa21f", "patch": "@@ -0,0 +1,7 @@\n+use std::path::Path;\n+\n+fn main() {\n+    let path = Path::new(\"/tmp/foo/bar.txt\");\n+    println!(\"{}\", path);\n+    //~^ ERROR E0277\n+}"}, {"sha": "b0493a559f92ee1853ab0efedaac0bafc01f3eb1", "filename": "src/test/ui/suggestions/path-display.stderr", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/c7f1b977ed807d987da0350133b1443fd2caa21f/src%2Ftest%2Fui%2Fsuggestions%2Fpath-display.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c7f1b977ed807d987da0350133b1443fd2caa21f/src%2Ftest%2Fui%2Fsuggestions%2Fpath-display.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Fpath-display.stderr?ref=c7f1b977ed807d987da0350133b1443fd2caa21f", "patch": "@@ -0,0 +1,14 @@\n+error[E0277]: `std::path::Path` doesn't implement `std::fmt::Display`\n+  --> $DIR/path-display.rs:5:20\n+   |\n+LL |     println!(\"{}\", path);\n+   |                    ^^^^ `std::path::Path` cannot be formatted with the default formatter, call `.display()` on it\n+   |\n+   = help: the trait `std::fmt::Display` is not implemented for `std::path::Path`\n+   = note: you need to call `.display()` or `.to_string_lossy()` for safely printing paths as they may contain non-Unicode data\n+   = note: required because of the requirements on the impl of `std::fmt::Display` for `&std::path::Path`\n+   = note: required by `std::fmt::Display::fmt`\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0277`."}]}