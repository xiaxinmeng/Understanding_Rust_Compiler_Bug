{"sha": "85277ff772f20293799b1f99f673e0b3f733b0b6", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg1Mjc3ZmY3NzJmMjAyOTM3OTliMWY5OWY2NzNlMGIzZjczM2IwYjY=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2020-01-04T01:19:46Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-01-04T01:19:46Z"}, "message": "Rollup merge of #67531 - RalfJung:tame-promotion, r=nikomatsakis\n\nno longer promote non-pattern const functions\n\nThis is trying to pack-pedal a bit on promotion feature creep, as proposed by @eddyb [here](https://github.com/rust-lang/const-eval/issues/19#issuecomment-472799062): possibly, a sane subset of `const fn` that we could promote are those that are just constructors -- the same subset that we might want to allow in pattern position at some point.\n\nSo, this removes the `rustc_promotable` attribute from the three functions they identified that do not fit this pattern. The first step is to run crater to see if there is code in the wild that relies on this being promotable.\n\nr? @oli-obk", "tree": {"sha": "efa474206ba03e3b18454e170c9fa96e422a86aa", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/efa474206ba03e3b18454e170c9fa96e422a86aa"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/85277ff772f20293799b1f99f673e0b3f733b0b6", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJeD+gyCRBK7hj4Ov3rIwAAdHIIAIWaTQFZkzN6NGtpeyR4bRAi\nX7IubfuH/jZF9fh9lBU3IyDgk4P01qCFVm3y1GlBmZAMssK2fdrtANlxVVoS74Oc\n/UhqKavTqoWJSWgEIXkDqut5/DWNS8nGlQ5WRkQeDF2D12JhbWYieetlp3QD83rh\nAa+OBxpwoXoD/+zVXX1z2B/22FfWk9va6g4mid79hwvAEzwiSSzVnZh2y7byuMHS\nac23bhehih9V2IlMA1DoheB1xG4YH3Vipw/PVAp4oIt9hl3lz+UaqJy9atNj85Cg\n7pVnzB8Ov/k/DDPa70CZXKJXD+DcqaaR7kf4cC0aV+gxF9aPWu58E3C1P6m8fog=\n=TcOv\n-----END PGP SIGNATURE-----\n", "payload": "tree efa474206ba03e3b18454e170c9fa96e422a86aa\nparent a436293994b7ff8c15f515faf1aa42623769cf5d\nparent 368ac73c11662dbb860db178dc170768078b282d\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1578100786 +0100\ncommitter GitHub <noreply@github.com> 1578100786 +0100\n\nRollup merge of #67531 - RalfJung:tame-promotion, r=nikomatsakis\n\nno longer promote non-pattern const functions\n\nThis is trying to pack-pedal a bit on promotion feature creep, as proposed by @eddyb [here](https://github.com/rust-lang/const-eval/issues/19#issuecomment-472799062): possibly, a sane subset of `const fn` that we could promote are those that are just constructors -- the same subset that we might want to allow in pattern position at some point.\n\nSo, this removes the `rustc_promotable` attribute from the three functions they identified that do not fit this pattern. The first step is to run crater to see if there is code in the wild that relies on this being promotable.\n\nr? @oli-obk\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/85277ff772f20293799b1f99f673e0b3f733b0b6", "html_url": "https://github.com/rust-lang/rust/commit/85277ff772f20293799b1f99f673e0b3f733b0b6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/85277ff772f20293799b1f99f673e0b3f733b0b6/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a436293994b7ff8c15f515faf1aa42623769cf5d", "url": "https://api.github.com/repos/rust-lang/rust/commits/a436293994b7ff8c15f515faf1aa42623769cf5d", "html_url": "https://github.com/rust-lang/rust/commit/a436293994b7ff8c15f515faf1aa42623769cf5d"}, {"sha": "368ac73c11662dbb860db178dc170768078b282d", "url": "https://api.github.com/repos/rust-lang/rust/commits/368ac73c11662dbb860db178dc170768078b282d", "html_url": "https://github.com/rust-lang/rust/commit/368ac73c11662dbb860db178dc170768078b282d"}], "stats": {"total": 3, "additions": 0, "deletions": 3}, "files": [{"sha": "2ece2150e6bedceac1d934f59d9d199ed8185dbe", "filename": "src/libcore/time.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/85277ff772f20293799b1f99f673e0b3f733b0b6/src%2Flibcore%2Ftime.rs", "raw_url": "https://github.com/rust-lang/rust/raw/85277ff772f20293799b1f99f673e0b3f733b0b6/src%2Flibcore%2Ftime.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Ftime.rs?ref=85277ff772f20293799b1f99f673e0b3f733b0b6", "patch": "@@ -172,7 +172,6 @@ impl Duration {\n     /// ```\n     #[stable(feature = \"duration\", since = \"1.3.0\")]\n     #[inline]\n-    #[rustc_promotable]\n     #[rustc_const_stable(feature = \"duration_consts\", since = \"1.32.0\")]\n     pub const fn from_millis(millis: u64) -> Duration {\n         Duration {\n@@ -195,7 +194,6 @@ impl Duration {\n     /// ```\n     #[stable(feature = \"duration_from_micros\", since = \"1.27.0\")]\n     #[inline]\n-    #[rustc_promotable]\n     #[rustc_const_stable(feature = \"duration_consts\", since = \"1.32.0\")]\n     pub const fn from_micros(micros: u64) -> Duration {\n         Duration {\n@@ -218,7 +216,6 @@ impl Duration {\n     /// ```\n     #[stable(feature = \"duration_extras\", since = \"1.27.0\")]\n     #[inline]\n-    #[rustc_promotable]\n     #[rustc_const_stable(feature = \"duration_consts\", since = \"1.32.0\")]\n     pub const fn from_nanos(nanos: u64) -> Duration {\n         Duration {"}]}