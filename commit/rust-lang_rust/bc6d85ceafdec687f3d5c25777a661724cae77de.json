{"sha": "bc6d85ceafdec687f3d5c25777a661724cae77de", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJjNmQ4NWNlYWZkZWM2ODdmM2Q1YzI1Nzc3YTY2MTcyNGNhZTc3ZGU=", "commit": {"author": {"name": "Philipp Krones", "email": "uwdkn@student.kit.edu", "date": "2018-09-23T16:24:27Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2018-09-23T16:24:27Z"}, "message": "Merge pull request #3207 from mikerite/fix-3206\n\nFix double_parens false positive", "tree": {"sha": "0dc4481ca7ebbe5ec720b56fca573c3bde621e4c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0dc4481ca7ebbe5ec720b56fca573c3bde621e4c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bc6d85ceafdec687f3d5c25777a661724cae77de", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJbp747CRBK7hj4Ov3rIwAAdHIIAFzE5TPsxp74nsj2VceCfLYj\nT9gw4dC+4x31cW+68dm/59VF322PbtJqHOcQsQgCMqmuTta4DU2QmGbkt1zsjNRk\nAp0/NJhxGTeZafOoQokxHbqQJOSEoFklJ/ZCXyCISSQmyM+5vHgcrgTXa5JMmz3T\nHl4uX8lDxrFutpEub6n89iU4rgFUJCvjLglGeg5DczFLbt+lazS0PzWVJ12EUHSH\nVGCq2N6Nlfya4lt8N2V0Mz3KB3/RSYVob0q8/5LaiAeMZfRwPAwMgtVvLWI5+9Gq\n4e8H21wm/9zjagy3szlRfeZYDEcNVbbOgg+stJJVD9BxPLmF+F15eIfUkSUwPWo=\n=gN51\n-----END PGP SIGNATURE-----\n", "payload": "tree 0dc4481ca7ebbe5ec720b56fca573c3bde621e4c\nparent af2d6a0c146a04df486007c3fe9aaf1fafbe6e99\nparent 867ac98d386fdf0d79173a60f7c11b29e0dbdb38\nauthor Philipp Krones <uwdkn@student.kit.edu> 1537719867 +0200\ncommitter GitHub <noreply@github.com> 1537719867 +0200\n\nMerge pull request #3207 from mikerite/fix-3206\n\nFix double_parens false positive"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bc6d85ceafdec687f3d5c25777a661724cae77de", "html_url": "https://github.com/rust-lang/rust/commit/bc6d85ceafdec687f3d5c25777a661724cae77de", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bc6d85ceafdec687f3d5c25777a661724cae77de/comments", "author": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "af2d6a0c146a04df486007c3fe9aaf1fafbe6e99", "url": "https://api.github.com/repos/rust-lang/rust/commits/af2d6a0c146a04df486007c3fe9aaf1fafbe6e99", "html_url": "https://github.com/rust-lang/rust/commit/af2d6a0c146a04df486007c3fe9aaf1fafbe6e99"}, {"sha": "867ac98d386fdf0d79173a60f7c11b29e0dbdb38", "url": "https://api.github.com/repos/rust-lang/rust/commits/867ac98d386fdf0d79173a60f7c11b29e0dbdb38", "html_url": "https://github.com/rust-lang/rust/commit/867ac98d386fdf0d79173a60f7c11b29e0dbdb38"}], "stats": {"total": 21, "additions": 19, "deletions": 2}, "files": [{"sha": "3b2ef4e8bb2a0afb6fc3954b54da6dd8d176079c", "filename": "clippy_lints/src/double_parens.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/bc6d85ceafdec687f3d5c25777a661724cae77de/clippy_lints%2Fsrc%2Fdouble_parens.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bc6d85ceafdec687f3d5c25777a661724cae77de/clippy_lints%2Fsrc%2Fdouble_parens.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fdouble_parens.rs?ref=bc6d85ceafdec687f3d5c25777a661724cae77de", "patch": "@@ -1,7 +1,8 @@\n use crate::syntax::ast::*;\n use crate::rustc::lint::{EarlyContext, EarlyLintPass, LintArray, LintPass};\n use crate::rustc::{declare_tool_lint, lint_array};\n-use crate::utils::span_lint;\n+use crate::utils::{in_macro, span_lint};\n+\n \n /// **What it does:** Checks for unnecessary double parentheses.\n ///\n@@ -33,6 +34,10 @@ impl LintPass for DoubleParens {\n \n impl EarlyLintPass for DoubleParens {\n     fn check_expr(&mut self, cx: &EarlyContext<'_>, expr: &Expr) {\n+        if in_macro(expr.span) {\n+            return;\n+        }\n+\n         match expr.node {\n             ExprKind::Paren(ref in_paren) => match in_paren.node {\n                 ExprKind::Paren(_) | ExprKind::Tup(_) => {"}, {"sha": "c217972fa6af7b8033d42648a4bcd240accf9023", "filename": "tests/ui/double_parens.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/bc6d85ceafdec687f3d5c25777a661724cae77de/tests%2Fui%2Fdouble_parens.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bc6d85ceafdec687f3d5c25777a661724cae77de/tests%2Fui%2Fdouble_parens.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdouble_parens.rs?ref=bc6d85ceafdec687f3d5c25777a661724cae77de", "patch": "@@ -48,4 +48,10 @@ fn method_unit_ok(x: DummyStruct) {\n     x.dummy_method(());\n }\n \n+// Issue #3206\n+fn inside_macro() {\n+    assert_eq!((1, 2), (1, 2), \"Error\");\n+    assert_eq!(((1, 2)), (1, 2), \"Error\");\n+}\n+\n fn main() {}"}, {"sha": "3e38db730e04b1f346af81b7e7c55bbc3e5a8bf1", "filename": "tests/ui/double_parens.stderr", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/bc6d85ceafdec687f3d5c25777a661724cae77de/tests%2Fui%2Fdouble_parens.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/bc6d85ceafdec687f3d5c25777a661724cae77de/tests%2Fui%2Fdouble_parens.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdouble_parens.stderr?ref=bc6d85ceafdec687f3d5c25777a661724cae77de", "patch": "@@ -30,5 +30,11 @@ error: Consider removing unnecessary double parentheses\n 32 |     (())\n    |     ^^^^\n \n-error: aborting due to 5 previous errors\n+error: Consider removing unnecessary double parentheses\n+  --> $DIR/double_parens.rs:54:16\n+   |\n+54 |     assert_eq!(((1, 2)), (1, 2), \"Error\");\n+   |                ^^^^^^^^\n+\n+error: aborting due to 6 previous errors\n "}]}