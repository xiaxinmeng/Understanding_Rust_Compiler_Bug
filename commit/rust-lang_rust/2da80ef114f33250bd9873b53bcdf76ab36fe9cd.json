{"sha": "2da80ef114f33250bd9873b53bcdf76ab36fe9cd", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJkYTgwZWYxMTRmMzMyNTBiZDk4NzNiNTNiY2RmNzZhYjM2ZmU5Y2Q=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-08-13T05:30:13Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-08-13T05:30:13Z"}, "message": "Auto merge of #27693 - nagisa:remutex-docs, r=alexcrichton\n\nInitial version of PR had an DerefMut implementation, which was later removed\r\nbecause it may cause mutable reference aliasing.\r\n\r\nSuggest how to implement mutability with reentrant mutex and remove the claim we\r\nimplement DerefMut.", "tree": {"sha": "508c4ac26df89e5b887f19be681c3fcf07ce5e96", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/508c4ac26df89e5b887f19be681c3fcf07ce5e96"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2da80ef114f33250bd9873b53bcdf76ab36fe9cd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2da80ef114f33250bd9873b53bcdf76ab36fe9cd", "html_url": "https://github.com/rust-lang/rust/commit/2da80ef114f33250bd9873b53bcdf76ab36fe9cd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2da80ef114f33250bd9873b53bcdf76ab36fe9cd/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b2aef9d58b3e568834dba85d1b62fca0b5d41cd1", "url": "https://api.github.com/repos/rust-lang/rust/commits/b2aef9d58b3e568834dba85d1b62fca0b5d41cd1", "html_url": "https://github.com/rust-lang/rust/commit/b2aef9d58b3e568834dba85d1b62fca0b5d41cd1"}, {"sha": "646eace6ec5db397ba97e86df067792c0cb6be03", "url": "https://api.github.com/repos/rust-lang/rust/commits/646eace6ec5db397ba97e86df067792c0cb6be03", "html_url": "https://github.com/rust-lang/rust/commit/646eace6ec5db397ba97e86df067792c0cb6be03"}], "stats": {"total": 13, "additions": 10, "deletions": 3}, "files": [{"sha": "0674618396f993a21c90639617fb5502f3a9880d", "filename": "src/libstd/sys/common/remutex.rs", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/2da80ef114f33250bd9873b53bcdf76ab36fe9cd/src%2Flibstd%2Fsys%2Fcommon%2Fremutex.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2da80ef114f33250bd9873b53bcdf76ab36fe9cd/src%2Flibstd%2Fsys%2Fcommon%2Fremutex.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fcommon%2Fremutex.rs?ref=2da80ef114f33250bd9873b53bcdf76ab36fe9cd", "patch": "@@ -36,11 +36,18 @@ unsafe impl<T: Send> Sync for ReentrantMutex<T> {}\n /// dropped (falls out of scope), the lock will be unlocked.\n ///\n /// The data protected by the mutex can be accessed through this guard via its\n-/// Deref and DerefMut implementations\n+/// Deref implementation.\n+///\n+/// # Mutability\n+///\n+/// Unlike `MutexGuard`, `ReentrantMutexGuard` does not implement `DerefMut`,\n+/// because implementation of the trait would violate Rust\u2019s reference aliasing\n+/// rules. Use interior mutability (usually `RefCell`) in order to mutate the\n+/// guarded data.\n #[must_use]\n pub struct ReentrantMutexGuard<'a, T: 'a> {\n-    // funny underscores due to how Deref/DerefMut currently work (they\n-    // disregard field privacy).\n+    // funny underscores due to how Deref currently works (it disregards field\n+    // privacy).\n     __lock: &'a ReentrantMutex<T>,\n     __poison: poison::Guard,\n }"}]}