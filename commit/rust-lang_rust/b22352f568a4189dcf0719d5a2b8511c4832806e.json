{"sha": "b22352f568a4189dcf0719d5a2b8511c4832806e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIyMjM1MmY1NjhhNDE4OWRjZjA3MTlkNWEyYjg1MTFjNDgzMjgwNmU=", "commit": {"author": {"name": "Jonathan Turner", "email": "jonathandturner@users.noreply.github.com", "date": "2016-08-20T14:09:37Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2016-08-20T14:09:37Z"}, "message": "Rollup merge of #35831 - trixnz:error-428, r=jonathandturner\n\nUpdate E0428 to new format\n\nFixes #35798 as part of #35233.\n\nr? @jonathandturner", "tree": {"sha": "64d9cbfb8347f3a73c7536dde72e7405ce340bdd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/64d9cbfb8347f3a73c7536dde72e7405ce340bdd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b22352f568a4189dcf0719d5a2b8511c4832806e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b22352f568a4189dcf0719d5a2b8511c4832806e", "html_url": "https://github.com/rust-lang/rust/commit/b22352f568a4189dcf0719d5a2b8511c4832806e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b22352f568a4189dcf0719d5a2b8511c4832806e/comments", "author": {"login": "jonathandturner", "id": 111457284, "node_id": "O_kgDOBqS0BA", "avatar_url": "https://avatars.githubusercontent.com/u/111457284?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonathandturner", "html_url": "https://github.com/jonathandturner", "followers_url": "https://api.github.com/users/jonathandturner/followers", "following_url": "https://api.github.com/users/jonathandturner/following{/other_user}", "gists_url": "https://api.github.com/users/jonathandturner/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonathandturner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonathandturner/subscriptions", "organizations_url": "https://api.github.com/users/jonathandturner/orgs", "repos_url": "https://api.github.com/users/jonathandturner/repos", "events_url": "https://api.github.com/users/jonathandturner/events{/privacy}", "received_events_url": "https://api.github.com/users/jonathandturner/received_events", "type": "Organization", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0d69b887c698a8189aa3438544ea6ad4f1336d4d", "url": "https://api.github.com/repos/rust-lang/rust/commits/0d69b887c698a8189aa3438544ea6ad4f1336d4d", "html_url": "https://github.com/rust-lang/rust/commit/0d69b887c698a8189aa3438544ea6ad4f1336d4d"}, {"sha": "d791aa1b3f2d67720f1baba31bf1f1a5e7988b8f", "url": "https://api.github.com/repos/rust-lang/rust/commits/d791aa1b3f2d67720f1baba31bf1f1a5e7988b8f", "html_url": "https://github.com/rust-lang/rust/commit/d791aa1b3f2d67720f1baba31bf1f1a5e7988b8f"}], "stats": {"total": 23, "additions": 19, "deletions": 4}, "files": [{"sha": "af39f8a415c6797e4327622cb02650e773cacf95", "filename": "src/librustc_resolve/lib.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/b22352f568a4189dcf0719d5a2b8511c4832806e/src%2Flibrustc_resolve%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b22352f568a4189dcf0719d5a2b8511c4832806e/src%2Flibrustc_resolve%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Flib.rs?ref=b22352f568a4189dcf0719d5a2b8511c4832806e", "patch": "@@ -3382,7 +3382,11 @@ impl<'a> Resolver<'a> {\n             },\n             (true, _) | (_, true) => struct_span_err!(self.session, span, E0260, \"{}\", msg),\n             _ => match (old_binding.is_import(), binding.is_import()) {\n-                (false, false) => struct_span_err!(self.session, span, E0428, \"{}\", msg),\n+                (false, false) => {\n+                    let mut e = struct_span_err!(self.session, span, E0428, \"{}\", msg);\n+                    e.span_label(span, &format!(\"already defined\"));\n+                    e\n+                },\n                 (true, true) => {\n                     let mut e = struct_span_err!(self.session, span, E0252, \"{}\", msg);\n                     e.span_label(span, &format!(\"already imported\"));"}, {"sha": "63b4efb73f0c5fe32e7a3c09cc0a0863b4ef54d0", "filename": "src/test/compile-fail/E0428.rs", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/b22352f568a4189dcf0719d5a2b8511c4832806e/src%2Ftest%2Fcompile-fail%2FE0428.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b22352f568a4189dcf0719d5a2b8511c4832806e/src%2Ftest%2Fcompile-fail%2FE0428.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2FE0428.rs?ref=b22352f568a4189dcf0719d5a2b8511c4832806e", "patch": "@@ -8,9 +8,12 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-struct Bar;\n+struct Bar; //~ previous definition of `Bar` here\n+            //~| previous definition of `Bar` here\n struct Bar; //~ ERROR E0428\n-            //~^ ERROR E0428\n+            //~| NOTE already defined\n+            //~| ERROR E0428\n+            //~| NOTE already defined\n \n fn main () {\n }"}, {"sha": "527ac7505a654b15c068ecd704390adee28932e8", "filename": "src/test/compile-fail/enum-and-module-in-same-scope.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/b22352f568a4189dcf0719d5a2b8511c4832806e/src%2Ftest%2Fcompile-fail%2Fenum-and-module-in-same-scope.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b22352f568a4189dcf0719d5a2b8511c4832806e/src%2Ftest%2Fcompile-fail%2Fenum-and-module-in-same-scope.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fenum-and-module-in-same-scope.rs?ref=b22352f568a4189dcf0719d5a2b8511c4832806e", "patch": "@@ -8,11 +8,12 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-enum Foo { //~ NOTE previous definition\n+enum Foo { //~ NOTE previous definition of `Foo` here\n     X\n }\n \n mod Foo { //~ ERROR a type named `Foo` has already been defined\n+          //~| NOTE already defined\n     pub static X: isize = 42;\n     fn f() { f() } // Check that this does not result in a resolution error\n }"}, {"sha": "d103d45bc4cb75bb4b6ecf714f0ce572e87fdb6d", "filename": "src/test/compile-fail/issue-21546.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/b22352f568a4189dcf0719d5a2b8511c4832806e/src%2Ftest%2Fcompile-fail%2Fissue-21546.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b22352f568a4189dcf0719d5a2b8511c4832806e/src%2Ftest%2Fcompile-fail%2Fissue-21546.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-21546.rs?ref=b22352f568a4189dcf0719d5a2b8511c4832806e", "patch": "@@ -17,6 +17,7 @@ mod Foo { }\n #[allow(dead_code)]\n struct Foo;\n //~^ ERROR a module named `Foo` has already been defined in this module\n+//~| NOTE already defined\n \n #[allow(non_snake_case)]\n mod Bar { }\n@@ -25,6 +26,7 @@ mod Bar { }\n #[allow(dead_code)]\n struct Bar(i32);\n //~^ ERROR a module named `Bar` has already been defined\n+//~| NOTE already defined\n \n \n #[allow(dead_code)]\n@@ -34,6 +36,7 @@ struct Baz(i32);\n #[allow(non_snake_case)]\n mod Baz { }\n //~^ ERROR a type named `Baz` has already been defined\n+//~| NOTE already defined\n \n \n #[allow(dead_code)]\n@@ -43,6 +46,7 @@ struct Qux { x: bool }\n #[allow(non_snake_case)]\n mod Qux { }\n //~^ ERROR a type named `Qux` has already been defined\n+//~| NOTE already defined\n \n \n #[allow(dead_code)]\n@@ -52,6 +56,7 @@ struct Quux;\n #[allow(non_snake_case)]\n mod Quux { }\n //~^ ERROR a type named `Quux` has already been defined\n+//~| NOTE already defined\n \n \n #[allow(dead_code)]\n@@ -61,5 +66,6 @@ enum Corge { A, B }\n #[allow(non_snake_case)]\n mod Corge { }\n //~^ ERROR a type named `Corge` has already been defined\n+//~| NOTE already defined\n \n fn main() { }"}, {"sha": "7bcab1f6ac56b9da9e828b45fefc604a6ac67fb3", "filename": "src/test/compile-fail/trait-duplicate-methods.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/b22352f568a4189dcf0719d5a2b8511c4832806e/src%2Ftest%2Fcompile-fail%2Ftrait-duplicate-methods.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b22352f568a4189dcf0719d5a2b8511c4832806e/src%2Ftest%2Fcompile-fail%2Ftrait-duplicate-methods.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Ftrait-duplicate-methods.rs?ref=b22352f568a4189dcf0719d5a2b8511c4832806e", "patch": "@@ -11,6 +11,7 @@\n trait Foo {\n     fn orange(&self); //~ NOTE previous definition of `orange` here\n     fn orange(&self); //~ ERROR a value named `orange` has already been defined in this trait\n+                      //~| NOTE already define\n }\n \n fn main() {}"}]}