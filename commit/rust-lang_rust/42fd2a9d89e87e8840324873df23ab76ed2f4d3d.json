{"sha": "42fd2a9d89e87e8840324873df23ab76ed2f4d3d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQyZmQyYTlkODllODdlODg0MDMyNDg3M2RmMjNhYjc2ZWQyZjRkM2Q=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-09-21T22:39:46Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-09-21T22:39:46Z"}, "message": "Remove unused arg from revoke_clean", "tree": {"sha": "4b37668192d4f383326a377139d766267f26376f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4b37668192d4f383326a377139d766267f26376f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/42fd2a9d89e87e8840324873df23ab76ed2f4d3d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/42fd2a9d89e87e8840324873df23ab76ed2f4d3d", "html_url": "https://github.com/rust-lang/rust/commit/42fd2a9d89e87e8840324873df23ab76ed2f4d3d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/42fd2a9d89e87e8840324873df23ab76ed2f4d3d/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "92af552956fd81693d335cfcab28526607ba286c", "url": "https://api.github.com/repos/rust-lang/rust/commits/92af552956fd81693d335cfcab28526607ba286c", "html_url": "https://github.com/rust-lang/rust/commit/92af552956fd81693d335cfcab28526607ba286c"}], "stats": {"total": 10, "additions": 5, "deletions": 5}, "files": [{"sha": "2ffc43b8745cd67dc9e8ad68e31640987eba5dde", "filename": "src/comp/middle/trans.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/42fd2a9d89e87e8840324873df23ab76ed2f4d3d/src%2Fcomp%2Fmiddle%2Ftrans.rs", "raw_url": "https://github.com/rust-lang/rust/raw/42fd2a9d89e87e8840324873df23ab76ed2f4d3d/src%2Fcomp%2Fmiddle%2Ftrans.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Ftrans.rs?ref=42fd2a9d89e87e8840324873df23ab76ed2f4d3d", "patch": "@@ -2060,15 +2060,15 @@ fn move_val(cx: @block_ctxt, action: copy_action, dst: ValueRef,\n         if src.is_mem { ret zero_alloca(cx, src.val, t).bcx; }\n \n         // If we're here, it must be a temporary.\n-        ret revoke_clean(cx, src_val, t);\n+        ret revoke_clean(cx, src_val);\n     } else if ty::type_is_unique(tcx, t) ||\n                   type_is_structural_or_param(tcx, t) {\n         if action == DROP_EXISTING { cx = drop_ty(cx, dst, t); }\n         cx = memmove_ty(cx, dst, src_val, t).bcx;\n         if src.is_mem { ret zero_alloca(cx, src_val, t).bcx; }\n \n         // If we're here, it must be a temporary.\n-        ret revoke_clean(cx, src_val, t);\n+        ret revoke_clean(cx, src_val);\n     }\n     /* FIXME: suggests a type constraint */\n     bcx_ccx(cx).sess.bug(\"unexpected type in trans::move_val: \" +\n@@ -3823,8 +3823,8 @@ fn zero_and_revoke(bcx: @block_ctxt,\n     for {v, t} in to_zero {\n         bcx = zero_alloca(bcx, v, t).bcx;\n     }\n-    for {v, t} in to_revoke {\n-        bcx = revoke_clean(bcx, v, t);\n+    for {v, _} in to_revoke {\n+        bcx = revoke_clean(bcx, v);\n     }\n     ret bcx;\n }"}, {"sha": "563ee322e6cd1c1ec8b1d5ab74f438fbc07c7c8f", "filename": "src/comp/middle/trans_common.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/42fd2a9d89e87e8840324873df23ab76ed2f4d3d/src%2Fcomp%2Fmiddle%2Ftrans_common.rs", "raw_url": "https://github.com/rust-lang/rust/raw/42fd2a9d89e87e8840324873df23ab76ed2f4d3d/src%2Fcomp%2Fmiddle%2Ftrans_common.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Ftrans_common.rs?ref=42fd2a9d89e87e8840324873df23ab76ed2f4d3d", "patch": "@@ -293,7 +293,7 @@ fn add_clean_temp(cx: @block_ctxt, val: ValueRef, ty: ty::t) {\n // to a system where we can also cancel the cleanup on local variables, but\n // this will be more involved. For now, we simply zero out the local, and the\n // drop glue checks whether it is zero.\n-fn revoke_clean(cx: @block_ctxt, val: ValueRef, t: ty::t) -> @block_ctxt {\n+fn revoke_clean(cx: @block_ctxt, val: ValueRef) -> @block_ctxt {\n     let sc_cx = find_scope_cx(cx);\n     let found = -1;\n     let i = 0;"}]}