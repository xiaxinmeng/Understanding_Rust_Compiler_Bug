{"sha": "3077a2bfaf0bde121072ff71649df6c39f9b66f4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjMwNzdhMmJmYWYwYmRlMTIxMDcyZmY3MTY0OWRmNmMzOWY5YjY2ZjQ=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-10-06T01:39:09Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-10-06T01:39:09Z"}, "message": "docs: Add a section on pointer dereferencing", "tree": {"sha": "8ef9948f39db15ebb9058439302280fccb27e247", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8ef9948f39db15ebb9058439302280fccb27e247"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3077a2bfaf0bde121072ff71649df6c39f9b66f4", "comment_count": 2, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3077a2bfaf0bde121072ff71649df6c39f9b66f4", "html_url": "https://github.com/rust-lang/rust/commit/3077a2bfaf0bde121072ff71649df6c39f9b66f4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3077a2bfaf0bde121072ff71649df6c39f9b66f4/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "38aab8e40034ae21b7c801ae8532ec1f5ae5022d", "url": "https://api.github.com/repos/rust-lang/rust/commits/38aab8e40034ae21b7c801ae8532ec1f5ae5022d", "html_url": "https://github.com/rust-lang/rust/commit/38aab8e40034ae21b7c801ae8532ec1f5ae5022d"}], "stats": {"total": 67, "additions": 67, "deletions": 0}, "files": [{"sha": "88643d38d4adcafa7a8c5809da1cca5e10117eee", "filename": "doc/tutorial.md", "status": "modified", "additions": 67, "deletions": 0, "changes": 67, "blob_url": "https://github.com/rust-lang/rust/blob/3077a2bfaf0bde121072ff71649df6c39f9b66f4/doc%2Ftutorial.md", "raw_url": "https://github.com/rust-lang/rust/raw/3077a2bfaf0bde121072ff71649df6c39f9b66f4/doc%2Ftutorial.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/doc%2Ftutorial.md?ref=3077a2bfaf0bde121072ff71649df6c39f9b66f4", "patch": "@@ -1284,6 +1284,73 @@ For a more in-depth explanation of borrowed pointers, read the\n \n [borrowtut]: tutorial-borrowed-ptr.html\n \n+## Dereferencing pointers\n+\n+Rust uses the unary star operator (`*`) to access the contents of a\n+box or pointer, similarly to C.\n+\n+~~~\n+let managed = @10;\n+let owned = ~20;\n+let borrowed = &30;\n+\n+let sum = *managed + *owned + *borrowed;\n+~~~\n+\n+Dereferenced mutable pointers may appear on the left hand side of\n+assignments, in which case the value they point to is modified.\n+\n+~~~\n+let managed = @mut 10;\n+let owned = ~mut 20;\n+\n+let mut value = 30;\n+let borrowed = &mut value;\n+\n+*managed = *owned + 10;\n+*owned = *borrowed + 100;\n+*borrowed = *managed + 1000;\n+~~~\n+\n+Pointers have high operator precedence, but lower precedence than the\n+dot operator used for field and method access. This can lead to some\n+awkward code filled with parenthesis.\n+\n+~~~\n+# struct Point { x: float, y: float }\n+# enum Shape { Rectangle(Point, Point) }\n+# impl Shape { fn area() -> int { 0 } }\n+let start = @Point { x: 10f, y: 20f };\n+let end = ~Point { x: (*start).x + 100f, y: (*start).y + 100f };\n+let rect = &Rectangle(*start, *end);\n+let area = (*rect).area();\n+~~~\n+\n+To combat this ugliness the dot operator performs _automatic pointer\n+dereferencing_ on the receiver (the value on the left hand side of the\n+dot), so in most cases dereferencing the receiver is not necessary.\n+\n+~~~\n+# struct Point { x: float, y: float }\n+# enum Shape { Rectangle(Point, Point) }\n+# impl Shape { fn area() -> int { 0 } }\n+let start = @Point { x: 10f, y: 20f };\n+let end = ~Point { x: start.x + 100f, y: start.y + 100f };\n+let rect = &Rectangle(*start, *end);\n+let area = rect.area();\n+~~~\n+\n+Auto-dereferencing is performed through any number of pointers. If you\n+felt inclined you could write something silly like\n+\n+~~~\n+# struct Point { x: float, y: float }\n+let point = &@~Point { x: 10f, y: 20f };\n+io::println(fmt!(\"%f\", point.x));\n+~~~\n+\n+The indexing operator (`[]`) is also auto-dereferencing.\n+\n # Vectors and strings\n \n Vectors are a contiguous section of memory containing zero or more"}]}