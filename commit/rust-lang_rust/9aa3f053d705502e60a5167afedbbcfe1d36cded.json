{"sha": "9aa3f053d705502e60a5167afedbbcfe1d36cded", "node_id": "C_kwDOAAsO6NoAKDlhYTNmMDUzZDcwNTUwMmU2MGE1MTY3YWZlZGJiY2ZlMWQzNmNkZWQ", "commit": {"author": {"name": "Mads Ravn", "email": "madsravn@gmail.com", "date": "2023-04-09T20:50:42Z"}, "committer": {"name": "Mads Ravn", "email": "madsravn@gmail.com", "date": "2023-04-09T20:50:42Z"}, "message": "'./configure' now checks if 'config.toml' exists before writing to that destination", "tree": {"sha": "becfc7fef7fd47a85e4b1e9b8206a77206730a15", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/becfc7fef7fd47a85e4b1e9b8206a77206730a15"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9aa3f053d705502e60a5167afedbbcfe1d36cded", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9aa3f053d705502e60a5167afedbbcfe1d36cded", "html_url": "https://github.com/rust-lang/rust/commit/9aa3f053d705502e60a5167afedbbcfe1d36cded", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9aa3f053d705502e60a5167afedbbcfe1d36cded/comments", "author": {"login": "madsravn", "id": 399452, "node_id": "MDQ6VXNlcjM5OTQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/399452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madsravn", "html_url": "https://github.com/madsravn", "followers_url": "https://api.github.com/users/madsravn/followers", "following_url": "https://api.github.com/users/madsravn/following{/other_user}", "gists_url": "https://api.github.com/users/madsravn/gists{/gist_id}", "starred_url": "https://api.github.com/users/madsravn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madsravn/subscriptions", "organizations_url": "https://api.github.com/users/madsravn/orgs", "repos_url": "https://api.github.com/users/madsravn/repos", "events_url": "https://api.github.com/users/madsravn/events{/privacy}", "received_events_url": "https://api.github.com/users/madsravn/received_events", "type": "User", "site_admin": false}, "committer": {"login": "madsravn", "id": 399452, "node_id": "MDQ6VXNlcjM5OTQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/399452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madsravn", "html_url": "https://github.com/madsravn", "followers_url": "https://api.github.com/users/madsravn/followers", "following_url": "https://api.github.com/users/madsravn/following{/other_user}", "gists_url": "https://api.github.com/users/madsravn/gists{/gist_id}", "starred_url": "https://api.github.com/users/madsravn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madsravn/subscriptions", "organizations_url": "https://api.github.com/users/madsravn/orgs", "repos_url": "https://api.github.com/users/madsravn/repos", "events_url": "https://api.github.com/users/madsravn/events{/privacy}", "received_events_url": "https://api.github.com/users/madsravn/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "39bf7777aab9ac1f6b0802cd52cd91d6e021aa91", "url": "https://api.github.com/repos/rust-lang/rust/commits/39bf7777aab9ac1f6b0802cd52cd91d6e021aa91", "html_url": "https://github.com/rust-lang/rust/commit/39bf7777aab9ac1f6b0802cd52cd91d6e021aa91"}], "stats": {"total": 6, "additions": 6, "deletions": 0}, "files": [{"sha": "716077adc754f8157b1579030eab5b252e7769ee", "filename": "src/bootstrap/configure.py", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9aa3f053d705502e60a5167afedbbcfe1d36cded/src%2Fbootstrap%2Fconfigure.py", "raw_url": "https://github.com/rust-lang/rust/raw/9aa3f053d705502e60a5167afedbbcfe1d36cded/src%2Fbootstrap%2Fconfigure.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fconfigure.py?ref=9aa3f053d705502e60a5167afedbbcfe1d36cded", "patch": "@@ -521,13 +521,19 @@ def write_config_toml(writer, section_order, targets, sections):\n         else:\n             writer = write_uncommented(sections[section], writer)\n \n+def quit_if_file_exists(file):\n+    if os.path.isfile(file):\n+        p(\"Existing '\" + file + \"' detected. EXITING\")\n+        quit()\n \n if __name__ == \"__main__\":\n     p(\"processing command line\")\n     # Parse all known arguments into a configuration structure that reflects the\n     # TOML we're going to write out\n     p(\"\")\n     section_order, sections, targets = parse_args(sys.argv[1:])\n+    # If 'config.toml' already exists, exit the script at this point\n+    quit_if_file_exists('config.toml')\n \n     # Now that we've built up our `config.toml`, write it all out in the same\n     # order that we read it in."}]}