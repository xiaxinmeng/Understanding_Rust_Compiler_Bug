{"sha": "c79df8563b805732d6d04767a7d57384f57fcb0e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM3OWRmODU2M2I4MDU3MzJkNmQwNDc2N2E3ZDU3Mzg0ZjU3ZmNiMGU=", "commit": {"author": {"name": "Santiago Pastorino", "email": "spastorino@gmail.com", "date": "2021-07-22T21:24:20Z"}, "committer": {"name": "Santiago Pastorino", "email": "spastorino@gmail.com", "date": "2021-07-23T11:55:31Z"}, "message": "Add ConstraintLocator docs", "tree": {"sha": "99ed2d355f547f412918c0e03a8aa38a0e056b16", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/99ed2d355f547f412918c0e03a8aa38a0e056b16"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c79df8563b805732d6d04767a7d57384f57fcb0e", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEF0ntrgrd9qf9uuThgTGiTgx5768FAmD6rjMACgkQgTGiTgx5\n76+CeBAArK7Mw+nCY9JlnDshgIriXQXpt7Po5gRUMd+AAfbDtsZZjs0opzlv60n9\n/jP00H6BsYtbW35keIinH3vaLAngj7pfgDFEnYoRBFey9IodfEVz7tpZkmUiQc4t\nHQdoSaMBknkl6XZERoHpm3jfr7sU2YBRz1Rx/d7MtMv22E7rWCyqCwD+K4g7PNY/\nYA2d2qBLlnD8UcgpGvkI2NLfO1BMBYJnVEcfdV3PNTmnWv2NXnIFg8zYRnCw8dda\nLLBJ4HjKjAHfis7dGiAjBfyNFB129MQeHGoxt5gYpDNkRlZIlcCi6ynL63F0Drqt\n8hYWpml16P+8I3fLFrSOz1mdd+YpRVlJi4RrDn9P5xkhJNRSw5WcS85pEgSwZ2x9\nTNOZUphyb74lxCjpL+XXU9vKqwMl39VfX9iJIjWstBpX5warhiYGeDCzfxDkDEf9\n/YFdoD3WJeS4jud5uXmAqBWfiUpYh0oNpRcPNrk7rSgdsrIQKsaY6gxOEVDym75K\nc/ke5PtI6/pnLq46+JM2AxpoQ3N86IVfIPUdA7WK5DD3rB2zk4Uwwjvg5UXOa2wA\nDAwn3axOfXgOUS/XesoXKXR8bIJZ/jyrMoDXV4jC4wEtzOtdWTyWYj7GtHOareXk\nGLwGqTAGC1Q209oeAsu5+VOeFkJTarxeJ5c4sUMJ5YTtt8Ch/KA=\n=iiz/\n-----END PGP SIGNATURE-----", "payload": "tree 99ed2d355f547f412918c0e03a8aa38a0e056b16\nparent d71410757d1e44dbcfb83ad2cfe75d687c695b91\nauthor Santiago Pastorino <spastorino@gmail.com> 1626989060 -0300\ncommitter Santiago Pastorino <spastorino@gmail.com> 1627041331 -0300\n\nAdd ConstraintLocator docs\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c79df8563b805732d6d04767a7d57384f57fcb0e", "html_url": "https://github.com/rust-lang/rust/commit/c79df8563b805732d6d04767a7d57384f57fcb0e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c79df8563b805732d6d04767a7d57384f57fcb0e/comments", "author": {"login": "spastorino", "id": 52642, "node_id": "MDQ6VXNlcjUyNjQy", "avatar_url": "https://avatars.githubusercontent.com/u/52642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spastorino", "html_url": "https://github.com/spastorino", "followers_url": "https://api.github.com/users/spastorino/followers", "following_url": "https://api.github.com/users/spastorino/following{/other_user}", "gists_url": "https://api.github.com/users/spastorino/gists{/gist_id}", "starred_url": "https://api.github.com/users/spastorino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spastorino/subscriptions", "organizations_url": "https://api.github.com/users/spastorino/orgs", "repos_url": "https://api.github.com/users/spastorino/repos", "events_url": "https://api.github.com/users/spastorino/events{/privacy}", "received_events_url": "https://api.github.com/users/spastorino/received_events", "type": "User", "site_admin": false}, "committer": {"login": "spastorino", "id": 52642, "node_id": "MDQ6VXNlcjUyNjQy", "avatar_url": "https://avatars.githubusercontent.com/u/52642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spastorino", "html_url": "https://github.com/spastorino", "followers_url": "https://api.github.com/users/spastorino/followers", "following_url": "https://api.github.com/users/spastorino/following{/other_user}", "gists_url": "https://api.github.com/users/spastorino/gists{/gist_id}", "starred_url": "https://api.github.com/users/spastorino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spastorino/subscriptions", "organizations_url": "https://api.github.com/users/spastorino/orgs", "repos_url": "https://api.github.com/users/spastorino/repos", "events_url": "https://api.github.com/users/spastorino/events{/privacy}", "received_events_url": "https://api.github.com/users/spastorino/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d71410757d1e44dbcfb83ad2cfe75d687c695b91", "url": "https://api.github.com/repos/rust-lang/rust/commits/d71410757d1e44dbcfb83ad2cfe75d687c695b91", "html_url": "https://github.com/rust-lang/rust/commit/d71410757d1e44dbcfb83ad2cfe75d687c695b91"}], "stats": {"total": 9, "additions": 8, "deletions": 1}, "files": [{"sha": "50e4ba4fe6c3e23cd22c40c364bb2f661905a552", "filename": "compiler/rustc_typeck/src/collect/type_of.rs", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/c79df8563b805732d6d04767a7d57384f57fcb0e/compiler%2Frustc_typeck%2Fsrc%2Fcollect%2Ftype_of.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c79df8563b805732d6d04767a7d57384f57fcb0e/compiler%2Frustc_typeck%2Fsrc%2Fcollect%2Ftype_of.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_typeck%2Fsrc%2Fcollect%2Ftype_of.rs?ref=c79df8563b805732d6d04767a7d57384f57fcb0e", "patch": "@@ -512,8 +512,15 @@ fn find_opaque_ty_constraints(tcx: TyCtxt<'_>, def_id: LocalDefId) -> Ty<'_> {\n \n     struct ConstraintLocator<'tcx> {\n         tcx: TyCtxt<'tcx>,\n+\n+        /// def_id of the opaque type whose defining uses are being checked\n         def_id: DefId,\n-        // (first found type span, actual type)\n+\n+        /// as we walk the defining uses, we are checking that all of them\n+        /// define the same hidden type. This variable is set to `Some`\n+        /// with the first type that we find, and then later types are\n+        /// checked against it (we also carry the span of that first\n+        /// type).\n         found: Option<(Span, Ty<'tcx>)>,\n     }\n "}]}