{"sha": "d694b0174af8799ba16b5183e8d3e1c4af574f5d", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ2OTRiMDE3NGFmODc5OWJhMTZiNTE4M2U4ZDNlMWM0YWY1NzRmNWQ=", "commit": {"author": {"name": "Felix S. Klock II", "email": "pnkfelix@pnkfx.org", "date": "2019-04-29T12:03:51Z"}, "committer": {"name": "Felix S. Klock II", "email": "pnkfelix@pnkfx.org", "date": "2019-04-29T12:03:51Z"}, "message": "Sidestep two-phase borrow violation signaled by mutable_borrow_reservation_conflict.\n\nSee rust-lang/rust#59159 for further information/discussion.", "tree": {"sha": "a1349b3ad2a2c782566176e61d87eceeb23e16bc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a1349b3ad2a2c782566176e61d87eceeb23e16bc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d694b0174af8799ba16b5183e8d3e1c4af574f5d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d694b0174af8799ba16b5183e8d3e1c4af574f5d", "html_url": "https://github.com/rust-lang/rust/commit/d694b0174af8799ba16b5183e8d3e1c4af574f5d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d694b0174af8799ba16b5183e8d3e1c4af574f5d/comments", "author": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6618d1edc3edaad9ebdc216e6d7423ac9ac6a265", "url": "https://api.github.com/repos/rust-lang/rust/commits/6618d1edc3edaad9ebdc216e6d7423ac9ac6a265", "html_url": "https://github.com/rust-lang/rust/commit/6618d1edc3edaad9ebdc216e6d7423ac9ac6a265"}], "stats": {"total": 5, "additions": 3, "deletions": 2}, "files": [{"sha": "4640b3b7471fcbd6ad2cb52194f74d0b9a8475a7", "filename": "crates/ra_hir/src/nameres/collector.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/d694b0174af8799ba16b5183e8d3e1c4af574f5d/crates%2Fra_hir%2Fsrc%2Fnameres%2Fcollector.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d694b0174af8799ba16b5183e8d3e1c4af574f5d/crates%2Fra_hir%2Fsrc%2Fnameres%2Fcollector.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fnameres%2Fcollector.rs?ref=d694b0174af8799ba16b5183e8d3e1c4af574f5d", "patch": "@@ -522,9 +522,10 @@ where\n         if let Some(macro_id) =\n             mac.path.as_ident().and_then(|name| self.def_collector.global_macro_scope.get(&name))\n         {\n-            let macro_call_id = MacroCallLoc { def: *macro_id, ast_id }.id(self.def_collector.db);\n+            let def = *macro_id;\n+            let macro_call_id = MacroCallLoc { def, ast_id }.id(self.def_collector.db);\n \n-            self.def_collector.collect_macro_expansion(self.module_id, macro_call_id, *macro_id);\n+            self.def_collector.collect_macro_expansion(self.module_id, macro_call_id, def);\n             return;\n         }\n "}]}