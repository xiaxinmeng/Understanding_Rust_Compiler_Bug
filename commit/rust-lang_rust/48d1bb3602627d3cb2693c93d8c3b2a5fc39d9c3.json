{"sha": "48d1bb3602627d3cb2693c93d8c3b2a5fc39d9c3", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ4ZDFiYjM2MDI2MjdkM2NiMjY5M2M5M2Q4YzNiMmE1ZmMzOWQ5YzM=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2014-12-22T20:48:10Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2014-12-22T20:48:10Z"}, "message": "rollup merge of #20129: nagisa/man-fixes\n\nThis pull request updates the rustc manual page to represent current state of rustc option handling better. Moved the apparently deprecated options (#19900) to their own section and added all the new codegen options.\n\nA bit unrelatedly, I also updated description of `-O` and `-g` flags to point to the new codegen options rather than old, deprecated ones.\n\nFixes #20111.", "tree": {"sha": "4d5c315dff19bd3e001870621ca169e8194bc6aa", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4d5c315dff19bd3e001870621ca169e8194bc6aa"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/48d1bb3602627d3cb2693c93d8c3b2a5fc39d9c3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/48d1bb3602627d3cb2693c93d8c3b2a5fc39d9c3", "html_url": "https://github.com/rust-lang/rust/commit/48d1bb3602627d3cb2693c93d8c3b2a5fc39d9c3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/48d1bb3602627d3cb2693c93d8c3b2a5fc39d9c3/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2cc9baccc783d5ff6e0f8fa27c38e2ddddfd71b7", "url": "https://api.github.com/repos/rust-lang/rust/commits/2cc9baccc783d5ff6e0f8fa27c38e2ddddfd71b7", "html_url": "https://github.com/rust-lang/rust/commit/2cc9baccc783d5ff6e0f8fa27c38e2ddddfd71b7"}, {"sha": "faa00949d9387321ec7cbb57282f0f73f0deb8dd", "url": "https://api.github.com/repos/rust-lang/rust/commits/faa00949d9387321ec7cbb57282f0f73f0deb8dd", "html_url": "https://github.com/rust-lang/rust/commit/faa00949d9387321ec7cbb57282f0f73f0deb8dd"}], "stats": {"total": 139, "additions": 83, "deletions": 56}, "files": [{"sha": "4457ac8cce7e31fe39686105b38d1cdb72af7fab", "filename": "man/rustc.1", "status": "modified", "additions": 79, "deletions": 52, "changes": 131, "blob_url": "https://github.com/rust-lang/rust/blob/48d1bb3602627d3cb2693c93d8c3b2a5fc39d9c3/man%2Frustc.1", "raw_url": "https://github.com/rust-lang/rust/raw/48d1bb3602627d3cb2693c93d8c3b2a5fc39d9c3/man%2Frustc.1", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/man%2Frustc.1?ref=48d1bb3602627d3cb2693c93d8c3b2a5fc39d9c3", "patch": "@@ -12,75 +12,54 @@ This program is a compiler for the Rust language, available at\n .SH OPTIONS\n \n .TP\n-\\fB\\-\\-crate-name NAME\\fR\n-Specify the name of the crate being built\n-.TP\n-\\fB\\-\\-crate-type=[bin|lib|dylib|rlib|staticlib]\\fR\n-Configure the flavor of rust crate that is generated (default `bin`)\n+\\fB\\-h\\fR, \\fB\\-\\-help\\fR\n+Display the help message\n .TP\n \\fB\\-\\-cfg\\fR SPEC\n Configure the compilation environment\n .TP\n-\\fB\\-\\-emit=[asm,ir,bc,obj,link]\\fR\n-Configure the output that rustc will produce\n-.TP\n-\\fB\\-h\\fR, \\fB\\-\\-help\\fR\n-Display this message\n-.TP\n \\fB\\-L\\fR PATH\n Add a directory to the library search path\n .TP\n-\\fB\\-\\-no\\-trans\\fR\n-Run all passes except translation; no output\n+\\fB\\-l\\fR NAME[:KIND]\n+Link the generated crate(s) to the specified native library NAME. The optional\n+KIND can be one of, static, dylib, or framework. If omitted, dylib is assumed.\n .TP\n-\\fB\\-\\-no\\-analysis\\fR\n-Parse and expand the source, but run no analysis and produce no output\n+\\fB\\-\\-crate-type\\fR [bin|lib|rlib|dylib|staticlib]\n+Comma separated list of types of crates for the compiler to emit\n .TP\n-\\fB\\-g\\fR\n-Emit DWARF debug information into object files generated.\n+\\fB\\-\\-crate-name NAME\\fR\n+Specify the name of the crate being built\n .TP\n-\\fB\\-\\-debuginfo\\fR LEVEL\n-Emit DWARF debug info to the objects created: 0 = no debug info, 1 =\n-line-tables only (for stacktraces and breakpoints), 2 = full debug\n-info with variable and type information (same as -g).\n+\\fB\\-\\-emit\\fR [asm|llvm-bc|llvm-ir|obj|link|dep-info]\n+Configure the output that rustc will produce\n+.TP\n+\\fB\\-\\-print\\fR [crate-name|output-file-names|sysroot]\n+Comma separated list of compiler information to print on stdout\n+.TP\n+\\fB\\-g\\fR\n+Equivalent to \\fI\\-C\\fR debuginfo=2\n .TP\n \\fB\\-O\\fR\n-Equivalent to \\fI\\-\\-opt\\-level=2\\fR\n+Equivalent to \\fI\\-C\\fR opt-level=2\n .TP\n \\fB\\-o\\fR FILENAME\n-Write output to <filename>. Ignored if more than one --emit is specified.\n-.TP\n-\\fB\\-\\-opt\\-level\\fR LEVEL\n-Optimize with possible levels 0-3\n+Write output to <filename>. Ignored if multiple \\fI\\-\\-emit\\fR outputs are\n+specified.\n .TP\n \\fB\\-\\-out\\-dir\\fR DIR\n-Write output to compiler-chosen filename in <dir>. Ignored if -o is specified.\n-(default the current directory)\n-.TP\n-\\fB\\-\\-parse\\-only\\fR\n-Parse only; do not compile, assemble, or link\n+Write output to compiler-chosen filename in <dir>. Ignored if \\fI\\-o\\fR is\n+specified. Defaults to the current directory.\n .TP\n-\\fB\\-\\-pretty\\fR [TYPE]\n-Pretty-print the input instead of compiling; valid types are: normal\n-(un-annotated source), expanded (crates expanded), typed (crates\n-expanded, with type annotations), identified (fully parenthesized,\n-AST nodes and blocks with IDs), or flowgraph=<nodeid> (graphviz\n-formatted flowgraph for node)\n-.TP\n-\\fB\\-\\-dep-info\\fR [FILENAME]\n-Output dependency info to <filename> after compiling, in a format suitable\n-for use by Makefiles.\n-.TP\n-\\fB\\-\\-sysroot\\fR PATH\n-Override the system root\n+\\fB\\-\\-explain\\fR OPT\n+Provide a detailed explanation of an error message\n .TP\n \\fB\\-\\-test\\fR\n Build a test harness\n .TP\n \\fB\\-\\-target\\fR TRIPLE\n-Target triple cpu-manufacturer-kernel[-os] to compile for (see\n-http://sources.redhat.com/autobook/autobook/autobook_17.html\n-for details)\n+Target triple cpu-manufacturer-kernel[-os] to compile for (see chapter 3.4 of\n+http://www.sourceware.org/autobook/ for details)\n .TP\n \\fB\\-W\\fR help\n Print 'lint' options and default settings\n@@ -97,15 +76,30 @@ Set lint denied\n \\fB\\-F\\fR OPT, \\fB\\-\\-forbid\\fR OPT\n Set lint forbidden\n .TP\n-\\fB\\-Z\\fR FLAG\n-Set internal debugging options. Use \"-Z help\" to print available options.\n-.TP\n \\fB\\-C\\fR FLAG[=VAL], \\fB\\-\\-codegen\\fR FLAG[=VAL]\n Set a codegen-related flag to the value specified. Use \"-C help\" to print\n available flags. See CODEGEN OPTIONS below\n .TP\n-\\fB\\-v\\fR, \\fB\\-\\-version\\fR\n+\\fB\\-V\\fR, \\fB\\-\\-version\\fR\n Print version info and exit\n+.TP\n+\\fB\\-v\\fR, \\fB\\-\\-verbose\\fR\n+Use verbose output\n+.TP\n+\\fB\\-\\-extern\\fR NAME=PATH\n+Specify where an external rust library is located\n+.TP\n+\\fB\\-\\-sysroot\\fR PATH\n+Override the system root\n+.TP\n+\\fB\\-Z\\fR FLAG\n+Set internal debugging options. Use \"-Z help\" to print available options.\n+.TP\n+\\fB\\-\\-color\\fR auto|always|never\n+Configure coloring of output:\n+    auto = colorize, if output goes to a tty (default);\n+    always = always colorize output;\n+    never = never colorize output\n \n .SH CODEGEN OPTIONS\n \n@@ -121,6 +115,9 @@ objects.\n A space-separated list of extra arguments to pass to the linker when the linker\n is invoked.\n .TP\n+\\fBlto\\fR\n+Perform LLVM link-time optimizations.\n+.TP\n \\fBtarget-cpu\\fR=help\n Selects a target processor. If the value is 'help', then a list of available\n CPUs is printed.\n@@ -167,8 +164,38 @@ Prefers dynamic linking to static linking.\n \\fBno-integrated-as\\fR\n Force usage of an external assembler rather than LLVM's integrated one.\n .TP\n+\\fBno-redzone\\fR\n+Disable the use of the redzone.\n+.TP\n \\fBrelocation-model\\fR=[pic,static,dynamic-no-pic]\n-The relocation model to use. (default: pic)\n+The relocation model to use. (Default: pic)\n+.TP\n+\\fBcode-model\\fR=[small,kernel,medium,large]\n+Choose the code model to use.\n+.TP\n+\\fBmetadata\\fR=val\n+Metadata to mangle symbol names with.\n+.TP\n+\\fBextra-filename\\fR=val\n+Extra data to put in each output filename.\n+.TP\n+\\fBcodegen-units\\fR=val\n+Divide crate into N units to optimize in parallel.\n+.TP\n+\\fBremark\\fR=val\n+Print remarks for these optimization passes (space separated, or \"all\").\n+.TP\n+\\fBno-stack-check\\fR\n+Disable checks for stack exhaustion (a memory-safety hazard!).\n+.TP\n+\\fBdebuginfo\\fR=val\n+Debug info emission level:\n+    0 = no debug info;\n+    1 = line-tables only (for stacktraces and breakpoints);\n+    2 = full debug info with variable and type information.\n+.TP\n+\\fBopt-level\\fR=val\n+Optimize with possible levels 0-3\n \n .SH \"EXAMPLES\"\n To build an executable from a source file with a main function:"}, {"sha": "e25c0be2ee5d0d6d98c19b2466eaf01f23c992ab", "filename": "src/librustc/session/config.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/48d1bb3602627d3cb2693c93d8c3b2a5fc39d9c3/src%2Flibrustc%2Fsession%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/48d1bb3602627d3cb2693c93d8c3b2a5fc39d9c3/src%2Flibrustc%2Fsession%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fsession%2Fconfig.rs?ref=48d1bb3602627d3cb2693c93d8c3b2a5fc39d9c3", "patch": "@@ -664,17 +664,17 @@ pub fn short_optgroups() -> Vec<getopts::OptGroup> {\n                              assumed.\", \"NAME[:KIND]\"),\n         optmulti(\"\", \"crate-type\", \"Comma separated list of types of crates\n                                     for the compiler to emit\",\n-                 \"[bin|lib|rlib|dylib|staticlib|dep-info]\"),\n+                 \"[bin|lib|rlib|dylib|staticlib]\"),\n         optopt(\"\", \"crate-name\", \"Specify the name of the crate being built\",\n                \"NAME\"),\n         optmulti(\"\", \"emit\", \"Comma separated list of types of output for \\\n                               the compiler to emit\",\n-                 \"[asm|llvm-bc|llvm-ir|obj|link]\"),\n+                 \"[asm|llvm-bc|llvm-ir|obj|link|dep-info]\"),\n         optmulti(\"\", \"print\", \"Comma separated list of compiler information to \\\n                                print on stdout\",\n                  \"[crate-name|output-file-names|sysroot]\"),\n-        optflag(\"g\",  \"\",  \"Equivalent to --debuginfo=2\"),\n-        optflag(\"O\", \"\", \"Equivalent to --opt-level=2\"),\n+        optflag(\"g\",  \"\",  \"Equivalent to -C debuginfo=2\"),\n+        optflag(\"O\", \"\", \"Equivalent to -C opt-level=2\"),\n         optopt(\"o\", \"\", \"Write output to <filename>\", \"FILENAME\"),\n         optopt(\"\",  \"out-dir\", \"Write output to compiler-chosen filename \\\n                                 in <dir>\", \"DIR\"),"}]}