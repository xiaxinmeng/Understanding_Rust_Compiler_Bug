{"sha": "aa674eefdae7b697bd55b028664f76e754914119", "node_id": "C_kwDOAAsO6NoAKGFhNjc0ZWVmZGFlN2I2OTdiZDU1YjAyODY2NGY3NmU3NTQ5MTQxMTk", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-11-29T21:43:20Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-11-29T21:43:20Z"}, "message": "Rollup merge of #105049 - mkroening:hermit-fixes, r=jyn514\n\nHermit: Minor build fixes\n\nThese changes are necessary to build for the hermit targets.\n\nCC: ``@stlankes``", "tree": {"sha": "1cb8d56e26a765ee887d5eedd6f1a422cdaef9f9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1cb8d56e26a765ee887d5eedd6f1a422cdaef9f9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/aa674eefdae7b697bd55b028664f76e754914119", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjhnz4CRBK7hj4Ov3rIwAA1tAIAAp5bCRSHp/Xl9/BPqYz986d\nbBwwWyP+/Hd3d1CnN5dWkCkBXMizo2rfmIMtSCXNirOF1zIpUK8Ml+pPmpAoqQtk\nyc/+bI5qO0OM4bNWacmJn825oSwGBHuyvAgdDnqS5u6VRg/Sipj3p6tEK8A1q7tc\nSmkOkt3xp5dmHM0P1oduGg9lMBThr9hje0TVydolWOw37XXnnRPDCD5iBU2n3iIU\nZJ2PH4iGIn33N/TcL64wgZC+0sP5rU2OyIWhR8vxH/f48CdQD5VwabND3zv7bFRh\nlWdh5pcYQ7E4bkO2qVpq6Z/0L8JSDJ3OBK9hzOM8CdYEo/G03mWwEPQGLNkM6UU=\n=YGFO\n-----END PGP SIGNATURE-----\n", "payload": "tree 1cb8d56e26a765ee887d5eedd6f1a422cdaef9f9\nparent b596d6be7f4d0421cf76a3c871877de130bc5fe5\nparent 0a4e5efe6f6e6d84147b3da689f99b2b9750834c\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1669758200 +0100\ncommitter GitHub <noreply@github.com> 1669758200 +0100\n\nRollup merge of #105049 - mkroening:hermit-fixes, r=jyn514\n\nHermit: Minor build fixes\n\nThese changes are necessary to build for the hermit targets.\n\nCC: ``@stlankes``\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/aa674eefdae7b697bd55b028664f76e754914119", "html_url": "https://github.com/rust-lang/rust/commit/aa674eefdae7b697bd55b028664f76e754914119", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/aa674eefdae7b697bd55b028664f76e754914119/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b596d6be7f4d0421cf76a3c871877de130bc5fe5", "url": "https://api.github.com/repos/rust-lang/rust/commits/b596d6be7f4d0421cf76a3c871877de130bc5fe5", "html_url": "https://github.com/rust-lang/rust/commit/b596d6be7f4d0421cf76a3c871877de130bc5fe5"}, {"sha": "0a4e5efe6f6e6d84147b3da689f99b2b9750834c", "url": "https://api.github.com/repos/rust-lang/rust/commits/0a4e5efe6f6e6d84147b3da689f99b2b9750834c", "html_url": "https://github.com/rust-lang/rust/commit/0a4e5efe6f6e6d84147b3da689f99b2b9750834c"}], "stats": {"total": 7, "additions": 3, "deletions": 4}, "files": [{"sha": "6fb92c037ee4f4f3338411479bd699de8a38f68a", "filename": "library/std/src/sys/hermit/fs.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/aa674eefdae7b697bd55b028664f76e754914119/library%2Fstd%2Fsrc%2Fsys%2Fhermit%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aa674eefdae7b697bd55b028664f76e754914119/library%2Fstd%2Fsrc%2Fsys%2Fhermit%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fhermit%2Ffs.rs?ref=aa674eefdae7b697bd55b028664f76e754914119", "patch": "@@ -1,10 +1,8 @@\n-use crate::convert::TryFrom;\n-use crate::ffi::{CStr, CString, OsString};\n+use crate::ffi::{CStr, OsString};\n use crate::fmt;\n use crate::hash::{Hash, Hasher};\n use crate::io::{self, Error, ErrorKind};\n use crate::io::{BorrowedCursor, IoSlice, IoSliceMut, SeekFrom};\n-use crate::os::unix::ffi::OsStrExt;\n use crate::path::{Path, PathBuf};\n use crate::sys::common::small_c_string::run_path_with_cstr;\n use crate::sys::cvt;"}, {"sha": "8f65544a9e894de0a21f897911fea2d688cead06", "filename": "library/std/src/sys/hermit/thread.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/aa674eefdae7b697bd55b028664f76e754914119/library%2Fstd%2Fsrc%2Fsys%2Fhermit%2Fthread.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aa674eefdae7b697bd55b028664f76e754914119/library%2Fstd%2Fsrc%2Fsys%2Fhermit%2Fthread.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fhermit%2Fthread.rs?ref=aa674eefdae7b697bd55b028664f76e754914119", "patch": "@@ -5,6 +5,7 @@ use crate::ffi::CStr;\n use crate::io;\n use crate::mem;\n use crate::num::NonZeroUsize;\n+use crate::ptr;\n use crate::sys::hermit::abi;\n use crate::sys::hermit::thread_local_dtor::run_dtors;\n use crate::time::Duration;\n@@ -47,7 +48,7 @@ impl Thread {\n         extern \"C\" fn thread_start(main: usize) {\n             unsafe {\n                 // Finally, let's run some code.\n-                Box::from_raw(main as *mut Box<dyn FnOnce()>)();\n+                Box::from_raw(ptr::from_exposed_addr::<Box<dyn FnOnce()>>(main).cast_mut())();\n \n                 // run all destructors\n                 run_dtors();"}]}