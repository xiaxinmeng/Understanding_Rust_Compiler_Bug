{"sha": "6f4326c54d4638950d30a72aa2aa4aa4bd42fd21", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZmNDMyNmM1NGQ0NjM4OTUwZDMwYTcyYWEyYWE0YWE0YmQ0MmZkMjE=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-06-17T00:18:35Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-06-17T00:23:20Z"}, "message": "Add better error messages for bad attributes in .rc files\n\nIssue #487", "tree": {"sha": "0b9f9f206f07b01daec87f2807213bfea92e0b8c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0b9f9f206f07b01daec87f2807213bfea92e0b8c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6f4326c54d4638950d30a72aa2aa4aa4bd42fd21", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6f4326c54d4638950d30a72aa2aa4aa4bd42fd21", "html_url": "https://github.com/rust-lang/rust/commit/6f4326c54d4638950d30a72aa2aa4aa4bd42fd21", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6f4326c54d4638950d30a72aa2aa4aa4bd42fd21/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fc12577fdd7969f5e9a136915f6ef48e67acd3bc", "url": "https://api.github.com/repos/rust-lang/rust/commits/fc12577fdd7969f5e9a136915f6ef48e67acd3bc", "html_url": "https://github.com/rust-lang/rust/commit/fc12577fdd7969f5e9a136915f6ef48e67acd3bc"}], "stats": {"total": 8, "additions": 7, "deletions": 1}, "files": [{"sha": "e5a74fba29575429dea565a451d7e62a257beb45", "filename": "src/comp/front/parser.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/6f4326c54d4638950d30a72aa2aa4aa4bd42fd21/src%2Fcomp%2Ffront%2Fparser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6f4326c54d4638950d30a72aa2aa4aa4bd42fd21/src%2Fcomp%2Ffront%2Fparser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Ffront%2Fparser.rs?ref=6f4326c54d4638950d30a72aa2aa4aa4bd42fd21", "patch": "@@ -2125,7 +2125,8 @@ fn parse_inner_attrs_and_next(&parser p) -> tup(vec[ast::attribute],\n fn parse_inner_attrs(&parser p) -> vec[ast::attribute] {\n     auto attrs_and_next = parse_inner_attrs_and_next(p);\n     if (vec::len(attrs_and_next._1) > 0u) {\n-        // FIXME: Don't drop this dangling attr on the ground\n+        ret p.err(\"expected crate directive but found \" +\n+                  token::to_str(p.get_reader(), p.peek()));\n     }\n     ret attrs_and_next._0;\n }"}, {"sha": "10133a7f21556c59f9fb0da6ecf139d78c6a55eb", "filename": "src/test/compile-fail/attr-bad-crate-attr.rc", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/6f4326c54d4638950d30a72aa2aa4aa4bd42fd21/src%2Ftest%2Fcompile-fail%2Fattr-bad-crate-attr.rc", "raw_url": "https://github.com/rust-lang/rust/raw/6f4326c54d4638950d30a72aa2aa4aa4bd42fd21/src%2Ftest%2Fcompile-fail%2Fattr-bad-crate-attr.rc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fattr-bad-crate-attr.rc?ref=6f4326c54d4638950d30a72aa2aa4aa4bd42fd21", "patch": "@@ -0,0 +1,5 @@\n+// xfail-stage0\n+// error-pattern: expected crate directive\n+\n+#[attr = \"val\"];\n+#[attr = \"val\"] // Unterminated"}]}