{"sha": "ef4853041a091f928a44aac28abf431965ce6fa2", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVmNDg1MzA0MWEwOTFmOTI4YTQ0YWFjMjhhYmY0MzE5NjVjZTZmYTI=", "commit": {"author": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2015-08-31T05:06:30Z"}, "committer": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2015-08-31T05:06:30Z"}, "message": "Closures are not generated code.", "tree": {"sha": "9c56441e6667822a8228a3d255169c6fa0af6a88", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9c56441e6667822a8228a3d255169c6fa0af6a88"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ef4853041a091f928a44aac28abf431965ce6fa2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ef4853041a091f928a44aac28abf431965ce6fa2", "html_url": "https://github.com/rust-lang/rust/commit/ef4853041a091f928a44aac28abf431965ce6fa2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ef4853041a091f928a44aac28abf431965ce6fa2/comments", "author": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8f28c9b01ee5ff7e73bb81b3364f26b6ad4060a2", "url": "https://api.github.com/repos/rust-lang/rust/commits/8f28c9b01ee5ff7e73bb81b3364f26b6ad4060a2", "html_url": "https://github.com/rust-lang/rust/commit/8f28c9b01ee5ff7e73bb81b3364f26b6ad4060a2"}], "stats": {"total": 7, "additions": 1, "deletions": 6}, "files": [{"sha": "56a15ce895cf24f7fddc0cfd75f6e4e273b3095e", "filename": "src/libsyntax/codemap.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ef4853041a091f928a44aac28abf431965ce6fa2/src%2Flibsyntax%2Fcodemap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ef4853041a091f928a44aac28abf431965ce6fa2/src%2Flibsyntax%2Fcodemap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fcodemap.rs?ref=ef4853041a091f928a44aac28abf431965ce6fa2", "patch": "@@ -275,7 +275,6 @@ pub enum CompilerExpansionFormat {\n     PlacementIn,\n     WhileLet,\n     ForLoop,\n-    Closure,\n }\n \n impl CompilerExpansionFormat {\n@@ -285,7 +284,6 @@ impl CompilerExpansionFormat {\n             CompilerExpansionFormat::PlacementIn => \"placement-in expansion\",\n             CompilerExpansionFormat::WhileLet => \"while let expansion\",\n             CompilerExpansionFormat::ForLoop => \"for loop expansion\",\n-            CompilerExpansionFormat::Closure => \"closure expansion\",\n         }\n     }\n }"}, {"sha": "c1c6918aba7be4ecc983f4da0e4348ce177f4b13", "filename": "src/libsyntax/ext/expand.rs", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/ef4853041a091f928a44aac28abf431965ce6fa2/src%2Flibsyntax%2Fext%2Fexpand.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ef4853041a091f928a44aac28abf431965ce6fa2/src%2Flibsyntax%2Fext%2Fexpand.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fexpand.rs?ref=ef4853041a091f928a44aac28abf431965ce6fa2", "patch": "@@ -459,15 +459,12 @@ pub fn expand_expr(e: P<ast::Expr>, fld: &mut MacroExpander) -> P<ast::Expr> {\n         }\n \n         ast::ExprClosure(capture_clause, fn_decl, block) => {\n-            push_compiler_expansion(fld, span, CompilerExpansionFormat::Closure);\n             let (rewritten_fn_decl, rewritten_block)\n                 = expand_and_rename_fn_decl_and_block(fn_decl, block, fld);\n             let new_node = ast::ExprClosure(capture_clause,\n                                             rewritten_fn_decl,\n                                             rewritten_block);\n-            let result = P(ast::Expr{id:id, node: new_node, span: fld.new_span(span)});\n-            fld.cx.bt_pop();\n-            result\n+            P(ast::Expr{id:id, node: new_node, span: fld.new_span(span)})\n         }\n \n         _ => {"}]}