{"sha": "9db34eec209c740ed919afb288f75daa755cd268", "node_id": "MDY6Q29tbWl0NzI0NzEyOjlkYjM0ZWVjMjA5Yzc0MGVkOTE5YWZiMjg4Zjc1ZGFhNzU1Y2QyNjg=", "commit": {"author": {"name": "Florian Diebold", "email": "flodiebold@gmail.com", "date": "2019-09-07T14:30:37Z"}, "committer": {"name": "Florian Diebold", "email": "flodiebold@gmail.com", "date": "2019-09-07T14:30:37Z"}, "message": "Fix Chalk environments\n\nThe clauses need to be wrapped in `FromEnv` clauses for elaboration (i.e.\nthings like inferring `T: Clone` from `T: Copy`) to work correctly.", "tree": {"sha": "2e1cdeebf32b8493c8447316bbe384095cd69067", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2e1cdeebf32b8493c8447316bbe384095cd69067"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9db34eec209c740ed919afb288f75daa755cd268", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9db34eec209c740ed919afb288f75daa755cd268", "html_url": "https://github.com/rust-lang/rust/commit/9db34eec209c740ed919afb288f75daa755cd268", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9db34eec209c740ed919afb288f75daa755cd268/comments", "author": {"login": "flodiebold", "id": 906069, "node_id": "MDQ6VXNlcjkwNjA2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/906069?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flodiebold", "html_url": "https://github.com/flodiebold", "followers_url": "https://api.github.com/users/flodiebold/followers", "following_url": "https://api.github.com/users/flodiebold/following{/other_user}", "gists_url": "https://api.github.com/users/flodiebold/gists{/gist_id}", "starred_url": "https://api.github.com/users/flodiebold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flodiebold/subscriptions", "organizations_url": "https://api.github.com/users/flodiebold/orgs", "repos_url": "https://api.github.com/users/flodiebold/repos", "events_url": "https://api.github.com/users/flodiebold/events{/privacy}", "received_events_url": "https://api.github.com/users/flodiebold/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flodiebold", "id": 906069, "node_id": "MDQ6VXNlcjkwNjA2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/906069?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flodiebold", "html_url": "https://github.com/flodiebold", "followers_url": "https://api.github.com/users/flodiebold/followers", "following_url": "https://api.github.com/users/flodiebold/following{/other_user}", "gists_url": "https://api.github.com/users/flodiebold/gists{/gist_id}", "starred_url": "https://api.github.com/users/flodiebold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flodiebold/subscriptions", "organizations_url": "https://api.github.com/users/flodiebold/orgs", "repos_url": "https://api.github.com/users/flodiebold/repos", "events_url": "https://api.github.com/users/flodiebold/events{/privacy}", "received_events_url": "https://api.github.com/users/flodiebold/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a1776b27c7d7c266d751360b80cc573b1520ef65", "url": "https://api.github.com/repos/rust-lang/rust/commits/a1776b27c7d7c266d751360b80cc573b1520ef65", "html_url": "https://github.com/rust-lang/rust/commit/a1776b27c7d7c266d751360b80cc573b1520ef65"}], "stats": {"total": 7, "additions": 4, "deletions": 3}, "files": [{"sha": "3f86a5c8063c16819d1b6882bc2bb70a9306d4a8", "filename": "crates/ra_hir/src/ty/tests.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9db34eec209c740ed919afb288f75daa755cd268/crates%2Fra_hir%2Fsrc%2Fty%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9db34eec209c740ed919afb288f75daa755cd268/crates%2Fra_hir%2Fsrc%2Fty%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Ftests.rs?ref=9db34eec209c740ed919afb288f75daa755cd268", "patch": "@@ -3687,9 +3687,9 @@ fn test<T: Trait1, U: Trait2>(x: T, y: U) {\n     [188; 189) 'y': U\n     [194; 223) '{     ...o(); }': ()\n     [200; 201) 'x': T\n-    [200; 207) 'x.foo()': {unknown}\n+    [200; 207) 'x.foo()': u32\n     [213; 214) 'y': U\n-    [213; 220) 'y.foo()': {unknown}\n+    [213; 220) 'y.foo()': u32\n     \"###\n     );\n }"}, {"sha": "8a127efa196f81f9ed0d02ef74c4a73453467fd5", "filename": "crates/ra_hir/src/ty/traits/chalk.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/9db34eec209c740ed919afb288f75daa755cd268/crates%2Fra_hir%2Fsrc%2Fty%2Ftraits%2Fchalk.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9db34eec209c740ed919afb288f75daa755cd268/crates%2Fra_hir%2Fsrc%2Fty%2Ftraits%2Fchalk.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Ftraits%2Fchalk.rs?ref=9db34eec209c740ed919afb288f75daa755cd268", "patch": "@@ -314,7 +314,8 @@ impl ToChalk for Arc<super::TraitEnvironment> {\n                 // for env, we just ignore errors\n                 continue;\n             }\n-            clauses.push(pred.clone().to_chalk(db).cast());\n+            let program_clause: chalk_ir::ProgramClause = pred.clone().to_chalk(db).cast();\n+            clauses.push(program_clause.into_from_env_clause());\n         }\n         chalk_ir::Environment::new().add_clauses(clauses)\n     }"}]}