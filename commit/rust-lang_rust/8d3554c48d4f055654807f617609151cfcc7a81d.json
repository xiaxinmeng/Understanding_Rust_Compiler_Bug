{"sha": "8d3554c48d4f055654807f617609151cfcc7a81d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhkMzU1NGM0OGQ0ZjA1NTY1NDgwN2Y2MTc2MDkxNTFjZmNjN2E4MWQ=", "commit": {"author": {"name": "Pazzaz", "email": "pazzaz.sundqvist@gmail.com", "date": "2018-08-14T18:54:25Z"}, "committer": {"name": "Pazzaz", "email": "pazzaz.sundqvist@gmail.com", "date": "2018-08-14T18:54:25Z"}, "message": "Don't drop values in other, just move the tail", "tree": {"sha": "31ee22c9806ee77291d074f8b0de34ac79424c17", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/31ee22c9806ee77291d074f8b0de34ac79424c17"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8d3554c48d4f055654807f617609151cfcc7a81d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8d3554c48d4f055654807f617609151cfcc7a81d", "html_url": "https://github.com/rust-lang/rust/commit/8d3554c48d4f055654807f617609151cfcc7a81d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8d3554c48d4f055654807f617609151cfcc7a81d/comments", "author": {"login": "Pazzaz", "id": 16006944, "node_id": "MDQ6VXNlcjE2MDA2OTQ0", "avatar_url": "https://avatars.githubusercontent.com/u/16006944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Pazzaz", "html_url": "https://github.com/Pazzaz", "followers_url": "https://api.github.com/users/Pazzaz/followers", "following_url": "https://api.github.com/users/Pazzaz/following{/other_user}", "gists_url": "https://api.github.com/users/Pazzaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/Pazzaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Pazzaz/subscriptions", "organizations_url": "https://api.github.com/users/Pazzaz/orgs", "repos_url": "https://api.github.com/users/Pazzaz/repos", "events_url": "https://api.github.com/users/Pazzaz/events{/privacy}", "received_events_url": "https://api.github.com/users/Pazzaz/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Pazzaz", "id": 16006944, "node_id": "MDQ6VXNlcjE2MDA2OTQ0", "avatar_url": "https://avatars.githubusercontent.com/u/16006944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Pazzaz", "html_url": "https://github.com/Pazzaz", "followers_url": "https://api.github.com/users/Pazzaz/followers", "following_url": "https://api.github.com/users/Pazzaz/following{/other_user}", "gists_url": "https://api.github.com/users/Pazzaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/Pazzaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Pazzaz/subscriptions", "organizations_url": "https://api.github.com/users/Pazzaz/orgs", "repos_url": "https://api.github.com/users/Pazzaz/repos", "events_url": "https://api.github.com/users/Pazzaz/events{/privacy}", "received_events_url": "https://api.github.com/users/Pazzaz/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "894c9ca1a7e8265e0d9e8453f1d236293b6103b2", "url": "https://api.github.com/repos/rust-lang/rust/commits/894c9ca1a7e8265e0d9e8453f1d236293b6103b2", "html_url": "https://github.com/rust-lang/rust/commit/894c9ca1a7e8265e0d9e8453f1d236293b6103b2"}], "stats": {"total": 10, "additions": 3, "deletions": 7}, "files": [{"sha": "b66bb82bc37b59f2383ab753e73bff3c8e3abd0c", "filename": "src/liballoc/collections/vec_deque.rs", "status": "modified", "additions": 3, "deletions": 7, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/8d3554c48d4f055654807f617609151cfcc7a81d/src%2Fliballoc%2Fcollections%2Fvec_deque.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8d3554c48d4f055654807f617609151cfcc7a81d/src%2Fliballoc%2Fcollections%2Fvec_deque.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliballoc%2Fcollections%2Fvec_deque.rs?ref=8d3554c48d4f055654807f617609151cfcc7a81d", "patch": "@@ -1859,7 +1859,7 @@ impl<T> VecDeque<T> {\n         // Guarantees there is space in `self` for `other`.\n         self.reserve(src_total);\n \n-        let new_head = {\n+        self.head = {\n             let original_head = self.head;\n \n             // The goal is to copy all values from `other` into `self`. To avoid any\n@@ -1988,12 +1988,8 @@ impl<T> VecDeque<T> {\n             }\n         };\n \n-        // Up until this point we are in a bad state as some values\n-        // exist in both `self` and `other`. To preserve panic safety\n-        // it is important we clear the old values from `other`...\n-        other.clear();\n-        // and that we update `head` as the last step, making the values accessible in `self`.\n-        self.head = new_head;\n+        // Some values now exist in both `other` and `self` but are made inaccessible in `other`.\n+        other.tail = other.head;\n     }\n \n     /// Retains only the elements specified by the predicate."}]}