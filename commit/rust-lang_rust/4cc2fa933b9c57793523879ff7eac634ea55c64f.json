{"sha": "4cc2fa933b9c57793523879ff7eac634ea55c64f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRjYzJmYTkzM2I5YzU3NzkzNTIzODc5ZmY3ZWFjNjM0ZWE1NWM2NGY=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2020-06-23T12:04:08Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2020-06-23T12:04:08Z"}, "message": "Auto merge of #5739 - flip1995:rustup, r=flip1995\n\nRustup\n\nchangelog: none\n\nr? @ghost", "tree": {"sha": "a86d2aa2a85dbedc1b8539ebe84d3c987ce22520", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a86d2aa2a85dbedc1b8539ebe84d3c987ce22520"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4cc2fa933b9c57793523879ff7eac634ea55c64f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4cc2fa933b9c57793523879ff7eac634ea55c64f", "html_url": "https://github.com/rust-lang/rust/commit/4cc2fa933b9c57793523879ff7eac634ea55c64f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4cc2fa933b9c57793523879ff7eac634ea55c64f/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c56c7e2d02920a8ec2dcb67c5f18d589af7ceb1c", "url": "https://api.github.com/repos/rust-lang/rust/commits/c56c7e2d02920a8ec2dcb67c5f18d589af7ceb1c", "html_url": "https://github.com/rust-lang/rust/commit/c56c7e2d02920a8ec2dcb67c5f18d589af7ceb1c"}, {"sha": "1d077f61091b3e73b047be3ec681a923b54f3bf0", "url": "https://api.github.com/repos/rust-lang/rust/commits/1d077f61091b3e73b047be3ec681a923b54f3bf0", "html_url": "https://github.com/rust-lang/rust/commit/1d077f61091b3e73b047be3ec681a923b54f3bf0"}], "stats": {"total": 13, "additions": 6, "deletions": 7}, "files": [{"sha": "1f9bd7a691b520bed9c788980974d3050d14e69d", "filename": "clippy_lints/src/functions.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4cc2fa933b9c57793523879ff7eac634ea55c64f/clippy_lints%2Fsrc%2Ffunctions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4cc2fa933b9c57793523879ff7eac634ea55c64f/clippy_lints%2Fsrc%2Ffunctions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ffunctions.rs?ref=4cc2fa933b9c57793523879ff7eac634ea55c64f", "patch": "@@ -513,7 +513,7 @@ fn is_mutable_ty<'a, 'tcx>(cx: &LateContext<'a, 'tcx>, ty: Ty<'tcx>, span: Span,\n         // primitive types are never mutable\n         ty::Bool | ty::Char | ty::Int(_) | ty::Uint(_) | ty::Float(_) | ty::Str => false,\n         ty::Adt(ref adt, ref substs) => {\n-            tys.insert(adt.did) && !ty.is_freeze(cx.tcx, cx.param_env, span)\n+            tys.insert(adt.did) && !ty.is_freeze(cx.tcx.at(span), cx.param_env)\n                 || KNOWN_WRAPPER_TYS.iter().any(|path| match_def_path(cx, adt.did, path))\n                     && substs.types().any(|ty| is_mutable_ty(cx, ty, span, tys))\n         },"}, {"sha": "e097f40f87e47c4b13084141de3e89b840b89232", "filename": "clippy_lints/src/let_if_seq.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/4cc2fa933b9c57793523879ff7eac634ea55c64f/clippy_lints%2Fsrc%2Flet_if_seq.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4cc2fa933b9c57793523879ff7eac634ea55c64f/clippy_lints%2Fsrc%2Flet_if_seq.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flet_if_seq.rs?ref=4cc2fa933b9c57793523879ff7eac634ea55c64f", "patch": "@@ -74,9 +74,8 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for LetIfSeq {\n                     let span = stmt.span.to(if_.span);\n \n                     let has_interior_mutability = !cx.tables.node_type(canonical_id).is_freeze(\n-                        cx.tcx,\n+                        cx.tcx.at(span),\n                         cx.param_env,\n-                        span\n                     );\n                     if has_interior_mutability { return; }\n "}, {"sha": "93569a04f7a3a23b151b70b28752f912d6cacf23", "filename": "clippy_lints/src/mut_key.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4cc2fa933b9c57793523879ff7eac634ea55c64f/clippy_lints%2Fsrc%2Fmut_key.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4cc2fa933b9c57793523879ff7eac634ea55c64f/clippy_lints%2Fsrc%2Fmut_key.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmut_key.rs?ref=4cc2fa933b9c57793523879ff7eac634ea55c64f", "patch": "@@ -118,7 +118,7 @@ fn is_mutable_type<'a, 'tcx>(cx: &LateContext<'a, 'tcx>, ty: Ty<'tcx>, span: Spa\n             size.try_eval_usize(cx.tcx, cx.param_env).map_or(true, |u| u != 0) && is_mutable_type(cx, inner_ty, span)\n         },\n         Tuple(..) => ty.tuple_fields().any(|ty| is_mutable_type(cx, ty, span)),\n-        Adt(..) => cx.tcx.layout_of(cx.param_env.and(ty)).is_ok() && !ty.is_freeze(cx.tcx, cx.param_env, span),\n+        Adt(..) => cx.tcx.layout_of(cx.param_env.and(ty)).is_ok() && !ty.is_freeze(cx.tcx.at(span), cx.param_env),\n         _ => false,\n     }\n }"}, {"sha": "230dfd2ebf5661c3dd768225627bc5b4199fd93d", "filename": "clippy_lints/src/non_copy_const.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4cc2fa933b9c57793523879ff7eac634ea55c64f/clippy_lints%2Fsrc%2Fnon_copy_const.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4cc2fa933b9c57793523879ff7eac634ea55c64f/clippy_lints%2Fsrc%2Fnon_copy_const.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fnon_copy_const.rs?ref=4cc2fa933b9c57793523879ff7eac634ea55c64f", "patch": "@@ -110,7 +110,7 @@ impl Source {\n }\n \n fn verify_ty_bound<'a, 'tcx>(cx: &LateContext<'a, 'tcx>, ty: Ty<'tcx>, source: Source) {\n-    if ty.is_freeze(cx.tcx, cx.param_env, DUMMY_SP) || is_copy(cx, ty) {\n+    if ty.is_freeze(cx.tcx.at(DUMMY_SP), cx.param_env) || is_copy(cx, ty) {\n         // An `UnsafeCell` is `!Copy`, and an `UnsafeCell` is also the only type which\n         // is `!Freeze`, thus if our type is `Copy` we can be sure it must be `Freeze`\n         // as well."}, {"sha": "d8a73f8054bcaa0dff4509fd060d686b24a89ee2", "filename": "clippy_lints/src/question_mark.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4cc2fa933b9c57793523879ff7eac634ea55c64f/clippy_lints%2Fsrc%2Fquestion_mark.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4cc2fa933b9c57793523879ff7eac634ea55c64f/clippy_lints%2Fsrc%2Fquestion_mark.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fquestion_mark.rs?ref=4cc2fa933b9c57793523879ff7eac634ea55c64f", "patch": "@@ -137,7 +137,7 @@ impl QuestionMark {\n     fn moves_by_default(cx: &LateContext<'_, '_>, expression: &Expr<'_>) -> bool {\n         let expr_ty = cx.tables.expr_ty(expression);\n \n-        !expr_ty.is_copy_modulo_regions(cx.tcx, cx.param_env, expression.span)\n+        !expr_ty.is_copy_modulo_regions(cx.tcx.at(expression.span), cx.param_env)\n     }\n \n     fn is_option(cx: &LateContext<'_, '_>, expression: &Expr<'_>) -> bool {"}, {"sha": "6d4c6c6ce1ceada7c78195219f454e35374ccc3f", "filename": "clippy_lints/src/utils/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4cc2fa933b9c57793523879ff7eac634ea55c64f/clippy_lints%2Fsrc%2Futils%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4cc2fa933b9c57793523879ff7eac634ea55c64f/clippy_lints%2Fsrc%2Futils%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fmod.rs?ref=4cc2fa933b9c57793523879ff7eac634ea55c64f", "patch": "@@ -891,7 +891,7 @@ pub fn type_is_unsafe_function<'a, 'tcx>(cx: &LateContext<'a, 'tcx>, ty: Ty<'tcx\n }\n \n pub fn is_copy<'a, 'tcx>(cx: &LateContext<'a, 'tcx>, ty: Ty<'tcx>) -> bool {\n-    ty.is_copy_modulo_regions(cx.tcx, cx.param_env, DUMMY_SP)\n+    ty.is_copy_modulo_regions(cx.tcx.at(DUMMY_SP), cx.param_env)\n }\n \n /// Checks if an expression is constructing a tuple-like enum variant or struct"}]}