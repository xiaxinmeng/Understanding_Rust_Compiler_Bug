{"sha": "08351004125c4d49aa757f2c3ec2340f7469ea91", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA4MzUxMDA0MTI1YzRkNDlhYTc1N2YyYzNlYzIzNDBmNzQ2OWVhOTE=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-09-19T02:53:09Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-09-19T02:53:09Z"}, "message": "Rollup merge of #64554 - lqd:polonius_tests4, r=nikomatsakis\n\nPolonius: more `ui` test suite fixes\n\nSince #62736, new tests have been added, and the `run-pass` suite was merged into the `ui` suite.\n\nThis PR adds the missing tests expectations for Polonius, and updates the existing ones where the NLL output has changed in some manner (e.g. ordering of notes)\n\nThose are the trivial cases, but a more-detailed explanation is available [in this write-up](https://hackmd.io/CjYB0fs4Q9CweyeTdKWyEg?both#26-async-awaitasync-borrowck-escaping-closure-errorrs-outputs-from-NLL-Polonius-diff) starting at test case 26: they are only differing in diagnostics and instances of other existing test cases differences.\n\nOnly 3 of the 9020 tests are still \"failing\" at the moment (1 failure, 2 OOMs).\n\nr? @nikomatsakis", "tree": {"sha": "6df852a073cf0974599653c381895b611583923e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6df852a073cf0974599653c381895b611583923e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/08351004125c4d49aa757f2c3ec2340f7469ea91", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdgu2WCRBK7hj4Ov3rIwAAdHIIAAdL0wjevxOwTy1X00XwCgm2\nWAczbNVMg+nBma1V6k6mSRtFDVoxKIeCRvXHT91d+7dWtr4ogq0h6A5wXkQHTnlg\n9X/2jsroGVVtvmTuM8HOgT0CEuvlrNL3CezuiSiBZcTHdRMLRUT98yK7IseY2UAe\nfOkxEICjyiVE5jHi4M0oyZ6ZLv1BVO6GGOIu04i7zpybNwc/VX1Cj+Y2H9in7Gmg\ngH6N1tbJP73mAh/B6lfYUqDl5IIucFxz29tJ7WG6QfyvaEE0aX8ep3VLRIURs15K\nn8csMyUuHNuwlyWEB7NeHkFFNV/ATRv0Pcd6cFLn50eXWorpKMFIVRzGnIfuNm4=\n=TU/W\n-----END PGP SIGNATURE-----\n", "payload": "tree 6df852a073cf0974599653c381895b611583923e\nparent 11a0b968c287c81680387ffcf112328d52d7e815\nparent f9c73293e231f1179c426311bd7ab11f46473e9a\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1568861589 +0200\ncommitter GitHub <noreply@github.com> 1568861589 +0200\n\nRollup merge of #64554 - lqd:polonius_tests4, r=nikomatsakis\n\nPolonius: more `ui` test suite fixes\n\nSince #62736, new tests have been added, and the `run-pass` suite was merged into the `ui` suite.\n\nThis PR adds the missing tests expectations for Polonius, and updates the existing ones where the NLL output has changed in some manner (e.g. ordering of notes)\n\nThose are the trivial cases, but a more-detailed explanation is available [in this write-up](https://hackmd.io/CjYB0fs4Q9CweyeTdKWyEg?both#26-async-awaitasync-borrowck-escaping-closure-errorrs-outputs-from-NLL-Polonius-diff) starting at test case 26: they are only differing in diagnostics and instances of other existing test cases differences.\n\nOnly 3 of the 9020 tests are still \"failing\" at the moment (1 failure, 2 OOMs).\n\nr? @nikomatsakis\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/08351004125c4d49aa757f2c3ec2340f7469ea91", "html_url": "https://github.com/rust-lang/rust/commit/08351004125c4d49aa757f2c3ec2340f7469ea91", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/08351004125c4d49aa757f2c3ec2340f7469ea91/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "11a0b968c287c81680387ffcf112328d52d7e815", "url": "https://api.github.com/repos/rust-lang/rust/commits/11a0b968c287c81680387ffcf112328d52d7e815", "html_url": "https://github.com/rust-lang/rust/commit/11a0b968c287c81680387ffcf112328d52d7e815"}, {"sha": "f9c73293e231f1179c426311bd7ab11f46473e9a", "url": "https://api.github.com/repos/rust-lang/rust/commits/f9c73293e231f1179c426311bd7ab11f46473e9a", "html_url": "https://github.com/rust-lang/rust/commit/f9c73293e231f1179c426311bd7ab11f46473e9a"}], "stats": {"total": 46, "additions": 42, "deletions": 4}, "files": [{"sha": "5f20367b6aba97e8c68dfcb74974fbe9a9c76cf5", "filename": "src/test/ui/async-await/async-borrowck-escaping-closure-error.polonius.stderr", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/08351004125c4d49aa757f2c3ec2340f7469ea91/src%2Ftest%2Fui%2Fasync-await%2Fasync-borrowck-escaping-closure-error.polonius.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/08351004125c4d49aa757f2c3ec2340f7469ea91/src%2Ftest%2Fui%2Fasync-await%2Fasync-borrowck-escaping-closure-error.polonius.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasync-await%2Fasync-borrowck-escaping-closure-error.polonius.stderr?ref=08351004125c4d49aa757f2c3ec2340f7469ea91", "patch": "@@ -0,0 +1,16 @@\n+error[E0597]: `x` does not live long enough\n+  --> $DIR/async-borrowck-escaping-closure-error.rs:5:24\n+   |\n+LL |     Box::new((async || x)())\n+   |     -------------------^----\n+   |     |         |        |\n+   |     |         |        borrowed value does not live long enough\n+   |     |         value captured here\n+   |     borrow later used here\n+LL |\n+LL | }\n+   | - `x` dropped here while still borrowed\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0597`."}, {"sha": "c818379762c9df661067128c0557dfab0b019a0b", "filename": "src/test/ui/borrowck/return-local-binding-from-desugaring.polonius.stderr", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/08351004125c4d49aa757f2c3ec2340f7469ea91/src%2Ftest%2Fui%2Fborrowck%2Freturn-local-binding-from-desugaring.polonius.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/08351004125c4d49aa757f2c3ec2340f7469ea91/src%2Ftest%2Fui%2Fborrowck%2Freturn-local-binding-from-desugaring.polonius.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fborrowck%2Freturn-local-binding-from-desugaring.polonius.stderr?ref=08351004125c4d49aa757f2c3ec2340f7469ea91", "patch": "@@ -0,0 +1,16 @@\n+error[E0716]: temporary value dropped while borrowed\n+  --> $DIR/return-local-binding-from-desugaring.rs:26:18\n+   |\n+LL |     for ref x in xs {\n+   |                  ^^ creates a temporary which is freed while still in use\n+...\n+LL |     }\n+   |     - temporary value is freed at the end of this statement\n+LL |     result\n+   |     ------ borrow later used here\n+   |\n+   = note: consider using a `let` binding to create a longer lived value\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0716`."}, {"sha": "5e93a0234259c154435e3cffd30e060a233403ce", "filename": "src/test/ui/dropck/dropck_trait_cycle_checked.polonius.stderr", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/08351004125c4d49aa757f2c3ec2340f7469ea91/src%2Ftest%2Fui%2Fdropck%2Fdropck_trait_cycle_checked.polonius.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/08351004125c4d49aa757f2c3ec2340f7469ea91/src%2Ftest%2Fui%2Fdropck%2Fdropck_trait_cycle_checked.polonius.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdropck%2Fdropck_trait_cycle_checked.polonius.stderr?ref=08351004125c4d49aa757f2c3ec2340f7469ea91", "patch": "@@ -8,7 +8,9 @@ LL | }\n    | -\n    | |\n    | `o2` dropped here while still borrowed\n-   | borrow might be used here, when `o2` is dropped and runs the destructor for type `std::boxed::Box<dyn Obj<'_>>`\n+   | borrow might be used here, when `o1` is dropped and runs the destructor for type `std::boxed::Box<dyn Obj<'_>>`\n+   |\n+   = note: values in a scope are dropped in the opposite order they are defined\n \n error[E0597]: `o3` does not live long enough\n   --> $DIR/dropck_trait_cycle_checked.rs:112:13\n@@ -20,7 +22,9 @@ LL | }\n    | -\n    | |\n    | `o3` dropped here while still borrowed\n-   | borrow might be used here, when `o3` is dropped and runs the destructor for type `std::boxed::Box<dyn Obj<'_>>`\n+   | borrow might be used here, when `o1` is dropped and runs the destructor for type `std::boxed::Box<dyn Obj<'_>>`\n+   |\n+   = note: values in a scope are dropped in the opposite order they are defined\n \n error[E0597]: `o2` does not live long enough\n   --> $DIR/dropck_trait_cycle_checked.rs:113:13\n@@ -38,7 +42,7 @@ error[E0597]: `o3` does not live long enough\n   --> $DIR/dropck_trait_cycle_checked.rs:114:13\n    |\n LL |     let (o1, o2, o3): (Box<dyn Obj>, Box<dyn Obj>, Box<dyn Obj>) = (O::new(), O::new(), O::new());\n-   |                                                                                         -------- cast requires that `o3` is borrowed for `'static`\n+   |                                                                               -------- cast requires that `o3` is borrowed for `'static`\n ...\n LL |     o2.set1(&o3);\n    |             ^^^ borrowed value does not live long enough\n@@ -62,7 +66,7 @@ error[E0597]: `o2` does not live long enough\n   --> $DIR/dropck_trait_cycle_checked.rs:116:13\n    |\n LL |     let (o1, o2, o3): (Box<dyn Obj>, Box<dyn Obj>, Box<dyn Obj>) = (O::new(), O::new(), O::new());\n-   |                                                                               -------- cast requires that `o2` is borrowed for `'static`\n+   |                                                                                         -------- cast requires that `o2` is borrowed for `'static`\n ...\n LL |     o3.set1(&o2);\n    |             ^^^ borrowed value does not live long enough"}, {"sha": "0e4d442f299c3c418882653062ccb64fc857b44a", "filename": "src/test/ui/json-multiple.polonius.stderr", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/08351004125c4d49aa757f2c3ec2340f7469ea91/src%2Ftest%2Fui%2Fjson-multiple.polonius.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/08351004125c4d49aa757f2c3ec2340f7469ea91/src%2Ftest%2Fui%2Fjson-multiple.polonius.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fjson-multiple.polonius.stderr?ref=08351004125c4d49aa757f2c3ec2340f7469ea91", "patch": "@@ -0,0 +1 @@\n+{\"artifact\":\"$TEST_BUILD_DIR/json-multiple.polonius/libjson_multiple.rlib\",\"emit\":\"link\"}"}, {"sha": "e21f6f85d162d1a5d6c8ddf92ecc2597b815834b", "filename": "src/test/ui/json-options.polonius.stderr", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/08351004125c4d49aa757f2c3ec2340f7469ea91/src%2Ftest%2Fui%2Fjson-options.polonius.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/08351004125c4d49aa757f2c3ec2340f7469ea91/src%2Ftest%2Fui%2Fjson-options.polonius.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fjson-options.polonius.stderr?ref=08351004125c4d49aa757f2c3ec2340f7469ea91", "patch": "@@ -0,0 +1 @@\n+{\"artifact\":\"$TEST_BUILD_DIR/json-options.polonius/libjson_options.rlib\",\"emit\":\"link\"}"}]}