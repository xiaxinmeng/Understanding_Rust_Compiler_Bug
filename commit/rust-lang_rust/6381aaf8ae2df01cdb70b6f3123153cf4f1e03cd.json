{"sha": "6381aaf8ae2df01cdb70b6f3123153cf4f1e03cd", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYzODFhYWY4YWUyZGYwMWNkYjcwYjZmMzEyMzE1M2NmNGYxZTAzY2Q=", "commit": {"author": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2021-05-13T11:03:59Z"}, "committer": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2021-05-13T11:03:59Z"}, "message": "Use DefaultMetadataLoader in the hotplug_codegen_backend test", "tree": {"sha": "a126a50f39dc74067ef7ddc0bf1bfa453c327b79", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a126a50f39dc74067ef7ddc0bf1bfa453c327b79"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6381aaf8ae2df01cdb70b6f3123153cf4f1e03cd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6381aaf8ae2df01cdb70b6f3123153cf4f1e03cd", "html_url": "https://github.com/rust-lang/rust/commit/6381aaf8ae2df01cdb70b6f3123153cf4f1e03cd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6381aaf8ae2df01cdb70b6f3123153cf4f1e03cd/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "537e814d9c22d69868272cd472bf30164700c402", "url": "https://api.github.com/repos/rust-lang/rust/commits/537e814d9c22d69868272cd472bf30164700c402", "html_url": "https://github.com/rust-lang/rust/commit/537e814d9c22d69868272cd472bf30164700c402"}], "stats": {"total": 14, "additions": 1, "deletions": 13}, "files": [{"sha": "fce1835c4b2e8db64c94062315bd88f1b6f557d9", "filename": "src/test/run-make-fulldeps/hotplug_codegen_backend/the_backend.rs", "status": "modified", "additions": 1, "deletions": 13, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/6381aaf8ae2df01cdb70b6f3123153cf4f1e03cd/src%2Ftest%2Frun-make-fulldeps%2Fhotplug_codegen_backend%2Fthe_backend.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6381aaf8ae2df01cdb70b6f3123153cf4f1e03cd/src%2Ftest%2Frun-make-fulldeps%2Fhotplug_codegen_backend%2Fthe_backend.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Fhotplug_codegen_backend%2Fthe_backend.rs?ref=6381aaf8ae2df01cdb70b6f3123153cf4f1e03cd", "patch": "@@ -28,23 +28,11 @@ use rustc_target::spec::Target;\n use std::any::Any;\n use std::path::Path;\n \n-pub struct NoLlvmMetadataLoader;\n-\n-impl MetadataLoader for NoLlvmMetadataLoader {\n-    fn get_rlib_metadata(&self, _: &Target, filename: &Path) -> Result<MetadataRef, String> {\n-        unreachable!(\"some_crate.rs shouldn't depend on any external crates\");\n-    }\n-\n-    fn get_dylib_metadata(&self, target: &Target, filename: &Path) -> Result<MetadataRef, String> {\n-        unreachable!(\"some_crate.rs shouldn't depend on any external crates\");\n-    }\n-}\n-\n struct TheBackend;\n \n impl CodegenBackend for TheBackend {\n     fn metadata_loader(&self) -> Box<MetadataLoaderDyn> {\n-        Box::new(NoLlvmMetadataLoader)\n+        Box::new(rustc_codegen_ssa::back::metadata::DefaultMetadataLoader)\n     }\n \n     fn provide(&self, providers: &mut Providers) {}"}]}