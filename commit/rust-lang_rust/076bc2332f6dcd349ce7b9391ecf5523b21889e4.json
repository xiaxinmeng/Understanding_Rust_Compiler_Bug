{"sha": "076bc2332f6dcd349ce7b9391ecf5523b21889e4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA3NmJjMjMzMmY2ZGNkMzQ5Y2U3YjkzOTFlY2Y1NTIzYjIxODg5ZTQ=", "commit": {"author": {"name": "Nick Cameron", "email": "nrc@ncameron.org", "date": "2017-11-30T23:17:10Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-11-30T23:17:10Z"}, "message": "Merge pull request #2213 from topecongiro/issue-2212\n\nFormat defualtness on specialized impl const", "tree": {"sha": "d1f957e23edfd2f13a2e815d07f402b654323fe8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d1f957e23edfd2f13a2e815d07f402b654323fe8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/076bc2332f6dcd349ce7b9391ecf5523b21889e4", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJaIJF2CRBK7hj4Ov3rIwAAdHIIADnx2F6pT+X55MDNXGNUAoyO\nRIFC5AOOoDMsWXAQ3B/xDWT80dd0m/D7F7taZjhsvoCcDiVK8e08Ry59CIv6rsfp\nT2fivPoWj9TXVgA+YJXwZXo/hyI+bE0YwhPpOJOMdnijlOu6+JKxqyAEdYofr9R8\ngnHrLUQWNyi59mH1wdJxFq+prFOLwbEOOUHHaOhT8qAy0AzXhKbK1vXC3tPEBjl/\nsk2miFDisk4GqvsVFHqevJ7W099hFoJU7qJkK25//ykyG5I2qHCJsgwP1hS3yIza\nIH9Rd08tR2h2d1U0WtTerIF8vzYThEpf+v0o37YQygxyddqBuFLj8eMf5UJR6w0=\n=MnKI\n-----END PGP SIGNATURE-----\n", "payload": "tree d1f957e23edfd2f13a2e815d07f402b654323fe8\nparent c18ba569dff9cdae970c49a7d63acefa2f209bda\nparent 3b36371b7885b06b141bd4a979ba068958e0471d\nauthor Nick Cameron <nrc@ncameron.org> 1512083830 +1300\ncommitter GitHub <noreply@github.com> 1512083830 +1300\n\nMerge pull request #2213 from topecongiro/issue-2212\n\nFormat defualtness on specialized impl const "}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/076bc2332f6dcd349ce7b9391ecf5523b21889e4", "html_url": "https://github.com/rust-lang/rust/commit/076bc2332f6dcd349ce7b9391ecf5523b21889e4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/076bc2332f6dcd349ce7b9391ecf5523b21889e4/comments", "author": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c18ba569dff9cdae970c49a7d63acefa2f209bda", "url": "https://api.github.com/repos/rust-lang/rust/commits/c18ba569dff9cdae970c49a7d63acefa2f209bda", "html_url": "https://github.com/rust-lang/rust/commit/c18ba569dff9cdae970c49a7d63acefa2f209bda"}, {"sha": "3b36371b7885b06b141bd4a979ba068958e0471d", "url": "https://api.github.com/repos/rust-lang/rust/commits/3b36371b7885b06b141bd4a979ba068958e0471d", "html_url": "https://github.com/rust-lang/rust/commit/3b36371b7885b06b141bd4a979ba068958e0471d"}], "stats": {"total": 12, "additions": 11, "deletions": 1}, "files": [{"sha": "ce0439b127b32cfd9a34243084c6461faa7914ae", "filename": "src/items.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/076bc2332f6dcd349ce7b9391ecf5523b21889e4/src%2Fitems.rs", "raw_url": "https://github.com/rust-lang/rust/raw/076bc2332f6dcd349ce7b9391ecf5523b21889e4/src%2Fitems.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fitems.rs?ref=076bc2332f6dcd349ce7b9391ecf5523b21889e4", "patch": "@@ -1496,6 +1496,7 @@ pub struct StaticParts<'a> {\n     ty: &'a ast::Ty,\n     mutability: ast::Mutability,\n     expr_opt: Option<&'a ptr::P<ast::Expr>>,\n+    defaultness: Option<ast::Defaultness>,\n     span: Span,\n }\n \n@@ -1515,6 +1516,7 @@ impl<'a> StaticParts<'a> {\n             ty: ty,\n             mutability: mutability,\n             expr_opt: Some(expr),\n+            defaultness: None,\n             span: item.span,\n         }\n     }\n@@ -1531,6 +1533,7 @@ impl<'a> StaticParts<'a> {\n             ty: ty,\n             mutability: ast::Mutability::Immutable,\n             expr_opt: expr_opt.as_ref(),\n+            defaultness: None,\n             span: ti.span,\n         }\n     }\n@@ -1547,6 +1550,7 @@ impl<'a> StaticParts<'a> {\n             ty: ty,\n             mutability: ast::Mutability::Immutable,\n             expr_opt: Some(expr),\n+            defaultness: Some(ii.defaultness),\n             span: ii.span,\n         }\n     }\n@@ -1562,8 +1566,9 @@ fn rewrite_static(\n         context.config.space_after_colon(),\n     );\n     let prefix = format!(\n-        \"{}{} {}{}{}\",\n+        \"{}{}{} {}{}{}\",\n         format_visibility(static_parts.vis),\n+        static_parts.defaultness.map_or(\"\", format_defaultness),\n         static_parts.prefix,\n         format_mutability(static_parts.mutability),\n         static_parts.ident,"}, {"sha": "99922d406f441b9515ab5cb272808a673c5342be", "filename": "tests/target/impl.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/076bc2332f6dcd349ce7b9391ecf5523b21889e4/tests%2Ftarget%2Fimpl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/076bc2332f6dcd349ce7b9391ecf5523b21889e4/tests%2Ftarget%2Fimpl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fimpl.rs?ref=076bc2332f6dcd349ce7b9391ecf5523b21889e4", "patch": "@@ -36,3 +36,8 @@ where\n default impl Trait for X {}\n default unsafe impl Trait for Y {}\n pub default unsafe impl Trait for Z {}\n+\n+// #2212\n+impl ConstWithDefault {\n+    default const CAN_RECONSTRUCT_QUERY_KEY: bool = false;\n+}"}]}