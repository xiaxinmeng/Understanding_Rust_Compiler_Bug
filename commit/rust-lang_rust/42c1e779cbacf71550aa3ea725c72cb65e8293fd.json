{"sha": "42c1e779cbacf71550aa3ea725c72cb65e8293fd", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQyYzFlNzc5Y2JhY2Y3MTU1MGFhM2VhNzI1YzcyY2I2NWU4MjkzZmQ=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-10-15T08:22:26Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-10-15T08:22:26Z"}, "message": "Auto merge of #980 - JOE1994:master, r=RalfJung\n\nchange cargo-miri.rs to fix issue #978\n\nIn Windows 10, there was an issue with building MIRI locally and getting it running,\ndue to unpredictable backslash escaping issues in paths.\nI added a code snippet that would only be compiled in Windows OS, which replaces all backslashes in paths to slashes.\nThis fix should only affect Windows users.\nBuilding and testing MIRI locally now works fine after the fix.\n![miri_result_after_fix0](https://user-images.githubusercontent.com/10286488/66260998-344abc80-e794-11e9-9d7c-b4ef098443de.PNG)\n\nFixes https://github.com/rust-lang/miri/issues/978", "tree": {"sha": "be131c190acbc860925487f265234a5eccf9c4c5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/be131c190acbc860925487f265234a5eccf9c4c5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/42c1e779cbacf71550aa3ea725c72cb65e8293fd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/42c1e779cbacf71550aa3ea725c72cb65e8293fd", "html_url": "https://github.com/rust-lang/rust/commit/42c1e779cbacf71550aa3ea725c72cb65e8293fd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/42c1e779cbacf71550aa3ea725c72cb65e8293fd/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d902a1157571cc9c34fff14f927b805bb18f6a53", "url": "https://api.github.com/repos/rust-lang/rust/commits/d902a1157571cc9c34fff14f927b805bb18f6a53", "html_url": "https://github.com/rust-lang/rust/commit/d902a1157571cc9c34fff14f927b805bb18f6a53"}, {"sha": "65fd00665ee246a029c9b220781098277319cd6a", "url": "https://api.github.com/repos/rust-lang/rust/commits/65fd00665ee246a029c9b220781098277319cd6a", "html_url": "https://github.com/rust-lang/rust/commit/65fd00665ee246a029c9b220781098277319cd6a"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "14f381a45546fcb1067f94d68ea8b1d232546c06", "filename": "src/bin/cargo-miri.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/42c1e779cbacf71550aa3ea725c72cb65e8293fd/src%2Fbin%2Fcargo-miri.rs", "raw_url": "https://github.com/rust-lang/rust/raw/42c1e779cbacf71550aa3ea725c72cb65e8293fd/src%2Fbin%2Fcargo-miri.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbin%2Fcargo-miri.rs?ref=42c1e779cbacf71550aa3ea725c72cb65e8293fd", "patch": "@@ -340,7 +340,7 @@ path = \"lib.rs\"\n     let sysroot = if is_host { dir.join(\"HOST\") } else { PathBuf::from(dir) };\n     std::env::set_var(\"MIRI_SYSROOT\", &sysroot); // pass the env var to the processes we spawn, which will turn it into \"--sysroot\" flags\n     if print_env {\n-        println!(\"MIRI_SYSROOT={}\", sysroot.display());\n+        println!(\"MIRI_SYSROOT='{}'\", sysroot.display().to_string().replace('\\'', r#\"'\"'\"'\"#));\n     } else if !ask_user {\n         println!(\"A libstd for Miri is now available in `{}`.\", sysroot.display());\n     }"}]}