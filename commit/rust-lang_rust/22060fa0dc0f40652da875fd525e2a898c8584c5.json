{"sha": "22060fa0dc0f40652da875fd525e2a898c8584c5", "node_id": "MDY6Q29tbWl0NzI0NzEyOjIyMDYwZmEwZGMwZjQwNjUyZGE4NzVmZDUyNWUyYTg5OGM4NTg0YzU=", "commit": {"author": {"name": "Hameer Abbasi", "email": "einstein.edison@gmail.com", "date": "2020-10-28T12:51:15Z"}, "committer": {"name": "Hameer Abbasi", "email": "einstein.edison@gmail.com", "date": "2020-10-28T12:51:15Z"}, "message": "Assert in every case.", "tree": {"sha": "a28f5ab1622c6b1f74d0108358cab8cb3ed8139a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a28f5ab1622c6b1f74d0108358cab8cb3ed8139a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/22060fa0dc0f40652da875fd525e2a898c8584c5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/22060fa0dc0f40652da875fd525e2a898c8584c5", "html_url": "https://github.com/rust-lang/rust/commit/22060fa0dc0f40652da875fd525e2a898c8584c5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/22060fa0dc0f40652da875fd525e2a898c8584c5/comments", "author": {"login": "hameerabbasi", "id": 2190658, "node_id": "MDQ6VXNlcjIxOTA2NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/2190658?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hameerabbasi", "html_url": "https://github.com/hameerabbasi", "followers_url": "https://api.github.com/users/hameerabbasi/followers", "following_url": "https://api.github.com/users/hameerabbasi/following{/other_user}", "gists_url": "https://api.github.com/users/hameerabbasi/gists{/gist_id}", "starred_url": "https://api.github.com/users/hameerabbasi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hameerabbasi/subscriptions", "organizations_url": "https://api.github.com/users/hameerabbasi/orgs", "repos_url": "https://api.github.com/users/hameerabbasi/repos", "events_url": "https://api.github.com/users/hameerabbasi/events{/privacy}", "received_events_url": "https://api.github.com/users/hameerabbasi/received_events", "type": "User", "site_admin": false}, "committer": {"login": "hameerabbasi", "id": 2190658, "node_id": "MDQ6VXNlcjIxOTA2NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/2190658?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hameerabbasi", "html_url": "https://github.com/hameerabbasi", "followers_url": "https://api.github.com/users/hameerabbasi/followers", "following_url": "https://api.github.com/users/hameerabbasi/following{/other_user}", "gists_url": "https://api.github.com/users/hameerabbasi/gists{/gist_id}", "starred_url": "https://api.github.com/users/hameerabbasi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hameerabbasi/subscriptions", "organizations_url": "https://api.github.com/users/hameerabbasi/orgs", "repos_url": "https://api.github.com/users/hameerabbasi/repos", "events_url": "https://api.github.com/users/hameerabbasi/events{/privacy}", "received_events_url": "https://api.github.com/users/hameerabbasi/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fab79c27ef184ee3620681bfbdc1fd89ad10b4df", "url": "https://api.github.com/repos/rust-lang/rust/commits/fab79c27ef184ee3620681bfbdc1fd89ad10b4df", "html_url": "https://github.com/rust-lang/rust/commit/fab79c27ef184ee3620681bfbdc1fd89ad10b4df"}], "stats": {"total": 41, "additions": 22, "deletions": 19}, "files": [{"sha": "0295255d8099cd63b70b210be853f637fe0c18cd", "filename": "src/test/ui/const-generics/dyn-supertraits.rs", "status": "modified", "additions": 22, "deletions": 19, "changes": 41, "blob_url": "https://github.com/rust-lang/rust/blob/22060fa0dc0f40652da875fd525e2a898c8584c5/src%2Ftest%2Fui%2Fconst-generics%2Fdyn-supertraits.rs", "raw_url": "https://github.com/rust-lang/rust/raw/22060fa0dc0f40652da875fd525e2a898c8584c5/src%2Ftest%2Fui%2Fconst-generics%2Fdyn-supertraits.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fdyn-supertraits.rs?ref=22060fa0dc0f40652da875fd525e2a898c8584c5", "patch": "@@ -49,34 +49,37 @@ impl<const N: usize> Foo<N> for BokType<N> {\n }\n impl<const N: usize> Bok<N> for BokType<N> {}\n \n-fn a<const N: usize>(_: &dyn Foo<N>) {}\n-fn b(_: &dyn Foo<3>) {}\n-fn c<T: Bok<N>, const N: usize>(x: T) { a::<N>(&x); }\n-fn d<T: ?Sized + Foo<3>>(_: &T) {}\n-fn e(x: &dyn Bar<3>) { d(x); }\n-\n-fn get_myfun<const N: usize>(x: &dyn Foo<N>) -> usize { x.myfun() }\n+fn a<const N: usize>(x: &dyn Foo<N>) -> usize { x.myfun() }\n+fn b(x: &dyn Foo<3>) -> usize { x.myfun() }\n+fn c<T: Bok<N>, const N: usize>(x: T) -> usize { a::<N>(&x) }\n+fn d<T: ?Sized + Foo<3>>(x: &T) -> usize { x.myfun() }\n+fn e(x: &dyn Bar<3>) -> usize { d(x) }\n \n fn main() {\n     let foo = FooType::<3> {};\n-    a(&foo); b(&foo); d(&foo);\n-    assert!(get_myfun(&foo) == 3);\n+    assert!(a(&foo) == 3);\n+    assert!(b(&foo) == 3);\n+    assert!(d(&foo) == 3);\n \n     let bar = BarType::<3> {};\n-    a(&bar); b(&bar); d(&bar); e(&bar);\n-    assert!(get_myfun(&bar) == 4);\n+    assert!(a(&bar) == 4);\n+    assert!(b(&bar) == 4);\n+    assert!(d(&bar) == 4);\n+    assert!(e(&bar) == 4);\n \n     let baz = BazType {};\n-    a(&baz); b(&baz); d(&baz);\n-    assert!(get_myfun(&baz) == 999);\n+    assert!(a(&baz) == 999);\n+    assert!(b(&baz) == 999);\n+    assert!(d(&baz) == 999);\n \n     let boz = BozType {};\n-    a(&boz); b(&boz); d(&boz);\n-    assert!(get_myfun(&boz) == 9999);\n+    assert!(a(&boz) == 9999);\n+    assert!(b(&boz) == 9999);\n+    assert!(d(&boz) == 9999);\n \n     let bok = BokType::<3> {};\n-    a(&bok); b(&bok); d(&bok);\n-    assert!(get_myfun(&bok) == 5);\n-    \n-    c(BokType::<3> {});\n+    assert!(a(&bok) == 5);\n+    assert!(b(&bok) == 5);\n+    assert!(d(&bok) == 5);\n+    assert!(c(BokType::<3> {}) == 5);\n }"}]}