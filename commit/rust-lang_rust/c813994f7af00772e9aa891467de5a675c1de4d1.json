{"sha": "c813994f7af00772e9aa891467de5a675c1de4d1", "node_id": "C_kwDOAAsO6NoAKGM4MTM5OTRmN2FmMDA3NzJlOWFhODkxNDY3ZGU1YTY3NWMxZGU0ZDE", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2023-02-27T05:11:54Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-02-27T05:11:54Z"}, "message": "Rollup merge of #108494 - GuillaumeGomez:cleanup-js, r=notriddle\n\nClean up JS files code a bit\n\nI mostly moved values closer to where they are used to make the code reading easier.\n\nr? ```@notriddle```", "tree": {"sha": "23ebdd27d4f5792d94d033c97d5477aa47815578", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/23ebdd27d4f5792d94d033c97d5477aa47815578"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c813994f7af00772e9aa891467de5a675c1de4d1", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJj/DuaCRBK7hj4Ov3rIwAAELMIACzeoI8n60Y3zkO0aLORNG7Y\nacx+Hiu6Sfe3ulTWt1OHimkmoGK04XanSRvWXltCOkwUs2jOXzfRBSNxtIhmXd5/\ncfvs0tI+AzDRtj64la5Xp58B63L00rZW1sCnql7mMoKWr9gMDf3hKJu+TDJdOWp7\n9ljghj89srwjtUQJ60FO3nZWI8O5nVnAtdkHZhPmkAyMcuJ+4JCt0fsqY9kM0DNX\n99+H+p9+xbCmho7jmlDXBRrm800XSvlmGjR94wmJrYYdb4Fqha8UrPOscrrJqYdX\nVKhoma5+HuvbiV7vbo4OWv//Jnd9HrmgLtaxMUvP+wWFX7t13TredkR9XKpt6cs=\n=zfk0\n-----END PGP SIGNATURE-----\n", "payload": "tree 23ebdd27d4f5792d94d033c97d5477aa47815578\nparent abc82484d4cf03900eca5a28115cc3b733a604eb\nparent 27db6882038b67d83b8aecf108b18dd350f7e7cc\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1677474714 +0100\ncommitter GitHub <noreply@github.com> 1677474714 +0100\n\nRollup merge of #108494 - GuillaumeGomez:cleanup-js, r=notriddle\n\nClean up JS files code a bit\n\nI mostly moved values closer to where they are used to make the code reading easier.\n\nr? ```@notriddle```\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c813994f7af00772e9aa891467de5a675c1de4d1", "html_url": "https://github.com/rust-lang/rust/commit/c813994f7af00772e9aa891467de5a675c1de4d1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c813994f7af00772e9aa891467de5a675c1de4d1/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "abc82484d4cf03900eca5a28115cc3b733a604eb", "url": "https://api.github.com/repos/rust-lang/rust/commits/abc82484d4cf03900eca5a28115cc3b733a604eb", "html_url": "https://github.com/rust-lang/rust/commit/abc82484d4cf03900eca5a28115cc3b733a604eb"}, {"sha": "27db6882038b67d83b8aecf108b18dd350f7e7cc", "url": "https://api.github.com/repos/rust-lang/rust/commits/27db6882038b67d83b8aecf108b18dd350f7e7cc", "html_url": "https://github.com/rust-lang/rust/commit/27db6882038b67d83b8aecf108b18dd350f7e7cc"}], "stats": {"total": 20, "additions": 7, "deletions": 13}, "files": [{"sha": "b3fc889431b38ed5fc4f791574697519551f2e81", "filename": "src/librustdoc/html/static/js/search.js", "status": "modified", "additions": 6, "deletions": 11, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/c813994f7af00772e9aa891467de5a675c1de4d1/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsearch.js", "raw_url": "https://github.com/rust-lang/rust/raw/c813994f7af00772e9aa891467de5a675c1de4d1/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsearch.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsearch.js?ref=c813994f7af00772e9aa891467de5a675c1de4d1", "patch": "@@ -463,11 +463,10 @@ function initSearch(rawSearchIndex) {\n      * @param {ParserState} parserState\n      */\n     function parseInput(query, parserState) {\n-        let c, before;\n         let foundStopChar = true;\n \n         while (parserState.pos < parserState.length) {\n-            c = parserState.userQuery[parserState.pos];\n+            const c = parserState.userQuery[parserState.pos];\n             if (isStopCharacter(c)) {\n                 foundStopChar = true;\n                 if (isSeparatorCharacter(c)) {\n@@ -506,7 +505,7 @@ function initSearch(rawSearchIndex) {\n                 }\n                 throw new Error(`Expected \\`,\\`, \\` \\`, \\`:\\` or \\`->\\`, found \\`${c}\\``);\n             }\n-            before = query.elems.length;\n+            const before = query.elems.length;\n             getNextElem(query, parserState, query.elems, false);\n             if (query.elems.length === before) {\n                 // Nothing was added, weird... Let's increase the position to not remain stuck.\n@@ -515,7 +514,6 @@ function initSearch(rawSearchIndex) {\n             foundStopChar = false;\n         }\n         while (parserState.pos < parserState.length) {\n-            c = parserState.userQuery[parserState.pos];\n             if (isReturnArrow(parserState)) {\n                 parserState.pos += 2;\n                 // Get returned elements.\n@@ -1940,7 +1938,6 @@ function initSearch(rawSearchIndex) {\n          */\n         const searchWords = [];\n         const charA = \"A\".charCodeAt(0);\n-        let i, word;\n         let currentIndex = 0;\n         let id = 0;\n \n@@ -2035,7 +2032,7 @@ function initSearch(rawSearchIndex) {\n             // convert `rawPaths` entries into object form\n             // generate normalizedPaths for function search mode\n             let len = paths.length;\n-            for (i = 0; i < len; ++i) {\n+            for (let i = 0; i < len; ++i) {\n                 lowercasePaths.push({ty: paths[i][0], name: paths[i][1].toLowerCase()});\n                 paths[i] = {ty: paths[i][0], name: paths[i][1]};\n             }\n@@ -2049,16 +2046,14 @@ function initSearch(rawSearchIndex) {\n             // faster analysis operations\n             len = itemTypes.length;\n             let lastPath = \"\";\n-            for (i = 0; i < len; ++i) {\n+            for (let i = 0; i < len; ++i) {\n+                let word = \"\";\n                 // This object should have exactly the same set of fields as the \"crateRow\"\n                 // object defined above.\n                 if (typeof itemNames[i] === \"string\") {\n                     word = itemNames[i].toLowerCase();\n-                    searchWords.push(word);\n-                } else {\n-                    word = \"\";\n-                    searchWords.push(\"\");\n                 }\n+                searchWords.push(word);\n                 const row = {\n                     crate: crate,\n                     ty: itemTypes.charCodeAt(i) - charA,"}, {"sha": "6c0f03b5bb07217267dfb0f8cd699c4145a12ef6", "filename": "src/librustdoc/html/static/js/source-script.js", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c813994f7af00772e9aa891467de5a675c1de4d1/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsource-script.js", "raw_url": "https://github.com/rust-lang/rust/raw/c813994f7af00772e9aa891467de5a675c1de4d1/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsource-script.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsource-script.js?ref=c813994f7af00772e9aa891467de5a675c1de4d1", "patch": "@@ -117,8 +117,7 @@ function createSourceSidebar() {\n     sidebar.appendChild(title);\n     Object.keys(sourcesIndex).forEach(key => {\n         sourcesIndex[key][NAME_OFFSET] = key;\n-        hasFoundFile = createDirEntry(sourcesIndex[key], sidebar, \"\",\n-            hasFoundFile);\n+        hasFoundFile = createDirEntry(sourcesIndex[key], sidebar, \"\", hasFoundFile);\n     });\n \n     container.appendChild(sidebar);"}]}