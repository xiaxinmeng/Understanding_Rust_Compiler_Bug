{"sha": "94bbb2418aa5201ddf2d5faf01f349896303cb82", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk0YmJiMjQxOGFhNTIwMWRkZjJkNWZhZjAxZjM0OTg5NjMwM2NiODI=", "commit": {"author": {"name": "Florian Diebold", "email": "flodiebold@gmail.com", "date": "2019-01-26T22:57:03Z"}, "committer": {"name": "Florian Diebold", "email": "flodiebold@gmail.com", "date": "2019-01-26T22:59:11Z"}, "message": "Add marks", "tree": {"sha": "7a90002872ed3a2ea6d6df369519053e277d1a1f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7a90002872ed3a2ea6d6df369519053e277d1a1f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/94bbb2418aa5201ddf2d5faf01f349896303cb82", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/94bbb2418aa5201ddf2d5faf01f349896303cb82", "html_url": "https://github.com/rust-lang/rust/commit/94bbb2418aa5201ddf2d5faf01f349896303cb82", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/94bbb2418aa5201ddf2d5faf01f349896303cb82/comments", "author": {"login": "flodiebold", "id": 906069, "node_id": "MDQ6VXNlcjkwNjA2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/906069?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flodiebold", "html_url": "https://github.com/flodiebold", "followers_url": "https://api.github.com/users/flodiebold/followers", "following_url": "https://api.github.com/users/flodiebold/following{/other_user}", "gists_url": "https://api.github.com/users/flodiebold/gists{/gist_id}", "starred_url": "https://api.github.com/users/flodiebold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flodiebold/subscriptions", "organizations_url": "https://api.github.com/users/flodiebold/orgs", "repos_url": "https://api.github.com/users/flodiebold/repos", "events_url": "https://api.github.com/users/flodiebold/events{/privacy}", "received_events_url": "https://api.github.com/users/flodiebold/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flodiebold", "id": 906069, "node_id": "MDQ6VXNlcjkwNjA2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/906069?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flodiebold", "html_url": "https://github.com/flodiebold", "followers_url": "https://api.github.com/users/flodiebold/followers", "following_url": "https://api.github.com/users/flodiebold/following{/other_user}", "gists_url": "https://api.github.com/users/flodiebold/gists{/gist_id}", "starred_url": "https://api.github.com/users/flodiebold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flodiebold/subscriptions", "organizations_url": "https://api.github.com/users/flodiebold/orgs", "repos_url": "https://api.github.com/users/flodiebold/repos", "events_url": "https://api.github.com/users/flodiebold/events{/privacy}", "received_events_url": "https://api.github.com/users/flodiebold/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "77f92674f9a2ea8e8cd303d15710621a4f7839cb", "url": "https://api.github.com/repos/rust-lang/rust/commits/77f92674f9a2ea8e8cd303d15710621a4f7839cb", "html_url": "https://github.com/rust-lang/rust/commit/77f92674f9a2ea8e8cd303d15710621a4f7839cb"}], "stats": {"total": 11, "additions": 11, "deletions": 0}, "files": [{"sha": "d704c3adb8a7163f97d0b4192fc5cebfccc0c73c", "filename": "crates/ra_hir/src/marks.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/94bbb2418aa5201ddf2d5faf01f349896303cb82/crates%2Fra_hir%2Fsrc%2Fmarks.rs", "raw_url": "https://github.com/rust-lang/rust/raw/94bbb2418aa5201ddf2d5faf01f349896303cb82/crates%2Fra_hir%2Fsrc%2Fmarks.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fmarks.rs?ref=94bbb2418aa5201ddf2d5faf01f349896303cb82", "patch": "@@ -1,4 +1,6 @@\n test_utils::marks!(\n     name_res_works_for_broken_modules\n     item_map_enum_importing\n+    type_var_cycles_resolve_completely\n+    type_var_cycles_resolve_as_possible\n );"}, {"sha": "31ea4570627d57821908abbacceb253695019367", "filename": "crates/ra_hir/src/ty.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/94bbb2418aa5201ddf2d5faf01f349896303cb82/crates%2Fra_hir%2Fsrc%2Fty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/94bbb2418aa5201ddf2d5faf01f349896303cb82/crates%2Fra_hir%2Fsrc%2Fty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty.rs?ref=94bbb2418aa5201ddf2d5faf01f349896303cb82", "patch": "@@ -29,6 +29,8 @@ use ra_arena::map::ArenaMap;\n use join_to_string::join;\n use rustc_hash::FxHashMap;\n \n+use test_utils::tested_by;\n+\n use crate::{\n     Module, Function, Struct, StructField, Enum, EnumVariant, Path, Name, ImplBlock,\n     FnSignature, FnScopes, ModuleDef, AdtDef,\n@@ -1020,6 +1022,7 @@ impl<'a, D: HirDatabase> InferenceContext<'a, D> {\n             Ty::Infer(tv) => {\n                 let inner = tv.to_inner();\n                 if tv_stack.contains(&inner) {\n+                    tested_by!(type_var_cycles_resolve_as_possible);\n                     // recursive type\n                     return tv.fallback_value();\n                 }\n@@ -1062,6 +1065,7 @@ impl<'a, D: HirDatabase> InferenceContext<'a, D> {\n             Ty::Infer(tv) => {\n                 let inner = tv.to_inner();\n                 if tv_stack.contains(&inner) {\n+                    tested_by!(type_var_cycles_resolve_completely);\n                     // recursive type\n                     return tv.fallback_value();\n                 }"}, {"sha": "f74d6f5ea375126d52487097b3ea75c3153dce8a", "filename": "crates/ra_hir/src/ty/tests.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/94bbb2418aa5201ddf2d5faf01f349896303cb82/crates%2Fra_hir%2Fsrc%2Fty%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/94bbb2418aa5201ddf2d5faf01f349896303cb82/crates%2Fra_hir%2Fsrc%2Fty%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Ftests.rs?ref=94bbb2418aa5201ddf2d5faf01f349896303cb82", "patch": "@@ -3,6 +3,7 @@ use std::fmt::Write;\n \n use ra_db::{SourceDatabase, salsa::Database};\n use ra_syntax::ast::{self, AstNode};\n+use test_utils::covers;\n \n use crate::{\n     source_binder,\n@@ -564,6 +565,8 @@ fn quux() {\n \n #[test]\n fn recursive_vars() {\n+    covers!(type_var_cycles_resolve_completely);\n+    covers!(type_var_cycles_resolve_as_possible);\n     check_inference(\n         \"recursive_vars\",\n         r#\"\n@@ -577,6 +580,8 @@ fn test() {\n \n #[test]\n fn recursive_vars_2() {\n+    covers!(type_var_cycles_resolve_completely);\n+    covers!(type_var_cycles_resolve_as_possible);\n     check_inference(\n         \"recursive_vars_2\",\n         r#\""}]}