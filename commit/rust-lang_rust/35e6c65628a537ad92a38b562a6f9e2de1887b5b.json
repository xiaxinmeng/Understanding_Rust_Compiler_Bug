{"sha": "35e6c65628a537ad92a38b562a6f9e2de1887b5b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM1ZTZjNjU2MjhhNTM3YWQ5MmEzOGI1NjJhNmY5ZTJkZTE4ODdiNWI=", "commit": {"author": {"name": "Havvy (Ryan Scheel)", "email": "ryan.havvy@gmail.com", "date": "2018-10-04T11:55:47Z"}, "committer": {"name": "Havvy (Ryan Scheel)", "email": "ryan.havvy@gmail.com", "date": "2018-10-07T09:08:24Z"}, "message": "cfg_attr_multi: Feature gate", "tree": {"sha": "6ed810ae66c532fd72490e98594fb39c09f2445a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6ed810ae66c532fd72490e98594fb39c09f2445a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/35e6c65628a537ad92a38b562a6f9e2de1887b5b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/35e6c65628a537ad92a38b562a6f9e2de1887b5b", "html_url": "https://github.com/rust-lang/rust/commit/35e6c65628a537ad92a38b562a6f9e2de1887b5b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/35e6c65628a537ad92a38b562a6f9e2de1887b5b/comments", "author": {"login": "Havvy", "id": 731722, "node_id": "MDQ6VXNlcjczMTcyMg==", "avatar_url": "https://avatars.githubusercontent.com/u/731722?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Havvy", "html_url": "https://github.com/Havvy", "followers_url": "https://api.github.com/users/Havvy/followers", "following_url": "https://api.github.com/users/Havvy/following{/other_user}", "gists_url": "https://api.github.com/users/Havvy/gists{/gist_id}", "starred_url": "https://api.github.com/users/Havvy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Havvy/subscriptions", "organizations_url": "https://api.github.com/users/Havvy/orgs", "repos_url": "https://api.github.com/users/Havvy/repos", "events_url": "https://api.github.com/users/Havvy/events{/privacy}", "received_events_url": "https://api.github.com/users/Havvy/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Havvy", "id": 731722, "node_id": "MDQ6VXNlcjczMTcyMg==", "avatar_url": "https://avatars.githubusercontent.com/u/731722?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Havvy", "html_url": "https://github.com/Havvy", "followers_url": "https://api.github.com/users/Havvy/followers", "following_url": "https://api.github.com/users/Havvy/following{/other_user}", "gists_url": "https://api.github.com/users/Havvy/gists{/gist_id}", "starred_url": "https://api.github.com/users/Havvy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Havvy/subscriptions", "organizations_url": "https://api.github.com/users/Havvy/orgs", "repos_url": "https://api.github.com/users/Havvy/repos", "events_url": "https://api.github.com/users/Havvy/events{/privacy}", "received_events_url": "https://api.github.com/users/Havvy/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1a867dc346a0b9ea5abd8a8504f1908f42ff2dd2", "url": "https://api.github.com/repos/rust-lang/rust/commits/1a867dc346a0b9ea5abd8a8504f1908f42ff2dd2", "html_url": "https://github.com/rust-lang/rust/commit/1a867dc346a0b9ea5abd8a8504f1908f42ff2dd2"}], "stats": {"total": 123, "additions": 115, "deletions": 8}, "files": [{"sha": "759a28c4f5fddf165151d5bc5b458a697c19993a", "filename": "src/doc/unstable-book/src/language-features/cfg-attr-multi.md", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/35e6c65628a537ad92a38b562a6f9e2de1887b5b/src%2Fdoc%2Funstable-book%2Fsrc%2Flanguage-features%2Fcfg-attr-multi.md", "raw_url": "https://github.com/rust-lang/rust/raw/35e6c65628a537ad92a38b562a6f9e2de1887b5b/src%2Fdoc%2Funstable-book%2Fsrc%2Flanguage-features%2Fcfg-attr-multi.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Funstable-book%2Fsrc%2Flanguage-features%2Fcfg-attr-multi.md?ref=35e6c65628a537ad92a38b562a6f9e2de1887b5b", "patch": "@@ -0,0 +1,20 @@\n+# `cfg_attr_multi`\n+\n+The tracking issue for this feature is: [#555666]\n+The RFC for this feature is: [#2539]\n+\n+[#555666]: https://github.com/rust-lang/rust/issues/555666\n+[#2539]: https://github.com/rust-lang/rfcs/pull/2539\n+\n+------------------------\n+\n+This feature flag lets you put multiple attributes into a `cfg_attr` attribute.\n+\n+Example:\n+\n+```rust,ignore\n+#[cfg_attr(all(), must_use, optimize)]\n+```\n+\n+Because `cfg_attr` resolves before procedural macros, this does not affect\n+macro resolution at all.\n\\ No newline at end of file"}, {"sha": "e611eb86dc1b3214eb5637d5acb685f4a33881e2", "filename": "src/libsyntax/config.rs", "status": "modified", "additions": 35, "deletions": 1, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/35e6c65628a537ad92a38b562a6f9e2de1887b5b/src%2Flibsyntax%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/35e6c65628a537ad92a38b562a6f9e2de1887b5b/src%2Flibsyntax%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fconfig.rs?ref=35e6c65628a537ad92a38b562a6f9e2de1887b5b", "patch": "@@ -9,7 +9,14 @@\n // except according to those terms.\n \n use attr::HasAttrs;\n-use feature_gate::{feature_err, EXPLAIN_STMT_ATTR_SYNTAX, Features, get_features, GateIssue};\n+use feature_gate::{\n+    feature_err,\n+    EXPLAIN_STMT_ATTR_SYNTAX,\n+    Features,\n+    get_features,\n+    GateIssue,\n+    emit_feature_err,\n+};\n use {fold, attr};\n use ast;\n use source_map::Spanned;\n@@ -97,6 +104,13 @@ impl<'a> StripUnconfigured<'a> {\n             return vec![attr];\n         }\n \n+        let gate_cfg_attr_multi = if let Some(ref features) = self.features {\n+            !features.cfg_attr_multi\n+        } else {\n+            false\n+        };\n+        let cfg_attr_span = attr.span;\n+\n         let (cfg_predicate, expanded_attrs) = match attr.parse(self.sess, |parser| {\n             parser.expect(&token::OpenDelim(token::Paren))?;\n \n@@ -123,6 +137,26 @@ impl<'a> StripUnconfigured<'a> {\n             }\n         };\n \n+        // Check feature gate and lint on zero attributes in source. Even if the feature is gated,\n+        // we still compute as if it wasn't, since the emitted error will stop compilation futher\n+        // along the compilation.\n+        match (expanded_attrs.len(), gate_cfg_attr_multi) {\n+            (0, false) => {\n+                // FIXME: Emit unused attribute lint here.\n+            },\n+            (1, _) => {},\n+            (_, true) => {\n+                emit_feature_err(\n+                    self.sess,\n+                    \"cfg_attr_multi\",\n+                    cfg_attr_span,\n+                    GateIssue::Language,\n+                    \"cfg_attr with zero or more than one attributes is experimental\",\n+                );\n+            },\n+            (_, false) => {}\n+        }\n+\n         if attr::cfg_matches(&cfg_predicate, self.sess, self.features) {\n             // We call `process_cfg_attr` recursively in case there's a\n             // `cfg_attr` inside of another `cfg_attr`. E.g."}, {"sha": "7707bbaa8b0e073deaa8cd8c5f0faf4cf5c575e5", "filename": "src/libsyntax/feature_gate.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/35e6c65628a537ad92a38b562a6f9e2de1887b5b/src%2Flibsyntax%2Ffeature_gate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/35e6c65628a537ad92a38b562a6f9e2de1887b5b/src%2Flibsyntax%2Ffeature_gate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Ffeature_gate.rs?ref=35e6c65628a537ad92a38b562a6f9e2de1887b5b", "patch": "@@ -515,6 +515,9 @@ declare_features! (\n \n     // Allows `impl Trait` in bindings (`let`, `const`, `static`)\n     (active, impl_trait_in_bindings, \"1.30.0\", Some(34511), None),\n+\n+    // #[cfg_attr(predicate, multiple, attributes, here)]\n+    (active, cfg_attr_multi, \"1.31.0\", Some(555666), None),\n );\n \n declare_features! ("}, {"sha": "84bd33fc0e7d3ce5541f4252bd64328891a18137", "filename": "src/test/ui/conditional-compilation/cfg-attr-multi-false.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/35e6c65628a537ad92a38b562a6f9e2de1887b5b/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg-attr-multi-false.rs", "raw_url": "https://github.com/rust-lang/rust/raw/35e6c65628a537ad92a38b562a6f9e2de1887b5b/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg-attr-multi-false.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg-attr-multi-false.rs?ref=35e6c65628a537ad92a38b562a6f9e2de1887b5b", "patch": "@@ -4,6 +4,7 @@\n // compile-pass\n \n #![warn(unused_must_use)]\n+#![feature(cfg_attr_multi)]\n \n #[cfg_attr(any(), deprecated, must_use)]\n struct Struct {}"}, {"sha": "d4c3186a6ebbb6dc544dfffe21059f548d1ce7b4", "filename": "src/test/ui/conditional-compilation/cfg-attr-multi-invalid-1.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/35e6c65628a537ad92a38b562a6f9e2de1887b5b/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg-attr-multi-invalid-1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/35e6c65628a537ad92a38b562a6f9e2de1887b5b/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg-attr-multi-invalid-1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg-attr-multi-invalid-1.rs?ref=35e6c65628a537ad92a38b562a6f9e2de1887b5b", "patch": "@@ -10,6 +10,7 @@\n //\n // compile-flags: --cfg broken\n \n+#![feature(cfg_attr_multi)]\n #![cfg_attr(broken, no_core, no_std)] //~ ERROR no_core is experimental\n \n fn main() { }"}, {"sha": "bf68d92cc0bbd410d69c5f03f96c35bbc31281f7", "filename": "src/test/ui/conditional-compilation/cfg-attr-multi-invalid-1.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/35e6c65628a537ad92a38b562a6f9e2de1887b5b/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg-attr-multi-invalid-1.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/35e6c65628a537ad92a38b562a6f9e2de1887b5b/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg-attr-multi-invalid-1.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg-attr-multi-invalid-1.stderr?ref=35e6c65628a537ad92a38b562a6f9e2de1887b5b", "patch": "@@ -1,5 +1,5 @@\n error[E0658]: no_core is experimental (see issue #29639)\n-  --> $DIR/cfg-attr-multi-invalid-1.rs:13:21\n+  --> $DIR/cfg-attr-multi-invalid-1.rs:14:21\n    |\n LL | #![cfg_attr(broken, no_core, no_std)] //~ ERROR no_core is experimental\n    |                     ^^^^^^^"}, {"sha": "bee6b7d4886bd110eba2d42a62fefd25fb5c5905", "filename": "src/test/ui/conditional-compilation/cfg-attr-multi-invalid-2.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/35e6c65628a537ad92a38b562a6f9e2de1887b5b/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg-attr-multi-invalid-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/35e6c65628a537ad92a38b562a6f9e2de1887b5b/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg-attr-multi-invalid-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg-attr-multi-invalid-2.rs?ref=35e6c65628a537ad92a38b562a6f9e2de1887b5b", "patch": "@@ -10,6 +10,7 @@\n //\n // compile-flags: --cfg broken\n \n+#![feature(cfg_attr_multi)]\n #![cfg_attr(broken, no_std, no_core)] //~ ERROR no_core is experimental\n \n fn main() { }"}, {"sha": "5c72a400e0bae031d8f85fa2bcc8137db9d96d82", "filename": "src/test/ui/conditional-compilation/cfg-attr-multi-invalid-2.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/35e6c65628a537ad92a38b562a6f9e2de1887b5b/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg-attr-multi-invalid-2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/35e6c65628a537ad92a38b562a6f9e2de1887b5b/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg-attr-multi-invalid-2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg-attr-multi-invalid-2.stderr?ref=35e6c65628a537ad92a38b562a6f9e2de1887b5b", "patch": "@@ -1,5 +1,5 @@\n error[E0658]: no_core is experimental (see issue #29639)\n-  --> $DIR/cfg-attr-multi-invalid-2.rs:13:29\n+  --> $DIR/cfg-attr-multi-invalid-2.rs:14:29\n    |\n LL | #![cfg_attr(broken, no_std, no_core)] //~ ERROR no_core is experimental\n    |                             ^^^^^^^"}, {"sha": "a31dde00c7cf5f6d33eed4151b5c56ddb68d5c65", "filename": "src/test/ui/conditional-compilation/cfg-attr-multi-true.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/35e6c65628a537ad92a38b562a6f9e2de1887b5b/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg-attr-multi-true.rs", "raw_url": "https://github.com/rust-lang/rust/raw/35e6c65628a537ad92a38b562a6f9e2de1887b5b/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg-attr-multi-true.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg-attr-multi-true.rs?ref=35e6c65628a537ad92a38b562a6f9e2de1887b5b", "patch": "@@ -5,6 +5,7 @@\n // compile-pass\n \n #![warn(unused_must_use)]\n+#![feature(cfg_attr_multi)]\n \n #[cfg_attr(all(), deprecated, must_use)]\n struct MustUseDeprecated {}"}, {"sha": "37cb3de06c04f75288847cdaa974c65096d95419", "filename": "src/test/ui/conditional-compilation/cfg-attr-multi-true.stderr", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/35e6c65628a537ad92a38b562a6f9e2de1887b5b/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg-attr-multi-true.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/35e6c65628a537ad92a38b562a6f9e2de1887b5b/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg-attr-multi-true.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg-attr-multi-true.stderr?ref=35e6c65628a537ad92a38b562a6f9e2de1887b5b", "patch": "@@ -1,31 +1,31 @@\n warning: use of deprecated item 'MustUseDeprecated'\n-  --> $DIR/cfg-attr-multi-true.rs:12:6\n+  --> $DIR/cfg-attr-multi-true.rs:13:6\n    |\n LL | impl MustUseDeprecated { //~ warning: use of deprecated item\n    |      ^^^^^^^^^^^^^^^^^\n    |\n    = note: #[warn(deprecated)] on by default\n \n warning: use of deprecated item 'MustUseDeprecated'\n-  --> $DIR/cfg-attr-multi-true.rs:19:5\n+  --> $DIR/cfg-attr-multi-true.rs:20:5\n    |\n LL |     MustUseDeprecated::new(); //~ warning: use of deprecated item\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: use of deprecated item 'MustUseDeprecated'\n-  --> $DIR/cfg-attr-multi-true.rs:13:17\n+  --> $DIR/cfg-attr-multi-true.rs:14:17\n    |\n LL |     fn new() -> MustUseDeprecated { //~ warning: use of deprecated item\n    |                 ^^^^^^^^^^^^^^^^^\n \n warning: use of deprecated item 'MustUseDeprecated'\n-  --> $DIR/cfg-attr-multi-true.rs:14:9\n+  --> $DIR/cfg-attr-multi-true.rs:15:9\n    |\n LL |         MustUseDeprecated {} //~ warning: use of deprecated item\n    |         ^^^^^^^^^^^^^^^^^\n \n warning: unused `MustUseDeprecated` which must be used\n-  --> $DIR/cfg-attr-multi-true.rs:19:5\n+  --> $DIR/cfg-attr-multi-true.rs:20:5\n    |\n LL |     MustUseDeprecated::new(); //~ warning: use of deprecated item\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^"}, {"sha": "9515380bc285603e634e0c2dc45e513e826f10c0", "filename": "src/test/ui/feature-gates/feature-gate-cfg-attr-multi-1.rs", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/35e6c65628a537ad92a38b562a6f9e2de1887b5b/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-cfg-attr-multi-1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/35e6c65628a537ad92a38b562a6f9e2de1887b5b/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-cfg-attr-multi-1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-cfg-attr-multi-1.rs?ref=35e6c65628a537ad92a38b562a6f9e2de1887b5b", "patch": "@@ -0,0 +1,5 @@\n+// gate-test-cfg_attr_multi\n+\n+#![cfg_attr(all(), warn(nonstandard_style), allow(unused_attributes))]\n+//~^ ERROR cfg_attr with zero or more than one attributes is experimental\n+fn main() {}"}, {"sha": "23c09c913f4306b635e037b75edba954eb23389c", "filename": "src/test/ui/feature-gates/feature-gate-cfg-attr-multi-1.stderr", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/35e6c65628a537ad92a38b562a6f9e2de1887b5b/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-cfg-attr-multi-1.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/35e6c65628a537ad92a38b562a6f9e2de1887b5b/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-cfg-attr-multi-1.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-cfg-attr-multi-1.stderr?ref=35e6c65628a537ad92a38b562a6f9e2de1887b5b", "patch": "@@ -0,0 +1,11 @@\n+error[E0658]: cfg_attr with zero or more than one attributes is experimental (see issue #555666)\n+  --> $DIR/feature-gate-cfg-attr-multi-1.rs:3:1\n+   |\n+LL | #![cfg_attr(all(), warn(nonstandard_style), allow(unused_attributes))]\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = help: add #![feature(cfg_attr_multi)] to the crate attributes to enable\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0658`."}, {"sha": "cf02432274b1e35ef651d067e2e215bc8bc8c4d8", "filename": "src/test/ui/feature-gates/feature-gate-cfg-attr-multi-2.rs", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/35e6c65628a537ad92a38b562a6f9e2de1887b5b/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-cfg-attr-multi-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/35e6c65628a537ad92a38b562a6f9e2de1887b5b/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-cfg-attr-multi-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-cfg-attr-multi-2.rs?ref=35e6c65628a537ad92a38b562a6f9e2de1887b5b", "patch": "@@ -0,0 +1,3 @@\n+#![cfg_attr(all(),)]\n+//~^ ERROR cfg_attr with zero or more than one attributes is experimental\n+fn main() {}"}, {"sha": "d8f4acd12d72270571b052a58af4c335509cc930", "filename": "src/test/ui/feature-gates/feature-gate-cfg-attr-multi-2.stderr", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/35e6c65628a537ad92a38b562a6f9e2de1887b5b/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-cfg-attr-multi-2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/35e6c65628a537ad92a38b562a6f9e2de1887b5b/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-cfg-attr-multi-2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-cfg-attr-multi-2.stderr?ref=35e6c65628a537ad92a38b562a6f9e2de1887b5b", "patch": "@@ -0,0 +1,11 @@\n+error[E0658]: cfg_attr with zero or more than one attributes is experimental (see issue #555666)\n+  --> $DIR/feature-gate-cfg-attr-multi-2.rs:1:1\n+   |\n+LL | #![cfg_attr(all(),)]\n+   | ^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = help: add #![feature(cfg_attr_multi)] to the crate attributes to enable\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0658`."}, {"sha": "e4737926e7a22c85a31abda4157fb0790680c3fb", "filename": "src/test/ui/feature-gates/feature-gate-cfg-attr-multi-bootstrap-1.rs", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/35e6c65628a537ad92a38b562a6f9e2de1887b5b/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-cfg-attr-multi-bootstrap-1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/35e6c65628a537ad92a38b562a6f9e2de1887b5b/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-cfg-attr-multi-bootstrap-1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-cfg-attr-multi-bootstrap-1.rs?ref=35e6c65628a537ad92a38b562a6f9e2de1887b5b", "patch": "@@ -0,0 +1,7 @@\n+// Test that settingt the featute gate while using its functionality doesn't error.\n+\n+// compile-pass\n+\n+#![cfg_attr(all(), feature(cfg_attr_multi), crate_type=\"bin\")]\n+\n+fn main() {}"}, {"sha": "df740541f5543e2a3af92d41af71f8b8f3652f26", "filename": "src/test/ui/feature-gates/feature-gate-cfg-attr-multi-bootstrap-2.rs", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/35e6c65628a537ad92a38b562a6f9e2de1887b5b/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-cfg-attr-multi-bootstrap-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/35e6c65628a537ad92a38b562a6f9e2de1887b5b/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-cfg-attr-multi-bootstrap-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-cfg-attr-multi-bootstrap-2.rs?ref=35e6c65628a537ad92a38b562a6f9e2de1887b5b", "patch": "@@ -0,0 +1,9 @@\n+// Test that settingt the featute gate while using its functionality doesn't error.\n+// Specifically, if there's a cfg-attr *before* the feature gate.\n+\n+// compile-pass\n+\n+#![cfg_attr(all(),)]\n+#![cfg_attr(all(), feature(cfg_attr_multi), crate_type=\"bin\")]\n+\n+fn main() {}"}]}