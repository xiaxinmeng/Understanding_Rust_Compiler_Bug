{"sha": "24ce65c8d6b0ab91426e9f702b49be18a47f48f6", "node_id": "C_kwDOAAsO6NoAKDI0Y2U2NWM4ZDZiMGFiOTE0MjZlOWY3MDJiNDliZTE4YTQ3ZjQ4ZjY", "commit": {"author": {"name": "Ezra Shaw", "email": "ezrasure@outlook.com", "date": "2023-01-08T08:36:19Z"}, "committer": {"name": "Ezra Shaw", "email": "ezrasure@outlook.com", "date": "2023-01-09T02:48:53Z"}, "message": "docs/test: add error-docs and UI test for `E0711`", "tree": {"sha": "19e94999852c9258bf93f06741b427ec3efe87ea", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/19e94999852c9258bf93f06741b427ec3efe87ea"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/24ce65c8d6b0ab91426e9f702b49be18a47f48f6", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQJJBAABCAAzFiEEYSWD6p+RIeSP1N2eF81cKtrg00QFAmO7gJUVHGV6cmFzdXJl\nQG91dGxvb2suY29tAAoJEBfNXCra4NNEqOUP/0I2y0YJmLc01LD25I5/af4KkEle\n8dA5klsy2xvqN9oGCGlF+ZrLmQHnatXQesSMyL0hm+nqsHGYLZnUFxi/tfN44yGv\ntjw1wk6NV8W9y6LdzqTJtGGfgN7lxzSA/BF7ohzxBQQufwP6gLhJ5CQl9MREscAQ\nnZ1SqPQIsh+K/Wj+CJCTQXlQHhC/KGHMcNaucn5cvW+GH/4APGSYGks9CGotxABj\nGvUElImTxVcwPigCBINDJ9046Tm90bwqq5H9CQkj7XCBIR6a7hXQGXJPwkewXX0n\nhpQFkt/8DAoo7f9ODc0o0dK5QsnQYiLp3wBsJJP6cxzYCXqql7eKtjFQav93peKA\ndIhnwgBmN4uN5LOnDKI+bQy07kBp5r0skxyFON85URE8LN8wHpkpWrq45MUfxO9W\nPbYkBrXZnMyBCSa/F9hPF/SG6GbXaA8u0MneYgKwZ1h68gM1z41wMIdZ52Kp/lki\nYn49DiEh6ImlSfPlJ6uIkQuYNHaBnIgs4Eq6OoggwtDUm0rq1FsDDO19HgrVt95l\nMD4xfTPnWy5iIDRpQvo0QgleBR4WGn8CVrjc9Dsfo6v8MlQGOAHtLFg2TS6rWCMq\nQtgYCQVlZ0xZotNOxdAXK7G/3koSIEv4XM3XYOXZ3Fra89yeBPIaTQt7Cc7rTh8/\nPrPrw3GCNA+8w+vd\n=WtXG\n-----END PGP SIGNATURE-----", "payload": "tree 19e94999852c9258bf93f06741b427ec3efe87ea\nparent ecc0507fdddce66e2d3af2c8bfe8e609eb6123bd\nauthor Ezra Shaw <ezrasure@outlook.com> 1673166979 +1300\ncommitter Ezra Shaw <ezrasure@outlook.com> 1673232533 +1300\n\ndocs/test: add error-docs and UI test for `E0711`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/24ce65c8d6b0ab91426e9f702b49be18a47f48f6", "html_url": "https://github.com/rust-lang/rust/commit/24ce65c8d6b0ab91426e9f702b49be18a47f48f6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/24ce65c8d6b0ab91426e9f702b49be18a47f48f6/comments", "author": {"login": "Ezrashaw", "id": 38062690, "node_id": "MDQ6VXNlcjM4MDYyNjkw", "avatar_url": "https://avatars.githubusercontent.com/u/38062690?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ezrashaw", "html_url": "https://github.com/Ezrashaw", "followers_url": "https://api.github.com/users/Ezrashaw/followers", "following_url": "https://api.github.com/users/Ezrashaw/following{/other_user}", "gists_url": "https://api.github.com/users/Ezrashaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ezrashaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ezrashaw/subscriptions", "organizations_url": "https://api.github.com/users/Ezrashaw/orgs", "repos_url": "https://api.github.com/users/Ezrashaw/repos", "events_url": "https://api.github.com/users/Ezrashaw/events{/privacy}", "received_events_url": "https://api.github.com/users/Ezrashaw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Ezrashaw", "id": 38062690, "node_id": "MDQ6VXNlcjM4MDYyNjkw", "avatar_url": "https://avatars.githubusercontent.com/u/38062690?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ezrashaw", "html_url": "https://github.com/Ezrashaw", "followers_url": "https://api.github.com/users/Ezrashaw/followers", "following_url": "https://api.github.com/users/Ezrashaw/following{/other_user}", "gists_url": "https://api.github.com/users/Ezrashaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ezrashaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ezrashaw/subscriptions", "organizations_url": "https://api.github.com/users/Ezrashaw/orgs", "repos_url": "https://api.github.com/users/Ezrashaw/repos", "events_url": "https://api.github.com/users/Ezrashaw/events{/privacy}", "received_events_url": "https://api.github.com/users/Ezrashaw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ecc0507fdddce66e2d3af2c8bfe8e609eb6123bd", "url": "https://api.github.com/repos/rust-lang/rust/commits/ecc0507fdddce66e2d3af2c8bfe8e609eb6123bd", "html_url": "https://github.com/rust-lang/rust/commit/ecc0507fdddce66e2d3af2c8bfe8e609eb6123bd"}], "stats": {"total": 65, "additions": 64, "deletions": 1}, "files": [{"sha": "686c22bc386dc3fff72e8366b1bab0a5c6669662", "filename": "compiler/rustc_error_codes/src/error_codes.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/24ce65c8d6b0ab91426e9f702b49be18a47f48f6/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/24ce65c8d6b0ab91426e9f702b49be18a47f48f6/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes.rs?ref=24ce65c8d6b0ab91426e9f702b49be18a47f48f6", "patch": "@@ -436,6 +436,7 @@ E0713: include_str!(\"./error_codes/E0713.md\"),\n E0714: include_str!(\"./error_codes/E0714.md\"),\n E0715: include_str!(\"./error_codes/E0715.md\"),\n E0716: include_str!(\"./error_codes/E0716.md\"),\n+E0711: include_str!(\"./error_codes/E0711.md\"),\n E0717: include_str!(\"./error_codes/E0717.md\"),\n E0718: include_str!(\"./error_codes/E0718.md\"),\n E0719: include_str!(\"./error_codes/E0719.md\"),\n@@ -640,7 +641,6 @@ E0791: include_str!(\"./error_codes/E0791.md\"),\n //  E0702, // replaced with a generic attribute input check\n //  E0707, // multiple elided lifetimes used in arguments of `async fn`\n //  E0709, // multiple different lifetimes used in arguments of `async fn`\n-    E0711, // a feature has been declared with conflicting stability attributes, internal error code\n //  E0721, // `await` keyword\n //  E0723, // unstable feature in `const` context\n //  E0738, // Removed; errored on `#[track_caller] fn`s in `extern \"Rust\" { ... }`."}, {"sha": "a2150037f7856d53644d9192b25ae3c7cc311960", "filename": "compiler/rustc_error_codes/src/error_codes/E0711.md", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/24ce65c8d6b0ab91426e9f702b49be18a47f48f6/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0711.md", "raw_url": "https://github.com/rust-lang/rust/raw/24ce65c8d6b0ab91426e9f702b49be18a47f48f6/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0711.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0711.md?ref=24ce65c8d6b0ab91426e9f702b49be18a47f48f6", "patch": "@@ -0,0 +1,30 @@\n+#### This error code is internal to the compiler and will not be emitted with normal Rust code.\n+\n+Feature declared with conflicting stability requirements.\n+\n+```compile_fail,E0711\n+// NOTE: this attribute is perma-unstable and should *never* be used outside of\n+//       stdlib and the compiler.\n+#![feature(staged_api)]\n+\n+#![stable(feature = \"...\", since = \"1.0.0\")]\n+\n+#[stable(feature = \"foo\", since = \"1.0.0\")]\n+fn foo_stable_1_0_0() {}\n+\n+// error: feature `foo` is declared stable since 1.29.0\n+#[stable(feature = \"foo\", since = \"1.29.0\")]\n+fn foo_stable_1_29_0() {}\n+\n+// error: feature `foo` is declared unstable\n+#[unstable(feature = \"foo\", issue = \"none\")]\n+fn foo_unstable() {}\n+```\n+\n+In the above example, the `foo` feature is first defined to be stable since\n+1.0.0, but is then re-declared stable since 1.29.0. This discrepancy in\n+versions causes an error. Furthermore, `foo` is then re-declared as unstable,\n+again the conflict causes an error.\n+\n+This error can be fixed by splitting the feature, this allows any\n+stability requirements and removes any possibility of conflict."}, {"sha": "7d2044a7da2dcf2d3ce4a5ec49131a58405ab720", "filename": "src/test/ui/error-codes/E0711.rs", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/24ce65c8d6b0ab91426e9f702b49be18a47f48f6/src%2Ftest%2Fui%2Ferror-codes%2FE0711.rs", "raw_url": "https://github.com/rust-lang/rust/raw/24ce65c8d6b0ab91426e9f702b49be18a47f48f6/src%2Ftest%2Fui%2Ferror-codes%2FE0711.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferror-codes%2FE0711.rs?ref=24ce65c8d6b0ab91426e9f702b49be18a47f48f6", "patch": "@@ -0,0 +1,18 @@\n+// copied from: src/test/ui/feature-gates/stability-attribute-consistency.rs\n+\n+#![feature(staged_api)]\n+\n+#![stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n+\n+#[stable(feature = \"foo\", since = \"1.0.0\")]\n+fn foo_stable_1_0_0() {}\n+\n+#[stable(feature = \"foo\", since = \"1.29.0\")]\n+//~^ ERROR feature `foo` is declared stable since 1.29.0\n+fn foo_stable_1_29_0() {}\n+\n+#[unstable(feature = \"foo\", issue = \"none\")]\n+//~^ ERROR feature `foo` is declared unstable\n+fn foo_unstable() {}\n+\n+fn main() {}"}, {"sha": "f39cb4ecd4bdb5c699dde26fc64d037a920fd3f2", "filename": "src/test/ui/error-codes/E0711.stderr", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/24ce65c8d6b0ab91426e9f702b49be18a47f48f6/src%2Ftest%2Fui%2Ferror-codes%2FE0711.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/24ce65c8d6b0ab91426e9f702b49be18a47f48f6/src%2Ftest%2Fui%2Ferror-codes%2FE0711.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferror-codes%2FE0711.stderr?ref=24ce65c8d6b0ab91426e9f702b49be18a47f48f6", "patch": "@@ -0,0 +1,15 @@\n+error[E0711]: feature `foo` is declared stable since 1.29.0, but was previously declared stable since 1.0.0\n+  --> $DIR/E0711.rs:10:1\n+   |\n+LL | #[stable(feature = \"foo\", since = \"1.29.0\")]\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+error[E0711]: feature `foo` is declared unstable, but was previously declared stable\n+  --> $DIR/E0711.rs:14:1\n+   |\n+LL | #[unstable(feature = \"foo\", issue = \"none\")]\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+error: aborting due to 2 previous errors\n+\n+For more information about this error, try `rustc --explain E0711`."}]}