{"sha": "f6efa3356622a2b939b93cb4a169c24418cf3446", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY2ZWZhMzM1NjYyMmEyYjkzOWI5M2NiNGExNjljMjQ0MThjZjM0NDY=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2021-07-16T13:15:23Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2021-07-16T13:15:23Z"}, "message": "Add GUI test for auto-hide-trait-implementations setting", "tree": {"sha": "546586f69a31376a232e5bbcd6b30cfcb53f64e1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/546586f69a31376a232e5bbcd6b30cfcb53f64e1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f6efa3356622a2b939b93cb4a169c24418cf3446", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f6efa3356622a2b939b93cb4a169c24418cf3446", "html_url": "https://github.com/rust-lang/rust/commit/f6efa3356622a2b939b93cb4a169c24418cf3446", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f6efa3356622a2b939b93cb4a169c24418cf3446/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a6470c7fa8a511cfbcf9e9d3e1ab6779ac661edb", "url": "https://api.github.com/repos/rust-lang/rust/commits/a6470c7fa8a511cfbcf9e9d3e1ab6779ac661edb", "html_url": "https://github.com/rust-lang/rust/commit/a6470c7fa8a511cfbcf9e9d3e1ab6779ac661edb"}], "stats": {"total": 20, "additions": 20, "deletions": 0}, "files": [{"sha": "7b1358fedc3b5e2201ca0adca36d55df3b79c106", "filename": "src/test/rustdoc-gui/auto-hide-trait-implementations.goml", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/f6efa3356622a2b939b93cb4a169c24418cf3446/src%2Ftest%2Frustdoc-gui%2Fauto-hide-trait-implementations.goml", "raw_url": "https://github.com/rust-lang/rust/raw/f6efa3356622a2b939b93cb4a169c24418cf3446/src%2Ftest%2Frustdoc-gui%2Fauto-hide-trait-implementations.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fauto-hide-trait-implementations.goml?ref=f6efa3356622a2b939b93cb4a169c24418cf3446", "patch": "@@ -0,0 +1,13 @@\n+// Checks that the setting \"auto hide trait implementations\" is working as expected.\n+goto: file://|DOC_PATH|/test_docs/struct.Foo.html\n+\n+// By default, the trait implementations are not collapsed.\n+assert-attribute: (\"#trait-implementations-list > details\", {\"open\": \"\"}, ALL)\n+\n+// We now set the setting to auto hide all trait implementations.\n+local-storage: {\"rustdoc-auto-hide-trait-implementations\": \"true\" }\n+// We reload to ensure the trait implementations are collapsed as expected.\n+reload:\n+\n+// We now check that all matching elements don't have the open attributes.\n+assert-attribute-false: (\"#trait-implementations-list > details\", {\"open\": \"\"}, ALL)"}, {"sha": "bed72ccb9f929668f0b3388f2be52e6f00dbcf3e", "filename": "src/test/rustdoc-gui/src/test_docs/lib.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/f6efa3356622a2b939b93cb4a169c24418cf3446/src%2Ftest%2Frustdoc-gui%2Fsrc%2Ftest_docs%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f6efa3356622a2b939b93cb4a169c24418cf3446/src%2Ftest%2Frustdoc-gui%2Fsrc%2Ftest_docs%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsrc%2Ftest_docs%2Flib.rs?ref=f6efa3356622a2b939b93cb4a169c24418cf3446", "patch": "@@ -5,6 +5,7 @@\n #![feature(doc_keyword)]\n #![feature(doc_cfg)]\n \n+use std::convert::AsRef;\n use std::fmt;\n \n /// Basic function with some code examples:\n@@ -36,6 +37,12 @@ impl Foo {\n     }\n }\n \n+impl AsRef<str> for Foo {\n+    fn as_ref(&self) -> &str {\n+        \"hello\"\n+    }\n+}\n+\n /// Just a normal enum.\n #[doc(alias = \"ThisIsAnAlias\")]\n pub enum WhoLetTheDogOut {"}]}