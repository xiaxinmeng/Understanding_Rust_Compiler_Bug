{"sha": "e0e1bd7ff778e5913b566c9e03224faecc0eb486", "node_id": "MDY6Q29tbWl0NzI0NzEyOmUwZTFiZDdmZjc3OGU1OTEzYjU2NmM5ZTAzMjI0ZmFlY2MwZWI0ODY=", "commit": {"author": {"name": "Oliver Schneider", "email": "git-no-reply-9879165716479413131@oli-obk.de", "date": "2018-05-07T16:03:28Z"}, "committer": {"name": "Oliver Schneider", "email": "git-no-reply-9879165716479413131@oli-obk.de", "date": "2018-05-07T16:03:28Z"}, "message": "Pointers must be valid, even pointers to zsts", "tree": {"sha": "f36e9419a53540ec6d75ccd2c0397404d79562a9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f36e9419a53540ec6d75ccd2c0397404d79562a9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e0e1bd7ff778e5913b566c9e03224faecc0eb486", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQJgBAABCgBKFiEEvpMjxK4/cnPNfesJHVy0/Fl8MAQFAlrweNAsHGdpdC1uby1y\nZXBseS05ODc5MTY1NzE2NDc5NDEzMTMxQG9saS1vYmsuZGUACgkQHVy0/Fl8MATP\njQ//TYIxffSo1ubdBmd13uqFUqCsO/shD/j7UfBh/Pc0dKNeZ5P1pvNT4PZxjMKD\nyBIIFOXaIt16FhvWkuqUbVpfIknYjcQMVjU8BZsje2JdwNnliK/wbjfQQgxeo4C2\ndJ9FC9UYa4kFxlGPJzFTgezxzaWYvyKaLznOc2KD1FZ2C/kSZbgZ6CPSizH4BgwB\n7vVpv3WE9OV6zRJwBsxk9cxcBCxrP2vsHryiEr8C8qJpyBAefkILyT6V/52Oc90m\nBFTQx6lu7XgofKoo7dom3LPvp9Rq+t2mfweD9UYOSbJFmM+X0V58Cs8OM2mKL+3C\n8y4G7l9/IgXwCj4JSFxfO9U3FeNIw2YLyph4VGaVb371ex0XssAk+cPIR9ATvWIc\nY+KkycC+3CePxb/nG+V0f38JekOIZUaAhgssX658Wec+10fsWRvM4iNHTUM9fJuA\nSgaHS19CDVrz+Qee/eGE+JkdYoz1vUD+HQYfyaOFmDxPcEmgy0aTIqfy8hLN7aR5\nHEIJsMiV9Mt8rnfZa5SwOIOc59XNtIKG9reQ5IHBYGfPXR5BFOvFHOsh1GwYP39U\nxthGCl3t3WMEM7K86R3Nx2DWMOFsvOt3MWbqNDnLmXFcONyr7EiZM3YMSjGnnLyy\nb9dCg6KXLplQJ4+2UNdUY24BtXTN4qE5Q9tpcBJxzv2pQjg=\n=meJx\n-----END PGP SIGNATURE-----", "payload": "tree f36e9419a53540ec6d75ccd2c0397404d79562a9\nparent 6653bb38d5bb95bda0937e876094ef3b8bfca92c\nauthor Oliver Schneider <git-no-reply-9879165716479413131@oli-obk.de> 1525709008 +0200\ncommitter Oliver Schneider <git-no-reply-9879165716479413131@oli-obk.de> 1525709008 +0200\n\nPointers must be valid, even pointers to zsts\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e0e1bd7ff778e5913b566c9e03224faecc0eb486", "html_url": "https://github.com/rust-lang/rust/commit/e0e1bd7ff778e5913b566c9e03224faecc0eb486", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e0e1bd7ff778e5913b566c9e03224faecc0eb486/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6653bb38d5bb95bda0937e876094ef3b8bfca92c", "url": "https://api.github.com/repos/rust-lang/rust/commits/6653bb38d5bb95bda0937e876094ef3b8bfca92c", "html_url": "https://github.com/rust-lang/rust/commit/6653bb38d5bb95bda0937e876094ef3b8bfca92c"}], "stats": {"total": 12, "additions": 11, "deletions": 1}, "files": [{"sha": "dce31c4ed3383e9d4a16d30056d14e09aea42b4b", "filename": "miri/lib.rs", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/e0e1bd7ff778e5913b566c9e03224faecc0eb486/miri%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e0e1bd7ff778e5913b566c9e03224faecc0eb486/miri%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/miri%2Flib.rs?ref=e0e1bd7ff778e5913b566c9e03224faecc0eb486", "patch": "@@ -145,7 +145,7 @@ pub fn eval_main<'a, 'tcx: 'a>(\n                 main_instance,\n                 main_mir.span,\n                 main_mir,\n-                Place::undef(),\n+                Place::from_primval_ptr(PrimVal::Bytes(1).into(), ty::layout::Align::from_bytes(1, 1).unwrap()),\n                 StackPopCleanup::None,\n             )?;\n \n@@ -177,6 +177,16 @@ pub fn eval_main<'a, 'tcx: 'a>(\n         Err(mut e) => {\n             ecx.tcx.sess.err(&e.to_string());\n             ecx.report(&mut e, true, None);\n+            for (i, frame) in ecx.stack().iter().enumerate() {\n+                trace!(\"-------------------\");\n+                trace!(\"Frame {}\", i);\n+                trace!(\"    return: {:#?}\", frame.return_place);\n+                for (i, local) in frame.locals.iter().enumerate() {\n+                    if let Some(local) = local {\n+                        trace!(\"    local {}: {:?}\", i, local);\n+                    }\n+                }\n+            }\n         }\n     }\n }"}]}