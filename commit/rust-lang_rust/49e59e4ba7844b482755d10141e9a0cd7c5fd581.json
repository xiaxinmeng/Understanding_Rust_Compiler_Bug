{"sha": "49e59e4ba7844b482755d10141e9a0cd7c5fd581", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ5ZTU5ZTRiYTc4NDRiNDgyNzU1ZDEwMTQxZTlhMGNkN2M1ZmQ1ODE=", "commit": {"author": {"name": "Marijn Haverbeke", "email": "marijnh@gmail.com", "date": "2011-08-29T12:31:32Z"}, "committer": {"name": "Marijn Haverbeke", "email": "marijnh@gmail.com", "date": "2011-08-29T12:31:32Z"}, "message": "Remove makefile CFG_USE_SNAP_LIBS_FOR_STAGE1 hack\n\nIt didn't work as intended, due to my lack of Makefile-fu", "tree": {"sha": "75f6fe67f650011c3003d99dde68608fd548b4d2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/75f6fe67f650011c3003d99dde68608fd548b4d2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/49e59e4ba7844b482755d10141e9a0cd7c5fd581", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/49e59e4ba7844b482755d10141e9a0cd7c5fd581", "html_url": "https://github.com/rust-lang/rust/commit/49e59e4ba7844b482755d10141e9a0cd7c5fd581", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/49e59e4ba7844b482755d10141e9a0cd7c5fd581/comments", "author": {"login": "marijnh", "id": 144427, "node_id": "MDQ6VXNlcjE0NDQyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/144427?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marijnh", "html_url": "https://github.com/marijnh", "followers_url": "https://api.github.com/users/marijnh/followers", "following_url": "https://api.github.com/users/marijnh/following{/other_user}", "gists_url": "https://api.github.com/users/marijnh/gists{/gist_id}", "starred_url": "https://api.github.com/users/marijnh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marijnh/subscriptions", "organizations_url": "https://api.github.com/users/marijnh/orgs", "repos_url": "https://api.github.com/users/marijnh/repos", "events_url": "https://api.github.com/users/marijnh/events{/privacy}", "received_events_url": "https://api.github.com/users/marijnh/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marijnh", "id": 144427, "node_id": "MDQ6VXNlcjE0NDQyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/144427?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marijnh", "html_url": "https://github.com/marijnh", "followers_url": "https://api.github.com/users/marijnh/followers", "following_url": "https://api.github.com/users/marijnh/following{/other_user}", "gists_url": "https://api.github.com/users/marijnh/gists{/gist_id}", "starred_url": "https://api.github.com/users/marijnh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marijnh/subscriptions", "organizations_url": "https://api.github.com/users/marijnh/orgs", "repos_url": "https://api.github.com/users/marijnh/repos", "events_url": "https://api.github.com/users/marijnh/events{/privacy}", "received_events_url": "https://api.github.com/users/marijnh/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c9c5ee252a8523778377f2832765442e611e85a4", "url": "https://api.github.com/repos/rust-lang/rust/commits/c9c5ee252a8523778377f2832765442e611e85a4", "html_url": "https://github.com/rust-lang/rust/commit/c9c5ee252a8523778377f2832765442e611e85a4"}], "stats": {"total": 33, "additions": 3, "deletions": 30}, "files": [{"sha": "dbd98a31c00f40b96b9335631bfe3e23247677cf", "filename": "Makefile.in", "status": "modified", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/49e59e4ba7844b482755d10141e9a0cd7c5fd581/Makefile.in", "raw_url": "https://github.com/rust-lang/rust/raw/49e59e4ba7844b482755d10141e9a0cd7c5fd581/Makefile.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Makefile.in?ref=49e59e4ba7844b482755d10141e9a0cd7c5fd581", "patch": "@@ -57,13 +57,6 @@ else\n   CFG_STDLIB_DEFAULT = $(2)/$(CFG_STDLIB)\n endif\n \n-# Uncomment this to temporarily use the snapshot's runtime for stage1.\n-# This is useful when making incompatible changes to the parts of the\n-# runtime used directly by the compiler -- the binaries built by the\n-# snapshot won't know about the changes yet. Don't leave this on. Turn\n-# it on, shapshot, and turn it off again.\n-CFG_USE_SNAP_LIBS_FOR_STAGE1 = 1\n-\n # version-string calculation\n CFG_GIT_DIR := $(CFG_SRC_DIR).git\n CFG_VERSION = prerelease"}, {"sha": "171b954d9a72551c95e8b5ad6ad578f5c5630ba1", "filename": "mk/stageN.mk", "status": "modified", "additions": 3, "deletions": 23, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/49e59e4ba7844b482755d10141e9a0cd7c5fd581/mk%2FstageN.mk", "raw_url": "https://github.com/rust-lang/rust/raw/49e59e4ba7844b482755d10141e9a0cd7c5fd581/mk%2FstageN.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2FstageN.mk?ref=49e59e4ba7844b482755d10141e9a0cd7c5fd581", "patch": "@@ -8,15 +8,6 @@\n # new rustrt in stage0/lib/.\n \n define LIBGEN\n-\n-ifdef CFG_USE_SNAP_LIBS_FOR_STAGE1\n-ifeq ($(2), 0)\n-RUNTIME_SOURCE = stage0/$(CFG_RUNTIME)\n-stage$(2)/lib/$$(CFG_STDLIB): stage0/$$(CFG_STDLIB)\n-\t@$$(call E, cp: $$@)\n-\t$$(Q)cp $$< $$@\n-else\n-RUNTIME_SOURCE = rt/$(CFG_RUNTIME)\n stage$(2)/lib/$$(CFG_STDLIB): $$(STDLIB_CRATE) $$(STDLIB_INPUTS) \\\n                               stage$(2)/rustc$$(X)               \\\n                               stage$(2)/$$(CFG_RUNTIME)          \\\n@@ -25,8 +16,6 @@ stage$(2)/lib/$$(CFG_STDLIB): $$(STDLIB_CRATE) $$(STDLIB_INPUTS) \\\n                               $$(SREQ$(1))\n \t@$$(call E, compile_and_link: $$@)\n \t$$(STAGE$(2))  --lib -o $$@ $$<\n-endif\n-endif\n \n stage$(2)/lib/libstd.rlib: $$(STDLIB_CRATE) $$(STDLIB_INPUTS) \\\n                            stage$(2)/rustc$$(X)               \\\n@@ -37,7 +26,7 @@ stage$(2)/lib/libstd.rlib: $$(STDLIB_CRATE) $$(STDLIB_INPUTS) \\\n \t@$$(call E, compile_and_link: $$@)\n \t$$(STAGE$(2)) --lib --static -o $$@ $$<\n \n-stage$(2)/lib/$$(CFG_RUNTIME): $$(RUNTIME_SOURCE)\n+stage$(2)/lib/$$(CFG_RUNTIME): rt/$$(CFG_RUNTIME)\n \t@$$(call E, cp: $$@)\n \t$$(Q)cp $$< $$@\n \n@@ -69,20 +58,11 @@ stage$(2)/rustc$$(X): $$(COMPILER_CRATE) $$(COMPILER_INPUTS)          \\\n \t@$$(call E, compile_and_link: $$@)\n \t$$(STAGE$(1)) -L stage$(2) -o $$@ $$<\n \n-RUNTIME_SOURCE = rt/$(CFG_RUNTIME)\n-STDLIB_SOURCE = stage$(1)/lib/$$(CFG_STDLIB)\n-ifdef CFG_USE_SNAP_LIBS_FOR_STAGE1\n-  ifeq ($(2), 1)\n-    RUNTIME_SOURCE = stage0/$(CFG_RUNTIME)\n-    STDLIB_SOURCE = stage0/$(CFG_STDLIB)\n-  endif\n-endif\n-\n-stage$(2)/$$(CFG_RUNTIME): $$(RUNTIME_SOURCE)\n+stage$(2)/$$(CFG_RUNTIME): rt/$$(CFG_RUNTIME)\n \t@$$(call E, cp: $$@)\n \t$$(Q)cp $$< $$@\n \n-stage$(2)/$$(CFG_STDLIB): $$(STDLIB_SOURCE)\n+stage$(2)/$$(CFG_STDLIB): stage$(1)/lib/$$(CFG_STDLIB)\n \t@$$(call E, cp: $$@)\n \t$$(Q)cp $$< $$@\n "}]}