{"sha": "c56bac7f409f0e555120894b12f3d4448ec07fe5", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM1NmJhYzdmNDA5ZjBlNTU1MTIwODk0YjEyZjNkNDQ0OGVjMDdmZTU=", "commit": {"author": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2013-12-22T22:36:50Z"}, "committer": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2013-12-26T23:54:36Z"}, "message": "librustc: De-`@mut` `node_id` in the session", "tree": {"sha": "caae10ff78da590aabf153c15c86f7139a8dedb1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/caae10ff78da590aabf153c15c86f7139a8dedb1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c56bac7f409f0e555120894b12f3d4448ec07fe5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c56bac7f409f0e555120894b12f3d4448ec07fe5", "html_url": "https://github.com/rust-lang/rust/commit/c56bac7f409f0e555120894b12f3d4448ec07fe5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c56bac7f409f0e555120894b12f3d4448ec07fe5/comments", "author": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "eaf69494a5a126189b052102e1b36d1d8bced953", "url": "https://api.github.com/repos/rust-lang/rust/commits/eaf69494a5a126189b052102e1b36d1d8bced953", "html_url": "https://github.com/rust-lang/rust/commit/eaf69494a5a126189b052102e1b36d1d8bced953"}], "stats": {"total": 8, "additions": 4, "deletions": 4}, "files": [{"sha": "8d782948c41ed51d3c89f031ec2d8160d7a6872b", "filename": "src/librustc/driver/driver.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c56bac7f409f0e555120894b12f3d4448ec07fe5/src%2Flibrustc%2Fdriver%2Fdriver.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c56bac7f409f0e555120894b12f3d4448ec07fe5/src%2Flibrustc%2Fdriver%2Fdriver.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fdriver%2Fdriver.rs?ref=c56bac7f409f0e555120894b12f3d4448ec07fe5", "patch": "@@ -881,7 +881,7 @@ pub fn build_session_(sopts: @session::options,\n         building_library: @mut false,\n         working_dir: os::getcwd(),\n         lints: RefCell::new(HashMap::new()),\n-        node_id: @mut 1,\n+        node_id: Cell::new(1),\n         outputs: @mut ~[],\n     }\n }"}, {"sha": "7880fcec24101c8a50a709c0ba14abf30ce04620", "filename": "src/librustc/driver/session.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/c56bac7f409f0e555120894b12f3d4448ec07fe5/src%2Flibrustc%2Fdriver%2Fsession.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c56bac7f409f0e555120894b12f3d4448ec07fe5/src%2Flibrustc%2Fdriver%2Fsession.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fdriver%2Fsession.rs?ref=c56bac7f409f0e555120894b12f3d4448ec07fe5", "patch": "@@ -214,7 +214,7 @@ pub struct Session_ {\n     working_dir: Path,\n     lints: RefCell<HashMap<ast::NodeId,\n                            ~[(lint::lint, codemap::Span, ~str)]>>,\n-    node_id: @mut ast::NodeId,\n+    node_id: Cell<ast::NodeId>,\n     outputs: @mut ~[OutputStyle],\n }\n \n@@ -282,10 +282,10 @@ impl Session_ {\n         self.reserve_node_ids(1)\n     }\n     pub fn reserve_node_ids(&self, count: ast::NodeId) -> ast::NodeId {\n-        let v = *self.node_id;\n+        let v = self.node_id.get();\n \n         match v.checked_add(&count) {\n-            Some(next) => { *self.node_id = next; }\n+            Some(next) => { self.node_id.set(next); }\n             None => self.bug(\"Input too large, ran out of node ids!\")\n         }\n "}]}