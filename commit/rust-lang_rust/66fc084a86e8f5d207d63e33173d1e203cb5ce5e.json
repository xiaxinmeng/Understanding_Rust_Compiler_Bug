{"sha": "66fc084a86e8f5d207d63e33173d1e203cb5ce5e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY2ZmMwODRhODZlOGY1ZDIwN2Q2M2UzMzE3M2QxZTIwM2NiNWNlNWU=", "commit": {"author": {"name": "Paul Daniel Faria", "email": "Nashenas88@users.noreply.github.com", "date": "2020-06-18T13:14:02Z"}, "committer": {"name": "Paul Daniel Faria", "email": "Nashenas88@users.noreply.github.com", "date": "2020-06-18T13:14:02Z"}, "message": "Remove logic to mark all doctest code as", "tree": {"sha": "2ec2cc04cc2d333e465623bc466a69bffca483eb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2ec2cc04cc2d333e465623bc466a69bffca483eb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/66fc084a86e8f5d207d63e33173d1e203cb5ce5e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/66fc084a86e8f5d207d63e33173d1e203cb5ce5e", "html_url": "https://github.com/rust-lang/rust/commit/66fc084a86e8f5d207d63e33173d1e203cb5ce5e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/66fc084a86e8f5d207d63e33173d1e203cb5ce5e/comments", "author": {"login": "Nashenas88", "id": 1673130, "node_id": "MDQ6VXNlcjE2NzMxMzA=", "avatar_url": "https://avatars.githubusercontent.com/u/1673130?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nashenas88", "html_url": "https://github.com/Nashenas88", "followers_url": "https://api.github.com/users/Nashenas88/followers", "following_url": "https://api.github.com/users/Nashenas88/following{/other_user}", "gists_url": "https://api.github.com/users/Nashenas88/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nashenas88/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nashenas88/subscriptions", "organizations_url": "https://api.github.com/users/Nashenas88/orgs", "repos_url": "https://api.github.com/users/Nashenas88/repos", "events_url": "https://api.github.com/users/Nashenas88/events{/privacy}", "received_events_url": "https://api.github.com/users/Nashenas88/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Nashenas88", "id": 1673130, "node_id": "MDQ6VXNlcjE2NzMxMzA=", "avatar_url": "https://avatars.githubusercontent.com/u/1673130?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nashenas88", "html_url": "https://github.com/Nashenas88", "followers_url": "https://api.github.com/users/Nashenas88/followers", "following_url": "https://api.github.com/users/Nashenas88/following{/other_user}", "gists_url": "https://api.github.com/users/Nashenas88/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nashenas88/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nashenas88/subscriptions", "organizations_url": "https://api.github.com/users/Nashenas88/orgs", "repos_url": "https://api.github.com/users/Nashenas88/repos", "events_url": "https://api.github.com/users/Nashenas88/events{/privacy}", "received_events_url": "https://api.github.com/users/Nashenas88/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a951108173349f9ff0b9936ec2af8881fd92fc98", "url": "https://api.github.com/repos/rust-lang/rust/commits/a951108173349f9ff0b9936ec2af8881fd92fc98", "html_url": "https://github.com/rust-lang/rust/commit/a951108173349f9ff0b9936ec2af8881fd92fc98"}], "stats": {"total": 27, "additions": 13, "deletions": 14}, "files": [{"sha": "f1e007b09b2fba3aa08c9776d427420504b61747", "filename": "crates/ra_ide/src/snapshots/highlight_doctest.html", "status": "modified", "additions": 13, "deletions": 13, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/66fc084a86e8f5d207d63e33173d1e203cb5ce5e/crates%2Fra_ide%2Fsrc%2Fsnapshots%2Fhighlight_doctest.html", "raw_url": "https://github.com/rust-lang/rust/raw/66fc084a86e8f5d207d63e33173d1e203cb5ce5e/crates%2Fra_ide%2Fsrc%2Fsnapshots%2Fhighlight_doctest.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fsnapshots%2Fhighlight_doctest.html?ref=66fc084a86e8f5d207d63e33173d1e203cb5ce5e", "patch": "@@ -43,8 +43,8 @@\n     <span class=\"comment documentation\">/// # Examples</span>\n     <span class=\"comment documentation\">///</span>\n     <span class=\"comment documentation\">/// ```</span>\n-    <span class=\"comment documentation\">/// #</span> <span class=\"attribute documentation\">#![</span><span class=\"function attribute documentation\">allow</span><span class=\"attribute documentation\">(unused_mut)]</span>\n-    <span class=\"comment documentation\">/// </span><span class=\"keyword documentation\">let</span> <span class=\"keyword documentation\">mut</span> <span class=\"variable declaration documentation mutable\">foo</span>: <span class=\"struct documentation\">Foo</span> = <span class=\"struct documentation\">Foo</span>::<span class=\"function documentation\">new</span>();\n+    <span class=\"comment documentation\">/// #</span> <span class=\"attribute\">#![</span><span class=\"function attribute\">allow</span><span class=\"attribute\">(unused_mut)]</span>\n+    <span class=\"comment documentation\">/// </span><span class=\"keyword\">let</span> <span class=\"keyword\">mut</span> <span class=\"variable declaration mutable\">foo</span>: <span class=\"struct\">Foo</span> = <span class=\"struct\">Foo</span>::<span class=\"function\">new</span>();\n     <span class=\"comment documentation\">/// ```</span>\n     <span class=\"keyword\">pub</span> <span class=\"keyword\">const</span> <span class=\"keyword\">fn</span> <span class=\"function declaration\">new</span>() -&gt; <span class=\"struct\">Foo</span> {\n         <span class=\"struct\">Foo</span> { <span class=\"field\">bar</span>: <span class=\"bool_literal\">true</span> }\n@@ -55,26 +55,26 @@\n     <span class=\"comment documentation\">/// # Examples</span>\n     <span class=\"comment documentation\">///</span>\n     <span class=\"comment documentation\">/// ```</span>\n-    <span class=\"comment documentation\">/// </span><span class=\"keyword documentation\">use</span> <span class=\"module documentation\">x</span>::<span class=\"module documentation\">y</span>;\n+    <span class=\"comment documentation\">/// </span><span class=\"keyword\">use</span> <span class=\"module\">x</span>::<span class=\"module\">y</span>;\n     <span class=\"comment documentation\">///</span>\n-    <span class=\"comment documentation\">/// </span><span class=\"keyword documentation\">let</span> <span class=\"variable declaration documentation\">foo</span> = <span class=\"struct documentation\">Foo</span>::<span class=\"function documentation\">new</span>();\n+    <span class=\"comment documentation\">/// </span><span class=\"keyword\">let</span> <span class=\"variable declaration\">foo</span> = <span class=\"struct\">Foo</span>::<span class=\"function\">new</span>();\n     <span class=\"comment documentation\">///</span>\n-    <span class=\"comment documentation\">/// </span><span class=\"comment documentation\">// calls bar on foo</span>\n-    <span class=\"comment documentation\">/// </span><span class=\"macro documentation\">assert!</span>(foo.bar());\n+    <span class=\"comment documentation\">/// </span><span class=\"comment\">// calls bar on foo</span>\n+    <span class=\"comment documentation\">/// </span><span class=\"macro\">assert!</span>(foo.bar());\n     <span class=\"comment documentation\">///</span>\n-    <span class=\"comment documentation\">/// </span><span class=\"keyword documentation\">let</span> <span class=\"variable declaration documentation\">bar</span> = <span class=\"variable documentation\">foo</span>.<span class=\"field documentation\">bar</span> || <span class=\"struct documentation\">Foo</span>::<span class=\"constant documentation\">bar</span>;\n+    <span class=\"comment documentation\">/// </span><span class=\"keyword\">let</span> <span class=\"variable declaration\">bar</span> = <span class=\"variable\">foo</span>.<span class=\"field\">bar</span> || <span class=\"struct\">Foo</span>::<span class=\"constant\">bar</span>;\n     <span class=\"comment documentation\">///</span>\n-    <span class=\"comment documentation\">/// </span><span class=\"comment documentation\">/* multi-line\n-    </span><span class=\"comment documentation\">/// </span><span class=\"comment documentation\">       comment */</span>\n+    <span class=\"comment documentation\">/// </span><span class=\"comment\">/* multi-line\n+    </span><span class=\"comment documentation\">/// </span><span class=\"comment\">       comment */</span>\n     <span class=\"comment documentation\">///</span>\n-    <span class=\"comment documentation\">/// </span><span class=\"keyword documentation\">let</span> <span class=\"variable declaration documentation\">multi_line_string</span> = <span class=\"string_literal documentation\">\"Foo\n-    </span><span class=\"comment documentation\">/// </span><span class=\"string_literal documentation\">  bar\n-    </span><span class=\"comment documentation\">/// </span><span class=\"string_literal documentation\">         \"</span>;\n+    <span class=\"comment documentation\">/// </span><span class=\"keyword\">let</span> <span class=\"variable declaration\">multi_line_string</span> = <span class=\"string_literal\">\"Foo\n+    </span><span class=\"comment documentation\">/// </span><span class=\"string_literal\">  bar\n+    </span><span class=\"comment documentation\">/// </span><span class=\"string_literal\">         \"</span>;\n     <span class=\"comment documentation\">///</span>\n     <span class=\"comment documentation\">/// ```</span>\n     <span class=\"comment documentation\">///</span>\n     <span class=\"comment documentation\">/// ```rust,no_run</span>\n-    <span class=\"comment documentation\">/// </span><span class=\"keyword documentation\">let</span> <span class=\"variable declaration documentation\">foobar</span> = <span class=\"struct documentation\">Foo</span>::<span class=\"function documentation\">new</span>().<span class=\"function documentation\">bar</span>();\n+    <span class=\"comment documentation\">/// </span><span class=\"keyword\">let</span> <span class=\"variable declaration\">foobar</span> = <span class=\"struct\">Foo</span>::<span class=\"function\">new</span>().<span class=\"function\">bar</span>();\n     <span class=\"comment documentation\">/// ```</span>\n     <span class=\"comment documentation\">///</span>\n     <span class=\"comment documentation\">/// ```sh</span>"}, {"sha": "415f24a6d3a0164db8ac668dda1ecf119cee4c3c", "filename": "crates/ra_ide/src/syntax_highlighting/injection.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/66fc084a86e8f5d207d63e33173d1e203cb5ce5e/crates%2Fra_ide%2Fsrc%2Fsyntax_highlighting%2Finjection.rs", "raw_url": "https://github.com/rust-lang/rust/raw/66fc084a86e8f5d207d63e33173d1e203cb5ce5e/crates%2Fra_ide%2Fsrc%2Fsyntax_highlighting%2Finjection.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fsyntax_highlighting%2Finjection.rs?ref=66fc084a86e8f5d207d63e33173d1e203cb5ce5e", "patch": "@@ -168,7 +168,6 @@ pub(super) fn highlight_doc_comment(\n                 h.range.end() + end_offset.unwrap_or(start_offset),\n             );\n \n-            h.highlight |= HighlightModifier::Documentation;\n             stack.add(h);\n         }\n     }"}]}