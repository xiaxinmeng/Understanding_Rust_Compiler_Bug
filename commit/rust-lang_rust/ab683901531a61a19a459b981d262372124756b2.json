{"sha": "ab683901531a61a19a459b981d262372124756b2", "node_id": "C_kwDOAAsO6NoAKGFiNjgzOTAxNTMxYTYxYTE5YTQ1OWI5ODFkMjYyMzcyMTI0NzU2YjI", "commit": {"author": {"name": "Zachary Whiteley", "email": "z.n.whiteley@gmail.com", "date": "2023-06-10T08:06:51Z"}, "committer": {"name": "Zachary Whiteley", "email": "z.n.whiteley@gmail.com", "date": "2023-06-10T18:08:58Z"}, "message": "Improve documentation for `tools` profile\n\nMake the build process more beginner friendly:\n\n - Include information explaining that the stage2 toolchain should be\n   used (and not the stage1 toolchain) due to the `download-rustc`\n   setting.\n\n - Display a message when the user runs `x setup tools` explaining that\n   they should use the stage2 toolchain.", "tree": {"sha": "2c4887bd8ee0e41b1dd256de2e65509e2f901a72", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2c4887bd8ee0e41b1dd256de2e65509e2f901a72"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ab683901531a61a19a459b981d262372124756b2", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAg10yDN9g9Z2ykTejguhwRU49cyd\nyKhsVT2wt3VyxqBBwAAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQByAlrD9LKOWpsNrerExt0zdUnNvWdv9yqojs3fxhbuDluDqmIAMNBFwx34pYsEUMB\nL9XqF5vkss7J2YMknOkww=\n-----END SSH SIGNATURE-----", "payload": "tree 2c4887bd8ee0e41b1dd256de2e65509e2f901a72\nparent 788c98df5995c9fe360ba9ba5efb103ee69d05c4\nauthor Zachary Whiteley <z.n.whiteley@gmail.com> 1686384411 +0100\ncommitter Zachary Whiteley <z.n.whiteley@gmail.com> 1686420538 +0100\n\nImprove documentation for `tools` profile\n\nMake the build process more beginner friendly:\n\n - Include information explaining that the stage2 toolchain should be\n   used (and not the stage1 toolchain) due to the `download-rustc`\n   setting.\n\n - Display a message when the user runs `x setup tools` explaining that\n   they should use the stage2 toolchain.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ab683901531a61a19a459b981d262372124756b2", "html_url": "https://github.com/rust-lang/rust/commit/ab683901531a61a19a459b981d262372124756b2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ab683901531a61a19a459b981d262372124756b2/comments", "author": {"login": "zwhiteley", "id": 92469988, "node_id": "U_kgDOBYL65A", "avatar_url": "https://avatars.githubusercontent.com/u/92469988?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zwhiteley", "html_url": "https://github.com/zwhiteley", "followers_url": "https://api.github.com/users/zwhiteley/followers", "following_url": "https://api.github.com/users/zwhiteley/following{/other_user}", "gists_url": "https://api.github.com/users/zwhiteley/gists{/gist_id}", "starred_url": "https://api.github.com/users/zwhiteley/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zwhiteley/subscriptions", "organizations_url": "https://api.github.com/users/zwhiteley/orgs", "repos_url": "https://api.github.com/users/zwhiteley/repos", "events_url": "https://api.github.com/users/zwhiteley/events{/privacy}", "received_events_url": "https://api.github.com/users/zwhiteley/received_events", "type": "User", "site_admin": false}, "committer": {"login": "zwhiteley", "id": 92469988, "node_id": "U_kgDOBYL65A", "avatar_url": "https://avatars.githubusercontent.com/u/92469988?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zwhiteley", "html_url": "https://github.com/zwhiteley", "followers_url": "https://api.github.com/users/zwhiteley/followers", "following_url": "https://api.github.com/users/zwhiteley/following{/other_user}", "gists_url": "https://api.github.com/users/zwhiteley/gists{/gist_id}", "starred_url": "https://api.github.com/users/zwhiteley/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zwhiteley/subscriptions", "organizations_url": "https://api.github.com/users/zwhiteley/orgs", "repos_url": "https://api.github.com/users/zwhiteley/repos", "events_url": "https://api.github.com/users/zwhiteley/events{/privacy}", "received_events_url": "https://api.github.com/users/zwhiteley/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "788c98df5995c9fe360ba9ba5efb103ee69d05c4", "url": "https://api.github.com/repos/rust-lang/rust/commits/788c98df5995c9fe360ba9ba5efb103ee69d05c4", "html_url": "https://github.com/rust-lang/rust/commit/788c98df5995c9fe360ba9ba5efb103ee69d05c4"}], "stats": {"total": 10, "additions": 10, "deletions": 0}, "files": [{"sha": "79424f28d27b716675c89c2474b724c166cecf56", "filename": "src/bootstrap/defaults/config.tools.toml", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ab683901531a61a19a459b981d262372124756b2/src%2Fbootstrap%2Fdefaults%2Fconfig.tools.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ab683901531a61a19a459b981d262372124756b2/src%2Fbootstrap%2Fdefaults%2Fconfig.tools.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fdefaults%2Fconfig.tools.toml?ref=ab683901531a61a19a459b981d262372124756b2", "patch": "@@ -9,6 +9,8 @@ debug-logging = true\n incremental = true\n # Download rustc from CI instead of building it from source.\n # This cuts compile times by almost 60x, but means you can't modify the compiler.\n+# Using these defaults will download the stage2 compiler (see `download-rustc`\n+# setting) and the stage2 toolchain should therefore be used for these defaults.\n download-rustc = \"if-unchanged\"\n \n [build]"}, {"sha": "e13f3f0bd5eb75082d7c7b017f27b653d95bc237", "filename": "src/bootstrap/setup.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/ab683901531a61a19a459b981d262372124756b2/src%2Fbootstrap%2Fsetup.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab683901531a61a19a459b981d262372124756b2/src%2Fbootstrap%2Fsetup.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fsetup.rs?ref=ab683901531a61a19a459b981d262372124756b2", "patch": "@@ -176,6 +176,14 @@ pub fn setup(config: &Config, profile: Profile) {\n         );\n     }\n \n+    if profile == Profile::Tools {\n+        eprintln!();\n+        eprintln!(\n+            \"note: the `tools` profile sets up the `stage2` toolchain (use \\\n+            `rustup toolchain link 'name' host/build/stage2` to use rustc)\"\n+        )\n+    }\n+\n     let path = &config.config.clone().unwrap_or(PathBuf::from(\"config.toml\"));\n     setup_config_toml(path, profile, config);\n }"}]}