{"sha": "ae9a62633aa0c92f826ffe0d82e9e03b41a66de1", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFlOWE2MjYzM2FhMGM5MmY4MjZmZmUwZDgyZTllMDNiNDFhNjZkZTE=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-11-15T17:02:04Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-11-15T17:02:04Z"}, "message": "Rollup merge of #66441 - RalfJung:seh, r=oli-obk\n\nlibpanic_unwind for Miri: make sure we have the SEH lang items when needed\n\nr? @oli-obk  @alexcrichton This is required to fix the Miri toolstate. Turns out rustc complains when doing codegen for MSVC and these lang items do not exist. For now `cfg(miri)` needs to still be able to codegen (we [plan to change that](https://github.com/rust-lang/miri/pull/1048#issuecomment-554108470) but that's a larger project requiring improvements to xargo and maybe also cargo; that should not block fixing the toolstate). Yes, this is a hack, but it is inside `cfg(miri)` so I hope this is okay.\n\nCc @Aaron1011", "tree": {"sha": "8769a018122190208091ba68254dffe90a94a2ec", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8769a018122190208091ba68254dffe90a94a2ec"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ae9a62633aa0c92f826ffe0d82e9e03b41a66de1", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdztoNCRBK7hj4Ov3rIwAAdHIIAChSoO4B1ElcJ9F8CsdS5PHC\nFdfUPDTRI0TFsKEZfqmfWIzU1bDQYfH3K1AZIYgUia6t/rZ+n5VwOjb48mGeOvVj\n8zcD32RBbJYKD2QwDzR3byhE+vWFT/Aek+eDZB+HySQ7/SZs8NHPjwJkUn7wpyWA\nSK8BV8fzwV0KIKImdBtBATXzmnP1Xb64nuGZHMl6wAQvSrgPjTGJ/bVQRrhQhaPn\nbN4bAz5URCDZdaV1fva1BZs+MiHsH0W8S63/8OBrqDy5PPFhg/MTIYA3F6oRNyYI\nUDQMI0F0hkarp+UzLgOOLSI99RpHN4Oe5ji/+LNNEvhP/oH6A6X/B/ki47jk9F4=\n=pgZj\n-----END PGP SIGNATURE-----\n", "payload": "tree 8769a018122190208091ba68254dffe90a94a2ec\nparent ae0c8b5f09f101d854bb5cb7fa9025053c394339\nparent 065e1b8d8a68efeaaa4eb603e66fc937ae12b1b0\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1573837324 +0100\ncommitter GitHub <noreply@github.com> 1573837324 +0100\n\nRollup merge of #66441 - RalfJung:seh, r=oli-obk\n\nlibpanic_unwind for Miri: make sure we have the SEH lang items when needed\n\nr? @oli-obk  @alexcrichton This is required to fix the Miri toolstate. Turns out rustc complains when doing codegen for MSVC and these lang items do not exist. For now `cfg(miri)` needs to still be able to codegen (we [plan to change that](https://github.com/rust-lang/miri/pull/1048#issuecomment-554108470) but that's a larger project requiring improvements to xargo and maybe also cargo; that should not block fixing the toolstate). Yes, this is a hack, but it is inside `cfg(miri)` so I hope this is okay.\n\nCc @Aaron1011\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ae9a62633aa0c92f826ffe0d82e9e03b41a66de1", "html_url": "https://github.com/rust-lang/rust/commit/ae9a62633aa0c92f826ffe0d82e9e03b41a66de1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ae9a62633aa0c92f826ffe0d82e9e03b41a66de1/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ae0c8b5f09f101d854bb5cb7fa9025053c394339", "url": "https://api.github.com/repos/rust-lang/rust/commits/ae0c8b5f09f101d854bb5cb7fa9025053c394339", "html_url": "https://github.com/rust-lang/rust/commit/ae0c8b5f09f101d854bb5cb7fa9025053c394339"}, {"sha": "065e1b8d8a68efeaaa4eb603e66fc937ae12b1b0", "url": "https://api.github.com/repos/rust-lang/rust/commits/065e1b8d8a68efeaaa4eb603e66fc937ae12b1b0", "html_url": "https://github.com/rust-lang/rust/commit/065e1b8d8a68efeaaa4eb603e66fc937ae12b1b0"}], "stats": {"total": 5, "additions": 5, "deletions": 0}, "files": [{"sha": "5f345c2133f6b5c2313f3c7c99fcc65907a443f5", "filename": "src/libpanic_unwind/lib.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/ae9a62633aa0c92f826ffe0d82e9e03b41a66de1/src%2Flibpanic_unwind%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ae9a62633aa0c92f826ffe0d82e9e03b41a66de1/src%2Flibpanic_unwind%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibpanic_unwind%2Flib.rs?ref=ae9a62633aa0c92f826ffe0d82e9e03b41a66de1", "patch": "@@ -39,6 +39,11 @@ cfg_if::cfg_if! {\n     if #[cfg(miri)] {\n         #[path = \"miri.rs\"]\n         mod imp;\n+        // On MSVC we need the SEH lang items as well...\n+        // This should match the conditions of the `seh.rs` import below.\n+        #[cfg(all(target_env = \"msvc\", not(target_arch = \"aarch64\")))]\n+        #[allow(unused)]\n+        mod seh;\n     } else if #[cfg(target_os = \"emscripten\")] {\n         #[path = \"emcc.rs\"]\n         mod imp;"}]}