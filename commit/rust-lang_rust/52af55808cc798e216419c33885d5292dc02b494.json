{"sha": "52af55808cc798e216419c33885d5292dc02b494", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUyYWY1NTgwOGNjNzk4ZTIxNjQxOWMzMzg4NWQ1MjkyZGMwMmI0OTQ=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2018-03-07T02:01:14Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2018-03-07T15:09:53Z"}, "message": "Rollup merge of #48802 - frewsxcv:frewsxcv-rm-python-zigg, r=alexcrichton\n\nRemove unused 'src/etc/ziggurat_tables.py' Python script.\n\nThis Python script was used to generate a `ziggurat_tables.rs` file in\nlibrand, but librand was moved out of the repo.\n\n* https://github.com/rust-lang/rust/commits/master/src/librand/distributions/ziggurat_tables.rs\n* https://github.com/rust-lang-nursery/rand/blob/master/utils/ziggurat_tables.py", "tree": {"sha": "f2b1289743ac061724d948d0d5593a7e4bf9ae75", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f2b1289743ac061724d948d0d5593a7e4bf9ae75"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/52af55808cc798e216419c33885d5292dc02b494", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/52af55808cc798e216419c33885d5292dc02b494", "html_url": "https://github.com/rust-lang/rust/commit/52af55808cc798e216419c33885d5292dc02b494", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/52af55808cc798e216419c33885d5292dc02b494/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "05ebc19de3cf1a35399097875bbd7f676a4678be", "url": "https://api.github.com/repos/rust-lang/rust/commits/05ebc19de3cf1a35399097875bbd7f676a4678be", "html_url": "https://github.com/rust-lang/rust/commit/05ebc19de3cf1a35399097875bbd7f676a4678be"}, {"sha": "3a17f293b59a966b32652a1b3927fa9a79562441", "url": "https://api.github.com/repos/rust-lang/rust/commits/3a17f293b59a966b32652a1b3927fa9a79562441", "html_url": "https://github.com/rust-lang/rust/commit/3a17f293b59a966b32652a1b3927fa9a79562441"}], "stats": {"total": 127, "additions": 0, "deletions": 127}, "files": [{"sha": "762f9565b7802e41a93ca3e693d96ea825fb03c2", "filename": "src/etc/ziggurat_tables.py", "status": "removed", "additions": 0, "deletions": 127, "changes": 127, "blob_url": "https://github.com/rust-lang/rust/blob/05ebc19de3cf1a35399097875bbd7f676a4678be/src%2Fetc%2Fziggurat_tables.py", "raw_url": "https://github.com/rust-lang/rust/raw/05ebc19de3cf1a35399097875bbd7f676a4678be/src%2Fetc%2Fziggurat_tables.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fziggurat_tables.py?ref=05ebc19de3cf1a35399097875bbd7f676a4678be", "patch": "@@ -1,127 +0,0 @@\n-#!/usr/bin/env python\n-#\n-# Copyright 2013 The Rust Project Developers. See the COPYRIGHT\n-# file at the top-level directory of this distribution and at\n-# http://rust-lang.org/COPYRIGHT.\n-#\n-# Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-# http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-# <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-# option. This file may not be copied, modified, or distributed\n-# except according to those terms.\n-\n-# This creates the tables used for distributions implemented using the\n-# ziggurat algorithm in `rand::distributions;`. They are\n-# (basically) the tables as used in the ZIGNOR variant (Doornik 2005).\n-# They are changed rarely, so the generated file should be checked in\n-# to git.\n-#\n-# It creates 3 tables: X as in the paper, F which is f(x_i), and\n-# F_DIFF which is f(x_i) - f(x_{i-1}). The latter two are just cached\n-# values which is not done in that paper (but is done in other\n-# variants). Note that the adZigR table is unnecessary because of\n-# algebra.\n-#\n-# It is designed to be compatible with Python 2 and 3.\n-\n-from math import exp, sqrt, log, floor\n-import random\n-\n-# The order should match the return value of `tables`\n-TABLE_NAMES = ['X', 'F']\n-\n-# The actual length of the table is 1 more, to stop\n-# index-out-of-bounds errors. This should match the bitwise operation\n-# to find `i` in `zigurrat` in `libstd/rand/mod.rs`. Also the *_R and\n-# *_V constants below depend on this value.\n-TABLE_LEN = 256\n-\n-# equivalent to `zigNorInit` in Doornik2005, but generalised to any\n-# distribution. r = dR, v = dV, f = probability density function,\n-# f_inv = inverse of f\n-def tables(r, v, f, f_inv):\n-    # compute the x_i\n-    xvec = [0]*(TABLE_LEN+1)\n-\n-    xvec[0] = v / f(r)\n-    xvec[1] = r\n-\n-    for i in range(2, TABLE_LEN):\n-        last = xvec[i-1]\n-        xvec[i] = f_inv(v / last + f(last))\n-\n-    # cache the f's\n-    fvec = [0]*(TABLE_LEN+1)\n-    for i in range(TABLE_LEN+1):\n-        fvec[i] = f(xvec[i])\n-\n-    return xvec, fvec\n-\n-# Distributions\n-# N(0, 1)\n-def norm_f(x):\n-    return exp(-x*x/2.0)\n-def norm_f_inv(y):\n-    return sqrt(-2.0*log(y))\n-\n-NORM_R = 3.6541528853610088\n-NORM_V = 0.00492867323399\n-\n-NORM = tables(NORM_R, NORM_V,\n-              norm_f, norm_f_inv)\n-\n-# Exp(1)\n-def exp_f(x):\n-    return exp(-x)\n-def exp_f_inv(y):\n-    return -log(y)\n-\n-EXP_R = 7.69711747013104972\n-EXP_V = 0.0039496598225815571993\n-\n-EXP = tables(EXP_R, EXP_V,\n-             exp_f, exp_f_inv)\n-\n-\n-# Output the tables/constants/types\n-\n-def render_static(name, type, value):\n-    # no space or\n-    return 'pub static %s: %s =%s;\\n' % (name, type, value)\n-\n-# static `name`: [`type`, .. `len(values)`] =\n-#     [values[0], ..., values[3],\n-#      values[4], ..., values[7],\n-#      ... ];\n-def render_table(name, values):\n-    rows = []\n-    # 4 values on each row\n-    for i in range(0, len(values), 4):\n-        row = values[i:i+4]\n-        rows.append(', '.join('%.18f' % f for f in row))\n-\n-    rendered = '\\n    [%s]' % ',\\n     '.join(rows)\n-    return render_static(name, '[f64, .. %d]' % len(values), rendered)\n-\n-\n-with open('ziggurat_tables.rs', 'w') as f:\n-    f.write('''// Copyright 2013 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n-// Tables for distributions which are sampled using the ziggurat\n-// algorithm. Autogenerated by `ziggurat_tables.py`.\n-\n-pub type ZigTable = &\\'static [f64, .. %d];\n-'''  % (TABLE_LEN + 1))\n-    for name, tables, r in [('NORM', NORM, NORM_R),\n-                            ('EXP', EXP, EXP_R)]:\n-        f.write(render_static('ZIG_%s_R' % name, 'f64', ' %.18f' % r))\n-        for (tabname, table) in zip(TABLE_NAMES, tables):\n-            f.write(render_table('ZIG_%s_%s' % (name, tabname), table))"}]}