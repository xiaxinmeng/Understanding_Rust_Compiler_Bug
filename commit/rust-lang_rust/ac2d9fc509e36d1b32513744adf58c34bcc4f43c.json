{"sha": "ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "node_id": "C_kwDOAAsO6NoAKGFjMmQ5ZmM1MDllMzZkMWIzMjUxMzc0NGFkZjU4YzM0YmNjNGY0M2M", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-09-21T19:25:49Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-09-21T19:25:49Z"}, "message": "Auto merge of #89103 - Mark-Simulacrum:migrate-2021, r=estebank\n\nMigrate in-tree crates to 2021\n\nThis replaces #89075 (cherry picking some of the commits from there), and closes #88637 and fixes #89074.\n\nIt excludes a migration of the library crates for now (see tidy diff) because we have some pending bugs around macro spans to fix there.\n\nI instrumented bootstrap during the migration to make sure all crates moved from 2018 to 2021 had the compatibility warnings applied first.\n\nOriginally, the intent was to support cargo fix --edition within bootstrap, but this proved fairly difficult to pull off. We'd need to architect the check functionality to support running cargo check and cargo fix within the same x.py invocation, and only resetting sysroots on check. Further, it was found that cargo fix doesn't behave too well with \"not quite workspaces\", such as Clippy which has several crates. Bootstrap runs with --manifest-path ... for all the tools, and this makes cargo fix only attempt migration for that crate. We can't use e.g. --workspace due to needing to maintain sysroots for different phases of compilation appropriately.\n\nIt is recommended to skip the mass migration of Cargo.toml's to 2021 for review purposes; you can also use `git diff d6cd2c6c877110748296760aefddc21a0ea1d316 -I'^edition = .20...$'` to ignore the edition = 2018/21 lines in the diff.", "tree": {"sha": "18984ef0d3874ed5f4827165eeff05c20e677446", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/18984ef0d3874ed5f4827165eeff05c20e677446"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "html_url": "https://github.com/rust-lang/rust/commit/ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "840acd378a273dab6798352d3d6a087fa09e4806", "url": "https://api.github.com/repos/rust-lang/rust/commits/840acd378a273dab6798352d3d6a087fa09e4806", "html_url": "https://github.com/rust-lang/rust/commit/840acd378a273dab6798352d3d6a087fa09e4806"}, {"sha": "3b896796719ed1e151d507b4bf2ea635a89cda9e", "url": "https://api.github.com/repos/rust-lang/rust/commits/3b896796719ed1e151d507b4bf2ea635a89cda9e", "html_url": "https://github.com/rust-lang/rust/commit/3b896796719ed1e151d507b4bf2ea635a89cda9e"}], "stats": {"total": 337, "additions": 185, "deletions": 152}, "files": [{"sha": "277cf0f51d378afa6df85ec3fcbdf4f3a1f16a37", "filename": "compiler/rustc/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc-main\"\n version = \"0.0.0\"\n-edition = '2018'\n+edition = \"2021\"\n \n [dependencies]\n rustc_driver = { path = \"../rustc_driver\" }"}, {"sha": "bb01d4f51b899d8e1329668951d53f59fa87ea9a", "filename": "compiler/rustc_apfloat/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_apfloat%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_apfloat%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_apfloat%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_apfloat\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [dependencies]\n bitflags = \"1.2.1\""}, {"sha": "33ccd0445030f7e0f315a2cee1b409a65ef9f142", "filename": "compiler/rustc_arena/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_arena%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_arena%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_arena%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_arena\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [dependencies]\n rustc_data_structures = { path = \"../rustc_data_structures\" }"}, {"sha": "58b967a370415741c3f0ba94c5cd1af099070006", "filename": "compiler/rustc_ast/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_ast%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_ast%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_ast\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n doctest = false"}, {"sha": "f4859ee4ae91f48133fe8684de01436d86dcb416", "filename": "compiler/rustc_ast_lowering/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_ast_lowering%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_ast_lowering%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast_lowering%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_ast_lowering\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n doctest = false"}, {"sha": "9312a68bc600c15d75ff721b3088d4c4e56c006a", "filename": "compiler/rustc_ast_passes/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_ast_passes%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_ast_passes%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast_passes%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_ast_passes\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [dependencies]\n itertools = \"0.9\""}, {"sha": "29f2be4cf46486d4b46497edf6d0b715bad01d71", "filename": "compiler/rustc_ast_pretty/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_ast_pretty%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_ast_pretty%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast_pretty%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_ast_pretty\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n doctest = false"}, {"sha": "ba310a6860e82386214c9205ac2f21aed3d52d89", "filename": "compiler/rustc_attr/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_attr%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_attr%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_attr%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_attr\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n doctest = false"}, {"sha": "75e9c69af4e5c9d8bfab4a5963c327ee46ab03e0", "filename": "compiler/rustc_borrowck/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_borrowck%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_borrowck%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_borrowck%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_borrowck\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n doctest = false"}, {"sha": "fd34f947f72c0eec04edab81c958efab63234d19", "filename": "compiler/rustc_builtin_macros/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_builtin_macros%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_builtin_macros%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_builtin_macros%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_builtin_macros\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n doctest = false"}, {"sha": "61d40702a32842d2769040023e6a59f0c1c2fcc3", "filename": "compiler/rustc_codegen_cranelift/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_codegen_cranelift%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_codegen_cranelift%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_cranelift%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_codegen_cranelift\"\n version = \"0.1.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n crate-type = [\"dylib\"]"}, {"sha": "89e0cb8d90ecd6c58bef18c764a66f9cc59b8654", "filename": "compiler/rustc_codegen_cranelift/src/bin/cg_clif_build_sysroot.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_codegen_cranelift%2Fsrc%2Fbin%2Fcg_clif_build_sysroot.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_codegen_cranelift%2Fsrc%2Fbin%2Fcg_clif_build_sysroot.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_cranelift%2Fsrc%2Fbin%2Fcg_clif_build_sysroot.rs?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -8,7 +8,6 @@\n \n #![feature(rustc_private)]\n \n-extern crate rustc_data_structures;\n extern crate rustc_driver;\n extern crate rustc_interface;\n extern crate rustc_session;"}, {"sha": "3f02443458188caf558798b62cafee72ef154454", "filename": "compiler/rustc_codegen_llvm/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_codegen_llvm%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_codegen_llvm%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_llvm%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_codegen_llvm\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n test = false"}, {"sha": "0713e167c53b8b73a7962f0bd2100e13c60444c3", "filename": "compiler/rustc_codegen_ssa/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_codegen_ssa%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_codegen_ssa%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_ssa%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_codegen_ssa\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n test = false"}, {"sha": "a51273732ae6f8b335c4dfb137770dfdfd6f1232", "filename": "compiler/rustc_const_eval/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_const_eval%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_const_eval%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_const_eval%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_const_eval\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n doctest = false"}, {"sha": "fc69770bf6a306f68bd89aa3f2ff60005507b4e2", "filename": "compiler/rustc_const_eval/src/interpret/validity.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_const_eval%2Fsrc%2Finterpret%2Fvalidity.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_const_eval%2Fsrc%2Finterpret%2Fvalidity.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_const_eval%2Fsrc%2Finterpret%2Fvalidity.rs?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -77,7 +77,7 @@ macro_rules! throw_validation_failure {\n ///\n macro_rules! try_validation {\n     ($e:expr, $where:expr,\n-    $( $( $p:pat )|+ => { $( $what_fmt:expr ),+ } $( expected { $( $expected_fmt:expr ),+ } )? ),+ $(,)?\n+    $( $( $p:pat_param )|+ => { $( $what_fmt:expr ),+ } $( expected { $( $expected_fmt:expr ),+ } )? ),+ $(,)?\n     ) => {{\n         match $e {\n             Ok(x) => x,"}, {"sha": "49962570129704a91392ec7117e379e53d0aa040", "filename": "compiler/rustc_data_structures/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_data_structures%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_data_structures%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_data_structures%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_data_structures\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n doctest = false"}, {"sha": "6721e00027d42383889284dc3898a919827e2a06", "filename": "compiler/rustc_driver/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_driver%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_driver%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_driver%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_driver\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n crate-type = [\"dylib\"]"}, {"sha": "7d5f3e4672a0fe57bf28d2c2210579b4d29232ca", "filename": "compiler/rustc_error_codes/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_error_codes%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_error_codes%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_error_codes%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,4 +1,4 @@\n [package]\n name = \"rustc_error_codes\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\""}, {"sha": "4846dc43605f8f0f07be62f63f3afbb7030c7f52", "filename": "compiler/rustc_errors/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_errors%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_errors%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_errors%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_errors\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n doctest = false"}, {"sha": "03e8534ef289f6c6c6b303c9283ddaed8bdde120", "filename": "compiler/rustc_errors/src/lib.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_errors%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_errors%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_errors%2Fsrc%2Flib.rs?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1028,15 +1028,13 @@ impl HandlerInner {\n             let mut error_codes = self\n                 .emitted_diagnostic_codes\n                 .iter()\n-                .filter_map(|x| {\n-                    match &x {\n+                .filter_map(|x| match &x {\n                     DiagnosticId::Error(s)\n-                        if let Ok(Some(_explanation)) = registry.try_find_description(s) =>\n+                        if registry.try_find_description(s).map_or(false, |o| o.is_some()) =>\n                     {\n                         Some(s.clone())\n                     }\n                     _ => None,\n-                }\n                 })\n                 .collect::<Vec<_>>();\n             if !error_codes.is_empty() {"}, {"sha": "45237ab2e9f2502b32f48afd13dbf582c9e7c7a7", "filename": "compiler/rustc_expand/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_expand%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_expand%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_expand%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_expand\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n build = false\n \n [lib]"}, {"sha": "3d8d0db20d122d8decb88ac75fa6b48a083d3c05", "filename": "compiler/rustc_feature/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_feature%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_feature%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_feature%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_feature\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n doctest = false"}, {"sha": "34c3fe2a005c81ae4ead69a38b967107ee8635c2", "filename": "compiler/rustc_fs_util/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_fs_util%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_fs_util%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_fs_util%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,4 +1,4 @@\n [package]\n name = \"rustc_fs_util\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\""}, {"sha": "d657fdb1a778947df30d8c013138df5c075a9a87", "filename": "compiler/rustc_graphviz/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_graphviz%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_graphviz%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_graphviz%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,4 +1,4 @@\n [package]\n name = \"rustc_graphviz\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\""}, {"sha": "3b6e6db72d1f7128e42a099c2c2fef6001e9c5f1", "filename": "compiler/rustc_hir/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_hir%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_hir%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_hir\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n doctest = false"}, {"sha": "46a8e7deeed047bcccd932c9f7cd501201c3c312", "filename": "compiler/rustc_hir_pretty/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_hir_pretty%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_hir_pretty%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_pretty%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_hir_pretty\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n doctest = false"}, {"sha": "dece752c1945f693bdd40129d41b019f699ac441", "filename": "compiler/rustc_incremental/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_incremental%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_incremental%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_incremental%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_incremental\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n doctest = false"}, {"sha": "b984a1321e0aa06e0e7e4887d899ce2a3152ef0d", "filename": "compiler/rustc_index/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_index%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_index%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_index%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_index\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n doctest = false"}, {"sha": "f87ea43b1a72c8720360eedbec17d6e42b5b733d", "filename": "compiler/rustc_infer/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_infer%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_infer%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_infer%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_infer\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n doctest = false"}, {"sha": "07af2201f5fc2a1222dc428abafc523957d1d3d7", "filename": "compiler/rustc_interface/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_interface%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_interface%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_interface%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_interface\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n doctest = false"}, {"sha": "3d90a6c9345362d5c4875202661d8a813eeee1e5", "filename": "compiler/rustc_interface/src/util.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_interface%2Fsrc%2Futil.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_interface%2Fsrc%2Futil.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_interface%2Fsrc%2Futil.rs?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -125,6 +125,7 @@ pub fn scoped_thread<F: FnOnce() -> R + Send, R: Send>(cfg: thread::Builder, f:\n     let result_ptr = Ptr(&mut result as *mut _ as *mut ());\n \n     let thread = cfg.spawn(move || {\n+        let _ = (&run, &result_ptr);\n         let run = unsafe { (*(run.0 as *mut Option<F>)).take().unwrap() };\n         let result = unsafe { &mut *(result_ptr.0 as *mut Option<R>) };\n         *result = Some(run());"}, {"sha": "60c146f457b42afc0dcd2f849d1aba70476f7836", "filename": "compiler/rustc_lexer/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_lexer%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_lexer%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_lexer%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -2,7 +2,7 @@\n name = \"rustc_lexer\"\n version = \"0.1.0\"\n license = \"MIT OR Apache-2.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n repository = \"https://github.com/rust-lang/rust/\"\n description = \"\"\""}, {"sha": "414fcbeb9e415d57706461952f1a126fcbce78df", "filename": "compiler/rustc_lint/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_lint%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_lint%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_lint%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_lint\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [dependencies]\n if_chain = \"1.0\""}, {"sha": "1facd973754331c08da5d1c4af5b92d801d29d2a", "filename": "compiler/rustc_lint/src/array_into_iter.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_lint%2Fsrc%2Farray_into_iter.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_lint%2Fsrc%2Farray_into_iter.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_lint%2Fsrc%2Farray_into_iter.rs?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -13,7 +13,7 @@ declare_lint! {\n     ///\n     /// ### Example\n     ///\n-    /// ```rust\n+    /// ```rust,edition2018\n     /// # #![allow(unused)]\n     /// [1, 2, 3].into_iter().for_each(|n| { *n; });\n     /// ```"}, {"sha": "e1bcc3aa52bc643dae02e9b7eed4385b0030c457", "filename": "compiler/rustc_lint/src/builtin.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_lint%2Fsrc%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_lint%2Fsrc%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_lint%2Fsrc%2Fbuiltin.rs?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1686,7 +1686,7 @@ declare_lint! {\n     ///\n     /// ### Example\n     ///\n-    /// ```rust\n+    /// ```rust,edition2018\n     /// let x = 123;\n     /// match x {\n     ///     0...100 => {}"}, {"sha": "ae9c5ce5c3c2bdeff8c4f31dbecb81ebe128ce84", "filename": "compiler/rustc_lint/src/non_fmt_panic.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_lint%2Fsrc%2Fnon_fmt_panic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_lint%2Fsrc%2Fnon_fmt_panic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_lint%2Fsrc%2Fnon_fmt_panic.rs?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -18,7 +18,7 @@ declare_lint! {\n     ///\n     /// ### Example\n     ///\n-    /// ```rust,no_run\n+    /// ```rust,no_run,edition2018\n     /// panic!(\"{}\");\n     /// panic!(123);\n     /// ```"}, {"sha": "798d50819e2d8b8449c5a74c10e9e9e97aee2bd5", "filename": "compiler/rustc_lint_defs/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_lint_defs%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_lint_defs%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_lint_defs%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_lint_defs\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [dependencies]\n rustc_ast = { path = \"../rustc_ast\" }"}, {"sha": "b14abb9e5db48a46dce242ffac741a85de944d00", "filename": "compiler/rustc_lint_defs/src/builtin.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_lint_defs%2Fsrc%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_lint_defs%2Fsrc%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_lint_defs%2Fsrc%2Fbuiltin.rs?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1584,7 +1584,7 @@ declare_lint! {\n     ///\n     /// ### Example\n     ///\n-    /// ```rust\n+    /// ```rust,edition2018\n     /// trait Trait { }\n     ///\n     /// fn takes_trait_object(_: Box<Trait>) {\n@@ -3313,7 +3313,7 @@ declare_lint! {\n     ///\n     /// ### Example\n     ///\n-    /// ```rust,compile_fail\n+    /// ```rust,edition2018,compile_fail\n     /// #![deny(rust_2021_prefixes_incompatible_syntax)]\n     ///\n     /// macro_rules! m {\n@@ -3333,6 +3333,8 @@ declare_lint! {\n     ///\n     /// This lint suggests to add whitespace between the `z` and `\"hey\"` tokens\n     /// to keep them separated in Rust 2021.\n+    // Allow this lint -- rustdoc doesn't yet support threading edition into this lint's parser.\n+    #[allow(rustdoc::invalid_rust_codeblocks)]\n     pub RUST_2021_PREFIXES_INCOMPATIBLE_SYNTAX,\n     Allow,\n     \"identifiers that will be parsed as a prefix in Rust 2021\","}, {"sha": "d8dfcc84e68da444575638816b3ae1ba5a104718", "filename": "compiler/rustc_llvm/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_llvm%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_llvm%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_llvm%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_llvm\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [features]\n static-libstdcpp = []"}, {"sha": "a9192be4d6ef43f00574dac372fc45970d74d0f4", "filename": "compiler/rustc_macros/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_macros%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_macros%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_macros%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_macros\"\n version = \"0.1.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n proc-macro = true"}, {"sha": "f71fefd17992083d4bd026199d7c3ca4e10e07fb", "filename": "compiler/rustc_metadata/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_metadata%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_metadata%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_metadata%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_metadata\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n doctest = false"}, {"sha": "8c41fd9c4a2373901e72c48d407fff782462a63f", "filename": "compiler/rustc_metadata/src/dependency_format.rs", "status": "modified", "additions": 22, "deletions": 22, "changes": 44, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_metadata%2Fsrc%2Fdependency_format.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_metadata%2Fsrc%2Fdependency_format.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_metadata%2Fsrc%2Fdependency_format.rs?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -11,35 +11,35 @@\n //! should be used when linking each output type requested in this session. This\n //! generally follows this set of rules:\n //!\n-//!     1. Each library must appear exactly once in the output.\n-//!     2. Each rlib contains only one library (it's just an object file)\n-//!     3. Each dylib can contain more than one library (due to static linking),\n-//!        and can also bring in many dynamic dependencies.\n+//! 1. Each library must appear exactly once in the output.\n+//! 2. Each rlib contains only one library (it's just an object file)\n+//! 3. Each dylib can contain more than one library (due to static linking),\n+//!    and can also bring in many dynamic dependencies.\n //!\n //! With these constraints in mind, it's generally a very difficult problem to\n //! find a solution that's not \"all rlibs\" or \"all dylibs\". I have suspicions\n //! that NP-ness may come into the picture here...\n //!\n //! The current selection algorithm below looks mostly similar to:\n //!\n-//!     1. If static linking is required, then require all upstream dependencies\n-//!        to be available as rlibs. If not, generate an error.\n-//!     2. If static linking is requested (generating an executable), then\n-//!        attempt to use all upstream dependencies as rlibs. If any are not\n-//!        found, bail out and continue to step 3.\n-//!     3. Static linking has failed, at least one library must be dynamically\n-//!        linked. Apply a heuristic by greedily maximizing the number of\n-//!        dynamically linked libraries.\n-//!     4. Each upstream dependency available as a dynamic library is\n-//!        registered. The dependencies all propagate, adding to a map. It is\n-//!        possible for a dylib to add a static library as a dependency, but it\n-//!        is illegal for two dylibs to add the same static library as a\n-//!        dependency. The same dylib can be added twice. Additionally, it is\n-//!        illegal to add a static dependency when it was previously found as a\n-//!        dylib (and vice versa)\n-//!     5. After all dynamic dependencies have been traversed, re-traverse the\n-//!        remaining dependencies and add them statically (if they haven't been\n-//!        added already).\n+//! 1. If static linking is required, then require all upstream dependencies\n+//!    to be available as rlibs. If not, generate an error.\n+//! 2. If static linking is requested (generating an executable), then\n+//!    attempt to use all upstream dependencies as rlibs. If any are not\n+//!    found, bail out and continue to step 3.\n+//! 3. Static linking has failed, at least one library must be dynamically\n+//!    linked. Apply a heuristic by greedily maximizing the number of\n+//!    dynamically linked libraries.\n+//! 4. Each upstream dependency available as a dynamic library is\n+//!    registered. The dependencies all propagate, adding to a map. It is\n+//!    possible for a dylib to add a static library as a dependency, but it\n+//!    is illegal for two dylibs to add the same static library as a\n+//!    dependency. The same dylib can be added twice. Additionally, it is\n+//!    illegal to add a static dependency when it was previously found as a\n+//!    dylib (and vice versa)\n+//! 5. After all dynamic dependencies have been traversed, re-traverse the\n+//!    remaining dependencies and add them statically (if they haven't been\n+//!    added already).\n //!\n //! While not perfect, this algorithm should help support use-cases such as leaf\n //! dependencies being static while the larger tree of inner dependencies are"}, {"sha": "b1fcc34bee1d7d68884b397c8d817d1a9ada9115", "filename": "compiler/rustc_middle/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_middle%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_middle%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_middle\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n doctest = false"}, {"sha": "e271f59da87967fe2c8940425ab2798ea08e2291", "filename": "compiler/rustc_middle/src/middle/region.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_middle%2Fsrc%2Fmiddle%2Fregion.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_middle%2Fsrc%2Fmiddle%2Fregion.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fmiddle%2Fregion.rs?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -257,7 +257,8 @@ pub struct ScopeTree {\n     /// ```\n     ///\n     /// With the HIR tree (calls numbered for expository purposes)\n-    /// ```\n+    ///\n+    /// ```text\n     ///     Call#0(foo, [Call#1(f), Yield(y), Call#2(bar, Call#3(g))])\n     /// ```\n     ///"}, {"sha": "998b80a36c2f7eb73ecb7e920eeb6969cfa89450", "filename": "compiler/rustc_mir_build/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_mir_build%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_mir_build%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir_build%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_mir_build\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n doctest = false"}, {"sha": "ffd7e3cd06bd266d1e797fb981811cfe1459cbe7", "filename": "compiler/rustc_mir_dataflow/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_mir_dataflow%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_mir_dataflow%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir_dataflow%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_mir_dataflow\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n doctest = false"}, {"sha": "bde4e215a2a61629d3ea8fef2261490fe8926cdf", "filename": "compiler/rustc_mir_transform/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_mir_transform%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_mir_transform%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir_transform%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_mir_transform\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n doctest = false"}, {"sha": "f5e8b65656a3ebe981bf8242e9f85caa97cf0373", "filename": "compiler/rustc_mir_transform/src/coverage/test_macros/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_mir_transform%2Fsrc%2Fcoverage%2Ftest_macros%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_mir_transform%2Fsrc%2Fcoverage%2Ftest_macros%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir_transform%2Fsrc%2Fcoverage%2Ftest_macros%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"coverage_test_macros\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n proc-macro = true"}, {"sha": "f812afe6b62ba9cd88c6e660c056f94abc9065c1", "filename": "compiler/rustc_monomorphize/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_monomorphize%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_monomorphize%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_monomorphize%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_monomorphize\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n doctest = false"}, {"sha": "1decaaa955f023075367e523b4e801eec49a2cb1", "filename": "compiler/rustc_parse/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_parse%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_parse%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_parse%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_parse\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n doctest = false"}, {"sha": "aa1714e820f4862a035ce10a11946245267d060c", "filename": "compiler/rustc_parse_format/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_parse_format%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_parse_format%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_parse_format%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_parse_format\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [dependencies]\n rustc_span = { path = \"../rustc_span\" }"}, {"sha": "39e578bce7ef67eecb9287da9fc56f77770bd800", "filename": "compiler/rustc_passes/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_passes%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_passes%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_passes%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_passes\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [dependencies]\n tracing = \"0.1\""}, {"sha": "4e666e7e93d530faff9ff5e4797065376e05c45a", "filename": "compiler/rustc_plugin_impl/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_plugin_impl%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_plugin_impl%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_plugin_impl%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -2,7 +2,7 @@\n name = \"rustc_plugin_impl\"\n version = \"0.0.0\"\n build = false\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n doctest = false"}, {"sha": "d952e288a6477c46864dde961e2999dca16bf557", "filename": "compiler/rustc_privacy/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_privacy%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_privacy%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_privacy%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_privacy\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [dependencies]\n rustc_middle = { path = \"../rustc_middle\" }"}, {"sha": "89df3d4674b6b363cc471fe89329292966f3329d", "filename": "compiler/rustc_query_impl/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_query_impl%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_query_impl%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_query_impl%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_query_impl\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n doctest = false"}, {"sha": "11c18a497e5e6393d347493b2e82c327eef7cb3a", "filename": "compiler/rustc_query_system/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_query_system%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_query_system%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_query_system%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_query_system\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n doctest = false"}, {"sha": "f1d3315d6e66a95d7eace650757eb4cc063a1823", "filename": "compiler/rustc_resolve/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_resolve%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_resolve%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_resolve%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_resolve\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n test = false"}, {"sha": "15a89d82fa69626b373cc0eb40bfe7ea8fcfe874", "filename": "compiler/rustc_save_analysis/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_save_analysis%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_save_analysis%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_save_analysis%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_save_analysis\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [dependencies]\n tracing = \"0.1\""}, {"sha": "49778f82253bfddf9558b8e49f72fdc2caf4ef49", "filename": "compiler/rustc_serialize/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_serialize%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_serialize%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_serialize%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_serialize\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [dependencies]\n indexmap = \"1\""}, {"sha": "4cff21bee3dc37f4bafbbaa0ea71b87b6c9ff24d", "filename": "compiler/rustc_session/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_session%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_session%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_session%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_session\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [dependencies]\n getopts = \"0.2\""}, {"sha": "781fb8c1e5d8c8644dfe872cdb22943cb76daae1", "filename": "compiler/rustc_span/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_span%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_span%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_span%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_span\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n doctest = false"}, {"sha": "d5befa10e23638f7bd9fd7860284c8d1fa6dae36", "filename": "compiler/rustc_symbol_mangling/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_symbol_mangling%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_symbol_mangling%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_symbol_mangling%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_symbol_mangling\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n doctest = false"}, {"sha": "925813e6bb42762ff5887618910312df4e15a215", "filename": "compiler/rustc_target/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_target%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_target%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_target\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [dependencies]\n bitflags = \"1.2.1\""}, {"sha": "9a9737362c6c8017bd8063e4b3a6b5ab1704ad4a", "filename": "compiler/rustc_trait_selection/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_trait_selection%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_trait_selection%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_trait_selection\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n doctest = false"}, {"sha": "2ecc169e1cf1dd12bfed21810fdc1b5d5a18018b", "filename": "compiler/rustc_trait_selection/src/traits/specialize/specialization_graph.rs", "status": "modified", "additions": 15, "deletions": 13, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fspecialize%2Fspecialization_graph.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fspecialize%2Fspecialization_graph.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fspecialize%2Fspecialization_graph.rs?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -104,19 +104,21 @@ impl ChildrenExt for Children {\n                 let self_ty = trait_ref.self_ty();\n \n                 // FIXME: should postpone string formatting until we decide to actually emit.\n-                with_no_trimmed_paths(|| OverlapError {\n-                    with_impl: possible_sibling,\n-                    trait_desc: trait_ref.print_only_trait_path().to_string(),\n-                    // Only report the `Self` type if it has at least\n-                    // some outer concrete shell; otherwise, it's\n-                    // not adding much information.\n-                    self_desc: if self_ty.has_concrete_skeleton() {\n-                        Some(self_ty.to_string())\n-                    } else {\n-                        None\n-                    },\n-                    intercrate_ambiguity_causes: overlap.intercrate_ambiguity_causes,\n-                    involves_placeholder: overlap.involves_placeholder,\n+                with_no_trimmed_paths(|| {\n+                    OverlapError {\n+                        with_impl: possible_sibling,\n+                        trait_desc: trait_ref.print_only_trait_path().to_string(),\n+                        // Only report the `Self` type if it has at least\n+                        // some outer concrete shell; otherwise, it's\n+                        // not adding much information.\n+                        self_desc: if self_ty.has_concrete_skeleton() {\n+                            Some(self_ty.to_string())\n+                        } else {\n+                            None\n+                        },\n+                        intercrate_ambiguity_causes: overlap.intercrate_ambiguity_causes,\n+                        involves_placeholder: overlap.involves_placeholder,\n+                    }\n                 })\n             };\n "}, {"sha": "2e56a1bf6839e708d1ee90917c6fb73cf78be1db", "filename": "compiler/rustc_traits/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_traits%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_traits%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_traits%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_traits\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [dependencies]\n tracing = \"0.1\""}, {"sha": "78df95e680e005fd7fcc7c0d626f153b1dda6517", "filename": "compiler/rustc_ty_utils/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_ty_utils%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_ty_utils%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ty_utils%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_ty_utils\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [dependencies]\n tracing = \"0.1\""}, {"sha": "439e6cdf70698945a183501613650e651a60454b", "filename": "compiler/rustc_type_ir/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_type_ir%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_type_ir%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_type_ir%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_type_ir\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n doctest = false"}, {"sha": "7e570e151c5298c6431481097493273a823bdcbc", "filename": "compiler/rustc_typeck/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_typeck%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_typeck%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_typeck%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustc_typeck\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n test = false"}, {"sha": "33df541eb2ba88ccb19303722bf0193f7e04edca", "filename": "compiler/rustc_typeck/src/astconv/mod.rs", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_typeck%2Fsrc%2Fastconv%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/compiler%2Frustc_typeck%2Fsrc%2Fastconv%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_typeck%2Fsrc%2Fastconv%2Fmod.rs?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -2417,13 +2417,14 @@ impl<'o, 'tcx> dyn AstConv<'tcx> + 'o {\n         let substs = InternalSubsts::for_item(tcx, def_id, |param, _| {\n             if let Some(i) = (param.index as usize).checked_sub(generics.parent_count) {\n                 // Our own parameters are the resolved lifetimes.\n-                match param.kind {\n-                    GenericParamDefKind::Lifetime\n-                        if let hir::GenericArg::Lifetime(lifetime) = &lifetimes[i] =>\n-                    {\n+                if let GenericParamDefKind::Lifetime = param.kind {\n+                    if let hir::GenericArg::Lifetime(lifetime) = &lifetimes[i] {\n                         self.ast_region_to_region(lifetime, None).into()\n+                    } else {\n+                        bug!()\n                     }\n-                    _ => bug!(),\n+                } else {\n+                    bug!()\n                 }\n             } else {\n                 match param.kind {"}, {"sha": "1ce1f0b26db58030254cf0a903fa10d751476da3", "filename": "src/bootstrap/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Fbootstrap%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Fbootstrap%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"bootstrap\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n build = \"build.rs\"\n \n [lib]"}, {"sha": "f66f282bea933e0bfbf817f589e74c814eb3fd16", "filename": "src/bootstrap/check.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Fbootstrap%2Fcheck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Fbootstrap%2Fcheck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fcheck.rs?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -262,7 +262,7 @@ impl Step for CodegenBackend {\n         let mut cargo = builder.cargo(\n             compiler,\n             Mode::Codegen,\n-            SourceType::Submodule,\n+            SourceType::InTree,\n             target,\n             cargo_subcommand(builder.kind),\n         );"}, {"sha": "ae234fb1dc729ba9cef9b98992c44dbd88252b99", "filename": "src/bootstrap/compile.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Fbootstrap%2Fcompile.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Fbootstrap%2Fcompile.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fcompile.rs?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -817,8 +817,7 @@ impl Step for CodegenBackend {\n \n         let out_dir = builder.cargo_out(compiler, Mode::Codegen, target);\n \n-        let mut cargo =\n-            builder.cargo(compiler, Mode::Codegen, SourceType::Submodule, target, \"build\");\n+        let mut cargo = builder.cargo(compiler, Mode::Codegen, SourceType::InTree, target, \"build\");\n         cargo\n             .arg(\"--manifest-path\")\n             .arg(builder.src.join(format!(\"compiler/rustc_codegen_{}/Cargo.toml\", backend)));"}, {"sha": "272b7153111370a1a341474b84f971857fc096e4", "filename": "src/bootstrap/test.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Fbootstrap%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Fbootstrap%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Ftest.rs?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -390,7 +390,7 @@ impl Step for Rustfmt {\n             host,\n             \"test\",\n             \"src/tools/rustfmt\",\n-            SourceType::Submodule,\n+            SourceType::InTree,\n             &[],\n         );\n "}, {"sha": "d88df0e08fab3e01ef9b596bcf58629a01710301", "filename": "src/build_helper/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Fbuild_helper%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Fbuild_helper%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbuild_helper%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"build_helper\"\n version = \"0.1.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n path = \"lib.rs\""}, {"sha": "7ee19a0b6d91397540034fd1bea8a614435cacd6", "filename": "src/etc/test-float-parse/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Fetc%2Ftest-float-parse%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Fetc%2Ftest-float-parse%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Ftest-float-parse%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"test-float-parse\"\n version = \"0.1.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n publish = false\n \n [workspace]"}, {"sha": "945b2a8e9a80e75c8f011041f45f20264ce46a9a", "filename": "src/librustdoc/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Flibrustdoc%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Flibrustdoc%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustdoc\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n path = \"lib.rs\""}, {"sha": "d60699efd36cb29aeb55e650a2b1211ba72938d8", "filename": "src/rustdoc-json-types/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Frustdoc-json-types%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Frustdoc-json-types%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustdoc-json-types%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustdoc-json-types\"\n version = \"0.1.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n path = \"lib.rs\""}, {"sha": "340acff34f2ab76fd47e23f6a1792a37a95d500b", "filename": "src/tools/build-manifest/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Fbuild-manifest%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Fbuild-manifest%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fbuild-manifest%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"build-manifest\"\n version = \"0.1.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [dependencies]\n toml = \"0.5\""}, {"sha": "cf8840ff6ee8918c2f05094be17ac6ea9433dfb9", "filename": "src/tools/bump-stage0/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Fbump-stage0%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Fbump-stage0%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fbump-stage0%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"bump-stage0\"\n version = \"0.1.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n # See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html\n "}, {"sha": "bfd894e2bd27b2f2e57e104bba7c8ab3ee39e194", "filename": "src/tools/cargotest/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Fcargotest%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Fcargotest%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcargotest%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"cargotest2\"\n version = \"0.1.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [[bin]]\n name = \"cargotest\""}, {"sha": "e9426a2d9f58ce6a1ab82baae270a040c4422295", "filename": "src/tools/compiletest/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Fcompiletest%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Fcompiletest%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"compiletest\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [dependencies]\n colored = \"2\""}, {"sha": "c84b79e11e9b4ddb578f3653f31d21e660a27709", "filename": "src/tools/error_index_generator/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Ferror_index_generator%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Ferror_index_generator%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Ferror_index_generator%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"error_index_generator\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [dependencies]\n rustdoc = { path = \"../../librustdoc\" }"}, {"sha": "9a25b6c1f1c87e2eb77e90f64074bc8c00060825", "filename": "src/tools/expand-yaml-anchors/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Fexpand-yaml-anchors%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Fexpand-yaml-anchors%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fexpand-yaml-anchors%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"expand-yaml-anchors\"\n version = \"0.1.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [dependencies]\n yaml-rust = \"0.4.3\""}, {"sha": "34d3954db28dc6b5b1836889db6a35cc30c1fd16", "filename": "src/tools/html-checker/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Fhtml-checker%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Fhtml-checker%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fhtml-checker%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"html-checker\"\n version = \"0.1.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [[bin]]\n name = \"html-checker\""}, {"sha": "ccabe6483d7a41cd4941949dc09e564edc5b4db9", "filename": "src/tools/jsondocck/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Fjsondocck%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Fjsondocck%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fjsondocck%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"jsondocck\"\n version = \"0.1.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [dependencies]\n jsonpath_lib = \"0.2\""}, {"sha": "1d8f2f918823fc01876a2e559f1b59be8e7edb83", "filename": "src/tools/linkchecker/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Flinkchecker%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Flinkchecker%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Flinkchecker%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"linkchecker\"\n version = \"0.1.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [[bin]]\n name = \"linkchecker\""}, {"sha": "3578bda8276e76e2dfe3ea4d2d7e0a07394acfb0", "filename": "src/tools/lint-docs/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Flint-docs%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Flint-docs%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Flint-docs%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"lint-docs\"\n version = \"0.1.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n description = \"A script to extract the lint documentation for the rustc book.\"\n \n # See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html"}, {"sha": "fdc89a184da527ba7bb44fc28b552eb1390a46ce", "filename": "src/tools/lint-docs/src/lib.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Flint-docs%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Flint-docs%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Flint-docs%2Fsrc%2Flib.rs?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -149,6 +149,10 @@ impl<'a> LintExtractor<'a> {\n                         } else if line.starts_with(\"// \") {\n                             // Ignore comments.\n                             continue;\n+                        } else if line.starts_with(\"#[allow\") {\n+                            // Ignore allow of lints (useful for\n+                            // invalid_rust_codeblocks).\n+                            continue;\n                         } else {\n                             let name = lint_name(line).map_err(|e| {\n                                 format!("}, {"sha": "d59cd6b3d8e225834c3444d91ed29a277bf62bb4", "filename": "src/tools/remote-test-client/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Fremote-test-client%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Fremote-test-client%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fremote-test-client%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,6 +1,6 @@\n [package]\n name = \"remote-test-client\"\n version = \"0.1.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [dependencies]"}, {"sha": "e6be8530cf635ad18f23b026a32846755a42f123", "filename": "src/tools/remote-test-server/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Fremote-test-server%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Fremote-test-server%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fremote-test-server%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,6 +1,6 @@\n [package]\n name = \"remote-test-server\"\n version = \"0.1.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [dependencies]"}, {"sha": "2bb73b3262d8d7bde3509446893af75f20c3d938", "filename": "src/tools/rust-demangler/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Frust-demangler%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Frust-demangler%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Frust-demangler%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rust-demangler\"\n version = \"0.0.1\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [dependencies]\n regex = \"1.0\""}, {"sha": "de1327d74ff57f8d567b9dac4259dca434d52f57", "filename": "src/tools/rustbook/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Frustbook%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Frustbook%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Frustbook%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -2,7 +2,7 @@\n name = \"rustbook\"\n version = \"0.1.0\"\n license = \"MIT OR Apache-2.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [dependencies]\n clap = \"2.25.0\""}, {"sha": "a28cf28841e54de042dba7cf874af3983bb01fbb", "filename": "src/tools/rustc-workspace-hack/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Frustc-workspace-hack%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Frustc-workspace-hack%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Frustc-workspace-hack%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -5,7 +5,7 @@ license = 'MIT OR Apache-2.0'\n description = \"\"\"\n Hack for the compiler's own build system\n \"\"\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n path = \"lib.rs\""}, {"sha": "3d8c77d36d70dd965fcb5419aa2c08e4defe1624", "filename": "src/tools/rustdoc-themes/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Frustdoc-themes%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Frustdoc-themes%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Frustdoc-themes%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustdoc-themes\"\n version = \"0.1.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [[bin]]\n name = \"rustdoc-themes\""}, {"sha": "c4101f72cc2da64fe6faf3a17298f1e1806d091a", "filename": "src/tools/rustdoc/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Frustdoc%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Frustdoc%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Frustdoc%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"rustdoc-tool\"\n version = \"0.0.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n # Cargo adds a number of paths to the dylib search path on windows, which results in\n # the wrong rustdoc being executed. To avoid the conflicting rustdocs, we name the \"tool\""}, {"sha": "7b4667c17c8647cd3e6f7ddacf33a077df20b531", "filename": "src/tools/rustfmt/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Frustfmt%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Frustfmt%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Frustfmt%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -8,7 +8,7 @@ readme = \"README.md\"\n license = \"Apache-2.0/MIT\"\n build = \"build.rs\"\n categories = [\"development-tools\"]\n-edition = \"2018\"\n+edition = \"2021\"\n \n [[bin]]\n name = \"rustfmt\""}, {"sha": "69c8063f42e26693c441251b65210961d50feb88", "filename": "src/tools/tidy/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Ftidy%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Ftidy%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Ftidy%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"tidy\"\n version = \"0.1.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n autobins = false\n \n [dependencies]"}, {"sha": "b5e9ceddbafd166832874a26c34009ae1b363f60", "filename": "src/tools/tidy/src/edition.rs", "status": "modified", "additions": 35, "deletions": 9, "changes": 44, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Ftidy%2Fsrc%2Fedition.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Ftidy%2Fsrc%2Fedition.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Ftidy%2Fsrc%2Fedition.rs?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,10 +1,15 @@\n-//! Tidy check to ensure that crate `edition` is '2018'\n+//! Tidy check to ensure that crate `edition` is '2018' or '2021'.\n \n use std::path::Path;\n \n fn is_edition_2018(mut line: &str) -> bool {\n     line = line.trim();\n-    line == \"edition = \\\"2018\\\"\" || line == \"edition = \\'2018\\'\"\n+    line == \"edition = \\\"2018\\\"\"\n+}\n+\n+fn is_edition_2021(mut line: &str) -> bool {\n+    line = line.trim();\n+    line == \"edition = \\\"2021\\\"\"\n }\n \n pub fn check(path: &Path, bad: &mut bool) {\n@@ -13,17 +18,38 @@ pub fn check(path: &Path, bad: &mut bool) {\n         &mut |path| super::filter_dirs(path) || path.ends_with(\"src/test\"),\n         &mut |entry, contents| {\n             let file = entry.path();\n+            let filestr = file.to_string_lossy().replace(\"\\\\\", \"/\");\n             let filename = file.file_name().unwrap();\n             if filename != \"Cargo.toml\" {\n                 return;\n             }\n-            let has_edition = contents.lines().any(is_edition_2018);\n-            if !has_edition {\n-                tidy_error!(\n-                    bad,\n-                    \"{} doesn't have `edition = \\\"2018\\\"` on a separate line\",\n-                    file.display()\n-                );\n+\n+            // Library crates are not yet ready to migrate to 2021.\n+            //\n+            // The reference and rustc-dev-guide are submodules, so are left at\n+            // 2018 for now. They should be removed from this exception list\n+            // when bumped.\n+            if path.components().any(|c| c.as_os_str() == \"library\")\n+                || filestr.contains(\"src/doc/reference/style-check/Cargo.toml\")\n+                || filestr.contains(\"src/doc/rustc-dev-guide/ci/date-check/Cargo.toml\")\n+            {\n+                let has = contents.lines().any(is_edition_2018);\n+                if !has {\n+                    tidy_error!(\n+                        bad,\n+                        \"{} doesn't have `edition = \\\"2018\\\"` on a separate line\",\n+                        file.display()\n+                    );\n+                }\n+            } else {\n+                let is_2021 = contents.lines().any(is_edition_2021);\n+                if !is_2021 {\n+                    tidy_error!(\n+                        bad,\n+                        \"{} doesn't have `edition = \\\"2021\\\"` on a separate line\",\n+                        file.display()\n+                    );\n+                }\n             }\n         },\n     );"}, {"sha": "3f08165a3fc63350077d0c234a00bb07a4bcd51f", "filename": "src/tools/tier-check/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Ftier-check%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Ftier-check%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Ftier-check%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"tier-check\"\n version = \"0.1.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n license = \"MIT OR Apache-2.0\"\n \n [dependencies]"}, {"sha": "ef01877c0b94bcffff9e49148aa7be1a00c84ac8", "filename": "src/tools/unicode-table-generator/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Funicode-table-generator%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Funicode-table-generator%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Funicode-table-generator%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"unicode-bdd\"\n version = \"0.1.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n # See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html\n "}, {"sha": "73e5a91bec70a358917ff9ddf99e4c21de25cc3c", "filename": "src/tools/unstable-book-gen/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Funstable-book-gen%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Funstable-book-gen%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Funstable-book-gen%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -2,7 +2,7 @@\n name = \"unstable-book-gen\"\n version = \"0.1.0\"\n license = \"MIT OR Apache-2.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [dependencies]\n tidy = { path = \"../tidy\" }"}, {"sha": "315027279623411f8af85ed53c86550c79556d70", "filename": "src/tools/x/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Fx%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ac2d9fc509e36d1b32513744adf58c34bcc4f43c/src%2Ftools%2Fx%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fx%2FCargo.toml?ref=ac2d9fc509e36d1b32513744adf58c34bcc4f43c", "patch": "@@ -2,5 +2,5 @@\n name = \"x\"\n version = \"0.1.0\"\n description = \"Run x.py slightly more conveniently\"\n-edition = \"2018\"\n+edition = \"2021\"\n publish = false"}]}