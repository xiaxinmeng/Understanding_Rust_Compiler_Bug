{"sha": "f7c93c07b8533e1d38395cc2d9d37cd2d9bec978", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY3YzkzYzA3Yjg1MzNlMWQzODM5NWNjMmQ5ZDM3Y2QyZDliZWM5Nzg=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2016-12-06T03:45:49Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2016-12-06T03:45:49Z"}, "message": "Auto merge of #38128 - cardoe:req-cmake-only-for-llvm, r=alexcrichton\n\nconfigure: only req CMake if we're building LLVM\n\nCMake is only necessary if LLVM is going to be built and not in any\nother case.\n\nSigned-off-by: Doug Goldstein <cardoe@cardoe.com>", "tree": {"sha": "2f8e8ebe5bcca25a01eb696268da149a6967121c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2f8e8ebe5bcca25a01eb696268da149a6967121c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f7c93c07b8533e1d38395cc2d9d37cd2d9bec978", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f7c93c07b8533e1d38395cc2d9d37cd2d9bec978", "html_url": "https://github.com/rust-lang/rust/commit/f7c93c07b8533e1d38395cc2d9d37cd2d9bec978", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f7c93c07b8533e1d38395cc2d9d37cd2d9bec978/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "09991241fd75ec69281d06c8f907d2e9f61ac5e2", "url": "https://api.github.com/repos/rust-lang/rust/commits/09991241fd75ec69281d06c8f907d2e9f61ac5e2", "html_url": "https://github.com/rust-lang/rust/commit/09991241fd75ec69281d06c8f907d2e9f61ac5e2"}, {"sha": "f83eb4009e3e5a52bcb2dddc9fa7764aa9c12841", "url": "https://api.github.com/repos/rust-lang/rust/commits/f83eb4009e3e5a52bcb2dddc9fa7764aa9c12841", "html_url": "https://github.com/rust-lang/rust/commit/f83eb4009e3e5a52bcb2dddc9fa7764aa9c12841"}], "stats": {"total": 9, "additions": 6, "deletions": 3}, "files": [{"sha": "483471604cb2a54d46d88720076480262433f1ca", "filename": "configure", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/f7c93c07b8533e1d38395cc2d9d37cd2d9bec978/configure", "raw_url": "https://github.com/rust-lang/rust/raw/f7c93c07b8533e1d38395cc2d9d37cd2d9bec978/configure", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/configure?ref=f7c93c07b8533e1d38395cc2d9d37cd2d9bec978", "patch": "@@ -848,7 +848,10 @@ then\n fi\n \n # For building LLVM\n-probe_need CFG_CMAKE cmake\n+if [ -z \"$CFG_LLVM_ROOT\" ]\n+then\n+  probe_need CFG_CMAKE cmake\n+fi\n \n # On MacOS X, invoking `javac` pops up a dialog if the JDK is not\n # installed. Since `javac` is only used if `antlr4` is available,\n@@ -1471,7 +1474,7 @@ fi\n step_msg \"configuring submodules\"\n \n # Have to be in the top of src directory for this\n-if [ -z $CFG_DISABLE_MANAGE_SUBMODULES ] && [ -z $CFG_ENABLE_RUSTBUILD ]\n+if [ -z \"$CFG_DISABLE_MANAGE_SUBMODULES\" ] && [ -z \"$CFG_ENABLE_RUSTBUILD\" ]\n then\n     cd ${CFG_SRC_DIR}\n \n@@ -1547,7 +1550,7 @@ do\n     then\n         msg \"not configuring LLVM, rustbuild in use\"\n         do_reconfigure=0\n-    elif [ -z $CFG_LLVM_ROOT ]\n+    elif [ -z \"$CFG_LLVM_ROOT\" ]\n     then\n         LLVM_BUILD_DIR=${CFG_BUILD_DIR}$t/llvm\n         LLVM_INST_DIR=$LLVM_BUILD_DIR"}]}