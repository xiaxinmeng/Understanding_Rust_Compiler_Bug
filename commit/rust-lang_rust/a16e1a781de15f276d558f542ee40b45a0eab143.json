{"sha": "a16e1a781de15f276d558f542ee40b45a0eab143", "node_id": "MDY6Q29tbWl0NzI0NzEyOmExNmUxYTc4MWRlMTVmMjc2ZDU1OGY1NDJlZTQwYjQ1YTBlYWIxNDM=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-01-14T00:59:54Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-01-14T00:59:54Z"}, "message": "Auto merge of #56954 - hug-dev:armv8m-main-ci, r=alexcrichton\n\nAdd dist builder for Armv8-M Mainline\n\nThis commit adds the Armv8-M Mainline target in the list of targets that\nget their dist components built. It also update the build-manifest so\nthat this target gets also its dist components uploaded.\n\nI took example on other pull requests doing the same thing for another target to make the changes. Please feel free to comment if things needs to be added or removed.\n\nDoing `./x.py dist --target thumbv8m.main-none-eabi` worked locally so I assume that this will also work on the CI.\nIt will (I think) however need a new release of alexcrichton/cc-rs to include the pull request alexcrichton/cc-rs#363 @alexcrichton\n\nI hope to do the HardFloat version (`thumbv8m.main-none-eabihf`) and Baseline (`thumbv8m.base-none-eabi`) later, as fixes need to be done on compiler-builtins first to support those.", "tree": {"sha": "a9c2ec423c99257a06706e970e4621a0ef0d4296", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a9c2ec423c99257a06706e970e4621a0ef0d4296"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a16e1a781de15f276d558f542ee40b45a0eab143", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a16e1a781de15f276d558f542ee40b45a0eab143", "html_url": "https://github.com/rust-lang/rust/commit/a16e1a781de15f276d558f542ee40b45a0eab143", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a16e1a781de15f276d558f542ee40b45a0eab143/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9aee7ed335cfcaad33a6f6492497588b3d421b2d", "url": "https://api.github.com/repos/rust-lang/rust/commits/9aee7ed335cfcaad33a6f6492497588b3d421b2d", "html_url": "https://github.com/rust-lang/rust/commit/9aee7ed335cfcaad33a6f6492497588b3d421b2d"}, {"sha": "65ac315efe3203d1e2e0de9e7642ac0daff1a35b", "url": "https://api.github.com/repos/rust-lang/rust/commits/65ac315efe3203d1e2e0de9e7642ac0daff1a35b", "html_url": "https://github.com/rust-lang/rust/commit/65ac315efe3203d1e2e0de9e7642ac0daff1a35b"}], "stats": {"total": 56, "additions": 32, "deletions": 24}, "files": [{"sha": "d3c6054f4da373b12c1d54c4e590fbfacf2aacb6", "filename": "Cargo.lock", "status": "modified", "additions": 22, "deletions": 22, "changes": 44, "blob_url": "https://github.com/rust-lang/rust/blob/a16e1a781de15f276d558f542ee40b45a0eab143/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/a16e1a781de15f276d558f542ee40b45a0eab143/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=a16e1a781de15f276d558f542ee40b45a0eab143", "patch": "@@ -97,7 +97,7 @@ name = \"backtrace-sys\"\n version = \"0.1.27\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"cc 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cc 1.0.28 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"compiler_builtins 0.1.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rustc-std-workspace-core 1.0.0\",\n@@ -131,7 +131,7 @@ name = \"bootstrap\"\n version = \"0.0.0\"\n dependencies = [\n  \"build_helper 0.1.0\",\n- \"cc 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cc 1.0.28 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"cmake 0.1.33 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"filetime 0.2.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"getopts 0.2.17 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -264,7 +264,7 @@ version = \"0.1.0\"\n \n [[package]]\n name = \"cc\"\n-version = \"1.0.25\"\n+version = \"1.0.28\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]\n@@ -382,7 +382,7 @@ name = \"cmake\"\n version = \"0.1.33\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"cc 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cc 1.0.28 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -414,7 +414,7 @@ name = \"compiler_builtins\"\n version = \"0.1.4\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"cc 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cc 1.0.28 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rustc-std-workspace-core 1.0.0\",\n ]\n \n@@ -608,7 +608,7 @@ name = \"curl-sys\"\n version = \"0.4.15\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"cc 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cc 1.0.28 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"libnghttp2-sys 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"libz-sys 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -1077,7 +1077,7 @@ name = \"jemalloc-sys\"\n version = \"0.1.8\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"cc 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cc 1.0.28 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"fs_extra 1.1.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n@@ -1161,7 +1161,7 @@ name = \"libgit2-sys\"\n version = \"0.7.11\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"cc 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cc 1.0.28 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"curl-sys 0.4.15 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"libssh2-sys 0.2.11 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -1175,7 +1175,7 @@ name = \"libnghttp2-sys\"\n version = \"0.1.1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"cc 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cc 1.0.28 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n@@ -1184,7 +1184,7 @@ name = \"libssh2-sys\"\n version = \"0.2.11\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"cc 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cc 1.0.28 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"libz-sys 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"openssl-sys 0.9.40 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -1197,7 +1197,7 @@ name = \"libz-sys\"\n version = \"1.0.25\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"cc 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cc 1.0.28 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"pkg-config 0.3.14 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"vcpkg 0.2.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -1237,7 +1237,7 @@ name = \"lzma-sys\"\n version = \"0.1.10\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"cc 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cc 1.0.28 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"filetime 0.2.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"pkg-config 0.3.14 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -1343,7 +1343,7 @@ name = \"miniz-sys\"\n version = \"0.1.11\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"cc 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cc 1.0.28 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n@@ -1360,7 +1360,7 @@ name = \"miniz_oxide_c_api\"\n version = \"0.2.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"cc 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cc 1.0.28 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"crc 1.8.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"miniz_oxide 0.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -1474,15 +1474,15 @@ name = \"openssl-src\"\n version = \"111.1.0+1.1.1a\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"cc 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cc 1.0.28 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n name = \"openssl-sys\"\n version = \"0.9.40\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"cc 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cc 1.0.28 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"openssl-src 111.1.0+1.1.1a (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"pkg-config 0.3.14 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -1681,7 +1681,7 @@ version = \"0.0.0\"\n name = \"profiler_builtins\"\n version = \"0.0.0\"\n dependencies = [\n- \"cc 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cc 1.0.28 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"compiler_builtins 0.1.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"core 0.0.0\",\n ]\n@@ -2323,7 +2323,7 @@ dependencies = [\n name = \"rustc_codegen_llvm\"\n version = \"0.0.0\"\n dependencies = [\n- \"cc 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cc 1.0.28 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"memmap 0.6.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"num_cpus 1.8.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rustc-demangle 0.1.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -2335,7 +2335,7 @@ name = \"rustc_codegen_ssa\"\n version = \"0.0.0\"\n dependencies = [\n  \"bitflags 1.0.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"cc 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cc 1.0.28 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"jobserver 0.1.12 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"log 0.4.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -2485,7 +2485,7 @@ name = \"rustc_llvm\"\n version = \"0.0.0\"\n dependencies = [\n  \"build_helper 0.1.0\",\n- \"cc 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cc 1.0.28 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -2900,7 +2900,7 @@ version = \"0.0.0\"\n dependencies = [\n  \"alloc 0.0.0\",\n  \"backtrace-sys 0.1.27 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"cc 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cc 1.0.28 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"compiler_builtins 0.1.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"core 0.0.0\",\n  \"dlmalloc 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -3411,7 +3411,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \"checksum byteorder 1.2.7 (registry+https://github.com/rust-lang/crates.io-index)\" = \"94f88df23a25417badc922ab0f5716cc1330e87f71ddd9203b3a3ccd9cedf75d\"\n \"checksum bytesize 1.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"716960a18f978640f25101b5cbf1c6f6b0d3192fab36a2d98ca96f0ecbe41010\"\n \"checksum cargo_metadata 0.6.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"7d8dfe3adeb30f7938e6c1dd5327f29235d8ada3e898aeb08c343005ec2915a2\"\n-\"checksum cc 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\" = \"f159dfd43363c4d08055a07703eb7a3406b0dac4d0584d96965a3262db3c9d16\"\n+\"checksum cc 1.0.28 (registry+https://github.com/rust-lang/crates.io-index)\" = \"bb4a8b715cb4597106ea87c7c84b2f1d452c7492033765df7f32651e66fcf749\"\n \"checksum cfg-if 0.1.6 (registry+https://github.com/rust-lang/crates.io-index)\" = \"082bb9b28e00d3c9d39cc03e64ce4cea0f1bb9b3fde493f0cbc008472d22bdf4\"\n \"checksum chalk-engine 0.9.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"17ec698a6f053a23bfbe646d9f2fde4b02abc19125595270a99e6f44ae0bdd1a\"\n \"checksum chalk-macros 0.1.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"295635afd6853aa9f20baeb7f0204862440c0fe994c5a253d5f479dac41d047e\""}, {"sha": "76cdd367987b2c1cb1419abe4b2bb6c1ae419591", "filename": "src/ci/docker/dist-various-1/Dockerfile", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/a16e1a781de15f276d558f542ee40b45a0eab143/src%2Fci%2Fdocker%2Fdist-various-1%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/a16e1a781de15f276d558f542ee40b45a0eab143/src%2Fci%2Fdocker%2Fdist-various-1%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-various-1%2FDockerfile?ref=a16e1a781de15f276d558f542ee40b45a0eab143", "patch": "@@ -21,12 +21,18 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   patch \\\n   libssl-dev \\\n   pkg-config \\\n-  gcc-arm-none-eabi \\\n   libnewlib-arm-none-eabi \\\n-  qemu-system-arm\n+  qemu-system-arm \\\n+# software-properties-common for the add-apt-repository command\n+  software-properties-common\n \n WORKDIR /build\n \n+# Use the team-gcc-arm-embedded PPA for a newer version of Arm GCC\n+RUN add-apt-repository ppa:team-gcc-arm-embedded/ppa && \\\n+    apt-get update && \\\n+    apt-get install -y --no-install-recommends gcc-arm-embedded\n+\n COPY dist-various-1/build-rumprun.sh /build\n RUN ./build-rumprun.sh\n \n@@ -103,6 +109,7 @@ ENV TARGETS=$TARGETS,thumbv6m-none-eabi\n ENV TARGETS=$TARGETS,thumbv7m-none-eabi\n ENV TARGETS=$TARGETS,thumbv7em-none-eabi\n ENV TARGETS=$TARGETS,thumbv7em-none-eabihf\n+ENV TARGETS=$TARGETS,thumbv8m.main-none-eabi\n ENV TARGETS=$TARGETS,riscv32imc-unknown-none-elf\n ENV TARGETS=$TARGETS,riscv32imac-unknown-none-elf\n ENV TARGETS=$TARGETS,armebv7r-none-eabi"}, {"sha": "8c1baa55bcdcae2f6e57e480e57649791d87c151", "filename": "src/tools/build-manifest/src/main.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a16e1a781de15f276d558f542ee40b45a0eab143/src%2Ftools%2Fbuild-manifest%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a16e1a781de15f276d558f542ee40b45a0eab143/src%2Ftools%2Fbuild-manifest%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fbuild-manifest%2Fsrc%2Fmain.rs?ref=a16e1a781de15f276d558f542ee40b45a0eab143", "patch": "@@ -90,6 +90,7 @@ static TARGETS: &'static [&'static str] = &[\n     \"thumbv7em-none-eabi\",\n     \"thumbv7em-none-eabihf\",\n     \"thumbv7m-none-eabi\",\n+    \"thumbv8m.main-none-eabi\",\n     \"wasm32-unknown-emscripten\",\n     \"wasm32-unknown-unknown\",\n     \"x86_64-apple-darwin\","}]}