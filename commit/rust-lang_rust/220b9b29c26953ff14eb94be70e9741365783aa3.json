{"sha": "220b9b29c26953ff14eb94be70e9741365783aa3", "node_id": "MDY6Q29tbWl0NzI0NzEyOjIyMGI5YjI5YzI2OTUzZmYxNGViOTRiZTcwZTk3NDEzNjU3ODNhYTM=", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2019-08-30T00:16:39Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2019-10-16T18:57:19Z"}, "message": "Move overlapping patterns to its own lint", "tree": {"sha": "3193017dc1d6f22fa814a1f5a62dc18fe71bf1a4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3193017dc1d6f22fa814a1f5a62dc18fe71bf1a4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/220b9b29c26953ff14eb94be70e9741365783aa3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/220b9b29c26953ff14eb94be70e9741365783aa3", "html_url": "https://github.com/rust-lang/rust/commit/220b9b29c26953ff14eb94be70e9741365783aa3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/220b9b29c26953ff14eb94be70e9741365783aa3/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "91a3db95a1a5939054d72d2ce69c5647c3cfb93b", "url": "https://api.github.com/repos/rust-lang/rust/commits/91a3db95a1a5939054d72d2ce69c5647c3cfb93b", "html_url": "https://github.com/rust-lang/rust/commit/91a3db95a1a5939054d72d2ce69c5647c3cfb93b"}], "stats": {"total": 54, "additions": 40, "deletions": 14}, "files": [{"sha": "04aefd57ca2ea95502f069a5473209504ce84acc", "filename": "src/libcore/ascii.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/220b9b29c26953ff14eb94be70e9741365783aa3/src%2Flibcore%2Fascii.rs", "raw_url": "https://github.com/rust-lang/rust/raw/220b9b29c26953ff14eb94be70e9741365783aa3/src%2Flibcore%2Fascii.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fascii.rs?ref=220b9b29c26953ff14eb94be70e9741365783aa3", "patch": "@@ -101,7 +101,7 @@ pub fn escape_default(c: u8) -> EscapeDefault {\n         b'\\'' => ([b'\\\\', b'\\'', 0, 0], 2),\n         b'\"' => ([b'\\\\', b'\"', 0, 0], 2),\n         // The three arms above are in the following range\n-        #[allow(unreachable_patterns)]\n+        #[allow(overlapping_patterns)]\n         b'\\x20' ..= b'\\x7e' => ([c, 0, 0, 0], 1),\n         _ => ([b'\\\\', b'x', hexify(c >> 4), hexify(c & 0xf)], 4),\n     };"}, {"sha": "4c28f6372fe2c6db543819ea21a7d9324e4b39ba", "filename": "src/librustc/lint/builtin.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/220b9b29c26953ff14eb94be70e9741365783aa3/src%2Flibrustc%2Flint%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/220b9b29c26953ff14eb94be70e9741365783aa3/src%2Flibrustc%2Flint%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Flint%2Fbuiltin.rs?ref=220b9b29c26953ff14eb94be70e9741365783aa3", "patch": "@@ -80,6 +80,12 @@ declare_lint! {\n     \"detects unreachable patterns\"\n }\n \n+declare_lint! {\n+    pub OVERLAPPING_PATTERNS,\n+    Warn,\n+    \"detects overlapping patterns\"\n+}\n+\n declare_lint! {\n     pub UNUSED_MACROS,\n     Warn,\n@@ -423,6 +429,7 @@ declare_lint_pass! {\n         DEAD_CODE,\n         UNREACHABLE_CODE,\n         UNREACHABLE_PATTERNS,\n+        OVERLAPPING_PATTERNS,\n         UNUSED_MACROS,\n         WARNINGS,\n         UNUSED_FEATURES,"}, {"sha": "e3860e229d6b5d4b89960a3e0fc87160baf372e4", "filename": "src/librustc_lint/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/220b9b29c26953ff14eb94be70e9741365783aa3/src%2Flibrustc_lint%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/220b9b29c26953ff14eb94be70e9741365783aa3/src%2Flibrustc_lint%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2Flib.rs?ref=220b9b29c26953ff14eb94be70e9741365783aa3", "patch": "@@ -255,6 +255,7 @@ pub fn register_builtins(store: &mut lint::LintStore, sess: Option<&Session>) {\n                     UNUSED_MUT,\n                     UNREACHABLE_CODE,\n                     UNREACHABLE_PATTERNS,\n+                    OVERLAPPING_PATTERNS,\n                     UNUSED_MUST_USE,\n                     UNUSED_UNSAFE,\n                     PATH_STATEMENTS,"}, {"sha": "1b3c824458e731187421892609f064c3d0a99e69", "filename": "src/librustc_mir/hair/pattern/_match.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/220b9b29c26953ff14eb94be70e9741365783aa3/src%2Flibrustc_mir%2Fhair%2Fpattern%2F_match.rs", "raw_url": "https://github.com/rust-lang/rust/raw/220b9b29c26953ff14eb94be70e9741365783aa3/src%2Flibrustc_mir%2Fhair%2Fpattern%2F_match.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fhair%2Fpattern%2F_match.rs?ref=220b9b29c26953ff14eb94be70e9741365783aa3", "patch": "@@ -1741,7 +1741,7 @@ fn split_grouped_constructors<'p, 'tcx>(\n \n                 if let (true, Some(hir_id)) = (!overlaps.is_empty(), hir_id) {\n                     let mut err = tcx.struct_span_lint_hir(\n-                        lint::builtin::UNREACHABLE_PATTERNS,\n+                        lint::builtin::OVERLAPPING_PATTERNS,\n                         hir_id,\n                         ctor_range.span,\n                         \"multiple patterns covering the same range\","}, {"sha": "5c6834459f0d4021538bb4f5f6ca5d4b5f9fe80f", "filename": "src/test/ui/check_match/issue-43253.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/220b9b29c26953ff14eb94be70e9741365783aa3/src%2Ftest%2Fui%2Fcheck_match%2Fissue-43253.rs", "raw_url": "https://github.com/rust-lang/rust/raw/220b9b29c26953ff14eb94be70e9741365783aa3/src%2Ftest%2Fui%2Fcheck_match%2Fissue-43253.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcheck_match%2Fissue-43253.rs?ref=220b9b29c26953ff14eb94be70e9741365783aa3", "patch": "@@ -1,7 +1,7 @@\n // check-pass\n-\n #![feature(exclusive_range_pattern)]\n #![warn(unreachable_patterns)]\n+#![warn(overlapping_patterns)]\n \n fn main() {\n     // These cases should generate no warning."}, {"sha": "2f6888c0118aa29a2782542029cd21dcd817e069", "filename": "src/test/ui/check_match/issue-43253.stderr", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/220b9b29c26953ff14eb94be70e9741365783aa3/src%2Ftest%2Fui%2Fcheck_match%2Fissue-43253.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/220b9b29c26953ff14eb94be70e9741365783aa3/src%2Ftest%2Fui%2Fcheck_match%2Fissue-43253.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcheck_match%2Fissue-43253.stderr?ref=220b9b29c26953ff14eb94be70e9741365783aa3", "patch": "@@ -9,14 +9,20 @@ LL |         9..=10 => {},\n note: lint level defined here\n   --> $DIR/issue-43253.rs:4:9\n    |\n-LL | #![warn(unreachable_patterns)]\n+LL | #![warn(overlapping_patterns)]\n    |         ^^^^^^^^^^^^^^^^^^^^\n \n warning: unreachable pattern\n   --> $DIR/issue-43253.rs:29:9\n    |\n LL |         9 => {},\n    |         ^\n+   |\n+note: lint level defined here\n+  --> $DIR/issue-43253.rs:3:9\n+   |\n+LL | #![warn(unreachable_patterns)]\n+   |         ^^^^^^^^^^^^^^^^^^^^\n \n warning: multiple patterns covering the same range\n   --> $DIR/issue-43253.rs:35:9"}, {"sha": "ef88ce94aa6a26692e8641674d468f94bda75dba", "filename": "src/test/ui/exhaustive_integer_patterns.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/220b9b29c26953ff14eb94be70e9741365783aa3/src%2Ftest%2Fui%2Fexhaustive_integer_patterns.rs", "raw_url": "https://github.com/rust-lang/rust/raw/220b9b29c26953ff14eb94be70e9741365783aa3/src%2Ftest%2Fui%2Fexhaustive_integer_patterns.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fexhaustive_integer_patterns.rs?ref=220b9b29c26953ff14eb94be70e9741365783aa3", "patch": "@@ -1,7 +1,7 @@\n #![feature(precise_pointer_size_matching)]\n #![feature(exclusive_range_pattern)]\n-\n #![deny(unreachable_patterns)]\n+#![deny(overlapping_patterns)]\n \n use std::{char, u8, u16, u32, u64, u128, i8, i16, i32, i64, i128};\n "}, {"sha": "59cd3fffa8df5b7b184fd0e591d1ad152191c4f1", "filename": "src/test/ui/exhaustive_integer_patterns.stderr", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/220b9b29c26953ff14eb94be70e9741365783aa3/src%2Ftest%2Fui%2Fexhaustive_integer_patterns.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/220b9b29c26953ff14eb94be70e9741365783aa3/src%2Ftest%2Fui%2Fexhaustive_integer_patterns.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fexhaustive_integer_patterns.stderr?ref=220b9b29c26953ff14eb94be70e9741365783aa3", "patch": "@@ -9,14 +9,20 @@ LL |         100 ..= 200 => {}\n note: lint level defined here\n   --> $DIR/exhaustive_integer_patterns.rs:4:9\n    |\n-LL | #![deny(unreachable_patterns)]\n+LL | #![deny(overlapping_patterns)]\n    |         ^^^^^^^^^^^^^^^^^^^^\n \n error: unreachable pattern\n   --> $DIR/exhaustive_integer_patterns.rs:23:9\n    |\n LL |         200 => {}\n    |         ^^^\n+   |\n+note: lint level defined here\n+  --> $DIR/exhaustive_integer_patterns.rs:3:9\n+   |\n+LL | #![deny(unreachable_patterns)]\n+   |         ^^^^^^^^^^^^^^^^^^^^\n \n error[E0004]: non-exhaustive patterns: `128u8..=std::u8::MAX` not covered\n   --> $DIR/exhaustive_integer_patterns.rs:28:11"}, {"sha": "bdbb1f050a7a37279c949d0fabf14ef92d6b1055", "filename": "src/test/ui/match/match-range-fail-dominate.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/220b9b29c26953ff14eb94be70e9741365783aa3/src%2Ftest%2Fui%2Fmatch%2Fmatch-range-fail-dominate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/220b9b29c26953ff14eb94be70e9741365783aa3/src%2Ftest%2Fui%2Fmatch%2Fmatch-range-fail-dominate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmatch%2Fmatch-range-fail-dominate.rs?ref=220b9b29c26953ff14eb94be70e9741365783aa3", "patch": "@@ -1,4 +1,4 @@\n-#![deny(unreachable_patterns)]\n+#![deny(unreachable_patterns, overlapping_patterns)]\n \n fn main() {\n     match 5 {"}, {"sha": "b14e9b5008d9d7e1a097fc44745f3256c309022c", "filename": "src/test/ui/match/match-range-fail-dominate.stderr", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/220b9b29c26953ff14eb94be70e9741365783aa3/src%2Ftest%2Fui%2Fmatch%2Fmatch-range-fail-dominate.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/220b9b29c26953ff14eb94be70e9741365783aa3/src%2Ftest%2Fui%2Fmatch%2Fmatch-range-fail-dominate.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmatch%2Fmatch-range-fail-dominate.stderr?ref=220b9b29c26953ff14eb94be70e9741365783aa3", "patch": "@@ -7,10 +7,10 @@ LL |       5 ..= 6 => { }\n    |       ^^^^^^^ overlapping patterns\n    |\n note: lint level defined here\n-  --> $DIR/match-range-fail-dominate.rs:1:9\n+  --> $DIR/match-range-fail-dominate.rs:1:31\n    |\n-LL | #![deny(unreachable_patterns)]\n-   |         ^^^^^^^^^^^^^^^^^^^^\n+LL | #![deny(unreachable_patterns, overlapping_patterns)]\n+   |                               ^^^^^^^^^^^^^^^^^^^^\n \n error: multiple patterns covering the same range\n   --> $DIR/match-range-fail-dominate.rs:12:7\n@@ -69,6 +69,12 @@ error: unreachable pattern\n    |\n LL |       0.02f64 => {}\n    |       ^^^^^^^\n+   |\n+note: lint level defined here\n+  --> $DIR/match-range-fail-dominate.rs:1:9\n+   |\n+LL | #![deny(unreachable_patterns, overlapping_patterns)]\n+   |         ^^^^^^^^^^^^^^^^^^^^\n \n warning: floating-point types cannot be used in patterns\n   --> $DIR/match-range-fail-dominate.rs:29:7"}, {"sha": "be2a140ddc3ddf6d8f461215a514911ab61c2e8c", "filename": "src/test/ui/precise_pointer_size_matching.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/220b9b29c26953ff14eb94be70e9741365783aa3/src%2Ftest%2Fui%2Fprecise_pointer_size_matching.rs", "raw_url": "https://github.com/rust-lang/rust/raw/220b9b29c26953ff14eb94be70e9741365783aa3/src%2Ftest%2Fui%2Fprecise_pointer_size_matching.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fprecise_pointer_size_matching.rs?ref=220b9b29c26953ff14eb94be70e9741365783aa3", "patch": "@@ -8,7 +8,7 @@\n #![feature(precise_pointer_size_matching)]\n #![feature(exclusive_range_pattern)]\n \n-#![deny(unreachable_patterns)]\n+#![deny(unreachable_patterns, overlapping_patterns)]\n \n use std::{usize, isize};\n "}, {"sha": "4930047fc1e9aa36af61c0970d10a4bd85c0feb3", "filename": "src/test/ui/precise_pointer_size_matching.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/220b9b29c26953ff14eb94be70e9741365783aa3/src%2Ftest%2Fui%2Fprecise_pointer_size_matching.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/220b9b29c26953ff14eb94be70e9741365783aa3/src%2Ftest%2Fui%2Fprecise_pointer_size_matching.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fprecise_pointer_size_matching.stderr?ref=220b9b29c26953ff14eb94be70e9741365783aa3", "patch": "@@ -7,10 +7,10 @@ LL |         -5 ..= 20 => {}\n    |         ^^^^^^^^^ overlapping patterns\n    |\n note: lint level defined here\n-  --> $DIR/precise_pointer_size_matching.rs:11:9\n+  --> $DIR/precise_pointer_size_matching.rs:11:31\n    |\n-LL | #![deny(unreachable_patterns)]\n-   |         ^^^^^^^^^^^^^^^^^^^^\n+LL | #![deny(unreachable_patterns, overlapping_patterns)]\n+   |                               ^^^^^^^^^^^^^^^^^^^^\n \n error[E0004]: non-exhaustive patterns: `std::isize::MIN..=-6isize` and `21isize..=std::isize::MAX` not covered\n   --> $DIR/precise_pointer_size_matching.rs:24:11"}]}