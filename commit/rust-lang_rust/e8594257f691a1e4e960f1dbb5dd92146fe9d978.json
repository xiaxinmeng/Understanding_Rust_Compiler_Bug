{"sha": "e8594257f691a1e4e960f1dbb5dd92146fe9d978", "node_id": "C_kwDOAAsO6NoAKGU4NTk0MjU3ZjY5MWExZTRlOTYwZjFkYmI1ZGQ5MjE0NmZlOWQ5Nzg", "commit": {"author": {"name": "b-naber", "email": "bn263@gmx.de", "date": "2022-09-22T10:49:04Z"}, "committer": {"name": "b-naber", "email": "bn263@gmx.de", "date": "2022-09-22T11:10:53Z"}, "message": "use valtrees for comparison", "tree": {"sha": "21c512ba862f034f2d3de1dd53de934c9899ad86", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/21c512ba862f034f2d3de1dd53de934c9899ad86"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e8594257f691a1e4e960f1dbb5dd92146fe9d978", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e8594257f691a1e4e960f1dbb5dd92146fe9d978", "html_url": "https://github.com/rust-lang/rust/commit/e8594257f691a1e4e960f1dbb5dd92146fe9d978", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e8594257f691a1e4e960f1dbb5dd92146fe9d978/comments", "author": {"login": "b-naber", "id": 71934879, "node_id": "MDQ6VXNlcjcxOTM0ODc5", "avatar_url": "https://avatars.githubusercontent.com/u/71934879?v=4", "gravatar_id": "", "url": "https://api.github.com/users/b-naber", "html_url": "https://github.com/b-naber", "followers_url": "https://api.github.com/users/b-naber/followers", "following_url": "https://api.github.com/users/b-naber/following{/other_user}", "gists_url": "https://api.github.com/users/b-naber/gists{/gist_id}", "starred_url": "https://api.github.com/users/b-naber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/b-naber/subscriptions", "organizations_url": "https://api.github.com/users/b-naber/orgs", "repos_url": "https://api.github.com/users/b-naber/repos", "events_url": "https://api.github.com/users/b-naber/events{/privacy}", "received_events_url": "https://api.github.com/users/b-naber/received_events", "type": "User", "site_admin": false}, "committer": {"login": "b-naber", "id": 71934879, "node_id": "MDQ6VXNlcjcxOTM0ODc5", "avatar_url": "https://avatars.githubusercontent.com/u/71934879?v=4", "gravatar_id": "", "url": "https://api.github.com/users/b-naber", "html_url": "https://github.com/b-naber", "followers_url": "https://api.github.com/users/b-naber/followers", "following_url": "https://api.github.com/users/b-naber/following{/other_user}", "gists_url": "https://api.github.com/users/b-naber/gists{/gist_id}", "starred_url": "https://api.github.com/users/b-naber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/b-naber/subscriptions", "organizations_url": "https://api.github.com/users/b-naber/orgs", "repos_url": "https://api.github.com/users/b-naber/repos", "events_url": "https://api.github.com/users/b-naber/events{/privacy}", "received_events_url": "https://api.github.com/users/b-naber/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3e50038a2d4029bd1484af75dbf144c4b0da6c74", "url": "https://api.github.com/repos/rust-lang/rust/commits/3e50038a2d4029bd1484af75dbf144c4b0da6c74", "html_url": "https://github.com/rust-lang/rust/commit/3e50038a2d4029bd1484af75dbf144c4b0da6c74"}], "stats": {"total": 9, "additions": 1, "deletions": 8}, "files": [{"sha": "41bb3c7140172fbd0ed58c0f1a5da5b33bc541e8", "filename": "compiler/rustc_middle/src/ty/fast_reject.rs", "status": "modified", "additions": 1, "deletions": 8, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/e8594257f691a1e4e960f1dbb5dd92146fe9d978/compiler%2Frustc_middle%2Fsrc%2Fty%2Ffast_reject.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e8594257f691a1e4e960f1dbb5dd92146fe9d978/compiler%2Frustc_middle%2Fsrc%2Fty%2Ffast_reject.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fty%2Ffast_reject.rs?ref=e8594257f691a1e4e960f1dbb5dd92146fe9d978", "patch": "@@ -384,14 +384,7 @@ impl DeepRejectCtxt {\n             // they might unify with any value.\n             ty::ConstKind::Unevaluated(_) | ty::ConstKind::Error(_) => true,\n             ty::ConstKind::Value(obl) => match k {\n-                ty::ConstKind::Value(imp) => {\n-                    // FIXME(valtrees): Once we have valtrees, we can just\n-                    // compare them directly here.\n-                    match (obl.try_to_scalar_int(), imp.try_to_scalar_int()) {\n-                        (Some(obl), Some(imp)) => obl == imp,\n-                        _ => true,\n-                    }\n-                }\n+                ty::ConstKind::Value(imp) => obl == imp,\n                 _ => true,\n             },\n "}]}