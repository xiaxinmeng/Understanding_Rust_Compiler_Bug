{"sha": "c2c505737f3b7f0013954cd5f4eed2dbc5c1003a", "node_id": "C_kwDOAAsO6NoAKGMyYzUwNTczN2YzYjdmMDAxMzk1NGNkNWY0ZWVkMmRiYzVjMTAwM2E", "commit": {"author": {"name": "Nicholas Nethercote", "email": "n.nethercote@gmail.com", "date": "2022-05-15T23:36:52Z"}, "committer": {"name": "Nicholas Nethercote", "email": "n.nethercote@gmail.com", "date": "2022-05-27T05:58:35Z"}, "message": "Add some comments about `_marker` fields.\n\nThere is some non-obvious information required to understand them.", "tree": {"sha": "bdbb5a6c95c42a0269343f1aa8340207ad9bc6d3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bdbb5a6c95c42a0269343f1aa8340207ad9bc6d3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c2c505737f3b7f0013954cd5f4eed2dbc5c1003a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c2c505737f3b7f0013954cd5f4eed2dbc5c1003a", "html_url": "https://github.com/rust-lang/rust/commit/c2c505737f3b7f0013954cd5f4eed2dbc5c1003a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c2c505737f3b7f0013954cd5f4eed2dbc5c1003a/comments", "author": {"login": "nnethercote", "id": 1940286, "node_id": "MDQ6VXNlcjE5NDAyODY=", "avatar_url": "https://avatars.githubusercontent.com/u/1940286?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nnethercote", "html_url": "https://github.com/nnethercote", "followers_url": "https://api.github.com/users/nnethercote/followers", "following_url": "https://api.github.com/users/nnethercote/following{/other_user}", "gists_url": "https://api.github.com/users/nnethercote/gists{/gist_id}", "starred_url": "https://api.github.com/users/nnethercote/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nnethercote/subscriptions", "organizations_url": "https://api.github.com/users/nnethercote/orgs", "repos_url": "https://api.github.com/users/nnethercote/repos", "events_url": "https://api.github.com/users/nnethercote/events{/privacy}", "received_events_url": "https://api.github.com/users/nnethercote/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nnethercote", "id": 1940286, "node_id": "MDQ6VXNlcjE5NDAyODY=", "avatar_url": "https://avatars.githubusercontent.com/u/1940286?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nnethercote", "html_url": "https://github.com/nnethercote", "followers_url": "https://api.github.com/users/nnethercote/followers", "following_url": "https://api.github.com/users/nnethercote/following{/other_user}", "gists_url": "https://api.github.com/users/nnethercote/gists{/gist_id}", "starred_url": "https://api.github.com/users/nnethercote/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nnethercote/subscriptions", "organizations_url": "https://api.github.com/users/nnethercote/orgs", "repos_url": "https://api.github.com/users/nnethercote/repos", "events_url": "https://api.github.com/users/nnethercote/events{/privacy}", "received_events_url": "https://api.github.com/users/nnethercote/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9a785e0aa546b45b8723bee13956459276f96cbe", "url": "https://api.github.com/repos/rust-lang/rust/commits/9a785e0aa546b45b8723bee13956459276f96cbe", "html_url": "https://github.com/rust-lang/rust/commit/9a785e0aa546b45b8723bee13956459276f96cbe"}], "stats": {"total": 18, "additions": 14, "deletions": 4}, "files": [{"sha": "f3582a357ec16b62c8453b332638e824c89bc9b5", "filename": "library/proc_macro/src/bridge/client.rs", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c2c505737f3b7f0013954cd5f4eed2dbc5c1003a/library%2Fproc_macro%2Fsrc%2Fbridge%2Fclient.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c2c505737f3b7f0013954cd5f4eed2dbc5c1003a/library%2Fproc_macro%2Fsrc%2Fbridge%2Fclient.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fproc_macro%2Fsrc%2Fbridge%2Fclient.rs?ref=c2c505737f3b7f0013954cd5f4eed2dbc5c1003a", "patch": "@@ -49,7 +49,9 @@ macro_rules! define_handles {\n             #[repr(C)]\n             pub(crate) struct $oty {\n                 handle: handle::Handle,\n-                // Prevent Send and Sync impls\n+                // Prevent Send and Sync impls. `!Send`/`!Sync` is the usual\n+                // way of doing this, but that requires unstable features.\n+                // rust-analyzer uses this code and avoids unstable features.\n                 _marker: PhantomData<*mut ()>,\n             }\n \n@@ -133,7 +135,9 @@ macro_rules! define_handles {\n             #[derive(Copy, Clone, PartialEq, Eq, Hash)]\n             pub(crate) struct $ity {\n                 handle: handle::Handle,\n-                // Prevent Send and Sync impls\n+                // Prevent Send and Sync impls. `!Send`/`!Sync` is the usual\n+                // way of doing this, but that requires unstable features.\n+                // rust-analyzer uses this code and avoids unstable features.\n                 _marker: PhantomData<*mut ()>,\n             }\n "}, {"sha": "d371ae3cea0981a01f38cb261fc39e203b495130", "filename": "library/proc_macro/src/bridge/closure.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/c2c505737f3b7f0013954cd5f4eed2dbc5c1003a/library%2Fproc_macro%2Fsrc%2Fbridge%2Fclosure.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c2c505737f3b7f0013954cd5f4eed2dbc5c1003a/library%2Fproc_macro%2Fsrc%2Fbridge%2Fclosure.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fproc_macro%2Fsrc%2Fbridge%2Fclosure.rs?ref=c2c505737f3b7f0013954cd5f4eed2dbc5c1003a", "patch": "@@ -6,7 +6,11 @@ use std::marker::PhantomData;\n pub struct Closure<'a, A, R> {\n     call: unsafe extern \"C\" fn(*mut Env, A) -> R,\n     env: *mut Env,\n-    // Ensure Closure is !Send and !Sync\n+    // Prevent Send and Sync impls. `!Send`/`!Sync` is the usual way of doing\n+    // this, but that requires unstable features. rust-analyzer uses this code\n+    // and avoids unstable features.\n+    //\n+    // The `'a` lifetime parameter represents the lifetime of `Env`.\n     _marker: PhantomData<*mut &'a mut ()>,\n }\n "}, {"sha": "c3e4bf1bd6bb15b2891a02ca095ff98381b552ca", "filename": "library/proc_macro/src/bridge/mod.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c2c505737f3b7f0013954cd5f4eed2dbc5c1003a/library%2Fproc_macro%2Fsrc%2Fbridge%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c2c505737f3b7f0013954cd5f4eed2dbc5c1003a/library%2Fproc_macro%2Fsrc%2Fbridge%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fproc_macro%2Fsrc%2Fbridge%2Fmod.rs?ref=c2c505737f3b7f0013954cd5f4eed2dbc5c1003a", "patch": "@@ -232,7 +232,9 @@ pub struct Bridge<'a> {\n     /// If 'true', always invoke the default panic hook\n     force_show_panics: bool,\n \n-    // Prevent Send and Sync impls\n+    // Prevent Send and Sync impls. `!Send`/`!Sync` is the usual way of doing\n+    // this, but that requires unstable features. rust-analyzer uses this code\n+    // and avoids unstable features.\n     _marker: marker::PhantomData<*mut ()>,\n }\n "}]}