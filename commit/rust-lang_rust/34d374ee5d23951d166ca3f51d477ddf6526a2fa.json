{"sha": "34d374ee5d23951d166ca3f51d477ddf6526a2fa", "node_id": "C_kwDOAAsO6NoAKDM0ZDM3NGVlNWQyMzk1MWQxNjZjYTNmNTFkNDc3ZGRmNjUyNmEyZmE", "commit": {"author": {"name": "Seiichi Uchida", "email": "seuchida@gmail.com", "date": "2020-07-03T02:13:16Z"}, "committer": {"name": "Caleb Cartwright", "email": "calebcartwright@users.noreply.github.com", "date": "2022-01-02T16:06:06Z"}, "message": "Use <stdin> when emitting stdin as filename (#4298)\n\n# Conflicts:\n#\tsrc/config/file_lines.rs\n#\tsrc/rustfmt/main.rs\n#\tsrc/test/mod.rs", "tree": {"sha": "9f236077096fa2d03d40c056ab6645ad326073bf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9f236077096fa2d03d40c056ab6645ad326073bf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/34d374ee5d23951d166ca3f51d477ddf6526a2fa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/34d374ee5d23951d166ca3f51d477ddf6526a2fa", "html_url": "https://github.com/rust-lang/rust/commit/34d374ee5d23951d166ca3f51d477ddf6526a2fa", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/34d374ee5d23951d166ca3f51d477ddf6526a2fa/comments", "author": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "committer": {"login": "calebcartwright", "id": 13042488, "node_id": "MDQ6VXNlcjEzMDQyNDg4", "avatar_url": "https://avatars.githubusercontent.com/u/13042488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/calebcartwright", "html_url": "https://github.com/calebcartwright", "followers_url": "https://api.github.com/users/calebcartwright/followers", "following_url": "https://api.github.com/users/calebcartwright/following{/other_user}", "gists_url": "https://api.github.com/users/calebcartwright/gists{/gist_id}", "starred_url": "https://api.github.com/users/calebcartwright/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/calebcartwright/subscriptions", "organizations_url": "https://api.github.com/users/calebcartwright/orgs", "repos_url": "https://api.github.com/users/calebcartwright/repos", "events_url": "https://api.github.com/users/calebcartwright/events{/privacy}", "received_events_url": "https://api.github.com/users/calebcartwright/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "894a3c0e7745ece39fcee89d38389a789cfe520a", "url": "https://api.github.com/repos/rust-lang/rust/commits/894a3c0e7745ece39fcee89d38389a789cfe520a", "html_url": "https://github.com/rust-lang/rust/commit/894a3c0e7745ece39fcee89d38389a789cfe520a"}], "stats": {"total": 14, "additions": 7, "deletions": 7}, "files": [{"sha": "e4e51a3f3b40927e05b2021c4e259a9f66a30d6a", "filename": "src/config/file_lines.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/34d374ee5d23951d166ca3f51d477ddf6526a2fa/src%2Fconfig%2Ffile_lines.rs", "raw_url": "https://github.com/rust-lang/rust/raw/34d374ee5d23951d166ca3f51d477ddf6526a2fa/src%2Fconfig%2Ffile_lines.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fconfig%2Ffile_lines.rs?ref=34d374ee5d23951d166ca3f51d477ddf6526a2fa", "patch": "@@ -39,7 +39,7 @@ impl fmt::Display for FileName {\n     fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {\n         match self {\n             FileName::Real(p) => write!(f, \"{}\", p.to_str().unwrap()),\n-            FileName::Stdin => write!(f, \"stdin\"),\n+            FileName::Stdin => write!(f, \"<stdin>\"),\n         }\n     }\n }"}, {"sha": "2d5a8f22053fa5c4bc96a7884ff3b42bc123be5a", "filename": "src/test/mod.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/34d374ee5d23951d166ca3f51d477ddf6526a2fa/src%2Ftest%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/34d374ee5d23951d166ca3f51d477ddf6526a2fa/src%2Ftest%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmod.rs?ref=34d374ee5d23951d166ca3f51d477ddf6526a2fa", "patch": "@@ -466,9 +466,9 @@ fn stdin_formatting_smoke_test() {\n     }\n \n     #[cfg(not(windows))]\n-    assert_eq!(buf, \"stdin:\\n\\nfn main() {}\\n\".as_bytes());\n+    assert_eq!(buf, \"<stdin>:\\n\\nfn main() {}\\n\".as_bytes());\n     #[cfg(windows)]\n-    assert_eq!(buf, \"stdin:\\n\\nfn main() {}\\r\\n\".as_bytes());\n+    assert_eq!(buf, \"<stdin>:\\n\\nfn main() {}\\r\\n\".as_bytes());\n }\n \n #[test]\n@@ -1013,5 +1013,5 @@ fn verify_check_l_works_with_stdin() {\n         .wait_with_output()\n         .expect(\"Failed to wait on rustfmt child\");\n     assert!(output.status.success());\n-    assert_eq!(std::str::from_utf8(&output.stdout).unwrap(), \"stdin\\n\");\n+    assert_eq!(std::str::from_utf8(&output.stdout).unwrap(), \"<stdin>\\n\");\n }"}, {"sha": "dbf2c486322957fa44e3d63091efd2120af88bbd", "filename": "tests/writemode/target/stdin.json", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/34d374ee5d23951d166ca3f51d477ddf6526a2fa/tests%2Fwritemode%2Ftarget%2Fstdin.json", "raw_url": "https://github.com/rust-lang/rust/raw/34d374ee5d23951d166ca3f51d477ddf6526a2fa/tests%2Fwritemode%2Ftarget%2Fstdin.json", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fwritemode%2Ftarget%2Fstdin.json?ref=34d374ee5d23951d166ca3f51d477ddf6526a2fa", "patch": "@@ -1 +1 @@\n-[{\"name\":\"stdin\",\"mismatches\":[{\"original_begin_line\":1,\"original_end_line\":6,\"expected_begin_line\":1,\"expected_end_line\":2,\"original\":\"\\nfn\\n some( )\\n{\\n}\\nfn main () {}\\n\",\"expected\":\"fn some() {}\\nfn main() {}\\n\"}]}]\n+[{\"name\":\"<stdin>\",\"mismatches\":[{\"original_begin_line\":1,\"original_end_line\":6,\"expected_begin_line\":1,\"expected_end_line\":2,\"original\":\"\\nfn\\n some( )\\n{\\n}\\nfn main () {}\\n\",\"expected\":\"fn some() {}\\nfn main() {}\\n\"}]}]"}, {"sha": "a7301bbc553c39a606824d7759d25f7e7cb60635", "filename": "tests/writemode/target/stdin.xml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/34d374ee5d23951d166ca3f51d477ddf6526a2fa/tests%2Fwritemode%2Ftarget%2Fstdin.xml", "raw_url": "https://github.com/rust-lang/rust/raw/34d374ee5d23951d166ca3f51d477ddf6526a2fa/tests%2Fwritemode%2Ftarget%2Fstdin.xml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fwritemode%2Ftarget%2Fstdin.xml?ref=34d374ee5d23951d166ca3f51d477ddf6526a2fa", "patch": "@@ -1,2 +1,2 @@\n-<?xml version=\"1.0\" encoding=\"utf-8\"?>\n-<checkstyle version=\"4.3\"><file name=\"stdin\"><error line=\"1\" severity=\"warning\" message=\"Should be `fn some() {}`\" /><error line=\"2\" severity=\"warning\" message=\"Should be `fn main() {}`\" /></file></checkstyle>\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n+<checkstyle version=\"4.3\"><file name=\"<stdin>\"><error line=\"1\" severity=\"warning\" message=\"Should be `fn some() {}`\" /><error line=\"2\" severity=\"warning\" message=\"Should be `fn main() {}`\" /></file></checkstyle>\r"}]}