{"sha": "8c4f1652ec4dc42d6012d01d7cd31a2181eff965", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhjNGYxNjUyZWM0ZGM0MmQ2MDEyZDAxZDdjZDMxYTIxODFlZmY5NjU=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-07-17T00:35:20Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-07-17T00:36:11Z"}, "message": "Add ivec::zip/unzip", "tree": {"sha": "5d56d7dedee8ce3f2bc01d033b94eb3943568e11", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5d56d7dedee8ce3f2bc01d033b94eb3943568e11"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8c4f1652ec4dc42d6012d01d7cd31a2181eff965", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8c4f1652ec4dc42d6012d01d7cd31a2181eff965", "html_url": "https://github.com/rust-lang/rust/commit/8c4f1652ec4dc42d6012d01d7cd31a2181eff965", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8c4f1652ec4dc42d6012d01d7cd31a2181eff965/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a52c3e044457aa34d4054bb2734c53a08c3e5d4a", "url": "https://api.github.com/repos/rust-lang/rust/commits/a52c3e044457aa34d4054bb2734c53a08c3e5d4a", "html_url": "https://github.com/rust-lang/rust/commit/a52c3e044457aa34d4054bb2734c53a08c3e5d4a"}], "stats": {"total": 44, "additions": 44, "deletions": 0}, "files": [{"sha": "677fddc35c5aa45a8576676ba9d71a763d44df0b", "filename": "src/lib/ivec.rs", "status": "modified", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/8c4f1652ec4dc42d6012d01d7cd31a2181eff965/src%2Flib%2Fivec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c4f1652ec4dc42d6012d01d7cd31a2181eff965/src%2Flib%2Fivec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib%2Fivec.rs?ref=8c4f1652ec4dc42d6012d01d7cd31a2181eff965", "patch": "@@ -241,6 +241,32 @@ fn find[T](fn(&T) -> bool  f, &T[] v) -> option::t[T] {\n     ret none[T];\n }\n \n+fn unzip[T, U](&tup(T, U)[] v) -> tup(T[], U[]) {\n+    auto sz = len[tup(T, U)](v);\n+    if (sz == 0u) {\n+        ret tup(~[], ~[]);\n+    } else {\n+        auto rest = slice[tup(T, U)](v, 1u, sz);\n+        auto tl = unzip[T, U](rest);\n+        auto a = ~[v.(0)._0];\n+        auto b = ~[v.(0)._1];\n+        ret tup(a + tl._0, b + tl._1);\n+    }\n+}\n+\n+\n+// FIXME make the lengths being equal a constraint\n+fn zip[T, U](&T[] v, &U[] u) -> tup(T, U)[] {\n+    auto sz = len[T](v);\n+    assert (sz == len[U](u));\n+    if (sz == 0u) {\n+        ret ~[];\n+    } else {\n+        auto rest = zip[T, U](slice[T](v, 1u, sz), slice[U](u, 1u, sz));\n+        ret ~[tup(v.(0), u.(0))] + rest;\n+    }\n+}\n+\n mod unsafe {\n     type ivec_repr = rec(mutable uint fill,\n                          mutable uint alloc,"}, {"sha": "14fcd8313992b89bee6f5866b903c36f87f99a70", "filename": "src/test/run-pass/lib-ivec.rs", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/8c4f1652ec4dc42d6012d01d7cd31a2181eff965/src%2Ftest%2Frun-pass%2Flib-ivec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c4f1652ec4dc42d6012d01d7cd31a2181eff965/src%2Ftest%2Frun-pass%2Flib-ivec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Flib-ivec.rs?ref=8c4f1652ec4dc42d6012d01d7cd31a2181eff965", "patch": "@@ -262,6 +262,23 @@ fn test_any_and_all() {\n     assert (!ivec::all(is_three, ~[ 3u, 3u, 0u, 1u, 2u ]));\n }\n \n+#[test]\n+fn test_zip_unzip() {\n+    auto v1 = ~[1, 2, 3];\n+    auto v2 = ~[4, 5, 6];\n+    auto z1 = ivec::zip(v1, v2);\n+\n+    assert tup(1, 4) == z1.(0);\n+    assert tup(2, 5) == z1.(1);\n+    assert tup(3, 6) == z1.(2);\n+\n+    auto u1 = ivec::unzip(z1);\n+\n+    assert tup(1, 4) == tup(u1._0.(0), u1._1.(0));\n+    assert tup(2, 5) == tup(u1._0.(1), u1._1.(1));\n+    assert tup(3, 6) == tup(u1._0.(2), u1._1.(2));\n+}\n+\n fn main() {\n     test_reserve_and_on_heap();\n     test_unsafe_ptrs();\n@@ -291,6 +308,7 @@ fn main() {\n     test_filter_map();\n     test_foldl();\n     test_any_and_all();\n+    test_zip_unzip();\n }\n \n // Local Variables:"}]}