{"sha": "2025a08393cad5b5e04f6af910a69520d1162cca", "node_id": "MDY6Q29tbWl0NzI0NzEyOjIwMjVhMDgzOTNjYWQ1YjVlMDRmNmFmOTEwYTY5NTIwZDExNjJjY2E=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-04-04T18:05:29Z"}, "committer": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-04-04T18:17:06Z"}, "message": "Rollup merge of #49634 - lloydmeta:tests/issue-43058, r=nikomatsakis\n\nAdd a test for the fix to issue #43058\n\nFollowed the instructions laid out here https://github.com/rust-lang/rust/issues/43058#issuecomment-378389971", "tree": {"sha": "f1a8c65931d8fd105837db20b15579481d9d6179", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f1a8c65931d8fd105837db20b15579481d9d6179"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2025a08393cad5b5e04f6af910a69520d1162cca", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZ1R8CLMp8f2GxWoQ/vbIBR0OATwFAlrFFqIACgkQ/vbIBR0O\nATz0kA//WQUSJI6e1SgkEQ+ig3THx25hKDxVkqQwNR10bQ1sBDUwZICHG/36BvpE\nnz9I4YMPgimw6AY9T2UUFIXE/BH36+qja0TGXgkQ19bWBn4nXslaof+AV5gDKTah\nFdHw1XNe07fJnjjafVkp37vl9F30s4fS6g9/S6p0moPF1z9qPGxDji5IxANLycOu\nagw46ycv7p3WrGeoBKWLxru0DQNabdOYY12BBky4MeIZAxz/jstISXhkeX4w/5bs\nt7AG7sEwjR+1L8OUegV3E5S7KLmRhIQUi5DN2FakrPvNecy/t9+aNgryrVGt7sNn\nGscKQ5zBDSpZMCc3cEMpuH/VZ50/b2YUnbjMEtazTujQk1HtcxwX794lf3hwnCup\nA3Ykd3waR3QK6t/c7uAWnydyDUw/69zx4C/FwUSgg8THmZeBb7CsR71umKsAPTY5\nkVvC4yFT1T0QFt239DUGkCDjE5x2xoOVnw9IW/J/u48OxD4baijF252gPgfSlE73\nZ6POL5swJTXljm2lcCLdwm2lNzkJDAjbxlFHxx9cjrKRL//lEy0blgdQD524kng/\n59ukAfltsVqR5Gtfqp75LT4u/KgoZUSHtS+MAGv816tdQoz4I3dgBTdVeat7gbW4\n0Bn2MwoelkIR5qe06e++rLnhCatIpNZwBP8Fxz2N6w8K5iPg57E=\n=kxgQ\n-----END PGP SIGNATURE-----", "payload": "tree f1a8c65931d8fd105837db20b15579481d9d6179\nparent 391959feb9702a6d46127f0852df27ab75cd2286\nparent f2cc501f5f982b18f3ecc4717820024d58065574\nauthor kennytm <kennytm@gmail.com> 1522865129 +0800\ncommitter kennytm <kennytm@gmail.com> 1522865826 +0800\n\nRollup merge of #49634 - lloydmeta:tests/issue-43058, r=nikomatsakis\n\nAdd a test for the fix to issue #43058\n\nFollowed the instructions laid out here https://github.com/rust-lang/rust/issues/43058#issuecomment-378389971\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2025a08393cad5b5e04f6af910a69520d1162cca", "html_url": "https://github.com/rust-lang/rust/commit/2025a08393cad5b5e04f6af910a69520d1162cca", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2025a08393cad5b5e04f6af910a69520d1162cca/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "391959feb9702a6d46127f0852df27ab75cd2286", "url": "https://api.github.com/repos/rust-lang/rust/commits/391959feb9702a6d46127f0852df27ab75cd2286", "html_url": "https://github.com/rust-lang/rust/commit/391959feb9702a6d46127f0852df27ab75cd2286"}, {"sha": "f2cc501f5f982b18f3ecc4717820024d58065574", "url": "https://api.github.com/repos/rust-lang/rust/commits/f2cc501f5f982b18f3ecc4717820024d58065574", "html_url": "https://github.com/rust-lang/rust/commit/f2cc501f5f982b18f3ecc4717820024d58065574"}], "stats": {"total": 38, "additions": 38, "deletions": 0}, "files": [{"sha": "91ac7e400426068f0c14cda64196e74f63cd0930", "filename": "src/test/ui/nll/issue-43058.rs", "status": "added", "additions": 38, "deletions": 0, "changes": 38, "blob_url": "https://github.com/rust-lang/rust/blob/2025a08393cad5b5e04f6af910a69520d1162cca/src%2Ftest%2Fui%2Fnll%2Fissue-43058.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2025a08393cad5b5e04f6af910a69520d1162cca/src%2Ftest%2Fui%2Fnll%2Fissue-43058.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fnll%2Fissue-43058.rs?ref=2025a08393cad5b5e04f6af910a69520d1162cca", "patch": "@@ -0,0 +1,38 @@\n+// Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// must-compile-successfully\n+\n+#![feature(nll)]\n+\n+use std::borrow::Cow;\n+\n+#[derive(Clone, Debug)]\n+struct S<'a> {\n+    name: Cow<'a, str>\n+}\n+\n+#[derive(Clone, Debug)]\n+struct T<'a> {\n+    s: Cow<'a, [S<'a>]>\n+}\n+\n+fn main() {\n+    let s1 = [S { name: Cow::Borrowed(\"Test1\") }, S { name: Cow::Borrowed(\"Test2\") }];\n+    let b1 = T { s: Cow::Borrowed(&s1) };\n+    let s2 = [S { name: Cow::Borrowed(\"Test3\") }, S { name: Cow::Borrowed(\"Test4\") }];\n+    let b2 = T { s: Cow::Borrowed(&s2) };\n+\n+    let mut v = Vec::new();\n+    v.push(b1);\n+    v.push(b2);\n+\n+    println!(\"{:?}\", v);\n+}"}]}