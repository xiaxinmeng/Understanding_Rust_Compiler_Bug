{"sha": "0526e750cd4e88fbb24ea92e809dfb6eefbf8fa0", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA1MjZlNzUwY2Q0ZTg4ZmJiMjRlYTkyZTgwOWRmYjZlZWZiZjhmYTA=", "commit": {"author": {"name": "Raoul Strackx", "email": "raoul.strackx@fortanix.com", "date": "2020-03-26T12:57:37Z"}, "committer": {"name": "Raoul Strackx", "email": "raoul.strackx@fortanix.com", "date": "2020-09-25T13:02:15Z"}, "message": "started using cc crate", "tree": {"sha": "df54e2d78d6830370052c522929daf9016efb465", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/df54e2d78d6830370052c522929daf9016efb465"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0526e750cd4e88fbb24ea92e809dfb6eefbf8fa0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0526e750cd4e88fbb24ea92e809dfb6eefbf8fa0", "html_url": "https://github.com/rust-lang/rust/commit/0526e750cd4e88fbb24ea92e809dfb6eefbf8fa0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0526e750cd4e88fbb24ea92e809dfb6eefbf8fa0/comments", "author": {"login": "raoulstrackx", "id": 56830709, "node_id": "MDQ6VXNlcjU2ODMwNzA5", "avatar_url": "https://avatars.githubusercontent.com/u/56830709?v=4", "gravatar_id": "", "url": "https://api.github.com/users/raoulstrackx", "html_url": "https://github.com/raoulstrackx", "followers_url": "https://api.github.com/users/raoulstrackx/followers", "following_url": "https://api.github.com/users/raoulstrackx/following{/other_user}", "gists_url": "https://api.github.com/users/raoulstrackx/gists{/gist_id}", "starred_url": "https://api.github.com/users/raoulstrackx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/raoulstrackx/subscriptions", "organizations_url": "https://api.github.com/users/raoulstrackx/orgs", "repos_url": "https://api.github.com/users/raoulstrackx/repos", "events_url": "https://api.github.com/users/raoulstrackx/events{/privacy}", "received_events_url": "https://api.github.com/users/raoulstrackx/received_events", "type": "User", "site_admin": false}, "committer": {"login": "raoulstrackx", "id": 56830709, "node_id": "MDQ6VXNlcjU2ODMwNzA5", "avatar_url": "https://avatars.githubusercontent.com/u/56830709?v=4", "gravatar_id": "", "url": "https://api.github.com/users/raoulstrackx", "html_url": "https://github.com/raoulstrackx", "followers_url": "https://api.github.com/users/raoulstrackx/followers", "following_url": "https://api.github.com/users/raoulstrackx/following{/other_user}", "gists_url": "https://api.github.com/users/raoulstrackx/gists{/gist_id}", "starred_url": "https://api.github.com/users/raoulstrackx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/raoulstrackx/subscriptions", "organizations_url": "https://api.github.com/users/raoulstrackx/orgs", "repos_url": "https://api.github.com/users/raoulstrackx/repos", "events_url": "https://api.github.com/users/raoulstrackx/events{/privacy}", "received_events_url": "https://api.github.com/users/raoulstrackx/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6db05904f6e64714537b37a6ca82010aa6cb46d0", "url": "https://api.github.com/repos/rust-lang/rust/commits/6db05904f6e64714537b37a6ca82010aa6cb46d0", "html_url": "https://github.com/rust-lang/rust/commit/6db05904f6e64714537b37a6ca82010aa6cb46d0"}], "stats": {"total": 33, "additions": 29, "deletions": 4}, "files": [{"sha": "b93b33afb3fc45aa2c2b31ed0cfa4d76f5ae329c", "filename": "src/test/run-make/x86_64-fortanix-unknown-sgx-lvi/cc_plus_one_c.checks", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/0526e750cd4e88fbb24ea92e809dfb6eefbf8fa0/src%2Ftest%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fcc_plus_one_c.checks", "raw_url": "https://github.com/rust-lang/rust/raw/0526e750cd4e88fbb24ea92e809dfb6eefbf8fa0/src%2Ftest%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fcc_plus_one_c.checks", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fcc_plus_one_c.checks?ref=0526e750cd4e88fbb24ea92e809dfb6eefbf8fa0", "patch": "@@ -0,0 +1,6 @@\n+CHECK: cc_plus_one_c\n+CHECK:      lfence\n+CHECK:      popq\n+CHECK-NEXT: popq [[REGISTER:%[a-z]+]]\n+CHECK-NEXT: lfence\n+CHECK-NEXT: jmpq *[[REGISTER]]"}, {"sha": "da1b1e7f06c58ddf5c819fcbcf73eb9b5e549c3c", "filename": "src/test/run-make/x86_64-fortanix-unknown-sgx-lvi/enclave/Cargo.toml", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/0526e750cd4e88fbb24ea92e809dfb6eefbf8fa0/src%2Ftest%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fenclave%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/0526e750cd4e88fbb24ea92e809dfb6eefbf8fa0/src%2Ftest%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fenclave%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fenclave%2FCargo.toml?ref=0526e750cd4e88fbb24ea92e809dfb6eefbf8fa0", "patch": "@@ -7,3 +7,6 @@ edition = \"2018\"\n # See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html\n \n [dependencies]\n+\n+[build-dependencies]\n+cc = \"1.0\""}, {"sha": "3ccb4100ceb98d8bd3e023dada9631984d4af2b6", "filename": "src/test/run-make/x86_64-fortanix-unknown-sgx-lvi/enclave/build.rs", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/0526e750cd4e88fbb24ea92e809dfb6eefbf8fa0/src%2Ftest%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fenclave%2Fbuild.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0526e750cd4e88fbb24ea92e809dfb6eefbf8fa0/src%2Ftest%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fenclave%2Fbuild.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fenclave%2Fbuild.rs?ref=0526e750cd4e88fbb24ea92e809dfb6eefbf8fa0", "patch": "@@ -0,0 +1,5 @@\n+fn main() {\n+    cc::Build::new()\n+        .file(\"foo.c\")\n+        .compile(\"foo\");\n+}"}, {"sha": "bfe7757e4c1fe340a1a55ba996cedee8a9f33a6c", "filename": "src/test/run-make/x86_64-fortanix-unknown-sgx-lvi/enclave/foo.c", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/0526e750cd4e88fbb24ea92e809dfb6eefbf8fa0/src%2Ftest%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fenclave%2Ffoo.c", "raw_url": "https://github.com/rust-lang/rust/raw/0526e750cd4e88fbb24ea92e809dfb6eefbf8fa0/src%2Ftest%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fenclave%2Ffoo.c", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fenclave%2Ffoo.c?ref=0526e750cd4e88fbb24ea92e809dfb6eefbf8fa0", "patch": "@@ -0,0 +1,4 @@\n+\n+int cc_plus_one_c(int *arg) {\n+    return *arg + 1;\n+}"}, {"sha": "25adef5f91714f659f0a7e5345f65b314dc7f479", "filename": "src/test/run-make/x86_64-fortanix-unknown-sgx-lvi/enclave/src/main.rs", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/0526e750cd4e88fbb24ea92e809dfb6eefbf8fa0/src%2Ftest%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fenclave%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0526e750cd4e88fbb24ea92e809dfb6eefbf8fa0/src%2Ftest%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fenclave%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fenclave%2Fsrc%2Fmain.rs?ref=0526e750cd4e88fbb24ea92e809dfb6eefbf8fa0", "patch": "@@ -1,3 +1,11 @@\n+extern {\n+    fn cc_plus_one_c(arg : &u32) -> u32;\n+}\n+\n fn main() {\n-    println!(\"Hello, world!\");\n+    let value : u32 = 41;\n+    \n+    unsafe{\n+        println!(\"Answer to the Ultimate Question of Life, the Universe, and Everything: {}!\", cc_plus_one_c(&value));\n+    }\n }"}, {"sha": "ae95dd9dac0ee197212c4930f7fbfc1d2ffb2b5f", "filename": "src/test/run-make/x86_64-fortanix-unknown-sgx-lvi/script.sh", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/0526e750cd4e88fbb24ea92e809dfb6eefbf8fa0/src%2Ftest%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fscript.sh", "raw_url": "https://github.com/rust-lang/rust/raw/0526e750cd4e88fbb24ea92e809dfb6eefbf8fa0/src%2Ftest%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fscript.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fscript.sh?ref=0526e750cd4e88fbb24ea92e809dfb6eefbf8fa0", "patch": "@@ -12,10 +12,8 @@ function build {\n             # HACK(eddyb) sets `RUSTC_BOOTSTRAP=1` so Cargo can accept nightly features.\n             # These come from the top-level Rust workspace, that this crate is not a\n             # member of, but Cargo tries to load the workspace `Cargo.toml` anyway.\n-            env RUSTC_BOOTSTRAP=1  \\\n+            env RUSTC_BOOTSTRAP=1\n                 cargo -v run --target $TARGET\n-            env RUSTC_BOOTSTRAP=1  \\\n-                cargo -v run --target $TARGET --release \n         popd\n     popd\n }\n@@ -40,3 +38,4 @@ build\n #check \"libunwind::Registers_x86_64::jumpto()\" jumpto.checks\n \n check \"std::io::stdio::_print::h87f0c238421c45bc\" print.checks\n+check cc_plus_one_c cc_plus_one_c.checks"}]}