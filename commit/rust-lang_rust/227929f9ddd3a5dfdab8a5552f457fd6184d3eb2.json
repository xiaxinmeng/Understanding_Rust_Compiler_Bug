{"sha": "227929f9ddd3a5dfdab8a5552f457fd6184d3eb2", "node_id": "MDY6Q29tbWl0NzI0NzEyOjIyNzkyOWY5ZGRkM2E1ZGZkYWI4YTU1NTJmNDU3ZmQ2MTg0ZDNlYjI=", "commit": {"author": {"name": "Craig Disselkoen", "email": "craigdissel@gmail.com", "date": "2020-05-06T20:28:32Z"}, "committer": {"name": "Craig Disselkoen", "email": "craigdissel@gmail.com", "date": "2020-05-06T20:29:22Z"}, "message": "simplify by using bail! macro", "tree": {"sha": "bb6c9f44304ecbddd4999aefff5f2beb09dfb272", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bb6c9f44304ecbddd4999aefff5f2beb09dfb272"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/227929f9ddd3a5dfdab8a5552f457fd6184d3eb2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/227929f9ddd3a5dfdab8a5552f457fd6184d3eb2", "html_url": "https://github.com/rust-lang/rust/commit/227929f9ddd3a5dfdab8a5552f457fd6184d3eb2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/227929f9ddd3a5dfdab8a5552f457fd6184d3eb2/comments", "author": {"login": "cdisselkoen", "id": 4458638, "node_id": "MDQ6VXNlcjQ0NTg2Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/4458638?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cdisselkoen", "html_url": "https://github.com/cdisselkoen", "followers_url": "https://api.github.com/users/cdisselkoen/followers", "following_url": "https://api.github.com/users/cdisselkoen/following{/other_user}", "gists_url": "https://api.github.com/users/cdisselkoen/gists{/gist_id}", "starred_url": "https://api.github.com/users/cdisselkoen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cdisselkoen/subscriptions", "organizations_url": "https://api.github.com/users/cdisselkoen/orgs", "repos_url": "https://api.github.com/users/cdisselkoen/repos", "events_url": "https://api.github.com/users/cdisselkoen/events{/privacy}", "received_events_url": "https://api.github.com/users/cdisselkoen/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cdisselkoen", "id": 4458638, "node_id": "MDQ6VXNlcjQ0NTg2Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/4458638?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cdisselkoen", "html_url": "https://github.com/cdisselkoen", "followers_url": "https://api.github.com/users/cdisselkoen/followers", "following_url": "https://api.github.com/users/cdisselkoen/following{/other_user}", "gists_url": "https://api.github.com/users/cdisselkoen/gists{/gist_id}", "starred_url": "https://api.github.com/users/cdisselkoen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cdisselkoen/subscriptions", "organizations_url": "https://api.github.com/users/cdisselkoen/orgs", "repos_url": "https://api.github.com/users/cdisselkoen/repos", "events_url": "https://api.github.com/users/cdisselkoen/events{/privacy}", "received_events_url": "https://api.github.com/users/cdisselkoen/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5d4648884baf591fe8f53e8ceae6d559564e9797", "url": "https://api.github.com/repos/rust-lang/rust/commits/5d4648884baf591fe8f53e8ceae6d559564e9797", "html_url": "https://github.com/rust-lang/rust/commit/5d4648884baf591fe8f53e8ceae6d559564e9797"}], "stats": {"total": 11, "additions": 7, "deletions": 4}, "files": [{"sha": "4f94bffdee19e80c9a55a96ab0433940d953200d", "filename": "crates/ra_env/src/lib.rs", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/227929f9ddd3a5dfdab8a5552f457fd6184d3eb2/crates%2Fra_env%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/227929f9ddd3a5dfdab8a5552f457fd6184d3eb2/crates%2Fra_env%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_env%2Fsrc%2Flib.rs?ref=227929f9ddd3a5dfdab8a5552f457fd6184d3eb2", "patch": "@@ -2,7 +2,7 @@\n //! [`get_path_for_executable`](fn.get_path_for_executable.html).\n //! See docs there for more information.\n \n-use anyhow::{Error, Result};\n+use anyhow::{bail, Result};\n use std::env;\n use std::path::{Path, PathBuf};\n use std::process::Command;\n@@ -27,10 +27,10 @@ pub fn get_path_for_executable(executable_name: impl AsRef<str>) -> Result<PathB\n         if is_valid_executable(&path) {\n             Ok(path.into())\n         } else {\n-            Err(Error::msg(format!(\n+            bail!(\n                 \"`{}` environment variable points to something that's not a valid executable\",\n                 env_var\n-            )))\n+            )\n         }\n     } else {\n         if is_valid_executable(executable_name) {\n@@ -50,7 +50,10 @@ pub fn get_path_for_executable(executable_name: impl AsRef<str>) -> Result<PathB\n         // to inherit environment variables including $PATH, $CARGO, $RUSTC, etc from that terminal;\n         // but launching VSCode from Dock does not inherit environment variables from a terminal.\n         // For more discussion, see #3118.\n-        Err(Error::msg(format!(\"Failed to find `{}` executable. Make sure `{}` is in `$PATH`, or set `${}` to point to a valid executable.\", executable_name, executable_name, env_var)))\n+        bail!(\n+            \"Failed to find `{}` executable. Make sure `{}` is in `$PATH`, or set `${}` to point to a valid executable.\",\n+            executable_name, executable_name, env_var\n+        )\n     }\n }\n "}]}