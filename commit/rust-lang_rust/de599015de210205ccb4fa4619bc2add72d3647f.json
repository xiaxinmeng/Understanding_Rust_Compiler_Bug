{"sha": "de599015de210205ccb4fa4619bc2add72d3647f", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRlNTk5MDE1ZGUyMTAyMDVjY2I0ZmE0NjE5YmMyYWRkNzJkMzY0N2Y=", "commit": {"author": {"name": "Marcus Klaas de Vries", "email": "mail@marcusklaas.nl", "date": "2015-11-14T21:00:11Z"}, "committer": {"name": "Marcus Klaas de Vries", "email": "mail@marcusklaas.nl", "date": "2015-11-14T21:00:11Z"}, "message": "Merge pull request #601 from thorbenk/chains_tabbed_indent\n\nChains tabbed indent", "tree": {"sha": "5e3ccab5d4cae9f2c607577c915675c3c950d444", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5e3ccab5d4cae9f2c607577c915675c3c950d444"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/de599015de210205ccb4fa4619bc2add72d3647f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/de599015de210205ccb4fa4619bc2add72d3647f", "html_url": "https://github.com/rust-lang/rust/commit/de599015de210205ccb4fa4619bc2add72d3647f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/de599015de210205ccb4fa4619bc2add72d3647f/comments", "author": {"login": "marcusklaas", "id": 1255413, "node_id": "MDQ6VXNlcjEyNTU0MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1255413?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marcusklaas", "html_url": "https://github.com/marcusklaas", "followers_url": "https://api.github.com/users/marcusklaas/followers", "following_url": "https://api.github.com/users/marcusklaas/following{/other_user}", "gists_url": "https://api.github.com/users/marcusklaas/gists{/gist_id}", "starred_url": "https://api.github.com/users/marcusklaas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marcusklaas/subscriptions", "organizations_url": "https://api.github.com/users/marcusklaas/orgs", "repos_url": "https://api.github.com/users/marcusklaas/repos", "events_url": "https://api.github.com/users/marcusklaas/events{/privacy}", "received_events_url": "https://api.github.com/users/marcusklaas/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marcusklaas", "id": 1255413, "node_id": "MDQ6VXNlcjEyNTU0MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1255413?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marcusklaas", "html_url": "https://github.com/marcusklaas", "followers_url": "https://api.github.com/users/marcusklaas/followers", "following_url": "https://api.github.com/users/marcusklaas/following{/other_user}", "gists_url": "https://api.github.com/users/marcusklaas/gists{/gist_id}", "starred_url": "https://api.github.com/users/marcusklaas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marcusklaas/subscriptions", "organizations_url": "https://api.github.com/users/marcusklaas/orgs", "repos_url": "https://api.github.com/users/marcusklaas/repos", "events_url": "https://api.github.com/users/marcusklaas/events{/privacy}", "received_events_url": "https://api.github.com/users/marcusklaas/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7fe92728491690d59e8bb101473c4be2cb271e30", "url": "https://api.github.com/repos/rust-lang/rust/commits/7fe92728491690d59e8bb101473c4be2cb271e30", "html_url": "https://github.com/rust-lang/rust/commit/7fe92728491690d59e8bb101473c4be2cb271e30"}, {"sha": "d4be6a43e98883c04d38b101c663ddf990e247f3", "url": "https://api.github.com/repos/rust-lang/rust/commits/d4be6a43e98883c04d38b101c663ddf990e247f3", "html_url": "https://github.com/rust-lang/rust/commit/d4be6a43e98883c04d38b101c663ddf990e247f3"}], "stats": {"total": 56, "additions": 55, "deletions": 1}, "files": [{"sha": "31cd9624016b6b05f3a2e57c84d19bbe127f0c22", "filename": "src/chains.rs", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/de599015de210205ccb4fa4619bc2add72d3647f/src%2Fchains.rs", "raw_url": "https://github.com/rust-lang/rust/raw/de599015de210205ccb4fa4619bc2add72d3647f/src%2Fchains.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fchains.rs?ref=de599015de210205ccb4fa4619bc2add72d3647f", "patch": "@@ -56,7 +56,15 @@ pub fn rewrite_chain(mut expr: &ast::Expr,\n     } else if is_block_expr(parent, &parent_rewrite) {\n         (parent_block_indent, false)\n     } else {\n-        (offset + Indent::new(context.config.tab_spaces, 0), false)\n+        match context.config.chain_indent {\n+            BlockIndentStyle::Inherit => (context.block_indent, false),\n+            BlockIndentStyle::Tabbed => {\n+                (context.block_indent.block_indent(context.config), false)\n+            }\n+            BlockIndentStyle::Visual => {\n+                (offset + Indent::new(context.config.tab_spaces, 0), false)\n+            }\n+        }\n     };\n \n     let max_width = try_opt!((width + offset.width()).checked_sub(indent.width()));"}, {"sha": "dcf0816335b3d74bb1f9e41a8015c3fe1b072573", "filename": "src/config.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/de599015de210205ccb4fa4619bc2add72d3647f/src%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/de599015de210205ccb4fa4619bc2add72d3647f/src%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fconfig.rs?ref=de599015de210205ccb4fa4619bc2add72d3647f", "patch": "@@ -294,6 +294,7 @@ create_config! {\n     report_fixme: ReportTactic, ReportTactic::Never,\n         \"Report all, none or unnumbered occurrences of FIXME in source file comments\";\n     chain_base_indent: BlockIndentStyle, BlockIndentStyle::Visual, \"Indent on chain base\";\n+    chain_indent: BlockIndentStyle, BlockIndentStyle::Visual, \"Indentation of chain\";\n     reorder_imports: bool, false, \"Reorder import statements alphabetically\";\n     single_line_if_else: bool, false, \"Put else on same line as closing brace for if statements\";\n     format_strings: bool, true, \"Format string literals, or leave as is\";"}, {"sha": "67272a656c613453a11ca1ee8fd79c257b2f93d8", "filename": "tests/source/chains-indent-inherit.rs", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/de599015de210205ccb4fa4619bc2add72d3647f/tests%2Fsource%2Fchains-indent-inherit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/de599015de210205ccb4fa4619bc2add72d3647f/tests%2Fsource%2Fchains-indent-inherit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fchains-indent-inherit.rs?ref=de599015de210205ccb4fa4619bc2add72d3647f", "patch": "@@ -0,0 +1,5 @@\n+// rustfmt-chain_indent: Inherit\n+\n+fn test() {\n+    let x = my_long_function().my_even_longer_function().my_nested_function().some_random_name().another_function().do_it();\n+}"}, {"sha": "89bf5bb1a69fdc2ba57e83251d439795aff0785e", "filename": "tests/source/chains-indent-tabbed.rs", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/de599015de210205ccb4fa4619bc2add72d3647f/tests%2Fsource%2Fchains-indent-tabbed.rs", "raw_url": "https://github.com/rust-lang/rust/raw/de599015de210205ccb4fa4619bc2add72d3647f/tests%2Fsource%2Fchains-indent-tabbed.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fchains-indent-tabbed.rs?ref=de599015de210205ccb4fa4619bc2add72d3647f", "patch": "@@ -0,0 +1,5 @@\n+// rustfmt-chain_indent: Tabbed\n+\n+fn test() {\n+    let x = my_long_function().my_even_longer_function().my_nested_function().some_random_name().another_function().do_it();\n+}"}, {"sha": "7e7f0558ffe5b95f89807f80a62c5bd773b29c8a", "filename": "tests/source/chains-indent-visual.rs", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/de599015de210205ccb4fa4619bc2add72d3647f/tests%2Fsource%2Fchains-indent-visual.rs", "raw_url": "https://github.com/rust-lang/rust/raw/de599015de210205ccb4fa4619bc2add72d3647f/tests%2Fsource%2Fchains-indent-visual.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fchains-indent-visual.rs?ref=de599015de210205ccb4fa4619bc2add72d3647f", "patch": "@@ -0,0 +1,5 @@\n+// rustfmt-chain_indent: Visual\n+\n+fn test() {\n+    let x = my_long_function().my_even_longer_function().my_nested_function().some_random_name().another_function().do_it();\n+}"}, {"sha": "76d3ef8204b19fcfaab159d75e711321ae017cf5", "filename": "tests/target/chains-indent-inherit.rs", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/de599015de210205ccb4fa4619bc2add72d3647f/tests%2Ftarget%2Fchains-indent-inherit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/de599015de210205ccb4fa4619bc2add72d3647f/tests%2Ftarget%2Fchains-indent-inherit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fchains-indent-inherit.rs?ref=de599015de210205ccb4fa4619bc2add72d3647f", "patch": "@@ -0,0 +1,10 @@\n+// rustfmt-chain_indent: Inherit\n+\n+fn test() {\n+    let x = my_long_function()\n+    .my_even_longer_function()\n+    .my_nested_function()\n+    .some_random_name()\n+    .another_function()\n+    .do_it();\n+}"}, {"sha": "4611b0587ff7b7e844207d100e018bfdf5e48341", "filename": "tests/target/chains-indent-tabbed.rs", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/de599015de210205ccb4fa4619bc2add72d3647f/tests%2Ftarget%2Fchains-indent-tabbed.rs", "raw_url": "https://github.com/rust-lang/rust/raw/de599015de210205ccb4fa4619bc2add72d3647f/tests%2Ftarget%2Fchains-indent-tabbed.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fchains-indent-tabbed.rs?ref=de599015de210205ccb4fa4619bc2add72d3647f", "patch": "@@ -0,0 +1,10 @@\n+// rustfmt-chain_indent: Tabbed\n+\n+fn test() {\n+    let x = my_long_function()\n+        .my_even_longer_function()\n+        .my_nested_function()\n+        .some_random_name()\n+        .another_function()\n+        .do_it();\n+}"}, {"sha": "e91317bd5dec29fadbff8dadbea5661406805e30", "filename": "tests/target/chains-indent-visual.rs", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/de599015de210205ccb4fa4619bc2add72d3647f/tests%2Ftarget%2Fchains-indent-visual.rs", "raw_url": "https://github.com/rust-lang/rust/raw/de599015de210205ccb4fa4619bc2add72d3647f/tests%2Ftarget%2Fchains-indent-visual.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fchains-indent-visual.rs?ref=de599015de210205ccb4fa4619bc2add72d3647f", "patch": "@@ -0,0 +1,10 @@\n+// rustfmt-chain_indent: Visual\n+\n+fn test() {\n+    let x = my_long_function()\n+                .my_even_longer_function()\n+                .my_nested_function()\n+                .some_random_name()\n+                .another_function()\n+                .do_it();\n+}"}]}