{"sha": "990d6833b24d585035ca42dbc25e990ce589917b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk5MGQ2ODMzYjI0ZDU4NTAzNWNhNDJkYmMyNWU5OTBjZTU4OTkxN2I=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-05-01T18:42:58Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-05-01T18:42:58Z"}, "message": "Auto merge of #4048 - matthiaskrgr:driver_version, r=phansch\n\nclippy-driver: use rustc_tools_util to get version info.\n\nchangelog: make \"clippy-driver -V\" output the same information as \"cargo clippy -V\"", "tree": {"sha": "e10ca729e43d9a16e8dae9c6c5e9691aa874eb40", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e10ca729e43d9a16e8dae9c6c5e9691aa874eb40"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/990d6833b24d585035ca42dbc25e990ce589917b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/990d6833b24d585035ca42dbc25e990ce589917b", "html_url": "https://github.com/rust-lang/rust/commit/990d6833b24d585035ca42dbc25e990ce589917b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/990d6833b24d585035ca42dbc25e990ce589917b/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5162ea5d0ca39a1a8dbce8ae301dbe62d6360309", "url": "https://api.github.com/repos/rust-lang/rust/commits/5162ea5d0ca39a1a8dbce8ae301dbe62d6360309", "html_url": "https://github.com/rust-lang/rust/commit/5162ea5d0ca39a1a8dbce8ae301dbe62d6360309"}, {"sha": "6967cf59a4f5664d97086ddccd8cc9b29778d0b7", "url": "https://api.github.com/repos/rust-lang/rust/commits/6967cf59a4f5664d97086ddccd8cc9b29778d0b7", "html_url": "https://github.com/rust-lang/rust/commit/6967cf59a4f5664d97086ddccd8cc9b29778d0b7"}], "stats": {"total": 11, "additions": 5, "deletions": 6}, "files": [{"sha": "e86e51b7f88c7b198e4ab8f344deb51b70f8cad3", "filename": "clippy_lints/src/consts.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/990d6833b24d585035ca42dbc25e990ce589917b/clippy_lints%2Fsrc%2Fconsts.rs", "raw_url": "https://github.com/rust-lang/rust/raw/990d6833b24d585035ca42dbc25e990ce589917b/clippy_lints%2Fsrc%2Fconsts.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fconsts.rs?ref=990d6833b24d585035ca42dbc25e990ce589917b", "patch": "@@ -344,7 +344,7 @@ impl<'c, 'cc> ConstEvalLateContext<'c, 'cc> {\n                 }\n                 ret\n             },\n-            // FIXME: cover all useable cases.\n+            // FIXME: cover all usable cases.\n             _ => None,\n         }\n     }"}, {"sha": "f4a656722b9d067ef657d23d3029f9701427b0fd", "filename": "src/driver.rs", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/990d6833b24d585035ca42dbc25e990ce589917b/src%2Fdriver.rs", "raw_url": "https://github.com/rust-lang/rust/raw/990d6833b24d585035ca42dbc25e990ce589917b/src%2Fdriver.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdriver.rs?ref=990d6833b24d585035ca42dbc25e990ce589917b", "patch": "@@ -10,13 +10,11 @@ extern crate rustc_interface;\n extern crate rustc_plugin;\n \n use rustc_interface::interface;\n+use rustc_tools_util::*;\n+\n use std::path::Path;\n use std::process::{exit, Command};\n \n-fn show_version() {\n-    println!(env!(\"CARGO_PKG_VERSION\"));\n-}\n-\n /// If a command-line option matches `find_arg`, then apply the predicate `pred` on its value. If\n /// true, then return it. The parameter is assumed to be either `--arg=value` or `--arg value`.\n fn arg_value<'a>(\n@@ -117,7 +115,8 @@ pub fn main() {\n             use std::env;\n \n             if std::env::args().any(|a| a == \"--version\" || a == \"-V\") {\n-                show_version();\n+                let version_info = rustc_tools_util::get_version_info!();\n+                println!(\"{}\", version_info);\n                 exit(0);\n             }\n "}]}