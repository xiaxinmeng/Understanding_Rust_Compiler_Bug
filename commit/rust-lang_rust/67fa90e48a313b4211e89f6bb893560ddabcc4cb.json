{"sha": "67fa90e48a313b4211e89f6bb893560ddabcc4cb", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY3ZmE5MGU0OGEzMTNiNDIxMWU4OWY2YmI4OTM1NjBkZGFiY2M0Y2I=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2014-05-12T22:39:07Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2014-05-14T22:34:14Z"}, "message": "Print 'rustc' and 'rustdoc' as the command name for --version\n\nInstead of just blindly printing arg[0], use a constant string.\nPartial fix for #13582", "tree": {"sha": "639656bbfe59afec39f0ad455de97f34dad7946b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/639656bbfe59afec39f0ad455de97f34dad7946b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/67fa90e48a313b4211e89f6bb893560ddabcc4cb", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/67fa90e48a313b4211e89f6bb893560ddabcc4cb", "html_url": "https://github.com/rust-lang/rust/commit/67fa90e48a313b4211e89f6bb893560ddabcc4cb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/67fa90e48a313b4211e89f6bb893560ddabcc4cb/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2a7a39191a83fc2a63df6cb47acd344ae669d9c7", "url": "https://api.github.com/repos/rust-lang/rust/commits/2a7a39191a83fc2a63df6cb47acd344ae669d9c7", "html_url": "https://github.com/rust-lang/rust/commit/2a7a39191a83fc2a63df6cb47acd344ae669d9c7"}], "stats": {"total": 19, "additions": 10, "deletions": 9}, "files": [{"sha": "b92075444234bd17c4b926841e691288fa115b97", "filename": "src/librustc/driver/mod.rs", "status": "modified", "additions": 9, "deletions": 8, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/67fa90e48a313b4211e89f6bb893560ddabcc4cb/src%2Flibrustc%2Fdriver%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/67fa90e48a313b4211e89f6bb893560ddabcc4cb/src%2Flibrustc%2Fdriver%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fdriver%2Fmod.rs?ref=67fa90e48a313b4211e89f6bb893560ddabcc4cb", "patch": "@@ -104,17 +104,17 @@ fn run_compiler(args: &[~str]) {\n     driver::compile_input(sess, cfg, &input, &odir, &ofile);\n }\n \n-pub fn version(argv0: &str) {\n+pub fn version(command: &str) {\n     let vers = match option_env!(\"CFG_VERSION\") {\n         Some(vers) => vers,\n         None => \"unknown version\"\n     };\n-    println!(\"{} {}\", argv0, vers);\n+    println!(\"{} {}\", command, vers);\n     println!(\"host: {}\", driver::host_triple());\n }\n \n-fn usage(argv0: &str) {\n-    let message = format!(\"Usage: {} [OPTIONS] INPUT\", argv0);\n+fn usage() {\n+    let message = format!(\"Usage: rustc [OPTIONS] INPUT\");\n     println!(\"{}\\n\\\n Additional help:\n     -C help             Print codegen options\n@@ -192,9 +192,10 @@ fn describe_codegen_flags() {\n /// should continue, returns a getopts::Matches object parsed from args, otherwise\n /// returns None.\n pub fn handle_options(mut args: Vec<~str>) -> Option<getopts::Matches> {\n-    let binary = args.shift().unwrap();\n+    // Throw away the first argument, the name of the binary\n+    let _binary = args.shift().unwrap();\n \n-    if args.is_empty() { usage(binary); return None; }\n+    if args.is_empty() { usage(); return None; }\n \n     let matches =\n         match getopts::getopts(args.as_slice(), config::optgroups().as_slice()) {\n@@ -205,7 +206,7 @@ pub fn handle_options(mut args: Vec<~str>) -> Option<getopts::Matches> {\n         };\n \n     if matches.opt_present(\"h\") || matches.opt_present(\"help\") {\n-        usage(binary);\n+        usage();\n         return None;\n     }\n \n@@ -234,7 +235,7 @@ pub fn handle_options(mut args: Vec<~str>) -> Option<getopts::Matches> {\n     }\n \n     if matches.opt_present(\"v\") || matches.opt_present(\"version\") {\n-        version(binary);\n+        version(\"rustc\");\n         return None;\n     }\n "}, {"sha": "757adcc7671b44dd9002c9c0a9a96da4ee35fcd7", "filename": "src/librustdoc/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/67fa90e48a313b4211e89f6bb893560ddabcc4cb/src%2Flibrustdoc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/67fa90e48a313b4211e89f6bb893560ddabcc4cb/src%2Flibrustdoc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Flib.rs?ref=67fa90e48a313b4211e89f6bb893560ddabcc4cb", "patch": "@@ -153,7 +153,7 @@ pub fn main_args(args: &[StrBuf]) -> int {\n         usage(args[0].as_slice());\n         return 0;\n     } else if matches.opt_present(\"version\") {\n-        rustc::driver::version(args[0].as_slice());\n+        rustc::driver::version(\"rustdoc\");\n         return 0;\n     }\n "}]}