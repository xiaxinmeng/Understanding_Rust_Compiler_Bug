{"sha": "f6759ba3bbc2c17771735327238c4ed936d5cdc9", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY2NzU5YmEzYmJjMmMxNzc3MTczNTMyNzIzOGM0ZWQ5MzZkNWNkYzk=", "commit": {"author": {"name": "Zac Pullar-Strecker", "email": "zacmps@gmail.com", "date": "2020-09-05T05:21:52Z"}, "committer": {"name": "Zac Pullar-Strecker", "email": "zacmps@gmail.com", "date": "2020-10-08T02:05:23Z"}, "message": "Add ignored test to demonstrate ImportMap bug", "tree": {"sha": "8313efdd63e6f30e5da2f0662a8b5d5f479fcb97", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8313efdd63e6f30e5da2f0662a8b5d5f479fcb97"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f6759ba3bbc2c17771735327238c4ed936d5cdc9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f6759ba3bbc2c17771735327238c4ed936d5cdc9", "html_url": "https://github.com/rust-lang/rust/commit/f6759ba3bbc2c17771735327238c4ed936d5cdc9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f6759ba3bbc2c17771735327238c4ed936d5cdc9/comments", "author": {"login": "zacps", "id": 9827696, "node_id": "MDQ6VXNlcjk4Mjc2OTY=", "avatar_url": "https://avatars.githubusercontent.com/u/9827696?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zacps", "html_url": "https://github.com/zacps", "followers_url": "https://api.github.com/users/zacps/followers", "following_url": "https://api.github.com/users/zacps/following{/other_user}", "gists_url": "https://api.github.com/users/zacps/gists{/gist_id}", "starred_url": "https://api.github.com/users/zacps/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zacps/subscriptions", "organizations_url": "https://api.github.com/users/zacps/orgs", "repos_url": "https://api.github.com/users/zacps/repos", "events_url": "https://api.github.com/users/zacps/events{/privacy}", "received_events_url": "https://api.github.com/users/zacps/received_events", "type": "User", "site_admin": false}, "committer": {"login": "zacps", "id": 9827696, "node_id": "MDQ6VXNlcjk4Mjc2OTY=", "avatar_url": "https://avatars.githubusercontent.com/u/9827696?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zacps", "html_url": "https://github.com/zacps", "followers_url": "https://api.github.com/users/zacps/followers", "following_url": "https://api.github.com/users/zacps/following{/other_user}", "gists_url": "https://api.github.com/users/zacps/gists{/gist_id}", "starred_url": "https://api.github.com/users/zacps/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zacps/subscriptions", "organizations_url": "https://api.github.com/users/zacps/orgs", "repos_url": "https://api.github.com/users/zacps/repos", "events_url": "https://api.github.com/users/zacps/events{/privacy}", "received_events_url": "https://api.github.com/users/zacps/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6cae6b8f3cf284f9f386ea8ce7e347043fe9a040", "url": "https://api.github.com/repos/rust-lang/rust/commits/6cae6b8f3cf284f9f386ea8ce7e347043fe9a040", "html_url": "https://github.com/rust-lang/rust/commit/6cae6b8f3cf284f9f386ea8ce7e347043fe9a040"}], "stats": {"total": 27, "additions": 26, "deletions": 1}, "files": [{"sha": "164783e1495895eab56e74d629db8a4d36b3e802", "filename": "crates/ide/src/doc_links.rs", "status": "modified", "additions": 26, "deletions": 1, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/f6759ba3bbc2c17771735327238c4ed936d5cdc9/crates%2Fide%2Fsrc%2Fdoc_links.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f6759ba3bbc2c17771735327238c4ed936d5cdc9/crates%2Fide%2Fsrc%2Fdoc_links.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Fdoc_links.rs?ref=f6759ba3bbc2c17771735327238c4ed936d5cdc9", "patch": "@@ -439,7 +439,7 @@ mod tests {\n \n     fn check(ra_fixture: &str, expect: Expect) {\n         let (analysis, position) = analysis_and_position(ra_fixture);\n-        let url = analysis.external_docs(position).unwrap().unwrap();\n+        let url = analysis.external_docs(position).unwrap().expect(\"could not find url for symbol\");\n \n         expect.assert_eq(&url)\n     }\n@@ -517,4 +517,29 @@ pub struct Foo {\n             expect![[r##\"https://docs.rs/test/*/test/struct.Foo.html#structfield.field\"##]],\n         );\n     }\n+\n+    // FIXME: ImportMap will return re-export paths instead of public module\n+    // paths. The correct path to documentation will never be a re-export.\n+    // This problem stops us from resolving stdlib items included in the prelude\n+    // such as `Option::Some` correctly.\n+    #[ignore = \"ImportMap may return re-exports\"]\n+    #[test]\n+    fn test_reexport_order() {\n+        check(\n+            r#\"\n+pub mod wrapper {\n+    pub use module::Item;\n+\n+    pub mod module {\n+        pub struct Item;\n+    }\n+}\n+\n+fn foo() {\n+    let bar: wrapper::It<|>em;\n+}\n+        \"#,\n+            expect![[r#\"https://docs.rs/test/*/test/wrapper/module/struct.Item.html\"#]],\n+        )\n+    }\n }"}]}