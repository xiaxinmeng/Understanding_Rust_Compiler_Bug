{"sha": "83dfb422fe71979914d3db67db135e160ab29dcd", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgzZGZiNDIyZmU3MTk3OTkxNGQzZGI2N2RiMTM1ZTE2MGFiMjlkY2Q=", "commit": {"author": {"name": "Dylan MacKenzie", "email": "ecstaticmorse@gmail.com", "date": "2020-01-21T21:37:02Z"}, "committer": {"name": "Dylan MacKenzie", "email": "ecstaticmorse@gmail.com", "date": "2020-02-09T18:33:06Z"}, "message": "Don't break first line", "tree": {"sha": "2ae6837168aafb72efe0cded09034d8f02089b85", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2ae6837168aafb72efe0cded09034d8f02089b85"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/83dfb422fe71979914d3db67db135e160ab29dcd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/83dfb422fe71979914d3db67db135e160ab29dcd", "html_url": "https://github.com/rust-lang/rust/commit/83dfb422fe71979914d3db67db135e160ab29dcd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/83dfb422fe71979914d3db67db135e160ab29dcd/comments", "author": {"login": "ecstatic-morse", "id": 29463364, "node_id": "MDQ6VXNlcjI5NDYzMzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29463364?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ecstatic-morse", "html_url": "https://github.com/ecstatic-morse", "followers_url": "https://api.github.com/users/ecstatic-morse/followers", "following_url": "https://api.github.com/users/ecstatic-morse/following{/other_user}", "gists_url": "https://api.github.com/users/ecstatic-morse/gists{/gist_id}", "starred_url": "https://api.github.com/users/ecstatic-morse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ecstatic-morse/subscriptions", "organizations_url": "https://api.github.com/users/ecstatic-morse/orgs", "repos_url": "https://api.github.com/users/ecstatic-morse/repos", "events_url": "https://api.github.com/users/ecstatic-morse/events{/privacy}", "received_events_url": "https://api.github.com/users/ecstatic-morse/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ecstatic-morse", "id": 29463364, "node_id": "MDQ6VXNlcjI5NDYzMzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29463364?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ecstatic-morse", "html_url": "https://github.com/ecstatic-morse", "followers_url": "https://api.github.com/users/ecstatic-morse/followers", "following_url": "https://api.github.com/users/ecstatic-morse/following{/other_user}", "gists_url": "https://api.github.com/users/ecstatic-morse/gists{/gist_id}", "starred_url": "https://api.github.com/users/ecstatic-morse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ecstatic-morse/subscriptions", "organizations_url": "https://api.github.com/users/ecstatic-morse/orgs", "repos_url": "https://api.github.com/users/ecstatic-morse/repos", "events_url": "https://api.github.com/users/ecstatic-morse/events{/privacy}", "received_events_url": "https://api.github.com/users/ecstatic-morse/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fb14386de355c2bf437515f20975612cda04ef70", "url": "https://api.github.com/repos/rust-lang/rust/commits/fb14386de355c2bf437515f20975612cda04ef70", "html_url": "https://github.com/rust-lang/rust/commit/fb14386de355c2bf437515f20975612cda04ef70"}], "stats": {"total": 24, "additions": 12, "deletions": 12}, "files": [{"sha": "f70564d401913a8417b68c02e7593e444435f1d0", "filename": "src/librustc_mir/dataflow/generic/graphviz.rs", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/83dfb422fe71979914d3db67db135e160ab29dcd/src%2Flibrustc_mir%2Fdataflow%2Fgeneric%2Fgraphviz.rs", "raw_url": "https://github.com/rust-lang/rust/raw/83dfb422fe71979914d3db67db135e160ab29dcd/src%2Flibrustc_mir%2Fdataflow%2Fgeneric%2Fgraphviz.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fdataflow%2Fgeneric%2Fgraphviz.rs?ref=83dfb422fe71979914d3db67db135e160ab29dcd", "patch": "@@ -610,25 +610,25 @@ where\n     let mut line_break_inserted = false;\n \n     for idx in elems {\n-        if first {\n-            first = false;\n-        } else {\n-            write!(w, \"{}\", sep)?;\n-            curr_line_width += sep_width;\n-        }\n-\n         buf.clear();\n         analysis.pretty_print_idx(&mut buf, idx)?;\n         let idx_str =\n             str::from_utf8(&buf).expect(\"Output of `pretty_print_idx` must be valid UTF-8\");\n         let escaped = dot::escape_html(idx_str);\n         let escaped_width = escaped.chars().count();\n \n-        if let Some(line_break) = &line_break {\n-            if curr_line_width + sep_width + escaped_width > line_break.limit {\n-                write!(w, \"{}\", line_break.sequence)?;\n-                line_break_inserted = true;\n-                curr_line_width = 0;\n+        if first {\n+            first = false;\n+        } else {\n+            write!(w, \"{}\", sep)?;\n+            curr_line_width += sep_width;\n+\n+            if let Some(line_break) = &line_break {\n+                if curr_line_width + sep_width + escaped_width > line_break.limit {\n+                    write!(w, \"{}\", line_break.sequence)?;\n+                    line_break_inserted = true;\n+                    curr_line_width = 0;\n+                }\n             }\n         }\n "}]}