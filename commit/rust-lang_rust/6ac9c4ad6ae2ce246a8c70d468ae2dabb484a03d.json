{"sha": "6ac9c4ad6ae2ce246a8c70d468ae2dabb484a03d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZhYzljNGFkNmFlMmNlMjQ2YThjNzBkNDY4YWUyZGFiYjQ4NGEwM2Q=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-02-07T14:04:50Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-02-07T14:04:50Z"}, "message": "Cleanup", "tree": {"sha": "fe6314a6cc95c0420ffac90b6d32bc9be27569fa", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fe6314a6cc95c0420ffac90b6d32bc9be27569fa"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6ac9c4ad6ae2ce246a8c70d468ae2dabb484a03d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6ac9c4ad6ae2ce246a8c70d468ae2dabb484a03d", "html_url": "https://github.com/rust-lang/rust/commit/6ac9c4ad6ae2ce246a8c70d468ae2dabb484a03d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6ac9c4ad6ae2ce246a8c70d468ae2dabb484a03d/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2d95047f7c273f9e97c33b93487c9091ec6abcb7", "url": "https://api.github.com/repos/rust-lang/rust/commits/2d95047f7c273f9e97c33b93487c9091ec6abcb7", "html_url": "https://github.com/rust-lang/rust/commit/2d95047f7c273f9e97c33b93487c9091ec6abcb7"}], "stats": {"total": 15, "additions": 11, "deletions": 4}, "files": [{"sha": "44d6f6808168f0b002960226227192cadc360634", "filename": "crates/ra_assists/src/assist_ctx.rs", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/6ac9c4ad6ae2ce246a8c70d468ae2dabb484a03d/crates%2Fra_assists%2Fsrc%2Fassist_ctx.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6ac9c4ad6ae2ce246a8c70d468ae2dabb484a03d/crates%2Fra_assists%2Fsrc%2Fassist_ctx.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_assists%2Fsrc%2Fassist_ctx.rs?ref=6ac9c4ad6ae2ce246a8c70d468ae2dabb484a03d", "patch": "@@ -57,7 +57,7 @@ pub(crate) struct AssistCtx<'a> {\n     should_compute_edit: bool,\n }\n \n-impl<'a> Clone for AssistCtx<'a> {\n+impl Clone for AssistCtx<'_> {\n     fn clone(&self) -> Self {\n         AssistCtx {\n             db: self.db,\n@@ -80,8 +80,7 @@ impl<'a> AssistCtx<'a> {\n         label: impl Into<String>,\n         f: impl FnOnce(&mut ActionBuilder),\n     ) -> Option<Assist> {\n-        let label = AssistLabel { label: label.into(), id };\n-        assert!(label.label.chars().nth(0).unwrap().is_uppercase());\n+        let label = AssistLabel::new(label.into(), id);\n \n         let assist = if self.should_compute_edit {\n             let action = {\n@@ -103,7 +102,7 @@ impl<'a> AssistCtx<'a> {\n         label: impl Into<String>,\n         f: impl FnOnce() -> Vec<ActionBuilder>,\n     ) -> Option<Assist> {\n-        let label = AssistLabel { label: label.into(), id };\n+        let label = AssistLabel::new(label.into(), id);\n         let assist = if self.should_compute_edit {\n             let actions = f();\n             assert!(!actions.is_empty(), \"Assist cannot have no\");"}, {"sha": "d476088a2360c88e2573cab19678c6d91b5200c0", "filename": "crates/ra_assists/src/lib.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/6ac9c4ad6ae2ce246a8c70d468ae2dabb484a03d/crates%2Fra_assists%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6ac9c4ad6ae2ce246a8c70d468ae2dabb484a03d/crates%2Fra_assists%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_assists%2Fsrc%2Flib.rs?ref=6ac9c4ad6ae2ce246a8c70d468ae2dabb484a03d", "patch": "@@ -34,6 +34,14 @@ pub struct AssistLabel {\n     pub id: AssistId,\n }\n \n+impl AssistLabel {\n+    pub(crate) fn new(label: String, id: AssistId) -> AssistLabel {\n+        // FIXME: make fields private, so that this invariant can't be broken\n+        assert!(label.chars().nth(0).unwrap().is_uppercase());\n+        AssistLabel { label: label.into(), id }\n+    }\n+}\n+\n #[derive(Debug, Clone)]\n pub struct AssistAction {\n     pub label: Option<String>,"}]}