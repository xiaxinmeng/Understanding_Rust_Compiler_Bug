{"sha": "48ebd2cdb8f9a9010a345349304edaa757d3e4cc", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ4ZWJkMmNkYjhmOWE5MDEwYTM0NTM0OTMwNGVkYWE3NTdkM2U0Y2M=", "commit": {"author": {"name": "Dylan MacKenzie", "email": "ecstaticmorse@gmail.com", "date": "2020-05-21T19:18:32Z"}, "committer": {"name": "Dylan MacKenzie", "email": "ecstaticmorse@gmail.com", "date": "2020-06-28T17:08:09Z"}, "message": "Remove `const_if_match` feature gate from libraries", "tree": {"sha": "5b93b0a1b6cc7d1b909378fb4e0245916b2aecfe", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5b93b0a1b6cc7d1b909378fb4e0245916b2aecfe"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/48ebd2cdb8f9a9010a345349304edaa757d3e4cc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/48ebd2cdb8f9a9010a345349304edaa757d3e4cc", "html_url": "https://github.com/rust-lang/rust/commit/48ebd2cdb8f9a9010a345349304edaa757d3e4cc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/48ebd2cdb8f9a9010a345349304edaa757d3e4cc/comments", "author": {"login": "ecstatic-morse", "id": 29463364, "node_id": "MDQ6VXNlcjI5NDYzMzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29463364?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ecstatic-morse", "html_url": "https://github.com/ecstatic-morse", "followers_url": "https://api.github.com/users/ecstatic-morse/followers", "following_url": "https://api.github.com/users/ecstatic-morse/following{/other_user}", "gists_url": "https://api.github.com/users/ecstatic-morse/gists{/gist_id}", "starred_url": "https://api.github.com/users/ecstatic-morse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ecstatic-morse/subscriptions", "organizations_url": "https://api.github.com/users/ecstatic-morse/orgs", "repos_url": "https://api.github.com/users/ecstatic-morse/repos", "events_url": "https://api.github.com/users/ecstatic-morse/events{/privacy}", "received_events_url": "https://api.github.com/users/ecstatic-morse/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ecstatic-morse", "id": 29463364, "node_id": "MDQ6VXNlcjI5NDYzMzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29463364?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ecstatic-morse", "html_url": "https://github.com/ecstatic-morse", "followers_url": "https://api.github.com/users/ecstatic-morse/followers", "following_url": "https://api.github.com/users/ecstatic-morse/following{/other_user}", "gists_url": "https://api.github.com/users/ecstatic-morse/gists{/gist_id}", "starred_url": "https://api.github.com/users/ecstatic-morse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ecstatic-morse/subscriptions", "organizations_url": "https://api.github.com/users/ecstatic-morse/orgs", "repos_url": "https://api.github.com/users/ecstatic-morse/repos", "events_url": "https://api.github.com/users/ecstatic-morse/events{/privacy}", "received_events_url": "https://api.github.com/users/ecstatic-morse/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f33a75c20ced68f5f9b384ab213ced26a1276107", "url": "https://api.github.com/repos/rust-lang/rust/commits/f33a75c20ced68f5f9b384ab213ced26a1276107", "html_url": "https://github.com/rust-lang/rust/commit/f33a75c20ced68f5f9b384ab213ced26a1276107"}], "stats": {"total": 30, "additions": 15, "deletions": 15}, "files": [{"sha": "5f18fe8bfab845dd30da591aefa9b80ab918a99d", "filename": "src/liballoc/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/48ebd2cdb8f9a9010a345349304edaa757d3e4cc/src%2Fliballoc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/48ebd2cdb8f9a9010a345349304edaa757d3e4cc/src%2Fliballoc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliballoc%2Flib.rs?ref=48ebd2cdb8f9a9010a345349304edaa757d3e4cc", "patch": "@@ -87,7 +87,7 @@\n #![feature(const_generic_impls_guard)]\n #![feature(const_generics)]\n #![feature(const_in_array_repeat_expressions)]\n-#![feature(const_if_match)]\n+#![cfg_attr(bootstrap, feature(const_if_match))]\n #![feature(cow_is_borrowed)]\n #![feature(dispatch_from_dyn)]\n #![feature(core_intrinsics)]"}, {"sha": "1391dc7a95371bd6eb2722dc35d60e52982a62eb", "filename": "src/libcore/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/48ebd2cdb8f9a9010a345349304edaa757d3e4cc/src%2Flibcore%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/48ebd2cdb8f9a9010a345349304edaa757d3e4cc/src%2Flibcore%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Flib.rs?ref=48ebd2cdb8f9a9010a345349304edaa757d3e4cc", "patch": "@@ -73,7 +73,7 @@\n #![feature(const_ascii_ctype_on_intrinsics)]\n #![feature(const_alloc_layout)]\n #![feature(const_discriminant)]\n-#![feature(const_if_match)]\n+#![cfg_attr(bootstrap, feature(const_if_match))]\n #![feature(const_loop)]\n #![feature(const_checked_int_methods)]\n #![feature(const_euclidean_int_methods)]"}, {"sha": "1714d2ee98ef217239f81d4e35c5e581299c591e", "filename": "src/libcore/num/mod.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/48ebd2cdb8f9a9010a345349304edaa757d3e4cc/src%2Flibcore%2Fnum%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/48ebd2cdb8f9a9010a345349304edaa757d3e4cc/src%2Flibcore%2Fnum%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fnum%2Fmod.rs?ref=48ebd2cdb8f9a9010a345349304edaa757d3e4cc", "patch": "@@ -1578,7 +1578,7 @@ $EndFeature, \"\n             #[stable(feature = \"no_panic_abs\", since = \"1.13.0\")]\n             #[rustc_const_stable(feature = \"const_int_methods\", since = \"1.32.0\")]\n             #[allow(unused_attributes)]\n-            #[allow_internal_unstable(const_if_match)]\n+            #[cfg_attr(bootstrap, allow_internal_unstable(const_if_match))]\n             #[inline]\n             pub const fn wrapping_abs(self) -> Self {\n                  if self.is_negative() {\n@@ -1867,7 +1867,7 @@ assert_eq!(\", stringify!($SelfT), \"::MIN.overflowing_neg(), (\", stringify!($Self\n             #[stable(feature = \"wrapping\", since = \"1.7.0\")]\n             #[rustc_const_stable(feature = \"const_int_methods\", since = \"1.32.0\")]\n             #[allow(unused_attributes)]\n-            #[allow_internal_unstable(const_if_match)]\n+            #[cfg_attr(bootstrap, allow_internal_unstable(const_if_match))]\n             pub const fn overflowing_neg(self) -> (Self, bool) {\n                 if self == Self::MIN {\n                     (Self::MIN, true)\n@@ -2160,7 +2160,7 @@ $EndFeature, \"\n             #[stable(feature = \"rust1\", since = \"1.0.0\")]\n             #[rustc_const_stable(feature = \"const_int_methods\", since = \"1.32.0\")]\n             #[allow(unused_attributes)]\n-            #[allow_internal_unstable(const_if_match)]\n+            #[cfg_attr(bootstrap, allow_internal_unstable(const_if_match))]\n             #[inline]\n             #[rustc_inherit_overflow_checks]\n             pub const fn abs(self) -> Self {"}, {"sha": "5c1c9d6ab906e6964f62aceafaa1bbca4ad062ec", "filename": "src/librustc_ast/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/48ebd2cdb8f9a9010a345349304edaa757d3e4cc/src%2Flibrustc_ast%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/48ebd2cdb8f9a9010a345349304edaa757d3e4cc/src%2Flibrustc_ast%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_ast%2Flib.rs?ref=48ebd2cdb8f9a9010a345349304edaa757d3e4cc", "patch": "@@ -7,7 +7,7 @@\n #![doc(html_root_url = \"https://doc.rust-lang.org/nightly/\", test(attr(deny(warnings))))]\n #![feature(bool_to_option)]\n #![feature(box_syntax)]\n-#![feature(const_if_match)]\n+#![cfg_attr(bootstrap, feature(const_if_match))]\n #![feature(const_fn)] // For the `transmute` in `P::new`\n #![feature(const_panic)]\n #![feature(const_transmute)]"}, {"sha": "20ac2a04b474fa7f690e831c9db3a85aaadb4e29", "filename": "src/librustc_hir/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/48ebd2cdb8f9a9010a345349304edaa757d3e4cc/src%2Flibrustc_hir%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/48ebd2cdb8f9a9010a345349304edaa757d3e4cc/src%2Flibrustc_hir%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_hir%2Flib.rs?ref=48ebd2cdb8f9a9010a345349304edaa757d3e4cc", "patch": "@@ -3,7 +3,7 @@\n //! [rustc dev guide]: https://rustc-dev-guide.rust-lang.org/hir.html\n \n #![feature(crate_visibility_modifier)]\n-#![feature(const_if_match)]\n+#![cfg_attr(bootstrap, feature(const_if_match))]\n #![feature(const_fn)] // For the unsizing cast on `&[]`\n #![feature(const_panic)]\n #![feature(in_band_lifetimes)]"}, {"sha": "6fef49668da5fc38d7558dfccfebf0b72dee8d79", "filename": "src/librustc_index/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/48ebd2cdb8f9a9010a345349304edaa757d3e4cc/src%2Flibrustc_index%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/48ebd2cdb8f9a9010a345349304edaa757d3e4cc/src%2Flibrustc_index%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_index%2Flib.rs?ref=48ebd2cdb8f9a9010a345349304edaa757d3e4cc", "patch": "@@ -1,5 +1,5 @@\n #![feature(allow_internal_unstable)]\n-#![feature(const_if_match)]\n+#![cfg_attr(bootstrap, feature(const_if_match))]\n #![feature(const_fn)]\n #![feature(const_panic)]\n #![feature(extend_one)]"}, {"sha": "27e086f1d5002f67521920f3552e5a0fcec040f0", "filename": "src/librustc_infer/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/48ebd2cdb8f9a9010a345349304edaa757d3e4cc/src%2Flibrustc_infer%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/48ebd2cdb8f9a9010a345349304edaa757d3e4cc/src%2Flibrustc_infer%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_infer%2Flib.rs?ref=48ebd2cdb8f9a9010a345349304edaa757d3e4cc", "patch": "@@ -17,7 +17,7 @@\n #![feature(box_patterns)]\n #![feature(box_syntax)]\n #![feature(const_fn)]\n-#![feature(const_if_match)]\n+#![cfg_attr(bootstrap, feature(const_if_match))]\n #![feature(const_panic)]\n #![feature(extend_one)]\n #![feature(never_type)]"}, {"sha": "676346fbebdd19bad462e63605d8b089d3c68208", "filename": "src/librustc_middle/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/48ebd2cdb8f9a9010a345349304edaa757d3e4cc/src%2Flibrustc_middle%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/48ebd2cdb8f9a9010a345349304edaa757d3e4cc/src%2Flibrustc_middle%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_middle%2Flib.rs?ref=48ebd2cdb8f9a9010a345349304edaa757d3e4cc", "patch": "@@ -27,7 +27,7 @@\n #![feature(bool_to_option)]\n #![feature(box_patterns)]\n #![feature(box_syntax)]\n-#![feature(const_if_match)]\n+#![cfg_attr(bootstrap, feature(const_if_match))]\n #![feature(const_fn)]\n #![feature(const_panic)]\n #![feature(const_transmute)]"}, {"sha": "d64105f3b99cc26a2e8f31cb7af92fe497470bf5", "filename": "src/librustc_mir/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/48ebd2cdb8f9a9010a345349304edaa757d3e4cc/src%2Flibrustc_mir%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/48ebd2cdb8f9a9010a345349304edaa757d3e4cc/src%2Flibrustc_mir%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Flib.rs?ref=48ebd2cdb8f9a9010a345349304edaa757d3e4cc", "patch": "@@ -10,7 +10,7 @@ Rust MIR: a lowered representation of Rust.\n #![feature(box_patterns)]\n #![feature(box_syntax)]\n #![feature(const_fn)]\n-#![feature(const_if_match)]\n+#![cfg_attr(bootstrap, feature(const_if_match))]\n #![feature(const_loop)]\n #![feature(const_panic)]\n #![feature(crate_visibility_modifier)]"}, {"sha": "b44d8eee462f09dfd5ba77974b13ec21f6b33f5d", "filename": "src/librustc_mir_build/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/48ebd2cdb8f9a9010a345349304edaa757d3e4cc/src%2Flibrustc_mir_build%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/48ebd2cdb8f9a9010a345349304edaa757d3e4cc/src%2Flibrustc_mir_build%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir_build%2Flib.rs?ref=48ebd2cdb8f9a9010a345349304edaa757d3e4cc", "patch": "@@ -4,7 +4,7 @@\n \n #![feature(box_patterns)]\n #![feature(box_syntax)]\n-#![feature(const_if_match)]\n+#![cfg_attr(bootstrap, feature(const_if_match))]\n #![feature(const_fn)]\n #![feature(const_panic)]\n #![feature(crate_visibility_modifier)]"}, {"sha": "74a54176774ca65e29a8d060038a065e857dd727", "filename": "src/librustc_query_system/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/48ebd2cdb8f9a9010a345349304edaa757d3e4cc/src%2Flibrustc_query_system%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/48ebd2cdb8f9a9010a345349304edaa757d3e4cc/src%2Flibrustc_query_system%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_query_system%2Flib.rs?ref=48ebd2cdb8f9a9010a345349304edaa757d3e4cc", "patch": "@@ -1,6 +1,6 @@\n #![feature(bool_to_option)]\n #![feature(const_fn)]\n-#![feature(const_if_match)]\n+#![cfg_attr(bootstrap, feature(const_if_match))]\n #![feature(const_panic)]\n #![feature(core_intrinsics)]\n #![feature(hash_raw_entry)]"}, {"sha": "6dcb1430cdc17cf5b56017413cfe88d521c7a49d", "filename": "src/librustc_span/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/48ebd2cdb8f9a9010a345349304edaa757d3e4cc/src%2Flibrustc_span%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/48ebd2cdb8f9a9010a345349304edaa757d3e4cc/src%2Flibrustc_span%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_span%2Flib.rs?ref=48ebd2cdb8f9a9010a345349304edaa757d3e4cc", "patch": "@@ -6,7 +6,7 @@\n \n #![doc(html_root_url = \"https://doc.rust-lang.org/nightly/\")]\n #![feature(crate_visibility_modifier)]\n-#![feature(const_if_match)]\n+#![cfg_attr(bootstrap, feature(const_if_match))]\n #![feature(const_fn)]\n #![feature(const_panic)]\n #![feature(negative_impls)]"}, {"sha": "ec6deb5b0595254f069d9c11441aaf35ad5714ee", "filename": "src/librustc_target/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/48ebd2cdb8f9a9010a345349304edaa757d3e4cc/src%2Flibrustc_target%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/48ebd2cdb8f9a9010a345349304edaa757d3e4cc/src%2Flibrustc_target%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_target%2Flib.rs?ref=48ebd2cdb8f9a9010a345349304edaa757d3e4cc", "patch": "@@ -9,7 +9,7 @@\n \n #![doc(html_root_url = \"https://doc.rust-lang.org/nightly/\")]\n #![feature(bool_to_option)]\n-#![feature(const_if_match)]\n+#![cfg_attr(bootstrap, feature(const_if_match))]\n #![feature(const_fn)]\n #![feature(const_panic)]\n #![feature(nll)]"}]}