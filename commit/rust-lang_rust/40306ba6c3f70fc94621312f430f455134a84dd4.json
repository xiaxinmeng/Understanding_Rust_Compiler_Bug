{"sha": "40306ba6c3f70fc94621312f430f455134a84dd4", "node_id": "C_kwDOAAsO6NoAKDQwMzA2YmE2YzNmNzBmYzk0NjIxMzEyZjQzMGY0NTUxMzRhODRkZDQ", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-06-01T12:39:28Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-06-01T12:39:28Z"}, "message": "Auto merge of #2175 - RalfJung:xargo, r=oli-obk\n\nbump Xargo\n\nAlso use that as a clue to refresh our CI caches.\n\nFixes https://github.com/rust-lang/miri/issues/705", "tree": {"sha": "6ee4b4a730ea5fab268d31d35b921e5ef2a08aa1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6ee4b4a730ea5fab268d31d35b921e5ef2a08aa1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/40306ba6c3f70fc94621312f430f455134a84dd4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/40306ba6c3f70fc94621312f430f455134a84dd4", "html_url": "https://github.com/rust-lang/rust/commit/40306ba6c3f70fc94621312f430f455134a84dd4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/40306ba6c3f70fc94621312f430f455134a84dd4/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f7c1b5bb0cd1aba43f3c597532d82cbb81e9885a", "url": "https://api.github.com/repos/rust-lang/rust/commits/f7c1b5bb0cd1aba43f3c597532d82cbb81e9885a", "html_url": "https://github.com/rust-lang/rust/commit/f7c1b5bb0cd1aba43f3c597532d82cbb81e9885a"}, {"sha": "4f700938053eb582f1812a804dabe30c65d7f546", "url": "https://api.github.com/repos/rust-lang/rust/commits/4f700938053eb582f1812a804dabe30c65d7f546", "html_url": "https://github.com/rust-lang/rust/commit/4f700938053eb582f1812a804dabe30c65d7f546"}], "stats": {"total": 15, "additions": 10, "deletions": 5}, "files": [{"sha": "f34e92571ff02ede309333e244cafd933d47fc1d", "filename": ".github/workflows/ci.yml", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/40306ba6c3f70fc94621312f430f455134a84dd4/.github%2Fworkflows%2Fci.yml", "raw_url": "https://github.com/rust-lang/rust/raw/40306ba6c3f70fc94621312f430f455134a84dd4/.github%2Fworkflows%2Fci.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Fci.yml?ref=40306ba6c3f70fc94621312f430f455134a84dd4", "patch": "@@ -46,7 +46,8 @@ jobs:\n       # we cannot reuse anyway when the nightly changes (and it grows quite large\n       # over time).\n       - name: Add cache for cargo\n-        uses: actions/cache@v2\n+        id: cache\n+        uses: actions/cache@v3\n         with:\n           path: |\n             # Taken from <https://doc.rust-lang.org/nightly/cargo/guide/cargo-home.html#caching-the-cargo-home-in-ci>.\n@@ -57,10 +58,11 @@ jobs:\n             # contains package information of crates installed via `cargo install`.\n             ~/.cargo/.crates.toml\n             ~/.cargo/.crates2.json\n-          key: ${{ runner.os }}-cargo-${{ hashFiles('**/Cargo.lock') }}-xargo0.3.25\n+          key: ${{ runner.os }}-cargo-${{ hashFiles('**/Cargo.lock', 'cargo-miri/version.rs') }}\n           restore-keys: ${{ runner.os }}-cargo\n \n       - name: Install rustup-toolchain-install-master and xargo\n+        if: ${{ steps.cache.outputs.cache-hit == 'false' }}\n         shell: bash\n         run: |\n           cargo install rustup-toolchain-install-master"}, {"sha": "34904279e94f1810b8c27ee9deb901b0dd2586df", "filename": "cargo-miri/bin.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/40306ba6c3f70fc94621312f430f455134a84dd4/cargo-miri%2Fbin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/40306ba6c3f70fc94621312f430f455134a84dd4/cargo-miri%2Fbin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/cargo-miri%2Fbin.rs?ref=40306ba6c3f70fc94621312f430f455134a84dd4", "patch": "@@ -1,3 +1,5 @@\n+mod version;\n+\n use std::env;\n use std::ffi::{OsStr, OsString};\n use std::fmt::Write as _;\n@@ -8,11 +10,10 @@ use std::ops::Not;\n use std::path::{Path, PathBuf};\n use std::process::{self, Command};\n \n-use serde::{Deserialize, Serialize};\n-\n use rustc_version::VersionMeta;\n+use serde::{Deserialize, Serialize};\n \n-const XARGO_MIN_VERSION: (u32, u32, u32) = (0, 3, 23);\n+use version::*;\n \n const CARGO_MIRI_HELP: &str = r#\"Runs binary crates and tests in Miri\n "}, {"sha": "366e90df179835ed89d6dffc5932e724a7d4a136", "filename": "cargo-miri/version.rs", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/40306ba6c3f70fc94621312f430f455134a84dd4/cargo-miri%2Fversion.rs", "raw_url": "https://github.com/rust-lang/rust/raw/40306ba6c3f70fc94621312f430f455134a84dd4/cargo-miri%2Fversion.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/cargo-miri%2Fversion.rs?ref=40306ba6c3f70fc94621312f430f455134a84dd4", "patch": "@@ -0,0 +1,2 @@\n+// We put this in a separate file so that it can be hashed for GHA caching.\n+pub const XARGO_MIN_VERSION: (u32, u32, u32) = (0, 3, 26);"}]}