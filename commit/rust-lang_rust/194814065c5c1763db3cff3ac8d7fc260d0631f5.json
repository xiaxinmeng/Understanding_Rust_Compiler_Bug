{"sha": "194814065c5c1763db3cff3ac8d7fc260d0631f5", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE5NDgxNDA2NWM1YzE3NjNkYjNjZmYzYWM4ZDdmYzI2MGQwNjMxZjU=", "commit": {"author": {"name": "Ohad Ravid", "email": "ohad.rv@gmail.com", "date": "2019-06-04T15:22:03Z"}, "committer": {"name": "Ohad Ravid", "email": "ohad.rv@gmail.com", "date": "2019-07-09T15:35:30Z"}, "message": "Added a test for coherence when a generic type param has a default value from an associated type", "tree": {"sha": "9eb97e5f922549075ffc807577daaceb40b803cf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9eb97e5f922549075ffc807577daaceb40b803cf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/194814065c5c1763db3cff3ac8d7fc260d0631f5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/194814065c5c1763db3cff3ac8d7fc260d0631f5", "html_url": "https://github.com/rust-lang/rust/commit/194814065c5c1763db3cff3ac8d7fc260d0631f5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/194814065c5c1763db3cff3ac8d7fc260d0631f5/comments", "author": {"login": "ohadravid", "id": 2358365, "node_id": "MDQ6VXNlcjIzNTgzNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2358365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ohadravid", "html_url": "https://github.com/ohadravid", "followers_url": "https://api.github.com/users/ohadravid/followers", "following_url": "https://api.github.com/users/ohadravid/following{/other_user}", "gists_url": "https://api.github.com/users/ohadravid/gists{/gist_id}", "starred_url": "https://api.github.com/users/ohadravid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ohadravid/subscriptions", "organizations_url": "https://api.github.com/users/ohadravid/orgs", "repos_url": "https://api.github.com/users/ohadravid/repos", "events_url": "https://api.github.com/users/ohadravid/events{/privacy}", "received_events_url": "https://api.github.com/users/ohadravid/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ohadravid", "id": 2358365, "node_id": "MDQ6VXNlcjIzNTgzNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2358365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ohadravid", "html_url": "https://github.com/ohadravid", "followers_url": "https://api.github.com/users/ohadravid/followers", "following_url": "https://api.github.com/users/ohadravid/following{/other_user}", "gists_url": "https://api.github.com/users/ohadravid/gists{/gist_id}", "starred_url": "https://api.github.com/users/ohadravid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ohadravid/subscriptions", "organizations_url": "https://api.github.com/users/ohadravid/orgs", "repos_url": "https://api.github.com/users/ohadravid/repos", "events_url": "https://api.github.com/users/ohadravid/events{/privacy}", "received_events_url": "https://api.github.com/users/ohadravid/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "97c9437585edafb59dc24701578dc0f20756178c", "url": "https://api.github.com/repos/rust-lang/rust/commits/97c9437585edafb59dc24701578dc0f20756178c", "html_url": "https://github.com/rust-lang/rust/commit/97c9437585edafb59dc24701578dc0f20756178c"}], "stats": {"total": 36, "additions": 36, "deletions": 0}, "files": [{"sha": "9a191bad8b0bf1a9ea91929b79b10dd9c29adff4", "filename": "src/test/run-pass/coherence/auxiliary/re_rebalance_coherence_lib.rs", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/194814065c5c1763db3cff3ac8d7fc260d0631f5/src%2Ftest%2Frun-pass%2Fcoherence%2Fauxiliary%2Fre_rebalance_coherence_lib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/194814065c5c1763db3cff3ac8d7fc260d0631f5/src%2Ftest%2Frun-pass%2Fcoherence%2Fauxiliary%2Fre_rebalance_coherence_lib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fcoherence%2Fauxiliary%2Fre_rebalance_coherence_lib.rs?ref=194814065c5c1763db3cff3ac8d7fc260d0631f5", "patch": "@@ -20,3 +20,12 @@ pub struct BatchInsert<'a, T: 'a, Tab> {\n impl<'a, T:'a, Tab, DB> QueryFragment<DB> for BatchInsert<'a, T, Tab>\n where DB: SupportsDefaultKeyword + Backend,\n {}\n+\n+pub trait LibToOwned {\n+    type Owned;\n+}\n+\n+pub struct LibCow<T: LibToOwned, Owned = <T as LibToOwned>::Owned> {\n+    pub t: T,\n+    pub o: Owned,\n+}"}, {"sha": "4168b7a6146a918d87b0b5f78e601cf374512af9", "filename": "src/test/run-pass/coherence/re-rebalance-coherence-default-generic-associated-type.rs", "status": "added", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/194814065c5c1763db3cff3ac8d7fc260d0631f5/src%2Ftest%2Frun-pass%2Fcoherence%2Fre-rebalance-coherence-default-generic-associated-type.rs", "raw_url": "https://github.com/rust-lang/rust/raw/194814065c5c1763db3cff3ac8d7fc260d0631f5/src%2Ftest%2Frun-pass%2Fcoherence%2Fre-rebalance-coherence-default-generic-associated-type.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fcoherence%2Fre-rebalance-coherence-default-generic-associated-type.rs?ref=194814065c5c1763db3cff3ac8d7fc260d0631f5", "patch": "@@ -0,0 +1,27 @@\n+// run-pass\n+// aux-build:re_rebalance_coherence_lib.rs\n+\n+#![allow(dead_code)]\n+#![feature(re_rebalance_coherence)]\n+// check that a generic type with a default value from an associated type can be used without\n+// specifying the value, and without invoking coherence errors.\n+\n+extern crate re_rebalance_coherence_lib as lib;\n+use lib::*;\n+\n+struct MyString {}\n+\n+impl LibToOwned for MyString {\n+    type Owned = String;\n+}\n+\n+impl PartialEq<MyString> for LibCow<MyString> {\n+    fn eq(&self, _other: &MyString) -> bool {\n+        // Test that the default type is used.\n+        let _s: &String = &self.o;\n+\n+        false\n+    }\n+}\n+\n+fn main() {}"}]}