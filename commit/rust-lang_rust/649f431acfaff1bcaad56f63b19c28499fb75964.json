{"sha": "649f431acfaff1bcaad56f63b19c28499fb75964", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY0OWY0MzFhY2ZhZmYxYmNhYWQ1NmY2M2IxOWMyODQ5OWZiNzU5NjQ=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-04-05T17:09:59Z"}, "committer": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-04-05T17:09:59Z"}, "message": "Give a name to every CI job.\n\nBots that read the log can simply look for `[CI_JOB_NAME=...]` to find out\nthe job's name.", "tree": {"sha": "caf84371fc41976fa92de390173ec9ef0913b276", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/caf84371fc41976fa92de390173ec9ef0913b276"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/649f431acfaff1bcaad56f63b19c28499fb75964", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZ1R8CLMp8f2GxWoQ/vbIBR0OATwFAlrGWGcACgkQ/vbIBR0O\nATzZMBAAvFG+3Q93fNG6f//q5GfosoFvxnY5Eb2FY6cqO86slyTzddfolx+VBBy3\nGD3Eikm0C91LpD2a193HzrwbPVq8b+JUDWkWeLmdpXOEp4EMiZt8PdBzGN3IS4mT\nPD+cARw99IriUd/aZ5d2/NAHDdPWnkphdEqSbVcv08Xl9CIXYNSMBjQb6NS1tayC\nDDXf1GHpFQxDRrCMv5RWf601ibFxiQok+8SJNhwg01rfsag6GbmJszDj8mCbGpTq\nNdTMgN7Jv5qGWDqJJiTF5BwKIjkKM12jEP6Y2sS3bD3M93IA3bqAlmTvxkcmmybu\nCtJkvg9moqcdTWFwyByCzptrJKg5f0ZKLelwhq61rul1gBinMLa0/tWs5N6D3lvP\nHiBAl+Ct/wfz4aBlnXr7BlRfrCaWYi8XaCWXaYWKTmVUKEsd+ijw1TsPTT0oStVs\nWvspfZlv+7BarPOByuF8Hagn6IQ5SAQZvOgD2allWN9jLsXbu/jVDSYP9y3ET0fQ\n7guBFXTFO+y8fIecWqEn6JQwLHDaUDNfvYwgTut729NGc7K5Oi56zOLJuvuZh1gY\nwa6zW+ByYgP15ZsD33K1E2vtuRheApyf1C4AZM9gF1SCJEZrRg4/FbwWkkP/wdt5\n0lGDtwdommsfzQnuiFtASm2ux1m1bXdQOe1EMBJjzMyy+W6GXTo=\n=rzca\n-----END PGP SIGNATURE-----", "payload": "tree caf84371fc41976fa92de390173ec9ef0913b276\nparent 56714acc5eb0687ed9a7566fdebe5528657fc5b3\nauthor kennytm <kennytm@gmail.com> 1522948199 +0800\ncommitter kennytm <kennytm@gmail.com> 1522948199 +0800\n\nGive a name to every CI job.\n\nBots that read the log can simply look for `[CI_JOB_NAME=...]` to find out\nthe job's name.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/649f431acfaff1bcaad56f63b19c28499fb75964", "html_url": "https://github.com/rust-lang/rust/commit/649f431acfaff1bcaad56f63b19c28499fb75964", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/649f431acfaff1bcaad56f63b19c28499fb75964/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "56714acc5eb0687ed9a7566fdebe5528657fc5b3", "url": "https://api.github.com/repos/rust-lang/rust/commits/56714acc5eb0687ed9a7566fdebe5528657fc5b3", "html_url": "https://github.com/rust-lang/rust/commit/56714acc5eb0687ed9a7566fdebe5528657fc5b3"}], "stats": {"total": 26, "additions": 25, "deletions": 1}, "files": [{"sha": "f36ad67b111033ba47ae675212622fbc20ad6c31", "filename": ".travis.yml", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/649f431acfaff1bcaad56f63b19c28499fb75964/.travis.yml", "raw_url": "https://github.com/rust-lang/rust/raw/649f431acfaff1bcaad56f63b19c28499fb75964/.travis.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.travis.yml?ref=649f431acfaff1bcaad56f63b19c28499fb75964", "patch": "@@ -21,7 +21,7 @@ matrix:\n     # \"alternate\" deployments, these are \"nightlies\" but have LLVM assertions\n     # turned on, they're deployed to a different location primarily for\n     # additional testing.\n-    - env: IMAGE=dist-x86_64-linux DEPLOY_ALT=1\n+    - env: IMAGE=dist-x86_64-linux DEPLOY_ALT=1 CI_JOB_NAME=dist-x86_64-linux-alt\n       if: branch = try OR branch = auto\n \n     - env: >\n@@ -33,6 +33,7 @@ matrix:\n         MACOSX_DEPLOYMENT_TARGET=10.7\n         NO_LLVM_ASSERTIONS=1\n         NO_DEBUG_ASSERTIONS=1\n+        CI_JOB_NAME=dist-x86_64-apple-alt\n       os: osx\n       osx_image: xcode9.3-moar\n       if: branch = auto\n@@ -53,6 +54,7 @@ matrix:\n         MACOSX_STD_DEPLOYMENT_TARGET=10.7\n         NO_LLVM_ASSERTIONS=1\n         NO_DEBUG_ASSERTIONS=1\n+        CI_JOB_NAME=x86_64-apple\n       os: osx\n       osx_image: xcode9.3-moar\n       if: branch = auto\n@@ -66,6 +68,7 @@ matrix:\n         MACOSX_STD_DEPLOYMENT_TARGET=10.7\n         NO_LLVM_ASSERTIONS=1\n         NO_DEBUG_ASSERTIONS=1\n+        CI_JOB_NAME=i686-apple\n       os: osx\n       osx_image: xcode9.3-moar\n       if: branch = auto\n@@ -85,6 +88,7 @@ matrix:\n         MACOSX_DEPLOYMENT_TARGET=10.7\n         NO_LLVM_ASSERTIONS=1\n         NO_DEBUG_ASSERTIONS=1\n+        CI_JOB_NAME=dist-i686-apple\n       os: osx\n       osx_image: xcode9.3-moar\n       if: branch = auto\n@@ -98,6 +102,7 @@ matrix:\n         MACOSX_DEPLOYMENT_TARGET=10.7\n         NO_LLVM_ASSERTIONS=1\n         NO_DEBUG_ASSERTIONS=1\n+        CI_JOB_NAME=dist-x86_64-apple\n       os: osx\n       osx_image: xcode9.3-moar\n       if: branch = auto"}, {"sha": "a15f3dd8d5cac2b957daab5e0ee6fa91a14c9176", "filename": "appveyor.yml", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/649f431acfaff1bcaad56f63b19c28499fb75964/appveyor.yml", "raw_url": "https://github.com/rust-lang/rust/raw/649f431acfaff1bcaad56f63b19c28499fb75964/appveyor.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/appveyor.yml?ref=649f431acfaff1bcaad56f63b19c28499fb75964", "patch": "@@ -18,25 +18,31 @@ environment:\n   - MSYS_BITS: 64\n     RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-msvc --enable-profiler\n     SCRIPT: python x.py test\n+    CI_JOB_NAME: x86_64-msvc\n   - MSYS_BITS: 32\n     RUST_CONFIGURE_ARGS: --build=i686-pc-windows-msvc\n     SCRIPT: make appveyor-subset-1\n+    CI_JOB_NAME: i686-msvc-1\n   - MSYS_BITS: 32\n     RUST_CONFIGURE_ARGS: --build=i686-pc-windows-msvc\n     SCRIPT: make appveyor-subset-2\n+    CI_JOB_NAME: i686-msvc-2\n \n   # MSVC aux tests\n   - MSYS_BITS: 64\n     RUST_CHECK_TARGET: check-aux EXCLUDE_CARGO=1\n     RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-msvc\n+    CI_JOB_NAME: x86_64-msvc-aux\n   - MSYS_BITS: 64\n     SCRIPT: python x.py test src/tools/cargotest src/tools/cargo\n     RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-msvc\n+    CI_JOB_NAME: x86_64-msvc-cargo\n \n   # MSVC tools tests\n   - MSYS_BITS: 64\n     SCRIPT: src/ci/docker/x86_64-gnu-tools/checktools.sh x.py /tmp/toolstates.json windows\n     RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-msvc --save-toolstates=/tmp/toolstates.json --enable-test-miri\n+    CI_JOB_NAME: x86_64-msvc-tools\n \n   # 32/64-bit MinGW builds.\n   #\n@@ -57,18 +63,21 @@ environment:\n     MINGW_URL: https://s3-us-west-1.amazonaws.com/rust-lang-ci2/rust-ci-mirror\n     MINGW_ARCHIVE: i686-6.3.0-release-posix-dwarf-rt_v5-rev2.7z\n     MINGW_DIR: mingw32\n+    CI_JOB_NAME: i686-mingw-1\n   - MSYS_BITS: 32\n     RUST_CONFIGURE_ARGS: --build=i686-pc-windows-gnu\n     SCRIPT: make appveyor-subset-2\n     MINGW_URL: https://s3-us-west-1.amazonaws.com/rust-lang-ci2/rust-ci-mirror\n     MINGW_ARCHIVE: i686-6.3.0-release-posix-dwarf-rt_v5-rev2.7z\n     MINGW_DIR: mingw32\n+    CI_JOB_NAME: i686-mingw-2\n   - MSYS_BITS: 64\n     SCRIPT: python x.py test\n     RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-gnu\n     MINGW_URL: https://s3-us-west-1.amazonaws.com/rust-lang-ci2/rust-ci-mirror\n     MINGW_ARCHIVE: x86_64-6.3.0-release-posix-seh-rt_v5-rev2.7z\n     MINGW_DIR: mingw64\n+    CI_JOB_NAME: x86_64-mingw\n \n   # 32/64 bit MSVC and GNU deployment\n   - RUST_CONFIGURE_ARGS: >\n@@ -77,33 +86,38 @@ environment:\n       --enable-profiler\n     SCRIPT: python x.py dist\n     DEPLOY: 1\n+    CI_JOB_NAME: dist-x86_64-msvc\n   - RUST_CONFIGURE_ARGS: >\n       --build=i686-pc-windows-msvc\n       --target=i586-pc-windows-msvc\n       --enable-full-tools\n       --enable-profiler\n     SCRIPT: python x.py dist\n     DEPLOY: 1\n+    CI_JOB_NAME: dist-i686-msvc\n   - MSYS_BITS: 32\n     RUST_CONFIGURE_ARGS: --build=i686-pc-windows-gnu --enable-full-tools\n     SCRIPT: python x.py dist\n     MINGW_URL: https://s3-us-west-1.amazonaws.com/rust-lang-ci2/rust-ci-mirror\n     MINGW_ARCHIVE: i686-6.3.0-release-posix-dwarf-rt_v5-rev2.7z\n     MINGW_DIR: mingw32\n     DEPLOY: 1\n+    CI_JOB_NAME: dist-i686-mingw\n   - MSYS_BITS: 64\n     SCRIPT: python x.py dist\n     RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-gnu --enable-full-tools\n     MINGW_URL: https://s3-us-west-1.amazonaws.com/rust-lang-ci2/rust-ci-mirror\n     MINGW_ARCHIVE: x86_64-6.3.0-release-posix-seh-rt_v5-rev2.7z\n     MINGW_DIR: mingw64\n     DEPLOY: 1\n+    CI_JOB_NAME: dist-x86_64-mingw\n \n   # \"alternate\" deployment, see .travis.yml for more info\n   - MSYS_BITS: 64\n     RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-msvc --enable-extended --enable-profiler\n     SCRIPT: python x.py dist\n     DEPLOY_ALT: 1\n+    CI_JOB_NAME: dist-x86_64-msvc-alt\n \n matrix:\n   fast_finish: true"}, {"sha": "c470ae7eb30306cdaa081c06e3c5d79e4d3b90c3", "filename": "src/ci/docker/run.sh", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/649f431acfaff1bcaad56f63b19c28499fb75964/src%2Fci%2Fdocker%2Frun.sh", "raw_url": "https://github.com/rust-lang/rust/raw/649f431acfaff1bcaad56f63b19c28499fb75964/src%2Fci%2Fdocker%2Frun.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Frun.sh?ref=649f431acfaff1bcaad56f63b19c28499fb75964", "patch": "@@ -130,6 +130,7 @@ exec docker \\\n   --env TRAVIS \\\n   --env TRAVIS_BRANCH \\\n   --env TOOLSTATE_REPO_ACCESS_TOKEN \\\n+  --env CI_JOB_NAME=\"${CI_JOB_NAME-$IMAGE}\" \\\n   --volume \"$HOME/.cargo:/cargo\" \\\n   --volume \"$HOME/rustsrc:$HOME/rustsrc\" \\\n   --init \\"}, {"sha": "119b239d6b290177ac4c41b9cb19ab0a9271ef18", "filename": "src/ci/run.sh", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/649f431acfaff1bcaad56f63b19c28499fb75964/src%2Fci%2Frun.sh", "raw_url": "https://github.com/rust-lang/rust/raw/649f431acfaff1bcaad56f63b19c28499fb75964/src%2Fci%2Frun.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Frun.sh?ref=649f431acfaff1bcaad56f63b19c28499fb75964", "patch": "@@ -11,6 +11,10 @@\n \n set -e\n \n+if [ -n \"$CI_JOB_NAME\" ]; then\n+  echo \"[CI_JOB_NAME=$CI_JOB_NAME]\"\n+fi\n+\n if [ \"$NO_CHANGE_USER\" = \"\" ]; then\n   if [ \"$LOCAL_USER_ID\" != \"\" ]; then\n     useradd --shell /bin/bash -u $LOCAL_USER_ID -o -c \"\" -m user"}]}