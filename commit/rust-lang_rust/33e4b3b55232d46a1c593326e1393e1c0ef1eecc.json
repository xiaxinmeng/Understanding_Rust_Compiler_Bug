{"sha": "33e4b3b55232d46a1c593326e1393e1c0ef1eecc", "node_id": "MDY6Q29tbWl0NzI0NzEyOjMzZTRiM2I1NTIzMmQ0NmExYzU5MzMyNmUxMzkzZTFjMGVmMWVlY2M=", "commit": {"author": {"name": "Oliver Schneider", "email": "oli-obk@users.noreply.github.com", "date": "2017-09-14T07:11:10Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-09-14T07:11:10Z"}, "message": "Merge pull request #2049 from topecongiro/rustc-fix\n\nrustc fix", "tree": {"sha": "95bf4c929ef6647ea2bf52469eaae8c984003bf7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/95bf4c929ef6647ea2bf52469eaae8c984003bf7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/33e4b3b55232d46a1c593326e1393e1c0ef1eecc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/33e4b3b55232d46a1c593326e1393e1c0ef1eecc", "html_url": "https://github.com/rust-lang/rust/commit/33e4b3b55232d46a1c593326e1393e1c0ef1eecc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/33e4b3b55232d46a1c593326e1393e1c0ef1eecc/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b2c88b0a3597ca51333b75cf366511234e25315d", "url": "https://api.github.com/repos/rust-lang/rust/commits/b2c88b0a3597ca51333b75cf366511234e25315d", "html_url": "https://github.com/rust-lang/rust/commit/b2c88b0a3597ca51333b75cf366511234e25315d"}, {"sha": "49d388d4ec415107340b9b84d8a9544bc46ee5e8", "url": "https://api.github.com/repos/rust-lang/rust/commits/49d388d4ec415107340b9b84d8a9544bc46ee5e8", "html_url": "https://github.com/rust-lang/rust/commit/49d388d4ec415107340b9b84d8a9544bc46ee5e8"}], "stats": {"total": 81, "additions": 41, "deletions": 40}, "files": [{"sha": "f4945998fde5454c4c708b810f5a671096df9ddd", "filename": "src/main.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/33e4b3b55232d46a1c593326e1393e1c0ef1eecc/src%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/33e4b3b55232d46a1c593326e1393e1c0ef1eecc/src%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fmain.rs?ref=33e4b3b55232d46a1c593326e1393e1c0ef1eecc", "patch": "@@ -64,12 +64,13 @@ impl<'a> CompilerCalls<'a> for ClippyCompilerCalls {\n         &mut self,\n         matches: &getopts::Matches,\n         sess: &Session,\n+        crate_stores: &rustc::middle::cstore::CrateStore,\n         input: &Input,\n         odir: &Option<PathBuf>,\n         ofile: &Option<PathBuf>,\n     ) -> Compilation {\n         self.default\n-            .late_callback(matches, sess, input, odir, ofile)\n+            .late_callback(matches, sess, crate_stores, input, odir, ofile)\n     }\n     fn build_controller(&mut self, sess: &Session, matches: &getopts::Matches) -> driver::CompileController<'a> {\n         let mut control = self.default.build_controller(sess, matches);"}, {"sha": "d1bfc4a95a8d042b3bbd1b261309f6fff55d5037", "filename": "tests/ui/never_loop.stderr", "status": "modified", "additions": 13, "deletions": 13, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/33e4b3b55232d46a1c593326e1393e1c0ef1eecc/tests%2Fui%2Fnever_loop.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/33e4b3b55232d46a1c593326e1393e1c0ef1eecc/tests%2Fui%2Fnever_loop.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fnever_loop.stderr?ref=33e4b3b55232d46a1c593326e1393e1c0ef1eecc", "patch": "@@ -24,12 +24,12 @@ error: this loop never actually loops\n error: this loop never actually loops\n   --> $DIR/never_loop.rs:47:2\n    |\n-47 | / \\tloop { // never loops\n-48 | | \\t       while i == 0 { // never loops\n-49 | | \\t           break\n-50 | | \\t       }\n-51 | | \\t       return\n-52 | | \\t}\n+47 | /  loop { // never loops\n+48 | |         while i == 0 { // never loops\n+49 | |             break\n+50 | |         }\n+51 | |         return\n+52 | |  }\n    | |__^\n \n error: this loop never actually loops\n@@ -45,20 +45,20 @@ error: this loop never actually loops\n    |\n 57 | /     'outer: loop { // never loops\n 58 | |         x += 1;\n-59 | | \\t\\tloop { // never loops\n+59 | |   loop { // never loops\n 60 | |             if x == 5 { break }\n ...  |\n-63 | | \\t\\treturn\n-64 | | \\t}\n+63 | |   return\n+64 | |  }\n    | |__^\n \n error: this loop never actually loops\n   --> $DIR/never_loop.rs:59:3\n    |\n-59 | / \\t\\tloop { // never loops\n-60 | | \\t\\t          if x == 5 { break }\n-61 | | \\t\\t\\tcontinue 'outer\n-62 | | \\t\\t}\n+59 | /   loop { // never loops\n+60 | |             if x == 5 { break }\n+61 | |    continue 'outer\n+62 | |   }\n    | |___^\n \n error: this loop never actually loops"}, {"sha": "8a80dbedaeb4406663ba4ee640c509763d10a205", "filename": "tests/ui/overflow_check_conditional.stderr", "status": "modified", "additions": 16, "deletions": 16, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/33e4b3b55232d46a1c593326e1393e1c0ef1eecc/tests%2Fui%2Foverflow_check_conditional.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/33e4b3b55232d46a1c593326e1393e1c0ef1eecc/tests%2Fui%2Foverflow_check_conditional.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Foverflow_check_conditional.stderr?ref=33e4b3b55232d46a1c593326e1393e1c0ef1eecc", "patch": "@@ -1,52 +1,52 @@\n error: You are trying to use classic C overflow conditions that will fail in Rust.\n   --> $DIR/overflow_check_conditional.rs:11:5\n    |\n-11 | \\tif a + b < a {\n-   | \\t   ^^^^^^^^^\n+11 |  if a + b < a {\n+   |     ^^^^^^^^^\n    |\n    = note: `-D overflow-check-conditional` implied by `-D warnings`\n \n error: You are trying to use classic C overflow conditions that will fail in Rust.\n   --> $DIR/overflow_check_conditional.rs:14:5\n    |\n-14 | \\tif a > a + b {\n-   | \\t   ^^^^^^^^^\n+14 |  if a > a + b {\n+   |     ^^^^^^^^^\n \n error: You are trying to use classic C overflow conditions that will fail in Rust.\n   --> $DIR/overflow_check_conditional.rs:17:5\n    |\n-17 | \\tif a + b < b {\n-   | \\t   ^^^^^^^^^\n+17 |  if a + b < b {\n+   |     ^^^^^^^^^\n \n error: You are trying to use classic C overflow conditions that will fail in Rust.\n   --> $DIR/overflow_check_conditional.rs:20:5\n    |\n-20 | \\tif b > a + b {\n-   | \\t   ^^^^^^^^^\n+20 |  if b > a + b {\n+   |     ^^^^^^^^^\n \n error: You are trying to use classic C underflow conditions that will fail in Rust.\n   --> $DIR/overflow_check_conditional.rs:23:5\n    |\n-23 | \\tif a - b > b {\n-   | \\t   ^^^^^^^^^\n+23 |  if a - b > b {\n+   |     ^^^^^^^^^\n \n error: You are trying to use classic C underflow conditions that will fail in Rust.\n   --> $DIR/overflow_check_conditional.rs:26:5\n    |\n-26 | \\tif b < a - b {\n-   | \\t   ^^^^^^^^^\n+26 |  if b < a - b {\n+   |     ^^^^^^^^^\n \n error: You are trying to use classic C underflow conditions that will fail in Rust.\n   --> $DIR/overflow_check_conditional.rs:29:5\n    |\n-29 | \\tif a - b > a {\n-   | \\t   ^^^^^^^^^\n+29 |  if a - b > a {\n+   |     ^^^^^^^^^\n \n error: You are trying to use classic C underflow conditions that will fail in Rust.\n   --> $DIR/overflow_check_conditional.rs:32:5\n    |\n-32 | \\tif a < a - b {\n-   | \\t   ^^^^^^^^^\n+32 |  if a < a - b {\n+   |     ^^^^^^^^^\n \n error: aborting due to 8 previous errors\n "}, {"sha": "e2865edc87051e824d12fff5f35d93147ec66b92", "filename": "tests/ui/redundant_closure_call.stderr", "status": "modified", "additions": 10, "deletions": 10, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/33e4b3b55232d46a1c593326e1393e1c0ef1eecc/tests%2Fui%2Fredundant_closure_call.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/33e4b3b55232d46a1c593326e1393e1c0ef1eecc/tests%2Fui%2Fredundant_closure_call.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fredundant_closure_call.stderr?ref=33e4b3b55232d46a1c593326e1393e1c0ef1eecc", "patch": "@@ -1,34 +1,34 @@\n error: Closure called just once immediately after it was declared\n   --> $DIR/redundant_closure_call.rs:15:2\n    |\n-15 | \\ti = closure();\n-   | \\t^^^^^^^^^^^^^\n+15 |  i = closure();\n+   |  ^^^^^^^^^^^^^\n    |\n    = note: `-D redundant-closure-call` implied by `-D warnings`\n \n error: Closure called just once immediately after it was declared\n   --> $DIR/redundant_closure_call.rs:18:2\n    |\n-18 | \\ti = closure(3);\n-   | \\t^^^^^^^^^^^^^^\n+18 |  i = closure(3);\n+   |  ^^^^^^^^^^^^^^\n \n error: Try not to call a closure in the expression where it is declared.\n  --> $DIR/redundant_closure_call.rs:7:10\n   |\n-7 | \\tlet a = (|| 42)();\n-  | \\t        ^^^^^^^^^ help: Try doing something like: : `42`\n+7 |  let a = (|| 42)();\n+  |          ^^^^^^^^^ help: Try doing something like: : `42`\n \n error: Try not to call a closure in the expression where it is declared.\n   --> $DIR/redundant_closure_call.rs:10:14\n    |\n-10 | \\tlet mut k = (|m| m+1)(i);\n-   | \\t            ^^^^^^^^^^^^\n+10 |  let mut k = (|m| m+1)(i);\n+   |              ^^^^^^^^^^^^\n \n error: Try not to call a closure in the expression where it is declared.\n   --> $DIR/redundant_closure_call.rs:12:6\n    |\n-12 | \\tk = (|a,b| a*b)(1,5);\n-   | \\t    ^^^^^^^^^^^^^^^^\n+12 |  k = (|a,b| a*b)(1,5);\n+   |      ^^^^^^^^^^^^^^^^\n \n error: aborting due to 5 previous errors\n "}]}