{"sha": "63dfbdbc1bc1ace106a525682f77b3d08af9ad71", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYzZGZiZGJjMWJjMWFjZTEwNmE1MjU2ODJmNzdiM2QwOGFmOWFkNzE=", "commit": {"author": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2016-05-27T04:32:45Z"}, "committer": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2016-05-27T04:32:45Z"}, "message": "Rollup merge of #33839 - kamalmarhubi:codemape-get-filemap-option, r=nmatsakis\n\n This is more idiomatic, putting the caller in charge of whether or not\nto panic.", "tree": {"sha": "7e1af7784abe1ebab1c219d13e1a57439eb91996", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7e1af7784abe1ebab1c219d13e1a57439eb91996"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/63dfbdbc1bc1ace106a525682f77b3d08af9ad71", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/63dfbdbc1bc1ace106a525682f77b3d08af9ad71", "html_url": "https://github.com/rust-lang/rust/commit/63dfbdbc1bc1ace106a525682f77b3d08af9ad71", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/63dfbdbc1bc1ace106a525682f77b3d08af9ad71/comments", "author": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7905452f083ab5ac3008dfe6727048e70bbeb142", "url": "https://api.github.com/repos/rust-lang/rust/commits/7905452f083ab5ac3008dfe6727048e70bbeb142", "html_url": "https://github.com/rust-lang/rust/commit/7905452f083ab5ac3008dfe6727048e70bbeb142"}, {"sha": "3bef085ea8da749c234fb4afc749810a5b9c6c16", "url": "https://api.github.com/repos/rust-lang/rust/commits/3bef085ea8da749c234fb4afc749810a5b9c6c16", "html_url": "https://github.com/rust-lang/rust/commit/3bef085ea8da749c234fb4afc749810a5b9c6c16"}], "stats": {"total": 7, "additions": 4, "deletions": 3}, "files": [{"sha": "0a093887c509413a0b2884798c4efe4fd44d3ccf", "filename": "src/librustc_driver/pretty.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/63dfbdbc1bc1ace106a525682f77b3d08af9ad71/src%2Flibrustc_driver%2Fpretty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/63dfbdbc1bc1ace106a525682f77b3d08af9ad71/src%2Flibrustc_driver%2Fpretty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_driver%2Fpretty.rs?ref=63dfbdbc1bc1ace106a525682f77b3d08af9ad71", "patch": "@@ -757,6 +757,7 @@ fn get_source(input: &Input, sess: &Session) -> (Vec<u8>, String) {\n     let src_name = driver::source_name(input);\n     let src = sess.codemap()\n                   .get_filemap(&src_name)\n+                  .unwrap()\n                   .src\n                   .as_ref()\n                   .unwrap()"}, {"sha": "3b13bf2fc50bace83ccf35e788d6ec9d23b55444", "filename": "src/libsyntax/codemap.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/63dfbdbc1bc1ace106a525682f77b3d08af9ad71/src%2Flibsyntax%2Fcodemap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/63dfbdbc1bc1ace106a525682f77b3d08af9ad71/src%2Flibsyntax%2Fcodemap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fcodemap.rs?ref=63dfbdbc1bc1ace106a525682f77b3d08af9ad71", "patch": "@@ -1191,13 +1191,13 @@ impl CodeMap {\n         }\n     }\n \n-    pub fn get_filemap(&self, filename: &str) -> Rc<FileMap> {\n+    pub fn get_filemap(&self, filename: &str) -> Option<Rc<FileMap>> {\n         for fm in self.files.borrow().iter() {\n             if filename == fm.name {\n-                return fm.clone();\n+                return Some(fm.clone());\n             }\n         }\n-        panic!(\"asking for {} which we don't know about\", filename);\n+        None\n     }\n \n     /// For a global BytePos compute the local offset within the containing FileMap"}]}