{"sha": "b6532ebeeb31f3e1236e23bffbd36327979458dc", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI2NTMyZWJlZWIzMWYzZTEyMzZlMjNiZmZiZDM2MzI3OTc5NDU4ZGM=", "commit": {"author": {"name": "Eric Huss", "email": "eric@huss.org", "date": "2021-05-24T23:25:23Z"}, "committer": {"name": "Eric Huss", "email": "eric@huss.org", "date": "2021-05-24T23:25:23Z"}, "message": "Add some tests for the linkchecker.", "tree": {"sha": "aabbd024f90f6003ccf63e73997242ba4ef049dc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/aabbd024f90f6003ccf63e73997242ba4ef049dc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b6532ebeeb31f3e1236e23bffbd36327979458dc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b6532ebeeb31f3e1236e23bffbd36327979458dc", "html_url": "https://github.com/rust-lang/rust/commit/b6532ebeeb31f3e1236e23bffbd36327979458dc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b6532ebeeb31f3e1236e23bffbd36327979458dc/comments", "author": {"login": "ehuss", "id": 43198, "node_id": "MDQ6VXNlcjQzMTk4", "avatar_url": "https://avatars.githubusercontent.com/u/43198?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehuss", "html_url": "https://github.com/ehuss", "followers_url": "https://api.github.com/users/ehuss/followers", "following_url": "https://api.github.com/users/ehuss/following{/other_user}", "gists_url": "https://api.github.com/users/ehuss/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehuss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehuss/subscriptions", "organizations_url": "https://api.github.com/users/ehuss/orgs", "repos_url": "https://api.github.com/users/ehuss/repos", "events_url": "https://api.github.com/users/ehuss/events{/privacy}", "received_events_url": "https://api.github.com/users/ehuss/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ehuss", "id": 43198, "node_id": "MDQ6VXNlcjQzMTk4", "avatar_url": "https://avatars.githubusercontent.com/u/43198?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehuss", "html_url": "https://github.com/ehuss", "followers_url": "https://api.github.com/users/ehuss/followers", "following_url": "https://api.github.com/users/ehuss/following{/other_user}", "gists_url": "https://api.github.com/users/ehuss/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehuss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehuss/subscriptions", "organizations_url": "https://api.github.com/users/ehuss/orgs", "repos_url": "https://api.github.com/users/ehuss/repos", "events_url": "https://api.github.com/users/ehuss/events{/privacy}", "received_events_url": "https://api.github.com/users/ehuss/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e9e6e66dd81c0c6c58efc2d70c54556e43045a51", "url": "https://api.github.com/repos/rust-lang/rust/commits/e9e6e66dd81c0c6c58efc2d70c54556e43045a51", "html_url": "https://github.com/rust-lang/rust/commit/e9e6e66dd81c0c6c58efc2d70c54556e43045a51"}], "stats": {"total": 187, "additions": 187, "deletions": 0}, "files": [{"sha": "cb27c55c9fe944519a72e065efaddaceed38fb1b", "filename": "src/tools/linkchecker/tests/basic_broken/foo.html", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/b6532ebeeb31f3e1236e23bffbd36327979458dc/src%2Ftools%2Flinkchecker%2Ftests%2Fbasic_broken%2Ffoo.html", "raw_url": "https://github.com/rust-lang/rust/raw/b6532ebeeb31f3e1236e23bffbd36327979458dc/src%2Ftools%2Flinkchecker%2Ftests%2Fbasic_broken%2Ffoo.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Flinkchecker%2Ftests%2Fbasic_broken%2Ffoo.html?ref=b6532ebeeb31f3e1236e23bffbd36327979458dc", "patch": "@@ -0,0 +1,5 @@\n+<html>\n+<body>\n+<a href=\"bar.html\">test</a>\n+</body>\n+</html>"}, {"sha": "66c457ad01f474b72146e0b68a07253e7028edce", "filename": "src/tools/linkchecker/tests/broken_fragment_local/foo.html", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/b6532ebeeb31f3e1236e23bffbd36327979458dc/src%2Ftools%2Flinkchecker%2Ftests%2Fbroken_fragment_local%2Ffoo.html", "raw_url": "https://github.com/rust-lang/rust/raw/b6532ebeeb31f3e1236e23bffbd36327979458dc/src%2Ftools%2Flinkchecker%2Ftests%2Fbroken_fragment_local%2Ffoo.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Flinkchecker%2Ftests%2Fbroken_fragment_local%2Ffoo.html?ref=b6532ebeeb31f3e1236e23bffbd36327979458dc", "patch": "@@ -0,0 +1,5 @@\n+<html>\n+<body>\n+<a href=\"#somefrag\">test</a>\n+</body>\n+</html>"}, {"sha": "7879e1ce9fd77d4d90054013725af5137e8ef31a", "filename": "src/tools/linkchecker/tests/broken_fragment_remote/bar.html", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/b6532ebeeb31f3e1236e23bffbd36327979458dc/src%2Ftools%2Flinkchecker%2Ftests%2Fbroken_fragment_remote%2Fbar.html", "raw_url": "https://github.com/rust-lang/rust/raw/b6532ebeeb31f3e1236e23bffbd36327979458dc/src%2Ftools%2Flinkchecker%2Ftests%2Fbroken_fragment_remote%2Fbar.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Flinkchecker%2Ftests%2Fbroken_fragment_remote%2Fbar.html?ref=b6532ebeeb31f3e1236e23bffbd36327979458dc", "patch": "@@ -0,0 +1,4 @@\n+<html>\n+<body>\n+</body>\n+</html>"}, {"sha": "7683060b3a6fac555b3f3c5c7eae37ff2eb73340", "filename": "src/tools/linkchecker/tests/broken_fragment_remote/inner/foo.html", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/b6532ebeeb31f3e1236e23bffbd36327979458dc/src%2Ftools%2Flinkchecker%2Ftests%2Fbroken_fragment_remote%2Finner%2Ffoo.html", "raw_url": "https://github.com/rust-lang/rust/raw/b6532ebeeb31f3e1236e23bffbd36327979458dc/src%2Ftools%2Flinkchecker%2Ftests%2Fbroken_fragment_remote%2Finner%2Ffoo.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Flinkchecker%2Ftests%2Fbroken_fragment_remote%2Finner%2Ffoo.html?ref=b6532ebeeb31f3e1236e23bffbd36327979458dc", "patch": "@@ -0,0 +1,5 @@\n+<html>\n+<body>\n+<a href=\"../bar.html#somefrag\">test</a>\n+</body>\n+</html>"}, {"sha": "bd3e3ad3343c6a72c6cde90a02bf220f0d4b55a7", "filename": "src/tools/linkchecker/tests/broken_redir/foo.html", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/b6532ebeeb31f3e1236e23bffbd36327979458dc/src%2Ftools%2Flinkchecker%2Ftests%2Fbroken_redir%2Ffoo.html", "raw_url": "https://github.com/rust-lang/rust/raw/b6532ebeeb31f3e1236e23bffbd36327979458dc/src%2Ftools%2Flinkchecker%2Ftests%2Fbroken_redir%2Ffoo.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Flinkchecker%2Ftests%2Fbroken_redir%2Ffoo.html?ref=b6532ebeeb31f3e1236e23bffbd36327979458dc", "patch": "@@ -0,0 +1,5 @@\n+<html>\n+<body>\n+  <a href=\"redir-bad.html\">bad redir</a>\n+</body>\n+</html>"}, {"sha": "3e376629f74fe6f6cd7657302074bc53ad2ae04f", "filename": "src/tools/linkchecker/tests/broken_redir/redir-bad.html", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/b6532ebeeb31f3e1236e23bffbd36327979458dc/src%2Ftools%2Flinkchecker%2Ftests%2Fbroken_redir%2Fredir-bad.html", "raw_url": "https://github.com/rust-lang/rust/raw/b6532ebeeb31f3e1236e23bffbd36327979458dc/src%2Ftools%2Flinkchecker%2Ftests%2Fbroken_redir%2Fredir-bad.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Flinkchecker%2Ftests%2Fbroken_redir%2Fredir-bad.html?ref=b6532ebeeb31f3e1236e23bffbd36327979458dc", "patch": "@@ -0,0 +1,10 @@\n+<!DOCTYPE html>\n+<html lang=\"en\">\n+<head>\n+    <meta http-equiv=\"refresh\" content=\"0;URL=sometarget\">\n+</head>\n+<body>\n+    <p>Redirecting to <a href=\"sometarget\">sometarget</a>...</p>\n+    <script>location.replace(\"sometarget\" + location.search + location.hash);</script>\n+</body>\n+</html>"}, {"sha": "c6ec999e5cfe229422420eb7b1fb5aa09ae8cbf2", "filename": "src/tools/linkchecker/tests/checks.rs", "status": "added", "additions": 77, "deletions": 0, "changes": 77, "blob_url": "https://github.com/rust-lang/rust/blob/b6532ebeeb31f3e1236e23bffbd36327979458dc/src%2Ftools%2Flinkchecker%2Ftests%2Fchecks.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b6532ebeeb31f3e1236e23bffbd36327979458dc/src%2Ftools%2Flinkchecker%2Ftests%2Fchecks.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Flinkchecker%2Ftests%2Fchecks.rs?ref=b6532ebeeb31f3e1236e23bffbd36327979458dc", "patch": "@@ -0,0 +1,77 @@\n+use std::path::Path;\n+use std::process::{Command, ExitStatus};\n+\n+fn run(dirname: &str) -> (ExitStatus, String, String) {\n+    let output = Command::new(env!(\"CARGO_BIN_EXE_linkchecker\"))\n+        .current_dir(Path::new(env!(\"CARGO_MANIFEST_DIR\")).join(\"tests\"))\n+        .arg(dirname)\n+        .output()\n+        .unwrap();\n+    let stdout = String::from_utf8(output.stdout).unwrap();\n+    let stderr = String::from_utf8(output.stderr).unwrap();\n+    (output.status, stdout, stderr)\n+}\n+\n+fn broken_test(dirname: &str, expected: &str) {\n+    let (status, stdout, stderr) = run(dirname);\n+    assert!(!status.success());\n+    if !stdout.contains(expected) {\n+        panic!(\n+            \"stdout did not contain expected text: {}\\n\\\n+            --- stdout:\\n\\\n+            {}\\n\\\n+            --- stderr:\\n\\\n+            {}\\n\",\n+            expected, stdout, stderr\n+        );\n+    }\n+}\n+\n+fn valid_test(dirname: &str) {\n+    let (status, stdout, stderr) = run(dirname);\n+    if !status.success() {\n+        panic!(\n+            \"test did not succeed as expected\\n\\\n+            --- stdout:\\n\\\n+            {}\\n\\\n+            --- stderr:\\n\\\n+            {}\\n\",\n+            stdout, stderr\n+        );\n+    }\n+}\n+\n+#[test]\n+fn valid() {\n+    valid_test(\"valid/inner\");\n+}\n+\n+#[test]\n+fn basic_broken() {\n+    broken_test(\"basic_broken\", \"bar.html\");\n+}\n+\n+#[test]\n+fn broken_fragment_local() {\n+    broken_test(\"broken_fragment_local\", \"#somefrag\");\n+}\n+\n+#[test]\n+fn broken_fragment_remote() {\n+    broken_test(\"broken_fragment_remote/inner\", \"#somefrag\");\n+}\n+\n+#[test]\n+fn broken_redir() {\n+    broken_test(\"broken_redir\", \"sometarget\");\n+}\n+\n+#[test]\n+fn directory_link() {\n+    broken_test(\"directory_link\", \"somedir\");\n+}\n+\n+#[test]\n+fn redirect_loop() {\n+    broken_test(\"redirect_loop\", \"redir-bad.html\");\n+}"}, {"sha": "40a8461b86cf5a2179f352063f84d714397adbf0", "filename": "src/tools/linkchecker/tests/directory_link/foo.html", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/b6532ebeeb31f3e1236e23bffbd36327979458dc/src%2Ftools%2Flinkchecker%2Ftests%2Fdirectory_link%2Ffoo.html", "raw_url": "https://github.com/rust-lang/rust/raw/b6532ebeeb31f3e1236e23bffbd36327979458dc/src%2Ftools%2Flinkchecker%2Ftests%2Fdirectory_link%2Ffoo.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Flinkchecker%2Ftests%2Fdirectory_link%2Ffoo.html?ref=b6532ebeeb31f3e1236e23bffbd36327979458dc", "patch": "@@ -0,0 +1,5 @@\n+<html>\n+<body>\n+  <a href=\"somedir\">dir link</a>\n+</body>\n+</html>"}, {"sha": "7879e1ce9fd77d4d90054013725af5137e8ef31a", "filename": "src/tools/linkchecker/tests/directory_link/somedir/index.html", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/b6532ebeeb31f3e1236e23bffbd36327979458dc/src%2Ftools%2Flinkchecker%2Ftests%2Fdirectory_link%2Fsomedir%2Findex.html", "raw_url": "https://github.com/rust-lang/rust/raw/b6532ebeeb31f3e1236e23bffbd36327979458dc/src%2Ftools%2Flinkchecker%2Ftests%2Fdirectory_link%2Fsomedir%2Findex.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Flinkchecker%2Ftests%2Fdirectory_link%2Fsomedir%2Findex.html?ref=b6532ebeeb31f3e1236e23bffbd36327979458dc", "patch": "@@ -0,0 +1,4 @@\n+<html>\n+<body>\n+</body>\n+</html>"}, {"sha": "bee58b212b5576aaa0794ac2939877c659398b7f", "filename": "src/tools/linkchecker/tests/redirect_loop/foo.html", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/b6532ebeeb31f3e1236e23bffbd36327979458dc/src%2Ftools%2Flinkchecker%2Ftests%2Fredirect_loop%2Ffoo.html", "raw_url": "https://github.com/rust-lang/rust/raw/b6532ebeeb31f3e1236e23bffbd36327979458dc/src%2Ftools%2Flinkchecker%2Ftests%2Fredirect_loop%2Ffoo.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Flinkchecker%2Ftests%2Fredirect_loop%2Ffoo.html?ref=b6532ebeeb31f3e1236e23bffbd36327979458dc", "patch": "@@ -0,0 +1,5 @@\n+<html>\n+<body>\n+  <a href=\"redir-bad.html\">loop link</a>\n+</body>\n+</html>"}, {"sha": "fe7780e6739bfe3106e66f7982833ccc6ebea34d", "filename": "src/tools/linkchecker/tests/redirect_loop/redir-bad.html", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/b6532ebeeb31f3e1236e23bffbd36327979458dc/src%2Ftools%2Flinkchecker%2Ftests%2Fredirect_loop%2Fredir-bad.html", "raw_url": "https://github.com/rust-lang/rust/raw/b6532ebeeb31f3e1236e23bffbd36327979458dc/src%2Ftools%2Flinkchecker%2Ftests%2Fredirect_loop%2Fredir-bad.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Flinkchecker%2Ftests%2Fredirect_loop%2Fredir-bad.html?ref=b6532ebeeb31f3e1236e23bffbd36327979458dc", "patch": "@@ -0,0 +1,10 @@\n+<!DOCTYPE html>\n+<html lang=\"en\">\n+<head>\n+    <meta http-equiv=\"refresh\" content=\"0;URL=redir-bad.html\">\n+</head>\n+<body>\n+    <p>Redirecting to <a href=\"redir-bad.html\">redir-bad.html</a>...</p>\n+    <script>location.replace(\"redir-bad.html\" + location.search + location.hash);</script>\n+</body>\n+</html>"}, {"sha": "4b500d78b76e4cc3db989effb3f8316d6aa64a9a", "filename": "src/tools/linkchecker/tests/valid/inner/bar.html", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/b6532ebeeb31f3e1236e23bffbd36327979458dc/src%2Ftools%2Flinkchecker%2Ftests%2Fvalid%2Finner%2Fbar.html", "raw_url": "https://github.com/rust-lang/rust/raw/b6532ebeeb31f3e1236e23bffbd36327979458dc/src%2Ftools%2Flinkchecker%2Ftests%2Fvalid%2Finner%2Fbar.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Flinkchecker%2Ftests%2Fvalid%2Finner%2Fbar.html?ref=b6532ebeeb31f3e1236e23bffbd36327979458dc", "patch": "@@ -0,0 +1,7 @@\n+<html>\n+<body>\n+\n+  <h2 id=\"barfrag\">Bar</h2>\n+\n+</body>\n+</html>"}, {"sha": "3c6a7483bcd46020a67b1819e7a3a621d1fb5b31", "filename": "src/tools/linkchecker/tests/valid/inner/foo.html", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/b6532ebeeb31f3e1236e23bffbd36327979458dc/src%2Ftools%2Flinkchecker%2Ftests%2Fvalid%2Finner%2Ffoo.html", "raw_url": "https://github.com/rust-lang/rust/raw/b6532ebeeb31f3e1236e23bffbd36327979458dc/src%2Ftools%2Flinkchecker%2Ftests%2Fvalid%2Finner%2Ffoo.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Flinkchecker%2Ftests%2Fvalid%2Finner%2Ffoo.html?ref=b6532ebeeb31f3e1236e23bffbd36327979458dc", "patch": "@@ -0,0 +1,14 @@\n+<html>\n+<body>\n+  <a href=\"#localfrag\">test local frag</a>\n+  <a href=\"../outer.html\">remote link</a>\n+  <a href=\"../outer.html#somefrag\">remote link with fragment</a>\n+  <a href=\"bar.html\">this book</a>\n+  <a href=\"bar.html#barfrag\">this book with fragment</a>\n+  <a href=\"https://example.com/doesnotexist\">external links not validated</a>\n+  <a href=\"redir.html#redirfrag\">Redirect</a>\n+\n+  <h2 id=\"localfrag\">Local</h2>\n+\n+</body>\n+</html>"}, {"sha": "d21336e7e738bb08d3497a27aa49ecd0fda99abe", "filename": "src/tools/linkchecker/tests/valid/inner/redir-bad.html", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/b6532ebeeb31f3e1236e23bffbd36327979458dc/src%2Ftools%2Flinkchecker%2Ftests%2Fvalid%2Finner%2Fredir-bad.html", "raw_url": "https://github.com/rust-lang/rust/raw/b6532ebeeb31f3e1236e23bffbd36327979458dc/src%2Ftools%2Flinkchecker%2Ftests%2Fvalid%2Finner%2Fredir-bad.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Flinkchecker%2Ftests%2Fvalid%2Finner%2Fredir-bad.html?ref=b6532ebeeb31f3e1236e23bffbd36327979458dc", "patch": "@@ -0,0 +1,11 @@\n+<!DOCTYPE html>\n+<html lang=\"en\">\n+<head>\n+    <meta http-equiv=\"refresh\" content=\"0;URL=xxx\">\n+</head>\n+<body>\n+    <p>Redirecting to <a href=\"xxx\">xxx</a>...</p>\n+    <script>location.replace(\"xxx\" + location.search + location.hash);</script>\n+    These files are skipped, but probably shouldn't be.\n+</body>\n+</html>"}, {"sha": "bd59884a01ecff0abab7f1eacaee8ba10e04ea67", "filename": "src/tools/linkchecker/tests/valid/inner/redir-target.html", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/b6532ebeeb31f3e1236e23bffbd36327979458dc/src%2Ftools%2Flinkchecker%2Ftests%2Fvalid%2Finner%2Fredir-target.html", "raw_url": "https://github.com/rust-lang/rust/raw/b6532ebeeb31f3e1236e23bffbd36327979458dc/src%2Ftools%2Flinkchecker%2Ftests%2Fvalid%2Finner%2Fredir-target.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Flinkchecker%2Ftests%2Fvalid%2Finner%2Fredir-target.html?ref=b6532ebeeb31f3e1236e23bffbd36327979458dc", "patch": "@@ -0,0 +1,5 @@\n+<html>\n+<body>\n+  <h2 id=\"redirfrag\">Redir</h2>\n+</body>\n+</html>"}, {"sha": "1808b23aed8564f539a3e902dee107bd4773727b", "filename": "src/tools/linkchecker/tests/valid/inner/redir.html", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/b6532ebeeb31f3e1236e23bffbd36327979458dc/src%2Ftools%2Flinkchecker%2Ftests%2Fvalid%2Finner%2Fredir.html", "raw_url": "https://github.com/rust-lang/rust/raw/b6532ebeeb31f3e1236e23bffbd36327979458dc/src%2Ftools%2Flinkchecker%2Ftests%2Fvalid%2Finner%2Fredir.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Flinkchecker%2Ftests%2Fvalid%2Finner%2Fredir.html?ref=b6532ebeeb31f3e1236e23bffbd36327979458dc", "patch": "@@ -0,0 +1,10 @@\n+<!DOCTYPE html>\n+<html lang=\"en\">\n+<head>\n+    <meta http-equiv=\"refresh\" content=\"0;URL=redir-target.html\">\n+</head>\n+<body>\n+    <p>Redirecting to <a href=\"redir-target.html\">redir-target.html</a>...</p>\n+    <script>location.replace(\"redir-target.html\" + location.search + location.hash);</script>\n+</body>\n+</html>"}, {"sha": "35f799f2023177c40bd72396f15f062559cff0a0", "filename": "src/tools/linkchecker/tests/valid/outer.html", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/b6532ebeeb31f3e1236e23bffbd36327979458dc/src%2Ftools%2Flinkchecker%2Ftests%2Fvalid%2Fouter.html", "raw_url": "https://github.com/rust-lang/rust/raw/b6532ebeeb31f3e1236e23bffbd36327979458dc/src%2Ftools%2Flinkchecker%2Ftests%2Fvalid%2Fouter.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Flinkchecker%2Ftests%2Fvalid%2Fouter.html?ref=b6532ebeeb31f3e1236e23bffbd36327979458dc", "patch": "@@ -0,0 +1,5 @@\n+<html>\n+<body>\n+<a id=\"somefrag\"></a>\n+</body>\n+</html>"}]}