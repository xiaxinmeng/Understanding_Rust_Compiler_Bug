{"sha": "12f9b796ff9a551d540390647043f4bcd1728838", "node_id": "MDY6Q29tbWl0NzI0NzEyOjEyZjliNzk2ZmY5YTU1MWQ1NDAzOTA2NDcwNDNmNGJjZDE3Mjg4Mzg=", "commit": {"author": {"name": "Aaron Hill", "email": "aa1ronham@gmail.com", "date": "2019-01-14T01:37:27Z"}, "committer": {"name": "Aaron Hill", "email": "aa1ronham@gmail.com", "date": "2019-02-01T14:43:56Z"}, "message": "Improve UI tests", "tree": {"sha": "2ca9f5d153add63430446355a965d17a58e86da2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2ca9f5d153add63430446355a965d17a58e86da2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/12f9b796ff9a551d540390647043f4bcd1728838", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7J9Gc3TfBwj2K399tAh+UQ6YsWQFAlxUWywACgkQtAh+UQ6Y\nsWTQMBAAhV1KbpxZmpHzBMU7bXKA+lzeM6ammXpCd0s3DWT4bfsRp9UU3cITbU5A\ncYFfpXrEnYVreBtXzAp7iADrcveYPtMGaIMN8FioyssmNgBzYQjTxubRUpkXSKuE\naCvDhkvltnIU3rWI3PArfBGvim+m8Woku3Lc+8HDFuWLfQLVWrfNt6O5hnyd2RkH\nEO7sAeJDg0l5meJLj9uRwKnWLN9LO9b+mRv9e/xFvU2Hi0C3Thb4FdmouuL1joah\n8SJDaPIzcEx1xVQy2VCcJSounNrYCsvS7ONsvo81nD8I7grwfJ88ZiFX/L4+jEIp\nLhl8/V4UJGYdXovRrqXIjHD/SPXqHKsuNrPxWedqcp36JbKk8ZOCcQV7exA0b6UD\nPLpO/jB+dVkwtpA984Y0M+I6r9g887A1OM47RSCtm5O+H8gf4MhM/U5SOX7mfWxb\ni5xKBMVrN/D9IaeOqJ0NmL27jHRJDoEEHEgZvbDeaWONcTyAO0SvvDQj1xKe1h6N\nhOKpCP2/ZVoiOCmrAvk4NH3OrGxB3/ermli/zBvE4E8E5iOMgJj7g+SC0fHSugMC\nUHxCRSeswIiZ+UwVVWfxx2At/rm7DwFgRvU7k1TTAKuQFoIuhV0bGEP65OPDgdeR\nZ1jxh+j5lwYrxBXA3JsdOOWWn47kEMMhbnFwojyJkJl+1Nr+N/k=\n=Haye\n-----END PGP SIGNATURE-----", "payload": "tree 2ca9f5d153add63430446355a965d17a58e86da2\nparent 08c901f0155b10c55427991e9da6fce83b541f2c\nauthor Aaron Hill <aa1ronham@gmail.com> 1547429847 -0500\ncommitter Aaron Hill <aa1ronham@gmail.com> 1549032236 -0500\n\nImprove UI tests\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/12f9b796ff9a551d540390647043f4bcd1728838", "html_url": "https://github.com/rust-lang/rust/commit/12f9b796ff9a551d540390647043f4bcd1728838", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/12f9b796ff9a551d540390647043f4bcd1728838/comments", "author": {"login": "Aaron1011", "id": 1408859, "node_id": "MDQ6VXNlcjE0MDg4NTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1408859?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aaron1011", "html_url": "https://github.com/Aaron1011", "followers_url": "https://api.github.com/users/Aaron1011/followers", "following_url": "https://api.github.com/users/Aaron1011/following{/other_user}", "gists_url": "https://api.github.com/users/Aaron1011/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aaron1011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aaron1011/subscriptions", "organizations_url": "https://api.github.com/users/Aaron1011/orgs", "repos_url": "https://api.github.com/users/Aaron1011/repos", "events_url": "https://api.github.com/users/Aaron1011/events{/privacy}", "received_events_url": "https://api.github.com/users/Aaron1011/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Aaron1011", "id": 1408859, "node_id": "MDQ6VXNlcjE0MDg4NTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1408859?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aaron1011", "html_url": "https://github.com/Aaron1011", "followers_url": "https://api.github.com/users/Aaron1011/followers", "following_url": "https://api.github.com/users/Aaron1011/following{/other_user}", "gists_url": "https://api.github.com/users/Aaron1011/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aaron1011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aaron1011/subscriptions", "organizations_url": "https://api.github.com/users/Aaron1011/orgs", "repos_url": "https://api.github.com/users/Aaron1011/repos", "events_url": "https://api.github.com/users/Aaron1011/events{/privacy}", "received_events_url": "https://api.github.com/users/Aaron1011/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "08c901f0155b10c55427991e9da6fce83b541f2c", "url": "https://api.github.com/repos/rust-lang/rust/commits/08c901f0155b10c55427991e9da6fce83b541f2c", "html_url": "https://github.com/rust-lang/rust/commit/08c901f0155b10c55427991e9da6fce83b541f2c"}], "stats": {"total": 38, "additions": 32, "deletions": 6}, "files": [{"sha": "e7afeb84fb4f4801d0e6e6ecc19e1b360bc02ee4", "filename": "src/test/ui/privacy/pub-priv-dep/auxiliary/priv_dep.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/12f9b796ff9a551d540390647043f4bcd1728838/src%2Ftest%2Fui%2Fprivacy%2Fpub-priv-dep%2Fauxiliary%2Fpriv_dep.rs", "raw_url": "https://github.com/rust-lang/rust/raw/12f9b796ff9a551d540390647043f4bcd1728838/src%2Ftest%2Fui%2Fprivacy%2Fpub-priv-dep%2Fauxiliary%2Fpriv_dep.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fprivacy%2Fpub-priv-dep%2Fauxiliary%2Fpriv_dep.rs?ref=12f9b796ff9a551d540390647043f4bcd1728838", "patch": "@@ -1 +1,2 @@\n pub struct OtherType;\n+pub trait OtherTrait {}"}, {"sha": "3ebafd953addfacc20162221d1900dd4b04235b0", "filename": "src/test/ui/privacy/pub-priv-dep/auxiliary/pub_dep.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/12f9b796ff9a551d540390647043f4bcd1728838/src%2Ftest%2Fui%2Fprivacy%2Fpub-priv-dep%2Fauxiliary%2Fpub_dep.rs", "raw_url": "https://github.com/rust-lang/rust/raw/12f9b796ff9a551d540390647043f4bcd1728838/src%2Ftest%2Fui%2Fprivacy%2Fpub-priv-dep%2Fauxiliary%2Fpub_dep.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fprivacy%2Fpub-priv-dep%2Fauxiliary%2Fpub_dep.rs?ref=12f9b796ff9a551d540390647043f4bcd1728838", "patch": "@@ -0,0 +1 @@\n+pub struct PubType;"}, {"sha": "f82c1ad1c93b5ebc20942767c3522fb3d20b6b2a", "filename": "src/test/ui/privacy/pub-priv-dep/pub-priv1.rs", "status": "modified", "additions": 15, "deletions": 2, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/12f9b796ff9a551d540390647043f4bcd1728838/src%2Ftest%2Fui%2Fprivacy%2Fpub-priv-dep%2Fpub-priv1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/12f9b796ff9a551d540390647043f4bcd1728838/src%2Ftest%2Fui%2Fprivacy%2Fpub-priv-dep%2Fpub-priv1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fprivacy%2Fpub-priv-dep%2Fpub-priv1.rs?ref=12f9b796ff9a551d540390647043f4bcd1728838", "patch": "@@ -1,11 +1,16 @@\n  // aux-build:priv_dep.rs\n+ // aux-build:pub_dep.rs\n+ // compile-flags: --extern-public=pub_dep\n #![feature(public_private_dependencies)]\n #![deny(leaked_private_dependency)]\n \n // This crate is a private dependency\n extern crate priv_dep;\n+// This crate is a public dependenct\n+extern crate pub_dep;\n \n-use priv_dep::OtherType;\n+use priv_dep::{OtherType, OtherTrait};\n+use pub_dep::PubType;\n \n // Type from private dependency used in private\n // type - this is fine\n@@ -17,7 +22,8 @@ pub struct PublicType {\n     pub field: OtherType,\n     //~^ ERROR type `priv_dep::OtherType` from private dependency 'priv_dep' in public interface [leaked_private_dependency]\n     //~| WARNING this was previously accepted\n-    priv_field: OtherType,\n+    priv_field: OtherType, // Private field - this is fine\n+    pub other_field: PubType // Type from public dependency - this is fine\n }\n \n impl PublicType {\n@@ -28,4 +34,11 @@ impl PublicType {\n     fn priv_fn(param: OtherType) {}\n }\n \n+pub trait MyPubTrait {\n+    type Foo: OtherTrait;\n+}\n+//~^^^ ERROR trait `priv_dep::OtherTrait` from private dependency 'priv_dep' in public interface [leaked_private_dependency]\n+//~| WARNING this was previously accepted\n+\n+\n fn main() {}"}, {"sha": "fa74eb2265d0cc007d7c523883fe7c7b21adacac", "filename": "src/test/ui/privacy/pub-priv-dep/pub-priv1.stderr", "status": "modified", "additions": 15, "deletions": 4, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/12f9b796ff9a551d540390647043f4bcd1728838/src%2Ftest%2Fui%2Fprivacy%2Fpub-priv-dep%2Fpub-priv1.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/12f9b796ff9a551d540390647043f4bcd1728838/src%2Ftest%2Fui%2Fprivacy%2Fpub-priv-dep%2Fpub-priv1.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fprivacy%2Fpub-priv-dep%2Fpub-priv1.stderr?ref=12f9b796ff9a551d540390647043f4bcd1728838", "patch": "@@ -1,25 +1,36 @@\n error: type `priv_dep::OtherType` from private dependency 'priv_dep' in public interface\n-  --> $DIR/pub-priv1.rs:17:5\n+  --> $DIR/pub-priv1.rs:22:5\n    |\n LL |     pub field: OtherType,\n    |     ^^^^^^^^^^^^^^^^^^^^\n    |\n note: lint level defined here\n-  --> $DIR/pub-priv1.rs:3:9\n+  --> $DIR/pub-priv1.rs:5:9\n    |\n LL | #![deny(leaked_private_dependency)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^\n    = warning: this was previously accepted by the compiler but is being phased out; it will become a hard error in a future release!\n    = note: for more information, see issue #44663 <https://github.com/rust-lang/rust/issues/44663>\n \n error: type `priv_dep::OtherType` from private dependency 'priv_dep' in public interface\n-  --> $DIR/pub-priv1.rs:24:5\n+  --> $DIR/pub-priv1.rs:30:5\n    |\n LL |     pub fn pub_fn(param: OtherType) {}\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n    = warning: this was previously accepted by the compiler but is being phased out; it will become a hard error in a future release!\n    = note: for more information, see issue #44663 <https://github.com/rust-lang/rust/issues/44663>\n \n-error: aborting due to 2 previous errors\n+error: trait `priv_dep::OtherTrait` from private dependency 'priv_dep' in public interface\n+  --> $DIR/pub-priv1.rs:37:1\n+   |\n+LL | / pub trait MyPubTrait {\n+LL | |     type Foo: OtherTrait;\n+LL | | }\n+   | |_^\n+   |\n+   = warning: this was previously accepted by the compiler but is being phased out; it will become a hard error in a future release!\n+   = note: for more information, see issue #44663 <https://github.com/rust-lang/rust/issues/44663>\n+\n+error: aborting due to 3 previous errors\n "}]}