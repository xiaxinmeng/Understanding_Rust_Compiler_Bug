{"sha": "b5d167f58a423cb0003714eceeb72172d1726473", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI1ZDE2N2Y1OGE0MjNjYjAwMDM3MTRlY2VlYjcyMTcyZDE3MjY0NzM=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2019-01-12T21:27:09Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2019-01-20T20:47:43Z"}, "message": "Add default favicon for documentation", "tree": {"sha": "87886d4ee78564b1c05fbd1b321a4900e31a332d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/87886d4ee78564b1c05fbd1b321a4900e31a332d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b5d167f58a423cb0003714eceeb72172d1726473", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b5d167f58a423cb0003714eceeb72172d1726473", "html_url": "https://github.com/rust-lang/rust/commit/b5d167f58a423cb0003714eceeb72172d1726473", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b5d167f58a423cb0003714eceeb72172d1726473/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2200fd3c7caf19323e7bd4cf649e4ec53d1de369", "url": "https://api.github.com/repos/rust-lang/rust/commits/2200fd3c7caf19323e7bd4cf649e4ec53d1de369", "html_url": "https://github.com/rust-lang/rust/commit/2200fd3c7caf19323e7bd4cf649e4ec53d1de369"}], "stats": {"total": 12, "additions": 9, "deletions": 3}, "files": [{"sha": "c34dcbbb672e9b8753d784dbe9687171faed258f", "filename": "src/librustdoc/html/layout.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/b5d167f58a423cb0003714eceeb72172d1726473/src%2Flibrustdoc%2Fhtml%2Flayout.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b5d167f58a423cb0003714eceeb72172d1726473/src%2Flibrustdoc%2Fhtml%2Flayout.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Flayout.rs?ref=b5d167f58a423cb0003714eceeb72172d1726473", "patch": "@@ -191,7 +191,9 @@ pub fn render<T: fmt::Display, S: fmt::Display>(\n     description = page.description,\n     keywords = page.keywords,\n     favicon   = if layout.favicon.is_empty() {\n-        String::new()\n+        format!(r#\"<link rel=\"shortcut icon\" href=\"{static_root_path}favicon{suffix}.ico\">\"#,\n+                static_root_path=static_root_path,\n+                suffix=page.resource_suffix)\n     } else {\n         format!(r#\"<link rel=\"shortcut icon\" href=\"{}\">\"#, layout.favicon)\n     },"}, {"sha": "b64ac9509631b467de0c0e66991404f625ace555", "filename": "src/librustdoc/html/render.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/b5d167f58a423cb0003714eceeb72172d1726473/src%2Flibrustdoc%2Fhtml%2Frender.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b5d167f58a423cb0003714eceeb72172d1726473/src%2Flibrustdoc%2Fhtml%2Frender.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender.rs?ref=b5d167f58a423cb0003714eceeb72172d1726473", "patch": "@@ -793,6 +793,10 @@ fn write_shared(\n         write(cx.dst.join(&format!(\"rust-logo{}.png\", cx.shared.resource_suffix)),\n               static_files::RUST_LOGO)?;\n     }\n+    if (*cx.shared).layout.favicon.is_empty() {\n+        write(cx.dst.join(&format!(\"favicon{}.ico\", cx.shared.resource_suffix)),\n+              static_files::RUST_FAVICON)?;\n+    }\n     write(cx.dst.join(&format!(\"brush{}.svg\", cx.shared.resource_suffix)),\n           static_files::BRUSH_SVG)?;\n     write(cx.dst.join(&format!(\"wheel{}.svg\", cx.shared.resource_suffix)),\n@@ -1999,8 +2003,6 @@ impl Context {\n         themes.push(PathBuf::from(\"settings.css\"));\n         let mut layout = self.shared.layout.clone();\n         layout.krate = String::new();\n-        layout.logo = String::new();\n-        layout.favicon = String::new();\n         try_err!(layout::render(&mut w, &layout,\n                                 &page, &sidebar, &settings,\n                                 self.shared.css_file_extension.is_some(),"}, {"sha": "b8ad23769ac8d06eb5973bfb3d2acbf385240f98", "filename": "src/librustdoc/html/static/favicon.ico", "status": "added", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/b5d167f58a423cb0003714eceeb72172d1726473/src%2Flibrustdoc%2Fhtml%2Fstatic%2Ffavicon.ico", "raw_url": "https://github.com/rust-lang/rust/raw/b5d167f58a423cb0003714eceeb72172d1726473/src%2Flibrustdoc%2Fhtml%2Fstatic%2Ffavicon.ico", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Ffavicon.ico?ref=b5d167f58a423cb0003714eceeb72172d1726473"}, {"sha": "a1d8cfacc54ada112d34a7cb52037559b4c522bd", "filename": "src/librustdoc/html/static_files.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b5d167f58a423cb0003714eceeb72172d1726473/src%2Flibrustdoc%2Fhtml%2Fstatic_files.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b5d167f58a423cb0003714eceeb72172d1726473/src%2Flibrustdoc%2Fhtml%2Fstatic_files.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic_files.rs?ref=b5d167f58a423cb0003714eceeb72172d1726473", "patch": "@@ -53,6 +53,8 @@ pub static LICENSE_MIT: &'static [u8] = include_bytes!(\"static/LICENSE-MIT.txt\")\n \n /// The contents of `rust-logo.png`, the default icon of the documentation.\n pub static RUST_LOGO: &'static [u8] = include_bytes!(\"static/rust-logo.png\");\n+/// The contents of `favicon.ico`, the default favicon of the documentation.\n+pub static RUST_FAVICON: &'static [u8] = include_bytes!(\"static/favicon.ico\");\n \n /// The built-in themes given to every documentation site.\n pub mod themes {"}]}