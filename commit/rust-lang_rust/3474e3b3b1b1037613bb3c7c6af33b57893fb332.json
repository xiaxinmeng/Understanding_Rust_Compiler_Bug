{"sha": "3474e3b3b1b1037613bb3c7c6af33b57893fb332", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM0NzRlM2IzYjFiMTAzNzYxM2JiM2M3YzZhZjMzYjU3ODkzZmIzMzI=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2021-09-17T22:02:43Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2021-09-17T22:02:43Z"}, "message": "intenral: more local tests for statics", "tree": {"sha": "ae1555f56be10ff752d622de17af4e983282a242", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ae1555f56be10ff752d622de17af4e983282a242"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3474e3b3b1b1037613bb3c7c6af33b57893fb332", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3474e3b3b1b1037613bb3c7c6af33b57893fb332", "html_url": "https://github.com/rust-lang/rust/commit/3474e3b3b1b1037613bb3c7c6af33b57893fb332", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3474e3b3b1b1037613bb3c7c6af33b57893fb332/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1feb8e89d5768d45c8c9841e52e7456e4070081b", "url": "https://api.github.com/repos/rust-lang/rust/commits/1feb8e89d5768d45c8c9841e52e7456e4070081b", "html_url": "https://github.com/rust-lang/rust/commit/1feb8e89d5768d45c8c9841e52e7456e4070081b"}], "stats": {"total": 95, "additions": 50, "deletions": 45}, "files": [{"sha": "93ba7d05fe7bfe050973221cd5a336dc40cd65ef", "filename": "crates/parser/src/grammar/items/consts.rs", "status": "modified", "additions": 8, "deletions": 5, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/3474e3b3b1b1037613bb3c7c6af33b57893fb332/crates%2Fparser%2Fsrc%2Fgrammar%2Fitems%2Fconsts.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3474e3b3b1b1037613bb3c7c6af33b57893fb332/crates%2Fparser%2Fsrc%2Fgrammar%2Fitems%2Fconsts.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fparser%2Fsrc%2Fgrammar%2Fitems%2Fconsts.rs?ref=3474e3b3b1b1037613bb3c7c6af33b57893fb332", "patch": "@@ -1,5 +1,7 @@\n use super::*;\n \n+// test const_item\n+// const C: u32 = 92;\n pub(super) fn konst(p: &mut Parser, m: Marker) {\n     p.bump(T![const]);\n     const_or_static(p, m, true)\n@@ -13,14 +15,15 @@ pub(super) fn static_(p: &mut Parser, m: Marker) {\n fn const_or_static(p: &mut Parser, m: Marker, is_const: bool) {\n     p.eat(T![mut]);\n \n-    // Allow `_` in place of an identifier in a `const`.\n-    let is_const_underscore = is_const && p.eat(T![_]);\n-    if !is_const_underscore {\n+    if is_const && p.eat(T![_]) {\n+        // test anonymous_const\n+        // const _: u32 = 0;\n+    } else {\n+        // test_err anonymous_static\n+        // static _: i32 = 5;\n         name(p);\n     }\n \n-    // test_err static_underscore\n-    // static _: i32 = 5;\n     if p.at(T![:]) {\n         types::ascription(p);\n     } else {"}, {"sha": "8d761b9074144d7c1a3d7531080042dfd43ad40f", "filename": "crates/syntax/test_data/parser/inline/err/0013_anonymous_static.rast", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/3474e3b3b1b1037613bb3c7c6af33b57893fb332/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Ferr%2F0013_anonymous_static.rast", "raw_url": "https://github.com/rust-lang/rust/raw/3474e3b3b1b1037613bb3c7c6af33b57893fb332/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Ferr%2F0013_anonymous_static.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Ferr%2F0013_anonymous_static.rast?ref=3474e3b3b1b1037613bb3c7c6af33b57893fb332", "previous_filename": "crates/syntax/test_data/parser/inline/err/0013_static_underscore.rast"}, {"sha": "df8cecb43262bb2f31c7847fffa8572582a2be7c", "filename": "crates/syntax/test_data/parser/inline/err/0013_anonymous_static.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/3474e3b3b1b1037613bb3c7c6af33b57893fb332/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Ferr%2F0013_anonymous_static.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3474e3b3b1b1037613bb3c7c6af33b57893fb332/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Ferr%2F0013_anonymous_static.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Ferr%2F0013_anonymous_static.rs?ref=3474e3b3b1b1037613bb3c7c6af33b57893fb332", "previous_filename": "crates/syntax/test_data/parser/inline/err/0013_static_underscore.rs"}, {"sha": "8a61d5e56683d236919d704175400003cc491db7", "filename": "crates/syntax/test_data/parser/inline/ok/0172_const_item.rast", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/3474e3b3b1b1037613bb3c7c6af33b57893fb332/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0172_const_item.rast", "raw_url": "https://github.com/rust-lang/rust/raw/3474e3b3b1b1037613bb3c7c6af33b57893fb332/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0172_const_item.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0172_const_item.rast?ref=3474e3b3b1b1037613bb3c7c6af33b57893fb332", "patch": "@@ -0,0 +1,20 @@\n+SOURCE_FILE@0..19\n+  CONST@0..18\n+    CONST_KW@0..5 \"const\"\n+    WHITESPACE@5..6 \" \"\n+    NAME@6..7\n+      IDENT@6..7 \"C\"\n+    COLON@7..8 \":\"\n+    WHITESPACE@8..9 \" \"\n+    PATH_TYPE@9..12\n+      PATH@9..12\n+        PATH_SEGMENT@9..12\n+          NAME_REF@9..12\n+            IDENT@9..12 \"u32\"\n+    WHITESPACE@12..13 \" \"\n+    EQ@13..14 \"=\"\n+    WHITESPACE@14..15 \" \"\n+    LITERAL@15..17\n+      INT_NUMBER@15..17 \"92\"\n+    SEMICOLON@17..18 \";\"\n+  WHITESPACE@18..19 \"\\n\""}, {"sha": "6d5f5be65dc5fc80c117a70e0925171c8270c87a", "filename": "crates/syntax/test_data/parser/inline/ok/0172_const_item.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/3474e3b3b1b1037613bb3c7c6af33b57893fb332/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0172_const_item.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3474e3b3b1b1037613bb3c7c6af33b57893fb332/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0172_const_item.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0172_const_item.rs?ref=3474e3b3b1b1037613bb3c7c6af33b57893fb332", "patch": "@@ -0,0 +1 @@\n+const C: u32 = 92;"}, {"sha": "68ce503c39d780cbe9bb212e3263f29308f6991e", "filename": "crates/syntax/test_data/parser/inline/ok/0173_anonymous_const.rast", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/3474e3b3b1b1037613bb3c7c6af33b57893fb332/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0173_anonymous_const.rast", "raw_url": "https://github.com/rust-lang/rust/raw/3474e3b3b1b1037613bb3c7c6af33b57893fb332/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0173_anonymous_const.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0173_anonymous_const.rast?ref=3474e3b3b1b1037613bb3c7c6af33b57893fb332", "patch": "@@ -0,0 +1,19 @@\n+SOURCE_FILE@0..18\n+  CONST@0..17\n+    CONST_KW@0..5 \"const\"\n+    WHITESPACE@5..6 \" \"\n+    UNDERSCORE@6..7 \"_\"\n+    COLON@7..8 \":\"\n+    WHITESPACE@8..9 \" \"\n+    PATH_TYPE@9..12\n+      PATH@9..12\n+        PATH_SEGMENT@9..12\n+          NAME_REF@9..12\n+            IDENT@9..12 \"u32\"\n+    WHITESPACE@12..13 \" \"\n+    EQ@13..14 \"=\"\n+    WHITESPACE@14..15 \" \"\n+    LITERAL@15..16\n+      INT_NUMBER@15..16 \"0\"\n+    SEMICOLON@16..17 \";\"\n+  WHITESPACE@17..18 \"\\n\""}, {"sha": "c1d5cdfc621b76a966da6de02a31aa93318c01f5", "filename": "crates/syntax/test_data/parser/inline/ok/0173_anonymous_const.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/3474e3b3b1b1037613bb3c7c6af33b57893fb332/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0173_anonymous_const.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3474e3b3b1b1037613bb3c7c6af33b57893fb332/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0173_anonymous_const.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0173_anonymous_const.rs?ref=3474e3b3b1b1037613bb3c7c6af33b57893fb332", "patch": "@@ -0,0 +1 @@\n+const _: u32 = 0;"}, {"sha": "6b234b0b2418e9767eb76efedf39c42d25058f1f", "filename": "crates/syntax/test_data/parser/ok/0024_const_item.rast", "status": "modified", "additions": 1, "deletions": 38, "changes": 39, "blob_url": "https://github.com/rust-lang/rust/blob/3474e3b3b1b1037613bb3c7c6af33b57893fb332/crates%2Fsyntax%2Ftest_data%2Fparser%2Fok%2F0024_const_item.rast", "raw_url": "https://github.com/rust-lang/rust/raw/3474e3b3b1b1037613bb3c7c6af33b57893fb332/crates%2Fsyntax%2Ftest_data%2Fparser%2Fok%2F0024_const_item.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Fok%2F0024_const_item.rast?ref=3474e3b3b1b1037613bb3c7c6af33b57893fb332", "patch": "@@ -1,38 +1 @@\n-SOURCE_FILE@0..39\n-  CONST@0..17\n-    CONST_KW@0..5 \"const\"\n-    WHITESPACE@5..6 \" \"\n-    UNDERSCORE@6..7 \"_\"\n-    COLON@7..8 \":\"\n-    WHITESPACE@8..9 \" \"\n-    PATH_TYPE@9..12\n-      PATH@9..12\n-        PATH_SEGMENT@9..12\n-          NAME_REF@9..12\n-            IDENT@9..12 \"u32\"\n-    WHITESPACE@12..13 \" \"\n-    EQ@13..14 \"=\"\n-    WHITESPACE@14..15 \" \"\n-    LITERAL@15..16\n-      INT_NUMBER@15..16 \"0\"\n-    SEMICOLON@16..17 \";\"\n-  WHITESPACE@17..18 \"\\n\"\n-  CONST@18..38\n-    CONST_KW@18..23 \"const\"\n-    WHITESPACE@23..24 \" \"\n-    NAME@24..27\n-      IDENT@24..27 \"FOO\"\n-    COLON@27..28 \":\"\n-    WHITESPACE@28..29 \" \"\n-    PATH_TYPE@29..32\n-      PATH@29..32\n-        PATH_SEGMENT@29..32\n-          NAME_REF@29..32\n-            IDENT@29..32 \"u32\"\n-    WHITESPACE@32..33 \" \"\n-    EQ@33..34 \"=\"\n-    WHITESPACE@34..35 \" \"\n-    LITERAL@35..37\n-      INT_NUMBER@35..37 \"92\"\n-    SEMICOLON@37..38 \";\"\n-  WHITESPACE@38..39 \"\\n\"\n+SOURCE_FILE@0..0"}, {"sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391", "filename": "crates/syntax/test_data/parser/ok/0024_const_item.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3474e3b3b1b1037613bb3c7c6af33b57893fb332/crates%2Fsyntax%2Ftest_data%2Fparser%2Fok%2F0024_const_item.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3474e3b3b1b1037613bb3c7c6af33b57893fb332/crates%2Fsyntax%2Ftest_data%2Fparser%2Fok%2F0024_const_item.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Fok%2F0024_const_item.rs?ref=3474e3b3b1b1037613bb3c7c6af33b57893fb332", "patch": "@@ -1,2 +0,0 @@\n-const _: u32 = 0;\n-const FOO: u32 = 92;"}]}