{"sha": "232783c9148045e811034985ff7ccbb1520a7a24", "node_id": "MDY6Q29tbWl0NzI0NzEyOjIzMjc4M2M5MTQ4MDQ1ZTgxMTAzNDk4NWZmN2NjYmIxNTIwYTdhMjQ=", "commit": {"author": {"name": "Jeffrey Seyfried", "email": "jeffrey.seyfried@gmail.com", "date": "2016-06-28T23:03:56Z"}, "committer": {"name": "Jeffrey Seyfried", "email": "jeffrey.seyfried@gmail.com", "date": "2016-06-28T23:03:56Z"}, "message": "Fix infinite loop on recursive module exports in an extern crate", "tree": {"sha": "4a169e8ada21d7259d0f82c4d40966ff76a2edbc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4a169e8ada21d7259d0f82c4d40966ff76a2edbc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/232783c9148045e811034985ff7ccbb1520a7a24", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/232783c9148045e811034985ff7ccbb1520a7a24", "html_url": "https://github.com/rust-lang/rust/commit/232783c9148045e811034985ff7ccbb1520a7a24", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/232783c9148045e811034985ff7ccbb1520a7a24/comments", "author": {"login": "jseyfried", "id": 8652869, "node_id": "MDQ6VXNlcjg2NTI4Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/8652869?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jseyfried", "html_url": "https://github.com/jseyfried", "followers_url": "https://api.github.com/users/jseyfried/followers", "following_url": "https://api.github.com/users/jseyfried/following{/other_user}", "gists_url": "https://api.github.com/users/jseyfried/gists{/gist_id}", "starred_url": "https://api.github.com/users/jseyfried/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jseyfried/subscriptions", "organizations_url": "https://api.github.com/users/jseyfried/orgs", "repos_url": "https://api.github.com/users/jseyfried/repos", "events_url": "https://api.github.com/users/jseyfried/events{/privacy}", "received_events_url": "https://api.github.com/users/jseyfried/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jseyfried", "id": 8652869, "node_id": "MDQ6VXNlcjg2NTI4Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/8652869?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jseyfried", "html_url": "https://github.com/jseyfried", "followers_url": "https://api.github.com/users/jseyfried/followers", "following_url": "https://api.github.com/users/jseyfried/following{/other_user}", "gists_url": "https://api.github.com/users/jseyfried/gists{/gist_id}", "starred_url": "https://api.github.com/users/jseyfried/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jseyfried/subscriptions", "organizations_url": "https://api.github.com/users/jseyfried/orgs", "repos_url": "https://api.github.com/users/jseyfried/repos", "events_url": "https://api.github.com/users/jseyfried/events{/privacy}", "received_events_url": "https://api.github.com/users/jseyfried/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ea0dc9297283daff6486807f43e190b4eb561412", "url": "https://api.github.com/repos/rust-lang/rust/commits/ea0dc9297283daff6486807f43e190b4eb561412", "html_url": "https://github.com/rust-lang/rust/commit/ea0dc9297283daff6486807f43e190b4eb561412"}], "stats": {"total": 4, "additions": 3, "deletions": 1}, "files": [{"sha": "f983646479b9401ee1740652e7b7f77be3e5502b", "filename": "src/librustc_resolve/lib.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/232783c9148045e811034985ff7ccbb1520a7a24/src%2Flibrustc_resolve%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/232783c9148045e811034985ff7ccbb1520a7a24/src%2Flibrustc_resolve%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Flib.rs?ref=232783c9148045e811034985ff7ccbb1520a7a24", "patch": "@@ -3194,7 +3194,9 @@ impl<'a> Resolver<'a> {\n                     if !in_module_is_extern || name_binding.vis == ty::Visibility::Public {\n                         // add the module to the lookup\n                         let is_extern = in_module_is_extern || name_binding.is_extern_crate();\n-                        worklist.push((module, path_segments, is_extern));\n+                        if !worklist.iter().any(|&(m, _, _)| m.def == module.def) {\n+                            worklist.push((module, path_segments, is_extern));\n+                        }\n                     }\n                 }\n             })"}]}