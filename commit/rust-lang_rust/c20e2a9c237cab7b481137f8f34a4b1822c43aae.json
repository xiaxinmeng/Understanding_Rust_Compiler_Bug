{"sha": "c20e2a9c237cab7b481137f8f34a4b1822c43aae", "node_id": "C_kwDOAAsO6NoAKGMyMGUyYTljMjM3Y2FiN2I0ODExMzdmOGYzNGE0YjE4MjJjNDNhYWU", "commit": {"author": {"name": "Jacob Hoffman-Andrews", "email": "github@hoffman-andrews.com", "date": "2022-01-31T13:53:43Z"}, "committer": {"name": "Jacob Hoffman-Andrews", "email": "github@hoffman-andrews.com", "date": "2022-02-07T20:26:55Z"}, "message": "Fix hover effects in sidebar\n\nThe dark and ayu themes have a menu-like highlight on sidebar items. The\nlight theme used to, but it was accidentally lost in the sidebar\nunification. The change brings back the hover effect in the light theme.\n\nIt also makes the hover effect apply consistently to all links in the\nsidebar, including headings.\n\nIt also simplifies the \"In _path_\" heading so it's one big link. The\nbreadcrumbs are still readily available at the top of the page.", "tree": {"sha": "c94dfd6b283bdfbb201e12487dfdfcb4c44c6fd2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c94dfd6b283bdfbb201e12487dfdfcb4c44c6fd2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c20e2a9c237cab7b481137f8f34a4b1822c43aae", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c20e2a9c237cab7b481137f8f34a4b1822c43aae", "html_url": "https://github.com/rust-lang/rust/commit/c20e2a9c237cab7b481137f8f34a4b1822c43aae", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c20e2a9c237cab7b481137f8f34a4b1822c43aae/comments", "author": {"login": "jsha", "id": 220205, "node_id": "MDQ6VXNlcjIyMDIwNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/220205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsha", "html_url": "https://github.com/jsha", "followers_url": "https://api.github.com/users/jsha/followers", "following_url": "https://api.github.com/users/jsha/following{/other_user}", "gists_url": "https://api.github.com/users/jsha/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsha/subscriptions", "organizations_url": "https://api.github.com/users/jsha/orgs", "repos_url": "https://api.github.com/users/jsha/repos", "events_url": "https://api.github.com/users/jsha/events{/privacy}", "received_events_url": "https://api.github.com/users/jsha/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jsha", "id": 220205, "node_id": "MDQ6VXNlcjIyMDIwNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/220205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsha", "html_url": "https://github.com/jsha", "followers_url": "https://api.github.com/users/jsha/followers", "following_url": "https://api.github.com/users/jsha/following{/other_user}", "gists_url": "https://api.github.com/users/jsha/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsha/subscriptions", "organizations_url": "https://api.github.com/users/jsha/orgs", "repos_url": "https://api.github.com/users/jsha/repos", "events_url": "https://api.github.com/users/jsha/events{/privacy}", "received_events_url": "https://api.github.com/users/jsha/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f52c31840df7ec9c9350baff51a8964b20b5e1ba", "url": "https://api.github.com/repos/rust-lang/rust/commits/f52c31840df7ec9c9350baff51a8964b20b5e1ba", "html_url": "https://github.com/rust-lang/rust/commit/f52c31840df7ec9c9350baff51a8964b20b5e1ba"}], "stats": {"total": 61, "additions": 23, "deletions": 38}, "files": [{"sha": "6d94c70eadee6455d27aa344e8d37439326c8f5a", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 7, "deletions": 12, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/c20e2a9c237cab7b481137f8f34a4b1822c43aae/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/c20e2a9c237cab7b481137f8f34a4b1822c43aae/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=c20e2a9c237cab7b481137f8f34a4b1822c43aae", "patch": "@@ -463,9 +463,6 @@ nav.sub {\n .location a:first-of-type {\n \tfont-weight: 500;\n }\n-.location a:hover {\n-\ttext-decoration: underline;\n-}\n \n .block {\n \tpadding: 0;\n@@ -476,10 +473,11 @@ nav.sub {\n \tlist-style: none;\n }\n \n-.block a {\n+.block a,\n+h2.location a {\n \tdisplay: block;\n-\tpadding: 0.3em;\n-\tmargin-left: -0.3em;\n+\tpadding: 0.3rem;\n+\tmargin-left: -0.3rem;\n \n \ttext-overflow: ellipsis;\n \toverflow: hidden;\n@@ -494,8 +492,8 @@ nav.sub {\n \tfont-weight: 500;\n \tpadding: 0;\n \tmargin: 0;\n-\tmargin-top: 1rem;\n-\tmargin-bottom: 1rem;\n+\tmargin-top: 0.7rem;\n+\tmargin-bottom: 0.7rem;\n }\n \n .sidebar h3 {\n@@ -1812,10 +1810,7 @@ details.rustdoc-toggle[open] > summary.hideme::after {\n \n \t.mobile-topbar .location {\n \t\tborder: none;\n-\t\tmargin: 0;\n-\t\tmargin-left: auto;\n-\t\tpadding: 0.3em;\n-\t\tpadding-right: 0.6em;\n+\t\tmargin: auto 0.5em auto auto;\n \t\ttext-overflow: ellipsis;\n \t\toverflow: hidden;\n \t\twhite-space: nowrap;"}, {"sha": "e402b3583f3996db04ceac724326a98bc2f2a20d", "filename": "src/librustdoc/html/static/css/themes/ayu.css", "status": "modified", "additions": 6, "deletions": 10, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/c20e2a9c237cab7b481137f8f34a4b1822c43aae/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "raw_url": "https://github.com/rust-lang/rust/raw/c20e2a9c237cab7b481137f8f34a4b1822c43aae/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css?ref=c20e2a9c237cab7b481137f8f34a4b1822c43aae", "patch": "@@ -91,7 +91,8 @@ pre, .rustdoc.source .example-wrap {\n \tbackground-color: #5c6773;\n }\n \n-.sidebar .current {\n+.sidebar .current,\n+.sidebar a:hover {\n \tbackground-color: transparent;\n \tcolor: #ffb44c;\n }\n@@ -104,15 +105,6 @@ pre, .rustdoc.source .example-wrap {\n \tcolor: #ff7733;\n }\n \n-.sidebar-elems .location a {\n-\tcolor: #fff;\n-}\n-\n-.block a:hover {\n-\tbackground: transparent;\n-\tcolor: #ffb44c;\n-}\n-\n .line-numbers span { color: #5c6773; }\n .line-numbers .line-highlighted {\n \tcolor: #708090;\n@@ -220,6 +212,10 @@ pre.rust a,\n .in-band a {\n \tcolor: #c5c5c5;\n }\n+.sidebar h2 a,\n+.sidebar h3 a {\n+\tcolor: white;\n+}\n .search-results a {\n \tcolor: #0096cf;\n }"}, {"sha": "0a56055b8cbf67367ff32262c74aefe88b8f29ea", "filename": "src/librustdoc/html/static/css/themes/dark.css", "status": "modified", "additions": 3, "deletions": 6, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/c20e2a9c237cab7b481137f8f34a4b1822c43aae/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "raw_url": "https://github.com/rust-lang/rust/raw/c20e2a9c237cab7b481137f8f34a4b1822c43aae/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css?ref=c20e2a9c237cab7b481137f8f34a4b1822c43aae", "patch": "@@ -61,18 +61,15 @@ pre, .rustdoc.source .example-wrap {\n \tbackground-color: rgba(32, 34, 37, .6);\n }\n \n-.sidebar .current {\n-\tbackground-color: #333;\n+.sidebar .current,\n+.sidebar a:hover {\n+\tbackground: #444;\n }\n \n .source .sidebar {\n \tbackground-color: #565656;\n }\n \n-.block a:hover {\n-\tbackground: #444;\n-}\n-\n .line-numbers span { color: #3B91E2; }\n .line-numbers .line-highlighted {\n \tbackground-color: #0a042f !important;"}, {"sha": "dc1715b2a78f33116cc183b8fef0b3683d224dd8", "filename": "src/librustdoc/html/static/css/themes/light.css", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/c20e2a9c237cab7b481137f8f34a4b1822c43aae/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "raw_url": "https://github.com/rust-lang/rust/raw/c20e2a9c237cab7b481137f8f34a4b1822c43aae/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css?ref=c20e2a9c237cab7b481137f8f34a4b1822c43aae", "patch": "@@ -63,18 +63,15 @@ pre, .rustdoc.source .example-wrap {\n \tbackground-color: rgba(36, 37, 39, 0.6);\n }\n \n-.sidebar .current {\n+.sidebar .current,\n+.sidebar a:hover {\n \tbackground-color: #fff;\n }\n \n .source .sidebar {\n \tbackground-color: #f1f1f1;\n }\n \n-.block a:hover {\n-\tbackground: #F5F5F5;\n-}\n-\n .line-numbers span { color: #c67e2d; }\n .line-numbers .line-highlighted {\n \tbackground-color: #FDFFD3 !important;"}, {"sha": "2e44dd32d45b4164791938cbad7c0db3f1ecc9a6", "filename": "src/test/rustdoc-gui/mobile.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c20e2a9c237cab7b481137f8f34a4b1822c43aae/src%2Ftest%2Frustdoc-gui%2Fmobile.goml", "raw_url": "https://github.com/rust-lang/rust/raw/c20e2a9c237cab7b481137f8f34a4b1822c43aae/src%2Ftest%2Frustdoc-gui%2Fmobile.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fmobile.goml?ref=c20e2a9c237cab7b481137f8f34a4b1822c43aae", "patch": "@@ -11,7 +11,7 @@ assert-css: (\".main-heading\", {\n   \"flex-direction\": \"column\"\n })\n \n-assert-property: (\".mobile-topbar h2.location\", {\"offsetHeight\": 45})\n+assert-property: (\".mobile-topbar h2.location\", {\"offsetHeight\": 48})\n \n // Note: We can't use assert-text here because the 'Since' is set by CSS and\n // is therefore not part of the DOM."}, {"sha": "9581aa74b0f643eafeaa9c3c3f9bcf2bdf2717e2", "filename": "src/test/rustdoc-gui/sidebar-mobile.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c20e2a9c237cab7b481137f8f34a4b1822c43aae/src%2Ftest%2Frustdoc-gui%2Fsidebar-mobile.goml", "raw_url": "https://github.com/rust-lang/rust/raw/c20e2a9c237cab7b481137f8f34a4b1822c43aae/src%2Ftest%2Frustdoc-gui%2Fsidebar-mobile.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsidebar-mobile.goml?ref=c20e2a9c237cab7b481137f8f34a4b1822c43aae", "patch": "@@ -39,4 +39,4 @@ assert-position: (\"#method\\.must_use\", {\"y\": 45})\n // Check that the bottom-most item on the sidebar menu can be scrolled fully into view.\n click: \".sidebar-menu-toggle\"\n scroll-to: \".block.keyword li:nth-child(1)\"\n-assert-position: (\".block.keyword li:nth-child(1)\", {\"y\": 542.234375})\n+compare-elements-position-near: (\".block.keyword li:nth-child(1)\", \".mobile-topbar\", {\"y\": 543})"}, {"sha": "877cc61b66f24dd65c502d3daf254b60e0321459", "filename": "src/test/rustdoc-gui/sidebar.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c20e2a9c237cab7b481137f8f34a4b1822c43aae/src%2Ftest%2Frustdoc-gui%2Fsidebar.goml", "raw_url": "https://github.com/rust-lang/rust/raw/c20e2a9c237cab7b481137f8f34a4b1822c43aae/src%2Ftest%2Frustdoc-gui%2Fsidebar.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsidebar.goml?ref=c20e2a9c237cab7b481137f8f34a4b1822c43aae", "patch": "@@ -77,7 +77,7 @@ assert-text: (\"#functions + .item-table .item-left > a\", \"foo\")\n \n // Links to trait implementations in the sidebar should not wrap even if they are long.\n goto: file://|DOC_PATH|/lib2/struct.HasALongTraitWithParams.html\n-assert-property: (\".sidebar-links a\", {\"offsetHeight\": 29})\n+assert-property: (\".sidebar-links a\", {\"offsetHeight\": 30})\n \n // Test that clicking on of the \"In <module>\" headings in the sidebar links to the\n // appropriate anchor in index.html."}, {"sha": "d4142511e4373e8a12c252f6cc8bb4d546470851", "filename": "src/test/rustdoc-gui/type-declation-overflow.goml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c20e2a9c237cab7b481137f8f34a4b1822c43aae/src%2Ftest%2Frustdoc-gui%2Ftype-declation-overflow.goml", "raw_url": "https://github.com/rust-lang/rust/raw/c20e2a9c237cab7b481137f8f34a4b1822c43aae/src%2Ftest%2Frustdoc-gui%2Ftype-declation-overflow.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Ftype-declation-overflow.goml?ref=c20e2a9c237cab7b481137f8f34a4b1822c43aae", "patch": "@@ -32,6 +32,6 @@ assert-property: (\".item-decl pre\", {\"scrollWidth\": \"950\"})\n size: (600, 600)\n goto: file://|DOC_PATH|/lib2/too_long/struct.SuperIncrediblyLongLongLongLongLongLongLongGigaGigaGigaMegaLongLongLongStructName.html\n // It shouldn't have an overflow in the topbar either.\n-assert-property: (\".mobile-topbar .location\", {\"scrollWidth\": \"986\"})\n-assert-property: (\".mobile-topbar .location\", {\"clientWidth\": \"504\"})\n+assert-property: (\".mobile-topbar .location\", {\"scrollWidth\": \"493\"})\n+assert-property: (\".mobile-topbar .location\", {\"clientWidth\": \"493\"})\n assert-css: (\".mobile-topbar .location\", {\"overflow-x\": \"hidden\"})"}]}