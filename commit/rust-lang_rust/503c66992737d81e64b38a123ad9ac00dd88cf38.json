{"sha": "503c66992737d81e64b38a123ad9ac00dd88cf38", "node_id": "C_kwDOAAsO6NoAKDUwM2M2Njk5MjczN2Q4MWU2NGIzOGExMjNhZDlhYzAwZGQ4OGNmMzg", "commit": {"author": {"name": "ClementTsang", "email": "cjhtsang@uwaterloo.ca", "date": "2022-07-06T01:01:53Z"}, "committer": {"name": "ClementTsang", "email": "cjhtsang@uwaterloo.ca", "date": "2022-07-06T01:21:12Z"}, "message": "fix typo in note about multiple inaccessible type aliases\n\nMainly intended as a small typo fix (\"aliass\" -> \"aliases\") for\nthe case where a type cannot be found in scope, and there are\nmultiple inaccessible type aliases that match the missing type.\n\nIn general this change would use the correct plural form in\nthis scenario for words that end with 's'.", "tree": {"sha": "7afd43d8c93512a2056a790f56bb5b841d57d97e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7afd43d8c93512a2056a790f56bb5b841d57d97e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/503c66992737d81e64b38a123ad9ac00dd88cf38", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/503c66992737d81e64b38a123ad9ac00dd88cf38", "html_url": "https://github.com/rust-lang/rust/commit/503c66992737d81e64b38a123ad9ac00dd88cf38", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/503c66992737d81e64b38a123ad9ac00dd88cf38/comments", "author": {"login": "ClementTsang", "id": 34804052, "node_id": "MDQ6VXNlcjM0ODA0MDUy", "avatar_url": "https://avatars.githubusercontent.com/u/34804052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ClementTsang", "html_url": "https://github.com/ClementTsang", "followers_url": "https://api.github.com/users/ClementTsang/followers", "following_url": "https://api.github.com/users/ClementTsang/following{/other_user}", "gists_url": "https://api.github.com/users/ClementTsang/gists{/gist_id}", "starred_url": "https://api.github.com/users/ClementTsang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ClementTsang/subscriptions", "organizations_url": "https://api.github.com/users/ClementTsang/orgs", "repos_url": "https://api.github.com/users/ClementTsang/repos", "events_url": "https://api.github.com/users/ClementTsang/events{/privacy}", "received_events_url": "https://api.github.com/users/ClementTsang/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ClementTsang", "id": 34804052, "node_id": "MDQ6VXNlcjM0ODA0MDUy", "avatar_url": "https://avatars.githubusercontent.com/u/34804052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ClementTsang", "html_url": "https://github.com/ClementTsang", "followers_url": "https://api.github.com/users/ClementTsang/followers", "following_url": "https://api.github.com/users/ClementTsang/following{/other_user}", "gists_url": "https://api.github.com/users/ClementTsang/gists{/gist_id}", "starred_url": "https://api.github.com/users/ClementTsang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ClementTsang/subscriptions", "organizations_url": "https://api.github.com/users/ClementTsang/orgs", "repos_url": "https://api.github.com/users/ClementTsang/repos", "events_url": "https://api.github.com/users/ClementTsang/events{/privacy}", "received_events_url": "https://api.github.com/users/ClementTsang/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7b46aa594c4bdc507fbd904b6777ca30c37a9209", "url": "https://api.github.com/repos/rust-lang/rust/commits/7b46aa594c4bdc507fbd904b6777ca30c37a9209", "html_url": "https://github.com/rust-lang/rust/commit/7b46aa594c4bdc507fbd904b6777ca30c37a9209"}], "stats": {"total": 48, "additions": 47, "deletions": 1}, "files": [{"sha": "0f58206eee9f37de748666b6c62e5d41f65142f6", "filename": "compiler/rustc_resolve/src/diagnostics.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/503c66992737d81e64b38a123ad9ac00dd88cf38/compiler%2Frustc_resolve%2Fsrc%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/503c66992737d81e64b38a123ad9ac00dd88cf38/compiler%2Frustc_resolve%2Fsrc%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_resolve%2Fsrc%2Fdiagnostics.rs?ref=503c66992737d81e64b38a123ad9ac00dd88cf38", "patch": "@@ -2589,8 +2589,10 @@ fn show_candidates(\n             } else {\n                 \"item\".to_string()\n             };\n+            let plural_descr =\n+                if descr.ends_with(\"s\") { format!(\"{}es\", descr) } else { format!(\"{}s\", descr) };\n \n-            let mut msg = format!(\"{}these {}s exist but are inaccessible\", prefix, descr);\n+            let mut msg = format!(\"{}these {} exist but are inaccessible\", prefix, plural_descr);\n             let mut has_colon = false;\n \n             let mut spans = Vec::new();"}, {"sha": "c3d4214e282d705453d926405b1d3837e9095995", "filename": "src/test/ui/imports/inaccessible_type_aliases.rs", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/503c66992737d81e64b38a123ad9ac00dd88cf38/src%2Ftest%2Fui%2Fimports%2Finaccessible_type_aliases.rs", "raw_url": "https://github.com/rust-lang/rust/raw/503c66992737d81e64b38a123ad9ac00dd88cf38/src%2Ftest%2Fui%2Fimports%2Finaccessible_type_aliases.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fimports%2Finaccessible_type_aliases.rs?ref=503c66992737d81e64b38a123ad9ac00dd88cf38", "patch": "@@ -0,0 +1,14 @@\n+mod a {\n+    type Foo = u64;\n+    type Bar = u64;\n+}\n+\n+mod b {\n+    type Foo = u64;\n+}\n+\n+fn main() {\n+    let x: Foo = 100; //~ ERROR: cannot find type `Foo` in this scope\n+    let y: Bar = 100; //~ ERROR: cannot find type `Bar` in this scope\n+    println!(\"x: {}, y: {}\", x, y);\n+}"}, {"sha": "ef224246061d9b071be084946204df28688745e7", "filename": "src/test/ui/imports/inaccessible_type_aliases.stderr", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/503c66992737d81e64b38a123ad9ac00dd88cf38/src%2Ftest%2Fui%2Fimports%2Finaccessible_type_aliases.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/503c66992737d81e64b38a123ad9ac00dd88cf38/src%2Ftest%2Fui%2Fimports%2Finaccessible_type_aliases.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fimports%2Finaccessible_type_aliases.stderr?ref=503c66992737d81e64b38a123ad9ac00dd88cf38", "patch": "@@ -0,0 +1,30 @@\n+error[E0412]: cannot find type `Foo` in this scope\n+  --> $DIR/inaccessible_type_aliases.rs:11:12\n+   |\n+LL |     let x: Foo = 100;\n+   |            ^^^ not found in this scope\n+   |\n+note: these type aliases exist but are inaccessible\n+  --> $DIR/inaccessible_type_aliases.rs:2:5\n+   |\n+LL |     type Foo = u64;\n+   |     ^^^^^^^^^^^^^^^ `a::Foo`: not accessible\n+...\n+LL |     type Foo = u64;\n+   |     ^^^^^^^^^^^^^^^ `b::Foo`: not accessible\n+\n+error[E0412]: cannot find type `Bar` in this scope\n+  --> $DIR/inaccessible_type_aliases.rs:12:12\n+   |\n+LL |     let y: Bar = 100;\n+   |            ^^^ not found in this scope\n+   |\n+note: type alias `a::Bar` exists but is inaccessible\n+  --> $DIR/inaccessible_type_aliases.rs:3:5\n+   |\n+LL |     type Bar = u64;\n+   |     ^^^^^^^^^^^^^^^ not accessible\n+\n+error: aborting due to 2 previous errors\n+\n+For more information about this error, try `rustc --explain E0412`."}]}