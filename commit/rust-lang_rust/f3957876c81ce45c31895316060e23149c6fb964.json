{"sha": "f3957876c81ce45c31895316060e23149c6fb964", "node_id": "MDY6Q29tbWl0NzI0NzEyOmYzOTU3ODc2YzgxY2U0NWMzMTg5NTMxNjA2MGUyMzE0OWM2ZmI5NjQ=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-08-08T15:08:30Z"}, "committer": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-08-08T15:08:30Z"}, "message": "Add async version of self_lifetime.rs test.", "tree": {"sha": "39e8efb727943b78a4f70c515e0e96ceb8124f25", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/39e8efb727943b78a4f70c515e0e96ceb8124f25"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f3957876c81ce45c31895316060e23149c6fb964", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f3957876c81ce45c31895316060e23149c6fb964", "html_url": "https://github.com/rust-lang/rust/commit/f3957876c81ce45c31895316060e23149c6fb964", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f3957876c81ce45c31895316060e23149c6fb964/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d9294a284d6f10170effe2f29c2cd7ae94992d36", "url": "https://api.github.com/repos/rust-lang/rust/commits/d9294a284d6f10170effe2f29c2cd7ae94992d36", "html_url": "https://github.com/rust-lang/rust/commit/d9294a284d6f10170effe2f29c2cd7ae94992d36"}], "stats": {"total": 70, "additions": 70, "deletions": 0}, "files": [{"sha": "805d2433f87acccfa3a37f5ad007122bd5fff626", "filename": "src/test/ui/self/self_lifetime-async.nll.stderr", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/f3957876c81ce45c31895316060e23149c6fb964/src%2Ftest%2Fui%2Fself%2Fself_lifetime-async.nll.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f3957876c81ce45c31895316060e23149c6fb964/src%2Ftest%2Fui%2Fself%2Fself_lifetime-async.nll.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fself%2Fself_lifetime-async.nll.stderr?ref=f3957876c81ce45c31895316060e23149c6fb964", "patch": "@@ -0,0 +1,11 @@\n+error[E0106]: missing lifetime specifier\n+  --> $DIR/self_lifetime-async.rs:9:44\n+   |\n+LL |     async fn foo<'b>(self: &'b Foo<'a>) -> &() { self.0 }\n+   |                                            ^\n+   |\n+   = note: return-position elided lifetimes require exactly one input-position elided lifetime, found none.\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0106`."}, {"sha": "71eba01fe1a02bf76d18ef3298509bb7c96904b0", "filename": "src/test/ui/self/self_lifetime-async.rs", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/f3957876c81ce45c31895316060e23149c6fb964/src%2Ftest%2Fui%2Fself%2Fself_lifetime-async.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f3957876c81ce45c31895316060e23149c6fb964/src%2Ftest%2Fui%2Fself%2Fself_lifetime-async.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fself%2Fself_lifetime-async.rs?ref=f3957876c81ce45c31895316060e23149c6fb964", "patch": "@@ -0,0 +1,20 @@\n+// FIXME: Investigate why `self_lifetime.rs` is check-pass but this isn't.\n+\n+// edition:2018\n+\n+#![feature(async_await)]\n+\n+struct Foo<'a>(&'a ());\n+impl<'a> Foo<'a> {\n+    async fn foo<'b>(self: &'b Foo<'a>) -> &() { self.0 }\n+    //~^ ERROR missing lifetime specifier\n+    //~| ERROR cannot infer an appropriate lifetime\n+}\n+\n+type Alias = Foo<'static>;\n+impl Alias {\n+    async fn bar<'a>(self: &Alias, arg: &'a ()) -> &() { arg }\n+    //~^ ERROR lifetime mismatch\n+}\n+\n+fn main() {}"}, {"sha": "e3ec1abd44763863558c96ced88e83cd9599db45", "filename": "src/test/ui/self/self_lifetime-async.stderr", "status": "added", "additions": 39, "deletions": 0, "changes": 39, "blob_url": "https://github.com/rust-lang/rust/blob/f3957876c81ce45c31895316060e23149c6fb964/src%2Ftest%2Fui%2Fself%2Fself_lifetime-async.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f3957876c81ce45c31895316060e23149c6fb964/src%2Ftest%2Fui%2Fself%2Fself_lifetime-async.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fself%2Fself_lifetime-async.stderr?ref=f3957876c81ce45c31895316060e23149c6fb964", "patch": "@@ -0,0 +1,39 @@\n+error[E0106]: missing lifetime specifier\n+  --> $DIR/self_lifetime-async.rs:9:44\n+   |\n+LL |     async fn foo<'b>(self: &'b Foo<'a>) -> &() { self.0 }\n+   |                                            ^\n+   |\n+   = note: return-position elided lifetimes require exactly one input-position elided lifetime, found none.\n+\n+error[E0495]: cannot infer an appropriate lifetime due to conflicting requirements\n+  --> $DIR/self_lifetime-async.rs:9:22\n+   |\n+LL |     async fn foo<'b>(self: &'b Foo<'a>) -> &() { self.0 }\n+   |                      ^^^^\n+   |\n+note: first, the lifetime cannot outlive the lifetime 'a as defined on the impl at 8:6...\n+  --> $DIR/self_lifetime-async.rs:8:6\n+   |\n+LL | impl<'a> Foo<'a> {\n+   |      ^^\n+   = note: ...so that the expression is assignable:\n+           expected &Foo<'_>\n+              found &'b Foo<'a>\n+   = note: but, the lifetime must be valid for the static lifetime...\n+   = note: ...so that the types are compatible:\n+           expected &()\n+              found &'static ()\n+\n+error[E0623]: lifetime mismatch\n+  --> $DIR/self_lifetime-async.rs:16:52\n+   |\n+LL |     async fn bar<'a>(self: &Alias, arg: &'a ()) -> &() { arg }\n+   |                            ------                  ^^^\n+   |                            |                       |\n+   |                            |                       ...but data from `arg` is returned here\n+   |                            this parameter and the return type are declared with different lifetimes...\n+\n+error: aborting due to 3 previous errors\n+\n+For more information about this error, try `rustc --explain E0106`."}]}