{"sha": "5b43010083d029300230e2ea35e9cce6fd5daea3", "node_id": "MDY6Q29tbWl0NzI0NzEyOjViNDMwMTAwODNkMDI5MzAwMjMwZTJlYTM1ZTljY2U2ZmQ1ZGFlYTM=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-07-31T20:57:14Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-07-31T20:57:14Z"}, "message": "Namerefs in methods&fields", "tree": {"sha": "484bb1f6df0c2f941295e3057bbe9ebe0f02fa30", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/484bb1f6df0c2f941295e3057bbe9ebe0f02fa30"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5b43010083d029300230e2ea35e9cce6fd5daea3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5b43010083d029300230e2ea35e9cce6fd5daea3", "html_url": "https://github.com/rust-lang/rust/commit/5b43010083d029300230e2ea35e9cce6fd5daea3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5b43010083d029300230e2ea35e9cce6fd5daea3/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a26390b06b425230b2d269516ccdbc7dc259ede7", "url": "https://api.github.com/repos/rust-lang/rust/commits/a26390b06b425230b2d269516ccdbc7dc259ede7", "html_url": "https://github.com/rust-lang/rust/commit/a26390b06b425230b2d269516ccdbc7dc259ede7"}], "stats": {"total": 23, "additions": 16, "deletions": 7}, "files": [{"sha": "00a0ec9539d595e397232b1f54fcde2e555fb601", "filename": "src/grammar/expressions.rs", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/5b43010083d029300230e2ea35e9cce6fd5daea3/src%2Fgrammar%2Fexpressions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5b43010083d029300230e2ea35e9cce6fd5daea3/src%2Fgrammar%2Fexpressions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fgrammar%2Fexpressions.rs?ref=5b43010083d029300230e2ea35e9cce6fd5daea3", "patch": "@@ -39,6 +39,7 @@ pub(super) fn expr(p: &mut Parser) {\n             } else {\n                 field_expr(p, lhs)\n             },\n+            DOT if p.nth(1) == INT_NUMBER => field_expr(p, lhs),\n             _ => break,\n         }\n     }\n@@ -202,7 +203,7 @@ fn method_call_expr(p: &mut Parser, lhs: CompletedMarker) -> CompletedMarker {\n     assert!(p.at(DOT) && p.nth(1) == IDENT && p.nth(2) == L_PAREN);\n     let m = lhs.precede(p);\n     p.bump();\n-    p.bump();\n+    name_ref(p);\n     arg_list(p);\n     m.complete(p, METHOD_CALL_EXPR)\n }\n@@ -212,10 +213,14 @@ fn method_call_expr(p: &mut Parser, lhs: CompletedMarker) -> CompletedMarker {\n //     x.foo.bar;\n // }\n fn field_expr(p: &mut Parser, lhs: CompletedMarker) -> CompletedMarker {\n-    assert!(p.at(DOT) && p.nth(1) == IDENT);\n+    assert!(p.at(DOT) && (p.nth(1) == IDENT || p.nth(1) == INT_NUMBER));\n     let m = lhs.precede(p);\n     p.bump();\n-    p.bump();\n+    if p.at(IDENT) {\n+        name_ref(p)\n+    } else {\n+        p.bump()\n+    }\n     m.complete(p, FIELD_EXPR)\n }\n "}, {"sha": "5345e5fbd33de4b2d8dec5da304fd6d32718dff4", "filename": "tests/data/parser/inline/0051_method_call_expr.txt", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/5b43010083d029300230e2ea35e9cce6fd5daea3/tests%2Fdata%2Fparser%2Finline%2F0051_method_call_expr.txt", "raw_url": "https://github.com/rust-lang/rust/raw/5b43010083d029300230e2ea35e9cce6fd5daea3/tests%2Fdata%2Fparser%2Finline%2F0051_method_call_expr.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Finline%2F0051_method_call_expr.txt?ref=5b43010083d029300230e2ea35e9cce6fd5daea3", "patch": "@@ -19,7 +19,8 @@ FILE@[0; 44)\n                   WHITESPACE@[10; 15)\n                   IDENT@[15; 16) \"x\"\n           DOT@[16; 17)\n-          IDENT@[17; 20) \"foo\"\n+          NAME_REF@[17; 20)\n+            IDENT@[17; 20) \"foo\"\n           ARG_LIST@[20; 22)\n             L_PAREN@[20; 21)\n             R_PAREN@[21; 22)\n@@ -33,7 +34,8 @@ FILE@[0; 44)\n                 NAME_REF@[28; 29)\n                   IDENT@[28; 29) \"y\"\n           DOT@[29; 30)\n-          IDENT@[30; 33) \"bar\"\n+          NAME_REF@[30; 33)\n+            IDENT@[30; 33) \"bar\"\n           ARG_LIST@[33; 40)\n             L_PAREN@[33; 34)\n             LITERAL@[34; 35)"}, {"sha": "78ea3a1f476d3c13a08fc2d77c31878d27e4bd14", "filename": "tests/data/parser/inline/0052_field_expr.txt", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/5b43010083d029300230e2ea35e9cce6fd5daea3/tests%2Fdata%2Fparser%2Finline%2F0052_field_expr.txt", "raw_url": "https://github.com/rust-lang/rust/raw/5b43010083d029300230e2ea35e9cce6fd5daea3/tests%2Fdata%2Fparser%2Finline%2F0052_field_expr.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Finline%2F0052_field_expr.txt?ref=5b43010083d029300230e2ea35e9cce6fd5daea3", "patch": "@@ -20,9 +20,11 @@ FILE@[0; 28)\n                     WHITESPACE@[10; 15)\n                     IDENT@[15; 16) \"x\"\n             DOT@[16; 17)\n-            IDENT@[17; 20) \"foo\"\n+            NAME_REF@[17; 20)\n+              IDENT@[17; 20) \"foo\"\n           DOT@[20; 21)\n-          IDENT@[21; 24) \"bar\"\n+          NAME_REF@[21; 24)\n+            IDENT@[21; 24) \"bar\"\n         SEMI@[24; 25)\n         WHITESPACE@[25; 26)\n       R_CURLY@[26; 27)"}]}