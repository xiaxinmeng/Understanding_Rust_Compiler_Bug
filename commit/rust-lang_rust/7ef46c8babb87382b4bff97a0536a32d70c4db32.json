{"sha": "7ef46c8babb87382b4bff97a0536a32d70c4db32", "node_id": "C_kwDOAAsO6NoAKDdlZjQ2YzhiYWJiODczODJiNGJmZjk3YTA1MzZhMzJkNzBjNGRiMzI", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-01-27T15:02:44Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-01-27T15:02:44Z"}, "message": "Auto merge of #107055 - kylematsuda:eb-fn-sig, r=lcnr\n\nSwitch to `EarlyBinder` for `fn_sig` query\n\nPart of the work to finish #105779 (also see https://github.com/rust-lang/types-team/issues/78).\n\nSeveral queries `X` have a `bound_X` variant that wraps the output in [`EarlyBinder`](https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/subst/struct.EarlyBinder.html). This adds `EarlyBinder` to the return type of the `fn_sig` query and removes `bound_fn_sig`.\n\nr? `@lcnr`", "tree": {"sha": "c610606d6fece8079b6515940cd43603c0b5eca2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c610606d6fece8079b6515940cd43603c0b5eca2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7ef46c8babb87382b4bff97a0536a32d70c4db32", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7ef46c8babb87382b4bff97a0536a32d70c4db32", "html_url": "https://github.com/rust-lang/rust/commit/7ef46c8babb87382b4bff97a0536a32d70c4db32", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7ef46c8babb87382b4bff97a0536a32d70c4db32/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "02d5f7fa4d693824d097f5f99f6a56f835f11d47", "url": "https://api.github.com/repos/rust-lang/rust/commits/02d5f7fa4d693824d097f5f99f6a56f835f11d47", "html_url": "https://github.com/rust-lang/rust/commit/02d5f7fa4d693824d097f5f99f6a56f835f11d47"}, {"sha": "21575908c62f563fbc6d161c4fa44b2000a04e2f", "url": "https://api.github.com/repos/rust-lang/rust/commits/21575908c62f563fbc6d161c4fa44b2000a04e2f", "html_url": "https://github.com/rust-lang/rust/commit/21575908c62f563fbc6d161c4fa44b2000a04e2f"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "3e3b685713427ce13bb571354b00316c4d02943c", "filename": "src/main_shim.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7ef46c8babb87382b4bff97a0536a32d70c4db32/src%2Fmain_shim.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7ef46c8babb87382b4bff97a0536a32d70c4db32/src%2Fmain_shim.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fmain_shim.rs?ref=7ef46c8babb87382b4bff97a0536a32d70c4db32", "patch": "@@ -46,7 +46,7 @@ pub(crate) fn maybe_create_entry_wrapper(\n         is_main_fn: bool,\n         sigpipe: u8,\n     ) {\n-        let main_ret_ty = tcx.fn_sig(rust_main_def_id).output();\n+        let main_ret_ty = tcx.fn_sig(rust_main_def_id).no_bound_vars().unwrap().output();\n         // Given that `main()` has no arguments,\n         // then its return type cannot have\n         // late-bound regions, since late-bound"}]}