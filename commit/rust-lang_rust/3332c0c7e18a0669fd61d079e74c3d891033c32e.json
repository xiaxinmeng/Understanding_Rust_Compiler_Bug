{"sha": "3332c0c7e18a0669fd61d079e74c3d891033c32e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjMzMzJjMGM3ZTE4YTA2NjlmZDYxZDA3OWU3NGMzZDg5MTAzM2MzMmU=", "commit": {"author": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2018-06-28T22:07:16Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2018-06-28T22:07:16Z"}, "message": "Rollup merge of #51875 - badboy:emscripten-no-wasm, r=nikomatsakis\n\nExplicitely disable WASM code generation for Emscripten\n\nEmscripten changed the default behavior recently:\nhttps://github.com/kripken/emscripten/blob/bd050e64bb0d9952df1344b8ea9356252328ad83/ChangeLog.markdown#v1381-05172018\n\nIt now defaults to WebAssembly and requires an explicit flag to generate asm.js.\nWASM=0 is also valid for older emcc and thus doesn't break it.", "tree": {"sha": "8f515fb881d43a4874d3010c91b92696faafcd1f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8f515fb881d43a4874d3010c91b92696faafcd1f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3332c0c7e18a0669fd61d079e74c3d891033c32e", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJbNVwVCRBK7hj4Ov3rIwAAdHIIAFw8+jKzCJbTPMsrmkcKlVv5\nrMAxVgLzS+/ViuNXVAmh+NW7gnmEBZiyfeO7BceCF+oW439PubPikEudabj/sDe3\n1XsbaPCHGbhgITKed5ZZnQPs8FIdnxqz6kXdIy6aC8vMKsdWu8CipVUSP2uV51sV\nKr9yT9OPMt4rWaU/oROTcM4RytYEpCs6k3RqFCSv/P7Ck4B4qzxCTwaqibB5XASk\n98AR5G2fIY4tNsOjGPS8QBX/IQb1RsyiShtCWtmn734tVanwvAQuf7ep9flv4OZK\nvcLouQLNCsF9fmgEOvwbb3YtMjpikZFRWuf0b23ESI37Cu4xy5U8t6xUPaHx6fI=\n=GdTO\n-----END PGP SIGNATURE-----\n", "payload": "tree 8f515fb881d43a4874d3010c91b92696faafcd1f\nparent 7c0dd79e02add23188b2ed0101e8f9d7362077d9\nparent 8983ff522691249f1c38e36cb56c6b9a9e5348b1\nauthor Mark Rousskov <mark.simulacrum@gmail.com> 1530223636 -0600\ncommitter GitHub <noreply@github.com> 1530223636 -0600\n\nRollup merge of #51875 - badboy:emscripten-no-wasm, r=nikomatsakis\n\nExplicitely disable WASM code generation for Emscripten\n\nEmscripten changed the default behavior recently:\nhttps://github.com/kripken/emscripten/blob/bd050e64bb0d9952df1344b8ea9356252328ad83/ChangeLog.markdown#v1381-05172018\n\nIt now defaults to WebAssembly and requires an explicit flag to generate asm.js.\nWASM=0 is also valid for older emcc and thus doesn't break it.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3332c0c7e18a0669fd61d079e74c3d891033c32e", "html_url": "https://github.com/rust-lang/rust/commit/3332c0c7e18a0669fd61d079e74c3d891033c32e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3332c0c7e18a0669fd61d079e74c3d891033c32e/comments", "author": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7c0dd79e02add23188b2ed0101e8f9d7362077d9", "url": "https://api.github.com/repos/rust-lang/rust/commits/7c0dd79e02add23188b2ed0101e8f9d7362077d9", "html_url": "https://github.com/rust-lang/rust/commit/7c0dd79e02add23188b2ed0101e8f9d7362077d9"}, {"sha": "8983ff522691249f1c38e36cb56c6b9a9e5348b1", "url": "https://api.github.com/repos/rust-lang/rust/commits/8983ff522691249f1c38e36cb56c6b9a9e5348b1", "html_url": "https://github.com/rust-lang/rust/commit/8983ff522691249f1c38e36cb56c6b9a9e5348b1"}], "stats": {"total": 4, "additions": 3, "deletions": 1}, "files": [{"sha": "4e716fb207fab080b4f8287f3cfe47ceea865e92", "filename": "src/librustc_target/spec/asmjs_unknown_emscripten.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3332c0c7e18a0669fd61d079e74c3d891033c32e/src%2Flibrustc_target%2Fspec%2Fasmjs_unknown_emscripten.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3332c0c7e18a0669fd61d079e74c3d891033c32e/src%2Flibrustc_target%2Fspec%2Fasmjs_unknown_emscripten.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_target%2Fspec%2Fasmjs_unknown_emscripten.rs?ref=3332c0c7e18a0669fd61d079e74c3d891033c32e", "patch": "@@ -16,7 +16,9 @@ pub fn target() -> Result<Target, String> {\n                 vec![\"-s\".to_string(),\n                      \"ERROR_ON_UNDEFINED_SYMBOLS=1\".to_string(),\n                      \"-s\".to_string(),\n-                     \"ABORTING_MALLOC=0\".to_string()]);\n+                     \"ABORTING_MALLOC=0\".to_string(),\n+                     \"-s\".to_string(),\n+                     \"WASM=0\".to_string()]);\n \n     let opts = TargetOptions {\n         dynamic_linking: false,"}]}