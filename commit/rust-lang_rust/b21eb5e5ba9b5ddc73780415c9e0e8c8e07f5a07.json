{"sha": "b21eb5e5ba9b5ddc73780415c9e0e8c8e07f5a07", "node_id": "C_kwDOAAsO6NoAKGIyMWViNWU1YmE5YjVkZGM3Mzc4MDQxNWM5ZTBlOGM4ZTA3ZjVhMDc", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-10-21T22:14:01Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-10-21T22:14:01Z"}, "message": "Rollup merge of #103340 - RalfJung:winconsole, r=thomcc\n\nWinConsole::new is not actually fallible\n\nI just noticed this while reading the code for other reasons.\nr? ``@thomcc``", "tree": {"sha": "bad506259d56d8cb3e3090822bde15e078ab3392", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bad506259d56d8cb3e3090822bde15e078ab3392"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b21eb5e5ba9b5ddc73780415c9e0e8c8e07f5a07", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjUxmpCRBK7hj4Ov3rIwAAM2gIAKMrnXalf5SIGpqK6XpLFF9y\n3hU5V2x+LOI3qYm94N1KCylnrdQ3x4ooB0zVlN3kxqJOXhl9sEvJXjQh9tzdiuSz\nHvFjT9xQ6PghHzOEBBIXRdj8jgT8XLTRZcSIgGEBroZdqZ8owcdyU+Di5q+1zLSs\nYIUaw5AN3g5D7rnYY6TpEayxDjVWL96fKq1cR0/xU20C45eng9LNrZkjFjr6kGCa\n951pSx+b1Yyb+/cKyj1A/HU9cv/y54QzOxFxF6yS63EpmSqkhws5mnjXV9EcCQEl\noz8ww7Gynx1vvYeDsPeW/fA4eCj4MSjZK9YERguaTnHqEl3GascFBP7lCIWxbmY=\n=jPcP\n-----END PGP SIGNATURE-----\n", "payload": "tree bad506259d56d8cb3e3090822bde15e078ab3392\nparent 7ee0aeacaffb3dc259a9e93a752345cf6ce35a1e\nparent 3ff0a33a8343f8f9fe494d161b451d82889b6232\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1666390441 +0200\ncommitter GitHub <noreply@github.com> 1666390441 +0200\n\nRollup merge of #103340 - RalfJung:winconsole, r=thomcc\n\nWinConsole::new is not actually fallible\n\nI just noticed this while reading the code for other reasons.\nr? ``@thomcc``\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b21eb5e5ba9b5ddc73780415c9e0e8c8e07f5a07", "html_url": "https://github.com/rust-lang/rust/commit/b21eb5e5ba9b5ddc73780415c9e0e8c8e07f5a07", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b21eb5e5ba9b5ddc73780415c9e0e8c8e07f5a07/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7ee0aeacaffb3dc259a9e93a752345cf6ce35a1e", "url": "https://api.github.com/repos/rust-lang/rust/commits/7ee0aeacaffb3dc259a9e93a752345cf6ce35a1e", "html_url": "https://github.com/rust-lang/rust/commit/7ee0aeacaffb3dc259a9e93a752345cf6ce35a1e"}, {"sha": "3ff0a33a8343f8f9fe494d161b451d82889b6232", "url": "https://api.github.com/repos/rust-lang/rust/commits/3ff0a33a8343f8f9fe494d161b451d82889b6232", "html_url": "https://github.com/rust-lang/rust/commit/3ff0a33a8343f8f9fe494d161b451d82889b6232"}], "stats": {"total": 9, "additions": 4, "deletions": 5}, "files": [{"sha": "a14b0d4f5a96233b18b1e1fe55700dcd41866a86", "filename": "library/test/src/term.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b21eb5e5ba9b5ddc73780415c9e0e8c8e07f5a07/library%2Ftest%2Fsrc%2Fterm.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b21eb5e5ba9b5ddc73780415c9e0e8c8e07f5a07/library%2Ftest%2Fsrc%2Fterm.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Ftest%2Fsrc%2Fterm.rs?ref=b21eb5e5ba9b5ddc73780415c9e0e8c8e07f5a07", "patch": "@@ -39,7 +39,7 @@ pub(crate) fn stdout() -> Option<Box<StdoutTerminal>> {\n pub(crate) fn stdout() -> Option<Box<StdoutTerminal>> {\n     TerminfoTerminal::new(io::stdout())\n         .map(|t| Box::new(t) as Box<StdoutTerminal>)\n-        .or_else(|| WinConsole::new(io::stdout()).ok().map(|t| Box::new(t) as Box<StdoutTerminal>))\n+        .or_else(|| Some(Box::new(WinConsole::new(io::stdout())) as Box<StdoutTerminal>))\n }\n \n /// Terminal color definitions"}, {"sha": "55020141a827db9481a720c80df7e3a6ccd0c267", "filename": "library/test/src/term/win.rs", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/b21eb5e5ba9b5ddc73780415c9e0e8c8e07f5a07/library%2Ftest%2Fsrc%2Fterm%2Fwin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b21eb5e5ba9b5ddc73780415c9e0e8c8e07f5a07/library%2Ftest%2Fsrc%2Fterm%2Fwin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Ftest%2Fsrc%2Fterm%2Fwin.rs?ref=b21eb5e5ba9b5ddc73780415c9e0e8c8e07f5a07", "patch": "@@ -113,8 +113,7 @@ impl<T: Write + Send + 'static> WinConsole<T> {\n         }\n     }\n \n-    /// Returns `None` whenever the terminal cannot be created for some reason.\n-    pub(crate) fn new(out: T) -> io::Result<WinConsole<T>> {\n+    pub(crate) fn new(out: T) -> WinConsole<T> {\n         use std::mem::MaybeUninit;\n \n         let fg;\n@@ -132,13 +131,13 @@ impl<T: Write + Send + 'static> WinConsole<T> {\n                 bg = color::BLACK;\n             }\n         }\n-        Ok(WinConsole {\n+        WinConsole {\n             buf: out,\n             def_foreground: fg,\n             def_background: bg,\n             foreground: fg,\n             background: bg,\n-        })\n+        }\n     }\n }\n "}]}