{"sha": "875c4622fba068149a9c635684c644d84cb3e014", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg3NWM0NjIyZmJhMDY4MTQ5YTljNjM1Njg0YzY0NGQ4NGNiM2UwMTQ=", "commit": {"author": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2011-07-10T09:05:52Z"}, "committer": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2011-07-10T09:05:52Z"}, "message": "stdlib: Implement str::bytes_ivec() using pointers and casts", "tree": {"sha": "5350cfa56e18a871615e3fcda5c80d2b2dd00bad", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5350cfa56e18a871615e3fcda5c80d2b2dd00bad"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/875c4622fba068149a9c635684c644d84cb3e014", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/875c4622fba068149a9c635684c644d84cb3e014", "html_url": "https://github.com/rust-lang/rust/commit/875c4622fba068149a9c635684c644d84cb3e014", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/875c4622fba068149a9c635684c644d84cb3e014/comments", "author": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "91dcc1d054cdf86582bad6b6d343761041a1f5de", "url": "https://api.github.com/repos/rust-lang/rust/commits/91dcc1d054cdf86582bad6b6d343761041a1f5de", "html_url": "https://github.com/rust-lang/rust/commit/91dcc1d054cdf86582bad6b6d343761041a1f5de"}], "stats": {"total": 13, "additions": 13, "deletions": 0}, "files": [{"sha": "94ca9a75b89a55d71970d0caed9624729bfb8cde", "filename": "src/lib/ivec.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/875c4622fba068149a9c635684c644d84cb3e014/src%2Flib%2Fivec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/875c4622fba068149a9c635684c644d84cb3e014/src%2Flib%2Fivec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib%2Fivec.rs?ref=875c4622fba068149a9c635684c644d84cb3e014", "patch": "@@ -207,5 +207,11 @@ mod unsafe {\n     fn copy_from_buf[T](&mutable T[] v, *T ptr, uint count) {\n         ret rustrt::ivec_copy_from_buf_shared(v, ptr, count);\n     }\n+\n+    fn from_buf[T](*T ptr, uint bytes) -> T[] {\n+        auto v = ~[];\n+        copy_from_buf(v, ptr, bytes);\n+        ret v;\n+    }\n }\n "}, {"sha": "843860d1e6bd54b10e5c6a814babbe6a71c77dc5", "filename": "src/lib/str.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/875c4622fba068149a9c635684c644d84cb3e014/src%2Flib%2Fstr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/875c4622fba068149a9c635684c644d84cb3e014/src%2Flib%2Fstr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib%2Fstr.rs?ref=875c4622fba068149a9c635684c644d84cb3e014", "patch": "@@ -48,6 +48,7 @@ export connect;\n export connect_ivec;\n export to_upper;\n export safe_slice;\n+export bytes_ivec;\n \n native \"rust\" mod rustrt {\n     type sbuf;\n@@ -163,6 +164,12 @@ fn buf(str s) -> sbuf { ret rustrt::str_buf(s); }\n \n fn bytes(str s) -> vec[u8] { ret rustrt::str_vec(s); }\n \n+fn bytes_ivec(str s) -> u8[] {\n+    auto sbuffer = buf(s);\n+    auto ptr = unsafe::reinterpret_cast(sbuffer);\n+    ret ivec::unsafe::from_buf(ptr, byte_len(s));\n+}\n+\n fn from_bytes(vec[u8] v) -> str { ret rustrt::str_from_vec(v); }\n \n "}]}