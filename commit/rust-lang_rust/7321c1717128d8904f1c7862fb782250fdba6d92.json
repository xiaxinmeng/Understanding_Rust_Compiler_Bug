{"sha": "7321c1717128d8904f1c7862fb782250fdba6d92", "node_id": "MDY6Q29tbWl0NzI0NzEyOjczMjFjMTcxNzEyOGQ4OTA0ZjFjNzg2MmZiNzgyMjUwZmRiYTZkOTI=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-04-22T22:15:18Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-04-22T22:19:14Z"}, "message": "syntax: Eliminate token::POUND_LT, POUND_LBRACE\n\nUse lookahead in the parser", "tree": {"sha": "32a5e90aa40acf3bf93211468c5e21fd321810d9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/32a5e90aa40acf3bf93211468c5e21fd321810d9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7321c1717128d8904f1c7862fb782250fdba6d92", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7321c1717128d8904f1c7862fb782250fdba6d92", "html_url": "https://github.com/rust-lang/rust/commit/7321c1717128d8904f1c7862fb782250fdba6d92", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7321c1717128d8904f1c7862fb782250fdba6d92/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "92b21135831b5d8ee56f6590e0d2f43173873532", "url": "https://api.github.com/repos/rust-lang/rust/commits/92b21135831b5d8ee56f6590e0d2f43173873532", "html_url": "https://github.com/rust-lang/rust/commit/92b21135831b5d8ee56f6590e0d2f43173873532"}], "stats": {"total": 25, "additions": 9, "deletions": 16}, "files": [{"sha": "a7b109f2324fbd3fe94d7f3c44c1614085bc76a3", "filename": "src/librustsyntax/parse/lexer.rs", "status": "modified", "additions": 1, "deletions": 6, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/7321c1717128d8904f1c7862fb782250fdba6d92/src%2Flibrustsyntax%2Fparse%2Flexer.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7321c1717128d8904f1c7862fb782250fdba6d92/src%2Flibrustsyntax%2Fparse%2Flexer.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustsyntax%2Fparse%2Flexer.rs?ref=7321c1717128d8904f1c7862fb782250fdba6d92", "patch": "@@ -357,12 +357,7 @@ fn next_token_inner(rdr: reader) -> token::token {\n       '[' { rdr.bump(); ret token::LBRACKET; }\n       ']' { rdr.bump(); ret token::RBRACKET; }\n       '@' { rdr.bump(); ret token::AT; }\n-      '#' {\n-        rdr.bump();\n-        if rdr.curr == '<' { rdr.bump(); ret token::POUND_LT; }\n-        if rdr.curr == '{' { rdr.bump(); ret token::POUND_LBRACE; }\n-        ret token::POUND;\n-      }\n+      '#' { rdr.bump(); ret token::POUND; }\n       '~' { rdr.bump(); ret token::TILDE; }\n       ':' {\n         rdr.bump();"}, {"sha": "44d71fb3657b33e0b6775da444b73cf064a97c2a", "filename": "src/librustsyntax/parse/parser.rs", "status": "modified", "additions": 8, "deletions": 6, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/7321c1717128d8904f1c7862fb782250fdba6d92/src%2Flibrustsyntax%2Fparse%2Fparser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7321c1717128d8904f1c7862fb782250fdba6d92/src%2Flibrustsyntax%2Fparse%2Fparser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustsyntax%2Fparse%2Fparser.rs?ref=7321c1717128d8904f1c7862fb782250fdba6d92", "patch": "@@ -710,33 +710,35 @@ fn parse_bottom_expr(p: parser) -> pexpr {\n                              parse_expr, p);\n         hi = p.span.hi;\n         ex = ast::expr_vec(es, mutbl);\n-    } else if p.token == token::POUND_LT {\n+    } else if p.token == token::POUND && p.look_ahead(1u) == token::LT {\n+        p.bump();\n         p.bump();\n         let ty = parse_ty(p, false);\n         expect(p, token::GT);\n \n         /* hack: early return to take advantage of specialized function */\n         ret pexpr(mk_mac_expr(p, lo, p.span.hi,\n                               ast::mac_embed_type(ty)));\n-    } else if p.token == token::POUND_LBRACE {\n+    } else if p.token == token::POUND && p.look_ahead(1u) == token::LBRACE {\n+        p.bump();\n         p.bump();\n         let blk = ast::mac_embed_block(\n             parse_block_tail(p, lo, ast::default_blk));\n         ret pexpr(mk_mac_expr(p, lo, p.span.hi, blk));\n     } else if p.token == token::ELLIPSIS {\n         p.bump();\n         ret pexpr(mk_mac_expr(p, lo, p.span.hi, ast::mac_ellipsis));\n+    } else if p.token == token::POUND {\n+        let ex_ext = parse_syntax_ext(p);\n+        hi = ex_ext.span.hi;\n+        ex = ex_ext.node;\n     } else if eat_word(p, \"bind\") {\n         let e = parse_expr_res(p, RESTRICT_NO_CALL_EXPRS);\n         let es =\n             parse_seq(token::LPAREN, token::RPAREN, seq_sep(token::COMMA),\n                       parse_expr_or_hole, p);\n         hi = es.span.hi;\n         ex = ast::expr_bind(e, es.node);\n-    } else if p.token == token::POUND {\n-        let ex_ext = parse_syntax_ext(p);\n-        hi = ex_ext.span.hi;\n-        ex = ex_ext.node;\n     } else if eat_word(p, \"fail\") {\n         if can_begin_expr(p.token) {\n             let e = parse_expr(p);"}, {"sha": "0088b7c472929cfbcf55d91e242b30e1b35dda90", "filename": "src/librustsyntax/parse/token.rs", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7321c1717128d8904f1c7862fb782250fdba6d92/src%2Flibrustsyntax%2Fparse%2Ftoken.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7321c1717128d8904f1c7862fb782250fdba6d92/src%2Flibrustsyntax%2Fparse%2Ftoken.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustsyntax%2Fparse%2Ftoken.rs?ref=7321c1717128d8904f1c7862fb782250fdba6d92", "patch": "@@ -53,8 +53,6 @@ enum token {\n     LBRACE,\n     RBRACE,\n     POUND,\n-    POUND_LBRACE,\n-    POUND_LT,\n \n     DOLLAR_LPAREN,\n     DOLLAR_NUM(uint),\n@@ -124,8 +122,6 @@ fn to_str(in: interner<str>, t: token) -> str {\n       LBRACE { ret \"{\"; }\n       RBRACE { ret \"}\"; }\n       POUND { ret \"#\"; }\n-      POUND_LBRACE { ret \"#{\"; }\n-      POUND_LT { ret \"#<\"; }\n \n       DOLLAR_LPAREN { ret \"$(\"; }\n       DOLLAR_NUM(u) {"}]}