{"sha": "2d496f46bf1960d72122cccc3ed5c774cea931c2", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJkNDk2ZjQ2YmYxOTYwZDcyMTIyY2NjYzNlZDVjNzc0Y2VhOTMxYzI=", "commit": {"author": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2021-05-07T06:20:21Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-05-07T06:20:21Z"}, "message": "Rollup merge of #84779 - jyn514:cargotest-args, r=Mark-Simulacrum\n\nAdd support for --test-args to cargotest\n\nThis allows running a single test without having to wait for all tests\nto complete.\n\nCloses https://github.com/rust-lang/rust/issues/77260.", "tree": {"sha": "6c9d0f65b1497b321bb410de468e7858ee15dd5b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6c9d0f65b1497b321bb410de468e7858ee15dd5b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2d496f46bf1960d72122cccc3ed5c774cea931c2", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJglNwlCRBK7hj4Ov3rIwAAOqEIADPfNz3++F7GwPF2cugp5Dpp\n7tOGN0a7gj+kX8O2kB4ER6DpyWquDQqSea0YSA1v+bSob/06id+9w+oY/HjL+wco\ntV8QK2bXTq56/Ma3UlZi8AJOoOLDplxbp8UUbBA0oNoTIrbLdfBVxNAISMf571Mh\nr+NGMZR0IHDGMs4acMt49zYE4wimrE3UaAspMrj/4+RVtvt52H751cuMsv8suGts\nyNDtFDEKgrFKNx+Jzg178KYzz7FLHKZ+6+gmEsdCKuIjriAa8S978P3b+5Y0pci+\nbCAH/czHdsh5Y3bj/FF/jFB80ifd6U2MMULy5FgFmreh5C3iIrfDugGcXcMpsms=\n=utJE\n-----END PGP SIGNATURE-----\n", "payload": "tree 6c9d0f65b1497b321bb410de468e7858ee15dd5b\nparent 1773f14a24c49356b384e45ebb45643bc9bef2c4\nparent d95a6cf91189421cc3174d10aaa910c7376529b8\nauthor Yuki Okushi <jtitor@2k36.org> 1620368421 +0900\ncommitter GitHub <noreply@github.com> 1620368421 +0900\n\nRollup merge of #84779 - jyn514:cargotest-args, r=Mark-Simulacrum\n\nAdd support for --test-args to cargotest\n\nThis allows running a single test without having to wait for all tests\nto complete.\n\nCloses https://github.com/rust-lang/rust/issues/77260.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2d496f46bf1960d72122cccc3ed5c774cea931c2", "html_url": "https://github.com/rust-lang/rust/commit/2d496f46bf1960d72122cccc3ed5c774cea931c2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2d496f46bf1960d72122cccc3ed5c774cea931c2/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1773f14a24c49356b384e45ebb45643bc9bef2c4", "url": "https://api.github.com/repos/rust-lang/rust/commits/1773f14a24c49356b384e45ebb45643bc9bef2c4", "html_url": "https://github.com/rust-lang/rust/commit/1773f14a24c49356b384e45ebb45643bc9bef2c4"}, {"sha": "d95a6cf91189421cc3174d10aaa910c7376529b8", "url": "https://api.github.com/repos/rust-lang/rust/commits/d95a6cf91189421cc3174d10aaa910c7376529b8", "html_url": "https://github.com/rust-lang/rust/commit/d95a6cf91189421cc3174d10aaa910c7376529b8"}], "stats": {"total": 5, "additions": 4, "deletions": 1}, "files": [{"sha": "edb4bb9938bce77325b272ad2be9b6178f5494e4", "filename": "src/bootstrap/test.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/2d496f46bf1960d72122cccc3ed5c774cea931c2/src%2Fbootstrap%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2d496f46bf1960d72122cccc3ed5c774cea931c2/src%2Fbootstrap%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Ftest.rs?ref=2d496f46bf1960d72122cccc3ed5c774cea931c2", "patch": "@@ -183,6 +183,7 @@ impl Step for Cargotest {\n             builder,\n             cmd.arg(&cargo)\n                 .arg(&out_dir)\n+                .args(builder.config.cmd.test_args())\n                 .env(\"RUSTC\", builder.rustc(compiler))\n                 .env(\"RUSTDOC\", builder.rustdoc(compiler)),\n         );"}, {"sha": "54ff38e39dbe43af7c1427503481214f6dd72762", "filename": "src/tools/cargotest/main.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2d496f46bf1960d72122cccc3ed5c774cea931c2/src%2Ftools%2Fcargotest%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2d496f46bf1960d72122cccc3ed5c774cea931c2/src%2Ftools%2Fcargotest%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcargotest%2Fmain.rs?ref=2d496f46bf1960d72122cccc3ed5c774cea931c2", "patch": "@@ -85,7 +85,9 @@ fn main() {\n     let cargo = &Path::new(cargo);\n \n     for test in TEST_REPOS.iter().rev() {\n-        test_repo(cargo, out_dir, test);\n+        if args[3..].is_empty() || args[3..].iter().any(|s| s.contains(test.name)) {\n+            test_repo(cargo, out_dir, test);\n+        }\n     }\n }\n "}]}