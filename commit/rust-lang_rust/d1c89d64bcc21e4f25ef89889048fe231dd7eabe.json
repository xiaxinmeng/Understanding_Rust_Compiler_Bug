{"sha": "d1c89d64bcc21e4f25ef89889048fe231dd7eabe", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQxYzg5ZDY0YmNjMjFlNGYyNWVmODk4ODkwNDhmZTIzMWRkN2VhYmU=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-08-02T07:35:28Z"}, "committer": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-08-02T07:35:28Z"}, "message": "Test for printing attrs on formal params.", "tree": {"sha": "cf4f9c8ff45adf67f3aad340250d6b7ee984765c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cf4f9c8ff45adf67f3aad340250d6b7ee984765c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d1c89d64bcc21e4f25ef89889048fe231dd7eabe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d1c89d64bcc21e4f25ef89889048fe231dd7eabe", "html_url": "https://github.com/rust-lang/rust/commit/d1c89d64bcc21e4f25ef89889048fe231dd7eabe", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d1c89d64bcc21e4f25ef89889048fe231dd7eabe/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dd987275418cb23809c2521e31686013a59ea061", "url": "https://api.github.com/repos/rust-lang/rust/commits/dd987275418cb23809c2521e31686013a59ea061", "html_url": "https://github.com/rust-lang/rust/commit/dd987275418cb23809c2521e31686013a59ea061"}], "stats": {"total": 90, "additions": 90, "deletions": 0}, "files": [{"sha": "71815e3c08974f3c9b5d2f1205443aa4af91458c", "filename": "src/test/ui/rfc-2565-param-attrs/auxiliary/param-attrs.rs", "status": "added", "additions": 34, "deletions": 0, "changes": 34, "blob_url": "https://github.com/rust-lang/rust/blob/d1c89d64bcc21e4f25ef89889048fe231dd7eabe/src%2Ftest%2Fui%2Frfc-2565-param-attrs%2Fauxiliary%2Fparam-attrs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d1c89d64bcc21e4f25ef89889048fe231dd7eabe/src%2Ftest%2Fui%2Frfc-2565-param-attrs%2Fauxiliary%2Fparam-attrs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2565-param-attrs%2Fauxiliary%2Fparam-attrs.rs?ref=d1c89d64bcc21e4f25ef89889048fe231dd7eabe", "patch": "@@ -0,0 +1,34 @@\n+// force-host\n+// no-prefer-dynamic\n+\n+#![crate_type = \"proc-macro\"]\n+\n+extern crate proc_macro;\n+\n+use proc_macro::TokenStream;\n+\n+macro_rules! checker {\n+    ($attr_name:ident, $expected:literal) => {\n+        #[proc_macro_attribute]\n+        pub fn $attr_name(attr: TokenStream, input: TokenStream) -> TokenStream {\n+            assert!(attr.to_string().is_empty());\n+            assert_eq!(input.to_string(), $expected);\n+            TokenStream::new()\n+        }\n+    }\n+}\n+\n+checker!(attr_extern, r#\"extern \"C\" {\n+    fn ffi(#[a1] arg1: i32, #[a2] ...);\n+}\"#);\n+checker!(attr_extern_cvar, r#\"unsafe extern \"C\" fn cvar(arg1: i32, #[a1] mut args: ...) { }\"#);\n+checker!(attr_alias, \"type Alias = fn(#[a1] u8, #[a2] ...);\");\n+checker!(attr_free, \"fn free(#[a1] arg1: u8) { let lam = |#[a2] W(x), #[a3] y| (); }\");\n+checker!(attr_inherent_1, \"fn inherent1(#[a1] self, #[a2] arg1: u8) { }\");\n+checker!(attr_inherent_2, \"fn inherent2(#[a1] &self, #[a2] arg1: u8) { }\");\n+checker!(attr_inherent_3, \"fn inherent3<'a>(#[a1] &'a mut self, #[a2] arg1: u8) { }\");\n+checker!(attr_inherent_4, \"fn inherent4<'a>(#[a1] self: Box<Self>, #[a2] arg1: u8) { }\");\n+checker!(attr_trait_1, \"fn trait1(#[a1] self, #[a2] arg1: u8);\");\n+checker!(attr_trait_2, \"fn trait2(#[a1] &self, #[a2] arg1: u8);\");\n+checker!(attr_trait_3, \"fn trait3<'a>(#[a1] &'a mut self, #[a2] arg1: u8);\");\n+checker!(attr_trait_4, \"fn trait4<'a>(#[a1] self: Box<Self>, #[a2] arg1: u8, #[a3] Vec<u8>);\");"}, {"sha": "1a7e9481745066659b8e233fe7b612c586ba709e", "filename": "src/test/ui/rfc-2565-param-attrs/param-attrs-pretty.rs", "status": "added", "additions": 56, "deletions": 0, "changes": 56, "blob_url": "https://github.com/rust-lang/rust/blob/d1c89d64bcc21e4f25ef89889048fe231dd7eabe/src%2Ftest%2Fui%2Frfc-2565-param-attrs%2Fparam-attrs-pretty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d1c89d64bcc21e4f25ef89889048fe231dd7eabe/src%2Ftest%2Fui%2Frfc-2565-param-attrs%2Fparam-attrs-pretty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2565-param-attrs%2Fparam-attrs-pretty.rs?ref=d1c89d64bcc21e4f25ef89889048fe231dd7eabe", "patch": "@@ -0,0 +1,56 @@\n+// aux-build:param-attrs.rs\n+\n+// check-pass\n+\n+#![feature(param_attrs)]\n+#![feature(c_variadic)]\n+\n+extern crate param_attrs;\n+\n+use param_attrs::*;\n+\n+struct W(u8);\n+\n+#[attr_extern]\n+extern \"C\" { fn ffi(#[a1] arg1: i32, #[a2] ...); }\n+\n+#[attr_extern_cvar]\n+unsafe extern \"C\" fn cvar(arg1: i32, #[a1] mut args: ...) {}\n+\n+#[attr_alias]\n+type Alias = fn(#[a1] u8, #[a2] ...);\n+\n+#[attr_free]\n+fn free(#[a1] arg1: u8) {\n+    let lam = |#[a2] W(x), #[a3] y| ();\n+}\n+\n+impl W {\n+    #[attr_inherent_1]\n+    fn inherent1(#[a1] self, #[a2] arg1: u8) {}\n+\n+    #[attr_inherent_2]\n+    fn inherent2(#[a1] &self, #[a2] arg1: u8) {}\n+\n+    #[attr_inherent_3]\n+    fn inherent3<'a>(#[a1] &'a mut self, #[a2] arg1: u8) {}\n+\n+    #[attr_inherent_4]\n+    fn inherent4<'a>(#[a1] self: Box<Self>, #[a2] arg1: u8) {}\n+}\n+\n+trait A {\n+    #[attr_trait_1]\n+    fn trait1(#[a1] self, #[a2] arg1: u8);\n+\n+    #[attr_trait_2]\n+    fn trait2(#[a1] &self, #[a2] arg1: u8);\n+\n+    #[attr_trait_3]\n+    fn trait3<'a>(#[a1] &'a mut self, #[a2] arg1: u8);\n+\n+    #[attr_trait_4]\n+    fn trait4<'a>(#[a1] self: Box<Self>, #[a2] arg1: u8, #[a3] Vec<u8>);\n+}\n+\n+fn main() {}"}]}