{"sha": "4fdb4cfa896232a2a2beb9d1eace922402b98082", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRmZGI0Y2ZhODk2MjMyYTJhMmJlYjlkMWVhY2U5MjI0MDJiOTgwODI=", "commit": {"author": {"name": "Ulrik Sverdrup", "email": "root@localhost", "date": "2015-06-09T14:14:48Z"}, "committer": {"name": "Ulrik Sverdrup", "email": "root@localhost", "date": "2015-06-09T14:15:38Z"}, "message": "Implement Borrow<T> and BorrowMut<T> for Box<T: ?Sized>", "tree": {"sha": "fd2087df17f6d8043a5cb7ad09f0aae2561d0368", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fd2087df17f6d8043a5cb7ad09f0aae2561d0368"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4fdb4cfa896232a2a2beb9d1eace922402b98082", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4fdb4cfa896232a2a2beb9d1eace922402b98082", "html_url": "https://github.com/rust-lang/rust/commit/4fdb4cfa896232a2a2beb9d1eace922402b98082", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4fdb4cfa896232a2a2beb9d1eace922402b98082/comments", "author": {"login": "invalid-email-address", "id": 148100, "node_id": "MDQ6VXNlcjE0ODEwMA==", "avatar_url": "https://avatars.githubusercontent.com/u/148100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/invalid-email-address", "html_url": "https://github.com/invalid-email-address", "followers_url": "https://api.github.com/users/invalid-email-address/followers", "following_url": "https://api.github.com/users/invalid-email-address/following{/other_user}", "gists_url": "https://api.github.com/users/invalid-email-address/gists{/gist_id}", "starred_url": "https://api.github.com/users/invalid-email-address/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/invalid-email-address/subscriptions", "organizations_url": "https://api.github.com/users/invalid-email-address/orgs", "repos_url": "https://api.github.com/users/invalid-email-address/repos", "events_url": "https://api.github.com/users/invalid-email-address/events{/privacy}", "received_events_url": "https://api.github.com/users/invalid-email-address/received_events", "type": "User", "site_admin": false}, "committer": {"login": "invalid-email-address", "id": 148100, "node_id": "MDQ6VXNlcjE0ODEwMA==", "avatar_url": "https://avatars.githubusercontent.com/u/148100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/invalid-email-address", "html_url": "https://github.com/invalid-email-address", "followers_url": "https://api.github.com/users/invalid-email-address/followers", "following_url": "https://api.github.com/users/invalid-email-address/following{/other_user}", "gists_url": "https://api.github.com/users/invalid-email-address/gists{/gist_id}", "starred_url": "https://api.github.com/users/invalid-email-address/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/invalid-email-address/subscriptions", "organizations_url": "https://api.github.com/users/invalid-email-address/orgs", "repos_url": "https://api.github.com/users/invalid-email-address/repos", "events_url": "https://api.github.com/users/invalid-email-address/events{/privacy}", "received_events_url": "https://api.github.com/users/invalid-email-address/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6daf1dcb80e324df94ad4a1d263c832ab589b33a", "url": "https://api.github.com/repos/rust-lang/rust/commits/6daf1dcb80e324df94ad4a1d263c832ab589b33a", "html_url": "https://github.com/rust-lang/rust/commit/6daf1dcb80e324df94ad4a1d263c832ab589b33a"}], "stats": {"total": 39, "additions": 38, "deletions": 1}, "files": [{"sha": "d7242b9077556da112e5bac4bbd9eb40c01485d6", "filename": "src/libcollections/borrow.rs", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/4fdb4cfa896232a2a2beb9d1eace922402b98082/src%2Flibcollections%2Fborrow.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4fdb4cfa896232a2a2beb9d1eace922402b98082/src%2Flibcollections%2Fborrow.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fborrow.rs?ref=4fdb4cfa896232a2a2beb9d1eace922402b98082", "patch": "@@ -21,7 +21,7 @@ use core::ops::Deref;\n use core::option::Option;\n \n use fmt;\n-use alloc::{rc, arc};\n+use alloc::{boxed, rc, arc};\n \n use self::Cow::*;\n \n@@ -116,6 +116,14 @@ impl<'a, T: ?Sized> BorrowMut<T> for &'a mut T {\n     fn borrow_mut(&mut self) -> &mut T { &mut **self }\n }\n \n+impl<T: ?Sized> Borrow<T> for boxed::Box<T> {\n+    fn borrow(&self) -> &T { &**self }\n+}\n+\n+impl<T: ?Sized> BorrowMut<T> for boxed::Box<T> {\n+    fn borrow_mut(&mut self) -> &mut T { &mut **self }\n+}\n+\n impl<T: ?Sized> Borrow<T> for rc::Rc<T> {\n     fn borrow(&self) -> &T { &**self }\n }"}, {"sha": "62b46433da95748ae6ba7d5c2ea37a5046968f03", "filename": "src/libcollectionstest/btree/map.rs", "status": "modified", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/4fdb4cfa896232a2a2beb9d1eace922402b98082/src%2Flibcollectionstest%2Fbtree%2Fmap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4fdb4cfa896232a2a2beb9d1eace922402b98082/src%2Flibcollectionstest%2Fbtree%2Fmap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollectionstest%2Fbtree%2Fmap.rs?ref=4fdb4cfa896232a2a2beb9d1eace922402b98082", "patch": "@@ -12,6 +12,7 @@ use std::collections::BTreeMap;\n use std::collections::Bound::{Excluded, Included, Unbounded, self};\n use std::collections::btree_map::Entry::{Occupied, Vacant};\n use std::iter::range_inclusive;\n+use std::rc::Rc;\n \n #[test]\n fn test_basic_large() {\n@@ -198,6 +199,34 @@ fn test_range() {\n     }\n }\n \n+#[test]\n+fn test_borrow() {\n+    // make sure these compile -- using the Borrow trait\n+    {\n+        let mut map = BTreeMap::new();\n+        map.insert(\"0\".to_string(), 1);\n+        assert_eq!(map[\"0\"], 1);\n+    }\n+\n+    {\n+        let mut map = BTreeMap::new();\n+        map.insert(Box::new(0), 1);\n+        assert_eq!(map[&0], 1);\n+    }\n+\n+    {\n+        let mut map = BTreeMap::new();\n+        map.insert(Box::new([0, 1]) as Box<[i32]>, 1);\n+        assert_eq!(map[&[0, 1][..]], 1);\n+    }\n+\n+    {\n+        let mut map = BTreeMap::new();\n+        map.insert(Rc::new(0), 1);\n+        assert_eq!(map[&0], 1);\n+    }\n+}\n+\n #[test]\n fn test_entry(){\n     let xs = [(1, 10), (2, 20), (3, 30), (4, 40), (5, 50), (6, 60)];"}]}