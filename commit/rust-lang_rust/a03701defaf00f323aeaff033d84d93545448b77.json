{"sha": "a03701defaf00f323aeaff033d84d93545448b77", "node_id": "MDY6Q29tbWl0NzI0NzEyOmEwMzcwMWRlZmFmMDBmMzIzYWVhZmYwMzNkODRkOTM1NDU0NDhiNzc=", "commit": {"author": {"name": "Steve Klabnik", "email": "steve@steveklabnik.com", "date": "2015-01-12T18:41:37Z"}, "committer": {"name": "Steve Klabnik", "email": "steve@steveklabnik.com", "date": "2015-01-17T15:49:49Z"}, "message": "Remove segmented stack info from the FFI chapter of the book.\n\nFixes #20071.", "tree": {"sha": "638398dcbeee11582bd95fd1ae062a7b56662f05", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/638398dcbeee11582bd95fd1ae062a7b56662f05"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a03701defaf00f323aeaff033d84d93545448b77", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a03701defaf00f323aeaff033d84d93545448b77", "html_url": "https://github.com/rust-lang/rust/commit/a03701defaf00f323aeaff033d84d93545448b77", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a03701defaf00f323aeaff033d84d93545448b77/comments", "author": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "committer": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5f1ba93ad2793a3c8377c98edf3b753618cc2e77", "url": "https://api.github.com/repos/rust-lang/rust/commits/5f1ba93ad2793a3c8377c98edf3b753618cc2e77", "html_url": "https://github.com/rust-lang/rust/commit/5f1ba93ad2793a3c8377c98edf3b753618cc2e77"}], "stats": {"total": 23, "additions": 0, "deletions": 23}, "files": [{"sha": "32b60f0a81d0bb3370bba3b31215cfd9de31a052", "filename": "src/doc/trpl/ffi.md", "status": "modified", "additions": 0, "deletions": 23, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/a03701defaf00f323aeaff033d84d93545448b77/src%2Fdoc%2Ftrpl%2Fffi.md", "raw_url": "https://github.com/rust-lang/rust/raw/a03701defaf00f323aeaff033d84d93545448b77/src%2Fdoc%2Ftrpl%2Fffi.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Ftrpl%2Fffi.md?ref=a03701defaf00f323aeaff033d84d93545448b77", "patch": "@@ -164,29 +164,6 @@ pub fn uncompress(src: &[u8]) -> Option<Vec<u8>> {\n For reference, the examples used here are also available as an [library on\n GitHub](https://github.com/thestinger/rust-snappy).\n \n-# Stack management\n-\n-Rust threads by default run on a *large stack*. This is actually implemented as a\n-reserving a large segment of the address space and then lazily mapping in pages\n-as they are needed. When calling an external C function, the code is invoked on\n-the same stack as the rust stack. This means that there is no extra\n-stack-switching mechanism in place because it is assumed that the large stack\n-for the rust thread is plenty for the C function to have.\n-\n-A planned future improvement (not yet implemented at the time of this writing)\n-is to have a guard page at the end of every rust stack. No rust function will\n-hit this guard page (due to Rust's usage of LLVM's `__morestack`). The intention\n-for this unmapped page is to prevent infinite recursion in C from overflowing\n-onto other rust stacks. If the guard page is hit, then the process will be\n-terminated with a message saying that the guard page was hit.\n-\n-For normal external function usage, this all means that there shouldn't be any\n-need for any extra effort on a user's perspective. The C stack naturally\n-interleaves with the rust stack, and it's \"large enough\" for both to\n-interoperate. If, however, it is determined that a larger stack is necessary,\n-there are appropriate functions in the thread spawning API to control the size of\n-the stack of the thread which is spawned.\n-\n # Destructors\n \n Foreign libraries often hand off ownership of resources to the calling code."}]}