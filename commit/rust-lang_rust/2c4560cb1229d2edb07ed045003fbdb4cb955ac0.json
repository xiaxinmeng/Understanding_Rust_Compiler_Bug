{"sha": "2c4560cb1229d2edb07ed045003fbdb4cb955ac0", "node_id": "C_kwDOAAsO6NoAKDJjNDU2MGNiMTIyOWQyZWRiMDdlZDA0NTAwM2ZiZGI0Y2I5NTVhYzA", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-12-29T12:16:03Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-12-29T12:16:03Z"}, "message": "Rollup merge of #106218 - GuillaumeGomez:migrate-css-var-scraped-examples, r=notriddle\n\nMigrate css var scraped examples\n\nr? ``@notriddle``", "tree": {"sha": "b935fe488bfb1c41a464f4311e2fb46393afb9f8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b935fe488bfb1c41a464f4311e2fb46393afb9f8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2c4560cb1229d2edb07ed045003fbdb4cb955ac0", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjrYUDCRBK7hj4Ov3rIwAAkWoIAA9QY02vidp9EVp5xcXy5KxS\nTqiOvCEkF63zTj36zCJOjqa9trgR+blQGHf7y43tFFx7BpC45mugNoqA4iD722YQ\nic5QfOiTwAfN/drw/fp8PekUCjbNNb+Vu5OCL4/A7KvGO1gsPd+Mu6HEZ4IFb2Ux\nTL2RJlCSz6z7AB7S/3V0b4KEwe8I4O6dQkP81f7vmGDAebBnFoLyNznKtD+RGKbh\n50mzTCHYEmM97yjWCEmsznaXT3zhb5FM4oOUssEl1tf19y9KAGdogiRnvjtWScRj\n/AyKZf82WsbXwJHDi5777IzZq1HVCq2EnuMUO2ILXJGY7TkfZCP0SQcs28rwa7c=\n=EBay\n-----END PGP SIGNATURE-----\n", "payload": "tree b935fe488bfb1c41a464f4311e2fb46393afb9f8\nparent bdf37b7bbbf553237729cec444a3b2be06ef807e\nparent aa20f885c4abaa8a13f0adcc5d5738b895cc84a8\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1672316163 +0100\ncommitter GitHub <noreply@github.com> 1672316163 +0100\n\nRollup merge of #106218 - GuillaumeGomez:migrate-css-var-scraped-examples, r=notriddle\n\nMigrate css var scraped examples\n\nr? ``@notriddle``\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2c4560cb1229d2edb07ed045003fbdb4cb955ac0", "html_url": "https://github.com/rust-lang/rust/commit/2c4560cb1229d2edb07ed045003fbdb4cb955ac0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2c4560cb1229d2edb07ed045003fbdb4cb955ac0/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bdf37b7bbbf553237729cec444a3b2be06ef807e", "url": "https://api.github.com/repos/rust-lang/rust/commits/bdf37b7bbbf553237729cec444a3b2be06ef807e", "html_url": "https://github.com/rust-lang/rust/commit/bdf37b7bbbf553237729cec444a3b2be06ef807e"}, {"sha": "aa20f885c4abaa8a13f0adcc5d5738b895cc84a8", "url": "https://api.github.com/repos/rust-lang/rust/commits/aa20f885c4abaa8a13f0adcc5d5738b895cc84a8", "html_url": "https://github.com/rust-lang/rust/commit/aa20f885c4abaa8a13f0adcc5d5738b895cc84a8"}], "stats": {"total": 65, "additions": 47, "deletions": 18}, "files": [{"sha": "e2d6379c2cbb4c7780efc8f9fffeeeec79d618cd", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/2c4560cb1229d2edb07ed045003fbdb4cb955ac0/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/2c4560cb1229d2edb07ed045003fbdb4cb955ac0/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=2c4560cb1229d2edb07ed045003fbdb4cb955ac0", "patch": "@@ -1955,6 +1955,13 @@ in storage.js\n \toverflow-x: hidden;\n }\n \n+.scraped-example .example-wrap .rust span.highlight {\n+\tbackground: var(--scrape-example-code-line-highlight);\n+}\n+.scraped-example .example-wrap .rust span.highlight.focus {\n+\tbackground: var(--scrape-example-code-line-highlight-focus);\n+}\n+\n .more-examples-toggle {\n \tmax-width: calc(100% + 25px);\n \tmargin-top: 10px;"}, {"sha": "3d0025054221c2129dc76af418c8540e31ffd6a9", "filename": "src/librustdoc/html/static/css/themes/ayu.css", "status": "modified", "additions": 2, "deletions": 6, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/2c4560cb1229d2edb07ed045003fbdb4cb955ac0/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "raw_url": "https://github.com/rust-lang/rust/raw/2c4560cb1229d2edb07ed045003fbdb4cb955ac0/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css?ref=2c4560cb1229d2edb07ed045003fbdb4cb955ac0", "patch": "@@ -91,6 +91,8 @@ Original by Dempfi (https://github.com/dempfi/ayu)\n \t--codeblock-link-background: #333;\n \t--scrape-example-toggle-line-background: #999;\n \t--scrape-example-toggle-line-hover-background: #c5c5c5;\n+\t--scrape-example-code-line-highlight: rgb(91, 59, 1);\n+\t--scrape-example-code-line-highlight-focus: rgb(124, 75, 15);\n }\n \n h1, h2, h3, h4 {\n@@ -206,12 +208,6 @@ above the `@media (max-width: 700px)` rules due to a bug in the css checker */\n \tborder-color: white;\n \tcolor: white;\n }\n-.scraped-example .example-wrap .rust span.highlight {\n-\tbackground: rgb(91, 59, 1);\n-}\n-.scraped-example .example-wrap .rust span.highlight.focus {\n-\tbackground: rgb(124, 75, 15);\n-}\n .scraped-example:not(.expanded) .code-wrapper::before {\n \tbackground: linear-gradient(to bottom, rgba(15, 20, 25, 1), rgba(15, 20, 25, 0));\n }"}, {"sha": "b88eeedddf3cecf231281896b1edf474c2264cfb", "filename": "src/librustdoc/html/static/css/themes/dark.css", "status": "modified", "additions": 2, "deletions": 6, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/2c4560cb1229d2edb07ed045003fbdb4cb955ac0/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "raw_url": "https://github.com/rust-lang/rust/raw/2c4560cb1229d2edb07ed045003fbdb4cb955ac0/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css?ref=2c4560cb1229d2edb07ed045003fbdb4cb955ac0", "patch": "@@ -86,6 +86,8 @@\n \t--codeblock-link-background: #333;\n \t--scrape-example-toggle-line-background: #999;\n \t--scrape-example-toggle-line-hover-background: #c5c5c5;\n+\t--scrape-example-code-line-highlight: rgb(91, 59, 1);\n+\t--scrape-example-code-line-highlight-focus: rgb(124, 75, 15);\n }\n \n #search-tabs > button:not(.selected) {\n@@ -106,12 +108,6 @@\n \tborder-color: white;\n \tcolor: white;\n }\n-.scraped-example .example-wrap .rust span.highlight {\n-\tbackground: rgb(91, 59, 1);\n-}\n-.scraped-example .example-wrap .rust span.highlight.focus {\n-\tbackground: rgb(124, 75, 15);\n-}\n .scraped-example:not(.expanded) .code-wrapper::before {\n \tbackground: linear-gradient(to bottom, rgba(53, 53, 53, 1), rgba(53, 53, 53, 0));\n }"}, {"sha": "fff59d4e9c98c07010783935f7202d586019dbb4", "filename": "src/librustdoc/html/static/css/themes/light.css", "status": "modified", "additions": 2, "deletions": 6, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/2c4560cb1229d2edb07ed045003fbdb4cb955ac0/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "raw_url": "https://github.com/rust-lang/rust/raw/2c4560cb1229d2edb07ed045003fbdb4cb955ac0/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css?ref=2c4560cb1229d2edb07ed045003fbdb4cb955ac0", "patch": "@@ -83,6 +83,8 @@\n \t--codeblock-link-background: #eee;\n \t--scrape-example-toggle-line-background: #ccc;\n \t--scrape-example-toggle-line-hover-background: #999;\n+\t--scrape-example-code-line-highlight: #fcffd6;\n+\t--scrape-example-code-line-highlight-focus: #f6fdb0;\n }\n \n #search-tabs > button:not(.selected) {\n@@ -103,12 +105,6 @@\n \tborder-color: black;\n \tcolor: black;\n }\n-.scraped-example .example-wrap .rust span.highlight {\n-\tbackground: #fcffd6;\n-}\n-.scraped-example .example-wrap .rust span.highlight.focus {\n-\tbackground: #f6fdb0;\n-}\n .scraped-example:not(.expanded) .code-wrapper::before {\n \tbackground: linear-gradient(to bottom, rgba(255, 255, 255, 1), rgba(255, 255, 255, 0));\n }"}, {"sha": "5175891e7ba69817c67a34e78984995f9057dc2a", "filename": "src/test/rustdoc-gui/scrape-examples-color.goml", "status": "added", "additions": 34, "deletions": 0, "changes": 34, "blob_url": "https://github.com/rust-lang/rust/blob/2c4560cb1229d2edb07ed045003fbdb4cb955ac0/src%2Ftest%2Frustdoc-gui%2Fscrape-examples-color.goml", "raw_url": "https://github.com/rust-lang/rust/raw/2c4560cb1229d2edb07ed045003fbdb4cb955ac0/src%2Ftest%2Frustdoc-gui%2Fscrape-examples-color.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fscrape-examples-color.goml?ref=2c4560cb1229d2edb07ed045003fbdb4cb955ac0", "patch": "@@ -0,0 +1,34 @@\n+// Check that scrape example code blocks have the expected colors.\n+goto: \"file://\" + |DOC_PATH| + \"/scrape_examples/fn.test_many.html\"\n+\n+define-function: (\n+    \"check-colors\",\n+    (theme, highlight, highlight_focus),\n+    [\n+        (\"local-storage\", { \"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\", }),\n+        (\"reload\"),\n+        (\"wait-for\", \".more-examples-toggle\"),\n+        (\"assert-css\", (\".scraped-example .example-wrap .rust span.highlight:not(.focus)\", {\n+            \"background-color\": |highlight|,\n+        }, ALL)),\n+        (\"assert-css\", (\".scraped-example .example-wrap .rust span.highlight.focus\", {\n+            \"background-color\": |highlight_focus|,\n+        }, ALL)),\n+    ]\n+)\n+\n+call-function: (\"check-colors\", {\n+    \"theme\": \"ayu\",\n+    \"highlight\": \"rgb(91, 59, 1)\",\n+    \"highlight_focus\": \"rgb(124, 75, 15)\",\n+})\n+call-function: (\"check-colors\", {\n+    \"theme\": \"dark\",\n+    \"highlight\": \"rgb(91, 59, 1)\",\n+    \"highlight_focus\": \"rgb(124, 75, 15)\",\n+})\n+call-function: (\"check-colors\", {\n+    \"theme\": \"light\",\n+    \"highlight\": \"rgb(252, 255, 214)\",\n+    \"highlight_focus\": \"rgb(246, 253, 176)\",\n+})"}]}