{"sha": "31cef56779dbce430a4052df141cc3d1b5a36ec2", "node_id": "MDY6Q29tbWl0NzI0NzEyOjMxY2VmNTY3NzlkYmNlNDMwYTQwNTJkZjE0MWNjM2QxYjVhMzZlYzI=", "commit": {"author": {"name": "Caleb Cartwright", "email": "caleb.cartwright@outlook.com", "date": "2020-10-20T01:26:56Z"}, "committer": {"name": "Caleb Cartwright", "email": "calebcartwright@users.noreply.github.com", "date": "2020-10-24T16:13:00Z"}, "message": "feat: add initial support for ConstBlock expressions", "tree": {"sha": "f94ad6edad7ab07a8c3649b1e9f19b13f74cb231", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f94ad6edad7ab07a8c3649b1e9f19b13f74cb231"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/31cef56779dbce430a4052df141cc3d1b5a36ec2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/31cef56779dbce430a4052df141cc3d1b5a36ec2", "html_url": "https://github.com/rust-lang/rust/commit/31cef56779dbce430a4052df141cc3d1b5a36ec2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/31cef56779dbce430a4052df141cc3d1b5a36ec2/comments", "author": {"login": "calebcartwright", "id": 13042488, "node_id": "MDQ6VXNlcjEzMDQyNDg4", "avatar_url": "https://avatars.githubusercontent.com/u/13042488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/calebcartwright", "html_url": "https://github.com/calebcartwright", "followers_url": "https://api.github.com/users/calebcartwright/followers", "following_url": "https://api.github.com/users/calebcartwright/following{/other_user}", "gists_url": "https://api.github.com/users/calebcartwright/gists{/gist_id}", "starred_url": "https://api.github.com/users/calebcartwright/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/calebcartwright/subscriptions", "organizations_url": "https://api.github.com/users/calebcartwright/orgs", "repos_url": "https://api.github.com/users/calebcartwright/repos", "events_url": "https://api.github.com/users/calebcartwright/events{/privacy}", "received_events_url": "https://api.github.com/users/calebcartwright/received_events", "type": "User", "site_admin": false}, "committer": {"login": "calebcartwright", "id": 13042488, "node_id": "MDQ6VXNlcjEzMDQyNDg4", "avatar_url": "https://avatars.githubusercontent.com/u/13042488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/calebcartwright", "html_url": "https://github.com/calebcartwright", "followers_url": "https://api.github.com/users/calebcartwright/followers", "following_url": "https://api.github.com/users/calebcartwright/following{/other_user}", "gists_url": "https://api.github.com/users/calebcartwright/gists{/gist_id}", "starred_url": "https://api.github.com/users/calebcartwright/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/calebcartwright/subscriptions", "organizations_url": "https://api.github.com/users/calebcartwright/orgs", "repos_url": "https://api.github.com/users/calebcartwright/repos", "events_url": "https://api.github.com/users/calebcartwright/events{/privacy}", "received_events_url": "https://api.github.com/users/calebcartwright/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c89638ae555934113d3ff73c8648ead09410b592", "url": "https://api.github.com/repos/rust-lang/rust/commits/c89638ae555934113d3ff73c8648ead09410b592", "html_url": "https://github.com/rust-lang/rust/commit/c89638ae555934113d3ff73c8648ead09410b592"}], "stats": {"total": 4, "additions": 4, "deletions": 0}, "files": [{"sha": "6bc54ff86014353bfedc97be8e62dc227349f6d9", "filename": "src/expr.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/31cef56779dbce430a4052df141cc3d1b5a36ec2/src%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/31cef56779dbce430a4052df141cc3d1b5a36ec2/src%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fexpr.rs?ref=31cef56779dbce430a4052df141cc3d1b5a36ec2", "patch": "@@ -124,6 +124,9 @@ pub(crate) fn format_expr(\n         | ast::ExprKind::Loop(..)\n         | ast::ExprKind::While(..) => to_control_flow(expr, expr_type)\n             .and_then(|control_flow| control_flow.rewrite(context, shape)),\n+        ast::ExprKind::ConstBlock(ref anon_const) => {\n+            Some(format!(\"const {}\", anon_const.rewrite(context, shape)?))\n+        }\n         ast::ExprKind::Block(ref block, opt_label) => {\n             match expr_type {\n                 ExprType::Statement => {"}, {"sha": "f8867914937529172b06db8976e83d793e279099", "filename": "src/utils.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/31cef56779dbce430a4052df141cc3d1b5a36ec2/src%2Futils.rs", "raw_url": "https://github.com/rust-lang/rust/raw/31cef56779dbce430a4052df141cc3d1b5a36ec2/src%2Futils.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Futils.rs?ref=31cef56779dbce430a4052df141cc3d1b5a36ec2", "patch": "@@ -461,6 +461,7 @@ pub(crate) fn is_block_expr(context: &RewriteContext<'_>, expr: &ast::Expr, repr\n         | ast::ExprKind::While(..)\n         | ast::ExprKind::If(..)\n         | ast::ExprKind::Block(..)\n+        | ast::ExprKind::ConstBlock(..)\n         | ast::ExprKind::Async(..)\n         | ast::ExprKind::Loop(..)\n         | ast::ExprKind::ForLoop(..)"}]}