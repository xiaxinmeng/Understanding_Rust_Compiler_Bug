{"sha": "6c623224dcf6f7cf06afd46b17ce7f665e6b4fda", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZjNjIzMjI0ZGNmNmY3Y2YwNmFmZDQ2YjE3Y2U3ZjY2NWU2YjRmZGE=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-01-12T09:32:27Z"}, "committer": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-01-12T09:32:27Z"}, "message": "const_let: --bless with --compare-mode=nll", "tree": {"sha": "685e1c019d28c71fd38da13783c6a341520b337e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/685e1c019d28c71fd38da13783c6a341520b337e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6c623224dcf6f7cf06afd46b17ce7f665e6b4fda", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6c623224dcf6f7cf06afd46b17ce7f665e6b4fda", "html_url": "https://github.com/rust-lang/rust/commit/6c623224dcf6f7cf06afd46b17ce7f665e6b4fda", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6c623224dcf6f7cf06afd46b17ce7f665e6b4fda/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3dc08ed0688a07004693415155bae18c3e077992", "url": "https://api.github.com/repos/rust-lang/rust/commits/3dc08ed0688a07004693415155bae18c3e077992", "html_url": "https://github.com/rust-lang/rust/commit/3dc08ed0688a07004693415155bae18c3e077992"}], "stats": {"total": 151, "additions": 74, "deletions": 77}, "files": [{"sha": "f1a2312490813a6672d005a94bafb9298dcda6ed", "filename": "src/test/ui/check-static-values-constraints.nll.stderr", "status": "modified", "additions": 52, "deletions": 10, "changes": 62, "blob_url": "https://github.com/rust-lang/rust/blob/6c623224dcf6f7cf06afd46b17ce7f665e6b4fda/src%2Ftest%2Fui%2Fcheck-static-values-constraints.nll.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6c623224dcf6f7cf06afd46b17ce7f665e6b4fda/src%2Ftest%2Fui%2Fcheck-static-values-constraints.nll.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcheck-static-values-constraints.nll.stderr?ref=6c623224dcf6f7cf06afd46b17ce7f665e6b4fda", "patch": "@@ -13,44 +13,80 @@ error[E0010]: allocations are not allowed in statics\n LL | static STATIC11: Box<MyOwned> = box MyOwned;\n    |                                 ^^^^^^^^^^^ allocation not allowed in statics\n \n+error[E0019]: static contains unimplemented expression type\n+  --> $DIR/check-static-values-constraints.rs:79:37\n+   |\n+LL | static STATIC11: Box<MyOwned> = box MyOwned;\n+   |                                     ^^^^^^^\n+\n error[E0015]: calls in statics are limited to constant functions, tuple structs and tuple variants\n-  --> $DIR/check-static-values-constraints.rs:89:32\n+  --> $DIR/check-static-values-constraints.rs:90:32\n    |\n LL |     field2: SafeEnum::Variant4(\"str\".to_string())\n    |                                ^^^^^^^^^^^^^^^^^\n \n error[E0010]: allocations are not allowed in statics\n-  --> $DIR/check-static-values-constraints.rs:94:5\n+  --> $DIR/check-static-values-constraints.rs:95:5\n    |\n LL |     box MyOwned, //~ ERROR allocations are not allowed in statics\n    |     ^^^^^^^^^^^ allocation not allowed in statics\n \n+error[E0019]: static contains unimplemented expression type\n+  --> $DIR/check-static-values-constraints.rs:95:9\n+   |\n+LL |     box MyOwned, //~ ERROR allocations are not allowed in statics\n+   |         ^^^^^^^\n+\n error[E0010]: allocations are not allowed in statics\n-  --> $DIR/check-static-values-constraints.rs:95:5\n+  --> $DIR/check-static-values-constraints.rs:97:5\n    |\n LL |     box MyOwned, //~ ERROR allocations are not allowed in statics\n    |     ^^^^^^^^^^^ allocation not allowed in statics\n \n+error[E0019]: static contains unimplemented expression type\n+  --> $DIR/check-static-values-constraints.rs:97:9\n+   |\n+LL |     box MyOwned, //~ ERROR allocations are not allowed in statics\n+   |         ^^^^^^^\n+\n error[E0010]: allocations are not allowed in statics\n-  --> $DIR/check-static-values-constraints.rs:99:6\n+  --> $DIR/check-static-values-constraints.rs:102:6\n    |\n LL |     &box MyOwned, //~ ERROR allocations are not allowed in statics\n    |      ^^^^^^^^^^^ allocation not allowed in statics\n \n+error[E0019]: static contains unimplemented expression type\n+  --> $DIR/check-static-values-constraints.rs:102:10\n+   |\n+LL |     &box MyOwned, //~ ERROR allocations are not allowed in statics\n+   |          ^^^^^^^\n+\n error[E0010]: allocations are not allowed in statics\n-  --> $DIR/check-static-values-constraints.rs:100:6\n+  --> $DIR/check-static-values-constraints.rs:104:6\n    |\n LL |     &box MyOwned, //~ ERROR allocations are not allowed in statics\n    |      ^^^^^^^^^^^ allocation not allowed in statics\n \n+error[E0019]: static contains unimplemented expression type\n+  --> $DIR/check-static-values-constraints.rs:104:10\n+   |\n+LL |     &box MyOwned, //~ ERROR allocations are not allowed in statics\n+   |          ^^^^^^^\n+\n error[E0010]: allocations are not allowed in statics\n-  --> $DIR/check-static-values-constraints.rs:106:5\n+  --> $DIR/check-static-values-constraints.rs:111:5\n    |\n LL |     box 3;\n    |     ^^^^^ allocation not allowed in statics\n \n+error[E0019]: static contains unimplemented expression type\n+  --> $DIR/check-static-values-constraints.rs:111:9\n+   |\n+LL |     box 3;\n+   |         ^\n+\n error[E0507]: cannot move out of static item\n-  --> $DIR/check-static-values-constraints.rs:110:45\n+  --> $DIR/check-static-values-constraints.rs:116:45\n    |\n LL |     let y = { static x: Box<isize> = box 3; x };\n    |                                             ^\n@@ -59,12 +95,18 @@ LL |     let y = { static x: Box<isize> = box 3; x };\n    |                                             help: consider borrowing here: `&x`\n \n error[E0010]: allocations are not allowed in statics\n-  --> $DIR/check-static-values-constraints.rs:110:38\n+  --> $DIR/check-static-values-constraints.rs:116:38\n    |\n LL |     let y = { static x: Box<isize> = box 3; x };\n    |                                      ^^^^^ allocation not allowed in statics\n \n-error: aborting due to 10 previous errors\n+error[E0019]: static contains unimplemented expression type\n+  --> $DIR/check-static-values-constraints.rs:116:42\n+   |\n+LL |     let y = { static x: Box<isize> = box 3; x };\n+   |                                          ^\n+\n+error: aborting due to 17 previous errors\n \n-Some errors occurred: E0010, E0015, E0493, E0507.\n+Some errors occurred: E0010, E0015, E0019, E0493, E0507.\n For more information about an error, try `rustc --explain E0010`."}, {"sha": "91b076097b0183ec730ad482f02e0ab0993e1455", "filename": "src/test/ui/consts/min_const_fn/min_const_fn.nll.stderr", "status": "modified", "additions": 1, "deletions": 7, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/6c623224dcf6f7cf06afd46b17ce7f665e6b4fda/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_fn.nll.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6c623224dcf6f7cf06afd46b17ce7f665e6b4fda/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_fn.nll.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_fn.nll.stderr?ref=6c623224dcf6f7cf06afd46b17ce7f665e6b4fda", "patch": "@@ -112,12 +112,6 @@ error: `if`, `match`, `&&` and `||` are not stable in const fn\n LL | const fn foo30_5(b: bool) { while b { } } //~ ERROR not stable in const fn\n    |                             ^^^^^^^^^^^\n \n-error: local variables in const fn are unstable\n-  --> $DIR/min_const_fn.rs:99:34\n-   |\n-LL | const fn foo30_6() -> bool { let x = true; x } //~ ERROR local variables in const fn\n-   |                                  ^\n-\n error: `if`, `match`, `&&` and `||` are not stable in const fn\n   --> $DIR/min_const_fn.rs:100:44\n    |\n@@ -220,7 +214,7 @@ error: function pointers in const fn are unstable\n LL | const fn no_fn_ptrs2() -> fn() { fn foo() {} foo }\n    |                           ^^^^\n \n-error: aborting due to 35 previous errors\n+error: aborting due to 34 previous errors\n \n Some errors occurred: E0493, E0515.\n For more information about an error, try `rustc --explain E0493`."}, {"sha": "e6ee1523a3b285e4ecd0bd4805bb6c1570c3bf64", "filename": "src/test/ui/consts/promote_const_let.nll.stderr", "status": "modified", "additions": 18, "deletions": 3, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/6c623224dcf6f7cf06afd46b17ce7f665e6b4fda/src%2Ftest%2Fui%2Fconsts%2Fpromote_const_let.nll.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6c623224dcf6f7cf06afd46b17ce7f665e6b4fda/src%2Ftest%2Fui%2Fconsts%2Fpromote_const_let.nll.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fpromote_const_let.nll.stderr?ref=6c623224dcf6f7cf06afd46b17ce7f665e6b4fda", "patch": "@@ -1,5 +1,5 @@\n error[E0597]: `y` does not live long enough\n-  --> $DIR/promote_const_let.rs:6:9\n+  --> $DIR/promote_const_let.rs:4:9\n    |\n LL |     let x: &'static u32 = {\n    |            ------------ type annotation requires that `y` is borrowed for `'static`\n@@ -9,6 +9,21 @@ LL |         &y //~ ERROR does not live long enough\n LL |     };\n    |     - `y` dropped here while still borrowed\n \n-error: aborting due to previous error\n+error[E0716]: temporary value dropped while borrowed\n+  --> $DIR/promote_const_let.rs:6:28\n+   |\n+LL |       let x: &'static u32 = &{ //~ ERROR does not live long enough\n+   |  ____________------------____^\n+   | |            |\n+   | |            type annotation requires that borrow lasts for `'static`\n+LL | |         let y = 42;\n+LL | |         y\n+LL | |     };\n+   | |_____^ creates a temporary which is freed while still in use\n+LL |   }\n+   |   - temporary value is freed at the end of this statement\n+\n+error: aborting due to 2 previous errors\n \n-For more information about this error, try `rustc --explain E0597`.\n+Some errors occurred: E0597, E0716.\n+For more information about an error, try `rustc --explain E0597`."}, {"sha": "1920e1637d1494905bf9ebcefa5c8b3a07c2b9b8", "filename": "src/test/ui/issues/issue-18118.nll.stderr", "status": "modified", "additions": 3, "deletions": 57, "changes": 60, "blob_url": "https://github.com/rust-lang/rust/blob/6c623224dcf6f7cf06afd46b17ce7f665e6b4fda/src%2Ftest%2Fui%2Fissues%2Fissue-18118.nll.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6c623224dcf6f7cf06afd46b17ce7f665e6b4fda/src%2Ftest%2Fui%2Fissues%2Fissue-18118.nll.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-18118.nll.stderr?ref=6c623224dcf6f7cf06afd46b17ce7f665e6b4fda", "patch": "@@ -1,68 +1,14 @@\n-error[E0658]: let bindings in constants are unstable (see issue #48821)\n-  --> $DIR/issue-18118.rs:5:17\n-   |\n-LL |         let p = 3;\n-   |                 ^\n-   |\n-   = help: add #![feature(const_let)] to the crate attributes to enable\n-\n-error[E0658]: statements in constants are unstable (see issue #48821)\n-  --> $DIR/issue-18118.rs:5:17\n-   |\n-LL |         let p = 3;\n-   |                 ^\n-   |\n-   = help: add #![feature(const_let)] to the crate attributes to enable\n-\n-error[E0658]: let bindings in constants are unstable (see issue #48821)\n-  --> $DIR/issue-18118.rs:8:9\n-   |\n-LL |         &p //~ ERROR `p` does not live long enough\n-   |         ^^\n-   |\n-   = help: add #![feature(const_let)] to the crate attributes to enable\n-\n-error[E0658]: let bindings in constants are unstable (see issue #48821)\n-  --> $DIR/issue-18118.rs:2:5\n-   |\n-LL | /     const z: &'static isize = {\n-LL | |         //~^ ERROR let bindings in constants are unstable\n-LL | |         //~| ERROR statements in constants are unstable\n-LL | |         let p = 3;\n-...  |\n-LL | |         //~^ ERROR let bindings in constants are unstable\n-LL | |     };\n-   | |______^\n-   |\n-   = help: add #![feature(const_let)] to the crate attributes to enable\n-\n-error[E0658]: statements in constants are unstable (see issue #48821)\n-  --> $DIR/issue-18118.rs:2:5\n-   |\n-LL | /     const z: &'static isize = {\n-LL | |         //~^ ERROR let bindings in constants are unstable\n-LL | |         //~| ERROR statements in constants are unstable\n-LL | |         let p = 3;\n-...  |\n-LL | |         //~^ ERROR let bindings in constants are unstable\n-LL | |     };\n-   | |______^\n-   |\n-   = help: add #![feature(const_let)] to the crate attributes to enable\n-\n error[E0597]: `p` does not live long enough\n-  --> $DIR/issue-18118.rs:8:9\n+  --> $DIR/issue-18118.rs:4:9\n    |\n LL |         &p //~ ERROR `p` does not live long enough\n    |         ^^\n    |         |\n    |         borrowed value does not live long enough\n    |         using this value as a constant requires that `p` is borrowed for `'static`\n-LL |         //~^ ERROR let bindings in constants are unstable\n LL |     };\n    |     - `p` dropped here while still borrowed\n \n-error: aborting due to 6 previous errors\n+error: aborting due to previous error\n \n-Some errors occurred: E0597, E0658.\n-For more information about an error, try `rustc --explain E0597`.\n+For more information about this error, try `rustc --explain E0597`."}]}