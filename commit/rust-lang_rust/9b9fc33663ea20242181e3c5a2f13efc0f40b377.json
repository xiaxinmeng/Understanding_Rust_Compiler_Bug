{"sha": "9b9fc33663ea20242181e3c5a2f13efc0f40b377", "node_id": "MDY6Q29tbWl0NzI0NzEyOjliOWZjMzM2NjNlYTIwMjQyMTgxZTNjNWEyZjEzZWZjMGY0MGIzNzc=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-11-12T00:26:03Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-11-12T00:52:07Z"}, "message": "Rehabilitate run-fail/linked-failure4.rs", "tree": {"sha": "761b93ae3b5989ca5e2cb5c9fea46e6b706557d4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/761b93ae3b5989ca5e2cb5c9fea46e6b706557d4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9b9fc33663ea20242181e3c5a2f13efc0f40b377", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9b9fc33663ea20242181e3c5a2f13efc0f40b377", "html_url": "https://github.com/rust-lang/rust/commit/9b9fc33663ea20242181e3c5a2f13efc0f40b377", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9b9fc33663ea20242181e3c5a2f13efc0f40b377/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b2dd5f5cff2e64198a248997635c9ca7a9dd6384", "url": "https://api.github.com/repos/rust-lang/rust/commits/b2dd5f5cff2e64198a248997635c9ca7a9dd6384", "html_url": "https://github.com/rust-lang/rust/commit/b2dd5f5cff2e64198a248997635c9ca7a9dd6384"}], "stats": {"total": 16, "additions": 6, "deletions": 10}, "files": [{"sha": "2e8861dcd3fa115426fc221d3dc477043f0687ee", "filename": "src/test/run-fail/linked-failure4.rs", "status": "modified", "additions": 6, "deletions": 10, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/9b9fc33663ea20242181e3c5a2f13efc0f40b377/src%2Ftest%2Frun-fail%2Flinked-failure4.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9b9fc33663ea20242181e3c5a2f13efc0f40b377/src%2Ftest%2Frun-fail%2Flinked-failure4.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-fail%2Flinked-failure4.rs?ref=9b9fc33663ea20242181e3c5a2f13efc0f40b377", "patch": "@@ -1,31 +1,27 @@\n // -*- rust -*-\n // error-pattern:1 == 2\n-// xfail-test Been deadlocking on mac\n use std;\n import std::task;\n import std::comm::chan;\n import std::comm::port;\n import std::comm::recv;\n \n-fn child() { assert (1 == 2); }\n+fn child(&&_args: ()) { assert (1 == 2); }\n \n-fn parent() {\n+fn parent(&&_args: ()) {\n     let p = port::<int>();\n-    let f = child;\n-    task::spawn(f);\n+    task::spawn((), child);\n     let x = recv(p);\n }\n \n // This task is not linked to the failure chain, but since the other\n // tasks are going to fail the kernel, this one will fail too\n-fn sleeper() {\n+fn sleeper(&&_args: ()) {\n     let p = port::<int>();\n     let x = recv(p);\n }\n \n fn main() {\n-    let g = sleeper;\n-    task::spawn(g);\n-    let f = parent;\n-    task::spawn(f);\n+    task::spawn((), sleeper);\n+    task::spawn((), parent);\n }\n\\ No newline at end of file"}]}