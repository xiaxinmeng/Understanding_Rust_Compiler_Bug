{"sha": "838595add0586e3e23967722e2005b66ea8387b8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgzODU5NWFkZDA1ODZlM2UyMzk2NzcyMmUyMDA1YjY2ZWE4Mzg3Yjg=", "commit": {"author": {"name": "Junseok Lee", "email": "lee.junseok@berkeley.edu", "date": "2015-02-19T00:23:13Z"}, "committer": {"name": "Junseok Lee", "email": "lee.junseok@berkeley.edu", "date": "2015-02-21T00:16:09Z"}, "message": "suggestions no longer include private fields for structs outside local crate. closes #22421", "tree": {"sha": "75e98a8659cb754aff98ab4b269aca33275bf779", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/75e98a8659cb754aff98ab4b269aca33275bf779"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/838595add0586e3e23967722e2005b66ea8387b8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/838595add0586e3e23967722e2005b66ea8387b8", "html_url": "https://github.com/rust-lang/rust/commit/838595add0586e3e23967722e2005b66ea8387b8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/838595add0586e3e23967722e2005b66ea8387b8/comments", "author": null, "committer": null, "parents": [{"sha": "522d09dfecbeca1595f25ac58c6d0178bbd21d7d", "url": "https://api.github.com/repos/rust-lang/rust/commits/522d09dfecbeca1595f25ac58c6d0178bbd21d7d", "html_url": "https://github.com/rust-lang/rust/commit/522d09dfecbeca1595f25ac58c6d0178bbd21d7d"}], "stats": {"total": 6, "additions": 5, "deletions": 1}, "files": [{"sha": "9af5b85993c1c7df91e891c9f80a2ccacf24bd00", "filename": "src/librustc_typeck/check/mod.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/838595add0586e3e23967722e2005b66ea8387b8/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/838595add0586e3e23967722e2005b66ea8387b8/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs?ref=838595add0586e3e23967722e2005b66ea8387b8", "patch": "@@ -117,7 +117,7 @@ use std::iter::repeat;\n use std::slice;\n use syntax::{self, abi, attr};\n use syntax::attr::AttrMetaMethods;\n-use syntax::ast::{self, ProvidedMethod, RequiredMethod, TypeTraitItem, DefId};\n+use syntax::ast::{self, ProvidedMethod, RequiredMethod, TypeTraitItem, DefId, Visibility};\n use syntax::ast_util::{self, local_def, PostExpansionMethod};\n use syntax::codemap::{self, Span};\n use syntax::owned_slice::OwnedSlice;\n@@ -3117,6 +3117,10 @@ fn check_expr_with_unifier<'a, 'tcx, F>(fcx: &FnCtxt<'a, 'tcx>,\n             if skip.iter().any(|&x| x == n) {\n                 continue;\n             }\n+            // ignore private fields from non-local crates\n+            if id.krate != ast::LOCAL_CRATE && elem.vis != Visibility::Public {\n+                continue;\n+            }\n             let dist = lev_distance(n, name);\n             if dist < best_dist {\n                 best = Some(n);"}]}