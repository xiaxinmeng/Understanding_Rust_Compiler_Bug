{"sha": "202db3e09c27eb950abc498a2854b7e8ee7536b6", "node_id": "MDY6Q29tbWl0NzI0NzEyOjIwMmRiM2UwOWMyN2ViOTUwYWJjNDk4YTI4NTRiN2U4ZWU3NTM2YjY=", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2018-09-07T16:03:03Z"}, "committer": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2018-09-07T16:03:03Z"}, "message": "rustc_tools_util: don't hardcode crate name", "tree": {"sha": "fcb19ae3bbb6c709ff45e021b304d117adf0806b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fcb19ae3bbb6c709ff45e021b304d117adf0806b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/202db3e09c27eb950abc498a2854b7e8ee7536b6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/202db3e09c27eb950abc498a2854b7e8ee7536b6", "html_url": "https://github.com/rust-lang/rust/commit/202db3e09c27eb950abc498a2854b7e8ee7536b6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/202db3e09c27eb950abc498a2854b7e8ee7536b6/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "63a46b1e1a9a4cc3d78e1cf7a628421051c21167", "url": "https://api.github.com/repos/rust-lang/rust/commits/63a46b1e1a9a4cc3d78e1cf7a628421051c21167", "html_url": "https://github.com/rust-lang/rust/commit/63a46b1e1a9a4cc3d78e1cf7a628421051c21167"}], "stats": {"total": 8, "additions": 6, "deletions": 2}, "files": [{"sha": "b2ec96122908fc3c566f1d58fb4b7522a891ffd3", "filename": "rustc_tools_util/src/lib.rs", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/202db3e09c27eb950abc498a2854b7e8ee7536b6/rustc_tools_util%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/202db3e09c27eb950abc498a2854b7e8ee7536b6/rustc_tools_util%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/rustc_tools_util%2Fsrc%2Flib.rs?ref=202db3e09c27eb950abc498a2854b7e8ee7536b6", "patch": "@@ -8,6 +8,7 @@ macro_rules! get_version_info {\n         let major = env!(\"CARGO_PKG_VERSION_MAJOR\").parse::<u8>().unwrap();\n         let minor = env!(\"CARGO_PKG_VERSION_MINOR\").parse::<u8>().unwrap();\n         let patch = env!(\"CARGO_PKG_VERSION_PATCH\").parse::<u16>().unwrap();\n+        let crate_name = String::from(env!(\"CARGO_PKG_NAME\"));\n \n         let host_compiler = $crate::get_channel();\n         let commit_hash = option_env!(\"GIT_HASH\").map(|s| s.to_string());\n@@ -20,6 +21,7 @@ macro_rules! get_version_info {\n             host_compiler,\n             commit_hash,\n             commit_date,\n+            crate_name,\n         }\n     }};\n }\n@@ -32,6 +34,7 @@ pub struct VersionInfo {\n     pub host_compiler: Option<String>,\n     pub commit_hash: Option<String>,\n     pub commit_date: Option<String>,\n+    pub crate_name: String,\n }\n \n impl std::fmt::Display for VersionInfo {\n@@ -40,7 +43,8 @@ impl std::fmt::Display for VersionInfo {\n             Some(_) => {\n                 write!(\n                     f,\n-                    \"clippy {}.{}.{} ({} {})\",\n+                    \"{} {}.{}.{} ({} {})\",\n+                    self.crate_name,\n                     self.major,\n                     self.minor,\n                     self.patch,\n@@ -49,7 +53,7 @@ impl std::fmt::Display for VersionInfo {\n                 )?;\n             },\n             None => {\n-                write!(f, \"clippy {}.{}.{}\", self.major, self.minor, self.patch)?;\n+                write!(f, \"{} {}.{}.{}\", self.crate_name, self.major, self.minor, self.patch)?;\n             },\n         };\n         Ok(())"}]}