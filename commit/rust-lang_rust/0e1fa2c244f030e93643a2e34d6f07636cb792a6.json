{"sha": "0e1fa2c244f030e93643a2e34d6f07636cb792a6", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBlMWZhMmMyNDRmMDMwZTkzNjQzYTJlMzRkNmYwNzYzNmNiNzkyYTY=", "commit": {"author": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2017-11-27T02:49:14Z"}, "committer": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2017-11-27T02:49:14Z"}, "message": "Remove `indent_match_arms`", "tree": {"sha": "7b9c2ec1e912ec15a353182f45f030beac7a19d2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7b9c2ec1e912ec15a353182f45f030beac7a19d2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0e1fa2c244f030e93643a2e34d6f07636cb792a6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0e1fa2c244f030e93643a2e34d6f07636cb792a6", "html_url": "https://github.com/rust-lang/rust/commit/0e1fa2c244f030e93643a2e34d6f07636cb792a6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0e1fa2c244f030e93643a2e34d6f07636cb792a6/comments", "author": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "86007e7d17e1a669ebe0385e0c2e469ec0af5abe", "url": "https://api.github.com/repos/rust-lang/rust/commits/86007e7d17e1a669ebe0385e0c2e469ec0af5abe", "html_url": "https://github.com/rust-lang/rust/commit/86007e7d17e1a669ebe0385e0c2e469ec0af5abe"}], "stats": {"total": 146, "additions": 8, "deletions": 138}, "files": [{"sha": "ce0a56b0f1c2f72bbeb77067b5ea6c1a54e27978", "filename": "Configurations.md", "status": "modified", "additions": 2, "deletions": 32, "changes": 34, "blob_url": "https://github.com/rust-lang/rust/blob/0e1fa2c244f030e93643a2e34d6f07636cb792a6/Configurations.md", "raw_url": "https://github.com/rust-lang/rust/raw/0e1fa2c244f030e93643a2e34d6f07636cb792a6/Configurations.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Configurations.md?ref=0e1fa2c244f030e93643a2e34d6f07636cb792a6", "patch": "@@ -1026,36 +1026,6 @@ impl Lorem {\n \n See also [`brace_style`](#brace_style).\n \n-## `indent_match_arms`\n-\n-Indent match arms instead of keeping them at the same indentation level as the match keyword\n-\n-- **Default value**: `true`\n-- **Possible values**: `true`, `false`\n-\n-#### `true` (default):\n-\n-```rust\n-match lorem {\n-    Lorem::Ipsum => (),\n-    Lorem::Dolor => (),\n-    Lorem::Sit => (),\n-    Lorem::Amet => (),\n-}\n-```\n-\n-#### `false`:\n-\n-```rust\n-match lorem {\n-Lorem::Ipsum => (),\n-Lorem::Dolor => (),\n-Lorem::Sit => (),\n-Lorem::Amet => (),\n-}\n-```\n-\n-See also: [`match_block_trailing_comma`](#match_block_trailing_comma), [`wrap_match_arms`](#wrap_match_arms).\n \n ## `imports_indent`\n \n@@ -1209,7 +1179,7 @@ match lorem {\n }\n ```\n \n-See also: [`indent_match_arms`](#indent_match_arms), [`trailing_comma`](#trailing_comma), [`wrap_match_arms`](#wrap_match_arms).\n+See also: [`trailing_comma`](#trailing_comma), [`wrap_match_arms`](#wrap_match_arms).\n \n ## `max_width`\n \n@@ -1919,7 +1889,7 @@ match lorem {\n }\n ```\n \n-See also: [`indent_match_arms`](#indent_match_arms), [`match_block_trailing_comma`](#match_block_trailing_comma).\n+See also: [`match_block_trailing_comma`](#match_block_trailing_comma).\n \n ## `write_mode`\n "}, {"sha": "51e593e0f2a47797fb8f88cd048f528ea89f2ea8", "filename": "src/config.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/0e1fa2c244f030e93643a2e34d6f07636cb792a6/src%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0e1fa2c244f030e93643a2e34d6f07636cb792a6/src%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fconfig.rs?ref=0e1fa2c244f030e93643a2e34d6f07636cb792a6", "patch": "@@ -621,14 +621,12 @@ create_config! {\n     // Match\n     wrap_match_arms: bool, true, false, \"Wrap the body of arms in blocks when it does not fit on \\\n                                   the same line with the pattern of arms\";\n+    multiline_match_arm_forces_block: bool, false, false,\n+        \"Force multiline match arm bodies to be wrapped in a block\";\n     match_block_trailing_comma: bool, false, false,\n         \"Put a trailing comma after a block based match arm (non-block arms are not affected)\";\n     match_arm_forces_newline: bool, false, false,\n         \"Force match arm bodies to be in a new lines\";\n-    indent_match_arms: bool, true, false, \"Indent match arms instead of keeping them at the same \\\n-                                    indentation level as the match keyword\";\n-    multiline_match_arm_forces_block: bool, false, false,\n-        \"Force multiline match arm bodies to be wrapped in a block\";\n \n     // Spaces around punctuation\n     binop_separator: SeparatorPlace, SeparatorPlace::Front, false,"}, {"sha": "dc44f20d1b395d1435b43de7dbb9491efd5478d9", "filename": "src/expr.rs", "status": "modified", "additions": 4, "deletions": 12, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/0e1fa2c244f030e93643a2e34d6f07636cb792a6/src%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0e1fa2c244f030e93643a2e34d6f07636cb792a6/src%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fexpr.rs?ref=0e1fa2c244f030e93643a2e34d6f07636cb792a6", "patch": "@@ -1284,12 +1284,6 @@ fn rewrite_match(\n         inner_attrs[inner_attrs.len() - 1].span().hi()\n     };\n \n-    let arm_indent_str = if context.config.indent_match_arms() {\n-        nested_indent_str\n-    } else {\n-        shape.indent.to_string(context.config)\n-    };\n-\n     if arms.is_empty() {\n         let snippet = context.snippet(mk_sp(open_brace_pos, span.hi() - BytePos(1)));\n         if snippet.trim().is_empty() {\n@@ -1304,7 +1298,7 @@ fn rewrite_match(\n             cond_str,\n             block_sep,\n             inner_attrs_str,\n-            arm_indent_str,\n+            nested_indent_str,\n             rewrite_match_arms(context, arms, shape, span, open_brace_pos)?,\n             shape.indent.to_string(context.config),\n         ))\n@@ -1334,11 +1328,9 @@ fn rewrite_match_arms(\n     span: Span,\n     open_brace_pos: BytePos,\n ) -> Option<String> {\n-    let arm_shape = if context.config.indent_match_arms() {\n-        shape.block_indent(context.config.tab_spaces())\n-    } else {\n-        shape.block_indent(0)\n-    }.with_max_width(context.config);\n+    let arm_shape = shape\n+        .block_indent(context.config.tab_spaces())\n+        .with_max_width(context.config);\n \n     let arm_len = arms.len();\n     let is_last_iter = repeat(false)"}, {"sha": "3bd9fc4dd7dd435194810b51799e03bdb012e6ff", "filename": "tests/source/configs-indent_match_arms-false.rs", "status": "removed", "additions": 0, "deletions": 8, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/86007e7d17e1a669ebe0385e0c2e469ec0af5abe/tests%2Fsource%2Fconfigs-indent_match_arms-false.rs", "raw_url": "https://github.com/rust-lang/rust/raw/86007e7d17e1a669ebe0385e0c2e469ec0af5abe/tests%2Fsource%2Fconfigs-indent_match_arms-false.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fconfigs-indent_match_arms-false.rs?ref=86007e7d17e1a669ebe0385e0c2e469ec0af5abe", "patch": "@@ -1,8 +0,0 @@\n-// rustfmt-indent_match_arms: false\n-// Indent match arms\n-\n-fn main() {\n-    match lorem {\n-        Lorem::Ipsum => (), Lorem::Dolor => (), Lorem::Sit => (), Lorem::Amet => (),\n-    }\n-}"}, {"sha": "aa657980806265711b03be5bee7f4735860d8d64", "filename": "tests/source/configs-indent_match_arms-true.rs", "status": "removed", "additions": 0, "deletions": 8, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/86007e7d17e1a669ebe0385e0c2e469ec0af5abe/tests%2Fsource%2Fconfigs-indent_match_arms-true.rs", "raw_url": "https://github.com/rust-lang/rust/raw/86007e7d17e1a669ebe0385e0c2e469ec0af5abe/tests%2Fsource%2Fconfigs-indent_match_arms-true.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fconfigs-indent_match_arms-true.rs?ref=86007e7d17e1a669ebe0385e0c2e469ec0af5abe", "patch": "@@ -1,8 +0,0 @@\n-// rustfmt-indent_match_arms: true\n-// Indent match arms\n-\n-fn main() {\n-    match lorem {\n-        Lorem::Ipsum => (), Lorem::Dolor => (), Lorem::Sit => (), Lorem::Amet => (),\n-    }\n-}"}, {"sha": "75cee57f10db61c9f2bc9e16dea4c84b4041161e", "filename": "tests/source/indent_match_arms.rs", "status": "removed", "additions": 0, "deletions": 26, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/86007e7d17e1a669ebe0385e0c2e469ec0af5abe/tests%2Fsource%2Findent_match_arms.rs", "raw_url": "https://github.com/rust-lang/rust/raw/86007e7d17e1a669ebe0385e0c2e469ec0af5abe/tests%2Fsource%2Findent_match_arms.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Findent_match_arms.rs?ref=86007e7d17e1a669ebe0385e0c2e469ec0af5abe", "patch": "@@ -1,26 +0,0 @@\n-// rustfmt-indent_match_arms: false\n-\n-fn main() {\n-    match x {\n-        1 => \"one\",\n-        2 => \"two\",\n-        3 => \"three\",\n-        4 => \"four\",\n-        5 => \"five\",\n-        _ => \"something else\",\n-    }\n-\n-    match x {\n-        1 => \"one\",\n-        2 => \"two\",\n-        3 => \"three\",\n-        4 => \"four\",\n-        5 => match y {\n-            'a' => 'A',\n-            'b' => 'B',\n-            'c' => 'C',\n-            _ => \"Nope\",\n-        },\n-        _ => \"something else\",\n-    }\n-}"}, {"sha": "3084e01d45f8b63f13aa07ed0b4870b9e306de20", "filename": "tests/target/configs-indent_match_arms-false.rs", "status": "removed", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/86007e7d17e1a669ebe0385e0c2e469ec0af5abe/tests%2Ftarget%2Fconfigs-indent_match_arms-false.rs", "raw_url": "https://github.com/rust-lang/rust/raw/86007e7d17e1a669ebe0385e0c2e469ec0af5abe/tests%2Ftarget%2Fconfigs-indent_match_arms-false.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fconfigs-indent_match_arms-false.rs?ref=86007e7d17e1a669ebe0385e0c2e469ec0af5abe", "patch": "@@ -1,11 +0,0 @@\n-// rustfmt-indent_match_arms: false\n-// Indent match arms\n-\n-fn main() {\n-    match lorem {\n-    Lorem::Ipsum => (),\n-    Lorem::Dolor => (),\n-    Lorem::Sit => (),\n-    Lorem::Amet => (),\n-    }\n-}"}, {"sha": "02e2368378fdb9321e5c0f9200700a0dc52126c7", "filename": "tests/target/configs-indent_match_arms-true.rs", "status": "removed", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/86007e7d17e1a669ebe0385e0c2e469ec0af5abe/tests%2Ftarget%2Fconfigs-indent_match_arms-true.rs", "raw_url": "https://github.com/rust-lang/rust/raw/86007e7d17e1a669ebe0385e0c2e469ec0af5abe/tests%2Ftarget%2Fconfigs-indent_match_arms-true.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fconfigs-indent_match_arms-true.rs?ref=86007e7d17e1a669ebe0385e0c2e469ec0af5abe", "patch": "@@ -1,11 +0,0 @@\n-// rustfmt-indent_match_arms: true\n-// Indent match arms\n-\n-fn main() {\n-    match lorem {\n-        Lorem::Ipsum => (),\n-        Lorem::Dolor => (),\n-        Lorem::Sit => (),\n-        Lorem::Amet => (),\n-    }\n-}"}, {"sha": "8d5e7ef78874ad870890f101d1f1dfce728ae63b", "filename": "tests/target/indent_match_arms.rs", "status": "removed", "additions": 0, "deletions": 26, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/86007e7d17e1a669ebe0385e0c2e469ec0af5abe/tests%2Ftarget%2Findent_match_arms.rs", "raw_url": "https://github.com/rust-lang/rust/raw/86007e7d17e1a669ebe0385e0c2e469ec0af5abe/tests%2Ftarget%2Findent_match_arms.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Findent_match_arms.rs?ref=86007e7d17e1a669ebe0385e0c2e469ec0af5abe", "patch": "@@ -1,26 +0,0 @@\n-// rustfmt-indent_match_arms: false\n-\n-fn main() {\n-    match x {\n-    1 => \"one\",\n-    2 => \"two\",\n-    3 => \"three\",\n-    4 => \"four\",\n-    5 => \"five\",\n-    _ => \"something else\",\n-    }\n-\n-    match x {\n-    1 => \"one\",\n-    2 => \"two\",\n-    3 => \"three\",\n-    4 => \"four\",\n-    5 => match y {\n-    'a' => 'A',\n-    'b' => 'B',\n-    'c' => 'C',\n-    _ => \"Nope\",\n-    },\n-    _ => \"something else\",\n-    }\n-}"}]}