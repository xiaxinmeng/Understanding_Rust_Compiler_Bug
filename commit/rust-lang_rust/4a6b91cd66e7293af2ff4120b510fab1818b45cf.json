{"sha": "4a6b91cd66e7293af2ff4120b510fab1818b45cf", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRhNmI5MWNkNjZlNzI5M2FmMmZmNDEyMGI1MTBmYWIxODE4YjQ1Y2Y=", "commit": {"author": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2019-06-03T05:38:19Z"}, "committer": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2019-06-04T16:46:00Z"}, "message": "Simplify source_string and block-format methods", "tree": {"sha": "4c92732910c5dfdd748acec12aacdeffe167c332", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4c92732910c5dfdd748acec12aacdeffe167c332"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4a6b91cd66e7293af2ff4120b510fab1818b45cf", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQJEBAABCgAuFiEEj4U0bmbiMSg/mWqvgqphyqETl+YFAlz2oEsQHGRldkBwaGFu\nc2NoLm5ldAAKCRCCqmHKoROX5jI0D/9JK8Cl8Mc394+IoTlkWdm4WFE7q5tpLESq\n1KEqv7tLxwGe3tlfLOVqGQL6znd3QEbE/IX225yNTrqNG7jgCOnOAf2D/SrKZ6aP\ncFe6KkexqmKtfkxpvZS/EHXzoB8LC0VSM3jLWZkD7LCTQCJb0jJcxkdO+AbAupPX\n3+Gh3KOQhu0tP7bR4LnAuG9WLdMkwsYnTj6asd6UnaWFghMJkPPholaidwUVdvUn\nfAHfn5AHR2msm7GQF/7b3P/4iTdGM5fc3Wt/rnwK0QRz87Au2ufpOniKSk1FaEYh\n57AFcyU9grsZtF18OuRX0WZiOJju7XSQ4UJQ6xtGtHg5gpZLUGZO910XlStH5iP2\nVxbtuJNKjYEtNkJ6gINdpvYKdDORSNPcs++neTTNawp54fkxrofUAkwIKyW5WOP+\nLXVikoZAf7c5bSkz6v0Vr7Ap0wY+vH7PFiqxXu0pQi/m8LsszEUt+MDYXe25OWzk\nawBTHTmx5mGOa9cWOYjCVzWre/MInb5BGGC8lS3y1DApS9JyuyOsLFFa+bR2Q0S+\n4xIoCTbx32QGaRsqOw7La0LvwHO40swMXS7vER+mb1SHQChKa7kEgRxrFC5THDal\nQ3vowLJbqvW08fyg+91agNRii4rLhA2sbFkxAEu6mdHCP906Unh2rSJtdllh0k4v\nsajA6/Z1cg==\n=2v+V\n-----END PGP SIGNATURE-----", "payload": "tree 4c92732910c5dfdd748acec12aacdeffe167c332\nparent 94c8aa67917fe053c9d03d5be22ded221c0a5241\nauthor Philipp Hansch <dev@phansch.net> 1559540299 +0200\ncommitter Philipp Hansch <dev@phansch.net> 1559666760 +0200\n\nSimplify source_string and block-format methods\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4a6b91cd66e7293af2ff4120b510fab1818b45cf", "html_url": "https://github.com/rust-lang/rust/commit/4a6b91cd66e7293af2ff4120b510fab1818b45cf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4a6b91cd66e7293af2ff4120b510fab1818b45cf/comments", "author": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "94c8aa67917fe053c9d03d5be22ded221c0a5241", "url": "https://api.github.com/repos/rust-lang/rust/commits/94c8aa67917fe053c9d03d5be22ded221c0a5241", "html_url": "https://github.com/rust-lang/rust/commit/94c8aa67917fe053c9d03d5be22ded221c0a5241"}], "stats": {"total": 27, "additions": 13, "deletions": 14}, "files": [{"sha": "f3c55ae79f7927ba8631a9fdfb2f9e9c1a483468", "filename": "src/librustc_errors/annotate_rs_emitter.rs", "status": "modified", "additions": 13, "deletions": 14, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/4a6b91cd66e7293af2ff4120b510fab1818b45cf/src%2Flibrustc_errors%2Fannotate_rs_emitter.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a6b91cd66e7293af2ff4120b510fab1818b45cf/src%2Flibrustc_errors%2Fannotate_rs_emitter.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_errors%2Fannotate_rs_emitter.rs?ref=4a6b91cd66e7293af2ff4120b510fab1818b45cf", "patch": "@@ -138,13 +138,11 @@ impl<'a>  DiagnosticConverter<'a> {\n     }\n \n     /// Provides the source string for the given `line` of `file`\n-    fn source_string(file: Lrc<SourceFile>,\n-                     line: &Line) -> String {\n-        let source_string = match file.get_line(line.line_index - 1) {\n-            Some(s) => s.clone(),\n-            None => return String::new(),\n-        };\n-        source_string.to_string()\n+    fn source_string(\n+        file: Lrc<SourceFile>,\n+        line: &Line\n+    ) -> String {\n+        file.get_line(line.line_index - 1).map(|a| a.to_string()).unwrap_or(String::new())\n     }\n \n     /// Maps `Diagnostic::Level` to `snippet::AnnotationType`\n@@ -184,13 +182,14 @@ impl AnnotateRsEmitterWriter {\n         self\n     }\n \n-    fn emit_messages_default(&mut self,\n-                             level: &Level,\n-                             message: String,\n-                             code: &Option<DiagnosticId>,\n-                             msp: &MultiSpan,\n-                             children: &[SubDiagnostic],\n-                             suggestions: &[CodeSuggestion]\n+    fn emit_messages_default(\n+        &mut self,\n+        level: &Level,\n+        message: String,\n+        code: &Option<DiagnosticId>,\n+        msp: &MultiSpan,\n+        children: &[SubDiagnostic],\n+        suggestions: &[CodeSuggestion]\n     ) {\n         let converter = DiagnosticConverter {\n             source_map: self.source_map.clone(),"}]}