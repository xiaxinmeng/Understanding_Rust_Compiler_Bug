{"sha": "e4b8ed5aff7d25aa21c4c4d6bba8850c6dcaaaac", "node_id": "C_kwDOAAsO6NoAKGU0YjhlZDVhZmY3ZDI1YWEyMWM0YzRkNmJiYTg4NTBjNmRjYWFhYWM", "commit": {"author": {"name": "Ellen", "email": "supbscripter@gmail.com", "date": "2022-05-06T10:40:18Z"}, "committer": {"name": "Ellen", "email": "supbscripter@gmail.com", "date": "2022-05-06T10:40:18Z"}, "message": "move closure down", "tree": {"sha": "7364ddb9ec29944644a6c7f940e24c03cad43896", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7364ddb9ec29944644a6c7f940e24c03cad43896"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e4b8ed5aff7d25aa21c4c4d6bba8850c6dcaaaac", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e4b8ed5aff7d25aa21c4c4d6bba8850c6dcaaaac", "html_url": "https://github.com/rust-lang/rust/commit/e4b8ed5aff7d25aa21c4c4d6bba8850c6dcaaaac", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e4b8ed5aff7d25aa21c4c4d6bba8850c6dcaaaac/comments", "author": {"login": "BoxyUwU", "id": 21149742, "node_id": "MDQ6VXNlcjIxMTQ5NzQy", "avatar_url": "https://avatars.githubusercontent.com/u/21149742?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BoxyUwU", "html_url": "https://github.com/BoxyUwU", "followers_url": "https://api.github.com/users/BoxyUwU/followers", "following_url": "https://api.github.com/users/BoxyUwU/following{/other_user}", "gists_url": "https://api.github.com/users/BoxyUwU/gists{/gist_id}", "starred_url": "https://api.github.com/users/BoxyUwU/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BoxyUwU/subscriptions", "organizations_url": "https://api.github.com/users/BoxyUwU/orgs", "repos_url": "https://api.github.com/users/BoxyUwU/repos", "events_url": "https://api.github.com/users/BoxyUwU/events{/privacy}", "received_events_url": "https://api.github.com/users/BoxyUwU/received_events", "type": "User", "site_admin": false}, "committer": {"login": "BoxyUwU", "id": 21149742, "node_id": "MDQ6VXNlcjIxMTQ5NzQy", "avatar_url": "https://avatars.githubusercontent.com/u/21149742?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BoxyUwU", "html_url": "https://github.com/BoxyUwU", "followers_url": "https://api.github.com/users/BoxyUwU/followers", "following_url": "https://api.github.com/users/BoxyUwU/following{/other_user}", "gists_url": "https://api.github.com/users/BoxyUwU/gists{/gist_id}", "starred_url": "https://api.github.com/users/BoxyUwU/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BoxyUwU/subscriptions", "organizations_url": "https://api.github.com/users/BoxyUwU/orgs", "repos_url": "https://api.github.com/users/BoxyUwU/repos", "events_url": "https://api.github.com/users/BoxyUwU/events{/privacy}", "received_events_url": "https://api.github.com/users/BoxyUwU/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2819b2d8c91ac7d3b366c3c76dca37d2b7b2b5d5", "url": "https://api.github.com/repos/rust-lang/rust/commits/2819b2d8c91ac7d3b366c3c76dca37d2b7b2b5d5", "html_url": "https://github.com/rust-lang/rust/commit/2819b2d8c91ac7d3b366c3c76dca37d2b7b2b5d5"}], "stats": {"total": 16, "additions": 8, "deletions": 8}, "files": [{"sha": "a83924d4636c59f4f57791c2eb4107591a0dccf4", "filename": "compiler/rustc_typeck/src/check/compare_method.rs", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/e4b8ed5aff7d25aa21c4c4d6bba8850c6dcaaaac/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fcompare_method.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e4b8ed5aff7d25aa21c4c4d6bba8850c6dcaaaac/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fcompare_method.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fcompare_method.rs?ref=e4b8ed5aff7d25aa21c4c4d6bba8850c6dcaaaac", "patch": "@@ -1001,14 +1001,6 @@ fn compare_generic_param_kinds<'tcx>(\n             (Const { .. }, Const { .. }) | (Type { .. }, Type { .. }) => false,\n             (Lifetime { .. }, _) | (_, Lifetime { .. }) => unreachable!(),\n         } {\n-            let make_param_message = |prefix: &str, param: &ty::GenericParamDef| match param.kind {\n-                Const { .. } => {\n-                    format!(\"{} const parameter of type `{}`\", prefix, tcx.type_of(param.def_id))\n-                }\n-                Type { .. } => format!(\"{} type parameter\", prefix),\n-                Lifetime { .. } => unreachable!(),\n-            };\n-\n             let param_impl_span = tcx.def_span(param_impl.def_id);\n             let param_trait_span = tcx.def_span(param_trait.def_id);\n \n@@ -1022,6 +1014,14 @@ fn compare_generic_param_kinds<'tcx>(\n                 &tcx.def_path_str(tcx.parent(trait_item.def_id))\n             );\n \n+            let make_param_message = |prefix: &str, param: &ty::GenericParamDef| match param.kind {\n+                Const { .. } => {\n+                    format!(\"{} const parameter of type `{}`\", prefix, tcx.type_of(param.def_id))\n+                }\n+                Type { .. } => format!(\"{} type parameter\", prefix),\n+                Lifetime { .. } => unreachable!(),\n+            };\n+\n             let trait_header_span = tcx.def_ident_span(tcx.parent(trait_item.def_id)).unwrap();\n             err.span_label(trait_header_span, \"\");\n             err.span_label(param_trait_span, make_param_message(\"expected\", param_trait));"}]}