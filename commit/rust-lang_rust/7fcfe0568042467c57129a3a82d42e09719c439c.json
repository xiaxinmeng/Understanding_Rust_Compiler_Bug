{"sha": "7fcfe0568042467c57129a3a82d42e09719c439c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdmY2ZlMDU2ODA0MjQ2N2M1NzEyOWEzYTgyZDQyZTA5NzE5YzQzOWM=", "commit": {"author": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2021-06-07T06:21:01Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-06-07T06:21:01Z"}, "message": "Rollup merge of #85973 - LingMan:indentation, r=jyn514\n\nReplace a `match` with an `if let`\n\nSeems like a better fit here and saves one level of indentation.\n\n`@rustbot` modify labels +C-cleanup +T-compiler", "tree": {"sha": "172e4d63b1fc0404dde8ce84ed8235f8d25165df", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/172e4d63b1fc0404dde8ce84ed8235f8d25165df"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7fcfe0568042467c57129a3a82d42e09719c439c", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgvbrNCRBK7hj4Ov3rIwAAq30IAHfWAZVRGC0xUjxixeZWtACq\nUTpDT+gL73QMFRHUxtJXGsoFLS/U+SPn9pKmRHpyw7ngLwtR8aFF/ejKd0/bLjTg\nJRhoUTrl69hyNUemHRKsiCL0242u9Wa73JDViN8vNw3EejI6CepaRKdCTGy1JLBO\nY4S007f+bRjm3l6D/cGbqfoYE4k516KcmcMmerGCoYnNdj/B4gm17Et7sglo3e5e\nlaJF7/Tvla7vH3RRGfLuUbjvYw8f2ejJkqSNgqT7xZYx9tjgOMsc+Ew1ag+XIsvD\nb3Bz162IfBAM4mORWtjQ6OaHRGqQZrNcUrfrLY6MSDwBFn+kgh1mWwmplSDMyt0=\n=olH6\n-----END PGP SIGNATURE-----\n", "payload": "tree 172e4d63b1fc0404dde8ce84ed8235f8d25165df\nparent ac6e239b3bdc7b05b160f8431f17f53ba4d84c86\nparent 63c8cbd3c94bb9c71cc7c23715a982582973fab1\nauthor Yuki Okushi <jtitor@2k36.org> 1623046861 +0900\ncommitter GitHub <noreply@github.com> 1623046861 +0900\n\nRollup merge of #85973 - LingMan:indentation, r=jyn514\n\nReplace a `match` with an `if let`\n\nSeems like a better fit here and saves one level of indentation.\n\n`@rustbot` modify labels +C-cleanup +T-compiler\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7fcfe0568042467c57129a3a82d42e09719c439c", "html_url": "https://github.com/rust-lang/rust/commit/7fcfe0568042467c57129a3a82d42e09719c439c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7fcfe0568042467c57129a3a82d42e09719c439c/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ac6e239b3bdc7b05b160f8431f17f53ba4d84c86", "url": "https://api.github.com/repos/rust-lang/rust/commits/ac6e239b3bdc7b05b160f8431f17f53ba4d84c86", "html_url": "https://github.com/rust-lang/rust/commit/ac6e239b3bdc7b05b160f8431f17f53ba4d84c86"}, {"sha": "63c8cbd3c94bb9c71cc7c23715a982582973fab1", "url": "https://api.github.com/repos/rust-lang/rust/commits/63c8cbd3c94bb9c71cc7c23715a982582973fab1", "html_url": "https://github.com/rust-lang/rust/commit/63c8cbd3c94bb9c71cc7c23715a982582973fab1"}], "stats": {"total": 47, "additions": 22, "deletions": 25}, "files": [{"sha": "40b1a8a2da9fa80b45ebbb1cd41764564ed9a32d", "filename": "compiler/rustc_mir/src/transform/remove_zsts.rs", "status": "modified", "additions": 22, "deletions": 25, "changes": 47, "blob_url": "https://github.com/rust-lang/rust/blob/7fcfe0568042467c57129a3a82d42e09719c439c/compiler%2Frustc_mir%2Fsrc%2Ftransform%2Fremove_zsts.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7fcfe0568042467c57129a3a82d42e09719c439c/compiler%2Frustc_mir%2Fsrc%2Ftransform%2Fremove_zsts.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir%2Fsrc%2Ftransform%2Fremove_zsts.rs?ref=7fcfe0568042467c57129a3a82d42e09719c439c", "patch": "@@ -16,32 +16,29 @@ impl<'tcx> MirPass<'tcx> for RemoveZsts {\n         let (basic_blocks, local_decls) = body.basic_blocks_and_local_decls_mut();\n         for block in basic_blocks.iter_mut() {\n             for statement in block.statements.iter_mut() {\n-                match statement.kind {\n-                    StatementKind::Assign(box (place, _)) => {\n-                        let place_ty = place.ty(local_decls, tcx).ty;\n-                        if !maybe_zst(place_ty) {\n-                            continue;\n-                        }\n-                        let layout = match tcx.layout_of(param_env.and(place_ty)) {\n-                            Ok(layout) => layout,\n-                            Err(_) => continue,\n-                        };\n-                        if !layout.is_zst() {\n-                            continue;\n-                        }\n-                        if involves_a_union(place, local_decls, tcx) {\n-                            continue;\n-                        }\n-                        if tcx.consider_optimizing(|| {\n-                            format!(\n-                                \"RemoveZsts - Place: {:?} SourceInfo: {:?}\",\n-                                place, statement.source_info\n-                            )\n-                        }) {\n-                            statement.make_nop();\n-                        }\n+                if let StatementKind::Assign(box (place, _)) = statement.kind {\n+                    let place_ty = place.ty(local_decls, tcx).ty;\n+                    if !maybe_zst(place_ty) {\n+                        continue;\n+                    }\n+                    let layout = match tcx.layout_of(param_env.and(place_ty)) {\n+                        Ok(layout) => layout,\n+                        Err(_) => continue,\n+                    };\n+                    if !layout.is_zst() {\n+                        continue;\n+                    }\n+                    if involves_a_union(place, local_decls, tcx) {\n+                        continue;\n+                    }\n+                    if tcx.consider_optimizing(|| {\n+                        format!(\n+                            \"RemoveZsts - Place: {:?} SourceInfo: {:?}\",\n+                            place, statement.source_info\n+                        )\n+                    }) {\n+                        statement.make_nop();\n                     }\n-                    _ => {}\n                 }\n             }\n         }"}]}