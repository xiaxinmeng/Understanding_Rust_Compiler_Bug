{"sha": "eca27a2f949cc711e0989b8b01d75996fa6e8df9", "node_id": "C_kwDOAAsO6NoAKGVjYTI3YTJmOTQ5Y2M3MTFlMDk4OWI4YjAxZDc1OTk2ZmE2ZThkZjk", "commit": {"author": {"name": "Dylan DPC", "email": "99973273+Dylan-DPC@users.noreply.github.com", "date": "2022-11-11T15:21:40Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-11-11T15:21:40Z"}, "message": "Rollup merge of #104169 - GuillaumeGomez:migrate-css-target, r=notriddle\n\nMigrate `:target` rules to use CSS variables\n\nThere should be no GUI changes.\n\nr? `@notriddle`", "tree": {"sha": "fdaffd5d60ae60d9c97039078bd67ac29079b192", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fdaffd5d60ae60d9c97039078bd67ac29079b192"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/eca27a2f949cc711e0989b8b01d75996fa6e8df9", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjbmiECRBK7hj4Ov3rIwAAZ6sIAJFMUMBhOX06xtcUSmdw3VFL\nNyO13zrT1nylKuIh+KArV7kbonDjaA0MBc8ASsTyCwjK+c46A0rD6sjlm+eGIA/e\nLSvf5B0F78Ytq+Lq6cO0U+S1sAxVlBTO+bhnHhiusmwnOLaiLhUIbxQkhonds9mW\n/26id5zXx8o3yb6T/HXJQpYat6uNHMbcm8vdjFWFEIwVWIt5an6Ai0kSmMSdODWX\nDvL06lk3yhwgeAUGn6Re+cZ8JTmXf+/XqlqZouJ3kZg6+xwY3BLByrq8e7DRNeYo\nUmYEpaotVL3gGQf90AL5VE35TDfYRwoM3JRErx+BcF9G29x8cYlK3tTI5Wd4KSM=\n=4e42\n-----END PGP SIGNATURE-----\n", "payload": "tree fdaffd5d60ae60d9c97039078bd67ac29079b192\nparent e9b4a84dfa9b8d8eb92a2c324b5c5799dc7f3e05\nparent 149ab45eaddcf1678f87dca997d60ef2160627d7\nauthor Dylan DPC <99973273+Dylan-DPC@users.noreply.github.com> 1668180100 +0530\ncommitter GitHub <noreply@github.com> 1668180100 +0530\n\nRollup merge of #104169 - GuillaumeGomez:migrate-css-target, r=notriddle\n\nMigrate `:target` rules to use CSS variables\n\nThere should be no GUI changes.\n\nr? `@notriddle`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/eca27a2f949cc711e0989b8b01d75996fa6e8df9", "html_url": "https://github.com/rust-lang/rust/commit/eca27a2f949cc711e0989b8b01d75996fa6e8df9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/eca27a2f949cc711e0989b8b01d75996fa6e8df9/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e9b4a84dfa9b8d8eb92a2c324b5c5799dc7f3e05", "url": "https://api.github.com/repos/rust-lang/rust/commits/e9b4a84dfa9b8d8eb92a2c324b5c5799dc7f3e05", "html_url": "https://github.com/rust-lang/rust/commit/e9b4a84dfa9b8d8eb92a2c324b5c5799dc7f3e05"}, {"sha": "149ab45eaddcf1678f87dca997d60ef2160627d7", "url": "https://api.github.com/repos/rust-lang/rust/commits/149ab45eaddcf1678f87dca997d60ef2160627d7", "html_url": "https://github.com/rust-lang/rust/commit/149ab45eaddcf1678f87dca997d60ef2160627d7"}], "stats": {"total": 58, "additions": 43, "deletions": 15}, "files": [{"sha": "972ceb67e7648cc4d30c9aed6842d9b500a67a42", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/eca27a2f949cc711e0989b8b01d75996fa6e8df9/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/eca27a2f949cc711e0989b8b01d75996fa6e8df9/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=eca27a2f949cc711e0989b8b01d75996fa6e8df9", "patch": "@@ -1269,6 +1269,8 @@ h3.variant {\n \n :target {\n \tpadding-right: 3px;\n+\tbackground-color: var(--target-background-color);\n+\tborder-right: 3px solid var(--target-border-color);\n }\n \n .notable-traits-tooltip {"}, {"sha": "2fa1fa39d63ab9999fa99ee4b184742ec8aaf813", "filename": "src/librustdoc/html/static/css/themes/ayu.css", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/eca27a2f949cc711e0989b8b01d75996fa6e8df9/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "raw_url": "https://github.com/rust-lang/rust/raw/eca27a2f949cc711e0989b8b01d75996fa6e8df9/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css?ref=eca27a2f949cc711e0989b8b01d75996fa6e8df9", "patch": "@@ -63,6 +63,8 @@ Original by Dempfi (https://github.com/dempfi/ayu)\n \t--test-arrow-background-color: rgba(57, 175, 215, 0.09);\n \t--test-arrow-hover-color: #c5c5c5;\n \t--test-arrow-hover-background-color: rgba(57, 175, 215, 0.368);\n+\t--target-background-color: rgba(255, 236, 164, 0.06);\n+\t--target-border-color: rgba(255, 180, 76, 0.85);\n \t--rust-logo-filter: drop-shadow(1px 0 0px #fff)\n \t\tdrop-shadow(0 1px 0 #fff)\n \t\tdrop-shadow(-1px 0 0 #fff)\n@@ -168,11 +170,6 @@ details.rustdoc-toggle > summary::before {\n \tcolor: #788797;\n }\n \n-:target {\n-\tbackground: rgba(255, 236, 164, 0.06);\n-\tborder-right: 3px solid rgba(255, 180, 76, 0.85);\n-}\n-\n .search-failed a {\n \tcolor: #39AFD7;\n }"}, {"sha": "43f8dd42ab347ba37a9b37133f1ea1043542f033", "filename": "src/librustdoc/html/static/css/themes/dark.css", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/eca27a2f949cc711e0989b8b01d75996fa6e8df9/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "raw_url": "https://github.com/rust-lang/rust/raw/eca27a2f949cc711e0989b8b01d75996fa6e8df9/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css?ref=eca27a2f949cc711e0989b8b01d75996fa6e8df9", "patch": "@@ -58,6 +58,8 @@\n \t--test-arrow-background-color: rgba(78, 139, 202, 0.2);\n \t--test-arrow-hover-color: #dedede;\n \t--test-arrow-hover-background-color: #4e8bca;\n+\t--target-background-color: #494a3d;\n+\t--target-border-color: #bb7410;\n \t--rust-logo-filter: drop-shadow(1px 0 0px #fff)\n \t\tdrop-shadow(0 1px 0 #fff)\n \t\tdrop-shadow(-1px 0 0 #fff)\n@@ -90,11 +92,6 @@ details.rustdoc-toggle > summary::before {\n \tfilter: invert(100%);\n }\n \n-:target {\n-\tbackground-color: #494a3d;\n-\tborder-right: 3px solid #bb7410;\n-}\n-\n .search-failed a {\n \tcolor: #0089ff;\n }"}, {"sha": "c8c5289ab540c912a21de673e49c4792c7c9a73c", "filename": "src/librustdoc/html/static/css/themes/light.css", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/eca27a2f949cc711e0989b8b01d75996fa6e8df9/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "raw_url": "https://github.com/rust-lang/rust/raw/eca27a2f949cc711e0989b8b01d75996fa6e8df9/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css?ref=eca27a2f949cc711e0989b8b01d75996fa6e8df9", "patch": "@@ -58,6 +58,8 @@\n \t--test-arrow-background-color: rgba(78, 139, 202, 0.2);\n \t--test-arrow-hover-color: #f5f5f5;\n \t--test-arrow-hover-background-color: #4e8bca;\n+\t--target-background-color: #fdFfd3;\n+\t--target-border-color: #ad7c37;\n \t--rust-logo-filter: initial;\n \t/* match border-color; uses https://codepen.io/sosuke/pen/Pjoqqp */\n \t--crate-search-div-filter: invert(100%) sepia(0%) saturate(4223%) hue-rotate(289deg)\n@@ -83,11 +85,6 @@ body.source .example-wrap pre.rust a {\n \tbackground: #eee;\n }\n \n-:target {\n-\tbackground: #FDFFD3;\n-\tborder-right: 3px solid #AD7C37;\n-}\n-\n .search-failed a {\n \tcolor: #3873AD;\n }"}, {"sha": "3e5c30dc7eafe47f9546850b4737ad7d5cf7a757", "filename": "src/test/rustdoc-gui/target.goml", "status": "added", "additions": 35, "deletions": 0, "changes": 35, "blob_url": "https://github.com/rust-lang/rust/blob/eca27a2f949cc711e0989b8b01d75996fa6e8df9/src%2Ftest%2Frustdoc-gui%2Ftarget.goml", "raw_url": "https://github.com/rust-lang/rust/raw/eca27a2f949cc711e0989b8b01d75996fa6e8df9/src%2Ftest%2Frustdoc-gui%2Ftarget.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Ftarget.goml?ref=eca27a2f949cc711e0989b8b01d75996fa6e8df9", "patch": "@@ -0,0 +1,35 @@\n+// Check that the targetted element has the expected styles.\n+goto: \"file://\" + |DOC_PATH| + \"/lib2/struct.Foo.html#method.a_method\"\n+show-text: true\n+\n+// Confirming that the method is the target.\n+assert: \"#method\\.a_method:target\"\n+\n+define-function: (\n+    \"check-style\",\n+    (theme, background, border),\n+    [\n+        (\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n+        (\"reload\"),\n+        (\"assert-css\", (\"#method\\.a_method:target\", {\n+            \"background-color\": |background|,\n+            \"border-right\": \"3px solid \" + |border|,\n+        })),\n+    ],\n+)\n+\n+call-function: (\"check-style\", {\n+    \"theme\": \"ayu\",\n+    \"background\": \"rgba(255, 236, 164, 0.06)\",\n+    \"border\": \"rgba(255, 180, 76, 0.85)\",\n+})\n+call-function: (\"check-style\", {\n+    \"theme\": \"dark\",\n+    \"background\": \"rgb(73, 74, 61)\",\n+    \"border\": \"rgb(187, 116, 16)\",\n+})\n+call-function: (\"check-style\", {\n+    \"theme\": \"light\",\n+    \"background\": \"rgb(253, 255, 211)\",\n+    \"border\": \"rgb(173, 124, 55)\",\n+})"}]}