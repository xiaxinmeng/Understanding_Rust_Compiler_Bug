{"sha": "bb70d18a0a51a2321780e8eaa0262ec61a659b05", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJiNzBkMThhMGE1MWEyMzIxNzgwZThlYWEwMjYyZWM2MWE2NTliMDU=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2019-06-30T10:17:29Z"}, "committer": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2019-06-30T10:17:29Z"}, "message": "Merge #1458\n\n1458: Run VS Code tests on CI r=matklad a=etaoins\n\nThis is actually much faster than I expected; it takes about 13 seconds to download VS Code and run the unit tests. This means the VS Code tests are still significantly faster than the Rust ones.\r\n\r\nIf this ends up being unreliable we can always remove it later or move it to a separate optional job.\r\n\r\nWe also need to ignore the `.vscode-test` directory when running `prettier` or it will get upset about some temporary JSON files VS Code creates.\r\n\r\ncc @killercup \n\nCo-authored-by: Ryan Cumming <etaoins@gmail.com>", "tree": {"sha": "c6c41e4ddd75694bd057053fad31b43146328002", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c6c41e4ddd75694bd057053fad31b43146328002"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bb70d18a0a51a2321780e8eaa0262ec61a659b05", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bb70d18a0a51a2321780e8eaa0262ec61a659b05", "html_url": "https://github.com/rust-lang/rust/commit/bb70d18a0a51a2321780e8eaa0262ec61a659b05", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bb70d18a0a51a2321780e8eaa0262ec61a659b05/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "parents": [{"sha": "e18389d2684a8da9937fe37f9598fabf67c65fee", "url": "https://api.github.com/repos/rust-lang/rust/commits/e18389d2684a8da9937fe37f9598fabf67c65fee", "html_url": "https://github.com/rust-lang/rust/commit/e18389d2684a8da9937fe37f9598fabf67c65fee"}, {"sha": "60ba253753732080c90e97d2d34f43b71856a7c4", "url": "https://api.github.com/repos/rust-lang/rust/commits/60ba253753732080c90e97d2d34f43b71856a7c4", "html_url": "https://github.com/rust-lang/rust/commit/60ba253753732080c90e97d2d34f43b71856a7c4"}], "stats": {"total": 27, "additions": 21, "deletions": 6}, "files": [{"sha": "e5960ebca4ee12b70e7dc4cac1744e3fb1f07045", "filename": ".travis.yml", "status": "modified", "additions": 18, "deletions": 5, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/bb70d18a0a51a2321780e8eaa0262ec61a659b05/.travis.yml", "raw_url": "https://github.com/rust-lang/rust/raw/bb70d18a0a51a2321780e8eaa0262ec61a659b05/.travis.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.travis.yml?ref=bb70d18a0a51a2321780e8eaa0262ec61a659b05", "patch": "@@ -6,7 +6,8 @@ before_cache:\n \n matrix:\n     include:\n-        - os: linux\n+        - name: \"Rust Tests\"\n+          os: linux\n           dist: xenial\n           language: rust\n           rust: stable\n@@ -18,7 +19,8 @@ matrix:\n           env:\n               - RUSTFLAGS=\"-D warnings\", CARGO_INCREMENTAL=0\n \n-        - os: linux\n+        - name: \"Rust Docs\"\n+          os: linux\n           if: branch = master AND type = push\n           before_script:\n               - DEPLOY_DOCS=1\n@@ -29,11 +31,22 @@ matrix:\n           env:\n               - RUSTFLAGS=\"-D warnings\", CARGO_INCREMENTAL=0\n \n-        - language: node_js\n+        - name: \"VS Code Tests\"\n+          os: linux\n+          language: node_js\n+          dist: xenial\n           node_js: node\n-          before_script: false\n+          services:\n+            - xvfb\n+          before_install: cd editors/code\n+          install:\n+            - npm install\n+            - npm run vscode:prepublish\n           script:\n-              - cd editors/code && npm ci && npm run travis\n+            - npm ci\n+            - npm run travis\n+          env:\n+            - CXX=\"g++-4.9\", CC=\"gcc-4.9\"\n \n branches:\n     only:"}, {"sha": "3798f2d1f4789b49d03402ce4d26a4a3feeef0cc", "filename": "editors/code/.prettierignore", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bb70d18a0a51a2321780e8eaa0262ec61a659b05/editors%2Fcode%2F.prettierignore", "raw_url": "https://github.com/rust-lang/rust/raw/bb70d18a0a51a2321780e8eaa0262ec61a659b05/editors%2Fcode%2F.prettierignore", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2F.prettierignore?ref=bb70d18a0a51a2321780e8eaa0262ec61a659b05", "patch": "@@ -0,0 +1,2 @@\n+node_modules/\n+.vscode-test/"}, {"sha": "52972031d1fe99d9d4ac3613dc6393c9bf42c7b9", "filename": "editors/code/package.json", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bb70d18a0a51a2321780e8eaa0262ec61a659b05/editors%2Fcode%2Fpackage.json", "raw_url": "https://github.com/rust-lang/rust/raw/bb70d18a0a51a2321780e8eaa0262ec61a659b05/editors%2Fcode%2Fpackage.json", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fpackage.json?ref=bb70d18a0a51a2321780e8eaa0262ec61a659b05", "patch": "@@ -25,7 +25,7 @@\n         \"lint\": \"tslint --project .\",\n         \"test\": \"node node_modules/vscode/bin/test\",\n         \"prettier\": \"prettier **/*.{json,ts}\",\n-        \"travis\": \"npm run compile && npm run lint && npm run prettier -- --list-different\"\n+        \"travis\": \"npm run compile && npm run test && npm run lint && npm run prettier -- --list-different\"\n     },\n     \"prettier\": {\n         \"tabWidth\": 4,"}]}