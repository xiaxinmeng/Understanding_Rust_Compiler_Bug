{"sha": "6e81c9a921b975be7f2efb927dab4f3cfd505ebc", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZlODFjOWE5MjFiOTc1YmU3ZjJlZmI5MjdkYWI0ZjNjZmQ1MDVlYmM=", "commit": {"author": {"name": "Veetaha", "email": "veetaha2@gmail.com", "date": "2020-06-18T12:02:36Z"}, "committer": {"name": "Veetaha", "email": "veetaha2@gmail.com", "date": "2020-06-18T12:02:36Z"}, "message": "Flatten Task enum \u00af\\_(\u30c4)_/\u00af", "tree": {"sha": "7933d1a5988f5e62c759534d3251a1d39c090f89", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7933d1a5988f5e62c759534d3251a1d39c090f89"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6e81c9a921b975be7f2efb927dab4f3cfd505ebc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6e81c9a921b975be7f2efb927dab4f3cfd505ebc", "html_url": "https://github.com/rust-lang/rust/commit/6e81c9a921b975be7f2efb927dab4f3cfd505ebc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6e81c9a921b975be7f2efb927dab4f3cfd505ebc/comments", "author": {"login": "Veetaha", "id": 36276403, "node_id": "MDQ6VXNlcjM2Mjc2NDAz", "avatar_url": "https://avatars.githubusercontent.com/u/36276403?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veetaha", "html_url": "https://github.com/Veetaha", "followers_url": "https://api.github.com/users/Veetaha/followers", "following_url": "https://api.github.com/users/Veetaha/following{/other_user}", "gists_url": "https://api.github.com/users/Veetaha/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veetaha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veetaha/subscriptions", "organizations_url": "https://api.github.com/users/Veetaha/orgs", "repos_url": "https://api.github.com/users/Veetaha/repos", "events_url": "https://api.github.com/users/Veetaha/events{/privacy}", "received_events_url": "https://api.github.com/users/Veetaha/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Veetaha", "id": 36276403, "node_id": "MDQ6VXNlcjM2Mjc2NDAz", "avatar_url": "https://avatars.githubusercontent.com/u/36276403?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veetaha", "html_url": "https://github.com/Veetaha", "followers_url": "https://api.github.com/users/Veetaha/followers", "following_url": "https://api.github.com/users/Veetaha/following{/other_user}", "gists_url": "https://api.github.com/users/Veetaha/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veetaha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veetaha/subscriptions", "organizations_url": "https://api.github.com/users/Veetaha/orgs", "repos_url": "https://api.github.com/users/Veetaha/repos", "events_url": "https://api.github.com/users/Veetaha/events{/privacy}", "received_events_url": "https://api.github.com/users/Veetaha/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "76c1160ffa626fc5f07b309420e6666eb79a3311", "url": "https://api.github.com/repos/rust-lang/rust/commits/76c1160ffa626fc5f07b309420e6666eb79a3311", "html_url": "https://github.com/rust-lang/rust/commit/76c1160ffa626fc5f07b309420e6666eb79a3311"}], "stats": {"total": 12, "additions": 7, "deletions": 5}, "files": [{"sha": "7a81db3d916b26213d986a02dbed1fc7e5046c08", "filename": "crates/rust-analyzer/src/main_loop.rs", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/6e81c9a921b975be7f2efb927dab4f3cfd505ebc/crates%2Frust-analyzer%2Fsrc%2Fmain_loop.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6e81c9a921b975be7f2efb927dab4f3cfd505ebc/crates%2Frust-analyzer%2Fsrc%2Fmain_loop.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fmain_loop.rs?ref=6e81c9a921b975be7f2efb927dab4f3cfd505ebc", "patch": "@@ -243,7 +243,8 @@ pub fn main_loop(config: Config, connection: Connection) -> Result<()> {\n #[derive(Debug)]\n enum Task {\n     Respond(Response),\n-    SendMessage(Message),\n+    Notify(Notification),\n+    SendRequest(Request),\n     Diagnostic(DiagnosticTask),\n }\n \n@@ -275,7 +276,7 @@ impl fmt::Debug for Event {\n                     return debug_verbose_not(not, f);\n                 }\n             }\n-            Event::Task(Task::SendMessage(Message::Notification(not))) => {\n+            Event::Task(Task::Notify(not)) => {\n                 if notification_is::<lsp_types::notification::PublishDiagnostics>(not) {\n                     return debug_verbose_not(not, f);\n                 }\n@@ -463,7 +464,7 @@ fn on_progress_report(\n                 token: lsp_types::ProgressToken::String(token.to_string()),\n             },\n         );\n-        task_sender.send(Task::SendMessage(create_progress_req.into())).unwrap();\n+        task_sender.send(Task::SendRequest(create_progress_req.into())).unwrap();\n     };\n \n     let (token, progress) = match report {\n@@ -526,7 +527,7 @@ fn on_progress_report(\n         value: lsp_types::ProgressParamsValue::WorkDone(progress),\n     };\n     let not = notification_new::<lsp_types::notification::Progress>(params);\n-    task_sender.send(Task::SendMessage(not.into())).unwrap()\n+    task_sender.send(Task::Notify(not.into())).unwrap()\n }\n \n fn on_task(\n@@ -543,7 +544,8 @@ fn on_task(\n                 msg_sender.send(response.into()).unwrap();\n             }\n         }\n-        Task::SendMessage(msg) => msg_sender.send(msg).unwrap(),\n+        Task::Notify(not) => msg_sender.send(not.into()).unwrap(),\n+        Task::SendRequest(req) => msg_sender.send(req.into()).unwrap(),\n         Task::Diagnostic(task) => on_diagnostic_task(task, msg_sender, state),\n     }\n }"}]}