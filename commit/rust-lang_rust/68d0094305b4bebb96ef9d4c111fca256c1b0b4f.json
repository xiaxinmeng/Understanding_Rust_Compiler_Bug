{"sha": "68d0094305b4bebb96ef9d4c111fca256c1b0b4f", "node_id": "C_kwDOAAsO6NoAKDY4ZDAwOTQzMDViNGJlYmI5NmVmOWQ0YzExMWZjYTI1NmMxYjBiNGY", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-09-01T12:31:41Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-09-01T12:31:41Z"}, "message": "Add regression test for #101129", "tree": {"sha": "aaceeeaf5789850c82b212e196dc226fb6f06f2b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/aaceeeaf5789850c82b212e196dc226fb6f06f2b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/68d0094305b4bebb96ef9d4c111fca256c1b0b4f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/68d0094305b4bebb96ef9d4c111fca256c1b0b4f", "html_url": "https://github.com/rust-lang/rust/commit/68d0094305b4bebb96ef9d4c111fca256c1b0b4f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/68d0094305b4bebb96ef9d4c111fca256c1b0b4f/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fb14ad06fab41a4e5c1436749dea21b67105c069", "url": "https://api.github.com/repos/rust-lang/rust/commits/fb14ad06fab41a4e5c1436749dea21b67105c069", "html_url": "https://github.com/rust-lang/rust/commit/fb14ad06fab41a4e5c1436749dea21b67105c069"}], "stats": {"total": 24, "additions": 24, "deletions": 0}, "files": [{"sha": "4d73e0d829ad53bd1e14e124efa13a8c9bc11e76", "filename": "src/test/rustdoc/doc_auto_cfg_nested_impl.rs", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/68d0094305b4bebb96ef9d4c111fca256c1b0b4f/src%2Ftest%2Frustdoc%2Fdoc_auto_cfg_nested_impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/68d0094305b4bebb96ef9d4c111fca256c1b0b4f/src%2Ftest%2Frustdoc%2Fdoc_auto_cfg_nested_impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fdoc_auto_cfg_nested_impl.rs?ref=68d0094305b4bebb96ef9d4c111fca256c1b0b4f", "patch": "@@ -0,0 +1,24 @@\n+// Regression test for <https://github.com/rust-lang/rust/issues/101129>.\n+\n+#![feature(doc_auto_cfg)]\n+#![crate_type = \"lib\"]\n+#![crate_name = \"foo\"]\n+\n+pub struct S;\n+pub trait MyTrait1 {}\n+pub trait MyTrait2 {}\n+\n+// @has foo/struct.S.html\n+// @has - '//*[@id=\"impl-MyTrait1-for-S\"]//*[@class=\"stab portability\"]' \\\n+//        'Available on non-crate feature coolstuff only.'\n+#[cfg(not(feature = \"coolstuff\"))]\n+impl MyTrait1 for S {}\n+\n+#[cfg(not(feature = \"coolstuff\"))]\n+mod submod {\n+    use crate::{S, MyTrait2};\n+    // This impl should also have the `not(feature = \"coolstuff\")`.\n+    // @has - '//*[@id=\"impl-MyTrait2-for-S\"]//*[@class=\"stab portability\"]' \\\n+    //        'Available on non-crate feature coolstuff only.'\n+    impl MyTrait2 for S {}\n+}"}]}