{"sha": "77b307ff2025338879915a122610fe7413a783f2", "node_id": "C_kwDOAAsO6NoAKDc3YjMwN2ZmMjAyNTMzODg3OTkxNWExMjI2MTBmZTc0MTNhNzgzZjI", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2023-06-14T16:10:32Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-06-14T16:10:32Z"}, "message": "Rollup merge of #112613 - GuillaumeGomez:fix-gui-test-windows, r=notriddle\n\nFix rustdoc-gui tests on Windows\n\nThe browser-ui-test update contains fixes needed for backslash handling (they were not correctly escaped).\n\nSince we have a mix of slash and backslash in some tests, I replaced `DOC_FOLDER` variable backslashes with slashes.\n\nAnd finally it seemed like the unicode escaped wasn't much appreciated on Windows for some reason so I used the character directly.\n\ncc `@klensy`\nr? `@notriddle`", "tree": {"sha": "d331bf40be67978edc76f24dae05d6b49619e4e9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d331bf40be67978edc76f24dae05d6b49619e4e9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/77b307ff2025338879915a122610fe7413a783f2", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJkieZ4CRBK7hj4Ov3rIwAAUCAIABYiEK653MBC4b4DJF9q8lsA\nNSqRU3BrfR9guEq2Gnv++NSfGmyTPFhKqYHSG/AIfgV4G76w+/0Mgt7hrr0U9SPg\nj9MY/yxxHpaMfgtRv70GvabRq5UGOKkGJ2c8C271QyH7VMPZ5ZUnSc3oXSFloWVd\nX1Xc5qEC8hbMF2C+uFOeGjBAwu0PZ6qtiDugUnWv520BfS8/f7aY77yrjfeoxOxf\nepesPlOD834dqealdfhOBiEcgzEzd2hygAnEHMR3l6RyoJLLNnRKu85i/oA2xZWY\nHG1/PAhU7wrNe8jJ+/aoeQGHBqaJluw+dKrmhbjafcoAPIsDP6WQnRO9ELBg8gs=\n=Chjd\n-----END PGP SIGNATURE-----\n", "payload": "tree d331bf40be67978edc76f24dae05d6b49619e4e9\nparent 41d5aeccecd92d137bb04c68fbf2c8110d33dca6\nparent fced6383c2ff25be0d0c5eaa82aea8980cb540ca\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1686759032 +0200\ncommitter GitHub <noreply@github.com> 1686759032 +0200\n\nRollup merge of #112613 - GuillaumeGomez:fix-gui-test-windows, r=notriddle\n\nFix rustdoc-gui tests on Windows\n\nThe browser-ui-test update contains fixes needed for backslash handling (they were not correctly escaped).\n\nSince we have a mix of slash and backslash in some tests, I replaced `DOC_FOLDER` variable backslashes with slashes.\n\nAnd finally it seemed like the unicode escaped wasn't much appreciated on Windows for some reason so I used the character directly.\n\ncc `@klensy`\nr? `@notriddle`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/77b307ff2025338879915a122610fe7413a783f2", "html_url": "https://github.com/rust-lang/rust/commit/77b307ff2025338879915a122610fe7413a783f2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/77b307ff2025338879915a122610fe7413a783f2/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "41d5aeccecd92d137bb04c68fbf2c8110d33dca6", "url": "https://api.github.com/repos/rust-lang/rust/commits/41d5aeccecd92d137bb04c68fbf2c8110d33dca6", "html_url": "https://github.com/rust-lang/rust/commit/41d5aeccecd92d137bb04c68fbf2c8110d33dca6"}, {"sha": "fced6383c2ff25be0d0c5eaa82aea8980cb540ca", "url": "https://api.github.com/repos/rust-lang/rust/commits/fced6383c2ff25be0d0c5eaa82aea8980cb540ca", "html_url": "https://github.com/rust-lang/rust/commit/fced6383c2ff25be0d0c5eaa82aea8980cb540ca"}], "stats": {"total": 36, "additions": 18, "deletions": 18}, "files": [{"sha": "75aa0c2b2a275a4afb2b96cfe8819daa9f724ddf", "filename": "src/ci/docker/host-x86_64/x86_64-gnu-tools/browser-ui-test.version", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/77b307ff2025338879915a122610fe7413a783f2/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2Fbrowser-ui-test.version", "raw_url": "https://github.com/rust-lang/rust/raw/77b307ff2025338879915a122610fe7413a783f2/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2Fbrowser-ui-test.version", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2Fbrowser-ui-test.version?ref=77b307ff2025338879915a122610fe7413a783f2", "patch": "@@ -1 +1 @@\n-0.16.6\n\\ No newline at end of file\n+0.16.7\n\\ No newline at end of file"}, {"sha": "af1bc05ddb248f1dbccb6aa1fd7c9e0fcbcc298a", "filename": "src/tools/rustdoc-gui/tester.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/77b307ff2025338879915a122610fe7413a783f2/src%2Ftools%2Frustdoc-gui%2Ftester.js", "raw_url": "https://github.com/rust-lang/rust/raw/77b307ff2025338879915a122610fe7413a783f2/src%2Ftools%2Frustdoc-gui%2Ftester.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Frustdoc-gui%2Ftester.js?ref=77b307ff2025338879915a122610fe7413a783f2", "patch": "@@ -201,8 +201,8 @@ async function main(argv) {\n     try {\n         // This is more convenient that setting fields one by one.\n         const args = [\n-            \"--variable\", \"DOC_PATH\", opts[\"doc_folder\"], \"--enable-fail-on-js-error\",\n-            \"--allow-file-access-from-files\",\n+            \"--variable\", \"DOC_PATH\", opts[\"doc_folder\"].split(\"\\\\\").join(\"/\"),\n+            \"--enable-fail-on-js-error\", \"--allow-file-access-from-files\",\n         ];\n         if (opts[\"debug\"]) {\n             debug = true;"}, {"sha": "2c61ee5428b8605b2e7eb720bd6c7aa117e41ec2", "filename": "tests/rustdoc-gui/shortcuts.goml", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/77b307ff2025338879915a122610fe7413a783f2/tests%2Frustdoc-gui%2Fshortcuts.goml", "raw_url": "https://github.com/rust-lang/rust/raw/77b307ff2025338879915a122610fe7413a783f2/tests%2Frustdoc-gui%2Fshortcuts.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fshortcuts.goml?ref=77b307ff2025338879915a122610fe7413a783f2", "patch": "@@ -13,7 +13,7 @@ press-key: \"Escape\"\n assert-css: (\"#help-button .popover\", {\"display\": \"none\"})\n // Checking doc collapse and expand.\n // It should be displaying a \"-\":\n-assert-text: (\"#toggle-all-docs\", \"[\\u2212]\")\n+assert-text: (\"#toggle-all-docs\", \"[\u2212]\")\n press-key: \"-\"\n wait-for-text: (\"#toggle-all-docs\", \"[+]\")\n assert-attribute: (\"#toggle-all-docs\", {\"class\": \"will-expand\"})\n@@ -23,9 +23,9 @@ assert-text: (\"#toggle-all-docs\", \"[+]\")\n assert-attribute: (\"#toggle-all-docs\", {\"class\": \"will-expand\"})\n // Expanding now.\n press-key: \"+\"\n-wait-for-text: (\"#toggle-all-docs\", \"[\\u2212]\")\n+wait-for-text: (\"#toggle-all-docs\", \"[\u2212]\")\n assert-attribute: (\"#toggle-all-docs\", {\"class\": \"\"})\n // Pressing it again shouldn't do anything.\n press-key: \"+\"\n-assert-text: (\"#toggle-all-docs\", \"[\\u2212]\")\n+assert-text: (\"#toggle-all-docs\", \"[\u2212]\")\n assert-attribute: (\"#toggle-all-docs\", {\"class\": \"\"})"}, {"sha": "f8f73398d9b99294e88311b1dbb6be6d04cc0351", "filename": "tests/rustdoc-gui/source-code-page.goml", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/77b307ff2025338879915a122610fe7413a783f2/tests%2Frustdoc-gui%2Fsource-code-page.goml", "raw_url": "https://github.com/rust-lang/rust/raw/77b307ff2025338879915a122610fe7413a783f2/tests%2Frustdoc-gui%2Fsource-code-page.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fsource-code-page.goml?ref=77b307ff2025338879915a122610fe7413a783f2", "patch": "@@ -64,23 +64,23 @@ call-function: (\"check-colors\", {\n compare-elements-position: (\"//*[@id='1']\", \".rust > code > span\", (\"y\"))\n // Check the `href` property so that users can treat anchors as links.\n assert-property: (\".src-line-numbers > a:nth-child(1)\", {\n-    \"href\": \"file://\" + |DOC_PATH| + \"/src/test_docs/lib.rs.html#1\"\n-})\n+    \"href\": |DOC_PATH| + \"/src/test_docs/lib.rs.html#1\"\n+}, ENDS_WITH)\n assert-property: (\".src-line-numbers > a:nth-child(2)\", {\n-    \"href\": \"file://\" + |DOC_PATH| + \"/src/test_docs/lib.rs.html#2\"\n-})\n+    \"href\": |DOC_PATH| + \"/src/test_docs/lib.rs.html#2\"\n+}, ENDS_WITH)\n assert-property: (\".src-line-numbers > a:nth-child(3)\", {\n-    \"href\": \"file://\" + |DOC_PATH| + \"/src/test_docs/lib.rs.html#3\"\n-})\n+    \"href\": |DOC_PATH| + \"/src/test_docs/lib.rs.html#3\"\n+}, ENDS_WITH)\n assert-property: (\".src-line-numbers > a:nth-child(4)\", {\n-    \"href\": \"file://\" + |DOC_PATH| + \"/src/test_docs/lib.rs.html#4\"\n-})\n+    \"href\": |DOC_PATH| + \"/src/test_docs/lib.rs.html#4\"\n+}, ENDS_WITH)\n assert-property: (\".src-line-numbers > a:nth-child(5)\", {\n-    \"href\": \"file://\" + |DOC_PATH| + \"/src/test_docs/lib.rs.html#5\"\n-})\n+    \"href\": |DOC_PATH| + \"/src/test_docs/lib.rs.html#5\"\n+}, ENDS_WITH)\n assert-property: (\".src-line-numbers > a:nth-child(6)\", {\n-    \"href\": \"file://\" + |DOC_PATH| + \"/src/test_docs/lib.rs.html#6\"\n-})\n+    \"href\": |DOC_PATH| + \"/src/test_docs/lib.rs.html#6\"\n+}, ENDS_WITH)\n \n // Assert that the line numbers text is aligned to the right.\n assert-css: (\".src-line-numbers\", {\"text-align\": \"right\"})"}]}