{"sha": "cac0d71b6aad63955789ad37ce87c4dc9d5b34f9", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNhYzBkNzFiNmFhZDYzOTU1Nzg5YWQzN2NlODdjNGRjOWQ1YjM0Zjk=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2021-07-13T12:41:19Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2021-07-13T17:41:58Z"}, "message": "Add test for \"go to first\" feature", "tree": {"sha": "c4d621ce95d18d093d006aa246d195b058fe28f0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c4d621ce95d18d093d006aa246d195b058fe28f0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/cac0d71b6aad63955789ad37ce87c4dc9d5b34f9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/cac0d71b6aad63955789ad37ce87c4dc9d5b34f9", "html_url": "https://github.com/rust-lang/rust/commit/cac0d71b6aad63955789ad37ce87c4dc9d5b34f9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/cac0d71b6aad63955789ad37ce87c4dc9d5b34f9/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1f0db5e0a315a252946a9e52a76c73579da53dd0", "url": "https://api.github.com/repos/rust-lang/rust/commits/1f0db5e0a315a252946a9e52a76c73579da53dd0", "html_url": "https://github.com/rust-lang/rust/commit/1f0db5e0a315a252946a9e52a76c73579da53dd0"}], "stats": {"total": 20, "additions": 20, "deletions": 0}, "files": [{"sha": "5d709f6588118690f94664cba083098d2262cbea", "filename": "src/test/rustdoc-gui/search-result-go-to-first.goml", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/cac0d71b6aad63955789ad37ce87c4dc9d5b34f9/src%2Ftest%2Frustdoc-gui%2Fsearch-result-go-to-first.goml", "raw_url": "https://github.com/rust-lang/rust/raw/cac0d71b6aad63955789ad37ce87c4dc9d5b34f9/src%2Ftest%2Frustdoc-gui%2Fsearch-result-go-to-first.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsearch-result-go-to-first.goml?ref=cac0d71b6aad63955789ad37ce87c4dc9d5b34f9", "patch": "@@ -0,0 +1,20 @@\n+// This test ensures that the \"go_to_first\" feature is working as expected.\n+\n+// First, we check that the first page doesn't have the string we're looking for to ensure\n+// that the feature is changing page as expected.\n+goto: file://|DOC_PATH|/test_docs/index.html\n+assert-text-false: (\".fqn .in-band\", \"Struct test_docs::Foo\")\n+\n+// We now check that we land on the search result page if \"go_to_first\" isn't set.\n+goto: file://|DOC_PATH|/test_docs/index.html?search=struct%3AFoo\n+// Waiting for the search results to appear...\n+wait-for: \"#titles\"\n+assert-text-false: (\".fqn .in-band\", \"Struct test_docs::Foo\")\n+// Ensure that the search results are displayed, not the \"normal\" content.\n+assert-css: (\"#main\", {\"display\": \"none\"})\n+\n+// Now we can check that the feature is working as expected!\n+goto: file://|DOC_PATH|/test_docs/index.html?search=struct%3AFoo&go_to_first=true\n+// Waiting for the page to load...\n+wait-for: 500\n+assert-text: (\".fqn .in-band\", \"Struct test_docs::Foo\")"}]}