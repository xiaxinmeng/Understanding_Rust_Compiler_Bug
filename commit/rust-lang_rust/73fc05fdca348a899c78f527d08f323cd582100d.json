{"sha": "73fc05fdca348a899c78f527d08f323cd582100d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjczZmMwNWZkY2EzNDhhODk5Yzc4ZjUyN2QwOGYzMjNjZDU4MjEwMGQ=", "commit": {"author": {"name": "oxalica", "email": "oxalicc@pm.me", "date": "2021-03-15T17:24:21Z"}, "committer": {"name": "oxalica", "email": "oxalicc@pm.me", "date": "2021-03-15T17:24:21Z"}, "message": "Pretty print root module of extern crates", "tree": {"sha": "17956c67d649f1e7bfa0d67889fda542d47dcb78", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/17956c67d649f1e7bfa0d67889fda542d47dcb78"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/73fc05fdca348a899c78f527d08f323cd582100d", "comment_count": 0, "verification": {"verified": false, "reason": "unknown_key", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEXLDp5dXVcfV/VA/qztOS3gxIPQAFAmBPmEUACgkQztOS3gxI\nPQCIXw//ShuU7SOeyR/HuBsmZSLEqLRcZbiT5oGJm+f6sLTyhLB6pWTg1JT8nb5/\ne4D5jwfcYM+4Taqqly7hJpnel/j0w9+iBJHcixIu79j09DNDz1oBdyiOxEjMtmUK\nmAI+xV8/2YD5VtxdH9A1UM6PbgpKtJUxnWQcMUo2WdMwSgWb3tHsdxa7lWnzdUWW\nRARAQ1efiOAHsx4yTL+G8oe55A5b4OTupNwv0WD6ufdU0tQPgl+aIHkmUMA5qEFC\nsfubSMhaJ411FAmDH+zwpPkjBixesn+VXTJSzLrpq6NVKf20j1u9yIeFp6b7KHxV\nbzmdjgENs94w+ZhAZSQZJP3/LwwRtOtKVzHaUDHtuAlbhSBB7YOU99mRWN4F9lmX\ndqUO75BeC/kwlbHt10d+0/d76FKiyuUKVDykZel8m9WhztrFMI6/MWOZJ2UIhbG5\n/SSPiD857NOjxTYrpbzESheJ6ClrR86U/nT+8IlrysWiUt1Hlay+AvbJRpiGpTNU\nCQtVFOUS5mGHDdsmttXEctXFv3nEPkvgN+errJV4OdSDct3ky2QLPKl1gs+DR9S5\n9nDsySRUoV/h4huVxgn2Nq2oqIhtWuHX2lz/091JxQV1VnNkDSAekeCeD+nt7pX1\nRbFydIxiKeB74M+Uw2mfAGSofABMQ0aUNyytzQmcxlY+JkbB00Y=\n=AjLG\n-----END PGP SIGNATURE-----", "payload": "tree 17956c67d649f1e7bfa0d67889fda542d47dcb78\nparent 7c855c940a5fdb5c942ddb3d3401c6e2dbbfca67\nauthor oxalica <oxalicc@pm.me> 1615829061 +0800\ncommitter oxalica <oxalicc@pm.me> 1615829061 +0800\n\nPretty print root module of extern crates\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/73fc05fdca348a899c78f527d08f323cd582100d", "html_url": "https://github.com/rust-lang/rust/commit/73fc05fdca348a899c78f527d08f323cd582100d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/73fc05fdca348a899c78f527d08f323cd582100d/comments", "author": {"login": "oxalica", "id": 14816024, "node_id": "MDQ6VXNlcjE0ODE2MDI0", "avatar_url": "https://avatars.githubusercontent.com/u/14816024?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oxalica", "html_url": "https://github.com/oxalica", "followers_url": "https://api.github.com/users/oxalica/followers", "following_url": "https://api.github.com/users/oxalica/following{/other_user}", "gists_url": "https://api.github.com/users/oxalica/gists{/gist_id}", "starred_url": "https://api.github.com/users/oxalica/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oxalica/subscriptions", "organizations_url": "https://api.github.com/users/oxalica/orgs", "repos_url": "https://api.github.com/users/oxalica/repos", "events_url": "https://api.github.com/users/oxalica/events{/privacy}", "received_events_url": "https://api.github.com/users/oxalica/received_events", "type": "User", "site_admin": false}, "committer": {"login": "oxalica", "id": 14816024, "node_id": "MDQ6VXNlcjE0ODE2MDI0", "avatar_url": "https://avatars.githubusercontent.com/u/14816024?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oxalica", "html_url": "https://github.com/oxalica", "followers_url": "https://api.github.com/users/oxalica/followers", "following_url": "https://api.github.com/users/oxalica/following{/other_user}", "gists_url": "https://api.github.com/users/oxalica/gists{/gist_id}", "starred_url": "https://api.github.com/users/oxalica/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oxalica/subscriptions", "organizations_url": "https://api.github.com/users/oxalica/orgs", "repos_url": "https://api.github.com/users/oxalica/repos", "events_url": "https://api.github.com/users/oxalica/events{/privacy}", "received_events_url": "https://api.github.com/users/oxalica/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7c855c940a5fdb5c942ddb3d3401c6e2dbbfca67", "url": "https://api.github.com/repos/rust-lang/rust/commits/7c855c940a5fdb5c942ddb3d3401c6e2dbbfca67", "html_url": "https://github.com/rust-lang/rust/commit/7c855c940a5fdb5c942ddb3d3401c6e2dbbfca67"}], "stats": {"total": 4, "additions": 4, "deletions": 0}, "files": [{"sha": "44cdcc296384df00668dec23be2ab167c93b75be", "filename": "crates/hir/src/display.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/73fc05fdca348a899c78f527d08f323cd582100d/crates%2Fhir%2Fsrc%2Fdisplay.rs", "raw_url": "https://github.com/rust-lang/rust/raw/73fc05fdca348a899c78f527d08f323cd582100d/crates%2Fhir%2Fsrc%2Fdisplay.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir%2Fsrc%2Fdisplay.rs?ref=73fc05fdca348a899c78f527d08f323cd582100d", "patch": "@@ -431,6 +431,10 @@ impl HirDisplay for Module {\n         // FIXME: Module doesn't have visibility saved in data.\n         match self.name(f.db) {\n             Some(name) => write!(f, \"mod {}\", name),\n+            None if self.crate_root(f.db) == *self => match self.krate().display_name(f.db) {\n+                Some(name) => write!(f, \"extern crate {}\", name),\n+                None => write!(f, \"extern crate {{unknown}}\"),\n+            },\n             None => write!(f, \"mod {{unnamed}}\"),\n         }\n     }"}]}