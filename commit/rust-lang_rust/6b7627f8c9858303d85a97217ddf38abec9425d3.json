{"sha": "6b7627f8c9858303d85a97217ddf38abec9425d3", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZiNzYyN2Y4Yzk4NTgzMDNkODVhOTcyMTdkZGYzOGFiZWM5NDI1ZDM=", "commit": {"author": {"name": "Matt Brubeck", "email": "mbrubeck@limpet.net", "date": "2018-03-30T16:48:18Z"}, "committer": {"name": "Matt Brubeck", "email": "mbrubeck@limpet.net", "date": "2018-03-30T17:20:58Z"}, "message": "Rename fs::read_string to read_to_string and stabilize", "tree": {"sha": "e2af2ebad06a0d87aad9a0e49e7d1e6107e24ecd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e2af2ebad06a0d87aad9a0e49e7d1e6107e24ecd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6b7627f8c9858303d85a97217ddf38abec9425d3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6b7627f8c9858303d85a97217ddf38abec9425d3", "html_url": "https://github.com/rust-lang/rust/commit/6b7627f8c9858303d85a97217ddf38abec9425d3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6b7627f8c9858303d85a97217ddf38abec9425d3/comments", "author": {"login": "mbrubeck", "id": 5920, "node_id": "MDQ6VXNlcjU5MjA=", "avatar_url": "https://avatars.githubusercontent.com/u/5920?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mbrubeck", "html_url": "https://github.com/mbrubeck", "followers_url": "https://api.github.com/users/mbrubeck/followers", "following_url": "https://api.github.com/users/mbrubeck/following{/other_user}", "gists_url": "https://api.github.com/users/mbrubeck/gists{/gist_id}", "starred_url": "https://api.github.com/users/mbrubeck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mbrubeck/subscriptions", "organizations_url": "https://api.github.com/users/mbrubeck/orgs", "repos_url": "https://api.github.com/users/mbrubeck/repos", "events_url": "https://api.github.com/users/mbrubeck/events{/privacy}", "received_events_url": "https://api.github.com/users/mbrubeck/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mbrubeck", "id": 5920, "node_id": "MDQ6VXNlcjU5MjA=", "avatar_url": "https://avatars.githubusercontent.com/u/5920?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mbrubeck", "html_url": "https://github.com/mbrubeck", "followers_url": "https://api.github.com/users/mbrubeck/followers", "following_url": "https://api.github.com/users/mbrubeck/following{/other_user}", "gists_url": "https://api.github.com/users/mbrubeck/gists{/gist_id}", "starred_url": "https://api.github.com/users/mbrubeck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mbrubeck/subscriptions", "organizations_url": "https://api.github.com/users/mbrubeck/orgs", "repos_url": "https://api.github.com/users/mbrubeck/repos", "events_url": "https://api.github.com/users/mbrubeck/events{/privacy}", "received_events_url": "https://api.github.com/users/mbrubeck/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4379c86fe752d0e2eb969646d5a18014ac969a26", "url": "https://api.github.com/repos/rust-lang/rust/commits/4379c86fe752d0e2eb969646d5a18014ac969a26", "html_url": "https://github.com/rust-lang/rust/commit/4379c86fe752d0e2eb969646d5a18014ac969a26"}], "stats": {"total": 15, "additions": 8, "deletions": 7}, "files": [{"sha": "6b896a889e3003112b33eee21e6ad1ee32afb9c7", "filename": "src/librustc/util/common.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/6b7627f8c9858303d85a97217ddf38abec9425d3/src%2Flibrustc%2Futil%2Fcommon.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6b7627f8c9858303d85a97217ddf38abec9425d3/src%2Flibrustc%2Futil%2Fcommon.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Futil%2Fcommon.rs?ref=6b7627f8c9858303d85a97217ddf38abec9425d3", "patch": "@@ -244,7 +244,8 @@ fn get_resident() -> Option<usize> {\n     use std::fs;\n \n     let field = 1;\n-    let contents = fs::read_string(\"/proc/self/statm\").ok()?;\n+    let contents = fs::read(\"/proc/self/statm\").ok()?;\n+    let contents = String::from_utf8(contents).ok()?;\n     let s = contents.split_whitespace().nth(field)?;\n     let npages = s.parse::<usize>().ok()?;\n     Some(npages * 4096)"}, {"sha": "d915bab7919c7ab6e09cf73d88739dd8f06b11d2", "filename": "src/librustdoc/html/render.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6b7627f8c9858303d85a97217ddf38abec9425d3/src%2Flibrustdoc%2Fhtml%2Frender.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6b7627f8c9858303d85a97217ddf38abec9425d3/src%2Flibrustdoc%2Fhtml%2Frender.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender.rs?ref=6b7627f8c9858303d85a97217ddf38abec9425d3", "patch": "@@ -1067,7 +1067,7 @@ impl<'a> SourceCollector<'a> {\n             return Ok(());\n         }\n \n-        let contents = fs::read_string(&p)?;\n+        let contents = fs::read_to_string(&p)?;\n \n         // Remove the utf-8 BOM if any\n         let contents = if contents.starts_with(\"\\u{feff}\") {"}, {"sha": "3d8680cda9ff4f087ec3da692b77998ca846116c", "filename": "src/libstd/fs.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/6b7627f8c9858303d85a97217ddf38abec9425d3/src%2Flibstd%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6b7627f8c9858303d85a97217ddf38abec9425d3/src%2Flibstd%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Ffs.rs?ref=6b7627f8c9858303d85a97217ddf38abec9425d3", "patch": "@@ -297,12 +297,12 @@ pub fn read<P: AsRef<Path>>(path: P) -> io::Result<Vec<u8>> {\n /// use std::net::SocketAddr;\n ///\n /// fn main() -> Result<(), Box<std::error::Error + 'static>> {\n-///     let foo: SocketAddr = fs::read_string(\"address.txt\")?.parse()?;\n+///     let foo: SocketAddr = fs::read_to_string(\"address.txt\")?.parse()?;\n ///     Ok(())\n /// }\n /// ```\n-#[unstable(feature = \"fs_read_write\", issue = \"46588\")]\n-pub fn read_string<P: AsRef<Path>>(path: P) -> io::Result<String> {\n+#[stable(feature = \"fs_read_write\", since = \"1.26.0\")]\n+pub fn read_to_string<P: AsRef<Path>>(path: P) -> io::Result<String> {\n     let mut file = File::open(path)?;\n     let mut string = String::with_capacity(initial_buffer_size(&file));\n     file.read_to_string(&mut string)?;\n@@ -3122,12 +3122,12 @@ mod tests {\n         assert!(v == &bytes[..]);\n \n         check!(fs::write(&tmpdir.join(\"not-utf8\"), &[0xFF]));\n-        error_contains!(fs::read_string(&tmpdir.join(\"not-utf8\")),\n+        error_contains!(fs::read_to_string(&tmpdir.join(\"not-utf8\")),\n                         \"stream did not contain valid UTF-8\");\n \n         let s = \"\ud800\udc41\ud800\udc13\ud800\udc20\ud800\udc34\ud800\udc0d\";\n         check!(fs::write(&tmpdir.join(\"utf8\"), s.as_bytes()));\n-        let string = check!(fs::read_string(&tmpdir.join(\"utf8\")));\n+        let string = check!(fs::read_to_string(&tmpdir.join(\"utf8\")));\n         assert_eq!(string, s);\n     }\n "}]}