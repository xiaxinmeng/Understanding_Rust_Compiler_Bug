{"sha": "654f68dd50b72d1d812b0760f1b71d7c366f6f55", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY1NGY2OGRkNTBiNzJkMWQ4MTJiMDc2MGYxYjcxZDdjMzY2ZjZmNTU=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2016-02-01T04:52:12Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2016-02-01T04:52:12Z"}, "message": "Auto merge of #30866 - jseyfried:fix_shadowed_use_visibility, r=nrc\n\nThis reverts PR #30324, fixing bug #30159 in which a public a glob import makes public any preceding imports that share a name with an item in the module being glob imported from.\n\nFor example,\n```rust\npub fn f() {}\npub mod foo {\n    fn f() {}\n}\n\nmod bar {\n    use f;\n    use f as g;\n    pub use foo::*; // This makes the first import public but does not affect the second import.\n}\n```\n\nThis is a [breaking-change].", "tree": {"sha": "d07cc489e252e70593b48ff64f511443ec7e8209", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d07cc489e252e70593b48ff64f511443ec7e8209"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/654f68dd50b72d1d812b0760f1b71d7c366f6f55", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/654f68dd50b72d1d812b0760f1b71d7c366f6f55", "html_url": "https://github.com/rust-lang/rust/commit/654f68dd50b72d1d812b0760f1b71d7c366f6f55", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/654f68dd50b72d1d812b0760f1b71d7c366f6f55/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "094c5b0d61a0fb19a1cb94dddd6f59a975089b4b", "url": "https://api.github.com/repos/rust-lang/rust/commits/094c5b0d61a0fb19a1cb94dddd6f59a975089b4b", "html_url": "https://github.com/rust-lang/rust/commit/094c5b0d61a0fb19a1cb94dddd6f59a975089b4b"}, {"sha": "7a69ee0c4806d30bbda5cc0277f3d0f38c3266c8", "url": "https://api.github.com/repos/rust-lang/rust/commits/7a69ee0c4806d30bbda5cc0277f3d0f38c3266c8", "html_url": "https://github.com/rust-lang/rust/commit/7a69ee0c4806d30bbda5cc0277f3d0f38c3266c8"}], "stats": {"total": 7, "additions": 4, "deletions": 3}, "files": [{"sha": "50537a6b936e96b0e7948b8bbadd6631c261987c", "filename": "src/librustc_resolve/resolve_imports.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/654f68dd50b72d1d812b0760f1b71d7c366f6f55/src%2Flibrustc_resolve%2Fresolve_imports.rs", "raw_url": "https://github.com/rust-lang/rust/raw/654f68dd50b72d1d812b0760f1b71d7c366f6f55/src%2Flibrustc_resolve%2Fresolve_imports.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Fresolve_imports.rs?ref=654f68dd50b72d1d812b0760f1b71d7c366f6f55", "patch": "@@ -798,9 +798,6 @@ impl<'a, 'b:'a, 'tcx:'b> ImportResolver<'a, 'b, 'tcx> {\n                 dest_import_resolution.is_public = is_public;\n                 self.add_export(module_, name, &dest_import_resolution);\n             }\n-        } else {\n-            // FIXME #30159: This is required for backwards compatability.\n-            dest_import_resolution.is_public |= is_public;\n         }\n \n         self.check_for_conflicts_between_imports_and_items(module_,"}, {"sha": "1bf7f3933849de76ba2307357ba574ebc776b90c", "filename": "src/test/compile-fail/shadowed-use-visibility.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/654f68dd50b72d1d812b0760f1b71d7c366f6f55/src%2Ftest%2Fcompile-fail%2Fshadowed-use-visibility.rs", "raw_url": "https://github.com/rust-lang/rust/raw/654f68dd50b72d1d812b0760f1b71d7c366f6f55/src%2Ftest%2Fcompile-fail%2Fshadowed-use-visibility.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fshadowed-use-visibility.rs?ref=654f68dd50b72d1d812b0760f1b71d7c366f6f55", "patch": "@@ -17,6 +17,10 @@ mod foo {\n \n mod bar {\n     use foo::bar::f as g; //~ ERROR unresolved import\n+\n+    use foo as f;\n+    pub use foo::*;\n }\n \n+use bar::f::f; //~ ERROR unresolved import\n fn main() {}"}]}