{"sha": "72ee6af4d4e4d16a81e3f518f9c75f513a9a7dea", "node_id": "MDY6Q29tbWl0NzI0NzEyOjcyZWU2YWY0ZDRlNGQxNmE4MWUzZjUxOGY5Yzc1ZjUxM2E5YTdkZWE=", "commit": {"author": {"name": "John Clements", "email": "clements@racket-lang.org", "date": "2013-09-05T21:14:31Z"}, "committer": {"name": "John Clements", "email": "clements@racket-lang.org", "date": "2013-09-06T20:35:06Z"}, "message": "compare macro tokens hygienically (commented out)", "tree": {"sha": "f3511f227d1918b82abc721f8bb8598199361f1c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f3511f227d1918b82abc721f8bb8598199361f1c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/72ee6af4d4e4d16a81e3f518f9c75f513a9a7dea", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/72ee6af4d4e4d16a81e3f518f9c75f513a9a7dea", "html_url": "https://github.com/rust-lang/rust/commit/72ee6af4d4e4d16a81e3f518f9c75f513a9a7dea", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/72ee6af4d4e4d16a81e3f518f9c75f513a9a7dea/comments", "author": {"login": "jbclements", "id": 226617, "node_id": "MDQ6VXNlcjIyNjYxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/226617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbclements", "html_url": "https://github.com/jbclements", "followers_url": "https://api.github.com/users/jbclements/followers", "following_url": "https://api.github.com/users/jbclements/following{/other_user}", "gists_url": "https://api.github.com/users/jbclements/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbclements/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbclements/subscriptions", "organizations_url": "https://api.github.com/users/jbclements/orgs", "repos_url": "https://api.github.com/users/jbclements/repos", "events_url": "https://api.github.com/users/jbclements/events{/privacy}", "received_events_url": "https://api.github.com/users/jbclements/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jbclements", "id": 226617, "node_id": "MDQ6VXNlcjIyNjYxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/226617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbclements", "html_url": "https://github.com/jbclements", "followers_url": "https://api.github.com/users/jbclements/followers", "following_url": "https://api.github.com/users/jbclements/following{/other_user}", "gists_url": "https://api.github.com/users/jbclements/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbclements/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbclements/subscriptions", "organizations_url": "https://api.github.com/users/jbclements/orgs", "repos_url": "https://api.github.com/users/jbclements/repos", "events_url": "https://api.github.com/users/jbclements/events{/privacy}", "received_events_url": "https://api.github.com/users/jbclements/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9ec1623d57f48b02ca1c96930f5ee6fdc7d2c609", "url": "https://api.github.com/repos/rust-lang/rust/commits/9ec1623d57f48b02ca1c96930f5ee6fdc7d2c609", "html_url": "https://github.com/rust-lang/rust/commit/9ec1623d57f48b02ca1c96930f5ee6fdc7d2c609"}], "stats": {"total": 21, "additions": 19, "deletions": 2}, "files": [{"sha": "f859a656d1f0fbe46782465bd2276fbfbb27b4eb", "filename": "src/libsyntax/ext/tt/macro_parser.rs", "status": "modified", "additions": 15, "deletions": 1, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/72ee6af4d4e4d16a81e3f518f9c75f513a9a7dea/src%2Flibsyntax%2Fext%2Ftt%2Fmacro_parser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/72ee6af4d4e4d16a81e3f518f9c75f513a9a7dea/src%2Flibsyntax%2Fext%2Ftt%2Fmacro_parser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Ftt%2Fmacro_parser.rs?ref=72ee6af4d4e4d16a81e3f518f9c75f513a9a7dea", "patch": "@@ -234,6 +234,19 @@ pub fn parse_or_else(\n     }\n }\n \n+// temporary for testing\n+pub fn token_name_eq(t1 : &Token, t2 : &Token) -> bool {\n+    if (*t1 == *t2) {\n+        true\n+    } else {\n+        match (t1,t2) {\n+            (&token::IDENT(id1,_),&token::IDENT(id2,_)) =>\n+            id1.name == id2.name,\n+            _ => false\n+        }\n+    }\n+}\n+\n pub fn parse(\n     sess: @mut ParseSess,\n     cfg: ast::CrateConfig,\n@@ -343,7 +356,8 @@ pub fn parse(\n                   match_nonterminal(_,_,_) => { bb_eis.push(ei) }\n                   match_tok(ref t) => {\n                     let mut ei_t = ei.clone();\n-                    if (*t) == tok {\n+                    if (token_name_eq(t,&tok)) {\n+                    //if (token::mtwt_token_eq(t,&tok)) {\n                         ei_t.idx += 1;\n                         next_eis.push(ei_t);\n                     }"}, {"sha": "62abe3850c9d8d98d35c13fdb400f190d802edec", "filename": "src/libsyntax/parse/parser.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/72ee6af4d4e4d16a81e3f518f9c75f513a9a7dea/src%2Flibsyntax%2Fparse%2Fparser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/72ee6af4d4e4d16a81e3f518f9c75f513a9a7dea/src%2Flibsyntax%2Fparse%2Fparser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fparser.rs?ref=72ee6af4d4e4d16a81e3f518f9c75f513a9a7dea", "patch": "@@ -3518,7 +3518,10 @@ impl Parser {\n     }\n \n     fn is_self_ident(&self) -> bool {\n-        *self.token == token::IDENT(special_idents::self_, false)\n+        match *self.token {\n+          token::IDENT(id, false) => id.name == special_idents::self_.name,\n+          _ => false\n+        }\n     }\n \n     fn expect_self_ident(&self) {"}]}