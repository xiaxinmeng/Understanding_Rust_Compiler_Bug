{"sha": "f1129635ee5fc595c3638626884e49e6dd9356d9", "node_id": "MDY6Q29tbWl0NzI0NzEyOmYxMTI5NjM1ZWU1ZmM1OTVjMzYzODYyNjg4NGU0OWU2ZGQ5MzU2ZDk=", "commit": {"author": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2012-05-03T04:14:26Z"}, "committer": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2012-05-03T04:47:14Z"}, "message": "report ambig impl methods", "tree": {"sha": "56b7c6a72f59b5ad991afba1ec00c72b072c43d2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/56b7c6a72f59b5ad991afba1ec00c72b072c43d2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f1129635ee5fc595c3638626884e49e6dd9356d9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f1129635ee5fc595c3638626884e49e6dd9356d9", "html_url": "https://github.com/rust-lang/rust/commit/f1129635ee5fc595c3638626884e49e6dd9356d9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f1129635ee5fc595c3638626884e49e6dd9356d9/comments", "author": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f4cc5ff226177009cbb7f9d0a9a9bf4264857500", "url": "https://api.github.com/repos/rust-lang/rust/commits/f4cc5ff226177009cbb7f9d0a9a9bf4264857500", "html_url": "https://github.com/rust-lang/rust/commit/f4cc5ff226177009cbb7f9d0a9a9bf4264857500"}], "stats": {"total": 30, "additions": 30, "deletions": 0}, "files": [{"sha": "41ddedcb5266c4e7fa066b5854c13f3aadf447af", "filename": "src/rustc/middle/typeck.rs", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/f1129635ee5fc595c3638626884e49e6dd9356d9/src%2Frustc%2Fmiddle%2Ftypeck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f1129635ee5fc595c3638626884e49e6dd9356d9/src%2Frustc%2Fmiddle%2Ftypeck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fmiddle%2Ftypeck.rs?ref=f1129635ee5fc595c3638626884e49e6dd9356d9", "patch": "@@ -2738,6 +2738,25 @@ impl methods for lookup {\n                     self.tcx().sess.span_err(\n                         self.expr.span,\n                         \"multiple applicable methods in scope\");\n+\n+                    // I would like to print out how each impl was imported,\n+                    // but I cannot for the life of me figure out how to\n+                    // annotate resolve to preserve this information.\n+                    for results.eachi { |i, result|\n+                        let (_, _, did) = result;\n+                        let span = if did.crate == ast::local_crate {\n+                            alt check self.tcx().items.get(did.node) {\n+                              ast_map::node_method(m, _, _) { m.span }\n+                            }\n+                        } else {\n+                            self.expr.span\n+                        };\n+                        self.tcx().sess.span_note(\n+                            span,\n+                            #fmt[\"candidate #%u is %s\",\n+                                 (i+1u),\n+                                 ty::item_path_str(self.tcx(), did)]);\n+                    }\n                 }\n \n                 let (self_substs, n_tps, did) = results[0];"}, {"sha": "2ea30d4e078cf7878b69734ba2c5edf459f97dc7", "filename": "src/test/auxiliary/ambig_impl_2_lib.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/f1129635ee5fc595c3638626884e49e6dd9356d9/src%2Ftest%2Fauxiliary%2Fambig_impl_2_lib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f1129635ee5fc595c3638626884e49e6dd9356d9/src%2Ftest%2Fauxiliary%2Fambig_impl_2_lib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fauxiliary%2Fambig_impl_2_lib.rs?ref=f1129635ee5fc595c3638626884e49e6dd9356d9", "patch": "@@ -0,0 +1 @@\n+impl methods1 for uint { fn me() -> uint { self } }"}, {"sha": "434cdf31002ead463434095f1a9b8ac18e107514", "filename": "src/test/compile-fail/ambig_impl_1.rs", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/f1129635ee5fc595c3638626884e49e6dd9356d9/src%2Ftest%2Fcompile-fail%2Fambig_impl_1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f1129635ee5fc595c3638626884e49e6dd9356d9/src%2Ftest%2Fcompile-fail%2Fambig_impl_1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fambig_impl_1.rs?ref=f1129635ee5fc595c3638626884e49e6dd9356d9", "patch": "@@ -0,0 +1,3 @@\n+impl methods1 for uint { fn me() -> uint { self } } //! NOTE candidate #1 is methods1::me\n+impl methods2 for uint { fn me() -> uint { self } } //! NOTE candidate #2 is methods2::me\n+fn main() { 1u.me(); } //! ERROR multiple applicable methods in scope"}, {"sha": "49c1fdc2f1df85488fb240369785c8d2735bd80e", "filename": "src/test/compile-fail/ambig_impl_2_exe.rs", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/f1129635ee5fc595c3638626884e49e6dd9356d9/src%2Ftest%2Fcompile-fail%2Fambig_impl_2_exe.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f1129635ee5fc595c3638626884e49e6dd9356d9/src%2Ftest%2Fcompile-fail%2Fambig_impl_2_exe.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fambig_impl_2_exe.rs?ref=f1129635ee5fc595c3638626884e49e6dd9356d9", "patch": "@@ -0,0 +1,7 @@\n+// xfail-fast aux-build\n+// aux-build:ambig_impl_2_lib.rs\n+use ambig_impl_2_lib;\n+import ambig_impl_2_lib::methods1;\n+impl methods2 for uint { fn me() -> uint { self } } //! NOTE candidate #2 is methods2::me\n+fn main() { 1u.me(); } //! ERROR multiple applicable methods in scope\n+//!^ NOTE candidate #1 is ambig_impl_2_lib::methods1::me"}]}