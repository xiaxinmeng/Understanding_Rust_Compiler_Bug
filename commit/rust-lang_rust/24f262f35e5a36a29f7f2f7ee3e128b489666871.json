{"sha": "24f262f35e5a36a29f7f2f7ee3e128b489666871", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI0ZjI2MmYzNWU1YTM2YTI5ZjdmMmY3ZWUzZTEyOGI0ODk2NjY4NzE=", "commit": {"author": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2019-05-22T16:10:05Z"}, "committer": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2019-05-22T16:10:44Z"}, "message": "ci: toggle builders", "tree": {"sha": "a22ca85a413d76f71ec0bea3d9da92145a174b15", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a22ca85a413d76f71ec0bea3d9da92145a174b15"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/24f262f35e5a36a29f7f2f7ee3e128b489666871", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE1JbYPtLJAsc22U9xPgar6Auq8ZwFAlzldIcACgkQPgar6Auq\n8ZwWOhAAsLB1Mlbpn6hAK0p1LsAhyOmQAPhtx0dcasrQ7+0pSsf6PjDEyJfUtUM+\npanxRvp/I9GlB/1NQeJuQD6flABXpkGNm0eNht7v7p8VQs78tdUJM8ndVwdJsvC3\nvNZD5wifjrIgFM1qLjDjtHfbYvzbVXs7ShuEo0Uuzi41kbVl6l4zZDwJ8NPMKDmC\nenr9922IaP3mO1Gr6DDPpkIqHxXIWRHUglhtuvNUOfPKtuyX1/iUTiBiSkdpMvr7\nAr5Akd9d5P/kFhzbIANUIiBwGdfEKoQIXUna1iTKW66swNKakw5dv7AnQWObce7t\nd8cz9WMD3okJrJ3YCLWxg27v4neuYlDiz9K039f9tocz9CGbRGzACLV7biX7BR//\nyE0BLsKD/OtThclsd3hEXU4o0z3XMcO+03pUKr4tA1OoJc+3XaxhBoAOOt00nIY4\ndU0sfKeL8U5fRxElncBe6giTUjYn6J3ypMD3Wfg8DoQOb02VWRrRVc4TKdBttrzl\nO9scV+1HWYurcnLm1H1+xhoIoqsEiJamP8+toALvSWZHDqjlYQ0gtnycUEn9wudH\n95Qr06QTlk0OCRgE0v13GALh/6ucRdx63MdUTi0QNXj/H1jRmw3eFSjDnB10xukw\nE79lGSPNfviodHvbYwn/6IvsHTzm+LFPwbsINofyCVsF2DZnNn8=\n=ncvs\n-----END PGP SIGNATURE-----", "payload": "tree a22ca85a413d76f71ec0bea3d9da92145a174b15\nparent a8ac80b7bcb46d199c196ec0313ca7fd70aee857\nauthor Pietro Albini <pietro@pietroalbini.org> 1558541405 +0200\ncommitter Pietro Albini <pietro@pietroalbini.org> 1558541444 +0200\n\nci: toggle builders\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/24f262f35e5a36a29f7f2f7ee3e128b489666871", "html_url": "https://github.com/rust-lang/rust/commit/24f262f35e5a36a29f7f2f7ee3e128b489666871", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/24f262f35e5a36a29f7f2f7ee3e128b489666871/comments", "author": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a8ac80b7bcb46d199c196ec0313ca7fd70aee857", "url": "https://api.github.com/repos/rust-lang/rust/commits/a8ac80b7bcb46d199c196ec0313ca7fd70aee857", "html_url": "https://github.com/rust-lang/rust/commit/a8ac80b7bcb46d199c196ec0313ca7fd70aee857"}], "stats": {"total": 783, "additions": 259, "deletions": 524}, "files": [{"sha": "800cbb5a3aee1939db8e5db7969d7bc093f925a6", "filename": ".azure-pipelines/auto.yml", "status": "modified", "additions": 258, "deletions": 258, "changes": 516, "blob_url": "https://github.com/rust-lang/rust/blob/24f262f35e5a36a29f7f2f7ee3e128b489666871/.azure-pipelines%2Fauto.yml", "raw_url": "https://github.com/rust-lang/rust/raw/24f262f35e5a36a29f7f2f7ee3e128b489666871/.azure-pipelines%2Fauto.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.azure-pipelines%2Fauto.yml?ref=24f262f35e5a36a29f7f2f7ee3e128b489666871", "patch": "@@ -32,120 +32,120 @@ jobs:\n         IMAGE: dist-x86_64-linux\n         DEPLOY_ALT: 1\n \n-#      # Linux builders, remaining docker images\n-#      arm-android:\n-#        IMAGE: arm-android\n-#\n-#      armhf-gnu:\n-#        IMAGE: armhf-gnu\n-#\n-#      dist-various-1:\n-#        IMAGE: dist-various-1\n-#        DEPLOY: 1\n-#\n-#      dist-various-2:\n-#        IMAGE: dist-various-2\n-#        DEPLOY: 1\n-#\n-#      dist-aarch64-linux:\n-#        IMAGE: dist-aarch64-linux\n-#        DEPLOY: 1\n-#\n-#      dist-android:\n-#        IMAGE: dist-android\n-#        DEPLOY: 1\n-#\n-#      dist-arm-linux:\n-#        IMAGE: dist-arm-linux\n-#        DEPLOY: 1\n-#\n-#      dist-armhf-linux:\n-#        IMAGE: dist-armhf-linux\n-#        DEPLOY: 1\n-#\n-#      dist-armv7-linux:\n-#        IMAGE: dist-armv7-linux\n-#        DEPLOY: 1\n-#\n-#      dist-i586-gnu-i586-i686-musl:\n-#        IMAGE: dist-i586-gnu-i586-i686-musl\n-#        DEPLOY: 1\n-#\n-#      dist-i686-freebsd:\n-#        IMAGE: dist-i686-freebsd\n-#        DEPLOY: 1\n-#\n-#      dist-i686-linux:\n-#        IMAGE: dist-i686-linux\n-#        DEPLOY: 1\n-#\n-#      dist-mips-linux:\n-#        IMAGE: dist-mips-linux\n-#        DEPLOY: 1\n-#\n-#      dist-mips64-linux:\n-#        IMAGE: dist-mips64-linux\n-#        DEPLOY: 1\n-#\n-#      dist-mips64el-linux:\n-#        IMAGE: dist-mips64el-linux\n-#        DEPLOY: 1\n-#\n-#      dist-mipsel-linux:\n-#        IMAGE: dist-mipsel-linux\n-#        DEPLOY: 1\n-#\n-#      dist-powerpc-linux:\n-#        IMAGE: dist-powerpc-linux\n-#        DEPLOY: 1\n-#\n-#      dist-powerpc64-linux:\n-#        IMAGE: dist-powerpc64-linux\n-#        DEPLOY: 1\n-#\n-#      dist-powerpc64le-linux:\n-#        IMAGE: dist-powerpc64le-linux\n-#        DEPLOY: 1\n-#\n-#      dist-s390x-linux:\n-#        IMAGE: dist-s390x-linux\n-#        DEPLOY: 1\n-#\n-#      dist-x86_64-freebsd:\n-#        IMAGE: dist-x86_64-freebsd\n-#        DEPLOY: 1\n-#\n-#      dist-x86_64-musl:\n-#        IMAGE: dist-x86_64-musl\n-#        DEPLOY: 1\n-#\n-#      dist-x86_64-netbsd:\n-#        IMAGE: dist-x86_64-netbsd\n-#        DEPLOY: 1\n-#\n-#      asmjs:\n-#        IMAGE: asmjs\n-#      i686-gnu:\n-#        IMAGE: i686-gnu\n-#      i686-gnu-nopt:\n-#        IMAGE: i686-gnu-nopt\n-#      test-various:\n-#        IMAGE: test-various\n-#      x86_64-gnu:\n-#        IMAGE: x86_64-gnu\n-#      x86_64-gnu-full-bootstrap:\n-#        IMAGE: x86_64-gnu-full-bootstrap\n-#      x86_64-gnu-aux:\n-#        IMAGE: x86_64-gnu-aux\n-#      x86_64-gnu-tools:\n-#        IMAGE: x86_64-gnu-tools\n-#      # FIXME if: branch = auto OR (type = pull_request AND commit_message =~ /(?i:^update.*\\b(rls|rustfmt|clippy|miri|cargo)\\b)/)\n-#      x86_64-gnu-debug:\n-#        IMAGE: x86_64-gnu-debug\n-#      x86_64-gnu-nopt:\n-#        IMAGE: x86_64-gnu-nopt\n-#      x86_64-gnu-distcheck:\n-#        IMAGE: x86_64-gnu-distcheck\n+      # Linux builders, remaining docker images\n+      arm-android:\n+        IMAGE: arm-android\n+\n+      armhf-gnu:\n+        IMAGE: armhf-gnu\n+\n+      dist-various-1:\n+        IMAGE: dist-various-1\n+        DEPLOY: 1\n+\n+      dist-various-2:\n+        IMAGE: dist-various-2\n+        DEPLOY: 1\n+\n+      dist-aarch64-linux:\n+        IMAGE: dist-aarch64-linux\n+        DEPLOY: 1\n+\n+      dist-android:\n+        IMAGE: dist-android\n+        DEPLOY: 1\n+\n+      dist-arm-linux:\n+        IMAGE: dist-arm-linux\n+        DEPLOY: 1\n+\n+      dist-armhf-linux:\n+        IMAGE: dist-armhf-linux\n+        DEPLOY: 1\n+\n+      dist-armv7-linux:\n+        IMAGE: dist-armv7-linux\n+        DEPLOY: 1\n+\n+      dist-i586-gnu-i586-i686-musl:\n+        IMAGE: dist-i586-gnu-i586-i686-musl\n+        DEPLOY: 1\n+\n+      dist-i686-freebsd:\n+        IMAGE: dist-i686-freebsd\n+        DEPLOY: 1\n+\n+      dist-i686-linux:\n+        IMAGE: dist-i686-linux\n+        DEPLOY: 1\n+\n+      dist-mips-linux:\n+        IMAGE: dist-mips-linux\n+        DEPLOY: 1\n+\n+      dist-mips64-linux:\n+        IMAGE: dist-mips64-linux\n+        DEPLOY: 1\n+\n+      dist-mips64el-linux:\n+        IMAGE: dist-mips64el-linux\n+        DEPLOY: 1\n+\n+      dist-mipsel-linux:\n+        IMAGE: dist-mipsel-linux\n+        DEPLOY: 1\n+\n+      dist-powerpc-linux:\n+        IMAGE: dist-powerpc-linux\n+        DEPLOY: 1\n+\n+      dist-powerpc64-linux:\n+        IMAGE: dist-powerpc64-linux\n+        DEPLOY: 1\n+\n+      dist-powerpc64le-linux:\n+        IMAGE: dist-powerpc64le-linux\n+        DEPLOY: 1\n+\n+      dist-s390x-linux:\n+        IMAGE: dist-s390x-linux\n+        DEPLOY: 1\n+\n+      dist-x86_64-freebsd:\n+        IMAGE: dist-x86_64-freebsd\n+        DEPLOY: 1\n+\n+      dist-x86_64-musl:\n+        IMAGE: dist-x86_64-musl\n+        DEPLOY: 1\n+\n+      dist-x86_64-netbsd:\n+        IMAGE: dist-x86_64-netbsd\n+        DEPLOY: 1\n+\n+      asmjs:\n+        IMAGE: asmjs\n+      i686-gnu:\n+        IMAGE: i686-gnu\n+      i686-gnu-nopt:\n+        IMAGE: i686-gnu-nopt\n+      test-various:\n+        IMAGE: test-various\n+      x86_64-gnu:\n+        IMAGE: x86_64-gnu\n+      x86_64-gnu-full-bootstrap:\n+        IMAGE: x86_64-gnu-full-bootstrap\n+      x86_64-gnu-aux:\n+        IMAGE: x86_64-gnu-aux\n+      x86_64-gnu-tools:\n+        IMAGE: x86_64-gnu-tools\n+      # FIXME if: branch = auto OR (type = pull_request AND commit_message =~ /(?i:^update.*\\b(rls|rustfmt|clippy|miri|cargo)\\b)/)\n+      x86_64-gnu-debug:\n+        IMAGE: x86_64-gnu-debug\n+      x86_64-gnu-nopt:\n+        IMAGE: x86_64-gnu-nopt\n+      x86_64-gnu-distcheck:\n+        IMAGE: x86_64-gnu-distcheck\n       mingw-check:\n         IMAGE: mingw-check\n \n@@ -183,33 +183,33 @@ jobs:\n         NO_DEBUG_ASSERTIONS: 1\n         DIST_REQUIRE_ALL_TOOLS: 1\n \n-#      dist-x86_64-apple-alt:\n-#        RUST_CHECK_TARGET: dist\n-#        RUST_CONFIGURE_ARGS: --enable-extended --enable-profiler --enable-lldb --set rust.jemalloc\n-#        DEPLOY_ALT: 1\n-#        RUSTC_RETRY_LINKER_ON_SEGFAULT: 1\n-#        MACOSX_DEPLOYMENT_TARGET: 10.7\n-#        NO_LLVM_ASSERTIONS: 1\n-#        NO_DEBUG_ASSERTIONS: 1\n-#\n-#      i686-apple:\n-#        RUST_CHECK_TARGET: check\n-#        RUST_CONFIGURE_ARGS: --build=i686-apple-darwin --set rust.jemalloc\n-#        RUSTC_RETRY_LINKER_ON_SEGFAULT: 1\n-#        MACOSX_DEPLOYMENT_TARGET: 10.8\n-#        MACOSX_STD_DEPLOYMENT_TARGET: 10.7\n-#        NO_LLVM_ASSERTIONS: 1\n-#        NO_DEBUG_ASSERTIONS: 1\n-#\n-#      dist-i686-apple:\n-#        RUST_CHECK_TARGET: dist\n-#        RUST_CONFIGURE_ARGS: --build=i686-apple-darwin --enable-full-tools --enable-profiler --enable-lldb --set rust.jemalloc\n-#        DEPLOY: 1\n-#        RUSTC_RETRY_LINKER_ON_SEGFAULT: 1\n-#        MACOSX_DEPLOYMENT_TARGET: 10.7\n-#        NO_LLVM_ASSERTIONS: 1\n-#        NO_DEBUG_ASSERTIONS: 1\n-#        DIST_REQUIRE_ALL_TOOLS: 1\n+      dist-x86_64-apple-alt:\n+        RUST_CHECK_TARGET: dist\n+        RUST_CONFIGURE_ARGS: --enable-extended --enable-profiler --enable-lldb --set rust.jemalloc\n+        DEPLOY_ALT: 1\n+        RUSTC_RETRY_LINKER_ON_SEGFAULT: 1\n+        MACOSX_DEPLOYMENT_TARGET: 10.7\n+        NO_LLVM_ASSERTIONS: 1\n+        NO_DEBUG_ASSERTIONS: 1\n+\n+      i686-apple:\n+        RUST_CHECK_TARGET: check\n+        RUST_CONFIGURE_ARGS: --build=i686-apple-darwin --set rust.jemalloc\n+        RUSTC_RETRY_LINKER_ON_SEGFAULT: 1\n+        MACOSX_DEPLOYMENT_TARGET: 10.8\n+        MACOSX_STD_DEPLOYMENT_TARGET: 10.7\n+        NO_LLVM_ASSERTIONS: 1\n+        NO_DEBUG_ASSERTIONS: 1\n+\n+      dist-i686-apple:\n+        RUST_CHECK_TARGET: dist\n+        RUST_CONFIGURE_ARGS: --build=i686-apple-darwin --enable-full-tools --enable-profiler --enable-lldb --set rust.jemalloc\n+        DEPLOY: 1\n+        RUSTC_RETRY_LINKER_ON_SEGFAULT: 1\n+        MACOSX_DEPLOYMENT_TARGET: 10.7\n+        NO_LLVM_ASSERTIONS: 1\n+        NO_DEBUG_ASSERTIONS: 1\n+        DIST_REQUIRE_ALL_TOOLS: 1\n \n \n \n@@ -220,89 +220,89 @@ jobs:\n   - template: steps/run.yml\n   strategy:\n     matrix:\n-#      # 32/64 bit MSVC tests\n-#      x86_64-msvc-1:\n-#        MSYS_BITS: 64\n-#        RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-msvc --enable-profiler\n-#        SCRIPT: make ci-subset-1\n-#        # FIXME(#59637)\n-#        NO_DEBUG_ASSERTIONS: 1\n-#        NO_LLVM_ASSERTIONS: 1\n-#      x86_64-msvc-2:\n-#        MSYS_BITS: 64\n-#        RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-msvc --enable-profiler\n-#        SCRIPT: make ci-subset-2\n-#      i686-msvc-1:\n-#        MSYS_BITS: 32\n-#        RUST_CONFIGURE_ARGS: --build=i686-pc-windows-msvc\n-#        SCRIPT: make ci-subset-1\n-#      i686-msvc-2:\n-#        MSYS_BITS: 32\n-#        RUST_CONFIGURE_ARGS: --build=i686-pc-windows-msvc\n-#        SCRIPT: make ci-subset-2\n-#      # MSVC aux tests\n-#      x86_64-msvc-aux:\n-#        MSYS_BITS: 64\n-#        RUST_CHECK_TARGET: check-aux EXCLUDE_CARGO=1\n-#        RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-msvc\n-#      x86_64-msvc-cargo:\n-#        MSYS_BITS: 64\n-#        SCRIPT: python x.py test src/tools/cargotest src/tools/cargo\n-#        RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-msvc\n-#        VCVARS_BAT: vcvars64.bat\n-#      # MSVC tools tests\n-#      x86_64-msvc-tools:\n-#        MSYS_BITS: 64\n-#        SCRIPT: src/ci/docker/x86_64-gnu-tools/checktools.sh x.py /tmp/toolstates.json windows\n-#        RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-msvc --save-toolstates=/tmp/toolstates.json --enable-test-miri\n-#\n-#      # 32/64-bit MinGW builds.\n-#      #\n-#      # We are using MinGW with posix threads since LLVM does not compile with\n-#      # the win32 threads version due to missing support for C++'s std::thread.\n-#      #\n-#      # Instead of relying on the MinGW version installed on appveryor we download\n-#      # and install one ourselves so we won't be surprised by changes to appveyor's\n-#      # build image.\n-#      #\n-#      # Finally, note that the downloads below are all in the `rust-lang-ci` S3\n-#      # bucket, but they cleraly didn't originate there! The downloads originally\n-#      # came from the mingw-w64 SourceForge download site. Unfortunately\n-#      # SourceForge is notoriously flaky, so we mirror it on our own infrastructure.\n-#      i686-mingw-1:\n-#        MSYS_BITS: 32\n-#        RUST_CONFIGURE_ARGS: --build=i686-pc-windows-gnu\n-#        SCRIPT: make ci-subset-1\n-#        MINGW_URL: https://s3-us-west-1.amazonaws.com/rust-lang-ci2/rust-ci-mirror\n-#        MINGW_ARCHIVE: i686-6.3.0-release-posix-dwarf-rt_v5-rev2.7z\n-#        MINGW_DIR: mingw32\n-#        # FIXME(#59637)\n-#        NO_DEBUG_ASSERTIONS: 1\n-#        NO_LLVM_ASSERTIONS: 1\n-#      i686-mingw-2:\n-#        MSYS_BITS: 32\n-#        RUST_CONFIGURE_ARGS: --build=i686-pc-windows-gnu\n-#        SCRIPT: make ci-subset-2\n-#        MINGW_URL: https://s3-us-west-1.amazonaws.com/rust-lang-ci2/rust-ci-mirror\n-#        MINGW_ARCHIVE: i686-6.3.0-release-posix-dwarf-rt_v5-rev2.7z\n-#        MINGW_DIR: mingw32\n-#      x86_64-mingw-1:\n-#        MSYS_BITS: 64\n-#        SCRIPT: make ci-subset-1\n-#        RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-gnu\n-#        MINGW_URL: https://s3-us-west-1.amazonaws.com/rust-lang-ci2/rust-ci-mirror\n-#        MINGW_ARCHIVE: x86_64-6.3.0-release-posix-seh-rt_v5-rev2.7z\n-#        MINGW_DIR: mingw64\n-#        # FIXME(#59637)\n-#        NO_DEBUG_ASSERTIONS: 1\n-#        NO_LLVM_ASSERTIONS: 1\n-#      x86_64-mingw-2:\n-#        MSYS_BITS: 64\n-#        SCRIPT: make ci-subset-2\n-#        RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-gnu\n-#        MINGW_URL: https://s3-us-west-1.amazonaws.com/rust-lang-ci2/rust-ci-mirror\n-#        MINGW_ARCHIVE: x86_64-6.3.0-release-posix-seh-rt_v5-rev2.7z\n-#        MINGW_DIR: mingw64\n+      # 32/64 bit MSVC tests\n+      x86_64-msvc-1:\n+        MSYS_BITS: 64\n+        RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-msvc --enable-profiler\n+        SCRIPT: make ci-subset-1\n+        # FIXME(#59637)\n+        NO_DEBUG_ASSERTIONS: 1\n+        NO_LLVM_ASSERTIONS: 1\n+      x86_64-msvc-2:\n+        MSYS_BITS: 64\n+        RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-msvc --enable-profiler\n+        SCRIPT: make ci-subset-2\n+      i686-msvc-1:\n+        MSYS_BITS: 32\n+        RUST_CONFIGURE_ARGS: --build=i686-pc-windows-msvc\n+        SCRIPT: make ci-subset-1\n+      i686-msvc-2:\n+        MSYS_BITS: 32\n+        RUST_CONFIGURE_ARGS: --build=i686-pc-windows-msvc\n+        SCRIPT: make ci-subset-2\n+      # MSVC aux tests\n+      x86_64-msvc-aux:\n+        MSYS_BITS: 64\n+        RUST_CHECK_TARGET: check-aux EXCLUDE_CARGO=1\n+        RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-msvc\n+      x86_64-msvc-cargo:\n+        MSYS_BITS: 64\n+        SCRIPT: python x.py test src/tools/cargotest src/tools/cargo\n+        RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-msvc\n+        VCVARS_BAT: vcvars64.bat\n+      # MSVC tools tests\n+      x86_64-msvc-tools:\n+        MSYS_BITS: 64\n+        SCRIPT: src/ci/docker/x86_64-gnu-tools/checktools.sh x.py /tmp/toolstates.json windows\n+        RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-msvc --save-toolstates=/tmp/toolstates.json --enable-test-miri\n+\n+      # 32/64-bit MinGW builds.\n+      #\n+      # We are using MinGW with posix threads since LLVM does not compile with\n+      # the win32 threads version due to missing support for C++'s std::thread.\n+      #\n+      # Instead of relying on the MinGW version installed on appveryor we download\n+      # and install one ourselves so we won't be surprised by changes to appveyor's\n+      # build image.\n+      #\n+      # Finally, note that the downloads below are all in the `rust-lang-ci` S3\n+      # bucket, but they cleraly didn't originate there! The downloads originally\n+      # came from the mingw-w64 SourceForge download site. Unfortunately\n+      # SourceForge is notoriously flaky, so we mirror it on our own infrastructure.\n+      i686-mingw-1:\n+        MSYS_BITS: 32\n+        RUST_CONFIGURE_ARGS: --build=i686-pc-windows-gnu\n+        SCRIPT: make ci-subset-1\n+        MINGW_URL: https://s3-us-west-1.amazonaws.com/rust-lang-ci2/rust-ci-mirror\n+        MINGW_ARCHIVE: i686-6.3.0-release-posix-dwarf-rt_v5-rev2.7z\n+        MINGW_DIR: mingw32\n+        # FIXME(#59637)\n+        NO_DEBUG_ASSERTIONS: 1\n+        NO_LLVM_ASSERTIONS: 1\n+      i686-mingw-2:\n+        MSYS_BITS: 32\n+        RUST_CONFIGURE_ARGS: --build=i686-pc-windows-gnu\n+        SCRIPT: make ci-subset-2\n+        MINGW_URL: https://s3-us-west-1.amazonaws.com/rust-lang-ci2/rust-ci-mirror\n+        MINGW_ARCHIVE: i686-6.3.0-release-posix-dwarf-rt_v5-rev2.7z\n+        MINGW_DIR: mingw32\n+      x86_64-mingw-1:\n+        MSYS_BITS: 64\n+        SCRIPT: make ci-subset-1\n+        RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-gnu\n+        MINGW_URL: https://s3-us-west-1.amazonaws.com/rust-lang-ci2/rust-ci-mirror\n+        MINGW_ARCHIVE: x86_64-6.3.0-release-posix-seh-rt_v5-rev2.7z\n+        MINGW_DIR: mingw64\n+        # FIXME(#59637)\n+        NO_DEBUG_ASSERTIONS: 1\n+        NO_LLVM_ASSERTIONS: 1\n+      x86_64-mingw-2:\n+        MSYS_BITS: 64\n+        SCRIPT: make ci-subset-2\n+        RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-gnu\n+        MINGW_URL: https://s3-us-west-1.amazonaws.com/rust-lang-ci2/rust-ci-mirror\n+        MINGW_ARCHIVE: x86_64-6.3.0-release-posix-seh-rt_v5-rev2.7z\n+        MINGW_DIR: mingw64\n \n       # 32/64 bit MSVC and GNU deployment\n       dist-x86_64-msvc:\n@@ -314,37 +314,37 @@ jobs:\n         SCRIPT: python x.py dist\n         DIST_REQUIRE_ALL_TOOLS: 1\n         DEPLOY: 1\n-#      dist-i686-msvc:\n-#        RUST_CONFIGURE_ARGS: >\n-#          --build=i686-pc-windows-msvc\n-#          --target=i586-pc-windows-msvc\n-#          --enable-full-tools\n-#          --enable-profiler\n-#        SCRIPT: python x.py dist\n-#        DIST_REQUIRE_ALL_TOOLS: 1\n-#        DEPLOY: 1\n-#      dist-i686-mingw:\n-#        MSYS_BITS: 32\n-#        RUST_CONFIGURE_ARGS: --build=i686-pc-windows-gnu --enable-full-tools\n-#        SCRIPT: python x.py dist\n-#        MINGW_URL: https://s3-us-west-1.amazonaws.com/rust-lang-ci2/rust-ci-mirror\n-#        MINGW_ARCHIVE: i686-6.3.0-release-posix-dwarf-rt_v5-rev2.7z\n-#        MINGW_DIR: mingw32\n-#        DIST_REQUIRE_ALL_TOOLS: 1\n-#        DEPLOY: 1\n-#      dist-x86_64-mingw:\n-#        MSYS_BITS: 64\n-#        SCRIPT: python x.py dist\n-#        RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-gnu --enable-full-tools\n-#        MINGW_URL: https://s3-us-west-1.amazonaws.com/rust-lang-ci2/rust-ci-mirror\n-#        MINGW_ARCHIVE: x86_64-6.3.0-release-posix-seh-rt_v5-rev2.7z\n-#        MINGW_DIR: mingw64\n-#        DIST_REQUIRE_ALL_TOOLS: 1\n-#        DEPLOY: 1\n-#\n-#      # \"alternate\" deployment, see .travis.yml for more info\n-#      dist-x86_64-msvc-alt:\n-#        MSYS_BITS: 64\n-#        RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-msvc --enable-extended --enable-profiler\n-#        SCRIPT: python x.py dist\n-#        DEPLOY_ALT: 1\n+      dist-i686-msvc:\n+        RUST_CONFIGURE_ARGS: >\n+          --build=i686-pc-windows-msvc\n+          --target=i586-pc-windows-msvc\n+          --enable-full-tools\n+          --enable-profiler\n+        SCRIPT: python x.py dist\n+        DIST_REQUIRE_ALL_TOOLS: 1\n+        DEPLOY: 1\n+      dist-i686-mingw:\n+        MSYS_BITS: 32\n+        RUST_CONFIGURE_ARGS: --build=i686-pc-windows-gnu --enable-full-tools\n+        SCRIPT: python x.py dist\n+        MINGW_URL: https://s3-us-west-1.amazonaws.com/rust-lang-ci2/rust-ci-mirror\n+        MINGW_ARCHIVE: i686-6.3.0-release-posix-dwarf-rt_v5-rev2.7z\n+        MINGW_DIR: mingw32\n+        DIST_REQUIRE_ALL_TOOLS: 1\n+        DEPLOY: 1\n+      dist-x86_64-mingw:\n+        MSYS_BITS: 64\n+        SCRIPT: python x.py dist\n+        RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-gnu --enable-full-tools\n+        MINGW_URL: https://s3-us-west-1.amazonaws.com/rust-lang-ci2/rust-ci-mirror\n+        MINGW_ARCHIVE: x86_64-6.3.0-release-posix-seh-rt_v5-rev2.7z\n+        MINGW_DIR: mingw64\n+        DIST_REQUIRE_ALL_TOOLS: 1\n+        DEPLOY: 1\n+\n+      # \"alternate\" deployment, see .travis.yml for more info\n+      dist-x86_64-msvc-alt:\n+        MSYS_BITS: 64\n+        RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-msvc --enable-extended --enable-profiler\n+        SCRIPT: python x.py dist\n+        DEPLOY_ALT: 1"}, {"sha": "f37bb7d26ed6d286df47fe9950128cf62062bc4f", "filename": ".azure-pipelines/try.yml", "status": "modified", "additions": 1, "deletions": 266, "changes": 267, "blob_url": "https://github.com/rust-lang/rust/blob/24f262f35e5a36a29f7f2f7ee3e128b489666871/.azure-pipelines%2Ftry.yml", "raw_url": "https://github.com/rust-lang/rust/raw/24f262f35e5a36a29f7f2f7ee3e128b489666871/.azure-pipelines%2Ftry.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.azure-pipelines%2Ftry.yml?ref=24f262f35e5a36a29f7f2f7ee3e128b489666871", "patch": "@@ -18,132 +18,14 @@ jobs:\n   - template: steps/run.yml\n   strategy:\n     matrix:\n-      x86_64-gnu-llvm-6.0:\n-        IMAGE: x86_64-gnu-llvm-6.0\n-        RUST_BACKTRACE: 1\n-\n       dist-x86_64-linux:\n         IMAGE: dist-x86_64-linux\n         DEPLOY: 1\n+\n       dist-x86_64-linux-alt:\n         IMAGE: dist-x86_64-linux\n         DEPLOY_ALT: 1\n \n-      arm-android:\n-        IMAGE: arm-android\n-\n-      armhf-gnu:\n-        IMAGE: armhf-gnu\n-\n-      dist-various-1:\n-        IMAGE: dist-various-1\n-        DEPLOY: 1\n-\n-      dist-various-2:\n-        IMAGE: dist-various-2\n-        DEPLOY: 1\n-\n-      dist-aarch64-linux:\n-        IMAGE: dist-aarch64-linux\n-        DEPLOY: 1\n-\n-      dist-android:\n-        IMAGE: dist-android\n-        DEPLOY: 1\n-\n-      dist-arm-linux:\n-        IMAGE: dist-arm-linux\n-        DEPLOY: 1\n-\n-      dist-armhf-linux:\n-        IMAGE: dist-armhf-linux\n-        DEPLOY: 1\n-\n-      dist-armv7-linux:\n-        IMAGE: dist-armv7-linux\n-        DEPLOY: 1\n-\n-      dist-i586-gnu-i586-i686-musl:\n-        IMAGE: dist-i586-gnu-i586-i686-musl\n-        DEPLOY: 1\n-\n-      dist-i686-freebsd:\n-        IMAGE: dist-i686-freebsd\n-        DEPLOY: 1\n-\n-      dist-i686-linux:\n-        IMAGE: dist-i686-linux\n-        DEPLOY: 1\n-\n-      dist-mips-linux:\n-        IMAGE: dist-mips-linux\n-        DEPLOY: 1\n-\n-      dist-mips64-linux:\n-        IMAGE: dist-mips64-linux\n-        DEPLOY: 1\n-\n-      dist-mips64el-linux:\n-        IMAGE: dist-mips64el-linux\n-        DEPLOY: 1\n-\n-      dist-mipsel-linux:\n-        IMAGE: dist-mipsel-linux\n-        DEPLOY: 1\n-\n-      dist-powerpc-linux:\n-        IMAGE: dist-powerpc-linux\n-        DEPLOY: 1\n-\n-      dist-powerpc64-linux:\n-        IMAGE: dist-powerpc64-linux\n-        DEPLOY: 1\n-\n-      dist-powerpc64le-linux:\n-        IMAGE: dist-powerpc64le-linux\n-        DEPLOY: 1\n-\n-      dist-s390x-linux:\n-        IMAGE: dist-s390x-linux\n-        DEPLOY: 1\n-\n-      dist-x86_64-freebsd:\n-        IMAGE: dist-x86_64-freebsd\n-        DEPLOY: 1\n-\n-      dist-x86_64-musl:\n-        IMAGE: dist-x86_64-musl\n-        DEPLOY: 1\n-\n-      dist-x86_64-netbsd:\n-        IMAGE: dist-x86_64-netbsd\n-        DEPLOY: 1\n-\n-      asmjs:\n-        IMAGE: asmjs\n-      i686-gnu:\n-        IMAGE: i686-gnu\n-      i686-gnu-nopt:\n-        IMAGE: i686-gnu-nopt\n-      test-various:\n-        IMAGE: test-various\n-      x86_64-gnu:\n-        IMAGE: x86_64-gnu\n-      x86_64-gnu-full-bootstrap:\n-        IMAGE: x86_64-gnu-full-bootstrap\n-      x86_64-gnu-aux:\n-        IMAGE: x86_64-gnu-aux\n-      x86_64-gnu-tools:\n-        IMAGE: x86_64-gnu-tools\n-      x86_64-gnu-debug:\n-        IMAGE: x86_64-gnu-debug\n-      x86_64-gnu-nopt:\n-        IMAGE: x86_64-gnu-nopt\n-      x86_64-gnu-distcheck:\n-        IMAGE: x86_64-gnu-distcheck\n-      mingw-check:\n-        IMAGE: mingw-check\n-\n - job: macOS\n   timeoutInMinutes: 600\n   pool:\n@@ -152,21 +34,6 @@ jobs:\n   - template: steps/run.yml\n   strategy:\n     matrix:\n-      # OSX builders running tests, these run the full test suite.\n-      # NO_DEBUG_ASSERTIONS=1 to make them go faster, but also do have some\n-      # runners that run `//ignore-debug` tests.\n-      #\n-      # Note that the compiler is compiled to target 10.8 here because the Xcode\n-      # version that we're using, 8.2, cannot compile LLVM for OSX 10.7.\n-      x86_64-apple:\n-        RUST_CHECK_TARGET: check\n-        RUST_CONFIGURE_ARGS: --build=x86_64-apple-darwin --enable-sanitizers --enable-profiler --set rust.jemalloc\n-        RUSTC_RETRY_LINKER_ON_SEGFAULT: 1\n-        MACOSX_DEPLOYMENT_TARGET: 10.8\n-        MACOSX_STD_DEPLOYMENT_TARGET: 10.7\n-        NO_LLVM_ASSERTIONS: 1\n-        NO_DEBUG_ASSERTIONS: 1\n-\n       dist-x86_64-apple:\n         RUST_CHECK_TARGET: dist\n         RUST_CONFIGURE_ARGS: --target=aarch64-apple-ios,armv7-apple-ios,armv7s-apple-ios,i386-apple-ios,x86_64-apple-ios --enable-full-tools --enable-sanitizers --enable-profiler --enable-lldb --set rust.jemalloc\n@@ -186,25 +53,6 @@ jobs:\n         NO_LLVM_ASSERTIONS: 1\n         NO_DEBUG_ASSERTIONS: 1\n \n-      i686-apple:\n-        RUST_CHECK_TARGET: check\n-        RUST_CONFIGURE_ARGS: --build=i686-apple-darwin --set rust.jemalloc\n-        RUSTC_RETRY_LINKER_ON_SEGFAULT: 1\n-        MACOSX_DEPLOYMENT_TARGET: 10.8\n-        MACOSX_STD_DEPLOYMENT_TARGET: 10.7\n-        NO_LLVM_ASSERTIONS: 1\n-        NO_DEBUG_ASSERTIONS: 1\n-\n-      dist-i686-apple:\n-        RUST_CHECK_TARGET: dist\n-        RUST_CONFIGURE_ARGS: --build=i686-apple-darwin --enable-full-tools --enable-profiler --enable-lldb --set rust.jemalloc\n-        DEPLOY: 1\n-        RUSTC_RETRY_LINKER_ON_SEGFAULT: 1\n-        MACOSX_DEPLOYMENT_TARGET: 10.7\n-        NO_LLVM_ASSERTIONS: 1\n-        NO_DEBUG_ASSERTIONS: 1\n-        DIST_REQUIRE_ALL_TOOLS: 1\n-\n - job: Windows\n   timeoutInMinutes: 600\n   pool:\n@@ -213,91 +61,6 @@ jobs:\n   - template: steps/run.yml\n   strategy:\n     matrix:\n-      # 32/64 bit MSVC tests\n-      x86_64-msvc-1:\n-        MSYS_BITS: 64\n-        RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-msvc --enable-profiler\n-        SCRIPT: make ci-subset-1\n-        # FIXME(#59637)\n-        NO_DEBUG_ASSERTIONS: 1\n-        NO_LLVM_ASSERTIONS: 1\n-      x86_64-msvc-2:\n-        MSYS_BITS: 64\n-        RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-msvc --enable-profiler\n-        SCRIPT: make ci-subset-2\n-      i686-msvc-1:\n-        MSYS_BITS: 32\n-        RUST_CONFIGURE_ARGS: --build=i686-pc-windows-msvc\n-        SCRIPT: make ci-subset-1\n-      i686-msvc-2:\n-        MSYS_BITS: 32\n-        RUST_CONFIGURE_ARGS: --build=i686-pc-windows-msvc\n-        SCRIPT: make ci-subset-2\n-      # MSVC aux tests\n-      x86_64-msvc-aux:\n-        MSYS_BITS: 64\n-        RUST_CHECK_TARGET: check-aux EXCLUDE_CARGO=1\n-        RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-msvc\n-      x86_64-msvc-cargo:\n-        MSYS_BITS: 64\n-        SCRIPT: python x.py test src/tools/cargotest src/tools/cargo\n-        RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-msvc\n-        VCVARS_BAT: vcvars64.bat\n-      # MSVC tools tests\n-      x86_64-msvc-tools:\n-        MSYS_BITS: 64\n-        SCRIPT: src/ci/docker/x86_64-gnu-tools/checktools.sh x.py /tmp/toolstates.json windows\n-        RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-msvc --save-toolstates=/tmp/toolstates.json --enable-test-miri\n-\n-      # 32/64-bit MinGW builds.\n-      #\n-      # We are using MinGW with posix threads since LLVM does not compile with\n-      # the win32 threads version due to missing support for C++'s std::thread.\n-      #\n-      # Instead of relying on the MinGW version installed on appveryor we download\n-      # and install one ourselves so we won't be surprised by changes to appveyor's\n-      # build image.\n-      #\n-      # Finally, note that the downloads below are all in the `rust-lang-ci` S3\n-      # bucket, but they cleraly didn't originate there! The downloads originally\n-      # came from the mingw-w64 SourceForge download site. Unfortunately\n-      # SourceForge is notoriously flaky, so we mirror it on our own infrastructure.\n-      i686-mingw-1:\n-        MSYS_BITS: 32\n-        RUST_CONFIGURE_ARGS: --build=i686-pc-windows-gnu\n-        SCRIPT: make ci-subset-1\n-        MINGW_URL: https://s3-us-west-1.amazonaws.com/rust-lang-ci2/rust-ci-mirror\n-        MINGW_ARCHIVE: i686-6.3.0-release-posix-dwarf-rt_v5-rev2.7z\n-        MINGW_DIR: mingw32\n-        # FIXME(#59637)\n-        NO_DEBUG_ASSERTIONS: 1\n-        NO_LLVM_ASSERTIONS: 1\n-      i686-mingw-2:\n-        MSYS_BITS: 32\n-        RUST_CONFIGURE_ARGS: --build=i686-pc-windows-gnu\n-        SCRIPT: make ci-subset-2\n-        MINGW_URL: https://s3-us-west-1.amazonaws.com/rust-lang-ci2/rust-ci-mirror\n-        MINGW_ARCHIVE: i686-6.3.0-release-posix-dwarf-rt_v5-rev2.7z\n-        MINGW_DIR: mingw32\n-      x86_64-mingw-1:\n-        MSYS_BITS: 64\n-        SCRIPT: make ci-subset-1\n-        RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-gnu\n-        MINGW_URL: https://s3-us-west-1.amazonaws.com/rust-lang-ci2/rust-ci-mirror\n-        MINGW_ARCHIVE: x86_64-6.3.0-release-posix-seh-rt_v5-rev2.7z\n-        MINGW_DIR: mingw64\n-        # FIXME(#59637)\n-        NO_DEBUG_ASSERTIONS: 1\n-        NO_LLVM_ASSERTIONS: 1\n-      x86_64-mingw-2:\n-        MSYS_BITS: 64\n-        SCRIPT: make ci-subset-2\n-        RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-gnu\n-        MINGW_URL: https://s3-us-west-1.amazonaws.com/rust-lang-ci2/rust-ci-mirror\n-        MINGW_ARCHIVE: x86_64-6.3.0-release-posix-seh-rt_v5-rev2.7z\n-        MINGW_DIR: mingw64\n-\n-      # 32/64 bit MSVC and GNU deployment\n       dist-x86_64-msvc:\n         RUST_CONFIGURE_ARGS: >\n           --build=x86_64-pc-windows-msvc\n@@ -307,35 +70,7 @@ jobs:\n         SCRIPT: python x.py dist\n         DIST_REQUIRE_ALL_TOOLS: 1\n         DEPLOY: 1\n-      dist-i686-msvc:\n-        RUST_CONFIGURE_ARGS: >\n-          --build=i686-pc-windows-msvc\n-          --target=i586-pc-windows-msvc\n-          --enable-full-tools\n-          --enable-profiler\n-        SCRIPT: python x.py dist\n-        DIST_REQUIRE_ALL_TOOLS: 1\n-        DEPLOY: 1\n-      dist-i686-mingw:\n-        MSYS_BITS: 32\n-        RUST_CONFIGURE_ARGS: --build=i686-pc-windows-gnu --enable-full-tools\n-        SCRIPT: python x.py dist\n-        MINGW_URL: https://s3-us-west-1.amazonaws.com/rust-lang-ci2/rust-ci-mirror\n-        MINGW_ARCHIVE: i686-6.3.0-release-posix-dwarf-rt_v5-rev2.7z\n-        MINGW_DIR: mingw32\n-        DIST_REQUIRE_ALL_TOOLS: 1\n-        DEPLOY: 1\n-      dist-x86_64-mingw:\n-        MSYS_BITS: 64\n-        SCRIPT: python x.py dist\n-        RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-gnu --enable-full-tools\n-        MINGW_URL: https://s3-us-west-1.amazonaws.com/rust-lang-ci2/rust-ci-mirror\n-        MINGW_ARCHIVE: x86_64-6.3.0-release-posix-seh-rt_v5-rev2.7z\n-        MINGW_DIR: mingw64\n-        DIST_REQUIRE_ALL_TOOLS: 1\n-        DEPLOY: 1\n \n-      # \"alternate\" deployment, see .travis.yml for more info\n       dist-x86_64-msvc-alt:\n         MSYS_BITS: 64\n         RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-msvc --enable-extended --enable-profiler"}]}