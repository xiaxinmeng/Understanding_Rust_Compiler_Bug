{"sha": "7080ac15fb13c472985da692ca92c4a48b1f5575", "node_id": "MDY6Q29tbWl0NzI0NzEyOjcwODBhYzE1ZmIxM2M0NzI5ODVkYTY5MmNhOTJjNGE0OGIxZjU1NzU=", "commit": {"author": {"name": "Matt Brubeck", "email": "mbrubeck@limpet.net", "date": "2011-10-30T14:29:15Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-10-30T20:40:59Z"}, "message": "Fix int::parse_buf for negative numbers (#1102)", "tree": {"sha": "fa0dc29fd704e05061eebff0241515f36c0ff037", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fa0dc29fd704e05061eebff0241515f36c0ff037"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7080ac15fb13c472985da692ca92c4a48b1f5575", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7080ac15fb13c472985da692ca92c4a48b1f5575", "html_url": "https://github.com/rust-lang/rust/commit/7080ac15fb13c472985da692ca92c4a48b1f5575", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7080ac15fb13c472985da692ca92c4a48b1f5575/comments", "author": {"login": "mbrubeck", "id": 5920, "node_id": "MDQ6VXNlcjU5MjA=", "avatar_url": "https://avatars.githubusercontent.com/u/5920?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mbrubeck", "html_url": "https://github.com/mbrubeck", "followers_url": "https://api.github.com/users/mbrubeck/followers", "following_url": "https://api.github.com/users/mbrubeck/following{/other_user}", "gists_url": "https://api.github.com/users/mbrubeck/gists{/gist_id}", "starred_url": "https://api.github.com/users/mbrubeck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mbrubeck/subscriptions", "organizations_url": "https://api.github.com/users/mbrubeck/orgs", "repos_url": "https://api.github.com/users/mbrubeck/repos", "events_url": "https://api.github.com/users/mbrubeck/events{/privacy}", "received_events_url": "https://api.github.com/users/mbrubeck/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8c51d4b002b2743fd50bc715429265aaaf482762", "url": "https://api.github.com/repos/rust-lang/rust/commits/8c51d4b002b2743fd50bc715429265aaaf482762", "html_url": "https://github.com/rust-lang/rust/commit/8c51d4b002b2743fd50bc715429265aaaf482762"}], "stats": {"total": 23, "additions": 20, "deletions": 3}, "files": [{"sha": "41d166fe3fc1499a6818ba3449ae9d8412940c20", "filename": "src/lib/int.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/7080ac15fb13c472985da692ca92c4a48b1f5575/src%2Flib%2Fint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7080ac15fb13c472985da692ca92c4a48b1f5575/src%2Flib%2Fint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib%2Fint.rs?ref=7080ac15fb13c472985da692ca92c4a48b1f5575", "patch": "@@ -103,16 +103,18 @@ fn parse_buf(buf: [u8], radix: uint) -> int {\n         fail;\n     }\n     let i = vec::len::<u8>(buf) - 1u;\n+    let start = 0u;\n     let power = 1;\n+\n     if buf[0] == ('-' as u8) {\n         power = -1;\n-        i -= 1u;\n+        start = 1u;\n     }\n     let n = 0;\n     while true {\n         n += (buf[i] - ('0' as u8) as int) * power;\n         power *= radix as int;\n-        if i == 0u { ret n; }\n+        if i <= start { ret n; }\n         i -= 1u;\n     }\n     fail;"}, {"sha": "282e16daf08a0105b4d283a264494ac257907274", "filename": "src/test/stdtest/int.rs", "status": "modified", "additions": 16, "deletions": 1, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/7080ac15fb13c472985da692ca92c4a48b1f5575/src%2Ftest%2Fstdtest%2Fint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7080ac15fb13c472985da692ca92c4a48b1f5575/src%2Ftest%2Fstdtest%2Fint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fstdtest%2Fint.rs?ref=7080ac15fb13c472985da692ca92c4a48b1f5575", "patch": "@@ -3,6 +3,21 @@ use std;\n import std::int;\n import std::str::eq;\n \n+#[test]\n+fn test_from_str() {\n+    assert(int::from_str(\"0\") == 0);\n+    assert(int::from_str(\"3\") == 3);\n+    assert(int::from_str(\"10\") == 10);\n+    assert(int::from_str(\"123456789\") == 123456789);\n+    assert(int::from_str(\"00100\") == 100);\n+\n+    assert(int::from_str(\"-1\") == -1);\n+    assert(int::from_str(\"-3\") == -3);\n+    assert(int::from_str(\"-10\") == -10);\n+    assert(int::from_str(\"-123456789\") == -123456789);\n+    assert(int::from_str(\"-00100\") == -100);\n+}\n+\n #[test]\n fn test_to_str() {\n     assert (eq(int::to_str(0, 10u), \"0\"));\n@@ -29,4 +44,4 @@ fn test_overflows() {\n    assert (int::max_value() > 0);\n    assert (int::min_value() <= 0);\n    assert (int::min_value() + int::max_value() + 1 == 0);\n-}\n\\ No newline at end of file\n+}"}]}