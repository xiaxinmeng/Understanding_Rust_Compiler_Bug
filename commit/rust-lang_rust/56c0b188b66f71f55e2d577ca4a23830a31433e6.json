{"sha": "56c0b188b66f71f55e2d577ca4a23830a31433e6", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU2YzBiMTg4YjY2ZjcxZjU1ZTJkNTc3Y2E0YTIzODMwYTMxNDMzZTY=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2013-05-12T02:46:43Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2013-05-15T19:19:16Z"}, "message": "rt: Rename sched_key to rt_key\n\nIt is more general-purpose than holding scheduler pointers", "tree": {"sha": "37fbbaf3c7a3d116c89a9c8caa17c871b0135b93", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/37fbbaf3c7a3d116c89a9c8caa17c871b0135b93"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/56c0b188b66f71f55e2d577ca4a23830a31433e6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/56c0b188b66f71f55e2d577ca4a23830a31433e6", "html_url": "https://github.com/rust-lang/rust/commit/56c0b188b66f71f55e2d577ca4a23830a31433e6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/56c0b188b66f71f55e2d577ca4a23830a31433e6/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c42b03de17b2d0c567dc85417ec22518d69fd8ae", "url": "https://api.github.com/repos/rust-lang/rust/commits/c42b03de17b2d0c567dc85417ec22518d69fd8ae", "html_url": "https://github.com/rust-lang/rust/commit/c42b03de17b2d0c567dc85417ec22518d69fd8ae"}], "stats": {"total": 20, "additions": 10, "deletions": 10}, "files": [{"sha": "895354d2218e568bb5da409088d1815c0a9c0c4e", "filename": "src/libcore/rt/local_sched.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/56c0b188b66f71f55e2d577ca4a23830a31433e6/src%2Flibcore%2Frt%2Flocal_sched.rs", "raw_url": "https://github.com/rust-lang/rust/raw/56c0b188b66f71f55e2d577ca4a23830a31433e6/src%2Flibcore%2Frt%2Flocal_sched.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Frt%2Flocal_sched.rs?ref=56c0b188b66f71f55e2d577ca4a23830a31433e6", "patch": "@@ -105,7 +105,7 @@ fn tls_key() -> tls::Key {\n \n fn maybe_tls_key() -> Option<tls::Key> {\n     unsafe {\n-        let key: *mut c_void = rust_get_sched_tls_key();\n+        let key: *mut c_void = rust_get_rt_tls_key();\n         let key: &mut tls::Key = cast::transmute(key);\n         let key = *key;\n         // Check that the key has been initialized.\n@@ -130,7 +130,7 @@ fn maybe_tls_key() -> Option<tls::Key> {\n \n extern {\n     #[fast_ffi]\n-    fn rust_get_sched_tls_key() -> *mut c_void;\n+    fn rust_get_rt_tls_key() -> *mut c_void;\n }\n \n #[test]"}, {"sha": "1a64066b5a946468505d7dcede48ba8b4cc4ab2a", "filename": "src/rt/rust_builtin.cpp", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/56c0b188b66f71f55e2d577ca4a23830a31433e6/src%2Frt%2Frust_builtin.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/56c0b188b66f71f55e2d577ca4a23830a31433e6/src%2Frt%2Frust_builtin.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust_builtin.cpp?ref=56c0b188b66f71f55e2d577ca4a23830a31433e6", "patch": "@@ -830,14 +830,14 @@ rust_get_rt_env() {\n }\n \n #ifndef _WIN32\n-pthread_key_t sched_key = -1;\n+pthread_key_t rt_key = -1;\n #else\n-DWORD sched_key = -1;\n+DWORD rt_key = -1;\n #endif\n \n extern \"C\" void*\n-rust_get_sched_tls_key() {\n-    return &sched_key;\n+rust_get_rt_tls_key() {\n+    return &rt_key;\n }\n \n // Initialize the global state required by the new scheduler\n@@ -852,10 +852,10 @@ rust_initialize_global_state() {\n     if (!initialized) {\n \n #ifndef _WIN32\n-        assert(!pthread_key_create(&sched_key, NULL));\n+        assert(!pthread_key_create(&rt_key, NULL));\n #else\n-        sched_key = TlsAlloc();\n-        assert(sched_key != TLS_OUT_OF_INDEXES);\n+        rt_key = TlsAlloc();\n+        assert(rt_key != TLS_OUT_OF_INDEXES);\n #endif\n \n         initialized = true;"}, {"sha": "cdc282440b830cae3574488909cad94bcdd412af", "filename": "src/rt/rustrt.def.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/56c0b188b66f71f55e2d577ca4a23830a31433e6/src%2Frt%2Frustrt.def.in", "raw_url": "https://github.com/rust-lang/rust/raw/56c0b188b66f71f55e2d577ca4a23830a31433e6/src%2Frt%2Frustrt.def.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frustrt.def.in?ref=56c0b188b66f71f55e2d577ca4a23830a31433e6", "patch": "@@ -196,7 +196,7 @@ rust_get_global_data_ptr\n rust_inc_kernel_live_count\n rust_dec_kernel_live_count\n rust_exchange_count\n-rust_get_sched_tls_key\n+rust_get_rt_tls_key\n swap_registers\n rust_readdir\n rust_opendir"}]}