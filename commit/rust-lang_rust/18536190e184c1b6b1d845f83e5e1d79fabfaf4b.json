{"sha": "18536190e184c1b6b1d845f83e5e1d79fabfaf4b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE4NTM2MTkwZTE4NGMxYjZiMWQ4NDVmODNlNWUxZDc5ZmFiZmFmNGI=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-04-17T08:31:27Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-04-17T08:31:27Z"}, "message": "auto merge of #13557 : FlaPer87/rust/ls-behind-z, r=brson\n\nCloses #13549", "tree": {"sha": "2abb1855a3067775cf49fec51e9009f191e8da6f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2abb1855a3067775cf49fec51e9009f191e8da6f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/18536190e184c1b6b1d845f83e5e1d79fabfaf4b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/18536190e184c1b6b1d845f83e5e1d79fabfaf4b", "html_url": "https://github.com/rust-lang/rust/commit/18536190e184c1b6b1d845f83e5e1d79fabfaf4b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/18536190e184c1b6b1d845f83e5e1d79fabfaf4b/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "787f4151e3ac32ffe455c2d3fd991def36be9758", "url": "https://api.github.com/repos/rust-lang/rust/commits/787f4151e3ac32ffe455c2d3fd991def36be9758", "html_url": "https://github.com/rust-lang/rust/commit/787f4151e3ac32ffe455c2d3fd991def36be9758"}, {"sha": "fcdc36b1424928bfccee52b60d74f07577bc02fc", "url": "https://api.github.com/repos/rust-lang/rust/commits/fcdc36b1424928bfccee52b60d74f07577bc02fc", "html_url": "https://github.com/rust-lang/rust/commit/fcdc36b1424928bfccee52b60d74f07577bc02fc"}], "stats": {"total": 18, "additions": 8, "deletions": 10}, "files": [{"sha": "4db5be25b82723d564e030eb52e27be4ce75ed03", "filename": "man/rustc.1", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/18536190e184c1b6b1d845f83e5e1d79fabfaf4b/man%2Frustc.1", "raw_url": "https://github.com/rust-lang/rust/raw/18536190e184c1b6b1d845f83e5e1d79fabfaf4b/man%2Frustc.1", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/man%2Frustc.1?ref=18536190e184c1b6b1d845f83e5e1d79fabfaf4b", "patch": "@@ -27,9 +27,6 @@ Display this message\n \\fB\\-L\\fR PATH\n Add a directory to the library search path\n .TP\n-\\fB\\-\\-ls\\fR\n-List the symbols defined by a library crate\n-.TP\n \\fB\\-\\-no\\-trans\\fR\n Run all passes except translation; no output\n .TP"}, {"sha": "1637785d6d49a57116e9e666de9714a3e385592e", "filename": "src/librustc/driver/driver.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/18536190e184c1b6b1d845f83e5e1d79fabfaf4b/src%2Flibrustc%2Fdriver%2Fdriver.rs", "raw_url": "https://github.com/rust-lang/rust/raw/18536190e184c1b6b1d845f83e5e1d79fabfaf4b/src%2Flibrustc%2Fdriver%2Fdriver.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fdriver%2Fdriver.rs?ref=18536190e184c1b6b1d845f83e5e1d79fabfaf4b", "patch": "@@ -1096,7 +1096,6 @@ pub fn optgroups() -> Vec<getopts::OptGroup> {\n   optflag(\"\", \"crate-name\", \"Output the crate name and exit\"),\n   optflag(\"\", \"crate-file-name\", \"Output the file(s) that would be written if compilation \\\n           continued and exit\"),\n-  optflag(\"\",  \"ls\",  \"List the symbols defined by a library crate\"),\n   optflag(\"g\",  \"\",  \"Equivalent to --debuginfo=2\"),\n   optopt(\"\",  \"debuginfo\",  \"Emit DWARF debug info to the objects created:\n          0 = no debug info,"}, {"sha": "09222c39403e035ddfc254e4beeef8392bf6576f", "filename": "src/librustc/driver/session.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/18536190e184c1b6b1d845f83e5e1d79fabfaf4b/src%2Flibrustc%2Fdriver%2Fsession.rs", "raw_url": "https://github.com/rust-lang/rust/raw/18536190e184c1b6b1d845f83e5e1d79fabfaf4b/src%2Flibrustc%2Fdriver%2Fsession.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fdriver%2Fsession.rs?ref=18536190e184c1b6b1d845f83e5e1d79fabfaf4b", "patch": "@@ -69,7 +69,8 @@ debugging_opts!(\n         PRINT_LLVM_PASSES,\n         LTO,\n         AST_JSON,\n-        AST_JSON_NOEXPAND\n+        AST_JSON_NOEXPAND,\n+        LS\n     ]\n     0\n )\n@@ -102,7 +103,8 @@ pub fn debugging_opts_map() -> Vec<(&'static str, &'static str, u64)> {\n       PRINT_LLVM_PASSES),\n      (\"lto\", \"Perform LLVM link-time optimizations\", LTO),\n      (\"ast-json\", \"Print the AST as JSON and halt\", AST_JSON),\n-     (\"ast-json-noexpand\", \"Print the pre-expansion AST as JSON and halt\", AST_JSON_NOEXPAND))\n+     (\"ast-json-noexpand\", \"Print the pre-expansion AST as JSON and halt\", AST_JSON_NOEXPAND),\n+     (\"ls\", \"List the symbols defined by a library crate\", LS))\n }\n \n #[deriving(Clone, Eq)]"}, {"sha": "411d9019632ce8a5465bbb5ad7517dbdfd9c8fa5", "filename": "src/librustc/lib.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/18536190e184c1b6b1d845f83e5e1d79fabfaf4b/src%2Flibrustc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/18536190e184c1b6b1d845f83e5e1d79fabfaf4b/src%2Flibrustc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Flib.rs?ref=18536190e184c1b6b1d845f83e5e1d79fabfaf4b", "patch": "@@ -299,8 +299,8 @@ pub fn run_compiler(args: &[~str]) {\n         }\n         None::<d::PpMode> => {/* continue */ }\n     }\n-    let ls = matches.opt_present(\"ls\");\n-    if ls {\n+\n+    if r.contains(&~\"ls\") {\n         match input {\n             d::FileInput(ref ifile) => {\n                 let mut stdout = io::stdout();"}, {"sha": "fc3f5bce0cda2c8557255a3195403dd0f8d0ea19", "filename": "src/test/run-make/ls-metadata/Makefile", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/18536190e184c1b6b1d845f83e5e1d79fabfaf4b/src%2Ftest%2Frun-make%2Fls-metadata%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/18536190e184c1b6b1d845f83e5e1d79fabfaf4b/src%2Ftest%2Frun-make%2Fls-metadata%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fls-metadata%2FMakefile?ref=18536190e184c1b6b1d845f83e5e1d79fabfaf4b", "patch": "@@ -2,6 +2,6 @@\n \n all:\n \t$(RUSTC) foo.rs\n-\t$(RUSTC) --ls $(TMPDIR)/foo\n+\t$(RUSTC) -Z ls $(TMPDIR)/foo\n \ttouch $(TMPDIR)/bar\n-\t$(RUSTC) --ls $(TMPDIR)/bar\n+\t$(RUSTC) -Z ls $(TMPDIR)/bar"}]}