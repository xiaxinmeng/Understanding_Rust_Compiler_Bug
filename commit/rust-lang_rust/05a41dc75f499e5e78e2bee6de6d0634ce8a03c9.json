{"sha": "05a41dc75f499e5e78e2bee6de6d0634ce8a03c9", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA1YTQxZGM3NWY0OTllNWU3OGUyYmVlNmRlNmQwNjM0Y2U4YTAzYzk=", "commit": {"author": {"name": "Kiet Tran", "email": "ktt3ja@gmail.com", "date": "2013-12-16T23:01:36Z"}, "committer": {"name": "Kiet Tran", "email": "ktt3ja@gmail.com", "date": "2013-12-16T23:01:36Z"}, "message": "Check even more live Path nodes in dead-code pass", "tree": {"sha": "737d67a21fee5570e417a77244c310c5539b7e80", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/737d67a21fee5570e417a77244c310c5539b7e80"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/05a41dc75f499e5e78e2bee6de6d0634ce8a03c9", "comment_count": 9, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/05a41dc75f499e5e78e2bee6de6d0634ce8a03c9", "html_url": "https://github.com/rust-lang/rust/commit/05a41dc75f499e5e78e2bee6de6d0634ce8a03c9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/05a41dc75f499e5e78e2bee6de6d0634ce8a03c9/comments", "author": {"login": "ktt3ja", "id": 1735399, "node_id": "MDQ6VXNlcjE3MzUzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1735399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktt3ja", "html_url": "https://github.com/ktt3ja", "followers_url": "https://api.github.com/users/ktt3ja/followers", "following_url": "https://api.github.com/users/ktt3ja/following{/other_user}", "gists_url": "https://api.github.com/users/ktt3ja/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktt3ja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktt3ja/subscriptions", "organizations_url": "https://api.github.com/users/ktt3ja/orgs", "repos_url": "https://api.github.com/users/ktt3ja/repos", "events_url": "https://api.github.com/users/ktt3ja/events{/privacy}", "received_events_url": "https://api.github.com/users/ktt3ja/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ktt3ja", "id": 1735399, "node_id": "MDQ6VXNlcjE3MzUzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1735399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktt3ja", "html_url": "https://github.com/ktt3ja", "followers_url": "https://api.github.com/users/ktt3ja/followers", "following_url": "https://api.github.com/users/ktt3ja/following{/other_user}", "gists_url": "https://api.github.com/users/ktt3ja/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktt3ja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktt3ja/subscriptions", "organizations_url": "https://api.github.com/users/ktt3ja/orgs", "repos_url": "https://api.github.com/users/ktt3ja/repos", "events_url": "https://api.github.com/users/ktt3ja/events{/privacy}", "received_events_url": "https://api.github.com/users/ktt3ja/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "35e5056b6a89d97d386416da44058cc736994ba9", "url": "https://api.github.com/repos/rust-lang/rust/commits/35e5056b6a89d97d386416da44058cc736994ba9", "html_url": "https://github.com/rust-lang/rust/commit/35e5056b6a89d97d386416da44058cc736994ba9"}], "stats": {"total": 16, "additions": 6, "deletions": 10}, "files": [{"sha": "fe4da4181da3959fa8f06d8a2e5b96fe41a81902", "filename": "src/librustc/middle/dead.rs", "status": "modified", "additions": 2, "deletions": 10, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/05a41dc75f499e5e78e2bee6de6d0634ce8a03c9/src%2Flibrustc%2Fmiddle%2Fdead.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05a41dc75f499e5e78e2bee6de6d0634ce8a03c9/src%2Flibrustc%2Fmiddle%2Fdead.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fdead.rs?ref=05a41dc75f499e5e78e2bee6de6d0634ce8a03c9", "patch": "@@ -158,17 +158,9 @@ impl Visitor<()> for MarkSymbolVisitor {\n         visit::walk_expr(self, expr, ())\n     }\n \n-    fn visit_ty(&mut self, typ: &ast::Ty, _: ()) {\n-        match typ.node {\n-            ast::ty_path(_, _, ref id) => {\n-                self.lookup_and_handle_definition(id);\n-            }\n-            _ => visit::walk_ty(self, typ, ()),\n-        }\n-    }\n-\n-    fn visit_path(&mut self, _: &ast::Path, id: ast::NodeId, _: ()) {\n+    fn visit_path(&mut self, path: &ast::Path, id: ast::NodeId, _: ()) {\n         self.lookup_and_handle_definition(&id);\n+        visit::walk_path(self, path, ());\n     }\n \n     fn visit_item(&mut self, _item: @ast::item, _: ()) {"}, {"sha": "b029866060d2403867a97e220b8cbd1d8622f68d", "filename": "src/test/compile-fail/lint-dead-code-1.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/05a41dc75f499e5e78e2bee6de6d0634ce8a03c9/src%2Ftest%2Fcompile-fail%2Flint-dead-code-1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05a41dc75f499e5e78e2bee6de6d0634ce8a03c9/src%2Ftest%2Fcompile-fail%2Flint-dead-code-1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Flint-dead-code-1.rs?ref=05a41dc75f499e5e78e2bee6de6d0634ce8a03c9", "patch": "@@ -44,6 +44,7 @@ impl SemiUsedStruct {\n }\n struct StructUsedAsField;\n struct StructUsedInEnum;\n+struct StructUsedInGeneric;\n pub struct PubStruct2 {\n     struct_used_as_field: *StructUsedAsField\n }\n@@ -54,6 +55,8 @@ pub enum pub_enum3 { Foo = STATIC_USED_IN_ENUM_DISCRIMINANT }\n enum priv_enum { foo2, bar2 } //~ ERROR: code is never used\n enum used_enum { foo3, bar3 }\n \n+fn f<T>() {}\n+\n pub fn pub_fn() {\n     used_fn();\n     let used_struct1 = UsedStruct1 { x: 1 };\n@@ -67,6 +70,7 @@ pub fn pub_fn() {\n         USED_STATIC => (),\n         _ => ()\n     }\n+    f::<StructUsedInGeneric>();\n }\n fn priv_fn() { //~ ERROR: code is never used\n     let unused_struct = PrivStruct;"}]}