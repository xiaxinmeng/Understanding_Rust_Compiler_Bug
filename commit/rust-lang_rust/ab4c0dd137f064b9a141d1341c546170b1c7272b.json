{"sha": "ab4c0dd137f064b9a141d1341c546170b1c7272b", "node_id": "C_kwDOAAsO6NoAKGFiNGMwZGQxMzdmMDY0YjlhMTQxZDEzNDFjNTQ2MTcwYjFjNzI3MmI", "commit": {"author": {"name": "Jacob Pratt", "email": "jacob@jhpratt.dev", "date": "2023-02-19T22:59:22Z"}, "committer": {"name": "Jacob Pratt", "email": "jacob@jhpratt.dev", "date": "2023-02-19T22:59:22Z"}, "message": "Add test for precise algorithm used", "tree": {"sha": "038be1f4a91063990eca5aada570279ec937a02d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/038be1f4a91063990eca5aada570279ec937a02d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ab4c0dd137f064b9a141d1341c546170b1c7272b", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE/zgjfWsP96DbtCNLbi5VxfmrskcFAmPyqdEACgkQbi5Vxfmr\nske/dBAAsVE2ydjL1URLqmPzUdGQtmie464UjzdP34jLHXyqcel4usmDHQv/vf+t\nu5nyZpY2lm+g2cocSKKEEQgJvHhpqnIJ0CQj1JX4f0bX6sLRbKggD97wIq4yXH+s\n39so4JG0rmyLj6DhnN85WZMzlvBVdjFjcvgUWp3c/tuHNWJPH6YXkhdxUermlJZO\niSWI/iJcywKcsvvCvc7RUc3tRWwXTLFjwwz+VzSIsa/purtI/sYOxbrHVlAm2uPR\nAbp/U5b+r6A78dXclaSfm5HZax1REqk1WA9PDHU57h3ZQUgMxAxQ1YMiWZa/2NhQ\nbDrGz7ykjsq9t9nkLKZMguXjqXDkMPr74li/Y7BocoTrtP8o1EF9A0DqEGxSO1zw\nqowQ8fBCcjUyuVqlYL5iJuossAvYI06PkBE4En8JSyatwkdy5o8EYd+BIWfqF4dK\nmwtc0WIRsglGJILeqmoYZw5ucbNSCR74e7/1ZxCJozIvcAWUM0wXRwtDZZhrKTmB\nZV8gpvTKcoe+i79rYRs2dGVjqGBDOhD3XAZnVrOpy+JuF+4DgbhJTqS61X4BzhMO\n7U2dDoMoYnWrKLvzTnFGJOfa9bCZvWr7/jj8t3c7g+PKMZ/Mxyzf1G7w3NRmoE4e\nQk5nvnnw6Qp6VE6EoT5YfaHgflw01b8FO0ouTLq5csC3Ztg+DFw=\n=F3fC\n-----END PGP SIGNATURE-----", "payload": "tree 038be1f4a91063990eca5aada570279ec937a02d\nparent 20282c1b20bb1ce196a3addc9f681cf6cf81feb9\nauthor Jacob Pratt <jacob@jhpratt.dev> 1676847562 +0000\ncommitter Jacob Pratt <jacob@jhpratt.dev> 1676847562 +0000\n\nAdd test for precise algorithm used\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ab4c0dd137f064b9a141d1341c546170b1c7272b", "html_url": "https://github.com/rust-lang/rust/commit/ab4c0dd137f064b9a141d1341c546170b1c7272b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ab4c0dd137f064b9a141d1341c546170b1c7272b/comments", "author": {"login": "jhpratt", "id": 3161395, "node_id": "MDQ6VXNlcjMxNjEzOTU=", "avatar_url": "https://avatars.githubusercontent.com/u/3161395?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhpratt", "html_url": "https://github.com/jhpratt", "followers_url": "https://api.github.com/users/jhpratt/followers", "following_url": "https://api.github.com/users/jhpratt/following{/other_user}", "gists_url": "https://api.github.com/users/jhpratt/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhpratt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhpratt/subscriptions", "organizations_url": "https://api.github.com/users/jhpratt/orgs", "repos_url": "https://api.github.com/users/jhpratt/repos", "events_url": "https://api.github.com/users/jhpratt/events{/privacy}", "received_events_url": "https://api.github.com/users/jhpratt/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jhpratt", "id": 3161395, "node_id": "MDQ6VXNlcjMxNjEzOTU=", "avatar_url": "https://avatars.githubusercontent.com/u/3161395?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhpratt", "html_url": "https://github.com/jhpratt", "followers_url": "https://api.github.com/users/jhpratt/followers", "following_url": "https://api.github.com/users/jhpratt/following{/other_user}", "gists_url": "https://api.github.com/users/jhpratt/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhpratt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhpratt/subscriptions", "organizations_url": "https://api.github.com/users/jhpratt/orgs", "repos_url": "https://api.github.com/users/jhpratt/repos", "events_url": "https://api.github.com/users/jhpratt/events{/privacy}", "received_events_url": "https://api.github.com/users/jhpratt/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "20282c1b20bb1ce196a3addc9f681cf6cf81feb9", "url": "https://api.github.com/repos/rust-lang/rust/commits/20282c1b20bb1ce196a3addc9f681cf6cf81feb9", "html_url": "https://github.com/rust-lang/rust/commit/20282c1b20bb1ce196a3addc9f681cf6cf81feb9"}], "stats": {"total": 10, "additions": 10, "deletions": 0}, "files": [{"sha": "c9c7a1f1bf2f687f9a0290cdc6471ddf659ea969", "filename": "compiler/rustc_span/src/edit_distance/tests.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/ab4c0dd137f064b9a141d1341c546170b1c7272b/compiler%2Frustc_span%2Fsrc%2Fedit_distance%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab4c0dd137f064b9a141d1341c546170b1c7272b/compiler%2Frustc_span%2Fsrc%2Fedit_distance%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_span%2Fsrc%2Fedit_distance%2Ftests.rs?ref=ab4c0dd137f064b9a141d1341c546170b1c7272b", "patch": "@@ -68,3 +68,13 @@ fn test_find_best_match_for_name() {\n         );\n     })\n }\n+\n+#[test]\n+fn test_precise_algorithm() {\n+    // Not Levenshtein distance.\n+    assert_ne!(edit_distance(\"ab\", \"ba\", usize::MAX), Some(2));\n+    // Not unrestricted Damerau-Levenshtein distance.\n+    assert_ne!(edit_distance(\"abde\", \"bcaed\", usize::MAX), Some(3));\n+    // The current implementation is a restricted Damerau-Levenshtein distance.\n+    assert_eq!(edit_distance(\"abde\", \"bcaed\", usize::MAX), Some(4));\n+}"}]}