{"sha": "a18de7084a729ad2400f5821bf467829660fe184", "node_id": "C_kwDOAAsO6NoAKGExOGRlNzA4NGE3MjlhZDI0MDBmNTgyMWJmNDY3ODI5NjYwZmUxODQ", "commit": {"author": {"name": "Camille GILLOT", "email": "gillot.camille@gmail.com", "date": "2022-11-15T18:06:45Z"}, "committer": {"name": "Camille GILLOT", "email": "gillot.camille@gmail.com", "date": "2022-11-15T18:06:45Z"}, "message": "Mark test as panic=abort.", "tree": {"sha": "1da31d8b6a9f0e72716e9616ef46ff9e4235254a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1da31d8b6a9f0e72716e9616ef46ff9e4235254a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a18de7084a729ad2400f5821bf467829660fe184", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a18de7084a729ad2400f5821bf467829660fe184", "html_url": "https://github.com/rust-lang/rust/commit/a18de7084a729ad2400f5821bf467829660fe184", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a18de7084a729ad2400f5821bf467829660fe184/comments", "author": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "779007da0643023deb19ab564bc4e04b5c66095b", "url": "https://api.github.com/repos/rust-lang/rust/commits/779007da0643023deb19ab564bc4e04b5c66095b", "html_url": "https://github.com/rust-lang/rust/commit/779007da0643023deb19ab564bc4e04b5c66095b"}], "stats": {"total": 34, "additions": 10, "deletions": 24}, "files": [{"sha": "eb88304466eec67c0302d88fbe2b20d00d5a1269", "filename": "src/test/mir-opt/sroa.dropping.ScalarReplacementOfAggregates.diff", "status": "modified", "additions": 5, "deletions": 21, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/a18de7084a729ad2400f5821bf467829660fe184/src%2Ftest%2Fmir-opt%2Fsroa.dropping.ScalarReplacementOfAggregates.diff", "raw_url": "https://github.com/rust-lang/rust/raw/a18de7084a729ad2400f5821bf467829660fe184/src%2Ftest%2Fmir-opt%2Fsroa.dropping.ScalarReplacementOfAggregates.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fsroa.dropping.ScalarReplacementOfAggregates.diff?ref=a18de7084a729ad2400f5821bf467829660fe184", "patch": "@@ -29,38 +29,22 @@\n           StorageDead(_4);                 // scope 0 at $DIR/sroa.rs:+1:29: +1:30\n           StorageDead(_3);                 // scope 0 at $DIR/sroa.rs:+1:29: +1:30\n           _1 = move (_2.1: Tag);           // scope 0 at $DIR/sroa.rs:+1:5: +1:32\n-          drop(_1) -> [return: bb1, unwind: bb2]; // scope 0 at $DIR/sroa.rs:+1:32: +1:33\n+          drop(_1) -> bb1;                 // scope 0 at $DIR/sroa.rs:+1:32: +1:33\n       }\n   \n       bb1: {\n-          drop((_2.0: Tag)) -> [return: bb6, unwind: bb5]; // scope 0 at $DIR/sroa.rs:+1:32: +1:33\n+          drop((_2.0: Tag)) -> bb3;        // scope 0 at $DIR/sroa.rs:+1:32: +1:33\n       }\n   \n-      bb2 (cleanup): {\n-          drop((_2.0: Tag)) -> bb7;        // scope 0 at $DIR/sroa.rs:+1:32: +1:33\n-      }\n-  \n-      bb3 (cleanup): {\n-          resume;                          // scope 0 at $DIR/sroa.rs:+0:1: +2:2\n-      }\n-  \n-      bb4: {\n+      bb2: {\n           StorageDead(_2);                 // scope 0 at $DIR/sroa.rs:+1:32: +1:33\n           StorageDead(_1);                 // scope 0 at $DIR/sroa.rs:+1:32: +1:33\n           _0 = const ();                   // scope 0 at $DIR/sroa.rs:+0:19: +2:2\n           return;                          // scope 0 at $DIR/sroa.rs:+2:2: +2:2\n       }\n   \n-      bb5 (cleanup): {\n-          drop((_2.2: Tag)) -> bb3;        // scope 0 at $DIR/sroa.rs:+1:32: +1:33\n-      }\n-  \n-      bb6: {\n-          drop((_2.2: Tag)) -> [return: bb4, unwind: bb3]; // scope 0 at $DIR/sroa.rs:+1:32: +1:33\n-      }\n-  \n-      bb7 (cleanup): {\n-          drop((_2.2: Tag)) -> bb3;        // scope 0 at $DIR/sroa.rs:+1:32: +1:33\n+      bb3: {\n+          drop((_2.2: Tag)) -> bb2;        // scope 0 at $DIR/sroa.rs:+1:32: +1:33\n       }\n   }\n   "}, {"sha": "64559b58f61f3b3520001e4b73b534d177aeec11", "filename": "src/test/mir-opt/sroa.escaping.ScalarReplacementOfAggregates.diff", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a18de7084a729ad2400f5821bf467829660fe184/src%2Ftest%2Fmir-opt%2Fsroa.escaping.ScalarReplacementOfAggregates.diff", "raw_url": "https://github.com/rust-lang/rust/raw/a18de7084a729ad2400f5821bf467829660fe184/src%2Ftest%2Fmir-opt%2Fsroa.escaping.ScalarReplacementOfAggregates.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fsroa.escaping.ScalarReplacementOfAggregates.diff?ref=a18de7084a729ad2400f5821bf467829660fe184", "patch": "@@ -17,7 +17,7 @@\n           StorageLive(_5);                 // scope 0 at $DIR/sroa.rs:+2:34: +2:37\n           _5 = g() -> bb1;                 // scope 0 at $DIR/sroa.rs:+2:34: +2:37\n                                            // mir::Constant\n-                                           // + span: $DIR/sroa.rs:76:34: 76:35\n+                                           // + span: $DIR/sroa.rs:78:34: 78:35\n                                            // + literal: Const { ty: fn() -> u32 {g}, val: Value(<ZST>) }\n       }\n   \n@@ -31,7 +31,7 @@\n           _2 = &raw const (*_3);           // scope 0 at $DIR/sroa.rs:+2:7: +2:41\n           _1 = f(move _2) -> bb2;          // scope 0 at $DIR/sroa.rs:+2:5: +2:42\n                                            // mir::Constant\n-                                           // + span: $DIR/sroa.rs:76:5: 76:6\n+                                           // + span: $DIR/sroa.rs:78:5: 78:6\n                                            // + literal: Const { ty: fn(*const u32) {f}, val: Value(<ZST>) }\n       }\n   "}, {"sha": "d4c04d5e68b8a269cfdae7158e92a89f469e8660", "filename": "src/test/mir-opt/sroa.flat.ScalarReplacementOfAggregates.diff", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a18de7084a729ad2400f5821bf467829660fe184/src%2Ftest%2Fmir-opt%2Fsroa.flat.ScalarReplacementOfAggregates.diff", "raw_url": "https://github.com/rust-lang/rust/raw/a18de7084a729ad2400f5821bf467829660fe184/src%2Ftest%2Fmir-opt%2Fsroa.flat.ScalarReplacementOfAggregates.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fsroa.flat.ScalarReplacementOfAggregates.diff?ref=a18de7084a729ad2400f5821bf467829660fe184", "patch": "@@ -53,7 +53,7 @@\n +         _9 = move _6;                    // scope 0 at $DIR/sroa.rs:+1:30: +1:70\n +         _10 = const \"a\";                 // scope 0 at $DIR/sroa.rs:+1:30: +1:70\n                                            // mir::Constant\n-                                           // + span: $DIR/sroa.rs:55:52: 55:55\n+                                           // + span: $DIR/sroa.rs:57:52: 57:55\n                                            // + literal: Const { ty: &str, val: Value(Slice(..)) }\n -         (_5.3: std::option::Option<isize>) = move _7; // scope 0 at $DIR/sroa.rs:+1:30: +1:70\n +         _11 = move _7;                   // scope 0 at $DIR/sroa.rs:+1:30: +1:70"}, {"sha": "ff8deb40d7d5a388c74f71102ae489834ad3a2e3", "filename": "src/test/mir-opt/sroa.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a18de7084a729ad2400f5821bf467829660fe184/src%2Ftest%2Fmir-opt%2Fsroa.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a18de7084a729ad2400f5821bf467829660fe184/src%2Ftest%2Fmir-opt%2Fsroa.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fsroa.rs?ref=a18de7084a729ad2400f5821bf467829660fe184", "patch": "@@ -1,4 +1,6 @@\n // unit-test: ScalarReplacementOfAggregates\n+// compile-flags: -Cpanic=abort\n+// no-prefer-dynamic\n \n struct Tag(usize);\n "}]}