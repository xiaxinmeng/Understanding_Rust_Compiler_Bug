{"sha": "c9948f5c5f5cc49a74f04e33a1b0cf6ed6a22b93", "node_id": "C_kwDOAAsO6NoAKGM5OTQ4ZjVjNWY1Y2M0OWE3NGYwNGUzM2ExYjBjZjZlZDZhMjJiOTM", "commit": {"author": {"name": "beetrees", "email": "b@beetr.ee", "date": "2022-10-14T14:51:20Z"}, "committer": {"name": "beetrees", "email": "b@beetr.ee", "date": "2022-10-14T15:07:09Z"}, "message": "Fix `Duration::{try_,}from_secs_f{32,64}(-0.0)`", "tree": {"sha": "7be0deaf4717f764422d6e88985dcbba16ffebdf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7be0deaf4717f764422d6e88985dcbba16ffebdf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c9948f5c5f5cc49a74f04e33a1b0cf6ed6a22b93", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQT9oej+Slbzs/bk2IuHkb11QZHr1gUCY0l7HQAKCRCHkb11QZHr\n1mZXAP4gyrqXT4lilf+YGFKn2XcbxVazwljcO/ps5ONZVoQQxAEAkCOjtwwXLCOW\nu1NuCLJb9eRCOWelS9HUmzdKgGBnVw4=\n=ARKb\n-----END PGP SIGNATURE-----", "payload": "tree 7be0deaf4717f764422d6e88985dcbba16ffebdf\nparent 9b0a099dfc9a97ecd10adb319396c731c4b2d169\nauthor beetrees <b@beetr.ee> 1665759080 +0100\ncommitter beetrees <b@beetr.ee> 1665760029 +0100\n\nFix `Duration::{try_,}from_secs_f{32,64}(-0.0)`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c9948f5c5f5cc49a74f04e33a1b0cf6ed6a22b93", "html_url": "https://github.com/rust-lang/rust/commit/c9948f5c5f5cc49a74f04e33a1b0cf6ed6a22b93", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c9948f5c5f5cc49a74f04e33a1b0cf6ed6a22b93/comments", "author": {"login": "beetrees", "id": 107947675, "node_id": "U_kgDOBm8mmw", "avatar_url": "https://avatars.githubusercontent.com/u/107947675?v=4", "gravatar_id": "", "url": "https://api.github.com/users/beetrees", "html_url": "https://github.com/beetrees", "followers_url": "https://api.github.com/users/beetrees/followers", "following_url": "https://api.github.com/users/beetrees/following{/other_user}", "gists_url": "https://api.github.com/users/beetrees/gists{/gist_id}", "starred_url": "https://api.github.com/users/beetrees/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/beetrees/subscriptions", "organizations_url": "https://api.github.com/users/beetrees/orgs", "repos_url": "https://api.github.com/users/beetrees/repos", "events_url": "https://api.github.com/users/beetrees/events{/privacy}", "received_events_url": "https://api.github.com/users/beetrees/received_events", "type": "User", "site_admin": false}, "committer": {"login": "beetrees", "id": 107947675, "node_id": "U_kgDOBm8mmw", "avatar_url": "https://avatars.githubusercontent.com/u/107947675?v=4", "gravatar_id": "", "url": "https://api.github.com/users/beetrees", "html_url": "https://github.com/beetrees", "followers_url": "https://api.github.com/users/beetrees/followers", "following_url": "https://api.github.com/users/beetrees/following{/other_user}", "gists_url": "https://api.github.com/users/beetrees/gists{/gist_id}", "starred_url": "https://api.github.com/users/beetrees/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/beetrees/subscriptions", "organizations_url": "https://api.github.com/users/beetrees/orgs", "repos_url": "https://api.github.com/users/beetrees/repos", "events_url": "https://api.github.com/users/beetrees/events{/privacy}", "received_events_url": "https://api.github.com/users/beetrees/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9b0a099dfc9a97ecd10adb319396c731c4b2d169", "url": "https://api.github.com/repos/rust-lang/rust/commits/9b0a099dfc9a97ecd10adb319396c731c4b2d169", "html_url": "https://github.com/rust-lang/rust/commit/9b0a099dfc9a97ecd10adb319396c731c4b2d169"}], "stats": {"total": 11, "additions": 10, "deletions": 1}, "files": [{"sha": "7cbb477d7a3469ee2a6391de9068db7295bb2d61", "filename": "library/core/src/time.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c9948f5c5f5cc49a74f04e33a1b0cf6ed6a22b93/library%2Fcore%2Fsrc%2Ftime.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c9948f5c5f5cc49a74f04e33a1b0cf6ed6a22b93/library%2Fcore%2Fsrc%2Ftime.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Ftime.rs?ref=c9948f5c5f5cc49a74f04e33a1b0cf6ed6a22b93", "patch": "@@ -1279,7 +1279,7 @@ macro_rules! try_from_secs {\n         const MANT_MASK: $bits_ty = (1 << $mant_bits) - 1;\n         const EXP_MASK: $bits_ty = (1 << $exp_bits) - 1;\n \n-        if $secs.is_sign_negative() {\n+        if $secs < 0.0 {\n             return Err(FromFloatSecsError { kind: FromFloatSecsErrorKind::Negative });\n         }\n "}, {"sha": "525a495903d5312777e1ca22e577b55f29e7ca25", "filename": "library/core/tests/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c9948f5c5f5cc49a74f04e33a1b0cf6ed6a22b93/library%2Fcore%2Ftests%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c9948f5c5f5cc49a74f04e33a1b0cf6ed6a22b93/library%2Fcore%2Ftests%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Ftests%2Flib.rs?ref=c9948f5c5f5cc49a74f04e33a1b0cf6ed6a22b93", "patch": "@@ -101,6 +101,7 @@\n #![feature(provide_any)]\n #![feature(utf8_chunks)]\n #![feature(is_ascii_octdigit)]\n+#![feature(duration_checked_float)]\n #![deny(unsafe_op_in_unsafe_fn)]\n \n extern crate test;"}, {"sha": "a05128de471ab3580f56cfa0f35e8ae5cbf348dd", "filename": "library/core/tests/time.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c9948f5c5f5cc49a74f04e33a1b0cf6ed6a22b93/library%2Fcore%2Ftests%2Ftime.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c9948f5c5f5cc49a74f04e33a1b0cf6ed6a22b93/library%2Fcore%2Ftests%2Ftime.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Ftests%2Ftime.rs?ref=c9948f5c5f5cc49a74f04e33a1b0cf6ed6a22b93", "patch": "@@ -467,3 +467,11 @@ fn duration_const() {\n     const SATURATING_MUL: Duration = MAX.saturating_mul(2);\n     assert_eq!(SATURATING_MUL, MAX);\n }\n+\n+#[test]\n+fn from_neg_zero() {\n+    assert_eq!(Duration::try_from_secs_f32(-0.0), Ok(Duration::ZERO));\n+    assert_eq!(Duration::try_from_secs_f64(-0.0), Ok(Duration::ZERO));\n+    assert_eq!(Duration::from_secs_f32(-0.0), Duration::ZERO);\n+    assert_eq!(Duration::from_secs_f64(-0.0), Duration::ZERO);\n+}"}]}