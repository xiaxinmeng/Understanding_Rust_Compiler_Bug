{"sha": "12250a2017b1a9837f918905e870761a0a03bfaf", "node_id": "MDY6Q29tbWl0NzI0NzEyOjEyMjUwYTIwMTdiMWE5ODM3ZjkxODkwNWU4NzA3NjFhMGEwM2JmYWY=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-07-09T07:12:49Z"}, "committer": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-07-28T04:53:38Z"}, "message": "Adjust feature gating of subslice patterns accordingly.", "tree": {"sha": "471e489a3867c0cb5a4eb4d76423af0ad21ace9a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/471e489a3867c0cb5a4eb4d76423af0ad21ace9a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/12250a2017b1a9837f918905e870761a0a03bfaf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/12250a2017b1a9837f918905e870761a0a03bfaf", "html_url": "https://github.com/rust-lang/rust/commit/12250a2017b1a9837f918905e870761a0a03bfaf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/12250a2017b1a9837f918905e870761a0a03bfaf/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "633c9972ac3b3e10e8f5752cb1427eabccfb3074", "url": "https://api.github.com/repos/rust-lang/rust/commits/633c9972ac3b3e10e8f5752cb1427eabccfb3074", "html_url": "https://github.com/rust-lang/rust/commit/633c9972ac3b3e10e8f5752cb1427eabccfb3074"}], "stats": {"total": 22, "additions": 17, "deletions": 5}, "files": [{"sha": "384474b08f6ee28a33c46bc66b2179693f258de5", "filename": "src/libsyntax/feature_gate.rs", "status": "modified", "additions": 17, "deletions": 5, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/12250a2017b1a9837f918905e870761a0a03bfaf/src%2Flibsyntax%2Ffeature_gate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/12250a2017b1a9837f918905e870761a0a03bfaf/src%2Flibsyntax%2Ffeature_gate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Ffeature_gate.rs?ref=12250a2017b1a9837f918905e870761a0a03bfaf", "patch": "@@ -2151,11 +2151,23 @@ impl<'a> Visitor<'a> for PostExpansionVisitor<'a> {\n     }\n \n     fn visit_pat(&mut self, pattern: &'a ast::Pat) {\n-        match pattern.node {\n-            PatKind::Slice(_, Some(ref subslice), _) => {\n-                gate_feature_post!(&self, slice_patterns,\n-                                   subslice.span,\n-                                   \"syntax for subslices in slice patterns is not yet stabilized\");\n+        match &pattern.node {\n+            PatKind::Slice(pats) => {\n+                for pat in &*pats {\n+                    let span = pat.span;\n+                    let inner_pat = match &pat.node {\n+                        PatKind::Ident(.., Some(pat)) => pat,\n+                        _ => pat,\n+                    };\n+                    if inner_pat.is_rest() {\n+                        gate_feature_post!(\n+                            &self,\n+                            slice_patterns,\n+                            span,\n+                            \"subslice patterns are unstable\"\n+                        );\n+                    }\n+                }\n             }\n             PatKind::Box(..) => {\n                 gate_feature_post!(&self, box_patterns,"}]}