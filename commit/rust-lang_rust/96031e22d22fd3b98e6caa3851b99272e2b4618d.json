{"sha": "96031e22d22fd3b98e6caa3851b99272e2b4618d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk2MDMxZTIyZDIyZmQzYjk4ZTZjYWEzODUxYjk5MjcyZTJiNDYxOGQ=", "commit": {"author": {"name": "Christian Poveda", "email": "git@christianpoveda.xyz", "date": "2020-06-18T19:52:37Z"}, "committer": {"name": "Christian Poveda", "email": "git@christianpoveda.xyz", "date": "2020-06-19T19:16:38Z"}, "message": "add new error code", "tree": {"sha": "c9f390ca17849af8918034a3b804ab44e1b9f2ff", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c9f390ca17849af8918034a3b804ab44e1b9f2ff"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/96031e22d22fd3b98e6caa3851b99272e2b4618d", "comment_count": 0, "verification": {"verified": false, "reason": "bad_email", "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYIAB0WIQRsB8A/3NrzTlMMjT0nUl7150IKUAUCXu0PGQAKCRAnUl7150IK\nUOzgAQDqYRGer1blm+irA+FKGAPXynX0E6aqjFHpEHOZpRGIRwD/S4NphquN+M3z\nN6eD3EpX3FN6e2zX+fJggZnyzp1NWQo=\n=k0n/\n-----END PGP SIGNATURE-----", "payload": "tree c9f390ca17849af8918034a3b804ab44e1b9f2ff\nparent 1f48465a0147769cfe6487212862a66518663fed\nauthor Christian Poveda <git@christianpoveda.xyz> 1592509957 -0500\ncommitter Christian Poveda <git@christianpoveda.xyz> 1592594198 -0500\n\nadd new error code\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/96031e22d22fd3b98e6caa3851b99272e2b4618d", "html_url": "https://github.com/rust-lang/rust/commit/96031e22d22fd3b98e6caa3851b99272e2b4618d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/96031e22d22fd3b98e6caa3851b99272e2b4618d/comments", "author": {"login": "pvdrz", "id": 31802960, "node_id": "MDQ6VXNlcjMxODAyOTYw", "avatar_url": "https://avatars.githubusercontent.com/u/31802960?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pvdrz", "html_url": "https://github.com/pvdrz", "followers_url": "https://api.github.com/users/pvdrz/followers", "following_url": "https://api.github.com/users/pvdrz/following{/other_user}", "gists_url": "https://api.github.com/users/pvdrz/gists{/gist_id}", "starred_url": "https://api.github.com/users/pvdrz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pvdrz/subscriptions", "organizations_url": "https://api.github.com/users/pvdrz/orgs", "repos_url": "https://api.github.com/users/pvdrz/repos", "events_url": "https://api.github.com/users/pvdrz/events{/privacy}", "received_events_url": "https://api.github.com/users/pvdrz/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pvdrz", "id": 31802960, "node_id": "MDQ6VXNlcjMxODAyOTYw", "avatar_url": "https://avatars.githubusercontent.com/u/31802960?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pvdrz", "html_url": "https://github.com/pvdrz", "followers_url": "https://api.github.com/users/pvdrz/followers", "following_url": "https://api.github.com/users/pvdrz/following{/other_user}", "gists_url": "https://api.github.com/users/pvdrz/gists{/gist_id}", "starred_url": "https://api.github.com/users/pvdrz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pvdrz/subscriptions", "organizations_url": "https://api.github.com/users/pvdrz/orgs", "repos_url": "https://api.github.com/users/pvdrz/repos", "events_url": "https://api.github.com/users/pvdrz/events{/privacy}", "received_events_url": "https://api.github.com/users/pvdrz/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1f48465a0147769cfe6487212862a66518663fed", "url": "https://api.github.com/repos/rust-lang/rust/commits/1f48465a0147769cfe6487212862a66518663fed", "html_url": "https://github.com/rust-lang/rust/commit/1f48465a0147769cfe6487212862a66518663fed"}], "stats": {"total": 148, "additions": 95, "deletions": 53}, "files": [{"sha": "738b3bc7539a6f4aad28fdfa1e3dd9671d797136", "filename": "src/librustc_error_codes/error_codes.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Flibrustc_error_codes%2Ferror_codes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Flibrustc_error_codes%2Ferror_codes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_error_codes%2Ferror_codes.rs?ref=96031e22d22fd3b98e6caa3851b99272e2b4618d", "patch": "@@ -444,6 +444,7 @@ E0760: include_str!(\"./error_codes/E0760.md\"),\n E0761: include_str!(\"./error_codes/E0761.md\"),\n E0762: include_str!(\"./error_codes/E0762.md\"),\n E0763: include_str!(\"./error_codes/E0763.md\"),\n+E0764: include_str!(\"./error_codes/E0764.md\"),\n ;\n //  E0006, // merged with E0005\n //  E0008, // cannot bind by-move into a pattern guard"}, {"sha": "e9061f988ac5906203c29abc5f0b0f77c8721a3a", "filename": "src/librustc_error_codes/error_codes/E0764.md", "status": "added", "additions": 39, "deletions": 0, "changes": 39, "blob_url": "https://github.com/rust-lang/rust/blob/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Flibrustc_error_codes%2Ferror_codes%2FE0764.md", "raw_url": "https://github.com/rust-lang/rust/raw/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Flibrustc_error_codes%2Ferror_codes%2FE0764.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_error_codes%2Ferror_codes%2FE0764.md?ref=96031e22d22fd3b98e6caa3851b99272e2b4618d", "patch": "@@ -0,0 +1,39 @@\n+Mutable references (`&mut`) can only be used in constant functions, not statics\n+or constants. This limitation exists to prevent the creation of constants that\n+have a mutable reference in their final value. If you had a constant of `&mut\n+i32` type, you could modify the value through that reference, making the\n+constant essentially mutable. While there could be a more fine-grained scheme\n+in the future that allows mutable references if they are not \"leaked\" to the\n+final value, a more conservative approach was chosen for now. `const fn` do not\n+have this problem, as the borrow checker will prevent the `const fn` from\n+returning new mutable references.\n+\n+Erroneous code example:\n+\n+```compile_fail,E0764\n+#![feature(const_fn)]\n+#![feature(const_mut_refs)]\n+\n+fn main() {\n+    const OH_NO: &'static mut usize = &mut 1; // error!\n+}\n+```\n+\n+Remember: you cannot use a function call inside a constant or static. However,\n+you can totally use it in constant functions:\n+\n+```\n+#![feature(const_fn)]\n+#![feature(const_mut_refs)]\n+\n+const fn foo(x: usize) -> usize {\n+    let mut y = 1;\n+    let z = &mut y;\n+    *z += x;\n+    y\n+}\n+\n+fn main() {\n+    const FOO: usize = foo(10); // ok!\n+}\n+```"}, {"sha": "733ae9084511cc139564abb1c05900ef554b2373", "filename": "src/librustc_mir/transform/check_consts/ops.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Flibrustc_mir%2Ftransform%2Fcheck_consts%2Fops.rs", "raw_url": "https://github.com/rust-lang/rust/raw/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Flibrustc_mir%2Ftransform%2Fcheck_consts%2Fops.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Ftransform%2Fcheck_consts%2Fops.rs?ref=96031e22d22fd3b98e6caa3851b99272e2b4618d", "patch": "@@ -227,7 +227,7 @@ impl NonConstOp for MutBorrow {\n             struct_span_err!(\n                 ccx.tcx.sess,\n                 span,\n-                E0019,\n+                E0764,\n                 \"mutable references are not allowed in {}s\",\n                 ccx.const_kind(),\n             )"}, {"sha": "9ffbb483d139d2e9bd7845e576b76bc105f013ae", "filename": "src/test/ui/check-static-immutable-mut-slices.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Fcheck-static-immutable-mut-slices.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Fcheck-static-immutable-mut-slices.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcheck-static-immutable-mut-slices.stderr?ref=96031e22d22fd3b98e6caa3851b99272e2b4618d", "patch": "@@ -1,9 +1,9 @@\n-error[E0019]: mutable references are not allowed in statics\n+error[E0764]: mutable references are not allowed in statics\n   --> $DIR/check-static-immutable-mut-slices.rs:3:37\n    |\n LL | static TEST: &'static mut [isize] = &mut [];\n    |                                     ^^^^^^^ `&mut` is only allowed in `const fn`\n \n error: aborting due to previous error\n \n-For more information about this error, try `rustc --explain E0019`.\n+For more information about this error, try `rustc --explain E0764`."}, {"sha": "f843a94fabd8de157e63b6fa57943b90d823f5e6", "filename": "src/test/ui/consts/const-eval/issue-65394.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fissue-65394.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fissue-65394.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fissue-65394.stderr?ref=96031e22d22fd3b98e6caa3851b99272e2b4618d", "patch": "@@ -1,4 +1,4 @@\n-error[E0019]: mutable references are not allowed in constants\n+error[E0764]: mutable references are not allowed in constants\n   --> $DIR/issue-65394.rs:8:13\n    |\n LL |     let r = &mut x;\n@@ -12,5 +12,5 @@ LL |     let mut x = Vec::<i32>::new();\n \n error: aborting due to 2 previous errors\n \n-Some errors have detailed explanations: E0019, E0493.\n-For more information about an error, try `rustc --explain E0019`.\n+Some errors have detailed explanations: E0493, E0764.\n+For more information about an error, try `rustc --explain E0493`."}, {"sha": "9a7914b458874a748167ebb0528fe2e14525539a", "filename": "src/test/ui/consts/const-multi-ref.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Fconsts%2Fconst-multi-ref.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Fconsts%2Fconst-multi-ref.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-multi-ref.stderr?ref=96031e22d22fd3b98e6caa3851b99272e2b4618d", "patch": "@@ -1,4 +1,4 @@\n-error[E0019]: mutable references are not allowed in constants\n+error[E0764]: mutable references are not allowed in constants\n   --> $DIR/const-multi-ref.rs:6:13\n    |\n LL |     let p = &mut a;\n@@ -12,5 +12,5 @@ LL |     let p = &a;\n \n error: aborting due to 2 previous errors\n \n-Some errors have detailed explanations: E0019, E0492.\n-For more information about an error, try `rustc --explain E0019`.\n+Some errors have detailed explanations: E0492, E0764.\n+For more information about an error, try `rustc --explain E0492`."}, {"sha": "2214ce6ee1c8768fafd979f9f2f1bbe6fb483a35", "filename": "src/test/ui/consts/const-mut-refs/const_mut_address_of.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Fconsts%2Fconst-mut-refs%2Fconst_mut_address_of.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Fconsts%2Fconst-mut-refs%2Fconst_mut_address_of.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-mut-refs%2Fconst_mut_address_of.stderr?ref=96031e22d22fd3b98e6caa3851b99272e2b4618d", "patch": "@@ -1,15 +1,15 @@\n-error[E0019]: mutable references are not allowed in constants\n+error[E0764]: mutable references are not allowed in constants\n   --> $DIR/const_mut_address_of.rs:24:5\n    |\n LL |     foo().bar();\n    |     ^^^^^ `&mut` is only allowed in `const fn`\n \n-error[E0019]: mutable references are not allowed in constants\n+error[E0764]: mutable references are not allowed in constants\n   --> $DIR/const_mut_address_of.rs:26:9\n    |\n LL |     baz(&mut foo());\n    |         ^^^^^^^^^^ `&mut` is only allowed in `const fn`\n \n error: aborting due to 2 previous errors\n \n-For more information about this error, try `rustc --explain E0019`.\n+For more information about this error, try `rustc --explain E0764`."}, {"sha": "4ca7b128b7c4b8253ad5e8fa7a650229c0a6c2a6", "filename": "src/test/ui/consts/const-mut-refs/const_mut_refs.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Fconsts%2Fconst-mut-refs%2Fconst_mut_refs.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Fconsts%2Fconst-mut-refs%2Fconst_mut_refs.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-mut-refs%2Fconst_mut_refs.stderr?ref=96031e22d22fd3b98e6caa3851b99272e2b4618d", "patch": "@@ -1,21 +1,21 @@\n-error[E0019]: mutable references are not allowed in constants\n+error[E0764]: mutable references are not allowed in constants\n   --> $DIR/const_mut_refs.rs:31:17\n    |\n LL |     let _: [(); foo().bar()] = [(); 1];\n    |                 ^^^^^ `&mut` is only allowed in `const fn`\n \n-error[E0019]: mutable references are not allowed in constants\n+error[E0764]: mutable references are not allowed in constants\n   --> $DIR/const_mut_refs.rs:33:21\n    |\n LL |     let _: [(); baz(&mut foo())] = [(); 2];\n    |                     ^^^^^^^^^^ `&mut` is only allowed in `const fn`\n \n-error[E0019]: mutable references are not allowed in constants\n+error[E0764]: mutable references are not allowed in constants\n   --> $DIR/const_mut_refs.rs:35:22\n    |\n LL |     let _: [(); bazz(&mut foo())] = [(); 3];\n    |                      ^^^^^^^^^^ `&mut` is only allowed in `const fn`\n \n error: aborting due to 3 previous errors\n \n-For more information about this error, try `rustc --explain E0019`.\n+For more information about this error, try `rustc --explain E0764`."}, {"sha": "dd05a4c0bb069c9ff3184829fb0aea8990fb3954", "filename": "src/test/ui/consts/const_let_assign3.stderr", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Fconsts%2Fconst_let_assign3.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Fconsts%2Fconst_let_assign3.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst_let_assign3.stderr?ref=96031e22d22fd3b98e6caa3851b99272e2b4618d", "patch": "@@ -6,13 +6,13 @@ LL |         self.state = x;\n    |\n    = help: add `#![feature(const_mut_refs)]` to the crate attributes to enable\n \n-error[E0019]: mutable references are not allowed in constants\n+error[E0764]: mutable references are not allowed in constants\n   --> $DIR/const_let_assign3.rs:16:5\n    |\n LL |     s.foo(3);\n    |     ^ `&mut` is only allowed in `const fn`\n \n-error[E0019]: mutable references are not allowed in constants\n+error[E0764]: mutable references are not allowed in constants\n   --> $DIR/const_let_assign3.rs:22:13\n    |\n LL |     let y = &mut x;\n@@ -28,4 +28,5 @@ LL |     *y = 42;\n \n error: aborting due to 4 previous errors\n \n-For more information about this error, try `rustc --explain E0019`.\n+Some errors have detailed explanations: E0019, E0764.\n+For more information about an error, try `rustc --explain E0019`."}, {"sha": "fad8f011f75f55ba17f3926d9408a4641f05f4fb", "filename": "src/test/ui/consts/projection_qualif.mut_refs.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Fconsts%2Fprojection_qualif.mut_refs.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Fconsts%2Fprojection_qualif.mut_refs.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fprojection_qualif.mut_refs.stderr?ref=96031e22d22fd3b98e6caa3851b99272e2b4618d", "patch": "@@ -1,4 +1,4 @@\n-error[E0019]: mutable references are not allowed in constants\n+error[E0764]: mutable references are not allowed in constants\n   --> $DIR/projection_qualif.rs:10:27\n    |\n LL |         let b: *mut u32 = &mut a;\n@@ -15,5 +15,5 @@ LL |         unsafe { *b = 5; }\n \n error: aborting due to 2 previous errors\n \n-Some errors have detailed explanations: E0019, E0658.\n-For more information about an error, try `rustc --explain E0019`.\n+Some errors have detailed explanations: E0658, E0764.\n+For more information about an error, try `rustc --explain E0658`."}, {"sha": "212f12286455f44a53a48f23df2aa48e419a9a99", "filename": "src/test/ui/consts/projection_qualif.stock.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Fconsts%2Fprojection_qualif.stock.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Fconsts%2Fprojection_qualif.stock.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fprojection_qualif.stock.stderr?ref=96031e22d22fd3b98e6caa3851b99272e2b4618d", "patch": "@@ -1,4 +1,4 @@\n-error[E0019]: mutable references are not allowed in constants\n+error[E0764]: mutable references are not allowed in constants\n   --> $DIR/projection_qualif.rs:10:27\n    |\n LL |         let b: *mut u32 = &mut a;\n@@ -23,5 +23,5 @@ LL |         unsafe { *b = 5; }\n \n error: aborting due to 3 previous errors\n \n-Some errors have detailed explanations: E0019, E0658.\n+Some errors have detailed explanations: E0019, E0658, E0764.\n For more information about an error, try `rustc --explain E0019`."}, {"sha": "c936ac0b7d585208c1bfa044535ffe4732e0bc91", "filename": "src/test/ui/consts/read_from_static_mut_ref.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Fconsts%2Fread_from_static_mut_ref.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Fconsts%2Fread_from_static_mut_ref.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fread_from_static_mut_ref.stderr?ref=96031e22d22fd3b98e6caa3851b99272e2b4618d", "patch": "@@ -1,9 +1,9 @@\n-error[E0019]: mutable references are not allowed in statics\n+error[E0764]: mutable references are not allowed in statics\n   --> $DIR/read_from_static_mut_ref.rs:5:26\n    |\n LL | static OH_NO: &mut i32 = &mut 42;\n    |                          ^^^^^^^ `&mut` is only allowed in `const fn`\n \n error: aborting due to previous error\n \n-For more information about this error, try `rustc --explain E0019`.\n+For more information about this error, try `rustc --explain E0764`."}, {"sha": "36c280ca5c607bc33c5f1dbb9f00c67b9900ec10", "filename": "src/test/ui/consts/static_mut_containing_mut_ref2.mut_refs.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Fconsts%2Fstatic_mut_containing_mut_ref2.mut_refs.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Fconsts%2Fstatic_mut_containing_mut_ref2.mut_refs.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fstatic_mut_containing_mut_ref2.mut_refs.stderr?ref=96031e22d22fd3b98e6caa3851b99272e2b4618d", "patch": "@@ -1,9 +1,9 @@\n-error[E0019]: mutable references are not allowed in statics\n+error[E0764]: mutable references are not allowed in statics\n   --> $DIR/static_mut_containing_mut_ref2.rs:7:46\n    |\n LL | pub static mut STDERR_BUFFER: () = unsafe { *(&mut STDERR_BUFFER_SPACE) = 42; };\n    |                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^ `&mut` is only allowed in `const fn`\n \n error: aborting due to previous error\n \n-For more information about this error, try `rustc --explain E0019`.\n+For more information about this error, try `rustc --explain E0764`."}, {"sha": "57fb27e642e6f00aa30cd95a338f1825814deed7", "filename": "src/test/ui/consts/static_mut_containing_mut_ref2.stock.stderr", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Fconsts%2Fstatic_mut_containing_mut_ref2.stock.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Fconsts%2Fstatic_mut_containing_mut_ref2.stock.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fstatic_mut_containing_mut_ref2.stock.stderr?ref=96031e22d22fd3b98e6caa3851b99272e2b4618d", "patch": "@@ -1,4 +1,4 @@\n-error[E0019]: mutable references are not allowed in statics\n+error[E0764]: mutable references are not allowed in statics\n   --> $DIR/static_mut_containing_mut_ref2.rs:7:46\n    |\n LL | pub static mut STDERR_BUFFER: () = unsafe { *(&mut STDERR_BUFFER_SPACE) = 42; };\n@@ -14,4 +14,5 @@ LL | pub static mut STDERR_BUFFER: () = unsafe { *(&mut STDERR_BUFFER_SPACE) = 4\n \n error: aborting due to 2 previous errors\n \n-For more information about this error, try `rustc --explain E0019`.\n+Some errors have detailed explanations: E0019, E0764.\n+For more information about an error, try `rustc --explain E0019`."}, {"sha": "818dec1207b961c621d459b2c72104e001f2d1ef", "filename": "src/test/ui/error-codes/E0017.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Ferror-codes%2FE0017.rs", "raw_url": "https://github.com/rust-lang/rust/raw/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Ferror-codes%2FE0017.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferror-codes%2FE0017.rs?ref=96031e22d22fd3b98e6caa3851b99272e2b4618d", "patch": "@@ -2,10 +2,10 @@ static X: i32 = 1;\n const C: i32 = 2;\n static mut M: i32 = 3;\n \n-const CR: &'static mut i32 = &mut C; //~ ERROR E0019\n-static STATIC_REF: &'static mut i32 = &mut X; //~ ERROR E0019\n+const CR: &'static mut i32 = &mut C; //~ ERROR E0764\n+static STATIC_REF: &'static mut i32 = &mut X; //~ ERROR E0764\n                                               //~| ERROR E0019\n                                               //~| ERROR cannot borrow\n-static CONST_REF: &'static mut i32 = &mut C; //~ ERROR E0019\n-static STATIC_MUT_REF: &'static mut i32 = unsafe { &mut M }; //~ ERROR E0019\n+static CONST_REF: &'static mut i32 = &mut C; //~ ERROR E0764\n+static STATIC_MUT_REF: &'static mut i32 = unsafe { &mut M }; //~ ERROR E0764\n fn main() {}"}, {"sha": "c1d96de1dca7c94346e98e3d4f85804fc3fe6c18", "filename": "src/test/ui/error-codes/E0017.stderr", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Ferror-codes%2FE0017.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Ferror-codes%2FE0017.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferror-codes%2FE0017.stderr?ref=96031e22d22fd3b98e6caa3851b99272e2b4618d", "patch": "@@ -1,4 +1,4 @@\n-error[E0019]: mutable references are not allowed in constants\n+error[E0764]: mutable references are not allowed in constants\n   --> $DIR/E0017.rs:5:30\n    |\n LL | const CR: &'static mut i32 = &mut C;\n@@ -12,7 +12,7 @@ LL | static STATIC_REF: &'static mut i32 = &mut X;\n    |\n    = help: add `#![feature(const_mut_refs)]` to the crate attributes to enable\n \n-error[E0019]: mutable references are not allowed in statics\n+error[E0764]: mutable references are not allowed in statics\n   --> $DIR/E0017.rs:6:39\n    |\n LL | static STATIC_REF: &'static mut i32 = &mut X;\n@@ -24,19 +24,19 @@ error[E0596]: cannot borrow immutable static item `X` as mutable\n LL | static STATIC_REF: &'static mut i32 = &mut X;\n    |                                       ^^^^^^ cannot borrow as mutable\n \n-error[E0019]: mutable references are not allowed in statics\n+error[E0764]: mutable references are not allowed in statics\n   --> $DIR/E0017.rs:9:38\n    |\n LL | static CONST_REF: &'static mut i32 = &mut C;\n    |                                      ^^^^^^ `&mut` is only allowed in `const fn`\n \n-error[E0019]: mutable references are not allowed in statics\n+error[E0764]: mutable references are not allowed in statics\n   --> $DIR/E0017.rs:10:52\n    |\n LL | static STATIC_MUT_REF: &'static mut i32 = unsafe { &mut M };\n    |                                                    ^^^^^^ `&mut` is only allowed in `const fn`\n \n error: aborting due to 6 previous errors\n \n-Some errors have detailed explanations: E0019, E0596.\n+Some errors have detailed explanations: E0019, E0596, E0764.\n For more information about an error, try `rustc --explain E0019`."}, {"sha": "13131017c2e07df2e87dd9da1cebd72dea8fd39b", "filename": "src/test/ui/error-codes/E0388.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Ferror-codes%2FE0388.rs", "raw_url": "https://github.com/rust-lang/rust/raw/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Ferror-codes%2FE0388.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferror-codes%2FE0388.rs?ref=96031e22d22fd3b98e6caa3851b99272e2b4618d", "patch": "@@ -1,10 +1,10 @@\n static X: i32 = 1;\n const C: i32 = 2;\n \n-const CR: &'static mut i32 = &mut C; //~ ERROR E0019\n+const CR: &'static mut i32 = &mut C; //~ ERROR E0764\n static STATIC_REF: &'static mut i32 = &mut X; //~ ERROR E0019\n                                               //~| ERROR cannot borrow\n-                                              //~| ERROR E0019\n-static CONST_REF: &'static mut i32 = &mut C; //~ ERROR E0019\n+                                              //~| ERROR E0764\n+static CONST_REF: &'static mut i32 = &mut C; //~ ERROR E0764\n \n fn main() {}"}, {"sha": "f09100bac43ce2c9c29a795dbb5d07f15161daa2", "filename": "src/test/ui/error-codes/E0388.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Ferror-codes%2FE0388.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Ferror-codes%2FE0388.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferror-codes%2FE0388.stderr?ref=96031e22d22fd3b98e6caa3851b99272e2b4618d", "patch": "@@ -1,4 +1,4 @@\n-error[E0019]: mutable references are not allowed in constants\n+error[E0764]: mutable references are not allowed in constants\n   --> $DIR/E0388.rs:4:30\n    |\n LL | const CR: &'static mut i32 = &mut C;\n@@ -12,7 +12,7 @@ LL | static STATIC_REF: &'static mut i32 = &mut X;\n    |\n    = help: add `#![feature(const_mut_refs)]` to the crate attributes to enable\n \n-error[E0019]: mutable references are not allowed in statics\n+error[E0764]: mutable references are not allowed in statics\n   --> $DIR/E0388.rs:5:39\n    |\n LL | static STATIC_REF: &'static mut i32 = &mut X;\n@@ -24,13 +24,13 @@ error[E0596]: cannot borrow immutable static item `X` as mutable\n LL | static STATIC_REF: &'static mut i32 = &mut X;\n    |                                       ^^^^^^ cannot borrow as mutable\n \n-error[E0019]: mutable references are not allowed in statics\n+error[E0764]: mutable references are not allowed in statics\n   --> $DIR/E0388.rs:8:38\n    |\n LL | static CONST_REF: &'static mut i32 = &mut C;\n    |                                      ^^^^^^ `&mut` is only allowed in `const fn`\n \n error: aborting due to 5 previous errors\n \n-Some errors have detailed explanations: E0019, E0596.\n+Some errors have detailed explanations: E0019, E0596, E0764.\n For more information about an error, try `rustc --explain E0019`."}, {"sha": "7c50978d4ebb83932e167818a6cf94cd9194b5cf", "filename": "src/test/ui/issues/issue-17718-const-bad-values.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Fissues%2Fissue-17718-const-bad-values.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Fissues%2Fissue-17718-const-bad-values.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-17718-const-bad-values.stderr?ref=96031e22d22fd3b98e6caa3851b99272e2b4618d", "patch": "@@ -1,4 +1,4 @@\n-error[E0019]: mutable references are not allowed in constants\n+error[E0764]: mutable references are not allowed in constants\n   --> $DIR/issue-17718-const-bad-values.rs:1:34\n    |\n LL | const C1: &'static mut [usize] = &mut [];\n@@ -20,13 +20,13 @@ LL | const C2: &'static mut usize = unsafe { &mut S };\n    |\n    = help: consider extracting the value of the `static` to a `const`, and referring to that\n \n-error[E0019]: mutable references are not allowed in constants\n+error[E0764]: mutable references are not allowed in constants\n   --> $DIR/issue-17718-const-bad-values.rs:5:41\n    |\n LL | const C2: &'static mut usize = unsafe { &mut S };\n    |                                         ^^^^^^ `&mut` is only allowed in `const fn`\n \n error: aborting due to 4 previous errors\n \n-Some errors have detailed explanations: E0013, E0019.\n+Some errors have detailed explanations: E0013, E0764.\n For more information about an error, try `rustc --explain E0013`."}, {"sha": "273187a5a13beb44b38cdfd24b3c891614288d08", "filename": "src/test/ui/issues/issue-46604.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Fissues%2Fissue-46604.rs", "raw_url": "https://github.com/rust-lang/rust/raw/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Fissues%2Fissue-46604.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-46604.rs?ref=96031e22d22fd3b98e6caa3851b99272e2b4618d", "patch": "@@ -1,4 +1,4 @@\n-static buf: &mut [u8] = &mut [1u8,2,3,4,5,7];   //~ ERROR E0019\n+static buf: &mut [u8] = &mut [1u8,2,3,4,5,7];   //~ ERROR E0764\n fn write<T: AsRef<[u8]>>(buffer: T) { }\n \n fn main() {"}, {"sha": "5421721dec2e315c72272de197f4628b70c92f23", "filename": "src/test/ui/issues/issue-46604.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Fissues%2Fissue-46604.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/96031e22d22fd3b98e6caa3851b99272e2b4618d/src%2Ftest%2Fui%2Fissues%2Fissue-46604.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-46604.stderr?ref=96031e22d22fd3b98e6caa3851b99272e2b4618d", "patch": "@@ -1,4 +1,4 @@\n-error[E0019]: mutable references are not allowed in statics\n+error[E0764]: mutable references are not allowed in statics\n   --> $DIR/issue-46604.rs:1:25\n    |\n LL | static buf: &mut [u8] = &mut [1u8,2,3,4,5,7];\n@@ -12,5 +12,5 @@ LL |     buf[0]=2;\n \n error: aborting due to 2 previous errors\n \n-Some errors have detailed explanations: E0019, E0594.\n-For more information about an error, try `rustc --explain E0019`.\n+Some errors have detailed explanations: E0594, E0764.\n+For more information about an error, try `rustc --explain E0594`."}]}