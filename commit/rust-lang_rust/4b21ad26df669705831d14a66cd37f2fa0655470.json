{"sha": "4b21ad26df669705831d14a66cd37f2fa0655470", "node_id": "C_kwDOAAsO6NoAKDRiMjFhZDI2ZGY2Njk3MDU4MzFkMTRhNjZjZDM3ZjJmYTA2NTU0NzA", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-07-20T16:58:20Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-07-20T16:58:20Z"}, "message": "Rollup merge of #99508 - TaKO8Ki:avoid-symbol-to-string-conversion-in-BuiltinLintDiagnostics, r=compiler-errors\n\nAvoid `Symbol` to `String` conversions\n\nfollow-up to #99342", "tree": {"sha": "34d0d686351dff3209831e8f1bf21236672df357", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/34d0d686351dff3209831e8f1bf21236672df357"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4b21ad26df669705831d14a66cd37f2fa0655470", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJi2DQtCRBK7hj4Ov3rIwAAYj8IAG0evuQloVD46reWHbAoK3mf\n9QNNqMvN+z1hYfNzOjU+45TqiacqtDXWEpNaSuLto6+/peRBt/BaieEKVq0DSZPJ\nkpbG+uon5kqvrzN75hwtPtnhvSkYJ5wZNboKbiVLiOABjRStM/eMXYgc2Fpgaai/\nJ7lRHoqN1I2YkTBL2/K97Op9IPwk2caGP0lQ4/sAKQacnBpNW7VYUGPlYGg9QQWE\nn1VHGV7sHzeQJAhMvIehCE4FeksZqDVkHF0tp0XWLuwr75KVLqZC596igdXcHRJ6\nDfd8cPAOFfe/rJTH9gCllms0Pu6HuN9GwmNr7DmmvVNMJO8u0Z6TTbL5LCdo++Y=\n=14Fl\n-----END PGP SIGNATURE-----\n", "payload": "tree 34d0d686351dff3209831e8f1bf21236672df357\nparent 73ef81dcea5e7e204cac798ff787551f29a7257b\nparent 56e7777755945041da1f898d1bd1887e554adce1\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1658336300 +0200\ncommitter GitHub <noreply@github.com> 1658336300 +0200\n\nRollup merge of #99508 - TaKO8Ki:avoid-symbol-to-string-conversion-in-BuiltinLintDiagnostics, r=compiler-errors\n\nAvoid `Symbol` to `String` conversions\n\nfollow-up to #99342\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4b21ad26df669705831d14a66cd37f2fa0655470", "html_url": "https://github.com/rust-lang/rust/commit/4b21ad26df669705831d14a66cd37f2fa0655470", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4b21ad26df669705831d14a66cd37f2fa0655470/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "73ef81dcea5e7e204cac798ff787551f29a7257b", "url": "https://api.github.com/repos/rust-lang/rust/commits/73ef81dcea5e7e204cac798ff787551f29a7257b", "html_url": "https://github.com/rust-lang/rust/commit/73ef81dcea5e7e204cac798ff787551f29a7257b"}, {"sha": "56e7777755945041da1f898d1bd1887e554adce1", "url": "https://api.github.com/repos/rust-lang/rust/commits/56e7777755945041da1f898d1bd1887e554adce1", "html_url": "https://github.com/rust-lang/rust/commit/56e7777755945041da1f898d1bd1887e554adce1"}], "stats": {"total": 25, "additions": 11, "deletions": 14}, "files": [{"sha": "ce897abb766e5ffd9fd1da51e5f1e88fa930f938", "filename": "compiler/rustc_builtin_macros/src/format.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/4b21ad26df669705831d14a66cd37f2fa0655470/compiler%2Frustc_builtin_macros%2Fsrc%2Fformat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4b21ad26df669705831d14a66cd37f2fa0655470/compiler%2Frustc_builtin_macros%2Fsrc%2Fformat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_builtin_macros%2Fsrc%2Fformat.rs?ref=4b21ad26df669705831d14a66cd37f2fa0655470", "patch": "@@ -1004,9 +1004,7 @@ fn lint_named_arguments_used_positionally(\n                 node_id: ast::CRATE_NODE_ID,\n                 lint_id: LintId::of(&NAMED_ARGUMENTS_USED_POSITIONALLY),\n                 diagnostic: BuiltinLintDiagnostics::NamedArgumentUsedPositionally(\n-                    arg_span,\n-                    span,\n-                    symbol.to_string(),\n+                    arg_span, span, symbol,\n                 ),\n             });\n         }"}, {"sha": "ba888d77b15c1644708d9e82c13dd49833d594fb", "filename": "compiler/rustc_errors/src/diagnostic.rs", "status": "modified", "additions": 7, "deletions": 8, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/4b21ad26df669705831d14a66cd37f2fa0655470/compiler%2Frustc_errors%2Fsrc%2Fdiagnostic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4b21ad26df669705831d14a66cd37f2fa0655470/compiler%2Frustc_errors%2Fsrc%2Fdiagnostic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_errors%2Fsrc%2Fdiagnostic.rs?ref=4b21ad26df669705831d14a66cd37f2fa0655470", "patch": "@@ -390,18 +390,17 @@ impl Diagnostic {\n         expected: DiagnosticStyledString,\n         found: DiagnosticStyledString,\n     ) -> &mut Self {\n-        let mut msg: Vec<_> =\n-            vec![(\"required when trying to coerce from type `\".to_string(), Style::NoStyle)];\n+        let mut msg: Vec<_> = vec![(\"required when trying to coerce from type `\", Style::NoStyle)];\n         msg.extend(expected.0.iter().map(|x| match *x {\n-            StringPart::Normal(ref s) => (s.to_owned(), Style::NoStyle),\n-            StringPart::Highlighted(ref s) => (s.to_owned(), Style::Highlight),\n+            StringPart::Normal(ref s) => (s.as_str(), Style::NoStyle),\n+            StringPart::Highlighted(ref s) => (s.as_str(), Style::Highlight),\n         }));\n-        msg.push((\"` to type '\".to_string(), Style::NoStyle));\n+        msg.push((\"` to type '\", Style::NoStyle));\n         msg.extend(found.0.iter().map(|x| match *x {\n-            StringPart::Normal(ref s) => (s.to_owned(), Style::NoStyle),\n-            StringPart::Highlighted(ref s) => (s.to_owned(), Style::Highlight),\n+            StringPart::Normal(ref s) => (s.as_str(), Style::NoStyle),\n+            StringPart::Highlighted(ref s) => (s.as_str(), Style::Highlight),\n         }));\n-        msg.push((\"`\".to_string(), Style::NoStyle));\n+        msg.push((\"`\", Style::NoStyle));\n \n         // For now, just attach these as notes\n         self.highlighted_note(msg);"}, {"sha": "3872d866dee86ff455a0d39384271e6dffd79b70", "filename": "compiler/rustc_lint_defs/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4b21ad26df669705831d14a66cd37f2fa0655470/compiler%2Frustc_lint_defs%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4b21ad26df669705831d14a66cd37f2fa0655470/compiler%2Frustc_lint_defs%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_lint_defs%2Fsrc%2Flib.rs?ref=4b21ad26df669705831d14a66cd37f2fa0655470", "patch": "@@ -467,7 +467,7 @@ pub enum BuiltinLintDiagnostics {\n         /// If true, the lifetime will be fully elided.\n         use_span: Option<(Span, bool)>,\n     },\n-    NamedArgumentUsedPositionally(Option<Span>, Span, String),\n+    NamedArgumentUsedPositionally(Option<Span>, Span, Symbol),\n }\n \n /// Lints that are buffered up early on in the `Session` before the"}, {"sha": "df13136dcce37c42a7649ebac92eddbe3562c4fa", "filename": "compiler/rustc_resolve/src/diagnostics.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/4b21ad26df669705831d14a66cd37f2fa0655470/compiler%2Frustc_resolve%2Fsrc%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4b21ad26df669705831d14a66cd37f2fa0655470/compiler%2Frustc_resolve%2Fsrc%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_resolve%2Fsrc%2Fdiagnostics.rs?ref=4b21ad26df669705831d14a66cd37f2fa0655470", "patch": "@@ -2603,9 +2603,9 @@ fn show_candidates(\n                 .skip(1)\n                 .all(|(_, descr, _, _)| descr == descr_first)\n             {\n-                descr_first.to_string()\n+                descr_first\n             } else {\n-                \"item\".to_string()\n+                \"item\"\n             };\n             let plural_descr =\n                 if descr.ends_with(\"s\") { format!(\"{}es\", descr) } else { format!(\"{}s\", descr) };"}]}