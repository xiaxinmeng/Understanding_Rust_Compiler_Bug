{"sha": "9dfe4af2a85a10d0ffdc991178a288c711fb94d4", "node_id": "C_kwDOAAsO6NoAKDlkZmU0YWYyYTg1YTEwZDBmZmRjOTkxMTc4YTI4OGM3MTFmYjk0ZDQ", "commit": {"author": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2023-04-05T22:18:30Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-04-05T22:18:30Z"}, "message": "Rollup merge of #109926 - SparrowLii:parallel_log, r=eholk\n\nwrite threads info into log only when debugging\n\nThe current tracing log will unconditionally write thread information during parallel compilation, which sometimes confuses some normal output log information\n\nThis fixes the UI test failure of:\n```\n[ui] tests/ui/consts/const_in_pattern/issue-73431.rs\n```\nUpdates #75760", "tree": {"sha": "50f34964dad0a3006236259dcfb3c38a7fb113e6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/50f34964dad0a3006236259dcfb3c38a7fb113e6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9dfe4af2a85a10d0ffdc991178a288c711fb94d4", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJkLfO2CRBK7hj4Ov3rIwAAcp8IAFp4eeFdeCVQXDX8OHlPn4pP\n2lxEmCfjv7j46L67LxquxEjh0C5QW7mZf2Ajs/WSdntSWN+btbF4tB5ZgqvYS1+2\nuxVSwF3lD+4nz9Pwe8VWPP2EMhzYMd48Lz1aPDayBc7LQOAbf6rSudKXN7RKHsH5\nLxiGFq4PF+oAo/qimNseHuR6PjR+5fLk6oz4F13a+w8ZWaaj+hCTjkIA9DQBntjB\nZ9SGJW/Lz82h/OIW3TQ67yZUfpxdOHyQq6/I65169CQAPUSmSV3bMIDgYlhEgcAH\nDuLtst6gjLCtWxV2/zstGM5nXFRoGaZEuGu4Y0ex6ia8Joms9o/+JOPjRVm5KZ0=\n=vya9\n-----END PGP SIGNATURE-----\n", "payload": "tree 50f34964dad0a3006236259dcfb3c38a7fb113e6\nparent 836504ec34f1f291a7cfe6fbe4374363defed7bd\nparent 8b21f9ee22fa96a656bfcbf6f0a57120304d56a8\nauthor Yuki Okushi <jtitor@2k36.org> 1680733110 +0900\ncommitter GitHub <noreply@github.com> 1680733110 +0900\n\nRollup merge of #109926 - SparrowLii:parallel_log, r=eholk\n\nwrite threads info into log only when debugging\n\nThe current tracing log will unconditionally write thread information during parallel compilation, which sometimes confuses some normal output log information\n\nThis fixes the UI test failure of:\n```\n[ui] tests/ui/consts/const_in_pattern/issue-73431.rs\n```\nUpdates #75760\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9dfe4af2a85a10d0ffdc991178a288c711fb94d4", "html_url": "https://github.com/rust-lang/rust/commit/9dfe4af2a85a10d0ffdc991178a288c711fb94d4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9dfe4af2a85a10d0ffdc991178a288c711fb94d4/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "836504ec34f1f291a7cfe6fbe4374363defed7bd", "url": "https://api.github.com/repos/rust-lang/rust/commits/836504ec34f1f291a7cfe6fbe4374363defed7bd", "html_url": "https://github.com/rust-lang/rust/commit/836504ec34f1f291a7cfe6fbe4374363defed7bd"}, {"sha": "8b21f9ee22fa96a656bfcbf6f0a57120304d56a8", "url": "https://api.github.com/repos/rust-lang/rust/commits/8b21f9ee22fa96a656bfcbf6f0a57120304d56a8", "html_url": "https://github.com/rust-lang/rust/commit/8b21f9ee22fa96a656bfcbf6f0a57120304d56a8"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "21f6a404a01534da91f3c31761b6156e197f37c6", "filename": "compiler/rustc_log/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9dfe4af2a85a10d0ffdc991178a288c711fb94d4/compiler%2Frustc_log%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9dfe4af2a85a10d0ffdc991178a288c711fb94d4/compiler%2Frustc_log%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_log%2Fsrc%2Flib.rs?ref=9dfe4af2a85a10d0ffdc991178a288c711fb94d4", "patch": "@@ -83,7 +83,7 @@ pub fn init_env_logger(env: &str) -> Result<(), Error> {\n         .with_verbose_exit(verbose_entry_exit)\n         .with_verbose_entry(verbose_entry_exit)\n         .with_indent_amount(2);\n-    #[cfg(parallel_compiler)]\n+    #[cfg(all(parallel_compiler, debug_assertions))]\n     let layer = layer.with_thread_ids(true).with_thread_names(true);\n \n     let subscriber = tracing_subscriber::Registry::default().with(filter).with(layer);"}, {"sha": "79f53ee57cc9d536c60019c4d427033c2266514a", "filename": "src/librustdoc/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9dfe4af2a85a10d0ffdc991178a288c711fb94d4/src%2Flibrustdoc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9dfe4af2a85a10d0ffdc991178a288c711fb94d4/src%2Flibrustdoc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Flib.rs?ref=9dfe4af2a85a10d0ffdc991178a288c711fb94d4", "patch": "@@ -203,7 +203,7 @@ fn init_logging() {\n         .with_verbose_exit(true)\n         .with_verbose_entry(true)\n         .with_indent_amount(2);\n-    #[cfg(parallel_compiler)]\n+    #[cfg(all(parallel_compiler, debug_assertions))]\n     let layer = layer.with_thread_ids(true).with_thread_names(true);\n \n     use tracing_subscriber::layer::SubscriberExt;"}]}