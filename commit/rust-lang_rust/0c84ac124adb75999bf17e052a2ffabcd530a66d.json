{"sha": "0c84ac124adb75999bf17e052a2ffabcd530a66d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBjODRhYzEyNGFkYjc1OTk5YmYxN2UwNTJhMmZmYWJjZDUzMGE2NmQ=", "commit": {"author": {"name": "Jonathan Turner", "email": "jonathandturner@users.noreply.github.com", "date": "2016-08-22T22:34:21Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2016-08-22T22:34:21Z"}, "message": "Rollup merge of #35858 - shyaamsundhar:patch-1, r=GuillaumeGomez\n\nE0435, E0437 & E0438 New Error Format\n\nPart of #35801 , #35802 and #35803\nr? @GuillaumeGomez\n\nHi! Please review the changes.", "tree": {"sha": "8048c9aa58f8a042a42bb3c320f83bb7fbea2aa6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8048c9aa58f8a042a42bb3c320f83bb7fbea2aa6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0c84ac124adb75999bf17e052a2ffabcd530a66d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0c84ac124adb75999bf17e052a2ffabcd530a66d", "html_url": "https://github.com/rust-lang/rust/commit/0c84ac124adb75999bf17e052a2ffabcd530a66d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0c84ac124adb75999bf17e052a2ffabcd530a66d/comments", "author": {"login": "jonathandturner", "id": 111457284, "node_id": "O_kgDOBqS0BA", "avatar_url": "https://avatars.githubusercontent.com/u/111457284?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonathandturner", "html_url": "https://github.com/jonathandturner", "followers_url": "https://api.github.com/users/jonathandturner/followers", "following_url": "https://api.github.com/users/jonathandturner/following{/other_user}", "gists_url": "https://api.github.com/users/jonathandturner/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonathandturner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonathandturner/subscriptions", "organizations_url": "https://api.github.com/users/jonathandturner/orgs", "repos_url": "https://api.github.com/users/jonathandturner/repos", "events_url": "https://api.github.com/users/jonathandturner/events{/privacy}", "received_events_url": "https://api.github.com/users/jonathandturner/received_events", "type": "Organization", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7c2fba6d4d889691286474a18752c5e086356e74", "url": "https://api.github.com/repos/rust-lang/rust/commits/7c2fba6d4d889691286474a18752c5e086356e74", "html_url": "https://github.com/rust-lang/rust/commit/7c2fba6d4d889691286474a18752c5e086356e74"}, {"sha": "738b91e9976a41c7b0ab8cbf544cd971202bfa98", "url": "https://api.github.com/repos/rust-lang/rust/commits/738b91e9976a41c7b0ab8cbf544cd971202bfa98", "html_url": "https://github.com/rust-lang/rust/commit/738b91e9976a41c7b0ab8cbf544cd971202bfa98"}], "stats": {"total": 21, "additions": 15, "deletions": 6}, "files": [{"sha": "5641a50ccaccf53c00d71bb1b2aebe548277347f", "filename": "src/librustc_resolve/lib.rs", "status": "modified", "additions": 12, "deletions": 6, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/0c84ac124adb75999bf17e052a2ffabcd530a66d/src%2Flibrustc_resolve%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0c84ac124adb75999bf17e052a2ffabcd530a66d/src%2Flibrustc_resolve%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Flib.rs?ref=0c84ac124adb75999bf17e052a2ffabcd530a66d", "patch": "@@ -251,20 +251,24 @@ fn resolve_struct_error<'b, 'a: 'b, 'c>(resolver: &'b Resolver<'a>,\n             err\n         }\n         ResolutionError::TypeNotMemberOfTrait(type_, trait_) => {\n-            struct_span_err!(resolver.session,\n+            let mut err = struct_span_err!(resolver.session,\n                              span,\n                              E0437,\n                              \"type `{}` is not a member of trait `{}`\",\n                              type_,\n-                             trait_)\n+                             trait_);\n+            err.span_label(span, &format!(\"not a member of trait `Foo`\"));\n+            err\n         }\n         ResolutionError::ConstNotMemberOfTrait(const_, trait_) => {\n-            struct_span_err!(resolver.session,\n+            let mut err = struct_span_err!(resolver.session,\n                              span,\n                              E0438,\n                              \"const `{}` is not a member of trait `{}`\",\n                              const_,\n-                             trait_)\n+                             trait_);\n+            err.span_label(span, &format!(\"not a member of trait `Foo`\"));\n+            err\n         }\n         ResolutionError::VariableNotBoundInPattern(variable_name, from, to) => {\n             struct_span_err!(resolver.session,\n@@ -448,10 +452,12 @@ fn resolve_struct_error<'b, 'a: 'b, 'c>(resolver: &'b Resolver<'a>,\n                               closure form instead\")\n         }\n         ResolutionError::AttemptToUseNonConstantValueInConstant => {\n-            struct_span_err!(resolver.session,\n+            let mut err = struct_span_err!(resolver.session,\n                              span,\n                              E0435,\n-                             \"attempt to use a non-constant value in a constant\")\n+                             \"attempt to use a non-constant value in a constant\");\n+            err.span_label(span, &format!(\"non-constant used with constant\"));\n+            err\n         }\n         ResolutionError::BindingShadowsSomethingUnacceptable(what_binding, name, binding) => {\n             let shadows_what = PathResolution::new(binding.def().unwrap()).kind_name();"}, {"sha": "f687633d34d86c4cb59af93ee989fae152616a6f", "filename": "src/test/compile-fail/E0435.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/0c84ac124adb75999bf17e052a2ffabcd530a66d/src%2Ftest%2Fcompile-fail%2FE0435.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0c84ac124adb75999bf17e052a2ffabcd530a66d/src%2Ftest%2Fcompile-fail%2FE0435.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2FE0435.rs?ref=0c84ac124adb75999bf17e052a2ffabcd530a66d", "patch": "@@ -11,4 +11,5 @@\n fn main () {\n     let foo = 42u32;\n     const FOO : u32 = foo; //~ ERROR E0435\n+    //~| NOTE non-constant used with constant\n }"}, {"sha": "62ee8dc3464928fa3248504b3f0a5a7ce6cebe28", "filename": "src/test/compile-fail/E0437.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/0c84ac124adb75999bf17e052a2ffabcd530a66d/src%2Ftest%2Fcompile-fail%2FE0437.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0c84ac124adb75999bf17e052a2ffabcd530a66d/src%2Ftest%2Fcompile-fail%2FE0437.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2FE0437.rs?ref=0c84ac124adb75999bf17e052a2ffabcd530a66d", "patch": "@@ -12,6 +12,7 @@ trait Foo {}\n \n impl Foo for i32 {\n     type Bar = bool; //~ ERROR E0437\n+    //~| NOTE not a member of trait `Foo`\n }\n \n fn main () {"}, {"sha": "f549d62aebfea1a98d496bf065d23a74cb322e69", "filename": "src/test/compile-fail/E0438.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/0c84ac124adb75999bf17e052a2ffabcd530a66d/src%2Ftest%2Fcompile-fail%2FE0438.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0c84ac124adb75999bf17e052a2ffabcd530a66d/src%2Ftest%2Fcompile-fail%2FE0438.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2FE0438.rs?ref=0c84ac124adb75999bf17e052a2ffabcd530a66d", "patch": "@@ -14,6 +14,7 @@ trait Foo {}\n \n impl Foo for i32 {\n     const BAR: bool = true; //~ ERROR E0438\n+        //~| NOTE not a member of trait `Foo`\n }\n \n fn main () {"}]}