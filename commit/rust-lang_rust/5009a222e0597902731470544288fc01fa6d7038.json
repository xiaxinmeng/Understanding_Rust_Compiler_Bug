{"sha": "5009a222e0597902731470544288fc01fa6d7038", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUwMDlhMjIyZTA1OTc5MDI3MzE0NzA1NDQyODhmYzAxZmE2ZDcwMzg=", "commit": {"author": {"name": "Jeremy Sorensen", "email": "jeremy.a.sorensen@gmail.com", "date": "2017-08-29T03:44:40Z"}, "committer": {"name": "Jeremy Sorensen", "email": "jeremy.a.sorensen@gmail.com", "date": "2017-08-29T03:45:04Z"}, "message": "use an optional bool to keep track of ignore-git setting, if not specified by the end, use the channel to determine its value", "tree": {"sha": "eef8ff4cd17ae294e3b9cbd9602d2aa777c9e54c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/eef8ff4cd17ae294e3b9cbd9602d2aa777c9e54c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5009a222e0597902731470544288fc01fa6d7038", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5009a222e0597902731470544288fc01fa6d7038", "html_url": "https://github.com/rust-lang/rust/commit/5009a222e0597902731470544288fc01fa6d7038", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5009a222e0597902731470544288fc01fa6d7038/comments", "author": {"login": "JeremySorensen", "id": 8931818, "node_id": "MDQ6VXNlcjg5MzE4MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/8931818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JeremySorensen", "html_url": "https://github.com/JeremySorensen", "followers_url": "https://api.github.com/users/JeremySorensen/followers", "following_url": "https://api.github.com/users/JeremySorensen/following{/other_user}", "gists_url": "https://api.github.com/users/JeremySorensen/gists{/gist_id}", "starred_url": "https://api.github.com/users/JeremySorensen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JeremySorensen/subscriptions", "organizations_url": "https://api.github.com/users/JeremySorensen/orgs", "repos_url": "https://api.github.com/users/JeremySorensen/repos", "events_url": "https://api.github.com/users/JeremySorensen/events{/privacy}", "received_events_url": "https://api.github.com/users/JeremySorensen/received_events", "type": "User", "site_admin": false}, "committer": {"login": "JeremySorensen", "id": 8931818, "node_id": "MDQ6VXNlcjg5MzE4MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/8931818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JeremySorensen", "html_url": "https://github.com/JeremySorensen", "followers_url": "https://api.github.com/users/JeremySorensen/followers", "following_url": "https://api.github.com/users/JeremySorensen/following{/other_user}", "gists_url": "https://api.github.com/users/JeremySorensen/gists{/gist_id}", "starred_url": "https://api.github.com/users/JeremySorensen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JeremySorensen/subscriptions", "organizations_url": "https://api.github.com/users/JeremySorensen/orgs", "repos_url": "https://api.github.com/users/JeremySorensen/repos", "events_url": "https://api.github.com/users/JeremySorensen/events{/privacy}", "received_events_url": "https://api.github.com/users/JeremySorensen/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fb30dd70cef8f9a75c042a69d8eebed6ec63f9e2", "url": "https://api.github.com/repos/rust-lang/rust/commits/fb30dd70cef8f9a75c042a69d8eebed6ec63f9e2", "html_url": "https://github.com/rust-lang/rust/commit/fb30dd70cef8f9a75c042a69d8eebed6ec63f9e2"}], "stats": {"total": 6, "additions": 5, "deletions": 1}, "files": [{"sha": "372e0906cc61e5d10f908017ccd5c65760cd35af", "filename": "src/bootstrap/config.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/5009a222e0597902731470544288fc01fa6d7038/src%2Fbootstrap%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5009a222e0597902731470544288fc01fa6d7038/src%2Fbootstrap%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fconfig.rs?ref=5009a222e0597902731470544288fc01fa6d7038", "patch": "@@ -401,6 +401,7 @@ impl Config {\n         let mut debuginfo = None;\n         let mut debug_assertions = None;\n         let mut optimize = None;\n+        let mut ignore_git = None;\n \n         if let Some(ref llvm) = toml.llvm {\n             match llvm.ccache {\n@@ -432,6 +433,7 @@ impl Config {\n             debuginfo_lines = rust.debuginfo_lines;\n             debuginfo_only_std = rust.debuginfo_only_std;\n             optimize = rust.optimize;\n+            ignore_git = rust.ignore_git;\n             debug_jemalloc = rust.debug_jemalloc;\n             set(&mut config.rust_optimize_tests, rust.optimize_tests);\n             set(&mut config.rust_debuginfo_tests, rust.debuginfo_tests);\n@@ -440,7 +442,6 @@ impl Config {\n             set(&mut config.use_jemalloc, rust.use_jemalloc);\n             set(&mut config.backtrace, rust.backtrace);\n             set(&mut config.channel, rust.channel.clone());\n-            set(&mut config.ignore_git, rust.ignore_git);\n             set(&mut config.rust_dist_src, rust.dist_src);\n             set(&mut config.quiet_tests, rust.quiet_tests);\n             config.rustc_default_linker = rust.default_linker.clone();\n@@ -516,6 +517,9 @@ impl Config {\n         config.rust_debug_assertions = debug_assertions.unwrap_or(default);\n         config.rust_optimize = optimize.unwrap_or(!default);\n \n+        let default = config.channel == \"dev\";\n+        config.ignore_git = ignore_git.unwrap_or(default);\n+\n         config\n     }\n "}]}