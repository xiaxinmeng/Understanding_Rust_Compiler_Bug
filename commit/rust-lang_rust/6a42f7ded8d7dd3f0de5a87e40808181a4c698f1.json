{"sha": "6a42f7ded8d7dd3f0de5a87e40808181a4c698f1", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZhNDJmN2RlZDhkN2RkM2YwZGU1YTg3ZTQwODA4MTgxYTRjNjk4ZjE=", "commit": {"author": {"name": "Dylan DPC", "email": "dylan.dpc@gmail.com", "date": "2020-06-13T14:47:51Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-06-13T14:47:51Z"}, "message": "Rollup merge of #73267 - ehuss:cargotest-this-cargo, r=Mark-Simulacrum\n\nUse the built cargo for cargotest.\n\ncargotest was using the beta (bootstrap) cargo. This changes it so that it will use the locally built cargo. This is intended to provide a sort of smoke test to ensure Cargo is functional. This *shouldn't* have any real impact on the CI build time.  The cargotest job also happens to run cargo's testsuite, so it should already be building cargo.\n\nNote: This will fail until #73266 is merged.", "tree": {"sha": "6aa994a60e827259f493e7d2a13aeb9ba0227b70", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6aa994a60e827259f493e7d2a13aeb9ba0227b70"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6a42f7ded8d7dd3f0de5a87e40808181a4c698f1", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJe5OcXCRBK7hj4Ov3rIwAAdHIIAKdoIK9Fxxv0d59HSNaSGg21\n9WpFly+QFPv/NV5IFdmGiOfNl5/bVcwGgM1hz1QYJ+x2aMlWH8kXGMA3MLGZ0m7i\nXIcxDVquPTCbd16qehYM2rRWO0UrNuqcykLA1aE0Ye3ZgGKqsdXn0kl/0yTw2NTB\nXLnRsaIYW21KNT64IAcK0udoLfKLcIMlBXzoyMoVsS+iP/g3u+Wawl0iT+w+mKuj\n+0g/1NUy/No80i3n6kAMCIxwU8ZSLd53cM2uBt5dnShQtNR2Nbp+qPsuBG/fKhXf\nv1+zJBucOnbg57gHlkxvlYwFZtAtKLq1xAuLAiwke5+c9yJQYkr4tAa543M3I84=\n=AgHA\n-----END PGP SIGNATURE-----\n", "payload": "tree 6aa994a60e827259f493e7d2a13aeb9ba0227b70\nparent 61a59a57c9b848b821516f9e4c082a589f0fccf4\nparent 57b54c49281df9559cae4a685c0d38d62a3ee500\nauthor Dylan DPC <dylan.dpc@gmail.com> 1592059671 +0200\ncommitter GitHub <noreply@github.com> 1592059671 +0200\n\nRollup merge of #73267 - ehuss:cargotest-this-cargo, r=Mark-Simulacrum\n\nUse the built cargo for cargotest.\n\ncargotest was using the beta (bootstrap) cargo. This changes it so that it will use the locally built cargo. This is intended to provide a sort of smoke test to ensure Cargo is functional. This *shouldn't* have any real impact on the CI build time.  The cargotest job also happens to run cargo's testsuite, so it should already be building cargo.\n\nNote: This will fail until #73266 is merged.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6a42f7ded8d7dd3f0de5a87e40808181a4c698f1", "html_url": "https://github.com/rust-lang/rust/commit/6a42f7ded8d7dd3f0de5a87e40808181a4c698f1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6a42f7ded8d7dd3f0de5a87e40808181a4c698f1/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "61a59a57c9b848b821516f9e4c082a589f0fccf4", "url": "https://api.github.com/repos/rust-lang/rust/commits/61a59a57c9b848b821516f9e4c082a589f0fccf4", "html_url": "https://github.com/rust-lang/rust/commit/61a59a57c9b848b821516f9e4c082a589f0fccf4"}, {"sha": "57b54c49281df9559cae4a685c0d38d62a3ee500", "url": "https://api.github.com/repos/rust-lang/rust/commits/57b54c49281df9559cae4a685c0d38d62a3ee500", "html_url": "https://github.com/rust-lang/rust/commit/57b54c49281df9559cae4a685c0d38d62a3ee500"}], "stats": {"total": 3, "additions": 2, "deletions": 1}, "files": [{"sha": "aeabb227cf5e97d07c9a248dc328b1953aee6f30", "filename": "src/bootstrap/test.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/6a42f7ded8d7dd3f0de5a87e40808181a4c698f1/src%2Fbootstrap%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6a42f7ded8d7dd3f0de5a87e40808181a4c698f1/src%2Fbootstrap%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Ftest.rs?ref=6a42f7ded8d7dd3f0de5a87e40808181a4c698f1", "patch": "@@ -154,6 +154,7 @@ impl Step for Cargotest {\n     fn run(self, builder: &Builder<'_>) {\n         let compiler = builder.compiler(self.stage, self.host);\n         builder.ensure(compile::Rustc { compiler, target: compiler.host });\n+        let cargo = builder.ensure(tool::Cargo { compiler, target: compiler.host });\n \n         // Note that this is a short, cryptic, and not scoped directory name. This\n         // is currently to minimize the length of path on Windows where we otherwise\n@@ -165,7 +166,7 @@ impl Step for Cargotest {\n         let mut cmd = builder.tool_cmd(Tool::CargoTest);\n         try_run(\n             builder,\n-            cmd.arg(&builder.initial_cargo)\n+            cmd.arg(&cargo)\n                 .arg(&out_dir)\n                 .env(\"RUSTC\", builder.rustc(compiler))\n                 .env(\"RUSTDOC\", builder.rustdoc(compiler)),"}]}