{"sha": "b94da2bace66b4ba5485363ac7ba4fe85ad41578", "node_id": "C_kwDOAAsO6NoAKGI5NGRhMmJhY2U2NmI0YmE1NDg1MzYzYWM3YmE0ZmU4NWFkNDE1Nzg", "commit": {"author": {"name": "Andy Caldwell", "email": "andrew.caldwell@metaswitch.com", "date": "2021-06-16T18:56:38Z"}, "committer": {"name": "Andy Caldwell", "email": "andrew.caldwell@metaswitch.com", "date": "2021-10-28T14:32:37Z"}, "message": "Enable combining +crt-static and relocation-model=pic on x86_64-unknown-linux-gnu", "tree": {"sha": "01c69d36b1b8c29d7dc878c43edbb97d9eb83f03", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/01c69d36b1b8c29d7dc878c43edbb97d9eb83f03"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b94da2bace66b4ba5485363ac7ba4fe85ad41578", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEELWwNBns7iQWuaaaA1CBFQawdIo0FAmF6tIUACgkQ1CBFQawd\nIo3dmA//WfsvXIktSGO7/bLtzxwTK7MlVH2vWhxuBRzd7ZHb4dn2gTalK5UxtCju\nD6NTIfxn0gMqruhLZFldC/8/zVLeAxW6Y0Ot8xOou/m4QsPSaFY9XmABItEUBjU3\nW0Jc/hQzS28MQHP5sxJc5RAYOSSdu6Q6PycvIYVao7TZ6k6UCDcOdFU0K9Jfmvlj\nH/9qb1gSWxgldGn8k4uS3/lUSJsnHcCmiwpsPa4JZNScrybfBoAMtwItn3lfEVUe\nsMNz+WwoVnJRzwIMNOjKx4GJRGODVDwj4ziU7CgySb5fpWVXxsxz9McYUfVk1zR5\nsKBGxmFDaFXsFuj+wL0LlPfgBliZfSLDKyvhHuJ3gZhICd6e5OFC2ZJnPgSNAZTO\n/w6FUb5BR2qyX7LmhrGYIU1MNcQpsCe9V1yo7dy5RP4vxb5NopTh05P7SuoajNOm\nGY1ajxbUMkRTwyjIdcb5sDgIb4hc/DeW0BBEjVTrVO5K8F+k7ufDKwEff6Mk2zAZ\njfzwKqmEnYDk8u8KIY4yKSVYocIPQtgNa+5bouW9ID38USl/xh3P3GQ2DuB0j/wF\nVPNg3jXt40ZN/Dc+aABCzOFQfNCysrX1C0NEunL6zYry4oPdggCrMqOH2cYj53Zd\nnU/Z4HLpSaoPo0S8EQzo3fAX+6l2FrGJbRwdYtPthPBmaRciNl0=\n=hDvo\n-----END PGP SIGNATURE-----", "payload": "tree 01c69d36b1b8c29d7dc878c43edbb97d9eb83f03\nparent f2707fec04f655cdf18388618881748ebbd683e9\nauthor Andy Caldwell <andrew.caldwell@metaswitch.com> 1623869798 +0100\ncommitter Andy Caldwell <andrew.caldwell@metaswitch.com> 1635431557 +0100\n\nEnable combining +crt-static and relocation-model=pic on x86_64-unknown-linux-gnu\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b94da2bace66b4ba5485363ac7ba4fe85ad41578", "html_url": "https://github.com/rust-lang/rust/commit/b94da2bace66b4ba5485363ac7ba4fe85ad41578", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b94da2bace66b4ba5485363ac7ba4fe85ad41578/comments", "author": {"login": "bossmc", "id": 1073983, "node_id": "MDQ6VXNlcjEwNzM5ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1073983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bossmc", "html_url": "https://github.com/bossmc", "followers_url": "https://api.github.com/users/bossmc/followers", "following_url": "https://api.github.com/users/bossmc/following{/other_user}", "gists_url": "https://api.github.com/users/bossmc/gists{/gist_id}", "starred_url": "https://api.github.com/users/bossmc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bossmc/subscriptions", "organizations_url": "https://api.github.com/users/bossmc/orgs", "repos_url": "https://api.github.com/users/bossmc/repos", "events_url": "https://api.github.com/users/bossmc/events{/privacy}", "received_events_url": "https://api.github.com/users/bossmc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bossmc", "id": 1073983, "node_id": "MDQ6VXNlcjEwNzM5ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1073983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bossmc", "html_url": "https://github.com/bossmc", "followers_url": "https://api.github.com/users/bossmc/followers", "following_url": "https://api.github.com/users/bossmc/following{/other_user}", "gists_url": "https://api.github.com/users/bossmc/gists{/gist_id}", "starred_url": "https://api.github.com/users/bossmc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bossmc/subscriptions", "organizations_url": "https://api.github.com/users/bossmc/orgs", "repos_url": "https://api.github.com/users/bossmc/repos", "events_url": "https://api.github.com/users/bossmc/events{/privacy}", "received_events_url": "https://api.github.com/users/bossmc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f2707fec04f655cdf18388618881748ebbd683e9", "url": "https://api.github.com/repos/rust-lang/rust/commits/f2707fec04f655cdf18388618881748ebbd683e9", "html_url": "https://github.com/rust-lang/rust/commit/f2707fec04f655cdf18388618881748ebbd683e9"}], "stats": {"total": 7, "additions": 5, "deletions": 2}, "files": [{"sha": "aefbb398286acb25c64170ff44d913960db8a3a9", "filename": "compiler/rustc_target/src/spec/x86_64_unknown_linux_gnu.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/b94da2bace66b4ba5485363ac7ba4fe85ad41578/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_linux_gnu.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b94da2bace66b4ba5485363ac7ba4fe85ad41578/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_linux_gnu.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_linux_gnu.rs?ref=b94da2bace66b4ba5485363ac7ba4fe85ad41578", "patch": "@@ -7,6 +7,7 @@ pub fn target() -> Target {\n     base.pre_link_args.entry(LinkerFlavor::Gcc).or_default().push(\"-m64\".to_string());\n     // don't use probe-stack=inline-asm until rust#83139 and rust#84667 are resolved\n     base.stack_probes = StackProbeType::Call;\n+    base.static_position_independent_executables = true;\n     base.supported_sanitizers = SanitizerSet::ADDRESS\n         | SanitizerSet::CFI\n         | SanitizerSet::LEAK"}, {"sha": "f5fe4bc5afee39d1d2509dbc90cae5c4aa712995", "filename": "src/test/run-make/static-pie/Makefile", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/b94da2bace66b4ba5485363ac7ba4fe85ad41578/src%2Ftest%2Frun-make%2Fstatic-pie%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/b94da2bace66b4ba5485363ac7ba4fe85ad41578/src%2Ftest%2Frun-make%2Fstatic-pie%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fstatic-pie%2FMakefile?ref=b94da2bace66b4ba5485363ac7ba4fe85ad41578", "patch": "@@ -1,9 +1,11 @@\n -include ../../run-make-fulldeps/tools.mk\n \n-# only-x86_64-unknown-linux-musl\n+# only-x86_64\n+# only-linux\n+# ignore-gnux32\n \n # How to manually run this\n-# $ ./x.py test --target x86_64-unknown-linux-musl src/test/run-make/static-pie\n+# $ ./x.py test --target x86_64-unknown-linux-[musl,gnu] src/test/run-make/static-pie\n \n all:\n \t$(RUSTC) --target $(TARGET) -C target-feature=+crt-static test-aslr.rs"}]}