{"sha": "e086cc8db5edbf38756abca25c8bcc3334a596ff", "node_id": "MDY6Q29tbWl0NzI0NzEyOmUwODZjYzhkYjVlZGJmMzg3NTZhYmNhMjVjOGJjYzMzMzRhNTk2ZmY=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-12-21T16:13:26Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-12-21T16:13:26Z"}, "message": "hide empty changes", "tree": {"sha": "505357288185e44259dbafc68163597a4fbfcb78", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/505357288185e44259dbafc68163597a4fbfcb78"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e086cc8db5edbf38756abca25c8bcc3334a596ff", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e086cc8db5edbf38756abca25c8bcc3334a596ff", "html_url": "https://github.com/rust-lang/rust/commit/e086cc8db5edbf38756abca25c8bcc3334a596ff", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e086cc8db5edbf38756abca25c8bcc3334a596ff/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9de3a45be6a33e8cc2d7ef86ef0adcbaa0567cf5", "url": "https://api.github.com/repos/rust-lang/rust/commits/9de3a45be6a33e8cc2d7ef86ef0adcbaa0567cf5", "html_url": "https://github.com/rust-lang/rust/commit/9de3a45be6a33e8cc2d7ef86ef0adcbaa0567cf5"}], "stats": {"total": 27, "additions": 20, "deletions": 7}, "files": [{"sha": "b2f4cd228b006c06010a47b8c05570187a99968c", "filename": "crates/ra_analysis/src/lib.rs", "status": "modified", "additions": 17, "deletions": 7, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/e086cc8db5edbf38756abca25c8bcc3334a596ff/crates%2Fra_analysis%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e086cc8db5edbf38756abca25c8bcc3334a596ff/crates%2Fra_analysis%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_analysis%2Fsrc%2Flib.rs?ref=e086cc8db5edbf38756abca25c8bcc3334a596ff", "patch": "@@ -72,13 +72,23 @@ struct RemoveFile {\n \n impl fmt::Debug for AnalysisChange {\n     fn fmt(&self, fmt: &mut fmt::Formatter) -> fmt::Result {\n-        fmt.debug_struct(\"AnalysisChange\")\n-            .field(\"new_roots\", &self.new_roots)\n-            .field(\"roots_changed\", &self.roots_changed)\n-            .field(\"files_changed\", &self.files_changed.len())\n-            .field(\"libraries_added\", &self.libraries_added.len())\n-            .field(\"crate_graph\", &self.crate_graph)\n-            .finish()\n+        let mut d = fmt.debug_struct(\"AnalysisChange\");\n+        if !self.new_roots.is_empty() {\n+            d.field(\"new_roots\", &self.new_roots);\n+        }\n+        if !self.roots_changed.is_empty() {\n+            d.field(\"roots_changed\", &self.roots_changed);\n+        }\n+        if !self.files_changed.is_empty() {\n+            d.field(\"files_changed\", &self.files_changed.len());\n+        }\n+        if !self.libraries_added.is_empty() {\n+            d.field(\"libraries_added\", &self.libraries_added.len());\n+        }\n+        if !self.crate_graph.is_some() {\n+            d.field(\"crate_graph\", &self.crate_graph);\n+        }\n+        d.finish()\n     }\n }\n "}, {"sha": "ead8dfe4837b2c2a01832caba84fc964aa20b1e0", "filename": "crates/ra_db/src/input.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/e086cc8db5edbf38756abca25c8bcc3334a596ff/crates%2Fra_db%2Fsrc%2Finput.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e086cc8db5edbf38756abca25c8bcc3334a596ff/crates%2Fra_db%2Fsrc%2Finput.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_db%2Fsrc%2Finput.rs?ref=e086cc8db5edbf38756abca25c8bcc3334a596ff", "patch": "@@ -98,6 +98,9 @@ impl CrateGraph {\n     pub fn add_dep(&mut self, from: CrateId, name: SmolStr, to: CrateId) {\n         self.arena.get_mut(&from).unwrap().add_dep(name, to)\n     }\n+    pub fn is_empty(&self) -> bool {\n+        self.arena.is_empty()\n+    }\n     pub fn crate_root(&self, crate_id: CrateId) -> FileId {\n         self.arena[&crate_id].file_id\n     }"}]}