{"sha": "d77db2e99ebc54c73af60223466e9d95a36fe0f1", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ3N2RiMmU5OWViYzU0YzczYWY2MDIyMzQ2NmU5ZDk1YTM2ZmUwZjE=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-01-28T21:25:49Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-01-28T21:25:49Z"}, "message": "Rollup merge of #57950 - QuietMisdreavus:lifetime-err-desc, r=estebank\n\nExtend E0106, E0261\n\nThis is a reopening of https://github.com/rust-lang/rust/pull/57310 with review comments addressed because the original author has since deleted their fork.\n\nFrom the author (@purple-ice):\n\n> Added an example that points out hardly obvious mistake one could make when writing impl for a new type.\n\nr? @rust-lang/docs", "tree": {"sha": "a6995e1eb1f22d67fe3ef79ef8e41fb9db6f4147", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a6995e1eb1f22d67fe3ef79ef8e41fb9db6f4147"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d77db2e99ebc54c73af60223466e9d95a36fe0f1", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJcT3NeCRBK7hj4Ov3rIwAAdHIIAApzJ7mgxUzvtxyYKaOuf5/6\nhxvNcRSG7h5M73IX6JvI3Zld534fTryNMX9gOMdZ4Nf96I3Se8ZHVLE1Rt52EfAO\nTgZrfdT8sW2RPqBA/jvQRpSj1uK5ZAnY+gSnvME6v9rNtCQliQ9QcHv39QPNTTrr\nRWDnPmOGyTFKHw/RWLuWwAXpNu8NxftCmvRlO+SSCczP88jrIRLiafipnaQYQk++\n9fV8B//ZYGMOV+qCFZ39Zo0S2m9115fPthO+RorDGOfetilIce+mSSqTnXALI6P9\nciOc7t1BQrJEA/3amd5DnjB0NvRkROUsQbHTrVytzt9/rjhDkkX9zd1C3mYUHrg=\n=nX8q\n-----END PGP SIGNATURE-----\n", "payload": "tree a6995e1eb1f22d67fe3ef79ef8e41fb9db6f4147\nparent 3fe8b4c043065fccb551bf968168097798769b72\nparent a2b75eda955a46ec643b8277b1fb41c4fed94f4e\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1548710749 +0100\ncommitter GitHub <noreply@github.com> 1548710749 +0100\n\nRollup merge of #57950 - QuietMisdreavus:lifetime-err-desc, r=estebank\n\nExtend E0106, E0261\n\nThis is a reopening of https://github.com/rust-lang/rust/pull/57310 with review comments addressed because the original author has since deleted their fork.\n\nFrom the author (@purple-ice):\n\n> Added an example that points out hardly obvious mistake one could make when writing impl for a new type.\n\nr? @rust-lang/docs\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d77db2e99ebc54c73af60223466e9d95a36fe0f1", "html_url": "https://github.com/rust-lang/rust/commit/d77db2e99ebc54c73af60223466e9d95a36fe0f1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d77db2e99ebc54c73af60223466e9d95a36fe0f1/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3fe8b4c043065fccb551bf968168097798769b72", "url": "https://api.github.com/repos/rust-lang/rust/commits/3fe8b4c043065fccb551bf968168097798769b72", "html_url": "https://github.com/rust-lang/rust/commit/3fe8b4c043065fccb551bf968168097798769b72"}, {"sha": "a2b75eda955a46ec643b8277b1fb41c4fed94f4e", "url": "https://api.github.com/repos/rust-lang/rust/commits/a2b75eda955a46ec643b8277b1fb41c4fed94f4e", "html_url": "https://github.com/rust-lang/rust/commit/a2b75eda955a46ec643b8277b1fb41c4fed94f4e"}], "stats": {"total": 33, "additions": 33, "deletions": 0}, "files": [{"sha": "1e10329bb55ce97d2a9cf4ea47f2d12b31863008", "filename": "src/librustc/diagnostics.rs", "status": "modified", "additions": 33, "deletions": 0, "changes": 33, "blob_url": "https://github.com/rust-lang/rust/blob/d77db2e99ebc54c73af60223466e9d95a36fe0f1/src%2Flibrustc%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d77db2e99ebc54c73af60223466e9d95a36fe0f1/src%2Flibrustc%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fdiagnostics.rs?ref=d77db2e99ebc54c73af60223466e9d95a36fe0f1", "patch": "@@ -362,6 +362,10 @@ struct Foo1 { x: &bool }\n               // ^ expected lifetime parameter\n struct Foo2<'a> { x: &'a bool } // correct\n \n+impl Foo2 {}\n+  // ^^^^ expected lifetime parameter\n+impl<'a> Foo2<'a> {} // correct\n+\n struct Bar1 { x: Foo2 }\n               // ^^^^ expected lifetime parameter\n struct Bar2<'a> { x: Foo2<'a> } // correct\n@@ -766,11 +770,40 @@ struct Foo {\n These can be fixed by declaring lifetime parameters:\n \n ```\n+struct Foo<'a> {\n+    x: &'a str,\n+}\n+\n fn foo<'a>(x: &'a str) {}\n+```\n \n+Impl blocks declare lifetime parameters separately. You need to add lifetime\n+parameters to an impl block if you're implementing a type that has a lifetime\n+parameter of its own.\n+For example:\n+\n+```compile_fail,E0261\n struct Foo<'a> {\n     x: &'a str,\n }\n+\n+// error,  use of undeclared lifetime name `'a`\n+impl Foo<'a> {\n+    fn foo<'a>(x: &'a str) {}\n+}\n+```\n+\n+This is fixed by declaring the impl block like this:\n+\n+```\n+struct Foo<'a> {\n+    x: &'a str,\n+}\n+\n+// correct\n+impl<'a> Foo<'a> {\n+    fn foo(x: &'a str) {}\n+}\n ```\n \"##,\n "}]}