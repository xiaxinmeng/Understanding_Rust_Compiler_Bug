{"sha": "1785493cae18d5cbd189a758e8042effbcb525ef", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE3ODU0OTNjYWUxOGQ1Y2JkMTg5YTc1OGU4MDQyZWZmYmNiNTI1ZWY=", "commit": {"author": {"name": "Yotam Ofek", "email": "yotam.ofek@gmail.com", "date": "2021-09-08T08:00:55Z"}, "committer": {"name": "Yotam Ofek", "email": "yotam.ofek@gmail.com", "date": "2021-09-08T08:00:55Z"}, "message": "Add (failing) test for inherent array method resolution.", "tree": {"sha": "e4e969c63aa4d9a53b314c4014dbd696497e8da7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e4e969c63aa4d9a53b314c4014dbd696497e8da7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1785493cae18d5cbd189a758e8042effbcb525ef", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1785493cae18d5cbd189a758e8042effbcb525ef", "html_url": "https://github.com/rust-lang/rust/commit/1785493cae18d5cbd189a758e8042effbcb525ef", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1785493cae18d5cbd189a758e8042effbcb525ef/comments", "author": {"login": "yotamofek", "id": 1835307, "node_id": "MDQ6VXNlcjE4MzUzMDc=", "avatar_url": "https://avatars.githubusercontent.com/u/1835307?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yotamofek", "html_url": "https://github.com/yotamofek", "followers_url": "https://api.github.com/users/yotamofek/followers", "following_url": "https://api.github.com/users/yotamofek/following{/other_user}", "gists_url": "https://api.github.com/users/yotamofek/gists{/gist_id}", "starred_url": "https://api.github.com/users/yotamofek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yotamofek/subscriptions", "organizations_url": "https://api.github.com/users/yotamofek/orgs", "repos_url": "https://api.github.com/users/yotamofek/repos", "events_url": "https://api.github.com/users/yotamofek/events{/privacy}", "received_events_url": "https://api.github.com/users/yotamofek/received_events", "type": "User", "site_admin": false}, "committer": {"login": "yotamofek", "id": 1835307, "node_id": "MDQ6VXNlcjE4MzUzMDc=", "avatar_url": "https://avatars.githubusercontent.com/u/1835307?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yotamofek", "html_url": "https://github.com/yotamofek", "followers_url": "https://api.github.com/users/yotamofek/followers", "following_url": "https://api.github.com/users/yotamofek/following{/other_user}", "gists_url": "https://api.github.com/users/yotamofek/gists{/gist_id}", "starred_url": "https://api.github.com/users/yotamofek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yotamofek/subscriptions", "organizations_url": "https://api.github.com/users/yotamofek/orgs", "repos_url": "https://api.github.com/users/yotamofek/repos", "events_url": "https://api.github.com/users/yotamofek/events{/privacy}", "received_events_url": "https://api.github.com/users/yotamofek/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3dae94bf2b3e496adb049da589c7efef272a39b8", "url": "https://api.github.com/repos/rust-lang/rust/commits/3dae94bf2b3e496adb049da589c7efef272a39b8", "html_url": "https://github.com/rust-lang/rust/commit/3dae94bf2b3e496adb049da589c7efef272a39b8"}], "stats": {"total": 29, "additions": 29, "deletions": 0}, "files": [{"sha": "306da6738b00b0dca8f804feae37b09bbc3637c3", "filename": "crates/hir_ty/src/tests/method_resolution.rs", "status": "modified", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/1785493cae18d5cbd189a758e8042effbcb525ef/crates%2Fhir_ty%2Fsrc%2Ftests%2Fmethod_resolution.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1785493cae18d5cbd189a758e8042effbcb525ef/crates%2Fhir_ty%2Fsrc%2Ftests%2Fmethod_resolution.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir_ty%2Fsrc%2Ftests%2Fmethod_resolution.rs?ref=1785493cae18d5cbd189a758e8042effbcb525ef", "patch": "@@ -1283,6 +1283,35 @@ fn f() {\n     );\n }\n \n+#[test]\n+fn resolve_const_generic_array_methods() {\n+    check_types(\n+        r#\"\n+#[lang = \"array\"]\n+impl<T, const N: usize> [T; N] {\n+    pub fn map<F, U>(self, f: F) -> [U; N]\n+    where\n+        F: FnMut(T) -> U,\n+    { loop {} }\n+}\n+\n+#[lang = \"slice\"]\n+impl<T> [T] {\n+    pub fn map<F, U>(self, f: F) -> &[U]\n+    where\n+        F: FnMut(T) -> U,\n+    { loop {} }\n+}\n+\n+fn f() {\n+    let v = [1, 2].map::<_, usize>(|x| -> x * 2);\n+    v;\n+  //^ [usize; _]\n+}\n+    \"#,\n+    );\n+}\n+\n #[test]\n fn skip_array_during_method_dispatch() {\n     check_types("}]}