{"sha": "6dfaa143662ddfd6ed2fecadef20eae0ec5d267d", "node_id": "C_kwDOAAsO6NoAKDZkZmFhMTQzNjYyZGRmZDZlZDJmZWNhZGVmMjBlYWUwZWM1ZDI2N2Q", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-03-11T01:17:23Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-03-11T01:17:23Z"}, "message": "Auto merge of #104527 - ferrocene:pa-more-licenses, r=pnkfelix\n\nAdd more license annotations\n\nThis PR updates the `.reuse/dep5` file to include more accurate licensing data for everything in the repository (*excluding* submodules and dependencies). Some decisions were made in this PR:\n\n* The standard copyright attribution for files maintained by us is \"The Rust Project Developers (see https://thanks.rust-lang.org)\", to avoid having to maintain an in-tree `AUTHORS` file.\n* For files that have specific licensing terms, we added the terms to the `.reuse/dep5` rather than adding SPDX comments in the files themselves.\n* REUSE picks up any comment/text line with `Copyright` on it, so I had to sprinkle around `REUSE-IgnoreStart` and `REUSE-IgnoreEnd` comments.\n\nThe rendered `COPYRIGHT` file is available at https://gist.github.com/pietroalbini/efb81103f69596d39758114f3f6a8688.\n\nr? `@pnkfelix`", "tree": {"sha": "f6dbc20d622daac9aa2bcfb7fa9b7a3f396fa40a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f6dbc20d622daac9aa2bcfb7fa9b7a3f396fa40a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d", "html_url": "https://github.com/rust-lang/rust/commit/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ff4b772f805ec1e1c1bd7e189ab8d5a4e3a6ef13", "url": "https://api.github.com/repos/rust-lang/rust/commits/ff4b772f805ec1e1c1bd7e189ab8d5a4e3a6ef13", "html_url": "https://github.com/rust-lang/rust/commit/ff4b772f805ec1e1c1bd7e189ab8d5a4e3a6ef13"}, {"sha": "9c24608b505cb106204183e8e12b66dad72f1450", "url": "https://api.github.com/repos/rust-lang/rust/commits/9c24608b505cb106204183e8e12b66dad72f1450", "html_url": "https://github.com/rust-lang/rust/commit/9c24608b505cb106204183e8e12b66dad72f1450"}], "stats": {"total": 398, "additions": 261, "deletions": 137}, "files": [{"sha": "dc6a60e62395203e3173e87565ae89bafa8c0d61", "filename": ".reuse/dep5", "status": "modified", "additions": 82, "deletions": 6, "changes": 88, "blob_url": "https://github.com/rust-lang/rust/blob/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/.reuse%2Fdep5", "raw_url": "https://github.com/rust-lang/rust/raw/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/.reuse%2Fdep5", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.reuse%2Fdep5?ref=6dfaa143662ddfd6ed2fecadef20eae0ec5d267d", "patch": "@@ -1,23 +1,99 @@\n+# WARNING: this metadata is currently incomplete, do not rely on it yet.\n+\n Format: https://www.debian.org/doc/packaging-manuals/copyright-format/1.0/\n Files-Excluded:\n  src/llvm-project\n \n-Files: *\n+# Note that we're explicitly listing the individual files at the root of the\n+# repository rather than just having `Files: *`. This is explicitly done to\n+# help downstream forks of the Rust compiler: this way, the files they add\n+# won't be automatically marked as authored by the Rust project.\n+Files: compiler/*\n+       library/*\n+       tests/*\n+       src/*\n+       .github/*\n+       Cargo.lock\n+       Cargo.toml\n+       CODE_OF_CONDUCT.md\n+       config.toml.example\n+       configure\n+       CONTRIBUTING.md\n+       COPYRIGHT\n+       LICENSE-APACHE\n+       LICENSE-MIT\n+       README.md\n+       RELEASES.md\n+       rustfmt.toml\n+       triagebot.toml\n+       x\n+       x.ps1\n+       x.py\n+       .editorconfig\n+       .git-blame-ignore-revs\n+       .gitattributes\n+       .gitignore\n+       .gitmodules\n+       .mailmap\n Copyright: The Rust Project Developers (see https://thanks.rust-lang.org)\n License: MIT or Apache-2.0\n \n+Files: compiler/rustc_apfloat/*\n+Copyright: LLVM APFloat authors\n+           The Rust Project Developers (see https://thanks.rust-lang.org)\n+License: NCSA AND (MIT OR Apache-2.0)\n+\n+Files: compiler/rustc_codegen_cranelift/src/cranelift_native.rs\n+Copyright: The Cranelift Project Developers\n+           The Rust Project Developers (see https://thanks.rust-lang.org)\n+License: Apache-2.0 WITH LLVM-exception AND (Apache-2.0 OR MIT)\n+\n+Files: compiler/rustc_llvm/llvm-wrapper/SymbolWrapper.cpp\n+Copyright: LLVM authors\n+           The Rust Project Developers (see https://thanks.rust-lang.org)\n+License: Apache-2.0 WITH LLVM-exception AND (Apache-2.0 OR MIT)\n+\n+Files: library/core/src/unicode/unicode_data.rs\n+Copyright: 1991-2022 Unicode, Inc. All rights reserved.\n+License: Unicode-DFS-2016\n+\n+Files: library/std/src/sync/mpmc/*\n+Copyright: 2019 The Crossbeam Project Developers\n+           The Rust Project Developers (see https://thanks.rust-lang.org)\n+License: MIT OR Apache-2.0\n+\n+Files: library/std/src/sys/unix/locks/fuchsia_mutex.rs\n+Copyright: 2016 The Fuchsia Authors\n+           The Rust Project Developers (see https://thanks.rust-lang.org)\n+License: BSD-2-Clause AND (MIT OR Apache-2.0)\n+\n+Files: src/test/rustdoc/auxiliary/enum-primitive.rs\n+Copyright: 2015 Anders Kaseorg <andersk@mit.edu>\n+License: MIT\n+\n Files: src/librustdoc/html/static/fonts/FiraSans*\n-Copyright: 2014, Mozilla Foundation, 2014, Telefonica S.A.\n+Copyright: 2014, Mozilla Foundation\n+           2014, Telefonica S.A.\n License: OFL-1.1\n \n Files: src/librustdoc/html/static/fonts/NanumBarun*\n Copyright: 2010 NAVER Corporation\n License: OFL-1.1\n \n Files: src/librustdoc/html/static/fonts/SourceCodePro*\n-Copyright: 2010, 2012 Adobe Systems Incorporated\n+       src/librustdoc/html/static/fonts/SourceSerif4*\n+Copyright: 2010, 2012, 2014-2023, Adobe Systems Incorporated\n License: OFL-1.1\n \n-Files: src/librustdoc/html/static/fonts/SourceSerif4*\n-Copyright: 2014-2021 Adobe Systems Incorporated\n-License: OFL-1.1\n+Files: src/librustdoc/html/static/css/normalize.css\n+Copyright: Nicolas Gallagher and Jonathan Neal\n+License: MIT\n+\n+Files: src/librustdoc/html/static/css/themes/ayu.css\n+Copyright: Ike Ku, Jessica Stokes, Leon Guan\n+           The Rust Project Developers (see https://thanks.rust-lang.org)\n+License: MIT OR Apache-2.0\n+\n+Files: src/doc/rustc-dev-guide/mermaid.min.js\n+Copyright: Knut Sveidqvist\n+License: MIT"}, {"sha": "5f662b354cd40cd5339d5aa05d74b15405138230", "filename": "LICENSES/BSD-2-Clause.txt", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/LICENSES%2FBSD-2-Clause.txt", "raw_url": "https://github.com/rust-lang/rust/raw/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/LICENSES%2FBSD-2-Clause.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/LICENSES%2FBSD-2-Clause.txt?ref=6dfaa143662ddfd6ed2fecadef20eae0ec5d267d", "patch": "@@ -0,0 +1,9 @@\n+Copyright (c) <year> <owner> \n+\n+Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\n+\n+1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\n+\n+2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\n+\n+THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE."}, {"sha": "cf5413effa25a89cae2ef0de21ade82e3672cb3b", "filename": "LICENSES/NCSA.txt", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/LICENSES%2FNCSA.txt", "raw_url": "https://github.com/rust-lang/rust/raw/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/LICENSES%2FNCSA.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/LICENSES%2FNCSA.txt?ref=6dfaa143662ddfd6ed2fecadef20eae0ec5d267d", "patch": "@@ -0,0 +1,15 @@\n+University of Illinois/NCSA Open Source License\n+\n+Copyright (c) <Year> <Owner Organization Name>. All rights reserved.\n+\n+Developed by: <Name of Development Group> <Name of Institution> <URL for Development Group/Institution>\n+\n+Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal with the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n+\n+     * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimers.\n+\n+     * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimers in the documentation and/or other materials provided with the distribution.\n+\n+     * Neither the names of <Name of Development Group, Name of Institution>, nor the names of its contributors may be used to endorse or promote products derived from this Software without specific prior written permission.\n+\n+THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE CONTRIBUTORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS WITH THE SOFTWARE."}, {"sha": "71fd6ac5e12e1703f2d2445393326649d30a49f5", "filename": "LICENSES/Unicode-DFS-2016.txt", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/LICENSES%2FUnicode-DFS-2016.txt", "raw_url": "https://github.com/rust-lang/rust/raw/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/LICENSES%2FUnicode-DFS-2016.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/LICENSES%2FUnicode-DFS-2016.txt?ref=6dfaa143662ddfd6ed2fecadef20eae0ec5d267d", "patch": "@@ -0,0 +1,22 @@\n+UNICODE, INC. LICENSE AGREEMENT - DATA FILES AND SOFTWARE\n+\n+Unicode Data Files include all data files under the directories http://www.unicode.org/Public/, http://www.unicode.org/reports/, http://www.unicode.org/cldr/data/, http://source.icu-project.org/repos/icu/, and http://www.unicode.org/utility/trac/browser/.\n+\n+Unicode Data Files do not include PDF online code charts under the directory http://www.unicode.org/Public/.\n+\n+Software includes any source code published in the Unicode Standard or under the directories http://www.unicode.org/Public/, http://www.unicode.org/reports/, http://www.unicode.org/cldr/data/, http://source.icu-project.org/repos/icu/, and http://www.unicode.org/utility/trac/browser/.\n+\n+NOTICE TO USER: Carefully read the following legal agreement. BY DOWNLOADING, INSTALLING, COPYING OR OTHERWISE USING UNICODE INC.'S DATA FILES (\"DATA FILES\"), AND/OR SOFTWARE (\"SOFTWARE\"), YOU UNEQUIVOCALLY ACCEPT, AND AGREE TO BE BOUND BY, ALL OF THE TERMS AND CONDITIONS OF THIS AGREEMENT. IF YOU DO NOT AGREE, DO NOT DOWNLOAD, INSTALL, COPY, DISTRIBUTE OR USE THE DATA FILES OR SOFTWARE.\n+\n+COPYRIGHT AND PERMISSION NOTICE\n+\n+Copyright \u00a9 1991-2016 Unicode, Inc. All rights reserved. Distributed under the Terms of Use in http://www.unicode.org/copyright.html.\n+\n+Permission is hereby granted, free of charge, to any person obtaining a copy of the Unicode data files and any associated documentation (the \"Data Files\") or Unicode software and any associated documentation (the \"Software\") to deal in the Data Files or Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, and/or sell copies of the Data Files or Software, and to permit persons to whom the Data Files or Software are furnished to do so, provided that either\n+\n+     (a) this copyright and permission notice appear with all copies of the Data Files or Software, or\n+     (b) this copyright and permission notice appear in associated Documentation.\n+\n+THE DATA FILES AND SOFTWARE ARE PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT OF THIRD PARTY RIGHTS. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR HOLDERS INCLUDED IN THIS NOTICE BE LIABLE FOR ANY CLAIM, OR ANY SPECIAL INDIRECT OR CONSEQUENTIAL DAMAGES, OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THE DATA FILES OR SOFTWARE.\n+\n+Except as contained in this notice, the name of a copyright holder shall not be used in advertising or otherwise to promote the sale, use or other dealings in these Data Files or Software without prior written authorization of the copyright holder."}, {"sha": "e64daf96b01c92f26dac3a49d21adc43dc6d8975", "filename": "compiler/rustc_codegen_cranelift/example/alloc_system.rs", "status": "modified", "additions": 3, "deletions": 9, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/compiler%2Frustc_codegen_cranelift%2Fexample%2Falloc_system.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/compiler%2Frustc_codegen_cranelift%2Fexample%2Falloc_system.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_cranelift%2Fexample%2Falloc_system.rs?ref=6dfaa143662ddfd6ed2fecadef20eae0ec5d267d", "patch": "@@ -1,12 +1,6 @@\n-// Copyright 2015 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n+// SPDX-License-Identifier: MIT OR Apache-2.0\n+// SPDX-FileCopyrightText: The Rust Project Developers (see https://thanks.rust-lang.org)\n+\n #![no_std]\n \n pub struct System;"}, {"sha": "9ec18da90d819986856eb55ab47394ce6335195c", "filename": "compiler/rustc_codegen_gcc/example/alloc_system.rs", "status": "modified", "additions": 3, "deletions": 9, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/compiler%2Frustc_codegen_gcc%2Fexample%2Falloc_system.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/compiler%2Frustc_codegen_gcc%2Fexample%2Falloc_system.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_gcc%2Fexample%2Falloc_system.rs?ref=6dfaa143662ddfd6ed2fecadef20eae0ec5d267d", "patch": "@@ -1,12 +1,6 @@\n-// Copyright 2015 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n+// SPDX-License-Identifier: MIT OR Apache-2.0\n+// SPDX-FileCopyrightText: The Rust Project Developers (see https://thanks.rust-lang.org)\n+\n #![no_std]\n #![feature(allocator_api, rustc_private)]\n #![cfg_attr(any(unix, target_os = \"redox\"), feature(libc))]"}, {"sha": "44875b54ddc4d283029f5bfbad9b285bb5457439", "filename": "src/ci/scripts/collect-cpu-stats.sh", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Fci%2Fscripts%2Fcollect-cpu-stats.sh", "raw_url": "https://github.com/rust-lang/rust/raw/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Fci%2Fscripts%2Fcollect-cpu-stats.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fscripts%2Fcollect-cpu-stats.sh?ref=6dfaa143662ddfd6ed2fecadef20eae0ec5d267d", "patch": "@@ -6,4 +6,5 @@\n set -euo pipefail\n IFS=$'\\n\\t'\n \n-python3 src/ci/cpu-usage-over-time.py &> cpu-usage.csv &\n+mkdir -p build\n+python3 src/ci/cpu-usage-over-time.py &> build/cpu-usage.csv &"}, {"sha": "9755edb6dce58936285edc463f0779495a393d29", "filename": "src/ci/scripts/upload-artifacts.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Fci%2Fscripts%2Fupload-artifacts.sh", "raw_url": "https://github.com/rust-lang/rust/raw/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Fci%2Fscripts%2Fupload-artifacts.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fscripts%2Fupload-artifacts.sh?ref=6dfaa143662ddfd6ed2fecadef20eae0ec5d267d", "patch": "@@ -23,7 +23,7 @@ if [[ \"${DEPLOY-0}\" -eq \"1\" ]] || [[ \"${DEPLOY_ALT-0}\" -eq \"1\" ]]; then\n fi\n \n # CPU usage statistics.\n-cp cpu-usage.csv \"${upload_dir}/cpu-${CI_JOB_NAME}.csv\"\n+cp build/cpu-usage.csv \"${upload_dir}/cpu-${CI_JOB_NAME}.csv\"\n \n # Build metrics generated by x.py.\n cp \"${build_dir}/metrics.json\" \"${upload_dir}/metrics-${CI_JOB_NAME}.json\""}, {"sha": "504fe51156d3f056252bce8060c4f50ef4370df8", "filename": "src/doc/footer.inc", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Fdoc%2Ffooter.inc", "raw_url": "https://github.com/rust-lang/rust/raw/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Fdoc%2Ffooter.inc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Ffooter.inc?ref=6dfaa143662ddfd6ed2fecadef20eae0ec5d267d", "patch": "@@ -1,7 +1,9 @@\n+<!-- REUSE-IgnoreStart -->\n <footer><p>\n Copyright &copy; 2011 The Rust Project Developers. Licensed under the\n <a href=\"http://www.apache.org/licenses/LICENSE-2.0\">Apache License, Version 2.0</a>\n or the <a href=\"https://opensource.org/licenses/MIT\">MIT license</a>, at your option.\n </p><p>\n This file may not be copied, modified, or distributed except according to those terms.\n </p></footer>\n+<!-- REUSE-IgnoreEnd -->"}, {"sha": "1447df792f68e84409844a2a8bf5ebd3a4a80267", "filename": "src/librustdoc/html/static/COPYRIGHT.txt", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Flibrustdoc%2Fhtml%2Fstatic%2FCOPYRIGHT.txt", "raw_url": "https://github.com/rust-lang/rust/raw/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Flibrustdoc%2Fhtml%2Fstatic%2FCOPYRIGHT.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2FCOPYRIGHT.txt?ref=6dfaa143662ddfd6ed2fecadef20eae0ec5d267d", "patch": "@@ -1,3 +1,5 @@\n+# REUSE-IgnoreStart\n+\n These documentation pages include resources by third parties. This copyright\n file applies only to those resources. The following third party resources are\n included, and carry their own copyright notices and license terms:\n@@ -44,3 +46,5 @@ included, and carry their own copyright notices and license terms:\n     See SourceSerif4-LICENSE.md.\n \n This copyright file is intended to be distributed with rustdoc output.\n+\n+# REUSE-IgnoreEnd"}, {"sha": "d7e9c149b7ead46b875e1243a62e845b65f8bcf7", "filename": "src/librustdoc/html/static/fonts/FiraSans-LICENSE.txt", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Flibrustdoc%2Fhtml%2Fstatic%2Ffonts%2FFiraSans-LICENSE.txt", "raw_url": "https://github.com/rust-lang/rust/raw/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Flibrustdoc%2Fhtml%2Fstatic%2Ffonts%2FFiraSans-LICENSE.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Ffonts%2FFiraSans-LICENSE.txt?ref=6dfaa143662ddfd6ed2fecadef20eae0ec5d267d", "patch": "@@ -1,3 +1,5 @@\n+// REUSE-IgnoreStart\n+\n Digitized data copyright (c) 2012-2015, The Mozilla Foundation and Telefonica S.A.\n with Reserved Font Name < Fira >,\n \n@@ -92,3 +94,5 @@ INCLUDING ANY GENERAL, SPECIAL, INDIRECT, INCIDENTAL, OR CONSEQUENTIAL\n DAMAGES, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n FROM, OUT OF THE USE OR INABILITY TO USE THE FONT SOFTWARE OR FROM\n OTHER DEALINGS IN THE FONT SOFTWARE.\n+\n+// REUSE-IgnoreEnd"}, {"sha": "4b3edc29eb909a4a6e5d091e777c29d1f8f190e9", "filename": "src/librustdoc/html/static/fonts/NanumBarunGothic-LICENSE.txt", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Flibrustdoc%2Fhtml%2Fstatic%2Ffonts%2FNanumBarunGothic-LICENSE.txt", "raw_url": "https://github.com/rust-lang/rust/raw/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Flibrustdoc%2Fhtml%2Fstatic%2Ffonts%2FNanumBarunGothic-LICENSE.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Ffonts%2FNanumBarunGothic-LICENSE.txt?ref=6dfaa143662ddfd6ed2fecadef20eae0ec5d267d", "patch": "@@ -1,3 +1,5 @@\n+// REUSE-IgnoreStart\n+\n Copyright (c) 2010, NAVER Corporation (https://www.navercorp.com/),\n \n with Reserved Font Name Nanum, Naver Nanum, NanumGothic, Naver NanumGothic,\n@@ -97,3 +99,5 @@ INCLUDING ANY GENERAL, SPECIAL, INDIRECT, INCIDENTAL, OR CONSEQUENTIAL\n DAMAGES, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n FROM, OUT OF THE USE OR INABILITY TO USE THE FONT SOFTWARE OR FROM\n OTHER DEALINGS IN THE FONT SOFTWARE.\n+\n+// REUSE-IgnoreEnd"}, {"sha": "0d2941e148df2520e2b55351878f1850a6fe153f", "filename": "src/librustdoc/html/static/fonts/SourceCodePro-LICENSE.txt", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Flibrustdoc%2Fhtml%2Fstatic%2Ffonts%2FSourceCodePro-LICENSE.txt", "raw_url": "https://github.com/rust-lang/rust/raw/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Flibrustdoc%2Fhtml%2Fstatic%2Ffonts%2FSourceCodePro-LICENSE.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Ffonts%2FSourceCodePro-LICENSE.txt?ref=6dfaa143662ddfd6ed2fecadef20eae0ec5d267d", "patch": "@@ -1,3 +1,5 @@\n+// REUSE-IgnoreStart\n+\n Copyright 2010, 2012 Adobe Systems Incorporated (http://www.adobe.com/), with Reserved Font Name 'Source'. All Rights Reserved. Source is a trademark of Adobe Systems Incorporated in the United States and/or other countries.\n \n This Font Software is licensed under the SIL Open Font License, Version 1.1.\n@@ -91,3 +93,5 @@ INCLUDING ANY GENERAL, SPECIAL, INDIRECT, INCIDENTAL, OR CONSEQUENTIAL\n DAMAGES, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n FROM, OUT OF THE USE OR INABILITY TO USE THE FONT SOFTWARE OR FROM\n OTHER DEALINGS IN THE FONT SOFTWARE.\n+\n+// REUSE-IgnoreEnd"}, {"sha": "175fa4f47aecdc02e902d243a1c29914eb2ee258", "filename": "src/librustdoc/html/static/fonts/SourceSerif4-LICENSE.md", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Flibrustdoc%2Fhtml%2Fstatic%2Ffonts%2FSourceSerif4-LICENSE.md", "raw_url": "https://github.com/rust-lang/rust/raw/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Flibrustdoc%2Fhtml%2Fstatic%2Ffonts%2FSourceSerif4-LICENSE.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Ffonts%2FSourceSerif4-LICENSE.md?ref=6dfaa143662ddfd6ed2fecadef20eae0ec5d267d", "patch": "@@ -1,3 +1,6 @@\n+<!-- REUSE-IgnoreStart -->\n+\n+Copyright 2014-2021 Adobe (http://www.adobe.com/), with Reserved Font Name 'Source'. All Rights Reserved. Source is a trademark of Adobe in the United States and/or other countries.\n Copyright 2014 - 2023 Adobe (http://www.adobe.com/), with Reserved Font Name \u2018Source\u2019. All Rights Reserved. Source is a trademark of Adobe in the United States and/or other countries.\n \n This Font Software is licensed under the SIL Open Font License, Version 1.1.\n@@ -91,3 +94,5 @@ INCLUDING ANY GENERAL, SPECIAL, INDIRECT, INCIDENTAL, OR CONSEQUENTIAL\n DAMAGES, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n FROM, OUT OF THE USE OR INABILITY TO USE THE FONT SOFTWARE OR FROM\n OTHER DEALINGS IN THE FONT SOFTWARE.\n+\n+<!-- REUSE-IgnoreEnd -->"}, {"sha": "82703b18fd7d25becba833e825aea148bf870aad", "filename": "src/tools/clippy/COPYRIGHT", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Ftools%2Fclippy%2FCOPYRIGHT", "raw_url": "https://github.com/rust-lang/rust/raw/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Ftools%2Fclippy%2FCOPYRIGHT", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2FCOPYRIGHT?ref=6dfaa143662ddfd6ed2fecadef20eae0ec5d267d", "patch": "@@ -1,7 +1,11 @@\n+// REUSE-IgnoreStart\n+\n Copyright 2014-2022 The Rust Project Developers\n \n Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n option. All files in the project carrying such notice may not be\n copied, modified, or distributed except according to those terms.\n+\n+// REUSE-IgnoreEnd"}, {"sha": "b69ed8900a491371a75fdb3bfb16fb8cd9015f9e", "filename": "src/tools/clippy/README.md", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Ftools%2Fclippy%2FREADME.md", "raw_url": "https://github.com/rust-lang/rust/raw/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Ftools%2Fclippy%2FREADME.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2FREADME.md?ref=6dfaa143662ddfd6ed2fecadef20eae0ec5d267d", "patch": "@@ -275,10 +275,14 @@ If you want to contribute to Clippy, you can find more information in [CONTRIBUT\n \n ## License\n \n+<!-- REUSE-IgnoreStart -->\n+\n Copyright 2014-2022 The Rust Project Developers\n \n Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n [https://www.apache.org/licenses/LICENSE-2.0](https://www.apache.org/licenses/LICENSE-2.0)> or the MIT license\n <LICENSE-MIT or [https://opensource.org/licenses/MIT](https://opensource.org/licenses/MIT)>, at your\n option. Files in the project may not be\n copied, modified, or distributed except according to those terms.\n+\n+<!-- REUSE-IgnoreEnd -->"}, {"sha": "e197ea048a0af4f343e5d190dde0de2405f0b2c2", "filename": "src/tools/clippy/rustc_tools_util/README.md", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Ftools%2Fclippy%2Frustc_tools_util%2FREADME.md", "raw_url": "https://github.com/rust-lang/rust/raw/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Ftools%2Fclippy%2Frustc_tools_util%2FREADME.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Frustc_tools_util%2FREADME.md?ref=6dfaa143662ddfd6ed2fecadef20eae0ec5d267d", "patch": "@@ -49,10 +49,14 @@ The changelog for `rustc_tools_util` is available under:\n \n ## License\n \n+<!-- REUSE-IgnoreStart -->\n+\n Copyright 2014-2022 The Rust Project Developers\n \n Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n option. All files in the project carrying such notice may not be\n copied, modified, or distributed except according to those terms.\n+\n+<!-- REUSE-IgnoreEnd -->"}, {"sha": "2855069db0d67d16f89ba852aa6fa6de78b19af0", "filename": "src/tools/collect-license-metadata/src/licenses.rs", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Ftools%2Fcollect-license-metadata%2Fsrc%2Flicenses.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Ftools%2Fcollect-license-metadata%2Fsrc%2Flicenses.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcollect-license-metadata%2Fsrc%2Flicenses.rs?ref=6dfaa143662ddfd6ed2fecadef20eae0ec5d267d", "patch": "@@ -42,6 +42,7 @@ pub(crate) struct License {\n impl License {\n     fn simplify(&mut self) {\n         self.remove_copyright_prefixes();\n+        self.remove_trailing_dots();\n         self.copyright.sort();\n         self.copyright.dedup();\n     }\n@@ -62,4 +63,12 @@ impl License {\n             *copyright = stripped.into();\n         }\n     }\n+\n+    fn remove_trailing_dots(&mut self) {\n+        for copyright in &mut self.copyright {\n+            if copyright.ends_with('.') {\n+                *copyright = copyright.trim_end_matches('.').to_string();\n+            }\n+        }\n+    }\n }"}, {"sha": "7a2a440636d91345375a5ab72db6d1c8daa618f7", "filename": "src/tools/collect-license-metadata/src/path_tree.rs", "status": "modified", "additions": 69, "deletions": 27, "changes": 96, "blob_url": "https://github.com/rust-lang/rust/blob/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Ftools%2Fcollect-license-metadata%2Fsrc%2Fpath_tree.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Ftools%2Fcollect-license-metadata%2Fsrc%2Fpath_tree.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcollect-license-metadata%2Fsrc%2Fpath_tree.rs?ref=6dfaa143662ddfd6ed2fecadef20eae0ec5d267d", "patch": "@@ -13,7 +13,7 @@ pub(crate) enum Node<L> {\n     Root { childs: Vec<Node<L>> },\n     Directory { name: PathBuf, childs: Vec<Node<L>>, license: Option<L> },\n     File { name: PathBuf, license: L },\n-    FileGroup { names: Vec<PathBuf>, license: L },\n+    Group { files: Vec<PathBuf>, directories: Vec<PathBuf>, license: L },\n     Empty,\n }\n \n@@ -22,7 +22,7 @@ impl Node<LicenseId> {\n         self.merge_directories();\n         self.collapse_in_licensed_directories();\n         self.merge_directory_licenses();\n-        self.merge_file_groups();\n+        self.merge_groups();\n         self.remove_empty();\n     }\n \n@@ -64,8 +64,8 @@ impl Node<LicenseId> {\n                         Node::Root { .. } => {\n                             panic!(\"can't have a root inside another element\");\n                         }\n-                        Node::FileGroup { .. } => {\n-                            panic!(\"FileGroup should not be present at this stage\");\n+                        Node::Group { .. } => {\n+                            panic!(\"Group should not be present at this stage\");\n                         }\n                         Node::Directory { license: Some(_), .. } => {\n                             panic!(\"license should not be set at this stage\");\n@@ -86,8 +86,8 @@ impl Node<LicenseId> {\n             }\n             Node::Empty => {}\n             Node::File { .. } => {}\n-            Node::FileGroup { .. } => {\n-                panic!(\"FileGroup should not be present at this stage\");\n+            Node::Group { .. } => {\n+                panic!(\"Group should not be present at this stage\");\n             }\n             Node::Directory { license: Some(_), .. } => {\n                 panic!(\"license should not be set at this stage\");\n@@ -132,7 +132,7 @@ impl Node<LicenseId> {\n                 }\n             }\n             Node::File { .. } => {}\n-            Node::FileGroup { .. } => {}\n+            Node::Group { .. } => panic!(\"group should not be present at this stage\"),\n             Node::Empty => {}\n         }\n     }\n@@ -165,8 +165,8 @@ impl Node<LicenseId> {\n                             Node::Root { .. } => {\n                                 panic!(\"can't have a root inside another element\");\n                             }\n-                            Node::FileGroup { .. } => {\n-                                panic!(\"FileGroup should not be present at this stage\");\n+                            Node::Group { .. } => {\n+                                panic!(\"Group should not be present at this stage\");\n                             }\n                             Node::Directory { name: child_child_name, .. } => {\n                                 *child_child_name = child_name.join(&child_child_name);\n@@ -185,38 +185,74 @@ impl Node<LicenseId> {\n             }\n             Node::Empty => {}\n             Node::File { .. } => {}\n-            Node::FileGroup { .. } => {}\n+            Node::Group { .. } => panic!(\"Group should not be present at this stage\"),\n         }\n     }\n \n     /// This pass groups multiple files in a directory with the same license into a single\n-    /// \"FileGroup\", so that the license of all those files can be reported as a group.\n+    /// \"Group\", so that the license of all those files can be reported as a group.\n+    ///\n+    /// This also merges directories *without exceptions*.\n     ///\n     /// Crucially this pass runs after collapse_in_licensed_directories, so the most common license\n     /// will already be marked as the directory's license and won't be turned into a group.\n-    fn merge_file_groups(&mut self) {\n+    fn merge_groups(&mut self) {\n+        #[derive(Default)]\n+        struct Grouped {\n+            files: Vec<PathBuf>,\n+            directories: Vec<PathBuf>,\n+        }\n         match self {\n             Node::Root { childs } | Node::Directory { childs, .. } => {\n-                let mut grouped = BTreeMap::new();\n+                let mut grouped: BTreeMap<LicenseId, Grouped> = BTreeMap::new();\n \n                 for child in &mut *childs {\n-                    child.merge_file_groups();\n-                    if let Node::File { name, license } = child {\n-                        grouped.entry(*license).or_insert_with(Vec::new).push(name.clone());\n-                        *child = Node::Empty;\n+                    child.merge_groups();\n+                    match child {\n+                        Node::Directory { name, childs, license: Some(license) } => {\n+                            if childs.is_empty() {\n+                                grouped\n+                                    .entry(*license)\n+                                    .or_insert_with(Grouped::default)\n+                                    .directories\n+                                    .push(name.clone());\n+                                *child = Node::Empty;\n+                            }\n+                        }\n+                        Node::File { name, license } => {\n+                            grouped\n+                                .entry(*license)\n+                                .or_insert_with(Grouped::default)\n+                                .files\n+                                .push(name.clone());\n+                            *child = Node::Empty;\n+                        }\n+                        _ => {}\n                     }\n                 }\n \n-                for (license, mut names) in grouped.into_iter() {\n-                    if names.len() == 1 {\n-                        childs.push(Node::File { license, name: names.pop().unwrap() });\n+                for (license, mut grouped) in grouped.into_iter() {\n+                    if grouped.files.len() + grouped.directories.len() <= 1 {\n+                        if let Some(name) = grouped.files.pop() {\n+                            childs.push(Node::File { license, name });\n+                        } else if let Some(name) = grouped.directories.pop() {\n+                            childs.push(Node::Directory {\n+                                name,\n+                                childs: Vec::new(),\n+                                license: Some(license),\n+                            });\n+                        }\n                     } else {\n-                        childs.push(Node::FileGroup { license, names });\n+                        childs.push(Node::Group {\n+                            license,\n+                            files: grouped.files,\n+                            directories: grouped.directories,\n+                        });\n                     }\n                 }\n             }\n             Node::File { .. } => {}\n-            Node::FileGroup { .. } => panic!(\"FileGroup should not be present at this stage\"),\n+            Node::Group { .. } => panic!(\"FileGroup should not be present at this stage\"),\n             Node::Empty => {}\n         }\n     }\n@@ -231,7 +267,7 @@ impl Node<LicenseId> {\n                 }\n                 childs.retain(|child| !matches!(child, Node::Empty));\n             }\n-            Node::FileGroup { .. } => {}\n+            Node::Group { .. } => {}\n             Node::File { .. } => {}\n             Node::Empty => {}\n         }\n@@ -278,16 +314,22 @@ pub(crate) fn expand_interned_licenses(\n ) -> Node<&License> {\n     match node {\n         Node::Root { childs } => Node::Root {\n-            childs: childs.into_iter().map(|child| strip_interning(child, interner)).collect(),\n+            childs: childs\n+                .into_iter()\n+                .map(|child| expand_interned_licenses(child, interner))\n+                .collect(),\n         },\n         Node::Directory { name, childs, license } => Node::Directory {\n-            childs: childs.into_iter().map(|child| strip_interning(child, interner)).collect(),\n+            childs: childs\n+                .into_iter()\n+                .map(|child| expand_interned_licenses(child, interner))\n+                .collect(),\n             license: license.map(|license| interner.resolve(license)),\n             name,\n         },\n         Node::File { name, license } => Node::File { name, license: interner.resolve(license) },\n-        Node::FileGroup { names, license } => {\n-            Node::FileGroup { names, license: interner.resolve(license) }\n+        Node::Group { files, directories, license } => {\n+            Node::Group { files, directories, license: interner.resolve(license) }\n         }\n         Node::Empty => Node::Empty,\n     }"}, {"sha": "4d116c7da653a48046639e416bacbf26584ef759", "filename": "src/tools/generate-copyright/src/main.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Ftools%2Fgenerate-copyright%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Ftools%2Fgenerate-copyright%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fgenerate-copyright%2Fsrc%2Fmain.rs?ref=6dfaa143662ddfd6ed2fecadef20eae0ec5d267d", "patch": "@@ -36,8 +36,8 @@ fn render_recursive(node: &Node, buffer: &mut Vec<u8>, depth: usize) -> Result<(\n                 }\n             }\n         }\n-        Node::FileGroup { names, license } => {\n-            render_license(&prefix, names.iter(), license, buffer)?;\n+        Node::Group { files, directories, license } => {\n+            render_license(&prefix, directories.iter().chain(files.iter()), license, buffer)?;\n         }\n         Node::File { name, license } => {\n             render_license(&prefix, std::iter::once(name), license, buffer)?;\n@@ -76,7 +76,7 @@ pub(crate) enum Node {\n     Root { childs: Vec<Node> },\n     Directory { name: String, childs: Vec<Node>, license: License },\n     File { name: String, license: License },\n-    FileGroup { names: Vec<String>, license: License },\n+    Group { files: Vec<String>, directories: Vec<String>, license: License },\n }\n \n #[derive(serde::Deserialize)]"}, {"sha": "13e7bd8e1b944dd4a6e7a0404ea58e28b615dcb2", "filename": "src/tools/miri/tests/pass/intrinsics-integer.rs", "status": "modified", "additions": 2, "deletions": 9, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fintrinsics-integer.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fintrinsics-integer.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fintrinsics-integer.rs?ref=6dfaa143662ddfd6ed2fecadef20eae0ec5d267d", "patch": "@@ -1,12 +1,5 @@\n-// Copyright 2012-2014 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n+// SPDX-License-Identifier: MIT OR Apache-2.0\n+// SPDX-FileCopyrightText: The Rust Project Developers (see https://thanks.rust-lang.org)\n \n #![feature(core_intrinsics)]\n use std::intrinsics::*;"}, {"sha": "9f2dc333f33ece30b58b6e6e9ca118cd3c67932e", "filename": "src/tools/miri/tests/pass/intrinsics-math.rs", "status": "modified", "additions": 2, "deletions": 9, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fintrinsics-math.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fintrinsics-math.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fintrinsics-math.rs?ref=6dfaa143662ddfd6ed2fecadef20eae0ec5d267d", "patch": "@@ -1,12 +1,5 @@\n-// Copyright 2012-2014 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n+// SPDX-License-Identifier: MIT OR Apache-2.0\n+// SPDX-FileCopyrightText: The Rust Project Developers (see https://thanks.rust-lang.org)\n \n macro_rules! assert_approx_eq {\n     ($a:expr, $b:expr) => {{"}, {"sha": "b50a43ffd83b0783289d490b6d4fe81417d738af", "filename": "src/tools/miri/tests/pass/issues/issue-30530.rs", "status": "modified", "additions": 2, "deletions": 9, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fissues%2Fissue-30530.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fissues%2Fissue-30530.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fissues%2Fissue-30530.rs?ref=6dfaa143662ddfd6ed2fecadef20eae0ec5d267d", "patch": "@@ -1,12 +1,5 @@\n-// Copyright 2012-2016 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n+// SPDX-License-Identifier: MIT OR Apache-2.0\n+// SPDX-FileCopyrightText: The Rust Project Developers (see https://thanks.rust-lang.org)\n \n // Regression test for Issue #30530: alloca's created for storing\n // intermediate scratch values during brace-less match arms need to be"}, {"sha": "81a43cc8bcc6bf907eda87d43fd61ce91d453159", "filename": "src/tools/miri/tests/pass/tag-align-dyn-u64.rs", "status": "modified", "additions": 2, "deletions": 9, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Ftag-align-dyn-u64.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Ftag-align-dyn-u64.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Ftag-align-dyn-u64.rs?ref=6dfaa143662ddfd6ed2fecadef20eae0ec5d267d", "patch": "@@ -1,12 +1,5 @@\n-// Copyright 2012-2014 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n+// SPDX-License-Identifier: MIT OR Apache-2.0\n+// SPDX-FileCopyrightText: The Rust Project Developers (see https://thanks.rust-lang.org)\n \n use std::mem;\n "}, {"sha": "bee5319fd5502d84af476b574be91d41e5857794", "filename": "src/tools/rust-installer/combine-installers.sh", "status": "modified", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Ftools%2Frust-installer%2Fcombine-installers.sh", "raw_url": "https://github.com/rust-lang/rust/raw/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Ftools%2Frust-installer%2Fcombine-installers.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Frust-installer%2Fcombine-installers.sh?ref=6dfaa143662ddfd6ed2fecadef20eae0ec5d267d", "patch": "@@ -1,13 +1,4 @@\n #!/bin/bash\n-# Copyright 2014 The Rust Project Developers. See the COPYRIGHT\n-# file at the top-level directory of this distribution and at\n-# http://rust-lang.org/COPYRIGHT.\n-#\n-# Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-# http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-# <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-# option. This file may not be copied, modified, or distributed\n-# except according to those terms.\n \n set -ue\n "}, {"sha": "f112fd4b21f923c7de3fdddb1607b0f2b4fc10ef", "filename": "src/tools/rust-installer/gen-install-script.sh", "status": "modified", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Ftools%2Frust-installer%2Fgen-install-script.sh", "raw_url": "https://github.com/rust-lang/rust/raw/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Ftools%2Frust-installer%2Fgen-install-script.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Frust-installer%2Fgen-install-script.sh?ref=6dfaa143662ddfd6ed2fecadef20eae0ec5d267d", "patch": "@@ -1,13 +1,4 @@\n #!/bin/bash\n-# Copyright 2014 The Rust Project Developers. See the COPYRIGHT\n-# file at the top-level directory of this distribution and at\n-# http://rust-lang.org/COPYRIGHT.\n-#\n-# Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-# http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-# <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-# option. This file may not be copied, modified, or distributed\n-# except according to those terms.\n \n set -ue\n "}, {"sha": "eabd8c95cd84990dd31bf264af42438ee6d30bde", "filename": "src/tools/rust-installer/gen-installer.sh", "status": "modified", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Ftools%2Frust-installer%2Fgen-installer.sh", "raw_url": "https://github.com/rust-lang/rust/raw/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Ftools%2Frust-installer%2Fgen-installer.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Frust-installer%2Fgen-installer.sh?ref=6dfaa143662ddfd6ed2fecadef20eae0ec5d267d", "patch": "@@ -1,13 +1,4 @@\n #!/bin/bash\n-# Copyright 2014 The Rust Project Developers. See the COPYRIGHT\n-# file at the top-level directory of this distribution and at\n-# http://rust-lang.org/COPYRIGHT.\n-#\n-# Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-# http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-# <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-# option. This file may not be copied, modified, or distributed\n-# except according to those terms.\n \n set -ue\n "}, {"sha": "92a3f1f2c983a7e5a0638e30b27a0792c8dee162", "filename": "src/tools/rust-installer/install-template.sh", "status": "modified", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Ftools%2Frust-installer%2Finstall-template.sh", "raw_url": "https://github.com/rust-lang/rust/raw/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Ftools%2Frust-installer%2Finstall-template.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Frust-installer%2Finstall-template.sh?ref=6dfaa143662ddfd6ed2fecadef20eae0ec5d267d", "patch": "@@ -1,13 +1,4 @@\n #!/bin/bash\n-# Copyright 2014 The Rust Project Developers. See the COPYRIGHT\n-# file at the top-level directory of this distribution and at\n-# http://rust-lang.org/COPYRIGHT.\n-#\n-# Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-# http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-# <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-# option. This file may not be copied, modified, or distributed\n-# except according to those terms.\n \n # No undefined variables\n set -u"}, {"sha": "e342007da373cbadadd5b14b703a6171802a7c4b", "filename": "src/tools/rust-installer/make-tarballs.sh", "status": "modified", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Ftools%2Frust-installer%2Fmake-tarballs.sh", "raw_url": "https://github.com/rust-lang/rust/raw/6dfaa143662ddfd6ed2fecadef20eae0ec5d267d/src%2Ftools%2Frust-installer%2Fmake-tarballs.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Frust-installer%2Fmake-tarballs.sh?ref=6dfaa143662ddfd6ed2fecadef20eae0ec5d267d", "patch": "@@ -1,13 +1,4 @@\n #!/bin/sh\n-# Copyright 2014 The Rust Project Developers. See the COPYRIGHT\n-# file at the top-level directory of this distribution and at\n-# http://rust-lang.org/COPYRIGHT.\n-#\n-# Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-# http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-# <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-# option. This file may not be copied, modified, or distributed\n-# except according to those terms.\n \n set -ue\n "}]}