{"sha": "a1a0e0c945315112b5432765677ef7b466db7c09", "node_id": "MDY6Q29tbWl0NzI0NzEyOmExYTBlMGM5NDUzMTUxMTJiNTQzMjc2NTY3N2VmN2I0NjZkYjdjMDk=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-06-27T21:01:13Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-06-27T21:01:13Z"}, "message": "Rollup merge of #62155 - cramertj:61872, r=centril\n\nAdd regression test for MIR drop generation in async loops\n\nFixes #61986.\n\nr? @Centril", "tree": {"sha": "097e9a5999b2d3a8a327a64598f40bb9b05bec6d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/097e9a5999b2d3a8a327a64598f40bb9b05bec6d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a1a0e0c945315112b5432765677ef7b466db7c09", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdFS6ZCRBK7hj4Ov3rIwAAdHIIAIwQyqS+mWKu/RVWGJKkxUt1\niDE31YJDJh0w17YKHnifeznDF+hyc/TPnfIFhUPczO+FKd8JjSYXgQuUjdfqZiwO\nzEoEkG4v1ye8IR1XZBuyG/sM25hEc9uxUvuvnR+T1i7q//58E1pzUVEeR4BPUfy+\n5YZhRxOglI0NFRKB/qKOl+Zmzm4dsUiDJ3XHgcYpaONXEQ0bRjuRhVf08tKwuJhi\n8xZBgYRCWuEps00fiaASUfeTncQH3KPVQhV6mPYjqho+F1A86f38bXyvBdJfJvyZ\nEWXu+OvcHE6SgZGQy+4YNLuzSPASu4rzWfH8D+ed/2BT5NKSRj/72g0y5FFzwg4=\n=lcyd\n-----END PGP SIGNATURE-----\n", "payload": "tree 097e9a5999b2d3a8a327a64598f40bb9b05bec6d\nparent 0fe028eae01ade628b2cf7a12c2ef83fd2bb2522\nparent 72ca844ca7d9debbb849eb3aa16c5c4df14d1293\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1561669273 +0200\ncommitter GitHub <noreply@github.com> 1561669273 +0200\n\nRollup merge of #62155 - cramertj:61872, r=centril\n\nAdd regression test for MIR drop generation in async loops\n\nFixes #61986.\n\nr? @Centril\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a1a0e0c945315112b5432765677ef7b466db7c09", "html_url": "https://github.com/rust-lang/rust/commit/a1a0e0c945315112b5432765677ef7b466db7c09", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a1a0e0c945315112b5432765677ef7b466db7c09/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0fe028eae01ade628b2cf7a12c2ef83fd2bb2522", "url": "https://api.github.com/repos/rust-lang/rust/commits/0fe028eae01ade628b2cf7a12c2ef83fd2bb2522", "html_url": "https://github.com/rust-lang/rust/commit/0fe028eae01ade628b2cf7a12c2ef83fd2bb2522"}, {"sha": "72ca844ca7d9debbb849eb3aa16c5c4df14d1293", "url": "https://api.github.com/repos/rust-lang/rust/commits/72ca844ca7d9debbb849eb3aa16c5c4df14d1293", "html_url": "https://github.com/rust-lang/rust/commit/72ca844ca7d9debbb849eb3aa16c5c4df14d1293"}], "stats": {"total": 21, "additions": 21, "deletions": 0}, "files": [{"sha": "da8b22bc104bf0ee4f582f25e48febe1d5618908", "filename": "src/test/ui/async-await/issues/issue-61986.rs", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/a1a0e0c945315112b5432765677ef7b466db7c09/src%2Ftest%2Fui%2Fasync-await%2Fissues%2Fissue-61986.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a1a0e0c945315112b5432765677ef7b466db7c09/src%2Ftest%2Fui%2Fasync-await%2Fissues%2Fissue-61986.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasync-await%2Fissues%2Fissue-61986.rs?ref=a1a0e0c945315112b5432765677ef7b466db7c09", "patch": "@@ -0,0 +1,21 @@\n+// compile-pass\n+// edition:2018\n+//\n+// Tests that we properly handle StorageDead/StorageLives for temporaries\n+// created in async loop bodies.\n+\n+#![feature(async_await)]\n+\n+async fn bar() -> Option<()> {\n+    Some(())\n+}\n+\n+async fn listen() {\n+    while let Some(_) = bar().await {\n+        String::new();\n+    }\n+}\n+\n+fn main() {\n+    listen();\n+}"}]}