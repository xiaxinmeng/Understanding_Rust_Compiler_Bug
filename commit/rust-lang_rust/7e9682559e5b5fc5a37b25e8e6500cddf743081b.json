{"sha": "7e9682559e5b5fc5a37b25e8e6500cddf743081b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdlOTY4MjU1OWU1YjVmYzVhMzdiMjVlOGU2NTAwY2RkZjc0MzA4MWI=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-08-15T12:34:00Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-08-15T12:34:00Z"}, "message": "Rollup merge of #63165 - xen0n:mips64-musl-targets, r=alexcrichton\n\nAdd builtin targets for mips64(el)-unknown-linux-muslabi64\n\nThis is prerequisite for rust-lang/libc#1449.\n\nTested locally to produce working static and dynamic binaries, ~~but CI config is untested for now~~ CI is to be added in a follow-up PR.\n\n*edit: dynamic binaries also confirmed working!*\n\n*edit 2: changed triples to include ABI, and removed stray `crt_static_default = false` declarations to be consistent with other musl targets*", "tree": {"sha": "be7c034008e208332fcc04602a8745cb0e9089e1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/be7c034008e208332fcc04602a8745cb0e9089e1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7e9682559e5b5fc5a37b25e8e6500cddf743081b", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdVVE4CRBK7hj4Ov3rIwAAdHIIAD5MehJQ9Ewdy/WvPC/PyQG2\n6rztBNq9X4JMwQ+Huo+Vw/hwXimxXHchYm3Cr0t98axFxlsv4h6ozE26RUDls5Mw\nraEm06do8amRGSTuvd/vLRJDHqVJYd5Kh9p9MkWniyKEjciGwTMOPqsh0hvt68vA\n93f5RARSkYr8eMGfhopZeBVFZa9Xz/i7H7xLQO6AV4lYkKu4NyXYyYb82IiJhlgp\npv6E0dAGp+z3D5rr+nXlbewWEY7P5Xc/KJ9dqJdzpNn7YFybtLoKFQYErPXsHRyo\nySi0xTIFjNNM1jgb0+sF83izox7nk9Ks3886rCTz5m/1AHTdcJrCp2j9fGpF8j4=\n=Jqat\n-----END PGP SIGNATURE-----\n", "payload": "tree be7c034008e208332fcc04602a8745cb0e9089e1\nparent 1db4bbccedd46af905b20581a552aebf6dc57405\nparent 30fcd50ba913e579bf01393d25ba85c9c2c5a781\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1565872440 +0200\ncommitter GitHub <noreply@github.com> 1565872440 +0200\n\nRollup merge of #63165 - xen0n:mips64-musl-targets, r=alexcrichton\n\nAdd builtin targets for mips64(el)-unknown-linux-muslabi64\n\nThis is prerequisite for rust-lang/libc#1449.\n\nTested locally to produce working static and dynamic binaries, ~~but CI config is untested for now~~ CI is to be added in a follow-up PR.\n\n*edit: dynamic binaries also confirmed working!*\n\n*edit 2: changed triples to include ABI, and removed stray `crt_static_default = false` declarations to be consistent with other musl targets*\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7e9682559e5b5fc5a37b25e8e6500cddf743081b", "html_url": "https://github.com/rust-lang/rust/commit/7e9682559e5b5fc5a37b25e8e6500cddf743081b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7e9682559e5b5fc5a37b25e8e6500cddf743081b/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1db4bbccedd46af905b20581a552aebf6dc57405", "url": "https://api.github.com/repos/rust-lang/rust/commits/1db4bbccedd46af905b20581a552aebf6dc57405", "html_url": "https://github.com/rust-lang/rust/commit/1db4bbccedd46af905b20581a552aebf6dc57405"}, {"sha": "30fcd50ba913e579bf01393d25ba85c9c2c5a781", "url": "https://api.github.com/repos/rust-lang/rust/commits/30fcd50ba913e579bf01393d25ba85c9c2c5a781", "html_url": "https://github.com/rust-lang/rust/commit/30fcd50ba913e579bf01393d25ba85c9c2c5a781"}], "stats": {"total": 52, "additions": 52, "deletions": 0}, "files": [{"sha": "75f3efa49c4f04557da497a29b008dc21c79b411", "filename": "src/librustc_target/spec/mips64_unknown_linux_muslabi64.rs", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/7e9682559e5b5fc5a37b25e8e6500cddf743081b/src%2Flibrustc_target%2Fspec%2Fmips64_unknown_linux_muslabi64.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7e9682559e5b5fc5a37b25e8e6500cddf743081b/src%2Flibrustc_target%2Fspec%2Fmips64_unknown_linux_muslabi64.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_target%2Fspec%2Fmips64_unknown_linux_muslabi64.rs?ref=7e9682559e5b5fc5a37b25e8e6500cddf743081b", "patch": "@@ -0,0 +1,25 @@\n+use crate::spec::{LinkerFlavor, Target, TargetOptions, TargetResult};\n+\n+pub fn target() -> TargetResult {\n+    let mut base = super::linux_musl_base::opts();\n+    base.cpu = \"mips64r2\".to_string();\n+    base.features = \"+mips64r2\".to_string();\n+    base.max_atomic_width = Some(64);\n+    Ok(Target {\n+        // LLVM doesn't recognize \"muslabi64\" yet.\n+        llvm_target: \"mips64-unknown-linux-musl\".to_string(),\n+        target_endian: \"big\".to_string(),\n+        target_pointer_width: \"64\".to_string(),\n+        target_c_int_width: \"32\".to_string(),\n+        data_layout: \"E-m:e-i8:8:32-i16:16:32-i64:64-n32:64-S128\".to_string(),\n+        arch: \"mips64\".to_string(),\n+        target_os: \"linux\".to_string(),\n+        target_env: \"musl\".to_string(),\n+        target_vendor: \"unknown\".to_string(),\n+        linker_flavor: LinkerFlavor::Gcc,\n+        options: TargetOptions {\n+            target_mcount: \"_mcount\".to_string(),\n+            .. base\n+        },\n+    })\n+}"}, {"sha": "a6aad3ddd3d797e2766e6b11ec5f366c7e45053d", "filename": "src/librustc_target/spec/mips64el_unknown_linux_muslabi64.rs", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/7e9682559e5b5fc5a37b25e8e6500cddf743081b/src%2Flibrustc_target%2Fspec%2Fmips64el_unknown_linux_muslabi64.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7e9682559e5b5fc5a37b25e8e6500cddf743081b/src%2Flibrustc_target%2Fspec%2Fmips64el_unknown_linux_muslabi64.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_target%2Fspec%2Fmips64el_unknown_linux_muslabi64.rs?ref=7e9682559e5b5fc5a37b25e8e6500cddf743081b", "patch": "@@ -0,0 +1,25 @@\n+use crate::spec::{LinkerFlavor, Target, TargetOptions, TargetResult};\n+\n+pub fn target() -> TargetResult {\n+    let mut base = super::linux_musl_base::opts();\n+    base.cpu = \"mips64r2\".to_string();\n+    base.features = \"+mips64r2\".to_string();\n+    base.max_atomic_width = Some(64);\n+    Ok(Target {\n+        // LLVM doesn't recognize \"muslabi64\" yet.\n+        llvm_target: \"mips64el-unknown-linux-musl\".to_string(),\n+        target_endian: \"little\".to_string(),\n+        target_pointer_width: \"64\".to_string(),\n+        target_c_int_width: \"32\".to_string(),\n+        data_layout: \"e-m:e-i8:8:32-i16:16:32-i64:64-n32:64-S128\".to_string(),\n+        arch: \"mips64\".to_string(),\n+        target_os: \"linux\".to_string(),\n+        target_env: \"musl\".to_string(),\n+        target_vendor: \"unknown\".to_string(),\n+        linker_flavor: LinkerFlavor::Gcc,\n+        options: TargetOptions {\n+            target_mcount: \"_mcount\".to_string(),\n+            .. base\n+        },\n+    })\n+}"}, {"sha": "0c70f77d1c22dbf3ae01aed77deaaf224c377be0", "filename": "src/librustc_target/spec/mod.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7e9682559e5b5fc5a37b25e8e6500cddf743081b/src%2Flibrustc_target%2Fspec%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7e9682559e5b5fc5a37b25e8e6500cddf743081b/src%2Flibrustc_target%2Fspec%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_target%2Fspec%2Fmod.rs?ref=7e9682559e5b5fc5a37b25e8e6500cddf743081b", "patch": "@@ -372,6 +372,8 @@ supported_targets! {\n     (\"i586-unknown-linux-musl\", i586_unknown_linux_musl),\n     (\"mips-unknown-linux-musl\", mips_unknown_linux_musl),\n     (\"mipsel-unknown-linux-musl\", mipsel_unknown_linux_musl),\n+    (\"mips64-unknown-linux-muslabi64\", mips64_unknown_linux_muslabi64),\n+    (\"mips64el-unknown-linux-muslabi64\", mips64el_unknown_linux_muslabi64),\n     (\"hexagon-unknown-linux-musl\", hexagon_unknown_linux_musl),\n \n     (\"mips-unknown-linux-uclibc\", mips_unknown_linux_uclibc),"}]}