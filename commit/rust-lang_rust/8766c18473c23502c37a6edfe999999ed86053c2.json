{"sha": "8766c18473c23502c37a6edfe999999ed86053c2", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg3NjZjMTg0NzNjMjM1MDJjMzdhNmVkZmU5OTk5OTllZDg2MDUzYzI=", "commit": {"author": {"name": "Jonas Schievink", "email": "jonasschievink@gmail.com", "date": "2016-08-28T13:37:37Z"}, "committer": {"name": "Jonas Schievink", "email": "jonasschievink@gmail.com", "date": "2016-08-28T13:37:37Z"}, "message": "Revert changes to the reproducible-builds test", "tree": {"sha": "cc3451879dd5792940d09b9eedec2d58965b5eba", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cc3451879dd5792940d09b9eedec2d58965b5eba"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8766c18473c23502c37a6edfe999999ed86053c2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8766c18473c23502c37a6edfe999999ed86053c2", "html_url": "https://github.com/rust-lang/rust/commit/8766c18473c23502c37a6edfe999999ed86053c2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8766c18473c23502c37a6edfe999999ed86053c2/comments", "author": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e468ede6247590c3cdef196bcf62c17b55d3fddb", "url": "https://api.github.com/repos/rust-lang/rust/commits/e468ede6247590c3cdef196bcf62c17b55d3fddb", "html_url": "https://github.com/rust-lang/rust/commit/e468ede6247590c3cdef196bcf62c17b55d3fddb"}], "stats": {"total": 42, "additions": 14, "deletions": 28}, "files": [{"sha": "8e799ca1a430305f784326bbf454088f8f0540d8", "filename": "src/test/run-make/reproducible-build/Makefile", "status": "modified", "additions": 9, "deletions": 15, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/8766c18473c23502c37a6edfe999999ed86053c2/src%2Ftest%2Frun-make%2Freproducible-build%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/8766c18473c23502c37a6edfe999999ed86053c2/src%2Ftest%2Frun-make%2Freproducible-build%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Freproducible-build%2FMakefile?ref=8766c18473c23502c37a6edfe999999ed86053c2", "patch": "@@ -1,26 +1,20 @@\n -include ../tools.mk\n all:\n \t$(RUSTC) reproducible-build-aux.rs\n-\tmv \"$(TMPDIR)/libreproducible_build_aux.rlib\" \"$(TMPDIR)/first.rlib\"\n-\t$(RUSTC) reproducible-build-aux.rs\n-\tcp \"$(TMPDIR)/libreproducible_build_aux.rlib\" \"$(TMPDIR)/second.rlib\"\n-\tcmp \"$(TMPDIR)/first.rlib\" \"$(TMPDIR)/second.rlib\" || exit 1\n \t$(RUSTC) reproducible-build.rs -o\"$(TMPDIR)/reproducible-build1\"\n \t$(RUSTC) reproducible-build.rs -o\"$(TMPDIR)/reproducible-build2\"\n-\tcmp \"$(TMPDIR)/reproducible-build1\" \"$(TMPDIR)/reproducible-build2\" || exit 1\n-\t$(RUSTC) reproducible-build-aux.rs -g\n-\tmv \"$(TMPDIR)/libreproducible_build_aux.rlib\" \"$(TMPDIR)/first.rlib\"\n+\tnm \"$(TMPDIR)/reproducible-build1\" | sort > \"$(TMPDIR)/reproducible-build1.nm\"\n+\tnm \"$(TMPDIR)/reproducible-build2\" | sort > \"$(TMPDIR)/reproducible-build2.nm\"\n+\tcmp \"$(TMPDIR)/reproducible-build1.nm\" \"$(TMPDIR)/reproducible-build2.nm\" || exit 1\n \t$(RUSTC) reproducible-build-aux.rs -g\n-\tcp \"$(TMPDIR)/libreproducible_build_aux.rlib\" \"$(TMPDIR)/second.rlib\"\n-\tcmp \"$(TMPDIR)/first.rlib\" \"$(TMPDIR)/second.rlib\" || exit 1\n \t$(RUSTC) reproducible-build.rs -g -o\"$(TMPDIR)/reproducible-build1-debug\"\n \t$(RUSTC) reproducible-build.rs -g -o\"$(TMPDIR)/reproducible-build2-debug\"\n-\tcmp \"$(TMPDIR)/reproducible-build1-debug\" \"$(TMPDIR)/reproducible-build2-debug\" || exit 1\n-\t$(RUSTC) reproducible-build-aux.rs -O\n-\tmv \"$(TMPDIR)/libreproducible_build_aux.rlib\" \"$(TMPDIR)/first.rlib\"\n+\tnm \"$(TMPDIR)/reproducible-build1-debug\" | sort > \"$(TMPDIR)/reproducible-build1-debug.nm\"\n+\tnm \"$(TMPDIR)/reproducible-build2-debug\" | sort > \"$(TMPDIR)/reproducible-build2-debug.nm\"\n+\tcmp \"$(TMPDIR)/reproducible-build1-debug.nm\" \"$(TMPDIR)/reproducible-build2-debug.nm\" || exit 1\n \t$(RUSTC) reproducible-build-aux.rs -O\n-\tcp \"$(TMPDIR)/libreproducible_build_aux.rlib\" \"$(TMPDIR)/second.rlib\"\n-\tcmp \"$(TMPDIR)/first.rlib\" \"$(TMPDIR)/second.rlib\" || exit 1\n \t$(RUSTC) reproducible-build.rs -O -o\"$(TMPDIR)/reproducible-build1-opt\"\n \t$(RUSTC) reproducible-build.rs -O -o\"$(TMPDIR)/reproducible-build2-opt\"\n-\tcmp \"$(TMPDIR)/reproducible-build1-opt\" \"$(TMPDIR)/reproducible-build2-opt\" || exit 1\n+\tnm \"$(TMPDIR)/reproducible-build1-opt\" | sort > \"$(TMPDIR)/reproducible-build1-opt.nm\"\n+\tnm \"$(TMPDIR)/reproducible-build2-opt\" | sort > \"$(TMPDIR)/reproducible-build2-opt.nm\"\n+\tcmp \"$(TMPDIR)/reproducible-build1-opt.nm\" \"$(TMPDIR)/reproducible-build2-opt.nm\" || exit 1"}, {"sha": "9ef853e79960b2d57771732bb5762e1b7029da9f", "filename": "src/test/run-make/reproducible-build/reproducible-build-aux.rs", "status": "modified", "additions": 1, "deletions": 7, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/8766c18473c23502c37a6edfe999999ed86053c2/src%2Ftest%2Frun-make%2Freproducible-build%2Freproducible-build-aux.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8766c18473c23502c37a6edfe999999ed86053c2/src%2Ftest%2Frun-make%2Freproducible-build%2Freproducible-build-aux.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Freproducible-build%2Freproducible-build-aux.rs?ref=8766c18473c23502c37a6edfe999999ed86053c2", "patch": "@@ -33,12 +33,6 @@ pub enum Enum {\n \n pub struct TupleStruct(pub i8, pub i16, pub i32, pub i64);\n \n-pub trait Marker {}\n-impl Marker for char {}\n-impl<T, U> Marker for (T, U) {}\n-\n-pub trait Trait<T1: Marker + Marker + Marker, T2> where T1: 'static {\n-    type Assoc: Marker;\n-\n+pub trait Trait<T1, T2> {\n     fn foo(&self);\n }"}, {"sha": "dc7c702e5cc670e2befb493c9b5e8e44add131e1", "filename": "src/test/run-make/reproducible-build/reproducible-build.rs", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/8766c18473c23502c37a6edfe999999ed86053c2/src%2Ftest%2Frun-make%2Freproducible-build%2Freproducible-build.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8766c18473c23502c37a6edfe999999ed86053c2/src%2Ftest%2Frun-make%2Freproducible-build%2Freproducible-build.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Freproducible-build%2Freproducible-build.rs?ref=8766c18473c23502c37a6edfe999999ed86053c2", "patch": "@@ -67,10 +67,7 @@ impl Trait<i32, u64> for u64 {\n     fn foo(&self) {}\n }\n \n-impl<T: reproducible_build_aux::Marker + 'static>\n-reproducible_build_aux::Trait<T, String> for TupleStruct {\n-    type Assoc = (u8, i16);\n-\n+impl reproducible_build_aux::Trait<char, String> for TupleStruct {\n     fn foo(&self) {}\n }\n \n@@ -120,11 +117,12 @@ fn main() {\n     let _ = reproducible_build_aux::Enum::Variant3 { x: 0 };\n     let _ = reproducible_build_aux::TupleStruct(1, 2, 3, 4);\n \n-    let object_shim: &reproducible_build_aux::Trait<char, String, Assoc=(u8, i16)> =\n-        &TupleStruct(0, 1, 2, 3);\n+    let object_shim: &reproducible_build_aux::Trait<char, String> = &TupleStruct(0, 1, 2, 3);\n     object_shim.foo();\n \n     let pointer_shim: &Fn(i32) = &regular_fn;\n \n     TupleStruct(1, 2, 3, 4).bar();\n }\n+\n+"}]}