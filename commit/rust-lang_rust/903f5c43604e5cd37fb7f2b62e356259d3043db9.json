{"sha": "903f5c43604e5cd37fb7f2b62e356259d3043db9", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkwM2Y1YzQzNjA0ZTVjZDM3ZmI3ZjJiNjJlMzU2MjU5ZDMwNDNkYjk=", "commit": {"author": {"name": "Rolf Timmermans", "email": "rolftimmermans@voormedia.com", "date": "2014-12-20T23:40:15Z"}, "committer": {"name": "Rolf Timmermans", "email": "rolftimmermans@voormedia.com", "date": "2014-12-22T09:49:47Z"}, "message": "Avoid allocations.", "tree": {"sha": "6b43f597dc4b88745a34bcddd2bf15b3a598e3be", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6b43f597dc4b88745a34bcddd2bf15b3a598e3be"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/903f5c43604e5cd37fb7f2b62e356259d3043db9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/903f5c43604e5cd37fb7f2b62e356259d3043db9", "html_url": "https://github.com/rust-lang/rust/commit/903f5c43604e5cd37fb7f2b62e356259d3043db9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/903f5c43604e5cd37fb7f2b62e356259d3043db9/comments", "author": {"login": "rolftimmermans", "id": 78237, "node_id": "MDQ6VXNlcjc4MjM3", "avatar_url": "https://avatars.githubusercontent.com/u/78237?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rolftimmermans", "html_url": "https://github.com/rolftimmermans", "followers_url": "https://api.github.com/users/rolftimmermans/followers", "following_url": "https://api.github.com/users/rolftimmermans/following{/other_user}", "gists_url": "https://api.github.com/users/rolftimmermans/gists{/gist_id}", "starred_url": "https://api.github.com/users/rolftimmermans/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rolftimmermans/subscriptions", "organizations_url": "https://api.github.com/users/rolftimmermans/orgs", "repos_url": "https://api.github.com/users/rolftimmermans/repos", "events_url": "https://api.github.com/users/rolftimmermans/events{/privacy}", "received_events_url": "https://api.github.com/users/rolftimmermans/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rolftimmermans", "id": 78237, "node_id": "MDQ6VXNlcjc4MjM3", "avatar_url": "https://avatars.githubusercontent.com/u/78237?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rolftimmermans", "html_url": "https://github.com/rolftimmermans", "followers_url": "https://api.github.com/users/rolftimmermans/followers", "following_url": "https://api.github.com/users/rolftimmermans/following{/other_user}", "gists_url": "https://api.github.com/users/rolftimmermans/gists{/gist_id}", "starred_url": "https://api.github.com/users/rolftimmermans/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rolftimmermans/subscriptions", "organizations_url": "https://api.github.com/users/rolftimmermans/orgs", "repos_url": "https://api.github.com/users/rolftimmermans/repos", "events_url": "https://api.github.com/users/rolftimmermans/events{/privacy}", "received_events_url": "https://api.github.com/users/rolftimmermans/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fc30518be9774e7661739eb29a9bca38f31505c5", "url": "https://api.github.com/repos/rust-lang/rust/commits/fc30518be9774e7661739eb29a9bca38f31505c5", "html_url": "https://github.com/rust-lang/rust/commit/fc30518be9774e7661739eb29a9bca38f31505c5"}], "stats": {"total": 43, "additions": 35, "deletions": 8}, "files": [{"sha": "9aea66483497483f8d189764dee9e84c5c201a73", "filename": "src/libserialize/json.rs", "status": "modified", "additions": 35, "deletions": 8, "changes": 43, "blob_url": "https://github.com/rust-lang/rust/blob/903f5c43604e5cd37fb7f2b62e356259d3043db9/src%2Flibserialize%2Fjson.rs", "raw_url": "https://github.com/rust-lang/rust/raw/903f5c43604e5cd37fb7f2b62e356259d3043db9/src%2Flibserialize%2Fjson.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibserialize%2Fjson.rs?ref=903f5c43604e5cd37fb7f2b62e356259d3043db9", "patch": "@@ -331,14 +331,41 @@ pub fn escape_bytes(wr: &mut io::Writer, bytes: &[u8]) -> Result<(), io::IoError\n \n     for (i, byte) in bytes.iter().enumerate() {\n         let escaped = match *byte {\n-            b'\"' => \"\\\\\\\"\".into_cow(),\n-            b'\\\\' => \"\\\\\\\\\".into_cow(),\n-            b'\\x08' => \"\\\\b\".into_cow(),\n-            b'\\x0c' => \"\\\\f\".into_cow(),\n-            b'\\n' => \"\\\\n\".into_cow(),\n-            b'\\r' => \"\\\\r\".into_cow(),\n-            b'\\t' => \"\\\\t\".into_cow(),\n-            b'\\x00'...b'\\x1f' | b'\\x7f' => format!(\"\\\\u00{:0>2x}\", *byte).into_cow(),\n+            b'\"' => \"\\\\\\\"\",\n+            b'\\\\' => \"\\\\\\\\\",\n+            b'\\x00' => \"\\\\u0000\",\n+            b'\\x01' => \"\\\\u0001\",\n+            b'\\x02' => \"\\\\u0002\",\n+            b'\\x03' => \"\\\\u0003\",\n+            b'\\x04' => \"\\\\u0004\",\n+            b'\\x05' => \"\\\\u0005\",\n+            b'\\x06' => \"\\\\u0006\",\n+            b'\\x07' => \"\\\\u0007\",\n+            b'\\x08' => \"\\\\b\",\n+            b'\\t' => \"\\\\t\",\n+            b'\\n' => \"\\\\n\",\n+            b'\\x0b' => \"\\\\u000b\",\n+            b'\\x0c' => \"\\\\f\",\n+            b'\\r' => \"\\\\r\",\n+            b'\\x0e' => \"\\\\u000e\",\n+            b'\\x0f' => \"\\\\u000f\",\n+            b'\\x10' => \"\\\\u0010\",\n+            b'\\x11' => \"\\\\u0011\",\n+            b'\\x12' => \"\\\\u0012\",\n+            b'\\x13' => \"\\\\u0013\",\n+            b'\\x14' => \"\\\\u0014\",\n+            b'\\x15' => \"\\\\u0015\",\n+            b'\\x16' => \"\\\\u0016\",\n+            b'\\x17' => \"\\\\u0017\",\n+            b'\\x18' => \"\\\\u0018\",\n+            b'\\x19' => \"\\\\u0019\",\n+            b'\\x1a' => \"\\\\u001a\",\n+            b'\\x1b' => \"\\\\u001b\",\n+            b'\\x1c' => \"\\\\u001c\",\n+            b'\\x1d' => \"\\\\u001d\",\n+            b'\\x1e' => \"\\\\u001e\",\n+            b'\\x1f' => \"\\\\u001f\",\n+            b'\\x7f' => \"\\\\u007f\",\n             _ => { continue; }\n         };\n "}]}