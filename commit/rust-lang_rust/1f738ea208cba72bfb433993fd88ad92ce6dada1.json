{"sha": "1f738ea208cba72bfb433993fd88ad92ce6dada1", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFmNzM4ZWEyMDhjYmE3MmJmYjQzMzk5M2ZkODhhZDkyY2U2ZGFkYTE=", "commit": {"author": {"name": "topecongiro", "email": "seuchida@gmail.com", "date": "2018-05-06T06:22:29Z"}, "committer": {"name": "topecongiro", "email": "seuchida@gmail.com", "date": "2018-05-06T06:22:29Z"}, "message": "Cargo fmt", "tree": {"sha": "47d61936de306831002c8d3536cd8a1d58c98501", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/47d61936de306831002c8d3536cd8a1d58c98501"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1f738ea208cba72bfb433993fd88ad92ce6dada1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1f738ea208cba72bfb433993fd88ad92ce6dada1", "html_url": "https://github.com/rust-lang/rust/commit/1f738ea208cba72bfb433993fd88ad92ce6dada1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1f738ea208cba72bfb433993fd88ad92ce6dada1/comments", "author": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "committer": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f8439ce8fe1a9f46525d91fb4c7b11b8a1f809fc", "url": "https://api.github.com/repos/rust-lang/rust/commits/f8439ce8fe1a9f46525d91fb4c7b11b8a1f809fc", "html_url": "https://github.com/rust-lang/rust/commit/f8439ce8fe1a9f46525d91fb4c7b11b8a1f809fc"}], "stats": {"total": 139, "additions": 96, "deletions": 43}, "files": [{"sha": "b7bb92c858f4dad88d2116975e6e20b271b82f9e", "filename": "src/bin/main.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/1f738ea208cba72bfb433993fd88ad92ce6dada1/src%2Fbin%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f738ea208cba72bfb433993fd88ad92ce6dada1/src%2Fbin%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbin%2Fmain.rs?ref=1f738ea208cba72bfb433993fd88ad92ce6dada1", "patch": "@@ -36,7 +36,8 @@ fn main() {\n \n     let exit_code = match execute(&opts) {\n         Ok((write_mode, summary)) => {\n-            if summary.has_operational_errors() || summary.has_parsing_errors()\n+            if summary.has_operational_errors()\n+                || summary.has_parsing_errors()\n                 || (summary.has_diff && write_mode == WriteMode::Check)\n             {\n                 1"}, {"sha": "c602ed7b3e5019ae986000ffb3428a442a6648f9", "filename": "src/chains.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/1f738ea208cba72bfb433993fd88ad92ce6dada1/src%2Fchains.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f738ea208cba72bfb433993fd88ad92ce6dada1/src%2Fchains.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fchains.rs?ref=1f738ea208cba72bfb433993fd88ad92ce6dada1", "patch": "@@ -265,7 +265,8 @@ pub fn rewrite_chain(expr: &ast::Expr, context: &RewriteContext, shape: Shape) -\n         nested_shape.indent.to_string_with_newline(context.config)\n     };\n \n-    let first_connector = if is_small_parent || fits_single_line\n+    let first_connector = if is_small_parent\n+        || fits_single_line\n         || last_line_extendable(&parent_rewrite)\n         || context.config.indent_style() == IndentStyle::Visual\n     {\n@@ -275,7 +276,8 @@ pub fn rewrite_chain(expr: &ast::Expr, context: &RewriteContext, shape: Shape) -\n     };\n \n     let result = if is_small_parent && rewrites.len() > 1 {\n-        let second_connector = if fits_single_line || rewrites[1] == \"?\"\n+        let second_connector = if fits_single_line\n+            || rewrites[1] == \"?\"\n             || last_line_extendable(&rewrites[0])\n             || context.config.indent_style() == IndentStyle::Visual\n         {"}, {"sha": "c9372248f05dd4c6cb931c1d81add9d5f874e1be", "filename": "src/closures.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/1f738ea208cba72bfb433993fd88ad92ce6dada1/src%2Fclosures.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f738ea208cba72bfb433993fd88ad92ce6dada1/src%2Fclosures.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fclosures.rs?ref=1f738ea208cba72bfb433993fd88ad92ce6dada1", "patch": "@@ -109,8 +109,10 @@ fn get_inner_expr<'a>(\n \n // Figure out if a block is necessary.\n fn needs_block(block: &ast::Block, prefix: &str, context: &RewriteContext) -> bool {\n-    is_unsafe_block(block) || block.stmts.len() > 1\n-        || block_contains_comment(block, context.codemap) || prefix.contains('\\n')\n+    is_unsafe_block(block)\n+        || block.stmts.len() > 1\n+        || block_contains_comment(block, context.codemap)\n+        || prefix.contains('\\n')\n }\n \n // Rewrite closure with a single expression wrapping its body with block."}, {"sha": "49f8d1698e1ccd66597aef44131246993e2894bc", "filename": "src/comment.rs", "status": "modified", "additions": 11, "deletions": 4, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/1f738ea208cba72bfb433993fd88ad92ce6dada1/src%2Fcomment.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f738ea208cba72bfb433993fd88ad92ce6dada1/src%2Fcomment.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomment.rs?ref=1f738ea208cba72bfb433993fd88ad92ce6dada1", "patch": "@@ -579,7 +579,9 @@ fn light_rewrite_comment(\n /// Does not trim all whitespace. If a single space is trimmed from the left of the string,\n /// this function returns true.\n fn left_trim_comment_line<'a>(line: &'a str, style: &CommentStyle) -> (&'a str, bool) {\n-    if line.starts_with(\"//! \") || line.starts_with(\"/// \") || line.starts_with(\"/*! \")\n+    if line.starts_with(\"//! \")\n+        || line.starts_with(\"/// \")\n+        || line.starts_with(\"/*! \")\n         || line.starts_with(\"/** \")\n     {\n         (&line[4..], true)\n@@ -589,13 +591,18 @@ fn left_trim_comment_line<'a>(line: &'a str, style: &CommentStyle) -> (&'a str,\n         } else {\n             (&line[opener.trim_right().len()..], false)\n         }\n-    } else if line.starts_with(\"/* \") || line.starts_with(\"// \") || line.starts_with(\"//!\")\n-        || line.starts_with(\"///\") || line.starts_with(\"** \")\n+    } else if line.starts_with(\"/* \")\n+        || line.starts_with(\"// \")\n+        || line.starts_with(\"//!\")\n+        || line.starts_with(\"///\")\n+        || line.starts_with(\"** \")\n         || line.starts_with(\"/*!\")\n         || (line.starts_with(\"/**\") && !line.starts_with(\"/**/\"))\n     {\n         (&line[3..], line.chars().nth(2).unwrap() == ' ')\n-    } else if line.starts_with(\"/*\") || line.starts_with(\"* \") || line.starts_with(\"//\")\n+    } else if line.starts_with(\"/*\")\n+        || line.starts_with(\"* \")\n+        || line.starts_with(\"//\")\n         || line.starts_with(\"**\")\n     {\n         (&line[2..], line.chars().nth(1).unwrap() == ' ')"}, {"sha": "9f339b61be74890312f8f5a9f8cbd7e8de4435da", "filename": "src/config/summary.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/1f738ea208cba72bfb433993fd88ad92ce6dada1/src%2Fconfig%2Fsummary.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f738ea208cba72bfb433993fd88ad92ce6dada1/src%2Fconfig%2Fsummary.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fconfig%2Fsummary.rs?ref=1f738ea208cba72bfb433993fd88ad92ce6dada1", "patch": "@@ -90,7 +90,9 @@ impl Summary {\n     }\n \n     pub fn has_no_errors(&self) -> bool {\n-        !(self.has_operational_errors || self.has_parsing_errors || self.has_formatting_errors\n+        !(self.has_operational_errors\n+            || self.has_parsing_errors\n+            || self.has_formatting_errors\n             || self.has_diff)\n     }\n "}, {"sha": "4ca1bbb22e317497cdbb7175f62efdf43617a157", "filename": "src/expr.rs", "status": "modified", "additions": 19, "deletions": 9, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/1f738ea208cba72bfb433993fd88ad92ce6dada1/src%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f738ea208cba72bfb433993fd88ad92ce6dada1/src%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fexpr.rs?ref=1f738ea208cba72bfb433993fd88ad92ce6dada1", "patch": "@@ -474,8 +474,10 @@ where\n                 .map(|first_line| first_line.ends_with('{'))\n                 .unwrap_or(false);\n         if !rhs_result.contains('\\n') || allow_same_line {\n-            let one_line_width = last_line_width(&lhs_result) + pp.infix.len()\n-                + first_line_width(rhs_result) + pp.suffix.len();\n+            let one_line_width = last_line_width(&lhs_result)\n+                + pp.infix.len()\n+                + first_line_width(rhs_result)\n+                + pp.suffix.len();\n             if one_line_width <= shape.width {\n                 return Some(format!(\n                     \"{}{}{}{}\",\n@@ -558,7 +560,9 @@ fn rewrite_empty_block(\n     let user_str = user_str.trim();\n     if user_str.starts_with('{') && user_str.ends_with('}') {\n         let comment_str = user_str[1..user_str.len() - 1].trim();\n-        if block.stmts.is_empty() && !comment_str.contains('\\n') && !comment_str.starts_with(\"//\")\n+        if block.stmts.is_empty()\n+            && !comment_str.contains('\\n')\n+            && !comment_str.starts_with(\"//\")\n             && comment_str.len() + 4 <= shape.width\n         {\n             return Some(format!(\"{}{{ {} }}\", prefix, comment_str));\n@@ -1241,8 +1245,10 @@ pub fn is_simple_block(\n     attrs: Option<&[ast::Attribute]>,\n     codemap: &CodeMap,\n ) -> bool {\n-    (block.stmts.len() == 1 && stmt_is_expr(&block.stmts[0])\n-        && !block_contains_comment(block, codemap) && attrs.map_or(true, |a| a.is_empty()))\n+    (block.stmts.len() == 1\n+        && stmt_is_expr(&block.stmts[0])\n+        && !block_contains_comment(block, codemap)\n+        && attrs.map_or(true, |a| a.is_empty()))\n }\n \n /// Checks whether a block contains at most one statement or expression, and no\n@@ -1252,7 +1258,8 @@ pub fn is_simple_block_stmt(\n     attrs: Option<&[ast::Attribute]>,\n     codemap: &CodeMap,\n ) -> bool {\n-    block.stmts.len() <= 1 && !block_contains_comment(block, codemap)\n+    block.stmts.len() <= 1\n+        && !block_contains_comment(block, codemap)\n         && attrs.map_or(true, |a| a.is_empty())\n }\n \n@@ -1263,7 +1270,8 @@ pub fn is_empty_block(\n     attrs: Option<&[ast::Attribute]>,\n     codemap: &CodeMap,\n ) -> bool {\n-    block.stmts.is_empty() && !block_contains_comment(block, codemap)\n+    block.stmts.is_empty()\n+        && !block_contains_comment(block, codemap)\n         && attrs.map_or(true, |a| inner_attributes(a).is_empty())\n }\n \n@@ -1778,7 +1786,8 @@ pub fn wrap_struct_field(\n     one_line_width: usize,\n ) -> String {\n     if context.config.indent_style() == IndentStyle::Block\n-        && (fields_str.contains('\\n') || !context.config.struct_lit_single_line()\n+        && (fields_str.contains('\\n')\n+            || !context.config.struct_lit_single_line()\n             || fields_str.len() > one_line_width)\n     {\n         format!(\n@@ -2104,7 +2113,8 @@ fn choose_rhs<R: Rewrite>(\n }\n \n pub fn prefer_next_line(orig_rhs: &str, next_line_rhs: &str, rhs_tactics: RhsTactics) -> bool {\n-    rhs_tactics == RhsTactics::ForceNextLine || !next_line_rhs.contains('\\n')\n+    rhs_tactics == RhsTactics::ForceNextLine\n+        || !next_line_rhs.contains('\\n')\n         || count_newlines(orig_rhs) > count_newlines(next_line_rhs) + 1\n }\n "}, {"sha": "3d7ad0ab1b5f4ffd2d546192f60de47b15987ee5", "filename": "src/imports.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/1f738ea208cba72bfb433993fd88ad92ce6dada1/src%2Fimports.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f738ea208cba72bfb433993fd88ad92ce6dada1/src%2Fimports.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fimports.rs?ref=1f738ea208cba72bfb433993fd88ad92ce6dada1", "patch": "@@ -489,7 +489,9 @@ impl UseTree {\n     }\n \n     fn share_prefix(&self, other: &UseTree) -> bool {\n-        if self.path.is_empty() || other.path.is_empty() || self.attrs.is_some()\n+        if self.path.is_empty()\n+            || other.path.is_empty()\n+            || self.attrs.is_some()\n             || !self.same_visibility(other)\n         {\n             false"}, {"sha": "729545139088506e6b3ee808654b4bc2326c068e", "filename": "src/items.rs", "status": "modified", "additions": 22, "deletions": 10, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/1f738ea208cba72bfb433993fd88ad92ce6dada1/src%2Fitems.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f738ea208cba72bfb433993fd88ad92ce6dada1/src%2Fitems.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fitems.rs?ref=1f738ea208cba72bfb433993fd88ad92ce6dada1", "patch": "@@ -313,7 +313,8 @@ impl<'a> FmtVisitor<'a> {\n             rewrite_fn_base(&context, indent, ident, fn_sig, span, newline_brace, true)?;\n \n         // 2 = ` {`\n-        if self.config.brace_style() == BraceStyle::AlwaysNextLine || force_newline_brace\n+        if self.config.brace_style() == BraceStyle::AlwaysNextLine\n+            || force_newline_brace\n             || last_line_width(&result) + 2 > self.shape().width\n         {\n             newline_brace = true;\n@@ -376,7 +377,8 @@ impl<'a> FmtVisitor<'a> {\n \n         let codemap = self.get_context().codemap;\n \n-        if self.config.empty_item_single_line() && is_empty_block(block, None, codemap)\n+        if self.config.empty_item_single_line()\n+            && is_empty_block(block, None, codemap)\n             && self.block_indent.width() + fn_str.len() + 2 <= self.config.max_width()\n         {\n             return Some(format!(\"{}{{}}\", fn_str));\n@@ -755,7 +757,9 @@ fn is_impl_single_line(\n     let open_pos = snippet.find_uncommented(\"{\")? + 1;\n \n     Some(\n-        context.config.empty_item_single_line() && items.is_empty() && !result.contains('\\n')\n+        context.config.empty_item_single_line()\n+            && items.is_empty()\n+            && !result.contains('\\n')\n             && result.len() + where_clause_str.len() <= context.config.max_width()\n             && !contains_comment(&snippet[open_pos..]),\n     )\n@@ -1194,7 +1198,8 @@ pub fn format_struct_struct(\n     // 1 = `}`\n     let overhead = if fields.is_empty() { 1 } else { 0 };\n     let total_width = result.len() + generics_str.len() + overhead;\n-    if !generics_str.is_empty() && !generics_str.contains('\\n')\n+    if !generics_str.is_empty()\n+        && !generics_str.contains('\\n')\n         && total_width > context.config.max_width()\n     {\n         result.push('\\n');\n@@ -1223,7 +1228,9 @@ pub fn format_struct_struct(\n         one_line_budget,\n     )?;\n \n-    if !items_str.contains('\\n') && !result.contains('\\n') && items_str.len() <= one_line_budget\n+    if !items_str.contains('\\n')\n+        && !result.contains('\\n')\n+        && items_str.len() <= one_line_budget\n         && !last_line_contains_single_line_comment(&items_str)\n     {\n         Some(format!(\"{} {} }}\", result, items_str))\n@@ -1904,7 +1911,8 @@ fn rewrite_fn_base(\n     } else {\n         result.push('(');\n     }\n-    if context.config.spaces_within_parens_and_brackets() && !fd.inputs.is_empty()\n+    if context.config.spaces_within_parens_and_brackets()\n+        && !fd.inputs.is_empty()\n         && result.ends_with('(')\n     {\n         result.push(' ')\n@@ -2478,8 +2486,10 @@ fn rewrite_where_clause_rfc_style(\n     let newline_after_where = comment_separator(&comment_after, clause_shape);\n \n     // 6 = `where `\n-    let clause_sep = if where_clause_option.compress_where && comment_before.is_empty()\n-        && comment_after.is_empty() && !preds_str.contains('\\n')\n+    let clause_sep = if where_clause_option.compress_where\n+        && comment_before.is_empty()\n+        && comment_after.is_empty()\n+        && !preds_str.contains('\\n')\n         && 6 + preds_str.len() <= shape.width || where_single_line\n     {\n         Cow::from(\" \")\n@@ -2590,7 +2600,8 @@ fn rewrite_where_clause(\n     } else {\n         terminator.len()\n     };\n-    if density == Density::Tall || preds_str.contains('\\n')\n+    if density == Density::Tall\n+        || preds_str.contains('\\n')\n         || shape.indent.width() + \" where \".len() + preds_str.len() + end_length > shape.width\n     {\n         Some(format!(\n@@ -2682,7 +2693,8 @@ fn format_generics(\n             || (generics.where_clause.predicates.is_empty()\n                 && trimmed_last_line_width(&result) == 1)\n     } else {\n-        brace_pos == BracePos::ForceSameLine || trimmed_last_line_width(&result) == 1\n+        brace_pos == BracePos::ForceSameLine\n+            || trimmed_last_line_width(&result) == 1\n             || brace_style != BraceStyle::AlwaysNextLine\n     };\n     if brace_pos == BracePos::None {"}, {"sha": "71cf74f60220b4039a9f9bd1eceaf8a9b4ae0c53", "filename": "src/lib.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/1f738ea208cba72bfb433993fd88ad92ce6dada1/src%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f738ea208cba72bfb433993fd88ad92ce6dada1/src%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib.rs?ref=1f738ea208cba72bfb433993fd88ad92ce6dada1", "patch": "@@ -490,7 +490,8 @@ fn format_lines(\n \n                 // Check for any line width errors we couldn't correct.\n                 let error_kind = ErrorKind::LineOverflow(line_len, config.max_width());\n-                if line_len > config.max_width() && !is_skipped_line(cur_line, skipped_range)\n+                if line_len > config.max_width()\n+                    && !is_skipped_line(cur_line, skipped_range)\n                     && should_report_error(config, kind, is_string, error_kind)\n                 {\n                     errors.push(FormattingError {\n@@ -905,7 +906,8 @@ pub fn format_and_emit_report(input: Input, config: &Config) -> FmtResult<Summar\n             if report.has_warnings() {\n                 match term::stderr() {\n                     Some(ref t)\n-                        if use_colored_tty(config.color()) && t.supports_color()\n+                        if use_colored_tty(config.color())\n+                            && t.supports_color()\n                             && t.supports_attr(term::Attr::Bold) =>\n                     {\n                         match report.print_warnings_fancy(term::stderr().unwrap()) {"}, {"sha": "433beac44ee09a69a45cc5faf0ad9e8de02c2305", "filename": "src/lists.rs", "status": "modified", "additions": 11, "deletions": 5, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/1f738ea208cba72bfb433993fd88ad92ce6dada1/src%2Flists.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f738ea208cba72bfb433993fd88ad92ce6dada1/src%2Flists.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flists.rs?ref=1f738ea208cba72bfb433993fd88ad92ce6dada1", "patch": "@@ -192,7 +192,8 @@ where\n     let total_sep_len = sep.len() * sep_count.checked_sub(1).unwrap_or(0);\n     let real_total = total_width + total_sep_len;\n \n-    if real_total <= limit && !pre_line_comments\n+    if real_total <= limit\n+        && !pre_line_comments\n         && !items.into_iter().any(|item| item.as_ref().is_multiline())\n     {\n         DefinitiveListTactic::Horizontal\n@@ -404,8 +405,10 @@ where\n             if !starts_with_newline(comment) {\n                 let mut comment_alignment =\n                     post_comment_alignment(item_max_width, inner_item.len());\n-                if first_line_width(&formatted_comment) + last_line_width(&result)\n-                    + comment_alignment + 1 > formatting.config.max_width()\n+                if first_line_width(&formatted_comment)\n+                    + last_line_width(&result)\n+                    + comment_alignment\n+                    + 1 > formatting.config.max_width()\n                 {\n                     item_max_width = None;\n                     formatted_comment = rewrite_post_comment(&mut item_max_width)?;\n@@ -431,7 +434,9 @@ where\n             item_max_width = None;\n         }\n \n-        if formatting.preserve_newline && !last && tactic == DefinitiveListTactic::Vertical\n+        if formatting.preserve_newline\n+            && !last\n+            && tactic == DefinitiveListTactic::Vertical\n             && item.new_lines\n         {\n             item_max_width = None;\n@@ -458,7 +463,8 @@ where\n         let item = item.as_ref();\n         let inner_item_width = item.inner_as_ref().len();\n         if !first\n-            && (item.is_different_group() || item.post_comment.is_none()\n+            && (item.is_different_group()\n+                || item.post_comment.is_none()\n                 || inner_item_width + overhead > max_budget)\n         {\n             return max_width;"}, {"sha": "3da0a4a5c3a23e4b38531fa0a8566a3a5018cfce", "filename": "src/macros.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/1f738ea208cba72bfb433993fd88ad92ce6dada1/src%2Fmacros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f738ea208cba72bfb433993fd88ad92ce6dada1/src%2Fmacros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fmacros.rs?ref=1f738ea208cba72bfb433993fd88ad92ce6dada1", "patch": "@@ -269,7 +269,8 @@ pub fn rewrite_macro_inner(\n                 let nested_shape = mac_shape.block_indent(context.config.tab_spaces());\n                 let lhs = arg_vec[0].rewrite(context, nested_shape)?;\n                 let rhs = arg_vec[1].rewrite(context, nested_shape)?;\n-                if !lhs.contains('\\n') && !rhs.contains('\\n')\n+                if !lhs.contains('\\n')\n+                    && !rhs.contains('\\n')\n                     && lhs.len() + rhs.len() + total_overhead <= shape.width\n                 {\n                     Some(format!(\"{}{}{}; {}{}\", macro_name, lbr, lhs, rhs, rbr))"}, {"sha": "0bbdbe62017c234752906d6daecfb27a97e85f3d", "filename": "src/matches.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/1f738ea208cba72bfb433993fd88ad92ce6dada1/src%2Fmatches.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f738ea208cba72bfb433993fd88ad92ce6dada1/src%2Fmatches.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fmatches.rs?ref=1f738ea208cba72bfb433993fd88ad92ce6dada1", "patch": "@@ -498,7 +498,8 @@ fn rewrite_guard(\n fn nop_block_collapse(block_str: Option<String>, budget: usize) -> Option<String> {\n     debug!(\"nop_block_collapse {:?} {}\", block_str, budget);\n     block_str.map(|block_str| {\n-        if block_str.starts_with('{') && budget >= 2\n+        if block_str.starts_with('{')\n+            && budget >= 2\n             && (block_str[1..].find(|c: char| !c.is_whitespace()).unwrap() == block_str.len() - 2)\n         {\n             \"{}\".to_owned()"}, {"sha": "977dbbbb5f4ed9e27b72c010bb6902c0b2ff3813", "filename": "src/overflow.rs", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/1f738ea208cba72bfb433993fd88ad92ce6dada1/src%2Foverflow.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f738ea208cba72bfb433993fd88ad92ce6dada1/src%2Foverflow.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Foverflow.rs?ref=1f738ea208cba72bfb433993fd88ad92ce6dada1", "patch": "@@ -235,7 +235,8 @@ impl<'a, T: 'a + Rewrite + ToExpr + Spanned> Context<'a, T> {\n \n     fn try_overflow_last_item(&self, list_items: &mut Vec<ListItem>) -> DefinitiveListTactic {\n         // 1 = \"(\"\n-        let combine_arg_with_callee = self.items.len() == 1 && self.items[0].to_expr().is_some()\n+        let combine_arg_with_callee = self.items.len() == 1\n+            && self.items[0].to_expr().is_some()\n             && self.ident.len() + 1 <= self.context.config.tab_spaces();\n         let overflow_last = combine_arg_with_callee || can_be_overflowed(self.context, self.items);\n \n@@ -311,7 +312,9 @@ impl<'a, T: 'a + Rewrite + ToExpr + Spanned> Context<'a, T> {\n                 // Use horizontal layout for a function with a single argument as long as\n                 // everything fits in a single line.\n                 // `self.one_line_width == 0` means vertical layout is forced.\n-                if self.items.len() == 1 && self.one_line_width != 0 && !list_items[0].has_comment()\n+                if self.items.len() == 1\n+                    && self.one_line_width != 0\n+                    && !list_items[0].has_comment()\n                     && !list_items[0].inner_as_ref().contains('\\n')\n                     && ::lists::total_item_width(&list_items[0]) <= self.one_line_width\n                 {\n@@ -462,7 +465,8 @@ impl<'a, T: 'a + Rewrite + ToExpr + Spanned> Context<'a, T> {\n         let (extendable, items_str) = self.rewrite_items()?;\n \n         // If we are using visual indent style and failed to format, retry with block indent.\n-        if !self.context.use_block_indent() && need_block_indent(&items_str, self.nested_shape)\n+        if !self.context.use_block_indent()\n+            && need_block_indent(&items_str, self.nested_shape)\n             && !extendable\n         {\n             self.context.use_block.replace(true);"}, {"sha": "6ffb9cd5c7ebb0fbcbb2d92604bca78cdf073232", "filename": "src/types.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/1f738ea208cba72bfb433993fd88ad92ce6dada1/src%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f738ea208cba72bfb433993fd88ad92ce6dada1/src%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftypes.rs?ref=1f738ea208cba72bfb433993fd88ad92ce6dada1", "patch": "@@ -230,7 +230,8 @@ fn rewrite_segment(\n     if let Some(ref params) = segment.parameters {\n         match **params {\n             ast::PathParameters::AngleBracketed(ref data)\n-                if !data.lifetimes.is_empty() || !data.types.is_empty()\n+                if !data.lifetimes.is_empty()\n+                    || !data.types.is_empty()\n                     || !data.bindings.is_empty() =>\n             {\n                 let param_list = data.lifetimes"}]}