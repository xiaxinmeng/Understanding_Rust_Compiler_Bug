{"sha": "807a56bebfecf6f655c48c3490c296180045c44b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgwN2E1NmJlYmZlY2Y2ZjY1NWM0OGMzNDkwYzI5NjE4MDA0NWM0NGI=", "commit": {"author": {"name": "Lauren\u021biu Nicola", "email": "lnicola@dend.ro", "date": "2020-03-02T21:30:38Z"}, "committer": {"name": "Lauren\u021biu Nicola", "email": "lnicola@dend.ro", "date": "2020-03-02T21:30:38Z"}, "message": "Update chalk for RawId removal", "tree": {"sha": "3470601cb157d60844039a68ce98dbd423c0199d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3470601cb157d60844039a68ce98dbd423c0199d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/807a56bebfecf6f655c48c3490c296180045c44b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/807a56bebfecf6f655c48c3490c296180045c44b", "html_url": "https://github.com/rust-lang/rust/commit/807a56bebfecf6f655c48c3490c296180045c44b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/807a56bebfecf6f655c48c3490c296180045c44b/comments", "author": {"login": "lnicola", "id": 308347, "node_id": "MDQ6VXNlcjMwODM0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/308347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lnicola", "html_url": "https://github.com/lnicola", "followers_url": "https://api.github.com/users/lnicola/followers", "following_url": "https://api.github.com/users/lnicola/following{/other_user}", "gists_url": "https://api.github.com/users/lnicola/gists{/gist_id}", "starred_url": "https://api.github.com/users/lnicola/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lnicola/subscriptions", "organizations_url": "https://api.github.com/users/lnicola/orgs", "repos_url": "https://api.github.com/users/lnicola/repos", "events_url": "https://api.github.com/users/lnicola/events{/privacy}", "received_events_url": "https://api.github.com/users/lnicola/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lnicola", "id": 308347, "node_id": "MDQ6VXNlcjMwODM0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/308347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lnicola", "html_url": "https://github.com/lnicola", "followers_url": "https://api.github.com/users/lnicola/followers", "following_url": "https://api.github.com/users/lnicola/following{/other_user}", "gists_url": "https://api.github.com/users/lnicola/gists{/gist_id}", "starred_url": "https://api.github.com/users/lnicola/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lnicola/subscriptions", "organizations_url": "https://api.github.com/users/lnicola/orgs", "repos_url": "https://api.github.com/users/lnicola/repos", "events_url": "https://api.github.com/users/lnicola/events{/privacy}", "received_events_url": "https://api.github.com/users/lnicola/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1eeb7a79bb0d47566c82c70e424084fb0dfec1bc", "url": "https://api.github.com/repos/rust-lang/rust/commits/1eeb7a79bb0d47566c82c70e424084fb0dfec1bc", "html_url": "https://github.com/rust-lang/rust/commit/1eeb7a79bb0d47566c82c70e424084fb0dfec1bc"}], "stats": {"total": 39, "additions": 16, "deletions": 23}, "files": [{"sha": "5a28f7d7d824828c3dbb310901645bd896db888c", "filename": "Cargo.lock", "status": "modified", "additions": 6, "deletions": 7, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/807a56bebfecf6f655c48c3490c296180045c44b/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/807a56bebfecf6f655c48c3490c296180045c44b/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=807a56bebfecf6f655c48c3490c296180045c44b", "patch": "@@ -129,7 +129,7 @@ checksum = \"4785bdd1c96b2a846b2bd7cc02e86b6b3dbf14e7e53446c4f54c92a361040822\"\n [[package]]\n name = \"chalk-derive\"\n version = \"0.1.0\"\n-source = \"git+https://github.com/rust-lang/chalk.git?rev=2939913fb7bb94ac2a6721087dc086be11410702#2939913fb7bb94ac2a6721087dc086be11410702\"\n+source = \"git+https://github.com/rust-lang/chalk.git?rev=ea1725e6bcf1881ad6c8304941e2282f33d32d1d#ea1725e6bcf1881ad6c8304941e2282f33d32d1d\"\n dependencies = [\n  \"proc-macro2\",\n  \"quote\",\n@@ -139,7 +139,7 @@ dependencies = [\n [[package]]\n name = \"chalk-engine\"\n version = \"0.9.0\"\n-source = \"git+https://github.com/rust-lang/chalk.git?rev=2939913fb7bb94ac2a6721087dc086be11410702#2939913fb7bb94ac2a6721087dc086be11410702\"\n+source = \"git+https://github.com/rust-lang/chalk.git?rev=ea1725e6bcf1881ad6c8304941e2282f33d32d1d#ea1725e6bcf1881ad6c8304941e2282f33d32d1d\"\n dependencies = [\n  \"chalk-macros\",\n  \"rustc-hash\",\n@@ -148,26 +148,25 @@ dependencies = [\n [[package]]\n name = \"chalk-ir\"\n version = \"0.1.0\"\n-source = \"git+https://github.com/rust-lang/chalk.git?rev=2939913fb7bb94ac2a6721087dc086be11410702#2939913fb7bb94ac2a6721087dc086be11410702\"\n+source = \"git+https://github.com/rust-lang/chalk.git?rev=ea1725e6bcf1881ad6c8304941e2282f33d32d1d#ea1725e6bcf1881ad6c8304941e2282f33d32d1d\"\n dependencies = [\n  \"chalk-derive\",\n  \"chalk-engine\",\n  \"chalk-macros\",\n- \"lalrpop-intern\",\n ]\n \n [[package]]\n name = \"chalk-macros\"\n version = \"0.1.1\"\n-source = \"git+https://github.com/rust-lang/chalk.git?rev=2939913fb7bb94ac2a6721087dc086be11410702#2939913fb7bb94ac2a6721087dc086be11410702\"\n+source = \"git+https://github.com/rust-lang/chalk.git?rev=ea1725e6bcf1881ad6c8304941e2282f33d32d1d#ea1725e6bcf1881ad6c8304941e2282f33d32d1d\"\n dependencies = [\n  \"lazy_static\",\n ]\n \n [[package]]\n name = \"chalk-rust-ir\"\n version = \"0.1.0\"\n-source = \"git+https://github.com/rust-lang/chalk.git?rev=2939913fb7bb94ac2a6721087dc086be11410702#2939913fb7bb94ac2a6721087dc086be11410702\"\n+source = \"git+https://github.com/rust-lang/chalk.git?rev=ea1725e6bcf1881ad6c8304941e2282f33d32d1d#ea1725e6bcf1881ad6c8304941e2282f33d32d1d\"\n dependencies = [\n  \"chalk-derive\",\n  \"chalk-engine\",\n@@ -178,7 +177,7 @@ dependencies = [\n [[package]]\n name = \"chalk-solve\"\n version = \"0.1.0\"\n-source = \"git+https://github.com/rust-lang/chalk.git?rev=2939913fb7bb94ac2a6721087dc086be11410702#2939913fb7bb94ac2a6721087dc086be11410702\"\n+source = \"git+https://github.com/rust-lang/chalk.git?rev=ea1725e6bcf1881ad6c8304941e2282f33d32d1d#ea1725e6bcf1881ad6c8304941e2282f33d32d1d\"\n dependencies = [\n  \"chalk-derive\",\n  \"chalk-engine\","}, {"sha": "498706168006604e87fb4ba941651579525d7771", "filename": "crates/ra_hir_ty/Cargo.toml", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/807a56bebfecf6f655c48c3490c296180045c44b/crates%2Fra_hir_ty%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/807a56bebfecf6f655c48c3490c296180045c44b/crates%2Fra_hir_ty%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir_ty%2FCargo.toml?ref=807a56bebfecf6f655c48c3490c296180045c44b", "patch": "@@ -21,9 +21,9 @@ ra_prof = { path = \"../ra_prof\" }\n ra_syntax = { path = \"../ra_syntax\" }\n test_utils = { path = \"../test_utils\" }\n \n-chalk-solve =   { git = \"https://github.com/rust-lang/chalk.git\", rev = \"2939913fb7bb94ac2a6721087dc086be11410702\" }\n-chalk-rust-ir = { git = \"https://github.com/rust-lang/chalk.git\", rev = \"2939913fb7bb94ac2a6721087dc086be11410702\" }\n-chalk-ir =      { git = \"https://github.com/rust-lang/chalk.git\", rev = \"2939913fb7bb94ac2a6721087dc086be11410702\" }\n+chalk-solve =   { git = \"https://github.com/rust-lang/chalk.git\", rev = \"ea1725e6bcf1881ad6c8304941e2282f33d32d1d\" }\n+chalk-rust-ir = { git = \"https://github.com/rust-lang/chalk.git\", rev = \"ea1725e6bcf1881ad6c8304941e2282f33d32d1d\" }\n+chalk-ir =      { git = \"https://github.com/rust-lang/chalk.git\", rev = \"ea1725e6bcf1881ad6c8304941e2282f33d32d1d\" }\n \n lalrpop-intern = \"0.15.1\"\n "}, {"sha": "7a0f99dec0801ec5f7e7cb9facd92c60db65e1c1", "filename": "crates/ra_hir_ty/src/traits/chalk.rs", "status": "modified", "additions": 7, "deletions": 13, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/807a56bebfecf6f655c48c3490c296180045c44b/crates%2Fra_hir_ty%2Fsrc%2Ftraits%2Fchalk.rs", "raw_url": "https://github.com/rust-lang/rust/raw/807a56bebfecf6f655c48c3490c296180045c44b/crates%2Fra_hir_ty%2Fsrc%2Ftraits%2Fchalk.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir_ty%2Fsrc%2Ftraits%2Fchalk.rs?ref=807a56bebfecf6f655c48c3490c296180045c44b", "patch": "@@ -27,6 +27,7 @@ impl chalk_ir::interner::Interner for Interner {\n     type InternedGoal = Arc<GoalData<Self>>;\n     type InternedGoals = Vec<Goal<Self>>;\n     type InternedSubstitution = Vec<Parameter<Self>>;\n+    type Identifier = lalrpop_intern::InternedString;\n     type DefId = InternId;\n \n     // FIXME: implement these\n@@ -121,7 +122,7 @@ pub type StructId = chalk_ir::StructId<Interner>;\n pub type StructDatum = chalk_rust_ir::StructDatum<Interner>;\n pub type ImplId = chalk_ir::ImplId<Interner>;\n pub type ImplDatum = chalk_rust_ir::ImplDatum<Interner>;\n-pub type AssociatedTyValueId = chalk_rust_ir::AssociatedTyValueId;\n+pub type AssociatedTyValueId = chalk_rust_ir::AssociatedTyValueId<Interner>;\n pub type AssociatedTyValue = chalk_rust_ir::AssociatedTyValue<Interner>;\n \n pub(super) trait ToChalk {\n@@ -822,13 +823,6 @@ fn type_alias_associated_ty_value(\n     Arc::new(value)\n }\n \n-fn id_from_chalk<T: InternKey>(chalk_id: chalk_ir::RawId) -> T {\n-    T::from_intern_id(InternId::from(chalk_id.index))\n-}\n-fn id_to_chalk<T: InternKey>(salsa_id: T) -> chalk_ir::RawId {\n-    chalk_ir::RawId { index: salsa_id.as_intern_id().as_u32() }\n-}\n-\n impl From<StructId> for crate::TypeCtorId {\n     fn from(struct_id: StructId) -> Self {\n         InternKey::from_intern_id(struct_id.0)\n@@ -853,14 +847,14 @@ impl From<crate::traits::GlobalImplId> for ImplId {\n     }\n }\n \n-impl From<chalk_rust_ir::AssociatedTyValueId> for crate::traits::AssocTyValueId {\n-    fn from(id: chalk_rust_ir::AssociatedTyValueId) -> Self {\n-        id_from_chalk(id.0)\n+impl From<chalk_rust_ir::AssociatedTyValueId<Interner>> for crate::traits::AssocTyValueId {\n+    fn from(id: chalk_rust_ir::AssociatedTyValueId<Interner>) -> Self {\n+        Self::from_intern_id(id.0)\n     }\n }\n \n-impl From<crate::traits::AssocTyValueId> for chalk_rust_ir::AssociatedTyValueId {\n+impl From<crate::traits::AssocTyValueId> for chalk_rust_ir::AssociatedTyValueId<Interner> {\n     fn from(assoc_ty_value_id: crate::traits::AssocTyValueId) -> Self {\n-        chalk_rust_ir::AssociatedTyValueId(id_to_chalk(assoc_ty_value_id))\n+        chalk_rust_ir::AssociatedTyValueId(assoc_ty_value_id.as_intern_id())\n     }\n }"}]}