{"sha": "0bdb83942d8757680e5b616217f075639145e778", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBiZGI4Mzk0MmQ4NzU3NjgwZTViNjE2MjE3ZjA3NTYzOTE0NWU3Nzg=", "commit": {"author": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2020-08-12T03:07:10Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-08-12T03:07:10Z"}, "message": "Rollup merge of #75234 - Amanieu:asm_unstable_book, r=nikomatsakis\n\nUpdate asm! documentation in unstable book\n\n- Update the list of supported architectures.\n- Clarify issues with LLVM's use of reserved registers.", "tree": {"sha": "15c14ae14dad26dde50bcf6e85b606fc9e0e8a29", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/15c14ae14dad26dde50bcf6e85b606fc9e0e8a29"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0bdb83942d8757680e5b616217f075639145e778", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfM1zeCRBK7hj4Ov3rIwAAdHIIAEs1fQwrf0RCw7VBGLlXKOyf\n9ku6qIrPCC7b1a0Ydegjax4J7nTHJ5f0093QB6b9Z/26YsgB6f6uLiwrB4LDIoID\nG3lgUBxwLG/Pr76wvx5SJYL9oiWNZ7ugYR5sEar+q1mNvThRwDZO4Z0vsNLbO7vq\nzoMpHYC3dwzo1UWusQHMRCL5OnzdagGuVivoMfUWRmwERT4w2enhTtIlVZWbi5UU\n3RkrZBazsxqCGRoUbGpYG1DxYl5khm+ctXVTFWZZ+QfsVJzR7UweHfe2eTHRWZhP\nuixdfUwaxZE/ldkBvI4fSxZYv90TD7yjCTy5xHyuKcXsi+Jxv3zSz6jx2cVlgOY=\n=YExR\n-----END PGP SIGNATURE-----\n", "payload": "tree 15c14ae14dad26dde50bcf6e85b606fc9e0e8a29\nparent 43babed7e2ecebc401a6dd792e52700afbe0ec5c\nparent b5cef24f5f82531403ecb3cf65f5ee045c349b1f\nauthor Yuki Okushi <huyuumi.dev@gmail.com> 1597201630 +0900\ncommitter GitHub <noreply@github.com> 1597201630 +0900\n\nRollup merge of #75234 - Amanieu:asm_unstable_book, r=nikomatsakis\n\nUpdate asm! documentation in unstable book\n\n- Update the list of supported architectures.\n- Clarify issues with LLVM's use of reserved registers.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0bdb83942d8757680e5b616217f075639145e778", "html_url": "https://github.com/rust-lang/rust/commit/0bdb83942d8757680e5b616217f075639145e778", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0bdb83942d8757680e5b616217f075639145e778/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "43babed7e2ecebc401a6dd792e52700afbe0ec5c", "url": "https://api.github.com/repos/rust-lang/rust/commits/43babed7e2ecebc401a6dd792e52700afbe0ec5c", "html_url": "https://github.com/rust-lang/rust/commit/43babed7e2ecebc401a6dd792e52700afbe0ec5c"}, {"sha": "b5cef24f5f82531403ecb3cf65f5ee045c349b1f", "url": "https://api.github.com/repos/rust-lang/rust/commits/b5cef24f5f82531403ecb3cf65f5ee045c349b1f", "html_url": "https://github.com/rust-lang/rust/commit/b5cef24f5f82531403ecb3cf65f5ee045c349b1f"}], "stats": {"total": 14, "additions": 13, "deletions": 1}, "files": [{"sha": "28a5fe31fc4b5f328e0be7dc72cf3a7e09a54d80", "filename": "src/doc/unstable-book/src/library-features/asm.md", "status": "modified", "additions": 13, "deletions": 1, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/0bdb83942d8757680e5b616217f075639145e778/src%2Fdoc%2Funstable-book%2Fsrc%2Flibrary-features%2Fasm.md", "raw_url": "https://github.com/rust-lang/rust/raw/0bdb83942d8757680e5b616217f075639145e778/src%2Fdoc%2Funstable-book%2Fsrc%2Flibrary-features%2Fasm.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Funstable-book%2Fsrc%2Flibrary-features%2Fasm.md?ref=0bdb83942d8757680e5b616217f075639145e778", "patch": "@@ -18,7 +18,15 @@ It can be used to embed handwritten assembly in the assembly output generated by\n Generally this should not be necessary, but might be where the required performance or timing\n cannot be otherwise achieved. Accessing low level hardware primitives, e.g. in kernel code, may also demand this functionality.\n \n-> **Note**: the examples here are given in x86/x86-64 assembly, but ARM, AArch64 and RISC-V are also supported.\n+> **Note**: the examples here are given in x86/x86-64 assembly, but other architectures are also supported.\n+\n+Inline assembly is currently supported on the following architectures:\n+- x86 and x86-64\n+- ARM\n+- AArch64\n+- RISC-V\n+- NVPTX\n+- Hexagon\n \n ## Basic usage\n \n@@ -606,6 +614,10 @@ Some registers cannot be used for input or output operands:\n | RISC-V | `gp`, `tp` | These registers are reserved and cannot be used as inputs or outputs. |\n | Hexagon | `lr` | This is the link register which cannot be used as an input or output. |\n \n+In some cases LLVM will allocate a \"reserved register\" for `reg` operands even though this register cannot be explicitly specified. Assembly code making use of reserved registers should be careful since `reg` operands may alias with those registers. Reserved registers are:\n+- The frame pointer on all architectures.\n+- `r6` on ARM.\n+\n ## Template modifiers\n \n The placeholders can be augmented by modifiers which are specified after the `:` in the curly braces. These modifiers do not affect register allocation, but change the way operands are formatted when inserted into the template string. Only one modifier is allowed per template placeholder."}]}