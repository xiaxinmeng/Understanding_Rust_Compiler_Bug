{"sha": "801ac0e24ff6269fe71d22d29b8482e2117b2f82", "node_id": "C_kwDOAAsO6NoAKDgwMWFjMGUyNGZmNjI2OWZlNzFkMjJkMjliODQ4MmUyMTE3YjJmODI", "commit": {"author": {"name": "Jacob Hoffman-Andrews", "email": "github@hoffman-andrews.com", "date": "2022-01-19T06:05:17Z"}, "committer": {"name": "Jacob Hoffman-Andrews", "email": "github@hoffman-andrews.com", "date": "2022-01-19T20:45:16Z"}, "message": "Fix scroll offset when jumping to internal id", "tree": {"sha": "c7cf64d1ae73ab13367d82608b497de4b429c8fd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c7cf64d1ae73ab13367d82608b497de4b429c8fd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/801ac0e24ff6269fe71d22d29b8482e2117b2f82", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/801ac0e24ff6269fe71d22d29b8482e2117b2f82", "html_url": "https://github.com/rust-lang/rust/commit/801ac0e24ff6269fe71d22d29b8482e2117b2f82", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/801ac0e24ff6269fe71d22d29b8482e2117b2f82/comments", "author": {"login": "jsha", "id": 220205, "node_id": "MDQ6VXNlcjIyMDIwNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/220205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsha", "html_url": "https://github.com/jsha", "followers_url": "https://api.github.com/users/jsha/followers", "following_url": "https://api.github.com/users/jsha/following{/other_user}", "gists_url": "https://api.github.com/users/jsha/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsha/subscriptions", "organizations_url": "https://api.github.com/users/jsha/orgs", "repos_url": "https://api.github.com/users/jsha/repos", "events_url": "https://api.github.com/users/jsha/events{/privacy}", "received_events_url": "https://api.github.com/users/jsha/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jsha", "id": 220205, "node_id": "MDQ6VXNlcjIyMDIwNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/220205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsha", "html_url": "https://github.com/jsha", "followers_url": "https://api.github.com/users/jsha/followers", "following_url": "https://api.github.com/users/jsha/following{/other_user}", "gists_url": "https://api.github.com/users/jsha/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsha/subscriptions", "organizations_url": "https://api.github.com/users/jsha/orgs", "repos_url": "https://api.github.com/users/jsha/repos", "events_url": "https://api.github.com/users/jsha/events{/privacy}", "received_events_url": "https://api.github.com/users/jsha/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e5e2b0be26ea177527b60d355bd8f56cd473bd00", "url": "https://api.github.com/repos/rust-lang/rust/commits/e5e2b0be26ea177527b60d355bd8f56cd473bd00", "html_url": "https://github.com/rust-lang/rust/commit/e5e2b0be26ea177527b60d355bd8f56cd473bd00"}], "stats": {"total": 15, "additions": 14, "deletions": 1}, "files": [{"sha": "947eb5a37f2a7ec1adc888dc03ad692d7116837b", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/801ac0e24ff6269fe71d22d29b8482e2117b2f82/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/801ac0e24ff6269fe71d22d29b8482e2117b2f82/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=801ac0e24ff6269fe71d22d29b8482e2117b2f82", "patch": "@@ -1738,12 +1738,19 @@ details.rustdoc-toggle[open] > summary.hideme::after {\n }\n \n @media (max-width: 700px) {\n+\t/* When linking to an item with an `id` (for instance, by clicking a link in the sidebar,\n+\t   or visiting a URL with a fragment like `#method.new`, we don't want the item to be obscured\n+\t   by the topbar. Anything with an `id` gets scroll-margin-top equal to .mobile-topbar's size.\n+\t*/\n+\t*[id] {\n+\t\tscroll-margin-top: 45px;\n+\t}\n+\n \t.rustdoc {\n \t\tpadding-top: 0px;\n \t\t/* Sidebar should overlay main content, rather than pushing main content to the right.\n \t\t   Turn off `display: flex` on the body element. */\n \t\tdisplay: block;\n-\t\tscroll-margin-top: 45px;\n \t}\n \n \tmain {"}, {"sha": "680822b6ecb8c075eb457b4f43ac3388e184cddd", "filename": "src/test/rustdoc-gui/sidebar-mobile.goml", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/801ac0e24ff6269fe71d22d29b8482e2117b2f82/src%2Ftest%2Frustdoc-gui%2Fsidebar-mobile.goml", "raw_url": "https://github.com/rust-lang/rust/raw/801ac0e24ff6269fe71d22d29b8482e2117b2f82/src%2Ftest%2Frustdoc-gui%2Fsidebar-mobile.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsidebar-mobile.goml?ref=801ac0e24ff6269fe71d22d29b8482e2117b2f82", "patch": "@@ -29,3 +29,9 @@ assert-css: (\".sidebar\", {\"display\": \"block\", \"left\": \"-1000px\"})\n \n // Check that the topbar is visible\n assert-property: (\".mobile-topbar\", {\"clientHeight\": \"45\"})\n+\n+// Check that clicking an element from the sidebar scrolls to the right place\n+// so the target is not obscured by the topbar.\n+click: \".sidebar-menu-toggle\"\n+click: \".sidebar-links a\"\n+assert-position: (\"#method\\.must_use\", {\"y\": 45})"}]}