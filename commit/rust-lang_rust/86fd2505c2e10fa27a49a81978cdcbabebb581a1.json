{"sha": "86fd2505c2e10fa27a49a81978cdcbabebb581a1", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg2ZmQyNTA1YzJlMTBmYTI3YTQ5YTgxOTc4Y2RjYmFiZWJiNTgxYTE=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2021-08-25T15:57:06Z"}, "committer": {"name": "Joshua Nelson", "email": "jyn514@gmail.com", "date": "2021-09-12T02:30:24Z"}, "message": "Fix `no_core` and `no_std` rustdoc tests on Windows\n\nThis prevents the following (very strange) errors:\n\n```\nerror: linking with `link.exe` failed: exit code: 1120\n  |\n  = note: \"C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\2019\\\\Enterprise\\\\VC\\\\Tools\\\\MSVC\\\\14.29.30133\\\\bin\\\\HostX64\\\\x86\\\\link.exe\" \"/DEF:C:\\\\Users\\\\runneradmin\\\\AppData\\\\Local\\\\Temp\\\\rustcJih4fa\\\\lib.def\" \"/NOLOGO\" \"/LARGEADDRESSAWARE\" \"/SAFESEH\" \"D:\\\\a\\\\rust\\\\rust\\\\build\\\\i686-pc-windows-msvc\\\\test\\\\rustdoc\\\\issue-15318-2\\\\auxiliary\\\\issue-15318.issue_15318.0a2a8554-cgu.0.rcgu.o\" \"D:\\\\a\\\\rust\\\\rust\\\\build\\\\i686-pc-windows-msvc\\\\test\\\\rustdoc\\\\issue-15318-2\\\\auxiliary\\\\issue-15318.1na9aylmt25n6w3f.rcgu.o\" \"/LIBPATH:D:\\\\a\\\\rust\\\\rust\\\\build\\\\i686-pc-windows-msvc\\\\native\\\\rust-test-helpers\" \"/LIBPATH:D:\\\\a\\\\rust\\\\rust\\\\build\\\\i686-pc-windows-msvc\\\\test\\\\rustdoc\\\\issue-15318-2\\\\auxiliary\" \"/LIBPATH:D:\\\\a\\\\rust\\\\rust\\\\build\\\\i686-pc-windows-msvc\\\\stage2\\\\lib\\\\rustlib\\\\i686-pc-windows-msvc\\\\lib\" \"vcruntime.lib\" \"ucrt.lib\" \"/WHOLEARCHIVE:D:\\\\a\\\\rust\\\\rust\\\\build\\\\i686-pc-windows-msvc\\\\stage2\\\\lib\\\\rustlib\\\\i686-pc-windows-msvc\\\\lib\\\\librustc_std_workspace_core-78744e1360284b1e.rlib\" \"/WHOLEARCHIVE:D:\\\\a\\\\rust\\\\rust\\\\build\\\\i686-pc-windows-msvc\\\\stage2\\\\lib\\\\rustlib\\\\i686-pc-windows-msvc\\\\lib\\\\libcore-a900fa3d16956226.rlib\" \"D:\\\\a\\\\rust\\\\rust\\\\build\\\\i686-pc-windows-msvc\\\\stage2\\\\lib\\\\rustlib\\\\i686-pc-windows-msvc\\\\lib\\\\libcompiler_builtins-eb97e6b4dfd2f421.rlib\" \"/NXCOMPAT\" \"/LIBPATH:D:\\\\a\\\\rust\\\\rust\\\\build\\\\i686-pc-windows-msvc\\\\stage2\\\\lib\\\\rustlib\\\\i686-pc-windows-msvc\\\\lib\" \"/OUT:D:\\\\a\\\\rust\\\\rust\\\\build\\\\i686-pc-windows-msvc\\\\test\\\\rustdoc\\\\issue-15318-2\\\\auxiliary\\\\issue_15318.dll\" \"/OPT:REF,ICF\" \"/DLL\" \"/IMPLIB:D:\\\\a\\\\rust\\\\rust\\\\build\\\\i686-pc-windows-msvc\\\\test\\\\rustdoc\\\\issue-15318-2\\\\auxiliary\\\\issue_15318.dll.lib\" \"/DEBUG\" \"/NATVIS:D:\\\\a\\\\rust\\\\rust\\\\build\\\\i686-pc-windows-msvc\\\\stage2\\\\lib\\\\rustlib\\\\etc\\\\intrinsic.natvis\" \"/NATVIS:D:\\\\a\\\\rust\\\\rust\\\\build\\\\i686-pc-windows-msvc\\\\stage2\\\\lib\\\\rustlib\\\\etc\\\\liballoc.natvis\" \"/NATVIS:D:\\\\a\\\\rust\\\\rust\\\\build\\\\i686-pc-windows-msvc\\\\stage2\\\\lib\\\\rustlib\\\\etc\\\\libcore.natvis\" \"/NATVIS:D:\\\\a\\\\rust\\\\rust\\\\build\\\\i686-pc-windows-msvc\\\\stage2\\\\lib\\\\rustlib\\\\etc\\\\libstd.natvis\"\n  = note: LINK : warning LNK4216: Exported entry point __DllMainCRTStartup@12\n             Creating library D:\\a\\rust\\rust\\build\\i686-pc-windows-msvc\\test\\rustdoc\\issue-15318-2\\auxiliary\\issue_15318.dll.lib and object D:\\a\\rust\\rust\\build\\i686-pc-windows-msvc\\test\\rustdoc\\issue-15318-2\\auxiliary\\issue_15318.dll.exp\n          libcore-a900fa3d16956226.rlib(core-a900fa3d16956226.core.95dedc69-cgu.0.rcgu.o) : error LNK2019: unresolved external symbol __aulldiv referenced in function __ZN4core3num7dec2flt7decimal7Decimal10left_shift17hfb9b6c23d6ff0383E\n          libcompiler_builtins-eb97e6b4dfd2f421.rlib(compiler_builtins-eb97e6b4dfd2f421.compiler_builtins.a5ef280a-cgu.51.rcgu.o) : error LNK2001: unresolved external symbol __aulldiv\n          libcore-a900fa3d16956226.rlib(core-a900fa3d16956226.core.95dedc69-cgu.0.rcgu.o) : error LNK2019: unresolved external symbol __aullrem referenced in function __ZN4core3fmt3num14parse_u64_into17h90eb20517ec3bd86E\n          D:\\a\\rust\\rust\\build\\i686-pc-windows-msvc\\test\\rustdoc\\issue-15318-2\\auxiliary\\issue_15318.dll : fatal error LNK1120: 2 unresolved externals\n\n```", "tree": {"sha": "e2b7cdc6c8c0537b74f1ed1ccd6c1c0fdaff2003", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e2b7cdc6c8c0537b74f1ed1ccd6c1c0fdaff2003"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/86fd2505c2e10fa27a49a81978cdcbabebb581a1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/86fd2505c2e10fa27a49a81978cdcbabebb581a1", "html_url": "https://github.com/rust-lang/rust/commit/86fd2505c2e10fa27a49a81978cdcbabebb581a1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/86fd2505c2e10fa27a49a81978cdcbabebb581a1/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7b469202183c1b29db813be42614ef994c099aca", "url": "https://api.github.com/repos/rust-lang/rust/commits/7b469202183c1b29db813be42614ef994c099aca", "html_url": "https://github.com/rust-lang/rust/commit/7b469202183c1b29db813be42614ef994c099aca"}], "stats": {"total": 5, "additions": 4, "deletions": 1}, "files": [{"sha": "695fa58ef1d55e500eae3c71fabe2f545cfb15be", "filename": "src/test/rustdoc/auxiliary/issue-15318.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/86fd2505c2e10fa27a49a81978cdcbabebb581a1/src%2Ftest%2Frustdoc%2Fauxiliary%2Fissue-15318.rs", "raw_url": "https://github.com/rust-lang/rust/raw/86fd2505c2e10fa27a49a81978cdcbabebb581a1/src%2Ftest%2Frustdoc%2Fauxiliary%2Fissue-15318.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fauxiliary%2Fissue-15318.rs?ref=86fd2505c2e10fa27a49a81978cdcbabebb581a1", "patch": "@@ -1,5 +1,6 @@\n+// no-prefer-dynamic\n // compile-flags: -Cmetadata=aux\n-\n+#![crate_type = \"rlib\"]\n #![doc(html_root_url = \"http://example.com/\")]\n #![feature(lang_items)]\n #![no_std]"}, {"sha": "120b6e9747f4aef1f8f1da144f5e6365f38b6dd0", "filename": "src/test/rustdoc/cross-crate-primitive-doc.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/86fd2505c2e10fa27a49a81978cdcbabebb581a1/src%2Ftest%2Frustdoc%2Fcross-crate-primitive-doc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/86fd2505c2e10fa27a49a81978cdcbabebb581a1/src%2Ftest%2Frustdoc%2Fcross-crate-primitive-doc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fcross-crate-primitive-doc.rs?ref=86fd2505c2e10fa27a49a81978cdcbabebb581a1", "patch": "@@ -1,5 +1,7 @@\n // aux-build:primitive-doc.rs\n // compile-flags: --extern-html-root-url=primitive_doc=../ -Z unstable-options\n+// ignore-windows\n+\n #![feature(no_core)]\n #![no_core]\n "}]}