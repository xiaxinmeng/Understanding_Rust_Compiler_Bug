{"sha": "e2ce4f9462c1d65b4dce084186c0e532c27fe5a3", "node_id": "C_kwDOAAsO6NoAKGUyY2U0Zjk0NjJjMWQ2NWI0ZGNlMDg0MTg2YzBlNTMyYzI3ZmU1YTM", "commit": {"author": {"name": "Cameron Steffen", "email": "cam.steffen94@gmail.com", "date": "2022-01-10T00:22:38Z"}, "committer": {"name": "Cameron Steffen", "email": "cam.steffen94@gmail.com", "date": "2022-01-10T00:35:12Z"}, "message": "Combine internal features in clippy_lints", "tree": {"sha": "8f52d236ea9e907d889619c24bec367f10b0fcca", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8f52d236ea9e907d889619c24bec367f10b0fcca"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e2ce4f9462c1d65b4dce084186c0e532c27fe5a3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e2ce4f9462c1d65b4dce084186c0e532c27fe5a3", "html_url": "https://github.com/rust-lang/rust/commit/e2ce4f9462c1d65b4dce084186c0e532c27fe5a3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e2ce4f9462c1d65b4dce084186c0e532c27fe5a3/comments", "author": {"login": "camsteffen", "id": 5565418, "node_id": "MDQ6VXNlcjU1NjU0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/5565418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/camsteffen", "html_url": "https://github.com/camsteffen", "followers_url": "https://api.github.com/users/camsteffen/followers", "following_url": "https://api.github.com/users/camsteffen/following{/other_user}", "gists_url": "https://api.github.com/users/camsteffen/gists{/gist_id}", "starred_url": "https://api.github.com/users/camsteffen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/camsteffen/subscriptions", "organizations_url": "https://api.github.com/users/camsteffen/orgs", "repos_url": "https://api.github.com/users/camsteffen/repos", "events_url": "https://api.github.com/users/camsteffen/events{/privacy}", "received_events_url": "https://api.github.com/users/camsteffen/received_events", "type": "User", "site_admin": false}, "committer": {"login": "camsteffen", "id": 5565418, "node_id": "MDQ6VXNlcjU1NjU0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/5565418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/camsteffen", "html_url": "https://github.com/camsteffen", "followers_url": "https://api.github.com/users/camsteffen/followers", "following_url": "https://api.github.com/users/camsteffen/following{/other_user}", "gists_url": "https://api.github.com/users/camsteffen/gists{/gist_id}", "starred_url": "https://api.github.com/users/camsteffen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/camsteffen/subscriptions", "organizations_url": "https://api.github.com/users/camsteffen/orgs", "repos_url": "https://api.github.com/users/camsteffen/repos", "events_url": "https://api.github.com/users/camsteffen/events{/privacy}", "received_events_url": "https://api.github.com/users/camsteffen/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "16d848891d07043c14cc5b7a692c42d6926c32eb", "url": "https://api.github.com/repos/rust-lang/rust/commits/16d848891d07043c14cc5b7a692c42d6926c32eb", "html_url": "https://github.com/rust-lang/rust/commit/16d848891d07043c14cc5b7a692c42d6926c32eb"}], "stats": {"total": 84, "additions": 39, "deletions": 45}, "files": [{"sha": "f3dd9275a42be6cd00a326912009fa3cb8a4df66", "filename": ".cargo/config.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e2ce4f9462c1d65b4dce084186c0e532c27fe5a3/.cargo%2Fconfig.toml", "raw_url": "https://github.com/rust-lang/rust/raw/e2ce4f9462c1d65b4dce084186c0e532c27fe5a3/.cargo%2Fconfig.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.cargo%2Fconfig.toml?ref=e2ce4f9462c1d65b4dce084186c0e532c27fe5a3", "patch": "@@ -2,7 +2,7 @@\n uitest = \"test --test compile-test\"\n dev = \"run --package clippy_dev --bin clippy_dev --manifest-path clippy_dev/Cargo.toml --\"\n lintcheck = \"run --package lintcheck --bin lintcheck --manifest-path lintcheck/Cargo.toml  -- \"\n-collect-metadata = \"test --test dogfood --features metadata-collector-lint -- run_metadata_collection_lint --ignored\"\n+collect-metadata = \"test --test dogfood --features internal -- run_metadata_collection_lint --ignored\"\n \n [build]\n # -Zbinary-dep-depinfo allows us to track which rlib files to use for compiling UI tests"}, {"sha": "8b5e814b1772e8df7a5e1e083ad2376340773835", "filename": ".github/workflows/clippy.yml", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/e2ce4f9462c1d65b4dce084186c0e532c27fe5a3/.github%2Fworkflows%2Fclippy.yml", "raw_url": "https://github.com/rust-lang/rust/raw/e2ce4f9462c1d65b4dce084186c0e532c27fe5a3/.github%2Fworkflows%2Fclippy.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Fclippy.yml?ref=e2ce4f9462c1d65b4dce084186c0e532c27fe5a3", "patch": "@@ -49,13 +49,13 @@ jobs:\n         echo \"LD_LIBRARY_PATH=${SYSROOT}/lib${LD_LIBRARY_PATH+:${LD_LIBRARY_PATH}}\" >> $GITHUB_ENV\n \n     - name: Build\n-      run: cargo build --features deny-warnings,internal-lints,metadata-collector-lint\n+      run: cargo build --features deny-warnings,internal\n \n     - name: Test\n-      run: cargo test --features deny-warnings,internal-lints,metadata-collector-lint\n+      run: cargo test --features deny-warnings,internal\n \n     - name: Test clippy_lints\n-      run: cargo test --features deny-warnings,internal-lints,metadata-collector-lint\n+      run: cargo test --features deny-warnings,internal\n       working-directory: clippy_lints\n \n     - name: Test clippy_utils"}, {"sha": "eb045ec30dc31d574730ab0dcd2d9c9249e94be7", "filename": ".github/workflows/clippy_bors.yml", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/e2ce4f9462c1d65b4dce084186c0e532c27fe5a3/.github%2Fworkflows%2Fclippy_bors.yml", "raw_url": "https://github.com/rust-lang/rust/raw/e2ce4f9462c1d65b4dce084186c0e532c27fe5a3/.github%2Fworkflows%2Fclippy_bors.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Fclippy_bors.yml?ref=e2ce4f9462c1d65b4dce084186c0e532c27fe5a3", "patch": "@@ -112,13 +112,13 @@ jobs:\n         echo \"$SYSROOT/bin\" >> $GITHUB_PATH\n \n     - name: Build\n-      run: cargo build --features deny-warnings,internal-lints,metadata-collector-lint\n+      run: cargo build --features deny-warnings,internal\n \n     - name: Test\n-      run: cargo test --features deny-warnings,internal-lints,metadata-collector-lint\n+      run: cargo test --features deny-warnings,internal\n \n     - name: Test clippy_lints\n-      run: cargo test --features deny-warnings,internal-lints,metadata-collector-lint\n+      run: cargo test --features deny-warnings,internal\n       working-directory: clippy_lints\n \n     - name: Test clippy_utils"}, {"sha": "cb49dd84c39a9b67e7f42fc4f9df6eb39f0d84d4", "filename": "Cargo.toml", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/e2ce4f9462c1d65b4dce084186c0e532c27fe5a3/Cargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/e2ce4f9462c1d65b4dce084186c0e532c27fe5a3/Cargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.toml?ref=e2ce4f9462c1d65b4dce084186c0e532c27fe5a3", "patch": "@@ -57,8 +57,7 @@ rustc_tools_util = { version = \"0.2\", path = \"rustc_tools_util\" }\n [features]\n deny-warnings = [\"clippy_lints/deny-warnings\"]\n integration = [\"tempfile\"]\n-internal-lints = [\"clippy_lints/internal-lints\"]\n-metadata-collector-lint = [\"internal-lints\", \"clippy_lints/metadata-collector-lint\"]\n+internal = [\"clippy_lints/internal\"]\n \n [package.metadata.rust-analyzer]\n # This package uses #[feature(rustc_private)]"}, {"sha": "d368ef1f46a2a98866e6aedcf32581c9ce17c047", "filename": "clippy_dev/src/update_lints.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e2ce4f9462c1d65b4dce084186c0e532c27fe5a3/clippy_dev%2Fsrc%2Fupdate_lints.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e2ce4f9462c1d65b4dce084186c0e532c27fe5a3/clippy_dev%2Fsrc%2Fupdate_lints.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_dev%2Fsrc%2Fupdate_lints.rs?ref=e2ce4f9462c1d65b4dce084186c0e532c27fe5a3", "patch": "@@ -321,7 +321,7 @@ fn gen_register_lint_list<'a>(\n \n     for (is_public, module_name, lint_name) in details {\n         if !is_public {\n-            output.push_str(\"    #[cfg(feature = \\\"internal-lints\\\")]\\n\");\n+            output.push_str(\"    #[cfg(feature = \\\"internal\\\")]\\n\");\n         }\n         output.push_str(&format!(\"    {}::{},\\n\", module_name, lint_name));\n     }"}, {"sha": "e9f87b60ece4345d94a49464f191368b027ff877", "filename": "clippy_lints/Cargo.toml", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/e2ce4f9462c1d65b4dce084186c0e532c27fe5a3/clippy_lints%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/e2ce4f9462c1d65b4dce084186c0e532c27fe5a3/clippy_lints%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2FCargo.toml?ref=e2ce4f9462c1d65b4dce084186c0e532c27fe5a3", "patch": "@@ -30,8 +30,7 @@ url = { version = \"2.2\", features = [\"serde\"] }\n [features]\n deny-warnings = [\"clippy_utils/deny-warnings\"]\n # build clippy with internal lints enabled, off by default\n-internal-lints = [\"clippy_utils/internal\"]\n-metadata-collector-lint = [\"serde_json\", \"clippy_utils/internal\"]\n+internal = [\"clippy_utils/internal\", \"serde_json\"]\n \n [package.metadata.rust-analyzer]\n # This crate uses #[feature(rustc_private)]"}, {"sha": "832178c2db5e52d167760ba2198e9ef516dac345", "filename": "clippy_lints/src/lib.register_lints.rs", "status": "modified", "additions": 14, "deletions": 14, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/e2ce4f9462c1d65b4dce084186c0e532c27fe5a3/clippy_lints%2Fsrc%2Flib.register_lints.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e2ce4f9462c1d65b4dce084186c0e532c27fe5a3/clippy_lints%2Fsrc%2Flib.register_lints.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.register_lints.rs?ref=e2ce4f9462c1d65b4dce084186c0e532c27fe5a3", "patch": "@@ -3,33 +3,33 @@\n // Manual edits will be overwritten.\n \n store.register_lints(&[\n-    #[cfg(feature = \"internal-lints\")]\n+    #[cfg(feature = \"internal\")]\n     utils::internal_lints::CLIPPY_LINTS_INTERNAL,\n-    #[cfg(feature = \"internal-lints\")]\n+    #[cfg(feature = \"internal\")]\n     utils::internal_lints::COLLAPSIBLE_SPAN_LINT_CALLS,\n-    #[cfg(feature = \"internal-lints\")]\n+    #[cfg(feature = \"internal\")]\n     utils::internal_lints::COMPILER_LINT_FUNCTIONS,\n-    #[cfg(feature = \"internal-lints\")]\n+    #[cfg(feature = \"internal\")]\n     utils::internal_lints::DEFAULT_LINT,\n-    #[cfg(feature = \"internal-lints\")]\n+    #[cfg(feature = \"internal\")]\n     utils::internal_lints::IF_CHAIN_STYLE,\n-    #[cfg(feature = \"internal-lints\")]\n+    #[cfg(feature = \"internal\")]\n     utils::internal_lints::INTERNING_DEFINED_SYMBOL,\n-    #[cfg(feature = \"internal-lints\")]\n+    #[cfg(feature = \"internal\")]\n     utils::internal_lints::INVALID_CLIPPY_VERSION_ATTRIBUTE,\n-    #[cfg(feature = \"internal-lints\")]\n+    #[cfg(feature = \"internal\")]\n     utils::internal_lints::INVALID_PATHS,\n-    #[cfg(feature = \"internal-lints\")]\n+    #[cfg(feature = \"internal\")]\n     utils::internal_lints::LINT_WITHOUT_LINT_PASS,\n-    #[cfg(feature = \"internal-lints\")]\n+    #[cfg(feature = \"internal\")]\n     utils::internal_lints::MATCH_TYPE_ON_DIAGNOSTIC_ITEM,\n-    #[cfg(feature = \"internal-lints\")]\n+    #[cfg(feature = \"internal\")]\n     utils::internal_lints::MISSING_CLIPPY_VERSION_ATTRIBUTE,\n-    #[cfg(feature = \"internal-lints\")]\n+    #[cfg(feature = \"internal\")]\n     utils::internal_lints::OUTER_EXPN_EXPN_DATA,\n-    #[cfg(feature = \"internal-lints\")]\n+    #[cfg(feature = \"internal\")]\n     utils::internal_lints::PRODUCE_ICE,\n-    #[cfg(feature = \"internal-lints\")]\n+    #[cfg(feature = \"internal\")]\n     utils::internal_lints::UNNECESSARY_SYMBOL_STR,\n     absurd_extreme_comparisons::ABSURD_EXTREME_COMPARISONS,\n     approx_const::APPROX_CONSTANT,"}, {"sha": "0d765c2bcde1bf41ade1ae5183c4b2dbd7955ba2", "filename": "clippy_lints/src/lib.rs", "status": "modified", "additions": 5, "deletions": 8, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/e2ce4f9462c1d65b4dce084186c0e532c27fe5a3/clippy_lints%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e2ce4f9462c1d65b4dce084186c0e532c27fe5a3/clippy_lints%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.rs?ref=e2ce4f9462c1d65b4dce084186c0e532c27fe5a3", "patch": "@@ -153,12 +153,9 @@ macro_rules! declare_clippy_lint {\n     };\n }\n \n-#[cfg(feature = \"metadata-collector-lint\")]\n+#[cfg(feature = \"internal\")]\n mod deprecated_lints;\n-#[cfg_attr(\n-    any(feature = \"internal-lints\", feature = \"metadata-collector-lint\"),\n-    allow(clippy::missing_clippy_version_attribute)\n-)]\n+#[cfg_attr(feature = \"internal\", allow(clippy::missing_clippy_version_attribute))]\n mod utils;\n \n // begin lints modules, do not remove this comment, it\u2019s used in `update_lints`\n@@ -472,7 +469,7 @@ pub fn register_plugins(store: &mut rustc_lint::LintStore, sess: &Session, conf:\n     include!(\"lib.register_restriction.rs\");\n     include!(\"lib.register_pedantic.rs\");\n \n-    #[cfg(feature = \"internal-lints\")]\n+    #[cfg(feature = \"internal\")]\n     include!(\"lib.register_internal.rs\");\n \n     include!(\"lib.register_all.rs\");\n@@ -484,7 +481,7 @@ pub fn register_plugins(store: &mut rustc_lint::LintStore, sess: &Session, conf:\n     include!(\"lib.register_cargo.rs\");\n     include!(\"lib.register_nursery.rs\");\n \n-    #[cfg(feature = \"metadata-collector-lint\")]\n+    #[cfg(feature = \"internal\")]\n     {\n         if std::env::var(\"ENABLE_METADATA_COLLECTION\").eq(&Ok(\"1\".to_string())) {\n             store.register_late_pass(|| Box::new(utils::internal_lints::metadata_collector::MetadataCollector::new()));\n@@ -493,7 +490,7 @@ pub fn register_plugins(store: &mut rustc_lint::LintStore, sess: &Session, conf:\n     }\n \n     // all the internal lints\n-    #[cfg(feature = \"internal-lints\")]\n+    #[cfg(feature = \"internal\")]\n     {\n         store.register_early_pass(|| Box::new(utils::internal_lints::ClippyLintsInternal));\n         store.register_early_pass(|| Box::new(utils::internal_lints::ProduceIce));"}, {"sha": "4e1c538c1c20a166036bd51c85a16d51b2395590", "filename": "clippy_lints/src/utils/conf.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e2ce4f9462c1d65b4dce084186c0e532c27fe5a3/clippy_lints%2Fsrc%2Futils%2Fconf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e2ce4f9462c1d65b4dce084186c0e532c27fe5a3/clippy_lints%2Fsrc%2Futils%2Fconf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fconf.rs?ref=e2ce4f9462c1d65b4dce084186c0e532c27fe5a3", "patch": "@@ -113,7 +113,7 @@ macro_rules! define_Conf {\n             }\n         }\n \n-        #[cfg(feature = \"metadata-collector-lint\")]\n+        #[cfg(feature = \"internal\")]\n         pub mod metadata {\n             use crate::utils::internal_lints::metadata_collector::ClippyConfiguration;\n "}, {"sha": "67faca70d5cd6976ccfc9bc19aab4380395410f6", "filename": "clippy_lints/src/utils/internal_lints.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e2ce4f9462c1d65b4dce084186c0e532c27fe5a3/clippy_lints%2Fsrc%2Futils%2Finternal_lints.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e2ce4f9462c1d65b4dce084186c0e532c27fe5a3/clippy_lints%2Fsrc%2Futils%2Finternal_lints.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Finternal_lints.rs?ref=e2ce4f9462c1d65b4dce084186c0e532c27fe5a3", "patch": "@@ -35,7 +35,7 @@ use rustc_typeck::hir_ty_to_ty;\n \n use std::borrow::{Borrow, Cow};\n \n-#[cfg(feature = \"metadata-collector-lint\")]\n+#[cfg(feature = \"internal\")]\n pub mod metadata_collector;\n \n declare_clippy_lint! {"}, {"sha": "02f5d45cc18f4e6978e7530f4c92f23d3f596fd6", "filename": "clippy_lints/src/utils/internal_lints/metadata_collector.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/e2ce4f9462c1d65b4dce084186c0e532c27fe5a3/clippy_lints%2Fsrc%2Futils%2Finternal_lints%2Fmetadata_collector.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e2ce4f9462c1d65b4dce084186c0e532c27fe5a3/clippy_lints%2Fsrc%2Futils%2Finternal_lints%2Fmetadata_collector.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Finternal_lints%2Fmetadata_collector.rs?ref=e2ce4f9462c1d65b4dce084186c0e532c27fe5a3", "patch": "@@ -1,8 +1,7 @@\n //! This lint is used to collect metadata about clippy lints. This metadata is exported as a json\n //! file and then used to generate the [clippy lint list](https://rust-lang.github.io/rust-clippy/master/index.html)\n //!\n-//! This module and therefor the entire lint is guarded by a feature flag called\n-//! `metadata-collector-lint`\n+//! This module and therefore the entire lint is guarded by a feature flag called `internal`\n //!\n //! The module transforms all lint names to ascii lowercase to ensure that we don't have mismatches\n //! during any comparison or mapping. (Please take care of this, it's not fun to spend time on such"}, {"sha": "dc385ebacba664db68ea0ed564508f9ef7a312cb", "filename": "clippy_lints/src/utils/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e2ce4f9462c1d65b4dce084186c0e532c27fe5a3/clippy_lints%2Fsrc%2Futils%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e2ce4f9462c1d65b4dce084186c0e532c27fe5a3/clippy_lints%2Fsrc%2Futils%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fmod.rs?ref=e2ce4f9462c1d65b4dce084186c0e532c27fe5a3", "patch": "@@ -1,5 +1,5 @@\n pub mod author;\n pub mod conf;\n pub mod inspector;\n-#[cfg(any(feature = \"internal-lints\", feature = \"metadata-collector-lint\"))]\n+#[cfg(feature = \"internal\")]\n pub mod internal_lints;"}, {"sha": "762b67fc5854d2ca3764739fa9ffbc738de30f29", "filename": "tests/compile-test.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e2ce4f9462c1d65b4dce084186c0e532c27fe5a3/tests%2Fcompile-test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e2ce4f9462c1d65b4dce084186c0e532c27fe5a3/tests%2Fcompile-test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-test.rs?ref=e2ce4f9462c1d65b4dce084186c0e532c27fe5a3", "patch": "@@ -15,7 +15,7 @@ use std::path::{Path, PathBuf};\n mod cargo;\n \n // whether to run internal tests or not\n-const RUN_INTERNAL_TESTS: bool = cfg!(feature = \"internal-lints\");\n+const RUN_INTERNAL_TESTS: bool = cfg!(feature = \"internal\");\n \n /// All crates used in UI tests are listed here\n static TEST_DEPENDENCIES: &[&str] = &["}, {"sha": "6f7de9c67a9b7806b4dd6444a7760d550b6823cb", "filename": "tests/dogfood.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/e2ce4f9462c1d65b4dce084186c0e532c27fe5a3/tests%2Fdogfood.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e2ce4f9462c1d65b4dce084186c0e532c27fe5a3/tests%2Fdogfood.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdogfood.rs?ref=e2ce4f9462c1d65b4dce084186c0e532c27fe5a3", "patch": "@@ -42,8 +42,8 @@ fn dogfood_clippy() {\n         .args(&[\"-D\", \"clippy::pedantic\"])\n         .arg(\"-Cdebuginfo=0\"); // disable debuginfo to generate less data in the target dir\n \n-    // internal lints only exist if we build with the internal-lints feature\n-    if cfg!(feature = \"internal-lints\") {\n+    // internal lints only exist if we build with the internal feature\n+    if cfg!(feature = \"internal\") {\n         command.args(&[\"-D\", \"clippy::internal\"]);\n     }\n \n@@ -180,7 +180,7 @@ fn dogfood_subprojects() {\n \n #[test]\n #[ignore]\n-#[cfg(feature = \"metadata-collector-lint\")]\n+#[cfg(feature = \"internal\")]\n fn run_metadata_collection_lint() {\n     use std::fs::File;\n     use std::time::SystemTime;\n@@ -233,8 +233,8 @@ fn run_clippy_for_project(project: &str) {\n         .args(&[\"-D\", \"clippy::pedantic\"])\n         .arg(\"-Cdebuginfo=0\"); // disable debuginfo to generate less data in the target dir\n \n-    // internal lints only exist if we build with the internal-lints feature\n-    if cfg!(feature = \"internal-lints\") {\n+    // internal lints only exist if we build with the internal feature\n+    if cfg!(feature = \"internal\") {\n         command.args(&[\"-D\", \"clippy::internal\"]);\n     }\n "}]}