{"sha": "2375d7f38698a23cfc87d7f9f570393245cbc2f7", "node_id": "C_kwDOAAsO6NoAKDIzNzVkN2YzODY5OGEyM2NmYzg3ZDdmOWY1NzAzOTMyNDVjYmMyZjc", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2023-02-27T17:48:48Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-02-27T17:48:48Z"}, "message": "Rollup merge of #108308 - bjorn3:faster_bootstrap_build, r=albertlarsan68\n\nAllow building serde and serde_derive in parallel\n\nThis reduces build time of bootstrap by ~6s", "tree": {"sha": "0897bea1c3c766b54dab2398f8c4dc701759bc71", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0897bea1c3c766b54dab2398f8c4dc701759bc71"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2375d7f38698a23cfc87d7f9f570393245cbc2f7", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJj/O0ACRBK7hj4Ov3rIwAArBwIAEVUq2qrggGnba7+sFi2HyyV\n5r3fK0jWFR82TvrTr2515RNehRq6AKxa7/OVY00Ky/ysTZAQyTUx0/pWkINzBcPZ\npUgtSrZbv90TYLpweQ67XdIHCrphI++aegV2ipRzt8jvrwRBtWrLQc87PrwESKas\nCFFf4UNATKyDgGTK230BwJ6QIa529j/FUeBh0MsPkGR+oNS6Ao4LPQ+nCaqzqpxM\nrVV7uvPyCV5pEZC5x0/0CGLao41r/m33HfgOHdqEfEo5sQQcFqkf97kSUmcneK4J\n9owBptybf1MD68Q9Jttek8K5jGPg3c1ijz9A6qvvxEWlEem+zUMC8eF/cOlbbfY=\n=9F3S\n-----END PGP SIGNATURE-----\n", "payload": "tree 0897bea1c3c766b54dab2398f8c4dc701759bc71\nparent 3fe4023370a50d89227c4d2f645f868ac753656f\nparent fdbc3c2dcf7bf29324bd42968449a6d30d29961a\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1677520128 +0100\ncommitter GitHub <noreply@github.com> 1677520128 +0100\n\nRollup merge of #108308 - bjorn3:faster_bootstrap_build, r=albertlarsan68\n\nAllow building serde and serde_derive in parallel\n\nThis reduces build time of bootstrap by ~6s\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2375d7f38698a23cfc87d7f9f570393245cbc2f7", "html_url": "https://github.com/rust-lang/rust/commit/2375d7f38698a23cfc87d7f9f570393245cbc2f7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2375d7f38698a23cfc87d7f9f570393245cbc2f7/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3fe4023370a50d89227c4d2f645f868ac753656f", "url": "https://api.github.com/repos/rust-lang/rust/commits/3fe4023370a50d89227c4d2f645f868ac753656f", "html_url": "https://github.com/rust-lang/rust/commit/3fe4023370a50d89227c4d2f645f868ac753656f"}, {"sha": "fdbc3c2dcf7bf29324bd42968449a6d30d29961a", "url": "https://api.github.com/repos/rust-lang/rust/commits/fdbc3c2dcf7bf29324bd42968449a6d30d29961a", "html_url": "https://github.com/rust-lang/rust/commit/fdbc3c2dcf7bf29324bd42968449a6d30d29961a"}], "stats": {"total": 20, "additions": 11, "deletions": 9}, "files": [{"sha": "e861d520c5343006ac24a5da58fb42d72485e363", "filename": "src/bootstrap/Cargo.lock", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2375d7f38698a23cfc87d7f9f570393245cbc2f7/src%2Fbootstrap%2FCargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/2375d7f38698a23cfc87d7f9f570393245cbc2f7/src%2Fbootstrap%2FCargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2FCargo.lock?ref=2375d7f38698a23cfc87d7f9f570393245cbc2f7", "patch": "@@ -50,6 +50,7 @@ dependencies = [\n  \"opener\",\n  \"pretty_assertions\",\n  \"serde\",\n+ \"serde_derive\",\n  \"serde_json\",\n  \"sha2\",\n  \"sysinfo\",\n@@ -564,9 +565,6 @@ name = \"serde\"\n version = \"1.0.137\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"61ea8d54c77f8315140a05f4c7237403bf38b72704d031543aa1d16abbf517d1\"\n-dependencies = [\n- \"serde_derive\",\n-]\n \n [[package]]\n name = \"serde_derive\""}, {"sha": "663987f113c8bb9845f9f793cda46eb42e7fcc12", "filename": "src/bootstrap/Cargo.toml", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/2375d7f38698a23cfc87d7f9f570393245cbc2f7/src%2Fbootstrap%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/2375d7f38698a23cfc87d7f9f570393245cbc2f7/src%2Fbootstrap%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2FCargo.toml?ref=2375d7f38698a23cfc87d7f9f570393245cbc2f7", "patch": "@@ -39,7 +39,10 @@ cc = \"1.0.69\"\n libc = \"0.2\"\n hex = \"0.4\"\n object = { version = \"0.29.0\", default-features = false, features = [\"archive\", \"coff\", \"read_core\", \"unaligned\"] }\n-serde = { version = \"1.0.8\", features = [\"derive\"] }\n+serde = \"1.0.137\"\n+# Directly use serde_derive rather than through the derive feature of serde to allow building both\n+# in parallel and to allow serde_json and toml to start building as soon as serde has been built.\n+serde_derive = \"1.0.137\"\n serde_json = \"1.0.2\"\n sha2 = \"0.10\"\n tar = \"0.4\""}, {"sha": "8b80dfc0f9b97e6cb1d97c3c36267e06fcbe12eb", "filename": "src/bootstrap/compile.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2375d7f38698a23cfc87d7f9f570393245cbc2f7/src%2Fbootstrap%2Fcompile.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2375d7f38698a23cfc87d7f9f570393245cbc2f7/src%2Fbootstrap%2Fcompile.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fcompile.rs?ref=2375d7f38698a23cfc87d7f9f570393245cbc2f7", "patch": "@@ -16,7 +16,7 @@ use std::path::{Path, PathBuf};\n use std::process::{Command, Stdio};\n use std::str;\n \n-use serde::Deserialize;\n+use serde_derive::Deserialize;\n \n use crate::builder::crate_description;\n use crate::builder::Cargo;"}, {"sha": "05e742549499b191d8f57f6d30633527f150a6f0", "filename": "src/bootstrap/config.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/2375d7f38698a23cfc87d7f9f570393245cbc2f7/src%2Fbootstrap%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2375d7f38698a23cfc87d7f9f570393245cbc2f7/src%2Fbootstrap%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fconfig.rs?ref=2375d7f38698a23cfc87d7f9f570393245cbc2f7", "patch": "@@ -25,6 +25,7 @@ use crate::flags::{Color, Flags};\n use crate::util::{exe, output, t};\n use once_cell::sync::OnceCell;\n use serde::{Deserialize, Deserializer};\n+use serde_derive::Deserialize;\n \n macro_rules! check_ci_llvm {\n     ($name:expr) => {"}, {"sha": "6d5753e8a6d4dfb15fe0bb45222dd09a120fa836", "filename": "src/bootstrap/format.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2375d7f38698a23cfc87d7f9f570393245cbc2f7/src%2Fbootstrap%2Fformat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2375d7f38698a23cfc87d7f9f570393245cbc2f7/src%2Fbootstrap%2Fformat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fformat.rs?ref=2375d7f38698a23cfc87d7f9f570393245cbc2f7", "patch": "@@ -87,7 +87,7 @@ fn get_modified_rs_files(build: &Builder<'_>) -> Result<Option<Vec<String>>, Str\n     get_git_modified_files(Some(&build.config.src), &vec![\"rs\"])\n }\n \n-#[derive(serde::Deserialize)]\n+#[derive(serde_derive::Deserialize)]\n struct RustfmtConfig {\n     ignore: Vec<String>,\n }"}, {"sha": "bba4d65e8c31840e14ee1c9ecff698d78267a0a6", "filename": "src/bootstrap/metadata.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2375d7f38698a23cfc87d7f9f570393245cbc2f7/src%2Fbootstrap%2Fmetadata.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2375d7f38698a23cfc87d7f9f570393245cbc2f7/src%2Fbootstrap%2Fmetadata.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fmetadata.rs?ref=2375d7f38698a23cfc87d7f9f570393245cbc2f7", "patch": "@@ -1,7 +1,7 @@\n use std::path::PathBuf;\n use std::process::Command;\n \n-use serde::Deserialize;\n+use serde_derive::Deserialize;\n \n use crate::cache::INTERNER;\n use crate::util::output;"}, {"sha": "2e62c950709dfd4680280cd3da57993b47076412", "filename": "src/bootstrap/metrics.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2375d7f38698a23cfc87d7f9f570393245cbc2f7/src%2Fbootstrap%2Fmetrics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2375d7f38698a23cfc87d7f9f570393245cbc2f7/src%2Fbootstrap%2Fmetrics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fmetrics.rs?ref=2375d7f38698a23cfc87d7f9f570393245cbc2f7", "patch": "@@ -7,7 +7,7 @@\n use crate::builder::Step;\n use crate::util::t;\n use crate::Build;\n-use serde::{Deserialize, Serialize};\n+use serde_derive::{Deserialize, Serialize};\n use std::cell::RefCell;\n use std::fs::File;\n use std::io::BufWriter;"}, {"sha": "7aab88a1a7364200aca92e9a02ff70d5ffb00565", "filename": "src/bootstrap/toolstate.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2375d7f38698a23cfc87d7f9f570393245cbc2f7/src%2Fbootstrap%2Ftoolstate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2375d7f38698a23cfc87d7f9f570393245cbc2f7/src%2Fbootstrap%2Ftoolstate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Ftoolstate.rs?ref=2375d7f38698a23cfc87d7f9f570393245cbc2f7", "patch": "@@ -1,6 +1,6 @@\n use crate::builder::{Builder, RunConfig, ShouldRun, Step};\n use crate::util::t;\n-use serde::{Deserialize, Serialize};\n+use serde_derive::{Deserialize, Serialize};\n use std::collections::HashMap;\n use std::env;\n use std::fmt;"}]}