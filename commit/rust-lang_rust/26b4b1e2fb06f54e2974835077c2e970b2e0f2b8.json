{"sha": "26b4b1e2fb06f54e2974835077c2e970b2e0f2b8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI2YjRiMWUyZmIwNmY1NGUyOTc0ODM1MDc3YzJlOTcwYjJlMGYyYjg=", "commit": {"author": {"name": "Dusty Pomerleau", "email": "dustypomerleau@users.noreply.github.com", "date": "2020-10-22T02:03:04Z"}, "committer": {"name": "Dusty Pomerleau", "email": "dustypomerleau@users.noreply.github.com", "date": "2020-10-22T02:33:06Z"}, "message": "fix: prevent line comments inside block comments\n\n- prevent line comments inside block comments\n- prevent underscore-prefixed functions and macros from receiving comment scope", "tree": {"sha": "da2feb8a812060e71c1f121c336dd3d56aa6a162", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/da2feb8a812060e71c1f121c336dd3d56aa6a162"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/26b4b1e2fb06f54e2974835077c2e970b2e0f2b8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/26b4b1e2fb06f54e2974835077c2e970b2e0f2b8", "html_url": "https://github.com/rust-lang/rust/commit/26b4b1e2fb06f54e2974835077c2e970b2e0f2b8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/26b4b1e2fb06f54e2974835077c2e970b2e0f2b8/comments", "author": {"login": "dustypomerleau", "id": 6304651, "node_id": "MDQ6VXNlcjYzMDQ2NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/6304651?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dustypomerleau", "html_url": "https://github.com/dustypomerleau", "followers_url": "https://api.github.com/users/dustypomerleau/followers", "following_url": "https://api.github.com/users/dustypomerleau/following{/other_user}", "gists_url": "https://api.github.com/users/dustypomerleau/gists{/gist_id}", "starred_url": "https://api.github.com/users/dustypomerleau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dustypomerleau/subscriptions", "organizations_url": "https://api.github.com/users/dustypomerleau/orgs", "repos_url": "https://api.github.com/users/dustypomerleau/repos", "events_url": "https://api.github.com/users/dustypomerleau/events{/privacy}", "received_events_url": "https://api.github.com/users/dustypomerleau/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dustypomerleau", "id": 6304651, "node_id": "MDQ6VXNlcjYzMDQ2NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/6304651?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dustypomerleau", "html_url": "https://github.com/dustypomerleau", "followers_url": "https://api.github.com/users/dustypomerleau/followers", "following_url": "https://api.github.com/users/dustypomerleau/following{/other_user}", "gists_url": "https://api.github.com/users/dustypomerleau/gists{/gist_id}", "starred_url": "https://api.github.com/users/dustypomerleau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dustypomerleau/subscriptions", "organizations_url": "https://api.github.com/users/dustypomerleau/orgs", "repos_url": "https://api.github.com/users/dustypomerleau/repos", "events_url": "https://api.github.com/users/dustypomerleau/events{/privacy}", "received_events_url": "https://api.github.com/users/dustypomerleau/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9eb6cbb80b7d2ccf196745f8e53fc22ae0f73030", "url": "https://api.github.com/repos/rust-lang/rust/commits/9eb6cbb80b7d2ccf196745f8e53fc22ae0f73030", "html_url": "https://github.com/rust-lang/rust/commit/9eb6cbb80b7d2ccf196745f8e53fc22ae0f73030"}], "stats": {"total": 53, "additions": 34, "deletions": 19}, "files": [{"sha": "f0c5c3cf3145123391141391c69a709f0ab1b1ea", "filename": "editors/code/rust.tmGrammar.json", "status": "modified", "additions": 34, "deletions": 19, "changes": 53, "blob_url": "https://github.com/rust-lang/rust/blob/26b4b1e2fb06f54e2974835077c2e970b2e0f2b8/editors%2Fcode%2Frust.tmGrammar.json", "raw_url": "https://github.com/rust-lang/rust/raw/26b4b1e2fb06f54e2974835077c2e970b2e0f2b8/editors%2Fcode%2Frust.tmGrammar.json", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Frust.tmGrammar.json?ref=26b4b1e2fb06f54e2974835077c2e970b2e0f2b8", "patch": "@@ -24,6 +24,9 @@\n                 }\n             },\n             \"patterns\": [\n+                {\n+                    \"include\": \"#block-comments\"\n+                },\n                 {\n                     \"include\": \"#comments\"\n                 },\n@@ -184,6 +187,9 @@\n                 }\n             },\n             \"patterns\": [\n+                {\n+                    \"include\": \"#block-comments\"\n+                },\n                 {\n                     \"include\": \"#comments\"\n                 },\n@@ -211,6 +217,9 @@\n                 }\n             },\n             \"patterns\": [\n+                {\n+                    \"include\": \"#block-comments\"\n+                },\n                 {\n                     \"include\": \"#comments\"\n                 },\n@@ -231,6 +240,9 @@\n                 }\n             ]\n         },\n+        {\n+            \"include\": \"#block-comments\"\n+        },\n         {\n             \"include\": \"#comments\"\n         },\n@@ -277,31 +289,30 @@\n                 {\n                     \"comment\": \"documentation comments\",\n                     \"name\": \"comment.line.documentation.rust\",\n-                    \"match\": \"^\\\\s*///.*\",\n-                    \"patterns\": [\n-                        {\n-                            \"include\": \"#comments\"\n-                        }\n-                    ]\n+                    \"match\": \"^\\\\s*///.*\"\n                 },\n                 {\n                     \"comment\": \"line comments\",\n                     \"name\": \"comment.line.double-slash.rust\",\n-                    \"match\": \"\\\\s*//.*\",\n-                    \"patterns\": [\n-                        {\n-                            \"include\": \"#comments\"\n-                        }\n-                    ]\n+                    \"match\": \"\\\\s*//.*\"\n                 },\n+                {\n+                    \"comment\": \"inferred types, wildcard patterns, ignored params\",\n+                    \"name\": \"comment.char.underscore.rust\",\n+                    \"match\": \"\\\\b_\\\\w*\\\\b[^!(]\"\n+                }\n+            ]\n+        },\n+        \"block-comments\": {\n+            \"patterns\": [\n                 {\n                     \"comment\": \"block comments\",\n                     \"name\": \"comment.block.rust\",\n                     \"begin\": \"/\\\\*(?!\\\\*)\",\n                     \"end\": \"\\\\*/\",\n                     \"patterns\": [\n                         {\n-                            \"include\": \"#comments\"\n+                            \"include\": \"#block-comments\"\n                         }\n                     ]\n                 },\n@@ -312,14 +323,9 @@\n                     \"end\": \"\\\\*/\",\n                     \"patterns\": [\n                         {\n-                            \"include\": \"#comments\"\n+                            \"include\": \"#block-comments\"\n                         }\n                     ]\n-                },\n-                {\n-                    \"comment\": \"inferred types, wildcard patterns, ignored params\",\n-                    \"name\": \"comment.char.underscore.rust\",\n-                    \"match\": \"\\\\b_\\\\w*\\\\b\"\n                 }\n             ]\n         },\n@@ -450,6 +456,9 @@\n                         }\n                     },\n                     \"patterns\": [\n+                        {\n+                            \"include\": \"#block-comments\"\n+                        },\n                         {\n                             \"include\": \"#comments\"\n                         },\n@@ -516,6 +525,9 @@\n                         }\n                     },\n                     \"patterns\": [\n+                        {\n+                            \"include\": \"#block-comments\"\n+                        },\n                         {\n                             \"include\": \"#comments\"\n                         },\n@@ -797,6 +809,9 @@\n                         }\n                     },\n                     \"patterns\": [\n+                        {\n+                            \"include\": \"#block-comments\"\n+                        },\n                         {\n                             \"include\": \"#comments\"\n                         },"}]}