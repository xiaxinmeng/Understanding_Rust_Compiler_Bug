{"sha": "c74ff6cbd45ee79d623a6e1ad936d851c34fffc8", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM3NGZmNmNiZDQ1ZWU3OWQ2MjNhNmUxYWQ5MzZkODUxYzM0ZmZmYzg=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-07-20T18:59:04Z"}, "committer": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-07-20T20:08:05Z"}, "message": "Rollup merge of #52502 - RalfJung:rotate, r=scottmcm\n\nfix unsafety: don't call ptr_rotate for ZST\n\n`rotate::ptr_rotate` has a comment saying\n```\n/// # Safety\n///\n/// The specified range must be valid for reading and writing.\n/// The type `T` must have non-zero size.\n```\nSo we better make sure we don't call it on ZST...\n\nCc @scottmcm (author of https://github.com/rust-lang/rust/pull/41670)", "tree": {"sha": "85b6e91f265435ee01916b0e5ba6ba4f8d002298", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/85b6e91f265435ee01916b0e5ba6ba4f8d002298"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c74ff6cbd45ee79d623a6e1ad936d851c34fffc8", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZ1R8CLMp8f2GxWoQ/vbIBR0OATwFAltSQSUACgkQ/vbIBR0O\nATzRMA/9H6hrzoqM/SKcGtgvPFqllNFzqxkWbcJbvhlavZaZjLJs/DlZyqkAOU6a\n99ikkW1HSOxy5aprVfinj4SsH0tICeQW+ja555FW6KW3o/7alNmRIoKqM8yvxrwl\nYs3FpgmOip8qNbGEoJaTjheZpRu6oX6RDPAeZK3EhomOj+JT1xgmiW0I+D4CIiq3\niX1oBtEUknhEv66GRaP9VeRUQFIdLOCD9e3emeosr0Q7l07rFXR4KoD0ruXXG4OK\nOcNECp+DM1zRW3xGEAKHPx5AS7auw7isakumGPwVX4wVSOEFiv8GDhOOA48z7Hl5\nFs1guqyRxUbscLAYztdJ4b/NyCMiZCOasMyTTLeoxDOKjn/IjqwVybIE7PKfHFdZ\n/rG++x3vav+nzNtD5cX80sbD+nMKGubenq+HDL7jMrOg8PSZOd5vvkmYmMc4wMCb\n0VlcPywer8Wppsq9SA+/J7VDomj27x/zHayAGCaGmMi8TEsVPWnKgbqFMO+KnR5w\ni0L3cHKo797z1EG4DWwiHDsW1hQGSfN6CvSxFuUjN7fzEekLZ3Jnl33inQpP6xlS\ntX5tFUB9IVpeP1FCCHvWJnOgd+Z8BEbkkfvaHA33uM2YjwU+Cg45kCpM8IjR9hW1\n2Vv0Deb/sLk3iA7qjv1zxeMCwB2KX8l3w0qyJvCY4qyUJ47A+rs=\n=1Gqx\n-----END PGP SIGNATURE-----", "payload": "tree 85b6e91f265435ee01916b0e5ba6ba4f8d002298\nparent 509cbf3e8ecf1cf92b7051fa54e9360ad7b7449f\nparent 16c057256f68b39df70737838f367cf645d6e0c7\nauthor kennytm <kennytm@gmail.com> 1532113144 +0800\ncommitter kennytm <kennytm@gmail.com> 1532117285 +0800\n\nRollup merge of #52502 - RalfJung:rotate, r=scottmcm\n\nfix unsafety: don't call ptr_rotate for ZST\n\n`rotate::ptr_rotate` has a comment saying\n```\n/// # Safety\n///\n/// The specified range must be valid for reading and writing.\n/// The type `T` must have non-zero size.\n```\nSo we better make sure we don't call it on ZST...\n\nCc @scottmcm (author of https://github.com/rust-lang/rust/pull/41670)\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c74ff6cbd45ee79d623a6e1ad936d851c34fffc8", "html_url": "https://github.com/rust-lang/rust/commit/c74ff6cbd45ee79d623a6e1ad936d851c34fffc8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c74ff6cbd45ee79d623a6e1ad936d851c34fffc8/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "509cbf3e8ecf1cf92b7051fa54e9360ad7b7449f", "url": "https://api.github.com/repos/rust-lang/rust/commits/509cbf3e8ecf1cf92b7051fa54e9360ad7b7449f", "html_url": "https://github.com/rust-lang/rust/commit/509cbf3e8ecf1cf92b7051fa54e9360ad7b7449f"}, {"sha": "16c057256f68b39df70737838f367cf645d6e0c7", "url": "https://api.github.com/repos/rust-lang/rust/commits/16c057256f68b39df70737838f367cf645d6e0c7", "html_url": "https://github.com/rust-lang/rust/commit/16c057256f68b39df70737838f367cf645d6e0c7"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "28ef53ccb5cb6b50547b5619bd7d5b7af86049c7", "filename": "src/libcore/slice/rotate.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c74ff6cbd45ee79d623a6e1ad936d851c34fffc8/src%2Flibcore%2Fslice%2Frotate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c74ff6cbd45ee79d623a6e1ad936d851c34fffc8/src%2Flibcore%2Fslice%2Frotate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fslice%2Frotate.rs?ref=c74ff6cbd45ee79d623a6e1ad936d851c34fffc8", "patch": "@@ -48,7 +48,6 @@ impl<T> RawArray<T> {\n /// # Safety\n ///\n /// The specified range must be valid for reading and writing.\n-/// The type `T` must have non-zero size.\n ///\n /// # Algorithm\n ///\n@@ -73,6 +72,7 @@ pub unsafe fn ptr_rotate<T>(mut left: usize, mid: *mut T, mut right: usize) {\n     loop {\n         let delta = cmp::min(left, right);\n         if delta <= RawArray::<T>::cap() {\n+            // We will always hit this immediately for ZST.\n             break;\n         }\n "}]}