{"sha": "62d0e4cba94713cd7e4149da73875654bedf75b7", "node_id": "C_kwDOAAsO6NoAKDYyZDBlNGNiYTk0NzEzY2Q3ZTQxNDlkYTczODc1NjU0YmVkZjc1Yjc", "commit": {"author": {"name": "Jack Huey", "email": "31162821+jackh726@users.noreply.github.com", "date": "2022-04-17T19:00:32Z"}, "committer": {"name": "Jack Huey", "email": "31162821+jackh726@users.noreply.github.com", "date": "2022-05-07T03:35:42Z"}, "message": "Resolve vars in note_type_err", "tree": {"sha": "d222f69ca1300085145d37626880efcb7b3a810d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d222f69ca1300085145d37626880efcb7b3a810d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/62d0e4cba94713cd7e4149da73875654bedf75b7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/62d0e4cba94713cd7e4149da73875654bedf75b7", "html_url": "https://github.com/rust-lang/rust/commit/62d0e4cba94713cd7e4149da73875654bedf75b7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/62d0e4cba94713cd7e4149da73875654bedf75b7/comments", "author": {"login": "jackh726", "id": 31162821, "node_id": "MDQ6VXNlcjMxMTYyODIx", "avatar_url": "https://avatars.githubusercontent.com/u/31162821?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackh726", "html_url": "https://github.com/jackh726", "followers_url": "https://api.github.com/users/jackh726/followers", "following_url": "https://api.github.com/users/jackh726/following{/other_user}", "gists_url": "https://api.github.com/users/jackh726/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackh726/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackh726/subscriptions", "organizations_url": "https://api.github.com/users/jackh726/orgs", "repos_url": "https://api.github.com/users/jackh726/repos", "events_url": "https://api.github.com/users/jackh726/events{/privacy}", "received_events_url": "https://api.github.com/users/jackh726/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jackh726", "id": 31162821, "node_id": "MDQ6VXNlcjMxMTYyODIx", "avatar_url": "https://avatars.githubusercontent.com/u/31162821?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackh726", "html_url": "https://github.com/jackh726", "followers_url": "https://api.github.com/users/jackh726/followers", "following_url": "https://api.github.com/users/jackh726/following{/other_user}", "gists_url": "https://api.github.com/users/jackh726/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackh726/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackh726/subscriptions", "organizations_url": "https://api.github.com/users/jackh726/orgs", "repos_url": "https://api.github.com/users/jackh726/repos", "events_url": "https://api.github.com/users/jackh726/events{/privacy}", "received_events_url": "https://api.github.com/users/jackh726/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "15495767324ec173a01b6ff0197b5c4fceb61d21", "url": "https://api.github.com/repos/rust-lang/rust/commits/15495767324ec173a01b6ff0197b5c4fceb61d21", "html_url": "https://github.com/rust-lang/rust/commit/15495767324ec173a01b6ff0197b5c4fceb61d21"}], "stats": {"total": 284, "additions": 146, "deletions": 138}, "files": [{"sha": "63f4d5dcd61da1a516e1776dced0f202df87f46b", "filename": "compiler/rustc_infer/src/infer/error_reporting/mod.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/62d0e4cba94713cd7e4149da73875654bedf75b7/compiler%2Frustc_infer%2Fsrc%2Finfer%2Ferror_reporting%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/62d0e4cba94713cd7e4149da73875654bedf75b7/compiler%2Frustc_infer%2Fsrc%2Finfer%2Ferror_reporting%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_infer%2Fsrc%2Finfer%2Ferror_reporting%2Fmod.rs?ref=62d0e4cba94713cd7e4149da73875654bedf75b7", "patch": "@@ -1584,9 +1584,10 @@ impl<'a, 'tcx> InferCtxt<'a, 'tcx> {\n             Variable(ty::error::ExpectedFound<Ty<'a>>),\n             Fixed(&'static str),\n         }\n-        let (expected_found, exp_found, is_simple_error) = match values {\n-            None => (None, Mismatch::Fixed(\"type\"), false),\n+        let (expected_found, exp_found, is_simple_error, values) = match values {\n+            None => (None, Mismatch::Fixed(\"type\"), false, None),\n             Some(values) => {\n+                let values = self.resolve_vars_if_possible(values);\n                 let (is_simple_error, exp_found) = match values {\n                     ValuePairs::Terms(infer::ExpectedFound {\n                         expected: ty::Term::Ty(expected),\n@@ -1614,7 +1615,7 @@ impl<'a, 'tcx> InferCtxt<'a, 'tcx> {\n                         return;\n                     }\n                 };\n-                (vals, exp_found, is_simple_error)\n+                (vals, exp_found, is_simple_error, Some(values))\n             }\n         };\n "}, {"sha": "166bd451199bb5c98b0b1cbc09b3cc9e48ea263a", "filename": "compiler/rustc_typeck/src/check/fn_ctxt/checks.rs", "status": "modified", "additions": 8, "deletions": 6, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/62d0e4cba94713cd7e4149da73875654bedf75b7/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Ffn_ctxt%2Fchecks.rs", "raw_url": "https://github.com/rust-lang/rust/raw/62d0e4cba94713cd7e4149da73875654bedf75b7/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Ffn_ctxt%2Fchecks.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Ffn_ctxt%2Fchecks.rs?ref=62d0e4cba94713cd7e4149da73875654bedf75b7", "patch": "@@ -394,6 +394,8 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n                 break 'errors;\n             }\n \n+            self.set_tainted_by_errors();\n+\n             // The algorithm here is inspired by levenshtein distance and longest common subsequence.\n             // We'll try to detect 4 different types of mistakes:\n             // - An extra parameter has been provided that doesn't satisfy *any* of the other inputs\n@@ -569,7 +571,7 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n                     self.emit_coerce_suggestions(\n                         &mut err,\n                         &provided_args[*input_idx],\n-                        final_arg_types[*input_idx].map(|ty| ty.0).unwrap(),\n+                        provided_ty,\n                         final_arg_types[*input_idx].map(|ty| ty.1).unwrap(),\n                         None,\n                         None,\n@@ -627,12 +629,12 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n                 match error {\n                     Error::Invalid(input_idx, compatibility) => {\n                         let expected_ty = expected_input_tys[input_idx];\n+                        let provided_ty = final_arg_types\n+                            .get(input_idx)\n+                            .and_then(|x| x.as_ref())\n+                            .map(|ty| ty.0)\n+                            .unwrap_or(tcx.ty_error());\n                         if let Compatibility::Incompatible(error) = &compatibility {\n-                            let provided_ty = final_arg_types\n-                                .get(input_idx)\n-                                .and_then(|x| x.as_ref())\n-                                .map(|ty| ty.0)\n-                                .unwrap_or(tcx.ty_error());\n                             let cause = &self.misc(\n                                 provided_args.get(input_idx).map(|i| i.span).unwrap_or(call_span),\n                             );"}, {"sha": "a67cf99283cfaaa1d6a5b3b67cc799643cf35e23", "filename": "src/test/ui/associated-types/associated-types-issue-20346.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Fassociated-types%2Fassociated-types-issue-20346.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Fassociated-types%2Fassociated-types-issue-20346.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fassociated-types%2Fassociated-types-issue-20346.stderr?ref=62d0e4cba94713cd7e4149da73875654bedf75b7", "patch": "@@ -12,8 +12,8 @@ note: expected this to be `Option<T>`\n    |\n LL |     type Item = T;\n    |                 ^\n-   = note: expected enum `Option<T>`\n-              found type `T`\n+   = note:        expected enum `Option<T>`\n+           found type parameter `T`\n note: required by a bound in `is_iterator_of`\n   --> $DIR/associated-types-issue-20346.rs:15:34\n    |"}, {"sha": "65533f93c94135e27367e78b8dcfe4e031c0e197", "filename": "src/test/ui/associated-types/higher-ranked-projection.bad.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Fassociated-types%2Fhigher-ranked-projection.bad.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Fassociated-types%2Fhigher-ranked-projection.bad.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fassociated-types%2Fhigher-ranked-projection.bad.stderr?ref=62d0e4cba94713cd7e4149da73875654bedf75b7", "patch": "@@ -5,7 +5,7 @@ LL |     foo(());\n    |     ^^^ lifetime mismatch\n    |\n    = note: expected reference `&'a ()`\n-                   found type `&()`\n+              found reference `&()`\n note: the lifetime requirement is introduced here\n   --> $DIR/higher-ranked-projection.rs:15:33\n    |"}, {"sha": "3be8c552063e7893e3e217a8d6cc470903fda009", "filename": "src/test/ui/async-await/generator-desc.stderr", "status": "modified", "additions": 16, "deletions": 11, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Fasync-await%2Fgenerator-desc.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Fasync-await%2Fgenerator-desc.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasync-await%2Fgenerator-desc.stderr?ref=62d0e4cba94713cd7e4149da73875654bedf75b7", "patch": "@@ -24,13 +24,18 @@ LL |     fun(one(), two());\n    |     |\n    |     arguments to this function are incorrect\n    |\n+note: while checking the return type of the `async fn`\n+  --> $DIR/generator-desc.rs:5:16\n+   |\n+LL | async fn one() {}\n+   |                ^ checked the `Output` of this `async fn`, expected opaque type\n note: while checking the return type of the `async fn`\n   --> $DIR/generator-desc.rs:6:16\n    |\n LL | async fn two() {}\n    |                ^ checked the `Output` of this `async fn`, found opaque type\n-   = note:     expected type `impl Future<Output = ()>` (opaque type at <$DIR/generator-desc.rs:5:16>)\n-           found opaque type `impl Future<Output = ()>` (opaque type at <$DIR/generator-desc.rs:6:16>)\n+   = note: expected opaque type `impl Future<Output = ()>` (opaque type at <$DIR/generator-desc.rs:5:16>)\n+              found opaque type `impl Future<Output = ()>` (opaque type at <$DIR/generator-desc.rs:6:16>)\n    = help: consider `await`ing on both `Future`s\n    = note: distinct uses of `impl Trait` result in different opaque types\n note: function defined here\n@@ -43,26 +48,26 @@ error[E0308]: mismatched types\n   --> $DIR/generator-desc.rs:14:26\n    |\n LL |     fun((async || {})(), (async || {})());\n-   |     ---                  ^^^^^^^^^^^^^^^ expected `async` closure body, found a different `async` closure body\n-   |     |\n+   |     ---           --     ^^^^^^^^^^^^^^^ expected `async` closure body, found a different `async` closure body\n+   |     |             |\n+   |     |             the expected `async` closure body\n    |     arguments to this function are incorrect\n    |\n   ::: $SRC_DIR/core/src/future/mod.rs:LL:COL\n    |\n LL | pub const fn from_generator<T>(gen: T) -> impl Future<Output = T::Return>\n-   |                                           ------------------------------- the found opaque type\n+   |                                           -------------------------------\n+   |                                           |\n+   |                                           the expected opaque type\n+   |                                           the found opaque type\n    |\n-   = note:     expected type `impl Future<Output = ()>` (`async` closure body)\n-           found opaque type `impl Future<Output = ()>` (`async` closure body)\n+   = note: expected opaque type `impl Future<Output = ()>` (`async` closure body)\n+              found opaque type `impl Future<Output = ()>` (`async` closure body)\n note: function defined here\n   --> $DIR/generator-desc.rs:8:4\n    |\n LL | fn fun<F: Future<Output = ()>>(f1: F, f2: F) {}\n    |    ^^^                         -----  -----\n-help: consider `await`ing on the `Future`\n-   |\n-LL |     fun((async || {})(), (async || {})().await);\n-   |                                         ++++++\n \n error: aborting due to 3 previous errors\n "}, {"sha": "1196601ace09087eb0433a807758f949eb2657d7", "filename": "src/test/ui/async-await/suggest-missing-await.stderr", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Fasync-await%2Fsuggest-missing-await.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Fasync-await%2Fsuggest-missing-await.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasync-await%2Fsuggest-missing-await.stderr?ref=62d0e4cba94713cd7e4149da73875654bedf75b7", "patch": "@@ -60,8 +60,13 @@ LL | |\n LL | |     };\n    | |_____- `if` and `else` have incompatible types\n    |\n-   = note:   expected type `impl Future<Output = ()>`\n-           found unit type `()`\n+note: while checking the return type of the `async fn`\n+  --> $DIR/suggest-missing-await.rs:18:18\n+   |\n+LL | async fn dummy() {}\n+   |                  ^ checked the `Output` of this `async fn`, expected opaque type\n+   = note: expected opaque type `impl Future<Output = ()>`\n+                found unit type `()`\n help: consider `await`ing on the `Future`\n    |\n LL |         dummy().await"}, {"sha": "eb934e7b72b084a6266998d1617113b2a1d586a8", "filename": "src/test/ui/borrowck/suggest-local-var-imm-and-mut.nll.stderr", "status": "removed", "additions": 0, "deletions": 22, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/15495767324ec173a01b6ff0197b5c4fceb61d21/src%2Ftest%2Fui%2Fborrowck%2Fsuggest-local-var-imm-and-mut.nll.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/15495767324ec173a01b6ff0197b5c4fceb61d21/src%2Ftest%2Fui%2Fborrowck%2Fsuggest-local-var-imm-and-mut.nll.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fborrowck%2Fsuggest-local-var-imm-and-mut.nll.stderr?ref=15495767324ec173a01b6ff0197b5c4fceb61d21", "patch": "@@ -1,22 +0,0 @@\n-error[E0502]: cannot borrow `*self` as mutable because it is also borrowed as immutable\n-  --> $DIR/suggest-local-var-imm-and-mut.rs:12:22\n-   |\n-LL |             self.foo(self.bar());\n-   |             ---------^^^^^^^^^^-\n-   |             |    |   |\n-   |             |    |   mutable borrow occurs here\n-   |             |    immutable borrow later used by call\n-   |             immutable borrow occurs here\n-\n-error[E0502]: cannot borrow `*self` as mutable because it is also borrowed as immutable\n-  --> $DIR/suggest-local-var-imm-and-mut.rs:24:29\n-   |\n-LL |             Self::foo(self, Self::bar(self));\n-   |             --------- ----  ^^^^^^^^^^^^^^^ mutable borrow occurs here\n-   |             |         |\n-   |             |         immutable borrow occurs here\n-   |             immutable borrow later used by call\n-\n-error: aborting due to 2 previous errors\n-\n-For more information about this error, try `rustc --explain E0502`."}, {"sha": "e25b33bbcdb06d2713f7d1d48118a686917e03d4", "filename": "src/test/ui/closures/closure_cap_coerce_many_fail.stderr", "status": "modified", "additions": 20, "deletions": 11, "changes": 31, "blob_url": "https://github.com/rust-lang/rust/blob/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Fclosures%2Fclosure_cap_coerce_many_fail.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Fclosures%2Fclosure_cap_coerce_many_fail.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fclosures%2Fclosure_cap_coerce_many_fail.stderr?ref=62d0e4cba94713cd7e4149da73875654bedf75b7", "patch": "@@ -11,24 +11,27 @@ LL | |         _ => unimplemented!(),\n LL | |     };\n    | |_____- `match` arms have incompatible types\n    |\n-   = note: expected type `fn(i32, i32) -> i32 {add}`\n-           found closure `[closure@$DIR/closure_cap_coerce_many_fail.rs:9:16: 9:43]`\n+   = note: expected fn item `fn(i32, i32) -> i32 {add}`\n+              found closure `[closure@$DIR/closure_cap_coerce_many_fail.rs:9:16: 9:43]`\n \n error[E0308]: `match` arms have incompatible types\n   --> $DIR/closure_cap_coerce_many_fail.rs:18:16\n    |\n LL |       let _ = match \"+\" {\n    |  _____________-\n LL | |         \"+\" => |a, b| (a + b) as i32,\n-   | |                --------------------- this is found to be of type `[closure@$DIR/closure_cap_coerce_many_fail.rs:17:16: 17:37]`\n+   | |                ---------------------\n+   | |                |\n+   | |                the expected closure\n+   | |                this is found to be of type `[closure@$DIR/closure_cap_coerce_many_fail.rs:17:16: 17:37]`\n LL | |         \"-\" => |a, b| (a - b + cap) as i32,\n    | |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected closure, found a different closure\n LL | |         _ => unimplemented!(),\n LL | |     };\n    | |_____- `match` arms have incompatible types\n    |\n-   = note: expected type `[closure@$DIR/closure_cap_coerce_many_fail.rs:17:16: 17:37]`\n-           found closure `[closure@$DIR/closure_cap_coerce_many_fail.rs:18:16: 18:43]`\n+   = note: expected closure `[closure@$DIR/closure_cap_coerce_many_fail.rs:17:16: 17:37]`\n+              found closure `[closure@$DIR/closure_cap_coerce_many_fail.rs:18:16: 18:43]`\n    = note: no two closures, even if identical, have the same type\n    = help: consider boxing your closure and/or using it as a trait object\n \n@@ -38,15 +41,18 @@ error[E0308]: `match` arms have incompatible types\n LL |       let _ = match \"+\" {\n    |  _____________-\n LL | |         \"+\" => |a, b| (a + b + cap) as i32,\n-   | |                --------------------------- this is found to be of type `[closure@$DIR/closure_cap_coerce_many_fail.rs:26:16: 26:43]`\n+   | |                ---------------------------\n+   | |                |\n+   | |                the expected closure\n+   | |                this is found to be of type `[closure@$DIR/closure_cap_coerce_many_fail.rs:26:16: 26:43]`\n LL | |         \"-\" => |a, b| (a - b) as i32,\n    | |                ^^^^^^^^^^^^^^^^^^^^^ expected closure, found a different closure\n LL | |         _ => unimplemented!(),\n LL | |     };\n    | |_____- `match` arms have incompatible types\n    |\n-   = note: expected type `[closure@$DIR/closure_cap_coerce_many_fail.rs:26:16: 26:43]`\n-           found closure `[closure@$DIR/closure_cap_coerce_many_fail.rs:27:16: 27:37]`\n+   = note: expected closure `[closure@$DIR/closure_cap_coerce_many_fail.rs:26:16: 26:43]`\n+              found closure `[closure@$DIR/closure_cap_coerce_many_fail.rs:27:16: 27:37]`\n    = note: no two closures, even if identical, have the same type\n    = help: consider boxing your closure and/or using it as a trait object\n \n@@ -56,15 +62,18 @@ error[E0308]: `match` arms have incompatible types\n LL |       let _ = match \"+\" {\n    |  _____________-\n LL | |         \"+\" => |a, b| (a + b + cap) as i32,\n-   | |                --------------------------- this is found to be of type `[closure@$DIR/closure_cap_coerce_many_fail.rs:34:16: 34:43]`\n+   | |                ---------------------------\n+   | |                |\n+   | |                the expected closure\n+   | |                this is found to be of type `[closure@$DIR/closure_cap_coerce_many_fail.rs:34:16: 34:43]`\n LL | |         \"-\" => |a, b| (a - b + cap) as i32,\n    | |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected closure, found a different closure\n LL | |         _ => unimplemented!(),\n LL | |     };\n    | |_____- `match` arms have incompatible types\n    |\n-   = note: expected type `[closure@$DIR/closure_cap_coerce_many_fail.rs:34:16: 34:43]`\n-           found closure `[closure@$DIR/closure_cap_coerce_many_fail.rs:35:16: 35:43]`\n+   = note: expected closure `[closure@$DIR/closure_cap_coerce_many_fail.rs:34:16: 34:43]`\n+              found closure `[closure@$DIR/closure_cap_coerce_many_fail.rs:35:16: 35:43]`\n    = note: no two closures, even if identical, have the same type\n    = help: consider boxing your closure and/or using it as a trait object\n "}, {"sha": "36551e5afc6c65e7f8cb59fb8cf59edabe8e4986", "filename": "src/test/ui/coercion/coerce-reborrow-multi-arg-fail.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Fcoercion%2Fcoerce-reborrow-multi-arg-fail.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Fcoercion%2Fcoerce-reborrow-multi-arg-fail.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoercion%2Fcoerce-reborrow-multi-arg-fail.stderr?ref=62d0e4cba94713cd7e4149da73875654bedf75b7", "patch": "@@ -6,8 +6,8 @@ LL |     test(&mut 7, &7);\n    |     |\n    |     arguments to this function are incorrect\n    |\n-   = note:   expected type `&mut {integer}`\n-           found reference `&{integer}`\n+   = note: expected mutable reference `&mut {integer}`\n+                      found reference `&{integer}`\n note: function defined here\n   --> $DIR/coerce-reborrow-multi-arg-fail.rs:1:4\n    |"}, {"sha": "950e0223e2201161bd8c5e459684fe53899d4840", "filename": "src/test/ui/destructuring-assignment/default-match-bindings-forbidden.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Fdestructuring-assignment%2Fdefault-match-bindings-forbidden.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Fdestructuring-assignment%2Fdefault-match-bindings-forbidden.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdestructuring-assignment%2Fdefault-match-bindings-forbidden.stderr?ref=62d0e4cba94713cd7e4149da73875654bedf75b7", "patch": "@@ -6,8 +6,8 @@ LL |     (x, y) = &(1, 2);\n    |     |\n    |     expected reference, found tuple\n    |\n-   = note: expected type `&({integer}, {integer})`\n-             found tuple `(_, _)`\n+   = note: expected reference `&({integer}, {integer})`\n+                  found tuple `(_, _)`\n \n error: aborting due to previous error\n "}, {"sha": "a3004cbbe1067cce9022f101dcf5e088c1d6365a", "filename": "src/test/ui/destructuring-assignment/tuple_destructure_fail.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Fdestructuring-assignment%2Ftuple_destructure_fail.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Fdestructuring-assignment%2Ftuple_destructure_fail.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdestructuring-assignment%2Ftuple_destructure_fail.stderr?ref=62d0e4cba94713cd7e4149da73875654bedf75b7", "patch": "@@ -14,8 +14,8 @@ LL |     (a, a, b) = (1, 2);\n    |     |\n    |     expected a tuple with 2 elements, found one with 3 elements\n    |\n-   = note: expected type `({integer}, {integer})`\n-             found tuple `(_, _, _)`\n+   = note: expected tuple `({integer}, {integer})`\n+              found tuple `(_, _, _)`\n \n error[E0070]: invalid left-hand side of assignment\n   --> $DIR/tuple_destructure_fail.rs:7:13\n@@ -33,8 +33,8 @@ LL |     (_,) = (1, 2);\n    |     |\n    |     expected a tuple with 2 elements, found one with 1 element\n    |\n-   = note: expected type `({integer}, {integer})`\n-             found tuple `(_,)`\n+   = note: expected tuple `({integer}, {integer})`\n+              found tuple `(_,)`\n \n error: aborting due to 4 previous errors\n "}, {"sha": "94cc89754db5fc615509c571e3794e7aab64672c", "filename": "src/test/ui/error-codes/E0502.nll.stderr", "status": "removed", "additions": 0, "deletions": 13, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/15495767324ec173a01b6ff0197b5c4fceb61d21/src%2Ftest%2Fui%2Ferror-codes%2FE0502.nll.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/15495767324ec173a01b6ff0197b5c4fceb61d21/src%2Ftest%2Fui%2Ferror-codes%2FE0502.nll.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferror-codes%2FE0502.nll.stderr?ref=15495767324ec173a01b6ff0197b5c4fceb61d21", "patch": "@@ -1,13 +0,0 @@\n-error[E0502]: cannot borrow `*a` as mutable because it is also borrowed as immutable\n-  --> $DIR/E0502.rs:4:5\n-   |\n-LL |     let ref y = a;\n-   |         ----- immutable borrow occurs here\n-LL |     bar(a);\n-   |     ^^^^^^ mutable borrow occurs here\n-LL |     y.use_ref();\n-   |     ----------- immutable borrow later used here\n-\n-error: aborting due to previous error\n-\n-For more information about this error, try `rustc --explain E0502`."}, {"sha": "1831e6cbf10507ecb102cb432c32feb1c856da16", "filename": "src/test/ui/fn/fn-item-type.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Ffn%2Ffn-item-type.rs", "raw_url": "https://github.com/rust-lang/rust/raw/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Ffn%2Ffn-item-type.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffn%2Ffn-item-type.rs?ref=62d0e4cba94713cd7e4149da73875654bedf75b7", "patch": "@@ -12,7 +12,7 @@ impl<T> Foo for T { /* `foo` is still default here */ }\n fn main() {\n     eq(foo::<u8>, bar::<u8>);\n     //~^ ERROR mismatched types\n-    //~| expected type `fn(_) -> _ {foo::<u8>}`\n+    //~| expected fn item `fn(_) -> _ {foo::<u8>}`\n     //~| found fn item `fn(_) -> _ {bar::<u8>}`\n     //~| expected fn item, found a different fn item\n     //~| different `fn` items always have unique types, even if their signatures are the same\n@@ -28,7 +28,6 @@ fn main() {\n \n     eq(bar::<String>, bar::<Vec<u8>>);\n     //~^ ERROR mismatched types\n-    //~| expected type `fn(_) -> _ {bar::<String>}`\n     //~| found fn item `fn(_) -> _ {bar::<Vec<u8>>}`\n     //~| expected struct `String`, found struct `Vec`\n     //~| different `fn` items always have unique types, even if their signatures are the same\n@@ -45,7 +44,6 @@ fn main() {\n \n     eq(foo::<u8>, bar::<u8> as fn(isize) -> isize);\n     //~^ ERROR mismatched types\n-    //~| expected type `fn(_) -> _ {foo::<u8>}`\n     //~| found fn pointer `fn(_) -> _`\n     //~| expected fn item, found fn pointer\n     //~| change the expected type to be function pointer"}, {"sha": "ecc6485d6d2b5c1d5375e33ac22d32cd5eede579", "filename": "src/test/ui/fn/fn-item-type.stderr", "status": "modified", "additions": 11, "deletions": 11, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Ffn%2Ffn-item-type.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Ffn%2Ffn-item-type.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffn%2Ffn-item-type.stderr?ref=62d0e4cba94713cd7e4149da73875654bedf75b7", "patch": "@@ -6,8 +6,8 @@ LL |     eq(foo::<u8>, bar::<u8>);\n    |     |\n    |     arguments to this function are incorrect\n    |\n-   = note: expected type `fn(_) -> _ {foo::<u8>}`\n-           found fn item `fn(_) -> _ {bar::<u8>}`\n+   = note: expected fn item `fn(_) -> _ {foo::<u8>}`\n+              found fn item `fn(_) -> _ {bar::<u8>}`\n    = note: different `fn` items always have unique types, even if their signatures are the same\n    = help: change the expected type to be function pointer `fn(isize) -> isize`\n    = help: if the expected type is due to type inference, cast the expected `fn` to a function pointer: `foo::<u8> as fn(isize) -> isize`\n@@ -25,8 +25,8 @@ LL |     eq(foo::<u8>, foo::<i8>);\n    |     |\n    |     arguments to this function are incorrect\n    |\n-   = note: expected type `fn(_) -> _ {foo::<u8>}`\n-           found fn item `fn(_) -> _ {foo::<i8>}`\n+   = note: expected fn item `fn(_) -> _ {foo::<u8>}`\n+              found fn item `fn(_) -> _ {foo::<i8>}`\n    = note: different `fn` items always have unique types, even if their signatures are the same\n    = help: change the expected type to be function pointer `fn(isize) -> isize`\n    = help: if the expected type is due to type inference, cast the expected `fn` to a function pointer: `foo::<u8> as fn(isize) -> isize`\n@@ -44,8 +44,8 @@ LL |     eq(bar::<String>, bar::<Vec<u8>>);\n    |     |\n    |     arguments to this function are incorrect\n    |\n-   = note: expected type `fn(_) -> _ {bar::<String>}`\n-           found fn item `fn(_) -> _ {bar::<Vec<u8>>}`\n+   = note: expected fn item `fn(_) -> _ {bar::<String>}`\n+              found fn item `fn(_) -> _ {bar::<Vec<u8>>}`\n    = note: different `fn` items always have unique types, even if their signatures are the same\n    = help: change the expected type to be function pointer `fn(isize) -> isize`\n    = help: if the expected type is due to type inference, cast the expected `fn` to a function pointer: `bar::<String> as fn(isize) -> isize`\n@@ -56,15 +56,15 @@ LL | fn eq<T>(x: T, y: T) { }\n    |    ^^    ----  ----\n \n error[E0308]: mismatched types\n-  --> $DIR/fn-item-type.rs:39:26\n+  --> $DIR/fn-item-type.rs:38:26\n    |\n LL |     eq(<u8 as Foo>::foo, <u16 as Foo>::foo);\n    |     --                   ^^^^^^^^^^^^^^^^^ expected `u8`, found `u16`\n    |     |\n    |     arguments to this function are incorrect\n    |\n-   = note: expected type `fn() {<u8 as Foo>::foo}`\n-           found fn item `fn() {<u16 as Foo>::foo}`\n+   = note: expected fn item `fn() {<u8 as Foo>::foo}`\n+              found fn item `fn() {<u16 as Foo>::foo}`\n    = note: different `fn` items always have unique types, even if their signatures are the same\n    = help: change the expected type to be function pointer `fn()`\n    = help: if the expected type is due to type inference, cast the expected `fn` to a function pointer: `<u8 as Foo>::foo as fn()`\n@@ -75,14 +75,14 @@ LL | fn eq<T>(x: T, y: T) { }\n    |    ^^    ----  ----\n \n error[E0308]: mismatched types\n-  --> $DIR/fn-item-type.rs:46:19\n+  --> $DIR/fn-item-type.rs:45:19\n    |\n LL |     eq(foo::<u8>, bar::<u8> as fn(isize) -> isize);\n    |     --            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected fn item, found fn pointer\n    |     |\n    |     arguments to this function are incorrect\n    |\n-   = note:    expected type `fn(_) -> _ {foo::<u8>}`\n+   = note: expected fn item `fn(_) -> _ {foo::<u8>}`\n            found fn pointer `fn(_) -> _`\n    = help: change the expected type to be function pointer `fn(isize) -> isize`\n    = help: if the expected type is due to type inference, cast the expected `fn` to a function pointer: `foo::<u8> as fn(isize) -> isize`"}, {"sha": "d78a5929a896d8c2f3621a60c32ce283911078a8", "filename": "src/test/ui/generator/type-mismatch-signature-deduction.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Fgenerator%2Ftype-mismatch-signature-deduction.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Fgenerator%2Ftype-mismatch-signature-deduction.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fgenerator%2Ftype-mismatch-signature-deduction.stderr?ref=62d0e4cba94713cd7e4149da73875654bedf75b7", "patch": "@@ -4,7 +4,7 @@ error[E0308]: mismatched types\n LL |         5\n    |         ^ expected enum `Result`, found integer\n    |\n-   = note: expected type `Result<{integer}, _>`\n+   = note: expected enum `Result<{integer}, _>`\n               found type `{integer}`\n note: return type inferred to be `Result<{integer}, _>` here\n   --> $DIR/type-mismatch-signature-deduction.rs:9:20"}, {"sha": "b961b16b6f6efefd16d5d1c3cec50609a1684497", "filename": "src/test/ui/let-else/let-else-non-diverging.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Flet-else%2Flet-else-non-diverging.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Flet-else%2Flet-else-non-diverging.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flet-else%2Flet-else-non-diverging.stderr?ref=62d0e4cba94713cd7e4149da73875654bedf75b7", "patch": "@@ -5,7 +5,7 @@ LL |     let Some(x) = Some(1) else { Some(2) };\n    |                                ^^^^^^^^^^^ expected `!`, found enum `Option`\n    |\n    = note: expected type `!`\n-              found type `Option<{integer}>`\n+              found enum `Option<{integer}>`\n    = help: try adding a diverging expression, such as `return` or `panic!(..)`\n    = help: ...or use `match` instead of `let...else`\n \n@@ -20,8 +20,8 @@ LL | |         }\n LL | |     };\n    | |_____^ expected `!`, found `()`\n    |\n-   = note: expected type `!`\n-              found type `()`\n+   = note:   expected type `!`\n+           found unit type `()`\n    = help: try adding a diverging expression, such as `return` or `panic!(..)`\n    = help: ...or use `match` instead of `let...else`\n \n@@ -35,7 +35,7 @@ LL | |     };\n    | |_____^ expected `!`, found enum `Option`\n    |\n    = note: expected type `!`\n-              found type `Option<{integer}>`\n+              found enum `Option<{integer}>`\n    = help: try adding a diverging expression, such as `return` or `panic!(..)`\n    = help: ...or use `match` instead of `let...else`\n "}, {"sha": "368782c1e0d01c43ce3e4a2d27dc7d134580add8", "filename": "src/test/ui/or-patterns/already-bound-name.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2For-patterns%2Falready-bound-name.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2For-patterns%2Falready-bound-name.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2For-patterns%2Falready-bound-name.stderr?ref=62d0e4cba94713cd7e4149da73875654bedf75b7", "patch": "@@ -92,7 +92,7 @@ LL |     let (B(A(a, _) | B(a)) | A(a, A(a, _) | B(a))) = B(B(1));\n    |              first introduced with type `{integer}` here\n    |\n    = note: expected type `{integer}`\n-              found type `E<{integer}>`\n+              found enum `E<{integer}>`\n    = note: a binding must have the same type in all alternatives\n \n error: aborting due to 15 previous errors"}, {"sha": "f6367ef8234058bc23deae3ea0bbc1bed3cfcd5a", "filename": "src/test/ui/or-patterns/inconsistent-modes.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2For-patterns%2Finconsistent-modes.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2For-patterns%2Finconsistent-modes.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2For-patterns%2Finconsistent-modes.stderr?ref=62d0e4cba94713cd7e4149da73875654bedf75b7", "patch": "@@ -57,8 +57,8 @@ LL |     let (Ok(ref a) | Err(ref mut a)): Result<&u8, &mut u8> = Ok(&0);\n    |             |            types differ in mutability\n    |             first introduced with type `&&u8` here\n    |\n-   = note: expected type `&&u8`\n-              found type `&mut &mut u8`\n+   = note:      expected reference `&&u8`\n+           found mutable reference `&mut &mut u8`\n    = note: a binding must have the same type in all alternatives\n \n error[E0308]: mismatched types\n@@ -70,8 +70,8 @@ LL |     let (Ok((ref a, b)) | Err((ref mut a, ref b))) = Ok((0, &0));\n    |              |                 types differ in mutability\n    |              first introduced with type `&{integer}` here\n    |\n-   = note: expected type `&{integer}`\n-              found type `&mut _`\n+   = note:      expected reference `&{integer}`\n+           found mutable reference `&mut _`\n    = note: a binding must have the same type in all alternatives\n \n error: aborting due to 9 previous errors"}, {"sha": "d0979b23f60cd4955c96218995b3678b198462ab", "filename": "src/test/ui/parser/recover-range-pats.stderr", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Fparser%2Frecover-range-pats.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Fparser%2Frecover-range-pats.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Frecover-range-pats.stderr?ref=62d0e4cba94713cd7e4149da73875654bedf75b7", "patch": "@@ -316,6 +316,9 @@ LL |     if let X.. .0 = 0 {}\n    |            |   |\n    |            |   expected integer, found floating-point number\n    |            this is of type `u8`\n+   |\n+   = note: expected type `u8`\n+              found type `{float}`\n \n error[E0029]: only `char` and numeric types are allowed in range patterns\n   --> $DIR/recover-range-pats.rs:33:12\n@@ -350,6 +353,9 @@ LL |     if let X..=.0 = 0 {}\n    |            |   |\n    |            |   expected integer, found floating-point number\n    |            this is of type `u8`\n+   |\n+   = note: expected type `u8`\n+              found type `{float}`\n \n error[E0029]: only `char` and numeric types are allowed in range patterns\n   --> $DIR/recover-range-pats.rs:54:12\n@@ -384,6 +390,9 @@ LL |     if let X... .0 = 0 {}\n    |            |    |\n    |            |    expected integer, found floating-point number\n    |            this is of type `u8`\n+   |\n+   = note: expected type `u8`\n+              found type `{float}`\n \n error[E0029]: only `char` and numeric types are allowed in range patterns\n   --> $DIR/recover-range-pats.rs:73:12"}, {"sha": "70a64446f6a7d8e522957223cd28e99b47a77a81", "filename": "src/test/ui/reify-intrinsic.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Freify-intrinsic.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Freify-intrinsic.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Freify-intrinsic.stderr?ref=62d0e4cba94713cd7e4149da73875654bedf75b7", "patch": "@@ -25,8 +25,8 @@ error[E0308]: cannot coerce intrinsics to function pointers\n LL |         std::intrinsics::unlikely,\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^ cannot coerce intrinsics to function pointers\n    |\n-   = note: expected type `extern \"rust-intrinsic\" fn(_) -> _ {likely}`\n-           found fn item `extern \"rust-intrinsic\" fn(_) -> _ {unlikely}`\n+   = note: expected fn item `extern \"rust-intrinsic\" fn(_) -> _ {likely}`\n+              found fn item `extern \"rust-intrinsic\" fn(_) -> _ {unlikely}`\n \n error: aborting due to 3 previous errors\n "}, {"sha": "96c1869b4e726c3aaf679ac7c1d95be863cb7d06", "filename": "src/test/ui/resolve/resolve-inconsistent-binding-mode.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Fresolve%2Fresolve-inconsistent-binding-mode.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Fresolve%2Fresolve-inconsistent-binding-mode.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fresolve%2Fresolve-inconsistent-binding-mode.stderr?ref=62d0e4cba94713cd7e4149da73875654bedf75b7", "patch": "@@ -54,8 +54,8 @@ LL |         Opts::A(ref mut i) | Opts::B(ref i) => {}\n    |                 |\n    |                 first introduced with type `&mut isize` here\n    |\n-   = note: expected type `&mut isize`\n-              found type `&isize`\n+   = note: expected mutable reference `&mut isize`\n+                      found reference `&isize`\n    = note: in the same arm, a binding must have the same type in all alternatives\n \n error: aborting due to 6 previous errors"}, {"sha": "11bc170cdfa1ba5b5b9adc7dafcb092db0b63a8d", "filename": "src/test/ui/rfc-2005-default-binding-mode/lit.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Frfc-2005-default-binding-mode%2Flit.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Frfc-2005-default-binding-mode%2Flit.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2005-default-binding-mode%2Flit.stderr?ref=62d0e4cba94713cd7e4149da73875654bedf75b7", "patch": "@@ -6,8 +6,8 @@ LL |     match &s {\n LL |             \"abc\" => true,\n    |             ^^^^^ expected `&str`, found `str`\n    |\n-   = note:   expected type `&&str`\n-           found reference `&'static str`\n+   = note: expected reference `&&str`\n+              found reference `&'static str`\n \n error[E0308]: mismatched types\n   --> $DIR/lit.rs:16:9\n@@ -17,8 +17,8 @@ LL |     match &s {\n LL |         b\"abc\" => true,\n    |         ^^^^^^ expected `&[u8]`, found array `[u8; 3]`\n    |\n-   = note:   expected type `&&[u8]`\n-           found reference `&'static [u8; 3]`\n+   = note: expected reference `&&[u8]`\n+              found reference `&'static [u8; 3]`\n \n error: aborting due to 2 previous errors\n "}, {"sha": "fae474cedb886831c23d45c676942da10da6d1a2", "filename": "src/test/ui/suggestions/issue-81839.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Fsuggestions%2Fissue-81839.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Fsuggestions%2Fissue-81839.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Fissue-81839.stderr?ref=62d0e4cba94713cd7e4149da73875654bedf75b7", "patch": "@@ -19,8 +19,8 @@ note: while checking the return type of the `async fn`\n    |\n LL |     pub async fn answer_str(&self, _s: &str) -> Test {\n    |                                                 ^^^^ checked the `Output` of this `async fn`, found opaque type\n-   = note:     expected type `()`\n-           found opaque type `impl Future<Output = Test>`\n+   = note: expected unit type `()`\n+            found opaque type `impl Future<Output = Test>`\n \n error: aborting due to previous error\n "}, {"sha": "8c8abe047c2abd7413844f3d940eadf9ffff06d2", "filename": "src/test/ui/suggestions/match-prev-arm-needing-semi.rs", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Fsuggestions%2Fmatch-prev-arm-needing-semi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Fsuggestions%2Fmatch-prev-arm-needing-semi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Fmatch-prev-arm-needing-semi.rs?ref=62d0e4cba94713cd7e4149da73875654bedf75b7", "patch": "@@ -16,6 +16,9 @@ fn extra_semicolon() {\n async fn async_dummy() {} //~ NOTE checked the `Output` of this `async fn`, found opaque type\n //~| NOTE while checking the return type of the `async fn`\n //~| NOTE in this expansion of desugaring of `async` block or function\n+//~| NOTE checked the `Output` of this `async fn`, expected opaque type\n+//~| NOTE while checking the return type of the `async fn`\n+//~| NOTE in this expansion of desugaring of `async` block or function\n async fn async_dummy2() {} //~ NOTE checked the `Output` of this `async fn`, found opaque type\n //~| NOTE checked the `Output` of this `async fn`, found opaque type\n //~| NOTE while checking the return type of the `async fn`\n@@ -31,7 +34,7 @@ async fn async_extra_semicolon_same() {\n         }\n         false => async_dummy(), //~ ERROR `match` arms have incompatible types\n         //~^ NOTE expected `()`, found opaque type\n-        //~| NOTE expected type `()`\n+        //~| NOTE expected unit type `()`\n         //~| HELP consider `await`ing on the `Future`\n     };\n }\n@@ -44,7 +47,7 @@ async fn async_extra_semicolon_different() {\n         }\n         false => async_dummy2(), //~ ERROR `match` arms have incompatible types\n         //~^ NOTE expected `()`, found opaque type\n-        //~| NOTE expected type `()`\n+        //~| NOTE expected unit type `()`\n         //~| HELP consider `await`ing on the `Future`\n     };\n }\n@@ -55,7 +58,7 @@ async fn async_different_futures() {\n         //~| HELP consider `await`ing on both `Future`s\n         false => async_dummy2(), //~ ERROR `match` arms have incompatible types\n         //~^ NOTE expected opaque type, found a different opaque type\n-        //~| NOTE expected type `impl Future<Output = ()>`\n+        //~| NOTE expected opaque type `impl Future<Output = ()>`\n         //~| NOTE distinct uses of `impl Trait` result in different opaque types\n     };\n }"}, {"sha": "4c4b782bd6fb17047767617efbe86e64c2906b3d", "filename": "src/test/ui/suggestions/match-prev-arm-needing-semi.stderr", "status": "modified", "additions": 16, "deletions": 11, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Fsuggestions%2Fmatch-prev-arm-needing-semi.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Fsuggestions%2Fmatch-prev-arm-needing-semi.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Fmatch-prev-arm-needing-semi.stderr?ref=62d0e4cba94713cd7e4149da73875654bedf75b7", "patch": "@@ -1,5 +1,5 @@\n error[E0308]: `match` arms have incompatible types\n-  --> $DIR/match-prev-arm-needing-semi.rs:32:18\n+  --> $DIR/match-prev-arm-needing-semi.rs:35:18\n    |\n LL |       let _ = match true {\n    |  _____________-\n@@ -20,8 +20,8 @@ note: while checking the return type of the `async fn`\n    |\n LL | async fn async_dummy() {}\n    |                        ^ checked the `Output` of this `async fn`, found opaque type\n-   = note:     expected type `()`\n-           found opaque type `impl Future<Output = ()>`\n+   = note: expected unit type `()`\n+            found opaque type `impl Future<Output = ()>`\n help: consider `await`ing on the `Future`\n    |\n LL |         false => async_dummy().await,\n@@ -33,7 +33,7 @@ LL +             async_dummy()\n    | \n \n error[E0308]: `match` arms have incompatible types\n-  --> $DIR/match-prev-arm-needing-semi.rs:45:18\n+  --> $DIR/match-prev-arm-needing-semi.rs:48:18\n    |\n LL |       let _ = match true {\n    |  _____________-\n@@ -50,12 +50,12 @@ LL | |     };\n    | |_____- `match` arms have incompatible types\n    |\n note: while checking the return type of the `async fn`\n-  --> $DIR/match-prev-arm-needing-semi.rs:19:25\n+  --> $DIR/match-prev-arm-needing-semi.rs:22:25\n    |\n LL | async fn async_dummy2() {}\n    |                         ^ checked the `Output` of this `async fn`, found opaque type\n-   = note:     expected type `()`\n-           found opaque type `impl Future<Output = ()>`\n+   = note: expected unit type `()`\n+            found opaque type `impl Future<Output = ()>`\n help: consider `await`ing on the `Future`\n    |\n LL |         false => async_dummy2().await,\n@@ -69,7 +69,7 @@ LL ~         false => Box::new(async_dummy2()),\n    |\n \n error[E0308]: `match` arms have incompatible types\n-  --> $DIR/match-prev-arm-needing-semi.rs:56:18\n+  --> $DIR/match-prev-arm-needing-semi.rs:59:18\n    |\n LL |       let _ = match true {\n    |  _____________-\n@@ -84,12 +84,17 @@ LL | |     };\n    | |_____- `match` arms have incompatible types\n    |\n note: while checking the return type of the `async fn`\n-  --> $DIR/match-prev-arm-needing-semi.rs:19:25\n+  --> $DIR/match-prev-arm-needing-semi.rs:16:24\n+   |\n+LL | async fn async_dummy() {}\n+   |                        ^ checked the `Output` of this `async fn`, expected opaque type\n+note: while checking the return type of the `async fn`\n+  --> $DIR/match-prev-arm-needing-semi.rs:22:25\n    |\n LL | async fn async_dummy2() {}\n    |                         ^ checked the `Output` of this `async fn`, found opaque type\n-   = note:     expected type `impl Future<Output = ()>` (opaque type at <$DIR/match-prev-arm-needing-semi.rs:16:24>)\n-           found opaque type `impl Future<Output = ()>` (opaque type at <$DIR/match-prev-arm-needing-semi.rs:19:25>)\n+   = note: expected opaque type `impl Future<Output = ()>` (opaque type at <$DIR/match-prev-arm-needing-semi.rs:16:24>)\n+              found opaque type `impl Future<Output = ()>` (opaque type at <$DIR/match-prev-arm-needing-semi.rs:22:25>)\n    = note: distinct uses of `impl Trait` result in different opaque types\n help: consider `await`ing on both `Future`s\n    |"}, {"sha": "be6fc261562ebc690b412eef6743340aac3444b8", "filename": "src/test/ui/suggestions/match-with-different-arm-types-as-stmt-instead-of-expr.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Fsuggestions%2Fmatch-with-different-arm-types-as-stmt-instead-of-expr.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Fsuggestions%2Fmatch-with-different-arm-types-as-stmt-instead-of-expr.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Fmatch-with-different-arm-types-as-stmt-instead-of-expr.stderr?ref=62d0e4cba94713cd7e4149da73875654bedf75b7", "patch": "@@ -20,8 +20,8 @@ LL | |         _ => Box::new(Bar),\n LL | |     };\n    | |_____- `match` arms have incompatible types\n    |\n-   = note: expected type `Box<Baz>`\n-            found struct `Box<Bar>`\n+   = note: expected struct `Box<Baz>`\n+              found struct `Box<Bar>`\n note: you might have meant to return the `match` expression\n   --> $DIR/match-with-different-arm-types-as-stmt-instead-of-expr.rs:27:6\n    |"}, {"sha": "133ffb058739250011df2fe7c15174346a1213d9", "filename": "src/test/ui/suggestions/opaque-type-error.stderr", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Fsuggestions%2Fopaque-type-error.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Fsuggestions%2Fopaque-type-error.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Fopaque-type-error.stderr?ref=62d0e4cba94713cd7e4149da73875654bedf75b7", "patch": "@@ -1,6 +1,9 @@\n error[E0308]: `if` and `else` have incompatible types\n   --> $DIR/opaque-type-error.rs:20:9\n    |\n+LL |   fn thing_one() -> impl Future<Output = Result<(), ()>> {\n+   |                     ------------------------------------ the expected opaque type\n+...\n LL |   fn thing_two() -> impl Future<Output = Result<(), ()>> {\n    |                     ------------------------------------ the found opaque type\n ...\n@@ -13,8 +16,8 @@ LL | |         thing_two()\n LL | |     }.await\n    | |_____- `if` and `else` have incompatible types\n    |\n-   = note:     expected type `impl Future<Output = Result<(), ()>>` (opaque type at <$DIR/opaque-type-error.rs:8:19>)\n-           found opaque type `impl Future<Output = Result<(), ()>>` (opaque type at <$DIR/opaque-type-error.rs:12:19>)\n+   = note: expected opaque type `impl Future<Output = Result<(), ()>>` (opaque type at <$DIR/opaque-type-error.rs:8:19>)\n+              found opaque type `impl Future<Output = Result<(), ()>>` (opaque type at <$DIR/opaque-type-error.rs:12:19>)\n    = note: distinct uses of `impl Trait` result in different opaque types\n help: consider `await`ing on both `Future`s\n    |"}, {"sha": "0ee44921bf5f8c82a5621e813813bda2b7619b8d", "filename": "src/test/ui/traits/issue-52893.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Ftraits%2Fissue-52893.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Ftraits%2Fissue-52893.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftraits%2Fissue-52893.stderr?ref=62d0e4cba94713cd7e4149da73875654bedf75b7", "patch": "@@ -9,8 +9,8 @@ LL |         builder.push(output);\n    |                 |\n    |                 arguments to this function are incorrect\n    |\n-   = note: expected type `F`\n-            found struct `Class<P>`\n+   = note: expected type parameter `F`\n+                      found struct `Class<P>`\n note: associated function defined here\n   --> $DIR/issue-52893.rs:11:8\n    |"}, {"sha": "b9d51d21e9af246fb08c27bc6180bbec657ecc0d", "filename": "src/test/ui/unsized/box-instead-of-dyn-fn.stderr", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Funsized%2Fbox-instead-of-dyn-fn.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Funsized%2Fbox-instead-of-dyn-fn.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funsized%2Fbox-instead-of-dyn-fn.stderr?ref=62d0e4cba94713cd7e4149da73875654bedf75b7", "patch": "@@ -3,16 +3,19 @@ error[E0308]: `if` and `else` have incompatible types\n    |\n LL | /     if a % 2 == 0 {\n LL | |         move || println!(\"{a}\")\n-   | |         ----------------------- expected because of this\n+   | |         -----------------------\n+   | |         |\n+   | |         the expected closure\n+   | |         expected because of this\n LL | |     } else {\n LL | |         Box::new(move || println!(\"{}\", b))\n    | |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected closure, found struct `Box`\n LL | |\n LL | |     }\n    | |_____- `if` and `else` have incompatible types\n    |\n-   = note: expected type `[closure@$DIR/box-instead-of-dyn-fn.rs:8:9: 8:32]`\n-            found struct `Box<[closure@$DIR/box-instead-of-dyn-fn.rs:10:18: 10:43]>`\n+   = note: expected closure `[closure@$DIR/box-instead-of-dyn-fn.rs:8:9: 8:32]`\n+               found struct `Box<[closure@$DIR/box-instead-of-dyn-fn.rs:10:18: 10:43]>`\n \n error[E0746]: return type cannot have an unboxed trait object\n   --> $DIR/box-instead-of-dyn-fn.rs:5:56"}, {"sha": "3f297d222dce7ab01059317a55118871300f2b8c", "filename": "src/test/ui/wf/wf-unsafe-trait-obj-match.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Fwf%2Fwf-unsafe-trait-obj-match.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/62d0e4cba94713cd7e4149da73875654bedf75b7/src%2Ftest%2Fui%2Fwf%2Fwf-unsafe-trait-obj-match.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fwf%2Fwf-unsafe-trait-obj-match.stderr?ref=62d0e4cba94713cd7e4149da73875654bedf75b7", "patch": "@@ -9,8 +9,8 @@ LL | |         None => &R,\n LL | |     }\n    | |_____- `match` arms have incompatible types\n    |\n-   = note:   expected type `&S`\n-           found reference `&R`\n+   = note: expected reference `&S`\n+              found reference `&R`\n \n error[E0038]: the trait `Trait` cannot be made into an object\n   --> $DIR/wf-unsafe-trait-obj-match.rs:26:21"}]}