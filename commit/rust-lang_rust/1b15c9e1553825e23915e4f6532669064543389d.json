{"sha": "1b15c9e1553825e23915e4f6532669064543389d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFiMTVjOWUxNTUzODI1ZTIzOTE1ZTRmNjUzMjY2OTA2NDU0MzM4OWQ=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-09-01T22:55:39Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-09-01T22:55:39Z"}, "message": "Remove estr conversion functions. Issue #855", "tree": {"sha": "d93228ded804db75c86e10a8f89405e4506ee123", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d93228ded804db75c86e10a8f89405e4506ee123"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1b15c9e1553825e23915e4f6532669064543389d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1b15c9e1553825e23915e4f6532669064543389d", "html_url": "https://github.com/rust-lang/rust/commit/1b15c9e1553825e23915e4f6532669064543389d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1b15c9e1553825e23915e4f6532669064543389d/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f07a328c165b9d6fc8438a5ce54666ed1afad7ad", "url": "https://api.github.com/repos/rust-lang/rust/commits/f07a328c165b9d6fc8438a5ce54666ed1afad7ad", "html_url": "https://github.com/rust-lang/rust/commit/f07a328c165b9d6fc8438a5ce54666ed1afad7ad"}], "stats": {"total": 38, "additions": 0, "deletions": 38}, "files": [{"sha": "662d0d0c2285aa21e0f359d30187e4692556a741", "filename": "src/lib/istr.rs", "status": "modified", "additions": 0, "deletions": 38, "changes": 38, "blob_url": "https://github.com/rust-lang/rust/blob/1b15c9e1553825e23915e4f6532669064543389d/src%2Flib%2Fistr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1b15c9e1553825e23915e4f6532669064543389d/src%2Flib%2Fistr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib%2Fistr.rs?ref=1b15c9e1553825e23915e4f6532669064543389d", "patch": "@@ -6,48 +6,10 @@ char_len, char_at, bytes, is_ascii, shift_byte, pop_byte, unsafe_from_byte,\n unsafe_from_bytes, from_char, char_range_at, str_from_cstr, sbuf,\n as_buf, push_byte, utf8_char_width, safe_slice;\n \n-export from_estr, to_estr, from_estrs, to_estrs;\n-\n native \"rust\" mod rustrt {\n     fn rust_istr_push(s: &mutable istr, ch: u8);\n }\n \n-fn from_estr(s: &str) -> istr {\n-    let s2 = ~\"\";\n-    for u in s {\n-        push_byte(s2, u);\n-    }\n-    ret s2;\n-}\n-\n-fn to_estr(s: &istr) -> str {\n-    if byte_len(s) == 0u { ret \"\" };\n-    let v: [u8] = unsafe::reinterpret_cast(s);\n-    let vlen = vec::len(v);\n-    assert vlen > 0u;\n-    vec::unsafe::set_len(v, vlen - 1u);\n-    let res = str::unsafe_from_bytes(v);\n-    vec::unsafe::set_len(v, vlen);\n-    unsafe::leak(v);\n-    ret res;\n-}\n-\n-fn from_estrs(ss: &[str]) -> [istr] {\n-    let ss2 = [];\n-    for s in ss {\n-        ss2 += [from_estr(s)];\n-    }\n-    ret ss2;\n-}\n-\n-fn to_estrs(ss: &[istr]) -> [str] {\n-    let ss2 = [];\n-    for s in ss {\n-        ss2 += [to_estr(s)];\n-    }\n-    ret ss2;\n-}\n-\n fn eq(a: &istr, b: &istr) -> bool { a == b }\n \n fn lteq(a: &istr, b: &istr) -> bool { a <= b }"}]}