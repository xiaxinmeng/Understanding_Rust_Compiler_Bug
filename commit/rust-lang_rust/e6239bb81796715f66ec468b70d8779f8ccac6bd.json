{"sha": "e6239bb81796715f66ec468b70d8779f8ccac6bd", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU2MjM5YmI4MTc5NjcxNWY2NmVjNDY4YjcwZDg3NzlmOGNjYWM2YmQ=", "commit": {"author": {"name": "gnzlbg", "email": "gonzalobg88@gmail.com", "date": "2019-09-24T15:02:01Z"}, "committer": {"name": "gnzlbg", "email": "gonzalobg88@gmail.com", "date": "2019-09-24T15:02:01Z"}, "message": "Add some more tests", "tree": {"sha": "71f11accb3c9db14b69e09e793a6a5e1cab25592", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/71f11accb3c9db14b69e09e793a6a5e1cab25592"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e6239bb81796715f66ec468b70d8779f8ccac6bd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e6239bb81796715f66ec468b70d8779f8ccac6bd", "html_url": "https://github.com/rust-lang/rust/commit/e6239bb81796715f66ec468b70d8779f8ccac6bd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e6239bb81796715f66ec468b70d8779f8ccac6bd/comments", "author": {"login": "gnzlbg", "id": 904614, "node_id": "MDQ6VXNlcjkwNDYxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/904614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gnzlbg", "html_url": "https://github.com/gnzlbg", "followers_url": "https://api.github.com/users/gnzlbg/followers", "following_url": "https://api.github.com/users/gnzlbg/following{/other_user}", "gists_url": "https://api.github.com/users/gnzlbg/gists{/gist_id}", "starred_url": "https://api.github.com/users/gnzlbg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gnzlbg/subscriptions", "organizations_url": "https://api.github.com/users/gnzlbg/orgs", "repos_url": "https://api.github.com/users/gnzlbg/repos", "events_url": "https://api.github.com/users/gnzlbg/events{/privacy}", "received_events_url": "https://api.github.com/users/gnzlbg/received_events", "type": "User", "site_admin": false}, "committer": {"login": "gnzlbg", "id": 904614, "node_id": "MDQ6VXNlcjkwNDYxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/904614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gnzlbg", "html_url": "https://github.com/gnzlbg", "followers_url": "https://api.github.com/users/gnzlbg/followers", "following_url": "https://api.github.com/users/gnzlbg/following{/other_user}", "gists_url": "https://api.github.com/users/gnzlbg/gists{/gist_id}", "starred_url": "https://api.github.com/users/gnzlbg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gnzlbg/subscriptions", "organizations_url": "https://api.github.com/users/gnzlbg/orgs", "repos_url": "https://api.github.com/users/gnzlbg/repos", "events_url": "https://api.github.com/users/gnzlbg/events{/privacy}", "received_events_url": "https://api.github.com/users/gnzlbg/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f0bbd2b71c4861efc11599fe763f80b5de4490cd", "url": "https://api.github.com/repos/rust-lang/rust/commits/f0bbd2b71c4861efc11599fe763f80b5de4490cd", "html_url": "https://github.com/rust-lang/rust/commit/f0bbd2b71c4861efc11599fe763f80b5de4490cd"}], "stats": {"total": 323, "additions": 296, "deletions": 27}, "files": [{"sha": "136965bf68abf9d1b94f2bca89bc28d0470f774b", "filename": "src/test/ui/consts/const-eval/simd/insert_extract.rs", "status": "modified", "additions": 38, "deletions": 9, "changes": 47, "blob_url": "https://github.com/rust-lang/rust/blob/e6239bb81796715f66ec468b70d8779f8ccac6bd/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fsimd%2Finsert_extract.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e6239bb81796715f66ec468b70d8779f8ccac6bd/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fsimd%2Finsert_extract.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fsimd%2Finsert_extract.rs?ref=e6239bb81796715f66ec468b70d8779f8ccac6bd", "patch": "@@ -5,20 +5,49 @@\n #![allow(non_camel_case_types)]\n \n #[repr(simd)] struct i8x1(i8);\n+#[repr(simd)] struct u16x2(u16, u16);\n+#[repr(simd)] struct f32x3(f32, f32, f32);\n \n extern \"platform-intrinsic\" {\n     fn simd_insert<T, U>(x: T, idx: u32, val: U) -> T;\n     fn simd_extract<T, U>(x: T, idx: u32) -> U;\n }\n \n-const fn foo(x: i8x1) -> i8 {\n-    unsafe { simd_insert(x, 0_u32, 42_i8) }.0\n-}\n-\n fn main() {\n-    const V: i8x1 = i8x1(13);\n-    const X: i8 = foo(V);\n-    const Y: i8 = unsafe { simd_extract(V, 0) };\n-    assert_eq!(X, 42);\n-    assert_eq!(Y, 13);\n+    {\n+        const U: i8x1 = i8x1(13);\n+        const V: i8x1 = unsafe { simd_insert(U, 0_u32, 42_i8) };\n+        const X0: i8 = V.0;\n+        const Y0: i8 = unsafe { simd_extract(V, 0) };\n+        assert_eq!(X0, 42);\n+        assert_eq!(Y0, 42);\n+    }\n+    {\n+        const U: u16x2 = u16x2(13, 14);\n+        const V: u16x2 = unsafe { simd_insert(U, 1_u32, 42_u16) };\n+        const X0: u16 = V.0;\n+        const X1: u16 = V.1;\n+        const Y0: u16 = unsafe { simd_extract(V, 0) };\n+        const Y1: u16 = unsafe { simd_extract(V, 1) };\n+        assert_eq!(X0, 13);\n+        assert_eq!(X1, 42);\n+        assert_eq!(Y0, 13);\n+        assert_eq!(Y1, 42);\n+    }\n+    {\n+        const U: f32x3 = f32x3(13., 14., 15.);\n+        const V: f32x3 = unsafe { simd_insert(U, 1_u32, 42_f32) };\n+        const X0: f32 = V.0;\n+        const X1: f32 = V.1;\n+        const X2: f32 = V.2;\n+        const Y0: f32 = unsafe { simd_extract(V, 0) };\n+        const Y1: f32 = unsafe { simd_extract(V, 1) };\n+        const Y2: f32 = unsafe { simd_extract(V, 2) };\n+        assert_eq!(X0, 13.);\n+        assert_eq!(X1, 42.);\n+        assert_eq!(X2, 15.);\n+        assert_eq!(Y0, 13.);\n+        assert_eq!(Y1, 42.);\n+        assert_eq!(Y2, 15.);\n+    }\n }"}, {"sha": "8975241403e7427c86f3ee418e0fdc7738ff5389", "filename": "src/test/ui/consts/const-eval/simd/insert_extract.stderr", "status": "modified", "additions": 258, "deletions": 18, "changes": 276, "blob_url": "https://github.com/rust-lang/rust/blob/e6239bb81796715f66ec468b70d8779f8ccac6bd/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fsimd%2Finsert_extract.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/e6239bb81796715f66ec468b70d8779f8ccac6bd/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fsimd%2Finsert_extract.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fsimd%2Finsert_extract.stderr?ref=e6239bb81796715f66ec468b70d8779f8ccac6bd", "patch": "@@ -1,48 +1,288 @@\n warning: skipping const checks\n-  --> $DIR/insert_extract.rs:22:5\n+  --> $DIR/insert_extract.rs:22:9\n    |\n-LL |     assert_eq!(X, 42);\n-   |     ^^^^^^^^^^^^^^^^^^\n+LL |         assert_eq!(X0, 42);\n+   |         ^^^^^^^^^^^^^^^^^^^\n    |\n    = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n \n warning: skipping const checks\n-  --> $DIR/insert_extract.rs:22:5\n+  --> $DIR/insert_extract.rs:22:9\n    |\n-LL |     assert_eq!(X, 42);\n-   |     ^^^^^^^^^^^^^^^^^^\n+LL |         assert_eq!(X0, 42);\n+   |         ^^^^^^^^^^^^^^^^^^^\n    |\n    = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n \n warning: skipping const checks\n-  --> $DIR/insert_extract.rs:22:5\n+  --> $DIR/insert_extract.rs:22:9\n    |\n-LL |     assert_eq!(X, 42);\n-   |     ^^^^^^^^^^^^^^^^^^\n+LL |         assert_eq!(X0, 42);\n+   |         ^^^^^^^^^^^^^^^^^^^\n    |\n    = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n \n warning: skipping const checks\n-  --> $DIR/insert_extract.rs:23:5\n+  --> $DIR/insert_extract.rs:23:9\n    |\n-LL |     assert_eq!(Y, 13);\n-   |     ^^^^^^^^^^^^^^^^^^\n+LL |         assert_eq!(Y0, 42);\n+   |         ^^^^^^^^^^^^^^^^^^^\n    |\n    = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n \n warning: skipping const checks\n-  --> $DIR/insert_extract.rs:23:5\n+  --> $DIR/insert_extract.rs:23:9\n    |\n-LL |     assert_eq!(Y, 13);\n-   |     ^^^^^^^^^^^^^^^^^^\n+LL |         assert_eq!(Y0, 42);\n+   |         ^^^^^^^^^^^^^^^^^^^\n    |\n    = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n \n warning: skipping const checks\n-  --> $DIR/insert_extract.rs:23:5\n+  --> $DIR/insert_extract.rs:23:9\n    |\n-LL |     assert_eq!(Y, 13);\n-   |     ^^^^^^^^^^^^^^^^^^\n+LL |         assert_eq!(Y0, 42);\n+   |         ^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n+\n+warning: skipping const checks\n+  --> $DIR/insert_extract.rs:32:9\n+   |\n+LL |         assert_eq!(X0, 13);\n+   |         ^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n+\n+warning: skipping const checks\n+  --> $DIR/insert_extract.rs:32:9\n+   |\n+LL |         assert_eq!(X0, 13);\n+   |         ^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n+\n+warning: skipping const checks\n+  --> $DIR/insert_extract.rs:32:9\n+   |\n+LL |         assert_eq!(X0, 13);\n+   |         ^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n+\n+warning: skipping const checks\n+  --> $DIR/insert_extract.rs:33:9\n+   |\n+LL |         assert_eq!(X1, 42);\n+   |         ^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n+\n+warning: skipping const checks\n+  --> $DIR/insert_extract.rs:33:9\n+   |\n+LL |         assert_eq!(X1, 42);\n+   |         ^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n+\n+warning: skipping const checks\n+  --> $DIR/insert_extract.rs:33:9\n+   |\n+LL |         assert_eq!(X1, 42);\n+   |         ^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n+\n+warning: skipping const checks\n+  --> $DIR/insert_extract.rs:34:9\n+   |\n+LL |         assert_eq!(Y0, 13);\n+   |         ^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n+\n+warning: skipping const checks\n+  --> $DIR/insert_extract.rs:34:9\n+   |\n+LL |         assert_eq!(Y0, 13);\n+   |         ^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n+\n+warning: skipping const checks\n+  --> $DIR/insert_extract.rs:34:9\n+   |\n+LL |         assert_eq!(Y0, 13);\n+   |         ^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n+\n+warning: skipping const checks\n+  --> $DIR/insert_extract.rs:35:9\n+   |\n+LL |         assert_eq!(Y1, 42);\n+   |         ^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n+\n+warning: skipping const checks\n+  --> $DIR/insert_extract.rs:35:9\n+   |\n+LL |         assert_eq!(Y1, 42);\n+   |         ^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n+\n+warning: skipping const checks\n+  --> $DIR/insert_extract.rs:35:9\n+   |\n+LL |         assert_eq!(Y1, 42);\n+   |         ^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n+\n+warning: skipping const checks\n+  --> $DIR/insert_extract.rs:46:9\n+   |\n+LL |         assert_eq!(X0, 13.);\n+   |         ^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n+\n+warning: skipping const checks\n+  --> $DIR/insert_extract.rs:46:9\n+   |\n+LL |         assert_eq!(X0, 13.);\n+   |         ^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n+\n+warning: skipping const checks\n+  --> $DIR/insert_extract.rs:46:9\n+   |\n+LL |         assert_eq!(X0, 13.);\n+   |         ^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n+\n+warning: skipping const checks\n+  --> $DIR/insert_extract.rs:47:9\n+   |\n+LL |         assert_eq!(X1, 42.);\n+   |         ^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n+\n+warning: skipping const checks\n+  --> $DIR/insert_extract.rs:47:9\n+   |\n+LL |         assert_eq!(X1, 42.);\n+   |         ^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n+\n+warning: skipping const checks\n+  --> $DIR/insert_extract.rs:47:9\n+   |\n+LL |         assert_eq!(X1, 42.);\n+   |         ^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n+\n+warning: skipping const checks\n+  --> $DIR/insert_extract.rs:48:9\n+   |\n+LL |         assert_eq!(X2, 15.);\n+   |         ^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n+\n+warning: skipping const checks\n+  --> $DIR/insert_extract.rs:48:9\n+   |\n+LL |         assert_eq!(X2, 15.);\n+   |         ^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n+\n+warning: skipping const checks\n+  --> $DIR/insert_extract.rs:48:9\n+   |\n+LL |         assert_eq!(X2, 15.);\n+   |         ^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n+\n+warning: skipping const checks\n+  --> $DIR/insert_extract.rs:49:9\n+   |\n+LL |         assert_eq!(Y0, 13.);\n+   |         ^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n+\n+warning: skipping const checks\n+  --> $DIR/insert_extract.rs:49:9\n+   |\n+LL |         assert_eq!(Y0, 13.);\n+   |         ^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n+\n+warning: skipping const checks\n+  --> $DIR/insert_extract.rs:49:9\n+   |\n+LL |         assert_eq!(Y0, 13.);\n+   |         ^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n+\n+warning: skipping const checks\n+  --> $DIR/insert_extract.rs:50:9\n+   |\n+LL |         assert_eq!(Y1, 42.);\n+   |         ^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n+\n+warning: skipping const checks\n+  --> $DIR/insert_extract.rs:50:9\n+   |\n+LL |         assert_eq!(Y1, 42.);\n+   |         ^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n+\n+warning: skipping const checks\n+  --> $DIR/insert_extract.rs:50:9\n+   |\n+LL |         assert_eq!(Y1, 42.);\n+   |         ^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n+\n+warning: skipping const checks\n+  --> $DIR/insert_extract.rs:51:9\n+   |\n+LL |         assert_eq!(Y2, 15.);\n+   |         ^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n+\n+warning: skipping const checks\n+  --> $DIR/insert_extract.rs:51:9\n+   |\n+LL |         assert_eq!(Y2, 15.);\n+   |         ^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n+\n+warning: skipping const checks\n+  --> $DIR/insert_extract.rs:51:9\n+   |\n+LL |         assert_eq!(Y2, 15.);\n+   |         ^^^^^^^^^^^^^^^^^^^^\n    |\n    = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n "}]}