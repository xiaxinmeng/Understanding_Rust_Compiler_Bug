{"sha": "9a481d1ecf0f11b4a5bd0220eec3fd93c997b033", "node_id": "C_kwDOAAsO6NoAKDlhNDgxZDFlY2YwZjExYjRhNWJkMDIyMGVlYzNmZDkzYzk5N2IwMzM", "commit": {"author": {"name": "Swarnim Arun", "email": "swarnimarun11@gmail.com", "date": "2023-02-27T05:29:20Z"}, "committer": {"name": "Swarnim Arun", "email": "swarnimarun11@gmail.com", "date": "2023-02-27T05:29:20Z"}, "message": "add: clean api to get `raw_ptr` type", "tree": {"sha": "83360a84cbd4a2818b9c0d51942b52e924ba3646", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/83360a84cbd4a2818b9c0d51942b52e924ba3646"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9a481d1ecf0f11b4a5bd0220eec3fd93c997b033", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQRtWkKktGmLIuf0kZHE3S4SSIbC0gUCY/w/sAAKCRDE3S4SSIbC\n0tB2AQDtRalkNsVFO217zJI3Dppk97Q6r1wSrv1hb7M1GrDfOgD+KFnmZ8WOYRnd\n0SfSQap5/u8trY+e67nSVI/ezHHGFgI=\n=9dnM\n-----END PGP SIGNATURE-----", "payload": "tree 83360a84cbd4a2818b9c0d51942b52e924ba3646\nparent 4e29820f6d9880606a403e7bec6e91312e7f0575\nauthor Swarnim Arun <swarnimarun11@gmail.com> 1677475760 +0530\ncommitter Swarnim Arun <swarnimarun11@gmail.com> 1677475760 +0530\n\nadd: clean api to get `raw_ptr` type\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9a481d1ecf0f11b4a5bd0220eec3fd93c997b033", "html_url": "https://github.com/rust-lang/rust/commit/9a481d1ecf0f11b4a5bd0220eec3fd93c997b033", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9a481d1ecf0f11b4a5bd0220eec3fd93c997b033/comments", "author": {"login": "swarnimarun", "id": 19930870, "node_id": "MDQ6VXNlcjE5OTMwODcw", "avatar_url": "https://avatars.githubusercontent.com/u/19930870?v=4", "gravatar_id": "", "url": "https://api.github.com/users/swarnimarun", "html_url": "https://github.com/swarnimarun", "followers_url": "https://api.github.com/users/swarnimarun/followers", "following_url": "https://api.github.com/users/swarnimarun/following{/other_user}", "gists_url": "https://api.github.com/users/swarnimarun/gists{/gist_id}", "starred_url": "https://api.github.com/users/swarnimarun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/swarnimarun/subscriptions", "organizations_url": "https://api.github.com/users/swarnimarun/orgs", "repos_url": "https://api.github.com/users/swarnimarun/repos", "events_url": "https://api.github.com/users/swarnimarun/events{/privacy}", "received_events_url": "https://api.github.com/users/swarnimarun/received_events", "type": "User", "site_admin": false}, "committer": {"login": "swarnimarun", "id": 19930870, "node_id": "MDQ6VXNlcjE5OTMwODcw", "avatar_url": "https://avatars.githubusercontent.com/u/19930870?v=4", "gravatar_id": "", "url": "https://api.github.com/users/swarnimarun", "html_url": "https://github.com/swarnimarun", "followers_url": "https://api.github.com/users/swarnimarun/followers", "following_url": "https://api.github.com/users/swarnimarun/following{/other_user}", "gists_url": "https://api.github.com/users/swarnimarun/gists{/gist_id}", "starred_url": "https://api.github.com/users/swarnimarun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/swarnimarun/subscriptions", "organizations_url": "https://api.github.com/users/swarnimarun/orgs", "repos_url": "https://api.github.com/users/swarnimarun/repos", "events_url": "https://api.github.com/users/swarnimarun/events{/privacy}", "received_events_url": "https://api.github.com/users/swarnimarun/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4e29820f6d9880606a403e7bec6e91312e7f0575", "url": "https://api.github.com/repos/rust-lang/rust/commits/4e29820f6d9880606a403e7bec6e91312e7f0575", "html_url": "https://github.com/rust-lang/rust/commit/4e29820f6d9880606a403e7bec6e91312e7f0575"}], "stats": {"total": 8, "additions": 8, "deletions": 0}, "files": [{"sha": "fba61a2d5b51c32d22495351c888f408b2cee3c9", "filename": "crates/hir/src/lib.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/9a481d1ecf0f11b4a5bd0220eec3fd93c997b033/crates%2Fhir%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9a481d1ecf0f11b4a5bd0220eec3fd93c997b033/crates%2Fhir%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir%2Fsrc%2Flib.rs?ref=9a481d1ecf0f11b4a5bd0220eec3fd93c997b033", "patch": "@@ -3190,6 +3190,14 @@ impl Type {\n         matches!(self.ty.kind(Interner), TyKind::Raw(..))\n     }\n \n+    pub fn as_raw_ptr_ty(&self) -> Option<Type> {\n+        if let TyKind::Raw(_, ty) = self.ty.kind(Interner) {\n+            Some(self.derived(ty.clone()))\n+        } else {\n+            None\n+        }\n+    }\n+\n     pub fn contains_unknown(&self) -> bool {\n         // FIXME: When we get rid of `ConstScalar::Unknown`, we can just look at precomputed\n         // `TypeFlags` in `TyData`."}]}