{"sha": "1975142c9792bc8488fa5768f40ef53ad8301fbf", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE5NzUxNDJjOTc5MmJjODQ4OGZhNTc2OGY0MGVmNTNhZDgzMDFmYmY=", "commit": {"author": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2020-12-30T20:56:51Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-12-30T20:56:51Z"}, "message": "Rollup merge of #80424 - jyn514:bootstrap-cleanup, r=Mark-Simulacrum\n\nDon't give an error when creating a file for the first time\n\nPreviously, `os.remove` would always give a FileNotFound error the first\ntime you called it, causing bootstrap to make unnecessary copies. This\nnow only calls `remove()` if the file exists, avoiding the unnecessary\nerror.\n\nThis is a pretty small cleanup but I think it's useful. Taken from https://github.com/rust-lang/rust/pull/79540.", "tree": {"sha": "904aba7009a77f7dcc900e7637e7a74621a69b98", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/904aba7009a77f7dcc900e7637e7a74621a69b98"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1975142c9792bc8488fa5768f40ef53ad8301fbf", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJf7OmTCRBK7hj4Ov3rIwAAdHIIAJ5VGpVaAc6ytYMetjySXqBX\ndf7mSNJv8fQms8P1u7PAaIwRR3wyxXugP0jFaFniFf4B3bLw9yeJXcEm+6LseRfi\njbhq0IzI75+et3JrTsaqxgC4LgIp4hb9cAK68c8biIxHFqK+VD49f2jJXArZqvG4\nnLdTvPVMSb7S288V9VNIO9uj6bVwAezM8XjKkF5Bx8WoRQLt1n8c4QSuPrefmSrn\nUcD54cYL7d93NG6bRhIMWww3bj2EN9n8UIJe4x7UK+11+2m+DU28LxVStpuIUUwx\ni9rMnWUd7LXFWDKkrbgNkEW489NXrA4fqnO5m8PvMbS+7TIhE5bEBbIcCW9TijY=\n=bW7V\n-----END PGP SIGNATURE-----\n", "payload": "tree 904aba7009a77f7dcc900e7637e7a74621a69b98\nparent 3d7cdf667e5f1129d7948bf487ac342696ca8c31\nparent 7ac02bddc7349fb2268c88e0adc4a0f1854fb531\nauthor Mara Bos <m-ou.se@m-ou.se> 1609361811 +0000\ncommitter GitHub <noreply@github.com> 1609361811 +0000\n\nRollup merge of #80424 - jyn514:bootstrap-cleanup, r=Mark-Simulacrum\n\nDon't give an error when creating a file for the first time\n\nPreviously, `os.remove` would always give a FileNotFound error the first\ntime you called it, causing bootstrap to make unnecessary copies. This\nnow only calls `remove()` if the file exists, avoiding the unnecessary\nerror.\n\nThis is a pretty small cleanup but I think it's useful. Taken from https://github.com/rust-lang/rust/pull/79540.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1975142c9792bc8488fa5768f40ef53ad8301fbf", "html_url": "https://github.com/rust-lang/rust/commit/1975142c9792bc8488fa5768f40ef53ad8301fbf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1975142c9792bc8488fa5768f40ef53ad8301fbf/comments", "author": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3d7cdf667e5f1129d7948bf487ac342696ca8c31", "url": "https://api.github.com/repos/rust-lang/rust/commits/3d7cdf667e5f1129d7948bf487ac342696ca8c31", "html_url": "https://github.com/rust-lang/rust/commit/3d7cdf667e5f1129d7948bf487ac342696ca8c31"}, {"sha": "7ac02bddc7349fb2268c88e0adc4a0f1854fb531", "url": "https://api.github.com/repos/rust-lang/rust/commits/7ac02bddc7349fb2268c88e0adc4a0f1854fb531", "html_url": "https://github.com/rust-lang/rust/commit/7ac02bddc7349fb2268c88e0adc4a0f1854fb531"}], "stats": {"total": 6, "additions": 4, "deletions": 2}, "files": [{"sha": "b8bae69d063309cb82ef44ba4cb559a868a3fe10", "filename": "src/bootstrap/bootstrap.py", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/1975142c9792bc8488fa5768f40ef53ad8301fbf/src%2Fbootstrap%2Fbootstrap.py", "raw_url": "https://github.com/rust-lang/rust/raw/1975142c9792bc8488fa5768f40ef53ad8301fbf/src%2Fbootstrap%2Fbootstrap.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbootstrap.py?ref=1975142c9792bc8488fa5768f40ef53ad8301fbf", "patch": "@@ -351,11 +351,13 @@ def output(filepath):\n     with open(tmp, 'w') as f:\n         yield f\n     try:\n-        os.remove(filepath)  # PermissionError/OSError on Win32 if in use\n-        os.rename(tmp, filepath)\n+        if os.path.exists(filepath):\n+            os.remove(filepath)  # PermissionError/OSError on Win32 if in use\n     except OSError:\n         shutil.copy2(tmp, filepath)\n         os.remove(tmp)\n+        return\n+    os.rename(tmp, filepath)\n \n \n class RustBuild(object):"}]}