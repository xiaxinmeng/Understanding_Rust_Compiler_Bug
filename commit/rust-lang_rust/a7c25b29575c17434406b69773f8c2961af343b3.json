{"sha": "a7c25b29575c17434406b69773f8c2961af343b3", "node_id": "C_kwDOAAsO6NoAKGE3YzI1YjI5NTc1YzE3NDM0NDA2YjY5NzczZjhjMjk2MWFmMzQzYjM", "commit": {"author": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2022-09-25T20:09:22Z"}, "committer": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2022-09-25T20:48:17Z"}, "message": "rustdoc: clean up `.out-of-band`/`.in-band` CSS\n\n* Remove the `float: right` fallback from the main header, which hasn't\n  been needed since IE11 support was dropped.\n\n* Remove `in-band` from low-level headers, which hasn't been needed since\n  `.rightside` switched to `float: right` in\n  593d6d1cb15c55c88319470dabb40126c7b7f1e2\n\n* Remove unreachable `.in-band > code, .in-band > .code-header` CSS, since\n  the `in-band` class was attached to the `code-header` itself, not nested\n  directly below it.\n\n* Use `rem` instead of `em` for code header margins.\n\n* This results in a slight change in spacing around impls and item-info,\n  but since it makes it more consistent with the way methods are presented,\n  it's probably fine.", "tree": {"sha": "6e52a7dfca8b06af9c6ab390bfb8efdf5df9e18e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6e52a7dfca8b06af9c6ab390bfb8efdf5df9e18e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a7c25b29575c17434406b69773f8c2961af343b3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a7c25b29575c17434406b69773f8c2961af343b3", "html_url": "https://github.com/rust-lang/rust/commit/a7c25b29575c17434406b69773f8c2961af343b3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a7c25b29575c17434406b69773f8c2961af343b3/comments", "author": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "committer": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f3fafbb006ee98635874f73e480655912b465e65", "url": "https://api.github.com/repos/rust-lang/rust/commits/f3fafbb006ee98635874f73e480655912b465e65", "html_url": "https://github.com/rust-lang/rust/commit/f3fafbb006ee98635874f73e480655912b465e65"}], "stats": {"total": 38, "additions": 16, "deletions": 22}, "files": [{"sha": "75ac11a3a886ecba25b2ac99bb774be88a9af799", "filename": "src/librustdoc/html/render/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a7c25b29575c17434406b69773f8c2961af343b3/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a7c25b29575c17434406b69773f8c2961af343b3/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs?ref=a7c25b29575c17434406b69773f8c2961af343b3", "patch": "@@ -1790,7 +1790,7 @@ pub(crate) fn render_impl_summary(\n     write!(w, \"<section id=\\\"{}\\\" class=\\\"impl has-srclink\\\"{}>\", id, aliases);\n     render_rightside(w, cx, &i.impl_item, containing_item, RenderMode::Normal);\n     write!(w, \"<a href=\\\"#{}\\\" class=\\\"anchor\\\"></a>\", id);\n-    write!(w, \"<h3 class=\\\"code-header in-band\\\">\");\n+    write!(w, \"<h3 class=\\\"code-header\\\">\");\n \n     if let Some(use_absolute) = use_absolute {\n         write!(w, \"{}\", inner_impl.print(use_absolute, cx));"}, {"sha": "28dc4bf30108eba811c72c91ee4606f5c8818071", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 7, "deletions": 12, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/a7c25b29575c17434406b69773f8c2961af343b3/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/a7c25b29575c17434406b69773f8c2961af343b3/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=a7c25b29575c17434406b69773f8c2961af343b3", "patch": "@@ -176,8 +176,8 @@ h4.code-header {\n \tborder-bottom-style: none;\n \tmargin: 0;\n \tpadding: 0;\n-\tmargin-top: 0.6em;\n-\tmargin-bottom: 0.4em;\n+\tmargin-top: 0.6rem;\n+\tmargin-bottom: 0.4rem;\n }\n .impl,\n .impl-items .method,\n@@ -658,18 +658,17 @@ h2.location a {\n \toverflow-x: auto;\n }\n \n-.content .out-of-band {\n+.out-of-band {\n \tflex-grow: 0;\n \tfont-size: 1.125rem;\n \tfont-weight: normal;\n-\tfloat: right;\n }\n \n .method > .code-header, .trait-impl > .code-header {\n \tdisplay: block;\n }\n \n-.content .in-band {\n+.in-band {\n \tflex-grow: 1;\n \tmargin: 0px;\n \tpadding: 0px;\n@@ -682,10 +681,6 @@ h2.location a {\n \tbackground-color: var(--main-background-color);\n }\n \n-.in-band > code, .in-band > .code-header {\n-\tdisplay: inline-block;\n-}\n-\n .docblock code, .docblock-short code,\n pre, .rustdoc.source .example-wrap {\n \tbackground-color: var(--code-block-background-color);\n@@ -1731,13 +1726,13 @@ in storage.js plus the media query with (min-width: 701px)\n \t\tflex-direction: column;\n \t}\n \n-\t.content .out-of-band {\n+\t.out-of-band {\n \t\ttext-align: left;\n \t\tmargin-left: initial;\n \t\tpadding: initial;\n \t}\n \n-\t.content .out-of-band .since::before {\n+\t.out-of-band .since::before {\n \t\tcontent: \"Since \";\n \t}\n \n@@ -1969,7 +1964,7 @@ in storage.js plus the media query with (min-width: 701px)\n }\n \n @media print {\n-\tnav.sidebar, nav.sub, .content .out-of-band, a.srclink, #copy-path,\n+\tnav.sidebar, nav.sub, .out-of-band, a.srclink, #copy-path,\n \tdetails.rustdoc-toggle[open] > summary::before, details.rustdoc-toggle > summary::before,\n \tdetails.rustdoc-toggle.top-doc > summary {\n \t\tdisplay: none;"}, {"sha": "c9674f11a5ecf9ca47f356c04946fbcd2dcd52b6", "filename": "src/librustdoc/html/static/js/main.js", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a7c25b29575c17434406b69773f8c2961af343b3/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/a7c25b29575c17434406b69773f8c2961af343b3/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fmain.js?ref=a7c25b29575c17434406b69773f8c2961af343b3", "patch": "@@ -555,7 +555,6 @@ function loadCss(cssFileName) {\n                 const code = document.createElement(\"h3\");\n                 code.innerHTML = struct[TEXT_IDX];\n                 addClass(code, \"code-header\");\n-                addClass(code, \"in-band\");\n \n                 onEachLazy(code.getElementsByTagName(\"a\"), elem => {\n                     const href = elem.getAttribute(\"href\");"}, {"sha": "4f01f1a162457d7cea3a6d54d6d965bea03e3106", "filename": "src/test/rustdoc-gui/headers-color.goml", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/a7c25b29575c17434406b69773f8c2961af343b3/src%2Ftest%2Frustdoc-gui%2Fheaders-color.goml", "raw_url": "https://github.com/rust-lang/rust/raw/a7c25b29575c17434406b69773f8c2961af343b3/src%2Ftest%2Frustdoc-gui%2Fheaders-color.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fheaders-color.goml?ref=a7c25b29575c17434406b69773f8c2961af343b3", "patch": "@@ -19,7 +19,7 @@ assert-css: (\n )\n assert-css: (\n     \".impl .code-header\",\n-    {\"color\": \"rgb(230, 225, 207)\", \"background-color\": \"rgb(15, 20, 25)\"},\n+    {\"color\": \"rgb(230, 225, 207)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n     ALL,\n )\n \n@@ -58,7 +58,7 @@ assert-css: (\n )\n assert-css: (\n     \".impl .code-header\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"background-color\": \"rgb(53, 53, 53)\"},\n+    {\"color\": \"rgb(221, 221, 221)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n     ALL,\n )\n \n@@ -95,7 +95,7 @@ assert-css: (\n )\n assert-css: (\n     \".impl .code-header\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"background-color\": \"rgb(255, 255, 255)\"},\n+    {\"color\": \"rgb(0, 0, 0)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n     ALL,\n )\n "}, {"sha": "dc3b2e122680c4e4a6433099b2580e7d2c842f16", "filename": "src/test/rustdoc-gui/implementors.goml", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a7c25b29575c17434406b69773f8c2961af343b3/src%2Ftest%2Frustdoc-gui%2Fimplementors.goml", "raw_url": "https://github.com/rust-lang/rust/raw/a7c25b29575c17434406b69773f8c2961af343b3/src%2Ftest%2Frustdoc-gui%2Fimplementors.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fimplementors.goml?ref=a7c25b29575c17434406b69773f8c2961af343b3", "patch": "@@ -8,23 +8,23 @@ assert-count: (\"#implementors-list .impl\", 2)\n assert: (\"#implementors-list .impl:nth-child(1) > a.anchor\")\n assert-attribute: (\"#implementors-list .impl:nth-child(1)\", {\"id\": \"impl-Whatever-for-Struct\"})\n assert-attribute: (\"#implementors-list .impl:nth-child(1) > a.anchor\", {\"href\": \"#impl-Whatever-for-Struct\"})\n-assert: \"#implementors-list .impl:nth-child(1) > .code-header.in-band\"\n+assert: \"#implementors-list .impl:nth-child(1) > .code-header\"\n \n assert: (\"#implementors-list .impl:nth-child(2) > a.anchor\")\n assert-attribute: (\"#implementors-list .impl:nth-child(2)\", {\"id\": \"impl-Whatever-1\"})\n assert-attribute: (\"#implementors-list .impl:nth-child(2) > a.anchor\", {\"href\": \"#impl-Whatever-1\"})\n-assert: \"#implementors-list .impl:nth-child(2) > .code-header.in-band\"\n+assert: \"#implementors-list .impl:nth-child(2) > .code-header\"\n \n goto: file://|DOC_PATH|/test_docs/struct.HasEmptyTraits.html\n compare-elements-position-near-false: (\n     \"#impl-EmptyTrait1-for-HasEmptyTraits\",\n     \"#impl-EmptyTrait2-for-HasEmptyTraits\",\n-    {\"y\": 30},\n+    {\"y\": 34.1875},\n )\n compare-elements-position-near: (\n     \"#impl-EmptyTrait3-for-HasEmptyTraits h3\",\n     \"#impl-EmptyTrait3-for-HasEmptyTraits .item-info\",\n-    {\"y\": 30},\n+    {\"y\": 34.1875},\n )\n \n // Now check that re-exports work correctly."}, {"sha": "9797f196c554586ca97d3b3fb5abde323ca8861e", "filename": "src/test/rustdoc-gui/src-font-size.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a7c25b29575c17434406b69773f8c2961af343b3/src%2Ftest%2Frustdoc-gui%2Fsrc-font-size.goml", "raw_url": "https://github.com/rust-lang/rust/raw/a7c25b29575c17434406b69773f8c2961af343b3/src%2Ftest%2Frustdoc-gui%2Fsrc-font-size.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsrc-font-size.goml?ref=a7c25b29575c17434406b69773f8c2961af343b3", "patch": "@@ -5,7 +5,7 @@ goto: file://|DOC_PATH|/test_docs/struct.Foo.html\n show-text: true\n // Check the impl headers.\n assert-css: (\".impl.has-srclink .srclink\", {\"font-size\": \"16px\"}, ALL)\n-assert-css: (\".impl.has-srclink .code-header.in-band\", {\"font-size\": \"18px\"}, ALL)\n+assert-css: (\".impl.has-srclink .code-header\", {\"font-size\": \"18px\"}, ALL)\n // Check the impl items.\n assert-css: (\".impl-items .has-srclink .srclink\", {\"font-size\": \"16px\"}, ALL)\n assert-css: (\".impl-items .has-srclink .code-header\", {\"font-size\": \"16px\"}, ALL)"}]}