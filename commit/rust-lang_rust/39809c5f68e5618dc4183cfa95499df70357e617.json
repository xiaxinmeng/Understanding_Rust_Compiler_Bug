{"sha": "39809c5f68e5618dc4183cfa95499df70357e617", "node_id": "C_kwDOAAsO6NoAKDM5ODA5YzVmNjhlNTYxOGRjNDE4M2NmYTk1NDk5ZGY3MDM1N2U2MTc", "commit": {"author": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2022-08-15T23:21:39Z"}, "committer": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2022-08-18T00:20:42Z"}, "message": "Replace a try_fold in rustc_transmute to use ControlFlow instead of Result", "tree": {"sha": "c981a1527f301ea6ea5f5dd953687d5f788a1871", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c981a1527f301ea6ea5f5dd953687d5f788a1871"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/39809c5f68e5618dc4183cfa95499df70357e617", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEERijF2Cz/ZdaBZKeK+boUO5X/bYIFAmL9hdoACgkQ+boUO5X/\nbYKjCQ//amJPOzih+yDjD2RERIblo4aLoqiBw/c8wqt9i5NoYp9UZnw1+Rsxuj/P\nFfZrJ/do3YN2TaXdfFJf1/ze/FtGryHT0Fcl1HpKD1BMLzhy753mVtU5joEwpshM\nQJJe/9Qj6k98jOPMQGx+ZR0k+ZnCmDfAkUJz/fqp0eBWdlt6p66ehjpAtudqEvTX\n3MIl1miAd3ncYoCYHV1ubpt/mvCZjWMgCK+AVhqjE+Ke30J8FZ1bYRrDIguLsjD/\nYJgMk/pRDjyWyCLuhqx9XPdk8qNc/YqaenuquKKcGPgeNLi30MIWFOEuu2JlfASs\nk2Co5m8sjJ3ZplDzQ2LRRwtu9/7XZWWRculrEm6sU7CDAhfdcn1OeChoV1+YeGU+\ndUi/q+C8VHUNdbGNKhfHfL6v6EycCDFA7IkZmKqv78EmBrfrxC6AKuUyR6lUK8Ni\nGZyv6khkMTuSgm5+FQtRUxSOBbrG3WFxGFPyBWuxVfGV9rz6gScVvJhmnxza80Un\nS0GyeUAJBeHEFw/BXChva7O32tSBCNcBvRl01j1QpOVe47VRzKd8V7S2JYQK1vhO\nNFkW8QVaxrYDE8R4CLQlxlq9KsBUHtB39AvApiVuNv+lLE+1JfpYfqv+b1vMNjqR\nq14+K35Vmb0thJfIo+a0eWa2N1CTgUKNRsbrV1+q8w6c2P1pTms=\n=VvnW\n-----END PGP SIGNATURE-----", "payload": "tree c981a1527f301ea6ea5f5dd953687d5f788a1871\nparent 83f081fc01f3173ef17a04da3cde313fa06d8502\nauthor David Tolnay <dtolnay@gmail.com> 1660605699 -0700\ncommitter David Tolnay <dtolnay@gmail.com> 1660782042 -0700\n\nReplace a try_fold in rustc_transmute to use ControlFlow instead of Result\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/39809c5f68e5618dc4183cfa95499df70357e617", "html_url": "https://github.com/rust-lang/rust/commit/39809c5f68e5618dc4183cfa95499df70357e617", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/39809c5f68e5618dc4183cfa95499df70357e617/comments", "author": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "83f081fc01f3173ef17a04da3cde313fa06d8502", "url": "https://api.github.com/repos/rust-lang/rust/commits/83f081fc01f3173ef17a04da3cde313fa06d8502", "html_url": "https://github.com/rust-lang/rust/commit/83f081fc01f3173ef17a04da3cde313fa06d8502"}], "stats": {"total": 7, "additions": 4, "deletions": 3}, "files": [{"sha": "93cab7ca533954b216e7df75b6efbedc8fae21e1", "filename": "compiler/rustc_transmute/src/layout/tree.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/39809c5f68e5618dc4183cfa95499df70357e617/compiler%2Frustc_transmute%2Fsrc%2Flayout%2Ftree.rs", "raw_url": "https://github.com/rust-lang/rust/raw/39809c5f68e5618dc4183cfa95499df70357e617/compiler%2Frustc_transmute%2Fsrc%2Flayout%2Ftree.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_transmute%2Fsrc%2Flayout%2Ftree.rs?ref=39809c5f68e5618dc4183cfa95499df70357e617", "patch": "@@ -1,4 +1,5 @@\n use super::{Byte, Def, Ref};\n+use std::ops::ControlFlow;\n \n #[cfg(test)]\n mod tests;\n@@ -90,13 +91,13 @@ where\n                 Tree::unit(),\n                 |elts, elt| {\n                     if elt == Tree::uninhabited() {\n-                        Err(Tree::uninhabited())\n+                        ControlFlow::Break(Tree::uninhabited())\n                     } else {\n-                        Ok(elts.then(elt))\n+                        ControlFlow::Continue(elts.then(elt))\n                     }\n                 },\n             ) {\n-                Err(node) | Ok(node) => node,\n+                ControlFlow::Break(node) | ControlFlow::Continue(node) => node,\n             },\n             Self::Alt(alts) => alts\n                 .into_iter()"}]}