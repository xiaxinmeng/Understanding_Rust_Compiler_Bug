{"sha": "e62d9d5230535b1cd481c465f44a2c0aa666491f", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU2MmQ5ZDUyMzA1MzViMWNkNDgxYzQ2NWY0NGEyYzBhYTY2NjQ5MWY=", "commit": {"author": {"name": "John K\u00e5re Alsaker", "email": "john.kare.alsaker@gmail.com", "date": "2017-07-10T21:13:52Z"}, "committer": {"name": "John K\u00e5re Alsaker", "email": "john.kare.alsaker@gmail.com", "date": "2017-07-28T13:46:24Z"}, "message": "Fix tests", "tree": {"sha": "f021e937bd8112b4dd2bc52cd3044cb73742a5df", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f021e937bd8112b4dd2bc52cd3044cb73742a5df"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e62d9d5230535b1cd481c465f44a2c0aa666491f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e62d9d5230535b1cd481c465f44a2c0aa666491f", "html_url": "https://github.com/rust-lang/rust/commit/e62d9d5230535b1cd481c465f44a2c0aa666491f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e62d9d5230535b1cd481c465f44a2c0aa666491f/comments", "author": {"login": "Zoxc", "id": 25784, "node_id": "MDQ6VXNlcjI1Nzg0", "avatar_url": "https://avatars.githubusercontent.com/u/25784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zoxc", "html_url": "https://github.com/Zoxc", "followers_url": "https://api.github.com/users/Zoxc/followers", "following_url": "https://api.github.com/users/Zoxc/following{/other_user}", "gists_url": "https://api.github.com/users/Zoxc/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zoxc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zoxc/subscriptions", "organizations_url": "https://api.github.com/users/Zoxc/orgs", "repos_url": "https://api.github.com/users/Zoxc/repos", "events_url": "https://api.github.com/users/Zoxc/events{/privacy}", "received_events_url": "https://api.github.com/users/Zoxc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Zoxc", "id": 25784, "node_id": "MDQ6VXNlcjI1Nzg0", "avatar_url": "https://avatars.githubusercontent.com/u/25784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zoxc", "html_url": "https://github.com/Zoxc", "followers_url": "https://api.github.com/users/Zoxc/followers", "following_url": "https://api.github.com/users/Zoxc/following{/other_user}", "gists_url": "https://api.github.com/users/Zoxc/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zoxc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zoxc/subscriptions", "organizations_url": "https://api.github.com/users/Zoxc/orgs", "repos_url": "https://api.github.com/users/Zoxc/repos", "events_url": "https://api.github.com/users/Zoxc/events{/privacy}", "received_events_url": "https://api.github.com/users/Zoxc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a88e7506a6419cb8d7ebc8c89188b0dba1c17d01", "url": "https://api.github.com/repos/rust-lang/rust/commits/a88e7506a6419cb8d7ebc8c89188b0dba1c17d01", "html_url": "https://github.com/rust-lang/rust/commit/a88e7506a6419cb8d7ebc8c89188b0dba1c17d01"}], "stats": {"total": 27, "additions": 16, "deletions": 11}, "files": [{"sha": "635d8fb3cdc63d340994558c74fe9aaab4f8a859", "filename": "src/test/run-pass/generator/implicit-argument-dead-when-suspended.rs", "status": "modified", "additions": 15, "deletions": 10, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/e62d9d5230535b1cd481c465f44a2c0aa666491f/src%2Ftest%2Frun-pass%2Fgenerator%2Fimplicit-argument-dead-when-suspended.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e62d9d5230535b1cd481c465f44a2c0aa666491f/src%2Ftest%2Frun-pass%2Fgenerator%2Fimplicit-argument-dead-when-suspended.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fgenerator%2Fimplicit-argument-dead-when-suspended.rs?ref=e62d9d5230535b1cd481c465f44a2c0aa666491f", "patch": "@@ -8,26 +8,31 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-#![feature(generators)]\n+#![feature(generators, generator_trait)]\n \n-use std::cell::Cell;\n+use std::ops::Generator;\n+use std::sync::atomic::{AtomicUsize, ATOMIC_USIZE_INIT, Ordering};\n \n-struct Flag<'a>(&'a Cell<bool>);\n+static A: AtomicUsize = ATOMIC_USIZE_INIT;\n \n-impl<'a> Drop for Flag<'a> {\n+struct B;\n+\n+impl Drop for B {\n     fn drop(&mut self) {\n-        self.0.set(false)\n+        A.fetch_add(1, Ordering::SeqCst);\n     }\n }\n \n fn main() {\n-    let alive = Cell::new(true);\n+    let b = B;\n \n-    let gen = || {\n+    let mut gen = || {\n         yield;\n     };\n \n-    gen.resume(Flag(&alive));\n-\n-    assert_eq!(alive.get(), false);\n+    assert_eq!(A.load(Ordering::SeqCst), 0);\n+    gen.resume(b);\n+    assert_eq!(A.load(Ordering::SeqCst), 1);\n+    drop(gen);\n+    assert_eq!(A.load(Ordering::SeqCst), 1);\n }"}, {"sha": "45ba663873b61730967f2cfa6a4484bcaacd089f", "filename": "src/test/run-pass/generator/iterator-count.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e62d9d5230535b1cd481c465f44a2c0aa666491f/src%2Ftest%2Frun-pass%2Fgenerator%2Fiterator-count.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e62d9d5230535b1cd481c465f44a2c0aa666491f/src%2Ftest%2Frun-pass%2Fgenerator%2Fiterator-count.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fgenerator%2Fiterator-count.rs?ref=e62d9d5230535b1cd481c465f44a2c0aa666491f", "patch": "@@ -37,7 +37,7 @@ fn main() {\n     let end = 11;\n \n     let closure_test = |start| {\n-        || {\n+        move || {\n             for i in start..end {\n                 yield i\n             }"}]}