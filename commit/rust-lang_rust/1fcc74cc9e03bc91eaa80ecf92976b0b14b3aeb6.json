{"sha": "1fcc74cc9e03bc91eaa80ecf92976b0b14b3aeb6", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFmY2M3NGNjOWUwM2JjOTFlYWE4MGVjZjkyOTc2YjBiMTRiM2FlYjY=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-01-02T15:28:08Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-01-02T15:28:08Z"}, "message": "Auto merge of #6536 - flip1995:rustup, r=flip1995\n\nRustup\n\nr? `@ghost`\n\nchangelog: none", "tree": {"sha": "67b5e1d38c29c3a6277c7dd98ad2e2765f0f6977", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/67b5e1d38c29c3a6277c7dd98ad2e2765f0f6977"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1fcc74cc9e03bc91eaa80ecf92976b0b14b3aeb6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1fcc74cc9e03bc91eaa80ecf92976b0b14b3aeb6", "html_url": "https://github.com/rust-lang/rust/commit/1fcc74cc9e03bc91eaa80ecf92976b0b14b3aeb6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1fcc74cc9e03bc91eaa80ecf92976b0b14b3aeb6/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b1965283fd9f90470731ee88b2dfdde69f5407a6", "url": "https://api.github.com/repos/rust-lang/rust/commits/b1965283fd9f90470731ee88b2dfdde69f5407a6", "html_url": "https://github.com/rust-lang/rust/commit/b1965283fd9f90470731ee88b2dfdde69f5407a6"}, {"sha": "e4fbc5f4232b47962e9c79ffe10b84b339be2124", "url": "https://api.github.com/repos/rust-lang/rust/commits/e4fbc5f4232b47962e9c79ffe10b84b339be2124", "html_url": "https://github.com/rust-lang/rust/commit/e4fbc5f4232b47962e9c79ffe10b84b339be2124"}], "stats": {"total": 44, "additions": 28, "deletions": 16}, "files": [{"sha": "e60aa472846cfcee8f204bd28ec0fdfb0b4481a3", "filename": "Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1fcc74cc9e03bc91eaa80ecf92976b0b14b3aeb6/Cargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/1fcc74cc9e03bc91eaa80ecf92976b0b14b3aeb6/Cargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.toml?ref=1fcc74cc9e03bc91eaa80ecf92976b0b14b3aeb6", "patch": "@@ -1,6 +1,6 @@\n [package]\n name = \"clippy\"\n-version = \"0.1.50\"\n+version = \"0.1.51\"\n authors = [\n \t\"Manish Goregaokar <manishsmail@gmail.com>\",\n \t\"Andre Bogus <bogusandre@gmail.com>\","}, {"sha": "a9516560a61952c9bb6d58acd168805cccd1f35a", "filename": "clippy_lints/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1fcc74cc9e03bc91eaa80ecf92976b0b14b3aeb6/clippy_lints%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/1fcc74cc9e03bc91eaa80ecf92976b0b14b3aeb6/clippy_lints%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2FCargo.toml?ref=1fcc74cc9e03bc91eaa80ecf92976b0b14b3aeb6", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"clippy_lints\"\n # begin automatic update\n-version = \"0.1.50\"\n+version = \"0.1.51\"\n # end automatic update\n authors = [\n \t\"Manish Goregaokar <manishsmail@gmail.com>\","}, {"sha": "e84c8b4e5b3e0317e7006e84abd689f1dca56d4b", "filename": "clippy_lints/src/lifetimes.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1fcc74cc9e03bc91eaa80ecf92976b0b14b3aeb6/clippy_lints%2Fsrc%2Flifetimes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1fcc74cc9e03bc91eaa80ecf92976b0b14b3aeb6/clippy_lints%2Fsrc%2Flifetimes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flifetimes.rs?ref=1fcc74cc9e03bc91eaa80ecf92976b0b14b3aeb6", "patch": "@@ -501,7 +501,7 @@ impl<'tcx> Visitor<'tcx> for BodyLifetimeChecker {\n \n     // for lifetimes as parameters of generics\n     fn visit_lifetime(&mut self, lifetime: &'tcx Lifetime) {\n-        if lifetime.name.ident().name != kw::Invalid && lifetime.name.ident().name != kw::StaticLifetime {\n+        if lifetime.name.ident().name != kw::Empty && lifetime.name.ident().name != kw::StaticLifetime {\n             self.lifetimes_used_in_body = true;\n         }\n     }"}, {"sha": "5aed676fceb2815e56dc8dcda839eb5252a2c3fc", "filename": "clippy_lints/src/utils/ast_utils.rs", "status": "modified", "additions": 16, "deletions": 1, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/1fcc74cc9e03bc91eaa80ecf92976b0b14b3aeb6/clippy_lints%2Fsrc%2Futils%2Fast_utils.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1fcc74cc9e03bc91eaa80ecf92976b0b14b3aeb6/clippy_lints%2Fsrc%2Futils%2Fast_utils.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fast_utils.rs?ref=1fcc74cc9e03bc91eaa80ecf92976b0b14b3aeb6", "patch": "@@ -407,6 +407,10 @@ pub fn eq_use_tree_kind(l: &UseTreeKind, r: &UseTreeKind) -> bool {\n     }\n }\n \n+pub fn eq_anon_const(l: &AnonConst, r: &AnonConst) -> bool {\n+    eq_expr(&l.value, &r.value)\n+}\n+\n pub fn eq_defaultness(l: Defaultness, r: Defaultness) -> bool {\n     matches!(\n         (l, r),\n@@ -497,7 +501,18 @@ pub fn eq_generic_param(l: &GenericParam, r: &GenericParam) -> bool {\n         && match (&l.kind, &r.kind) {\n             (Lifetime, Lifetime) => true,\n             (Type { default: l }, Type { default: r }) => both(l, r, |l, r| eq_ty(l, r)),\n-            (Const { ty: l, kw_span: _ }, Const { ty: r, kw_span: _ }) => eq_ty(l, r),\n+            (\n+                Const {\n+                    ty: lt,\n+                    kw_span: _,\n+                    default: ld,\n+                },\n+                Const {\n+                    ty: rt,\n+                    kw_span: _,\n+                    default: rd,\n+                },\n+            ) => eq_ty(lt, rt) && both(ld, rd, |ld, rd| eq_anon_const(ld, rd)),\n             _ => false,\n         }\n         && over(&l.attrs, &r.attrs, |l, r| eq_attr(l, r))"}, {"sha": "c579beeae89beca81922be2a546603b338fd8e6f", "filename": "rust-toolchain", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1fcc74cc9e03bc91eaa80ecf92976b0b14b3aeb6/rust-toolchain", "raw_url": "https://github.com/rust-lang/rust/raw/1fcc74cc9e03bc91eaa80ecf92976b0b14b3aeb6/rust-toolchain", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/rust-toolchain?ref=1fcc74cc9e03bc91eaa80ecf92976b0b14b3aeb6", "patch": "@@ -1,3 +1,3 @@\n [toolchain]\n-channel = \"nightly-2020-12-20\"\n+channel = \"nightly-2021-01-02\"\n components = [\"llvm-tools-preview\", \"rustc-dev\", \"rust-src\", \"rustfmt\"]"}, {"sha": "84981a52597327992a772f61ceff6ea23dcd59be", "filename": "tests/ui/match_expr_like_matches_macro.fixed", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1fcc74cc9e03bc91eaa80ecf92976b0b14b3aeb6/tests%2Fui%2Fmatch_expr_like_matches_macro.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/1fcc74cc9e03bc91eaa80ecf92976b0b14b3aeb6/tests%2Fui%2Fmatch_expr_like_matches_macro.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmatch_expr_like_matches_macro.fixed?ref=1fcc74cc9e03bc91eaa80ecf92976b0b14b3aeb6", "patch": "@@ -39,7 +39,7 @@ fn main() {\n         B(i32),\n         C,\n         D,\n-    };\n+    }\n     let x = E::A(2);\n     {\n         // lint"}, {"sha": "94c7c3cadacf749799ba4a32510e28466e560001", "filename": "tests/ui/match_expr_like_matches_macro.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1fcc74cc9e03bc91eaa80ecf92976b0b14b3aeb6/tests%2Fui%2Fmatch_expr_like_matches_macro.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1fcc74cc9e03bc91eaa80ecf92976b0b14b3aeb6/tests%2Fui%2Fmatch_expr_like_matches_macro.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmatch_expr_like_matches_macro.rs?ref=1fcc74cc9e03bc91eaa80ecf92976b0b14b3aeb6", "patch": "@@ -51,7 +51,7 @@ fn main() {\n         B(i32),\n         C,\n         D,\n-    };\n+    }\n     let x = E::A(2);\n     {\n         // lint"}, {"sha": "589b19f68f7a05bb485b1a700e3a0c2ddc0c50dd", "filename": "tests/versioncheck.rs", "status": "modified", "additions": 6, "deletions": 9, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/1fcc74cc9e03bc91eaa80ecf92976b0b14b3aeb6/tests%2Fversioncheck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1fcc74cc9e03bc91eaa80ecf92976b0b14b3aeb6/tests%2Fversioncheck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fversioncheck.rs?ref=1fcc74cc9e03bc91eaa80ecf92976b0b14b3aeb6", "patch": "@@ -28,17 +28,17 @@ fn check_that_clippy_has_the_same_major_version_as_rustc() {\n     let clippy_minor = clippy_version.minor;\n     let clippy_patch = clippy_version.patch;\n \n-    // get the rustc version from cargo\n+    // get the rustc version\n     // this way the rust-toolchain file version is honored\n     let rustc_version = String::from_utf8(\n-        std::process::Command::new(\"cargo\")\n+        std::process::Command::new(\"rustc\")\n             .arg(\"--version\")\n             .output()\n-            .expect(\"failed to run 'cargo --version'\")\n+            .expect(\"failed to run `rustc --version`\")\n             .stdout,\n     )\n     .unwrap();\n-    // extract \"1 50 0\" from \"cargo 1.50.0-nightly (a3c2627fb 2020-12-14)\"\n+    // extract \"1 XX 0\" from \"rustc 1.XX.0-nightly (<commit> <date>)\"\n     let vsplit: Vec<&str> = rustc_version\n         .split(' ')\n         .nth(1)\n@@ -50,9 +50,7 @@ fn check_that_clippy_has_the_same_major_version_as_rustc() {\n         .collect();\n     match vsplit.as_slice() {\n         [rustc_major, rustc_minor, _rustc_patch] => {\n-            // clippy 0.1.50 should correspond to rustc 1.50.0\n-            dbg!(&rustc_version);\n-            dbg!(&clippy_version);\n+            // clippy 0.1.XX should correspond to rustc 1.XX.0\n             assert_eq!(clippy_major, 0); // this will probably stay the same for a long time\n             assert_eq!(\n                 clippy_minor.to_string(),\n@@ -68,8 +66,7 @@ fn check_that_clippy_has_the_same_major_version_as_rustc() {\n             // we don't want our tests failing suddenly\n         },\n         _ => {\n-            dbg!(vsplit);\n-            panic!(\"Failed to parse rustc version\");\n+            panic!(\"Failed to parse rustc version: {:?}\", vsplit);\n         },\n     };\n }"}]}