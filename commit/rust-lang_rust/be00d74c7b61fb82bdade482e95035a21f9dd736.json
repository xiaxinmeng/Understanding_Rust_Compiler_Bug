{"sha": "be00d74c7b61fb82bdade482e95035a21f9dd736", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJlMDBkNzRjN2I2MWZiODJiZGFkZTQ4MmU5NTAzNWEyMWY5ZGQ3MzY=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2019-11-25T13:42:36Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-11-25T13:42:36Z"}, "message": "Merge #2388\n\n2388: Show missing struct fields in the error message r=matklad a=Frizi\n\nThis provides the most interesting information about the \"missing structure fields\" error directly to the user.\n\nCo-authored-by: Frizi <frizi09@gmail.com>", "tree": {"sha": "95dc85c347125501486396c824aaf31e5f1be5f9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/95dc85c347125501486396c824aaf31e5f1be5f9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/be00d74c7b61fb82bdade482e95035a21f9dd736", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJd29pMCRBK7hj4Ov3rIwAAdHIIABPTEa280CwMGE+zPKBDEyJV\nTwsHb9w0nwnpJQbrh7eI+PKubJSEhGEssxamdSg+6sc6MHMJsGjwztaT7Pd8gKiZ\n1iqVhjqAreC/a96a8fAaDBVuI40wS4fmZI2TDFFvDwm60YpUmIGEAWTgNaAftOgx\nQL3/qJVfxRB1fuDTa1d1KCfQT9AQ+mSkZwoQE/caUT+pgaIfft6MXn3kfKXO7xzw\nDrglNwI/1B2/7pwKaT/rJvCJirIrYuom0RtwsYCqeTIq7h3WOlwIHubYGE9i6B6m\nk2iFQGVXAOw3/LcW2VGnnNLsgbtMbkXhCK0QcQ9xjLlHjwWvUKYbN+JLBOSa6zU=\n=BLBk\n-----END PGP SIGNATURE-----\n", "payload": "tree 95dc85c347125501486396c824aaf31e5f1be5f9\nparent df25dd4d882d7521140458b60f486c2f617608ee\nparent 66f04e6be54c47104877bff777b7042960d04393\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1574689356 +0000\ncommitter GitHub <noreply@github.com> 1574689356 +0000\n\nMerge #2388\n\n2388: Show missing struct fields in the error message r=matklad a=Frizi\n\nThis provides the most interesting information about the \"missing structure fields\" error directly to the user.\n\nCo-authored-by: Frizi <frizi09@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/be00d74c7b61fb82bdade482e95035a21f9dd736", "html_url": "https://github.com/rust-lang/rust/commit/be00d74c7b61fb82bdade482e95035a21f9dd736", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/be00d74c7b61fb82bdade482e95035a21f9dd736/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "df25dd4d882d7521140458b60f486c2f617608ee", "url": "https://api.github.com/repos/rust-lang/rust/commits/df25dd4d882d7521140458b60f486c2f617608ee", "html_url": "https://github.com/rust-lang/rust/commit/df25dd4d882d7521140458b60f486c2f617608ee"}, {"sha": "66f04e6be54c47104877bff777b7042960d04393", "url": "https://api.github.com/repos/rust-lang/rust/commits/66f04e6be54c47104877bff777b7042960d04393", "html_url": "https://github.com/rust-lang/rust/commit/66f04e6be54c47104877bff777b7042960d04393"}], "stats": {"total": 10, "additions": 8, "deletions": 2}, "files": [{"sha": "6db499e06003d889148b166bc03ee8b0d9d4bb42", "filename": "crates/ra_hir/src/diagnostics.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/be00d74c7b61fb82bdade482e95035a21f9dd736/crates%2Fra_hir%2Fsrc%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/be00d74c7b61fb82bdade482e95035a21f9dd736/crates%2Fra_hir%2Fsrc%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fdiagnostics.rs?ref=be00d74c7b61fb82bdade482e95035a21f9dd736", "patch": "@@ -39,7 +39,12 @@ pub struct MissingFields {\n \n impl Diagnostic for MissingFields {\n     fn message(&self) -> String {\n-        \"fill structure fields\".to_string()\n+        use std::fmt::Write;\n+        let mut message = String::from(\"Missing structure fields:\\n\");\n+        for field in &self.missed_fields {\n+            write!(message, \"- {}\\n\", field).unwrap();\n+        }\n+        message\n     }\n     fn source(&self) -> Source<SyntaxNodePtr> {\n         Source { file_id: self.file, value: self.field_list.into() }"}, {"sha": "98eb863cb906cb9562896ce4f2e1425453bfb863", "filename": "crates/ra_hir/src/ty/tests.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/be00d74c7b61fb82bdade482e95035a21f9dd736/crates%2Fra_hir%2Fsrc%2Fty%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/be00d74c7b61fb82bdade482e95035a21f9dd736/crates%2Fra_hir%2Fsrc%2Fty%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Ftests.rs?ref=be00d74c7b61fb82bdade482e95035a21f9dd736", "patch": "@@ -4832,7 +4832,8 @@ fn no_such_field_diagnostics() {\n \n     assert_snapshot!(diagnostics, @r###\"\n     \"baz: 62\": no such field\n-    \"{\\n            foo: 92,\\n            baz: 62,\\n        }\": fill structure fields\n+    \"{\\n            foo: 92,\\n            baz: 62,\\n        }\": Missing structure fields:\n+    - bar\n     \"###\n     );\n }"}]}