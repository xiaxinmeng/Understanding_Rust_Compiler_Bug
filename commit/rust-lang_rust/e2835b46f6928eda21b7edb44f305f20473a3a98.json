{"sha": "e2835b46f6928eda21b7edb44f305f20473a3a98", "node_id": "MDY6Q29tbWl0NzI0NzEyOmUyODM1YjQ2ZjY5MjhlZGEyMWI3ZWRiNDRmMzA1ZjIwNDczYTNhOTg=", "commit": {"author": {"name": "bors[bot]", "email": "bors[bot]@users.noreply.github.com", "date": "2019-04-23T12:23:40Z"}, "committer": {"name": "bors[bot]", "email": "bors[bot]@users.noreply.github.com", "date": "2019-04-23T12:23:40Z"}, "message": "Merge #1197\n\n1197: Add `...`  parsing for fn pointer type r=matklad a=edwin0cheng\n\nThis PR should fix #1188 \n\nCo-authored-by: Edwin Cheng <edwin0cheng@gmail.com>", "tree": {"sha": "e1cc915077e76d097ddd9bc6739ba7af8c05dd9f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e1cc915077e76d097ddd9bc6739ba7af8c05dd9f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e2835b46f6928eda21b7edb44f305f20473a3a98", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e2835b46f6928eda21b7edb44f305f20473a3a98", "html_url": "https://github.com/rust-lang/rust/commit/e2835b46f6928eda21b7edb44f305f20473a3a98", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e2835b46f6928eda21b7edb44f305f20473a3a98/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "parents": [{"sha": "1705e5887d5c71cad846cb7e840b3c4e03942856", "url": "https://api.github.com/repos/rust-lang/rust/commits/1705e5887d5c71cad846cb7e840b3c4e03942856", "html_url": "https://github.com/rust-lang/rust/commit/1705e5887d5c71cad846cb7e840b3c4e03942856"}, {"sha": "6c913d8fa700c8ab58cf386dc958707a248f1379", "url": "https://api.github.com/repos/rust-lang/rust/commits/6c913d8fa700c8ab58cf386dc958707a248f1379", "html_url": "https://github.com/rust-lang/rust/commit/6c913d8fa700c8ab58cf386dc958707a248f1379"}], "stats": {"total": 50, "additions": 47, "deletions": 3}, "files": [{"sha": "3d3bd4cc1c150a15d674510f2553e32942013f2e", "filename": "crates/ra_parser/src/grammar/params.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/e2835b46f6928eda21b7edb44f305f20473a3a98/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fparams.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e2835b46f6928eda21b7edb44f305f20473a3a98/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fparams.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fparams.rs?ref=e2835b46f6928eda21b7edb44f305f20473a3a98", "patch": "@@ -43,7 +43,7 @@ fn list_(p: &mut Parser, flavor: Flavor) {\n     if flavor.type_required() {\n         opt_self_param(p);\n     }\n-    while !p.at(EOF) && !p.at(ket) && !(flavor == Flavor::Normal && p.at(DOTDOTDOT)) {\n+    while !p.at(EOF) && !p.at(ket) && !(flavor.type_required() && p.at(DOTDOTDOT)) {\n         if !p.at_ts(VALUE_PARAMETER_FIRST) {\n             p.error(\"expected value parameter\");\n             break;\n@@ -55,7 +55,7 @@ fn list_(p: &mut Parser, flavor: Flavor) {\n     }\n     // test param_list_vararg\n     // extern \"C\" { fn printf(format: *const i8, ...) -> i32; }\n-    if flavor == Flavor::Normal {\n+    if flavor.type_required() {\n         p.eat(DOTDOTDOT);\n     }\n     p.expect(ket);"}, {"sha": "686c80f3ca0264f0e1f766cefe7feeed731f026a", "filename": "crates/ra_parser/src/grammar/types.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/e2835b46f6928eda21b7edb44f305f20473a3a98/crates%2Fra_parser%2Fsrc%2Fgrammar%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e2835b46f6928eda21b7edb44f305f20473a3a98/crates%2Fra_parser%2Fsrc%2Fgrammar%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_parser%2Fsrc%2Fgrammar%2Ftypes.rs?ref=e2835b46f6928eda21b7edb44f305f20473a3a98", "patch": "@@ -166,6 +166,7 @@ fn placeholder_type(p: &mut Parser) {\n // type A = fn();\n // type B = unsafe fn();\n // type C = unsafe extern \"C\" fn();\n+// type D = extern \"C\" fn ( u8 , ... ) -> u8;\n fn fn_pointer_type(p: &mut Parser) {\n     let m = p.start();\n     p.eat(UNSAFE_KW);"}, {"sha": "9493da83d56c3f49c2160c448974e88603394fd8", "filename": "crates/ra_syntax/tests/data/parser/inline/ok/0032_fn_pointer_type.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/e2835b46f6928eda21b7edb44f305f20473a3a98/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Finline%2Fok%2F0032_fn_pointer_type.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e2835b46f6928eda21b7edb44f305f20473a3a98/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Finline%2Fok%2F0032_fn_pointer_type.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Finline%2Fok%2F0032_fn_pointer_type.rs?ref=e2835b46f6928eda21b7edb44f305f20473a3a98", "patch": "@@ -1,3 +1,4 @@\n type A = fn();\n type B = unsafe fn();\n type C = unsafe extern \"C\" fn();\n+type D = extern \"C\" fn ( u8 , ... ) -> u8;"}, {"sha": "a0a8aea7641c3d72d91af94016b14edba8330a57", "filename": "crates/ra_syntax/tests/data/parser/inline/ok/0032_fn_pointer_type.txt", "status": "modified", "additions": 43, "deletions": 1, "changes": 44, "blob_url": "https://github.com/rust-lang/rust/blob/e2835b46f6928eda21b7edb44f305f20473a3a98/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Finline%2Fok%2F0032_fn_pointer_type.txt", "raw_url": "https://github.com/rust-lang/rust/raw/e2835b46f6928eda21b7edb44f305f20473a3a98/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Finline%2Fok%2F0032_fn_pointer_type.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Finline%2Fok%2F0032_fn_pointer_type.txt?ref=e2835b46f6928eda21b7edb44f305f20473a3a98", "patch": "@@ -1,4 +1,4 @@\n-SOURCE_FILE@[0; 70)\n+SOURCE_FILE@[0; 113)\n   TYPE_ALIAS_DEF@[0; 14)\n     TYPE_KW@[0; 4) \"type\"\n     WHITESPACE@[4; 5) \" \"\n@@ -53,3 +53,45 @@ SOURCE_FILE@[0; 70)\n         R_PAREN@[67; 68) \")\"\n     SEMI@[68; 69) \";\"\n   WHITESPACE@[69; 70) \"\\n\"\n+  TYPE_ALIAS_DEF@[70; 112)\n+    TYPE_KW@[70; 74) \"type\"\n+    WHITESPACE@[74; 75) \" \"\n+    NAME@[75; 76)\n+      IDENT@[75; 76) \"D\"\n+    WHITESPACE@[76; 77) \" \"\n+    EQ@[77; 78) \"=\"\n+    WHITESPACE@[78; 79) \" \"\n+    FN_POINTER_TYPE@[79; 111)\n+      ABI@[79; 89)\n+        EXTERN_KW@[79; 85) \"extern\"\n+        WHITESPACE@[85; 86) \" \"\n+        STRING@[86; 89) \"\\\"C\\\"\"\n+      WHITESPACE@[89; 90) \" \"\n+      FN_KW@[90; 92) \"fn\"\n+      WHITESPACE@[92; 93) \" \"\n+      PARAM_LIST@[93; 105)\n+        L_PAREN@[93; 94) \"(\"\n+        WHITESPACE@[94; 95) \" \"\n+        PARAM@[95; 97)\n+          PATH_TYPE@[95; 97)\n+            PATH@[95; 97)\n+              PATH_SEGMENT@[95; 97)\n+                NAME_REF@[95; 97)\n+                  IDENT@[95; 97) \"u8\"\n+        WHITESPACE@[97; 98) \" \"\n+        COMMA@[98; 99) \",\"\n+        WHITESPACE@[99; 100) \" \"\n+        DOTDOTDOT@[100; 103) \"...\"\n+        WHITESPACE@[103; 104) \" \"\n+        R_PAREN@[104; 105) \")\"\n+      WHITESPACE@[105; 106) \" \"\n+      RET_TYPE@[106; 111)\n+        THIN_ARROW@[106; 108) \"->\"\n+        WHITESPACE@[108; 109) \" \"\n+        PATH_TYPE@[109; 111)\n+          PATH@[109; 111)\n+            PATH_SEGMENT@[109; 111)\n+              NAME_REF@[109; 111)\n+                IDENT@[109; 111) \"u8\"\n+    SEMI@[111; 112) \";\"\n+  WHITESPACE@[112; 113) \"\\n\""}]}