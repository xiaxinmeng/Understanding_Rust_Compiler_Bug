{"sha": "6bb0399df2123a2a87262b0f36ba0e56f1de787b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZiYjAzOTlkZjIxMjNhMmE4NzI2MmIwZjM2YmEwZTU2ZjFkZTc4N2I=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-09-29T23:29:44Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-09-29T23:29:47Z"}, "message": "rt: Check the results of pthread calls\n\nThe stage0 compiler is not working on an x86_64 debian wheezy instance and it\nlooks like maye pthread_create is failing", "tree": {"sha": "ff3c2885bf8bdb52e6e024c64c1a2890ce479ae3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ff3c2885bf8bdb52e6e024c64c1a2890ce479ae3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6bb0399df2123a2a87262b0f36ba0e56f1de787b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6bb0399df2123a2a87262b0f36ba0e56f1de787b", "html_url": "https://github.com/rust-lang/rust/commit/6bb0399df2123a2a87262b0f36ba0e56f1de787b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6bb0399df2123a2a87262b0f36ba0e56f1de787b/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "42c6265a8c38bbf899b7afbb15fc6de50ab210c5", "url": "https://api.github.com/repos/rust-lang/rust/commits/42c6265a8c38bbf899b7afbb15fc6de50ab210c5", "html_url": "https://github.com/rust-lang/rust/commit/42c6265a8c38bbf899b7afbb15fc6de50ab210c5"}], "stats": {"total": 12, "additions": 6, "deletions": 6}, "files": [{"sha": "02fecd440f8e0ffaa05e047ba3de2940a083845f", "filename": "src/rt/sync/rust_thread.cpp", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/6bb0399df2123a2a87262b0f36ba0e56f1de787b/src%2Frt%2Fsync%2Frust_thread.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/6bb0399df2123a2a87262b0f36ba0e56f1de787b/src%2Frt%2Fsync%2Frust_thread.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Fsync%2Frust_thread.cpp?ref=6bb0399df2123a2a87262b0f36ba0e56f1de787b", "patch": "@@ -32,10 +32,10 @@ rust_thread::start() {\n    thread = CreateThread(NULL, stack_sz, rust_thread_start, this, 0, NULL);\n #else\n    pthread_attr_t attr;\n-   pthread_attr_init(&attr);\n-   pthread_attr_setstacksize(&attr, stack_sz);\n-   pthread_attr_setdetachstate(&attr, PTHREAD_CREATE_JOINABLE);\n-   pthread_create(&thread, &attr, rust_thread_start, (void *) this);\n+   CHECKED(pthread_attr_init(&attr));\n+   CHECKED(pthread_attr_setstacksize(&attr, stack_sz));\n+   CHECKED(pthread_attr_setdetachstate(&attr, PTHREAD_CREATE_JOINABLE));\n+   CHECKED(pthread_create(&thread, &attr, rust_thread_start, (void *) this));\n #endif\n }\n \n@@ -46,7 +46,7 @@ rust_thread::join() {\n      WaitForSingleObject(thread, INFINITE);\n #else\n    if (thread)\n-     pthread_join(thread, NULL);\n+     CHECKED(pthread_join(thread, NULL));\n #endif\n    thread = 0;\n }\n@@ -56,6 +56,6 @@ rust_thread::detach() {\n #if !defined(__WIN32__)\n     // Don't leak pthread resources.\n     // http://crosstantine.blogspot.com/2010/01/pthreadcreate-memory-leak.html\n-    pthread_detach(thread);\n+    CHECKED(pthread_detach(thread));\n #endif\n }"}]}