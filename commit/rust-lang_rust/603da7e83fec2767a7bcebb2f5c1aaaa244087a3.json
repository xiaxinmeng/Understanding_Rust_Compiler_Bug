{"sha": "603da7e83fec2767a7bcebb2f5c1aaaa244087a3", "node_id": "C_kwDOAAsO6NoAKDYwM2RhN2U4M2ZlYzI3NjdhN2JjZWJiMmY1YzFhYWFhMjQ0MDg3YTM", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2021-10-11T21:45:52Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-10-11T21:45:52Z"}, "message": "Rollup merge of #89772 - michaelwoerister:fix-function-names-test-gdb, r=Mark-Simulacrum\n\nFix function-names test for GDB 10.1\n\nThis PR updates the test output in `src/test/debuginfo/function-names.rs` for GDB 10.1.\n\nThis should fix issue https://github.com/rust-lang/rust/issues/89750 -- but not the underlying problem of CI ignoring tests if not viable debugger happens to be present.", "tree": {"sha": "b6ea62fff28e7941e3e96425b983e28fb1c71833", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b6ea62fff28e7941e3e96425b983e28fb1c71833"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/603da7e83fec2767a7bcebb2f5c1aaaa244087a3", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJhZLCRCRBK7hj4Ov3rIwAAEOcIAGmUbTtTPqoDyEfWzRaR0rEb\nXe4ZBw3sluzTy/bTUJuQQxzbkDORmw6Y+7GC1FBqAYLg7uIyW4CHmFHs79Es72dX\nisOdhVqws8dFvnUcBRbEd6nv/rJxd22vi3OuBvrwVkUrvcFtVeM9Q5Ly4yXbLFAX\noKe8yki9ftYcs1ttVMt8prSqUJ6aS6d7BOlPMU7AL3/+wHgqtVOdKi2aB4MBCtrY\nyGQI4HOYhxRH9FPD+LDKZZZ9KDpnaqcQ69G08qI7MEy9WyMyLIMb8lZrKV0hcdaV\nvsO8aU/Yz780dEDrygzu7J37ETKr2W1wdXGGm7SlAd26871ipEeR0CLsmN5bUIQ=\n=jGvf\n-----END PGP SIGNATURE-----\n", "payload": "tree b6ea62fff28e7941e3e96425b983e28fb1c71833\nparent b9311b4248adda4bedcf2acadb4fc31e75dbff65\nparent 6531cd8cba18711f112d7b528ab8fd891a31903e\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1633988752 +0200\ncommitter GitHub <noreply@github.com> 1633988752 +0200\n\nRollup merge of #89772 - michaelwoerister:fix-function-names-test-gdb, r=Mark-Simulacrum\n\nFix function-names test for GDB 10.1\n\nThis PR updates the test output in `src/test/debuginfo/function-names.rs` for GDB 10.1.\n\nThis should fix issue https://github.com/rust-lang/rust/issues/89750 -- but not the underlying problem of CI ignoring tests if not viable debugger happens to be present.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/603da7e83fec2767a7bcebb2f5c1aaaa244087a3", "html_url": "https://github.com/rust-lang/rust/commit/603da7e83fec2767a7bcebb2f5c1aaaa244087a3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/603da7e83fec2767a7bcebb2f5c1aaaa244087a3/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b9311b4248adda4bedcf2acadb4fc31e75dbff65", "url": "https://api.github.com/repos/rust-lang/rust/commits/b9311b4248adda4bedcf2acadb4fc31e75dbff65", "html_url": "https://github.com/rust-lang/rust/commit/b9311b4248adda4bedcf2acadb4fc31e75dbff65"}, {"sha": "6531cd8cba18711f112d7b528ab8fd891a31903e", "url": "https://api.github.com/repos/rust-lang/rust/commits/6531cd8cba18711f112d7b528ab8fd891a31903e", "html_url": "https://github.com/rust-lang/rust/commit/6531cd8cba18711f112d7b528ab8fd891a31903e"}], "stats": {"total": 31, "additions": 16, "deletions": 15}, "files": [{"sha": "61d5fc93cd2ad5b7b985d15c07dbcecff0568fa4", "filename": "src/test/debuginfo/function-names.rs", "status": "modified", "additions": 16, "deletions": 15, "changes": 31, "blob_url": "https://github.com/rust-lang/rust/blob/603da7e83fec2767a7bcebb2f5c1aaaa244087a3/src%2Ftest%2Fdebuginfo%2Ffunction-names.rs", "raw_url": "https://github.com/rust-lang/rust/raw/603da7e83fec2767a7bcebb2f5c1aaaa244087a3/src%2Ftest%2Fdebuginfo%2Ffunction-names.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fdebuginfo%2Ffunction-names.rs?ref=603da7e83fec2767a7bcebb2f5c1aaaa244087a3", "patch": "@@ -9,36 +9,37 @@\n // gdb-command:info functions -q function_names::main\n // gdb-check:[...]static fn function_names::main();\n // gdb-command:info functions -q function_names::generic_func<*\n-// gdb-check:[...]static fn function_names::generic_func(i32) -> i32;\n+// gdb-check:[...]static fn function_names::generic_func<i32>(i32) -> i32;\n \n // Implementations\n // gdb-command:info functions -q function_names::.*::impl_function.*\n-// gdb-check:[...]static fn function_names::GenericStruct<T1,T2>::impl_function();\n+// gdb-check:[...]static fn function_names::GenericStruct<i32, i32>::impl_function<i32, i32>();\n // gdb-check:[...]static fn function_names::Mod1::TestStruct2::impl_function();\n // gdb-check:[...]static fn function_names::TestStruct1::impl_function();\n \n // Trait implementations\n // gdb-command:info functions -q function_names::.*::trait_function.*\n-// gdb-check:[...]static fn <function_names::GenericStruct<T,i32> as function_names::TestTrait1>::trait_function();\n-// gdb-check:[...]static fn <function_names::GenericStruct<[T; N],f32> as function_names::TestTrait1>::trait_function();\n-// gdb-check:[...]static fn <function_names::Mod1::TestStruct2 as function_names::Mod1::TestTrait2>::trait_function();\n-// gdb-check:[...]static fn <function_names::TestStruct1 as function_names::TestTrait1>::trait_function();\n+// gdb-check:[...]static fn function_names::Mod1::{impl#1}::trait_function();\n+// gdb-check:[...]static fn function_names::{impl#1}::trait_function();\n+// gdb-check:[...]static fn function_names::{impl#3}::trait_function<i32>();\n+// gdb-check:[...]static fn function_names::{impl#5}::trait_function3<function_names::TestStruct1>();\n+// gdb-check:[...]static fn function_names::{impl#6}::trait_function<i32, 1>();\n \n // Closure\n-// gdb-command:info functions -q function_names::.*::{{closure.*\n-// gdb-check:[...]static fn function_names::GenericStruct<T1,T2>::impl_function::{{closure}}(*mut function_names::{impl#2}::impl_function::{closure#0});\n-// gdb-check:[...]static fn function_names::generic_func::{{closure}}(*mut function_names::generic_func::{closure#0});\n-// gdb-check:[...]static fn function_names::main::{{closure}}(*mut function_names::main::{closure#0});\n+// gdb-command:info functions -q function_names::.*::{closure.*\n+// gdb-check:[...]static fn function_names::generic_func::{closure#0}<i32>(*mut function_names::generic_func::{closure#0});\n+// gdb-check:[...]static fn function_names::main::{closure#0}(*mut function_names::main::{closure#0});\n+// gdb-check:[...]static fn function_names::{impl#2}::impl_function::{closure#0}<i32, i32>(*mut function_names::{impl#2}::impl_function::{closure#0});\n \n // Generator\n // Generators don't seem to appear in GDB's symbol table.\n \n // Const generic parameter\n // gdb-command:info functions -q function_names::const_generic_fn.*\n-// gdb-check:[...]static fn function_names::const_generic_fn_bool();\n-// gdb-check:[...]static fn function_names::const_generic_fn_non_int();\n-// gdb-check:[...]static fn function_names::const_generic_fn_signed_int();\n-// gdb-check:[...]static fn function_names::const_generic_fn_unsigned_int();\n+// gdb-check:[...]static fn function_names::const_generic_fn_bool<false>();\n+// gdb-check:[...]static fn function_names::const_generic_fn_non_int<{CONST#fe3cfa0214ac55c7}>();\n+// gdb-check:[...]static fn function_names::const_generic_fn_signed_int<-7>();\n+// gdb-check:[...]static fn function_names::const_generic_fn_unsigned_int<14>();\n \n // === CDB TESTS ===================================================================================\n \n@@ -103,7 +104,7 @@ fn main() {\n     GenericStruct::<TestStruct1, usize>::trait_function3();\n \n     // Generic function\n-    let _ = generic_func(42);\n+    let _ = generic_func(42i32);\n \n     // Closure\n     let closure = || { TestStruct1 };"}]}