{"sha": "a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24", "node_id": "C_kwDOAAsO6NoAKGE0YTY2N2IzY2UxZDJkYmRjYmJmNDViMjg1NGE0MmFhOGFmODhiMjQ", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-04-09T16:45:09Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-04-09T16:45:09Z"}, "message": "Auto merge of #2061 - RalfJung:edition, r=RalfJung\n\nport Miri to edition 2021\n\n`cargo fix --edition` didn't change anything for either of these crates, so this looks like a very simple port. And then we can remove a bunch of annoying imports. :)\n\nI thought this also unlocks the named format string stuff, but it seems that works on all editions except for that problem around `panic!`. Whatever. ;)", "tree": {"sha": "df7f0f41816bafcade6a6285a66e8a3fe9007fef", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/df7f0f41816bafcade6a6285a66e8a3fe9007fef"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24", "html_url": "https://github.com/rust-lang/rust/commit/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c568f32f165d86aba51ec544756c3c833acbabd7", "url": "https://api.github.com/repos/rust-lang/rust/commits/c568f32f165d86aba51ec544756c3c833acbabd7", "html_url": "https://github.com/rust-lang/rust/commit/c568f32f165d86aba51ec544756c3c833acbabd7"}, {"sha": "507c09f45f0e32b7868b2bf38a3a046d93311e38", "url": "https://api.github.com/repos/rust-lang/rust/commits/507c09f45f0e32b7868b2bf38a3a046d93311e38", "html_url": "https://github.com/rust-lang/rust/commit/507c09f45f0e32b7868b2bf38a3a046d93311e38"}], "stats": {"total": 33, "additions": 8, "deletions": 25}, "files": [{"sha": "4956a8dffd497080ef9e3f9156fc4b0a9e6a29c2", "filename": "Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/Cargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/Cargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.toml?ref=a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24", "patch": "@@ -6,7 +6,7 @@ name = \"miri\"\n repository = \"https://github.com/rust-lang/miri\"\n version = \"0.1.0\"\n default-run = \"miri\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [lib]\n test = true # we have unit tests"}, {"sha": "eb926525305c3194518d20efcbfd861030a40576", "filename": "cargo-miri/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/cargo-miri%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/cargo-miri%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/cargo-miri%2FCargo.toml?ref=a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24", "patch": "@@ -5,7 +5,7 @@ license = \"MIT OR Apache-2.0\"\n name = \"cargo-miri\"\n repository = \"https://github.com/rust-lang/miri\"\n version = \"0.1.0\"\n-edition = \"2018\"\n+edition = \"2021\"\n \n [[bin]]\n name = \"cargo-miri\""}, {"sha": "727e0b717b11ecbf0f491285038b1f9235fe4744", "filename": "src/bin/miri.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/src%2Fbin%2Fmiri.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/src%2Fbin%2Fmiri.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbin%2Fmiri.rs?ref=a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24", "patch": "@@ -9,7 +9,6 @@ extern crate rustc_metadata;\n extern crate rustc_middle;\n extern crate rustc_session;\n \n-use std::convert::TryFrom;\n use std::env;\n use std::num::NonZeroU64;\n use std::path::PathBuf;"}, {"sha": "ce66dea5e746fe48d9020fe509b3173a1d688618", "filename": "src/diagnostics.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/src%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/src%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdiagnostics.rs?ref=a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24", "patch": "@@ -414,11 +414,11 @@ pub trait EvalContextExt<'mir, 'tcx: 'mir>: crate::MiriEvalContextExt<'mir, 'tcx\n                                 )\n                             }\n                         },\n-                    CreatedCallId(id) => format!(\"function call with id {}\", id),\n-                    CreatedAlloc(AllocId(id)) => format!(\"created allocation with id {}\", id),\n-                    FreedAlloc(AllocId(id)) => format!(\"freed allocation with id {}\", id),\n+                    CreatedCallId(id) => format!(\"function call with id {id}\"),\n+                    CreatedAlloc(AllocId(id)) => format!(\"created allocation with id {id}\"),\n+                    FreedAlloc(AllocId(id)) => format!(\"freed allocation with id {id}\"),\n                     RejectedIsolatedOp(ref op) =>\n-                        format!(\"{} was made to return an error due to isolation\", op),\n+                        format!(\"{op} was made to return an error due to isolation\"),\n                 };\n \n                 let (title, diag_level) = match e {"}, {"sha": "5f829525cc572e9f7041b104dafb433d0fef2358", "filename": "src/eval.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/src%2Feval.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/src%2Feval.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Feval.rs?ref=a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24", "patch": "@@ -1,6 +1,5 @@\n //! Main evaluator loop and setting up the initial stack frame.\n \n-use std::convert::TryFrom;\n use std::ffi::OsStr;\n use std::iter;\n "}, {"sha": "5b6e616400b4208961e184a99fbc68e611867220", "filename": "src/helpers.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/src%2Fhelpers.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/src%2Fhelpers.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fhelpers.rs?ref=a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24", "patch": "@@ -1,4 +1,3 @@\n-use std::convert::{TryFrom, TryInto};\n use std::mem;\n use std::num::NonZeroUsize;\n use std::time::Duration;"}, {"sha": "2ec4bbb32e02939c5cd5f2ea024b47ab5cfdcfd6", "filename": "src/shims/backtrace.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/src%2Fshims%2Fbacktrace.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/src%2Fshims%2Fbacktrace.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fshims%2Fbacktrace.rs?ref=a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24", "patch": "@@ -4,7 +4,6 @@ use rustc_middle::ty::layout::LayoutOf as _;\n use rustc_middle::ty::{self, Instance};\n use rustc_span::{BytePos, Loc, Symbol};\n use rustc_target::{abi::Size, spec::abi::Abi};\n-use std::convert::TryInto as _;\n \n impl<'mir, 'tcx: 'mir> EvalContextExt<'mir, 'tcx> for crate::MiriEvalContext<'mir, 'tcx> {}\n pub trait EvalContextExt<'mir, 'tcx: 'mir>: crate::MiriEvalContextExt<'mir, 'tcx> {"}, {"sha": "3b1b1f011e3e7bbe8c78417cc59f113b8095d13d", "filename": "src/shims/env.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/src%2Fshims%2Fenv.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/src%2Fshims%2Fenv.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fshims%2Fenv.rs?ref=a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24", "patch": "@@ -1,4 +1,3 @@\n-use std::convert::TryFrom;\n use std::env;\n use std::ffi::{OsStr, OsString};\n use std::io::ErrorKind;"}, {"sha": "7b457e9ed79a860459fa84673e307c109b31ceed", "filename": "src/shims/foreign_items.rs", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/src%2Fshims%2Fforeign_items.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/src%2Fshims%2Fforeign_items.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fshims%2Fforeign_items.rs?ref=a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24", "patch": "@@ -1,8 +1,4 @@\n-use std::{\n-    collections::hash_map::Entry,\n-    convert::{TryFrom, TryInto},\n-    iter,\n-};\n+use std::{collections::hash_map::Entry, iter};\n \n use log::trace;\n "}, {"sha": "58e546d6b0b01690c4f5e54fa48b646676865429", "filename": "src/shims/intrinsics.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/src%2Fshims%2Fintrinsics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/src%2Fshims%2Fintrinsics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fshims%2Fintrinsics.rs?ref=a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24", "patch": "@@ -1,4 +1,3 @@\n-use std::convert::TryInto;\n use std::iter;\n \n use log::trace;"}, {"sha": "8db75fed4a5f310f9d9c5c095da33ac97ec53b6e", "filename": "src/shims/os_str.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/src%2Fshims%2Fos_str.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/src%2Fshims%2Fos_str.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fshims%2Fos_str.rs?ref=a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24", "patch": "@@ -1,5 +1,4 @@\n use std::borrow::Cow;\n-use std::convert::TryFrom;\n use std::ffi::{OsStr, OsString};\n use std::iter;\n use std::path::{Path, PathBuf};"}, {"sha": "73e21dd57dc40fe426f7eea8335f02144b7ba537", "filename": "src/shims/posix/fs.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/src%2Fshims%2Fposix%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/src%2Fshims%2Fposix%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fshims%2Fposix%2Ffs.rs?ref=a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24", "patch": "@@ -1,6 +1,5 @@\n use std::borrow::Cow;\n use std::collections::BTreeMap;\n-use std::convert::{TryFrom, TryInto};\n use std::fs::{\n     read_dir, remove_dir, remove_file, rename, DirBuilder, File, FileType, OpenOptions, ReadDir,\n };"}, {"sha": "7840a1e1e9708d71d76983b15b5cc190160e0bfb", "filename": "src/shims/posix/thread.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/src%2Fshims%2Fposix%2Fthread.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/src%2Fshims%2Fposix%2Fthread.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fshims%2Fposix%2Fthread.rs?ref=a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24", "patch": "@@ -1,5 +1,3 @@\n-use std::convert::TryInto;\n-\n use crate::*;\n use rustc_middle::ty::layout::LayoutOf;\n use rustc_target::spec::abi::Abi;"}, {"sha": "78bf6f59b3499a42fc8cf5cc15ad20b221fd05b4", "filename": "src/shims/time.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/src%2Fshims%2Ftime.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/src%2Fshims%2Ftime.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fshims%2Ftime.rs?ref=a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24", "patch": "@@ -1,4 +1,3 @@\n-use std::convert::TryFrom;\n use std::time::{Duration, Instant, SystemTime};\n \n use crate::*;"}, {"sha": "bbcd39333c78018d7621809f8888bc84697cc501", "filename": "src/sync.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/src%2Fsync.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/src%2Fsync.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fsync.rs?ref=a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24", "patch": "@@ -1,5 +1,4 @@\n use std::collections::{hash_map::Entry, HashMap, VecDeque};\n-use std::convert::TryFrom;\n use std::num::NonZeroU32;\n use std::ops::Not;\n "}, {"sha": "96131dba3ca6a0e0399e94515ff8425fe614876d", "filename": "src/thread.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/src%2Fthread.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/src%2Fthread.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fthread.rs?ref=a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24", "patch": "@@ -2,7 +2,6 @@\n \n use std::cell::RefCell;\n use std::collections::hash_map::Entry;\n-use std::convert::TryFrom;\n use std::num::TryFromIntError;\n use std::time::{Duration, Instant, SystemTime};\n "}, {"sha": "e13e9c39fc69cb706c4c097433bc56f8520b352e", "filename": "src/vector_clock.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/src%2Fvector_clock.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24/src%2Fvector_clock.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fvector_clock.rs?ref=a4a667b3ce1d2dbdcbbf45b2854a42aa8af88b24", "patch": "@@ -1,6 +1,6 @@\n use rustc_index::vec::Idx;\n use smallvec::SmallVec;\n-use std::{cmp::Ordering, convert::TryFrom, fmt::Debug, ops::Index};\n+use std::{cmp::Ordering, fmt::Debug, ops::Index};\n \n /// A vector clock index, this is associated with a thread id\n /// but in some cases one vector index may be shared with"}]}