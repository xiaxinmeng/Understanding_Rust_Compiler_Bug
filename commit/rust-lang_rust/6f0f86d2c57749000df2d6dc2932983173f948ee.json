{"sha": "6f0f86d2c57749000df2d6dc2932983173f948ee", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZmMGY4NmQyYzU3NzQ5MDAwZGYyZDZkYzI5MzI5ODMxNzNmOTQ4ZWU=", "commit": {"author": {"name": "kjeremy", "email": "kjeremy@gmail.com", "date": "2020-04-08T19:45:39Z"}, "committer": {"name": "kjeremy", "email": "kjeremy@gmail.com", "date": "2020-04-08T19:45:39Z"}, "message": "Enable the SemanticTokensFeature by default\n\nThis is covered under vscode's \"editor.semanticHighlighting.enabled\"\nsetting plus the user has to have a theme that has opted into highlighting.\n\nBumps required vscode stable to 1.44", "tree": {"sha": "74828e0f7fcc984487137f0b3534100f34810455", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/74828e0f7fcc984487137f0b3534100f34810455"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6f0f86d2c57749000df2d6dc2932983173f948ee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6f0f86d2c57749000df2d6dc2932983173f948ee", "html_url": "https://github.com/rust-lang/rust/commit/6f0f86d2c57749000df2d6dc2932983173f948ee", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6f0f86d2c57749000df2d6dc2932983173f948ee/comments", "author": {"login": "kjeremy", "id": 4325700, "node_id": "MDQ6VXNlcjQzMjU3MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/4325700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjeremy", "html_url": "https://github.com/kjeremy", "followers_url": "https://api.github.com/users/kjeremy/followers", "following_url": "https://api.github.com/users/kjeremy/following{/other_user}", "gists_url": "https://api.github.com/users/kjeremy/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjeremy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjeremy/subscriptions", "organizations_url": "https://api.github.com/users/kjeremy/orgs", "repos_url": "https://api.github.com/users/kjeremy/repos", "events_url": "https://api.github.com/users/kjeremy/events{/privacy}", "received_events_url": "https://api.github.com/users/kjeremy/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kjeremy", "id": 4325700, "node_id": "MDQ6VXNlcjQzMjU3MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/4325700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjeremy", "html_url": "https://github.com/kjeremy", "followers_url": "https://api.github.com/users/kjeremy/followers", "following_url": "https://api.github.com/users/kjeremy/following{/other_user}", "gists_url": "https://api.github.com/users/kjeremy/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjeremy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjeremy/subscriptions", "organizations_url": "https://api.github.com/users/kjeremy/orgs", "repos_url": "https://api.github.com/users/kjeremy/repos", "events_url": "https://api.github.com/users/kjeremy/events{/privacy}", "received_events_url": "https://api.github.com/users/kjeremy/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "779555c1beac90f633c01a773558c4007c99c97f", "url": "https://api.github.com/repos/rust-lang/rust/commits/779555c1beac90f633c01a773558c4007c99c97f", "html_url": "https://github.com/rust-lang/rust/commit/779555c1beac90f633c01a773558c4007c99c97f"}], "stats": {"total": 26, "additions": 8, "deletions": 18}, "files": [{"sha": "0bf7b6ae68c6a6afa82ce1175edac39994a48810", "filename": "editors/code/package.json", "status": "modified", "additions": 1, "deletions": 6, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/6f0f86d2c57749000df2d6dc2932983173f948ee/editors%2Fcode%2Fpackage.json", "raw_url": "https://github.com/rust-lang/rust/raw/6f0f86d2c57749000df2d6dc2932983173f948ee/editors%2Fcode%2Fpackage.json", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fpackage.json?ref=6f0f86d2c57749000df2d6dc2932983173f948ee", "patch": "@@ -21,7 +21,7 @@\n         \"Programming Languages\"\n     ],\n     \"engines\": {\n-        \"vscode\": \"^1.43.0\"\n+        \"vscode\": \"^1.44.0\"\n     },\n     \"enableProposedApi\": true,\n     \"scripts\": {\n@@ -342,11 +342,6 @@\n                     \"default\": true,\n                     \"description\": \"Show function name and docs in parameter hints\"\n                 },\n-                \"rust-analyzer.highlighting.semanticTokens\": {\n-                    \"type\": \"boolean\",\n-                    \"default\": false,\n-                    \"description\": \"Use proposed semantic tokens API for syntax highlighting\"\n-                },\n                 \"rust-analyzer.updates.channel\": {\n                     \"type\": \"string\",\n                     \"enum\": ["}, {"sha": "0ad4b63aeb18e3cf37e892f6203e323647f6f149", "filename": "editors/code/src/client.ts", "status": "modified", "additions": 6, "deletions": 10, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/6f0f86d2c57749000df2d6dc2932983173f948ee/editors%2Fcode%2Fsrc%2Fclient.ts", "raw_url": "https://github.com/rust-lang/rust/raw/6f0f86d2c57749000df2d6dc2932983173f948ee/editors%2Fcode%2Fsrc%2Fclient.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Fclient.ts?ref=6f0f86d2c57749000df2d6dc2932983173f948ee", "patch": "@@ -1,11 +1,10 @@\n import * as lc from 'vscode-languageclient';\n import * as vscode from 'vscode';\n \n-import { Config } from './config';\n import { CallHierarchyFeature } from 'vscode-languageclient/lib/callHierarchy.proposed';\n import { SemanticTokensFeature, DocumentSemanticsTokensSignature } from 'vscode-languageclient/lib/semanticTokens.proposed';\n \n-export async function createClient(config: Config, serverPath: string, cwd: string): Promise<lc.LanguageClient> {\n+export async function createClient(serverPath: string, cwd: string): Promise<lc.LanguageClient> {\n     // '.' Is the fallback if no folder is open\n     // TODO?: Workspace folders support Uri's (eg: file://test.txt).\n     // It might be a good idea to test if the uri points to a file.\n@@ -73,15 +72,12 @@ export async function createClient(config: Config, serverPath: string, cwd: stri\n     };\n \n     // To turn on all proposed features use: res.registerProposedFeatures();\n-    // Here we want to just enable CallHierarchyFeature since it is available on stable.\n-    // Note that while the CallHierarchyFeature is stable the LSP protocol is not.\n+    // Here we want to enable CallHierarchyFeature and SemanticTokensFeature\n+    // since they are available on stable.\n+    // Note that while these features are stable in vscode their LSP protocol\n+    // implementations are still in the \"proposed\" category for 3.16.\n     res.registerFeature(new CallHierarchyFeature(res));\n-\n-    if (config.package.enableProposedApi) {\n-        if (config.highlightingSemanticTokens) {\n-            res.registerFeature(new SemanticTokensFeature(res));\n-        }\n-    }\n+    res.registerFeature(new SemanticTokensFeature(res));\n \n     return res;\n }"}, {"sha": "21c1c9f232ed11b0526ecc87183799a136efdbfa", "filename": "editors/code/src/config.ts", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6f0f86d2c57749000df2d6dc2932983173f948ee/editors%2Fcode%2Fsrc%2Fconfig.ts", "raw_url": "https://github.com/rust-lang/rust/raw/6f0f86d2c57749000df2d6dc2932983173f948ee/editors%2Fcode%2Fsrc%2Fconfig.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Fconfig.ts?ref=6f0f86d2c57749000df2d6dc2932983173f948ee", "patch": "@@ -69,7 +69,6 @@ export class Config {\n     get serverPath() { return this.cfg.get<null | string>(\"serverPath\")!; }\n     get channel() { return this.cfg.get<UpdatesChannel>(\"updates.channel\")!; }\n     get askBeforeDownload() { return this.cfg.get<boolean>(\"updates.askBeforeDownload\")!; }\n-    get highlightingSemanticTokens() { return this.cfg.get<boolean>(\"highlighting.semanticTokens\")!; }\n     get traceExtension() { return this.cfg.get<boolean>(\"trace.extension\")!; }\n \n     get inlayHints() {"}, {"sha": "f7ed62d0356b54372ca0c9838c5e144ad7a46b6a", "filename": "editors/code/src/ctx.ts", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6f0f86d2c57749000df2d6dc2932983173f948ee/editors%2Fcode%2Fsrc%2Fctx.ts", "raw_url": "https://github.com/rust-lang/rust/raw/6f0f86d2c57749000df2d6dc2932983173f948ee/editors%2Fcode%2Fsrc%2Fctx.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Fctx.ts?ref=6f0f86d2c57749000df2d6dc2932983173f948ee", "patch": "@@ -21,7 +21,7 @@ export class Ctx {\n         serverPath: string,\n         cwd: string,\n     ): Promise<Ctx> {\n-        const client = await createClient(config, serverPath, cwd);\n+        const client = await createClient(serverPath, cwd);\n         const res = new Ctx(config, extCtx, client, serverPath);\n         res.pushCleanup(client.start());\n         await client.onReady();"}]}