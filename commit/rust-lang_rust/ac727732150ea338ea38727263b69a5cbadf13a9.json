{"sha": "ac727732150ea338ea38727263b69a5cbadf13a9", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFjNzI3NzMyMTUwZWEzMzhlYTM4NzI3MjYzYjY5YTVjYmFkZjEzYTk=", "commit": {"author": {"name": "klensy", "email": "klensy@users.noreply.github.com", "date": "2021-06-16T10:25:00Z"}, "committer": {"name": "klensy", "email": "klensy@users.noreply.github.com", "date": "2021-06-23T08:49:08Z"}, "message": "fix pretty print for `loop` in mir and hir", "tree": {"sha": "2f8567d7a03e3d6fbc0a50c5a3120aa8d1a6a17b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2f8567d7a03e3d6fbc0a50c5a3120aa8d1a6a17b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ac727732150ea338ea38727263b69a5cbadf13a9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ac727732150ea338ea38727263b69a5cbadf13a9", "html_url": "https://github.com/rust-lang/rust/commit/ac727732150ea338ea38727263b69a5cbadf13a9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ac727732150ea338ea38727263b69a5cbadf13a9/comments", "author": {"login": "klensy", "id": 1782831, "node_id": "MDQ6VXNlcjE3ODI4MzE=", "avatar_url": "https://avatars.githubusercontent.com/u/1782831?v=4", "gravatar_id": "", "url": "https://api.github.com/users/klensy", "html_url": "https://github.com/klensy", "followers_url": "https://api.github.com/users/klensy/followers", "following_url": "https://api.github.com/users/klensy/following{/other_user}", "gists_url": "https://api.github.com/users/klensy/gists{/gist_id}", "starred_url": "https://api.github.com/users/klensy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/klensy/subscriptions", "organizations_url": "https://api.github.com/users/klensy/orgs", "repos_url": "https://api.github.com/users/klensy/repos", "events_url": "https://api.github.com/users/klensy/events{/privacy}", "received_events_url": "https://api.github.com/users/klensy/received_events", "type": "User", "site_admin": false}, "committer": {"login": "klensy", "id": 1782831, "node_id": "MDQ6VXNlcjE3ODI4MzE=", "avatar_url": "https://avatars.githubusercontent.com/u/1782831?v=4", "gravatar_id": "", "url": "https://api.github.com/users/klensy", "html_url": "https://github.com/klensy", "followers_url": "https://api.github.com/users/klensy/followers", "following_url": "https://api.github.com/users/klensy/following{/other_user}", "gists_url": "https://api.github.com/users/klensy/gists{/gist_id}", "starred_url": "https://api.github.com/users/klensy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/klensy/subscriptions", "organizations_url": "https://api.github.com/users/klensy/orgs", "repos_url": "https://api.github.com/users/klensy/repos", "events_url": "https://api.github.com/users/klensy/events{/privacy}", "received_events_url": "https://api.github.com/users/klensy/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "52b22869db9554728b0d2133a7c1dd9c713b3b16", "url": "https://api.github.com/repos/rust-lang/rust/commits/52b22869db9554728b0d2133a7c1dd9c713b3b16", "html_url": "https://github.com/rust-lang/rust/commit/52b22869db9554728b0d2133a7c1dd9c713b3b16"}], "stats": {"total": 25, "additions": 20, "deletions": 5}, "files": [{"sha": "7e58a599e2c5c9e2f0adcd577945781a740d2cdf", "filename": "compiler/rustc_ast_pretty/src/pprust/state.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ac727732150ea338ea38727263b69a5cbadf13a9/compiler%2Frustc_ast_pretty%2Fsrc%2Fpprust%2Fstate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ac727732150ea338ea38727263b69a5cbadf13a9/compiler%2Frustc_ast_pretty%2Fsrc%2Fpprust%2Fstate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast_pretty%2Fsrc%2Fpprust%2Fstate.rs?ref=ac727732150ea338ea38727263b69a5cbadf13a9", "patch": "@@ -1950,7 +1950,6 @@ impl<'a> State<'a> {\n                     self.word_space(\":\");\n                 }\n                 self.head(\"loop\");\n-                self.s.space();\n                 self.print_block_with_attrs(blk, attrs);\n             }\n             ast::ExprKind::Match(ref expr, ref arms) => {"}, {"sha": "9b1aca13a6f7a7ea6a3f91e841437d941c07ac21", "filename": "compiler/rustc_hir_pretty/src/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ac727732150ea338ea38727263b69a5cbadf13a9/compiler%2Frustc_hir_pretty%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ac727732150ea338ea38727263b69a5cbadf13a9/compiler%2Frustc_hir_pretty%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_pretty%2Fsrc%2Flib.rs?ref=ac727732150ea338ea38727263b69a5cbadf13a9", "patch": "@@ -1538,7 +1538,6 @@ impl<'a> State<'a> {\n                     self.word_space(\":\");\n                 }\n                 self.head(\"loop\");\n-                self.s.space();\n                 self.print_block(&blk);\n             }\n             hir::ExprKind::Match(ref expr, arms, _) => {"}, {"sha": "0c9ccfcf278ef66af4f77d9c38b04a0896ca198d", "filename": "src/test/pretty/ast-stmt-expr-attr.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ac727732150ea338ea38727263b69a5cbadf13a9/src%2Ftest%2Fpretty%2Fast-stmt-expr-attr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ac727732150ea338ea38727263b69a5cbadf13a9/src%2Ftest%2Fpretty%2Fast-stmt-expr-attr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fpretty%2Fast-stmt-expr-attr.rs?ref=ac727732150ea338ea38727263b69a5cbadf13a9", "patch": "@@ -39,7 +39,7 @@ fn syntax() {\n                     #![attr]\n                 };\n     let _ =\n-        #[attr] loop  {\n+        #[attr] loop {\n                     #![attr]\n                 };\n     let _ ="}, {"sha": "19b3a1775cf36f401c46a935aaa5aea78d1e24e2", "filename": "src/test/pretty/hir-pretty-loop.pp", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/ac727732150ea338ea38727263b69a5cbadf13a9/src%2Ftest%2Fpretty%2Fhir-pretty-loop.pp", "raw_url": "https://github.com/rust-lang/rust/raw/ac727732150ea338ea38727263b69a5cbadf13a9/src%2Ftest%2Fpretty%2Fhir-pretty-loop.pp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fpretty%2Fhir-pretty-loop.pp?ref=ac727732150ea338ea38727263b69a5cbadf13a9", "patch": "@@ -0,0 +1,9 @@\n+#[prelude_import]\n+use ::std::prelude::rust_2015::*;\n+#[macro_use]\n+extern crate std;\n+// pretty-compare-only\n+// pretty-mode:hir\n+// pp-exact:hir-pretty-loop.pp\n+\n+pub fn foo() { loop { break ; } }"}, {"sha": "87a3ef8b8f912386939631232c1e9dc9b016ec45", "filename": "src/test/pretty/hir-pretty-loop.rs", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/ac727732150ea338ea38727263b69a5cbadf13a9/src%2Ftest%2Fpretty%2Fhir-pretty-loop.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ac727732150ea338ea38727263b69a5cbadf13a9/src%2Ftest%2Fpretty%2Fhir-pretty-loop.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fpretty%2Fhir-pretty-loop.rs?ref=ac727732150ea338ea38727263b69a5cbadf13a9", "patch": "@@ -0,0 +1,9 @@\n+// pretty-compare-only\n+// pretty-mode:hir\n+// pp-exact:hir-pretty-loop.pp\n+\n+pub fn foo(){\n+    loop{\n+        break;\n+    }\n+}"}, {"sha": "87692905f51e5f3143b8907c7f855bdab7ee3f26", "filename": "src/test/pretty/stmt_expr_attributes.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/ac727732150ea338ea38727263b69a5cbadf13a9/src%2Ftest%2Fpretty%2Fstmt_expr_attributes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ac727732150ea338ea38727263b69a5cbadf13a9/src%2Ftest%2Fpretty%2Fstmt_expr_attributes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fpretty%2Fstmt_expr_attributes.rs?ref=ac727732150ea338ea38727263b69a5cbadf13a9", "patch": "@@ -159,9 +159,8 @@ fn _11() {\n         #[rustc_dummy] for _ in 0..0 {\n                            #![rustc_dummy]\n                        };\n-    // FIXME: pp bug, two spaces after the loop\n     let _ =\n-        #[rustc_dummy] loop  {\n+        #[rustc_dummy] loop {\n                            #![rustc_dummy]\n                        };\n     let _ = #[rustc_dummy] match false { _ => (), };"}]}