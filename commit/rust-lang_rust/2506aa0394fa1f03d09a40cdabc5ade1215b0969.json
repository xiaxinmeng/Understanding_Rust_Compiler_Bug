{"sha": "2506aa0394fa1f03d09a40cdabc5ade1215b0969", "node_id": "C_kwDOAAsO6NoAKDI1MDZhYTAzOTRmYTFmMDNkMDlhNDBjZGFiYzVhZGUxMjE1YjA5Njk", "commit": {"author": {"name": "Nixon Enraght-Moony", "email": "nixon.emoony@gmail.com", "date": "2022-08-23T13:49:37Z"}, "committer": {"name": "Nixon Enraght-Moony", "email": "nixon.emoony@gmail.com", "date": "2022-09-14T11:30:23Z"}, "message": "jsondoclint: New Tool", "tree": {"sha": "d5bf314212eb408b5b3d4a2f3143e6cfe02d0ded", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d5bf314212eb408b5b3d4a2f3143e6cfe02d0ded"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2506aa0394fa1f03d09a40cdabc5ade1215b0969", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2506aa0394fa1f03d09a40cdabc5ade1215b0969", "html_url": "https://github.com/rust-lang/rust/commit/2506aa0394fa1f03d09a40cdabc5ade1215b0969", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2506aa0394fa1f03d09a40cdabc5ade1215b0969/comments", "author": {"login": "aDotInTheVoid", "id": 28781354, "node_id": "MDQ6VXNlcjI4NzgxMzU0", "avatar_url": "https://avatars.githubusercontent.com/u/28781354?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aDotInTheVoid", "html_url": "https://github.com/aDotInTheVoid", "followers_url": "https://api.github.com/users/aDotInTheVoid/followers", "following_url": "https://api.github.com/users/aDotInTheVoid/following{/other_user}", "gists_url": "https://api.github.com/users/aDotInTheVoid/gists{/gist_id}", "starred_url": "https://api.github.com/users/aDotInTheVoid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aDotInTheVoid/subscriptions", "organizations_url": "https://api.github.com/users/aDotInTheVoid/orgs", "repos_url": "https://api.github.com/users/aDotInTheVoid/repos", "events_url": "https://api.github.com/users/aDotInTheVoid/events{/privacy}", "received_events_url": "https://api.github.com/users/aDotInTheVoid/received_events", "type": "User", "site_admin": false}, "committer": {"login": "aDotInTheVoid", "id": 28781354, "node_id": "MDQ6VXNlcjI4NzgxMzU0", "avatar_url": "https://avatars.githubusercontent.com/u/28781354?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aDotInTheVoid", "html_url": "https://github.com/aDotInTheVoid", "followers_url": "https://api.github.com/users/aDotInTheVoid/followers", "following_url": "https://api.github.com/users/aDotInTheVoid/following{/other_user}", "gists_url": "https://api.github.com/users/aDotInTheVoid/gists{/gist_id}", "starred_url": "https://api.github.com/users/aDotInTheVoid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aDotInTheVoid/subscriptions", "organizations_url": "https://api.github.com/users/aDotInTheVoid/orgs", "repos_url": "https://api.github.com/users/aDotInTheVoid/repos", "events_url": "https://api.github.com/users/aDotInTheVoid/events{/privacy}", "received_events_url": "https://api.github.com/users/aDotInTheVoid/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c97922dca563cb7f9385b18dbf7ca8c97f8e1597", "url": "https://api.github.com/repos/rust-lang/rust/commits/c97922dca563cb7f9385b18dbf7ca8c97f8e1597", "html_url": "https://github.com/rust-lang/rust/commit/c97922dca563cb7f9385b18dbf7ca8c97f8e1597"}], "stats": {"total": 32, "additions": 32, "deletions": 0}, "files": [{"sha": "93b622627b4177ae79ad4a71c9f3c0141c07d00f", "filename": "Cargo.lock", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2506aa0394fa1f03d09a40cdabc5ade1215b0969/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/2506aa0394fa1f03d09a40cdabc5ade1215b0969/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=2506aa0394fa1f03d09a40cdabc5ade1215b0969", "patch": "@@ -1891,6 +1891,10 @@ dependencies = [\n  \"shlex\",\n ]\n \n+[[package]]\n+name = \"jsondoclint\"\n+version = \"0.1.0\"\n+\n [[package]]\n name = \"jsonpath_lib\"\n version = \"0.2.6\""}, {"sha": "e49fe5e2f6356b302552384d5b0b7a3d7e8aa8e0", "filename": "Cargo.toml", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/2506aa0394fa1f03d09a40cdabc5ade1215b0969/Cargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/2506aa0394fa1f03d09a40cdabc5ade1215b0969/Cargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.toml?ref=2506aa0394fa1f03d09a40cdabc5ade1215b0969", "patch": "@@ -33,6 +33,7 @@ members = [\n   \"src/tools/unicode-table-generator\",\n   \"src/tools/expand-yaml-anchors\",\n   \"src/tools/jsondocck\",\n+  \"src/tools/jsondoclint\",\n   \"src/tools/html-checker\",\n   \"src/tools/bump-stage0\",\n   \"src/tools/replace-version-placeholder\","}, {"sha": "9d286ddd6d1646e107643f83c9c19e8af07c96c2", "filename": "src/bootstrap/test.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2506aa0394fa1f03d09a40cdabc5ade1215b0969/src%2Fbootstrap%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2506aa0394fa1f03d09a40cdabc5ade1215b0969/src%2Fbootstrap%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Ftest.rs?ref=2506aa0394fa1f03d09a40cdabc5ade1215b0969", "patch": "@@ -1341,6 +1341,8 @@ note: if you're sure you want to do this, please open an issue as to why. In the\n             let json_compiler = compiler.with_stage(0);\n             cmd.arg(\"--jsondocck-path\")\n                 .arg(builder.ensure(tool::JsonDocCk { compiler: json_compiler, target }));\n+            cmd.arg(\"--jsondoclint-path\")\n+                .arg(builder.ensure(tool::JsonDocLint { compiler: json_compiler, target }));\n         }\n \n         if mode == \"run-make\" {"}, {"sha": "7d4ed24b64850c6422e9f5566d70b5278ced0c6b", "filename": "src/bootstrap/tool.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/2506aa0394fa1f03d09a40cdabc5ade1215b0969/src%2Fbootstrap%2Ftool.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2506aa0394fa1f03d09a40cdabc5ade1215b0969/src%2Fbootstrap%2Ftool.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Ftool.rs?ref=2506aa0394fa1f03d09a40cdabc5ade1215b0969", "patch": "@@ -376,6 +376,7 @@ bootstrap_tool!(\n     ExpandYamlAnchors, \"src/tools/expand-yaml-anchors\", \"expand-yaml-anchors\";\n     LintDocs, \"src/tools/lint-docs\", \"lint-docs\";\n     JsonDocCk, \"src/tools/jsondocck\", \"jsondocck\";\n+    JsonDocLint, \"src/tools/jsondoclint\", \"jsondoclint\";\n     HtmlChecker, \"src/tools/html-checker\", \"html-checker\";\n     BumpStage0, \"src/tools/bump-stage0\", \"bump-stage0\";\n     ReplaceVersionPlaceholder, \"src/tools/replace-version-placeholder\", \"replace-version-placeholder\";"}, {"sha": "64df76e27720d319e2153afd611874d75680d0aa", "filename": "src/tools/compiletest/src/common.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/2506aa0394fa1f03d09a40cdabc5ade1215b0969/src%2Ftools%2Fcompiletest%2Fsrc%2Fcommon.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2506aa0394fa1f03d09a40cdabc5ade1215b0969/src%2Ftools%2Fcompiletest%2Fsrc%2Fcommon.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fcommon.rs?ref=2506aa0394fa1f03d09a40cdabc5ade1215b0969", "patch": "@@ -203,6 +203,9 @@ pub struct Config {\n     /// The jsondocck executable.\n     pub jsondocck_path: Option<String>,\n \n+    /// The jsondoclint executable.\n+    pub jsondoclint_path: Option<String>,\n+\n     /// The LLVM `FileCheck` binary path.\n     pub llvm_filecheck: Option<PathBuf>,\n "}, {"sha": "38c7b87fc0d9d85ddd5405b9c57eb3120e5b1bbd", "filename": "src/tools/compiletest/src/main.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2506aa0394fa1f03d09a40cdabc5ade1215b0969/src%2Ftools%2Fcompiletest%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2506aa0394fa1f03d09a40cdabc5ade1215b0969/src%2Ftools%2Fcompiletest%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fmain.rs?ref=2506aa0394fa1f03d09a40cdabc5ade1215b0969", "patch": "@@ -64,6 +64,7 @@ pub fn parse_config(args: Vec<String>) -> Config {\n         .optopt(\"\", \"rust-demangler-path\", \"path to rust-demangler to use in tests\", \"PATH\")\n         .reqopt(\"\", \"python\", \"path to python to use for doc tests\", \"PATH\")\n         .optopt(\"\", \"jsondocck-path\", \"path to jsondocck to use for doc tests\", \"PATH\")\n+        .optopt(\"\", \"jsondoclint-path\", \"path to jsondoclint to use for doc tests\", \"PATH\")\n         .optopt(\"\", \"valgrind-path\", \"path to Valgrind executable for Valgrind tests\", \"PROGRAM\")\n         .optflag(\"\", \"force-valgrind\", \"fail if Valgrind tests cannot be run under Valgrind\")\n         .optopt(\"\", \"run-clang-based-tests-with\", \"path to Clang executable\", \"PATH\")\n@@ -226,6 +227,7 @@ pub fn parse_config(args: Vec<String>) -> Config {\n         rust_demangler_path: matches.opt_str(\"rust-demangler-path\").map(PathBuf::from),\n         python: matches.opt_str(\"python\").unwrap(),\n         jsondocck_path: matches.opt_str(\"jsondocck-path\"),\n+        jsondoclint_path: matches.opt_str(\"jsondoclint-path\"),\n         valgrind_path: matches.opt_str(\"valgrind-path\"),\n         force_valgrind: matches.opt_present(\"force-valgrind\"),\n         run_clang_based_tests_with: matches.opt_str(\"run-clang-based-tests-with\"),"}, {"sha": "9cbb6b7c393bd3f2982d6d28a0f5d00334b62e30", "filename": "src/tools/compiletest/src/runtest.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/2506aa0394fa1f03d09a40cdabc5ade1215b0969/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2506aa0394fa1f03d09a40cdabc5ade1215b0969/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs?ref=2506aa0394fa1f03d09a40cdabc5ade1215b0969", "patch": "@@ -2572,6 +2572,14 @@ impl<'test> TestCx<'test> {\n         if !res.status.success() {\n             self.fatal_proc_rec(\"check_missing_items failed!\", &res);\n         }\n+\n+        let res = self.cmd2procres(\n+            Command::new(self.config.jsondoclint_path.as_ref().unwrap()).arg(&json_out),\n+        );\n+\n+        if !res.status.success() {\n+            self.fatal_proc_rec(\"jsondoclint failed!\", &res);\n+        }\n     }\n \n     fn get_lines<P: AsRef<Path>>("}, {"sha": "42bb77fde41afdb09a6fd2fac8c51f82e600af69", "filename": "src/tools/jsondoclint/Cargo.toml", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/2506aa0394fa1f03d09a40cdabc5ade1215b0969/src%2Ftools%2Fjsondoclint%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/2506aa0394fa1f03d09a40cdabc5ade1215b0969/src%2Ftools%2Fjsondoclint%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fjsondoclint%2FCargo.toml?ref=2506aa0394fa1f03d09a40cdabc5ade1215b0969", "patch": "@@ -0,0 +1,8 @@\n+[package]\n+name = \"jsondoclint\"\n+version = \"0.1.0\"\n+edition = \"2021\"\n+\n+# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html\n+\n+[dependencies]"}, {"sha": "f328e4d9d04c31d0d70d16d21a07d1613be9d577", "filename": "src/tools/jsondoclint/src/main.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/2506aa0394fa1f03d09a40cdabc5ade1215b0969/src%2Ftools%2Fjsondoclint%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2506aa0394fa1f03d09a40cdabc5ade1215b0969/src%2Ftools%2Fjsondoclint%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fjsondoclint%2Fsrc%2Fmain.rs?ref=2506aa0394fa1f03d09a40cdabc5ade1215b0969", "patch": "@@ -0,0 +1 @@\n+fn main() {}"}, {"sha": "11caedbb9597a8be96fb172ceaf6e742e75c7255", "filename": "triagebot.toml", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2506aa0394fa1f03d09a40cdabc5ade1215b0969/triagebot.toml", "raw_url": "https://github.com/rust-lang/rust/raw/2506aa0394fa1f03d09a40cdabc5ade1215b0969/triagebot.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/triagebot.toml?ref=2506aa0394fa1f03d09a40cdabc5ade1215b0969", "patch": "@@ -132,6 +132,7 @@ trigger_files = [\n     \"src/etc/htmldocck.py\",\n     \"src/etc/check_missing_items.py\",\n     \"src/tools/jsondocck\",\n+    \"src/tools/jsondoclint\",\n     \"src/tools/rustdoc-gui\",\n     \"src/tools/rustdoc-js\",\n     \"src/tools/rustdoc-themes\",\n@@ -147,6 +148,7 @@ trigger_files = [\n     \"src/rustdoc-json-types\",\n     \"src/test/rustdoc-json\",\n     \"src/tools/jsondocck\",\n+    \"src/tools/jsondoclint\",\n ]\n \n [autolabel.\"T-compiler\"]"}]}