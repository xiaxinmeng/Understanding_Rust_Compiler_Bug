{"sha": "59c567296a8dd2b6c36765dbb14caf68cc9cf9af", "node_id": "C_kwDOAAsO6NoAKDU5YzU2NzI5NmE4ZGQyYjZjMzY3NjVkYmIxNGNhZjY4Y2M5Y2Y5YWY", "commit": {"author": {"name": "Nikita Tomashevich", "email": "quant3234@gmail.com", "date": "2022-09-05T16:04:35Z"}, "committer": {"name": "Nikita Tomashevich", "email": "quant3234@gmail.com", "date": "2022-09-06T15:41:09Z"}, "message": "Use untranslated messages for now", "tree": {"sha": "1a88e47327714e7f36689cc4b34f92d20082cc18", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1a88e47327714e7f36689cc4b34f92d20082cc18"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/59c567296a8dd2b6c36765dbb14caf68cc9cf9af", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEAWou4Gq79HasRseDspeR1Nh440UFAmMXahUACgkQspeR1Nh4\n40VMuA/+Nqe9My9GtsmM84solZWQTy63UNFaLseTje8PuNxmpKMdcruY6TdvTAan\nIDp9n5NnJZrH6GsHUAgfmLwmScrpRVJKJqbpV5kyWIcsf734Tqusn2+IXlqX1t3T\np7Aw32WTetU0dRGorsFcyUx+Pj7dWlNkyUVEipgDLVT4+r4SywbYvj5tmXRhUKKr\n0JCy0NQUcq3WYwvOh05UWjpMVUpueoGowfTRJxzHr2J7I7gbPM2XsbftK7r4EeXF\nw7qeN39wRzTGDTMTCEJid/Iv6PN0tv4r5a9GjbKCicC8mJ2A371EQqQlIRqXx1bT\nOPVN10yMWLps80SrH5rs8iRjR/Skkpn0b9T/6dx4PrZGv7r+nqgchmhsEt09ub8j\nbQdbNdkdLunf7PLGpBfrg0AUp9B1ngbPWSBfVmGEmaPIaJzb05o/+F59Z8JEBOaI\nz5782t9C307JWfgOy1R+qU9NwCtmqS+2ulVyT7KzPyirZcWKsPDO6Kc4jOaXgYZo\nYo6NqfMtOOMraSBD39pAZ0Ke7h+EHS0+eV6jy3AKcLOEjytTm2+gRyZ96HuTAI3s\nNq1eMikqfkXu9uBLZpoFvxX86In5ucYWnQxl5ujl2x2NlHI8BbrAO9PfahYiKuOv\nTtEVHC1by4XpHo7bpFTmYMiqgtG7wqmnqi4hChoNYBL+l7+7Qrk=\n=mbLi\n-----END PGP SIGNATURE-----", "payload": "tree 1a88e47327714e7f36689cc4b34f92d20082cc18\nparent e750d7faa7e18fb3af51de96b35baebcce4123a2\nauthor Nikita Tomashevich <quant3234@gmail.com> 1662393875 +0300\ncommitter Nikita Tomashevich <quant3234@gmail.com> 1662478869 +0300\n\nUse untranslated messages for now\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/59c567296a8dd2b6c36765dbb14caf68cc9cf9af", "html_url": "https://github.com/rust-lang/rust/commit/59c567296a8dd2b6c36765dbb14caf68cc9cf9af", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/59c567296a8dd2b6c36765dbb14caf68cc9cf9af/comments", "author": {"login": "IntQuant", "id": 25219447, "node_id": "MDQ6VXNlcjI1MjE5NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/25219447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/IntQuant", "html_url": "https://github.com/IntQuant", "followers_url": "https://api.github.com/users/IntQuant/followers", "following_url": "https://api.github.com/users/IntQuant/following{/other_user}", "gists_url": "https://api.github.com/users/IntQuant/gists{/gist_id}", "starred_url": "https://api.github.com/users/IntQuant/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/IntQuant/subscriptions", "organizations_url": "https://api.github.com/users/IntQuant/orgs", "repos_url": "https://api.github.com/users/IntQuant/repos", "events_url": "https://api.github.com/users/IntQuant/events{/privacy}", "received_events_url": "https://api.github.com/users/IntQuant/received_events", "type": "User", "site_admin": false}, "committer": {"login": "IntQuant", "id": 25219447, "node_id": "MDQ6VXNlcjI1MjE5NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/25219447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/IntQuant", "html_url": "https://github.com/IntQuant", "followers_url": "https://api.github.com/users/IntQuant/followers", "following_url": "https://api.github.com/users/IntQuant/following{/other_user}", "gists_url": "https://api.github.com/users/IntQuant/gists{/gist_id}", "starred_url": "https://api.github.com/users/IntQuant/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/IntQuant/subscriptions", "organizations_url": "https://api.github.com/users/IntQuant/orgs", "repos_url": "https://api.github.com/users/IntQuant/repos", "events_url": "https://api.github.com/users/IntQuant/events{/privacy}", "received_events_url": "https://api.github.com/users/IntQuant/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e750d7faa7e18fb3af51de96b35baebcce4123a2", "url": "https://api.github.com/repos/rust-lang/rust/commits/e750d7faa7e18fb3af51de96b35baebcce4123a2", "html_url": "https://github.com/rust-lang/rust/commit/e750d7faa7e18fb3af51de96b35baebcce4123a2"}], "stats": {"total": 35, "additions": 24, "deletions": 11}, "files": [{"sha": "911381b367f46e2815f7b836fe3ce087b667bc68", "filename": "compiler/rustc_infer/src/errors/mod.rs", "status": "modified", "additions": 24, "deletions": 11, "changes": 35, "blob_url": "https://github.com/rust-lang/rust/blob/59c567296a8dd2b6c36765dbb14caf68cc9cf9af/compiler%2Frustc_infer%2Fsrc%2Ferrors%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/59c567296a8dd2b6c36765dbb14caf68cc9cf9af/compiler%2Frustc_infer%2Fsrc%2Ferrors%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_infer%2Fsrc%2Ferrors%2Fmod.rs?ref=59c567296a8dd2b6c36765dbb14caf68cc9cf9af", "patch": "@@ -448,18 +448,31 @@ impl AddSubdiagnostic for ImplNote {\n     }\n }\n \n-#[derive(SessionSubdiagnostic)]\n pub enum TraitSubdiag {\n-    #[note(infer::msl_trait_note)]\n-    Note {\n-        #[primary_span]\n-        span: Span,\n-    },\n-    #[suggestion_verbose(infer::msl_trait_sugg, code = \" + '_\", applicability = \"maybe-incorrect\")]\n-    Sugg {\n-        #[primary_span]\n-        span: Span,\n-    },\n+    Note { span: Span },\n+    Sugg { span: Span },\n+}\n+\n+// FIXME We can't rely on Vec<Subdiag> working well at the moment,\n+// as only the args from one of the subdiagnostics will actually be used.\n+// This results in an incorrect diagnostic if more than two subdiags with the same slug are added.\n+// Use untranslated messages for now.\n+impl AddSubdiagnostic for TraitSubdiag {\n+    fn add_to_diagnostic(self, diag: &mut rustc_errors::Diagnostic) {\n+        match self {\n+            TraitSubdiag::Note { span } => {\n+                diag.span_note(span, \"this has an implicit `'static` lifetime requirement\");\n+            }\n+            TraitSubdiag::Sugg { span } => {\n+                diag.span_suggestion_verbose(\n+                    span,\n+                    \"consider relaxing the implicit `'static` requirement\",\n+                    \" + '_\".to_owned(),\n+                    rustc_errors::Applicability::MaybeIncorrect,\n+                );\n+            }\n+        }\n+    }\n }\n \n #[derive(SessionDiagnostic)]"}]}