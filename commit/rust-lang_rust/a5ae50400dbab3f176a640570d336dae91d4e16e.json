{"sha": "a5ae50400dbab3f176a640570d336dae91d4e16e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE1YWU1MDQwMGRiYWIzZjE3NmE2NDA1NzBkMzM2ZGFlOTFkNGUxNmU=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2020-07-06T10:56:22Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-07-06T10:56:22Z"}, "message": "Merge #5234\n\n5234: Fix: allow for binaries from $PATH to pass validity check r=matklad a=Veetaha\n\nTackles https://github.com/rust-analyzer/rust-analyzer/pull/5229#issuecomment-654151387\r\ncc @matklad @lnicola \r\nApparently `fs.existsSync()` works only with real paths and not with `$PATH` env var\n\nCo-authored-by: Veetaha <veetaha2@gmail.com>", "tree": {"sha": "276513ea550ae27a284321e3f35b2ff46f545f1d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/276513ea550ae27a284321e3f35b2ff46f545f1d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a5ae50400dbab3f176a640570d336dae91d4e16e", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfAwNWCRBK7hj4Ov3rIwAAdHIIAKLURo5ukxpK+D1FT26OELlL\nhyPuuvQCR0MyH4qgoGtzJqgYU0MuvwGsUuwNmSgf4jyuD2sMzv5LdrhIZ8z09FFo\nSF1NAJWtDpIJRMU/OQ4C+JBxyO6N5L92ovx1WIFSNjI+a2dWriqS66KA7HG0e3RV\nCzKBoJGsfhZKPwUE5tU71uC/J3iGcKV/7boNOeoUK8hLwY6UXkDKbOi/7Rjxx/eC\n1HJfcgfF4nqkaBD1uW4uG1ttBlNl+sCd3E2Ufsa6lF7tPmq4EZKCREe0a1FogzW6\nDe8OSoZ5W52JGYrEeCUN48ZMYrgjXW7dA7lkTweFhpj8erx6/SiqcXFlR6rIUPU=\n=EDD9\n-----END PGP SIGNATURE-----\n", "payload": "tree 276513ea550ae27a284321e3f35b2ff46f545f1d\nparent a0f24455ddc474ee288849b79aa1fc8ca7829385\nparent ef223b9e6439c228e0be49861efd2067c0b22af4\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1594032982 +0000\ncommitter GitHub <noreply@github.com> 1594032982 +0000\n\nMerge #5234\n\n5234: Fix: allow for binaries from $PATH to pass validity check r=matklad a=Veetaha\n\nTackles https://github.com/rust-analyzer/rust-analyzer/pull/5229#issuecomment-654151387\r\ncc @matklad @lnicola \r\nApparently `fs.existsSync()` works only with real paths and not with `$PATH` env var\n\nCo-authored-by: Veetaha <veetaha2@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a5ae50400dbab3f176a640570d336dae91d4e16e", "html_url": "https://github.com/rust-lang/rust/commit/a5ae50400dbab3f176a640570d336dae91d4e16e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a5ae50400dbab3f176a640570d336dae91d4e16e/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a0f24455ddc474ee288849b79aa1fc8ca7829385", "url": "https://api.github.com/repos/rust-lang/rust/commits/a0f24455ddc474ee288849b79aa1fc8ca7829385", "html_url": "https://github.com/rust-lang/rust/commit/a0f24455ddc474ee288849b79aa1fc8ca7829385"}, {"sha": "ef223b9e6439c228e0be49861efd2067c0b22af4", "url": "https://api.github.com/repos/rust-lang/rust/commits/ef223b9e6439c228e0be49861efd2067c0b22af4", "html_url": "https://github.com/rust-lang/rust/commit/ef223b9e6439c228e0be49861efd2067c0b22af4"}], "stats": {"total": 8, "additions": 2, "deletions": 6}, "files": [{"sha": "970fedb3787fcf547609b8e32555edb8f7917eb1", "filename": "editors/code/src/util.ts", "status": "modified", "additions": 2, "deletions": 6, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a5ae50400dbab3f176a640570d336dae91d4e16e/editors%2Fcode%2Fsrc%2Futil.ts", "raw_url": "https://github.com/rust-lang/rust/raw/a5ae50400dbab3f176a640570d336dae91d4e16e/editors%2Fcode%2Fsrc%2Futil.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Futil.ts?ref=a5ae50400dbab3f176a640570d336dae91d4e16e", "patch": "@@ -1,5 +1,4 @@\n import * as lc from \"vscode-languageclient\";\n-import * as fs from \"fs\";\n import * as vscode from \"vscode\";\n import { strict as nativeAssert } from \"assert\";\n import { spawnSync } from \"child_process\";\n@@ -114,15 +113,12 @@ export function isRustEditor(editor: vscode.TextEditor): editor is RustEditor {\n export function isValidExecutable(path: string): boolean {\n     log.debug(\"Checking availability of a binary at\", path);\n \n-    if (!fs.existsSync(path)) return false;\n-\n     const res = spawnSync(path, [\"--version\"], { encoding: 'utf8' });\n \n-    const isSuccess = res.status === 0;\n-    const printOutput = isSuccess ? log.debug : log.warn;\n+    const printOutput = res.error && (res.error as any).code !== 'ENOENT' ? log.warn : log.debug;\n     printOutput(path, \"--version:\", res);\n \n-    return isSuccess;\n+    return res.status === 0;\n }\n \n /** Sets ['when'](https://code.visualstudio.com/docs/getstarted/keybindings#_when-clause-contexts) clause contexts */"}]}