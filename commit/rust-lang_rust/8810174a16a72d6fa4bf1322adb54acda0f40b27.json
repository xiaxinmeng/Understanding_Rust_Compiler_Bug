{"sha": "8810174a16a72d6fa4bf1322adb54acda0f40b27", "node_id": "C_kwDOAAsO6NoAKDg4MTAxNzRhMTZhNzJkNmZhNGJmMTMyMmFkYjU0YWNkYTBmNDBiMjc", "commit": {"author": {"name": "Joshua Nelson", "email": "jnelson@cloudflare.com", "date": "2022-10-30T21:38:40Z"}, "committer": {"name": "Joshua Nelson", "email": "jnelson@cloudflare.com", "date": "2022-10-30T21:43:56Z"}, "message": "Remove unnecessary argument to `package`", "tree": {"sha": "6e2bf118a501bebb057ecfa618d261ab42ec153f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6e2bf118a501bebb057ecfa618d261ab42ec153f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8810174a16a72d6fa4bf1322adb54acda0f40b27", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8810174a16a72d6fa4bf1322adb54acda0f40b27", "html_url": "https://github.com/rust-lang/rust/commit/8810174a16a72d6fa4bf1322adb54acda0f40b27", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8810174a16a72d6fa4bf1322adb54acda0f40b27/comments", "author": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1aab5d570baca5d776b9e6c670791391fe39bd6d", "url": "https://api.github.com/repos/rust-lang/rust/commits/1aab5d570baca5d776b9e6c670791391fe39bd6d", "html_url": "https://github.com/rust-lang/rust/commit/1aab5d570baca5d776b9e6c670791391fe39bd6d"}], "stats": {"total": 11, "additions": 3, "deletions": 8}, "files": [{"sha": "371e60f969e5891174d8dce79a08aa101329faad", "filename": "src/tools/build-manifest/src/main.rs", "status": "modified", "additions": 3, "deletions": 8, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/8810174a16a72d6fa4bf1322adb54acda0f40b27/src%2Ftools%2Fbuild-manifest%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8810174a16a72d6fa4bf1322adb54acda0f40b27/src%2Ftools%2Fbuild-manifest%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fbuild-manifest%2Fsrc%2Fmain.rs?ref=8810174a16a72d6fa4bf1322adb54acda0f40b27", "patch": "@@ -284,8 +284,7 @@ impl Builder {\n \n     fn add_packages_to(&mut self, manifest: &mut Manifest) {\n         for pkg in PkgType::all() {\n-            let fallback = if pkg.use_docs_fallback() { DOCS_FALLBACK } else { &[] };\n-            self.package(pkg, &mut manifest.pkg, fallback);\n+            self.package(pkg, &mut manifest.pkg);\n         }\n     }\n \n@@ -471,18 +470,14 @@ impl Builder {\n             .extend(pkgs.iter().map(|s| s.manifest_component_name()));\n     }\n \n-    fn package(\n-        &mut self,\n-        pkg: &PkgType,\n-        dst: &mut BTreeMap<String, Package>,\n-        fallback: &[(&str, &str)],\n-    ) {\n+    fn package(&mut self, pkg: &PkgType, dst: &mut BTreeMap<String, Package>) {\n         if *pkg == PkgType::Rust {\n             // This is handled specially by `rust_package` later.\n             // Order is important, so don't call `rust_package` here.\n             return;\n         }\n \n+        let fallback = if pkg.use_docs_fallback() { DOCS_FALLBACK } else { &[] };\n         let version_info = self.versions.version(&pkg).expect(\"failed to load package version\");\n         let mut is_present = version_info.present;\n "}]}