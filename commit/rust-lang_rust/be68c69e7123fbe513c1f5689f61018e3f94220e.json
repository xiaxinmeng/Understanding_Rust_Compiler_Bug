{"sha": "be68c69e7123fbe513c1f5689f61018e3f94220e", "node_id": "C_kwDOAAsO6NoAKGJlNjhjNjllNzEyM2ZiZTUxM2MxZjU2ODlmNjEwMThlM2Y5NDIyMGU", "commit": {"author": {"name": "whtahy", "email": "whtahy@users.noreply.github.com", "date": "2023-04-19T04:44:07Z"}, "committer": {"name": "whtahy", "email": "whtahy@users.noreply.github.com", "date": "2023-04-22T04:47:07Z"}, "message": "add known-bug test for unsound issue 84591", "tree": {"sha": "c902b5fa6bb8e55eceb565cb3999f4c604a90e37", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c902b5fa6bb8e55eceb565cb3999f4c604a90e37"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/be68c69e7123fbe513c1f5689f61018e3f94220e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/be68c69e7123fbe513c1f5689f61018e3f94220e", "html_url": "https://github.com/rust-lang/rust/commit/be68c69e7123fbe513c1f5689f61018e3f94220e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/be68c69e7123fbe513c1f5689f61018e3f94220e/comments", "author": {"login": "whtahy", "id": 19783477, "node_id": "MDQ6VXNlcjE5NzgzNDc3", "avatar_url": "https://avatars.githubusercontent.com/u/19783477?v=4", "gravatar_id": "", "url": "https://api.github.com/users/whtahy", "html_url": "https://github.com/whtahy", "followers_url": "https://api.github.com/users/whtahy/followers", "following_url": "https://api.github.com/users/whtahy/following{/other_user}", "gists_url": "https://api.github.com/users/whtahy/gists{/gist_id}", "starred_url": "https://api.github.com/users/whtahy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/whtahy/subscriptions", "organizations_url": "https://api.github.com/users/whtahy/orgs", "repos_url": "https://api.github.com/users/whtahy/repos", "events_url": "https://api.github.com/users/whtahy/events{/privacy}", "received_events_url": "https://api.github.com/users/whtahy/received_events", "type": "User", "site_admin": false}, "committer": {"login": "whtahy", "id": 19783477, "node_id": "MDQ6VXNlcjE5NzgzNDc3", "avatar_url": "https://avatars.githubusercontent.com/u/19783477?v=4", "gravatar_id": "", "url": "https://api.github.com/users/whtahy", "html_url": "https://github.com/whtahy", "followers_url": "https://api.github.com/users/whtahy/followers", "following_url": "https://api.github.com/users/whtahy/following{/other_user}", "gists_url": "https://api.github.com/users/whtahy/gists{/gist_id}", "starred_url": "https://api.github.com/users/whtahy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/whtahy/subscriptions", "organizations_url": "https://api.github.com/users/whtahy/orgs", "repos_url": "https://api.github.com/users/whtahy/repos", "events_url": "https://api.github.com/users/whtahy/events{/privacy}", "received_events_url": "https://api.github.com/users/whtahy/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cac62ab2dde20adca6e1a9070211afbc784c1d64", "url": "https://api.github.com/repos/rust-lang/rust/commits/cac62ab2dde20adca6e1a9070211afbc784c1d64", "html_url": "https://github.com/rust-lang/rust/commit/cac62ab2dde20adca6e1a9070211afbc784c1d64"}], "stats": {"total": 39, "additions": 39, "deletions": 0}, "files": [{"sha": "9c26cd59d100ab00d12cb4edca6283867d2dbcc0", "filename": "tests/ui/implied-bounds/implied-bounds-on-trait-hierarchy.rs", "status": "added", "additions": 39, "deletions": 0, "changes": 39, "blob_url": "https://github.com/rust-lang/rust/blob/be68c69e7123fbe513c1f5689f61018e3f94220e/tests%2Fui%2Fimplied-bounds%2Fimplied-bounds-on-trait-hierarchy.rs", "raw_url": "https://github.com/rust-lang/rust/raw/be68c69e7123fbe513c1f5689f61018e3f94220e/tests%2Fui%2Fimplied-bounds%2Fimplied-bounds-on-trait-hierarchy.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fimplied-bounds%2Fimplied-bounds-on-trait-hierarchy.rs?ref=be68c69e7123fbe513c1f5689f61018e3f94220e", "patch": "@@ -0,0 +1,39 @@\n+// check-pass\n+// known-bug: #84591\n+\n+// Should fail. Subtrait can incorrectly extend supertrait lifetimes even when\n+// supertrait has weaker implied bounds than subtrait. Strongly related to\n+// issue #25860.\n+\n+trait Subtrait<T>: Supertrait {}\n+trait Supertrait {\n+    fn action(self);\n+}\n+\n+fn subs_to_soup<T, U>(x: T)\n+where\n+    T: Subtrait<U>,\n+{\n+    soup(x)\n+}\n+\n+fn soup<T: Supertrait>(x: T) {\n+    x.action();\n+}\n+\n+impl<'a, 'b: 'a> Supertrait for (&'b str, &mut &'a str) {\n+    fn action(self) {\n+        *self.1 = self.0;\n+    }\n+}\n+\n+impl<'a, 'b> Subtrait<&'a &'b str> for (&'b str, &mut &'a str) {}\n+\n+fn main() {\n+    let mut d = \"hi\";\n+    {\n+        let x = \"Hello World\".to_string();\n+        subs_to_soup((x.as_str(), &mut d));\n+    }\n+    println!(\"{}\", d);\n+}"}]}