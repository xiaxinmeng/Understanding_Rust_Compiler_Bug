{"sha": "4c1f17af7d0085636434a8bc85e62434eb128516", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRjMWYxN2FmN2QwMDg1NjM2NDM0YThiYzg1ZTYyNDM0ZWIxMjg1MTY=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-08-28T17:26:57Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-08-28T17:26:57Z"}, "message": "completion snippets", "tree": {"sha": "d9927dca315ced755404f719712cd8738e18c405", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d9927dca315ced755404f719712cd8738e18c405"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4c1f17af7d0085636434a8bc85e62434eb128516", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4c1f17af7d0085636434a8bc85e62434eb128516", "html_url": "https://github.com/rust-lang/rust/commit/4c1f17af7d0085636434a8bc85e62434eb128516", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4c1f17af7d0085636434a8bc85e62434eb128516/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b6c654e233170837a105925d03e1e9752f70d3fc", "url": "https://api.github.com/repos/rust-lang/rust/commits/b6c654e233170837a105925d03e1e9752f70d3fc", "html_url": "https://github.com/rust-lang/rust/commit/b6c654e233170837a105925d03e1e9752f70d3fc"}], "stats": {"total": 11, "additions": 9, "deletions": 2}, "files": [{"sha": "7e8669822132122eeb2e40b6f07a024fee2a5c2a", "filename": "crates/libeditor/src/completion.rs", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/4c1f17af7d0085636434a8bc85e62434eb128516/crates%2Flibeditor%2Fsrc%2Fcompletion.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4c1f17af7d0085636434a8bc85e62434eb128516/crates%2Flibeditor%2Fsrc%2Fcompletion.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Flibeditor%2Fsrc%2Fcompletion.rs?ref=4c1f17af7d0085636434a8bc85e62434eb128516", "patch": "@@ -14,6 +14,7 @@ use {\n #[derive(Debug)]\n pub struct CompletionItem {\n     pub name: String,\n+    pub snippet: Option<String>\n }\n \n pub fn scope_completion(file: &File, offset: TextUnit) -> Option<Vec<CompletionItem>> {\n@@ -33,7 +34,10 @@ pub fn scope_completion(file: &File, offset: TextUnit) -> Option<Vec<CompletionI\n         let scope = ModuleScope::new(root);\n         res.extend(\n             scope.entries().iter()\n-                .map(|entry| CompletionItem { name: entry.name().to_string() })\n+                .map(|entry| CompletionItem {\n+                    name: entry.name().to_string(),\n+                    snippet: None,\n+                })\n         )\n     }\n     Some(res)\n@@ -43,7 +47,10 @@ fn complete_fn(name_ref: ast::NameRef, scopes: &FnScopes, acc: &mut Vec<Completi\n     acc.extend(\n         scopes.scope_chain(name_ref.syntax())\n             .flat_map(|scope| scopes.entries(scope).iter())\n-            .map(|entry| CompletionItem { name: entry.name().to_string() })\n+            .map(|entry| CompletionItem {\n+                name: entry.name().to_string(),\n+                snippet: None,\n+            })\n     )\n }\n "}]}