{"sha": "0d80ee705f8a7acb65b5ecb05ae0e6deaa97bb53", "node_id": "C_kwDOAAsO6NoAKDBkODBlZTcwNWY4YTdhY2I2NWI1ZWNiMDVhZTBlNmRlYWE5N2JiNTM", "commit": {"author": {"name": "David Wood", "email": "david.wood@huawei.com", "date": "2022-08-19T13:45:54Z"}, "committer": {"name": "Giacomo Stevanato", "email": "giaco.stevanato@gmail.com", "date": "2022-08-22T18:09:18Z"}, "message": "errors: `IntoDiagnosticArg` for `io::Error`/paths\n\nAdd impls of `IntoDiagnosticArg` for `std::io::Error`, `std::path::Path`\nand `std::path::PathBuf`.\n\nSigned-off-by: David Wood <david.wood@huawei.com>", "tree": {"sha": "6bdb42903f70db0181e7dbf18d4294c3cfddfc57", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6bdb42903f70db0181e7dbf18d4294c3cfddfc57"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0d80ee705f8a7acb65b5ecb05ae0e6deaa97bb53", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0d80ee705f8a7acb65b5ecb05ae0e6deaa97bb53", "html_url": "https://github.com/rust-lang/rust/commit/0d80ee705f8a7acb65b5ecb05ae0e6deaa97bb53", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0d80ee705f8a7acb65b5ecb05ae0e6deaa97bb53/comments", "author": {"login": "davidtwco", "id": 1295100, "node_id": "MDQ6VXNlcjEyOTUxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1295100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidtwco", "html_url": "https://github.com/davidtwco", "followers_url": "https://api.github.com/users/davidtwco/followers", "following_url": "https://api.github.com/users/davidtwco/following{/other_user}", "gists_url": "https://api.github.com/users/davidtwco/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidtwco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidtwco/subscriptions", "organizations_url": "https://api.github.com/users/davidtwco/orgs", "repos_url": "https://api.github.com/users/davidtwco/repos", "events_url": "https://api.github.com/users/davidtwco/events{/privacy}", "received_events_url": "https://api.github.com/users/davidtwco/received_events", "type": "User", "site_admin": false}, "committer": {"login": "SkiFire13", "id": 9020423, "node_id": "MDQ6VXNlcjkwMjA0MjM=", "avatar_url": "https://avatars.githubusercontent.com/u/9020423?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SkiFire13", "html_url": "https://github.com/SkiFire13", "followers_url": "https://api.github.com/users/SkiFire13/followers", "following_url": "https://api.github.com/users/SkiFire13/following{/other_user}", "gists_url": "https://api.github.com/users/SkiFire13/gists{/gist_id}", "starred_url": "https://api.github.com/users/SkiFire13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SkiFire13/subscriptions", "organizations_url": "https://api.github.com/users/SkiFire13/orgs", "repos_url": "https://api.github.com/users/SkiFire13/repos", "events_url": "https://api.github.com/users/SkiFire13/events{/privacy}", "received_events_url": "https://api.github.com/users/SkiFire13/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "217a11bdb1d95fbed608636025e9eee9b9daaeb4", "url": "https://api.github.com/repos/rust-lang/rust/commits/217a11bdb1d95fbed608636025e9eee9b9daaeb4", "html_url": "https://github.com/rust-lang/rust/commit/217a11bdb1d95fbed608636025e9eee9b9daaeb4"}], "stats": {"total": 14, "additions": 14, "deletions": 0}, "files": [{"sha": "506198df4d8edd2e24896c219bd9e9416ee576ba", "filename": "compiler/rustc_errors/src/diagnostic.rs", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/0d80ee705f8a7acb65b5ecb05ae0e6deaa97bb53/compiler%2Frustc_errors%2Fsrc%2Fdiagnostic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0d80ee705f8a7acb65b5ecb05ae0e6deaa97bb53/compiler%2Frustc_errors%2Fsrc%2Fdiagnostic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_errors%2Fsrc%2Fdiagnostic.rs?ref=0d80ee705f8a7acb65b5ecb05ae0e6deaa97bb53", "patch": "@@ -13,6 +13,7 @@ use rustc_span::{edition::Edition, Span, DUMMY_SP};\n use std::borrow::Cow;\n use std::fmt;\n use std::hash::{Hash, Hasher};\n+use std::path::{Path, PathBuf};\n \n /// Error type for `Diagnostic`'s `suggestions` field, indicating that\n /// `.disable_suggestions()` was called on the `Diagnostic`.\n@@ -83,6 +84,7 @@ into_diagnostic_arg_using_display!(\n     u64,\n     i128,\n     u128,\n+    std::io::Error,\n     std::num::NonZeroU32,\n     hir::Target,\n     Edition,\n@@ -124,6 +126,18 @@ impl IntoDiagnosticArg for String {\n     }\n }\n \n+impl<'a> IntoDiagnosticArg for &'a Path {\n+    fn into_diagnostic_arg(self) -> DiagnosticArgValue<'static> {\n+        DiagnosticArgValue::Str(Cow::Owned(self.display().to_string()))\n+    }\n+}\n+\n+impl IntoDiagnosticArg for PathBuf {\n+    fn into_diagnostic_arg(self) -> DiagnosticArgValue<'static> {\n+        DiagnosticArgValue::Str(Cow::Owned(self.display().to_string()))\n+    }\n+}\n+\n impl IntoDiagnosticArg for usize {\n     fn into_diagnostic_arg(self) -> DiagnosticArgValue<'static> {\n         DiagnosticArgValue::Number(self)"}]}