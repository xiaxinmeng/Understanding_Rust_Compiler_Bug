{"sha": "ac968c466451cb9aafd9e8598ddb396ed0e6fe31", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFjOTY4YzQ2NjQ1MWNiOWFhZmQ5ZTg1OThkZGIzOTZlZDBlNmZlMzE=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2016-11-01T10:53:42Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2016-11-01T10:53:42Z"}, "message": "Auto merge of #37299 - devonhollowood:result-unwrap-or-default, r=alexcrichton\n\nAdd `unwrap_or_default` method to `Result`\n\nFixes #37025", "tree": {"sha": "c8876882be5803e7bf2074c50e22f53c34faa0eb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c8876882be5803e7bf2074c50e22f53c34faa0eb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ac968c466451cb9aafd9e8598ddb396ed0e6fe31", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ac968c466451cb9aafd9e8598ddb396ed0e6fe31", "html_url": "https://github.com/rust-lang/rust/commit/ac968c466451cb9aafd9e8598ddb396ed0e6fe31", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ac968c466451cb9aafd9e8598ddb396ed0e6fe31/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "73f5cad6c436bb3fdf460d9671d92d1133c614a2", "url": "https://api.github.com/repos/rust-lang/rust/commits/73f5cad6c436bb3fdf460d9671d92d1133c614a2", "html_url": "https://github.com/rust-lang/rust/commit/73f5cad6c436bb3fdf460d9671d92d1133c614a2"}, {"sha": "5d31a818df97e8a71545e5ba6de0627abb7837ee", "url": "https://api.github.com/repos/rust-lang/rust/commits/5d31a818df97e8a71545e5ba6de0627abb7837ee", "html_url": "https://github.com/rust-lang/rust/commit/5d31a818df97e8a71545e5ba6de0627abb7837ee"}], "stats": {"total": 45, "additions": 45, "deletions": 0}, "files": [{"sha": "3d34f62006785641c00e6bc167637fa632e7a4f9", "filename": "src/libcore/result.rs", "status": "modified", "additions": 38, "deletions": 0, "changes": 38, "blob_url": "https://github.com/rust-lang/rust/blob/ac968c466451cb9aafd9e8598ddb396ed0e6fe31/src%2Flibcore%2Fresult.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ac968c466451cb9aafd9e8598ddb396ed0e6fe31/src%2Flibcore%2Fresult.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fresult.rs?ref=ac968c466451cb9aafd9e8598ddb396ed0e6fe31", "patch": "@@ -792,6 +792,44 @@ impl<T: fmt::Debug, E> Result<T, E> {\n     }\n }\n \n+impl<T: Default, E> Result<T, E> {\n+    /// Returns the contained value or a default\n+    ///\n+    /// Consumes the `self` argument then, if `Ok`, returns the contained\n+    /// value, otherwise if `Err`, returns the default value for that\n+    /// type.\n+    ///\n+    /// # Examples\n+    ///\n+    /// Convert a string to an integer, turning poorly-formed strings\n+    /// into 0 (the default value for integers). [`parse`] converts\n+    /// a string to any other type that implements [`FromStr`], returning an\n+    /// `Err` on error.\n+    ///\n+    /// ```\n+    /// #![feature(result_unwrap_or_default)]\n+    ///\n+    /// let good_year_from_input = \"1909\";\n+    /// let bad_year_from_input = \"190blarg\";\n+    /// let good_year = good_year_from_input.parse().unwrap_or_default();\n+    /// let bad_year = bad_year_from_input.parse().unwrap_or_default();\n+    ///\n+    /// assert_eq!(1909, good_year);\n+    /// assert_eq!(0, bad_year);\n+    ///\n+    /// [`parse`]: ../../std/primitive.str.html#method.parse\n+    /// [`FromStr`]: ../../std/str/trait.FromStr.html\n+    /// ```\n+    #[inline]\n+    #[unstable(feature = \"result_unwrap_or_default\", issue = \"0\")]\n+    pub fn unwrap_or_default(self) -> T {\n+        match self {\n+            Ok(x) => x,\n+            Err(_) => Default::default(),\n+        }\n+    }\n+}\n+\n // This is a separate function to reduce the code size of the methods\n #[inline(never)]\n #[cold]"}, {"sha": "cdbc2147318069a7bb607e3888a5eeddfe04d6d6", "filename": "src/libcoretest/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ac968c466451cb9aafd9e8598ddb396ed0e6fe31/src%2Flibcoretest%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ac968c466451cb9aafd9e8598ddb396ed0e6fe31/src%2Flibcoretest%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcoretest%2Flib.rs?ref=ac968c466451cb9aafd9e8598ddb396ed0e6fe31", "patch": "@@ -34,6 +34,7 @@\n #![feature(unique)]\n #![feature(iter_max_by)]\n #![feature(iter_min_by)]\n+#![feature(result_unwrap_or_default)]\n \n extern crate core;\n extern crate test;"}, {"sha": "bc2cd8bbfc6512158415e957a23f408378b881c2", "filename": "src/libcoretest/result.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/ac968c466451cb9aafd9e8598ddb396ed0e6fe31/src%2Flibcoretest%2Fresult.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ac968c466451cb9aafd9e8598ddb396ed0e6fe31/src%2Flibcoretest%2Fresult.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcoretest%2Fresult.rs?ref=ac968c466451cb9aafd9e8598ddb396ed0e6fe31", "patch": "@@ -183,3 +183,9 @@ pub fn test_iter_mut() {\n     }\n     assert_eq!(err, Err(\"error\"));\n }\n+\n+#[test]\n+pub fn test_unwrap_or_default() {\n+    assert_eq!(op1().unwrap_or_default(), 666);\n+    assert_eq!(op2().unwrap_or_default(), 0);\n+}"}]}