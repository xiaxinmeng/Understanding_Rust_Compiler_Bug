{"sha": "2e496818a5433c9229b125117d78be906f73f5e7", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJlNDk2ODE4YTU0MzNjOTIyOWIxMjUxMTdkNzhiZTkwNmY3M2Y1ZTc=", "commit": {"author": {"name": "Daniel Micay", "email": "danielmicay@gmail.com", "date": "2013-02-02T19:03:43Z"}, "committer": {"name": "Daniel Micay", "email": "danielmicay@gmail.com", "date": "2013-02-03T20:55:10Z"}, "message": "oldmap: get rid of the legacy each_key method", "tree": {"sha": "fd363c25ac3de81f623229d89bc2bc40fa120476", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fd363c25ac3de81f623229d89bc2bc40fa120476"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2e496818a5433c9229b125117d78be906f73f5e7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2e496818a5433c9229b125117d78be906f73f5e7", "html_url": "https://github.com/rust-lang/rust/commit/2e496818a5433c9229b125117d78be906f73f5e7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2e496818a5433c9229b125117d78be906f73f5e7/comments", "author": {"login": "thestinger", "id": 1505226, "node_id": "MDQ6VXNlcjE1MDUyMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thestinger", "html_url": "https://github.com/thestinger", "followers_url": "https://api.github.com/users/thestinger/followers", "following_url": "https://api.github.com/users/thestinger/following{/other_user}", "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions", "organizations_url": "https://api.github.com/users/thestinger/orgs", "repos_url": "https://api.github.com/users/thestinger/repos", "events_url": "https://api.github.com/users/thestinger/events{/privacy}", "received_events_url": "https://api.github.com/users/thestinger/received_events", "type": "User", "site_admin": false}, "committer": {"login": "thestinger", "id": 1505226, "node_id": "MDQ6VXNlcjE1MDUyMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thestinger", "html_url": "https://github.com/thestinger", "followers_url": "https://api.github.com/users/thestinger/followers", "following_url": "https://api.github.com/users/thestinger/following{/other_user}", "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions", "organizations_url": "https://api.github.com/users/thestinger/orgs", "repos_url": "https://api.github.com/users/thestinger/repos", "events_url": "https://api.github.com/users/thestinger/events{/privacy}", "received_events_url": "https://api.github.com/users/thestinger/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "88d9d417a1ee3f3379a95583c90a78fd7e7cb2d2", "url": "https://api.github.com/repos/rust-lang/rust/commits/88d9d417a1ee3f3379a95583c90a78fd7e7cb2d2", "html_url": "https://github.com/rust-lang/rust/commit/88d9d417a1ee3f3379a95583c90a78fd7e7cb2d2"}], "stats": {"total": 22, "additions": 9, "deletions": 13}, "files": [{"sha": "52addaa4fec1a2e5aa6ef1cb8e5853a1ec005ee5", "filename": "src/libcargo/cargo.rc", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/2e496818a5433c9229b125117d78be906f73f5e7/src%2Flibcargo%2Fcargo.rc", "raw_url": "https://github.com/rust-lang/rust/raw/2e496818a5433c9229b125117d78be906f73f5e7/src%2Flibcargo%2Fcargo.rc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcargo%2Fcargo.rc?ref=2e496818a5433c9229b125117d78be906f73f5e7", "patch": "@@ -730,7 +730,7 @@ pub fn configure(opts: Options) -> Cargo {\n     need_dir(&c.libdir);\n     need_dir(&c.bindir);\n \n-    for sources.each_key |k| {\n+    for sources.each_key_ref |&k| {\n         let mut s = sources.get(k);\n         load_source_packages(&c, s);\n         sources.insert(k, s);\n@@ -1155,7 +1155,7 @@ pub fn cmd_install(c: &Cargo) {\n }\n \n pub fn sync(c: &Cargo) {\n-    for c.sources.each_key |k| {\n+    for c.sources.each_key_ref |&k| {\n         let mut s = c.sources.get(k);\n         sync_one(c, s);\n         c.sources.insert(k, s);\n@@ -1686,7 +1686,7 @@ pub fn cmd_sources(c: &Cargo) {\n \n     match action {\n         ~\"clear\" => {\n-          for c.sources.each_key |k| {\n+          for c.sources.each_key_ref |&k| {\n                 c.sources.remove(k);\n             }\n "}, {"sha": "5ad8fd4c8208ce311fcb37619759f493743ef2e8", "filename": "src/librustc/middle/typeck/coherence.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2e496818a5433c9229b125117d78be906f73f5e7/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcoherence.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2e496818a5433c9229b125117d78be906f73f5e7/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcoherence.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcoherence.rs?ref=2e496818a5433c9229b125117d78be906f73f5e7", "patch": "@@ -417,7 +417,7 @@ pub impl CoherenceChecker {\n         let coherence_info = &self.crate_context.coherence_info;\n         let extension_methods = &coherence_info.extension_methods;\n \n-        for extension_methods.each_key |trait_id| {\n+        for extension_methods.each_key_ref |&trait_id| {\n             self.check_implementation_coherence_of(trait_id);\n         }\n     }"}, {"sha": "e29fcf69ef937959bedb374f960fe76323de4844", "filename": "src/librustc/rustc.rc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2e496818a5433c9229b125117d78be906f73f5e7/src%2Flibrustc%2Frustc.rc", "raw_url": "https://github.com/rust-lang/rust/raw/2e496818a5433c9229b125117d78be906f73f5e7/src%2Flibrustc%2Frustc.rc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Frustc.rc?ref=2e496818a5433c9229b125117d78be906f73f5e7", "patch": "@@ -177,7 +177,7 @@ Available lint options:\n \n     let lint_dict = lint::get_lint_dict();\n     let mut max_key = 0;\n-    for lint_dict.each_key |k| { max_key = uint::max(k.len(), max_key); }\n+    for lint_dict.each_key_ref |&k| { max_key = uint::max(k.len(), max_key); }\n     fn padded(max: uint, s: &str) -> ~str {\n         str::from_bytes(vec::from_elem(max - s.len(), ' ' as u8)) + s\n     }"}, {"sha": "7fd8aabc2fb303b23d8f2b7bc7954a43947665f9", "filename": "src/libstd/oldmap.rs", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/2e496818a5433c9229b125117d78be906f73f5e7/src%2Flibstd%2Foldmap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2e496818a5433c9229b125117d78be906f73f5e7/src%2Flibstd%2Foldmap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Foldmap.rs?ref=2e496818a5433c9229b125117d78be906f73f5e7", "patch": "@@ -320,10 +320,6 @@ pub mod chained {\n             self.each_ref(|k, v| blk(*k, *v))\n         }\n \n-        pure fn each_key(blk: fn(key: K) -> bool) {\n-            self.each_key_ref(|p| blk(*p))\n-        }\n-\n         pure fn each_ref(blk: fn(key: &K, value: &V) -> bool) {\n             for self.each_entry |entry| {\n                 if !blk(&entry.key, &entry.value) { break; }\n@@ -407,7 +403,7 @@ pub fn set_add<K:Eq IterBytes Hash Const Copy>(set: Set<K>, key: K) -> bool {\n /// Convert a set into a vector.\n pub pure fn vec_from_set<T:Eq IterBytes Hash Copy>(s: Set<T>) -> ~[T] {\n     do vec::build_sized(s.len()) |push| {\n-        for s.each_key() |k| {\n+        for s.each_key_ref() |&k| {\n             push(k);\n         }\n     }"}, {"sha": "2770d823bf3776bfdb70be874dcd12ecf72a5e2c", "filename": "src/libsyntax/parse/token.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/2e496818a5433c9229b125117d78be906f73f5e7/src%2Flibsyntax%2Fparse%2Ftoken.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2e496818a5433c9229b125117d78be906f73f5e7/src%2Flibsyntax%2Fparse%2Ftoken.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Ftoken.rs?ref=2e496818a5433c9229b125117d78be906f73f5e7", "patch": "@@ -454,13 +454,13 @@ pub fn mk_fake_ident_interner() -> @ident_interner {\n  */\n pub fn keyword_table() -> HashMap<~str, ()> {\n     let keywords = HashMap();\n-    for temporary_keyword_table().each_key |word| {\n+    for temporary_keyword_table().each_key_ref |&word| {\n         keywords.insert(word, ());\n     }\n-    for strict_keyword_table().each_key |word| {\n+    for strict_keyword_table().each_key_ref |&word| {\n         keywords.insert(word, ());\n     }\n-    for reserved_keyword_table().each_key |word| {\n+    for reserved_keyword_table().each_key_ref |&word| {\n         keywords.insert(word, ());\n     }\n     keywords"}]}