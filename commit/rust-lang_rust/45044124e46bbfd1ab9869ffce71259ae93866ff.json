{"sha": "45044124e46bbfd1ab9869ffce71259ae93866ff", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ1MDQ0MTI0ZTQ2YmJmZDFhYjk4NjlmZmNlNzEyNTlhZTkzODY2ZmY=", "commit": {"author": {"name": "P1start", "email": "rewi-github@whanau.org", "date": "2014-09-13T01:59:15Z"}, "committer": {"name": "P1start", "email": "rewi-github@whanau.org", "date": "2014-10-03T07:39:56Z"}, "message": "Improve the `non_snake_case` lint to give better suggestions", "tree": {"sha": "61c40510ab81a455ad14742397b4a605444d072a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/61c40510ab81a455ad14742397b4a605444d072a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/45044124e46bbfd1ab9869ffce71259ae93866ff", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/45044124e46bbfd1ab9869ffce71259ae93866ff", "html_url": "https://github.com/rust-lang/rust/commit/45044124e46bbfd1ab9869ffce71259ae93866ff", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/45044124e46bbfd1ab9869ffce71259ae93866ff/comments", "author": {"login": "ftxqxd", "id": 2055302, "node_id": "MDQ6VXNlcjIwNTUzMDI=", "avatar_url": "https://avatars.githubusercontent.com/u/2055302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ftxqxd", "html_url": "https://github.com/ftxqxd", "followers_url": "https://api.github.com/users/ftxqxd/followers", "following_url": "https://api.github.com/users/ftxqxd/following{/other_user}", "gists_url": "https://api.github.com/users/ftxqxd/gists{/gist_id}", "starred_url": "https://api.github.com/users/ftxqxd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ftxqxd/subscriptions", "organizations_url": "https://api.github.com/users/ftxqxd/orgs", "repos_url": "https://api.github.com/users/ftxqxd/repos", "events_url": "https://api.github.com/users/ftxqxd/events{/privacy}", "received_events_url": "https://api.github.com/users/ftxqxd/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ftxqxd", "id": 2055302, "node_id": "MDQ6VXNlcjIwNTUzMDI=", "avatar_url": "https://avatars.githubusercontent.com/u/2055302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ftxqxd", "html_url": "https://github.com/ftxqxd", "followers_url": "https://api.github.com/users/ftxqxd/followers", "following_url": "https://api.github.com/users/ftxqxd/following{/other_user}", "gists_url": "https://api.github.com/users/ftxqxd/gists{/gist_id}", "starred_url": "https://api.github.com/users/ftxqxd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ftxqxd/subscriptions", "organizations_url": "https://api.github.com/users/ftxqxd/orgs", "repos_url": "https://api.github.com/users/ftxqxd/repos", "events_url": "https://api.github.com/users/ftxqxd/events{/privacy}", "received_events_url": "https://api.github.com/users/ftxqxd/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "333592edde810324c9730a89372fa5164d10871d", "url": "https://api.github.com/repos/rust-lang/rust/commits/333592edde810324c9730a89372fa5164d10871d", "html_url": "https://github.com/rust-lang/rust/commit/333592edde810324c9730a89372fa5164d10871d"}], "stats": {"total": 11, "additions": 9, "deletions": 2}, "files": [{"sha": "ea647fda84823e3f8ed3db059724f2447cd82fd1", "filename": "src/librustc/lint/builtin.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/45044124e46bbfd1ab9869ffce71259ae93866ff/src%2Flibrustc%2Flint%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45044124e46bbfd1ab9869ffce71259ae93866ff/src%2Flibrustc%2Flint%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Flint%2Fbuiltin.rs?ref=45044124e46bbfd1ab9869ffce71259ae93866ff", "patch": "@@ -871,13 +871,17 @@ impl NonSnakeCase {\n         fn to_snake_case(str: &str) -> String {\n             let mut words = vec![];\n             for s in str.split('_') {\n+                let mut last_upper = false;\n                 let mut buf = String::new();\n                 if s.is_empty() { continue; }\n                 for ch in s.chars() {\n-                    if !buf.is_empty() && buf.as_slice() != \"'\" && ch.is_uppercase() {\n+                    if !buf.is_empty() && buf.as_slice() != \"'\"\n+                                       && ch.is_uppercase()\n+                                       && !last_upper {\n                         words.push(buf);\n                         buf = String::new();\n                     }\n+                    last_upper = ch.is_uppercase();\n                     buf.push_char(ch.to_lowercase());\n                 }\n                 words.push(buf);"}, {"sha": "6cfdc6ad90b91eae7bc309e676c562b1769a609d", "filename": "src/test/compile-fail/lint-non-snake-case-functions.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/45044124e46bbfd1ab9869ffce71259ae93866ff/src%2Ftest%2Fcompile-fail%2Flint-non-snake-case-functions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45044124e46bbfd1ab9869ffce71259ae93866ff/src%2Ftest%2Fcompile-fail%2Flint-non-snake-case-functions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Flint-non-snake-case-functions.rs?ref=45044124e46bbfd1ab9869ffce71259ae93866ff", "patch": "@@ -23,11 +23,14 @@ impl Foo {\n \n     pub fn xyZ(&mut self) {}\n     //~^ ERROR method `xyZ` should have a snake case name such as `xy_z`\n+\n+    fn render_HTML() {}\n+    //~^ ERROR method `render_HTML` should have a snake case name such as `render_html`\n }\n \n trait X {\n     fn ABC();\n-    //~^ ERROR trait method `ABC` should have a snake case name such as `a_b_c`\n+    //~^ ERROR trait method `ABC` should have a snake case name such as `abc`\n \n     fn a_b_C(&self) {}\n     //~^ ERROR trait method `a_b_C` should have a snake case name such as `a_b_c`"}]}