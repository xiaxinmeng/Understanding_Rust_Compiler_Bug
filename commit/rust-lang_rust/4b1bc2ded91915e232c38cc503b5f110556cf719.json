{"sha": "4b1bc2ded91915e232c38cc503b5f110556cf719", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRiMWJjMmRlZDkxOTE1ZTIzMmMzOGNjNTAzYjVmMTEwNTU2Y2Y3MTk=", "commit": {"author": {"name": "David Wood", "email": "david@davidtw.co", "date": "2019-06-13T16:30:49Z"}, "committer": {"name": "David Wood", "email": "david@davidtw.co", "date": "2019-07-07T19:23:31Z"}, "message": "tests: Add tests that use const fns.", "tree": {"sha": "7b4f9758046afa9a8019fe39f93a7d09f7435708", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7b4f9758046afa9a8019fe39f93a7d09f7435708"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4b1bc2ded91915e232c38cc503b5f110556cf719", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEfgm2/wUjk9OnjxlyJZLnbIc4H9kFAl0iRrMACgkQJZLnbIc4\nH9mCZw/9HOZNmQK8qjfeADplwx+hWy7dHCc0z8NS6mAfRYNdlOKT+ZQxStMzd7Aj\n8FJHeRxMWQe5fFz9xwqYaGu29LZE02IHEVx0CfBsKo+GncXzCPsMc0u9nwbpHPy8\n0P18vL1mPRgDDvcXnGt7KDojz6IqhWQ1b0x2S0R1+9p2Rtbjpc3D4SNMcgeaFF7F\nKsS/slvJMSWkw5wbcjq6xzTRb6BuSdhaym3KpXqYAPMJnGf22IkE/v8WWJrJH1nD\nkqbZONk7Qf+yY0z/Vb7k8am302iKNsMssiwfgMDH1S6oFKqJmyzW8ERqbxk9RFB+\nqcZzd3Ep/VWpZq/cIMneMVrbn3lI2uPYQJmmpRWtxm5iRfAUjn+oc8znY3dRWLyC\nB9Vl0er9vk8C2ZbUgzFTop28HLz+Cee1+kBLdziB4DQFiHsedyMin/4TUCo3hTXM\nnFTJoVr6Itp2j6Kz2BplmeaLYxjGD3YHu578DprKG1rFaME5QW8EOF1wBfM4kQji\nwfZJVnbugcoRT4kFyBFY5zuNubnIzYwaXzJg2FNxLb6LGNilwAEDOqakmDMB80wJ\n8jNodGaNy7qKGOygpMKOPRhkicmIuExuU5CTbxt7JqnTOxAoZnzTiHIndhC1sC3p\nvsvhLpFInJEeISm1QlafbR9pY7H02dwtJUSrSvs4ZEYVPthzmdY=\n=wU73\n-----END PGP SIGNATURE-----", "payload": "tree 7b4f9758046afa9a8019fe39f93a7d09f7435708\nparent a655438988c5f7d100a5423752b7ae0287d582fd\nauthor David Wood <david@davidtw.co> 1560443449 +0100\ncommitter David Wood <david@davidtw.co> 1562527411 +0100\n\ntests: Add tests that use const fns.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4b1bc2ded91915e232c38cc503b5f110556cf719", "html_url": "https://github.com/rust-lang/rust/commit/4b1bc2ded91915e232c38cc503b5f110556cf719", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4b1bc2ded91915e232c38cc503b5f110556cf719/comments", "author": {"login": "davidtwco", "id": 1295100, "node_id": "MDQ6VXNlcjEyOTUxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1295100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidtwco", "html_url": "https://github.com/davidtwco", "followers_url": "https://api.github.com/users/davidtwco/followers", "following_url": "https://api.github.com/users/davidtwco/following{/other_user}", "gists_url": "https://api.github.com/users/davidtwco/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidtwco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidtwco/subscriptions", "organizations_url": "https://api.github.com/users/davidtwco/orgs", "repos_url": "https://api.github.com/users/davidtwco/repos", "events_url": "https://api.github.com/users/davidtwco/events{/privacy}", "received_events_url": "https://api.github.com/users/davidtwco/received_events", "type": "User", "site_admin": false}, "committer": {"login": "davidtwco", "id": 1295100, "node_id": "MDQ6VXNlcjEyOTUxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1295100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidtwco", "html_url": "https://github.com/davidtwco", "followers_url": "https://api.github.com/users/davidtwco/followers", "following_url": "https://api.github.com/users/davidtwco/following{/other_user}", "gists_url": "https://api.github.com/users/davidtwco/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidtwco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidtwco/subscriptions", "organizations_url": "https://api.github.com/users/davidtwco/orgs", "repos_url": "https://api.github.com/users/davidtwco/repos", "events_url": "https://api.github.com/users/davidtwco/events{/privacy}", "received_events_url": "https://api.github.com/users/davidtwco/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a655438988c5f7d100a5423752b7ae0287d582fd", "url": "https://api.github.com/repos/rust-lang/rust/commits/a655438988c5f7d100a5423752b7ae0287d582fd", "html_url": "https://github.com/rust-lang/rust/commit/a655438988c5f7d100a5423752b7ae0287d582fd"}], "stats": {"total": 39, "additions": 39, "deletions": 0}, "files": [{"sha": "68a9227dea96ed4dd22549b440f5271099744495", "filename": "src/test/ui/consts/rfc-2203-const-array-repeat-exprs/const-fns.rs", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/4b1bc2ded91915e232c38cc503b5f110556cf719/src%2Ftest%2Fui%2Fconsts%2Frfc-2203-const-array-repeat-exprs%2Fconst-fns.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4b1bc2ded91915e232c38cc503b5f110556cf719/src%2Ftest%2Fui%2Fconsts%2Frfc-2203-const-array-repeat-exprs%2Fconst-fns.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Frfc-2203-const-array-repeat-exprs%2Fconst-fns.rs?ref=4b1bc2ded91915e232c38cc503b5f110556cf719", "patch": "@@ -0,0 +1,26 @@\n+// ignore-tidy-linelength\n+// ignore-compare-mode-nll\n+#![feature(const_in_array_repeat_expressions, nll)]\n+#![allow(warnings)]\n+\n+// Some type that is not copyable.\n+struct Bar;\n+\n+const fn type_no_copy() -> Option<Bar> {\n+    None\n+}\n+\n+const fn type_copy() -> u32 {\n+    3\n+}\n+\n+fn no_copy() {\n+    const ARR: [Option<Bar>; 2] = [type_no_copy(); 2];\n+    //~^ ERROR the trait bound `std::option::Option<Bar>: std::marker::Copy` is not satisfied [E0277]\n+}\n+\n+fn copy() {\n+    const ARR: [u32; 2] = [type_copy(); 2];\n+}\n+\n+fn main() {}"}, {"sha": "82272af958a2ee9b0657672a955d158865cad8bd", "filename": "src/test/ui/consts/rfc-2203-const-array-repeat-exprs/const-fns.stderr", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/4b1bc2ded91915e232c38cc503b5f110556cf719/src%2Ftest%2Fui%2Fconsts%2Frfc-2203-const-array-repeat-exprs%2Fconst-fns.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4b1bc2ded91915e232c38cc503b5f110556cf719/src%2Ftest%2Fui%2Fconsts%2Frfc-2203-const-array-repeat-exprs%2Fconst-fns.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Frfc-2203-const-array-repeat-exprs%2Fconst-fns.stderr?ref=4b1bc2ded91915e232c38cc503b5f110556cf719", "patch": "@@ -0,0 +1,13 @@\n+error[E0277]: the trait bound `std::option::Option<Bar>: std::marker::Copy` is not satisfied\n+  --> $DIR/const-fns.rs:18:35\n+   |\n+LL |     const ARR: [Option<Bar>; 2] = [type_no_copy(); 2];\n+   |                                   ^^^^^^^^^^^^^^^^^^^ the trait `std::marker::Copy` is not implemented for `std::option::Option<Bar>`\n+   |\n+   = help: the following implementations were found:\n+             <std::option::Option<T> as std::marker::Copy>\n+   = note: the `Copy` trait is required because the repeated element will be copied\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0277`."}]}