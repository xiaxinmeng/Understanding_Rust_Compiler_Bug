{"sha": "1b0b7e95be5f0da032ddd35226792ca469c21684", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFiMGI3ZTk1YmU1ZjBkYTAzMmRkZDM1MjI2NzkyY2E0NjljMjE2ODQ=", "commit": {"author": {"name": "Joshua Nelson", "email": "jyn514@gmail.com", "date": "2021-04-02T08:11:46Z"}, "committer": {"name": "Joshua Nelson", "email": "jyn514@gmail.com", "date": "2021-04-12T13:39:04Z"}, "message": "Update stdarch submodule (to before it switched to const generics)\n\nThis also includes a cherry-pick of\nhttps://github.com/rust-lang/stdarch/commit/ec1461905b421cf0c56adeebb49bbf55bb33fd17\nand https://github.com/rust-lang/stdarch/pull/1108 to fix a build\nfailure.\n\nIt also adds a re-export of various macros to the crate root of libstd -\npreviously they would show up automatically because std_detect was defined\nin the same crate.", "tree": {"sha": "99ede4bb5330bba0d696b4af2db778f447d07c12", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/99ede4bb5330bba0d696b4af2db778f447d07c12"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1b0b7e95be5f0da032ddd35226792ca469c21684", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1b0b7e95be5f0da032ddd35226792ca469c21684", "html_url": "https://github.com/rust-lang/rust/commit/1b0b7e95be5f0da032ddd35226792ca469c21684", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1b0b7e95be5f0da032ddd35226792ca469c21684/comments", "author": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b1b0a1597c40b55b81e5b95ea5fc825a1287b2bb", "url": "https://api.github.com/repos/rust-lang/rust/commits/b1b0a1597c40b55b81e5b95ea5fc825a1287b2bb", "html_url": "https://github.com/rust-lang/rust/commit/b1b0a1597c40b55b81e5b95ea5fc825a1287b2bb"}], "stats": {"total": 43, "additions": 26, "deletions": 17}, "files": [{"sha": "c91fbf6ef95b0a8b00ac62872a12b4f712daeaf2", "filename": "Cargo.lock", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/1b0b7e95be5f0da032ddd35226792ca469c21684/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/1b0b7e95be5f0da032ddd35226792ca469c21684/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=1b0b7e95be5f0da032ddd35226792ca469c21684", "patch": "@@ -5032,10 +5032,22 @@ dependencies = [\n  \"profiler_builtins\",\n  \"rand 0.7.3\",\n  \"rustc-demangle\",\n+ \"std_detect\",\n  \"unwind\",\n  \"wasi\",\n ]\n \n+[[package]]\n+name = \"std_detect\"\n+version = \"0.1.5\"\n+dependencies = [\n+ \"cfg-if 0.1.10\",\n+ \"compiler_builtins\",\n+ \"libc\",\n+ \"rustc-std-workspace-alloc\",\n+ \"rustc-std-workspace-core\",\n+]\n+\n [[package]]\n name = \"string_cache\"\n version = \"0.8.0\""}, {"sha": "e630be47c4621e4a5dcd38e2269345e8edf98af1", "filename": "Cargo.toml", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1b0b7e95be5f0da032ddd35226792ca469c21684/Cargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/1b0b7e95be5f0da032ddd35226792ca469c21684/Cargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.toml?ref=1b0b7e95be5f0da032ddd35226792ca469c21684", "patch": "@@ -45,6 +45,8 @@ exclude = [\n   # not all `Cargo.toml` files are available, so we exclude the `x` binary,\n   # so it can be invoked before the current checkout is set up.\n   \"src/tools/x\",\n+  # stdarch has its own Cargo workspace\n+  \"library/stdarch\",\n ]\n \n [profile.release.package.compiler_builtins]"}, {"sha": "faa926857614e68fb4c3199d602bc9c2d7b36266", "filename": "library/std/Cargo.toml", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/1b0b7e95be5f0da032ddd35226792ca469c21684/library%2Fstd%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/1b0b7e95be5f0da032ddd35226792ca469c21684/library%2Fstd%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2FCargo.toml?ref=1b0b7e95be5f0da032ddd35226792ca469c21684", "patch": "@@ -21,6 +21,7 @@ compiler_builtins = { version = \"0.1.39\" }\n profiler_builtins = { path = \"../profiler_builtins\", optional = true }\n unwind = { path = \"../unwind\" }\n hashbrown = { version = \"0.11\", default-features = false, features = ['rustc-dep-of-std'] }\n+std_detect = { path = \"../stdarch/crates/std_detect\", default-features = false, features = ['rustc-dep-of-std'] }\n \n # Dependencies of the `backtrace` crate\n addr2line = { version = \"0.14.0\", optional = true, default-features = false }\n@@ -70,8 +71,8 @@ panic_immediate_abort = [\"core/panic_immediate_abort\"]\n \n # Enable std_detect default features for stdarch/crates/std_detect:\n # https://github.com/rust-lang/stdarch/blob/master/crates/std_detect/Cargo.toml\n-std_detect_file_io = []\n-std_detect_dlsym_getauxval = []\n+std_detect_file_io = [\"std_detect/std_detect_file_io\"]\n+std_detect_dlsym_getauxval = [\"std_detect/std_detect_dlsym_getauxval\"]\n \n [package.metadata.fortanix-sgx]\n # Maximum possible number of threads when testing"}, {"sha": "3d92ee7c403206d9a757bde425f079f3f00cf9a1", "filename": "library/std/src/lib.rs", "status": "modified", "additions": 8, "deletions": 14, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/1b0b7e95be5f0da032ddd35226792ca469c21684/library%2Fstd%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1b0b7e95be5f0da032ddd35226792ca469c21684/library%2Fstd%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Flib.rs?ref=1b0b7e95be5f0da032ddd35226792ca469c21684", "patch": "@@ -539,22 +539,16 @@ pub mod rt;\n #[allow(dead_code, unused_attributes)]\n mod backtrace_rs;\n \n-// Pull in the `std_detect` crate directly into libstd. The contents of\n-// `std_detect` are in a different repository: rust-lang/stdarch.\n-//\n-// `std_detect` depends on libstd, but the contents of this module are\n-// set up in such a way that directly pulling it here works such that the\n-// crate uses the this crate as its libstd.\n-#[path = \"../../stdarch/crates/std_detect/src/mod.rs\"]\n-#[allow(missing_debug_implementations, missing_docs, dead_code)]\n-#[unstable(feature = \"stdsimd\", issue = \"48556\")]\n-#[cfg(not(test))]\n-mod std_detect;\n-\n+#[stable(feature = \"simd_x86\", since = \"1.27.0\")]\n+pub use std_detect::is_x86_feature_detected;\n #[doc(hidden)]\n #[unstable(feature = \"stdsimd\", issue = \"48556\")]\n-#[cfg(not(test))]\n-pub use std_detect::detect;\n+pub use std_detect::*;\n+#[unstable(feature = \"stdsimd\", issue = \"48556\")]\n+pub use std_detect::{\n+    is_aarch64_feature_detected, is_arm_feature_detected, is_mips64_feature_detected,\n+    is_mips_feature_detected, is_powerpc64_feature_detected, is_powerpc_feature_detected,\n+};\n \n // Re-export macros defined in libcore.\n #[stable(feature = \"rust1\", since = \"1.0.0\")]"}, {"sha": "19f5459dd0f89e466b7bcaa0f69ecca90f21a4d1", "filename": "library/stdarch", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": null, "raw_url": null, "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstdarch?ref=1b0b7e95be5f0da032ddd35226792ca469c21684", "patch": "@@ -1 +1 @@\n-Subproject commit 9c732a56f67f54d12a0b4fd99993154906c95ea6\n+Subproject commit 19f5459dd0f89e466b7bcaa0f69ecca90f21a4d1"}]}