{"sha": "b385ce12232a6c192b168b75ec9867a5a83d2036", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIzODVjZTEyMjMyYTZjMTkyYjE2OGI3NWVjOTg2N2E1YTgzZDIwMzY=", "commit": {"author": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2016-03-23T00:32:08Z"}, "committer": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2016-03-25T18:07:20Z"}, "message": "workarounds to make link guards work on windows\n\nLink guards cause problems in some specific scenarios on windows because\nthey force libcore to be instantiated, since we do not GC functions\neffectively on windows.\n\nThe changes here are two:\n\n1. disable core for rsbegin/rsend\n2. make panic_fmt an extern fn for smallest-hello-world so that it\n   is not marked as \"internal\" for LLVM", "tree": {"sha": "06bfa5bdb79ada3af366a7523c364541af951562", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/06bfa5bdb79ada3af366a7523c364541af951562"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b385ce12232a6c192b168b75ec9867a5a83d2036", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b385ce12232a6c192b168b75ec9867a5a83d2036", "html_url": "https://github.com/rust-lang/rust/commit/b385ce12232a6c192b168b75ec9867a5a83d2036", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b385ce12232a6c192b168b75ec9867a5a83d2036/comments", "author": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "751c24d345cd016429583e4d6654538ed881748a", "url": "https://api.github.com/repos/rust-lang/rust/commits/751c24d345cd016429583e4d6654538ed881748a", "html_url": "https://github.com/rust-lang/rust/commit/751c24d345cd016429583e4d6654538ed881748a"}], "stats": {"total": 22, "additions": 19, "deletions": 3}, "files": [{"sha": "bbabed20ec1cd4e9883ef2d723866e84eb70f55c", "filename": "src/rtstartup/rsbegin.rs", "status": "modified", "additions": 12, "deletions": 1, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/b385ce12232a6c192b168b75ec9867a5a83d2036/src%2Frtstartup%2Frsbegin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b385ce12232a6c192b168b75ec9867a5a83d2036/src%2Frtstartup%2Frsbegin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frtstartup%2Frsbegin.rs?ref=b385ce12232a6c192b168b75ec9867a5a83d2036", "patch": "@@ -23,9 +23,20 @@\n // of other runtime components (registered via yet another special image section).\n \n #![crate_type=\"rlib\"]\n-#![no_std]\n+#![feature(no_core, lang_items, optin_builtin_traits)]\n+#![no_core]\n #![allow(non_camel_case_types)]\n \n+#[lang=\"sized\"]\n+trait Sized {}\n+\n+#[lang=\"copy\"]\n+trait Copy {}\n+\n+#[lang=\"sync\"]\n+trait Sync {}\n+impl Sync for .. {}\n+\n #[cfg(all(target_os=\"windows\", target_arch = \"x86\", target_env=\"gnu\"))]\n pub mod eh_frames\n {"}, {"sha": "1ab194d5eb9ede9c9f4eb39889cd1a4f60747ed1", "filename": "src/rtstartup/rsend.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/b385ce12232a6c192b168b75ec9867a5a83d2036/src%2Frtstartup%2Frsend.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b385ce12232a6c192b168b75ec9867a5a83d2036/src%2Frtstartup%2Frsend.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frtstartup%2Frsend.rs?ref=b385ce12232a6c192b168b75ec9867a5a83d2036", "patch": "@@ -11,7 +11,12 @@\n // See rsbegin.rs for details.\n \n #![crate_type=\"rlib\"]\n-#![no_std]\n+#![feature(no_core, lang_items, optin_builtin_traits)]\n+#![no_core]\n+\n+#[lang=\"sync\"]\n+trait Sync {}\n+impl Sync for .. {}\n \n #[cfg(all(target_os=\"windows\", target_arch = \"x86\", target_env=\"gnu\"))]\n pub mod eh_frames"}, {"sha": "7fc6e6ba1b00a7344200a2654b7f1ffe1a080ecd", "filename": "src/test/run-pass/smallest-hello-world.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b385ce12232a6c192b168b75ec9867a5a83d2036/src%2Ftest%2Frun-pass%2Fsmallest-hello-world.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b385ce12232a6c192b168b75ec9867a5a83d2036/src%2Ftest%2Frun-pass%2Fsmallest-hello-world.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fsmallest-hello-world.rs?ref=b385ce12232a6c192b168b75ec9867a5a83d2036", "patch": "@@ -22,7 +22,7 @@ extern \"rust-intrinsic\" { fn transmute<T, U>(t: T) -> U; }\n \n #[lang = \"eh_personality\"] extern fn eh_personality() {}\n #[lang = \"eh_unwind_resume\"] extern fn eh_unwind_resume() {}\n-#[lang = \"panic_fmt\"] fn panic_fmt() -> ! { loop {} }\n+#[lang = \"panic_fmt\"] extern fn panic_fmt() -> ! { loop {} }\n #[no_mangle] pub extern fn rust_eh_register_frames () {}\n #[no_mangle] pub extern fn rust_eh_unregister_frames () {}\n "}]}