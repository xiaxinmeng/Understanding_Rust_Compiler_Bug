{"sha": "2048679eedc5216539ab556a797eeb70e7884f7c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjIwNDg2NzllZWRjNTIxNjUzOWFiNTU2YTc5N2VlYjcwZTc4ODRmN2M=", "commit": {"author": {"name": "Scott Olson", "email": "scott@solson.me", "date": "2017-02-09T08:57:22Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-02-09T08:57:22Z"}, "message": "Merge pull request #126 from oli-obk/1>-1\n\n1 > -1", "tree": {"sha": "eaf95683c92d9a3e6ff8acee6bb06b7f208c6815", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/eaf95683c92d9a3e6ff8acee6bb06b7f208c6815"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2048679eedc5216539ab556a797eeb70e7884f7c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2048679eedc5216539ab556a797eeb70e7884f7c", "html_url": "https://github.com/rust-lang/rust/commit/2048679eedc5216539ab556a797eeb70e7884f7c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2048679eedc5216539ab556a797eeb70e7884f7c/comments", "author": {"login": "solson", "id": 26806, "node_id": "MDQ6VXNlcjI2ODA2", "avatar_url": "https://avatars.githubusercontent.com/u/26806?v=4", "gravatar_id": "", "url": "https://api.github.com/users/solson", "html_url": "https://github.com/solson", "followers_url": "https://api.github.com/users/solson/followers", "following_url": "https://api.github.com/users/solson/following{/other_user}", "gists_url": "https://api.github.com/users/solson/gists{/gist_id}", "starred_url": "https://api.github.com/users/solson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/solson/subscriptions", "organizations_url": "https://api.github.com/users/solson/orgs", "repos_url": "https://api.github.com/users/solson/repos", "events_url": "https://api.github.com/users/solson/events{/privacy}", "received_events_url": "https://api.github.com/users/solson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fad60864f0f75691016a485009d1cb2ffc00dbc5", "url": "https://api.github.com/repos/rust-lang/rust/commits/fad60864f0f75691016a485009d1cb2ffc00dbc5", "html_url": "https://github.com/rust-lang/rust/commit/fad60864f0f75691016a485009d1cb2ffc00dbc5"}, {"sha": "6aed897c70abdd1171545fbe5695cc89797ffa9c", "url": "https://api.github.com/repos/rust-lang/rust/commits/6aed897c70abdd1171545fbe5695cc89797ffa9c", "html_url": "https://github.com/rust-lang/rust/commit/6aed897c70abdd1171545fbe5695cc89797ffa9c"}], "stats": {"total": 60, "additions": 60, "deletions": 0}, "files": [{"sha": "2823e3edbea9ed7341bc99300acf42423f0d2e50", "filename": "src/operator.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2048679eedc5216539ab556a797eeb70e7884f7c/src%2Foperator.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2048679eedc5216539ab556a797eeb70e7884f7c/src%2Foperator.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Foperator.rs?ref=2048679eedc5216539ab556a797eeb70e7884f7c", "patch": "@@ -235,9 +235,13 @@ pub fn binary_op<'tcx>(\n \n         (Eq, _) => PrimVal::from_bool(l == r),\n         (Ne, _) => PrimVal::from_bool(l != r),\n+        (Lt, k) if k.is_signed_int() => PrimVal::from_bool((l as i128) < (r as i128)),\n         (Lt, _) => PrimVal::from_bool(l <  r),\n+        (Le, k) if k.is_signed_int() => PrimVal::from_bool((l as i128) <= (r as i128)),\n         (Le, _) => PrimVal::from_bool(l <= r),\n+        (Gt, k) if k.is_signed_int() => PrimVal::from_bool((l as i128) > (r as i128)),\n         (Gt, _) => PrimVal::from_bool(l >  r),\n+        (Ge, k) if k.is_signed_int() => PrimVal::from_bool((l as i128) >= (r as i128)),\n         (Ge, _) => PrimVal::from_bool(l >= r),\n \n         (BitOr,  _) => PrimVal::Bytes(l | r),"}, {"sha": "e812d116286ace8fe90b9284cfecf53ede0b11bb", "filename": "src/value.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/2048679eedc5216539ab556a797eeb70e7884f7c/src%2Fvalue.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2048679eedc5216539ab556a797eeb70e7884f7c/src%2Fvalue.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fvalue.rs?ref=2048679eedc5216539ab556a797eeb70e7884f7c", "patch": "@@ -214,6 +214,14 @@ impl PrimValKind {\n         }\n     }\n \n+    pub fn is_signed_int(self) -> bool {\n+        use self::PrimValKind::*;\n+        match self {\n+            I8 | I16 | I32 | I64 | I128 => true,\n+            _ => false,\n+        }\n+    }\n+\n     pub fn from_uint_size(size: u64) -> Self {\n         match size {\n             1 => PrimValKind::U8,"}, {"sha": "33c81cab3817bb6ba26c1260d27dbf1b4a514dba", "filename": "tests/run-pass/issue-15523-big.rs", "status": "added", "additions": 48, "deletions": 0, "changes": 48, "blob_url": "https://github.com/rust-lang/rust/blob/2048679eedc5216539ab556a797eeb70e7884f7c/tests%2Frun-pass%2Fissue-15523-big.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2048679eedc5216539ab556a797eeb70e7884f7c/tests%2Frun-pass%2Fissue-15523-big.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-pass%2Fissue-15523-big.rs?ref=2048679eedc5216539ab556a797eeb70e7884f7c", "patch": "@@ -0,0 +1,48 @@\n+// Copyright 2015 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// Issue 15523: derive(PartialOrd) should use the provided\n+// discriminant values for the derived ordering.\n+//\n+// This test is checking corner cases that arise when you have\n+// 64-bit values in the variants.\n+\n+#[derive(PartialEq, PartialOrd)]\n+#[repr(u64)]\n+enum Eu64 {\n+    Pos2 = 2,\n+    PosMax = !0,\n+    Pos1 = 1,\n+}\n+\n+#[derive(PartialEq, PartialOrd)]\n+#[repr(i64)]\n+enum Ei64 {\n+    Pos2 = 2,\n+    Neg1 = -1,\n+    NegMin = 1 << 63,\n+    PosMax = !(1 << 63),\n+    Pos1 = 1,\n+}\n+\n+fn main() {\n+    assert!(Eu64::Pos2 > Eu64::Pos1);\n+    assert!(Eu64::Pos2 < Eu64::PosMax);\n+    assert!(Eu64::Pos1 < Eu64::PosMax);\n+\n+\n+    assert!(Ei64::Pos2 > Ei64::Pos1);\n+    assert!(Ei64::Pos2 > Ei64::Neg1);\n+    assert!(Ei64::Pos1 > Ei64::Neg1);\n+    assert!(Ei64::Pos2 > Ei64::NegMin);\n+    assert!(Ei64::Pos1 > Ei64::NegMin);\n+    assert!(Ei64::Pos2 < Ei64::PosMax);\n+    assert!(Ei64::Pos1 < Ei64::PosMax);\n+}"}]}