{"sha": "bd4fe454050fa6ac8c74bc1ee70e0b4b909d245e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJkNGZlNDU0MDUwZmE2YWM4Yzc0YmMxZWU3MGUwYjRiOTA5ZDI0NWU=", "commit": {"author": {"name": "Inokentiy Babushkin", "email": "twk@twki.de", "date": "2017-06-13T12:46:35Z"}, "committer": {"name": "Inokentiy Babushkin", "email": "twk@twki.de", "date": "2017-06-13T12:46:35Z"}, "message": "External spans: Added a test for #38875.\n\nA bug has been discovered and fixed in the process.", "tree": {"sha": "d4d29c71ac7da8fc0b044c6c0e545f1bd6367ee0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d4d29c71ac7da8fc0b044c6c0e545f1bd6367ee0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bd4fe454050fa6ac8c74bc1ee70e0b4b909d245e", "comment_count": 0, "verification": {"verified": false, "reason": "unverified_email", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEXezFNCHL3+3lgSPSfvyOxSJN6OwFAlk/3uoACgkQfvyOxSJN\n6OxWVw/8C0T3fxwp8XIqpsETAVfFSm5VVNnFbaQ27zKHKjsfZ6U2+mHSuuKF+8gC\n709JvqUTjDMUx7FgGsuJ+fyMQ7JA3C9I2rAFrV08LLRE74wcRLg7R8bez+55VDPH\n9+iJsyt/t+3dRrBmks+wTDZINW7rvZALGRKmWZtBOu4/EkdyVJVj+HojPoXuAlZu\nOrU61/qF7zjneykChH5FK9kMrpgZ0QVJoTyasjA75B8+APkq2iIVqE8PVbJzoCiD\naSVzr3aprqI58Qk0yVAfw3p5W9r7SLK36FoJPE9phFbbIGheIEK46Rw7ZZGO5P2c\nxDqNkyHO4NapgGwYPbeojijWZUrVp92/Jy3Nf6iPck7aJ4iBUbzcwCakSnkDWgxb\ndTivAa60Kf9F4c8gc6e3+88jvMN9o+83vZcBilQIHfNQzMVRRk8eLm/vuE6RhY/8\nWRvJuu0u2WT8uKj+I7tjeFoMXHIaaoPtmOe0OehHk6KxGCa77Y7qg9GfuQXKOyXn\nJVKIjNZCnDjvPCS6Ko3LEGTSYyztLZCkEtC+0SWHo/X/Hj6wL9Hl3PHeNNv9/tC4\n/rznb283dE9lBUpAvQHNla9eTEEliNTfLcI/Y9zykA2fgZlbdzfuFloq2iNPT4OK\n/aHrbiz6Bm7LGLyA5K1tZFNQkyL74mwpVDjv7AP7j5s2sINUmeM=\n=Jq1+\n-----END PGP SIGNATURE-----", "payload": "tree d4d29c71ac7da8fc0b044c6c0e545f1bd6367ee0\nparent d11973ae2a41bb84cd933e6646f3d8e6f28201e8\nauthor Inokentiy Babushkin <twk@twki.de> 1497357995 +0200\ncommitter Inokentiy Babushkin <twk@twki.de> 1497357995 +0200\n\nExternal spans: Added a test for #38875.\n\nA bug has been discovered and fixed in the process.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bd4fe454050fa6ac8c74bc1ee70e0b4b909d245e", "html_url": "https://github.com/rust-lang/rust/commit/bd4fe454050fa6ac8c74bc1ee70e0b4b909d245e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bd4fe454050fa6ac8c74bc1ee70e0b4b909d245e/comments", "author": {"login": "ibabushkin", "id": 10811417, "node_id": "MDQ6VXNlcjEwODExNDE3", "avatar_url": "https://avatars.githubusercontent.com/u/10811417?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibabushkin", "html_url": "https://github.com/ibabushkin", "followers_url": "https://api.github.com/users/ibabushkin/followers", "following_url": "https://api.github.com/users/ibabushkin/following{/other_user}", "gists_url": "https://api.github.com/users/ibabushkin/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibabushkin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibabushkin/subscriptions", "organizations_url": "https://api.github.com/users/ibabushkin/orgs", "repos_url": "https://api.github.com/users/ibabushkin/repos", "events_url": "https://api.github.com/users/ibabushkin/events{/privacy}", "received_events_url": "https://api.github.com/users/ibabushkin/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ibabushkin", "id": 10811417, "node_id": "MDQ6VXNlcjEwODExNDE3", "avatar_url": "https://avatars.githubusercontent.com/u/10811417?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibabushkin", "html_url": "https://github.com/ibabushkin", "followers_url": "https://api.github.com/users/ibabushkin/followers", "following_url": "https://api.github.com/users/ibabushkin/following{/other_user}", "gists_url": "https://api.github.com/users/ibabushkin/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibabushkin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibabushkin/subscriptions", "organizations_url": "https://api.github.com/users/ibabushkin/orgs", "repos_url": "https://api.github.com/users/ibabushkin/repos", "events_url": "https://api.github.com/users/ibabushkin/events{/privacy}", "received_events_url": "https://api.github.com/users/ibabushkin/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d11973ae2a41bb84cd933e6646f3d8e6f28201e8", "url": "https://api.github.com/repos/rust-lang/rust/commits/d11973ae2a41bb84cd933e6646f3d8e6f28201e8", "html_url": "https://github.com/rust-lang/rust/commit/d11973ae2a41bb84cd933e6646f3d8e6f28201e8"}], "stats": {"total": 44, "additions": 43, "deletions": 1}, "files": [{"sha": "7d8d2939a1b49c9a4ad86aef885f744fcb1dc111", "filename": "src/librustc_metadata/decoder.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bd4fe454050fa6ac8c74bc1ee70e0b4b909d245e/src%2Flibrustc_metadata%2Fdecoder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bd4fe454050fa6ac8c74bc1ee70e0b4b909d245e/src%2Flibrustc_metadata%2Fdecoder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_metadata%2Fdecoder.rs?ref=bd4fe454050fa6ac8c74bc1ee70e0b4b909d245e", "patch": "@@ -765,7 +765,7 @@ impl<'a, 'tcx> CrateMetadata {\n         assert!(!self.is_proc_macro(id));\n         let ast = self.entry(id).ast.unwrap();\n         let def_id = self.local_def_id(id);\n-        let body = ast.decode(self).body.decode(self);\n+        let body = ast.decode((self, tcx)).body.decode((self, tcx));\n         tcx.hir.intern_inlined_body(def_id, body)\n     }\n "}, {"sha": "dd58735209b8f2e3dff27a5cd79f13a3ac88ae44", "filename": "src/test/ui/issue-38875/auxiliary/issue_38875_b.rs", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/bd4fe454050fa6ac8c74bc1ee70e0b4b909d245e/src%2Ftest%2Fui%2Fissue-38875%2Fauxiliary%2Fissue_38875_b.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bd4fe454050fa6ac8c74bc1ee70e0b4b909d245e/src%2Ftest%2Fui%2Fissue-38875%2Fauxiliary%2Fissue_38875_b.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissue-38875%2Fauxiliary%2Fissue_38875_b.rs?ref=bd4fe454050fa6ac8c74bc1ee70e0b4b909d245e", "patch": "@@ -0,0 +1,11 @@\n+// Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+pub const FOO: usize = *&0;"}, {"sha": "42e3c05a38c7e459ed58b3f5e9574ec8a31cc556", "filename": "src/test/ui/issue-38875/issue_38875.rs", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/bd4fe454050fa6ac8c74bc1ee70e0b4b909d245e/src%2Ftest%2Fui%2Fissue-38875%2Fissue_38875.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bd4fe454050fa6ac8c74bc1ee70e0b4b909d245e/src%2Ftest%2Fui%2Fissue-38875%2Fissue_38875.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissue-38875%2Fissue_38875.rs?ref=bd4fe454050fa6ac8c74bc1ee70e0b4b909d245e", "patch": "@@ -0,0 +1,17 @@\n+// Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// aux-build:issue_38875_b.rs\n+\n+extern crate issue_38875_b;\n+\n+fn main() {\n+    let test_x = [0; issue_38875_b::FOO];\n+}"}, {"sha": "ceed83d9313cdbe14cf928eb1558593b0da77397", "filename": "src/test/ui/issue-38875/issue_38875.stderr", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/bd4fe454050fa6ac8c74bc1ee70e0b4b909d245e/src%2Ftest%2Fui%2Fissue-38875%2Fissue_38875.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/bd4fe454050fa6ac8c74bc1ee70e0b4b909d245e/src%2Ftest%2Fui%2Fissue-38875%2Fissue_38875.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissue-38875%2Fissue_38875.stderr?ref=bd4fe454050fa6ac8c74bc1ee70e0b4b909d245e", "patch": "@@ -0,0 +1,14 @@\n+error[E0080]: constant evaluation error\n+  --> $DIR/auxiliary/issue_38875_b.rs:11:24\n+   |\n+11 | pub const FOO: usize = *&0;\n+   |                        ^^^ unimplemented constant expression: deref operation\n+   |\n+note: for repeat count here\n+  --> $DIR/issue_38875.rs:16:22\n+   |\n+16 |     let test_x = [0; issue_38875_b::FOO];\n+   |                      ^^^^^^^^^^^^^^^^^^\n+\n+error: aborting due to previous error(s)\n+"}]}