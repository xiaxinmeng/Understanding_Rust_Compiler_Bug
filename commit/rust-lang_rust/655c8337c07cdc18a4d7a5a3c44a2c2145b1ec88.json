{"sha": "655c8337c07cdc18a4d7a5a3c44a2c2145b1ec88", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY1NWM4MzM3YzA3Y2RjMThhNGQ3YTVhM2M0NGEyYzIxNDViMWVjODg=", "commit": {"author": {"name": "Veetaha", "email": "gerzoh1@gmail.com", "date": "2020-02-25T21:20:07Z"}, "committer": {"name": "Veetaha", "email": "gerzoh1@gmail.com", "date": "2020-02-25T21:20:07Z"}, "message": "vscode: fix vscode-vim keybindings conflict\n\nvscode-vim extension overrides the `type` command so that it prevents\nsome keypresses to reach the text document editor.\nIt conflicts with our `onEnter` keybinding\nthat is used to support automatic doc comments extending and\nindentation insertion.\n\nThe VSCode-native way to implement this would be\nto use regular expressions, but as per matklad it is\nconsidered not acceptable for the language server.\n\nThus we implement it via a `Enter` keybinding that\ninvokes our `onEnter` command which sends\na request to rust-analyzer process and applies\nthe appropriate source change recieved from it.\n\nAt the end of the day we may only apply\nad hoc workarounds for conflicting extensions.\nBut vscode has another bug for that. You\neither cannot use parantheses in `when` condition\nof a keybinding or it just malfunctions.\n\nSee an issue about that here: https://github.com/microsoft/vscode/issues/91473\nTo get the ultimate context, follow this zulip thread: https://rust-lang.zulipchat.com/#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/Enhanced.20typing", "tree": {"sha": "30e4cfd3ac91cace5bcb336ab5882b032f917b0f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/30e4cfd3ac91cace5bcb336ab5882b032f917b0f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/655c8337c07cdc18a4d7a5a3c44a2c2145b1ec88", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/655c8337c07cdc18a4d7a5a3c44a2c2145b1ec88", "html_url": "https://github.com/rust-lang/rust/commit/655c8337c07cdc18a4d7a5a3c44a2c2145b1ec88", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/655c8337c07cdc18a4d7a5a3c44a2c2145b1ec88/comments", "author": null, "committer": null, "parents": [{"sha": "d3040c0deba8266044029a6479a1c12c28e72750", "url": "https://api.github.com/repos/rust-lang/rust/commits/d3040c0deba8266044029a6479a1c12c28e72750", "html_url": "https://github.com/rust-lang/rust/commit/d3040c0deba8266044029a6479a1c12c28e72750"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "925e8bbe73ab02719b32e77ae16551b6d5b091e8", "filename": "editors/code/package.json", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/655c8337c07cdc18a4d7a5a3c44a2c2145b1ec88/editors%2Fcode%2Fpackage.json", "raw_url": "https://github.com/rust-lang/rust/raw/655c8337c07cdc18a4d7a5a3c44a2c2145b1ec88/editors%2Fcode%2Fpackage.json", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fpackage.json?ref=655c8337c07cdc18a4d7a5a3c44a2c2145b1ec88", "patch": "@@ -162,7 +162,7 @@\n             {\n                 \"command\": \"rust-analyzer.onEnter\",\n                 \"key\": \"enter\",\n-                \"when\": \"editorTextFocus && !suggestWidgetVisible && editorLangId == rust\"\n+                \"when\": \"editorTextFocus && !suggestWidgetVisible && editorLangId == rust && !vim.active || vim.mode == 'Insert' && editorTextFocus && !suggestWidgetVisible && editorLangId == rust\"\n             }\n         ],\n         \"configuration\": {"}]}