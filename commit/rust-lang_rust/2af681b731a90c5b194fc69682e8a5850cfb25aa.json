{"sha": "2af681b731a90c5b194fc69682e8a5850cfb25aa", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJhZjY4MWI3MzFhOTBjNWIxOTRmYzY5NjgyZThhNTg1MGNmYjI1YWE=", "commit": {"author": {"name": "Dylan DPC", "email": "dylan.dpc@gmail.com", "date": "2020-04-18T23:04:47Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-04-18T23:04:47Z"}, "message": "Rollup merge of #71271 - JohnTitor:map-in-place, r=petrochenkov\n\nMove `MapInPlace` to rustc_data_structures\n\nFollow-up of #67786, it fits the purpose of rustc_data_structures.\nr? @petrochenkov", "tree": {"sha": "949d3f1d8d0256730044a61f6fd95a58b4bd0fc4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/949d3f1d8d0256730044a61f6fd95a58b4bd0fc4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2af681b731a90c5b194fc69682e8a5850cfb25aa", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJem4eQCRBK7hj4Ov3rIwAAdHIIALHA/xdPttDBiS421xP0k3Ji\niGfO9c7e6Zz7qCG+ZFhAi3dE/u4aUxUktOCplPYOPwzz31Dd5hNfJZITPgYe+4EP\n0/t+QIYPlXFtDxBIcBgI7ClrhGVQUttH8Z4yOvxX1KDjGYTs/XpbHNmTpk2vM4af\nxOrIvGaINyG7uADdU1Aa0IRmLWPrFxcTfHTUL0ZAvZFoq5Xsw+l6/XIlbFatk6Y9\nKVhGzsb/PLGO28wrdtqDSmettgHIu2KH1SYI9KC8xNOFX1F6cNUWnoQ/sYlqmz6I\n+NRT59m771lE0QCfLYzZohxtjl60A4Lf839ZCnLfz6x/odYdCwwT6tmh+wCDFcI=\n=P/Xv\n-----END PGP SIGNATURE-----\n", "payload": "tree 949d3f1d8d0256730044a61f6fd95a58b4bd0fc4\nparent 52fa23add6fb0776b32cc591ac928618391bdf41\nparent 58ad251ea83ccf069a7957b87bd614194bf7f663\nauthor Dylan DPC <dylan.dpc@gmail.com> 1587251087 +0200\ncommitter GitHub <noreply@github.com> 1587251087 +0200\n\nRollup merge of #71271 - JohnTitor:map-in-place, r=petrochenkov\n\nMove `MapInPlace` to rustc_data_structures\n\nFollow-up of #67786, it fits the purpose of rustc_data_structures.\nr? @petrochenkov\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2af681b731a90c5b194fc69682e8a5850cfb25aa", "html_url": "https://github.com/rust-lang/rust/commit/2af681b731a90c5b194fc69682e8a5850cfb25aa", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2af681b731a90c5b194fc69682e8a5850cfb25aa/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "52fa23add6fb0776b32cc591ac928618391bdf41", "url": "https://api.github.com/repos/rust-lang/rust/commits/52fa23add6fb0776b32cc591ac928618391bdf41", "html_url": "https://github.com/rust-lang/rust/commit/52fa23add6fb0776b32cc591ac928618391bdf41"}, {"sha": "58ad251ea83ccf069a7957b87bd614194bf7f663", "url": "https://api.github.com/repos/rust-lang/rust/commits/58ad251ea83ccf069a7957b87bd614194bf7f663", "html_url": "https://github.com/rust-lang/rust/commit/58ad251ea83ccf069a7957b87bd614194bf7f663"}], "stats": {"total": 12, "additions": 5, "deletions": 7}, "files": [{"sha": "4ba062625a40dd2891f7c813da8b10fe8fb73142", "filename": "src/librustc_ast/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/2af681b731a90c5b194fc69682e8a5850cfb25aa/src%2Flibrustc_ast%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2af681b731a90c5b194fc69682e8a5850cfb25aa/src%2Flibrustc_ast%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_ast%2Flib.rs?ref=2af681b731a90c5b194fc69682e8a5850cfb25aa", "patch": "@@ -33,7 +33,6 @@ pub mod util {\n     pub mod comments;\n     pub mod lev_distance;\n     pub mod literal;\n-    pub mod map_in_place;\n     pub mod parser;\n }\n "}, {"sha": "e66b358c4ac7fac877970ec4d7e99fb57957b4c2", "filename": "src/librustc_ast/mut_visit.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2af681b731a90c5b194fc69682e8a5850cfb25aa/src%2Flibrustc_ast%2Fmut_visit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2af681b731a90c5b194fc69682e8a5850cfb25aa/src%2Flibrustc_ast%2Fmut_visit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_ast%2Fmut_visit.rs?ref=2af681b731a90c5b194fc69682e8a5850cfb25aa", "patch": "@@ -11,8 +11,8 @@ use crate::ast::*;\n use crate::ptr::P;\n use crate::token::{self, Token};\n use crate::tokenstream::*;\n-use crate::util::map_in_place::MapInPlace;\n \n+use rustc_data_structures::map_in_place::MapInPlace;\n use rustc_data_structures::sync::Lrc;\n use rustc_span::source_map::{respan, Spanned};\n use rustc_span::Span;"}, {"sha": "3a96c5aa8ed4f7775a676010c35f62924cab7e43", "filename": "src/librustc_builtin_macros/deriving/generic/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2af681b731a90c5b194fc69682e8a5850cfb25aa/src%2Flibrustc_builtin_macros%2Fderiving%2Fgeneric%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2af681b731a90c5b194fc69682e8a5850cfb25aa/src%2Flibrustc_builtin_macros%2Fderiving%2Fgeneric%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_builtin_macros%2Fderiving%2Fgeneric%2Fmod.rs?ref=2af681b731a90c5b194fc69682e8a5850cfb25aa", "patch": "@@ -184,8 +184,8 @@ use std::vec;\n use rustc_ast::ast::{self, BinOpKind, EnumDef, Expr, Generics, Ident, PatKind};\n use rustc_ast::ast::{GenericArg, GenericParamKind, VariantData};\n use rustc_ast::ptr::P;\n-use rustc_ast::util::map_in_place::MapInPlace;\n use rustc_attr as attr;\n+use rustc_data_structures::map_in_place::MapInPlace;\n use rustc_expand::base::{Annotatable, ExtCtxt};\n use rustc_session::parse::ParseSess;\n use rustc_span::source_map::respan;"}, {"sha": "d412eaeff742487dd969a95580ea7fd5421d06eb", "filename": "src/librustc_data_structures/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/2af681b731a90c5b194fc69682e8a5850cfb25aa/src%2Flibrustc_data_structures%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2af681b731a90c5b194fc69682e8a5850cfb25aa/src%2Flibrustc_data_structures%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_data_structures%2Flib.rs?ref=2af681b731a90c5b194fc69682e8a5850cfb25aa", "patch": "@@ -67,6 +67,7 @@ pub mod fx;\n pub mod graph;\n pub mod jobserver;\n pub mod macros;\n+pub mod map_in_place;\n pub mod obligation_forest;\n pub mod owning_ref;\n pub mod ptr_key;"}, {"sha": "5dd9fc6e8bc085be2046c623be1a44ecfa53d3fd", "filename": "src/librustc_data_structures/map_in_place.rs", "status": "renamed", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2af681b731a90c5b194fc69682e8a5850cfb25aa/src%2Flibrustc_data_structures%2Fmap_in_place.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2af681b731a90c5b194fc69682e8a5850cfb25aa/src%2Flibrustc_data_structures%2Fmap_in_place.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_data_structures%2Fmap_in_place.rs?ref=2af681b731a90c5b194fc69682e8a5850cfb25aa", "patch": "@@ -1,5 +1,3 @@\n-// FIXME(Centril): Move to rustc_data_structures.\n-\n use smallvec::{Array, SmallVec};\n use std::ptr;\n ", "previous_filename": "src/librustc_ast/util/map_in_place.rs"}, {"sha": "d79dabb509267aafab3442bc39ea47af63744871", "filename": "src/librustc_expand/config.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2af681b731a90c5b194fc69682e8a5850cfb25aa/src%2Flibrustc_expand%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2af681b731a90c5b194fc69682e8a5850cfb25aa/src%2Flibrustc_expand%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_expand%2Fconfig.rs?ref=2af681b731a90c5b194fc69682e8a5850cfb25aa", "patch": "@@ -4,9 +4,9 @@ use rustc_ast::ast::{self, AttrItem, Attribute, MetaItem};\n use rustc_ast::attr::HasAttrs;\n use rustc_ast::mut_visit::*;\n use rustc_ast::ptr::P;\n-use rustc_ast::util::map_in_place::MapInPlace;\n use rustc_attr as attr;\n use rustc_data_structures::fx::FxHashMap;\n+use rustc_data_structures::map_in_place::MapInPlace;\n use rustc_errors::{error_code, struct_span_err, Applicability, Handler};\n use rustc_feature::{Feature, Features, State as FeatureState};\n use rustc_feature::{"}, {"sha": "2618c758ca5da2723c9c01bd7ec4e7617f88ffec", "filename": "src/librustc_expand/expand.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2af681b731a90c5b194fc69682e8a5850cfb25aa/src%2Flibrustc_expand%2Fexpand.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2af681b731a90c5b194fc69682e8a5850cfb25aa/src%2Flibrustc_expand%2Fexpand.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_expand%2Fexpand.rs?ref=2af681b731a90c5b194fc69682e8a5850cfb25aa", "patch": "@@ -13,10 +13,10 @@ use rustc_ast::mut_visit::*;\n use rustc_ast::ptr::P;\n use rustc_ast::token;\n use rustc_ast::tokenstream::TokenStream;\n-use rustc_ast::util::map_in_place::MapInPlace;\n use rustc_ast::visit::{self, AssocCtxt, Visitor};\n use rustc_ast_pretty::pprust;\n use rustc_attr::{self as attr, is_builtin_attr, HasAttrs};\n+use rustc_data_structures::map_in_place::MapInPlace;\n use rustc_errors::{Applicability, PResult};\n use rustc_feature::Features;\n use rustc_parse::parser::Parser;"}]}