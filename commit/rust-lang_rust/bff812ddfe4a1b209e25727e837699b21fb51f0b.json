{"sha": "bff812ddfe4a1b209e25727e837699b21fb51f0b", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJmZjgxMmRkZmU0YTFiMjA5ZTI1NzI3ZTgzNzY5OWIyMWZiNTFmMGI=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-10-05T18:22:44Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-10-05T18:25:11Z"}, "message": "Fix feature name", "tree": {"sha": "f61d400d5da6ec6076048f7954200e52da6cd57f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f61d400d5da6ec6076048f7954200e52da6cd57f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bff812ddfe4a1b209e25727e837699b21fb51f0b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bff812ddfe4a1b209e25727e837699b21fb51f0b", "html_url": "https://github.com/rust-lang/rust/commit/bff812ddfe4a1b209e25727e837699b21fb51f0b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bff812ddfe4a1b209e25727e837699b21fb51f0b/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e5f252ade72fee4776396122dc91a17ddc185a66", "url": "https://api.github.com/repos/rust-lang/rust/commits/e5f252ade72fee4776396122dc91a17ddc185a66", "html_url": "https://github.com/rust-lang/rust/commit/e5f252ade72fee4776396122dc91a17ddc185a66"}], "stats": {"total": 14, "additions": 8, "deletions": 6}, "files": [{"sha": "81c33bf3afcd130b6e234e120a59bb718e0ecb81", "filename": "crates/ide/src/completion/complete_postfix/format_like.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bff812ddfe4a1b209e25727e837699b21fb51f0b/crates%2Fide%2Fsrc%2Fcompletion%2Fcomplete_postfix%2Fformat_like.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bff812ddfe4a1b209e25727e837699b21fb51f0b/crates%2Fide%2Fsrc%2Fcompletion%2Fcomplete_postfix%2Fformat_like.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Fcompletion%2Fcomplete_postfix%2Fformat_like.rs?ref=bff812ddfe4a1b209e25727e837699b21fb51f0b", "patch": "@@ -1,4 +1,4 @@\n-// Feature: Postfix completion for `format`-like strings.\n+// Feature: Format String Completion.\n //\n // `\"Result {result} is {2 + 2}\"` is expanded to the `\"Result {} is {}\", result, 2 + 2`.\n //"}, {"sha": "341e67c733996bc3fa29843136c15d36252e355b", "filename": "xtask/src/codegen/gen_feature_docs.rs", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/bff812ddfe4a1b209e25727e837699b21fb51f0b/xtask%2Fsrc%2Fcodegen%2Fgen_feature_docs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bff812ddfe4a1b209e25727e837699b21fb51f0b/xtask%2Fsrc%2Fcodegen%2Fgen_feature_docs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/xtask%2Fsrc%2Fcodegen%2Fgen_feature_docs.rs?ref=bff812ddfe4a1b209e25727e837699b21fb51f0b", "patch": "@@ -38,7 +38,9 @@ impl Feature {\n \n             for block in comment_blocks {\n                 let id = block.id;\n-                assert!(is_valid_feature_name(&id), \"invalid feature name: {:?}\", id);\n+                if let Err(msg) = is_valid_feature_name(&id) {\n+                    panic!(\"invalid feature name: {:?}:\\n  {}\", id, msg)\n+                }\n                 let doc = block.contents.join(\"\\n\");\n                 let location = Location::new(path.clone(), block.line);\n                 acc.push(Feature { id, location, doc })\n@@ -49,7 +51,7 @@ impl Feature {\n     }\n }\n \n-fn is_valid_feature_name(feature: &str) -> bool {\n+fn is_valid_feature_name(feature: &str) -> Result<(), String> {\n     'word: for word in feature.split_whitespace() {\n         for &short in [\"to\", \"and\"].iter() {\n             if word == short {\n@@ -58,14 +60,14 @@ fn is_valid_feature_name(feature: &str) -> bool {\n         }\n         for &short in [\"To\", \"And\"].iter() {\n             if word == short {\n-                return false;\n+                return Err(format!(\"Don't capitalize {:?}\", word));\n             }\n         }\n         if !word.starts_with(char::is_uppercase) {\n-            return false;\n+            return Err(format!(\"Capitalize {:?}\", word));\n         }\n     }\n-    true\n+    Ok(())\n }\n \n impl fmt::Display for Feature {"}]}