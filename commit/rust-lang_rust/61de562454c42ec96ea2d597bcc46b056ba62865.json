{"sha": "61de562454c42ec96ea2d597bcc46b056ba62865", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYxZGU1NjI0NTRjNDJlYzk2ZWEyZDU5N2JjYzQ2YjA1NmJhNjI4NjU=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2018-12-18T13:28:12Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2018-12-18T13:28:12Z"}, "message": "Auto merge of #3554 - klausi:module_name_repeat, r=oli-obk\n\nchore(module_name_repeat): Rename stutter lint to module_name_repeat to avoid ableist language\n\nSee #3521", "tree": {"sha": "dc18bc9886d42d6e9c5434e8b24d34c1c13a0f0e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/dc18bc9886d42d6e9c5434e8b24d34c1c13a0f0e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/61de562454c42ec96ea2d597bcc46b056ba62865", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/61de562454c42ec96ea2d597bcc46b056ba62865", "html_url": "https://github.com/rust-lang/rust/commit/61de562454c42ec96ea2d597bcc46b056ba62865", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/61de562454c42ec96ea2d597bcc46b056ba62865/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "176778fe92d2fb763b98e2eefa49f31e3260662f", "url": "https://api.github.com/repos/rust-lang/rust/commits/176778fe92d2fb763b98e2eefa49f31e3260662f", "html_url": "https://github.com/rust-lang/rust/commit/176778fe92d2fb763b98e2eefa49f31e3260662f"}, {"sha": "d74288efce836ad67825b2d25f6c8889b06c7d7a", "url": "https://api.github.com/repos/rust-lang/rust/commits/d74288efce836ad67825b2d25f6c8889b06c7d7a", "html_url": "https://github.com/rust-lang/rust/commit/d74288efce836ad67825b2d25f6c8889b06c7d7a"}], "stats": {"total": 67, "additions": 54, "deletions": 13}, "files": [{"sha": "606f16061ac5aee5ef0ae28178171e3ac52796d6", "filename": "CHANGELOG.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/61de562454c42ec96ea2d597bcc46b056ba62865/CHANGELOG.md", "raw_url": "https://github.com/rust-lang/rust/raw/61de562454c42ec96ea2d597bcc46b056ba62865/CHANGELOG.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/CHANGELOG.md?ref=61de562454c42ec96ea2d597bcc46b056ba62865", "patch": "@@ -760,6 +760,7 @@ All notable changes to this project will be documented in this file.\n [`mistyped_literal_suffixes`]: https://rust-lang.github.io/rust-clippy/master/index.html#mistyped_literal_suffixes\n [`mixed_case_hex_literals`]: https://rust-lang.github.io/rust-clippy/master/index.html#mixed_case_hex_literals\n [`module_inception`]: https://rust-lang.github.io/rust-clippy/master/index.html#module_inception\n+[`module_name_repetitions`]: https://rust-lang.github.io/rust-clippy/master/index.html#module_name_repetitions\n [`modulo_one`]: https://rust-lang.github.io/rust-clippy/master/index.html#modulo_one\n [`multiple_crate_versions`]: https://rust-lang.github.io/rust-clippy/master/index.html#multiple_crate_versions\n [`multiple_inherent_impl`]: https://rust-lang.github.io/rust-clippy/master/index.html#multiple_inherent_impl\n@@ -850,7 +851,6 @@ All notable changes to this project will be documented in this file.\n [`string_extend_chars`]: https://rust-lang.github.io/rust-clippy/master/index.html#string_extend_chars\n [`string_lit_as_bytes`]: https://rust-lang.github.io/rust-clippy/master/index.html#string_lit_as_bytes\n [`string_to_string`]: https://rust-lang.github.io/rust-clippy/master/index.html#string_to_string\n-[`stutter`]: https://rust-lang.github.io/rust-clippy/master/index.html#stutter\n [`suspicious_arithmetic_impl`]: https://rust-lang.github.io/rust-clippy/master/index.html#suspicious_arithmetic_impl\n [`suspicious_assignment_formatting`]: https://rust-lang.github.io/rust-clippy/master/index.html#suspicious_assignment_formatting\n [`suspicious_else_formatting`]: https://rust-lang.github.io/rust-clippy/master/index.html#suspicious_else_formatting"}, {"sha": "c6142a168548a149326213fc1a33827736210e0d", "filename": "clippy_lints/src/enum_variants.rs", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/61de562454c42ec96ea2d597bcc46b056ba62865/clippy_lints%2Fsrc%2Fenum_variants.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61de562454c42ec96ea2d597bcc46b056ba62865/clippy_lints%2Fsrc%2Fenum_variants.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fenum_variants.rs?ref=61de562454c42ec96ea2d597bcc46b056ba62865", "patch": "@@ -75,7 +75,7 @@ declare_clippy_lint! {\n /// }\n /// ```\n declare_clippy_lint! {\n-    pub STUTTER,\n+    pub MODULE_NAME_REPETITIONS,\n     pedantic,\n     \"type names prefixed/postfixed with their containing module's name\"\n }\n@@ -126,7 +126,12 @@ impl EnumVariantNames {\n \n impl LintPass for EnumVariantNames {\n     fn get_lints(&self) -> LintArray {\n-        lint_array!(ENUM_VARIANT_NAMES, PUB_ENUM_VARIANT_NAMES, STUTTER, MODULE_INCEPTION)\n+        lint_array!(\n+            ENUM_VARIANT_NAMES,\n+            PUB_ENUM_VARIANT_NAMES,\n+            MODULE_NAME_REPETITIONS,\n+            MODULE_INCEPTION\n+        )\n     }\n }\n \n@@ -277,7 +282,7 @@ impl EarlyLintPass for EnumVariantNames {\n                             match item_camel.chars().nth(nchars) {\n                                 Some(c) if is_word_beginning(c) => span_lint(\n                                     cx,\n-                                    STUTTER,\n+                                    MODULE_NAME_REPETITIONS,\n                                     item.span,\n                                     \"item name starts with its containing module's name\",\n                                 ),\n@@ -287,7 +292,7 @@ impl EarlyLintPass for EnumVariantNames {\n                         if rmatching == nchars {\n                             span_lint(\n                                 cx,\n-                                STUTTER,\n+                                MODULE_NAME_REPETITIONS,\n                                 item.span,\n                                 \"item name ends with its containing module's name\",\n                             );"}, {"sha": "8ce5861a939b674a416f2b5ef015a2a69e999523", "filename": "clippy_lints/src/lib.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/61de562454c42ec96ea2d597bcc46b056ba62865/clippy_lints%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61de562454c42ec96ea2d597bcc46b056ba62865/clippy_lints%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.rs?ref=61de562454c42ec96ea2d597bcc46b056ba62865", "patch": "@@ -517,8 +517,8 @@ pub fn register_plugins(reg: &mut rustc_plugin::Registry<'_>, conf: &Conf) {\n         doc::DOC_MARKDOWN,\n         empty_enum::EMPTY_ENUM,\n         enum_glob_use::ENUM_GLOB_USE,\n+        enum_variants::MODULE_NAME_REPETITIONS,\n         enum_variants::PUB_ENUM_VARIANT_NAMES,\n-        enum_variants::STUTTER,\n         if_not_else::IF_NOT_ELSE,\n         infinite_iter::MAYBE_INFINITE_ITER,\n         items_after_statements::ITEMS_AFTER_STATEMENTS,\n@@ -1030,6 +1030,10 @@ pub fn register_plugins(reg: &mut rustc_plugin::Registry<'_>, conf: &Conf) {\n     ]);\n }\n \n+pub fn register_renamed(ls: &mut rustc::lint::LintStore) {\n+    ls.register_renamed(\"clippy::stutter\", \"clippy::module_name_repetitions\");\n+}\n+\n // only exists to let the dogfood integration test works.\n // Don't run clippy as an executable directly\n #[allow(dead_code)]"}, {"sha": "0df2d8988601642f8ddfe065eaa3f522e75fada8", "filename": "src/driver.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/61de562454c42ec96ea2d597bcc46b056ba62865/src%2Fdriver.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61de562454c42ec96ea2d597bcc46b056ba62865/src%2Fdriver.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdriver.rs?ref=61de562454c42ec96ea2d597bcc46b056ba62865", "patch": "@@ -110,6 +110,7 @@ pub fn main() {\n                         ls.register_group(Some(sess), true, name, deprecated_name, to);\n                     }\n                     clippy_lints::register_pre_expansion_lints(sess, &mut ls, &conf);\n+                    clippy_lints::register_renamed(&mut ls);\n \n                     sess.plugin_llvm_passes.borrow_mut().extend(llvm_passes);\n                     sess.plugin_attributes.borrow_mut().extend(attributes);"}, {"sha": "4db4f56de46fc5d19388e9cadc32f22068c311ea", "filename": "tests/ui/module_name_repetitions.rs", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/61de562454c42ec96ea2d597bcc46b056ba62865/tests%2Fui%2Fmodule_name_repetitions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61de562454c42ec96ea2d597bcc46b056ba62865/tests%2Fui%2Fmodule_name_repetitions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmodule_name_repetitions.rs?ref=61de562454c42ec96ea2d597bcc46b056ba62865", "patch": "@@ -7,7 +7,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-#![warn(clippy::stutter)]\n+#![warn(clippy::module_name_repetitions)]\n #![allow(dead_code)]\n \n mod foo {", "previous_filename": "tests/ui/stutter.rs"}, {"sha": "e2eca64ba427829882f6b3541d3c105e3d37a21e", "filename": "tests/ui/module_name_repetitions.stderr", "status": "renamed", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/61de562454c42ec96ea2d597bcc46b056ba62865/tests%2Fui%2Fmodule_name_repetitions.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/61de562454c42ec96ea2d597bcc46b056ba62865/tests%2Fui%2Fmodule_name_repetitions.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmodule_name_repetitions.stderr?ref=61de562454c42ec96ea2d597bcc46b056ba62865", "patch": "@@ -1,31 +1,31 @@\n error: item name starts with its containing module's name\n-  --> $DIR/stutter.rs:15:5\n+  --> $DIR/module_name_repetitions.rs:15:5\n    |\n 15 |     pub fn foo_bar() {}\n    |     ^^^^^^^^^^^^^^^^^^^\n    |\n-   = note: `-D clippy::stutter` implied by `-D warnings`\n+   = note: `-D clippy::module-name-repetitions` implied by `-D warnings`\n \n error: item name ends with its containing module's name\n-  --> $DIR/stutter.rs:16:5\n+  --> $DIR/module_name_repetitions.rs:16:5\n    |\n 16 |     pub fn bar_foo() {}\n    |     ^^^^^^^^^^^^^^^^^^^\n \n error: item name starts with its containing module's name\n-  --> $DIR/stutter.rs:17:5\n+  --> $DIR/module_name_repetitions.rs:17:5\n    |\n 17 |     pub struct FooCake {}\n    |     ^^^^^^^^^^^^^^^^^^^^^\n \n error: item name ends with its containing module's name\n-  --> $DIR/stutter.rs:18:5\n+  --> $DIR/module_name_repetitions.rs:18:5\n    |\n 18 |     pub enum CakeFoo {}\n    |     ^^^^^^^^^^^^^^^^^^^\n \n error: item name starts with its containing module's name\n-  --> $DIR/stutter.rs:19:5\n+  --> $DIR/module_name_repetitions.rs:19:5\n    |\n 19 |     pub struct Foo7Bar;\n    |     ^^^^^^^^^^^^^^^^^^^", "previous_filename": "tests/ui/stutter.stderr"}, {"sha": "8d76a2d4586dff3f0ce6d66009e5d028b4d02610", "filename": "tests/ui/rename.rs", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/61de562454c42ec96ea2d597bcc46b056ba62865/tests%2Fui%2Frename.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61de562454c42ec96ea2d597bcc46b056ba62865/tests%2Fui%2Frename.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Frename.rs?ref=61de562454c42ec96ea2d597bcc46b056ba62865", "patch": "@@ -0,0 +1,13 @@\n+// Copyright 2014-2018 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+#![allow(stutter)]\n+\n+#[warn(clippy::stutter)]\n+fn main() {}"}, {"sha": "7ad8228fb359449019f88bf33f043399a45df625", "filename": "tests/ui/rename.stderr", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/61de562454c42ec96ea2d597bcc46b056ba62865/tests%2Fui%2Frename.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/61de562454c42ec96ea2d597bcc46b056ba62865/tests%2Fui%2Frename.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Frename.stderr?ref=61de562454c42ec96ea2d597bcc46b056ba62865", "patch": "@@ -0,0 +1,18 @@\n+error: unknown lint: `stutter`\n+  --> $DIR/rename.rs:10:10\n+   |\n+10 | #![allow(stutter)]\n+   |          ^^^^^^^\n+   |\n+   = note: `-D unknown-lints` implied by `-D warnings`\n+\n+error: lint `clippy::stutter` has been renamed to `clippy::module_name_repetitions`\n+  --> $DIR/rename.rs:12:8\n+   |\n+12 | #[warn(clippy::stutter)]\n+   |        ^^^^^^^^^^^^^^^ help: use the new name: `clippy::module_name_repetitions`\n+   |\n+   = note: `-D renamed-and-removed-lints` implied by `-D warnings`\n+\n+error: aborting due to 2 previous errors\n+"}]}