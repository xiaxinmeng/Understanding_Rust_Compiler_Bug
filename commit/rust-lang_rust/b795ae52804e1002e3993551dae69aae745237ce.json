{"sha": "b795ae52804e1002e3993551dae69aae745237ce", "node_id": "C_kwDOAAsO6NoAKGI3OTVhZTUyODA0ZTEwMDJlMzk5MzU1MWRhZTY5YWFlNzQ1MjM3Y2U", "commit": {"author": {"name": "Miguel Perez", "email": "miguel@Miguel.com", "date": "2022-03-08T09:16:18Z"}, "committer": {"name": "Miguel Perez", "email": "miguel@Miguel.com", "date": "2022-03-08T09:16:18Z"}, "message": "Fix for issue #93283", "tree": {"sha": "12d89fbb79a4e47df1e51d921528a5ae9c3de17c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/12d89fbb79a4e47df1e51d921528a5ae9c3de17c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b795ae52804e1002e3993551dae69aae745237ce", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b795ae52804e1002e3993551dae69aae745237ce", "html_url": "https://github.com/rust-lang/rust/commit/b795ae52804e1002e3993551dae69aae745237ce", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b795ae52804e1002e3993551dae69aae745237ce/comments", "author": null, "committer": null, "parents": [{"sha": "17dfae79bbc3dabe1427073086acf7f7bd45148c", "url": "https://api.github.com/repos/rust-lang/rust/commits/17dfae79bbc3dabe1427073086acf7f7bd45148c", "html_url": "https://github.com/rust-lang/rust/commit/17dfae79bbc3dabe1427073086acf7f7bd45148c"}], "stats": {"total": 10, "additions": 9, "deletions": 1}, "files": [{"sha": "ac8507858ed2ed27daabb8ac6cc292f2a921eb2d", "filename": "library/std/src/fs/tests.rs", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/b795ae52804e1002e3993551dae69aae745237ce/library%2Fstd%2Fsrc%2Ffs%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b795ae52804e1002e3993551dae69aae745237ce/library%2Fstd%2Fsrc%2Ffs%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Ffs%2Ftests.rs?ref=b795ae52804e1002e3993551dae69aae745237ce", "patch": "@@ -1,5 +1,6 @@\n use crate::io::prelude::*;\n \n+use crate::env;\n use crate::fs::{self, File, OpenOptions};\n use crate::io::{ErrorKind, SeekFrom};\n use crate::path::Path;\n@@ -906,7 +907,14 @@ fn read_link() {\n         // junction\n         assert_eq!(check!(fs::read_link(r\"C:\\Users\\Default User\")), Path::new(r\"C:\\Users\\Default\"));\n         // junction with special permissions\n-        assert_eq!(check!(fs::read_link(r\"C:\\Documents and Settings\\\")), Path::new(r\"C:\\Users\"));\n+        // Since not all localized windows versions contain the folder \"Documents and Settings\" in english,\n+        // we will briefly check, if it exists and otherwise skip the test. Except during CI we will always execute the test.\n+        if Path::new(r\"C:\\Documents and Settings\\\").exists() || env::var_os(\"CI\").is_some() {\n+            assert_eq!(\n+                check!(fs::read_link(r\"C:\\Documents and Settings\\\")),\n+                Path::new(r\"C:\\Users\")\n+            );\n+        }\n     }\n     let tmpdir = tmpdir();\n     let link = tmpdir.join(\"link\");"}]}