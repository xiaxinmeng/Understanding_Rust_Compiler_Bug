{"sha": "e127bf680f8a133f339901e05a44ac20b5faed3e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmUxMjdiZjY4MGY4YTEzM2YzMzk5MDFlMDVhNDRhYzIwYjVmYWVkM2U=", "commit": {"author": {"name": "Kevin Atkinson", "email": "kevina@cs.utah.edu", "date": "2012-01-25T05:57:51Z"}, "committer": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2012-02-04T01:48:16Z"}, "message": "Fix byte_len in char_len_range to be what it is advertised.", "tree": {"sha": "b6c9d0d57094359bc7cda5f8fde4d5f5e5fa16e2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b6c9d0d57094359bc7cda5f8fde4d5f5e5fa16e2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e127bf680f8a133f339901e05a44ac20b5faed3e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e127bf680f8a133f339901e05a44ac20b5faed3e", "html_url": "https://github.com/rust-lang/rust/commit/e127bf680f8a133f339901e05a44ac20b5faed3e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e127bf680f8a133f339901e05a44ac20b5faed3e/comments", "author": {"login": "kevina", "id": 1271492, "node_id": "MDQ6VXNlcjEyNzE0OTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1271492?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kevina", "html_url": "https://github.com/kevina", "followers_url": "https://api.github.com/users/kevina/followers", "following_url": "https://api.github.com/users/kevina/following{/other_user}", "gists_url": "https://api.github.com/users/kevina/gists{/gist_id}", "starred_url": "https://api.github.com/users/kevina/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kevina/subscriptions", "organizations_url": "https://api.github.com/users/kevina/orgs", "repos_url": "https://api.github.com/users/kevina/repos", "events_url": "https://api.github.com/users/kevina/events{/privacy}", "received_events_url": "https://api.github.com/users/kevina/received_events", "type": "User", "site_admin": false}, "committer": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "33f4a9838887f03cf5c76e5b470efecaff233636", "url": "https://api.github.com/repos/rust-lang/rust/commits/33f4a9838887f03cf5c76e5b470efecaff233636", "html_url": "https://github.com/rust-lang/rust/commit/33f4a9838887f03cf5c76e5b470efecaff233636"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "ecb9827b85ea992abcc0ca5d22dd534abc837376", "filename": "src/libcore/str.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/e127bf680f8a133f339901e05a44ac20b5faed3e/src%2Flibcore%2Fstr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e127bf680f8a133f339901e05a44ac20b5faed3e/src%2Flibcore%2Fstr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fstr.rs?ref=e127bf680f8a133f339901e05a44ac20b5faed3e", "patch": "@@ -1066,15 +1066,15 @@ Safety note:\n FIXME: rename to 'substr_len_chars'\n */\n fn char_len_range(s: str, byte_start: uint, byte_len: uint) -> uint {\n-    let i     = byte_start;\n+    let i         = byte_start;\n+    let byte_stop = i + byte_len;\n     let len   = 0u;\n-    while i < byte_len {\n+    while i < byte_stop {\n         let chsize = utf8_char_width(s[i]);\n         assert (chsize > 0u);\n         len += 1u;\n         i += chsize;\n     }\n-    assert (i == byte_len);\n     ret len;\n }\n "}]}