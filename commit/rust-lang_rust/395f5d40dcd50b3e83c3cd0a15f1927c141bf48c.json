{"sha": "395f5d40dcd50b3e83c3cd0a15f1927c141bf48c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM5NWY1ZDQwZGNkNTBiM2U4M2MzY2QwYTE1ZjE5MjdjMTQxYmY0OGM=", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2020-06-27T10:36:20Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2020-06-27T10:37:12Z"}, "message": "Rename shims::{sync -> posic_sync} and move sync_singlethread test to other sync test", "tree": {"sha": "ab23ae36a4375999f1a65c9b916a4e55291bdb36", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ab23ae36a4375999f1a65c9b916a4e55291bdb36"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/395f5d40dcd50b3e83c3cd0a15f1927c141bf48c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/395f5d40dcd50b3e83c3cd0a15f1927c141bf48c", "html_url": "https://github.com/rust-lang/rust/commit/395f5d40dcd50b3e83c3cd0a15f1927c141bf48c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/395f5d40dcd50b3e83c3cd0a15f1927c141bf48c/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "76d99cfa68d96a591e3e132cf73ef750f09d1a8a", "url": "https://api.github.com/repos/rust-lang/rust/commits/76d99cfa68d96a591e3e132cf73ef750f09d1a8a", "html_url": "https://github.com/rust-lang/rust/commit/76d99cfa68d96a591e3e132cf73ef750f09d1a8a"}], "stats": {"total": 31, "additions": 17, "deletions": 14}, "files": [{"sha": "e0da83840edd3742e4cabad3f059891e39fe6868", "filename": "src/lib.rs", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/395f5d40dcd50b3e83c3cd0a15f1927c141bf48c/src%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/395f5d40dcd50b3e83c3cd0a15f1927c141bf48c/src%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib.rs?ref=395f5d40dcd50b3e83c3cd0a15f1927c141bf48c", "patch": "@@ -39,18 +39,18 @@ pub use rustc_mir::interpret::*;\n // Resolve ambiguity.\n pub use rustc_mir::interpret::{self, AllocMap, PlaceTy};\n \n-pub use crate::shims::dlsym::{Dlsym, EvalContextExt as DlsymEvalContextExt};\n-pub use crate::shims::env::{EnvVars, EvalContextExt as EnvEvalContextExt};\n-pub use crate::shims::foreign_items::EvalContextExt as ForeignItemsEvalContextExt;\n-pub use crate::shims::fs::{DirHandler, EvalContextExt as FileEvalContextExt, FileHandler};\n-pub use crate::shims::intrinsics::EvalContextExt as IntrinsicsEvalContextExt;\n-pub use crate::shims::os_str::EvalContextExt as OsStrEvalContextExt;\n-pub use crate::shims::panic::{CatchUnwindData, EvalContextExt as PanicEvalContextExt};\n-pub use crate::shims::sync::{EvalContextExt as SyncShimsEvalContextExt};\n-pub use crate::shims::thread::EvalContextExt as ThreadShimsEvalContextExt;\n-pub use crate::shims::time::EvalContextExt as TimeEvalContextExt;\n-pub use crate::shims::tls::{EvalContextExt as TlsEvalContextExt, TlsData};\n-pub use crate::shims::EvalContextExt as ShimsEvalContextExt;\n+pub use crate::shims::dlsym::{Dlsym, EvalContextExt as _};\n+pub use crate::shims::env::{EnvVars, EvalContextExt as _};\n+pub use crate::shims::foreign_items::EvalContextExt as _;\n+pub use crate::shims::fs::{DirHandler, EvalContextExt as _, FileHandler};\n+pub use crate::shims::intrinsics::EvalContextExt as _;\n+pub use crate::shims::os_str::EvalContextExt as _;\n+pub use crate::shims::panic::{CatchUnwindData, EvalContextExt as _};\n+pub use crate::shims::posix_sync::{EvalContextExt as _};\n+pub use crate::shims::thread::EvalContextExt as _;\n+pub use crate::shims::time::EvalContextExt as _;\n+pub use crate::shims::tls::{EvalContextExt as _, TlsData};\n+pub use crate::shims::EvalContextExt as _;\n \n pub use crate::diagnostics::{\n     register_diagnostic, report_error, EvalContextExt as DiagnosticsEvalContextExt,"}, {"sha": "cdc1f8cc763abc6d09c528a53ac0130373aacddf", "filename": "src/shims/posix_sync.rs", "status": "renamed", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/395f5d40dcd50b3e83c3cd0a15f1927c141bf48c/src%2Fshims%2Fposix_sync.rs", "raw_url": "https://github.com/rust-lang/rust/raw/395f5d40dcd50b3e83c3cd0a15f1927c141bf48c/src%2Fshims%2Fposix_sync.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fshims%2Fposix_sync.rs?ref=395f5d40dcd50b3e83c3cd0a15f1927c141bf48c", "patch": "@@ -522,6 +522,7 @@ pub trait EvalContextExt<'mir, 'tcx: 'mir>: crate::MiriEvalContextExt<'mir, 'tcx\n \n         mutex_set_kind(this, mutex_op, ScalarMaybeUninit::Uninit)?;\n         mutex_set_id(this, mutex_op, ScalarMaybeUninit::Uninit)?;\n+        // FIXME: delete interpreter state associated with this mutex.\n \n         Ok(0)\n     }\n@@ -640,6 +641,7 @@ pub trait EvalContextExt<'mir, 'tcx: 'mir>: crate::MiriEvalContextExt<'mir, 'tcx\n         }\n \n         rwlock_set_id(this, rwlock_op, ScalarMaybeUninit::Uninit)?;\n+        // FIXME: delete interpreter state associated with this rwlock.\n \n         Ok(0)\n     }\n@@ -833,6 +835,7 @@ pub trait EvalContextExt<'mir, 'tcx: 'mir>: crate::MiriEvalContextExt<'mir, 'tcx\n         }\n         cond_set_id(this, cond_op, ScalarMaybeUninit::Uninit)?;\n         cond_set_clock_id(this, cond_op, ScalarMaybeUninit::Uninit)?;\n+        // FIXME: delete interpreter state associated with this condvar.\n \n         Ok(0)\n     }", "previous_filename": "src/shims/sync.rs"}, {"sha": "896f93ef1a3a1e5dd7efecec3ae2f514f7016efa", "filename": "src/thread.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/395f5d40dcd50b3e83c3cd0a15f1927c141bf48c/src%2Fthread.rs", "raw_url": "https://github.com/rust-lang/rust/raw/395f5d40dcd50b3e83c3cd0a15f1927c141bf48c/src%2Fthread.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fthread.rs?ref=395f5d40dcd50b3e83c3cd0a15f1927c141bf48c", "patch": "@@ -91,8 +91,8 @@ pub enum ThreadState {\n     /// responsibility of the synchronization primitives to track threads that\n     /// are blocked by them.\n     BlockedOnSync,\n-    /// The thread has terminated its execution (we do not delete terminated\n-    /// threads).\n+    /// The thread has terminated its execution. We do not delete terminated\n+    /// threads (FIXME: why?).\n     Terminated,\n }\n "}, {"sha": "8b8594d4df69dc32a124f609e31c83dc5ba926bb", "filename": "tests/run-pass/concurrency/sync_singlethread.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/395f5d40dcd50b3e83c3cd0a15f1927c141bf48c/tests%2Frun-pass%2Fconcurrency%2Fsync_singlethread.rs", "raw_url": "https://github.com/rust-lang/rust/raw/395f5d40dcd50b3e83c3cd0a15f1927c141bf48c/tests%2Frun-pass%2Fconcurrency%2Fsync_singlethread.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-pass%2Fconcurrency%2Fsync_singlethread.rs?ref=395f5d40dcd50b3e83c3cd0a15f1927c141bf48c", "previous_filename": "tests/run-pass/sync_singlethread.rs"}]}