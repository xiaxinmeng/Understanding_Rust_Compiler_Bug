{"sha": "1f79a442e561521d0efae15da3da8acf17b580c2", "node_id": "C_kwDOAAsO6NoAKDFmNzlhNDQyZTU2MTUyMWQwZWZhZTE1ZGEzZGE4YWNmMTdiNTgwYzI", "commit": {"author": {"name": "Alex Macleod", "email": "alex@macleod.io", "date": "2022-05-14T18:35:16Z"}, "committer": {"name": "Alex Macleod", "email": "alex@macleod.io", "date": "2022-05-14T21:31:13Z"}, "message": "Add `duplicate_mod` lint", "tree": {"sha": "457856f7a8fa6b31882c960bd7021289535d8455", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/457856f7a8fa6b31882c960bd7021289535d8455"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1f79a442e561521d0efae15da3da8acf17b580c2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1f79a442e561521d0efae15da3da8acf17b580c2", "html_url": "https://github.com/rust-lang/rust/commit/1f79a442e561521d0efae15da3da8acf17b580c2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1f79a442e561521d0efae15da3da8acf17b580c2/comments", "author": {"login": "Alexendoo", "id": 1830331, "node_id": "MDQ6VXNlcjE4MzAzMzE=", "avatar_url": "https://avatars.githubusercontent.com/u/1830331?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Alexendoo", "html_url": "https://github.com/Alexendoo", "followers_url": "https://api.github.com/users/Alexendoo/followers", "following_url": "https://api.github.com/users/Alexendoo/following{/other_user}", "gists_url": "https://api.github.com/users/Alexendoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/Alexendoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Alexendoo/subscriptions", "organizations_url": "https://api.github.com/users/Alexendoo/orgs", "repos_url": "https://api.github.com/users/Alexendoo/repos", "events_url": "https://api.github.com/users/Alexendoo/events{/privacy}", "received_events_url": "https://api.github.com/users/Alexendoo/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Alexendoo", "id": 1830331, "node_id": "MDQ6VXNlcjE4MzAzMzE=", "avatar_url": "https://avatars.githubusercontent.com/u/1830331?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Alexendoo", "html_url": "https://github.com/Alexendoo", "followers_url": "https://api.github.com/users/Alexendoo/followers", "following_url": "https://api.github.com/users/Alexendoo/following{/other_user}", "gists_url": "https://api.github.com/users/Alexendoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/Alexendoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Alexendoo/subscriptions", "organizations_url": "https://api.github.com/users/Alexendoo/orgs", "repos_url": "https://api.github.com/users/Alexendoo/repos", "events_url": "https://api.github.com/users/Alexendoo/events{/privacy}", "received_events_url": "https://api.github.com/users/Alexendoo/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2038084cf2253b57cf8b405ab000a92b68346f43", "url": "https://api.github.com/repos/rust-lang/rust/commits/2038084cf2253b57cf8b405ab000a92b68346f43", "html_url": "https://github.com/rust-lang/rust/commit/2038084cf2253b57cf8b405ab000a92b68346f43"}], "stats": {"total": 179, "additions": 178, "deletions": 1}, "files": [{"sha": "e5988a19c14721f9a4854cc9607c4c5da33bad38", "filename": "CHANGELOG.md", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/1f79a442e561521d0efae15da3da8acf17b580c2/CHANGELOG.md", "raw_url": "https://github.com/rust-lang/rust/raw/1f79a442e561521d0efae15da3da8acf17b580c2/CHANGELOG.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/CHANGELOG.md?ref=1f79a442e561521d0efae15da3da8acf17b580c2", "patch": "@@ -3363,6 +3363,7 @@ Released 2018-09-13\n [`drop_copy`]: https://rust-lang.github.io/rust-clippy/master/index.html#drop_copy\n [`drop_non_drop`]: https://rust-lang.github.io/rust-clippy/master/index.html#drop_non_drop\n [`drop_ref`]: https://rust-lang.github.io/rust-clippy/master/index.html#drop_ref\n+[`duplicate_mod`]: https://rust-lang.github.io/rust-clippy/master/index.html#duplicate_mod\n [`duplicate_underscore_argument`]: https://rust-lang.github.io/rust-clippy/master/index.html#duplicate_underscore_argument\n [`duration_subsec`]: https://rust-lang.github.io/rust-clippy/master/index.html#duration_subsec\n [`else_if_without_else`]: https://rust-lang.github.io/rust-clippy/master/index.html#else_if_without_else"}, {"sha": "c6c7b959d4f49bb929dca16be321f8bdea633d06", "filename": "clippy_lints/src/duplicate_mod.rs", "status": "added", "additions": 102, "deletions": 0, "changes": 102, "blob_url": "https://github.com/rust-lang/rust/blob/1f79a442e561521d0efae15da3da8acf17b580c2/clippy_lints%2Fsrc%2Fduplicate_mod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f79a442e561521d0efae15da3da8acf17b580c2/clippy_lints%2Fsrc%2Fduplicate_mod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fduplicate_mod.rs?ref=1f79a442e561521d0efae15da3da8acf17b580c2", "patch": "@@ -0,0 +1,102 @@\n+use clippy_utils::diagnostics::span_lint_and_help;\n+use rustc_ast::ast::{Crate, Inline, Item, ItemKind, ModKind};\n+use rustc_errors::MultiSpan;\n+use rustc_lint::{EarlyContext, EarlyLintPass, LintContext};\n+use rustc_session::{declare_tool_lint, impl_lint_pass};\n+use rustc_span::{FileName, Span};\n+use std::collections::BTreeMap;\n+use std::path::PathBuf;\n+\n+declare_clippy_lint! {\n+    /// ### What it does\n+    /// Checks for files that are included as modules multiple times.\n+    ///\n+    /// ### Why is this bad?\n+    /// Loading a file as a module more than once causes it to be compiled\n+    /// multiple times, taking longer and putting duplicate content into the\n+    /// module tree.\n+    ///\n+    /// ### Example\n+    /// ```rust,ignore\n+    /// // lib.rs\n+    /// mod a;\n+    /// mod b;\n+    /// ```\n+    /// ```rust,ignore\n+    /// // a.rs\n+    /// #[path = \"./b.rs\"]\n+    /// mod b;\n+    /// ```\n+    ///\n+    /// Use instead:\n+    ///\n+    /// ```rust,ignore\n+    /// // lib.rs\n+    /// mod a;\n+    /// mod b;\n+    /// ```\n+    /// ```rust,ignore\n+    /// // a.rs\n+    /// use crate::b;\n+    /// ```\n+    #[clippy::version = \"1.62.0\"]\n+    pub DUPLICATE_MOD,\n+    suspicious,\n+    \"file loaded as module multiple times\"\n+}\n+\n+#[derive(PartialOrd, Ord, PartialEq, Eq)]\n+struct Modules {\n+    local_path: PathBuf,\n+    spans: Vec<Span>,\n+}\n+\n+#[derive(Default)]\n+pub struct DuplicateMod {\n+    /// map from the canonicalized path to `Modules`, `BTreeMap` to make the\n+    /// order deterministic for tests\n+    modules: BTreeMap<PathBuf, Modules>,\n+}\n+\n+impl_lint_pass!(DuplicateMod => [DUPLICATE_MOD]);\n+\n+impl EarlyLintPass for DuplicateMod {\n+    fn check_item(&mut self, cx: &EarlyContext<'_>, item: &Item) {\n+        if let ItemKind::Mod(_, ModKind::Loaded(_, Inline::No, mod_spans)) = &item.kind\n+            && let FileName::Real(real) = cx.sess().source_map().span_to_filename(mod_spans.inner_span)\n+            && let Some(local_path) = real.into_local_path()\n+            && let Ok(absolute_path) = local_path.canonicalize()\n+        {\n+            let modules = self.modules.entry(absolute_path).or_insert(Modules {\n+                local_path,\n+                spans: Vec::new(),\n+            });\n+            modules.spans.push(item.span_with_attributes());\n+        }\n+    }\n+\n+    fn check_crate_post(&mut self, cx: &EarlyContext<'_>, _: &Crate) {\n+        for Modules { local_path, spans } in self.modules.values() {\n+            if spans.len() < 2 {\n+                continue;\n+            }\n+\n+            let mut multi_span = MultiSpan::from_spans(spans.clone());\n+            let (&first, duplicates) = spans.split_first().unwrap();\n+\n+            multi_span.push_span_label(first, \"first loaded here\");\n+            for &duplicate in duplicates {\n+                multi_span.push_span_label(duplicate, \"loaded again here\");\n+            }\n+\n+            span_lint_and_help(\n+                cx,\n+                DUPLICATE_MOD,\n+                multi_span,\n+                &format!(\"file is loaded as a module multiple times: `{}`\", local_path.display()),\n+                None,\n+                \"replace all but one `mod` item with `use` items\",\n+            );\n+        }\n+    }\n+}"}, {"sha": "78653d932c44dec1f834b8954fa4b24571b60772", "filename": "clippy_lints/src/lib.register_all.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/1f79a442e561521d0efae15da3da8acf17b580c2/clippy_lints%2Fsrc%2Flib.register_all.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f79a442e561521d0efae15da3da8acf17b580c2/clippy_lints%2Fsrc%2Flib.register_all.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.register_all.rs?ref=1f79a442e561521d0efae15da3da8acf17b580c2", "patch": "@@ -60,6 +60,7 @@ store.register_group(true, \"clippy::all\", Some(\"clippy_all\"), vec![\n     LintId::of(drop_forget_ref::FORGET_NON_DROP),\n     LintId::of(drop_forget_ref::FORGET_REF),\n     LintId::of(drop_forget_ref::UNDROPPED_MANUALLY_DROPS),\n+    LintId::of(duplicate_mod::DUPLICATE_MOD),\n     LintId::of(duration_subsec::DURATION_SUBSEC),\n     LintId::of(entry::MAP_ENTRY),\n     LintId::of(enum_clike::ENUM_CLIKE_UNPORTABLE_VARIANT),"}, {"sha": "155de0a0b089a7fd59ff5c6eedce200be41e2c80", "filename": "clippy_lints/src/lib.register_lints.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/1f79a442e561521d0efae15da3da8acf17b580c2/clippy_lints%2Fsrc%2Flib.register_lints.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f79a442e561521d0efae15da3da8acf17b580c2/clippy_lints%2Fsrc%2Flib.register_lints.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.register_lints.rs?ref=1f79a442e561521d0efae15da3da8acf17b580c2", "patch": "@@ -133,6 +133,7 @@ store.register_lints(&[\n     drop_forget_ref::FORGET_NON_DROP,\n     drop_forget_ref::FORGET_REF,\n     drop_forget_ref::UNDROPPED_MANUALLY_DROPS,\n+    duplicate_mod::DUPLICATE_MOD,\n     duration_subsec::DURATION_SUBSEC,\n     else_if_without_else::ELSE_IF_WITHOUT_ELSE,\n     empty_drop::EMPTY_DROP,"}, {"sha": "5df2dd34368a13414fdef2878a61911e6397459f", "filename": "clippy_lints/src/lib.register_suspicious.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/1f79a442e561521d0efae15da3da8acf17b580c2/clippy_lints%2Fsrc%2Flib.register_suspicious.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f79a442e561521d0efae15da3da8acf17b580c2/clippy_lints%2Fsrc%2Flib.register_suspicious.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.register_suspicious.rs?ref=1f79a442e561521d0efae15da3da8acf17b580c2", "patch": "@@ -14,6 +14,7 @@ store.register_group(true, \"clippy::suspicious\", Some(\"clippy_suspicious\"), vec!\n     LintId::of(crate_in_macro_def::CRATE_IN_MACRO_DEF),\n     LintId::of(drop_forget_ref::DROP_NON_DROP),\n     LintId::of(drop_forget_ref::FORGET_NON_DROP),\n+    LintId::of(duplicate_mod::DUPLICATE_MOD),\n     LintId::of(eval_order_dependence::EVAL_ORDER_DEPENDENCE),\n     LintId::of(float_equality_without_abs::FLOAT_EQUALITY_WITHOUT_ABS),\n     LintId::of(format_impl::PRINT_IN_FORMAT_IMPL),"}, {"sha": "27cb5bf70877f266ce0878633db7c79dc5fe446b", "filename": "clippy_lints/src/lib.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1f79a442e561521d0efae15da3da8acf17b580c2/clippy_lints%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f79a442e561521d0efae15da3da8acf17b580c2/clippy_lints%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.rs?ref=1f79a442e561521d0efae15da3da8acf17b580c2", "patch": "@@ -211,6 +211,7 @@ mod doc;\n mod double_comparison;\n mod double_parens;\n mod drop_forget_ref;\n+mod duplicate_mod;\n mod duration_subsec;\n mod else_if_without_else;\n mod empty_drop;\n@@ -902,6 +903,7 @@ pub fn register_plugins(store: &mut rustc_lint::LintStore, sess: &Session, conf:\n     store.register_late_pass(move || Box::new(large_include_file::LargeIncludeFile::new(max_include_file_size)));\n     store.register_late_pass(|| Box::new(strings::TrimSplitWhitespace));\n     store.register_late_pass(|| Box::new(rc_clone_in_vec_init::RcCloneInVecInit));\n+    store.register_early_pass(|| Box::new(duplicate_mod::DuplicateMod::default()));\n     // add lints here, do not remove this comment, it's used in `new_lint`\n }\n "}, {"sha": "04afe5ac37339f28cb11b5f528e4d557608e1738", "filename": "clippy_utils/src/diagnostics.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1f79a442e561521d0efae15da3da8acf17b580c2/clippy_utils%2Fsrc%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f79a442e561521d0efae15da3da8acf17b580c2/clippy_utils%2Fsrc%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_utils%2Fsrc%2Fdiagnostics.rs?ref=1f79a442e561521d0efae15da3da8acf17b580c2", "patch": "@@ -77,7 +77,7 @@ pub fn span_lint<T: LintContext>(cx: &T, lint: &'static Lint, sp: impl Into<Mult\n pub fn span_lint_and_help<'a, T: LintContext>(\n     cx: &'a T,\n     lint: &'static Lint,\n-    span: Span,\n+    span: impl Into<MultiSpan>,\n     msg: &str,\n     help_span: Option<Span>,\n     help: &str,"}, {"sha": "bf3c817de1c4f33a66e0fd1324251f19120aa14e", "filename": "tests/ui-cargo/duplicate_mod/fail/Cargo.toml", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/1f79a442e561521d0efae15da3da8acf17b580c2/tests%2Fui-cargo%2Fduplicate_mod%2Ffail%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/1f79a442e561521d0efae15da3da8acf17b580c2/tests%2Fui-cargo%2Fduplicate_mod%2Ffail%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fduplicate_mod%2Ffail%2FCargo.toml?ref=1f79a442e561521d0efae15da3da8acf17b580c2", "patch": "@@ -0,0 +1,5 @@\n+[package]\n+name = \"duplicate_mod\"\n+edition = \"2021\"\n+publish = false\n+version = \"0.1.0\""}, {"sha": "8b137891791fe96927ad78e64b0aad7bded08bdc", "filename": "tests/ui-cargo/duplicate_mod/fail/src/a.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/1f79a442e561521d0efae15da3da8acf17b580c2/tests%2Fui-cargo%2Fduplicate_mod%2Ffail%2Fsrc%2Fa.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f79a442e561521d0efae15da3da8acf17b580c2/tests%2Fui-cargo%2Fduplicate_mod%2Ffail%2Fsrc%2Fa.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fduplicate_mod%2Ffail%2Fsrc%2Fa.rs?ref=1f79a442e561521d0efae15da3da8acf17b580c2", "patch": "@@ -0,0 +1 @@\n+"}, {"sha": "8b137891791fe96927ad78e64b0aad7bded08bdc", "filename": "tests/ui-cargo/duplicate_mod/fail/src/b.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/1f79a442e561521d0efae15da3da8acf17b580c2/tests%2Fui-cargo%2Fduplicate_mod%2Ffail%2Fsrc%2Fb.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f79a442e561521d0efae15da3da8acf17b580c2/tests%2Fui-cargo%2Fduplicate_mod%2Ffail%2Fsrc%2Fb.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fduplicate_mod%2Ffail%2Fsrc%2Fb.rs?ref=1f79a442e561521d0efae15da3da8acf17b580c2", "patch": "@@ -0,0 +1 @@\n+"}, {"sha": "8b137891791fe96927ad78e64b0aad7bded08bdc", "filename": "tests/ui-cargo/duplicate_mod/fail/src/c.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/1f79a442e561521d0efae15da3da8acf17b580c2/tests%2Fui-cargo%2Fduplicate_mod%2Ffail%2Fsrc%2Fc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f79a442e561521d0efae15da3da8acf17b580c2/tests%2Fui-cargo%2Fduplicate_mod%2Ffail%2Fsrc%2Fc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fduplicate_mod%2Ffail%2Fsrc%2Fc.rs?ref=1f79a442e561521d0efae15da3da8acf17b580c2", "patch": "@@ -0,0 +1 @@\n+"}, {"sha": "8b137891791fe96927ad78e64b0aad7bded08bdc", "filename": "tests/ui-cargo/duplicate_mod/fail/src/from_other_module.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/1f79a442e561521d0efae15da3da8acf17b580c2/tests%2Fui-cargo%2Fduplicate_mod%2Ffail%2Fsrc%2Ffrom_other_module.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f79a442e561521d0efae15da3da8acf17b580c2/tests%2Fui-cargo%2Fduplicate_mod%2Ffail%2Fsrc%2Ffrom_other_module.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fduplicate_mod%2Ffail%2Fsrc%2Ffrom_other_module.rs?ref=1f79a442e561521d0efae15da3da8acf17b580c2", "patch": "@@ -0,0 +1 @@\n+"}, {"sha": "79b343da24700ef721f458a6f7dfd0ee34738e27", "filename": "tests/ui-cargo/duplicate_mod/fail/src/main.rs", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/1f79a442e561521d0efae15da3da8acf17b580c2/tests%2Fui-cargo%2Fduplicate_mod%2Ffail%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f79a442e561521d0efae15da3da8acf17b580c2/tests%2Fui-cargo%2Fduplicate_mod%2Ffail%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fduplicate_mod%2Ffail%2Fsrc%2Fmain.rs?ref=1f79a442e561521d0efae15da3da8acf17b580c2", "patch": "@@ -0,0 +1,16 @@\n+mod a;\n+\n+mod b;\n+#[path = \"b.rs\"]\n+mod b2;\n+\n+mod c;\n+#[path = \"c.rs\"]\n+mod c2;\n+#[path = \"c.rs\"]\n+mod c3;\n+\n+mod from_other_module;\n+mod other_module;\n+\n+fn main() {}"}, {"sha": "00d7739c8a2eaa9ef1c8bf68c7835d8e6091b243", "filename": "tests/ui-cargo/duplicate_mod/fail/src/main.stderr", "status": "added", "additions": 42, "deletions": 0, "changes": 42, "blob_url": "https://github.com/rust-lang/rust/blob/1f79a442e561521d0efae15da3da8acf17b580c2/tests%2Fui-cargo%2Fduplicate_mod%2Ffail%2Fsrc%2Fmain.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/1f79a442e561521d0efae15da3da8acf17b580c2/tests%2Fui-cargo%2Fduplicate_mod%2Ffail%2Fsrc%2Fmain.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fduplicate_mod%2Ffail%2Fsrc%2Fmain.stderr?ref=1f79a442e561521d0efae15da3da8acf17b580c2", "patch": "@@ -0,0 +1,42 @@\n+error: file is loaded as a module multiple times: `$DIR/b.rs`\n+  --> $DIR/main.rs:3:1\n+   |\n+LL |   mod b;\n+   |   ^^^^^^ first loaded here\n+LL | / #[path = \"b.rs\"]\n+LL | | mod b2;\n+   | |_______^ loaded again here\n+   |\n+   = note: `-D clippy::duplicate-mod` implied by `-D warnings`\n+   = help: replace all but one `mod` item with `use` items\n+\n+error: file is loaded as a module multiple times: `$DIR/c.rs`\n+  --> $DIR/main.rs:7:1\n+   |\n+LL |   mod c;\n+   |   ^^^^^^ first loaded here\n+LL | / #[path = \"c.rs\"]\n+LL | | mod c2;\n+   | |_______^ loaded again here\n+LL | / #[path = \"c.rs\"]\n+LL | | mod c3;\n+   | |_______^ loaded again here\n+   |\n+   = help: replace all but one `mod` item with `use` items\n+\n+error: file is loaded as a module multiple times: `$DIR/from_other_module.rs`\n+  --> $DIR/main.rs:13:1\n+   |\n+LL |   mod from_other_module;\n+   |   ^^^^^^^^^^^^^^^^^^^^^^ first loaded here\n+   |\n+  ::: $DIR/other_module/mod.rs:1:1\n+   |\n+LL | / #[path = \"../from_other_module.rs\"]\n+LL | | mod m;\n+   | |______^ loaded again here\n+   |\n+   = help: replace all but one `mod` item with `use` items\n+\n+error: aborting due to 3 previous errors\n+"}, {"sha": "36ce7286aded012860e0026c9833efad94869b3b", "filename": "tests/ui-cargo/duplicate_mod/fail/src/other_module/mod.rs", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1f79a442e561521d0efae15da3da8acf17b580c2/tests%2Fui-cargo%2Fduplicate_mod%2Ffail%2Fsrc%2Fother_module%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f79a442e561521d0efae15da3da8acf17b580c2/tests%2Fui-cargo%2Fduplicate_mod%2Ffail%2Fsrc%2Fother_module%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-cargo%2Fduplicate_mod%2Ffail%2Fsrc%2Fother_module%2Fmod.rs?ref=1f79a442e561521d0efae15da3da8acf17b580c2", "patch": "@@ -0,0 +1,2 @@\n+#[path = \"../from_other_module.rs\"]\n+mod m;"}]}