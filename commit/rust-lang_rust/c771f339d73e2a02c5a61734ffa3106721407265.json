{"sha": "c771f339d73e2a02c5a61734ffa3106721407265", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM3NzFmMzM5ZDczZTJhMDJjNWE2MTczNGZmYTMxMDY3MjE0MDcyNjU=", "commit": {"author": {"name": "A.A.Abroskin", "email": "arkweid@evilmartians.com", "date": "2019-01-23T08:49:02Z"}, "committer": {"name": "A.A.Abroskin", "email": "arkweid@evilmartians.com", "date": "2019-01-23T14:58:33Z"}, "message": "allow assertions_on_constants for collapsible_if and missing_test_files", "tree": {"sha": "190cbe45129e7b8b0a85a9f42aaa8a3fbdc0eaf4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/190cbe45129e7b8b0a85a9f42aaa8a3fbdc0eaf4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c771f339d73e2a02c5a61734ffa3106721407265", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c771f339d73e2a02c5a61734ffa3106721407265", "html_url": "https://github.com/rust-lang/rust/commit/c771f339d73e2a02c5a61734ffa3106721407265", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c771f339d73e2a02c5a61734ffa3106721407265/comments", "author": null, "committer": null, "parents": [{"sha": "f11d993c0f0a8282e6721f770c04960ae1d2b2bc", "url": "https://api.github.com/repos/rust-lang/rust/commits/f11d993c0f0a8282e6721f770c04960ae1d2b2bc", "html_url": "https://github.com/rust-lang/rust/commit/f11d993c0f0a8282e6721f770c04960ae1d2b2bc"}], "stats": {"total": 42, "additions": 13, "deletions": 29}, "files": [{"sha": "a148cb1c3a6f266c4703560baa4810ad2307c2cf", "filename": "clippy_lints/src/assertions_on_constants.rs", "status": "modified", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/c771f339d73e2a02c5a61734ffa3106721407265/clippy_lints%2Fsrc%2Fassertions_on_constants.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c771f339d73e2a02c5a61734ffa3106721407265/clippy_lints%2Fsrc%2Fassertions_on_constants.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fassertions_on_constants.rs?ref=c771f339d73e2a02c5a61734ffa3106721407265", "patch": "@@ -1,12 +1,3 @@\n-// Copyright 2014-2018 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n use crate::consts::{constant, Constant};\n use crate::rustc::hir::{Expr, ExprKind};\n use crate::rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};"}, {"sha": "bd0cee7564442fd63a12d228ea4fdc06ddf1a7b8", "filename": "tests/missing-test-files.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c771f339d73e2a02c5a61734ffa3106721407265/tests%2Fmissing-test-files.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c771f339d73e2a02c5a61734ffa3106721407265/tests%2Fmissing-test-files.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fmissing-test-files.rs?ref=c771f339d73e2a02c5a61734ffa3106721407265", "patch": "@@ -1,3 +1,5 @@\n+#![allow(clippy::assertions_on_constants)]\n+\n use std::fs::{self, DirEntry};\n use std::path::Path;\n "}, {"sha": "daeceebd3a2c7ed3fb76e08b2f1e6734e80829e0", "filename": "tests/ui/assertions_on_constants.rs", "status": "modified", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/c771f339d73e2a02c5a61734ffa3106721407265/tests%2Fui%2Fassertions_on_constants.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c771f339d73e2a02c5a61734ffa3106721407265/tests%2Fui%2Fassertions_on_constants.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fassertions_on_constants.rs?ref=c771f339d73e2a02c5a61734ffa3106721407265", "patch": "@@ -1,12 +1,3 @@\n-// Copyright 2014-2018 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n fn main() {\n     assert!(true);\n     assert!(false);"}, {"sha": "e8001acceb1ec6ef5d8122300577c33993bdbdfd", "filename": "tests/ui/assertions_on_constants.stderr", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/c771f339d73e2a02c5a61734ffa3106721407265/tests%2Fui%2Fassertions_on_constants.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c771f339d73e2a02c5a61734ffa3106721407265/tests%2Fui%2Fassertions_on_constants.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fassertions_on_constants.stderr?ref=c771f339d73e2a02c5a61734ffa3106721407265", "patch": "@@ -1,5 +1,5 @@\n error: assert!(true) will be optimized out by the compiler\n-  --> $DIR/assertions_on_constants.rs:11:5\n+  --> $DIR/assertions_on_constants.rs:2:5\n    |\n LL |     assert!(true);\n    |     ^^^^^^^^^^^^^^\n@@ -8,39 +8,39 @@ LL |     assert!(true);\n    = help: remove it\n \n error: assert!(false) should probably be replaced\n-  --> $DIR/assertions_on_constants.rs:12:5\n+  --> $DIR/assertions_on_constants.rs:3:5\n    |\n LL |     assert!(false);\n    |     ^^^^^^^^^^^^^^^\n    |\n    = help: use panic!() or unreachable!()\n \n error: assert!(true) will be optimized out by the compiler\n-  --> $DIR/assertions_on_constants.rs:13:5\n+  --> $DIR/assertions_on_constants.rs:4:5\n    |\n LL |     assert!(true, \"true message\");\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n    = help: remove it\n \n error: assert!(false) should probably be replaced\n-  --> $DIR/assertions_on_constants.rs:14:5\n+  --> $DIR/assertions_on_constants.rs:5:5\n    |\n LL |     assert!(false, \"false message\");\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n    = help: use panic!() or unreachable!()\n \n error: assert!(const: true) will be optimized out by the compiler\n-  --> $DIR/assertions_on_constants.rs:17:5\n+  --> $DIR/assertions_on_constants.rs:8:5\n    |\n LL |     assert!(B);\n    |     ^^^^^^^^^^^\n    |\n    = help: remove it\n \n error: assert!(const: false) should probably be replaced\n-  --> $DIR/assertions_on_constants.rs:20:5\n+  --> $DIR/assertions_on_constants.rs:11:5\n    |\n LL |     assert!(C);\n    |     ^^^^^^^^^^^"}, {"sha": "91b65a43be77fa5fdb3aa2a1fe66f2227347a7cf", "filename": "tests/ui/attrs.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c771f339d73e2a02c5a61734ffa3106721407265/tests%2Fui%2Fattrs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c771f339d73e2a02c5a61734ffa3106721407265/tests%2Fui%2Fattrs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fattrs.rs?ref=c771f339d73e2a02c5a61734ffa3106721407265", "patch": "@@ -1,5 +1,5 @@\n #![warn(clippy::inline_always, clippy::deprecated_semver)]\n-#![allow(clippy::assertions_on_constants::assertions_on_constants)]\n+#![allow(clippy::assertions_on_constants)]\n #[inline(always)]\n fn test_attr_lint() {\n     assert!(true)"}, {"sha": "3c7de56406eee1a827063bfca3f9c98968cc312c", "filename": "tests/ui/collapsible_if.fixed", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c771f339d73e2a02c5a61734ffa3106721407265/tests%2Fui%2Fcollapsible_if.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/c771f339d73e2a02c5a61734ffa3106721407265/tests%2Fui%2Fcollapsible_if.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcollapsible_if.fixed?ref=c771f339d73e2a02c5a61734ffa3106721407265", "patch": "@@ -1,5 +1,5 @@\n // run-rustfix\n-#![allow(clippy::cyclomatic_complexity)]\n+#![allow(clippy::cyclomatic_complexity, clippy::assertions_on_constants)]\n \n #[rustfmt::skip]\n #[warn(clippy::collapsible_if)]"}, {"sha": "e46d7537577410cc1d30694df4d68b5ab69346bf", "filename": "tests/ui/collapsible_if.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c771f339d73e2a02c5a61734ffa3106721407265/tests%2Fui%2Fcollapsible_if.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c771f339d73e2a02c5a61734ffa3106721407265/tests%2Fui%2Fcollapsible_if.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcollapsible_if.rs?ref=c771f339d73e2a02c5a61734ffa3106721407265", "patch": "@@ -1,5 +1,5 @@\n // run-rustfix\n-#![allow(clippy::cyclomatic_complexity)]\n+#![allow(clippy::cyclomatic_complexity, clippy::assertions_on_constants)]\n \n #[rustfmt::skip]\n #[warn(clippy::collapsible_if)]"}, {"sha": "b43dc200825237b55a7c8ca83009a2d585e8d511", "filename": "tests/ui/empty_line_after_outer_attribute.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c771f339d73e2a02c5a61734ffa3106721407265/tests%2Fui%2Fempty_line_after_outer_attribute.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c771f339d73e2a02c5a61734ffa3106721407265/tests%2Fui%2Fempty_line_after_outer_attribute.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fempty_line_after_outer_attribute.rs?ref=c771f339d73e2a02c5a61734ffa3106721407265", "patch": "@@ -1,5 +1,5 @@\n #![warn(clippy::empty_line_after_outer_attr)]\n-#![allow(clippy::assertions_on_constants::assertions_on_constants)]\n+#![allow(clippy::assertions_on_constants)]\n // This should produce a warning\n #[crate_type = \"lib\"]\n "}, {"sha": "92290da8a6ac0c1a495533196b98e8a65d856f86", "filename": "tests/ui/panic_unimplemented.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c771f339d73e2a02c5a61734ffa3106721407265/tests%2Fui%2Fpanic_unimplemented.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c771f339d73e2a02c5a61734ffa3106721407265/tests%2Fui%2Fpanic_unimplemented.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fpanic_unimplemented.rs?ref=c771f339d73e2a02c5a61734ffa3106721407265", "patch": "@@ -1,5 +1,5 @@\n #![warn(clippy::panic_params, clippy::unimplemented)]\n-#![allow(clippy::assertions_on_constants::assertions_on_constants)]\n+#![allow(clippy::assertions_on_constants)]\n fn missing() {\n     if true {\n         panic!(\"{}\");"}]}