{"sha": "9af7de1cb842987e97677fdede4f538750ce8fa9", "node_id": "MDY6Q29tbWl0NzI0NzEyOjlhZjdkZTFjYjg0Mjk4N2U5NzY3N2ZkZWRlNGY1Mzg3NTBjZThmYTk=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2017-09-10T12:03:20Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-09-10T12:03:20Z"}, "message": "Rollup merge of #44262 - alexcrichton:repr-128-gate, r=nikomatsakis\n\nrustc: Separately feature gate repr(i128)\n\nBrought up during the discussion of #35118, the support for this is still\nsomewhat buggy and so stabilization likely wants to be considered independently\nof the type itself.", "tree": {"sha": "9ffe1bebd47a1f736a37f44f0ab2f189ffebd54d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9ffe1bebd47a1f736a37f44f0ab2f189ffebd54d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9af7de1cb842987e97677fdede4f538750ce8fa9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9af7de1cb842987e97677fdede4f538750ce8fa9", "html_url": "https://github.com/rust-lang/rust/commit/9af7de1cb842987e97677fdede4f538750ce8fa9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9af7de1cb842987e97677fdede4f538750ce8fa9/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "34035d23ff5acd9bd08602bfab5d667450243966", "url": "https://api.github.com/repos/rust-lang/rust/commits/34035d23ff5acd9bd08602bfab5d667450243966", "html_url": "https://github.com/rust-lang/rust/commit/34035d23ff5acd9bd08602bfab5d667450243966"}, {"sha": "51a478c90b31c1b2248a1d24fa933c570048593c", "url": "https://api.github.com/repos/rust-lang/rust/commits/51a478c90b31c1b2248a1d24fa933c570048593c", "html_url": "https://github.com/rust-lang/rust/commit/51a478c90b31c1b2248a1d24fa933c570048593c"}], "stats": {"total": 27, "additions": 25, "deletions": 2}, "files": [{"sha": "8ddfb5b3050b0f8220a9f8cc8f3b547922caff3a", "filename": "src/librustc_typeck/check/mod.rs", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/9af7de1cb842987e97677fdede4f538750ce8fa9/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9af7de1cb842987e97677fdede4f538750ce8fa9/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs?ref=9af7de1cb842987e97677fdede4f538750ce8fa9", "patch": "@@ -1554,9 +1554,12 @@ pub fn check_enum<'a, 'tcx>(tcx: TyCtxt<'a, 'tcx, 'tcx>,\n \n     let repr_type_ty = def.repr.discr_type().to_ty(tcx);\n     if repr_type_ty == tcx.types.i128 || repr_type_ty == tcx.types.u128 {\n-        if !tcx.sess.features.borrow().i128_type {\n+        if !tcx.sess.features.borrow().repr128 {\n             emit_feature_err(&tcx.sess.parse_sess,\n-                             \"i128_type\", sp, GateIssue::Language, \"128-bit type is unstable\");\n+                             \"repr128\",\n+                             sp,\n+                             GateIssue::Language,\n+                             \"repr with 128-bit type is unstable\");\n         }\n     }\n "}, {"sha": "e9e9c6bf4eacaf730b855692388445b2ca2182c2", "filename": "src/libsyntax/feature_gate.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/9af7de1cb842987e97677fdede4f538750ce8fa9/src%2Flibsyntax%2Ffeature_gate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9af7de1cb842987e97677fdede4f538750ce8fa9/src%2Flibsyntax%2Ffeature_gate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Ffeature_gate.rs?ref=9af7de1cb842987e97677fdede4f538750ce8fa9", "patch": "@@ -312,6 +312,9 @@ declare_features! (\n     // The `i128` type\n     (active, i128_type, \"1.16.0\", Some(35118)),\n \n+    // The `repr(i128)` annotation for enums\n+    (active, repr128, \"1.16.0\", Some(35118)),\n+\n     // The `unadjusted` ABI. Perma unstable.\n     (active, abi_unadjusted, \"1.16.0\", None),\n "}, {"sha": "96fffa6cdd0dcee0625459da8023f981709789f7", "filename": "src/test/compile-fail/feature-gate-repr128.rs", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/9af7de1cb842987e97677fdede4f538750ce8fa9/src%2Ftest%2Fcompile-fail%2Ffeature-gate-repr128.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9af7de1cb842987e97677fdede4f538750ce8fa9/src%2Ftest%2Fcompile-fail%2Ffeature-gate-repr128.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Ffeature-gate-repr128.rs?ref=9af7de1cb842987e97677fdede4f538750ce8fa9", "patch": "@@ -0,0 +1,17 @@\n+// Copyright 2016 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+#[repr(u128)]\n+enum A { //~ ERROR repr with 128-bit type is unstable\n+    //~| HELP: add #![feature(repr128)]\n+    A(u64)\n+}\n+\n+fn main() {}"}]}