{"sha": "f951b52e91c5c0487ad4d3a5454b193f15146d6a", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY5NTFiNTJlOTFjNWMwNDg3YWQ0ZDNhNTQ1NGIxOTNmMTUxNDZkNmE=", "commit": {"author": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2011-02-11T03:13:47Z"}, "committer": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2011-02-11T03:13:47Z"}, "message": "Add support to pat_lit to fold.", "tree": {"sha": "d11a5f229b8523d768318cb164120ca7b73f26a8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d11a5f229b8523d768318cb164120ca7b73f26a8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f951b52e91c5c0487ad4d3a5454b193f15146d6a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f951b52e91c5c0487ad4d3a5454b193f15146d6a", "html_url": "https://github.com/rust-lang/rust/commit/f951b52e91c5c0487ad4d3a5454b193f15146d6a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f951b52e91c5c0487ad4d3a5454b193f15146d6a/comments", "author": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "committer": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "277334890dabd85c1015da666e2700dfe9950e2d", "url": "https://api.github.com/repos/rust-lang/rust/commits/277334890dabd85c1015da666e2700dfe9950e2d", "html_url": "https://github.com/rust-lang/rust/commit/277334890dabd85c1015da666e2700dfe9950e2d"}], "stats": {"total": 11, "additions": 11, "deletions": 0}, "files": [{"sha": "5930ba75280232d84c0185500a2a4b0e2c57eb17", "filename": "src/comp/middle/fold.rs", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/f951b52e91c5c0487ad4d3a5454b193f15146d6a/src%2Fcomp%2Fmiddle%2Ffold.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f951b52e91c5c0487ad4d3a5454b193f15146d6a/src%2Fcomp%2Fmiddle%2Ffold.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Ffold.rs?ref=f951b52e91c5c0487ad4d3a5454b193f15146d6a", "patch": "@@ -160,6 +160,9 @@ type ast_fold[ENV] =\n      (fn(&ENV e, &span sp,\n          ann a) -> @pat)                          fold_pat_wild,\n \n+     (fn(&ENV e, &span sp,\n+         @ast.lit lit, ann a) -> @pat)            fold_pat_lit,\n+\n      (fn(&ENV e, &span sp,\n          ident i, def_id did, ann a) -> @pat)     fold_pat_bind,\n \n@@ -421,6 +424,9 @@ fn fold_pat[ENV](&ENV env, ast_fold[ENV] fld, @ast.pat p) -> @ast.pat {\n \n     alt (p.node) {\n         case (ast.pat_wild(?t)) { ret fld.fold_pat_wild(env_, p.span, t); }\n+        case (ast.pat_lit(?lt, ?t)) {\n+            ret fld.fold_pat_lit(env_, p.span, lt, t);\n+        }\n         case (ast.pat_bind(?id, ?did, ?t)) {\n             ret fld.fold_pat_bind(env_, p.span, id, did, t);\n         }\n@@ -1122,6 +1128,10 @@ fn identity_fold_pat_wild[ENV](&ENV e, &span sp, ann a) -> @pat {\n     ret @respan(sp, ast.pat_wild(a));\n }\n \n+fn identity_fold_pat_lit[ENV](&ENV e, &span sp, @ast.lit lit, ann a) -> @pat {\n+    ret @respan(sp, ast.pat_lit(lit, a));\n+}\n+\n fn identity_fold_pat_bind[ENV](&ENV e, &span sp, ident i, def_id did, ann a)\n         -> @pat {\n     ret @respan(sp, ast.pat_bind(i, did, a));\n@@ -1373,6 +1383,7 @@ fn new_identity_fold[ENV]() -> ast_fold[ENV] {\n          fold_decl_item   = bind identity_fold_decl_item[ENV](_,_,_),\n \n          fold_pat_wild    = bind identity_fold_pat_wild[ENV](_,_,_),\n+         fold_pat_lit     = bind identity_fold_pat_lit[ENV](_,_,_,_),\n          fold_pat_bind    = bind identity_fold_pat_bind[ENV](_,_,_,_,_),\n          fold_pat_tag     = bind identity_fold_pat_tag[ENV](_,_,_,_,_,_),\n "}]}