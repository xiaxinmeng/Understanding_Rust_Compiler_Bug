{"sha": "1eed662fc4f066ac97eb12bb88008c7eae957d6a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFlZWQ2NjJmYzRmMDY2YWM5N2ViMTJiYjg4MDA4YzdlYWU5NTdkNmE=", "commit": {"author": {"name": "Jorge Aparicio", "email": "jorge@japaric.io", "date": "2018-04-06T13:44:08Z"}, "committer": {"name": "Jorge Aparicio", "email": "jorge@japaric.io", "date": "2018-04-06T13:48:06Z"}, "message": "refactor: simplify `needs_gdb_debug_scripts_section`", "tree": {"sha": "302823b0dcf7fa6921cf16fc1e8d595c1cbc0d83", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/302823b0dcf7fa6921cf16fc1e8d595c1cbc0d83"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1eed662fc4f066ac97eb12bb88008c7eae957d6a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1eed662fc4f066ac97eb12bb88008c7eae957d6a", "html_url": "https://github.com/rust-lang/rust/commit/1eed662fc4f066ac97eb12bb88008c7eae957d6a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1eed662fc4f066ac97eb12bb88008c7eae957d6a/comments", "author": {"login": "japaric", "id": 5018213, "node_id": "MDQ6VXNlcjUwMTgyMTM=", "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4", "gravatar_id": "", "url": "https://api.github.com/users/japaric", "html_url": "https://github.com/japaric", "followers_url": "https://api.github.com/users/japaric/followers", "following_url": "https://api.github.com/users/japaric/following{/other_user}", "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}", "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/japaric/subscriptions", "organizations_url": "https://api.github.com/users/japaric/orgs", "repos_url": "https://api.github.com/users/japaric/repos", "events_url": "https://api.github.com/users/japaric/events{/privacy}", "received_events_url": "https://api.github.com/users/japaric/received_events", "type": "User", "site_admin": false}, "committer": {"login": "japaric", "id": 5018213, "node_id": "MDQ6VXNlcjUwMTgyMTM=", "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4", "gravatar_id": "", "url": "https://api.github.com/users/japaric", "html_url": "https://github.com/japaric", "followers_url": "https://api.github.com/users/japaric/followers", "following_url": "https://api.github.com/users/japaric/following{/other_user}", "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}", "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/japaric/subscriptions", "organizations_url": "https://api.github.com/users/japaric/orgs", "repos_url": "https://api.github.com/users/japaric/repos", "events_url": "https://api.github.com/users/japaric/events{/privacy}", "received_events_url": "https://api.github.com/users/japaric/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ea08bdf30cdeed72973235b17715b552d322da5e", "url": "https://api.github.com/repos/rust-lang/rust/commits/ea08bdf30cdeed72973235b17715b552d322da5e", "html_url": "https://github.com/rust-lang/rust/commit/ea08bdf30cdeed72973235b17715b552d322da5e"}], "stats": {"total": 5, "additions": 3, "deletions": 2}, "files": [{"sha": "480de9ff486e5d1e1af6864c3f0a2c0f8d0499bd", "filename": "src/librustc_back/target/apple_base.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/1eed662fc4f066ac97eb12bb88008c7eae957d6a/src%2Flibrustc_back%2Ftarget%2Fapple_base.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1eed662fc4f066ac97eb12bb88008c7eae957d6a/src%2Flibrustc_back%2Ftarget%2Fapple_base.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Ftarget%2Fapple_base.rs?ref=1eed662fc4f066ac97eb12bb88008c7eae957d6a", "patch": "@@ -47,6 +47,7 @@ pub fn opts() -> TargetOptions {\n         exe_allocation_crate: super::maybe_jemalloc(),\n         has_elf_tls: version >= (10, 7),\n         abi_return_struct_as_int: true,\n+        emit_debug_gdb_scripts: false,\n         .. Default::default()\n     }\n }"}, {"sha": "971b21e062f69415d858743eff0d3187cb86f993", "filename": "src/librustc_back/target/windows_base.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/1eed662fc4f066ac97eb12bb88008c7eae957d6a/src%2Flibrustc_back%2Ftarget%2Fwindows_base.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1eed662fc4f066ac97eb12bb88008c7eae957d6a/src%2Flibrustc_back%2Ftarget%2Fwindows_base.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Ftarget%2Fwindows_base.rs?ref=1eed662fc4f066ac97eb12bb88008c7eae957d6a", "patch": "@@ -102,6 +102,7 @@ pub fn opts() -> TargetOptions {\n         ],\n         custom_unwind_resume: true,\n         abi_return_struct_as_int: true,\n+        emit_debug_gdb_scripts: false,\n \n         .. Default::default()\n     }"}, {"sha": "06e879bec3492310184cce57472dfef0e0b2e535", "filename": "src/librustc_back/target/windows_msvc_base.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/1eed662fc4f066ac97eb12bb88008c7eae957d6a/src%2Flibrustc_back%2Ftarget%2Fwindows_msvc_base.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1eed662fc4f066ac97eb12bb88008c7eae957d6a/src%2Flibrustc_back%2Ftarget%2Fwindows_msvc_base.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Ftarget%2Fwindows_msvc_base.rs?ref=1eed662fc4f066ac97eb12bb88008c7eae957d6a", "patch": "@@ -34,6 +34,7 @@ pub fn opts() -> TargetOptions {\n         crt_static_allows_dylibs: true,\n         crt_static_respected: true,\n         abi_return_struct_as_int: true,\n+        emit_debug_gdb_scripts: false,\n \n         .. Default::default()\n     }"}, {"sha": "0b4858c7ab051085350c48fa95fa01d0e05fd5c3", "filename": "src/librustc_trans/debuginfo/gdb.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1eed662fc4f066ac97eb12bb88008c7eae957d6a/src%2Flibrustc_trans%2Fdebuginfo%2Fgdb.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1eed662fc4f066ac97eb12bb88008c7eae957d6a/src%2Flibrustc_trans%2Fdebuginfo%2Fgdb.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Fdebuginfo%2Fgdb.rs?ref=1eed662fc4f066ac97eb12bb88008c7eae957d6a", "patch": "@@ -83,8 +83,6 @@ pub fn needs_gdb_debug_scripts_section(cx: &CodegenCx) -> bool {\n                             \"omit_gdb_pretty_printer_section\");\n \n     !omit_gdb_pretty_printer_section &&\n-    !cx.sess().target.target.options.is_like_osx &&\n-    !cx.sess().target.target.options.is_like_windows &&\n     cx.sess().opts.debuginfo != NoDebugInfo &&\n     cx.sess().target.target.options.emit_debug_gdb_scripts\n }"}]}