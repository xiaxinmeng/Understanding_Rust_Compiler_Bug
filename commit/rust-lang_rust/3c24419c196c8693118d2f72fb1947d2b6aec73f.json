{"sha": "3c24419c196c8693118d2f72fb1947d2b6aec73f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNjMjQ0MTljMTk2Yzg2OTMxMThkMmY3MmZiMTk0N2QyYjZhZWM3M2Y=", "commit": {"author": {"name": "Erick Tryzelaar", "email": "erick.tryzelaar@gmail.com", "date": "2013-01-24T00:38:07Z"}, "committer": {"name": "Erick Tryzelaar", "email": "erick.tryzelaar@gmail.com", "date": "2013-01-25T00:24:31Z"}, "message": "time tests are racing on tzset, so merge the tests together.\n\nThis attempts to fix issue #3327.", "tree": {"sha": "6b56f7dc980dd279c85e10c0c2493cf8211f29de", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6b56f7dc980dd279c85e10c0c2493cf8211f29de"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3c24419c196c8693118d2f72fb1947d2b6aec73f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3c24419c196c8693118d2f72fb1947d2b6aec73f", "html_url": "https://github.com/rust-lang/rust/commit/3c24419c196c8693118d2f72fb1947d2b6aec73f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3c24419c196c8693118d2f72fb1947d2b6aec73f/comments", "author": {"login": "erickt", "id": 84711, "node_id": "MDQ6VXNlcjg0NzEx", "avatar_url": "https://avatars.githubusercontent.com/u/84711?v=4", "gravatar_id": "", "url": "https://api.github.com/users/erickt", "html_url": "https://github.com/erickt", "followers_url": "https://api.github.com/users/erickt/followers", "following_url": "https://api.github.com/users/erickt/following{/other_user}", "gists_url": "https://api.github.com/users/erickt/gists{/gist_id}", "starred_url": "https://api.github.com/users/erickt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/erickt/subscriptions", "organizations_url": "https://api.github.com/users/erickt/orgs", "repos_url": "https://api.github.com/users/erickt/repos", "events_url": "https://api.github.com/users/erickt/events{/privacy}", "received_events_url": "https://api.github.com/users/erickt/received_events", "type": "User", "site_admin": false}, "committer": {"login": "erickt", "id": 84711, "node_id": "MDQ6VXNlcjg0NzEx", "avatar_url": "https://avatars.githubusercontent.com/u/84711?v=4", "gravatar_id": "", "url": "https://api.github.com/users/erickt", "html_url": "https://github.com/erickt", "followers_url": "https://api.github.com/users/erickt/followers", "following_url": "https://api.github.com/users/erickt/following{/other_user}", "gists_url": "https://api.github.com/users/erickt/gists{/gist_id}", "starred_url": "https://api.github.com/users/erickt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/erickt/subscriptions", "organizations_url": "https://api.github.com/users/erickt/orgs", "repos_url": "https://api.github.com/users/erickt/repos", "events_url": "https://api.github.com/users/erickt/events{/privacy}", "received_events_url": "https://api.github.com/users/erickt/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e84576b888a6fbbac8de96206a3715dc80291acf", "url": "https://api.github.com/repos/rust-lang/rust/commits/e84576b888a6fbbac8de96206a3715dc80291acf", "html_url": "https://github.com/rust-lang/rust/commit/e84576b888a6fbbac8de96206a3715dc80291acf"}], "stats": {"total": 28, "additions": 16, "deletions": 12}, "files": [{"sha": "731767d475faa0d9b0d20b1d78ec7e01fd4672e4", "filename": "src/libstd/time.rs", "status": "modified", "additions": 16, "deletions": 12, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/3c24419c196c8693118d2f72fb1947d2b6aec73f/src%2Flibstd%2Ftime.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3c24419c196c8693118d2f72fb1947d2b6aec73f/src%2Flibstd%2Ftime.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Ftime.rs?ref=3c24419c196c8693118d2f72fb1947d2b6aec73f", "patch": "@@ -902,7 +902,6 @@ mod tests {\n     use core::uint;\n     use core::vec;\n \n-    #[test]\n     fn test_get_time() {\n         const some_recent_date: i64 = 1325376000i64; // 2012-01-01T00:00:00Z\n         const some_future_date: i64 = 1577836800i64; // 2020-01-01T00:00:00Z\n@@ -926,7 +925,6 @@ mod tests {\n         }\n     }\n \n-    #[test]\n     fn test_precise_time() {\n         let s0 = precise_time_s();\n         let ns1 = precise_time_ns();\n@@ -944,7 +942,6 @@ mod tests {\n         assert ns2 >= ns1;\n     }\n \n-    #[test]\n     fn test_at_utc() {\n         os::setenv(~\"TZ\", ~\"America/Los_Angeles\");\n         tzset();\n@@ -966,7 +963,6 @@ mod tests {\n         assert utc.tm_nsec == 54321_i32;\n     }\n \n-    #[test]\n     fn test_at() {\n         os::setenv(~\"TZ\", ~\"America/Los_Angeles\");\n         tzset();\n@@ -995,7 +991,6 @@ mod tests {\n         assert local.tm_nsec == 54321_i32;\n     }\n \n-    #[test]\n     fn test_to_timespec() {\n         os::setenv(~\"TZ\", ~\"America/Los_Angeles\");\n         tzset();\n@@ -1007,7 +1002,6 @@ mod tests {\n         assert utc.to_local().to_timespec() == time;\n     }\n \n-    #[test]\n     fn test_conversions() {\n         os::setenv(~\"TZ\", ~\"America/Los_Angeles\");\n         tzset();\n@@ -1024,7 +1018,6 @@ mod tests {\n         assert utc.to_local().to_utc() == utc;\n     }\n \n-    #[test]\n     fn test_strptime() {\n         os::setenv(~\"TZ\", ~\"America/Los_Angeles\");\n         tzset();\n@@ -1179,8 +1172,6 @@ mod tests {\n         assert test(~\"%\", ~\"%%\");\n     }\n \n-    #[test]\n-    #[ignore(reason = \"randomred\")]\n     fn test_ctime() {\n         os::setenv(~\"TZ\", ~\"America/Los_Angeles\");\n         tzset();\n@@ -1195,8 +1186,6 @@ mod tests {\n         assert local.ctime() == ~\"Fri Feb 13 15:31:30 2009\";\n     }\n \n-    #[test]\n-    #[ignore(reason = \"randomred\")]\n     fn test_strftime() {\n         os::setenv(~\"TZ\", ~\"America/Los_Angeles\");\n         tzset();\n@@ -1270,7 +1259,6 @@ mod tests {\n         assert utc.rfc3339() == ~\"2009-02-13T23:31:30Z\";\n     }\n \n-    #[test]\n     fn test_timespec_eq_ord() {\n         use core::cmp::{eq, ge, gt, le, lt, ne};\n \n@@ -1303,4 +1291,20 @@ mod tests {\n         assert gt(c, b);\n         assert gt(d, c);\n     }\n+\n+    #[test]\n+    fn run_tests() {\n+        // The tests race on tzset. So instead of having many independent\n+        // tests, we will just call the functions now.\n+        test_get_time();\n+        test_precise_time();\n+        test_at_utc();\n+        test_at();\n+        test_to_timespec();\n+        test_conversions();\n+        test_strptime();\n+        test_ctime();\n+        test_strftime();\n+        test_timespec_eq_ord();\n+    }\n }"}]}