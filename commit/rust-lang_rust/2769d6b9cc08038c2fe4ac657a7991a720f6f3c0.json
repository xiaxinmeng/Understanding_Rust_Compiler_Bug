{"sha": "2769d6b9cc08038c2fe4ac657a7991a720f6f3c0", "node_id": "C_kwDOAAsO6NoAKDI3NjlkNmI5Y2MwODAzOGMyZmU0YWM2NTdhNzk5MWE3MjBmNmYzYzA", "commit": {"author": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2022-07-30T20:53:18Z"}, "committer": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2022-08-19T13:04:47Z"}, "message": "Minor refactoring", "tree": {"sha": "c8d9aab2632bc34cb462ceb0c8633a54cbe631c4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c8d9aab2632bc34cb462ceb0c8633a54cbe631c4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2769d6b9cc08038c2fe4ac657a7991a720f6f3c0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2769d6b9cc08038c2fe4ac657a7991a720f6f3c0", "html_url": "https://github.com/rust-lang/rust/commit/2769d6b9cc08038c2fe4ac657a7991a720f6f3c0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2769d6b9cc08038c2fe4ac657a7991a720f6f3c0/comments", "author": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6c943bad02626dddc5e5135b23c77429b6e4a063", "url": "https://api.github.com/repos/rust-lang/rust/commits/6c943bad02626dddc5e5135b23c77429b6e4a063", "html_url": "https://github.com/rust-lang/rust/commit/6c943bad02626dddc5e5135b23c77429b6e4a063"}], "stats": {"total": 3, "additions": 1, "deletions": 2}, "files": [{"sha": "dc0fd2bdc65114035d3e2394f1c952a7161587bd", "filename": "src/bootstrap/config.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/2769d6b9cc08038c2fe4ac657a7991a720f6f3c0/src%2Fbootstrap%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2769d6b9cc08038c2fe4ac657a7991a720f6f3c0/src%2Fbootstrap%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fconfig.rs?ref=2769d6b9cc08038c2fe4ac657a7991a720f6f3c0", "patch": "@@ -993,7 +993,6 @@ impl Config {\n                     // This is currently all tier 1 targets and tier 2 targets with host tools\n                     // (since others may not have CI artifacts)\n                     // https://doc.rust-lang.org/rustc/platform-support.html#tier-1\n-                    // FIXME: this is duplicated in bootstrap.py\n                     let supported_platforms = [\n                         // tier 1\n                         \"aarch64-unknown-linux-gnu\",\n@@ -1176,14 +1175,14 @@ impl Config {\n \n         if config.llvm_from_ci {\n             let triple = &config.build.triple;\n+            let ci_llvm_bin = config.ci_llvm_root().join(\"bin\");\n             let mut build_target = config\n                 .target_config\n                 .entry(config.build)\n                 .or_insert_with(|| Target::from_triple(&triple));\n \n             check_ci_llvm!(build_target.llvm_config);\n             check_ci_llvm!(build_target.llvm_filecheck);\n-            let ci_llvm_bin = config.out.join(&*config.build.triple).join(\"ci-llvm/bin\");\n             build_target.llvm_config = Some(ci_llvm_bin.join(exe(\"llvm-config\", config.build)));\n             build_target.llvm_filecheck = Some(ci_llvm_bin.join(exe(\"FileCheck\", config.build)));\n         }"}]}