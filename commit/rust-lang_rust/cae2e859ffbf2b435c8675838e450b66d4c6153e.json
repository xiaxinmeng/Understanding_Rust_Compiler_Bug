{"sha": "cae2e859ffbf2b435c8675838e450b66d4c6153e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNhZTJlODU5ZmZiZjJiNDM1Yzg2NzU4MzhlNDUwYjY2ZDRjNjE1M2U=", "commit": {"author": {"name": "Kirill Bulatov", "email": "mail4score@gmail.com", "date": "2020-10-02T17:59:32Z"}, "committer": {"name": "Kirill Bulatov", "email": "mail4score@gmail.com", "date": "2020-10-02T17:59:32Z"}, "message": "Add a dash test", "tree": {"sha": "a2c6d32194d3a45af3b42ddcd67d4ca071867110", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a2c6d32194d3a45af3b42ddcd67d4ca071867110"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/cae2e859ffbf2b435c8675838e450b66d4c6153e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/cae2e859ffbf2b435c8675838e450b66d4c6153e", "html_url": "https://github.com/rust-lang/rust/commit/cae2e859ffbf2b435c8675838e450b66d4c6153e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/cae2e859ffbf2b435c8675838e450b66d4c6153e/comments", "author": {"login": "SomeoneToIgnore", "id": 2690773, "node_id": "MDQ6VXNlcjI2OTA3NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/2690773?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SomeoneToIgnore", "html_url": "https://github.com/SomeoneToIgnore", "followers_url": "https://api.github.com/users/SomeoneToIgnore/followers", "following_url": "https://api.github.com/users/SomeoneToIgnore/following{/other_user}", "gists_url": "https://api.github.com/users/SomeoneToIgnore/gists{/gist_id}", "starred_url": "https://api.github.com/users/SomeoneToIgnore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SomeoneToIgnore/subscriptions", "organizations_url": "https://api.github.com/users/SomeoneToIgnore/orgs", "repos_url": "https://api.github.com/users/SomeoneToIgnore/repos", "events_url": "https://api.github.com/users/SomeoneToIgnore/events{/privacy}", "received_events_url": "https://api.github.com/users/SomeoneToIgnore/received_events", "type": "User", "site_admin": false}, "committer": {"login": "SomeoneToIgnore", "id": 2690773, "node_id": "MDQ6VXNlcjI2OTA3NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/2690773?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SomeoneToIgnore", "html_url": "https://github.com/SomeoneToIgnore", "followers_url": "https://api.github.com/users/SomeoneToIgnore/followers", "following_url": "https://api.github.com/users/SomeoneToIgnore/following{/other_user}", "gists_url": "https://api.github.com/users/SomeoneToIgnore/gists{/gist_id}", "starred_url": "https://api.github.com/users/SomeoneToIgnore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SomeoneToIgnore/subscriptions", "organizations_url": "https://api.github.com/users/SomeoneToIgnore/orgs", "repos_url": "https://api.github.com/users/SomeoneToIgnore/repos", "events_url": "https://api.github.com/users/SomeoneToIgnore/events{/privacy}", "received_events_url": "https://api.github.com/users/SomeoneToIgnore/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "673e1ddb9ae12c565f966549ba7ea8c306cfba87", "url": "https://api.github.com/repos/rust-lang/rust/commits/673e1ddb9ae12c565f966549ba7ea8c306cfba87", "html_url": "https://github.com/rust-lang/rust/commit/673e1ddb9ae12c565f966549ba7ea8c306cfba87"}], "stats": {"total": 34, "additions": 32, "deletions": 2}, "files": [{"sha": "31560bc097fa8cb064c2697179d6fcf14003f2fc", "filename": "crates/base_db/src/fixture.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/cae2e859ffbf2b435c8675838e450b66d4c6153e/crates%2Fbase_db%2Fsrc%2Ffixture.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cae2e859ffbf2b435c8675838e450b66d4c6153e/crates%2Fbase_db%2Fsrc%2Ffixture.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fbase_db%2Fsrc%2Ffixture.rs?ref=cae2e859ffbf2b435c8675838e450b66d4c6153e", "patch": "@@ -162,11 +162,11 @@ impl ChangeFixture {\n                     meta.env,\n                     Default::default(),\n                 );\n-                let crate_name = CrateName::new(&krate).unwrap();\n+                let crate_name = CrateName::normalize_dashes(&krate);\n                 let prev = crates.insert(crate_name.clone(), crate_id);\n                 assert!(prev.is_none());\n                 for dep in meta.deps {\n-                    let dep = CrateName::new(&dep).unwrap();\n+                    let dep = CrateName::normalize_dashes(&dep);\n                     crate_deps.push((crate_name.clone(), dep))\n                 }\n             } else if meta.path == \"/main.rs\" || meta.path == \"/lib.rs\" {"}, {"sha": "acdb51f2616a716ca4cd5dc38bf5b8e012811d3a", "filename": "crates/ide/src/hover.rs", "status": "modified", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/cae2e859ffbf2b435c8675838e450b66d4c6153e/crates%2Fide%2Fsrc%2Fhover.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cae2e859ffbf2b435c8675838e450b66d4c6153e/crates%2Fide%2Fsrc%2Fhover.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Fhover.rs?ref=cae2e859ffbf2b435c8675838e450b66d4c6153e", "patch": "@@ -3163,4 +3163,34 @@ fn main() { let s<|>t = test().get(); }\n             \"#]],\n         );\n     }\n+\n+    #[test]\n+    fn hover_displays_normalized_crate_names() {\n+        check(\n+            r#\"\n+//- /lib.rs crate:name-with-dashes\n+pub mod wrapper {\n+    pub struct Thing { x: u32 }\n+\n+    impl Thing {\n+        pub fn new() -> Thing { Thing { x: 0 } }\n+    }\n+}\n+\n+//- /main.rs crate:main deps:name-with-dashes\n+fn main() { let foo_test = name_with_dashes::wrapper::Thing::new<|>(); }\n+\"#,\n+            expect![[r#\"\n+            *new*\n+\n+            ```rust\n+            name_with_dashes::wrapper::Thing\n+            ```\n+\n+            ```rust\n+            pub fn new() -> Thing\n+            ```\n+            \"#]],\n+        )\n+    }\n }"}]}