{"sha": "ff081980e7b5005d3e06ea539819ad98656d4a9b", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZmMDgxOTgwZTdiNTAwNWQzZTA2ZWE1Mzk4MTlhZDk4NjU2ZDRhOWI=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-05-17T16:10:28Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-05-17T16:10:28Z"}, "message": "auto merge of #6561 : huonw/rust/rustc-u-int-limit-lint, r=nikomatsakis", "tree": {"sha": "93b22ac43b16ff7d635305f83f1339147cf23e03", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/93b22ac43b16ff7d635305f83f1339147cf23e03"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ff081980e7b5005d3e06ea539819ad98656d4a9b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ff081980e7b5005d3e06ea539819ad98656d4a9b", "html_url": "https://github.com/rust-lang/rust/commit/ff081980e7b5005d3e06ea539819ad98656d4a9b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ff081980e7b5005d3e06ea539819ad98656d4a9b/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "290a2ebab61282d89b211192679e84d22a01fd14", "url": "https://api.github.com/repos/rust-lang/rust/commits/290a2ebab61282d89b211192679e84d22a01fd14", "html_url": "https://github.com/rust-lang/rust/commit/290a2ebab61282d89b211192679e84d22a01fd14"}, {"sha": "aa179cb0f1bfd56da67604b31ce3f72d0baff8b8", "url": "https://api.github.com/repos/rust-lang/rust/commits/aa179cb0f1bfd56da67604b31ce3f72d0baff8b8", "html_url": "https://github.com/rust-lang/rust/commit/aa179cb0f1bfd56da67604b31ce3f72d0baff8b8"}], "stats": {"total": 28, "additions": 25, "deletions": 3}, "files": [{"sha": "591b196bd6fc7ed8b70ab2c17d4b140f5c56926a", "filename": "src/librustc/middle/lint.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/ff081980e7b5005d3e06ea539819ad98656d4a9b/src%2Flibrustc%2Fmiddle%2Flint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff081980e7b5005d3e06ea539819ad98656d4a9b/src%2Flibrustc%2Fmiddle%2Flint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Flint.rs?ref=ff081980e7b5005d3e06ea539819ad98656d4a9b", "patch": "@@ -551,9 +551,11 @@ fn lint_type_limits(cx: @mut Context) -> visit::vt<()> {\n         }\n     }\n \n+    // for int & uint, be conservative with the warnings, so that the\n+    // warnings are consistent between 32- and 64-bit platforms\n     fn int_ty_range(int_ty: ast::int_ty) -> (i64, i64) {\n         match int_ty {\n-            ast::ty_i =>    (int::min_value as i64, int::max_value as i64),\n+            ast::ty_i =>    (i64::min_value,        i64::max_value),\n             ast::ty_char => (u32::min_value as i64, u32::max_value as i64),\n             ast::ty_i8 =>   (i8::min_value  as i64, i8::max_value  as i64),\n             ast::ty_i16 =>  (i16::min_value as i64, i16::max_value as i64),\n@@ -564,7 +566,7 @@ fn lint_type_limits(cx: @mut Context) -> visit::vt<()> {\n \n     fn uint_ty_range(uint_ty: ast::uint_ty) -> (u64, u64) {\n         match uint_ty {\n-            ast::ty_u =>   (uint::min_value as u64, uint::max_value as u64),\n+            ast::ty_u =>   (u64::min_value,         u64::max_value),\n             ast::ty_u8 =>  (u8::min_value   as u64, u8::max_value   as u64),\n             ast::ty_u16 => (u16::min_value  as u64, u16::max_value  as u64),\n             ast::ty_u32 => (u32::min_value  as u64, u32::max_value  as u64),"}, {"sha": "64f78d5ab7b2bddeffd1037c9e242493ead2d208", "filename": "src/libstd/ebml.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ff081980e7b5005d3e06ea539819ad98656d4a9b/src%2Flibstd%2Febml.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff081980e7b5005d3e06ea539819ad98656d4a9b/src%2Flibstd%2Febml.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Febml.rs?ref=ff081980e7b5005d3e06ea539819ad98656d4a9b", "patch": "@@ -779,7 +779,7 @@ pub mod writer {\n     priv impl Encoder {\n         // used internally to emit things like the vector length and so on\n         fn _emit_tagged_uint(&mut self, t: EbmlEncoderTag, v: uint) {\n-            assert!(v <= 0xFFFF_FFFF_u); // FIXME(#6130) assert warns on 32-bit\n+            assert!(v <= 0xFFFF_FFFF_u);\n             self.wr_tagged_u32(t as uint, v as u32);\n         }\n "}, {"sha": "642308c0ca12f32d0a51f836dc0387c59b108de8", "filename": "src/test/run-pass/issue-6130.rs", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/ff081980e7b5005d3e06ea539819ad98656d4a9b/src%2Ftest%2Frun-pass%2Fissue-6130.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff081980e7b5005d3e06ea539819ad98656d4a9b/src%2Ftest%2Frun-pass%2Fissue-6130.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissue-6130.rs?ref=ff081980e7b5005d3e06ea539819ad98656d4a9b", "patch": "@@ -0,0 +1,20 @@\n+// Copyright 2013 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+#[deny(type_limits)];\n+\n+fn main() {\n+    let i: uint = 0;\n+    assert!(i <= 0xFFFF_FFFF_u);\n+\n+    let i: int = 0;\n+    assert!(i >= -0x8000_0000_i);\n+    assert!(i <= 0x7FFF_FFFF_i);\n+}"}]}