{"sha": "ca698a0b8c78e5ba7738fc0f0f6f77718e70a83e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNhNjk4YTBiOGM3OGU1YmE3NzM4ZmMwZjBmNmY3NzcxOGU3MGE4M2U=", "commit": {"author": {"name": "Kirill Bulatov", "email": "mail4score@gmail.com", "date": "2020-09-11T11:16:15Z"}, "committer": {"name": "Kirill Bulatov", "email": "mail4score@gmail.com", "date": "2020-09-11T11:16:15Z"}, "message": "Adjust the test comment", "tree": {"sha": "b49f81d0026ac7f09bec6ddbab5ebae225c5690c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b49f81d0026ac7f09bec6ddbab5ebae225c5690c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ca698a0b8c78e5ba7738fc0f0f6f77718e70a83e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ca698a0b8c78e5ba7738fc0f0f6f77718e70a83e", "html_url": "https://github.com/rust-lang/rust/commit/ca698a0b8c78e5ba7738fc0f0f6f77718e70a83e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ca698a0b8c78e5ba7738fc0f0f6f77718e70a83e/comments", "author": {"login": "SomeoneToIgnore", "id": 2690773, "node_id": "MDQ6VXNlcjI2OTA3NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/2690773?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SomeoneToIgnore", "html_url": "https://github.com/SomeoneToIgnore", "followers_url": "https://api.github.com/users/SomeoneToIgnore/followers", "following_url": "https://api.github.com/users/SomeoneToIgnore/following{/other_user}", "gists_url": "https://api.github.com/users/SomeoneToIgnore/gists{/gist_id}", "starred_url": "https://api.github.com/users/SomeoneToIgnore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SomeoneToIgnore/subscriptions", "organizations_url": "https://api.github.com/users/SomeoneToIgnore/orgs", "repos_url": "https://api.github.com/users/SomeoneToIgnore/repos", "events_url": "https://api.github.com/users/SomeoneToIgnore/events{/privacy}", "received_events_url": "https://api.github.com/users/SomeoneToIgnore/received_events", "type": "User", "site_admin": false}, "committer": {"login": "SomeoneToIgnore", "id": 2690773, "node_id": "MDQ6VXNlcjI2OTA3NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/2690773?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SomeoneToIgnore", "html_url": "https://github.com/SomeoneToIgnore", "followers_url": "https://api.github.com/users/SomeoneToIgnore/followers", "following_url": "https://api.github.com/users/SomeoneToIgnore/following{/other_user}", "gists_url": "https://api.github.com/users/SomeoneToIgnore/gists{/gist_id}", "starred_url": "https://api.github.com/users/SomeoneToIgnore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SomeoneToIgnore/subscriptions", "organizations_url": "https://api.github.com/users/SomeoneToIgnore/orgs", "repos_url": "https://api.github.com/users/SomeoneToIgnore/repos", "events_url": "https://api.github.com/users/SomeoneToIgnore/events{/privacy}", "received_events_url": "https://api.github.com/users/SomeoneToIgnore/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "492e3c40f666f53d9e6b8329cadc57ff36e38ba9", "url": "https://api.github.com/repos/rust-lang/rust/commits/492e3c40f666f53d9e6b8329cadc57ff36e38ba9", "html_url": "https://github.com/rust-lang/rust/commit/492e3c40f666f53d9e6b8329cadc57ff36e38ba9"}], "stats": {"total": 25, "additions": 16, "deletions": 9}, "files": [{"sha": "3cfc2e13140ae26bc3be9201133d74a6f03fb742", "filename": "crates/ide/src/completion/complete_mod.rs", "status": "modified", "additions": 16, "deletions": 9, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/ca698a0b8c78e5ba7738fc0f0f6f77718e70a83e/crates%2Fide%2Fsrc%2Fcompletion%2Fcomplete_mod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ca698a0b8c78e5ba7738fc0f0f6f77718e70a83e/crates%2Fide%2Fsrc%2Fcompletion%2Fcomplete_mod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Fcompletion%2Fcomplete_mod.rs?ref=ca698a0b8c78e5ba7738fc0f0f6f77718e70a83e", "patch": "@@ -277,18 +277,25 @@ mod tests {\n         );\n     }\n \n-    // FIXME binart modules are not picked up in tests\n+    // FIXME binary modules are not supported in tests properly\n+    // Binary modules are a bit special, they allow importing the modules from `/src/bin`\n+    // and that's why are good to test two things:\n+    // * no cycles are allowed in mod declarations\n+    // * no modules from the parent directory are proposed\n+    // Unfortunately, binary modules support is in cargo not rustc,\n+    // hence the test does not work now\n+    //\n     // #[test]\n     // fn regular_bin_module_completion() {\n     //     check(\n     //         r#\"\n-    //         //- /src/main.rs\n+    //         //- /src/bin.rs\n     //         fn main() {}\n-    //         //- /src/main/foo.rs\n+    //         //- /src/bin/foo.rs\n     //         mod <|>\n-    //         //- /src/main/bar.rs\n+    //         //- /src/bin/bar.rs\n     //         fn bar() {}\n-    //         //- /src/main/bar/bar_ignored.rs\n+    //         //- /src/bin/bar/bar_ignored.rs\n     //         fn bar_ignored() {}\n     //     \"#,\n     //         expect![[r#\"\n@@ -301,14 +308,14 @@ mod tests {\n     fn already_declared_bin_module_completion_omitted() {\n         check(\n             r#\"\n-            //- /src/main.rs\n+            //- /src/bin.rs\n             fn main() {}\n-            //- /src/main/foo.rs\n+            //- /src/bin/foo.rs\n             mod <|>\n-            //- /src/main/bar.rs\n+            //- /src/bin/bar.rs\n             mod foo;\n             fn bar() {}\n-            //- /src/main/bar/bar_ignored.rs\n+            //- /src/bin/bar/bar_ignored.rs\n             fn bar_ignored() {}\n         \"#,\n             expect![[r#\"\"#]],"}]}