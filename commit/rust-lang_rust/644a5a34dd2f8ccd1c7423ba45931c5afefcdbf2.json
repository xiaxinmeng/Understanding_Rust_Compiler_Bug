{"sha": "644a5a34dd2f8ccd1c7423ba45931c5afefcdbf2", "node_id": "C_kwDOAAsO6NoAKDY0NGE1YTM0ZGQyZjhjY2QxYzc0MjNiYTQ1OTMxYzVhZmVmY2RiZjI", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2022-11-20T18:07:50Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2022-11-20T18:12:18Z"}, "message": "enable fuzzy_provenance_casts lint in liballoc", "tree": {"sha": "f89dab7765eb3b0d305a3e42ec010e37eb9f1720", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f89dab7765eb3b0d305a3e42ec010e37eb9f1720"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/644a5a34dd2f8ccd1c7423ba45931c5afefcdbf2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/644a5a34dd2f8ccd1c7423ba45931c5afefcdbf2", "html_url": "https://github.com/rust-lang/rust/commit/644a5a34dd2f8ccd1c7423ba45931c5afefcdbf2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/644a5a34dd2f8ccd1c7423ba45931c5afefcdbf2/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7477c1f4f7d6bef037d523099b240d22aa1b63a0", "url": "https://api.github.com/repos/rust-lang/rust/commits/7477c1f4f7d6bef037d523099b240d22aa1b63a0", "html_url": "https://github.com/rust-lang/rust/commit/7477c1f4f7d6bef037d523099b240d22aa1b63a0"}], "stats": {"total": 17, "additions": 11, "deletions": 6}, "files": [{"sha": "b25d63d835b54c762c5a7c7d160d583d7bf14e70", "filename": "library/alloc/benches/lib.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/644a5a34dd2f8ccd1c7423ba45931c5afefcdbf2/library%2Falloc%2Fbenches%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/644a5a34dd2f8ccd1c7423ba45931c5afefcdbf2/library%2Falloc%2Fbenches%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Falloc%2Fbenches%2Flib.rs?ref=644a5a34dd2f8ccd1c7423ba45931c5afefcdbf2", "patch": "@@ -5,7 +5,9 @@\n #![feature(iter_next_chunk)]\n #![feature(repr_simd)]\n #![feature(slice_partition_dedup)]\n+#![feature(strict_provenance)]\n #![feature(test)]\n+#![deny(fuzzy_provenance_casts)]\n \n extern crate test;\n "}, {"sha": "a9f2873faf97e6970511718809d8127d3e8ab070", "filename": "library/alloc/src/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/644a5a34dd2f8ccd1c7423ba45931c5afefcdbf2/library%2Falloc%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/644a5a34dd2f8ccd1c7423ba45931c5afefcdbf2/library%2Falloc%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Falloc%2Fsrc%2Flib.rs?ref=644a5a34dd2f8ccd1c7423ba45931c5afefcdbf2", "patch": "@@ -82,6 +82,7 @@\n //\n // Lints:\n #![deny(unsafe_op_in_unsafe_fn)]\n+#![deny(fuzzy_provenance_casts)]\n #![warn(deprecated_in_future)]\n #![warn(missing_debug_implementations)]\n #![warn(missing_docs)]"}, {"sha": "04da95bbb83eda668ad94d2d5b24f577ab5cda17", "filename": "library/alloc/tests/fmt.rs", "status": "modified", "additions": 7, "deletions": 6, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/644a5a34dd2f8ccd1c7423ba45931c5afefcdbf2/library%2Falloc%2Ftests%2Ffmt.rs", "raw_url": "https://github.com/rust-lang/rust/raw/644a5a34dd2f8ccd1c7423ba45931c5afefcdbf2/library%2Falloc%2Ftests%2Ffmt.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Falloc%2Ftests%2Ffmt.rs?ref=644a5a34dd2f8ccd1c7423ba45931c5afefcdbf2", "patch": "@@ -2,6 +2,7 @@\n \n use std::cell::RefCell;\n use std::fmt::{self, Write};\n+use std::ptr;\n \n #[test]\n fn test_format() {\n@@ -76,14 +77,14 @@ fn test_format_macro_interface() {\n     t!(format!(\"{}\", \"foo\"), \"foo\");\n     t!(format!(\"{}\", \"foo\".to_string()), \"foo\");\n     if cfg!(target_pointer_width = \"32\") {\n-        t!(format!(\"{:#p}\", 0x1234 as *const isize), \"0x00001234\");\n-        t!(format!(\"{:#p}\", 0x1234 as *mut isize), \"0x00001234\");\n+        t!(format!(\"{:#p}\", ptr::invalid::<isize>(0x1234)), \"0x00001234\");\n+        t!(format!(\"{:#p}\", ptr::invalid_mut::<isize>(0x1234)), \"0x00001234\");\n     } else {\n-        t!(format!(\"{:#p}\", 0x1234 as *const isize), \"0x0000000000001234\");\n-        t!(format!(\"{:#p}\", 0x1234 as *mut isize), \"0x0000000000001234\");\n+        t!(format!(\"{:#p}\", ptr::invalid::<isize>(0x1234)), \"0x0000000000001234\");\n+        t!(format!(\"{:#p}\", ptr::invalid_mut::<isize>(0x1234)), \"0x0000000000001234\");\n     }\n-    t!(format!(\"{:p}\", 0x1234 as *const isize), \"0x1234\");\n-    t!(format!(\"{:p}\", 0x1234 as *mut isize), \"0x1234\");\n+    t!(format!(\"{:p}\", ptr::invalid::<isize>(0x1234)), \"0x1234\");\n+    t!(format!(\"{:p}\", ptr::invalid_mut::<isize>(0x1234)), \"0x1234\");\n     t!(format!(\"{A:x}\"), \"aloha\");\n     t!(format!(\"{B:X}\"), \"adios\");\n     t!(format!(\"foo {} \u2603\u2603\u2603\u2603\u2603\u2603\", \"bar\"), \"foo bar \u2603\u2603\u2603\u2603\u2603\u2603\");"}, {"sha": "d066ec03ee57e861b17b640d4afb33ac1929f713", "filename": "library/alloc/tests/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/644a5a34dd2f8ccd1c7423ba45931c5afefcdbf2/library%2Falloc%2Ftests%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/644a5a34dd2f8ccd1c7423ba45931c5afefcdbf2/library%2Falloc%2Ftests%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Falloc%2Ftests%2Flib.rs?ref=644a5a34dd2f8ccd1c7423ba45931c5afefcdbf2", "patch": "@@ -47,6 +47,7 @@\n #![feature(strict_provenance)]\n #![feature(once_cell)]\n #![feature(drain_keep_rest)]\n+#![deny(fuzzy_provenance_casts)]\n \n use std::collections::hash_map::DefaultHasher;\n use std::hash::{Hash, Hasher};"}]}