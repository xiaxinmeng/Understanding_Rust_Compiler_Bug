{"sha": "6450101b6947d0ff891475dad8668b2f1224212b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY0NTAxMDFiNjk0N2QwZmY4OTE0NzVkYWQ4NjY4YjJmMTIyNDIxMmI=", "commit": {"author": {"name": "Jonas Schievink", "email": "jonasschievink@gmail.com", "date": "2020-02-11T11:03:52Z"}, "committer": {"name": "Jonas Schievink", "email": "jonasschievink@gmail.com", "date": "2020-03-17T21:17:31Z"}, "message": "Split up large `FnDecl` expression", "tree": {"sha": "81ce5f117f161f1db5bac6ae62b65b31307f8a7d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/81ce5f117f161f1db5bac6ae62b65b31307f8a7d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6450101b6947d0ff891475dad8668b2f1224212b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6450101b6947d0ff891475dad8668b2f1224212b", "html_url": "https://github.com/rust-lang/rust/commit/6450101b6947d0ff891475dad8668b2f1224212b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6450101b6947d0ff891475dad8668b2f1224212b/comments", "author": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "be62aed2025a19aadadbfa09633ef5d20dbfb668", "url": "https://api.github.com/repos/rust-lang/rust/commits/be62aed2025a19aadadbfa09633ef5d20dbfb668", "html_url": "https://github.com/rust-lang/rust/commit/be62aed2025a19aadadbfa09633ef5d20dbfb668"}], "stats": {"total": 27, "additions": 13, "deletions": 14}, "files": [{"sha": "f84efe2ba76f5e7ba05457cd28dfc3eccd316d85", "filename": "src/librustc_ast_lowering/expr.rs", "status": "modified", "additions": 13, "deletions": 14, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/6450101b6947d0ff891475dad8668b2f1224212b/src%2Flibrustc_ast_lowering%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6450101b6947d0ff891475dad8668b2f1224212b/src%2Flibrustc_ast_lowering%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_ast_lowering%2Fexpr.rs?ref=6450101b6947d0ff891475dad8668b2f1224212b", "patch": "@@ -487,23 +487,22 @@ impl<'hir> LoweringContext<'_, 'hir> {\n \n         let task_context_id = self.resolver.next_node_id();\n         let task_context_hid = self.lower_node_id(task_context_id);\n+\n+        let arg_ty = Ty { id: self.resolver.next_node_id(), kind: TyKind::Infer, span: DUMMY_SP };\n+        let arg_pat = Pat {\n+            id: task_context_id,\n+            kind: PatKind::Ident(\n+                BindingMode::ByValue(Mutability::Mut),\n+                Ident::with_dummy_span(sym::_task_context),\n+                None,\n+            ),\n+            span: DUMMY_SP,\n+        };\n         let ast_decl = FnDecl {\n             inputs: vec![Param {\n                 attrs: AttrVec::new(),\n-                ty: AstP(Ty {\n-                    id: self.resolver.next_node_id(),\n-                    kind: TyKind::Infer,\n-                    span: DUMMY_SP,\n-                }),\n-                pat: AstP(Pat {\n-                    id: task_context_id,\n-                    kind: PatKind::Ident(\n-                        BindingMode::ByValue(Mutability::Mut),\n-                        Ident::with_dummy_span(sym::_task_context),\n-                        None,\n-                    ),\n-                    span: DUMMY_SP,\n-                }),\n+                ty: AstP(arg_ty),\n+                pat: AstP(arg_pat),\n                 id: self.resolver.next_node_id(),\n                 span: DUMMY_SP,\n                 is_placeholder: false,"}]}