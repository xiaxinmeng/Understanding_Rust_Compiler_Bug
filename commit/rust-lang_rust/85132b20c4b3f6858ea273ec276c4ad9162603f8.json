{"sha": "85132b20c4b3f6858ea273ec276c4ad9162603f8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg1MTMyYjIwYzRiM2Y2ODU4ZWEyNzNlYzI3NmM0YWQ5MTYyNjAzZjg=", "commit": {"author": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2019-11-06T17:58:57Z"}, "committer": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2019-11-12T10:06:11Z"}, "message": "ci: download curl and openssl from s3 for dist-x86_64-linux\n\nCentOS 5 only supports SSLv3 without SNI, and to get newer protocols\nworking we need to download and compile OpenSSL and cURL from our\nmirror. Because of that, we can't use the CDN, as CloudFront requires\nTLSv1 with SNI.\n\nThis commit changes the dist-x86_64-linux image to bypass the CDN for\nOpenSSL and cURL.", "tree": {"sha": "b95fc3ae2952ef447296441d2dedd9545a14814b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b95fc3ae2952ef447296441d2dedd9545a14814b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/85132b20c4b3f6858ea273ec276c4ad9162603f8", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE1JbYPtLJAsc22U9xPgar6Auq8ZwFAl3KhCIACgkQPgar6Auq\n8Zy6dA/8Cxc5Ziukz5/RUHZH8LVHbQ/C8kbD6ec584Q0bo7QOkQPSM44JM9N9UjH\n5KVKXbqastQsY24tAD33lvIRnkW+5KclpHd+NUfl1nOAfF4Nhdknua+rf5Y9AMAJ\nebGhsKeWb53e+5Dml8qcwy6SqlTBOwnDXfkz+6xRXZ0Mv7DWMJPHfDPNfwtwGI14\n+J/ioB41VcjflukmoInNaiOCW7qBfSkuhtPiGO4nDZWRHj/qz/oRbKthYqK3HB+f\nbbyAlOEiw1cWMaFoKj8rRQ+HHhWKp/foI5X8Suk8eU9gsAv0C84Btynjs4pDcimy\n40zZURxKJ5YwXbMsdXXYCf7nvOjO9Pk0ddqE5angUD/cGPM9xu/GW7jqMNrQDo8C\n71pRYtUuxbmFPb3Ha6gds/phgzWJQuAgO0B/tAddo52JIn/BpN7DUTPpVxwOQxex\ne8gxSbX92V1gOXrOApfCcQzDy+Ndg0TD7uUOwSK6BkiahtTqpUqiOZspOYiEUrVN\nCQomliruCAaOv6WZES4e9f4nJ2/aB6dOfDMbIGk/EU78HSXOdxSlJOUrjLCtNbGV\nNP6FhL0R9yAAU/9jnx1UGYnushvZLd6/qAd2Az2lPxXruo1dCsk0yszlVZ54W/PK\nB3VzlTsQAy1rY0dHzIpqrZE8YaSzVdQ5gvZRRX9MnPwH+S/BdfM=\n=yvvs\n-----END PGP SIGNATURE-----", "payload": "tree b95fc3ae2952ef447296441d2dedd9545a14814b\nparent 14da85c68e6b5cd8a64a1f2f5ba5cd50c725e38b\nauthor Pietro Albini <pietro@pietroalbini.org> 1573063137 +0100\ncommitter Pietro Albini <pietro@pietroalbini.org> 1573553171 +0100\n\nci: download curl and openssl from s3 for dist-x86_64-linux\n\nCentOS 5 only supports SSLv3 without SNI, and to get newer protocols\nworking we need to download and compile OpenSSL and cURL from our\nmirror. Because of that, we can't use the CDN, as CloudFront requires\nTLSv1 with SNI.\n\nThis commit changes the dist-x86_64-linux image to bypass the CDN for\nOpenSSL and cURL.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/85132b20c4b3f6858ea273ec276c4ad9162603f8", "html_url": "https://github.com/rust-lang/rust/commit/85132b20c4b3f6858ea273ec276c4ad9162603f8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/85132b20c4b3f6858ea273ec276c4ad9162603f8/comments", "author": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "14da85c68e6b5cd8a64a1f2f5ba5cd50c725e38b", "url": "https://api.github.com/repos/rust-lang/rust/commits/14da85c68e6b5cd8a64a1f2f5ba5cd50c725e38b", "html_url": "https://github.com/rust-lang/rust/commit/14da85c68e6b5cd8a64a1f2f5ba5cd50c725e38b"}], "stats": {"total": 11, "additions": 9, "deletions": 2}, "files": [{"sha": "0c7eb5fdac9bea0425b92a8c4a8f31375546b3eb", "filename": "src/ci/docker/dist-x86_64-linux/build-curl.sh", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/85132b20c4b3f6858ea273ec276c4ad9162603f8/src%2Fci%2Fdocker%2Fdist-x86_64-linux%2Fbuild-curl.sh", "raw_url": "https://github.com/rust-lang/rust/raw/85132b20c4b3f6858ea273ec276c4ad9162603f8/src%2Fci%2Fdocker%2Fdist-x86_64-linux%2Fbuild-curl.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-x86_64-linux%2Fbuild-curl.sh?ref=85132b20c4b3f6858ea273ec276c4ad9162603f8", "patch": "@@ -5,7 +5,10 @@ source shared.sh\n \n VERSION=7.66.0\n \n-curl https://ci-mirrors.rust-lang.org/rustc/curl-$VERSION.tar.xz \\\n+# This needs to be downloaded directly from S3, it can't go through the CDN.\n+# That's because the CDN is backed by CloudFront, which requires SNI and TLSv1\n+# (without paying an absurd amount of money).\n+curl https://rust-lang-ci-mirrors.s3-us-west-1.amazonaws.com/rustc/curl-$VERSION.tar.xz \\\n   | xz --decompress \\\n   | tar xf -\n "}, {"sha": "d8f6bdb51b8d5bad24e0995de30e5babde6d0fa9", "filename": "src/ci/docker/dist-x86_64-linux/build-openssl.sh", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/85132b20c4b3f6858ea273ec276c4ad9162603f8/src%2Fci%2Fdocker%2Fdist-x86_64-linux%2Fbuild-openssl.sh", "raw_url": "https://github.com/rust-lang/rust/raw/85132b20c4b3f6858ea273ec276c4ad9162603f8/src%2Fci%2Fdocker%2Fdist-x86_64-linux%2Fbuild-openssl.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-x86_64-linux%2Fbuild-openssl.sh?ref=85132b20c4b3f6858ea273ec276c4ad9162603f8", "patch": "@@ -4,7 +4,11 @@ set -ex\n source shared.sh\n \n VERSION=1.0.2k\n-URL=https://ci-mirrors.rust-lang.org/rustc/openssl-$VERSION.tar.gz\n+\n+# This needs to be downloaded directly from S3, it can't go through the CDN.\n+# That's because the CDN is backed by CloudFront, which requires SNI and TLSv1\n+# (without paying an absurd amount of money).\n+URL=https://rust-lang-ci-mirrors.s3-us-west-1.amazonaws.com/rustc/openssl-$VERSION.tar.gz\n \n curl $URL | tar xzf -\n "}]}