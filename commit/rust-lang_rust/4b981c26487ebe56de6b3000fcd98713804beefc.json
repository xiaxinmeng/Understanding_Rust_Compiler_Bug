{"sha": "4b981c26487ebe56de6b3000fcd98713804beefc", "node_id": "C_kwDOAAsO6NoAKDRiOTgxYzI2NDg3ZWJlNTZkZTZiMzAwMGZjZDk4NzEzODA0YmVlZmM", "commit": {"author": {"name": "Amanieu d'Antras", "email": "amanieu@gmail.com", "date": "2023-03-23T23:39:41Z"}, "committer": {"name": "Amanieu d'Antras", "email": "amanieu@gmail.com", "date": "2023-04-16T18:50:32Z"}, "message": "Rename -Zoom=panic to -Zoom=unwind", "tree": {"sha": "d50840628110d5d096f4dfca8fc8636f8adddae9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d50840628110d5d096f4dfca8fc8636f8adddae9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4b981c26487ebe56de6b3000fcd98713804beefc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4b981c26487ebe56de6b3000fcd98713804beefc", "html_url": "https://github.com/rust-lang/rust/commit/4b981c26487ebe56de6b3000fcd98713804beefc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4b981c26487ebe56de6b3000fcd98713804beefc/comments", "author": {"login": "Amanieu", "id": 278509, "node_id": "MDQ6VXNlcjI3ODUwOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/278509?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Amanieu", "html_url": "https://github.com/Amanieu", "followers_url": "https://api.github.com/users/Amanieu/followers", "following_url": "https://api.github.com/users/Amanieu/following{/other_user}", "gists_url": "https://api.github.com/users/Amanieu/gists{/gist_id}", "starred_url": "https://api.github.com/users/Amanieu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Amanieu/subscriptions", "organizations_url": "https://api.github.com/users/Amanieu/orgs", "repos_url": "https://api.github.com/users/Amanieu/repos", "events_url": "https://api.github.com/users/Amanieu/events{/privacy}", "received_events_url": "https://api.github.com/users/Amanieu/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Amanieu", "id": 278509, "node_id": "MDQ6VXNlcjI3ODUwOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/278509?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Amanieu", "html_url": "https://github.com/Amanieu", "followers_url": "https://api.github.com/users/Amanieu/followers", "following_url": "https://api.github.com/users/Amanieu/following{/other_user}", "gists_url": "https://api.github.com/users/Amanieu/gists{/gist_id}", "starred_url": "https://api.github.com/users/Amanieu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Amanieu/subscriptions", "organizations_url": "https://api.github.com/users/Amanieu/orgs", "repos_url": "https://api.github.com/users/Amanieu/repos", "events_url": "https://api.github.com/users/Amanieu/events{/privacy}", "received_events_url": "https://api.github.com/users/Amanieu/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "abc0660118cc95f47445fd33502a11dd448f5968", "url": "https://api.github.com/repos/rust-lang/rust/commits/abc0660118cc95f47445fd33502a11dd448f5968", "html_url": "https://github.com/rust-lang/rust/commit/abc0660118cc95f47445fd33502a11dd448f5968"}], "stats": {"total": 16, "additions": 8, "deletions": 8}, "files": [{"sha": "101967503c1e2f32b833fe1b3b97bc7cdbe34ca3", "filename": "compiler/rustc_interface/src/tests.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4b981c26487ebe56de6b3000fcd98713804beefc/compiler%2Frustc_interface%2Fsrc%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4b981c26487ebe56de6b3000fcd98713804beefc/compiler%2Frustc_interface%2Fsrc%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_interface%2Fsrc%2Ftests.rs?ref=4b981c26487ebe56de6b3000fcd98713804beefc", "patch": "@@ -776,7 +776,7 @@ fn test_unstable_options_tracking_hash() {\n     tracked!(no_link, true);\n     tracked!(no_profiler_runtime, true);\n     tracked!(no_unique_section_names, true);\n-    tracked!(oom, OomStrategy::Panic);\n+    tracked!(oom, OomStrategy::Unwind);\n     tracked!(osx_rpath_install_name, true);\n     tracked!(packed_bundled_libs, true);\n     tracked!(panic_abort_tests, true);"}, {"sha": "419b6afe7c68ad9e31ad44b00d7190e2648e5032", "filename": "compiler/rustc_session/src/config.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4b981c26487ebe56de6b3000fcd98713804beefc/compiler%2Frustc_session%2Fsrc%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4b981c26487ebe56de6b3000fcd98713804beefc/compiler%2Frustc_session%2Fsrc%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_session%2Fsrc%2Fconfig.rs?ref=4b981c26487ebe56de6b3000fcd98713804beefc", "patch": "@@ -3048,9 +3048,9 @@ pub(crate) mod dep_tracking {\n #[derive(Clone, Copy, PartialEq, Hash, Debug, Encodable, Decodable, HashStable_Generic)]\n pub enum OomStrategy {\n     /// Generate a panic that can be caught by `catch_unwind`.\n-    Panic,\n+    Unwind,\n \n-    /// Abort the process immediately.\n+    /// Calls the panic hook as normal but aborts instead of unwinding.\n     Abort,\n }\n \n@@ -3059,7 +3059,7 @@ impl OomStrategy {\n \n     pub fn should_panic(self) -> u8 {\n         match self {\n-            OomStrategy::Panic => 1,\n+            OomStrategy::Unwind => 1,\n             OomStrategy::Abort => 0,\n         }\n     }"}, {"sha": "46c992dfefd5f8ededf4d453fc3e273d8717c352", "filename": "compiler/rustc_session/src/options.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4b981c26487ebe56de6b3000fcd98713804beefc/compiler%2Frustc_session%2Fsrc%2Foptions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4b981c26487ebe56de6b3000fcd98713804beefc/compiler%2Frustc_session%2Fsrc%2Foptions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_session%2Fsrc%2Foptions.rs?ref=4b981c26487ebe56de6b3000fcd98713804beefc", "patch": "@@ -662,7 +662,7 @@ mod parse {\n \n     pub(crate) fn parse_oom_strategy(slot: &mut OomStrategy, v: Option<&str>) -> bool {\n         match v {\n-            Some(\"panic\") => *slot = OomStrategy::Panic,\n+            Some(\"unwind\") => *slot = OomStrategy::Unwind,\n             Some(\"abort\") => *slot = OomStrategy::Abort,\n             _ => return false,\n         }"}, {"sha": "0db23e55a8653df2e747744cba69b1ef47d3bbaa", "filename": "library/alloc/src/alloc.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/4b981c26487ebe56de6b3000fcd98713804beefc/library%2Falloc%2Fsrc%2Falloc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4b981c26487ebe56de6b3000fcd98713804beefc/library%2Falloc%2Fsrc%2Falloc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Falloc%2Fsrc%2Falloc.rs?ref=4b981c26487ebe56de6b3000fcd98713804beefc", "patch": "@@ -398,7 +398,7 @@ fn rust_oom(layout: Layout) -> ! {\n         fn panic_impl(pi: &core::panic::PanicInfo<'_>) -> !;\n \n         // This symbol is emitted by rustc .\n-        // Its value depends on the -Zoom={panic,abort} compiler option.\n+        // Its value depends on the -Zoom={unwind,abort} compiler option.\n         static __rust_alloc_error_handler_should_panic: u8;\n     }\n \n@@ -458,7 +458,7 @@ pub mod __alloc_error_handler {\n     pub unsafe fn __rdl_oom(size: usize, _align: usize) -> ! {\n         extern \"Rust\" {\n             // This symbol is emitted by rustc next to __rust_alloc_error_handler.\n-            // Its value depends on the -Zoom={panic,abort} compiler option.\n+            // Its value depends on the -Zoom={unwind,abort} compiler option.\n             static __rust_alloc_error_handler_should_panic: u8;\n         }\n "}, {"sha": "704d6f8b810a90366a1043f9d34af478928fc448", "filename": "tests/ui/oom_unwind.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4b981c26487ebe56de6b3000fcd98713804beefc/tests%2Fui%2Foom_unwind.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4b981c26487ebe56de6b3000fcd98713804beefc/tests%2Fui%2Foom_unwind.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Foom_unwind.rs?ref=4b981c26487ebe56de6b3000fcd98713804beefc", "patch": "@@ -1,4 +1,4 @@\n-// compile-flags: -Z oom=panic\n+// compile-flags: -Z oom=unwind\n // run-pass\n // no-prefer-dynamic\n // needs-unwind"}]}