{"sha": "bc63d5a26a65752fb105957d3235cc9c8cb0767f", "node_id": "C_kwDOAAsO6NoAKGJjNjNkNWEyNmE2NTc1MmZiMTA1OTU3ZDMyMzVjYzljOGNiMDc2N2Y", "commit": {"author": {"name": "Ian Chamberlain", "email": "ian.h.chamberlain@gmail.com", "date": "2022-03-24T01:00:38Z"}, "committer": {"name": "Mark Drobnak", "email": "mark.drobnak@gmail.com", "date": "2022-06-14T03:45:24Z"}, "message": "Enable thread_local_dtor on horizon OS\n\nAlways use fallback thread_local destructor, since __cxa_thread_atexit_impl\nis never defined on the target.\n\nSee https://github.com/AzureMarker/rust-horizon/pull/2", "tree": {"sha": "c50d5b1f289f3af0fc33dd95ad1042ba9a555143", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c50d5b1f289f3af0fc33dd95ad1042ba9a555143"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bc63d5a26a65752fb105957d3235cc9c8cb0767f", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQEzBAABCAAdFiEEJn5ZTY8tfNoIJXFiR6Ez87+dA9MFAmKoBFQACgkQR6Ez87+d\nA9NAKgf/ZysCVwjyTOqqqtrCIVe2YwqQEzNUY8UGXTB6H4HfWFNgkO/msscgw784\nJfMxbvof4XvKt3eXYlTZ8u+Q8plvM/XCdj5q6iKOqe7EmTqCtwzw/2mTPMz9GURG\nyTp9OeIQ7F23fqTvbjU5LKMjZJfAuokmQh1pMnPTqRvkVXgCEZsy/rDyFoDfMB2s\n5CKgzhpIIo9wRvgeQT1/99FHUabg/HdcKpTsEAYej7BHEbDgkzU7RK17oTUY8Gs+\nQ7RNzmgwmmk9wwyRAUUqrKgiFnk3q5sLwW714ReDDEt5I9RswF5lFG3c2XsXrdKp\nfyz5rIwRiGfbtdSQBaSI45fcfTJO7Q==\n=Pf1N\n-----END PGP SIGNATURE-----", "payload": "tree c50d5b1f289f3af0fc33dd95ad1042ba9a555143\nparent 82e8cd4834fa5d5b9ca7de216d07d89f9c7addc2\nauthor Ian Chamberlain <ian.h.chamberlain@gmail.com> 1648083638 -0400\ncommitter Mark Drobnak <mark.drobnak@gmail.com> 1655178324 -0700\n\nEnable thread_local_dtor on horizon OS\n\nAlways use fallback thread_local destructor, since __cxa_thread_atexit_impl\nis never defined on the target.\n\nSee https://github.com/AzureMarker/rust-horizon/pull/2\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bc63d5a26a65752fb105957d3235cc9c8cb0767f", "html_url": "https://github.com/rust-lang/rust/commit/bc63d5a26a65752fb105957d3235cc9c8cb0767f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bc63d5a26a65752fb105957d3235cc9c8cb0767f/comments", "author": {"login": "ian-h-chamberlain", "id": 11131775, "node_id": "MDQ6VXNlcjExMTMxNzc1", "avatar_url": "https://avatars.githubusercontent.com/u/11131775?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ian-h-chamberlain", "html_url": "https://github.com/ian-h-chamberlain", "followers_url": "https://api.github.com/users/ian-h-chamberlain/followers", "following_url": "https://api.github.com/users/ian-h-chamberlain/following{/other_user}", "gists_url": "https://api.github.com/users/ian-h-chamberlain/gists{/gist_id}", "starred_url": "https://api.github.com/users/ian-h-chamberlain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ian-h-chamberlain/subscriptions", "organizations_url": "https://api.github.com/users/ian-h-chamberlain/orgs", "repos_url": "https://api.github.com/users/ian-h-chamberlain/repos", "events_url": "https://api.github.com/users/ian-h-chamberlain/events{/privacy}", "received_events_url": "https://api.github.com/users/ian-h-chamberlain/received_events", "type": "User", "site_admin": false}, "committer": {"login": "AzureMarker", "id": 4417660, "node_id": "MDQ6VXNlcjQ0MTc2NjA=", "avatar_url": "https://avatars.githubusercontent.com/u/4417660?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AzureMarker", "html_url": "https://github.com/AzureMarker", "followers_url": "https://api.github.com/users/AzureMarker/followers", "following_url": "https://api.github.com/users/AzureMarker/following{/other_user}", "gists_url": "https://api.github.com/users/AzureMarker/gists{/gist_id}", "starred_url": "https://api.github.com/users/AzureMarker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AzureMarker/subscriptions", "organizations_url": "https://api.github.com/users/AzureMarker/orgs", "repos_url": "https://api.github.com/users/AzureMarker/repos", "events_url": "https://api.github.com/users/AzureMarker/events{/privacy}", "received_events_url": "https://api.github.com/users/AzureMarker/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "82e8cd4834fa5d5b9ca7de216d07d89f9c7addc2", "url": "https://api.github.com/repos/rust-lang/rust/commits/82e8cd4834fa5d5b9ca7de216d07d89f9c7addc2", "html_url": "https://github.com/rust-lang/rust/commit/82e8cd4834fa5d5b9ca7de216d07d89f9c7addc2"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "6e8be2a91de003a5f165ebfd7fda18a49a9c2f28", "filename": "library/std/src/sys/unix/thread_local_dtor.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bc63d5a26a65752fb105957d3235cc9c8cb0767f/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fthread_local_dtor.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bc63d5a26a65752fb105957d3235cc9c8cb0767f/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fthread_local_dtor.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fthread_local_dtor.rs?ref=bc63d5a26a65752fb105957d3235cc9c8cb0767f", "patch": "@@ -93,7 +93,7 @@ pub unsafe fn register_dtor(t: *mut u8, dtor: unsafe extern \"C\" fn(*mut u8)) {\n     }\n }\n \n-#[cfg(target_os = \"vxworks\")]\n+#[cfg(any(target_os = \"vxworks\", target_os = \"horizon\"))]\n pub unsafe fn register_dtor(t: *mut u8, dtor: unsafe extern \"C\" fn(*mut u8)) {\n     use crate::sys_common::thread_local_dtor::register_dtor_fallback;\n     register_dtor_fallback(t, dtor);"}]}