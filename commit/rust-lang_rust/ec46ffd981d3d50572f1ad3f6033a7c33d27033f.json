{"sha": "ec46ffd981d3d50572f1ad3f6033a7c33d27033f", "node_id": "C_kwDOAAsO6NoAKGVjNDZmZmQ5ODFkM2Q1MDU3MmYxYWQzZjYwMzNhN2MzM2QyNzAzM2Y", "commit": {"author": {"name": "Yacin Tmimi", "email": "yacintmimi@gmail.com", "date": "2021-11-19T23:52:52Z"}, "committer": {"name": "Caleb Cartwright", "email": "calebcartwright@users.noreply.github.com", "date": "2021-12-02T00:31:10Z"}, "message": "Determine when new comment lines are needed for itemized blocks\n\nFixes 5088\n\nPreviously, rustfmt would add a new comment line anytime it reformatted\nan itemized block within a comment when ``wrap_comments=true``. This\nwould lead to rustfmt adding empty comments with trailing whitespace.\n\nNow, new comment lines are only added if the original comment spanned\nmultiple lines, if the comment needs to be wrapped, or if the comment\noriginally started with an empty comment line.", "tree": {"sha": "88ff61a36ac92d021be00619c5e8486ec5bf5eae", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/88ff61a36ac92d021be00619c5e8486ec5bf5eae"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ec46ffd981d3d50572f1ad3f6033a7c33d27033f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ec46ffd981d3d50572f1ad3f6033a7c33d27033f", "html_url": "https://github.com/rust-lang/rust/commit/ec46ffd981d3d50572f1ad3f6033a7c33d27033f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/comments", "author": {"login": "ytmimi", "id": 29028348, "node_id": "MDQ6VXNlcjI5MDI4MzQ4", "avatar_url": "https://avatars.githubusercontent.com/u/29028348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ytmimi", "html_url": "https://github.com/ytmimi", "followers_url": "https://api.github.com/users/ytmimi/followers", "following_url": "https://api.github.com/users/ytmimi/following{/other_user}", "gists_url": "https://api.github.com/users/ytmimi/gists{/gist_id}", "starred_url": "https://api.github.com/users/ytmimi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ytmimi/subscriptions", "organizations_url": "https://api.github.com/users/ytmimi/orgs", "repos_url": "https://api.github.com/users/ytmimi/repos", "events_url": "https://api.github.com/users/ytmimi/events{/privacy}", "received_events_url": "https://api.github.com/users/ytmimi/received_events", "type": "User", "site_admin": false}, "committer": {"login": "calebcartwright", "id": 13042488, "node_id": "MDQ6VXNlcjEzMDQyNDg4", "avatar_url": "https://avatars.githubusercontent.com/u/13042488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/calebcartwright", "html_url": "https://github.com/calebcartwright", "followers_url": "https://api.github.com/users/calebcartwright/followers", "following_url": "https://api.github.com/users/calebcartwright/following{/other_user}", "gists_url": "https://api.github.com/users/calebcartwright/gists{/gist_id}", "starred_url": "https://api.github.com/users/calebcartwright/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/calebcartwright/subscriptions", "organizations_url": "https://api.github.com/users/calebcartwright/orgs", "repos_url": "https://api.github.com/users/calebcartwright/repos", "events_url": "https://api.github.com/users/calebcartwright/events{/privacy}", "received_events_url": "https://api.github.com/users/calebcartwright/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1f28683ffacebc91b3bc47b94c56690633226ff9", "url": "https://api.github.com/repos/rust-lang/rust/commits/1f28683ffacebc91b3bc47b94c56690633226ff9", "html_url": "https://github.com/rust-lang/rust/commit/1f28683ffacebc91b3bc47b94c56690633226ff9"}], "stats": {"total": 430, "additions": 424, "deletions": 6}, "files": [{"sha": "0f850b9b2f2fba2b84be6e51101161fbf5773a2e", "filename": "src/comment.rs", "status": "modified", "additions": 37, "deletions": 6, "changes": 43, "blob_url": "https://github.com/rust-lang/rust/blob/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/src%2Fcomment.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/src%2Fcomment.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomment.rs?ref=ec46ffd981d3d50572f1ad3f6033a7c33d27033f", "patch": "@@ -519,6 +519,7 @@ struct CommentRewrite<'a> {\n     opener: String,\n     closer: String,\n     line_start: String,\n+    style: CommentStyle<'a>,\n }\n \n impl<'a> CommentRewrite<'a> {\n@@ -528,10 +529,14 @@ impl<'a> CommentRewrite<'a> {\n         shape: Shape,\n         config: &'a Config,\n     ) -> CommentRewrite<'a> {\n-        let (opener, closer, line_start) = if block_style {\n-            CommentStyle::SingleBullet.to_str_tuplet()\n+        let ((opener, closer, line_start), style) = if block_style {\n+            (\n+                CommentStyle::SingleBullet.to_str_tuplet(),\n+                CommentStyle::SingleBullet,\n+            )\n         } else {\n-            comment_style(orig, config.normalize_comments()).to_str_tuplet()\n+            let style = comment_style(orig, config.normalize_comments());\n+            (style.to_str_tuplet(), style)\n         };\n \n         let max_width = shape\n@@ -564,6 +569,7 @@ impl<'a> CommentRewrite<'a> {\n             opener: opener.to_owned(),\n             closer: closer.to_owned(),\n             line_start: line_start.to_owned(),\n+            style,\n         };\n         cr.result.push_str(opener);\n         cr\n@@ -583,6 +589,15 @@ impl<'a> CommentRewrite<'a> {\n         result\n     }\n \n+    /// Check if any characters were written to the result buffer after the start of the comment.\n+    /// when calling [`CommentRewrite::new()`] the result buffer is initiazlied with the opening\n+    /// characters for the comment.\n+    fn buffer_contains_comment(&self) -> bool {\n+        // if self.result.len() < self.opener.len() then an empty comment is in the buffer\n+        // if self.result.len() > self.opener.len() then a non empty comment is in the buffer\n+        self.result.len() != self.opener.len()\n+    }\n+\n     fn finish(mut self) -> String {\n         if !self.code_block_buffer.is_empty() {\n             // There is a code block that is not properly enclosed by backticks.\n@@ -598,7 +613,12 @@ impl<'a> CommentRewrite<'a> {\n             // the last few lines are part of an itemized block\n             self.fmt.shape = Shape::legacy(self.max_width, self.fmt_indent);\n             let item_fmt = ib.create_string_format(&self.fmt);\n-            self.result.push_str(&self.comment_line_separator);\n+\n+            // only push a comment_line_separator for ItemizedBlocks if the comment is not empty\n+            if self.buffer_contains_comment() {\n+                self.result.push_str(&self.comment_line_separator);\n+            }\n+\n             self.result.push_str(&ib.opener);\n             match rewrite_string(\n                 &ib.trimmed_block_as_string(),\n@@ -632,7 +652,13 @@ impl<'a> CommentRewrite<'a> {\n         line: &'a str,\n         has_leading_whitespace: bool,\n     ) -> bool {\n-        let is_last = i == count_newlines(orig);\n+        let num_newlines = count_newlines(orig);\n+        let is_last = i == num_newlines;\n+        let needs_new_comment_line = if self.style.is_block_comment() {\n+            num_newlines > 0 || self.buffer_contains_comment()\n+        } else {\n+            self.buffer_contains_comment()\n+        };\n \n         if let Some(ref mut ib) = self.item_block {\n             if ib.add_line(line) {\n@@ -641,7 +667,12 @@ impl<'a> CommentRewrite<'a> {\n             self.is_prev_line_multi_line = false;\n             self.fmt.shape = Shape::legacy(self.max_width, self.fmt_indent);\n             let item_fmt = ib.create_string_format(&self.fmt);\n-            self.result.push_str(&self.comment_line_separator);\n+\n+            // only push a comment_line_separator if we need to start a new comment line\n+            if needs_new_comment_line {\n+                self.result.push_str(&self.comment_line_separator);\n+            }\n+\n             self.result.push_str(&ib.opener);\n             match rewrite_string(\n                 &ib.trimmed_block_as_string(),"}, {"sha": "09f68cae424063e9523d8b66e8c07e0c110b5ac0", "filename": "tests/source/issue-5088/deeply_nested_long_comment_wrap_comments_true.rs", "status": "added", "additions": 33, "deletions": 0, "changes": 33, "blob_url": "https://github.com/rust-lang/rust/blob/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/tests%2Fsource%2Fissue-5088%2Fdeeply_nested_long_comment_wrap_comments_true.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/tests%2Fsource%2Fissue-5088%2Fdeeply_nested_long_comment_wrap_comments_true.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fissue-5088%2Fdeeply_nested_long_comment_wrap_comments_true.rs?ref=ec46ffd981d3d50572f1ad3f6033a7c33d27033f", "patch": "@@ -0,0 +1,33 @@\n+// rustfmt-wrap_comments: true\n+\n+fn main() {\n+    {\n+        {\n+            {\n+                {\n+                    {\n+                        {\n+                            {\n+                                {\n+                                    {\n+                                        {\n+                                            {\n+                                                // - aaaa aaaaaaaaa aaaaaaaaa aaaaaaaaa aaaaaaaaa bbbbbbbbbb bbbbbbbbb bbbbbbbbb ccc cccccccccc ccccccc cccccccc\n+\n+                                                // * aaaa aaaaaaaaa aaaaaaaaa aaaaaaaaa aaaaaaaaa bbbbbbbbbb bbbbbbbbb bbbbbbbbb ccc cccccccccc ccccccc cccccccc\n+\n+                                                /* - aaaa aaaaaaaaa aaaaaaaaa aaaaaaaaa aaaaaaaaa bbbbbbbbbb bbbbbbbbb bbbbbbbbb ccc cccccccccc ccccccc cccccccc */\n+\n+                                                /* * aaaa aaaaaaaaa aaaaaaaaa aaaaaaaaa aaaaaaaaa bbbbbbbbbb bbbbbbbbb bbbbbbbbb ccc cccccccccc ccccccc cccccccc */\n+                                            };\n+                                        };\n+                                    };\n+                                };\n+                            };\n+                        };\n+                    };\n+                };\n+            };\n+        };\n+    };\n+}"}, {"sha": "75f748000f9ba3ef60b320775ed63b9aed7d5054", "filename": "tests/source/issue-5088/start_with_empty_comment_very_long_itemized_block_wrap_comments_true.rs", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/tests%2Fsource%2Fissue-5088%2Fstart_with_empty_comment_very_long_itemized_block_wrap_comments_true.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/tests%2Fsource%2Fissue-5088%2Fstart_with_empty_comment_very_long_itemized_block_wrap_comments_true.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fissue-5088%2Fstart_with_empty_comment_very_long_itemized_block_wrap_comments_true.rs?ref=ec46ffd981d3d50572f1ad3f6033a7c33d27033f", "patch": "@@ -0,0 +1,19 @@\n+// rustfmt-wrap_comments: true\n+\n+//\n+// - Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n+// - Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n+\n+//\n+// * Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n+// * Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n+\n+/*\n+ * - Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.*/\n+/*\n+ * - Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.*/\n+\n+/*\n+ * * Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.*/\n+/*\n+ * * Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.*/"}, {"sha": "00437f00216babc50ec4a9fb5e07270f51f5460a", "filename": "tests/source/issue-5088/very_long_comment_wrap_comments_true.rs", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/tests%2Fsource%2Fissue-5088%2Fvery_long_comment_wrap_comments_true.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/tests%2Fsource%2Fissue-5088%2Fvery_long_comment_wrap_comments_true.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fissue-5088%2Fvery_long_comment_wrap_comments_true.rs?ref=ec46ffd981d3d50572f1ad3f6033a7c33d27033f", "patch": "@@ -0,0 +1,13 @@\n+// rustfmt-wrap_comments: true\n+\n+// - Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n+// - Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n+\n+// * Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n+// * Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n+\n+/* - Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.*/\n+/* - Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.*/\n+\n+/* * Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.*/\n+/* * Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.*/"}, {"sha": "f4801de0184813300efdc48d6d338acb4d36c6a1", "filename": "tests/target/issue-5088/deeply_nested_long_comment_wrap_comments_false.rs", "status": "added", "additions": 33, "deletions": 0, "changes": 33, "blob_url": "https://github.com/rust-lang/rust/blob/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/tests%2Ftarget%2Fissue-5088%2Fdeeply_nested_long_comment_wrap_comments_false.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/tests%2Ftarget%2Fissue-5088%2Fdeeply_nested_long_comment_wrap_comments_false.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fissue-5088%2Fdeeply_nested_long_comment_wrap_comments_false.rs?ref=ec46ffd981d3d50572f1ad3f6033a7c33d27033f", "patch": "@@ -0,0 +1,33 @@\n+// rustfmt-wrap_comments: false\n+\n+fn main() {\n+    {\n+        {\n+            {\n+                {\n+                    {\n+                        {\n+                            {\n+                                {\n+                                    {\n+                                        {\n+                                            {\n+                                                // - aaaa aaaaaaaaa aaaaaaaaa aaaaaaaaa aaaaaaaaa bbbbbbbbbb bbbbbbbbb bbbbbbbbb ccc cccccccccc ccccccc cccccccc\n+\n+                                                // * aaaa aaaaaaaaa aaaaaaaaa aaaaaaaaa aaaaaaaaa bbbbbbbbbb bbbbbbbbb bbbbbbbbb ccc cccccccccc ccccccc cccccccc\n+\n+                                                /* - aaaa aaaaaaaaa aaaaaaaaa aaaaaaaaa aaaaaaaaa bbbbbbbbbb bbbbbbbbb bbbbbbbbb ccc cccccccccc ccccccc cccccccc */\n+\n+                                                /* * aaaa aaaaaaaaa aaaaaaaaa aaaaaaaaa aaaaaaaaa bbbbbbbbbb bbbbbbbbb bbbbbbbbb ccc cccccccccc ccccccc cccccccc */\n+                                            };\n+                                        };\n+                                    };\n+                                };\n+                            };\n+                        };\n+                    };\n+                };\n+            };\n+        };\n+    };\n+}"}, {"sha": "b289c9f859e0e2f93f32e35d33922e21abadc5eb", "filename": "tests/target/issue-5088/deeply_nested_long_comment_wrap_comments_true.rs", "status": "added", "additions": 49, "deletions": 0, "changes": 49, "blob_url": "https://github.com/rust-lang/rust/blob/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/tests%2Ftarget%2Fissue-5088%2Fdeeply_nested_long_comment_wrap_comments_true.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/tests%2Ftarget%2Fissue-5088%2Fdeeply_nested_long_comment_wrap_comments_true.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fissue-5088%2Fdeeply_nested_long_comment_wrap_comments_true.rs?ref=ec46ffd981d3d50572f1ad3f6033a7c33d27033f", "patch": "@@ -0,0 +1,49 @@\n+// rustfmt-wrap_comments: true\n+\n+fn main() {\n+    {\n+        {\n+            {\n+                {\n+                    {\n+                        {\n+                            {\n+                                {\n+                                    {\n+                                        {\n+                                            {\n+                                                // - aaaa aaaaaaaaa aaaaaaaaa\n+                                                //   aaaaaaaaa aaaaaaaaa\n+                                                //   bbbbbbbbbb bbbbbbbbb\n+                                                //   bbbbbbbbb ccc cccccccccc\n+                                                //   ccccccc cccccccc\n+\n+                                                // * aaaa aaaaaaaaa aaaaaaaaa\n+                                                //   aaaaaaaaa aaaaaaaaa\n+                                                //   bbbbbbbbbb bbbbbbbbb\n+                                                //   bbbbbbbbb ccc cccccccccc\n+                                                //   ccccccc cccccccc\n+\n+                                                /* - aaaa aaaaaaaaa aaaaaaaaa\n+                                                 *   aaaaaaaaa aaaaaaaaa\n+                                                 *   bbbbbbbbbb bbbbbbbbb\n+                                                 *   bbbbbbbbb ccc cccccccccc\n+                                                 *   ccccccc cccccccc */\n+\n+                                                /* * aaaa aaaaaaaaa aaaaaaaaa\n+                                                 *   aaaaaaaaa aaaaaaaaa\n+                                                 *   bbbbbbbbbb bbbbbbbbb\n+                                                 *   bbbbbbbbb ccc cccccccccc\n+                                                 *   ccccccc cccccccc */\n+                                            };\n+                                        };\n+                                    };\n+                                };\n+                            };\n+                        };\n+                    };\n+                };\n+            };\n+        };\n+    };\n+}"}, {"sha": "60beed1b04828b730ea5da76a06818810ec512d6", "filename": "tests/target/issue-5088/multi_line_itemized_block_wrap_comments_false.rs", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/tests%2Ftarget%2Fissue-5088%2Fmulti_line_itemized_block_wrap_comments_false.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/tests%2Ftarget%2Fissue-5088%2Fmulti_line_itemized_block_wrap_comments_false.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fissue-5088%2Fmulti_line_itemized_block_wrap_comments_false.rs?ref=ec46ffd981d3d50572f1ad3f6033a7c33d27033f", "patch": "@@ -0,0 +1,17 @@\n+// rustfmt-wrap_comments: false\n+\n+// - some itemized block 1\n+// - some itemized block 2\n+\n+// * some itemized block 3\n+// * some itemized block 4\n+\n+/*\n+ * - some itemized block 5\n+ * - some itemized block 6\n+ */\n+\n+/*\n+ * * some itemized block 7\n+ * * some itemized block 8\n+ */"}, {"sha": "84fba4b7c198629c56741ecb62055ff6e42ed3cf", "filename": "tests/target/issue-5088/multi_line_itemized_block_wrap_comments_true.rs", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/tests%2Ftarget%2Fissue-5088%2Fmulti_line_itemized_block_wrap_comments_true.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/tests%2Ftarget%2Fissue-5088%2Fmulti_line_itemized_block_wrap_comments_true.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fissue-5088%2Fmulti_line_itemized_block_wrap_comments_true.rs?ref=ec46ffd981d3d50572f1ad3f6033a7c33d27033f", "patch": "@@ -0,0 +1,17 @@\n+// rustfmt-wrap_comments: true\n+\n+// - some itemized block 1\n+// - some itemized block 2\n+\n+// * some itemized block 3\n+// * some itemized block 4\n+\n+/*\n+ * - some itemized block 5\n+ * - some itemized block 6\n+ */\n+\n+/*\n+ * * some itemized block 7\n+ * * some itemized block 8\n+ */"}, {"sha": "d1bf44f6c7413aaf31620513da469b146430dbd4", "filename": "tests/target/issue-5088/multi_line_text_with_itemized_block_wrap_comments_false.rs", "status": "added", "additions": 37, "deletions": 0, "changes": 37, "blob_url": "https://github.com/rust-lang/rust/blob/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/tests%2Ftarget%2Fissue-5088%2Fmulti_line_text_with_itemized_block_wrap_comments_false.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/tests%2Ftarget%2Fissue-5088%2Fmulti_line_text_with_itemized_block_wrap_comments_false.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fissue-5088%2Fmulti_line_text_with_itemized_block_wrap_comments_false.rs?ref=ec46ffd981d3d50572f1ad3f6033a7c33d27033f", "patch": "@@ -0,0 +1,37 @@\n+// rustfmt-wrap_comments: false\n+\n+// Some text\n+// - some itemized block 1\n+// - some itemized block 2\n+// Some more text\n+// - some itemized block 3\n+// - some itemized block 4\n+// Even more text\n+\n+// Some text\n+// * some itemized block 5\n+// * some itemized block 6\n+// Some more text\n+// * some itemized block 7\n+// * some itemized block 8\n+// Even more text\n+\n+/*\n+ * Some text\n+ * - some itemized block 9\n+ * - some itemized block 10\n+ * Some more text\n+ * - some itemized block 11\n+ * - some itemized block 12\n+ * Even more text\n+ */\n+\n+/*\n+ * Some text\n+ * * some itemized block 13\n+ * * some itemized block 14\n+ * Some more text\n+ * * some itemized block 15\n+ * * some itemized block 16\n+ * Even more text\n+ */"}, {"sha": "f767491f902d41d2db619690c1f5dfd3296d6427", "filename": "tests/target/issue-5088/multi_line_text_with_itemized_block_wrap_comments_true.rs", "status": "added", "additions": 37, "deletions": 0, "changes": 37, "blob_url": "https://github.com/rust-lang/rust/blob/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/tests%2Ftarget%2Fissue-5088%2Fmulti_line_text_with_itemized_block_wrap_comments_true.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/tests%2Ftarget%2Fissue-5088%2Fmulti_line_text_with_itemized_block_wrap_comments_true.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fissue-5088%2Fmulti_line_text_with_itemized_block_wrap_comments_true.rs?ref=ec46ffd981d3d50572f1ad3f6033a7c33d27033f", "patch": "@@ -0,0 +1,37 @@\n+// rustfmt-wrap_comments: true\n+\n+// Some text\n+// - some itemized block 1\n+// - some itemized block 2\n+// Some more text\n+// - some itemized block 3\n+// - some itemized block 4\n+// Even more text\n+\n+// Some text\n+// * some itemized block 5\n+// * some itemized block 6\n+// Some more text\n+// * some itemized block 7\n+// * some itemized block 8\n+// Even more text\n+\n+/*\n+ * Some text\n+ * - some itemized block 9\n+ * - some itemized block 10\n+ * Some more text\n+ * - some itemized block 11\n+ * - some itemized block 12\n+ * Even more text\n+ */\n+\n+/*\n+ * Some text\n+ * * some itemized block 13\n+ * * some itemized block 14\n+ * Some more text\n+ * * some itemized block 15\n+ * * some itemized block 16\n+ * Even more text\n+ */"}, {"sha": "2cd85c787f974d34f1c2cfae8f673d348e5f6258", "filename": "tests/target/issue-5088/single_line_itemized_block_wrap_comments_false.rs", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/tests%2Ftarget%2Fissue-5088%2Fsingle_line_itemized_block_wrap_comments_false.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/tests%2Ftarget%2Fissue-5088%2Fsingle_line_itemized_block_wrap_comments_false.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fissue-5088%2Fsingle_line_itemized_block_wrap_comments_false.rs?ref=ec46ffd981d3d50572f1ad3f6033a7c33d27033f", "patch": "@@ -0,0 +1,9 @@\n+// rustfmt-wrap_comments: false\n+\n+// - some itemized block 1\n+\n+// * some itemized block 2\n+\n+/* - some itemized block 3 */\n+\n+/* * some itemized block 4 */"}, {"sha": "e9f343d75d5ebec61c7c39cb8a6152f187e1be3c", "filename": "tests/target/issue-5088/single_line_itemized_block_wrap_comments_true.rs", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/tests%2Ftarget%2Fissue-5088%2Fsingle_line_itemized_block_wrap_comments_true.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/tests%2Ftarget%2Fissue-5088%2Fsingle_line_itemized_block_wrap_comments_true.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fissue-5088%2Fsingle_line_itemized_block_wrap_comments_true.rs?ref=ec46ffd981d3d50572f1ad3f6033a7c33d27033f", "patch": "@@ -0,0 +1,9 @@\n+// rustfmt-wrap_comments: true\n+\n+// - some itemized block 1\n+\n+// * some itemized block 2\n+\n+/* - some itemized block 3 */\n+\n+/* * some itemized block 4 */"}, {"sha": "97bb7733d189f1674954fb8019551d728f8fb1f8", "filename": "tests/target/issue-5088/start_with_empty_comment_very_long_itemized_block_wrap_comments_false.rs", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/tests%2Ftarget%2Fissue-5088%2Fstart_with_empty_comment_very_long_itemized_block_wrap_comments_false.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/tests%2Ftarget%2Fissue-5088%2Fstart_with_empty_comment_very_long_itemized_block_wrap_comments_false.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fissue-5088%2Fstart_with_empty_comment_very_long_itemized_block_wrap_comments_false.rs?ref=ec46ffd981d3d50572f1ad3f6033a7c33d27033f", "patch": "@@ -0,0 +1,19 @@\n+// rustfmt-wrap_comments: false\n+\n+//\n+// - Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n+// - Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n+\n+//\n+// * Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n+// * Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n+\n+/*\n+ * - Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.*/\n+/*\n+ * - Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.*/\n+\n+/*\n+ * * Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.*/\n+/*\n+ * * Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.*/"}, {"sha": "c8af8383e058a117b7000a20b40bbaef2c1db746", "filename": "tests/target/issue-5088/start_with_empty_comment_very_long_itemized_block_wrap_comments_true.rs", "status": "added", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/tests%2Ftarget%2Fissue-5088%2Fstart_with_empty_comment_very_long_itemized_block_wrap_comments_true.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/tests%2Ftarget%2Fissue-5088%2Fstart_with_empty_comment_very_long_itemized_block_wrap_comments_true.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fissue-5088%2Fstart_with_empty_comment_very_long_itemized_block_wrap_comments_true.rs?ref=ec46ffd981d3d50572f1ad3f6033a7c33d27033f", "patch": "@@ -0,0 +1,27 @@\n+// rustfmt-wrap_comments: true\n+\n+//\n+// - Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod\n+//   tempor incididunt ut labore et dolore magna aliqua.\n+// - Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod\n+//   tempor incididunt ut labore et dolore magna aliqua.\n+\n+//\n+// * Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod\n+//   tempor incididunt ut labore et dolore magna aliqua.\n+// * Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod\n+//   tempor incididunt ut labore et dolore magna aliqua.\n+\n+/*\n+ * - Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod\n+ *   tempor incididunt ut labore et dolore magna aliqua. */\n+/*\n+ * - Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod\n+ *   tempor incididunt ut labore et dolore magna aliqua. */\n+\n+/*\n+ * * Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod\n+ *   tempor incididunt ut labore et dolore magna aliqua. */\n+/*\n+ * * Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod\n+ *   tempor incididunt ut labore et dolore magna aliqua. */"}, {"sha": "75cc42c0e66bb119dd1a248aa25efec85126560c", "filename": "tests/target/issue-5088/start_with_empty_comment_wrap_comments_false.rs", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/tests%2Ftarget%2Fissue-5088%2Fstart_with_empty_comment_wrap_comments_false.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/tests%2Ftarget%2Fissue-5088%2Fstart_with_empty_comment_wrap_comments_false.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fissue-5088%2Fstart_with_empty_comment_wrap_comments_false.rs?ref=ec46ffd981d3d50572f1ad3f6033a7c33d27033f", "patch": "@@ -0,0 +1,17 @@\n+// rustfmt-wrap_comments: false\n+\n+//\n+// - some itemized block 1\n+// - some itemized block 2\n+\n+//\n+// * some itemized block 3\n+// * some itemized block 4\n+\n+/*\n+ * - some itemized block 5\n+ * - some itemized block 6 */\n+\n+/*\n+ * * some itemized block 7\n+ * * some itemized block 8 */"}, {"sha": "ef2c8f90cd309743d4d9b680c9781f60f426c3da", "filename": "tests/target/issue-5088/start_with_empty_comment_wrap_comments_true.rs", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/tests%2Ftarget%2Fissue-5088%2Fstart_with_empty_comment_wrap_comments_true.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/tests%2Ftarget%2Fissue-5088%2Fstart_with_empty_comment_wrap_comments_true.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fissue-5088%2Fstart_with_empty_comment_wrap_comments_true.rs?ref=ec46ffd981d3d50572f1ad3f6033a7c33d27033f", "patch": "@@ -0,0 +1,17 @@\n+// rustfmt-wrap_comments: true\n+\n+//\n+// - some itemized block 1\n+// - some itemized block 2\n+\n+//\n+// * some itemized block 3\n+// * some itemized block 4\n+\n+/*\n+ * - some itemized block 5\n+ * - some itemized block 6 */\n+\n+/*\n+ * * some itemized block 7\n+ * * some itemized block 8 */"}, {"sha": "c826cc5d4da6e4f58575ec1ea89b9330d65de9c3", "filename": "tests/target/issue-5088/very_long_comment_wrap_comments_false.rs", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/tests%2Ftarget%2Fissue-5088%2Fvery_long_comment_wrap_comments_false.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/tests%2Ftarget%2Fissue-5088%2Fvery_long_comment_wrap_comments_false.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fissue-5088%2Fvery_long_comment_wrap_comments_false.rs?ref=ec46ffd981d3d50572f1ad3f6033a7c33d27033f", "patch": "@@ -0,0 +1,13 @@\n+// rustfmt-wrap_comments: false\n+\n+// - Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n+// - Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n+\n+// * Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n+// * Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n+\n+/* - Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.*/\n+/* - Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.*/\n+\n+/* * Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.*/\n+/* * Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.*/"}, {"sha": "7f764dbd8a22b6665cdf1bb46bc1ac67d0f70847", "filename": "tests/target/issue-5088/very_long_comment_wrap_comments_true.rs", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/tests%2Ftarget%2Fissue-5088%2Fvery_long_comment_wrap_comments_true.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ec46ffd981d3d50572f1ad3f6033a7c33d27033f/tests%2Ftarget%2Fissue-5088%2Fvery_long_comment_wrap_comments_true.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fissue-5088%2Fvery_long_comment_wrap_comments_true.rs?ref=ec46ffd981d3d50572f1ad3f6033a7c33d27033f", "patch": "@@ -0,0 +1,21 @@\n+// rustfmt-wrap_comments: true\n+\n+// - Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod\n+//   tempor incididunt ut labore et dolore magna aliqua.\n+// - Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod\n+//   tempor incididunt ut labore et dolore magna aliqua.\n+\n+// * Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod\n+//   tempor incididunt ut labore et dolore magna aliqua.\n+// * Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod\n+//   tempor incididunt ut labore et dolore magna aliqua.\n+\n+/* - Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod\n+ *   tempor incididunt ut labore et dolore magna aliqua. */\n+/* - Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod\n+ *   tempor incididunt ut labore et dolore magna aliqua. */\n+\n+/* * Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod\n+ *   tempor incididunt ut labore et dolore magna aliqua. */\n+/* * Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod\n+ *   tempor incididunt ut labore et dolore magna aliqua. */"}]}