{"sha": "044e21ae08ad96283783a6e39bee0a775caa2d70", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA0NGUyMWFlMDhhZDk2MjgzNzgzYTZlMzliZWUwYTc3NWNhYTJkNzA=", "commit": {"author": {"name": "Milo", "email": "50248166+Milo123459@users.noreply.github.com", "date": "2021-06-19T09:14:15Z"}, "committer": {"name": "Milo", "email": "50248166+Milo123459@users.noreply.github.com", "date": "2021-06-19T09:14:15Z"}, "message": "remove num_format", "tree": {"sha": "7130f80fc4c800902970122dcceae7aad8406aee", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7130f80fc4c800902970122dcceae7aad8406aee"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/044e21ae08ad96283783a6e39bee0a775caa2d70", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/044e21ae08ad96283783a6e39bee0a775caa2d70", "html_url": "https://github.com/rust-lang/rust/commit/044e21ae08ad96283783a6e39bee0a775caa2d70", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/044e21ae08ad96283783a6e39bee0a775caa2d70/comments", "author": {"login": "Milo123459", "id": 50248166, "node_id": "MDQ6VXNlcjUwMjQ4MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/50248166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Milo123459", "html_url": "https://github.com/Milo123459", "followers_url": "https://api.github.com/users/Milo123459/followers", "following_url": "https://api.github.com/users/Milo123459/following{/other_user}", "gists_url": "https://api.github.com/users/Milo123459/gists{/gist_id}", "starred_url": "https://api.github.com/users/Milo123459/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Milo123459/subscriptions", "organizations_url": "https://api.github.com/users/Milo123459/orgs", "repos_url": "https://api.github.com/users/Milo123459/repos", "events_url": "https://api.github.com/users/Milo123459/events{/privacy}", "received_events_url": "https://api.github.com/users/Milo123459/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Milo123459", "id": 50248166, "node_id": "MDQ6VXNlcjUwMjQ4MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/50248166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Milo123459", "html_url": "https://github.com/Milo123459", "followers_url": "https://api.github.com/users/Milo123459/followers", "following_url": "https://api.github.com/users/Milo123459/following{/other_user}", "gists_url": "https://api.github.com/users/Milo123459/gists{/gist_id}", "starred_url": "https://api.github.com/users/Milo123459/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Milo123459/subscriptions", "organizations_url": "https://api.github.com/users/Milo123459/orgs", "repos_url": "https://api.github.com/users/Milo123459/repos", "events_url": "https://api.github.com/users/Milo123459/events{/privacy}", "received_events_url": "https://api.github.com/users/Milo123459/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "673933e2f73c32588c075d712036372d364dc9fb", "url": "https://api.github.com/repos/rust-lang/rust/commits/673933e2f73c32588c075d712036372d364dc9fb", "html_url": "https://github.com/rust-lang/rust/commit/673933e2f73c32588c075d712036372d364dc9fb"}], "stats": {"total": 48, "additions": 6, "deletions": 42}, "files": [{"sha": "5066d5f0f5ebe2bfc7c23fdc39017ef021d94ec2", "filename": "Cargo.lock", "status": "modified", "additions": 3, "deletions": 30, "changes": 33, "blob_url": "https://github.com/rust-lang/rust/blob/044e21ae08ad96283783a6e39bee0a775caa2d70/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/044e21ae08ad96283783a6e39bee0a775caa2d70/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=044e21ae08ad96283783a6e39bee0a775caa2d70", "patch": "@@ -47,15 +47,6 @@ version = \"0.12.1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"33954243bd79057c2de7338850b85983a44588021f8a5fee574a8888c6de4344\"\n \n-[[package]]\n-name = \"arrayvec\"\n-version = \"0.4.12\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"cd9fd44efafa8690358b7408d253adf110036b88f55672a933f01d616ad9b1b9\"\n-dependencies = [\n- \"nodrop\",\n-]\n-\n [[package]]\n name = \"arrayvec\"\n version = \"0.7.0\"\n@@ -468,7 +459,7 @@ dependencies = [\n name = \"hir\"\n version = \"0.0.0\"\n dependencies = [\n- \"arrayvec 0.7.0\",\n+ \"arrayvec\",\n  \"base_db\",\n  \"cfg\",\n  \"either\",\n@@ -538,7 +529,7 @@ dependencies = [\n name = \"hir_ty\"\n version = \"0.0.0\"\n dependencies = [\n- \"arrayvec 0.7.0\",\n+ \"arrayvec\",\n  \"base_db\",\n  \"chalk-ir\",\n  \"chalk-recursive\",\n@@ -591,7 +582,6 @@ dependencies = [\n  \"indexmap\",\n  \"itertools\",\n  \"log\",\n- \"num-format\",\n  \"oorandom\",\n  \"profile\",\n  \"pulldown-cmark\",\n@@ -944,12 +934,6 @@ dependencies = [\n  \"winapi\",\n ]\n \n-[[package]]\n-name = \"nodrop\"\n-version = \"0.1.14\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"72ef4a56884ca558e5ddb05a1d1e7e1bfd9a68d9ed024c21704cc98872dae1bb\"\n-\n [[package]]\n name = \"notify\"\n version = \"5.0.0-pre.9\"\n@@ -976,16 +960,6 @@ dependencies = [\n  \"winapi\",\n ]\n \n-[[package]]\n-name = \"num-format\"\n-version = \"0.4.0\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"bafe4179722c2894288ee77a9f044f02811c86af699344c498b0840c698a2465\"\n-dependencies = [\n- \"arrayvec 0.4.12\",\n- \"itoa\",\n-]\n-\n [[package]]\n name = \"num_cpus\"\n version = \"1.13.0\"\n@@ -1343,7 +1317,6 @@ dependencies = [\n  \"lsp-types\",\n  \"mbe\",\n  \"mimalloc\",\n- \"num-format\",\n  \"oorandom\",\n  \"parking_lot\",\n  \"proc_macro_srv\",\n@@ -1587,7 +1560,7 @@ dependencies = [\n name = \"syntax\"\n version = \"0.0.0\"\n dependencies = [\n- \"arrayvec 0.7.0\",\n+ \"arrayvec\",\n  \"cov-mark\",\n  \"expect-test\",\n  \"indexmap\","}, {"sha": "3bc07aedf58c66633692afb266d50193539de416", "filename": "crates/ide/Cargo.toml", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/044e21ae08ad96283783a6e39bee0a775caa2d70/crates%2Fide%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/044e21ae08ad96283783a6e39bee0a775caa2d70/crates%2Fide%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2FCargo.toml?ref=044e21ae08ad96283783a6e39bee0a775caa2d70", "patch": "@@ -21,7 +21,6 @@ pulldown-cmark-to-cmark = \"6.0.0\"\n pulldown-cmark = { version = \"0.8.0\", default-features = false }\n url = \"2.1.1\"\n dot = \"0.1.4\"\n-num-format = \"0.4.0\"\n stdx = { path = \"../stdx\", version = \"0.0.0\" }\n syntax = { path = \"../syntax\", version = \"0.0.0\" }\n text_edit = { path = \"../text_edit\", version = \"0.0.0\" }"}, {"sha": "22f1a09091bd2f5189c62eb26f15212b1965bbb1", "filename": "crates/ide/src/status.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/044e21ae08ad96283783a6e39bee0a775caa2d70/crates%2Fide%2Fsrc%2Fstatus.rs", "raw_url": "https://github.com/rust-lang/rust/raw/044e21ae08ad96283783a6e39bee0a775caa2d70/crates%2Fide%2Fsrc%2Fstatus.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Fstatus.rs?ref=044e21ae08ad96283783a6e39bee0a775caa2d70", "patch": "@@ -10,7 +10,6 @@ use ide_db::{\n     RootDatabase,\n };\n use itertools::Itertools;\n-use num_format::{Buffer, Locale};\n use profile::{memory_usage, Bytes};\n use rustc_hash::FxHashMap;\n use stdx::format_to;\n@@ -110,8 +109,7 @@ pub(crate) struct SyntaxTreeStats {\n \n impl fmt::Display for SyntaxTreeStats {\n     fn fmt(&self, fmt: &mut fmt::Formatter) -> fmt::Result {\n-        let buf = Buffer::default().write_formatted(&self.total, &Locale::en);\n-        write!(fmt, \"{} trees, {} preserved\", buf.to_string(), self.retained)\n+        write!(fmt, \"{} trees, {} preserved\", self.total, self.retained)\n     }\n }\n "}, {"sha": "3f35ce1ebcf3b4c76b945e6b2258bd7573889223", "filename": "crates/rust-analyzer/Cargo.toml", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/044e21ae08ad96283783a6e39bee0a775caa2d70/crates%2Frust-analyzer%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/044e21ae08ad96283783a6e39bee0a775caa2d70/crates%2Frust-analyzer%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2FCargo.toml?ref=044e21ae08ad96283783a6e39bee0a775caa2d70", "patch": "@@ -38,7 +38,6 @@ tracing = \"0.1\"\n tracing-subscriber = { version = \"0.2\", default-features = false, features = [\"env-filter\", \"registry\"] }\n tracing-tree = { version = \"0.1.4\" }\n always-assert = \"0.1\"\n-num-format = \"0.4.0\"\n stdx = { path = \"../stdx\", version = \"0.0.0\" }\n flycheck = { path = \"../flycheck\", version = \"0.0.0\" }\n ide = { path = \"../ide\", version = \"0.0.0\" }"}, {"sha": "3fd8b3cff7fadb1259677d5188105667de5b43a6", "filename": "crates/rust-analyzer/src/handlers.rs", "status": "modified", "additions": 2, "deletions": 7, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/044e21ae08ad96283783a6e39bee0a775caa2d70/crates%2Frust-analyzer%2Fsrc%2Fhandlers.rs", "raw_url": "https://github.com/rust-lang/rust/raw/044e21ae08ad96283783a6e39bee0a775caa2d70/crates%2Frust-analyzer%2Fsrc%2Fhandlers.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fhandlers.rs?ref=044e21ae08ad96283783a6e39bee0a775caa2d70", "patch": "@@ -25,7 +25,6 @@ use lsp_types::{\n     SemanticTokensRangeResult, SemanticTokensResult, SymbolInformation, SymbolTag,\n     TextDocumentIdentifier, TextDocumentPositionParams, Url, WorkspaceEdit,\n };\n-use num_format::{Locale, ToFormattedString};\n use project_model::TargetKind;\n use serde::{Deserialize, Serialize};\n use serde_json::{json, to_value};\n@@ -67,12 +66,8 @@ pub(crate) fn handle_analyzer_status(\n         format_to!(\n             buf,\n             \"Loaded {:?} packages across {} workspace{}.\\n\",\n-            snap.workspaces\n-                .iter()\n-                .map(|w| w.n_packages())\n-                .sum::<usize>()\n-                .to_formatted_string(&Locale::en),\n-            snap.workspaces.len().to_formatted_string(&Locale::en),\n+            snap.workspaces.iter().map(|w| w.n_packages()).sum::<usize>(),\n+            snap.workspaces.len(),\n             if snap.workspaces.len() == 1 { \"\" } else { \"s\" }\n         );\n     }"}]}