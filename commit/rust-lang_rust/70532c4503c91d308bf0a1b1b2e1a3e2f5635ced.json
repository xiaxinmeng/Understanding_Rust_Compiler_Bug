{"sha": "70532c4503c91d308bf0a1b1b2e1a3e2f5635ced", "node_id": "C_kwDOAAsO6NoAKDcwNTMyYzQ1MDNjOTFkMzA4YmYwYTFiMWIyZTFhM2UyZjU2MzVjZWQ", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2021-11-12T18:17:30Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-11-12T18:17:30Z"}, "message": "Rollup merge of #90644 - est31:const_swap, r=Mark-Simulacrum\n\nExtend the const swap feature\n\nAdds the `const_swap` feature gate to three more swap functions. cc tracking issue #83163\n\n```Rust\nimpl<T> [T] {\n    pub const fn swap(&mut self, a: usize, b: usize);\n    pub const unsafe fn swap_unchecked(&mut self, a: usize, b: usize);\n}\nimpl<T: ?Sized> *mut T {\n    pub const unsafe fn swap(self, with: *mut T);\n}", "tree": {"sha": "a4159487415698622b734751d6e90ca40aabdc40", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a4159487415698622b734751d6e90ca40aabdc40"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/70532c4503c91d308bf0a1b1b2e1a3e2f5635ced", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJhjq+6CRBK7hj4Ov3rIwAAk7oIABA2rm4W6uSl0I77MoY0WWZS\n/kGUQYYA2yWzTKiNkFv1kyxp7jR5nSTVV7QFER3ZRkYmuT3psB1a4jfmGO5RDVk1\n9LRg12NbT7gZfxZqzIo2Ptp1JsHj+dJFcyLsHZOxD7CeHoxIxSKT0cM+cHX3TUZj\neYvkM8RIbVotPQb9e6Iafm5mj3IIlXBYYTokG9TiSOmTL/55XiCHRF154F+gCEKE\n7z12vU07aeloJwezRUMOItQ+dwIK+VTsNvkNMauqnxFxGtWlTzB7FWFXtv83KHgK\n6BhB3293MSlHgm+VvnxsJ7G/lICdgaPlvpexe2stYEMMfkXJn3Q1MX5vpwk8RDc=\n=plFH\n-----END PGP SIGNATURE-----\n", "payload": "tree a4159487415698622b734751d6e90ca40aabdc40\nparent 1fe15be34c472c32a8cd6f1d789592f096d2f50b\nparent eeaa2f16aa4487d3e5fdaef7097b488d45b986d2\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1636741050 +0100\ncommitter GitHub <noreply@github.com> 1636741050 +0100\n\nRollup merge of #90644 - est31:const_swap, r=Mark-Simulacrum\n\nExtend the const swap feature\n\nAdds the `const_swap` feature gate to three more swap functions. cc tracking issue #83163\n\n```Rust\nimpl<T> [T] {\n    pub const fn swap(&mut self, a: usize, b: usize);\n    pub const unsafe fn swap_unchecked(&mut self, a: usize, b: usize);\n}\nimpl<T: ?Sized> *mut T {\n    pub const unsafe fn swap(self, with: *mut T);\n}\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/70532c4503c91d308bf0a1b1b2e1a3e2f5635ced", "html_url": "https://github.com/rust-lang/rust/commit/70532c4503c91d308bf0a1b1b2e1a3e2f5635ced", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/70532c4503c91d308bf0a1b1b2e1a3e2f5635ced/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1fe15be34c472c32a8cd6f1d789592f096d2f50b", "url": "https://api.github.com/repos/rust-lang/rust/commits/1fe15be34c472c32a8cd6f1d789592f096d2f50b", "html_url": "https://github.com/rust-lang/rust/commit/1fe15be34c472c32a8cd6f1d789592f096d2f50b"}, {"sha": "eeaa2f16aa4487d3e5fdaef7097b488d45b986d2", "url": "https://api.github.com/repos/rust-lang/rust/commits/eeaa2f16aa4487d3e5fdaef7097b488d45b986d2", "html_url": "https://github.com/rust-lang/rust/commit/eeaa2f16aa4487d3e5fdaef7097b488d45b986d2"}], "stats": {"total": 9, "additions": 6, "deletions": 3}, "files": [{"sha": "5d5527dc8b46b698f55942bbf8e03fc8596ad347", "filename": "library/core/src/ptr/mut_ptr.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/70532c4503c91d308bf0a1b1b2e1a3e2f5635ced/library%2Fcore%2Fsrc%2Fptr%2Fmut_ptr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/70532c4503c91d308bf0a1b1b2e1a3e2f5635ced/library%2Fcore%2Fsrc%2Fptr%2Fmut_ptr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fptr%2Fmut_ptr.rs?ref=70532c4503c91d308bf0a1b1b2e1a3e2f5635ced", "patch": "@@ -1092,8 +1092,9 @@ impl<T: ?Sized> *mut T {\n     ///\n     /// [`ptr::swap`]: crate::ptr::swap()\n     #[stable(feature = \"pointer_methods\", since = \"1.26.0\")]\n+    #[rustc_const_unstable(feature = \"const_swap\", issue = \"83163\")]\n     #[inline(always)]\n-    pub unsafe fn swap(self, with: *mut T)\n+    pub const unsafe fn swap(self, with: *mut T)\n     where\n         T: Sized,\n     {"}, {"sha": "d876d944e7f0b8747627433cae07b8272f39d6eb", "filename": "library/core/src/slice/mod.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/70532c4503c91d308bf0a1b1b2e1a3e2f5635ced/library%2Fcore%2Fsrc%2Fslice%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/70532c4503c91d308bf0a1b1b2e1a3e2f5635ced/library%2Fcore%2Fsrc%2Fslice%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fslice%2Fmod.rs?ref=70532c4503c91d308bf0a1b1b2e1a3e2f5635ced", "patch": "@@ -558,8 +558,9 @@ impl<T> [T] {\n     /// assert!(v == [\"a\", \"b\", \"e\", \"d\", \"c\"]);\n     /// ```\n     #[stable(feature = \"rust1\", since = \"1.0.0\")]\n+    #[rustc_const_unstable(feature = \"const_swap\", issue = \"83163\")]\n     #[inline]\n-    pub fn swap(&mut self, a: usize, b: usize) {\n+    pub const fn swap(&mut self, a: usize, b: usize) {\n         let _ = &self[a];\n         let _ = &self[b];\n \n@@ -595,7 +596,8 @@ impl<T> [T] {\n     /// [`swap`]: slice::swap\n     /// [undefined behavior]: https://doc.rust-lang.org/reference/behavior-considered-undefined.html\n     #[unstable(feature = \"slice_swap_unchecked\", issue = \"88539\")]\n-    pub unsafe fn swap_unchecked(&mut self, a: usize, b: usize) {\n+    #[rustc_const_unstable(feature = \"const_swap\", issue = \"83163\")]\n+    pub const unsafe fn swap_unchecked(&mut self, a: usize, b: usize) {\n         #[cfg(debug_assertions)]\n         {\n             let _ = &self[a];"}]}