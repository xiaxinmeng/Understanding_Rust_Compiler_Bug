{"sha": "04a0a6fbef0cc7c3c89fbbbeff68ab2c999d9592", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA0YTBhNmZiZWYwY2M3YzNjODlmYmJiZWZmNjhhYjJjOTk5ZDk1OTI=", "commit": {"author": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2011-03-04T01:09:20Z"}, "committer": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2011-03-04T01:09:20Z"}, "message": "Revert \"rustc: Add support for folding over tag types\" as it's unnecessary. Oops.", "tree": {"sha": "27b3416d8a0a1aa31f12c30269c4c25c6e4a9fb7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/27b3416d8a0a1aa31f12c30269c4c25c6e4a9fb7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/04a0a6fbef0cc7c3c89fbbbeff68ab2c999d9592", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/04a0a6fbef0cc7c3c89fbbbeff68ab2c999d9592", "html_url": "https://github.com/rust-lang/rust/commit/04a0a6fbef0cc7c3c89fbbbeff68ab2c999d9592", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/04a0a6fbef0cc7c3c89fbbbeff68ab2c999d9592/comments", "author": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f6682280f3e3e8923c283df8277964b6cbf8d8b8", "url": "https://api.github.com/repos/rust-lang/rust/commits/f6682280f3e3e8923c283df8277964b6cbf8d8b8", "html_url": "https://github.com/rust-lang/rust/commit/f6682280f3e3e8923c283df8277964b6cbf8d8b8"}], "stats": {"total": 16, "additions": 1, "deletions": 15}, "files": [{"sha": "5f163d106a8381c07ed6d8c8cc4aed8ccf9838a2", "filename": "src/comp/middle/trans.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/04a0a6fbef0cc7c3c89fbbbeff68ab2c999d9592/src%2Fcomp%2Fmiddle%2Ftrans.rs", "raw_url": "https://github.com/rust-lang/rust/raw/04a0a6fbef0cc7c3c89fbbbeff68ab2c999d9592/src%2Fcomp%2Fmiddle%2Ftrans.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Ftrans.rs?ref=04a0a6fbef0cc7c3c89fbbbeff68ab2c999d9592", "patch": "@@ -1144,8 +1144,6 @@ fn linearize_ty_params(@block_ctxt cx, @ty.t t)\n             }\n             ret t;\n         }\n-\n-        fn fold_tag_ty(@ty.t t) -> @ty.t { ret t; }\n     }\n \n "}, {"sha": "c85892f2a9016c053b3f4e28e028781cd16dbdbd", "filename": "src/comp/middle/ty.rs", "status": "modified", "additions": 1, "deletions": 9, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/04a0a6fbef0cc7c3c89fbbbeff68ab2c999d9592/src%2Fcomp%2Fmiddle%2Fty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/04a0a6fbef0cc7c3c89fbbbeff68ab2c999d9592/src%2Fcomp%2Fmiddle%2Fty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Fty.rs?ref=04a0a6fbef0cc7c3c89fbbbeff68ab2c999d9592", "patch": "@@ -294,7 +294,6 @@ fn ty_to_str(&@t typ) -> str {\n \n type ty_fold = state obj {\n     fn fold_simple_ty(@t ty) -> @t;\n-    fn fold_tag_ty(@t ty) -> @t;\n };\n \n fn fold_ty(ty_fold fld, @t ty) -> @t {\n@@ -323,8 +322,7 @@ fn fold_ty(ty_fold fld, @t ty) -> @t {\n             for (@t subty in subtys) {\n                 new_subtys += vec(fold_ty(fld, subty));\n             }\n-            auto typ = rewrap(ty, ty_tag(tid, new_subtys));\n-            ret fld.fold_tag_ty(typ);\n+            ret rewrap(ty, ty_tag(tid, new_subtys));\n         }\n         case (ty_tup(?subtys)) {\n             let vec[@t] new_subtys = vec();\n@@ -613,8 +611,6 @@ fn count_ty_params(@t ty) -> uint {\n             }\n             ret ty;\n         }\n-\n-        fn fold_tag_ty(@t ty) -> @t { ret ty; }\n     }\n \n     let vec[ast.def_id] param_ids_inner = vec();\n@@ -1433,8 +1429,6 @@ fn unify(@ty.t expected, @ty.t actual, &unify_handler handler)\n                     }\n                 }\n             }\n-\n-            fn fold_tag_ty(@t typ) -> @t { ret typ; }\n         }\n \n         ret ty.fold_ty(folder(bindings), typ);\n@@ -1554,8 +1548,6 @@ fn replace_type_params(@t typ, hashmap[ast.def_id,@t] param_map) -> @t {\n                 }\n             }\n         }\n-\n-        fn fold_tag_ty(@t typ) -> @t { ret typ; }\n     }\n     auto replacer = param_replacer(param_map);\n     ret fold_ty(replacer, typ);"}, {"sha": "f8f7fc72719c26f92b50a881db07c0ad25e67678", "filename": "src/comp/middle/typeck.rs", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/04a0a6fbef0cc7c3c89fbbbeff68ab2c999d9592/src%2Fcomp%2Fmiddle%2Ftypeck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/04a0a6fbef0cc7c3c89fbbbeff68ab2c999d9592/src%2Fcomp%2Fmiddle%2Ftypeck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Ftypeck.rs?ref=04a0a6fbef0cc7c3c89fbbbeff68ab2c999d9592", "patch": "@@ -73,8 +73,6 @@ fn generalize_ty(@crate_ctxt cx, @ty.t t) -> @ty.t {\n             }\n             ret t;\n         }\n-\n-        fn fold_tag_ty(@ty.t t) -> @ty.t { ret t; }\n     }\n \n     auto generalizer = ty_generalizer(cx, @common.new_def_hash[@ty.t]());\n@@ -116,8 +114,6 @@ fn substitute_ty_params(&@crate_ctxt ccx,\n                 case (_) { ret typ; }\n             }\n         }\n-\n-        fn fold_tag_ty(@ty.t typ) -> @ty.t { ret typ; }\n     }\n \n     fn hash_int(&int x) -> uint { ret x as uint; }"}]}