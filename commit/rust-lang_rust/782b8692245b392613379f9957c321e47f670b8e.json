{"sha": "782b8692245b392613379f9957c321e47f670b8e", "node_id": "C_kwDOAAsO6NoAKDc4MmI4NjkyMjQ1YjM5MjYxMzM3OWY5OTU3YzMyMWU0N2Y2NzBiOGU", "commit": {"author": {"name": "Neven Villani", "email": "vanille@crans.org", "date": "2023-03-16T13:52:17Z"}, "committer": {"name": "Neven Villani", "email": "vanille@crans.org", "date": "2023-03-16T13:56:18Z"}, "message": "TB: select tests to run both TB and SB", "tree": {"sha": "2335d716322806be92d52eeade9da6a51bfe7900", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2335d716322806be92d52eeade9da6a51bfe7900"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/782b8692245b392613379f9957c321e47f670b8e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/782b8692245b392613379f9957c321e47f670b8e", "html_url": "https://github.com/rust-lang/rust/commit/782b8692245b392613379f9957c321e47f670b8e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/782b8692245b392613379f9957c321e47f670b8e/comments", "author": {"login": "Vanille-N", "id": 58042063, "node_id": "MDQ6VXNlcjU4MDQyMDYz", "avatar_url": "https://avatars.githubusercontent.com/u/58042063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Vanille-N", "html_url": "https://github.com/Vanille-N", "followers_url": "https://api.github.com/users/Vanille-N/followers", "following_url": "https://api.github.com/users/Vanille-N/following{/other_user}", "gists_url": "https://api.github.com/users/Vanille-N/gists{/gist_id}", "starred_url": "https://api.github.com/users/Vanille-N/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Vanille-N/subscriptions", "organizations_url": "https://api.github.com/users/Vanille-N/orgs", "repos_url": "https://api.github.com/users/Vanille-N/repos", "events_url": "https://api.github.com/users/Vanille-N/events{/privacy}", "received_events_url": "https://api.github.com/users/Vanille-N/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Vanille-N", "id": 58042063, "node_id": "MDQ6VXNlcjU4MDQyMDYz", "avatar_url": "https://avatars.githubusercontent.com/u/58042063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Vanille-N", "html_url": "https://github.com/Vanille-N", "followers_url": "https://api.github.com/users/Vanille-N/followers", "following_url": "https://api.github.com/users/Vanille-N/following{/other_user}", "gists_url": "https://api.github.com/users/Vanille-N/gists{/gist_id}", "starred_url": "https://api.github.com/users/Vanille-N/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Vanille-N/subscriptions", "organizations_url": "https://api.github.com/users/Vanille-N/orgs", "repos_url": "https://api.github.com/users/Vanille-N/repos", "events_url": "https://api.github.com/users/Vanille-N/events{/privacy}", "received_events_url": "https://api.github.com/users/Vanille-N/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e243206ae3cbf999c9f590d42f2262b49c2f053e", "url": "https://api.github.com/repos/rust-lang/rust/commits/e243206ae3cbf999c9f590d42f2262b49c2f053e", "html_url": "https://github.com/rust-lang/rust/commit/e243206ae3cbf999c9f590d42f2262b49c2f053e"}], "stats": {"total": 121, "additions": 116, "deletions": 5}, "files": [{"sha": "21eaeabe6ad8f6f8dfb75e7e94bad0f00e551302", "filename": "src/tools/miri/tests/compiletest.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fcompiletest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fcompiletest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fcompiletest.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -139,8 +139,9 @@ regexes! {\n     STDOUT:\n     // Windows file paths\n     r\"\\\\\"                           => \"/\",\n-    // erase Stacked Borrows tags\n+    // erase borrow tags\n     \"<[0-9]+>\"                      => \"<TAG>\",\n+    \"<[0-9]+=\"                      => \"<TAG=\",\n }\n \n regexes! {\n@@ -149,8 +150,9 @@ regexes! {\n     r\"\\.rs:[0-9]+:[0-9]+(: [0-9]+:[0-9]+)?\" => \".rs:LL:CC\",\n     // erase alloc ids\n     \"alloc[0-9]+\"                    => \"ALLOC\",\n-    // erase Stacked Borrows tags\n+    // erase borrow tags\n     \"<[0-9]+>\"                       => \"<TAG>\",\n+    \"<[0-9]+=\"                       => \"<TAG=\",\n     // erase whitespace that differs between platforms\n     r\" +at (.*\\.rs)\"                 => \" at $1\",\n     // erase generics in backtraces"}, {"sha": "0637e08af9bebe678df9163a94133cd466d6fc6c", "filename": "src/tools/miri/tests/fail/stacked_borrows/retag_data_race_read.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Ffail%2Fstacked_borrows%2Fretag_data_race_read.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Ffail%2Fstacked_borrows%2Fretag_data_race_read.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Ffail%2Fstacked_borrows%2Fretag_data_race_read.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,4 +1,4 @@\n-//! Make sure that a retag acts like a write for the data race model.\n+//! Make sure that a retag acts like a read for the data race model.\n //@compile-flags: -Zmiri-preemption-rate=0\n #[derive(Copy, Clone)]\n struct SendPtr(*mut u8);"}, {"sha": "cbf41d68b57424ba5ad80fde675e73d7148f4687", "filename": "src/tools/miri/tests/pass/adjacent-allocs.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fadjacent-allocs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fadjacent-allocs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fadjacent-allocs.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n //@compile-flags: -Zmiri-permissive-provenance\n \n fn ensure_allocs_can_be_adjacent() {"}, {"sha": "331fbfcefde15919f2eec770c0828649b6ee1269", "filename": "src/tools/miri/tests/pass/associated-const.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fassociated-const.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fassociated-const.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fassociated-const.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n trait Foo {\n     const ID: i32;\n }"}, {"sha": "662b90150886dcac26fde211802226bfc64fa9b5", "filename": "src/tools/miri/tests/pass/assume_bug.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fassume_bug.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fassume_bug.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fassume_bug.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n fn main() {\n     vec![()].into_iter();\n }"}, {"sha": "60b8ff87b59e31b1b420733cfcc457ce9afa9f88", "filename": "src/tools/miri/tests/pass/atomic.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fatomic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fatomic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fatomic.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n //@compile-flags: -Zmiri-strict-provenance\n #![feature(strict_provenance, strict_provenance_atomic_ptr)]\n use std::sync::atomic::{"}, {"sha": "77fb78424ba2dadd6e13525a2554e5cc29bafdda", "filename": "src/tools/miri/tests/pass/available-parallelism.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Favailable-parallelism.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Favailable-parallelism.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Favailable-parallelism.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n fn main() {\n     assert_eq!(std::thread::available_parallelism().unwrap().get(), 1);\n }"}, {"sha": "155e3d74ab9c13e6258196f82facf934674c4e8f", "filename": "src/tools/miri/tests/pass/box-custom-alloc.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fbox-custom-alloc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fbox-custom-alloc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fbox-custom-alloc.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n #![allow(incomplete_features)] // for trait upcasting\n #![feature(allocator_api, trait_upcasting)]\n "}, {"sha": "3bb481aab888ac6c37f6900cb2173e9918157525", "filename": "src/tools/miri/tests/pass/box.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fbox.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fbox.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fbox.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows -Zmiri-permissive-provenance\n #![feature(ptr_internals)]\n \n fn main() {"}, {"sha": "4c2fb40e1102179641d96233433afc38aedb4b8b", "filename": "src/tools/miri/tests/pass/box.stack.stderr", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fbox.stack.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fbox.stack.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fbox.stack.stderr?ref=782b8692245b392613379f9957c321e47f670b8e", "previous_filename": "src/tools/miri/tests/pass/box.stderr"}, {"sha": "230ef368da64494e27dc048cf97e96fa24b00da9", "filename": "src/tools/miri/tests/pass/box.stack.stdout", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fbox.stack.stdout", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fbox.stack.stdout", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fbox.stack.stdout?ref=782b8692245b392613379f9957c321e47f670b8e", "previous_filename": "src/tools/miri/tests/pass/box.stdout"}, {"sha": "230ef368da64494e27dc048cf97e96fa24b00da9", "filename": "src/tools/miri/tests/pass/box.tree.stdout", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fbox.tree.stdout", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fbox.tree.stdout", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fbox.tree.stdout?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -0,0 +1,3 @@\n+pair_foo = PairFoo { fst: Foo(42), snd: Foo(1337) }\n+foo #0 = Foo(42)\n+foo #1 = Foo(1337)"}, {"sha": "b7c0406becc4dd590b13031418c5d0b445800142", "filename": "src/tools/miri/tests/pass/btreemap.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fbtreemap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fbtreemap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fbtreemap.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n //@compile-flags: -Zmiri-strict-provenance\n #![feature(btree_drain_filter)]\n use std::collections::{BTreeMap, BTreeSet};"}, {"sha": "ccf96b9967202c085c31a3ee7042ed17d03e5d20", "filename": "src/tools/miri/tests/pass/cast-rfc0401-vtable-kinds.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fcast-rfc0401-vtable-kinds.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fcast-rfc0401-vtable-kinds.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fcast-rfc0401-vtable-kinds.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n // Check that you can cast between different pointers to trait objects\n // whose vtable have the same kind (both lengths, or both trait pointers).\n "}, {"sha": "43086756b035f40fc44e288f777b6423dd9fc02a", "filename": "src/tools/miri/tests/pass/concurrency/channels.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fconcurrency%2Fchannels.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fconcurrency%2Fchannels.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fconcurrency%2Fchannels.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n //@compile-flags: -Zmiri-strict-provenance\n \n use std::sync::mpsc::{channel, sync_channel};"}, {"sha": "3bd1e542407056e48605fa55a4ebe6d99fa12802", "filename": "src/tools/miri/tests/pass/concurrency/sync.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fconcurrency%2Fsync.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fconcurrency%2Fsync.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fconcurrency%2Fsync.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n //@compile-flags: -Zmiri-disable-isolation -Zmiri-strict-provenance\n \n use std::sync::{Arc, Barrier, Condvar, Mutex, Once, RwLock};"}, {"sha": "f2c036a1735eda7186df3a4b5249b8fc8abe5896", "filename": "src/tools/miri/tests/pass/concurrency/sync.stack.stdout", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fconcurrency%2Fsync.stack.stdout", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fconcurrency%2Fsync.stack.stdout", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fconcurrency%2Fsync.stack.stdout?ref=782b8692245b392613379f9957c321e47f670b8e", "previous_filename": "src/tools/miri/tests/pass/concurrency/sync.stdout"}, {"sha": "f2c036a1735eda7186df3a4b5249b8fc8abe5896", "filename": "src/tools/miri/tests/pass/concurrency/sync.tree.stdout", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fconcurrency%2Fsync.tree.stdout", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fconcurrency%2Fsync.tree.stdout", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fconcurrency%2Fsync.tree.stdout?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -0,0 +1,20 @@\n+before wait\n+before wait\n+before wait\n+before wait\n+before wait\n+before wait\n+before wait\n+before wait\n+before wait\n+before wait\n+after wait\n+after wait\n+after wait\n+after wait\n+after wait\n+after wait\n+after wait\n+after wait\n+after wait\n+after wait"}, {"sha": "13c11b55775ced421a3e1ff7058e3bd39f4a4364", "filename": "src/tools/miri/tests/pass/concurrency/thread_locals.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fconcurrency%2Fthread_locals.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fconcurrency%2Fthread_locals.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fconcurrency%2Fthread_locals.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n //@compile-flags: -Zmiri-strict-provenance\n \n //! The main purpose of this test is to check that if we take a pointer to"}, {"sha": "bd06eec9cd5411ce0ba92cffb2d99c62b91e7f17", "filename": "src/tools/miri/tests/pass/concurrency/tls_lib_drop.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fconcurrency%2Ftls_lib_drop.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fconcurrency%2Ftls_lib_drop.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fconcurrency%2Ftls_lib_drop.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,6 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n+\n use std::cell::RefCell;\n use std::thread;\n "}, {"sha": "b7877820a0ca9760b42136ff92decd1fa7fd57db", "filename": "src/tools/miri/tests/pass/concurrency/tls_lib_drop.stack.stdout", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fconcurrency%2Ftls_lib_drop.stack.stdout", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fconcurrency%2Ftls_lib_drop.stack.stdout", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fconcurrency%2Ftls_lib_drop.stack.stdout?ref=782b8692245b392613379f9957c321e47f670b8e", "previous_filename": "src/tools/miri/tests/pass/concurrency/tls_lib_drop.stdout"}, {"sha": "b7877820a0ca9760b42136ff92decd1fa7fd57db", "filename": "src/tools/miri/tests/pass/concurrency/tls_lib_drop.tree.stdout", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fconcurrency%2Ftls_lib_drop.tree.stdout", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fconcurrency%2Ftls_lib_drop.tree.stdout", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fconcurrency%2Ftls_lib_drop.tree.stdout?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -0,0 +1,5 @@\n+Dropping: 8 (should be before 'Continue main 1').\n+Dropping: 8 (should be before 'Continue main 1').\n+Continue main 1.\n+Joining: 7 (should be before 'Continue main 2').\n+Continue main 2."}, {"sha": "fdcacc6cea41cebc9fbe04ac5f344c4207110ee5", "filename": "src/tools/miri/tests/pass/disable-alignment-check.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fdisable-alignment-check.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fdisable-alignment-check.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fdisable-alignment-check.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n //@compile-flags: -Zmiri-disable-alignment-check\n \n fn main() {"}, {"sha": "94cf465e884d1e135bd98e448247f963af6e723f", "filename": "src/tools/miri/tests/pass/dyn-arbitrary-self.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fdyn-arbitrary-self.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fdyn-arbitrary-self.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fdyn-arbitrary-self.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n #![feature(arbitrary_self_types, unsize, coerce_unsized, dispatch_from_dyn)]\n #![feature(rustc_attrs)]\n "}, {"sha": "7ac93577f0cd5887cb593ff5ef808a39dbb6d97d", "filename": "src/tools/miri/tests/pass/extern_types.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fextern_types.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fextern_types.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fextern_types.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows -Zmiri-permissive-provenance\n #![feature(extern_types)]\n \n extern \"C\" {"}, {"sha": "2e18f69305896f27c73293a8e5b262851c3ab35f", "filename": "src/tools/miri/tests/pass/extern_types.stack.stderr", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fextern_types.stack.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fextern_types.stack.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fextern_types.stack.stderr?ref=782b8692245b392613379f9957c321e47f670b8e", "previous_filename": "src/tools/miri/tests/pass/extern_types.stderr"}, {"sha": "763eceeb6f0f7d382a4b83d871eed854d33551e7", "filename": "src/tools/miri/tests/pass/future-self-referential.rs", "status": "renamed", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Ffuture-self-referential.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Ffuture-self-referential.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Ffuture-self-referential.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,6 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n+\n use std::future::*;\n use std::marker::PhantomPinned;\n use std::pin::*;", "previous_filename": "src/tools/miri/tests/pass/stacked-borrows/future-self-referential.rs"}, {"sha": "e059c7114e395bc69e5c1ab0f754f71cd83268fc", "filename": "src/tools/miri/tests/pass/generator.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fgenerator.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fgenerator.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fgenerator.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n #![feature(generators, generator_trait, never_type)]\n \n use std::fmt::Debug;"}, {"sha": "7224e357c6f856e04111a55be3a0a176d7b5580b", "filename": "src/tools/miri/tests/pass/hashmap.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fhashmap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fhashmap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fhashmap.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n use std::collections::HashMap;\n use std::hash::BuildHasher;\n "}, {"sha": "42b6f433420b6a9c4e32cea557618aabaa333b5e", "filename": "src/tools/miri/tests/pass/intptrcast.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fintptrcast.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fintptrcast.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fintptrcast.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n //@compile-flags: -Zmiri-permissive-provenance\n \n use std::mem;"}, {"sha": "36df30070cb50952a07fe03a937ce79ef4e50ebc", "filename": "src/tools/miri/tests/pass/linked-list.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Flinked-list.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Flinked-list.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Flinked-list.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n #![feature(linked_list_cursors)]\n use std::collections::LinkedList;\n "}, {"sha": "aa960aa147abe76df31708108c7d8f0b75c8de96", "filename": "src/tools/miri/tests/pass/many_shr_bor.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fmany_shr_bor.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fmany_shr_bor.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fmany_shr_bor.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n // Make sure validation can handle many overlapping shared borrows for different parts of a data structure\n use std::cell::RefCell;\n "}, {"sha": "bba3207ee4cf1ef57de7d2848568a4c45d383105", "filename": "src/tools/miri/tests/pass/memleak_ignored.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fmemleak_ignored.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fmemleak_ignored.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fmemleak_ignored.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n //@compile-flags: -Zmiri-ignore-leaks\n \n fn main() {"}, {"sha": "0ba6607a5d442ff640f9608efd7125f4958fd17b", "filename": "src/tools/miri/tests/pass/option_box_transmute_ptr.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Foption_box_transmute_ptr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Foption_box_transmute_ptr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Foption_box_transmute_ptr.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n // This tests that the size of Option<Box<i32>> is the same as *const i32.\n fn option_box_deref() -> i32 {\n     let val = Some(Box::new(42));"}, {"sha": "1525ded6151e83d9774d49c5f6efbbaefb10d13a", "filename": "src/tools/miri/tests/pass/pointers.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fpointers.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fpointers.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fpointers.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n //@compile-flags: -Zmiri-permissive-provenance\n #![feature(ptr_metadata, const_raw_ptr_comparison)]\n "}, {"sha": "835daa36cfc04d90c3ba336f031284ace3ebcd89", "filename": "src/tools/miri/tests/pass/provenance.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fprovenance.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fprovenance.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fprovenance.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n #![feature(strict_provenance)]\n #![feature(pointer_byte_offsets)]\n use std::{mem, ptr};"}, {"sha": "a2fcd098107a675b5d8680ef47321f35a9878f76", "filename": "src/tools/miri/tests/pass/ptr_int_casts.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fptr_int_casts.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fptr_int_casts.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fptr_int_casts.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n //@compile-flags: -Zmiri-permissive-provenance\n use std::mem;\n use std::ptr;"}, {"sha": "35a52d0220b819e1b1d80c2427b1794a3f27deb2", "filename": "src/tools/miri/tests/pass/ptr_int_from_exposed.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fptr_int_from_exposed.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fptr_int_from_exposed.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fptr_int_from_exposed.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n //@compile-flags: -Zmiri-permissive-provenance\n #![feature(strict_provenance)]\n "}, {"sha": "d99c25413e640d92f84ac3de08ea0331d51b87ec", "filename": "src/tools/miri/tests/pass/ptr_int_transmute.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fptr_int_transmute.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fptr_int_transmute.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fptr_int_transmute.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n // Test what happens when we read parts of a pointer.\n // Related to <https://github.com/rust-lang/rust/issues/69488>.\n fn ptr_partial_read() {"}, {"sha": "6375abcd2328694e9aa35cdadc6026b12135c9ab", "filename": "src/tools/miri/tests/pass/rc.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Frc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Frc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Frc.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n //@compile-flags: -Zmiri-strict-provenance\n #![feature(new_uninit)]\n #![feature(get_mut_unchecked)]"}, {"sha": "458312508d2ec1cdf13cffb833441c729f353d3f", "filename": "src/tools/miri/tests/pass/send-is-not-static-par-for.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fsend-is-not-static-par-for.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fsend-is-not-static-par-for.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fsend-is-not-static-par-for.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n use std::sync::Mutex;\n \n fn par_for<I, F>(iter: I, f: F)"}, {"sha": "a99e921150b310d3405a1e4fc6d8f54ac4401ddb", "filename": "src/tools/miri/tests/pass/slices.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fslices.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fslices.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fslices.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n //@compile-flags: -Zmiri-strict-provenance\n #![feature(new_uninit)]\n #![feature(slice_as_chunks)]"}, {"sha": "74761a89cb94a4b4937014b1c36c981dd22bd202", "filename": "src/tools/miri/tests/pass/stacked-borrows/stack-printing.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fstacked-borrows%2Fstack-printing.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fstacked-borrows%2Fstack-printing.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fstacked-borrows%2Fstack-printing.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -7,15 +7,17 @@ use std::{\n \n extern \"Rust\" {\n     fn miri_get_alloc_id(ptr: *const u8) -> u64;\n-    fn miri_print_borrow_stacks(alloc_id: u64);\n+    fn miri_print_borrow_state(alloc_id: u64, show_unnamed: bool);\n }\n \n fn get_alloc_id(ptr: *const u8) -> u64 {\n     unsafe { miri_get_alloc_id(ptr) }\n }\n \n fn print_borrow_stacks(alloc_id: u64) {\n-    unsafe { miri_print_borrow_stacks(alloc_id) }\n+    unsafe {\n+        miri_print_borrow_state(alloc_id, /* ignored: show_unnamed */ false)\n+    }\n }\n \n fn main() {"}, {"sha": "d48998561948707ce0954e7bdb735539d14b3976", "filename": "src/tools/miri/tests/pass/threadleak_ignored.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fthreadleak_ignored.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fthreadleak_ignored.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fthreadleak_ignored.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n //@compile-flags: -Zmiri-ignore-leaks\n \n //! Test that leaking threads works, and that their destructors are not executed."}, {"sha": "7557f49c7584b93e56e57c3fbf20be12f7b96748", "filename": "src/tools/miri/tests/pass/threadleak_ignored.stack.stderr", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fthreadleak_ignored.stack.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fthreadleak_ignored.stack.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fthreadleak_ignored.stack.stderr?ref=782b8692245b392613379f9957c321e47f670b8e", "previous_filename": "src/tools/miri/tests/pass/threadleak_ignored.stderr"}, {"sha": "7557f49c7584b93e56e57c3fbf20be12f7b96748", "filename": "src/tools/miri/tests/pass/threadleak_ignored.tree.stderr", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fthreadleak_ignored.tree.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fthreadleak_ignored.tree.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fthreadleak_ignored.tree.stderr?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -0,0 +1 @@\n+Dropping 0"}, {"sha": "ce6d86b7068a0a33d0f7dc599bb807766593b1c4", "filename": "src/tools/miri/tests/pass/transmute_ptr.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Ftransmute_ptr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Ftransmute_ptr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Ftransmute_ptr.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n #![feature(strict_provenance)]\n use std::{mem, ptr};\n "}, {"sha": "c9046dc3c761bf2e1590e37f053428f9c4908024", "filename": "src/tools/miri/tests/pass/unsized.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Funsized.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Funsized.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Funsized.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n #![feature(unsized_tuple_coercion)]\n #![feature(unsized_fn_params)]\n "}, {"sha": "06ec2f991722a74fd68781794fafd18622e3c164", "filename": "src/tools/miri/tests/pass/vec.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fvec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fvec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fvec.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n //@compile-flags: -Zmiri-strict-provenance\n #![feature(iter_advance_by, iter_next_chunk)]\n "}, {"sha": "dfbf9bb83c1d3e6b05e2e6f1296850b75c0421fa", "filename": "src/tools/miri/tests/pass/vecdeque.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fvecdeque.rs", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fvecdeque.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fvecdeque.rs?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -1,3 +1,5 @@\n+//@revisions: stack tree\n+//@[tree]compile-flags: -Zmiri-tree-borrows\n //@compile-flags: -Zmiri-strict-provenance\n use std::collections::VecDeque;\n "}, {"sha": "63de960ee2bdf1815fbcffdc5c49726f44021081", "filename": "src/tools/miri/tests/pass/vecdeque.stack.stdout", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fvecdeque.stack.stdout", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fvecdeque.stack.stdout", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fvecdeque.stack.stdout?ref=782b8692245b392613379f9957c321e47f670b8e", "previous_filename": "src/tools/miri/tests/pass/vecdeque.stdout"}, {"sha": "63de960ee2bdf1815fbcffdc5c49726f44021081", "filename": "src/tools/miri/tests/pass/vecdeque.tree.stdout", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fvecdeque.tree.stdout", "raw_url": "https://github.com/rust-lang/rust/raw/782b8692245b392613379f9957c321e47f670b8e/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fvecdeque.tree.stdout", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Fpass%2Fvecdeque.tree.stdout?ref=782b8692245b392613379f9957c321e47f670b8e", "patch": "@@ -0,0 +1,2 @@\n+[2, 2] Iter([2, 2], [])\n+Iter([], [])"}]}