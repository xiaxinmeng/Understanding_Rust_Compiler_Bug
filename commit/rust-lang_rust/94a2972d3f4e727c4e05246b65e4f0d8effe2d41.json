{"sha": "94a2972d3f4e727c4e05246b65e4f0d8effe2d41", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk0YTI5NzJkM2Y0ZTcyN2M0ZTA1MjQ2YjY1ZTRmMGQ4ZWZmZTJkNDE=", "commit": {"author": {"name": "Felix S. Klock II", "email": "pnkfelix@pnkfx.org", "date": "2018-07-26T12:49:02Z"}, "committer": {"name": "Felix S. Klock II", "email": "pnkfelix@pnkfx.org", "date": "2018-07-26T12:51:36Z"}, "message": "compiletest: Add support for ignoring certain tests under `--compare-mode=...`", "tree": {"sha": "a806a547bb1e8aeae59071ac50997b41925836fe", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a806a547bb1e8aeae59071ac50997b41925836fe"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/94a2972d3f4e727c4e05246b65e4f0d8effe2d41", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/94a2972d3f4e727c4e05246b65e4f0d8effe2d41", "html_url": "https://github.com/rust-lang/rust/commit/94a2972d3f4e727c4e05246b65e4f0d8effe2d41", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/94a2972d3f4e727c4e05246b65e4f0d8effe2d41/comments", "author": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4b2e553dac205609277607b3a192cc7fc905fc2c", "url": "https://api.github.com/repos/rust-lang/rust/commits/4b2e553dac205609277607b3a192cc7fc905fc2c", "html_url": "https://github.com/rust-lang/rust/commit/4b2e553dac205609277607b3a192cc7fc905fc2c"}], "stats": {"total": 9, "additions": 7, "deletions": 2}, "files": [{"sha": "e9b853722c2d3b86213c04a4d0604a229ac7ccc4", "filename": "src/tools/compiletest/src/header.rs", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/94a2972d3f4e727c4e05246b65e4f0d8effe2d41/src%2Ftools%2Fcompiletest%2Fsrc%2Fheader.rs", "raw_url": "https://github.com/rust-lang/rust/raw/94a2972d3f4e727c4e05246b65e4f0d8effe2d41/src%2Ftools%2Fcompiletest%2Fsrc%2Fheader.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fheader.rs?ref=94a2972d3f4e727c4e05246b65e4f0d8effe2d41", "patch": "@@ -14,7 +14,7 @@ use std::io::prelude::*;\n use std::io::BufReader;\n use std::path::{Path, PathBuf};\n \n-use common::{self, Config, Mode};\n+use common::{self, CompareMode, Config, Mode};\n use util;\n \n use extract_gdb_version;\n@@ -608,7 +608,12 @@ impl Config {\n                     common::DebugInfoLldb => name == \"lldb\",\n                     common::Pretty => name == \"pretty\",\n                     _ => false,\n-                } || (self.target != self.host && name == \"cross-compile\")\n+                } || (self.target != self.host && name == \"cross-compile\") ||\n+                match self.compare_mode {\n+                    Some(CompareMode::Nll) => name == \"compare-mode-nll\",\n+                    Some(CompareMode::Polonius) => name == \"compare-mode-polonius\",\n+                    None => false,\n+                }\n         } else {\n             false\n         }"}]}