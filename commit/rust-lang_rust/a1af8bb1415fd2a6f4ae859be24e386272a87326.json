{"sha": "a1af8bb1415fd2a6f4ae859be24e386272a87326", "node_id": "C_kwDOAAsO6NoAKGExYWY4YmIxNDE1ZmQyYTZmNGFlODU5YmUyNGUzODYyNzJhODczMjY", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-04-11T15:03:24Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-04-11T15:03:24Z"}, "message": "Auto merge of #14548 - Veykril:smol-str, r=Veykril\n\nminor: Bump smol-str", "tree": {"sha": "99168dd43ed11ff0652de27d0b0390c196bf8676", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/99168dd43ed11ff0652de27d0b0390c196bf8676"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a1af8bb1415fd2a6f4ae859be24e386272a87326", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a1af8bb1415fd2a6f4ae859be24e386272a87326", "html_url": "https://github.com/rust-lang/rust/commit/a1af8bb1415fd2a6f4ae859be24e386272a87326", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a1af8bb1415fd2a6f4ae859be24e386272a87326/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7afd2048f0d0286cfcda0c49f5fa6ab592875769", "url": "https://api.github.com/repos/rust-lang/rust/commits/7afd2048f0d0286cfcda0c49f5fa6ab592875769", "html_url": "https://github.com/rust-lang/rust/commit/7afd2048f0d0286cfcda0c49f5fa6ab592875769"}, {"sha": "1456b53051f1a19ccefc95a589b4f4a1eca67be9", "url": "https://api.github.com/repos/rust-lang/rust/commits/1456b53051f1a19ccefc95a589b4f4a1eca67be9", "html_url": "https://github.com/rust-lang/rust/commit/1456b53051f1a19ccefc95a589b4f4a1eca67be9"}], "stats": {"total": 20, "additions": 14, "deletions": 6}, "files": [{"sha": "9d082215e85cbffc72b725767bad6531cbcc29da", "filename": "Cargo.lock", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a1af8bb1415fd2a6f4ae859be24e386272a87326/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/a1af8bb1415fd2a6f4ae859be24e386272a87326/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=a1af8bb1415fd2a6f4ae859be24e386272a87326", "patch": "@@ -1642,9 +1642,9 @@ checksum = \"a507befe795404456341dfab10cef66ead4c041f62b8b11bbb92bffe5d0953e0\"\n \n [[package]]\n name = \"smol_str\"\n-version = \"0.1.25\"\n+version = \"0.2.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"9d268d24892b932cac466d214af6ec8a3ec99873f0f8664d9a384b49596db682\"\n+checksum = \"74212e6bbe9a4352329b2f68ba3130c15a3f26fe88ff22dbdc6cdd58fa85e99c\"\n dependencies = [\n  \"serde\",\n ]"}, {"sha": "985a1844c734eeabbe92e81635d39785615932c4", "filename": "Cargo.toml", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a1af8bb1415fd2a6f4ae859be24e386272a87326/Cargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/a1af8bb1415fd2a6f4ae859be24e386272a87326/Cargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.toml?ref=a1af8bb1415fd2a6f4ae859be24e386272a87326", "patch": "@@ -77,6 +77,7 @@ vfs = { path = \"./crates/vfs\", version = \"0.0.0\" }\n \n # non-local crates\n smallvec = { version = \"1.10.0\", features = [\"const_new\", \"union\", \"const_generics\"] }\n+smol_str = \"0.2.0\"\n # the following crates are pinned to prevent us from pulling in syn 2 until all our dependencies have moved\n serde = { version = \"=1.0.156\", features = [\"derive\"] }\n serde_json = \"1.0.94\""}, {"sha": "c525e0c80764c0577b14c5782946d245a9b45b20", "filename": "crates/ide-completion/src/completions/env_vars.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a1af8bb1415fd2a6f4ae859be24e386272a87326/crates%2Fide-completion%2Fsrc%2Fcompletions%2Fenv_vars.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a1af8bb1415fd2a6f4ae859be24e386272a87326/crates%2Fide-completion%2Fsrc%2Fcompletions%2Fenv_vars.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide-completion%2Fsrc%2Fcompletions%2Fenv_vars.rs?ref=a1af8bb1415fd2a6f4ae859be24e386272a87326", "patch": "@@ -37,9 +37,9 @@ pub(crate) fn complete_cargo_env_vars(\n     guard_env_macro(expanded, &ctx.sema)?;\n     let range = expanded.text_range_between_quotes()?;\n \n-    CARGO_DEFINED_VARS.iter().for_each(|(var, detail)| {\n+    CARGO_DEFINED_VARS.into_iter().for_each(|&(var, detail)| {\n         let mut item = CompletionItem::new(CompletionItemKind::Keyword, range, var);\n-        item.detail(*detail);\n+        item.detail(detail);\n         item.add_to(acc);\n     });\n "}, {"sha": "9109507f75e4585c9639d93e3889b57927840e0e", "filename": "crates/syntax/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a1af8bb1415fd2a6f4ae859be24e386272a87326/crates%2Fsyntax%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/a1af8bb1415fd2a6f4ae859be24e386272a87326/crates%2Fsyntax%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2FCargo.toml?ref=a1af8bb1415fd2a6f4ae859be24e386272a87326", "patch": "@@ -21,7 +21,7 @@ rustc_lexer = { version = \"727.0.0\", package = \"rustc-ap-rustc_lexer\" }\n rustc-hash = \"1.1.0\"\n once_cell = \"1.17.0\"\n indexmap = \"1.9.1\"\n-smol_str = \"0.1.23\"\n+smol_str.workspace = true\n \n parser.workspace = true\n profile.workspace = true"}, {"sha": "09c080c0c2301d2f02fb444610772a13ad144d65", "filename": "crates/syntax/src/token_text.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/a1af8bb1415fd2a6f4ae859be24e386272a87326/crates%2Fsyntax%2Fsrc%2Ftoken_text.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a1af8bb1415fd2a6f4ae859be24e386272a87326/crates%2Fsyntax%2Fsrc%2Ftoken_text.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Fsrc%2Ftoken_text.rs?ref=a1af8bb1415fd2a6f4ae859be24e386272a87326", "patch": "@@ -3,6 +3,7 @@\n use std::{cmp::Ordering, fmt, ops};\n \n use rowan::GreenToken;\n+use smol_str::SmolStr;\n \n pub struct TokenText<'a>(pub(crate) Repr<'a>);\n \n@@ -47,6 +48,12 @@ impl From<TokenText<'_>> for String {\n     }\n }\n \n+impl From<TokenText<'_>> for SmolStr {\n+    fn from(token_text: TokenText<'_>) -> Self {\n+        SmolStr::new(token_text.as_str())\n+    }\n+}\n+\n impl PartialEq<&'_ str> for TokenText<'_> {\n     fn eq(&self, other: &&str) -> bool {\n         self.as_str() == *other"}, {"sha": "a28ee5f1ca2bbcee5b85c1bd434f14daf1f76f8b", "filename": "crates/tt/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a1af8bb1415fd2a6f4ae859be24e386272a87326/crates%2Ftt%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/a1af8bb1415fd2a6f4ae859be24e386272a87326/crates%2Ftt%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Ftt%2FCargo.toml?ref=a1af8bb1415fd2a6f4ae859be24e386272a87326", "patch": "@@ -12,6 +12,6 @@ rust-version.workspace = true\n doctest = false\n \n [dependencies]\n-smol_str = \"0.1.23\"\n+smol_str.workspace = true\n \n stdx.workspace = true"}]}