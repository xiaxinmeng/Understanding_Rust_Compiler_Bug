{"sha": "6cf851f6d43bff1e8ac1421cbf3c6a8d20f89560", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZjZjg1MWY2ZDQzYmZmMWU4YWMxNDIxY2JmM2M2YThkMjBmODk1NjA=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-09-14T18:17:44Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-09-14T18:17:44Z"}, "message": "Auto merge of #1890 - Smittyvb:cargo-miri-short-alias, r=RalfJung\n\nOne character aliases for cargo-miri run/test\n\nThe main `cargo` command supports `cargo r` as an alias for `cargo run`, and `cargo t` as an alias for `cargo test`. This adds support to them in `cargo-miri` for consistency.", "tree": {"sha": "692742cc4e100f95d81c4dad199ced2be9e45fa4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/692742cc4e100f95d81c4dad199ced2be9e45fa4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6cf851f6d43bff1e8ac1421cbf3c6a8d20f89560", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6cf851f6d43bff1e8ac1421cbf3c6a8d20f89560", "html_url": "https://github.com/rust-lang/rust/commit/6cf851f6d43bff1e8ac1421cbf3c6a8d20f89560", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6cf851f6d43bff1e8ac1421cbf3c6a8d20f89560/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "82901dcbb36c852ec45b6d76a4bca93982fe850b", "url": "https://api.github.com/repos/rust-lang/rust/commits/82901dcbb36c852ec45b6d76a4bca93982fe850b", "html_url": "https://github.com/rust-lang/rust/commit/82901dcbb36c852ec45b6d76a4bca93982fe850b"}, {"sha": "4df931405aa754c55a5a48eca116f82ba48f75d1", "url": "https://api.github.com/repos/rust-lang/rust/commits/4df931405aa754c55a5a48eca116f82ba48f75d1", "html_url": "https://github.com/rust-lang/rust/commit/4df931405aa754c55a5a48eca116f82ba48f75d1"}], "stats": {"total": 16, "additions": 8, "deletions": 8}, "files": [{"sha": "21f53a45e41f6815d497006645b9e603b132fa9a", "filename": "cargo-miri/bin.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/6cf851f6d43bff1e8ac1421cbf3c6a8d20f89560/cargo-miri%2Fbin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6cf851f6d43bff1e8ac1421cbf3c6a8d20f89560/cargo-miri%2Fbin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/cargo-miri%2Fbin.rs?ref=6cf851f6d43bff1e8ac1421cbf3c6a8d20f89560", "patch": "@@ -20,8 +20,8 @@ Usage:\n     cargo miri [subcommand] [<cargo options>...] [--] [<program/test suite options>...]\n \n Subcommands:\n-    run                      Run binaries\n-    test                     Run tests\n+    run, r                   Run binaries\n+    test, t                  Run tests\n     setup                    Only perform automatic setup, but without asking questions (for getting a proper libstd)\n \n The cargo options are exactly the same as for `cargo run` and `cargo test`, respectively.\n@@ -524,8 +524,8 @@ fn phase_cargo_miri(mut args: env::Args) {\n     // We cannot know which of those flags take arguments and which do not,\n     // so we cannot detect subcommands later.\n     let subcommand = match args.next().as_deref() {\n-        Some(\"test\") => MiriCommand::Test,\n-        Some(\"run\") => MiriCommand::Run,\n+        Some(\"test\" | \"t\") => MiriCommand::Test,\n+        Some(\"run\" | \"r\") => MiriCommand::Run,\n         Some(\"setup\") => MiriCommand::Setup,\n         // Invalid command.\n         _ =>"}, {"sha": "3bc37b236b3493c0e2f0bc6e6582ad9d1433b193", "filename": "test-cargo-miri/run-test.py", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/6cf851f6d43bff1e8ac1421cbf3c6a8d20f89560/test-cargo-miri%2Frun-test.py", "raw_url": "https://github.com/rust-lang/rust/raw/6cf851f6d43bff1e8ac1421cbf3c6a8d20f89560/test-cargo-miri%2Frun-test.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/test-cargo-miri%2Frun-test.py?ref=6cf851f6d43bff1e8ac1421cbf3c6a8d20f89560", "patch": "@@ -97,8 +97,8 @@ def test_cargo_miri_run():\n         cargo_miri(\"run\") + [\"--bin\", \"cargo-miri-test\", \"--\", \"hello world\", '\"hello world\"'],\n         \"run.args.stdout.ref\", \"run.args.stderr.ref\",\n     )\n-    test(\"`cargo miri run` (subcrate, no ioslation)\",\n-        cargo_miri(\"run\") + [\"-p\", \"subcrate\"],\n+    test(\"`cargo miri r` (subcrate, no isolation)\",\n+        cargo_miri(\"r\") + [\"-p\", \"subcrate\"],\n         \"run.subcrate.stdout.ref\", \"run.subcrate.stderr.ref\",\n         env={'MIRIFLAGS': \"-Zmiri-disable-isolation\"},\n     )\n@@ -141,8 +141,8 @@ def test_cargo_miri_test():\n         cargo_miri(\"test\") + [\"--bin\", \"cargo-miri-test\", \"--\", \"--format=pretty\"],\n         \"test.bin-target.stdout.ref\", \"test.stderr-empty.ref\",\n     )\n-    test(\"`cargo miri test` (subcrate, no isolation)\",\n-        cargo_miri(\"test\") + [\"-p\", \"subcrate\"],\n+    test(\"`cargo miri t` (subcrate, no isolation)\",\n+        cargo_miri(\"t\") + [\"-p\", \"subcrate\"],\n         \"test.subcrate.stdout.ref\", \"test.stderr-proc-macro.ref\",\n         env={'MIRIFLAGS': \"-Zmiri-disable-isolation\"},\n     )"}]}