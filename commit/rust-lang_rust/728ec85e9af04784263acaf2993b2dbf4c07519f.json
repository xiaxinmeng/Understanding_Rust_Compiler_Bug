{"sha": "728ec85e9af04784263acaf2993b2dbf4c07519f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjcyOGVjODVlOWFmMDQ3ODQyNjNhY2FmMjk5M2IyZGJmNGMwNzUxOWY=", "commit": {"author": {"name": "Jorge Aparicio", "email": "japaricious@gmail.com", "date": "2016-12-30T06:34:06Z"}, "committer": {"name": "Jorge Aparicio", "email": "japaricious@gmail.com", "date": "2016-12-31T01:46:19Z"}, "message": "sparc64-linux support", "tree": {"sha": "2dd8bf01faba7ec2f0b084e00c3dc55328d54f19", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2dd8bf01faba7ec2f0b084e00c3dc55328d54f19"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/728ec85e9af04784263acaf2993b2dbf4c07519f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/728ec85e9af04784263acaf2993b2dbf4c07519f", "html_url": "https://github.com/rust-lang/rust/commit/728ec85e9af04784263acaf2993b2dbf4c07519f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/728ec85e9af04784263acaf2993b2dbf4c07519f/comments", "author": null, "committer": null, "parents": [{"sha": "8aef058329ae2d41475cd549ee394a1adf16c067", "url": "https://api.github.com/repos/rust-lang/rust/commits/8aef058329ae2d41475cd549ee394a1adf16c067", "html_url": "https://github.com/rust-lang/rust/commit/8aef058329ae2d41475cd549ee394a1adf16c067"}], "stats": {"total": 50, "additions": 43, "deletions": 7}, "files": [{"sha": "34aee77ae2107fbe45fcb960d74d2ffdd5c57bf1", "filename": "mk/cfg/sparc64-unknown-linux-gnu.mk", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/728ec85e9af04784263acaf2993b2dbf4c07519f/mk%2Fcfg%2Fsparc64-unknown-linux-gnu.mk", "raw_url": "https://github.com/rust-lang/rust/raw/728ec85e9af04784263acaf2993b2dbf4c07519f/mk%2Fcfg%2Fsparc64-unknown-linux-gnu.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fcfg%2Fsparc64-unknown-linux-gnu.mk?ref=728ec85e9af04784263acaf2993b2dbf4c07519f", "patch": "@@ -0,0 +1 @@\n+# rustbuild-only target"}, {"sha": "1edcb0b1f24ded01964c8fc3166e572136727372", "filename": "src/liballoc_jemalloc/build.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/728ec85e9af04784263acaf2993b2dbf4c07519f/src%2Fliballoc_jemalloc%2Fbuild.rs", "raw_url": "https://github.com/rust-lang/rust/raw/728ec85e9af04784263acaf2993b2dbf4c07519f/src%2Fliballoc_jemalloc%2Fbuild.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliballoc_jemalloc%2Fbuild.rs?ref=728ec85e9af04784263acaf2993b2dbf4c07519f", "patch": "@@ -151,6 +151,12 @@ fn main() {\n     cmd.arg(format!(\"--host={}\", build_helper::gnu_target(&target)));\n     cmd.arg(format!(\"--build={}\", build_helper::gnu_target(&host)));\n \n+    // for some reason, jemalloc configure doesn't detect this value\n+    // automatically for this target\n+    if target == \"sparc64-unknown-linux-gnu\" {\n+        cmd.arg(\"--with-lg-quantum=4\");\n+    }\n+\n     run(&mut cmd);\n     let mut make = Command::new(build_helper::make(&host));\n     make.current_dir(&build_dir)"}, {"sha": "98589876259e19f13eab81b033ced95bbb6deca0", "filename": "src/liblibc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": null, "raw_url": null, "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliblibc?ref=728ec85e9af04784263acaf2993b2dbf4c07519f", "patch": "@@ -1 +1 @@\n-Subproject commit e49e9bb7c3d9c7f2fd893f0ee0db81617b8db21f\n+Subproject commit 98589876259e19f13eab81b033ced95bbb6deca0"}, {"sha": "8879161707745797d2a5cd3ad939d7665a7a073c", "filename": "src/librustc_back/target/mod.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/728ec85e9af04784263acaf2993b2dbf4c07519f/src%2Flibrustc_back%2Ftarget%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/728ec85e9af04784263acaf2993b2dbf4c07519f/src%2Flibrustc_back%2Ftarget%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Ftarget%2Fmod.rs?ref=728ec85e9af04784263acaf2993b2dbf4c07519f", "patch": "@@ -157,6 +157,8 @@ supported_targets! {\n     (\"mips-unknown-linux-uclibc\", mips_unknown_linux_uclibc),\n     (\"mipsel-unknown-linux-uclibc\", mipsel_unknown_linux_uclibc),\n \n+    (\"sparc64-unknown-linux-gnu\", sparc64_unknown_linux_gnu),\n+\n     (\"i686-linux-android\", i686_linux_android),\n     (\"arm-linux-androideabi\", arm_linux_androideabi),\n     (\"armv7-linux-androideabi\", armv7_linux_androideabi),"}, {"sha": "f627cc18f0b3d709dbdd513e0ad3de4fba6e2b43", "filename": "src/librustc_back/target/sparc64_unknown_linux_gnu.rs", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/728ec85e9af04784263acaf2993b2dbf4c07519f/src%2Flibrustc_back%2Ftarget%2Fsparc64_unknown_linux_gnu.rs", "raw_url": "https://github.com/rust-lang/rust/raw/728ec85e9af04784263acaf2993b2dbf4c07519f/src%2Flibrustc_back%2Ftarget%2Fsparc64_unknown_linux_gnu.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Ftarget%2Fsparc64_unknown_linux_gnu.rs?ref=728ec85e9af04784263acaf2993b2dbf4c07519f", "patch": "@@ -0,0 +1,30 @@\n+// Copyright 2016 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+use target::{Target, TargetResult};\n+\n+pub fn target() -> TargetResult {\n+    let mut base = super::linux_base::opts();\n+    base.cpu = \"v9\".to_string();\n+    base.max_atomic_width = Some(64);\n+    base.exe_allocation_crate = \"alloc_system\".to_string();\n+\n+    Ok(Target {\n+        llvm_target: \"sparc64-unknown-linux-gnu\".to_string(),\n+        target_endian: \"big\".to_string(),\n+        target_pointer_width: \"64\".to_string(),\n+        data_layout: \"E-m:e-i64:64-n32:64-S128\".to_string(),\n+        arch: \"sparc64\".to_string(),\n+        target_os: \"linux\".to_string(),\n+        target_env: \"gnu\".to_string(),\n+        target_vendor: \"unknown\".to_string(),\n+        options: base,\n+    })\n+}"}, {"sha": "bb1830a147e43ec196affc82aba84d01ed57941c", "filename": "src/libstd/os/linux/raw.rs", "status": "modified", "additions": 3, "deletions": 6, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/728ec85e9af04784263acaf2993b2dbf4c07519f/src%2Flibstd%2Fos%2Flinux%2Fraw.rs", "raw_url": "https://github.com/rust-lang/rust/raw/728ec85e9af04784263acaf2993b2dbf4c07519f/src%2Flibstd%2Fos%2Flinux%2Fraw.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fos%2Flinux%2Fraw.rs?ref=728ec85e9af04784263acaf2993b2dbf4c07519f", "patch": "@@ -157,12 +157,9 @@ mod arch {\n     }\n }\n \n-#[cfg(target_arch = \"mips64\")]\n-mod arch {\n-    pub use libc::{off_t, ino_t, nlink_t, blksize_t, blkcnt_t, stat, time_t};\n-}\n-\n-#[cfg(target_arch = \"s390x\")]\n+#[cfg(any(target_arch = \"mips64\",\n+          target_arch = \"s390x\",\n+          target_arch = \"sparc64\"))]\n mod arch {\n     pub use libc::{off_t, ino_t, nlink_t, blksize_t, blkcnt_t, stat, time_t};\n }"}]}