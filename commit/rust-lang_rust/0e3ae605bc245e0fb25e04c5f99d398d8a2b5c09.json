{"sha": "0e3ae605bc245e0fb25e04c5f99d398d8a2b5c09", "node_id": "C_kwDOAAsO6NoAKDBlM2FlNjA1YmMyNDVlMGZiMjVlMDRjNWY5OWQzOThkOGEyYjVjMDk", "commit": {"author": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2023-02-17T17:35:19Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-02-17T17:35:19Z"}, "message": "Add comment explaining the search index tweak", "tree": {"sha": "d8cf47803592b278e7ce03a165d603887f2f0700", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d8cf47803592b278e7ce03a165d603887f2f0700"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0e3ae605bc245e0fb25e04c5f99d398d8a2b5c09", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJj77rXCRBK7hj4Ov3rIwAAYfIIAIo5eG8i5ovBGqFC6Ra1G0DE\noYY4o4RgzQi8e79kRxiK8q3RYzJCgYkCIuYauIwn3w5l0SdZOpkmWrI7C/zfVcvX\n2ioAVq893z9iI1PLmzmRn+kqsngFw8kPP4gwBLuIQVFbZhBeZxPNmGPVFcOMFtb5\nS9KT432JHkjEfYyPpCaMoQ3ODd8PV24+g6iZsmpt8wrnlN7MApTjZwyyDfa3SwKx\nCXgurauIA+yMqRM9M/shFuIYRvr+ZFcYsTKhYFEveaLnPR7LAmp+SvJy3P111Gxi\no9M3iKuWrwMmlrw+SWSTCTHdkf2njZTxQn1Wff3Inf9Y2UHyDIn1JaNdEP990Uo=\n=MrpM\n-----END PGP SIGNATURE-----\n", "payload": "tree d8cf47803592b278e7ce03a165d603887f2f0700\nparent 5eba3f688cc6c2efc545c346675a5186da03e1fd\nauthor Michael Howell <michael@notriddle.com> 1676655319 -0700\ncommitter GitHub <noreply@github.com> 1676655319 -0700\n\nAdd comment explaining the search index tweak"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0e3ae605bc245e0fb25e04c5f99d398d8a2b5c09", "html_url": "https://github.com/rust-lang/rust/commit/0e3ae605bc245e0fb25e04c5f99d398d8a2b5c09", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0e3ae605bc245e0fb25e04c5f99d398d8a2b5c09/comments", "author": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5eba3f688cc6c2efc545c346675a5186da03e1fd", "url": "https://api.github.com/repos/rust-lang/rust/commits/5eba3f688cc6c2efc545c346675a5186da03e1fd", "html_url": "https://github.com/rust-lang/rust/commit/5eba3f688cc6c2efc545c346675a5186da03e1fd"}], "stats": {"total": 6, "additions": 6, "deletions": 0}, "files": [{"sha": "fe7081b571a5d0fdb50d3b741849d1595d443723", "filename": "src/librustdoc/formats/cache.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/0e3ae605bc245e0fb25e04c5f99d398d8a2b5c09/src%2Flibrustdoc%2Fformats%2Fcache.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0e3ae605bc245e0fb25e04c5f99d398d8a2b5c09/src%2Flibrustdoc%2Fformats%2Fcache.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fformats%2Fcache.rs?ref=0e3ae605bc245e0fb25e04c5f99d398d8a2b5c09", "patch": "@@ -288,6 +288,12 @@ impl<'a, 'tcx> DocFolder for CacheBuilder<'a, 'tcx> {\n                         let last = self.cache.parent_stack.last().expect(\"parent_stack is empty 2\");\n                         let did = match &*last {\n                             ParentStackItem::Impl {\n+                                // impl Trait for &T { fn method(self); }\n+                                //\n+                                // When generating a function index with the above shape, we want it\n+                                // associated with `T`, not with the primitive reference type. It should\n+                                // show up as `T::method`, rather than `reference::method`, in the search\n+                                // results page.\n                                 for_: clean::Type::BorrowedRef { type_, .. },\n                                 ..\n                             } => type_.def_id(&self.cache),"}]}