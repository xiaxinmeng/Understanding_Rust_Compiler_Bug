{"sha": "4bc5bcd812d16ff87282f616c6ce3432c0c9dac9", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRiYzViY2Q4MTJkMTZmZjg3MjgyZjYxNmM2Y2UzNDMyYzBjOWRhYzk=", "commit": {"author": {"name": "Jonathan Turner", "email": "jonathandturner@users.noreply.github.com", "date": "2016-08-31T20:53:33Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2016-08-31T20:53:33Z"}, "message": "Rollup merge of #35786 - GuillaumeGomez:paths_doc, r=steveklabnik\n\nImprove Path and PathBuf docs\n\nr? @steveklabnik", "tree": {"sha": "ca7edcc9a022372ec6a204a25e79c574ea848020", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ca7edcc9a022372ec6a204a25e79c574ea848020"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4bc5bcd812d16ff87282f616c6ce3432c0c9dac9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4bc5bcd812d16ff87282f616c6ce3432c0c9dac9", "html_url": "https://github.com/rust-lang/rust/commit/4bc5bcd812d16ff87282f616c6ce3432c0c9dac9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4bc5bcd812d16ff87282f616c6ce3432c0c9dac9/comments", "author": {"login": "jonathandturner", "id": 111457284, "node_id": "O_kgDOBqS0BA", "avatar_url": "https://avatars.githubusercontent.com/u/111457284?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonathandturner", "html_url": "https://github.com/jonathandturner", "followers_url": "https://api.github.com/users/jonathandturner/followers", "following_url": "https://api.github.com/users/jonathandturner/following{/other_user}", "gists_url": "https://api.github.com/users/jonathandturner/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonathandturner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonathandturner/subscriptions", "organizations_url": "https://api.github.com/users/jonathandturner/orgs", "repos_url": "https://api.github.com/users/jonathandturner/repos", "events_url": "https://api.github.com/users/jonathandturner/events{/privacy}", "received_events_url": "https://api.github.com/users/jonathandturner/received_events", "type": "Organization", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c75fd78de3f01885d6b39a6ec532e68d183e1121", "url": "https://api.github.com/repos/rust-lang/rust/commits/c75fd78de3f01885d6b39a6ec532e68d183e1121", "html_url": "https://github.com/rust-lang/rust/commit/c75fd78de3f01885d6b39a6ec532e68d183e1121"}, {"sha": "96e3103cfec430ef03dee1a9125f2f519c7ebc22", "url": "https://api.github.com/repos/rust-lang/rust/commits/96e3103cfec430ef03dee1a9125f2f519c7ebc22", "html_url": "https://github.com/rust-lang/rust/commit/96e3103cfec430ef03dee1a9125f2f519c7ebc22"}], "stats": {"total": 183, "additions": 149, "deletions": 34}, "files": [{"sha": "698ec4f1b7389cbc3cabddb22b34a14001400d69", "filename": "src/libstd/fs.rs", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/4bc5bcd812d16ff87282f616c6ce3432c0c9dac9/src%2Flibstd%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4bc5bcd812d16ff87282f616c6ce3432c0c9dac9/src%2Flibstd%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Ffs.rs?ref=4bc5bcd812d16ff87282f616c6ce3432c0c9dac9", "patch": "@@ -1510,8 +1510,11 @@ pub fn remove_dir_all<P: AsRef<Path>>(path: P) -> io::Result<()> {\n \n /// Returns an iterator over the entries within a directory.\n ///\n-/// The iterator will yield instances of `io::Result<DirEntry>`. New errors may\n-/// be encountered after an iterator is initially constructed.\n+/// The iterator will yield instances of [`io::Result`]`<`[`DirEntry`]`>`.\n+/// New errors may be encountered after an iterator is initially constructed.\n+///\n+/// [`io::Result`]: ../io/type.Result.html\n+/// [`DirEntry`]: struct.DirEntry.html\n ///\n /// # Platform-specific behavior\n ///"}, {"sha": "9a5b1da0f08f4122f3b6b7b8613eaf822dcce50b", "filename": "src/libstd/path.rs", "status": "modified", "additions": 144, "deletions": 32, "changes": 176, "blob_url": "https://github.com/rust-lang/rust/blob/4bc5bcd812d16ff87282f616c6ce3432c0c9dac9/src%2Flibstd%2Fpath.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4bc5bcd812d16ff87282f616c6ce3432c0c9dac9/src%2Flibstd%2Fpath.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fpath.rs?ref=4bc5bcd812d16ff87282f616c6ce3432c0c9dac9", "patch": "@@ -1028,11 +1028,16 @@ impl<'a> cmp::Ord for Components<'a> {\n // Basic types and traits\n ////////////////////////////////////////////////////////////////////////////////\n \n-/// An owned, mutable path (akin to `String`).\n+/// An owned, mutable path (akin to [`String`]).\n ///\n-/// This type provides methods like `push` and `set_extension` that mutate the\n-/// path in place. It also implements `Deref` to `Path`, meaning that all\n-/// methods on `Path` slices are available on `PathBuf` values as well.\n+/// This type provides methods like [`push`] and [`set_extension`] that mutate\n+/// the path in place. It also implements [`Deref`] to [`Path`], meaning that\n+/// all methods on [`Path`] slices are available on `PathBuf` values as well.\n+///\n+/// [`String`]: ../string/struct.String.html\n+/// [`Path`]: struct.Path.html\n+/// [`push`]: struct.PathBuf.html#method.push\n+/// [`set_extension`]: struct.PathBuf.html#method.set_extension\n ///\n /// More details about the overall approach can be found in\n /// the module documentation.\n@@ -1059,12 +1064,31 @@ impl PathBuf {\n     }\n \n     /// Allocates an empty `PathBuf`.\n+    ///\n+    /// # Examples\n+    ///\n+    /// ```\n+    /// use std::path::PathBuf;\n+    ///\n+    /// let path = PathBuf::new();\n+    /// ```\n     #[stable(feature = \"rust1\", since = \"1.0.0\")]\n     pub fn new() -> PathBuf {\n         PathBuf { inner: OsString::new() }\n     }\n \n-    /// Coerces to a `Path` slice.\n+    /// Coerces to a [`Path`] slice.\n+    ///\n+    /// [`Path`]: struct.Path.html\n+    ///\n+    /// # Examples\n+    ///\n+    /// ```\n+    /// use std::path::{Path, PathBuf};\n+    ///\n+    /// let p = PathBuf::from(\"/test\");\n+    /// assert_eq!(Path::new(\"/test\"), p.as_path());\n+    /// ```\n     #[stable(feature = \"rust1\", since = \"1.0.0\")]\n     pub fn as_path(&self) -> &Path {\n         self\n@@ -1129,10 +1153,26 @@ impl PathBuf {\n         self.inner.push(path);\n     }\n \n-    /// Truncate `self` to `self.parent()`.\n+    /// Truncate `self` to [`self.parent()`].\n     ///\n-    /// Returns false and does nothing if `self.file_name()` is `None`.\n+    /// Returns false and does nothing if [`self.file_name()`] is `None`.\n     /// Otherwise, returns `true`.\n+    ///\n+    /// [`self.parent()`]: struct.PathBuf.html#method.parent\n+    /// [`self.file_name()`]: struct.PathBuf.html#method.file_name\n+    ///\n+    /// # Examples\n+    ///\n+    /// ```\n+    /// use std::path::{Path, PathBuf};\n+    ///\n+    /// let mut p = PathBuf::from(\"/test/test.rs\");\n+    ///\n+    /// p.pop();\n+    /// assert_eq!(Path::new(\"/test\"), p.as_path());\n+    /// p.pop();\n+    /// assert_eq!(Path::new(\"/\"), p.as_path());\n+    /// ```\n     #[stable(feature = \"rust1\", since = \"1.0.0\")]\n     pub fn pop(&mut self) -> bool {\n         match self.parent().map(|p| p.as_u8_slice().len()) {\n@@ -1144,11 +1184,13 @@ impl PathBuf {\n         }\n     }\n \n-    /// Updates `self.file_name()` to `file_name`.\n+    /// Updates [`self.file_name()`] to `file_name`.\n     ///\n-    /// If `self.file_name()` was `None`, this is equivalent to pushing\n+    /// If [`self.file_name()`] was `None`, this is equivalent to pushing\n     /// `file_name`.\n     ///\n+    /// [`self.file_name()`]: struct.PathBuf.html#method.file_name\n+    ///\n     /// # Examples\n     ///\n     /// ```\n@@ -1175,12 +1217,29 @@ impl PathBuf {\n         self.push(file_name);\n     }\n \n-    /// Updates `self.extension()` to `extension`.\n+    /// Updates [`self.extension()`] to `extension`.\n+    ///\n+    /// If [`self.file_name()`] is `None`, does nothing and returns `false`.\n+    ///\n+    /// Otherwise, returns `true`; if [`self.extension()`] is `None`, the\n+    /// extension is added; otherwise it is replaced.\n+    ///\n+    /// [`self.file_name()`]: struct.PathBuf.html#method.file_name\n+    /// [`self.extension()`]: struct.PathBuf.html#method.extension\n+    ///\n+    /// # Examples\n+    ///\n+    /// ```\n+    /// use std::path::{Path, PathBuf};\n     ///\n-    /// If `self.file_name()` is `None`, does nothing and returns `false`.\n+    /// let mut p = PathBuf::from(\"/feel/the\");\n     ///\n-    /// Otherwise, returns `true`; if `self.extension()` is `None`, the extension\n-    /// is added; otherwise it is replaced.\n+    /// p.set_extension(\"force\");\n+    /// assert_eq!(Path::new(\"/feel/the.force\"), p.as_path());\n+    ///\n+    /// p.set_extension(\"dark_side\");\n+    /// assert_eq!(Path::new(\"/feel/the.dark_side\"), p.as_path());\n+    /// ```\n     #[stable(feature = \"rust1\", since = \"1.0.0\")]\n     pub fn set_extension<S: AsRef<OsStr>>(&mut self, extension: S) -> bool {\n         self._set_extension(extension.as_ref())\n@@ -1205,7 +1264,18 @@ impl PathBuf {\n         true\n     }\n \n-    /// Consumes the `PathBuf`, yielding its internal `OsString` storage.\n+    /// Consumes the `PathBuf`, yielding its internal [`OsString`] storage.\n+    ///\n+    /// [`OsString`]: ../ffi/struct.OsString.html\n+    ///\n+    /// # Examples\n+    ///\n+    /// ```\n+    /// use std::path::PathBuf;\n+    ///\n+    /// let p = PathBuf::from(\"/the/head\");\n+    /// let os_str = p.into_os_string();\n+    /// ```\n     #[stable(feature = \"rust1\", since = \"1.0.0\")]\n     pub fn into_os_string(self) -> OsString {\n         self.inner\n@@ -1343,7 +1413,7 @@ impl Into<OsString> for PathBuf {\n     }\n }\n \n-/// A slice of a path (akin to `str`).\n+/// A slice of a path (akin to [`str`]).\n ///\n /// This type supports a number of operations for inspecting a path, including\n /// breaking the path into its components (separated by `/` or `\\`, depending on\n@@ -1352,7 +1422,10 @@ impl Into<OsString> for PathBuf {\n /// the module documentation.\n ///\n /// This is an *unsized* type, meaning that it must always be used behind a\n-/// pointer like `&` or `Box`.\n+/// pointer like `&` or [`Box`].\n+///\n+/// [`str`]: ../primitive.str.html\n+/// [`Box`]: ../boxed/struct.Box.html\n ///\n /// # Examples\n ///\n@@ -1414,7 +1487,9 @@ impl Path {\n         unsafe { mem::transmute(s.as_ref()) }\n     }\n \n-    /// Yields the underlying `OsStr` slice.\n+    /// Yields the underlying [`OsStr`] slice.\n+    ///\n+    /// [`OsStr`]: ../ffi/struct.OsStr.html\n     ///\n     /// # Examples\n     ///\n@@ -1429,10 +1504,12 @@ impl Path {\n         &self.inner\n     }\n \n-    /// Yields a `&str` slice if the `Path` is valid unicode.\n+    /// Yields a [`&str`] slice if the `Path` is valid unicode.\n     ///\n     /// This conversion may entail doing a check for UTF-8 validity.\n     ///\n+    /// [`&str`]: ../primitive.str.html\n+    ///\n     /// # Examples\n     ///\n     /// ```\n@@ -1446,10 +1523,12 @@ impl Path {\n         self.inner.to_str()\n     }\n \n-    /// Converts a `Path` to a `Cow<str>`.\n+    /// Converts a `Path` to a [`Cow<str>`].\n     ///\n     /// Any non-Unicode sequences are replaced with U+FFFD REPLACEMENT CHARACTER.\n     ///\n+    /// [`Cow<str>`]: ../borrow/enum.Cow.html\n+    ///\n     /// # Examples\n     ///\n     /// ```\n@@ -1463,7 +1542,9 @@ impl Path {\n         self.inner.to_string_lossy()\n     }\n \n-    /// Converts a `Path` to an owned `PathBuf`.\n+    /// Converts a `Path` to an owned [`PathBuf`].\n+    ///\n+    /// [`PathBuf`]: struct.PathBuf.html\n     ///\n     /// # Examples\n     ///\n@@ -1611,6 +1692,18 @@ impl Path {\n     ///\n     /// If `base` is not a prefix of `self` (i.e. `starts_with`\n     /// returns `false`), returns `Err`.\n+    ///\n+    /// # Examples\n+    ///\n+    /// ```\n+    /// use std::path::Path;\n+    ///\n+    /// let path = Path::new(\"/test/haha/foo.txt\");\n+    ///\n+    /// assert_eq!(path.strip_prefix(\"/test\"), Ok(Path::new(\"haha/foo.txt\")));\n+    /// assert_eq!(path.strip_prefix(\"test\").is_ok(), false);\n+    /// assert_eq!(path.strip_prefix(\"/haha\").is_ok(), false);\n+    /// ```\n     #[stable(since = \"1.7.0\", feature = \"path_strip_prefix\")]\n     pub fn strip_prefix<'a, P: ?Sized>(&'a self, base: &'a P)\n                                        -> Result<&'a Path, StripPrefixError>\n@@ -1672,7 +1765,9 @@ impl Path {\n         iter_after(self.components().rev(), child.components().rev()).is_some()\n     }\n \n-    /// Extracts the stem (non-extension) portion of `self.file_name()`.\n+    /// Extracts the stem (non-extension) portion of [`self.file_name()`].\n+    ///\n+    /// [`self.file_name()`]: struct.Path.html#method.file_name\n     ///\n     /// The stem is:\n     ///\n@@ -1695,7 +1790,9 @@ impl Path {\n         self.file_name().map(split_file_at_dot).and_then(|(before, after)| before.or(after))\n     }\n \n-    /// Extracts the extension of `self.file_name()`, if possible.\n+    /// Extracts the extension of [`self.file_name()`], if possible.\n+    ///\n+    /// [`self.file_name()`]: struct.Path.html#method.file_name\n     ///\n     /// The extension is:\n     ///\n@@ -1718,9 +1815,12 @@ impl Path {\n         self.file_name().map(split_file_at_dot).and_then(|(before, after)| before.and(after))\n     }\n \n-    /// Creates an owned `PathBuf` with `path` adjoined to `self`.\n+    /// Creates an owned [`PathBuf`] with `path` adjoined to `self`.\n+    ///\n+    /// See [`PathBuf::push`] for more details on what it means to adjoin a path.\n     ///\n-    /// See `PathBuf::push` for more details on what it means to adjoin a path.\n+    /// [`PathBuf`]: struct.PathBuf.html\n+    /// [`PathBuf::push`]: struct.PathBuf.html#method.push\n     ///\n     /// # Examples\n     ///\n@@ -1740,9 +1840,12 @@ impl Path {\n         buf\n     }\n \n-    /// Creates an owned `PathBuf` like `self` but with the given file name.\n+    /// Creates an owned [`PathBuf`] like `self` but with the given file name.\n     ///\n-    /// See `PathBuf::set_file_name` for more details.\n+    /// See [`PathBuf::set_file_name`] for more details.\n+    ///\n+    /// [`PathBuf`]: struct.PathBuf.html\n+    /// [`PathBuf::set_file_name`]: struct.PathBuf.html#method.set_file_name\n     ///\n     /// # Examples\n     ///\n@@ -1763,9 +1866,12 @@ impl Path {\n         buf\n     }\n \n-    /// Creates an owned `PathBuf` like `self` but with the given extension.\n+    /// Creates an owned [`PathBuf`] like `self` but with the given extension.\n+    ///\n+    /// See [`PathBuf::set_extension`] for more details.\n     ///\n-    /// See `PathBuf::set_extension` for more details.\n+    /// [`PathBuf`]: struct.PathBuf.html\n+    /// [`PathBuf::set_extension`]: struct.PathBuf.html#method.set_extension\n     ///\n     /// # Examples\n     ///\n@@ -1813,7 +1919,9 @@ impl Path {\n         }\n     }\n \n-    /// Produce an iterator over the path's components viewed as `OsStr` slices.\n+    /// Produce an iterator over the path's components viewed as [`OsStr`] slices.\n+    ///\n+    /// [`OsStr`]: ../ffi/struct.OsStr.html\n     ///\n     /// # Examples\n     ///\n@@ -1832,9 +1940,11 @@ impl Path {\n         Iter { inner: self.components() }\n     }\n \n-    /// Returns an object that implements `Display` for safely printing paths\n+    /// Returns an object that implements [`Display`] for safely printing paths\n     /// that may contain non-Unicode data.\n     ///\n+    /// [`Display`]: ../fmt/trait.Display.html\n+    ///\n     /// # Examples\n     ///\n     /// ```\n@@ -1896,11 +2006,13 @@ impl Path {\n \n     /// Returns an iterator over the entries within a directory.\n     ///\n-    /// The iterator will yield instances of `io::Result<DirEntry>`. New errors may\n-    /// be encountered after an iterator is initially constructed.\n+    /// The iterator will yield instances of [`io::Result`]`<`[`DirEntry`]`>`. New\n+    /// errors may be encountered after an iterator is initially constructed.\n     ///\n     /// This is an alias to [`fs::read_dir`].\n     ///\n+    /// [`io::Result`]: ../io/type.Result.html\n+    /// [`DirEntry`]: ../fs/struct.DirEntry.html\n     /// [`fs::read_dir`]: ../fs/fn.read_dir.html\n     #[stable(feature = \"path_ext\", since = \"1.5.0\")]\n     pub fn read_dir(&self) -> io::Result<fs::ReadDir> {"}]}