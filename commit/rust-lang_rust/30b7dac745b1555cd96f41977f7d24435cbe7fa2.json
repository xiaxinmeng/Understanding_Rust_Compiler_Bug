{"sha": "30b7dac745b1555cd96f41977f7d24435cbe7fa2", "node_id": "MDY6Q29tbWl0NzI0NzEyOjMwYjdkYWM3NDViMTU1NWNkOTZmNDE5NzdmN2QyNDQzNWNiZTdmYTI=", "commit": {"author": {"name": "Josh Triplett", "email": "josh@joshtriplett.org", "date": "2020-07-29T18:37:33Z"}, "committer": {"name": "Josh Triplett", "email": "josh@joshtriplett.org", "date": "2020-08-26T21:55:21Z"}, "message": "Set ninja=true by default\n\nNinja substantially improves LLVM build time. On a 96-way system, using\nMake took 248s, and using Ninja took 161s, a 35% improvement.\n\nWe already require a variety of tools to build Rust. If someone wants to\nbuild without Ninja (for instance, to minimize the set of packages\nrequired to bootstrap a new target), they can easily set `ninja=false`\nin `config.toml`.  Our defaults should help people build Rust (and LLVM)\nfaster, to speed up development.", "tree": {"sha": "04b874ce829d9a8f91f4f13c7cf6f9b47e5407d7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/04b874ce829d9a8f91f4f13c7cf6f9b47e5407d7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/30b7dac745b1555cd96f41977f7d24435cbe7fa2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/30b7dac745b1555cd96f41977f7d24435cbe7fa2", "html_url": "https://github.com/rust-lang/rust/commit/30b7dac745b1555cd96f41977f7d24435cbe7fa2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/30b7dac745b1555cd96f41977f7d24435cbe7fa2/comments", "author": {"login": "joshtriplett", "id": 162737, "node_id": "MDQ6VXNlcjE2MjczNw==", "avatar_url": "https://avatars.githubusercontent.com/u/162737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joshtriplett", "html_url": "https://github.com/joshtriplett", "followers_url": "https://api.github.com/users/joshtriplett/followers", "following_url": "https://api.github.com/users/joshtriplett/following{/other_user}", "gists_url": "https://api.github.com/users/joshtriplett/gists{/gist_id}", "starred_url": "https://api.github.com/users/joshtriplett/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joshtriplett/subscriptions", "organizations_url": "https://api.github.com/users/joshtriplett/orgs", "repos_url": "https://api.github.com/users/joshtriplett/repos", "events_url": "https://api.github.com/users/joshtriplett/events{/privacy}", "received_events_url": "https://api.github.com/users/joshtriplett/received_events", "type": "User", "site_admin": false}, "committer": {"login": "joshtriplett", "id": 162737, "node_id": "MDQ6VXNlcjE2MjczNw==", "avatar_url": "https://avatars.githubusercontent.com/u/162737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joshtriplett", "html_url": "https://github.com/joshtriplett", "followers_url": "https://api.github.com/users/joshtriplett/followers", "following_url": "https://api.github.com/users/joshtriplett/following{/other_user}", "gists_url": "https://api.github.com/users/joshtriplett/gists{/gist_id}", "starred_url": "https://api.github.com/users/joshtriplett/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joshtriplett/subscriptions", "organizations_url": "https://api.github.com/users/joshtriplett/orgs", "repos_url": "https://api.github.com/users/joshtriplett/repos", "events_url": "https://api.github.com/users/joshtriplett/events{/privacy}", "received_events_url": "https://api.github.com/users/joshtriplett/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "48717b6f3ce661d2a0d64f7bdfdfb5fd3484ee5b", "url": "https://api.github.com/repos/rust-lang/rust/commits/48717b6f3ce661d2a0d64f7bdfdfb5fd3484ee5b", "html_url": "https://github.com/rust-lang/rust/commit/48717b6f3ce661d2a0d64f7bdfdfb5fd3484ee5b"}], "stats": {"total": 8, "additions": 4, "deletions": 4}, "files": [{"sha": "fe9776bc5f8fe28c83102f85efc51b32bd26d5f8", "filename": "README.md", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/30b7dac745b1555cd96f41977f7d24435cbe7fa2/README.md", "raw_url": "https://github.com/rust-lang/rust/raw/30b7dac745b1555cd96f41977f7d24435cbe7fa2/README.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/README.md?ref=30b7dac745b1555cd96f41977f7d24435cbe7fa2", "patch": "@@ -36,6 +36,7 @@ by running `./x.py --help` or reading the [rustc dev guide][rustcguidebuild].\n    * `python` 3 or 2.7\n    * GNU `make` 3.81 or later\n    * `cmake` 3.4.3 or later\n+   * `ninja`\n    * `curl`\n    * `git`\n    * `ssl` which comes in `libssl-dev` or `openssl-devel`"}, {"sha": "9abb8add785a9352cb46bb4ef49009b3838c4724", "filename": "config.toml.example", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/30b7dac745b1555cd96f41977f7d24435cbe7fa2/config.toml.example", "raw_url": "https://github.com/rust-lang/rust/raw/30b7dac745b1555cd96f41977f7d24435cbe7fa2/config.toml.example", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/config.toml.example?ref=30b7dac745b1555cd96f41977f7d24435cbe7fa2", "patch": "@@ -49,10 +49,8 @@\n # dynamic version to be available.\n #static-libstdcpp = false\n \n-# Tell the LLVM build system to use Ninja instead of the platform default for\n-# the generated build system. This can sometimes be faster than make, for\n-# example.\n-#ninja = false\n+# Whether to use Ninja to build LLVM. This runs much faster than make.\n+#ninja = true\n \n # LLVM targets to build support for.\n # Note: this is NOT related to Rust compilation targets. However, as Rust is"}, {"sha": "f549de6570ffb9b0b01c6ae047af5025929f0ef9", "filename": "src/bootstrap/config.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/30b7dac745b1555cd96f41977f7d24435cbe7fa2/src%2Fbootstrap%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/30b7dac745b1555cd96f41977f7d24435cbe7fa2/src%2Fbootstrap%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fconfig.rs?ref=30b7dac745b1555cd96f41977f7d24435cbe7fa2", "patch": "@@ -450,6 +450,7 @@ impl Config {\n     pub fn default_opts() -> Config {\n         let mut config = Config::default();\n         config.llvm_optimize = true;\n+        config.ninja = true;\n         config.llvm_version_check = true;\n         config.backtrace = true;\n         config.rust_optimize = true;"}]}