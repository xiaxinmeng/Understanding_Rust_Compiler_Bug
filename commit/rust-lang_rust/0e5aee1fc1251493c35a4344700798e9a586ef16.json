{"sha": "0e5aee1fc1251493c35a4344700798e9a586ef16", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBlNWFlZTFmYzEyNTE0OTNjMzVhNDM0NDcwMDc5OGU5YTU4NmVmMTY=", "commit": {"author": {"name": "flip1995", "email": "hello@philkrones.com", "date": "2020-11-28T16:18:15Z"}, "committer": {"name": "flip1995", "email": "hello@philkrones.com", "date": "2020-11-28T16:18:15Z"}, "message": "items_after_statements: don't lint when they a separated by trailing semicolons", "tree": {"sha": "0b9bb415659b88a48f675a7139bcc5ff8b475620", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0b9bb415659b88a48f675a7139bcc5ff8b475620"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0e5aee1fc1251493c35a4344700798e9a586ef16", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEqv54U47RUUXZfOLnLO/Nsn7QvnkFAl/CeEcACgkQLO/Nsn7Q\nvnmaCQ/9FcQuZ1+rGowMq708n6Ke4GeeNq//VRj3/iZddGXcCIdyuwvXNejvziMJ\n9LeauyXslJfOBvy2GCiywqx3KlFDlCUk4rBWwAp1qx8kwm88E+oXxd/wWjfsCnc+\nlMDLtBzezSWoUBncG0lEtZ8BZ7ZtYYc7hO6jIohzznzvOWU52sR4gV2xYN2Fax6u\nr5R/DIv7QxWO9p3q1A59bYUeBqhLUbvwgp8giOzDXvco/M14j2Nysm4Sdm1RQ0In\n52Qkx+GcPruqp0TKr+4N6Y6o8qaez3K2EJF4AMy5t04wztDoFP1NQeI0P+c/+VqK\nBGcABDGS9omVJGJRDC9NRoekQG/QWL2U8dMrMvS+3otmXjUX6ZW7peTWsA09zK81\n1kfiqI69cIj9VUzSq3LlXZCGz/EySjtkV2Ouq+4v3IGPOwMbEFi+z51aKydZpRo4\nQ9xVrBD6Hciz3LAcqUHMiK/29pRvwZyN4FGekr43EKhbY+fQMqwHPsKy4JaOUEoS\noATSMDNBSD83+bs2ukSdGpFb3Wn+kdtVOv8k//W5QUuw5Bmp+Zuxzo8gCaPsGi7P\njbmK4ZjNvV5hJ6EDooyHDxt5o1WkCbbwZHBMiD+s9C4Y1ZoKHryzfxfps2EtwjCw\nvR8R0c4pbgszsrJFONunM4R8UWCCbCxnWPkzns3Ioj8sEYPDKeg=\n=ykLJ\n-----END PGP SIGNATURE-----", "payload": "tree 0b9bb415659b88a48f675a7139bcc5ff8b475620\nparent c1b991588f3b2945bddfded808bdab45e250a8dd\nauthor flip1995 <hello@philkrones.com> 1606580295 +0100\ncommitter flip1995 <hello@philkrones.com> 1606580295 +0100\n\nitems_after_statements: don't lint when they a separated by trailing semicolons\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0e5aee1fc1251493c35a4344700798e9a586ef16", "html_url": "https://github.com/rust-lang/rust/commit/0e5aee1fc1251493c35a4344700798e9a586ef16", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0e5aee1fc1251493c35a4344700798e9a586ef16/comments", "author": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c1b991588f3b2945bddfded808bdab45e250a8dd", "url": "https://api.github.com/repos/rust-lang/rust/commits/c1b991588f3b2945bddfded808bdab45e250a8dd", "html_url": "https://github.com/rust-lang/rust/commit/c1b991588f3b2945bddfded808bdab45e250a8dd"}], "stats": {"total": 17, "additions": 15, "deletions": 2}, "files": [{"sha": "0927d218446ddb71c506d9cc19558c4fc265059e", "filename": "clippy_lints/src/items_after_statements.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/0e5aee1fc1251493c35a4344700798e9a586ef16/clippy_lints%2Fsrc%2Fitems_after_statements.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0e5aee1fc1251493c35a4344700798e9a586ef16/clippy_lints%2Fsrc%2Fitems_after_statements.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fitems_after_statements.rs?ref=0e5aee1fc1251493c35a4344700798e9a586ef16", "patch": "@@ -58,12 +58,12 @@ impl EarlyLintPass for ItemsAfterStatements {\n             return;\n         }\n \n-        // skip initial items\n+        // skip initial items and trailing semicolons\n         let stmts = item\n             .stmts\n             .iter()\n             .map(|stmt| &stmt.kind)\n-            .skip_while(|s| matches!(**s, StmtKind::Item(..)));\n+            .skip_while(|s| matches!(**s, StmtKind::Item(..) | StmtKind::Empty));\n \n         // lint on all further items\n         for stmt in stmts {"}, {"sha": "d439ca1e4e1a171ca3ef20dc99f2311b968b5573", "filename": "tests/ui/item_after_statement.rs", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/0e5aee1fc1251493c35a4344700798e9a586ef16/tests%2Fui%2Fitem_after_statement.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0e5aee1fc1251493c35a4344700798e9a586ef16/tests%2Fui%2Fitem_after_statement.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fitem_after_statement.rs?ref=0e5aee1fc1251493c35a4344700798e9a586ef16", "patch": "@@ -37,3 +37,16 @@ fn mac() {\n     b!();\n     println!(\"{}\", a);\n }\n+\n+fn semicolon() {\n+    struct S {\n+        a: u32,\n+    };\n+    impl S {\n+        fn new(a: u32) -> Self {\n+            Self { a }\n+        }\n+    }\n+\n+    let _ = S::new(3);\n+}"}]}