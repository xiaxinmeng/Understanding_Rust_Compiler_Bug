{"sha": "791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc5MWNlYjZhOWM1ZGZlZWViNWZjNjA5OGRiMjAyMmE5OWMyZWVjMTg=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-07-13T14:18:41Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-07-13T14:18:41Z"}, "message": "Rollup merge of #62651 - matthewjasper:rustc-macro-hygiene, r=petrochenkov\n\nMake some rustc macros more hygienic", "tree": {"sha": "54f877755130cc0cfb3b62d60a5e8a486d4bcb32", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/54f877755130cc0cfb3b62d60a5e8a486d4bcb32"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdKehBCRBK7hj4Ov3rIwAAdHIIAA63h4vRPFqkAEEanD4avg+K\nVgMOZ9QyHLv7ZUadqpoP1Qs091/nvUzDEp1ufahe1fzjok7mNcPT/9Mxriy9zrpN\n5XoD6V47cd3XsN2+u4Nmx+L6sN6s5kBcUsCGyOq0fiTjXI5xcP5ouKiGl2PmJLH4\nqXkM77/GK0P6aVb9Mobz2GS2A0jQn1x64Tzx7gY8bXKSpQteA7eABBQXlSU3wq04\nL9K1oOLqgg7cfev8rsUhLp3jTkhnGRMPZ/opbv6KEN0bmBKhwItqkRlKvm+4DobP\n5x7OITsXHBxjzK0ojcIjjvjWYEKorIFF/Z8PuaYiJT2ZLyhKFPLmr7pVv8bYOAg=\n=513u\n-----END PGP SIGNATURE-----\n", "payload": "tree 54f877755130cc0cfb3b62d60a5e8a486d4bcb32\nparent bafddd4c0aa7939292c992e300593724b8e52aa7\nparent 199931ce910776e6cd035da8cdf1dd81f4d411ba\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1563027521 +0200\ncommitter GitHub <noreply@github.com> 1563027521 +0200\n\nRollup merge of #62651 - matthewjasper:rustc-macro-hygiene, r=petrochenkov\n\nMake some rustc macros more hygienic\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18", "html_url": "https://github.com/rust-lang/rust/commit/791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bafddd4c0aa7939292c992e300593724b8e52aa7", "url": "https://api.github.com/repos/rust-lang/rust/commits/bafddd4c0aa7939292c992e300593724b8e52aa7", "html_url": "https://github.com/rust-lang/rust/commit/bafddd4c0aa7939292c992e300593724b8e52aa7"}, {"sha": "199931ce910776e6cd035da8cdf1dd81f4d411ba", "url": "https://api.github.com/repos/rust-lang/rust/commits/199931ce910776e6cd035da8cdf1dd81f4d411ba", "html_url": "https://github.com/rust-lang/rust/commit/199931ce910776e6cd035da8cdf1dd81f4d411ba"}], "stats": {"total": 71, "additions": 31, "deletions": 40}, "files": [{"sha": "63e0107a4d882b8504e4333c8397716d231eb3e2", "filename": "src/librustc/lib.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18/src%2Flibrustc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18/src%2Flibrustc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Flib.rs?ref=791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18", "patch": "@@ -49,15 +49,13 @@\n #![feature(optin_builtin_traits)]\n #![feature(range_is_empty)]\n #![feature(rustc_diagnostic_macros)]\n-#![feature(rustc_attrs)]\n #![feature(slice_patterns)]\n #![feature(specialization)]\n #![feature(unboxed_closures)]\n #![feature(thread_local)]\n #![feature(trace_macros)]\n #![feature(trusted_len)]\n #![feature(vec_remove_item)]\n-#![feature(step_trait)]\n #![feature(stmt_expr_attributes)]\n #![feature(integer_atomics)]\n #![feature(test)]"}, {"sha": "c3c76e81606157979557cd3b935c64a8adb7dccd", "filename": "src/librustc_data_structures/indexed_vec.rs", "status": "modified", "additions": 17, "deletions": 16, "changes": 33, "blob_url": "https://github.com/rust-lang/rust/blob/791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18/src%2Flibrustc_data_structures%2Findexed_vec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18/src%2Flibrustc_data_structures%2Findexed_vec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_data_structures%2Findexed_vec.rs?ref=791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18", "patch": "@@ -57,12 +57,13 @@ impl Idx for u32 {\n /// `u32::MAX`. You can also customize things like the `Debug` impl,\n /// what traits are derived, and so forth via the macro.\n #[macro_export]\n+#[allow_internal_unstable(step_trait, rustc_attrs)]\n macro_rules! newtype_index {\n     // ---- public rules ----\n \n     // Use default constants\n     ($(#[$attrs:meta])* $v:vis struct $name:ident { .. }) => (\n-        newtype_index!(\n+        $crate::newtype_index!(\n             // Leave out derives marker so we can use its absence to ensure it comes first\n             @attrs        [$(#[$attrs])*]\n             @type         [$name]\n@@ -74,7 +75,7 @@ macro_rules! newtype_index {\n \n     // Define any constants\n     ($(#[$attrs:meta])* $v:vis struct $name:ident { $($tokens:tt)+ }) => (\n-        newtype_index!(\n+        $crate::newtype_index!(\n             // Leave out derives marker so we can use its absence to ensure it comes first\n             @attrs        [$(#[$attrs])*]\n             @type         [$name]\n@@ -258,7 +259,7 @@ macro_rules! newtype_index {\n             }\n         }\n \n-        newtype_index!(\n+        $crate::newtype_index!(\n             @handle_debug\n             @derives      [$($derives,)*]\n             @type         [$type]\n@@ -294,7 +295,7 @@ macro_rules! newtype_index {\n      @derives      [$_derive:ident, $($derives:ident,)*]\n      @type         [$type:ident]\n      @debug_format [$debug_format:tt]) => (\n-        newtype_index!(\n+        $crate::newtype_index!(\n             @handle_debug\n             @derives      [$($derives,)*]\n             @type         [$type]\n@@ -309,7 +310,7 @@ macro_rules! newtype_index {\n      @debug_format [$debug_format:tt]\n                    derive [$($derives:ident),*]\n                    $($tokens:tt)*) => (\n-        newtype_index!(\n+        $crate::newtype_index!(\n             @attrs        [$(#[$attrs])*]\n             @type         [$type]\n             @max          [$max]\n@@ -329,7 +330,7 @@ macro_rules! newtype_index {\n                    derive [$($derives:ident,)+]\n                    ENCODABLE = custom\n                    $($tokens:tt)*) => (\n-        newtype_index!(\n+        $crate::newtype_index!(\n             @attrs        [$(#[$attrs])*]\n             @derives      [$($derives,)+]\n             @type         [$type]\n@@ -348,15 +349,15 @@ macro_rules! newtype_index {\n      @debug_format [$debug_format:tt]\n                    derive [$($derives:ident,)+]\n                    $($tokens:tt)*) => (\n-        newtype_index!(\n+        $crate::newtype_index!(\n             @derives      [$($derives,)+ RustcEncodable,]\n             @attrs        [$(#[$attrs])*]\n             @type         [$type]\n             @max          [$max]\n             @vis          [$v]\n             @debug_format [$debug_format]\n                           $($tokens)*);\n-        newtype_index!(@decodable $type);\n+        $crate::newtype_index!(@decodable $type);\n     );\n \n     // The case where no derives are added, but encodable is overridden. Don't\n@@ -368,7 +369,7 @@ macro_rules! newtype_index {\n      @debug_format [$debug_format:tt]\n                    ENCODABLE = custom\n                    $($tokens:tt)*) => (\n-        newtype_index!(\n+        $crate::newtype_index!(\n             @derives      []\n             @attrs        [$(#[$attrs])*]\n             @type         [$type]\n@@ -385,15 +386,15 @@ macro_rules! newtype_index {\n      @vis          [$v:vis]\n      @debug_format [$debug_format:tt]\n                    $($tokens:tt)*) => (\n-        newtype_index!(\n+        $crate::newtype_index!(\n             @derives      [RustcEncodable,]\n             @attrs        [$(#[$attrs])*]\n             @type         [$type]\n             @max          [$max]\n             @vis          [$v]\n             @debug_format [$debug_format]\n                           $($tokens)*);\n-        newtype_index!(@decodable $type);\n+        $crate::newtype_index!(@decodable $type);\n     );\n \n     (@decodable $type:ident) => (\n@@ -420,7 +421,7 @@ macro_rules! newtype_index {\n      @vis          [$v:vis]\n      @debug_format [$debug_format:tt]\n                    $name:ident = $constant:expr) => (\n-        newtype_index!(\n+        $crate::newtype_index!(\n             @derives      [$($derives,)*]\n             @attrs        [$(#[$attrs])*]\n             @type         [$type]\n@@ -439,7 +440,7 @@ macro_rules! newtype_index {\n      @debug_format [$debug_format:tt]\n                    $(#[doc = $doc:expr])*\n                    const $name:ident = $constant:expr) => (\n-        newtype_index!(\n+        $crate::newtype_index!(\n             @derives      [$($derives,)*]\n             @attrs        [$(#[$attrs])*]\n             @type         [$type]\n@@ -458,7 +459,7 @@ macro_rules! newtype_index {\n      @debug_format [$debug_format:tt]\n                    MAX = $max:expr,\n                    $($tokens:tt)*) => (\n-        newtype_index!(\n+        $crate::newtype_index!(\n             @derives      [$($derives,)*]\n             @attrs        [$(#[$attrs])*]\n             @type         [$type]\n@@ -477,7 +478,7 @@ macro_rules! newtype_index {\n      @debug_format [$_debug_format:tt]\n                    DEBUG_FORMAT = $debug_format:tt,\n                    $($tokens:tt)*) => (\n-        newtype_index!(\n+        $crate::newtype_index!(\n             @derives      [$($derives,)*]\n             @attrs        [$(#[$attrs])*]\n             @type         [$type]\n@@ -499,7 +500,7 @@ macro_rules! newtype_index {\n                    $($tokens:tt)*) => (\n         $(#[doc = $doc])*\n         pub const $name: $type = $type::from_u32_const($constant);\n-        newtype_index!(\n+        $crate::newtype_index!(\n             @derives      [$($derives,)*]\n             @attrs        [$(#[$attrs])*]\n             @type         [$type]"}, {"sha": "d7c39b780bfdf1a7870ffcc6548849a7c25c0f92", "filename": "src/librustc_lint/error_codes.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18/src%2Flibrustc_lint%2Ferror_codes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18/src%2Flibrustc_lint%2Ferror_codes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2Ferror_codes.rs?ref=791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18", "patch": "@@ -1,4 +1,4 @@\n-use syntax::{register_diagnostic, register_diagnostics};\n+use syntax::register_diagnostics;\n \n register_diagnostics! {\n     E0721, // `await` keyword"}, {"sha": "7c6317365913573b0a0e4aab1f3b4db65d8bf925", "filename": "src/librustc_metadata/error_codes.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18/src%2Flibrustc_metadata%2Ferror_codes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18/src%2Flibrustc_metadata%2Ferror_codes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_metadata%2Ferror_codes.rs?ref=791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18", "patch": "@@ -1,6 +1,6 @@\n #![allow(non_snake_case)]\n \n-use syntax::{register_diagnostic, register_diagnostics, register_long_diagnostics};\n+use syntax::{register_diagnostics, register_long_diagnostics};\n \n register_long_diagnostics! {\n E0454: r##\""}, {"sha": "f5e4661afa6b1812c2801cee030282a3888e1592", "filename": "src/librustc_mir/lib.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18/src%2Flibrustc_mir%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18/src%2Flibrustc_mir%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Flib.rs?ref=791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18", "patch": "@@ -15,12 +15,10 @@ Rust MIR: a lowered representation of Rust. Also: an experiment!\n #![feature(decl_macro)]\n #![feature(exhaustive_patterns)]\n #![feature(rustc_diagnostic_macros)]\n-#![feature(rustc_attrs)]\n #![feature(never_type)]\n #![feature(specialization)]\n #![feature(try_trait)]\n #![feature(unicode_internals)]\n-#![feature(step_trait)]\n #![feature(slice_concat_ext)]\n #![feature(trusted_len)]\n #![feature(try_blocks)]"}, {"sha": "36ebe5cf455ff6a46e677767e98f0f09b3d4a909", "filename": "src/librustc_passes/error_codes.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18/src%2Flibrustc_passes%2Ferror_codes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18/src%2Flibrustc_passes%2Ferror_codes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_passes%2Ferror_codes.rs?ref=791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18", "patch": "@@ -1,6 +1,6 @@\n #![allow(non_snake_case)]\n \n-use syntax::{register_diagnostic, register_diagnostics, register_long_diagnostics};\n+use syntax::{register_diagnostics, register_long_diagnostics};\n \n register_long_diagnostics! {\n /*"}, {"sha": "9e76f52a111b57e02a345947a598524e5f067ba1", "filename": "src/librustc_plugin/error_codes.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18/src%2Flibrustc_plugin%2Ferror_codes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18/src%2Flibrustc_plugin%2Ferror_codes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_plugin%2Ferror_codes.rs?ref=791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18", "patch": "@@ -1,6 +1,6 @@\n #![allow(non_snake_case)]\n \n-use syntax::{register_diagnostic, register_diagnostics, register_long_diagnostics};\n+use syntax::{register_diagnostics, register_long_diagnostics};\n \n register_long_diagnostics! {\n "}, {"sha": "15194a5d1463bea2c4afa02d9f4e31693766abe0", "filename": "src/librustc_resolve/error_codes.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18/src%2Flibrustc_resolve%2Ferror_codes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18/src%2Flibrustc_resolve%2Ferror_codes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Ferror_codes.rs?ref=791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18", "patch": "@@ -1,6 +1,6 @@\n #![allow(non_snake_case)]\n \n-use syntax::{register_diagnostic, register_diagnostics, register_long_diagnostics};\n+use syntax::{register_diagnostics, register_long_diagnostics};\n \n // Error messages for EXXXX errors.  Each message should start and end with a\n // new line, and be wrapped to 80 characters.  In vim you can `:set tw=80` and"}, {"sha": "01586e92aeb1ce2096f100dede06db484c7961ff", "filename": "src/librustc_target/abi/mod.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18/src%2Flibrustc_target%2Fabi%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18/src%2Flibrustc_target%2Fabi%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_target%2Fabi%2Fmod.rs?ref=791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18", "patch": "@@ -6,6 +6,7 @@ use crate::spec::Target;\n use std::fmt;\n use std::ops::{Add, Deref, Sub, Mul, AddAssign, Range, RangeInclusive};\n \n+use rustc_data_structures::newtype_index;\n use rustc_data_structures::indexed_vec::{Idx, IndexVec};\n use syntax_pos::symbol::{sym, Symbol};\n "}, {"sha": "dcd1eb5acdc8500e401dc8dc36bd0b7373abed6f", "filename": "src/librustc_target/lib.rs", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18/src%2Flibrustc_target%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18/src%2Flibrustc_target%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_target%2Flib.rs?ref=791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18", "patch": "@@ -11,9 +11,7 @@\n \n #![feature(box_syntax)]\n #![feature(nll)]\n-#![feature(rustc_attrs)]\n #![feature(slice_patterns)]\n-#![feature(step_trait)]\n \n #![deny(rust_2018_idioms)]\n #![deny(unused_lifetimes)]\n@@ -23,8 +21,5 @@\n #[allow(unused_extern_crates)]\n extern crate serialize as rustc_serialize; // used by deriving\n \n-#[macro_use]\n-extern crate rustc_data_structures;\n-\n pub mod abi;\n pub mod spec;"}, {"sha": "b754d0833761e2a86360bcc6b053828c1db0d8be", "filename": "src/libsyntax/diagnostics/macros.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18/src%2Flibsyntax%2Fdiagnostics%2Fmacros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18/src%2Flibsyntax%2Fdiagnostics%2Fmacros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fdiagnostics%2Fmacros.rs?ref=791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18", "patch": "@@ -170,19 +170,19 @@ macro_rules! help {\n #[macro_export]\n macro_rules! register_diagnostics {\n     ($($code:tt),*) => (\n-        $(register_diagnostic! { $code })*\n+        $($crate::register_diagnostic! { $code })*\n     );\n     ($($code:tt),*,) => (\n-        $(register_diagnostic! { $code })*\n+        $($crate::register_diagnostic! { $code })*\n     )\n }\n \n #[macro_export]\n macro_rules! register_long_diagnostics {\n     ($($code:tt: $description:tt),*) => (\n-        $(register_diagnostic! { $code, $description })*\n+        $($crate::register_diagnostic! { $code, $description })*\n     );\n     ($($code:tt: $description:tt),*,) => (\n-        $(register_diagnostic! { $code, $description })*\n+        $($crate::register_diagnostic! { $code, $description })*\n     )\n }"}, {"sha": "591f2fb599be3efa1e601509e255e3160a06a9b1", "filename": "src/libsyntax/lib.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18/src%2Flibsyntax%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18/src%2Flibsyntax%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Flib.rs?ref=791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18", "patch": "@@ -18,9 +18,7 @@\n #![feature(label_break_value)]\n #![feature(mem_take)]\n #![feature(nll)]\n-#![feature(rustc_attrs)]\n #![feature(rustc_diagnostic_macros)]\n-#![feature(step_trait)]\n #![feature(try_trait)]\n #![feature(unicode_internals)]\n "}, {"sha": "9ec551b439529b0d35a69b11669601a0b9942992", "filename": "src/libsyntax_ext/error_codes.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18/src%2Flibsyntax_ext%2Ferror_codes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18/src%2Flibsyntax_ext%2Ferror_codes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax_ext%2Ferror_codes.rs?ref=791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18", "patch": "@@ -1,6 +1,6 @@\n #![allow(non_snake_case)]\n \n-use syntax::{register_diagnostic, register_long_diagnostics};\n+use syntax::register_long_diagnostics;\n \n // Error messages for EXXXX errors.\n // Each message should start and end with a new line, and be wrapped to 80 characters."}, {"sha": "1192a44a6eecfd9537f82a48a56ca99ef657ff30", "filename": "src/test/run-pass-fulldeps/newtype_index.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18/src%2Ftest%2Frun-pass-fulldeps%2Fnewtype_index.rs", "raw_url": "https://github.com/rust-lang/rust/raw/791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18/src%2Ftest%2Frun-pass-fulldeps%2Fnewtype_index.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass-fulldeps%2Fnewtype_index.rs?ref=791ceb6a9c5dfeeeb5fc6098db2022a99c2eec18", "patch": "@@ -1,9 +1,9 @@\n-#![feature(rustc_attrs, rustc_private, step_trait)]\n+#![feature(rustc_private)]\n \n-#[macro_use] extern crate rustc_data_structures;\n+extern crate rustc_data_structures;\n extern crate serialize as rustc_serialize;\n \n-use rustc_data_structures::indexed_vec::Idx;\n+use rustc_data_structures::{newtype_index, indexed_vec::Idx};\n \n newtype_index!(struct MyIdx { MAX = 0xFFFF_FFFA });\n "}]}