{"sha": "e87dd42cfe3dc384cceb3c8385f7551c3af8edaa", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU4N2RkNDJjZmUzZGMzODRjY2ViM2M4Mzg1Zjc1NTFjM2FmOGVkYWE=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2017-03-27T20:06:56Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2017-03-27T20:07:33Z"}, "message": "appveyor: Downgrade MinGW to 6.2.0\n\nIt looks like the 6.3.0 MinGW comes with a gdb which has issues (#40184) that an\nattempted workaround (#40777) does not actually fix (#40835). The original\nmotivation for upgradin MinGW was to fix build flakiness (#40546) due to newer\nbuilds not exhibiting the same bug, so let's hope that 6.2.0 isn't too far back\nin time and still contains the fix we need.\n\nCloses #40835", "tree": {"sha": "f221b8b5ef68f48546e8eafc1784d66a67410426", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f221b8b5ef68f48546e8eafc1784d66a67410426"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e87dd42cfe3dc384cceb3c8385f7551c3af8edaa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e87dd42cfe3dc384cceb3c8385f7551c3af8edaa", "html_url": "https://github.com/rust-lang/rust/commit/e87dd42cfe3dc384cceb3c8385f7551c3af8edaa", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e87dd42cfe3dc384cceb3c8385f7551c3af8edaa/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ccce2c6eb914a66571f60fa0afe8a46faa9fb3bd", "url": "https://api.github.com/repos/rust-lang/rust/commits/ccce2c6eb914a66571f60fa0afe8a46faa9fb3bd", "html_url": "https://github.com/rust-lang/rust/commit/ccce2c6eb914a66571f60fa0afe8a46faa9fb3bd"}], "stats": {"total": 28, "additions": 6, "deletions": 22}, "files": [{"sha": "68b2a239aff1babc31c622fd0631dd4abaac9c78", "filename": "appveyor.yml", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/e87dd42cfe3dc384cceb3c8385f7551c3af8edaa/appveyor.yml", "raw_url": "https://github.com/rust-lang/rust/raw/e87dd42cfe3dc384cceb3c8385f7551c3af8edaa/appveyor.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/appveyor.yml?ref=e87dd42cfe3dc384cceb3c8385f7551c3af8edaa", "patch": "@@ -46,13 +46,13 @@ environment:\n     RUST_CONFIGURE_ARGS: --build=i686-pc-windows-gnu --enable-ninja\n     SCRIPT: python x.py test\n     MINGW_URL: https://s3.amazonaws.com/rust-lang-ci/rust-ci-mirror\n-    MINGW_ARCHIVE: i686-6.3.0-release-win32-dwarf-rt_v5-rev1.7z\n+    MINGW_ARCHIVE: i686-6.2.0-release-win32-dwarf-rt_v5-rev1.7z\n     MINGW_DIR: mingw32\n   - MSYS_BITS: 64\n     SCRIPT: python x.py test\n     RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-gnu --enable-ninja\n     MINGW_URL: https://s3.amazonaws.com/rust-lang-ci/rust-ci-mirror\n-    MINGW_ARCHIVE: x86_64-6.3.0-release-win32-seh-rt_v5-rev1.7z\n+    MINGW_ARCHIVE: x86_64-6.2.0-release-win32-seh-rt_v5-rev1.7z\n     MINGW_DIR: mingw64\n \n   # 32/64 bit MSVC and GNU deployment\n@@ -71,14 +71,14 @@ environment:\n     RUST_CONFIGURE_ARGS: --build=i686-pc-windows-gnu --enable-extended --enable-ninja\n     SCRIPT: python x.py dist\n     MINGW_URL: https://s3.amazonaws.com/rust-lang-ci/rust-ci-mirror\n-    MINGW_ARCHIVE: i686-6.3.0-release-win32-dwarf-rt_v5-rev1.7z\n+    MINGW_ARCHIVE: i686-6.2.0-release-win32-dwarf-rt_v5-rev1.7z\n     MINGW_DIR: mingw32\n     DEPLOY: 1\n   - MSYS_BITS: 64\n     SCRIPT: python x.py dist\n     RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-gnu --enable-extended --enable-ninja\n     MINGW_URL: https://s3.amazonaws.com/rust-lang-ci/rust-ci-mirror\n-    MINGW_ARCHIVE: x86_64-6.3.0-release-win32-seh-rt_v5-rev1.7z\n+    MINGW_ARCHIVE: x86_64-6.2.0-release-win32-seh-rt_v5-rev1.7z\n     MINGW_DIR: mingw64\n     DEPLOY: 1\n "}, {"sha": "3d8f2296236a2014c6c60df5657c7ab5fd522b26", "filename": "src/tools/compiletest/src/procsrv.rs", "status": "modified", "additions": 2, "deletions": 18, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/e87dd42cfe3dc384cceb3c8385f7551c3af8edaa/src%2Ftools%2Fcompiletest%2Fsrc%2Fprocsrv.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e87dd42cfe3dc384cceb3c8385f7551c3af8edaa/src%2Ftools%2Fcompiletest%2Fsrc%2Fprocsrv.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fprocsrv.rs?ref=e87dd42cfe3dc384cceb3c8385f7551c3af8edaa", "patch": "@@ -58,24 +58,8 @@ pub fn run(lib_path: &str,\n     let mut cmd = Command::new(prog);\n     cmd.args(args)\n         .stdout(Stdio::piped())\n-        .stderr(Stdio::piped());\n-\n-    // Why oh why do we sometimes make a pipe and sometimes inherit the stdin\n-    // stream, well that's an excellent question! In theory it should suffice to\n-    // always create a pipe here and be done with it. Unfortunately though\n-    // there's apparently something odd with the gdb that comes with gcc 6.3.0\n-    // on MinGW. Tracked at rust-lang/rust#40184 when stdin is piped here\n-    // (unconditionally) then all gdb tests will fail on MinGW when using gcc\n-    // 6.3.0. WHen using an inherited stdin though they happen to all work!\n-    //\n-    // As to why this fixes the issue, well, I have no idea. If you can remove\n-    // this branch and unconditionally use `piped` and it gets past @bors please\n-    // feel free to send a PR!\n-    if input.is_some() || !cfg!(windows) {\n-        cmd.stdin(Stdio::piped());\n-    } else {\n-        cmd.stdin(Stdio::inherit());\n-    }\n+        .stderr(Stdio::piped())\n+        .stdin(Stdio::piped());\n \n     add_target_env(&mut cmd, lib_path, aux_path);\n     for (key, val) in env {"}]}