{"sha": "7f74d4d4f2e0635d644be6e2259973b5cf559a2e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdmNzRkNGQ0ZjJlMDYzNWQ2NDRiZTZlMjI1OTk3M2I1Y2Y1NTlhMmU=", "commit": {"author": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2011-03-03T22:31:25Z"}, "committer": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2011-03-03T22:31:25Z"}, "message": "Turn on Valgrind for Mac", "tree": {"sha": "15637146dd05bf68de5ee7b569482eddd2010546", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/15637146dd05bf68de5ee7b569482eddd2010546"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7f74d4d4f2e0635d644be6e2259973b5cf559a2e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7f74d4d4f2e0635d644be6e2259973b5cf559a2e", "html_url": "https://github.com/rust-lang/rust/commit/7f74d4d4f2e0635d644be6e2259973b5cf559a2e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7f74d4d4f2e0635d644be6e2259973b5cf559a2e/comments", "author": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2a241ece3a8fdaa536946b29eeab4524da164903", "url": "https://api.github.com/repos/rust-lang/rust/commits/2a241ece3a8fdaa536946b29eeab4524da164903", "html_url": "https://github.com/rust-lang/rust/commit/2a241ece3a8fdaa536946b29eeab4524da164903"}], "stats": {"total": 21, "additions": 7, "deletions": 14}, "files": [{"sha": "37726b6eea1f1b35ebf6c8f4f2f70307a5934ed7", "filename": "src/Makefile", "status": "modified", "additions": 7, "deletions": 14, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/7f74d4d4f2e0635d644be6e2259973b5cf559a2e/src%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/7f74d4d4f2e0635d644be6e2259973b5cf559a2e/src%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2FMakefile?ref=7f74d4d4f2e0635d644be6e2259973b5cf559a2e", "patch": "@@ -43,13 +43,6 @@ ifeq ($(CFG_OSTYPE), FreeBSD)\n   endif\n   CFG_NATIVE := 1\n   CFG_UNIXY := 1\n-  CFG_VALGRIND := $(shell which valgrind)\n-  ifdef CFG_VALGRIND\n-    CFG_VALGRIND += --leak-check=full \\\n-                    --error-exitcode=1 \\\n-                    --quiet --vex-iropt-level=0 \\\n-                    --suppressions=etc/x86.supp\n-  endif\n endif\n \n ifeq ($(CFG_OSTYPE), Linux)\n@@ -63,13 +56,6 @@ ifeq ($(CFG_OSTYPE), Linux)\n   endif\n   CFG_NATIVE := 1\n   CFG_UNIXY := 1\n-  CFG_VALGRIND := $(shell which valgrind)\n-  ifdef CFG_VALGRIND\n-    CFG_VALGRIND += --leak-check=full \\\n-                    --error-exitcode=1 \\\n-                    --quiet --vex-iropt-level=0 \\\n-                    --suppressions=etc/x86.supp\n-  endif\n endif\n \n ifeq ($(CFG_OSTYPE), Darwin)\n@@ -137,6 +123,13 @@ ifdef CFG_UNIXY\n       CFG_GCC_LINK_FLAGS += -m32\n     endif\n   endif\n+  CFG_VALGRIND := $(shell which valgrind)\n+  ifdef CFG_VALGRIND\n+    CFG_VALGRIND += --leak-check=full \\\n+                    --error-exitcode=1 \\\n+                    --quiet --vex-iropt-level=0 \\\n+                    --suppressions=etc/x86.supp\n+  endif\n endif\n \n ifdef CFG_GCC"}]}