{"sha": "aa5a0c0d88eceb2bb55bdc7a39ffc6adc7a22881", "node_id": "C_kwDOAAsO6NoAKGFhNWEwYzBkODhlY2ViMmJiNTViZGM3YTM5ZmZjNmFkYzdhMjI4ODE", "commit": {"author": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2022-11-20T00:42:07Z"}, "committer": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2022-11-20T00:42:07Z"}, "message": "rustdoc: add test case for scraped example expand GUI", "tree": {"sha": "81aa295c1ea6c634895ee31e58c04f77cce17e78", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/81aa295c1ea6c634895ee31e58c04f77cce17e78"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/aa5a0c0d88eceb2bb55bdc7a39ffc6adc7a22881", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/aa5a0c0d88eceb2bb55bdc7a39ffc6adc7a22881", "html_url": "https://github.com/rust-lang/rust/commit/aa5a0c0d88eceb2bb55bdc7a39ffc6adc7a22881", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/aa5a0c0d88eceb2bb55bdc7a39ffc6adc7a22881/comments", "author": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "committer": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ae27c790ff235a4110b559223aa8483e97d38929", "url": "https://api.github.com/repos/rust-lang/rust/commits/ae27c790ff235a4110b559223aa8483e97d38929", "html_url": "https://github.com/rust-lang/rust/commit/ae27c790ff235a4110b559223aa8483e97d38929"}], "stats": {"total": 63, "additions": 63, "deletions": 0}, "files": [{"sha": "db83cda37002d4d0d8286dc8a2b59598f76566c7", "filename": "src/bootstrap/test.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/aa5a0c0d88eceb2bb55bdc7a39ffc6adc7a22881/src%2Fbootstrap%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aa5a0c0d88eceb2bb55bdc7a39ffc6adc7a22881/src%2Fbootstrap%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Ftest.rs?ref=aa5a0c0d88eceb2bb55bdc7a39ffc6adc7a22881", "patch": "@@ -1011,6 +1011,8 @@ impl Step for RustdocGUI {\n                 //        instead of hard-coding this test\n                 if entry.file_name() == \"link_to_definition\" {\n                     cargo.env(\"RUSTDOCFLAGS\", \"-Zunstable-options --generate-link-to-definition\");\n+                } else if entry.file_name() == \"scrape_examples\" {\n+                    cargo.arg(\"-Zrustdoc-scrape-examples=examples\");\n                 }\n                 builder.run(&mut cargo);\n             }"}, {"sha": "2a263a87a47566b834700fc8763af3db24e03cbb", "filename": "src/test/rustdoc-gui/scrape-examples-button-focus.goml", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/aa5a0c0d88eceb2bb55bdc7a39ffc6adc7a22881/src%2Ftest%2Frustdoc-gui%2Fscrape-examples-button-focus.goml", "raw_url": "https://github.com/rust-lang/rust/raw/aa5a0c0d88eceb2bb55bdc7a39ffc6adc7a22881/src%2Ftest%2Frustdoc-gui%2Fscrape-examples-button-focus.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fscrape-examples-button-focus.goml?ref=aa5a0c0d88eceb2bb55bdc7a39ffc6adc7a22881", "patch": "@@ -0,0 +1,14 @@\n+goto: \"file://\" + |DOC_PATH| + \"/scrape_examples/fn.test.html\"\n+store-property: (smallOffsetHeight, \".scraped-example-list > .scraped-example pre\", \"offsetHeight\")\n+assert-property-false: (\".scraped-example-list > .scraped-example pre\", {\n+\t\"scrollHeight\": |smallOffsetHeight|\n+})\n+focus: \".scraped-example-list > .scraped-example .expand\"\n+press-key: \"Enter\"\n+assert-property-false: (\".scraped-example-list > .scraped-example pre\", {\n+\t\"offsetHeight\": |smallOffsetHeight|\n+})\n+store-property: (fullOffsetHeight, \".scraped-example-list > .scraped-example pre\", \"offsetHeight\")\n+assert-property: (\".scraped-example-list > .scraped-example pre\", {\n+\t\"scrollHeight\": |fullOffsetHeight|\n+})"}, {"sha": "7cd6d0844e4b3a8df67cd79ed32d7f73576f3b5f", "filename": "src/test/rustdoc-gui/src/scrape_examples/Cargo.lock", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/aa5a0c0d88eceb2bb55bdc7a39ffc6adc7a22881/src%2Ftest%2Frustdoc-gui%2Fsrc%2Fscrape_examples%2FCargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/aa5a0c0d88eceb2bb55bdc7a39ffc6adc7a22881/src%2Ftest%2Frustdoc-gui%2Fsrc%2Fscrape_examples%2FCargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsrc%2Fscrape_examples%2FCargo.lock?ref=aa5a0c0d88eceb2bb55bdc7a39ffc6adc7a22881", "patch": "@@ -0,0 +1,7 @@\n+# This file is automatically @generated by Cargo.\n+# It is not intended for manual editing.\n+version = 3\n+\n+[[package]]\n+name = \"scrape_examples\"\n+version = \"0.1.0\""}, {"sha": "aea9b657d307e80c4ebe43175c5d66453f332ec9", "filename": "src/test/rustdoc-gui/src/scrape_examples/Cargo.toml", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/aa5a0c0d88eceb2bb55bdc7a39ffc6adc7a22881/src%2Ftest%2Frustdoc-gui%2Fsrc%2Fscrape_examples%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/aa5a0c0d88eceb2bb55bdc7a39ffc6adc7a22881/src%2Ftest%2Frustdoc-gui%2Fsrc%2Fscrape_examples%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsrc%2Fscrape_examples%2FCargo.toml?ref=aa5a0c0d88eceb2bb55bdc7a39ffc6adc7a22881", "patch": "@@ -0,0 +1,8 @@\n+[package]\n+name = \"scrape_examples\"\n+version = \"0.1.0\"\n+edition = \"2021\"\n+\n+# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html\n+\n+[dependencies]"}, {"sha": "3e69c6086ae2ed51928af3b47a919a8206fe3c8c", "filename": "src/test/rustdoc-gui/src/scrape_examples/examples/check.rs", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/aa5a0c0d88eceb2bb55bdc7a39ffc6adc7a22881/src%2Ftest%2Frustdoc-gui%2Fsrc%2Fscrape_examples%2Fexamples%2Fcheck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aa5a0c0d88eceb2bb55bdc7a39ffc6adc7a22881/src%2Ftest%2Frustdoc-gui%2Fsrc%2Fscrape_examples%2Fexamples%2Fcheck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsrc%2Fscrape_examples%2Fexamples%2Fcheck.rs?ref=aa5a0c0d88eceb2bb55bdc7a39ffc6adc7a22881", "patch": "@@ -0,0 +1,25 @@\n+fn main() {\n+    for i in 0..9 {\n+        println!(\"hello world!\");\n+        println!(\"hello world!\");\n+        println!(\"hello world!\");\n+        println!(\"hello world!\");\n+        println!(\"hello world!\");\n+        println!(\"hello world!\");\n+        println!(\"hello world!\");\n+        println!(\"hello world!\");\n+        println!(\"hello world!\");\n+    }\n+    scrape_examples::test();\n+    for i in 0..9 {\n+        println!(\"hello world!\");\n+        println!(\"hello world!\");\n+        println!(\"hello world!\");\n+        println!(\"hello world!\");\n+        println!(\"hello world!\");\n+        println!(\"hello world!\");\n+        println!(\"hello world!\");\n+        println!(\"hello world!\");\n+        println!(\"hello world!\");\n+    }\n+}"}, {"sha": "6412de2c03afd2747786c62f9213945308b437b5", "filename": "src/test/rustdoc-gui/src/scrape_examples/src/lib.rs", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/aa5a0c0d88eceb2bb55bdc7a39ffc6adc7a22881/src%2Ftest%2Frustdoc-gui%2Fsrc%2Fscrape_examples%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aa5a0c0d88eceb2bb55bdc7a39ffc6adc7a22881/src%2Ftest%2Frustdoc-gui%2Fsrc%2Fscrape_examples%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsrc%2Fscrape_examples%2Fsrc%2Flib.rs?ref=aa5a0c0d88eceb2bb55bdc7a39ffc6adc7a22881", "patch": "@@ -0,0 +1,7 @@\n+/// # Examples\n+///\n+/// ```\n+/// test();\n+/// test();\n+/// ```\n+pub fn test() {}"}]}