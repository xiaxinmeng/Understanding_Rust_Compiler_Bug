{"sha": "e1f2d354a7d6987e50719c24473ed9ae33f59392", "node_id": "C_kwDOAAsO6NoAKGUxZjJkMzU0YTdkNjk4N2U1MDcxOWMyNDQ3M2VkOWFlMzNmNTkzOTI", "commit": {"author": {"name": "Dylan DPC", "email": "99973273+Dylan-DPC@users.noreply.github.com", "date": "2022-03-23T02:05:33Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-03-23T02:05:33Z"}, "message": "Rollup merge of #95219 - ojeda:update-alloc-no-oom-handling-test, r=Dylan-DPC\n\nModernize `alloc-no-oom-handling` test\n\n  - The edition should be 2021 to avoid warnings.\n\n  - The `external_crate` feature was removed in commit 45bf1ed1a112 (\"rustc: Allow changing the default allocator\").\n\n    Note that commit d620ae10709c (\"Auto merge of #84266\") removed the old test, but the new one introduced passed the `--cfg` like in the old one.\n\nSigned-off-by: Miguel Ojeda <ojeda@kernel.org>\n\n---\n\nThis is intended to align this test to the new `no_rc` and `no_sync` ones being added in https://github.com/rust-lang/rust/pull/89891, but it makes sense on its own too.", "tree": {"sha": "e52e03cced9646cad7fd6cd308a4fc2c515376e1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e52e03cced9646cad7fd6cd308a4fc2c515376e1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e1f2d354a7d6987e50719c24473ed9ae33f59392", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJiOoBtCRBK7hj4Ov3rIwAAe/4IABvgX2ynRyHjdTqRnvQ5ai67\ngswwr/RllZrmPoCWC/Q2vQRn1z6ttVDdUnQ+MCI2pJFM0INmcn2ITVHGmEE6Zfcn\nCIyetYMKc+B7lQCnMX1mgbtCTaJTKQEGI79QXD/UxsQyrax7rEXnsqsvaSw96DTa\nwMZV8BtjYcXYYkFP5MEpovvHWI9k1gdICzc8CQW6wdloCnAhfV7Il8gxsyHH9EkK\nGw7mDm3CDS09lIsBbRs6tQKIcuyVzl3KpLSnT6ETBD9sr/Ix49w4XuZwhdw25Pig\nzth3w2GSCKdBJVKi7wOI/CmQSxyTHg3a0CrvaIZs3M3ADP8xlyvTtzyPgpFLKSc=\n=XmFo\n-----END PGP SIGNATURE-----\n", "payload": "tree e52e03cced9646cad7fd6cd308a4fc2c515376e1\nparent 0254928213617d0847305cce428ebca2daf9d637\nparent 0d12a30673123c64ce6955278a7183a9667758df\nauthor Dylan DPC <99973273+Dylan-DPC@users.noreply.github.com> 1648001133 +0100\ncommitter GitHub <noreply@github.com> 1648001133 +0100\n\nRollup merge of #95219 - ojeda:update-alloc-no-oom-handling-test, r=Dylan-DPC\n\nModernize `alloc-no-oom-handling` test\n\n  - The edition should be 2021 to avoid warnings.\n\n  - The `external_crate` feature was removed in commit 45bf1ed1a112 (\"rustc: Allow changing the default allocator\").\n\n    Note that commit d620ae10709c (\"Auto merge of #84266\") removed the old test, but the new one introduced passed the `--cfg` like in the old one.\n\nSigned-off-by: Miguel Ojeda <ojeda@kernel.org>\n\n---\n\nThis is intended to align this test to the new `no_rc` and `no_sync` ones being added in https://github.com/rust-lang/rust/pull/89891, but it makes sense on its own too.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e1f2d354a7d6987e50719c24473ed9ae33f59392", "html_url": "https://github.com/rust-lang/rust/commit/e1f2d354a7d6987e50719c24473ed9ae33f59392", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e1f2d354a7d6987e50719c24473ed9ae33f59392/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0254928213617d0847305cce428ebca2daf9d637", "url": "https://api.github.com/repos/rust-lang/rust/commits/0254928213617d0847305cce428ebca2daf9d637", "html_url": "https://github.com/rust-lang/rust/commit/0254928213617d0847305cce428ebca2daf9d637"}, {"sha": "0d12a30673123c64ce6955278a7183a9667758df", "url": "https://api.github.com/repos/rust-lang/rust/commits/0d12a30673123c64ce6955278a7183a9667758df", "html_url": "https://github.com/rust-lang/rust/commit/0d12a30673123c64ce6955278a7183a9667758df"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "6e25eb7e459454516a0411e31716a57850764316", "filename": "src/test/run-make-fulldeps/alloc-no-oom-handling/Makefile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e1f2d354a7d6987e50719c24473ed9ae33f59392/src%2Ftest%2Frun-make-fulldeps%2Falloc-no-oom-handling%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/e1f2d354a7d6987e50719c24473ed9ae33f59392/src%2Ftest%2Frun-make-fulldeps%2Falloc-no-oom-handling%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Falloc-no-oom-handling%2FMakefile?ref=e1f2d354a7d6987e50719c24473ed9ae33f59392", "patch": "@@ -1,4 +1,4 @@\n -include ../tools.mk\n \n all:\n-\t$(RUSTC) --edition=2018 --crate-type=rlib ../../../../library/alloc/src/lib.rs --cfg feature=\\\"external_crate\\\" --cfg no_global_oom_handling\n+\t$(RUSTC) --edition=2021 --crate-type=rlib ../../../../library/alloc/src/lib.rs --cfg no_global_oom_handling"}]}