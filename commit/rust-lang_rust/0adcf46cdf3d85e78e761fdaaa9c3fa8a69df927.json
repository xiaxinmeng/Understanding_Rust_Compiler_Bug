{"sha": "0adcf46cdf3d85e78e761fdaaa9c3fa8a69df927", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBhZGNmNDZjZGYzZDg1ZTc4ZTc2MWZkYWFhOWMzZmE4YTY5ZGY5Mjc=", "commit": {"author": {"name": "Jake Goldsborough", "email": "rjgoldsborough@gmail.com", "date": "2016-09-07T01:31:00Z"}, "committer": {"name": "Jake Goldsborough", "email": "rjgoldsborough@gmail.com", "date": "2016-09-07T01:31:00Z"}, "message": "detecting nodejs in configure", "tree": {"sha": "e97509b87ef1d6982ae183b68b34d1497912c909", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e97509b87ef1d6982ae183b68b34d1497912c909"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0adcf46cdf3d85e78e761fdaaa9c3fa8a69df927", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0adcf46cdf3d85e78e761fdaaa9c3fa8a69df927", "html_url": "https://github.com/rust-lang/rust/commit/0adcf46cdf3d85e78e761fdaaa9c3fa8a69df927", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0adcf46cdf3d85e78e761fdaaa9c3fa8a69df927/comments", "author": null, "committer": null, "parents": [{"sha": "79644ac3c4fe1b27dc64e0b172d3fca80a88335c", "url": "https://api.github.com/repos/rust-lang/rust/commits/79644ac3c4fe1b27dc64e0b172d3fca80a88335c", "html_url": "https://github.com/rust-lang/rust/commit/79644ac3c4fe1b27dc64e0b172d3fca80a88335c"}], "stats": {"total": 16, "additions": 4, "deletions": 12}, "files": [{"sha": "352b77560b73c3e24367a4677de4bf0b6d86937a", "filename": "configure", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/0adcf46cdf3d85e78e761fdaaa9c3fa8a69df927/configure", "raw_url": "https://github.com/rust-lang/rust/raw/0adcf46cdf3d85e78e761fdaaa9c3fa8a69df927/configure", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/configure?ref=0adcf46cdf3d85e78e761fdaaa9c3fa8a69df927", "patch": "@@ -634,6 +634,7 @@ valopt datadir \"${CFG_PREFIX}/share\" \"install data\"\n valopt infodir \"${CFG_PREFIX}/share/info\" \"install additional info\"\n valopt llvm-root \"\" \"set LLVM root\"\n valopt python \"\" \"set path to python\"\n+valopt nodejs \"\" \"set path to nodejs\"\n valopt jemalloc-root \"\" \"set directory where libjemalloc_pic.a is located\"\n valopt build \"${DEFAULT_BUILD}\" \"GNUs ./configure syntax LLVM build triple\"\n valopt android-cross-path \"\" \"Android NDK standalone path (deprecated)\"\n@@ -749,6 +750,9 @@ if [ $(echo $python_version | grep -c '^Python 2\\.7') -ne 1 ]; then\n     err \"Found $python_version, but Python 2.7 is required\"\n fi\n \n+# Checking for node, but not required\n+probe CFG_NODEJS nodejs node\n+\n # If we have no git directory then we are probably a tarball distribution\n # and shouldn't attempt to load submodules\n if [ ! -e ${CFG_SRC_DIR}.git ]"}, {"sha": "17a7c9ca66a2664488d4187d4af588b51a847a36", "filename": "src/bootstrap/bootstrap.py", "status": "modified", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/0adcf46cdf3d85e78e761fdaaa9c3fa8a69df927/src%2Fbootstrap%2Fbootstrap.py", "raw_url": "https://github.com/rust-lang/rust/raw/0adcf46cdf3d85e78e761fdaaa9c3fa8a69df927/src%2Fbootstrap%2Fbootstrap.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbootstrap.py?ref=0adcf46cdf3d85e78e761fdaaa9c3fa8a69df927", "patch": "@@ -236,15 +236,6 @@ def rustc(self):\n             return config + '/bin/rustc' + self.exe_suffix()\n         return os.path.join(self.bin_root(), \"bin/rustc\" + self.exe_suffix())\n \n-    def nodejs(self):\n-        config = self.get_toml('nodejs')\n-        if config:\n-            return config\n-        if os.path.exists(os.path.join(self.bin_root(), \"bin/nodejs\")):\n-            return os.path.join(self.bin_root(), \"bin/nodejs\" + self.exe_suffix())\n-        elif os.path.exists(os.path.join(self.bin_root(), \"bin/node\")):\n-            return os.path.join(self.bin_root(), \"bin/node\" + self.exe_suffix())\n-\n     def get_string(self, line):\n         start = line.find('\"')\n         end = start + 1 + line[start+1:].find('\"')"}, {"sha": "682a6f74126a8278555573a5743a057711cdc9eb", "filename": "src/bootstrap/config.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/0adcf46cdf3d85e78e761fdaaa9c3fa8a69df927/src%2Fbootstrap%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0adcf46cdf3d85e78e761fdaaa9c3fa8a69df927/src%2Fbootstrap%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fconfig.rs?ref=0adcf46cdf3d85e78e761fdaaa9c3fa8a69df927", "patch": "@@ -67,7 +67,6 @@ pub struct Config {\n     pub target: Vec<String>,\n     pub rustc: Option<PathBuf>,\n     pub cargo: Option<PathBuf>,\n-    pub nodejs: Option<PathBuf>,\n     pub local_rebuild: bool,\n \n     // libstd features\n@@ -112,7 +111,6 @@ struct Build {\n     host: Vec<String>,\n     target: Vec<String>,\n     cargo: Option<String>,\n-    nodejs: Option<String>,\n     rustc: Option<String>,\n     compiler_docs: Option<bool>,\n     docs: Option<bool>,\n@@ -217,7 +215,6 @@ impl Config {\n         }\n         config.rustc = build.rustc.map(PathBuf::from);\n         config.cargo = build.cargo.map(PathBuf::from);\n-        config.nodejs = build.nodejs.map(PathBuf::from);\n         set(&mut config.compiler_docs, build.compiler_docs);\n         set(&mut config.docs, build.docs);\n "}]}