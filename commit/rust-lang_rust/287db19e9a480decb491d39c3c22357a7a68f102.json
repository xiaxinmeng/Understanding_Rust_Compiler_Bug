{"sha": "287db19e9a480decb491d39c3c22357a7a68f102", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI4N2RiMTllOWE0ODBkZWNiNDkxZDM5YzNjMjIzNTdhN2E2OGYxMDI=", "commit": {"author": {"name": "Scott Wolchok", "email": "swolchok@fb.com", "date": "2019-07-24T17:28:14Z"}, "committer": {"name": "Scott Wolchok", "email": "swolchok@fb.com", "date": "2019-07-24T17:28:14Z"}, "message": "Add comment", "tree": {"sha": "c8c98138924f9766d9970b7c90ecd9ade0297051", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c8c98138924f9766d9970b7c90ecd9ade0297051"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/287db19e9a480decb491d39c3c22357a7a68f102", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/287db19e9a480decb491d39c3c22357a7a68f102", "html_url": "https://github.com/rust-lang/rust/commit/287db19e9a480decb491d39c3c22357a7a68f102", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/287db19e9a480decb491d39c3c22357a7a68f102/comments", "author": {"login": "swolchok", "id": 34168, "node_id": "MDQ6VXNlcjM0MTY4", "avatar_url": "https://avatars.githubusercontent.com/u/34168?v=4", "gravatar_id": "", "url": "https://api.github.com/users/swolchok", "html_url": "https://github.com/swolchok", "followers_url": "https://api.github.com/users/swolchok/followers", "following_url": "https://api.github.com/users/swolchok/following{/other_user}", "gists_url": "https://api.github.com/users/swolchok/gists{/gist_id}", "starred_url": "https://api.github.com/users/swolchok/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/swolchok/subscriptions", "organizations_url": "https://api.github.com/users/swolchok/orgs", "repos_url": "https://api.github.com/users/swolchok/repos", "events_url": "https://api.github.com/users/swolchok/events{/privacy}", "received_events_url": "https://api.github.com/users/swolchok/received_events", "type": "User", "site_admin": false}, "committer": {"login": "swolchok", "id": 34168, "node_id": "MDQ6VXNlcjM0MTY4", "avatar_url": "https://avatars.githubusercontent.com/u/34168?v=4", "gravatar_id": "", "url": "https://api.github.com/users/swolchok", "html_url": "https://github.com/swolchok", "followers_url": "https://api.github.com/users/swolchok/followers", "following_url": "https://api.github.com/users/swolchok/following{/other_user}", "gists_url": "https://api.github.com/users/swolchok/gists{/gist_id}", "starred_url": "https://api.github.com/users/swolchok/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/swolchok/subscriptions", "organizations_url": "https://api.github.com/users/swolchok/orgs", "repos_url": "https://api.github.com/users/swolchok/repos", "events_url": "https://api.github.com/users/swolchok/events{/privacy}", "received_events_url": "https://api.github.com/users/swolchok/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a4ff823f5d7205a983461063d08902986c11d00d", "url": "https://api.github.com/repos/rust-lang/rust/commits/a4ff823f5d7205a983461063d08902986c11d00d", "html_url": "https://github.com/rust-lang/rust/commit/a4ff823f5d7205a983461063d08902986c11d00d"}], "stats": {"total": 6, "additions": 6, "deletions": 0}, "files": [{"sha": "f46ad06ba436a6c9f1e8971bba61bd8194b60b9f", "filename": "src/librustc_target/spec/apple_ios_base.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/287db19e9a480decb491d39c3c22357a7a68f102/src%2Flibrustc_target%2Fspec%2Fapple_ios_base.rs", "raw_url": "https://github.com/rust-lang/rust/raw/287db19e9a480decb491d39c3c22357a7a68f102/src%2Flibrustc_target%2Fspec%2Fapple_ios_base.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_target%2Fspec%2Fapple_ios_base.rs?ref=287db19e9a480decb491d39c3c22357a7a68f102", "patch": "@@ -29,6 +29,12 @@ impl Arch {\n }\n \n pub fn get_sdk_root(sdk_name: &str) -> Result<String, String> {\n+    // Following what clang does\n+    // (https://github.com/llvm/llvm-project/blob/\n+    // 296a80102a9b72c3eda80558fb78a3ed8849b341/clang/lib/Driver/ToolChains/Darwin.cpp#L1661-L1678)\n+    // to allow the SDK path to be set. (For clang, xcrun sets\n+    // SDKROOT; for rustc, the user or build system can set it, or we\n+    // can fall back to checking for xcrun on PATH.)\n     if let Some(sdkroot) = env::var(\"SDKROOT\").ok() {\n         let sdkroot_path = Path::new(&sdkroot);\n         if sdkroot_path.is_absolute() && sdkroot_path != Path::new(\"/\") && sdkroot_path.exists() {"}]}