{"sha": "41d06dbd28a9c26ecf114c020c6d855252fe323c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQxZDA2ZGJkMjhhOWMyNmVjZjExNGMwMjBjNmQ4NTUyNTJmZTMyM2M=", "commit": {"author": {"name": "Jed Davis", "email": "jld@panix.com", "date": "2013-04-30T19:05:06Z"}, "committer": {"name": "Jed Davis", "email": "jld@panix.com", "date": "2013-04-30T19:05:06Z"}, "message": "Reverse accidental src/llvm reversion in 876483dcf, and add test.\n\nThe test is reduced from a doc test, but making it separate ensures that\n(1) unrelated changes to the docs won't leave this case uncovered, and\n(2) the nature of any future failures will be more obvious to whoever\nsees the tree on fire as a result.", "tree": {"sha": "f4ef3f59950be8e129a64916c8df5e21a6d6fb86", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f4ef3f59950be8e129a64916c8df5e21a6d6fb86"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/41d06dbd28a9c26ecf114c020c6d855252fe323c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/41d06dbd28a9c26ecf114c020c6d855252fe323c", "html_url": "https://github.com/rust-lang/rust/commit/41d06dbd28a9c26ecf114c020c6d855252fe323c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/41d06dbd28a9c26ecf114c020c6d855252fe323c/comments", "author": {"login": "jld", "id": 254973, "node_id": "MDQ6VXNlcjI1NDk3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/254973?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jld", "html_url": "https://github.com/jld", "followers_url": "https://api.github.com/users/jld/followers", "following_url": "https://api.github.com/users/jld/following{/other_user}", "gists_url": "https://api.github.com/users/jld/gists{/gist_id}", "starred_url": "https://api.github.com/users/jld/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jld/subscriptions", "organizations_url": "https://api.github.com/users/jld/orgs", "repos_url": "https://api.github.com/users/jld/repos", "events_url": "https://api.github.com/users/jld/events{/privacy}", "received_events_url": "https://api.github.com/users/jld/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jld", "id": 254973, "node_id": "MDQ6VXNlcjI1NDk3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/254973?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jld", "html_url": "https://github.com/jld", "followers_url": "https://api.github.com/users/jld/followers", "following_url": "https://api.github.com/users/jld/following{/other_user}", "gists_url": "https://api.github.com/users/jld/gists{/gist_id}", "starred_url": "https://api.github.com/users/jld/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jld/subscriptions", "organizations_url": "https://api.github.com/users/jld/orgs", "repos_url": "https://api.github.com/users/jld/repos", "events_url": "https://api.github.com/users/jld/events{/privacy}", "received_events_url": "https://api.github.com/users/jld/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c081ffbd1e845687202a975ea2e698b623e5722f", "url": "https://api.github.com/repos/rust-lang/rust/commits/c081ffbd1e845687202a975ea2e698b623e5722f", "html_url": "https://github.com/rust-lang/rust/commit/c081ffbd1e845687202a975ea2e698b623e5722f"}], "stats": {"total": 26, "additions": 25, "deletions": 1}, "files": [{"sha": "2e9f0d21fe321849a4759a01fc28eae82ef196d6", "filename": "src/llvm", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": null, "raw_url": null, "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fllvm?ref=41d06dbd28a9c26ecf114c020c6d855252fe323c", "patch": "@@ -1 +1 @@\n-Subproject commit 56dd407f4f97a01b8df6554c569170d2fc276fcb\n+Subproject commit 2e9f0d21fe321849a4759a01fc28eae82ef196d6"}, {"sha": "b5cf15f3b386332c4b00d1186f1b0110e745d10c", "filename": "src/test/run-pass/enum-nullable-simplifycfg-misopt.rs", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/41d06dbd28a9c26ecf114c020c6d855252fe323c/src%2Ftest%2Frun-pass%2Fenum-nullable-simplifycfg-misopt.rs", "raw_url": "https://github.com/rust-lang/rust/raw/41d06dbd28a9c26ecf114c020c6d855252fe323c/src%2Ftest%2Frun-pass%2Fenum-nullable-simplifycfg-misopt.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fenum-nullable-simplifycfg-misopt.rs?ref=41d06dbd28a9c26ecf114c020c6d855252fe323c", "patch": "@@ -0,0 +1,24 @@\n+// Copyright 2013 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+/*!\n+ * This is a regression test for a bug in LLVM, fixed in upstream r179587,\n+ * where the switch instructions generated for destructuring enums\n+ * represented with nullable pointers could be misoptimized in some cases.\n+ */\n+\n+enum List<X> { Nil, Cons(X, @List<X>) }\n+pub fn main() {\n+    match Cons(10, @Nil) {\n+\tCons(10, _) => {}\n+\tNil => {}\n+\t_ => fail!()\n+    }\n+}"}]}