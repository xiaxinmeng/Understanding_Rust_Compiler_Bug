{"sha": "6069f71e6c6d40bf72a7751450d91fa9b91ba6fa", "node_id": "C_kwDOAAsO6NoAKDYwNjlmNzFlNmM2ZDQwYmY3MmE3NzUxNDUwZDkxZmE5YjkxYmE2ZmE", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-09-21T14:08:54Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-09-21T14:40:31Z"}, "message": "Add GUI test for `.stab` elements in docblocks", "tree": {"sha": "bd0f1829cc142b05301f164f71483e0b4b6388c1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bd0f1829cc142b05301f164f71483e0b4b6388c1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6069f71e6c6d40bf72a7751450d91fa9b91ba6fa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6069f71e6c6d40bf72a7751450d91fa9b91ba6fa", "html_url": "https://github.com/rust-lang/rust/commit/6069f71e6c6d40bf72a7751450d91fa9b91ba6fa", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6069f71e6c6d40bf72a7751450d91fa9b91ba6fa/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "150623eb6c0084042623f521c052694bd6718e2d", "url": "https://api.github.com/repos/rust-lang/rust/commits/150623eb6c0084042623f521c052694bd6718e2d", "html_url": "https://github.com/rust-lang/rust/commit/150623eb6c0084042623f521c052694bd6718e2d"}], "stats": {"total": 39, "additions": 39, "deletions": 0}, "files": [{"sha": "7f965ada594d824d081d697fd5a610ca92f40fc2", "filename": "src/test/rustdoc-gui/check-stab-in-docblock.goml", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/6069f71e6c6d40bf72a7751450d91fa9b91ba6fa/src%2Ftest%2Frustdoc-gui%2Fcheck-stab-in-docblock.goml", "raw_url": "https://github.com/rust-lang/rust/raw/6069f71e6c6d40bf72a7751450d91fa9b91ba6fa/src%2Ftest%2Frustdoc-gui%2Fcheck-stab-in-docblock.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fcheck-stab-in-docblock.goml?ref=6069f71e6c6d40bf72a7751450d91fa9b91ba6fa", "patch": "@@ -0,0 +1,21 @@\n+// This test checks that using `.stab` attributes in `.docblock` elements doesn't\n+// create scrollable paragraphs.\n+goto: file://|DOC_PATH|/test_docs/index.html\n+// Needs the text to be display to check for scrollable content.\n+show-text: true\n+size: (786, 600)\n+// Confirms that there 3 paragraphs.\n+assert-count: (\".top-doc .docblock p\", 3)\n+// Checking that there is no scrollable content.\n+assert-property: (\n+    \".top-doc .docblock p:nth-of-type(1)\",\n+    {\"scrollHeight\": \"120\", \"clientHeight\": \"120\", \"scrollWidth\": \"502\", \"clientWidth\": \"502\"},\n+)\n+assert-property: (\n+    \".top-doc .docblock p:nth-of-type(2)\",\n+    {\"scrollHeight\": \"48\", \"clientHeight\": \"48\", \"scrollWidth\": \"502\", \"clientWidth\": \"502\"},\n+)\n+assert-property: (\n+    \".top-doc .docblock p:nth-of-type(3)\",\n+    {\"scrollHeight\": \"48\", \"clientHeight\": \"48\", \"scrollWidth\": \"502\", \"clientWidth\": \"502\"},\n+)"}, {"sha": "f4c2dadea6d0d5566c0f68ff0adafaa2af2be638", "filename": "src/test/rustdoc-gui/src/test_docs/lib.rs", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/6069f71e6c6d40bf72a7751450d91fa9b91ba6fa/src%2Ftest%2Frustdoc-gui%2Fsrc%2Ftest_docs%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6069f71e6c6d40bf72a7751450d91fa9b91ba6fa/src%2Ftest%2Frustdoc-gui%2Fsrc%2Ftest_docs%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsrc%2Ftest_docs%2Flib.rs?ref=6069f71e6c6d40bf72a7751450d91fa9b91ba6fa", "patch": "@@ -6,6 +6,24 @@\n #![feature(rustdoc_internals)]\n #![feature(doc_cfg)]\n \n+/*!\n+Enable the feature <span class=\"stab portability\"><code>some-feature</code></span> to enjoy\n+this crate even more!\n+Enable the feature <span class=\"stab portability\"><code>some-feature</code></span> to enjoy\n+this crate even more!\n+Enable the feature <span class=\"stab portability\"><code>some-feature</code></span> to enjoy\n+this crate even more!\n+\n+Also, stop using `bar` as it's <span class=\"stab deprecated\" title=\"\">deprecated</span>.\n+Also, stop using `bar` as it's <span class=\"stab deprecated\" title=\"\">deprecated</span>.\n+Also, stop using `bar` as it's <span class=\"stab deprecated\" title=\"\">deprecated</span>.\n+\n+Finally, you can use `quz` only on <span class=\"stab portability\"><code>Unix or x86-64</code>\n+</span>.\n+Finally, you can use `quz` only on <span class=\"stab portability\"><code>Unix or x86-64</code>\n+</span>.\n+*/\n+\n use std::convert::AsRef;\n use std::fmt;\n "}]}