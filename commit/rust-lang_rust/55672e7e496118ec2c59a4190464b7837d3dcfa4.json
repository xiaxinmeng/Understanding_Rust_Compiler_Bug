{"sha": "55672e7e496118ec2c59a4190464b7837d3dcfa4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU1NjcyZTdlNDk2MTE4ZWMyYzU5YTQxOTA0NjRiNzgzN2QzZGNmYTQ=", "commit": {"author": {"name": "flip1995", "email": "9744647+flip1995@users.noreply.github.com", "date": "2018-08-03T08:19:29Z"}, "committer": {"name": "flip1995", "email": "9744647+flip1995@users.noreply.github.com", "date": "2018-08-03T08:19:29Z"}, "message": "Fix single_char_pattern lint for escaped chars", "tree": {"sha": "e1916b50017816b7d6de1be7f7a70681440162db", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e1916b50017816b7d6de1be7f7a70681440162db"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/55672e7e496118ec2c59a4190464b7837d3dcfa4", "comment_count": 0, "verification": {"verified": false, "reason": "unknown_key", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEk5wnN1vdN2T6wUOa7PlBImH6pHAFAltkEBIACgkQ7PlBImH6\npHDYfRAA2aO5Np2wsbd/wHjIZlwyQ0AyT6xKx+dSnxfJ/JyKgQBRNjVzGLqM5pzJ\n7X7iWe4T8v9cPibur0fs+cyjnb7zkBPkTRmoCquMzIE0cVJ8OGVmIQEedgk3Xt9I\nuCIAujfig1bI9KbnbchKwh5aQ+JIMFIebfCpcBm0a5883+nxGmobQ14gBUF4rEUM\n7r9Fef0lW5EfFAxZKsWjGKJZM1r2EDFWwYMhjlko++bY5a/VmHyEKb56Tg7kQyND\nKoXwjDF221WxLWmmWpiNPxnh2b+Z8WcJoL9FqHDiBPz4a/K+BTVtTYJ5/Zg3W/39\njJ8zsP7zODqIg69CpIVi0wY9U0OcKN/zJ9+7eZk0dfKIFFaOdzlVTyPh5/7v6srb\n/eCLRFvhqlOwZDhon5z7kAnjGveLIomhvLi23WbKEB9D/dtZ7+0BRl9likAUgDWx\nr4w89h4+pFbWNZAyZPCn966OzJSYfToJk0EbE3TuGw1Y7fMKeiaZ/pJ28mD5YkiM\nISAbyIrRoNa7R94sOGrOlNUBVVkMTFKhfHJD4OZq+utrNfL1cYMrdJuQbGGRnb2G\nsmeO6PtOlfknfC2dpXUp0LEaJ7RaWK57SVDWD+Pg9L5XXSBZsq/YQcMGISR3bHwa\n2IRtNMbOTok/kESCS+h8zZJKn9z3gDOsQZZUsC8nFbRijT6nGS0=\n=rkIW\n-----END PGP SIGNATURE-----", "payload": "tree e1916b50017816b7d6de1be7f7a70681440162db\nparent f43d0e53b2f572b5509424d267556d185c2d80e2\nauthor flip1995 <9744647+flip1995@users.noreply.github.com> 1533284369 +0200\ncommitter flip1995 <9744647+flip1995@users.noreply.github.com> 1533284369 +0200\n\nFix single_char_pattern lint for escaped chars\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/55672e7e496118ec2c59a4190464b7837d3dcfa4", "html_url": "https://github.com/rust-lang/rust/commit/55672e7e496118ec2c59a4190464b7837d3dcfa4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/55672e7e496118ec2c59a4190464b7837d3dcfa4/comments", "author": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f43d0e53b2f572b5509424d267556d185c2d80e2", "url": "https://api.github.com/repos/rust-lang/rust/commits/f43d0e53b2f572b5509424d267556d185c2d80e2", "html_url": "https://github.com/rust-lang/rust/commit/f43d0e53b2f572b5509424d267556d185c2d80e2"}], "stats": {"total": 14, "additions": 9, "deletions": 5}, "files": [{"sha": "bbf1f984d31d8d324af4da4ffe9832c4cb3136b0", "filename": "clippy_lints/src/methods.rs", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/55672e7e496118ec2c59a4190464b7837d3dcfa4/clippy_lints%2Fsrc%2Fmethods.rs", "raw_url": "https://github.com/rust-lang/rust/raw/55672e7e496118ec2c59a4190464b7837d3dcfa4/clippy_lints%2Fsrc%2Fmethods.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmethods.rs?ref=55672e7e496118ec2c59a4190464b7837d3dcfa4", "patch": "@@ -1888,11 +1888,8 @@ fn lint_chars_last_cmp_with_unwrap<'a, 'tcx>(cx: &LateContext<'a, 'tcx>, info: &\n fn lint_single_char_pattern<'a, 'tcx>(cx: &LateContext<'a, 'tcx>, _expr: &'tcx hir::Expr, arg: &'tcx hir::Expr) {\n     if let Some((Constant::Str(r), _)) = constant(cx, cx.tables, arg) {\n         if r.len() == 1 {\n-            let c = r.chars().next().unwrap();\n             let snip = snippet(cx, arg.span, \"..\");\n-            let hint = snip.replace(\n-                &format!(\"\\\"{}\\\"\", c.escape_default()),\n-                &format!(\"'{}'\", c.escape_default()));\n+            let hint = format!(\"'{}'\", &snip[1..snip.len() - 1]);\n             span_lint_and_sugg(\n                 cx,\n                 SINGLE_CHAR_PATTERN,"}, {"sha": "577a0e270906d674f35532ad8834d9e22b3ddef9", "filename": "tests/ui/single_char_pattern.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/55672e7e496118ec2c59a4190464b7837d3dcfa4/tests%2Fui%2Fsingle_char_pattern.rs", "raw_url": "https://github.com/rust-lang/rust/raw/55672e7e496118ec2c59a4190464b7837d3dcfa4/tests%2Fui%2Fsingle_char_pattern.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fsingle_char_pattern.rs?ref=55672e7e496118ec2c59a4190464b7837d3dcfa4", "patch": "@@ -42,4 +42,5 @@ fn main() {\n     h.contains(\"X\"); // should not warn\n \n     x.replace(\";\", \",\").split(\",\"); // issue #2978\n+    x.starts_with(\"\\x03\"); // issue #2996\n }"}, {"sha": "044b4909a373b319a246f5c39b4ac255cd626d9f", "filename": "tests/ui/single_char_pattern.stderr", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/55672e7e496118ec2c59a4190464b7837d3dcfa4/tests%2Fui%2Fsingle_char_pattern.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/55672e7e496118ec2c59a4190464b7837d3dcfa4/tests%2Fui%2Fsingle_char_pattern.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fsingle_char_pattern.stderr?ref=55672e7e496118ec2c59a4190464b7837d3dcfa4", "patch": "@@ -114,5 +114,11 @@ error: single-character string constant used as pattern\n 44 |     x.replace(\";\", \",\").split(\",\"); // issue #2978\n    |                               ^^^ help: try using a char instead: `','`\n \n-error: aborting due to 19 previous errors\n+error: single-character string constant used as pattern\n+  --> $DIR/single_char_pattern.rs:45:19\n+   |\n+45 |     x.starts_with(\"/x03\"); // issue #2996\n+   |                   ^^^^^^ help: try using a char instead: `'/x03'`\n+\n+error: aborting due to 20 previous errors\n "}]}