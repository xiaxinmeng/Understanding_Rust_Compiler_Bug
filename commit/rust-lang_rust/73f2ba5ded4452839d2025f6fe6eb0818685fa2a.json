{"sha": "73f2ba5ded4452839d2025f6fe6eb0818685fa2a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjczZjJiYTVkZWQ0NDUyODM5ZDIwMjVmNmZlNmViMDgxODY4NWZhMmE=", "commit": {"author": {"name": "Jonathan Goodman", "email": "goodmanjonathan@sbcglobal.net", "date": "2018-02-06T18:22:34Z"}, "committer": {"name": "Jonathan Goodman", "email": "goodmanjonathan@sbcglobal.net", "date": "2018-02-06T18:22:34Z"}, "message": "don't suggest eliding 'static on associated consts", "tree": {"sha": "a4319b86a42bbb6fba76b3388fc8df7982f46d0e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a4319b86a42bbb6fba76b3388fc8df7982f46d0e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/73f2ba5ded4452839d2025f6fe6eb0818685fa2a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/73f2ba5ded4452839d2025f6fe6eb0818685fa2a", "html_url": "https://github.com/rust-lang/rust/commit/73f2ba5ded4452839d2025f6fe6eb0818685fa2a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/73f2ba5ded4452839d2025f6fe6eb0818685fa2a/comments", "author": {"login": "goodmanjonathan", "id": 3458868, "node_id": "MDQ6VXNlcjM0NTg4Njg=", "avatar_url": "https://avatars.githubusercontent.com/u/3458868?v=4", "gravatar_id": "", "url": "https://api.github.com/users/goodmanjonathan", "html_url": "https://github.com/goodmanjonathan", "followers_url": "https://api.github.com/users/goodmanjonathan/followers", "following_url": "https://api.github.com/users/goodmanjonathan/following{/other_user}", "gists_url": "https://api.github.com/users/goodmanjonathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/goodmanjonathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/goodmanjonathan/subscriptions", "organizations_url": "https://api.github.com/users/goodmanjonathan/orgs", "repos_url": "https://api.github.com/users/goodmanjonathan/repos", "events_url": "https://api.github.com/users/goodmanjonathan/events{/privacy}", "received_events_url": "https://api.github.com/users/goodmanjonathan/received_events", "type": "User", "site_admin": false}, "committer": {"login": "goodmanjonathan", "id": 3458868, "node_id": "MDQ6VXNlcjM0NTg4Njg=", "avatar_url": "https://avatars.githubusercontent.com/u/3458868?v=4", "gravatar_id": "", "url": "https://api.github.com/users/goodmanjonathan", "html_url": "https://github.com/goodmanjonathan", "followers_url": "https://api.github.com/users/goodmanjonathan/followers", "following_url": "https://api.github.com/users/goodmanjonathan/following{/other_user}", "gists_url": "https://api.github.com/users/goodmanjonathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/goodmanjonathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/goodmanjonathan/subscriptions", "organizations_url": "https://api.github.com/users/goodmanjonathan/orgs", "repos_url": "https://api.github.com/users/goodmanjonathan/repos", "events_url": "https://api.github.com/users/goodmanjonathan/events{/privacy}", "received_events_url": "https://api.github.com/users/goodmanjonathan/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b835877d2ecba1b91ac74fee5b042ac0673aff14", "url": "https://api.github.com/repos/rust-lang/rust/commits/b835877d2ecba1b91ac74fee5b042ac0673aff14", "html_url": "https://github.com/rust-lang/rust/commit/b835877d2ecba1b91ac74fee5b042ac0673aff14"}], "stats": {"total": 38, "additions": 2, "deletions": 36}, "files": [{"sha": "66a1634ebce6a57e1476a9b3fb32b660468b5908", "filename": "clippy_lints/src/const_static_lifetime.rs", "status": "modified", "additions": 1, "deletions": 17, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/73f2ba5ded4452839d2025f6fe6eb0818685fa2a/clippy_lints%2Fsrc%2Fconst_static_lifetime.rs", "raw_url": "https://github.com/rust-lang/rust/raw/73f2ba5ded4452839d2025f6fe6eb0818685fa2a/clippy_lints%2Fsrc%2Fconst_static_lifetime.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fconst_static_lifetime.rs?ref=73f2ba5ded4452839d2025f6fe6eb0818685fa2a", "patch": "@@ -87,21 +87,5 @@ impl EarlyLintPass for StaticConst {\n         }\n     }\n \n-    fn check_trait_item(&mut self, cx: &EarlyContext, item: &TraitItem) {\n-        if !in_macro(item.span) {\n-            // Match only constants...\n-            if let TraitItemKind::Const(ref var_type, _) = item.node {\n-                self.visit_type(var_type, cx);\n-            }\n-        }\n-    }\n-\n-    fn check_impl_item(&mut self, cx: &EarlyContext, item: &ImplItem) {\n-        if !in_macro(item.span) {\n-            // Match only constants...\n-            if let ImplItemKind::Const(ref var_type, _) = item.node {\n-                self.visit_type(var_type, cx);\n-            }\n-        }\n-    }\n+    // Don't check associated consts because `'static` cannot be elided on those (issue #2438)\n }"}, {"sha": "db33744c7a9bf857bf2169f3167cc0d4dd5c144f", "filename": "tests/ui/const_static_lifetime.stderr", "status": "modified", "additions": 1, "deletions": 19, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/73f2ba5ded4452839d2025f6fe6eb0818685fa2a/tests%2Fui%2Fconst_static_lifetime.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/73f2ba5ded4452839d2025f6fe6eb0818685fa2a/tests%2Fui%2Fconst_static_lifetime.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fconst_static_lifetime.stderr?ref=73f2ba5ded4452839d2025f6fe6eb0818685fa2a", "patch": "@@ -78,23 +78,5 @@ error: Constants have by default a `'static` lifetime\n 24 | const VAR_ARRAY: &'static [u8; 1] = b\"T\"; // ERROR Consider removing 'static.\n    |                  -^^^^^^^-------- help: consider removing `'static`: `&[u8; 1]`\n \n-error: Constants have by default a `'static` lifetime\n-  --> $DIR/const_static_lifetime.rs:40:23\n-   |\n-40 |     const TRAIT_VAR: &'static str;\n-   |                      -^^^^^^^---- help: consider removing `'static`: `&str`\n-\n-error: Constants have by default a `'static` lifetime\n-  --> $DIR/const_static_lifetime.rs:44:22\n-   |\n-44 |     const IMPL_VAR: &'static str = \"var\";\n-   |                     -^^^^^^^---- help: consider removing `'static`: `&str`\n-\n-error: Constants have by default a `'static` lifetime\n-  --> $DIR/const_static_lifetime.rs:48:23\n-   |\n-48 |     const TRAIT_VAR: &'static str = \"foo\";\n-   |                      -^^^^^^^---- help: consider removing `'static`: `&str`\n-\n-error: aborting due to 16 previous errors\n+error: aborting due to 13 previous errors\n "}]}