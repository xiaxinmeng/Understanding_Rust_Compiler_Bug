{"sha": "ed8e13c2cbd7c27aec7666bf3f4a98fe6bc24f2b", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVkOGUxM2MyY2JkN2MyN2FlYzc2NjZiZjNmNGE5OGZlNmJjMjRmMmI=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-08-25T00:44:59Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-08-25T00:44:59Z"}, "message": "Rollup merge of #63813 - estebank:int-from, r=varkor\n\nDo not suggest `.try_into()` on `i32::from(x)`\n\nFix #63697.", "tree": {"sha": "8195506d91b345979092522e9ffb370c643bfe7c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8195506d91b345979092522e9ffb370c643bfe7c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ed8e13c2cbd7c27aec7666bf3f4a98fe6bc24f2b", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdYdoLCRBK7hj4Ov3rIwAAdHIIAI/OCXX4651Oaf29m9yPMHZR\n8dRoMaGzbAVLD6jMFTQl/8HZ28DDeJV02fsMH9e4RnNZEaRlziMngb3DhVMr+lmc\nGqUntkfuz/TFEAnMnEij1Ami5amenEtnF1yXRn7jWGjcKBPda6/bq37TFZWdvRU0\nzYI/bZGXwFBc0hEmulULMV1AnWkmGyy0YU1Unn1nN3hnjSSlrWDThlCeN8f1LsJy\nQ8zIww4nHTOIn6xrCjK83eVMZGDv8bW+PJDkAMKIxIJNGV3uSBwf5z8MXFziWi+C\nu12UZZ3Fsa1wWVIymeK/4+zqdpKPggog4lQYQlItzeqwUXas/ajiHs6XWuDb2qs=\n=3tr6\n-----END PGP SIGNATURE-----\n", "payload": "tree 8195506d91b345979092522e9ffb370c643bfe7c\nparent 5761fc759a283b8d8db8b5267fb94f16936e61a0\nparent 1acb53753be395f6b5bd880617ddceaa4bfadcfa\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1566693899 +0200\ncommitter GitHub <noreply@github.com> 1566693899 +0200\n\nRollup merge of #63813 - estebank:int-from, r=varkor\n\nDo not suggest `.try_into()` on `i32::from(x)`\n\nFix #63697.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ed8e13c2cbd7c27aec7666bf3f4a98fe6bc24f2b", "html_url": "https://github.com/rust-lang/rust/commit/ed8e13c2cbd7c27aec7666bf3f4a98fe6bc24f2b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ed8e13c2cbd7c27aec7666bf3f4a98fe6bc24f2b/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5761fc759a283b8d8db8b5267fb94f16936e61a0", "url": "https://api.github.com/repos/rust-lang/rust/commits/5761fc759a283b8d8db8b5267fb94f16936e61a0", "html_url": "https://github.com/rust-lang/rust/commit/5761fc759a283b8d8db8b5267fb94f16936e61a0"}, {"sha": "1acb53753be395f6b5bd880617ddceaa4bfadcfa", "url": "https://api.github.com/repos/rust-lang/rust/commits/1acb53753be395f6b5bd880617ddceaa4bfadcfa", "html_url": "https://github.com/rust-lang/rust/commit/1acb53753be395f6b5bd880617ddceaa4bfadcfa"}], "stats": {"total": 36, "additions": 36, "deletions": 0}, "files": [{"sha": "0efc433341c1fa343586fb534a94de497b749845", "filename": "src/librustc_typeck/check/demand.rs", "status": "modified", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/ed8e13c2cbd7c27aec7666bf3f4a98fe6bc24f2b/src%2Flibrustc_typeck%2Fcheck%2Fdemand.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ed8e13c2cbd7c27aec7666bf3f4a98fe6bc24f2b/src%2Flibrustc_typeck%2Fcheck%2Fdemand.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fdemand.rs?ref=ed8e13c2cbd7c27aec7666bf3f4a98fe6bc24f2b", "patch": "@@ -587,6 +587,30 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n                 return false;\n             }\n         }\n+        if let hir::ExprKind::Call(path, args) = &expr.node {\n+            if let (\n+                hir::ExprKind::Path(hir::QPath::TypeRelative(base_ty, path_segment)),\n+                1,\n+            ) = (&path.node, args.len()) {\n+                // `expr` is a conversion like `u32::from(val)`, do not suggest anything (#63697).\n+                if let (\n+                    hir::TyKind::Path(hir::QPath::Resolved(None, base_ty_path)),\n+                    sym::from,\n+                ) = (&base_ty.node, path_segment.ident.name) {\n+                    if let Some(ident) = &base_ty_path.segments.iter().map(|s| s.ident).next() {\n+                        match ident.name {\n+                            sym::i128 | sym::i64 | sym::i32 | sym::i16 | sym::i8 |\n+                            sym::u128 | sym::u64 | sym::u32 | sym::u16 | sym::u8 |\n+                            sym::isize | sym::usize\n+                            if base_ty_path.segments.len() == 1 => {\n+                                return false;\n+                            }\n+                            _ => {}\n+                        }\n+                    }\n+                }\n+            }\n+        }\n \n         let msg = format!(\"you can convert an `{}` to `{}`\", checked_ty, expected_ty);\n         let cast_msg = format!(\"you can cast an `{} to `{}`\", checked_ty, expected_ty);"}, {"sha": "56549da9c7358b694ad351d442b97ab0de665003", "filename": "src/test/ui/suggestions/mismatched-types-numeric-from.rs", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/ed8e13c2cbd7c27aec7666bf3f4a98fe6bc24f2b/src%2Ftest%2Fui%2Fsuggestions%2Fmismatched-types-numeric-from.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ed8e13c2cbd7c27aec7666bf3f4a98fe6bc24f2b/src%2Ftest%2Fui%2Fsuggestions%2Fmismatched-types-numeric-from.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Fmismatched-types-numeric-from.rs?ref=ed8e13c2cbd7c27aec7666bf3f4a98fe6bc24f2b", "patch": "@@ -0,0 +1,3 @@\n+fn main() {\n+    let _: u32 = i32::from(0_u8); //~ ERROR mismatched types\n+}"}, {"sha": "223b6747322c14bf061bba5e510a31881b2499d1", "filename": "src/test/ui/suggestions/mismatched-types-numeric-from.stderr", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/ed8e13c2cbd7c27aec7666bf3f4a98fe6bc24f2b/src%2Ftest%2Fui%2Fsuggestions%2Fmismatched-types-numeric-from.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/ed8e13c2cbd7c27aec7666bf3f4a98fe6bc24f2b/src%2Ftest%2Fui%2Fsuggestions%2Fmismatched-types-numeric-from.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Fmismatched-types-numeric-from.stderr?ref=ed8e13c2cbd7c27aec7666bf3f4a98fe6bc24f2b", "patch": "@@ -0,0 +1,9 @@\n+error[E0308]: mismatched types\n+  --> $DIR/mismatched-types-numeric-from.rs:2:18\n+   |\n+LL |     let _: u32 = i32::from(0_u8);\n+   |                  ^^^^^^^^^^^^^^^ expected u32, found i32\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0308`."}]}