{"sha": "9ca26f111aeb8fc9b6de59ea0e94857f062cc0de", "node_id": "C_kwDOAAsO6NoAKDljYTI2ZjExMWFlYjhmYzliNmRlNTllYTBlOTQ4NTdmMDYyY2MwZGU", "commit": {"author": {"name": "Chris Denton", "email": "christophersdenton@gmail.com", "date": "2021-12-17T15:47:44Z"}, "committer": {"name": "Chris Denton", "email": "christophersdenton@gmail.com", "date": "2021-12-17T15:47:44Z"}, "message": "Enable `#[thread_local]` for all windows-msvc targets", "tree": {"sha": "6629448f2430c21664f41ee3ddae0175d65d9691", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6629448f2430c21664f41ee3ddae0175d65d9691"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9ca26f111aeb8fc9b6de59ea0e94857f062cc0de", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE+p/jD6jrzmnSIWJLcTRy8vRWJ94FAmG8sSAACgkQcTRy8vRW\nJ97FYA/+K0cdESVZTVmQIHRbnd6HqYJ4DLSVhGiS9pvmXOl8B4RD0sXWyVY31tuF\nV0bKXCJYzQnMPyYGj/43dOSLJ6ygCozBNWQ1R7LFQCT5vhO2OaM3ybfLDerr7YjD\nEdX9qq2HlMxOlG1ePNfikEIYBZjS89iRsZEfdOWUBmwQxxkqp3yyLc8gmyGuad2b\nkCkfTbE3LLkBnkHfg088kR/1NHRw+J5eGz63nUk2GMvBRfMd/62Nu79qWcL+A0Wx\nGQeRK3JHpi/wKoAjSat2Lt1EjrM1gpi0+hEPu4xgO4EXhjmrSRjHEdGaAZpJf6r2\nfJU+0v2lOgr1A159FpbvIlisrIDJCP9fv3mHC4J+o0T/C/NzDfYBDNegHSfuuhwY\nrA+De7IyotY+0EGTvhiYGEu17z3qZZZPxsBi23hnhY08ZLj6W4q7Tv6iTTh8vSJx\nBV7YCSH3IrtSuRmD1e8avx+57wN+HbBJb/Juniv5TM2qM+a5k6bYT/aCDqPSKwRd\n8uMmayYvKe4wnjbdfv0+37TuLp7llk8Ej+0jztsp6xKoDhJA/fF2UfWNY/6o7N+h\ntXhafFXtrLBtBVTjTMarY//3bt8TiZiyV6QNK2iG3dYrOoD0M8gXzqKY6ZiGiGyK\nwhOqwLR1wFBQJuK5nA1xTYiltz7fKOaNK2NSB64umo7/0X7Drhk=\n=oBvK\n-----END PGP SIGNATURE-----", "payload": "tree 6629448f2430c21664f41ee3ddae0175d65d9691\nparent 2595d038273a4c7746320efd06200764f99bd760\nauthor Chris Denton <christophersdenton@gmail.com> 1639756064 +0000\ncommitter Chris Denton <christophersdenton@gmail.com> 1639756064 +0000\n\nEnable `#[thread_local]` for all windows-msvc targets\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9ca26f111aeb8fc9b6de59ea0e94857f062cc0de", "html_url": "https://github.com/rust-lang/rust/commit/9ca26f111aeb8fc9b6de59ea0e94857f062cc0de", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9ca26f111aeb8fc9b6de59ea0e94857f062cc0de/comments", "author": {"login": "ChrisDenton", "id": 4459874, "node_id": "MDQ6VXNlcjQ0NTk4NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4459874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ChrisDenton", "html_url": "https://github.com/ChrisDenton", "followers_url": "https://api.github.com/users/ChrisDenton/followers", "following_url": "https://api.github.com/users/ChrisDenton/following{/other_user}", "gists_url": "https://api.github.com/users/ChrisDenton/gists{/gist_id}", "starred_url": "https://api.github.com/users/ChrisDenton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ChrisDenton/subscriptions", "organizations_url": "https://api.github.com/users/ChrisDenton/orgs", "repos_url": "https://api.github.com/users/ChrisDenton/repos", "events_url": "https://api.github.com/users/ChrisDenton/events{/privacy}", "received_events_url": "https://api.github.com/users/ChrisDenton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ChrisDenton", "id": 4459874, "node_id": "MDQ6VXNlcjQ0NTk4NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4459874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ChrisDenton", "html_url": "https://github.com/ChrisDenton", "followers_url": "https://api.github.com/users/ChrisDenton/followers", "following_url": "https://api.github.com/users/ChrisDenton/following{/other_user}", "gists_url": "https://api.github.com/users/ChrisDenton/gists{/gist_id}", "starred_url": "https://api.github.com/users/ChrisDenton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ChrisDenton/subscriptions", "organizations_url": "https://api.github.com/users/ChrisDenton/orgs", "repos_url": "https://api.github.com/users/ChrisDenton/repos", "events_url": "https://api.github.com/users/ChrisDenton/events{/privacy}", "received_events_url": "https://api.github.com/users/ChrisDenton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2595d038273a4c7746320efd06200764f99bd760", "url": "https://api.github.com/repos/rust-lang/rust/commits/2595d038273a4c7746320efd06200764f99bd760", "html_url": "https://github.com/rust-lang/rust/commit/2595d038273a4c7746320efd06200764f99bd760"}], "stats": {"total": 7, "additions": 1, "deletions": 6}, "files": [{"sha": "a9a0977e70285c9c5eed6174a2df26a7071277ba", "filename": "compiler/rustc_target/src/spec/aarch64_pc_windows_msvc.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/9ca26f111aeb8fc9b6de59ea0e94857f062cc0de/compiler%2Frustc_target%2Fsrc%2Fspec%2Faarch64_pc_windows_msvc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9ca26f111aeb8fc9b6de59ea0e94857f062cc0de/compiler%2Frustc_target%2Fsrc%2Fspec%2Faarch64_pc_windows_msvc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Faarch64_pc_windows_msvc.rs?ref=9ca26f111aeb8fc9b6de59ea0e94857f062cc0de", "patch": "@@ -3,7 +3,6 @@ use crate::spec::Target;\n pub fn target() -> Target {\n     let mut base = super::windows_msvc_base::opts();\n     base.max_atomic_width = Some(64);\n-    base.has_elf_tls = true;\n     base.features = \"+neon,+fp-armv8\".to_string();\n \n     Target {"}, {"sha": "db4eb204e0b127307cfcaba2979b297e3bcba752", "filename": "compiler/rustc_target/src/spec/aarch64_uwp_windows_msvc.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/9ca26f111aeb8fc9b6de59ea0e94857f062cc0de/compiler%2Frustc_target%2Fsrc%2Fspec%2Faarch64_uwp_windows_msvc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9ca26f111aeb8fc9b6de59ea0e94857f062cc0de/compiler%2Frustc_target%2Fsrc%2Fspec%2Faarch64_uwp_windows_msvc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Faarch64_uwp_windows_msvc.rs?ref=9ca26f111aeb8fc9b6de59ea0e94857f062cc0de", "patch": "@@ -3,7 +3,6 @@ use crate::spec::Target;\n pub fn target() -> Target {\n     let mut base = super::windows_uwp_msvc_base::opts();\n     base.max_atomic_width = Some(64);\n-    base.has_elf_tls = true;\n \n     Target {\n         llvm_target: \"aarch64-pc-windows-msvc\".to_string(),"}, {"sha": "05f204c56044612c2ee9825d86ccee642206275a", "filename": "compiler/rustc_target/src/spec/i686_uwp_windows_msvc.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/9ca26f111aeb8fc9b6de59ea0e94857f062cc0de/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_uwp_windows_msvc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9ca26f111aeb8fc9b6de59ea0e94857f062cc0de/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_uwp_windows_msvc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_uwp_windows_msvc.rs?ref=9ca26f111aeb8fc9b6de59ea0e94857f062cc0de", "patch": "@@ -4,7 +4,6 @@ pub fn target() -> Target {\n     let mut base = super::windows_uwp_msvc_base::opts();\n     base.cpu = \"pentium4\".to_string();\n     base.max_atomic_width = Some(64);\n-    base.has_elf_tls = true;\n \n     Target {\n         llvm_target: \"i686-pc-windows-msvc\".to_string(),"}, {"sha": "72d39ef9a95ac1085c347c5d860dd662fde9c5ba", "filename": "compiler/rustc_target/src/spec/thumbv7a_uwp_windows_msvc.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/9ca26f111aeb8fc9b6de59ea0e94857f062cc0de/compiler%2Frustc_target%2Fsrc%2Fspec%2Fthumbv7a_uwp_windows_msvc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9ca26f111aeb8fc9b6de59ea0e94857f062cc0de/compiler%2Frustc_target%2Fsrc%2Fspec%2Fthumbv7a_uwp_windows_msvc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fthumbv7a_uwp_windows_msvc.rs?ref=9ca26f111aeb8fc9b6de59ea0e94857f062cc0de", "patch": "@@ -9,7 +9,6 @@ pub fn target() -> Target {\n         options: TargetOptions {\n             features: \"+vfp3,+neon\".to_string(),\n             max_atomic_width: Some(64),\n-            has_elf_tls: true,\n             // FIXME(jordanrh): use PanicStrategy::Unwind when SEH is\n             // implemented for windows/arm in LLVM\n             panic_strategy: PanicStrategy::Abort,"}, {"sha": "5ef652857ad71d63fe3ac26121f1420cd5dbaa65", "filename": "compiler/rustc_target/src/spec/windows_msvc_base.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/9ca26f111aeb8fc9b6de59ea0e94857f062cc0de/compiler%2Frustc_target%2Fsrc%2Fspec%2Fwindows_msvc_base.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9ca26f111aeb8fc9b6de59ea0e94857f062cc0de/compiler%2Frustc_target%2Fsrc%2Fspec%2Fwindows_msvc_base.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fwindows_msvc_base.rs?ref=9ca26f111aeb8fc9b6de59ea0e94857f062cc0de", "patch": "@@ -27,6 +27,7 @@ pub fn opts() -> TargetOptions {\n         // linking some libraries which require a specific agreement, so it may\n         // not ever be possible for us to pass this flag.\n         no_default_libraries: false,\n+        has_elf_tls: true,\n \n         ..base\n     }"}, {"sha": "1c4ccebb488c52a56c26d3ffd210369410b2de7e", "filename": "compiler/rustc_target/src/spec/x86_64_pc_windows_msvc.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/9ca26f111aeb8fc9b6de59ea0e94857f062cc0de/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_pc_windows_msvc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9ca26f111aeb8fc9b6de59ea0e94857f062cc0de/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_pc_windows_msvc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_pc_windows_msvc.rs?ref=9ca26f111aeb8fc9b6de59ea0e94857f062cc0de", "patch": "@@ -4,7 +4,6 @@ pub fn target() -> Target {\n     let mut base = super::windows_msvc_base::opts();\n     base.cpu = \"x86-64\".to_string();\n     base.max_atomic_width = Some(64);\n-    base.has_elf_tls = true;\n \n     Target {\n         llvm_target: \"x86_64-pc-windows-msvc\".to_string(),"}, {"sha": "06ccc272300d65c12c8d6a476fff78f268eed758", "filename": "compiler/rustc_target/src/spec/x86_64_uwp_windows_msvc.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/9ca26f111aeb8fc9b6de59ea0e94857f062cc0de/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_uwp_windows_msvc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9ca26f111aeb8fc9b6de59ea0e94857f062cc0de/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_uwp_windows_msvc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_uwp_windows_msvc.rs?ref=9ca26f111aeb8fc9b6de59ea0e94857f062cc0de", "patch": "@@ -4,7 +4,6 @@ pub fn target() -> Target {\n     let mut base = super::windows_uwp_msvc_base::opts();\n     base.cpu = \"x86-64\".to_string();\n     base.max_atomic_width = Some(64);\n-    base.has_elf_tls = true;\n \n     Target {\n         llvm_target: \"x86_64-pc-windows-msvc\".to_string(),"}]}