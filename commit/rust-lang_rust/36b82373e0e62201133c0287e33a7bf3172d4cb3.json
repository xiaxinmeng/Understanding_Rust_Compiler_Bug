{"sha": "36b82373e0e62201133c0287e33a7bf3172d4cb3", "node_id": "C_kwDOAAsO6NoAKDM2YjgyMzczZTBlNjIyMDExMzNjMDI4N2UzM2E3YmYzMTcyZDRjYjM", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2023-03-16T07:57:07Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-03-16T07:57:07Z"}, "message": "Rollup merge of #109158 - Ezrashaw:expand-sugg-for-unused-lint, r=Nilstrieb\n\nerror-msg: expand suggestion for `unused_def` lint\n\nFixes #108885\n\nExpands `let _ = ..` suggestion into more positions.", "tree": {"sha": "386b92a2dbc67089f02ee9dcd4839d38ec0a1f23", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/386b92a2dbc67089f02ee9dcd4839d38ec0a1f23"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/36b82373e0e62201133c0287e33a7bf3172d4cb3", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJkEsvTCRBK7hj4Ov3rIwAAl54IAHRhdJviCngn5Q69uR9i9xks\ng+AO3pjPI+fAJyVaE/beK7TcJ25HfGgo/ZuTv42InL4ADkpasdEypskcUvX3wNu4\ncMphbtE8t4L130pd1rgX+Lu0VmunPfOgE6pdjMdbnhaz25SZdOSuvENyVcwsmroW\nURzxMtUlE80moTJCphq3kdjVzUv1B/JOqf0XxjodHnilnrtyRhpilQWAfq3DQrQz\nGBA9Mc3RlMp+y1tPOtAsdl7mcymZ16UJLu1HKT+DQVaNQhqjNVm0XGIcxOdBFfa/\n3YZr+QOXO7skF5uRmYfEaJNQ1mFi2ikiytQkoWKavWTbujWOFxGRNfPRFyDostg=\n=yOds\n-----END PGP SIGNATURE-----\n", "payload": "tree 386b92a2dbc67089f02ee9dcd4839d38ec0a1f23\nparent 9d5d4474215de517a1ef576349a93c328240e84e\nparent 35103fe8ab588348be8cb679c8ced006b946755f\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1678953427 +0100\ncommitter GitHub <noreply@github.com> 1678953427 +0100\n\nRollup merge of #109158 - Ezrashaw:expand-sugg-for-unused-lint, r=Nilstrieb\n\nerror-msg: expand suggestion for `unused_def` lint\n\nFixes #108885\n\nExpands `let _ = ..` suggestion into more positions.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/36b82373e0e62201133c0287e33a7bf3172d4cb3", "html_url": "https://github.com/rust-lang/rust/commit/36b82373e0e62201133c0287e33a7bf3172d4cb3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/36b82373e0e62201133c0287e33a7bf3172d4cb3/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9d5d4474215de517a1ef576349a93c328240e84e", "url": "https://api.github.com/repos/rust-lang/rust/commits/9d5d4474215de517a1ef576349a93c328240e84e", "html_url": "https://github.com/rust-lang/rust/commit/9d5d4474215de517a1ef576349a93c328240e84e"}, {"sha": "35103fe8ab588348be8cb679c8ced006b946755f", "url": "https://api.github.com/repos/rust-lang/rust/commits/35103fe8ab588348be8cb679c8ced006b946755f", "html_url": "https://github.com/rust-lang/rust/commit/35103fe8ab588348be8cb679c8ced006b946755f"}], "stats": {"total": 169, "additions": 138, "deletions": 31}, "files": [{"sha": "308c02929ca42b2e469d5c01caf5a3ff55b3c086", "filename": "compiler/rustc_lint/src/lints.rs", "status": "modified", "additions": 10, "deletions": 12, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/36b82373e0e62201133c0287e33a7bf3172d4cb3/compiler%2Frustc_lint%2Fsrc%2Flints.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36b82373e0e62201133c0287e33a7bf3172d4cb3/compiler%2Frustc_lint%2Fsrc%2Flints.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_lint%2Fsrc%2Flints.rs?ref=36b82373e0e62201133c0287e33a7bf3172d4cb3", "patch": "@@ -1390,7 +1390,7 @@ pub struct UnusedOp<'a> {\n     pub op: &'a str,\n     #[label]\n     pub label: Span,\n-    #[suggestion(style = \"verbose\", code = \"let _ = \", applicability = \"machine-applicable\")]\n+    #[suggestion(style = \"verbose\", code = \"let _ = \", applicability = \"maybe-incorrect\")]\n     pub suggestion: Span,\n }\n \n@@ -1434,17 +1434,15 @@ pub struct UnusedDef<'a, 'b> {\n }\n \n #[derive(Subdiagnostic)]\n-pub enum UnusedDefSuggestion {\n-    #[suggestion(\n-        lint_suggestion,\n-        style = \"verbose\",\n-        code = \"let _ = \",\n-        applicability = \"machine-applicable\"\n-    )]\n-    Default {\n-        #[primary_span]\n-        span: Span,\n-    },\n+#[suggestion(\n+    lint_suggestion,\n+    style = \"verbose\",\n+    code = \"let _ = \",\n+    applicability = \"maybe-incorrect\"\n+)]\n+pub struct UnusedDefSuggestion {\n+    #[primary_span]\n+    pub span: Span,\n }\n \n // Needed because of def_path_str"}, {"sha": "faca61fc29bf97bcfc5b75380415b8753ea2376e", "filename": "compiler/rustc_lint/src/unused.rs", "status": "modified", "additions": 12, "deletions": 19, "changes": 31, "blob_url": "https://github.com/rust-lang/rust/blob/36b82373e0e62201133c0287e33a7bf3172d4cb3/compiler%2Frustc_lint%2Fsrc%2Funused.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36b82373e0e62201133c0287e33a7bf3172d4cb3/compiler%2Frustc_lint%2Fsrc%2Funused.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_lint%2Fsrc%2Funused.rs?ref=36b82373e0e62201133c0287e33a7bf3172d4cb3", "patch": "@@ -123,7 +123,7 @@ impl<'tcx> LateLintPass<'tcx> for UnusedResults {\n         let must_use_result = is_ty_must_use(cx, ty, &expr, expr.span);\n         let type_lint_emitted_or_suppressed = match must_use_result {\n             Some(path) => {\n-                emit_must_use_untranslated(cx, &path, \"\", \"\", 1);\n+                emit_must_use_untranslated(cx, &path, \"\", \"\", 1, false);\n                 true\n             }\n             None => false,\n@@ -358,6 +358,7 @@ impl<'tcx> LateLintPass<'tcx> for UnusedResults {\n                         descr_pre_path,\n                         descr_post_path,\n                         1,\n+                        false,\n                     )\n                 })\n                 .is_some()\n@@ -370,27 +371,30 @@ impl<'tcx> LateLintPass<'tcx> for UnusedResults {\n             descr_pre: &str,\n             descr_post: &str,\n             plural_len: usize,\n+            is_inner: bool,\n         ) {\n             let plural_suffix = pluralize!(plural_len);\n \n             match path {\n                 MustUsePath::Suppressed => {}\n                 MustUsePath::Boxed(path) => {\n                     let descr_pre = &format!(\"{}boxed \", descr_pre);\n-                    emit_must_use_untranslated(cx, path, descr_pre, descr_post, plural_len);\n+                    emit_must_use_untranslated(cx, path, descr_pre, descr_post, plural_len, true);\n                 }\n                 MustUsePath::Opaque(path) => {\n                     let descr_pre = &format!(\"{}implementer{} of \", descr_pre, plural_suffix);\n-                    emit_must_use_untranslated(cx, path, descr_pre, descr_post, plural_len);\n+                    emit_must_use_untranslated(cx, path, descr_pre, descr_post, plural_len, true);\n                 }\n                 MustUsePath::TraitObject(path) => {\n                     let descr_post = &format!(\" trait object{}{}\", plural_suffix, descr_post);\n-                    emit_must_use_untranslated(cx, path, descr_pre, descr_post, plural_len);\n+                    emit_must_use_untranslated(cx, path, descr_pre, descr_post, plural_len, true);\n                 }\n                 MustUsePath::TupleElement(elems) => {\n                     for (index, path) in elems {\n                         let descr_post = &format!(\" in tuple element {}\", index);\n-                        emit_must_use_untranslated(cx, path, descr_pre, descr_post, plural_len);\n+                        emit_must_use_untranslated(\n+                            cx, path, descr_pre, descr_post, plural_len, true,\n+                        );\n                     }\n                 }\n                 MustUsePath::Array(path, len) => {\n@@ -401,6 +405,7 @@ impl<'tcx> LateLintPass<'tcx> for UnusedResults {\n                         descr_pre,\n                         descr_post,\n                         plural_len.saturating_add(usize::try_from(*len).unwrap_or(usize::MAX)),\n+                        true,\n                     );\n                 }\n                 MustUsePath::Closure(span) => {\n@@ -418,19 +423,6 @@ impl<'tcx> LateLintPass<'tcx> for UnusedResults {\n                     );\n                 }\n                 MustUsePath::Def(span, def_id, reason) => {\n-                    let suggestion = if matches!(\n-                        cx.tcx.get_diagnostic_name(*def_id),\n-                        Some(sym::add)\n-                            | Some(sym::sub)\n-                            | Some(sym::mul)\n-                            | Some(sym::div)\n-                            | Some(sym::rem)\n-                            | Some(sym::neg),\n-                    ) {\n-                        Some(UnusedDefSuggestion::Default { span: span.shrink_to_lo() })\n-                    } else {\n-                        None\n-                    };\n                     cx.emit_spanned_lint(\n                         UNUSED_MUST_USE,\n                         *span,\n@@ -440,7 +432,8 @@ impl<'tcx> LateLintPass<'tcx> for UnusedResults {\n                             cx,\n                             def_id: *def_id,\n                             note: *reason,\n-                            suggestion,\n+                            suggestion: (!is_inner)\n+                                .then_some(UnusedDefSuggestion { span: span.shrink_to_lo() }),\n                         },\n                     );\n                 }"}, {"sha": "123ce71727f67c0dd4641a046b73472abedb8376", "filename": "tests/ui/conditional-compilation/cfg-attr-multi-true.stderr", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/36b82373e0e62201133c0287e33a7bf3172d4cb3/tests%2Fui%2Fconditional-compilation%2Fcfg-attr-multi-true.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/36b82373e0e62201133c0287e33a7bf3172d4cb3/tests%2Fui%2Fconditional-compilation%2Fcfg-attr-multi-true.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fconditional-compilation%2Fcfg-attr-multi-true.stderr?ref=36b82373e0e62201133c0287e33a7bf3172d4cb3", "patch": "@@ -35,6 +35,10 @@ note: the lint level is defined here\n    |\n LL | #![warn(unused_must_use)]\n    |         ^^^^^^^^^^^^^^^\n+help: use `let _ = ...` to ignore the resulting value\n+   |\n+LL |     let _ = MustUseDeprecated::new();\n+   |     +++++++\n \n warning: 5 warnings emitted\n "}, {"sha": "e88c1a9b8a9b99c0d3e4fae7b8818b451a6db6ab", "filename": "tests/ui/lint/fn_must_use.stderr", "status": "modified", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/36b82373e0e62201133c0287e33a7bf3172d4cb3/tests%2Fui%2Flint%2Ffn_must_use.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/36b82373e0e62201133c0287e33a7bf3172d4cb3/tests%2Fui%2Flint%2Ffn_must_use.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Flint%2Ffn_must_use.stderr?ref=36b82373e0e62201133c0287e33a7bf3172d4cb3", "patch": "@@ -10,12 +10,21 @@ note: the lint level is defined here\n    |\n LL | #![warn(unused_must_use)]\n    |         ^^^^^^^^^^^^^^^\n+help: use `let _ = ...` to ignore the resulting value\n+   |\n+LL |     let _ = need_to_use_this_value();\n+   |     +++++++\n \n warning: unused return value of `MyStruct::need_to_use_this_method_value` that must be used\n   --> $DIR/fn_must_use.rs:60:5\n    |\n LL |     m.need_to_use_this_method_value();\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   |\n+help: use `let _ = ...` to ignore the resulting value\n+   |\n+LL |     let _ = m.need_to_use_this_method_value();\n+   |     +++++++\n \n warning: unused return value of `EvenNature::is_even` that must be used\n   --> $DIR/fn_must_use.rs:61:5\n@@ -24,24 +33,43 @@ LL |     m.is_even(); // trait method!\n    |     ^^^^^^^^^^^\n    |\n    = note: no side effects\n+help: use `let _ = ...` to ignore the resulting value\n+   |\n+LL |     let _ = m.is_even(); // trait method!\n+   |     +++++++\n \n warning: unused return value of `MyStruct::need_to_use_this_associated_function_value` that must be used\n   --> $DIR/fn_must_use.rs:64:5\n    |\n LL |     MyStruct::need_to_use_this_associated_function_value();\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   |\n+help: use `let _ = ...` to ignore the resulting value\n+   |\n+LL |     let _ = MyStruct::need_to_use_this_associated_function_value();\n+   |     +++++++\n \n warning: unused return value of `std::cmp::PartialEq::eq` that must be used\n   --> $DIR/fn_must_use.rs:70:5\n    |\n LL |     2.eq(&3);\n    |     ^^^^^^^^\n+   |\n+help: use `let _ = ...` to ignore the resulting value\n+   |\n+LL |     let _ = 2.eq(&3);\n+   |     +++++++\n \n warning: unused return value of `std::cmp::PartialEq::eq` that must be used\n   --> $DIR/fn_must_use.rs:71:5\n    |\n LL |     m.eq(&n);\n    |     ^^^^^^^^\n+   |\n+help: use `let _ = ...` to ignore the resulting value\n+   |\n+LL |     let _ = m.eq(&n);\n+   |     +++++++\n \n warning: unused comparison that must be used\n   --> $DIR/fn_must_use.rs:74:5"}, {"sha": "4898db7fe3ddd7a76d49bc7b7061eb04961d4168", "filename": "tests/ui/lint/unused/must-use-box-from-raw.stderr", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/36b82373e0e62201133c0287e33a7bf3172d4cb3/tests%2Fui%2Flint%2Funused%2Fmust-use-box-from-raw.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/36b82373e0e62201133c0287e33a7bf3172d4cb3/tests%2Fui%2Flint%2Funused%2Fmust-use-box-from-raw.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Flint%2Funused%2Fmust-use-box-from-raw.stderr?ref=36b82373e0e62201133c0287e33a7bf3172d4cb3", "patch": "@@ -10,6 +10,10 @@ note: the lint level is defined here\n    |\n LL | #![warn(unused_must_use)]\n    |         ^^^^^^^^^^^^^^^\n+help: use `let _ = ...` to ignore the resulting value\n+   |\n+LL |     let _ = Box::from_raw(ptr);\n+   |     +++++++\n \n warning: 1 warning emitted\n "}, {"sha": "993a19e5f04ed85f4816a4974965bd5149434f14", "filename": "tests/ui/lint/unused/must_use-unit.stderr", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/36b82373e0e62201133c0287e33a7bf3172d4cb3/tests%2Fui%2Flint%2Funused%2Fmust_use-unit.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/36b82373e0e62201133c0287e33a7bf3172d4cb3/tests%2Fui%2Flint%2Funused%2Fmust_use-unit.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Flint%2Funused%2Fmust_use-unit.stderr?ref=36b82373e0e62201133c0287e33a7bf3172d4cb3", "patch": "@@ -9,12 +9,21 @@ note: the lint level is defined here\n    |\n LL | #![deny(unused_must_use)]\n    |         ^^^^^^^^^^^^^^^\n+help: use `let _ = ...` to ignore the resulting value\n+   |\n+LL |     let _ = foo();\n+   |     +++++++\n \n error: unused return value of `bar` that must be used\n   --> $DIR/must_use-unit.rs:15:5\n    |\n LL |     bar();\n    |     ^^^^^\n+   |\n+help: use `let _ = ...` to ignore the resulting value\n+   |\n+LL |     let _ = bar();\n+   |     +++++++\n \n error: aborting due to 2 previous errors\n "}, {"sha": "1c3702ba265c0480fa3b36a7e59b36a5f7e693c1", "filename": "tests/ui/lint/unused/unused-async.stderr", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/36b82373e0e62201133c0287e33a7bf3172d4cb3/tests%2Fui%2Flint%2Funused%2Funused-async.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/36b82373e0e62201133c0287e33a7bf3172d4cb3/tests%2Fui%2Flint%2Funused%2Funused-async.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Flint%2Funused%2Funused-async.stderr?ref=36b82373e0e62201133c0287e33a7bf3172d4cb3", "patch": "@@ -16,12 +16,22 @@ error: unused return value of `foo` that must be used\n    |\n LL |     foo();\n    |     ^^^^^\n+   |\n+help: use `let _ = ...` to ignore the resulting value\n+   |\n+LL |     let _ = foo();\n+   |     +++++++\n \n error: unused output of future returned by `foo` that must be used\n   --> $DIR/unused-async.rs:33:5\n    |\n LL |     foo().await;\n    |     ^^^^^^^^^^^\n+   |\n+help: use `let _ = ...` to ignore the resulting value\n+   |\n+LL |     let _ = foo().await;\n+   |     +++++++\n \n error: unused implementer of `Future` that must be used\n   --> $DIR/unused-async.rs:34:5\n@@ -36,12 +46,22 @@ error: unused return value of `bar` that must be used\n    |\n LL |     bar();\n    |     ^^^^^\n+   |\n+help: use `let _ = ...` to ignore the resulting value\n+   |\n+LL |     let _ = bar();\n+   |     +++++++\n \n error: unused output of future returned by `bar` that must be used\n   --> $DIR/unused-async.rs:36:5\n    |\n LL |     bar().await;\n    |     ^^^^^^^^^^^\n+   |\n+help: use `let _ = ...` to ignore the resulting value\n+   |\n+LL |     let _ = bar().await;\n+   |     +++++++\n \n error: unused implementer of `Future` that must be used\n   --> $DIR/unused-async.rs:37:5"}, {"sha": "f42995a65d13eadc51da96b262f48c8f9f9801f7", "filename": "tests/ui/lint/unused/unused-result.stderr", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/36b82373e0e62201133c0287e33a7bf3172d4cb3/tests%2Fui%2Flint%2Funused%2Funused-result.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/36b82373e0e62201133c0287e33a7bf3172d4cb3/tests%2Fui%2Flint%2Funused%2Funused-result.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Flint%2Funused%2Funused-result.stderr?ref=36b82373e0e62201133c0287e33a7bf3172d4cb3", "patch": "@@ -9,6 +9,10 @@ note: the lint level is defined here\n    |\n LL | #![deny(unused_results, unused_must_use)]\n    |                         ^^^^^^^^^^^^^^^\n+help: use `let _ = ...` to ignore the resulting value\n+   |\n+LL |     let _ = foo::<MustUse>();\n+   |     +++++++\n \n error: unused `MustUseMsg` that must be used\n   --> $DIR/unused-result.rs:22:5\n@@ -17,6 +21,10 @@ LL |     foo::<MustUseMsg>();\n    |     ^^^^^^^^^^^^^^^^^^^\n    |\n    = note: some message\n+help: use `let _ = ...` to ignore the resulting value\n+   |\n+LL |     let _ = foo::<MustUseMsg>();\n+   |     +++++++\n \n error: unused result of type `isize`\n   --> $DIR/unused-result.rs:34:5\n@@ -35,6 +43,11 @@ error: unused `MustUse` that must be used\n    |\n LL |     foo::<MustUse>();\n    |     ^^^^^^^^^^^^^^^^\n+   |\n+help: use `let _ = ...` to ignore the resulting value\n+   |\n+LL |     let _ = foo::<MustUse>();\n+   |     +++++++\n \n error: unused `MustUseMsg` that must be used\n   --> $DIR/unused-result.rs:36:5\n@@ -43,6 +56,10 @@ LL |     foo::<MustUseMsg>();\n    |     ^^^^^^^^^^^^^^^^^^^\n    |\n    = note: some message\n+help: use `let _ = ...` to ignore the resulting value\n+   |\n+LL |     let _ = foo::<MustUseMsg>();\n+   |     +++++++\n \n error: aborting due to 5 previous errors\n "}, {"sha": "9633767c4428767a162995e2c862ce7e6ab04eb5", "filename": "tests/ui/lint/unused/unused_attributes-must_use.stderr", "status": "modified", "additions": 34, "deletions": 0, "changes": 34, "blob_url": "https://github.com/rust-lang/rust/blob/36b82373e0e62201133c0287e33a7bf3172d4cb3/tests%2Fui%2Flint%2Funused%2Funused_attributes-must_use.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/36b82373e0e62201133c0287e33a7bf3172d4cb3/tests%2Fui%2Flint%2Funused%2Funused_attributes-must_use.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Flint%2Funused%2Funused_attributes-must_use.stderr?ref=36b82373e0e62201133c0287e33a7bf3172d4cb3", "patch": "@@ -146,42 +146,76 @@ note: the lint level is defined here\n    |\n LL | #![deny(unused_attributes, unused_must_use)]\n    |                            ^^^^^^^^^^^^^^^\n+help: use `let _ = ...` to ignore the resulting value\n+   |\n+LL |     let _ = X;\n+   |     +++++++\n \n error: unused `Y` that must be used\n   --> $DIR/unused_attributes-must_use.rs:104:5\n    |\n LL |     Y::Z;\n    |     ^^^^\n+   |\n+help: use `let _ = ...` to ignore the resulting value\n+   |\n+LL |     let _ = Y::Z;\n+   |     +++++++\n \n error: unused `U` that must be used\n   --> $DIR/unused_attributes-must_use.rs:105:5\n    |\n LL |     U { unit: () };\n    |     ^^^^^^^^^^^^^^\n+   |\n+help: use `let _ = ...` to ignore the resulting value\n+   |\n+LL |     let _ = U { unit: () };\n+   |     +++++++\n \n error: unused return value of `U::method` that must be used\n   --> $DIR/unused_attributes-must_use.rs:106:5\n    |\n LL |     U::method();\n    |     ^^^^^^^^^^^\n+   |\n+help: use `let _ = ...` to ignore the resulting value\n+   |\n+LL |     let _ = U::method();\n+   |     +++++++\n \n error: unused return value of `foo` that must be used\n   --> $DIR/unused_attributes-must_use.rs:107:5\n    |\n LL |     foo();\n    |     ^^^^^\n+   |\n+help: use `let _ = ...` to ignore the resulting value\n+   |\n+LL |     let _ = foo();\n+   |     +++++++\n \n error: unused return value of `foreign_foo` that must be used\n   --> $DIR/unused_attributes-must_use.rs:110:9\n    |\n LL |         foreign_foo();\n    |         ^^^^^^^^^^^^^\n+   |\n+help: use `let _ = ...` to ignore the resulting value\n+   |\n+LL |         let _ = foreign_foo();\n+   |         +++++++\n \n error: unused return value of `Use::get_four` that must be used\n   --> $DIR/unused_attributes-must_use.rs:118:5\n    |\n LL |     ().get_four();\n    |     ^^^^^^^^^^^^^\n+   |\n+help: use `let _ = ...` to ignore the resulting value\n+   |\n+LL |     let _ = ().get_four();\n+   |     +++++++\n \n error: aborting due to 28 previous errors\n "}]}