{"sha": "a54baad4fa177efac04eafd6d9ffe6236f7d3c45", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE1NGJhYWQ0ZmExNzdlZmFjMDRlYWZkNmQ5ZmZlNjIzNmY3ZDNjNDU=", "commit": {"author": {"name": "Oliver Schneider", "email": "oli-obk@users.noreply.github.com", "date": "2017-10-08T09:51:15Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-10-08T09:51:15Z"}, "message": "Merge pull request #2112 from topecongiro/issue-2109\n\nAdd a suggestion to replace `map(f).unwrap_or(None)` with `and_then(f)`.", "tree": {"sha": "579dd517d059b9a203ea947f923e32ced4ffbdb5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/579dd517d059b9a203ea947f923e32ced4ffbdb5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a54baad4fa177efac04eafd6d9ffe6236f7d3c45", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a54baad4fa177efac04eafd6d9ffe6236f7d3c45", "html_url": "https://github.com/rust-lang/rust/commit/a54baad4fa177efac04eafd6d9ffe6236f7d3c45", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a54baad4fa177efac04eafd6d9ffe6236f7d3c45/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "45e5f28bb9b5464b4d2e493911f3e0f51452e9a2", "url": "https://api.github.com/repos/rust-lang/rust/commits/45e5f28bb9b5464b4d2e493911f3e0f51452e9a2", "html_url": "https://github.com/rust-lang/rust/commit/45e5f28bb9b5464b4d2e493911f3e0f51452e9a2"}, {"sha": "7f4b583c477850c937b5ad3012cc3f5216c2baeb", "url": "https://api.github.com/repos/rust-lang/rust/commits/7f4b583c477850c937b5ad3012cc3f5216c2baeb", "html_url": "https://github.com/rust-lang/rust/commit/7f4b583c477850c937b5ad3012cc3f5216c2baeb"}], "stats": {"total": 535, "additions": 291, "deletions": 244}, "files": [{"sha": "ca0d723022997901796d876f3c60c12544b623d2", "filename": "clippy_lints/src/methods.rs", "status": "modified", "additions": 22, "deletions": 14, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/a54baad4fa177efac04eafd6d9ffe6236f7d3c45/clippy_lints%2Fsrc%2Fmethods.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a54baad4fa177efac04eafd6d9ffe6236f7d3c45/clippy_lints%2Fsrc%2Fmethods.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmethods.rs?ref=a54baad4fa177efac04eafd6d9ffe6236f7d3c45", "patch": "@@ -1150,29 +1150,37 @@ fn lint_ok_expect(cx: &LateContext, expr: &hir::Expr, ok_args: &[hir::Expr]) {\n fn lint_map_unwrap_or(cx: &LateContext, expr: &hir::Expr, map_args: &[hir::Expr], unwrap_args: &[hir::Expr]) {\n     // lint if the caller of `map()` is an `Option`\n     if match_type(cx, cx.tables.expr_ty(&map_args[0]), &paths::OPTION) {\n-        // lint message\n-        let msg = \"called `map(f).unwrap_or(a)` on an Option value. This can be done more directly by calling \\\n-                   `map_or(a, f)` instead\";\n         // get snippets for args to map() and unwrap_or()\n         let map_snippet = snippet(cx, map_args[1].span, \"..\");\n         let unwrap_snippet = snippet(cx, unwrap_args[1].span, \"..\");\n+        // lint message\n+        // comparing the snippet from source to raw text (\"None\") below is safe\n+        // because we already have checked the type.\n+        let arg = if unwrap_snippet == \"None\" { \"None\" } else { \"a\" };\n+        let suggest = if unwrap_snippet == \"None\" { \"and_then(f)\" } else { \"map_or(a, f)\" };\n+        let msg = &format!(\n+            \"called `map(f).unwrap_or({})` on an Option value. \\\n+             This can be done more directly by calling `{}` instead\",\n+            arg,\n+            suggest\n+        );\n         // lint, with note if neither arg is > 1 line and both map() and\n         // unwrap_or() have the same span\n         let multiline = map_snippet.lines().count() > 1 || unwrap_snippet.lines().count() > 1;\n         let same_span = map_args[1].span.ctxt() == unwrap_args[1].span.ctxt();\n         if same_span && !multiline {\n-            span_note_and_lint(\n-                cx,\n-                OPTION_MAP_UNWRAP_OR,\n-                expr.span,\n-                msg,\n-                expr.span,\n-                &format!(\n-                    \"replace `map({0}).unwrap_or({1})` with `map_or({1}, {0})`\",\n-                    map_snippet,\n-                    unwrap_snippet\n-                ),\n+            let suggest = if unwrap_snippet == \"None\" {\n+                format!(\"and_then({})\", map_snippet)\n+            } else {\n+                format!(\"map_or({}, {})\", unwrap_snippet, map_snippet)\n+            };\n+            let note = format!(\n+                \"replace `map({}).unwrap_or({})` with `{}`\",\n+                map_snippet,\n+                unwrap_snippet,\n+                suggest\n             );\n+            span_note_and_lint(cx, OPTION_MAP_UNWRAP_OR, expr.span, msg, expr.span, &note);\n         } else if same_span && multiline {\n             span_lint(cx, OPTION_MAP_UNWRAP_OR, expr.span, msg);\n         };"}, {"sha": "3395280ba0570b2a0a59cb5039c717d41a0134fc", "filename": "tests/ui/methods.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/a54baad4fa177efac04eafd6d9ffe6236f7d3c45/tests%2Fui%2Fmethods.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a54baad4fa177efac04eafd6d9ffe6236f7d3c45/tests%2Fui%2Fmethods.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmethods.rs?ref=a54baad4fa177efac04eafd6d9ffe6236f7d3c45", "patch": "@@ -108,6 +108,16 @@ fn option_methods() {\n                .unwrap_or({\n                     0\n                 });\n+    // single line `map(f).unwrap_or(None)` case\n+    let _ = opt.map(|x| Some(x + 1)).unwrap_or(None);\n+    // multiline `map(f).unwrap_or(None)` cases\n+    let _ = opt.map(|x| {\n+        Some(x + 1)\n+    }\n+    ).unwrap_or(None);\n+    let _ = opt\n+        .map(|x| Some(x + 1))\n+        .unwrap_or(None);\n     // macro case\n     let _ = opt_map!(opt, |x| x + 1).unwrap_or(0); // should not lint\n "}, {"sha": "a1bc219eaf87e9db4c063887de3dee0ba851cb1e", "filename": "tests/ui/methods.stderr", "status": "modified", "additions": 259, "deletions": 230, "changes": 489, "blob_url": "https://github.com/rust-lang/rust/blob/a54baad4fa177efac04eafd6d9ffe6236f7d3c45/tests%2Fui%2Fmethods.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a54baad4fa177efac04eafd6d9ffe6236f7d3c45/tests%2Fui%2Fmethods.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmethods.stderr?ref=a54baad4fa177efac04eafd6d9ffe6236f7d3c45", "patch": "@@ -134,705 +134,734 @@ error: called `map(f).unwrap_or(a)` on an Option value. This can be done more di\n 110 | |                 });\n     | |__________________^\n \n+error: called `map(f).unwrap_or(None)` on an Option value. This can be done more directly by calling `and_then(f)` instead\n+   --> $DIR/methods.rs:112:13\n+    |\n+112 |     let _ = opt.map(|x| Some(x + 1)).unwrap_or(None);\n+    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+    |\n+    = note: replace `map(|x| Some(x + 1)).unwrap_or(None)` with `and_then(|x| Some(x + 1))`\n+\n+error: called `map(f).unwrap_or(None)` on an Option value. This can be done more directly by calling `and_then(f)` instead\n+   --> $DIR/methods.rs:114:13\n+    |\n+114 |       let _ = opt.map(|x| {\n+    |  _____________^\n+115 | |         Some(x + 1)\n+116 | |     }\n+117 | |     ).unwrap_or(None);\n+    | |_____________________^\n+\n+error: called `map(f).unwrap_or(None)` on an Option value. This can be done more directly by calling `and_then(f)` instead\n+   --> $DIR/methods.rs:118:13\n+    |\n+118 |       let _ = opt\n+    |  _____________^\n+119 | |         .map(|x| Some(x + 1))\n+120 | |         .unwrap_or(None);\n+    | |________________________^\n+    |\n+    = note: replace `map(|x| Some(x + 1)).unwrap_or(None)` with `and_then(|x| Some(x + 1))`\n+\n error: called `map(f).unwrap_or_else(g)` on an Option value. This can be done more directly by calling `map_or_else(g, f)` instead\n-   --> $DIR/methods.rs:116:13\n+   --> $DIR/methods.rs:126:13\n     |\n-116 |       let _ = opt.map(|x| x + 1)\n+126 |       let _ = opt.map(|x| x + 1)\n     |  _____________^\n-117 | |\n-118 | |                .unwrap_or_else(|| 0); // should lint even though this call is on a separate line\n+127 | |\n+128 | |                .unwrap_or_else(|| 0); // should lint even though this call is on a separate line\n     | |____________________________________^\n     |\n     = note: `-D option-map-unwrap-or-else` implied by `-D warnings`\n     = note: replace `map(|x| x + 1).unwrap_or_else(|| 0)` with `map_or_else(|| 0, |x| x + 1)`\n \n error: called `map(f).unwrap_or_else(g)` on an Option value. This can be done more directly by calling `map_or_else(g, f)` instead\n-   --> $DIR/methods.rs:120:13\n+   --> $DIR/methods.rs:130:13\n     |\n-120 |       let _ = opt.map(|x| {\n+130 |       let _ = opt.map(|x| {\n     |  _____________^\n-121 | |                         x + 1\n-122 | |                     }\n-123 | |               ).unwrap_or_else(|| 0);\n+131 | |                         x + 1\n+132 | |                     }\n+133 | |               ).unwrap_or_else(|| 0);\n     | |____________________________________^\n \n error: called `map(f).unwrap_or_else(g)` on an Option value. This can be done more directly by calling `map_or_else(g, f)` instead\n-   --> $DIR/methods.rs:124:13\n+   --> $DIR/methods.rs:134:13\n     |\n-124 |       let _ = opt.map(|x| x + 1)\n+134 |       let _ = opt.map(|x| x + 1)\n     |  _____________^\n-125 | |                .unwrap_or_else(||\n-126 | |                     0\n-127 | |                 );\n+135 | |                .unwrap_or_else(||\n+136 | |                     0\n+137 | |                 );\n     | |_________________^\n \n error: unnecessary structure name repetition\n-   --> $DIR/methods.rs:153:24\n+   --> $DIR/methods.rs:163:24\n     |\n-153 |     fn filter(self) -> IteratorFalsePositives {\n+163 |     fn filter(self) -> IteratorFalsePositives {\n     |                        ^^^^^^^^^^^^^^^^^^^^^^ help: use the applicable keyword: `Self`\n \n error: unnecessary structure name repetition\n-   --> $DIR/methods.rs:157:22\n+   --> $DIR/methods.rs:167:22\n     |\n-157 |     fn next(self) -> IteratorFalsePositives {\n+167 |     fn next(self) -> IteratorFalsePositives {\n     |                      ^^^^^^^^^^^^^^^^^^^^^^ help: use the applicable keyword: `Self`\n \n error: unnecessary structure name repetition\n-   --> $DIR/methods.rs:177:32\n+   --> $DIR/methods.rs:187:32\n     |\n-177 |     fn skip(self, _: usize) -> IteratorFalsePositives {\n+187 |     fn skip(self, _: usize) -> IteratorFalsePositives {\n     |                                ^^^^^^^^^^^^^^^^^^^^^^ help: use the applicable keyword: `Self`\n \n error: called `filter(p).next()` on an `Iterator`. This is more succinctly expressed by calling `.find(p)` instead.\n-   --> $DIR/methods.rs:196:13\n+   --> $DIR/methods.rs:206:13\n     |\n-196 |     let _ = v.iter().filter(|&x| *x < 0).next();\n+206 |     let _ = v.iter().filter(|&x| *x < 0).next();\n     |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n     |\n     = note: `-D filter-next` implied by `-D warnings`\n     = note: replace `filter(|&x| *x < 0).next()` with `find(|&x| *x < 0)`\n \n error: called `filter(p).next()` on an `Iterator`. This is more succinctly expressed by calling `.find(p)` instead.\n-   --> $DIR/methods.rs:199:13\n+   --> $DIR/methods.rs:209:13\n     |\n-199 |       let _ = v.iter().filter(|&x| {\n+209 |       let _ = v.iter().filter(|&x| {\n     |  _____________^\n-200 | |                                 *x < 0\n-201 | |                             }\n-202 | |                    ).next();\n+210 | |                                 *x < 0\n+211 | |                             }\n+212 | |                    ).next();\n     | |___________________________^\n \n error: called `is_some()` after searching an `Iterator` with find. This is more succinctly expressed by calling `any()`.\n-   --> $DIR/methods.rs:214:13\n+   --> $DIR/methods.rs:224:13\n     |\n-214 |     let _ = v.iter().find(|&x| *x < 0).is_some();\n+224 |     let _ = v.iter().find(|&x| *x < 0).is_some();\n     |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n     |\n     = note: `-D search-is-some` implied by `-D warnings`\n     = note: replace `find(|&x| *x < 0).is_some()` with `any(|&x| *x < 0)`\n \n error: called `is_some()` after searching an `Iterator` with find. This is more succinctly expressed by calling `any()`.\n-   --> $DIR/methods.rs:217:13\n+   --> $DIR/methods.rs:227:13\n     |\n-217 |       let _ = v.iter().find(|&x| {\n+227 |       let _ = v.iter().find(|&x| {\n     |  _____________^\n-218 | |                               *x < 0\n-219 | |                           }\n-220 | |                    ).is_some();\n+228 | |                               *x < 0\n+229 | |                           }\n+230 | |                    ).is_some();\n     | |______________________________^\n \n error: called `is_some()` after searching an `Iterator` with position. This is more succinctly expressed by calling `any()`.\n-   --> $DIR/methods.rs:223:13\n+   --> $DIR/methods.rs:233:13\n     |\n-223 |     let _ = v.iter().position(|&x| x < 0).is_some();\n+233 |     let _ = v.iter().position(|&x| x < 0).is_some();\n     |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n     |\n     = note: replace `position(|&x| x < 0).is_some()` with `any(|&x| x < 0)`\n \n error: called `is_some()` after searching an `Iterator` with position. This is more succinctly expressed by calling `any()`.\n-   --> $DIR/methods.rs:226:13\n+   --> $DIR/methods.rs:236:13\n     |\n-226 |       let _ = v.iter().position(|&x| {\n+236 |       let _ = v.iter().position(|&x| {\n     |  _____________^\n-227 | |                                   x < 0\n-228 | |                               }\n-229 | |                    ).is_some();\n+237 | |                                   x < 0\n+238 | |                               }\n+239 | |                    ).is_some();\n     | |______________________________^\n \n error: called `is_some()` after searching an `Iterator` with rposition. This is more succinctly expressed by calling `any()`.\n-   --> $DIR/methods.rs:232:13\n+   --> $DIR/methods.rs:242:13\n     |\n-232 |     let _ = v.iter().rposition(|&x| x < 0).is_some();\n+242 |     let _ = v.iter().rposition(|&x| x < 0).is_some();\n     |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n     |\n     = note: replace `rposition(|&x| x < 0).is_some()` with `any(|&x| x < 0)`\n \n error: called `is_some()` after searching an `Iterator` with rposition. This is more succinctly expressed by calling `any()`.\n-   --> $DIR/methods.rs:235:13\n+   --> $DIR/methods.rs:245:13\n     |\n-235 |       let _ = v.iter().rposition(|&x| {\n+245 |       let _ = v.iter().rposition(|&x| {\n     |  _____________^\n-236 | |                                    x < 0\n-237 | |                                }\n-238 | |                    ).is_some();\n+246 | |                                    x < 0\n+247 | |                                }\n+248 | |                    ).is_some();\n     | |______________________________^\n \n error: unnecessary structure name repetition\n-   --> $DIR/methods.rs:252:21\n+   --> $DIR/methods.rs:262:21\n     |\n-252 |         fn new() -> Foo { Foo }\n+262 |         fn new() -> Foo { Foo }\n     |                     ^^^ help: use the applicable keyword: `Self`\n \n error: use of `unwrap_or` followed by a function call\n-   --> $DIR/methods.rs:270:5\n+   --> $DIR/methods.rs:280:5\n     |\n-270 |     with_constructor.unwrap_or(make());\n+280 |     with_constructor.unwrap_or(make());\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try this: `with_constructor.unwrap_or_else(make)`\n     |\n     = note: `-D or-fun-call` implied by `-D warnings`\n \n error: use of `unwrap_or` followed by a call to `new`\n-   --> $DIR/methods.rs:273:5\n+   --> $DIR/methods.rs:283:5\n     |\n-273 |     with_new.unwrap_or(Vec::new());\n+283 |     with_new.unwrap_or(Vec::new());\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try this: `with_new.unwrap_or_default()`\n \n error: use of `unwrap_or` followed by a function call\n-   --> $DIR/methods.rs:276:5\n+   --> $DIR/methods.rs:286:5\n     |\n-276 |     with_const_args.unwrap_or(Vec::with_capacity(12));\n+286 |     with_const_args.unwrap_or(Vec::with_capacity(12));\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try this: `with_const_args.unwrap_or_else(|| Vec::with_capacity(12))`\n \n error: use of `unwrap_or` followed by a function call\n-   --> $DIR/methods.rs:279:5\n+   --> $DIR/methods.rs:289:5\n     |\n-279 |     with_err.unwrap_or(make());\n+289 |     with_err.unwrap_or(make());\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try this: `with_err.unwrap_or_else(|_| make())`\n \n error: use of `unwrap_or` followed by a function call\n-   --> $DIR/methods.rs:282:5\n+   --> $DIR/methods.rs:292:5\n     |\n-282 |     with_err_args.unwrap_or(Vec::with_capacity(12));\n+292 |     with_err_args.unwrap_or(Vec::with_capacity(12));\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try this: `with_err_args.unwrap_or_else(|_| Vec::with_capacity(12))`\n \n error: use of `unwrap_or` followed by a call to `default`\n-   --> $DIR/methods.rs:285:5\n+   --> $DIR/methods.rs:295:5\n     |\n-285 |     with_default_trait.unwrap_or(Default::default());\n+295 |     with_default_trait.unwrap_or(Default::default());\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try this: `with_default_trait.unwrap_or_default()`\n \n error: use of `unwrap_or` followed by a call to `default`\n-   --> $DIR/methods.rs:288:5\n+   --> $DIR/methods.rs:298:5\n     |\n-288 |     with_default_type.unwrap_or(u64::default());\n+298 |     with_default_type.unwrap_or(u64::default());\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try this: `with_default_type.unwrap_or_default()`\n \n error: use of `unwrap_or` followed by a function call\n-   --> $DIR/methods.rs:291:5\n+   --> $DIR/methods.rs:301:5\n     |\n-291 |     with_vec.unwrap_or(vec![]);\n+301 |     with_vec.unwrap_or(vec![]);\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try this: `with_vec.unwrap_or_else(|| < [ _ ] > :: into_vec ( box [ $ ( $ x ) , * ] ))`\n \n error: use of `unwrap_or` followed by a function call\n-   --> $DIR/methods.rs:296:5\n+   --> $DIR/methods.rs:306:5\n     |\n-296 |     without_default.unwrap_or(Foo::new());\n+306 |     without_default.unwrap_or(Foo::new());\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try this: `without_default.unwrap_or_else(Foo::new)`\n \n error: use of `or_insert` followed by a function call\n-   --> $DIR/methods.rs:299:5\n+   --> $DIR/methods.rs:309:5\n     |\n-299 |     map.entry(42).or_insert(String::new());\n+309 |     map.entry(42).or_insert(String::new());\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try this: `map.entry(42).or_insert_with(String::new)`\n \n error: use of `or_insert` followed by a function call\n-   --> $DIR/methods.rs:302:5\n+   --> $DIR/methods.rs:312:5\n     |\n-302 |     btree.entry(42).or_insert(String::new());\n+312 |     btree.entry(42).or_insert(String::new());\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try this: `btree.entry(42).or_insert_with(String::new)`\n \n error: use of `unwrap_or` followed by a function call\n-   --> $DIR/methods.rs:305:13\n+   --> $DIR/methods.rs:315:13\n     |\n-305 |     let _ = stringy.unwrap_or(\"\".to_owned());\n+315 |     let _ = stringy.unwrap_or(\"\".to_owned());\n     |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try this: `stringy.unwrap_or_else(|| \"\".to_owned())`\n \n error: called `.iter().nth()` on a Vec. Calling `.get()` is both faster and more readable\n-   --> $DIR/methods.rs:316:23\n+   --> $DIR/methods.rs:326:23\n     |\n-316 |         let bad_vec = some_vec.iter().nth(3);\n+326 |         let bad_vec = some_vec.iter().nth(3);\n     |                       ^^^^^^^^^^^^^^^^^^^^^^\n     |\n     = note: `-D iter-nth` implied by `-D warnings`\n \n error: called `.iter().nth()` on a slice. Calling `.get()` is both faster and more readable\n-   --> $DIR/methods.rs:317:26\n+   --> $DIR/methods.rs:327:26\n     |\n-317 |         let bad_slice = &some_vec[..].iter().nth(3);\n+327 |         let bad_slice = &some_vec[..].iter().nth(3);\n     |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: called `.iter().nth()` on a slice. Calling `.get()` is both faster and more readable\n-   --> $DIR/methods.rs:318:31\n+   --> $DIR/methods.rs:328:31\n     |\n-318 |         let bad_boxed_slice = boxed_slice.iter().nth(3);\n+328 |         let bad_boxed_slice = boxed_slice.iter().nth(3);\n     |                               ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: called `.iter().nth()` on a VecDeque. Calling `.get()` is both faster and more readable\n-   --> $DIR/methods.rs:319:29\n+   --> $DIR/methods.rs:329:29\n     |\n-319 |         let bad_vec_deque = some_vec_deque.iter().nth(3);\n+329 |         let bad_vec_deque = some_vec_deque.iter().nth(3);\n     |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: called `.iter_mut().nth()` on a Vec. Calling `.get_mut()` is both faster and more readable\n-   --> $DIR/methods.rs:324:23\n+   --> $DIR/methods.rs:334:23\n     |\n-324 |         let bad_vec = some_vec.iter_mut().nth(3);\n+334 |         let bad_vec = some_vec.iter_mut().nth(3);\n     |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: called `.iter_mut().nth()` on a slice. Calling `.get_mut()` is both faster and more readable\n-   --> $DIR/methods.rs:327:26\n+   --> $DIR/methods.rs:337:26\n     |\n-327 |         let bad_slice = &some_vec[..].iter_mut().nth(3);\n+337 |         let bad_slice = &some_vec[..].iter_mut().nth(3);\n     |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: called `.iter_mut().nth()` on a VecDeque. Calling `.get_mut()` is both faster and more readable\n-   --> $DIR/methods.rs:330:29\n+   --> $DIR/methods.rs:340:29\n     |\n-330 |         let bad_vec_deque = some_vec_deque.iter_mut().nth(3);\n+340 |         let bad_vec_deque = some_vec_deque.iter_mut().nth(3);\n     |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: called `skip(x).next()` on an iterator. This is more succinctly expressed by calling `nth(x)`\n-   --> $DIR/methods.rs:342:13\n+   --> $DIR/methods.rs:352:13\n     |\n-342 |     let _ = some_vec.iter().skip(42).next();\n+352 |     let _ = some_vec.iter().skip(42).next();\n     |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n     |\n     = note: `-D iter-skip-next` implied by `-D warnings`\n \n error: called `skip(x).next()` on an iterator. This is more succinctly expressed by calling `nth(x)`\n-   --> $DIR/methods.rs:343:13\n+   --> $DIR/methods.rs:353:13\n     |\n-343 |     let _ = some_vec.iter().cycle().skip(42).next();\n+353 |     let _ = some_vec.iter().cycle().skip(42).next();\n     |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: called `skip(x).next()` on an iterator. This is more succinctly expressed by calling `nth(x)`\n-   --> $DIR/methods.rs:344:13\n+   --> $DIR/methods.rs:354:13\n     |\n-344 |     let _ = (1..10).skip(10).next();\n+354 |     let _ = (1..10).skip(10).next();\n     |             ^^^^^^^^^^^^^^^^^^^^^^^\n \n error: called `skip(x).next()` on an iterator. This is more succinctly expressed by calling `nth(x)`\n-   --> $DIR/methods.rs:345:14\n+   --> $DIR/methods.rs:355:14\n     |\n-345 |     let _ = &some_vec[..].iter().skip(3).next();\n+355 |     let _ = &some_vec[..].iter().skip(3).next();\n     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: called `.get().unwrap()` on a slice. Using `[]` is more clear and more concise\n-   --> $DIR/methods.rs:371:17\n+   --> $DIR/methods.rs:381:17\n     |\n-371 |         let _ = boxed_slice.get(1).unwrap();\n+381 |         let _ = boxed_slice.get(1).unwrap();\n     |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try this: `&boxed_slice[1]`\n     |\n     = note: `-D get-unwrap` implied by `-D warnings`\n \n error: called `.get().unwrap()` on a slice. Using `[]` is more clear and more concise\n-   --> $DIR/methods.rs:372:17\n+   --> $DIR/methods.rs:382:17\n     |\n-372 |         let _ = some_slice.get(0).unwrap();\n+382 |         let _ = some_slice.get(0).unwrap();\n     |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try this: `&some_slice[0]`\n \n error: called `.get().unwrap()` on a Vec. Using `[]` is more clear and more concise\n-   --> $DIR/methods.rs:373:17\n+   --> $DIR/methods.rs:383:17\n     |\n-373 |         let _ = some_vec.get(0).unwrap();\n+383 |         let _ = some_vec.get(0).unwrap();\n     |                 ^^^^^^^^^^^^^^^^^^^^^^^^ help: try this: `&some_vec[0]`\n \n error: called `.get().unwrap()` on a VecDeque. Using `[]` is more clear and more concise\n-   --> $DIR/methods.rs:374:17\n+   --> $DIR/methods.rs:384:17\n     |\n-374 |         let _ = some_vecdeque.get(0).unwrap();\n+384 |         let _ = some_vecdeque.get(0).unwrap();\n     |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try this: `&some_vecdeque[0]`\n \n error: called `.get().unwrap()` on a HashMap. Using `[]` is more clear and more concise\n-   --> $DIR/methods.rs:375:17\n+   --> $DIR/methods.rs:385:17\n     |\n-375 |         let _ = some_hashmap.get(&1).unwrap();\n+385 |         let _ = some_hashmap.get(&1).unwrap();\n     |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try this: `&some_hashmap[&1]`\n \n error: called `.get().unwrap()` on a BTreeMap. Using `[]` is more clear and more concise\n-   --> $DIR/methods.rs:376:17\n+   --> $DIR/methods.rs:386:17\n     |\n-376 |         let _ = some_btreemap.get(&1).unwrap();\n+386 |         let _ = some_btreemap.get(&1).unwrap();\n     |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try this: `&some_btreemap[&1]`\n \n error: called `.get_mut().unwrap()` on a slice. Using `[]` is more clear and more concise\n-   --> $DIR/methods.rs:381:10\n+   --> $DIR/methods.rs:391:10\n     |\n-381 |         *boxed_slice.get_mut(0).unwrap() = 1;\n+391 |         *boxed_slice.get_mut(0).unwrap() = 1;\n     |          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try this: `&mut boxed_slice[0]`\n \n error: called `.get_mut().unwrap()` on a slice. Using `[]` is more clear and more concise\n-   --> $DIR/methods.rs:382:10\n+   --> $DIR/methods.rs:392:10\n     |\n-382 |         *some_slice.get_mut(0).unwrap() = 1;\n+392 |         *some_slice.get_mut(0).unwrap() = 1;\n     |          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try this: `&mut some_slice[0]`\n \n error: called `.get_mut().unwrap()` on a Vec. Using `[]` is more clear and more concise\n-   --> $DIR/methods.rs:383:10\n+   --> $DIR/methods.rs:393:10\n     |\n-383 |         *some_vec.get_mut(0).unwrap() = 1;\n+393 |         *some_vec.get_mut(0).unwrap() = 1;\n     |          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try this: `&mut some_vec[0]`\n \n error: called `.get_mut().unwrap()` on a VecDeque. Using `[]` is more clear and more concise\n-   --> $DIR/methods.rs:384:10\n+   --> $DIR/methods.rs:394:10\n     |\n-384 |         *some_vecdeque.get_mut(0).unwrap() = 1;\n+394 |         *some_vecdeque.get_mut(0).unwrap() = 1;\n     |          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try this: `&mut some_vecdeque[0]`\n \n error: used unwrap() on an Option value. If you don't want to handle the None case gracefully, consider using expect() to provide a better panic message\n-   --> $DIR/methods.rs:398:13\n+   --> $DIR/methods.rs:408:13\n     |\n-398 |     let _ = opt.unwrap();\n+408 |     let _ = opt.unwrap();\n     |             ^^^^^^^^^^^^\n     |\n     = note: `-D option-unwrap-used` implied by `-D warnings`\n \n error: used unwrap() on a Result value. If you don't want to handle the Err case gracefully, consider using expect() to provide a better panic message\n-   --> $DIR/methods.rs:401:13\n+   --> $DIR/methods.rs:411:13\n     |\n-401 |     let _ = res.unwrap();\n+411 |     let _ = res.unwrap();\n     |             ^^^^^^^^^^^^\n     |\n     = note: `-D result-unwrap-used` implied by `-D warnings`\n \n error: called `ok().expect()` on a Result value. You can call `expect` directly on the `Result`\n-   --> $DIR/methods.rs:403:5\n+   --> $DIR/methods.rs:413:5\n     |\n-403 |     res.ok().expect(\"disaster!\");\n+413 |     res.ok().expect(\"disaster!\");\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n     |\n     = note: `-D ok-expect` implied by `-D warnings`\n \n error: called `ok().expect()` on a Result value. You can call `expect` directly on the `Result`\n-   --> $DIR/methods.rs:409:5\n+   --> $DIR/methods.rs:419:5\n     |\n-409 |     res3.ok().expect(\"whoof\");\n+419 |     res3.ok().expect(\"whoof\");\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: called `ok().expect()` on a Result value. You can call `expect` directly on the `Result`\n-   --> $DIR/methods.rs:411:5\n+   --> $DIR/methods.rs:421:5\n     |\n-411 |     res4.ok().expect(\"argh\");\n+421 |     res4.ok().expect(\"argh\");\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: called `ok().expect()` on a Result value. You can call `expect` directly on the `Result`\n-   --> $DIR/methods.rs:413:5\n+   --> $DIR/methods.rs:423:5\n     |\n-413 |     res5.ok().expect(\"oops\");\n+423 |     res5.ok().expect(\"oops\");\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: called `ok().expect()` on a Result value. You can call `expect` directly on the `Result`\n-   --> $DIR/methods.rs:415:5\n+   --> $DIR/methods.rs:425:5\n     |\n-415 |     res6.ok().expect(\"meh\");\n+425 |     res6.ok().expect(\"meh\");\n     |     ^^^^^^^^^^^^^^^^^^^^^^^\n \n error: you should use the `starts_with` method\n-   --> $DIR/methods.rs:427:5\n+   --> $DIR/methods.rs:437:5\n     |\n-427 |     \"\".chars().next() == Some(' ');\n+437 |     \"\".chars().next() == Some(' ');\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: like this: `\"\".starts_with(' ')`\n     |\n     = note: `-D chars-next-cmp` implied by `-D warnings`\n \n error: you should use the `starts_with` method\n-   --> $DIR/methods.rs:428:5\n+   --> $DIR/methods.rs:438:5\n     |\n-428 |     Some(' ') != \"\".chars().next();\n+438 |     Some(' ') != \"\".chars().next();\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: like this: `!\"\".starts_with(' ')`\n \n error: calling `.extend(_.chars())`\n-   --> $DIR/methods.rs:437:5\n+   --> $DIR/methods.rs:447:5\n     |\n-437 |     s.extend(abc.chars());\n+447 |     s.extend(abc.chars());\n     |     ^^^^^^^^^^^^^^^^^^^^^ help: try this: `s.push_str(abc)`\n     |\n     = note: `-D string-extend-chars` implied by `-D warnings`\n \n error: calling `.extend(_.chars())`\n-   --> $DIR/methods.rs:440:5\n+   --> $DIR/methods.rs:450:5\n     |\n-440 |     s.extend(\"abc\".chars());\n+450 |     s.extend(\"abc\".chars());\n     |     ^^^^^^^^^^^^^^^^^^^^^^^ help: try this: `s.push_str(\"abc\")`\n \n error: calling `.extend(_.chars())`\n-   --> $DIR/methods.rs:443:5\n+   --> $DIR/methods.rs:453:5\n     |\n-443 |     s.extend(def.chars());\n+453 |     s.extend(def.chars());\n     |     ^^^^^^^^^^^^^^^^^^^^^ help: try this: `s.push_str(&def)`\n \n error: using `clone` on a `Copy` type\n-   --> $DIR/methods.rs:454:5\n+   --> $DIR/methods.rs:464:5\n     |\n-454 |     42.clone();\n+464 |     42.clone();\n     |     ^^^^^^^^^^ help: try removing the `clone` call: `42`\n     |\n     = note: `-D clone-on-copy` implied by `-D warnings`\n \n error: using `clone` on a `Copy` type\n-   --> $DIR/methods.rs:458:5\n+   --> $DIR/methods.rs:468:5\n     |\n-458 |     (&42).clone();\n+468 |     (&42).clone();\n     |     ^^^^^^^^^^^^^ help: try dereferencing it: `*(&42)`\n \n error: using '.clone()' on a ref-counted pointer\n-   --> $DIR/methods.rs:468:5\n+   --> $DIR/methods.rs:478:5\n     |\n-468 |     rc.clone();\n+478 |     rc.clone();\n     |     ^^^^^^^^^^ help: try this: `Rc::clone(&rc)`\n     |\n     = note: `-D clone-on-ref-ptr` implied by `-D warnings`\n \n error: using '.clone()' on a ref-counted pointer\n-   --> $DIR/methods.rs:471:5\n+   --> $DIR/methods.rs:481:5\n     |\n-471 |     arc.clone();\n+481 |     arc.clone();\n     |     ^^^^^^^^^^^ help: try this: `Arc::clone(&arc)`\n \n error: using '.clone()' on a ref-counted pointer\n-   --> $DIR/methods.rs:474:5\n+   --> $DIR/methods.rs:484:5\n     |\n-474 |     rcweak.clone();\n+484 |     rcweak.clone();\n     |     ^^^^^^^^^^^^^^ help: try this: `Weak::clone(&rcweak)`\n \n error: using '.clone()' on a ref-counted pointer\n-   --> $DIR/methods.rs:477:5\n+   --> $DIR/methods.rs:487:5\n     |\n-477 |     arc_weak.clone();\n+487 |     arc_weak.clone();\n     |     ^^^^^^^^^^^^^^^^ help: try this: `Weak::clone(&arc_weak)`\n \n error: using `clone` on a `Copy` type\n-   --> $DIR/methods.rs:484:5\n+   --> $DIR/methods.rs:494:5\n     |\n-484 |     t.clone();\n+494 |     t.clone();\n     |     ^^^^^^^^^ help: try removing the `clone` call: `t`\n \n error: using `clone` on a `Copy` type\n-   --> $DIR/methods.rs:486:5\n+   --> $DIR/methods.rs:496:5\n     |\n-486 |     Some(t).clone();\n+496 |     Some(t).clone();\n     |     ^^^^^^^^^^^^^^^ help: try removing the `clone` call: `Some(t)`\n \n error: using `clone` on a double-reference; this will copy the reference instead of cloning the inner type\n-   --> $DIR/methods.rs:492:22\n+   --> $DIR/methods.rs:502:22\n     |\n-492 |     let z: &Vec<_> = y.clone();\n+502 |     let z: &Vec<_> = y.clone();\n     |                      ^^^^^^^^^ help: try dereferencing it: `(*y).clone()`\n     |\n     = note: `-D clone-double-ref` implied by `-D warnings`\n \n error: single-character string constant used as pattern\n-   --> $DIR/methods.rs:499:13\n+   --> $DIR/methods.rs:509:13\n     |\n-499 |     x.split(\"x\");\n+509 |     x.split(\"x\");\n     |     --------^^^- help: try using a char instead: `x.split('x')`\n     |\n     = note: `-D single-char-pattern` implied by `-D warnings`\n \n error: single-character string constant used as pattern\n-   --> $DIR/methods.rs:516:16\n+   --> $DIR/methods.rs:526:16\n     |\n-516 |     x.contains(\"x\");\n+526 |     x.contains(\"x\");\n     |     -----------^^^- help: try using a char instead: `x.contains('x')`\n \n error: single-character string constant used as pattern\n-   --> $DIR/methods.rs:517:19\n+   --> $DIR/methods.rs:527:19\n     |\n-517 |     x.starts_with(\"x\");\n+527 |     x.starts_with(\"x\");\n     |     --------------^^^- help: try using a char instead: `x.starts_with('x')`\n \n error: single-character string constant used as pattern\n-   --> $DIR/methods.rs:518:17\n+   --> $DIR/methods.rs:528:17\n     |\n-518 |     x.ends_with(\"x\");\n+528 |     x.ends_with(\"x\");\n     |     ------------^^^- help: try using a char instead: `x.ends_with('x')`\n \n error: single-character string constant used as pattern\n-   --> $DIR/methods.rs:519:12\n+   --> $DIR/methods.rs:529:12\n     |\n-519 |     x.find(\"x\");\n+529 |     x.find(\"x\");\n     |     -------^^^- help: try using a char instead: `x.find('x')`\n \n error: single-character string constant used as pattern\n-   --> $DIR/methods.rs:520:13\n+   --> $DIR/methods.rs:530:13\n     |\n-520 |     x.rfind(\"x\");\n+530 |     x.rfind(\"x\");\n     |     --------^^^- help: try using a char instead: `x.rfind('x')`\n \n error: single-character string constant used as pattern\n-   --> $DIR/methods.rs:521:14\n+   --> $DIR/methods.rs:531:14\n     |\n-521 |     x.rsplit(\"x\");\n+531 |     x.rsplit(\"x\");\n     |     ---------^^^- help: try using a char instead: `x.rsplit('x')`\n \n error: single-character string constant used as pattern\n-   --> $DIR/methods.rs:522:24\n+   --> $DIR/methods.rs:532:24\n     |\n-522 |     x.split_terminator(\"x\");\n+532 |     x.split_terminator(\"x\");\n     |     -------------------^^^- help: try using a char instead: `x.split_terminator('x')`\n \n error: single-character string constant used as pattern\n-   --> $DIR/methods.rs:523:25\n+   --> $DIR/methods.rs:533:25\n     |\n-523 |     x.rsplit_terminator(\"x\");\n+533 |     x.rsplit_terminator(\"x\");\n     |     --------------------^^^- help: try using a char instead: `x.rsplit_terminator('x')`\n \n error: single-character string constant used as pattern\n-   --> $DIR/methods.rs:524:17\n+   --> $DIR/methods.rs:534:17\n     |\n-524 |     x.splitn(0, \"x\");\n+534 |     x.splitn(0, \"x\");\n     |     ------------^^^- help: try using a char instead: `x.splitn(0, 'x')`\n \n error: single-character string constant used as pattern\n-   --> $DIR/methods.rs:525:18\n+   --> $DIR/methods.rs:535:18\n     |\n-525 |     x.rsplitn(0, \"x\");\n+535 |     x.rsplitn(0, \"x\");\n     |     -------------^^^- help: try using a char instead: `x.rsplitn(0, 'x')`\n \n error: single-character string constant used as pattern\n-   --> $DIR/methods.rs:526:15\n+   --> $DIR/methods.rs:536:15\n     |\n-526 |     x.matches(\"x\");\n+536 |     x.matches(\"x\");\n     |     ----------^^^- help: try using a char instead: `x.matches('x')`\n \n error: single-character string constant used as pattern\n-   --> $DIR/methods.rs:527:16\n+   --> $DIR/methods.rs:537:16\n     |\n-527 |     x.rmatches(\"x\");\n+537 |     x.rmatches(\"x\");\n     |     -----------^^^- help: try using a char instead: `x.rmatches('x')`\n \n error: single-character string constant used as pattern\n-   --> $DIR/methods.rs:528:21\n+   --> $DIR/methods.rs:538:21\n     |\n-528 |     x.match_indices(\"x\");\n+538 |     x.match_indices(\"x\");\n     |     ----------------^^^- help: try using a char instead: `x.match_indices('x')`\n \n error: single-character string constant used as pattern\n-   --> $DIR/methods.rs:529:22\n+   --> $DIR/methods.rs:539:22\n     |\n-529 |     x.rmatch_indices(\"x\");\n+539 |     x.rmatch_indices(\"x\");\n     |     -----------------^^^- help: try using a char instead: `x.rmatch_indices('x')`\n \n error: single-character string constant used as pattern\n-   --> $DIR/methods.rs:530:25\n+   --> $DIR/methods.rs:540:25\n     |\n-530 |     x.trim_left_matches(\"x\");\n+540 |     x.trim_left_matches(\"x\");\n     |     --------------------^^^- help: try using a char instead: `x.trim_left_matches('x')`\n \n error: single-character string constant used as pattern\n-   --> $DIR/methods.rs:531:26\n+   --> $DIR/methods.rs:541:26\n     |\n-531 |     x.trim_right_matches(\"x\");\n+541 |     x.trim_right_matches(\"x\");\n     |     ---------------------^^^- help: try using a char instead: `x.trim_right_matches('x')`\n \n error: you are getting the inner pointer of a temporary `CString`\n-   --> $DIR/methods.rs:541:5\n+   --> $DIR/methods.rs:551:5\n     |\n-541 |     CString::new(\"foo\").unwrap().as_ptr();\n+551 |     CString::new(\"foo\").unwrap().as_ptr();\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n     |\n     = note: `-D temporary-cstring-as-ptr` implied by `-D warnings`\n     = note: that pointer will be invalid outside this expression\n help: assign the `CString` to a variable to extend its lifetime\n-   --> $DIR/methods.rs:541:5\n+   --> $DIR/methods.rs:551:5\n     |\n-541 |     CString::new(\"foo\").unwrap().as_ptr();\n+551 |     CString::new(\"foo\").unwrap().as_ptr();\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: called `cloned().collect()` on a slice to create a `Vec`. Calling `to_vec()` is both faster and more readable\n-   --> $DIR/methods.rs:546:27\n+   --> $DIR/methods.rs:556:27\n     |\n-546 |     let v2 : Vec<isize> = v.iter().cloned().collect();\n+556 |     let v2 : Vec<isize> = v.iter().cloned().collect();\n     |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n     |\n     = note: `-D iter-cloned-collect` implied by `-D warnings`\n \n error: you should use the `starts_with` method\n-   --> $DIR/methods.rs:553:8\n+   --> $DIR/methods.rs:563:8\n     |\n-553 |     if s.chars().next().unwrap() == 'f' { // s.starts_with('f')\n+563 |     if s.chars().next().unwrap() == 'f' { // s.starts_with('f')\n     |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: like this: `s.starts_with('f')`\n \n error: used unwrap() on an Option value. If you don't want to handle the None case gracefully, consider using expect() to provide a better panic message\n-   --> $DIR/methods.rs:553:8\n+   --> $DIR/methods.rs:563:8\n     |\n-553 |     if s.chars().next().unwrap() == 'f' { // s.starts_with('f')\n+563 |     if s.chars().next().unwrap() == 'f' { // s.starts_with('f')\n     |        ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: you should use the `ends_with` method\n-   --> $DIR/methods.rs:556:8\n+   --> $DIR/methods.rs:566:8\n     |\n-556 |     if s.chars().next_back().unwrap() == 'o' { // s.ends_with('o')\n+566 |     if s.chars().next_back().unwrap() == 'o' { // s.ends_with('o')\n     |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: like this: `s.ends_with('o')`\n     |\n     = note: `-D chars-last-cmp` implied by `-D warnings`\n \n error: used unwrap() on an Option value. If you don't want to handle the None case gracefully, consider using expect() to provide a better panic message\n-   --> $DIR/methods.rs:556:8\n+   --> $DIR/methods.rs:566:8\n     |\n-556 |     if s.chars().next_back().unwrap() == 'o' { // s.ends_with('o')\n+566 |     if s.chars().next_back().unwrap() == 'o' { // s.ends_with('o')\n     |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: you should use the `ends_with` method\n-   --> $DIR/methods.rs:559:8\n+   --> $DIR/methods.rs:569:8\n     |\n-559 |     if s.chars().last().unwrap() == 'o' { // s.ends_with('o')\n+569 |     if s.chars().last().unwrap() == 'o' { // s.ends_with('o')\n     |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: like this: `s.ends_with('o')`\n \n error: used unwrap() on an Option value. If you don't want to handle the None case gracefully, consider using expect() to provide a better panic message\n-   --> $DIR/methods.rs:559:8\n+   --> $DIR/methods.rs:569:8\n     |\n-559 |     if s.chars().last().unwrap() == 'o' { // s.ends_with('o')\n+569 |     if s.chars().last().unwrap() == 'o' { // s.ends_with('o')\n     |        ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: you should use the `starts_with` method\n-   --> $DIR/methods.rs:562:8\n+   --> $DIR/methods.rs:572:8\n     |\n-562 |     if s.chars().next().unwrap() != 'f' { // !s.starts_with('f')\n+572 |     if s.chars().next().unwrap() != 'f' { // !s.starts_with('f')\n     |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: like this: `!s.starts_with('f')`\n \n error: used unwrap() on an Option value. If you don't want to handle the None case gracefully, consider using expect() to provide a better panic message\n-   --> $DIR/methods.rs:562:8\n+   --> $DIR/methods.rs:572:8\n     |\n-562 |     if s.chars().next().unwrap() != 'f' { // !s.starts_with('f')\n+572 |     if s.chars().next().unwrap() != 'f' { // !s.starts_with('f')\n     |        ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: you should use the `ends_with` method\n-   --> $DIR/methods.rs:565:8\n+   --> $DIR/methods.rs:575:8\n     |\n-565 |     if s.chars().next_back().unwrap() != 'o' { // !s.ends_with('o')\n+575 |     if s.chars().next_back().unwrap() != 'o' { // !s.ends_with('o')\n     |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: like this: `!s.ends_with('o')`\n \n error: used unwrap() on an Option value. If you don't want to handle the None case gracefully, consider using expect() to provide a better panic message\n-   --> $DIR/methods.rs:565:8\n+   --> $DIR/methods.rs:575:8\n     |\n-565 |     if s.chars().next_back().unwrap() != 'o' { // !s.ends_with('o')\n+575 |     if s.chars().next_back().unwrap() != 'o' { // !s.ends_with('o')\n     |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: you should use the `ends_with` method\n-   --> $DIR/methods.rs:568:8\n+   --> $DIR/methods.rs:578:8\n     |\n-568 |     if s.chars().last().unwrap() != 'o' { // !s.ends_with('o')\n+578 |     if s.chars().last().unwrap() != 'o' { // !s.ends_with('o')\n     |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: like this: `!s.ends_with('o')`\n \n error: used unwrap() on an Option value. If you don't want to handle the None case gracefully, consider using expect() to provide a better panic message\n-   --> $DIR/methods.rs:568:8\n+   --> $DIR/methods.rs:578:8\n     |\n-568 |     if s.chars().last().unwrap() != 'o' { // !s.ends_with('o')\n+578 |     if s.chars().last().unwrap() != 'o' { // !s.ends_with('o')\n     |        ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: you should use the `ends_with` method\n-   --> $DIR/methods.rs:575:5\n+   --> $DIR/methods.rs:585:5\n     |\n-575 |     \"\".chars().last() == Some(' ');\n+585 |     \"\".chars().last() == Some(' ');\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: like this: `\"\".ends_with(' ')`\n \n error: you should use the `ends_with` method\n-   --> $DIR/methods.rs:576:5\n+   --> $DIR/methods.rs:586:5\n     |\n-576 |     Some(' ') != \"\".chars().last();\n+586 |     Some(' ') != \"\".chars().last();\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: like this: `!\"\".ends_with(' ')`\n \n error: you should use the `ends_with` method\n-   --> $DIR/methods.rs:577:5\n+   --> $DIR/methods.rs:587:5\n     |\n-577 |     \"\".chars().next_back() == Some(' ');\n+587 |     \"\".chars().next_back() == Some(' ');\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: like this: `\"\".ends_with(' ')`\n \n error: you should use the `ends_with` method\n-   --> $DIR/methods.rs:578:5\n+   --> $DIR/methods.rs:588:5\n     |\n-578 |     Some(' ') != \"\".chars().next_back();\n+588 |     Some(' ') != \"\".chars().next_back();\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: like this: `!\"\".ends_with(' ')`\n "}]}