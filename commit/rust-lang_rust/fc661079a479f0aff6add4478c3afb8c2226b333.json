{"sha": "fc661079a479f0aff6add4478c3afb8c2226b333", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZjNjYxMDc5YTQ3OWYwYWZmNmFkZDQ0NzhjM2FmYjhjMjIyNmIzMzM=", "commit": {"author": {"name": "John Clements", "email": "clements@racket-lang.org", "date": "2013-04-19T00:28:22Z"}, "committer": {"name": "John Clements", "email": "clements@racket-lang.org", "date": "2013-04-30T23:31:56Z"}, "message": "fixed up syntax", "tree": {"sha": "feecc32af5fdd504d7fa600b2d430fdc142944c9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/feecc32af5fdd504d7fa600b2d430fdc142944c9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fc661079a479f0aff6add4478c3afb8c2226b333", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fc661079a479f0aff6add4478c3afb8c2226b333", "html_url": "https://github.com/rust-lang/rust/commit/fc661079a479f0aff6add4478c3afb8c2226b333", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fc661079a479f0aff6add4478c3afb8c2226b333/comments", "author": {"login": "jbclements", "id": 226617, "node_id": "MDQ6VXNlcjIyNjYxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/226617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbclements", "html_url": "https://github.com/jbclements", "followers_url": "https://api.github.com/users/jbclements/followers", "following_url": "https://api.github.com/users/jbclements/following{/other_user}", "gists_url": "https://api.github.com/users/jbclements/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbclements/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbclements/subscriptions", "organizations_url": "https://api.github.com/users/jbclements/orgs", "repos_url": "https://api.github.com/users/jbclements/repos", "events_url": "https://api.github.com/users/jbclements/events{/privacy}", "received_events_url": "https://api.github.com/users/jbclements/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jbclements", "id": 226617, "node_id": "MDQ6VXNlcjIyNjYxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/226617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbclements", "html_url": "https://github.com/jbclements", "followers_url": "https://api.github.com/users/jbclements/followers", "following_url": "https://api.github.com/users/jbclements/following{/other_user}", "gists_url": "https://api.github.com/users/jbclements/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbclements/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbclements/subscriptions", "organizations_url": "https://api.github.com/users/jbclements/orgs", "repos_url": "https://api.github.com/users/jbclements/repos", "events_url": "https://api.github.com/users/jbclements/events{/privacy}", "received_events_url": "https://api.github.com/users/jbclements/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c75b7630bcc45bf9f2c7f6831e46c84b0c8f024f", "url": "https://api.github.com/repos/rust-lang/rust/commits/c75b7630bcc45bf9f2c7f6831e46c84b0c8f024f", "html_url": "https://github.com/rust-lang/rust/commit/c75b7630bcc45bf9f2c7f6831e46c84b0c8f024f"}], "stats": {"total": 25, "additions": 16, "deletions": 9}, "files": [{"sha": "134f1e4098f07e9d42fa302519faa1c255bf8b3a", "filename": "src/test/run-pass/type-sizes.rs", "status": "modified", "additions": 16, "deletions": 9, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/fc661079a479f0aff6add4478c3afb8c2226b333/src%2Ftest%2Frun-pass%2Ftype-sizes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fc661079a479f0aff6add4478c3afb8c2226b333/src%2Ftest%2Frun-pass%2Ftype-sizes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Ftype-sizes.rs?ref=fc661079a479f0aff6add4478c3afb8c2226b333", "patch": "@@ -8,24 +8,31 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// xfail-test\n-use sys::rustrt::size_of;\n-extern mod std;\n+extern mod core;\n+use core::sys::size_of;\n+\n+struct t {a: u8, b: i8}\n+struct u {a: u8, b: i8, c: u8}\n+struct v {a: u8, b: i8, c: v2, d: u32}\n+struct v2 {u: char, v: u8}\n+struct w {a: int, b: ()}\n+struct x {a: int, b: (), c: ()}\n+struct y {x: int}\n \n pub fn main() {\n     assert!((size_of::<u8>() == 1 as uint));\n     assert!((size_of::<u32>() == 4 as uint));\n     assert!((size_of::<char>() == 4 as uint));\n     assert!((size_of::<i8>() == 1 as uint));\n     assert!((size_of::<i32>() == 4 as uint));\n-    assert!((size_of::<{a: u8, b: i8}>() == 2 as uint));\n-    assert!((size_of::<{a: u8, b: i8, c: u8}>() == 3 as uint));\n+    assert!((size_of::<t>() == 2 as uint));\n+    assert!((size_of::<u>() == 3 as uint));\n     // Alignment causes padding before the char and the u32.\n \n-    assert!(size_of::<{a: u8, b: i8, c: {u: char, v: u8}, d: u32}>() ==\n+    assert!(size_of::<v>() ==\n                 16 as uint);\n     assert!((size_of::<int>() == size_of::<uint>()));\n-    assert!((size_of::<{a: int, b: ()}>() == size_of::<int>()));\n-    assert!((size_of::<{a: int, b: (), c: ()}>() == size_of::<int>()));\n-    assert!((size_of::<int>() == size_of::<{x: int}>()));\n+    assert!((size_of::<w>() == size_of::<int>()));\n+    assert!((size_of::<x>() == size_of::<int>()));\n+    assert!((size_of::<int>() == size_of::<y>()));\n }"}]}