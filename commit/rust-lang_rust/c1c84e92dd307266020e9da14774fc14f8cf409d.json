{"sha": "c1c84e92dd307266020e9da14774fc14f8cf409d", "node_id": "MDY6Q29tbWl0NzI0NzEyOmMxYzg0ZTkyZGQzMDcyNjYwMjBlOWRhMTQ3NzRmYzE0ZjhjZjQwOWQ=", "commit": {"author": {"name": "Tim Chevalier", "email": "chevalier@alum.wellesley.edu", "date": "2012-03-16T03:44:47Z"}, "committer": {"name": "Tim Chevalier", "email": "chevalier@alum.wellesley.edu", "date": "2012-03-16T06:12:06Z"}, "message": "Put the OS error in the error string in io::mk_file_writer()", "tree": {"sha": "ce310f66f223e2c40da65d0959be362a909cc68e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ce310f66f223e2c40da65d0959be362a909cc68e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c1c84e92dd307266020e9da14774fc14f8cf409d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c1c84e92dd307266020e9da14774fc14f8cf409d", "html_url": "https://github.com/rust-lang/rust/commit/c1c84e92dd307266020e9da14774fc14f8cf409d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c1c84e92dd307266020e9da14774fc14f8cf409d/comments", "author": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "committer": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e464e2ba56d4f995fca23350f4761787c78073f9", "url": "https://api.github.com/repos/rust-lang/rust/commits/e464e2ba56d4f995fca23350f4761787c78073f9", "html_url": "https://github.com/rust-lang/rust/commit/e464e2ba56d4f995fca23350f4761787c78073f9"}], "stats": {"total": 6, "additions": 2, "deletions": 4}, "files": [{"sha": "0dc8c72ed7ed456abbcd5dcd3a9289b831c594a7", "filename": "src/libcore/io.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/c1c84e92dd307266020e9da14774fc14f8cf409d/src%2Flibcore%2Fio.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c1c84e92dd307266020e9da14774fc14f8cf409d/src%2Flibcore%2Fio.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fio.rs?ref=c1c84e92dd307266020e9da14774fc14f8cf409d", "patch": "@@ -398,9 +398,7 @@ fn mk_file_writer(path: str, flags: [fileflag])\n                    (S_IRUSR | S_IWUSR) as c_int)\n     };\n     if fd < (0 as c_int) {\n-        // FIXME don't log this! put it in the returned error string\n-        log(error, sys::last_os_error());\n-        result::err(\"error opening \" + path)\n+        result::err(#fmt(\"error opening %s: %s\", path, sys::last_os_error()))\n     } else {\n         result::ok(fd_writer(fd, true))\n     }\n@@ -748,7 +746,7 @@ mod tests {\n     fn file_writer_bad_name() {\n         alt io::file_writer(\"?/?\", []) {\n           result::err(e) {\n-            assert e == \"error opening ?/?\";\n+            assert e == \"error opening ?/?: No such file or directory\";\n           }\n           result::ok(_) { fail; }\n         }"}]}