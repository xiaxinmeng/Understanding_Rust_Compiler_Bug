{"sha": "f64bae4ae385172fd27ce03e74e0c0f2bf738159", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY2NGJhZTRhZTM4NTE3MmZkMjdjZTAzZTc0ZTBjMGYyYmY3MzgxNTk=", "commit": {"author": {"name": "Oliver Schneider", "email": "oli-obk@users.noreply.github.com", "date": "2017-09-15T07:21:46Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-09-15T07:21:46Z"}, "message": "Merge pull request #2052 from topecongiro/issue-1990\n\nAdd ExprLoop to contains_continue_expr()", "tree": {"sha": "da462b4954e2ab39da134ee6278815abb1269963", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/da462b4954e2ab39da134ee6278815abb1269963"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f64bae4ae385172fd27ce03e74e0c0f2bf738159", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f64bae4ae385172fd27ce03e74e0c0f2bf738159", "html_url": "https://github.com/rust-lang/rust/commit/f64bae4ae385172fd27ce03e74e0c0f2bf738159", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f64bae4ae385172fd27ce03e74e0c0f2bf738159/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "86d609fdf650baa97cda77156ffa9116468d98fc", "url": "https://api.github.com/repos/rust-lang/rust/commits/86d609fdf650baa97cda77156ffa9116468d98fc", "html_url": "https://github.com/rust-lang/rust/commit/86d609fdf650baa97cda77156ffa9116468d98fc"}, {"sha": "0215a1acb0230c3f81d47a3ee31ba562678f6be1", "url": "https://api.github.com/repos/rust-lang/rust/commits/0215a1acb0230c3f81d47a3ee31ba562678f6be1", "html_url": "https://github.com/rust-lang/rust/commit/0215a1acb0230c3f81d47a3ee31ba562678f6be1"}], "stats": {"total": 39, "additions": 21, "deletions": 18}, "files": [{"sha": "ffc84a488eb98cc774abae20e133bab870e434bc", "filename": "Cargo.lock", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/f64bae4ae385172fd27ce03e74e0c0f2bf738159/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/f64bae4ae385172fd27ce03e74e0c0f2bf738159/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=f64bae4ae385172fd27ce03e74e0c0f2bf738159", "patch": "@@ -1,6 +1,6 @@\n [root]\n name = \"clippy_lints\"\n-version = \"0.0.159\"\n+version = \"0.0.161\"\n dependencies = [\n  \"itertools 0.6.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"lazy_static 0.2.8 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -73,11 +73,11 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]\n name = \"clippy\"\n-version = \"0.0.159\"\n+version = \"0.0.161\"\n dependencies = [\n  \"cargo_metadata 0.2.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"clippy-mini-macro-test 0.1.0\",\n- \"clippy_lints 0.0.159\",\n+ \"clippy_lints 0.0.161\",\n  \"compiletest_rs 0.2.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"duct 0.8.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"lazy_static 0.2.8 (registry+https://github.com/rust-lang/crates.io-index)\","}, {"sha": "f06831556c2995a838cf6078d8d17d34f967cca0", "filename": "clippy_lints/src/loops.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f64bae4ae385172fd27ce03e74e0c0f2bf738159/clippy_lints%2Fsrc%2Floops.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f64bae4ae385172fd27ce03e74e0c0f2bf738159/clippy_lints%2Fsrc%2Floops.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Floops.rs?ref=f64bae4ae385172fd27ce03e74e0c0f2bf738159", "patch": "@@ -526,7 +526,7 @@ fn contains_continue_expr(expr: &Expr, dest: &NodeId) -> bool {\n         ExprMatch(ref e, ref arms, _) => {\n             contains_continue_expr(e, dest) || arms.iter().any(|a| contains_continue_expr(&a.body, dest))\n         },\n-        ExprBlock(ref block) => contains_continue_block(block, dest),\n+        ExprBlock(ref block) | ExprLoop(ref block, ..) => contains_continue_block(block, dest),\n         ExprStruct(_, _, ref base) => base.as_ref()\n             .map_or(false, |e| contains_continue_expr(e, dest)),\n         ExprAgain(d) => d.target_id.opt_id().map_or(false, |id| id == *dest),"}, {"sha": "ff0126704b54b05214db7d3d46928fdeae915772", "filename": "tests/ui/never_loop.rs", "status": "modified", "additions": 16, "deletions": 1, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/f64bae4ae385172fd27ce03e74e0c0f2bf738159/tests%2Fui%2Fnever_loop.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f64bae4ae385172fd27ce03e74e0c0f2bf738159/tests%2Fui%2Fnever_loop.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fnever_loop.rs?ref=f64bae4ae385172fd27ce03e74e0c0f2bf738159", "patch": "@@ -54,7 +54,7 @@ fn test5() {\n \n fn test6() {\n     let mut x = 0;\n-    'outer: loop { // never loops\n+    'outer: loop {\n         x += 1;\n \t\tloop { // never loops\n             if x == 5 { break }\n@@ -112,6 +112,20 @@ fn test11<F: FnMut() -> i32>(mut f: F) {\n     }\n }\n \n+pub fn test12(a: bool, b: bool) {\n+    'label: loop {\n+        loop {\n+            if a {\n+                continue 'label;\n+            }\n+            if b {\n+                break;\n+            }\n+        }\n+        break;\n+    }\n+}\n+\n fn main() {\n     test1();\n     test2();\n@@ -124,5 +138,6 @@ fn main() {\n     test9();\n     test10();\n     test11(|| 0);\n+    test12(true, false);\n }\n "}, {"sha": "dace2b7e261a81813ce253056ef9efa43267e1cb", "filename": "tests/ui/never_loop.stderr", "status": "modified", "additions": 1, "deletions": 13, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/f64bae4ae385172fd27ce03e74e0c0f2bf738159/tests%2Fui%2Fnever_loop.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f64bae4ae385172fd27ce03e74e0c0f2bf738159/tests%2Fui%2Fnever_loop.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fnever_loop.stderr?ref=f64bae4ae385172fd27ce03e74e0c0f2bf738159", "patch": "@@ -40,18 +40,6 @@ error: this loop never actually loops\n 50 | |         }\n    | |_________^\n \n-error: this loop never actually loops\n-  --> $DIR/never_loop.rs:57:5\n-   |\n-57 | /     'outer: loop { // never loops\n-58 | |         x += 1;\n-59 | |   loop { // never loops\n-60 | |             if x == 5 { break }\n-...  |\n-63 | |   return\n-64 | |  }\n-   | |__^\n-\n error: this loop never actually loops\n   --> $DIR/never_loop.rs:59:3\n    |\n@@ -80,5 +68,5 @@ error: this loop never actually loops\n 103 | |     }\n     | |_____^\n \n-error: aborting due to 8 previous errors\n+error: aborting due to 7 previous errors\n "}]}