{"sha": "2033eb1495b4a0386a0ab08815769477baf20c89", "node_id": "MDY6Q29tbWl0NzI0NzEyOjIwMzNlYjE0OTViNGEwMzg2YTBhYjA4ODE1NzY5NDc3YmFmMjBjODk=", "commit": {"author": {"name": "Carol (Nichols || Goulding)", "email": "carol.nichols@gmail.com", "date": "2020-08-30T13:56:20Z"}, "committer": {"name": "Carol (Nichols || Goulding)", "email": "carol.nichols@gmail.com", "date": "2020-10-01T01:27:04Z"}, "message": "Write manifest for MAJOR.MINOR channel to enable rustup convenience\n\nThis connects to https://github.com/rust-lang/rustup/issues/794.\n\nIt's hard to remember if there have been patch releases for old versions\nwhen you'd like to install the latest in a MAJOR.MINOR series.\n\nWhen we're doing a stable release, we write duplicate manifests to\n`stable`. With this change, only when we're doing a stable release, also\nwrite duplicate manifests to `MAJOR.MINOR` to eventually enable rustup\n(and any other tooling that builds Rust release URLs) to request, say,\n`1.45` and get `1.45.2` (assuming `1.45.2` is the latest available\n`1.45` and assuming that we never publish patch releases out of order).", "tree": {"sha": "1afc1c575bff5d591a494337cb3bd0a0b140588b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1afc1c575bff5d591a494337cb3bd0a0b140588b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2033eb1495b4a0386a0ab08815769477baf20c89", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQJMBAABCAA2FiEET6WvJ6ML0pFC5CKw0Es5psokOQIFAl91MGgYHGNhcm9sLm5p\nY2hvbHNAZ21haWwuY29tAAoJENBLOabKJDkCQFcP/jt4NrXcvS3Q/wsTC2xQnBPg\nVrGjaRJ9fAadXyyRfGSXei2Ae1Vk9knmc04cjxUMrxbfvYbMT0LrR+KzbFVZU5hO\nxdDRtL18+L0DrrGyiMx1Fwfbo0qFAwGb0aJDGRdM7VfMZbTT7afRoF614FiDqs7K\nu7VAQFE4OJSSEJ8TpO8nSP2xsXlJ+XuMjjCpNct6W1AbRsxVtAqFKn+mII7Szr41\nHJCh/ImbMUpiIVpjQd+34xvw+lF/sg5VpFobtELPL9jA5a+ouP7NBZ3CA8WV4a18\n7uRDP/gyCnDLiYj+thJpCuOzgKj0GzcsIKbTo0cny0T7jr0o2LTFwWaqZx3II42m\n4AWbfLtDBlgDKTjmxQl0FbANnRgyphKXRiQet6knrk+Wbp25DqxmSlJNDhEbfVxI\nqdLh8Y1qvZ654R3Y4JUowxgUvXgQ3CM4Y95owFUbz3YWvCBn3eTbGvyotKR1xba1\nCD4pfHRA8vIfF047gk6M1dPeYQPPzu4MXOVSAUiujbDTnZdrq9B+yVQmzldbWNLF\neV6QlhdVaG3qL1jLjU4sw9ll1syeqmNCtVycchspDyllTgwxRIiuhyRJsgkXvOoo\namEMzK+LXjQ77Gw1s8buZOSiTBMxhdswNsPTwM9bFbW9eIG2OArOfCkayV+dgoOe\neS68kXWTa99zXN8DNLaD\n=8Ker\n-----END PGP SIGNATURE-----", "payload": "tree 1afc1c575bff5d591a494337cb3bd0a0b140588b\nparent 9bb55dc8642d811d66a7599812009cc063577e00\nauthor Carol (Nichols || Goulding) <carol.nichols@gmail.com> 1598795780 -0400\ncommitter Carol (Nichols || Goulding) <carol.nichols@gmail.com> 1601515624 -0400\n\nWrite manifest for MAJOR.MINOR channel to enable rustup convenience\n\nThis connects to https://github.com/rust-lang/rustup/issues/794.\n\nIt's hard to remember if there have been patch releases for old versions\nwhen you'd like to install the latest in a MAJOR.MINOR series.\n\nWhen we're doing a stable release, we write duplicate manifests to\n`stable`. With this change, only when we're doing a stable release, also\nwrite duplicate manifests to `MAJOR.MINOR` to eventually enable rustup\n(and any other tooling that builds Rust release URLs) to request, say,\n`1.45` and get `1.45.2` (assuming `1.45.2` is the latest available\n`1.45` and assuming that we never publish patch releases out of order).\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2033eb1495b4a0386a0ab08815769477baf20c89", "html_url": "https://github.com/rust-lang/rust/commit/2033eb1495b4a0386a0ab08815769477baf20c89", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2033eb1495b4a0386a0ab08815769477baf20c89/comments", "author": {"login": "carols10cents", "id": 193874, "node_id": "MDQ6VXNlcjE5Mzg3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/193874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carols10cents", "html_url": "https://github.com/carols10cents", "followers_url": "https://api.github.com/users/carols10cents/followers", "following_url": "https://api.github.com/users/carols10cents/following{/other_user}", "gists_url": "https://api.github.com/users/carols10cents/gists{/gist_id}", "starred_url": "https://api.github.com/users/carols10cents/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carols10cents/subscriptions", "organizations_url": "https://api.github.com/users/carols10cents/orgs", "repos_url": "https://api.github.com/users/carols10cents/repos", "events_url": "https://api.github.com/users/carols10cents/events{/privacy}", "received_events_url": "https://api.github.com/users/carols10cents/received_events", "type": "User", "site_admin": false}, "committer": {"login": "carols10cents", "id": 193874, "node_id": "MDQ6VXNlcjE5Mzg3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/193874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carols10cents", "html_url": "https://github.com/carols10cents", "followers_url": "https://api.github.com/users/carols10cents/followers", "following_url": "https://api.github.com/users/carols10cents/following{/other_user}", "gists_url": "https://api.github.com/users/carols10cents/gists{/gist_id}", "starred_url": "https://api.github.com/users/carols10cents/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carols10cents/subscriptions", "organizations_url": "https://api.github.com/users/carols10cents/orgs", "repos_url": "https://api.github.com/users/carols10cents/repos", "events_url": "https://api.github.com/users/carols10cents/events{/privacy}", "received_events_url": "https://api.github.com/users/carols10cents/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9bb55dc8642d811d66a7599812009cc063577e00", "url": "https://api.github.com/repos/rust-lang/rust/commits/9bb55dc8642d811d66a7599812009cc063577e00", "html_url": "https://github.com/rust-lang/rust/commit/9bb55dc8642d811d66a7599812009cc063577e00"}], "stats": {"total": 2, "additions": 2, "deletions": 0}, "files": [{"sha": "517083366008615bd19280b36a0d5e8f7da1e7fc", "filename": "src/tools/build-manifest/src/main.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2033eb1495b4a0386a0ab08815769477baf20c89/src%2Ftools%2Fbuild-manifest%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2033eb1495b4a0386a0ab08815769477baf20c89/src%2Ftools%2Fbuild-manifest%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fbuild-manifest%2Fsrc%2Fmain.rs?ref=2033eb1495b4a0386a0ab08815769477baf20c89", "patch": "@@ -293,6 +293,8 @@ impl Builder {\n         self.write_channel_files(self.versions.channel(), &manifest);\n         if self.versions.channel() != rust_version {\n             self.write_channel_files(&rust_version, &manifest);\n+            let major_minor = rust_version.split('.').take(2).collect::<Vec<_>>().join(\".\");\n+            self.write_channel_files(&major_minor, &manifest);\n         }\n     }\n "}]}