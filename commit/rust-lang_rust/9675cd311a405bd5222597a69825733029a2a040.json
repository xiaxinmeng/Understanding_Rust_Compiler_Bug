{"sha": "9675cd311a405bd5222597a69825733029a2a040", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk2NzVjZDMxMWE0MDViZDUyMjI1OTdhNjk4MjU3MzMwMjlhMmEwNDA=", "commit": {"author": {"name": "Ben Blum", "email": "bblum@andrew.cmu.edu", "date": "2013-07-23T00:12:59Z"}, "committer": {"name": "Ben Blum", "email": "bblum@andrew.cmu.edu", "date": "2013-07-30T17:19:25Z"}, "message": "(cleanup) Fix unimplemented message for kill_all in newsched.", "tree": {"sha": "54789d5a5b8d08b0906dcd50df244f13a7865be0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/54789d5a5b8d08b0906dcd50df244f13a7865be0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9675cd311a405bd5222597a69825733029a2a040", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9675cd311a405bd5222597a69825733029a2a040", "html_url": "https://github.com/rust-lang/rust/commit/9675cd311a405bd5222597a69825733029a2a040", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9675cd311a405bd5222597a69825733029a2a040/comments", "author": {"login": "bblum", "id": 1820515, "node_id": "MDQ6VXNlcjE4MjA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bblum", "html_url": "https://github.com/bblum", "followers_url": "https://api.github.com/users/bblum/followers", "following_url": "https://api.github.com/users/bblum/following{/other_user}", "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}", "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bblum/subscriptions", "organizations_url": "https://api.github.com/users/bblum/orgs", "repos_url": "https://api.github.com/users/bblum/repos", "events_url": "https://api.github.com/users/bblum/events{/privacy}", "received_events_url": "https://api.github.com/users/bblum/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bblum", "id": 1820515, "node_id": "MDQ6VXNlcjE4MjA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bblum", "html_url": "https://github.com/bblum", "followers_url": "https://api.github.com/users/bblum/followers", "following_url": "https://api.github.com/users/bblum/following{/other_user}", "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}", "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bblum/subscriptions", "organizations_url": "https://api.github.com/users/bblum/orgs", "repos_url": "https://api.github.com/users/bblum/repos", "events_url": "https://api.github.com/users/bblum/events{/privacy}", "received_events_url": "https://api.github.com/users/bblum/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3f6b4c24ec2234a06632234eaf3014ae0e4adc66", "url": "https://api.github.com/repos/rust-lang/rust/commits/3f6b4c24ec2234a06632234eaf3014ae0e4adc66", "html_url": "https://github.com/rust-lang/rust/commit/3f6b4c24ec2234a06632234eaf3014ae0e4adc66"}], "stats": {"total": 9, "additions": 7, "deletions": 2}, "files": [{"sha": "baebda496dce92cbce9d4f5e67f7ef18ec4aac54", "filename": "src/libstd/task/spawn.rs", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/9675cd311a405bd5222597a69825733029a2a040/src%2Flibstd%2Ftask%2Fspawn.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9675cd311a405bd5222597a69825733029a2a040/src%2Flibstd%2Ftask%2Fspawn.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Ftask%2Fspawn.rs?ref=9675cd311a405bd5222597a69825733029a2a040", "patch": "@@ -512,7 +512,9 @@ impl RuntimeGlue {\n     unsafe fn kill_all_tasks(task: &TaskHandle) {\n         match *task {\n             OldTask(ptr) => rt::rust_task_kill_all(ptr),\n-            NewTask(ref _handle) => rtabort!(\"unimplemented\"), // FIXME(#7544)\n+            // FIXME(#7544): Remove the kill_all feature entirely once the\n+            // oldsched goes away.\n+            NewTask(ref _handle) => rtabort!(\"can't kill_all in newsched\"),\n         }\n     }\n \n@@ -573,7 +575,10 @@ impl RuntimeGlue {\n                             members: members,\n                             descendants: TaskSet::new(),\n                         }));\n-                        let group = Taskgroup(tasks, AncestorList(None), true, None);\n+                        // FIXME(#7544): Remove the is_main flag entirely once\n+                        // the newsched goes away. The main taskgroup has no special\n+                        // behaviour.\n+                        let group = Taskgroup(tasks, AncestorList(None), false, None);\n                         (*me).taskgroup = Some(group);\n                         (*me).taskgroup.get_ref()\n                     }"}]}