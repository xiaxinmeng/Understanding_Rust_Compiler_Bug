{"sha": "55bd6cee2ff9123c68d7361e235ac99927f4b062", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU1YmQ2Y2VlMmZmOTEyM2M2OGQ3MzYxZTIzNWFjOTk5MjdmNGIwNjI=", "commit": {"author": {"name": "Tim Chevalier", "email": "chevalier@alum.wellesley.edu", "date": "2012-09-06T19:11:48Z"}, "committer": {"name": "Tim Chevalier", "email": "chevalier@alum.wellesley.edu", "date": "2012-09-06T19:11:48Z"}, "message": "Test that merge sort is stable -- thanks to Jesse Jones\n\nCloses #3399", "tree": {"sha": "d0b9aaff894c445dbba828a668cc92fa7fb8d2d6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d0b9aaff894c445dbba828a668cc92fa7fb8d2d6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/55bd6cee2ff9123c68d7361e235ac99927f4b062", "comment_count": 1, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/55bd6cee2ff9123c68d7361e235ac99927f4b062", "html_url": "https://github.com/rust-lang/rust/commit/55bd6cee2ff9123c68d7361e235ac99927f4b062", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/55bd6cee2ff9123c68d7361e235ac99927f4b062/comments", "author": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "committer": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b4e547d71aa379e702a737550e479116914b19cf", "url": "https://api.github.com/repos/rust-lang/rust/commits/b4e547d71aa379e702a737550e479116914b19cf", "html_url": "https://github.com/rust-lang/rust/commit/b4e547d71aa379e702a737550e479116914b19cf"}], "stats": {"total": 22, "additions": 22, "deletions": 0}, "files": [{"sha": "64ea19d35f9e1508e153195b3b5688e77d498c5e", "filename": "src/libstd/sort.rs", "status": "modified", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/55bd6cee2ff9123c68d7361e235ac99927f4b062/src%2Flibstd%2Fsort.rs", "raw_url": "https://github.com/rust-lang/rust/raw/55bd6cee2ff9123c68d7361e235ac99927f4b062/src%2Flibstd%2Fsort.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsort.rs?ref=55bd6cee2ff9123c68d7361e235ac99927f4b062", "patch": "@@ -307,6 +307,28 @@ mod tests {\n         let v2 = merge_sort(le, v1);\n         assert v2 == ~[1, 2, 3];\n     }\n+\n+    #[test]\n+    fn test_merge_sort_stability()\n+    {\n+        // tjc: funny that we have to use parens\n+        pure fn ile(x: &(&static/str), y: &(&static/str)) -> bool\n+        {\n+            unchecked            // to_lower is not pure...\n+            {\n+                let x = x.to_lower();\n+                let y = y.to_lower();\n+                x <= y\n+            }\n+        }\n+\n+        let names1 = ~[\"joe bob\", \"Joe Bob\", \"Jack Brown\", \"JOE Bob\",\n+                       \"Sally Mae\", \"JOE BOB\", \"Alex Andy\"];\n+        let names2 = ~[\"Alex Andy\", \"Jack Brown\", \"joe bob\", \"Joe Bob\",\n+                       \"JOE Bob\", \"JOE BOB\", \"Sally Mae\"];\n+        let names3 = merge_sort(ile, names1);\n+        assert names3 == names2;\n+    }\n }\n \n // Local Variables:"}]}