{"sha": "d456161b678d20257587e82c8ddc6dbb41739d18", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ0NTYxNjFiNjc4ZDIwMjU3NTg3ZTgyYzhkZGM2ZGJiNDE3MzlkMTg=", "commit": {"author": {"name": "Nick Cameron", "email": "nrc@ncameron.org", "date": "2018-08-26T21:39:08Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2018-08-26T21:39:08Z"}, "message": "Merge pull request #2966 from topecongiro/issue-2953\n\nFormat in-place expression like assignment", "tree": {"sha": "80b5dc6b5714e2b6cb972a8f125e70ee8d92ecf8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/80b5dc6b5714e2b6cb972a8f125e70ee8d92ecf8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d456161b678d20257587e82c8ddc6dbb41739d18", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJbgx38CRBK7hj4Ov3rIwAAdHIIAG7zpoJJmhLyp4p5ho/5Vb9e\nStzhDFJRW2qhW7A+6rMxCZZo44GiXbqw252QHBGRTLBRPYNeEVKYkdbV7H1ddtqX\nlgcznTIIFOPEfvEu9zOoVb/0d+hrio6CU0lp59V1mTSrFXBdFfo4xGxfgsJLA9Jp\n1PorBJmpqui6US5glel7nCmwUsGuRKf1RdP84ZZ0beEm20cmQjhQUi7dkFaLhJJn\nYCpVVCpzuh4LdPl5BNw+csCmZ+1l0a2I3SjNL7kjCt0s1FyJ+gS4S8s+LOcHz7+f\nZIjmYMnhi1ptBwBU5u8EvdCNA9QvP2/rQqPn3nvBEI/ZlDn46NJv8eg2srBY5XA=\n=X+P0\n-----END PGP SIGNATURE-----\n", "payload": "tree 80b5dc6b5714e2b6cb972a8f125e70ee8d92ecf8\nparent 454a20ac011dae62c34e4d9e0590c869a6a2f017\nparent 78a0cde5bfb337af1812b06a73819cbb5ad61f06\nauthor Nick Cameron <nrc@ncameron.org> 1535319548 +1200\ncommitter GitHub <noreply@github.com> 1535319548 +1200\n\nMerge pull request #2966 from topecongiro/issue-2953\n\nFormat in-place expression like assignment "}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d456161b678d20257587e82c8ddc6dbb41739d18", "html_url": "https://github.com/rust-lang/rust/commit/d456161b678d20257587e82c8ddc6dbb41739d18", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d456161b678d20257587e82c8ddc6dbb41739d18/comments", "author": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "454a20ac011dae62c34e4d9e0590c869a6a2f017", "url": "https://api.github.com/repos/rust-lang/rust/commits/454a20ac011dae62c34e4d9e0590c869a6a2f017", "html_url": "https://github.com/rust-lang/rust/commit/454a20ac011dae62c34e4d9e0590c869a6a2f017"}, {"sha": "78a0cde5bfb337af1812b06a73819cbb5ad61f06", "url": "https://api.github.com/repos/rust-lang/rust/commits/78a0cde5bfb337af1812b06a73819cbb5ad61f06", "html_url": "https://github.com/rust-lang/rust/commit/78a0cde5bfb337af1812b06a73819cbb5ad61f06"}], "stats": {"total": 16, "additions": 13, "deletions": 3}, "files": [{"sha": "74639c6ef63d61e9001e7fb45205c6e9a16d377a", "filename": "src/expr.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/d456161b678d20257587e82c8ddc6dbb41739d18/src%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d456161b678d20257587e82c8ddc6dbb41739d18/src%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fexpr.rs?ref=d456161b678d20257587e82c8ddc6dbb41739d18", "patch": "@@ -338,8 +338,10 @@ pub fn format_expr(\n                 ))\n             }\n         }\n-        // FIXME(#2743)\n-        ast::ExprKind::ObsoleteInPlace(..) => unimplemented!(),\n+        ast::ExprKind::ObsoleteInPlace(ref lhs, ref rhs) => lhs\n+            .rewrite(context, shape)\n+            .map(|s| s + \" <-\")\n+            .and_then(|lhs| rewrite_assign_rhs(context, lhs, &**rhs, shape)),\n         ast::ExprKind::Async(capture_by, _node_id, ref block) => {\n             let mover = if capture_by == ast::CaptureBy::Value {\n                 \"move \""}, {"sha": "7ebb967a494ce9ca11cf59dcf193110fc1539d9c", "filename": "src/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d456161b678d20257587e82c8ddc6dbb41739d18/src%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d456161b678d20257587e82c8ddc6dbb41739d18/src%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib.rs?ref=d456161b678d20257587e82c8ddc6dbb41739d18", "patch": "@@ -8,7 +8,6 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-#![feature(tool_attributes)]\n #![feature(decl_macro)]\n #![allow(unused_attributes)]\n #![feature(type_ascription)]"}, {"sha": "3f364c1aecdc7abebc948df0db02603e2a057095", "filename": "tests/target/obsolete_in_place.rs", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/d456161b678d20257587e82c8ddc6dbb41739d18/tests%2Ftarget%2Fobsolete_in_place.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d456161b678d20257587e82c8ddc6dbb41739d18/tests%2Ftarget%2Fobsolete_in_place.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fobsolete_in_place.rs?ref=d456161b678d20257587e82c8ddc6dbb41739d18", "patch": "@@ -0,0 +1,9 @@\n+// #2953\n+\n+macro_rules! demo {\n+    ($a:ident <- $b:expr) => {};\n+}\n+\n+fn main() {\n+    demo!(i <- 0);\n+}"}]}