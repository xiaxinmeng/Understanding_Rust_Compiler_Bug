{"sha": "f565efd617fc2b74bca7fa637faf9c6241008442", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY1NjVlZmQ2MTdmYzJiNzRiY2E3ZmE2MzdmYWY5YzYyNDEwMDg0NDI=", "commit": {"author": {"name": "Andy Russell", "email": "arussell123@gmail.com", "date": "2019-02-14T00:57:12Z"}, "committer": {"name": "Andy Russell", "email": "arussell123@gmail.com", "date": "2019-02-14T00:57:50Z"}, "message": "mask `compiler_builtins` docs\n\nSince `compiler_builtins` is being injected automatically, its docs\naren't masked. This commit masks the crate's docs if it's brought in as\nan extern crate.", "tree": {"sha": "fcfd40ac20e84b702b0186096f76049b95a114e3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fcfd40ac20e84b702b0186096f76049b95a114e3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f565efd617fc2b74bca7fa637faf9c6241008442", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQFKBAABCAA0FiEELriChyEaiMu0yCg7viIhAz7bw3QFAlxkwQ8WHGFydXNzZWxs\nMTIzQGdtYWlsLmNvbQAKCRC+IiEDPtvDdBYmB/9Ct82/0ggXLABx8uqP1cgEn5tH\n6TcHce/+Agkxs2PoOpjQ6q/tD0D8s71fbbj3xhV+86aqaRvUXCFoxn2HGBAS7EaL\nz415ngeq1oqMjgGWIitZT/BsBYNW67YZ8Fr+RgBXkUlGok+4wD7r0ca2NwV2ExlD\nWoVBwLLgsLqNehgm6vBg5GCS9ajGoxmFqHNtuJw1pLc56Yd4ChFmKacdaZQfGKNY\nZifatYvm2+mgFDhkKCAwHw0BLaxodJVrxj6OBzlAmhazBnQUsFxRiZO5VpUWjqno\nWNruFzdmpXTIgwtQZwR3jMT7ZF7NzcZVC3XAtiZlRIOmjcNYFkGUyDG6aFTD\n=3etS\n-----END PGP SIGNATURE-----", "payload": "tree fcfd40ac20e84b702b0186096f76049b95a114e3\nparent 57d7cfc3cf50f0c427ad3043ff09eaef20671320\nauthor Andy Russell <arussell123@gmail.com> 1550105832 -0500\ncommitter Andy Russell <arussell123@gmail.com> 1550105870 -0500\n\nmask `compiler_builtins` docs\n\nSince `compiler_builtins` is being injected automatically, its docs\naren't masked. This commit masks the crate's docs if it's brought in as\nan extern crate.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f565efd617fc2b74bca7fa637faf9c6241008442", "html_url": "https://github.com/rust-lang/rust/commit/f565efd617fc2b74bca7fa637faf9c6241008442", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f565efd617fc2b74bca7fa637faf9c6241008442/comments", "author": {"login": "euclio", "id": 1372438, "node_id": "MDQ6VXNlcjEzNzI0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1372438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/euclio", "html_url": "https://github.com/euclio", "followers_url": "https://api.github.com/users/euclio/followers", "following_url": "https://api.github.com/users/euclio/following{/other_user}", "gists_url": "https://api.github.com/users/euclio/gists{/gist_id}", "starred_url": "https://api.github.com/users/euclio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/euclio/subscriptions", "organizations_url": "https://api.github.com/users/euclio/orgs", "repos_url": "https://api.github.com/users/euclio/repos", "events_url": "https://api.github.com/users/euclio/events{/privacy}", "received_events_url": "https://api.github.com/users/euclio/received_events", "type": "User", "site_admin": false}, "committer": {"login": "euclio", "id": 1372438, "node_id": "MDQ6VXNlcjEzNzI0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1372438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/euclio", "html_url": "https://github.com/euclio", "followers_url": "https://api.github.com/users/euclio/followers", "following_url": "https://api.github.com/users/euclio/following{/other_user}", "gists_url": "https://api.github.com/users/euclio/gists{/gist_id}", "starred_url": "https://api.github.com/users/euclio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/euclio/subscriptions", "organizations_url": "https://api.github.com/users/euclio/orgs", "repos_url": "https://api.github.com/users/euclio/repos", "events_url": "https://api.github.com/users/euclio/events{/privacy}", "received_events_url": "https://api.github.com/users/euclio/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "57d7cfc3cf50f0c427ad3043ff09eaef20671320", "url": "https://api.github.com/repos/rust-lang/rust/commits/57d7cfc3cf50f0c427ad3043ff09eaef20671320", "html_url": "https://github.com/rust-lang/rust/commit/57d7cfc3cf50f0c427ad3043ff09eaef20671320"}], "stats": {"total": 7, "additions": 6, "deletions": 1}, "files": [{"sha": "3044704718b4ada6837e6a31c58dd277bb635008", "filename": "src/librustdoc/clean/mod.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/f565efd617fc2b74bca7fa637faf9c6241008442/src%2Flibrustdoc%2Fclean%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f565efd617fc2b74bca7fa637faf9c6241008442/src%2Flibrustdoc%2Fclean%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fclean%2Fmod.rs?ref=f565efd617fc2b74bca7fa637faf9c6241008442", "patch": "@@ -165,7 +165,12 @@ impl<'a, 'tcx, 'rcx> Clean<Crate> for visit_ast::RustdocVisitor<'a, 'tcx, 'rcx>\n         match module.inner {\n             ModuleItem(ref module) => {\n                 for it in &module.items {\n-                    if it.is_extern_crate() && it.attrs.has_doc_flag(\"masked\") {\n+                    // `compiler_builtins` should be masked too, but we can't apply\n+                    // `#[doc(masked)]` to the injected `extern crate` because it's unstable.\n+                    if it.is_extern_crate()\n+                        && (it.attrs.has_doc_flag(\"masked\")\n+                            || self.cx.tcx.is_compiler_builtins(it.def_id.krate))\n+                    {\n                         masked_crates.insert(it.def_id.krate);\n                     }\n                 }"}]}