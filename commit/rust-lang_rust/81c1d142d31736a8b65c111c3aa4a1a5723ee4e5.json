{"sha": "81c1d142d31736a8b65c111c3aa4a1a5723ee4e5", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgxYzFkMTQyZDMxNzM2YThiNjVjMTExYzNhYTRhMWE1NzIzZWU0ZTU=", "commit": {"author": {"name": "Chris Morgan", "email": "me@chrismorgan.info", "date": "2015-08-24T21:47:42Z"}, "committer": {"name": "Chris Morgan", "email": "me@chrismorgan.info", "date": "2015-08-24T21:47:42Z"}, "message": "Simplify `String`\u2019s `Extend<&str>` implementation\n\nReserving lower_bound bytes was just silly. It\u2019d be perfectly reasonable\nto have empty strings in the iterator, which could cause superfluous\nreallocation of the string, or to have more than one byte per string,\nwhich could cause additional reallocation (in practice it\u2019ll balance\nout). The added complexity of this logic is simply pointless, adding\na little bloat with no demonstrable advantage and slight disadvantage.", "tree": {"sha": "170c7cfe799b47ccd060b7972cd1ddb3cabbbf1d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/170c7cfe799b47ccd060b7972cd1ddb3cabbbf1d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/81c1d142d31736a8b65c111c3aa4a1a5723ee4e5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/81c1d142d31736a8b65c111c3aa4a1a5723ee4e5", "html_url": "https://github.com/rust-lang/rust/commit/81c1d142d31736a8b65c111c3aa4a1a5723ee4e5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/81c1d142d31736a8b65c111c3aa4a1a5723ee4e5/comments", "author": {"login": "chris-morgan", "id": 392868, "node_id": "MDQ6VXNlcjM5Mjg2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/392868?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chris-morgan", "html_url": "https://github.com/chris-morgan", "followers_url": "https://api.github.com/users/chris-morgan/followers", "following_url": "https://api.github.com/users/chris-morgan/following{/other_user}", "gists_url": "https://api.github.com/users/chris-morgan/gists{/gist_id}", "starred_url": "https://api.github.com/users/chris-morgan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chris-morgan/subscriptions", "organizations_url": "https://api.github.com/users/chris-morgan/orgs", "repos_url": "https://api.github.com/users/chris-morgan/repos", "events_url": "https://api.github.com/users/chris-morgan/events{/privacy}", "received_events_url": "https://api.github.com/users/chris-morgan/received_events", "type": "User", "site_admin": false}, "committer": {"login": "chris-morgan", "id": 392868, "node_id": "MDQ6VXNlcjM5Mjg2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/392868?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chris-morgan", "html_url": "https://github.com/chris-morgan", "followers_url": "https://api.github.com/users/chris-morgan/followers", "following_url": "https://api.github.com/users/chris-morgan/following{/other_user}", "gists_url": "https://api.github.com/users/chris-morgan/gists{/gist_id}", "starred_url": "https://api.github.com/users/chris-morgan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chris-morgan/subscriptions", "organizations_url": "https://api.github.com/users/chris-morgan/orgs", "repos_url": "https://api.github.com/users/chris-morgan/repos", "events_url": "https://api.github.com/users/chris-morgan/events{/privacy}", "received_events_url": "https://api.github.com/users/chris-morgan/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4c996499a1bcf747b12f8290eeff3024e59da529", "url": "https://api.github.com/repos/rust-lang/rust/commits/4c996499a1bcf747b12f8290eeff3024e59da529", "html_url": "https://github.com/rust-lang/rust/commit/4c996499a1bcf747b12f8290eeff3024e59da529"}], "stats": {"total": 6, "additions": 1, "deletions": 5}, "files": [{"sha": "a8f030c437d053d51e4c8943096693e87b5422b9", "filename": "src/libcollections/string.rs", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/81c1d142d31736a8b65c111c3aa4a1a5723ee4e5/src%2Flibcollections%2Fstring.rs", "raw_url": "https://github.com/rust-lang/rust/raw/81c1d142d31736a8b65c111c3aa4a1a5723ee4e5/src%2Flibcollections%2Fstring.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fstring.rs?ref=81c1d142d31736a8b65c111c3aa4a1a5723ee4e5", "patch": "@@ -813,11 +813,7 @@ impl<'a> Extend<&'a char> for String {\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n impl<'a> Extend<&'a str> for String {\n     fn extend<I: IntoIterator<Item=&'a str>>(&mut self, iterable: I) {\n-        let iterator = iterable.into_iter();\n-        // A guess that at least one byte per iterator element will be needed.\n-        let (lower_bound, _) = iterator.size_hint();\n-        self.reserve(lower_bound);\n-        for s in iterator {\n+        for s in iterable {\n             self.push_str(s)\n         }\n     }"}]}