{"sha": "574bee35fb2ea0a94e5045bc714ab3884500648e", "node_id": "C_kwDOAAsO6NoAKDU3NGJlZTM1ZmIyZWEwYTk0ZTUwNDViYzcxNGFiMzg4NDUwMDY0OGU", "commit": {"author": {"name": "ricked-twice", "email": "39213807+ricked-twice@users.noreply.github.com", "date": "2022-05-03T20:23:30Z"}, "committer": {"name": "ricked-twice", "email": "39213807+ricked-twice@users.noreply.github.com", "date": "2022-05-03T20:23:30Z"}, "message": "Taking review hints into account.", "tree": {"sha": "fdb26bfb6bacb02ffd1e5b6935b75f91ad22f773", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fdb26bfb6bacb02ffd1e5b6935b75f91ad22f773"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/574bee35fb2ea0a94e5045bc714ab3884500648e", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEy//zn6QeojTXHSMFkquVU+1XdQMFAmJxj0IACgkQkquVU+1X\ndQMGYxAAwaIUB9CxjWJ7vnUCYFqduqfolSTKGtDEsLeZVQY0U93bfI/S1R0UK9hD\n67LdLHgjb8GQi3ODbl9R3PVDBb0MR6OAGFQ1IVenLC54wGDOxgJVZmo20Nh33dbH\ngY+uQhYoJaNmctdzKhNs2vB64A9lDAe8LCbcQ2PRBU+k1ax2+wYhKNzzwWIJEIiL\nqhZ+TcFYyXdmpSZepcT9b7WtIIHzxjILuuKz/ZUMnKFRjGrs0rYmr4xGyn+Uoqvd\n3uPkgHqafQ4SENGpXQm2Ffq892eXjn74osNF2+AKlgGTzonZZ810mRt4XQ4s2QDK\nIzFg4yGpraQCGXXQTmHKtIu/rZSjH9wvFYNmYN4EnxYFg4Alk8Kd9CN6FOGyDMvC\nUJoi8bzRqo3dIAUWjgAiH8SWMcVU2aXvcR8XMojnWGg0mPzu0A4BmVcdUOkz0PSb\nMiKoLcLDgoF7MbiTlh8HsPEW+GPRJ8XL+yr5BkH6gyblkf4n5Va5ynYhg83AdfQw\nTgt3xvOtFu39OGtUHokfpFxfmVCIrVstOw+jPpCPf3br8V1rxphzowW+CJNHmDYr\nm7T2QgIkL53o6zwRPGoTqZPIs0LKcMBg2kNnluaCRx3Mgfg1lGOyJiaiPAUuPQdC\nQjOI6vqZuNqFUhxpyKiqhaflc9lEAw+ZKegTBRBqO4SjY1YD48w=\n=Yrq4\n-----END PGP SIGNATURE-----", "payload": "tree fdb26bfb6bacb02ffd1e5b6935b75f91ad22f773\nparent bfcd191905ce48c5b746af12c2995ef535d61b83\nauthor ricked-twice <39213807+ricked-twice@users.noreply.github.com> 1651609410 +0200\ncommitter ricked-twice <39213807+ricked-twice@users.noreply.github.com> 1651609410 +0200\n\nTaking review hints into account.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/574bee35fb2ea0a94e5045bc714ab3884500648e", "html_url": "https://github.com/rust-lang/rust/commit/574bee35fb2ea0a94e5045bc714ab3884500648e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/574bee35fb2ea0a94e5045bc714ab3884500648e/comments", "author": {"login": "ricked-twice", "id": 39213807, "node_id": "MDQ6VXNlcjM5MjEzODA3", "avatar_url": "https://avatars.githubusercontent.com/u/39213807?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ricked-twice", "html_url": "https://github.com/ricked-twice", "followers_url": "https://api.github.com/users/ricked-twice/followers", "following_url": "https://api.github.com/users/ricked-twice/following{/other_user}", "gists_url": "https://api.github.com/users/ricked-twice/gists{/gist_id}", "starred_url": "https://api.github.com/users/ricked-twice/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ricked-twice/subscriptions", "organizations_url": "https://api.github.com/users/ricked-twice/orgs", "repos_url": "https://api.github.com/users/ricked-twice/repos", "events_url": "https://api.github.com/users/ricked-twice/events{/privacy}", "received_events_url": "https://api.github.com/users/ricked-twice/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ricked-twice", "id": 39213807, "node_id": "MDQ6VXNlcjM5MjEzODA3", "avatar_url": "https://avatars.githubusercontent.com/u/39213807?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ricked-twice", "html_url": "https://github.com/ricked-twice", "followers_url": "https://api.github.com/users/ricked-twice/followers", "following_url": "https://api.github.com/users/ricked-twice/following{/other_user}", "gists_url": "https://api.github.com/users/ricked-twice/gists{/gist_id}", "starred_url": "https://api.github.com/users/ricked-twice/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ricked-twice/subscriptions", "organizations_url": "https://api.github.com/users/ricked-twice/orgs", "repos_url": "https://api.github.com/users/ricked-twice/repos", "events_url": "https://api.github.com/users/ricked-twice/events{/privacy}", "received_events_url": "https://api.github.com/users/ricked-twice/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bfcd191905ce48c5b746af12c2995ef535d61b83", "url": "https://api.github.com/repos/rust-lang/rust/commits/bfcd191905ce48c5b746af12c2995ef535d61b83", "html_url": "https://github.com/rust-lang/rust/commit/bfcd191905ce48c5b746af12c2995ef535d61b83"}], "stats": {"total": 17, "additions": 8, "deletions": 9}, "files": [{"sha": "bfb8ce6f1051c03b3573fbf39e2c5591c36da235", "filename": "compiler/rustc_trait_selection/src/traits/error_reporting/suggestions.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/574bee35fb2ea0a94e5045bc714ab3884500648e/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fsuggestions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/574bee35fb2ea0a94e5045bc714ab3884500648e/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fsuggestions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fsuggestions.rs?ref=574bee35fb2ea0a94e5045bc714ab3884500648e", "patch": "@@ -866,7 +866,7 @@ impl<'a, 'tcx> InferCtxtExt<'tcx> for InferCtxt<'a, 'tcx> {\n                 return false;\n             }\n \n-            // This is a quick fix to resolve an ICE ([issue#96223](https://github.com/rust-lang/rust/issues/96223)).\n+            // This is a quick fix to resolve an ICE (#96223).\n             // This change should probably be deeper.\n             // As suggested by @jackh726, `mk_trait_obligation_with_new_self_ty` could take a `Binder<(TraitRef, Ty)>\n             // instead of `Binder<Ty>` leading to some changes to its call places."}, {"sha": "85667bb849bd46cb6d07ec80a34056f4dcb4f392", "filename": "src/test/ui/suggestions/issue-96223.rs", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/574bee35fb2ea0a94e5045bc714ab3884500648e/src%2Ftest%2Fui%2Fsuggestions%2Fissue-96223.rs", "raw_url": "https://github.com/rust-lang/rust/raw/574bee35fb2ea0a94e5045bc714ab3884500648e/src%2Ftest%2Fui%2Fsuggestions%2Fissue-96223.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Fissue-96223.rs?ref=574bee35fb2ea0a94e5045bc714ab3884500648e", "patch": "@@ -1,6 +1,5 @@\n-// Test case for #96223.\n-// An ICE was triggered because of a failed assertion.\n-// Thanks to @Manishearth for the minimal test case.\n+// Previously ICEd because we didn't properly track binders in suggestions\n+// check-fail\n \n pub trait Foo<'de>: Sized {}\n \n@@ -47,7 +46,7 @@ fn icey_bounds<D: Dummy<EmptyMarker>>(p: &D) {}\n \n fn trigger_ice() {\n     let p = Empty;\n-    icey_bounds(&p); //~ERROR\n+    icey_bounds(&p); //~ERROR the trait bound\n }\n \n fn main() {}"}, {"sha": "513725d99628cae3828825ec6889c91bb1fc521f", "filename": "src/test/ui/suggestions/issue-96223.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/574bee35fb2ea0a94e5045bc714ab3884500648e/src%2Ftest%2Fui%2Fsuggestions%2Fissue-96223.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/574bee35fb2ea0a94e5045bc714ab3884500648e/src%2Ftest%2Fui%2Fsuggestions%2Fissue-96223.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Fissue-96223.stderr?ref=574bee35fb2ea0a94e5045bc714ab3884500648e", "patch": "@@ -1,5 +1,5 @@\n error[E0277]: the trait bound `for<'de> EmptyBis<'de>: Foo<'_>` is not satisfied\n-  --> $DIR/issue-96223.rs:50:17\n+  --> $DIR/issue-96223.rs:49:17\n    |\n LL |     icey_bounds(&p);\n    |     ----------- ^^ the trait `for<'de> Foo<'_>` is not implemented for `EmptyBis<'de>`\n@@ -8,17 +8,17 @@ LL |     icey_bounds(&p);\n    |\n    = help: the trait `Foo<'de>` is implemented for `Baz<T>`\n note: required because of the requirements on the impl of `for<'de> Foo<'de>` for `Baz<EmptyBis<'de>>`\n-  --> $DIR/issue-96223.rs:17:14\n+  --> $DIR/issue-96223.rs:16:14\n    |\n LL | impl<'de, T> Foo<'de> for Baz<T> where T: Foo<'de> {}\n    |              ^^^^^^^^     ^^^^^^\n note: required because of the requirements on the impl of `Dummy<EmptyMarker>` for `Empty`\n-  --> $DIR/issue-96223.rs:21:9\n+  --> $DIR/issue-96223.rs:20:9\n    |\n LL | impl<M> Dummy<M> for Empty\n    |         ^^^^^^^^     ^^^^^\n note: required by a bound in `icey_bounds`\n-  --> $DIR/issue-96223.rs:46:19\n+  --> $DIR/issue-96223.rs:45:19\n    |\n LL | fn icey_bounds<D: Dummy<EmptyMarker>>(p: &D) {}\n    |                   ^^^^^^^^^^^^^^^^^^ required by this bound in `icey_bounds`"}]}