{"sha": "0706df5f8cfd5bdd164d10bb67facc2a6c5f6b8f", "node_id": "C_kwDOAAsO6NoAKDA3MDZkZjVmOGNmZDViZGQxNjRkMTBiYjY3ZmFjYzJhNmM1ZjZiOGY", "commit": {"author": {"name": "Afonso Bordado", "email": "afonsobordado@az8.co", "date": "2022-08-12T20:47:36Z"}, "committer": {"name": "Afonso Bordado", "email": "afonsobordado@az8.co", "date": "2022-08-12T20:47:36Z"}, "message": "Update abi-checker version", "tree": {"sha": "3bd375041bcc8d539ea9816a1bfe79e379858d7e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3bd375041bcc8d539ea9816a1bfe79e379858d7e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0706df5f8cfd5bdd164d10bb67facc2a6c5f6b8f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0706df5f8cfd5bdd164d10bb67facc2a6c5f6b8f", "html_url": "https://github.com/rust-lang/rust/commit/0706df5f8cfd5bdd164d10bb67facc2a6c5f6b8f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0706df5f8cfd5bdd164d10bb67facc2a6c5f6b8f/comments", "author": {"login": "afonso360", "id": 1357143, "node_id": "MDQ6VXNlcjEzNTcxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1357143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afonso360", "html_url": "https://github.com/afonso360", "followers_url": "https://api.github.com/users/afonso360/followers", "following_url": "https://api.github.com/users/afonso360/following{/other_user}", "gists_url": "https://api.github.com/users/afonso360/gists{/gist_id}", "starred_url": "https://api.github.com/users/afonso360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afonso360/subscriptions", "organizations_url": "https://api.github.com/users/afonso360/orgs", "repos_url": "https://api.github.com/users/afonso360/repos", "events_url": "https://api.github.com/users/afonso360/events{/privacy}", "received_events_url": "https://api.github.com/users/afonso360/received_events", "type": "User", "site_admin": false}, "committer": {"login": "afonso360", "id": 1357143, "node_id": "MDQ6VXNlcjEzNTcxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1357143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afonso360", "html_url": "https://github.com/afonso360", "followers_url": "https://api.github.com/users/afonso360/followers", "following_url": "https://api.github.com/users/afonso360/following{/other_user}", "gists_url": "https://api.github.com/users/afonso360/gists{/gist_id}", "starred_url": "https://api.github.com/users/afonso360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afonso360/subscriptions", "organizations_url": "https://api.github.com/users/afonso360/orgs", "repos_url": "https://api.github.com/users/afonso360/repos", "events_url": "https://api.github.com/users/afonso360/events{/privacy}", "received_events_url": "https://api.github.com/users/afonso360/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7610be478f9e67a4e0e13cddb50f171e82cc3170", "url": "https://api.github.com/repos/rust-lang/rust/commits/7610be478f9e67a4e0e13cddb50f171e82cc3170", "html_url": "https://github.com/rust-lang/rust/commit/7610be478f9e67a4e0e13cddb50f171e82cc3170"}], "stats": {"total": 14, "additions": 3, "deletions": 11}, "files": [{"sha": "67dbd0a38a4fb4d44d0579e907bbc1a4c6bc9de0", "filename": "build_system/abi_checker.rs", "status": "modified", "additions": 2, "deletions": 10, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/0706df5f8cfd5bdd164d10bb67facc2a6c5f6b8f/build_system%2Fabi_checker.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0706df5f8cfd5bdd164d10bb67facc2a6c5f6b8f/build_system%2Fabi_checker.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/build_system%2Fabi_checker.rs?ref=0706df5f8cfd5bdd164d10bb67facc2a6c5f6b8f", "patch": "@@ -1,6 +1,6 @@\n use super::build_sysroot;\n use super::config;\n-use super::utils::spawn_and_wait_with_input;\n+use super::utils::spawn_and_wait;\n use build_system::SysrootKind;\n use std::env;\n use std::path::Path;\n@@ -56,13 +56,5 @@ pub(crate) fn run(\n     cmd.arg(\"--add-rustc-codegen-backend\");\n     cmd.arg(format!(\"cgclif:{}\", cg_clif_dylib_path.display()));\n \n-    let output = spawn_and_wait_with_input(cmd, \"\".to_string());\n-\n-    // TODO: The correct thing to do here is to check the exit code, but abi-checker\n-    // currently doesn't return 0 on success, so check for the test fail count.\n-    // See: https://github.com/Gankra/abi-checker/issues/10\n-    let failed = !(output.contains(\"0 failed\") && output.contains(\"0 completely failed\"));\n-    if failed {\n-        panic!(\"abi-checker failed!\");\n-    }\n+    spawn_and_wait(cmd);\n }"}, {"sha": "24a233d38068a5651baf73f21887dc02a71c69c7", "filename": "build_system/prepare.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0706df5f8cfd5bdd164d10bb67facc2a6c5f6b8f/build_system%2Fprepare.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0706df5f8cfd5bdd164d10bb67facc2a6c5f6b8f/build_system%2Fprepare.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/build_system%2Fprepare.rs?ref=0706df5f8cfd5bdd164d10bb67facc2a6c5f6b8f", "patch": "@@ -18,7 +18,7 @@ pub(crate) fn prepare() {\n         \"abi-checker\",\n         \"Gankra\",\n         \"abi-checker\",\n-        \"7c1571da6e43f9a37347623e7d5c7d51be664a7b\",\n+        \"a2232d45f202846f5c02203c9f27355360f9a2ff\",\n     );\n \n     clone_repo_shallow_github("}]}