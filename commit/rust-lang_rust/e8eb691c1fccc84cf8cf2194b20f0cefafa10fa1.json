{"sha": "e8eb691c1fccc84cf8cf2194b20f0cefafa10fa1", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU4ZWI2OTFjMWZjY2M4NGNmOGNmMjE5NGIyMGYwY2VmYWZhMTBmYTE=", "commit": {"author": {"name": "Jubilee Young", "email": "workingjubilee@gmail.com", "date": "2021-04-22T04:40:29Z"}, "committer": {"name": "Jubilee Young", "email": "workingjubilee@gmail.com", "date": "2021-04-22T05:39:08Z"}, "message": "Use arrayvec 0.7, drop smallvec 0.6\n\nWith the arrival of min const generics, many alt-vec libraries have\nupdated to use it in some way and arrayvec is no exception. Use the\nlatest with minor refactoring.\n\nAlso, rustc_workspace_hack is the only user of smallvec 0.6 in the\nentire tree, so drop it.", "tree": {"sha": "97d719bab82b78b88e06f5be5419f4aed8b1928b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/97d719bab82b78b88e06f5be5419f4aed8b1928b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e8eb691c1fccc84cf8cf2194b20f0cefafa10fa1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e8eb691c1fccc84cf8cf2194b20f0cefafa10fa1", "html_url": "https://github.com/rust-lang/rust/commit/e8eb691c1fccc84cf8cf2194b20f0cefafa10fa1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e8eb691c1fccc84cf8cf2194b20f0cefafa10fa1/comments", "author": {"login": "workingjubilee", "id": 46493976, "node_id": "MDQ6VXNlcjQ2NDkzOTc2", "avatar_url": "https://avatars.githubusercontent.com/u/46493976?v=4", "gravatar_id": "", "url": "https://api.github.com/users/workingjubilee", "html_url": "https://github.com/workingjubilee", "followers_url": "https://api.github.com/users/workingjubilee/followers", "following_url": "https://api.github.com/users/workingjubilee/following{/other_user}", "gists_url": "https://api.github.com/users/workingjubilee/gists{/gist_id}", "starred_url": "https://api.github.com/users/workingjubilee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/workingjubilee/subscriptions", "organizations_url": "https://api.github.com/users/workingjubilee/orgs", "repos_url": "https://api.github.com/users/workingjubilee/repos", "events_url": "https://api.github.com/users/workingjubilee/events{/privacy}", "received_events_url": "https://api.github.com/users/workingjubilee/received_events", "type": "User", "site_admin": false}, "committer": {"login": "workingjubilee", "id": 46493976, "node_id": "MDQ6VXNlcjQ2NDkzOTc2", "avatar_url": "https://avatars.githubusercontent.com/u/46493976?v=4", "gravatar_id": "", "url": "https://api.github.com/users/workingjubilee", "html_url": "https://github.com/workingjubilee", "followers_url": "https://api.github.com/users/workingjubilee/followers", "following_url": "https://api.github.com/users/workingjubilee/following{/other_user}", "gists_url": "https://api.github.com/users/workingjubilee/gists{/gist_id}", "starred_url": "https://api.github.com/users/workingjubilee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/workingjubilee/subscriptions", "organizations_url": "https://api.github.com/users/workingjubilee/orgs", "repos_url": "https://api.github.com/users/workingjubilee/repos", "events_url": "https://api.github.com/users/workingjubilee/events{/privacy}", "received_events_url": "https://api.github.com/users/workingjubilee/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b849326744a8eec939e592f0ab13bff85cc865d3", "url": "https://api.github.com/repos/rust-lang/rust/commits/b849326744a8eec939e592f0ab13bff85cc865d3", "html_url": "https://github.com/rust-lang/rust/commit/b849326744a8eec939e592f0ab13bff85cc865d3"}], "stats": {"total": 130, "additions": 61, "deletions": 69}, "files": [{"sha": "30de50a81770ecff978585d5f95c0070332390ce", "filename": "Cargo.lock", "status": "modified", "additions": 48, "deletions": 52, "changes": 100, "blob_url": "https://github.com/rust-lang/rust/blob/e8eb691c1fccc84cf8cf2194b20f0cefafa10fa1/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/e8eb691c1fccc84cf8cf2194b20f0cefafa10fa1/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=e8eb691c1fccc84cf8cf2194b20f0cefafa10fa1", "patch": "@@ -111,9 +111,15 @@ checksum = \"a4c527152e37cf757a3f78aae5a06fbeefdb07ccc535c980a3208ee3060dd544\"\n \n [[package]]\n name = \"arrayvec\"\n-version = \"0.5.1\"\n+version = \"0.5.2\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"23b62fc65de8e4e7f52534fb52b0f3ed04746ae267519eef2a83941e8085068b\"\n+\n+[[package]]\n+name = \"arrayvec\"\n+version = \"0.7.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"cff77d8686867eceff3105329d4698d96c2391c176d5d03adc90c7389162b5b8\"\n+checksum = \"5a2f58b0bb10c380af2b26e57212856b8c9a59e0925b4c20f4a174a49734eaf7\"\n \n [[package]]\n name = \"atty\"\n@@ -160,7 +166,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"d8fb2d74254a3a0b5cac33ac9f8ed0e44aa50378d9dbb2e5d83bd21ed1dc2c8a\"\n dependencies = [\n  \"arrayref\",\n- \"arrayvec\",\n+ \"arrayvec 0.5.2\",\n  \"constant_time_eq\",\n ]\n \n@@ -2165,7 +2171,7 @@ dependencies = [\n  \"parking_lot\",\n  \"perf-event-open-sys\",\n  \"rustc-hash\",\n- \"smallvec 1.6.1\",\n+ \"smallvec\",\n ]\n \n [[package]]\n@@ -2324,7 +2330,7 @@ dependencies = [\n  \"rustc-workspace-hack\",\n  \"rustc_version\",\n  \"shell-escape\",\n- \"smallvec 1.6.1\",\n+ \"smallvec\",\n ]\n \n [[package]]\n@@ -2548,7 +2554,7 @@ dependencies = [\n  \"instant\",\n  \"libc\",\n  \"redox_syscall 0.2.5\",\n- \"smallvec 1.6.1\",\n+ \"smallvec\",\n  \"winapi 0.3.9\",\n ]\n \n@@ -3269,7 +3275,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"259cca0e975ecb05fd289ace45280c30ff792efc04e856a7f18b7fc86a3cb610\"\n dependencies = [\n  \"rustc-ap-rustc_data_structures\",\n- \"smallvec 1.6.1\",\n+ \"smallvec\",\n ]\n \n [[package]]\n@@ -3285,7 +3291,7 @@ dependencies = [\n  \"rustc-ap-rustc_macros\",\n  \"rustc-ap-rustc_serialize\",\n  \"rustc-ap-rustc_span\",\n- \"smallvec 1.6.1\",\n+ \"smallvec\",\n  \"tracing\",\n ]\n \n@@ -3343,7 +3349,7 @@ version = \"712.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"9cbfa7f82517a1b2efe7106c864c3f930b1da8aff07a27fd317af2f36522fd2e\"\n dependencies = [\n- \"arrayvec\",\n+ \"arrayvec 0.5.2\",\n  \"bitflags\",\n  \"cfg-if 0.1.10\",\n  \"crossbeam-utils 0.7.2\",\n@@ -3360,7 +3366,7 @@ dependencies = [\n  \"rustc-hash\",\n  \"rustc-rayon\",\n  \"rustc-rayon-core\",\n- \"smallvec 1.6.1\",\n+ \"smallvec\",\n  \"stable_deref_trait\",\n  \"stacker\",\n  \"tempfile\",\n@@ -3408,7 +3414,7 @@ dependencies = [\n  \"rustc-ap-rustc_serialize\",\n  \"rustc-ap-rustc_session\",\n  \"rustc-ap-rustc_span\",\n- \"smallvec 1.6.1\",\n+ \"smallvec\",\n  \"tracing\",\n ]\n \n@@ -3440,7 +3446,7 @@ version = \"712.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"7f6f53afc4f7111c82295cb7ea3878f520bbac6a2c5a12e125b4ca9156498cff\"\n dependencies = [\n- \"arrayvec\",\n+ \"arrayvec 0.5.2\",\n  \"rustc-ap-rustc_macros\",\n  \"rustc-ap-rustc_serialize\",\n ]\n@@ -3496,7 +3502,7 @@ dependencies = [\n  \"rustc-ap-rustc_lexer\",\n  \"rustc-ap-rustc_session\",\n  \"rustc-ap-rustc_span\",\n- \"smallvec 1.6.1\",\n+ \"smallvec\",\n  \"tracing\",\n  \"unicode-normalization\",\n ]\n@@ -3508,7 +3514,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"d33c710120953c0214f47a6caf42064d7e241003b4af36c98a6d6156e70335f1\"\n dependencies = [\n  \"indexmap\",\n- \"smallvec 1.6.1\",\n+ \"smallvec\",\n ]\n \n [[package]]\n@@ -3657,8 +3663,7 @@ dependencies = [\n  \"quote\",\n  \"serde\",\n  \"serde_json\",\n- \"smallvec 0.6.14\",\n- \"smallvec 1.6.1\",\n+ \"smallvec\",\n  \"syn\",\n  \"url 2.1.1\",\n  \"winapi 0.3.9\",\n@@ -3669,15 +3674,15 @@ name = \"rustc_apfloat\"\n version = \"0.0.0\"\n dependencies = [\n  \"bitflags\",\n- \"smallvec 1.6.1\",\n+ \"smallvec\",\n ]\n \n [[package]]\n name = \"rustc_arena\"\n version = \"0.0.0\"\n dependencies = [\n  \"rustc_data_structures\",\n- \"smallvec 1.6.1\",\n+ \"smallvec\",\n ]\n \n [[package]]\n@@ -3691,7 +3696,7 @@ dependencies = [\n  \"rustc_macros\",\n  \"rustc_serialize\",\n  \"rustc_span\",\n- \"smallvec 1.6.1\",\n+ \"smallvec\",\n  \"tracing\",\n ]\n \n@@ -3709,7 +3714,7 @@ dependencies = [\n  \"rustc_session\",\n  \"rustc_span\",\n  \"rustc_target\",\n- \"smallvec 1.6.1\",\n+ \"smallvec\",\n  \"tracing\",\n ]\n \n@@ -3772,7 +3777,7 @@ dependencies = [\n  \"rustc_session\",\n  \"rustc_span\",\n  \"rustc_target\",\n- \"smallvec 1.6.1\",\n+ \"smallvec\",\n  \"tracing\",\n ]\n \n@@ -3801,7 +3806,7 @@ dependencies = [\n  \"rustc_session\",\n  \"rustc_span\",\n  \"rustc_target\",\n- \"smallvec 1.6.1\",\n+ \"smallvec\",\n  \"snap\",\n  \"tracing\",\n ]\n@@ -3840,7 +3845,7 @@ dependencies = [\n name = \"rustc_data_structures\"\n version = \"0.0.0\"\n dependencies = [\n- \"arrayvec\",\n+ \"arrayvec 0.7.0\",\n  \"bitflags\",\n  \"cfg-if 0.1.10\",\n  \"crossbeam-utils 0.7.2\",\n@@ -3858,7 +3863,7 @@ dependencies = [\n  \"rustc_index\",\n  \"rustc_macros\",\n  \"rustc_serialize\",\n- \"smallvec 1.6.1\",\n+ \"smallvec\",\n  \"stable_deref_trait\",\n  \"stacker\",\n  \"tempfile\",\n@@ -3941,7 +3946,7 @@ dependencies = [\n  \"rustc_serialize\",\n  \"rustc_session\",\n  \"rustc_span\",\n- \"smallvec 1.6.1\",\n+ \"smallvec\",\n  \"tracing\",\n ]\n \n@@ -3973,7 +3978,7 @@ dependencies = [\n  \"rustc_serialize\",\n  \"rustc_span\",\n  \"rustc_target\",\n- \"smallvec 1.6.1\",\n+ \"smallvec\",\n  \"tracing\",\n ]\n \n@@ -4010,7 +4015,7 @@ dependencies = [\n name = \"rustc_index\"\n version = \"0.0.0\"\n dependencies = [\n- \"arrayvec\",\n+ \"arrayvec 0.7.0\",\n  \"rustc_macros\",\n  \"rustc_serialize\",\n ]\n@@ -4031,7 +4036,7 @@ dependencies = [\n  \"rustc_session\",\n  \"rustc_span\",\n  \"rustc_target\",\n- \"smallvec 1.6.1\",\n+ \"smallvec\",\n  \"tracing\",\n ]\n \n@@ -4075,7 +4080,7 @@ dependencies = [\n  \"rustc_traits\",\n  \"rustc_ty_utils\",\n  \"rustc_typeck\",\n- \"smallvec 1.6.1\",\n+ \"smallvec\",\n  \"tempfile\",\n  \"tracing\",\n  \"winapi 0.3.9\",\n@@ -4164,7 +4169,7 @@ dependencies = [\n  \"rustc_session\",\n  \"rustc_span\",\n  \"rustc_target\",\n- \"smallvec 1.6.1\",\n+ \"smallvec\",\n  \"snap\",\n  \"stable_deref_trait\",\n  \"tracing\",\n@@ -4196,7 +4201,7 @@ dependencies = [\n  \"rustc_span\",\n  \"rustc_target\",\n  \"rustc_type_ir\",\n- \"smallvec 1.6.1\",\n+ \"smallvec\",\n  \"tracing\",\n ]\n \n@@ -4227,7 +4232,7 @@ dependencies = [\n  \"rustc_span\",\n  \"rustc_target\",\n  \"rustc_trait_selection\",\n- \"smallvec 1.6.1\",\n+ \"smallvec\",\n  \"tracing\",\n ]\n \n@@ -4250,7 +4255,7 @@ dependencies = [\n  \"rustc_span\",\n  \"rustc_target\",\n  \"rustc_trait_selection\",\n- \"smallvec 1.6.1\",\n+ \"smallvec\",\n  \"tracing\",\n ]\n \n@@ -4267,7 +4272,7 @@ dependencies = [\n  \"rustc_lexer\",\n  \"rustc_session\",\n  \"rustc_span\",\n- \"smallvec 1.6.1\",\n+ \"smallvec\",\n  \"tracing\",\n  \"unicode-normalization\",\n ]\n@@ -4368,7 +4373,7 @@ dependencies = [\n  \"rustc_serialize\",\n  \"rustc_session\",\n  \"rustc_span\",\n- \"smallvec 1.6.1\",\n+ \"smallvec\",\n  \"tracing\",\n ]\n \n@@ -4392,7 +4397,7 @@ dependencies = [\n  \"rustc_middle\",\n  \"rustc_session\",\n  \"rustc_span\",\n- \"smallvec 1.6.1\",\n+ \"smallvec\",\n  \"tracing\",\n ]\n \n@@ -4421,7 +4426,7 @@ version = \"0.0.0\"\n dependencies = [\n  \"indexmap\",\n  \"rustc_macros\",\n- \"smallvec 1.6.1\",\n+ \"smallvec\",\n ]\n \n [[package]]\n@@ -4518,7 +4523,7 @@ dependencies = [\n  \"rustc_session\",\n  \"rustc_span\",\n  \"rustc_target\",\n- \"smallvec 1.6.1\",\n+ \"smallvec\",\n  \"tracing\",\n ]\n \n@@ -4538,7 +4543,7 @@ dependencies = [\n  \"rustc_middle\",\n  \"rustc_span\",\n  \"rustc_trait_selection\",\n- \"smallvec 1.6.1\",\n+ \"smallvec\",\n  \"tracing\",\n ]\n \n@@ -4588,7 +4593,7 @@ dependencies = [\n  \"rustc_span\",\n  \"rustc_target\",\n  \"rustc_trait_selection\",\n- \"smallvec 1.6.1\",\n+ \"smallvec\",\n  \"tracing\",\n ]\n \n@@ -4605,7 +4610,7 @@ dependencies = [\n name = \"rustdoc\"\n version = \"0.0.0\"\n dependencies = [\n- \"arrayvec\",\n+ \"arrayvec 0.7.0\",\n  \"expect-test\",\n  \"itertools 0.9.0\",\n  \"minifier\",\n@@ -4615,7 +4620,7 @@ dependencies = [\n  \"rustdoc-json-types\",\n  \"serde\",\n  \"serde_json\",\n- \"smallvec 1.6.1\",\n+ \"smallvec\",\n  \"tempfile\",\n  \"tracing\",\n  \"tracing-subscriber\",\n@@ -4961,15 +4966,6 @@ version = \"0.4.2\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"c111b5bd5695e56cffe5129854aa230b39c93a305372fdbb2668ca2394eea9f8\"\n \n-[[package]]\n-name = \"smallvec\"\n-version = \"0.6.14\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"b97fcaeba89edba30f044a10c6a3cc39df9c3f17d7cd829dd1446cab35f890e0\"\n-dependencies = [\n- \"maybe-uninit\",\n-]\n-\n [[package]]\n name = \"smallvec\"\n version = \"1.6.1\"\n@@ -5489,7 +5485,7 @@ dependencies = [\n  \"serde\",\n  \"serde_json\",\n  \"sharded-slab\",\n- \"smallvec 1.6.1\",\n+ \"smallvec\",\n  \"thread_local\",\n  \"tracing\",\n  \"tracing-core\","}, {"sha": "d0a5fe1f2a63cf22bc98ed8730a0b346c8161ab8", "filename": "compiler/rustc_data_structures/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e8eb691c1fccc84cf8cf2194b20f0cefafa10fa1/compiler%2Frustc_data_structures%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/e8eb691c1fccc84cf8cf2194b20f0cefafa10fa1/compiler%2Frustc_data_structures%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_data_structures%2FCargo.toml?ref=e8eb691c1fccc84cf8cf2194b20f0cefafa10fa1", "patch": "@@ -8,7 +8,7 @@ edition = \"2018\"\n doctest = false\n \n [dependencies]\n-arrayvec = { version = \"0.5.1\", default-features = false }\n+arrayvec = { version = \"0.7\", default-features = false }\n ena = \"0.14\"\n indexmap = \"1.5.1\"\n tracing = \"0.1\""}, {"sha": "e249886e9bc016f78661a0043bf5288388fd1634", "filename": "compiler/rustc_data_structures/src/sso/map.rs", "status": "modified", "additions": 5, "deletions": 8, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/e8eb691c1fccc84cf8cf2194b20f0cefafa10fa1/compiler%2Frustc_data_structures%2Fsrc%2Fsso%2Fmap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e8eb691c1fccc84cf8cf2194b20f0cefafa10fa1/compiler%2Frustc_data_structures%2Fsrc%2Fsso%2Fmap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_data_structures%2Fsrc%2Fsso%2Fmap.rs?ref=e8eb691c1fccc84cf8cf2194b20f0cefafa10fa1", "patch": "@@ -18,11 +18,8 @@ use std::ops::Index;\n // for reasonably small arrays that stay\n // small in vast majority of cases.\n //\n-// '8' is choosen as a sane default, to be\n+// '8' is chosen as a sane default, to be\n // reevaluated later.\n-//\n-// Note: As of now ArrayVec design prevents\n-//       us from making it user-customizable.\n const SSO_ARRAY_SIZE: usize = 8;\n \n /// Small-storage-optimized implementation of a map.\n@@ -70,7 +67,7 @@ const SSO_ARRAY_SIZE: usize = 8;\n \n #[derive(Clone)]\n pub enum SsoHashMap<K, V> {\n-    Array(ArrayVec<[(K, V); SSO_ARRAY_SIZE]>),\n+    Array(ArrayVec<(K, V), SSO_ARRAY_SIZE>),\n     Map(FxHashMap<K, V>),\n }\n \n@@ -411,7 +408,7 @@ where\n \n impl<K, V> IntoIterator for SsoHashMap<K, V> {\n     type IntoIter = EitherIter<\n-        <ArrayVec<[(K, V); 8]> as IntoIterator>::IntoIter,\n+        <ArrayVec<(K, V), 8> as IntoIterator>::IntoIter,\n         <FxHashMap<K, V> as IntoIterator>::IntoIter,\n     >;\n     type Item = <Self::IntoIter as Iterator>::Item;\n@@ -441,7 +438,7 @@ fn adapt_array_mut_it<K, V>(pair: &'a mut (K, V)) -> (&'a K, &'a mut V) {\n impl<'a, K, V> IntoIterator for &'a SsoHashMap<K, V> {\n     type IntoIter = EitherIter<\n         std::iter::Map<\n-            <&'a ArrayVec<[(K, V); 8]> as IntoIterator>::IntoIter,\n+            <&'a ArrayVec<(K, V), 8> as IntoIterator>::IntoIter,\n             fn(&'a (K, V)) -> (&'a K, &'a V),\n         >,\n         <&'a FxHashMap<K, V> as IntoIterator>::IntoIter,\n@@ -459,7 +456,7 @@ impl<'a, K, V> IntoIterator for &'a SsoHashMap<K, V> {\n impl<'a, K, V> IntoIterator for &'a mut SsoHashMap<K, V> {\n     type IntoIter = EitherIter<\n         std::iter::Map<\n-            <&'a mut ArrayVec<[(K, V); 8]> as IntoIterator>::IntoIter,\n+            <&'a mut ArrayVec<(K, V), 8> as IntoIterator>::IntoIter,\n             fn(&'a mut (K, V)) -> (&'a K, &'a mut V),\n         >,\n         <&'a mut FxHashMap<K, V> as IntoIterator>::IntoIter,"}, {"sha": "4b1f0b86475a28469d453ba201f48743d3ddc40e", "filename": "compiler/rustc_index/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e8eb691c1fccc84cf8cf2194b20f0cefafa10fa1/compiler%2Frustc_index%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/e8eb691c1fccc84cf8cf2194b20f0cefafa10fa1/compiler%2Frustc_index%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_index%2FCargo.toml?ref=e8eb691c1fccc84cf8cf2194b20f0cefafa10fa1", "patch": "@@ -8,6 +8,6 @@ edition = \"2018\"\n doctest = false\n \n [dependencies]\n-arrayvec = { version = \"0.5.1\", default-features = false }\n+arrayvec = { version = \"0.7\", default-features = false }\n rustc_serialize = { path = \"../rustc_serialize\" }\n rustc_macros = { path = \"../rustc_macros\" }"}, {"sha": "d26ab1939e3bf145349ed2100dc541eb626d227e", "filename": "compiler/rustc_index/src/bit_set.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e8eb691c1fccc84cf8cf2194b20f0cefafa10fa1/compiler%2Frustc_index%2Fsrc%2Fbit_set.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e8eb691c1fccc84cf8cf2194b20f0cefafa10fa1/compiler%2Frustc_index%2Fsrc%2Fbit_set.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_index%2Fsrc%2Fbit_set.rs?ref=e8eb691c1fccc84cf8cf2194b20f0cefafa10fa1", "patch": "@@ -375,7 +375,7 @@ const SPARSE_MAX: usize = 8;\n #[derive(Clone, Debug)]\n pub struct SparseBitSet<T> {\n     domain_size: usize,\n-    elems: ArrayVec<[T; SPARSE_MAX]>,\n+    elems: ArrayVec<T, SPARSE_MAX>,\n }\n \n impl<T: Idx> SparseBitSet<T> {"}, {"sha": "b816b9d718876aa3ed76d99982fc8ea8815986d1", "filename": "src/librustdoc/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e8eb691c1fccc84cf8cf2194b20f0cefafa10fa1/src%2Flibrustdoc%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/e8eb691c1fccc84cf8cf2194b20f0cefafa10fa1/src%2Flibrustdoc%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2FCargo.toml?ref=e8eb691c1fccc84cf8cf2194b20f0cefafa10fa1", "patch": "@@ -8,7 +8,7 @@ edition = \"2018\"\n path = \"lib.rs\"\n \n [dependencies]\n-arrayvec = { version = \"0.5.1\", default-features = false }\n+arrayvec = { version = \"0.7\", default-features = false }\n pulldown-cmark = { version = \"0.8\", default-features = false }\n minifier = \"0.0.39\"\n rayon = { version = \"0.3.0\", package = \"rustc-rayon\" }"}, {"sha": "675de640c70106aa226cd8cc9bbaa4a9004846a3", "filename": "src/librustdoc/clean/types.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/e8eb691c1fccc84cf8cf2194b20f0cefafa10fa1/src%2Flibrustdoc%2Fclean%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e8eb691c1fccc84cf8cf2194b20f0cefafa10fa1/src%2Flibrustdoc%2Fclean%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fclean%2Ftypes.rs?ref=e8eb691c1fccc84cf8cf2194b20f0cefafa10fa1", "patch": "@@ -1616,18 +1616,18 @@ impl PrimitiveType {\n         }\n     }\n \n-    crate fn impls(&self, tcx: TyCtxt<'_>) -> &'static ArrayVec<[DefId; 4]> {\n+    crate fn impls(&self, tcx: TyCtxt<'_>) -> &'static ArrayVec<DefId, 4> {\n         Self::all_impls(tcx).get(self).expect(\"missing impl for primitive type\")\n     }\n \n-    crate fn all_impls(tcx: TyCtxt<'_>) -> &'static FxHashMap<PrimitiveType, ArrayVec<[DefId; 4]>> {\n-        static CELL: OnceCell<FxHashMap<PrimitiveType, ArrayVec<[DefId; 4]>>> = OnceCell::new();\n+    crate fn all_impls(tcx: TyCtxt<'_>) -> &'static FxHashMap<PrimitiveType, ArrayVec<DefId, 4>> {\n+        static CELL: OnceCell<FxHashMap<PrimitiveType, ArrayVec<DefId, 4>>> = OnceCell::new();\n \n         CELL.get_or_init(move || {\n             use self::PrimitiveType::*;\n \n             let single = |a: Option<DefId>| a.into_iter().collect();\n-            let both = |a: Option<DefId>, b: Option<DefId>| -> ArrayVec<_> {\n+            let both = |a: Option<DefId>, b: Option<DefId>| -> ArrayVec<_, 4> {\n                 a.into_iter().chain(b).collect()\n             };\n "}, {"sha": "5776d56d187f8ebfba698ccb4b7197f9008bbecf", "filename": "src/tools/rustc-workspace-hack/Cargo.toml", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/e8eb691c1fccc84cf8cf2194b20f0cefafa10fa1/src%2Ftools%2Frustc-workspace-hack%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/e8eb691c1fccc84cf8cf2194b20f0cefafa10fa1/src%2Ftools%2Frustc-workspace-hack%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Frustc-workspace-hack%2FCargo.toml?ref=e8eb691c1fccc84cf8cf2194b20f0cefafa10fa1", "patch": "@@ -71,7 +71,6 @@ proc-macro2 = { version = \"1\", features = [\"default\"] }\n quote = { version = \"1\", features = [\"default\"] }\n serde = { version = \"1.0.82\", features = ['derive'] }\n serde_json = { version = \"1.0.31\", features = [\"raw_value\", \"unbounded_depth\"] }\n-smallvec-0_6 = { package = \"smallvec\", version = \"0.6.14\", features = ['union', 'may_dangle'] }\n smallvec = { version = \"1.6.1\", features = ['union', 'may_dangle'] }\n syn = { version = \"1\", features = ['fold', 'full', 'extra-traits', 'visit', 'visit-mut'] }\n url = { version = \"2.0\", features = ['serde'] }"}]}