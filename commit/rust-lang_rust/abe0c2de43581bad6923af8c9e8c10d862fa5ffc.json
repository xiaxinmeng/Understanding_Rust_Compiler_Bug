{"sha": "abe0c2de43581bad6923af8c9e8c10d862fa5ffc", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFiZTBjMmRlNDM1ODFiYWQ2OTIzYWY4YzllOGMxMGQ4NjJmYTVmZmM=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2020-04-03T13:39:35Z"}, "committer": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2020-04-03T13:39:35Z"}, "message": "cleanup lower_item_id", "tree": {"sha": "0f7c79af739d34a97ebfb277ad47d598eb40b7f7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0f7c79af739d34a97ebfb277ad47d598eb40b7f7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/abe0c2de43581bad6923af8c9e8c10d862fa5ffc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/abe0c2de43581bad6923af8c9e8c10d862fa5ffc", "html_url": "https://github.com/rust-lang/rust/commit/abe0c2de43581bad6923af8c9e8c10d862fa5ffc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/abe0c2de43581bad6923af8c9e8c10d862fa5ffc/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "424c7939259d8c6c1a914d36011651ac71f73b62", "url": "https://api.github.com/repos/rust-lang/rust/commits/424c7939259d8c6c1a914d36011651ac71f73b62", "html_url": "https://github.com/rust-lang/rust/commit/424c7939259d8c6c1a914d36011651ac71f73b62"}], "stats": {"total": 13, "additions": 2, "deletions": 11}, "files": [{"sha": "6c35969c8493f9ec867f275293d2f893fe078f57", "filename": "src/librustc_ast_lowering/item.rs", "status": "modified", "additions": 2, "deletions": 11, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/abe0c2de43581bad6923af8c9e8c10d862fa5ffc/src%2Flibrustc_ast_lowering%2Fitem.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abe0c2de43581bad6923af8c9e8c10d862fa5ffc/src%2Flibrustc_ast_lowering%2Fitem.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_ast_lowering%2Fitem.rs?ref=abe0c2de43581bad6923af8c9e8c10d862fa5ffc", "patch": "@@ -165,19 +165,10 @@ impl<'hir> LoweringContext<'_, 'hir> {\n             }\n             ItemKind::MacroDef(..) => SmallVec::new(),\n             ItemKind::Fn(..) | ItemKind::Impl { of_trait: None, .. } => smallvec![i.id],\n-            ItemKind::Static(ref ty, ..) => {\n+            ItemKind::Static(ref ty, ..) | ItemKind::Const(_, ref ty, ..) => {\n                 let mut ids = smallvec![i.id];\n                 if self.sess.features_untracked().impl_trait_in_bindings {\n-                    let mut visitor = ImplTraitTypeIdVisitor { ids: &mut ids };\n-                    visitor.visit_ty(ty);\n-                }\n-                ids\n-            }\n-            ItemKind::Const(_, ref ty, ..) => {\n-                let mut ids = smallvec![i.id];\n-                if self.sess.features_untracked().impl_trait_in_bindings {\n-                    let mut visitor = ImplTraitTypeIdVisitor { ids: &mut ids };\n-                    visitor.visit_ty(ty);\n+                    ImplTraitTypeIdVisitor { ids: &mut ids }.visit_ty(ty);\n                 }\n                 ids\n             }"}]}