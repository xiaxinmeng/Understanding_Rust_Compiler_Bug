{"sha": "100c924527f461f1fe0d9365a476455ce544c3c7", "node_id": "MDY6Q29tbWl0NzI0NzEyOjEwMGM5MjQ1MjdmNDYxZjFmZTBkOTM2NWE0NzY0NTVjZTU0NGMzYzc=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-10-25T04:18:14Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-10-25T04:18:14Z"}, "message": "Rollup merge of #65775 - matthewjasper:reempty, r=pnkfelix\n\nFix more `ReEmpty` ICEs\n\ncloses #65553\n\nr? @pnkfelix", "tree": {"sha": "c67f37c945de42d499f93dc17cc8500557f77e81", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c67f37c945de42d499f93dc17cc8500557f77e81"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/100c924527f461f1fe0d9365a476455ce544c3c7", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdsneGCRBK7hj4Ov3rIwAAdHIIAGOc9SaExKOGD9z+UsQ2nnz7\nux/IAYus33F/M5Kqc20GXCwVijzDx0HCuUOHu11CzYuViAl5EmRvVaZvaAd1b5NY\nT/5k119xJeDzmZmVTRJa395hXO7dO9JnfVAci+fzFHMkdogKHflVN3aL0v/x2eQb\nfAPXLVI/c8b1Y4gVs5FMHu8QIW7pzswz8oekSirSmkUb9/GMnMmNQ0osNQt4I+he\nPPOkPo2AJugcaJGHmWVA9GdU9x+CAsfcrY2E3ng+/cTXU53hxV6bq7pgGqiGliz/\n7TXr02qhMsipO55JsK4eV13rXxqwvHWFe6YO9dmlMAzxOuZM+G6S/Qr9rqRx3Xo=\n=5bAQ\n-----END PGP SIGNATURE-----\n", "payload": "tree c67f37c945de42d499f93dc17cc8500557f77e81\nparent 2b7cc64e43fe40582f00e26bec135820bd490249\nparent d72417434682e1fcb6e447436f0664d7ea763468\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1571977094 +0200\ncommitter GitHub <noreply@github.com> 1571977094 +0200\n\nRollup merge of #65775 - matthewjasper:reempty, r=pnkfelix\n\nFix more `ReEmpty` ICEs\n\ncloses #65553\n\nr? @pnkfelix\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/100c924527f461f1fe0d9365a476455ce544c3c7", "html_url": "https://github.com/rust-lang/rust/commit/100c924527f461f1fe0d9365a476455ce544c3c7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/100c924527f461f1fe0d9365a476455ce544c3c7/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2b7cc64e43fe40582f00e26bec135820bd490249", "url": "https://api.github.com/repos/rust-lang/rust/commits/2b7cc64e43fe40582f00e26bec135820bd490249", "html_url": "https://github.com/rust-lang/rust/commit/2b7cc64e43fe40582f00e26bec135820bd490249"}, {"sha": "d72417434682e1fcb6e447436f0664d7ea763468", "url": "https://api.github.com/repos/rust-lang/rust/commits/d72417434682e1fcb6e447436f0664d7ea763468", "html_url": "https://github.com/rust-lang/rust/commit/d72417434682e1fcb6e447436f0664d7ea763468"}], "stats": {"total": 28, "additions": 26, "deletions": 2}, "files": [{"sha": "34ac96beb5ca35531a1017b1b7fe7005f5578172", "filename": "src/librustc_mir/borrow_check/nll/type_check/constraint_conversion.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/100c924527f461f1fe0d9365a476455ce544c3c7/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Ftype_check%2Fconstraint_conversion.rs", "raw_url": "https://github.com/rust-lang/rust/raw/100c924527f461f1fe0d9365a476455ce544c3c7/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Ftype_check%2Fconstraint_conversion.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Ftype_check%2Fconstraint_conversion.rs?ref=100c924527f461f1fe0d9365a476455ce544c3c7", "patch": "@@ -178,6 +178,9 @@ impl<'a, 'b, 'tcx> TypeOutlivesDelegate<'tcx> for &'a mut ConstraintConversion<'\n         a: ty::Region<'tcx>,\n         b: ty::Region<'tcx>,\n     ) {\n+        if let ty::ReEmpty = a {\n+            return;\n+        }\n         let b = self.to_region_vid(b);\n         let a = self.to_region_vid(a);\n         self.add_outlives(b, a);\n@@ -190,6 +193,9 @@ impl<'a, 'b, 'tcx> TypeOutlivesDelegate<'tcx> for &'a mut ConstraintConversion<'\n         a: ty::Region<'tcx>,\n         bound: VerifyBound<'tcx>,\n     ) {\n+        if let ty::ReEmpty = a {\n+            return;\n+        }\n         let type_test = self.verify_to_type_test(kind, a, bound);\n         self.add_type_test(type_test);\n     }"}, {"sha": "20d6e47f75300cab5fa2405fa1b7866982a116db", "filename": "src/test/ui/nll/empty-type-predicate-2.rs", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/100c924527f461f1fe0d9365a476455ce544c3c7/src%2Ftest%2Fui%2Fnll%2Fempty-type-predicate-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/100c924527f461f1fe0d9365a476455ce544c3c7/src%2Ftest%2Fui%2Fnll%2Fempty-type-predicate-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fnll%2Fempty-type-predicate-2.rs?ref=100c924527f461f1fe0d9365a476455ce544c3c7", "patch": "@@ -0,0 +1,18 @@\n+// Regression test for #65553\n+//\n+// `D::Error:` is lowered to `D::Error: ReEmpty` - check that we don't ICE in\n+// NLL for the unexpected region.\n+\n+// check-pass\n+\n+trait Deserializer {\n+    type Error;\n+}\n+\n+fn d1<D: Deserializer>() where D::Error: {}\n+\n+fn d2<D: Deserializer>() {\n+    d1::<D>();\n+}\n+\n+fn main() {}"}, {"sha": "d126a455daeb204e77f11ff63139de60378bdd99", "filename": "src/test/ui/nll/empty-type-predicate.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/100c924527f461f1fe0d9365a476455ce544c3c7/src%2Ftest%2Fui%2Fnll%2Fempty-type-predicate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/100c924527f461f1fe0d9365a476455ce544c3c7/src%2Ftest%2Fui%2Fnll%2Fempty-type-predicate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fnll%2Fempty-type-predicate.rs?ref=100c924527f461f1fe0d9365a476455ce544c3c7", "patch": "@@ -3,9 +3,9 @@\n // `dyn T:` is lowered to `dyn T: ReEmpty` - check that we don't ICE in NLL for\n // the unexpected region.\n \n-// build-pass (FIXME(62277): could be check-pass?)\n+// check-pass\n \n trait T {}\n fn f() where dyn T: {}\n \n-fn main() {}\n+fn main() { f(); }"}]}