{"sha": "08284449a24f28ca9d76b8ccd823bc59ed2b30e3", "node_id": "C_kwDOAAsO6NoAKDA4Mjg0NDQ5YTI0ZjI4Y2E5ZDc2YjhjY2Q4MjNiYzU5ZWQyYjMwZTM", "commit": {"author": {"name": "Michael Goulet", "email": "michael@errs.io", "date": "2023-03-22T04:32:23Z"}, "committer": {"name": "Michael Goulet", "email": "michael@errs.io", "date": "2023-03-22T18:16:01Z"}, "message": "Subst gat normalize pred correctly", "tree": {"sha": "e4ff3b4359f43f86b30fc2ff5ba16c0c1af3f25d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e4ff3b4359f43f86b30fc2ff5ba16c0c1af3f25d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/08284449a24f28ca9d76b8ccd823bc59ed2b30e3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/08284449a24f28ca9d76b8ccd823bc59ed2b30e3", "html_url": "https://github.com/rust-lang/rust/commit/08284449a24f28ca9d76b8ccd823bc59ed2b30e3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/08284449a24f28ca9d76b8ccd823bc59ed2b30e3/comments", "author": {"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6dc3999c2699461aa930b8c1e00f99e73dcc0174", "url": "https://api.github.com/repos/rust-lang/rust/commits/6dc3999c2699461aa930b8c1e00f99e73dcc0174", "html_url": "https://github.com/rust-lang/rust/commit/6dc3999c2699461aa930b8c1e00f99e73dcc0174"}], "stats": {"total": 19, "additions": 18, "deletions": 1}, "files": [{"sha": "fd89a2067b7c69d2e0b23bcadc03f499b8dc670b", "filename": "compiler/rustc_hir_analysis/src/check/compare_impl_item.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/08284449a24f28ca9d76b8ccd823bc59ed2b30e3/compiler%2Frustc_hir_analysis%2Fsrc%2Fcheck%2Fcompare_impl_item.rs", "raw_url": "https://github.com/rust-lang/rust/raw/08284449a24f28ca9d76b8ccd823bc59ed2b30e3/compiler%2Frustc_hir_analysis%2Fsrc%2Fcheck%2Fcompare_impl_item.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_analysis%2Fsrc%2Fcheck%2Fcompare_impl_item.rs?ref=08284449a24f28ca9d76b8ccd823bc59ed2b30e3", "patch": "@@ -1958,7 +1958,7 @@ pub(super) fn check_type_bounds<'tcx>(\n     let container_id = impl_ty.container_id(tcx);\n \n     let rebased_substs = impl_ty_substs.rebase_onto(tcx, container_id, impl_trait_ref.substs);\n-    let impl_ty_value = tcx.type_of(impl_ty.def_id).subst_identity();\n+    let impl_ty_value = tcx.type_of(impl_ty.def_id).subst(tcx, impl_ty_substs);\n \n     let param_env = tcx.param_env(impl_ty.def_id);\n "}, {"sha": "b43f982283b8b1f84fcd52800e22951a8e69c44b", "filename": "tests/ui/generic-associated-types/gat-bounds-normalize-pred.rs", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/08284449a24f28ca9d76b8ccd823bc59ed2b30e3/tests%2Fui%2Fgeneric-associated-types%2Fgat-bounds-normalize-pred.rs", "raw_url": "https://github.com/rust-lang/rust/raw/08284449a24f28ca9d76b8ccd823bc59ed2b30e3/tests%2Fui%2Fgeneric-associated-types%2Fgat-bounds-normalize-pred.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fgeneric-associated-types%2Fgat-bounds-normalize-pred.rs?ref=08284449a24f28ca9d76b8ccd823bc59ed2b30e3", "patch": "@@ -0,0 +1,17 @@\n+// check-pass\n+\n+trait Foo {\n+    type Assoc<T>: PartialEq<Self::Assoc<i32>>;\n+}\n+\n+impl Foo for () {\n+    type Assoc<T> = Wrapper<T>;\n+}\n+\n+struct Wrapper<T>(T);\n+\n+impl<T> PartialEq<Wrapper<i32>> for Wrapper<T> {\n+    fn eq(&self, _other: &Wrapper<i32>) -> bool { true }\n+}\n+\n+fn main() {}"}]}