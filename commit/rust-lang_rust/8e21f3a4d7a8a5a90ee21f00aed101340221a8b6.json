{"sha": "8e21f3a4d7a8a5a90ee21f00aed101340221a8b6", "node_id": "C_kwDOAAsO6NoAKDhlMjFmM2E0ZDdhOGE1YTkwZWUyMWYwMGFlZDEwMTM0MDIyMWE4YjY", "commit": {"author": {"name": "Cameron Steffen", "email": "cam.steffen94@gmail.com", "date": "2021-11-06T21:03:32Z"}, "committer": {"name": "Cameron Steffen", "email": "cam.steffen94@gmail.com", "date": "2021-11-06T21:03:32Z"}, "message": "Fix Clippy with changed format_args!", "tree": {"sha": "065fe572879e74c3de84df419c8f7b49b859e8d2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/065fe572879e74c3de84df419c8f7b49b859e8d2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8e21f3a4d7a8a5a90ee21f00aed101340221a8b6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8e21f3a4d7a8a5a90ee21f00aed101340221a8b6", "html_url": "https://github.com/rust-lang/rust/commit/8e21f3a4d7a8a5a90ee21f00aed101340221a8b6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8e21f3a4d7a8a5a90ee21f00aed101340221a8b6/comments", "author": {"login": "camsteffen", "id": 5565418, "node_id": "MDQ6VXNlcjU1NjU0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/5565418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/camsteffen", "html_url": "https://github.com/camsteffen", "followers_url": "https://api.github.com/users/camsteffen/followers", "following_url": "https://api.github.com/users/camsteffen/following{/other_user}", "gists_url": "https://api.github.com/users/camsteffen/gists{/gist_id}", "starred_url": "https://api.github.com/users/camsteffen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/camsteffen/subscriptions", "organizations_url": "https://api.github.com/users/camsteffen/orgs", "repos_url": "https://api.github.com/users/camsteffen/repos", "events_url": "https://api.github.com/users/camsteffen/events{/privacy}", "received_events_url": "https://api.github.com/users/camsteffen/received_events", "type": "User", "site_admin": false}, "committer": {"login": "camsteffen", "id": 5565418, "node_id": "MDQ6VXNlcjU1NjU0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/5565418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/camsteffen", "html_url": "https://github.com/camsteffen", "followers_url": "https://api.github.com/users/camsteffen/followers", "following_url": "https://api.github.com/users/camsteffen/following{/other_user}", "gists_url": "https://api.github.com/users/camsteffen/gists{/gist_id}", "starred_url": "https://api.github.com/users/camsteffen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/camsteffen/subscriptions", "organizations_url": "https://api.github.com/users/camsteffen/orgs", "repos_url": "https://api.github.com/users/camsteffen/repos", "events_url": "https://api.github.com/users/camsteffen/events{/privacy}", "received_events_url": "https://api.github.com/users/camsteffen/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9f6a58e86b00a8ff22f852c1162e3d3107d0755b", "url": "https://api.github.com/repos/rust-lang/rust/commits/9f6a58e86b00a8ff22f852c1162e3d3107d0755b", "html_url": "https://github.com/rust-lang/rust/commit/9f6a58e86b00a8ff22f852c1162e3d3107d0755b"}], "stats": {"total": 14, "additions": 4, "deletions": 10}, "files": [{"sha": "733cc97c84596546bd0005ab6608749270564f7c", "filename": "src/tools/clippy/clippy_utils/src/higher.rs", "status": "modified", "additions": 4, "deletions": 10, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/8e21f3a4d7a8a5a90ee21f00aed101340221a8b6/src%2Ftools%2Fclippy%2Fclippy_utils%2Fsrc%2Fhigher.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8e21f3a4d7a8a5a90ee21f00aed101340221a8b6/src%2Ftools%2Fclippy%2Fclippy_utils%2Fsrc%2Fhigher.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_utils%2Fsrc%2Fhigher.rs?ref=8e21f3a4d7a8a5a90ee21f00aed101340221a8b6", "patch": "@@ -3,12 +3,12 @@\n #![deny(clippy::missing_docs_in_private_items)]\n \n use crate::ty::is_type_diagnostic_item;\n-use crate::{is_expn_of, last_path_segment, match_def_path, path_to_local_id, paths};\n+use crate::{is_expn_of, last_path_segment, match_def_path, paths};\n use if_chain::if_chain;\n use rustc_ast::ast::{self, LitKind};\n use rustc_hir as hir;\n use rustc_hir::{\n-    Arm, Block, BorrowKind, Expr, ExprKind, HirId, LoopSource, MatchSource, Node, Pat, PatKind, QPath, StmtKind, UnOp,\n+    Arm, Block, BorrowKind, Expr, ExprKind, HirId, LoopSource, MatchSource, Node, Pat, QPath, StmtKind, UnOp,\n };\n use rustc_lint::LateContext;\n use rustc_span::{sym, symbol, ExpnKind, Span, Symbol};\n@@ -513,8 +513,6 @@ pub struct FormatArgsExpn<'tcx> {\n     pub format_string_parts: &'tcx [Expr<'tcx>],\n     /// Symbols corresponding to [`Self::format_string_parts`]\n     pub format_string_symbols: Vec<Symbol>,\n-    /// Match arm patterns, the `arg0`, etc. from the next field `args`\n-    pub arg_names: &'tcx [Pat<'tcx>],\n     /// Expressions like `ArgumentV1::new(arg0, Debug::fmt)`\n     pub args: &'tcx [Expr<'tcx>],\n     /// The final argument passed to `Arguments::new_v1_formatted`, if applicable\n@@ -559,15 +557,13 @@ impl FormatArgsExpn<'tcx> {\n                     _ => None,\n                 })\n                 .collect();\n-            if let PatKind::Tuple(arg_names, None) = arm.pat.kind;\n             if let ExprKind::Array(args) = arm.body.kind;\n             then {\n                 Some(FormatArgsExpn {\n                     format_string_span: strs_ref.span,\n                     value_args,\n                     format_string_parts,\n                     format_string_symbols,\n-                    arg_names,\n                     args,\n                     fmt_expr,\n                 })\n@@ -594,10 +590,8 @@ impl FormatArgsExpn<'tcx> {\n                             if let Ok(i) = usize::try_from(position);\n                             let arg = &self.args[i];\n                             if let ExprKind::Call(_, [arg_name, _]) = arg.kind;\n-                            if let Some(j) = self\n-                                .arg_names\n-                                .iter()\n-                                .position(|pat| path_to_local_id(arg_name, pat.hir_id));\n+                            if let ExprKind::Field(_, j) = arg_name.kind;\n+                            if let Ok(j) = j.name.as_str().parse::<usize>();\n                             then {\n                                 Some(FormatArgsArg { value: self.value_args[j], arg, fmt: Some(fmt) })\n                             } else {"}]}