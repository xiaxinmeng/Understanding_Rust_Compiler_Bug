{"sha": "51d692cf7709de563cac6b5ee0080b8adf96f1df", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUxZDY5MmNmNzcwOWRlNTYzY2FjNmI1ZWUwMDgwYjhhZGY5NmYxZGY=", "commit": {"author": {"name": "Rich Kadel", "email": "richkadel@google.com", "date": "2020-08-27T21:13:04Z"}, "committer": {"name": "Rich Kadel", "email": "richkadel@google.com", "date": "2020-09-03T07:20:29Z"}, "message": "Tools, tests, and experimenting with MIR-derived coverage counters\n\nAdds a new mir_dump output file in HTML/CSS to visualize code regions\nand the MIR features that they came from (including overlapping spans).\nSee example below:\n\nIncludes a basic, MIR-block-based implementation of coverage injection,\navailable via `-Zexperimental-coverage`. This implementation has known\nflaws and omissions, but is simple enough to validate the new tools and\ntests.\n\nThe existing `-Zinstrument-coverage` option currently enables\nfunction-level coverage only, which at least appears to generate\naccurate coverage reports at that level.\n\nExperimental coverage is not accurate at this time. When branch coverage\nworks as intended, the `-Zexperimental-coverage` option should be\nremoved.\n\nThis PR replaces the bulk of PR #75828, with the remaining parts of\nthat PR distributed among other separate and indentpent PRs.\n\nThis PR depends on three of those other PRs: #76000, #76002, and\n\nRust compiler MCP rust-lang/compiler-team#278\n\nRelevant issue: #34701 - Implement support for LLVMs code coverage\ninstrumentation\n\n![Screen-Recording-2020-08-21-at-2](https://user-images.githubusercontent.com/3827298/90972923-ff417880-e4d1-11ea-92bb-8713c6198f6d.gif)", "tree": {"sha": "c557be235c6ef828d1517ca31d3a248d0d8e162b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c557be235c6ef828d1517ca31d3a248d0d8e162b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/51d692cf7709de563cac6b5ee0080b8adf96f1df", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/51d692cf7709de563cac6b5ee0080b8adf96f1df", "html_url": "https://github.com/rust-lang/rust/commit/51d692cf7709de563cac6b5ee0080b8adf96f1df", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/51d692cf7709de563cac6b5ee0080b8adf96f1df/comments", "author": {"login": "richkadel", "id": 3827298, "node_id": "MDQ6VXNlcjM4MjcyOTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3827298?v=4", "gravatar_id": "", "url": "https://api.github.com/users/richkadel", "html_url": "https://github.com/richkadel", "followers_url": "https://api.github.com/users/richkadel/followers", "following_url": "https://api.github.com/users/richkadel/following{/other_user}", "gists_url": "https://api.github.com/users/richkadel/gists{/gist_id}", "starred_url": "https://api.github.com/users/richkadel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/richkadel/subscriptions", "organizations_url": "https://api.github.com/users/richkadel/orgs", "repos_url": "https://api.github.com/users/richkadel/repos", "events_url": "https://api.github.com/users/richkadel/events{/privacy}", "received_events_url": "https://api.github.com/users/richkadel/received_events", "type": "User", "site_admin": false}, "committer": {"login": "richkadel", "id": 3827298, "node_id": "MDQ6VXNlcjM4MjcyOTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3827298?v=4", "gravatar_id": "", "url": "https://api.github.com/users/richkadel", "html_url": "https://github.com/richkadel", "followers_url": "https://api.github.com/users/richkadel/followers", "following_url": "https://api.github.com/users/richkadel/following{/other_user}", "gists_url": "https://api.github.com/users/richkadel/gists{/gist_id}", "starred_url": "https://api.github.com/users/richkadel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/richkadel/subscriptions", "organizations_url": "https://api.github.com/users/richkadel/orgs", "repos_url": "https://api.github.com/users/richkadel/repos", "events_url": "https://api.github.com/users/richkadel/events{/privacy}", "received_events_url": "https://api.github.com/users/richkadel/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e36e4bd0f7e722d3c97d1ca45387e58f81e4e8ea", "url": "https://api.github.com/repos/rust-lang/rust/commits/e36e4bd0f7e722d3c97d1ca45387e58f81e4e8ea", "html_url": "https://github.com/rust-lang/rust/commit/e36e4bd0f7e722d3c97d1ca45387e58f81e4e8ea"}], "stats": {"total": 2371, "additions": 2072, "deletions": 299}, "files": [{"sha": "453bc6ea6c7d85a3b2adc75df0b8b1cde7398e6d", "filename": "compiler/rustc_middle/src/mir/mod.rs", "status": "modified", "additions": 18, "deletions": 1, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/51d692cf7709de563cac6b5ee0080b8adf96f1df/compiler%2Frustc_middle%2Fsrc%2Fmir%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51d692cf7709de563cac6b5ee0080b8adf96f1df/compiler%2Frustc_middle%2Fsrc%2Fmir%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fmir%2Fmod.rs?ref=51d692cf7709de563cac6b5ee0080b8adf96f1df", "patch": "@@ -1530,7 +1530,24 @@ impl Debug for Statement<'_> {\n             AscribeUserType(box (ref place, ref c_ty), ref variance) => {\n                 write!(fmt, \"AscribeUserType({:?}, {:?}, {:?})\", place, variance, c_ty)\n             }\n-            Coverage(box ref coverage) => write!(fmt, \"{:?}\", coverage),\n+            Coverage(box ref coverage) => {\n+                let rgn = &coverage.code_region;\n+                match coverage.kind {\n+                    CoverageKind::Counter { id, .. } => {\n+                        write!(fmt, \"Coverage::Counter({:?}) for {:?}\", id.index(), rgn)\n+                    }\n+                    CoverageKind::Expression { id, lhs, op, rhs } => write!(\n+                        fmt,\n+                        \"Coverage::Expression({:?}) = {} {} {} for {:?}\",\n+                        id.index(),\n+                        lhs.index(),\n+                        if op == coverage::Op::Add { \"+\" } else { \"-\" },\n+                        rhs.index(),\n+                        rgn\n+                    ),\n+                    CoverageKind::Unreachable => write!(fmt, \"Coverage::Unreachable for {:?}\", rgn),\n+                }\n+            }\n             Nop => write!(fmt, \"nop\"),\n         }\n     }"}, {"sha": "d3a2bd241230ecb03e697eee4c573a3f79552f03", "filename": "compiler/rustc_mir/src/transform/instrument_coverage.rs", "status": "modified", "additions": 272, "deletions": 28, "changes": 300, "blob_url": "https://github.com/rust-lang/rust/blob/51d692cf7709de563cac6b5ee0080b8adf96f1df/compiler%2Frustc_mir%2Fsrc%2Ftransform%2Finstrument_coverage.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51d692cf7709de563cac6b5ee0080b8adf96f1df/compiler%2Frustc_mir%2Fsrc%2Ftransform%2Finstrument_coverage.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir%2Fsrc%2Ftransform%2Finstrument_coverage.rs?ref=51d692cf7709de563cac6b5ee0080b8adf96f1df", "patch": "@@ -1,23 +1,34 @@\n use crate::transform::{MirPass, MirSource};\n+use crate::util::pretty;\n+use crate::util::spanview::{\n+    source_range_no_file, statement_kind_name, terminator_kind_name, write_spanview_document,\n+    SpanViewable, TOOLTIP_INDENT,\n+};\n+\n use rustc_data_structures::fingerprint::Fingerprint;\n use rustc_data_structures::stable_hasher::{HashStable, StableHasher};\n+use rustc_index::bit_set::BitSet;\n use rustc_middle::hir;\n use rustc_middle::ich::StableHashingContext;\n use rustc_middle::mir;\n use rustc_middle::mir::coverage::*;\n use rustc_middle::mir::visit::Visitor;\n-use rustc_middle::mir::{BasicBlock, Coverage, CoverageInfo, Location, Statement, StatementKind};\n+use rustc_middle::mir::{\n+    BasicBlock, BasicBlockData, Coverage, CoverageInfo, Location, Statement, StatementKind,\n+    TerminatorKind,\n+};\n use rustc_middle::ty::query::Providers;\n use rustc_middle::ty::TyCtxt;\n use rustc_span::def_id::DefId;\n use rustc_span::{FileName, Pos, RealFileName, Span, Symbol};\n \n-/// Inserts call to count_code_region() as a placeholder to be replaced during code generation with\n-/// the intrinsic llvm.instrprof.increment.\n+/// Inserts `StatementKind::Coverage` statements that either instrument the binary with injected\n+/// counters, via intrinsic `llvm.instrprof.increment`, and/or inject metadata used during codegen\n+/// to construct the coverage map.\n pub struct InstrumentCoverage;\n \n-/// The `query` provider for `CoverageInfo`, requested by `codegen_intrinsic_call()` when\n-/// constructing the arguments for `llvm.instrprof.increment`.\n+/// The `query` provider for `CoverageInfo`, requested by `codegen_coverage()` (to inject each\n+/// counter) and `FunctionCoverage::new()` (to extract the coverage map metadata from the MIR).\n pub(crate) fn provide(providers: &mut Providers) {\n     providers.coverageinfo = |tcx, def_id| coverageinfo_from_mir(tcx, def_id);\n }\n@@ -43,8 +54,8 @@ impl Visitor<'_> for CoverageVisitor {\n     }\n }\n \n-fn coverageinfo_from_mir<'tcx>(tcx: TyCtxt<'tcx>, mir_def_id: DefId) -> CoverageInfo {\n-    let mir_body = tcx.optimized_mir(mir_def_id);\n+fn coverageinfo_from_mir<'tcx>(tcx: TyCtxt<'tcx>, def_id: DefId) -> CoverageInfo {\n+    let mir_body = tcx.optimized_mir(def_id);\n \n     // The `num_counters` argument to `llvm.instrprof.increment` is the number of injected\n     // counters, with each counter having a counter ID from `0..num_counters-1`. MIR optimization\n@@ -63,18 +74,30 @@ fn coverageinfo_from_mir<'tcx>(tcx: TyCtxt<'tcx>, mir_def_id: DefId) -> Coverage\n }\n \n impl<'tcx> MirPass<'tcx> for InstrumentCoverage {\n-    fn run_pass(&self, tcx: TyCtxt<'tcx>, src: MirSource<'tcx>, mir_body: &mut mir::Body<'tcx>) {\n+    fn run_pass(\n+        &self,\n+        tcx: TyCtxt<'tcx>,\n+        mir_source: MirSource<'tcx>,\n+        mir_body: &mut mir::Body<'tcx>,\n+    ) {\n         // If the InstrumentCoverage pass is called on promoted MIRs, skip them.\n         // See: https://github.com/rust-lang/rust/pull/73011#discussion_r438317601\n-        if src.promoted.is_none() {\n-            Instrumentor::new(tcx, src, mir_body).inject_counters();\n+        if mir_source.promoted.is_none() {\n+            Instrumentor::new(&self.name(), tcx, mir_source, mir_body).inject_counters();\n         }\n     }\n }\n \n+#[derive(Clone)]\n+struct CoverageRegion {\n+    pub span: Span,\n+    pub blocks: Vec<BasicBlock>,\n+}\n+\n struct Instrumentor<'a, 'tcx> {\n+    pass_name: &'a str,\n     tcx: TyCtxt<'tcx>,\n-    mir_def_id: DefId,\n+    mir_source: MirSource<'tcx>,\n     mir_body: &'a mut mir::Body<'tcx>,\n     hir_body: &'tcx rustc_hir::Body<'tcx>,\n     function_source_hash: Option<u64>,\n@@ -83,12 +106,17 @@ struct Instrumentor<'a, 'tcx> {\n }\n \n impl<'a, 'tcx> Instrumentor<'a, 'tcx> {\n-    fn new(tcx: TyCtxt<'tcx>, src: MirSource<'tcx>, mir_body: &'a mut mir::Body<'tcx>) -> Self {\n-        let mir_def_id = src.def_id();\n-        let hir_body = hir_body(tcx, mir_def_id);\n+    fn new(\n+        pass_name: &'a str,\n+        tcx: TyCtxt<'tcx>,\n+        mir_source: MirSource<'tcx>,\n+        mir_body: &'a mut mir::Body<'tcx>,\n+    ) -> Self {\n+        let hir_body = hir_body(tcx, mir_source.def_id());\n         Self {\n+            pass_name,\n             tcx,\n-            mir_def_id,\n+            mir_source,\n             mir_body,\n             hir_body,\n             function_source_hash: None,\n@@ -127,19 +155,100 @@ impl<'a, 'tcx> Instrumentor<'a, 'tcx> {\n     }\n \n     fn inject_counters(&mut self) {\n+        let tcx = self.tcx;\n+        let def_id = self.mir_source.def_id();\n+        let mir_body = &self.mir_body;\n         let body_span = self.hir_body.value.span;\n-        debug!(\"instrumenting {:?}, span: {:?}\", self.mir_def_id, body_span);\n-\n-        // FIXME(richkadel): As a first step, counters are only injected at the top of each\n-        // function. The complete solution will inject counters at each conditional code branch.\n-        let block = rustc_middle::mir::START_BLOCK;\n-        let counter = self.make_counter();\n-        self.inject_statement(counter, body_span, block);\n-\n-        // FIXME(richkadel): The next step to implement source based coverage analysis will be\n-        // instrumenting branches within functions, and some regions will be counted by \"counter\n-        // expression\". The function to inject counter expression is implemented. Replace this\n-        // \"fake use\" with real use.\n+        debug!(\n+            \"instrumenting {:?}, span: {}\",\n+            def_id,\n+            tcx.sess.source_map().span_to_string(body_span)\n+        );\n+\n+        if !tcx.sess.opts.debugging_opts.experimental_coverage {\n+            // Coverage at the function level should be accurate. This is the default implementation\n+            // if `-Z experimental-coverage` is *NOT* enabled.\n+            let block = rustc_middle::mir::START_BLOCK;\n+            let counter = self.make_counter();\n+            self.inject_statement(counter, body_span, block);\n+            return;\n+        }\n+        // FIXME(richkadel): else if `-Z experimental-coverage` *IS* enabled: Efforts are still in\n+        // progress to identify the correct code region spans and associated counters to generate\n+        // accurate Rust coverage reports.\n+\n+        let block_span = |data: &BasicBlockData<'tcx>| {\n+            // The default span will be the `Terminator` span; but until we have a smarter solution,\n+            // the coverage region also incorporates at least the statements in this BasicBlock as\n+            // well. Extend the span to encompass all, if possible.\n+            // FIXME(richkadel): Assuming the terminator's span is already known to be contained in `body_span`.\n+            let mut span = data.terminator().source_info.span;\n+            // FIXME(richkadel): It's looking unlikely that we should compute a span from MIR\n+            // spans, but if we do keep something like this logic, we will need a smarter way\n+            // to combine `Statement`s and/or `Terminator`s with `Span`s from different\n+            // files.\n+            for statement_span in data.statements.iter().map(|statement| statement.source_info.span)\n+            {\n+                // Only combine Spans from the function's body_span.\n+                if body_span.contains(statement_span) {\n+                    span = span.to(statement_span);\n+                }\n+            }\n+            span\n+        };\n+\n+        // Traverse the CFG but ignore anything following an `unwind`\n+        let cfg_without_unwind = ShortCircuitPreorder::new(mir_body, |term_kind| {\n+            let mut successors = term_kind.successors();\n+            match &term_kind {\n+                // SwitchInt successors are never unwind, and all of them should be traversed\n+                TerminatorKind::SwitchInt { .. } => successors,\n+                // For all other kinds, return only the first successor, if any, and ignore unwinds\n+                _ => successors.next().into_iter().chain(&[]),\n+            }\n+        });\n+\n+        let mut coverage_regions = Vec::with_capacity(cfg_without_unwind.size_hint().0);\n+        for (bb, data) in cfg_without_unwind {\n+            if !body_span.contains(data.terminator().source_info.span) {\n+                continue;\n+            }\n+\n+            // FIXME(richkadel): Regions will soon contain multiple blocks.\n+            let mut blocks = Vec::new();\n+            blocks.push(bb);\n+            let span = block_span(data);\n+            coverage_regions.push(CoverageRegion { span, blocks });\n+        }\n+\n+        let span_viewables = if pretty::dump_enabled(tcx, self.pass_name, def_id) {\n+            Some(self.span_viewables(&coverage_regions))\n+        } else {\n+            None\n+        };\n+\n+        // Inject counters for the selected spans\n+        for CoverageRegion { span, blocks } in coverage_regions {\n+            debug!(\n+                \"Injecting counter at: {:?}:\\n{}\\n==========\",\n+                span,\n+                tcx.sess.source_map().span_to_snippet(span).expect(\"Error getting source for span\"),\n+            );\n+            let counter = self.make_counter();\n+            self.inject_statement(counter, span, blocks[0]);\n+        }\n+\n+        if let Some(span_viewables) = span_viewables {\n+            let mut file =\n+                pretty::create_dump_file(tcx, \"html\", None, self.pass_name, &0, self.mir_source)\n+                    .expect(\"Unexpected error creating MIR spanview HTML file\");\n+            write_spanview_document(tcx, def_id, span_viewables, &mut file)\n+                .expect(\"Unexpected IO error dumping coverage spans as HTML\");\n+        }\n+\n+        // FIXME(richkadel): Some regions will be counted by \"counter expression\". Counter\n+        // expressions are supported, but are not yet generated. When they are, remove this `fake_use`\n+        // block.\n         let fake_use = false;\n         if fake_use {\n             let add = false;\n@@ -193,6 +302,83 @@ impl<'a, 'tcx> Instrumentor<'a, 'tcx> {\n         };\n         data.statements.push(statement);\n     }\n+\n+    /// Converts the computed `CoverageRegion`s into `SpanViewable`s.\n+    fn span_viewables(&self, coverage_regions: &Vec<CoverageRegion>) -> Vec<SpanViewable> {\n+        let mut span_viewables = Vec::new();\n+        for coverage_region in coverage_regions {\n+            span_viewables.push(SpanViewable {\n+                span: coverage_region.span,\n+                title: format!(\"{}\", coverage_region.blocks[0].index()),\n+                tooltip: self.make_tooltip_text(coverage_region),\n+            });\n+        }\n+        span_viewables\n+    }\n+\n+    /// A custom tooltip renderer used in a spanview HTML+CSS document used for coverage analysis.\n+    fn make_tooltip_text(&self, coverage_region: &CoverageRegion) -> String {\n+        const INCLUDE_COVERAGE_STATEMENTS: bool = false;\n+        let tcx = self.tcx;\n+        let source_map = tcx.sess.source_map();\n+        let mut text = Vec::new();\n+        for (i, &bb) in coverage_region.blocks.iter().enumerate() {\n+            if i > 0 {\n+                text.push(\"\\n\".to_owned());\n+            }\n+            text.push(format!(\"{:?}: {}:\", bb, &source_map.span_to_string(coverage_region.span)));\n+            let data = &self.mir_body.basic_blocks()[bb];\n+            for statement in &data.statements {\n+                let statement_string = match statement.kind {\n+                    StatementKind::Coverage(box ref coverage) => match coverage.kind {\n+                        CoverageKind::Counter { id, .. } => {\n+                            if !INCLUDE_COVERAGE_STATEMENTS {\n+                                continue;\n+                            }\n+                            format!(\"increment counter #{}\", id.index())\n+                        }\n+                        CoverageKind::Expression { id, lhs, op, rhs } => {\n+                            if !INCLUDE_COVERAGE_STATEMENTS {\n+                                continue;\n+                            }\n+                            format!(\n+                                \"expression #{} = {} {} {}\",\n+                                id.index(),\n+                                lhs.index(),\n+                                if op == Op::Add { \"+\" } else { \"-\" },\n+                                rhs.index()\n+                            )\n+                        }\n+                        CoverageKind::Unreachable => {\n+                            if !INCLUDE_COVERAGE_STATEMENTS {\n+                                continue;\n+                            }\n+                            format!(\"unreachable\")\n+                        }\n+                    },\n+                    _ => format!(\"{:?}\", statement),\n+                };\n+                let source_range = source_range_no_file(tcx, &statement.source_info.span);\n+                text.push(format!(\n+                    \"\\n{}{}: {}: {}\",\n+                    TOOLTIP_INDENT,\n+                    source_range,\n+                    statement_kind_name(statement),\n+                    statement_string\n+                ));\n+            }\n+            let term = data.terminator();\n+            let source_range = source_range_no_file(tcx, &term.source_info.span);\n+            text.push(format!(\n+                \"\\n{}{}: {}: {:?}\",\n+                TOOLTIP_INDENT,\n+                source_range,\n+                terminator_kind_name(term),\n+                term.kind\n+            ));\n+        }\n+        text.join(\"\")\n+    }\n }\n \n /// Convert the Span into its file name, start line and column, and end line and column\n@@ -227,7 +413,7 @@ fn make_code_region<'tcx>(tcx: TyCtxt<'tcx>, span: &Span) -> CodeRegion {\n }\n \n fn hir_body<'tcx>(tcx: TyCtxt<'tcx>, def_id: DefId) -> &'tcx rustc_hir::Body<'tcx> {\n-    let hir_node = tcx.hir().get_if_local(def_id).expect(\"DefId is local\");\n+    let hir_node = tcx.hir().get_if_local(def_id).expect(\"expected DefId is local\");\n     let fn_body_id = hir::map::associated_body(hir_node).expect(\"HIR node is a function with body\");\n     tcx.hir().body(fn_body_id)\n }\n@@ -245,3 +431,61 @@ fn hash(\n     node.hash_stable(hcx, &mut stable_hasher);\n     stable_hasher.finish()\n }\n+\n+pub struct ShortCircuitPreorder<\n+    'a,\n+    'tcx,\n+    F: Fn(&'tcx TerminatorKind<'tcx>) -> mir::Successors<'tcx>,\n+> {\n+    body: &'a mir::Body<'tcx>,\n+    visited: BitSet<BasicBlock>,\n+    worklist: Vec<BasicBlock>,\n+    filtered_successors: F,\n+}\n+\n+impl<'a, 'tcx, F: Fn(&'tcx TerminatorKind<'tcx>) -> mir::Successors<'tcx>>\n+    ShortCircuitPreorder<'a, 'tcx, F>\n+{\n+    pub fn new(\n+        body: &'a mir::Body<'tcx>,\n+        filtered_successors: F,\n+    ) -> ShortCircuitPreorder<'a, 'tcx, F> {\n+        let worklist = vec![mir::START_BLOCK];\n+\n+        ShortCircuitPreorder {\n+            body,\n+            visited: BitSet::new_empty(body.basic_blocks().len()),\n+            worklist,\n+            filtered_successors,\n+        }\n+    }\n+}\n+\n+impl<'a: 'tcx, 'tcx, F: Fn(&'tcx TerminatorKind<'tcx>) -> mir::Successors<'tcx>> Iterator\n+    for ShortCircuitPreorder<'a, 'tcx, F>\n+{\n+    type Item = (BasicBlock, &'a BasicBlockData<'tcx>);\n+\n+    fn next(&mut self) -> Option<(BasicBlock, &'a BasicBlockData<'tcx>)> {\n+        while let Some(idx) = self.worklist.pop() {\n+            if !self.visited.insert(idx) {\n+                continue;\n+            }\n+\n+            let data = &self.body[idx];\n+\n+            if let Some(ref term) = data.terminator {\n+                self.worklist.extend((self.filtered_successors)(&term.kind));\n+            }\n+\n+            return Some((idx, data));\n+        }\n+\n+        None\n+    }\n+\n+    fn size_hint(&self) -> (usize, Option<usize>) {\n+        let size = self.body.basic_blocks().len() - self.visited.count();\n+        (size, Some(size))\n+    }\n+}"}, {"sha": "7db2557453b15a2228113324a76dbfa671a13cd6", "filename": "compiler/rustc_session/src/config.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/51d692cf7709de563cac6b5ee0080b8adf96f1df/compiler%2Frustc_session%2Fsrc%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51d692cf7709de563cac6b5ee0080b8adf96f1df/compiler%2Frustc_session%2Fsrc%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_session%2Fsrc%2Fconfig.rs?ref=51d692cf7709de563cac6b5ee0080b8adf96f1df", "patch": "@@ -1724,6 +1724,10 @@ pub fn build_session_options(matches: &getopts::Matches) -> Options {\n         );\n     }\n \n+    if debugging_opts.experimental_coverage {\n+        debugging_opts.instrument_coverage = true;\n+    }\n+\n     if debugging_opts.instrument_coverage {\n         if cg.profile_generate.enabled() || cg.profile_use.is_some() {\n             early_error("}, {"sha": "44a18bd7831cb2cc7d99d635f882d4ec18f1762c", "filename": "compiler/rustc_session/src/options.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/51d692cf7709de563cac6b5ee0080b8adf96f1df/compiler%2Frustc_session%2Fsrc%2Foptions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51d692cf7709de563cac6b5ee0080b8adf96f1df/compiler%2Frustc_session%2Fsrc%2Foptions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_session%2Fsrc%2Foptions.rs?ref=51d692cf7709de563cac6b5ee0080b8adf96f1df", "patch": "@@ -890,6 +890,11 @@ options! {DebuggingOptions, DebuggingSetter, basic_debugging_options,\n         all statements).\"),\n     emit_stack_sizes: bool = (false, parse_bool, [UNTRACKED],\n         \"emit a section containing stack size metadata (default: no)\"),\n+    experimental_coverage: bool = (false, parse_bool, [TRACKED],\n+        \"enable and extend the `-Z instrument-coverage` function-level coverage \\\n+        feature, adding additional experimental (likely inaccurate) counters and \\\n+        code regions (used by `rustc` compiler developers to test new coverage \\\n+        counter placements) (default: no)\"),\n     fewer_names: bool = (false, parse_bool, [TRACKED],\n         \"reduce memory use by retaining fewer names within compilation artifacts (LLVM-IR) \\\n         (default: no)\"),"}, {"sha": "5b2572655ccb6214c636d16112a5c7a5f40d18d7", "filename": "src/test/mir-opt/instrument_coverage.bar.InstrumentCoverage.diff", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Fmir-opt%2Finstrument_coverage.bar.InstrumentCoverage.diff", "raw_url": "https://github.com/rust-lang/rust/raw/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Fmir-opt%2Finstrument_coverage.bar.InstrumentCoverage.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finstrument_coverage.bar.InstrumentCoverage.diff?ref=51d692cf7709de563cac6b5ee0080b8adf96f1df", "patch": "@@ -6,7 +6,7 @@\n   \n       bb0: {\n           _0 = const true;                 // scope 0 at /the/src/instrument_coverage.rs:20:5: 20:9\n-+         Coverage { kind: Counter { function_source_hash: 10208505205182607101, id: CounterValueReference(0) }, code_region: /the/src/instrument_coverage.rs:19:18 - 21:2 }; // scope 0 at /the/src/instrument_coverage.rs:21:2: 21:2\n++         Coverage::Counter(0) for /the/src/instrument_coverage.rs:19:18 - 21:2; // scope 0 at /the/src/instrument_coverage.rs:21:2: 21:2\n           return;                          // scope 0 at /the/src/instrument_coverage.rs:21:2: 21:2\n       }\n   }"}, {"sha": "03affed0505ea437715ae9001b88359fb1702f32", "filename": "src/test/mir-opt/instrument_coverage.main.InstrumentCoverage.diff", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Fmir-opt%2Finstrument_coverage.main.InstrumentCoverage.diff", "raw_url": "https://github.com/rust-lang/rust/raw/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Fmir-opt%2Finstrument_coverage.main.InstrumentCoverage.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finstrument_coverage.main.InstrumentCoverage.diff?ref=51d692cf7709de563cac6b5ee0080b8adf96f1df", "patch": "@@ -8,7 +8,7 @@\n       let mut _3: !;                       // in scope 0 at /the/src/instrument_coverage.rs:12:18: 14:10\n   \n       bb0: {\n-+         Coverage { kind: Counter { function_source_hash: 16004455475339839479, id: CounterValueReference(0) }, code_region: /the/src/instrument_coverage.rs:10:11 - 16:2 }; // scope 0 at /the/src/instrument_coverage.rs:11:5: 15:6\n++         Coverage::Counter(0) for /the/src/instrument_coverage.rs:10:11 - 16:2; // scope 0 at /the/src/instrument_coverage.rs:11:5: 15:6\n           falseUnwind -> [real: bb1, cleanup: bb2]; // scope 0 at /the/src/instrument_coverage.rs:11:5: 15:6\n       }\n   "}, {"sha": "a16b4f61dcb5b9b567b0ad37846cd29692c1fac7", "filename": "src/test/run-make-fulldeps/instrument-coverage-cov-reports-base/Makefile", "status": "added", "additions": 77, "deletions": 0, "changes": 77, "blob_url": "https://github.com/rust-lang/rust/blob/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-cov-reports-base%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-cov-reports-base%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-cov-reports-base%2FMakefile?ref=51d692cf7709de563cac6b5ee0080b8adf96f1df", "patch": "@@ -0,0 +1,77 @@\n+# needs-profiler-support\n+\n+# ISSUE(76038): When targeting MSVC, Rust binaries built with both `-Z instrument-coverage` and\n+# `-C link-dead-code` typically crash (with a seg-fault) or at best generate an empty `*.profraw`.\n+# See ../instrument-coverage/coverage_tools.mk for more information.\n+\n+-include ../instrument-coverage/coverage_tools.mk\n+\n+BASEDIR=../instrument-coverage-cov-reports-base\n+SOURCEDIR=../instrument-coverage\n+\n+all: $(patsubst $(SOURCEDIR)/%.rs,%,$(wildcard $(SOURCEDIR)/*.rs))\n+\n+# Ensure there are no `expected` results for tests that may have been removed or renamed\n+.PHONY: clear_expected_if_blessed\n+clear_expected_if_blessed:\n+ifdef RUSTC_BLESS_TEST\n+\trm -f expected_export_coverage.*.json\n+\trm -f typical_show_coverage.*.txt\n+endif\n+\n+-include clear_expected_if_blessed\n+\n+%: $(SOURCEDIR)/%.rs\n+\t# Compile the test program with \"experimental\" coverage instrumentation and generate relevant MIR.\n+\t#\n+\t# FIXME(richkadel):  `-Zexperimental-coverage` to `-Zinstrument-coverage` once we are\n+\t# satisfied with the branch-level instrumentation.\n+\t$(RUSTC) $(SOURCEDIR)/$@.rs \\\n+\t\t\t-Zexperimental-coverage \\\n+\t\t\t-Clink-dead-code=$(LINK_DEAD_CODE)\n+\n+\t# Run it in order to generate some profiling data,\n+\t# with `LLVM_PROFILE_FILE=<profdata_file>` environment variable set to\n+\t# output the coverage stats for this run.\n+\tLLVM_PROFILE_FILE=\"$(TMPDIR)\"/$@.profraw \\\n+\t\t\t$(call RUN,$@)\n+\n+\t# Postprocess the profiling data so it can be used by the llvm-cov tool\n+\t\"$(LLVM_BIN_DIR)\"/llvm-profdata merge --sparse \\\n+\t\t\t\"$(TMPDIR)\"/$@.profraw \\\n+\t\t\t-o \"$(TMPDIR)\"/$@.profdata\n+\n+\t# Generate a coverage report using `llvm-cov show`. The output ordering\n+\t# can be non-deterministic, so ignore the return status. If the test fails\n+\t# when comparing the JSON `export`, the `show` output may be useful when\n+\t# debugging.\n+\t\"$(LLVM_BIN_DIR)\"/llvm-cov show \\\n+\t\t\t--Xdemangler=\"$(RUST_DEMANGLER)\" \\\n+\t\t\t--show-line-counts-or-regions \\\n+\t\t\t--instr-profile=\"$(TMPDIR)\"/$@.profdata \\\n+\t\t\t$(call BIN,\"$(TMPDIR)\"/$@) \\\n+\t\t> \"$(TMPDIR)\"/actual_show_coverage.$@.txt\n+\n+ifdef RUSTC_BLESS_TEST\n+\tcp \"$(TMPDIR)\"/actual_show_coverage.$@.txt typical_show_coverage.$@.txt\n+else\n+\t# Compare the show coverage output (`--bless` refreshes `typical` files)\n+\t$(DIFF) typical_show_coverage.$@.txt \"$(TMPDIR)\"/actual_show_coverage.$@.txt || \\\n+\t\t>&2 echo 'diff failed for `llvm-cov show` on $@ (might not be an error)'\n+endif\n+\n+\t# Generate a coverage report in JSON, using `llvm-cov export`, and fail if\n+\t# there are differences from the expected output.\n+\t\"$(LLVM_BIN_DIR)\"/llvm-cov export \\\n+\t\t\t--summary-only \\\n+\t\t\t--instr-profile=\"$(TMPDIR)\"/$@.profdata \\\n+\t\t\t$(call BIN,\"$(TMPDIR)\"/$@) \\\n+\t\t| \"$(PYTHON)\" $(BASEDIR)/prettify_json.py \\\n+\t\t> \"$(TMPDIR)\"/actual_export_coverage.$@.json\n+\n+ifdef RUSTC_BLESS_TEST\n+\tcp \"$(TMPDIR)\"/actual_export_coverage.$@.json expected_export_coverage.$@.json\n+else\n+\t# Check that exported JSON coverage data matches what we expect (`--bless` refreshes `expected`)\n+\t$(DIFF) expected_export_coverage.$@.json \"$(TMPDIR)\"/actual_export_coverage.$@.json\n+endif"}, {"sha": "b9041ebebef5704834e043a7e537e91262c6a4db", "filename": "src/test/run-make-fulldeps/instrument-coverage-cov-reports-base/expected_export_coverage.coverage_of_if_else.json", "status": "added", "additions": 59, "deletions": 0, "changes": 59, "blob_url": "https://github.com/rust-lang/rust/blob/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-cov-reports-base%2Fexpected_export_coverage.coverage_of_if_else.json", "raw_url": "https://github.com/rust-lang/rust/raw/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-cov-reports-base%2Fexpected_export_coverage.coverage_of_if_else.json", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-cov-reports-base%2Fexpected_export_coverage.coverage_of_if_else.json?ref=51d692cf7709de563cac6b5ee0080b8adf96f1df", "patch": "@@ -0,0 +1,59 @@\n+{\n+  \"data\": [\n+    {\n+      \"files\": [\n+        {\n+          \"filename\": \"../instrument-coverage/coverage_of_if_else.rs\",\n+          \"summary\": {\n+            \"functions\": {\n+              \"count\": 1,\n+              \"covered\": 1,\n+              \"percent\": 100\n+            },\n+            \"instantiations\": {\n+              \"count\": 1,\n+              \"covered\": 1,\n+              \"percent\": 100\n+            },\n+            \"lines\": {\n+              \"count\": 46,\n+              \"covered\": 19,\n+              \"percent\": 41.30434782608695\n+            },\n+            \"regions\": {\n+              \"count\": 75,\n+              \"covered\": 23,\n+              \"notcovered\": 52,\n+              \"percent\": 30.666666666666664\n+            }\n+          }\n+        }\n+      ],\n+      \"totals\": {\n+        \"functions\": {\n+          \"count\": 1,\n+          \"covered\": 1,\n+          \"percent\": 100\n+        },\n+        \"instantiations\": {\n+          \"count\": 1,\n+          \"covered\": 1,\n+          \"percent\": 100\n+        },\n+        \"lines\": {\n+          \"count\": 46,\n+          \"covered\": 19,\n+          \"percent\": 41.30434782608695\n+        },\n+        \"regions\": {\n+          \"count\": 75,\n+          \"covered\": 23,\n+          \"notcovered\": 52,\n+          \"percent\": 30.666666666666664\n+        }\n+      }\n+    }\n+  ],\n+  \"type\": \"llvm.coverage.json.export\",\n+  \"version\": \"2.0.1\"\n+}"}, {"sha": "ed9279841f70e5929208cd14a21616cc6969876a", "filename": "src/test/run-make-fulldeps/instrument-coverage-cov-reports-base/prettify_json.py", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-cov-reports-base%2Fprettify_json.py", "raw_url": "https://github.com/rust-lang/rust/raw/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-cov-reports-base%2Fprettify_json.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-cov-reports-base%2Fprettify_json.py?ref=51d692cf7709de563cac6b5ee0080b8adf96f1df", "previous_filename": "src/test/run-make-fulldeps/instrument-coverage/prettify_json.py"}, {"sha": "0c711559603357bcc05226538482bd90f4cde94f", "filename": "src/test/run-make-fulldeps/instrument-coverage-cov-reports-base/typical_show_coverage.coverage_of_if_else.txt", "status": "added", "additions": 64, "deletions": 0, "changes": 64, "blob_url": "https://github.com/rust-lang/rust/blob/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-cov-reports-base%2Ftypical_show_coverage.coverage_of_if_else.txt", "raw_url": "https://github.com/rust-lang/rust/raw/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-cov-reports-base%2Ftypical_show_coverage.coverage_of_if_else.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-cov-reports-base%2Ftypical_show_coverage.coverage_of_if_else.txt?ref=51d692cf7709de563cac6b5ee0080b8adf96f1df", "patch": "@@ -0,0 +1,64 @@\n+    1|       |#![allow(unused_assignments)]\n+    2|       |\n+    3|       |fn main() {\n+    4|       |    let mut countdown = 0;\n+    5|      2|    if true {\n+                     ^1\n+    6|      2|        countdown = 10;\n+    7|      2|    }\n+    8|       |\n+    9|      2|    if countdown > 7 {\n+                     ^1\n+   10|      2|        countdown -= 4;\n+                      ^1\n+   11|      2|    } else if countdown > 2 {\n+                         ^0 ^0\n+   12|      0|        if countdown < 1 || countdown > 5 || countdown != 9 {\n+   13|      0|            countdown = 0;\n+   14|      0|        }\n+   15|      0|        countdown -= 5;\n+   16|      0|    } else {\n+   17|      0|        return;\n+   18|      0|    }\n+   19|      0|\n+   20|      0|    let mut countdown = 0;\n+   21|      2|    if true {\n+                     ^1\n+   22|      2|        countdown = 10;\n+   23|      2|    }\n+   24|      0|\n+   25|      2|    if countdown > 7 {\n+                     ^1\n+   26|      2|        countdown -= 4;\n+                      ^1\n+   27|      2|    } else if countdown > 2 {\n+                         ^0 ^0\n+   28|      0|        if countdown < 1 || countdown > 5 || countdown != 9 {\n+   29|      0|            countdown = 0;\n+   30|      0|        }\n+   31|      0|        countdown -= 5;\n+   32|      0|    } else {\n+   33|      0|        return;\n+   34|      0|    }\n+   35|      0|\n+   36|      0|    let mut countdown = 0;\n+   37|      2|    if true {\n+                     ^1\n+   38|      2|        countdown = 10;\n+   39|      2|    }\n+   40|      0|\n+   41|      2|    if countdown > 7 {\n+                     ^1\n+   42|      2|        countdown -= 4;\n+                      ^1\n+   43|      2|    } else if countdown > 2 {\n+                         ^0 ^0\n+   44|      0|        if countdown < 1 || countdown > 5 || countdown != 9 {\n+   45|      0|            countdown = 0;\n+   46|      0|        }\n+   47|      0|        countdown -= 5;\n+   48|      0|    } else {\n+   49|      0|        return;\n+   50|      0|    }\n+   51|      1|}\n+"}, {"sha": "08f311f17023d58b3672944aa0fe41976a870082", "filename": "src/test/run-make-fulldeps/instrument-coverage-cov-reports-link-dead-code/Makefile", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-cov-reports-link-dead-code%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-cov-reports-link-dead-code%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-cov-reports-link-dead-code%2FMakefile?ref=51d692cf7709de563cac6b5ee0080b8adf96f1df", "patch": "@@ -0,0 +1,11 @@\n+# needs-profiler-support\n+# ignore-msvc\n+\n+# LINK_DEAD_CODE requires ignore-msvc due to Issue #76038\n+LINK_DEAD_CODE=yes\n+\n+-include ../instrument-coverage-cov-reports-base/Makefile\n+\n+# ISSUE(76038): When targeting MSVC, Rust binaries built with both `-Z instrument-coverage` and\n+# `-C link-dead-code` typically crash (with a seg-fault) or at best generate an empty `*.profraw`.\n+# See ../instrument-coverage/coverage_tools.mk for more information.\n\\ No newline at end of file"}, {"sha": "b9041ebebef5704834e043a7e537e91262c6a4db", "filename": "src/test/run-make-fulldeps/instrument-coverage-cov-reports-link-dead-code/expected_export_coverage.coverage_of_if_else.json", "status": "added", "additions": 59, "deletions": 0, "changes": 59, "blob_url": "https://github.com/rust-lang/rust/blob/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-cov-reports-link-dead-code%2Fexpected_export_coverage.coverage_of_if_else.json", "raw_url": "https://github.com/rust-lang/rust/raw/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-cov-reports-link-dead-code%2Fexpected_export_coverage.coverage_of_if_else.json", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-cov-reports-link-dead-code%2Fexpected_export_coverage.coverage_of_if_else.json?ref=51d692cf7709de563cac6b5ee0080b8adf96f1df", "patch": "@@ -0,0 +1,59 @@\n+{\n+  \"data\": [\n+    {\n+      \"files\": [\n+        {\n+          \"filename\": \"../instrument-coverage/coverage_of_if_else.rs\",\n+          \"summary\": {\n+            \"functions\": {\n+              \"count\": 1,\n+              \"covered\": 1,\n+              \"percent\": 100\n+            },\n+            \"instantiations\": {\n+              \"count\": 1,\n+              \"covered\": 1,\n+              \"percent\": 100\n+            },\n+            \"lines\": {\n+              \"count\": 46,\n+              \"covered\": 19,\n+              \"percent\": 41.30434782608695\n+            },\n+            \"regions\": {\n+              \"count\": 75,\n+              \"covered\": 23,\n+              \"notcovered\": 52,\n+              \"percent\": 30.666666666666664\n+            }\n+          }\n+        }\n+      ],\n+      \"totals\": {\n+        \"functions\": {\n+          \"count\": 1,\n+          \"covered\": 1,\n+          \"percent\": 100\n+        },\n+        \"instantiations\": {\n+          \"count\": 1,\n+          \"covered\": 1,\n+          \"percent\": 100\n+        },\n+        \"lines\": {\n+          \"count\": 46,\n+          \"covered\": 19,\n+          \"percent\": 41.30434782608695\n+        },\n+        \"regions\": {\n+          \"count\": 75,\n+          \"covered\": 23,\n+          \"notcovered\": 52,\n+          \"percent\": 30.666666666666664\n+        }\n+      }\n+    }\n+  ],\n+  \"type\": \"llvm.coverage.json.export\",\n+  \"version\": \"2.0.1\"\n+}"}, {"sha": "0c711559603357bcc05226538482bd90f4cde94f", "filename": "src/test/run-make-fulldeps/instrument-coverage-cov-reports-link-dead-code/typical_show_coverage.coverage_of_if_else.txt", "status": "added", "additions": 64, "deletions": 0, "changes": 64, "blob_url": "https://github.com/rust-lang/rust/blob/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-cov-reports-link-dead-code%2Ftypical_show_coverage.coverage_of_if_else.txt", "raw_url": "https://github.com/rust-lang/rust/raw/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-cov-reports-link-dead-code%2Ftypical_show_coverage.coverage_of_if_else.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-cov-reports-link-dead-code%2Ftypical_show_coverage.coverage_of_if_else.txt?ref=51d692cf7709de563cac6b5ee0080b8adf96f1df", "patch": "@@ -0,0 +1,64 @@\n+    1|       |#![allow(unused_assignments)]\n+    2|       |\n+    3|       |fn main() {\n+    4|       |    let mut countdown = 0;\n+    5|      2|    if true {\n+                     ^1\n+    6|      2|        countdown = 10;\n+    7|      2|    }\n+    8|       |\n+    9|      2|    if countdown > 7 {\n+                     ^1\n+   10|      2|        countdown -= 4;\n+                      ^1\n+   11|      2|    } else if countdown > 2 {\n+                         ^0 ^0\n+   12|      0|        if countdown < 1 || countdown > 5 || countdown != 9 {\n+   13|      0|            countdown = 0;\n+   14|      0|        }\n+   15|      0|        countdown -= 5;\n+   16|      0|    } else {\n+   17|      0|        return;\n+   18|      0|    }\n+   19|      0|\n+   20|      0|    let mut countdown = 0;\n+   21|      2|    if true {\n+                     ^1\n+   22|      2|        countdown = 10;\n+   23|      2|    }\n+   24|      0|\n+   25|      2|    if countdown > 7 {\n+                     ^1\n+   26|      2|        countdown -= 4;\n+                      ^1\n+   27|      2|    } else if countdown > 2 {\n+                         ^0 ^0\n+   28|      0|        if countdown < 1 || countdown > 5 || countdown != 9 {\n+   29|      0|            countdown = 0;\n+   30|      0|        }\n+   31|      0|        countdown -= 5;\n+   32|      0|    } else {\n+   33|      0|        return;\n+   34|      0|    }\n+   35|      0|\n+   36|      0|    let mut countdown = 0;\n+   37|      2|    if true {\n+                     ^1\n+   38|      2|        countdown = 10;\n+   39|      2|    }\n+   40|      0|\n+   41|      2|    if countdown > 7 {\n+                     ^1\n+   42|      2|        countdown -= 4;\n+                      ^1\n+   43|      2|    } else if countdown > 2 {\n+                         ^0 ^0\n+   44|      0|        if countdown < 1 || countdown > 5 || countdown != 9 {\n+   45|      0|            countdown = 0;\n+   46|      0|        }\n+   47|      0|        countdown -= 5;\n+   48|      0|    } else {\n+   49|      0|        return;\n+   50|      0|    }\n+   51|      1|}\n+"}, {"sha": "f623248ab57e20365b5af14769b4b8ee231b620b", "filename": "src/test/run-make-fulldeps/instrument-coverage-llvm-ir-base/Makefile", "status": "added", "additions": 65, "deletions": 0, "changes": 65, "blob_url": "https://github.com/rust-lang/rust/blob/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-llvm-ir-base%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-llvm-ir-base%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-llvm-ir-base%2FMakefile?ref=51d692cf7709de563cac6b5ee0080b8adf96f1df", "patch": "@@ -0,0 +1,65 @@\n+# needs-profiler-support\n+\n+# ISSUE(76038): When targeting MSVC, Rust binaries built with both `-Z instrument-coverage` and\n+# `-C link-dead-code` typically crash (with a seg-fault) or at best generate an empty `*.profraw`.\n+# See ../instrument-coverage/coverage_tools.mk for more information.\n+\n+-include ../instrument-coverage/coverage_tools.mk\n+\n+BASEDIR=../instrument-coverage-llvm-ir-base\n+\n+ifeq ($(UNAME),Darwin)\n+\tINSTR_PROF_DATA_SUFFIX=,regular,live_support\n+\tDATA_SECTION_PREFIX=__DATA,\n+\tLLVM_COV_SECTION_PREFIX=__LLVM_COV,\n+else\n+\tINSTR_PROF_DATA_SUFFIX=\n+\tDATA_SECTION_PREFIX=\n+\tLLVM_COV_SECTION_PREFIX=\n+endif\n+\n+ifeq ($(LINK_DEAD_CODE),yes)\n+\tDEFINE_INTERNAL=define hidden\n+else\n+\tDEFINE_INTERNAL=define internal\n+endif\n+\n+ifdef IS_WINDOWS\n+\tLLVM_FILECHECK_OPTIONS=\\\n+\t\t-check-prefixes=CHECK,WINDOWS \\\n+\t\t-DPRIVATE_GLOBAL='internal global' \\\n+\t\t-DDEFINE_INTERNAL='$(DEFINE_INTERNAL)' \\\n+\t\t-DINSTR_PROF_DATA='.lprfd$$M' \\\n+\t\t-DINSTR_PROF_NAME='.lprfn$$M' \\\n+\t\t-DINSTR_PROF_CNTS='.lprfc$$M' \\\n+\t\t-DINSTR_PROF_VALS='.lprfv$$M' \\\n+\t\t-DINSTR_PROF_VNODES='.lprfnd$$M' \\\n+\t\t-DINSTR_PROF_COVMAP='.lcovmap$$M' \\\n+\t\t-DINSTR_PROF_ORDERFILE='.lorderfile$$M'\n+else\n+\tLLVM_FILECHECK_OPTIONS=\\\n+\t\t-check-prefixes=CHECK \\\n+\t\t-DPRIVATE_GLOBAL='private global' \\\n+\t\t-DDEFINE_INTERNAL='$(DEFINE_INTERNAL)' \\\n+\t\t-DINSTR_PROF_DATA='$(DATA_SECTION_PREFIX)__llvm_prf_data$(INSTR_PROF_DATA_SUFFIX)' \\\n+\t\t-DINSTR_PROF_NAME='$(DATA_SECTION_PREFIX)__llvm_prf_names' \\\n+\t\t-DINSTR_PROF_CNTS='$(DATA_SECTION_PREFIX)__llvm_prf_cnts' \\\n+\t\t-DINSTR_PROF_VALS='$(DATA_SECTION_PREFIX)__llvm_prf_vals' \\\n+\t\t-DINSTR_PROF_VNODES='$(DATA_SECTION_PREFIX)__llvm_prf_vnds' \\\n+\t\t-DINSTR_PROF_COVMAP='$(LLVM_COV_SECTION_PREFIX)__llvm_covmap' \\\n+\t\t-DINSTR_PROF_ORDERFILE='$(DATA_SECTION_PREFIX)__llvm_orderfile'\n+endif\n+\n+all:\n+\t# Compile the test program with non-experimental coverage instrumentation, and generate LLVM IR\n+\t#\n+\t# Note: `-Clink-dead-code=no` disables the option, needed because the option is automatically\n+\t# enabled for some platforms, but not for Windows MSVC (due to Issue #76038). The state of this\n+\t# option affects the generated MIR and coverage, so it is enabled for tests to ensure the\n+\t# tests results are the same across platforms.\n+\t$(RUSTC) $(BASEDIR)/testprog.rs \\\n+\t\t\t-Zinstrument-coverage \\\n+\t\t\t-Clink-dead-code=$(LINK_DEAD_CODE) \\\n+\t\t\t--emit=llvm-ir\n+\n+\tcat \"$(TMPDIR)\"/testprog.ll | \"$(LLVM_FILECHECK)\" $(BASEDIR)/filecheck.testprog.txt $(LLVM_FILECHECK_OPTIONS)"}, {"sha": "0a3c4aedd556902a72b64d797778e6b493c0acb7", "filename": "src/test/run-make-fulldeps/instrument-coverage-llvm-ir-base/filecheck.testprog.txt", "status": "added", "additions": 49, "deletions": 0, "changes": 49, "blob_url": "https://github.com/rust-lang/rust/blob/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-llvm-ir-base%2Ffilecheck.testprog.txt", "raw_url": "https://github.com/rust-lang/rust/raw/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-llvm-ir-base%2Ffilecheck.testprog.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-llvm-ir-base%2Ffilecheck.testprog.txt?ref=51d692cf7709de563cac6b5ee0080b8adf96f1df", "patch": "@@ -0,0 +1,49 @@\n+# Check for metadata, variables, declarations, and function definitions injected\n+# into LLVM IR when compiling with -Zinstrument-coverage.\n+\n+WINDOWS:      $__llvm_profile_runtime_user = comdat any\n+\n+CHECK:        @__llvm_coverage_mapping = internal constant\n+CHECK-SAME:   section \"[[INSTR_PROF_COVMAP]]\", align 8\n+\n+WINDOWS:      @__llvm_profile_runtime = external global i32\n+\n+CHECK:        @__profc__R{{[a-zA-Z0-9_]+}}testprog14will_be_called = [[PRIVATE_GLOBAL]]\n+CHECK-SAME:   section \"[[INSTR_PROF_CNTS]]\", align 8\n+\n+CHECK:        @__profd__R{{[a-zA-Z0-9_]+}}testprog14will_be_called = [[PRIVATE_GLOBAL]]\n+CHECK-SAME:   @__profc__R{{[a-zA-Z0-9_]+}}testprog14will_be_called,\n+CHECK-SAME:   section \"[[INSTR_PROF_DATA]]\", align 8\n+\n+CHECK:        @__profc__R{{[a-zA-Z0-9_]+}}testprog4main = [[PRIVATE_GLOBAL]]\n+CHECK-SAME:   section \"[[INSTR_PROF_CNTS]]\", align 8\n+\n+CHECK:        @__profd__R{{[a-zA-Z0-9_]+}}testprog4main = [[PRIVATE_GLOBAL]]\n+CHECK-SAME:   @__profc__R{{[a-zA-Z0-9_]+}}testprog4main,\n+CHECK-SAME:   section \"[[INSTR_PROF_DATA]]\", align 8\n+\n+CHECK:        @__llvm_prf_nm = private constant\n+CHECK-SAME:   section \"[[INSTR_PROF_NAME]]\", align 1\n+\n+CHECK:        @llvm.used = appending global\n+CHECK-SAME:   i8* bitcast ({ {{.*}} }* @__llvm_coverage_mapping to i8*)\n+WINDOWS-SAME: i8* bitcast (i32 ()* @__llvm_profile_runtime_user to i8*)\n+CHECK-SAME:   i8* bitcast ({ {{.*}} }* @__profd__R{{[a-zA-Z0-9_]*}}testprog4main to i8*)\n+CHECK-SAME:   i8* getelementptr inbounds ({{.*}}* @__llvm_prf_nm, i32 0, i32 0)\n+CHECK-SAME:   section \"llvm.metadata\"\n+\n+CHECK:        [[DEFINE_INTERNAL]] { {{.*}} } @_R{{[a-zA-Z0-9_]+}}testprog14will_be_called() unnamed_addr #{{[0-9]+}} {\n+CHECK-NEXT:   start:\n+CHECK-NOT:    bb{{[0-9]+}}:\n+CHECK:        %pgocount = load i64, i64* getelementptr inbounds\n+CHECK-SAME:   * @__profc__R{{[a-zA-Z0-9_]+}}testprog14will_be_called,\n+\n+CHECK:        declare void @llvm.instrprof.increment(i8*, i64, i32, i32) #[[LLVM_INSTRPROF_INCREMENT_ATTR:[0-9]+]]\n+\n+WINDOWS:      define linkonce_odr hidden i32 @__llvm_profile_runtime_user() #[[LLVM_PROFILE_RUNTIME_USER_ATTR:[0-9]+]] comdat {\n+WINDOWS-NEXT: %1 = load i32, i32* @__llvm_profile_runtime\n+WINDOWS-NEXT: ret i32 %1\n+WINDOWS-NEXT: }\n+\n+CHECK:        attributes #[[LLVM_INSTRPROF_INCREMENT_ATTR]] = { nounwind }\n+WINDOWS:      attributes #[[LLVM_PROFILE_RUNTIME_USER_ATTR]] = { noinline }"}, {"sha": "358c25677ae1d1561f528d395e563852e898f17f", "filename": "src/test/run-make-fulldeps/instrument-coverage-llvm-ir-base/testprog.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-llvm-ir-base%2Ftestprog.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-llvm-ir-base%2Ftestprog.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-llvm-ir-base%2Ftestprog.rs?ref=51d692cf7709de563cac6b5ee0080b8adf96f1df", "previous_filename": "src/test/run-make-fulldeps/instrument-coverage/testprog.rs"}, {"sha": "ba2126a6b3f1dde4df688cd5234b5a9b4300de38", "filename": "src/test/run-make-fulldeps/instrument-coverage-llvm-ir-link-dead-code/Makefile", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-llvm-ir-link-dead-code%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-llvm-ir-link-dead-code%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-llvm-ir-link-dead-code%2FMakefile?ref=51d692cf7709de563cac6b5ee0080b8adf96f1df", "patch": "@@ -0,0 +1,11 @@\n+# needs-profiler-support\n+# ignore-msvc\n+\n+# LINK_DEAD_CODE requires ignore-msvc due to Issue #76038\n+LINK_DEAD_CODE=yes\n+\n+-include ../instrument-coverage-llvm-ir-base/Makefile\n+\n+# ISSUE(76038): When targeting MSVC, Rust binaries built with both `-Z instrument-coverage` and\n+# `-C link-dead-code` typically crash (with a seg-fault) or at best generate an empty `*.profraw`.\n+# See ../instrument-coverage/coverage_tools.mk for more information.\n\\ No newline at end of file"}, {"sha": "5cd425979ea49e6ad91fba8ab47cb610c2361d6c", "filename": "src/test/run-make-fulldeps/instrument-coverage-mir-cov-html-base/Makefile", "status": "added", "additions": 42, "deletions": 0, "changes": 42, "blob_url": "https://github.com/rust-lang/rust/blob/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-mir-cov-html-base%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-mir-cov-html-base%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-mir-cov-html-base%2FMakefile?ref=51d692cf7709de563cac6b5ee0080b8adf96f1df", "patch": "@@ -0,0 +1,42 @@\n+# needs-profiler-support\n+\n+# ISSUE(76038): When targeting MSVC, Rust binaries built with both `-Z instrument-coverage` and\n+# `-C link-dead-code` typically crash (with a seg-fault) or at best generate an empty `*.profraw`.\n+# See ../instrument-coverage/coverage_tools.mk for more information.\n+\n+-include ../instrument-coverage/coverage_tools.mk\n+\n+SOURCEDIR=../instrument-coverage\n+\n+all: $(patsubst $(SOURCEDIR)/%.rs,%,$(wildcard $(SOURCEDIR)/*.rs))\n+\n+# Ensure there are no `expected` results for tests that may have been removed or renamed\n+.PHONY: clear_expected_if_blessed\n+clear_expected_if_blessed:\n+ifdef RUSTC_BLESS_TEST\n+\trm -rf expected_mir_dump.*/\n+endif\n+\n+-include clear_expected_if_blessed\n+\n+%: $(SOURCEDIR)/%.rs\n+\t# Compile the test program with \"experimental\" coverage instrumentation and generate relevant MIR.\n+\t#\n+\t# FIXME(richkadel): `-Zexperimental-coverage` to `-Zinstrument-coverage` once we are\n+\t# satisfied with the branch-level instrumentation.\n+\t$(RUSTC) $(SOURCEDIR)/$@.rs \\\n+\t\t\t-Zexperimental-coverage \\\n+\t\t\t-Clink-dead-code=$(LINK_DEAD_CODE) \\\n+\t\t\t-Zdump-mir=InstrumentCoverage \\\n+\t\t\t-Zdump-mir-dir=\"$(TMPDIR)\"/mir_dump.$@\n+\n+ifdef RUSTC_BLESS_TEST\n+\tmkdir -p expected_mir_dump.$@\n+\tcp \"$(TMPDIR)\"/mir_dump.$@/*InstrumentCoverage.0.html expected_mir_dump.$@/\n+else\n+\t# Check that the selected `mir_dump` files match what we expect (`--bless` refreshes `expected`)\n+\tmkdir -p \"$(TMPDIR)\"/actual_mir_dump.$@\n+\trm -f \"$(TMPDIR)\"/actual_mir_dump.$@/*\n+\tcp \"$(TMPDIR)\"/mir_dump.$@/*InstrumentCoverage.0.html \"$(TMPDIR)\"/actual_mir_dump.$@/\n+\t$(DIFF) -r expected_mir_dump.$@/ \"$(TMPDIR)\"/actual_mir_dump.$@/\n+endif"}, {"sha": "faa5d65e7e78792e238fa5d635c2a45d21b994b7", "filename": "src/test/run-make-fulldeps/instrument-coverage-mir-cov-html-base/expected_mir_dump.coverage_of_if_else/coverage_of_if_else.main.-------.InstrumentCoverage.0.html", "status": "added", "additions": 583, "deletions": 0, "changes": 583, "blob_url": "https://github.com/rust-lang/rust/blob/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-mir-cov-html-base%2Fexpected_mir_dump.coverage_of_if_else%2Fcoverage_of_if_else.main.-------.InstrumentCoverage.0.html", "raw_url": "https://github.com/rust-lang/rust/raw/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-mir-cov-html-base%2Fexpected_mir_dump.coverage_of_if_else%2Fcoverage_of_if_else.main.-------.InstrumentCoverage.0.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-mir-cov-html-base%2Fexpected_mir_dump.coverage_of_if_else%2Fcoverage_of_if_else.main.-------.InstrumentCoverage.0.html?ref=51d692cf7709de563cac6b5ee0080b8adf96f1df", "patch": "@@ -0,0 +1,583 @@\n+<!DOCTYPE html>\n+<html>\n+<head>\n+    <title>coverage_of_if_else - Code Regions</title>\n+    <style>\n+    .line {\n+        counter-increment: line;\n+    }\n+    .line:before {\n+        content: counter(line) \": \";\n+        font-family: Menlo, Monaco, monospace;\n+        font-style: italic;\n+        width: 3.8em;\n+        display: inline-block;\n+        text-align: right;\n+        filter: opacity(50%);\n+        -webkit-user-select: none;\n+    }\n+    .code {\n+        color: #dddddd;\n+        background-color: #222222;\n+        font-family: Menlo, Monaco, monospace;\n+        line-height: 1.4em;\n+        border-bottom: 2px solid #222222;\n+        white-space: pre;\n+        display: inline-block;\n+    }\n+    .odd {\n+        background-color: #55bbff;\n+        color: #223311;\n+    }\n+    .even {\n+        background-color: #ee7756;\n+        color: #551133;\n+    }\n+    .code {\n+        --index: calc(var(--layer) - 1);\n+        padding-top: calc(var(--index) * 0.15em);\n+        filter:\n+            hue-rotate(calc(var(--index) * 25deg))\n+            saturate(calc(100% - (var(--index) * 2%)))\n+            brightness(calc(100% - (var(--index) * 1.5%)));\n+    }\n+    .annotation {\n+        color: #4444ff;\n+        font-family: monospace;\n+        font-style: italic;\n+        display: none;\n+        -webkit-user-select: none;\n+    }\n+    body:active .annotation {\n+        /* requires holding mouse down anywhere on the page */\n+        display: inline-block;\n+    }\n+    span:hover .annotation {\n+        /* requires hover over a span ONLY on its first line */\n+        display: inline-block;\n+    }\n+    </style>\n+</head>\n+<body>\n+<div class=\"code\" style=\"counter-reset: line 2\"><span class=\"line\"><span class=\"code\" style=\"--layer: 0\">fn main() {</span></span>\n+<span class=\"line\"><span class=\"code\" style=\"--layer: 0\">    let mut countdown = 0;</span></span>\n+<span class=\"line\"><span class=\"code\" style=\"--layer: 0\">    </span><span><span class=\"code even\" style=\"--layer: 1\" title=\"bb2: ../instrument-coverage/coverage_of_if_else.rs:5:5: 7:6:\n+    5:5-7:6: FalseEdge: falseEdge -&gt; [real: bb4, imaginary: bb3]\"><span class=\"annotation\">@2</span></span></span><span class=\"code even\" style=\"--layer: 2\" title=\"bb4: ../instrument-coverage/coverage_of_if_else.rs:5:5: 7:6:\n+    6:9-6:23: Assign: _1 = const 10_i32\n+    5:13-7:6: Assign: _2 = const ()\n+    5:5-7:6: Goto: goto -&gt; bb5\"><span class=\"annotation\">@4</span></span><span class=\"code even\" style=\"--layer: 3\" title=\"bb3: ../instrument-coverage/coverage_of_if_else.rs:5:5: 7:6:\n+    5:5-7:6: Assign: _2 = const ()\n+    5:5-7:6: Goto: goto -&gt; bb5\"><span class=\"annotation\">@3:</span> if </span><span class=\"code even\" style=\"--layer: 4\" title=\"bb0: ../instrument-coverage/coverage_of_if_else.rs:5:8: 5:12:\n+    4:9-4:22: StorageLive: StorageLive(_1)\n+    4:25-4:26: Assign: _1 = const 0_i32\n+    4:9-4:22: FakeRead: FakeRead(ForLet, _1)\n+    5:5-7:6: StorageLive: StorageLive(_2)\n+    5:8-5:12: StorageLive: StorageLive(_3)\n+    5:8-5:12: Assign: _3 = const true\n+    5:8-5:12: FakeRead: FakeRead(ForMatchedPlace, _3)\n+    5:5-7:6: SwitchInt: switchInt(_3) -&gt; [false: bb3, otherwise: bb2]\"><span class=\"annotation\">@0:</span> true</span><span class=\"code even\" style=\"--layer: 3\" title=\"bb3: ../instrument-coverage/coverage_of_if_else.rs:5:5: 7:6:\n+    5:5-7:6: Assign: _2 = const ()\n+    5:5-7:6: Goto: goto -&gt; bb5\"><span class=\"annotation\">@3:</span>  {</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 3\" title=\"bb3: ../instrument-coverage/coverage_of_if_else.rs:5:5: 7:6:\n+    5:5-7:6: Assign: _2 = const ()\n+    5:5-7:6: Goto: goto -&gt; bb5\">        countdown = 10;</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 3\" title=\"bb3: ../instrument-coverage/coverage_of_if_else.rs:5:5: 7:6:\n+    5:5-7:6: Assign: _2 = const ()\n+    5:5-7:6: Goto: goto -&gt; bb5\">    }</span><span class=\"code\" style=\"--layer: 0\"></span></span>\n+<span class=\"line\"><span class=\"code\" style=\"--layer: 0\"></span></span>\n+<span class=\"line\"><span class=\"code\" style=\"--layer: 0\">    </span><span><span class=\"code even\" style=\"--layer: 1\" title=\"bb6: ../instrument-coverage/coverage_of_if_else.rs:9:5: 18:6:\n+    9:5-18:6: FalseEdge: falseEdge -&gt; [real: bb8, imaginary: bb7]\"><span class=\"annotation\">@6</span></span></span><span class=\"code even\" style=\"--layer: 2\" title=\"bb9: ../instrument-coverage/coverage_of_if_else.rs:9:5: 18:6:\n+    10:9-10:23: Assign: _1 = move (_7.0: i32)\n+    9:22-11:6: Assign: _4 = const ()\n+    9:5-18:6: Goto: goto -&gt; bb28\"><span class=\"annotation\">@9</span></span><span class=\"code even\" style=\"--layer: 3\" title=\"bb25: ../instrument-coverage/coverage_of_if_else.rs:9:5: 18:6:\n+    15:9-15:23: Assign: _1 = move (_19.0: i32)\n+    11:29-16:6: Assign: _4 = const ()\n+    18:5-18:6: StorageDead: StorageDead(_8)\n+    9:5-18:6: Goto: goto -&gt; bb28\"><span class=\"annotation\">@25:</span> if </span><span class=\"code even\" style=\"--layer: 4\" title=\"bb5: ../instrument-coverage/coverage_of_if_else.rs:9:8: 9:21:\n+    7:5-7:6: StorageDead: StorageDead(_3)\n+    7:5-7:6: StorageDead: StorageDead(_2)\n+    9:5-18:6: StorageLive: StorageLive(_4)\n+    9:8-9:21: StorageLive: StorageLive(_5)\n+    9:8-9:17: StorageLive: StorageLive(_6)\n+    9:8-9:17: Assign: _6 = _1\n+    9:8-9:21: Assign: _5 = Gt(move _6, const 7_i32)\n+    9:20-9:21: StorageDead: StorageDead(_6)\n+    9:8-9:21: FakeRead: FakeRead(ForMatchedPlace, _5)\n+    9:5-18:6: SwitchInt: switchInt(_5) -&gt; [false: bb7, otherwise: bb6]\"><span class=\"annotation\">@5:</span> countdown &gt; 7</span><span class=\"code even\" style=\"--layer: 3\" title=\"bb25: ../instrument-coverage/coverage_of_if_else.rs:9:5: 18:6:\n+    15:9-15:23: Assign: _1 = move (_19.0: i32)\n+    11:29-16:6: Assign: _4 = const ()\n+    18:5-18:6: StorageDead: StorageDead(_8)\n+    9:5-18:6: Goto: goto -&gt; bb28\"><span class=\"annotation\">@25:</span>  {</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 3\" title=\"bb25: ../instrument-coverage/coverage_of_if_else.rs:9:5: 18:6:\n+    15:9-15:23: Assign: _1 = move (_19.0: i32)\n+    11:29-16:6: Assign: _4 = const ()\n+    18:5-18:6: StorageDead: StorageDead(_8)\n+    9:5-18:6: Goto: goto -&gt; bb28\">        </span><span class=\"code odd\" style=\"--layer: 4\" title=\"bb8: ../instrument-coverage/coverage_of_if_else.rs:10:9: 10:23:\n+    10:9-10:23: Assign: _7 = CheckedSub(_1, const 4_i32)\n+    10:9-10:23: Assert: assert(!move (_7.1: bool), &quot;attempt to compute `{} - {}` which would overflow&quot;, _1, const 4_i32) -&gt; [success: bb9, unwind: bb1]\"><span class=\"annotation\">@8:</span> countdown -= 4</span><span class=\"code even\" style=\"--layer: 3\" title=\"bb25: ../instrument-coverage/coverage_of_if_else.rs:9:5: 18:6:\n+    15:9-15:23: Assign: _1 = move (_19.0: i32)\n+    11:29-16:6: Assign: _4 = const ()\n+    18:5-18:6: StorageDead: StorageDead(_8)\n+    9:5-18:6: Goto: goto -&gt; bb28\"><span class=\"annotation\">@25:</span> ;</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 3\" title=\"bb25: ../instrument-coverage/coverage_of_if_else.rs:9:5: 18:6:\n+    15:9-15:23: Assign: _1 = move (_19.0: i32)\n+    11:29-16:6: Assign: _4 = const ()\n+    18:5-18:6: StorageDead: StorageDead(_8)\n+    9:5-18:6: Goto: goto -&gt; bb28\">    } else </span><span class=\"code even\" style=\"--layer: 4\" title=\"bb10: ../instrument-coverage/coverage_of_if_else.rs:11:12: 18:6:\n+    11:12-18:6: FalseEdge: falseEdge -&gt; [real: bb12, imaginary: bb11]\"><span class=\"annotation\">@10:</span> if </span><span class=\"code even\" style=\"--layer: 5\" title=\"bb7: ../instrument-coverage/coverage_of_if_else.rs:11:15: 11:28:\n+    11:15-11:28: StorageLive: StorageLive(_8)\n+    11:15-11:24: StorageLive: StorageLive(_9)\n+    11:15-11:24: Assign: _9 = _1\n+    11:15-11:28: Assign: _8 = Gt(move _9, const 2_i32)\n+    11:27-11:28: StorageDead: StorageDead(_9)\n+    11:15-11:28: FakeRead: FakeRead(ForMatchedPlace, _8)\n+    11:12-18:6: SwitchInt: switchInt(_8) -&gt; [false: bb11, otherwise: bb10]\"><span class=\"annotation\">@7:</span> countdown &gt; 2</span><span class=\"code even\" style=\"--layer: 4\" title=\"bb10: ../instrument-coverage/coverage_of_if_else.rs:11:12: 18:6:\n+    11:12-18:6: FalseEdge: falseEdge -&gt; [real: bb12, imaginary: bb11]\"><span class=\"annotation\">@10:</span>  {</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 4\" title=\"bb10: ../instrument-coverage/coverage_of_if_else.rs:11:12: 18:6:\n+    11:12-18:6: FalseEdge: falseEdge -&gt; [real: bb12, imaginary: bb11]\">        </span><span class=\"code odd\" style=\"--layer: 5\" title=\"bb22: ../instrument-coverage/coverage_of_if_else.rs:12:9: 14:10:\n+    12:9-14:10: Assign: _10 = const ()\n+    12:9-14:10: Goto: goto -&gt; bb24\"><span class=\"annotation\">@22</span></span><span class=\"code even\" style=\"--layer: 6\" title=\"bb23: ../instrument-coverage/coverage_of_if_else.rs:12:9: 14:10:\n+    13:13-13:26: Assign: _1 = const 0_i32\n+    12:61-14:10: Assign: _10 = const ()\n+    12:9-14:10: Goto: goto -&gt; bb24\"><span class=\"annotation\">@23</span></span><span class=\"code even\" style=\"--layer: 7\" title=\"bb21: ../instrument-coverage/coverage_of_if_else.rs:12:9: 14:10:\n+    12:9-14:10: FalseEdge: falseEdge -&gt; [real: bb23, imaginary: bb22]\"><span class=\"annotation\">@21:</span> if </span><span class=\"code even\" style=\"--layer: 8\" title=\"bb14: ../instrument-coverage/coverage_of_if_else.rs:12:12: 12:60:\n+    12:12-12:60: Assign: _11 = const false\n+    12:12-12:60: Goto: goto -&gt; bb16\"><span class=\"annotation\">@14</span></span><span class=\"code even\" style=\"--layer: 9\" title=\"bb15: ../instrument-coverage/coverage_of_if_else.rs:12:12: 12:60:\n+    12:46-12:60: StorageLive: StorageLive(_17)\n+    12:46-12:55: StorageLive: StorageLive(_18)\n+    12:46-12:55: Assign: _18 = _1\n+    12:46-12:60: Assign: _17 = Ne(move _18, const 9_i32)\n+    12:59-12:60: StorageDead: StorageDead(_18)\n+    12:12-12:60: SwitchInt: switchInt(move _17) -&gt; [false: bb14, otherwise: bb13]\"><span class=\"annotation\">@15</span></span><span class=\"code even\" style=\"--layer: 10\" title=\"bb16: ../instrument-coverage/coverage_of_if_else.rs:12:12: 12:60:\n+    12:59-12:60: StorageDead: StorageDead(_17)\n+    12:59-12:60: StorageDead: StorageDead(_12)\n+    12:12-12:60: FakeRead: FakeRead(ForMatchedPlace, _11)\n+    12:9-14:10: SwitchInt: switchInt(_11) -&gt; [false: bb22, otherwise: bb21]\"><span class=\"annotation\">@16</span></span><span class=\"code even\" style=\"--layer: 11\" title=\"bb13: ../instrument-coverage/coverage_of_if_else.rs:12:12: 12:60:\n+    12:12-12:60: Assign: _11 = const true\n+    12:12-12:60: Goto: goto -&gt; bb16\"><span class=\"annotation\">@13</span></span><span class=\"code even\" style=\"--layer: 12\" title=\"bb20: ../instrument-coverage/coverage_of_if_else.rs:12:12: 12:60:\n+    12:41-12:42: StorageDead: StorageDead(_15)\n+    12:41-12:42: StorageDead: StorageDead(_13)\n+    12:12-12:60: SwitchInt: switchInt(move _12) -&gt; [false: bb15, otherwise: bb13]\"><span class=\"annotation\">@20</span></span><span class=\"code even\" style=\"--layer: 13\" title=\"bb12: ../instrument-coverage/coverage_of_if_else.rs:12:12: 12:60:\n+    12:9-14:10: StorageLive: StorageLive(_10)\n+    12:12-12:60: StorageLive: StorageLive(_11)\n+    12:12-12:42: StorageLive: StorageLive(_12)\n+    12:12-12:25: StorageLive: StorageLive(_13)\n+    12:12-12:21: StorageLive: StorageLive(_14)\n+    12:12-12:21: Assign: _14 = _1\n+    12:12-12:25: Assign: _13 = Lt(move _14, const 1_i32)\n+    12:24-12:25: StorageDead: StorageDead(_14)\n+    12:12-12:42: SwitchInt: switchInt(move _13) -&gt; [false: bb19, otherwise: bb17]\"><span class=\"annotation\">@12</span></span><span class=\"code even\" style=\"--layer: 14\" title=\"bb18: ../instrument-coverage/coverage_of_if_else.rs:12:12: 12:42:\n+    12:12-12:42: Assign: _12 = const false\n+    12:12-12:42: Goto: goto -&gt; bb20\"><span class=\"annotation\">@18</span></span><span class=\"code even\" style=\"--layer: 15\" title=\"bb19: ../instrument-coverage/coverage_of_if_else.rs:12:12: 12:42:\n+    12:29-12:42: StorageLive: StorageLive(_15)\n+    12:29-12:38: StorageLive: StorageLive(_16)\n+    12:29-12:38: Assign: _16 = _1\n+    12:29-12:42: Assign: _15 = Gt(move _16, const 5_i32)\n+    12:41-12:42: StorageDead: StorageDead(_16)\n+    12:12-12:42: SwitchInt: switchInt(move _15) -&gt; [false: bb18, otherwise: bb17]\"><span class=\"annotation\">@19</span></span><span class=\"code even\" style=\"--layer: 16\" title=\"bb17: ../instrument-coverage/coverage_of_if_else.rs:12:12: 12:42:\n+    12:12-12:42: Assign: _12 = const true\n+    12:12-12:42: Goto: goto -&gt; bb20\"><span class=\"annotation\">@17:</span> countdown &lt; 1 || countdown &gt; 5</span><span class=\"code even\" style=\"--layer: 13\" title=\"bb12: ../instrument-coverage/coverage_of_if_else.rs:12:12: 12:60:\n+    12:9-14:10: StorageLive: StorageLive(_10)\n+    12:12-12:60: StorageLive: StorageLive(_11)\n+    12:12-12:42: StorageLive: StorageLive(_12)\n+    12:12-12:25: StorageLive: StorageLive(_13)\n+    12:12-12:21: StorageLive: StorageLive(_14)\n+    12:12-12:21: Assign: _14 = _1\n+    12:12-12:25: Assign: _13 = Lt(move _14, const 1_i32)\n+    12:24-12:25: StorageDead: StorageDead(_14)\n+    12:12-12:42: SwitchInt: switchInt(move _13) -&gt; [false: bb19, otherwise: bb17]\"><span class=\"annotation\">@12:</span>  || countdown != 9</span><span class=\"code even\" style=\"--layer: 7\" title=\"bb21: ../instrument-coverage/coverage_of_if_else.rs:12:9: 14:10:\n+    12:9-14:10: FalseEdge: falseEdge -&gt; [real: bb23, imaginary: bb22]\"><span class=\"annotation\">@21:</span>  {</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 7\" title=\"bb21: ../instrument-coverage/coverage_of_if_else.rs:12:9: 14:10:\n+    12:9-14:10: FalseEdge: falseEdge -&gt; [real: bb23, imaginary: bb22]\">            countdown = 0;</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 7\" title=\"bb21: ../instrument-coverage/coverage_of_if_else.rs:12:9: 14:10:\n+    12:9-14:10: FalseEdge: falseEdge -&gt; [real: bb23, imaginary: bb22]\">        </span><span class=\"code odd\" style=\"--layer: 8\" title=\"bb24: ../instrument-coverage/coverage_of_if_else.rs:14:9: 15:23:\n+    14:9-14:10: StorageDead: StorageDead(_11)\n+    14:9-14:10: StorageDead: StorageDead(_10)\n+    15:9-15:23: Assign: _19 = CheckedSub(_1, const 5_i32)\n+    15:9-15:23: Assert: assert(!move (_19.1: bool), &quot;attempt to compute `{} - {}` which would overflow&quot;, _1, const 5_i32) -&gt; [success: bb25, unwind: bb1]\"><span class=\"annotation\">@24:</span> }</span></span>\n+<span class=\"line\"><span class=\"code odd\" style=\"--layer: 8\" title=\"bb24: ../instrument-coverage/coverage_of_if_else.rs:14:9: 15:23:\n+    14:9-14:10: StorageDead: StorageDead(_11)\n+    14:9-14:10: StorageDead: StorageDead(_10)\n+    15:9-15:23: Assign: _19 = CheckedSub(_1, const 5_i32)\n+    15:9-15:23: Assert: assert(!move (_19.1: bool), &quot;attempt to compute `{} - {}` which would overflow&quot;, _1, const 5_i32) -&gt; [success: bb25, unwind: bb1]\">        countdown -= 5</span><span class=\"code even\" style=\"--layer: 4\" title=\"bb10: ../instrument-coverage/coverage_of_if_else.rs:11:12: 18:6:\n+    11:12-18:6: FalseEdge: falseEdge -&gt; [real: bb12, imaginary: bb11]\"><span class=\"annotation\">@10:</span> ;</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 4\" title=\"bb10: ../instrument-coverage/coverage_of_if_else.rs:11:12: 18:6:\n+    11:12-18:6: FalseEdge: falseEdge -&gt; [real: bb12, imaginary: bb11]\">    } else {</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 4\" title=\"bb10: ../instrument-coverage/coverage_of_if_else.rs:11:12: 18:6:\n+    11:12-18:6: FalseEdge: falseEdge -&gt; [real: bb12, imaginary: bb11]\">        </span><span class=\"code even\" style=\"--layer: 5\" title=\"bb27: ../instrument-coverage/coverage_of_if_else.rs:17:9: 51:2:\n+    51:1-51:2: StorageDead: StorageDead(_1)\n+    17:9-17:15: Goto: goto -&gt; bb26\"><span class=\"annotation\">@27</span></span><span class=\"code even\" style=\"--layer: 6\" title=\"bb11: ../instrument-coverage/coverage_of_if_else.rs:17:9: 18:6:\n+    17:9-17:15: Assign: _0 = const ()\n+    18:5-18:6: StorageDead: StorageDead(_8)\n+    18:5-18:6: StorageDead: StorageDead(_5)\n+    18:5-18:6: StorageDead: StorageDead(_4)\n+    17:9-17:15: Goto: goto -&gt; bb27\"><span class=\"annotation\">@11:</span> return;</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 6\" title=\"bb11: ../instrument-coverage/coverage_of_if_else.rs:17:9: 18:6:\n+    17:9-17:15: Assign: _0 = const ()\n+    18:5-18:6: StorageDead: StorageDead(_8)\n+    18:5-18:6: StorageDead: StorageDead(_5)\n+    18:5-18:6: StorageDead: StorageDead(_4)\n+    17:9-17:15: Goto: goto -&gt; bb27\">    }</span><span class=\"code even\" style=\"--layer: 5\" title=\"bb27: ../instrument-coverage/coverage_of_if_else.rs:17:9: 51:2:\n+    51:1-51:2: StorageDead: StorageDead(_1)\n+    17:9-17:15: Goto: goto -&gt; bb26\"><span class=\"annotation\">@27:</span> </span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 5\" title=\"bb27: ../instrument-coverage/coverage_of_if_else.rs:17:9: 51:2:\n+    51:1-51:2: StorageDead: StorageDead(_1)\n+    17:9-17:15: Goto: goto -&gt; bb26\"></span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 5\" title=\"bb27: ../instrument-coverage/coverage_of_if_else.rs:17:9: 51:2:\n+    51:1-51:2: StorageDead: StorageDead(_1)\n+    17:9-17:15: Goto: goto -&gt; bb26\">    let mut countdown = 0;</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 5\" title=\"bb27: ../instrument-coverage/coverage_of_if_else.rs:17:9: 51:2:\n+    51:1-51:2: StorageDead: StorageDead(_1)\n+    17:9-17:15: Goto: goto -&gt; bb26\">    </span><span class=\"code odd\" style=\"--layer: 6\" title=\"bb30: ../instrument-coverage/coverage_of_if_else.rs:21:5: 23:6:\n+    21:5-23:6: Assign: _22 = const ()\n+    21:5-23:6: Goto: goto -&gt; bb32\"><span class=\"annotation\">@30</span></span><span class=\"code even\" style=\"--layer: 7\" title=\"bb31: ../instrument-coverage/coverage_of_if_else.rs:21:5: 23:6:\n+    22:9-22:23: Assign: _21 = const 10_i32\n+    21:13-23:6: Assign: _22 = const ()\n+    21:5-23:6: Goto: goto -&gt; bb32\"><span class=\"annotation\">@31</span></span><span class=\"code even\" style=\"--layer: 8\" title=\"bb29: ../instrument-coverage/coverage_of_if_else.rs:21:5: 23:6:\n+    21:5-23:6: FalseEdge: falseEdge -&gt; [real: bb31, imaginary: bb30]\"><span class=\"annotation\">@29:</span> if </span><span class=\"code even\" style=\"--layer: 9\" title=\"bb28: ../instrument-coverage/coverage_of_if_else.rs:21:8: 21:12:\n+    18:5-18:6: StorageDead: StorageDead(_5)\n+    18:5-18:6: StorageDead: StorageDead(_4)\n+    20:9-20:22: StorageLive: StorageLive(_21)\n+    20:25-20:26: Assign: _21 = const 0_i32\n+    20:9-20:22: FakeRead: FakeRead(ForLet, _21)\n+    21:5-23:6: StorageLive: StorageLive(_22)\n+    21:8-21:12: StorageLive: StorageLive(_23)\n+    21:8-21:12: Assign: _23 = const true\n+    21:8-21:12: FakeRead: FakeRead(ForMatchedPlace, _23)\n+    21:5-23:6: SwitchInt: switchInt(_23) -&gt; [false: bb30, otherwise: bb29]\"><span class=\"annotation\">@28:</span> true</span><span class=\"code even\" style=\"--layer: 8\" title=\"bb29: ../instrument-coverage/coverage_of_if_else.rs:21:5: 23:6:\n+    21:5-23:6: FalseEdge: falseEdge -&gt; [real: bb31, imaginary: bb30]\"><span class=\"annotation\">@29:</span>  {</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 8\" title=\"bb29: ../instrument-coverage/coverage_of_if_else.rs:21:5: 23:6:\n+    21:5-23:6: FalseEdge: falseEdge -&gt; [real: bb31, imaginary: bb30]\">        countdown = 10;</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 8\" title=\"bb29: ../instrument-coverage/coverage_of_if_else.rs:21:5: 23:6:\n+    21:5-23:6: FalseEdge: falseEdge -&gt; [real: bb31, imaginary: bb30]\">    }</span><span class=\"code even\" style=\"--layer: 5\" title=\"bb27: ../instrument-coverage/coverage_of_if_else.rs:17:9: 51:2:\n+    51:1-51:2: StorageDead: StorageDead(_1)\n+    17:9-17:15: Goto: goto -&gt; bb26\"><span class=\"annotation\">@27:</span> </span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 5\" title=\"bb27: ../instrument-coverage/coverage_of_if_else.rs:17:9: 51:2:\n+    51:1-51:2: StorageDead: StorageDead(_1)\n+    17:9-17:15: Goto: goto -&gt; bb26\"></span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 5\" title=\"bb27: ../instrument-coverage/coverage_of_if_else.rs:17:9: 51:2:\n+    51:1-51:2: StorageDead: StorageDead(_1)\n+    17:9-17:15: Goto: goto -&gt; bb26\">    </span><span class=\"code even\" style=\"--layer: 6\" title=\"bb33: ../instrument-coverage/coverage_of_if_else.rs:25:5: 34:6:\n+    25:5-34:6: FalseEdge: falseEdge -&gt; [real: bb35, imaginary: bb34]\"><span class=\"annotation\">@33</span></span><span class=\"code even\" style=\"--layer: 7\" title=\"bb52: ../instrument-coverage/coverage_of_if_else.rs:25:5: 34:6:\n+    31:9-31:23: Assign: _21 = move (_39.0: i32)\n+    27:29-32:6: Assign: _24 = const ()\n+    34:5-34:6: StorageDead: StorageDead(_28)\n+    25:5-34:6: Goto: goto -&gt; bb53\"><span class=\"annotation\">@52</span></span><span class=\"code even\" style=\"--layer: 8\" title=\"bb36: ../instrument-coverage/coverage_of_if_else.rs:25:5: 34:6:\n+    26:9-26:23: Assign: _21 = move (_27.0: i32)\n+    25:22-27:6: Assign: _24 = const ()\n+    25:5-34:6: Goto: goto -&gt; bb53\"><span class=\"annotation\">@36:</span> if </span><span class=\"code even\" style=\"--layer: 9\" title=\"bb32: ../instrument-coverage/coverage_of_if_else.rs:25:8: 25:21:\n+    23:5-23:6: StorageDead: StorageDead(_23)\n+    23:5-23:6: StorageDead: StorageDead(_22)\n+    25:5-34:6: StorageLive: StorageLive(_24)\n+    25:8-25:21: StorageLive: StorageLive(_25)\n+    25:8-25:17: StorageLive: StorageLive(_26)\n+    25:8-25:17: Assign: _26 = _21\n+    25:8-25:21: Assign: _25 = Gt(move _26, const 7_i32)\n+    25:20-25:21: StorageDead: StorageDead(_26)\n+    25:8-25:21: FakeRead: FakeRead(ForMatchedPlace, _25)\n+    25:5-34:6: SwitchInt: switchInt(_25) -&gt; [false: bb34, otherwise: bb33]\"><span class=\"annotation\">@32:</span> countdown &gt; 7</span><span class=\"code even\" style=\"--layer: 8\" title=\"bb36: ../instrument-coverage/coverage_of_if_else.rs:25:5: 34:6:\n+    26:9-26:23: Assign: _21 = move (_27.0: i32)\n+    25:22-27:6: Assign: _24 = const ()\n+    25:5-34:6: Goto: goto -&gt; bb53\"><span class=\"annotation\">@36:</span>  {</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 8\" title=\"bb36: ../instrument-coverage/coverage_of_if_else.rs:25:5: 34:6:\n+    26:9-26:23: Assign: _21 = move (_27.0: i32)\n+    25:22-27:6: Assign: _24 = const ()\n+    25:5-34:6: Goto: goto -&gt; bb53\">        </span><span class=\"code odd\" style=\"--layer: 9\" title=\"bb35: ../instrument-coverage/coverage_of_if_else.rs:26:9: 26:23:\n+    26:9-26:23: Assign: _27 = CheckedSub(_21, const 4_i32)\n+    26:9-26:23: Assert: assert(!move (_27.1: bool), &quot;attempt to compute `{} - {}` which would overflow&quot;, _21, const 4_i32) -&gt; [success: bb36, unwind: bb1]\"><span class=\"annotation\">@35:</span> countdown -= 4</span><span class=\"code even\" style=\"--layer: 8\" title=\"bb36: ../instrument-coverage/coverage_of_if_else.rs:25:5: 34:6:\n+    26:9-26:23: Assign: _21 = move (_27.0: i32)\n+    25:22-27:6: Assign: _24 = const ()\n+    25:5-34:6: Goto: goto -&gt; bb53\"><span class=\"annotation\">@36:</span> ;</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 8\" title=\"bb36: ../instrument-coverage/coverage_of_if_else.rs:25:5: 34:6:\n+    26:9-26:23: Assign: _21 = move (_27.0: i32)\n+    25:22-27:6: Assign: _24 = const ()\n+    25:5-34:6: Goto: goto -&gt; bb53\">    } else </span><span class=\"code even\" style=\"--layer: 9\" title=\"bb37: ../instrument-coverage/coverage_of_if_else.rs:27:12: 34:6:\n+    27:12-34:6: FalseEdge: falseEdge -&gt; [real: bb39, imaginary: bb38]\"><span class=\"annotation\">@37:</span> if </span><span class=\"code even\" style=\"--layer: 10\" title=\"bb34: ../instrument-coverage/coverage_of_if_else.rs:27:15: 27:28:\n+    27:15-27:28: StorageLive: StorageLive(_28)\n+    27:15-27:24: StorageLive: StorageLive(_29)\n+    27:15-27:24: Assign: _29 = _21\n+    27:15-27:28: Assign: _28 = Gt(move _29, const 2_i32)\n+    27:27-27:28: StorageDead: StorageDead(_29)\n+    27:15-27:28: FakeRead: FakeRead(ForMatchedPlace, _28)\n+    27:12-34:6: SwitchInt: switchInt(_28) -&gt; [false: bb38, otherwise: bb37]\"><span class=\"annotation\">@34:</span> countdown &gt; 2</span><span class=\"code even\" style=\"--layer: 9\" title=\"bb37: ../instrument-coverage/coverage_of_if_else.rs:27:12: 34:6:\n+    27:12-34:6: FalseEdge: falseEdge -&gt; [real: bb39, imaginary: bb38]\"><span class=\"annotation\">@37:</span>  {</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 9\" title=\"bb37: ../instrument-coverage/coverage_of_if_else.rs:27:12: 34:6:\n+    27:12-34:6: FalseEdge: falseEdge -&gt; [real: bb39, imaginary: bb38]\">        </span><span class=\"code odd\" style=\"--layer: 10\" title=\"bb48: ../instrument-coverage/coverage_of_if_else.rs:28:9: 30:10:\n+    28:9-30:10: FalseEdge: falseEdge -&gt; [real: bb50, imaginary: bb49]\"><span class=\"annotation\">@48</span></span><span class=\"code even\" style=\"--layer: 11\" title=\"bb50: ../instrument-coverage/coverage_of_if_else.rs:28:9: 30:10:\n+    29:13-29:26: Assign: _21 = const 0_i32\n+    28:61-30:10: Assign: _30 = const ()\n+    28:9-30:10: Goto: goto -&gt; bb51\"><span class=\"annotation\">@50</span></span><span class=\"code even\" style=\"--layer: 12\" title=\"bb49: ../instrument-coverage/coverage_of_if_else.rs:28:9: 30:10:\n+    28:9-30:10: Assign: _30 = const ()\n+    28:9-30:10: Goto: goto -&gt; bb51\"><span class=\"annotation\">@49:</span> if </span><span class=\"code even\" style=\"--layer: 13\" title=\"bb39: ../instrument-coverage/coverage_of_if_else.rs:28:12: 28:60:\n+    28:9-30:10: StorageLive: StorageLive(_30)\n+    28:12-28:60: StorageLive: StorageLive(_31)\n+    28:12-28:42: StorageLive: StorageLive(_32)\n+    28:12-28:25: StorageLive: StorageLive(_33)\n+    28:12-28:21: StorageLive: StorageLive(_34)\n+    28:12-28:21: Assign: _34 = _21\n+    28:12-28:25: Assign: _33 = Lt(move _34, const 1_i32)\n+    28:24-28:25: StorageDead: StorageDead(_34)\n+    28:12-28:42: SwitchInt: switchInt(move _33) -&gt; [false: bb46, otherwise: bb44]\"><span class=\"annotation\">@39</span></span><span class=\"code even\" style=\"--layer: 14\" title=\"bb47: ../instrument-coverage/coverage_of_if_else.rs:28:12: 28:60:\n+    28:41-28:42: StorageDead: StorageDead(_35)\n+    28:41-28:42: StorageDead: StorageDead(_33)\n+    28:12-28:60: SwitchInt: switchInt(move _32) -&gt; [false: bb42, otherwise: bb40]\"><span class=\"annotation\">@47</span></span><span class=\"code even\" style=\"--layer: 15\" title=\"bb40: ../instrument-coverage/coverage_of_if_else.rs:28:12: 28:60:\n+    28:12-28:60: Assign: _31 = const true\n+    28:12-28:60: Goto: goto -&gt; bb43\"><span class=\"annotation\">@40</span></span><span class=\"code even\" style=\"--layer: 16\" title=\"bb43: ../instrument-coverage/coverage_of_if_else.rs:28:12: 28:60:\n+    28:59-28:60: StorageDead: StorageDead(_37)\n+    28:59-28:60: StorageDead: StorageDead(_32)\n+    28:12-28:60: FakeRead: FakeRead(ForMatchedPlace, _31)\n+    28:9-30:10: SwitchInt: switchInt(_31) -&gt; [false: bb49, otherwise: bb48]\"><span class=\"annotation\">@43</span></span><span class=\"code even\" style=\"--layer: 17\" title=\"bb42: ../instrument-coverage/coverage_of_if_else.rs:28:12: 28:60:\n+    28:46-28:60: StorageLive: StorageLive(_37)\n+    28:46-28:55: StorageLive: StorageLive(_38)\n+    28:46-28:55: Assign: _38 = _21\n+    28:46-28:60: Assign: _37 = Ne(move _38, const 9_i32)\n+    28:59-28:60: StorageDead: StorageDead(_38)\n+    28:12-28:60: SwitchInt: switchInt(move _37) -&gt; [false: bb41, otherwise: bb40]\"><span class=\"annotation\">@42</span></span><span class=\"code even\" style=\"--layer: 18\" title=\"bb41: ../instrument-coverage/coverage_of_if_else.rs:28:12: 28:60:\n+    28:12-28:60: Assign: _31 = const false\n+    28:12-28:60: Goto: goto -&gt; bb43\"><span class=\"annotation\">@41</span></span><span class=\"code even\" style=\"--layer: 19\" title=\"bb46: ../instrument-coverage/coverage_of_if_else.rs:28:12: 28:42:\n+    28:29-28:42: StorageLive: StorageLive(_35)\n+    28:29-28:38: StorageLive: StorageLive(_36)\n+    28:29-28:38: Assign: _36 = _21\n+    28:29-28:42: Assign: _35 = Gt(move _36, const 5_i32)\n+    28:41-28:42: StorageDead: StorageDead(_36)\n+    28:12-28:42: SwitchInt: switchInt(move _35) -&gt; [false: bb45, otherwise: bb44]\"><span class=\"annotation\">@46</span></span><span class=\"code even\" style=\"--layer: 20\" title=\"bb45: ../instrument-coverage/coverage_of_if_else.rs:28:12: 28:42:\n+    28:12-28:42: Assign: _32 = const false\n+    28:12-28:42: Goto: goto -&gt; bb47\"><span class=\"annotation\">@45</span></span><span class=\"code even\" style=\"--layer: 21\" title=\"bb44: ../instrument-coverage/coverage_of_if_else.rs:28:12: 28:42:\n+    28:12-28:42: Assign: _32 = const true\n+    28:12-28:42: Goto: goto -&gt; bb47\"><span class=\"annotation\">@44:</span> countdown &lt; 1 || countdown &gt; 5</span><span class=\"code even\" style=\"--layer: 18\" title=\"bb41: ../instrument-coverage/coverage_of_if_else.rs:28:12: 28:60:\n+    28:12-28:60: Assign: _31 = const false\n+    28:12-28:60: Goto: goto -&gt; bb43\"><span class=\"annotation\">@41:</span>  || countdown != 9</span><span class=\"code even\" style=\"--layer: 12\" title=\"bb49: ../instrument-coverage/coverage_of_if_else.rs:28:9: 30:10:\n+    28:9-30:10: Assign: _30 = const ()\n+    28:9-30:10: Goto: goto -&gt; bb51\"><span class=\"annotation\">@49:</span>  {</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 12\" title=\"bb49: ../instrument-coverage/coverage_of_if_else.rs:28:9: 30:10:\n+    28:9-30:10: Assign: _30 = const ()\n+    28:9-30:10: Goto: goto -&gt; bb51\">            countdown = 0;</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 12\" title=\"bb49: ../instrument-coverage/coverage_of_if_else.rs:28:9: 30:10:\n+    28:9-30:10: Assign: _30 = const ()\n+    28:9-30:10: Goto: goto -&gt; bb51\">        </span><span class=\"code odd\" style=\"--layer: 13\" title=\"bb51: ../instrument-coverage/coverage_of_if_else.rs:30:9: 31:23:\n+    30:9-30:10: StorageDead: StorageDead(_31)\n+    30:9-30:10: StorageDead: StorageDead(_30)\n+    31:9-31:23: Assign: _39 = CheckedSub(_21, const 5_i32)\n+    31:9-31:23: Assert: assert(!move (_39.1: bool), &quot;attempt to compute `{} - {}` which would overflow&quot;, _21, const 5_i32) -&gt; [success: bb52, unwind: bb1]\"><span class=\"annotation\">@51:</span> }</span></span>\n+<span class=\"line\"><span class=\"code odd\" style=\"--layer: 13\" title=\"bb51: ../instrument-coverage/coverage_of_if_else.rs:30:9: 31:23:\n+    30:9-30:10: StorageDead: StorageDead(_31)\n+    30:9-30:10: StorageDead: StorageDead(_30)\n+    31:9-31:23: Assign: _39 = CheckedSub(_21, const 5_i32)\n+    31:9-31:23: Assert: assert(!move (_39.1: bool), &quot;attempt to compute `{} - {}` which would overflow&quot;, _21, const 5_i32) -&gt; [success: bb52, unwind: bb1]\">        countdown -= 5</span><span class=\"code even\" style=\"--layer: 9\" title=\"bb37: ../instrument-coverage/coverage_of_if_else.rs:27:12: 34:6:\n+    27:12-34:6: FalseEdge: falseEdge -&gt; [real: bb39, imaginary: bb38]\"><span class=\"annotation\">@37:</span> ;</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 9\" title=\"bb37: ../instrument-coverage/coverage_of_if_else.rs:27:12: 34:6:\n+    27:12-34:6: FalseEdge: falseEdge -&gt; [real: bb39, imaginary: bb38]\">    } else {</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 9\" title=\"bb37: ../instrument-coverage/coverage_of_if_else.rs:27:12: 34:6:\n+    27:12-34:6: FalseEdge: falseEdge -&gt; [real: bb39, imaginary: bb38]\">        </span><span class=\"code even\" style=\"--layer: 10\" title=\"bb38: ../instrument-coverage/coverage_of_if_else.rs:33:9: 51:2:\n+    33:9-33:15: Assign: _0 = const ()\n+    34:5-34:6: StorageDead: StorageDead(_28)\n+    34:5-34:6: StorageDead: StorageDead(_25)\n+    34:5-34:6: StorageDead: StorageDead(_24)\n+    51:1-51:2: StorageDead: StorageDead(_21)\n+    33:9-33:15: Goto: goto -&gt; bb27\"><span class=\"annotation\">@38:</span> return;</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 10\" title=\"bb38: ../instrument-coverage/coverage_of_if_else.rs:33:9: 51:2:\n+    33:9-33:15: Assign: _0 = const ()\n+    34:5-34:6: StorageDead: StorageDead(_28)\n+    34:5-34:6: StorageDead: StorageDead(_25)\n+    34:5-34:6: StorageDead: StorageDead(_24)\n+    51:1-51:2: StorageDead: StorageDead(_21)\n+    33:9-33:15: Goto: goto -&gt; bb27\">    }</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 10\" title=\"bb38: ../instrument-coverage/coverage_of_if_else.rs:33:9: 51:2:\n+    33:9-33:15: Assign: _0 = const ()\n+    34:5-34:6: StorageDead: StorageDead(_28)\n+    34:5-34:6: StorageDead: StorageDead(_25)\n+    34:5-34:6: StorageDead: StorageDead(_24)\n+    51:1-51:2: StorageDead: StorageDead(_21)\n+    33:9-33:15: Goto: goto -&gt; bb27\"></span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 10\" title=\"bb38: ../instrument-coverage/coverage_of_if_else.rs:33:9: 51:2:\n+    33:9-33:15: Assign: _0 = const ()\n+    34:5-34:6: StorageDead: StorageDead(_28)\n+    34:5-34:6: StorageDead: StorageDead(_25)\n+    34:5-34:6: StorageDead: StorageDead(_24)\n+    51:1-51:2: StorageDead: StorageDead(_21)\n+    33:9-33:15: Goto: goto -&gt; bb27\">    let mut countdown = 0;</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 10\" title=\"bb38: ../instrument-coverage/coverage_of_if_else.rs:33:9: 51:2:\n+    33:9-33:15: Assign: _0 = const ()\n+    34:5-34:6: StorageDead: StorageDead(_28)\n+    34:5-34:6: StorageDead: StorageDead(_25)\n+    34:5-34:6: StorageDead: StorageDead(_24)\n+    51:1-51:2: StorageDead: StorageDead(_21)\n+    33:9-33:15: Goto: goto -&gt; bb27\">    </span><span class=\"code even\" style=\"--layer: 11\" title=\"bb56: ../instrument-coverage/coverage_of_if_else.rs:37:5: 39:6:\n+    38:9-38:23: Assign: _41 = const 10_i32\n+    37:13-39:6: Assign: _42 = const ()\n+    37:5-39:6: Goto: goto -&gt; bb57\"><span class=\"annotation\">@56</span></span><span class=\"code even\" style=\"--layer: 12\" title=\"bb54: ../instrument-coverage/coverage_of_if_else.rs:37:5: 39:6:\n+    37:5-39:6: FalseEdge: falseEdge -&gt; [real: bb56, imaginary: bb55]\"><span class=\"annotation\">@54</span></span><span class=\"code even\" style=\"--layer: 13\" title=\"bb55: ../instrument-coverage/coverage_of_if_else.rs:37:5: 39:6:\n+    37:5-39:6: Assign: _42 = const ()\n+    37:5-39:6: Goto: goto -&gt; bb57\"><span class=\"annotation\">@55:</span> if </span><span class=\"code even\" style=\"--layer: 14\" title=\"bb53: ../instrument-coverage/coverage_of_if_else.rs:37:8: 37:12:\n+    34:5-34:6: StorageDead: StorageDead(_25)\n+    34:5-34:6: StorageDead: StorageDead(_24)\n+    36:9-36:22: StorageLive: StorageLive(_41)\n+    36:25-36:26: Assign: _41 = const 0_i32\n+    36:9-36:22: FakeRead: FakeRead(ForLet, _41)\n+    37:5-39:6: StorageLive: StorageLive(_42)\n+    37:8-37:12: StorageLive: StorageLive(_43)\n+    37:8-37:12: Assign: _43 = const true\n+    37:8-37:12: FakeRead: FakeRead(ForMatchedPlace, _43)\n+    37:5-39:6: SwitchInt: switchInt(_43) -&gt; [false: bb55, otherwise: bb54]\"><span class=\"annotation\">@53:</span> true</span><span class=\"code even\" style=\"--layer: 13\" title=\"bb55: ../instrument-coverage/coverage_of_if_else.rs:37:5: 39:6:\n+    37:5-39:6: Assign: _42 = const ()\n+    37:5-39:6: Goto: goto -&gt; bb57\"><span class=\"annotation\">@55:</span>  {</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 13\" title=\"bb55: ../instrument-coverage/coverage_of_if_else.rs:37:5: 39:6:\n+    37:5-39:6: Assign: _42 = const ()\n+    37:5-39:6: Goto: goto -&gt; bb57\">        countdown = 10;</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 13\" title=\"bb55: ../instrument-coverage/coverage_of_if_else.rs:37:5: 39:6:\n+    37:5-39:6: Assign: _42 = const ()\n+    37:5-39:6: Goto: goto -&gt; bb57\">    }</span><span class=\"code even\" style=\"--layer: 10\" title=\"bb38: ../instrument-coverage/coverage_of_if_else.rs:33:9: 51:2:\n+    33:9-33:15: Assign: _0 = const ()\n+    34:5-34:6: StorageDead: StorageDead(_28)\n+    34:5-34:6: StorageDead: StorageDead(_25)\n+    34:5-34:6: StorageDead: StorageDead(_24)\n+    51:1-51:2: StorageDead: StorageDead(_21)\n+    33:9-33:15: Goto: goto -&gt; bb27\"><span class=\"annotation\">@38:</span> </span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 10\" title=\"bb38: ../instrument-coverage/coverage_of_if_else.rs:33:9: 51:2:\n+    33:9-33:15: Assign: _0 = const ()\n+    34:5-34:6: StorageDead: StorageDead(_28)\n+    34:5-34:6: StorageDead: StorageDead(_25)\n+    34:5-34:6: StorageDead: StorageDead(_24)\n+    51:1-51:2: StorageDead: StorageDead(_21)\n+    33:9-33:15: Goto: goto -&gt; bb27\"></span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 10\" title=\"bb38: ../instrument-coverage/coverage_of_if_else.rs:33:9: 51:2:\n+    33:9-33:15: Assign: _0 = const ()\n+    34:5-34:6: StorageDead: StorageDead(_28)\n+    34:5-34:6: StorageDead: StorageDead(_25)\n+    34:5-34:6: StorageDead: StorageDead(_24)\n+    51:1-51:2: StorageDead: StorageDead(_21)\n+    33:9-33:15: Goto: goto -&gt; bb27\">    </span><span class=\"code odd\" style=\"--layer: 11\" title=\"bb61: ../instrument-coverage/coverage_of_if_else.rs:41:5: 50:6:\n+    42:9-42:23: Assign: _41 = move (_46.0: i32)\n+    41:22-43:6: Assign: _0 = const ()\n+    41:5-50:6: Goto: goto -&gt; bb78\"><span class=\"annotation\">@61</span></span><span class=\"code even\" style=\"--layer: 12\" title=\"bb58: ../instrument-coverage/coverage_of_if_else.rs:41:5: 50:6:\n+    41:5-50:6: FalseEdge: falseEdge -&gt; [real: bb60, imaginary: bb59]\"><span class=\"annotation\">@58</span></span><span class=\"code even\" style=\"--layer: 13\" title=\"bb77: ../instrument-coverage/coverage_of_if_else.rs:41:5: 50:6:\n+    47:9-47:23: Assign: _41 = move (_58.0: i32)\n+    43:29-48:6: Assign: _0 = const ()\n+    50:5-50:6: StorageDead: StorageDead(_47)\n+    41:5-50:6: Goto: goto -&gt; bb78\"><span class=\"annotation\">@77:</span> if </span><span class=\"code even\" style=\"--layer: 14\" title=\"bb57: ../instrument-coverage/coverage_of_if_else.rs:41:8: 41:21:\n+    39:5-39:6: StorageDead: StorageDead(_43)\n+    39:5-39:6: StorageDead: StorageDead(_42)\n+    41:8-41:21: StorageLive: StorageLive(_44)\n+    41:8-41:17: StorageLive: StorageLive(_45)\n+    41:8-41:17: Assign: _45 = _41\n+    41:8-41:21: Assign: _44 = Gt(move _45, const 7_i32)\n+    41:20-41:21: StorageDead: StorageDead(_45)\n+    41:8-41:21: FakeRead: FakeRead(ForMatchedPlace, _44)\n+    41:5-50:6: SwitchInt: switchInt(_44) -&gt; [false: bb59, otherwise: bb58]\"><span class=\"annotation\">@57:</span> countdown &gt; 7</span><span class=\"code even\" style=\"--layer: 13\" title=\"bb77: ../instrument-coverage/coverage_of_if_else.rs:41:5: 50:6:\n+    47:9-47:23: Assign: _41 = move (_58.0: i32)\n+    43:29-48:6: Assign: _0 = const ()\n+    50:5-50:6: StorageDead: StorageDead(_47)\n+    41:5-50:6: Goto: goto -&gt; bb78\"><span class=\"annotation\">@77:</span>  {</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 13\" title=\"bb77: ../instrument-coverage/coverage_of_if_else.rs:41:5: 50:6:\n+    47:9-47:23: Assign: _41 = move (_58.0: i32)\n+    43:29-48:6: Assign: _0 = const ()\n+    50:5-50:6: StorageDead: StorageDead(_47)\n+    41:5-50:6: Goto: goto -&gt; bb78\">        </span><span class=\"code odd\" style=\"--layer: 14\" title=\"bb60: ../instrument-coverage/coverage_of_if_else.rs:42:9: 42:23:\n+    42:9-42:23: Assign: _46 = CheckedSub(_41, const 4_i32)\n+    42:9-42:23: Assert: assert(!move (_46.1: bool), &quot;attempt to compute `{} - {}` which would overflow&quot;, _41, const 4_i32) -&gt; [success: bb61, unwind: bb1]\"><span class=\"annotation\">@60:</span> countdown -= 4</span><span class=\"code even\" style=\"--layer: 13\" title=\"bb77: ../instrument-coverage/coverage_of_if_else.rs:41:5: 50:6:\n+    47:9-47:23: Assign: _41 = move (_58.0: i32)\n+    43:29-48:6: Assign: _0 = const ()\n+    50:5-50:6: StorageDead: StorageDead(_47)\n+    41:5-50:6: Goto: goto -&gt; bb78\"><span class=\"annotation\">@77:</span> ;</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 13\" title=\"bb77: ../instrument-coverage/coverage_of_if_else.rs:41:5: 50:6:\n+    47:9-47:23: Assign: _41 = move (_58.0: i32)\n+    43:29-48:6: Assign: _0 = const ()\n+    50:5-50:6: StorageDead: StorageDead(_47)\n+    41:5-50:6: Goto: goto -&gt; bb78\">    } else </span><span class=\"code even\" style=\"--layer: 14\" title=\"bb62: ../instrument-coverage/coverage_of_if_else.rs:43:12: 50:6:\n+    43:12-50:6: FalseEdge: falseEdge -&gt; [real: bb64, imaginary: bb63]\"><span class=\"annotation\">@62:</span> if </span><span class=\"code even\" style=\"--layer: 15\" title=\"bb59: ../instrument-coverage/coverage_of_if_else.rs:43:15: 43:28:\n+    43:15-43:28: StorageLive: StorageLive(_47)\n+    43:15-43:24: StorageLive: StorageLive(_48)\n+    43:15-43:24: Assign: _48 = _41\n+    43:15-43:28: Assign: _47 = Gt(move _48, const 2_i32)\n+    43:27-43:28: StorageDead: StorageDead(_48)\n+    43:15-43:28: FakeRead: FakeRead(ForMatchedPlace, _47)\n+    43:12-50:6: SwitchInt: switchInt(_47) -&gt; [false: bb63, otherwise: bb62]\"><span class=\"annotation\">@59:</span> countdown &gt; 2</span><span class=\"code even\" style=\"--layer: 14\" title=\"bb62: ../instrument-coverage/coverage_of_if_else.rs:43:12: 50:6:\n+    43:12-50:6: FalseEdge: falseEdge -&gt; [real: bb64, imaginary: bb63]\"><span class=\"annotation\">@62:</span>  {</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 14\" title=\"bb62: ../instrument-coverage/coverage_of_if_else.rs:43:12: 50:6:\n+    43:12-50:6: FalseEdge: falseEdge -&gt; [real: bb64, imaginary: bb63]\">        </span><span class=\"code odd\" style=\"--layer: 15\" title=\"bb75: ../instrument-coverage/coverage_of_if_else.rs:44:9: 46:10:\n+    45:13-45:26: Assign: _41 = const 0_i32\n+    44:61-46:10: Assign: _49 = const ()\n+    44:9-46:10: Goto: goto -&gt; bb76\"><span class=\"annotation\">@75</span></span><span class=\"code even\" style=\"--layer: 16\" title=\"bb74: ../instrument-coverage/coverage_of_if_else.rs:44:9: 46:10:\n+    44:9-46:10: Assign: _49 = const ()\n+    44:9-46:10: Goto: goto -&gt; bb76\"><span class=\"annotation\">@74</span></span><span class=\"code even\" style=\"--layer: 17\" title=\"bb73: ../instrument-coverage/coverage_of_if_else.rs:44:9: 46:10:\n+    44:9-46:10: FalseEdge: falseEdge -&gt; [real: bb75, imaginary: bb74]\"><span class=\"annotation\">@73:</span> if </span><span class=\"code even\" style=\"--layer: 18\" title=\"bb67: ../instrument-coverage/coverage_of_if_else.rs:44:12: 44:60:\n+    44:46-44:60: StorageLive: StorageLive(_56)\n+    44:46-44:55: StorageLive: StorageLive(_57)\n+    44:46-44:55: Assign: _57 = _41\n+    44:46-44:60: Assign: _56 = Ne(move _57, const 9_i32)\n+    44:59-44:60: StorageDead: StorageDead(_57)\n+    44:12-44:60: SwitchInt: switchInt(move _56) -&gt; [false: bb66, otherwise: bb65]\"><span class=\"annotation\">@67</span></span><span class=\"code even\" style=\"--layer: 19\" title=\"bb68: ../instrument-coverage/coverage_of_if_else.rs:44:12: 44:60:\n+    44:59-44:60: StorageDead: StorageDead(_56)\n+    44:59-44:60: StorageDead: StorageDead(_51)\n+    44:12-44:60: FakeRead: FakeRead(ForMatchedPlace, _50)\n+    44:9-46:10: SwitchInt: switchInt(_50) -&gt; [false: bb74, otherwise: bb73]\"><span class=\"annotation\">@68</span></span><span class=\"code even\" style=\"--layer: 20\" title=\"bb65: ../instrument-coverage/coverage_of_if_else.rs:44:12: 44:60:\n+    44:12-44:60: Assign: _50 = const true\n+    44:12-44:60: Goto: goto -&gt; bb68\"><span class=\"annotation\">@65</span></span><span class=\"code even\" style=\"--layer: 21\" title=\"bb72: ../instrument-coverage/coverage_of_if_else.rs:44:12: 44:60:\n+    44:41-44:42: StorageDead: StorageDead(_54)\n+    44:41-44:42: StorageDead: StorageDead(_52)\n+    44:12-44:60: SwitchInt: switchInt(move _51) -&gt; [false: bb67, otherwise: bb65]\"><span class=\"annotation\">@72</span></span><span class=\"code even\" style=\"--layer: 22\" title=\"bb64: ../instrument-coverage/coverage_of_if_else.rs:44:12: 44:60:\n+    44:9-46:10: StorageLive: StorageLive(_49)\n+    44:12-44:60: StorageLive: StorageLive(_50)\n+    44:12-44:42: StorageLive: StorageLive(_51)\n+    44:12-44:25: StorageLive: StorageLive(_52)\n+    44:12-44:21: StorageLive: StorageLive(_53)\n+    44:12-44:21: Assign: _53 = _41\n+    44:12-44:25: Assign: _52 = Lt(move _53, const 1_i32)\n+    44:24-44:25: StorageDead: StorageDead(_53)\n+    44:12-44:42: SwitchInt: switchInt(move _52) -&gt; [false: bb71, otherwise: bb69]\"><span class=\"annotation\">@64</span></span><span class=\"code even\" style=\"--layer: 23\" title=\"bb66: ../instrument-coverage/coverage_of_if_else.rs:44:12: 44:60:\n+    44:12-44:60: Assign: _50 = const false\n+    44:12-44:60: Goto: goto -&gt; bb68\"><span class=\"annotation\">@66</span></span><span class=\"code even\" style=\"--layer: 24\" title=\"bb69: ../instrument-coverage/coverage_of_if_else.rs:44:12: 44:42:\n+    44:12-44:42: Assign: _51 = const true\n+    44:12-44:42: Goto: goto -&gt; bb72\"><span class=\"annotation\">@69</span></span><span class=\"code even\" style=\"--layer: 25\" title=\"bb71: ../instrument-coverage/coverage_of_if_else.rs:44:12: 44:42:\n+    44:29-44:42: StorageLive: StorageLive(_54)\n+    44:29-44:38: StorageLive: StorageLive(_55)\n+    44:29-44:38: Assign: _55 = _41\n+    44:29-44:42: Assign: _54 = Gt(move _55, const 5_i32)\n+    44:41-44:42: StorageDead: StorageDead(_55)\n+    44:12-44:42: SwitchInt: switchInt(move _54) -&gt; [false: bb70, otherwise: bb69]\"><span class=\"annotation\">@71</span></span><span class=\"code even\" style=\"--layer: 26\" title=\"bb70: ../instrument-coverage/coverage_of_if_else.rs:44:12: 44:42:\n+    44:12-44:42: Assign: _51 = const false\n+    44:12-44:42: Goto: goto -&gt; bb72\"><span class=\"annotation\">@70:</span> countdown &lt; 1 || countdown &gt; 5</span><span class=\"code even\" style=\"--layer: 23\" title=\"bb66: ../instrument-coverage/coverage_of_if_else.rs:44:12: 44:60:\n+    44:12-44:60: Assign: _50 = const false\n+    44:12-44:60: Goto: goto -&gt; bb68\"><span class=\"annotation\">@66:</span>  || countdown != 9</span><span class=\"code even\" style=\"--layer: 17\" title=\"bb73: ../instrument-coverage/coverage_of_if_else.rs:44:9: 46:10:\n+    44:9-46:10: FalseEdge: falseEdge -&gt; [real: bb75, imaginary: bb74]\"><span class=\"annotation\">@73:</span>  {</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 17\" title=\"bb73: ../instrument-coverage/coverage_of_if_else.rs:44:9: 46:10:\n+    44:9-46:10: FalseEdge: falseEdge -&gt; [real: bb75, imaginary: bb74]\">            countdown = 0;</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 17\" title=\"bb73: ../instrument-coverage/coverage_of_if_else.rs:44:9: 46:10:\n+    44:9-46:10: FalseEdge: falseEdge -&gt; [real: bb75, imaginary: bb74]\">        </span><span class=\"code odd\" style=\"--layer: 18\" title=\"bb76: ../instrument-coverage/coverage_of_if_else.rs:46:9: 47:23:\n+    46:9-46:10: StorageDead: StorageDead(_50)\n+    46:9-46:10: StorageDead: StorageDead(_49)\n+    47:9-47:23: Assign: _58 = CheckedSub(_41, const 5_i32)\n+    47:9-47:23: Assert: assert(!move (_58.1: bool), &quot;attempt to compute `{} - {}` which would overflow&quot;, _41, const 5_i32) -&gt; [success: bb77, unwind: bb1]\"><span class=\"annotation\">@76:</span> }</span></span>\n+<span class=\"line\"><span class=\"code odd\" style=\"--layer: 18\" title=\"bb76: ../instrument-coverage/coverage_of_if_else.rs:46:9: 47:23:\n+    46:9-46:10: StorageDead: StorageDead(_50)\n+    46:9-46:10: StorageDead: StorageDead(_49)\n+    47:9-47:23: Assign: _58 = CheckedSub(_41, const 5_i32)\n+    47:9-47:23: Assert: assert(!move (_58.1: bool), &quot;attempt to compute `{} - {}` which would overflow&quot;, _41, const 5_i32) -&gt; [success: bb77, unwind: bb1]\">        countdown -= 5</span><span class=\"code even\" style=\"--layer: 14\" title=\"bb62: ../instrument-coverage/coverage_of_if_else.rs:43:12: 50:6:\n+    43:12-50:6: FalseEdge: falseEdge -&gt; [real: bb64, imaginary: bb63]\"><span class=\"annotation\">@62:</span> ;</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 14\" title=\"bb62: ../instrument-coverage/coverage_of_if_else.rs:43:12: 50:6:\n+    43:12-50:6: FalseEdge: falseEdge -&gt; [real: bb64, imaginary: bb63]\">    } else {</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 14\" title=\"bb62: ../instrument-coverage/coverage_of_if_else.rs:43:12: 50:6:\n+    43:12-50:6: FalseEdge: falseEdge -&gt; [real: bb64, imaginary: bb63]\">        </span><span class=\"code even\" style=\"--layer: 15\" title=\"bb63: ../instrument-coverage/coverage_of_if_else.rs:49:9: 51:2:\n+    49:9-49:15: Assign: _0 = const ()\n+    50:5-50:6: StorageDead: StorageDead(_47)\n+    51:1-51:2: StorageDead: StorageDead(_41)\n+    51:1-51:2: StorageDead: StorageDead(_21)\n+    51:1-51:2: StorageDead: StorageDead(_1)\n+    51:1-51:2: StorageDead: StorageDead(_44)\n+    49:9-49:15: Goto: goto -&gt; bb26\"><span class=\"annotation\">@63:</span> return;</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 15\" title=\"bb63: ../instrument-coverage/coverage_of_if_else.rs:49:9: 51:2:\n+    49:9-49:15: Assign: _0 = const ()\n+    50:5-50:6: StorageDead: StorageDead(_47)\n+    51:1-51:2: StorageDead: StorageDead(_41)\n+    51:1-51:2: StorageDead: StorageDead(_21)\n+    51:1-51:2: StorageDead: StorageDead(_1)\n+    51:1-51:2: StorageDead: StorageDead(_44)\n+    49:9-49:15: Goto: goto -&gt; bb26\">    }</span><span class=\"code even\" style=\"--layer: 16\" title=\"bb78: ../instrument-coverage/coverage_of_if_else.rs:51:1: 51:2:\n+    51:1-51:2: StorageDead: StorageDead(_41)\n+    51:1-51:2: StorageDead: StorageDead(_21)\n+    51:1-51:2: StorageDead: StorageDead(_1)\n+    51:1-51:2: StorageDead: StorageDead(_44)\n+    51:2-51:2: Goto: goto -&gt; bb26\"><span class=\"annotation\">@78:</span> }</span><span><span class=\"code even\" style=\"--layer: 1\" title=\"bb26: ../instrument-coverage/coverage_of_if_else.rs:51:2: 51:2:\n+    51:2-51:2: Return: return\"><span class=\"annotation\">@26</span></span></span></span></div>\n+</body>\n+</html>"}, {"sha": "0578949b3c82026b30292bcb8126527d16c1e2a1", "filename": "src/test/run-make-fulldeps/instrument-coverage-mir-cov-html-link-dead-code/Makefile", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-mir-cov-html-link-dead-code%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-mir-cov-html-link-dead-code%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-mir-cov-html-link-dead-code%2FMakefile?ref=51d692cf7709de563cac6b5ee0080b8adf96f1df", "patch": "@@ -0,0 +1,11 @@\n+# needs-profiler-support\n+# ignore-msvc\n+\n+# LINK_DEAD_CODE requires ignore-msvc due to Issue #76038\n+LINK_DEAD_CODE=yes\n+\n+-include ../instrument-coverage-mir-cov-html-base/Makefile\n+\n+# ISSUE(76038): When targeting MSVC, Rust binaries built with both `-Z instrument-coverage` and\n+# `-C link-dead-code` typically crash (with a seg-fault) or at best generate an empty `*.profraw`.\n+# See ../instrument-coverage/coverage_tools.mk for more information.\n\\ No newline at end of file"}, {"sha": "faa5d65e7e78792e238fa5d635c2a45d21b994b7", "filename": "src/test/run-make-fulldeps/instrument-coverage-mir-cov-html-link-dead-code/expected_mir_dump.coverage_of_if_else/coverage_of_if_else.main.-------.InstrumentCoverage.0.html", "status": "added", "additions": 583, "deletions": 0, "changes": 583, "blob_url": "https://github.com/rust-lang/rust/blob/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-mir-cov-html-link-dead-code%2Fexpected_mir_dump.coverage_of_if_else%2Fcoverage_of_if_else.main.-------.InstrumentCoverage.0.html", "raw_url": "https://github.com/rust-lang/rust/raw/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-mir-cov-html-link-dead-code%2Fexpected_mir_dump.coverage_of_if_else%2Fcoverage_of_if_else.main.-------.InstrumentCoverage.0.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage-mir-cov-html-link-dead-code%2Fexpected_mir_dump.coverage_of_if_else%2Fcoverage_of_if_else.main.-------.InstrumentCoverage.0.html?ref=51d692cf7709de563cac6b5ee0080b8adf96f1df", "patch": "@@ -0,0 +1,583 @@\n+<!DOCTYPE html>\n+<html>\n+<head>\n+    <title>coverage_of_if_else - Code Regions</title>\n+    <style>\n+    .line {\n+        counter-increment: line;\n+    }\n+    .line:before {\n+        content: counter(line) \": \";\n+        font-family: Menlo, Monaco, monospace;\n+        font-style: italic;\n+        width: 3.8em;\n+        display: inline-block;\n+        text-align: right;\n+        filter: opacity(50%);\n+        -webkit-user-select: none;\n+    }\n+    .code {\n+        color: #dddddd;\n+        background-color: #222222;\n+        font-family: Menlo, Monaco, monospace;\n+        line-height: 1.4em;\n+        border-bottom: 2px solid #222222;\n+        white-space: pre;\n+        display: inline-block;\n+    }\n+    .odd {\n+        background-color: #55bbff;\n+        color: #223311;\n+    }\n+    .even {\n+        background-color: #ee7756;\n+        color: #551133;\n+    }\n+    .code {\n+        --index: calc(var(--layer) - 1);\n+        padding-top: calc(var(--index) * 0.15em);\n+        filter:\n+            hue-rotate(calc(var(--index) * 25deg))\n+            saturate(calc(100% - (var(--index) * 2%)))\n+            brightness(calc(100% - (var(--index) * 1.5%)));\n+    }\n+    .annotation {\n+        color: #4444ff;\n+        font-family: monospace;\n+        font-style: italic;\n+        display: none;\n+        -webkit-user-select: none;\n+    }\n+    body:active .annotation {\n+        /* requires holding mouse down anywhere on the page */\n+        display: inline-block;\n+    }\n+    span:hover .annotation {\n+        /* requires hover over a span ONLY on its first line */\n+        display: inline-block;\n+    }\n+    </style>\n+</head>\n+<body>\n+<div class=\"code\" style=\"counter-reset: line 2\"><span class=\"line\"><span class=\"code\" style=\"--layer: 0\">fn main() {</span></span>\n+<span class=\"line\"><span class=\"code\" style=\"--layer: 0\">    let mut countdown = 0;</span></span>\n+<span class=\"line\"><span class=\"code\" style=\"--layer: 0\">    </span><span><span class=\"code even\" style=\"--layer: 1\" title=\"bb2: ../instrument-coverage/coverage_of_if_else.rs:5:5: 7:6:\n+    5:5-7:6: FalseEdge: falseEdge -&gt; [real: bb4, imaginary: bb3]\"><span class=\"annotation\">@2</span></span></span><span class=\"code even\" style=\"--layer: 2\" title=\"bb4: ../instrument-coverage/coverage_of_if_else.rs:5:5: 7:6:\n+    6:9-6:23: Assign: _1 = const 10_i32\n+    5:13-7:6: Assign: _2 = const ()\n+    5:5-7:6: Goto: goto -&gt; bb5\"><span class=\"annotation\">@4</span></span><span class=\"code even\" style=\"--layer: 3\" title=\"bb3: ../instrument-coverage/coverage_of_if_else.rs:5:5: 7:6:\n+    5:5-7:6: Assign: _2 = const ()\n+    5:5-7:6: Goto: goto -&gt; bb5\"><span class=\"annotation\">@3:</span> if </span><span class=\"code even\" style=\"--layer: 4\" title=\"bb0: ../instrument-coverage/coverage_of_if_else.rs:5:8: 5:12:\n+    4:9-4:22: StorageLive: StorageLive(_1)\n+    4:25-4:26: Assign: _1 = const 0_i32\n+    4:9-4:22: FakeRead: FakeRead(ForLet, _1)\n+    5:5-7:6: StorageLive: StorageLive(_2)\n+    5:8-5:12: StorageLive: StorageLive(_3)\n+    5:8-5:12: Assign: _3 = const true\n+    5:8-5:12: FakeRead: FakeRead(ForMatchedPlace, _3)\n+    5:5-7:6: SwitchInt: switchInt(_3) -&gt; [false: bb3, otherwise: bb2]\"><span class=\"annotation\">@0:</span> true</span><span class=\"code even\" style=\"--layer: 3\" title=\"bb3: ../instrument-coverage/coverage_of_if_else.rs:5:5: 7:6:\n+    5:5-7:6: Assign: _2 = const ()\n+    5:5-7:6: Goto: goto -&gt; bb5\"><span class=\"annotation\">@3:</span>  {</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 3\" title=\"bb3: ../instrument-coverage/coverage_of_if_else.rs:5:5: 7:6:\n+    5:5-7:6: Assign: _2 = const ()\n+    5:5-7:6: Goto: goto -&gt; bb5\">        countdown = 10;</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 3\" title=\"bb3: ../instrument-coverage/coverage_of_if_else.rs:5:5: 7:6:\n+    5:5-7:6: Assign: _2 = const ()\n+    5:5-7:6: Goto: goto -&gt; bb5\">    }</span><span class=\"code\" style=\"--layer: 0\"></span></span>\n+<span class=\"line\"><span class=\"code\" style=\"--layer: 0\"></span></span>\n+<span class=\"line\"><span class=\"code\" style=\"--layer: 0\">    </span><span><span class=\"code even\" style=\"--layer: 1\" title=\"bb6: ../instrument-coverage/coverage_of_if_else.rs:9:5: 18:6:\n+    9:5-18:6: FalseEdge: falseEdge -&gt; [real: bb8, imaginary: bb7]\"><span class=\"annotation\">@6</span></span></span><span class=\"code even\" style=\"--layer: 2\" title=\"bb9: ../instrument-coverage/coverage_of_if_else.rs:9:5: 18:6:\n+    10:9-10:23: Assign: _1 = move (_7.0: i32)\n+    9:22-11:6: Assign: _4 = const ()\n+    9:5-18:6: Goto: goto -&gt; bb28\"><span class=\"annotation\">@9</span></span><span class=\"code even\" style=\"--layer: 3\" title=\"bb25: ../instrument-coverage/coverage_of_if_else.rs:9:5: 18:6:\n+    15:9-15:23: Assign: _1 = move (_19.0: i32)\n+    11:29-16:6: Assign: _4 = const ()\n+    18:5-18:6: StorageDead: StorageDead(_8)\n+    9:5-18:6: Goto: goto -&gt; bb28\"><span class=\"annotation\">@25:</span> if </span><span class=\"code even\" style=\"--layer: 4\" title=\"bb5: ../instrument-coverage/coverage_of_if_else.rs:9:8: 9:21:\n+    7:5-7:6: StorageDead: StorageDead(_3)\n+    7:5-7:6: StorageDead: StorageDead(_2)\n+    9:5-18:6: StorageLive: StorageLive(_4)\n+    9:8-9:21: StorageLive: StorageLive(_5)\n+    9:8-9:17: StorageLive: StorageLive(_6)\n+    9:8-9:17: Assign: _6 = _1\n+    9:8-9:21: Assign: _5 = Gt(move _6, const 7_i32)\n+    9:20-9:21: StorageDead: StorageDead(_6)\n+    9:8-9:21: FakeRead: FakeRead(ForMatchedPlace, _5)\n+    9:5-18:6: SwitchInt: switchInt(_5) -&gt; [false: bb7, otherwise: bb6]\"><span class=\"annotation\">@5:</span> countdown &gt; 7</span><span class=\"code even\" style=\"--layer: 3\" title=\"bb25: ../instrument-coverage/coverage_of_if_else.rs:9:5: 18:6:\n+    15:9-15:23: Assign: _1 = move (_19.0: i32)\n+    11:29-16:6: Assign: _4 = const ()\n+    18:5-18:6: StorageDead: StorageDead(_8)\n+    9:5-18:6: Goto: goto -&gt; bb28\"><span class=\"annotation\">@25:</span>  {</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 3\" title=\"bb25: ../instrument-coverage/coverage_of_if_else.rs:9:5: 18:6:\n+    15:9-15:23: Assign: _1 = move (_19.0: i32)\n+    11:29-16:6: Assign: _4 = const ()\n+    18:5-18:6: StorageDead: StorageDead(_8)\n+    9:5-18:6: Goto: goto -&gt; bb28\">        </span><span class=\"code odd\" style=\"--layer: 4\" title=\"bb8: ../instrument-coverage/coverage_of_if_else.rs:10:9: 10:23:\n+    10:9-10:23: Assign: _7 = CheckedSub(_1, const 4_i32)\n+    10:9-10:23: Assert: assert(!move (_7.1: bool), &quot;attempt to compute `{} - {}` which would overflow&quot;, _1, const 4_i32) -&gt; [success: bb9, unwind: bb1]\"><span class=\"annotation\">@8:</span> countdown -= 4</span><span class=\"code even\" style=\"--layer: 3\" title=\"bb25: ../instrument-coverage/coverage_of_if_else.rs:9:5: 18:6:\n+    15:9-15:23: Assign: _1 = move (_19.0: i32)\n+    11:29-16:6: Assign: _4 = const ()\n+    18:5-18:6: StorageDead: StorageDead(_8)\n+    9:5-18:6: Goto: goto -&gt; bb28\"><span class=\"annotation\">@25:</span> ;</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 3\" title=\"bb25: ../instrument-coverage/coverage_of_if_else.rs:9:5: 18:6:\n+    15:9-15:23: Assign: _1 = move (_19.0: i32)\n+    11:29-16:6: Assign: _4 = const ()\n+    18:5-18:6: StorageDead: StorageDead(_8)\n+    9:5-18:6: Goto: goto -&gt; bb28\">    } else </span><span class=\"code even\" style=\"--layer: 4\" title=\"bb10: ../instrument-coverage/coverage_of_if_else.rs:11:12: 18:6:\n+    11:12-18:6: FalseEdge: falseEdge -&gt; [real: bb12, imaginary: bb11]\"><span class=\"annotation\">@10:</span> if </span><span class=\"code even\" style=\"--layer: 5\" title=\"bb7: ../instrument-coverage/coverage_of_if_else.rs:11:15: 11:28:\n+    11:15-11:28: StorageLive: StorageLive(_8)\n+    11:15-11:24: StorageLive: StorageLive(_9)\n+    11:15-11:24: Assign: _9 = _1\n+    11:15-11:28: Assign: _8 = Gt(move _9, const 2_i32)\n+    11:27-11:28: StorageDead: StorageDead(_9)\n+    11:15-11:28: FakeRead: FakeRead(ForMatchedPlace, _8)\n+    11:12-18:6: SwitchInt: switchInt(_8) -&gt; [false: bb11, otherwise: bb10]\"><span class=\"annotation\">@7:</span> countdown &gt; 2</span><span class=\"code even\" style=\"--layer: 4\" title=\"bb10: ../instrument-coverage/coverage_of_if_else.rs:11:12: 18:6:\n+    11:12-18:6: FalseEdge: falseEdge -&gt; [real: bb12, imaginary: bb11]\"><span class=\"annotation\">@10:</span>  {</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 4\" title=\"bb10: ../instrument-coverage/coverage_of_if_else.rs:11:12: 18:6:\n+    11:12-18:6: FalseEdge: falseEdge -&gt; [real: bb12, imaginary: bb11]\">        </span><span class=\"code odd\" style=\"--layer: 5\" title=\"bb22: ../instrument-coverage/coverage_of_if_else.rs:12:9: 14:10:\n+    12:9-14:10: Assign: _10 = const ()\n+    12:9-14:10: Goto: goto -&gt; bb24\"><span class=\"annotation\">@22</span></span><span class=\"code even\" style=\"--layer: 6\" title=\"bb23: ../instrument-coverage/coverage_of_if_else.rs:12:9: 14:10:\n+    13:13-13:26: Assign: _1 = const 0_i32\n+    12:61-14:10: Assign: _10 = const ()\n+    12:9-14:10: Goto: goto -&gt; bb24\"><span class=\"annotation\">@23</span></span><span class=\"code even\" style=\"--layer: 7\" title=\"bb21: ../instrument-coverage/coverage_of_if_else.rs:12:9: 14:10:\n+    12:9-14:10: FalseEdge: falseEdge -&gt; [real: bb23, imaginary: bb22]\"><span class=\"annotation\">@21:</span> if </span><span class=\"code even\" style=\"--layer: 8\" title=\"bb14: ../instrument-coverage/coverage_of_if_else.rs:12:12: 12:60:\n+    12:12-12:60: Assign: _11 = const false\n+    12:12-12:60: Goto: goto -&gt; bb16\"><span class=\"annotation\">@14</span></span><span class=\"code even\" style=\"--layer: 9\" title=\"bb15: ../instrument-coverage/coverage_of_if_else.rs:12:12: 12:60:\n+    12:46-12:60: StorageLive: StorageLive(_17)\n+    12:46-12:55: StorageLive: StorageLive(_18)\n+    12:46-12:55: Assign: _18 = _1\n+    12:46-12:60: Assign: _17 = Ne(move _18, const 9_i32)\n+    12:59-12:60: StorageDead: StorageDead(_18)\n+    12:12-12:60: SwitchInt: switchInt(move _17) -&gt; [false: bb14, otherwise: bb13]\"><span class=\"annotation\">@15</span></span><span class=\"code even\" style=\"--layer: 10\" title=\"bb16: ../instrument-coverage/coverage_of_if_else.rs:12:12: 12:60:\n+    12:59-12:60: StorageDead: StorageDead(_17)\n+    12:59-12:60: StorageDead: StorageDead(_12)\n+    12:12-12:60: FakeRead: FakeRead(ForMatchedPlace, _11)\n+    12:9-14:10: SwitchInt: switchInt(_11) -&gt; [false: bb22, otherwise: bb21]\"><span class=\"annotation\">@16</span></span><span class=\"code even\" style=\"--layer: 11\" title=\"bb13: ../instrument-coverage/coverage_of_if_else.rs:12:12: 12:60:\n+    12:12-12:60: Assign: _11 = const true\n+    12:12-12:60: Goto: goto -&gt; bb16\"><span class=\"annotation\">@13</span></span><span class=\"code even\" style=\"--layer: 12\" title=\"bb20: ../instrument-coverage/coverage_of_if_else.rs:12:12: 12:60:\n+    12:41-12:42: StorageDead: StorageDead(_15)\n+    12:41-12:42: StorageDead: StorageDead(_13)\n+    12:12-12:60: SwitchInt: switchInt(move _12) -&gt; [false: bb15, otherwise: bb13]\"><span class=\"annotation\">@20</span></span><span class=\"code even\" style=\"--layer: 13\" title=\"bb12: ../instrument-coverage/coverage_of_if_else.rs:12:12: 12:60:\n+    12:9-14:10: StorageLive: StorageLive(_10)\n+    12:12-12:60: StorageLive: StorageLive(_11)\n+    12:12-12:42: StorageLive: StorageLive(_12)\n+    12:12-12:25: StorageLive: StorageLive(_13)\n+    12:12-12:21: StorageLive: StorageLive(_14)\n+    12:12-12:21: Assign: _14 = _1\n+    12:12-12:25: Assign: _13 = Lt(move _14, const 1_i32)\n+    12:24-12:25: StorageDead: StorageDead(_14)\n+    12:12-12:42: SwitchInt: switchInt(move _13) -&gt; [false: bb19, otherwise: bb17]\"><span class=\"annotation\">@12</span></span><span class=\"code even\" style=\"--layer: 14\" title=\"bb18: ../instrument-coverage/coverage_of_if_else.rs:12:12: 12:42:\n+    12:12-12:42: Assign: _12 = const false\n+    12:12-12:42: Goto: goto -&gt; bb20\"><span class=\"annotation\">@18</span></span><span class=\"code even\" style=\"--layer: 15\" title=\"bb19: ../instrument-coverage/coverage_of_if_else.rs:12:12: 12:42:\n+    12:29-12:42: StorageLive: StorageLive(_15)\n+    12:29-12:38: StorageLive: StorageLive(_16)\n+    12:29-12:38: Assign: _16 = _1\n+    12:29-12:42: Assign: _15 = Gt(move _16, const 5_i32)\n+    12:41-12:42: StorageDead: StorageDead(_16)\n+    12:12-12:42: SwitchInt: switchInt(move _15) -&gt; [false: bb18, otherwise: bb17]\"><span class=\"annotation\">@19</span></span><span class=\"code even\" style=\"--layer: 16\" title=\"bb17: ../instrument-coverage/coverage_of_if_else.rs:12:12: 12:42:\n+    12:12-12:42: Assign: _12 = const true\n+    12:12-12:42: Goto: goto -&gt; bb20\"><span class=\"annotation\">@17:</span> countdown &lt; 1 || countdown &gt; 5</span><span class=\"code even\" style=\"--layer: 13\" title=\"bb12: ../instrument-coverage/coverage_of_if_else.rs:12:12: 12:60:\n+    12:9-14:10: StorageLive: StorageLive(_10)\n+    12:12-12:60: StorageLive: StorageLive(_11)\n+    12:12-12:42: StorageLive: StorageLive(_12)\n+    12:12-12:25: StorageLive: StorageLive(_13)\n+    12:12-12:21: StorageLive: StorageLive(_14)\n+    12:12-12:21: Assign: _14 = _1\n+    12:12-12:25: Assign: _13 = Lt(move _14, const 1_i32)\n+    12:24-12:25: StorageDead: StorageDead(_14)\n+    12:12-12:42: SwitchInt: switchInt(move _13) -&gt; [false: bb19, otherwise: bb17]\"><span class=\"annotation\">@12:</span>  || countdown != 9</span><span class=\"code even\" style=\"--layer: 7\" title=\"bb21: ../instrument-coverage/coverage_of_if_else.rs:12:9: 14:10:\n+    12:9-14:10: FalseEdge: falseEdge -&gt; [real: bb23, imaginary: bb22]\"><span class=\"annotation\">@21:</span>  {</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 7\" title=\"bb21: ../instrument-coverage/coverage_of_if_else.rs:12:9: 14:10:\n+    12:9-14:10: FalseEdge: falseEdge -&gt; [real: bb23, imaginary: bb22]\">            countdown = 0;</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 7\" title=\"bb21: ../instrument-coverage/coverage_of_if_else.rs:12:9: 14:10:\n+    12:9-14:10: FalseEdge: falseEdge -&gt; [real: bb23, imaginary: bb22]\">        </span><span class=\"code odd\" style=\"--layer: 8\" title=\"bb24: ../instrument-coverage/coverage_of_if_else.rs:14:9: 15:23:\n+    14:9-14:10: StorageDead: StorageDead(_11)\n+    14:9-14:10: StorageDead: StorageDead(_10)\n+    15:9-15:23: Assign: _19 = CheckedSub(_1, const 5_i32)\n+    15:9-15:23: Assert: assert(!move (_19.1: bool), &quot;attempt to compute `{} - {}` which would overflow&quot;, _1, const 5_i32) -&gt; [success: bb25, unwind: bb1]\"><span class=\"annotation\">@24:</span> }</span></span>\n+<span class=\"line\"><span class=\"code odd\" style=\"--layer: 8\" title=\"bb24: ../instrument-coverage/coverage_of_if_else.rs:14:9: 15:23:\n+    14:9-14:10: StorageDead: StorageDead(_11)\n+    14:9-14:10: StorageDead: StorageDead(_10)\n+    15:9-15:23: Assign: _19 = CheckedSub(_1, const 5_i32)\n+    15:9-15:23: Assert: assert(!move (_19.1: bool), &quot;attempt to compute `{} - {}` which would overflow&quot;, _1, const 5_i32) -&gt; [success: bb25, unwind: bb1]\">        countdown -= 5</span><span class=\"code even\" style=\"--layer: 4\" title=\"bb10: ../instrument-coverage/coverage_of_if_else.rs:11:12: 18:6:\n+    11:12-18:6: FalseEdge: falseEdge -&gt; [real: bb12, imaginary: bb11]\"><span class=\"annotation\">@10:</span> ;</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 4\" title=\"bb10: ../instrument-coverage/coverage_of_if_else.rs:11:12: 18:6:\n+    11:12-18:6: FalseEdge: falseEdge -&gt; [real: bb12, imaginary: bb11]\">    } else {</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 4\" title=\"bb10: ../instrument-coverage/coverage_of_if_else.rs:11:12: 18:6:\n+    11:12-18:6: FalseEdge: falseEdge -&gt; [real: bb12, imaginary: bb11]\">        </span><span class=\"code even\" style=\"--layer: 5\" title=\"bb27: ../instrument-coverage/coverage_of_if_else.rs:17:9: 51:2:\n+    51:1-51:2: StorageDead: StorageDead(_1)\n+    17:9-17:15: Goto: goto -&gt; bb26\"><span class=\"annotation\">@27</span></span><span class=\"code even\" style=\"--layer: 6\" title=\"bb11: ../instrument-coverage/coverage_of_if_else.rs:17:9: 18:6:\n+    17:9-17:15: Assign: _0 = const ()\n+    18:5-18:6: StorageDead: StorageDead(_8)\n+    18:5-18:6: StorageDead: StorageDead(_5)\n+    18:5-18:6: StorageDead: StorageDead(_4)\n+    17:9-17:15: Goto: goto -&gt; bb27\"><span class=\"annotation\">@11:</span> return;</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 6\" title=\"bb11: ../instrument-coverage/coverage_of_if_else.rs:17:9: 18:6:\n+    17:9-17:15: Assign: _0 = const ()\n+    18:5-18:6: StorageDead: StorageDead(_8)\n+    18:5-18:6: StorageDead: StorageDead(_5)\n+    18:5-18:6: StorageDead: StorageDead(_4)\n+    17:9-17:15: Goto: goto -&gt; bb27\">    }</span><span class=\"code even\" style=\"--layer: 5\" title=\"bb27: ../instrument-coverage/coverage_of_if_else.rs:17:9: 51:2:\n+    51:1-51:2: StorageDead: StorageDead(_1)\n+    17:9-17:15: Goto: goto -&gt; bb26\"><span class=\"annotation\">@27:</span> </span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 5\" title=\"bb27: ../instrument-coverage/coverage_of_if_else.rs:17:9: 51:2:\n+    51:1-51:2: StorageDead: StorageDead(_1)\n+    17:9-17:15: Goto: goto -&gt; bb26\"></span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 5\" title=\"bb27: ../instrument-coverage/coverage_of_if_else.rs:17:9: 51:2:\n+    51:1-51:2: StorageDead: StorageDead(_1)\n+    17:9-17:15: Goto: goto -&gt; bb26\">    let mut countdown = 0;</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 5\" title=\"bb27: ../instrument-coverage/coverage_of_if_else.rs:17:9: 51:2:\n+    51:1-51:2: StorageDead: StorageDead(_1)\n+    17:9-17:15: Goto: goto -&gt; bb26\">    </span><span class=\"code odd\" style=\"--layer: 6\" title=\"bb30: ../instrument-coverage/coverage_of_if_else.rs:21:5: 23:6:\n+    21:5-23:6: Assign: _22 = const ()\n+    21:5-23:6: Goto: goto -&gt; bb32\"><span class=\"annotation\">@30</span></span><span class=\"code even\" style=\"--layer: 7\" title=\"bb31: ../instrument-coverage/coverage_of_if_else.rs:21:5: 23:6:\n+    22:9-22:23: Assign: _21 = const 10_i32\n+    21:13-23:6: Assign: _22 = const ()\n+    21:5-23:6: Goto: goto -&gt; bb32\"><span class=\"annotation\">@31</span></span><span class=\"code even\" style=\"--layer: 8\" title=\"bb29: ../instrument-coverage/coverage_of_if_else.rs:21:5: 23:6:\n+    21:5-23:6: FalseEdge: falseEdge -&gt; [real: bb31, imaginary: bb30]\"><span class=\"annotation\">@29:</span> if </span><span class=\"code even\" style=\"--layer: 9\" title=\"bb28: ../instrument-coverage/coverage_of_if_else.rs:21:8: 21:12:\n+    18:5-18:6: StorageDead: StorageDead(_5)\n+    18:5-18:6: StorageDead: StorageDead(_4)\n+    20:9-20:22: StorageLive: StorageLive(_21)\n+    20:25-20:26: Assign: _21 = const 0_i32\n+    20:9-20:22: FakeRead: FakeRead(ForLet, _21)\n+    21:5-23:6: StorageLive: StorageLive(_22)\n+    21:8-21:12: StorageLive: StorageLive(_23)\n+    21:8-21:12: Assign: _23 = const true\n+    21:8-21:12: FakeRead: FakeRead(ForMatchedPlace, _23)\n+    21:5-23:6: SwitchInt: switchInt(_23) -&gt; [false: bb30, otherwise: bb29]\"><span class=\"annotation\">@28:</span> true</span><span class=\"code even\" style=\"--layer: 8\" title=\"bb29: ../instrument-coverage/coverage_of_if_else.rs:21:5: 23:6:\n+    21:5-23:6: FalseEdge: falseEdge -&gt; [real: bb31, imaginary: bb30]\"><span class=\"annotation\">@29:</span>  {</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 8\" title=\"bb29: ../instrument-coverage/coverage_of_if_else.rs:21:5: 23:6:\n+    21:5-23:6: FalseEdge: falseEdge -&gt; [real: bb31, imaginary: bb30]\">        countdown = 10;</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 8\" title=\"bb29: ../instrument-coverage/coverage_of_if_else.rs:21:5: 23:6:\n+    21:5-23:6: FalseEdge: falseEdge -&gt; [real: bb31, imaginary: bb30]\">    }</span><span class=\"code even\" style=\"--layer: 5\" title=\"bb27: ../instrument-coverage/coverage_of_if_else.rs:17:9: 51:2:\n+    51:1-51:2: StorageDead: StorageDead(_1)\n+    17:9-17:15: Goto: goto -&gt; bb26\"><span class=\"annotation\">@27:</span> </span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 5\" title=\"bb27: ../instrument-coverage/coverage_of_if_else.rs:17:9: 51:2:\n+    51:1-51:2: StorageDead: StorageDead(_1)\n+    17:9-17:15: Goto: goto -&gt; bb26\"></span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 5\" title=\"bb27: ../instrument-coverage/coverage_of_if_else.rs:17:9: 51:2:\n+    51:1-51:2: StorageDead: StorageDead(_1)\n+    17:9-17:15: Goto: goto -&gt; bb26\">    </span><span class=\"code even\" style=\"--layer: 6\" title=\"bb33: ../instrument-coverage/coverage_of_if_else.rs:25:5: 34:6:\n+    25:5-34:6: FalseEdge: falseEdge -&gt; [real: bb35, imaginary: bb34]\"><span class=\"annotation\">@33</span></span><span class=\"code even\" style=\"--layer: 7\" title=\"bb52: ../instrument-coverage/coverage_of_if_else.rs:25:5: 34:6:\n+    31:9-31:23: Assign: _21 = move (_39.0: i32)\n+    27:29-32:6: Assign: _24 = const ()\n+    34:5-34:6: StorageDead: StorageDead(_28)\n+    25:5-34:6: Goto: goto -&gt; bb53\"><span class=\"annotation\">@52</span></span><span class=\"code even\" style=\"--layer: 8\" title=\"bb36: ../instrument-coverage/coverage_of_if_else.rs:25:5: 34:6:\n+    26:9-26:23: Assign: _21 = move (_27.0: i32)\n+    25:22-27:6: Assign: _24 = const ()\n+    25:5-34:6: Goto: goto -&gt; bb53\"><span class=\"annotation\">@36:</span> if </span><span class=\"code even\" style=\"--layer: 9\" title=\"bb32: ../instrument-coverage/coverage_of_if_else.rs:25:8: 25:21:\n+    23:5-23:6: StorageDead: StorageDead(_23)\n+    23:5-23:6: StorageDead: StorageDead(_22)\n+    25:5-34:6: StorageLive: StorageLive(_24)\n+    25:8-25:21: StorageLive: StorageLive(_25)\n+    25:8-25:17: StorageLive: StorageLive(_26)\n+    25:8-25:17: Assign: _26 = _21\n+    25:8-25:21: Assign: _25 = Gt(move _26, const 7_i32)\n+    25:20-25:21: StorageDead: StorageDead(_26)\n+    25:8-25:21: FakeRead: FakeRead(ForMatchedPlace, _25)\n+    25:5-34:6: SwitchInt: switchInt(_25) -&gt; [false: bb34, otherwise: bb33]\"><span class=\"annotation\">@32:</span> countdown &gt; 7</span><span class=\"code even\" style=\"--layer: 8\" title=\"bb36: ../instrument-coverage/coverage_of_if_else.rs:25:5: 34:6:\n+    26:9-26:23: Assign: _21 = move (_27.0: i32)\n+    25:22-27:6: Assign: _24 = const ()\n+    25:5-34:6: Goto: goto -&gt; bb53\"><span class=\"annotation\">@36:</span>  {</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 8\" title=\"bb36: ../instrument-coverage/coverage_of_if_else.rs:25:5: 34:6:\n+    26:9-26:23: Assign: _21 = move (_27.0: i32)\n+    25:22-27:6: Assign: _24 = const ()\n+    25:5-34:6: Goto: goto -&gt; bb53\">        </span><span class=\"code odd\" style=\"--layer: 9\" title=\"bb35: ../instrument-coverage/coverage_of_if_else.rs:26:9: 26:23:\n+    26:9-26:23: Assign: _27 = CheckedSub(_21, const 4_i32)\n+    26:9-26:23: Assert: assert(!move (_27.1: bool), &quot;attempt to compute `{} - {}` which would overflow&quot;, _21, const 4_i32) -&gt; [success: bb36, unwind: bb1]\"><span class=\"annotation\">@35:</span> countdown -= 4</span><span class=\"code even\" style=\"--layer: 8\" title=\"bb36: ../instrument-coverage/coverage_of_if_else.rs:25:5: 34:6:\n+    26:9-26:23: Assign: _21 = move (_27.0: i32)\n+    25:22-27:6: Assign: _24 = const ()\n+    25:5-34:6: Goto: goto -&gt; bb53\"><span class=\"annotation\">@36:</span> ;</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 8\" title=\"bb36: ../instrument-coverage/coverage_of_if_else.rs:25:5: 34:6:\n+    26:9-26:23: Assign: _21 = move (_27.0: i32)\n+    25:22-27:6: Assign: _24 = const ()\n+    25:5-34:6: Goto: goto -&gt; bb53\">    } else </span><span class=\"code even\" style=\"--layer: 9\" title=\"bb37: ../instrument-coverage/coverage_of_if_else.rs:27:12: 34:6:\n+    27:12-34:6: FalseEdge: falseEdge -&gt; [real: bb39, imaginary: bb38]\"><span class=\"annotation\">@37:</span> if </span><span class=\"code even\" style=\"--layer: 10\" title=\"bb34: ../instrument-coverage/coverage_of_if_else.rs:27:15: 27:28:\n+    27:15-27:28: StorageLive: StorageLive(_28)\n+    27:15-27:24: StorageLive: StorageLive(_29)\n+    27:15-27:24: Assign: _29 = _21\n+    27:15-27:28: Assign: _28 = Gt(move _29, const 2_i32)\n+    27:27-27:28: StorageDead: StorageDead(_29)\n+    27:15-27:28: FakeRead: FakeRead(ForMatchedPlace, _28)\n+    27:12-34:6: SwitchInt: switchInt(_28) -&gt; [false: bb38, otherwise: bb37]\"><span class=\"annotation\">@34:</span> countdown &gt; 2</span><span class=\"code even\" style=\"--layer: 9\" title=\"bb37: ../instrument-coverage/coverage_of_if_else.rs:27:12: 34:6:\n+    27:12-34:6: FalseEdge: falseEdge -&gt; [real: bb39, imaginary: bb38]\"><span class=\"annotation\">@37:</span>  {</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 9\" title=\"bb37: ../instrument-coverage/coverage_of_if_else.rs:27:12: 34:6:\n+    27:12-34:6: FalseEdge: falseEdge -&gt; [real: bb39, imaginary: bb38]\">        </span><span class=\"code odd\" style=\"--layer: 10\" title=\"bb48: ../instrument-coverage/coverage_of_if_else.rs:28:9: 30:10:\n+    28:9-30:10: FalseEdge: falseEdge -&gt; [real: bb50, imaginary: bb49]\"><span class=\"annotation\">@48</span></span><span class=\"code even\" style=\"--layer: 11\" title=\"bb50: ../instrument-coverage/coverage_of_if_else.rs:28:9: 30:10:\n+    29:13-29:26: Assign: _21 = const 0_i32\n+    28:61-30:10: Assign: _30 = const ()\n+    28:9-30:10: Goto: goto -&gt; bb51\"><span class=\"annotation\">@50</span></span><span class=\"code even\" style=\"--layer: 12\" title=\"bb49: ../instrument-coverage/coverage_of_if_else.rs:28:9: 30:10:\n+    28:9-30:10: Assign: _30 = const ()\n+    28:9-30:10: Goto: goto -&gt; bb51\"><span class=\"annotation\">@49:</span> if </span><span class=\"code even\" style=\"--layer: 13\" title=\"bb39: ../instrument-coverage/coverage_of_if_else.rs:28:12: 28:60:\n+    28:9-30:10: StorageLive: StorageLive(_30)\n+    28:12-28:60: StorageLive: StorageLive(_31)\n+    28:12-28:42: StorageLive: StorageLive(_32)\n+    28:12-28:25: StorageLive: StorageLive(_33)\n+    28:12-28:21: StorageLive: StorageLive(_34)\n+    28:12-28:21: Assign: _34 = _21\n+    28:12-28:25: Assign: _33 = Lt(move _34, const 1_i32)\n+    28:24-28:25: StorageDead: StorageDead(_34)\n+    28:12-28:42: SwitchInt: switchInt(move _33) -&gt; [false: bb46, otherwise: bb44]\"><span class=\"annotation\">@39</span></span><span class=\"code even\" style=\"--layer: 14\" title=\"bb47: ../instrument-coverage/coverage_of_if_else.rs:28:12: 28:60:\n+    28:41-28:42: StorageDead: StorageDead(_35)\n+    28:41-28:42: StorageDead: StorageDead(_33)\n+    28:12-28:60: SwitchInt: switchInt(move _32) -&gt; [false: bb42, otherwise: bb40]\"><span class=\"annotation\">@47</span></span><span class=\"code even\" style=\"--layer: 15\" title=\"bb40: ../instrument-coverage/coverage_of_if_else.rs:28:12: 28:60:\n+    28:12-28:60: Assign: _31 = const true\n+    28:12-28:60: Goto: goto -&gt; bb43\"><span class=\"annotation\">@40</span></span><span class=\"code even\" style=\"--layer: 16\" title=\"bb43: ../instrument-coverage/coverage_of_if_else.rs:28:12: 28:60:\n+    28:59-28:60: StorageDead: StorageDead(_37)\n+    28:59-28:60: StorageDead: StorageDead(_32)\n+    28:12-28:60: FakeRead: FakeRead(ForMatchedPlace, _31)\n+    28:9-30:10: SwitchInt: switchInt(_31) -&gt; [false: bb49, otherwise: bb48]\"><span class=\"annotation\">@43</span></span><span class=\"code even\" style=\"--layer: 17\" title=\"bb42: ../instrument-coverage/coverage_of_if_else.rs:28:12: 28:60:\n+    28:46-28:60: StorageLive: StorageLive(_37)\n+    28:46-28:55: StorageLive: StorageLive(_38)\n+    28:46-28:55: Assign: _38 = _21\n+    28:46-28:60: Assign: _37 = Ne(move _38, const 9_i32)\n+    28:59-28:60: StorageDead: StorageDead(_38)\n+    28:12-28:60: SwitchInt: switchInt(move _37) -&gt; [false: bb41, otherwise: bb40]\"><span class=\"annotation\">@42</span></span><span class=\"code even\" style=\"--layer: 18\" title=\"bb41: ../instrument-coverage/coverage_of_if_else.rs:28:12: 28:60:\n+    28:12-28:60: Assign: _31 = const false\n+    28:12-28:60: Goto: goto -&gt; bb43\"><span class=\"annotation\">@41</span></span><span class=\"code even\" style=\"--layer: 19\" title=\"bb46: ../instrument-coverage/coverage_of_if_else.rs:28:12: 28:42:\n+    28:29-28:42: StorageLive: StorageLive(_35)\n+    28:29-28:38: StorageLive: StorageLive(_36)\n+    28:29-28:38: Assign: _36 = _21\n+    28:29-28:42: Assign: _35 = Gt(move _36, const 5_i32)\n+    28:41-28:42: StorageDead: StorageDead(_36)\n+    28:12-28:42: SwitchInt: switchInt(move _35) -&gt; [false: bb45, otherwise: bb44]\"><span class=\"annotation\">@46</span></span><span class=\"code even\" style=\"--layer: 20\" title=\"bb45: ../instrument-coverage/coverage_of_if_else.rs:28:12: 28:42:\n+    28:12-28:42: Assign: _32 = const false\n+    28:12-28:42: Goto: goto -&gt; bb47\"><span class=\"annotation\">@45</span></span><span class=\"code even\" style=\"--layer: 21\" title=\"bb44: ../instrument-coverage/coverage_of_if_else.rs:28:12: 28:42:\n+    28:12-28:42: Assign: _32 = const true\n+    28:12-28:42: Goto: goto -&gt; bb47\"><span class=\"annotation\">@44:</span> countdown &lt; 1 || countdown &gt; 5</span><span class=\"code even\" style=\"--layer: 18\" title=\"bb41: ../instrument-coverage/coverage_of_if_else.rs:28:12: 28:60:\n+    28:12-28:60: Assign: _31 = const false\n+    28:12-28:60: Goto: goto -&gt; bb43\"><span class=\"annotation\">@41:</span>  || countdown != 9</span><span class=\"code even\" style=\"--layer: 12\" title=\"bb49: ../instrument-coverage/coverage_of_if_else.rs:28:9: 30:10:\n+    28:9-30:10: Assign: _30 = const ()\n+    28:9-30:10: Goto: goto -&gt; bb51\"><span class=\"annotation\">@49:</span>  {</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 12\" title=\"bb49: ../instrument-coverage/coverage_of_if_else.rs:28:9: 30:10:\n+    28:9-30:10: Assign: _30 = const ()\n+    28:9-30:10: Goto: goto -&gt; bb51\">            countdown = 0;</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 12\" title=\"bb49: ../instrument-coverage/coverage_of_if_else.rs:28:9: 30:10:\n+    28:9-30:10: Assign: _30 = const ()\n+    28:9-30:10: Goto: goto -&gt; bb51\">        </span><span class=\"code odd\" style=\"--layer: 13\" title=\"bb51: ../instrument-coverage/coverage_of_if_else.rs:30:9: 31:23:\n+    30:9-30:10: StorageDead: StorageDead(_31)\n+    30:9-30:10: StorageDead: StorageDead(_30)\n+    31:9-31:23: Assign: _39 = CheckedSub(_21, const 5_i32)\n+    31:9-31:23: Assert: assert(!move (_39.1: bool), &quot;attempt to compute `{} - {}` which would overflow&quot;, _21, const 5_i32) -&gt; [success: bb52, unwind: bb1]\"><span class=\"annotation\">@51:</span> }</span></span>\n+<span class=\"line\"><span class=\"code odd\" style=\"--layer: 13\" title=\"bb51: ../instrument-coverage/coverage_of_if_else.rs:30:9: 31:23:\n+    30:9-30:10: StorageDead: StorageDead(_31)\n+    30:9-30:10: StorageDead: StorageDead(_30)\n+    31:9-31:23: Assign: _39 = CheckedSub(_21, const 5_i32)\n+    31:9-31:23: Assert: assert(!move (_39.1: bool), &quot;attempt to compute `{} - {}` which would overflow&quot;, _21, const 5_i32) -&gt; [success: bb52, unwind: bb1]\">        countdown -= 5</span><span class=\"code even\" style=\"--layer: 9\" title=\"bb37: ../instrument-coverage/coverage_of_if_else.rs:27:12: 34:6:\n+    27:12-34:6: FalseEdge: falseEdge -&gt; [real: bb39, imaginary: bb38]\"><span class=\"annotation\">@37:</span> ;</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 9\" title=\"bb37: ../instrument-coverage/coverage_of_if_else.rs:27:12: 34:6:\n+    27:12-34:6: FalseEdge: falseEdge -&gt; [real: bb39, imaginary: bb38]\">    } else {</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 9\" title=\"bb37: ../instrument-coverage/coverage_of_if_else.rs:27:12: 34:6:\n+    27:12-34:6: FalseEdge: falseEdge -&gt; [real: bb39, imaginary: bb38]\">        </span><span class=\"code even\" style=\"--layer: 10\" title=\"bb38: ../instrument-coverage/coverage_of_if_else.rs:33:9: 51:2:\n+    33:9-33:15: Assign: _0 = const ()\n+    34:5-34:6: StorageDead: StorageDead(_28)\n+    34:5-34:6: StorageDead: StorageDead(_25)\n+    34:5-34:6: StorageDead: StorageDead(_24)\n+    51:1-51:2: StorageDead: StorageDead(_21)\n+    33:9-33:15: Goto: goto -&gt; bb27\"><span class=\"annotation\">@38:</span> return;</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 10\" title=\"bb38: ../instrument-coverage/coverage_of_if_else.rs:33:9: 51:2:\n+    33:9-33:15: Assign: _0 = const ()\n+    34:5-34:6: StorageDead: StorageDead(_28)\n+    34:5-34:6: StorageDead: StorageDead(_25)\n+    34:5-34:6: StorageDead: StorageDead(_24)\n+    51:1-51:2: StorageDead: StorageDead(_21)\n+    33:9-33:15: Goto: goto -&gt; bb27\">    }</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 10\" title=\"bb38: ../instrument-coverage/coverage_of_if_else.rs:33:9: 51:2:\n+    33:9-33:15: Assign: _0 = const ()\n+    34:5-34:6: StorageDead: StorageDead(_28)\n+    34:5-34:6: StorageDead: StorageDead(_25)\n+    34:5-34:6: StorageDead: StorageDead(_24)\n+    51:1-51:2: StorageDead: StorageDead(_21)\n+    33:9-33:15: Goto: goto -&gt; bb27\"></span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 10\" title=\"bb38: ../instrument-coverage/coverage_of_if_else.rs:33:9: 51:2:\n+    33:9-33:15: Assign: _0 = const ()\n+    34:5-34:6: StorageDead: StorageDead(_28)\n+    34:5-34:6: StorageDead: StorageDead(_25)\n+    34:5-34:6: StorageDead: StorageDead(_24)\n+    51:1-51:2: StorageDead: StorageDead(_21)\n+    33:9-33:15: Goto: goto -&gt; bb27\">    let mut countdown = 0;</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 10\" title=\"bb38: ../instrument-coverage/coverage_of_if_else.rs:33:9: 51:2:\n+    33:9-33:15: Assign: _0 = const ()\n+    34:5-34:6: StorageDead: StorageDead(_28)\n+    34:5-34:6: StorageDead: StorageDead(_25)\n+    34:5-34:6: StorageDead: StorageDead(_24)\n+    51:1-51:2: StorageDead: StorageDead(_21)\n+    33:9-33:15: Goto: goto -&gt; bb27\">    </span><span class=\"code even\" style=\"--layer: 11\" title=\"bb56: ../instrument-coverage/coverage_of_if_else.rs:37:5: 39:6:\n+    38:9-38:23: Assign: _41 = const 10_i32\n+    37:13-39:6: Assign: _42 = const ()\n+    37:5-39:6: Goto: goto -&gt; bb57\"><span class=\"annotation\">@56</span></span><span class=\"code even\" style=\"--layer: 12\" title=\"bb54: ../instrument-coverage/coverage_of_if_else.rs:37:5: 39:6:\n+    37:5-39:6: FalseEdge: falseEdge -&gt; [real: bb56, imaginary: bb55]\"><span class=\"annotation\">@54</span></span><span class=\"code even\" style=\"--layer: 13\" title=\"bb55: ../instrument-coverage/coverage_of_if_else.rs:37:5: 39:6:\n+    37:5-39:6: Assign: _42 = const ()\n+    37:5-39:6: Goto: goto -&gt; bb57\"><span class=\"annotation\">@55:</span> if </span><span class=\"code even\" style=\"--layer: 14\" title=\"bb53: ../instrument-coverage/coverage_of_if_else.rs:37:8: 37:12:\n+    34:5-34:6: StorageDead: StorageDead(_25)\n+    34:5-34:6: StorageDead: StorageDead(_24)\n+    36:9-36:22: StorageLive: StorageLive(_41)\n+    36:25-36:26: Assign: _41 = const 0_i32\n+    36:9-36:22: FakeRead: FakeRead(ForLet, _41)\n+    37:5-39:6: StorageLive: StorageLive(_42)\n+    37:8-37:12: StorageLive: StorageLive(_43)\n+    37:8-37:12: Assign: _43 = const true\n+    37:8-37:12: FakeRead: FakeRead(ForMatchedPlace, _43)\n+    37:5-39:6: SwitchInt: switchInt(_43) -&gt; [false: bb55, otherwise: bb54]\"><span class=\"annotation\">@53:</span> true</span><span class=\"code even\" style=\"--layer: 13\" title=\"bb55: ../instrument-coverage/coverage_of_if_else.rs:37:5: 39:6:\n+    37:5-39:6: Assign: _42 = const ()\n+    37:5-39:6: Goto: goto -&gt; bb57\"><span class=\"annotation\">@55:</span>  {</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 13\" title=\"bb55: ../instrument-coverage/coverage_of_if_else.rs:37:5: 39:6:\n+    37:5-39:6: Assign: _42 = const ()\n+    37:5-39:6: Goto: goto -&gt; bb57\">        countdown = 10;</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 13\" title=\"bb55: ../instrument-coverage/coverage_of_if_else.rs:37:5: 39:6:\n+    37:5-39:6: Assign: _42 = const ()\n+    37:5-39:6: Goto: goto -&gt; bb57\">    }</span><span class=\"code even\" style=\"--layer: 10\" title=\"bb38: ../instrument-coverage/coverage_of_if_else.rs:33:9: 51:2:\n+    33:9-33:15: Assign: _0 = const ()\n+    34:5-34:6: StorageDead: StorageDead(_28)\n+    34:5-34:6: StorageDead: StorageDead(_25)\n+    34:5-34:6: StorageDead: StorageDead(_24)\n+    51:1-51:2: StorageDead: StorageDead(_21)\n+    33:9-33:15: Goto: goto -&gt; bb27\"><span class=\"annotation\">@38:</span> </span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 10\" title=\"bb38: ../instrument-coverage/coverage_of_if_else.rs:33:9: 51:2:\n+    33:9-33:15: Assign: _0 = const ()\n+    34:5-34:6: StorageDead: StorageDead(_28)\n+    34:5-34:6: StorageDead: StorageDead(_25)\n+    34:5-34:6: StorageDead: StorageDead(_24)\n+    51:1-51:2: StorageDead: StorageDead(_21)\n+    33:9-33:15: Goto: goto -&gt; bb27\"></span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 10\" title=\"bb38: ../instrument-coverage/coverage_of_if_else.rs:33:9: 51:2:\n+    33:9-33:15: Assign: _0 = const ()\n+    34:5-34:6: StorageDead: StorageDead(_28)\n+    34:5-34:6: StorageDead: StorageDead(_25)\n+    34:5-34:6: StorageDead: StorageDead(_24)\n+    51:1-51:2: StorageDead: StorageDead(_21)\n+    33:9-33:15: Goto: goto -&gt; bb27\">    </span><span class=\"code odd\" style=\"--layer: 11\" title=\"bb61: ../instrument-coverage/coverage_of_if_else.rs:41:5: 50:6:\n+    42:9-42:23: Assign: _41 = move (_46.0: i32)\n+    41:22-43:6: Assign: _0 = const ()\n+    41:5-50:6: Goto: goto -&gt; bb78\"><span class=\"annotation\">@61</span></span><span class=\"code even\" style=\"--layer: 12\" title=\"bb58: ../instrument-coverage/coverage_of_if_else.rs:41:5: 50:6:\n+    41:5-50:6: FalseEdge: falseEdge -&gt; [real: bb60, imaginary: bb59]\"><span class=\"annotation\">@58</span></span><span class=\"code even\" style=\"--layer: 13\" title=\"bb77: ../instrument-coverage/coverage_of_if_else.rs:41:5: 50:6:\n+    47:9-47:23: Assign: _41 = move (_58.0: i32)\n+    43:29-48:6: Assign: _0 = const ()\n+    50:5-50:6: StorageDead: StorageDead(_47)\n+    41:5-50:6: Goto: goto -&gt; bb78\"><span class=\"annotation\">@77:</span> if </span><span class=\"code even\" style=\"--layer: 14\" title=\"bb57: ../instrument-coverage/coverage_of_if_else.rs:41:8: 41:21:\n+    39:5-39:6: StorageDead: StorageDead(_43)\n+    39:5-39:6: StorageDead: StorageDead(_42)\n+    41:8-41:21: StorageLive: StorageLive(_44)\n+    41:8-41:17: StorageLive: StorageLive(_45)\n+    41:8-41:17: Assign: _45 = _41\n+    41:8-41:21: Assign: _44 = Gt(move _45, const 7_i32)\n+    41:20-41:21: StorageDead: StorageDead(_45)\n+    41:8-41:21: FakeRead: FakeRead(ForMatchedPlace, _44)\n+    41:5-50:6: SwitchInt: switchInt(_44) -&gt; [false: bb59, otherwise: bb58]\"><span class=\"annotation\">@57:</span> countdown &gt; 7</span><span class=\"code even\" style=\"--layer: 13\" title=\"bb77: ../instrument-coverage/coverage_of_if_else.rs:41:5: 50:6:\n+    47:9-47:23: Assign: _41 = move (_58.0: i32)\n+    43:29-48:6: Assign: _0 = const ()\n+    50:5-50:6: StorageDead: StorageDead(_47)\n+    41:5-50:6: Goto: goto -&gt; bb78\"><span class=\"annotation\">@77:</span>  {</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 13\" title=\"bb77: ../instrument-coverage/coverage_of_if_else.rs:41:5: 50:6:\n+    47:9-47:23: Assign: _41 = move (_58.0: i32)\n+    43:29-48:6: Assign: _0 = const ()\n+    50:5-50:6: StorageDead: StorageDead(_47)\n+    41:5-50:6: Goto: goto -&gt; bb78\">        </span><span class=\"code odd\" style=\"--layer: 14\" title=\"bb60: ../instrument-coverage/coverage_of_if_else.rs:42:9: 42:23:\n+    42:9-42:23: Assign: _46 = CheckedSub(_41, const 4_i32)\n+    42:9-42:23: Assert: assert(!move (_46.1: bool), &quot;attempt to compute `{} - {}` which would overflow&quot;, _41, const 4_i32) -&gt; [success: bb61, unwind: bb1]\"><span class=\"annotation\">@60:</span> countdown -= 4</span><span class=\"code even\" style=\"--layer: 13\" title=\"bb77: ../instrument-coverage/coverage_of_if_else.rs:41:5: 50:6:\n+    47:9-47:23: Assign: _41 = move (_58.0: i32)\n+    43:29-48:6: Assign: _0 = const ()\n+    50:5-50:6: StorageDead: StorageDead(_47)\n+    41:5-50:6: Goto: goto -&gt; bb78\"><span class=\"annotation\">@77:</span> ;</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 13\" title=\"bb77: ../instrument-coverage/coverage_of_if_else.rs:41:5: 50:6:\n+    47:9-47:23: Assign: _41 = move (_58.0: i32)\n+    43:29-48:6: Assign: _0 = const ()\n+    50:5-50:6: StorageDead: StorageDead(_47)\n+    41:5-50:6: Goto: goto -&gt; bb78\">    } else </span><span class=\"code even\" style=\"--layer: 14\" title=\"bb62: ../instrument-coverage/coverage_of_if_else.rs:43:12: 50:6:\n+    43:12-50:6: FalseEdge: falseEdge -&gt; [real: bb64, imaginary: bb63]\"><span class=\"annotation\">@62:</span> if </span><span class=\"code even\" style=\"--layer: 15\" title=\"bb59: ../instrument-coverage/coverage_of_if_else.rs:43:15: 43:28:\n+    43:15-43:28: StorageLive: StorageLive(_47)\n+    43:15-43:24: StorageLive: StorageLive(_48)\n+    43:15-43:24: Assign: _48 = _41\n+    43:15-43:28: Assign: _47 = Gt(move _48, const 2_i32)\n+    43:27-43:28: StorageDead: StorageDead(_48)\n+    43:15-43:28: FakeRead: FakeRead(ForMatchedPlace, _47)\n+    43:12-50:6: SwitchInt: switchInt(_47) -&gt; [false: bb63, otherwise: bb62]\"><span class=\"annotation\">@59:</span> countdown &gt; 2</span><span class=\"code even\" style=\"--layer: 14\" title=\"bb62: ../instrument-coverage/coverage_of_if_else.rs:43:12: 50:6:\n+    43:12-50:6: FalseEdge: falseEdge -&gt; [real: bb64, imaginary: bb63]\"><span class=\"annotation\">@62:</span>  {</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 14\" title=\"bb62: ../instrument-coverage/coverage_of_if_else.rs:43:12: 50:6:\n+    43:12-50:6: FalseEdge: falseEdge -&gt; [real: bb64, imaginary: bb63]\">        </span><span class=\"code odd\" style=\"--layer: 15\" title=\"bb75: ../instrument-coverage/coverage_of_if_else.rs:44:9: 46:10:\n+    45:13-45:26: Assign: _41 = const 0_i32\n+    44:61-46:10: Assign: _49 = const ()\n+    44:9-46:10: Goto: goto -&gt; bb76\"><span class=\"annotation\">@75</span></span><span class=\"code even\" style=\"--layer: 16\" title=\"bb74: ../instrument-coverage/coverage_of_if_else.rs:44:9: 46:10:\n+    44:9-46:10: Assign: _49 = const ()\n+    44:9-46:10: Goto: goto -&gt; bb76\"><span class=\"annotation\">@74</span></span><span class=\"code even\" style=\"--layer: 17\" title=\"bb73: ../instrument-coverage/coverage_of_if_else.rs:44:9: 46:10:\n+    44:9-46:10: FalseEdge: falseEdge -&gt; [real: bb75, imaginary: bb74]\"><span class=\"annotation\">@73:</span> if </span><span class=\"code even\" style=\"--layer: 18\" title=\"bb67: ../instrument-coverage/coverage_of_if_else.rs:44:12: 44:60:\n+    44:46-44:60: StorageLive: StorageLive(_56)\n+    44:46-44:55: StorageLive: StorageLive(_57)\n+    44:46-44:55: Assign: _57 = _41\n+    44:46-44:60: Assign: _56 = Ne(move _57, const 9_i32)\n+    44:59-44:60: StorageDead: StorageDead(_57)\n+    44:12-44:60: SwitchInt: switchInt(move _56) -&gt; [false: bb66, otherwise: bb65]\"><span class=\"annotation\">@67</span></span><span class=\"code even\" style=\"--layer: 19\" title=\"bb68: ../instrument-coverage/coverage_of_if_else.rs:44:12: 44:60:\n+    44:59-44:60: StorageDead: StorageDead(_56)\n+    44:59-44:60: StorageDead: StorageDead(_51)\n+    44:12-44:60: FakeRead: FakeRead(ForMatchedPlace, _50)\n+    44:9-46:10: SwitchInt: switchInt(_50) -&gt; [false: bb74, otherwise: bb73]\"><span class=\"annotation\">@68</span></span><span class=\"code even\" style=\"--layer: 20\" title=\"bb65: ../instrument-coverage/coverage_of_if_else.rs:44:12: 44:60:\n+    44:12-44:60: Assign: _50 = const true\n+    44:12-44:60: Goto: goto -&gt; bb68\"><span class=\"annotation\">@65</span></span><span class=\"code even\" style=\"--layer: 21\" title=\"bb72: ../instrument-coverage/coverage_of_if_else.rs:44:12: 44:60:\n+    44:41-44:42: StorageDead: StorageDead(_54)\n+    44:41-44:42: StorageDead: StorageDead(_52)\n+    44:12-44:60: SwitchInt: switchInt(move _51) -&gt; [false: bb67, otherwise: bb65]\"><span class=\"annotation\">@72</span></span><span class=\"code even\" style=\"--layer: 22\" title=\"bb64: ../instrument-coverage/coverage_of_if_else.rs:44:12: 44:60:\n+    44:9-46:10: StorageLive: StorageLive(_49)\n+    44:12-44:60: StorageLive: StorageLive(_50)\n+    44:12-44:42: StorageLive: StorageLive(_51)\n+    44:12-44:25: StorageLive: StorageLive(_52)\n+    44:12-44:21: StorageLive: StorageLive(_53)\n+    44:12-44:21: Assign: _53 = _41\n+    44:12-44:25: Assign: _52 = Lt(move _53, const 1_i32)\n+    44:24-44:25: StorageDead: StorageDead(_53)\n+    44:12-44:42: SwitchInt: switchInt(move _52) -&gt; [false: bb71, otherwise: bb69]\"><span class=\"annotation\">@64</span></span><span class=\"code even\" style=\"--layer: 23\" title=\"bb66: ../instrument-coverage/coverage_of_if_else.rs:44:12: 44:60:\n+    44:12-44:60: Assign: _50 = const false\n+    44:12-44:60: Goto: goto -&gt; bb68\"><span class=\"annotation\">@66</span></span><span class=\"code even\" style=\"--layer: 24\" title=\"bb69: ../instrument-coverage/coverage_of_if_else.rs:44:12: 44:42:\n+    44:12-44:42: Assign: _51 = const true\n+    44:12-44:42: Goto: goto -&gt; bb72\"><span class=\"annotation\">@69</span></span><span class=\"code even\" style=\"--layer: 25\" title=\"bb71: ../instrument-coverage/coverage_of_if_else.rs:44:12: 44:42:\n+    44:29-44:42: StorageLive: StorageLive(_54)\n+    44:29-44:38: StorageLive: StorageLive(_55)\n+    44:29-44:38: Assign: _55 = _41\n+    44:29-44:42: Assign: _54 = Gt(move _55, const 5_i32)\n+    44:41-44:42: StorageDead: StorageDead(_55)\n+    44:12-44:42: SwitchInt: switchInt(move _54) -&gt; [false: bb70, otherwise: bb69]\"><span class=\"annotation\">@71</span></span><span class=\"code even\" style=\"--layer: 26\" title=\"bb70: ../instrument-coverage/coverage_of_if_else.rs:44:12: 44:42:\n+    44:12-44:42: Assign: _51 = const false\n+    44:12-44:42: Goto: goto -&gt; bb72\"><span class=\"annotation\">@70:</span> countdown &lt; 1 || countdown &gt; 5</span><span class=\"code even\" style=\"--layer: 23\" title=\"bb66: ../instrument-coverage/coverage_of_if_else.rs:44:12: 44:60:\n+    44:12-44:60: Assign: _50 = const false\n+    44:12-44:60: Goto: goto -&gt; bb68\"><span class=\"annotation\">@66:</span>  || countdown != 9</span><span class=\"code even\" style=\"--layer: 17\" title=\"bb73: ../instrument-coverage/coverage_of_if_else.rs:44:9: 46:10:\n+    44:9-46:10: FalseEdge: falseEdge -&gt; [real: bb75, imaginary: bb74]\"><span class=\"annotation\">@73:</span>  {</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 17\" title=\"bb73: ../instrument-coverage/coverage_of_if_else.rs:44:9: 46:10:\n+    44:9-46:10: FalseEdge: falseEdge -&gt; [real: bb75, imaginary: bb74]\">            countdown = 0;</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 17\" title=\"bb73: ../instrument-coverage/coverage_of_if_else.rs:44:9: 46:10:\n+    44:9-46:10: FalseEdge: falseEdge -&gt; [real: bb75, imaginary: bb74]\">        </span><span class=\"code odd\" style=\"--layer: 18\" title=\"bb76: ../instrument-coverage/coverage_of_if_else.rs:46:9: 47:23:\n+    46:9-46:10: StorageDead: StorageDead(_50)\n+    46:9-46:10: StorageDead: StorageDead(_49)\n+    47:9-47:23: Assign: _58 = CheckedSub(_41, const 5_i32)\n+    47:9-47:23: Assert: assert(!move (_58.1: bool), &quot;attempt to compute `{} - {}` which would overflow&quot;, _41, const 5_i32) -&gt; [success: bb77, unwind: bb1]\"><span class=\"annotation\">@76:</span> }</span></span>\n+<span class=\"line\"><span class=\"code odd\" style=\"--layer: 18\" title=\"bb76: ../instrument-coverage/coverage_of_if_else.rs:46:9: 47:23:\n+    46:9-46:10: StorageDead: StorageDead(_50)\n+    46:9-46:10: StorageDead: StorageDead(_49)\n+    47:9-47:23: Assign: _58 = CheckedSub(_41, const 5_i32)\n+    47:9-47:23: Assert: assert(!move (_58.1: bool), &quot;attempt to compute `{} - {}` which would overflow&quot;, _41, const 5_i32) -&gt; [success: bb77, unwind: bb1]\">        countdown -= 5</span><span class=\"code even\" style=\"--layer: 14\" title=\"bb62: ../instrument-coverage/coverage_of_if_else.rs:43:12: 50:6:\n+    43:12-50:6: FalseEdge: falseEdge -&gt; [real: bb64, imaginary: bb63]\"><span class=\"annotation\">@62:</span> ;</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 14\" title=\"bb62: ../instrument-coverage/coverage_of_if_else.rs:43:12: 50:6:\n+    43:12-50:6: FalseEdge: falseEdge -&gt; [real: bb64, imaginary: bb63]\">    } else {</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 14\" title=\"bb62: ../instrument-coverage/coverage_of_if_else.rs:43:12: 50:6:\n+    43:12-50:6: FalseEdge: falseEdge -&gt; [real: bb64, imaginary: bb63]\">        </span><span class=\"code even\" style=\"--layer: 15\" title=\"bb63: ../instrument-coverage/coverage_of_if_else.rs:49:9: 51:2:\n+    49:9-49:15: Assign: _0 = const ()\n+    50:5-50:6: StorageDead: StorageDead(_47)\n+    51:1-51:2: StorageDead: StorageDead(_41)\n+    51:1-51:2: StorageDead: StorageDead(_21)\n+    51:1-51:2: StorageDead: StorageDead(_1)\n+    51:1-51:2: StorageDead: StorageDead(_44)\n+    49:9-49:15: Goto: goto -&gt; bb26\"><span class=\"annotation\">@63:</span> return;</span></span>\n+<span class=\"line\"><span class=\"code even\" style=\"--layer: 15\" title=\"bb63: ../instrument-coverage/coverage_of_if_else.rs:49:9: 51:2:\n+    49:9-49:15: Assign: _0 = const ()\n+    50:5-50:6: StorageDead: StorageDead(_47)\n+    51:1-51:2: StorageDead: StorageDead(_41)\n+    51:1-51:2: StorageDead: StorageDead(_21)\n+    51:1-51:2: StorageDead: StorageDead(_1)\n+    51:1-51:2: StorageDead: StorageDead(_44)\n+    49:9-49:15: Goto: goto -&gt; bb26\">    }</span><span class=\"code even\" style=\"--layer: 16\" title=\"bb78: ../instrument-coverage/coverage_of_if_else.rs:51:1: 51:2:\n+    51:1-51:2: StorageDead: StorageDead(_41)\n+    51:1-51:2: StorageDead: StorageDead(_21)\n+    51:1-51:2: StorageDead: StorageDead(_1)\n+    51:1-51:2: StorageDead: StorageDead(_44)\n+    51:2-51:2: Goto: goto -&gt; bb26\"><span class=\"annotation\">@78:</span> }</span><span><span class=\"code even\" style=\"--layer: 1\" title=\"bb26: ../instrument-coverage/coverage_of_if_else.rs:51:2: 51:2:\n+    51:2-51:2: Return: return\"><span class=\"annotation\">@26</span></span></span></span></div>\n+</body>\n+</html>"}, {"sha": "4392cfec080dcb0fdcef38d0de01feb6d3ccc6df", "filename": "src/test/run-make-fulldeps/instrument-coverage/Makefile", "status": "removed", "additions": 0, "deletions": 103, "changes": 103, "blob_url": "https://github.com/rust-lang/rust/blob/e36e4bd0f7e722d3c97d1ca45387e58f81e4e8ea/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/e36e4bd0f7e722d3c97d1ca45387e58f81e4e8ea/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage%2FMakefile?ref=e36e4bd0f7e722d3c97d1ca45387e58f81e4e8ea", "patch": "@@ -1,103 +0,0 @@\n-# needs-profiler-support\n-# ignore-msvc\n-\n-# FIXME(richkadel): Debug the following problem, and reenable on Windows (by\n-# removing the `# ignore-msvc` directive above). The current implementation\n-# generates a segfault when running the instrumented `testprog` executable,\n-# after the `main()` function completes, but before the process terminates.\n-# This most likely points to a problem generating the LLVM \"testprog.profraw\"\n-# file.\n-\n--include ../tools.mk\n-\n-UNAME = $(shell uname)\n-\n-ifeq ($(UNAME),Darwin)\n-\tINSTR_PROF_DATA_SUFFIX=,regular,live_support\n-\tDATA_SECTION_PREFIX=__DATA,\n-\tLLVM_COV_SECTION_PREFIX=__LLVM_COV,\n-else\n-\tINSTR_PROF_DATA_SUFFIX=\n-\tDATA_SECTION_PREFIX=\n-\tLLVM_COV_SECTION_PREFIX=\n-endif\n-\n-# This test makes sure that LLVM coverage maps are genereated in LLVM IR.\n-\n-COMMON_FLAGS=-Zinstrument-coverage\n-\n-all:\n-\t# Compile the test program with instrumentation, and also generate LLVM IR\n-\t$(RUSTC) $(COMMON_FLAGS) testprog.rs \\\n-\t\t\t--emit=link,llvm-ir\n-\n-\t# check the LLVM IR\n-ifdef IS_WIN32\n-\tcat \"$(TMPDIR)\"/testprog.ll | \"$(LLVM_FILECHECK)\" filecheck-patterns.txt \\\n-\t\t\t-check-prefixes=CHECK,WIN32 \\\n-\t\t\t-DPRIVATE_GLOBAL=\"internal global\" \\\n-\t\t\t-DINSTR_PROF_DATA=\".lprfd$$M\" \\\n-\t\t\t-DINSTR_PROF_NAME=\".lprfn$$M\" \\\n-\t\t\t-DINSTR_PROF_CNTS=\".lprfc$$M\" \\\n-\t\t\t-DINSTR_PROF_VALS=\".lprfv$$M\" \\\n-\t\t\t-DINSTR_PROF_VNODES=\".lprfnd$$M\" \\\n-\t\t\t-DINSTR_PROF_COVMAP=\".lcovmap$$M\" \\\n-\t\t\t-DINSTR_PROF_ORDERFILE=\".lorderfile$$M\"\n-else\n-\tcat \"$(TMPDIR)\"/testprog.ll | \"$(LLVM_FILECHECK)\" filecheck-patterns.txt \\\n-\t\t\t-check-prefixes=CHECK \\\n-\t\t\t-DPRIVATE_GLOBAL=\"private global\" \\\n-\t\t\t-DINSTR_PROF_DATA=\"$(DATA_SECTION_PREFIX)__llvm_prf_data$(INSTR_PROF_DATA_SUFFIX)\" \\\n-\t\t\t-DINSTR_PROF_NAME=\"$(DATA_SECTION_PREFIX)__llvm_prf_names\" \\\n-\t\t\t-DINSTR_PROF_CNTS=\"$(DATA_SECTION_PREFIX)__llvm_prf_cnts\" \\\n-\t\t\t-DINSTR_PROF_VALS=\"$(DATA_SECTION_PREFIX)__llvm_prf_vals\" \\\n-\t\t\t-DINSTR_PROF_VNODES=\"$(DATA_SECTION_PREFIX)__llvm_prf_vnds\" \\\n-\t\t\t-DINSTR_PROF_COVMAP=\"$(LLVM_COV_SECTION_PREFIX)__llvm_covmap\" \\\n-\t\t\t-DINSTR_PROF_ORDERFILE=\"$(DATA_SECTION_PREFIX)__llvm_orderfile\"\n-endif\n-\n-\t# Run it in order to generate some profiling data,\n-\t# with `LLVM_PROFILE_FILE=<profdata_file>` environment variable set to\n-\t# output the coverage stats for this run.\n-\tLLVM_PROFILE_FILE=\"$(TMPDIR)\"/testprog.profraw \\\n-\t\t\t$(call RUN,testprog)\n-\n-\t# Postprocess the profiling data so it can be used by the llvm-cov tool\n-\t\"$(LLVM_BIN_DIR)\"/llvm-profdata merge --sparse \\\n-\t\t\t\"$(TMPDIR)\"/testprog.profraw \\\n-\t\t\t-o \"$(TMPDIR)\"/testprog.profdata\n-\n-\t# Generate a coverage report using `llvm-cov show`. The output ordering\n-\t# can be non-deterministic, so ignore the return status. If the test fails\n-\t# when comparing the JSON `export`, the `show` output may be useful when\n-\t# debugging.\n-\t\"$(LLVM_BIN_DIR)\"/llvm-cov show \\\n-\t\t\t--Xdemangler=\"$(RUST_DEMANGLER)\" \\\n-\t\t\t--show-line-counts-or-regions \\\n-\t\t\t--instr-profile=\"$(TMPDIR)\"/testprog.profdata \\\n-\t\t\t$(call BIN,\"$(TMPDIR)\"/testprog) \\\n-\t\t> \"$(TMPDIR)\"/actual_show_coverage.txt\n-\n-ifdef RUSTC_BLESS_TEST\n-\tcp \"$(TMPDIR)\"/actual_show_coverage.txt typical_show_coverage.txt\n-else\n-\t# Compare the show coverage output\n-\t$(DIFF) typical_show_coverage.txt \"$(TMPDIR)\"/actual_show_coverage.txt || \\\n-\t\t>&2 echo 'diff failed for `llvm-cov show` (might not be an error)'\n-endif\n-\n-\t# Generate a coverage report in JSON, using `llvm-cov export`, and fail if\n-\t# there are differences from the expected output.\n-\t\"$(LLVM_BIN_DIR)\"/llvm-cov export \\\n-\t\t\t--summary-only \\\n-\t\t\t--instr-profile=\"$(TMPDIR)\"/testprog.profdata \\\n-\t\t\t$(call BIN,\"$(TMPDIR)\"/testprog) \\\n-\t\t| \"$(PYTHON)\" prettify_json.py \\\n-\t\t> \"$(TMPDIR)\"/actual_export_coverage.json\n-\n-ifdef RUSTC_BLESS_TEST\n-\tcp \"$(TMPDIR)\"/actual_export_coverage.json expected_export_coverage.json\n-else\n-\t# Check that the exported JSON coverage data matches what we expect\n-\t$(DIFF) expected_export_coverage.json \"$(TMPDIR)\"/actual_export_coverage.json\n-endif"}, {"sha": "d57f66a44898ea28702612b58625316ae2e133b4", "filename": "src/test/run-make-fulldeps/instrument-coverage/compiletest-ignore-dir", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage%2Fcompiletest-ignore-dir", "raw_url": "https://github.com/rust-lang/rust/raw/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage%2Fcompiletest-ignore-dir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage%2Fcompiletest-ignore-dir?ref=51d692cf7709de563cac6b5ee0080b8adf96f1df", "patch": "@@ -0,0 +1,3 @@\n+# Directory \"instrument-coverage\" supports the tests at prefix ../instrument-coverage-*\n+\n+# Use ./x.py [options] test src/test/run-make-fulldeps/instrument-coverage to run all related tests.\n\\ No newline at end of file"}, {"sha": "91741cf8f0dcc246b1fd3760f4317e119bc705d6", "filename": "src/test/run-make-fulldeps/instrument-coverage/coverage_of_if_else.rs", "status": "added", "additions": 51, "deletions": 0, "changes": 51, "blob_url": "https://github.com/rust-lang/rust/blob/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage%2Fcoverage_of_if_else.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage%2Fcoverage_of_if_else.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage%2Fcoverage_of_if_else.rs?ref=51d692cf7709de563cac6b5ee0080b8adf96f1df", "patch": "@@ -0,0 +1,51 @@\n+#![allow(unused_assignments)]\n+\n+fn main() {\n+    let mut countdown = 0;\n+    if true {\n+        countdown = 10;\n+    }\n+\n+    if countdown > 7 {\n+        countdown -= 4;\n+    } else if countdown > 2 {\n+        if countdown < 1 || countdown > 5 || countdown != 9 {\n+            countdown = 0;\n+        }\n+        countdown -= 5;\n+    } else {\n+        return;\n+    }\n+\n+    let mut countdown = 0;\n+    if true {\n+        countdown = 10;\n+    }\n+\n+    if countdown > 7 {\n+        countdown -= 4;\n+    } else if countdown > 2 {\n+        if countdown < 1 || countdown > 5 || countdown != 9 {\n+            countdown = 0;\n+        }\n+        countdown -= 5;\n+    } else {\n+        return;\n+    }\n+\n+    let mut countdown = 0;\n+    if true {\n+        countdown = 10;\n+    }\n+\n+    if countdown > 7 {\n+        countdown -= 4;\n+    } else if countdown > 2 {\n+        if countdown < 1 || countdown > 5 || countdown != 9 {\n+            countdown = 0;\n+        }\n+        countdown -= 5;\n+    } else {\n+        return;\n+    }\n+}"}, {"sha": "ad5f465c54f4acc9c1581b99718270c9009675e4", "filename": "src/test/run-make-fulldeps/instrument-coverage/coverage_tools.mk", "status": "added", "additions": 39, "deletions": 0, "changes": 39, "blob_url": "https://github.com/rust-lang/rust/blob/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage%2Fcoverage_tools.mk", "raw_url": "https://github.com/rust-lang/rust/raw/51d692cf7709de563cac6b5ee0080b8adf96f1df/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage%2Fcoverage_tools.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage%2Fcoverage_tools.mk?ref=51d692cf7709de563cac6b5ee0080b8adf96f1df", "patch": "@@ -0,0 +1,39 @@\n+# Common Makefile include for Rust `run-make-fulldeps/instrument-coverage-* tests. Include this\n+# file with the line:\n+#\n+# -include ../instrument-coverage/coverage_tools.mk\n+#\n+# To enable the Rust compiler option `-C link-dead-code`, also set the following variable\n+# *BEFORE* the `-include` line:\n+#\n+# LINK_DEAD_CODE=yes\n+\n+-include ../tools.mk\n+\n+ifndef LINK_DEAD_CODE\n+\tLINK_DEAD_CODE=no\n+endif\n+\n+# ISSUE(76038): When targeting MSVC, Rust binaries built with both `-Z instrument-coverage` and\n+# `-C link-dead-code` typically crash (with a seg-fault) or at best generate an empty `*.profraw`\n+# file, required for coverage reports.\n+#\n+# Enabling `-C link-dead-code` is preferred when compiling with `-Z instrument-coverage`, so\n+# `-C link-dead-code` is automatically enabled for all platform targets _except_ MSVC.\n+#\n+# Making the state of `-C link-dead-code` platform-dependent creates a problem for cross-platform\n+# tests because the injected counters, coverage reports, and some low-level output can be different,\n+# depending on the `-C link-dead-code` setting. For example, coverage reports will not report any\n+# coverage for a dead code region when the `-C link-dead-code` option is disabled, but with the\n+# option enabled, those same regions will show coverage counter values (of zero, of course).\n+#\n+# To ensure cross-platform `-Z instrument-coverage` generate consistent output, the\n+# `-C link-dead-code` option is always explicitly enabled or disabled.\n+#\n+# Since tests that execute binaries enabled with both `-Z instrument-coverage` and\n+# `-C link-dead-code` are known to fail, those tests will need the `# ignore-msvc` setting.\n+#\n+# If and when the above issue is resolved, the `# ignore-msvc` option can be removed, and the\n+# tests can be simplified to always test with `-C link-dead-code`.\n+\n+UNAME = $(shell uname)"}, {"sha": "75bec80bdf8864a12540aaa863cbbec986302ce6", "filename": "src/test/run-make-fulldeps/instrument-coverage/expected_export_coverage.json", "status": "removed", "additions": 0, "deletions": 59, "changes": 59, "blob_url": "https://github.com/rust-lang/rust/blob/e36e4bd0f7e722d3c97d1ca45387e58f81e4e8ea/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage%2Fexpected_export_coverage.json", "raw_url": "https://github.com/rust-lang/rust/raw/e36e4bd0f7e722d3c97d1ca45387e58f81e4e8ea/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage%2Fexpected_export_coverage.json", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage%2Fexpected_export_coverage.json?ref=e36e4bd0f7e722d3c97d1ca45387e58f81e4e8ea", "patch": "@@ -1,59 +0,0 @@\n-{\n-  \"data\": [\n-    {\n-      \"files\": [\n-        {\n-          \"filename\": \"testprog.rs\",\n-          \"summary\": {\n-            \"functions\": {\n-              \"count\": 7,\n-              \"covered\": 5,\n-              \"percent\": 71.42857142857143\n-            },\n-            \"instantiations\": {\n-              \"count\": 8,\n-              \"covered\": 6,\n-              \"percent\": 75\n-            },\n-            \"lines\": {\n-              \"count\": 30,\n-              \"covered\": 25,\n-              \"percent\": 83.33333333333334\n-            },\n-            \"regions\": {\n-              \"count\": 7,\n-              \"covered\": 5,\n-              \"notcovered\": 2,\n-              \"percent\": 71.42857142857143\n-            }\n-          }\n-        }\n-      ],\n-      \"totals\": {\n-        \"functions\": {\n-          \"count\": 7,\n-          \"covered\": 5,\n-          \"percent\": 71.42857142857143\n-        },\n-        \"instantiations\": {\n-          \"count\": 8,\n-          \"covered\": 6,\n-          \"percent\": 75\n-        },\n-        \"lines\": {\n-          \"count\": 30,\n-          \"covered\": 25,\n-          \"percent\": 83.33333333333334\n-        },\n-        \"regions\": {\n-          \"count\": 7,\n-          \"covered\": 5,\n-          \"notcovered\": 2,\n-          \"percent\": 71.42857142857143\n-        }\n-      }\n-    }\n-  ],\n-  \"type\": \"llvm.coverage.json.export\",\n-  \"version\": \"2.0.1\"\n-}"}, {"sha": "5a7cc9a188202a338c15e7d27d4914cba4b850a7", "filename": "src/test/run-make-fulldeps/instrument-coverage/filecheck-patterns.txt", "status": "removed", "additions": 0, "deletions": 51, "changes": 51, "blob_url": "https://github.com/rust-lang/rust/blob/e36e4bd0f7e722d3c97d1ca45387e58f81e4e8ea/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage%2Ffilecheck-patterns.txt", "raw_url": "https://github.com/rust-lang/rust/raw/e36e4bd0f7e722d3c97d1ca45387e58f81e4e8ea/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage%2Ffilecheck-patterns.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage%2Ffilecheck-patterns.txt?ref=e36e4bd0f7e722d3c97d1ca45387e58f81e4e8ea", "patch": "@@ -1,51 +0,0 @@\n-# Check for metadata, variables, declarations, and function definitions injected\n-# into LLVM IR when compiling with -Zinstrument-coverage.\n-\n-WIN32:      $__llvm_profile_runtime_user = comdat any\n-\n-CHECK:      @__llvm_coverage_mapping = internal constant\n-CHECK-SAME: section \"[[INSTR_PROF_COVMAP]]\", align 8\n-\n-WIN32:      @__llvm_profile_runtime = external global i32\n-\n-CHECK:      @__profc__R{{[a-zA-Z0-9_]+}}testprog14will_be_called = [[PRIVATE_GLOBAL]]\n-CHECK-SAME: section \"[[INSTR_PROF_CNTS]]\", align 8\n-\n-CHECK:      @__profd__R{{[a-zA-Z0-9_]+}}testprog14will_be_called = [[PRIVATE_GLOBAL]]\n-CHECK-SAME: @__profc__R{{[a-zA-Z0-9_]+}}testprog14will_be_called,\n-CHECK-SAME: ()* @_R{{[a-zA-Z0-9_]+}}testprog14will_be_called to i8*),\n-CHECK-SAME: section \"[[INSTR_PROF_DATA]]\", align 8\n-\n-CHECK:      @__profc__R{{[a-zA-Z0-9_]+}}testprog4main = [[PRIVATE_GLOBAL]]\n-CHECK-SAME: section \"[[INSTR_PROF_CNTS]]\", align 8\n-\n-CHECK:      @__profd__R{{[a-zA-Z0-9_]+}}testprog4main = [[PRIVATE_GLOBAL]]\n-CHECK-SAME: @__profc__R{{[a-zA-Z0-9_]+}}testprog4main,\n-CHECK-SAME: ()* @_R{{[a-zA-Z0-9_]+}}testprog4main to i8*),\n-CHECK-SAME: section \"[[INSTR_PROF_DATA]]\", align 8\n-\n-CHECK:      @__llvm_prf_nm = private constant\n-CHECK-SAME: section \"[[INSTR_PROF_NAME]]\", align 1\n-\n-CHECK:      @llvm.used = appending global\n-CHECK-SAME: i8* bitcast ({ {{.*}} }* @__llvm_coverage_mapping to i8*)\n-WIN32-SAME: i8* bitcast (i32 ()* @__llvm_profile_runtime_user to i8*)\n-CHECK-SAME: i8* bitcast ({ {{.*}} }* @__profd__R{{[a-zA-Z0-9_]*}}testprog4main to i8*)\n-CHECK-SAME: i8* getelementptr inbounds ({{.*}}* @__llvm_prf_nm, i32 0, i32 0)\n-CHECK-SAME: section \"llvm.metadata\"\n-\n-CHECK:      define hidden { {{.*}} } @_R{{[a-zA-Z0-9_]+}}testprog14will_be_called() unnamed_addr #{{[0-9]+}} {\n-CHECK-NEXT: start:\n-CHECK-NOT:  bb{{[0-9]+}}:\n-CHECK:      %pgocount = load i64, i64* getelementptr inbounds\n-CHECK-SAME: * @__profc__R{{[a-zA-Z0-9_]+}}testprog14will_be_called,\n-\n-CHECK:      declare void @llvm.instrprof.increment(i8*, i64, i32, i32) #[[LLVM_INSTRPROF_INCREMENT_ATTR:[0-9]+]]\n-\n-WIN32:      define linkonce_odr hidden i32 @__llvm_profile_runtime_user() #[[LLVM_PROFILE_RUNTIME_USER_ATTR:[0-9]+]] comdat {\n-WIN32-NEXT: %1 = load i32, i32* @__llvm_profile_runtime\n-WIN32-NEXT: ret i32 %1\n-WIN32-NEXT: }\n-\n-CHECK:      attributes #[[LLVM_INSTRPROF_INCREMENT_ATTR]] = { nounwind }\n-WIN32:      attributes #[[LLVM_PROFILE_RUNTIME_USER_ATTR]] = { noinline }\n\\ No newline at end of file"}, {"sha": "ae123afff04000652fa3feee1e539d007bf267a4", "filename": "src/test/run-make-fulldeps/instrument-coverage/typical_show_coverage.txt", "status": "removed", "additions": 0, "deletions": 55, "changes": 55, "blob_url": "https://github.com/rust-lang/rust/blob/e36e4bd0f7e722d3c97d1ca45387e58f81e4e8ea/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage%2Ftypical_show_coverage.txt", "raw_url": "https://github.com/rust-lang/rust/raw/e36e4bd0f7e722d3c97d1ca45387e58f81e4e8ea/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage%2Ftypical_show_coverage.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Finstrument-coverage%2Ftypical_show_coverage.txt?ref=e36e4bd0f7e722d3c97d1ca45387e58f81e4e8ea", "patch": "@@ -1,55 +0,0 @@\n-    1|      2|pub fn will_be_called() -> &'static str {\n-    2|      2|    let val = \"called\";\n-    3|      2|    println!(\"{}\", val);\n-    4|      2|    val\n-    5|      2|}\n-    6|       |\n-    7|      0|pub fn will_not_be_called() -> bool {\n-    8|      0|    println!(\"should not have been called\");\n-    9|      0|    false\n-   10|      0|}\n-   11|       |\n-   12|       |pub fn print<T>(left: &str, value: T, right: &str)\n-   13|       |where\n-   14|       |    T: std::fmt::Display,\n-   15|      1|{\n-   16|      1|    println!(\"{}{}{}\", left, value, right);\n-   17|      1|}\n-   18|       |\n-   19|       |pub fn wrap_with<F, T>(inner: T, should_wrap: bool, wrapper: F)\n-   20|       |where\n-   21|       |    F: FnOnce(&T)\n-   22|      2|{\n-   23|      2|    if should_wrap {\n-   24|      2|        wrapper(&inner)\n-   25|      2|    }\n-   26|      2|}\n-  ------------------\n-  | testprog[317d481089b8c8fe]::wrap_with::<testprog[317d481089b8c8fe]::main::{closure#0}, &str>:\n-  |   22|      1|{\n-  |   23|      1|    if should_wrap {\n-  |   24|      1|        wrapper(&inner)\n-  |   25|      1|    }\n-  |   26|      1|}\n-  ------------------\n-  | testprog[317d481089b8c8fe]::wrap_with::<testprog[317d481089b8c8fe]::main::{closure#1}, &str>:\n-  |   22|      1|{\n-  |   23|      1|    if should_wrap {\n-  |   24|      1|        wrapper(&inner)\n-  |   25|      1|    }\n-  |   26|      1|}\n-  ------------------\n-   27|       |\n-   28|      1|fn main() {\n-   29|      1|    let less = 1;\n-   30|      1|    let more = 100;\n-   31|      1|\n-   32|      1|    if less < more {\n-   33|      1|        wrap_with(will_be_called(), less < more, |inner| print(\" ***\", inner, \"*** \"));\n-   34|      1|        wrap_with(will_be_called(), more < less, |inner| print(\" ***\", inner, \"*** \"));\n-                                                                       ^0\n-   35|      1|    } else {\n-   36|      1|        wrap_with(will_not_be_called(), true, |inner| print(\"wrapped result is: \", inner, \"\"));\n-   37|      1|    }\n-   38|      1|}\n-"}]}