{"sha": "c065234b341b285bb9a082d8303131a6a0207f0f", "node_id": "MDY6Q29tbWl0NzI0NzEyOmMwNjUyMzRiMzQxYjI4NWJiOWEwODJkODMwMzEzMWE2YTAyMDdmMGY=", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2021-01-21T01:50:21Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2021-01-22T05:41:46Z"}, "message": "Add more misspelled label tests", "tree": {"sha": "7ac11284bf4c56918a0d531d253813478a79e41d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7ac11284bf4c56918a0d531d253813478a79e41d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c065234b341b285bb9a082d8303131a6a0207f0f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c065234b341b285bb9a082d8303131a6a0207f0f", "html_url": "https://github.com/rust-lang/rust/commit/c065234b341b285bb9a082d8303131a6a0207f0f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c065234b341b285bb9a082d8303131a6a0207f0f/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8a13abba1d628ee17e1df93923665e6118221012", "url": "https://api.github.com/repos/rust-lang/rust/commits/8a13abba1d628ee17e1df93923665e6118221012", "html_url": "https://github.com/rust-lang/rust/commit/8a13abba1d628ee17e1df93923665e6118221012"}], "stats": {"total": 188, "additions": 173, "deletions": 15}, "files": [{"sha": "33619987fefe2e751b2d51bc5a4f2deaa6f10079", "filename": "src/test/ui/label/label_misspelled.rs", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/c065234b341b285bb9a082d8303131a6a0207f0f/src%2Ftest%2Fui%2Flabel%2Flabel_misspelled.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c065234b341b285bb9a082d8303131a6a0207f0f/src%2Ftest%2Fui%2Flabel%2Flabel_misspelled.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flabel%2Flabel_misspelled.rs?ref=c065234b341b285bb9a082d8303131a6a0207f0f", "patch": "@@ -1,36 +1,46 @@\n+#![warn(unused_labels)]\n+\n fn main() {\n     'while_loop: while true { //~ WARN denote infinite loops with\n+        //~^ WARN unused label\n         while_loop;\n         //~^ ERROR cannot find value `while_loop` in this scope\n     };\n     'while_let: while let Some(_) = Some(()) {\n+        //~^ WARN unused label\n         while_let;\n         //~^ ERROR cannot find value `while_let` in this scope\n     }\n     'for_loop: for _ in 0..3 {\n+        //~^ WARN unused label\n         for_loop;\n         //~^ ERROR cannot find value `for_loop` in this scope\n     };\n     'LOOP: loop {\n+        //~^ WARN unused label\n         LOOP;\n         //~^ ERROR cannot find value `LOOP` in this scope\n     };\n }\n \n fn foo() {\n     'LOOP: loop {\n+        //~^ WARN unused label\n         break LOOP;\n         //~^ ERROR cannot find value `LOOP` in this scope\n     };\n     'while_loop: while true { //~ WARN denote infinite loops with\n+        //~^ WARN unused label\n         break while_loop;\n         //~^ ERROR cannot find value `while_loop` in this scope\n     };\n     'while_let: while let Some(_) = Some(()) {\n+        //~^ WARN unused label\n         break while_let;\n         //~^ ERROR cannot find value `while_let` in this scope\n     }\n     'for_loop: for _ in 0..3 {\n+        //~^ WARN unused label\n         break for_loop;\n         //~^ ERROR cannot find value `for_loop` in this scope\n     };\n@@ -39,14 +49,17 @@ fn foo() {\n fn bar() {\n     let foo = ();\n     'while_loop: while true { //~ WARN denote infinite loops with\n+        //~^ WARN unused label\n         break foo;\n         //~^ ERROR `break` with value from a `while` loop\n     };\n     'while_let: while let Some(_) = Some(()) {\n+        //~^ WARN unused label\n         break foo;\n         //~^ ERROR `break` with value from a `while` loop\n     }\n     'for_loop: for _ in 0..3 {\n+        //~^ WARN unused label\n         break foo;\n         //~^ ERROR `break` with value from a `for` loop\n     };"}, {"sha": "817eac8256ffc62eaf1cae8d0fee6aa64413fb50", "filename": "src/test/ui/label/label_misspelled.stderr", "status": "modified", "additions": 98, "deletions": 15, "changes": 113, "blob_url": "https://github.com/rust-lang/rust/blob/c065234b341b285bb9a082d8303131a6a0207f0f/src%2Ftest%2Fui%2Flabel%2Flabel_misspelled.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c065234b341b285bb9a082d8303131a6a0207f0f/src%2Ftest%2Fui%2Flabel%2Flabel_misspelled.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flabel%2Flabel_misspelled.stderr?ref=c065234b341b285bb9a082d8303131a6a0207f0f", "patch": "@@ -1,104 +1,185 @@\n error[E0425]: cannot find value `while_loop` in this scope\n-  --> $DIR/label_misspelled.rs:3:9\n+  --> $DIR/label_misspelled.rs:6:9\n    |\n LL |     'while_loop: while true {\n    |     ----------- a label with a similar name exists\n+LL |\n LL |         while_loop;\n    |         ^^^^^^^^^^ not found in this scope\n \n error[E0425]: cannot find value `while_let` in this scope\n-  --> $DIR/label_misspelled.rs:7:9\n+  --> $DIR/label_misspelled.rs:11:9\n    |\n LL |     'while_let: while let Some(_) = Some(()) {\n    |     ---------- a label with a similar name exists\n+LL |\n LL |         while_let;\n    |         ^^^^^^^^^ not found in this scope\n \n error[E0425]: cannot find value `for_loop` in this scope\n-  --> $DIR/label_misspelled.rs:11:9\n+  --> $DIR/label_misspelled.rs:16:9\n    |\n LL |     'for_loop: for _ in 0..3 {\n    |     --------- a label with a similar name exists\n+LL |\n LL |         for_loop;\n    |         ^^^^^^^^ not found in this scope\n \n error[E0425]: cannot find value `LOOP` in this scope\n-  --> $DIR/label_misspelled.rs:15:9\n+  --> $DIR/label_misspelled.rs:21:9\n    |\n LL |     'LOOP: loop {\n    |     ----- a label with a similar name exists\n+LL |\n LL |         LOOP;\n    |         ^^^^ not found in this scope\n \n error[E0425]: cannot find value `LOOP` in this scope\n-  --> $DIR/label_misspelled.rs:22:15\n+  --> $DIR/label_misspelled.rs:29:15\n    |\n LL |     'LOOP: loop {\n    |     ----- a label with a similar name exists\n+LL |\n LL |         break LOOP;\n    |               ^^^^\n    |               |\n    |               not found in this scope\n    |               help: use the similarly named label: `'LOOP`\n \n error[E0425]: cannot find value `while_loop` in this scope\n-  --> $DIR/label_misspelled.rs:26:15\n+  --> $DIR/label_misspelled.rs:34:15\n    |\n LL |     'while_loop: while true {\n    |     ----------- a label with a similar name exists\n+LL |\n LL |         break while_loop;\n    |               ^^^^^^^^^^\n    |               |\n    |               not found in this scope\n    |               help: use the similarly named label: `'while_loop`\n \n error[E0425]: cannot find value `while_let` in this scope\n-  --> $DIR/label_misspelled.rs:30:15\n+  --> $DIR/label_misspelled.rs:39:15\n    |\n LL |     'while_let: while let Some(_) = Some(()) {\n    |     ---------- a label with a similar name exists\n+LL |\n LL |         break while_let;\n    |               ^^^^^^^^^\n    |               |\n    |               not found in this scope\n    |               help: use the similarly named label: `'while_let`\n \n error[E0425]: cannot find value `for_loop` in this scope\n-  --> $DIR/label_misspelled.rs:34:15\n+  --> $DIR/label_misspelled.rs:44:15\n    |\n LL |     'for_loop: for _ in 0..3 {\n    |     --------- a label with a similar name exists\n+LL |\n LL |         break for_loop;\n    |               ^^^^^^^^\n    |               |\n    |               not found in this scope\n    |               help: use the similarly named label: `'for_loop`\n \n+warning: unused label\n+  --> $DIR/label_misspelled.rs:4:5\n+   |\n+LL |     'while_loop: while true {\n+   |     ^^^^^^^^^^^\n+   |\n+note: the lint level is defined here\n+  --> $DIR/label_misspelled.rs:1:9\n+   |\n+LL | #![warn(unused_labels)]\n+   |         ^^^^^^^^^^^^^\n+\n warning: denote infinite loops with `loop { ... }`\n-  --> $DIR/label_misspelled.rs:2:5\n+  --> $DIR/label_misspelled.rs:4:5\n    |\n LL |     'while_loop: while true {\n    |     ^^^^^^^^^^^^^^^^^^^^^^^ help: use `loop`\n    |\n    = note: `#[warn(while_true)]` on by default\n \n+warning: unused label\n+  --> $DIR/label_misspelled.rs:9:5\n+   |\n+LL |     'while_let: while let Some(_) = Some(()) {\n+   |     ^^^^^^^^^^\n+\n+warning: unused label\n+  --> $DIR/label_misspelled.rs:14:5\n+   |\n+LL |     'for_loop: for _ in 0..3 {\n+   |     ^^^^^^^^^\n+\n+warning: unused label\n+  --> $DIR/label_misspelled.rs:19:5\n+   |\n+LL |     'LOOP: loop {\n+   |     ^^^^^\n+\n+warning: unused label\n+  --> $DIR/label_misspelled.rs:27:5\n+   |\n+LL |     'LOOP: loop {\n+   |     ^^^^^\n+\n+warning: unused label\n+  --> $DIR/label_misspelled.rs:32:5\n+   |\n+LL |     'while_loop: while true {\n+   |     ^^^^^^^^^^^\n+\n warning: denote infinite loops with `loop { ... }`\n-  --> $DIR/label_misspelled.rs:25:5\n+  --> $DIR/label_misspelled.rs:32:5\n    |\n LL |     'while_loop: while true {\n    |     ^^^^^^^^^^^^^^^^^^^^^^^ help: use `loop`\n \n+warning: unused label\n+  --> $DIR/label_misspelled.rs:37:5\n+   |\n+LL |     'while_let: while let Some(_) = Some(()) {\n+   |     ^^^^^^^^^^\n+\n+warning: unused label\n+  --> $DIR/label_misspelled.rs:42:5\n+   |\n+LL |     'for_loop: for _ in 0..3 {\n+   |     ^^^^^^^^^\n+\n+warning: unused label\n+  --> $DIR/label_misspelled.rs:51:5\n+   |\n+LL |     'while_loop: while true {\n+   |     ^^^^^^^^^^^\n+\n warning: denote infinite loops with `loop { ... }`\n-  --> $DIR/label_misspelled.rs:41:5\n+  --> $DIR/label_misspelled.rs:51:5\n    |\n LL |     'while_loop: while true {\n    |     ^^^^^^^^^^^^^^^^^^^^^^^ help: use `loop`\n \n+warning: unused label\n+  --> $DIR/label_misspelled.rs:56:5\n+   |\n+LL |     'while_let: while let Some(_) = Some(()) {\n+   |     ^^^^^^^^^^\n+\n+warning: unused label\n+  --> $DIR/label_misspelled.rs:61:5\n+   |\n+LL |     'for_loop: for _ in 0..3 {\n+   |     ^^^^^^^^^\n+\n error[E0571]: `break` with value from a `while` loop\n-  --> $DIR/label_misspelled.rs:42:9\n+  --> $DIR/label_misspelled.rs:53:9\n    |\n LL |     'while_loop: while true {\n    |     ----------------------- you can't `break` with a value in a `while` loop\n+LL |\n LL |         break foo;\n    |         ^^^^^^^^^ can only break with a value inside `loop` or breakable block\n    |\n@@ -112,10 +193,11 @@ LL |         break 'while_loop;\n    |               ^^^^^^^^^^^\n \n error[E0571]: `break` with value from a `while` loop\n-  --> $DIR/label_misspelled.rs:46:9\n+  --> $DIR/label_misspelled.rs:58:9\n    |\n LL |     'while_let: while let Some(_) = Some(()) {\n    |     ---------------------------------------- you can't `break` with a value in a `while` loop\n+LL |\n LL |         break foo;\n    |         ^^^^^^^^^ can only break with a value inside `loop` or breakable block\n    |\n@@ -129,10 +211,11 @@ LL |         break 'while_let;\n    |               ^^^^^^^^^^\n \n error[E0571]: `break` with value from a `for` loop\n-  --> $DIR/label_misspelled.rs:50:9\n+  --> $DIR/label_misspelled.rs:63:9\n    |\n LL |     'for_loop: for _ in 0..3 {\n    |     ------------------------ you can't `break` with a value in a `for` loop\n+LL |\n LL |         break foo;\n    |         ^^^^^^^^^ can only break with a value inside `loop` or breakable block\n    |\n@@ -145,7 +228,7 @@ help: alternatively, you might have meant to use the available loop label\n LL |         break 'for_loop;\n    |               ^^^^^^^^^\n \n-error: aborting due to 11 previous errors; 3 warnings emitted\n+error: aborting due to 11 previous errors; 14 warnings emitted\n \n Some errors have detailed explanations: E0425, E0571.\n For more information about an error, try `rustc --explain E0425`."}, {"sha": "7fa101dbdf899e6e1c3c457e6026c2c72634c6ad", "filename": "src/test/ui/label/label_misspelled_2.rs", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/c065234b341b285bb9a082d8303131a6a0207f0f/src%2Ftest%2Fui%2Flabel%2Flabel_misspelled_2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c065234b341b285bb9a082d8303131a6a0207f0f/src%2Ftest%2Fui%2Flabel%2Flabel_misspelled_2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flabel%2Flabel_misspelled_2.rs?ref=c065234b341b285bb9a082d8303131a6a0207f0f", "patch": "@@ -0,0 +1,18 @@\n+#![warn(unused_labels)]\n+\n+fn main() {\n+    'a: for _ in 0..1 {\n+        break 'a;\n+    }\n+    'b: for _ in 0..1 {\n+        //~^ WARN unused label\n+        break b; //~ ERROR cannot find value `b` in this scope\n+    }\n+    c: for _ in 0..1 { //~ ERROR expected identifier, found keyword `for`\n+        //~^ ERROR expected `<`, found reserved identifier `_`\n+        break 'c;\n+    }\n+    d: for _ in 0..1 {\n+        break ;\n+    }\n+}"}, {"sha": "b56896a77ed35bbd0a814245cb9243d9a0d089ad", "filename": "src/test/ui/label/label_misspelled_2.stderr", "status": "added", "additions": 44, "deletions": 0, "changes": 44, "blob_url": "https://github.com/rust-lang/rust/blob/c065234b341b285bb9a082d8303131a6a0207f0f/src%2Ftest%2Fui%2Flabel%2Flabel_misspelled_2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c065234b341b285bb9a082d8303131a6a0207f0f/src%2Ftest%2Fui%2Flabel%2Flabel_misspelled_2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flabel%2Flabel_misspelled_2.stderr?ref=c065234b341b285bb9a082d8303131a6a0207f0f", "patch": "@@ -0,0 +1,44 @@\n+error: expected identifier, found keyword `for`\n+  --> $DIR/label_misspelled_2.rs:11:8\n+   |\n+LL |     c: for _ in 0..1 {\n+   |        ^^^ expected identifier, found keyword\n+\n+error: expected `<`, found reserved identifier `_`\n+  --> $DIR/label_misspelled_2.rs:11:12\n+   |\n+LL |     c: for _ in 0..1 {\n+   |      -     ^ expected `<`\n+   |      |\n+   |      tried to parse a type due to this type ascription\n+   |\n+   = note: `#![feature(type_ascription)]` lets you annotate an expression with a type: `<expr>: <type>`\n+   = note: see issue #23416 <https://github.com/rust-lang/rust/issues/23416> for more information\n+\n+error[E0425]: cannot find value `b` in this scope\n+  --> $DIR/label_misspelled_2.rs:9:15\n+   |\n+LL |     'b: for _ in 0..1 {\n+   |     -- a label with a similar name exists\n+LL |\n+LL |         break b;\n+   |               ^\n+   |               |\n+   |               not found in this scope\n+   |               help: use the similarly named label: `'b`\n+\n+warning: unused label\n+  --> $DIR/label_misspelled_2.rs:7:5\n+   |\n+LL |     'b: for _ in 0..1 {\n+   |     ^^\n+   |\n+note: the lint level is defined here\n+  --> $DIR/label_misspelled_2.rs:1:9\n+   |\n+LL | #![warn(unused_labels)]\n+   |         ^^^^^^^^^^^^^\n+\n+error: aborting due to 3 previous errors; 1 warning emitted\n+\n+For more information about this error, try `rustc --explain E0425`."}]}