{"sha": "03431368052effca858cc5aa7dad140948562470", "node_id": "MDY6Q29tbWl0NzI0NzEyOjAzNDMxMzY4MDUyZWZmY2E4NThjYzVhYTdkYWQxNDA5NDg1NjI0NzA=", "commit": {"author": {"name": "Mark Simulacrum", "email": "mark.simulacrum@gmail.com", "date": "2017-06-25T13:51:55Z"}, "committer": {"name": "Mark Simulacrum", "email": "mark.simulacrum@gmail.com", "date": "2017-07-11T18:09:25Z"}, "message": "Make a few functions non-public", "tree": {"sha": "cc1f54183f84461ec707f47cd5c1bef407f68386", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cc1f54183f84461ec707f47cd5c1bef407f68386"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/03431368052effca858cc5aa7dad140948562470", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/03431368052effca858cc5aa7dad140948562470", "html_url": "https://github.com/rust-lang/rust/commit/03431368052effca858cc5aa7dad140948562470", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/03431368052effca858cc5aa7dad140948562470/comments", "author": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "16b486ce6ec1c15e4019925c22a7abff83db9950", "url": "https://api.github.com/repos/rust-lang/rust/commits/16b486ce6ec1c15e4019925c22a7abff83db9950", "html_url": "https://github.com/rust-lang/rust/commit/16b486ce6ec1c15e4019925c22a7abff83db9950"}], "stats": {"total": 13, "additions": 4, "deletions": 9}, "files": [{"sha": "b052b2cdbbb5a74fa31c52371b64432abedf513e", "filename": "src/libsyntax/print/pprust.rs", "status": "modified", "additions": 4, "deletions": 9, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/03431368052effca858cc5aa7dad140948562470/src%2Flibsyntax%2Fprint%2Fpprust.rs", "raw_url": "https://github.com/rust-lang/rust/raw/03431368052effca858cc5aa7dad140948562470/src%2Flibsyntax%2Fprint%2Fpprust.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fprint%2Fpprust.rs?ref=03431368052effca858cc5aa7dad140948562470", "patch": "@@ -64,13 +64,7 @@ pub struct State<'a> {\n     ann: &'a (PpAnn+'a),\n }\n \n-pub fn rust_printer<'a>(writer: Box<Write+'a>) -> State<'a> {\n-    static NO_ANN: NoAnn = NoAnn;\n-    rust_printer_annotated(writer, &NO_ANN)\n-}\n-\n-pub fn rust_printer_annotated<'a>(writer: Box<Write+'a>,\n-                                  ann: &'a PpAnn) -> State<'a> {\n+fn rust_printer<'a>(writer: Box<Write+'a>, ann: &'a PpAnn) -> State<'a> {\n     State {\n         s: pp::mk_printer(writer, DEFAULT_COLUMNS),\n         cm: None,\n@@ -165,14 +159,15 @@ pub fn to_string<F>(f: F) -> String where\n {\n     let mut wr = Vec::new();\n     {\n-        let mut printer = rust_printer(Box::new(&mut wr));\n+        let ann = NoAnn;\n+        let mut printer = rust_printer(Box::new(&mut wr), &ann);\n         f(&mut printer).unwrap();\n         printer.s.eof().unwrap();\n     }\n     String::from_utf8(wr).unwrap()\n }\n \n-pub fn binop_to_string(op: BinOpToken) -> &'static str {\n+fn binop_to_string(op: BinOpToken) -> &'static str {\n     match op {\n         token::Plus     => \"+\",\n         token::Minus    => \"-\","}]}