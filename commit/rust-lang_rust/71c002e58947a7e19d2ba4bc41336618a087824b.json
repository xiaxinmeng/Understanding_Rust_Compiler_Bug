{"sha": "71c002e58947a7e19d2ba4bc41336618a087824b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjcxYzAwMmU1ODk0N2E3ZTE5ZDJiYTRiYzQxMzM2NjE4YTA4NzgyNGI=", "commit": {"author": {"name": "Jonas Schievink", "email": "jonasschievink@gmail.com", "date": "2020-06-15T20:39:26Z"}, "committer": {"name": "Jonas Schievink", "email": "jonasschievink@gmail.com", "date": "2020-06-15T20:39:26Z"}, "message": "It's fookin' raw", "tree": {"sha": "914243a11ab07d07f5dbbac788460c6ec2461426", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/914243a11ab07d07f5dbbac788460c6ec2461426"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/71c002e58947a7e19d2ba4bc41336618a087824b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/71c002e58947a7e19d2ba4bc41336618a087824b", "html_url": "https://github.com/rust-lang/rust/commit/71c002e58947a7e19d2ba4bc41336618a087824b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/71c002e58947a7e19d2ba4bc41336618a087824b/comments", "author": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5d66bfe16343141132c8a7aefa727b209ec3e66a", "url": "https://api.github.com/repos/rust-lang/rust/commits/5d66bfe16343141132c8a7aefa727b209ec3e66a", "html_url": "https://github.com/rust-lang/rust/commit/5d66bfe16343141132c8a7aefa727b209ec3e66a"}], "stats": {"total": 96, "additions": 48, "deletions": 48}, "files": [{"sha": "301ae849750e5c713a10b3cbd093b0333a624e59", "filename": "crates/ra_assists/src/handlers/replace_qualified_name_with_use.rs", "status": "modified", "additions": 48, "deletions": 48, "changes": 96, "blob_url": "https://github.com/rust-lang/rust/blob/71c002e58947a7e19d2ba4bc41336618a087824b/crates%2Fra_assists%2Fsrc%2Fhandlers%2Freplace_qualified_name_with_use.rs", "raw_url": "https://github.com/rust-lang/rust/raw/71c002e58947a7e19d2ba4bc41336618a087824b/crates%2Fra_assists%2Fsrc%2Fhandlers%2Freplace_qualified_name_with_use.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_assists%2Fsrc%2Fhandlers%2Freplace_qualified_name_with_use.rs?ref=71c002e58947a7e19d2ba4bc41336618a087824b", "patch": "@@ -152,10 +152,10 @@ mod tests {\n     fn test_replace_add_use_no_anchor() {\n         check_assist(\n             replace_qualified_name_with_use,\n-            \"\n+            r\"\n std::fmt::Debug<|>\n     \",\n-            \"\n+            r\"\n use std::fmt::Debug;\n \n Debug\n@@ -166,13 +166,13 @@ Debug\n     fn test_replace_add_use_no_anchor_with_item_below() {\n         check_assist(\n             replace_qualified_name_with_use,\n-            \"\n+            r\"\n std::fmt::Debug<|>\n \n fn main() {\n }\n     \",\n-            \"\n+            r\"\n use std::fmt::Debug;\n \n Debug\n@@ -187,13 +187,13 @@ fn main() {\n     fn test_replace_add_use_no_anchor_with_item_above() {\n         check_assist(\n             replace_qualified_name_with_use,\n-            \"\n+            r\"\n fn main() {\n }\n \n std::fmt::Debug<|>\n     \",\n-            \"\n+            r\"\n use std::fmt::Debug;\n \n fn main() {\n@@ -208,10 +208,10 @@ Debug\n     fn test_replace_add_use_no_anchor_2seg() {\n         check_assist(\n             replace_qualified_name_with_use,\n-            \"\n+            r\"\n std::fmt<|>::Debug\n     \",\n-            \"\n+            r\"\n use std::fmt;\n \n fmt::Debug\n@@ -223,13 +223,13 @@ fmt::Debug\n     fn test_replace_add_use() {\n         check_assist(\n             replace_qualified_name_with_use,\n-            \"\n+            r\"\n use stdx;\n \n impl std::fmt::Debug<|> for Foo {\n }\n     \",\n-            \"\n+            r\"\n use stdx;\n use std::fmt::Debug;\n \n@@ -243,11 +243,11 @@ impl Debug for Foo {\n     fn test_replace_file_use_other_anchor() {\n         check_assist(\n             replace_qualified_name_with_use,\n-            \"\n+            r\"\n impl std::fmt::Debug<|> for Foo {\n }\n     \",\n-            \"\n+            r\"\n use std::fmt::Debug;\n \n impl Debug for Foo {\n@@ -260,11 +260,11 @@ impl Debug for Foo {\n     fn test_replace_add_use_other_anchor_indent() {\n         check_assist(\n             replace_qualified_name_with_use,\n-            \"\n+            r\"\n     impl std::fmt::Debug<|> for Foo {\n     }\n     \",\n-            \"\n+            r\"\n     use std::fmt::Debug;\n \n     impl Debug for Foo {\n@@ -277,13 +277,13 @@ impl Debug for Foo {\n     fn test_replace_split_different() {\n         check_assist(\n             replace_qualified_name_with_use,\n-            \"\n+            r\"\n use std::fmt;\n \n impl std::io<|> for Foo {\n }\n     \",\n-            \"\n+            r\"\n use std::{io, fmt};\n \n impl io for Foo {\n@@ -296,13 +296,13 @@ impl io for Foo {\n     fn test_replace_split_self_for_use() {\n         check_assist(\n             replace_qualified_name_with_use,\n-            \"\n+            r\"\n use std::fmt;\n \n impl std::fmt::Debug<|> for Foo {\n }\n     \",\n-            \"\n+            r\"\n use std::fmt::{self, Debug, };\n \n impl Debug for Foo {\n@@ -315,13 +315,13 @@ impl Debug for Foo {\n     fn test_replace_split_self_for_target() {\n         check_assist(\n             replace_qualified_name_with_use,\n-            \"\n+            r\"\n use std::fmt::Debug;\n \n impl std::fmt<|> for Foo {\n }\n     \",\n-            \"\n+            r\"\n use std::fmt::{self, Debug};\n \n impl fmt for Foo {\n@@ -334,13 +334,13 @@ impl fmt for Foo {\n     fn test_replace_add_to_nested_self_nested() {\n         check_assist(\n             replace_qualified_name_with_use,\n-            \"\n+            r\"\n use std::fmt::{Debug, nested::{Display}};\n \n impl std::fmt::nested<|> for Foo {\n }\n \",\n-            \"\n+            r\"\n use std::fmt::{Debug, nested::{Display, self}};\n \n impl nested for Foo {\n@@ -353,13 +353,13 @@ impl nested for Foo {\n     fn test_replace_add_to_nested_self_already_included() {\n         check_assist(\n             replace_qualified_name_with_use,\n-            \"\n+            r\"\n use std::fmt::{Debug, nested::{self, Display}};\n \n impl std::fmt::nested<|> for Foo {\n }\n \",\n-            \"\n+            r\"\n use std::fmt::{Debug, nested::{self, Display}};\n \n impl nested for Foo {\n@@ -372,13 +372,13 @@ impl nested for Foo {\n     fn test_replace_add_to_nested_nested() {\n         check_assist(\n             replace_qualified_name_with_use,\n-            \"\n+            r\"\n use std::fmt::{Debug, nested::{Display}};\n \n impl std::fmt::nested::Debug<|> for Foo {\n }\n \",\n-            \"\n+            r\"\n use std::fmt::{Debug, nested::{Display, Debug}};\n \n impl Debug for Foo {\n@@ -391,13 +391,13 @@ impl Debug for Foo {\n     fn test_replace_split_common_target_longer() {\n         check_assist(\n             replace_qualified_name_with_use,\n-            \"\n+            r\"\n use std::fmt::Debug;\n \n impl std::fmt::nested::Display<|> for Foo {\n }\n \",\n-            \"\n+            r\"\n use std::fmt::{nested::Display, Debug};\n \n impl Display for Foo {\n@@ -410,13 +410,13 @@ impl Display for Foo {\n     fn test_replace_split_common_use_longer() {\n         check_assist(\n             replace_qualified_name_with_use,\n-            \"\n+            r\"\n use std::fmt::nested::Debug;\n \n impl std::fmt::Display<|> for Foo {\n }\n \",\n-            \"\n+            r\"\n use std::fmt::{Display, nested::Debug};\n \n impl Display for Foo {\n@@ -429,15 +429,15 @@ impl Display for Foo {\n     fn test_replace_use_nested_import() {\n         check_assist(\n             replace_qualified_name_with_use,\n-            \"\n+            r\"\n use crate::{\n     ty::{Substs, Ty},\n     AssocItem,\n };\n \n fn foo() { crate::ty::lower<|>::trait_env() }\n \",\n-            \"\n+            r\"\n use crate::{\n     ty::{Substs, Ty, lower},\n     AssocItem,\n@@ -452,13 +452,13 @@ fn foo() { lower::trait_env() }\n     fn test_replace_alias() {\n         check_assist(\n             replace_qualified_name_with_use,\n-            \"\n+            r\"\n use std::fmt as foo;\n \n impl foo::Debug<|> for Foo {\n }\n \",\n-            \"\n+            r\"\n use std::fmt as foo;\n \n impl Debug for Foo {\n@@ -471,7 +471,7 @@ impl Debug for Foo {\n     fn test_replace_not_applicable_one_segment() {\n         check_assist_not_applicable(\n             replace_qualified_name_with_use,\n-            \"\n+            r\"\n impl foo<|> for Foo {\n }\n \",\n@@ -482,7 +482,7 @@ impl foo<|> for Foo {\n     fn test_replace_not_applicable_in_use() {\n         check_assist_not_applicable(\n             replace_qualified_name_with_use,\n-            \"\n+            r\"\n use std::fmt<|>;\n \",\n         );\n@@ -492,14 +492,14 @@ use std::fmt<|>;\n     fn test_replace_add_use_no_anchor_in_mod_mod() {\n         check_assist(\n             replace_qualified_name_with_use,\n-            \"\n+            r\"\n mod foo {\n     mod bar {\n         std::fmt::Debug<|>\n     }\n }\n     \",\n-            \"\n+            r\"\n mod foo {\n     mod bar {\n         use std::fmt::Debug;\n@@ -515,14 +515,14 @@ mod foo {\n     fn inserts_imports_after_inner_attributes() {\n         check_assist(\n             replace_qualified_name_with_use,\n-            \"\n+            r\"\n #![allow(dead_code)]\n \n fn main() {\n     std::fmt::Debug<|>\n }\n     \",\n-            \"\n+            r\"\n #![allow(dead_code)]\n use std::fmt::Debug;\n \n@@ -537,13 +537,13 @@ fn main() {\n     fn replaces_all_affected_paths() {\n         check_assist(\n             replace_qualified_name_with_use,\n-            \"\n+            r\"\n fn main() {\n     std::fmt::Debug<|>;\n     let x: std::fmt::Debug = std::fmt::Debug;\n }\n     \",\n-            \"\n+            r\"\n use std::fmt::Debug;\n \n fn main() {\n@@ -558,7 +558,7 @@ fn main() {\n     fn replaces_all_affected_paths_mod() {\n         check_assist(\n             replace_qualified_name_with_use,\n-            \"\n+            r\"\n mod m {\n     fn f() {\n         std::fmt::Debug<|>;\n@@ -573,7 +573,7 @@ fn f() {\n     std::fmt::Debug;\n }\n     \",\n-            \"\n+            r\"\n mod m {\n     use std::fmt::Debug;\n \n@@ -597,7 +597,7 @@ fn f() {\n     fn does_not_replace_in_submodules() {\n         check_assist(\n             replace_qualified_name_with_use,\n-            \"\n+            r\"\n fn main() {\n     std::fmt::Debug<|>;\n }\n@@ -608,7 +608,7 @@ mod sub {\n     }\n }\n     \",\n-            \"\n+            r\"\n use std::fmt::Debug;\n \n fn main() {\n@@ -628,14 +628,14 @@ mod sub {\n     fn does_not_replace_in_use() {\n         check_assist(\n             replace_qualified_name_with_use,\n-            \"\n+            r\"\n use std::fmt::Display;\n \n fn main() {\n     std::fmt<|>;\n }\n     \",\n-            \"\n+            r\"\n use std::fmt::{self, Display};\n \n fn main() {"}]}