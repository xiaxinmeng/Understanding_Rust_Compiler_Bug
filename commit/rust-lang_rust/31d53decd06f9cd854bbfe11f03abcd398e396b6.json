{"sha": "31d53decd06f9cd854bbfe11f03abcd398e396b6", "node_id": "MDY6Q29tbWl0NzI0NzEyOjMxZDUzZGVjZDA2ZjljZDg1NGJiZmUxMWYwM2FiY2QzOThlMzk2YjY=", "commit": {"author": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2020-07-09T18:50:48Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-07-09T18:50:48Z"}, "message": "Rollup merge of #74184 - Manishearth:doc-intra-doc, r=GuillaumeGomez\n\nAdd docs for intra-doc-links\n\nFixes https://github.com/rust-lang/rust/issues/66000\n\nHmm, for some reason my push closed the previous PR", "tree": {"sha": "2a84602bfe48f750d246895ff7d16ab5d9bad0f5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2a84602bfe48f750d246895ff7d16ab5d9bad0f5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/31d53decd06f9cd854bbfe11f03abcd398e396b6", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfB2cICRBK7hj4Ov3rIwAAdHIIAKDtLWSBK7DOkvlYaCbUL/jZ\nqqLqEngFY7VzwyPyPCRfVxZEeQ0iQ/mnADk1p4w3glUFEeDgB/E0C/aXswa4fj1K\nLuuKz2uJg9YErTPIiZDPLTl5aTh92m24MDiXLOhrFFdhKv3Ugrdomwb9N7t2UhZL\nNyXQCPz8FOgP3UmAhwzXTwxFW9P6f68tsFsK6ZqhaNBHMENmSOT79tsc76sNQgHH\n1DJrpWs+PYm9ytJnG+WHO07s93XiMpCdfCaFzAVhNW/vAUF4aDJC9J4NdJ5Psb7K\nM/gnzjClR9IRm6/gfAfikwhIVM+IxaLQzH5eGRoPN6Y6U7+6C2lYXqmQwLAJ/9w=\n=38ys\n-----END PGP SIGNATURE-----\n", "payload": "tree 2a84602bfe48f750d246895ff7d16ab5d9bad0f5\nparent d4d11118ef55501a73d423651e45c0102afd0209\nparent 36a229b28db2d96105769afa001baeb5cd99ca15\nauthor Manish Goregaokar <manishsmail@gmail.com> 1594320648 -0700\ncommitter GitHub <noreply@github.com> 1594320648 -0700\n\nRollup merge of #74184 - Manishearth:doc-intra-doc, r=GuillaumeGomez\n\nAdd docs for intra-doc-links\n\nFixes https://github.com/rust-lang/rust/issues/66000\n\nHmm, for some reason my push closed the previous PR\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/31d53decd06f9cd854bbfe11f03abcd398e396b6", "html_url": "https://github.com/rust-lang/rust/commit/31d53decd06f9cd854bbfe11f03abcd398e396b6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/31d53decd06f9cd854bbfe11f03abcd398e396b6/comments", "author": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d4d11118ef55501a73d423651e45c0102afd0209", "url": "https://api.github.com/repos/rust-lang/rust/commits/d4d11118ef55501a73d423651e45c0102afd0209", "html_url": "https://github.com/rust-lang/rust/commit/d4d11118ef55501a73d423651e45c0102afd0209"}, {"sha": "36a229b28db2d96105769afa001baeb5cd99ca15", "url": "https://api.github.com/repos/rust-lang/rust/commits/36a229b28db2d96105769afa001baeb5cd99ca15", "html_url": "https://github.com/rust-lang/rust/commit/36a229b28db2d96105769afa001baeb5cd99ca15"}], "stats": {"total": 72, "additions": 42, "deletions": 30}, "files": [{"sha": "eea674f2b84b9193d16322cff968cfb5b285d798", "filename": "src/doc/rustdoc/src/unstable-features.md", "status": "modified", "additions": 42, "deletions": 30, "changes": 72, "blob_url": "https://github.com/rust-lang/rust/blob/31d53decd06f9cd854bbfe11f03abcd398e396b6/src%2Fdoc%2Frustdoc%2Fsrc%2Funstable-features.md", "raw_url": "https://github.com/rust-lang/rust/raw/31d53decd06f9cd854bbfe11f03abcd398e396b6/src%2Fdoc%2Frustdoc%2Fsrc%2Funstable-features.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Frustdoc%2Fsrc%2Funstable-features.md?ref=31d53decd06f9cd854bbfe11f03abcd398e396b6", "patch": "@@ -38,50 +38,62 @@ future.\n Attempting to use these error numbers on stable will result in the code sample being interpreted as\n plain text.\n \n-### Linking to items by type\n+### Linking to items by name\n \n-As designed in [RFC 1946], Rustdoc can parse paths to items when you use them as links. To resolve\n-these type names, it uses the items currently in-scope, either by declaration or by `use` statement.\n-For modules, the \"active scope\" depends on whether the documentation is written outside the module\n-(as `///` comments on the `mod` statement) or inside the module (at `//!` comments inside the file\n-or block). For all other items, it uses the enclosing module's scope.\n+Rustdoc is capable of directly linking to other rustdoc pages in Markdown documentation using the path of item as a link.\n \n-[RFC 1946]: https://github.com/rust-lang/rfcs/pull/1946\n-\n-For example, in the following code:\n+For example, in the following code all of the links will link to the rustdoc page for `Bar`:\n \n ```rust\n-/// Does the thing.\n-pub fn do_the_thing(_: SomeType) {\n-    println!(\"Let's do the thing!\");\n-}\n+/// This struct is not [Bar]\n+pub struct Foo1;\n+\n+/// This struct is also not [bar](Bar)\n+pub struct Foo2;\n+\n+/// This struct is also not [bar][b]\n+///\n+/// [b]: Bar\n+pub struct Foo3;\n+\n+/// This struct is also not [`Bar`]\n+pub struct Foo4;\n \n-/// Token you use to [`do_the_thing`].\n-pub struct SomeType;\n+pub struct Bar;\n ```\n \n-The link to ``[`do_the_thing`]`` in `SomeType`'s docs will properly link to the page for `fn\n-do_the_thing`. Note that here, rustdoc will insert the link target for you, but manually writing the\n-target out also works:\n+You can refer to anything in scope, and use paths, including `Self`. You may also use `foo()` and `foo!()` to refer to methods/functions and macros respectively.\n \n-```rust\n-pub mod some_module {\n-    /// Token you use to do the thing.\n-    pub struct SomeStruct;\n-}\n+```rust,edition2018\n+use std::sync::mpsc::Receiver;\n \n-/// Does the thing. Requires one [`SomeStruct`] for the thing to work.\n+/// This is an version of [`Receiver`], with support for [`std::future`].\n ///\n-/// [`SomeStruct`]: some_module::SomeStruct\n-pub fn do_the_thing(_: some_module::SomeStruct) {\n-    println!(\"Let's do the thing!\");\n+/// You can obtain a [`std::future::Future`] by calling [`Self::recv()`].\n+pub struct AsyncReceiver<T> {\n+    sender: Receiver<T>\n+}\n+\n+impl<T> AsyncReceiver<T> {\n+    pub async fn recv() -> T {\n+        unimplemented!()\n+    }\n }\n ```\n \n-For more details, check out [the RFC][RFC 1946], and see [the tracking issue][43466] for more\n-information about what parts of the feature are available.\n+Paths in Rust have three namespaces: type, value, and macro. Items from these namespaces are allowed to overlap. In case of ambiguity, rustdoc will warn about the ambiguity and ask you to disambiguate, which can be done by using a prefix like `struct@`, `enum@`, `type@`, `trait@`, `union@`, `const@`, `static@`, `value@`, `function@`, `mod@`, `fn@`, `module@`, `method@` , `macro@`, or `derive@`:\n+\n+```rust\n+/// See also: [`Foo`](struct@Foo)\n+struct Bar;\n+\n+/// This is different from [`Foo`](fn@Foo)\n+struct Foo {}\n+\n+fn Foo() {}\n+```\n \n-[43466]: https://github.com/rust-lang/rust/issues/43466\n+Note: Because of how `macro_rules` macros are scoped in Rust, the intra-doc links of a `macro_rules` macro will be resolved relative to the crate root, as opposed to the module it is defined in.\n \n ## Extensions to the `#[doc]` attribute\n "}]}