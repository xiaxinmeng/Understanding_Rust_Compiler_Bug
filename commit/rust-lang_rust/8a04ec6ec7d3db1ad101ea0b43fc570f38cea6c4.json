{"sha": "8a04ec6ec7d3db1ad101ea0b43fc570f38cea6c4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhhMDRlYzZlYzdkM2RiMWFkMTAxZWEwYjQzZmM1NzBmMzhjZWE2YzQ=", "commit": {"author": {"name": "rchaser53", "email": "tayoshizawa29@gmail.com", "date": "2019-04-13T15:23:10Z"}, "committer": {"name": "rchaser53", "email": "tayoshizawa29@gmail.com", "date": "2019-04-13T15:23:10Z"}, "message": "fix not to emit version", "tree": {"sha": "632038e33a216c3351dbde150455e34232f808e2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/632038e33a216c3351dbde150455e34232f808e2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8a04ec6ec7d3db1ad101ea0b43fc570f38cea6c4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8a04ec6ec7d3db1ad101ea0b43fc570f38cea6c4", "html_url": "https://github.com/rust-lang/rust/commit/8a04ec6ec7d3db1ad101ea0b43fc570f38cea6c4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8a04ec6ec7d3db1ad101ea0b43fc570f38cea6c4/comments", "author": {"login": "rchaser53", "id": 9676954, "node_id": "MDQ6VXNlcjk2NzY5NTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/9676954?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchaser53", "html_url": "https://github.com/rchaser53", "followers_url": "https://api.github.com/users/rchaser53/followers", "following_url": "https://api.github.com/users/rchaser53/following{/other_user}", "gists_url": "https://api.github.com/users/rchaser53/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchaser53/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchaser53/subscriptions", "organizations_url": "https://api.github.com/users/rchaser53/orgs", "repos_url": "https://api.github.com/users/rchaser53/repos", "events_url": "https://api.github.com/users/rchaser53/events{/privacy}", "received_events_url": "https://api.github.com/users/rchaser53/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rchaser53", "id": 9676954, "node_id": "MDQ6VXNlcjk2NzY5NTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/9676954?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchaser53", "html_url": "https://github.com/rchaser53", "followers_url": "https://api.github.com/users/rchaser53/followers", "following_url": "https://api.github.com/users/rchaser53/following{/other_user}", "gists_url": "https://api.github.com/users/rchaser53/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchaser53/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchaser53/subscriptions", "organizations_url": "https://api.github.com/users/rchaser53/orgs", "repos_url": "https://api.github.com/users/rchaser53/repos", "events_url": "https://api.github.com/users/rchaser53/events{/privacy}", "received_events_url": "https://api.github.com/users/rchaser53/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "378b28b06e550bf7fb1c01e9efa1f3ef0d2aceb6", "url": "https://api.github.com/repos/rust-lang/rust/commits/378b28b06e550bf7fb1c01e9efa1f3ef0d2aceb6", "html_url": "https://github.com/rust-lang/rust/commit/378b28b06e550bf7fb1c01e9efa1f3ef0d2aceb6"}], "stats": {"total": 17, "additions": 14, "deletions": 3}, "files": [{"sha": "59b76a54279229e9492740c980922681e5399b5b", "filename": "src/cargo-fmt/main.rs", "status": "modified", "additions": 14, "deletions": 3, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/8a04ec6ec7d3db1ad101ea0b43fc570f38cea6c4/src%2Fcargo-fmt%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8a04ec6ec7d3db1ad101ea0b43fc570f38cea6c4/src%2Fcargo-fmt%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcargo-fmt%2Fmain.rs?ref=8a04ec6ec7d3db1ad101ea0b43fc570f38cea6c4", "patch": "@@ -79,7 +79,7 @@ fn execute() -> i32 {\n     }\n \n     if matches.opt_present(\"version\") {\n-        return handle_command_status(get_version(verbosity), &opts);\n+        return handle_command_status(get_version(), &opts);\n     }\n \n     let strategy = CargoFmtStrategy::from_matches(&matches);\n@@ -122,8 +122,19 @@ fn handle_command_status(status: Result<i32, io::Error>, opts: &getopts::Options\n     }\n }\n \n-fn get_version(verbosity: Verbosity) -> Result<i32, io::Error> {\n-    run_rustfmt(&BTreeSet::new(), &[String::from(\"--version\")], verbosity)\n+fn get_version() -> Result<i32, io::Error> {\n+    let mut status = vec![];\n+    let mut command = Command::new(\"rustfmt\")\n+        .stdout(std::process::Stdio::inherit())\n+        .args(&[String::from(\"--version\")])\n+        .spawn()?;\n+    status.push(command.wait()?);\n+\n+    Ok(status\n+        .iter()\n+        .filter_map(|s| if s.success() { None } else { s.code() })\n+        .next()\n+        .unwrap_or(SUCCESS))\n }\n \n fn format_crate(verbosity: Verbosity, strategy: &CargoFmtStrategy) -> Result<i32, io::Error> {"}]}