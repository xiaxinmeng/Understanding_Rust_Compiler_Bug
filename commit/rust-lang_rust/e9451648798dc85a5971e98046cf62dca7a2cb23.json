{"sha": "e9451648798dc85a5971e98046cf62dca7a2cb23", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU5NDUxNjQ4Nzk4ZGM4NWE1OTcxZTk4MDQ2Y2Y2MmRjYTdhMmNiMjM=", "commit": {"author": {"name": "Marijn Haverbeke", "email": "marijnh@gmail.com", "date": "2011-09-13T11:40:38Z"}, "committer": {"name": "Marijn Haverbeke", "email": "marijnh@gmail.com", "date": "2011-09-13T11:40:38Z"}, "message": "Always warn when implicitly copying a generic type", "tree": {"sha": "63c1dc59592dd3e9996b5c7346d5e40d7480f8aa", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/63c1dc59592dd3e9996b5c7346d5e40d7480f8aa"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e9451648798dc85a5971e98046cf62dca7a2cb23", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e9451648798dc85a5971e98046cf62dca7a2cb23", "html_url": "https://github.com/rust-lang/rust/commit/e9451648798dc85a5971e98046cf62dca7a2cb23", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e9451648798dc85a5971e98046cf62dca7a2cb23/comments", "author": {"login": "marijnh", "id": 144427, "node_id": "MDQ6VXNlcjE0NDQyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/144427?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marijnh", "html_url": "https://github.com/marijnh", "followers_url": "https://api.github.com/users/marijnh/followers", "following_url": "https://api.github.com/users/marijnh/following{/other_user}", "gists_url": "https://api.github.com/users/marijnh/gists{/gist_id}", "starred_url": "https://api.github.com/users/marijnh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marijnh/subscriptions", "organizations_url": "https://api.github.com/users/marijnh/orgs", "repos_url": "https://api.github.com/users/marijnh/repos", "events_url": "https://api.github.com/users/marijnh/events{/privacy}", "received_events_url": "https://api.github.com/users/marijnh/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marijnh", "id": 144427, "node_id": "MDQ6VXNlcjE0NDQyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/144427?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marijnh", "html_url": "https://github.com/marijnh", "followers_url": "https://api.github.com/users/marijnh/followers", "following_url": "https://api.github.com/users/marijnh/following{/other_user}", "gists_url": "https://api.github.com/users/marijnh/gists{/gist_id}", "starred_url": "https://api.github.com/users/marijnh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marijnh/subscriptions", "organizations_url": "https://api.github.com/users/marijnh/orgs", "repos_url": "https://api.github.com/users/marijnh/repos", "events_url": "https://api.github.com/users/marijnh/events{/privacy}", "received_events_url": "https://api.github.com/users/marijnh/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "38e86d708b91d20c918bbe8b1fc9b93acacac44c", "url": "https://api.github.com/repos/rust-lang/rust/commits/38e86d708b91d20c918bbe8b1fc9b93acacac44c", "html_url": "https://github.com/rust-lang/rust/commit/38e86d708b91d20c918bbe8b1fc9b93acacac44c"}], "stats": {"total": 22, "additions": 10, "deletions": 12}, "files": [{"sha": "2beabf5ae3d1f54037421780086f739b5c17ee0b", "filename": "src/comp/middle/alias.rs", "status": "modified", "additions": 10, "deletions": 12, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/e9451648798dc85a5971e98046cf62dca7a2cb23/src%2Fcomp%2Fmiddle%2Falias.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e9451648798dc85a5971e98046cf62dca7a2cb23/src%2Fcomp%2Fmiddle%2Falias.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Falias.rs?ref=e9451648798dc85a5971e98046cf62dca7a2cb23", "patch": "@@ -399,16 +399,15 @@ fn test_scope(cx: ctx, sc: scope, r: restrict, p: ast::path) {\n       _ {}\n     }\n     if prob != valid && cant_copy(cx, r) {\n-        let msg =\n-            alt prob {\n-              overwritten(sp, wpt) {\n-                {span: sp, msg: \"overwriting \" + ast_util::path_name(wpt)}\n-              }\n-              val_taken(sp, vpt) {\n-                {span: sp,\n-                 msg: \"taking the value of \" + ast_util::path_name(vpt)}\n-              }\n-            };\n+        let msg = alt prob {\n+          overwritten(sp, wpt) {\n+            {span: sp, msg: \"overwriting \" + ast_util::path_name(wpt)}\n+          }\n+          val_taken(sp, vpt) {\n+            {span: sp,\n+             msg: \"taking the value of \" + ast_util::path_name(vpt)}\n+          }\n+        };\n         cx.tcx.sess.span_err(msg.span,\n                              msg.msg + \" will invalidate reference \" +\n                                  ast_util::path_name(p) +\n@@ -515,7 +514,7 @@ fn copy_is_expensive(tcx: ty::ctxt, ty: ty::t) -> bool {\n           ty::ty_constr(t, _) | ty::ty_res(_, t, _) { score_ty(tcx, t) }\n           ty::ty_fn(_, _, _, _, _) | ty::ty_native_fn(_, _, _) |\n           ty::ty_obj(_) { 4u }\n-          ty::ty_str. | ty::ty_vec(_) { 50u }\n+          ty::ty_str. | ty::ty_vec(_) | ty::ty_param(_, _) { 50u }\n           ty::ty_uniq(t) { 1u + score_ty(tcx, t) }\n           ty::ty_tag(_, ts) | ty::ty_tup(ts) {\n             let sum = 0u;\n@@ -527,7 +526,6 @@ fn copy_is_expensive(tcx: ty::ctxt, ty: ty::t) -> bool {\n             for f in fs { sum += score_ty(tcx, f.mt.ty); }\n             sum\n           }\n-          ty::ty_param(_, _) { 5u }\n         };\n     }\n     ret score_ty(tcx, ty) > 8u;"}]}