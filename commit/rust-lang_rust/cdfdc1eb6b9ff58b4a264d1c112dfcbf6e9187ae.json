{"sha": "cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNkZmRjMWViNmI5ZmY1OGI0YTI2NGQxYzExMmRmY2JmNmU5MTg3YWU=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2014-01-25T05:00:31Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2014-01-26T23:42:15Z"}, "message": "Move extra::flate to libflate\n\nThis is hopefully the beginning of the long-awaited dissolution of libextra.\nUsing the newly created build infrastructure for building libraries, I decided\nto move the first module out of libextra.\n\nWhile not being a particularly meaty module in and of itself, the flate module\nis required by rustc and additionally has a native C dependency. I was able to\nvery easily split out the C dependency from rustrt, update librustc, and\nmagically everything gets installed to the right locations and built\nautomatically.\n\nThis is meant to be a proof-of-concept commit to how easy it is to remove\nmodules from libextra now. I didn't put any effort into modernizing the\ninterface of libflate or updating it other than to remove the one glob import it\nhad.", "tree": {"sha": "648f2dad8b0b1d0a079a569deaf304e241b15512", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/648f2dad8b0b1d0a079a569deaf304e241b15512"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae", "html_url": "https://github.com/rust-lang/rust/commit/cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "26114838944128ffe66d1e9fc897cb45b1a5eb1d", "url": "https://api.github.com/repos/rust-lang/rust/commits/26114838944128ffe66d1e9fc897cb45b1a5eb1d", "html_url": "https://github.com/rust-lang/rust/commit/26114838944128ffe66d1e9fc897cb45b1a5eb1d"}], "stats": {"total": 39, "additions": 25, "deletions": 14}, "files": [{"sha": "16c6db3859ce014db77a4424ecfd2f66a23f6bd4", "filename": "doc/index.md", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae/doc%2Findex.md", "raw_url": "https://github.com/rust-lang/rust/raw/cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae/doc%2Findex.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/doc%2Findex.md?ref=cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae", "patch": "@@ -37,6 +37,8 @@ li {list-style-type: none; }\n * [The Rust parser, `libsyntax`](syntax/index.html)\n * [The Rust compiler, `librustc`](rustc/index.html)\n \n+* [The `flate` compression library](flate/index.html)\n+\n # Tooling\n \n * [The `rustdoc` manual](rustdoc.html)\n@@ -47,11 +49,11 @@ li {list-style-type: none; }\n * [Language FAQ](complement-lang-faq.html)\n * [Project FAQ](complement-project-faq.html)\n * [Usage FAQ](complement-usage-faq.html)\n-* [Code cheatsheet](complement-cheatsheet.html) - \"How do I do X?\"  \n+* [Code cheatsheet](complement-cheatsheet.html) - \"How do I do X?\"\n * [How to submit a bug report](complement-bugreport.html)\n \n # External resources\n \n-* The Rust [IRC channel](http://chat.mibbit.com/?server=irc.mozilla.org&channel=%23rust) - `#rust` on irc.mozilla.org  \n+* The Rust [IRC channel](http://chat.mibbit.com/?server=irc.mozilla.org&channel=%23rust) - `#rust` on irc.mozilla.org\n * The Rust community on [Reddit](http://reddit.com/r/rust)\n * The Rust [wiki](http://github.com/mozilla/rust/wiki)"}, {"sha": "dc374549dad94691c31f9a0cdda2ce7dd381a49f", "filename": "mk/crates.mk", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae/mk%2Fcrates.mk", "raw_url": "https://github.com/rust-lang/rust/raw/cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae/mk%2Fcrates.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fcrates.mk?ref=cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae", "patch": "@@ -49,7 +49,7 @@\n # automatically generated for all stage/host/target combinations.\n ################################################################################\n \n-TARGET_CRATES := std extra green rustuv native\n+TARGET_CRATES := std extra green rustuv native flate\n HOST_CRATES := syntax rustc rustdoc rustpkg\n CRATES := $(TARGET_CRATES) $(HOST_CRATES)\n TOOLS := compiletest rustpkg rustdoc rustc\n@@ -60,9 +60,10 @@ DEPS_green := std\n DEPS_rustuv := std native:uv native:uv_support\n DEPS_native := std\n DEPS_syntax := std extra\n-DEPS_rustc := syntax native:rustllvm\n+DEPS_rustc := syntax native:rustllvm flate\n DEPS_rustdoc := rustc native:sundown\n DEPS_rustpkg := rustc\n+DEPS_flate := std native:miniz\n \n TOOL_DEPS_compiletest := extra green rustuv\n TOOL_DEPS_rustpkg := rustpkg green rustuv"}, {"sha": "269491649bb281470e88b20c2401917925cbbf66", "filename": "mk/rt.mk", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae/mk%2Frt.mk", "raw_url": "https://github.com/rust-lang/rust/raw/cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae/mk%2Frt.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Frt.mk?ref=cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae", "patch": "@@ -35,7 +35,7 @@\n # that's per-target so you're allowed to conditionally add files based on the\n # target.\n ################################################################################\n-NATIVE_LIBS := rustrt sundown uv_support morestack\n+NATIVE_LIBS := rustrt sundown uv_support morestack miniz\n \n # $(1) is the target triple\n define NATIVE_LIBRARIES\n@@ -49,8 +49,8 @@ NATIVE_DEPS_sundown_$(1) := sundown/src/autolink.c \\\n \t\t\tsundown/html/html_smartypants.c \\\n \t\t\tsundown/html/html.c\n NATIVE_DEPS_uv_support_$(1) := rust_uv.c\n+NATIVE_DEPS_miniz_$(1) = miniz.c\n NATIVE_DEPS_rustrt_$(1) := rust_builtin.c \\\n-\t\t\tminiz.c \\\n \t\t\trust_android_dummy.c \\\n \t\t\trust_test_helpers.c \\\n \t\t\trust_try.ll \\"}, {"sha": "b8d3c126d5acf9257bac7241317351fdf9cf75e2", "filename": "mk/tests.mk", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae/mk%2Ftests.mk", "raw_url": "https://github.com/rust-lang/rust/raw/cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae/mk%2Ftests.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Ftests.mk?ref=cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae", "patch": "@@ -855,14 +855,16 @@ $$(TLIB2_T_$(2)_H_$(3))/$$(FT_LIB): \\\n \t\ttmp/$$(FT).rc \\\n \t\t$$(SREQ2_T_$(2)_H_$(3))\n \t@$$(call E, compile_and_link: $$@)\n-\t$$(STAGE2_T_$(2)_H_$(3)) --lib -o $$@ $$<\n+\t$$(STAGE2_T_$(2)_H_$(3)) --lib -o $$@ $$< \\\n+\t  -L \"$$(RT_OUTPUT_DIR_$(2))\"\n \n $(3)/test/$$(FT_DRIVER)-$(2)$$(X_$(2)): \\\n \t\ttmp/$$(FT_DRIVER).rs \\\n \t\t$$(TLIB2_T_$(2)_H_$(3))/$$(FT_LIB) \\\n \t\t$$(SREQ2_T_$(2)_H_$(3))\n \t@$$(call E, compile_and_link: $$@ $$<)\n-\t$$(STAGE2_T_$(2)_H_$(3)) -o $$@ $$<\n+\t$$(STAGE2_T_$(2)_H_$(3)) -o $$@ $$< \\\n+\t  -L \"$$(RT_OUTPUT_DIR_$(2))\"\n \n $(3)/test/$$(FT_DRIVER)-$(2).out: \\\n \t\t$(3)/test/$$(FT_DRIVER)-$(2)$$(X_$(2)) \\"}, {"sha": "5a4fedd2b2a9afcdd65a8b323d6275915df0dcdf", "filename": "src/libextra/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae/src%2Flibextra%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae/src%2Flibextra%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibextra%2Flib.rs?ref=cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae", "patch": "@@ -82,7 +82,6 @@ pub mod rational;\n pub mod complex;\n pub mod stats;\n pub mod semver;\n-pub mod flate;\n pub mod hex;\n pub mod uuid;\n "}, {"sha": "f746fe4ec32a1378cd69c4afe668588e7825defc", "filename": "src/libflate/lib.rs", "status": "renamed", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae/src%2Flibflate%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae/src%2Flibflate%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibflate%2Flib.rs?ref=cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae", "patch": "@@ -14,6 +14,10 @@ Simple compression\n \n */\n \n+#[crate_id = \"flate#0.10-pre\"];\n+#[crate_type = \"rlib\"];\n+#[crate_type = \"dylib\"];\n+#[license = \"MIT/ASL2\"];\n #[allow(missing_doc)];\n \n use std::libc::{c_void, size_t, c_int};\n@@ -23,7 +27,7 @@ use std::vec;\n pub mod rustrt {\n     use std::libc::{c_int, c_void, size_t};\n \n-    #[link(name = \"rustrt\", kind = \"static\")]\n+    #[link(name = \"miniz\", kind = \"static\")]\n     extern {\n         pub fn tdefl_compress_mem_to_heap(psrc_buf: *c_void,\n                                           src_buf_len: size_t,\n@@ -91,7 +95,7 @@ pub fn inflate_bytes_zlib(bytes: &[u8]) -> ~[u8] {\n \n #[cfg(test)]\n mod tests {\n-    use super::*;\n+    use super::{inflate_bytes, deflate_bytes};\n     use std::rand;\n     use std::rand::Rng;\n ", "previous_filename": "src/libextra/flate.rs"}, {"sha": "62232360c3369b5d9207215210630ba26ff9d3ab", "filename": "src/librustc/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae/src%2Flibrustc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae/src%2Flibrustc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Flib.rs?ref=cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae", "patch": "@@ -30,6 +30,7 @@ This API is completely unstable and subject to change.\n #[feature(macro_rules, globs, struct_variant, managed_boxes)];\n \n extern mod extra;\n+extern mod flate;\n extern mod syntax;\n \n use back::link;"}, {"sha": "8b7da1f831065428285920f8dfa535839a4a42b1", "filename": "src/librustc/metadata/loader.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae/src%2Flibrustc%2Fmetadata%2Floader.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae/src%2Flibrustc%2Fmetadata%2Floader.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmetadata%2Floader.rs?ref=cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae", "patch": "@@ -33,7 +33,7 @@ use std::os::consts::{macos, freebsd, linux, android, win32};\n use std::ptr;\n use std::str;\n use std::vec;\n-use extra::flate;\n+use flate;\n \n pub enum Os {\n     OsMacos,"}, {"sha": "9744c395b7c193aa44999801380ce9c6da635591", "filename": "src/librustc/middle/trans/base.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae/src%2Flibrustc%2Fmiddle%2Ftrans%2Fbase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae/src%2Flibrustc%2Fmiddle%2Ftrans%2Fbase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftrans%2Fbase.rs?ref=cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae", "patch": "@@ -2683,7 +2683,7 @@ pub fn crate_ctxt_to_encode_parms<'r>(cx: &'r CrateContext, ie: encoder::encode_\n }\n \n pub fn write_metadata(cx: &CrateContext, crate: &ast::Crate) -> ~[u8] {\n-    use extra::flate;\n+    use flate;\n \n     if !cx.sess.building_library.get() {\n         return ~[]"}, {"sha": "d53adb78a30866b440286a14088d0794aa43b73e", "filename": "src/librustdoc/html/markdown.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs?ref=cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae", "patch": "@@ -16,7 +16,9 @@\n //! functionality through a unit-struct, `Markdown`, which has an implementation\n //! of `fmt::Default`. Example usage:\n //!\n-//! ```rust\n+//! ```rust,ignore\n+//! use rustdoc::html::markdown::Markdown;\n+//!\n //! let s = \"My *markdown* _text_\";\n //! let html = format!(\"{}\", Markdown(s));\n //! // ... something using html"}]}