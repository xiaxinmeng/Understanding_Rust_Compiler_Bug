{"sha": "a56559df1346c44aa058f3a82785f20230a0468f", "node_id": "C_kwDOAAsO6NoAKGE1NjU1OWRmMTM0NmM0NGFhMDU4ZjNhODI3ODVmMjAyMzBhMDQ2OGY", "commit": {"author": {"name": "Jacob Hoffman-Andrews", "email": "github@hoffman-andrews.com", "date": "2021-11-22T05:10:12Z"}, "committer": {"name": "Jacob Hoffman-Andrews", "email": "github@hoffman-andrews.com", "date": "2021-11-22T09:13:27Z"}, "message": "Set color for <a> in a more straightforward way\n\nPreviously, we set the default color for <a> tags to black, and then\nhad an override with a bunch of not() clauses to set anchors in\ndocblocks to blue.\n\nInstead, we should set the default color for <a> to blue (or equivalent\nin other themes), and override it for places like the sidebar or search\nresults, where we don't want them to be styled as links.", "tree": {"sha": "7340a539b54955022be4981f94d7d8ff88969648", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7340a539b54955022be4981f94d7d8ff88969648"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a56559df1346c44aa058f3a82785f20230a0468f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a56559df1346c44aa058f3a82785f20230a0468f", "html_url": "https://github.com/rust-lang/rust/commit/a56559df1346c44aa058f3a82785f20230a0468f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a56559df1346c44aa058f3a82785f20230a0468f/comments", "author": {"login": "jsha", "id": 220205, "node_id": "MDQ6VXNlcjIyMDIwNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/220205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsha", "html_url": "https://github.com/jsha", "followers_url": "https://api.github.com/users/jsha/followers", "following_url": "https://api.github.com/users/jsha/following{/other_user}", "gists_url": "https://api.github.com/users/jsha/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsha/subscriptions", "organizations_url": "https://api.github.com/users/jsha/orgs", "repos_url": "https://api.github.com/users/jsha/repos", "events_url": "https://api.github.com/users/jsha/events{/privacy}", "received_events_url": "https://api.github.com/users/jsha/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jsha", "id": 220205, "node_id": "MDQ6VXNlcjIyMDIwNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/220205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsha", "html_url": "https://github.com/jsha", "followers_url": "https://api.github.com/users/jsha/followers", "following_url": "https://api.github.com/users/jsha/following{/other_user}", "gists_url": "https://api.github.com/users/jsha/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsha/subscriptions", "organizations_url": "https://api.github.com/users/jsha/orgs", "repos_url": "https://api.github.com/users/jsha/repos", "events_url": "https://api.github.com/users/jsha/events{/privacy}", "received_events_url": "https://api.github.com/users/jsha/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f377ac5e665911877ea9d94708fc2357e08eab9c", "url": "https://api.github.com/repos/rust-lang/rust/commits/f377ac5e665911877ea9d94708fc2357e08eab9c", "html_url": "https://github.com/rust-lang/rust/commit/f377ac5e665911877ea9d94708fc2357e08eab9c"}], "stats": {"total": 84, "additions": 56, "deletions": 28}, "files": [{"sha": "f4d6b39eedffad6db614c11600637fdb131132ab", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a56559df1346c44aa058f3a82785f20230a0468f/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/a56559df1346c44aa058f3a82785f20230a0468f/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=a56559df1346c44aa058f3a82785f20230a0468f", "patch": "@@ -1079,10 +1079,6 @@ a.test-arrow:hover{\n \ttext-decoration: none;\n }\n \n-.section-header a {\n-\tcolor: inherit;\n-}\n-\n .code-attribute {\n \tfont-weight: 300;\n }"}, {"sha": "a808dbd9ef1582b31e6fdeda54f06ef3a5b8d0a2", "filename": "src/librustdoc/html/static/css/themes/ayu.css", "status": "modified", "additions": 11, "deletions": 6, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/a56559df1346c44aa058f3a82785f20230a0468f/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "raw_url": "https://github.com/rust-lang/rust/raw/a56559df1346c44aa058f3a82785f20230a0468f/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css?ref=a56559df1346c44aa058f3a82785f20230a0468f", "patch": "@@ -214,18 +214,23 @@ nav.main .separator {\n \tborder: 1px solid #5c6773;\n }\n a {\n+\tcolor: #39AFD7;\n+}\n+a.srclink,\n+a#toggle-all-docs,\n+#source-sidebar a,\n+pre.rust a,\n+.sidebar a,\n+.in-band a {\n \tcolor: #c5c5c5;\n }\n+.search-results a {\n+\tcolor: #0096cf;\n+}\n body.source .example-wrap pre.rust a {\n \tbackground: #333;\n }\n \n-.docblock:not(.item-decl) a:not(.srclink):not(.test-arrow),\n-.docblock-short a:not(.srclink):not(.test-arrow), .item-info a,\n-#help a {\n-\tcolor: #39AFD7;\n-}\n-\n details.rustdoc-toggle > summary.hideme > span,\n details.rustdoc-toggle > summary::before,\n details.undocumented > summary::before {"}, {"sha": "f0ac129b997dd5f809bf4d0fa36442623b25b1c2", "filename": "src/librustdoc/html/static/css/themes/dark.css", "status": "modified", "additions": 14, "deletions": 9, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/a56559df1346c44aa058f3a82785f20230a0468f/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "raw_url": "https://github.com/rust-lang/rust/raw/a56559df1346c44aa058f3a82785f20230a0468f/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css?ref=a56559df1346c44aa058f3a82785f20230a0468f", "patch": "@@ -174,22 +174,27 @@ nav.main .current {\n nav.main .separator {\n \tborder-color: #eee;\n }\n+\n a {\n-\tcolor: #ddd;\n+\tcolor: #D2991D;\n }\n-body.source .example-wrap pre.rust a {\n-\tbackground: #333;\n+a.srclink,\n+a#toggle-all-docs,\n+#source-sidebar a,\n+pre.rust a,\n+.sidebar a,\n+.in-band a {\n+\tcolor: #ddd;\n }\n-\n-.docblock:not(.item-decl) a:not(.srclink):not(.test-arrow),\n-.docblock-short a:not(.srclink):not(.test-arrow), .item-info a,\n-#help a {\n-\tcolor: #D2991D;\n+.search-results a {\n+\tcolor: #ddd;\n }\n-\n a.test-arrow {\n \tcolor: #dedede;\n }\n+body.source .example-wrap pre.rust a {\n+\tbackground: #333;\n+}\n \n details.rustdoc-toggle > summary.hideme > span,\n details.rustdoc-toggle > summary::before,"}, {"sha": "05f12fc365d74855adaf7e3b60d8b7956a57e306", "filename": "src/librustdoc/html/static/css/themes/light.css", "status": "modified", "additions": 14, "deletions": 9, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/a56559df1346c44aa058f3a82785f20230a0468f/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "raw_url": "https://github.com/rust-lang/rust/raw/a56559df1346c44aa058f3a82785f20230a0468f/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css?ref=a56559df1346c44aa058f3a82785f20230a0468f", "patch": "@@ -169,22 +169,27 @@ nav.main .current {\n nav.main .separator {\n \tborder: 1px solid #000;\n }\n+\n a {\n-\tcolor: #000;\n+\tcolor: #3873AD;\n }\n-body.source .example-wrap pre.rust a {\n-\tbackground: #eee;\n+a.srclink,\n+a#toggle-all-docs,\n+#source-sidebar a,\n+pre.rust a,\n+.sidebar a,\n+.in-band a {\n+\tcolor: #000;\n }\n-\n-.docblock:not(.item-decl) a:not(.srclink):not(.test-arrow),\n-.docblock-short a:not(.srclink):not(.test-arrow), .item-info a,\n-#help a {\n-\tcolor: #3873AD;\n+.search-results a {\n+\tcolor: initial;\n }\n-\n a.test-arrow {\n \tcolor: #f5f5f5;\n }\n+body.source .example-wrap pre.rust a {\n+\tbackground: #eee;\n+}\n \n details.rustdoc-toggle > summary.hideme > span,\n details.rustdoc-toggle > summary::before,"}, {"sha": "6953009604c5e6490cda7f3a17e69d906f31f5da", "filename": "src/test/rustdoc-gui/anchors.goml", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/a56559df1346c44aa058f3a82785f20230a0468f/src%2Ftest%2Frustdoc-gui%2Fanchors.goml", "raw_url": "https://github.com/rust-lang/rust/raw/a56559df1346c44aa058f3a82785f20230a0468f/src%2Ftest%2Frustdoc-gui%2Fanchors.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fanchors.goml?ref=a56559df1346c44aa058f3a82785f20230a0468f", "patch": "@@ -0,0 +1,17 @@\n+goto: file://|DOC_PATH|/test_docs/struct.HeavilyDocumentedStruct.html\n+\n+// Set the theme to light.\n+local-storage: {\"rustdoc-theme\": \"light\", \"rustdoc-use-system-theme\": \"false\"}\n+// We reload the page so the local storage settings are being used.\n+reload:\n+\n+assert-css: (\"#toggle-all-docs\", {\"color\": \"rgba(0, 0, 0, 0)\"})\n+assert-css: (\".fqn .in-band a:nth-of-type(1)\", {\"color\": \"rgba(0, 0, 0, 0)\"})\n+assert-css: (\".fqn .in-band a:nth-of-type(2)\", {\"color\": \"rgba(0, 0, 0, 0)\"})\n+assert-css: (\".srclink\", {\"color\": \"rgba(0, 0, 0, 0)\"})\n+assert-css: (\".srclink\", {\"color\": \"rgba(0, 0, 0, 0)\"})\n+\n+assert-css: (\"#top-doc-prose-title\", {\"color\": \"rgba(0, 0, 0, 0)\"})\n+\n+assert-css: (\".sidebar a\", {\"color\": \"rgba(0, 0, 0, 0)\"})\n+assert-css: (\".in-band a\", {\"color\": \"rgba(0, 0, 0, 0)\"})"}]}