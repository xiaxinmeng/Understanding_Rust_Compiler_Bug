{"sha": "8c292e3cc5bd79f4204e25d0ca7e712e9496d6da", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhjMjkyZTNjYzViZDc5ZjQyMDRlMjVkMGNhN2U3MTJlOTQ5NmQ2ZGE=", "commit": {"author": {"name": "Kirill Bulatov", "email": "mail4score@gmail.com", "date": "2020-12-19T11:18:40Z"}, "committer": {"name": "Kirill Bulatov", "email": "mail4score@gmail.com", "date": "2020-12-19T11:18:40Z"}, "message": "Keep the original completion order in tests", "tree": {"sha": "843a2647054006ebfd81c0dddee4a84f64f58c94", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/843a2647054006ebfd81c0dddee4a84f64f58c94"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8c292e3cc5bd79f4204e25d0ca7e712e9496d6da", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8c292e3cc5bd79f4204e25d0ca7e712e9496d6da", "html_url": "https://github.com/rust-lang/rust/commit/8c292e3cc5bd79f4204e25d0ca7e712e9496d6da", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8c292e3cc5bd79f4204e25d0ca7e712e9496d6da/comments", "author": {"login": "SomeoneToIgnore", "id": 2690773, "node_id": "MDQ6VXNlcjI2OTA3NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/2690773?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SomeoneToIgnore", "html_url": "https://github.com/SomeoneToIgnore", "followers_url": "https://api.github.com/users/SomeoneToIgnore/followers", "following_url": "https://api.github.com/users/SomeoneToIgnore/following{/other_user}", "gists_url": "https://api.github.com/users/SomeoneToIgnore/gists{/gist_id}", "starred_url": "https://api.github.com/users/SomeoneToIgnore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SomeoneToIgnore/subscriptions", "organizations_url": "https://api.github.com/users/SomeoneToIgnore/orgs", "repos_url": "https://api.github.com/users/SomeoneToIgnore/repos", "events_url": "https://api.github.com/users/SomeoneToIgnore/events{/privacy}", "received_events_url": "https://api.github.com/users/SomeoneToIgnore/received_events", "type": "User", "site_admin": false}, "committer": {"login": "SomeoneToIgnore", "id": 2690773, "node_id": "MDQ6VXNlcjI2OTA3NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/2690773?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SomeoneToIgnore", "html_url": "https://github.com/SomeoneToIgnore", "followers_url": "https://api.github.com/users/SomeoneToIgnore/followers", "following_url": "https://api.github.com/users/SomeoneToIgnore/following{/other_user}", "gists_url": "https://api.github.com/users/SomeoneToIgnore/gists{/gist_id}", "starred_url": "https://api.github.com/users/SomeoneToIgnore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SomeoneToIgnore/subscriptions", "organizations_url": "https://api.github.com/users/SomeoneToIgnore/orgs", "repos_url": "https://api.github.com/users/SomeoneToIgnore/repos", "events_url": "https://api.github.com/users/SomeoneToIgnore/events{/privacy}", "received_events_url": "https://api.github.com/users/SomeoneToIgnore/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5fa078f26fed1d951e949df09da82567e9e12404", "url": "https://api.github.com/repos/rust-lang/rust/commits/5fa078f26fed1d951e949df09da82567e9e12404", "html_url": "https://github.com/rust-lang/rust/commit/5fa078f26fed1d951e949df09da82567e9e12404"}], "stats": {"total": 387, "additions": 193, "deletions": 194}, "files": [{"sha": "19ce2482fd4babf364e2dcdd42754a7e445a0b76", "filename": "crates/completion/src/completions/attribute.rs", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/8c292e3cc5bd79f4204e25d0ca7e712e9496d6da/crates%2Fcompletion%2Fsrc%2Fcompletions%2Fattribute.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c292e3cc5bd79f4204e25d0ca7e712e9496d6da/crates%2Fcompletion%2Fsrc%2Fcompletions%2Fattribute.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fcompletion%2Fsrc%2Fcompletions%2Fattribute.rs?ref=8c292e3cc5bd79f4204e25d0ca7e712e9496d6da", "patch": "@@ -428,8 +428,8 @@ struct Test {}\n                 at Hash\n                 at PartialEq\n                 at PartialEq, Eq\n-                at PartialEq, Eq, PartialOrd, Ord\n                 at PartialEq, PartialOrd\n+                at PartialEq, Eq, PartialOrd, Ord\n             \"#]],\n         );\n     }\n@@ -457,10 +457,10 @@ struct Test {}\n                 at Clone, Copy\n                 at Debug\n                 at Default\n-                at Eq\n-                at Eq, PartialOrd, Ord\n                 at Hash\n+                at Eq\n                 at PartialOrd\n+                at Eq, PartialOrd, Ord\n             \"#]],\n         )\n     }\n@@ -472,14 +472,14 @@ struct Test {}\n             expect![[r#\"\n                 at allow(\u2026)\n                 at automatically_derived\n-                at cfg(\u2026)\n                 at cfg_attr(\u2026)\n+                at cfg(\u2026)\n                 at cold\n                 at deny(\u2026)\n                 at deprecated = \"\u2026\"\n                 at derive(\u2026)\n-                at doc = \"\u2026\"\n                 at export_name = \"\u2026\"\n+                at doc = \"\u2026\"\n                 at forbid(\u2026)\n                 at ignore = \"\u2026\"\n                 at inline(\u2026)\n@@ -518,15 +518,15 @@ struct Test {}\n             expect![[r#\"\n                 at allow(\u2026)\n                 at automatically_derived\n-                at cfg(\u2026)\n                 at cfg_attr(\u2026)\n+                at cfg(\u2026)\n                 at cold\n                 at crate_name = \"\"\n                 at deny(\u2026)\n                 at deprecated = \"\u2026\"\n                 at derive(\u2026)\n-                at doc = \"\u2026\"\n                 at export_name = \"\u2026\"\n+                at doc = \"\u2026\"\n                 at feature(\u2026)\n                 at forbid(\u2026)\n                 at global_allocator\n@@ -538,8 +538,8 @@ struct Test {}\n                 at macro_export\n                 at macro_use\n                 at must_use = \"\u2026\"\n-                at no_implicit_prelude\n                 at no_link\n+                at no_implicit_prelude\n                 at no_main\n                 at no_mangle\n                 at no_std"}, {"sha": "551ef17716d1fc4799c8ca4fdc03c302c0eca03d", "filename": "crates/completion/src/completions/dot.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/8c292e3cc5bd79f4204e25d0ca7e712e9496d6da/crates%2Fcompletion%2Fsrc%2Fcompletions%2Fdot.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c292e3cc5bd79f4204e25d0ca7e712e9496d6da/crates%2Fcompletion%2Fsrc%2Fcompletions%2Fdot.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fcompletion%2Fsrc%2Fcompletions%2Fdot.rs?ref=8c292e3cc5bd79f4204e25d0ca7e712e9496d6da", "patch": "@@ -82,8 +82,8 @@ impl S {\n fn foo(s: S) { s.<|> }\n \"#,\n             expect![[r#\"\n-                me bar() fn bar(&self)\n                 fd foo   u32\n+                me bar() fn bar(&self)\n             \"#]],\n         );\n     }\n@@ -98,8 +98,8 @@ impl S {\n }\n \"#,\n             expect![[r#\"\n-                me foo()     fn foo(self)\n                 fd the_field (u32,)\n+                me foo()     fn foo(self)\n             \"#]],\n         )\n     }\n@@ -114,8 +114,8 @@ impl A {\n }\n \"#,\n             expect![[r#\"\n-                me foo()     fn foo(&self)\n                 fd the_field (u32, i32)\n+                me foo()     fn foo(&self)\n             \"#]],\n         )\n     }\n@@ -147,8 +147,8 @@ mod inner {\n fn foo(a: inner::A) { a.<|> }\n \"#,\n             expect![[r#\"\n-                fd crate_field u32\n                 fd pub_field   u32\n+                fd crate_field u32\n                 fd super_field u32\n             \"#]],\n         );"}, {"sha": "1859dec70861f19bca786ced4cdf6c76b70b6596", "filename": "crates/completion/src/completions/keyword.rs", "status": "modified", "additions": 71, "deletions": 71, "changes": 142, "blob_url": "https://github.com/rust-lang/rust/blob/8c292e3cc5bd79f4204e25d0ca7e712e9496d6da/crates%2Fcompletion%2Fsrc%2Fcompletions%2Fkeyword.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c292e3cc5bd79f4204e25d0ca7e712e9496d6da/crates%2Fcompletion%2Fsrc%2Fcompletions%2Fkeyword.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fcompletion%2Fsrc%2Fcompletions%2Fkeyword.rs?ref=8c292e3cc5bd79f4204e25d0ca7e712e9496d6da", "patch": "@@ -223,21 +223,21 @@ mod tests {\n         check(\n             r\"m<|>\",\n             expect![[r#\"\n-                kw const\n-                kw enum\n-                kw extern\n                 kw fn\n+                kw use\n                 kw impl\n-                kw mod\n-                kw pub\n-                kw pub(crate)\n-                kw static\n-                kw struct\n                 kw trait\n-                kw type\n+                kw enum\n+                kw struct\n                 kw union\n+                kw mod\n+                kw const\n+                kw type\n+                kw static\n+                kw extern\n                 kw unsafe\n-                kw use\n+                kw pub(crate)\n+                kw pub\n             \"#]],\n         );\n     }\n@@ -247,23 +247,23 @@ mod tests {\n         check(\n             r\"fn quux() { <|> }\",\n             expect![[r#\"\n-                kw const\n-                kw extern\n                 kw fn\n+                kw use\n+                kw impl\n+                kw trait\n+                kw match\n+                kw while\n+                kw loop\n                 kw if\n                 kw if let\n-                kw impl\n                 kw let\n-                kw loop\n-                kw match\n                 kw mod\n-                kw return\n-                kw static\n-                kw trait\n+                kw const\n                 kw type\n+                kw static\n+                kw extern\n                 kw unsafe\n-                kw use\n-                kw while\n+                kw return\n             \"#]],\n         );\n     }\n@@ -273,23 +273,23 @@ mod tests {\n         check(\n             r\"fn quux() { if true { <|> } }\",\n             expect![[r#\"\n-                kw const\n-                kw extern\n                 kw fn\n+                kw use\n+                kw impl\n+                kw trait\n+                kw match\n+                kw while\n+                kw loop\n                 kw if\n                 kw if let\n-                kw impl\n                 kw let\n-                kw loop\n-                kw match\n                 kw mod\n-                kw return\n-                kw static\n-                kw trait\n+                kw const\n                 kw type\n+                kw static\n+                kw extern\n                 kw unsafe\n-                kw use\n-                kw while\n+                kw return\n             \"#]],\n         );\n     }\n@@ -299,25 +299,25 @@ mod tests {\n         check(\n             r#\"fn quux() { if true { () } <|> }\"#,\n             expect![[r#\"\n-                kw const\n-                kw else\n-                kw else if\n-                kw extern\n                 kw fn\n+                kw use\n+                kw impl\n+                kw trait\n+                kw match\n+                kw while\n+                kw loop\n                 kw if\n                 kw if let\n-                kw impl\n                 kw let\n-                kw loop\n-                kw match\n+                kw else\n+                kw else if\n                 kw mod\n-                kw return\n-                kw static\n-                kw trait\n+                kw const\n                 kw type\n+                kw static\n+                kw extern\n                 kw unsafe\n-                kw use\n-                kw while\n+                kw return\n             \"#]],\n         );\n         check_edit(\n@@ -336,13 +336,13 @@ fn quux() -> i32 {\n }\n \"#,\n             expect![[r#\"\n+                kw match\n+                kw while\n+                kw loop\n                 kw if\n                 kw if let\n-                kw loop\n-                kw match\n-                kw return\n                 kw unsafe\n-                kw while\n+                kw return\n             \"#]],\n         );\n     }\n@@ -352,8 +352,8 @@ fn quux() -> i32 {\n         check(\n             r\"trait My { <|> }\",\n             expect![[r#\"\n-                kw const\n                 kw fn\n+                kw const\n                 kw type\n                 kw unsafe\n             \"#]],\n@@ -365,12 +365,12 @@ fn quux() -> i32 {\n         check(\n             r\"impl My { <|> }\",\n             expect![[r#\"\n-                kw const\n                 kw fn\n-                kw pub\n-                kw pub(crate)\n+                kw const\n                 kw type\n                 kw unsafe\n+                kw pub(crate)\n+                kw pub\n             \"#]],\n         );\n     }\n@@ -380,25 +380,25 @@ fn quux() -> i32 {\n         check(\n             r\"fn my() { loop { <|> } }\",\n             expect![[r#\"\n-                kw break\n-                kw const\n-                kw continue\n-                kw extern\n                 kw fn\n+                kw use\n+                kw impl\n+                kw trait\n+                kw match\n+                kw while\n+                kw loop\n                 kw if\n                 kw if let\n-                kw impl\n                 kw let\n-                kw loop\n-                kw match\n                 kw mod\n-                kw return\n-                kw static\n-                kw trait\n+                kw const\n                 kw type\n+                kw static\n+                kw extern\n                 kw unsafe\n-                kw use\n-                kw while\n+                kw continue\n+                kw break\n+                kw return\n             \"#]],\n         );\n     }\n@@ -409,8 +409,8 @@ fn quux() -> i32 {\n             r\"unsafe <|>\",\n             expect![[r#\"\n                 kw fn\n-                kw impl\n                 kw trait\n+                kw impl\n             \"#]],\n         );\n     }\n@@ -421,8 +421,8 @@ fn quux() -> i32 {\n             r\"fn my_fn() { unsafe <|> }\",\n             expect![[r#\"\n                 kw fn\n-                kw impl\n                 kw trait\n+                kw impl\n             \"#]],\n         );\n     }\n@@ -542,12 +542,12 @@ pub mod future {\n         check(\n             r#\"fn main() { let _ = <|> }\"#,\n             expect![[r#\"\n+                kw match\n+                kw while\n+                kw loop\n                 kw if\n                 kw if let\n-                kw loop\n-                kw match\n                 kw return\n-                kw while\n             \"#]],\n         )\n     }\n@@ -562,8 +562,8 @@ struct Foo {\n }\n \"#,\n             expect![[r#\"\n-                kw pub\n                 kw pub(crate)\n+                kw pub\n             \"#]],\n         )\n     }\n@@ -600,12 +600,12 @@ fn foo() {\n }\n \"#,\n             expect![[r#\"\n+                kw match\n+                kw while\n+                kw loop\n                 kw if\n                 kw if let\n-                kw loop\n-                kw match\n                 kw return\n-                kw while\n             \"#]],\n         );\n     }"}, {"sha": "f77864b7752fc922adc684b94586733d32f78872", "filename": "crates/completion/src/completions/mod_.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/8c292e3cc5bd79f4204e25d0ca7e712e9496d6da/crates%2Fcompletion%2Fsrc%2Fcompletions%2Fmod_.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c292e3cc5bd79f4204e25d0ca7e712e9496d6da/crates%2Fcompletion%2Fsrc%2Fcompletions%2Fmod_.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fcompletion%2Fsrc%2Fcompletions%2Fmod_.rs?ref=8c292e3cc5bd79f4204e25d0ca7e712e9496d6da", "patch": "@@ -170,8 +170,8 @@ mod tests {\n             fn ignored_bar() {}\n         \"#,\n             expect![[r#\"\n-                md bar;\n                 md foo;\n+                md bar;\n             \"#]],\n         );\n     }\n@@ -207,8 +207,8 @@ mod tests {\n             fn ignored_bar() {}\n         \"#,\n             expect![[r#\"\n-                md bar;\n                 md foo;\n+                md bar;\n             \"#]],\n         );\n     }"}, {"sha": "0c98e4412e7b0cb786077a85607cda5198e86271", "filename": "crates/completion/src/completions/pattern.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/8c292e3cc5bd79f4204e25d0ca7e712e9496d6da/crates%2Fcompletion%2Fsrc%2Fcompletions%2Fpattern.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c292e3cc5bd79f4204e25d0ca7e712e9496d6da/crates%2Fcompletion%2Fsrc%2Fcompletions%2Fpattern.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fcompletion%2Fsrc%2Fcompletions%2Fpattern.rs?ref=8c292e3cc5bd79f4204e25d0ca7e712e9496d6da", "patch": "@@ -66,10 +66,10 @@ fn foo() {\n }\n \"#,\n             expect![[r#\"\n-                st Bar\n                 en E\n-                ev X   ()\n                 ct Z\n+                st Bar\n+                ev X   ()\n                 md m\n             \"#]],\n         );"}, {"sha": "d6db82a93bbc49fa5529dd7be59dc32ec87f0850", "filename": "crates/completion/src/completions/postfix.rs", "status": "modified", "additions": 31, "deletions": 31, "changes": 62, "blob_url": "https://github.com/rust-lang/rust/blob/8c292e3cc5bd79f4204e25d0ca7e712e9496d6da/crates%2Fcompletion%2Fsrc%2Fcompletions%2Fpostfix.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c292e3cc5bd79f4204e25d0ca7e712e9496d6da/crates%2Fcompletion%2Fsrc%2Fcompletions%2Fpostfix.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fcompletion%2Fsrc%2Fcompletions%2Fpostfix.rs?ref=8c292e3cc5bd79f4204e25d0ca7e712e9496d6da", "patch": "@@ -315,20 +315,20 @@ fn main() {\n }\n \"#,\n             expect![[r#\"\n-                sn box   Box::new(expr)\n-                sn call  function(expr)\n-                sn dbg   dbg!(expr)\n-                sn dbgr  dbg!(&expr)\n                 sn if    if expr {}\n-                sn let   let\n-                sn letm  let mut\n-                sn match match expr {}\n+                sn while while expr {}\n                 sn not   !expr\n-                sn ok    Ok(expr)\n                 sn ref   &expr\n                 sn refm  &mut expr\n+                sn match match expr {}\n+                sn box   Box::new(expr)\n+                sn ok    Ok(expr)\n                 sn some  Some(expr)\n-                sn while while expr {}\n+                sn dbg   dbg!(expr)\n+                sn dbgr  dbg!(&expr)\n+                sn call  function(expr)\n+                sn let   let\n+                sn letm  let mut\n             \"#]],\n         );\n     }\n@@ -347,18 +347,18 @@ fn main() {\n }\n \"#,\n             expect![[r#\"\n-                sn box   Box::new(expr)\n-                sn call  function(expr)\n-                sn dbg   dbg!(expr)\n-                sn dbgr  dbg!(&expr)\n                 sn if    if expr {}\n-                sn match match expr {}\n+                sn while while expr {}\n                 sn not   !expr\n-                sn ok    Ok(expr)\n                 sn ref   &expr\n                 sn refm  &mut expr\n+                sn match match expr {}\n+                sn box   Box::new(expr)\n+                sn ok    Ok(expr)\n                 sn some  Some(expr)\n-                sn while while expr {}\n+                sn dbg   dbg!(expr)\n+                sn dbgr  dbg!(&expr)\n+                sn call  function(expr)\n             \"#]],\n         );\n     }\n@@ -373,17 +373,17 @@ fn main() {\n }\n \"#,\n             expect![[r#\"\n+                sn ref   &expr\n+                sn refm  &mut expr\n+                sn match match expr {}\n                 sn box   Box::new(expr)\n-                sn call  function(expr)\n+                sn ok    Ok(expr)\n+                sn some  Some(expr)\n                 sn dbg   dbg!(expr)\n                 sn dbgr  dbg!(&expr)\n+                sn call  function(expr)\n                 sn let   let\n                 sn letm  let mut\n-                sn match match expr {}\n-                sn ok    Ok(expr)\n-                sn ref   &expr\n-                sn refm  &mut expr\n-                sn some  Some(expr)\n             \"#]],\n         )\n     }\n@@ -398,20 +398,20 @@ fn main() {\n }\n \"#,\n             expect![[r#\"\n-                sn box   Box::new(expr)\n-                sn call  function(expr)\n-                sn dbg   dbg!(expr)\n-                sn dbgr  dbg!(&expr)\n                 sn if    if expr {}\n-                sn let   let\n-                sn letm  let mut\n-                sn match match expr {}\n+                sn while while expr {}\n                 sn not   !expr\n-                sn ok    Ok(expr)\n                 sn ref   &expr\n                 sn refm  &mut expr\n+                sn match match expr {}\n+                sn box   Box::new(expr)\n+                sn ok    Ok(expr)\n                 sn some  Some(expr)\n-                sn while while expr {}\n+                sn dbg   dbg!(expr)\n+                sn dbgr  dbg!(&expr)\n+                sn call  function(expr)\n+                sn let   let\n+                sn letm  let mut\n             \"#]],\n         );\n     }"}, {"sha": "1300f00b2f22c59d63ccf605a7d7cfc7a2b81ae0", "filename": "crates/completion/src/completions/qualified_path.rs", "status": "modified", "additions": 28, "deletions": 28, "changes": 56, "blob_url": "https://github.com/rust-lang/rust/blob/8c292e3cc5bd79f4204e25d0ca7e712e9496d6da/crates%2Fcompletion%2Fsrc%2Fcompletions%2Fqualified_path.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c292e3cc5bd79f4204e25d0ca7e712e9496d6da/crates%2Fcompletion%2Fsrc%2Fcompletions%2Fqualified_path.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fcompletion%2Fsrc%2Fcompletions%2Fqualified_path.rs?ref=8c292e3cc5bd79f4204e25d0ca7e712e9496d6da", "patch": "@@ -199,22 +199,22 @@ use self::{foo::*, bar<|>};\n         check_builtin(\n             r#\"fn main() { let _: <|> = 92; }\"#,\n             expect![[r#\"\n+                bt u32\n                 bt bool\n-                bt char\n+                bt u8\n+                bt isize\n+                bt u16\n+                bt u64\n+                bt u128\n                 bt f32\n-                bt f64\n                 bt i128\n                 bt i16\n-                bt i32\n+                bt str\n                 bt i64\n+                bt char\n+                bt f64\n+                bt i32\n                 bt i8\n-                bt isize\n-                bt str\n-                bt u128\n-                bt u16\n-                bt u32\n-                bt u64\n-                bt u8\n                 bt usize\n             \"#]],\n         );\n@@ -279,8 +279,8 @@ struct Spam;\n use crate::Sp<|>\n \"#,\n             expect![[r#\"\n-                st Spam\n                 md foo\n+                st Spam\n             \"#]],\n         );\n     }\n@@ -296,8 +296,8 @@ struct Spam;\n use crate::{Sp<|>};\n \"#,\n             expect![[r#\"\n-                st Spam\n                 md foo\n+                st Spam\n             \"#]],\n         );\n     }\n@@ -330,8 +330,8 @@ enum E { Foo, Bar(i32) }\n fn foo() { let _ = E::<|> }\n \"#,\n             expect![[r#\"\n-                ev Bar(\u2026) (i32)\n                 ev Foo    ()\n+                ev Bar(\u2026) (i32)\n             \"#]],\n         );\n     }\n@@ -353,10 +353,10 @@ impl S {\n fn foo() { let _ = S::<|> }\n \"#,\n             expect![[r#\"\n-                ct C    const C: i32 = 42;\n-                ta T    type T = i32;\n                 fn a()  fn a()\n                 me b(\u2026) fn b(&self)\n+                ct C    const C: i32 = 42;\n+                ta T    type T = i32;\n             \"#]],\n         );\n     }\n@@ -381,9 +381,9 @@ mod m {\n fn foo() { let _ = S::<|> }\n \"#,\n             expect![[r#\"\n+                fn public_method() pub(crate) fn public_method()\n                 ct PUBLIC_CONST    pub(crate) const PUBLIC_CONST: u32 = 1;\n                 ta PublicType      pub(crate) type PublicType = u32;\n-                fn public_method() pub(crate) fn public_method()\n             \"#]],\n         );\n     }\n@@ -503,14 +503,14 @@ trait Sub: Super {\n fn foo<T: Sub>() { T::<|> }\n \"#,\n             expect![[r#\"\n-                ct C2           const C2: ();\n-                ct CONST        const CONST: u8;\n                 ta SubTy        type SubTy;\n                 ta Ty           type Ty;\n-                fn func()       fn func()\n-                me method(\u2026)    fn method(&self)\n+                ct C2           const C2: ();\n                 fn subfunc()    fn subfunc()\n                 me submethod(\u2026) fn submethod(&self)\n+                ct CONST        const CONST: u8;\n+                fn func()       fn func()\n+                me method(\u2026)    fn method(&self)\n             \"#]],\n         );\n     }\n@@ -543,12 +543,12 @@ impl<T> Sub for Wrap<T> {\n }\n \"#,\n             expect![[r#\"\n-                ct C2           const C2: () = ();\n-                ct CONST        const CONST: u8 = 0;\n                 ta SubTy        type SubTy;\n                 ta Ty           type Ty;\n+                ct CONST        const CONST: u8 = 0;\n                 fn func()       fn func()\n                 me method(\u2026)    fn method(&self)\n+                ct C2           const C2: () = ();\n                 fn subfunc()    fn subfunc()\n                 me submethod(\u2026) fn submethod(&self)\n             \"#]],\n@@ -567,8 +567,8 @@ impl T { fn bar() {} }\n fn main() { T::<|>; }\n \"#,\n             expect![[r#\"\n-                fn bar() fn bar()\n                 fn foo() fn foo()\n+                fn bar() fn bar()\n             \"#]],\n         );\n     }\n@@ -583,9 +583,9 @@ macro_rules! foo { () => {} }\n fn main() { let _ = crate::<|> }\n         \"#,\n             expect![[r##\"\n+                fn main()  fn main()\n                 ma foo!(\u2026) #[macro_export]\n                 macro_rules! foo\n-                fn main()  fn main()\n             \"##]],\n         );\n     }\n@@ -603,8 +603,8 @@ mod a {\n }\n \"#,\n             expect![[r#\"\n-                ct A\n                 md b\n+                ct A\n             \"#]],\n         );\n     }\n@@ -628,8 +628,8 @@ mod p {\n \"#,\n             expect![[r#\"\n                 ct RIGHT_CONST\n-                st RightType\n                 fn right_fn()  fn wrong_fn()\n+                st RightType\n             \"#]],\n         );\n \n@@ -675,8 +675,8 @@ fn main() { m!(self::f<|>); }\n fn foo() {}\n \"#,\n             expect![[r#\"\n-                fn foo()  fn foo()\n                 fn main() fn main()\n+                fn foo()  fn foo()\n             \"#]],\n         );\n     }\n@@ -747,8 +747,8 @@ fn main() {\n }\n \"#,\n             expect![[r#\"\n-                fn foo(\u2026) fn foo(a: i32, b: i32)\n                 fn main() fn main()\n+                fn foo(\u2026) fn foo(a: i32, b: i32)\n             \"#]],\n         );\n     }"}, {"sha": "91bf4a8ad95234acc8b526edf855c259843b015d", "filename": "crates/completion/src/completions/record.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/8c292e3cc5bd79f4204e25d0ca7e712e9496d6da/crates%2Fcompletion%2Fsrc%2Fcompletions%2Frecord.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c292e3cc5bd79f4204e25d0ca7e712e9496d6da/crates%2Fcompletion%2Fsrc%2Fcompletions%2Frecord.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fcompletion%2Fsrc%2Fcompletions%2Frecord.rs?ref=8c292e3cc5bd79f4204e25d0ca7e712e9496d6da", "patch": "@@ -94,9 +94,9 @@ fn process(f: S) {\n         check_snippet(\n             test_code,\n             expect![[r#\"\n-                fd ..Default::default()\n                 sn pd\n                 sn ppd\n+                fd ..Default::default()\n             \"#]],\n         );\n     }\n@@ -160,8 +160,8 @@ fn process(e: E) {\n }\n \"#,\n             expect![[r#\"\n-                fd bar ()\n                 fd foo u32\n+                fd bar ()\n             \"#]],\n         );\n     }"}, {"sha": "84259013002f4ca642c18c5ec811543cfa03e85a", "filename": "crates/completion/src/completions/snippet.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/8c292e3cc5bd79f4204e25d0ca7e712e9496d6da/crates%2Fcompletion%2Fsrc%2Fcompletions%2Fsnippet.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c292e3cc5bd79f4204e25d0ca7e712e9496d6da/crates%2Fcompletion%2Fsrc%2Fcompletions%2Fsnippet.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fcompletion%2Fsrc%2Fcompletions%2Fsnippet.rs?ref=8c292e3cc5bd79f4204e25d0ca7e712e9496d6da", "patch": "@@ -105,9 +105,9 @@ mod tests {\n }\n \"#,\n             expect![[r#\"\n-                sn macro_rules\n-                sn tfn (Test function)\n                 sn tmod (Test module)\n+                sn tfn (Test function)\n+                sn macro_rules\n             \"#]],\n         )\n     }"}, {"sha": "ca2b1bc3b9aeb653c2f0e6f7faa2e5e5bfe941f1", "filename": "crates/completion/src/completions/trait_impl.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/8c292e3cc5bd79f4204e25d0ca7e712e9496d6da/crates%2Fcompletion%2Fsrc%2Fcompletions%2Ftrait_impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c292e3cc5bd79f4204e25d0ca7e712e9496d6da/crates%2Fcompletion%2Fsrc%2Fcompletions%2Ftrait_impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fcompletion%2Fsrc%2Fcompletions%2Ftrait_impl.rs?ref=8c292e3cc5bd79f4204e25d0ca7e712e9496d6da", "patch": "@@ -265,11 +265,11 @@ impl Test for T {\n     t<|>\n }\n \"#,\n-            expect![[\"\n-ct const TEST_CONST: u16 = \\n\\\n-fn fn test()\n-ta type TestType = \\n\\\n-            \"]],\n+            expect![[r#\"\n+                ta type TestType = \n+                ct const TEST_CONST: u16 = \n+                fn fn test()\n+            \"#]],\n         );\n     }\n "}, {"sha": "54d5c989bb110025808c120c6fa699f0f70ef3c1", "filename": "crates/completion/src/completions/unqualified_path.rs", "status": "modified", "additions": 37, "deletions": 37, "changes": 74, "blob_url": "https://github.com/rust-lang/rust/blob/8c292e3cc5bd79f4204e25d0ca7e712e9496d6da/crates%2Fcompletion%2Fsrc%2Fcompletions%2Funqualified_path.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c292e3cc5bd79f4204e25d0ca7e712e9496d6da/crates%2Fcompletion%2Fsrc%2Fcompletions%2Funqualified_path.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fcompletion%2Fsrc%2Fcompletions%2Funqualified_path.rs?ref=8c292e3cc5bd79f4204e25d0ca7e712e9496d6da", "patch": "@@ -268,9 +268,9 @@ fn quux(x: i32) {\n }\n \"#,\n             expect![[r#\"\n-                fn quux(\u2026) fn quux(x: i32)\n-                bn x       i32\n                 bn y       i32\n+                bn x       i32\n+                fn quux(\u2026) fn quux(x: i32)\n             \"#]],\n         );\n     }\n@@ -290,8 +290,8 @@ fn quux() {\n }\n \"#,\n             expect![[r#\"\n-                bn a\n                 bn b      i32\n+                bn a\n                 fn quux() fn quux()\n             \"#]],\n         );\n@@ -306,8 +306,8 @@ fn quux() {\n }\n \"#,\n             expect![[r#\"\n-                fn quux() fn quux()\n                 bn x\n+                fn quux() fn quux()\n             \"#]],\n         );\n     }\n@@ -348,9 +348,9 @@ fn main() {\n         check(\n             r#\"struct S<T> { x: <|>}\"#,\n             expect![[r#\"\n-                st S<\u2026>\n                 tp Self\n                 tp T\n+                st S<\u2026>\n             \"#]],\n         );\n     }\n@@ -375,9 +375,9 @@ enum E {}\n fn quux() { <|> }\n \"#,\n             expect![[r#\"\n-                en E\n                 st S\n                 fn quux() fn quux()\n+                en E\n             \"#]],\n         );\n     }\n@@ -429,8 +429,8 @@ mod m {\n }\n \"#,\n             expect![[r#\"\n-                st Bar\n                 fn quux() fn quux()\n+                st Bar\n             \"#]],\n         );\n     }\n@@ -475,8 +475,8 @@ fn foo() {\n         check(\n             r#\"impl S { fn foo(&self) { <|> } }\"#,\n             expect![[r#\"\n-                tp Self\n                 bn self &{unknown}\n+                tp Self\n             \"#]],\n         );\n     }\n@@ -495,9 +495,9 @@ use prelude::*;\n mod prelude { struct Option; }\n \"#,\n             expect![[r#\"\n-                st Option\n                 fn foo()  fn foo()\n                 md std\n+                st Option\n             \"#]],\n         );\n     }\n@@ -522,10 +522,10 @@ use prelude::*;\n mod prelude { struct String; }\n \"#,\n             expect![[r#\"\n-                st String\n-                md core\n                 fn foo()  fn foo()\n                 md std\n+                md core\n+                st String\n             \"#]],\n         );\n     }\n@@ -551,13 +551,13 @@ mod m2 {\n fn main() { let v = <|> }\n \"#,\n             expect![[r##\"\n-                ma bar!(\u2026) macro_rules! bar\n+                md m1\n                 ma baz!(\u2026) #[macro_export]\n                 macro_rules! baz\n-                ma foo!(\u2026) macro_rules! foo\n-                md m1\n-                md m2\n                 fn main()  fn main()\n+                md m2\n+                ma bar!(\u2026) macro_rules! bar\n+                ma foo!(\u2026) macro_rules! foo\n             \"##]],\n         );\n     }\n@@ -570,8 +570,8 @@ macro_rules! foo { () => {} }\n fn foo() { <|> }\n \"#,\n             expect![[r#\"\n-                ma foo!(\u2026) macro_rules! foo\n                 fn foo()   fn foo()\n+                ma foo!(\u2026) macro_rules! foo\n             \"#]],\n         );\n     }\n@@ -584,8 +584,8 @@ macro_rules! foo { () => {} }\n fn main() { let x: <|> }\n \"#,\n             expect![[r#\"\n-                ma foo!(\u2026) macro_rules! foo\n                 fn main()  fn main()\n+                ma foo!(\u2026) macro_rules! foo\n             \"#]],\n         );\n     }\n@@ -598,8 +598,8 @@ macro_rules! foo { () => {} }\n fn main() { <|> }\n \"#,\n             expect![[r#\"\n-                ma foo!(\u2026) macro_rules! foo\n                 fn main()  fn main()\n+                ma foo!(\u2026) macro_rules! foo\n             \"#]],\n         );\n     }\n@@ -631,10 +631,10 @@ fn quux(x: i32) {\n }\n \"#,\n             expect![[r#\"\n-                ma m!(\u2026)   macro_rules! m\n-                fn quux(\u2026) fn quux(x: i32)\n-                bn x       i32\n                 bn y       i32\n+                bn x       i32\n+                fn quux(\u2026) fn quux(x: i32)\n+                ma m!(\u2026)   macro_rules! m\n             \"#]],\n         );\n     }\n@@ -650,10 +650,10 @@ fn quux(x: i32) {\n }\n \",\n             expect![[r#\"\n-                ma m!(\u2026)   macro_rules! m\n-                fn quux(\u2026) fn quux(x: i32)\n-                bn x       i32\n                 bn y       i32\n+                bn x       i32\n+                fn quux(\u2026) fn quux(x: i32)\n+                ma m!(\u2026)   macro_rules! m\n             \"#]],\n         );\n     }\n@@ -669,10 +669,10 @@ fn quux(x: i32) {\n }\n \"#,\n             expect![[r#\"\n-                ma m!(\u2026)   macro_rules! m\n-                fn quux(\u2026) fn quux(x: i32)\n-                bn x       i32\n                 bn y       i32\n+                bn x       i32\n+                fn quux(\u2026) fn quux(x: i32)\n+                ma m!(\u2026)   macro_rules! m\n             \"#]],\n         );\n     }\n@@ -686,8 +686,8 @@ use spam::Quux;\n fn main() { <|> }\n \"#,\n             expect![[r#\"\n-                ?? Quux\n                 fn main() fn main()\n+                ?? Quux\n             \"#]],\n         );\n     }\n@@ -703,10 +703,10 @@ fn main() {\n }\n \"#,\n             expect![[r#\"\n-                en Foo\n                 ev Foo::Bar  ()\n                 ev Foo::Baz  ()\n                 ev Foo::Quux ()\n+                en Foo\n             \"#]],\n         )\n     }\n@@ -723,10 +723,10 @@ fn main() {\n }\n \"#,\n             expect![[r#\"\n-                en Foo\n                 ev Foo::Bar  ()\n                 ev Foo::Baz  ()\n                 ev Foo::Quux ()\n+                en Foo\n             \"#]],\n         )\n     }\n@@ -739,10 +739,10 @@ enum Foo { Bar, Baz, Quux }\n fn main() { let foo: Foo = Q<|> }\n \"#,\n             expect![[r#\"\n-                en Foo\n                 ev Foo::Bar  ()\n                 ev Foo::Baz  ()\n                 ev Foo::Quux ()\n+                en Foo\n                 fn main()    fn main()\n             \"#]],\n         )\n@@ -756,9 +756,9 @@ mod m { pub enum E { V } }\n fn f() -> m::E { V<|> }\n \"#,\n             expect![[r#\"\n-                fn f()     fn f() -> m::E\n-                md m\n                 ev m::E::V ()\n+                md m\n+                fn f()     fn f() -> m::E\n             \"#]],\n         )\n     }\n@@ -785,9 +785,9 @@ struct MyStruct {}\n impl My<|>\n \"#,\n             expect![[r#\"\n-                st MyStruct\n-                tt MyTrait\n                 tp Self\n+                tt MyTrait\n+                st MyStruct\n             \"#]],\n         )\n     }\n@@ -919,13 +919,13 @@ fn main() {\n }\n \"#,\n             expect![[r#\"\n-                st FirstStruct\n+                fn main()           fn main()\n                 st SecondStruct\n+                st FirstStruct\n                 md dep\n                 st dep::some_module::ThirdStruct\n                 st dep::some_module::AfterThirdStruct\n                 st dep::some_module::ThiiiiiirdStruct\n-                fn main()           fn main()\n             \"#]],\n         );\n     }"}, {"sha": "eb0c16f52bd22d8e79a5681a40d25dc106e00341", "filename": "crates/completion/src/test_utils.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/8c292e3cc5bd79f4204e25d0ca7e712e9496d6da/crates%2Fcompletion%2Fsrc%2Ftest_utils.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c292e3cc5bd79f4204e25d0ca7e712e9496d6da/crates%2Fcompletion%2Fsrc%2Ftest_utils.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fcompletion%2Fsrc%2Ftest_utils.rs?ref=8c292e3cc5bd79f4204e25d0ca7e712e9496d6da", "patch": "@@ -47,9 +47,8 @@ pub(crate) fn completion_list_with_config(\n     code: &str,\n     kind: CompletionKind,\n ) -> String {\n-    let mut kind_completions: Vec<CompletionItem> =\n+    let kind_completions: Vec<CompletionItem> =\n         get_all_items(config, code).into_iter().filter(|c| c.completion_kind == kind).collect();\n-    kind_completions.sort_by_key(|c| c.label().to_owned());\n     let label_width = kind_completions\n         .iter()\n         .map(|it| monospace_width(it.label()))"}]}