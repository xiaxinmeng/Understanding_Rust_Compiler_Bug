{"sha": "49c3f9f1666d31c2b45d132809820d44fb82d6bf", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ5YzNmOWYxNjY2ZDMxYzJiNDVkMTMyODA5ODIwZDQ0ZmI4MmQ2YmY=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2013-03-01T23:48:11Z"}, "committer": {"name": "Young-il Choi", "email": "duddlf.choi@samsung.com", "date": "2013-03-02T01:44:56Z"}, "message": "mk: Cross-compile fixes", "tree": {"sha": "a10bec9de039fcd8fce89e34004daf48fcdf28a7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a10bec9de039fcd8fce89e34004daf48fcdf28a7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/49c3f9f1666d31c2b45d132809820d44fb82d6bf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/49c3f9f1666d31c2b45d132809820d44fb82d6bf", "html_url": "https://github.com/rust-lang/rust/commit/49c3f9f1666d31c2b45d132809820d44fb82d6bf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/49c3f9f1666d31c2b45d132809820d44fb82d6bf/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "yichoi", "id": 3222276, "node_id": "MDQ6VXNlcjMyMjIyNzY=", "avatar_url": "https://avatars.githubusercontent.com/u/3222276?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yichoi", "html_url": "https://github.com/yichoi", "followers_url": "https://api.github.com/users/yichoi/followers", "following_url": "https://api.github.com/users/yichoi/following{/other_user}", "gists_url": "https://api.github.com/users/yichoi/gists{/gist_id}", "starred_url": "https://api.github.com/users/yichoi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yichoi/subscriptions", "organizations_url": "https://api.github.com/users/yichoi/orgs", "repos_url": "https://api.github.com/users/yichoi/repos", "events_url": "https://api.github.com/users/yichoi/events{/privacy}", "received_events_url": "https://api.github.com/users/yichoi/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5e6c04b9faf76ef1f1b50b5e8688c00148693228", "url": "https://api.github.com/repos/rust-lang/rust/commits/5e6c04b9faf76ef1f1b50b5e8688c00148693228", "html_url": "https://github.com/rust-lang/rust/commit/5e6c04b9faf76ef1f1b50b5e8688c00148693228"}], "stats": {"total": 92, "additions": 46, "deletions": 46}, "files": [{"sha": "3045b99e496b2fc827b852638e9ae0ca1565edd7", "filename": "mk/install.mk", "status": "modified", "additions": 37, "deletions": 37, "changes": 74, "blob_url": "https://github.com/rust-lang/rust/blob/49c3f9f1666d31c2b45d132809820d44fb82d6bf/mk%2Finstall.mk", "raw_url": "https://github.com/rust-lang/rust/raw/49c3f9f1666d31c2b45d132809820d44fb82d6bf/mk%2Finstall.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Finstall.mk?ref=49c3f9f1666d31c2b45d132809820d44fb82d6bf", "patch": "@@ -45,23 +45,23 @@ PTL$(1)$(2) = $$(PTR$(1)$(2))/$(CFG_LIBDIR)\n \n install-target-$(1)-host-$(2): $$(CSREQ$$(ISTAGE)_T_$(1)_H_$(2))\n \t$$(Q)mkdir -p $$(PTL$(1)$(2))\n-\t$$(Q)$$(call INSTALL,$$(TL$(1)$(2)),$$(PTL$(1)$(2)),$$(CFG_RUNTIME))\n+\t$$(Q)$$(call INSTALL,$$(TL$(1)$(2)),$$(PTL$(1)$(2)),$$(CFG_RUNTIME_$(1)))\n \t$$(Q)$$(call INSTALL_LIB, \\\n-\t\t$$(TL$(1)$(2)),$$(PTL$(1)$(2)),$$(CORELIB_GLOB))\n+\t\t$$(TL$(1)$(2)),$$(PTL$(1)$(2)),$$(CORELIB_GLOB_$(1)))\n \t$$(Q)$$(call INSTALL_LIB, \\\n-\t\t$$(TL$(1)$(2)),$$(PTL$(1)$(2)),$$(STDLIB_GLOB))\n+\t\t$$(TL$(1)$(2)),$$(PTL$(1)$(2)),$$(STDLIB_GLOB_$(1)))\n \t$$(Q)$$(call INSTALL_LIB, \\\n-\t\t$$(TL$(1)$(2)),$$(PTL$(1)$(2)),$$(LIBRUSTC_GLOB))\n+\t\t$$(TL$(1)$(2)),$$(PTL$(1)$(2)),$$(LIBRUSTC_GLOB_$(1)))\n \t$$(Q)$$(call INSTALL_LIB, \\\n-\t\t$$(TL$(1)$(2)),$$(PTL$(1)$(2)),$$(LIBSYNTAX_GLOB))\n+\t\t$$(TL$(1)$(2)),$$(PTL$(1)$(2)),$$(LIBSYNTAX_GLOB_$(1)))\n \t$$(Q)$$(call INSTALL_LIB, \\\n-\t\t$$(TL$(1)$(2)),$$(PTL$(1)$(2)),$$(LIBRUSTPKG_GLOB))\n+\t\t$$(TL$(1)$(2)),$$(PTL$(1)$(2)),$$(LIBRUSTPKG_GLOB_$(1)))\n \t$$(Q)$$(call INSTALL_LIB, \\\n-\t\t$$(TL$(1)$(2)),$$(PTL$(1)$(2)),$$(LIBRUSTDOC_GLOB))\n+\t\t$$(TL$(1)$(2)),$$(PTL$(1)$(2)),$$(LIBRUSTDOC_GLOB_$(1)))\n \t$$(Q)$$(call INSTALL_LIB, \\\n-\t\t$$(TL$(1)$(2)),$$(PTL$(1)$(2)),$$(LIBRUSTI_GLOB))\n+\t\t$$(TL$(1)$(2)),$$(PTL$(1)$(2)),$$(LIBRUSTI_GLOB_$(1)))\n \t$$(Q)$$(call INSTALL_LIB, \\\n-\t\t$$(TL$(1)$(2)),$$(PTL$(1)$(2)),$$(LIBRUST_GLOB))\n+\t\t$$(TL$(1)$(2)),$$(PTL$(1)$(2)),$$(LIBRUST_GLOB_$(1)))\n \t$$(Q)$$(call INSTALL,$$(TL$(1)$(2)),$$(PTL$(1)$(2)),libmorestack.a)\n \n endef\n@@ -93,19 +93,19 @@ install-host: $(CSREQ$(ISTAGE)_T_$(CFG_BUILD_TRIPLE)_H_$(CFG_BUILD_TRIPLE))\n \t$(Q)$(call INSTALL,$(HB2),$(PHB),rustdoc$(X))\n \t$(Q)$(call INSTALL,$(HB2),$(PHB),rusti$(X))\n \t$(Q)$(call INSTALL,$(HB2),$(PHB),rust$(X))\n-\t$(Q)$(call INSTALL,$(HL),$(PHL),$(CFG_LIBRUSTC))\n-\t$(Q)$(call INSTALL,$(HL),$(PHL),$(CFG_LIBRUSTPKG))\n-\t$(Q)$(call INSTALL,$(HL),$(PHL),$(CFG_LIBRUSTDOC))\n-\t$(Q)$(call INSTALL,$(HL),$(PHL),$(CFG_LIBRUSTI))\n-\t$(Q)$(call INSTALL,$(HL),$(PHL),$(CFG_LIBRUST))\n-\t$(Q)$(call INSTALL_LIB,$(HL),$(PHL),$(CORELIB_GLOB))\n-\t$(Q)$(call INSTALL_LIB,$(HL),$(PHL),$(STDLIB_GLOB))\n-\t$(Q)$(call INSTALL_LIB,$(HL),$(PHL),$(LIBRUSTC_GLOB))\n-\t$(Q)$(call INSTALL_LIB,$(HL),$(PHL),$(LIBSYNTAX_GLOB))\n-\t$(Q)$(call INSTALL_LIB,$(HL),$(PHL),$(LIBRUSTI_GLOB))\n-\t$(Q)$(call INSTALL_LIB,$(HL),$(PHL),$(LIBRUST_GLOB))\n-\t$(Q)$(call INSTALL,$(HL),$(PHL),$(CFG_RUNTIME))\n-\t$(Q)$(call INSTALL,$(HL),$(PHL),$(CFG_RUSTLLVM))\n+\t$(Q)$(call INSTALL,$(HL),$(PHL),$(CFG_LIBRUSTC_$(CFG_BUILD_TRIPLE)))\n+\t$(Q)$(call INSTALL,$(HL),$(PHL),$(CFG_LIBRUSTPKG_$(CFG_BUILD_TRIPLE)))\n+\t$(Q)$(call INSTALL,$(HL),$(PHL),$(CFG_LIBRUSTDOC_$(CFG_BUILD_TRIPLE))\n+\t$(Q)$(call INSTALL,$(HL),$(PHL),$(CFG_LIBRUSTI_$(CFG_BUILD_TRIPLE)))\n+\t$(Q)$(call INSTALL,$(HL),$(PHL),$(CFG_LIBRUST_$(CFG_BUILD_TRIPLE)))\n+\t$(Q)$(call INSTALL_LIB,$(HL),$(PHL),$(CORELIB_GLOB_$(CFG_BUILD_TRIPLE)))\n+\t$(Q)$(call INSTALL_LIB,$(HL),$(PHL),$(STDLIB_GLOB_$(CFG_BUILD_TRIPLE)))\n+\t$(Q)$(call INSTALL_LIB,$(HL),$(PHL),$(LIBRUSTC_GLOB_$(CFG_BUILD_TRIPLE)))\n+\t$(Q)$(call INSTALL_LIB,$(HL),$(PHL),$(LIBSYNTAX_GLOB_$(CFG_BUILD_TRIPLE)))\n+\t$(Q)$(call INSTALL_LIB,$(HL),$(PHL),$(LIBRUSTI_GLOB_$(CFG_BUILD_TRIPLE)))\n+\t$(Q)$(call INSTALL_LIB,$(HL),$(PHL),$(LIBRUST_GLOB_$(CFG_BUILD_TRIPLE)))\n+\t$(Q)$(call INSTALL,$(HL),$(PHL),$(CFG_RUNTIME_$(CFG_BUILD_TRIPLE)))\n+\t$(Q)$(call INSTALL,$(HL),$(PHL),$(CFG_RUSTLLVM_$(CFG_BUILD_TRIPLE)))\n \t$(Q)$(call INSTALL,$(S)/man, \\\n \t     $(PREFIX_ROOT)/share/man/man1,rustc.1)\n \n@@ -121,22 +121,22 @@ uninstall:\n \t$(Q)rm -f $(PHB)/rusti$(X)\n \t$(Q)rm -f $(PHB)/rust$(X)\n \t$(Q)rm -f $(PHB)/rustdoc$(X)\n-\t$(Q)rm -f $(PHL)/$(CFG_RUSTLLVM)\n-\t$(Q)rm -f $(PHL)/$(CFG_LIBRUSTPKG)\n-\t$(Q)rm -f $(PHL)/$(CFG_LIBRUSTC)\n-\t$(Q)rm -f $(PHL)/$(CFG_LIBRUSTDOC)\n-\t$(Q)rm -f $(PHL)/$(CFG_LIBRUSTI)\n-\t$(Q)rm -f $(PHL)/$(CFG_LIBRUST)\n-\t$(Q)rm -f $(PHL)/$(CFG_RUNTIME)\n+\t$(Q)rm -f $(PHL)/$(CFG_RUSTLLVM_$(CFG_BUILD_TRIPLE))\n+\t$(Q)rm -f $(PHL)/$(CFG_LIBRUSTPKG_$(CFG_BUILD_TRIPLE))\n+\t$(Q)rm -f $(PHL)/$(CFG_LIBRUSTC_$(CFG_BUILD_TRIPLE))\n+\t$(Q)rm -f $(PHL)/$(CFG_LIBRUSTDOC_$(CFG_BUILD_TRIPLE))\n+\t$(Q)rm -f $(PHL)/$(CFG_LIBRUSTI_$(CFG_BUILD_TRIPLE))\n+\t$(Q)rm -f $(PHL)/$(CFG_LIBRUST_$(CFG_BUILD_TRIPLE))\n+\t$(Q)rm -f $(PHL)/$(CFG_RUNTIME_$(CFG_BUILD_TRIPLE))\n \t$(Q)for i in \\\n-          $(call HOST_LIB_FROM_HL_GLOB,$(CORELIB_GLOB)) \\\n-          $(call HOST_LIB_FROM_HL_GLOB,$(STDLIB_GLOB)) \\\n-          $(call HOST_LIB_FROM_HL_GLOB,$(LIBRUSTC_GLOB)) \\\n-          $(call HOST_LIB_FROM_HL_GLOB,$(LIBSYNTAX_GLOB)) \\\n-          $(call HOST_LIB_FROM_HL_GLOB,$(LIBRUSTPKG_GLOB)) \\\n-          $(call HOST_LIB_FROM_HL_GLOB,$(LIBRUSTDOC_GLOB)) \\\n-          $(call HOST_LIB_FROM_HL_GLOB,$(LIBRUSTI_GLOB)) \\\n-          $(call HOST_LIB_FROM_HL_GLOB,$(LIBRUST_GLOB)) \\\n+          $(call HOST_LIB_FROM_HL_GLOB,$(CORELIB_GLOB_$(CFG_BUILD_TRIPLE))) \\\n+          $(call HOST_LIB_FROM_HL_GLOB,$(STDLIB_GLOB_$(CFG_BUILD_TRIPLE))) \\\n+          $(call HOST_LIB_FROM_HL_GLOB,$(LIBRUSTC_GLOB_$(CFG_BUILD_TRIPLE))) \\\n+          $(call HOST_LIB_FROM_HL_GLOB,$(LIBSYNTAX_GLOB_$(CFG_BUILD_TRIPLE))) \\\n+          $(call HOST_LIB_FROM_HL_GLOB,$(LIBRUSTPKG_GLOB_$(CFG_BUILD_TRIPLE))) \\\n+          $(call HOST_LIB_FROM_HL_GLOB,$(LIBRUSTDOC_GLOB_$(CFG_BUILD_TRIPLE))) \\\n+          $(call HOST_LIB_FROM_HL_GLOB,$(LIBRUSTI_GLOB_$(CFG_BUILD_TRIPLE))) \\\n+          $(call HOST_LIB_FROM_HL_GLOB,$(LIBRUST_GLOB_$(CFG_BUILD_TRIPLE))) \\\n         ; \\\n         do rm -f $$i ; \\\n         done"}, {"sha": "b1dad343bf3a7431339e40b3841902cb01b3f89a", "filename": "mk/tests.mk", "status": "modified", "additions": 9, "deletions": 9, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/49c3f9f1666d31c2b45d132809820d44fb82d6bf/mk%2Ftests.mk", "raw_url": "https://github.com/rust-lang/rust/raw/49c3f9f1666d31c2b45d132809820d44fb82d6bf/mk%2Ftests.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Ftests.mk?ref=49c3f9f1666d31c2b45d132809820d44fb82d6bf", "patch": "@@ -220,50 +220,50 @@ define TEST_RUNNER\n \n $(3)/test/coretest.stage$(1)-$(2)$$(X):\t\t\t\\\n \t\t$$(CORELIB_CRATE) $$(CORELIB_INPUTS)\t\\\n-\t\t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_STDLIB)\n+\t\t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_STDLIB_$(2))\n \t@$$(call E, compile_and_link: $$@)\n \t$$(STAGE$(1)_T_$(2)_H_$(3)) -o $$@ $$< --test\n \n $(3)/test/stdtest.stage$(1)-$(2)$$(X):\t\t\t\\\n \t\t$$(STDLIB_CRATE) $$(STDLIB_INPUTS)\t\\\n-\t\t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_STDLIB)\n+\t\t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_STDLIB_$(2))\n \t@$$(call E, compile_and_link: $$@)\n \t$$(STAGE$(1)_T_$(2)_H_$(3)) -o $$@ $$< --test\n \n $(3)/test/syntaxtest.stage$(1)-$(2)$$(X):\t\t\t\\\n \t\t$$(LIBSYNTAX_CRATE) $$(LIBSYNTAX_INPUTS)\t\\\n-\t\t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_STDLIB)\n+\t\t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_STDLIB_$(2))\n \t@$$(call E, compile_and_link: $$@)\n \t$$(STAGE$(1)_T_$(2)_H_$(3)) -o $$@ $$< --test\n \n $(3)/test/rustctest.stage$(1)-$(2)$$(X):\t\t\t\t\t\\\n \t\t$$(COMPILER_CRATE) $$(COMPILER_INPUTS) \\\n-\t\t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_RUSTLLVM) \\\n-                $$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_LIBSYNTAX)\n+\t\t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_RUSTLLVM_$(2)) \\\n+                $$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_LIBSYNTAX_$(2))\n \t@$$(call E, compile_and_link: $$@)\n \t$$(STAGE$(1)_T_$(2)_H_$(3)) -o $$@ $$< --test\n \n $(3)/test/rustpkgtest.stage$(1)-$(2)$$(X):\t\t\t\t\t\\\n \t\t$$(RUSTPKG_LIB) $$(RUSTPKG_INPUTS)\t\t\\\n-\t\t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_LIBRUSTC)\n+\t\t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_LIBRUSTC_$(2))\n \t@$$(call E, compile_and_link: $$@)\n \t$$(STAGE$(1)_T_$(2)_H_$(3)) -o $$@ $$< --test\n \n $(3)/test/rustitest.stage$(1)-$(2)$$(X):\t\t\t\t\t\\\n \t\t$$(RUSTI_LIB) $$(RUSTI_INPUTS)\t\t\\\n-\t\t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_LIBRUSTC)\n+\t\t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_LIBRUSTC_$(2))\n \t@$$(call E, compile_and_link: $$@)\n \t$$(STAGE$(1)_T_$(2)_H_$(3)) -o $$@ $$< --test\n \n $(3)/test/rusttest.stage$(1)-$(2)$$(X):\t\t\t\t\t\\\n \t\t$$(RUST_LIB) $$(RUST_INPUTS)\t\t\\\n-\t\t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_LIBRUSTC)\n+\t\t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_LIBRUSTC_$(2))\n \t@$$(call E, compile_and_link: $$@)\n \t$$(STAGE$(1)_T_$(2)_H_$(3)) -o $$@ $$< --test\n \n $(3)/test/rustdoctest.stage$(1)-$(2)$$(X):\t\t\t\t\t\\\n \t\t$$(RUSTDOC_LIB) $$(RUSTDOC_INPUTS)\t\t\\\n-\t\t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_LIBRUSTC)\n+\t\t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_LIBRUSTC_$(2))\n \t@$$(call E, compile_and_link: $$@)\n \t$$(STAGE$(1)_T_$(2)_H_$(3)) -o $$@ $$< --test\n "}]}