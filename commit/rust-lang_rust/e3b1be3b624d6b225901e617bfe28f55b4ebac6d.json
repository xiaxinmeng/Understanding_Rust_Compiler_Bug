{"sha": "e3b1be3b624d6b225901e617bfe28f55b4ebac6d", "node_id": "MDY6Q29tbWl0NzI0NzEyOmUzYjFiZTNiNjI0ZDZiMjI1OTAxZTYxN2JmZTI4ZjU1YjRlYmFjNmQ=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2020-09-29T18:23:02Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2020-10-09T18:26:06Z"}, "message": "Remove unneeded ImportItem on glob ones", "tree": {"sha": "416d8fd3de4d5946f6dd156e189747366b025e6b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/416d8fd3de4d5946f6dd156e189747366b025e6b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e3b1be3b624d6b225901e617bfe28f55b4ebac6d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e3b1be3b624d6b225901e617bfe28f55b4ebac6d", "html_url": "https://github.com/rust-lang/rust/commit/e3b1be3b624d6b225901e617bfe28f55b4ebac6d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e3b1be3b624d6b225901e617bfe28f55b4ebac6d/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6bea76f175f1a565320a1a93a174fb80567dda7c", "url": "https://api.github.com/repos/rust-lang/rust/commits/6bea76f175f1a565320a1a93a174fb80567dda7c", "html_url": "https://github.com/rust-lang/rust/commit/6bea76f175f1a565320a1a93a174fb80567dda7c"}], "stats": {"total": 29, "additions": 3, "deletions": 26}, "files": [{"sha": "54751896bb3b47532029bfd85fc0e7337a9a3893", "filename": "src/librustdoc/clean/mod.rs", "status": "modified", "additions": 1, "deletions": 11, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/e3b1be3b624d6b225901e617bfe28f55b4ebac6d/src%2Flibrustdoc%2Fclean%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e3b1be3b624d6b225901e617bfe28f55b4ebac6d/src%2Flibrustdoc%2Fclean%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fclean%2Fmod.rs?ref=e3b1be3b624d6b225901e617bfe28f55b4ebac6d", "patch": "@@ -2260,17 +2260,7 @@ impl Clean<Vec<Item>> for doctree::Import<'_> {\n         let inner = if self.glob {\n             if !denied {\n                 let mut visited = FxHashSet::default();\n-                if let Some(mut items) = inline::try_inline_glob(cx, path.res, &mut visited) {\n-                    items.push(Item {\n-                        name: None,\n-                        attrs: self.attrs.clean(cx),\n-                        source: self.span.clean(cx),\n-                        def_id: cx.tcx.hir().local_def_id(self.id).to_def_id(),\n-                        visibility: self.vis.clean(cx),\n-                        stability: None,\n-                        deprecation: None,\n-                        inner: ImportItem(Import::new_glob(resolve_use_source(cx, path), false)),\n-                    });\n+                if let Some(items) = inline::try_inline_glob(cx, path.res, &mut visited) {\n                     return items;\n                 }\n             }"}, {"sha": "3fd3f77400978ab4a59f7fa6c04e8ceccbf5af97", "filename": "src/test/rustdoc-ui/pub-export-lint.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/e3b1be3b624d6b225901e617bfe28f55b4ebac6d/src%2Ftest%2Frustdoc-ui%2Fpub-export-lint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e3b1be3b624d6b225901e617bfe28f55b4ebac6d/src%2Ftest%2Frustdoc-ui%2Fpub-export-lint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Fpub-export-lint.rs?ref=e3b1be3b624d6b225901e617bfe28f55b4ebac6d", "patch": "@@ -1,8 +1,5 @@\n #![deny(broken_intra_doc_links)]\n \n-/// [somewhere]\n-//~^ ERROR unresolved link to `somewhere`\n-pub use std::str::*;\n /// [aloha]\n //~^ ERROR unresolved link to `aloha`\n pub use std::task::RawWakerVTable;"}, {"sha": "c345def794c085f4434e24af6f8c7843db51b409", "filename": "src/test/rustdoc-ui/pub-export-lint.stderr", "status": "modified", "additions": 2, "deletions": 10, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/e3b1be3b624d6b225901e617bfe28f55b4ebac6d/src%2Ftest%2Frustdoc-ui%2Fpub-export-lint.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/e3b1be3b624d6b225901e617bfe28f55b4ebac6d/src%2Ftest%2Frustdoc-ui%2Fpub-export-lint.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Fpub-export-lint.stderr?ref=e3b1be3b624d6b225901e617bfe28f55b4ebac6d", "patch": "@@ -1,4 +1,4 @@\n-error: unresolved link to `somewhere`\n+error: unresolved link to `aloha`\n   --> $DIR/pub-export-lint.rs:3:6\n    |\n LL | /// [aloha]\n@@ -11,13 +11,5 @@ LL | #![deny(broken_intra_doc_links)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^\n    = help: to escape `[` and `]` characters, add '\\' before them like `\\[` or `\\]`\n \n-error: unresolved link to `aloha`\n-  --> $DIR/pub-export-lint.rs:6:6\n-   |\n-LL | /// [aloha]\n-   |      ^^^^^ the module `pub_export_lint` contains no item named `aloha`\n-   |\n-   = help: to escape `[` and `]` characters, add '\\' before them like `\\[` or `\\]`\n-\n-error: aborting due to 2 previous errors\n+error: aborting due to previous error\n "}, {"sha": "dea72b81a57c397642a66201c7d2340925edd993", "filename": "src/test/rustdoc/reexport-check.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e3b1be3b624d6b225901e617bfe28f55b4ebac6d/src%2Ftest%2Frustdoc%2Freexport-check.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e3b1be3b624d6b225901e617bfe28f55b4ebac6d/src%2Ftest%2Frustdoc%2Freexport-check.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Freexport-check.rs?ref=e3b1be3b624d6b225901e617bfe28f55b4ebac6d", "patch": "@@ -7,5 +7,3 @@ pub use std::i32;\n // @!has 'foo/index.html' '//code' 'pub use self::string::String;'\n // @has 'foo/index.html' '//tr[@class=\"module-item\"]' 'String'\n pub use std::string::String;\n-// @!has 'foo/index.html' '//code' 'pub use self::string::*;'\n-pub use std::string::*;"}]}