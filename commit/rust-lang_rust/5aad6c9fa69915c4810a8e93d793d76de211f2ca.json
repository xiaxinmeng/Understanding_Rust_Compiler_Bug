{"sha": "5aad6c9fa69915c4810a8e93d793d76de211f2ca", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVhYWQ2YzlmYTY5OTE1YzQ4MTBhOGU5M2Q3OTNkNzZkZTIxMWYyY2E=", "commit": {"author": {"name": "Benjamin Coenen", "email": "5719034+bnjjj@users.noreply.github.com", "date": "2020-06-22T11:39:05Z"}, "committer": {"name": "Benjamin Coenen", "email": "5719034+bnjjj@users.noreply.github.com", "date": "2020-06-22T11:39:05Z"}, "message": "don't complete top level attrs inside nested attrs and add better labels #4899\n\nSigned-off-by: Benjamin Coenen <5719034+bnjjj@users.noreply.github.com>", "tree": {"sha": "aca84f1709aa759baf8ab9a35f11ead1b7241011", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/aca84f1709aa759baf8ab9a35f11ead1b7241011"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5aad6c9fa69915c4810a8e93d793d76de211f2ca", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5aad6c9fa69915c4810a8e93d793d76de211f2ca", "html_url": "https://github.com/rust-lang/rust/commit/5aad6c9fa69915c4810a8e93d793d76de211f2ca", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5aad6c9fa69915c4810a8e93d793d76de211f2ca/comments", "author": {"login": "bnjjj", "id": 5719034, "node_id": "MDQ6VXNlcjU3MTkwMzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5719034?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bnjjj", "html_url": "https://github.com/bnjjj", "followers_url": "https://api.github.com/users/bnjjj/followers", "following_url": "https://api.github.com/users/bnjjj/following{/other_user}", "gists_url": "https://api.github.com/users/bnjjj/gists{/gist_id}", "starred_url": "https://api.github.com/users/bnjjj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bnjjj/subscriptions", "organizations_url": "https://api.github.com/users/bnjjj/orgs", "repos_url": "https://api.github.com/users/bnjjj/repos", "events_url": "https://api.github.com/users/bnjjj/events{/privacy}", "received_events_url": "https://api.github.com/users/bnjjj/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bnjjj", "id": 5719034, "node_id": "MDQ6VXNlcjU3MTkwMzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5719034?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bnjjj", "html_url": "https://github.com/bnjjj", "followers_url": "https://api.github.com/users/bnjjj/followers", "following_url": "https://api.github.com/users/bnjjj/following{/other_user}", "gists_url": "https://api.github.com/users/bnjjj/gists{/gist_id}", "starred_url": "https://api.github.com/users/bnjjj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bnjjj/subscriptions", "organizations_url": "https://api.github.com/users/bnjjj/orgs", "repos_url": "https://api.github.com/users/bnjjj/repos", "events_url": "https://api.github.com/users/bnjjj/events{/privacy}", "received_events_url": "https://api.github.com/users/bnjjj/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3df879f139b0a40f400c23cb495eaf776b325047", "url": "https://api.github.com/repos/rust-lang/rust/commits/3df879f139b0a40f400c23cb495eaf776b325047", "html_url": "https://github.com/rust-lang/rust/commit/3df879f139b0a40f400c23cb495eaf776b325047"}], "stats": {"total": 9, "additions": 1, "deletions": 8}, "files": [{"sha": "ade17a1ff5e75425b22bc4b6860c58e99e9f831a", "filename": "crates/ra_ide/src/completion/complete_attribute.rs", "status": "modified", "additions": 1, "deletions": 8, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/5aad6c9fa69915c4810a8e93d793d76de211f2ca/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_attribute.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5aad6c9fa69915c4810a8e93d793d76de211f2ca/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_attribute.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_attribute.rs?ref=5aad6c9fa69915c4810a8e93d793d76de211f2ca", "patch": "@@ -20,14 +20,7 @@ pub(super) fn complete_attribute(acc: &mut Completions, ctx: &CompletionContext)\n         {\n             complete_derive(acc, ctx, token_tree)\n         }\n-        (_, Some(ast::AttrInput::TokenTree(token_tree))) => {\n-            let token_tree_str = token_tree.to_string();\n-            let nested = token_tree_str.starts_with('(') && token_tree_str.ends_with(')');\n-\n-            if !nested {\n-                complete_attribute_start(acc, ctx, attribute);\n-            }\n-        }\n+        (_, Some(ast::AttrInput::TokenTree(_token_tree))) => {}\n         _ => complete_attribute_start(acc, ctx, attribute),\n     }\n     Some(())"}]}