{"sha": "b03642e51f4c1cfc51858dd792aa689b0e6597d7", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIwMzY0MmU1MWY0YzFjZmM1MTg1OGRkNzkyYWE2ODliMGU2NTk3ZDc=", "commit": {"author": {"name": "xFrednet", "email": "xFrednet@gmail.com", "date": "2021-05-12T15:30:04Z"}, "committer": {"name": "xFrednet", "email": "xFrednet@gmail.com", "date": "2021-05-12T15:31:00Z"}, "message": "Metadata collection clarifying default configuration values", "tree": {"sha": "515c5ab4f57cecf46f2834d2b2a7281006105fb5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/515c5ab4f57cecf46f2834d2b2a7281006105fb5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b03642e51f4c1cfc51858dd792aa689b0e6597d7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b03642e51f4c1cfc51858dd792aa689b0e6597d7", "html_url": "https://github.com/rust-lang/rust/commit/b03642e51f4c1cfc51858dd792aa689b0e6597d7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b03642e51f4c1cfc51858dd792aa689b0e6597d7/comments", "author": {"login": "xFrednet", "id": 17087237, "node_id": "MDQ6VXNlcjE3MDg3MjM3", "avatar_url": "https://avatars.githubusercontent.com/u/17087237?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xFrednet", "html_url": "https://github.com/xFrednet", "followers_url": "https://api.github.com/users/xFrednet/followers", "following_url": "https://api.github.com/users/xFrednet/following{/other_user}", "gists_url": "https://api.github.com/users/xFrednet/gists{/gist_id}", "starred_url": "https://api.github.com/users/xFrednet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xFrednet/subscriptions", "organizations_url": "https://api.github.com/users/xFrednet/orgs", "repos_url": "https://api.github.com/users/xFrednet/repos", "events_url": "https://api.github.com/users/xFrednet/events{/privacy}", "received_events_url": "https://api.github.com/users/xFrednet/received_events", "type": "User", "site_admin": false}, "committer": {"login": "xFrednet", "id": 17087237, "node_id": "MDQ6VXNlcjE3MDg3MjM3", "avatar_url": "https://avatars.githubusercontent.com/u/17087237?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xFrednet", "html_url": "https://github.com/xFrednet", "followers_url": "https://api.github.com/users/xFrednet/followers", "following_url": "https://api.github.com/users/xFrednet/following{/other_user}", "gists_url": "https://api.github.com/users/xFrednet/gists{/gist_id}", "starred_url": "https://api.github.com/users/xFrednet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xFrednet/subscriptions", "organizations_url": "https://api.github.com/users/xFrednet/orgs", "repos_url": "https://api.github.com/users/xFrednet/repos", "events_url": "https://api.github.com/users/xFrednet/events{/privacy}", "received_events_url": "https://api.github.com/users/xFrednet/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "88ae2d1155c48d1c2b0dc4d049f0411778a94035", "url": "https://api.github.com/repos/rust-lang/rust/commits/88ae2d1155c48d1c2b0dc4d049f0411778a94035", "html_url": "https://github.com/rust-lang/rust/commit/88ae2d1155c48d1c2b0dc4d049f0411778a94035"}], "stats": {"total": 12, "additions": 11, "deletions": 1}, "files": [{"sha": "4a8a46be0416438e798af2e0fdf7b25b11cd140d", "filename": "clippy_lints/src/utils/internal_lints/metadata_collector.rs", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/b03642e51f4c1cfc51858dd792aa689b0e6597d7/clippy_lints%2Fsrc%2Futils%2Finternal_lints%2Fmetadata_collector.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b03642e51f4c1cfc51858dd792aa689b0e6597d7/clippy_lints%2Fsrc%2Futils%2Finternal_lints%2Fmetadata_collector.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Finternal_lints%2Fmetadata_collector.rs?ref=b03642e51f4c1cfc51858dd792aa689b0e6597d7", "patch": "@@ -290,12 +290,22 @@ fn collect_configs() -> Vec<ClippyConfiguration> {\n                 lints,\n                 doc,\n                 config_type: x.config_type,\n-                default: x.default.to_string(),\n+                default: clarify_default(x.default),\n             }\n         })\n         .collect()\n }\n \n+fn clarify_default(default: &'static str) -> String {\n+    if let Some((_start, init))  = default.split_once('[') {\n+        if let Some((init, _end)) = init.split_once(']') {\n+            return format!(\"[{}]\", init);\n+        }\n+    }\n+    \n+    default.to_string()\n+}\n+\n /// This parses the field documentation of the config struct.\n ///\n /// ```rust, ignore"}]}