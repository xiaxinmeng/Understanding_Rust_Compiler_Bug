{"sha": "93c3da223f6b152859a3f246795b1cbdb2ca3aa7", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkzYzNkYTIyM2Y2YjE1Mjg1OWEzZjI0Njc5NWIxY2JkYjJjYTNhYTc=", "commit": {"author": {"name": "Philipp Krones", "email": "hello@philkrones.com", "date": "2019-08-05T08:50:06Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-08-05T08:50:06Z"}, "message": "Rollup merge of #4331 - phansch:doctests_restriction, r=flip1995\n\nDoctests: Enable running doc tests for restriction lints\n\nchangelog: Enabled remaining doc tests for lint documentation page\n\nmaster: 202 passed; 0 failed; 122 ignored; 0 measured; 0 filtered out\nthis PR: 231 passed; 0 failed; 123 ignored; 0 measured; 0 filtered out\n\nCloses #4319 (assuming this is merged after #4329 and #4330)", "tree": {"sha": "ced08914bcdef4a510053788e5b4074f06a97123", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ced08914bcdef4a510053788e5b4074f06a97123"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/93c3da223f6b152859a3f246795b1cbdb2ca3aa7", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdR+2+CRBK7hj4Ov3rIwAAdHIIAAvRufl+DlNvzllDuvHEeFMw\nUx23kLldQ1ydBHPi+vuEmmEAXIDkX/nl6sDTdojyLImNZoT/LvqW1CMkwvqY7Ycn\noYXp1cm2+KlXuqWH9V4YQ6koue9+nGLaQZc3McLgxGsomTH0Et05aKUy+uUwGj6e\nkyBhX1VTleITRHAIDWWFToujwoakl0vp3j9ozS0pKKa08hrApbs+LGijPL4eRlZC\nZLVL4L37I+jR2kv7WFSlBJs2X3vfaGc6jpahiv7i4FgpeQQ7lVWZ31j38Cngt4AX\nNoAdWnZw1x91zcUv5R0BU4e70omZ5WO4+UF8oVE/HsQinGnq/eMeImsmBrn2VgY=\n=7D4d\n-----END PGP SIGNATURE-----\n", "payload": "tree ced08914bcdef4a510053788e5b4074f06a97123\nparent f5db24a59fa34f93cfc1369df8f13384936170bf\nparent b608e02e1cedb99ee8a069e3647dde5316b41968\nauthor Philipp Krones <hello@philkrones.com> 1564995006 +0200\ncommitter GitHub <noreply@github.com> 1564995006 +0200\n\nRollup merge of #4331 - phansch:doctests_restriction, r=flip1995\n\nDoctests: Enable running doc tests for restriction lints\n\nchangelog: Enabled remaining doc tests for lint documentation page\n\nmaster: 202 passed; 0 failed; 122 ignored; 0 measured; 0 filtered out\nthis PR: 231 passed; 0 failed; 123 ignored; 0 measured; 0 filtered out\n\nCloses #4319 (assuming this is merged after #4329 and #4330)\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/93c3da223f6b152859a3f246795b1cbdb2ca3aa7", "html_url": "https://github.com/rust-lang/rust/commit/93c3da223f6b152859a3f246795b1cbdb2ca3aa7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/93c3da223f6b152859a3f246795b1cbdb2ca3aa7/comments", "author": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f5db24a59fa34f93cfc1369df8f13384936170bf", "url": "https://api.github.com/repos/rust-lang/rust/commits/f5db24a59fa34f93cfc1369df8f13384936170bf", "html_url": "https://github.com/rust-lang/rust/commit/f5db24a59fa34f93cfc1369df8f13384936170bf"}, {"sha": "b608e02e1cedb99ee8a069e3647dde5316b41968", "url": "https://api.github.com/repos/rust-lang/rust/commits/b608e02e1cedb99ee8a069e3647dde5316b41968", "html_url": "https://github.com/rust-lang/rust/commit/b608e02e1cedb99ee8a069e3647dde5316b41968"}], "stats": {"total": 73, "additions": 57, "deletions": 16}, "files": [{"sha": "9e0d114569e8af86572acb51e3e5a5a449c3e5be", "filename": "clippy_lints/src/arithmetic.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/93c3da223f6b152859a3f246795b1cbdb2ca3aa7/clippy_lints%2Fsrc%2Farithmetic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93c3da223f6b152859a3f246795b1cbdb2ca3aa7/clippy_lints%2Fsrc%2Farithmetic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Farithmetic.rs?ref=93c3da223f6b152859a3f246795b1cbdb2ca3aa7", "patch": "@@ -16,7 +16,8 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n-    /// a + 1\n+    /// # let a = 0;\n+    /// a + 1;\n     /// ```\n     pub INTEGER_ARITHMETIC,\n     restriction,\n@@ -33,7 +34,8 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n-    /// a + 1.0\n+    /// # let a = 0.0;\n+    /// a + 1.0;\n     /// ```\n     pub FLOAT_ARITHMETIC,\n     restriction,"}, {"sha": "6daf204a5f187587644bab1c255baba8de62b262", "filename": "clippy_lints/src/else_if_without_else.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/93c3da223f6b152859a3f246795b1cbdb2ca3aa7/clippy_lints%2Fsrc%2Felse_if_without_else.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93c3da223f6b152859a3f246795b1cbdb2ca3aa7/clippy_lints%2Fsrc%2Felse_if_without_else.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Felse_if_without_else.rs?ref=93c3da223f6b152859a3f246795b1cbdb2ca3aa7", "patch": "@@ -16,6 +16,9 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n+    /// # fn a() {}\n+    /// # fn b() {}\n+    /// # let x: i32 = 1;\n     /// if x.is_positive() {\n     ///     a();\n     /// } else if x.is_negative() {\n@@ -26,6 +29,9 @@ declare_clippy_lint! {\n     /// Could be written:\n     ///\n     /// ```rust\n+    /// # fn a() {}\n+    /// # fn b() {}\n+    /// # let x: i32 = 1;\n     /// if x.is_positive() {\n     ///     a();\n     /// } else if x.is_negative() {"}, {"sha": "06e5458c185efa25eab8ac50d9e1b634eb4a6f64", "filename": "clippy_lints/src/indexing_slicing.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/93c3da223f6b152859a3f246795b1cbdb2ca3aa7/clippy_lints%2Fsrc%2Findexing_slicing.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93c3da223f6b152859a3f246795b1cbdb2ca3aa7/clippy_lints%2Fsrc%2Findexing_slicing.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Findexing_slicing.rs?ref=93c3da223f6b152859a3f246795b1cbdb2ca3aa7", "patch": "@@ -47,7 +47,7 @@ declare_clippy_lint! {\n     /// **Known problems:** Hopefully none.\n     ///\n     /// **Example:**\n-    /// ```rust\n+    /// ```rust,no_run\n     /// // Vector\n     /// let x = vec![0; 5];\n     ///"}, {"sha": "8e2340175415dd7a52b54b4915d02e3c443cbd2a", "filename": "clippy_lints/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/93c3da223f6b152859a3f246795b1cbdb2ca3aa7/clippy_lints%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93c3da223f6b152859a3f246795b1cbdb2ca3aa7/clippy_lints%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.rs?ref=93c3da223f6b152859a3f246795b1cbdb2ca3aa7", "patch": "@@ -115,7 +115,7 @@ macro_rules! declare_clippy_lint {\n     };\n     { $(#[$attr:meta])* pub $name:tt, restriction, $description:tt } => {\n         declare_tool_lint! {\n-            pub clippy::$name, Allow, $description, report_in_external_macro: true\n+            $(#[$attr])* pub clippy::$name, Allow, $description, report_in_external_macro: true\n         }\n     };\n     { $(#[$attr:meta])* pub $name:tt, cargo, $description:tt } => {"}, {"sha": "8a6f6970e1bc68e00727d9b6973fd9af30fbce09", "filename": "clippy_lints/src/matches.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/93c3da223f6b152859a3f246795b1cbdb2ca3aa7/clippy_lints%2Fsrc%2Fmatches.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93c3da223f6b152859a3f246795b1cbdb2ca3aa7/clippy_lints%2Fsrc%2Fmatches.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmatches.rs?ref=93c3da223f6b152859a3f246795b1cbdb2ca3aa7", "patch": "@@ -211,6 +211,8 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n+    /// # enum Foo { A(usize), B(usize) }\n+    /// # let x = Foo::B(1);\n     /// match x {\n     ///     A => {},\n     ///     _ => {},"}, {"sha": "54b0a61937e7eb54f3bd3a3e0c571710828d4177", "filename": "clippy_lints/src/mem_forget.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/93c3da223f6b152859a3f246795b1cbdb2ca3aa7/clippy_lints%2Fsrc%2Fmem_forget.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93c3da223f6b152859a3f246795b1cbdb2ca3aa7/clippy_lints%2Fsrc%2Fmem_forget.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmem_forget.rs?ref=93c3da223f6b152859a3f246795b1cbdb2ca3aa7", "patch": "@@ -14,6 +14,8 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n+    /// # use std::mem;\n+    /// # use std::rc::Rc;\n     /// mem::forget(Rc::new(55))\n     /// ```\n     pub MEM_FORGET,"}, {"sha": "5bb5ebc83a4dc128a94a69c594dd1feb957bb39a", "filename": "clippy_lints/src/methods/mod.rs", "status": "modified", "additions": 30, "deletions": 6, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/93c3da223f6b152859a3f246795b1cbdb2ca3aa7/clippy_lints%2Fsrc%2Fmethods%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93c3da223f6b152859a3f246795b1cbdb2ca3aa7/clippy_lints%2Fsrc%2Fmethods%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmethods%2Fmod.rs?ref=93c3da223f6b152859a3f246795b1cbdb2ca3aa7", "patch": "@@ -40,8 +40,19 @@ declare_clippy_lint! {\n     /// **Known problems:** None.\n     ///\n     /// **Example:**\n+    ///\n+    /// Using unwrap on an `Option`:\n+    ///\n     /// ```rust\n-    /// x.unwrap()\n+    /// let opt = Some(1);\n+    /// opt.unwrap();\n+    /// ```\n+    ///\n+    /// Better:\n+    ///\n+    /// ```rust\n+    /// let opt = Some(1);\n+    /// opt.expect(\"more helpful message\");\n     /// ```\n     pub OPTION_UNWRAP_USED,\n     restriction,\n@@ -62,8 +73,18 @@ declare_clippy_lint! {\n     /// **Known problems:** None.\n     ///\n     /// **Example:**\n+    /// Using unwrap on an `Option`:\n+    ///\n     /// ```rust\n-    /// x.unwrap()\n+    /// let res: Result<usize, ()> = Ok(1);\n+    /// res.unwrap();\n+    /// ```\n+    ///\n+    /// Better:\n+    ///\n+    /// ```rust\n+    /// let res: Result<usize, ()> = Ok(1);\n+    /// res.expect(\"more helpful message\");\n     /// ```\n     pub RESULT_UNWRAP_USED,\n     restriction,\n@@ -141,9 +162,10 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n-    /// impl X {\n-    ///     pub fn as_str(self) -> &str {\n-    ///         ..\n+    /// # struct X;\n+    /// impl<'a> X {\n+    ///     pub fn as_str(self) -> &'a str {\n+    ///         \"foo\"\n     ///     }\n     /// }\n     /// ```\n@@ -474,7 +496,9 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n-    /// x.clone()\n+    /// # use std::rc::Rc;\n+    /// let x = Rc::new(1);\n+    /// x.clone();\n     /// ```\n     pub CLONE_ON_REF_PTR,\n     restriction,"}, {"sha": "f8a24982934c736485934c98b786aa327b2b7e34", "filename": "clippy_lints/src/misc.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/93c3da223f6b152859a3f246795b1cbdb2ca3aa7/clippy_lints%2Fsrc%2Fmisc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93c3da223f6b152859a3f246795b1cbdb2ca3aa7/clippy_lints%2Fsrc%2Fmisc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmisc.rs?ref=93c3da223f6b152859a3f246795b1cbdb2ca3aa7", "patch": "@@ -226,8 +226,9 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n-    /// const ONE = 1.00f64;\n-    /// x == ONE  // where both are floats\n+    /// let x: f64 = 1.0;\n+    /// const ONE: f64 = 1.00;\n+    /// x == ONE;  // where both are floats\n     /// ```\n     pub FLOAT_CMP_CONST,\n     restriction,"}, {"sha": "865543ce3d86e9f1f03b229a9d8486843d5bdad2", "filename": "clippy_lints/src/missing_inline.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/93c3da223f6b152859a3f246795b1cbdb2ca3aa7/clippy_lints%2Fsrc%2Fmissing_inline.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93c3da223f6b152859a3f246795b1cbdb2ca3aa7/clippy_lints%2Fsrc%2Fmissing_inline.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmissing_inline.rs?ref=93c3da223f6b152859a3f246795b1cbdb2ca3aa7", "patch": "@@ -33,7 +33,7 @@ declare_clippy_lint! {\n     ///\n     /// struct Baz;\n     /// impl Baz {\n-    ///    fn priv() {} // ok\n+    ///    fn private() {} // ok\n     /// }\n     ///\n     /// impl Bar for Baz {\n@@ -42,8 +42,8 @@ declare_clippy_lint! {\n     ///\n     /// pub struct PubBaz;\n     /// impl PubBaz {\n-    ///    fn priv() {} // ok\n-    ///    pub not_ptriv() {} // missing #[inline]\n+    ///    fn private() {} // ok\n+    ///    pub fn not_ptrivate() {} // missing #[inline]\n     /// }\n     ///\n     /// impl Bar for PubBaz {"}, {"sha": "0e75f85cccbc8731efe8d3e696e3a41a5f2da495", "filename": "clippy_lints/src/shadow.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/93c3da223f6b152859a3f246795b1cbdb2ca3aa7/clippy_lints%2Fsrc%2Fshadow.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93c3da223f6b152859a3f246795b1cbdb2ca3aa7/clippy_lints%2Fsrc%2Fshadow.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fshadow.rs?ref=93c3da223f6b152859a3f246795b1cbdb2ca3aa7", "patch": "@@ -20,6 +20,7 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n+    /// # let x = 1;\n     /// let x = &x;\n     /// ```\n     pub SHADOW_SAME,\n@@ -41,10 +42,12 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n+    /// let x = 2;\n     /// let x = x + 1;\n     /// ```\n     /// use different variable name:\n     /// ```rust\n+    /// let x = 2;\n     /// let y = x + 1;\n     /// ```\n     pub SHADOW_REUSE,"}, {"sha": "0de63b5ff3e568da2fc9c2da15373ca6d370c9c0", "filename": "clippy_lints/src/strings.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/93c3da223f6b152859a3f246795b1cbdb2ca3aa7/clippy_lints%2Fsrc%2Fstrings.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93c3da223f6b152859a3f246795b1cbdb2ca3aa7/clippy_lints%2Fsrc%2Fstrings.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fstrings.rs?ref=93c3da223f6b152859a3f246795b1cbdb2ca3aa7", "patch": "@@ -48,7 +48,7 @@ declare_clippy_lint! {\n     ///\n     /// ```rust\n     /// let x = \"Hello\".to_owned();\n-    /// x + \", World\"\n+    /// x + \", World\";\n     /// ```\n     pub STRING_ADD,\n     restriction,"}, {"sha": "9e26b3e5b9c1317bf94df86b90d8be34345fa603", "filename": "clippy_lints/src/write.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/93c3da223f6b152859a3f246795b1cbdb2ca3aa7/clippy_lints%2Fsrc%2Fwrite.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93c3da223f6b152859a3f246795b1cbdb2ca3aa7/clippy_lints%2Fsrc%2Fwrite.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fwrite.rs?ref=93c3da223f6b152859a3f246795b1cbdb2ca3aa7", "patch": "@@ -77,6 +77,7 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n+    /// # let foo = \"bar\";\n     /// println!(\"{:?}\", foo);\n     /// ```\n     pub USE_DEBUG,"}]}