{"sha": "86a427fe32e0a4f3696f55c9f7a04a768e8ced68", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg2YTQyN2ZlMzJlMGE0ZjM2OTZmNTVjOWY3YTA0YTc2OGU4Y2VkNjg=", "commit": {"author": {"name": "Seiichi Uchida", "email": "seuchida@gmail.com", "date": "2018-03-09T16:19:38Z"}, "committer": {"name": "Seiichi Uchida", "email": "seuchida@gmail.com", "date": "2018-03-09T16:19:38Z"}, "message": "Check whether '\\\\'' is char literal or lifetime", "tree": {"sha": "cc1691f6510dea1ead2901563c11d425b4eceaca", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cc1691f6510dea1ead2901563c11d425b4eceaca"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/86a427fe32e0a4f3696f55c9f7a04a768e8ced68", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/86a427fe32e0a4f3696f55c9f7a04a768e8ced68", "html_url": "https://github.com/rust-lang/rust/commit/86a427fe32e0a4f3696f55c9f7a04a768e8ced68", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/86a427fe32e0a4f3696f55c9f7a04a768e8ced68/comments", "author": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "committer": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9905c569ba42814c3afcd30ba3d599d999946f0f", "url": "https://api.github.com/repos/rust-lang/rust/commits/9905c569ba42814c3afcd30ba3d599d999946f0f", "html_url": "https://github.com/rust-lang/rust/commit/9905c569ba42814c3afcd30ba3d599d999946f0f"}], "stats": {"total": 39, "additions": 36, "deletions": 3}, "files": [{"sha": "e4e9a9ddd757445d585c0ab13497d0af8cc8f901", "filename": "Cargo.lock", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/86a427fe32e0a4f3696f55c9f7a04a768e8ced68/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/86a427fe32e0a4f3696f55c9f7a04a768e8ced68/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=86a427fe32e0a4f3696f55c9f7a04a768e8ced68", "patch": "@@ -89,6 +89,11 @@ name = \"dtoa\"\n version = \"0.4.2\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n+[[package]]\n+name = \"either\"\n+version = \"1.4.0\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+\n [[package]]\n name = \"ena\"\n version = \"0.9.2\"\n@@ -144,6 +149,14 @@ dependencies = [\n  \"quick-error 1.2.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n+[[package]]\n+name = \"itertools\"\n+version = \"0.7.7\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+dependencies = [\n+ \"either 1.4.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+]\n+\n [[package]]\n name = \"itoa\"\n version = \"0.3.4\"\n@@ -367,6 +380,7 @@ dependencies = [\n  \"diff 0.1.11 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"env_logger 0.5.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"getopts 0.2.17 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"itertools 0.7.7 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"lazy_static 1.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"libc 0.2.39 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"log 0.4.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -615,13 +629,15 @@ dependencies = [\n \"checksum derive-new 0.5.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"92f8b8e1d6c8a5f5ea0849a0e4c55941576115c62d3fc425e96918bbbeb3d3c2\"\n \"checksum diff 0.1.11 (registry+https://github.com/rust-lang/crates.io-index)\" = \"3c2b69f912779fbb121ceb775d74d51e915af17aaebc38d28a592843a2dd0a3a\"\n \"checksum dtoa 0.4.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"09c3753c3db574d215cba4ea76018483895d7bff25a31b49ba45db21c48e50ab\"\n+\"checksum either 1.4.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"740178ddf48b1a9e878e6d6509a1442a2d42fd2928aae8e7a6f8a36fb01981b3\"\n \"checksum ena 0.9.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"f8b449f3b18c89d2dbe40548d2ee4fa58ea0a08b761992da6ecb9788e4688834\"\n \"checksum env_logger 0.5.4 (registry+https://github.com/rust-lang/crates.io-index)\" = \"f3cc21490995c841d68e00276eba02071ebb269ec24011d5728bd00eabd39e31\"\n \"checksum error-chain 0.11.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"ff511d5dc435d703f4971bc399647c9bc38e20cb41452e3b9feb4765419ed3f3\"\n \"checksum fuchsia-zircon 0.3.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"2e9763c69ebaae630ba35f74888db465e49e259ba1bc0eda7d06f4a067615d82\"\n \"checksum fuchsia-zircon-sys 0.3.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"3dcaa9ae7725d12cdb85b3ad99a434db70b468c09ded17e012d86b5c1010f7a7\"\n \"checksum getopts 0.2.17 (registry+https://github.com/rust-lang/crates.io-index)\" = \"b900c08c1939860ce8b54dc6a89e26e00c04c380fd0e09796799bd7f12861e05\"\n \"checksum humantime 1.1.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"0484fda3e7007f2a4a0d9c3a703ca38c71c54c55602ce4660c419fd32e188c9e\"\n+\"checksum itertools 0.7.7 (registry+https://github.com/rust-lang/crates.io-index)\" = \"23d53b4c7394338044c3b9c8c5b2caaf7b40ae049ecd321578ebdc2e13738cd1\"\n \"checksum itoa 0.3.4 (registry+https://github.com/rust-lang/crates.io-index)\" = \"8324a32baf01e2ae060e9de58ed0bc2320c9a2833491ee36cd3b4c414de4db8c\"\n \"checksum kernel32-sys 0.2.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"7507624b29483431c0ba2d82aece8ca6cdba9382bff4ddd0f7490560c056098d\"\n \"checksum lazy_static 1.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"c8f31047daa365f19be14b47c29df4f7c3b581832407daabe6ae77397619237d\""}, {"sha": "ecd8db0b2bead2e5324d83a53aafb9d4edb6aad8", "filename": "Cargo.toml", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/86a427fe32e0a4f3696f55c9f7a04a768e8ced68/Cargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/86a427fe32e0a4f3696f55c9f7a04a768e8ced68/Cargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.toml?ref=86a427fe32e0a4f3696f55c9f7a04a768e8ced68", "patch": "@@ -35,6 +35,7 @@ cargo-fmt = []\n rustfmt-format-diff = []\n \n [dependencies]\n+itertools = \"0.7\"\n toml = \"0.4\"\n serde = \"1.0\"\n serde_derive = \"1.0\""}, {"sha": "e3e52eda8153023a433a83ad5ffd831b448f4156", "filename": "src/comment.rs", "status": "modified", "additions": 18, "deletions": 3, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/86a427fe32e0a4f3696f55c9f7a04a768e8ced68/src%2Fcomment.rs", "raw_url": "https://github.com/rust-lang/rust/raw/86a427fe32e0a4f3696f55c9f7a04a768e8ced68/src%2Fcomment.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomment.rs?ref=86a427fe32e0a4f3696f55c9f7a04a768e8ced68", "patch": "@@ -12,6 +12,7 @@\n \n use std::{self, iter, borrow::Cow};\n \n+use itertools::{multipeek, MultiPeek};\n use syntax::codemap::Span;\n \n use config::Config;\n@@ -684,7 +685,7 @@ where\n     T: Iterator,\n     T::Item: RichChar,\n {\n-    base: iter::Peekable<T>,\n+    base: MultiPeek<T>,\n     status: CharClassesStatus,\n }\n \n@@ -776,7 +777,7 @@ where\n {\n     pub fn new(base: T) -> CharClasses<T> {\n         CharClasses {\n-            base: base.peekable(),\n+            base: multipeek(base),\n             status: CharClassesStatus::Normal,\n         }\n     }\n@@ -820,7 +821,21 @@ where\n                     char_kind = FullCodeCharKind::InString;\n                     CharClassesStatus::LitString\n                 }\n-                '\\'' => CharClassesStatus::LitChar,\n+                '\\'' => {\n+                    // HACK: Work around mut borrow.\n+                    match self.base.peek() {\n+                        Some(next) if next.get_char() == '\\\\' => {\n+                            self.status = CharClassesStatus::LitChar;\n+                            return Some((char_kind, item));\n+                        }\n+                        _ => (),\n+                    }\n+\n+                    match self.base.peek() {\n+                        Some(next) if next.get_char() == '\\'' => CharClassesStatus::LitChar,\n+                        _ => CharClassesStatus::Normal,\n+                    }\n+                }\n                 '/' => match self.base.peek() {\n                     Some(next) if next.get_char() == '*' => {\n                         self.status = CharClassesStatus::BlockCommentOpening(1);"}, {"sha": "b70c6e6663c2a3e4d1e21ec796d621f1eeeb397c", "filename": "src/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/86a427fe32e0a4f3696f55c9f7a04a768e8ced68/src%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/86a427fe32e0a4f3696f55c9f7a04a768e8ced68/src%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib.rs?ref=86a427fe32e0a4f3696f55c9f7a04a768e8ced68", "patch": "@@ -16,6 +16,7 @@\n #[macro_use]\n extern crate derive_new;\n extern crate diff;\n+extern crate itertools;\n #[macro_use]\n extern crate log;\n extern crate regex;"}]}