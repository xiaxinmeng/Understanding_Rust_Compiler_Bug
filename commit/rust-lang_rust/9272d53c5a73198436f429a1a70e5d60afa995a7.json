{"sha": "9272d53c5a73198436f429a1a70e5d60afa995a7", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkyNzJkNTNjNWE3MzE5ODQzNmY0MjlhMWE3MGU1ZDYwYWZhOTk1YTc=", "commit": {"author": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2021-01-19T12:17:58Z"}, "committer": {"name": "Lzu Tao", "email": "taolzu@gmail.com", "date": "2021-01-19T12:17:58Z"}, "message": "Stop `fold` at first None when iterator yield", "tree": {"sha": "e9752a5b6a5624b130792b13ae30cc3c78ee4e8d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e9752a5b6a5624b130792b13ae30cc3c78ee4e8d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9272d53c5a73198436f429a1a70e5d60afa995a7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9272d53c5a73198436f429a1a70e5d60afa995a7", "html_url": "https://github.com/rust-lang/rust/commit/9272d53c5a73198436f429a1a70e5d60afa995a7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9272d53c5a73198436f429a1a70e5d60afa995a7/comments", "author": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tesuji", "id": 15225902, "node_id": "MDQ6VXNlcjE1MjI1OTAy", "avatar_url": "https://avatars.githubusercontent.com/u/15225902?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tesuji", "html_url": "https://github.com/tesuji", "followers_url": "https://api.github.com/users/tesuji/followers", "following_url": "https://api.github.com/users/tesuji/following{/other_user}", "gists_url": "https://api.github.com/users/tesuji/gists{/gist_id}", "starred_url": "https://api.github.com/users/tesuji/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tesuji/subscriptions", "organizations_url": "https://api.github.com/users/tesuji/orgs", "repos_url": "https://api.github.com/users/tesuji/repos", "events_url": "https://api.github.com/users/tesuji/events{/privacy}", "received_events_url": "https://api.github.com/users/tesuji/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "20d8478864333b2633509c530b66d52ffef91fbb", "url": "https://api.github.com/repos/rust-lang/rust/commits/20d8478864333b2633509c530b66d52ffef91fbb", "html_url": "https://github.com/rust-lang/rust/commit/20d8478864333b2633509c530b66d52ffef91fbb"}], "stats": {"total": 14, "additions": 14, "deletions": 0}, "files": [{"sha": "b1170f32ba161d1b6b89e94f2bc9f9707907f671", "filename": "library/core/src/iter/adapters/intersperse.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9272d53c5a73198436f429a1a70e5d60afa995a7/library%2Fcore%2Fsrc%2Fiter%2Fadapters%2Fintersperse.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9272d53c5a73198436f429a1a70e5d60afa995a7/library%2Fcore%2Fsrc%2Fiter%2Fadapters%2Fintersperse.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fiter%2Fadapters%2Fintersperse.rs?ref=9272d53c5a73198436f429a1a70e5d60afa995a7", "patch": "@@ -176,6 +176,8 @@ where\n     if !needs_sep {\n         if let Some(x) = iter.next() {\n             accum = f(accum, x);\n+        } else {\n+            return accum;\n         }\n     }\n "}, {"sha": "78b4d1acaf5cd3119d619b79dab7a2bbdf749136", "filename": "library/core/tests/iter.rs", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/9272d53c5a73198436f429a1a70e5d60afa995a7/library%2Fcore%2Ftests%2Fiter.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9272d53c5a73198436f429a1a70e5d60afa995a7/library%2Fcore%2Ftests%2Fiter.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Ftests%2Fiter.rs?ref=9272d53c5a73198436f429a1a70e5d60afa995a7", "patch": "@@ -3577,6 +3577,18 @@ fn test_intersperse_fold() {\n         acc\n     });\n     assert_eq!(v.as_slice(), [9, 2, 9, 3]);\n+\n+    struct NoneAtStart(i32); // Produces: None, Some(2), Some(3), None, ...\n+    impl Iterator for NoneAtStart {\n+        type Item = i32;\n+        fn next(&mut self) -> Option<i32> {\n+            self.0 += 1;\n+            Some(self.0).filter(|i| i % 3 != 1)\n+        }\n+    }\n+\n+    let v = NoneAtStart(0).intersperse(1000).fold(0, |a, b| a + b);\n+    assert_eq!(v, 0);\n }\n \n #[test]"}]}