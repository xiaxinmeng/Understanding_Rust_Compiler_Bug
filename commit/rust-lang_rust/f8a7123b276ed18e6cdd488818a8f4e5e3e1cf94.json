{"sha": "f8a7123b276ed18e6cdd488818a8f4e5e3e1cf94", "node_id": "C_kwDOAAsO6NoAKGY4YTcxMjNiMjc2ZWQxOGU2Y2RkNDg4ODE4YThmNGU1ZTNlMWNmOTQ", "commit": {"author": {"name": "Pietro Albini", "email": "pietro.albini@ferrous-systems.com", "date": "2022-11-24T16:25:35Z"}, "committer": {"name": "Pietro Albini", "email": "pietro.albini@ferrous-systems.com", "date": "2022-11-24T16:25:35Z"}, "message": "address review feedback", "tree": {"sha": "cc62913dd53f7bf38d2ccbcaf6a36c23f10a0259", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cc62913dd53f7bf38d2ccbcaf6a36c23f10a0259"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f8a7123b276ed18e6cdd488818a8f4e5e3e1cf94", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEMycKYjxLY0eb13b7zXazX3c0dp4FAmN/mwUACgkQzXazX3c0\ndp7YyA//QGc8V3+sC7XQlp0dHwedPwrdzK3BJ/WBO0v5ajfAud6QkGFElsekDyyF\nlfxxu9xFA933TRIcMSdhWvemJArYVmK7WVVqlx4TC6LUuI3W9EYeeyIG6ShqgErh\n1UCME85C5rLN4TTRIaeeQwfGONwDv2Ziqqnp2KgQYrxRo1SfKUbguePsInXO7HYc\nu5V6xhKh/PyjI0bsgI+WzfPlaZhjgzASd1lBzBDJ9Vp+NvoatnHviUOtn5M3mCvW\njheuX7767bUI3o4nYdt1wwkJVGcwxoY5OSCCQ2voGPG7SQuBmEO6Nwdbzl7aN/nm\nBQ+f2oApLZCqZuFCX0+S4s/Pr2YvxYYPDhJTo1KnLSLfbnuJ6hlk/lgAp38T3eSq\nNohB35YRdFIm7MggNFr0F42oYLUWW9oZuTDlcl5IU8u3shoCDVU7KOPtfNJmMfe/\nyEAQ6Mn+8hXPahJW73mssDc4zwDbqiaR+rO0sWpDKtM4Ohq+xFvI4vV9vVGY25uf\n7uOwuyjd5TCj++nqvR0gHPx2BwAklKtix6pSV0A6DPCFRviGxl/Avy2scjvI3Efm\nUkT0UVQkuvdiIk6YAftX/LX5LS0SB2gTyzr+PBTGXESLcd2cfPAzbWD7emyf8mqv\nCWT4LLhWItnOM9x9peTVejiS8TxCW3fS7cCY8f13oeNtrKMkoqo=\n=DO3P\n-----END PGP SIGNATURE-----", "payload": "tree cc62913dd53f7bf38d2ccbcaf6a36c23f10a0259\nparent f78e6468ba40b5d328cf282c92fc94521988000e\nauthor Pietro Albini <pietro.albini@ferrous-systems.com> 1669307135 +0100\ncommitter Pietro Albini <pietro.albini@ferrous-systems.com> 1669307135 +0100\n\naddress review feedback\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f8a7123b276ed18e6cdd488818a8f4e5e3e1cf94", "html_url": "https://github.com/rust-lang/rust/commit/f8a7123b276ed18e6cdd488818a8f4e5e3e1cf94", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f8a7123b276ed18e6cdd488818a8f4e5e3e1cf94/comments", "author": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f78e6468ba40b5d328cf282c92fc94521988000e", "url": "https://api.github.com/repos/rust-lang/rust/commits/f78e6468ba40b5d328cf282c92fc94521988000e", "html_url": "https://github.com/rust-lang/rust/commit/f78e6468ba40b5d328cf282c92fc94521988000e"}], "stats": {"total": 17, "additions": 11, "deletions": 6}, "files": [{"sha": "ca54cbd2d68dc213051f86673ddf3e7fa965cba7", "filename": "config.toml.example", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/f8a7123b276ed18e6cdd488818a8f4e5e3e1cf94/config.toml.example", "raw_url": "https://github.com/rust-lang/rust/raw/f8a7123b276ed18e6cdd488818a8f4e5e3e1cf94/config.toml.example", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/config.toml.example?ref=f8a7123b276ed18e6cdd488818a8f4e5e3e1cf94", "patch": "@@ -255,11 +255,14 @@ changelog-seen = 2\n # Defaults to the Python interpreter used to execute x.py\n #python = \"python\"\n \n-# The path to the REUSE executable to use. REUSE will be used to gather\n-# the licensing information of the codebase.\n+# The path to the REUSE executable to use. Note that REUSE is not required in\n+# most cases, as our tooling relies on a cached (and shrinked) copy of the\n+# REUSE output present in the git repository and in our source tarballs.\n #\n-# If this is omitted, the cached licensing information present in the source\n-# tarball will have to be present.\n+# REUSE is only needed if your changes caused the overral licensing of the\n+# repository to change, and the cached copy has to be regenerated.\n+#\n+# Defaults to the \"reuse\" command in the system path.\n #reuse = \"reuse\"\n \n # Force Cargo to check that Cargo.lock describes the precise dependency"}, {"sha": "ca2a6f4b8c8a28f72b33f57a211b7993d7181208", "filename": "src/tools/collect-license-metadata/src/main.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f8a7123b276ed18e6cdd488818a8f4e5e3e1cf94/src%2Ftools%2Fcollect-license-metadata%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f8a7123b276ed18e6cdd488818a8f4e5e3e1cf94/src%2Ftools%2Fcollect-license-metadata%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcollect-license-metadata%2Fsrc%2Fmain.rs?ref=f8a7123b276ed18e6cdd488818a8f4e5e3e1cf94", "patch": "@@ -22,7 +22,7 @@ fn main() -> Result<(), Error> {\n     std::fs::write(\n         &dest,\n         &serde_json::to_vec_pretty(&serde_json::json!({\n-            \"files\": crate::path_tree::strip_interning(tree, &interner),\n+            \"files\": crate::path_tree::expand_interned_licenses(tree, &interner),\n         }))?,\n     )?;\n "}, {"sha": "133ff6837378e0ff78150714b05d2da5aeeb9812", "filename": "src/tools/collect-license-metadata/src/path_tree.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f8a7123b276ed18e6cdd488818a8f4e5e3e1cf94/src%2Ftools%2Fcollect-license-metadata%2Fsrc%2Fpath_tree.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f8a7123b276ed18e6cdd488818a8f4e5e3e1cf94/src%2Ftools%2Fcollect-license-metadata%2Fsrc%2Fpath_tree.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcollect-license-metadata%2Fsrc%2Fpath_tree.rs?ref=f8a7123b276ed18e6cdd488818a8f4e5e3e1cf94", "patch": "@@ -270,7 +270,9 @@ pub(crate) fn build(mut input: Vec<(PathBuf, LicenseId)>) -> Node<LicenseId> {\n     Node::Root { childs }\n }\n \n-pub(crate) fn strip_interning(\n+/// Convert a `Node<LicenseId>` into a `Node<&License>`, expanding all interned license IDs with a\n+/// reference to the actual license metadata.\n+pub(crate) fn expand_interned_licenses(\n     node: Node<LicenseId>,\n     interner: &LicensesInterner,\n ) -> Node<&License> {"}]}