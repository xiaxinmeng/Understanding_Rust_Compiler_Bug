{"sha": "8b57668c33cc8d62b48a25ff0453be4b351b5eeb", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhiNTc2NjhjMzNjYzhkNjJiNDhhMjVmZjA0NTNiZTRiMzUxYjVlZWI=", "commit": {"author": {"name": "Ruben Schmidmeister", "email": "ruben.schmidmeister@icloud.com", "date": "2019-05-17T14:13:46Z"}, "committer": {"name": "Ruben Schmidmeister", "email": "ruben.schmidmeister@icloud.com", "date": "2019-05-17T14:13:46Z"}, "message": "Move macro to separate module", "tree": {"sha": "40e2e5f59deeb853cf42c7f96cee9b7b9b25f08d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/40e2e5f59deeb853cf42c7f96cee9b7b9b25f08d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8b57668c33cc8d62b48a25ff0453be4b351b5eeb", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQEzBAABCAAdFiEEU0FXzFYkrmfOhhqxKTh7Wnqvhj8FAlzewaEACgkQKTh7Wnqv\nhj+oqgf/ZGGM59/Xq5bZKIkyy+3KEW0b01+GCU4zebLSfEMaC4o8DmN7mUDMDV2K\nK428mhkwipnO0xQDU/mA+dEAFrk4l014FWNmc+aoRQOlzFY7Ue3Vke+fQTQnxEga\n/iXPOvBoIHmY1tz/mkFv5skTHw3hNMe5mBUmCrlPUHR42L8U1toZUFjGjqg4QfNc\nq3IpFotJQY7UnuNqDJgnO+7bzyDqNtQ8s3g9W7ohVhar0PdXn4sJF1z3db7WSRxI\n9p5rbkmZ59FJbelnu6Mf1HLK002hREdp5ZFGvU7eKIJTa6yxLYOTC88P18++THhC\nkPo0PBRBASwUYQS2ojV7g9X9Z3GwGQ==\n=BQ10\n-----END PGP SIGNATURE-----", "payload": "tree 40e2e5f59deeb853cf42c7f96cee9b7b9b25f08d\nparent 4745cec7f3a016d48c86c67bb6b41b3d434cd28e\nauthor Ruben Schmidmeister <ruben.schmidmeister@icloud.com> 1558102426 +0200\ncommitter Ruben Schmidmeister <ruben.schmidmeister@icloud.com> 1558102426 +0200\n\nMove macro to separate module\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8b57668c33cc8d62b48a25ff0453be4b351b5eeb", "html_url": "https://github.com/rust-lang/rust/commit/8b57668c33cc8d62b48a25ff0453be4b351b5eeb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8b57668c33cc8d62b48a25ff0453be4b351b5eeb/comments", "author": {"login": "bash", "id": 4602612, "node_id": "MDQ6VXNlcjQ2MDI2MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4602612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bash", "html_url": "https://github.com/bash", "followers_url": "https://api.github.com/users/bash/followers", "following_url": "https://api.github.com/users/bash/following{/other_user}", "gists_url": "https://api.github.com/users/bash/gists{/gist_id}", "starred_url": "https://api.github.com/users/bash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bash/subscriptions", "organizations_url": "https://api.github.com/users/bash/orgs", "repos_url": "https://api.github.com/users/bash/repos", "events_url": "https://api.github.com/users/bash/events{/privacy}", "received_events_url": "https://api.github.com/users/bash/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bash", "id": 4602612, "node_id": "MDQ6VXNlcjQ2MDI2MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4602612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bash", "html_url": "https://github.com/bash", "followers_url": "https://api.github.com/users/bash/followers", "following_url": "https://api.github.com/users/bash/following{/other_user}", "gists_url": "https://api.github.com/users/bash/gists{/gist_id}", "starred_url": "https://api.github.com/users/bash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bash/subscriptions", "organizations_url": "https://api.github.com/users/bash/orgs", "repos_url": "https://api.github.com/users/bash/repos", "events_url": "https://api.github.com/users/bash/events{/privacy}", "received_events_url": "https://api.github.com/users/bash/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4745cec7f3a016d48c86c67bb6b41b3d434cd28e", "url": "https://api.github.com/repos/rust-lang/rust/commits/4745cec7f3a016d48c86c67bb6b41b3d434cd28e", "html_url": "https://github.com/rust-lang/rust/commit/4745cec7f3a016d48c86c67bb6b41b3d434cd28e"}], "stats": {"total": 40, "additions": 21, "deletions": 19}, "files": [{"sha": "326d81b2113b4b07b6ce14058fb5740e91628b1e", "filename": "src/config/config_type.rs", "status": "modified", "additions": 1, "deletions": 18, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/8b57668c33cc8d62b48a25ff0453be4b351b5eeb/src%2Fconfig%2Fconfig_type.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8b57668c33cc8d62b48a25ff0453be4b351b5eeb/src%2Fconfig%2Fconfig_type.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fconfig%2Fconfig_type.rs?ref=8b57668c33cc8d62b48a25ff0453be4b351b5eeb", "patch": "@@ -50,23 +50,6 @@ impl ConfigType for IgnoreList {\n     }\n }\n \n-/// Checks if we're in a nightly build.\n-///\n-/// The environment variable `CFG_RELEASE_CHANNEL` is set during the rustc bootstrap\n-/// to \"stable\", \"beta\", or \"nightly\" depending on what toolchain is being built.\n-/// If we are being built as part of the stable or beta toolchains, we want\n-/// to disable unstable configuration options.\n-///\n-/// If we're being built by cargo (e.g., `cargo +nightly install rustfmt-nightly`),\n-/// `CFG_RELEASE_CHANNEL` is not set. As we only support being built against the\n-/// nightly compiler when installed from crates.io, default to nightly mode.\n-#[macro_export]\n-macro_rules! is_nightly_channel {\n-    () => {\n-        option_env!(\"CFG_RELEASE_CHANNEL\").map_or(true, |c| c == \"nightly\" || c == \"dev\")\n-    };\n-}\n-\n macro_rules! create_config {\n     ($($i:ident: $ty:ty, $def:expr, $stb:expr, $( $dstring:expr ),+ );+ $(;)*) => (\n         #[cfg(test)]\n@@ -160,7 +143,7 @@ macro_rules! create_config {\n                         self.$i.1 = true;\n                         self.$i.2 = val;\n                     } else {\n-                        if is_nightly_channel!() {\n+                        if crate::is_nightly_channel!() {\n                             self.$i.1 = true;\n                             self.$i.2 = val;\n                         } else {"}, {"sha": "88605079b7eec24f282a2143463a9db6e6d5efc5", "filename": "src/lib.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/8b57668c33cc8d62b48a25ff0453be4b351b5eeb/src%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8b57668c33cc8d62b48a25ff0453be4b351b5eeb/src%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib.rs?ref=8b57668c33cc8d62b48a25ff0453be4b351b5eeb", "patch": "@@ -40,6 +40,9 @@ pub use crate::rustfmt_diff::{ModifiedChunk, ModifiedLines};\n #[macro_use]\n mod utils;\n \n+#[macro_use]\n+mod release_channel;\n+\n mod attr;\n mod chains;\n pub(crate) mod checkstyle;"}, {"sha": "948247b3c9700e7732408be7d8f8ba367c1c53c0", "filename": "src/release_channel.rs", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/8b57668c33cc8d62b48a25ff0453be4b351b5eeb/src%2Frelease_channel.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8b57668c33cc8d62b48a25ff0453be4b351b5eeb/src%2Frelease_channel.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frelease_channel.rs?ref=8b57668c33cc8d62b48a25ff0453be4b351b5eeb", "patch": "@@ -0,0 +1,16 @@\n+/// Checks if we're in a nightly build.\n+///\n+/// The environment variable `CFG_RELEASE_CHANNEL` is set during the rustc bootstrap\n+/// to \"stable\", \"beta\", or \"nightly\" depending on what toolchain is being built.\n+/// If we are being built as part of the stable or beta toolchains, we want\n+/// to disable unstable configuration options.\n+///\n+/// If we're being built by cargo (e.g., `cargo +nightly install rustfmt-nightly`),\n+/// `CFG_RELEASE_CHANNEL` is not set. As we only support being built against the\n+/// nightly compiler when installed from crates.io, default to nightly mode.\n+#[macro_export]\n+macro_rules! is_nightly_channel {\n+    () => {\n+        option_env!(\"CFG_RELEASE_CHANNEL\").map_or(true, |c| c == \"nightly\" || c == \"dev\")\n+    };\n+}"}, {"sha": "68fd90a01cfd33804bcc98e1c786d2a48d33e04f", "filename": "src/test/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8b57668c33cc8d62b48a25ff0453be4b351b5eeb/src%2Ftest%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8b57668c33cc8d62b48a25ff0453be4b351b5eeb/src%2Ftest%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmod.rs?ref=8b57668c33cc8d62b48a25ff0453be4b351b5eeb", "patch": "@@ -11,10 +11,10 @@ use std::thread;\n \n use crate::config::{Color, Config, EmitMode, FileName, NewlineStyle, ReportTactic};\n use crate::formatting::{ReportedErrors, SourceFile};\n+use crate::is_nightly_channel;\n use crate::rustfmt_diff::{make_diff, print_diff, DiffLine, Mismatch, ModifiedChunk, OutputWriter};\n use crate::source_file;\n use crate::{FormatReport, FormatReportFormatterBuilder, Input, Session};\n-use crate::is_nightly_channel;\n \n const DIFF_CONTEXT_SIZE: usize = 3;\n const CONFIGURATIONS_FILE_NAME: &str = \"Configurations.md\";"}]}