{"sha": "0e06456ecbe244291f1feef7c24b7165f028e0d0", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBlMDY0NTZlY2JlMjQ0MjkxZjFmZWVmN2MyNGI3MTY1ZjAyOGUwZDA=", "commit": {"author": {"name": "Simon Vandel Sillesen", "email": "simon.vandel@gmail.com", "date": "2020-09-19T21:50:51Z"}, "committer": {"name": "Simon Vandel Sillesen", "email": "simon.vandel@gmail.com", "date": "2020-09-20T12:45:46Z"}, "message": "bless", "tree": {"sha": "9a93091fb750f76ccc2fbcb8db5b0f0a5a5a5f34", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9a93091fb750f76ccc2fbcb8db5b0f0a5a5a5f34"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0e06456ecbe244291f1feef7c24b7165f028e0d0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0e06456ecbe244291f1feef7c24b7165f028e0d0", "html_url": "https://github.com/rust-lang/rust/commit/0e06456ecbe244291f1feef7c24b7165f028e0d0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0e06456ecbe244291f1feef7c24b7165f028e0d0/comments", "author": {"login": "simonvandel", "id": 2770647, "node_id": "MDQ6VXNlcjI3NzA2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/2770647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonvandel", "html_url": "https://github.com/simonvandel", "followers_url": "https://api.github.com/users/simonvandel/followers", "following_url": "https://api.github.com/users/simonvandel/following{/other_user}", "gists_url": "https://api.github.com/users/simonvandel/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonvandel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonvandel/subscriptions", "organizations_url": "https://api.github.com/users/simonvandel/orgs", "repos_url": "https://api.github.com/users/simonvandel/repos", "events_url": "https://api.github.com/users/simonvandel/events{/privacy}", "received_events_url": "https://api.github.com/users/simonvandel/received_events", "type": "User", "site_admin": false}, "committer": {"login": "simonvandel", "id": 2770647, "node_id": "MDQ6VXNlcjI3NzA2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/2770647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonvandel", "html_url": "https://github.com/simonvandel", "followers_url": "https://api.github.com/users/simonvandel/followers", "following_url": "https://api.github.com/users/simonvandel/following{/other_user}", "gists_url": "https://api.github.com/users/simonvandel/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonvandel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonvandel/subscriptions", "organizations_url": "https://api.github.com/users/simonvandel/orgs", "repos_url": "https://api.github.com/users/simonvandel/repos", "events_url": "https://api.github.com/users/simonvandel/events{/privacy}", "received_events_url": "https://api.github.com/users/simonvandel/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "04834139c43761efd2b14e37e819774033241ba2", "url": "https://api.github.com/repos/rust-lang/rust/commits/04834139c43761efd2b14e37e819774033241ba2", "html_url": "https://github.com/rust-lang/rust/commit/04834139c43761efd2b14e37e819774033241ba2"}], "stats": {"total": 614, "additions": 265, "deletions": 349}, "files": [{"sha": "9f9c28723f07bedf5ea8e8e66301f89ece2862c6", "filename": "src/test/mir-opt/early_otherwise_branch.opt1.EarlyOtherwiseBranch.diff", "status": "modified", "additions": 48, "deletions": 60, "changes": 108, "blob_url": "https://github.com/rust-lang/rust/blob/0e06456ecbe244291f1feef7c24b7165f028e0d0/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch.opt1.EarlyOtherwiseBranch.diff", "raw_url": "https://github.com/rust-lang/rust/raw/0e06456ecbe244291f1feef7c24b7165f028e0d0/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch.opt1.EarlyOtherwiseBranch.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch.opt1.EarlyOtherwiseBranch.diff?ref=0e06456ecbe244291f1feef7c24b7165f028e0d0", "patch": "@@ -1,88 +1,76 @@\n - // MIR for `opt1` before EarlyOtherwiseBranch\n + // MIR for `opt1` after EarlyOtherwiseBranch\n   \n-  fn opt1(_1: std::option::Option<usize>, _2: std::option::Option<usize>) -> usize {\n-      debug x => _1;                       // in scope 0 at $DIR/early_otherwise_branch.rs:5:9: 5:10\n-      debug y => _2;                       // in scope 0 at $DIR/early_otherwise_branch.rs:5:27: 5:28\n-      let mut _0: usize;                   // return place in scope 0 at $DIR/early_otherwise_branch.rs:5:47: 5:52\n-      let mut _3: (std::option::Option<usize>, std::option::Option<usize>); // in scope 0 at $DIR/early_otherwise_branch.rs:6:11: 6:16\n-      let mut _4: std::option::Option<usize>; // in scope 0 at $DIR/early_otherwise_branch.rs:6:12: 6:13\n-      let mut _5: std::option::Option<usize>; // in scope 0 at $DIR/early_otherwise_branch.rs:6:14: 6:15\n-      let mut _6: isize;                   // in scope 0 at $DIR/early_otherwise_branch.rs:7:19: 7:26\n-      let mut _7: isize;                   // in scope 0 at $DIR/early_otherwise_branch.rs:7:10: 7:17\n-      let _8: usize;                       // in scope 0 at $DIR/early_otherwise_branch.rs:7:15: 7:16\n-      let _9: usize;                       // in scope 0 at $DIR/early_otherwise_branch.rs:7:24: 7:25\n-+     let mut _10: isize;                  // in scope 0 at $DIR/early_otherwise_branch.rs:7:19: 7:26\n-+     let mut _11: bool;                   // in scope 0 at $DIR/early_otherwise_branch.rs:7:19: 7:26\n+  fn opt1(_1: Option<u32>, _2: Option<u32>) -> u32 {\n+      debug x => _1;                       // in scope 0 at $DIR/early_otherwise_branch.rs:3:9: 3:10\n+      debug y => _2;                       // in scope 0 at $DIR/early_otherwise_branch.rs:3:25: 3:26\n+      let mut _0: u32;                     // return place in scope 0 at $DIR/early_otherwise_branch.rs:3:44: 3:47\n+      let mut _3: (std::option::Option<u32>, std::option::Option<u32>); // in scope 0 at $DIR/early_otherwise_branch.rs:4:11: 4:17\n+      let mut _4: std::option::Option<u32>; // in scope 0 at $DIR/early_otherwise_branch.rs:4:12: 4:13\n+      let mut _5: std::option::Option<u32>; // in scope 0 at $DIR/early_otherwise_branch.rs:4:15: 4:16\n+      let mut _6: isize;                   // in scope 0 at $DIR/early_otherwise_branch.rs:5:19: 5:26\n+      let mut _7: isize;                   // in scope 0 at $DIR/early_otherwise_branch.rs:5:10: 5:17\n+      let _8: u32;                         // in scope 0 at $DIR/early_otherwise_branch.rs:5:15: 5:16\n+      let _9: u32;                         // in scope 0 at $DIR/early_otherwise_branch.rs:5:24: 5:25\n++     let mut _10: isize;                  // in scope 0 at $DIR/early_otherwise_branch.rs:5:19: 5:26\n++     let mut _11: bool;                   // in scope 0 at $DIR/early_otherwise_branch.rs:5:19: 5:26\n       scope 1 {\n-          debug a => _8;                   // in scope 1 at $DIR/early_otherwise_branch.rs:7:15: 7:16\n-          debug b => _9;                   // in scope 1 at $DIR/early_otherwise_branch.rs:7:24: 7:25\n+          debug a => _8;                   // in scope 1 at $DIR/early_otherwise_branch.rs:5:15: 5:16\n+          debug b => _9;                   // in scope 1 at $DIR/early_otherwise_branch.rs:5:24: 5:25\n       }\n   \n       bb0: {\n-          StorageLive(_3);                 // scope 0 at $DIR/early_otherwise_branch.rs:6:11: 6:16\n-          StorageLive(_4);                 // scope 0 at $DIR/early_otherwise_branch.rs:6:12: 6:13\n-          _4 = _1;                         // scope 0 at $DIR/early_otherwise_branch.rs:6:12: 6:13\n-          StorageLive(_5);                 // scope 0 at $DIR/early_otherwise_branch.rs:6:14: 6:15\n-          _5 = _2;                         // scope 0 at $DIR/early_otherwise_branch.rs:6:14: 6:15\n-          (_3.0: std::option::Option<usize>) = move _4; // scope 0 at $DIR/early_otherwise_branch.rs:6:11: 6:16\n-          (_3.1: std::option::Option<usize>) = move _5; // scope 0 at $DIR/early_otherwise_branch.rs:6:11: 6:16\n-          StorageDead(_5);                 // scope 0 at $DIR/early_otherwise_branch.rs:6:15: 6:16\n-          StorageDead(_4);                 // scope 0 at $DIR/early_otherwise_branch.rs:6:15: 6:16\n-          _7 = discriminant((_3.0: std::option::Option<usize>)); // scope 0 at $DIR/early_otherwise_branch.rs:7:10: 7:17\n--         switchInt(move _7) -> [1_isize: bb2, otherwise: bb1]; // scope 0 at $DIR/early_otherwise_branch.rs:7:10: 7:17\n-+         StorageLive(_10);                // scope 0 at $DIR/early_otherwise_branch.rs:7:10: 7:17\n-+         _10 = discriminant((_3.1: std::option::Option<usize>)); // scope 0 at $DIR/early_otherwise_branch.rs:7:10: 7:17\n-+         StorageLive(_11);                // scope 0 at $DIR/early_otherwise_branch.rs:7:10: 7:17\n-+         _11 = Ne(_10, _7);               // scope 0 at $DIR/early_otherwise_branch.rs:7:10: 7:17\n-+         StorageDead(_10);                // scope 0 at $DIR/early_otherwise_branch.rs:7:10: 7:17\n-+         switchInt(move _11) -> [false: bb6, otherwise: bb1]; // scope 0 at $DIR/early_otherwise_branch.rs:7:10: 7:17\n+          StorageLive(_3);                 // scope 0 at $DIR/early_otherwise_branch.rs:4:11: 4:17\n+          StorageLive(_4);                 // scope 0 at $DIR/early_otherwise_branch.rs:4:12: 4:13\n+          _4 = _1;                         // scope 0 at $DIR/early_otherwise_branch.rs:4:12: 4:13\n+          StorageLive(_5);                 // scope 0 at $DIR/early_otherwise_branch.rs:4:15: 4:16\n+          _5 = _2;                         // scope 0 at $DIR/early_otherwise_branch.rs:4:15: 4:16\n+          (_3.0: std::option::Option<u32>) = move _4; // scope 0 at $DIR/early_otherwise_branch.rs:4:11: 4:17\n+          (_3.1: std::option::Option<u32>) = move _5; // scope 0 at $DIR/early_otherwise_branch.rs:4:11: 4:17\n+          StorageDead(_5);                 // scope 0 at $DIR/early_otherwise_branch.rs:4:16: 4:17\n+          StorageDead(_4);                 // scope 0 at $DIR/early_otherwise_branch.rs:4:16: 4:17\n+          _7 = discriminant((_3.0: std::option::Option<u32>)); // scope 0 at $DIR/early_otherwise_branch.rs:5:10: 5:17\n+-         switchInt(move _7) -> [1_isize: bb2, otherwise: bb1]; // scope 0 at $DIR/early_otherwise_branch.rs:5:10: 5:17\n++         StorageLive(_10);                // scope 0 at $DIR/early_otherwise_branch.rs:5:10: 5:17\n++         _10 = discriminant((_3.1: std::option::Option<u32>)); // scope 0 at $DIR/early_otherwise_branch.rs:5:10: 5:17\n++         StorageLive(_11);                // scope 0 at $DIR/early_otherwise_branch.rs:5:10: 5:17\n++         _11 = Ne(_10, _7);               // scope 0 at $DIR/early_otherwise_branch.rs:5:10: 5:17\n++         StorageDead(_10);                // scope 0 at $DIR/early_otherwise_branch.rs:5:10: 5:17\n++         switchInt(move _11) -> [false: bb6, otherwise: bb1]; // scope 0 at $DIR/early_otherwise_branch.rs:5:10: 5:17\n       }\n   \n       bb1: {\n-          _0 = const 1_usize;              // scope 0 at $DIR/early_otherwise_branch.rs:8:14: 8:15\n-                                           // ty::Const\n-                                           // + ty: usize\n-                                           // + val: Value(Scalar(0x0000000000000001))\n-                                           // mir::Constant\n-                                           // + span: $DIR/early_otherwise_branch.rs:8:14: 8:15\n-                                           // + literal: Const { ty: usize, val: Value(Scalar(0x0000000000000001)) }\n-          goto -> bb4;                     // scope 0 at $DIR/early_otherwise_branch.rs:6:5: 9:6\n+          _0 = const 1_u32;                // scope 0 at $DIR/early_otherwise_branch.rs:6:14: 6:15\n+          goto -> bb4;                     // scope 0 at $DIR/early_otherwise_branch.rs:4:5: 7:6\n       }\n   \n       bb2: {\n-          _6 = discriminant((_3.1: std::option::Option<usize>)); // scope 0 at $DIR/early_otherwise_branch.rs:7:19: 7:26\n-          switchInt(move _6) -> [1_isize: bb3, otherwise: bb1]; // scope 0 at $DIR/early_otherwise_branch.rs:7:19: 7:26\n+          _6 = discriminant((_3.1: std::option::Option<u32>)); // scope 0 at $DIR/early_otherwise_branch.rs:5:19: 5:26\n+          switchInt(move _6) -> [1_isize: bb3, otherwise: bb1]; // scope 0 at $DIR/early_otherwise_branch.rs:5:19: 5:26\n       }\n   \n       bb3: {\n-          StorageLive(_8);                 // scope 0 at $DIR/early_otherwise_branch.rs:7:15: 7:16\n-          _8 = (((_3.0: std::option::Option<usize>) as Some).0: usize); // scope 0 at $DIR/early_otherwise_branch.rs:7:15: 7:16\n-          StorageLive(_9);                 // scope 0 at $DIR/early_otherwise_branch.rs:7:24: 7:25\n-          _9 = (((_3.1: std::option::Option<usize>) as Some).0: usize); // scope 0 at $DIR/early_otherwise_branch.rs:7:24: 7:25\n-          _0 = const 0_usize;              // scope 1 at $DIR/early_otherwise_branch.rs:7:31: 7:32\n-                                           // ty::Const\n-                                           // + ty: usize\n-                                           // + val: Value(Scalar(0x0000000000000000))\n-                                           // mir::Constant\n-                                           // + span: $DIR/early_otherwise_branch.rs:7:31: 7:32\n-                                           // + literal: Const { ty: usize, val: Value(Scalar(0x0000000000000000)) }\n-          StorageDead(_9);                 // scope 0 at $DIR/early_otherwise_branch.rs:7:31: 7:32\n-          StorageDead(_8);                 // scope 0 at $DIR/early_otherwise_branch.rs:7:31: 7:32\n-          goto -> bb4;                     // scope 0 at $DIR/early_otherwise_branch.rs:6:5: 9:6\n+          StorageLive(_8);                 // scope 0 at $DIR/early_otherwise_branch.rs:5:15: 5:16\n+          _8 = (((_3.0: std::option::Option<u32>) as Some).0: u32); // scope 0 at $DIR/early_otherwise_branch.rs:5:15: 5:16\n+          StorageLive(_9);                 // scope 0 at $DIR/early_otherwise_branch.rs:5:24: 5:25\n+          _9 = (((_3.1: std::option::Option<u32>) as Some).0: u32); // scope 0 at $DIR/early_otherwise_branch.rs:5:24: 5:25\n+          _0 = const 0_u32;                // scope 1 at $DIR/early_otherwise_branch.rs:5:31: 5:32\n+          StorageDead(_9);                 // scope 0 at $DIR/early_otherwise_branch.rs:5:31: 5:32\n+          StorageDead(_8);                 // scope 0 at $DIR/early_otherwise_branch.rs:5:31: 5:32\n+          goto -> bb4;                     // scope 0 at $DIR/early_otherwise_branch.rs:4:5: 7:6\n       }\n   \n       bb4: {\n-          StorageDead(_3);                 // scope 0 at $DIR/early_otherwise_branch.rs:10:1: 10:2\n-          return;                          // scope 0 at $DIR/early_otherwise_branch.rs:10:2: 10:2\n+          StorageDead(_3);                 // scope 0 at $DIR/early_otherwise_branch.rs:8:1: 8:2\n+          return;                          // scope 0 at $DIR/early_otherwise_branch.rs:8:2: 8:2\n +     }\n + \n +     bb5 (cleanup): {\n-+         resume;                          // scope 0 at $DIR/early_otherwise_branch.rs:5:1: 10:2\n++         resume;                          // scope 0 at $DIR/early_otherwise_branch.rs:3:1: 8:2\n +     }\n + \n +     bb6: {\n-+         switchInt(_7) -> [1_isize: bb3, otherwise: bb1]; // scope 0 at $DIR/early_otherwise_branch.rs:7:19: 7:26\n++         switchInt(_7) -> [1_isize: bb3, otherwise: bb1]; // scope 0 at $DIR/early_otherwise_branch.rs:5:19: 5:26\n       }\n   }\n   "}, {"sha": "569dc6c5db61eab72c13cce6c59405339c2e0fbc", "filename": "src/test/mir-opt/early_otherwise_branch.opt2.EarlyOtherwiseBranch.diff", "status": "modified", "additions": 53, "deletions": 71, "changes": 124, "blob_url": "https://github.com/rust-lang/rust/blob/0e06456ecbe244291f1feef7c24b7165f028e0d0/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch.opt2.EarlyOtherwiseBranch.diff", "raw_url": "https://github.com/rust-lang/rust/raw/0e06456ecbe244291f1feef7c24b7165f028e0d0/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch.opt2.EarlyOtherwiseBranch.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch.opt2.EarlyOtherwiseBranch.diff?ref=0e06456ecbe244291f1feef7c24b7165f028e0d0", "patch": "@@ -1,105 +1,87 @@\n - // MIR for `opt2` before EarlyOtherwiseBranch\n + // MIR for `opt2` after EarlyOtherwiseBranch\n   \n-  fn opt2(_1: std::option::Option<usize>, _2: std::option::Option<usize>) -> usize {\n-      debug x => _1;                       // in scope 0 at $DIR/early_otherwise_branch.rs:13:9: 13:10\n-      debug y => _2;                       // in scope 0 at $DIR/early_otherwise_branch.rs:13:27: 13:28\n-      let mut _0: usize;                   // return place in scope 0 at $DIR/early_otherwise_branch.rs:13:47: 13:52\n-      let mut _3: (std::option::Option<usize>, std::option::Option<usize>); // in scope 0 at $DIR/early_otherwise_branch.rs:14:11: 14:16\n-      let mut _4: std::option::Option<usize>; // in scope 0 at $DIR/early_otherwise_branch.rs:14:12: 14:13\n-      let mut _5: std::option::Option<usize>; // in scope 0 at $DIR/early_otherwise_branch.rs:14:14: 14:15\n-      let mut _6: isize;                   // in scope 0 at $DIR/early_otherwise_branch.rs:16:16: 16:20\n-      let mut _7: isize;                   // in scope 0 at $DIR/early_otherwise_branch.rs:15:19: 15:26\n-      let mut _8: isize;                   // in scope 0 at $DIR/early_otherwise_branch.rs:15:10: 15:17\n-      let _9: usize;                       // in scope 0 at $DIR/early_otherwise_branch.rs:15:15: 15:16\n-      let _10: usize;                      // in scope 0 at $DIR/early_otherwise_branch.rs:15:24: 15:25\n-+     let mut _11: isize;                  // in scope 0 at $DIR/early_otherwise_branch.rs:16:16: 16:20\n-+     let mut _12: bool;                   // in scope 0 at $DIR/early_otherwise_branch.rs:16:16: 16:20\n+  fn opt2(_1: Option<u32>, _2: Option<u32>) -> u32 {\n+      debug x => _1;                       // in scope 0 at $DIR/early_otherwise_branch.rs:11:9: 11:10\n+      debug y => _2;                       // in scope 0 at $DIR/early_otherwise_branch.rs:11:25: 11:26\n+      let mut _0: u32;                     // return place in scope 0 at $DIR/early_otherwise_branch.rs:11:44: 11:47\n+      let mut _3: (std::option::Option<u32>, std::option::Option<u32>); // in scope 0 at $DIR/early_otherwise_branch.rs:12:11: 12:17\n+      let mut _4: std::option::Option<u32>; // in scope 0 at $DIR/early_otherwise_branch.rs:12:12: 12:13\n+      let mut _5: std::option::Option<u32>; // in scope 0 at $DIR/early_otherwise_branch.rs:12:15: 12:16\n+      let mut _6: isize;                   // in scope 0 at $DIR/early_otherwise_branch.rs:14:16: 14:20\n+      let mut _7: isize;                   // in scope 0 at $DIR/early_otherwise_branch.rs:13:19: 13:26\n+      let mut _8: isize;                   // in scope 0 at $DIR/early_otherwise_branch.rs:13:10: 13:17\n+      let _9: u32;                         // in scope 0 at $DIR/early_otherwise_branch.rs:13:15: 13:16\n+      let _10: u32;                        // in scope 0 at $DIR/early_otherwise_branch.rs:13:24: 13:25\n++     let mut _11: isize;                  // in scope 0 at $DIR/early_otherwise_branch.rs:14:16: 14:20\n++     let mut _12: bool;                   // in scope 0 at $DIR/early_otherwise_branch.rs:14:16: 14:20\n       scope 1 {\n-          debug a => _9;                   // in scope 1 at $DIR/early_otherwise_branch.rs:15:15: 15:16\n-          debug b => _10;                  // in scope 1 at $DIR/early_otherwise_branch.rs:15:24: 15:25\n+          debug a => _9;                   // in scope 1 at $DIR/early_otherwise_branch.rs:13:15: 13:16\n+          debug b => _10;                  // in scope 1 at $DIR/early_otherwise_branch.rs:13:24: 13:25\n       }\n   \n       bb0: {\n-          StorageLive(_3);                 // scope 0 at $DIR/early_otherwise_branch.rs:14:11: 14:16\n-          StorageLive(_4);                 // scope 0 at $DIR/early_otherwise_branch.rs:14:12: 14:13\n-          _4 = _1;                         // scope 0 at $DIR/early_otherwise_branch.rs:14:12: 14:13\n-          StorageLive(_5);                 // scope 0 at $DIR/early_otherwise_branch.rs:14:14: 14:15\n-          _5 = _2;                         // scope 0 at $DIR/early_otherwise_branch.rs:14:14: 14:15\n-          (_3.0: std::option::Option<usize>) = move _4; // scope 0 at $DIR/early_otherwise_branch.rs:14:11: 14:16\n-          (_3.1: std::option::Option<usize>) = move _5; // scope 0 at $DIR/early_otherwise_branch.rs:14:11: 14:16\n-          StorageDead(_5);                 // scope 0 at $DIR/early_otherwise_branch.rs:14:15: 14:16\n-          StorageDead(_4);                 // scope 0 at $DIR/early_otherwise_branch.rs:14:15: 14:16\n-          _8 = discriminant((_3.0: std::option::Option<usize>)); // scope 0 at $DIR/early_otherwise_branch.rs:15:10: 15:17\n--         switchInt(move _8) -> [0_isize: bb1, 1_isize: bb3, otherwise: bb2]; // scope 0 at $DIR/early_otherwise_branch.rs:15:10: 15:17\n-+         StorageLive(_11);                // scope 0 at $DIR/early_otherwise_branch.rs:15:10: 15:17\n-+         _11 = discriminant((_3.1: std::option::Option<usize>)); // scope 0 at $DIR/early_otherwise_branch.rs:15:10: 15:17\n-+         StorageLive(_12);                // scope 0 at $DIR/early_otherwise_branch.rs:15:10: 15:17\n-+         _12 = Ne(_11, _8);               // scope 0 at $DIR/early_otherwise_branch.rs:15:10: 15:17\n-+         StorageDead(_11);                // scope 0 at $DIR/early_otherwise_branch.rs:15:10: 15:17\n-+         switchInt(move _12) -> [false: bb8, otherwise: bb2]; // scope 0 at $DIR/early_otherwise_branch.rs:15:10: 15:17\n+          StorageLive(_3);                 // scope 0 at $DIR/early_otherwise_branch.rs:12:11: 12:17\n+          StorageLive(_4);                 // scope 0 at $DIR/early_otherwise_branch.rs:12:12: 12:13\n+          _4 = _1;                         // scope 0 at $DIR/early_otherwise_branch.rs:12:12: 12:13\n+          StorageLive(_5);                 // scope 0 at $DIR/early_otherwise_branch.rs:12:15: 12:16\n+          _5 = _2;                         // scope 0 at $DIR/early_otherwise_branch.rs:12:15: 12:16\n+          (_3.0: std::option::Option<u32>) = move _4; // scope 0 at $DIR/early_otherwise_branch.rs:12:11: 12:17\n+          (_3.1: std::option::Option<u32>) = move _5; // scope 0 at $DIR/early_otherwise_branch.rs:12:11: 12:17\n+          StorageDead(_5);                 // scope 0 at $DIR/early_otherwise_branch.rs:12:16: 12:17\n+          StorageDead(_4);                 // scope 0 at $DIR/early_otherwise_branch.rs:12:16: 12:17\n+          _8 = discriminant((_3.0: std::option::Option<u32>)); // scope 0 at $DIR/early_otherwise_branch.rs:13:10: 13:17\n+-         switchInt(move _8) -> [0_isize: bb1, 1_isize: bb3, otherwise: bb2]; // scope 0 at $DIR/early_otherwise_branch.rs:13:10: 13:17\n++         StorageLive(_11);                // scope 0 at $DIR/early_otherwise_branch.rs:13:10: 13:17\n++         _11 = discriminant((_3.1: std::option::Option<u32>)); // scope 0 at $DIR/early_otherwise_branch.rs:13:10: 13:17\n++         StorageLive(_12);                // scope 0 at $DIR/early_otherwise_branch.rs:13:10: 13:17\n++         _12 = Ne(_11, _8);               // scope 0 at $DIR/early_otherwise_branch.rs:13:10: 13:17\n++         StorageDead(_11);                // scope 0 at $DIR/early_otherwise_branch.rs:13:10: 13:17\n++         switchInt(move _12) -> [false: bb8, otherwise: bb2]; // scope 0 at $DIR/early_otherwise_branch.rs:13:10: 13:17\n       }\n   \n       bb1: {\n-          _6 = discriminant((_3.1: std::option::Option<usize>)); // scope 0 at $DIR/early_otherwise_branch.rs:16:16: 16:20\n-          switchInt(move _6) -> [0_isize: bb5, otherwise: bb2]; // scope 0 at $DIR/early_otherwise_branch.rs:16:16: 16:20\n+          _6 = discriminant((_3.1: std::option::Option<u32>)); // scope 0 at $DIR/early_otherwise_branch.rs:14:16: 14:20\n+          switchInt(move _6) -> [0_isize: bb5, otherwise: bb2]; // scope 0 at $DIR/early_otherwise_branch.rs:14:16: 14:20\n       }\n   \n       bb2: {\n-          _0 = const 1_usize;              // scope 0 at $DIR/early_otherwise_branch.rs:17:14: 17:15\n-                                           // ty::Const\n-                                           // + ty: usize\n-                                           // + val: Value(Scalar(0x0000000000000001))\n-                                           // mir::Constant\n-                                           // + span: $DIR/early_otherwise_branch.rs:17:14: 17:15\n-                                           // + literal: Const { ty: usize, val: Value(Scalar(0x0000000000000001)) }\n-          goto -> bb6;                     // scope 0 at $DIR/early_otherwise_branch.rs:14:5: 18:6\n+          _0 = const 1_u32;                // scope 0 at $DIR/early_otherwise_branch.rs:15:14: 15:15\n+          goto -> bb6;                     // scope 0 at $DIR/early_otherwise_branch.rs:12:5: 16:6\n       }\n   \n       bb3: {\n-          _7 = discriminant((_3.1: std::option::Option<usize>)); // scope 0 at $DIR/early_otherwise_branch.rs:15:19: 15:26\n-          switchInt(move _7) -> [1_isize: bb4, otherwise: bb2]; // scope 0 at $DIR/early_otherwise_branch.rs:15:19: 15:26\n+          _7 = discriminant((_3.1: std::option::Option<u32>)); // scope 0 at $DIR/early_otherwise_branch.rs:13:19: 13:26\n+          switchInt(move _7) -> [1_isize: bb4, otherwise: bb2]; // scope 0 at $DIR/early_otherwise_branch.rs:13:19: 13:26\n       }\n   \n       bb4: {\n-          StorageLive(_9);                 // scope 0 at $DIR/early_otherwise_branch.rs:15:15: 15:16\n-          _9 = (((_3.0: std::option::Option<usize>) as Some).0: usize); // scope 0 at $DIR/early_otherwise_branch.rs:15:15: 15:16\n-          StorageLive(_10);                // scope 0 at $DIR/early_otherwise_branch.rs:15:24: 15:25\n-          _10 = (((_3.1: std::option::Option<usize>) as Some).0: usize); // scope 0 at $DIR/early_otherwise_branch.rs:15:24: 15:25\n-          _0 = const 0_usize;              // scope 1 at $DIR/early_otherwise_branch.rs:15:31: 15:32\n-                                           // ty::Const\n-                                           // + ty: usize\n-                                           // + val: Value(Scalar(0x0000000000000000))\n-                                           // mir::Constant\n-                                           // + span: $DIR/early_otherwise_branch.rs:15:31: 15:32\n-                                           // + literal: Const { ty: usize, val: Value(Scalar(0x0000000000000000)) }\n-          StorageDead(_10);                // scope 0 at $DIR/early_otherwise_branch.rs:15:31: 15:32\n-          StorageDead(_9);                 // scope 0 at $DIR/early_otherwise_branch.rs:15:31: 15:32\n-          goto -> bb6;                     // scope 0 at $DIR/early_otherwise_branch.rs:14:5: 18:6\n+          StorageLive(_9);                 // scope 0 at $DIR/early_otherwise_branch.rs:13:15: 13:16\n+          _9 = (((_3.0: std::option::Option<u32>) as Some).0: u32); // scope 0 at $DIR/early_otherwise_branch.rs:13:15: 13:16\n+          StorageLive(_10);                // scope 0 at $DIR/early_otherwise_branch.rs:13:24: 13:25\n+          _10 = (((_3.1: std::option::Option<u32>) as Some).0: u32); // scope 0 at $DIR/early_otherwise_branch.rs:13:24: 13:25\n+          _0 = const 0_u32;                // scope 1 at $DIR/early_otherwise_branch.rs:13:31: 13:32\n+          StorageDead(_10);                // scope 0 at $DIR/early_otherwise_branch.rs:13:31: 13:32\n+          StorageDead(_9);                 // scope 0 at $DIR/early_otherwise_branch.rs:13:31: 13:32\n+          goto -> bb6;                     // scope 0 at $DIR/early_otherwise_branch.rs:12:5: 16:6\n       }\n   \n       bb5: {\n-          _0 = const 0_usize;              // scope 0 at $DIR/early_otherwise_branch.rs:16:25: 16:26\n-                                           // ty::Const\n-                                           // + ty: usize\n-                                           // + val: Value(Scalar(0x0000000000000000))\n-                                           // mir::Constant\n-                                           // + span: $DIR/early_otherwise_branch.rs:16:25: 16:26\n-                                           // + literal: Const { ty: usize, val: Value(Scalar(0x0000000000000000)) }\n-          goto -> bb6;                     // scope 0 at $DIR/early_otherwise_branch.rs:14:5: 18:6\n+          _0 = const 0_u32;                // scope 0 at $DIR/early_otherwise_branch.rs:14:25: 14:26\n+          goto -> bb6;                     // scope 0 at $DIR/early_otherwise_branch.rs:12:5: 16:6\n       }\n   \n       bb6: {\n-          StorageDead(_3);                 // scope 0 at $DIR/early_otherwise_branch.rs:19:1: 19:2\n-          return;                          // scope 0 at $DIR/early_otherwise_branch.rs:19:2: 19:2\n+          StorageDead(_3);                 // scope 0 at $DIR/early_otherwise_branch.rs:17:1: 17:2\n+          return;                          // scope 0 at $DIR/early_otherwise_branch.rs:17:2: 17:2\n +     }\n + \n +     bb7 (cleanup): {\n-+         resume;                          // scope 0 at $DIR/early_otherwise_branch.rs:13:1: 19:2\n++         resume;                          // scope 0 at $DIR/early_otherwise_branch.rs:11:1: 17:2\n +     }\n + \n +     bb8: {\n-+         switchInt(_8) -> [0_isize: bb5, 1_isize: bb4, otherwise: bb2]; // scope 0 at $DIR/early_otherwise_branch.rs:16:16: 16:20\n++         switchInt(_8) -> [0_isize: bb5, 1_isize: bb4, otherwise: bb2]; // scope 0 at $DIR/early_otherwise_branch.rs:14:16: 14:20\n       }\n   }\n   "}, {"sha": "9d45aa69f63362ff836cf5d9f6f18f624f131172", "filename": "src/test/mir-opt/early_otherwise_branch_3_element_tuple.opt1.EarlyOtherwiseBranch.diff", "status": "modified", "additions": 71, "deletions": 83, "changes": 154, "blob_url": "https://github.com/rust-lang/rust/blob/0e06456ecbe244291f1feef7c24b7165f028e0d0/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch_3_element_tuple.opt1.EarlyOtherwiseBranch.diff", "raw_url": "https://github.com/rust-lang/rust/raw/0e06456ecbe244291f1feef7c24b7165f028e0d0/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch_3_element_tuple.opt1.EarlyOtherwiseBranch.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch_3_element_tuple.opt1.EarlyOtherwiseBranch.diff?ref=0e06456ecbe244291f1feef7c24b7165f028e0d0", "patch": "@@ -1,117 +1,105 @@\n - // MIR for `opt1` before EarlyOtherwiseBranch\n + // MIR for `opt1` after EarlyOtherwiseBranch\n   \n-  fn opt1(_1: std::option::Option<usize>, _2: std::option::Option<usize>, _3: std::option::Option<usize>) -> usize {\n-      debug x => _1;                       // in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:5:9: 5:10\n-      debug y => _2;                       // in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:5:27: 5:28\n-      debug z => _3;                       // in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:5:44: 5:45\n-      let mut _0: usize;                   // return place in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:5:64: 5:69\n-      let mut _4: (std::option::Option<usize>, std::option::Option<usize>, std::option::Option<usize>); // in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:11: 6:18\n-      let mut _5: std::option::Option<usize>; // in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:12: 6:13\n-      let mut _6: std::option::Option<usize>; // in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:14: 6:15\n-      let mut _7: std::option::Option<usize>; // in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:16: 6:17\n-      let mut _8: isize;                   // in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:28: 7:35\n-      let mut _9: isize;                   // in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:19: 7:26\n-      let mut _10: isize;                  // in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:10: 7:17\n-      let _11: usize;                      // in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:15: 7:16\n-      let _12: usize;                      // in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:24: 7:25\n-      let _13: usize;                      // in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:33: 7:34\n-+     let mut _14: isize;                  // in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:19: 7:26\n-+     let mut _15: bool;                   // in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:19: 7:26\n-+     let mut _16: isize;                  // in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:28: 7:35\n-+     let mut _17: bool;                   // in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:28: 7:35\n+  fn opt1(_1: Option<u32>, _2: Option<u32>, _3: Option<u32>) -> u32 {\n+      debug x => _1;                       // in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:4:9: 4:10\n+      debug y => _2;                       // in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:4:25: 4:26\n+      debug z => _3;                       // in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:4:41: 4:42\n+      let mut _0: u32;                     // return place in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:4:60: 4:63\n+      let mut _4: (std::option::Option<u32>, std::option::Option<u32>, std::option::Option<u32>); // in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:5:11: 5:20\n+      let mut _5: std::option::Option<u32>; // in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:5:12: 5:13\n+      let mut _6: std::option::Option<u32>; // in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:5:15: 5:16\n+      let mut _7: std::option::Option<u32>; // in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:5:18: 5:19\n+      let mut _8: isize;                   // in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:28: 6:35\n+      let mut _9: isize;                   // in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:19: 6:26\n+      let mut _10: isize;                  // in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:10: 6:17\n+      let _11: u32;                        // in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:15: 6:16\n+      let _12: u32;                        // in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:24: 6:25\n+      let _13: u32;                        // in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:33: 6:34\n++     let mut _14: isize;                  // in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:19: 6:26\n++     let mut _15: bool;                   // in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:19: 6:26\n++     let mut _16: isize;                  // in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:28: 6:35\n++     let mut _17: bool;                   // in scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:28: 6:35\n       scope 1 {\n-          debug a => _11;                  // in scope 1 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:15: 7:16\n-          debug b => _12;                  // in scope 1 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:24: 7:25\n-          debug c => _13;                  // in scope 1 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:33: 7:34\n+          debug a => _11;                  // in scope 1 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:15: 6:16\n+          debug b => _12;                  // in scope 1 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:24: 6:25\n+          debug c => _13;                  // in scope 1 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:33: 6:34\n       }\n   \n       bb0: {\n-          StorageLive(_4);                 // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:11: 6:18\n-          StorageLive(_5);                 // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:12: 6:13\n-          _5 = _1;                         // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:12: 6:13\n-          StorageLive(_6);                 // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:14: 6:15\n-          _6 = _2;                         // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:14: 6:15\n-          StorageLive(_7);                 // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:16: 6:17\n-          _7 = _3;                         // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:16: 6:17\n-          (_4.0: std::option::Option<usize>) = move _5; // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:11: 6:18\n-          (_4.1: std::option::Option<usize>) = move _6; // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:11: 6:18\n-          (_4.2: std::option::Option<usize>) = move _7; // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:11: 6:18\n-          StorageDead(_7);                 // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:17: 6:18\n-          StorageDead(_6);                 // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:17: 6:18\n-          StorageDead(_5);                 // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:17: 6:18\n-          _10 = discriminant((_4.0: std::option::Option<usize>)); // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:10: 7:17\n--         switchInt(move _10) -> [1_isize: bb2, otherwise: bb1]; // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:10: 7:17\n-+         StorageLive(_14);                // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:10: 7:17\n-+         _14 = discriminant((_4.1: std::option::Option<usize>)); // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:10: 7:17\n-+         StorageLive(_15);                // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:10: 7:17\n-+         _15 = Ne(_14, _10);              // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:10: 7:17\n-+         StorageDead(_14);                // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:10: 7:17\n-+         switchInt(move _15) -> [false: bb7, otherwise: bb1]; // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:10: 7:17\n+          StorageLive(_4);                 // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:5:11: 5:20\n+          StorageLive(_5);                 // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:5:12: 5:13\n+          _5 = _1;                         // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:5:12: 5:13\n+          StorageLive(_6);                 // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:5:15: 5:16\n+          _6 = _2;                         // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:5:15: 5:16\n+          StorageLive(_7);                 // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:5:18: 5:19\n+          _7 = _3;                         // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:5:18: 5:19\n+          (_4.0: std::option::Option<u32>) = move _5; // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:5:11: 5:20\n+          (_4.1: std::option::Option<u32>) = move _6; // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:5:11: 5:20\n+          (_4.2: std::option::Option<u32>) = move _7; // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:5:11: 5:20\n+          StorageDead(_7);                 // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:5:19: 5:20\n+          StorageDead(_6);                 // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:5:19: 5:20\n+          StorageDead(_5);                 // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:5:19: 5:20\n+          _10 = discriminant((_4.0: std::option::Option<u32>)); // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:10: 6:17\n+-         switchInt(move _10) -> [1_isize: bb2, otherwise: bb1]; // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:10: 6:17\n++         StorageLive(_14);                // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:10: 6:17\n++         _14 = discriminant((_4.1: std::option::Option<u32>)); // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:10: 6:17\n++         StorageLive(_15);                // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:10: 6:17\n++         _15 = Ne(_14, _10);              // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:10: 6:17\n++         StorageDead(_14);                // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:10: 6:17\n++         switchInt(move _15) -> [false: bb7, otherwise: bb1]; // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:10: 6:17\n       }\n   \n       bb1: {\n-          _0 = const 1_usize;              // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:8:14: 8:15\n-                                           // ty::Const\n-                                           // + ty: usize\n-                                           // + val: Value(Scalar(0x0000000000000001))\n-                                           // mir::Constant\n-                                           // + span: $DIR/early_otherwise_branch_3_element_tuple.rs:8:14: 8:15\n-                                           // + literal: Const { ty: usize, val: Value(Scalar(0x0000000000000001)) }\n-          goto -> bb5;                     // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:5: 9:6\n+          _0 = const 1_u32;                // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:14: 7:15\n+          goto -> bb5;                     // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:5:5: 8:6\n       }\n   \n       bb2: {\n-          _9 = discriminant((_4.1: std::option::Option<usize>)); // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:19: 7:26\n--         switchInt(move _9) -> [1_isize: bb3, otherwise: bb1]; // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:19: 7:26\n-+         StorageLive(_16);                // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:19: 7:26\n-+         _16 = discriminant((_4.2: std::option::Option<usize>)); // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:19: 7:26\n-+         StorageLive(_17);                // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:19: 7:26\n-+         _17 = Ne(_16, _9);               // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:19: 7:26\n-+         StorageDead(_16);                // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:19: 7:26\n-+         switchInt(move _17) -> [false: bb8, otherwise: bb1]; // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:19: 7:26\n+          _9 = discriminant((_4.1: std::option::Option<u32>)); // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:19: 6:26\n+-         switchInt(move _9) -> [1_isize: bb3, otherwise: bb1]; // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:19: 6:26\n++         StorageLive(_16);                // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:19: 6:26\n++         _16 = discriminant((_4.2: std::option::Option<u32>)); // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:19: 6:26\n++         StorageLive(_17);                // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:19: 6:26\n++         _17 = Ne(_16, _9);               // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:19: 6:26\n++         StorageDead(_16);                // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:19: 6:26\n++         switchInt(move _17) -> [false: bb8, otherwise: bb1]; // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:19: 6:26\n       }\n   \n       bb3: {\n-          _8 = discriminant((_4.2: std::option::Option<usize>)); // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:28: 7:35\n-          switchInt(move _8) -> [1_isize: bb4, otherwise: bb1]; // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:28: 7:35\n+          _8 = discriminant((_4.2: std::option::Option<u32>)); // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:28: 6:35\n+          switchInt(move _8) -> [1_isize: bb4, otherwise: bb1]; // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:28: 6:35\n       }\n   \n       bb4: {\n-          StorageLive(_11);                // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:15: 7:16\n-          _11 = (((_4.0: std::option::Option<usize>) as Some).0: usize); // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:15: 7:16\n-          StorageLive(_12);                // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:24: 7:25\n-          _12 = (((_4.1: std::option::Option<usize>) as Some).0: usize); // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:24: 7:25\n-          StorageLive(_13);                // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:33: 7:34\n-          _13 = (((_4.2: std::option::Option<usize>) as Some).0: usize); // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:33: 7:34\n-          _0 = const 0_usize;              // scope 1 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:40: 7:41\n-                                           // ty::Const\n-                                           // + ty: usize\n-                                           // + val: Value(Scalar(0x0000000000000000))\n-                                           // mir::Constant\n-                                           // + span: $DIR/early_otherwise_branch_3_element_tuple.rs:7:40: 7:41\n-                                           // + literal: Const { ty: usize, val: Value(Scalar(0x0000000000000000)) }\n-          StorageDead(_13);                // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:40: 7:41\n-          StorageDead(_12);                // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:40: 7:41\n-          StorageDead(_11);                // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:40: 7:41\n-          goto -> bb5;                     // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:5: 9:6\n+          StorageLive(_11);                // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:15: 6:16\n+          _11 = (((_4.0: std::option::Option<u32>) as Some).0: u32); // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:15: 6:16\n+          StorageLive(_12);                // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:24: 6:25\n+          _12 = (((_4.1: std::option::Option<u32>) as Some).0: u32); // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:24: 6:25\n+          StorageLive(_13);                // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:33: 6:34\n+          _13 = (((_4.2: std::option::Option<u32>) as Some).0: u32); // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:33: 6:34\n+          _0 = const 0_u32;                // scope 1 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:40: 6:41\n+          StorageDead(_13);                // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:40: 6:41\n+          StorageDead(_12);                // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:40: 6:41\n+          StorageDead(_11);                // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:40: 6:41\n+          goto -> bb5;                     // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:5:5: 8:6\n       }\n   \n       bb5: {\n-          StorageDead(_4);                 // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:10:1: 10:2\n-          return;                          // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:10:2: 10:2\n+          StorageDead(_4);                 // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:9:1: 9:2\n+          return;                          // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:9:2: 9:2\n +     }\n + \n +     bb6 (cleanup): {\n-+         resume;                          // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:5:1: 10:2\n++         resume;                          // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:4:1: 9:2\n +     }\n + \n +     bb7: {\n-+         switchInt(_10) -> [1_isize: bb3, otherwise: bb1]; // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:19: 7:26\n++         switchInt(_10) -> [1_isize: bb3, otherwise: bb1]; // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:19: 6:26\n +     }\n + \n +     bb8: {\n-+         switchInt(_9) -> [1_isize: bb4, otherwise: bb1]; // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:7:28: 7:35\n++         switchInt(_9) -> [1_isize: bb4, otherwise: bb1]; // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:6:28: 6:35\n       }\n   }\n   "}, {"sha": "f08920ef06de3a08b08332322f84f44700e9b8c3", "filename": "src/test/mir-opt/early_otherwise_branch_68867.try_sum.EarlyOtherwiseBranch.diff", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/0e06456ecbe244291f1feef7c24b7165f028e0d0/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch_68867.try_sum.EarlyOtherwiseBranch.diff", "raw_url": "https://github.com/rust-lang/rust/raw/0e06456ecbe244291f1feef7c24b7165f028e0d0/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch_68867.try_sum.EarlyOtherwiseBranch.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch_68867.try_sum.EarlyOtherwiseBranch.diff?ref=0e06456ecbe244291f1feef7c24b7165f028e0d0", "patch": "@@ -84,12 +84,6 @@\n       bb2: {\n           StorageLive(_33);                // scope 0 at $DIR/early_otherwise_branch_68867.rs:24:25: 24:27\n           ((_0 as Err).0: ()) = const ();  // scope 0 at $DIR/early_otherwise_branch_68867.rs:24:21: 24:28\n-                                           // ty::Const\n-                                           // + ty: ()\n-                                           // + val: Value(Scalar(<ZST>))\n-                                           // mir::Constant\n-                                           // + span: $DIR/early_otherwise_branch_68867.rs:24:21: 24:28\n-                                           // + literal: Const { ty: (), val: Value(Scalar(<ZST>)) }\n           discriminant(_0) = 1;            // scope 0 at $DIR/early_otherwise_branch_68867.rs:24:21: 24:28\n           StorageDead(_33);                // scope 0 at $DIR/early_otherwise_branch_68867.rs:24:27: 24:28\n           StorageDead(_3);                 // scope 0 at $DIR/early_otherwise_branch_68867.rs:25:6: 25:7"}, {"sha": "9a6094f12dfb164dd4fb6022cae9c417bd744c67", "filename": "src/test/mir-opt/early_otherwise_branch_noopt.noopt1.EarlyOtherwiseBranch.diff", "status": "modified", "additions": 55, "deletions": 79, "changes": 134, "blob_url": "https://github.com/rust-lang/rust/blob/0e06456ecbe244291f1feef7c24b7165f028e0d0/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch_noopt.noopt1.EarlyOtherwiseBranch.diff", "raw_url": "https://github.com/rust-lang/rust/raw/0e06456ecbe244291f1feef7c24b7165f028e0d0/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch_noopt.noopt1.EarlyOtherwiseBranch.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch_noopt.noopt1.EarlyOtherwiseBranch.diff?ref=0e06456ecbe244291f1feef7c24b7165f028e0d0", "patch": "@@ -1,114 +1,90 @@\n - // MIR for `noopt1` before EarlyOtherwiseBranch\n + // MIR for `noopt1` after EarlyOtherwiseBranch\n   \n-  fn noopt1(_1: std::option::Option<usize>, _2: std::option::Option<usize>) -> usize {\n-      debug x => _1;                       // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:8:11: 8:12\n-      debug y => _2;                       // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:8:29: 8:30\n-      let mut _0: usize;                   // return place in scope 0 at $DIR/early_otherwise_branch_noopt.rs:8:49: 8:54\n-      let mut _3: (std::option::Option<usize>, std::option::Option<usize>); // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:9:11: 9:16\n-      let mut _4: std::option::Option<usize>; // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:9:12: 9:13\n-      let mut _5: std::option::Option<usize>; // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:9:14: 9:15\n-      let mut _6: isize;                   // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:12:16: 12:23\n-      let mut _7: isize;                   // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:10:19: 10:26\n-      let mut _8: isize;                   // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:10:10: 10:17\n-      let _9: usize;                       // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:10:15: 10:16\n-      let _10: usize;                      // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:10:24: 10:25\n-      let _11: usize;                      // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:11:15: 11:16\n-      let _12: usize;                      // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:12:21: 12:22\n+  fn noopt1(_1: Option<u32>, _2: Option<u32>) -> u32 {\n+      debug x => _1;                       // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:7:11: 7:12\n+      debug y => _2;                       // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:7:27: 7:28\n+      let mut _0: u32;                     // return place in scope 0 at $DIR/early_otherwise_branch_noopt.rs:7:46: 7:49\n+      let mut _3: (std::option::Option<u32>, std::option::Option<u32>); // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:8:11: 8:17\n+      let mut _4: std::option::Option<u32>; // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:8:12: 8:13\n+      let mut _5: std::option::Option<u32>; // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:8:15: 8:16\n+      let mut _6: isize;                   // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:11:16: 11:23\n+      let mut _7: isize;                   // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:9:19: 9:26\n+      let mut _8: isize;                   // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:9:10: 9:17\n+      let _9: u32;                         // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:9:15: 9:16\n+      let _10: u32;                        // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:9:24: 9:25\n+      let _11: u32;                        // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:10:15: 10:16\n+      let _12: u32;                        // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:11:21: 11:22\n       scope 1 {\n-          debug a => _9;                   // in scope 1 at $DIR/early_otherwise_branch_noopt.rs:10:15: 10:16\n-          debug b => _10;                  // in scope 1 at $DIR/early_otherwise_branch_noopt.rs:10:24: 10:25\n+          debug a => _9;                   // in scope 1 at $DIR/early_otherwise_branch_noopt.rs:9:15: 9:16\n+          debug b => _10;                  // in scope 1 at $DIR/early_otherwise_branch_noopt.rs:9:24: 9:25\n       }\n       scope 2 {\n-          debug a => _11;                  // in scope 2 at $DIR/early_otherwise_branch_noopt.rs:11:15: 11:16\n+          debug a => _11;                  // in scope 2 at $DIR/early_otherwise_branch_noopt.rs:10:15: 10:16\n       }\n       scope 3 {\n-          debug b => _12;                  // in scope 3 at $DIR/early_otherwise_branch_noopt.rs:12:21: 12:22\n+          debug b => _12;                  // in scope 3 at $DIR/early_otherwise_branch_noopt.rs:11:21: 11:22\n       }\n   \n       bb0: {\n-          StorageLive(_3);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:9:11: 9:16\n-          StorageLive(_4);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:9:12: 9:13\n-          _4 = _1;                         // scope 0 at $DIR/early_otherwise_branch_noopt.rs:9:12: 9:13\n-          StorageLive(_5);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:9:14: 9:15\n-          _5 = _2;                         // scope 0 at $DIR/early_otherwise_branch_noopt.rs:9:14: 9:15\n-          (_3.0: std::option::Option<usize>) = move _4; // scope 0 at $DIR/early_otherwise_branch_noopt.rs:9:11: 9:16\n-          (_3.1: std::option::Option<usize>) = move _5; // scope 0 at $DIR/early_otherwise_branch_noopt.rs:9:11: 9:16\n-          StorageDead(_5);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:9:15: 9:16\n-          StorageDead(_4);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:9:15: 9:16\n-          _8 = discriminant((_3.0: std::option::Option<usize>)); // scope 0 at $DIR/early_otherwise_branch_noopt.rs:10:10: 10:17\n-          switchInt(move _8) -> [0_isize: bb1, otherwise: bb3]; // scope 0 at $DIR/early_otherwise_branch_noopt.rs:10:10: 10:17\n+          StorageLive(_3);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:8:11: 8:17\n+          StorageLive(_4);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:8:12: 8:13\n+          _4 = _1;                         // scope 0 at $DIR/early_otherwise_branch_noopt.rs:8:12: 8:13\n+          StorageLive(_5);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:8:15: 8:16\n+          _5 = _2;                         // scope 0 at $DIR/early_otherwise_branch_noopt.rs:8:15: 8:16\n+          (_3.0: std::option::Option<u32>) = move _4; // scope 0 at $DIR/early_otherwise_branch_noopt.rs:8:11: 8:17\n+          (_3.1: std::option::Option<u32>) = move _5; // scope 0 at $DIR/early_otherwise_branch_noopt.rs:8:11: 8:17\n+          StorageDead(_5);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:8:16: 8:17\n+          StorageDead(_4);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:8:16: 8:17\n+          _8 = discriminant((_3.0: std::option::Option<u32>)); // scope 0 at $DIR/early_otherwise_branch_noopt.rs:9:10: 9:17\n+          switchInt(move _8) -> [0_isize: bb1, otherwise: bb3]; // scope 0 at $DIR/early_otherwise_branch_noopt.rs:9:10: 9:17\n       }\n   \n       bb1: {\n-          _6 = discriminant((_3.1: std::option::Option<usize>)); // scope 0 at $DIR/early_otherwise_branch_noopt.rs:12:16: 12:23\n-          switchInt(move _6) -> [0_isize: bb2, otherwise: bb6]; // scope 0 at $DIR/early_otherwise_branch_noopt.rs:12:16: 12:23\n+          _6 = discriminant((_3.1: std::option::Option<u32>)); // scope 0 at $DIR/early_otherwise_branch_noopt.rs:11:16: 11:23\n+          switchInt(move _6) -> [0_isize: bb2, otherwise: bb6]; // scope 0 at $DIR/early_otherwise_branch_noopt.rs:11:16: 11:23\n       }\n   \n       bb2: {\n-          _0 = const 3_usize;              // scope 0 at $DIR/early_otherwise_branch_noopt.rs:13:25: 13:26\n-                                           // ty::Const\n-                                           // + ty: usize\n-                                           // + val: Value(Scalar(0x0000000000000003))\n-                                           // mir::Constant\n-                                           // + span: $DIR/early_otherwise_branch_noopt.rs:13:25: 13:26\n-                                           // + literal: Const { ty: usize, val: Value(Scalar(0x0000000000000003)) }\n-          goto -> bb7;                     // scope 0 at $DIR/early_otherwise_branch_noopt.rs:9:5: 14:6\n+          _0 = const 3_u32;                // scope 0 at $DIR/early_otherwise_branch_noopt.rs:12:25: 12:26\n+          goto -> bb7;                     // scope 0 at $DIR/early_otherwise_branch_noopt.rs:8:5: 13:6\n       }\n   \n       bb3: {\n-          _7 = discriminant((_3.1: std::option::Option<usize>)); // scope 0 at $DIR/early_otherwise_branch_noopt.rs:10:19: 10:26\n-          switchInt(move _7) -> [0_isize: bb5, otherwise: bb4]; // scope 0 at $DIR/early_otherwise_branch_noopt.rs:10:19: 10:26\n+          _7 = discriminant((_3.1: std::option::Option<u32>)); // scope 0 at $DIR/early_otherwise_branch_noopt.rs:9:19: 9:26\n+          switchInt(move _7) -> [0_isize: bb5, otherwise: bb4]; // scope 0 at $DIR/early_otherwise_branch_noopt.rs:9:19: 9:26\n       }\n   \n       bb4: {\n-          StorageLive(_9);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:10:15: 10:16\n-          _9 = (((_3.0: std::option::Option<usize>) as Some).0: usize); // scope 0 at $DIR/early_otherwise_branch_noopt.rs:10:15: 10:16\n-          StorageLive(_10);                // scope 0 at $DIR/early_otherwise_branch_noopt.rs:10:24: 10:25\n-          _10 = (((_3.1: std::option::Option<usize>) as Some).0: usize); // scope 0 at $DIR/early_otherwise_branch_noopt.rs:10:24: 10:25\n-          _0 = const 0_usize;              // scope 1 at $DIR/early_otherwise_branch_noopt.rs:10:31: 10:32\n-                                           // ty::Const\n-                                           // + ty: usize\n-                                           // + val: Value(Scalar(0x0000000000000000))\n-                                           // mir::Constant\n-                                           // + span: $DIR/early_otherwise_branch_noopt.rs:10:31: 10:32\n-                                           // + literal: Const { ty: usize, val: Value(Scalar(0x0000000000000000)) }\n-          StorageDead(_10);                // scope 0 at $DIR/early_otherwise_branch_noopt.rs:10:31: 10:32\n-          StorageDead(_9);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:10:31: 10:32\n-          goto -> bb7;                     // scope 0 at $DIR/early_otherwise_branch_noopt.rs:9:5: 14:6\n+          StorageLive(_9);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:9:15: 9:16\n+          _9 = (((_3.0: std::option::Option<u32>) as Some).0: u32); // scope 0 at $DIR/early_otherwise_branch_noopt.rs:9:15: 9:16\n+          StorageLive(_10);                // scope 0 at $DIR/early_otherwise_branch_noopt.rs:9:24: 9:25\n+          _10 = (((_3.1: std::option::Option<u32>) as Some).0: u32); // scope 0 at $DIR/early_otherwise_branch_noopt.rs:9:24: 9:25\n+          _0 = const 0_u32;                // scope 1 at $DIR/early_otherwise_branch_noopt.rs:9:31: 9:32\n+          StorageDead(_10);                // scope 0 at $DIR/early_otherwise_branch_noopt.rs:9:31: 9:32\n+          StorageDead(_9);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:9:31: 9:32\n+          goto -> bb7;                     // scope 0 at $DIR/early_otherwise_branch_noopt.rs:8:5: 13:6\n       }\n   \n       bb5: {\n-          StorageLive(_11);                // scope 0 at $DIR/early_otherwise_branch_noopt.rs:11:15: 11:16\n-          _11 = (((_3.0: std::option::Option<usize>) as Some).0: usize); // scope 0 at $DIR/early_otherwise_branch_noopt.rs:11:15: 11:16\n-          _0 = const 1_usize;              // scope 2 at $DIR/early_otherwise_branch_noopt.rs:11:28: 11:29\n-                                           // ty::Const\n-                                           // + ty: usize\n-                                           // + val: Value(Scalar(0x0000000000000001))\n-                                           // mir::Constant\n-                                           // + span: $DIR/early_otherwise_branch_noopt.rs:11:28: 11:29\n-                                           // + literal: Const { ty: usize, val: Value(Scalar(0x0000000000000001)) }\n-          StorageDead(_11);                // scope 0 at $DIR/early_otherwise_branch_noopt.rs:11:28: 11:29\n-          goto -> bb7;                     // scope 0 at $DIR/early_otherwise_branch_noopt.rs:9:5: 14:6\n+          StorageLive(_11);                // scope 0 at $DIR/early_otherwise_branch_noopt.rs:10:15: 10:16\n+          _11 = (((_3.0: std::option::Option<u32>) as Some).0: u32); // scope 0 at $DIR/early_otherwise_branch_noopt.rs:10:15: 10:16\n+          _0 = const 1_u32;                // scope 2 at $DIR/early_otherwise_branch_noopt.rs:10:28: 10:29\n+          StorageDead(_11);                // scope 0 at $DIR/early_otherwise_branch_noopt.rs:10:28: 10:29\n+          goto -> bb7;                     // scope 0 at $DIR/early_otherwise_branch_noopt.rs:8:5: 13:6\n       }\n   \n       bb6: {\n-          StorageLive(_12);                // scope 0 at $DIR/early_otherwise_branch_noopt.rs:12:21: 12:22\n-          _12 = (((_3.1: std::option::Option<usize>) as Some).0: usize); // scope 0 at $DIR/early_otherwise_branch_noopt.rs:12:21: 12:22\n-          _0 = const 2_usize;              // scope 3 at $DIR/early_otherwise_branch_noopt.rs:12:28: 12:29\n-                                           // ty::Const\n-                                           // + ty: usize\n-                                           // + val: Value(Scalar(0x0000000000000002))\n-                                           // mir::Constant\n-                                           // + span: $DIR/early_otherwise_branch_noopt.rs:12:28: 12:29\n-                                           // + literal: Const { ty: usize, val: Value(Scalar(0x0000000000000002)) }\n-          StorageDead(_12);                // scope 0 at $DIR/early_otherwise_branch_noopt.rs:12:28: 12:29\n-          goto -> bb7;                     // scope 0 at $DIR/early_otherwise_branch_noopt.rs:9:5: 14:6\n+          StorageLive(_12);                // scope 0 at $DIR/early_otherwise_branch_noopt.rs:11:21: 11:22\n+          _12 = (((_3.1: std::option::Option<u32>) as Some).0: u32); // scope 0 at $DIR/early_otherwise_branch_noopt.rs:11:21: 11:22\n+          _0 = const 2_u32;                // scope 3 at $DIR/early_otherwise_branch_noopt.rs:11:28: 11:29\n+          StorageDead(_12);                // scope 0 at $DIR/early_otherwise_branch_noopt.rs:11:28: 11:29\n+          goto -> bb7;                     // scope 0 at $DIR/early_otherwise_branch_noopt.rs:8:5: 13:6\n       }\n   \n       bb7: {\n-          StorageDead(_3);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:15:1: 15:2\n-          return;                          // scope 0 at $DIR/early_otherwise_branch_noopt.rs:15:2: 15:2\n+          StorageDead(_3);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:14:1: 14:2\n+          return;                          // scope 0 at $DIR/early_otherwise_branch_noopt.rs:14:2: 14:2\n       }\n   }\n   "}, {"sha": "c3aecb4529351f5d66b072c399274e33af8fca64", "filename": "src/test/mir-opt/early_otherwise_branch_noopt.noopt2.EarlyOtherwiseBranch.diff", "status": "modified", "additions": 38, "deletions": 50, "changes": 88, "blob_url": "https://github.com/rust-lang/rust/blob/0e06456ecbe244291f1feef7c24b7165f028e0d0/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch_noopt.noopt2.EarlyOtherwiseBranch.diff", "raw_url": "https://github.com/rust-lang/rust/raw/0e06456ecbe244291f1feef7c24b7165f028e0d0/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch_noopt.noopt2.EarlyOtherwiseBranch.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch_noopt.noopt2.EarlyOtherwiseBranch.diff?ref=0e06456ecbe244291f1feef7c24b7165f028e0d0", "patch": "@@ -1,72 +1,60 @@\n - // MIR for `noopt2` before EarlyOtherwiseBranch\n + // MIR for `noopt2` after EarlyOtherwiseBranch\n   \n-  fn noopt2(_1: std::option::Option<usize>, _2: std::option::Option<bool>) -> usize {\n-      debug x => _1;                       // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:19:11: 19:12\n-      debug y => _2;                       // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:19:29: 19:30\n-      let mut _0: usize;                   // return place in scope 0 at $DIR/early_otherwise_branch_noopt.rs:19:48: 19:53\n-      let mut _3: (std::option::Option<usize>, std::option::Option<bool>); // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:20:11: 20:16\n-      let mut _4: std::option::Option<usize>; // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:20:12: 20:13\n-      let mut _5: std::option::Option<bool>; // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:20:14: 20:15\n-      let mut _6: isize;                   // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:21:19: 21:26\n-      let mut _7: isize;                   // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:21:10: 21:17\n-      let _8: usize;                       // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:21:15: 21:16\n-      let _9: bool;                        // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:21:24: 21:25\n+  fn noopt2(_1: Option<u32>, _2: Option<bool>) -> u32 {\n+      debug x => _1;                       // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:18:11: 18:12\n+      debug y => _2;                       // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:18:27: 18:28\n+      let mut _0: u32;                     // return place in scope 0 at $DIR/early_otherwise_branch_noopt.rs:18:47: 18:50\n+      let mut _3: (std::option::Option<u32>, std::option::Option<bool>); // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:19:11: 19:17\n+      let mut _4: std::option::Option<u32>; // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:19:12: 19:13\n+      let mut _5: std::option::Option<bool>; // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:19:15: 19:16\n+      let mut _6: isize;                   // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:20:19: 20:26\n+      let mut _7: isize;                   // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:20:10: 20:17\n+      let _8: u32;                         // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:20:15: 20:16\n+      let _9: bool;                        // in scope 0 at $DIR/early_otherwise_branch_noopt.rs:20:24: 20:25\n       scope 1 {\n-          debug a => _8;                   // in scope 1 at $DIR/early_otherwise_branch_noopt.rs:21:15: 21:16\n-          debug b => _9;                   // in scope 1 at $DIR/early_otherwise_branch_noopt.rs:21:24: 21:25\n+          debug a => _8;                   // in scope 1 at $DIR/early_otherwise_branch_noopt.rs:20:15: 20:16\n+          debug b => _9;                   // in scope 1 at $DIR/early_otherwise_branch_noopt.rs:20:24: 20:25\n       }\n   \n       bb0: {\n-          StorageLive(_3);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:20:11: 20:16\n-          StorageLive(_4);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:20:12: 20:13\n-          _4 = _1;                         // scope 0 at $DIR/early_otherwise_branch_noopt.rs:20:12: 20:13\n-          StorageLive(_5);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:20:14: 20:15\n-          _5 = _2;                         // scope 0 at $DIR/early_otherwise_branch_noopt.rs:20:14: 20:15\n-          (_3.0: std::option::Option<usize>) = move _4; // scope 0 at $DIR/early_otherwise_branch_noopt.rs:20:11: 20:16\n-          (_3.1: std::option::Option<bool>) = move _5; // scope 0 at $DIR/early_otherwise_branch_noopt.rs:20:11: 20:16\n-          StorageDead(_5);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:20:15: 20:16\n-          StorageDead(_4);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:20:15: 20:16\n-          _7 = discriminant((_3.0: std::option::Option<usize>)); // scope 0 at $DIR/early_otherwise_branch_noopt.rs:21:10: 21:17\n-          switchInt(move _7) -> [1_isize: bb2, otherwise: bb1]; // scope 0 at $DIR/early_otherwise_branch_noopt.rs:21:10: 21:17\n+          StorageLive(_3);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:19:11: 19:17\n+          StorageLive(_4);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:19:12: 19:13\n+          _4 = _1;                         // scope 0 at $DIR/early_otherwise_branch_noopt.rs:19:12: 19:13\n+          StorageLive(_5);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:19:15: 19:16\n+          _5 = _2;                         // scope 0 at $DIR/early_otherwise_branch_noopt.rs:19:15: 19:16\n+          (_3.0: std::option::Option<u32>) = move _4; // scope 0 at $DIR/early_otherwise_branch_noopt.rs:19:11: 19:17\n+          (_3.1: std::option::Option<bool>) = move _5; // scope 0 at $DIR/early_otherwise_branch_noopt.rs:19:11: 19:17\n+          StorageDead(_5);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:19:16: 19:17\n+          StorageDead(_4);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:19:16: 19:17\n+          _7 = discriminant((_3.0: std::option::Option<u32>)); // scope 0 at $DIR/early_otherwise_branch_noopt.rs:20:10: 20:17\n+          switchInt(move _7) -> [1_isize: bb2, otherwise: bb1]; // scope 0 at $DIR/early_otherwise_branch_noopt.rs:20:10: 20:17\n       }\n   \n       bb1: {\n-          _0 = const 1_usize;              // scope 0 at $DIR/early_otherwise_branch_noopt.rs:22:14: 22:15\n-                                           // ty::Const\n-                                           // + ty: usize\n-                                           // + val: Value(Scalar(0x0000000000000001))\n-                                           // mir::Constant\n-                                           // + span: $DIR/early_otherwise_branch_noopt.rs:22:14: 22:15\n-                                           // + literal: Const { ty: usize, val: Value(Scalar(0x0000000000000001)) }\n-          goto -> bb4;                     // scope 0 at $DIR/early_otherwise_branch_noopt.rs:20:5: 23:6\n+          _0 = const 1_u32;                // scope 0 at $DIR/early_otherwise_branch_noopt.rs:21:14: 21:15\n+          goto -> bb4;                     // scope 0 at $DIR/early_otherwise_branch_noopt.rs:19:5: 22:6\n       }\n   \n       bb2: {\n-          _6 = discriminant((_3.1: std::option::Option<bool>)); // scope 0 at $DIR/early_otherwise_branch_noopt.rs:21:19: 21:26\n-          switchInt(move _6) -> [1_isize: bb3, otherwise: bb1]; // scope 0 at $DIR/early_otherwise_branch_noopt.rs:21:19: 21:26\n+          _6 = discriminant((_3.1: std::option::Option<bool>)); // scope 0 at $DIR/early_otherwise_branch_noopt.rs:20:19: 20:26\n+          switchInt(move _6) -> [1_isize: bb3, otherwise: bb1]; // scope 0 at $DIR/early_otherwise_branch_noopt.rs:20:19: 20:26\n       }\n   \n       bb3: {\n-          StorageLive(_8);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:21:15: 21:16\n-          _8 = (((_3.0: std::option::Option<usize>) as Some).0: usize); // scope 0 at $DIR/early_otherwise_branch_noopt.rs:21:15: 21:16\n-          StorageLive(_9);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:21:24: 21:25\n-          _9 = (((_3.1: std::option::Option<bool>) as Some).0: bool); // scope 0 at $DIR/early_otherwise_branch_noopt.rs:21:24: 21:25\n-          _0 = const 0_usize;              // scope 1 at $DIR/early_otherwise_branch_noopt.rs:21:31: 21:32\n-                                           // ty::Const\n-                                           // + ty: usize\n-                                           // + val: Value(Scalar(0x0000000000000000))\n-                                           // mir::Constant\n-                                           // + span: $DIR/early_otherwise_branch_noopt.rs:21:31: 21:32\n-                                           // + literal: Const { ty: usize, val: Value(Scalar(0x0000000000000000)) }\n-          StorageDead(_9);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:21:31: 21:32\n-          StorageDead(_8);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:21:31: 21:32\n-          goto -> bb4;                     // scope 0 at $DIR/early_otherwise_branch_noopt.rs:20:5: 23:6\n+          StorageLive(_8);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:20:15: 20:16\n+          _8 = (((_3.0: std::option::Option<u32>) as Some).0: u32); // scope 0 at $DIR/early_otherwise_branch_noopt.rs:20:15: 20:16\n+          StorageLive(_9);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:20:24: 20:25\n+          _9 = (((_3.1: std::option::Option<bool>) as Some).0: bool); // scope 0 at $DIR/early_otherwise_branch_noopt.rs:20:24: 20:25\n+          _0 = const 0_u32;                // scope 1 at $DIR/early_otherwise_branch_noopt.rs:20:31: 20:32\n+          StorageDead(_9);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:20:31: 20:32\n+          StorageDead(_8);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:20:31: 20:32\n+          goto -> bb4;                     // scope 0 at $DIR/early_otherwise_branch_noopt.rs:19:5: 22:6\n       }\n   \n       bb4: {\n-          StorageDead(_3);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:24:1: 24:2\n-          return;                          // scope 0 at $DIR/early_otherwise_branch_noopt.rs:24:2: 24:2\n+          StorageDead(_3);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:23:1: 23:2\n+          return;                          // scope 0 at $DIR/early_otherwise_branch_noopt.rs:23:2: 23:2\n       }\n   }\n   "}]}