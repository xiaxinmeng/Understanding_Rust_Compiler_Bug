{"sha": "646e0d370d8e8572e0fbbf9dd0ab6496c4116037", "node_id": "C_kwDOAAsO6NoAKDY0NmUwZDM3MGQ4ZTg1NzJlMGZiYmY5ZGQwYWI2NDk2YzQxMTYwMzc", "commit": {"author": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2022-10-23T21:48:16Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-10-23T21:48:16Z"}, "message": "Rollup merge of #103347 - RalfJung:rustc-src, r=Mark-Simulacrum\n\nbootstrap: also create rustc-src component in sysroot\n\nFixes https://github.com/rust-lang/rust-analyzer/issues/12926", "tree": {"sha": "07f11580bcfc979841c6e56a6939a7330d715dc3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/07f11580bcfc979841c6e56a6939a7330d715dc3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/646e0d370d8e8572e0fbbf9dd0ab6496c4116037", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjVbagCRBK7hj4Ov3rIwAActIIAHupvXLScDZ2AQ68KJinF/Ay\nFexuXrhv2KAxCCitHteTo/DPK53080u/a3yzKX3+V1rUy90TDWSVq9WWFhL54rji\n+gy9TEEb/81dJt+YghSr0x49Shju/hxk/FNiUQnJGBgwcqjCxrrE/yGG2a4acpEG\n9xvY6OL+nWuV4o9w4BMFsg/6vrjpgsv8vLlfJHHSMxMntn9jF31YvZ+Npu6nyMOY\ngIWdhmow6FdHw9AEEIJtHNP/bvqWGpdjXFq+ykP+CsETSpSn6jGHbbCIsOeZb7Z3\nJspzlD6DIYQ7kiLnn2bcGwJlcXeHuqKJ4mIT5GDobh+/wpx35DEHKyGKXMRA2b8=\n=l8mC\n-----END PGP SIGNATURE-----\n", "payload": "tree 07f11580bcfc979841c6e56a6939a7330d715dc3\nparent 28a1bafd48a23a9993222072a019a7c0a433bdbd\nparent bdc4acb7bfc17955b9cdc04efbe5a4e89d94755e\nauthor Michael Howell <michael@notriddle.com> 1666561696 -0700\ncommitter GitHub <noreply@github.com> 1666561696 -0700\n\nRollup merge of #103347 - RalfJung:rustc-src, r=Mark-Simulacrum\n\nbootstrap: also create rustc-src component in sysroot\n\nFixes https://github.com/rust-lang/rust-analyzer/issues/12926\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/646e0d370d8e8572e0fbbf9dd0ab6496c4116037", "html_url": "https://github.com/rust-lang/rust/commit/646e0d370d8e8572e0fbbf9dd0ab6496c4116037", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/646e0d370d8e8572e0fbbf9dd0ab6496c4116037/comments", "author": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "28a1bafd48a23a9993222072a019a7c0a433bdbd", "url": "https://api.github.com/repos/rust-lang/rust/commits/28a1bafd48a23a9993222072a019a7c0a433bdbd", "html_url": "https://github.com/rust-lang/rust/commit/28a1bafd48a23a9993222072a019a7c0a433bdbd"}, {"sha": "bdc4acb7bfc17955b9cdc04efbe5a4e89d94755e", "url": "https://api.github.com/repos/rust-lang/rust/commits/bdc4acb7bfc17955b9cdc04efbe5a4e89d94755e", "html_url": "https://github.com/rust-lang/rust/commit/bdc4acb7bfc17955b9cdc04efbe5a4e89d94755e"}], "stats": {"total": 14, "additions": 14, "deletions": 0}, "files": [{"sha": "e02a10b81640811b88770e6d95d9c378e32604d1", "filename": "src/bootstrap/compile.rs", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/646e0d370d8e8572e0fbbf9dd0ab6496c4116037/src%2Fbootstrap%2Fcompile.rs", "raw_url": "https://github.com/rust-lang/rust/raw/646e0d370d8e8572e0fbbf9dd0ab6496c4116037/src%2Fbootstrap%2Fcompile.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fcompile.rs?ref=646e0d370d8e8572e0fbbf9dd0ab6496c4116037", "patch": "@@ -1177,6 +1177,20 @@ impl Step for Sysroot {\n                 );\n             }\n         }\n+        // Same for the rustc-src component.\n+        let sysroot_lib_rustlib_rustcsrc = sysroot.join(\"lib/rustlib/rustc-src\");\n+        t!(fs::create_dir_all(&sysroot_lib_rustlib_rustcsrc));\n+        let sysroot_lib_rustlib_rustcsrc_rust = sysroot_lib_rustlib_rustcsrc.join(\"rust\");\n+        if let Err(e) =\n+            symlink_dir(&builder.config, &builder.src, &sysroot_lib_rustlib_rustcsrc_rust)\n+        {\n+            eprintln!(\n+                \"warning: creating symbolic link `{}` to `{}` failed with {}\",\n+                sysroot_lib_rustlib_rustcsrc_rust.display(),\n+                builder.src.display(),\n+                e,\n+            );\n+        }\n \n         INTERNER.intern_path(sysroot)\n     }"}]}