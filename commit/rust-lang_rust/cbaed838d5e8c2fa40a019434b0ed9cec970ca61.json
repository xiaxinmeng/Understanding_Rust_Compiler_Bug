{"sha": "cbaed838d5e8c2fa40a019434b0ed9cec970ca61", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNiYWVkODM4ZDVlOGMyZmE0MGEwMTk0MzRiMGVkOWNlYzk3MGNhNjE=", "commit": {"author": {"name": "Ivan Molodetskikh", "email": "yalterz@gmail.com", "date": "2018-09-29T09:16:03Z"}, "committer": {"name": "Ivan Molodetskikh", "email": "yalterz@gmail.com", "date": "2018-10-06T07:59:47Z"}, "message": "No trailing comma in struct literals (Visual)", "tree": {"sha": "f2d3339a7939dcf60c40544a62a192abbe424c4f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f2d3339a7939dcf60c40544a62a192abbe424c4f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/cbaed838d5e8c2fa40a019434b0ed9cec970ca61", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQJGBAABCAAwFiEE1hPewaQLbx3Fswa5As442kfp1pEFAlu4a3MSHHlhbHRlcnpA\nZ21haWwuY29tAAoJEALOONpH6daRewUQAJw5r+aJTNy2ClNZSb39k57lUrZc2mFQ\nO7UMchwWe3UXVnjJtg5im2+LaQRo7KFXHiss5ZsA5StSubIueDlQQUvBmREbbEVT\nZ+D5WvShbprwQEk6AJzknN4WiJn2SbBfts1e9iR43YhV67IxgIyrosYGGdF2+V2I\nZBmCV3y+Imm2juJuCCWpVfiByuLAXJRzumllCoS/eiMtHDGCwAbn0siM0tmZUez2\nsiWd9s6pvL74pEE1NHu7aUznKWX91dM04L5yYEOIpBlDgEg9/WdNHh8fOXHsbGQG\nBvX/A7+d2p5/mN+rHKFTy4qgxfFVFCLqHegDVEZ7mNgUEOgbk0ntJx9RT9pUL0kw\nUwYCZ4CX2bgfRhR/pP+P79aOGDppxihuz+tGytWjDoy7ZuqDa/dlaq1LKGvO3/rd\nnzK3QpLxyE6drE2mEq4xG81NPzDadade3mrzv8wRe2paUEJwicXGsG5hxmN84yQ2\nbZcLIONnm1+jCeq++T6E6PB5TdHaVf1551Bsz9w1MTN9ZnN0KI0S1vUBcmUOZ34W\n4KW8bn5W6KAUQq+HRpaA7oEVl9LOOHYASss7d0fAtifXbLbqHX0XSmKuV9ziCl4j\nEwbNPiPh3aUrOZ3JnlFvE6CFRjsV4En2pPybfxiewNQFSjs06M/D0iOnpsGSa1LS\nKW2GeAuaFMAl\n=2m0a\n-----END PGP SIGNATURE-----", "payload": "tree f2d3339a7939dcf60c40544a62a192abbe424c4f\nparent cfe20fe585282e0dbf647dc68008b9fd422a496e\nauthor Ivan Molodetskikh <yalterz@gmail.com> 1538212563 +0300\ncommitter Ivan Molodetskikh <yalterz@gmail.com> 1538812787 +0300\n\nNo trailing comma in struct literals (Visual)\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/cbaed838d5e8c2fa40a019434b0ed9cec970ca61", "html_url": "https://github.com/rust-lang/rust/commit/cbaed838d5e8c2fa40a019434b0ed9cec970ca61", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/cbaed838d5e8c2fa40a019434b0ed9cec970ca61/comments", "author": {"login": "YaLTeR", "id": 1794388, "node_id": "MDQ6VXNlcjE3OTQzODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1794388?v=4", "gravatar_id": "", "url": "https://api.github.com/users/YaLTeR", "html_url": "https://github.com/YaLTeR", "followers_url": "https://api.github.com/users/YaLTeR/followers", "following_url": "https://api.github.com/users/YaLTeR/following{/other_user}", "gists_url": "https://api.github.com/users/YaLTeR/gists{/gist_id}", "starred_url": "https://api.github.com/users/YaLTeR/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/YaLTeR/subscriptions", "organizations_url": "https://api.github.com/users/YaLTeR/orgs", "repos_url": "https://api.github.com/users/YaLTeR/repos", "events_url": "https://api.github.com/users/YaLTeR/events{/privacy}", "received_events_url": "https://api.github.com/users/YaLTeR/received_events", "type": "User", "site_admin": false}, "committer": {"login": "YaLTeR", "id": 1794388, "node_id": "MDQ6VXNlcjE3OTQzODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1794388?v=4", "gravatar_id": "", "url": "https://api.github.com/users/YaLTeR", "html_url": "https://github.com/YaLTeR", "followers_url": "https://api.github.com/users/YaLTeR/followers", "following_url": "https://api.github.com/users/YaLTeR/following{/other_user}", "gists_url": "https://api.github.com/users/YaLTeR/gists{/gist_id}", "starred_url": "https://api.github.com/users/YaLTeR/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/YaLTeR/subscriptions", "organizations_url": "https://api.github.com/users/YaLTeR/orgs", "repos_url": "https://api.github.com/users/YaLTeR/repos", "events_url": "https://api.github.com/users/YaLTeR/events{/privacy}", "received_events_url": "https://api.github.com/users/YaLTeR/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cfe20fe585282e0dbf647dc68008b9fd422a496e", "url": "https://api.github.com/repos/rust-lang/rust/commits/cfe20fe585282e0dbf647dc68008b9fd422a496e", "html_url": "https://github.com/rust-lang/rust/commit/cfe20fe585282e0dbf647dc68008b9fd422a496e"}], "stats": {"total": 44, "additions": 22, "deletions": 22}, "files": [{"sha": "66b5d840f3c3628893d2089489114012cedf1ca3", "filename": "Configurations.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/cbaed838d5e8c2fa40a019434b0ed9cec970ca61/Configurations.md", "raw_url": "https://github.com/rust-lang/rust/raw/cbaed838d5e8c2fa40a019434b0ed9cec970ca61/Configurations.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Configurations.md?ref=cbaed838d5e8c2fa40a019434b0ed9cec970ca61", "patch": "@@ -236,7 +236,7 @@ fn main() {\n ```rust\n fn main() {\n     let lorem = Lorem { ipsum: dolor,\n-                        sit: amet, };\n+                        sit: amet };\n }\n ```\n "}, {"sha": "bdc5e82e6a997e6bdd14ff6a33948586a80e5261", "filename": "src/expr.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/cbaed838d5e8c2fa40a019434b0ed9cec970ca61/src%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cbaed838d5e8c2fa40a019434b0ed9cec970ca61/src%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fexpr.rs?ref=cbaed838d5e8c2fa40a019434b0ed9cec970ca61", "patch": "@@ -1630,7 +1630,7 @@ fn rewrite_struct_lit<'a>(\n             nested_shape,\n             tactic,\n             context,\n-            force_no_trailing_comma || base.is_some(),\n+            force_no_trailing_comma || base.is_some() || !context.use_block_indent(),\n         );\n \n         write_list(&item_vec, &fmt)?"}, {"sha": "979816f3abb1e4c0a2d56dc18763ff38b299d18a", "filename": "tests/target/chains-visual.rs", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/cbaed838d5e8c2fa40a019434b0ed9cec970ca61/tests%2Ftarget%2Fchains-visual.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cbaed838d5e8c2fa40a019434b0ed9cec970ca61/tests%2Ftarget%2Fchains-visual.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fchains-visual.rs?ref=cbaed838d5e8c2fa40a019434b0ed9cec970ca61", "patch": "@@ -55,11 +55,11 @@ fn main() {\n \n fn floaters() {\n     let z = Foo { field1: val1,\n-                  field2: val2, };\n+                  field2: val2 };\n \n     let x = Foo { field1: val1,\n-                  field2: val2, }.method_call()\n-                                 .method_call();\n+                  field2: val2 }.method_call()\n+                                .method_call();\n \n     let y = if cond { val1 } else { val2 }.method_call();\n \n@@ -89,11 +89,11 @@ fn floaters() {\n                   .quux();\n \n     Foo { y: i_am_multi_line,\n-          z: ok, }.baz(|| {\n-                           force();\n-                           multiline();\n-                       })\n-                  .quux();\n+          z: ok }.baz(|| {\n+                          force();\n+                          multiline();\n+                      })\n+                 .quux();\n \n     a + match x {\n             true => \"yay!\","}, {"sha": "ec49021d330e8ce50866dae2b803f1d8f7a46da4", "filename": "tests/target/configs/indent_style/visual_struct_lit.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/cbaed838d5e8c2fa40a019434b0ed9cec970ca61/tests%2Ftarget%2Fconfigs%2Findent_style%2Fvisual_struct_lit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cbaed838d5e8c2fa40a019434b0ed9cec970ca61/tests%2Ftarget%2Fconfigs%2Findent_style%2Fvisual_struct_lit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fconfigs%2Findent_style%2Fvisual_struct_lit.rs?ref=cbaed838d5e8c2fa40a019434b0ed9cec970ca61", "patch": "@@ -3,5 +3,5 @@\n \n fn main() {\n     let lorem = Lorem { ipsum: dolor,\n-                        sit: amet, };\n+                        sit: amet };\n }"}, {"sha": "a9627fb90f51f3c00b87648d172f9cdac040144d", "filename": "tests/target/struct_lits_visual.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/cbaed838d5e8c2fa40a019434b0ed9cec970ca61/tests%2Ftarget%2Fstruct_lits_visual.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cbaed838d5e8c2fa40a019434b0ed9cec970ca61/tests%2Ftarget%2Fstruct_lits_visual.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fstruct_lits_visual.rs?ref=cbaed838d5e8c2fa40a019434b0ed9cec970ca61", "patch": "@@ -20,30 +20,30 @@ fn main() {\n     Foooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo { // Comment\n                                                                                         a: foo(), /* Comment */\n                                                                                         // Comment\n-                                                                                        b: bar(), /* Comment */ };\n+                                                                                        b: bar() /* Comment */ };\n \n     Foo { a: Bar, b: f() };\n \n     Quux { x: if cond {\n                bar();\n            },\n-           y: baz(), };\n+           y: baz() };\n \n     Baz { x: yxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx,\n-          z: zzzzz, /* test */ };\n+          z: zzzzz /* test */ };\n \n     A { // Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec a diam lectus. Sed sit\n         // amet ipsum mauris. Maecenas congue ligula ac quam viverra nec consectetur ante\n         // hendrerit. Donec et mollis dolor.\n         first: item(),\n         // Praesent et diam eget libero egestas mattis sit amet vitae augue.\n         // Nam tincidunt congue enim, ut porta lorem lacinia consectetur.\n-        second: Item, };\n+        second: Item };\n \n     Diagram { //                 o        This graph demonstrates how\n               //                / \\       significant whitespace is\n               //               o   o      preserved.\n               //              /|\\   \\\n               //             o o o   o\n-              graph: G, }\n+              graph: G }\n }"}, {"sha": "3f43ef0c981d50e57ab1fc00d2e6faa9e4dfd4ae", "filename": "tests/target/struct_lits_visual_multiline.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/cbaed838d5e8c2fa40a019434b0ed9cec970ca61/tests%2Ftarget%2Fstruct_lits_visual_multiline.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cbaed838d5e8c2fa40a019434b0ed9cec970ca61/tests%2Ftarget%2Fstruct_lits_visual_multiline.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fstruct_lits_visual_multiline.rs?ref=cbaed838d5e8c2fa40a019434b0ed9cec970ca61", "patch": "@@ -17,33 +17,33 @@ fn main() {\n           ..something };\n \n     Fooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo { a: foo(),\n-                                                                               b: bar(), };\n+                                                                               b: bar() };\n \n     Foooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo { // Comment\n                                                                                         a: foo(), /* Comment */\n                                                                                         // Comment\n-                                                                                        b: bar(), /* Comment */ };\n+                                                                                        b: bar() /* Comment */ };\n \n     Foo { a: Bar,\n-          b: foo(), };\n+          b: foo() };\n \n     Quux { x: if cond {\n                bar();\n            },\n-           y: baz(), };\n+           y: baz() };\n \n     A { // Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec a diam lectus. Sed sit\n         // amet ipsum mauris. Maecenas congue ligula ac quam viverra nec consectetur ante\n         // hendrerit. Donec et mollis dolor.\n         first: item(),\n         // Praesent et diam eget libero egestas mattis sit amet vitae augue.\n         // Nam tincidunt congue enim, ut porta lorem lacinia consectetur.\n-        second: Item, };\n+        second: Item };\n \n     Diagram { //                 o        This graph demonstrates how\n               //                / \\       significant whitespace is\n               //               o   o      preserved.\n               //              /|\\   \\\n               //             o o o   o\n-              graph: G, }\n+              graph: G }\n }"}]}