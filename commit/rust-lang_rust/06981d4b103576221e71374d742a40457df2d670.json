{"sha": "06981d4b103576221e71374d742a40457df2d670", "node_id": "C_kwDOAAsO6NoAKDA2OTgxZDRiMTAzNTc2MjIxZTcxMzc0ZDc0MmE0MDQ1N2RmMmQ2NzA", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-01-31T11:03:49Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-01-31T11:03:49Z"}, "message": "Auto merge of #14062 - WaffleLapkin:\u0441urrent_edition, r=Veykril\n\ninternal: Set \"current\" edition to 2021\n\n:p", "tree": {"sha": "e4b6e628ef1502f45fcedf401cb0000ee3a850e0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e4b6e628ef1502f45fcedf401cb0000ee3a850e0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/06981d4b103576221e71374d742a40457df2d670", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/06981d4b103576221e71374d742a40457df2d670", "html_url": "https://github.com/rust-lang/rust/commit/06981d4b103576221e71374d742a40457df2d670", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/06981d4b103576221e71374d742a40457df2d670/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b4832b3d0053568f18c24dbb9cd8bf7179008450", "url": "https://api.github.com/repos/rust-lang/rust/commits/b4832b3d0053568f18c24dbb9cd8bf7179008450", "html_url": "https://github.com/rust-lang/rust/commit/b4832b3d0053568f18c24dbb9cd8bf7179008450"}, {"sha": "249ea9502d3d69c3acbbae7a4cdfabcbf38de0c3", "url": "https://api.github.com/repos/rust-lang/rust/commits/249ea9502d3d69c3acbbae7a4cdfabcbf38de0c3", "html_url": "https://github.com/rust-lang/rust/commit/249ea9502d3d69c3acbbae7a4cdfabcbf38de0c3"}], "stats": {"total": 56, "additions": 28, "deletions": 28}, "files": [{"sha": "db9589ca186ec5f00ed774b797680d64732ba763", "filename": "crates/base-db/src/input.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/06981d4b103576221e71374d742a40457df2d670/crates%2Fbase-db%2Fsrc%2Finput.rs", "raw_url": "https://github.com/rust-lang/rust/raw/06981d4b103576221e71374d742a40457df2d670/crates%2Fbase-db%2Fsrc%2Finput.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fbase-db%2Fsrc%2Finput.rs?ref=06981d4b103576221e71374d742a40457df2d670", "patch": "@@ -282,7 +282,7 @@ pub enum Edition {\n }\n \n impl Edition {\n-    pub const CURRENT: Edition = Edition::Edition2018;\n+    pub const CURRENT: Edition = Edition::Edition2021;\n }\n \n #[derive(Default, Debug, Clone, PartialEq, Eq)]"}, {"sha": "3f439232083719cc6f269695d416538be4443c9a", "filename": "crates/hir-def/src/find_path.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/06981d4b103576221e71374d742a40457df2d670/crates%2Fhir-def%2Fsrc%2Ffind_path.rs", "raw_url": "https://github.com/rust-lang/rust/raw/06981d4b103576221e71374d742a40457df2d670/crates%2Fhir-def%2Fsrc%2Ffind_path.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir-def%2Fsrc%2Ffind_path.rs?ref=06981d4b103576221e71374d742a40457df2d670", "patch": "@@ -811,7 +811,7 @@ pub struct S;\n     fn prelude() {\n         check_found_path(\n             r#\"\n-//- /main.rs crate:main deps:std\n+//- /main.rs edition:2018 crate:main deps:std\n $0\n //- /std.rs crate:std\n pub mod prelude {\n@@ -852,7 +852,7 @@ pub mod prelude {\n     fn imported_prelude() {\n         check_found_path(\n             r#\"\n-//- /main.rs crate:main deps:std\n+//- /main.rs edition:2018 crate:main deps:std\n use S;\n $0\n //- /std.rs crate:std\n@@ -872,7 +872,7 @@ pub mod prelude {\n     #[test]\n     fn enum_variant_from_prelude() {\n         let code = r#\"\n-//- /main.rs crate:main deps:std\n+//- /main.rs edition:2018 crate:main deps:std\n $0\n //- /std.rs crate:std\n pub mod prelude {\n@@ -1273,7 +1273,7 @@ fn f() {\n     fn prelude_with_inner_items() {\n         check_found_path(\n             r#\"\n-//- /main.rs crate:main deps:std\n+//- /main.rs edition:2018 crate:main deps:std\n fn f() {\n     fn inner() {}\n     $0"}, {"sha": "8a27c60df5c27842db0d0ca1f2d7542854c25255", "filename": "crates/hir-def/src/nameres/tests.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/06981d4b103576221e71374d742a40457df2d670/crates%2Fhir-def%2Fsrc%2Fnameres%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/06981d4b103576221e71374d742a40457df2d670/crates%2Fhir-def%2Fsrc%2Fnameres%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir-def%2Fsrc%2Fnameres%2Ftests.rs?ref=06981d4b103576221e71374d742a40457df2d670", "patch": "@@ -476,7 +476,7 @@ pub struct Bar;\n fn no_std_prelude() {\n     check(\n         r#\"\n-        //- /main.rs crate:main deps:core,std\n+        //- /main.rs edition:2018 crate:main deps:core,std\n         #![cfg_attr(not(never), no_std)]\n         use Rust;\n \n@@ -544,7 +544,7 @@ fn edition_specific_preludes() {\n fn std_prelude_takes_precedence_above_core_prelude() {\n     check(\n         r#\"\n-//- /main.rs crate:main deps:core,std\n+//- /main.rs edition:2018 crate:main deps:core,std\n use {Foo, Bar};\n \n //- /std.rs crate:std deps:core\n@@ -574,7 +574,7 @@ pub mod prelude {\n fn cfg_not_test() {\n     check(\n         r#\"\n-//- /main.rs crate:main deps:std\n+//- /main.rs edition:2018 crate:main deps:std\n use {Foo, Bar, Baz};\n \n //- /lib.rs crate:std\n@@ -602,7 +602,7 @@ pub mod prelude {\n fn cfg_test() {\n     check(\n         r#\"\n-//- /main.rs crate:main deps:std\n+//- /main.rs edition:2018 crate:main deps:std\n use {Foo, Bar, Baz};\n \n //- /lib.rs crate:std cfg:test,feature=foo,feature=bar,opt=42"}, {"sha": "a4ccd14cbb463a6cdae02cb18e8bb94101ccd7cd", "filename": "crates/hir-def/src/nameres/tests/macros.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/06981d4b103576221e71374d742a40457df2d670/crates%2Fhir-def%2Fsrc%2Fnameres%2Ftests%2Fmacros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/06981d4b103576221e71374d742a40457df2d670/crates%2Fhir-def%2Fsrc%2Fnameres%2Ftests%2Fmacros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir-def%2Fsrc%2Fnameres%2Ftests%2Fmacros.rs?ref=06981d4b103576221e71374d742a40457df2d670", "patch": "@@ -264,7 +264,7 @@ fn prelude_is_macro_use() {\n     cov_mark::check!(prelude_is_macro_use);\n     check(\n         r#\"\n-//- /main.rs crate:main deps:std\n+//- /main.rs edition:2018 crate:main deps:std\n structs!(Foo);\n structs_priv!(Bar);\n structs_outside!(Out);\n@@ -634,7 +634,7 @@ fn macro_dollar_crate_is_correct_in_indirect_deps() {\n     // From std\n     check(\n         r#\"\n-//- /main.rs crate:main deps:std\n+//- /main.rs edition:2018 crate:main deps:std\n foo!();\n \n //- /std.rs crate:std deps:core\n@@ -1034,7 +1034,7 @@ structs!(Foo);\n fn macro_in_prelude() {\n     check(\n         r#\"\n-//- /lib.rs crate:lib deps:std\n+//- /lib.rs edition:2018 crate:lib deps:std\n global_asm!();\n \n //- /std.rs crate:std"}, {"sha": "616ca8058e9df8fc3ffe3c9dbf4af6673b63a18f", "filename": "crates/hir-ty/src/tests/method_resolution.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/06981d4b103576221e71374d742a40457df2d670/crates%2Fhir-ty%2Fsrc%2Ftests%2Fmethod_resolution.rs", "raw_url": "https://github.com/rust-lang/rust/raw/06981d4b103576221e71374d742a40457df2d670/crates%2Fhir-ty%2Fsrc%2Ftests%2Fmethod_resolution.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir-ty%2Fsrc%2Ftests%2Fmethod_resolution.rs?ref=06981d4b103576221e71374d742a40457df2d670", "patch": "@@ -813,7 +813,7 @@ fn test() {\n fn method_resolution_trait_from_prelude() {\n     check_types(\n         r#\"\n-//- /main.rs crate:main deps:core\n+//- /main.rs edition:2018 crate:main deps:core\n struct S;\n impl Clone for S {}\n \n@@ -1527,7 +1527,7 @@ fn f(x: U2) {\n fn skip_array_during_method_dispatch() {\n     check_types(\n         r#\"\n-//- /main2018.rs crate:main2018 deps:core\n+//- /main2018.rs crate:main2018 deps:core edition:2018\n use core::IntoIterator;\n \n fn f() {"}, {"sha": "6052b0623204e56283c7e9efbb8db5c3f586263c", "filename": "crates/ide-completion/src/tests/special.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/06981d4b103576221e71374d742a40457df2d670/crates%2Fide-completion%2Fsrc%2Ftests%2Fspecial.rs", "raw_url": "https://github.com/rust-lang/rust/raw/06981d4b103576221e71374d742a40457df2d670/crates%2Fide-completion%2Fsrc%2Ftests%2Fspecial.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide-completion%2Fsrc%2Ftests%2Fspecial.rs?ref=06981d4b103576221e71374d742a40457df2d670", "patch": "@@ -61,7 +61,7 @@ fn _alpha() {}\n fn completes_prelude() {\n     check(\n         r#\"\n-//- /main.rs crate:main deps:std\n+//- /main.rs edition:2018 crate:main deps:std\n fn foo() { let x: $0 }\n \n //- /std/lib.rs crate:std\n@@ -83,7 +83,7 @@ pub mod prelude {\n fn completes_prelude_macros() {\n     check(\n         r#\"\n-//- /main.rs crate:main deps:std\n+//- /main.rs edition:2018 crate:main deps:std\n fn f() {$0}\n \n //- /std/lib.rs crate:std\n@@ -117,14 +117,14 @@ fn foo() { let x: $0 }\n \n //- /core/lib.rs crate:core\n pub mod prelude {\n-    pub mod rust_2018 {\n+    pub mod rust_2021 {\n         pub struct Option;\n     }\n }\n \n //- /std/lib.rs crate:std deps:core\n pub mod prelude {\n-    pub mod rust_2018 {\n+    pub mod rust_2021 {\n         pub struct String;\n     }\n }"}, {"sha": "9e9691d11e854f33e12c937a0b31cad9c6c58b0a", "filename": "crates/project-model/src/tests.rs", "status": "modified", "additions": 10, "deletions": 10, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/06981d4b103576221e71374d742a40457df2d670/crates%2Fproject-model%2Fsrc%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/06981d4b103576221e71374d742a40457df2d670/crates%2Fproject-model%2Fsrc%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fproject-model%2Fsrc%2Ftests.rs?ref=06981d4b103576221e71374d742a40457df2d670", "patch": "@@ -1357,7 +1357,7 @@ fn rust_project_hello_world_project_model() {\n                         root_file_id: FileId(\n                             1,\n                         ),\n-                        edition: Edition2018,\n+                        edition: Edition2021,\n                         version: None,\n                         display_name: Some(\n                             CrateDisplayName {\n@@ -1404,7 +1404,7 @@ fn rust_project_hello_world_project_model() {\n                         root_file_id: FileId(\n                             2,\n                         ),\n-                        edition: Edition2018,\n+                        edition: Edition2021,\n                         version: None,\n                         display_name: Some(\n                             CrateDisplayName {\n@@ -1441,7 +1441,7 @@ fn rust_project_hello_world_project_model() {\n                         root_file_id: FileId(\n                             3,\n                         ),\n-                        edition: Edition2018,\n+                        edition: Edition2021,\n                         version: None,\n                         display_name: Some(\n                             CrateDisplayName {\n@@ -1478,7 +1478,7 @@ fn rust_project_hello_world_project_model() {\n                         root_file_id: FileId(\n                             4,\n                         ),\n-                        edition: Edition2018,\n+                        edition: Edition2021,\n                         version: None,\n                         display_name: Some(\n                             CrateDisplayName {\n@@ -1515,7 +1515,7 @@ fn rust_project_hello_world_project_model() {\n                         root_file_id: FileId(\n                             5,\n                         ),\n-                        edition: Edition2018,\n+                        edition: Edition2021,\n                         version: None,\n                         display_name: Some(\n                             CrateDisplayName {\n@@ -1562,7 +1562,7 @@ fn rust_project_hello_world_project_model() {\n                         root_file_id: FileId(\n                             6,\n                         ),\n-                        edition: Edition2018,\n+                        edition: Edition2021,\n                         version: None,\n                         display_name: Some(\n                             CrateDisplayName {\n@@ -1599,7 +1599,7 @@ fn rust_project_hello_world_project_model() {\n                         root_file_id: FileId(\n                             7,\n                         ),\n-                        edition: Edition2018,\n+                        edition: Edition2021,\n                         version: None,\n                         display_name: Some(\n                             CrateDisplayName {\n@@ -1709,7 +1709,7 @@ fn rust_project_hello_world_project_model() {\n                         root_file_id: FileId(\n                             8,\n                         ),\n-                        edition: Edition2018,\n+                        edition: Edition2021,\n                         version: None,\n                         display_name: Some(\n                             CrateDisplayName {\n@@ -1746,7 +1746,7 @@ fn rust_project_hello_world_project_model() {\n                         root_file_id: FileId(\n                             9,\n                         ),\n-                        edition: Edition2018,\n+                        edition: Edition2021,\n                         version: None,\n                         display_name: Some(\n                             CrateDisplayName {\n@@ -1783,7 +1783,7 @@ fn rust_project_hello_world_project_model() {\n                         root_file_id: FileId(\n                             10,\n                         ),\n-                        edition: Edition2018,\n+                        edition: Edition2021,\n                         version: None,\n                         display_name: Some(\n                             CrateDisplayName {"}]}