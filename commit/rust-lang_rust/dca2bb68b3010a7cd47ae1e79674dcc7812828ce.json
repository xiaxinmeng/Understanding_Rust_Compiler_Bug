{"sha": "dca2bb68b3010a7cd47ae1e79674dcc7812828ce", "node_id": "C_kwDOAAsO6NoAKGRjYTJiYjY4YjMwMTBhN2NkNDdhZTFlNzk2NzRkY2M3ODEyODI4Y2U", "commit": {"author": {"name": "InfRandomness", "email": "infrandomness@gmail.com", "date": "2022-07-01T16:36:14Z"}, "committer": {"name": "InfRandomness", "email": "infrandomness@gmail.com", "date": "2022-07-01T16:42:33Z"}, "message": "Add `__error` to freebsd shims\n\nSigned-off-by: InfRandomness <infrandomness@gmail.com>", "tree": {"sha": "c3a903736a5a6bbc36d0d992f49dad5163a9718e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c3a903736a5a6bbc36d0d992f49dad5163a9718e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/dca2bb68b3010a7cd47ae1e79674dcc7812828ce", "comment_count": 0, "verification": {"verified": false, "reason": "unknown_key", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEES/Kc3h45uW73N4seYLbIHvAzRBoFAmK/I/kACgkQYLbIHvAz\nRBofihAAxdNyN09sZDh2UVzxHWE6PIE4i6MmPNjbim30Ha5V0W5Fwm8klQ5/Y6ng\n4bngAxzpcVE40JFpkJ/LbMXD6msic+h16oeWqgVPfN1sM1rFnFP2b2xbEtGMaKD+\nr+yap3vLrWnV3EmX9xuPm4fLi4n0ZPKAX2c8VtJNx4R8P32/dWWpG1EZZgn3PBTX\nKEr/YzOY++0Kcbu5+dO2JwZmO7Q8Rbx7w7+xJQcYH69uujPxW0UayZsD+tHUBFoX\nTIj0U6sMsLxmFVEskjzgquHQW/Jl6K0oZHxYK7Ny6EYNRNwZtPCDjUXxQb+aKHRn\ndgkXmjr8sr2Um7Zw2Drg2hK8crT4zyZEUeaapCR/amF5sJ0+zIxbTjEilMkKmvSd\nCeUBe7c+hVxPcxikBNt8HWYpu1esCuKen7HSf+0c3qxnm+lOFHhikNVVrGLFOFtG\nuXPhYiqqJxjRk36y33uffHEWj0Ga5oXCdcRqf0WeCQ6dpwVD7/RlwsWEk8la2PZ7\nlzB2Ia8zNUQjqUMOMErm3NujwY3CGYJPQ7vNzJ7Wajsv9JMh2pVpnzuRlCD7tfur\nCLqnFj93+w5qExjSf1MYy9vkpXsln+B51PDan9lS6ijzKjHaq+CyEeY8ImIuuyNU\nvthBhMnXD3+DLF1nrArtM6y93pezM/1y8KCL7x7TKaRUYZFU67s=\n=E2Nn\n-----END PGP SIGNATURE-----", "payload": "tree c3a903736a5a6bbc36d0d992f49dad5163a9718e\nparent 38effb37da1c5bbf95bbfe8c520e7ccfe4bd8285\nauthor InfRandomness <infrandomness@gmail.com> 1656693374 +0200\ncommitter InfRandomness <infrandomness@gmail.com> 1656693753 +0200\n\nAdd `__error` to freebsd shims\n\nSigned-off-by: InfRandomness <infrandomness@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/dca2bb68b3010a7cd47ae1e79674dcc7812828ce", "html_url": "https://github.com/rust-lang/rust/commit/dca2bb68b3010a7cd47ae1e79674dcc7812828ce", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/dca2bb68b3010a7cd47ae1e79674dcc7812828ce/comments", "author": {"login": "InfRandomness", "id": 43730933, "node_id": "MDQ6VXNlcjQzNzMwOTMz", "avatar_url": "https://avatars.githubusercontent.com/u/43730933?v=4", "gravatar_id": "", "url": "https://api.github.com/users/InfRandomness", "html_url": "https://github.com/InfRandomness", "followers_url": "https://api.github.com/users/InfRandomness/followers", "following_url": "https://api.github.com/users/InfRandomness/following{/other_user}", "gists_url": "https://api.github.com/users/InfRandomness/gists{/gist_id}", "starred_url": "https://api.github.com/users/InfRandomness/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/InfRandomness/subscriptions", "organizations_url": "https://api.github.com/users/InfRandomness/orgs", "repos_url": "https://api.github.com/users/InfRandomness/repos", "events_url": "https://api.github.com/users/InfRandomness/events{/privacy}", "received_events_url": "https://api.github.com/users/InfRandomness/received_events", "type": "User", "site_admin": false}, "committer": {"login": "InfRandomness", "id": 43730933, "node_id": "MDQ6VXNlcjQzNzMwOTMz", "avatar_url": "https://avatars.githubusercontent.com/u/43730933?v=4", "gravatar_id": "", "url": "https://api.github.com/users/InfRandomness", "html_url": "https://github.com/InfRandomness", "followers_url": "https://api.github.com/users/InfRandomness/followers", "following_url": "https://api.github.com/users/InfRandomness/following{/other_user}", "gists_url": "https://api.github.com/users/InfRandomness/gists{/gist_id}", "starred_url": "https://api.github.com/users/InfRandomness/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/InfRandomness/subscriptions", "organizations_url": "https://api.github.com/users/InfRandomness/orgs", "repos_url": "https://api.github.com/users/InfRandomness/repos", "events_url": "https://api.github.com/users/InfRandomness/events{/privacy}", "received_events_url": "https://api.github.com/users/InfRandomness/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "38effb37da1c5bbf95bbfe8c520e7ccfe4bd8285", "url": "https://api.github.com/repos/rust-lang/rust/commits/38effb37da1c5bbf95bbfe8c520e7ccfe4bd8285", "html_url": "https://github.com/rust-lang/rust/commit/38effb37da1c5bbf95bbfe8c520e7ccfe4bd8285"}], "stats": {"total": 8, "additions": 8, "deletions": 0}, "files": [{"sha": "66e339cc4a82008f17e1e5c183ee549210a41480", "filename": "src/shims/unix/freebsd/foreign_items.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/dca2bb68b3010a7cd47ae1e79674dcc7812828ce/src%2Fshims%2Funix%2Ffreebsd%2Fforeign_items.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dca2bb68b3010a7cd47ae1e79674dcc7812828ce/src%2Fshims%2Funix%2Ffreebsd%2Fforeign_items.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fshims%2Funix%2Ffreebsd%2Fforeign_items.rs?ref=dca2bb68b3010a7cd47ae1e79674dcc7812828ce", "patch": "@@ -24,6 +24,14 @@ pub trait EvalContextExt<'mir, 'tcx: 'mir>: crate::MiriEvalContextExt<'mir, 'tcx\n                     this.check_shim(abi, Abi::C { unwind: false }, link_name, args)?;\n                 this.write_null(dest)?;\n             }\n+\n+            // errno\n+            \"__error\" => {\n+                let [] = this.check_shim(abi, Abi::C { unwind: false }, link_name, args)?;\n+                let errno_place = this.last_error_place()?;\n+                this.write_scalar(errno_place.to_ref(this).to_scalar()?, dest)?;\n+            }\n+\n             _ => return Ok(EmulateByNameResult::NotSupported),\n         }\n         Ok(EmulateByNameResult::NeedsJumping)"}]}