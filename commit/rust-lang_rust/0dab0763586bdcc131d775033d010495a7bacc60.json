{"sha": "0dab0763586bdcc131d775033d010495a7bacc60", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBkYWIwNzYzNTg2YmRjYzEzMWQ3NzUwMzNkMDEwNDk1YTdiYWNjNjA=", "commit": {"author": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2021-01-07T13:43:22Z"}, "committer": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2021-01-07T14:48:13Z"}, "message": "rustc_parse: Better spans for synthesized token streams", "tree": {"sha": "191c5f4d1748cc5e1a92b191a5c478b5193e0263", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/191c5f4d1748cc5e1a92b191a5c478b5193e0263"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0dab0763586bdcc131d775033d010495a7bacc60", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0dab0763586bdcc131d775033d010495a7bacc60", "html_url": "https://github.com/rust-lang/rust/commit/0dab0763586bdcc131d775033d010495a7bacc60", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0dab0763586bdcc131d775033d010495a7bacc60/comments", "author": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "committer": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b5c496de374407c0937cf5257d89230b5358d053", "url": "https://api.github.com/repos/rust-lang/rust/commits/b5c496de374407c0937cf5257d89230b5358d053", "html_url": "https://github.com/rust-lang/rust/commit/b5c496de374407c0937cf5257d89230b5358d053"}], "stats": {"total": 318, "additions": 151, "deletions": 167}, "files": [{"sha": "90bfb01d6c7913e5b0026b9fb0fc3a67b510c4f1", "filename": "compiler/rustc_ast/src/token.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0dab0763586bdcc131d775033d010495a7bacc60/compiler%2Frustc_ast%2Fsrc%2Ftoken.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0dab0763586bdcc131d775033d010495a7bacc60/compiler%2Frustc_ast%2Fsrc%2Ftoken.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast%2Fsrc%2Ftoken.rs?ref=0dab0763586bdcc131d775033d010495a7bacc60", "patch": "@@ -771,7 +771,7 @@ impl fmt::Display for NonterminalKind {\n }\n \n impl Nonterminal {\n-    fn span(&self) -> Span {\n+    pub fn span(&self) -> Span {\n         match self {\n             NtItem(item) => item.span,\n             NtBlock(block) => block.span,"}, {"sha": "ab9861b85ab03513823cd0341adb900ccd7e8695", "filename": "compiler/rustc_ast_lowering/src/lib.rs", "status": "modified", "additions": 2, "deletions": 8, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/0dab0763586bdcc131d775033d010495a7bacc60/compiler%2Frustc_ast_lowering%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0dab0763586bdcc131d775033d010495a7bacc60/compiler%2Frustc_ast_lowering%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast_lowering%2Fsrc%2Flib.rs?ref=0dab0763586bdcc131d775033d010495a7bacc60", "patch": "@@ -206,8 +206,7 @@ pub trait ResolverAstLowering {\n     ) -> LocalDefId;\n }\n \n-type NtToTokenstream =\n-    fn(&Nonterminal, &ParseSess, Span, CanSynthesizeMissingTokens) -> TokenStream;\n+type NtToTokenstream = fn(&Nonterminal, &ParseSess, CanSynthesizeMissingTokens) -> TokenStream;\n \n /// Context of `impl Trait` in code, which determines whether it is allowed in an HIR subtree,\n /// and if so, what meaning it has.\n@@ -417,12 +416,7 @@ impl<'a> TokenStreamLowering<'a> {\n     fn lower_token(&mut self, token: Token) -> TokenStream {\n         match token.kind {\n             token::Interpolated(nt) => {\n-                let tts = (self.nt_to_tokenstream)(\n-                    &nt,\n-                    self.parse_sess,\n-                    token.span,\n-                    self.synthesize_tokens,\n-                );\n+                let tts = (self.nt_to_tokenstream)(&nt, self.parse_sess, self.synthesize_tokens);\n                 TokenTree::Delimited(\n                     DelimSpan::from_single(token.span),\n                     DelimToken::NoDelim,"}, {"sha": "b2ba720e0d735d6e5dc0f16772656631a3caa008", "filename": "compiler/rustc_expand/src/base.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0dab0763586bdcc131d775033d010495a7bacc60/compiler%2Frustc_expand%2Fsrc%2Fbase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0dab0763586bdcc131d775033d010495a7bacc60/compiler%2Frustc_expand%2Fsrc%2Fbase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_expand%2Fsrc%2Fbase.rs?ref=0dab0763586bdcc131d775033d010495a7bacc60", "patch": "@@ -141,7 +141,7 @@ impl Annotatable {\n     }\n \n     crate fn into_tokens(self, sess: &ParseSess) -> TokenStream {\n-        nt_to_tokenstream(&self.into_nonterminal(), sess, DUMMY_SP, CanSynthesizeMissingTokens::No)\n+        nt_to_tokenstream(&self.into_nonterminal(), sess, CanSynthesizeMissingTokens::No)\n     }\n \n     pub fn expect_item(self) -> P<ast::Item> {"}, {"sha": "fa80a20dc8bb7dc9e58c76bb4b1b58277200b764", "filename": "compiler/rustc_expand/src/expand.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/0dab0763586bdcc131d775033d010495a7bacc60/compiler%2Frustc_expand%2Fsrc%2Fexpand.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0dab0763586bdcc131d775033d010495a7bacc60/compiler%2Frustc_expand%2Fsrc%2Fexpand.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_expand%2Fsrc%2Fexpand.rs?ref=0dab0763586bdcc131d775033d010495a7bacc60", "patch": "@@ -743,7 +743,6 @@ impl<'a, 'b> MacroExpander<'a, 'b> {\n                         AttrStyle::Inner => rustc_parse::fake_token_stream(\n                             &self.cx.sess.parse_sess,\n                             &item.into_nonterminal(),\n-                            span,\n                         ),\n                     };\n                     let attr_item = attr.unwrap_normal_item();"}, {"sha": "02129e9b5e548bbcbee3c91abe0e66ea45becad0", "filename": "compiler/rustc_expand/src/proc_macro.rs", "status": "modified", "additions": 1, "deletions": 6, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/0dab0763586bdcc131d775033d010495a7bacc60/compiler%2Frustc_expand%2Fsrc%2Fproc_macro.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0dab0763586bdcc131d775033d010495a7bacc60/compiler%2Frustc_expand%2Fsrc%2Fproc_macro.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_expand%2Fsrc%2Fproc_macro.rs?ref=0dab0763586bdcc131d775033d010495a7bacc60", "patch": "@@ -94,12 +94,7 @@ impl MultiItemModifier for ProcMacroDerive {\n         let input = if item.pretty_printing_compatibility_hack() {\n             TokenTree::token(token::Interpolated(Lrc::new(item)), DUMMY_SP).into()\n         } else {\n-            nt_to_tokenstream(\n-                &item,\n-                &ecx.sess.parse_sess,\n-                DUMMY_SP,\n-                CanSynthesizeMissingTokens::Yes,\n-            )\n+            nt_to_tokenstream(&item, &ecx.sess.parse_sess, CanSynthesizeMissingTokens::Yes)\n         };\n \n         let server = proc_macro_server::Rustc::new(ecx);"}, {"sha": "b6195d3bbc4a64c4b733896af9a09def81a93fc2", "filename": "compiler/rustc_expand/src/proc_macro_server.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0dab0763586bdcc131d775033d010495a7bacc60/compiler%2Frustc_expand%2Fsrc%2Fproc_macro_server.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0dab0763586bdcc131d775033d010495a7bacc60/compiler%2Frustc_expand%2Fsrc%2Fproc_macro_server.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_expand%2Fsrc%2Fproc_macro_server.rs?ref=0dab0763586bdcc131d775033d010495a7bacc60", "patch": "@@ -179,7 +179,7 @@ impl FromInternal<(TreeAndSpacing, &'_ ParseSess, &'_ mut Vec<Self>)>\n                 {\n                     TokenTree::Ident(Ident::new(sess, name.name, is_raw, name.span))\n                 } else {\n-                    let stream = nt_to_tokenstream(&nt, sess, span, CanSynthesizeMissingTokens::No);\n+                    let stream = nt_to_tokenstream(&nt, sess, CanSynthesizeMissingTokens::No);\n                     TokenTree::Group(Group {\n                         delimiter: Delimiter::None,\n                         stream,"}, {"sha": "4fa9768febb365eedad08f54ba8d8cb1ff45a746", "filename": "compiler/rustc_parse/src/lib.rs", "status": "modified", "additions": 8, "deletions": 12, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/0dab0763586bdcc131d775033d010495a7bacc60/compiler%2Frustc_parse%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0dab0763586bdcc131d775033d010495a7bacc60/compiler%2Frustc_parse%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_parse%2Fsrc%2Flib.rs?ref=0dab0763586bdcc131d775033d010495a7bacc60", "patch": "@@ -236,7 +236,6 @@ pub fn parse_in<'a, T>(\n pub fn nt_to_tokenstream(\n     nt: &Nonterminal,\n     sess: &ParseSess,\n-    span: Span,\n     synthesize_tokens: CanSynthesizeMissingTokens,\n ) -> TokenStream {\n     // A `Nonterminal` is often a parsed AST item. At this point we now\n@@ -256,11 +255,9 @@ pub fn nt_to_tokenstream(\n         |tokens: Option<&LazyTokenStream>| tokens.as_ref().map(|t| t.create_token_stream());\n \n     let tokens = match *nt {\n-        Nonterminal::NtItem(ref item) => {\n-            prepend_attrs(sess, &item.attrs, nt, span, item.tokens.as_ref())\n-        }\n+        Nonterminal::NtItem(ref item) => prepend_attrs(sess, &item.attrs, nt, item.tokens.as_ref()),\n         Nonterminal::NtBlock(ref block) => convert_tokens(block.tokens.as_ref()),\n-        Nonterminal::NtStmt(ref stmt) => prepend_attrs(sess, stmt.attrs(), nt, span, stmt.tokens()),\n+        Nonterminal::NtStmt(ref stmt) => prepend_attrs(sess, stmt.attrs(), nt, stmt.tokens()),\n         Nonterminal::NtPat(ref pat) => convert_tokens(pat.tokens.as_ref()),\n         Nonterminal::NtTy(ref ty) => convert_tokens(ty.tokens.as_ref()),\n         Nonterminal::NtIdent(ident, is_raw) => {\n@@ -277,31 +274,30 @@ pub fn nt_to_tokenstream(\n             if expr.tokens.is_none() {\n                 debug!(\"missing tokens for expr {:?}\", expr);\n             }\n-            prepend_attrs(sess, &expr.attrs, nt, span, expr.tokens.as_ref())\n+            prepend_attrs(sess, &expr.attrs, nt, expr.tokens.as_ref())\n         }\n     };\n \n     if let Some(tokens) = tokens {\n         return tokens;\n     } else if matches!(synthesize_tokens, CanSynthesizeMissingTokens::Yes) {\n-        return fake_token_stream(sess, nt, span);\n+        return fake_token_stream(sess, nt);\n     } else {\n         let pretty = rustc_ast_pretty::pprust::nonterminal_to_string_no_extra_parens(&nt);\n-        panic!(\"Missing tokens at {:?} for nt {:?}\", span, pretty);\n+        panic!(\"Missing tokens for nt {:?}\", pretty);\n     }\n }\n \n-pub fn fake_token_stream(sess: &ParseSess, nt: &Nonterminal, span: Span) -> TokenStream {\n+pub fn fake_token_stream(sess: &ParseSess, nt: &Nonterminal) -> TokenStream {\n     let source = pprust::nonterminal_to_string(nt);\n     let filename = FileName::macro_expansion_source_code(&source);\n-    parse_stream_from_source_str(filename, source, sess, Some(span))\n+    parse_stream_from_source_str(filename, source, sess, Some(nt.span()))\n }\n \n fn prepend_attrs(\n     sess: &ParseSess,\n     attrs: &[ast::Attribute],\n     nt: &Nonterminal,\n-    span: Span,\n     tokens: Option<&tokenstream::LazyTokenStream>,\n ) -> Option<tokenstream::TokenStream> {\n     if attrs.is_empty() {\n@@ -312,7 +308,7 @@ fn prepend_attrs(\n         // FIXME: Correctly handle tokens for inner attributes.\n         // For now, we fall back to reparsing the original AST node\n         if attr.style == ast::AttrStyle::Inner {\n-            return Some(fake_token_stream(sess, nt, span));\n+            return Some(fake_token_stream(sess, nt));\n         }\n         builder.push(attr.tokens());\n     }"}, {"sha": "5f513684cfa6fee3d9391434dc82478e2d6413b3", "filename": "src/test/ui/proc-macro/issue-75930-derive-cfg.stdout", "status": "modified", "additions": 128, "deletions": 128, "changes": 256, "blob_url": "https://github.com/rust-lang/rust/blob/0dab0763586bdcc131d775033d010495a7bacc60/src%2Ftest%2Fui%2Fproc-macro%2Fissue-75930-derive-cfg.stdout", "raw_url": "https://github.com/rust-lang/rust/raw/0dab0763586bdcc131d775033d010495a7bacc60/src%2Ftest%2Fui%2Fproc-macro%2Fissue-75930-derive-cfg.stdout", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Fissue-75930-derive-cfg.stdout?ref=0dab0763586bdcc131d775033d010495a7bacc60", "patch": "@@ -1211,621 +1211,621 @@ PRINT-DERIVE INPUT (DEBUG): TokenStream [\n     Punct {\n         ch: '#',\n         spacing: Alone,\n-        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n     },\n     Group {\n         delimiter: Bracket,\n         stream: TokenStream [\n             Ident {\n                 ident: \"allow\",\n-                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n             },\n             Group {\n                 delimiter: Parenthesis,\n                 stream: TokenStream [\n                     Ident {\n                         ident: \"dead_code\",\n-                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                     },\n                 ],\n-                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n             },\n         ],\n-        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n     },\n     Punct {\n         ch: '#',\n         spacing: Alone,\n-        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n     },\n     Group {\n         delimiter: Bracket,\n         stream: TokenStream [\n             Ident {\n                 ident: \"print_helper\",\n-                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n             },\n             Group {\n                 delimiter: Parenthesis,\n                 stream: TokenStream [\n                     Ident {\n                         ident: \"b\",\n-                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                     },\n                 ],\n-                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n             },\n         ],\n-        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n     },\n     Punct {\n         ch: '#',\n         spacing: Alone,\n-        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n     },\n     Group {\n         delimiter: Bracket,\n         stream: TokenStream [\n             Ident {\n                 ident: \"print_helper\",\n-                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n             },\n             Group {\n                 delimiter: Parenthesis,\n                 stream: TokenStream [\n                     Ident {\n                         ident: \"a\",\n-                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                     },\n                 ],\n-                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n             },\n         ],\n-        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n     },\n     Ident {\n         ident: \"struct\",\n-        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n     },\n     Ident {\n         ident: \"Foo\",\n-        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n     },\n     Punct {\n         ch: '<',\n         spacing: Alone,\n-        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n     },\n     Ident {\n         ident: \"B\",\n-        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n     },\n     Punct {\n         ch: '>',\n         spacing: Alone,\n-        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n     },\n     Group {\n         delimiter: Brace,\n         stream: TokenStream [\n             Ident {\n                 ident: \"second\",\n-                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n             },\n             Punct {\n                 ch: ':',\n                 spacing: Alone,\n-                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n             },\n             Ident {\n                 ident: \"bool\",\n-                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n             },\n             Punct {\n                 ch: ',',\n                 spacing: Alone,\n-                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n             },\n             Ident {\n                 ident: \"third\",\n-                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n             },\n             Punct {\n                 ch: ':',\n                 spacing: Alone,\n-                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n             },\n             Group {\n                 delimiter: Bracket,\n                 stream: TokenStream [\n                     Ident {\n                         ident: \"u8\",\n-                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                     },\n                     Punct {\n                         ch: ';',\n                         spacing: Alone,\n-                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                     },\n                     Group {\n                         delimiter: Brace,\n                         stream: TokenStream [\n                             Punct {\n                                 ch: '#',\n                                 spacing: Alone,\n-                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                             },\n                             Group {\n                                 delimiter: Bracket,\n                                 stream: TokenStream [\n                                     Ident {\n                                         ident: \"cfg\",\n-                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                     },\n                                     Group {\n                                         delimiter: Parenthesis,\n                                         stream: TokenStream [\n                                             Ident {\n                                                 ident: \"not\",\n-                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                             },\n                                             Group {\n                                                 delimiter: Parenthesis,\n                                                 stream: TokenStream [\n                                                     Ident {\n                                                         ident: \"FALSE\",\n-                                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                                     },\n                                                 ],\n-                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                             },\n                                         ],\n-                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                     },\n                                 ],\n-                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                             },\n                             Ident {\n                                 ident: \"struct\",\n-                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                             },\n                             Ident {\n                                 ident: \"Inner\",\n-                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                             },\n                             Punct {\n                                 ch: ';',\n                                 spacing: Alone,\n-                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                             },\n                             Ident {\n                                 ident: \"match\",\n-                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                             },\n                             Ident {\n                                 ident: \"true\",\n-                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                             },\n                             Group {\n                                 delimiter: Brace,\n                                 stream: TokenStream [\n                                     Punct {\n                                         ch: '#',\n                                         spacing: Alone,\n-                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                     },\n                                     Group {\n                                         delimiter: Bracket,\n                                         stream: TokenStream [\n                                             Ident {\n                                                 ident: \"allow\",\n-                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                             },\n                                             Group {\n                                                 delimiter: Parenthesis,\n                                                 stream: TokenStream [\n                                                     Ident {\n                                                         ident: \"warnings\",\n-                                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                                     },\n                                                 ],\n-                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                             },\n                                         ],\n-                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                     },\n                                     Ident {\n                                         ident: \"false\",\n-                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                     },\n                                     Punct {\n                                         ch: '=',\n                                         spacing: Joint,\n-                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                     },\n                                     Punct {\n                                         ch: '>',\n                                         spacing: Alone,\n-                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                     },\n                                     Group {\n                                         delimiter: Brace,\n                                         stream: TokenStream [],\n-                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                     },\n                                     Ident {\n                                         ident: \"_\",\n-                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                     },\n                                     Punct {\n                                         ch: '=',\n                                         spacing: Joint,\n-                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                     },\n                                     Punct {\n                                         ch: '>',\n                                         spacing: Alone,\n-                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                     },\n                                     Group {\n                                         delimiter: Brace,\n                                         stream: TokenStream [],\n-                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                     },\n                                 ],\n-                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                             },\n                             Punct {\n                                 ch: ';',\n                                 spacing: Alone,\n-                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                             },\n                             Punct {\n                                 ch: '#',\n                                 spacing: Alone,\n-                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                             },\n                             Group {\n                                 delimiter: Bracket,\n                                 stream: TokenStream [\n                                     Ident {\n                                         ident: \"print_helper\",\n-                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                     },\n                                     Group {\n                                         delimiter: Parenthesis,\n                                         stream: TokenStream [\n                                             Ident {\n                                                 ident: \"c\",\n-                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                             },\n                                         ],\n-                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                     },\n                                 ],\n-                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                             },\n                             Punct {\n                                 ch: '#',\n                                 spacing: Alone,\n-                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                             },\n                             Group {\n                                 delimiter: Bracket,\n                                 stream: TokenStream [\n                                     Ident {\n                                         ident: \"cfg\",\n-                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                     },\n                                     Group {\n                                         delimiter: Parenthesis,\n                                         stream: TokenStream [\n                                             Ident {\n                                                 ident: \"not\",\n-                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                             },\n                                             Group {\n                                                 delimiter: Parenthesis,\n                                                 stream: TokenStream [\n                                                     Ident {\n                                                         ident: \"FALSE\",\n-                                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                                     },\n                                                 ],\n-                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                             },\n                                         ],\n-                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                     },\n                                 ],\n-                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                             },\n                             Ident {\n                                 ident: \"fn\",\n-                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                             },\n                             Ident {\n                                 ident: \"kept_fn\",\n-                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                             },\n                             Group {\n                                 delimiter: Parenthesis,\n                                 stream: TokenStream [],\n-                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                             },\n                             Group {\n                                 delimiter: Brace,\n                                 stream: TokenStream [\n                                     Punct {\n                                         ch: '#',\n                                         spacing: Joint,\n-                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                     },\n                                     Punct {\n                                         ch: '!',\n                                         spacing: Alone,\n-                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                     },\n                                     Group {\n                                         delimiter: Bracket,\n                                         stream: TokenStream [\n                                             Ident {\n                                                 ident: \"cfg\",\n-                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                             },\n                                             Group {\n                                                 delimiter: Parenthesis,\n                                                 stream: TokenStream [\n                                                     Ident {\n                                                         ident: \"not\",\n-                                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                                     },\n                                                     Group {\n                                                         delimiter: Parenthesis,\n                                                         stream: TokenStream [\n                                                             Ident {\n                                                                 ident: \"FALSE\",\n-                                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                                             },\n                                                         ],\n-                                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                                     },\n                                                 ],\n-                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                             },\n                                         ],\n-                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                     },\n                                     Ident {\n                                         ident: \"let\",\n-                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                     },\n                                     Ident {\n                                         ident: \"my_val\",\n-                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                     },\n                                     Punct {\n                                         ch: '=',\n                                         spacing: Alone,\n-                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                     },\n                                     Ident {\n                                         ident: \"true\",\n-                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                     },\n                                     Punct {\n                                         ch: ';',\n                                         spacing: Alone,\n-                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                     },\n                                 ],\n-                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                             },\n                             Ident {\n                                 ident: \"enum\",\n-                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                             },\n                             Ident {\n                                 ident: \"TupleEnum\",\n-                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                             },\n                             Group {\n                                 delimiter: Brace,\n                                 stream: TokenStream [\n                                     Ident {\n                                         ident: \"Foo\",\n-                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                     },\n                                     Group {\n                                         delimiter: Parenthesis,\n                                         stream: TokenStream [\n                                             Punct {\n                                                 ch: '#',\n                                                 spacing: Alone,\n-                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                             },\n                                             Group {\n                                                 delimiter: Bracket,\n                                                 stream: TokenStream [\n                                                     Ident {\n                                                         ident: \"cfg\",\n-                                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                                     },\n                                                     Group {\n                                                         delimiter: Parenthesis,\n                                                         stream: TokenStream [\n                                                             Ident {\n                                                                 ident: \"not\",\n-                                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                                             },\n                                                             Group {\n                                                                 delimiter: Parenthesis,\n                                                                 stream: TokenStream [\n                                                                     Ident {\n                                                                         ident: \"FALSE\",\n-                                                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                                                     },\n                                                                 ],\n-                                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                                             },\n                                                         ],\n-                                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                                     },\n                                                 ],\n-                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                             },\n                                             Ident {\n                                                 ident: \"i32\",\n-                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                             },\n                                             Punct {\n                                                 ch: ',',\n                                                 spacing: Alone,\n-                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                             },\n                                             Ident {\n                                                 ident: \"u8\",\n-                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                             },\n                                         ],\n-                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                     },\n                                     Punct {\n                                         ch: ',',\n                                         spacing: Alone,\n-                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                     },\n                                 ],\n-                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                             },\n                             Ident {\n                                 ident: \"struct\",\n-                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                             },\n                             Ident {\n                                 ident: \"TupleStruct\",\n-                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                             },\n                             Group {\n                                 delimiter: Parenthesis,\n                                 stream: TokenStream [\n                                     Punct {\n                                         ch: '#',\n                                         spacing: Alone,\n-                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                     },\n                                     Group {\n                                         delimiter: Bracket,\n                                         stream: TokenStream [\n                                             Ident {\n                                                 ident: \"cfg\",\n-                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                             },\n                                             Group {\n                                                 delimiter: Parenthesis,\n                                                 stream: TokenStream [\n                                                     Ident {\n                                                         ident: \"not\",\n-                                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                                     },\n                                                     Group {\n                                                         delimiter: Parenthesis,\n                                                         stream: TokenStream [\n                                                             Ident {\n                                                                 ident: \"FALSE\",\n-                                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                                             },\n                                                         ],\n-                                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                                     },\n                                                 ],\n-                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                             },\n                                         ],\n-                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                     },\n                                     Ident {\n                                         ident: \"i32\",\n-                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                     },\n                                     Punct {\n                                         ch: ',',\n                                         spacing: Alone,\n-                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                     },\n                                     Ident {\n                                         ident: \"u8\",\n-                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                                     },\n                                 ],\n-                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                             },\n                             Punct {\n                                 ch: ';',\n                                 spacing: Alone,\n-                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                             },\n                             Literal {\n                                 kind: Integer,\n                                 symbol: \"0\",\n                                 suffix: None,\n-                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                             },\n                         ],\n-                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                     },\n                 ],\n-                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n             },\n             Punct {\n                 ch: ',',\n                 spacing: Alone,\n-                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n             },\n             Punct {\n                 ch: '#',\n                 spacing: Alone,\n-                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n             },\n             Group {\n                 delimiter: Bracket,\n                 stream: TokenStream [\n                     Ident {\n                         ident: \"print_helper\",\n-                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                     },\n                     Group {\n                         delimiter: Parenthesis,\n                         stream: TokenStream [\n                             Ident {\n                                 ident: \"d\",\n-                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                             },\n                         ],\n-                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n                     },\n                 ],\n-                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n             },\n             Ident {\n                 ident: \"fourth\",\n-                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n             },\n             Punct {\n                 ch: ':',\n                 spacing: Alone,\n-                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n             },\n             Ident {\n                 ident: \"B\",\n-                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n             },\n             Punct {\n                 ch: ',',\n                 spacing: Alone,\n-                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n             },\n         ],\n-        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+        span: $DIR/issue-75930-derive-cfg.rs:21:1: 64:2 (#0),\n     },\n ]"}, {"sha": "40da5aa93bfa848906b64ac3c692d4c3f7f52420", "filename": "src/test/ui/proc-macro/issue-78675-captured-inner-attrs.stdout", "status": "modified", "additions": 9, "deletions": 9, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/0dab0763586bdcc131d775033d010495a7bacc60/src%2Ftest%2Fui%2Fproc-macro%2Fissue-78675-captured-inner-attrs.stdout", "raw_url": "https://github.com/rust-lang/rust/raw/0dab0763586bdcc131d775033d010495a7bacc60/src%2Ftest%2Fui%2Fproc-macro%2Fissue-78675-captured-inner-attrs.stdout", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Fissue-78675-captured-inner-attrs.stdout?ref=0dab0763586bdcc131d775033d010495a7bacc60", "patch": "@@ -34,48 +34,48 @@ PRINT-BANG INPUT (DEBUG): TokenStream [\n                 stream: TokenStream [\n                     Ident {\n                         ident: \"mod\",\n-                        span: $DIR/issue-78675-captured-inner-attrs.rs:22:13: 22:18 (#4),\n+                        span: $DIR/issue-78675-captured-inner-attrs.rs:27:5: 29:6 (#0),\n                     },\n                     Ident {\n                         ident: \"bar\",\n-                        span: $DIR/issue-78675-captured-inner-attrs.rs:22:13: 22:18 (#4),\n+                        span: $DIR/issue-78675-captured-inner-attrs.rs:27:5: 29:6 (#0),\n                     },\n                     Group {\n                         delimiter: Brace,\n                         stream: TokenStream [\n                             Punct {\n                                 ch: '#',\n                                 spacing: Joint,\n-                                span: $DIR/issue-78675-captured-inner-attrs.rs:22:13: 22:18 (#4),\n+                                span: $DIR/issue-78675-captured-inner-attrs.rs:27:5: 29:6 (#0),\n                             },\n                             Punct {\n                                 ch: '!',\n                                 spacing: Alone,\n-                                span: $DIR/issue-78675-captured-inner-attrs.rs:22:13: 22:18 (#4),\n+                                span: $DIR/issue-78675-captured-inner-attrs.rs:27:5: 29:6 (#0),\n                             },\n                             Group {\n                                 delimiter: Bracket,\n                                 stream: TokenStream [\n                                     Ident {\n                                         ident: \"doc\",\n-                                        span: $DIR/issue-78675-captured-inner-attrs.rs:22:13: 22:18 (#4),\n+                                        span: $DIR/issue-78675-captured-inner-attrs.rs:27:5: 29:6 (#0),\n                                     },\n                                     Punct {\n                                         ch: '=',\n                                         spacing: Alone,\n-                                        span: $DIR/issue-78675-captured-inner-attrs.rs:22:13: 22:18 (#4),\n+                                        span: $DIR/issue-78675-captured-inner-attrs.rs:27:5: 29:6 (#0),\n                                     },\n                                     Literal {\n                                         kind: StrRaw(0),\n                                         symbol: \" Foo\",\n                                         suffix: None,\n-                                        span: $DIR/issue-78675-captured-inner-attrs.rs:22:13: 22:18 (#4),\n+                                        span: $DIR/issue-78675-captured-inner-attrs.rs:27:5: 29:6 (#0),\n                                     },\n                                 ],\n-                                span: $DIR/issue-78675-captured-inner-attrs.rs:22:13: 22:18 (#4),\n+                                span: $DIR/issue-78675-captured-inner-attrs.rs:27:5: 29:6 (#0),\n                             },\n                         ],\n-                        span: $DIR/issue-78675-captured-inner-attrs.rs:22:13: 22:18 (#4),\n+                        span: $DIR/issue-78675-captured-inner-attrs.rs:27:5: 29:6 (#0),\n                     },\n                 ],\n                 span: $DIR/issue-78675-captured-inner-attrs.rs:22:13: 22:18 (#4),"}]}