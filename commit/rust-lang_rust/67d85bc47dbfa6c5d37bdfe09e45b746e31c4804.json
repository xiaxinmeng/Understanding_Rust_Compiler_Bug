{"sha": "67d85bc47dbfa6c5d37bdfe09e45b746e31c4804", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY3ZDg1YmM0N2RiZmE2YzVkMzdiZGZlMDllNDViNzQ2ZTMxYzQ4MDQ=", "commit": {"author": {"name": "Philipp Krones", "email": "hello@philkrones.com", "date": "2018-09-28T13:26:50Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2018-09-28T13:26:50Z"}, "message": "Merge pull request #3224 from matthiaskrgr/clippy_self__use_self\n\nfix some clippy::pedantic warnings found in the codebase.", "tree": {"sha": "7012d928a6a56bf85d7a5992cb2eedd14d7d8ad8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7012d928a6a56bf85d7a5992cb2eedd14d7d8ad8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/67d85bc47dbfa6c5d37bdfe09e45b746e31c4804", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJbriwaCRBK7hj4Ov3rIwAAdHIIAEzSn3Xyaiyk2+yd+W2Nv4mX\n/AONanC4AmUi0LQRZaRJOOCJiErIWU71otLjTOaymmTo1AL3j0/Ao6NQvVqanUDW\nyhfzesjHOBweOMV93uwcsHHnrrQs2B2ZyhYmQ1K3J7T+kuCDHHI2J2hF+s1kOU4b\nMRF9uMVpQw6KmNv0nNxMZJmN3HgjcFbDat19zLdip1owBJWY4hfEVkgS2BmdqCJe\nPEIao9/Icr34CCwFxuBCIGJOG0vw4y2yKLbylTrxoItBNY0v06kgDUbQKLjk8BAn\nqZkVxPQLtrP/iaACzSFi2uCqpq6J0Lbwn9kzntMU95lZVw1l+K+GNYZJv2FEtow=\n=ORCd\n-----END PGP SIGNATURE-----\n", "payload": "tree 7012d928a6a56bf85d7a5992cb2eedd14d7d8ad8\nparent 8e808664fa0148e983f7b1ed1d5696454a3c026d\nparent 9fae4693f9d3a7f4e5784b81f726d22c7cd5cb2f\nauthor Philipp Krones <hello@philkrones.com> 1538141210 +0200\ncommitter GitHub <noreply@github.com> 1538141210 +0200\n\nMerge pull request #3224 from matthiaskrgr/clippy_self__use_self\n\nfix some clippy::pedantic warnings found in the codebase."}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/67d85bc47dbfa6c5d37bdfe09e45b746e31c4804", "html_url": "https://github.com/rust-lang/rust/commit/67d85bc47dbfa6c5d37bdfe09e45b746e31c4804", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/67d85bc47dbfa6c5d37bdfe09e45b746e31c4804/comments", "author": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8e808664fa0148e983f7b1ed1d5696454a3c026d", "url": "https://api.github.com/repos/rust-lang/rust/commits/8e808664fa0148e983f7b1ed1d5696454a3c026d", "html_url": "https://github.com/rust-lang/rust/commit/8e808664fa0148e983f7b1ed1d5696454a3c026d"}, {"sha": "9fae4693f9d3a7f4e5784b81f726d22c7cd5cb2f", "url": "https://api.github.com/repos/rust-lang/rust/commits/9fae4693f9d3a7f4e5784b81f726d22c7cd5cb2f", "html_url": "https://github.com/rust-lang/rust/commit/9fae4693f9d3a7f4e5784b81f726d22c7cd5cb2f"}], "stats": {"total": 40, "additions": 19, "deletions": 21}, "files": [{"sha": "2f91c987cb169f453a0e0fcc6d5887f1b0eaeefc", "filename": "clippy_dev/src/lib.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/67d85bc47dbfa6c5d37bdfe09e45b746e31c4804/clippy_dev%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/67d85bc47dbfa6c5d37bdfe09e45b746e31c4804/clippy_dev%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_dev%2Fsrc%2Flib.rs?ref=67d85bc47dbfa6c5d37bdfe09e45b746e31c4804", "patch": "@@ -35,8 +35,8 @@ pub struct Lint {\n }\n \n impl Lint {\n-    pub fn new(name: &str, group: &str, desc: &str, deprecation: Option<&str>, module: &str) -> Lint {\n-        Lint {\n+    pub fn new(name: &str, group: &str, desc: &str, deprecation: Option<&str>, module: &str) -> Self {\n+        Self {\n             name: name.to_lowercase(),\n             group: group.to_string(),\n             desc: NL_ESCAPE_RE.replace(&desc.replace(\"\\\\\\\"\", \"\\\"\"), \"\").to_string(),\n@@ -46,12 +46,12 @@ impl Lint {\n     }\n \n     /// Returns all non-deprecated lints\n-    pub fn active_lints(lints: &[Lint]) -> impl Iterator<Item=&Lint> {\n+    pub fn active_lints(lints: &[Self]) -> impl Iterator<Item=&Self> {\n         lints.iter().filter(|l| l.deprecation.is_none())\n     }\n \n     /// Returns the lints in a HashMap, grouped by the different lint groups\n-    pub fn by_lint_group(lints: &[Lint]) -> HashMap<String, Vec<Lint>> {\n+    pub fn by_lint_group(lints: &[Self]) -> HashMap<String, Vec<Self>> {\n         lints.iter().map(|lint| (lint.group.to_string(), lint.clone())).into_group_map()\n     }\n }"}, {"sha": "0690d6934e51c8130de518a7275adefbfc84369d", "filename": "clippy_lints/src/consts.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/67d85bc47dbfa6c5d37bdfe09e45b746e31c4804/clippy_lints%2Fsrc%2Fconsts.rs", "raw_url": "https://github.com/rust-lang/rust/raw/67d85bc47dbfa6c5d37bdfe09e45b746e31c4804/clippy_lints%2Fsrc%2Fconsts.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fconsts.rs?ref=67d85bc47dbfa6c5d37bdfe09e45b746e31c4804", "patch": "@@ -123,11 +123,11 @@ impl Constant {\n             (&Constant::Tuple(ref l), &Constant::Tuple(ref r)) | (&Constant::Vec(ref l), &Constant::Vec(ref r)) => l\n                 .iter()\n                 .zip(r.iter())\n-                .map(|(li, ri)| Constant::partial_cmp(tcx, cmp_type, li, ri))\n+                .map(|(li, ri)| Self::partial_cmp(tcx, cmp_type, li, ri))\n                 .find(|r| r.map_or(true, |o| o != Ordering::Equal))\n                 .unwrap_or_else(|| Some(l.len().cmp(&r.len()))),\n             (&Constant::Repeat(ref lv, ref ls), &Constant::Repeat(ref rv, ref rs)) => {\n-                match Constant::partial_cmp(tcx, cmp_type, lv, rv) {\n+                match Self::partial_cmp(tcx, cmp_type, lv, rv) {\n                     Some(Equal) => Some(ls.cmp(rs)),\n                     x => x,\n                 }"}, {"sha": "709cbd277549a651a786baadfd2449bf6360db95", "filename": "clippy_lints/src/duration_subsec.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/67d85bc47dbfa6c5d37bdfe09e45b746e31c4804/clippy_lints%2Fsrc%2Fduration_subsec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/67d85bc47dbfa6c5d37bdfe09e45b746e31c4804/clippy_lints%2Fsrc%2Fduration_subsec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fduration_subsec.rs?ref=67d85bc47dbfa6c5d37bdfe09e45b746e31c4804", "patch": "@@ -46,9 +46,8 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for DurationSubsec {\n             if let Some((Constant::Int(divisor), _)) = constant(cx, cx.tables, right);\n             then {\n                 let suggested_fn = match (method_path.ident.as_str().as_ref(), divisor) {\n-                    (\"subsec_micros\", 1_000) => \"subsec_millis\",\n+                    (\"subsec_micros\", 1_000) | (\"subsec_nanos\", 1_000_000) => \"subsec_millis\",\n                     (\"subsec_nanos\", 1_000) => \"subsec_micros\",\n-                    (\"subsec_nanos\", 1_000_000) => \"subsec_millis\",\n                     _ => return,\n                 };\n                 span_lint_and_sugg("}, {"sha": "167259b73538df66bbf5ead10c5372a24133de1c", "filename": "clippy_lints/src/inherent_impl.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/67d85bc47dbfa6c5d37bdfe09e45b746e31c4804/clippy_lints%2Fsrc%2Finherent_impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/67d85bc47dbfa6c5d37bdfe09e45b746e31c4804/clippy_lints%2Fsrc%2Finherent_impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Finherent_impl.rs?ref=67d85bc47dbfa6c5d37bdfe09e45b746e31c4804", "patch": "@@ -46,7 +46,7 @@ pub struct Pass {\n \n impl Default for Pass {\n     fn default() -> Self {\n-        Pass { impls: FxHashMap::default() }\n+        Self { impls: FxHashMap::default() }\n     }\n }\n "}, {"sha": "9c10a929d6f1de9c0edbcb5dbfb40ac097547826", "filename": "clippy_lints/src/multiple_crate_versions.rs", "status": "modified", "additions": 10, "deletions": 11, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/67d85bc47dbfa6c5d37bdfe09e45b746e31c4804/clippy_lints%2Fsrc%2Fmultiple_crate_versions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/67d85bc47dbfa6c5d37bdfe09e45b746e31c4804/clippy_lints%2Fsrc%2Fmultiple_crate_versions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmultiple_crate_versions.rs?ref=67d85bc47dbfa6c5d37bdfe09e45b746e31c4804", "patch": "@@ -41,18 +41,17 @@ impl LintPass for Pass {\n \n impl EarlyLintPass for Pass {\n     fn check_crate(&mut self, cx: &EarlyContext<'_>, krate: &Crate) {\n-        let metadata = match cargo_metadata::metadata_deps(None, true) {\n-            Ok(metadata) => metadata,\n-            Err(_) => {\n-                span_lint(\n-                    cx,\n-                    MULTIPLE_CRATE_VERSIONS,\n-                    krate.span,\n-                    \"could not read cargo metadata\"\n-                );\n+        let metadata = if let Ok(metadata) = cargo_metadata::metadata_deps(None, true) {\n+            metadata\n+        } else {\n+            span_lint(\n+                cx,\n+                MULTIPLE_CRATE_VERSIONS,\n+                krate.span,\n+                \"could not read cargo metadata\"\n+            );\n \n-                return;\n-            }\n+            return;\n         };\n \n         let mut packages = metadata.packages;"}, {"sha": "d79a7743e0f82cdb6d48a4fe17062f3e942591d7", "filename": "clippy_lints/src/utils/conf.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/67d85bc47dbfa6c5d37bdfe09e45b746e31c4804/clippy_lints%2Fsrc%2Futils%2Fconf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/67d85bc47dbfa6c5d37bdfe09e45b746e31c4804/clippy_lints%2Fsrc%2Futils%2Fconf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fconf.rs?ref=67d85bc47dbfa6c5d37bdfe09e45b746e31c4804", "patch": "@@ -148,7 +148,7 @@ define_Conf! {\n }\n \n impl Default for Conf {\n-    fn default() -> Conf {\n+    fn default() -> Self {\n         toml::from_str(\"\").expect(\"we never error on empty config files\")\n     }\n }"}]}