{"sha": "b100c02fae6853a102601a46005ef097e2384062", "node_id": "C_kwDOAAsO6NoAKGIxMDBjMDJmYWU2ODUzYTEwMjYwMWE0NjAwNWVmMDk3ZTIzODQwNjI", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-04-22T16:56:25Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-04-22T16:56:25Z"}, "message": "Rollup merge of #96273 - TaKO8Ki:make-E0117-error-clear, r=davidtwco\n\nMake `E0117` error clear\n\ncloses #96227", "tree": {"sha": "c0f7fd589dc11d920e5ccfc7b9df918afa8c1834", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c0f7fd589dc11d920e5ccfc7b9df918afa8c1834"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b100c02fae6853a102601a46005ef097e2384062", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJiYt45CRBK7hj4Ov3rIwAA+ecIACzZPHQaCgdNZ2uWkLRv3w8u\nip9NUvLfE3/wIu+JXRbHVua8twxhmV2i8aMarVDy29HjWO63+iEPfcJGldi0s2qD\nnNLKRhgHWDXO1LO6uKAWq1zcXS+rb/uwGArpwX1C/Rh8/8h3OwMC2s4N94YQdg4v\n84EPFxm2HoUSV777osWk3YxpWvpxJBiu2R18dMNlYrTSDxAK/gpD8b1hgzNjQEjD\n0Vp298OucdXBgYtrZnOqQnC4ernS2/CI+FYDNoutkUH2XUiViK8RTjRz6SNuXfHy\n678ex5lEvndgcntDX62HyrHqbqF/y6T04CEBtYfPgYlyhvgyCUAoI3xZQKEsDuw=\n=KyrI\n-----END PGP SIGNATURE-----\n", "payload": "tree c0f7fd589dc11d920e5ccfc7b9df918afa8c1834\nparent 98346744ac772bbe20163108c751754ebad33ecf\nparent f5a8ee4dd84b4d3b6b53adedbd2b9ac3b0d09df8\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1650646585 +0200\ncommitter GitHub <noreply@github.com> 1650646585 +0200\n\nRollup merge of #96273 - TaKO8Ki:make-E0117-error-clear, r=davidtwco\n\nMake `E0117` error clear\n\ncloses #96227\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b100c02fae6853a102601a46005ef097e2384062", "html_url": "https://github.com/rust-lang/rust/commit/b100c02fae6853a102601a46005ef097e2384062", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b100c02fae6853a102601a46005ef097e2384062/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "98346744ac772bbe20163108c751754ebad33ecf", "url": "https://api.github.com/repos/rust-lang/rust/commits/98346744ac772bbe20163108c751754ebad33ecf", "html_url": "https://github.com/rust-lang/rust/commit/98346744ac772bbe20163108c751754ebad33ecf"}, {"sha": "f5a8ee4dd84b4d3b6b53adedbd2b9ac3b0d09df8", "url": "https://api.github.com/repos/rust-lang/rust/commits/f5a8ee4dd84b4d3b6b53adedbd2b9ac3b0d09df8", "html_url": "https://github.com/rust-lang/rust/commit/f5a8ee4dd84b4d3b6b53adedbd2b9ac3b0d09df8"}], "stats": {"total": 66, "additions": 36, "deletions": 30}, "files": [{"sha": "19e68f0b14f4f23934dba64e53f2a41e36a521d7", "filename": "compiler/rustc_typeck/src/coherence/orphan.rs", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/b100c02fae6853a102601a46005ef097e2384062/compiler%2Frustc_typeck%2Fsrc%2Fcoherence%2Forphan.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b100c02fae6853a102601a46005ef097e2384062/compiler%2Frustc_typeck%2Fsrc%2Fcoherence%2Forphan.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_typeck%2Fsrc%2Fcoherence%2Forphan.rs?ref=b100c02fae6853a102601a46005ef097e2384062", "patch": "@@ -50,6 +50,7 @@ fn orphan_check_impl(tcx: TyCtxt<'_>, def_id: LocalDefId) -> Result<(), ErrorGua\n             tcx,\n             sp,\n             tr.path.span,\n+            trait_ref.self_ty(),\n             impl_.self_ty.span,\n             &impl_.generics,\n             err,\n@@ -201,18 +202,23 @@ fn emit_orphan_check_error<'tcx>(\n     tcx: TyCtxt<'tcx>,\n     sp: Span,\n     trait_span: Span,\n+    self_ty: Ty<'tcx>,\n     self_ty_span: Span,\n     generics: &hir::Generics<'tcx>,\n     err: traits::OrphanCheckErr<'tcx>,\n ) -> Result<!, ErrorGuaranteed> {\n     Err(match err {\n         traits::OrphanCheckErr::NonLocalInputType(tys) => {\n+            let msg = match self_ty.kind() {\n+                ty::Adt(..) => \"can be implemented for types defined outside of the crate\",\n+                _ if self_ty.is_primitive() => \"can be implemented for primitive types\",\n+                _ => \"can be implemented for arbitrary types\",\n+            };\n             let mut err = struct_span_err!(\n                 tcx.sess,\n                 sp,\n                 E0117,\n-                \"only traits defined in the current crate can be implemented for \\\n-                        arbitrary types\"\n+                \"only traits defined in the current crate {msg}\"\n             );\n             err.span_label(sp, \"impl doesn't use only types from inside the current crate\");\n             for (ty, is_target_ty) in &tys {"}, {"sha": "fe4b5b410789572e32aaae7e0a003c16eb51df1e", "filename": "src/test/ui/coherence/coherence-cow.re_a.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-cow.re_a.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-cow.re_a.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-cow.re_a.stderr?ref=b100c02fae6853a102601a46005ef097e2384062", "patch": "@@ -1,4 +1,4 @@\n-error[E0117]: only traits defined in the current crate can be implemented for arbitrary types\n+error[E0117]: only traits defined in the current crate can be implemented for types defined outside of the crate\n   --> $DIR/coherence-cow.rs:18:1\n    |\n LL | impl<T> Remote for Pair<T,Cover<T>> { }"}, {"sha": "da4ede3251ed83729fcfddde25d482c2b91df15b", "filename": "src/test/ui/coherence/coherence-cow.re_b.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-cow.re_b.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-cow.re_b.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-cow.re_b.stderr?ref=b100c02fae6853a102601a46005ef097e2384062", "patch": "@@ -1,4 +1,4 @@\n-error[E0117]: only traits defined in the current crate can be implemented for arbitrary types\n+error[E0117]: only traits defined in the current crate can be implemented for types defined outside of the crate\n   --> $DIR/coherence-cow.rs:22:1\n    |\n LL | impl<T> Remote for Pair<Cover<T>,T> { }"}, {"sha": "d1a20c0ca101b99e1f597e1957438ba5c72edc8c", "filename": "src/test/ui/coherence/coherence-cow.re_c.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-cow.re_c.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-cow.re_c.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-cow.re_c.stderr?ref=b100c02fae6853a102601a46005ef097e2384062", "patch": "@@ -1,4 +1,4 @@\n-error[E0117]: only traits defined in the current crate can be implemented for arbitrary types\n+error[E0117]: only traits defined in the current crate can be implemented for types defined outside of the crate\n   --> $DIR/coherence-cow.rs:26:1\n    |\n LL | impl<T,U> Remote for Pair<Cover<T>,U> { }"}, {"sha": "b3ca354c633aade9e89e5bfa9d21eba1407121a2", "filename": "src/test/ui/coherence/coherence-impls-copy.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-impls-copy.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-impls-copy.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-impls-copy.stderr?ref=b100c02fae6853a102601a46005ef097e2384062", "patch": "@@ -1,4 +1,4 @@\n-error[E0117]: only traits defined in the current crate can be implemented for arbitrary types\n+error[E0117]: only traits defined in the current crate can be implemented for primitive types\n   --> $DIR/coherence-impls-copy.rs:5:1\n    |\n LL | impl Copy for i32 {}"}, {"sha": "01f166a21f7683aee5f4d7678f0ec5d598eb30dd", "filename": "src/test/ui/coherence/coherence-orphan.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-orphan.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-orphan.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-orphan.stderr?ref=b100c02fae6853a102601a46005ef097e2384062", "patch": "@@ -1,4 +1,4 @@\n-error[E0117]: only traits defined in the current crate can be implemented for arbitrary types\n+error[E0117]: only traits defined in the current crate can be implemented for primitive types\n   --> $DIR/coherence-orphan.rs:10:1\n    |\n LL | impl TheTrait<usize> for isize { }\n@@ -10,7 +10,7 @@ LL | impl TheTrait<usize> for isize { }\n    |\n    = note: define and implement a trait or new type instead\n \n-error[E0117]: only traits defined in the current crate can be implemented for arbitrary types\n+error[E0117]: only traits defined in the current crate can be implemented for types defined outside of the crate\n   --> $DIR/coherence-orphan.rs:17:1\n    |\n LL | impl !Send for Vec<isize> { }"}, {"sha": "15c92dfeb07d73d26bc9ab2b6961c5fa5d2a2e07", "filename": "src/test/ui/coherence/coherence-overlapping-pairs.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-overlapping-pairs.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-overlapping-pairs.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-overlapping-pairs.stderr?ref=b100c02fae6853a102601a46005ef097e2384062", "patch": "@@ -1,4 +1,4 @@\n-error[E0117]: only traits defined in the current crate can be implemented for arbitrary types\n+error[E0117]: only traits defined in the current crate can be implemented for types defined outside of the crate\n   --> $DIR/coherence-overlapping-pairs.rs:8:1\n    |\n LL | impl<T> Remote for lib::Pair<T,Foo> { }"}, {"sha": "03d787123812874dd36776e8534131e79af04800", "filename": "src/test/ui/coherence/coherence-pair-covered-uncovered-1.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-pair-covered-uncovered-1.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-pair-covered-uncovered-1.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-pair-covered-uncovered-1.stderr?ref=b100c02fae6853a102601a46005ef097e2384062", "patch": "@@ -1,4 +1,4 @@\n-error[E0117]: only traits defined in the current crate can be implemented for arbitrary types\n+error[E0117]: only traits defined in the current crate can be implemented for primitive types\n   --> $DIR/coherence-pair-covered-uncovered-1.rs:12:1\n    |\n LL | impl<T, U> Remote1<Pair<T, Local<U>>> for i32 { }"}, {"sha": "73dfe2f572ae3e205c55d8b85d6566401f23b3ac", "filename": "src/test/ui/coherence/coherence-pair-covered-uncovered.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-pair-covered-uncovered.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-pair-covered-uncovered.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-pair-covered-uncovered.stderr?ref=b100c02fae6853a102601a46005ef097e2384062", "patch": "@@ -1,4 +1,4 @@\n-error[E0117]: only traits defined in the current crate can be implemented for arbitrary types\n+error[E0117]: only traits defined in the current crate can be implemented for types defined outside of the crate\n   --> $DIR/coherence-pair-covered-uncovered.rs:8:1\n    |\n LL | impl<T,U> Remote for Pair<T,Local<U>> { }"}, {"sha": "95fdf172ec255404e54378bd1dcb6837b7c8d48d", "filename": "src/test/ui/coherence/coherence-vec-local-2.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-vec-local-2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-vec-local-2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-vec-local-2.stderr?ref=b100c02fae6853a102601a46005ef097e2384062", "patch": "@@ -1,4 +1,4 @@\n-error[E0117]: only traits defined in the current crate can be implemented for arbitrary types\n+error[E0117]: only traits defined in the current crate can be implemented for types defined outside of the crate\n   --> $DIR/coherence-vec-local-2.rs:11:1\n    |\n LL | impl<T> Remote for Vec<Local<T>> { }"}, {"sha": "4835e771abd3bf807d77609c75e175ba9097063c", "filename": "src/test/ui/coherence/coherence-vec-local.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-vec-local.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-vec-local.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-vec-local.stderr?ref=b100c02fae6853a102601a46005ef097e2384062", "patch": "@@ -1,4 +1,4 @@\n-error[E0117]: only traits defined in the current crate can be implemented for arbitrary types\n+error[E0117]: only traits defined in the current crate can be implemented for types defined outside of the crate\n   --> $DIR/coherence-vec-local.rs:11:1\n    |\n LL | impl Remote for Vec<Local> { }"}, {"sha": "afc6fc45d0e03f890f5e9c5c020c2fd68f9c7bb4", "filename": "src/test/ui/coherence/coherence_local_err_struct.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Fcoherence%2Fcoherence_local_err_struct.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Fcoherence%2Fcoherence_local_err_struct.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fcoherence_local_err_struct.stderr?ref=b100c02fae6853a102601a46005ef097e2384062", "patch": "@@ -1,4 +1,4 @@\n-error[E0117]: only traits defined in the current crate can be implemented for arbitrary types\n+error[E0117]: only traits defined in the current crate can be implemented for types defined outside of the crate\n   --> $DIR/coherence_local_err_struct.rs:14:1\n    |\n LL | impl lib::MyCopy for lib::MyStruct<MyType> { }"}, {"sha": "93f7a6fdc25d34eb43be6bb0832b416fd415e6da", "filename": "src/test/ui/coherence/impl-foreign-for-foreign.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Fcoherence%2Fimpl-foreign-for-foreign.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Fcoherence%2Fimpl-foreign-for-foreign.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fimpl-foreign-for-foreign.stderr?ref=b100c02fae6853a102601a46005ef097e2384062", "patch": "@@ -1,4 +1,4 @@\n-error[E0117]: only traits defined in the current crate can be implemented for arbitrary types\n+error[E0117]: only traits defined in the current crate can be implemented for primitive types\n   --> $DIR/impl-foreign-for-foreign.rs:10:1\n    |\n LL | impl Remote for i32 {"}, {"sha": "e24537bce229a5f4942b6306a06c48efb599c9ef", "filename": "src/test/ui/coherence/impl-foreign-for-foreign[foreign].stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Fcoherence%2Fimpl-foreign-for-foreign%5Bforeign%5D.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Fcoherence%2Fimpl-foreign-for-foreign%5Bforeign%5D.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fimpl-foreign-for-foreign%5Bforeign%5D.stderr?ref=b100c02fae6853a102601a46005ef097e2384062", "patch": "@@ -1,4 +1,4 @@\n-error[E0117]: only traits defined in the current crate can be implemented for arbitrary types\n+error[E0117]: only traits defined in the current crate can be implemented for primitive types\n   --> $DIR/impl-foreign-for-foreign[foreign].rs:10:1\n    |\n LL | impl Remote1<Rc<i32>> for i32 {\n@@ -10,7 +10,7 @@ LL | impl Remote1<Rc<i32>> for i32 {\n    |\n    = note: define and implement a trait or new type instead\n \n-error[E0117]: only traits defined in the current crate can be implemented for arbitrary types\n+error[E0117]: only traits defined in the current crate can be implemented for primitive types\n   --> $DIR/impl-foreign-for-foreign[foreign].rs:14:1\n    |\n LL | impl Remote1<Rc<Local>> for f64 {\n@@ -22,7 +22,7 @@ LL | impl Remote1<Rc<Local>> for f64 {\n    |\n    = note: define and implement a trait or new type instead\n \n-error[E0117]: only traits defined in the current crate can be implemented for arbitrary types\n+error[E0117]: only traits defined in the current crate can be implemented for primitive types\n   --> $DIR/impl-foreign-for-foreign[foreign].rs:18:1\n    |\n LL | impl<T> Remote1<Rc<T>> for f32 {"}, {"sha": "55ea4409e6f362f9b7037308b3298b9f61359d16", "filename": "src/test/ui/coherence/impl-foreign-for-fundamental[foreign].stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Fcoherence%2Fimpl-foreign-for-fundamental%5Bforeign%5D.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Fcoherence%2Fimpl-foreign-for-fundamental%5Bforeign%5D.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fimpl-foreign-for-fundamental%5Bforeign%5D.stderr?ref=b100c02fae6853a102601a46005ef097e2384062", "patch": "@@ -1,4 +1,4 @@\n-error[E0117]: only traits defined in the current crate can be implemented for arbitrary types\n+error[E0117]: only traits defined in the current crate can be implemented for types defined outside of the crate\n   --> $DIR/impl-foreign-for-fundamental[foreign].rs:10:1\n    |\n LL | impl Remote for Box<i32> {\n@@ -10,7 +10,7 @@ LL | impl Remote for Box<i32> {\n    |\n    = note: define and implement a trait or new type instead\n \n-error[E0117]: only traits defined in the current crate can be implemented for arbitrary types\n+error[E0117]: only traits defined in the current crate can be implemented for types defined outside of the crate\n   --> $DIR/impl-foreign-for-fundamental[foreign].rs:14:1\n    |\n LL | impl<T> Remote for Box<Rc<T>> {"}, {"sha": "65b3aa394a85f756e942841fa000c0d0822c0f6e", "filename": "src/test/ui/coherence/impl-foreign[foreign]-for-foreign.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Fcoherence%2Fimpl-foreign%5Bforeign%5D-for-foreign.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Fcoherence%2Fimpl-foreign%5Bforeign%5D-for-foreign.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fimpl-foreign%5Bforeign%5D-for-foreign.stderr?ref=b100c02fae6853a102601a46005ef097e2384062", "patch": "@@ -1,4 +1,4 @@\n-error[E0117]: only traits defined in the current crate can be implemented for arbitrary types\n+error[E0117]: only traits defined in the current crate can be implemented for primitive types\n   --> $DIR/impl-foreign[foreign]-for-foreign.rs:10:1\n    |\n LL | impl Remote1<u32> for f64 {"}, {"sha": "8e77c13e1116aef74a36dcd8f9fe2542d5bc2277", "filename": "src/test/ui/coherence/impl-foreign[fundemental[foreign]]-for-foreign.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Fcoherence%2Fimpl-foreign%5Bfundemental%5Bforeign%5D%5D-for-foreign.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Fcoherence%2Fimpl-foreign%5Bfundemental%5Bforeign%5D%5D-for-foreign.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fimpl-foreign%5Bfundemental%5Bforeign%5D%5D-for-foreign.stderr?ref=b100c02fae6853a102601a46005ef097e2384062", "patch": "@@ -1,4 +1,4 @@\n-error[E0117]: only traits defined in the current crate can be implemented for arbitrary types\n+error[E0117]: only traits defined in the current crate can be implemented for primitive types\n   --> $DIR/impl-foreign[fundemental[foreign]]-for-foreign.rs:11:1\n    |\n LL | impl Remote1<Box<String>> for i32 {\n@@ -11,7 +11,7 @@ LL | impl Remote1<Box<String>> for i32 {\n    |\n    = note: define and implement a trait or new type instead\n \n-error[E0117]: only traits defined in the current crate can be implemented for arbitrary types\n+error[E0117]: only traits defined in the current crate can be implemented for primitive types\n   --> $DIR/impl-foreign[fundemental[foreign]]-for-foreign.rs:15:1\n    |\n LL | impl Remote1<Box<Rc<i32>>> for f64 {\n@@ -24,7 +24,7 @@ LL | impl Remote1<Box<Rc<i32>>> for f64 {\n    |\n    = note: define and implement a trait or new type instead\n \n-error[E0117]: only traits defined in the current crate can be implemented for arbitrary types\n+error[E0117]: only traits defined in the current crate can be implemented for primitive types\n   --> $DIR/impl-foreign[fundemental[foreign]]-for-foreign.rs:19:1\n    |\n LL | impl<T> Remote1<Box<Rc<T>>> for f32 {"}, {"sha": "92346c29198cede287a0edafea079342fd0578cb", "filename": "src/test/ui/coherence/impl[t]-foreign-for-foreign[t].stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Fcoherence%2Fimpl%5Bt%5D-foreign-for-foreign%5Bt%5D.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Fcoherence%2Fimpl%5Bt%5D-foreign-for-foreign%5Bt%5D.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fimpl%5Bt%5D-foreign-for-foreign%5Bt%5D.stderr?ref=b100c02fae6853a102601a46005ef097e2384062", "patch": "@@ -1,4 +1,4 @@\n-error[E0117]: only traits defined in the current crate can be implemented for arbitrary types\n+error[E0117]: only traits defined in the current crate can be implemented for types defined outside of the crate\n   --> $DIR/impl[t]-foreign-for-foreign[t].rs:11:1\n    |\n LL | impl Remote for Rc<Local> {\n@@ -9,7 +9,7 @@ LL | impl Remote for Rc<Local> {\n    |\n    = note: define and implement a trait or new type instead\n \n-error[E0117]: only traits defined in the current crate can be implemented for arbitrary types\n+error[E0117]: only traits defined in the current crate can be implemented for types defined outside of the crate\n   --> $DIR/impl[t]-foreign-for-foreign[t].rs:16:1\n    |\n LL | impl<T> Remote for Arc<T> {"}, {"sha": "76d9f5cc0e52a3f8cfdf2b29fd983bd08f8ed4bf", "filename": "src/test/ui/error-codes/E0117.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Ferror-codes%2FE0117.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Ferror-codes%2FE0117.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferror-codes%2FE0117.stderr?ref=b100c02fae6853a102601a46005ef097e2384062", "patch": "@@ -1,4 +1,4 @@\n-error[E0117]: only traits defined in the current crate can be implemented for arbitrary types\n+error[E0117]: only traits defined in the current crate can be implemented for primitive types\n   --> $DIR/E0117.rs:1:1\n    |\n LL | impl Drop for u32 {}"}, {"sha": "dd5099317667307c38ebaac6edae56e645610fd4", "filename": "src/test/ui/rfc-2632-const-trait-impl/const-and-non-const-impl.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-and-non-const-impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-and-non-const-impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-and-non-const-impl.rs?ref=b100c02fae6853a102601a46005ef097e2384062", "patch": "@@ -3,7 +3,7 @@\n pub struct Int(i32);\n \n impl const std::ops::Add for i32 { //~ ERROR type annotations needed\n-    //~^ ERROR only traits defined in the current crate can be implemented for arbitrary types\n+    //~^ ERROR only traits defined in the current crate can be implemented for primitive types\n     type Output = Self;\n \n     fn add(self, rhs: Self) -> Self {"}, {"sha": "9fd82196e79c11836cdd70352ced3100d967f50b", "filename": "src/test/ui/rfc-2632-const-trait-impl/const-and-non-const-impl.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-and-non-const-impl.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-and-non-const-impl.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-and-non-const-impl.stderr?ref=b100c02fae6853a102601a46005ef097e2384062", "patch": "@@ -1,4 +1,4 @@\n-error[E0117]: only traits defined in the current crate can be implemented for arbitrary types\n+error[E0117]: only traits defined in the current crate can be implemented for primitive types\n   --> $DIR/const-and-non-const-impl.rs:5:1\n    |\n LL | impl const std::ops::Add for i32 {"}, {"sha": "fc3778b796745283c6a11c7928efc1f232047b06", "filename": "src/test/ui/typeck/typeck-default-trait-impl-cross-crate-coherence.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Ftypeck%2Ftypeck-default-trait-impl-cross-crate-coherence.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b100c02fae6853a102601a46005ef097e2384062/src%2Ftest%2Fui%2Ftypeck%2Ftypeck-default-trait-impl-cross-crate-coherence.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftypeck%2Ftypeck-default-trait-impl-cross-crate-coherence.stderr?ref=b100c02fae6853a102601a46005ef097e2384062", "patch": "@@ -26,7 +26,7 @@ error[E0321]: cross-crate traits with a default impl, like `DefaultedTrait`, can\n LL | impl DefaultedTrait for Box<C> { }\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ can't implement cross-crate trait for type in another crate\n \n-error[E0117]: only traits defined in the current crate can be implemented for arbitrary types\n+error[E0117]: only traits defined in the current crate can be implemented for types defined outside of the crate\n   --> $DIR/typeck-default-trait-impl-cross-crate-coherence.rs:22:1\n    |\n LL | impl DefaultedTrait for lib::Something<C> { }"}]}