{"sha": "13bba763f52114455725de7df12dd85bf107b22e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjEzYmJhNzYzZjUyMTE0NDU1NzI1ZGU3ZGYxMmRkODViZjEwN2IyMmU=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2015-06-09T17:00:25Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2015-06-17T23:32:01Z"}, "message": "Add src/etc/add-authors.sh script for managing the AUTHORS.txt file\n\nThis is the kind of dumb task that gets done a different way every\ntime and is easily automated.", "tree": {"sha": "268c7b53e2e4e9d9802d33d8d00bf57124e6312d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/268c7b53e2e4e9d9802d33d8d00bf57124e6312d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/13bba763f52114455725de7df12dd85bf107b22e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/13bba763f52114455725de7df12dd85bf107b22e", "html_url": "https://github.com/rust-lang/rust/commit/13bba763f52114455725de7df12dd85bf107b22e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/13bba763f52114455725de7df12dd85bf107b22e/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bc8d862e595ffb957839aa144a2f1b5172fd3e1b", "url": "https://api.github.com/repos/rust-lang/rust/commits/bc8d862e595ffb957839aa144a2f1b5172fd3e1b", "html_url": "https://github.com/rust-lang/rust/commit/bc8d862e595ffb957839aa144a2f1b5172fd3e1b"}], "stats": {"total": 32, "additions": 32, "deletions": 0}, "files": [{"sha": "917053cc205eb0c1ec6bff0a530f72f92a88a478", "filename": "src/etc/add-authors.sh", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/13bba763f52114455725de7df12dd85bf107b22e/src%2Fetc%2Fadd-authors.sh", "raw_url": "https://github.com/rust-lang/rust/raw/13bba763f52114455725de7df12dd85bf107b22e/src%2Fetc%2Fadd-authors.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fadd-authors.sh?ref=13bba763f52114455725de7df12dd85bf107b22e", "patch": "@@ -0,0 +1,32 @@\n+#!/bin/sh\n+\n+# Copyright 2014 The Rust Project Developers. See the COPYRIGHT\n+# file at the top-level directory of this distribution and at\n+# http://rust-lang.org/COPYRIGHT.\n+#\n+# Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+# http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+# <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+# option. This file may not be copied, modified, or distributed\n+# except according to those terms.\n+\n+# This script, invoked e.g. \"add-authors.sh 1.0.0..rust-lang/master\",\n+# will merge new authors into AUTHORS.txt, obeying the mailmap\n+# file.\n+#\n+# After running this script, run `git diff` to manually inspect\n+# changes. If there are incorrect additions fix it by editing\n+# .mailmap and re-running the script.\n+\n+set -u -e\n+\n+range=\"$1\"\n+\n+authors_file=\"./AUTHORS.txt\"\n+tmp_file=\"./AUTHORS.txt.tmp\"\n+old_authors=\"$(cat \"$authors_file\" | tail -n +2 | sed \"/^$/d\" | sort)\"\n+new_authors=\"$(git log \"$range\" --format=\"%aN <%aE>\" | sort | uniq)\"\n+\n+echo \"Rust was written by these fine people:\\n\" > \"$tmp_file\"\n+echo \"$old_authors\\n$new_authors\" | sort | uniq >> \"$tmp_file\"\n+mv -f \"$tmp_file\" \"$authors_file\""}]}