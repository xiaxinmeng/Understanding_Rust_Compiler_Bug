{"sha": "9a1f52d7fd78f3dc26b49d4490e4e8004f590fc3", "node_id": "C_kwDOAAsO6NoAKDlhMWY1MmQ3ZmQ3OGYzZGMyNmI0OWQ0NDkwZTRlODAwNGY1OTBmYzM", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-06-29T21:21:46Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-06-30T14:08:45Z"}, "message": "Add test to ensure that scroll position is kept when opening/closing source sidebar", "tree": {"sha": "56cc123d9c223acb653f1341c0fb850333242af0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/56cc123d9c223acb653f1341c0fb850333242af0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9a1f52d7fd78f3dc26b49d4490e4e8004f590fc3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9a1f52d7fd78f3dc26b49d4490e4e8004f590fc3", "html_url": "https://github.com/rust-lang/rust/commit/9a1f52d7fd78f3dc26b49d4490e4e8004f590fc3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9a1f52d7fd78f3dc26b49d4490e4e8004f590fc3/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "72f6322f8a50288a4bf96c9b20935f666a889621", "url": "https://api.github.com/repos/rust-lang/rust/commits/72f6322f8a50288a4bf96c9b20935f666a889621", "html_url": "https://github.com/rust-lang/rust/commit/72f6322f8a50288a4bf96c9b20935f666a889621"}], "stats": {"total": 14, "additions": 14, "deletions": 0}, "files": [{"sha": "c441f84a82135f2960f9be78412bfccad59fc9c1", "filename": "src/test/rustdoc-gui/sidebar-source-code-display.goml", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/9a1f52d7fd78f3dc26b49d4490e4e8004f590fc3/src%2Ftest%2Frustdoc-gui%2Fsidebar-source-code-display.goml", "raw_url": "https://github.com/rust-lang/rust/raw/9a1f52d7fd78f3dc26b49d4490e4e8004f590fc3/src%2Ftest%2Frustdoc-gui%2Fsidebar-source-code-display.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsidebar-source-code-display.goml?ref=9a1f52d7fd78f3dc26b49d4490e4e8004f590fc3", "patch": "@@ -138,3 +138,17 @@ assert-css: (\n         \"border-bottom-width\": \"1px\",\n     },\n )\n+\n+// We now check that the scroll position is kept when opening the sidebar.\n+click: \"#sidebar-toggle\"\n+wait-for-css: (\".sidebar\", {\"width\": \"0px\"})\n+// We scroll to line 117 to change the scroll position.\n+scroll-to: '//*[@id=\"117\"]'\n+assert-window-property: {\"pageYOffset\": \"2519\"}\n+// Expanding the sidebar...\n+click: \"#sidebar-toggle\"\n+wait-for-css: (\".sidebar\", {\"width\": \"500px\"})\n+click: \"#sidebar-toggle\"\n+wait-for-css: (\".sidebar\", {\"width\": \"0px\"})\n+// The \"scrollTop\" property should be the same.\n+assert-window-property: {\"pageYOffset\": \"2519\"}"}]}