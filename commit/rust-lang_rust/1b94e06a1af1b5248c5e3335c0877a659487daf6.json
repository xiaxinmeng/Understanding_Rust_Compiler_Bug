{"sha": "1b94e06a1af1b5248c5e3335c0877a659487daf6", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFiOTRlMDZhMWFmMWI1MjQ4YzVlMzMzNWMwODc3YTY1OTQ4N2RhZjY=", "commit": {"author": {"name": "Oliver Schneider", "email": "git-spam-no-reply9815368754983@oli-obk.de", "date": "2016-09-15T14:10:58Z"}, "committer": {"name": "Oliver Schneider", "email": "git-spam-no-reply9815368754983@oli-obk.de", "date": "2016-09-15T14:10:58Z"}, "message": "ppaux::parameterized $sometimes panics, let's catch that.", "tree": {"sha": "8b620f8a0e00d749afa3d0e48c9185dfef040454", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8b620f8a0e00d749afa3d0e48c9185dfef040454"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1b94e06a1af1b5248c5e3335c0877a659487daf6", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQIcBAABAgAGBQJX2qvyAAoJEFbW7qD8Z6xGyXIQALLeCX1xxSjNRh3Npo8iA60B\n4NRG4qGN11LeP2CBKNoLD9D/i0Rw8V5q7HRqS7azn5Apu/VUKx579zfrJTeVkzx2\nRp+NvpqGJskJ1tQc2klAzyyFcY7MpBreHRAme/xBbDWeXUb76yoSE4eD3PAb+CnW\nO6wvcj+jqkdZSYcywTW9WobE4zfaifC4FDR1f0fsNzCgdCCOMNpnGN+zhc4ZMZIs\neabf8e1L4kyo1kaWugwnrWjS13X0QQPDx6BgixRFHTS7Xn/Wwa4b1CJwtxFj+l7z\nK3zhy3T/QlMNQk+CfDg9DF1q051omxWhIWCiD8xSPh4rrTUCnhuVQVhntxwD5f8M\nFNp5DtyFnDk2sWv47lN9bVHcRfoW0+R4AacO/cMaC7+06Zby2R0Bn7Ws1RH6vUEp\nZ4X6oB2/MMLmc2TJAmrQ4bdkNW+ohV+orQ2RDGFMwWaSIwPJdGqIkndHhomMhtsO\n8Fu1EiczxbQWico0ZkoBxjJNWuR2xsaAqdTFM5XRYusz8qSj11c+jCKWyFJv1ULn\nW+rLVF4Oa+jNn+1Y/jpymNqkGkvbhHRnaNwsCfx/BAJvRDI8ELOJBV1w2aNJjM1E\nBkKKJgaAzX/ywFj9mnsRBUlpBgz9qJR1Tpkm3m4D8ZX/aoidyfaVSo5ulTNfwJh4\nBJJs61vJO18RcX34HEdd\n=hyi8\n-----END PGP SIGNATURE-----", "payload": "tree 8b620f8a0e00d749afa3d0e48c9185dfef040454\nparent f731766805a32eb2cb23766057271c842fdf1724\nauthor Oliver Schneider <git-spam-no-reply9815368754983@oli-obk.de> 1473948658 +0200\ncommitter Oliver Schneider <git-spam-no-reply9815368754983@oli-obk.de> 1473948658 +0200\n\nppaux::parameterized $sometimes panics, let's catch that."}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1b94e06a1af1b5248c5e3335c0877a659487daf6", "html_url": "https://github.com/rust-lang/rust/commit/1b94e06a1af1b5248c5e3335c0877a659487daf6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1b94e06a1af1b5248c5e3335c0877a659487daf6/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f731766805a32eb2cb23766057271c842fdf1724", "url": "https://api.github.com/repos/rust-lang/rust/commits/f731766805a32eb2cb23766057271c842fdf1724", "html_url": "https://github.com/rust-lang/rust/commit/f731766805a32eb2cb23766057271c842fdf1724"}], "stats": {"total": 10, "additions": 9, "deletions": 1}, "files": [{"sha": "7bc70b08cc76eff5378f1ae0ab39e8fbbe7daaaf", "filename": "src/interpreter/mod.rs", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/1b94e06a1af1b5248c5e3335c0877a659487daf6/src%2Finterpreter%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1b94e06a1af1b5248c5e3335c0877a659487daf6/src%2Finterpreter%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Finterpreter%2Fmod.rs?ref=1b94e06a1af1b5248c5e3335c0877a659487daf6", "patch": "@@ -1093,12 +1093,20 @@ fn report(tcx: TyCtxt, ecx: &EvalContext, e: EvalError) {\n         use rustc::util::ppaux;\n         use std::fmt;\n         struct Instance<'tcx>(DefId, &'tcx subst::Substs<'tcx>);\n+        impl<'tcx> ::std::panic::UnwindSafe for Instance<'tcx> {}\n+        impl<'tcx> ::std::panic::RefUnwindSafe for Instance<'tcx> {}\n         impl<'tcx> fmt::Display for Instance<'tcx> {\n             fn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result {\n                 ppaux::parameterized(f, self.1, self.0, ppaux::Ns::Value, &[])\n             }\n         }\n-        err.span_note(span, &format!(\"inside call to {}\", Instance(def_id, substs)));\n+        let inst = Instance(def_id, substs);\n+        match ::std::panic::catch_unwind(|| {\n+            format!(\"inside call to {}\", inst)\n+        }) {\n+            Ok(msg) => err.span_note(span, &msg),\n+            Err(_) => err.span_note(span, &format!(\"ppaux::parameterized failed: {:?}, {:?}\", def_id, substs)),\n+        };\n     }\n     err.emit();\n }"}]}