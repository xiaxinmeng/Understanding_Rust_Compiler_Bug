{"sha": "6a6aec04a266f5435f5d6f879750761c2cd8fce3", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZhNmFlYzA0YTI2NmY1NDM1ZjVkNmY4Nzk3NTA3NjFjMmNkOGZjZTM=", "commit": {"author": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2012-01-19T02:38:54Z"}, "committer": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2012-01-19T02:44:07Z"}, "message": "Fix --out-dir a bit more in driver.", "tree": {"sha": "546ce3d4e2b7901aaf82b42d027f75018a5a4853", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/546ce3d4e2b7901aaf82b42d027f75018a5a4853"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6a6aec04a266f5435f5d6f879750761c2cd8fce3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6a6aec04a266f5435f5d6f879750761c2cd8fce3", "html_url": "https://github.com/rust-lang/rust/commit/6a6aec04a266f5435f5d6f879750761c2cd8fce3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6a6aec04a266f5435f5d6f879750761c2cd8fce3/comments", "author": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "committer": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b0d5436dd0a9d02ed9377c3174e370b188619f9c", "url": "https://api.github.com/repos/rust-lang/rust/commits/b0d5436dd0a9d02ed9377c3174e370b188619f9c", "html_url": "https://github.com/rust-lang/rust/commit/b0d5436dd0a9d02ed9377c3174e370b188619f9c"}], "stats": {"total": 8, "additions": 5, "deletions": 3}, "files": [{"sha": "cae0cda7e70440c204ca3eeaf391e1b04c01d609", "filename": "src/comp/driver/driver.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/6a6aec04a266f5435f5d6f879750761c2cd8fce3/src%2Fcomp%2Fdriver%2Fdriver.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6a6aec04a266f5435f5d6f879750761c2cd8fce3/src%2Fcomp%2Fdriver%2Fdriver.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fdriver%2Fdriver.rs?ref=6a6aec04a266f5435f5d6f879750761c2cd8fce3", "patch": "@@ -564,11 +564,13 @@ fn build_output_filenames(ifile: str,\n           }\n         };\n \n-        let (base_path, _) = if !input_is_stdin(ifile) {\n-            fs::splitext(ifile)\n+        let base_filename = if !input_is_stdin(ifile) {\n+            let (path, _) = fs::splitext(ifile);\n+            fs::basename(path)\n         } else {\n-            (fs::connect(dirname, \"rust_out\"), \"\")\n+            \"rust_out\"\n         };\n+        let base_path = fs::connect(dirname, base_filename);\n \n \n         if sess.building_library {"}]}