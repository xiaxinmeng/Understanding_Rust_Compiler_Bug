{"sha": "8fa22dd9b73b2bb8427a7b7a23d3b0441d6e7c5d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhmYTIyZGQ5YjczYjJiYjg0MjdhN2I3YTIzZDNiMDQ0MWQ2ZTdjNWQ=", "commit": {"author": {"name": "Michael Woerister", "email": "michaelwoerister@posteo", "date": "2021-07-15T09:18:46Z"}, "committer": {"name": "Michael Woerister", "email": "michaelwoerister@posteo", "date": "2021-07-15T10:21:15Z"}, "message": "Add self-profiling to debuginfo name generation", "tree": {"sha": "1b1fa520c8d2c0912337ad7b33076149daf6e1de", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1b1fa520c8d2c0912337ad7b33076149daf6e1de"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8fa22dd9b73b2bb8427a7b7a23d3b0441d6e7c5d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8fa22dd9b73b2bb8427a7b7a23d3b0441d6e7c5d", "html_url": "https://github.com/rust-lang/rust/commit/8fa22dd9b73b2bb8427a7b7a23d3b0441d6e7c5d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8fa22dd9b73b2bb8427a7b7a23d3b0441d6e7c5d/comments", "author": {"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}, "committer": {"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bdd09c39212260cd7500a2dab1bfc0b96ef53b5b", "url": "https://api.github.com/repos/rust-lang/rust/commits/bdd09c39212260cd7500a2dab1bfc0b96ef53b5b", "html_url": "https://github.com/rust-lang/rust/commit/bdd09c39212260cd7500a2dab1bfc0b96ef53b5b"}], "stats": {"total": 5, "additions": 4, "deletions": 1}, "files": [{"sha": "81e905b1b5f578279466d7f28feb5ade52ac7147", "filename": "compiler/rustc_codegen_ssa/src/debuginfo/type_names.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/8fa22dd9b73b2bb8427a7b7a23d3b0441d6e7c5d/compiler%2Frustc_codegen_ssa%2Fsrc%2Fdebuginfo%2Ftype_names.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8fa22dd9b73b2bb8427a7b7a23d3b0441d6e7c5d/compiler%2Frustc_codegen_ssa%2Fsrc%2Fdebuginfo%2Ftype_names.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_ssa%2Fsrc%2Fdebuginfo%2Ftype_names.rs?ref=8fa22dd9b73b2bb8427a7b7a23d3b0441d6e7c5d", "patch": "@@ -34,6 +34,8 @@ pub fn compute_debuginfo_type_name<'tcx>(\n     t: Ty<'tcx>,\n     qualified: bool,\n ) -> String {\n+    let _prof = tcx.prof.generic_activity(\"compute_debuginfo_type_name\");\n+\n     let mut result = String::with_capacity(64);\n     let mut visited = FxHashSet::default();\n     push_debuginfo_type_name(tcx, t, qualified, &mut result, &mut visited);\n@@ -42,7 +44,7 @@ pub fn compute_debuginfo_type_name<'tcx>(\n \n // Pushes the name of the type as it should be stored in debuginfo on the\n // `output` String. See also compute_debuginfo_type_name().\n-pub fn push_debuginfo_type_name<'tcx>(\n+fn push_debuginfo_type_name<'tcx>(\n     tcx: TyCtxt<'tcx>,\n     t: Ty<'tcx>,\n     qualified: bool,\n@@ -577,6 +579,7 @@ fn push_const_param<'tcx>(tcx: TyCtxt<'tcx>, ct: &'tcx ty::Const<'tcx>, output:\n }\n \n pub fn push_generic_params<'tcx>(tcx: TyCtxt<'tcx>, substs: SubstsRef<'tcx>, output: &mut String) {\n+    let _prof = tcx.prof.generic_activity(\"compute_debuginfo_type_name\");\n     let mut visited = FxHashSet::default();\n     push_generic_params_internal(tcx, substs, output, &mut visited);\n }"}]}