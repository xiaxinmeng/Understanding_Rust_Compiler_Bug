{"sha": "ace49442a6aef323d42700da169ac3de32d64c2d", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFjZTQ5NDQyYTZhZWYzMjNkNDI3MDBkYTE2OWFjM2RlMzJkNjRjMmQ=", "commit": {"author": {"name": "Felix S. Klock II", "email": "pnkfelix@pnkfx.org", "date": "2013-07-09T13:31:43Z"}, "committer": {"name": "Felix S. Klock II", "email": "pnkfelix@pnkfx.org", "date": "2013-07-09T13:31:43Z"}, "message": "Fix #3225: Incorporate feedback from Graydon.\n\nThis is a small follow-up fix to the previous commit: I needed\nto quote the right-hand side of the definition for the variable\nMATCHES, to handle the case where there are more than one previously\ninstalled libraries in the target directory.", "tree": {"sha": "de265ced1d72ac84026a07f3e2ac2f04d38de5c4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/de265ced1d72ac84026a07f3e2ac2f04d38de5c4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ace49442a6aef323d42700da169ac3de32d64c2d", "comment_count": 9, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ace49442a6aef323d42700da169ac3de32d64c2d", "html_url": "https://github.com/rust-lang/rust/commit/ace49442a6aef323d42700da169ac3de32d64c2d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ace49442a6aef323d42700da169ac3de32d64c2d/comments", "author": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "25f51eeda079382773c0f3b91f43603432c44132", "url": "https://api.github.com/repos/rust-lang/rust/commits/25f51eeda079382773c0f3b91f43603432c44132", "html_url": "https://github.com/rust-lang/rust/commit/25f51eeda079382773c0f3b91f43603432c44132"}], "stats": {"total": 22, "additions": 11, "deletions": 11}, "files": [{"sha": "6745535fbca5ba2a39f79467b85bc30ed7ea4e06", "filename": "mk/install.mk", "status": "modified", "additions": 11, "deletions": 11, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/ace49442a6aef323d42700da169ac3de32d64c2d/mk%2Finstall.mk", "raw_url": "https://github.com/rust-lang/rust/raw/ace49442a6aef323d42700da169ac3de32d64c2d/mk%2Finstall.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Finstall.mk?ref=ace49442a6aef323d42700da169ac3de32d64c2d", "patch": "@@ -38,18 +38,18 @@ endif\n # Target-specific $(LIB_DESTIN_DIR) is the destination directory\n # $(1) is the filename/libname-glob\n define INSTALL_LIB\n-  $(if $(filter-out 1,$(words $(wildcard $(LIB_SOURCE_DIR)/$(1)))),      \\\n-       $(error Aborting install because more than one library matching   \\\n-               $(1) is present in build tree $(LIB_SOURCE_DIR):          \\\n+  $(if $(filter-out 1,$(words $(wildcard $(LIB_SOURCE_DIR)/$(1)))),        \\\n+       $(error Aborting install because more than one library matching     \\\n+               $(1) is present in build tree $(LIB_SOURCE_DIR):            \\\n                $(wildcard $(LIB_SOURCE_DIR)/$(1))))\n-  $(Q)LIB_NAME=$(notdir $(lastword $(wildcard $(LIB_SOURCE_DIR)/$(1)))); \\\n-  MATCHES=$(filter-out %$(notdir $(lastword $(wildcard $(LIB_SOURCE_DIR)/$(1)))),\\\n-                        $(wildcard $(LIB_DESTIN_DIR)/$(1)));             \\\n-  if [ -n \"$$MATCHES\" ]; then                                            \\\n-    echo \"Warning, one or libraries matching Rust library '$(1)'\" &&     \\\n-    echo \"  (other than '$$LIB_NAME' itself) already present\"     &&     \\\n-    echo \"  at destination $(LIB_DESTIN_DIR):\"                    &&     \\\n-    echo $$MATCHES ;                                                     \\\n+  $(Q)LIB_NAME=\"$(notdir $(lastword $(wildcard $(LIB_SOURCE_DIR)/$(1))))\"; \\\n+  MATCHES=\"$(filter-out %$(notdir $(lastword $(wildcard $(LIB_SOURCE_DIR)/$(1)))),\\\n+                        $(wildcard $(LIB_DESTIN_DIR)/$(1)))\";              \\\n+  if [ -n \"$$MATCHES\" ]; then                                              \\\n+    echo \"Warning, one or libraries matching Rust library '$(1)'\" &&       \\\n+    echo \"  (other than '$$LIB_NAME' itself) already present\"     &&       \\\n+    echo \"  at destination $(LIB_DESTIN_DIR):\"                    &&       \\\n+    echo $$MATCHES ;                                                       \\\n   fi\n   $(call DO_INSTALL_LIB,$(1))\n endef"}]}