{"sha": "bed113de4910989395c3e622134168210531c786", "node_id": "C_kwDOAAsO6NoAKGJlZDExM2RlNDkxMDk4OTM5NWMzZTYyMjEzNDE2ODIxMDUzMWM3ODY", "commit": {"author": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2023-01-27T15:23:12Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-01-27T15:23:12Z"}, "message": "Rollup merge of #107194 - xfix:remove-slice-internals-dependency-in-rustc-ast, r=Nilstrieb\n\nRemove dependency on slice_internals feature in rustc_ast\n\nThis reduces dependency on unstable features by the compiler.", "tree": {"sha": "3594adaf2d373ea1525f63955f16024549bc41ea", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3594adaf2d373ea1525f63955f16024549bc41ea"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bed113de4910989395c3e622134168210531c786", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJj0+xgCRBK7hj4Ov3rIwAA1ewIABJnMAbUbpA8bMoj/PzN7evI\n4rEI+SW3iwEncdvZjkTkibiH+1P74EfXPOgyM+rkv6VdNnsjyyE/SyoLTKyX6j0b\n9Kj8eUFcqaDhnGkI5UndXUq7dT/T4HnJYgoML2mQTgGYkiRKfIIZ5hNNW3nCG8sH\nwe6JbMSI2ciuW8IUFOcm0shP79ULavx/g3nJOVbNkobLkhblTsmV8NdSAnlQIJPC\n5UpBqeRqt5CVDB9CbIHSYsQMKLbJycek8C89YBEJnpdx7yO3oiZ7TInnsGWKQthg\nrccTQvPRtGBnGYmiiELr1XyBJ52xz78LcdcDTuUN525iqnr4oIS9vMwHrEL4DEs=\n=lanr\n-----END PGP SIGNATURE-----\n", "payload": "tree 3594adaf2d373ea1525f63955f16024549bc41ea\nparent 1163279c3a5494484d81bb5f2fc2df6cbd776ab4\nparent f72e17f8fbcc96b103bb5c9b7b63e2f0e21e5f75\nauthor Yuki Okushi <jtitor@2k36.org> 1674832992 +0900\ncommitter GitHub <noreply@github.com> 1674832992 +0900\n\nRollup merge of #107194 - xfix:remove-slice-internals-dependency-in-rustc-ast, r=Nilstrieb\n\nRemove dependency on slice_internals feature in rustc_ast\n\nThis reduces dependency on unstable features by the compiler.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bed113de4910989395c3e622134168210531c786", "html_url": "https://github.com/rust-lang/rust/commit/bed113de4910989395c3e622134168210531c786", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bed113de4910989395c3e622134168210531c786/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1163279c3a5494484d81bb5f2fc2df6cbd776ab4", "url": "https://api.github.com/repos/rust-lang/rust/commits/1163279c3a5494484d81bb5f2fc2df6cbd776ab4", "html_url": "https://github.com/rust-lang/rust/commit/1163279c3a5494484d81bb5f2fc2df6cbd776ab4"}, {"sha": "f72e17f8fbcc96b103bb5c9b7b63e2f0e21e5f75", "url": "https://api.github.com/repos/rust-lang/rust/commits/f72e17f8fbcc96b103bb5c9b7b63e2f0e21e5f75", "html_url": "https://github.com/rust-lang/rust/commit/f72e17f8fbcc96b103bb5c9b7b63e2f0e21e5f75"}], "stats": {"total": 5, "additions": 3, "deletions": 2}, "files": [{"sha": "12de551fcb4e4c42757638eb12e9ec153fd592d8", "filename": "Cargo.lock", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/bed113de4910989395c3e622134168210531c786/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/bed113de4910989395c3e622134168210531c786/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=bed113de4910989395c3e622134168210531c786", "patch": "@@ -3672,6 +3672,7 @@ name = \"rustc_ast\"\n version = \"0.0.0\"\n dependencies = [\n  \"bitflags\",\n+ \"memchr\",\n  \"rustc_data_structures\",\n  \"rustc_index\",\n  \"rustc_lexer\","}, {"sha": "10d7fa1db605a7dc7c5e70b53fe175c1f60ff185", "filename": "compiler/rustc_ast/Cargo.toml", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/bed113de4910989395c3e622134168210531c786/compiler%2Frustc_ast%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/bed113de4910989395c3e622134168210531c786/compiler%2Frustc_ast%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast%2FCargo.toml?ref=bed113de4910989395c3e622134168210531c786", "patch": "@@ -7,6 +7,7 @@ edition = \"2021\"\n \n [dependencies]\n bitflags = \"1.2.1\"\n+memchr = \"2.5.0\"\n rustc_data_structures = { path = \"../rustc_data_structures\" }\n rustc_index = { path = \"../rustc_index\" }\n rustc_lexer = { path = \"../rustc_lexer\" }"}, {"sha": "23c32fa96ca449e40f705596d897a9a6c0d14f87", "filename": "compiler/rustc_ast/src/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/bed113de4910989395c3e622134168210531c786/compiler%2Frustc_ast%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bed113de4910989395c3e622134168210531c786/compiler%2Frustc_ast%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast%2Fsrc%2Flib.rs?ref=bed113de4910989395c3e622134168210531c786", "patch": "@@ -16,7 +16,6 @@\n #![feature(let_chains)]\n #![feature(min_specialization)]\n #![feature(negative_impls)]\n-#![feature(slice_internals)]\n #![feature(stmt_expr_attributes)]\n #![recursion_limit = \"256\"]\n #![deny(rustc::untranslatable_diagnostic)]"}, {"sha": "6f57d66b2273a2cf4421d42f8057c4290dfc653e", "filename": "compiler/rustc_ast/src/util/unicode.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bed113de4910989395c3e622134168210531c786/compiler%2Frustc_ast%2Fsrc%2Futil%2Funicode.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bed113de4910989395c3e622134168210531c786/compiler%2Frustc_ast%2Fsrc%2Futil%2Funicode.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast%2Fsrc%2Futil%2Funicode.rs?ref=bed113de4910989395c3e622134168210531c786", "patch": "@@ -17,7 +17,7 @@ pub fn contains_text_flow_control_chars(s: &str) -> bool {\n     // U+2069 - E2 81 A9\n     let mut bytes = s.as_bytes();\n     loop {\n-        match core::slice::memchr::memchr(0xE2, bytes) {\n+        match memchr::memchr(0xE2, bytes) {\n             Some(idx) => {\n                 // bytes are valid UTF-8 -> E2 must be followed by two bytes\n                 let ch = &bytes[idx..idx + 3];"}]}