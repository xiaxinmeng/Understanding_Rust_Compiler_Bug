{"sha": "992646b9ebfc6eb6240ffaa2c2eec38f8502f168", "node_id": "C_kwDOAAsO6NoAKDk5MjY0NmI5ZWJmYzZlYjYyNDBmZmFhMmMyZWVjMzhmODUwMmYxNjg", "commit": {"author": {"name": "avitex", "email": "theavitex@gmail.com", "date": "2021-12-28T13:53:12Z"}, "committer": {"name": "avitex", "email": "theavitex@gmail.com", "date": "2021-12-28T13:55:22Z"}, "message": "Improve rustdoc::private_doc_tests tests\n\n- Ensure standard public items are accepted\n- Ensure public items not re-exported from private modules are denied", "tree": {"sha": "9950714af7c982179f8677152063e986b0671fb4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9950714af7c982179f8677152063e986b0671fb4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/992646b9ebfc6eb6240ffaa2c2eec38f8502f168", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEuK4cu/V7CPyRQls8OMdsvzdJ1iwFAmHLF2sACgkQOMdsvzdJ\n1izWLBAAo0+LzRXpEvQiznFi2qcXC7PpkGPSYHZWWso6SfEpkiMIWtBoST3bNtel\nny8I+moX1HiSZXFKHV8XtyUxgq/h1+/NpZHsIdVxCgl3xPU6UjW53AYfI0LEh1Nr\nObDNw8CBdP0XtiaCsTu1IA9vonvt87B3v6Cl+/vUBu2lnsel/K6VPzjlDyiu9SyT\nfggE2e7kE+zwlDqLhg6x6XJmmQl00bMXSC+DlOC9/StdjBAB622MrodiSdSXmIFH\nVjJvFk/0dVfjrLZrixe3dsdcSYGBJ92s72RJSQVUIVHlvXGt2BdYjbU3eQ0fYPP9\nRbmq1iRkahgh2VgygGoaJNWlgQWodW8mEwJ2NFOe4WovNDzZn0ujn5Hm6BvvEMLJ\neCyexx1kVLiSWTkeuMb9JplqJSvI+cGrm9pUtQgluOEQD6L8UQaU8rIgn0zooQL5\nlIdCBS64XxLusKTwN2QTY5NtKoUbTJZ5ydp46rs7FqhRml64K6ofXc3wvG5VRRkb\niPIZmI9/X88dvqUVX0jYGljgoh+EcwV/Ax9tzhF1MzgmwIX67JWGyWWKYkyVcIcG\nEmw/CfZBfEYO8/KRbFedC9ILe08JXZM7qv12+moMY21HoTPVnbmU4gEzSp1trMHg\nL914HCqLN6bp6bAIyM2tj3Qlsy+lFxOlQQuuGPpJu5QbAfOXocA=\n=wNPT\n-----END PGP SIGNATURE-----", "payload": "tree 9950714af7c982179f8677152063e986b0671fb4\nparent b0a1a4469ae3bcab01c999228e0c1e3e9506b43c\nauthor avitex <theavitex@gmail.com> 1640699592 +1100\ncommitter avitex <theavitex@gmail.com> 1640699722 +1100\n\nImprove rustdoc::private_doc_tests tests\n\n- Ensure standard public items are accepted\n- Ensure public items not re-exported from private modules are denied\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/992646b9ebfc6eb6240ffaa2c2eec38f8502f168", "html_url": "https://github.com/rust-lang/rust/commit/992646b9ebfc6eb6240ffaa2c2eec38f8502f168", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/992646b9ebfc6eb6240ffaa2c2eec38f8502f168/comments", "author": {"login": "avitex", "id": 5110816, "node_id": "MDQ6VXNlcjUxMTA4MTY=", "avatar_url": "https://avatars.githubusercontent.com/u/5110816?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avitex", "html_url": "https://github.com/avitex", "followers_url": "https://api.github.com/users/avitex/followers", "following_url": "https://api.github.com/users/avitex/following{/other_user}", "gists_url": "https://api.github.com/users/avitex/gists{/gist_id}", "starred_url": "https://api.github.com/users/avitex/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avitex/subscriptions", "organizations_url": "https://api.github.com/users/avitex/orgs", "repos_url": "https://api.github.com/users/avitex/repos", "events_url": "https://api.github.com/users/avitex/events{/privacy}", "received_events_url": "https://api.github.com/users/avitex/received_events", "type": "User", "site_admin": false}, "committer": {"login": "avitex", "id": 5110816, "node_id": "MDQ6VXNlcjUxMTA4MTY=", "avatar_url": "https://avatars.githubusercontent.com/u/5110816?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avitex", "html_url": "https://github.com/avitex", "followers_url": "https://api.github.com/users/avitex/followers", "following_url": "https://api.github.com/users/avitex/following{/other_user}", "gists_url": "https://api.github.com/users/avitex/gists{/gist_id}", "starred_url": "https://api.github.com/users/avitex/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avitex/subscriptions", "organizations_url": "https://api.github.com/users/avitex/orgs", "repos_url": "https://api.github.com/users/avitex/repos", "events_url": "https://api.github.com/users/avitex/events{/privacy}", "received_events_url": "https://api.github.com/users/avitex/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b0a1a4469ae3bcab01c999228e0c1e3e9506b43c", "url": "https://api.github.com/repos/rust-lang/rust/commits/b0a1a4469ae3bcab01c999228e0c1e3e9506b43c", "html_url": "https://github.com/rust-lang/rust/commit/b0a1a4469ae3bcab01c999228e0c1e3e9506b43c"}], "stats": {"total": 35, "additions": 33, "deletions": 2}, "files": [{"sha": "7cc62b38cc26080174a39ef01c3ff1b64176dfce", "filename": "src/test/rustdoc-ui/private-public-item-doc-test.rs", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/992646b9ebfc6eb6240ffaa2c2eec38f8502f168/src%2Ftest%2Frustdoc-ui%2Fprivate-public-item-doc-test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/992646b9ebfc6eb6240ffaa2c2eec38f8502f168/src%2Ftest%2Frustdoc-ui%2Fprivate-public-item-doc-test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Fprivate-public-item-doc-test.rs?ref=992646b9ebfc6eb6240ffaa2c2eec38f8502f168", "patch": "@@ -0,0 +1,11 @@\n+#![deny(rustdoc::private_doc_tests)]\n+\n+mod foo {\n+    /// private doc test\n+    ///\n+    /// ```\n+    /// assert!(false);\n+    /// ```\n+    //~^^^^^ ERROR documentation test in private item\n+    pub fn bar() {}\n+}"}, {"sha": "f50dbd1844e7afc0972a8a764c2921e241504d5f", "filename": "src/test/rustdoc-ui/private-public-item-doc-test.stderr", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/992646b9ebfc6eb6240ffaa2c2eec38f8502f168/src%2Ftest%2Frustdoc-ui%2Fprivate-public-item-doc-test.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/992646b9ebfc6eb6240ffaa2c2eec38f8502f168/src%2Ftest%2Frustdoc-ui%2Fprivate-public-item-doc-test.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Fprivate-public-item-doc-test.stderr?ref=992646b9ebfc6eb6240ffaa2c2eec38f8502f168", "patch": "@@ -0,0 +1,18 @@\n+error: documentation test in private item\n+  --> $DIR/private-public-item-doc-test.rs:4:5\n+   |\n+LL | /     /// private doc test\n+LL | |     ///\n+LL | |     /// ```\n+LL | |     /// assert!(false);\n+LL | |     /// ```\n+   | |___________^\n+   |\n+note: the lint level is defined here\n+  --> $DIR/private-public-item-doc-test.rs:1:9\n+   |\n+LL | #![deny(rustdoc::private_doc_tests)]\n+   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+error: aborting due to previous error\n+"}, {"sha": "b86a53305a175fb66c83a60288dc50396e35abd7", "filename": "src/test/rustdoc-ui/public-reexported-item-doc-test.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/992646b9ebfc6eb6240ffaa2c2eec38f8502f168/src%2Ftest%2Frustdoc-ui%2Fpublic-reexported-item-doc-test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/992646b9ebfc6eb6240ffaa2c2eec38f8502f168/src%2Ftest%2Frustdoc-ui%2Fpublic-reexported-item-doc-test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Fpublic-reexported-item-doc-test.rs?ref=992646b9ebfc6eb6240ffaa2c2eec38f8502f168", "patch": "@@ -2,7 +2,9 @@\n \n #![deny(rustdoc::private_doc_tests)]\n \n-mod foo {\n+pub fn foo() {}\n+\n+mod private {\n     /// re-exported doc test\n     ///\n     /// ```\n@@ -11,4 +13,4 @@ mod foo {\n     pub fn bar() {}\n }\n \n-pub use foo::bar;\n+pub use private::bar;"}]}