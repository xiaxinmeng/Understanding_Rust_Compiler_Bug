{"sha": "024df5c8a68928670f10cef45ca3064424016674", "node_id": "MDY6Q29tbWl0NzI0NzEyOjAyNGRmNWM4YTY4OTI4NjcwZjEwY2VmNDVjYTMwNjQ0MjQwMTY2NzQ=", "commit": {"author": {"name": "Corey Richardson", "email": "corey@octayn.net", "date": "2014-05-20T17:37:08Z"}, "committer": {"name": "Corey Richardson", "email": "corey@octayn.net", "date": "2014-06-04T04:00:55Z"}, "message": "syntax: shuffle some allocation out of binop_to_str", "tree": {"sha": "067602c7d03d819fb996b0aa7f9a5169419e1ae5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/067602c7d03d819fb996b0aa7f9a5169419e1ae5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/024df5c8a68928670f10cef45ca3064424016674", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/024df5c8a68928670f10cef45ca3064424016674", "html_url": "https://github.com/rust-lang/rust/commit/024df5c8a68928670f10cef45ca3064424016674", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/024df5c8a68928670f10cef45ca3064424016674/comments", "author": {"login": "emberian", "id": 704250, "node_id": "MDQ6VXNlcjcwNDI1MA==", "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emberian", "html_url": "https://github.com/emberian", "followers_url": "https://api.github.com/users/emberian/followers", "following_url": "https://api.github.com/users/emberian/following{/other_user}", "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}", "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emberian/subscriptions", "organizations_url": "https://api.github.com/users/emberian/orgs", "repos_url": "https://api.github.com/users/emberian/repos", "events_url": "https://api.github.com/users/emberian/events{/privacy}", "received_events_url": "https://api.github.com/users/emberian/received_events", "type": "User", "site_admin": false}, "committer": {"login": "emberian", "id": 704250, "node_id": "MDQ6VXNlcjcwNDI1MA==", "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emberian", "html_url": "https://github.com/emberian", "followers_url": "https://api.github.com/users/emberian/followers", "following_url": "https://api.github.com/users/emberian/following{/other_user}", "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}", "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emberian/subscriptions", "organizations_url": "https://api.github.com/users/emberian/orgs", "repos_url": "https://api.github.com/users/emberian/repos", "events_url": "https://api.github.com/users/emberian/events{/privacy}", "received_events_url": "https://api.github.com/users/emberian/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "507c1a0fc99b3a090beefd8a3887f21db98ecb09", "url": "https://api.github.com/repos/rust-lang/rust/commits/507c1a0fc99b3a090beefd8a3887f21db98ecb09", "html_url": "https://github.com/rust-lang/rust/commit/507c1a0fc99b3a090beefd8a3887f21db98ecb09"}], "stats": {"total": 26, "additions": 13, "deletions": 13}, "files": [{"sha": "8263c7c6852f5ec2b65c31bb46bbed9cb459c0af", "filename": "src/libsyntax/parse/token.rs", "status": "modified", "additions": 13, "deletions": 13, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/024df5c8a68928670f10cef45ca3064424016674/src%2Flibsyntax%2Fparse%2Ftoken.rs", "raw_url": "https://github.com/rust-lang/rust/raw/024df5c8a68928670f10cef45ca3064424016674/src%2Flibsyntax%2Fparse%2Ftoken.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Ftoken.rs?ref=024df5c8a68928670f10cef45ca3064424016674", "patch": "@@ -136,18 +136,18 @@ impl fmt::Show for Nonterminal {\n     }\n }\n \n-pub fn binop_to_str(o: BinOp) -> String {\n+pub fn binop_to_str(o: BinOp) -> &'static str {\n     match o {\n-      PLUS => \"+\".to_string(),\n-      MINUS => \"-\".to_string(),\n-      STAR => \"*\".to_string(),\n-      SLASH => \"/\".to_string(),\n-      PERCENT => \"%\".to_string(),\n-      CARET => \"^\".to_string(),\n-      AND => \"&\".to_string(),\n-      OR => \"|\".to_string(),\n-      SHL => \"<<\".to_string(),\n-      SHR => \">>\".to_string()\n+      PLUS => \"+\",\n+      MINUS => \"-\",\n+      STAR => \"*\",\n+      SLASH => \"/\",\n+      PERCENT => \"%\",\n+      CARET => \"^\",\n+      AND => \"&\",\n+      OR => \"|\",\n+      SHL => \"<<\",\n+      SHR => \">>\"\n     }\n }\n \n@@ -164,9 +164,9 @@ pub fn to_str(t: &Token) -> String {\n       TILDE => \"~\".to_string(),\n       OROR => \"||\".to_string(),\n       ANDAND => \"&&\".to_string(),\n-      BINOP(op) => binop_to_str(op),\n+      BINOP(op) => binop_to_str(op).to_string(),\n       BINOPEQ(op) => {\n-          let mut s = binop_to_str(op);\n+          let mut s = binop_to_str(op).to_strbuf();\n           s.push_str(\"=\");\n           s\n       }"}]}