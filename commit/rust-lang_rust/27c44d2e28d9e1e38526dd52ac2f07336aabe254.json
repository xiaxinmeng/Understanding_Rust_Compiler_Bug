{"sha": "27c44d2e28d9e1e38526dd52ac2f07336aabe254", "node_id": "C_kwDOAAsO6NoAKDI3YzQ0ZDJlMjhkOWUxZTM4NTI2ZGQ1MmFjMmYwNzMzNmFhYmUyNTQ", "commit": {"author": {"name": "John K\u00e5re Alsaker", "email": "john.kare.alsaker@gmail.com", "date": "2023-03-25T01:12:13Z"}, "committer": {"name": "John K\u00e5re Alsaker", "email": "john.kare.alsaker@gmail.com", "date": "2023-03-25T01:12:13Z"}, "message": "Update indexmap and rayon crates", "tree": {"sha": "b18b995e9255c543f36059f62eaf2397bd4a4051", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b18b995e9255c543f36059f62eaf2397bd4a4051"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/27c44d2e28d9e1e38526dd52ac2f07336aabe254", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/27c44d2e28d9e1e38526dd52ac2f07336aabe254", "html_url": "https://github.com/rust-lang/rust/commit/27c44d2e28d9e1e38526dd52ac2f07336aabe254", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/27c44d2e28d9e1e38526dd52ac2f07336aabe254/comments", "author": {"login": "Zoxc", "id": 25784, "node_id": "MDQ6VXNlcjI1Nzg0", "avatar_url": "https://avatars.githubusercontent.com/u/25784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zoxc", "html_url": "https://github.com/Zoxc", "followers_url": "https://api.github.com/users/Zoxc/followers", "following_url": "https://api.github.com/users/Zoxc/following{/other_user}", "gists_url": "https://api.github.com/users/Zoxc/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zoxc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zoxc/subscriptions", "organizations_url": "https://api.github.com/users/Zoxc/orgs", "repos_url": "https://api.github.com/users/Zoxc/repos", "events_url": "https://api.github.com/users/Zoxc/events{/privacy}", "received_events_url": "https://api.github.com/users/Zoxc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Zoxc", "id": 25784, "node_id": "MDQ6VXNlcjI1Nzg0", "avatar_url": "https://avatars.githubusercontent.com/u/25784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zoxc", "html_url": "https://github.com/Zoxc", "followers_url": "https://api.github.com/users/Zoxc/followers", "following_url": "https://api.github.com/users/Zoxc/following{/other_user}", "gists_url": "https://api.github.com/users/Zoxc/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zoxc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zoxc/subscriptions", "organizations_url": "https://api.github.com/users/Zoxc/orgs", "repos_url": "https://api.github.com/users/Zoxc/repos", "events_url": "https://api.github.com/users/Zoxc/events{/privacy}", "received_events_url": "https://api.github.com/users/Zoxc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a1f48047bf99b0cdc423924c9a09b0759193f9a0", "url": "https://api.github.com/repos/rust-lang/rust/commits/a1f48047bf99b0cdc423924c9a09b0759193f9a0", "html_url": "https://github.com/rust-lang/rust/commit/a1f48047bf99b0cdc423924c9a09b0759193f9a0"}], "stats": {"total": 52, "additions": 25, "deletions": 27}, "files": [{"sha": "9f9fce34541078d0f00cb385a1b22b2259016ae5", "filename": "Cargo.lock", "status": "modified", "additions": 6, "deletions": 8, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/27c44d2e28d9e1e38526dd52ac2f07336aabe254/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/27c44d2e28d9e1e38526dd52ac2f07336aabe254/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=27c44d2e28d9e1e38526dd52ac2f07336aabe254", "patch": "@@ -2689,9 +2689,9 @@ checksum = \"ce23b50ad8242c51a442f3ff322d56b02f08852c77e4c0b4d3fd684abc89c683\"\n \n [[package]]\n name = \"indexmap\"\n-version = \"1.9.2\"\n+version = \"1.9.3\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"1885e79c1fc4b10f0e172c475f458b7f7b93061064d98c3293e98c5ba0c8b399\"\n+checksum = \"bd070e393353796e801d209ad339e89596eb4c8d430d18ede6a1cced8fafbd99\"\n dependencies = [\n  \"autocfg\",\n  \"hashbrown 0.12.3\",\n@@ -4160,21 +4160,19 @@ dependencies = [\n \n [[package]]\n name = \"rustc-rayon\"\n-version = \"0.4.0\"\n+version = \"0.5.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"1a79f0b0b2609e2eacf9758013f50e7176cb4b29fd6436a747b14a5362c8727a\"\n+checksum = \"eb81aadc8837ca6ecebe0fe1353f15df83b3b3cc2cf7a8afd571bc22aa121710\"\n dependencies = [\n- \"autocfg\",\n- \"crossbeam-deque\",\n  \"either\",\n  \"rustc-rayon-core\",\n ]\n \n [[package]]\n name = \"rustc-rayon-core\"\n-version = \"0.4.1\"\n+version = \"0.5.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"02269144a0db9bb55cf5d4a41a5a0e95b334b0b78b08269018ca9b0250718c30\"\n+checksum = \"67668daaf00e359c126f6dcb40d652d89b458a008c8afa727a42a2d20fca0b7f\"\n dependencies = [\n  \"crossbeam-channel\",\n  \"crossbeam-deque\","}, {"sha": "87e4ac2660579dd20595bd721021326b7a601101", "filename": "compiler/rustc_codegen_cranelift/Cargo.lock", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/27c44d2e28d9e1e38526dd52ac2f07336aabe254/compiler%2Frustc_codegen_cranelift%2FCargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/27c44d2e28d9e1e38526dd52ac2f07336aabe254/compiler%2Frustc_codegen_cranelift%2FCargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_cranelift%2FCargo.lock?ref=27c44d2e28d9e1e38526dd52ac2f07336aabe254", "patch": "@@ -235,9 +235,9 @@ dependencies = [\n \n [[package]]\n name = \"indexmap\"\n-version = \"1.9.2\"\n+version = \"1.9.3\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"1885e79c1fc4b10f0e172c475f458b7f7b93061064d98c3293e98c5ba0c8b399\"\n+checksum = \"bd070e393353796e801d209ad339e89596eb4c8d430d18ede6a1cced8fafbd99\"\n dependencies = [\n  \"autocfg\",\n  \"hashbrown\","}, {"sha": "5dadcaaec42ce718a278a967cf4290b320d278fb", "filename": "compiler/rustc_codegen_cranelift/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/27c44d2e28d9e1e38526dd52ac2f07336aabe254/compiler%2Frustc_codegen_cranelift%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/27c44d2e28d9e1e38526dd52ac2f07336aabe254/compiler%2Frustc_codegen_cranelift%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_cranelift%2FCargo.toml?ref=27c44d2e28d9e1e38526dd52ac2f07336aabe254", "patch": "@@ -25,7 +25,7 @@ target-lexicon = \"0.12.0\"\n gimli = { version = \"0.26.0\", default-features = false, features = [\"write\"]}\n object = { version = \"0.29.0\", default-features = false, features = [\"std\", \"read_core\", \"write\", \"archive\", \"coff\", \"elf\", \"macho\", \"pe\"] }\n \n-indexmap = \"1.9.1\"\n+indexmap = \"1.9.3\"\n libloading = { version = \"0.7.3\", optional = true }\n once_cell = \"1.10.0\"\n smallvec = \"1.8.1\""}, {"sha": "0b2b03da2080a72173290a19ea5e4cbb5d96e117", "filename": "compiler/rustc_data_structures/Cargo.toml", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/27c44d2e28d9e1e38526dd52ac2f07336aabe254/compiler%2Frustc_data_structures%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/27c44d2e28d9e1e38526dd52ac2f07336aabe254/compiler%2Frustc_data_structures%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_data_structures%2FCargo.toml?ref=27c44d2e28d9e1e38526dd52ac2f07336aabe254", "patch": "@@ -10,12 +10,12 @@ arrayvec = { version = \"0.7\", default-features = false }\n bitflags = \"1.2.1\"\n cfg-if = \"1.0\"\n ena = \"0.14.2\"\n-indexmap = { version = \"1.9.1\" }\n+indexmap = { version = \"1.9.3\" }\n jobserver_crate = { version = \"0.1.13\", package = \"jobserver\" }\n libc = \"0.2\"\n measureme = \"10.0.0\"\n-rayon-core = { version = \"0.4.0\", package = \"rustc-rayon-core\", optional = true }\n-rayon = { version = \"0.4.0\", package = \"rustc-rayon\", optional = true }\n+rustc-rayon-core = { version = \"0.5.0\", optional = true }\n+rustc-rayon = { version = \"0.5.0\", optional = true }\n rustc_graphviz = { path = \"../rustc_graphviz\" }\n rustc-hash = \"1.1.0\"\n rustc_index = { path = \"../rustc_index\", package = \"rustc_index\" }\n@@ -51,4 +51,4 @@ features = [\n memmap2 = \"0.2.1\"\n \n [features]\n-rustc_use_parallel_compiler = [\"indexmap/rustc-rayon\", \"rayon\", \"rayon-core\"]\n+rustc_use_parallel_compiler = [\"indexmap/rustc-rayon\", \"rustc-rayon\", \"rustc-rayon-core\"]"}, {"sha": "98d3ab87f9cbd4a60fc4d35ff8ccf7e61da31e0a", "filename": "compiler/rustc_interface/Cargo.toml", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/27c44d2e28d9e1e38526dd52ac2f07336aabe254/compiler%2Frustc_interface%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/27c44d2e28d9e1e38526dd52ac2f07336aabe254/compiler%2Frustc_interface%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_interface%2FCargo.toml?ref=27c44d2e28d9e1e38526dd52ac2f07336aabe254", "patch": "@@ -8,8 +8,8 @@ edition = \"2021\"\n [dependencies]\n libloading = \"0.7.1\"\n tracing = \"0.1\"\n-rustc-rayon-core = { version = \"0.4.0\", optional = true }\n-rayon = { version = \"0.4.0\", package = \"rustc-rayon\", optional = true }\n+rustc-rayon-core = { version = \"0.5.0\", optional = true }\n+rustc-rayon = { version = \"0.5.0\", optional = true }\n smallvec = { version = \"1.8.1\", features = [\"union\", \"may_dangle\"] }\n rustc_ast = { path = \"../rustc_ast\" }\n rustc_attr = { path = \"../rustc_attr\" }\n@@ -52,4 +52,4 @@ rustc_ty_utils = { path = \"../rustc_ty_utils\" }\n \n [features]\n llvm = ['rustc_codegen_llvm']\n-rustc_use_parallel_compiler = ['rayon', 'rustc-rayon-core', 'rustc_query_impl/rustc_use_parallel_compiler', 'rustc_errors/rustc_use_parallel_compiler']\n+rustc_use_parallel_compiler = ['rustc-rayon', 'rustc-rayon-core', 'rustc_query_impl/rustc_use_parallel_compiler', 'rustc_errors/rustc_use_parallel_compiler']"}, {"sha": "aa95c43ef71085fe8e588e9c802d3268f928283d", "filename": "compiler/rustc_interface/src/util.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/27c44d2e28d9e1e38526dd52ac2f07336aabe254/compiler%2Frustc_interface%2Fsrc%2Futil.rs", "raw_url": "https://github.com/rust-lang/rust/raw/27c44d2e28d9e1e38526dd52ac2f07336aabe254/compiler%2Frustc_interface%2Fsrc%2Futil.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_interface%2Fsrc%2Futil.rs?ref=27c44d2e28d9e1e38526dd52ac2f07336aabe254", "patch": "@@ -183,7 +183,7 @@ pub(crate) fn run_in_thread_pool_with_globals<F: FnOnce() -> R + Send, R: Send>(\n                     .try_collect_active_jobs()\n                     .expect(\"active jobs shouldn't be locked in deadlock handler\")\n             });\n-            let registry = rustc_rayon_core::Registry::current();\n+            let registry = rayon_core::Registry::current();\n             thread::spawn(move || deadlock(query_map, &registry));\n         });\n     if let Some(size) = get_stack_size() {"}, {"sha": "5b2ec9029b16e1d87a1d261b0a5fd1000f547759", "filename": "compiler/rustc_middle/Cargo.toml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/27c44d2e28d9e1e38526dd52ac2f07336aabe254/compiler%2Frustc_middle%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/27c44d2e28d9e1e38526dd52ac2f07336aabe254/compiler%2Frustc_middle%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2FCargo.toml?ref=27c44d2e28d9e1e38526dd52ac2f07336aabe254", "patch": "@@ -26,8 +26,8 @@ rustc_hir = { path = \"../rustc_hir\" }\n rustc_index = { path = \"../rustc_index\" }\n rustc_macros = { path = \"../rustc_macros\" }\n rustc_query_system = { path = \"../rustc_query_system\" }\n-rustc-rayon-core = { version = \"0.4.0\", optional = true }\n-rustc-rayon = { version = \"0.4.0\", optional = true }\n+rustc-rayon-core = { version = \"0.5.0\", optional = true }\n+rustc-rayon = { version = \"0.5.0\", optional = true }\n rustc_serialize = { path = \"../rustc_serialize\" }\n rustc_session = { path = \"../rustc_session\" }\n rustc_span = { path = \"../rustc_span\" }"}, {"sha": "fb0d909307e78d3d4a8ba651e8b2f930d1591988", "filename": "compiler/rustc_middle/src/ty/context/tls.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/27c44d2e28d9e1e38526dd52ac2f07336aabe254/compiler%2Frustc_middle%2Fsrc%2Fty%2Fcontext%2Ftls.rs", "raw_url": "https://github.com/rust-lang/rust/raw/27c44d2e28d9e1e38526dd52ac2f07336aabe254/compiler%2Frustc_middle%2Fsrc%2Fty%2Fcontext%2Ftls.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fty%2Fcontext%2Ftls.rs?ref=27c44d2e28d9e1e38526dd52ac2f07336aabe254", "patch": "@@ -51,7 +51,7 @@ impl<'a, 'tcx> ImplicitCtxt<'a, 'tcx> {\n \n // Import the thread-local variable from Rayon, which is preserved for Rayon jobs.\n #[cfg(parallel_compiler)]\n-use rustc_rayon_core::tlv::TLV;\n+use rayon_core::tlv::TLV;\n \n // Otherwise define our own\n #[cfg(not(parallel_compiler))]"}, {"sha": "b107a3f03fe590997589a0ae83b80f4f6ec35e1c", "filename": "compiler/rustc_query_impl/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/27c44d2e28d9e1e38526dd52ac2f07336aabe254/compiler%2Frustc_query_impl%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/27c44d2e28d9e1e38526dd52ac2f07336aabe254/compiler%2Frustc_query_impl%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_query_impl%2FCargo.toml?ref=27c44d2e28d9e1e38526dd52ac2f07336aabe254", "patch": "@@ -16,7 +16,7 @@ rustc_index = { path = \"../rustc_index\" }\n rustc_macros = { path = \"../rustc_macros\" }\n rustc_middle = { path = \"../rustc_middle\" }\n rustc_query_system = { path = \"../rustc_query_system\" }\n-rustc-rayon-core = { version = \"0.4.0\", optional = true }\n+rustc-rayon-core = { version = \"0.5.0\", optional = true }\n rustc_serialize = { path = \"../rustc_serialize\" }\n rustc_session = { path = \"../rustc_session\" }\n rustc_span = { path = \"../rustc_span\" }"}, {"sha": "12b4a1143136bd9a4cbf812d2b2b5445356d3d5c", "filename": "compiler/rustc_query_system/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/27c44d2e28d9e1e38526dd52ac2f07336aabe254/compiler%2Frustc_query_system%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/27c44d2e28d9e1e38526dd52ac2f07336aabe254/compiler%2Frustc_query_system%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_query_system%2FCargo.toml?ref=27c44d2e28d9e1e38526dd52ac2f07336aabe254", "patch": "@@ -15,7 +15,7 @@ rustc_feature = { path = \"../rustc_feature\" }\n rustc_hir = { path = \"../rustc_hir\" }\n rustc_index = { path = \"../rustc_index\" }\n rustc_macros = { path = \"../rustc_macros\" }\n-rustc-rayon-core = { version = \"0.4.0\", optional = true }\n+rustc-rayon-core = { version = \"0.5.0\", optional = true }\n rustc_serialize = { path = \"../rustc_serialize\" }\n rustc_session = { path = \"../rustc_session\" }\n rustc_span = { path = \"../rustc_span\" }"}, {"sha": "d56a5955aff5ccd6ac2d54fd43aee6d65803e343", "filename": "compiler/rustc_query_system/src/query/job.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/27c44d2e28d9e1e38526dd52ac2f07336aabe254/compiler%2Frustc_query_system%2Fsrc%2Fquery%2Fjob.rs", "raw_url": "https://github.com/rust-lang/rust/raw/27c44d2e28d9e1e38526dd52ac2f07336aabe254/compiler%2Frustc_query_system%2Fsrc%2Fquery%2Fjob.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_query_system%2Fsrc%2Fquery%2Fjob.rs?ref=27c44d2e28d9e1e38526dd52ac2f07336aabe254", "patch": "@@ -18,11 +18,11 @@ use std::num::NonZeroU64;\n #[cfg(parallel_compiler)]\n use {\n     parking_lot::{Condvar, Mutex},\n+    rayon_core,\n     rustc_data_structures::fx::FxHashSet,\n     rustc_data_structures::sync::Lock,\n     rustc_data_structures::sync::Lrc,\n     rustc_data_structures::{jobserver, OnDrop},\n-    rustc_rayon_core as rayon_core,\n     rustc_span::DUMMY_SP,\n     std::iter,\n     std::process,"}, {"sha": "e4dbb8a637cea9fbc644dc1988700d69684d429c", "filename": "compiler/rustc_serialize/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/27c44d2e28d9e1e38526dd52ac2f07336aabe254/compiler%2Frustc_serialize%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/27c44d2e28d9e1e38526dd52ac2f07336aabe254/compiler%2Frustc_serialize%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_serialize%2FCargo.toml?ref=27c44d2e28d9e1e38526dd52ac2f07336aabe254", "patch": "@@ -4,7 +4,7 @@ version = \"0.0.0\"\n edition = \"2021\"\n \n [dependencies]\n-indexmap = \"1.9.1\"\n+indexmap = \"1.9.3\"\n smallvec = { version = \"1.8.1\", features = [\"union\", \"may_dangle\"] }\n thin-vec = \"0.2.12\"\n "}, {"sha": "a7c7575f392e6fdeab11daba9c47a4d4fa733e0b", "filename": "compiler/rustc_span/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/27c44d2e28d9e1e38526dd52ac2f07336aabe254/compiler%2Frustc_span%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/27c44d2e28d9e1e38526dd52ac2f07336aabe254/compiler%2Frustc_span%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_span%2FCargo.toml?ref=27c44d2e28d9e1e38526dd52ac2f07336aabe254", "patch": "@@ -18,4 +18,4 @@ tracing = \"0.1\"\n sha1 = \"0.10.0\"\n sha2 = \"0.10.1\"\n md5 = { package = \"md-5\", version = \"0.10.0\" }\n-indexmap = { version = \"1.9.1\" }\n+indexmap = { version = \"1.9.3\" }"}]}