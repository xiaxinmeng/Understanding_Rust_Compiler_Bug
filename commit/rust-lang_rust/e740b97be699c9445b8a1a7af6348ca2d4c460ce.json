{"sha": "e740b97be699c9445b8a1a7af6348ca2d4c460ce", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU3NDBiOTdiZTY5OWM5NDQ1YjhhMWE3YWY2MzQ4Y2EyZDRjNDYwY2U=", "commit": {"author": {"name": "Nicholas Nethercote", "email": "nnethercote@mozilla.com", "date": "2018-05-02T23:12:26Z"}, "committer": {"name": "Nicholas Nethercote", "email": "nnethercote@mozilla.com", "date": "2018-05-03T03:25:18Z"}, "message": "Always inline simple BytePos and CharPos methods.\n\nBecause they are (a) trivial, and (b) super hot.\n\nThis change speeds up most rustc-benchmarks, the best by 5%.", "tree": {"sha": "608299de495af2bd1cc48e283640f61c9635c572", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/608299de495af2bd1cc48e283640f61c9635c572"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e740b97be699c9445b8a1a7af6348ca2d4c460ce", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e740b97be699c9445b8a1a7af6348ca2d4c460ce", "html_url": "https://github.com/rust-lang/rust/commit/e740b97be699c9445b8a1a7af6348ca2d4c460ce", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e740b97be699c9445b8a1a7af6348ca2d4c460ce/comments", "author": {"login": "nnethercote", "id": 1940286, "node_id": "MDQ6VXNlcjE5NDAyODY=", "avatar_url": "https://avatars.githubusercontent.com/u/1940286?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nnethercote", "html_url": "https://github.com/nnethercote", "followers_url": "https://api.github.com/users/nnethercote/followers", "following_url": "https://api.github.com/users/nnethercote/following{/other_user}", "gists_url": "https://api.github.com/users/nnethercote/gists{/gist_id}", "starred_url": "https://api.github.com/users/nnethercote/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nnethercote/subscriptions", "organizations_url": "https://api.github.com/users/nnethercote/orgs", "repos_url": "https://api.github.com/users/nnethercote/repos", "events_url": "https://api.github.com/users/nnethercote/events{/privacy}", "received_events_url": "https://api.github.com/users/nnethercote/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nnethercote", "id": 1940286, "node_id": "MDQ6VXNlcjE5NDAyODY=", "avatar_url": "https://avatars.githubusercontent.com/u/1940286?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nnethercote", "html_url": "https://github.com/nnethercote", "followers_url": "https://api.github.com/users/nnethercote/followers", "following_url": "https://api.github.com/users/nnethercote/following{/other_user}", "gists_url": "https://api.github.com/users/nnethercote/gists{/gist_id}", "starred_url": "https://api.github.com/users/nnethercote/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nnethercote/subscriptions", "organizations_url": "https://api.github.com/users/nnethercote/orgs", "repos_url": "https://api.github.com/users/nnethercote/repos", "events_url": "https://api.github.com/users/nnethercote/events{/privacy}", "received_events_url": "https://api.github.com/users/nnethercote/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f76f6fbdea497c3cb536e33387f405cc74b99b76", "url": "https://api.github.com/repos/rust-lang/rust/commits/f76f6fbdea497c3cb536e33387f405cc74b99b76", "html_url": "https://github.com/rust-lang/rust/commit/f76f6fbdea497c3cb536e33387f405cc74b99b76"}], "stats": {"total": 10, "additions": 10, "deletions": 0}, "files": [{"sha": "8b4a3ea26a1ef7dca52f5a179e2f0110c7ea5f3f", "filename": "src/libsyntax_pos/lib.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/e740b97be699c9445b8a1a7af6348ca2d4c460ce/src%2Flibsyntax_pos%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e740b97be699c9445b8a1a7af6348ca2d4c460ce/src%2Flibsyntax_pos%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax_pos%2Flib.rs?ref=e740b97be699c9445b8a1a7af6348ca2d4c460ce", "patch": "@@ -1150,13 +1150,17 @@ pub struct CharPos(pub usize);\n // have been unsuccessful\n \n impl Pos for BytePos {\n+    #[inline(always)]\n     fn from_usize(n: usize) -> BytePos { BytePos(n as u32) }\n+\n+    #[inline(always)]\n     fn to_usize(&self) -> usize { let BytePos(n) = *self; n as usize }\n }\n \n impl Add for BytePos {\n     type Output = BytePos;\n \n+    #[inline(always)]\n     fn add(self, rhs: BytePos) -> BytePos {\n         BytePos((self.to_usize() + rhs.to_usize()) as u32)\n     }\n@@ -1165,6 +1169,7 @@ impl Add for BytePos {\n impl Sub for BytePos {\n     type Output = BytePos;\n \n+    #[inline(always)]\n     fn sub(self, rhs: BytePos) -> BytePos {\n         BytePos((self.to_usize() - rhs.to_usize()) as u32)\n     }\n@@ -1183,13 +1188,17 @@ impl Decodable for BytePos {\n }\n \n impl Pos for CharPos {\n+    #[inline(always)]\n     fn from_usize(n: usize) -> CharPos { CharPos(n) }\n+\n+    #[inline(always)]\n     fn to_usize(&self) -> usize { let CharPos(n) = *self; n }\n }\n \n impl Add for CharPos {\n     type Output = CharPos;\n \n+    #[inline(always)]\n     fn add(self, rhs: CharPos) -> CharPos {\n         CharPos(self.to_usize() + rhs.to_usize())\n     }\n@@ -1198,6 +1207,7 @@ impl Add for CharPos {\n impl Sub for CharPos {\n     type Output = CharPos;\n \n+    #[inline(always)]\n     fn sub(self, rhs: CharPos) -> CharPos {\n         CharPos(self.to_usize() - rhs.to_usize())\n     }"}]}