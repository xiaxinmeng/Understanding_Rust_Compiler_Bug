{"sha": "7e4b1737ff3c054fb8a9893515ced938b5fe24ba", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdlNGIxNzM3ZmYzYzA1NGZiOGE5ODkzNTE1Y2VkOTM4YjVmZTI0YmE=", "commit": {"author": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2021-07-30T07:26:54Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-07-30T07:26:54Z"}, "message": "Rollup merge of #87553 - bjorn3:fix_hotplug_codegen_version, r=wesleywiser\n\nFix typo in rustc_driver::version\n\nThis caused rustc `-Zcodegen-backend=foo.so -vV` to look for `oo.so` instead of `foo.so`", "tree": {"sha": "945e323ba50f5366b747641f9e3f195ff4ea1269", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/945e323ba50f5366b747641f9e3f195ff4ea1269"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7e4b1737ff3c054fb8a9893515ced938b5fe24ba", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJhA6m+CRBK7hj4Ov3rIwAACd0IAAY3lB45ONJhH4bLTxIeRQaV\nYCY4MfTq458R9wJEt9petZSqyajqjEpMKjpDGg7xx/8tkl/Nzf11WD35SsCIxIUd\nCE4cseBQXIlF3jpcakk2ucUZqkc9X3rE4T59zcuHZ/yOdajSH3sgkCusGyJLExDv\n2XsmzsGWQGKbWtRnokBk8mc2t8GUl5b3nl4QOyr7X2ZbESA6+fSubNlkrtvUY5bT\nmzM0mtzOrdcMLMo54l34m5Z5EKNKBFaeSZXWD176eBUo4LilvjkxeDSqA0Fdycn2\nkU47wM5D3hFkDZO2s/4MdP3HbKPePR5TzjIgezLn1LUQ1aq5N0L73j/wt74hZD0=\n=jg/d\n-----END PGP SIGNATURE-----\n", "payload": "tree 945e323ba50f5366b747641f9e3f195ff4ea1269\nparent fd79e7740b8951b51a999dac6d0073b34085e1a4\nparent 2f6662da85d47ebf89432c910a496812e9e2db12\nauthor Yuki Okushi <jtitor@2k36.org> 1627630014 +0900\ncommitter GitHub <noreply@github.com> 1627630014 +0900\n\nRollup merge of #87553 - bjorn3:fix_hotplug_codegen_version, r=wesleywiser\n\nFix typo in rustc_driver::version\n\nThis caused rustc `-Zcodegen-backend=foo.so -vV` to look for `oo.so` instead of `foo.so`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7e4b1737ff3c054fb8a9893515ced938b5fe24ba", "html_url": "https://github.com/rust-lang/rust/commit/7e4b1737ff3c054fb8a9893515ced938b5fe24ba", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7e4b1737ff3c054fb8a9893515ced938b5fe24ba/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fd79e7740b8951b51a999dac6d0073b34085e1a4", "url": "https://api.github.com/repos/rust-lang/rust/commits/fd79e7740b8951b51a999dac6d0073b34085e1a4", "html_url": "https://github.com/rust-lang/rust/commit/fd79e7740b8951b51a999dac6d0073b34085e1a4"}, {"sha": "2f6662da85d47ebf89432c910a496812e9e2db12", "url": "https://api.github.com/repos/rust-lang/rust/commits/2f6662da85d47ebf89432c910a496812e9e2db12", "html_url": "https://github.com/rust-lang/rust/commit/2f6662da85d47ebf89432c910a496812e9e2db12"}], "stats": {"total": 8, "additions": 1, "deletions": 7}, "files": [{"sha": "84dd69ebd963496696d0ed03e9d7d5bc1d4a40b5", "filename": "compiler/rustc_driver/src/lib.rs", "status": "modified", "additions": 1, "deletions": 7, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/7e4b1737ff3c054fb8a9893515ced938b5fe24ba/compiler%2Frustc_driver%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7e4b1737ff3c054fb8a9893515ced938b5fe24ba/compiler%2Frustc_driver%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_driver%2Fsrc%2Flib.rs?ref=7e4b1737ff3c054fb8a9893515ced938b5fe24ba", "patch": "@@ -764,13 +764,7 @@ pub fn version(binary: &str, matches: &getopts::Matches) {\n         println!(\"release: {}\", unw(util::release_str()));\n \n         let debug_flags = matches.opt_strs(\"Z\");\n-        let backend_name = debug_flags.iter().find_map(|x| {\n-            if x.starts_with(\"codegen-backend=\") {\n-                Some(&x[\"codegen-backends=\".len()..])\n-            } else {\n-                None\n-            }\n-        });\n+        let backend_name = debug_flags.iter().find_map(|x| x.strip_prefix(\"codegen-backend=\"));\n         get_codegen_backend(&None, backend_name).print_version();\n     }\n }"}]}