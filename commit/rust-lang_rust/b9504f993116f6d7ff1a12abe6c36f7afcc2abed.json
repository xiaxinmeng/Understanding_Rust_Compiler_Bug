{"sha": "b9504f993116f6d7ff1a12abe6c36f7afcc2abed", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI5NTA0Zjk5MzExNmY2ZDdmZjFhMTJhYmU2YzM2ZjdhZmNjMmFiZWQ=", "commit": {"author": {"name": "Heather", "email": "heather@cynede.net", "date": "2013-10-25T04:57:56Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2013-10-29T23:22:57Z"}, "message": "support for GNU configure syntax corrections: patch from brson", "tree": {"sha": "d077bdcba792c8ea9e13c2afd4ac4390947a114c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d077bdcba792c8ea9e13c2afd4ac4390947a114c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b9504f993116f6d7ff1a12abe6c36f7afcc2abed", "comment_count": 9, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b9504f993116f6d7ff1a12abe6c36f7afcc2abed", "html_url": "https://github.com/rust-lang/rust/commit/b9504f993116f6d7ff1a12abe6c36f7afcc2abed", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b9504f993116f6d7ff1a12abe6c36f7afcc2abed/comments", "author": {"login": "cnd", "id": 2656965, "node_id": "MDQ6VXNlcjI2NTY5NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2656965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cnd", "html_url": "https://github.com/cnd", "followers_url": "https://api.github.com/users/cnd/followers", "following_url": "https://api.github.com/users/cnd/following{/other_user}", "gists_url": "https://api.github.com/users/cnd/gists{/gist_id}", "starred_url": "https://api.github.com/users/cnd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cnd/subscriptions", "organizations_url": "https://api.github.com/users/cnd/orgs", "repos_url": "https://api.github.com/users/cnd/repos", "events_url": "https://api.github.com/users/cnd/events{/privacy}", "received_events_url": "https://api.github.com/users/cnd/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1c4a348b072a1b6191ac349aefffcc1c5fe84de7", "url": "https://api.github.com/repos/rust-lang/rust/commits/1c4a348b072a1b6191ac349aefffcc1c5fe84de7", "html_url": "https://github.com/rust-lang/rust/commit/1c4a348b072a1b6191ac349aefffcc1c5fe84de7"}], "stats": {"total": 42, "additions": 21, "deletions": 21}, "files": [{"sha": "244014caab257bf8cbb5ff654d2ecbd970ce137f", "filename": "configure", "status": "modified", "additions": 21, "deletions": 21, "changes": 42, "blob_url": "https://github.com/rust-lang/rust/blob/b9504f993116f6d7ff1a12abe6c36f7afcc2abed/configure", "raw_url": "https://github.com/rust-lang/rust/raw/b9504f993116f6d7ff1a12abe6c36f7afcc2abed/configure", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/configure?ref=b9504f993116f6d7ff1a12abe6c36f7afcc2abed", "patch": "@@ -616,6 +616,26 @@ do\n done\n CFG_TARGET=$V_TEMP\n \n+# copy host-triples to target-triples so that hosts are a subset of targets\n+# XXX: remove deprecated variables here\n+V_TEMP=\"\"\n+for i in $CFG_HOST_TRIPLES $CFG_TARGET_TRIPLES;\n+do\n+   echo \"$V_TEMP\" | grep -qF $i || V_TEMP=\"$V_TEMP${V_TEMP:+ }$i\"\n+done\n+CFG_TARGET_TRIPLES=$V_TEMP\n+\n+# XXX: Support for deprecated syntax, should be dropped.\n+if [ ! -z \"$CFG_BUILD_TRIPLE\" ]; then\n+    CFG_BUILD=${CFG_BUILD_TRIPLE}\n+fi\n+if [ ! -z \"$CFG_HOST_TRIPLES\" ]; then\n+    CFG_HOST=${CFG_HOST_TRIPLES}\n+fi\n+if [ ! -z \"$CFG_TARGET_TRIPLES\" ]; then\n+    CFG_TARGET=${CFG_TARGET_TRIPLES}\n+fi\n+\n # check target-specific tool-chains\n for i in $CFG_TARGET\n do\n@@ -718,7 +738,7 @@ then\n     CFG_LIBDIR=bin\n fi\n \n-for h in $CFG_HOST_\n+for h in $CFG_HOST\n do\n     for t in $CFG_TARGET\n     do\n@@ -986,26 +1006,6 @@ putvar CFG_ANDROID_CROSS_PATH\n putvar CFG_MINGW32_CROSS_PATH\n putvar CFG_MANDIR\n \n-# Support for deprecated syntax, should be dropped.\n-putvar CFG_BUILD_TRIPLE\n-putvar CFG_HOST_TRIPLES\n-putvar CFG_TARGET_TRIPLES\n-if [ ! -z \"$CFG_BUILD_TRIPLE\" ]; then\n-    CFG_BUILD=${CFG_BUILD_TRIPLE}\n-fi\n-if [ ! -z \"$CFG_HOST_TRIPLES\" ]; then\n-    CFG_HOST=${CFG_HOST_TRIPLES}\n-fi\n-if [ ! -z \"$CFG_TARGET_TRIPLES\" ]; then\n-    CFG_TARGET=${CFG_TARGET_TRIPLES}\n-fi\n-\n-if [ ! -z \"$CFG_ENABLE_PAX_FLAGS\" ]\n-then\n-    putvar CFG_ENABLE_PAX_FLAGS\n-    putvar CFG_PAXCTL\n-fi\n-\n # Avoid spurious warnings from clang by feeding it original source on\n # ccache-miss rather than preprocessed input.\n if [ ! -z \"$CFG_ENABLE_CCACHE\" ] && [ ! -z \"$CFG_ENABLE_CLANG\" ]"}]}