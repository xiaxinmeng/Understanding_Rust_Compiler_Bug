{"sha": "54fe5b7fc223677f4525886c58b1ae9767da8231", "node_id": "C_kwDOAAsO6NoAKDU0ZmU1YjdmYzIyMzY3N2Y0NTI1ODg2YzU4YjFhZTk3NjdkYTgyMzE", "commit": {"author": {"name": "Spencer Sharkey", "email": "spencer@up.lol", "date": "2022-09-09T05:29:08Z"}, "committer": {"name": "Spencer Sharkey", "email": "spencer@up.lol", "date": "2022-09-10T04:23:02Z"}, "message": "use ubuntu 18.04 container for release", "tree": {"sha": "7b93770920a7a7eb5c88fc18aa90980a68ccfbf8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7b93770920a7a7eb5c88fc18aa90980a68ccfbf8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/54fe5b7fc223677f4525886c58b1ae9767da8231", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/54fe5b7fc223677f4525886c58b1ae9767da8231", "html_url": "https://github.com/rust-lang/rust/commit/54fe5b7fc223677f4525886c58b1ae9767da8231", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/54fe5b7fc223677f4525886c58b1ae9767da8231/comments", "author": {"login": "SpencerSharkey", "id": 4871369, "node_id": "MDQ6VXNlcjQ4NzEzNjk=", "avatar_url": "https://avatars.githubusercontent.com/u/4871369?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SpencerSharkey", "html_url": "https://github.com/SpencerSharkey", "followers_url": "https://api.github.com/users/SpencerSharkey/followers", "following_url": "https://api.github.com/users/SpencerSharkey/following{/other_user}", "gists_url": "https://api.github.com/users/SpencerSharkey/gists{/gist_id}", "starred_url": "https://api.github.com/users/SpencerSharkey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SpencerSharkey/subscriptions", "organizations_url": "https://api.github.com/users/SpencerSharkey/orgs", "repos_url": "https://api.github.com/users/SpencerSharkey/repos", "events_url": "https://api.github.com/users/SpencerSharkey/events{/privacy}", "received_events_url": "https://api.github.com/users/SpencerSharkey/received_events", "type": "User", "site_admin": false}, "committer": {"login": "SpencerSharkey", "id": 4871369, "node_id": "MDQ6VXNlcjQ4NzEzNjk=", "avatar_url": "https://avatars.githubusercontent.com/u/4871369?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SpencerSharkey", "html_url": "https://github.com/SpencerSharkey", "followers_url": "https://api.github.com/users/SpencerSharkey/followers", "following_url": "https://api.github.com/users/SpencerSharkey/following{/other_user}", "gists_url": "https://api.github.com/users/SpencerSharkey/gists{/gist_id}", "starred_url": "https://api.github.com/users/SpencerSharkey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SpencerSharkey/subscriptions", "organizations_url": "https://api.github.com/users/SpencerSharkey/orgs", "repos_url": "https://api.github.com/users/SpencerSharkey/repos", "events_url": "https://api.github.com/users/SpencerSharkey/events{/privacy}", "received_events_url": "https://api.github.com/users/SpencerSharkey/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b7e8b9a6b8f25f269bc141f2749555418ab0f370", "url": "https://api.github.com/repos/rust-lang/rust/commits/b7e8b9a6b8f25f269bc141f2749555418ab0f370", "html_url": "https://github.com/rust-lang/rust/commit/b7e8b9a6b8f25f269bc141f2749555418ab0f370"}], "stats": {"total": 18, "additions": 13, "deletions": 5}, "files": [{"sha": "785eb6fc31cd9bc6a7594175676693ecb1307640", "filename": ".github/workflows/release.yaml", "status": "modified", "additions": 13, "deletions": 5, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/54fe5b7fc223677f4525886c58b1ae9767da8231/.github%2Fworkflows%2Frelease.yaml", "raw_url": "https://github.com/rust-lang/rust/raw/54fe5b7fc223677f4525886c58b1ae9767da8231/.github%2Fworkflows%2Frelease.yaml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Frelease.yaml?ref=54fe5b7fc223677f4525886c58b1ae9767da8231", "patch": "@@ -34,6 +34,7 @@ jobs:\n           - os: ubuntu-20.04\n             target: x86_64-unknown-linux-gnu\n             code-target: linux-x64\n+            container: ubuntu:18.04\n           - os: ubuntu-20.04\n             target: aarch64-unknown-linux-gnu\n             code-target: linux-arm64\n@@ -49,6 +50,7 @@ jobs:\n \n     name: dist (${{ matrix.target }})\n     runs-on: ${{ matrix.os }}\n+    container: ${{ matrix.container }}\n \n     env:\n       RA_TARGET: ${{ matrix.target }}\n@@ -59,19 +61,25 @@ jobs:\n         with:\n           fetch-depth: ${{ env.FETCH_DEPTH }}\n \n+      - name: Install toolchain dependencies\n+        if: matrix.container == 'ubuntu:18.04'\n+        run: apt-get update && apt-get install -y build-essential curl\n+\n       - name: Install Rust toolchain\n-        run: |\n-          rustup update --no-self-update stable\n-          rustup target add ${{ matrix.target }}\n-          rustup component add rust-src\n+        uses: actions-rs/toolchain@v1\n+        with:\n+          toolchain: stable\n+          target: ${{ matrix.target }}\n+          components: rust-src\n+          override: true\n \n       - name: Install Node.js\n         uses: actions/setup-node@v1\n         with:\n           node-version: 16.x\n \n       - name: Update apt repositories\n-        if: matrix.target == 'aarch64-unknown-linux-gnu' || matrix.target == 'arm-unknown-linux-gnueabihf'\n+        if: \"!matrix.container && (matrix.target == 'aarch64-unknown-linux-gnu' || matrix.target == 'arm-unknown-linux-gnueabihf')\"\n         run: sudo apt-get update\n \n       - name: Install AArch64 target toolchain"}]}