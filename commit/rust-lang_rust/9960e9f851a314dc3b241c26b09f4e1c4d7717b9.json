{"sha": "9960e9f851a314dc3b241c26b09f4e1c4d7717b9", "node_id": "C_kwDOAAsO6NoAKDk5NjBlOWY4NTFhMzE0ZGMzYjI0MWMyNmIwOWY0ZTFjNGQ3NzE3Yjk", "commit": {"author": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2023-04-05T22:18:32Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-04-05T22:18:32Z"}, "message": "Rollup merge of #109973 - GuillaumeGomez:logo-display-very-small-screen, r=notriddle\n\nrustdoc: Improve logo display very small screen\n\nBefore:\n\n![Screenshot from 2023-04-05 16-56-33](https://user-images.githubusercontent.com/3050060/230125438-c63c8de1-923c-4534-adf1-bdef02e402a9.png)\n\nAfter:\n\n![Screenshot from 2023-04-05 16-57-17](https://user-images.githubusercontent.com/3050060/230125467-d3d46878-373a-4f8a-8554-1bb8c4baf46d.png)\n\nr? `@notriddle`", "tree": {"sha": "fca1c0cb846ccf1d5c0e798413a17bc68e88463e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fca1c0cb846ccf1d5c0e798413a17bc68e88463e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9960e9f851a314dc3b241c26b09f4e1c4d7717b9", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJkLfO4CRBK7hj4Ov3rIwAAJb0IAFzFcEoCHmhPD2DX1FjNZSVv\nfPYlq+Reb5fQ89UkdeEHATUMJzsRjfNDrrNr5OUtyxADyUzRTWl2PFQ3wFHKEJGT\nQslyDwge3ip13XJIEmayjDlWxparTm6JvlXI8kV832HZtoH9P228wFp9FgGddWe3\nYATsG03n0ilbwZeL8aknXftjhyB1wVYEDTnmMy4SlBgoln1zYlHovvUKEfrd8h4d\n8gFij+Ev5R9FR+aq1nNqXw/cBrM4ZGytK86N2omrQ+6OxT8ZOIgRPEHOURInexm5\nvkMPLP/gQT+oC42SidVA90NB1p/S1vgXGrcQjCuslpAsGM6Qj3JOnSJF+LVno+o=\n=tK4G\n-----END PGP SIGNATURE-----\n", "payload": "tree fca1c0cb846ccf1d5c0e798413a17bc68e88463e\nparent fe20ae035814636177b283bfa3447d17b73c4755\nparent 8f5404d0d79f7cef9445b531aae5394fe3b22f29\nauthor Yuki Okushi <jtitor@2k36.org> 1680733112 +0900\ncommitter GitHub <noreply@github.com> 1680733112 +0900\n\nRollup merge of #109973 - GuillaumeGomez:logo-display-very-small-screen, r=notriddle\n\nrustdoc: Improve logo display very small screen\n\nBefore:\n\n![Screenshot from 2023-04-05 16-56-33](https://user-images.githubusercontent.com/3050060/230125438-c63c8de1-923c-4534-adf1-bdef02e402a9.png)\n\nAfter:\n\n![Screenshot from 2023-04-05 16-57-17](https://user-images.githubusercontent.com/3050060/230125467-d3d46878-373a-4f8a-8554-1bb8c4baf46d.png)\n\nr? `@notriddle`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9960e9f851a314dc3b241c26b09f4e1c4d7717b9", "html_url": "https://github.com/rust-lang/rust/commit/9960e9f851a314dc3b241c26b09f4e1c4d7717b9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9960e9f851a314dc3b241c26b09f4e1c4d7717b9/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fe20ae035814636177b283bfa3447d17b73c4755", "url": "https://api.github.com/repos/rust-lang/rust/commits/fe20ae035814636177b283bfa3447d17b73c4755", "html_url": "https://github.com/rust-lang/rust/commit/fe20ae035814636177b283bfa3447d17b73c4755"}, {"sha": "8f5404d0d79f7cef9445b531aae5394fe3b22f29", "url": "https://api.github.com/repos/rust-lang/rust/commits/8f5404d0d79f7cef9445b531aae5394fe3b22f29", "html_url": "https://github.com/rust-lang/rust/commit/8f5404d0d79f7cef9445b531aae5394fe3b22f29"}], "stats": {"total": 16, "additions": 14, "deletions": 2}, "files": [{"sha": "e86eaa65b75b8f961602c1e467da121eb728b031", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/9960e9f851a314dc3b241c26b09f4e1c4d7717b9/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/9960e9f851a314dc3b241c26b09f4e1c4d7717b9/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=9960e9f851a314dc3b241c26b09f4e1c4d7717b9", "patch": "@@ -6,6 +6,10 @@\n \t3. Copy the filenames with updated suffixes from the directory.\n */\n \n+:root {\n+\t--nav-sub-mobile-padding: 8px;\n+}\n+\n /* See FiraSans-LICENSE.txt for the Fira Sans license. */\n @font-face {\n \tfont-family: 'Fira Sans';\n@@ -1726,7 +1730,7 @@ in main.js\n \n \t.source nav.sub {\n \t\tmargin: 0;\n-\t\tpadding: 8px;\n+\t\tpadding: var(--nav-sub-mobile-padding);\n \t}\n }\n \n@@ -1783,6 +1787,7 @@ in main.js\n \t.sub-logo-container > img {\n \t\theight: 35px;\n \t\twidth: 35px;\n+\t\tmargin-bottom: var(--nav-sub-mobile-padding);\n \t}\n }\n "}, {"sha": "69459bd3e23b5cafdca8093105be90996e967f31", "filename": "tests/rustdoc-gui/huge-logo.goml", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9960e9f851a314dc3b241c26b09f4e1c4d7717b9/tests%2Frustdoc-gui%2Fhuge-logo.goml", "raw_url": "https://github.com/rust-lang/rust/raw/9960e9f851a314dc3b241c26b09f4e1c4d7717b9/tests%2Frustdoc-gui%2Fhuge-logo.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fhuge-logo.goml?ref=9960e9f851a314dc3b241c26b09f4e1c4d7717b9", "patch": "@@ -18,4 +18,6 @@ size: (1280, 1024)\n assert-property: (\".sub-logo-container\", {\"offsetWidth\": \"60\", \"offsetHeight\": 60})\n \n size: (400, 600)\n-assert-property: (\".sub-logo-container\", {\"offsetWidth\": \"35\", \"offsetHeight\": 35})\n+// 43 because 35px + 8px of margin\n+assert-css: (\".sub-logo-container > img\", {\"margin-bottom\": \"8px\"})\n+assert-property: (\".sub-logo-container\", {\"offsetWidth\": \"35\", \"offsetHeight\": 43})"}, {"sha": "ea6ff12328ca774310bd3b50498a1b5dd9ee6738", "filename": "tests/rustdoc-gui/source-code-page.goml", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/9960e9f851a314dc3b241c26b09f4e1c4d7717b9/tests%2Frustdoc-gui%2Fsource-code-page.goml", "raw_url": "https://github.com/rust-lang/rust/raw/9960e9f851a314dc3b241c26b09f4e1c4d7717b9/tests%2Frustdoc-gui%2Fsource-code-page.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fsource-code-page.goml?ref=9960e9f851a314dc3b241c26b09f4e1c4d7717b9", "patch": "@@ -216,3 +216,8 @@ call-function: (\"check-sidebar-dir-entry\", {\n     \"x\": 0,\n     \"y\": |source_sidebar_title_y| + |source_sidebar_title_height| + 6,\n })\n+\n+// Now we check that the logo has a bottom margin so it's not stuck to the search input.\n+assert-css: (\".sub-logo-container > img\", {\"margin-bottom\": \"8px\"})\n+store-property: (logo_height, \".sub-logo-container\", \"clientHeight\")\n+assert-position: (\".search-form\", {\"y\": |logo_height| + 8})"}]}