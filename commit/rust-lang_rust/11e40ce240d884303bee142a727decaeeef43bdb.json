{"sha": "11e40ce240d884303bee142a727decaeeef43bdb", "node_id": "MDY6Q29tbWl0NzI0NzEyOjExZTQwY2UyNDBkODg0MzAzYmVlMTQyYTcyN2RlY2FlZWVmNDNiZGI=", "commit": {"author": {"name": "Ian Jackson", "email": "ijackson@chiark.greenend.org.uk", "date": "2021-03-25T10:27:53Z"}, "committer": {"name": "Ian Jackson", "email": "ijackson@chiark.greenend.org.uk", "date": "2021-03-25T10:27:53Z"}, "message": "ExitStatus: print \"exit status: {}\" rather than \"exit code: {}\"\n\nProper Unix terminology is \"exit status\" (vs \"wait status\").  \"exit\ncode\" is imprecise on Unix and therefore unclear.  (As far as I can\ntell, \"exit code\" is correct terminology on Windows.)\n\nThis new wording is unfortunately inconsistent with the identifier\nnames in the Rust stdlib.\n\nIt is the identifier names that are wrong, as discussed at length in eg\n  https://doc.rust-lang.org/nightly/std/process/struct.ExitStatus.html\n  https://doc.rust-lang.org/nightly/std/os/unix/process/trait.ExitStatusExt.html\n\nUnfortunately for API stability reasons it would be a lot of work, and\na lot of disruption, to change the names in the stdlib (eg to rename\n`std::process::ExitStatus` to `std::process::ChildStatus` or\nsomething), but we should fix the message output.  Many (probably\nmost) readers of these messages about exit statuses will be users and\nsystem administrators, not programmers, who won't even know that Rust\nhas this wrong terminology.\n\nSo I think the right thing is to fix the documentation (as I have\nalready done) and, now, the terminology in the implementation.\n\nThis is a user-visible change to the behaviour of all Rust programs\nwhich run Unix subprocesses.  Hopefully no-one is matching against the\nexit status string, except perhaps in tests.\n\nSigned-off-by: Ian Jackson <ijackson@chiark.greenend.org.uk>", "tree": {"sha": "081a7f956f5f91fac437a3e7c3335f423530c31b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/081a7f956f5f91fac437a3e7c3335f423530c31b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/11e40ce240d884303bee142a727decaeeef43bdb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/11e40ce240d884303bee142a727decaeeef43bdb", "html_url": "https://github.com/rust-lang/rust/commit/11e40ce240d884303bee142a727decaeeef43bdb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/11e40ce240d884303bee142a727decaeeef43bdb/comments", "author": {"login": "ijackson", "id": 2090772, "node_id": "MDQ6VXNlcjIwOTA3NzI=", "avatar_url": "https://avatars.githubusercontent.com/u/2090772?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ijackson", "html_url": "https://github.com/ijackson", "followers_url": "https://api.github.com/users/ijackson/followers", "following_url": "https://api.github.com/users/ijackson/following{/other_user}", "gists_url": "https://api.github.com/users/ijackson/gists{/gist_id}", "starred_url": "https://api.github.com/users/ijackson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ijackson/subscriptions", "organizations_url": "https://api.github.com/users/ijackson/orgs", "repos_url": "https://api.github.com/users/ijackson/repos", "events_url": "https://api.github.com/users/ijackson/events{/privacy}", "received_events_url": "https://api.github.com/users/ijackson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ijackson", "id": 2090772, "node_id": "MDQ6VXNlcjIwOTA3NzI=", "avatar_url": "https://avatars.githubusercontent.com/u/2090772?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ijackson", "html_url": "https://github.com/ijackson", "followers_url": "https://api.github.com/users/ijackson/followers", "following_url": "https://api.github.com/users/ijackson/following{/other_user}", "gists_url": "https://api.github.com/users/ijackson/gists{/gist_id}", "starred_url": "https://api.github.com/users/ijackson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ijackson/subscriptions", "organizations_url": "https://api.github.com/users/ijackson/orgs", "repos_url": "https://api.github.com/users/ijackson/repos", "events_url": "https://api.github.com/users/ijackson/events{/privacy}", "received_events_url": "https://api.github.com/users/ijackson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9b6339e4b9747d473270baa42e77e1d2fff39bf4", "url": "https://api.github.com/repos/rust-lang/rust/commits/9b6339e4b9747d473270baa42e77e1d2fff39bf4", "html_url": "https://github.com/rust-lang/rust/commit/9b6339e4b9747d473270baa42e77e1d2fff39bf4"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "77a450fc5719a27b33ea11f0940fd7ce6278aa71", "filename": "library/std/src/sys/unix/process/process_unix.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/11e40ce240d884303bee142a727decaeeef43bdb/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fprocess%2Fprocess_unix.rs", "raw_url": "https://github.com/rust-lang/rust/raw/11e40ce240d884303bee142a727decaeeef43bdb/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fprocess%2Fprocess_unix.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fprocess%2Fprocess_unix.rs?ref=11e40ce240d884303bee142a727decaeeef43bdb", "patch": "@@ -529,7 +529,7 @@ impl From<c_int> for ExitStatus {\n impl fmt::Display for ExitStatus {\n     fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {\n         if let Some(code) = self.code() {\n-            write!(f, \"exit code: {}\", code)\n+            write!(f, \"exit status: {}\", code)\n         } else if let Some(signal) = self.signal() {\n             if self.core_dumped() {\n                 write!(f, \"signal: {} (core dumped)\", signal)"}, {"sha": "02c469fbcdfd80c5e2298b798a84b4cf5ff6e96c", "filename": "library/std/src/sys/unix/process/process_unix/tests.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/11e40ce240d884303bee142a727decaeeef43bdb/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fprocess%2Fprocess_unix%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/11e40ce240d884303bee142a727decaeeef43bdb/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fprocess%2Fprocess_unix%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fprocess%2Fprocess_unix%2Ftests.rs?ref=11e40ce240d884303bee142a727decaeeef43bdb", "patch": "@@ -9,8 +9,8 @@ fn exitstatus_display_tests() {\n \n     t(0x0000f, \"signal: 15\");\n     t(0x0008b, \"signal: 11 (core dumped)\");\n-    t(0x00000, \"exit code: 0\");\n-    t(0x0ff00, \"exit code: 255\");\n+    t(0x00000, \"exit status: 0\");\n+    t(0x0ff00, \"exit status: 255\");\n \n     // On MacOS, 0x0137f is WIFCONTINUED, not WIFSTOPPED.  Probably *BSD is similar.\n     //   https://github.com/rust-lang/rust/pull/82749#issuecomment-790525956"}]}