{"sha": "c5f1cdb3232913dd21efd498a674207232a9d08a", "node_id": "C_kwDOAAsO6NoAKGM1ZjFjZGIzMjMyOTEzZGQyMWVmZDQ5OGE2NzQyMDcyMzJhOWQwOGE", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-05-18T06:34:48Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-05-18T06:34:48Z"}, "message": "Auto merge of #2125 - RalfJung:ref-validity, r=RalfJung\n\ntest for validity of references pointing to uninhabited types\n\nThe new tests for https://github.com/rust-lang/rust/pull/97116", "tree": {"sha": "b6e8aa4764dee91fa1f5c5109ca86639438d5503", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b6e8aa4764dee91fa1f5c5109ca86639438d5503"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c5f1cdb3232913dd21efd498a674207232a9d08a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c5f1cdb3232913dd21efd498a674207232a9d08a", "html_url": "https://github.com/rust-lang/rust/commit/c5f1cdb3232913dd21efd498a674207232a9d08a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c5f1cdb3232913dd21efd498a674207232a9d08a/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a5cf24746997516714cec2c0c784d671e2e3aca8", "url": "https://api.github.com/repos/rust-lang/rust/commits/a5cf24746997516714cec2c0c784d671e2e3aca8", "html_url": "https://github.com/rust-lang/rust/commit/a5cf24746997516714cec2c0c784d671e2e3aca8"}, {"sha": "439f861101f72b6e6298b87151f23fa3cfcda7f7", "url": "https://api.github.com/repos/rust-lang/rust/commits/439f861101f72b6e6298b87151f23fa3cfcda7f7", "html_url": "https://github.com/rust-lang/rust/commit/439f861101f72b6e6298b87151f23fa3cfcda7f7"}], "stats": {"total": 16, "additions": 15, "deletions": 1}, "files": [{"sha": "8788a013aca72b8cdf04b3552dd2260893606b39", "filename": "rust-version", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c5f1cdb3232913dd21efd498a674207232a9d08a/rust-version", "raw_url": "https://github.com/rust-lang/rust/raw/c5f1cdb3232913dd21efd498a674207232a9d08a/rust-version", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/rust-version?ref=c5f1cdb3232913dd21efd498a674207232a9d08a", "patch": "@@ -1 +1 @@\n-e1ec3260d79497080ca86540562d410ba67d2a95\n+77972d2d0134fb597249b3b64dcf9510a790c34e"}, {"sha": "51a3279ffae97823177f5d70661baaa3c6c7ffa2", "filename": "tests/compile-fail/validity/ref_to_uninhabited1.rs", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/c5f1cdb3232913dd21efd498a674207232a9d08a/tests%2Fcompile-fail%2Fvalidity%2Fref_to_uninhabited1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c5f1cdb3232913dd21efd498a674207232a9d08a/tests%2Fcompile-fail%2Fvalidity%2Fref_to_uninhabited1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail%2Fvalidity%2Fref_to_uninhabited1.rs?ref=c5f1cdb3232913dd21efd498a674207232a9d08a", "patch": "@@ -0,0 +1,7 @@\n+#![feature(never_type)]\n+use std::mem::{transmute, forget};\n+\n+fn main() { unsafe {\n+    let x: Box<!> = transmute(&mut 42); //~ERROR encountered a box pointing to uninhabited type !\n+    forget(x);\n+} }"}, {"sha": "3778719dc58ce945a7e9499d4e01e736a4b429f3", "filename": "tests/compile-fail/validity/ref_to_uninhabited2.rs", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/c5f1cdb3232913dd21efd498a674207232a9d08a/tests%2Fcompile-fail%2Fvalidity%2Fref_to_uninhabited2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c5f1cdb3232913dd21efd498a674207232a9d08a/tests%2Fcompile-fail%2Fvalidity%2Fref_to_uninhabited2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail%2Fvalidity%2Fref_to_uninhabited2.rs?ref=c5f1cdb3232913dd21efd498a674207232a9d08a", "patch": "@@ -0,0 +1,7 @@\n+use std::mem::transmute;\n+\n+enum Void {}\n+\n+fn main() { unsafe {\n+    let _x: &(i32, Void) = transmute(&42); //~ERROR encountered a reference pointing to uninhabited type (i32, Void)\n+} }"}]}