{"sha": "1b76b4281e90292922455a9192f82a2b6b80d279", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFiNzZiNDI4MWU5MDI5MjkyMjQ1NWE5MTkyZjgyYTJiNmI4MGQyNzk=", "commit": {"author": {"name": "Craig Disselkoen", "email": "craigdissel@gmail.com", "date": "2020-05-05T23:09:39Z"}, "committer": {"name": "Craig Disselkoen", "email": "craigdissel@gmail.com", "date": "2020-05-05T23:12:56Z"}, "message": "simplify some code using early returns", "tree": {"sha": "fa54e6d62deeec040de8b3eb4512ebe3d282c23b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fa54e6d62deeec040de8b3eb4512ebe3d282c23b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1b76b4281e90292922455a9192f82a2b6b80d279", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1b76b4281e90292922455a9192f82a2b6b80d279", "html_url": "https://github.com/rust-lang/rust/commit/1b76b4281e90292922455a9192f82a2b6b80d279", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1b76b4281e90292922455a9192f82a2b6b80d279/comments", "author": {"login": "cdisselkoen", "id": 4458638, "node_id": "MDQ6VXNlcjQ0NTg2Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/4458638?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cdisselkoen", "html_url": "https://github.com/cdisselkoen", "followers_url": "https://api.github.com/users/cdisselkoen/followers", "following_url": "https://api.github.com/users/cdisselkoen/following{/other_user}", "gists_url": "https://api.github.com/users/cdisselkoen/gists{/gist_id}", "starred_url": "https://api.github.com/users/cdisselkoen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cdisselkoen/subscriptions", "organizations_url": "https://api.github.com/users/cdisselkoen/orgs", "repos_url": "https://api.github.com/users/cdisselkoen/repos", "events_url": "https://api.github.com/users/cdisselkoen/events{/privacy}", "received_events_url": "https://api.github.com/users/cdisselkoen/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cdisselkoen", "id": 4458638, "node_id": "MDQ6VXNlcjQ0NTg2Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/4458638?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cdisselkoen", "html_url": "https://github.com/cdisselkoen", "followers_url": "https://api.github.com/users/cdisselkoen/followers", "following_url": "https://api.github.com/users/cdisselkoen/following{/other_user}", "gists_url": "https://api.github.com/users/cdisselkoen/gists{/gist_id}", "starred_url": "https://api.github.com/users/cdisselkoen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cdisselkoen/subscriptions", "organizations_url": "https://api.github.com/users/cdisselkoen/orgs", "repos_url": "https://api.github.com/users/cdisselkoen/repos", "events_url": "https://api.github.com/users/cdisselkoen/events{/privacy}", "received_events_url": "https://api.github.com/users/cdisselkoen/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c9b395be2bfcd67e045c1031143b7e8c27a6d3fb", "url": "https://api.github.com/repos/rust-lang/rust/commits/c9b395be2bfcd67e045c1031143b7e8c27a6d3fb", "html_url": "https://github.com/rust-lang/rust/commit/c9b395be2bfcd67e045c1031143b7e8c27a6d3fb"}], "stats": {"total": 41, "additions": 17, "deletions": 24}, "files": [{"sha": "8d6aa926894e75b19b6b966066e9aa307b64f98a", "filename": "crates/ra_env/src/lib.rs", "status": "modified", "additions": 17, "deletions": 24, "changes": 41, "blob_url": "https://github.com/rust-lang/rust/blob/1b76b4281e90292922455a9192f82a2b6b80d279/crates%2Fra_env%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1b76b4281e90292922455a9192f82a2b6b80d279/crates%2Fra_env%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_env%2Fsrc%2Flib.rs?ref=1b76b4281e90292922455a9192f82a2b6b80d279", "patch": "@@ -33,31 +33,24 @@ pub fn get_path_for_executable(executable_name: impl AsRef<str>) -> Result<Strin\n             )))\n         }\n     } else {\n-        let final_path: Option<String> = if is_valid_executable(executable_name) {\n-            Some(executable_name.to_owned())\n-        } else {\n-            if let Some(mut path) = dirs::home_dir() {\n-                path.push(\".cargo\");\n-                path.push(\"bin\");\n-                path.push(executable_name);\n-                if is_valid_executable(&path) {\n-                    Some(path.into_os_string().into_string().expect(\"Invalid Unicode in path\"))\n-                } else {\n-                    None\n-                }\n-            } else {\n-                None\n+        if is_valid_executable(executable_name) {\n+            return Ok(executable_name.to_owned());\n+        }\n+        if let Some(mut path) = dirs::home_dir() {\n+            path.push(\".cargo\");\n+            path.push(\"bin\");\n+            path.push(executable_name);\n+            if is_valid_executable(&path) {\n+                return Ok(path.into_os_string().into_string().expect(\"Invalid Unicode in path\"));\n             }\n-        };\n-        final_path.ok_or(\n-            // This error message may also be caused by $PATH or $CARGO/$RUSTC/etc not being set correctly\n-            // for VSCode, even if they are set correctly in a terminal.\n-            // On macOS in particular, launching VSCode from terminal with `code <dirname>` causes VSCode\n-            // to inherit environment variables including $PATH, $CARGO, $RUSTC, etc from that terminal;\n-            // but launching VSCode from Dock does not inherit environment variables from a terminal.\n-            // For more discussion, see #3118.\n-            Error::msg(format!(\"Failed to find `{}` executable. Make sure `{}` is in `$PATH`, or set `${}` to point to a valid executable.\", executable_name, executable_name, env_var))\n-        )\n+        }\n+        // This error message may also be caused by $PATH or $CARGO/$RUSTC/etc not being set correctly\n+        // for VSCode, even if they are set correctly in a terminal.\n+        // On macOS in particular, launching VSCode from terminal with `code <dirname>` causes VSCode\n+        // to inherit environment variables including $PATH, $CARGO, $RUSTC, etc from that terminal;\n+        // but launching VSCode from Dock does not inherit environment variables from a terminal.\n+        // For more discussion, see #3118.\n+        Err(Error::msg(format!(\"Failed to find `{}` executable. Make sure `{}` is in `$PATH`, or set `${}` to point to a valid executable.\", executable_name, executable_name, env_var)))\n     }\n }\n "}]}