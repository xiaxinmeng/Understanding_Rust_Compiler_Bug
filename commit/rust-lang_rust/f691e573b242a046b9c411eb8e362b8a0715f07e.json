{"sha": "f691e573b242a046b9c411eb8e362b8a0715f07e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY2OTFlNTczYjI0MmEwNDZiOWM0MTFlYjhlMzYyYjhhMDcxNWYwN2U=", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2020-08-17T09:51:18Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2020-08-17T09:51:18Z"}, "message": "tweak alignment check docs", "tree": {"sha": "e272abaf4d0f00dbced7df2cb5aa8621ea7be8b2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e272abaf4d0f00dbced7df2cb5aa8621ea7be8b2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f691e573b242a046b9c411eb8e362b8a0715f07e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f691e573b242a046b9c411eb8e362b8a0715f07e", "html_url": "https://github.com/rust-lang/rust/commit/f691e573b242a046b9c411eb8e362b8a0715f07e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f691e573b242a046b9c411eb8e362b8a0715f07e/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0913653e065896cbbacf164c36673fec48f947d1", "url": "https://api.github.com/repos/rust-lang/rust/commits/0913653e065896cbbacf164c36673fec48f947d1", "html_url": "https://github.com/rust-lang/rust/commit/0913653e065896cbbacf164c36673fec48f947d1"}], "stats": {"total": 20, "additions": 9, "deletions": 11}, "files": [{"sha": "37ed718a1a2b87f316e03239a9149a05800d2941", "filename": "README.md", "status": "modified", "additions": 9, "deletions": 11, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/f691e573b242a046b9c411eb8e362b8a0715f07e/README.md", "raw_url": "https://github.com/rust-lang/rust/raw/f691e573b242a046b9c411eb8e362b8a0715f07e/README.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/README.md?ref=f691e573b242a046b9c411eb8e362b8a0715f07e", "patch": "@@ -165,9 +165,8 @@ up the sysroot.  If you are using `miri` (the Miri driver) directly, see the\n \n Miri adds its own set of `-Z` flags:\n \n-* `-Zmiri-disable-alignment-check` disables checking pointer alignment. This is\n-  useful to avoid [false positives][alignment-false-positives]. However, setting\n-  this flag means Miri could miss bugs in your program.\n+* `-Zmiri-disable-alignment-check` disables checking pointer alignment, so you\n+  can focus on other failures.\n * `-Zmiri-disable-stacked-borrows` disables checking the experimental\n   [Stacked Borrows] aliasing rules.  This can make Miri run faster, but it also\n   means no aliasing violations will be detected.\n@@ -193,12 +192,13 @@ Miri adds its own set of `-Z` flags:\n   default, alignment is checked by casting the pointer to an integer, and making\n   sure that is a multiple of the alignment.  This can lead to cases where a\n   program passes the alignment check by pure chance, because things \"happened to\n-  be\" sufficiently aligned.  To avoid such cases, the symbolic alignment check\n-  only takes into account the requested alignment of the relevant allocation,\n-  and the offset into that allocation.  This avoids such false negatives, but it\n-  also incurs some false positives when the code does manual integer arithmetic\n-  to ensure alignment.  (The standard library `align_to` method works fine in\n-  both modes; under symbolic alignment it only fills the middle slice when the\n+  be\" sufficiently aligned -- there is no UB in this execution but there would\n+  be UB in others.  To avoid such cases, the symbolic alignment check only takes\n+  into account the requested alignment of the relevant allocation, and the\n+  offset into that allocation.  This avoids missing such bugs, but it also\n+  incurs some false positives when the code does manual integer arithmetic to\n+  ensure alignment.  (The standard library `align_to` method works fine in both\n+  modes; under symbolic alignment it only fills the middle slice when the\n   allocation guarantees sufficient alignment.)\n * `-Zmiri-track-alloc-id=<id>` shows a backtrace when the given allocation is\n   being allocated or freed.  This helps in debugging memory leaks and\n@@ -211,8 +211,6 @@ Miri adds its own set of `-Z` flags:\n   assigned to a stack frame.  This helps in debugging UB related to Stacked\n   Borrows \"protectors\".\n \n-[alignment-false-positives]: https://github.com/rust-lang/miri/issues/1074\n-\n Some native rustc `-Z` flags are also very relevant for Miri:\n \n * `-Zmir-opt-level` controls how many MIR optimizations are performed.  Miri"}]}