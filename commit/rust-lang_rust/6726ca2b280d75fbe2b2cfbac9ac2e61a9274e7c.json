{"sha": "6726ca2b280d75fbe2b2cfbac9ac2e61a9274e7c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY3MjZjYTJiMjgwZDc1ZmJlMmIyY2ZiYWM5YWMyZTYxYTkyNzRlN2M=", "commit": {"author": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2020-07-28T13:52:39Z"}, "committer": {"name": "mark", "email": "markm@cs.wisc.edu", "date": "2020-07-28T18:03:59Z"}, "message": "Collect library features from library/", "tree": {"sha": "1250ea15e89ae7e21ba38e2a295528ec8242b4a7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1250ea15e89ae7e21ba38e2a295528ec8242b4a7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6726ca2b280d75fbe2b2cfbac9ac2e61a9274e7c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6726ca2b280d75fbe2b2cfbac9ac2e61a9274e7c", "html_url": "https://github.com/rust-lang/rust/commit/6726ca2b280d75fbe2b2cfbac9ac2e61a9274e7c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6726ca2b280d75fbe2b2cfbac9ac2e61a9274e7c/comments", "author": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mark-i-m", "id": 8827840, "node_id": "MDQ6VXNlcjg4Mjc4NDA=", "avatar_url": "https://avatars.githubusercontent.com/u/8827840?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mark-i-m", "html_url": "https://github.com/mark-i-m", "followers_url": "https://api.github.com/users/mark-i-m/followers", "following_url": "https://api.github.com/users/mark-i-m/following{/other_user}", "gists_url": "https://api.github.com/users/mark-i-m/gists{/gist_id}", "starred_url": "https://api.github.com/users/mark-i-m/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mark-i-m/subscriptions", "organizations_url": "https://api.github.com/users/mark-i-m/orgs", "repos_url": "https://api.github.com/users/mark-i-m/repos", "events_url": "https://api.github.com/users/mark-i-m/events{/privacy}", "received_events_url": "https://api.github.com/users/mark-i-m/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "856f68fa14806a6395e71a9ab6c5101914aa1ae2", "url": "https://api.github.com/repos/rust-lang/rust/commits/856f68fa14806a6395e71a9ab6c5101914aa1ae2", "html_url": "https://github.com/rust-lang/rust/commit/856f68fa14806a6395e71a9ab6c5101914aa1ae2"}], "stats": {"total": 9, "additions": 6, "deletions": 3}, "files": [{"sha": "96cabf754490b4950273099aebc1ab3dcf81e914", "filename": "src/bootstrap/doc.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6726ca2b280d75fbe2b2cfbac9ac2e61a9274e7c/src%2Fbootstrap%2Fdoc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6726ca2b280d75fbe2b2cfbac9ac2e61a9274e7c/src%2Fbootstrap%2Fdoc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fdoc.rs?ref=6726ca2b280d75fbe2b2cfbac9ac2e61a9274e7c", "patch": "@@ -693,6 +693,7 @@ impl Step for UnstableBookGen {\n         builder.create_dir(&out);\n         builder.remove_dir(&out);\n         let mut cmd = builder.tool_cmd(Tool::UnstableBookGen);\n+        cmd.arg(builder.src.join(\"library\"));\n         cmd.arg(builder.src.join(\"src\"));\n         cmd.arg(out);\n "}, {"sha": "11617911446ecee0fed0f5ee4e3e830ec9bc5942", "filename": "src/tools/unstable-book-gen/src/main.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/6726ca2b280d75fbe2b2cfbac9ac2e61a9274e7c/src%2Ftools%2Funstable-book-gen%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6726ca2b280d75fbe2b2cfbac9ac2e61a9274e7c/src%2Ftools%2Funstable-book-gen%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Funstable-book-gen%2Fsrc%2Fmain.rs?ref=6726ca2b280d75fbe2b2cfbac9ac2e61a9274e7c", "patch": "@@ -94,13 +94,15 @@ fn copy_recursive(from: &Path, to: &Path) {\n }\n \n fn main() {\n-    let src_path_str = env::args_os().skip(1).next().expect(\"source path required\");\n-    let dest_path_str = env::args_os().skip(2).next().expect(\"destination path required\");\n+    let library_path_str = env::args_os().skip(1).next().expect(\"library path required\");\n+    let src_path_str = env::args_os().skip(2).next().expect(\"source path required\");\n+    let dest_path_str = env::args_os().skip(3).next().expect(\"destination path required\");\n+    let library_path = Path::new(&library_path_str);\n     let src_path = Path::new(&src_path_str);\n     let dest_path = Path::new(&dest_path_str);\n \n     let lang_features = collect_lang_features(src_path, &mut false);\n-    let lib_features = collect_lib_features(src_path)\n+    let lib_features = collect_lib_features(library_path)\n         .into_iter()\n         .filter(|&(ref name, _)| !lang_features.contains_key(name))\n         .collect();"}]}