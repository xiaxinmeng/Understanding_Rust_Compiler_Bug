{"sha": "d360c481e8bd6079eb92b155a7c5451fc8bd35f6", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQzNjBjNDgxZThiZDYwNzllYjkyYjE1NWE3YzU0NTFmYzhiZDM1ZjY=", "commit": {"author": {"name": "Rafael \u00c1vila de Esp\u00edndola", "email": "respindola@mozilla.com", "date": "2011-06-08T17:47:21Z"}, "committer": {"name": "Rafael \u00c1vila de Esp\u00edndola", "email": "respindola@mozilla.com", "date": "2011-06-08T17:47:21Z"}, "message": "Don't force the fetch of main.o from main.a, we are not using main.a anymore.", "tree": {"sha": "5ca0dce3d0c9222456a660be0df9542c7ef13781", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5ca0dce3d0c9222456a660be0df9542c7ef13781"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d360c481e8bd6079eb92b155a7c5451fc8bd35f6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d360c481e8bd6079eb92b155a7c5451fc8bd35f6", "html_url": "https://github.com/rust-lang/rust/commit/d360c481e8bd6079eb92b155a7c5451fc8bd35f6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d360c481e8bd6079eb92b155a7c5451fc8bd35f6/comments", "author": null, "committer": null, "parents": [{"sha": "2c16be424b86e5599851da74d98191560744c46d", "url": "https://api.github.com/repos/rust-lang/rust/commits/2c16be424b86e5599851da74d98191560744c46d", "html_url": "https://github.com/rust-lang/rust/commit/2c16be424b86e5599851da74d98191560744c46d"}], "stats": {"total": 11, "additions": 0, "deletions": 11}, "files": [{"sha": "3780d2c86fb23fcfd6a997993fd33abd0453778a", "filename": "src/comp/middle/trans.rs", "status": "modified", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/d360c481e8bd6079eb92b155a7c5451fc8bd35f6/src%2Fcomp%2Fmiddle%2Ftrans.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d360c481e8bd6079eb92b155a7c5451fc8bd35f6/src%2Fcomp%2Fmiddle%2Ftrans.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Ftrans.rs?ref=d360c481e8bd6079eb92b155a7c5451fc8bd35f6", "patch": "@@ -8238,17 +8238,6 @@ fn trans_crate(&session::session sess, &@ast::crate crate,\n     trans_mod(cx, crate.node.module);\n     auto crate_map = create_crate_map(ccx);\n \n-    if (!sess.get_opts().shared) {\n-      auto gvar = llvm::LLVMAddGlobal(cx.ccx.llmod, T_ptr(T_int()),\n-                                    str::buf(\"_rust_fetch_this_object_hack\"));\n-\n-      auto gvar2 = llvm::LLVMAddGlobal(cx.ccx.llmod, T_ptr(T_ptr(T_int())),\n-                                   str::buf(\"_rust_fetch_this_object_hack2\"));\n-     llvm::LLVMSetInitializer(gvar2, gvar);\n-     llvm::LLVMSetGlobalConstant(gvar, True);\n-     llvm::LLVMSetGlobalConstant(gvar2, True);\n-   }\n-\n     emit_tydescs(ccx);\n \n     // Translate the metadata:"}]}