{"sha": "775670e32c18f31c5bf334f7649abe6e65f45b3d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc3NTY3MGUzMmMxOGYzMWM1YmYzMzRmNzY0OWFiZTZlNjVmNDViM2Q=", "commit": {"author": {"name": "Jade", "email": "software@lfcode.ca", "date": "2021-08-04T10:01:27Z"}, "committer": {"name": "Jade", "email": "software@lfcode.ca", "date": "2021-08-04T10:01:48Z"}, "message": "Split the test", "tree": {"sha": "8b826f4c0a6f3d3a9fbc01afdc1ac95f6bfeb796", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8b826f4c0a6f3d3a9fbc01afdc1ac95f6bfeb796"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/775670e32c18f31c5bf334f7649abe6e65f45b3d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/775670e32c18f31c5bf334f7649abe6e65f45b3d", "html_url": "https://github.com/rust-lang/rust/commit/775670e32c18f31c5bf334f7649abe6e65f45b3d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/775670e32c18f31c5bf334f7649abe6e65f45b3d/comments", "author": {"login": "lf-", "id": 6652840, "node_id": "MDQ6VXNlcjY2NTI4NDA=", "avatar_url": "https://avatars.githubusercontent.com/u/6652840?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lf-", "html_url": "https://github.com/lf-", "followers_url": "https://api.github.com/users/lf-/followers", "following_url": "https://api.github.com/users/lf-/following{/other_user}", "gists_url": "https://api.github.com/users/lf-/gists{/gist_id}", "starred_url": "https://api.github.com/users/lf-/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lf-/subscriptions", "organizations_url": "https://api.github.com/users/lf-/orgs", "repos_url": "https://api.github.com/users/lf-/repos", "events_url": "https://api.github.com/users/lf-/events{/privacy}", "received_events_url": "https://api.github.com/users/lf-/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lf-", "id": 6652840, "node_id": "MDQ6VXNlcjY2NTI4NDA=", "avatar_url": "https://avatars.githubusercontent.com/u/6652840?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lf-", "html_url": "https://github.com/lf-", "followers_url": "https://api.github.com/users/lf-/followers", "following_url": "https://api.github.com/users/lf-/following{/other_user}", "gists_url": "https://api.github.com/users/lf-/gists{/gist_id}", "starred_url": "https://api.github.com/users/lf-/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lf-/subscriptions", "organizations_url": "https://api.github.com/users/lf-/orgs", "repos_url": "https://api.github.com/users/lf-/repos", "events_url": "https://api.github.com/users/lf-/events{/privacy}", "received_events_url": "https://api.github.com/users/lf-/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b90ed92a5c7029146ca2c24686a1247d97648c61", "url": "https://api.github.com/repos/rust-lang/rust/commits/b90ed92a5c7029146ca2c24686a1247d97648c61", "html_url": "https://github.com/rust-lang/rust/commit/b90ed92a5c7029146ca2c24686a1247d97648c61"}], "stats": {"total": 44, "additions": 42, "deletions": 2}, "files": [{"sha": "fed5cca512d0e576671d04165ba17b98cdbfd0f3", "filename": "crates/parser/src/grammar/patterns.rs", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/775670e32c18f31c5bf334f7649abe6e65f45b3d/crates%2Fparser%2Fsrc%2Fgrammar%2Fpatterns.rs", "raw_url": "https://github.com/rust-lang/rust/raw/775670e32c18f31c5bf334f7649abe6e65f45b3d/crates%2Fparser%2Fsrc%2Fgrammar%2Fpatterns.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fparser%2Fsrc%2Fgrammar%2Fpatterns.rs?ref=775670e32c18f31c5bf334f7649abe6e65f45b3d", "patch": "@@ -69,12 +69,20 @@ fn pattern_single_r(p: &mut Parser, recovery_set: TokenSet) {\n         //         302 .. => (),\n         //     }\n         // }\n+\n+        // FIXME: support half_open_range_patterns (`..=2`),\n+        // exclusive_range_pattern (`..5`) with missing lhs\n         for &range_op in [T![...], T![..=], T![..]].iter() {\n             if p.at(range_op) {\n                 let m = lhs.precede(p);\n                 p.bump(range_op);\n-                if !p.at(T![=>]) {\n-                    // not a range pat like `302 .. => ()`\n+\n+                // `0 .. =>` or `let 0 .. =`\n+                //       ^                ^\n+                if p.at(T![=]) {\n+                    // test half_open_range_pat\n+                    // fn f() { let 0 .. = 1u32; }\n+                } else {\n                     atom_pat(p, recovery_set);\n                 }\n                 m.complete(p, RANGE_PAT);"}, {"sha": "67ac6a4633f596df5942c284db0a5d760b22d652", "filename": "crates/syntax/test_data/parser/inline/ok/0166_half_open_range_pat.rast", "status": "added", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/rust-lang/rust/blob/775670e32c18f31c5bf334f7649abe6e65f45b3d/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0166_half_open_range_pat.rast", "raw_url": "https://github.com/rust-lang/rust/raw/775670e32c18f31c5bf334f7649abe6e65f45b3d/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0166_half_open_range_pat.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0166_half_open_range_pat.rast?ref=775670e32c18f31c5bf334f7649abe6e65f45b3d", "patch": "@@ -0,0 +1,31 @@\n+SOURCE_FILE@0..28\n+  FN@0..27\n+    FN_KW@0..2 \"fn\"\n+    WHITESPACE@2..3 \" \"\n+    NAME@3..4\n+      IDENT@3..4 \"f\"\n+    PARAM_LIST@4..6\n+      L_PAREN@4..5 \"(\"\n+      R_PAREN@5..6 \")\"\n+    WHITESPACE@6..7 \" \"\n+    BLOCK_EXPR@7..27\n+      L_CURLY@7..8 \"{\"\n+      WHITESPACE@8..9 \" \"\n+      LET_STMT@9..25\n+        LET_KW@9..12 \"let\"\n+        WHITESPACE@12..13 \" \"\n+        RANGE_PAT@13..17\n+          LITERAL_PAT@13..14\n+            LITERAL@13..14\n+              INT_NUMBER@13..14 \"0\"\n+          WHITESPACE@14..15 \" \"\n+          DOT2@15..17 \"..\"\n+        WHITESPACE@17..18 \" \"\n+        EQ@18..19 \"=\"\n+        WHITESPACE@19..20 \" \"\n+        LITERAL@20..24\n+          INT_NUMBER@20..24 \"1u32\"\n+        SEMICOLON@24..25 \";\"\n+      WHITESPACE@25..26 \" \"\n+      R_CURLY@26..27 \"}\"\n+  WHITESPACE@27..28 \"\\n\""}, {"sha": "1360eda056583f094bb55770aebe9202c98e4ada", "filename": "crates/syntax/test_data/parser/inline/ok/0166_half_open_range_pat.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/775670e32c18f31c5bf334f7649abe6e65f45b3d/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0166_half_open_range_pat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/775670e32c18f31c5bf334f7649abe6e65f45b3d/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0166_half_open_range_pat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0166_half_open_range_pat.rs?ref=775670e32c18f31c5bf334f7649abe6e65f45b3d", "patch": "@@ -0,0 +1 @@\n+fn f() { let 0 .. = 1u32; }"}]}