{"sha": "b347097e4d729345bd7b1b1afdef2bccf904896e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIzNDcwOTdlNGQ3MjkzNDViZDdiMWIxYWZkZWYyYmNjZjkwNDg5NmU=", "commit": {"author": {"name": "Dylan DPC", "email": "dylan.dpc@gmail.com", "date": "2020-04-17T01:05:16Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-04-17T01:05:16Z"}, "message": "Rollup merge of #71182 - JohnTitor:regression-tests, r=Mark-Simulacrum\n\nAdd some regression tests\n\nCloses #24843\nCloses #28575\nCloses #54067\nCloses #66868\nCloses #67893\nCloses #68813", "tree": {"sha": "8e2ce69376b185693ef30b82461fdfdf8ac122f7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8e2ce69376b185693ef30b82461fdfdf8ac122f7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b347097e4d729345bd7b1b1afdef2bccf904896e", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJemQDMCRBK7hj4Ov3rIwAAdHIIABQf6pZwChtZCR4W+oRGXYVK\nve1gY3rza5eOubDNauFNaYRcMCJYLodqSiKyAJDjznkeQb1hwEfIIrE9EFub7EQB\ns7lVJDHyjrExSnZnLx0qtplIzSEneZpGZxT8Fq1k0BjNviwvaBKvHTfpz686tJsJ\nwRVimYhW0oxF/qNH0px63Nfv7byQT1dDHARFRmsozbfEBfOhv+E4MYx9ot0OMnbg\n8QCv1+2yzGP4r088S1vXx+CaRp+lddJtVjxieUENOz2msEBY8dntZ42Wg7COPkA3\nU/EhHHCg6aE40rD8m1sQ43QY18ZuyGzbQRncanIt/k1fQE29Y3B07ExGs0rfYDY=\n=Mb+t\n-----END PGP SIGNATURE-----\n", "payload": "tree 8e2ce69376b185693ef30b82461fdfdf8ac122f7\nparent 5280d15d62356fc9d5d7aa23180e5ccad468e521\nparent a6855b918b249751436d737d3f8bd2af23613101\nauthor Dylan DPC <dylan.dpc@gmail.com> 1587085516 +0200\ncommitter GitHub <noreply@github.com> 1587085516 +0200\n\nRollup merge of #71182 - JohnTitor:regression-tests, r=Mark-Simulacrum\n\nAdd some regression tests\n\nCloses #24843\nCloses #28575\nCloses #54067\nCloses #66868\nCloses #67893\nCloses #68813\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b347097e4d729345bd7b1b1afdef2bccf904896e", "html_url": "https://github.com/rust-lang/rust/commit/b347097e4d729345bd7b1b1afdef2bccf904896e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b347097e4d729345bd7b1b1afdef2bccf904896e/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5280d15d62356fc9d5d7aa23180e5ccad468e521", "url": "https://api.github.com/repos/rust-lang/rust/commits/5280d15d62356fc9d5d7aa23180e5ccad468e521", "html_url": "https://github.com/rust-lang/rust/commit/5280d15d62356fc9d5d7aa23180e5ccad468e521"}, {"sha": "a6855b918b249751436d737d3f8bd2af23613101", "url": "https://api.github.com/repos/rust-lang/rust/commits/a6855b918b249751436d737d3f8bd2af23613101", "html_url": "https://github.com/rust-lang/rust/commit/a6855b918b249751436d737d3f8bd2af23613101"}], "stats": {"total": 64, "additions": 64, "deletions": 0}, "files": [{"sha": "f2e097222bd7d5d203386628a8e92ae114b5188c", "filename": "src/test/ui/asm/issue-54067.rs", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/b347097e4d729345bd7b1b1afdef2bccf904896e/src%2Ftest%2Fui%2Fasm%2Fissue-54067.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b347097e4d729345bd7b1b1afdef2bccf904896e/src%2Ftest%2Fui%2Fasm%2Fissue-54067.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasm%2Fissue-54067.rs?ref=b347097e4d729345bd7b1b1afdef2bccf904896e", "patch": "@@ -0,0 +1,12 @@\n+// check-pass\n+// ignore-emscripten no llvm_asm! support\n+\n+#![feature(llvm_asm)]\n+\n+pub fn boot(addr: Option<u32>) {\n+    unsafe {\n+        llvm_asm!(\"mov sp, $0\"::\"r\" (addr));\n+    }\n+}\n+\n+fn main() {}"}, {"sha": "387966a5064fa58d329a8653f780fb0f5c450e86", "filename": "src/test/ui/async-await/issues/auxiliary/issue_67893.rs", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/b347097e4d729345bd7b1b1afdef2bccf904896e/src%2Ftest%2Fui%2Fasync-await%2Fissues%2Fauxiliary%2Fissue_67893.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b347097e4d729345bd7b1b1afdef2bccf904896e/src%2Ftest%2Fui%2Fasync-await%2Fissues%2Fauxiliary%2Fissue_67893.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasync-await%2Fissues%2Fauxiliary%2Fissue_67893.rs?ref=b347097e4d729345bd7b1b1afdef2bccf904896e", "patch": "@@ -0,0 +1,10 @@\n+// edition:2018\n+\n+use std::sync::{Arc, Mutex};\n+\n+pub async fn f(_: ()) {}\n+\n+pub async fn run() {\n+    let x: Arc<Mutex<()>> = unimplemented!();\n+    f(*x.lock().unwrap()).await;\n+}"}, {"sha": "d52303ac1cec65fbaef99bd2bc9d2bbdaed2ae40", "filename": "src/test/ui/async-await/issues/issue-67893.rs", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/b347097e4d729345bd7b1b1afdef2bccf904896e/src%2Ftest%2Fui%2Fasync-await%2Fissues%2Fissue-67893.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b347097e4d729345bd7b1b1afdef2bccf904896e/src%2Ftest%2Fui%2Fasync-await%2Fissues%2Fissue-67893.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasync-await%2Fissues%2Fissue-67893.rs?ref=b347097e4d729345bd7b1b1afdef2bccf904896e", "patch": "@@ -0,0 +1,13 @@\n+// aux-build: issue_67893.rs\n+// edition:2018\n+// dont-check-compiler-stderr\n+// FIXME(#71222): Add above flag because of the difference of stderrs on some env.\n+\n+extern crate issue_67893;\n+\n+fn g(_: impl Send) {}\n+\n+fn main() {\n+    g(issue_67893::run())\n+    //~^ ERROR: `std::sync::MutexGuard<'_, ()>` cannot be sent between threads safely\n+}"}, {"sha": "141136d25b215032aab173247f4a50aee10af02c", "filename": "src/test/ui/intrinsics/issue-28575.rs", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/b347097e4d729345bd7b1b1afdef2bccf904896e/src%2Ftest%2Fui%2Fintrinsics%2Fissue-28575.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b347097e4d729345bd7b1b1afdef2bccf904896e/src%2Ftest%2Fui%2Fintrinsics%2Fissue-28575.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fintrinsics%2Fissue-28575.rs?ref=b347097e4d729345bd7b1b1afdef2bccf904896e", "patch": "@@ -0,0 +1,9 @@\n+#![feature(intrinsics)]\n+\n+extern \"C\" {\n+    pub static FOO: extern \"rust-intrinsic\" fn();\n+}\n+\n+fn main() {\n+    FOO() //~ ERROR: use of extern static is unsafe\n+}"}, {"sha": "66369decf42246583fdbaea38c32f0d5ff13cc21", "filename": "src/test/ui/intrinsics/issue-28575.stderr", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/b347097e4d729345bd7b1b1afdef2bccf904896e/src%2Ftest%2Fui%2Fintrinsics%2Fissue-28575.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b347097e4d729345bd7b1b1afdef2bccf904896e/src%2Ftest%2Fui%2Fintrinsics%2Fissue-28575.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fintrinsics%2Fissue-28575.stderr?ref=b347097e4d729345bd7b1b1afdef2bccf904896e", "patch": "@@ -0,0 +1,11 @@\n+error[E0133]: use of extern static is unsafe and requires unsafe function or block\n+  --> $DIR/issue-28575.rs:8:5\n+   |\n+LL |     FOO()\n+   |     ^^^ use of extern static\n+   |\n+   = note: extern statics are not controlled by the Rust type system: invalid data, aliasing violations or data races will cause undefined behavior\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0133`."}, {"sha": "6ca04f8606038db04e45e674366b688de6bbc481", "filename": "src/test/ui/static/auxiliary/issue_24843.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/b347097e4d729345bd7b1b1afdef2bccf904896e/src%2Ftest%2Fui%2Fstatic%2Fauxiliary%2Fissue_24843.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b347097e4d729345bd7b1b1afdef2bccf904896e/src%2Ftest%2Fui%2Fstatic%2Fauxiliary%2Fissue_24843.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fstatic%2Fauxiliary%2Fissue_24843.rs?ref=b347097e4d729345bd7b1b1afdef2bccf904896e", "patch": "@@ -0,0 +1 @@\n+pub static TEST_STR: &'static str = \"Hello world\";"}, {"sha": "0b3397e210d70c99033d46dcc84ac7771f3bc03f", "filename": "src/test/ui/static/issue-24843.rs", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/b347097e4d729345bd7b1b1afdef2bccf904896e/src%2Ftest%2Fui%2Fstatic%2Fissue-24843.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b347097e4d729345bd7b1b1afdef2bccf904896e/src%2Ftest%2Fui%2Fstatic%2Fissue-24843.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fstatic%2Fissue-24843.rs?ref=b347097e4d729345bd7b1b1afdef2bccf904896e", "patch": "@@ -0,0 +1,8 @@\n+// aux-build: issue_24843.rs\n+// check-pass\n+\n+extern crate issue_24843;\n+\n+static _TEST_STR_2: &'static str = &issue_24843::TEST_STR;\n+\n+fn main() {}"}]}