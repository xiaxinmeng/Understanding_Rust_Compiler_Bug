{"sha": "ee0e841a2e949cba1dcf3a2fb04e9a673681e4fd", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVlMGU4NDFhMmU5NDljYmExZGNmM2EyZmIwNGU5YTY3MzY4MWU0ZmQ=", "commit": {"author": {"name": "Eric Huss", "email": "eric@huss.org", "date": "2021-02-17T03:17:01Z"}, "committer": {"name": "Eric Huss", "email": "eric@huss.org", "date": "2021-02-17T03:17:01Z"}, "message": "rustdoc: treat edition 2021 as unstable", "tree": {"sha": "6da62d366bdefb57d202fa9a05baad12ab439de7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6da62d366bdefb57d202fa9a05baad12ab439de7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ee0e841a2e949cba1dcf3a2fb04e9a673681e4fd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ee0e841a2e949cba1dcf3a2fb04e9a673681e4fd", "html_url": "https://github.com/rust-lang/rust/commit/ee0e841a2e949cba1dcf3a2fb04e9a673681e4fd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ee0e841a2e949cba1dcf3a2fb04e9a673681e4fd/comments", "author": {"login": "ehuss", "id": 43198, "node_id": "MDQ6VXNlcjQzMTk4", "avatar_url": "https://avatars.githubusercontent.com/u/43198?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehuss", "html_url": "https://github.com/ehuss", "followers_url": "https://api.github.com/users/ehuss/followers", "following_url": "https://api.github.com/users/ehuss/following{/other_user}", "gists_url": "https://api.github.com/users/ehuss/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehuss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehuss/subscriptions", "organizations_url": "https://api.github.com/users/ehuss/orgs", "repos_url": "https://api.github.com/users/ehuss/repos", "events_url": "https://api.github.com/users/ehuss/events{/privacy}", "received_events_url": "https://api.github.com/users/ehuss/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ehuss", "id": 43198, "node_id": "MDQ6VXNlcjQzMTk4", "avatar_url": "https://avatars.githubusercontent.com/u/43198?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehuss", "html_url": "https://github.com/ehuss", "followers_url": "https://api.github.com/users/ehuss/followers", "following_url": "https://api.github.com/users/ehuss/following{/other_user}", "gists_url": "https://api.github.com/users/ehuss/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehuss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehuss/subscriptions", "organizations_url": "https://api.github.com/users/ehuss/orgs", "repos_url": "https://api.github.com/users/ehuss/repos", "events_url": "https://api.github.com/users/ehuss/events{/privacy}", "received_events_url": "https://api.github.com/users/ehuss/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a143517d44cac50b20cbd3a0b579addab40dd399", "url": "https://api.github.com/repos/rust-lang/rust/commits/a143517d44cac50b20cbd3a0b579addab40dd399", "html_url": "https://github.com/rust-lang/rust/commit/a143517d44cac50b20cbd3a0b579addab40dd399"}], "stats": {"total": 16, "additions": 3, "deletions": 13}, "files": [{"sha": "4533b37f10b422711455ca5443d879443151dca4", "filename": "compiler/rustc_session/src/config.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ee0e841a2e949cba1dcf3a2fb04e9a673681e4fd/compiler%2Frustc_session%2Fsrc%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ee0e841a2e949cba1dcf3a2fb04e9a673681e4fd/compiler%2Frustc_session%2Fsrc%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_session%2Fsrc%2Fconfig.rs?ref=ee0e841a2e949cba1dcf3a2fb04e9a673681e4fd", "patch": "@@ -1350,7 +1350,7 @@ pub fn parse_error_format(\n     error_format\n }\n \n-fn parse_crate_edition(matches: &getopts::Matches) -> Edition {\n+pub fn parse_crate_edition(matches: &getopts::Matches) -> Edition {\n     let edition = match matches.opt_str(\"edition\") {\n         Some(arg) => Edition::from_str(&arg).unwrap_or_else(|_| {\n             early_error("}, {"sha": "1478437cefaa3af0513e3056874856d632f7b21c", "filename": "src/librustdoc/config.rs", "status": "modified", "additions": 2, "deletions": 12, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/ee0e841a2e949cba1dcf3a2fb04e9a673681e4fd/src%2Flibrustdoc%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ee0e841a2e949cba1dcf3a2fb04e9a673681e4fd/src%2Flibrustdoc%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fconfig.rs?ref=ee0e841a2e949cba1dcf3a2fb04e9a673681e4fd", "patch": "@@ -16,7 +16,7 @@ use rustc_session::config::{CodegenOptions, DebuggingOptions, ErrorOutputType, E\n use rustc_session::getopts;\n use rustc_session::lint::Level;\n use rustc_session::search_paths::SearchPath;\n-use rustc_span::edition::{Edition, DEFAULT_EDITION};\n+use rustc_span::edition::Edition;\n use rustc_target::spec::TargetTriple;\n \n use crate::core::new_handler;\n@@ -469,17 +469,7 @@ impl Options {\n             }\n         }\n \n-        let edition = if let Some(e) = matches.opt_str(\"edition\") {\n-            match e.parse() {\n-                Ok(e) => e,\n-                Err(_) => {\n-                    diag.struct_err(\"could not parse edition\").emit();\n-                    return Err(1);\n-                }\n-            }\n-        } else {\n-            DEFAULT_EDITION\n-        };\n+        let edition = config::parse_crate_edition(&matches);\n \n         let mut id_map = html::markdown::IdMap::new();\n         id_map.populate(&html::render::INITIAL_IDS);"}]}