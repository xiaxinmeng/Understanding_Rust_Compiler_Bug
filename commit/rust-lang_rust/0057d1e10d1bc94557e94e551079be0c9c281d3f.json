{"sha": "0057d1e10d1bc94557e94e551079be0c9c281d3f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjAwNTdkMWUxMGQxYmM5NDU1N2U5NGU1NTEwNzliZTBjOWMyODFkM2Y=", "commit": {"author": {"name": "Josh Mcguigan", "email": "joshmcg88@gmail.com", "date": "2020-03-01T04:53:01Z"}, "committer": {"name": "Josh Mcguigan", "email": "joshmcg88@gmail.com", "date": "2020-03-01T05:04:21Z"}, "message": "fix completion for super::super::", "tree": {"sha": "211de9914d53c0b9a004ce9a49d2ffca2f728fa6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/211de9914d53c0b9a004ce9a49d2ffca2f728fa6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0057d1e10d1bc94557e94e551079be0c9c281d3f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0057d1e10d1bc94557e94e551079be0c9c281d3f", "html_url": "https://github.com/rust-lang/rust/commit/0057d1e10d1bc94557e94e551079be0c9c281d3f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0057d1e10d1bc94557e94e551079be0c9c281d3f/comments", "author": {"login": "JoshMcguigan", "id": 22216761, "node_id": "MDQ6VXNlcjIyMjE2NzYx", "avatar_url": "https://avatars.githubusercontent.com/u/22216761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JoshMcguigan", "html_url": "https://github.com/JoshMcguigan", "followers_url": "https://api.github.com/users/JoshMcguigan/followers", "following_url": "https://api.github.com/users/JoshMcguigan/following{/other_user}", "gists_url": "https://api.github.com/users/JoshMcguigan/gists{/gist_id}", "starred_url": "https://api.github.com/users/JoshMcguigan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JoshMcguigan/subscriptions", "organizations_url": "https://api.github.com/users/JoshMcguigan/orgs", "repos_url": "https://api.github.com/users/JoshMcguigan/repos", "events_url": "https://api.github.com/users/JoshMcguigan/events{/privacy}", "received_events_url": "https://api.github.com/users/JoshMcguigan/received_events", "type": "User", "site_admin": false}, "committer": {"login": "JoshMcguigan", "id": 22216761, "node_id": "MDQ6VXNlcjIyMjE2NzYx", "avatar_url": "https://avatars.githubusercontent.com/u/22216761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JoshMcguigan", "html_url": "https://github.com/JoshMcguigan", "followers_url": "https://api.github.com/users/JoshMcguigan/followers", "following_url": "https://api.github.com/users/JoshMcguigan/following{/other_user}", "gists_url": "https://api.github.com/users/JoshMcguigan/gists{/gist_id}", "starred_url": "https://api.github.com/users/JoshMcguigan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JoshMcguigan/subscriptions", "organizations_url": "https://api.github.com/users/JoshMcguigan/orgs", "repos_url": "https://api.github.com/users/JoshMcguigan/repos", "events_url": "https://api.github.com/users/JoshMcguigan/events{/privacy}", "received_events_url": "https://api.github.com/users/JoshMcguigan/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "69faf81e0db5abe54b97708c5b8089934fca32f6", "url": "https://api.github.com/repos/rust-lang/rust/commits/69faf81e0db5abe54b97708c5b8089934fca32f6", "html_url": "https://github.com/rust-lang/rust/commit/69faf81e0db5abe54b97708c5b8089934fca32f6"}], "stats": {"total": 47, "additions": 45, "deletions": 2}, "files": [{"sha": "0934520d70fc0ade07900ac25cebee4036b1fc1f", "filename": "crates/ra_hir_def/src/path/lower.rs", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/0057d1e10d1bc94557e94e551079be0c9c281d3f/crates%2Fra_hir_def%2Fsrc%2Fpath%2Flower.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0057d1e10d1bc94557e94e551079be0c9c281d3f/crates%2Fra_hir_def%2Fsrc%2Fpath%2Flower.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir_def%2Fsrc%2Fpath%2Flower.rs?ref=0057d1e10d1bc94557e94e551079be0c9c281d3f", "patch": "@@ -101,8 +101,12 @@ pub(super) fn lower_path(mut path: ast::Path, hygiene: &Hygiene) -> Option<Path>\n                 break;\n             }\n             ast::PathSegmentKind::SuperKw => {\n-                kind = PathKind::Super(1);\n-                break;\n+                let nested_super_count = if let PathKind::Super(n) = kind {\n+                    n\n+                } else {\n+                    0\n+                };\n+                kind = PathKind::Super(nested_super_count + 1);\n             }\n         }\n         path = match qualifier(&path) {"}, {"sha": "9145aa183dc7b1c4bde1b23cad1a8d41fe0e35c4", "filename": "crates/ra_ide/src/completion/complete_dot.rs", "status": "modified", "additions": 39, "deletions": 0, "changes": 39, "blob_url": "https://github.com/rust-lang/rust/blob/0057d1e10d1bc94557e94e551079be0c9c281d3f/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_dot.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0057d1e10d1bc94557e94e551079be0c9c281d3f/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_dot.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_dot.rs?ref=0057d1e10d1bc94557e94e551079be0c9c281d3f", "patch": "@@ -545,4 +545,43 @@ mod tests {\n         \"###\n         )\n     }\n+\n+    #[test]\n+    fn test_super_super_completion() {\n+        assert_debug_snapshot!(\n+        do_ref_completion(\n+                r\"\n+                mod a {\n+                    const A: usize = 0;\n+\n+                    mod b {\n+                        const B: usize = 0;\n+\n+                        mod c {\n+                            use super::super::<|>\n+                        }\n+                    }\n+                }\n+                \",\n+        ),\n+            @r###\"\n+        [\n+            CompletionItem {\n+                label: \"A\",\n+                source_range: [217; 217),\n+                delete: [217; 217),\n+                insert: \"A\",\n+                kind: Const,\n+            },\n+            CompletionItem {\n+                label: \"b\",\n+                source_range: [217; 217),\n+                delete: [217; 217),\n+                insert: \"b\",\n+                kind: Module,\n+            },\n+        ]\n+        \"###\n+        );\n+    }\n }"}]}