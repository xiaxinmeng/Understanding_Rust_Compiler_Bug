{"sha": "03a521b4fecf74d21278dab6a6034587da7b9dd9", "node_id": "C_kwDOAAsO6NoAKDAzYTUyMWI0ZmVjZjc0ZDIxMjc4ZGFiNmE2MDM0NTg3ZGE3YjlkZDk", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-10-14T21:43:46Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-10-14T21:43:46Z"}, "message": "Rollup merge of #103059 - beetrees:duration-from-negative-zero, r=thomcc\n\nFix `Duration::{try_,}from_secs_f{32,64}(-0.0)`\n\nMake `Duration::{try_,}from_secs_f{32,64}(-0.0)` return `Duration::ZERO` (as they did before #90247) instead of erroring/panicking.\n\nI'll update this PR to remove the `#![feature(duration_checked_float)]` if #102271 is merged before this PR.\n\nTracking issue for `try_from_secs_f{32,64}`: #83400", "tree": {"sha": "28203058d86c8f6931d8d3f8c68ccb09b6719be3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/28203058d86c8f6931d8d3f8c68ccb09b6719be3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/03a521b4fecf74d21278dab6a6034587da7b9dd9", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjSdgSCRBK7hj4Ov3rIwAAuncIAF+VT5ANSzNAppNnPJSulaSM\n9R5asjAEySpReXMyETommA7rv6hszzcVUXF7Vp9bfMu+XnoDYsuPEF7AwGBU6jl+\nz0qr9Udy3WzE38nIfs6iHbM+socpX6mrzZLzNS/rtj70c+MIsfAoDY7wKUrpTu/R\nn4b4oPQPcciNDXTPv3ojfsk/Xt3vugcD4vdNu8uYxVVssa1q4xi9Ik7QMHnwSX7V\nla/xxmZZ8fceFdV3BbJpldu08q9MAuVFx/fNU6LqaUn4VNT6XJqcGiWBH0jqkFg0\n/1mgnzT7FM/5kxFjDB0AuPhNlWtEpgiCTKrQ0yogfa6APd0AqM3GyY3mDQyDIb8=\n=cxve\n-----END PGP SIGNATURE-----\n", "payload": "tree 28203058d86c8f6931d8d3f8c68ccb09b6719be3\nparent 62a9c32848e2b2cddf86ce6f4338aa66c2201580\nparent c9948f5c5f5cc49a74f04e33a1b0cf6ed6a22b93\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1665783826 +0200\ncommitter GitHub <noreply@github.com> 1665783826 +0200\n\nRollup merge of #103059 - beetrees:duration-from-negative-zero, r=thomcc\n\nFix `Duration::{try_,}from_secs_f{32,64}(-0.0)`\n\nMake `Duration::{try_,}from_secs_f{32,64}(-0.0)` return `Duration::ZERO` (as they did before #90247) instead of erroring/panicking.\n\nI'll update this PR to remove the `#![feature(duration_checked_float)]` if #102271 is merged before this PR.\n\nTracking issue for `try_from_secs_f{32,64}`: #83400\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/03a521b4fecf74d21278dab6a6034587da7b9dd9", "html_url": "https://github.com/rust-lang/rust/commit/03a521b4fecf74d21278dab6a6034587da7b9dd9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/03a521b4fecf74d21278dab6a6034587da7b9dd9/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "62a9c32848e2b2cddf86ce6f4338aa66c2201580", "url": "https://api.github.com/repos/rust-lang/rust/commits/62a9c32848e2b2cddf86ce6f4338aa66c2201580", "html_url": "https://github.com/rust-lang/rust/commit/62a9c32848e2b2cddf86ce6f4338aa66c2201580"}, {"sha": "c9948f5c5f5cc49a74f04e33a1b0cf6ed6a22b93", "url": "https://api.github.com/repos/rust-lang/rust/commits/c9948f5c5f5cc49a74f04e33a1b0cf6ed6a22b93", "html_url": "https://github.com/rust-lang/rust/commit/c9948f5c5f5cc49a74f04e33a1b0cf6ed6a22b93"}], "stats": {"total": 11, "additions": 10, "deletions": 1}, "files": [{"sha": "7cbb477d7a3469ee2a6391de9068db7295bb2d61", "filename": "library/core/src/time.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/03a521b4fecf74d21278dab6a6034587da7b9dd9/library%2Fcore%2Fsrc%2Ftime.rs", "raw_url": "https://github.com/rust-lang/rust/raw/03a521b4fecf74d21278dab6a6034587da7b9dd9/library%2Fcore%2Fsrc%2Ftime.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Ftime.rs?ref=03a521b4fecf74d21278dab6a6034587da7b9dd9", "patch": "@@ -1279,7 +1279,7 @@ macro_rules! try_from_secs {\n         const MANT_MASK: $bits_ty = (1 << $mant_bits) - 1;\n         const EXP_MASK: $bits_ty = (1 << $exp_bits) - 1;\n \n-        if $secs.is_sign_negative() {\n+        if $secs < 0.0 {\n             return Err(FromFloatSecsError { kind: FromFloatSecsErrorKind::Negative });\n         }\n "}, {"sha": "525a495903d5312777e1ca22e577b55f29e7ca25", "filename": "library/core/tests/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/03a521b4fecf74d21278dab6a6034587da7b9dd9/library%2Fcore%2Ftests%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/03a521b4fecf74d21278dab6a6034587da7b9dd9/library%2Fcore%2Ftests%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Ftests%2Flib.rs?ref=03a521b4fecf74d21278dab6a6034587da7b9dd9", "patch": "@@ -101,6 +101,7 @@\n #![feature(provide_any)]\n #![feature(utf8_chunks)]\n #![feature(is_ascii_octdigit)]\n+#![feature(duration_checked_float)]\n #![deny(unsafe_op_in_unsafe_fn)]\n \n extern crate test;"}, {"sha": "a05128de471ab3580f56cfa0f35e8ae5cbf348dd", "filename": "library/core/tests/time.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/03a521b4fecf74d21278dab6a6034587da7b9dd9/library%2Fcore%2Ftests%2Ftime.rs", "raw_url": "https://github.com/rust-lang/rust/raw/03a521b4fecf74d21278dab6a6034587da7b9dd9/library%2Fcore%2Ftests%2Ftime.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Ftests%2Ftime.rs?ref=03a521b4fecf74d21278dab6a6034587da7b9dd9", "patch": "@@ -467,3 +467,11 @@ fn duration_const() {\n     const SATURATING_MUL: Duration = MAX.saturating_mul(2);\n     assert_eq!(SATURATING_MUL, MAX);\n }\n+\n+#[test]\n+fn from_neg_zero() {\n+    assert_eq!(Duration::try_from_secs_f32(-0.0), Ok(Duration::ZERO));\n+    assert_eq!(Duration::try_from_secs_f64(-0.0), Ok(Duration::ZERO));\n+    assert_eq!(Duration::from_secs_f32(-0.0), Duration::ZERO);\n+    assert_eq!(Duration::from_secs_f64(-0.0), Duration::ZERO);\n+}"}]}