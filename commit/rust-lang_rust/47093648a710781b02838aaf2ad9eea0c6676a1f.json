{"sha": "47093648a710781b02838aaf2ad9eea0c6676a1f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ3MDkzNjQ4YTcxMDc4MWIwMjgzOGFhZjJhZDllZWEwYzY2NzZhMWY=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2014-03-25T22:40:52Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2014-03-25T22:50:36Z"}, "message": "mk: Use rwildcard to calculate dependent files\n\nThe previous dependency calculation was based on an arbitrary set of asterisks\nat an arbitrary depth, but using the recursive version should be much more\nrobust in figuring out what's dependent.\n\nCloses #13118", "tree": {"sha": "6606ba6f39c92545953973fb61ae286bce6f9972", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6606ba6f39c92545953973fb61ae286bce6f9972"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/47093648a710781b02838aaf2ad9eea0c6676a1f", "comment_count": 9, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/47093648a710781b02838aaf2ad9eea0c6676a1f", "html_url": "https://github.com/rust-lang/rust/commit/47093648a710781b02838aaf2ad9eea0c6676a1f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/47093648a710781b02838aaf2ad9eea0c6676a1f/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "de4473201a85bf8f5522f7def903a068f8a7d12a", "url": "https://api.github.com/repos/rust-lang/rust/commits/de4473201a85bf8f5522f7def903a068f8a7d12a", "html_url": "https://github.com/rust-lang/rust/commit/de4473201a85bf8f5522f7def903a068f8a7d12a"}], "stats": {"total": 10, "additions": 4, "deletions": 6}, "files": [{"sha": "9661f8f04cfef1621f1722f1e46a87a85dda738b", "filename": "Makefile.in", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/47093648a710781b02838aaf2ad9eea0c6676a1f/Makefile.in", "raw_url": "https://github.com/rust-lang/rust/raw/47093648a710781b02838aaf2ad9eea0c6676a1f/Makefile.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Makefile.in?ref=47093648a710781b02838aaf2ad9eea0c6676a1f", "patch": "@@ -177,10 +177,10 @@ include config.mk\n \n # Just a few macros used everywhere\n include $(CFG_SRC_DIR)mk/util.mk\n-# All crates and their dependencies\n-include $(CFG_SRC_DIR)mk/crates.mk\n # Reconfiguring when the makefiles or submodules change\n include $(CFG_SRC_DIR)mk/reconfig.mk\n+# All crates and their dependencies\n+include $(CFG_SRC_DIR)mk/crates.mk\n # Various bits of setup, common macros, and top-level rules\n include $(CFG_SRC_DIR)mk/main.mk\n # C and assembly components that are not LLVM"}, {"sha": "89ea98e801419eb0700c7e0fdd2b6b645bef06d7", "filename": "mk/crates.mk", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/47093648a710781b02838aaf2ad9eea0c6676a1f/mk%2Fcrates.mk", "raw_url": "https://github.com/rust-lang/rust/raw/47093648a710781b02838aaf2ad9eea0c6676a1f/mk%2Fcrates.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fcrates.mk?ref=47093648a710781b02838aaf2ad9eea0c6676a1f", "patch": "@@ -105,8 +105,7 @@ COMPILER_DOC_CRATES := rustc syntax\n # $(1) is the crate to generate variables for\n define RUST_CRATE\n CRATEFILE_$(1) := $$(S)src/lib$(1)/lib.rs\n-RSINPUTS_$(1) := $$(wildcard $$(addprefix $(S)src/lib$(1), \\\n-\t\t\t\t*.rs */*.rs */*/*.rs */*/*/*.rs))\n+RSINPUTS_$(1) := $$(call rwildcard,$(S)src/lib$(1)/,*.rs)\n RUST_DEPS_$(1) := $$(filter-out native:%,$$(DEPS_$(1)))\n NATIVE_DEPS_$(1) := $$(patsubst native:%,%,$$(filter native:%,$$(DEPS_$(1))))\n endef\n@@ -117,8 +116,7 @@ $(foreach crate,$(CRATES),$(eval $(call RUST_CRATE,$(crate))))\n #\n # $(1) is the crate to generate variables for\n define RUST_TOOL\n-TOOL_INPUTS_$(1) := $$(wildcard $$(addprefix $$(dir $$(TOOL_SOURCE_$(1))), \\\n-\t\t\t\t*.rs */*.rs */*/*.rs */*/*/*.rs))\n+TOOL_INPUTS_$(1) := $$(call rwildcard,$$(dir $$(TOOL_SOURCE_$(1))),*.rs)\n endef\n \n $(foreach crate,$(TOOLS),$(eval $(call RUST_TOOL,$(crate))))"}]}