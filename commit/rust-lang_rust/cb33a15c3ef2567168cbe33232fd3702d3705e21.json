{"sha": "cb33a15c3ef2567168cbe33232fd3702d3705e21", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNiMzNhMTVjM2VmMjU2NzE2OGNiZTMzMjMyZmQzNzAyZDM3MDVlMjE=", "commit": {"author": {"name": "Dylan DPC", "email": "dylan.dpc@gmail.com", "date": "2020-09-05T14:28:16Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-09-05T14:28:16Z"}, "message": "Rollup merge of #75695 - JohnTitor:regression-test, r=Dylan-DPC\n\nAdd a regression test for issue-72793\n\nAdds a regression test for #72793, which is fixed by #75443. Note that this won't close the issue as the snippet still shows ICE with `-Zmir-opt-level=2`. But it makes sense to add a test anyway.", "tree": {"sha": "bc1659e32759b3aae89806ad256b381bec39c894", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bc1659e32759b3aae89806ad256b381bec39c894"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/cb33a15c3ef2567168cbe33232fd3702d3705e21", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfU6CACRBK7hj4Ov3rIwAAdHIIAKbJJL0VGAM18wYdIIUyxU2T\nl+yoyhLWuQ1xHQazTpzp3qaNW+YIlfqBOJbNRiEhvNLZaekkVvdsICyTO8XASVme\nwr4MFrHdm+RouHjhvosIIS4CMUruGeMK1Bu+m8ldS3tlov8bUaKJVSpTHmHTvROc\nYLqt0XL1MXUwcn+cIEiZuY05oUV7HYQvNuEv0kTEh+CYxF743Jz58ajMmY4dAlQZ\nQcIlr7/5c1KIH7c6IiNbrJ+gGTpUnUgymclbufUzuMm2HjMU5+LNpj5fpnIvU118\n4ffv+zUKvDJpbkN+MDD+MYLtTPZcCdUwcdYrUXvoNB6TpSppkPLQdakSBF+sVXc=\n=ECnF\n-----END PGP SIGNATURE-----\n", "payload": "tree bc1659e32759b3aae89806ad256b381bec39c894\nparent 81a769f261047afd8e31cc488b173b0ab5ac4205\nparent 18ad5a594ec4ee039897eb03d90dfeb117b4c6d6\nauthor Dylan DPC <dylan.dpc@gmail.com> 1599316096 +0200\ncommitter GitHub <noreply@github.com> 1599316096 +0200\n\nRollup merge of #75695 - JohnTitor:regression-test, r=Dylan-DPC\n\nAdd a regression test for issue-72793\n\nAdds a regression test for #72793, which is fixed by #75443. Note that this won't close the issue as the snippet still shows ICE with `-Zmir-opt-level=2`. But it makes sense to add a test anyway.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/cb33a15c3ef2567168cbe33232fd3702d3705e21", "html_url": "https://github.com/rust-lang/rust/commit/cb33a15c3ef2567168cbe33232fd3702d3705e21", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/cb33a15c3ef2567168cbe33232fd3702d3705e21/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "81a769f261047afd8e31cc488b173b0ab5ac4205", "url": "https://api.github.com/repos/rust-lang/rust/commits/81a769f261047afd8e31cc488b173b0ab5ac4205", "html_url": "https://github.com/rust-lang/rust/commit/81a769f261047afd8e31cc488b173b0ab5ac4205"}, {"sha": "18ad5a594ec4ee039897eb03d90dfeb117b4c6d6", "url": "https://api.github.com/repos/rust-lang/rust/commits/18ad5a594ec4ee039897eb03d90dfeb117b4c6d6", "html_url": "https://github.com/rust-lang/rust/commit/18ad5a594ec4ee039897eb03d90dfeb117b4c6d6"}], "stats": {"total": 27, "additions": 27, "deletions": 0}, "files": [{"sha": "e643a8cab5b027c19e20b131063706f55945a60a", "filename": "src/test/ui/type-alias-impl-trait/issue-72793.rs", "status": "added", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/cb33a15c3ef2567168cbe33232fd3702d3705e21/src%2Ftest%2Fui%2Ftype-alias-impl-trait%2Fissue-72793.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cb33a15c3ef2567168cbe33232fd3702d3705e21/src%2Ftest%2Fui%2Ftype-alias-impl-trait%2Fissue-72793.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftype-alias-impl-trait%2Fissue-72793.rs?ref=cb33a15c3ef2567168cbe33232fd3702d3705e21", "patch": "@@ -0,0 +1,27 @@\n+// build-pass\n+\n+// Regression test for #72793.\n+// FIXME: This still shows ICE with `-Zmir-opt-level=2`.\n+\n+#![feature(type_alias_impl_trait)]\n+\n+trait T { type Item; }\n+\n+type Alias<'a> = impl T<Item = &'a ()>;\n+\n+struct S;\n+impl<'a> T for &'a S {\n+    type Item = &'a ();\n+}\n+\n+fn filter_positive<'a>() -> Alias<'a> {\n+    &S\n+}\n+\n+fn with_positive(fun: impl Fn(Alias<'_>)) {\n+    fun(filter_positive());\n+}\n+\n+fn main() {\n+    with_positive(|_| ());\n+}"}]}