{"sha": "ee5ea24d36d44a56cb827199ac00a1bebe74db06", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVlNWVhMjRkMzZkNDRhNTZjYjgyNzE5OWFjMDBhMWJlYmU3NGRiMDY=", "commit": {"author": {"name": "Jesus Rubio", "email": "jesusprubio@gmail.com", "date": "2021-02-01T17:22:13Z"}, "committer": {"name": "Jesus Rubio", "email": "jesusprubio@gmail.com", "date": "2021-02-01T17:22:13Z"}, "message": "Add long error explanation for E0521", "tree": {"sha": "39345f867fca433dad1034848dc4a56c85c8303f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/39345f867fca433dad1034848dc4a56c85c8303f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ee5ea24d36d44a56cb827199ac00a1bebe74db06", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ee5ea24d36d44a56cb827199ac00a1bebe74db06", "html_url": "https://github.com/rust-lang/rust/commit/ee5ea24d36d44a56cb827199ac00a1bebe74db06", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ee5ea24d36d44a56cb827199ac00a1bebe74db06/comments", "author": {"login": "jesusprubio", "id": 2753855, "node_id": "MDQ6VXNlcjI3NTM4NTU=", "avatar_url": "https://avatars.githubusercontent.com/u/2753855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jesusprubio", "html_url": "https://github.com/jesusprubio", "followers_url": "https://api.github.com/users/jesusprubio/followers", "following_url": "https://api.github.com/users/jesusprubio/following{/other_user}", "gists_url": "https://api.github.com/users/jesusprubio/gists{/gist_id}", "starred_url": "https://api.github.com/users/jesusprubio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jesusprubio/subscriptions", "organizations_url": "https://api.github.com/users/jesusprubio/orgs", "repos_url": "https://api.github.com/users/jesusprubio/repos", "events_url": "https://api.github.com/users/jesusprubio/events{/privacy}", "received_events_url": "https://api.github.com/users/jesusprubio/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jesusprubio", "id": 2753855, "node_id": "MDQ6VXNlcjI3NTM4NTU=", "avatar_url": "https://avatars.githubusercontent.com/u/2753855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jesusprubio", "html_url": "https://github.com/jesusprubio", "followers_url": "https://api.github.com/users/jesusprubio/followers", "following_url": "https://api.github.com/users/jesusprubio/following{/other_user}", "gists_url": "https://api.github.com/users/jesusprubio/gists{/gist_id}", "starred_url": "https://api.github.com/users/jesusprubio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jesusprubio/subscriptions", "organizations_url": "https://api.github.com/users/jesusprubio/orgs", "repos_url": "https://api.github.com/users/jesusprubio/repos", "events_url": "https://api.github.com/users/jesusprubio/events{/privacy}", "received_events_url": "https://api.github.com/users/jesusprubio/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e0d9f793990d20f8f640097e28556886ba5362f0", "url": "https://api.github.com/repos/rust-lang/rust/commits/e0d9f793990d20f8f640097e28556886ba5362f0", "html_url": "https://github.com/rust-lang/rust/commit/e0d9f793990d20f8f640097e28556886ba5362f0"}], "stats": {"total": 30, "additions": 29, "deletions": 1}, "files": [{"sha": "9ce74dd9b5a791275878c9ce52c56c3e95b90351", "filename": "compiler/rustc_error_codes/src/error_codes.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ee5ea24d36d44a56cb827199ac00a1bebe74db06/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ee5ea24d36d44a56cb827199ac00a1bebe74db06/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes.rs?ref=ee5ea24d36d44a56cb827199ac00a1bebe74db06", "patch": "@@ -267,6 +267,7 @@ E0516: include_str!(\"./error_codes/E0516.md\"),\n E0517: include_str!(\"./error_codes/E0517.md\"),\n E0518: include_str!(\"./error_codes/E0518.md\"),\n E0520: include_str!(\"./error_codes/E0520.md\"),\n+E0521: include_str!(\"./error_codes/E0521.md\"),\n E0522: include_str!(\"./error_codes/E0522.md\"),\n E0524: include_str!(\"./error_codes/E0524.md\"),\n E0525: include_str!(\"./error_codes/E0525.md\"),\n@@ -597,7 +598,6 @@ E0780: include_str!(\"./error_codes/E0780.md\"),\n     E0514, // metadata version mismatch\n     E0519, // local crate and dependency have same (crate-name, disambiguator)\n     // two dependencies have same (crate-name, disambiguator) but different SVH\n-    E0521, // borrowed data escapes outside of closure\n     E0523,\n //  E0526, // shuffle indices are not constant\n //  E0540, // multiple rustc_deprecated attributes"}, {"sha": "65dcac983acd5feac6fc1b3b151098c1480a9ef3", "filename": "compiler/rustc_error_codes/src/error_codes/E0521.md", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/ee5ea24d36d44a56cb827199ac00a1bebe74db06/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0521.md", "raw_url": "https://github.com/rust-lang/rust/raw/ee5ea24d36d44a56cb827199ac00a1bebe74db06/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0521.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0521.md?ref=ee5ea24d36d44a56cb827199ac00a1bebe74db06", "patch": "@@ -0,0 +1,28 @@\n+Borrowed data escapes outside of closure.\n+\n+Erroneous code example:\n+\n+```compile_fail,E0521\n+let mut list: Vec<&str> = Vec::new();\n+\n+let _add = |el: &str| {\n+    list.push(el); // error: `el` escapes the closure body here\n+};\n+```\n+\n+A type anotation of a closure parameter implies a new lifetime declaration.\n+Consider to drop it, the compiler is reliably able to infer them.\n+\n+```\n+let mut list: Vec<&str> = Vec::new();\n+\n+let _add = |el| {\n+    list.push(el);\n+};\n+```\n+\n+See the [Closure type inference and annotation][closure-infere-annotation] and\n+[Lifetime elision][lifetime-elision] sections of the Book for more details.\n+\n+[closure-infere-annotation]: https://doc.rust-lang.org/book/ch13-01-closures.html#closure-type-inference-and-annotation\n+[lifetime-elision]: https://doc.rust-lang.org/reference/lifetime-elision.html"}]}