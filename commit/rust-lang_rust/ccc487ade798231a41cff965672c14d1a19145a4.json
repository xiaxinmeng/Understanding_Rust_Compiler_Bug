{"sha": "ccc487ade798231a41cff965672c14d1a19145a4", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNjYzQ4N2FkZTc5ODIzMWE0MWNmZjk2NTY3MmMxNGQxYTE5MTQ1YTQ=", "commit": {"author": {"name": "Seiichi Uchida", "email": "seuchida@gmail.com", "date": "2017-12-17T06:25:24Z"}, "committer": {"name": "Seiichi Uchida", "email": "seuchida@gmail.com", "date": "2017-12-17T06:25:24Z"}, "message": "Do not put comment's line start and closer on the same line", "tree": {"sha": "1bd8273bcf23046a441995c3ddf0245075619293", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1bd8273bcf23046a441995c3ddf0245075619293"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ccc487ade798231a41cff965672c14d1a19145a4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ccc487ade798231a41cff965672c14d1a19145a4", "html_url": "https://github.com/rust-lang/rust/commit/ccc487ade798231a41cff965672c14d1a19145a4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ccc487ade798231a41cff965672c14d1a19145a4/comments", "author": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "committer": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "81eb88c4c083eef44f6a821b99ef00dbe6b195df", "url": "https://api.github.com/repos/rust-lang/rust/commits/81eb88c4c083eef44f6a821b99ef00dbe6b195df", "html_url": "https://github.com/rust-lang/rust/commit/81eb88c4c083eef44f6a821b99ef00dbe6b195df"}], "stats": {"total": 5, "additions": 4, "deletions": 1}, "files": [{"sha": "441bb858e2a887b3b82244a0c3189647c41a041e", "filename": "src/comment.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/ccc487ade798231a41cff965672c14d1a19145a4/src%2Fcomment.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ccc487ade798231a41cff965672c14d1a19145a4/src%2Fcomment.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomment.rs?ref=ccc487ade798231a41cff965672c14d1a19145a4", "patch": "@@ -333,6 +333,9 @@ fn rewrite_comment_inner(\n             }\n         } else if is_prev_line_multi_line && !line.is_empty() {\n             result.push(' ')\n+        } else if is_last && !closer.is_empty() && line.is_empty() {\n+            result.push('\\n');\n+            result.push_str(&indent_str);\n         } else {\n             result.push_str(&comment_line_separator);\n             if !has_leading_whitespace && result.ends_with(' ') {\n@@ -393,7 +396,7 @@ fn rewrite_comment_inner(\n                 Shape::legacy(max_chars, fmt_indent)\n             };\n         } else {\n-            if line.is_empty() && result.ends_with(' ') {\n+            if line.is_empty() && result.ends_with(' ') && !is_last {\n                 // Remove space if this is an empty comment or a doc comment.\n                 result.pop();\n             }"}]}