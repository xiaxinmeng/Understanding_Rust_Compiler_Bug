{"sha": "d2235f20b5295394450f4962fb5f93254e63640c", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQyMjM1ZjIwYjUyOTUzOTQ0NTBmNDk2MmZiNWY5MzI1NGU2MzY0MGM=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2018-04-01T12:54:02Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2018-04-01T12:54:02Z"}, "message": "Auto merge of #49478 - Phlosioneer:fix-windows-file-not-found, r=petrochenkov\n\nFix escaped backslash in windows file not found message\n\nWhen a module is declared, but no matching file exists, rustc gives\nan error like `help: name the file either foo.rs or foo/mod.rs inside\nthe directory \"src/bar\"`. However, at on windows, the backslash was\ndouble-escaped when naming the directory.\n\nIt did this because the string was printed in debug mode (`\"{:?}\"`) to\nsurround it with quotes. However, it should just be printed like any\nother directory in an error message and surrounded by escaped quotes,\nrather than relying on the debug print to add quotes (`\"\\\"{}\\\"\"`).\n\nI also checked the test suite to see if this output is being correctly tested. It's not - it only tests up to the word \"directory\". Presumably this is so that the test is not dependent on its exact position in the source tree. I don't know a better way to test this, unless the test suite supports regex?", "tree": {"sha": "9338da2514f1211a3994516c70598189ab6ba28d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9338da2514f1211a3994516c70598189ab6ba28d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d2235f20b5295394450f4962fb5f93254e63640c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d2235f20b5295394450f4962fb5f93254e63640c", "html_url": "https://github.com/rust-lang/rust/commit/d2235f20b5295394450f4962fb5f93254e63640c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d2235f20b5295394450f4962fb5f93254e63640c/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cb1f89864e73692d4cad83270d6b5e31047f96cf", "url": "https://api.github.com/repos/rust-lang/rust/commits/cb1f89864e73692d4cad83270d6b5e31047f96cf", "html_url": "https://github.com/rust-lang/rust/commit/cb1f89864e73692d4cad83270d6b5e31047f96cf"}, {"sha": "19eedf98ffa8df52f7be7c003957ef11521551f4", "url": "https://api.github.com/repos/rust-lang/rust/commits/19eedf98ffa8df52f7be7c003957ef11521551f4", "html_url": "https://github.com/rust-lang/rust/commit/19eedf98ffa8df52f7be7c003957ef11521551f4"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "167795e41291a7af96c1f4ce99a851439cdcc2b9", "filename": "src/libsyntax/parse/parser.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d2235f20b5295394450f4962fb5f93254e63640c/src%2Flibsyntax%2Fparse%2Fparser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d2235f20b5295394450f4962fb5f93254e63640c/src%2Flibsyntax%2Fparse%2Fparser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fparser.rs?ref=d2235f20b5295394450f4962fb5f93254e63640c", "patch": "@@ -455,7 +455,7 @@ impl Error {\n                                            ref dir_path } => {\n                 let mut err = struct_span_err!(handler, sp, E0583,\n                                                \"file not found for module `{}`\", mod_name);\n-                err.help(&format!(\"name the file either {} or {} inside the directory {:?}\",\n+                err.help(&format!(\"name the file either {} or {} inside the directory \\\"{}\\\"\",\n                                   default_path,\n                                   secondary_path,\n                                   dir_path));"}]}