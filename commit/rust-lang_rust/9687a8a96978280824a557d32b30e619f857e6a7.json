{"sha": "9687a8a96978280824a557d32b30e619f857e6a7", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk2ODdhOGE5Njk3ODI4MDgyNGE1NTdkMzJiMzBlNjE5Zjg1N2U2YTc=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-12-17T01:22:53Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-12-17T01:22:53Z"}, "message": "Auto merge of #30354 - petrochenkov:defuse, r=sanxiyn\n\nA relic of some old resolution algorithm?", "tree": {"sha": "871b564af78c35e8b7bf01507eee388ea6436e7c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/871b564af78c35e8b7bf01507eee388ea6436e7c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9687a8a96978280824a557d32b30e619f857e6a7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9687a8a96978280824a557d32b30e619f857e6a7", "html_url": "https://github.com/rust-lang/rust/commit/9687a8a96978280824a557d32b30e619f857e6a7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9687a8a96978280824a557d32b30e619f857e6a7/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4af427881405f95b8d87efea844cbd695fb55986", "url": "https://api.github.com/repos/rust-lang/rust/commits/4af427881405f95b8d87efea844cbd695fb55986", "html_url": "https://github.com/rust-lang/rust/commit/4af427881405f95b8d87efea844cbd695fb55986"}, {"sha": "0cc69f0ea32ff0a479cc38e8ca9e4dab519e354a", "url": "https://api.github.com/repos/rust-lang/rust/commits/0cc69f0ea32ff0a479cc38e8ca9e4dab519e354a", "html_url": "https://github.com/rust-lang/rust/commit/0cc69f0ea32ff0a479cc38e8ca9e4dab519e354a"}], "stats": {"total": 14, "additions": 4, "deletions": 10}, "files": [{"sha": "9ef2828c947aad2469d7f766ebe799b7e5830aeb", "filename": "src/librustc/middle/def.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/9687a8a96978280824a557d32b30e619f857e6a7/src%2Flibrustc%2Fmiddle%2Fdef.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9687a8a96978280824a557d32b30e619f857e6a7/src%2Flibrustc%2Fmiddle%2Fdef.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fdef.rs?ref=9687a8a96978280824a557d32b30e619f857e6a7", "patch": "@@ -35,7 +35,6 @@ pub enum Def {\n     DefTrait(DefId),\n     DefPrimTy(hir::PrimTy),\n     DefTyParam(ParamSpace, u32, DefId, ast::Name),\n-    DefUse(DefId),\n     DefUpvar(DefId,        // def id of closed over local\n              ast::NodeId,  // node id of closed over local\n              usize,        // index in the freevars list of the closure\n@@ -123,7 +122,7 @@ impl Def {\n \n             DefFn(..) | DefMod(..) | DefForeignMod(..) | DefStatic(..) |\n             DefVariant(..) | DefTy(..) | DefAssociatedTy(..) |\n-            DefTyParam(..) | DefUse(..) | DefStruct(..) | DefTrait(..) |\n+            DefTyParam(..) | DefStruct(..) | DefTrait(..) |\n             DefMethod(..) | DefConst(..) | DefAssociatedConst(..) |\n             DefPrimTy(..) | DefLabel(..) | DefSelfTy(..) | DefErr => {\n                 panic!(\"attempted .def_id() on invalid {:?}\", self)\n@@ -135,7 +134,7 @@ impl Def {\n         match *self {\n             DefFn(id, _) | DefMod(id) | DefForeignMod(id) | DefStatic(id, _) |\n             DefVariant(_, id, _) | DefTy(id, _) | DefAssociatedTy(_, id) |\n-            DefTyParam(_, _, id, _) | DefUse(id) | DefStruct(id) | DefTrait(id) |\n+            DefTyParam(_, _, id, _) | DefStruct(id) | DefTrait(id) |\n             DefMethod(id) | DefConst(id) | DefAssociatedConst(id) |\n             DefLocal(id, _) | DefUpvar(id, _, _, _) => {\n                 id"}, {"sha": "560d7eeed9e5c4ff7512a56ba4046223529bbc6e", "filename": "src/librustc/middle/mem_categorization.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9687a8a96978280824a557d32b30e619f857e6a7/src%2Flibrustc%2Fmiddle%2Fmem_categorization.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9687a8a96978280824a557d32b30e619f857e6a7/src%2Flibrustc%2Fmiddle%2Fmem_categorization.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fmem_categorization.rs?ref=9687a8a96978280824a557d32b30e619f857e6a7", "patch": "@@ -548,7 +548,7 @@ impl<'t, 'a,'tcx> MemCategorizationContext<'t, 'a, 'tcx> {\n           def::DefAssociatedConst(..) | def::DefFn(..) | def::DefMethod(..) => {\n                 Ok(self.cat_rvalue_node(id, span, expr_ty))\n           }\n-          def::DefMod(_) | def::DefForeignMod(_) | def::DefUse(_) |\n+          def::DefMod(_) | def::DefForeignMod(_) |\n           def::DefTrait(_) | def::DefTy(..) | def::DefPrimTy(_) |\n           def::DefTyParam(..) |\n           def::DefLabel(_) | def::DefSelfTy(..) |"}, {"sha": "714f0a4350b3df8f4cffc58342b3643b58d4e5eb", "filename": "src/librustc_metadata/astencode.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/9687a8a96978280824a557d32b30e619f857e6a7/src%2Flibrustc_metadata%2Fastencode.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9687a8a96978280824a557d32b30e619f857e6a7/src%2Flibrustc_metadata%2Fastencode.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_metadata%2Fastencode.rs?ref=9687a8a96978280824a557d32b30e619f857e6a7", "patch": "@@ -399,7 +399,6 @@ impl tr for def::Def {\n               def::DefAssociatedTy(trait_did.tr(dcx), did.tr(dcx)),\n           def::DefPrimTy(p) => def::DefPrimTy(p),\n           def::DefTyParam(s, index, def_id, n) => def::DefTyParam(s, index, def_id.tr(dcx), n),\n-          def::DefUse(did) => def::DefUse(did.tr(dcx)),\n           def::DefUpvar(_, nid1, index, nid2) => {\n               let nid1 = dcx.tr_id(nid1);\n               let nid2 = dcx.tr_id(nid2);"}, {"sha": "f057dbdba539fe634392cfb7f26f150f27af1975", "filename": "src/librustc_resolve/build_reduced_graph.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/9687a8a96978280824a557d32b30e619f857e6a7/src%2Flibrustc_resolve%2Fbuild_reduced_graph.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9687a8a96978280824a557d32b30e619f857e6a7/src%2Flibrustc_resolve%2Fbuild_reduced_graph.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Fbuild_reduced_graph.rs?ref=9687a8a96978280824a557d32b30e619f857e6a7", "patch": "@@ -706,7 +706,6 @@ impl<'a, 'b:'a, 'tcx:'b> GraphBuilder<'a, 'b, 'tcx> {\n             DefLocal(..) |\n             DefPrimTy(..) |\n             DefTyParam(..) |\n-            DefUse(..) |\n             DefUpvar(..) |\n             DefLabel(..) |\n             DefSelfTy(..) |"}, {"sha": "bc704d96f1682f869ae513e738dd8d4e6c21957e", "filename": "src/librustc_trans/save/dump_csv.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/9687a8a96978280824a557d32b30e619f857e6a7/src%2Flibrustc_trans%2Fsave%2Fdump_csv.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9687a8a96978280824a557d32b30e619f857e6a7/src%2Flibrustc_trans%2Fsave%2Fdump_csv.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Fsave%2Fdump_csv.rs?ref=9687a8a96978280824a557d32b30e619f857e6a7", "patch": "@@ -274,7 +274,6 @@ impl <'l, 'tcx> DumpCsvVisitor<'l, 'tcx> {\n             def::DefSelfTy(..) |\n             def::DefLabel(_) |\n             def::DefTyParam(..) |\n-            def::DefUse(_) |\n             def::DefMethod(..) |\n             def::DefPrimTy(_) |\n             def::DefErr => {"}, {"sha": "966033e9f2566d47958bf6a7122a1bac77d85234", "filename": "src/librustc_trans/trans/callee.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9687a8a96978280824a557d32b30e619f857e6a7/src%2Flibrustc_trans%2Ftrans%2Fcallee.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9687a8a96978280824a557d32b30e619f857e6a7/src%2Flibrustc_trans%2Ftrans%2Fcallee.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Ftrans%2Fcallee.rs?ref=9687a8a96978280824a557d32b30e619f857e6a7", "patch": "@@ -215,7 +215,7 @@ fn trans<'blk, 'tcx>(bcx: Block<'blk, 'tcx>, expr: &hir::Expr)\n             }\n             def::DefMod(..) | def::DefForeignMod(..) | def::DefTrait(..) |\n             def::DefTy(..) | def::DefPrimTy(..) | def::DefAssociatedTy(..) |\n-            def::DefUse(..) | def::DefLabel(..) | def::DefTyParam(..) |\n+            def::DefLabel(..) | def::DefTyParam(..) |\n             def::DefSelfTy(..) | def::DefErr => {\n                 bcx.tcx().sess.span_bug(\n                     ref_expr.span,"}, {"sha": "9182999f0d4991c9a107f4ab8a5711ec89c506f0", "filename": "src/librustc_typeck/check/mod.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9687a8a96978280824a557d32b30e619f857e6a7/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9687a8a96978280824a557d32b30e619f857e6a7/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs?ref=9687a8a96978280824a557d32b30e619f857e6a7", "patch": "@@ -4327,7 +4327,6 @@ fn type_scheme_and_predicates_for_def<'a, 'tcx>(fcx: &FnCtxt<'a, 'tcx>,\n         def::DefTyParam(..) |\n         def::DefMod(..) |\n         def::DefForeignMod(..) |\n-        def::DefUse(..) |\n         def::DefLabel(..) |\n         def::DefSelfTy(..) |\n         def::DefErr => {\n@@ -4498,7 +4497,6 @@ pub fn instantiate_path<'a, 'tcx>(fcx: &FnCtxt<'a, 'tcx>,\n         def::DefMod(..) |\n         def::DefForeignMod(..) |\n         def::DefLocal(..) |\n-        def::DefUse(..) |\n         def::DefLabel(..) |\n         def::DefUpvar(..) |\n         def::DefErr => {"}]}