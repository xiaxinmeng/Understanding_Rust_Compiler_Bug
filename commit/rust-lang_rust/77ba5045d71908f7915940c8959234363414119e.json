{"sha": "77ba5045d71908f7915940c8959234363414119e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc3YmE1MDQ1ZDcxOTA4Zjc5MTU5NDBjODk1OTIzNDM2MzQxNDExOWU=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-03-07T15:02:53Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-03-07T15:02:53Z"}, "message": "Auto merge of #3853 - rchaser53:issue-3849, r=flip1995\n\nfix missing a semicolon\n\nrelated: https://github.com/rust-lang/rust-clippy/issues/3849", "tree": {"sha": "0ac8b6f11771d2bb24f779c8e44a169461a5f53c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0ac8b6f11771d2bb24f779c8e44a169461a5f53c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/77ba5045d71908f7915940c8959234363414119e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/77ba5045d71908f7915940c8959234363414119e", "html_url": "https://github.com/rust-lang/rust/commit/77ba5045d71908f7915940c8959234363414119e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/77ba5045d71908f7915940c8959234363414119e/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0d8937299e6a08c499c24aa898f6cf5ce3f8645c", "url": "https://api.github.com/repos/rust-lang/rust/commits/0d8937299e6a08c499c24aa898f6cf5ce3f8645c", "html_url": "https://github.com/rust-lang/rust/commit/0d8937299e6a08c499c24aa898f6cf5ce3f8645c"}, {"sha": "ae787d954e683a5c6cf3a16b4bc1f5837a3a5688", "url": "https://api.github.com/repos/rust-lang/rust/commits/ae787d954e683a5c6cf3a16b4bc1f5837a3a5688", "html_url": "https://github.com/rust-lang/rust/commit/ae787d954e683a5c6cf3a16b4bc1f5837a3a5688"}], "stats": {"total": 41, "additions": 34, "deletions": 7}, "files": [{"sha": "d0b7dd7e8089a66213c68608c160f94793fd6ae5", "filename": "clippy_lints/src/utils/author.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/77ba5045d71908f7915940c8959234363414119e/clippy_lints%2Fsrc%2Futils%2Fauthor.rs", "raw_url": "https://github.com/rust-lang/rust/raw/77ba5045d71908f7915940c8959234363414119e/clippy_lints%2Fsrc%2Futils%2Fauthor.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fauthor.rs?ref=77ba5045d71908f7915940c8959234363414119e", "patch": "@@ -639,7 +639,7 @@ impl<'tcx> Visitor<'tcx> for PrintVisitor {\n                 println!(\"Local(ref {}) = {};\", local_pat, current);\n                 if let Some(ref init) = local.init {\n                     let init_pat = self.next(\"init\");\n-                    println!(\"    if let Some(ref {}) = {}.init\", init_pat, local_pat);\n+                    println!(\"    if let Some(ref {}) = {}.init;\", init_pat, local_pat);\n                     self.current = init_pat;\n                     self.visit_expr(init);\n                 }"}, {"sha": "353d347bcf140b7de835a9b6898eb1dc12af63ea", "filename": "main", "status": "added", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/77ba5045d71908f7915940c8959234363414119e/main", "raw_url": "https://github.com/rust-lang/rust/raw/77ba5045d71908f7915940c8959234363414119e/main", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/main?ref=77ba5045d71908f7915940c8959234363414119e"}, {"sha": "1d7bf607a14687078e81773111fb51e70373ed26", "filename": "tests/ui/author.stdout", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/77ba5045d71908f7915940c8959234363414119e/tests%2Fui%2Fauthor.stdout", "raw_url": "https://github.com/rust-lang/rust/raw/77ba5045d71908f7915940c8959234363414119e/tests%2Fui%2Fauthor.stdout", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fauthor.stdout?ref=77ba5045d71908f7915940c8959234363414119e", "patch": "@@ -1,6 +1,6 @@\n if_chain! {\n     if let StmtKind::Local(ref local) = stmt.node;\n-    if let Some(ref init) = local.init\n+    if let Some(ref init) = local.init;\n     if let ExprKind::Cast(ref expr, ref cast_ty) = init.node;\n     if let TyKind::Path(ref qp) = cast_ty.node;\n     if match_qpath(qp, &[\"char\"]);"}, {"sha": "5c8c90c6b4c8f1bcd89b8e64b0b445e653be7ad9", "filename": "tests/ui/author/call.stdout", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/77ba5045d71908f7915940c8959234363414119e/tests%2Fui%2Fauthor%2Fcall.stdout", "raw_url": "https://github.com/rust-lang/rust/raw/77ba5045d71908f7915940c8959234363414119e/tests%2Fui%2Fauthor%2Fcall.stdout", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fauthor%2Fcall.stdout?ref=77ba5045d71908f7915940c8959234363414119e", "patch": "@@ -1,6 +1,6 @@\n if_chain! {\n     if let StmtKind::Local(ref local) = stmt.node;\n-    if let Some(ref init) = local.init\n+    if let Some(ref init) = local.init;\n     if let ExprKind::Call(ref func, ref args) = init.node;\n     if let ExprKind::Path(ref path) = func.node;\n     if match_qpath(path, &[\"{{root}}\", \"std\", \"cmp\", \"min\"]);"}, {"sha": "e223ba1a8302d5e34ddf3bcc6e1db3c3ee805184", "filename": "tests/ui/author/for_loop.stdout", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/77ba5045d71908f7915940c8959234363414119e/tests%2Fui%2Fauthor%2Ffor_loop.stdout", "raw_url": "https://github.com/rust-lang/rust/raw/77ba5045d71908f7915940c8959234363414119e/tests%2Fui%2Fauthor%2Ffor_loop.stdout", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fauthor%2Ffor_loop.stdout?ref=77ba5045d71908f7915940c8959234363414119e", "patch": "@@ -1,7 +1,7 @@\n if_chain! {\n     if let ExprKind::Block(ref block) = expr.node;\n     if let StmtKind::Local(ref local) = block.node;\n-    if let Some(ref init) = local.init\n+    if let Some(ref init) = local.init;\n     if let ExprKind::Match(ref expr, ref arms, MatchSource::ForLoopDesugar) = init.node;\n     if let ExprKind::Call(ref func, ref args) = expr.node;\n     if let ExprKind::Path(ref path) = func.node;\n@@ -41,15 +41,15 @@ if_chain! {\n     if let PatKind::Path(ref path7) = arms1[1].pats[0].node;\n     if match_qpath(path7, &[\"{{root}}\", \"std\", \"option\", \"Option\", \"None\"]);\n     if let StmtKind::Local(ref local2) = path7.node;\n-    if let Some(ref init1) = local2.init\n+    if let Some(ref init1) = local2.init;\n     if let ExprKind::Path(ref path8) = init1.node;\n     if match_qpath(path8, &[\"__next\"]);\n     if let PatKind::Binding(BindingAnnotation::Unannotated, _, name1, None) = local2.pat.node;\n     if name1.node.as_str() == \"y\";\n     if let StmtKind::Expr(ref e1, _) = local2.pat.node\n     if let ExprKind::Block(ref block1) = e1.node;\n     if let StmtKind::Local(ref local3) = block1.node;\n-    if let Some(ref init2) = local3.init\n+    if let Some(ref init2) = local3.init;\n     if let ExprKind::Path(ref path9) = init2.node;\n     if match_qpath(path9, &[\"y\"]);\n     if let PatKind::Binding(BindingAnnotation::Unannotated, _, name2, None) = local3.pat.node;"}, {"sha": "689ee695b60104efb9027da1554d6e4d6c5ebe79", "filename": "tests/ui/author/matches.stout", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/77ba5045d71908f7915940c8959234363414119e/tests%2Fui%2Fauthor%2Fmatches.stout", "raw_url": "https://github.com/rust-lang/rust/raw/77ba5045d71908f7915940c8959234363414119e/tests%2Fui%2Fauthor%2Fmatches.stout", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fauthor%2Fmatches.stout?ref=77ba5045d71908f7915940c8959234363414119e", "patch": "@@ -1,7 +1,7 @@\n if_chain! {\n     if let StmtKind::Decl(ref decl, _) = stmt.node\n     if let DeclKind::Local(ref local) = decl.node;\n-    if let Some(ref init) = local.init\n+    if let Some(ref init) = local.init;\n     if let ExprKind::Match(ref expr, ref arms, MatchSource::Normal) = init.node;\n     if let ExprKind::Lit(ref lit) = expr.node;\n     if let LitKind::Int(42, _) = lit.node;"}, {"sha": "33462b0ea77d254cb7aea3dd95dc2c6b8e397a27", "filename": "tests/ui/issue_3849.rs", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/77ba5045d71908f7915940c8959234363414119e/tests%2Fui%2Fissue_3849.rs", "raw_url": "https://github.com/rust-lang/rust/raw/77ba5045d71908f7915940c8959234363414119e/tests%2Fui%2Fissue_3849.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fissue_3849.rs?ref=77ba5045d71908f7915940c8959234363414119e", "patch": "@@ -0,0 +1,13 @@\n+#![allow(dead_code)]\n+#![allow(clippy::zero_ptr)]\n+#![allow(clippy::transmute_ptr_to_ref)]\n+\n+pub const ZPTR: *const usize = 0 as *const _;\n+\n+fn main() {\n+    unsafe {\n+        #[clippy::author]\n+        let _: &i32 = std::mem::transmute(ZPTR);\n+        let _: &i32 = std::mem::transmute(0 as *const i32);\n+    }\n+}"}, {"sha": "126c230ac4ccaf09006eac016f695b81c3b47f1e", "filename": "tests/ui/issue_3849.stdout", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/77ba5045d71908f7915940c8959234363414119e/tests%2Fui%2Fissue_3849.stdout", "raw_url": "https://github.com/rust-lang/rust/raw/77ba5045d71908f7915940c8959234363414119e/tests%2Fui%2Fissue_3849.stdout", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fissue_3849.stdout?ref=77ba5045d71908f7915940c8959234363414119e", "patch": "@@ -0,0 +1,14 @@\n+if_chain! {\n+    if let StmtKind::Local(ref local) = stmt.node;\n+    if let Some(ref init) = local.init;\n+    if let ExprKind::Call(ref func, ref args) = init.node;\n+    if let ExprKind::Path(ref path) = func.node;\n+    if match_qpath(path, &[\"std\", \"mem\", \"transmute\"]);\n+    if args.len() == 1;\n+    if let ExprKind::Path(ref path1) = args[0].node;\n+    if match_qpath(path1, &[\"ZPTR\"]);\n+    if let PatKind::Wild = local.pat.node;\n+    then {\n+        // report your lint here\n+    }\n+}"}]}