{"sha": "3f21b791e9038fb482f04c7b7b77bd0f28d12e80", "node_id": "C_kwDOAAsO6NoAKDNmMjFiNzkxZTkwMzhmYjQ4MmYwNGM3YjdiNzdiZDBmMjhkMTJlODA", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-04-24T19:29:05Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-04-24T19:29:05Z"}, "message": "Auto merge of #14648 - zr40:publish-nightly-vsce-pre-release, r=lnicola\n\nSpecify `--pre-release` when publishing vsce nightly\n\nAccording to https://code.visualstudio.com/api/working-with-extensions/publishing-extension#prerelease-extensions, when publishing pre-release versions, `--pre-release` must also be passed in the publish step.\n\nCurrently the behavior with and without the flag seems to be the same, but since it's documented to be required, don't rely on this staying that way.\n\nThis flag was previously removed in #13020, so this partially reverts that change.", "tree": {"sha": "44b0c64435bf9b590b85aebe8268c25f58ba6023", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/44b0c64435bf9b590b85aebe8268c25f58ba6023"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3f21b791e9038fb482f04c7b7b77bd0f28d12e80", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3f21b791e9038fb482f04c7b7b77bd0f28d12e80", "html_url": "https://github.com/rust-lang/rust/commit/3f21b791e9038fb482f04c7b7b77bd0f28d12e80", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3f21b791e9038fb482f04c7b7b77bd0f28d12e80/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8f06f995c5d4ddd0fb5dc451e482a8b3024fa151", "url": "https://api.github.com/repos/rust-lang/rust/commits/8f06f995c5d4ddd0fb5dc451e482a8b3024fa151", "html_url": "https://github.com/rust-lang/rust/commit/8f06f995c5d4ddd0fb5dc451e482a8b3024fa151"}, {"sha": "12cf9b6788edc56597cad225a6bdd835b2928028", "url": "https://api.github.com/repos/rust-lang/rust/commits/12cf9b6788edc56597cad225a6bdd835b2928028", "html_url": "https://github.com/rust-lang/rust/commit/12cf9b6788edc56597cad225a6bdd835b2928028"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "43681c785fdc0042bf2c4c3d9e6ede26f52f9055", "filename": ".github/workflows/release.yaml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3f21b791e9038fb482f04c7b7b77bd0f28d12e80/.github%2Fworkflows%2Frelease.yaml", "raw_url": "https://github.com/rust-lang/rust/raw/3f21b791e9038fb482f04c7b7b77bd0f28d12e80/.github%2Fworkflows%2Frelease.yaml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Frelease.yaml?ref=3f21b791e9038fb482f04c7b7b77bd0f28d12e80", "patch": "@@ -270,7 +270,7 @@ jobs:\n       - name: Publish Extension (Code Marketplace, nightly)\n         if: github.ref != 'refs/heads/release' && (github.repository == 'rust-analyzer/rust-analyzer' || github.repository == 'rust-lang/rust-analyzer')\n         working-directory: ./editors/code\n-        run: npx vsce publish --pat ${{ secrets.MARKETPLACE_TOKEN }} --packagePath ../../dist/rust-analyzer-*.vsix\n+        run: npx vsce publish --pat ${{ secrets.MARKETPLACE_TOKEN }} --packagePath ../../dist/rust-analyzer-*.vsix --pre-release\n \n       - name: Publish Extension (OpenVSX, nightly)\n         if: github.ref != 'refs/heads/release' && (github.repository == 'rust-analyzer/rust-analyzer' || github.repository == 'rust-lang/rust-analyzer')"}]}