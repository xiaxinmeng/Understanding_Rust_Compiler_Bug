{"sha": "b0a9937a6d252eaf6c936284c377227ae510cc0f", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIwYTk5MzdhNmQyNTJlYWY2YzkzNjI4NGMzNzcyMjdhZTUxMGNjMGY=", "commit": {"author": {"name": "klutzy", "email": "klutzytheklutzy@gmail.com", "date": "2013-12-17T05:35:22Z"}, "committer": {"name": "klutzy", "email": "klutzytheklutzy@gmail.com", "date": "2013-12-18T00:49:55Z"}, "message": "mklldeps.py: Write to file instead of print\n\nIt seems that msys automatically converts `\\n` to `\\r\\n` on pipe\nredirection, which causes `make tidy` failure.", "tree": {"sha": "129735ad9e195c2a313562f760c88e4a58e60895", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/129735ad9e195c2a313562f760c88e4a58e60895"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b0a9937a6d252eaf6c936284c377227ae510cc0f", "comment_count": 17, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b0a9937a6d252eaf6c936284c377227ae510cc0f", "html_url": "https://github.com/rust-lang/rust/commit/b0a9937a6d252eaf6c936284c377227ae510cc0f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b0a9937a6d252eaf6c936284c377227ae510cc0f/comments", "author": {"login": "klutzy", "id": 1589355, "node_id": "MDQ6VXNlcjE1ODkzNTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1589355?v=4", "gravatar_id": "", "url": "https://api.github.com/users/klutzy", "html_url": "https://github.com/klutzy", "followers_url": "https://api.github.com/users/klutzy/followers", "following_url": "https://api.github.com/users/klutzy/following{/other_user}", "gists_url": "https://api.github.com/users/klutzy/gists{/gist_id}", "starred_url": "https://api.github.com/users/klutzy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/klutzy/subscriptions", "organizations_url": "https://api.github.com/users/klutzy/orgs", "repos_url": "https://api.github.com/users/klutzy/repos", "events_url": "https://api.github.com/users/klutzy/events{/privacy}", "received_events_url": "https://api.github.com/users/klutzy/received_events", "type": "User", "site_admin": false}, "committer": {"login": "klutzy", "id": 1589355, "node_id": "MDQ6VXNlcjE1ODkzNTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1589355?v=4", "gravatar_id": "", "url": "https://api.github.com/users/klutzy", "html_url": "https://github.com/klutzy", "followers_url": "https://api.github.com/users/klutzy/followers", "following_url": "https://api.github.com/users/klutzy/following{/other_user}", "gists_url": "https://api.github.com/users/klutzy/gists{/gist_id}", "starred_url": "https://api.github.com/users/klutzy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/klutzy/subscriptions", "organizations_url": "https://api.github.com/users/klutzy/orgs", "repos_url": "https://api.github.com/users/klutzy/repos", "events_url": "https://api.github.com/users/klutzy/events{/privacy}", "received_events_url": "https://api.github.com/users/klutzy/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1890290ded2b56410b4b2e0dca4c1518b294a2b2", "url": "https://api.github.com/repos/rust-lang/rust/commits/1890290ded2b56410b4b2e0dca4c1518b294a2b2", "html_url": "https://github.com/rust-lang/rust/commit/1890290ded2b56410b4b2e0dca4c1518b294a2b2"}], "stats": {"total": 23, "additions": 12, "deletions": 11}, "files": [{"sha": "c85a46876138aa1e51d3ce0004f8251c7b209a62", "filename": "mk/llvm.mk", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/b0a9937a6d252eaf6c936284c377227ae510cc0f/mk%2Fllvm.mk", "raw_url": "https://github.com/rust-lang/rust/raw/b0a9937a6d252eaf6c936284c377227ae510cc0f/mk%2Fllvm.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fllvm.mk?ref=b0a9937a6d252eaf6c936284c377227ae510cc0f", "patch": "@@ -51,8 +51,7 @@ $(S)src/librustc/lib/llvmdeps.rs: \\\n \t\t    $(LLVM_CONFIGS) \\\n \t\t    $(S)src/etc/mklldeps.py\n \t$(Q)$(CFG_PYTHON) $(S)src/etc/mklldeps.py \\\n-\t    \"$(LLVM_COMPONENTS)\" $(LLVM_CONFIGS) \\\n-\t    > $@\n+\t    \"$@\" \"$(LLVM_COMPONENTS)\" $(LLVM_CONFIGS)\n \n $(foreach host,$(CFG_HOST), \\\n  $(eval $(call DEF_LLVM_RULES,$(host))))"}, {"sha": "5b1abdf68a3d66f4d604a13694577f1aedb19293", "filename": "src/etc/mklldeps.py", "status": "modified", "additions": 11, "deletions": 9, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/b0a9937a6d252eaf6c936284c377227ae510cc0f/src%2Fetc%2Fmklldeps.py", "raw_url": "https://github.com/rust-lang/rust/raw/b0a9937a6d252eaf6c936284c377227ae510cc0f/src%2Fetc%2Fmklldeps.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fmklldeps.py?ref=b0a9937a6d252eaf6c936284c377227ae510cc0f", "patch": "@@ -4,9 +4,11 @@\n import sys\n import subprocess\n \n-components = sys.argv[1].split(' ')\n+f = open(sys.argv[1], 'wb')\n \n-print \"\"\"// Copyright 2013 The Rust Project Developers. See the COPYRIGHT\n+components = sys.argv[2].split(' ')\n+\n+f.write(\"\"\"// Copyright 2013 The Rust Project Developers. See the COPYRIGHT\n // file at the top-level directory of this distribution and at\n // http://rust-lang.org/COPYRIGHT.\n //\n@@ -18,10 +20,10 @@\n \n // WARNING: THIS IS A GENERATED FILE, DO NOT MODIFY\n //          take a look at src/etc/mklldeps.py if you're interested\n-\"\"\"\n+\"\"\")\n \n-for llconfig in sys.argv[2:]:\n-    print\n+for llconfig in sys.argv[3:]:\n+    f.write(\"\\n\")\n \n     proc = subprocess.Popen([llconfig, '--host-target'], stdout = subprocess.PIPE)\n     out, err = proc.communicate()\n@@ -42,7 +44,7 @@\n         \"target_os = \\\"\" + os + \"\\\"\",\n     ]\n \n-    print \"#[cfg(\" + ', '.join(cfg) + \")]\"\n+    f.write(\"#[cfg(\" + ', '.join(cfg) + \")]\\n\")\n \n     args = [llconfig, '--libs']\n     args.extend(components)\n@@ -51,7 +53,7 @@\n \n     for lib in out.strip().split(' '):\n         lib = lib[2:] # chop of the leading '-l'\n-        print \"#[link(name = \\\"\" + lib + \"\\\", kind = \\\"static\\\")]\"\n+        f.write(\"#[link(name = \\\"\" + lib + \"\\\", kind = \\\"static\\\")]\\n\")\n     if os == 'win32':\n-        print \"#[link(name = \\\"imagehlp\\\")]\"\n-    print \"extern {}\"\n+        f.write(\"#[link(name = \\\"imagehlp\\\")]\\n\")\n+    f.write(\"extern {}\\n\")"}]}