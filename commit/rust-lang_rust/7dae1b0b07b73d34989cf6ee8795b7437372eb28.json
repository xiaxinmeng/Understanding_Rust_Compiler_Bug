{"sha": "7dae1b0b07b73d34989cf6ee8795b7437372eb28", "node_id": "C_kwDOAAsO6NoAKDdkYWUxYjBiMDdiNzNkMzQ5ODljZjZlZTg3OTViNzQzNzM3MmViMjg", "commit": {"author": {"name": "Joshua Nelson", "email": "github@jyn.dev", "date": "2022-12-24T01:03:50Z"}, "committer": {"name": "Joshua Nelson", "email": "github@jyn.dev", "date": "2022-12-24T01:08:53Z"}, "message": "Add detail about dependencies from the dev-guide\n\nThe goal is to remove this altogether from the dev-guide once this PR is merged.", "tree": {"sha": "67e34210d1265ba39d7a45791d26f5ddb21696ac", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/67e34210d1265ba39d7a45791d26f5ddb21696ac"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7dae1b0b07b73d34989cf6ee8795b7437372eb28", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7dae1b0b07b73d34989cf6ee8795b7437372eb28", "html_url": "https://github.com/rust-lang/rust/commit/7dae1b0b07b73d34989cf6ee8795b7437372eb28", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7dae1b0b07b73d34989cf6ee8795b7437372eb28/comments", "author": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a06e5decaf8a79db0bd9a0078f37a777e095584e", "url": "https://api.github.com/repos/rust-lang/rust/commits/a06e5decaf8a79db0bd9a0078f37a777e095584e", "html_url": "https://github.com/rust-lang/rust/commit/a06e5decaf8a79db0bd9a0078f37a777e095584e"}], "stats": {"total": 55, "additions": 42, "deletions": 13}, "files": [{"sha": "471b66a88e16a1568856cd9a2796d36d90a0b76a", "filename": "README.md", "status": "modified", "additions": 42, "deletions": 13, "changes": 55, "blob_url": "https://github.com/rust-lang/rust/blob/7dae1b0b07b73d34989cf6ee8795b7437372eb28/README.md", "raw_url": "https://github.com/rust-lang/rust/raw/7dae1b0b07b73d34989cf6ee8795b7437372eb28/README.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/README.md?ref=7dae1b0b07b73d34989cf6ee8795b7437372eb28", "patch": "@@ -44,20 +44,37 @@ by running it with the `--help` flag or reading the [rustc dev guide][rustcguide\n [gettingstarted]: https://rustc-dev-guide.rust-lang.org/getting-started.html\n [rustcguidebuild]: https://rustc-dev-guide.rust-lang.org/building/how-to-build-and-run.html\n \n-### Building on a Unix-like system\n-1. Make sure you have installed the dependencies:\n+### Dependencies\n+\n+Make sure you have installed the dependencies:\n \n-   * `g++` 5.1 or later or `clang++` 3.5 or later\n    * `python` 3 or 2.7\n-   * GNU `make` 3.81 or later\n-   * `cmake` 3.13.4 or later\n-   * `ninja`\n-   * `curl`\n    * `git`\n-   * `ssl` which comes in `libssl-dev` or `openssl-devel`\n+   * A C compiler (when building for the host, `cc` is enough; cross-compiling may need additional compilers)\n+   * `curl` (not needed on Windows)\n    * `pkg-config` if you are compiling on Linux and targeting Linux\n+   * `libiconv` (already included with glibc on Debian-based distros)\n+\n+To build cargo, you'll also need OpenSSL (`libssl-dev` or `openssl-devel` on most Unix distros).\n+\n+If building LLVM from source, you'll need additional tools:\n+\n+* `g++`, `clang++`, or MSVC with versions listed on\n+  [LLVM's documentation](https://llvm.org/docs/GettingStarted.html#host-c-toolchain-both-compiler-and-standard-library)\n+* `ninja`, or GNU `make` 3.81 or later (ninja is recommended, especially on Windows)\n+* `cmake` 3.13.4 or later\n+* `libstdc++-static` may be required on some Linux distributions such as Fedora and Ubuntu\n+\n+On tier 1 or tier 2 with host tools platforms, you can also choose to download LLVM by setting `llvm.download-ci-llvm = true`.\n+Otherwise, you'll need LLVM installed and `llvm-config` in your path.\n+See [the rustc-dev-guide for more info][sysllvm].\n+\n+[sysllvm]: https://rustc-dev-guide.rust-lang.org/building/new-target.html#using-pre-built-llvm\n+\n \n-2. Clone the [source] with `git`:\n+### Building on a Unix-like system\n+\n+1. Clone the [source] with `git`:\n \n    ```sh\n    git clone https://github.com/rust-lang/rust.git\n@@ -66,7 +83,7 @@ by running it with the `--help` flag or reading the [rustc dev guide][rustcguide\n \n [source]: https://github.com/rust-lang/rust\n \n-3. Configure the build settings:\n+2. Configure the build settings:\n \n     The Rust build system uses a file named `config.toml` in the root of the\n     source tree to determine various configuration settings for the build.\n@@ -79,9 +96,7 @@ by running it with the `--help` flag or reading the [rustc dev guide][rustcguide\n     If you plan to use `x.py install` to create an installation, it is recommended\n     that you set the `prefix` value in the `[install]` section to a directory.\n \n-    Create an install directory if you are not installing in the default directory.\n-\n-4. Build and install:\n+3. Build and install:\n \n     ```sh\n     ./x.py build && ./x.py install\n@@ -98,6 +113,20 @@ by running it with the `--help` flag or reading the [rustc dev guide][rustcguide\n \n ### Building on Windows\n \n+On Windows, we suggest using [winget] to install dependencies by running the following in a terminal:\n+\n+```powershell\n+winget install -e Python.Python.3\n+winget install -e Kitware.CMake\n+winget install -e Git.Git\n+```\n+\n+Then edit your system's `PATH` variable and add: `C:\\Program Files\\CMake\\bin`. See\n+[this guide on editing the system `PATH`](https://www.java.com/en/download/help/path.html) from the\n+Java documentation.\n+\n+[winget]: https://github.com/microsoft/winget-cli\n+\n There are two prominent ABIs in use on Windows: the native (MSVC) ABI used by\n Visual Studio and the GNU ABI used by the GCC toolchain. Which version of Rust\n you need depends largely on what C/C++ libraries you want to interoperate with."}]}