{"sha": "447ae7612aacb356dd3f1dd018aaa350c0493a2e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ0N2FlNzYxMmFhY2IzNTZkZDNmMWRkMDE4YWFhMzUwYzA0OTNhMmU=", "commit": {"author": {"name": "David Wood", "email": "david@davidtw.co", "date": "2018-03-22T22:48:39Z"}, "committer": {"name": "David Wood", "email": "david@davidtw.co", "date": "2018-03-22T22:48:39Z"}, "message": "Added flag to disable user type assertion.", "tree": {"sha": "74440bbedce8f02b303aade748e72d620c712e78", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/74440bbedce8f02b303aade748e72d620c712e78"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/447ae7612aacb356dd3f1dd018aaa350c0493a2e", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEWwgxPGhT5b/6kagXAXYLT59T8VQFAlq0MscACgkQAXYLT59T\n8VQ15g//WRKJju4smrOrcrJROEoJJWlRCWTWYa47OruNdSGzVos0S2yT9CecyVKs\nIKaCtmHH3mkeO5dEqspPUL0aMXQ6oOT9M0qpZJqTjVYSLcgMw0cZf52BLNx+VvCp\nIOyS7oySoY3j0vDOLKNoNBNgHCJWCSqM1Jp4StHNWkg2OUVW27X0IiX/zg0wB+HH\nm/4OLf5u4VUW5BmIaG9naexsumVIClyLmsHbY9p/zgeItmugOqsRMIhyyxVxSzMT\nlcrApEwSqWdbTpXrBkOl/KKBtRSMjwA/WCQ7MtuuFsr9zadMXWG1C/W/w88j/4p/\n1elUGXMWFYQcaoNvQo6pd1ZXBf0QYxdshtmPjzt+BxUED9BPqOrrpW37/YjBMmwg\ntQyGRXhlXsLU6V0QhxH4ZMXizIPOsHIn77GV+0K+pLqT5S7glg/yD1Pt4owQa4Cw\nAaZ0GKa1v4Ij5v5p543qrJ+WGljWBEdhuUmMEbMzKapf3OSWk8dm4IAPfJG0Skgz\nUIDlmCj79tS9FfFyfdgDa04bwEL+6MQV7yd9PoZs/wMLAby4frmlVtkpdEtpWuKx\nj58pLDaUba2Mr9xP/7KpSL9gUlbEQ7VxK3YVdgc33sH843KZFWsUAWEpUiS9nvo+\nH3JZGssu6dKgrCKQbzSdpU8q0S0PaMDvn+bwDpDmqL4M4PTX6mk=\n=Rp3I\n-----END PGP SIGNATURE-----", "payload": "tree 74440bbedce8f02b303aade748e72d620c712e78\nparent 04aeef8d452d9dc2189bc75c3f74fd9752a3e9af\nauthor David Wood <david@davidtw.co> 1521758919 +0000\ncommitter David Wood <david@davidtw.co> 1521758919 +0000\n\nAdded flag to disable user type assertion.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/447ae7612aacb356dd3f1dd018aaa350c0493a2e", "html_url": "https://github.com/rust-lang/rust/commit/447ae7612aacb356dd3f1dd018aaa350c0493a2e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/447ae7612aacb356dd3f1dd018aaa350c0493a2e/comments", "author": {"login": "davidtwco", "id": 1295100, "node_id": "MDQ6VXNlcjEyOTUxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1295100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidtwco", "html_url": "https://github.com/davidtwco", "followers_url": "https://api.github.com/users/davidtwco/followers", "following_url": "https://api.github.com/users/davidtwco/following{/other_user}", "gists_url": "https://api.github.com/users/davidtwco/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidtwco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidtwco/subscriptions", "organizations_url": "https://api.github.com/users/davidtwco/orgs", "repos_url": "https://api.github.com/users/davidtwco/repos", "events_url": "https://api.github.com/users/davidtwco/events{/privacy}", "received_events_url": "https://api.github.com/users/davidtwco/received_events", "type": "User", "site_admin": false}, "committer": {"login": "davidtwco", "id": 1295100, "node_id": "MDQ6VXNlcjEyOTUxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1295100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidtwco", "html_url": "https://github.com/davidtwco", "followers_url": "https://api.github.com/users/davidtwco/followers", "following_url": "https://api.github.com/users/davidtwco/following{/other_user}", "gists_url": "https://api.github.com/users/davidtwco/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidtwco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidtwco/subscriptions", "organizations_url": "https://api.github.com/users/davidtwco/orgs", "repos_url": "https://api.github.com/users/davidtwco/repos", "events_url": "https://api.github.com/users/davidtwco/events{/privacy}", "received_events_url": "https://api.github.com/users/davidtwco/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "04aeef8d452d9dc2189bc75c3f74fd9752a3e9af", "url": "https://api.github.com/repos/rust-lang/rust/commits/04aeef8d452d9dc2189bc75c3f74fd9752a3e9af", "html_url": "https://github.com/rust-lang/rust/commit/04aeef8d452d9dc2189bc75c3f74fd9752a3e9af"}], "stats": {"total": 5, "additions": 5, "deletions": 0}, "files": [{"sha": "c47a351e9d39dcbec5175d6d83b4122ab33118aa", "filename": "src/librustc/session/config.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/447ae7612aacb356dd3f1dd018aaa350c0493a2e/src%2Flibrustc%2Fsession%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/447ae7612aacb356dd3f1dd018aaa350c0493a2e/src%2Flibrustc%2Fsession%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fsession%2Fconfig.rs?ref=447ae7612aacb356dd3f1dd018aaa350c0493a2e", "patch": "@@ -1251,6 +1251,8 @@ options! {DebuggingOptions, DebuggingSetter, basic_debugging_options,\n         \"choose which RELRO level to use\"),\n     nll: bool = (false, parse_bool, [UNTRACKED],\n                  \"run the non-lexical lifetimes MIR pass\"),\n+    disable_nll_user_type_assert: bool = (false, parse_bool, [UNTRACKED],\n+        \"disable user provided type assertion in NLL\"),\n     trans_time_graph: bool = (false, parse_bool, [UNTRACKED],\n         \"generate a graphical HTML report of time spent in trans and LLVM\"),\n     thinlto: Option<bool> = (None, parse_opt_bool, [TRACKED],"}, {"sha": "7eb52a3cdee93c7aec2b9d414a9a748b93d5b303", "filename": "src/librustc_mir/build/matches/mod.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/447ae7612aacb356dd3f1dd018aaa350c0493a2e/src%2Flibrustc_mir%2Fbuild%2Fmatches%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/447ae7612aacb356dd3f1dd018aaa350c0493a2e/src%2Flibrustc_mir%2Fbuild%2Fmatches%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fbuild%2Fmatches%2Fmod.rs?ref=447ae7612aacb356dd3f1dd018aaa350c0493a2e", "patch": "@@ -147,6 +147,8 @@ impl<'a, 'gcx, 'tcx> Builder<'a, 'gcx, 'tcx> {\n \n     pub fn user_assert_ty(&mut self, block: BasicBlock, hir_id: hir::HirId,\n                           var: NodeId, span: Span) {\n+        if self.hir.tcx().sess.opts.debugging_opts.disable_nll_user_type_assert { return; }\n+\n         let local_id = self.var_indices[&var];\n         let source_info = self.source_info(span);\n "}, {"sha": "c41341690441fa15c4739d2b2c23d3d54a4c999b", "filename": "src/test/run-pass/generator/yield-subtype.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/447ae7612aacb356dd3f1dd018aaa350c0493a2e/src%2Ftest%2Frun-pass%2Fgenerator%2Fyield-subtype.rs", "raw_url": "https://github.com/rust-lang/rust/raw/447ae7612aacb356dd3f1dd018aaa350c0493a2e/src%2Ftest%2Frun-pass%2Fgenerator%2Fyield-subtype.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fgenerator%2Fyield-subtype.rs?ref=447ae7612aacb356dd3f1dd018aaa350c0493a2e", "patch": "@@ -9,6 +9,7 @@\n // except according to those terms.\n \n // revisions:lexical nll\n+//[nll]compile-flags: -Z disable-nll-user-type-assert\n #![cfg_attr(nll, feature(nll))]\n \n #![feature(generators)]"}]}