{"sha": "ea956e3ae9e0089861934062544aa44588052e2a", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVhOTU2ZTNhZTllMDA4OTg2MTkzNDA2MjU0NGFhNDQ1ODgwNTJlMmE=", "commit": {"author": {"name": "Pulkit Goyal", "email": "7895pulkit@gmail.com", "date": "2019-05-12T21:37:05Z"}, "committer": {"name": "Pulkit Goyal", "email": "7895pulkit@gmail.com", "date": "2019-05-13T15:45:20Z"}, "message": "add impl_trait_in_bindings to INCOMPLETE_FEATURES\n\nimpl_trait_in_bindings is not yet complete and can lead to compiler crashes.\n\nFixes #60764.", "tree": {"sha": "53c76162318c98542b105563396b3ab718615bcb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/53c76162318c98542b105563396b3ab718615bcb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ea956e3ae9e0089861934062544aa44588052e2a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ea956e3ae9e0089861934062544aa44588052e2a", "html_url": "https://github.com/rust-lang/rust/commit/ea956e3ae9e0089861934062544aa44588052e2a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ea956e3ae9e0089861934062544aa44588052e2a/comments", "author": {"login": "Pulkit07", "id": 8902250, "node_id": "MDQ6VXNlcjg5MDIyNTA=", "avatar_url": "https://avatars.githubusercontent.com/u/8902250?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Pulkit07", "html_url": "https://github.com/Pulkit07", "followers_url": "https://api.github.com/users/Pulkit07/followers", "following_url": "https://api.github.com/users/Pulkit07/following{/other_user}", "gists_url": "https://api.github.com/users/Pulkit07/gists{/gist_id}", "starred_url": "https://api.github.com/users/Pulkit07/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Pulkit07/subscriptions", "organizations_url": "https://api.github.com/users/Pulkit07/orgs", "repos_url": "https://api.github.com/users/Pulkit07/repos", "events_url": "https://api.github.com/users/Pulkit07/events{/privacy}", "received_events_url": "https://api.github.com/users/Pulkit07/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Pulkit07", "id": 8902250, "node_id": "MDQ6VXNlcjg5MDIyNTA=", "avatar_url": "https://avatars.githubusercontent.com/u/8902250?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Pulkit07", "html_url": "https://github.com/Pulkit07", "followers_url": "https://api.github.com/users/Pulkit07/followers", "following_url": "https://api.github.com/users/Pulkit07/following{/other_user}", "gists_url": "https://api.github.com/users/Pulkit07/gists{/gist_id}", "starred_url": "https://api.github.com/users/Pulkit07/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Pulkit07/subscriptions", "organizations_url": "https://api.github.com/users/Pulkit07/orgs", "repos_url": "https://api.github.com/users/Pulkit07/repos", "events_url": "https://api.github.com/users/Pulkit07/events{/privacy}", "received_events_url": "https://api.github.com/users/Pulkit07/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "69ef8fbe7084f40893252df9fa47298b0a5c5057", "url": "https://api.github.com/repos/rust-lang/rust/commits/69ef8fbe7084f40893252df9fa47298b0a5c5057", "html_url": "https://github.com/rust-lang/rust/commit/69ef8fbe7084f40893252df9fa47298b0a5c5057"}], "stats": {"total": 36, "additions": 29, "deletions": 7}, "files": [{"sha": "8a066f3f4a093a82c2fd96c84727d31a166520c3", "filename": "src/libsyntax/feature_gate.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ea956e3ae9e0089861934062544aa44588052e2a/src%2Flibsyntax%2Ffeature_gate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ea956e3ae9e0089861934062544aa44588052e2a/src%2Flibsyntax%2Ffeature_gate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Ffeature_gate.rs?ref=ea956e3ae9e0089861934062544aa44588052e2a", "patch": "@@ -563,6 +563,7 @@ declare_features! (\n // unanticipated results, such as compiler crashes. We warn the user about these\n // to alert them.\n const INCOMPLETE_FEATURES: &[Symbol] = &[\n+    sym::impl_trait_in_bindings,\n     sym::generic_associated_types,\n     sym::const_generics\n ];"}, {"sha": "1e3a641b7cf94cf621ae362aca26ed2d3d8a4383", "filename": "src/test/run-pass/impl-trait-in-bindings.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ea956e3ae9e0089861934062544aa44588052e2a/src%2Ftest%2Frun-pass%2Fimpl-trait-in-bindings.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ea956e3ae9e0089861934062544aa44588052e2a/src%2Ftest%2Frun-pass%2Fimpl-trait-in-bindings.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fimpl-trait-in-bindings.rs?ref=ea956e3ae9e0089861934062544aa44588052e2a", "patch": "@@ -1,4 +1,5 @@\n #![feature(impl_trait_in_bindings)]\n+//~^ WARN the feature `impl_trait_in_bindings` is incomplete and may cause the compiler to crash\n \n use std::fmt::Debug;\n "}, {"sha": "4896deb9d5c917678114e31ca2ad1c1c80354803", "filename": "src/test/run-pass/impl-trait-in-bindings.stderr", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/ea956e3ae9e0089861934062544aa44588052e2a/src%2Ftest%2Frun-pass%2Fimpl-trait-in-bindings.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/ea956e3ae9e0089861934062544aa44588052e2a/src%2Ftest%2Frun-pass%2Fimpl-trait-in-bindings.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fimpl-trait-in-bindings.stderr?ref=ea956e3ae9e0089861934062544aa44588052e2a", "patch": "@@ -0,0 +1,6 @@\n+warning: the feature `impl_trait_in_bindings` is incomplete and may cause the compiler to crash\n+  --> $DIR/impl-trait-in-bindings.rs:1:12\n+   |\n+LL | #![feature(impl_trait_in_bindings)]\n+   |            ^^^^^^^^^^^^^^^^^^^^^^\n+"}, {"sha": "d4eef29ed32074cc5a2a8f8db7c48aa71de8af95", "filename": "src/test/ui/impl-trait/bindings-opaque.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ea956e3ae9e0089861934062544aa44588052e2a/src%2Ftest%2Fui%2Fimpl-trait%2Fbindings-opaque.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ea956e3ae9e0089861934062544aa44588052e2a/src%2Ftest%2Fui%2Fimpl-trait%2Fbindings-opaque.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fimpl-trait%2Fbindings-opaque.rs?ref=ea956e3ae9e0089861934062544aa44588052e2a", "patch": "@@ -1,4 +1,5 @@\n #![feature(impl_trait_in_bindings)]\n+//~^ WARN the feature `impl_trait_in_bindings` is incomplete and may cause the compiler to crash\n \n const FOO: impl Copy = 42;\n "}, {"sha": "d0a6a4ee578f71fd0db0d8cfc8bb8643a503cd60", "filename": "src/test/ui/impl-trait/bindings-opaque.stderr", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/ea956e3ae9e0089861934062544aa44588052e2a/src%2Ftest%2Fui%2Fimpl-trait%2Fbindings-opaque.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/ea956e3ae9e0089861934062544aa44588052e2a/src%2Ftest%2Fui%2Fimpl-trait%2Fbindings-opaque.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fimpl-trait%2Fbindings-opaque.stderr?ref=ea956e3ae9e0089861934062544aa44588052e2a", "patch": "@@ -1,17 +1,23 @@\n+warning: the feature `impl_trait_in_bindings` is incomplete and may cause the compiler to crash\n+  --> $DIR/bindings-opaque.rs:1:12\n+   |\n+LL | #![feature(impl_trait_in_bindings)]\n+   |            ^^^^^^^^^^^^^^^^^^^^^^\n+\n error[E0599]: no method named `count_ones` found for type `impl std::marker::Copy` in the current scope\n-  --> $DIR/bindings-opaque.rs:10:17\n+  --> $DIR/bindings-opaque.rs:11:17\n    |\n LL |     let _ = FOO.count_ones();\n    |                 ^^^^^^^^^^\n \n error[E0599]: no method named `count_ones` found for type `impl std::marker::Copy` in the current scope\n-  --> $DIR/bindings-opaque.rs:12:17\n+  --> $DIR/bindings-opaque.rs:13:17\n    |\n LL |     let _ = BAR.count_ones();\n    |                 ^^^^^^^^^^\n \n error[E0599]: no method named `count_ones` found for type `impl std::marker::Copy` in the current scope\n-  --> $DIR/bindings-opaque.rs:14:17\n+  --> $DIR/bindings-opaque.rs:15:17\n    |\n LL |     let _ = foo.count_ones();\n    |                 ^^^^^^^^^^"}, {"sha": "104a44d65662e94b40f06e8b877fa26f7e531189", "filename": "src/test/ui/impl-trait/bindings.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ea956e3ae9e0089861934062544aa44588052e2a/src%2Ftest%2Fui%2Fimpl-trait%2Fbindings.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ea956e3ae9e0089861934062544aa44588052e2a/src%2Ftest%2Fui%2Fimpl-trait%2Fbindings.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fimpl-trait%2Fbindings.rs?ref=ea956e3ae9e0089861934062544aa44588052e2a", "patch": "@@ -1,4 +1,5 @@\n #![feature(impl_trait_in_bindings)]\n+//~^ WARN the feature `impl_trait_in_bindings` is incomplete and may cause the compiler to crash\n \n fn a<T: Clone>(x: T) {\n     const foo: impl Clone = x;"}, {"sha": "c66836ab8e5af09ab003a8d8091c0dadc43a608c", "filename": "src/test/ui/impl-trait/bindings.stderr", "status": "modified", "additions": 10, "deletions": 4, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/ea956e3ae9e0089861934062544aa44588052e2a/src%2Ftest%2Fui%2Fimpl-trait%2Fbindings.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/ea956e3ae9e0089861934062544aa44588052e2a/src%2Ftest%2Fui%2Fimpl-trait%2Fbindings.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fimpl-trait%2Fbindings.stderr?ref=ea956e3ae9e0089861934062544aa44588052e2a", "patch": "@@ -1,23 +1,29 @@\n+warning: the feature `impl_trait_in_bindings` is incomplete and may cause the compiler to crash\n+  --> $DIR/bindings.rs:1:12\n+   |\n+LL | #![feature(impl_trait_in_bindings)]\n+   |            ^^^^^^^^^^^^^^^^^^^^^^\n+\n error[E0435]: attempt to use a non-constant value in a constant\n-  --> $DIR/bindings.rs:4:29\n+  --> $DIR/bindings.rs:5:29\n    |\n LL |     const foo: impl Clone = x;\n    |                             ^ non-constant value\n \n error[E0435]: attempt to use a non-constant value in a constant\n-  --> $DIR/bindings.rs:10:33\n+  --> $DIR/bindings.rs:11:33\n    |\n LL |         const foo: impl Clone = x;\n    |                                 ^ non-constant value\n \n error[E0435]: attempt to use a non-constant value in a constant\n-  --> $DIR/bindings.rs:17:33\n+  --> $DIR/bindings.rs:18:33\n    |\n LL |         const foo: impl Clone = x;\n    |                                 ^ non-constant value\n \n error[E0435]: attempt to use a non-constant value in a constant\n-  --> $DIR/bindings.rs:24:33\n+  --> $DIR/bindings.rs:25:33\n    |\n LL |         const foo: impl Clone = x;\n    |                                 ^ non-constant value"}]}