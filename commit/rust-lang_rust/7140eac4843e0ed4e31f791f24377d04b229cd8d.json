{"sha": "7140eac4843e0ed4e31f791f24377d04b229cd8d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjcxNDBlYWM0ODQzZTBlZDRlMzFmNzkxZjI0Mzc3ZDA0YjIyOWNkOGQ=", "commit": {"author": {"name": "mcarton", "email": "cartonmartin+git@gmail.com", "date": "2016-11-18T12:40:15Z"}, "committer": {"name": "mcarton", "email": "cartonmartin+git@gmail.com", "date": "2016-11-18T12:40:44Z"}, "message": "Cleanup", "tree": {"sha": "273c29a69067885fef138ee150639df9f2589c65", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/273c29a69067885fef138ee150639df9f2589c65"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7140eac4843e0ed4e31f791f24377d04b229cd8d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7140eac4843e0ed4e31f791f24377d04b229cd8d", "html_url": "https://github.com/rust-lang/rust/commit/7140eac4843e0ed4e31f791f24377d04b229cd8d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7140eac4843e0ed4e31f791f24377d04b229cd8d/comments", "author": {"login": "mcarton", "id": 3751788, "node_id": "MDQ6VXNlcjM3NTE3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/3751788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcarton", "html_url": "https://github.com/mcarton", "followers_url": "https://api.github.com/users/mcarton/followers", "following_url": "https://api.github.com/users/mcarton/following{/other_user}", "gists_url": "https://api.github.com/users/mcarton/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcarton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcarton/subscriptions", "organizations_url": "https://api.github.com/users/mcarton/orgs", "repos_url": "https://api.github.com/users/mcarton/repos", "events_url": "https://api.github.com/users/mcarton/events{/privacy}", "received_events_url": "https://api.github.com/users/mcarton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mcarton", "id": 3751788, "node_id": "MDQ6VXNlcjM3NTE3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/3751788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcarton", "html_url": "https://github.com/mcarton", "followers_url": "https://api.github.com/users/mcarton/followers", "following_url": "https://api.github.com/users/mcarton/following{/other_user}", "gists_url": "https://api.github.com/users/mcarton/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcarton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcarton/subscriptions", "organizations_url": "https://api.github.com/users/mcarton/orgs", "repos_url": "https://api.github.com/users/mcarton/repos", "events_url": "https://api.github.com/users/mcarton/events{/privacy}", "received_events_url": "https://api.github.com/users/mcarton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f39c6278e134ee9dabc444dbe9e17106fd4dc291", "url": "https://api.github.com/repos/rust-lang/rust/commits/f39c6278e134ee9dabc444dbe9e17106fd4dc291", "html_url": "https://github.com/rust-lang/rust/commit/f39c6278e134ee9dabc444dbe9e17106fd4dc291"}], "stats": {"total": 8, "additions": 2, "deletions": 6}, "files": [{"sha": "704729c4e36e513c11c18667fb00d769de14bfb1", "filename": "clippy_lints/src/block_in_if_condition.rs", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/7140eac4843e0ed4e31f791f24377d04b229cd8d/clippy_lints%2Fsrc%2Fblock_in_if_condition.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7140eac4843e0ed4e31f791f24377d04b229cd8d/clippy_lints%2Fsrc%2Fblock_in_if_condition.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fblock_in_if_condition.rs?ref=7140eac4843e0ed4e31f791f24377d04b229cd8d", "patch": "@@ -56,10 +56,7 @@ struct ExVisitor<'v> {\n impl<'v> Visitor<'v> for ExVisitor<'v> {\n     fn visit_expr(&mut self, expr: &'v Expr) {\n         if let ExprClosure(_, _, ref expr, _) = expr.node {\n-            let complex = {\n-                matches!(expr.node, ExprBlock(_))\n-            };\n-            if complex {\n+            if matches!(expr.node, ExprBlock(_)) {\n                 self.found_block = Some(expr);\n                 return;\n             }\n@@ -111,7 +108,7 @@ impl LateLintPass for BlockInIfCondition {\n                 let mut visitor = ExVisitor { found_block: None };\n                 walk_expr(&mut visitor, check);\n                 if let Some(block) = visitor.found_block {\n-                    span_help_and_lint(cx, BLOCK_IN_IF_CONDITION_STMT, block.span, COMPLEX_BLOCK_MESSAGE, \"\");\n+                    span_lint(cx, BLOCK_IN_IF_CONDITION_STMT, block.span, COMPLEX_BLOCK_MESSAGE);\n                 }\n             }\n         }"}, {"sha": "43216754f75319e9b8f8da4c89996cca51edbf5f", "filename": "tests/compile-fail/block_in_if_condition.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7140eac4843e0ed4e31f791f24377d04b229cd8d/tests%2Fcompile-fail%2Fblock_in_if_condition.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7140eac4843e0ed4e31f791f24377d04b229cd8d/tests%2Fcompile-fail%2Fblock_in_if_condition.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail%2Fblock_in_if_condition.rs?ref=7140eac4843e0ed4e31f791f24377d04b229cd8d", "patch": "@@ -27,7 +27,6 @@ fn macro_if() {\n }\n \n fn condition_has_block() -> i32 {\n-\n     if { //~ERROR in an 'if' condition, avoid complex blocks or closures with blocks; instead, move the block or closure higher and bind it with a 'let'\n         let x = 3;\n         x == 3"}]}