{"sha": "c4ef06a9b6ab1eecac106bf2d72c95209687d57a", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM0ZWYwNmE5YjZhYjFlZWNhYzEwNmJmMmQ3MmM5NTIwOTY4N2Q1N2E=", "commit": {"author": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2018-12-06T13:13:20Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2018-12-06T13:13:20Z"}, "message": "Merge pull request #3497 from daxpedda/master\n\nFix bug in `implicit_return`.", "tree": {"sha": "1f9542850f16ac096cd7056945e1f12c3fd6be0f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1f9542850f16ac096cd7056945e1f12c3fd6be0f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c4ef06a9b6ab1eecac106bf2d72c95209687d57a", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJcCSBwCRBK7hj4Ov3rIwAAdHIIAJFK4u8Eb6WwQf+7AexA8KLM\nbDktSZBcQZXj21cmWb1L8qcHRTih540VibKVcuU7lzvRvkdgVi9kw27yd4QE50em\nlsA+CMks0/muTQkcUIIkiHYUdEJQDzKupXapPtpI28qQslQrtuyf4mG39uNtyUc/\nRwwrYUEE0+nisoLdOf/xiCTT4GloyULWd6w7+/FE+RRFm2XTB77VX7isrh2K/WuB\n7JDyJtfJXf+cRY95nzZYCqDKH02zZ6d5cyUNh+ZT+ee5+oCGUm+VrjAD6ktIzcF7\nYJw0Uj8vRgdcrZoS5iQknkcrfZTwe3w4dQqUECvm1eov7CZdyM3ZuvNa+P5JU4M=\n=9Jq4\n-----END PGP SIGNATURE-----\n", "payload": "tree 1f9542850f16ac096cd7056945e1f12c3fd6be0f\nparent 0fb30218d522d7661d7e4ea46bf8864a99143982\nparent a4ec7be06fc3406bca536340a4073a9159d36e45\nauthor Philipp Hansch <dev@phansch.net> 1544102000 +0100\ncommitter GitHub <noreply@github.com> 1544102000 +0100\n\nMerge pull request #3497 from daxpedda/master\n\nFix bug in `implicit_return`."}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c4ef06a9b6ab1eecac106bf2d72c95209687d57a", "html_url": "https://github.com/rust-lang/rust/commit/c4ef06a9b6ab1eecac106bf2d72c95209687d57a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c4ef06a9b6ab1eecac106bf2d72c95209687d57a/comments", "author": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0fb30218d522d7661d7e4ea46bf8864a99143982", "url": "https://api.github.com/repos/rust-lang/rust/commits/0fb30218d522d7661d7e4ea46bf8864a99143982", "html_url": "https://github.com/rust-lang/rust/commit/0fb30218d522d7661d7e4ea46bf8864a99143982"}, {"sha": "a4ec7be06fc3406bca536340a4073a9159d36e45", "url": "https://api.github.com/repos/rust-lang/rust/commits/a4ec7be06fc3406bca536340a4073a9159d36e45", "html_url": "https://github.com/rust-lang/rust/commit/a4ec7be06fc3406bca536340a4073a9159d36e45"}], "stats": {"total": 17, "additions": 9, "deletions": 8}, "files": [{"sha": "07a849469fd35129484f03311564b76feef76e84", "filename": "clippy_lints/src/implicit_return.rs", "status": "modified", "additions": 2, "deletions": 7, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/c4ef06a9b6ab1eecac106bf2d72c95209687d57a/clippy_lints%2Fsrc%2Fimplicit_return.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4ef06a9b6ab1eecac106bf2d72c95209687d57a/clippy_lints%2Fsrc%2Fimplicit_return.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fimplicit_return.rs?ref=c4ef06a9b6ab1eecac106bf2d72c95209687d57a", "patch": "@@ -47,7 +47,8 @@ pub struct Pass;\n impl Pass {\n     fn expr_match(cx: &LateContext<'_, '_>, expr: &rustc::hir::Expr) {\n         match &expr.node {\n-            ExprKind::Block(block, ..) => {\n+            // loops could be using `break` instead of `return`\n+            ExprKind::Block(block, ..) | ExprKind::Loop(block, ..) => {\n                 if let Some(expr) = &block.expr {\n                     Self::expr_match(cx, expr);\n                 }\n@@ -85,12 +86,6 @@ impl Pass {\n                     Self::expr_match(cx, &arm.body);\n                 }\n             },\n-            // loops could be using `break` instead of `return`\n-            ExprKind::Loop(block, ..) => {\n-                if let Some(expr) = &block.expr {\n-                    Self::expr_match(cx, expr);\n-                }\n-            },\n             // skip if it already has a return statement\n             ExprKind::Ret(..) => (),\n             // everything else is missing `return`"}, {"sha": "6f4fe12757a3f9eb4c0028840b417180d0aa71b4", "filename": "tests/ui/implicit_return.stderr", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c4ef06a9b6ab1eecac106bf2d72c95209687d57a/tests%2Fui%2Fimplicit_return.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c4ef06a9b6ab1eecac106bf2d72c95209687d57a/tests%2Fui%2Fimplicit_return.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fimplicit_return.stderr?ref=c4ef06a9b6ab1eecac106bf2d72c95209687d57a", "patch": "@@ -30,6 +30,12 @@ error: missing return statement\n 38 |             true\n    |             ^^^^ help: add `return` as shown: `return true`\n \n+error: missing return statement\n+  --> $DIR/implicit_return.rs:46:9\n+   |\n+46 |         break true;\n+   |         ^^^^^^^^^^ help: change `break` to `return` as shown: `return true`\n+\n error: missing return statement\n   --> $DIR/implicit_return.rs:52:9\n    |\n@@ -42,5 +48,5 @@ error: missing return statement\n 54 |     let _ = || true;\n    |                ^^^^ help: add `return` as shown: `return true`\n \n-error: aborting due to 7 previous errors\n+error: aborting due to 8 previous errors\n "}]}