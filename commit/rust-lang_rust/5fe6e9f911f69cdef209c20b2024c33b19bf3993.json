{"sha": "5fe6e9f911f69cdef209c20b2024c33b19bf3993", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVmZTZlOWY5MTFmNjljZGVmMjA5YzIwYjIwMjRjMzNiMTliZjM5OTM=", "commit": {"author": {"name": "mcarton", "email": "cartonmartin+git@gmail.com", "date": "2016-02-20T16:00:36Z"}, "committer": {"name": "mcarton", "email": "cartonmartin+git@gmail.com", "date": "2016-02-20T16:46:16Z"}, "message": "Build the import lint in update_lints.py", "tree": {"sha": "cffc052c795af57c1dac69fcaba412522dd50c30", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cffc052c795af57c1dac69fcaba412522dd50c30"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5fe6e9f911f69cdef209c20b2024c33b19bf3993", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5fe6e9f911f69cdef209c20b2024c33b19bf3993", "html_url": "https://github.com/rust-lang/rust/commit/5fe6e9f911f69cdef209c20b2024c33b19bf3993", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5fe6e9f911f69cdef209c20b2024c33b19bf3993/comments", "author": {"login": "mcarton", "id": 3751788, "node_id": "MDQ6VXNlcjM3NTE3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/3751788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcarton", "html_url": "https://github.com/mcarton", "followers_url": "https://api.github.com/users/mcarton/followers", "following_url": "https://api.github.com/users/mcarton/following{/other_user}", "gists_url": "https://api.github.com/users/mcarton/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcarton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcarton/subscriptions", "organizations_url": "https://api.github.com/users/mcarton/orgs", "repos_url": "https://api.github.com/users/mcarton/repos", "events_url": "https://api.github.com/users/mcarton/events{/privacy}", "received_events_url": "https://api.github.com/users/mcarton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mcarton", "id": 3751788, "node_id": "MDQ6VXNlcjM3NTE3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/3751788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcarton", "html_url": "https://github.com/mcarton", "followers_url": "https://api.github.com/users/mcarton/followers", "following_url": "https://api.github.com/users/mcarton/following{/other_user}", "gists_url": "https://api.github.com/users/mcarton/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcarton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcarton/subscriptions", "organizations_url": "https://api.github.com/users/mcarton/orgs", "repos_url": "https://api.github.com/users/mcarton/repos", "events_url": "https://api.github.com/users/mcarton/events{/privacy}", "received_events_url": "https://api.github.com/users/mcarton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "78b31c61bdf7a95a1b8bbb7ccf478f5ccd220f69", "url": "https://api.github.com/repos/rust-lang/rust/commits/78b31c61bdf7a95a1b8bbb7ccf478f5ccd220f69", "html_url": "https://github.com/rust-lang/rust/commit/78b31c61bdf7a95a1b8bbb7ccf478f5ccd220f69"}], "stats": {"total": 82, "additions": 49, "deletions": 33}, "files": [{"sha": "23accd2ebaace30dc52c43f3b326309daf5019cd", "filename": "src/lib.rs", "status": "modified", "additions": 36, "deletions": 33, "changes": 69, "blob_url": "https://github.com/rust-lang/rust/blob/5fe6e9f911f69cdef209c20b2024c33b19bf3993/src%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5fe6e9f911f69cdef209c20b2024c33b19bf3993/src%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib.rs?ref=5fe6e9f911f69cdef209c20b2024c33b19bf3993", "patch": "@@ -35,59 +35,62 @@ extern crate rustc_plugin;\n \n use rustc_plugin::Registry;\n \n+pub mod consts;\n #[macro_use]\n pub mod utils;\n+\n+// begin lints modules, do not remove this comment, it\u2019s used in `update_lints`\n+pub mod approx_const;\n+pub mod array_indexing;\n+pub mod attrs;\n+pub mod bit_mask;\n+pub mod block_in_if_condition;\n+pub mod collapsible_if;\n pub mod copies;\n-pub mod consts;\n-pub mod types;\n-pub mod misc;\n+pub mod cyclomatic_complexity;\n+pub mod derive;\n+pub mod drop_ref;\n+pub mod entry;\n pub mod enum_glob_use;\n+pub mod enum_variants;\n pub mod eq_op;\n-pub mod bit_mask;\n-pub mod ptr_arg;\n-pub mod needless_bool;\n-pub mod approx_const;\n+pub mod escape;\n pub mod eta_reduction;\n-pub mod enum_variants;\n pub mod identity_op;\n pub mod items_after_statements;\n-pub mod minmax;\n-pub mod mut_mut;\n-pub mod mut_reference;\n pub mod len_zero;\n-pub mod attrs;\n-pub mod collapsible_if;\n-pub mod block_in_if_condition;\n-pub mod unicode;\n-pub mod shadow;\n-pub mod strings;\n-pub mod methods;\n-pub mod returns;\n pub mod lifetimes;\n pub mod loops;\n-pub mod ranges;\n pub mod map_clone;\n pub mod matches;\n-pub mod precedence;\n+pub mod methods;\n+pub mod minmax;\n+pub mod misc;\n+pub mod misc_early;\n+pub mod mut_mut;\n+pub mod mut_reference;\n pub mod mutex_atomic;\n-pub mod zero_div_zero;\n-pub mod open_options;\n+pub mod needless_bool;\n pub mod needless_features;\n pub mod needless_update;\n pub mod no_effect;\n-pub mod temporary_assignment;\n-pub mod transmute;\n-pub mod cyclomatic_complexity;\n-pub mod escape;\n-pub mod entry;\n-pub mod misc_early;\n-pub mod array_indexing;\n+pub mod open_options;\n pub mod panic;\n-pub mod derive;\n+pub mod precedence;\n pub mod print;\n-pub mod vec;\n-pub mod drop_ref;\n+pub mod ptr_arg;\n+pub mod ranges;\n pub mod regex;\n+pub mod returns;\n+pub mod shadow;\n+pub mod strings;\n+pub mod temporary_assignment;\n+pub mod transmute;\n+pub mod types;\n+pub mod unicode;\n+pub mod vec;\n+pub mod zero_div_zero;\n+// end lints modules, do not remove this comment, it\u2019s used in `update_lints`\n \n mod reexport {\n     pub use syntax::ast::{Name, NodeId};"}, {"sha": "2eaa6ab62116d8a279fb336310f4aa798132f129", "filename": "util/update_lints.py", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/5fe6e9f911f69cdef209c20b2024c33b19bf3993/util%2Fupdate_lints.py", "raw_url": "https://github.com/rust-lang/rust/raw/5fe6e9f911f69cdef209c20b2024c33b19bf3993/util%2Fupdate_lints.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/util%2Fupdate_lints.py?ref=5fe6e9f911f69cdef209c20b2024c33b19bf3993", "patch": "@@ -60,6 +60,13 @@ def gen_group(lints, levels=None):\n         yield '        %s::%s,\\n' % (module, name.upper())\n \n \n+def gen_mods(lints):\n+    \"\"\"Declare modules\"\"\"\n+\n+    for module in sorted(set(lint[0] for lint in lints)):\n+        yield 'pub mod %s;\\n' % module\n+\n+\n def replace_region(fn, region_start, region_end, callback,\n                    replace_start=True, write_back=True):\n     \"\"\"Replace a region in a file delimited by two lines matching regexes.\n@@ -128,6 +135,12 @@ def main(print_only=False, check=False):\n         lambda: ['There are %d lints included in this crate:\\n' % len(lints)],\n         write_back=not check)\n \n+    # update the `pub mod` list\n+    changed |= replace_region(\n+        'src/lib.rs', r'begin lints modules', r'end lints modules',\n+        lambda: gen_mods(lints),\n+        replace_start=False, write_back=not check)\n+\n     # same for \"clippy\" lint collection\n     changed |= replace_region(\n         'src/lib.rs', r'reg.register_lint_group\\(\"clippy\"', r'\\]\\);',"}]}