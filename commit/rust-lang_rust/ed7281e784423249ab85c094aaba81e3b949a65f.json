{"sha": "ed7281e784423249ab85c094aaba81e3b949a65f", "node_id": "C_kwDOAAsO6NoAKGVkNzI4MWU3ODQ0MjMyNDlhYjg1YzA5NGFhYmE4MWUzYjk0OWE2NWY", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-06-17T21:59:08Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-06-17T21:59:08Z"}, "message": "Auto merge of #112595 - hargoniX:l4re_fix, r=Mark-Simulacrum\n\nfix: get the l4re target working again\n\nThis is based on work from https://github.com/rust-lang/rust/pull/103966, addressing the review comment by `@m-ou-se` at the time and \"fixing\" the (probably newly) missing read_buf.", "tree": {"sha": "e963d9971bab75ec28b0f326301e2580508a5096", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e963d9971bab75ec28b0f326301e2580508a5096"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ed7281e784423249ab85c094aaba81e3b949a65f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ed7281e784423249ab85c094aaba81e3b949a65f", "html_url": "https://github.com/rust-lang/rust/commit/ed7281e784423249ab85c094aaba81e3b949a65f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ed7281e784423249ab85c094aaba81e3b949a65f/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3b2073f0762cff4d3d625bb10017e0ce4e7abe50", "url": "https://api.github.com/repos/rust-lang/rust/commits/3b2073f0762cff4d3d625bb10017e0ce4e7abe50", "html_url": "https://github.com/rust-lang/rust/commit/3b2073f0762cff4d3d625bb10017e0ce4e7abe50"}, {"sha": "82466625b48790fe01bba1137d506c3fe2c128cc", "url": "https://api.github.com/repos/rust-lang/rust/commits/82466625b48790fe01bba1137d506c3fe2c128cc", "html_url": "https://github.com/rust-lang/rust/commit/82466625b48790fe01bba1137d506c3fe2c128cc"}], "stats": {"total": 26, "additions": 23, "deletions": 3}, "files": [{"sha": "386a399f53228a1cfa9b22895b241116cc3c95c8", "filename": "library/std/src/personality.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ed7281e784423249ab85c094aaba81e3b949a65f/library%2Fstd%2Fsrc%2Fpersonality.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ed7281e784423249ab85c094aaba81e3b949a65f/library%2Fstd%2Fsrc%2Fpersonality.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fpersonality.rs?ref=ed7281e784423249ab85c094aaba81e3b949a65f", "patch": "@@ -29,7 +29,7 @@ cfg_if::cfg_if! {\n         all(target_family = \"windows\", target_env = \"gnu\"),\n         target_os = \"psp\",\n         target_os = \"solid_asp3\",\n-        all(target_family = \"unix\", not(target_os = \"espidf\")),\n+        all(target_family = \"unix\", not(target_os = \"espidf\"), not(target_os = \"l4re\")),\n         all(target_vendor = \"fortanix\", target_env = \"sgx\"),\n     ))] {\n         mod gcc;"}, {"sha": "fe9559f2a569f940ef4504173d4e5d92420dbead", "filename": "library/std/src/sys/unix/l4re.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/ed7281e784423249ab85c094aaba81e3b949a65f/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fl4re.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ed7281e784423249ab85c094aaba81e3b949a65f/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fl4re.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fl4re.rs?ref=ed7281e784423249ab85c094aaba81e3b949a65f", "patch": "@@ -10,7 +10,7 @@ macro_rules! unimpl {\n pub mod net {\n     #![allow(warnings)]\n     use crate::fmt;\n-    use crate::io::{self, IoSlice, IoSliceMut};\n+    use crate::io::{self, BorrowedCursor, IoSlice, IoSliceMut};\n     use crate::net::{Ipv4Addr, Ipv6Addr, Shutdown, SocketAddr};\n     use crate::os::unix::io::{AsFd, AsRawFd, BorrowedFd, FromRawFd, IntoRawFd, RawFd};\n     use crate::sys::fd::FileDesc;\n@@ -218,6 +218,10 @@ pub mod net {\n             unimpl!();\n         }\n \n+        pub fn read_buf(&self, _: BorrowedCursor<'_>) -> io::Result<()> {\n+            unimpl!();\n+        }\n+\n         pub fn read_vectored(&self, _: &mut [IoSliceMut<'_>]) -> io::Result<usize> {\n             unimpl!();\n         }"}, {"sha": "22d9d6141f404056fac6a9436519e1faf68af197", "filename": "library/std/src/sys/unix/process/process_unix.rs", "status": "modified", "additions": 17, "deletions": 1, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/ed7281e784423249ab85c094aaba81e3b949a65f/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fprocess%2Fprocess_unix.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ed7281e784423249ab85c094aaba81e3b949a65f/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fprocess%2Fprocess_unix.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fprocess%2Fprocess_unix.rs?ref=ed7281e784423249ab85c094aaba81e3b949a65f", "patch": "@@ -836,31 +836,47 @@ fn signal_string(signal: i32) -> &'static str {\n         libc::SIGILL => \" (SIGILL)\",\n         libc::SIGTRAP => \" (SIGTRAP)\",\n         libc::SIGABRT => \" (SIGABRT)\",\n+        #[cfg(not(target_os = \"l4re\"))]\n         libc::SIGBUS => \" (SIGBUS)\",\n         libc::SIGFPE => \" (SIGFPE)\",\n         libc::SIGKILL => \" (SIGKILL)\",\n+        #[cfg(not(target_os = \"l4re\"))]\n         libc::SIGUSR1 => \" (SIGUSR1)\",\n         libc::SIGSEGV => \" (SIGSEGV)\",\n+        #[cfg(not(target_os = \"l4re\"))]\n         libc::SIGUSR2 => \" (SIGUSR2)\",\n         libc::SIGPIPE => \" (SIGPIPE)\",\n         libc::SIGALRM => \" (SIGALRM)\",\n         libc::SIGTERM => \" (SIGTERM)\",\n+        #[cfg(not(target_os = \"l4re\"))]\n         libc::SIGCHLD => \" (SIGCHLD)\",\n+        #[cfg(not(target_os = \"l4re\"))]\n         libc::SIGCONT => \" (SIGCONT)\",\n+        #[cfg(not(target_os = \"l4re\"))]\n         libc::SIGSTOP => \" (SIGSTOP)\",\n+        #[cfg(not(target_os = \"l4re\"))]\n         libc::SIGTSTP => \" (SIGTSTP)\",\n+        #[cfg(not(target_os = \"l4re\"))]\n         libc::SIGTTIN => \" (SIGTTIN)\",\n+        #[cfg(not(target_os = \"l4re\"))]\n         libc::SIGTTOU => \" (SIGTTOU)\",\n+        #[cfg(not(target_os = \"l4re\"))]\n         libc::SIGURG => \" (SIGURG)\",\n+        #[cfg(not(target_os = \"l4re\"))]\n         libc::SIGXCPU => \" (SIGXCPU)\",\n+        #[cfg(not(target_os = \"l4re\"))]\n         libc::SIGXFSZ => \" (SIGXFSZ)\",\n+        #[cfg(not(target_os = \"l4re\"))]\n         libc::SIGVTALRM => \" (SIGVTALRM)\",\n+        #[cfg(not(target_os = \"l4re\"))]\n         libc::SIGPROF => \" (SIGPROF)\",\n+        #[cfg(not(target_os = \"l4re\"))]\n         libc::SIGWINCH => \" (SIGWINCH)\",\n-        #[cfg(not(target_os = \"haiku\"))]\n+        #[cfg(not(any(target_os = \"haiku\", target_os = \"l4re\")))]\n         libc::SIGIO => \" (SIGIO)\",\n         #[cfg(target_os = \"haiku\")]\n         libc::SIGPOLL => \" (SIGPOLL)\",\n+        #[cfg(not(target_os = \"l4re\"))]\n         libc::SIGSYS => \" (SIGSYS)\",\n         // For information on Linux signals, run `man 7 signal`\n         #[cfg(all("}]}