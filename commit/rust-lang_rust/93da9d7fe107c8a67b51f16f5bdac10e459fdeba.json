{"sha": "93da9d7fe107c8a67b51f16f5bdac10e459fdeba", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkzZGE5ZDdmZTEwN2M4YTY3YjUxZjE2ZjViZGFjMTBlNDU5ZmRlYmE=", "commit": {"author": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2020-03-13T19:03:34Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-03-13T19:03:34Z"}, "message": "Rollup merge of #69966 - JohnTitor:more-more-tests, r=Centril\n\nAdd more regression tests\n\nCloses #58490, closes #60390, closes #62504, closes #67739, closes #69092\n\nr? @Centril", "tree": {"sha": "247ac73cfc61976658799bd702f7fa732abadcf2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/247ac73cfc61976658799bd702f7fa732abadcf2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/93da9d7fe107c8a67b51f16f5bdac10e459fdeba", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJea9kGCRBK7hj4Ov3rIwAAdHIIADeo1R3iD1ejboiB2duhbE0i\nqHotiFJT1qs2FYZpXmOXlSgPytY1JXhRZQv2GB5UVMlyY6Ntrhxb4hqVtYXstPDf\nwEbMrPraRXEyukt+FMP0lRVwT5MZ16kGtFbK9HGz5gdSm1aRJeu0/QZcCpfIJ/LY\n1CbR1P/qmqwbXEmbG59EgTZ3rplwCPXEKDy818cFMcsQrsKhxu14ijo6Xjs4UAbG\nbcV0AqH+2mLjt6cN2yDw/X2FOAnIO0XgOtK+TByVIIv/gQyLp2KBaCTm1NkybjCZ\nzdiL3sbrYiFBJ6AE2GgTEw+RXzrGa2b1gfyXptA1IYgb326OPa893sCMiOHFyM4=\n=CW1X\n-----END PGP SIGNATURE-----\n", "payload": "tree 247ac73cfc61976658799bd702f7fa732abadcf2\nparent f2af2cff0fa16aaa277241f6a8c8dbd9c205c4a8\nparent 7c987eb02091c01763c5fb688f093f8974e733b1\nauthor Yuki Okushi <huyuumi.dev@gmail.com> 1584126214 +0900\ncommitter GitHub <noreply@github.com> 1584126214 +0900\n\nRollup merge of #69966 - JohnTitor:more-more-tests, r=Centril\n\nAdd more regression tests\n\nCloses #58490, closes #60390, closes #62504, closes #67739, closes #69092\n\nr? @Centril\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/93da9d7fe107c8a67b51f16f5bdac10e459fdeba", "html_url": "https://github.com/rust-lang/rust/commit/93da9d7fe107c8a67b51f16f5bdac10e459fdeba", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/93da9d7fe107c8a67b51f16f5bdac10e459fdeba/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f2af2cff0fa16aaa277241f6a8c8dbd9c205c4a8", "url": "https://api.github.com/repos/rust-lang/rust/commits/f2af2cff0fa16aaa277241f6a8c8dbd9c205c4a8", "html_url": "https://github.com/rust-lang/rust/commit/f2af2cff0fa16aaa277241f6a8c8dbd9c205c4a8"}, {"sha": "7c987eb02091c01763c5fb688f093f8974e733b1", "url": "https://api.github.com/repos/rust-lang/rust/commits/7c987eb02091c01763c5fb688f093f8974e733b1", "html_url": "https://github.com/rust-lang/rust/commit/7c987eb02091c01763c5fb688f093f8974e733b1"}], "stats": {"total": 128, "additions": 128, "deletions": 0}, "files": [{"sha": "caa5c2e0b9f965f1288a82b33a4b861b9fed8e50", "filename": "src/test/ui/asm/issue-69092.rs", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/93da9d7fe107c8a67b51f16f5bdac10e459fdeba/src%2Ftest%2Fui%2Fasm%2Fissue-69092.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93da9d7fe107c8a67b51f16f5bdac10e459fdeba/src%2Ftest%2Fui%2Fasm%2Fissue-69092.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasm%2Fissue-69092.rs?ref=93da9d7fe107c8a67b51f16f5bdac10e459fdeba", "patch": "@@ -0,0 +1,10 @@\n+// build-fail\n+// ignore-emscripten no asm! support\n+// Regression test for #69092\n+\n+#![feature(asm)]\n+\n+fn main() {\n+    unsafe { asm!(\".ascii \\\"Xen\\0\\\"\"); }\n+    //~^ ERROR: <inline asm>:1:9: error: expected string in '.ascii' directive\n+}"}, {"sha": "5661097cb8b804fec8bec3464a08fe01a27d145f", "filename": "src/test/ui/asm/issue-69092.stderr", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/93da9d7fe107c8a67b51f16f5bdac10e459fdeba/src%2Ftest%2Fui%2Fasm%2Fissue-69092.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/93da9d7fe107c8a67b51f16f5bdac10e459fdeba/src%2Ftest%2Fui%2Fasm%2Fissue-69092.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasm%2Fissue-69092.stderr?ref=93da9d7fe107c8a67b51f16f5bdac10e459fdeba", "patch": "@@ -0,0 +1,11 @@\n+error: <inline asm>:1:9: error: expected string in '.ascii' directive\n+        .ascii \"Xen\n+               ^\n+\n+  --> $DIR/issue-69092.rs:8:14\n+   |\n+LL |     unsafe { asm!(\".ascii \\\"Xen\\0\\\"\"); }\n+   |              ^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+error: aborting due to previous error\n+"}, {"sha": "74ed3d354fc747562ff3d2b87a0cd1003bac99b3", "filename": "src/test/ui/const-generics/issues/issue-62504.rs", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/93da9d7fe107c8a67b51f16f5bdac10e459fdeba/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-62504.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93da9d7fe107c8a67b51f16f5bdac10e459fdeba/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-62504.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-62504.rs?ref=93da9d7fe107c8a67b51f16f5bdac10e459fdeba", "patch": "@@ -0,0 +1,25 @@\n+// Regression test for #62504\n+\n+#![feature(const_generics)]\n+#![allow(incomplete_features)]\n+\n+trait HasSize {\n+    const SIZE: usize;\n+}\n+\n+impl<const X: usize> HasSize for ArrayHolder<{ X }> {\n+    const SIZE: usize = X;\n+}\n+\n+struct ArrayHolder<const X: usize>([u32; X]);\n+\n+impl<const X: usize> ArrayHolder<{ X }> {\n+    pub const fn new() -> Self {\n+        ArrayHolder([0; Self::SIZE])\n+        //~^ ERROR: array lengths can't depend on generic parameters\n+    }\n+}\n+\n+fn main() {\n+    let mut array = ArrayHolder::new();\n+}"}, {"sha": "c2a752ec1715fc2f6d8b6c77258d9af1d6e59e83", "filename": "src/test/ui/const-generics/issues/issue-62504.stderr", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/93da9d7fe107c8a67b51f16f5bdac10e459fdeba/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-62504.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/93da9d7fe107c8a67b51f16f5bdac10e459fdeba/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-62504.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-62504.stderr?ref=93da9d7fe107c8a67b51f16f5bdac10e459fdeba", "patch": "@@ -0,0 +1,8 @@\n+error: array lengths can't depend on generic parameters\n+  --> $DIR/issue-62504.rs:18:25\n+   |\n+LL |         ArrayHolder([0; Self::SIZE])\n+   |                         ^^^^^^^^^^\n+\n+error: aborting due to previous error\n+"}, {"sha": "79c5ac9dd187e035f8be0b93c60a6eb025e7bf3e", "filename": "src/test/ui/const-generics/issues/issue-67739.rs", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/93da9d7fe107c8a67b51f16f5bdac10e459fdeba/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-67739.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93da9d7fe107c8a67b51f16f5bdac10e459fdeba/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-67739.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-67739.rs?ref=93da9d7fe107c8a67b51f16f5bdac10e459fdeba", "patch": "@@ -0,0 +1,18 @@\n+// Regression test for #67739\n+\n+#![allow(incomplete_features)]\n+#![feature(const_generics)]\n+\n+use std::mem;\n+\n+pub trait Trait {\n+    type Associated: Sized;\n+\n+    fn associated_size(&self) -> usize {\n+        [0u8; mem::size_of::<Self::Associated>()];\n+        //~^ ERROR: array lengths can't depend on generic parameters\n+        0\n+    }\n+}\n+\n+fn main() {}"}, {"sha": "a31b556c086f8301a3f476670300907c2fe608df", "filename": "src/test/ui/const-generics/issues/issue-67739.stderr", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/93da9d7fe107c8a67b51f16f5bdac10e459fdeba/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-67739.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/93da9d7fe107c8a67b51f16f5bdac10e459fdeba/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-67739.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-67739.stderr?ref=93da9d7fe107c8a67b51f16f5bdac10e459fdeba", "patch": "@@ -0,0 +1,8 @@\n+error: array lengths can't depend on generic parameters\n+  --> $DIR/issue-67739.rs:12:15\n+   |\n+LL |         [0u8; mem::size_of::<Self::Associated>()];\n+   |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+error: aborting due to previous error\n+"}, {"sha": "97e71c9a1ce40bb9a4e83641a5786c133ae71d85", "filename": "src/test/ui/macros/issue-58490.rs", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/93da9d7fe107c8a67b51f16f5bdac10e459fdeba/src%2Ftest%2Fui%2Fmacros%2Fissue-58490.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93da9d7fe107c8a67b51f16f5bdac10e459fdeba/src%2Ftest%2Fui%2Fmacros%2Fissue-58490.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Fissue-58490.rs?ref=93da9d7fe107c8a67b51f16f5bdac10e459fdeba", "patch": "@@ -0,0 +1,26 @@\n+// Regression test for #58490\n+\n+macro_rules! a {\n+    ( @1 $i:item ) => {\n+        a! { @2 $i }\n+    };\n+    ( @2 $i:item ) => {\n+        $i\n+    };\n+}\n+mod b {\n+    a! {\n+        @1\n+        #[macro_export]\n+        macro_rules! b { () => () }\n+    }\n+    #[macro_export]\n+    macro_rules! b { () => () }\n+    //~^ ERROR: the name `b` is defined multiple times\n+}\n+mod c {\n+    #[allow(unused_imports)]\n+    use crate::b;\n+}\n+\n+fn main() {}"}, {"sha": "b1f0896f3b65c920457458271c801e239f32d295", "filename": "src/test/ui/macros/issue-58490.stderr", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/93da9d7fe107c8a67b51f16f5bdac10e459fdeba/src%2Ftest%2Fui%2Fmacros%2Fissue-58490.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/93da9d7fe107c8a67b51f16f5bdac10e459fdeba/src%2Ftest%2Fui%2Fmacros%2Fissue-58490.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Fissue-58490.stderr?ref=93da9d7fe107c8a67b51f16f5bdac10e459fdeba", "patch": "@@ -0,0 +1,14 @@\n+error[E0428]: the name `b` is defined multiple times\n+  --> $DIR/issue-58490.rs:18:5\n+   |\n+LL |         macro_rules! b { () => () }\n+   |         -------------- previous definition of the macro `b` here\n+...\n+LL |     macro_rules! b { () => () }\n+   |     ^^^^^^^^^^^^^^ `b` redefined here\n+   |\n+   = note: `b` must be defined only once in the macro namespace of this module\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0428`."}, {"sha": "fd9d6b46dd4440a9e29bc03efbe581e0746854c0", "filename": "src/test/ui/mir/issue-60390.rs", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/93da9d7fe107c8a67b51f16f5bdac10e459fdeba/src%2Ftest%2Fui%2Fmir%2Fissue-60390.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93da9d7fe107c8a67b51f16f5bdac10e459fdeba/src%2Ftest%2Fui%2Fmir%2Fissue-60390.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmir%2Fissue-60390.rs?ref=93da9d7fe107c8a67b51f16f5bdac10e459fdeba", "patch": "@@ -0,0 +1,8 @@\n+// check-pass\n+// compile-flags: --emit=mir,link\n+// Regression test for #60390, this ICE requires `--emit=mir` flag.\n+\n+fn main() {\n+    enum Inner { Member(u32) };\n+    Inner::Member(0);\n+}"}]}