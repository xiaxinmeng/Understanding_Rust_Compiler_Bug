{"sha": "e995a91a314da7df85f5471cbc621874b5d42b53", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU5OTVhOTFhMzE0ZGE3ZGY4NWY1NDcxY2JjNjIxODc0YjVkNDJiNTM=", "commit": {"author": {"name": "Shotaro Yamada", "email": "sinkuu@sinkuu.xyz", "date": "2018-04-02T23:45:06Z"}, "committer": {"name": "Shotaro Yamada", "email": "sinkuu@sinkuu.xyz", "date": "2018-07-27T14:26:36Z"}, "message": "Better Option handling", "tree": {"sha": "a37a7ebcffe20c95b9b07ea159d8060c174a1b86", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a37a7ebcffe20c95b9b07ea159d8060c174a1b86"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e995a91a314da7df85f5471cbc621874b5d42b53", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e995a91a314da7df85f5471cbc621874b5d42b53", "html_url": "https://github.com/rust-lang/rust/commit/e995a91a314da7df85f5471cbc621874b5d42b53", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e995a91a314da7df85f5471cbc621874b5d42b53/comments", "author": {"login": "sinkuu", "id": 7091080, "node_id": "MDQ6VXNlcjcwOTEwODA=", "avatar_url": "https://avatars.githubusercontent.com/u/7091080?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sinkuu", "html_url": "https://github.com/sinkuu", "followers_url": "https://api.github.com/users/sinkuu/followers", "following_url": "https://api.github.com/users/sinkuu/following{/other_user}", "gists_url": "https://api.github.com/users/sinkuu/gists{/gist_id}", "starred_url": "https://api.github.com/users/sinkuu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sinkuu/subscriptions", "organizations_url": "https://api.github.com/users/sinkuu/orgs", "repos_url": "https://api.github.com/users/sinkuu/repos", "events_url": "https://api.github.com/users/sinkuu/events{/privacy}", "received_events_url": "https://api.github.com/users/sinkuu/received_events", "type": "User", "site_admin": false}, "committer": {"login": "sinkuu", "id": 7091080, "node_id": "MDQ6VXNlcjcwOTEwODA=", "avatar_url": "https://avatars.githubusercontent.com/u/7091080?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sinkuu", "html_url": "https://github.com/sinkuu", "followers_url": "https://api.github.com/users/sinkuu/followers", "following_url": "https://api.github.com/users/sinkuu/following{/other_user}", "gists_url": "https://api.github.com/users/sinkuu/gists{/gist_id}", "starred_url": "https://api.github.com/users/sinkuu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sinkuu/subscriptions", "organizations_url": "https://api.github.com/users/sinkuu/orgs", "repos_url": "https://api.github.com/users/sinkuu/repos", "events_url": "https://api.github.com/users/sinkuu/events{/privacy}", "received_events_url": "https://api.github.com/users/sinkuu/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1bc49a97433e8f1048f78f3ff93ea6226a252909", "url": "https://api.github.com/repos/rust-lang/rust/commits/1bc49a97433e8f1048f78f3ff93ea6226a252909", "html_url": "https://github.com/rust-lang/rust/commit/1bc49a97433e8f1048f78f3ff93ea6226a252909"}], "stats": {"total": 16, "additions": 9, "deletions": 7}, "files": [{"sha": "14a818ddafb710f09f8197d853480d097347fb23", "filename": "src/librustc/dep_graph/dep_node.rs", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/e995a91a314da7df85f5471cbc621874b5d42b53/src%2Flibrustc%2Fdep_graph%2Fdep_node.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e995a91a314da7df85f5471cbc621874b5d42b53/src%2Flibrustc%2Fdep_graph%2Fdep_node.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fdep_graph%2Fdep_node.rs?ref=e995a91a314da7df85f5471cbc621874b5d42b53", "patch": "@@ -334,11 +334,8 @@ macro_rules! define_dep_nodes {\n             pub fn extract_def_id(&self, tcx: TyCtxt) -> Option<DefId> {\n                 if self.kind.can_reconstruct_query_key() {\n                     let def_path_hash = DefPathHash(self.hash);\n-                    if let Some(ref def_path_map) = tcx.def_path_hash_to_def_id.as_ref() {\n-                        def_path_map.get(&def_path_hash).cloned()\n-                    } else {\n-                       None\n-                    }\n+                    tcx.def_path_hash_to_def_id.as_ref()?\n+                        .get(&def_path_hash).cloned()\n                 } else {\n                     None\n                 }"}, {"sha": "e308f2924a05c571c0efa4a4a24cdfc704c8789e", "filename": "src/librustc/dep_graph/graph.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/e995a91a314da7df85f5471cbc621874b5d42b53/src%2Flibrustc%2Fdep_graph%2Fgraph.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e995a91a314da7df85f5471cbc621874b5d42b53/src%2Flibrustc%2Fdep_graph%2Fgraph.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fdep_graph%2Fgraph.rs?ref=e995a91a314da7df85f5471cbc621874b5d42b53", "patch": "@@ -489,7 +489,12 @@ impl DepGraph {\n     }\n \n     pub(super) fn dep_node_debug_str(&self, dep_node: DepNode) -> Option<String> {\n-        self.data.as_ref().and_then(|t| t.dep_node_debug.borrow().get(&dep_node).cloned())\n+        self.data\n+            .as_ref()?\n+            .dep_node_debug\n+            .borrow()\n+            .get(&dep_node)\n+            .cloned()\n     }\n \n     pub fn edge_deduplication_data(&self) -> (u64, u64) {"}, {"sha": "8a714a5fbd847173c8b2eefc82da51cf576dd0e2", "filename": "src/librustc/hir/pat_util.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e995a91a314da7df85f5471cbc621874b5d42b53/src%2Flibrustc%2Fhir%2Fpat_util.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e995a91a314da7df85f5471cbc621874b5d42b53/src%2Flibrustc%2Fhir%2Fpat_util.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fhir%2Fpat_util.rs?ref=e995a91a314da7df85f5471cbc621874b5d42b53", "patch": "@@ -47,7 +47,7 @@ impl<T: ExactSizeIterator> EnumerateAndAdjustIterator for T {\n         let actual_len = self.len();\n         EnumerateAndAdjust {\n             enumerate: self.enumerate(),\n-            gap_pos: if let Some(gap_pos) = gap_pos { gap_pos } else { expected_len },\n+            gap_pos: gap_pos.unwrap_or(expected_len),\n             gap_len: expected_len - actual_len,\n         }\n     }"}]}